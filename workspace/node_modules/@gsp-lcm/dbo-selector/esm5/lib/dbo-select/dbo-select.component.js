/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';
import { DboHelpDevService } from '../dbo-help-dev.service';
var DboSelectComponent = /** @class */ (function () {
    function DboSelectComponent(dboHelpService) {
        this.dboHelpService = dboHelpService;
        this.url = '';
        /**
         * 帮助标题
         */
        this.title = '帮助';
        /**
         * 输出事件
         */
        this.selectedAfterOk = new EventEmitter();
        this.modalClosed = new EventEmitter();
        // 模式
        this.selectableSettings = {
            checkboxOnly: true,
            mode: 'single',
            enabled: true
        };
    }
    /**输入属性变化后 */
    /**
     * 输入属性变化后
     * @param {?} changes
     * @return {?}
     */
    DboSelectComponent.prototype.ngOnChanges = /**
     * 输入属性变化后
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
    };
    /**
     * @return {?}
     */
    DboSelectComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 服务端获取数据
        this.dboHelpService.getAllDatabaseObject(this.url)
            .subscribe((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            _this.data = result;
            _this.curSelectedKeys = [];
            if (_this.initSelectedKeys) {
                _this.initSelectedKeys.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return _this.curSelectedKeys.push(item); }));
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            console.log('获取数据源失败！');
            console.log(error);
        }));
    };
    /**帮助确定按钮 */
    /**
     * 帮助确定按钮
     * @return {?}
     */
    DboSelectComponent.prototype.btnOk = /**
     * 帮助确定按钮
     * @return {?}
     */
    function () {
        var _this = this;
        // 根据选中行获取实体数据
        /** @type {?} */
        var selectPosEntity = [];
        this.curSelectedKeys.forEach((/**
         * @param {?} dboID
         * @return {?}
         */
        function (dboID) {
            /** @type {?} */
            var selectDBO = _this.data.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item['id'] === dboID; }));
            selectPosEntity.push(selectDBO);
        }));
        if (!selectPosEntity) {
            alert('请选择数据库对象');
            return;
        }
        else {
            // 发射当前选中数据
            this.selectedAfterOk.next(selectPosEntity);
        }
        this.hideModal();
    };
    /**
     * @return {?}
     */
    DboSelectComponent.prototype.hideModal = /**
     * @return {?}
     */
    function () {
        this.modalClosed.emit();
    };
    DboSelectComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-dbo-select',
                    template: "<div class=\"modal-body\">\r\n<div class=\"templateBlock\">\r\n  <kendo-grid [class]=\"'flex-auto'\" [selectable]=\"selectableSettings\" [kendoGridSelectBy]=\"'id'\" [selectedKeys]=\"curSelectedKeys\"\r\n    [kendoGridBinding]=\"data\">\r\n    <kendo-grid-checkbox-column width=\"10%\"></kendo-grid-checkbox-column>\r\n    <kendo-grid-column field=\"code\" title=\"\u7F16\u53F7\" width=\"40%\"></kendo-grid-column>\r\n    <kendo-grid-column field=\"name\" title=\"\u540D\u79F0\" width=\"45%\"></kendo-grid-column>\r\n  </kendo-grid>\r\n  </div>\r\n</div>\r\n<ng-template #btns>\r\n<button type=\"button\" class=\"btn btn-default btn-primary\" (click)=\"btnOk()\">\u786E\u5B9A</button>\r\n<button type=\"button\" class=\"btn btn-default\" (click)=\"hideModal()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DboSelectComponent.ctorParameters = function () { return [
        { type: DboHelpDevService }
    ]; };
    DboSelectComponent.propDecorators = {
        url: [{ type: Input }],
        title: [{ type: Input }],
        isShow: [{ type: Input }],
        initSelectedKeys: [{ type: Input }],
        selectedAfterOk: [{ type: Output }],
        modalClosed: [{ type: Output }],
        modalFooter: [{ type: ViewChild, args: ['modalFooter',] }],
        btns: [{ type: ViewChild, args: ['btns',] }]
    };
    return DboSelectComponent;
}());
export { DboSelectComponent };
if (false) {
    /** @type {?} */
    DboSelectComponent.prototype.url;
    /**
     * 帮助标题
     * @type {?}
     */
    DboSelectComponent.prototype.title;
    /**
     * 帮助打开状态
     * @type {?}
     */
    DboSelectComponent.prototype.isShow;
    /**
     * 选中列表
     * @type {?}
     */
    DboSelectComponent.prototype.initSelectedKeys;
    /**
     * 输出事件
     * @type {?}
     */
    DboSelectComponent.prototype.selectedAfterOk;
    /** @type {?} */
    DboSelectComponent.prototype.modalClosed;
    /** @type {?} */
    DboSelectComponent.prototype.modalFooter;
    /** @type {?} */
    DboSelectComponent.prototype.btns;
    /**
     * 当前界面选中的内码
     * @type {?}
     */
    DboSelectComponent.prototype.curSelectedKeys;
    /** @type {?} */
    DboSelectComponent.prototype.selectableSettings;
    /** @type {?} */
    DboSelectComponent.prototype.data;
    /**
     * @type {?}
     * @private
     */
    DboSelectComponent.prototype.dboHelpService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGJvLXNlbGVjdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWxjbS9kYm8tc2VsZWN0b3IvIiwic291cmNlcyI6WyJsaWIvZGJvLXNlbGVjdC9kYm8tc2VsZWN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBNEIsU0FBUyxFQUFFLFdBQVcsRUFBRyxNQUFNLGVBQWUsQ0FBQztBQUVsSSxPQUFPLEVBQUUsaUJBQWlCLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUUzRDtJQThCRSw0QkFDVSxjQUFpQztRQUFqQyxtQkFBYyxHQUFkLGNBQWMsQ0FBbUI7UUF4QjNDLFFBQUcsR0FBRyxFQUFFLENBQUM7Ozs7UUFHVCxVQUFLLEdBQUcsSUFBSSxDQUFDOzs7O1FBU0gsb0JBQWUsR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUM3RCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFhOUMsS0FBSztRQUNMLElBQUksQ0FBQyxrQkFBa0IsR0FBRztZQUN4QixZQUFZLEVBQUUsSUFBSTtZQUNsQixJQUFJLEVBQUUsUUFBUTtZQUNkLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQztJQUNKLENBQUM7SUFFRCxhQUFhOzs7Ozs7SUFDYix3Q0FBVzs7Ozs7SUFBWCxVQUFZLE9BQXNCO0lBQ2xDLENBQUM7Ozs7SUFDRCxxQ0FBUTs7O0lBQVI7UUFBQSxpQkFhQztRQVpDLFVBQVU7UUFDVixJQUFJLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7YUFDL0MsU0FBUzs7OztRQUFDLFVBQUEsTUFBTTtZQUNmLEtBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO1lBQ25CLEtBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1lBQzFCLElBQUksS0FBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUN6QixLQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRzs7OztnQkFBQyxVQUFBLElBQUksSUFBSSxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUEvQixDQUErQixFQUFDLENBQUM7YUFDcEU7UUFDSCxDQUFDOzs7O1FBQUUsVUFBQSxLQUFLO1lBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JCLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQztJQUNELFlBQVk7Ozs7O0lBQ1osa0NBQUs7Ozs7SUFBTDtRQUFBLGlCQWdCQzs7O1lBZE8sZUFBZSxHQUFHLEVBQUU7UUFDMUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQSxLQUFLOztnQkFDMUIsU0FBUyxHQUFHLEtBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTs7OztZQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssRUFBcEIsQ0FBb0IsRUFBQztZQUM5RCxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsRUFBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUNwQixLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbEIsT0FBTztTQUNSO2FBQU07WUFDTCxXQUFXO1lBQ1gsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDNUM7UUFDRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbkIsQ0FBQzs7OztJQUNELHNDQUFTOzs7SUFBVDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQzs7Z0JBOUVGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsZ0JBQWdCO29CQUMxQixpekJBQTBDOztpQkFFM0M7Ozs7Z0JBTlEsaUJBQWlCOzs7c0JBUXZCLEtBQUs7d0JBR0wsS0FBSzt5QkFHTCxLQUFLO21DQUdMLEtBQUs7a0NBSUwsTUFBTTs4QkFDTixNQUFNOzhCQUVOLFNBQVMsU0FBQyxhQUFhO3VCQUN2QixTQUFTLFNBQUMsTUFBTTs7SUF3RG5CLHlCQUFDO0NBQUEsQUEvRUQsSUErRUM7U0ExRVksa0JBQWtCOzs7SUFDN0IsaUNBQ1M7Ozs7O0lBRVQsbUNBQ2E7Ozs7O0lBRWIsb0NBQ2dCOzs7OztJQUVoQiw4Q0FDMkI7Ozs7O0lBRzNCLDZDQUF1RTs7SUFDdkUseUNBQWdEOztJQUVoRCx5Q0FBd0Q7O0lBQ3hELGtDQUEwQzs7Ozs7SUFHMUMsNkNBQTBCOztJQUMxQixnREFBdUM7O0lBQ3ZDLGtDQUFlOzs7OztJQUdiLDRDQUF5QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiAgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU2VsZWN0YWJsZVNldHRpbmdzIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZ3JpZCc7XHJcbmltcG9ydCB7IERib0hlbHBEZXZTZXJ2aWNlfSBmcm9tICcuLi9kYm8taGVscC1kZXYuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1kYm8tc2VsZWN0JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZGJvLXNlbGVjdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vZGJvLXNlbGVjdC5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIERib1NlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICBASW5wdXQoKVxyXG4gIHVybCA9ICcnO1xyXG4gIC8qKuW4ruWKqeagh+mimCAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgdGl0bGUgPSAn5biu5YqpJztcclxuICAvKirluK7liqnmiZPlvIDnirbmgIEgKi9cclxuICBASW5wdXQoKVxyXG4gIGlzU2hvdzogYm9vbGVhbjtcclxuICAvKirpgInkuK3liJfooaggKi9cclxuICBASW5wdXQoKVxyXG4gIGluaXRTZWxlY3RlZEtleXM6IHN0cmluZ1tdO1xyXG5cclxuICAvKirovpPlh7rkuovku7YgKi9cclxuICBAT3V0cHV0KCkgc2VsZWN0ZWRBZnRlck9rOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBtb2RhbENsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdtb2RhbEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2J0bnMnKSBidG5zOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAvKirlvZPliY3nlYzpnaLpgInkuK3nmoTlhoXnoIEgKi9cclxuICBjdXJTZWxlY3RlZEtleXM6IHN0cmluZ1tdO1xyXG4gIHNlbGVjdGFibGVTZXR0aW5nczogU2VsZWN0YWJsZVNldHRpbmdzO1xyXG4gIGRhdGE6IE9iamVjdFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZGJvSGVscFNlcnZpY2U6IERib0hlbHBEZXZTZXJ2aWNlLFxyXG4gICkge1xyXG4gICAgLy8g5qih5byPXHJcbiAgICB0aGlzLnNlbGVjdGFibGVTZXR0aW5ncyA9IHtcclxuICAgICAgY2hlY2tib3hPbmx5OiB0cnVlLFxyXG4gICAgICBtb2RlOiAnc2luZ2xlJyxcclxuICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKui+k+WFpeWxnuaAp+WPmOWMluWQjiAqL1xyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICB9XHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvLyDmnI3liqHnq6/ojrflj5bmlbDmja5cclxuICAgIHRoaXMuZGJvSGVscFNlcnZpY2UuZ2V0QWxsRGF0YWJhc2VPYmplY3QodGhpcy51cmwpXHJcbiAgICAgIC5zdWJzY3JpYmUocmVzdWx0ID0+IHtcclxuICAgICAgICB0aGlzLmRhdGEgPSByZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5jdXJTZWxlY3RlZEtleXMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5pbml0U2VsZWN0ZWRLZXlzKSB7XHJcbiAgICAgICAgICB0aGlzLmluaXRTZWxlY3RlZEtleXMubWFwKGl0ZW0gPT4gdGhpcy5jdXJTZWxlY3RlZEtleXMucHVzaChpdGVtKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+iOt+WPluaVsOaNrua6kOWksei0pe+8gScpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIC8qKuW4ruWKqeehruWumuaMiemSriAqL1xyXG4gIGJ0bk9rKCkge1xyXG4gICAgLy8g5qC55o2u6YCJ5Lit6KGM6I635Y+W5a6e5L2T5pWw5o2uXHJcbiAgICBjb25zdCBzZWxlY3RQb3NFbnRpdHkgPSBbXTtcclxuICAgIHRoaXMuY3VyU2VsZWN0ZWRLZXlzLmZvckVhY2goZGJvSUQgPT4ge1xyXG4gICAgICBjb25zdCBzZWxlY3REQk8gPSB0aGlzLmRhdGEuZmluZChpdGVtID0+IGl0ZW1bJ2lkJ10gPT09IGRib0lEKTtcclxuICAgICAgc2VsZWN0UG9zRW50aXR5LnB1c2goc2VsZWN0REJPKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghc2VsZWN0UG9zRW50aXR5KSB7XHJcbiAgICAgIGFsZXJ0KCfor7fpgInmi6nmlbDmja7lupPlr7nosaEnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g5Y+R5bCE5b2T5YmN6YCJ5Lit5pWw5o2uXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRBZnRlck9rLm5leHQoc2VsZWN0UG9zRW50aXR5KTtcclxuICAgIH1cclxuICAgIHRoaXMuaGlkZU1vZGFsKCk7XHJcbiAgfVxyXG4gIGhpZGVNb2RhbCgpOiB2b2lkIHtcclxuICAgIHRoaXMubW9kYWxDbG9zZWQuZW1pdCgpO1xyXG4gIH1cclxufVxyXG4iXX0=