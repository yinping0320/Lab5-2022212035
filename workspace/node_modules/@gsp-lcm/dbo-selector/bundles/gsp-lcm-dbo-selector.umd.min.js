!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@progress/kendo-angular-grid"),require("@angular/forms"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@gsp-lcm/dbo-selector",["exports","@angular/core","@angular/common","@progress/kendo-angular-grid","@angular/forms","@angular/common/http"],t):t((e["gsp-lcm"]=e["gsp-lcm"]||{},e["gsp-lcm"]["dbo-selector"]={}),e.ng.core,e.ng.common,e.kendoAngularGrid,e.ng.forms,e.ng.common.http)}(this,function(e,t,n,o,r,i){"use strict";var l=function(){function e(e){this.rest=e,this.databaseurlDev="/api/dev/main/v1.0/database-objects"}return e.prototype.getAllDatabaseObject=function(e){var t=this.databaseurlDev+"?relativePath="+e;return this.rest.get(t).pipe()},e.prototype.getCurrentDatabaseObject=function(e,t){var n=this.databaseurlDev+"/single?relativePath="+e+"&databaseobjectid="+t;return this.rest.get(n).pipe()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:i.HttpClient}]},e}(),s=function(){function e(e){this.dboHelpService=e,this.url="",this.title="帮助",this.selectedAfterOk=new t.EventEmitter,this.modalClosed=new t.EventEmitter,this.selectableSettings={checkboxOnly:!0,mode:"single",enabled:!0}}return e.prototype.ngOnChanges=function(e){},e.prototype.ngOnInit=function(){var t=this;this.dboHelpService.getAllDatabaseObject(this.url).subscribe(function(e){t.data=e,t.curSelectedKeys=[],t.initSelectedKeys&&t.initSelectedKeys.map(function(e){return t.curSelectedKeys.push(e)})},function(e){console.log("获取数据源失败！"),console.log(e)})},e.prototype.btnOk=function(){var n=this,o=[];this.curSelectedKeys.forEach(function(t){var e=n.data.find(function(e){return e.id===t});o.push(e)}),o?(this.selectedAfterOk.next(o),this.hideModal()):alert("请选择数据库对象")},e.prototype.hideModal=function(){this.modalClosed.emit()},e.decorators=[{type:t.Component,args:[{selector:"app-dbo-select",template:'<div class="modal-body">\r\n<div class="templateBlock">\r\n  <kendo-grid [class]="\'flex-auto\'" [selectable]="selectableSettings" [kendoGridSelectBy]="\'id\'" [selectedKeys]="curSelectedKeys"\r\n    [kendoGridBinding]="data">\r\n    <kendo-grid-checkbox-column width="10%"></kendo-grid-checkbox-column>\r\n    <kendo-grid-column field="code" title="编号" width="40%"></kendo-grid-column>\r\n    <kendo-grid-column field="name" title="名称" width="45%"></kendo-grid-column>\r\n  </kendo-grid>\r\n  </div>\r\n</div>\r\n<ng-template #btns>\r\n<button type="button" class="btn btn-default btn-primary" (click)="btnOk()">确定</button>\r\n<button type="button" class="btn btn-default" (click)="hideModal()">取消</button>\r\n</ng-template>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:l}]},e.propDecorators={url:[{type:t.Input}],title:[{type:t.Input}],isShow:[{type:t.Input}],initSelectedKeys:[{type:t.Input}],selectedAfterOk:[{type:t.Output}],modalClosed:[{type:t.Output}],modalFooter:[{type:t.ViewChild,args:["modalFooter"]}],btns:[{type:t.ViewChild,args:["btns"]}]},e}(),a=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,o.GridModule,r.FormsModule,i.HttpClientModule],providers:[l],declarations:[s],entryComponents:[s],exports:[s]}]}],e}();e.DboHelpDevService=l,e.DboSelectComponent=s,e.DboSelectModule=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-lcm-dbo-selector.umd.min.js.map