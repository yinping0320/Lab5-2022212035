{"version":3,"sources":["ng://@gsp-lcm/dbo-selector/lib/dbo-help-dev.service.ts","ng://@gsp-lcm/dbo-selector/lib/dbo-select/dbo-select.component.ts","ng://@gsp-lcm/dbo-selector/lib/dbo-select.module.ts"],"names":["DboHelpDevService","rest","this","databaseurlDev","prototype","getAllDatabaseObject","relativePath","url","get","pipe","getCurrentDatabaseObject","databaseobjectid","Injectable","HttpClient","DboSelectComponent","dboHelpService","title","selectedAfterOk","EventEmitter","modalClosed","selectableSettings","checkboxOnly","mode","enabled","ngOnChanges","changes","ngOnInit","_this","subscribe","result","data","curSelectedKeys","initSelectedKeys","map","item","push","error","console","log","btnOk","selectPosEntity","forEach","dboID","selectDBO","find","next","hideModal","alert","emit","Component","args","selector","template","Input","Output","ViewChild","DboSelectModule","NgModule","imports","CommonModule","GridModule","FormsModule","HttpClientModule","providers","declarations","entryComponents","exports"],"mappings":"mlBAAA,IAAAA,EAAA,WASE,SAAAA,EAAoBC,GAAAC,KAAAD,KAAAA,EADZC,KAAAC,eAAiB,sCAuB3B,OAhBEH,EAAAI,UAAAC,qBAAA,SAAqBC,OAEbC,EAAOL,KAAKC,eAAiB,iBAAmBG,EACtD,OAAOJ,KAAKD,KAAKO,IAAID,GAAKE,QAO5BT,EAAAI,UAAAM,yBAAA,SAAyBJ,EAAsBK,OACvCJ,EAAML,KAAKC,eAAiB,wBAA0BG,EACzD,qBAAuBK,EAC1B,OAAOT,KAAKD,KAAKO,IAAID,GAAKE,4BAtB7BG,EAAAA,sDAJQC,EAAAA,cA6BTb,EA/BA,GCAAc,EAAA,WAkCE,SAAAA,EACUC,GAAAb,KAAAa,eAAAA,EAxBVb,KAAAK,IAAM,GAGNL,KAAAc,MAAQ,KASEd,KAAAe,gBAAqC,IAAIC,EAAAA,aACzChB,KAAAiB,YAAc,IAAID,EAAAA,aAc1BhB,KAAKkB,mBAAqB,CACxBC,cAAc,EACdC,KAAM,SACNC,SAAS,GA0Cf,OArCET,EAAAV,UAAAoB,YAAA,SAAYC,KAEZX,EAAAV,UAAAsB,SAAA,WAAA,IAAAC,EAAAzB,KAEEA,KAAKa,eAAeV,qBAAqBH,KAAKK,KAC3CqB,UAAS,SAACC,GACTF,EAAKG,KAAOD,EACZF,EAAKI,gBAAkB,GACnBJ,EAAKK,kBACPL,EAAKK,iBAAiBC,IAAG,SAACC,GAAQ,OAAAP,EAAKI,gBAAgBI,KAAKD,MAE/D,SAAEE,GACDC,QAAQC,IAAI,YACZD,QAAQC,IAAIF,MAIlBtB,EAAAV,UAAAmC,MAAA,WAAA,IAAAZ,EAAAzB,KAEQsC,EAAkB,GACxBtC,KAAK6B,gBAAgBU,QAAO,SAACC,OACrBC,EAAYhB,EAAKG,KAAKc,KAAI,SAACV,GAAQ,OAAAA,EAAS,KAAMQ,IACxDF,EAAgBL,KAAKQ,KAGlBH,GAKHtC,KAAKe,gBAAgB4B,KAAKL,GAE5BtC,KAAK4C,aANHC,MAAM,aAQVjC,EAAAV,UAAA0C,UAAA,WACE5C,KAAKiB,YAAY6B,4BA7EpBC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,iBACVC,SAAA,qxBAJOpD,kCAQNqD,EAAAA,qBAGAA,EAAAA,sBAGAA,EAAAA,gCAGAA,EAAAA,+BAIAC,EAAAA,4BACAA,EAAAA,4BAEAC,EAAAA,UAASL,KAAA,CAAC,6BACVK,EAAAA,UAASL,KAAA,CAAC,WAwDbpC,EAnFA,GCAA0C,EAAA,WAQA,SAAAA,KAcA,2BAdCC,EAAAA,SAAQP,KAAA,CAAC,CACRQ,QAAS,CACPC,EAAAA,aACAC,EAAAA,WACAC,EAAAA,YACAC,EAAAA,kBAEFC,UAAW,CAAC/D,GACZgE,aAAc,CAAClD,GACfmD,gBAAiB,CAACnD,GAClBoD,QAAQ,CAACpD,OAIX0C,EAtBA","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { HttpClient} from '@angular/common/http';\r\n\r\n\r\n\r\n@Injectable()\r\nexport class DboHelpDevService {\r\n  private databaseurlDev = '/api/dev/main/v1.0/database-objects';\r\n  constructor(private rest: HttpClient) { }\r\n  public sessionId: string;\r\n\r\n/**\r\n * æ°æ®åºå¯¹è±¡éæ©å¸®å©çé¢ï¼è®¾è®¡æ¶ï¼\r\n */\r\n  getAllDatabaseObject(relativePath: string): Observable<any> {\r\n   \r\n    const url =  this.databaseurlDev + '?relativePath=' + relativePath;\r\n    return this.rest.get(url).pipe( );\r\n  }\r\n\r\n\r\n/**\r\n * æ°æ®åºå¯¹è±¡è¯¦ç»ä¿¡æ¯éæ©å¸®å©çé¢\r\n */\r\n  getCurrentDatabaseObject(relativePath: string, databaseobjectid: string): Observable<any> {\r\n    const url = this.databaseurlDev + '/single?relativePath=' + relativePath\r\n     + '&databaseobjectid=' + databaseobjectid;\r\n    return this.rest.get(url).pipe( );\r\n  }\r\n\r\n}\r\n\r\n","import { Component, OnInit, Input, Output, EventEmitter, OnChanges, SimpleChanges, ViewChild, TemplateRef  } from '@angular/core';\r\nimport { SelectableSettings } from '@progress/kendo-angular-grid';\r\nimport { DboHelpDevService} from '../dbo-help-dev.service';\r\n\r\n@Component({\r\n  selector: 'app-dbo-select',\r\n  templateUrl: './dbo-select.component.html',\r\n  styleUrls: ['./dbo-select.component.css']\r\n})\r\nexport class DboSelectComponent implements OnInit, OnChanges {\r\n  @Input()\r\n  url = '';\r\n  /**å¸®å©æ é¢ */\r\n  @Input()\r\n  title = 'å¸®å©';\r\n  /**å¸®å©æå¼ç¶æ */\r\n  @Input()\r\n  isShow: boolean;\r\n  /**éä¸­åè¡¨ */\r\n  @Input()\r\n  initSelectedKeys: string[];\r\n\r\n  /**è¾åºäºä»¶ */\r\n  @Output() selectedAfterOk: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() modalClosed = new EventEmitter<any>();\r\n\r\n  @ViewChild('modalFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('btns') btns: TemplateRef<any>;\r\n\r\n  /**å½åçé¢éä¸­çåç  */\r\n  curSelectedKeys: string[];\r\n  selectableSettings: SelectableSettings;\r\n  data: Object[];\r\n\r\n  constructor(\r\n    private dboHelpService: DboHelpDevService,\r\n  ) {\r\n    // æ¨¡å¼\r\n    this.selectableSettings = {\r\n      checkboxOnly: true,\r\n      mode: 'single',\r\n      enabled: true\r\n    };\r\n  }\r\n\r\n  /**è¾å¥å±æ§ååå */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n  }\r\n  ngOnInit() {\r\n    // æå¡ç«¯è·åæ°æ®\r\n    this.dboHelpService.getAllDatabaseObject(this.url)\r\n      .subscribe(result => {\r\n        this.data = result;\r\n        this.curSelectedKeys = [];\r\n        if (this.initSelectedKeys) {\r\n          this.initSelectedKeys.map(item => this.curSelectedKeys.push(item));\r\n        }\r\n      }, error => {\r\n        console.log('è·åæ°æ®æºå¤±è´¥ï¼');\r\n        console.log(error);\r\n      });\r\n  }\r\n  /**å¸®å©ç¡®å®æé® */\r\n  btnOk() {\r\n    // æ ¹æ®éä¸­è¡è·åå®ä½æ°æ®\r\n    const selectPosEntity = [];\r\n    this.curSelectedKeys.forEach(dboID => {\r\n      const selectDBO = this.data.find(item => item['id'] === dboID);\r\n      selectPosEntity.push(selectDBO);\r\n    });\r\n\r\n    if (!selectPosEntity) {\r\n      alert('è¯·éæ©æ°æ®åºå¯¹è±¡');\r\n      return;\r\n    } else {\r\n      // åå°å½åéä¸­æ°æ®\r\n      this.selectedAfterOk.next(selectPosEntity);\r\n    }\r\n    this.hideModal();\r\n  }\r\n  hideModal(): void {\r\n    this.modalClosed.emit();\r\n  }\r\n}\r\n","import {  NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {DboSelectComponent} from './dbo-select/dbo-select.component';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { DboHelpDevService } from './dbo-help-dev.service';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    GridModule,\r\n    FormsModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [DboHelpDevService],\r\n  declarations: [DboSelectComponent],\r\n  entryComponents: [DboSelectComponent],\r\n  exports:[DboSelectComponent]\r\n})\r\n\r\nexport class DboSelectModule {\r\n}\r\n"]}