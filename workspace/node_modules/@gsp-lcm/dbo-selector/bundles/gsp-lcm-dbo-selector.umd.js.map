{"version":3,"file":"gsp-lcm-dbo-selector.umd.js.map","sources":["ng://@gsp-lcm/dbo-selector/lib/dbo-help-dev.service.ts","ng://@gsp-lcm/dbo-selector/lib/dbo-select/dbo-select.component.ts","ng://@gsp-lcm/dbo-selector/lib/dbo-select.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { HttpClient} from '@angular/common/http';\r\n\r\n\r\n\r\n@Injectable()\r\nexport class DboHelpDevService {\r\n  private databaseurlDev = '/api/dev/main/v1.0/database-objects';\r\n  constructor(private rest: HttpClient) { }\r\n  public sessionId: string;\r\n\r\n/**\r\n * æ°æ®åºå¯¹è±¡éæ©å¸®å©çé¢ï¼è®¾è®¡æ¶ï¼\r\n */\r\n  getAllDatabaseObject(relativePath: string): Observable<any> {\r\n   \r\n    const url =  this.databaseurlDev + '?relativePath=' + relativePath;\r\n    return this.rest.get(url).pipe( );\r\n  }\r\n\r\n\r\n/**\r\n * æ°æ®åºå¯¹è±¡è¯¦ç»ä¿¡æ¯éæ©å¸®å©çé¢\r\n */\r\n  getCurrentDatabaseObject(relativePath: string, databaseobjectid: string): Observable<any> {\r\n    const url = this.databaseurlDev + '/single?relativePath=' + relativePath\r\n     + '&databaseobjectid=' + databaseobjectid;\r\n    return this.rest.get(url).pipe( );\r\n  }\r\n\r\n}\r\n\r\n","import { Component, OnInit, Input, Output, EventEmitter, OnChanges, SimpleChanges, ViewChild, TemplateRef  } from '@angular/core';\r\nimport { SelectableSettings } from '@progress/kendo-angular-grid';\r\nimport { DboHelpDevService} from '../dbo-help-dev.service';\r\n\r\n@Component({\r\n  selector: 'app-dbo-select',\r\n  templateUrl: './dbo-select.component.html',\r\n  styleUrls: ['./dbo-select.component.css']\r\n})\r\nexport class DboSelectComponent implements OnInit, OnChanges {\r\n  @Input()\r\n  url = '';\r\n  /**å¸®å©æ é¢ */\r\n  @Input()\r\n  title = 'å¸®å©';\r\n  /**å¸®å©æå¼ç¶æ */\r\n  @Input()\r\n  isShow: boolean;\r\n  /**éä¸­åè¡¨ */\r\n  @Input()\r\n  initSelectedKeys: string[];\r\n\r\n  /**è¾åºäºä»¶ */\r\n  @Output() selectedAfterOk: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() modalClosed = new EventEmitter<any>();\r\n\r\n  @ViewChild('modalFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('btns') btns: TemplateRef<any>;\r\n\r\n  /**å½åçé¢éä¸­çåç  */\r\n  curSelectedKeys: string[];\r\n  selectableSettings: SelectableSettings;\r\n  data: Object[];\r\n\r\n  constructor(\r\n    private dboHelpService: DboHelpDevService,\r\n  ) {\r\n    // æ¨¡å¼\r\n    this.selectableSettings = {\r\n      checkboxOnly: true,\r\n      mode: 'single',\r\n      enabled: true\r\n    };\r\n  }\r\n\r\n  /**è¾å¥å±æ§ååå */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n  }\r\n  ngOnInit() {\r\n    // æå¡ç«¯è·åæ°æ®\r\n    this.dboHelpService.getAllDatabaseObject(this.url)\r\n      .subscribe(result => {\r\n        this.data = result;\r\n        this.curSelectedKeys = [];\r\n        if (this.initSelectedKeys) {\r\n          this.initSelectedKeys.map(item => this.curSelectedKeys.push(item));\r\n        }\r\n      }, error => {\r\n        console.log('è·åæ°æ®æºå¤±è´¥ï¼');\r\n        console.log(error);\r\n      });\r\n  }\r\n  /**å¸®å©ç¡®å®æé® */\r\n  btnOk() {\r\n    // æ ¹æ®éä¸­è¡è·åå®ä½æ°æ®\r\n    const selectPosEntity = [];\r\n    this.curSelectedKeys.forEach(dboID => {\r\n      const selectDBO = this.data.find(item => item['id'] === dboID);\r\n      selectPosEntity.push(selectDBO);\r\n    });\r\n\r\n    if (!selectPosEntity) {\r\n      alert('è¯·éæ©æ°æ®åºå¯¹è±¡');\r\n      return;\r\n    } else {\r\n      // åå°å½åéä¸­æ°æ®\r\n      this.selectedAfterOk.next(selectPosEntity);\r\n    }\r\n    this.hideModal();\r\n  }\r\n  hideModal(): void {\r\n    this.modalClosed.emit();\r\n  }\r\n}\r\n","import {  NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {DboSelectComponent} from './dbo-select/dbo-select.component';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { DboHelpDevService } from './dbo-help-dev.service';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    GridModule,\r\n    FormsModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [DboHelpDevService],\r\n  declarations: [DboSelectComponent],\r\n  entryComponents: [DboSelectComponent],\r\n  exports:[DboSelectComponent]\r\n})\r\n\r\nexport class DboSelectModule {\r\n}\r\n"],"names":["Injectable","HttpClient","EventEmitter","Component","Input","Output","ViewChild","NgModule","CommonModule","GridModule","FormsModule","HttpClientModule"],"mappings":"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"}
