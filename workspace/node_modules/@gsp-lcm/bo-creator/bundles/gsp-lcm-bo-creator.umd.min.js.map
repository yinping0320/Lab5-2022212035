{"version":3,"sources":["ng://@gsp-lcm/bo-creator/lib/views/bo-creator/bo-creator.component.ts","ng://@gsp-lcm/bo-creator/lib/views/bo-creator/common/validation-result.ts","ng://@gsp-lcm/bo-creator/lib/views/bo-creator/utils/bo-create-utils.ts","ng://@gsp-lcm/bo-creator/lib/views/bo-creator/modal/app-modal/app-creator-modal.component.ts","ng://@gsp-lcm/bo-creator/lib/views/bo-creator/modal/su-modal/su-creator-modal.component.ts","ng://@gsp-lcm/bo-creator/lib/views/bo-creator/modal/bo-modal/bo-creator-modal.component.ts","ng://@gsp-lcm/bo-creator/lib/bo-creator-package.module.ts"],"names":["BOCreatorComponent","prototype","ngOnInit","appConfirmEmitterHandler","$event","bo","this","createdAfterOk","emit","modalClosed","suConfirmEmitterHandler","boConfirmEmitterHandler","btnOkClick","type","appCmp","create","suCmp","boCmp","hideModal","Component","args","selector","template","Output","Input","ViewChild","EventEmitter","ValidatorResult","illegal","BoCreatorUtils","newGuid","s4","Math","random","toString","substring","getMaxOrder","entities","parentID","maxNum","children","filter","entity","undefined","length","forEach","element","sortOrder","Injectable","AppCreatorModalComponent","initData","_this","boDtService","getBusinessObjects","subscribe","data","apps","x","layer","parent","find","getCurrentBo","save","appConfirmEmitter","error","notifyService","result","appInfoValidator","warning","message","currentBo","id","boCreatorUtils","sysInit","isSysInit","isDetail","max","Object","assign","BusinessObjectEntity","emptyValidator","namingConventionValidator","repeatValidator","code","name","RegExp","test","toLowerCase","BusinessObjectDtService","NotifyService","SuCreatorModalComponent","items","item","suList","appSelectChanged","suConfirmEmitter","suInfoValidator","parentId","labelLength","inputLength","BoCreatorModalComponent","defineProperty","getParentBo","boInSU","s","push","bos","t","bosInSU","boConfirmEmitter","boInfoValidator","parentBo","suCode","boGroupSelectChanged","getBusinessObject","clearHandler","BOCreatorPackageModule","NgModule","declarations","imports","CommonModule","InputGroupModule","FormsModule","InputsModule","NotifyModule","forRoot","ComboListModule","BoDtServiceModule","entryComponents","exports","providers"],"mappings":"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","sourcesContent":["import { Component, OnInit, Output, EventEmitter, Input, ViewChild } from '@angular/core';\r\nimport { AppCreatorModalComponent } from './modal/app-modal/app-creator-modal.component';\r\nimport { SuCreatorModalComponent } from './modal/su-modal/su-creator-modal.component';\r\nimport { BoCreatorModalComponent } from './modal/bo-modal/bo-creator-modal.component';\r\n\r\n@Component({\r\n    selector: 'app-bo-creator',\r\n    templateUrl: './bo-creator.component.html',\r\n    styleUrls: ['./bo-creator.component.css']\r\n})\r\nexport class BOCreatorComponent implements OnInit {\r\n    @Output() createdAfterOk: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() modalClosed = new EventEmitter<any>();\r\n    @Input() parentId: string;\r\n    @Input() type: string;\r\n\r\n    @ViewChild(\"appModal\") appCmp: AppCreatorModalComponent;\r\n    @ViewChild(\"suModal\") suCmp: SuCreatorModalComponent;\r\n    @ViewChild(\"boModal\") boCmp: BoCreatorModalComponent;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() { }\r\n\r\n    appConfirmEmitterHandler($event) {\r\n        let bo = $event;\r\n        this.createdAfterOk.emit(bo);\r\n        this.modalClosed.emit();\r\n    }\r\n\r\n    suConfirmEmitterHandler($event) {\r\n        let bo = $event;\r\n        this.createdAfterOk.emit(bo);\r\n        this.modalClosed.emit();\r\n    }\r\n\r\n    boConfirmEmitterHandler($event) {\r\n        let bo = $event;\r\n        this.createdAfterOk.emit(bo);\r\n        this.modalClosed.emit();\r\n    }\r\n\r\n    btnOkClick() {\r\n        switch (this.type) {\r\n            case 'app':\r\n                this.appCmp.create();\r\n                return;\r\n            case 'su':\r\n                this.suCmp.create();\r\n                return;\r\n            case 'bo':\r\n                this.boCmp.create();\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    hideModal() {\r\n        this.modalClosed.emit();\r\n    }\r\n\r\n}\r\n","export class ValidatorResult{\r\n    constructor(){\r\n        this.illegal=false;\r\n    }\r\n    illegal:boolean;\r\n    message:string;\r\n}","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class BoCreatorUtils{\r\n\r\n     newGuid() {\r\n        return (this.s4() + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + this.s4() + this.s4());\r\n    }\r\n\r\n    s4() {\r\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    }\r\n\r\n    getMaxOrder(entities: any, parentID: string): number {\r\n        let maxNum = 0;\r\n        const children = entities.filter(entity => entity.parentID === parentID);\r\n        if (children === undefined || children === null || children.length <= 0) {\r\n            return maxNum;\r\n        } else {\r\n            children.forEach(element => {\r\n                if (element.sortOrder > maxNum) {\r\n                    maxNum = element.sortOrder;\r\n                }\r\n            });\r\n        }\r\n        return maxNum;\r\n    }\r\n   \r\n}","import { Component, OnInit, Output, EventEmitter, TemplateRef, ViewChild, Input } from '@angular/core';\nimport { NotifyService } from '@farris/ui-notify';\nimport { BusinessObjectEntity, BusinessObjectDtService } from '@gsp-lcm/bo-dt-service';\nimport { ValidatorResult } from '../../common/validation-result';\nimport { BoCreatorUtils } from '../../utils/bo-create-utils';\n\n@Component({\n    selector: 'app-app-creator-modal',\n    templateUrl: './app-creator-modal.component.html',\n    styleUrls: ['./app-creator-modal.component.css']\n})\nexport class AppCreatorModalComponent implements OnInit {\n\n    @Output() appConfirmEmitter: EventEmitter<any> = new EventEmitter<any>();\n\n    currentBo: BusinessObjectEntity = new BusinessObjectEntity();\n\n    parent: any;\n\n    apps: any[] = [];\n\n    constructor(\n        private boCreatorUtils:BoCreatorUtils,\n        private boDtService: BusinessObjectDtService,\n        private notifyService: NotifyService) { }\n\n    ngOnInit() {\n        this.initData();\n    }\n\n    private initData() {\n        this.boDtService.getBusinessObjects().subscribe(\n            (data: any[]) => {\n                if (!data) {\n                    return;\n                }\n                //äºçº§èç¹æ¯APP\n                this.apps = data.filter(x => x.layer === 2);\n                //ä¸çº§èç¹æ¯äº§åï¼ç®åé»è®¤ä¸çº§èç¹ï¼æ ¹èç¹ï¼åªæä¸ä¸ª\n                this.parent = data.find(x => x.layer === 1);\n            }\n        );\n    }\n\n    create(){\n        let bo=this.getCurrentBo();\n        if(!bo){\n            return;\n        }\n        this.boDtService.save(bo).subscribe(\n            () => {\n                this.appConfirmEmitter.emit(bo);\n            },\n            error => {\n                this.notifyService.error('åå»ºå¤±è´¥');\n                throw error;\n            }\n        );\n    }\n\n    getCurrentBo(){\n        let result=this.appInfoValidator();\n        if(result.illegal){ \n            this.notifyService.warning(result.message);\n            return null;\n        }\n        this.currentBo.id = this.boCreatorUtils.newGuid();\n        this.currentBo.layer = 2;\n        this.currentBo.parentID = this.parent.id;\n        this.currentBo.sysInit = '0';\n        this.currentBo.isSysInit = false;\n        this.currentBo.isDetail = '0';\n        let max = this.boCreatorUtils.getMaxOrder(this.apps, this.currentBo.parentID);\n        this.currentBo.sortOrder = max + 1;\n        return Object.assign(new BusinessObjectEntity(),this.currentBo);\n    }\n\n    appInfoValidator(): ValidatorResult {\n\n        //æ°å¢ä¿¡æ¯ç©ºæ ¡éª\n        let result = this.emptyValidator();\n        if (result.illegal) {\n            return result;\n        }\n\n        //ç¼å·ï¼åç§°å½åè§èæ§æ ¡éª\n        result = this.namingConventionValidator();\n        if (result.illegal) {\n            return result;\n        }\n\n        //APPç¼å·éå¤æ ¡éª\n        return this.repeatValidator();\n\n    }\n\n    emptyValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        if (!this.currentBo.code) {\n            result.illegal = true;\n            result.message = `å³é®åºç¨çç¼å·ä¸è½ä¸ºç©º`;\n            return result;\n        }\n        if (!this.currentBo.name) {\n            result.illegal = true;\n            result.message = `å³é®åºç¨çåç§°ä¸è½ä¸ºç©º`;\n            return result;\n        }\n        return result;\n    }\n\n    namingConventionValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        const codeRegx = new RegExp('^[a-zA-Z\\x7f-\\xff][a-zA-Z0-9\\x7f-\\xff]*$');\n        if (!codeRegx.test(this.currentBo.code)) {\n            result.illegal = true;\n            result.message = 'å³é®åºç¨çç¼å·åªè½åå«å­æ¯,æ°å­,å¹¶ä¸ä¸å¯ä»¥ç¨æ°å­å¼å¤´!';\n            return result;\n        }\n        const nameRegx = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<>/?~ï¼@#ï¿¥â¦â¦&*ï¼ï¼ââ|{}ããâï¼ï¼ââ\\'ãï¼ãï¼]');\n        if (nameRegx.test(this.currentBo.name)) {\n            result.illegal = true;\n            result.message = 'å³é®åºç¨çåç§°åå«éæ³å­ç¬¦ï¼è¯·éæ°è¾å¥!';\n            return result;\n        }\n        return result;\n    }\n\n    repeatValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        let filterApp = this.apps.find(x => x.code.toLowerCase() === this.currentBo.code.toLowerCase());\n        if (filterApp) {\n            result.illegal = true;\n            result.message = `å³é®åºç¨çç¼å·${this.currentBo.code}å·²å­å¨`;\n            return result;\n        }\n        return result;\n    }\n\n}\n","import { Component, OnInit, EventEmitter, Output, Input, ViewChild } from '@angular/core';\r\nimport { BusinessObjectEntity, BusinessObjectDtService } from '@gsp-lcm/bo-dt-service';\r\nimport { BoCreatorUtils } from '../../utils/bo-create-utils';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { ValidatorResult } from '../../common/validation-result';\r\n\r\n@Component({\r\n    selector: 'app-su-creator-modal',\r\n    templateUrl: './su-creator-modal.component.html',\r\n    styleUrls: ['./su-creator-modal.component.css']\r\n})\r\nexport class SuCreatorModalComponent implements OnInit {\r\n\r\n    @Input() parentId:string;\r\n\r\n    @Output() suConfirmEmitter: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild(\"appSelector\") appSelector: ComboListComponent;\r\n    \r\n    /**\r\n     * å½åBOèç¹\r\n     */\r\n    currentBo: BusinessObjectEntity = new BusinessObjectEntity();\r\n\r\n    /**\r\n     * å³é®åºç¨éå\r\n     */\r\n    items: BusinessObjectEntity[]=[];\r\n\r\n    /**\r\n     * éæ©åºç¨èç¹ä¸çæææå¡ååéå\r\n     */\r\n    suList: BusinessObjectEntity[]=[];\r\n\r\n    /**\r\n     * ææä¸å¡å¯¹è±¡èç¹éå\r\n     */\r\n    data:any[]=[];\r\n\r\n    parent: BusinessObjectEntity=new BusinessObjectEntity();\r\n\r\n    labelLength = '2';\r\n    inputLength = '9';\r\n\r\n    constructor(\r\n        private boCreatorUtils:BoCreatorUtils,\r\n        private boDtService: BusinessObjectDtService,\r\n        private notifyService: NotifyService) { }\r\n\r\n    ngOnInit() {\r\n        this.initData();\r\n    }\r\n\r\n    private initData() {\r\n        this.boDtService.getBusinessObjects().subscribe(data => {\r\n            this.data = data;\r\n            this.items = data.filter(item => item.layer === 2);\r\n            this.suList = data.filter(item => item.layer === 3);\r\n        });\r\n    }\r\n\r\n    appSelectChanged($event) {\r\n        this.parent = $event.data;\r\n    }\r\n\r\n    create(){\r\n        let bo=this.getCurrentBo();\r\n        if(!bo){\r\n            return;\r\n        }\r\n        this.boDtService.save(bo).subscribe(\r\n            () => {\r\n                this.suConfirmEmitter.emit(bo);\r\n            },\r\n            error => {\r\n                this.notifyService.error('åå»ºå¤±è´¥');\r\n                throw error;\r\n            }\r\n        );\r\n    }\r\n\r\n    getCurrentBo(){\r\n        let result=this.suInfoValidator();\r\n        if(result.illegal){ \r\n            this.notifyService.warning(result.message);\r\n            return null;\r\n        }\r\n        this.currentBo.id = this.boCreatorUtils.newGuid();\r\n        this.currentBo.layer = 3;\r\n        this.currentBo.parentID = this.parentId;\r\n        this.currentBo.sysInit = '0';\r\n        this.currentBo.isSysInit = false;\r\n        this.currentBo.isDetail = '0';\r\n        let max = this.boCreatorUtils.getMaxOrder(this.suList, this.currentBo.parentID);\r\n        this.currentBo.sortOrder = max + 1;\r\n        return Object.assign(new BusinessObjectEntity(),this.currentBo);\r\n    }\r\n\r\n    suInfoValidator(): ValidatorResult {\r\n\r\n        //æ°å¢ä¿¡æ¯ç©ºæ ¡éª\r\n        let result = this.emptyValidator();\r\n        if (result.illegal) {\r\n            return result;\r\n        }\r\n\r\n        //ç¼å·ï¼åç§°å½åè§èæ§æ ¡éª\r\n        result = this.namingConventionValidator();\r\n        if (result.illegal) {\r\n            return result;\r\n        }\r\n\r\n        //APPç¼å·éå¤æ ¡éª\r\n        return this.repeatValidator();\r\n\r\n    }\r\n\r\n    emptyValidator(): ValidatorResult {\r\n        let result = new ValidatorResult();\r\n        if(!this.parentId){\r\n            result.illegal = true;\r\n            result.message = `å³é®åºç¨ä¸è½ä¸ºç©º`;\r\n            return result;\r\n        }\r\n        if (!this.currentBo.code) {\r\n            result.illegal = true;\r\n            result.message = `æå¡ååçç¼å·ä¸è½ä¸ºç©º`;\r\n            return result;\r\n        }\r\n        if (!this.currentBo.name) {\r\n            result.illegal = true;\r\n            result.message = `æå¡ååçåç§°ä¸è½ä¸ºç©º`;\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    namingConventionValidator(): ValidatorResult {\r\n        let result = new ValidatorResult();\r\n        const codeRegx = new RegExp('^[a-zA-Z\\x7f-\\xff][a-zA-Z0-9\\x7f-\\xff]*$');\r\n        if (!codeRegx.test(this.currentBo.code)) {\r\n            result.illegal = true;\r\n            result.message = 'æå¡ååçç¼å·åªè½åå«å­æ¯,æ°å­,å¹¶ä¸ä¸å¯ä»¥ç¨æ°å­å¼å¤´!';\r\n            return result;\r\n        }\r\n        const nameRegx = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<>/?~ï¼@#ï¿¥â¦â¦&*ï¼ï¼ââ|{}ããâï¼ï¼ââ\\'ãï¼ãï¼]');\r\n        if (nameRegx.test(this.currentBo.name)) {\r\n            result.illegal = true;\r\n            result.message = 'æå¡ååçåç§°åå«éæ³å­ç¬¦ï¼è¯·éæ°è¾å¥!';\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    repeatValidator(): ValidatorResult {\r\n        let result = new ValidatorResult();\r\n        if (!this.suList || this.suList.length <= 0) {\r\n            return result;\r\n        }\r\n        const repeatCodeBO = this.suList.find(bo => bo.code.toLowerCase() === this.currentBo.code.toLowerCase() && bo.layer == 3);\r\n        if (repeatCodeBO) {\r\n            result.illegal = true;\r\n            result.message = 'å¾®æå¡çç¼å·ä¸è½ä¸å·²æå¾®æå¡ç¼å·éå¤ï¼ç¼å·ä¸ºï¼' + this.currentBo.code;\r\n            return result;\r\n        } \r\n        return result;\r\n    }\r\n\r\n}\r\n","import { Component, OnInit, Input, EventEmitter, Output, ViewChild } from '@angular/core';\nimport { ComboListComponent } from '@farris/ui-combo-list';\nimport { BusinessObjectEntity, BusinessObjectDtService } from '@gsp-lcm/bo-dt-service';\nimport { BoCreatorUtils } from '../../utils/bo-create-utils';\nimport { NotifyService } from '@farris/ui-notify';\nimport { ValidatorResult } from '../../common/validation-result';\n\n@Component({\n    selector: 'app-bo-creator-modal',\n    templateUrl: './bo-creator-modal.component.html',\n    styleUrls: ['./bo-creator-modal.component.css']\n})\nexport class BoCreatorModalComponent implements OnInit {\n\n    parentId:string;\n\n    @Input() set _parentId(parentId:string){\n        this.parentId=parentId;\n        this.getParentBo();\n    }\n\n    @Output() boConfirmEmitter: EventEmitter<any> = new EventEmitter<any>();\n\n    @ViewChild(\"boGroupSelector\") boGroupSelector: ComboListComponent;\n    \n    /**\n     * å½åBOèç¹\n     */\n    currentBo: BusinessObjectEntity = new BusinessObjectEntity();\n\n    /**\n     * å³é®åºç¨éå\n     */\n    items: BusinessObjectEntity[]=[];\n\n    /**\n     * éæ©åºç¨èç¹ä¸çæææå¡ååéå\n     */\n    suList: BusinessObjectEntity[]=[];\n\n    /**\n     * å½åéæ©çSUä¸çææBO\n     */\n    bosInSU: BusinessObjectEntity[];\n\n    /**\n     * ææä¸å¡å¯¹è±¡èç¹éå\n     */\n    data:any[]=[];\n\n    /**\n     * æå±å¾®æå¡\n     */\n    suCode:string;\n\n    parentBo: BusinessObjectEntity=new BusinessObjectEntity();\n\n    labelLength = '2';\n    inputLength = '9';\n\n    constructor(\n        private boCreatorUtils:BoCreatorUtils,\n        private boDtService: BusinessObjectDtService,\n        private notifyService: NotifyService) { }\n\n    ngOnInit() {\n        this.initData();\n    }\n\n    private initData() {\n        this.boDtService.getBusinessObjects().subscribe(data => {\n            this.data = data;\n            this.items = data.filter(item => item.parentID === this.parentId && item.layer === 4 && item.isDetail === '0');\n            const children = data.filter(item => item.parentID === this.parentId);\n            let boInSU = [];\n            children.forEach(s => {\n                if (s.isDetail == '0') {\n                    boInSU.push(s);\n                    var bos = data.filter(t => t.parentID === s.id);\n                    if (bos) {\n                        bos.forEach(bo => {\n                            boInSU.push(bo);\n                        });\n                    }\n                }\n                else {\n                    boInSU.push(s);\n                }\n            });\n            this.bosInSU = boInSU;\n        });\n    }\n\n    create(){\n        let bo=this.getCurrentBo();\n        if(!bo){\n            return;\n        }\n        this.boDtService.save(bo).subscribe(\n            () => {\n                this.boConfirmEmitter.emit(bo);\n            },\n            error => {\n                this.notifyService.error('åå»ºå¤±è´¥');\n                throw error;\n            }\n        );\n    }\n\n    getCurrentBo(){\n        let result=this.boInfoValidator();\n        if(result.illegal){ \n            this.notifyService.warning(result.message);\n            return null;\n        }\n        this.currentBo.id = this.boCreatorUtils.newGuid();\n        this.currentBo.layer =  this.parentBo?this.parentBo.layer + 1:4;\n        this.currentBo.parentID = this.parentBo&&this.parentBo.id?this.parentBo.id:this.parentId;\n        this.currentBo.sysInit = '0';\n        this.currentBo.isSysInit = false;\n        this.currentBo.isDetail = '1';\n\n        let max = this.boCreatorUtils.getMaxOrder(this.bosInSU, this.currentBo.parentID);\n        this.currentBo.sortOrder = max + 1;\n        return Object.assign(new BusinessObjectEntity(),this.currentBo);\n    }\n\n    boInfoValidator(): ValidatorResult {\n\n        //æ°å¢ä¿¡æ¯ç©ºæ ¡éª\n        let result = this.emptyValidator();\n        if (result.illegal) {\n            return result;\n        }\n\n        //ç¼å·ï¼åç§°å½åè§èæ§æ ¡éª\n        result = this.namingConventionValidator();\n        if (result.illegal) {\n            return result;\n        }\n\n        //APPç¼å·éå¤æ ¡éª\n        return this.repeatValidator();\n\n    }\n\n    emptyValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        if(!this.suCode){\n            result.illegal = true;\n            result.message = `æå±å¾®æå¡ä¸è½ä¸ºç©º`;\n            return result;\n        }\n        if (!this.currentBo.code) {\n            result.illegal = true;\n            result.message = `ä¸å¡å¯¹è±¡çç¼å·ä¸è½ä¸ºç©º`;\n            return result;\n        }\n        if (!this.currentBo.name) {\n            result.illegal = true;\n            result.message = `ä¸å¡å¯¹è±¡çåç§°ä¸è½ä¸ºç©º`;\n            return result;\n        }\n        return result;\n    }\n\n    namingConventionValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        const codeRegx = new RegExp('^[a-zA-Z\\x7f-\\xff][a-zA-Z0-9\\x7f-\\xff]*$');\n        if (!codeRegx.test(this.currentBo.code)) {\n            result.illegal = true;\n            result.message = 'ä¸å¡å¯¹è±¡çç¼å·åªè½åå«å­æ¯,æ°å­,å¹¶ä¸ä¸å¯ä»¥ç¨æ°å­å¼å¤´!';\n            return result;\n        }\n        const nameRegx = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<>/?~ï¼@#ï¿¥â¦â¦&*ï¼ï¼ââ|{}ããâï¼ï¼ââ\\'ãï¼ãï¼]');\n        if (nameRegx.test(this.currentBo.name)) {\n            result.illegal = true;\n            result.message = 'ä¸å¡å¯¹è±¡çåç§°åå«éæ³å­ç¬¦ï¼è¯·éæ°è¾å¥!';\n            return result;\n        }\n        return result;\n    }\n\n    repeatValidator(): ValidatorResult {\n        let result = new ValidatorResult();\n        if (!this.bosInSU|| this.bosInSU.length <= 0) {\n            return result;\n        }\n        const repeatCodeBO = this.bosInSU.find(bo => bo.code.toLowerCase() === this.currentBo.code.toLowerCase());\n        if (repeatCodeBO) {\n            result.illegal = true;\n            result.message = 'åä¸SUä¸ä¸å¡å¯¹è±¡/ä¸å¡å¯¹è±¡åç»/ä¸å¡å¯¹è±¡ä¸ä¸å¡å¯¹è±¡åç»ç¼å·ä¸è½éå¤ï¼ä¸å¡å¯¹è±¡ç¼å·ä¸ºï¼' + this.currentBo.code;\n            return result;\n        }\n        return result;\n    }\n\n    boGroupSelectChanged($event) {\n        this.parentBo = $event.data;\n    }\n\n    private getParentBo() {\n        if (this.parentId) {\n            this.boDtService.getBusinessObject(this.parentId).subscribe(data => {\n                this.parentBo = data;\n                this.suCode=data.code;\n            });\n        }\n    }\n\n    clearHandler(){\n        this.parentBo=null;\n    }\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BOCreatorComponent } from './views/bo-creator/bo-creator.component';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { InputsModule } from '@progress/kendo-angular-inputs';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { BoDtServiceModule, BusinessObjectDtService } from '@gsp-lcm/bo-dt-service';\r\nimport { AppCreatorModalComponent } from './views/bo-creator/modal/app-modal/app-creator-modal.component';\r\nimport { BoCreatorUtils } from './views/bo-creator/utils/bo-create-utils';\nimport { SuCreatorModalComponent } from './views/bo-creator/modal/su-modal/su-creator-modal.component';\nimport { BoCreatorModalComponent } from './views/bo-creator/modal/bo-modal/bo-creator-modal.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        BOCreatorComponent,\r\n        AppCreatorModalComponent,\r\n        SuCreatorModalComponent,\r\n        BoCreatorModalComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        InputGroupModule,\r\n        FormsModule,\r\n        InputsModule,\r\n        NotifyModule.forRoot(),\r\n        ComboListModule,\r\n        BoDtServiceModule\r\n    ],\r\n    entryComponents: [BOCreatorComponent],\r\n    exports: [BOCreatorComponent,AppCreatorModalComponent],\r\n    providers: [BusinessObjectDtService,BoCreatorUtils]\r\n})\r\nexport class BOCreatorPackageModule { }\r\n"]}