{"version":3,"file":"gsp-lcm-dbo-selectrt.js.map","sources":["ng://@gsp-lcm/dbo-selectrt/lib/dbo-help-rt.service.ts","ng://@gsp-lcm/dbo-selectrt/lib/dbo-selectrt/dbo-selectrt.component.ts","ng://@gsp-lcm/dbo-selectrt/lib/dbo-selectrt.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { HttpHeaders, HttpClient} from '@angular/Common/http';\r\n\r\n\r\n@Injectable()\r\nexport class DboHelpRtService {\r\n  private databaseurlRT = '/api/runtime/sys/v1.0/database-objects';\r\n  constructor(private rest: HttpClient) { }\r\n  public sessionId: string;\r\n/**\r\n * æ°æ®åºå¯¹è±¡éæ©å¸®å©çé¢ï¼è¿è¡æ¶ï¼\r\n */\r\n  getAllDatabaseObjectRT(): Observable<any> {\r\n    var headers = new HttpHeaders();\r\n    headers.append('Content-Type', 'application/json');\r\n    headers.append('Authorization', 'as');\r\n    headers.append('Access-Control-Allow-Origin', '*');\r\n    headers.append('sessionId', this.sessionId);\r\n    var options ={\r\n        params: {},\r\n        headers: headers\r\n    };\r\n    return this.rest.get(this.databaseurlRT, options).pipe(\r\n    );\r\n  }\r\n\r\n/**\r\n * å·¦ä¾§ä¸å¡å¯¹è±¡å¯¼èªæ å³ä¾§dboåè¡¨å¸®å©çé¢\r\n */\r\ngetAllDatabaseObjectByBOID(boID: string): Observable<any> {\r\n  const headers = new HttpHeaders();\r\n  headers.append('Content-Type', 'application/json');\r\n  headers.append('Authorization', 'as');\r\n  headers.append('Access-Control-Allow-Origin', '*');\r\n  headers.append('sessionId', this.sessionId);\r\n  const options ={\r\n    params: {},\r\n    headers: headers\r\n  };\r\n    const url =  this.databaseurlRT + '/bo/' + boID;\r\n    return this.rest.get(url,options).pipe();\r\n  }\r\n}\r\n\r\n","import { Component, OnInit, Input, Output, EventEmitter, OnChanges, SimpleChanges, ViewChild, TemplateRef  } from '@angular/core';\r\nimport { SelectableSettings } from '@progress/kendo-angular-grid';\r\nimport { DboHelpRtService} from '../dbo-help-rt.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-dbo-selectrt',\r\n  templateUrl: './dbo-selectrt.component.html',\r\n  styleUrls: ['./dbo-selectrt.component.css']\r\n})\r\nexport class DboSelectRTComponent implements OnInit, OnChanges {\r\n  @Input()\r\n  url = '';\r\n  /**å¸®å©æ é¢ */\r\n  @Input()\r\n  title = 'å¸®å©';\r\n  /**å¸®å©æå¼ç¶æ */\r\n  @Input()\r\n  isShow: boolean;\r\n  /**éä¸­åè¡¨ */\r\n  @Input()\r\n  initSelectedKeys: string[];\r\n  @Input()\r\n  sessionId: string;\r\n  /**è¾åºäºä»¶ */\r\n  @Output() selectedAfterOk: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() modalClosed = new EventEmitter<any>();\r\n\r\n  @ViewChild('modalFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild('btns') btns: TemplateRef<any>;\r\n\r\n  /**å½åçé¢éä¸­çåç  */\r\n  curSelectedKeys: string[];\r\n  selectableSettings: SelectableSettings;\r\n  data: Object[];\r\n\r\n  constructor(\r\n    private dboHelpService: DboHelpRtService,\r\n  ) {\r\n    this.selectableSettings = {\r\n      checkboxOnly: true,\r\n      mode: 'single',\r\n      enabled: true\r\n    };\r\n    const sessionId = this.sessionId;\r\n    if (!sessionId) {\r\n      alert('sessionä¿¡æ¯ä¸è½ä¸ºç©º');\r\n    } else {\r\n      this.dboHelpService.sessionId = sessionId;\r\n    }\r\n  }\r\n\r\n  /**è¾å¥å±æ§ååå */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n  }\r\n  ngOnInit() {\r\n  \r\n    this.dboHelpService.getAllDatabaseObjectRT()\r\n    .subscribe(result => {\r\n      this.data = result;\r\n      this.curSelectedKeys = [];\r\n      if (this.initSelectedKeys) {\r\n        this.initSelectedKeys.map(item => this.curSelectedKeys.push(item));\r\n      }\r\n    }, error => {\r\n      console.log('è·åæ°æ®æºå¤±è´¥ï¼');\r\n      console.log(error);\r\n    });\r\n  }\r\n  /**å¸®å©ç¡®å®æé® */\r\n  btnOk() {\r\n    // æ ¹æ®éä¸­è¡è·åå®ä½æ°æ®\r\n        // æå¡ç«¯è·åæ°æ®\r\n    const selectPosEntity = [];\r\n    this.curSelectedKeys.forEach(dboID => {\r\n      const selectDBO = this.data.find(item => item['id'] === dboID);\r\n      selectPosEntity.push(selectDBO);\r\n    });\r\n\r\n    if (!selectPosEntity) {\r\n      alert('è¯·éæ©æ°æ®åºå¯¹è±¡');\r\n      return;\r\n    } else {\r\n      // åå°å½åéä¸­æ°æ®\r\n      this.selectedAfterOk.next(selectPosEntity);\r\n    }\r\n    this.hideModal();\r\n  }\r\n  hideModal(): void {\r\n    this.modalClosed.emit();\r\n  }\r\n}\r\n","import { ComponentFactoryResolver, Injector, NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {DboSelectRTComponent} from './dbo-selectrt/dbo-selectrt.component';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PackageModule, GSP, PopoverModule } from '@farris/ide-devkit';\r\nimport {DboHelpRtService} from './dbo-help-rt.service';\r\nimport { HttpClientModule} from '@angular/Common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    GridModule,\r\n    FormsModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [DboHelpRtService],\r\n  declarations: [DboSelectRTComponent],\r\n  entryComponents: [DboSelectRTComponent]\r\n})\r\n\r\nexport class DboSelectRTModule extends PackageModule {\r\n\r\n  constructor(private cfr: ComponentFactoryResolver, private injector: Injector) {\r\n    super();\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
