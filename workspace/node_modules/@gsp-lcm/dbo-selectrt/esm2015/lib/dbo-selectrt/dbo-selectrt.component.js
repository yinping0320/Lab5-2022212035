/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef } from '@angular/core';
import { DboHelpRtService } from '../dbo-help-rt.service';
export class DboSelectRTComponent {
    /**
     * @param {?} dboHelpService
     */
    constructor(dboHelpService) {
        this.dboHelpService = dboHelpService;
        this.url = '';
        /**
         * 帮助标题
         */
        this.title = '帮助';
        /**
         * 输出事件
         */
        this.selectedAfterOk = new EventEmitter();
        this.modalClosed = new EventEmitter();
        this.selectableSettings = {
            checkboxOnly: true,
            mode: 'single',
            enabled: true
        };
        /** @type {?} */
        const sessionId = this.sessionId;
        if (!sessionId) {
            alert('session信息不能为空');
        }
        else {
            this.dboHelpService.sessionId = sessionId;
        }
    }
    /**
     * 输入属性变化后
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.dboHelpService.getAllDatabaseObjectRT()
            .subscribe((/**
         * @param {?} result
         * @return {?}
         */
        result => {
            this.data = result;
            this.curSelectedKeys = [];
            if (this.initSelectedKeys) {
                this.initSelectedKeys.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => this.curSelectedKeys.push(item)));
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            console.log('获取数据源失败！');
            console.log(error);
        }));
    }
    /**
     * 帮助确定按钮
     * @return {?}
     */
    btnOk() {
        // 根据选中行获取实体数据
        // 服务端获取数据
        /** @type {?} */
        const selectPosEntity = [];
        this.curSelectedKeys.forEach((/**
         * @param {?} dboID
         * @return {?}
         */
        dboID => {
            /** @type {?} */
            const selectDBO = this.data.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item['id'] === dboID));
            selectPosEntity.push(selectDBO);
        }));
        if (!selectPosEntity) {
            alert('请选择数据库对象');
            return;
        }
        else {
            // 发射当前选中数据
            this.selectedAfterOk.next(selectPosEntity);
        }
        this.hideModal();
    }
    /**
     * @return {?}
     */
    hideModal() {
        this.modalClosed.emit();
    }
}
DboSelectRTComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-dbo-selectrt',
                template: "<div class=\"modal-body\">\r\n<div class=\"templateBlock\">\r\n  <kendo-grid [class]=\"'flex-auto'\" [selectable]=\"selectableSettings\" [kendoGridSelectBy]=\"'id'\" [selectedKeys]=\"curSelectedKeys\"\r\n    [kendoGridBinding]=\"data\">\r\n    <kendo-grid-checkbox-column width=\"10%\"></kendo-grid-checkbox-column>\r\n    <kendo-grid-column field=\"code\" title=\"\u7F16\u53F7\" width=\"40%\"></kendo-grid-column>\r\n    <kendo-grid-column field=\"name\" title=\"\u540D\u79F0\" width=\"45%\"></kendo-grid-column>\r\n  </kendo-grid>\r\n  </div>\r\n</div>\r\n<ng-template #btns>\r\n<button type=\"button\" class=\"btn btn-default btn-primary\" (click)=\"btnOk()\">\u786E\u5B9A</button>\r\n<button type=\"button\" class=\"btn btn-default\" (click)=\"hideModal()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n",
                styles: [""]
            }] }
];
/** @nocollapse */
DboSelectRTComponent.ctorParameters = () => [
    { type: DboHelpRtService }
];
DboSelectRTComponent.propDecorators = {
    url: [{ type: Input }],
    title: [{ type: Input }],
    isShow: [{ type: Input }],
    initSelectedKeys: [{ type: Input }],
    sessionId: [{ type: Input }],
    selectedAfterOk: [{ type: Output }],
    modalClosed: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['modalFooter',] }],
    btns: [{ type: ViewChild, args: ['btns',] }]
};
if (false) {
    /** @type {?} */
    DboSelectRTComponent.prototype.url;
    /**
     * 帮助标题
     * @type {?}
     */
    DboSelectRTComponent.prototype.title;
    /**
     * 帮助打开状态
     * @type {?}
     */
    DboSelectRTComponent.prototype.isShow;
    /**
     * 选中列表
     * @type {?}
     */
    DboSelectRTComponent.prototype.initSelectedKeys;
    /** @type {?} */
    DboSelectRTComponent.prototype.sessionId;
    /**
     * 输出事件
     * @type {?}
     */
    DboSelectRTComponent.prototype.selectedAfterOk;
    /** @type {?} */
    DboSelectRTComponent.prototype.modalClosed;
    /** @type {?} */
    DboSelectRTComponent.prototype.modalFooter;
    /** @type {?} */
    DboSelectRTComponent.prototype.btns;
    /**
     * 当前界面选中的内码
     * @type {?}
     */
    DboSelectRTComponent.prototype.curSelectedKeys;
    /** @type {?} */
    DboSelectRTComponent.prototype.selectableSettings;
    /** @type {?} */
    DboSelectRTComponent.prototype.data;
    /**
     * @type {?}
     * @private
     */
    DboSelectRTComponent.prototype.dboHelpService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGJvLXNlbGVjdHJ0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3AtbGNtL2Riby1zZWxlY3RydC8iLCJzb3VyY2VzIjpbImxpYi9kYm8tc2VsZWN0cnQvZGJvLXNlbGVjdHJ0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBNEIsU0FBUyxFQUFFLFdBQVcsRUFBRyxNQUFNLGVBQWUsQ0FBQztBQUVsSSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQVF6RCxNQUFNLE9BQU8sb0JBQW9COzs7O0lBMEIvQixZQUNVLGNBQWdDO1FBQWhDLG1CQUFjLEdBQWQsY0FBYyxDQUFrQjtRQXpCMUMsUUFBRyxHQUFHLEVBQUUsQ0FBQzs7OztRQUdULFVBQUssR0FBRyxJQUFJLENBQUM7Ozs7UUFVSCxvQkFBZSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzdELGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQWE5QyxJQUFJLENBQUMsa0JBQWtCLEdBQUc7WUFDeEIsWUFBWSxFQUFFLElBQUk7WUFDbEIsSUFBSSxFQUFFLFFBQVE7WUFDZCxPQUFPLEVBQUUsSUFBSTtTQUNkLENBQUM7O2NBQ0ksU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTO1FBQ2hDLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDZCxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDeEI7YUFBTTtZQUNMLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztTQUMzQztJQUNILENBQUM7Ozs7OztJQUdELFdBQVcsQ0FBQyxPQUFzQjtJQUNsQyxDQUFDOzs7O0lBQ0QsUUFBUTtRQUVOLElBQUksQ0FBQyxjQUFjLENBQUMsc0JBQXNCLEVBQUU7YUFDM0MsU0FBUzs7OztRQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO1lBQ25CLElBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1lBQzFCLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUN6QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRzs7OztnQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUM7YUFDcEU7UUFDSCxDQUFDOzs7O1FBQUUsS0FBSyxDQUFDLEVBQUU7WUFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckIsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7OztJQUVELEtBQUs7Ozs7Y0FHRyxlQUFlLEdBQUcsRUFBRTtRQUMxQixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU87Ozs7UUFBQyxLQUFLLENBQUMsRUFBRTs7a0JBQzdCLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7Ozs7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUM7WUFDOUQsZUFBZSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNsQyxDQUFDLEVBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDcEIsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2xCLE9BQU87U0FDUjthQUFNO1lBQ0wsV0FBVztZQUNYLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQzVDO1FBQ0QsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25CLENBQUM7Ozs7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs7WUFyRkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxrQkFBa0I7Z0JBQzVCLGl6QkFBNEM7O2FBRTdDOzs7O1lBUFEsZ0JBQWdCOzs7a0JBU3RCLEtBQUs7b0JBR0wsS0FBSztxQkFHTCxLQUFLOytCQUdMLEtBQUs7d0JBRUwsS0FBSzs4QkFHTCxNQUFNOzBCQUNOLE1BQU07MEJBRU4sU0FBUyxTQUFDLGFBQWE7bUJBQ3ZCLFNBQVMsU0FBQyxNQUFNOzs7O0lBbEJqQixtQ0FDUzs7Ozs7SUFFVCxxQ0FDYTs7Ozs7SUFFYixzQ0FDZ0I7Ozs7O0lBRWhCLGdEQUMyQjs7SUFDM0IseUNBQ2tCOzs7OztJQUVsQiwrQ0FBdUU7O0lBQ3ZFLDJDQUFnRDs7SUFFaEQsMkNBQXdEOztJQUN4RCxvQ0FBMEM7Ozs7O0lBRzFDLCtDQUEwQjs7SUFDMUIsa0RBQXVDOztJQUN2QyxvQ0FBZTs7Ozs7SUFHYiw4Q0FBd0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYgIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFNlbGVjdGFibGVTZXR0aW5ncyB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWdyaWQnO1xyXG5pbXBvcnQgeyBEYm9IZWxwUnRTZXJ2aWNlfSBmcm9tICcuLi9kYm8taGVscC1ydC5zZXJ2aWNlJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1kYm8tc2VsZWN0cnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9kYm8tc2VsZWN0cnQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2Riby1zZWxlY3RydC5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIERib1NlbGVjdFJUQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpXHJcbiAgdXJsID0gJyc7XHJcbiAgLyoq5biu5Yqp5qCH6aKYICovXHJcbiAgQElucHV0KClcclxuICB0aXRsZSA9ICfluK7liqknO1xyXG4gIC8qKuW4ruWKqeaJk+W8gOeKtuaAgSAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgaXNTaG93OiBib29sZWFuO1xyXG4gIC8qKumAieS4reWIl+ihqCAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgaW5pdFNlbGVjdGVkS2V5czogc3RyaW5nW107XHJcbiAgQElucHV0KClcclxuICBzZXNzaW9uSWQ6IHN0cmluZztcclxuICAvKirovpPlh7rkuovku7YgKi9cclxuICBAT3V0cHV0KCkgc2VsZWN0ZWRBZnRlck9rOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBtb2RhbENsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdtb2RhbEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2J0bnMnKSBidG5zOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAvKirlvZPliY3nlYzpnaLpgInkuK3nmoTlhoXnoIEgKi9cclxuICBjdXJTZWxlY3RlZEtleXM6IHN0cmluZ1tdO1xyXG4gIHNlbGVjdGFibGVTZXR0aW5nczogU2VsZWN0YWJsZVNldHRpbmdzO1xyXG4gIGRhdGE6IE9iamVjdFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZGJvSGVscFNlcnZpY2U6IERib0hlbHBSdFNlcnZpY2UsXHJcbiAgKSB7XHJcbiAgICB0aGlzLnNlbGVjdGFibGVTZXR0aW5ncyA9IHtcclxuICAgICAgY2hlY2tib3hPbmx5OiB0cnVlLFxyXG4gICAgICBtb2RlOiAnc2luZ2xlJyxcclxuICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvbklkO1xyXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcclxuICAgICAgYWxlcnQoJ3Nlc3Npb27kv6Hmga/kuI3og73kuLrnqbonKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGJvSGVscFNlcnZpY2Uuc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoq6L6T5YWl5bGe5oCn5Y+Y5YyW5ZCOICovXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gIH1cclxuICBuZ09uSW5pdCgpIHtcclxuICBcclxuICAgIHRoaXMuZGJvSGVscFNlcnZpY2UuZ2V0QWxsRGF0YWJhc2VPYmplY3RSVCgpXHJcbiAgICAuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcclxuICAgICAgdGhpcy5jdXJTZWxlY3RlZEtleXMgPSBbXTtcclxuICAgICAgaWYgKHRoaXMuaW5pdFNlbGVjdGVkS2V5cykge1xyXG4gICAgICAgIHRoaXMuaW5pdFNlbGVjdGVkS2V5cy5tYXAoaXRlbSA9PiB0aGlzLmN1clNlbGVjdGVkS2V5cy5wdXNoKGl0ZW0pKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygn6I635Y+W5pWw5o2u5rqQ5aSx6LSl77yBJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKirluK7liqnnoa7lrprmjInpkq4gKi9cclxuICBidG5PaygpIHtcclxuICAgIC8vIOagueaNrumAieS4reihjOiOt+WPluWunuS9k+aVsOaNrlxyXG4gICAgICAgIC8vIOacjeWKoeerr+iOt+WPluaVsOaNrlxyXG4gICAgY29uc3Qgc2VsZWN0UG9zRW50aXR5ID0gW107XHJcbiAgICB0aGlzLmN1clNlbGVjdGVkS2V5cy5mb3JFYWNoKGRib0lEID0+IHtcclxuICAgICAgY29uc3Qgc2VsZWN0REJPID0gdGhpcy5kYXRhLmZpbmQoaXRlbSA9PiBpdGVtWydpZCddID09PSBkYm9JRCk7XHJcbiAgICAgIHNlbGVjdFBvc0VudGl0eS5wdXNoKHNlbGVjdERCTyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXNlbGVjdFBvc0VudGl0eSkge1xyXG4gICAgICBhbGVydCgn6K+36YCJ5oup5pWw5o2u5bqT5a+56LGhJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOWPkeWwhOW9k+WJjemAieS4reaVsOaNrlxyXG4gICAgICB0aGlzLnNlbGVjdGVkQWZ0ZXJPay5uZXh0KHNlbGVjdFBvc0VudGl0eSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmhpZGVNb2RhbCgpO1xyXG4gIH1cclxuICBoaWRlTW9kYWwoKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGFsQ2xvc2VkLmVtaXQoKTtcclxuICB9XHJcbn1cclxuIl19