!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@progress/kendo-angular-grid"),require("@angular/forms"),require("@farris/ide-devkit"),require("@angular/Common/http")):"function"==typeof define&&define.amd?define("@gsp-lcm/dbo-selectrt",["exports","@angular/core","@angular/common","@progress/kendo-angular-grid","@angular/forms","@farris/ide-devkit","@angular/Common/http"],t):t((e["gsp-lcm"]=e["gsp-lcm"]||{},e["gsp-lcm"]["dbo-selectrt"]={}),e.ng.core,e.ng.common,e.kendoAngularGrid,e.ng.forms,e.ideDevkit,e.ng.Common.http)}(this,function(e,n,t,i,s,o,a){"use strict";var d=function(){function e(e){this.rest=e,this.databaseurlRT="/api/runtime/sys/v1.0/database-objects"}return e.prototype.getAllDatabaseObjectRT=function(){var e=new a.HttpHeaders;e.append("Content-Type","application/json"),e.append("Authorization","as"),e.append("Access-Control-Allow-Origin","*"),e.append("sessionId",this.sessionId);var t={params:{},headers:e};return this.rest.get(this.databaseurlRT,t).pipe()},e.prototype.getAllDatabaseObjectByBOID=function(e){var t=new a.HttpHeaders;t.append("Content-Type","application/json"),t.append("Authorization","as"),t.append("Access-Control-Allow-Origin","*"),t.append("sessionId",this.sessionId);var n={params:{},headers:t},o=this.databaseurlRT+"/bo/"+e;return this.rest.get(o,n).pipe()},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[{type:a.HttpClient}]},e}(),l=function(){function e(e){this.dboHelpService=e,this.url="",this.title="帮助",this.selectedAfterOk=new n.EventEmitter,this.modalClosed=new n.EventEmitter,this.selectableSettings={checkboxOnly:!0,mode:"single",enabled:!0};var t=this.sessionId;t?this.dboHelpService.sessionId=t:alert("session信息不能为空")}return e.prototype.ngOnChanges=function(e){},e.prototype.ngOnInit=function(){var t=this;this.dboHelpService.getAllDatabaseObjectRT().subscribe(function(e){t.data=e,t.curSelectedKeys=[],t.initSelectedKeys&&t.initSelectedKeys.map(function(e){return t.curSelectedKeys.push(e)})},function(e){console.log("获取数据源失败！"),console.log(e)})},e.prototype.btnOk=function(){var n=this,o=[];this.curSelectedKeys.forEach(function(t){var e=n.data.find(function(e){return e.id===t});o.push(e)}),o?(this.selectedAfterOk.next(o),this.hideModal()):alert("请选择数据库对象")},e.prototype.hideModal=function(){this.modalClosed.emit()},e.decorators=[{type:n.Component,args:[{selector:"app-dbo-selectrt",template:'<div class="modal-body">\r\n<div class="templateBlock">\r\n  <kendo-grid [class]="\'flex-auto\'" [selectable]="selectableSettings" [kendoGridSelectBy]="\'id\'" [selectedKeys]="curSelectedKeys"\r\n    [kendoGridBinding]="data">\r\n    <kendo-grid-checkbox-column width="10%"></kendo-grid-checkbox-column>\r\n    <kendo-grid-column field="code" title="编号" width="40%"></kendo-grid-column>\r\n    <kendo-grid-column field="name" title="名称" width="45%"></kendo-grid-column>\r\n  </kendo-grid>\r\n  </div>\r\n</div>\r\n<ng-template #btns>\r\n<button type="button" class="btn btn-default btn-primary" (click)="btnOk()">确定</button>\r\n<button type="button" class="btn btn-default" (click)="hideModal()">取消</button>\r\n</ng-template>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:d}]},e.propDecorators={url:[{type:n.Input}],title:[{type:n.Input}],isShow:[{type:n.Input}],initSelectedKeys:[{type:n.Input}],sessionId:[{type:n.Input}],selectedAfterOk:[{type:n.Output}],modalClosed:[{type:n.Output}],modalFooter:[{type:n.ViewChild,args:["modalFooter"]}],btns:[{type:n.ViewChild,args:["btns"]}]},e}(),c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r=function(o){function e(e,t){var n=o.call(this)||this;return n.cfr=e,n.injector=t,n}return function r(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,o),e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.GridModule,s.FormsModule,a.HttpClientModule],providers:[d],declarations:[l],entryComponents:[l]}]}],e.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:n.Injector}]},e}(o.PackageModule);e.DboHelpRtService=d,e.DboSelectRTComponent=l,e.DboSelectRTModule=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-lcm-dbo-selectrt.umd.min.js.map