(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('mxgraph'), require('@ngx-translate/core'), require('@farris/ui-tree'), require('@farris/ui-common'), require('@farris/ui-datagrid-editors'), require('@farris/ui-treetable'), require('@farris/ui-input-group'), require('@farris/ui-language-textbox'), require('@farris/ui-number-spinner'), require('@farris/ui-switch'), require('@angular/common'), require('@angular/common/http'), require('@ecp-caf/caf-common'), require('@farris/ui-draggable'), require('@farris/ui-text'), require('@farris/ui-section'), require('@farris/ui-dialog'), require('@farris/ui-datagrid'), require('rxjs/operators'), require('@gsp-sys/rtf-common'), require('@edp-bif/common-api'), require('@farris/ui-loading'), require('@farris/ui-modal'), require('@farris/ui-notify'), require('@angular/forms'), require('rxjs'), require('@edp-aif/runtime-api'), require('@edp-aif/common-api'), require('@farris/ui-messager'), require('@farris/devkit'), require('@farris/command-services'), require('@angular/core')) :
    typeof define === 'function' && define.amd ? define('@edp-bif/runtime-api', ['exports', 'mxgraph', '@ngx-translate/core', '@farris/ui-tree', '@farris/ui-common', '@farris/ui-datagrid-editors', '@farris/ui-treetable', '@farris/ui-input-group', '@farris/ui-language-textbox', '@farris/ui-number-spinner', '@farris/ui-switch', '@angular/common', '@angular/common/http', '@ecp-caf/caf-common', '@farris/ui-draggable', '@farris/ui-text', '@farris/ui-section', '@farris/ui-dialog', '@farris/ui-datagrid', 'rxjs/operators', '@gsp-sys/rtf-common', '@edp-bif/common-api', '@farris/ui-loading', '@farris/ui-modal', '@farris/ui-notify', '@angular/forms', 'rxjs', '@edp-aif/runtime-api', '@edp-aif/common-api', '@farris/ui-messager', '@farris/devkit', '@farris/command-services', '@angular/core'], factory) :
    (factory((global['edp-bif'] = global['edp-bif'] || {}, global['edp-bif']['runtime-api'] = {}),global.mxgraphFactory,global.core,global.uiTree,global.uiCommon,global.uiDatagridEditors,global.uiTreetable,global.uiInputGroup,global.uiLanguageTextbox,global.uiNumberSpinner,global.uiSwitch,global.ng.common,global.ng.common.http,global.cafCommon,global.uiDraggable,global.uiText,global.uiSection,global.uiDialog,global.uiDatagrid,global.rxjs.operators,global.rtfCommon,global.commonApi,global.uiLoading,global.uiModal,global.uiNotify,global.ng.forms,global.rxjs,global.runtimeApi,global.commonApi$1,global.uiMessager,global.devkit,global.commandServices,global.ng.core));
}(this, (function (exports,mxgraphFactory,core,uiTree,uiCommon,uiDatagridEditors,uiTreetable,uiInputGroup,uiLanguageTextbox,uiNumberSpinner,uiSwitch,common,http,cafCommon,uiDraggable,uiText,uiSection,uiDialog,uiDatagrid,operators,rtfCommon,commonApi,uiLoading,uiModal,uiNotify,forms,rxjs,runtimeApi,commonApi$1,uiMessager,devkit,commandServices,core$1) { 'use strict';

    mxgraphFactory = mxgraphFactory && mxgraphFactory.hasOwnProperty('default') ? mxgraphFactory['default'] : mxgraphFactory;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/mxgraphFactory.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    window['mxBasePath'] = window['mxBasePath'] || "/platform/runtime/common/web/@edp-pmf/mxgraph";
    window['mxLoadResources'] = window['mxLoadResources'] || undefined;
    window['mxForceIncludes'] = window['mxForceIncludes'] || undefined;
    window['mxResourceExtension'] = window['mxResourceExtension'] || undefined;
    window['mxLoadStylesheets'] = window['mxLoadStylesheets'] || undefined;
    window['imageBasePath'] = window['imageBasePath'] || undefined;
    window['mxLanguage'] = window['mxLanguage'] || undefined;
    window['mxDefaultLanguage'] = window['mxDefaultLanguage'] || undefined;
    window['mxLanguages'] = window['mxLanguages'] || undefined;
    // declare global {
    //     var mxBasePath;
    //     var mxLoadResources;
    //     var mxForceIncludes;
    //     var mxResourceExtension;
    //     var mxLoadStylesheets;
    //     var mxBasePath;
    //     var imageBasePath;
    //     var mxLanguage;
    //     var mxDefaultLanguage;
    //     var mxLanguages;
    // }
    // declare const require:any;
    // const mxgraphFactory = require("/platform/common/web/mxgraph/build.js");
    /** @type {?} */
    var mxgraph = mxgraphFactory({});

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Editor.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Editor
     * @type {?}
     */
    var mxDefaultKeyHandlerType = mxgraph.mxDefaultKeyHandler;
    /** @type {?} */
    var mxDefaultPopupMenuType = mxgraph.mxDefaultPopupMenu;
    /** @type {?} */
    var mxDefaultToolbarType = mxgraph.mxDefaultToolbar;
    /** @type {?} */
    var mxEditorType = mxgraph.mxEditor;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Handler.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Handler
     * @type {?}
     */
    var mxCellHighlightType = mxgraph.mxCellHighlight;
    /** @type {?} */
    var mxCellMarkerType = mxgraph.mxCellMarker;
    /** @type {?} */
    var mxCellTrackerType = mxgraph.mxCellTracker;
    /** @type {?} */
    var mxConnectionHandlerType = mxgraph.mxConnectionHandler;
    /** @type {?} */
    var mxConstraintHandlerType = mxgraph.mxConstraintHandler;
    /** @type {?} */
    var mxEdgeHandlerType = mxgraph.mxEdgeHandler;
    /** @type {?} */
    var mxEdgeSegmentHandlerType = mxgraph.mxEdgeSegmentHandler;
    /** @type {?} */
    var mxElbowEdgeHandlerType = mxgraph.mxElbowEdgeHandler;
    /** @type {?} */
    var mxGraphHandlerType = mxgraph.mxGraphHandler;
    /** @type {?} */
    var mxHandleType = mxgraph.mxHandle;
    /** @type {?} */
    var mxKeyHandlerType = mxgraph.mxKeyHandler;
    /** @type {?} */
    var mxPanningHandlerType = mxgraph.mxPanningHandler;
    /** @type {?} */
    var mxPopupMenuHandlerType = mxgraph.mxPopupMenuHandler;
    /** @type {?} */
    var mxRubberbandType = mxgraph.mxRubberband;
    /** @type {?} */
    var mxSelectionCellsHandlerType = mxgraph.mxSelectionCellsHandler;
    /** @type {?} */
    var mxTooltipHandlerType = mxgraph.mxTooltipHandler;
    /** @type {?} */
    var mxVertexHandlerType = mxgraph.mxVertexHandler;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/IO.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * IO
     * @type {?}
     */
    var mxCellCodecType = mxgraph.mxCellCodec;
    /** @type {?} */
    var mxChildChangeCodecType = mxgraph.mxChildChangeCodec;
    /** @type {?} */
    var mxDefaultKeyHandlerCodecType = mxgraph.mxDefaultKeyHandlerCodec;
    /** @type {?} */
    var mxDefaultPopupMenuCodecType = mxgraph.mxDefaultPopupMenuCodec;
    /** @type {?} */
    var mxDefaultToolbarCodecType = mxgraph.mxDefaultToolbarCodec;
    /** @type {?} */
    var mxEditorCodecType = mxgraph.mxEditorCodec;
    /** @type {?} */
    var mxGenericChangeCodecType = mxgraph.mxGenericChangeCodec;
    /** @type {?} */
    var mxGraphCodecType = mxgraph.mxGraphCodec;
    /** @type {?} */
    var mxGraphViewCodecType = mxgraph.mxGraphViewCodec;
    /** @type {?} */
    var mxModelCodecType = mxgraph.mxModelCodec;
    /** @type {?} */
    var mxObjectCodecType = mxgraph.mxObjectCodec;
    /** @type {?} */
    var mxRootChangeCodecType = mxgraph.mxRootChangeCodec;
    /** @type {?} */
    var mxStylesheetCodecType = mxgraph.mxStylesheetCodec;
    /** @type {?} */
    var mxTerminalChangeCodecType = mxgraph.mxTerminalChangeCodec;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Layout.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Layout
     * @type {?}
     */
    var mxCircleLayoutType = mxgraph.mxCircleLayout;
    /** @type {?} */
    var mxCompactTreeLayoutType = mxgraph.mxCompactTreeLayout;
    /** @type {?} */
    var mxCompositeLayoutType = mxgraph.mxCompositeLayout;
    /** @type {?} */
    var mxEdgeLabelLayoutType = mxgraph.mxEdgeLabelLayout;
    /** @type {?} */
    var mxFastOrganicLayoutType = mxgraph.mxFastOrganicLayout;
    /** @type {?} */
    var mxGraphLayoutType = mxgraph.mxGraphLayout;
    /** @type {?} */
    var mxParallelEdgeLayoutType = mxgraph.mxParallelEdgeLayout;
    /** @type {?} */
    var mxPartitionLayoutType = mxgraph.mxPartitionLayout;
    /** @type {?} */
    var mxRadialTreeLayoutType = mxgraph.mxRadialTreeLayout;
    /** @type {?} */
    var mxStackLayoutType = mxgraph.mxStackLayout;
    /**
     * Layout Hierarchical
     * @type {?}
     */
    var mxHierarchicalLayoutType = mxgraph.mxHierarchicalLayout;
    /** @type {?} */
    var mxSwimlaneLayoutType = mxgraph.mxSwimlaneLayout;
    /**
     * Layout Hierarchical Model
     * @type {?}
     */
    var mxGraphAbstractHierarchyCellType = mxgraph.mxGraphAbstractHierarchyCell;
    /** @type {?} */
    var mxGraphHierarchyEdgeType = mxgraph.mxGraphHierarchyEdge;
    /** @type {?} */
    var mxGraphHierarchyModelType = mxgraph.mxGraphHierarchyModel;
    /** @type {?} */
    var mxGraphHierarchyNodeType = mxgraph.mxGraphHierarchyNode;
    /** @type {?} */
    var mxSwimlaneModelType = mxgraph.mxSwimlaneModel;
    /**
     * Layout Hierarchical Stage
     * @type {?}
     */
    var mxCoordinateAssignmentType = mxgraph.mxCoordinateAssignment;
    /** @type {?} */
    var mxHierarchicalLayoutStageType = mxgraph.mxHierarchicalLayoutStage;
    /** @type {?} */
    var mxMedianHybridCrossingReductionType = mxgraph.mxMedianHybridCrossingReduction;
    /** @type {?} */
    var mxMinimumCycleRemoverType = mxgraph.mxMinimumCycleRemover;
    /** @type {?} */
    var mxSwimlaneOrderingType = mxgraph.mxSwimlaneOrdering;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Model.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Model
     * @type {?}
     */
    var mxCellType = mxgraph.mxCell;
    /** @type {?} */
    var mxCellPathType = mxgraph.mxCellPath;
    /** @type {?} */
    var mxGeometryType = mxgraph.mxGeometry;
    /** @type {?} */
    var mxGraphModelType = mxgraph.mxGraphModel;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Others.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Others
     * @type {?}
     */
    var renderingHintType = mxgraph.renderingHint;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Shape.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Shape
     * @type {?}
     */
    var mxActorType = mxgraph.mxActor;
    /** @type {?} */
    var mxArrowType = mxgraph.mxArrow;
    /** @type {?} */
    var mxArrowConnectorType = mxgraph.mxArrowConnector;
    /** @type {?} */
    var mxCloudType = mxgraph.mxCloud;
    /** @type {?} */
    var mxConnectorType = mxgraph.mxConnector;
    /** @type {?} */
    var mxCylinderType = mxgraph.mxCylinder;
    /** @type {?} */
    var mxDoubleEllipseType = mxgraph.mxDoubleEllipse;
    /** @type {?} */
    var mxEllipseType = mxgraph.mxEllipse;
    /** @type {?} */
    var mxHexagonType = mxgraph.mxHexagon;
    /** @type {?} */
    var mxImageShapeType = mxgraph.mxImageShape;
    /** @type {?} */
    var mxLabelType = mxgraph.mxLabel;
    /** @type {?} */
    var mxLineType = mxgraph.mxLine;
    /** @type {?} */
    var mxMarkerType = mxgraph.mxMarker;
    /** @type {?} */
    var mxPolylineType = mxgraph.mxPolyline;
    /** @type {?} */
    var mxRectangleShapeType = mxgraph.mxRectangleShape;
    /** @type {?} */
    var mxRhombusType = mxgraph.mxRhombus;
    /** @type {?} */
    var mxShapeType = mxgraph.mxShape;
    /** @type {?} */
    var mxStencilType = mxgraph.mxStencil;
    /** @type {?} */
    var mxStencilRegistryType = mxgraph.mxStencilRegistry;
    /** @type {?} */
    var mxSwimlaneType = mxgraph.mxSwimlane;
    /** @type {?} */
    var mxTextType = mxgraph.mxText;
    /** @type {?} */
    var mxTriangleType = mxgraph.mxTriangle;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/Util.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Util
     * @type {?}
     */
    var mxAbstractCanvas2DType = mxgraph.mxAbstractCanvas2D;
    /** @type {?} */
    var mxAnimationType = mxgraph.mxAnimation;
    /** @type {?} */
    var mxAutoSaveManagerType = mxgraph.mxAutoSaveManager;
    /** @type {?} */
    var mxClipboardType = mxgraph.mxClipboard;
    /** @type {?} */
    var mxConstantsType = mxgraph.mxConstants;
    /** @type {?} */
    var mxDictionaryType = mxgraph.mxDictionary;
    /** @type {?} */
    var mxDivResizerType = mxgraph.mxDivResizer;
    /** @type {?} */
    var mxDragSourceType = mxgraph.mxDragSource;
    /** @type {?} */
    var mxEffectsType = mxgraph.mxEffects;
    /** @type {?} */
    var mxEventType = mxgraph.mxEvent;
    /** @type {?} */
    var mxEventObjectType = mxgraph.mxEventObject;
    /** @type {?} */
    var mxEventSourceType = mxgraph.mxEventSource;
    /** @type {?} */
    var mxFormType = mxgraph.mxForm;
    /** @type {?} */
    var mxGuideType = mxgraph.mxGuide;
    /** @type {?} */
    var mxImageType = mxgraph.mxImage;
    /** @type {?} */
    var mxImageBundleType = mxgraph.mxImageBundle;
    /** @type {?} */
    var mxImageExportType = mxgraph.mxImageExport;
    /** @type {?} */
    var mxLogType = mxgraph.mxLog;
    /** @type {?} */
    var mxMorphingType = mxgraph.mxMorphing;
    /** @type {?} */
    var mxMouseEventType = mxgraph.mxMouseEvent;
    /** @type {?} */
    var mxObjectIdentityType = mxgraph.mxObjectIdentity;
    /** @type {?} */
    var mxPanningManagerType = mxgraph.mxPanningManager;
    /** @type {?} */
    var mxPointType = mxgraph.mxPoint;
    /** @type {?} */
    var mxPopupMenuType = mxgraph.mxPopupMenu;
    /** @type {?} */
    var mxRectangleType = mxgraph.mxRectangle;
    /** @type {?} */
    var mxResourcesType = mxgraph.mxResources;
    /** @type {?} */
    var mxSvgCanvas2DType = mxgraph.mxSvgCanvas2D;
    /** @type {?} */
    var mxToolbarType = mxgraph.mxToolbar;
    /** @type {?} */
    var mxUndoableEditType = mxgraph.mxUndoableEdit;
    /** @type {?} */
    var mxUndoManagerType = mxgraph.mxUndoManager;
    /** @type {?} */
    var mxUrlConverterType = mxgraph.mxUrlConverter;
    /** @type {?} */
    var mxUtilsType = mxgraph.mxUtils;
    /** @type {?} */
    var mxVmlCanvas2DType = mxgraph.mxVmlCanvas2D;
    /** @type {?} */
    var mxWindowType = mxgraph.mxWindow;
    /** @type {?} */
    var mxXmlCanvas2DType = mxgraph.mxXmlCanvas2D;
    /** @type {?} */
    var mxXmlRequestType = mxgraph.mxXmlRequest;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/View.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * View
     * @type {?}
     */
    var mxCellEditorType = mxgraph.mxCellEditor;
    /** @type {?} */
    var mxCellOverlayType = mxgraph.mxCellOverlay;
    /** @type {?} */
    var mxCellRendererType = mxgraph.mxCellRenderer;
    /** @type {?} */
    var mxCellStateType = mxgraph.mxCellState;
    /** @type {?} */
    var mxCellStatePreviewType = mxgraph.mxCellStatePreview;
    /** @type {?} */
    var mxConnectionConstraintType = mxgraph.mxConnectionConstraint;
    /** @type {?} */
    var mxEdgeStyleType = mxgraph.mxEdgeStyle;
    /** @type {?} */
    var mxGraphType = mxgraph.mxGraph;
    /** @type {?} */
    var mxGraphSelectionModelType = mxgraph.mxGraphSelectionModel;
    /** @type {?} */
    var mxGraphViewType = mxgraph.mxGraphView;
    /** @type {?} */
    var mxLayoutManagerType = mxgraph.mxLayoutManager;
    /** @type {?} */
    var mxMultiplicityType = mxgraph.mxMultiplicity;
    /** @type {?} */
    var mxOutlineType = mxgraph.mxOutline;
    /** @type {?} */
    var mxPerimeterType = mxgraph.mxPerimeter;
    /** @type {?} */
    var mxPrintPreviewType = mxgraph.mxPrintPreview;
    /** @type {?} */
    var mxStyleRegistryType = mxgraph.mxStyleRegistry;
    /** @type {?} */
    var mxStylesheetType = mxgraph.mxStylesheet;
    /** @type {?} */
    var mxSwimlaneManagerType = mxgraph.mxSwimlaneManager;
    /** @type {?} */
    var mxTemporaryCellStatesType = mxgraph.mxTemporaryCellStates;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/mxClient.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * mxClient
     * @type {?}
     */
    var mxClientType = mxgraph.mxClient;

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/mxgraph-types.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    (function (MxGraphNS) {
    })(exports.MxGraphNS || (exports.MxGraphNS = {}));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/mxgraph/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/ref/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (Object.prototype.hasOwnProperty.call(b, p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __values(o) {
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
        if (m)
            return m.call(o);
        if (o && typeof o.length === "number")
            return {
                next: function () {
                    if (o && i >= o.length)
                        o = void 0;
                    return { value: o && o[i++], done: !o };
                }
            };
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    /** @deprecated */
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/data/BillData.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillData = /** @class */ (function (_super) {
        __extends(BillData, _super);
        function BillData() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillData.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.name = null;
                this.value = null;
            };
        /**
         * @return {?}
         */
        BillData.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "name", this.name);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "value", this.value);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillData.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.name = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "name");
                this.value = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "value");
            };
        return BillData;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/data/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/ManualCreationMode.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ManualCreationMode = {
        Push: "Push",
        Pull: "Pull",
        SpecificPush: "SpecificPush",
        SpecificPull: "SpecificPull",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/FormBillCreationProcessExecutorArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FormBillCreationProcessExecutorArgs = /** @class */ (function (_super) {
        __extends(FormBillCreationProcessExecutorArgs, _super);
        function FormBillCreationProcessExecutorArgs() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            /**
             * sourceVoEntityDatas和sourceVoEntityDataIds设置其一即可，优先使用sourceVoEntityDatas，若为空则根据sourceVoEntityDataIds查询
             */
            _this.sourceVoEntityDataIds = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        FormBillCreationProcessExecutorArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.billCreationProcessId = null;
                this.creationRuleInstanceId = null;
            };
        /**
         * @return {?}
         */
        FormBillCreationProcessExecutorArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billCreationProcessId", this.billCreationProcessId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "creationRuleInstanceId", this.creationRuleInstanceId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "manualCreationMode", this.manualCreationMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "sourceVoEntityDataIds", commonApi$1.BpmnModelJsonHelper.StringListToJson(this.sourceVoEntityDataIds));
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FormBillCreationProcessExecutorArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.billCreationProcessId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "billCreationProcessId");
                this.creationRuleInstanceId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "creationRuleInstanceId");
                this.manualCreationMode = ManualCreationMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "creationRuleInstanceId")];
                this.sourceVoEntityDataIds = commonApi$1.BpmnModelJsonHelper.StringListFromJson(commonApi$1.BpmnModelJsonHelper.GetAttributeValue(obj, "sourceVoEntityDataIds"));
            };
        return FormBillCreationProcessExecutorArgs;
    }(runtimeApi.FormCreationRuleExecutorArgs));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/FormGetBillCreationProcessEntityExArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FormGetBillCreationProcessEntityExArgs = /** @class */ (function (_super) {
        __extends(FormGetBillCreationProcessEntityExArgs, _super);
        function FormGetBillCreationProcessEntityExArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        FormGetBillCreationProcessEntityExArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.upBillVoId = null;
                this.downBillVoId = null;
                this.manualCreationMode = null;
            };
        /**
         * @return {?}
         */
        FormGetBillCreationProcessEntityExArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "upBillVoId", this.upBillVoId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "downBillVoId", this.downBillVoId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "manualCreationMode", this.manualCreationMode);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FormGetBillCreationProcessEntityExArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.upBillVoId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "upBillVoId");
                this.downBillVoId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "downBillVoId");
                this.manualCreationMode = ManualCreationMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "manualCreationMode")];
            };
        return FormGetBillCreationProcessEntityExArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/FormGetBillCreationProcessEntityExResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FormGetBillCreationProcessEntityExResult = /** @class */ (function (_super) {
        __extends(FormGetBillCreationProcessEntityExResult, _super);
        function FormGetBillCreationProcessEntityExResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        FormGetBillCreationProcessEntityExResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.billCreationProcessEntityExes = new Array();
            };
        /**
         * @return {?}
         */
        FormGetBillCreationProcessEntityExResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billCreationProcessEntityExes", this.billCreationProcessEntityExes);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FormGetBillCreationProcessEntityExResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.billCreationProcessEntityExes = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billCreationProcessEntityExes", commonApi.RtSlimBillCreationProcessEntityEx);
            };
        return FormGetBillCreationProcessEntityExResult;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/GeneralTextIdWithDataId.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GeneralTextIdWithDataId = /** @class */ (function (_super) {
        __extends(GeneralTextIdWithDataId, _super);
        function GeneralTextIdWithDataId() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        GeneralTextIdWithDataId.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.generalTextId = null;
                this.dataId = null;
            };
        /**
         * @return {?}
         */
        GeneralTextIdWithDataId.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "generalTextId", this.generalTextId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GeneralTextIdWithDataId.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.generalTextId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "generalTextId");
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
            };
        return GeneralTextIdWithDataId;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/form-rest/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/BillDetailInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillDetailInfo = /** @class */ (function (_super) {
        __extends(BillDetailInfo, _super);
        function BillDetailInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.detailIds = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillDetailInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.detailCode = null;
                this.detailIds = [];
            };
        /**
         * @return {?}
         */
        BillDetailInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "detailCode", this.detailCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "detailIds", commonApi$1.BpmnModelJsonHelper.StringListToJson(this.detailIds));
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillDetailInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.detailCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "detailCode");
                this.detailIds = commonApi$1.BpmnModelJsonHelper.StringListFromJson(commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "detailIds"));
            };
        return BillDetailInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/BillItemInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillItemInfo = /** @class */ (function (_super) {
        __extends(BillItemInfo, _super);
        function BillItemInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billDetailInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillItemInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.itemId = null;
                this.billDetailInfos = [];
            };
        /**
         * @return {?}
         */
        BillItemInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "itemId", this.itemId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billDetailInfos", this.billDetailInfos);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillItemInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.itemId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "itemId");
                this.billDetailInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billDetailInfos", BillDetailInfo);
            };
        return BillItemInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/BillChildInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillChildInfo = /** @class */ (function (_super) {
        __extends(BillChildInfo, _super);
        function BillChildInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billItemInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillChildInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.itemCode = null;
                this.billItemInfos = [];
            };
        /**
         * @return {?}
         */
        BillChildInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "itemCode", this.itemCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billItemInfos", this.billItemInfos);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillChildInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.itemCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "itemCode");
                this.billItemInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billItemInfos", BillItemInfo);
            };
        return BillChildInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/TrackingMappingAssociation.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var TrackingMappingAssociation = /** @class */ (function (_super) {
        __extends(TrackingMappingAssociation, _super);
        function TrackingMappingAssociation() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        TrackingMappingAssociation.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.upBillTableCodePath = null;
                this.upBillDataIdPath = null;
                this.downBillTableCodePath = null;
                this.downBillDataIdPath = null;
            };
        /**
         * @return {?}
         */
        TrackingMappingAssociation.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "upBillTableCodePath", this.upBillTableCodePath);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "upBillDataIdPath", this.upBillDataIdPath);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "downBillTableCodePath", this.downBillTableCodePath);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "downBillDataIdPath", this.downBillDataIdPath);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        TrackingMappingAssociation.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.upBillTableCodePath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "upBillTableCodePath");
                this.upBillDataIdPath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "upBillDataIdPath");
                this.downBillTableCodePath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "downBillTableCodePath");
                this.downBillDataIdPath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "downBillDataIdPath");
            };
        return TrackingMappingAssociation;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/BillDataInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillDataInfo = /** @class */ (function (_super) {
        __extends(BillDataInfo, _super);
        function BillDataInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billChildInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillDataInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.dataId = null;
                this.caption = null;
                this.summary = null;
                this.canContinueTracking = false;
                this.trackingMappingAssociations = null;
                this.billChildInfos = [];
                this.curYear = null;
            };
        /**
         * @return {?}
         */
        BillDataInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "caption", this.caption);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "summary", this.summary);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "canContinueTracking", this.canContinueTracking);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "trackingMappingAssociations", this.trackingMappingAssociations);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billChildInfos", this.billChildInfos);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "curYear", this.curYear);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillDataInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
                this.caption = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "caption");
                this.summary = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "summary");
                this.canContinueTracking = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, "canContinueTracking");
                this.trackingMappingAssociations = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "trackingMappingAssociations", TrackingMappingAssociation);
                this.billChildInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billChildInfos", BillChildInfo);
                this.curYear = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "curYear");
            };
        return BillDataInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/BillInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillInfo = /** @class */ (function (_super) {
        __extends(BillInfo, _super);
        function BillInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billDataInfos = [];
            _this.jointQueryMode = commonApi.JointQueryMode.DEFAULT;
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        BillInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.billTrackingSettings = null;
                this.schemaId = null;
                this.suCode = null;
                this.documentTypeId = null;
                this.bizKind = null;
                this.bizType = null;
                this.billDataInfos = [];
                this.jointQueryMode = commonApi.JointQueryMode.DEFAULT;
                this.jointQueryParameters = null;
                this.trackingSourceType = null;
            };
        /**
         * @return {?}
         */
        BillInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billTrackingSettings", this.billTrackingSettings);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "schemaId", this.schemaId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "documentTypeId", this.documentTypeId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizKind", this.bizKind);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizType", this.bizType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billDataInfos", this.billDataInfos);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "jointQueryMode", this.jointQueryMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "jointQueryParameters", this.jointQueryParameters);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "trackingSourceType", this.trackingSourceType);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BillInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.billTrackingSettings = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "billTrackingSettings");
                this.schemaId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "schemaId");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.documentTypeId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "documentTypeId");
                this.bizKind = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizKind");
                this.bizType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizType");
                this.billDataInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billDataInfos", BillDataInfo);
                this.jointQueryMode = commonApi.JointQueryMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "jointQueryMode")];
                this.jointQueryParameters = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "jointQueryParameters");
                this.trackingSourceType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "trackingSourceType");
            };
        return BillInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/CanTrackingInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 此类在graph组件中需要硬转为BillInfo对象，故增减字段时需要同步修改data-service中的build方法
     * @see { BillTrackerDataService }
     */
    var /**
     * 此类在graph组件中需要硬转为BillInfo对象，故增减字段时需要同步修改data-service中的build方法
     * @see { BillTrackerDataService }
     */ CanTrackingInfo = /** @class */ (function (_super) {
        __extends(CanTrackingInfo, _super);
        function CanTrackingInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billChildInfos = [];
            _this.jointQueryMode = commonApi.JointQueryMode.DEFAULT;
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        CanTrackingInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.canUpTracking = false;
                this.canDownTracking = false;
                this.documentTypeId = null;
                this.bizKind = null;
                this.bizType = null;
                this.dataId = null;
                this.caption = null;
                this.summary = null;
                this.suCode = null;
                this.schemaId = null;
                this.billChildInfos = [];
                this.jointQueryMode = commonApi.JointQueryMode.DEFAULT;
                this.jointQueryParameters = null;
                this.trackingSourceType = null;
                this.curYear = null;
            };
        /**
         * @return {?}
         */
        CanTrackingInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "canUpTracking", this.canUpTracking);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "canDownTracking", this.canDownTracking);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "documentTypeId", this.documentTypeId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizKind", this.bizKind);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizType", this.bizType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "caption", this.caption);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "summary", this.summary);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "schemaId", this.schemaId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billChildInfos", this.billChildInfos);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "jointQueryMode", this.jointQueryMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "jointQueryParameters", this.jointQueryParameters);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "trackingSourceType", this.trackingSourceType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "curYear", this.curYear);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        CanTrackingInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.canUpTracking = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, "canUpTracking");
                this.canDownTracking = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsBoolean(obj, "canDownTracking");
                this.documentTypeId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "documentTypeId");
                this.bizKind = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizKind");
                this.bizType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizType");
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
                this.caption = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "caption");
                this.summary = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "summary");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.schemaId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "schemaId");
                this.billChildInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billChildInfos", BillChildInfo);
                this.jointQueryMode = commonApi.JointQueryMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "jointQueryMode")];
                this.jointQueryParameters = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "jointQueryParameters");
                this.trackingSourceType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "trackingSourceType");
                this.curYear = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "curYear");
            };
        return CanTrackingInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/DownBillInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DownBillInfo = /** @class */ (function (_super) {
        __extends(DownBillInfo, _super);
        function DownBillInfo() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return DownBillInfo;
    }(BillInfo));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/GetBillsInfoArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetBillsInfoArgs = /** @class */ (function (_super) {
        __extends(GetBillsInfoArgs, _super);
        function GetBillsInfoArgs() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billChildInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        GetBillsInfoArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.documentTypeId = null;
                this.bizKind = null;
                this.bizType = null;
                this.billDataId = null;
                this.billChildInfos = [];
                this.curYear = null;
            };
        /**
         * @return {?}
         */
        GetBillsInfoArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "documentTypeId", this.documentTypeId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizKind", this.bizKind);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "bizType", this.bizType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billDataId", this.billDataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billChildInfos", this.billChildInfos);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "curYear", this.curYear);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GetBillsInfoArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.documentTypeId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "documentTypeId");
                this.bizKind = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizKind");
                this.bizType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "bizType");
                this.billDataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "billDataId");
                this.billChildInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billChildInfos", BillChildInfo);
                this.curYear = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "curYear");
            };
        return GetBillsInfoArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/GetDownBillsInfoArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetDownBillsInfoArgs = /** @class */ (function (_super) {
        __extends(GetDownBillsInfoArgs, _super);
        function GetDownBillsInfoArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return GetDownBillsInfoArgs;
    }(GetBillsInfoArgs));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/GetUpBillsInfoArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetUpBillsInfoArgs = /** @class */ (function (_super) {
        __extends(GetUpBillsInfoArgs, _super);
        function GetUpBillsInfoArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return GetUpBillsInfoArgs;
    }(GetBillsInfoArgs));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/TrackingHelper.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var TrackingHelper = /** @class */ (function () {
        function TrackingHelper() {
        }
        /**
         * @param {?} originalDownBillInfos
         * @param {?} downBillInfos
         * @return {?}
         */
        TrackingHelper.concatDownBillInfos = /**
         * @param {?} originalDownBillInfos
         * @param {?} downBillInfos
         * @return {?}
         */
            function (originalDownBillInfos, downBillInfos) {
                var e_1, _a, e_2, _b;
                if (originalDownBillInfos == null) {
                    originalDownBillInfos = new Array();
                }
                if (downBillInfos == null || downBillInfos.length == 0) {
                    return originalDownBillInfos;
                }
                /** @type {?} */
                var originalVoIds = new Array();
                originalDownBillInfos.forEach(( /**
                 * @param {?} info
                 * @return {?}
                 */function (info) { return originalVoIds.push(info.schemaId); }));
                try {
                    for (var downBillInfos_1 = __values(downBillInfos), downBillInfos_1_1 = downBillInfos_1.next(); !downBillInfos_1_1.done; downBillInfos_1_1 = downBillInfos_1.next()) {
                        var downBillInfo = downBillInfos_1_1.value;
                        //是否存在某类单据
                        if (originalVoIds.includes(downBillInfo.schemaId)) {
                            var _loop_1 = function (oldDownBillInfo) {
                                var e_3, _a, e_4, _b, e_5, _c, e_6, _d;
                                if (oldDownBillInfo.schemaId == downBillInfo.schemaId) {
                                    /** @type {?} */
                                    var oldBillDataInfos = oldDownBillInfo.billDataInfos;
                                    /** @type {?} */
                                    var dataIds_1 = new Array();
                                    oldBillDataInfos.forEach(( /**
                                     * @param {?} dataInfo
                                     * @return {?}
                                     */function (dataInfo) { return dataIds_1.push(dataInfo.dataId); }));
                                    try {
                                        for (var _e = __values(downBillInfo.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                            var billDataInfo = _f.value;
                                            //是否存在某张单据
                                            if (dataIds_1.includes(billDataInfo.dataId)) {
                                                try {
                                                    for (var oldBillDataInfos_1 = __values(oldBillDataInfos), oldBillDataInfos_1_1 = oldBillDataInfos_1.next(); !oldBillDataInfos_1_1.done; oldBillDataInfos_1_1 = oldBillDataInfos_1.next()) {
                                                        var oldBillDataInfo = oldBillDataInfos_1_1.value;
                                                        if (oldBillDataInfo.dataId == billDataInfo.dataId) {
                                                            /** @type {?} */
                                                            var oldAssociations = oldBillDataInfo.trackingMappingAssociations;
                                                            try {
                                                                for (var _g = __values(billDataInfo.trackingMappingAssociations), _h = _g.next(); !_h.done; _h = _g.next()) {
                                                                    var association = _h.value;
                                                                    /** @type {?} */
                                                                    var i = 0;
                                                                    try {
                                                                        for (var oldAssociations_1 = __values(oldAssociations), oldAssociations_1_1 = oldAssociations_1.next(); !oldAssociations_1_1.done; oldAssociations_1_1 = oldAssociations_1.next()) {
                                                                            var association1 = oldAssociations_1_1.value;
                                                                            //是否存在某条记录
                                                                            if (!(association.downBillDataIdPath == association1.downBillDataIdPath) ||
                                                                                !(association.downBillTableCodePath == association1.downBillTableCodePath) ||
                                                                                !(association.upBillDataIdPath == association1.upBillDataIdPath) ||
                                                                                !(association.upBillTableCodePath == association1.upBillTableCodePath)) {
                                                                                i++;
                                                                            }
                                                                        }
                                                                    }
                                                                    catch (e_6_1) {
                                                                        e_6 = { error: e_6_1 };
                                                                    }
                                                                    finally {
                                                                        try {
                                                                            if (oldAssociations_1_1 && !oldAssociations_1_1.done && (_d = oldAssociations_1.return))
                                                                                _d.call(oldAssociations_1);
                                                                        }
                                                                        finally {
                                                                            if (e_6)
                                                                                throw e_6.error;
                                                                        }
                                                                    }
                                                                    if (i == oldAssociations.length) {
                                                                        oldAssociations.push(association);
                                                                    }
                                                                }
                                                            }
                                                            catch (e_5_1) {
                                                                e_5 = { error: e_5_1 };
                                                            }
                                                            finally {
                                                                try {
                                                                    if (_h && !_h.done && (_c = _g.return))
                                                                        _c.call(_g);
                                                                }
                                                                finally {
                                                                    if (e_5)
                                                                        throw e_5.error;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                catch (e_4_1) {
                                                    e_4 = { error: e_4_1 };
                                                }
                                                finally {
                                                    try {
                                                        if (oldBillDataInfos_1_1 && !oldBillDataInfos_1_1.done && (_b = oldBillDataInfos_1.return))
                                                            _b.call(oldBillDataInfos_1);
                                                    }
                                                    finally {
                                                        if (e_4)
                                                            throw e_4.error;
                                                    }
                                                }
                                            }
                                            else {
                                                oldBillDataInfos.push(billDataInfo);
                                            }
                                        }
                                    }
                                    catch (e_3_1) {
                                        e_3 = { error: e_3_1 };
                                    }
                                    finally {
                                        try {
                                            if (_f && !_f.done && (_a = _e.return))
                                                _a.call(_e);
                                        }
                                        finally {
                                            if (e_3)
                                                throw e_3.error;
                                        }
                                    }
                                }
                            };
                            try {
                                for (var originalDownBillInfos_1 = __values(originalDownBillInfos), originalDownBillInfos_1_1 = originalDownBillInfos_1.next(); !originalDownBillInfos_1_1.done; originalDownBillInfos_1_1 = originalDownBillInfos_1.next()) {
                                    var oldDownBillInfo = originalDownBillInfos_1_1.value;
                                    _loop_1(oldDownBillInfo);
                                }
                            }
                            catch (e_2_1) {
                                e_2 = { error: e_2_1 };
                            }
                            finally {
                                try {
                                    if (originalDownBillInfos_1_1 && !originalDownBillInfos_1_1.done && (_b = originalDownBillInfos_1.return))
                                        _b.call(originalDownBillInfos_1);
                                }
                                finally {
                                    if (e_2)
                                        throw e_2.error;
                                }
                            }
                        }
                        else {
                            originalVoIds.push(downBillInfo.schemaId);
                            originalDownBillInfos.push(downBillInfo);
                        }
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (downBillInfos_1_1 && !downBillInfos_1_1.done && (_a = downBillInfos_1.return))
                            _a.call(downBillInfos_1);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                return originalDownBillInfos;
            };
        /**
         * @param {?} originalUpBillInfos
         * @param {?} upBillInfos
         * @return {?}
         */
        TrackingHelper.concatUpBillInfos = /**
         * @param {?} originalUpBillInfos
         * @param {?} upBillInfos
         * @return {?}
         */
            function (originalUpBillInfos, upBillInfos) {
                var e_7, _a, e_8, _b;
                if (originalUpBillInfos == null) {
                    originalUpBillInfos = new Array();
                }
                if (upBillInfos == null || upBillInfos.length == 0) {
                    return originalUpBillInfos;
                }
                /** @type {?} */
                var originalVoIds = new Array();
                originalUpBillInfos.forEach(( /**
                 * @param {?} info
                 * @return {?}
                 */function (info) {
                    originalVoIds.push(info.schemaId);
                }));
                try {
                    for (var upBillInfos_1 = __values(upBillInfos), upBillInfos_1_1 = upBillInfos_1.next(); !upBillInfos_1_1.done; upBillInfos_1_1 = upBillInfos_1.next()) {
                        var upBillInfo = upBillInfos_1_1.value;
                        //是否存在某类单据
                        if (originalVoIds.includes(upBillInfo.schemaId)) {
                            var _loop_2 = function (oldUpBillInfo) {
                                var e_9, _a, e_10, _b, e_11, _c, e_12, _d;
                                if (oldUpBillInfo.schemaId == upBillInfo.schemaId) {
                                    /** @type {?} */
                                    var oldBillDataInfos = oldUpBillInfo.billDataInfos;
                                    /** @type {?} */
                                    var dataIds_2 = new Array();
                                    oldBillDataInfos.forEach(( /**
                                     * @param {?} dataInfo
                                     * @return {?}
                                     */function (dataInfo) { return dataIds_2.push(dataInfo.dataId); }));
                                    try {
                                        for (var _e = __values(upBillInfo.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                            var billDataInfo = _f.value;
                                            //是否存在某张单据
                                            if (dataIds_2.includes(billDataInfo.dataId)) {
                                                try {
                                                    for (var oldBillDataInfos_2 = __values(oldBillDataInfos), oldBillDataInfos_2_1 = oldBillDataInfos_2.next(); !oldBillDataInfos_2_1.done; oldBillDataInfos_2_1 = oldBillDataInfos_2.next()) {
                                                        var oldBillDataInfo = oldBillDataInfos_2_1.value;
                                                        if (oldBillDataInfo.dataId == billDataInfo.dataId) {
                                                            /** @type {?} */
                                                            var oldAssociations = oldBillDataInfo.trackingMappingAssociations;
                                                            try {
                                                                for (var _g = __values(billDataInfo.trackingMappingAssociations), _h = _g.next(); !_h.done; _h = _g.next()) {
                                                                    var association = _h.value;
                                                                    /** @type {?} */
                                                                    var i = 0;
                                                                    try {
                                                                        for (var oldAssociations_2 = __values(oldAssociations), oldAssociations_2_1 = oldAssociations_2.next(); !oldAssociations_2_1.done; oldAssociations_2_1 = oldAssociations_2.next()) {
                                                                            var association1 = oldAssociations_2_1.value;
                                                                            //是否存在某条记录
                                                                            if (!(association.downBillDataIdPath == association1.downBillDataIdPath) ||
                                                                                !(association.downBillTableCodePath == association1.downBillTableCodePath) ||
                                                                                !(association.upBillDataIdPath == association1.upBillDataIdPath) ||
                                                                                !(association.upBillTableCodePath == association1.upBillTableCodePath)) {
                                                                                i++;
                                                                            }
                                                                        }
                                                                    }
                                                                    catch (e_12_1) {
                                                                        e_12 = { error: e_12_1 };
                                                                    }
                                                                    finally {
                                                                        try {
                                                                            if (oldAssociations_2_1 && !oldAssociations_2_1.done && (_d = oldAssociations_2.return))
                                                                                _d.call(oldAssociations_2);
                                                                        }
                                                                        finally {
                                                                            if (e_12)
                                                                                throw e_12.error;
                                                                        }
                                                                    }
                                                                    if (i == oldAssociations.length) {
                                                                        oldAssociations.push(association);
                                                                    }
                                                                }
                                                            }
                                                            catch (e_11_1) {
                                                                e_11 = { error: e_11_1 };
                                                            }
                                                            finally {
                                                                try {
                                                                    if (_h && !_h.done && (_c = _g.return))
                                                                        _c.call(_g);
                                                                }
                                                                finally {
                                                                    if (e_11)
                                                                        throw e_11.error;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                catch (e_10_1) {
                                                    e_10 = { error: e_10_1 };
                                                }
                                                finally {
                                                    try {
                                                        if (oldBillDataInfos_2_1 && !oldBillDataInfos_2_1.done && (_b = oldBillDataInfos_2.return))
                                                            _b.call(oldBillDataInfos_2);
                                                    }
                                                    finally {
                                                        if (e_10)
                                                            throw e_10.error;
                                                    }
                                                }
                                            }
                                            else {
                                                oldBillDataInfos.push(billDataInfo);
                                            }
                                        }
                                    }
                                    catch (e_9_1) {
                                        e_9 = { error: e_9_1 };
                                    }
                                    finally {
                                        try {
                                            if (_f && !_f.done && (_a = _e.return))
                                                _a.call(_e);
                                        }
                                        finally {
                                            if (e_9)
                                                throw e_9.error;
                                        }
                                    }
                                }
                            };
                            try {
                                for (var originalUpBillInfos_1 = __values(originalUpBillInfos), originalUpBillInfos_1_1 = originalUpBillInfos_1.next(); !originalUpBillInfos_1_1.done; originalUpBillInfos_1_1 = originalUpBillInfos_1.next()) {
                                    var oldUpBillInfo = originalUpBillInfos_1_1.value;
                                    _loop_2(oldUpBillInfo);
                                }
                            }
                            catch (e_8_1) {
                                e_8 = { error: e_8_1 };
                            }
                            finally {
                                try {
                                    if (originalUpBillInfos_1_1 && !originalUpBillInfos_1_1.done && (_b = originalUpBillInfos_1.return))
                                        _b.call(originalUpBillInfos_1);
                                }
                                finally {
                                    if (e_8)
                                        throw e_8.error;
                                }
                            }
                        }
                        else {
                            originalVoIds.push(upBillInfo.schemaId);
                            originalUpBillInfos.push(upBillInfo);
                        }
                    }
                }
                catch (e_7_1) {
                    e_7 = { error: e_7_1 };
                }
                finally {
                    try {
                        if (upBillInfos_1_1 && !upBillInfos_1_1.done && (_a = upBillInfos_1.return))
                            _a.call(upBillInfos_1);
                    }
                    finally {
                        if (e_7)
                            throw e_7.error;
                    }
                }
                return originalUpBillInfos;
            };
        return TrackingHelper;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/UpBillInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpBillInfo = /** @class */ (function (_super) {
        __extends(UpBillInfo, _super);
        function UpBillInfo() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return UpBillInfo;
    }(BillInfo));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/typeToFormat.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var TypeToFormat = {
        DEFAULT: "DEFAULT",
        DATE: "DATE",
        DECIMAL: "DECIMAL",
        STRING: "STRING",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/FieldsWithOrder.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FieldsWithOrder = /** @class */ (function (_super) {
        __extends(FieldsWithOrder, _super);
        function FieldsWithOrder() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            /**
             * 数据类型
             */
            _this.typeToFormat = TypeToFormat.DEFAULT;
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        FieldsWithOrder.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.order = 0;
                this.fieldName = null;
                this.fieldPath = null;
                this.name = null;
                this.customName = null;
                this.colI18nValues = null;
                this.typeToFormat = TypeToFormat.DEFAULT;
                this.formatInfo = null;
                this.version = 0;
            };
        /**
         * @return {?}
         */
        FieldsWithOrder.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "order", this.order);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "name", this.name);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "fieldName", this.fieldName);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "fieldPath", this.fieldPath);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "customName", this.customName);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "colI18nValues", this.colI18nValues);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "typeToFormat", this.typeToFormat);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "formatInfo", this.formatInfo);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "version", this.version);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FieldsWithOrder.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.order = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, "order");
                this.name = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "name");
                this.fieldName = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "fieldName");
                this.fieldPath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "fieldPath");
                this.customName = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "customName");
                this.colI18nValues = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "colI18nValues");
                this.typeToFormat = TypeToFormat[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "typeToFormat")];
                this.formatInfo = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "formatInfo");
                this.version = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, "version");
            };
        return FieldsWithOrder;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/SummaryFieldsInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SummaryFieldsInfo = /** @class */ (function (_super) {
        __extends(SummaryFieldsInfo, _super);
        function SummaryFieldsInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.fields = [];
            _this.childFieldInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        SummaryFieldsInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.code = null;
                this.fields = [];
                this.childFieldInfos = [];
            };
        /**
         * @return {?}
         */
        SummaryFieldsInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "code", this.code);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "fields", this.fields);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "childFieldInfos", this.childFieldInfos);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        SummaryFieldsInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.code = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "code");
                this.fields = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "fields", FieldsWithOrder);
                this.childFieldInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "childFieldInfos", SummaryFieldsInfo);
            };
        return SummaryFieldsInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/FieldNameAndValue.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FieldNameAndValue = /** @class */ (function (_super) {
        __extends(FieldNameAndValue, _super);
        function FieldNameAndValue() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        FieldNameAndValue.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.name = null;
                this.value = null;
            };
        /**
         * @return {?}
         */
        FieldNameAndValue.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "name", this.name);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "value", this.value);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FieldNameAndValue.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.name = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "name");
                this.value = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "value");
            };
        return FieldNameAndValue;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/DateTypeFormatInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DateTypeFormatInfo = /** @class */ (function (_super) {
        __extends(DateTypeFormatInfo, _super);
        function DateTypeFormatInfo() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        DateTypeFormatInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.displayFormat = null;
            };
        /**
         * @return {?}
         */
        DateTypeFormatInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "displayFormat", this.displayFormat);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        DateTypeFormatInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.displayFormat = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "displayFormat");
            };
        return DateTypeFormatInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/ScaleMode.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ScaleMode = {
        DEFAULT: "DEFAULT",
        NUMBER: "NUMBER",
        FIELD: "FIELD",
        EXPRESSION: "EXPRESSION",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/DecimalTypeFormatInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DecimalTypeFormatInfo = /** @class */ (function (_super) {
        __extends(DecimalTypeFormatInfo, _super);
        function DecimalTypeFormatInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.scaleMode = ScaleMode.DEFAULT;
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        DecimalTypeFormatInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.scale = 0;
                this.scaleMode = ScaleMode.DEFAULT;
                this.fieldPath = null;
                this.version = 0;
            };
        /**
         * @return {?}
         */
        DecimalTypeFormatInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "scale", this.scale);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "scale", this.scale);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "scaleMode", this.scaleMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "fieldPath", this.fieldPath);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "version", this.version);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        DecimalTypeFormatInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.scale = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, "scale");
                /** @type {?} */
                var scaleMode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "scaleMode");
                this.scaleMode = scaleMode == null ? ScaleMode.DEFAULT : ScaleMode[scaleMode];
                this.fieldPath = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "fieldPath");
                this.version = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsNumber(obj, "version");
            };
        return DecimalTypeFormatInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/typeToFormat.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var TypeToFormat$1 = {
        DEFAULT: "DEFAULT",
        DATE: "DATE",
        DECIMAL: "DECIMAL",
        STRING: "STRING",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/JointQueryParameterContent.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var JointQueryParameterContent = /** @class */ (function (_super) {
        __extends(JointQueryParameterContent, _super);
        function JointQueryParameterContent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        JointQueryParameterContent.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.parameterCode = null;
            };
        /**
         * @return {?}
         */
        JointQueryParameterContent.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "parameterCode", this.parameterCode);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        JointQueryParameterContent.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.parameterCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "parameterCode");
            };
        return JointQueryParameterContent;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/ExpressionJointQueryParameterContent.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ExpressionJointQueryParameterContent = /** @class */ (function (_super) {
        __extends(ExpressionJointQueryParameterContent, _super);
        function ExpressionJointQueryParameterContent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        ExpressionJointQueryParameterContent.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.expressionContent = null;
            };
        /**
         * @return {?}
         */
        ExpressionJointQueryParameterContent.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "expressionContent", this.expressionContent);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        ExpressionJointQueryParameterContent.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.expressionContent = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "expressionContent");
            };
        return ExpressionJointQueryParameterContent;
    }(JointQueryParameterContent));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/FieldJointQueryParameterContent.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FieldJointQueryParameterContent = /** @class */ (function (_super) {
        __extends(FieldJointQueryParameterContent, _super);
        function FieldJointQueryParameterContent() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        FieldJointQueryParameterContent.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.fieldContent = null;
            };
        /**
         * @return {?}
         */
        FieldJointQueryParameterContent.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "fieldContent", this.fieldContent);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        FieldJointQueryParameterContent.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.fieldContent = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "fieldContent");
            };
        return FieldJointQueryParameterContent;
    }(JointQueryParameterContent));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/JointQueryParameterMode.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var JointQueryParameterMode = {
        FIELD: "FIELD",
        EXPRESSION: "EXPRESSION",
        COMPONENT: "COMPONENT",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/JointQueryParameterResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var JointQueryParameterResult = /** @class */ (function (_super) {
        __extends(JointQueryParameterResult, _super);
        function JointQueryParameterResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        JointQueryParameterResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.code = null;
                this.value = null;
            };
        /**
         * @return {?}
         */
        JointQueryParameterResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "code", this.code);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "value", this.value);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        JointQueryParameterResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.code = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "code");
                this.value = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "value");
            };
        return JointQueryParameterResult;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/JointQueryParametersContent.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var JointQueryParametersContent = /** @class */ (function (_super) {
        __extends(JointQueryParametersContent, _super);
        function JointQueryParametersContent() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.jointQueryParameterMode = JointQueryParameterMode.FIELD;
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        JointQueryParametersContent.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.jointQueryParameterMode = JointQueryParameterMode.FIELD;
                this.content = null;
            };
        /**
         * @return {?}
         */
        JointQueryParametersContent.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "jointQueryParameterMode", this.jointQueryParameterMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "content", this.content);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        JointQueryParametersContent.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.jointQueryParameterMode = JointQueryParameterMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "jointQueryParameterMode")];
                this.content = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "content");
            };
        return JointQueryParametersContent;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/SimpleValueMappingInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SimpleValueMappingInfo = /** @class */ (function (_super) {
        __extends(SimpleValueMappingInfo, _super);
        function SimpleValueMappingInfo() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        SimpleValueMappingInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.displayValue = null;
                this.actualValue = null;
            };
        /**
         * @return {?}
         */
        SimpleValueMappingInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "displayValue", this.displayValue);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "actualValue", this.actualValue);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        SimpleValueMappingInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.displayValue = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "displayValue");
                this.actualValue = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "actualValue");
            };
        return SimpleValueMappingInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/StringDisplayMode.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var StringDisplayMode = {
        SIMPLEVALUEMAPPING: "SIMPLEVALUEMAPPING",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/StringTypeFormatInfo.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StringTypeFormatInfo = /** @class */ (function (_super) {
        __extends(StringTypeFormatInfo, _super);
        function StringTypeFormatInfo() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.stringDisplayMode = StringDisplayMode.SIMPLEVALUEMAPPING;
            _this.simpleValueMappingInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        StringTypeFormatInfo.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.stringDisplayMode = StringDisplayMode.SIMPLEVALUEMAPPING;
                this.simpleValueMappingInfos = [];
            };
        /**
         * @return {?}
         */
        StringTypeFormatInfo.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "stringDisplayMode", this.stringDisplayMode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "simpleValueMappingInfos", this.simpleValueMappingInfos);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        StringTypeFormatInfo.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.stringDisplayMode = StringDisplayMode[commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "stringDisplayMode")];
                this.simpleValueMappingInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "simpleValueMappingInfos", SimpleValueMappingInfo);
            };
        return StringTypeFormatInfo;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/Exceptions.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Exceptions = /** @class */ (function () {
        function Exceptions() {
        }
        Exceptions.SCALE_FIELD_VALUE_IS_NAN = "scale field value is NaN";
        return Exceptions;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/config/bif-form-constants.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var BIF_UISTATE_KEY_OPEN_TYPE = "abdbaec8-0bbe-4894-acee-b8d493bc4e1c";
    /** @type {?} */
    var BIF_UISTATE_KEY_CREATION_RESULT = "5eb32009-1d86-43df-96c8-8d685aea4e66";

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/config/module.config.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ModuleConfig = /** @class */ (function () {
        function ModuleConfig() {
        }
        return ModuleConfig;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/config/selector-args-injector.config.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var SELECTOR_ARGS_INJECTOR = new core$1.InjectionToken("SELECTOR_ARGS_INJECTOR");
    /** @type {?} */
    var DEFAULT_SELECTOR_ARGS = {
        upBillVoId: null,
        downBillVoId: null,
        manaualCreationMode: null
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/config/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/args/PushTaskArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PushTaskArgs = /** @class */ (function (_super) {
        __extends(PushTaskArgs, _super);
        function PushTaskArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        PushTaskArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.suCode = null;
                this.creationRuleExecutorResult = null;
            };
        /**
         * @return {?}
         */
        PushTaskArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "creationRuleExecutorResult", this.creationRuleExecutorResult);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        PushTaskArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.creationRuleExecutorResult = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, "creationRuleExecutorResult", runtimeApi.RpcCreationRuleExecutorResult);
            };
        return PushTaskArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/args/GetEntityDatasArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetEntityDatasArgs = /** @class */ (function (_super) {
        __extends(GetEntityDatasArgs, _super);
        function GetEntityDatasArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        GetEntityDatasArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.voId = null;
                this.dataId = null;
                this.suCode = null;
            };
        /**
         * @return {?}
         */
        GetEntityDatasArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "schemaId", this.voId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GetEntityDatasArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.voId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "schemaId");
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
            };
        return GetEntityDatasArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/args/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/i18n/lang.resource.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var LANG_RESOURCES = {
        "zh-CHS": {
            "confirm": "确定",
            "cancel": "取消",
            "emptyResult": "查询结果为空",
            "upstreamBill": "上游单据",
            "downstreamBill": "下游单据",
            "selectUpstreamBill": "请选择上游单据",
            "selectDownstreamBill": "请选择下游单据",
            "selectCreationProcess": "请选择生单流程",
            "processDesciption": "流程描述",
            "creationProcessSelector": "生单流程",
            "upstreamBillSelector": "上游单据",
            "creationExecutionError": "生单流程执行错误",
            "creationResultEmpty": "生单结果为空",
            "pushTaskCenterSuccess": "推送至任务中心",
            "pushTaskCenterFailed": "推送任务中心失败",
            "entitiesCantBeEmpty": "参数【参与生单的上游单据ID列表或实体列表】不可为空",
            "creationResultCantBeEmpty": "参数【生单结果】不可为空",
            "dataIdCantBeEmpty": "参数【单据Id】不可为空",
            "voIdCantBeEmpty": "参数【VO Id】不可为空",
            "suCodeCantBeEmpty": "参数【SU编号】不可为空",
            "processIdCantBeEmpty": "参数【生单流程Id】不可为空",
            "sourceVoIdCantBeEmpty": "参数【上游单据视图对象Id】不可为空",
            "targetVoIdCantBeEmpty": "参数【下游单据视图对象Id】不可为空",
            "processCode": "流程编号",
            "processName": "流程名称",
            "all": "全部",
            "noDefaultUpBillSelector": "请确认生单流程中【集成场景】启用了【人工拉式生单】场景，并且【单据配置】-【拉式生单配置】-【上游应用入口】或【URL】不为空",
            "pleaseSelectOneCreationProcess": "请选择一条生单流程",
        },
        "en": {
            "confirm": "confirm",
            "cancel": "cancel",
            "emptyResult": "The result is empty",
            "upstreamBill": "Upstream bill",
            "downstreamBill": "Downstream bill",
            "selectUpstreamBill": "Select upstream bill",
            "selectDownstreamBill": "Select downstream bill",
            "selectCreationProcess": "Select creation process",
            "processDesciption": "Desciption",
            "creationProcessSelector": "Creation Process",
            "upstreamBillSelector": "Upstream Bill Selector",
            "creationExecutionError": "Creation Process Execution Error",
            "creationResultEmpty": "Creation result is empty",
            "pushTaskCenterSuccess": "Success to push data to task center",
            "pushTaskCenterFailed": "Failed to push data to task center",
            "entitiesCantBeEmpty": "The parameter \"entities\" can't be empty",
            "dataIdCantBeEmpty": "The parameter \"dataId\" can't be empty",
            "voIdCantBeEmpty": "The parameter \"voId\" can't be empty",
            "suCodeCantBeEmpty": "The parameter \"suCode\" can't be empty",
            "processIdCantBeEmpty": "The parameter \"processId\" can't be empty",
            "sourceVoIdCantBeEmpty": "The parameter \"sourceVoId\" can't be empty",
            "targetVoIdCantBeEmpty": "The parameter \"targetVoId\" can't be empty",
            "processCode": "Process Code",
            "processName": "Process Name",
            "all": "All",
            "noDefaultUpBillSelector": "Please ensure that the creation process configed [Manual Pull] in [integration scene], and configed [Up App Entrance] correctly.",
            "pleaseSelectOneCreationProcess": "Please select on creation process",
        },
        "zh-CHT": {
            "confirm": "確定",
            "cancel": "取消",
            "emptyResult": "查詢結果為空",
            "upstreamBill": "上遊單據",
            "downstreamBill": "下遊單據",
            "selectUpstreamBill": "請選擇上遊單據",
            "selectDownstreamBill": "請選擇下遊單據",
            "selectCreationProcess": "請選擇生單流程",
            "processDesciption": "流程描述",
            "creationProcessSelector": "生單流程",
            "upstreamBillSelector": "上遊單據選擇",
            "creationExecutionError": "生單規則執行錯誤",
            "creationResultEmpty": "生單結果為空",
            "pushTaskCenterSuccess": "推送至任務中心",
            "pushTaskCenterFailed": "推送任務中心失敗",
            "entitiesCantBeEmpty": "參與生單的上遊單據ID列表或實體列表不可爲空",
            "dataIdCantBeEmpty": "參數【單據Id】不可爲空",
            "voIdCantBeEmpty": "參數【VO Id】不可爲空",
            "suCodeCantBeEmpty": "參數【SU編號】不可爲空",
            "processIdCantBeEmpty": "參數【生單流程Id】不可爲空",
            "sourceVoIdCantBeEmpty": "參數【上遊單據視圖對象Id】不可爲空",
            "targetVoIdCantBeEmpty": "參數【下遊單據視圖對象Id】不可爲空",
            "processCode": "流程編號",
            "processName": "流程名稱",
            "all": "全部",
            "noDefaultUpBillSelector": "請確認生單流程中【集成場景】啓用了【人工拉式生單】場景，並且【單據配置】-【拉式生單配置】-【上遊應用入口】或【URL】不爲空",
            "pleaseSelectOneCreationProcess": "請選擇壹條生單流程",
        }
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/pipe/locale.pipe.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LocalePipe = /** @class */ (function () {
        function LocalePipe(localeId) {
            this.langCode = localeId || "zh-CHS";
            this.lang = LANG_RESOURCES[this.langCode];
        }
        /**
         * @param {?} name
         * @return {?}
         */
        LocalePipe.prototype.transform = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return this.lang[name] || name;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        LocalePipe.prototype.instant = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return this.transform(name);
            };
        LocalePipe.decorators = [
            { type: core$1.Pipe, args: [{ name: 'locale' },] }
        ];
        /** @nocollapse */
        LocalePipe.ctorParameters = function () {
            return [
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] }
            ];
        };
        return LocalePipe;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/service/bif-data.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BifDataService = /** @class */ (function () {
        function BifDataService(httpClient, repository, injector, cfr, loader, modal, messager, frameContext, localeId, runtimeFrameworkService, localePipe, httpService) {
            this.httpClient = httpClient;
            this.injector = injector;
            this.cfr = cfr;
            this.loader = loader;
            this.modal = modal;
            this.messager = messager;
            this.frameContext = frameContext;
            this.localeId = localeId;
            this.runtimeFrameworkService = runtimeFrameworkService;
            this.localePipe = localePipe;
            this.httpService = httpService;
            this.getBillCreationProcessEntityExByIdUrl = "/api/runtime/aif/v1.0/manualcreationbill/getbillcreationprocessentityex";
            this.getBillCreationProcessEntityExByIdMethod = "GET";
            this.getBillCreationProcessEntityExUrl = "/api/runtime/aif/v1.0/manualcreationbill/getbillcreationprocessentityexes";
            this.getBillCreationProcessEntityExMethod = "POST";
            this.executeBillCreationProcessUrl = "/api/runtime/aif/v1.0/manualcreationbill/executebillcreationprocess";
            this.executeBillCreationProcessMethod = "POST";
            this.formCreateUrl = "/api/runtime/aif/v1.0/form/create";
            this.formCreateMethod = "POST";
            this.formUpdateUrl = "/api/runtime/aif/v1.0/form/update";
            this.formUpdateMethod = "POST";
            this.generalTextUrl = "/api/runtime/aif/v1.0/generaltext";
            this.generalTextMethod = "GET";
            this.generalTextCreationMethod = "POST";
            this.pushTaskUrl = "/api/runtime/aif/v1.0/manualcreationbill/pushtask";
            this.pushTaskMethod = "POST";
            this.getEntityDatasUrl = "/api/runtime/aif/v1.0/manualcreationbill/getentitydatas";
            this.getEntityDatasMethod = "POST";
            this.repository = ( /** @type {?} */(repository));
            this.injector = this.injector != null ? this.injector : this.repository.appContext.injector;
            this.cfr = this.cfr != null ? this.cfr : this.injector.get(core$1.ComponentFactoryResolver, null);
            this.loader = this.loader != null ? this.loader : this.injector.get(core$1.NgModuleFactoryLoader, null);
            this.modal = this.modal != null ? this.modal : this.injector.get(uiModal.BsModalService, null);
            this.messager = this.messager != null ? this.messager : this.injector.get(uiMessager.MessagerService, null);
            this.frameContext = this.frameContext != null ? this.frameContext : this.injector.get(devkit.FrameContext, null);
            this.localeId = this.localeId != null ? this.localeId : this.injector.get(core$1.LOCALE_ID, localStorage.getItem('languageCode') || 'zh-CHS');
            this.runtimeFrameworkService = this.runtimeFrameworkService != null ? this.runtimeFrameworkService : this.injector.get(commandServices.RuntimeFrameworkService, null);
            this.localePipe = this.localePipe != null ? this.localePipe : this.injector.get(LocalePipe, new LocalePipe(this.localeId));
            this.httpService = this.httpService != null ? this.httpService : this.injector.get(cafCommon.HttpService, null);
        }
        /**
         * 根据上游 VO Id获取单据流生单流程实体列表。
         *
         * @param upBillVoId 上游 VO Id。
         * @return 符合条件的单据流生单流程实体列表。
         */
        /**
         * 根据上游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExesByUpBillVoId4Push = /**
         * 根据上游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
            function (upBillVoId) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.manualCreationMode = ManualCreationMode.Push;
                return this.getSlimBillCreationProcessEntityExes(args).pipe(operators.map(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    return res.billCreationProcessEntityExes;
                })));
            };
        /**
         * 根据下游 VO Id获取单据流生单流程实体列表。
         *
         * @param downBillVoId 下游 VO Id。
         * @return 符合条件的单据流生单流程实体列表。
         */
        /**
         * 根据下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExesByDownBillVoId4Pull = /**
         * 根据下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
            function (downBillVoId) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.downBillVoId = downBillVoId;
                args.manualCreationMode = ManualCreationMode.Pull;
                return this.getSlimBillCreationProcessEntityExes(args).pipe(operators.map(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    return res.billCreationProcessEntityExes;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param upBillVoId 上游 VO Id。
         * @param downBillVoId 下游 VO Id。
         * @return 符合条件的单据流生单流程实体列表。
         */
        /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExesByUpBillVoIdAndDownBillVoId4SpecificPush = /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
            function (upBillVoId, downBillVoId) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.downBillVoId = downBillVoId;
                args.manualCreationMode = ManualCreationMode.SpecificPush;
                return this.getSlimBillCreationProcessEntityExes(args).pipe(operators.map(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    return res.billCreationProcessEntityExes;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param upBillVoId 上游 VO Id。
         * @param downBillVoId 下游 VO Id。
         * @return 符合条件的单据流生单流程实体列表。
         */
        /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExesByUpBillVoIdAndDownBillVoId4SpecificPull = /**
         * 根据上游 VO Id和下游 VO Id获取单据流生单流程实体列表。
         *
         * @param {?} upBillVoId 上游 VO Id。
         * @param {?} downBillVoId 下游 VO Id。
         * @return {?} 符合条件的单据流生单流程实体列表。
         */
            function (upBillVoId, downBillVoId) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.downBillVoId = downBillVoId;
                args.manualCreationMode = ManualCreationMode.SpecificPull;
                return this.getSlimBillCreationProcessEntityExes(args).pipe(operators.map(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    return res.billCreationProcessEntityExes;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 获取单据流生单流程实体
         */
        /**
         * 获取单据流生单流程实体
         * @param {?} processId
         * @return {?}
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExById = /**
         * 获取单据流生单流程实体
         * @param {?} processId
         * @return {?}
         */
            function (processId) {
                /** @type {?} */
                var getCreationRuleById$ = null;
                if (this.httpService != null) {
                    getCreationRuleById$ = ( /** @type {?} */(this.httpService.request(this.getBillCreationProcessEntityExByIdMethod, this.getBillCreationProcessEntityExByIdUrl + "/" + processId, {})));
                }
                else {
                    getCreationRuleById$ = this.repository.proxy.request(this.getBillCreationProcessEntityExByIdUrl + "/" + processId, this.getBillCreationProcessEntityExByIdMethod, null);
                }
                return getCreationRuleById$;
            };
        /**
         * 获取表单配置实体
         * @param formSettingsId
         */
        /**
         * 获取表单配置实体
         * @param {?} formSettingsId
         * @return {?}
         */
        BifDataService.prototype.getFormSettingsById = /**
         * 获取表单配置实体
         * @param {?} formSettingsId
         * @return {?}
         */
            function (formSettingsId) {
                if (formSettingsId == null || formSettingsId.trim() == "") {
                    throw "FormSettingsId为空";
                }
                /** @type {?} */
                var formSettings$ = null;
                if (this.httpService != null) {
                    formSettings$ = ( /** @type {?} */(this.httpService.request(this.generalTextMethod, this.generalTextUrl + "/" + formSettingsId, { responseType: "text" })));
                }
                else {
                    formSettings$ = this.repository.proxy.request(this.generalTextUrl + "/" + formSettingsId, this.generalTextMethod, null, { responseType: "text" });
                }
                return formSettings$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var generateText = new commonApi.GeneralTextEntity();
                    generateText.LoadFromJson(data);
                    /** @type {?} */
                    var formSettings = new commonApi.FormSettings();
                    formSettings.LoadFromJson(generateText.text);
                    return formSettings;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 获取生单结果实体
         * @param creationResultId
         */
        /**
         * 获取生单结果实体
         * @param {?} creationResultId
         * @return {?}
         */
        BifDataService.prototype.getCreationResultById = /**
         * 获取生单结果实体
         * @param {?} creationResultId
         * @return {?}
         */
            function (creationResultId) {
                if (creationResultId == null || creationResultId.trim() == "") {
                    throw "creationResultId为空";
                }
                /** @type {?} */
                var creationResult$ = null;
                if (this.httpService != null) {
                    creationResult$ = ( /** @type {?} */(this.httpService.request(this.generalTextMethod, this.generalTextUrl + "/" + creationResultId, { responseType: "text" })));
                }
                else {
                    creationResult$ = this.repository.proxy.request(this.generalTextUrl + "/" + creationResultId, this.generalTextMethod, null, { responseType: "text" });
                }
                return creationResult$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var generateText = new commonApi.GeneralTextEntity();
                    generateText.LoadFromJson(data);
                    /** @type {?} */
                    var creationResult = new runtimeApi.FormBillCreationProcessExecutorResult();
                    creationResult.LoadFromJson(generateText.text);
                    return creationResult;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 生单结果存入中间表
         */
        /**
         * 生单结果存入中间表
         * @param {?} creationResult
         * @return {?}
         */
        BifDataService.prototype.addFormBillCreationProcessExecutorResult = /**
         * 生单结果存入中间表
         * @param {?} creationResult
         * @return {?}
         */
            function (creationResult) {
                if (creationResult == null) {
                    throw "参数creationResult不可为空";
                }
                if (typeof creationResult == "string") {
                    if (creationResult == "") {
                        throw "参数creationResult不可为空";
                    }
                    /** @type {?} */
                    var temp = new runtimeApi.FormBillCreationProcessExecutorResult();
                    temp.LoadFromJson(creationResult);
                    creationResult = temp;
                }
                if ((creationResult instanceof runtimeApi.FormBillCreationProcessExecutorResult) == false) {
                    /** @type {?} */
                    var res = new runtimeApi.FormBillCreationProcessExecutorResult();
                    res.LoadFromJsonObject(creationResult);
                    creationResult = res;
                }
                if (creationResult.conditionResult.conditionExecutionResult == false) {
                    this.messager.error(creationResult.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    return;
                }
                if (creationResult.creationRuleExecutorResult == null || creationResult.creationRuleExecutorResult.mappingResults == null || creationResult.creationRuleExecutorResult.mappingResults.length == 0) {
                    this.messager.error(this.localePipe.transform("creationResultEmpty"));
                    return;
                }
                /** @type {?} */
                var body = creationResult.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: "text"
                };
                /** @type {?} */
                var creationResult$ = null;
                if (this.httpService != null) {
                    creationResult$ = ( /** @type {?} */(this.httpService.request(this.generalTextCreationMethod, "" + this.generalTextUrl, options)));
                }
                else {
                    creationResult$ = this.repository.proxy.request("" + this.generalTextUrl, this.generalTextCreationMethod, null, options);
                }
                return creationResult$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var texts = ( /** @type {?} */(commonApi.BpmnModelJsonHelper.FromJson(data, GeneralTextIdWithDataId)));
                    return texts;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 执行单据流生单流程
         */
        /**
         * 执行单据流生单流程
         * @param {?} args
         * @return {?}
         */
        BifDataService.prototype.executeBillCreationProcess = /**
         * 执行单据流生单流程
         * @param {?} args
         * @return {?}
         */
            function (args) {
                if (args.manualCreationMode == null) {
                    throw "manualCreationMode不可为空";
                }
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: "text"
                };
                /** @type {?} */
                var executeCreationRule$ = null;
                if (this.httpService != null) {
                    executeCreationRule$ = this.httpService.request(this.executeBillCreationProcessMethod, this.executeBillCreationProcessUrl, options);
                }
                else {
                    executeCreationRule$ = this.repository.proxy.request(this.executeBillCreationProcessUrl, this.executeBillCreationProcessMethod, null, options);
                }
                return executeCreationRule$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var res = new runtimeApi.FormBillCreationProcessExecutorResult();
                    res.LoadFromJson(data);
                    return res;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 创建单据
         */
        /**
         * 创建单据
         * @param {?} args
         * @return {?}
         */
        BifDataService.prototype.createEntityDatas = /**
         * 创建单据
         * @param {?} args
         * @return {?}
         */
            function (args) {
                var _this = this;
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: 'text'
                };
                /** @type {?} */
                var create$ = this.repository.proxy.request(this.formCreateUrl, this.formCreateMethod, null, options);
                return create$.pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var result = new runtimeApi.FormCreateResult();
                    result.LoadFromJson(res);
                    /** @type {?} */
                    var entities = result.entityDataList.map(( /**
                     * @param {?} entityStr
                     * @return {?}
                     */function (entityStr) {
                        /** @type {?} */
                        var newEntity = _this.repository.buildEntity(JSON.parse(entityStr));
                        _this.appendInitialData(newEntity, newEntity);
                        return newEntity;
                    }));
                    /** @type {?} */
                    var origin = _this.repository.entityCollection.getAllEntities();
                    if (origin == null || origin.length == 0) {
                        _this.repository.entityCollection.loadEntities(entities);
                    }
                    else {
                        _this.repository.entityCollection.addEntities(entities);
                    }
                    return rxjs.of(result);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 修改单据
         * @param args 表单更新参数
         */
        /**
         * 修改单据
         * @param {?} args 表单更新参数
         * @return {?}
         */
        BifDataService.prototype.updateEntityDatas = /**
         * 修改单据
         * @param {?} args 表单更新参数
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: "text"
                };
                /** @type {?} */
                var update$ = this.repository.proxy.request(this.formUpdateUrl, this.formUpdateMethod, null, options);
                return update$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var res = new runtimeApi.FormUpdateResult();
                    res.LoadFromJson(data);
                    return res;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 将生单结果推送至任务中心
         * @param args 推送任务中心参数
         * @returns
         */
        /**
         * 将生单结果推送至任务中心
         * @param {?} args 推送任务中心参数
         * @return {?}
         */
        BifDataService.prototype.pushTaskCenter = /**
         * 将生单结果推送至任务中心
         * @param {?} args 推送任务中心参数
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: "text"
                };
                /** @type {?} */
                var update$ = null;
                if (this.httpService != null) {
                    update$ = this.httpService.request(this.pushTaskMethod, this.pushTaskUrl, options);
                }
                else {
                    update$ = this.repository.proxy.request(this.pushTaskUrl, this.pushTaskMethod, null, options);
                }
                return update$.pipe(operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 获取VO序列化数据
         * @param args
         * @returns
         */
        /**
         * 获取VO序列化数据
         * @param {?} args
         * @return {?}
         */
        BifDataService.prototype.getEntityDatas = /**
         * 获取VO序列化数据
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var options = {
                    body: body,
                    responseType: "text"
                };
                /** @type {?} */
                var datas$ = null;
                if (this.httpService != null) {
                    datas$ = this.httpService.request(this.getEntityDatasMethod, this.getEntityDatasUrl, options);
                }
                else {
                    datas$ = this.repository.proxy.request(this.getEntityDatasUrl, this.getEntityDatasMethod, null, options);
                }
                return datas$.pipe(operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 查询单据生单流程扩展实体
         * @param args 查询参数
         */
        /**
         * 查询单据生单流程扩展实体
         * @private
         * @param {?} args 查询参数
         * @return {?}
         */
        BifDataService.prototype.getSlimBillCreationProcessEntityExes = /**
         * 查询单据生单流程扩展实体
         * @private
         * @param {?} args 查询参数
         * @return {?}
         */
            function (args) {
                if (args == null) {
                    throw "args不可为空";
                }
                if (typeof args == "string") {
                    if (args == "") {
                        throw "args不可为空";
                    }
                    /** @type {?} */
                    var temp = new FormGetBillCreationProcessEntityExArgs();
                    temp.LoadFromJson(args);
                    args = temp;
                }
                /** @type {?} */
                var options = { body: args.ConvertToJson(), responseType: "text" };
                /** @type {?} */
                var getEntity$ = null;
                if (this.httpService != null) {
                    getEntity$ = this.httpService.request(this.getBillCreationProcessEntityExMethod, this.getBillCreationProcessEntityExUrl, options);
                }
                else {
                    getEntity$ = this.repository.proxy.request(this.getBillCreationProcessEntityExUrl, this.getBillCreationProcessEntityExMethod, null, options);
                }
                return getEntity$.pipe(operators.map(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var result = new FormGetBillCreationProcessEntityExResult();
                    result.LoadFromJson(data);
                    return result;
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * 参考farris/bef EntityUtil实现
         * @param entity
         * @param initialData
         */
        /**
         * 参考farris/bef EntityUtil实现
         * @private
         * @param {?} entity
         * @param {?} initialData
         * @return {?}
         */
        BifDataService.prototype.appendInitialData = /**
         * 参考farris/bef EntityUtil实现
         * @private
         * @param {?} entity
         * @param {?} initialData
         * @return {?}
         */
            function (entity, initialData) {
                /** @type {?} */
                var data = Object.assign({}, initialData);
                delete data.id;
                delete data.parentID;
                entity['initialData'] = data;
            };
        BifDataService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifDataService.ctorParameters = function () {
            return [
                { type: http.HttpClient },
                { type: devkit.Repository },
                { type: core$1.Injector, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ComponentFactoryResolver, decorators: [{ type: core$1.Optional }] },
                { type: core$1.NgModuleFactoryLoader, decorators: [{ type: core$1.Optional }] },
                { type: uiModal.BsModalService, decorators: [{ type: core$1.Optional }] },
                { type: uiMessager.MessagerService, decorators: [{ type: core$1.Optional }] },
                { type: devkit.FrameContext, decorators: [{ type: core$1.Optional }] },
                { type: String, decorators: [{ type: core$1.Optional }, { type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: commandServices.RuntimeFrameworkService, decorators: [{ type: core$1.Optional }] },
                { type: LocalePipe, decorators: [{ type: core$1.Optional }] },
                { type: cafCommon.HttpService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifDataService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/service/bif-data-selector.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AbstractBifDataSelectorService = /** @class */ (function () {
        function AbstractBifDataSelectorService() {
            /**
             * 实体数据Subject
             */
            this.subject4EntityDatas = new rxjs.Subject();
        }
        AbstractBifDataSelectorService.decorators = [
            { type: core$1.Injectable }
        ];
        return AbstractBifDataSelectorService;
    }());
    var DefaultBifDataSelectorService = /** @class */ (function (_super) {
        __extends(DefaultBifDataSelectorService, _super);
        function DefaultBifDataSelectorService(frameContext, viewModel, cfr, injector) {
            var _this = _super.call(this) || this;
            _this.frameContext = frameContext;
            _this.viewModel = viewModel;
            _this.cfr = cfr;
            _this.injector = injector;
            /**
             * 实体数据Subject
             */
            _this.subject4EntityDatas = new rxjs.Subject();
            /**
             * 点击弹窗“确定”按钮操作
             */
            _this.clickOk4BifSelector = ( /**
             * @return {?}
             */function () {
                //发送选中的来源单据实体列表并关闭模态框
                _this.viewModel.frameContext.repository.getById(_this.viewModel.bindingData.getObject().id).subscribe(( /**
                 * @param {?} e
                 * @return {?}
                 */function (e) {
                    _this.subject4EntityDatas.next([e]);
                    _this.subject4EntityDatas.complete();
                    _this.bsModalRef4BifSelector.close();
                }));
            });
            /**
             * 点击弹窗“取消”按钮操作
             */
            _this.clickClose4BifSelector = ( /**
             * @return {?}
             */function () {
                _this.subject4EntityDatas.complete();
                _this.bsModalRef4BifSelector.close();
            });
            return _this;
        }
        DefaultBifDataSelectorService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        DefaultBifDataSelectorService.ctorParameters = function () {
            return [
                { type: devkit.FrameContext },
                { type: devkit.ViewModel },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.Injector }
            ];
        };
        return DefaultBifDataSelectorService;
    }(AbstractBifDataSelectorService));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/service/abstract-ui-service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var AbstractUiService = /** @class */ (function () {
        function AbstractUiService(frameContext, modalService, messager, injector, cfr, loader, localeId, runtimeFrameworkService) {
            this.frameContext = frameContext;
            this.modalService = modalService;
            this.messager = messager;
            this.injector = injector;
            this.cfr = cfr;
            this.loader = loader;
            this.localeId = localeId;
            /**
             * 内置模态框配置
             */
            this.defaultModalOptions = {
                title: null,
                width: 900,
                height: 500,
                buttons: null,
                showButtons: null,
            };
            this.runtimeFrameworkService = runtimeFrameworkService || injector.get(commandServices.RuntimeFrameworkService);
            this.localePipe = new LocalePipe(localeId);
        }
        /**
         * @protected
         * @param {?} args
         * @param {?} type
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
        AbstractUiService.prototype.openBillCreationProcessSelector = /**
         * @protected
         * @param {?} args
         * @param {?} type
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
            function (args, type, modalOptions, customSelectorModuleUrl, extParams) {
                var _this = this;
                if (typeof modalOptions == "string") {
                    if (modalOptions == "") {
                        throw "modalOptions不可为空";
                    }
                    modalOptions = JSON.parse(modalOptions);
                }
                modalOptions = modalOptions == null ? this.defaultModalOptions : modalOptions;
                modalOptions.title = modalOptions.title == null ? this.localePipe.transform("creationProcessSelector") : modalOptions.title;
                /** @type {?} */
                var cmpR = null;
                if (customSelectorModuleUrl == null || customSelectorModuleUrl.trim() == "") {
                    /** @type {?} */
                    var cmpF = this.cfr.resolveComponentFactory(type);
                    /** @type {?} */
                    var inj = core$1.ReflectiveInjector.resolveAndCreate([
                        { provide: SELECTOR_ARGS_INJECTOR, useValue: args.ConvertToJsonObject() },
                        uiLoading.LoadingService,
                    ], this.injector);
                    cmpR = cmpF.create(inj);
                    this.configModalButtons(modalOptions, cmpR);
                    cmpR.instance.bsModalRef4BifSelector = this.modalService.show(cmpR, modalOptions);
                    return cmpR.instance.subject4CreationProcess.asObservable();
                }
                else {
                    return rxjs.from(this.loader.load(customSelectorModuleUrl)).pipe(operators.switchMap(( /**
                     * @param {?} moduleFactory
                     * @return {?}
                     */function (moduleFactory) {
                        /** @type {?} */
                        var moduleRef = moduleFactory.create(_this.frameContext.root.injector);
                        /** @type {?} */
                        var cmpR$ = moduleRef.instance.createCreationProcessSelector(_this.frameContext.root.injector, extParams);
                        if (cmpR$ instanceof rxjs.Observable) {
                            return cmpR$.pipe(operators.switchMap(( /**
                             * @param {?} componentRef
                             * @return {?}
                             */function (componentRef) {
                                cmpR = componentRef;
                                _this.configModalButtons(modalOptions, cmpR);
                                cmpR.instance.bsModalRef4BifSelector = _this.modalService.show(cmpR, modalOptions);
                                return cmpR.instance.subject4CreationProcess.asObservable();
                            })));
                        }
                        else if (cmpR$ instanceof core$1.ComponentRef) {
                            cmpR = cmpR$;
                            _this.configModalButtons(modalOptions, cmpR);
                            cmpR.instance.bsModalRef4BifSelector = _this.modalService.show(cmpR, modalOptions);
                            return cmpR.instance.subject4CreationProcess.asObservable();
                        }
                    })));
                }
            };
        /**
         * 配置模态框按钮事件
         * @param modalOptions
         * @param cmpR
         */
        /**
         * 配置模态框按钮事件
         * @protected
         * @param {?} modalOptions
         * @param {?} cmpR
         * @return {?}
         */
        AbstractUiService.prototype.configModalButtons = /**
         * 配置模态框按钮事件
         * @protected
         * @param {?} modalOptions
         * @param {?} cmpR
         * @return {?}
         */
            function (modalOptions, cmpR) {
                modalOptions.buttons = [
                    {
                        text: this.localePipe.transform("confirm"),
                        cls: "btn btn-primary",
                        handle: cmpR.instance.clickOk4BifSelector,
                    },
                    {
                        text: this.localePipe.transform("cancel"),
                        cls: "btn btn-secondary",
                        handle: cmpR.instance.clickClose4BifSelector,
                    }
                ];
                modalOptions.showButtons = true;
            };
        /** @nocollapse */
        AbstractUiService.ctorParameters = function () {
            return [
                { type: devkit.FrameContext },
                { type: uiModal.BsModalService },
                { type: uiMessager.MessagerService },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.NgModuleFactoryLoader },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: commandServices.RuntimeFrameworkService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return AbstractUiService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/components/push-selector/push-selector.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PushSelectorComponent = /** @class */ (function () {
        function PushSelectorComponent(args, dataService, localeId, loading, elementRef, inj, cfr, messagerService) {
            var _this = this;
            this.dataService = dataService;
            this.loading = loading;
            this.elementRef = elementRef;
            this.inj = inj;
            this.cfr = cfr;
            this.messagerService = messagerService;
            this.ttData = [];
            this.ttIdField = 'voId';
            this.ttSearchFields = [];
            this.dgData = [];
            this.dgIdField = 'id';
            this.procData = [];
            this.bsModalRef4BifSelector = null;
            this.subject4CreationProcess = new rxjs.Subject();
            this.clickOk4BifSelector = ( /**
             * @return {?}
             */function () {
                if (_this.selectedEntity == null) {
                    _this.messagerService.error(_this.localePipe.instant("pleaseSelectOneCreationProcess"));
                    return;
                }
                _this.subject4CreationProcess.next(_this.selectedEntity);
                _this.subject4CreationProcess.complete();
                _this.bsModalRef4BifSelector.close();
            });
            this.clickClose4BifSelector = ( /**
             * @return {?}
             */function () {
                _this.bsModalRef4BifSelector.close();
            });
            this.args = new FormGetBillCreationProcessEntityExArgs();
            this.args.LoadFromJsonObject(args);
            this.localePipe = new LocalePipe(localeId);
            if (inj == null) {
                /** @type {?} */
                var refInj = core$1.ReflectiveInjector.resolveAndCreate([
                    uiMessager.MessagerService,
                ]);
                this.inj = refInj;
            }
            this.cfr = cfr || this.inj.get(core$1.ComponentFactoryResolver);
            this.messagerService = messagerService || this.inj.get(uiMessager.MessagerService, null);
        }
        /**
         * @return {?}
         */
        PushSelectorComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.ttDataRoot = {
                    id: "*",
                    data: {
                        voId: "*",
                        voName: this.localePipe.instant("all"),
                    },
                    parent: null,
                    expanded: true,
                    children: [],
                };
                this.ttData = [this.ttDataRoot];
                this.configTtColumns();
                this.configDgColumns();
                this.configTtEvents();
                this.configDgEvents();
                this.loadItems();
            };
        /**
         * @private
         * @return {?}
         */
        PushSelectorComponent.prototype.loadItems = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                this.loading.show({ container: this.elementRef });
                /** @type {?} */
                var list$ = null;
                if (this.args.downBillVoId == null) {
                    list$ = this.dataService.getSlimBillCreationProcessEntityExesByUpBillVoId4Push(this.args.upBillVoId);
                }
                else {
                    list$ = this.dataService.getSlimBillCreationProcessEntityExesByUpBillVoIdAndDownBillVoId4SpecificPush(this.args.upBillVoId, this.args.downBillVoId);
                }
                list$.subscribe(( /**
                 * @param {?} result
                 * @return {?}
                 */function (result) {
                    _this.loading.close();
                    _this.procData = result || [];
                    _this.dgData = __spread(_this.procData);
                    // 组织VO树
                    /** @type {?} */
                    var voList = [];
                    _this.procData.forEach(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        if (voList.some(( /**
                         * @param {?} vo
                         * @return {?}
                         */function (vo) { return vo.voId == it.downBillVoId; })) == false) {
                            voList.push({
                                voId: it.downBillVoId,
                                voName: it.downBillVoName,
                            });
                        }
                    }));
                    _this.ttDataRoot.children = voList.map(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        return {
                            id: it.voId,
                            data: {
                                voId: it.voId,
                                voName: it.voName,
                            },
                            expanded: true,
                        };
                    }));
                    _this.ttData = [_this.ttDataRoot];
                    // 默认选中第一条
                    if (_this.dgData && _this.dgData.length > 0) {
                        _this.selectedEntity = _this.dgData[0];
                        setTimeout(( /**
                         * @return {?}
                         */function () {
                            _this.dg.clearSelections();
                            _this.dg.selectRow(_this.dgData[0].id);
                        }), 0);
                    }
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.loading.close();
                    throw err;
                }));
            };
        /**
         * @return {?}
         */
        PushSelectorComponent.prototype.configTtColumns = /**
         * @return {?}
         */
            function () {
                this.ttCols = [
                    {
                        field: 'voName', title: this.localePipe.instant('downstreamBill'), width: 120,
                    },
                ];
            };
        /**
         * @return {?}
         */
        PushSelectorComponent.prototype.configDgColumns = /**
         * @return {?}
         */
            function () {
                this.dgCols = [
                    { field: "code", title: this.localePipe.transform("processCode"), width: 120, sortable: true },
                    {
                        field: "name", title: this.localePipe.transform("processName"), width: 250, sortable: true,
                    },
                ];
            };
        /**
         * @return {?}
         */
        PushSelectorComponent.prototype.configTtEvents = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.tt.nodeSelected.subscribe(( /**
                 * @param {?} ctx
                 * @return {?}
                 */function (ctx) {
                    //ctx:{inidex;instance;node:{data}}
                    if (ctx.node.id == "*") {
                        _this.dgData = __spread(_this.procData);
                    }
                    else {
                        _this.dgData = __spread(_this.procData.filter(( /**
                         * @param {?} it
                         * @return {?}
                         */function (it) { return it.downBillVoId == ctx.node.data.voId; })));
                    }
                    if (_this.dgData && _this.dgData.length > 0) {
                        _this.selectedEntity = _this.dgData[0];
                        setTimeout(( /**
                         * @return {?}
                         */function () {
                            _this.dg.clearSelections();
                            _this.dg.selectRow(_this.dgData[0].id);
                        }), 0);
                    }
                }));
            };
        /**
         * @return {?}
         */
        PushSelectorComponent.prototype.configDgEvents = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.dg.selectChanged.subscribe(( /**
                 * @param {?} row
                 * @return {?}
                 */function (row) {
                    _this.selectedEntity = row.data;
                }));
            };
        PushSelectorComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: 'lib-bif-push-selector',
                        template: "<div class=\"g-main\" style=\"padding-left: 24px; padding-right: 24px;\">\r\n  <div class=\"d-flex flex-row\"\r\n    style=\"height: 100%; width: 100%; border: 1px solid #E9ECF3; box-shadow: 0 2px 6px 0 rgb(31 35 41 / 6%); border-radius: 6px;\">\r\n    <div class=\"d-flex flex-column\" style=\"width: 200px;\" ngResizable rzAspectRatio=\"true\" [rzHandles]=\"'e'\">\r\n      <farris-treetable #tt class=\"f-utils-fill-flex-column\" [data]=\"ttData\" [columns]=\"ttCols\" [idField]=\"ttIdField\"\r\n        [fit]=\"true\" [showHeader]=\"true\" [fixedHeader]=\"true\" [singleSelect]=\"true\">\r\n      </farris-treetable>\r\n    </div>\r\n\r\n    <div class=\"f-utils-fill-flex-row\" style=\"padding-left: 15px;\">\r\n      <div class=\"d-flex flex-column\" style=\"width: 100%;\">\r\n        <div class=\"f-utils-fill-flex-column\">\r\n          <farris-datagrid #dg [fit]=\"true\" [fitColumns]=\"true\" [data]=\"dgData\" [columns]=\"dgCols\" [idField]=\"dgIdField\"\r\n            [showHeader]=\"true\" [showBorder]=\"true\" [striped]=\"true\" [pagination]=\"false\" [showLineNumber]=\"true\">\r\n          </farris-datagrid>\r\n        </div>\r\n        <div class=\"form-group\" style=\"\">\r\n          <div>{{ 'processDesciption' | locale }}</div>\r\n          <textarea readonly class=\"form-control\" name=\"description\" rows=\"3\"\r\n            [ngModel]=\"selectedEntity&&selectedEntity.description\"></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        PushSelectorComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core$1.Inject, args: [SELECTOR_ARGS_INJECTOR,] }] },
                { type: BifDataService },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: uiLoading.LoadingService },
                { type: core$1.ElementRef },
                { type: core$1.Injector, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ComponentFactoryResolver, decorators: [{ type: core$1.Optional }] },
                { type: uiMessager.MessagerService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        PushSelectorComponent.propDecorators = {
            tt: [{ type: core$1.ViewChild, args: ['tt',] }],
            dg: [{ type: core$1.ViewChild, args: ['dg',] }]
        };
        return PushSelectorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/utils/BrowserUtil.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @return {?}
     */
    function judgeBrowserType() {
        /** @type {?} */
        var browser = {
            type: "Unknown",
            IEVersion: undefined,
        };
        /** @type {?} */
        var userAgent = navigator.userAgent;
        //取得浏览器的userAgent字符串 
        /** @type {?} */
        var isOpera = userAgent.indexOf("Opera") > -1;
        //判断是否Opera浏览器 
        /** @type {?} */
        var isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera;
        isIE = isIE || (!!window['ActiveXObject'] || "ActiveXObject" in window); //新版IE11判断是否为IE浏览器
        //新版IE11判断是否为IE浏览器
        /** @type {?} */
        var isEdge = userAgent.indexOf("Windows NT 6.1; Trident/7.0;") > -1 && !isIE;
        //判断是否IE的Edge浏览器 
        /** @type {?} */
        var isFF = userAgent.indexOf("Firefox") > -1;
        //判断是否Firefox浏览器 
        /** @type {?} */
        var isSafari = userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") == -1;
        //判断是否Safari浏览器 
        /** @type {?} */
        var isChrome = userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Safari") > -1;
        if (isIE) {
            browser.type = "IE";
            if (navigator.userAgent != null && !!navigator.userAgent.match(/Trident\/7\./)) {
                browser.IEVersion = "IE11";
            }
            else {
                /** @type {?} */
                var reIE = new RegExp("MSIE (\\d+\\.\\d+);");
                reIE.test(userAgent);
                /** @type {?} */
                var fIEVersion = parseFloat(RegExp["$1"]);
                if (fIEVersion == 7) {
                    browser.IEVersion = "IE7";
                }
                else if (fIEVersion == 8) {
                    browser.IEVersion = "IE8";
                }
                else if (fIEVersion == 9) {
                    browser.IEVersion = "IE9";
                }
                else if (fIEVersion == 10) {
                    browser.IEVersion = "IE10";
                }
                else if (fIEVersion == 11) {
                    browser.IEVersion = "IE11";
                }
                else {
                    //IE版本过低 
                    browser.IEVersion = "Unknown";
                }
            }
        } //isIE end 
        if (isFF) {
            browser.type = "FF";
        }
        if (isOpera) {
            browser.type = "Opera";
        }
        if (isSafari) {
            browser.type = "Safari";
        }
        if (isChrome) {
            browser.type = "Chrome";
        }
        if (isEdge) {
            browser.type = "Edge";
        }
        return browser;
    }

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/service/bif-source-ui.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BifSourceUiService = /** @class */ (function (_super) {
        __extends(BifSourceUiService, _super);
        function BifSourceUiService(navigationService, frameContext, modalService, messager, injector, cfr, loader, localeId, runtimeFrameworkService) {
            var _this = _super.call(this, frameContext, modalService, messager, injector, cfr, loader, localeId, runtimeFrameworkService) || this;
            _this.navigationService = navigationService;
            _this.frameContext = frameContext;
            _this.modalService = modalService;
            _this.messager = messager;
            _this.injector = injector;
            _this.cfr = cfr;
            _this.loader = loader;
            _this.localeId = localeId;
            _this.uiStateKeyCreationResult = BIF_UISTATE_KEY_CREATION_RESULT;
            return _this;
        }
        /**
         * 下推时打开生单规则选择器
         */
        /**
         * 下推时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.openBillCreationProcessSelector4Push = /**
         * 下推时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
            function (upBillVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.manualCreationMode = ManualCreationMode.Push;
                return this.openBillCreationProcessSelector(args, PushSelectorComponent, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 特定下推时打开生单规则选择器
         */
        /**
         * 特定下推时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?} downBillVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.openBillCreationProcessSelector4SpecificPush = /**
         * 特定下推时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?} downBillVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
            function (upBillVoId, downBillVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.downBillVoId = downBillVoId;
                args.manualCreationMode = ManualCreationMode.SpecificPush;
                // args.bizFlowchartId = bizFlowchartId;
                return this.openBillCreationProcessSelector(args, PushSelectorComponent, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * @Deprecated 已弃用，请使用{@link openTargetApp}
         * 打开下游单据制单界面
         * @param formSettings
         * @param creationResult
         * @param extParams
         */
        /**
         * \@Deprecated 已弃用，请使用{\@link openTargetApp}
         * 打开下游单据制单界面
         * @param {?} formSettings
         * @param {?} creationResult
         * @param {?=} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.openTargetForm = /**
         * \@Deprecated 已弃用，请使用{\@link openTargetApp}
         * 打开下游单据制单界面
         * @param {?} formSettings
         * @param {?} creationResult
         * @param {?=} extParams
         * @return {?}
         */
            function (formSettings, creationResult, extParams) {
                var e_1, _a;
                if (formSettings == null) {
                    throw "参数formSettings不可为空";
                }
                if (creationResult == null) {
                    throw "参数creationResult不可为空";
                }
                if (typeof creationResult == "string") {
                    if (creationResult == "") {
                        throw "参数creationResult不可为空";
                    }
                    /** @type {?} */
                    var temp = new runtimeApi.FormBillCreationProcessExecutorResult();
                    temp.LoadFromJson(creationResult);
                    creationResult = temp;
                }
                if ((creationResult instanceof runtimeApi.FormBillCreationProcessExecutorResult) == false) {
                    /** @type {?} */
                    var res = new runtimeApi.FormBillCreationProcessExecutorResult();
                    res.LoadFromJsonObject(creationResult);
                    creationResult = res;
                }
                if (creationResult.conditionResult.conditionExecutionResult == false) {
                    this.messager.error(creationResult.conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    return;
                }
                if (creationResult.creationRuleExecutorResult == null || creationResult.creationRuleExecutorResult.mappingResults == null || creationResult.creationRuleExecutorResult.mappingResults.length == 0) {
                    this.messager.error(this.localePipe.transform("creationResultEmpty"));
                    return;
                }
                else if (creationResult.creationRuleExecutorResult.mappingResults.length == 1) {
                    // 从表单配置中取下游卡片加载命令
                    /** @type {?} */
                    var action = formSettings.targetCardAppLoadCmd;
                    if (action != null && action != "") {
                        if (extParams == null) {
                            extParams = {
                                action: action
                            };
                        }
                        else {
                            extParams["action"] = extParams["action"] != null && extParams["action"] != "" ? extParams["action"] : action;
                        }
                    }
                    //只有一条数据则打开卡片
                    this.openApp(creationResult.creationRuleExecutorResult.mappingResults[0].associations[0].tarRootDataId, formSettings.targetCardAppId, formSettings.targetCardAppEntrance, creationResult, extParams, false);
                }
                else {
                    if (formSettings.targetListAppId != null) {
                        // 多条数据且配置批量编辑界面
                        throw "暂不支持打开批量编辑界面";
                        this.openApp(creationResult.creationRuleExecutorResult.mappingResults[0].associations[0].tarRootDataId, formSettings.targetListAppId, formSettings.targetListAppEntrance, creationResult, extParams, false);
                    }
                    else {
                        try {
                            //有多条数据但未配置批量编辑界面则打开多个卡片
                            for (var _b = __values(creationResult.creationRuleExecutorResult.mappingResults), _c = _b.next(); !_c.done; _c = _b.next()) {
                                var mappingResult = _c.value;
                                /** @type {?} */
                                var singleRes = new runtimeApi.FormBillCreationProcessExecutorResult();
                                singleRes.conditionResult = creationResult.conditionResult;
                                singleRes.creationRuleExecutorResult = new runtimeApi.RpcCreationRuleExecutorResult();
                                singleRes.creationRuleExecutorResult.bizFlowchartId = creationResult.creationRuleExecutorResult.bizFlowchartId;
                                singleRes.creationRuleExecutorResult.creationRuleId = creationResult.creationRuleExecutorResult.creationRuleId;
                                singleRes.creationRuleExecutorResult.creationRuleInstanceId = creationResult.creationRuleExecutorResult.creationRuleInstanceId;
                                singleRes.creationRuleExecutorResult.mappingResults = [mappingResult];
                                // 从表单配置中取下游卡片加载命令
                                /** @type {?} */
                                var action = formSettings.targetCardAppLoadCmd;
                                if (action != null && action != "") {
                                    if (extParams == null) {
                                        extParams = {
                                            action: action
                                        };
                                    }
                                    else {
                                        extParams["action"] = extParams["action"] != null && extParams["action"] != "" ? extParams["action"] : action;
                                    }
                                }
                                this.openApp(mappingResult.associations[0].tarRootDataId, formSettings.targetCardAppId, formSettings.targetCardAppEntrance, singleRes, extParams, false);
                            }
                        }
                        catch (e_1_1) {
                            e_1 = { error: e_1_1 };
                        }
                        finally {
                            try {
                                if (_c && !_c.done && (_a = _b.return))
                                    _a.call(_b);
                            }
                            finally {
                                if (e_1)
                                    throw e_1.error;
                            }
                        }
                    }
                }
            };
        /**
         * @Deprecated
         * @param tabId
         * @param appId
         * @param appEntrance
         * @param creationResult
         * @param extParams
         * @param reload
         * @param tabName
         * @param enableRefresh
         * @param destructuring
         */
        /**
         * \@Deprecated
         * @private
         * @param {?} tabId
         * @param {?} appId
         * @param {?} appEntrance
         * @param {?} creationResult
         * @param {?=} extParams
         * @param {?=} reload
         * @param {?=} tabName
         * @param {?=} enableRefresh
         * @param {?=} destructuring
         * @return {?}
         */
        BifSourceUiService.prototype.openApp = /**
         * \@Deprecated
         * @private
         * @param {?} tabId
         * @param {?} appId
         * @param {?} appEntrance
         * @param {?} creationResult
         * @param {?=} extParams
         * @param {?=} reload
         * @param {?=} tabName
         * @param {?=} enableRefresh
         * @param {?=} destructuring
         * @return {?}
         */
            function (tabId, appId, appEntrance, creationResult, extParams, reload, tabName, enableRefresh, destructuring) {
                extParams = extParams == null ? {} : extParams;
                /** @type {?} */
                var browser = judgeBrowserType();
                if (browser.type == "IE" && browser.IEVersion == "IE11") {
                    //IE11浏览器将生成结果转换为字符串存在top.localStorage，Id为tabId
                    // console.log(tabId);
                    window.top.localStorage.setItem(tabId, creationResult.ConvertToJson());
                    this.navigationService.openApp(tabId, appId, appEntrance, extParams, reload, tabName, enableRefresh, destructuring);
                }
                else {
                    this.navigationService.openApp(tabId, appId, appEntrance, this.buildRouteParams(creationResult, extParams), reload, tabName, enableRefresh, destructuring);
                }
            };
        /**
         * @Deprecated
         * @param action 目标App动作
         * @param pairs 其他实体参数键值对
         */
        /**
         * \@Deprecated
         * @private
         * @param {?} creationResult
         * @param {?} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.buildRouteParams = /**
         * \@Deprecated
         * @private
         * @param {?} creationResult
         * @param {?} extParams
         * @return {?}
         */
            function (creationResult, extParams) {
                /** @type {?} */
                var params = extParams;
                params[this.uiStateKeyCreationResult] = creationResult.ConvertToJson();
                if (params["action"] == null || params["action"] == "") {
                    params["action"] = "rootviewmodelbifLoad1";
                }
                return params;
            };
        /**
         * 打开下游单据制单界面
         * @param formSettings
         * @param creationResult
         * @param extParams
         */
        /**
         * 打开下游单据制单界面
         * @param {?} formSettings
         * @param {?} conditionResult
         * @param {?} textIdWithDataIds
         * @param {?=} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.openTargetApp = /**
         * 打开下游单据制单界面
         * @param {?} formSettings
         * @param {?} conditionResult
         * @param {?} textIdWithDataIds
         * @param {?=} extParams
         * @return {?}
         */
            function (formSettings, conditionResult, textIdWithDataIds, extParams) {
                var e_2, _a;
                if (formSettings == null) {
                    throw "参数formSettings不可为空";
                }
                if (textIdWithDataIds == null) {
                    throw "参数creationResult不可为空";
                }
                if (typeof textIdWithDataIds == "string") {
                    if (textIdWithDataIds == "") {
                        throw "参数creationResult不可为空";
                    }
                    textIdWithDataIds = ( /** @type {?} */(commonApi$1.BpmnModelJsonHelper.FromJson(textIdWithDataIds, GeneralTextIdWithDataId)));
                }
                if (conditionResult.conditionExecutionResult == false) {
                    this.messager.error(conditionResult.message || this.localePipe.transform("creationExecutionError"));
                    return;
                }
                if (textIdWithDataIds == null || textIdWithDataIds.length == null || textIdWithDataIds.length <= 0) {
                    this.messager.error(this.localePipe.transform("creationResultEmpty"));
                    return;
                }
                else if (textIdWithDataIds.length == 1) {
                    // 从表单配置中取下游卡片加载命令
                    /** @type {?} */
                    var action = formSettings.targetCardAppLoadCmd;
                    if (action != null && action != "") {
                        if (extParams == null) {
                            extParams = {
                                action: action
                            };
                        }
                        else {
                            extParams["action"] = extParams["action"] != null && extParams["action"] != "" ? extParams["action"] : action;
                        }
                    }
                    //只有一条数据则打开卡片
                    this.openAppWithGeneralText(textIdWithDataIds[0].dataId, formSettings.targetCardAppId, formSettings.targetCardAppEntrance, textIdWithDataIds[0].generalTextId, extParams, false);
                }
                else {
                    if (formSettings.targetListAppId != null) {
                        // 多条数据且配置批量编辑界面
                        throw "暂不支持打开批量编辑界面";
                    }
                    else {
                        try {
                            //有多条数据但未配置批量编辑界面则打开多个卡片
                            for (var textIdWithDataIds_1 = __values(textIdWithDataIds), textIdWithDataIds_1_1 = textIdWithDataIds_1.next(); !textIdWithDataIds_1_1.done; textIdWithDataIds_1_1 = textIdWithDataIds_1.next()) {
                                var item = textIdWithDataIds_1_1.value;
                                // 从表单配置中取下游卡片加载命令
                                /** @type {?} */
                                var action = formSettings.targetCardAppLoadCmd;
                                if (action != null && action != "") {
                                    if (extParams == null) {
                                        extParams = {
                                            action: action
                                        };
                                    }
                                    else {
                                        extParams["action"] = extParams["action"] != null && extParams["action"] != "" ? extParams["action"] : action;
                                    }
                                }
                                this.openAppWithGeneralText(item.dataId, formSettings.targetCardAppId, formSettings.targetCardAppEntrance, item.generalTextId, extParams, false);
                            }
                        }
                        catch (e_2_1) {
                            e_2 = { error: e_2_1 };
                        }
                        finally {
                            try {
                                if (textIdWithDataIds_1_1 && !textIdWithDataIds_1_1.done && (_a = textIdWithDataIds_1.return))
                                    _a.call(textIdWithDataIds_1);
                            }
                            finally {
                                if (e_2)
                                    throw e_2.error;
                            }
                        }
                    }
                }
            };
        /**
         * @private
         * @param {?} tabId
         * @param {?} appId
         * @param {?} appEntrance
         * @param {?} textId
         * @param {?=} extParams
         * @param {?=} reload
         * @param {?=} tabName
         * @param {?=} enableRefresh
         * @param {?=} destructuring
         * @return {?}
         */
        BifSourceUiService.prototype.openAppWithGeneralText = /**
         * @private
         * @param {?} tabId
         * @param {?} appId
         * @param {?} appEntrance
         * @param {?} textId
         * @param {?=} extParams
         * @param {?=} reload
         * @param {?=} tabName
         * @param {?=} enableRefresh
         * @param {?=} destructuring
         * @return {?}
         */
            function (tabId, appId, appEntrance, textId, extParams, reload, tabName, enableRefresh, destructuring) {
                extParams = extParams == null ? {} : extParams;
                /** @type {?} */
                var browser = judgeBrowserType();
                if (browser.type == "IE" && browser.IEVersion == "IE11") {
                    //IE11浏览器将生成结果转换为字符串存在top.localStorage，Id为tabId
                    window.top.localStorage.setItem(tabId, textId);
                    this.navigationService.openApp(tabId, appId, appEntrance, this.buildRouteParamsWithGeneralText(textId, extParams), reload, tabName, enableRefresh, destructuring);
                }
                else {
                    this.navigationService.openApp(tabId, appId, appEntrance, this.buildRouteParamsWithGeneralText(textId, extParams), reload, tabName, enableRefresh, destructuring);
                }
            };
        /**
         *
         * @param action 目标App动作
         * @param pairs 其他实体参数键值对
         */
        /**
         *
         * @private
         * @param {?} textId
         * @param {?} extParams
         * @return {?}
         */
        BifSourceUiService.prototype.buildRouteParamsWithGeneralText = /**
         *
         * @private
         * @param {?} textId
         * @param {?} extParams
         * @return {?}
         */
            function (textId, extParams) {
                /** @type {?} */
                var params = extParams;
                params[this.uiStateKeyCreationResult] = textId;
                if (params["action"] == null || params["action"] == "") {
                    params["action"] = "rootviewmodelbifLoad1";
                }
                return params;
            };
        BifSourceUiService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifSourceUiService.ctorParameters = function () {
            return [
                { type: commandServices.NavigationService },
                { type: devkit.FrameContext },
                { type: uiModal.BsModalService },
                { type: uiMessager.MessagerService },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.NgModuleFactoryLoader },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: commandServices.RuntimeFrameworkService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifSourceUiService;
    }(AbstractUiService));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/components/pull-selector/pull-selector.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PullSelectorComponent = /** @class */ (function () {
        function PullSelectorComponent(args, dataService, localeId, loading, elementRef, inj, cfr, messagerService) {
            var _this = this;
            this.dataService = dataService;
            this.loading = loading;
            this.elementRef = elementRef;
            this.inj = inj;
            this.cfr = cfr;
            this.messagerService = messagerService;
            this.ttData = [];
            this.ttIdField = 'voId';
            this.ttSearchFields = [];
            this.dgData = [];
            this.dgIdField = 'id';
            this.procData = [];
            this.scene = "Pull";
            this.bsModalRef4BifSelector = null;
            this.subject4CreationProcess = new rxjs.Subject();
            this.clickOk4BifSelector = ( /**
             * @return {?}
             */function () {
                if (_this.selectedEntity == null) {
                    _this.messagerService.error(_this.localePipe.instant("pleaseSelectOneCreationProcess"));
                    return;
                }
                _this.subject4CreationProcess.next(_this.selectedEntity);
                _this.subject4CreationProcess.complete();
                _this.bsModalRef4BifSelector.close();
            });
            this.clickClose4BifSelector = ( /**
             * @return {?}
             */function () {
                _this.bsModalRef4BifSelector.close();
            });
            this.args = new FormGetBillCreationProcessEntityExArgs();
            this.args.LoadFromJsonObject(args);
            this.localePipe = new LocalePipe(localeId);
            if (inj == null) {
                /** @type {?} */
                var refInj = core$1.ReflectiveInjector.resolveAndCreate([
                    uiMessager.MessagerService,
                ]);
                this.inj = refInj;
            }
            this.cfr = cfr || this.inj.get(core$1.ComponentFactoryResolver);
            this.messagerService = messagerService || this.inj.get(uiMessager.MessagerService, null);
        }
        /**
         * @return {?}
         */
        PullSelectorComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.ttDataRoot = {
                    id: "*",
                    data: {
                        voId: "*",
                        voName: this.localePipe.instant("all"),
                    },
                    parent: null,
                    expanded: true,
                    children: [],
                };
                this.ttData = [this.ttDataRoot];
                this.configTtColumns();
                this.configDgColumns();
                this.configTtEvents();
                this.configDgEvents();
                this.loadItems();
            };
        /**
         * @private
         * @return {?}
         */
        PullSelectorComponent.prototype.loadItems = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                this.loading.show({ container: this.elementRef });
                /** @type {?} */
                var list$ = null;
                if (this.args.upBillVoId == null) {
                    list$ = this.dataService.getSlimBillCreationProcessEntityExesByDownBillVoId4Pull(this.args.downBillVoId);
                }
                else {
                    list$ = this.dataService.getSlimBillCreationProcessEntityExesByUpBillVoIdAndDownBillVoId4SpecificPull(this.args.upBillVoId, this.args.downBillVoId);
                }
                list$.subscribe(( /**
                 * @param {?} result
                 * @return {?}
                 */function (result) {
                    _this.loading.close();
                    _this.procData = result || [];
                    _this.dgData = __spread(_this.procData);
                    // 组织VO树
                    /** @type {?} */
                    var voList = [];
                    _this.procData.forEach(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        if (voList.some(( /**
                         * @param {?} vo
                         * @return {?}
                         */function (vo) { return vo.voId == it.upBillVoId; })) == false) {
                            voList.push({
                                voId: it.upBillVoId,
                                voName: it.upBillVoName,
                            });
                        }
                    }));
                    _this.ttDataRoot.children = voList.map(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        return {
                            id: it.voId,
                            data: {
                                voId: it.voId,
                                voName: it.voName,
                            },
                            expanded: true,
                        };
                    }));
                    _this.ttData = [_this.ttDataRoot];
                    // 默认选中第一条
                    if (_this.dgData && _this.dgData.length > 0) {
                        _this.selectedEntity = _this.dgData[0];
                        setTimeout(( /**
                         * @return {?}
                         */function () {
                            _this.dg.clearSelections();
                            _this.dg.selectRow(_this.dgData[0].id);
                        }), 0);
                    }
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.loading.close();
                    throw err;
                }));
            };
        /**
         * @return {?}
         */
        PullSelectorComponent.prototype.configTtColumns = /**
         * @return {?}
         */
            function () {
                this.ttCols = [
                    {
                        field: 'voName', title: this.localePipe.instant('upstreamBill'), width: 120,
                    },
                ];
            };
        /**
         * @return {?}
         */
        PullSelectorComponent.prototype.configDgColumns = /**
         * @return {?}
         */
            function () {
                this.dgCols = [
                    { field: "code", title: this.localePipe.transform("processCode"), width: 120, sortable: true },
                    {
                        field: "name", title: this.localePipe.transform("processName"), width: 250, sortable: true,
                    },
                ];
            };
        /**
         * @return {?}
         */
        PullSelectorComponent.prototype.configTtEvents = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.tt.nodeSelected.subscribe(( /**
                 * @param {?} ctx
                 * @return {?}
                 */function (ctx) {
                    //ctx:{inidex;instance;node:{data}}
                    if (ctx.node.id == "*") {
                        _this.dgData = __spread(_this.procData);
                    }
                    else {
                        _this.dgData = __spread(_this.procData.filter(( /**
                         * @param {?} it
                         * @return {?}
                         */function (it) { return it.upBillVoId == ctx.node.data.voId; })));
                    }
                    if (_this.dgData && _this.dgData.length > 0) {
                        _this.selectedEntity = _this.dgData[0];
                        setTimeout(( /**
                         * @return {?}
                         */function () {
                            _this.dg.clearSelections();
                            _this.dg.selectRow(_this.dgData[0].id);
                        }), 0);
                    }
                }));
            };
        /**
         * @return {?}
         */
        PullSelectorComponent.prototype.configDgEvents = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.dg.selectChanged.subscribe(( /**
                 * @param {?} row
                 * @return {?}
                 */function (row) {
                    _this.selectedEntity = row.data;
                }));
            };
        PullSelectorComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: 'lib-bif-pull-selector',
                        template: "<div class=\"g-main\" style=\"padding-left: 24px; padding-right: 24px;\">\r\n  <div class=\"d-flex flex-row\"\r\n    style=\"height: 100%; width: 100%; border: 1px solid #E9ECF3; box-shadow: 0 2px 6px 0 rgb(31 35 41 / 6%); border-radius: 6px;\">\r\n    <div class=\"d-flex flex-column\" style=\"width: 200px;\" ngResizable rzAspectRatio=\"true\" [rzHandles]=\"'e'\">\r\n      <farris-treetable #tt class=\"f-utils-fill-flex-column\" [data]=\"ttData\" [columns]=\"ttCols\" [idField]=\"ttIdField\"\r\n        [fit]=\"true\" [showHeader]=\"true\" [fixedHeader]=\"true\" [singleSelect]=\"true\">\r\n      </farris-treetable>\r\n    </div>\r\n\r\n    <div class=\"f-utils-fill-flex-row\" style=\"padding-left: 15px;\">\r\n      <div class=\"d-flex flex-column\" style=\"width: 100%;\">\r\n        <div class=\"f-utils-fill-flex-column\">\r\n          <farris-datagrid #dg [fit]=\"true\" [fitColumns]=\"true\" [data]=\"dgData\" [columns]=\"dgCols\" [idField]=\"dgIdField\"\r\n            [showHeader]=\"true\" [showBorder]=\"true\" [striped]=\"true\" [pagination]=\"false\" [showLineNumber]=\"true\">\r\n          </farris-datagrid>\r\n        </div>\r\n        <div class=\"form-group\" style=\"\">\r\n          <div>{{ 'processDesciption' | locale }}</div>\r\n          <textarea readonly class=\"form-control\" name=\"description\" rows=\"3\"\r\n            [ngModel]=\"selectedEntity&&selectedEntity.description\"></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        PullSelectorComponent.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core$1.Inject, args: [SELECTOR_ARGS_INJECTOR,] }] },
                { type: BifDataService },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: uiLoading.LoadingService },
                { type: core$1.ElementRef },
                { type: core$1.Injector, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ComponentFactoryResolver, decorators: [{ type: core$1.Optional }] },
                { type: uiMessager.MessagerService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        PullSelectorComponent.propDecorators = {
            tt: [{ type: core$1.ViewChild, args: ['tt',] }],
            dg: [{ type: core$1.ViewChild, args: ['dg',] }]
        };
        return PullSelectorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/utils/ObjectUtils.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} str
     * @return {?}
     */
    function canJSONParse(str) {
        try {
            if (typeof JSON.parse(str) == "object") {
                return true;
            }
        }
        catch (e) {
        }
        return false;
    }

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/service/bif-target-ui.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BifTargetUiService = /** @class */ (function (_super) {
        __extends(BifTargetUiService, _super);
        function BifTargetUiService(dataService, frameContext, modalService, messager, injector, cfr, loader, localeId, runtimeFrameworkService) {
            var _this = _super.call(this, frameContext, modalService, messager, injector, cfr, loader, localeId, runtimeFrameworkService) || this;
            _this.dataService = dataService;
            _this.frameContext = frameContext;
            _this.modalService = modalService;
            _this.messager = messager;
            _this.injector = injector;
            _this.cfr = cfr;
            _this.loader = loader;
            _this.localeId = localeId;
            _this.uiStateKeyCreationResult = BIF_UISTATE_KEY_CREATION_RESULT;
            return _this;
        }
        /**
         * 参照时打开生单规则选择器
         */
        /**
         * 参照时打开生单规则选择器
         * @param {?} downVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
        BifTargetUiService.prototype.openBillCreationProcessSelector4Pull = /**
         * 参照时打开生单规则选择器
         * @param {?} downVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
            function (downVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.downBillVoId = downVoId;
                args.manualCreationMode = ManualCreationMode.Pull;
                // args.bizFlowchartId = bizFlowchartId;
                return this.openBillCreationProcessSelector(args, PullSelectorComponent, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 特定参照时打开生单规则选择器
         */
        /**
         * 特定参照时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?} downVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
        BifTargetUiService.prototype.openBillCreationProcessSelector4SpecificPull = /**
         * 特定参照时打开生单规则选择器
         * @param {?} upBillVoId
         * @param {?} downVoId
         * @param {?=} bizFlowchartId
         * @param {?=} modalOptions
         * @param {?=} customSelectorModuleUrl
         * @param {?=} extParams
         * @return {?}
         */
            function (upBillVoId, downVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                /** @type {?} */
                var args = new FormGetBillCreationProcessEntityExArgs();
                args.upBillVoId = upBillVoId;
                args.downBillVoId = downVoId;
                args.manualCreationMode = ManualCreationMode.SpecificPull;
                // args.bizFlowchartId = bizFlowchartId;
                return this.openBillCreationProcessSelector(args, PullSelectorComponent, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 打开来源单据选择器
         * @param formSettings
         * @param modalOptions
         */
        /**
         * 打开来源单据选择器
         * @param {?=} formSettings
         * @param {?=} modalOptions
         * @param {?=} extParams
         * @return {?}
         */
        BifTargetUiService.prototype.openSourceDataSelector4Pull = /**
         * 打开来源单据选择器
         * @param {?=} formSettings
         * @param {?=} modalOptions
         * @param {?=} extParams
         * @return {?}
         */
            function (formSettings, modalOptions, extParams) {
                var _this = this;
                modalOptions = modalOptions == null ? this.defaultModalOptions : modalOptions;
                modalOptions.title = modalOptions.title == null ? this.localePipe.transform("sourceDataSelector") : modalOptions.title;
                /** @type {?} */
                var cmpR = null;
                if (formSettings == null || formSettings.sourceDataSelectorModuleUrl == null) // 没有配置时加载默认通用单据选择器
                 {
                    this.messager.error(this.localePipe.instant("noDefaultUpBillSelector"));
                    throw "暂无默认实现，请使用自定义来源单据选择器。请确保生单流程中【集成场景】启用了【人工拉式生单】场景，并且【单据配置】-【拉式生单配置】-【上游应用入口】或【URL】不为空";
                    // let cmpF: ComponentFactory<SourceDataSelectorComponent> = this.cfr.resolveComponentFactory(SourceDataSelectorComponent);
                    // let inj: Injector = Injector.create([
                    // ], this.injector);
                    // cmpR = cmpF.create(inj);
                    // this.configModalButtons(modalOptions, cmpR);
                    // cmpR.instance.bsModalRef4AifSelector = this.modalService.show(cmpR, modalOptions);
                    // return cmpR.instance.subject4EntityDatas.asObservable();
                }
                else //加载自定义来源单据选择器
                 {
                    // return from(System.import(formSettings.sourceDataSelectorModuleUrl.substring(0, formSettings.sourceDataSelectorModuleUrl.indexOf("#")) + ".js")).pipe(
                    /** @type {?} */
                    var moduleF$ = null;
                    if (formSettings.sourceDataSelectorAppId != null) //配置appId时
                     {
                        moduleF$ = rxjs.from(System.import(formSettings.sourceDataSelectorModuleUrl.toLowerCase()).then(( /**
                         * @param {?} m
                         * @return {?}
                         */function (m) { return m; }))).pipe(operators.switchMap(( /**
                         * @param {?} m
                         * @return {?}
                         */function (m) {
                            for (var key in m) {
                                return rxjs.of(m[key]);
                            }
                            return rxjs.of(null);
                        })));
                    }
                    else //只配置url时
                     {
                        moduleF$ = rxjs.from(this.loader.load(formSettings.sourceDataSelectorModuleUrl));
                    }
                    return moduleF$.pipe(operators.switchMap(( /**
                     * @param {?} moduleFactory
                     * @return {?}
                     */function (moduleFactory) {
                        /** @type {?} */
                        var moduleRef = moduleFactory.create(_this.frameContext.root.injector);
                        if (moduleRef.instance.createSourceDataSelector && moduleRef.instance.createSourceDataSelector instanceof Function) //module上定义createSourceDataSelector方法
                         {
                            /** @type {?} */
                            var cmpR$ = moduleRef.instance.createSourceDataSelector(_this.frameContext.root.injector, null, extParams);
                            if (cmpR$ instanceof rxjs.Observable) {
                                return cmpR$.pipe(operators.switchMap(( /**
                                 * @param {?} componentRef
                                 * @return {?}
                                 */function (componentRef) {
                                    cmpR = componentRef;
                                    _this.configModalButtons(modalOptions, cmpR);
                                    cmpR.instance.bsModalRef4BifSelector = _this.modalService.show(cmpR, modalOptions);
                                    return cmpR.instance.subject4EntityDatas.asObservable();
                                })));
                            }
                            else if (cmpR$ instanceof core$1.ComponentRef) {
                                cmpR = cmpR$;
                                _this.configModalButtons(modalOptions, cmpR);
                                cmpR.instance.bsModalRef4BifSelector = _this.modalService.show(cmpR, modalOptions);
                                return cmpR.instance.subject4EntityDatas.asObservable();
                            }
                        }
                        else //module上未定义时尝试寻找RootComponent类
                         {
                            /** @type {?} */
                            var translate_1 = moduleRef.injector.get(core.TranslateService);
                            return translate_1.getTranslation(_this.localeId).pipe(operators.switchMap(( /**
                             * @param {?} data
                             * @return {?}
                             */function (data) {
                                translate_1.setTranslation(_this.localeId, data);
                                translate_1.defaultLang = _this.localeId;
                                translate_1.currentLang = _this.localeId;
                                return _this.getEntityData(moduleRef, formSettings, modalOptions, extParams);
                            })), operators.catchError(( /**
                             * @param {?} err
                             * @return {?}
                             */function (err) {
                                console.error(err);
                                return _this.getEntityData(moduleRef, formSettings, modalOptions, extParams);
                            })));
                        }
                    })));
                }
            };
        /**
         * @Deprecated 已弃用，请使用{@link getCreationResult}
         * 获取传到根组件UIState上的生单规则执行器结果
         */
        /**
         * \@Deprecated 已弃用，请使用{\@link getCreationResult}
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?}
         */
        BifTargetUiService.prototype.getFormBillCreationProcessExecutorResult = /**
         * \@Deprecated 已弃用，请使用{\@link getCreationResult}
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?}
         */
            function () {
                //取得tabId为[AppId]_[AppEntrance]_[tabId]
                /** @type {?} */
                var tabId = this.runtimeFrameworkService.tabId || this.getQueryString("tabId") || "";
                /** @type {?} */
                var dataId = tabId.substr(tabId.length - 36);
                // console.log(tabId);
                // console.log(dataId);
                /** @type {?} */
                var browser = judgeBrowserType();
                //IE11浏览器从localStorage取值后并删除, 并存入UIState
                if (browser.type == "IE" && browser.IEVersion == "IE11") {
                    /** @type {?} */
                    var tmp = window.top.localStorage.getItem(dataId);
                    window.top.localStorage.removeItem(dataId);
                    this.frameContext.root.uiState.setPropertyValue(this.uiStateKeyCreationResult, tmp);
                }
                /** @type {?} */
                var resTemp = this.frameContext.root.uiState[this.uiStateKeyCreationResult];
                if (resTemp == null) {
                    throw "FormBillCreationProcessExecutorResult is null";
                }
                /** @type {?} */
                var result = new runtimeApi.FormBillCreationProcessExecutorResult();
                if (typeof resTemp == "string") {
                    result.LoadFromJson(resTemp);
                }
                else if (typeof resTemp == "object") {
                    result.LoadFromJsonObject(resTemp);
                }
                else {
                    throw "不合法的类型";
                }
                return result;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        BifTargetUiService.prototype.getQueryString = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                /** @type {?} */
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                /** @type {?} */
                var r = window.location.search.substr(1).match(reg);
                if (r != null) {
                    return unescape(r[2]);
                }
                return null;
            };
        /**
         * 获取传到根组件UIState上的生单规则执行器结果
         */
        /**
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?}
         */
        BifTargetUiService.prototype.getCreationResult = /**
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?}
         */
            function () {
                //取得tabId为[AppId]_[AppEntrance]_[tabId]
                /** @type {?} */
                var tabId = this.runtimeFrameworkService.tabId || this.getQueryString("tabId") || "";
                /** @type {?} */
                var dataId = tabId.substr(tabId.length - 36);
                // console.log(tabId);
                // console.log(dataId);
                /** @type {?} */
                var browser = judgeBrowserType();
                //IE11浏览器从localStorage取值后并删除, 并存入UIState
                if (browser.type == "IE" && browser.IEVersion == "IE11") {
                    /** @type {?} */
                    var tmp = window.top.localStorage.getItem(dataId);
                    window.top.localStorage.removeItem(dataId);
                    this.frameContext.root.uiState.setPropertyValue(this.uiStateKeyCreationResult, tmp);
                }
                /** @type {?} */
                var resTemp = this.frameContext.root.uiState[this.uiStateKeyCreationResult];
                if (resTemp == null) {
                    throw "FormBillCreationProcessExecutorResult is null";
                }
                /** @type {?} */
                var result = new runtimeApi.FormBillCreationProcessExecutorResult();
                if (typeof resTemp == "string") {
                    // 兼容原直接传递生单数据场景
                    if (canJSONParse(resTemp)) {
                        result.LoadFromJson(resTemp);
                        return rxjs.of(result);
                    }
                    else {
                        /** @type {?} */
                        var resultTextId = resTemp;
                        return this.dataService.getCreationResultById(resultTextId);
                    }
                }
                else if (typeof resTemp == "object") {
                    result.LoadFromJsonObject(resTemp);
                    return rxjs.of(result);
                }
                else {
                    throw "不合法的类型";
                }
            };
        /**
         * 配置模态框按钮事件
         * @param modalOptions
         * @param cmpR
         */
        /**
         * 配置模态框按钮事件
         * @protected
         * @param {?} modalOptions
         * @param {?} service
         * @return {?}
         */
        BifTargetUiService.prototype.configModalButtonsByService = /**
         * 配置模态框按钮事件
         * @protected
         * @param {?} modalOptions
         * @param {?} service
         * @return {?}
         */
            function (modalOptions, service) {
                modalOptions.buttons = [
                    {
                        text: this.localePipe.transform("confirm"),
                        cls: "btn btn-primary",
                        handle: service.clickOk4BifSelector,
                    },
                    {
                        text: this.localePipe.transform("cancel"),
                        cls: "btn btn-secondary",
                        handle: service.clickClose4BifSelector,
                    }
                ];
                modalOptions.showButtons = true;
            };
        /**
         * @protected
         * @param {?} moduleRef
         * @param {?=} formSettings
         * @param {?=} modalOptions
         * @param {?=} extParams
         * @return {?}
         */
        BifTargetUiService.prototype.getEntityData = /**
         * @protected
         * @param {?} moduleRef
         * @param {?=} formSettings
         * @param {?=} modalOptions
         * @param {?=} extParams
         * @return {?}
         */
            function (moduleRef, formSettings, modalOptions, extParams) {
                /** @type {?} */
                var cmpF = null;
                /** @type {?} */
                var cmpR = null;
                /** @type {?} */
                var bootstrapComponentSelector = "app-rootcomponent";
                /** @type {?} */
                var bootstrapComponent = null;
                /** @type {?} */
                var facMap = moduleRef.componentFactoryResolver['_factories'];
                /** @type {?} */
                var subject4EntityDatas = null;
                if (extParams && extParams.bootstrapComponentSelector) //指定了根组件selector
                 {
                    bootstrapComponentSelector = extParams.bootstrapComponentSelector;
                    facMap.forEach(( /**
                     * @param {?} value
                     * @param {?} key
                     * @param {?} map
                     * @return {?}
                     */function (value, key, map) {
                        /** @type {?} */
                        var selector = value.selector;
                        if (bootstrapComponentSelector == selector) {
                            cmpF = moduleRef.componentFactoryResolver.resolveComponentFactory(( /** @type {?} */(key)));
                            cmpR = cmpF.create(moduleRef.injector);
                        }
                    }));
                }
                else //未指定根组件selector
                 {
                    bootstrapComponent = moduleRef['_bootstrapComponents'][0];
                    if (bootstrapComponent) //先找bootstrapComponent数组有无组件
                     {
                        cmpF = moduleRef.componentFactoryResolver.resolveComponentFactory(bootstrapComponent);
                        cmpR = ( /** @type {?} */(cmpF.create(moduleRef.injector)));
                    }
                    else //没有则从facMap中查找默认的app-rootcomponent
                     {
                        facMap.forEach(( /**
                         * @param {?} value
                         * @param {?} key
                         * @param {?} map
                         * @return {?}
                         */function (value, key, map) {
                            /** @type {?} */
                            var selector = value.selector;
                            if (bootstrapComponentSelector == selector) {
                                cmpF = moduleRef.componentFactoryResolver.resolveComponentFactory(( /** @type {?} */(key)));
                                cmpR = cmpF.create(moduleRef.injector);
                            }
                        }));
                    }
                }
                if (cmpR && cmpR.instance && cmpR.instance.viewModel && cmpR.instance.viewModel.uiState) {
                    cmpR.instance.viewModel.uiState.setPropertyValue("action", "Load1");
                    cmpR.instance.viewModel.uiState.setPropertyValue('DEVKIT_DIALOG', true);
                }
                /** @type {?} */
                var dataSelectorService = cmpR.injector.get(AbstractBifDataSelectorService, null);
                if (dataSelectorService != null) // 有AbstractBifDataSelectorService的provider时
                 {
                    this.configModalButtonsByService(modalOptions, dataSelectorService);
                    dataSelectorService.bsModalRef4BifSelector = this.modalService.show(cmpR, modalOptions);
                    subject4EntityDatas = dataSelectorService.subject4EntityDatas.asObservable();
                }
                else //没有则从组件上寻找相应属性
                 {
                    this.configModalButtons(modalOptions, cmpR);
                    cmpR.instance.bsModalRef4BifSelector = this.modalService.show(cmpR, modalOptions);
                    subject4EntityDatas = cmpR.instance.subject4EntityDatas.asObservable();
                }
                // 此处用于解决任务中心直接打开来源单据帮助时不执行初始化加载命令的问题
                if (cmpR && cmpR.instance && cmpR.instance.viewModel) {
                    if (extParams && extParams.loadCommand) {
                        /** @type {?} */
                        var loadCommand = extParams.loadCommand;
                        /** @type {?} */
                        var cmdFunc = cmpR.instance.viewModel[loadCommand];
                        if (cmdFunc) {
                            /** @type {?} */
                            var args = undefined;
                            if (extParams && extParams.loadParams) {
                                if (Array.isArray(extParams.loadParams)) {
                                    args = extParams.loadParams;
                                }
                                else {
                                    args = [extParams.loadParams];
                                }
                            }
                            cmdFunc.apply(cmpR.instance.viewModel, args);
                        }
                    }
                }
                return subject4EntityDatas;
            };
        BifTargetUiService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifTargetUiService.ctorParameters = function () {
            return [
                { type: BifDataService },
                { type: devkit.FrameContext },
                { type: uiModal.BsModalService },
                { type: uiMessager.MessagerService },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.NgModuleFactoryLoader },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: commandServices.RuntimeFrameworkService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifTargetUiService;
    }(AbstractUiService));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bif-manual-creation/bif-manual-creation.module.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0 = localStorage.getItem('languageCode') || 'zh-CHS', ɵ1 = {};
    var BifManualCreationModule = /** @class */ (function () {
        function BifManualCreationModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        BifManualCreationModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                /** @type {?} */
                var providers = [
                    { provide: ModuleConfig, useValue: config || {} },
                    BifDataService,
                    BifSourceUiService,
                    BifTargetUiService,
                ];
                return {
                    ngModule: BifManualCreationModule,
                    providers: providers
                };
            };
        BifManualCreationModule.decorators = [
            { type: core$1.NgModule, args: [{
                        declarations: [
                            PushSelectorComponent,
                            PullSelectorComponent,
                            LocalePipe,
                        ],
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            http.HttpClientModule,
                            uiModal.ModalModule.forRoot(),
                            uiDraggable.AngularDraggableModule,
                            uiCommon.FarrisCommonModule.forRoot(),
                            uiDatagridEditors.DatagridEditorsModule,
                            uiDatagrid.DatagridModule.forRoot(__spread(uiDatagridEditors.EditorProviders)),
                            uiTree.TreeModule,
                            uiTreetable.TreeTableModule,
                            uiLoading.LoadingModule.forRoot({
                                message: 'Loading...'
                            }),
                            uiNotify.NotifyModule.forRoot(),
                            uiMessager.MessagerModule.forRoot({
                                width: 550,
                                height: 450
                            }),
                            uiInputGroup.InputGroupModule,
                            uiLanguageTextbox.LanguageTextboxModule,
                            uiNumberSpinner.NumberSpinnerModule,
                            uiSwitch.SwitchModule,
                            uiSection.FarrisSectionModule,
                        ],
                        providers: [
                            { provide: core$1.LOCALE_ID, useValue: ɵ0 },
                            { provide: ModuleConfig, useValue: ɵ1 },
                            { provide: core$1.NgModuleFactoryLoader, useClass: core$1.SystemJsNgModuleLoader },
                            BifDataService,
                            BifSourceUiService,
                            BifTargetUiService,
                        ],
                        exports: [
                            PushSelectorComponent,
                            PullSelectorComponent
                        ],
                        entryComponents: [
                            PushSelectorComponent,
                            PullSelectorComponent
                        ],
                    },] }
        ];
        return BifManualCreationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/CanTrackingResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CanTrackingResult = /** @class */ (function (_super) {
        __extends(CanTrackingResult, _super);
        function CanTrackingResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        CanTrackingResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.billTrackingSettings = null;
                this.voName = null;
            };
        /**
         * @return {?}
         */
        CanTrackingResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billTrackingSettings", this.billTrackingSettings);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voName", this.voName);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        CanTrackingResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.billTrackingSettings = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "billTrackingSettings");
                this.voName = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voName");
            };
        return CanTrackingResult;
    }(CanTrackingInfo));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/GetChildrenEntityDataArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetChildrenEntityDataArgs = /** @class */ (function (_super) {
        __extends(GetChildrenEntityDataArgs, _super);
        function GetChildrenEntityDataArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        GetChildrenEntityDataArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.voId = null;
                this.voMetadataId = null;
                this.suCode = null;
                this.nodeCodes = null;
                this.hierachyIdList = null;
            };
        /**
         * @return {?}
         */
        GetChildrenEntityDataArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voId", this.voId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voMetadataId", this.voMetadataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "nodeCodes", commonApi$1.BpmnModelJsonHelper.StringListToJson(this.nodeCodes));
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "hierachyIdList", commonApi$1.BpmnModelJsonHelper.StringListToJson(this.hierachyIdList));
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GetChildrenEntityDataArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.voId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voId");
                this.voMetadataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voMetadataId");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.nodeCodes = commonApi$1.BpmnModelJsonHelper.StringListFromJson(commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "nodeCodes"));
                this.hierachyIdList = commonApi$1.BpmnModelJsonHelper.StringListFromJson(commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "hierachyIdList"));
            };
        return GetChildrenEntityDataArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/DownBillInfoResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DownBillInfoResult = /** @class */ (function (_super) {
        __extends(DownBillInfoResult, _super);
        function DownBillInfoResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        DownBillInfoResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.voName = null;
            };
        /**
         * @return {?}
         */
        DownBillInfoResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voName", this.voName);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        DownBillInfoResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.voName = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voName");
            };
        return DownBillInfoResult;
    }(DownBillInfo));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/EntityDataResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var EntityDataResult = /** @class */ (function (_super) {
        __extends(EntityDataResult, _super);
        function EntityDataResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        EntityDataResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.billSchema = null;
                this.billData = null;
            };
        /**
         * @return {?}
         */
        EntityDataResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billSchema", this.billSchema);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billData", this.billData);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        EntityDataResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.billSchema = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, "billSchema", commonApi$1.BillSchema);
                this.billData = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, "billData", commonApi$1.BillData);
            };
        return EntityDataResult;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/GetEntityDataArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetEntityDataArgs = /** @class */ (function (_super) {
        __extends(GetEntityDataArgs, _super);
        function GetEntityDataArgs() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.billChildInfos = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        GetEntityDataArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.schemaId = null;
                this.dataId = null;
                this.suCode = null;
                this.voMetadataId = null;
                this.billChildInfos = [];
                this.trackingSourceType = null;
                this.curYear = null;
                this.documentTypeId = null;
            };
        /**
         * @return {?}
         */
        GetEntityDataArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "schemaId", this.schemaId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voMetadataId", this.voMetadataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "billChildInfos", this.billChildInfos);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "trackingSourceType", this.trackingSourceType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "curYear", this.curYear);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "documentTypeId", this.documentTypeId);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GetEntityDataArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.schemaId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "schemaId");
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.voMetadataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voMetadataId");
                this.billChildInfos = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "billChildInfos", BillChildInfo);
                this.trackingSourceType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "trackingSourceType");
                this.curYear = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "curYear");
                this.documentTypeId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "documentTypeId");
            };
        return GetEntityDataArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/GetMainEntityDataArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetMainEntityDataArgs = /** @class */ (function (_super) {
        __extends(GetMainEntityDataArgs, _super);
        function GetMainEntityDataArgs() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return GetMainEntityDataArgs;
    }(GetEntityDataArgs));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/UpBillInfoResult.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpBillInfoResult = /** @class */ (function (_super) {
        __extends(UpBillInfoResult, _super);
        function UpBillInfoResult() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @protected
         * @return {?}
         */
        UpBillInfoResult.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.voName = null;
            };
        /**
         * @return {?}
         */
        UpBillInfoResult.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "voName", this.voName);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        UpBillInfoResult.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.voName = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "voName");
            };
        return UpBillInfoResult;
    }(UpBillInfo));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/GetJointQueryParametersArgs.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GetJointQueryParametersArgs = /** @class */ (function (_super) {
        __extends(GetJointQueryParametersArgs, _super);
        function GetJointQueryParametersArgs() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.contents = [];
            return _this;
        }
        /**
         * @protected
         * @return {?}
         */
        GetJointQueryParametersArgs.prototype.ResetBeforeLoadFrom = /**
         * @protected
         * @return {?}
         */
            function () {
                _super.prototype.ResetBeforeLoadFrom.call(this);
                this.trackingSourceType = null;
                this.suCode = null;
                this.schemaId = null;
                this.dataId = null;
                this.contents = [];
                this.curYear = null;
            };
        /**
         * @return {?}
         */
        GetJointQueryParametersArgs.prototype.ConvertToJsonObject = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var obj = _super.prototype.ConvertToJsonObject.call(this);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "trackingSourceType", this.trackingSourceType);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "suCode", this.suCode);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "schemaId", this.schemaId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "contents", this.contents);
                commonApi$1.BpmnModelJsonHelper.SetAttributeValue(obj, "curYear", this.curYear);
                return obj;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        GetJointQueryParametersArgs.prototype.LoadFromJsonObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                _super.prototype.LoadFromJsonObject.call(this, obj);
                this.trackingSourceType = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "trackingSourceType");
                this.suCode = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "suCode");
                this.schemaId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "schemaId");
                this.dataId = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
                this.contents = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsList(obj, "contents", JointQueryParametersContent);
                this.curYear = commonApi$1.BpmnModelJsonHelper.GetAttributeValueAsString(obj, "curYear");
            };
        return GetJointQueryParametersArgs;
    }(commonApi$1.JsonConvertableImpl));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/args/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-args.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerArgs = /** @class */ (function () {
        function BillTrackerArgs() {
            this.getBillsInfoArgs = null;
            this.canTrackingResult = null;
            this.direction = null;
            this.graphOptions = null;
            this.gridOptions = null;
        }
        BillTrackerArgs.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BillTrackerArgs.ctorParameters = function () { return []; };
        return BillTrackerArgs;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-constant.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerConstant = /** @class */ (function () {
        function BillTrackerConstant() {
        }
        BillTrackerConstant.IMAGE_PATH = "/platform/runtime/common/web/@edp-bif/runtime-api/images";
        BillTrackerConstant.DEFAULT_FUNC_ID = "DefaultBillTracker";
        BillTrackerConstant.DEFAULT_APP_ID = "BillIntegrationFrameworkRT";
        BillTrackerConstant.DEFAULT_APP_ENTRANCE = "default-bill-tracker";
        BillTrackerConstant.BILL_VIEWER_FUNC_ID = "BifBillViewer";
        BillTrackerConstant.BILL_VIEWER_APP_ID = "BillIntegrationFrameworkRT";
        BillTrackerConstant.BILL_VIEWER_APP_ENTRANCE = "bif-bill-viewer";
        BillTrackerConstant.BILL_VIEWER_PARAM_CODE_CUSTOM_TAB_NAME = "__tab_name__";
        return BillTrackerConstant;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-module.config.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerModuleConfig = /** @class */ (function () {
        function BillTrackerModuleConfig() {
        }
        return BillTrackerModuleConfig;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-direction.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var BillTrackerDirection = {
        Down: "Down",
        Up: "Up",
        Both: "Both",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-graph-options.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 单据追踪图流程图配置
     */
    var /**
     * 单据追踪图流程图配置
     */ BillTrackerGraphOptions = /** @class */ (function () {
        function BillTrackerGraphOptions() {
            /**
             * 节点宽度
             */
            this.nodeWidth = 100;
            /**
             * 节点高度
             */
            this.nodeHeight = 60;
            /**
             * 上查/下查/上折/下折按钮宽度
             */
            this.overlayWidth = 10;
            /**
             * 上查/下查/上折/下折按钮高度
             */
            this.overlayHeight = 10;
            /**
             * 显示直接关联的下游单据
             */
            this.showDownBills = true;
            /**
             * 显示直接关联的上游单据
             */
            this.showUpBills = true;
        }
        return BillTrackerGraphOptions;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-grid-options.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 单据追踪数据表配置
     */
    var /**
     * 单据追踪数据表配置
     */ BillTrackerGridOptions = /** @class */ (function () {
        function BillTrackerGridOptions() {
            /**
             * 是否显示入口节点数据
             */
            this.showEntryData = true;
            /**
             * 数据区默认高度
             */
            this.defaultHeight = 180;
        }
        return BillTrackerGridOptions;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/GraphView.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GraphView = /** @class */ (function (_super) {
        __extends(GraphView, _super);
        function GraphView(graph) {
            var _this = _super.call(this, graph) || this;
            _this.gridSteps = 4;
            _this.minGridSize = 4;
            _this.gridImage = (mxClientType.IS_SVG) ? 'data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=' : BillTrackerConstant.IMAGE_PATH + '/grid.gif';
            _this.gridColor = '#e0e0e0';
            return _this;
        }
        /**
         * @param {?=} cell
         * @return {?}
         */
        GraphView.prototype.validate = /**
         * @param {?=} cell
         * @return {?}
         */
            function (cell) {
                /** @type {?} */
                var graph = ( /** @type {?} */(this.graph));
                if (graph != null && graph.container != null && mxUtilsType.hasScrollbars(graph.container)) {
                    /** @type {?} */
                    var pad = graph.getPagePadding();
                    /** @type {?} */
                    var size = graph.getPageSize();
                    /** @type {?} */
                    var tx = this.translate.x;
                    /** @type {?} */
                    var ty = this.translate.y;
                    this.translate.x = pad.x / this.scale - (this.x0 || 0) * size.width;
                    this.translate.y = pad.y / this.scale - (this.y0 || 0) * size.height;
                }
                _super.prototype.validate.call(this, cell);
            };
        /**
         * @return {?}
         */
        GraphView.prototype.getBackgroundPageBounds = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var graph = ( /** @type {?} */(this.graph));
                /** @type {?} */
                var layout = graph.getPageLayout();
                /** @type {?} */
                var page = graph.getPageSize();
                return new mxRectangleType(this.scale * (this.translate.x + layout.x * page.width), this.scale * (this.translate.y + layout.y * page.height), this.scale * layout.width * page.width, this.scale * layout.height * page.height);
            };
        return GraphView;
    }(mxGraphViewType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/shapes/BillNodeShape.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillNodeShape = /** @class */ (function (_super) {
        __extends(BillNodeShape, _super);
        function BillNodeShape(bounds, fill, stroke, strokewidth) {
            var _this = this;
            bounds = bounds ? bounds : new mxRectangleType(0, 0, 0, 0);
            fill = fill ? fill : "none";
            stroke = stroke ? stroke : "#000000";
            strokewidth = strokewidth ? strokewidth : undefined;
            _this = _super.call(this, bounds, fill, stroke, strokewidth) || this;
            return _this;
        }
        /**
         * @param {?} container
         * @return {?}
         */
        BillNodeShape.prototype.init = /**
         * @param {?} container
         * @return {?}
         */
            function (container) {
                _super.prototype.init.call(this, container);
                this.fill = "none";
                this.stroke = "#000000";
            };
        return BillNodeShape;
    }(mxRectangleShapeType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/shapes/BillAssociationLine.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillAssociationLine = /** @class */ (function (_super) {
        __extends(BillAssociationLine, _super);
        function BillAssociationLine(bounds, stroke, strokewidth) {
            return _super.call(this, bounds, stroke, strokewidth) || this;
        }
        return BillAssociationLine;
    }(mxLineType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/Events.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Events = /** @class */ (function () {
        function Events() {
        }
        Events.RESET_GRAPH_VIEW = "resetGraphView";
        Events.CLICK_FIRST_SUMMARY = "clickFirstSummary";
        Events.BILL_CELLS_ADDED_AND_MOVED = "billCellsAddedAndMoved";
        return Events;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/BillCell.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillCell = /** @class */ (function (_super) {
        __extends(BillCell, _super);
        function BillCell(billDataInfo, billInfo, entry, geometry, style) {
            var _this = _super.call(this, null, geometry, style) || this;
            _this.THUMB_SCALE = 0.6;
            _this.billDataInfo = billDataInfo;
            _this.billInfo = billInfo;
            /** @type {?} */
            var bts = new commonApi.BillTrackingSettings();
            if (billInfo && billInfo.billTrackingSettings) {
                bts.LoadFromJson(billInfo.billTrackingSettings);
            }
            _this.entry = entry;
            return _this;
            // this.value = this.billDataInfo.caption || bts.billNodeName || this.billInfo.voName || this.billDataInfo.dataId || this.billDataInfo.summary;
        }
        /**
         * @return {?}
         */
        BillCell.prototype.getCaption = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var label = null;
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                label = this.billDataInfo.caption || bts.billNodeName || this.billInfo.voName || this.billDataInfo.dataId || this.billDataInfo.summary;
                return label;
            };
        /**
         * @return {?}
         */
        BillCell.prototype.buildHtmlTooltip = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var tooltipHtml = "            <span>" + this.billDataInfo.dataId + "</span>        ";
                return tooltipHtml;
            };
        /**
         * 样式类在graph组件中定义
         * @param graph
         * @returns
         */
        /**
         * 样式类在graph组件中定义
         * @param {?} graph
         * @return {?}
         */
        BillCell.prototype.buildHtmlLabel = /**
         * 样式类在graph组件中定义
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                return this.buildHtmlLabelByDOM(graph);
            };
        /**
         * 通过操纵dom元素方式创建html
         * @param graph
         * @returns
         */
        /**
         * 通过操纵dom元素方式创建html
         * @private
         * @param {?} graph
         * @return {?}
         */
        BillCell.prototype.buildHtmlLabelByDOM = /**
         * 通过操纵dom元素方式创建html
         * @private
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                var _this = this;
                /** @type {?} */
                var scale = graph.view.scale;
                /** @type {?} */
                var state = graph.view.getState(this);
                /** @type {?} */
                var width = this.geometry.width;
                /** @type {?} */
                var height = this.geometry.height;
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var title = this.billDataInfo.caption || bts.billNodeName || this.billInfo.voName || this.billDataInfo.dataId || this.billDataInfo.summary;
                /** @type {?} */
                var isEntry = this.entry;
                // 节点框架
                /** @type {?} */
                var divNodeRoot = document.createElement("div");
                divNodeRoot.classList.add("bif-cell-node");
                divNodeRoot.style.width = width + "px";
                divNodeRoot.style.height = height + "px";
                if (isEntry) {
                    // 当前节点标识
                    /** @type {?} */
                    var divNodeCurrent = document.createElement("div");
                    divNodeRoot.appendChild(divNodeCurrent);
                    divNodeCurrent.classList.add("bif-cell-node-current");
                    /** @type {?} */
                    var spanCurrent = document.createElement("span");
                    divNodeCurrent.appendChild(spanCurrent);
                    spanCurrent.classList.add("bif-cell-node-current-text");
                    spanCurrent.innerHTML = graph && graph.localePipe && graph.localePipe.transform("currentNode") || "当前";
                }
                // 当比例小到指定值后仅显示单据名
                if (scale < this.THUMB_SCALE) {
                    // // 使用图片+标题
                    // const divNodeThumb = document.createElement("div");
                    // divNodeRoot.appendChild(divNodeThumb);
                    // divNodeThumb.classList.add("bif-cell-node-thumb");
                    // const divNodeThumbImg = document.createElement("div");
                    // divNodeThumb.appendChild(divNodeThumbImg);
                    // divNodeThumbImg.classList.add("bif-cell-node-thumb-img-container");
                    // const img = document.createElement("img");
                    // divNodeThumbImg.appendChild(img);
                    // img.classList.add("bif-cell-node-thumb-img");
                    // img.src = "/platform/runtime/common/web/@edp-bif/runtime-api/images/non-entry-bill.png";
                    // const divNodeThumbTitle = document.createElement("div");
                    // divNodeThumb.appendChild(divNodeThumbTitle);
                    // divNodeThumbTitle.classList.add("bif-cell-node-thumb-title");
                    // const divNodeThumbTitleText = document.createElement("div");
                    // divNodeThumbTitle.appendChild(divNodeThumbTitleText);
                    // divNodeThumbTitleText.classList.add("bif-cell-node-thumb-title-text");
                    // divNodeThumbTitleText.innerHTML = title;
                    // // 判断是否需添加点击事件
                    // const jqm = this.billInfo.jointQueryMode;
                    // const jqp: JointQueryParameters = JSON.parse(this.billInfo.jointQueryParameters);
                    // if ((jqm == JointQueryMode.APP && jqp.funcId) || (jqm == JointQueryMode.URL && jqp.url)) {
                    //     divNodeThumbTitleText.classList.add("bif-cell-node-title-link");
                    //     mxEvent.addListener(divNodeThumbTitleText, "click", () => {
                    //         graph.fireEvent(new mxEventObject(Events.CLICK_FIRST_SUMMARY, "cell", this));
                    //         event.stopPropagation();
                    //         return false;
                    //     });
                    // }
                    // 使用标题
                    // 节点标题
                    /** @type {?} */
                    var divNodeTitleOnly = document.createElement("div");
                    divNodeRoot.appendChild(divNodeTitleOnly);
                    divNodeTitleOnly.classList.add("bif-cell-node-title-only");
                    /** @type {?} */
                    var divNodeTitleOnlyText = document.createElement("div");
                    divNodeTitleOnly.appendChild(divNodeTitleOnlyText);
                    divNodeTitleOnlyText.classList.add("bif-cell-node-title-only-text");
                    divNodeTitleOnlyText.innerHTML = title;
                    // 判断是否需添加点击事件
                    /** @type {?} */
                    var jqm = this.billInfo.jointQueryMode;
                    /** @type {?} */
                    var jqp = JSON.parse(this.billInfo.jointQueryParameters);
                    if ((jqm == commonApi.JointQueryMode.APP && jqp.funcId) || (jqm == commonApi.JointQueryMode.URL && jqp.url)) {
                        divNodeTitleOnlyText.classList.add("bif-cell-node-title-link");
                        mxEventType.addListener(divNodeTitleOnlyText, "click", ( /**
                         * @return {?}
                         */function () {
                            graph.fireEvent(new mxEventObjectType(Events.CLICK_FIRST_SUMMARY, "cell", _this));
                            event.stopPropagation();
                            return false;
                        }));
                    }
                }
                else {
                    // 节点主内容
                    /** @type {?} */
                    var divNodeMain = document.createElement("div");
                    divNodeRoot.appendChild(divNodeMain);
                    divNodeMain.classList.add("bif-cell-node-main");
                    // 节点标题
                    /** @type {?} */
                    var divNodeTitle = document.createElement("div");
                    divNodeMain.appendChild(divNodeTitle);
                    divNodeTitle.classList.add("bif-cell-node-title");
                    /** @type {?} */
                    var divNodeTitleText = document.createElement("div");
                    divNodeTitle.appendChild(divNodeTitleText);
                    divNodeTitleText.classList.add("bif-cell-node-title-text");
                    divNodeTitleText.innerHTML = title;
                    divNodeTitleText.title = title;
                    // 节点摘要
                    /** @type {?} */
                    var divNodeSummaryList_1 = document.createElement("div");
                    divNodeMain.appendChild(divNodeSummaryList_1);
                    divNodeSummaryList_1.classList.add("bif-cell-node-summary-list");
                    // 46是标题栏高度
                    divNodeSummaryList_1.style.minHeight = (height - 46) + "px";
                    try {
                        /** @type {?} */
                        var fieldNameAndValues = commonApi$1.BpmnModelJsonHelper.FromJson(this.billDataInfo.summary, FieldNameAndValue);
                        fieldNameAndValues && fieldNameAndValues.forEach(( /**
                         * @param {?} fv
                         * @param {?} idx
                         * @return {?}
                         */function (fv, idx) {
                            /** @type {?} */
                            var divNodeSummary = document.createElement("div");
                            divNodeSummaryList_1.appendChild(divNodeSummary);
                            divNodeSummary.classList.add("bif-cell-node-summary");
                            /** @type {?} */
                            var divNodeSummaryCaption = document.createElement("div");
                            divNodeSummary.appendChild(divNodeSummaryCaption);
                            divNodeSummaryCaption.classList.add("bif-cell-node-summary-caption");
                            /** @type {?} */
                            var divNodeSummaryCaptionText = document.createElement("div");
                            divNodeSummaryCaption.appendChild(divNodeSummaryCaptionText);
                            divNodeSummaryCaptionText.classList.add("bif-cell-node-summary-caption-text");
                            divNodeSummaryCaptionText.title = fv.name;
                            divNodeSummaryCaptionText.innerHTML = fv.name;
                            /** @type {?} */
                            var divNodeSummaryValue = document.createElement("div");
                            divNodeSummary.appendChild(divNodeSummaryValue);
                            divNodeSummaryValue.classList.add("bif-cell-node-summary-value");
                            /** @type {?} */
                            var divNodeSummaryValueText = document.createElement("div");
                            divNodeSummaryValue.appendChild(divNodeSummaryValueText);
                            divNodeSummaryValueText.classList.add("bif-cell-node-summary-value-text");
                            divNodeSummaryValueText.title = fv.value;
                            divNodeSummaryValueText.innerText = fv.value;
                            if (idx == 0) {
                                // 判断是否需添加点击事件
                                /** @type {?} */
                                var jqm = _this.billInfo.jointQueryMode;
                                /** @type {?} */
                                var jqp = JSON.parse(_this.billInfo.jointQueryParameters);
                                if ((jqm == commonApi.JointQueryMode.APP && jqp.funcId) || (jqm == commonApi.JointQueryMode.URL && jqp.url)) {
                                    divNodeSummaryValueText.classList.add("bif-cell-node-title-link", "bif-cell-node-title-link-color");
                                    mxEventType.addListener(divNodeSummaryValueText, "click", ( /**
                                     * @return {?}
                                     */function () {
                                        graph.fireEvent(new mxEventObjectType(Events.CLICK_FIRST_SUMMARY, "cell", _this));
                                        event.stopPropagation();
                                        return false;
                                    }));
                                }
                            }
                        }));
                    }
                    catch (e) {
                        console.error(e);
                    }
                    // 操作按钮
                    /** @type {?} */
                    var divNodeBtnGroup_1 = document.createElement("div");
                    divNodeMain.appendChild(divNodeBtnGroup_1);
                    divNodeBtnGroup_1.classList.add("bif-cell-node-btn-group", "bif-cell-node-btn-group-control");
                    // 详情按钮
                    /** @type {?} */
                    var imgView = document.createElement("img");
                    divNodeBtnGroup_1.appendChild(imgView);
                    imgView.src = BillTrackerConstant.IMAGE_PATH + "/view.svg";
                    imgView.title = graph.localePipe.transform("viewBill");
                    imgView.classList.add("bif-cell-node-btn");
                    // 点击按钮触发选中事件
                    imgView.addEventListener("click", ( /**
                     * @return {?}
                     */function () {
                        graph.setSelectionCell(_this);
                    }));
                    // 不是当前节点时添加更多按钮
                    if (isEntry == false) {
                        // 更多按钮
                        /** @type {?} */
                        var imgMore_1 = document.createElement("img");
                        divNodeBtnGroup_1.appendChild(imgMore_1);
                        imgMore_1.src = BillTrackerConstant.IMAGE_PATH + "/more.svg";
                        imgMore_1.title = graph.localePipe.transform("more");
                        imgMore_1.classList.add("bif-cell-node-btn");
                        mxEventType.addListener(imgMore_1, mxEventType.CLICK, ( /**
                         * @param {?} evt
                         * @return {?}
                         */function (evt) {
                            /** @type {?} */
                            var offset = mxUtilsType.getOffset(imgMore_1);
                            // 移除more hover效果
                            divNodeBtnGroup_1.classList.remove("bif-cell-node-btn-group-control");
                            // 重写隐藏菜单方法
                            /** @type {?} */
                            var hideMenu = graph.ngComp.morePopupMenu.hideMenu;
                            graph.ngComp.morePopupMenu.hideMenu = ( /**
                             * @return {?}
                             */function () {
                                hideMenu.apply(this, arguments);
                                // 重新添加hover效果
                                divNodeBtnGroup_1.classList.add("bif-cell-node-btn-group-control");
                            });
                            // 弹出菜单
                            graph.ngComp.morePopupMenu.popup(offset.x, offset.y + imgMore_1.offsetHeight, _this, evt);
                            // 更新当前打开菜单对象
                            graph.ngComp.currentMenu = graph.ngComp.morePopupMenu;
                        }));
                    }
                }
                return divNodeRoot;
            };
        /**
         * 通过模板字符串方式创建html
         * @param graph
         * @returns
         */
        /**
         * 通过模板字符串方式创建html
         * @private
         * @param {?} graph
         * @return {?}
         */
        BillCell.prototype.buildHtmlLabelByTemplateText = /**
         * 通过模板字符串方式创建html
         * @private
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                /** @type {?} */
                var state = graph.view.getState(this);
                /** @type {?} */
                var width = state && state.width ? state.width : this.geometry.width;
                /** @type {?} */
                var height = state && state.height ? state.height : this.geometry.height;
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var title = this.billDataInfo.caption || bts.billNodeName || this.billInfo.voName || this.billDataInfo.dataId || this.billDataInfo.summary;
                /** @type {?} */
                var titleBackground = this.entry ? "rgba(86,160,255,0.08)" : "#FFFFFF";
                /** @type {?} */
                var summaryHtml = "";
                try {
                    /** @type {?} */
                    var fieldNameAndValues = commonApi$1.BpmnModelJsonHelper.FromJson(this.billDataInfo.summary, FieldNameAndValue);
                    fieldNameAndValues && fieldNameAndValues.forEach(( /**
                     * @param {?} fv
                     * @param {?} idx
                     * @return {?}
                     */function (fv, idx) {
                        /** @type {?} */
                        var valueText = idx == 0 ? "<a href='javascript:void(0);'>" + fv.value + "</a>" : fv.value;
                        summaryHtml += "                        <div class=\"bif-cell-node-summary\">                            <div class=\"bif-cell-node-summary-caption\">                                <div class=\"bif-cell-node-summary-caption-text\" title=\"" + fv.name + "\">" + fv.name + "</div>                            </div>                            <div class=\"bif-cell-node-summary-value\">                                <div class=\"bif-cell-node-summary-value-text\" title=\"" + fv.value + "\">" + valueText + "</div>                            </div>                        </div>                    ";
                    }));
                }
                catch (e) {
                    console.error(e);
                }
                /** @type {?} */
                var html = "            <div class=\"bif-cell-node\" style=\"width:" + width + "px;\">                <div class=\"bif-cell-node-main\" style=\"background: " + titleBackground + ";\">                    <div class=\"bif-cell-node-title\">                        <div class=\"bif-cell-node-title-text\">" + title + "</div>                    </div>                    <div class=\"bif-cell-node-summary-list\" style=\"min-height: " + (height - 30) + "px;\">                        " + summaryHtml + "                    </div>                </div>            </div>        ";
                return html;
            };
        return BillCell;
    }(mxCellType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/utils/Base64.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Base64 = /** @class */ (function () {
        function Base64() {
        }
        /**
         * @param {?} input
         * @param {?} binary
         * @return {?}
         */
        Base64.encode = /**
         * @param {?} input
         * @param {?} binary
         * @return {?}
         */
            function (input, binary) {
                binary = (binary != null) ? binary : false;
                /** @type {?} */
                var output = "";
                /** @type {?} */
                var chr1;
                /** @type {?} */
                var chr2;
                /** @type {?} */
                var chr3;
                /** @type {?} */
                var enc1;
                /** @type {?} */
                var enc2;
                /** @type {?} */
                var enc3;
                /** @type {?} */
                var enc4;
                /** @type {?} */
                var i = 0;
                if (!binary) {
                    input = Base64._utf8_encode(input);
                }
                while (i < input.length) {
                    chr1 = input.charCodeAt(i++);
                    chr2 = input.charCodeAt(i++);
                    chr3 = input.charCodeAt(i++);
                    enc1 = chr1 >> 2;
                    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
                    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
                    enc4 = chr3 & 63;
                    if (isNaN(chr2)) {
                        enc3 = enc4 = 64;
                    }
                    else if (isNaN(chr3)) {
                        enc4 = 64;
                    }
                    output = output +
                        Base64._keyStr.charAt(enc1) + Base64._keyStr.charAt(enc2) +
                        Base64._keyStr.charAt(enc3) + Base64._keyStr.charAt(enc4);
                }
                return output;
            };
        /**
         * @param {?} string
         * @return {?}
         */
        Base64._utf8_encode = /**
         * @param {?} string
         * @return {?}
         */
            function (string) {
                string = string.replace(/\r\n/g, "\n");
                /** @type {?} */
                var utftext = "";
                for (var n = 0; n < string.length; n++) {
                    /** @type {?} */
                    var c = string.charCodeAt(n);
                    if (c < 128) {
                        utftext += String.fromCharCode(c);
                    }
                    else if ((c > 127) && (c < 2048)) {
                        utftext += String.fromCharCode((c >> 6) | 192);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                    else {
                        utftext += String.fromCharCode((c >> 12) | 224);
                        utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                }
                return utftext;
            };
        /**
         * @param {?} input
         * @param {?} binary
         * @return {?}
         */
        Base64.decode = /**
         * @param {?} input
         * @param {?} binary
         * @return {?}
         */
            function (input, binary) {
                binary = (binary != null) ? binary : false;
                /** @type {?} */
                var output = "";
                /** @type {?} */
                var chr1;
                /** @type {?} */
                var chr2;
                /** @type {?} */
                var chr3;
                /** @type {?} */
                var enc1;
                /** @type {?} */
                var enc2;
                /** @type {?} */
                var enc3;
                /** @type {?} */
                var enc4;
                /** @type {?} */
                var i = 0;
                input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
                while (i < input.length) {
                    enc1 = this._keyStr.indexOf(input.charAt(i++));
                    enc2 = this._keyStr.indexOf(input.charAt(i++));
                    enc3 = this._keyStr.indexOf(input.charAt(i++));
                    enc4 = this._keyStr.indexOf(input.charAt(i++));
                    chr1 = (enc1 << 2) | (enc2 >> 4);
                    chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
                    chr3 = ((enc3 & 3) << 6) | enc4;
                    output = output + String.fromCharCode(chr1);
                    if (enc3 != 64) {
                        output = output + String.fromCharCode(chr2);
                    }
                    if (enc4 != 64) {
                        output = output + String.fromCharCode(chr3);
                    }
                }
                if (!binary) {
                    output = Base64._utf8_decode(output);
                }
                return output;
            };
        /**
         * @param {?} utftext
         * @return {?}
         */
        Base64._utf8_decode = /**
         * @param {?} utftext
         * @return {?}
         */
            function (utftext) {
                /** @type {?} */
                var string = "";
                /** @type {?} */
                var i = 0;
                /** @type {?} */
                var c = 0;
                /** @type {?} */
                var c2 = 0;
                /** @type {?} */
                var c3 = 0;
                while (i < utftext.length) {
                    c = utftext.charCodeAt(i);
                    if (c < 128) {
                        string += String.fromCharCode(c);
                        i++;
                    }
                    else if ((c > 191) && (c < 224)) {
                        c2 = utftext.charCodeAt(i + 1);
                        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                        i += 2;
                    }
                    else {
                        c2 = utftext.charCodeAt(i + 1);
                        c3 = utftext.charCodeAt(i + 2);
                        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                        i += 3;
                    }
                }
                return string;
            };
        Base64._keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        return Base64;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/VertexHandler.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VertexHandler = /** @class */ (function (_super) {
        __extends(VertexHandler, _super);
        function VertexHandler(state) {
            return _super.call(this, state) || this;
        }
        /**
         * 选中框随节点大小变化
         * @param state
         * @returns
         */
        /**
         * 选中框随节点大小变化
         * @param {?} state
         * @return {?}
         */
        VertexHandler.prototype.getSelectionBounds = /**
         * 选中框随节点大小变化
         * @param {?} state
         * @return {?}
         */
            function (state) {
                return _super.prototype.getSelectionBounds.call(this, state);
            };
        /**
         * 仅显示四个角的调整大小图片
         */
        /**
         * 仅显示四个角的调整大小图片
         * @return {?}
         */
        VertexHandler.prototype.redrawHandles = /**
         * 仅显示四个角的调整大小图片
         * @return {?}
         */
            function () {
                _super.prototype.redrawHandles.call(this);
                if (this.sizers != null && this.sizers.length > 7) {
                    this.sizers[1].node.style.display = 'none';
                    this.sizers[3].node.style.display = 'none';
                    this.sizers[4].node.style.display = 'none';
                    this.sizers[6].node.style.display = 'none';
                }
            };
        /**
         * 创建圆角矩形选中框
         * @param bounds
         * @returns
         */
        /**
         * 创建圆角矩形选中框
         * @param {?} bounds
         * @return {?}
         */
        VertexHandler.prototype.createSelectionShape = /**
         * 创建圆角矩形选中框
         * @param {?} bounds
         * @return {?}
         */
            function (bounds) {
                if (this.state.cell instanceof BillCell) {
                    /** @type {?} */
                    var shape = new mxRectangleShapeType(mxRectangleType.fromRectangle(bounds), null, this.getSelectionColor());
                    shape.strokewidth = this.getSelectionStrokeWidth();
                    shape.isDashed = this.isSelectionDashed();
                    shape.isRounded = true;
                    shape.style = shape.style || [];
                    // todo: 直接使用4°并不合理，只是视觉上看起来像，放大至足够大还是有问题
                    shape.style[mxConstantsType.STYLE_ARCSIZE] = 4 * this.state.view.scale;
                    return shape;
                }
                return _super.prototype.createSelectionShape.call(this, bounds);
            };
        return VertexHandler;
    }(mxVertexHandlerType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/Styles.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Styles = /** @class */ (function () {
        function Styles() {
        }
        Styles.STYLE_BILL_NODE_NAME = "billNode";
        Styles.STYLE_BILL_NODE_ENTRY_NAME = "billNodeEntry";
        Styles.STYLE_BILL_ASSOCIATION_NAME = "billAssociation";
        return Styles;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/Graph.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    mxCellRendererType.registerShape("billNodeShape", BillNodeShape);
    mxCellRendererType.registerShape("billAssociationLine", BillAssociationLine);
    var Graph = /** @class */ (function (_super) {
        __extends(Graph, _super);
        function Graph(container, model, renderHint, stylesheet) {
            var _this = _super.call(this, container, model, renderHint, stylesheet) || this;
            _this.background = '#ffffff';
            // this.newBTS = newBTS;
            _this.autoScroll = false;
            _this.autoExtend = true;
            _this.setCellsResizable(false);
            _this.setCellsEditable(false);
            _this.setTooltips(false);
            _this.setHtmlLabels(true);
            // 节点标签支持拖动
            _this.setVertexLabelsMovable(false);
            // 设置不可有悬空连线
            _this.setAllowDanglingEdges(false);
            // 定义内置样式
            _this.defineInnerStylesNewBTS();
            // 支持画布拖动
            _this.setPanning(true);
            _this.panningHandler.useLeftButtonForPanning = true;
            _this.container.style.cursor = 'grab';
            _this.scrollTileSize = new mxRectangleType(0, 0, 400, 400);
            _this.addListener(Events.RESET_GRAPH_VIEW, _this.resetGraphView);
            return _this;
        }
        /**
         * @return {?}
         */
        Graph.prototype.createGraphView = /**
         * @return {?}
         */
            function () {
                return new GraphView(this);
            };
        /**
         * @param {?} state
         * @return {?}
         */
        Graph.prototype.createVertexHandler = /**
         * @param {?} state
         * @return {?}
         */
            function (state) {
                return new VertexHandler(state);
            };
        /**
         * @return {?}
         */
        Graph.prototype.getPagePadding = /**
         * @return {?}
         */
            function () {
                return new mxPointType(Math.max(0, Math.round(this.container.offsetWidth - 34)), Math.max(0, Math.round(this.container.offsetHeight - 34)));
            };
        /**
         * @return {?}
         */
        Graph.prototype.getPageSize = /**
         * @return {?}
         */
            function () {
                return (this.pageVisible) ? new mxRectangleType(0, 0, this.pageFormat.width * this.pageScale, this.pageFormat.height * this.pageScale) : this.getScrollTileSize();
            };
        /**
         * @return {?}
         */
        Graph.prototype.getPageLayout = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var size = (this.pageVisible) ? this.getPageSize() : this.getScrollTileSize();
                /** @type {?} */
                var bounds = this.getGraphBounds();
                if (bounds.width == 0 || bounds.height == 0) {
                    return new mxRectangleType(0, 0, 1, 1);
                }
                else {
                    // Computes untransformed graph bounds
                    /** @type {?} */
                    var x = Math.ceil(bounds.x / this.view.scale - this.view.translate.x);
                    /** @type {?} */
                    var y = Math.ceil(bounds.y / this.view.scale - this.view.translate.y);
                    /** @type {?} */
                    var w = Math.floor(bounds.width / this.view.scale);
                    /** @type {?} */
                    var h = Math.floor(bounds.height / this.view.scale);
                    /** @type {?} */
                    var x0 = Math.floor(x / size.width);
                    /** @type {?} */
                    var y0 = Math.floor(y / size.height);
                    /** @type {?} */
                    var w0 = Math.ceil((x + w) / size.width) - x0;
                    /** @type {?} */
                    var h0 = Math.ceil((y + h) / size.height) - y0;
                    return new mxRectangleType(x0, y0, w0, h0);
                }
            };
        /**
         * @return {?}
         */
        Graph.prototype.getScrollTileSize = /**
         * @return {?}
         */
            function () {
                if (this.scrollTileSize == null) {
                    this.scrollTileSize = new mxRectangleType(0, 0, 400, 600);
                }
                return this.scrollTileSize;
            };
        /**
         * @param {?} bounds
         * @param {?} width
         * @param {?} height
         * @return {?}
         */
        Graph.prototype.getPreferredPageSize = /**
         * @param {?} bounds
         * @param {?} width
         * @param {?} height
         * @return {?}
         */
            function (bounds, width, height) {
                //scrollTileSize有值后再调用重载实现
                /** @type {?} */
                var pages = this.getPageLayout();
                /** @type {?} */
                var size = this.getPageSize();
                return new mxRectangleType(0, 0, pages.width * size.width, pages.height * size.height);
            };
        /**
         * @return {?}
         */
        Graph.prototype.sizeDidChange = /**
         * @return {?}
         */
            function () {
                if (this.container != null && mxUtilsType.hasScrollbars(this.container)) {
                    /** @type {?} */
                    var pages = this.getPageLayout();
                    /** @type {?} */
                    var pad = this.getPagePadding();
                    /** @type {?} */
                    var size = this.getPageSize();
                    // Updates the minimum graph size
                    /** @type {?} */
                    var minw = Math.ceil(2 * pad.x / this.view.scale + pages.width * size.width);
                    /** @type {?} */
                    var minh = Math.ceil(2 * pad.y / this.view.scale + pages.height * size.height);
                    /** @type {?} */
                    var min = this.minimumGraphSize;
                    // LATER: Fix flicker of scrollbar size in IE quirks mode
                    // after delayed call in window.resize event handler
                    if (min == null || min.width != minw || min.height != minh) {
                        this.minimumGraphSize = new mxRectangleType(0, 0, minw, minh);
                    }
                    // Updates auto-translate to include padding and graph size
                    /** @type {?} */
                    var dx = pad.x / this.view.scale - pages.x * size.width;
                    /** @type {?} */
                    var dy = pad.y / this.view.scale - pages.y * size.height;
                    if (!this.autoTranslate && (this.view.translate.x != dx || this.view.translate.y != dy)) {
                        this.autoTranslate = true;
                        this.view.x0 = pages.x;
                        this.view.y0 = pages.y;
                        // NOTE: THIS INVOKES THIS METHOD AGAIN. UNFORTUNATELY THERE IS NO WAY AROUND THIS SINCE THE
                        // BOUNDS ARE KNOWN AFTER THE VALIDATION AND SETTING THE TRANSLATE TRIGGERS A REVALIDATION.
                        // SHOULD MOVE TRANSLATE/SCALE TO VIEW.
                        /** @type {?} */
                        var tx = this.view.translate.x;
                        /** @type {?} */
                        var ty = this.view.translate.y;
                        this.view.setTranslate(dx, dy);
                        this.container.scrollLeft += (dx - tx) * this.view.scale;
                        this.container.scrollTop += (dy - ty) * this.view.scale;
                        this.autoTranslate = false;
                        return;
                    }
                    //super.sizeDidChange.apply(this, arguments);
                    _super.prototype.sizeDidChange.call(this);
                }
            };
        /**
         * @return {?}
         */
        Graph.prototype.resetGraphView = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var bounds = this.getGraphBounds();
                /** @type {?} */
                var dataRegionHeight = 0;
                if (this.gridOptions.showEntryData) {
                    if (typeof this.gridOptions.defaultHeight == "string") {
                        dataRegionHeight = 0;
                    }
                    else {
                        dataRegionHeight = this.gridOptions.defaultHeight;
                    }
                }
                /** @type {?} */
                var s = Math.min(this.container.clientWidth / bounds.width, (this.container.clientHeight - dataRegionHeight - 20) / bounds.height);
                // 设定最大为1倍
                s = s >= 1 ? 1 : s;
                // 设定最小为0.6倍
                s = s <= 0.6 ? 0.6 : s;
                this.zoomTo(s, true);
                bounds = this.getGraphBounds();
                /** @type {?} */
                var width = Math.max(bounds.width, this.scrollTileSize.width * this.view.scale);
                /** @type {?} */
                var height = Math.max(bounds.height, this.scrollTileSize.height * this.view.scale);
                // this.container.scrollTop = Math.floor(Math.max(0, bounds.y - Math.max(20, (this.container.clientHeight - height) / 4)));
                // this.container.scrollLeft = Math.floor(Math.max(0, bounds.x - Math.max(0, (this.container.clientWidth - width) / 2)));
                this.container.scrollTop = Math.floor(Math.max(0, bounds.y - (this.container.clientHeight - bounds.height) / 2 + 79));
                this.container.scrollLeft = Math.floor(Math.max(0, bounds.x - (this.container.clientWidth - bounds.width) / 2));
            };
        /**
         * @param {?} parent
         * @param {?} id
         * @param {?} billDataInfo
         * @param {?} billInfo
         * @param {?} entry
         * @param {?} x
         * @param {?} y
         * @param {?} width
         * @param {?} height
         * @param {?=} style
         * @param {?=} relative
         * @return {?}
         */
        Graph.prototype.insertBillCell = /**
         * @param {?} parent
         * @param {?} id
         * @param {?} billDataInfo
         * @param {?} billInfo
         * @param {?} entry
         * @param {?} x
         * @param {?} y
         * @param {?} width
         * @param {?} height
         * @param {?=} style
         * @param {?=} relative
         * @return {?}
         */
            function (parent, id, billDataInfo, billInfo, entry, x, y, width, height, style, relative) {
                /** @type {?} */
                var billCell = this.createBillCell(parent, id, billDataInfo, billInfo, entry, x, y, width, height, style, relative);
                return ( /** @type {?} */(this.addCell(billCell, parent)));
            };
        /**
         * @param {?} parent
         * @param {?} id
         * @param {?} billDataInfo
         * @param {?} billInfo
         * @param {?} entry
         * @param {?} x
         * @param {?} y
         * @param {?} width
         * @param {?} height
         * @param {?=} style
         * @param {?=} relative
         * @return {?}
         */
        Graph.prototype.createBillCell = /**
         * @param {?} parent
         * @param {?} id
         * @param {?} billDataInfo
         * @param {?} billInfo
         * @param {?} entry
         * @param {?} x
         * @param {?} y
         * @param {?} width
         * @param {?} height
         * @param {?=} style
         * @param {?=} relative
         * @return {?}
         */
            function (parent, id, billDataInfo, billInfo, entry, x, y, width, height, style, relative) {
                /** @type {?} */
                var geometry = new mxGeometryType(x, y, width, height);
                geometry.relative = (relative != null) ? relative : false;
                /** @type {?} */
                var billCell = new BillCell(billDataInfo, billInfo, entry, geometry, style);
                billCell.setId(id);
                billCell.setVertex(true);
                billCell.setConnectable(true);
                return billCell;
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        Graph.prototype.getTooltipForCell = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                if (cell instanceof BillCell) {
                    return cell.buildHtmlTooltip();
                }
                return _super.prototype.getTooltipForCell.call(this, cell);
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        Graph.prototype.getLabel = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                if (cell instanceof BillCell) {
                    // if (this.newBTS) {
                    return _super.prototype.getLabel.call(this, cell);
                    // } else {
                    //     return cell.getCaption();
                    // }
                }
                return _super.prototype.getLabel.call(this, cell);
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        Graph.prototype.convertValueToString = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                if (cell instanceof BillCell) {
                    return cell.buildHtmlLabel(this);
                }
                else {
                    return _super.prototype.convertValueToString.call(this, cell);
                }
            };
        /**
         * @private
         * @return {?}
         */
        Graph.prototype.defineInnerStylesNewBTS = /**
         * @private
         * @return {?}
         */
            function () {
                //定义单据节点样式
                /** @type {?} */
                var style = Object.assign({}, this.getStylesheet().getDefaultVertexStyle());
                style[mxConstantsType.STYLE_FILLCOLOR] = 'none';
                style[mxConstantsType.STYLE_STROKE_OPACITY] = '0';
                style[mxConstantsType.STYLE_STROKEWIDTH] = '1';
                style[mxConstantsType.STYLE_FONTCOLOR] = 'black';
                style[mxConstantsType.STYLE_FONTSIZE] = '12';
                style[mxConstantsType.STYLE_FONTSTYLE] = '1';
                style[mxConstantsType.STYLE_ROUNDED] = '1';
                style[mxConstantsType.STYLE_SPACING] = 8;
                style[mxConstantsType.STYLE_WHITE_SPACE] = 'wrap';
                // 图片拉伸
                style[mxConstantsType.STYLE_IMAGE_ASPECT] = '0';
                //节点标签显示于节点下方
                style[mxConstantsType.STYLE_PERIMETER] = mxPerimeterType.RectanglePerimeter;
                style[mxConstantsType.STYLE_ALIGN] = mxConstantsType.ALIGN_CENTER;
                style[mxConstantsType.STYLE_VERTICAL_ALIGN] = mxConstantsType.ALIGN_MIDDLE;
                this.getStylesheet().putCellStyle(Styles.STYLE_BILL_NODE_NAME, style);
                //定义开始查询节点样式
                style = Object.assign({}, style);
                this.getStylesheet().putCellStyle(Styles.STYLE_BILL_NODE_ENTRY_NAME, style);
                //定义单据关联连线样式
                style = Object.assign({}, this.getStylesheet().getDefaultEdgeStyle());
                style[mxConstantsType.STYLE_SHAPE] = mxConstantsType.SHAPE_CONNECTOR;
                style[mxConstantsType.STYLE_STROKECOLOR] = '#2A87FF';
                style[mxConstantsType.STYLE_ENDARROW] = mxConstantsType.ARROW_CLASSIC;
                style[mxConstantsType.STYLE_VERTICAL_ALIGN] = mxConstantsType.ALIGN_MIDDLE;
                style[mxConstantsType.STYLE_ALIGN] = mxConstantsType.ALIGN_CENTER;
                style[mxConstantsType.STYLE_EDGE] = mxConstantsType.EDGESTYLE_ELBOW;
                style[mxConstantsType.STYLE_ELBOW] = mxConstantsType.ELBOW_HORIZONTAL;
                style[mxConstantsType.STYLE_STROKEWIDTH] = 1.8;
                style[mxConstantsType.STYLE_DASHED] = 1;
                style[mxConstantsType.STYLE_OPACITY] = 80;
                this.getStylesheet().putCellStyle(Styles.STYLE_BILL_ASSOCIATION_NAME, style);
            };
        /**
         * @param {?} cell
         * @param {?} evt
         * @return {?}
         */
        Graph.prototype.selectCellForEvent = /**
         * @param {?} cell
         * @param {?} evt
         * @return {?}
         */
            function (cell, evt) {
                _super.prototype.selectCellForEvent.call(this, cell, evt);
            };
        /**
         * @return {?}
         */
        Graph.prototype.createCellRenderer = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var render = _super.prototype.createCellRenderer.call(this);
                // 重写label事件判断方法，解决点击节点操作按钮时如果出现loading则按钮消失的问题
                // note：此改动会使点击节点操作按钮时不触发节点选中事件
                // note: 此改动后，点击节点摘要超链接的监听器中主动触发选中事件
                /** @type {?} */
                var oldIsLabelEvent = render.isLabelEvent;
                render.isLabelEvent = ( /**
                 * @param {?} state
                 * @param {?} evt
                 * @return {?}
                 */function (state, evt) {
                    if (state.cell instanceof BillCell) {
                        if (evt && evt.target
                            && (( /** @type {?} */(evt.target))).classList
                            && (( /** @type {?} */(evt.target))).classList.value
                            && ((( /** @type {?} */(evt.target))).classList.value.includes("bif-cell-node-title-link bif-cell-node-title-link-color")
                                || (( /** @type {?} */(evt.target))).classList.value.includes("bif-cell-node-btn"))) {
                            return false;
                        }
                        else {
                            return oldIsLabelEvent.apply(render, [state, evt]);
                        }
                    }
                    return oldIsLabelEvent.apply(render, [state, evt]);
                });
                return render;
            };
        /**
         * @param {?} w
         * @param {?} h
         * @param {?} data
         * @return {?}
         */
        Graph.createSvgImage = /**
         * @param {?} w
         * @param {?} h
         * @param {?} data
         * @return {?}
         */
            function (w, h, data) {
                /** @type {?} */
                var tmp = unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">' +
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + w + 'px" height="' + h + 'px" ' +
                    'version="1.1">' + data + '</svg>'));
                return new mxImageType('data:image/svg+xml;base64,' + ((window.btoa) ? btoa(tmp) : Base64.encode(tmp, true)), w, h);
            };
        /**
         * @return {?}
         */
        Graph.prototype.destroy = /**
         * @return {?}
         */
            function () {
                _super.prototype.destroy.call(this);
                this.selectEventEmitter = null;
            };
        // newBTS: boolean = false;
        Graph.handleFill = '#29b6f2';
        return Graph;
    }(mxGraphType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/shapes/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/CompactTreeLayout.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CompactTreeLayout = /** @class */ (function (_super) {
        __extends(CompactTreeLayout, _super);
        function CompactTreeLayout(graph, horizontal, invert) {
            var _this = _super.call(this, graph, horizontal, invert) || this;
            _this.useBoundingBox = false;
            return _this;
        }
        /**
         * @param {?} cell
         * @param {?} parent
         * @return {?}
         */
        CompactTreeLayout.prototype.dfs = /**
         * @param {?} cell
         * @param {?} parent
         * @return {?}
         */
            function (cell, parent) {
                /** @type {?} */
                var id = mxCellPathType.create(cell);
                /** @type {?} */
                var node = null;
                if (cell != null && this.visited[id] == null && !this.isVertexIgnored(cell)) {
                    this.visited[id] = cell;
                    node = this.createNode(cell);
                    /** @type {?} */
                    var model = this.graph.getModel();
                    /** @type {?} */
                    var prev = null;
                    /** @type {?} */
                    var out = this.graph.getEdges(cell, parent, this.invert, !this.invert, false, true);
                    /** @type {?} */
                    var view = this.graph.getView();
                    if (this.sortEdges) {
                        this.sortOutgoingEdges(cell, out);
                    }
                    for (var i = 0; i < out.length; i++) {
                        /** @type {?} */
                        var edge = out[i];
                        if (!this.isEdgeIgnored(edge)) {
                            // Resets the points on the traversed edge
                            if (this.resetEdges) {
                                this.setEdgePoints(edge, null);
                            }
                            if (this.edgeRouting) {
                                this.setEdgeStyleEnabled(edge, false);
                                this.setEdgePoints(edge, null);
                            }
                            // Checks if terminal in same swimlane
                            /** @type {?} */
                            var state = view.getState(edge);
                            /** @type {?} */
                            var target = (state != null) ? state.getVisibleTerminal(this.invert) : view.getVisibleTerminal(edge, this.invert);
                            /** @type {?} */
                            var tmp = this.dfs(target, parent);
                            if (tmp != null && model.getGeometry(target) != null) {
                                if (prev == null) {
                                    node.child = tmp;
                                }
                                else {
                                    prev.next = tmp;
                                }
                                prev = tmp;
                            }
                        }
                    }
                }
                return node;
            };
        /**
         * @param {?} target
         * @param {?} edges
         * @return {?}
         */
        CompactTreeLayout.prototype.sortIngoingEdges = /**
         * @param {?} target
         * @param {?} edges
         * @return {?}
         */
            function (target, edges) {
                /** @type {?} */
                var lookup = new mxDictionaryType();
                edges.sort(( /**
                 * @param {?} e1
                 * @param {?} e2
                 * @return {?}
                 */function (e1, e2) {
                    /** @type {?} */
                    var start1 = e1.getTerminal(e1.getTerminal(true) == target);
                    // let end1 = e1.getTerminal(e1.getTerminal(true) == target);
                    /** @type {?} */
                    var p1 = lookup.get(start1);
                    if (p1 == null) {
                        p1 = mxCellPathType.create(start1).split(mxCellPathType.PATH_SEPARATOR);
                        lookup.put(start1, p1);
                    }
                    /** @type {?} */
                    var start2 = e2.getTerminal(e2.getTerminal(true) == target);
                    /** @type {?} */
                    var p2 = lookup.get(start2);
                    if (p2 == null) {
                        p2 = mxCellPathType.create(start2).split(mxCellPathType.PATH_SEPARATOR);
                        lookup.put(start2, p2);
                    }
                    return mxCellPathType.compare(p1, p2);
                }));
            };
        /**
         * @param {?} parent
         * @param {?} root
         * @return {?}
         */
        CompactTreeLayout.prototype.execute = /**
         * @param {?} parent
         * @param {?} root
         * @return {?}
         */
            function (parent, root) {
                this.parent = parent;
                /** @type {?} */
                var model = this.graph.getModel();
                if (root == null) {
                    // Takes the parent as the root if it has outgoing edges
                    if (this.graph.getEdges(parent, model.getParent(parent), this.invert, !this.invert, false).length > 0) {
                        this.root = parent;
                    }
                    // Tries to find a suitable root in the parent's
                    // children
                    else {
                        /** @type {?} */
                        var roots = this.graph.findTreeRoots(parent, true, this.invert);
                        if (roots.length > 0) {
                            for (var i = 0; i < roots.length; i++) {
                                if (!this.isVertexIgnored(roots[i]) &&
                                    this.graph.getEdges(roots[i], null, this.invert, !this.invert, false).length > 0) {
                                    this.root = roots[i];
                                    break;
                                }
                            }
                        }
                    }
                }
                else {
                    this.root = root;
                }
                if (this.root != null) {
                    if (this.resizeParent) {
                        this.parentsChanged = new Object();
                    }
                    else {
                        this.parentsChanged = null;
                    }
                    //  Maintaining parent location
                    this.parentX = null;
                    this.parentY = null;
                    if (parent != this.root && model.isVertex(parent) != null && this.maintainParentLocation) {
                        /** @type {?} */
                        var geo = this.graph.getCellGeometry(parent);
                        if (geo != null) {
                            this.parentX = geo.x;
                            this.parentY = geo.y;
                        }
                    }
                    model.beginUpdate();
                    try {
                        this.visited = {};
                        this.node = this.dfs(this.root, parent);
                        if (this.alignRanks) {
                            this.maxRankHeight = [];
                            this.findRankHeights(this.node, 0);
                            this.setCellHeights(this.node, 0);
                        }
                        if (this.node != null) {
                            this.layout(this.node);
                            /** @type {?} */
                            var x0 = this.graph.gridSize;
                            /** @type {?} */
                            var y0 = x0;
                            if (!this.moveTree) {
                                /** @type {?} */
                                var g = this.getVertexBounds(this.root);
                                if (g != null) {
                                    x0 = g.x;
                                    y0 = g.y;
                                }
                            }
                            /** @type {?} */
                            var bounds = null;
                            if (this.isHorizontal()) {
                                bounds = this.horizontalLayout(this.node, x0, y0);
                            }
                            else {
                                bounds = this.verticalLayout(this.node, null, x0, y0);
                            }
                            if (bounds != null) {
                                /** @type {?} */
                                var dx = 0;
                                /** @type {?} */
                                var dy = 0;
                                // if (bounds.x < 0) {
                                //     dx = Math.abs(x0 - bounds.x);
                                // }
                                // if (bounds.y < 0) {
                                //     dy = Math.abs(y0 - bounds.y);
                                // }
                                if (bounds.x > 0) {
                                    dx = -1 * Math.abs(x0 - bounds.x);
                                }
                                if (bounds.y > 0) {
                                    dy = -1 * Math.abs(y0 - bounds.y);
                                }
                                if (dx != 0 || dy != 0) {
                                    this.moveNode(this.node, dx, dy);
                                }
                                if (this.resizeParent) {
                                    this.adjustParents();
                                }
                                if (this.edgeRouting) {
                                    // Iterate through all edges setting their positions
                                    this.localEdgeProcessing(this.node);
                                }
                            }
                            // Maintaining parent location
                            if (this.parentX != null && this.parentY != null) {
                                /** @type {?} */
                                var geo = this.graph.getCellGeometry(parent);
                                if (geo != null) {
                                    geo = geo.clone();
                                    geo.x = this.parentX;
                                    geo.y = this.parentY;
                                    model.setGeometry(parent, geo);
                                }
                            }
                        }
                    }
                    finally {
                        model.endUpdate();
                    }
                }
            };
        /**
         * @param {?} node
         * @param {?} x0
         * @param {?} y0
         * @param {?=} bounds
         * @return {?}
         */
        CompactTreeLayout.prototype.horizontalLayout = /**
         * @param {?} node
         * @param {?} x0
         * @param {?} y0
         * @param {?=} bounds
         * @return {?}
         */
            function (node, x0, y0, bounds) {
                node.x += x0 + node.offsetX;
                node.y += y0 + node.offsetY;
                bounds = this.apply(node, bounds);
                /** @type {?} */
                var child = node.child;
                if (child != null) {
                    bounds = this.horizontalLayout(child, node.x, node.y, bounds);
                    /** @type {?} */
                    var siblingOffset = node.y + child.offsetY;
                    /** @type {?} */
                    var s = child.next;
                    while (s != null) {
                        bounds = this.horizontalLayout(s, node.x + child.offsetX, siblingOffset, bounds);
                        siblingOffset += s.offsetY;
                        s = s.next;
                    }
                }
                return bounds;
            };
        return CompactTreeLayout;
    }(mxCompactTreeLayoutType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/RevertCompactTreeLayout.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var RevertCompactTreeLayout = /** @class */ (function (_super) {
        __extends(RevertCompactTreeLayout, _super);
        function RevertCompactTreeLayout(graph, horizontal, invert) {
            var _this = _super.call(this, graph, horizontal, invert) || this;
            _this.useBoundingBox = false;
            return _this;
        }
        /**
         * @param {?} cell
         * @param {?} parent
         * @return {?}
         */
        RevertCompactTreeLayout.prototype.dfs = /**
         * @param {?} cell
         * @param {?} parent
         * @return {?}
         */
            function (cell, parent) {
                /** @type {?} */
                var id = mxCellPathType.create(cell);
                /** @type {?} */
                var node = null;
                if (cell != null && this.visited[id] == null && !this.isVertexIgnored(cell)) {
                    this.visited[id] = cell;
                    node = this.createNode(cell);
                    /** @type {?} */
                    var model = this.graph.getModel();
                    /** @type {?} */
                    var prev = null;
                    // let out = this.graph.getEdges(cell, parent, this.invert, !this.invert, false, true);
                    /** @type {?} */
                    var ins = this.graph.getEdges(cell, parent, !this.invert, this.invert, false, true);
                    /** @type {?} */
                    var view = this.graph.getView();
                    if (this.sortEdges) {
                        // this.sortOutgoingEdges(cell, out);
                        this.sortIngoingEdges(cell, ins);
                    }
                    for (var i = 0; i < ins.length; i++) {
                        /** @type {?} */
                        var edge = ins[i];
                        if (!this.isEdgeIgnored(edge)) {
                            // Resets the points on the traversed edge
                            if (this.resetEdges) {
                                this.setEdgePoints(edge, null);
                            }
                            if (this.edgeRouting) {
                                this.setEdgeStyleEnabled(edge, false);
                                this.setEdgePoints(edge, null);
                            }
                            // Checks if terminal in same swimlane
                            /** @type {?} */
                            var state = view.getState(edge);
                            // let target = (state != null) ? state.getVisibleTerminal(this.invert) : view.getVisibleTerminal(edge, this.invert);
                            /** @type {?} */
                            var source = (state != null) ? state.getVisibleTerminal(!this.invert) : view.getVisibleTerminal(edge, !this.invert);
                            /** @type {?} */
                            var tmp = this.dfs(source, parent);
                            if (tmp != null && model.getGeometry(source) != null) {
                                if (prev == null) {
                                    node.child = tmp;
                                }
                                else {
                                    prev.next = tmp;
                                }
                                prev = tmp;
                            }
                        }
                    }
                }
                return node;
            };
        /**
         * @param {?} target
         * @param {?} edges
         * @return {?}
         */
        RevertCompactTreeLayout.prototype.sortIngoingEdges = /**
         * @param {?} target
         * @param {?} edges
         * @return {?}
         */
            function (target, edges) {
                /** @type {?} */
                var lookup = new mxDictionaryType();
                edges.sort(( /**
                 * @param {?} e1
                 * @param {?} e2
                 * @return {?}
                 */function (e1, e2) {
                    /** @type {?} */
                    var start1 = e1.getTerminal(e1.getTerminal(true) == target);
                    // let end1 = e1.getTerminal(e1.getTerminal(true) == target);
                    /** @type {?} */
                    var p1 = lookup.get(start1);
                    if (p1 == null) {
                        p1 = mxCellPathType.create(start1).split(mxCellPathType.PATH_SEPARATOR);
                        lookup.put(start1, p1);
                    }
                    /** @type {?} */
                    var start2 = e2.getTerminal(e2.getTerminal(true) == target);
                    /** @type {?} */
                    var p2 = lookup.get(start2);
                    if (p2 == null) {
                        p2 = mxCellPathType.create(start2).split(mxCellPathType.PATH_SEPARATOR);
                        lookup.put(start2, p2);
                    }
                    return mxCellPathType.compare(p1, p2);
                }));
            };
        /**
         * @param {?} parent
         * @param {?} dest
         * @return {?}
         */
        RevertCompactTreeLayout.prototype.execute = /**
         * @param {?} parent
         * @param {?} dest
         * @return {?}
         */
            function (parent, dest) {
                this.parent = parent;
                /** @type {?} */
                var model = this.graph.getModel();
                if (dest == null) {
                    // Takes the parent as the root if it has outgoing edges
                    if (this.graph.getEdges(parent, model.getParent(parent), !this.invert, this.invert, false).length > 0) {
                        this.root = parent;
                    }
                    // Tries to find a suitable root in the parent's
                    // children
                    else {
                        /** @type {?} */
                        var dests = this.graph.findTreeRoots(parent, true, true);
                        if (dests.length > 0) {
                            for (var i = 0; i < dests.length; i++) {
                                if (!this.isVertexIgnored(dests[i]) &&
                                    this.graph.getEdges(dests[i], null, !this.invert, this.invert, false).length > 0) {
                                    this.root = dests[i];
                                    break;
                                }
                            }
                        }
                    }
                }
                else {
                    this.root = dest;
                }
                if (this.root != null) {
                    if (this.resizeParent) {
                        this.parentsChanged = new Object();
                    }
                    else {
                        this.parentsChanged = null;
                    }
                    //  Maintaining parent location
                    this.parentX = null;
                    this.parentY = null;
                    if (parent != this.root && model.isVertex(parent) != null && this.maintainParentLocation) {
                        /** @type {?} */
                        var geo = this.graph.getCellGeometry(parent);
                        if (geo != null) {
                            this.parentX = geo.x;
                            this.parentY = geo.y;
                        }
                    }
                    model.beginUpdate();
                    try {
                        this.visited = {};
                        this.node = this.dfs(this.root, parent);
                        if (this.alignRanks) {
                            this.maxRankHeight = [];
                            this.findRankHeights(this.node, 0);
                            this.setCellHeights(this.node, 0);
                        }
                        if (this.node != null) {
                            this.layout(this.node);
                            /** @type {?} */
                            var x0 = this.graph.gridSize;
                            /** @type {?} */
                            var y0 = x0;
                            if (!this.moveTree) {
                                /** @type {?} */
                                var g = this.getVertexBounds(this.root);
                                if (g != null) {
                                    x0 = g.x;
                                    y0 = g.y;
                                }
                            }
                            /** @type {?} */
                            var bounds = null;
                            if (this.isHorizontal()) {
                                bounds = this.horizontalLayout(this.node, -x0, y0);
                            }
                            else {
                                bounds = this.verticalLayout(this.node, null, x0, y0);
                            }
                            if (bounds != null) {
                                /** @type {?} */
                                var dx = 0;
                                /** @type {?} */
                                var dy = 0;
                                if (bounds.x > 0) {
                                    dx = -1 * Math.abs(x0 - bounds.x);
                                }
                                if (bounds.y > 0) {
                                    dy = -1 * Math.abs(y0 - bounds.y);
                                }
                                if (dx != 0 || dy != 0) {
                                    this.moveNode(this.node, dx, dy);
                                }
                                if (this.resizeParent) {
                                    this.adjustParents();
                                }
                                if (this.edgeRouting) {
                                    // Iterate through all edges setting their positions
                                    this.localEdgeProcessing(this.node);
                                }
                            }
                            // Maintaining parent location
                            if (this.parentX != null && this.parentY != null) {
                                /** @type {?} */
                                var geo = this.graph.getCellGeometry(parent);
                                if (geo != null) {
                                    geo = geo.clone();
                                    geo.x = this.parentX;
                                    geo.y = this.parentY;
                                    model.setGeometry(parent, geo);
                                }
                            }
                        }
                    }
                    finally {
                        model.endUpdate();
                    }
                }
            };
        /**
         * @param {?} node
         * @param {?} x0
         * @param {?} y0
         * @param {?=} bounds
         * @return {?}
         */
        RevertCompactTreeLayout.prototype.horizontalLayout = /**
         * @param {?} node
         * @param {?} x0
         * @param {?} y0
         * @param {?=} bounds
         * @return {?}
         */
            function (node, x0, y0, bounds) {
                node.x += x0 - node.offsetX;
                node.y += y0 + node.offsetY;
                bounds = this.apply(node, bounds);
                /** @type {?} */
                var child = node.child;
                if (child != null) {
                    bounds = this.horizontalLayout(child, node.x, node.y, bounds);
                    /** @type {?} */
                    var siblingOffset = node.y + child.offsetY;
                    /** @type {?} */
                    var s = child.next;
                    while (s != null) {
                        bounds = this.horizontalLayout(s, node.x - child.offsetX, siblingOffset, bounds);
                        siblingOffset += s.offsetY;
                        s = s.next;
                    }
                }
                return bounds;
            };
        return RevertCompactTreeLayout;
    }(mxCompactTreeLayoutType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/CellOverlayState.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var CellOverlayState = {
        Search: "Search",
        Fold: "Fold",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/CellOverlay.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CellOverlay = /** @class */ (function (_super) {
        __extends(CellOverlay, _super);
        function CellOverlay(image, tooltip, align, verticalAlign, offset, cursor, state) {
            var _this = _super.call(this, image, tooltip, align, verticalAlign, offset, cursor) || this;
            _this.state = state || CellOverlayState.Search;
            return _this;
        }
        return CellOverlay;
    }(mxCellOverlayType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/Outline.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Outline = /** @class */ (function (_super) {
        __extends(Outline, _super);
        function Outline(source, container) {
            return _super.call(this, source, container) || this;
        }
        /**
         * @param {?} container
         * @return {?}
         */
        Outline.prototype.createGraph = /**
         * @param {?} container
         * @return {?}
         */
            function (container) {
                /** @type {?} */
                var graph = new mxGraphType(container, this.source.getModel(), this.graphRenderHint);
                graph.foldingEnabled = false;
                graph.autoScroll = false;
                // 深拷贝并扩展source的stylesheet
                this.extendStyleSheets(graph, this.source);
                return graph;
            };
        /**
         * 深拷贝并扩展source的stylesheet
         * 默认设定样式节点无填充色，在缩略图中添加填充色
         */
        /**
         * 深拷贝并扩展source的stylesheet
         * 默认设定样式节点无填充色，在缩略图中添加填充色
         * @param {?} graph
         * @param {?} source
         * @return {?}
         */
        Outline.prototype.extendStyleSheets = /**
         * 深拷贝并扩展source的stylesheet
         * 默认设定样式节点无填充色，在缩略图中添加填充色
         * @param {?} graph
         * @param {?} source
         * @return {?}
         */
            function (graph, source) {
                /** @type {?} */
                var style = Object.assign({}, source.getStylesheet().getCellStyle(Styles.STYLE_BILL_NODE_NAME, source.getStylesheet().getDefaultVertexStyle()));
                style[mxConstantsType.STYLE_FILLCOLOR] = '#2A87FF';
                graph.getStylesheet().putCellStyle(Styles.STYLE_BILL_NODE_NAME, style);
                style = Object.assign({}, source.getStylesheet().getCellStyle(Styles.STYLE_BILL_NODE_ENTRY_NAME, source.getStylesheet().getDefaultVertexStyle()));
                style[mxConstantsType.STYLE_FILLCOLOR] = '#F5A144';
                graph.getStylesheet().putCellStyle(Styles.STYLE_BILL_NODE_ENTRY_NAME, style);
                style = Object.assign({}, source.getStylesheet().getCellStyle(Styles.STYLE_BILL_ASSOCIATION_NAME, source.getStylesheet().getDefaultEdgeStyle()));
                graph.getStylesheet().putCellStyle(Styles.STYLE_BILL_ASSOCIATION_NAME, style);
            };
        return Outline;
    }(mxOutlineType));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/mxgraph-ext/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/index.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/services/bill-tracker-data.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerDataService = /** @class */ (function () {
        function BillTrackerDataService(httpService, httpClient) {
            this.httpService = httpService;
            this.httpClient = httpClient;
            this.baseUrl = "/api/runtime/aif/v1.0/billtracking";
            this.canTrackingUrl = this.baseUrl + "/cantracking";
            this.canTrackingMethod = "POST";
            this.getDownBillsInfoUrl = this.baseUrl + "/getdownbillsinfo";
            this.getDownBillsInfoMethod = "POST";
            this.getUpBillsInfoUrl = this.baseUrl + "/getupbillsinfo";
            this.getUpBillsInfoMethod = "POST";
            this.getEntityDataUrl = this.baseUrl + "/getentitydata";
            this.getEntityDataMethod = "POST";
            this.jointQueryParserUrl = "/api/runtime/aif/v1.0/jointquery";
            this.jointQueryParserMethod = "POST";
        }
        /**
         * @param {?} args
         * @return {?}
         */
        BillTrackerDataService.prototype.getJointQueryParameters = /**
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var body = args.ConvertToJson();
                /** @type {?} */
                var opt = this.httpService.setHeader({ body: body });
                return this.httpService.request(this.jointQueryParserMethod, this.jointQueryParserUrl, opt).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var obj = res;
                    /** @type {?} */
                    var results = ( /** @type {?} */(commonApi$1.BpmnModelJsonHelper.FromJson(obj.value, JointQueryParameterResult)));
                    return rxjs.of(results);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * @param {?} args
         * @return {?}
         */
        BillTrackerDataService.prototype.canTracking = /**
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
                return this.httpService.request(this.canTrackingMethod, this.canTrackingUrl, opt).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var result = new CanTrackingResult();
                    result.LoadFromJson(res);
                    return rxjs.of(result);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * @param {?} args
         * @return {?}
         */
        BillTrackerDataService.prototype.getDownBillsInfo = /**
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
                return this.httpService.request(this.getDownBillsInfoMethod, this.getDownBillsInfoUrl, opt).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var result = commonApi$1.BpmnModelJsonHelper.FromJson(res, DownBillInfoResult);
                    return rxjs.of(result);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * @param {?} args
         * @return {?}
         */
        BillTrackerDataService.prototype.getUpBillsInfo = /**
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
                return this.httpService.request(this.getUpBillsInfoMethod, this.getUpBillsInfoUrl, opt).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var result = commonApi$1.BpmnModelJsonHelper.FromJson(res, UpBillInfoResult);
                    return rxjs.of(result);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * @param {?} args
         * @return {?}
         */
        BillTrackerDataService.prototype.getEntityData = /**
         * @param {?} args
         * @return {?}
         */
            function (args) {
                /** @type {?} */
                var opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
                return this.httpService.request(this.getEntityDataMethod, this.getEntityDataUrl, opt).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var result = new EntityDataResult();
                    result.LoadFromJson(res);
                    return rxjs.of(result);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    try {
                        if (typeof err.error == "string") {
                            err.error = JSON.parse(err.error);
                        }
                    }
                    catch (e) {
                    }
                    throw err;
                })));
            };
        /**
         * @param {?} canTrackingResult
         * @return {?}
         */
        BillTrackerDataService.prototype.buildEntryBillInfo = /**
         * @param {?} canTrackingResult
         * @return {?}
         */
            function (canTrackingResult) {
                /** @type {?} */
                var info = new DownBillInfoResult();
                info.schemaId = canTrackingResult.schemaId;
                info.suCode = canTrackingResult.suCode;
                info.voName = canTrackingResult.voName;
                info.billTrackingSettings = canTrackingResult.billTrackingSettings;
                info.bizKind = canTrackingResult.bizKind;
                info.bizType = canTrackingResult.bizType;
                info.jointQueryMode = canTrackingResult.jointQueryMode;
                info.jointQueryParameters = canTrackingResult.jointQueryParameters;
                info.trackingSourceType = canTrackingResult.trackingSourceType;
                /** @type {?} */
                var dataInfo = new BillDataInfo();
                dataInfo.caption = canTrackingResult.caption;
                dataInfo.dataId = canTrackingResult.dataId;
                dataInfo.summary = canTrackingResult.summary;
                dataInfo.trackingMappingAssociations = [];
                dataInfo.billChildInfos = canTrackingResult.billChildInfos;
                dataInfo.curYear = canTrackingResult.curYear;
                info.billDataInfos = [dataInfo];
                info.documentTypeId = canTrackingResult.documentTypeId;
                return info;
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        BillTrackerDataService.prototype.buildGetBillsInfoArgs = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                /** @type {?} */
                var args = new GetBillsInfoArgs();
                args.billDataId = cell.billDataInfo.dataId;
                args.documentTypeId = cell.billInfo.documentTypeId;
                args.bizKind = cell.billInfo.bizKind;
                args.bizType = cell.billInfo.bizType;
                args.billChildInfos = cell.billDataInfo.billChildInfos;
                args.curYear = cell.billDataInfo.curYear;
                return args;
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        BillTrackerDataService.prototype.buildGetUpBillsInfoArgs = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                /** @type {?} */
                var args = new GetUpBillsInfoArgs();
                args.LoadFromJsonObject(this.buildGetBillsInfoArgs(cell).ConvertToJsonObject());
                return args;
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        BillTrackerDataService.prototype.buildGetDownBillsInfoArgs = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                /** @type {?} */
                var args = new GetDownBillsInfoArgs();
                args.LoadFromJsonObject(this.buildGetBillsInfoArgs(cell).ConvertToJsonObject());
                return args;
            };
        /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
        BillTrackerDataService.prototype.buildGetMainEntityDataArgs = /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
            function (billInfo, billDataInfo) {
                /** @type {?} */
                var args = new GetMainEntityDataArgs();
                args.dataId = billDataInfo.dataId;
                args.suCode = billInfo.suCode;
                args.schemaId = billInfo.schemaId;
                args.trackingSourceType = billInfo.trackingSourceType;
                args.billChildInfos = billDataInfo.billChildInfos;
                args.curYear = billDataInfo.curYear;
                args.documentTypeId = billInfo.documentTypeId;
                return args;
            };
        /**
         * @param {?} jointQueryParameters
         * @return {?}
         */
        BillTrackerDataService.prototype.hasDynamicParams = /**
         * @param {?} jointQueryParameters
         * @return {?}
         */
            function (jointQueryParameters) {
                if (!jointQueryParameters.params) {
                    return false;
                }
                // 添加自定义参数
                if (Array.isArray(jointQueryParameters.params)) {
                    return jointQueryParameters.params.find(( /**
                     * @param {?} p
                     * @return {?}
                     */function (p) { return p.type != commonApi.JointQueryParameterType.Constant; })) != null;
                }
                else {
                    return false;
                }
            };
        /**
         * 构造联查参数解析器参数
         * @param jointQueryParameters
         * @param billInfo
         * @param billDataInfo
         * @returns
         */
        /**
         * 构造联查参数解析器参数
         * @param {?} jointQueryParameters
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
        BillTrackerDataService.prototype.buildGetJointQueryParametersArgs = /**
         * 构造联查参数解析器参数
         * @param {?} jointQueryParameters
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
            function (jointQueryParameters, billInfo, billDataInfo) {
                /** @type {?} */
                var args = new GetJointQueryParametersArgs();
                args.dataId = billDataInfo.dataId;
                args.suCode = billInfo.suCode;
                args.schemaId = billInfo.schemaId;
                args.trackingSourceType = billInfo.trackingSourceType;
                args.curYear = billDataInfo.curYear;
                args.contents = [];
                if (Array.isArray(jointQueryParameters.params)) {
                    jointQueryParameters.params.forEach(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        if (it.type == commonApi.JointQueryParameterType.Constant) {
                            return;
                        }
                        /** @type {?} */
                        var jointQueryParametersContent = new JointQueryParametersContent();
                        if (it.type == commonApi.JointQueryParameterType.Field) {
                            jointQueryParametersContent.jointQueryParameterMode = JointQueryParameterMode.FIELD;
                            /** @type {?} */
                            var content = new FieldJointQueryParameterContent();
                            content.parameterCode = it.code;
                            content.fieldContent = it.value;
                            jointQueryParametersContent.content = content.ConvertToJson();
                        }
                        else if (it.type == commonApi.JointQueryParameterType.Expression) {
                            jointQueryParametersContent.jointQueryParameterMode = JointQueryParameterMode.EXPRESSION;
                            /** @type {?} */
                            var content = new ExpressionJointQueryParameterContent();
                            content.parameterCode = it.code;
                            content.expressionContent = it.value;
                            jointQueryParametersContent.content = content.ConvertToJson();
                        }
                        args.contents.push(jointQueryParametersContent);
                    }));
                }
                return args;
            };
        BillTrackerDataService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BillTrackerDataService.ctorParameters = function () {
            return [
                { type: cafCommon.HttpService },
                { type: http.HttpClient }
            ];
        };
        return BillTrackerDataService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/services/bill-tracker-data-info.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerDataInfoService = /** @class */ (function () {
        function BillTrackerDataInfoService() {
        }
        /**
         * 判断BillTrackingSettings是旧版还是新版
         * @param bts
         * @returns
         */
        /**
         * 判断BillTrackingSettings是旧版还是新版
         * @param {?} bts
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.isNewBTS = /**
         * 判断BillTrackingSettings是旧版还是新版
         * @param {?} bts
         * @return {?}
         */
            function (bts) {
                if (typeof bts == "string") {
                    /** @type {?} */
                    var temp = new commonApi.BillTrackingSettings();
                    temp.LoadFromJson(bts);
                    bts = temp;
                }
                return bts != null && bts.version === "1.0";
            };
        /**
         * @param {?} rows
         * @param {?} shownFields
         * @param {?} wholeFields
         * @param {?} idField
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.extractDataRows = /**
         * @param {?} rows
         * @param {?} shownFields
         * @param {?} wholeFields
         * @param {?} idField
         * @return {?}
         */
            function (rows, shownFields, wholeFields, idField) {
                var _this = this;
                var e_1, _a;
                /** @type {?} */
                var frows = [];
                var _loop_1 = function (row) {
                    /** @type {?} */
                    var obj = {};
                    obj[idField] = row.dataId;
                    // 先解析其他类型字段
                    /** @type {?} */
                    var decimalFFs = [];
                    shownFields.forEach(( /**
                     * @param {?} f
                     * @return {?}
                     */function (f) {
                        if (f.dataType == commonApi$1.DataType.Decimal) {
                            decimalFFs.push(f);
                        }
                        else {
                            obj[f.fieldPath] = _this.getFieldValue(f, row.GetFieldMap(), wholeFields);
                        }
                    }));
                    // 再解析浮点型字段
                    decimalFFs.forEach(( /**
                     * @param {?} f
                     * @return {?}
                     */function (f) {
                        obj[f.fieldPath] = _this.getFieldValue(f, row.GetFieldMap(), wholeFields);
                    }));
                    frows.push(obj);
                };
                try {
                    for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {
                        var row = rows_1_1.value;
                        _loop_1(row);
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return))
                            _a.call(rows_1);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                return frows;
            };
        /**
         * @param {?} field
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.extractCaptionPath = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                /** @type {?} */
                var s = field.caption;
                /** @type {?} */
                var tmp = ( /** @type {?} */(field));
                while (tmp.attachedField != null) {
                    s = tmp.attachedField.caption + "." + s;
                    tmp = ( /** @type {?} */(tmp.attachedField));
                }
                return s;
            };
        /**
         * @param {?} field
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.extractFieldPath = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                /** @type {?} */
                var s = field.fieldName;
                /** @type {?} */
                var tmp = ( /** @type {?} */(field));
                while (tmp.attachedField != null) {
                    s = tmp.attachedField.fieldName + "." + s;
                    tmp = ( /** @type {?} */(tmp.attachedField));
                }
                return s;
            };
        /**
         *
         * @param fields 子字段列表
         * @param selectedFields 用户自定义展示字段列表
         * @param showCustomFields 是否按用户自定义字段显示
         * @returns
         */
        /**
         *
         * @param {?} fields 子字段列表
         * @param {?} selectedFields 用户自定义展示字段列表
         * @param {?} showCustomFields 是否按用户自定义字段显示
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.extractFFields = /**
         *
         * @param {?} fields 子字段列表
         * @param {?} selectedFields 用户自定义展示字段列表
         * @param {?} showCustomFields 是否按用户自定义字段显示
         * @return {?}
         */
            function (fields, selectedFields, showCustomFields) {
                var _this = this;
                /** @type {?} */
                var ffields = [];
                fields.forEach(( /**
                 * @param {?} f
                 * @return {?}
                 */function (f) {
                    f.show = true;
                    //枚举或者枚举型单值UDT时默认取Name
                    if (f.fieldType == "Enum" || f.fieldType == "EnumSingleUdt") {
                        /** @type {?} */
                        var tempFPath_1 = _this.extractFieldPath(f);
                        /** @type {?} */
                        var sf = null;
                        if (showCustomFields) {
                            // 如果字段不在已配置字段列表中则跳过
                            sf = selectedFields.find(( /**
                             * @param {?} sfield
                             * @return {?}
                             */function (sfield) { return sfield.fieldPath == tempFPath_1; }));
                            if (sf == null) {
                                f.show = false;
                            }
                        }
                        f = ( /** @type {?} */(_this.setExtendProps(f, sf, tempFPath_1 + ".Name")));
                        ffields.push(f);
                    }
                    else if (f.GetSubFieldList() != null && f.GetSubFieldList().length > 0) {
                        ffields.push.apply(ffields, __spread(_this.extractFFields(f.GetSubFieldList(), selectedFields, showCustomFields)));
                    }
                    else {
                        /** @type {?} */
                        var tempFPath_2 = _this.extractFieldPath(f);
                        /** @type {?} */
                        var sf = null;
                        if (showCustomFields) {
                            // 如果字段不在已配置字段列表中则跳过
                            sf = selectedFields.find(( /**
                             * @param {?} sfield
                             * @return {?}
                             */function (sfield) { return sfield.fieldPath == tempFPath_2; }));
                            if (sf == null) {
                                f.show = false;
                            }
                        }
                        f = ( /** @type {?} */(_this.setExtendProps(f, sf, tempFPath_2)));
                        ffields.push(f);
                    }
                }));
                return ffields;
            };
        /**
         * 判定有子数据的条件为：子表可显示，且子表有数据
         */
        /**
         * 判定有子数据的条件为：子表可显示，且子表有数据
         * @param {?} row
         * @param {?} billInfo
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.hasChildData = /**
         * 判定有子数据的条件为：子表可显示，且子表有数据
         * @param {?} row
         * @param {?} billInfo
         * @return {?}
         */
            function (row, billInfo) {
                var e_2, _a;
                /** @type {?} */
                var hasChildData = false;
                /** @type {?} */
                var schema = this.getBillTrackerSchema(billInfo);
                /** @type {?} */
                var children = row.GetChildTableList();
                try {
                    for (var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {
                        var c = children_1_1.value;
                        /** @type {?} */
                        var tableShow = false;
                        /** @type {?} */
                        var hasRows = false;
                        /** @type {?} */
                        var table = schema && schema[c.tableName];
                        if (table != null && table.show != null) {
                            tableShow = table.show;
                        }
                        else {
                            // 兼容无show属性情形
                            tableShow = true;
                        }
                        if (c.GetRowList() && c.GetRowList().length > 0) {
                            hasRows = true;
                        }
                        hasChildData = tableShow && hasRows;
                        if (hasChildData == true) {
                            break;
                        }
                    }
                }
                catch (e_2_1) {
                    e_2 = { error: e_2_1 };
                }
                finally {
                    try {
                        if (children_1_1 && !children_1_1.done && (_a = children_1.return))
                            _a.call(children_1);
                    }
                    finally {
                        if (e_2)
                            throw e_2.error;
                    }
                }
                return hasChildData;
            };
        /**
         * @param {?} f
         * @param {?} rdfm
         * @param {?=} wholeFields
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getFieldValue = /**
         * @param {?} f
         * @param {?} rdfm
         * @param {?=} wholeFields
         * @return {?}
         */
            function (f, rdfm, wholeFields) {
                /** @type {?} */
                var fields = f.fieldPath ? f.fieldPath.split(".") : [f.fieldName];
                /** @type {?} */
                var bdf = fields && rdfm[fields[0]];
                for (var i = 1; bdf != null && i < fields.length; i++) {
                    /** @type {?} */
                    var temp = bdf.GetSubFieldMap();
                    if (temp == null) {
                        break;
                    }
                    bdf = temp[fields[i]];
                }
                /** @type {?} */
                var textValue = bdf ? bdf.GetTextValue() : "";
                if (textValue == null) {
                    return null;
                }
                if (f.dataType == commonApi$1.DataType.String) {
                    if (f.formatInfo != null) {
                        /** @type {?} */
                        var stringMapFormatter = f.formatInfo.stringMapFormatter;
                        if (stringMapFormatter != null) {
                            /** @type {?} */
                            var v = stringMapFormatter[textValue] || textValue;
                            f.fieldValue = v;
                            return v;
                        }
                        else {
                            f.fieldValue = textValue;
                            return textValue || "";
                        }
                    }
                    else {
                        f.fieldValue = textValue;
                        return textValue || "";
                    }
                }
                else if (f.dataType == commonApi$1.DataType.Decimal) {
                    /** @type {?} */
                    var scale = f.scale;
                    if (f.formatInfo != null) {
                        if (f.formatInfo.scale != null) {
                            scale = f.formatInfo.scale;
                        }
                        if (f.formatInfo.enableScaleExpression) {
                            if (f.formatInfo.scaleExpression != null) {
                                /** @type {?} */
                                var scaleField = this.getFieldInFields(wholeFields, f.formatInfo.scaleExpression);
                                /** @type {?} */
                                var tmp = scaleField && parseInt(String(this.getFieldValue(scaleField, rdfm)));
                                // const tmp = parseInt(this.getFieldValueInFieldsWithValue(extactedFields, f.formatInfo.scaleExpression));
                                if (tmp != null) {
                                    if (isNaN(tmp)) {
                                        throw Exceptions.SCALE_FIELD_VALUE_IS_NAN;
                                    }
                                    scale = tmp;
                                }
                            }
                        }
                    }
                    f.fieldValue = parseFloat(String(textValue));
                    if (scale < 0) {
                        scale = 0;
                    }
                    else if (scale > 100) {
                        scale = 100;
                    }
                    /** @type {?} */
                    var dec = parseFloat(String(textValue)).toFixed(scale).toString();
                    return dec || "";
                }
                else if (f.dataType == commonApi$1.DataType.Boolean) {
                    if (textValue == "") {
                        f.fieldValue = null;
                        return textValue;
                    }
                    f.fieldValue = ( /** @type {?} */(JSON.parse(textValue)));
                    return ( /** @type {?} */(JSON.parse(textValue)));
                }
                else if (f.dataType == commonApi$1.DataType.DateTime) {
                    /** @type {?} */
                    var date = commonApi$1.BpmnModelJsonHelper.DateTimeFromString(textValue);
                    /** @type {?} */
                    var formatter = "yyyy-MM-dd";
                    formatter = f.formatInfo && f.formatInfo.dateFormatter || "yyyy-MM-dd";
                    // if (f.fieldType == "DateTime") {
                    //     formatter = f.formatInfo && f.formatInfo.dateFormatter || "yyyy-MM-dd HH:mm:ss.SSS";
                    // } else if (f.fieldType == "Date") {
                    //     formatter = f.formatInfo && f.formatInfo.dateFormatter || "yyyy-MM-dd";
                    // } else {
                    //     formatter = f.formatInfo && f.formatInfo.dateFormatter || "yyyy-MM-dd";
                    // }
                    f.fieldValue = date;
                    return this.dateFormat(date, formatter);
                }
                else {
                    f.fieldValue = textValue;
                    return textValue || "";
                }
            };
        /**
         * 根据fullPath在字段列表中查找目标字段
         * @param fields
         * @param fullPath
         * @returns
         */
        /**
         * 根据fullPath在字段列表中查找目标字段
         * @param {?} fields
         * @param {?} fullPath
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getFieldInFields = /**
         * 根据fullPath在字段列表中查找目标字段
         * @param {?} fields
         * @param {?} fullPath
         * @return {?}
         */
            function (fields, fullPath) {
                var e_3, _a;
                /** @type {?} */
                var v = null;
                try {
                    for (var fields_1 = __values(fields), fields_1_1 = fields_1.next(); !fields_1_1.done; fields_1_1 = fields_1.next()) {
                        var fv = fields_1_1.value;
                        /** @type {?} */
                        var curFv = ( /** @type {?} */(fv));
                        // 查找根字段
                        /** @type {?} */
                        var tmpFv = fv;
                        while (tmpFv.attachedField) {
                            tmpFv = tmpFv.attachedField;
                        }
                        /** @type {?} */
                        var rootFv = ( /** @type {?} */(tmpFv));
                        // 更新fullPath
                        curFv.fullPath = commonApi.fullPathPrefix + rootFv.attachedTable.tableName + "." + curFv.fieldPath;
                        // 对比当前字段fullPath与目标fullPath
                        if (fullPath == curFv.fullPath) {
                            v = curFv;
                            break;
                        }
                        // 递归查找子字段
                        /** @type {?} */
                        var subFlds = curFv.GetSubFieldList();
                        if (subFlds && subFlds.length > 0) {
                            v = this.getFieldInFields(subFlds, fullPath);
                            if (v != null) {
                                break;
                            }
                        }
                    }
                }
                catch (e_3_1) {
                    e_3 = { error: e_3_1 };
                }
                finally {
                    try {
                        if (fields_1_1 && !fields_1_1.done && (_a = fields_1.return))
                            _a.call(fields_1);
                    }
                    finally {
                        if (e_3)
                            throw e_3.error;
                    }
                }
                return v;
            };
        /**
         * @param {?} fieldsWithValue
         * @param {?} fullPath
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getFieldValueInFieldsWithValue = /**
         * @param {?} fieldsWithValue
         * @param {?} fullPath
         * @return {?}
         */
            function (fieldsWithValue, fullPath) {
                var e_4, _a;
                /** @type {?} */
                var v = null;
                try {
                    for (var fieldsWithValue_1 = __values(fieldsWithValue), fieldsWithValue_1_1 = fieldsWithValue_1.next(); !fieldsWithValue_1_1.done; fieldsWithValue_1_1 = fieldsWithValue_1.next()) {
                        var fv = fieldsWithValue_1_1.value;
                        while (fv.attachedField) {
                            fv = fv.attachedField;
                        }
                        /** @type {?} */
                        var rootFv = ( /** @type {?} */(fv));
                        rootFv.fullPath = commonApi.fullPathPrefix + rootFv.attachedTable.tableName + "." + rootFv.fieldPath;
                        if (fullPath == rootFv.fullPath) {
                            v = rootFv.fieldValue;
                            break;
                        }
                    }
                }
                catch (e_4_1) {
                    e_4 = { error: e_4_1 };
                }
                finally {
                    try {
                        if (fieldsWithValue_1_1 && !fieldsWithValue_1_1.done && (_a = fieldsWithValue_1.return))
                            _a.call(fieldsWithValue_1);
                    }
                    finally {
                        if (e_4)
                            throw e_4.error;
                    }
                }
                return v;
            };
        /**
         * @param {?} billInfo
         * @param {?} schemaTable
         * @param {?} dataTable
         * @param {?=} filterFields
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getBasicInfoFieldsWithValue = /**
         * @param {?} billInfo
         * @param {?} schemaTable
         * @param {?} dataTable
         * @param {?=} filterFields
         * @return {?}
         */
            function (billInfo, schemaTable, dataTable, filterFields) {
                var _this = this;
                if (filterFields === void 0) {
                    filterFields = true;
                }
                /** @type {?} */
                var fieldsWithValue = [];
                // 单据追踪配置
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (billInfo && billInfo.billTrackingSettings) {
                    bts.LoadFromJson(billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var schema = this.getBillTrackerSchema(billInfo);
                /** @type {?} */
                var selectedFields = schema && schema[schemaTable.tableName] && schema[schemaTable.tableName].fields;
                selectedFields = selectedFields ? selectedFields : [];
                /** @type {?} */
                var showCustomFields = bts.billTrackingDataShownMode === commonApi.BillTrackingDataShownMode.CUSTOMFIELD;
                // 所有字段
                /** @type {?} */
                var fs = schemaTable.getFieldList();
                /** @type {?} */
                var r = dataTable.GetRowList()[0];
                // 主表字段
                /** @type {?} */
                var rdfm = r.GetFieldMap();
                // 提取展示字段
                /** @type {?} */
                var ffs = this.extractFFields(fs, selectedFields, showCustomFields);
                // 获取字段值
                // 先解析其他类型字段
                /** @type {?} */
                var decimalFfs = [];
                ffs.forEach(( /**
                 * @param {?} ff
                 * @return {?}
                 */function (ff) {
                    if (ff.dataType == commonApi$1.DataType.Decimal) {
                        decimalFfs.push(ff);
                    }
                    else {
                        ff.fieldValue = _this.getFieldValue(ff, rdfm);
                    }
                }));
                // 再解析浮点数字段
                decimalFfs.forEach(( /**
                 * @param {?} ff
                 * @return {?}
                 */function (ff) {
                    ff.fieldValue = _this.getFieldValue(ff, rdfm, fs);
                }));
                fieldsWithValue.push.apply(fieldsWithValue, __spread(ffs));
                return fieldsWithValue;
            };
        /**
         * @param {?} f
         * @param {?} sf
         * @param {?} fieldPath
         * @param {?=} rdfm
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.setExtendProps = /**
         * @param {?} f
         * @param {?} sf
         * @param {?} fieldPath
         * @param {?=} rdfm
         * @return {?}
         */
            function (f, sf, fieldPath, rdfm) {
                f.captionPath = this.extractCaptionPath(f);
                f.fieldPath = fieldPath;
                if (sf) {
                    f.displayName = sf.displayName;
                    f.i18nCols = sf.i18nCols;
                    f.formatInfo = sf.formatInfo;
                    f.order = sf.order;
                }
                if (rdfm) {
                    f.fieldValue = this.getFieldValue(f, rdfm);
                }
                return f;
            };
        /**
         * 字段列表按order属性排序
         * @param fieldsWithValue
         * @returns
         */
        /**
         * 字段列表按order属性排序
         * @param {?} fieldsWithValue
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.sortFieldsByOrder = /**
         * 字段列表按order属性排序
         * @param {?} fieldsWithValue
         * @return {?}
         */
            function (fieldsWithValue) {
                return fieldsWithValue.sort(( /**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */function (a, b) {
                    if (a.order != null && b.order != null) {
                        return a.order - b.order;
                    }
                    else if (a.order != null && b.order == null) {
                        return -1;
                    }
                    else if (a.order == null && b.order != null) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                }));
            };
        /**
         * @param {?} date
         * @param {?} fmt
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.dateFormat = /**
         * @param {?} date
         * @param {?} fmt
         * @return {?}
         */
            function (date, fmt) {
                /** @type {?} */
                var ret;
                /** @type {?} */
                var opt = {
                    "y+": date.getUTCFullYear().toString(),
                    // 年
                    "M+": (date.getUTCMonth() + 1).toString(),
                    // 月
                    "d+": date.getUTCDate().toString(),
                    // 日
                    "H+": date.getUTCHours().toString(),
                    // 时
                    "m+": date.getUTCMinutes().toString(),
                    // 分
                    "s+": date.getUTCSeconds().toString(),
                    // 秒
                    "S+": date.getUTCMilliseconds().toString(),
                };
                for (var k in opt) {
                    ret = new RegExp("(" + k + ")").exec(fmt);
                    if (ret) {
                        if (!String.prototype.padStart) {
                            fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (this.myPadStart(opt[k], ret[1].length, "0")));
                        }
                        else {
                            fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")));
                        }
                    }
                }
                return fmt;
            };
        /**
         * @param {?} src
         * @param {?} targetLength
         * @param {?} padString
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.myPadStart = /**
         * @param {?} src
         * @param {?} targetLength
         * @param {?} padString
         * @return {?}
         */
            function (src, targetLength, padString) {
                targetLength = targetLength >> 0; //floor if number or convert non-number to 0;
                padString = String(typeof padString !== 'undefined' ? padString : ' ');
                if (src.length > targetLength) {
                    return String(src);
                }
                else {
                    targetLength = targetLength - src.length;
                    if (targetLength > padString.length) {
                        padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
                    }
                    return padString.slice(0, targetLength) + String(src);
                }
            };
        /**
         * 解析字段名称
         * @param f
         * @param langCode
         * @returns
         */
        /**
         * 解析字段名称
         * @param {?} f
         * @param {?=} langCode
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getFieldLabel = /**
         * 解析字段名称
         * @param {?} f
         * @param {?=} langCode
         * @return {?}
         */
            function (f, langCode) {
                return (langCode && f.i18nCols && f.i18nCols.colI18nValues.displayName &&
                    f.i18nCols.colI18nValues.displayName[langCode]) || f.displayName || f.captionPath || f.caption;
            };
        /**
         * 解析表名称
         */
        /**
         * 解析表名称
         * @param {?} billInfo
         * @param {?} schemaTable
         * @param {?=} langCode
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getTableLabel = /**
         * 解析表名称
         * @param {?} billInfo
         * @param {?} schemaTable
         * @param {?=} langCode
         * @return {?}
         */
            function (billInfo, schemaTable, langCode) {
                /** @type {?} */
                var schema = this.getBillTrackerSchema(billInfo);
                /** @type {?} */
                var table = schema && schema[schemaTable.tableName];
                if (table != null) {
                    /** @type {?} */
                    var i18nCols = table.i18nCols;
                    /** @type {?} */
                    var tmp = (langCode && i18nCols && i18nCols.colI18nValues.displayName && i18nCols.colI18nValues.displayName[langCode]) || table.displayName || table.caption || table.code;
                    return tmp;
                }
                else {
                    return schemaTable.caption;
                }
            };
        /**
         * 获取解析可展示子表
         */
        /**
         * 获取解析可展示子表
         * @param {?} billInfo
         * @param {?} schemaTable
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getChildTables = /**
         * 获取解析可展示子表
         * @param {?} billInfo
         * @param {?} schemaTable
         * @return {?}
         */
            function (billInfo, schemaTable) {
                /** @type {?} */
                var result = [];
                /** @type {?} */
                var schema = this.getBillTrackerSchema(billInfo);
                /** @type {?} */
                var children = schemaTable.GetChildTableList();
                children && children.forEach(( /**
                 * @param {?} child
                 * @return {?}
                 */function (child) {
                    /** @type {?} */
                    var trackerTable = schema && schema[child.tableName];
                    if (trackerTable != null && trackerTable.show != null) {
                        if (trackerTable.show == true) {
                            child.order = trackerTable.order;
                            result.push(child);
                        }
                    }
                    else {
                        // 兼容无show属性情形
                        result.push(child);
                    }
                }));
                result = this.sortTablesByOrder(result);
                return result;
            };
        /**
         * 表按sort字段排序
         * @param schemaTables
         * @returns
         */
        /**
         * 表按sort字段排序
         * @param {?} schemaTables
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.sortTablesByOrder = /**
         * 表按sort字段排序
         * @param {?} schemaTables
         * @return {?}
         */
            function (schemaTables) {
                return schemaTables.sort(( /**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */function (a, b) {
                    if (a.order != null && b.order != null) {
                        return a.order - b.order;
                    }
                    else if (a.order != null && b.order == null) {
                        return -1;
                    }
                    else if (a.order == null && b.order != null) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                }));
            };
        /**
         * 解析billTrackerSchema
         * @param billInfo
         */
        /**
         * 解析billTrackerSchema
         * @param {?} billInfo
         * @return {?}
         */
        BillTrackerDataInfoService.prototype.getBillTrackerSchema = /**
         * 解析billTrackerSchema
         * @param {?} billInfo
         * @return {?}
         */
            function (billInfo) {
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (billInfo && billInfo.billTrackingSettings) {
                    bts.LoadFromJson(billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var fieldContent = bts.customFieldContent;
                /** @type {?} */
                var fieldConfig = fieldContent && (typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent));
                /** @type {?} */
                var schema = fieldConfig && fieldConfig.schema;
                return schema;
            };
        BillTrackerDataInfoService.decorators = [
            { type: core$1.Injectable }
        ];
        return BillTrackerDataInfoService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/i18n/lang.resource.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var BILL_TRACKER_LANG_RESOURCES = {
        "zh-CHS": {
            "billTracker": "单据追踪",
            "noAssoBill": "没有关联的业务单据",
            "modalOptionsCantBeEmpty": "模态框配置不可为空",
            "downSearch": "下查",
            "upSearch": "上查",
            "folder": "折叠",
            "caption": "标题",
            "summary": "摘要",
            "basicInfo": "基本信息",
            "lineNumber": "序号",
            "childData": "明细",
            "selectOneFirst": "请先选择一条数据",
            "noChildData": "没有明细数据",
            "zoomIn": "放大（Ctrl+滚轮）",
            "zoomOut": "缩小（Ctrl+滚轮）",
            "zoomReset": "还原",
            "print": "打印",
            "expandUp": "向上展开",
            "expandUpAll": "向上展开全部",
            "expandDown": "向下展开",
            "expandDownAll": "向下展开全部",
            "loading": "正在加载",
            "yes": "是",
            "no": "否",
            "currentNode": "当前",
            "goOnTracking": "穿透追踪",
            "setAsCurrent": "设为当前",
            "viewBill": "查看详情",
            "more": "更多",
            "tabNameLengthIsTooLong": "页签名称超长，取前200个字符显示",
            "scaleFieldCantBeCastToInteger": "精度字段无法被转换为整型",
            "trackerArgsCantBeEmpty": "参数【单据Id或者单据查询参数】不可为空",
        },
        "en": {
            "billTracker": "Bill Tracker",
            "noAssoBill": "There is no associated business bill.",
            "modalOptionsCantBeEmpty": "Modal options cant be empty",
            "downSearch": "Down search",
            "upSearch": "Up search",
            "folder": "Folder",
            "caption": "Caption",
            "summary": "Summary",
            "basicInfo": "Basic Information",
            "lineNumber": "No",
            "childData": "Detail",
            "selectOneFirst": "Please select an item at first",
            "noChildData": "No detail data",
            "zoomIn": "Zoom In(Ctrl+MouseWheel)",
            "zoomOut": "Zoom Out(Ctrl+MouseWheel)",
            "zoomReset": "Zoom Reset",
            "print": "Print",
            "expandUp": "Expand Upward",
            "expandUpAll": "Expand All Upward",
            "expandDown": "Expand Downward",
            "expandDownAll": "Expand All Downward",
            "loading": "Loading...",
            "yes": "Yes",
            "no": "No",
            "currentNode": "Entry",
            "goOnTracking": "Go on",
            "setAsCurrent": "Set as current",
            "viewBill": "View Detail",
            "more": "More",
            "tabNameLengthIsTooLong": "The tab name is too long and displayed with the first 200 characters",
            "scaleFieldCantBeCastToInteger": "Precision field cannot be converted to integers",
            "trackerArgsCantBeEmpty": "The parameter \"args\" can't be empty",
        },
        "zh-CHT": {
            "billTracker": "單據追蹤",
            "noAssoBill": "沒有關聯的業務單據",
            "modalOptionsCantBeEmpty": "模態框配置不可為空",
            "downSearch": "下查",
            "upSearch": "上查",
            "folder": "折疊",
            "caption": "標題",
            "summary": "摘要",
            "basicInfo": "基本信息",
            "lineNumber": "序號",
            "childData": "明細",
            "selectOneFirst": "請先選擇壹條數據",
            "noChildData": "沒有明細數據",
            "zoomIn": "放大（Ctrl+滾輪）",
            "zoomOut": "縮小（Ctrl+滾輪）",
            "zoomReset": "還原",
            "print": "打印",
            "expandUp": "向上展開",
            "expandUpAll": "向上展開全部",
            "expandDown": "向下展開",
            "expandDownAll": "向下展開全部",
            "loading": "正在加載",
            "yes": "是",
            "no": "否",
            "currentNode": "當前",
            "goOnTracking": "穿透追蹤",
            "setAsCurrent": "設爲當前",
            "viewBill": "查看詳情",
            "more": "更多",
            "tabNameLengthIsTooLong": "頁簽名稱超長，取前200個字符顯示",
            "scaleFieldCantBeCastToInteger": "精度字段無法被轉換爲整型",
            "trackerArgsCantBeEmpty": "參數【單據Id或者單據查詢參數】不可爲空",
        }
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/pipe/bill-tracker-locale.pipe.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerLocalePipe = /** @class */ (function () {
        function BillTrackerLocalePipe(localeId) {
            this.defaultLang = "zh-CHS";
            this.langCode = localeId || this.defaultLang;
            this.lang = BILL_TRACKER_LANG_RESOURCES[this.langCode] || BILL_TRACKER_LANG_RESOURCES[this.defaultLang];
        }
        /**
         * @param {?} name
         * @return {?}
         */
        BillTrackerLocalePipe.prototype.transform = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return this.lang[name] || name;
            };
        BillTrackerLocalePipe.decorators = [
            { type: core$1.Pipe, args: [{ name: 'billTrackerLocale' },] }
        ];
        /** @nocollapse */
        BillTrackerLocalePipe.ctorParameters = function () {
            return [
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] }
            ];
        };
        return BillTrackerLocalePipe;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/services/bill-tracker-internal-ui.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerInternalUiService = /** @class */ (function () {
        function BillTrackerInternalUiService(framework, messager, loading, localeId, dataService, dataInfoService, modalService, cfr, injector, localePipe) {
            this.framework = framework;
            this.messager = messager;
            this.loading = loading;
            this.dataService = dataService;
            this.dataInfoService = dataInfoService;
            this.modalService = modalService;
            this.cfr = cfr;
            this.injector = injector;
            this.localePipe = localePipe;
        }
        /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.openBillDetail = /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
            function (billInfo, billDataInfo) {
                var _this = this;
                /** @type {?} */
                var jointQueryMode = billInfo.jointQueryMode;
                /** @type {?} */
                var jointQueryParameters = JSON.parse(billInfo.jointQueryParameters);
                /** @type {?} */
                var id = billDataInfo.dataId;
                if (this.dataService.hasDynamicParams(jointQueryParameters)) {
                    /** @type {?} */
                    var args = this.dataService.buildGetJointQueryParametersArgs(jointQueryParameters, billInfo, billDataInfo);
                    /** @type {?} */
                    var l_1 = this.loading.show({ message: this.localePipe.transform("loading") });
                    this.dataService.getJointQueryParameters(args).subscribe(( /**
                     * @param {?} results
                     * @return {?}
                     */function (results) {
                        l_1.close();
                        if (jointQueryMode == commonApi.JointQueryMode.APP) {
                            _this.openMenu(jointQueryParameters, id, results);
                        }
                        else if (jointQueryMode == commonApi.JointQueryMode.URL) {
                            _this.openUrl(jointQueryParameters, id, results);
                        }
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        l_1.close();
                        //todo 确定异常结构, 目前采用兼容取值方式
                        _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        throw err;
                    }));
                }
                else {
                    if (jointQueryMode == commonApi.JointQueryMode.APP) {
                        this.openMenu(jointQueryParameters, id);
                    }
                    else if (jointQueryMode == commonApi.JointQueryMode.URL) {
                        this.openUrl(jointQueryParameters, id);
                    }
                }
            };
        /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @param {?} fieldsWithValue
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.openBillDetailWithFields = /**
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @param {?} fieldsWithValue
         * @return {?}
         */
            function (billInfo, billDataInfo, fieldsWithValue) {
                var _this = this;
                /** @type {?} */
                var id = billDataInfo.dataId;
                /** @type {?} */
                var jointQueryMode = billInfo.jointQueryMode;
                /** @type {?} */
                var jointQueryParameters = JSON.parse(billInfo.jointQueryParameters);
                if (this.dataService.hasDynamicParams(jointQueryParameters)) {
                    /** @type {?} */
                    var l_2 = this.loading.show({ message: this.localePipe.transform("loading") });
                    /** @type {?} */
                    var args = this.dataService.buildGetJointQueryParametersArgs(jointQueryParameters, billInfo, billDataInfo);
                    this.dataService.getJointQueryParameters(args).subscribe(( /**
                     * @param {?} results
                     * @return {?}
                     */function (results) {
                        l_2.close();
                        if (jointQueryMode == commonApi.JointQueryMode.APP) {
                            _this.openMenu(jointQueryParameters, id, results);
                        }
                        else if (jointQueryMode == commonApi.JointQueryMode.URL) {
                            _this.openUrl(jointQueryParameters, id, results);
                        }
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        l_2.close();
                        //todo 确定异常结构, 目前采用兼容取值方式
                        _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        throw err;
                    }));
                }
                else {
                    if (jointQueryMode == commonApi.JointQueryMode.APP) {
                        this.openMenu(jointQueryParameters, id);
                    }
                    else if (jointQueryMode == commonApi.JointQueryMode.URL) {
                        this.openUrl(jointQueryParameters, id);
                    }
                }
            };
        /**
         * 直接打开菜单
         * @param jointQueryParameters
         * @param id
         */
        /**
         * 直接打开菜单
         * @param {?} jointQueryParameters
         * @param {?} id
         * @param {?=} jqpr
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.openMenu = /**
         * 直接打开菜单
         * @param {?} jointQueryParameters
         * @param {?} id
         * @param {?=} jqpr
         * @return {?}
         */
            function (jointQueryParameters, id, jqpr) {
                /** @type {?} */
                var entityParams = {};
                entityParams["id"] = id;
                entityParams["action"] = "LoadAndView1";
                /** @type {?} */
                var map = new Map();
                map.set("id", id);
                map.set("action", "LoadAndView1");
                this.buildOpenMenuParams(jointQueryParameters, map, entityParams, jqpr);
                // 从entityParam取自定义tab名，然后删除此属性防止带入url
                /** @type {?} */
                var tabName = entityParams && entityParams[BillTrackerConstant.BILL_VIEWER_PARAM_CODE_CUSTOM_TAB_NAME];
                if (entityParams && entityParams[BillTrackerConstant.BILL_VIEWER_PARAM_CODE_CUSTOM_TAB_NAME]) {
                    delete entityParams[BillTrackerConstant.BILL_VIEWER_PARAM_CODE_CUSTOM_TAB_NAME];
                    map.delete(BillTrackerConstant.BILL_VIEWER_PARAM_CODE_CUSTOM_TAB_NAME);
                }
                /** @type {?} */
                var WEB_FORM_ROUTE_PARAMS = encodeURIComponent(JSON.stringify(entityParams));
                map.set("WEB_FORM_ROUTE_PARAMS", WEB_FORM_ROUTE_PARAMS);
                /** @type {?} */
                var opts = {
                    appType: rtfCommon.AppType.Menu,
                    funcId: jointQueryParameters.funcId,
                    appEntrance: null,
                    appId: null,
                    tabId: id,
                    entityParams: entityParams,
                    queryStringParams: map,
                };
                if (tabName) {
                    // 页签名称超长时给出提醒并仅取前200个字符
                    if (tabName.length > 200) {
                        this.messager.warning(this.localePipe.transform("tabNameLengthIsTooLong"));
                        tabName = tabName.substring(0, 200);
                    }
                    opts.tabName = tabName;
                }
                this.framework.openMenu(opts);
            };
        /**
         * 借助单据查看容器打开url
         * @param jointQueryParameters
         * @param id
         */
        /**
         * 借助单据查看容器打开url
         * @param {?} jointQueryParameters
         * @param {?} id
         * @param {?=} jqpr
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.openUrl = /**
         * 借助单据查看容器打开url
         * @param {?} jointQueryParameters
         * @param {?} id
         * @param {?=} jqpr
         * @return {?}
         */
            function (jointQueryParameters, id, jqpr) {
                // console.log("open default container for url");
                var _this = this;
                // console.log("open default container for url");
                /** @type {?} */
                var url = this.appendQueryParam(jointQueryParameters.url, "id", id);
                url = this.appendQueryParam(url, "action", 'LoadAndView1');
                // 用于填充cvft，否则服务器端控制台报错
                /** @type {?} */
                var timestamp = new Date().getTime().toString();
                url = this.appendQueryParam(url, "cvft", timestamp);
                // 添加自定义参数
                if (Array.isArray(jointQueryParameters.params)) {
                    jointQueryParameters.params.forEach(( /**
                     * @param {?} p
                     * @return {?}
                     */function (p) {
                        /** @type {?} */
                        var value = p.value;
                        if (p.type == commonApi.JointQueryParameterType.Field || p.type == commonApi.JointQueryParameterType.Expression) {
                            /** @type {?} */
                            var r = jqpr.find(( /**
                             * @param {?} it
                             * @return {?}
                             */function (it) { return it.code == p.code; }));
                            value = r && r.value;
                        }
                        url = _this.appendQueryParam(url, p.code, value);
                    }));
                }
                else {
                    // 兼容key-value格式params
                    Object.keys(jointQueryParameters.params).forEach(( /**
                     * @param {?} k
                     * @return {?}
                     */function (k) {
                        url = _this.appendQueryParam(url, k, jointQueryParameters.params[k]);
                    }));
                }
                /** @type {?} */
                var entityParams = jointQueryParameters.params || {};
                entityParams["id"] = id;
                entityParams["url"] = url;
                entityParams["action"] = "LoadAndView1";
                /** @type {?} */
                var map = new Map();
                map.set("url", url);
                map.set("id", id);
                map.set("action", "LoadAndView1");
                this.buildOpenMenuParams(jointQueryParameters, map, undefined, jqpr);
                /** @type {?} */
                var opts = {
                    appType: rtfCommon.AppType.Menu,
                    funcId: BillTrackerConstant.BILL_VIEWER_FUNC_ID,
                    appEntrance: null,
                    appId: null,
                    tabId: id,
                    entityParams: entityParams,
                    queryStringParams: map,
                };
                this.framework.openMenu(opts);
            };
        /**
         * @param {?} jointQueryParameters
         * @param {?} map
         * @param {?=} entityParams
         * @param {?=} jqpr
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.buildOpenMenuParams = /**
         * @param {?} jointQueryParameters
         * @param {?} map
         * @param {?=} entityParams
         * @param {?=} jqpr
         * @return {?}
         */
            function (jointQueryParameters, map, entityParams, jqpr) {
                if (entityParams === void 0) {
                    entityParams = {};
                }
                // 添加自定义参数
                if (Array.isArray(jointQueryParameters.params)) {
                    jointQueryParameters.params.forEach(( /**
                     * @param {?} p
                     * @return {?}
                     */function (p) {
                        /** @type {?} */
                        var value = p.value;
                        if (p.type == commonApi.JointQueryParameterType.Field || p.type == commonApi.JointQueryParameterType.Expression) {
                            if (jqpr) {
                                /** @type {?} */
                                var r = jqpr.find(( /**
                                 * @param {?} it
                                 * @return {?}
                                 */function (it) { return it.code == p.code; }));
                                value = r.value;
                            }
                        }
                        entityParams[p.code] = value;
                        map.set(p.code, value);
                    }));
                }
                else {
                    // 兼容key-value格式params
                    Object.keys(jointQueryParameters.params).forEach(( /**
                     * @param {?} k
                     * @return {?}
                     */function (k) {
                        entityParams[k] = jointQueryParameters.params[k];
                        map.set(k, jointQueryParameters.params[k]);
                    }));
                }
            };
        /**
         * @param {?} url
         * @param {?} k
         * @param {?} v
         * @return {?}
         */
        BillTrackerInternalUiService.prototype.appendQueryParam = /**
         * @param {?} url
         * @param {?} k
         * @param {?} v
         * @return {?}
         */
            function (url, k, v) {
                /** @type {?} */
                var idx = url.indexOf('?');
                if (idx < 0) {
                    url += '?';
                }
                idx = url.indexOf('?');
                if (url.indexOf(k, idx) > -1) {
                    /** @type {?} */
                    var re1 = eval('/(\\?)(' + k + '=)([^&]*)/gi');
                    url = url.replace(re1, '?' + k + '=' + v);
                    /** @type {?} */
                    var re2 = eval('/(&)(' + k + '=)([^&]*)/gi');
                    url = url.replace(re2, '&' + k + '=' + v);
                }
                else {
                    /** @type {?} */
                    var paraStr = k + '=' + v;
                    if (idx < 0)
                        url += '?';
                    else if (idx >= 0 && idx != url.length - 1)
                        url += '&';
                    url = url + paraStr;
                }
                return url;
            };
        BillTrackerInternalUiService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BillTrackerInternalUiService.ctorParameters = function () {
            return [
                { type: rtfCommon.FrameworkService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: BillTrackerDataService },
                { type: BillTrackerDataInfoService },
                { type: uiModal.BsModalService },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.Injector },
                { type: BillTrackerLocalePipe }
            ];
        };
        return BillTrackerInternalUiService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/bill-tracker/bill-tracker.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerComponent = /** @class */ (function () {
        function BillTrackerComponent(args, localeId, dataService, notify, messager, loading, modal, cdf, vcr, appr, inj, cfr) {
            this.localeId = localeId;
            this.dataService = dataService;
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.cdf = cdf;
            this.vcr = vcr;
            this.appr = appr;
            this.inj = inj;
            this.cfr = cfr;
            this.defaultDataWrapperHeight = 180;
            this.dataWrapperHeight = 180;
            this.showData = false;
            this.dataFullScreen = false;
            this.billTrackerArgs = args;
            this.dataInfoService = new BillTrackerDataInfoService();
            this.newBTS = this.dataInfoService.isNewBTS(this.billTrackerArgs.canTrackingResult.billTrackingSettings);
            /** @type {?} */
            var inject = core$1.ReflectiveInjector.resolveAndCreate([
                BillTrackerInternalUiService
            ], this.inj);
            this.internalUiService = inject.get(BillTrackerInternalUiService, null);
            this.defaultDataWrapperHeight = args && args.gridOptions && args.gridOptions.defaultHeight ? args.gridOptions.defaultHeight : this.defaultDataWrapperHeight;
            this.dataWrapperHeight = this.defaultDataWrapperHeight;
        }
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                setTimeout(( /**
                 * @return {?}
                 */function () {
                    _this.paintGraph();
                }), 0);
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.paintGraph = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.billGraph.paint();
                this.graphZoomScale = this.billGraph.getZoomScale();
                this.billGraph.graph.view.addListener(mxEventType.SCALE, ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    // console.log(sender, evt);
                    _this.graphZoomScale = _this.billGraph.getZoomScale();
                }));
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        BillTrackerComponent.prototype.selectHandler = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                if (cell) {
                    /** @type {?} */
                    var billInfo = cell.billInfo;
                    /** @type {?} */
                    var billDataInfo = cell.billDataInfo;
                    if (billInfo == this.lastBillInfo && billDataInfo == this.lastBillDataInfo && this.showData == true) {
                        return;
                    }
                    /** @type {?} */
                    var args = this.dataService.buildGetMainEntityDataArgs(billInfo, billDataInfo);
                    this.billData.showDataGrid(args, billInfo, billDataInfo, null);
                    // 重置滚动条
                    this.divDataWrapperER.nativeElement.scrollTo({ top: 0 });
                    this.showData = true;
                    this.lastBillInfo = billInfo;
                    this.lastBillDataInfo = billDataInfo;
                }
                else {
                    this.billData.clearDataRegion();
                    this.showData = false;
                }
            };
        /**
         * @param {?} evt
         * @return {?}
         */
        BillTrackerComponent.prototype.stateChangeHandler = /**
         * @param {?} evt
         * @return {?}
         */
            function (evt) {
                if (evt.type == Events.CLICK_FIRST_SUMMARY) {
                    this.openBillDetail(evt.data);
                }
            };
        /**
         * @param {?} modalRef
         * @return {?}
         */
        BillTrackerComponent.prototype.setModalRef = /**
         * @param {?} modalRef
         * @return {?}
         */
            function (modalRef) {
                this.modalRef = modalRef;
                if (this.billGraph != null) {
                    this.billGraph.setModalRef(modalRef);
                }
            };
        /**
         * @param {?} evt
         * @return {?}
         */
        BillTrackerComponent.prototype.resetGraphHeight = /**
         * @param {?} evt
         * @return {?}
         */
            function (evt) {
                var _this = this;
                (( /** @type {?} */(evt.host))).style.top = '';
                (( /** @type {?} */(evt.host))).style.left = '';
                this.graphContainerER.nativeElement.style.height = this.mainContainerER.nativeElement.clientHeight - evt.size.height + "px";
                setTimeout(( /**
                 * @return {?}
                 */function () {
                    _this.billGraph.refresh();
                }));
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.expandDataRegion = /**
         * @return {?}
         */
            function () {
                this.dataFullScreen = true;
                this.divDataWrapperER.nativeElement.style.height = '100%';
                this.divDataWrapperER.nativeElement.style.top = '0';
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.collapseDataRegion = /**
         * @return {?}
         */
            function () {
                this.dataFullScreen = false;
                this.dataWrapperHeight = this.defaultDataWrapperHeight;
                this.divDataWrapperER.nativeElement.style.height = this.dataWrapperHeight + "px";
                this.divDataWrapperER.nativeElement.style.top = null;
            };
        /**
         * @param {?} evt
         * @return {?}
         */
        BillTrackerComponent.prototype.onRzResized = /**
         * @param {?} evt
         * @return {?}
         */
            function (evt) {
                if (evt.position.top < 0) {
                    this.divDataWrapperER.nativeElement.style.top = '0';
                    this.divDataWrapperER.nativeElement.style.height = '100%';
                    this.dataFullScreen = true;
                }
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphZoomIn = /**
         * @return {?}
         */
            function () {
                this.billGraph.zoomIn();
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphZoomOut = /**
         * @return {?}
         */
            function () {
                this.billGraph.zoomOut();
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphZoomActual = /**
         * @return {?}
         */
            function () {
                this.billGraph.zoomActual();
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphPrint = /**
         * @return {?}
         */
            function () {
                this.billGraph.print();
            };
        /**
         * @param {?} direction
         * @param {?=} all
         * @return {?}
         */
        BillTrackerComponent.prototype.graphExpand = /**
         * @param {?} direction
         * @param {?=} all
         * @return {?}
         */
            function (direction, all) {
                if (all === void 0) {
                    all = false;
                }
                this.billGraph.expand(direction, all);
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphExpandUpAll = /**
         * @return {?}
         */
            function () {
                this.graphExpand(BillTrackerDirection.Up, true);
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphExpandUp = /**
         * @return {?}
         */
            function () {
                this.graphExpand(BillTrackerDirection.Up, false);
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphExpandDown = /**
         * @return {?}
         */
            function () {
                this.graphExpand(BillTrackerDirection.Down, false);
            };
        /**
         * @return {?}
         */
        BillTrackerComponent.prototype.graphExpandDownAll = /**
         * @return {?}
         */
            function () {
                this.graphExpand(BillTrackerDirection.Down, true);
            };
        /**
         * @param {?} cell
         * @return {?}
         */
        BillTrackerComponent.prototype.openBillDetail = /**
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                this.internalUiService.openBillDetail(cell.billInfo, cell.billDataInfo);
            };
        BillTrackerComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: 'lib-bill-tracker',
                        template: "<div class=\"g-main\" style=\"height: 100%; background-color: #ffffff;\" #mainContainer>\r\n  <div class=\"bill-tracker-toolbar-wrapper\" *ngIf=\"modalRef!=null\">\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUpAll()\">\r\n      {{'expandUpAll'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUp()\">\r\n      {{'expandUp'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDown()\">\r\n      {{'expandDown'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDownAll()\">\r\n      {{'expandDownAll'|billTrackerLocale}}\r\n    </button>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomOut()\">\r\n      <i class=\"f-icon f-icon-minus\" title=\"{{'zoomOut' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-input\">\r\n      <input *ngIf=\"false\" type=\"text\" style=\"border: 0; width: 30px; text-align: right;\" readonly\r\n        [(ngModel)]=\"graphZoomScale\">\r\n      <span style=\"border: 0; width: 30px; text-align: right;\">{{graphZoomScale}}</span>\r\n      <span>%</span>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomIn()\">\r\n      <i class=\"f-icon f-icon-add\" title=\"{{'zoomIn' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomActual()\">\r\n      <i class=\"f-icon f-icon-reset\" title=\"{{'zoomReset' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphPrint()\" *ngIf=\"false\">\r\n      <i class=\"f-icon f-icon-print\" title=\"{{'print' | billTrackerLocale}}\"></i>\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-graph-wrapper\" #graphContainer>\r\n    <lib-bill-tracker-graph #billGraph [billTrackerArgs]=\"billTrackerArgs\" (select)=\"selectHandler($event)\"\r\n      (stateChange)=\"stateChangeHandler($event)\">\r\n    </lib-bill-tracker-graph>\r\n  </div>\r\n</div>\r\n<!-- todo: \u5206\u5272\u6761\u6682\u672A\u52A0\u6700\u5927\u9AD8\u5EA6\u9650\u5236 -->\r\n<div #divDataWrapper class=\"bill-tracker-data-wrapper\" [style.height]=\"dataWrapperHeight + 'px'\"\r\n  [style.display]=\"showData ? null : 'none'\" ngResizable rzAspectRatio=\"false\" [rzHandles]=\"'n'\" [rzMinHeight]=\"40\"\r\n  (rzStop)=\"onRzResized($event)\">\r\n  <div class=\"bill-tracker-divider-wrapper\">\r\n    <div class=\"bill-tracker-divider bill-tracker-divider-transparent bill-tracker-divider-img\">\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-fold-container\">\r\n    <div class=\"bill-tracker-fold-wrapper\">\r\n      <div class=\"bill-tracker-fold-icon\">\r\n        <i class=\"f-icon f-icon-arrow-seek-up\" *ngIf=\"dataFullScreen==false\" (click)=\"expandDataRegion()\"></i>\r\n        <i class=\"f-icon f-icon-arrow-seek-down\" *ngIf=\"dataFullScreen==true\" (click)=\"collapseDataRegion()\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div #divDataTable class=\"bill-tracker-data-table-wrapper\">\r\n    <lib-bill-tracker-data #billData></lib-bill-tracker-data>\r\n  </div>\r\n</div>\r\n",
                        providers: [
                            BillTrackerDataService
                        ],
                        changeDetection: core$1.ChangeDetectionStrategy.Default,
                        styles: [".bill-tracker-divider{position:relative;height:5px}.bill-tracker-divider-transparent:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#e9ecf3}.bill-tracker-divider-transparent:hover:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#3f65ff}.bill-tracker-divider-img:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator.svg);background-repeat:no-repeat}.bill-tracker-divider-img:hover:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator-hover.svg);background-repeat:no-repeat}.bill-tracker-graph-wrapper{height:100%;position:relative}.bill-tracker-data-wrapper{z-index:2;overflow-y:auto;position:absolute;left:0;width:100%;bottom:0;height:200px;background-color:#fff;overflow:hidden}.bill-tracker-data-wrapper .ng-resizable-handle.ng-resizable-n{height:10px}.bill-tracker-data-table-wrapper{position:relative;width:100%;padding-top:6px;height:100%;overflow:auto}.bill-tracker-fold-wrapper{z-index:1;position:absolute;right:1rem;top:0;width:2rem;height:2rem}.bill-tracker-fold-icon{display:inline-flex;width:1.5em;height:1.5em;line-height:1.5em;text-align:center;color:#848c9a;background:#fff;border-radius:1.5em;border:1px solid #e9ecf3;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden;margin:.5em .5em 0 0}.bill-tracker-fold-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-wrapper{z-index:1;position:absolute;right:0;top:0;display:flex;margin-right:14px;margin-top:14px;background-color:#fff}.bill-tracker-toolbar-icon{background:#fff;width:22px;height:22px;line-height:22px;text-align:center;color:#595d63;border:1px solid #e8ebf2;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);border-radius:22px;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden}.bill-tracker-toolbar-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-btn:hover{background-color:#fff}.bill-tracker-fold-container{position:fixed;height:2rem;width:100%;z-index:1}"]
                    }] }
        ];
        /** @nocollapse */
        BillTrackerComponent.ctorParameters = function () {
            return [
                { type: BillTrackerArgs },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: BillTrackerDataService },
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: core$1.ChangeDetectorRef },
                { type: core$1.ViewContainerRef },
                { type: core$1.ApplicationRef },
                { type: core$1.Injector, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ComponentFactoryResolver, decorators: [{ type: core$1.Optional }] }
            ];
        };
        BillTrackerComponent.propDecorators = {
            billGraph: [{ type: core$1.ViewChild, args: ["billGraph",] }],
            billGraphVCR: [{ type: core$1.ViewChild, args: ["billGraph", { read: core$1.ViewContainerRef },] }],
            mainContainerER: [{ type: core$1.ViewChild, args: ["mainContainer",] }],
            graphContainerER: [{ type: core$1.ViewChild, args: ["graphContainer",] }],
            billData: [{ type: core$1.ViewChild, args: ["billData",] }],
            billDataVCR: [{ type: core$1.ViewChild, args: ["billData", { read: core$1.ViewContainerRef },] }],
            divDataTableER: [{ type: core$1.ViewChild, args: ["divDataTable",] }],
            divDataWrapperER: [{ type: core$1.ViewChild, args: ["divDataWrapper",] }],
            billTrackerArgs: [{ type: core$1.Input, args: ["billTrackerArgs",] }]
        };
        return BillTrackerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/services/bill-tracker-ui.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerUiService = /** @class */ (function () {
        function BillTrackerUiService(frameworkService, messager, loading, localeId, dataService, modalService, cfr, injector) {
            this.frameworkService = frameworkService;
            this.messager = messager;
            this.loading = loading;
            this.dataService = dataService;
            this.modalService = modalService;
            this.cfr = cfr;
            this.injector = injector;
            /**
             * 内置模态框配置
             */
            this.defaultModalOptions = {
                title: null,
                width: 1100,
                height: 480,
                buttons: null,
                showButtons: null,
            };
            this.localePipe = new BillTrackerLocalePipe(localeId);
        }
        /**
         * 打开单据追踪弹窗
         * todo: spa模式下，弹窗在body中，位于最上层，打开联查时会盖住新tab页，此问题待解决
         * @param args 单据追踪参数
         * @param maximized 是否最大化弹窗
         * @param modalOptions 弹窗配置
         * @param graphOptions 追踪图配置
         * @param gridOptions 数据表配置
         */
        /**
         * 打开单据追踪弹窗
         * todo: spa模式下，弹窗在body中，位于最上层，打开联查时会盖住新tab页，此问题待解决
         * @param {?} args 单据追踪参数
         * @param {?=} maximized 是否最大化弹窗
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} graphOptions 追踪图配置
         * @param {?=} gridOptions 数据表配置
         * @return {?}
         */
        BillTrackerUiService.prototype.openDefaultBillTrackerDialog = /**
         * 打开单据追踪弹窗
         * todo: spa模式下，弹窗在body中，位于最上层，打开联查时会盖住新tab页，此问题待解决
         * @param {?} args 单据追踪参数
         * @param {?=} maximized 是否最大化弹窗
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} graphOptions 追踪图配置
         * @param {?=} gridOptions 数据表配置
         * @return {?}
         */
            function (args, maximized, modalOptions, graphOptions, gridOptions) {
                var _this = this;
                if (maximized === void 0) {
                    maximized = true;
                }
                if (typeof modalOptions == "string") {
                    if (modalOptions == "") {
                        this.messager.info(this.localePipe.transform("modalOptionsCantBeEmpty"));
                        return rxjs.of(null);
                    }
                    modalOptions = JSON.parse(modalOptions);
                }
                /** @type {?} */
                var modalOpts = {
                    title: this.localePipe.transform("billTracker")
                };
                modalOpts = Object.assign(modalOpts, this.defaultModalOptions, modalOptions);
                if (typeof graphOptions == "string") {
                    if (graphOptions != "") {
                        graphOptions = JSON.parse(graphOptions);
                    }
                    else {
                        graphOptions = null;
                    }
                }
                if (typeof gridOptions == "string") {
                    if (gridOptions != "") {
                        gridOptions = JSON.parse(gridOptions);
                    }
                    else {
                        gridOptions = null;
                    }
                }
                /** @type {?} */
                var downArgs = new GetDownBillsInfoArgs();
                downArgs.billDataId = args.billDataId;
                downArgs.documentTypeId = args.documentTypeId;
                downArgs.bizKind = args.bizKind;
                downArgs.bizType = args.bizType;
                downArgs.billChildInfos = args.billChildInfos;
                downArgs.curYear = args.curYear;
                this.loading.show({ message: this.localePipe.transform("loading") });
                return this.dataService.canTracking(downArgs).pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res.canDownTracking && !res.canUpTracking) {
                        _this.messager.info(_this.localePipe.transform("noAssoBill"));
                        _this.loading.close();
                        return rxjs.of(null);
                    }
                    /** @type {?} */
                    var billTrackerArgs = new BillTrackerArgs();
                    billTrackerArgs.canTrackingResult = res;
                    billTrackerArgs.getBillsInfoArgs = args;
                    /** @type {?} */
                    var graphOpt = new BillTrackerGraphOptions();
                    graphOpt = Object.assign(graphOpt, graphOptions);
                    billTrackerArgs.graphOptions = graphOpt;
                    /** @type {?} */
                    var gridOpt = new BillTrackerGridOptions();
                    gridOpt = Object.assign(gridOpt, gridOptions);
                    billTrackerArgs.gridOptions = gridOpt;
                    /** @type {?} */
                    var cmpR = _this.createBillTrackerComponent(billTrackerArgs);
                    _this.loading.close();
                    /** @type {?} */
                    var modalRef = _this.modalService.show(cmpR, modalOpts);
                    if (maximized) {
                        modalRef.dialog.instance.maxDialog();
                    }
                    cmpR.instance.setModalRef(modalRef);
                    return rxjs.of(cmpR.instance);
                })), operators.catchError(( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.loading.close();
                    //todo 确定异常结构, 目前采用兼容取值方式
                    _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    throw err;
                })));
            };
        /**
         * 打开单据追踪应用
         * @param args 单据追踪参数
         * @param graphOptions 追踪图配置
         * @param gridOptions 数据表配置
         */
        /**
         * 打开单据追踪应用
         * @param {?} args 单据追踪参数
         * @param {?=} graphOptions 追踪图配置
         * @param {?=} gridOptions 数据表配置
         * @return {?}
         */
        BillTrackerUiService.prototype.openDefaultBillTrackerApp = /**
         * 打开单据追踪应用
         * @param {?} args 单据追踪参数
         * @param {?=} graphOptions 追踪图配置
         * @param {?=} gridOptions 数据表配置
         * @return {?}
         */
            function (args, graphOptions, gridOptions) {
                var _this = this;
                if (typeof graphOptions == "string") {
                    if (graphOptions == "") {
                        this.messager.info(this.localePipe.transform("modalOptionsCantBeEmpty"));
                        return;
                    }
                    graphOptions = JSON.parse(graphOptions);
                }
                if (typeof gridOptions == "string") {
                    if (gridOptions == "") {
                        this.messager.info(this.localePipe.transform("modalOptionsCantBeEmpty"));
                        return;
                    }
                    gridOptions = JSON.parse(gridOptions);
                }
                /** @type {?} */
                var downArgs = new GetDownBillsInfoArgs();
                downArgs.documentTypeId = args.documentTypeId;
                downArgs.billDataId = args.billDataId;
                downArgs.bizKind = args.bizKind;
                downArgs.bizType = args.bizType;
                downArgs.billChildInfos = args.billChildInfos;
                downArgs.curYear = args.curYear;
                this.loading.show({ message: this.localePipe.transform("loading") });
                this.dataService.canTracking(downArgs).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res.canDownTracking && !res.canUpTracking) {
                        _this.messager.info(_this.localePipe.transform("noAssoBill"));
                        _this.loading.close();
                        return;
                    }
                    /** @type {?} */
                    var billTrackerArgs = new BillTrackerArgs();
                    // warning：如果存在特殊字符或者长度超长，可能会打开空白的单据追踪应用
                    billTrackerArgs.canTrackingResult = res;
                    billTrackerArgs.getBillsInfoArgs = args;
                    /** @type {?} */
                    var graphOpt = new BillTrackerGraphOptions();
                    graphOpt = Object.assign(graphOpt, graphOptions);
                    billTrackerArgs.graphOptions = graphOpt;
                    /** @type {?} */
                    var gridOpt = new BillTrackerGridOptions();
                    gridOpt = Object.assign(gridOpt, gridOptions);
                    billTrackerArgs.gridOptions = gridOpt;
                    /** @type {?} */
                    var opt = {
                        appId: BillTrackerConstant.DEFAULT_APP_ID,
                        appEntrance: BillTrackerConstant.DEFAULT_APP_ENTRANCE,
                        funcId: BillTrackerConstant.DEFAULT_FUNC_ID,
                        tabId: "billTracker" + Date.now(),
                        tabName: _this.localePipe.transform("billTracker"),
                        appType: rtfCommon.AppType.App,
                        entityParams: billTrackerArgs,
                        queryStringParams: _this.buildQueryMap(billTrackerArgs),
                        isReload: undefined,
                    };
                    _this.frameworkService.openMenu(opt);
                    _this.loading.close();
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.loading.close();
                    //todo 确定异常结构, 目前采用兼容取值方式
                    _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    throw err;
                }));
            };
        /**
         * 创建单据追踪组件
         * @param billTrackerArgs 单据追踪参数
         * @param cfr ComponentFactoryResolver
         * @param injector Injector
         * @param custProviders 自定义Provider
         * @returns
         */
        /**
         * 创建单据追踪组件
         * @param {?} billTrackerArgs 单据追踪参数
         * @param {?=} cfr ComponentFactoryResolver
         * @param {?=} injector Injector
         * @param {?=} custProviders 自定义Provider
         * @return {?}
         */
        BillTrackerUiService.prototype.createBillTrackerComponent = /**
         * 创建单据追踪组件
         * @param {?} billTrackerArgs 单据追踪参数
         * @param {?=} cfr ComponentFactoryResolver
         * @param {?=} injector Injector
         * @param {?=} custProviders 自定义Provider
         * @return {?}
         */
            function (billTrackerArgs, cfr, injector, custProviders) {
                cfr = cfr == null ? this.cfr : cfr;
                injector = injector == null ? this.injector : injector;
                custProviders = custProviders == null || Array.isArray(custProviders) == false ? [] : custProviders;
                /** @type {?} */
                var inj = core$1.ReflectiveInjector.resolveAndCreate(__spread([
                    { provide: BillTrackerArgs, useValue: billTrackerArgs }
                ], custProviders), injector);
                /** @type {?} */
                var cmpF = cfr.resolveComponentFactory(BillTrackerComponent);
                /** @type {?} */
                var cmpR = cmpF.create(inj);
                return cmpR;
            };
        /**
         * 能否继续追踪
         * @param args
         * @returns
         */
        /**
         * 能否继续追踪
         * @param {?} args
         * @return {?}
         */
        BillTrackerUiService.prototype.canTracking = /**
         * 能否继续追踪
         * @param {?} args
         * @return {?}
         */
            function (args) {
                return this.dataService.canTracking(args);
            };
        /**
         * 获取下游单据信息
         * @param args
         * @returns
         */
        /**
         * 获取下游单据信息
         * @param {?} args
         * @return {?}
         */
        BillTrackerUiService.prototype.getDownBillsInfo = /**
         * 获取下游单据信息
         * @param {?} args
         * @return {?}
         */
            function (args) {
                return this.dataService.getDownBillsInfo(args);
            };
        /**
         * 获取上游单据信息
         * @param args
         * @returns
         */
        /**
         * 获取上游单据信息
         * @param {?} args
         * @return {?}
         */
        BillTrackerUiService.prototype.getUpBillsInfo = /**
         * 获取上游单据信息
         * @param {?} args
         * @return {?}
         */
            function (args) {
                return this.dataService.getUpBillsInfo(args);
            };
        /**
         * 查询实体数据
         * @param args
         * @returns
         */
        /**
         * 查询实体数据
         * @param {?} args
         * @return {?}
         */
        BillTrackerUiService.prototype.getEntityData = /**
         * 查询实体数据
         * @param {?} args
         * @return {?}
         */
            function (args) {
                return this.dataService.getEntityData(args);
            };
        /**
         * @private
         * @param {?} billTrackerArgs
         * @return {?}
         */
        BillTrackerUiService.prototype.buildQueryMap = /**
         * @private
         * @param {?} billTrackerArgs
         * @return {?}
         */
            function (billTrackerArgs) {
                /** @type {?} */
                var map = new Map();
                for (var key in billTrackerArgs) {
                    /** @type {?} */
                    var value = billTrackerArgs[key];
                    if (typeof value == "object") {
                        value = value && JSON.stringify(value);
                    }
                    // url编码后base64加密，避免url中出现特殊字符
                    // 在default-bill-tracker中解码时应先atob在decodeURIComponent
                    map.set(key, btoa(encodeURIComponent(value)));
                }
                return map;
            };
        BillTrackerUiService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BillTrackerUiService.ctorParameters = function () {
            return [
                { type: rtfCommon.FrameworkService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: BillTrackerDataService },
                { type: uiModal.BsModalService },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.Injector }
            ];
        };
        return BillTrackerUiService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/cell-data/CellData.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CellData = /** @class */ (function () {
        function CellData() {
            this.diagramInfo = {
                x: null,
                y: null,
                width: null,
                height: null,
                extProps: {}
            };
        }
        return CellData;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/cell-data/EntryCellData.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var EntryCellData = /** @class */ (function (_super) {
        __extends(EntryCellData, _super);
        function EntryCellData() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.ups = [];
            _this.downs = [];
            return _this;
        }
        return EntryCellData;
    }(CellData));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/cell-data/UpCellData.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpCellData = /** @class */ (function (_super) {
        __extends(UpCellData, _super);
        function UpCellData() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.ups = [];
            return _this;
        }
        return UpCellData;
    }(CellData));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/entity/tracking/cell-data/DownCellData.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DownCellData = /** @class */ (function (_super) {
        __extends(DownCellData, _super);
        function DownCellData() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.downs = [];
            return _this;
        }
        return DownCellData;
    }(CellData));

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/config/bill-tracker-cell-css.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 预置弹出菜单样式
     * @type {?}
     */
    var billTrackerPopupMenuCss = "\nbody div.mxPopupMenu {\n  -webkit-box-shadow: 3px 3px 6px #C0C0C0;\n  -moz-box-shadow: 3px 3px 6px #C0C0C0;\n  box-shadow: 3px 3px 6px #C0C0C0;\n  background: white;\n  position: absolute;\n  border: 3px solid #e7e7e7;\n  padding: 3px;\n}\nbody table.mxPopupMenu {\n  border-collapse: collapse;\n  margin: 0px;\n}\nbody tr.mxPopupMenuItem {\n  color: black;\n  cursor: default;\n}\nbody td.mxPopupMenuItem {\n  padding: 6px 60px 6px 30px;\n  font-family: Arial;\n  font-size: 10pt;\n}\nbody td.mxPopupMenuIcon {\n  background-color: white;\n  padding: 0px;\n}\nbody tr.mxPopupMenuItemHover {\n  background-color: #eeeeee;\n  color: black;\n}\ntable.mxPopupMenu hr {\n  border-top: solid 1px #cccccc;\n}\ntable.mxPopupMenu tr {\n  font-size: 4pt;\n}\n";
    /**
     * 预置节点样式类
     * @type {?}
     */
    var billTrackerCellCss = "\n.bif-cell-node {\n    position: relative;\n    height: 100%;\n    font-weight: normal;\n    font-family: PingFangSC-Regular;\n    display:block;\n    text-align: left;\n}\n.bif-cell-node-main {\n    height: 100%;\n    background: #FFFFFF;\n    border: 1px solid rgba(230,233,240,1);\n    box-shadow: 0px 2px 10px 0px rgba(3,18,51,0.08);\n    border-radius: 8px;\n    border-left-width: 4px;\n    border-left-color: #2A87FF;\n}\n.bif-cell-node-current {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 50px;\n    height: 28px;\n    background-image: linear-gradient(39deg, #F5A144 0%, #FFC527 100%);\n    box-shadow: 0px 2px 6px 0px rgba(245,161,68,0.4);\n    border-radius: 0px 8px 0px 64px;\n    color: white;\n    text-align: center;\n}\n.bif-cell-node-current-text {\n    display: block;\n    margin: auto;\n    line-height: 28px;\n}\n.bif-cell-node-title {\n    padding-left:19px;\n    padding-right:12px;\n    padding-top: 16px;\n    padding-bottom: 6px;\n}\n.bif-cell-node-title-text {\n    font-size: 16px;\n    color: #2D2F33;\n    letter-spacing: 0;\n    line-height: 24px;\n    font-weight: 400;\n    white-space: normal;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    word-break: break-all;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n}\n.bif-cell-node-summary-list {\n\n}\n.bif-cell-node-summary {\n    display: flex;\n    padding-left: 19px;\n    padding-right:12px;\n    font-size: 13px;\n    color: #5A5E66;\n    line-height: 24px;\n    font-weight: 400;\n}\n.bif-cell-node-summary-caption {\n    letter-spacing: 0;\n    margin-right: 4px;\n    width: 65px;\n    min-width: 65px;\n    text-align: right;\n}\n.bif-cell-node-summary-caption-text {\n    white-space: normal;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    word-break: break-all;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n}\n.bif-cell-node-summary-value {\n\n}\n.bif-cell-node-summary-value-text {\n    font-family: PingFangSC-Regular,HelveticaNeue,Helvetica,Arial,sans-serif;\n    color: rgba(0,0,0,0.85);\n    text-align: left;\n    white-space: normal;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    -webkit-line-clamp: 1;\n    word-break: break-all;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.bif-cell-node-title-link {\n}\n.bif-cell-node-title-link:hover {\n    text-decoration: underline;\n    cursor: pointer;\n}\n.bif-cell-node-title-link-color {\n    color: #56A0FF;\n}\n.bif-cell-node-title-only {\n    justify-content: center;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    border: 1px solid rgb(193,195,199,1);\n}\n.bif-cell-node-title-only-text {\n    font-size: xx-large;\n}\n.bif-cell-node-thumb {\n    height: 100%;\n    background: #FFFFFF;\n}\n.bif-cell-node-thumb-img-container {\n    height: 80%;\n}\n.bif-cell-node-thumb-img {\n    height: 100%;\n    width: 100%;\n}\n.bif-cell-node-thumb-title {\n    height: 20%;\n    display: flex;\n    justify-content: center;\n    display: flex;\n    align-items: center;\n}\n.bif-cell-node-thumb-title-text {\n    font-size: x-large;\n}\n.bif-cell-node-btn-group {\n    position: absolute;\n    bottom: 16px;\n    right: 16px;\n}\n.bif-cell-node-btn {\n    width: 22px;\n    height: 22px;\n    margin-left: 8px;\n    cursor: pointer;\n}\n.bif-cell-node .bif-cell-node-btn-group-control {\n    display: none;\n}\n.bif-cell-node:hover .bif-cell-node-btn-group-control {\n    display: unset;\n}\n";

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/utils/addCustomCSS.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 向head中添加样式类
     * @param {?} cssText
     * @return {?}
     */
    function addCustomCSS(cssText) {
        /** @type {?} */
        var style = ( /** @type {?} */(document.createElement('style')));
        //创建一个style元素
        /** @type {?} */
        var head = document.head || document.getElementsByTagName('head')[0];
        style.type = 'text/css'; //这里必须显示设置style元素的type属性为text/css，否则在ie中不起作用
        if (style.styleSheet) { //IE
            //IE
            /** @type {?} */
            var func = ( /**
             * @return {?}
             */function () {
                try { //防止IE中stylesheet数量超过限制而发生错误
                    style.styleSheet.cssText = cssText;
                }
                catch (e) {
                }
            });
            //如果当前styleSheet还不能用，则放到异步中则行
            if (style.styleSheet.disabled) {
                setTimeout(func, 10);
            }
            else {
                func();
            }
        }
        else { //w3c
            //w3c
            //w3c浏览器中只要创建文本节点插入到style元素中就行了
            /** @type {?} */
            var textNode = document.createTextNode(cssText);
            style.appendChild(textNode);
        }
        head.appendChild(style); //把创建的style元素插入到head中    
    }

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/bill-tracker-graph/bill-tracker-graph.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // 在head中添加节点样式
    addCustomCSS(billTrackerCellCss);
    // 在head中添加弹出菜单样式
    addCustomCSS(billTrackerPopupMenuCss);
    var BillTrackerGraphComponent = /** @class */ (function () {
        function BillTrackerGraphComponent(args, localeId, dataService, notify, messager, loading, modal, vcr, inj, cfr, cdr) {
            this.dataService = dataService;
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.vcr = vcr;
            this.inj = inj;
            this.cfr = cfr;
            this.cdr = cdr;
            this.selectEventEmitter = new core$1.EventEmitter();
            this.stateChangeEventEmitter = new core$1.EventEmitter();
            this.hspace = 80;
            this.vspace = 28;
            this.defaultWidth = 250;
            this.defaultHeight = 138;
            this.nodeWidth = this.defaultWidth;
            this.nodeHeight = this.defaultHeight;
            this.defaultNonEntryImage = (!mxClientType.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.svg';
            this.defaultEntryImage = (!mxClientType.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/entry-bill.svg';
            this.defaultOverlayWidth = 26;
            this.defaultOverlayHeight = 26;
            this.overlayWidth = this.defaultOverlayWidth;
            this.overlayHeight = this.defaultOverlayHeight;
            this.defaultUpSearchImage = new mxImageType(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
            this.defaultDownSearchImage = new mxImageType(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
            this.defaultUpFolderImage = new mxImageType(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
            this.defaultDownFolderImage = new mxImageType(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
            this.upSearchImage = this.defaultUpSearchImage;
            this.downSearchImage = this.defaultDownSearchImage;
            this.upFolderImage = this.defaultUpFolderImage;
            this.downFolderImage = this.defaultDownFolderImage;
            this.upSearchOffset = new mxPointType(-50, 0);
            this.downSearchOffset = new mxPointType(50, 0);
            /**
             * 正在加载中的单据节点请求数
             */
            this.numCellsAddingReq = 0;
            this.localePipe = new BillTrackerLocalePipe(localeId);
            this.dataInfoService = new BillTrackerDataInfoService();
            this.billTrackerArgs = args;
            this.originBillTrackerArgs = this.billTrackerArgs;
            /** @type {?} */
            var graphOptions = this.billTrackerArgs.graphOptions;
            this.graphOptions = graphOptions;
            /** @type {?} */
            var gridOptions = this.billTrackerArgs.gridOptions;
            this.gridOptions = gridOptions;
            this.upSearchImage = graphOptions && graphOptions.upSearchImage ? new mxImageType(graphOptions.upSearchImage, this.overlayWidth, this.overlayHeight) : this.upSearchImage;
            this.downSearchImage = graphOptions && graphOptions.downSearchImage ? new mxImageType(graphOptions.downSearchImage, this.overlayWidth, this.overlayHeight) : this.downSearchImage;
            this.upFolderImage = graphOptions && graphOptions.upFolderImage ? new mxImageType(graphOptions.upFolderImage, this.overlayWidth, this.overlayHeight) : this.upFolderImage;
            this.downFolderImage = graphOptions && graphOptions.downFolderImage ? new mxImageType(graphOptions.downFolderImage, this.overlayWidth, this.overlayHeight) : this.downFolderImage;
        }
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.graph = this.createGraph();
                this.createLayout(this.graph);
                this.layoutManager = new mxLayoutManagerType(this.graph);
                this.outline = new Outline(this.graph, this.mxOutlineContainer.nativeElement);
                // 创建节点“更多”按钮弹出菜单
                this.morePopupMenu = new mxPopupMenuType(( /**
                 * @param {?} menu
                 * @param {?} cell
                 * @param {?} evt
                 * @return {?}
                 */function (menu, cell, evt) {
                    // 继续追踪
                    menu.addItem(_this.localePipe.transform("goOnTracking"), null, ( /**
                     * @return {?}
                     */function () {
                        _this.goOnTrack(cell);
                    }));
                    // // 设为当前
                    // menu.addItem(this.localePipe.transform("setAsCurrent"), null, () => {
                    //   this.setAsCurrent(cell);
                    // });
                }));
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?=} sizeDidChange
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.refresh = /**
         * @param {?=} sizeDidChange
         * @return {?}
         */
            function (sizeDidChange) {
                if (sizeDidChange === void 0) {
                    sizeDidChange = true;
                }
                if (sizeDidChange && this.graph != null) {
                    this.graph.sizeDidChange();
                }
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.paint = /**
         * @return {?}
         */
            function () {
                this.paintGraph(this.graph);
            };
        /**
         * @param {?} modalRef
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.setModalRef = /**
         * @param {?} modalRef
         * @return {?}
         */
            function (modalRef) {
                var _this = this;
                this.modalRef = modalRef;
                if (this.modalRef != null) {
                    this.modalRef.dialog.instance.closed.subscribe(( /**
                     * @param {?} evt
                     * @return {?}
                     */function (evt) {
                        _this.graph && _this.graph.destroy();
                    }));
                    // todo: 临时解决弹窗模式下先刷新出入口节点问题
                    /** @type {?} */
                    var flag_1 = 0;
                    this.modalRef.dialog.instance.resized.subscribe(( /**
                     * @param {?} evt
                     * @return {?}
                     */function (evt) {
                        if (flag_1 >= 2) {
                            _this.refresh();
                        }
                        flag_1++;
                    }));
                }
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.createGraph = /**
         * @return {?}
         */
            function () {
                //启用mxGuide
                mxGraphHandlerType.prototype.guidesEnabled = true;
                //禁用mxgraph容器内上下文菜单
                mxEventType.disableContextMenu(this.mxContainerER.nativeElement);
                mxGraphHandlerType.prototype.scrollOnMove = false;
                mxGraphHandlerType.prototype.scaleGrid = true;
                //修改节点选中后处理器图片及填充色
                mxConstantsType.HANDLE_FILLCOLOR = '#29b6f2';
                mxHandleType.prototype.createShape = ( /**
                 * @param {?} html
                 * @return {?}
                 */function (html) {
                    /** @type {?} */
                    var bounds = new mxEllipseType(0, 0, mxConstantsType.HANDLE_SIZE, mxConstantsType.HANDLE_SIZE);
                    return new mxEllipseType(bounds, mxConstantsType.HANDLE_FILLCOLOR, mxConstantsType.HANDLE_STROKECOLOR);
                });
                mxVertexHandlerType.prototype.handleImage = (!mxClientType.IS_SVG) ? new mxImageType(BillTrackerConstant.IMAGE_PATH + '/handle-main.png', mxConstantsType.HANDLE_SIZE, mxConstantsType.HANDLE_SIZE) : Graph.createSvgImage(18, 18, '<circle cx="9" cy="9" r="3" stroke="#fff" fill="' + Graph.handleFill + '" stroke-width="1"/>');
                mxConstantsType.DEFAULT_VALID_COLOR = '#FFFFFF';
                mxConstantsType.HIGHLIGHT_STROKEWIDTH = 1;
                //修改mxGuide默认配置
                mxConstantsType.GUIDE_COLOR = '#0088cf';
                mxGuideType.prototype.createGuideShape = ( /**
                 * @param {?} horizontal
                 * @return {?}
                 */function (horizontal) { return new mxPolylineType([], mxConstantsType.GUIDE_COLOR, mxConstantsType.GUIDE_STROKEWIDTH); });
                //设置节点选中线框宽度
                mxConstantsType.VERTEX_SELECTION_STROKEWIDTH = 1;
                mxConstantsType.VERTEX_SELECTION_COLOR = '#3E8DFF';
                mxConstantsType.VERTEX_SELECTION_DASHED = false;
                //修改线宽
                mxConnectionHandlerType.prototype.getEdgeWidth = ( /**
                 * @param {?} valid
                 * @return {?}
                 */function (valid) { return 1; });
                mxConstantsType.VALID_COLOR = '#00CD66';
                //创建mxGraph
                /** @type {?} */
                var graph = new Graph(this.mxContainerER.nativeElement, undefined, undefined, undefined);
                graph.localePipe = this.localePipe;
                graph.graphOptions = this.graphOptions;
                graph.gridOptions = this.gridOptions;
                //添加自定义监听器
                this.addListener(graph);
                graph.ngComp = this;
                return graph;
            };
        /**
         * @param {?} graph
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.createLayout = /**
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                /** @type {?} */
                var upLayout = new RevertCompactTreeLayout(graph, true);
                upLayout.levelDistance = this.hspace;
                upLayout.edgeRouting = false;
                upLayout.resetEdges = false;
                this.upLayout = upLayout;
                /** @type {?} */
                var downLayout = new CompactTreeLayout(graph, true);
                downLayout.levelDistance = this.hspace;
                downLayout.edgeRouting = false;
                downLayout.resetEdges = true;
                this.downLayout = downLayout;
            };
        /**
         * @param {?} graph
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.addListener = /**
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                var _this = this;
                /** @type {?} */
                var autoAdjustHandler = ( /**
                 * @return {?}
                 */function () {
                    window.setTimeout(( /**
                     * @return {?}
                     */function () {
                        if (_this.graph != null) {
                            _this.refresh();
                        }
                    }), 0);
                });
                mxEventType.addListener(window, 'resize', autoAdjustHandler);
                /** @type {?} */
                var wheelResizeHandler = ( /**
                 * @param {?} evt
                 * @param {?} up
                 * @return {?}
                 */function (evt, up) {
                    // window下Ctrl按下，Mac下Command按下
                    if (mxEventType.isControlDown(evt) || (mxClientType.IS_MAC && evt.metaKey)) {
                        if (up) {
                            _this.zoomIn();
                        }
                        else {
                            _this.zoomOut();
                        }
                        mxEventType.consume(evt);
                        return false;
                    }
                });
                mxEventType.addMouseWheelListener(wheelResizeHandler, this.mxContainerER.nativeElement);
                graph.selectEventEmitter = this.selectEventEmitter;
                graph.getSelectionModel().addListener(mxEventType.CHANGE, ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    if (!(sender instanceof mxGraphSelectionModelType)) {
                        return;
                    }
                    /** @type {?} */
                    var selectionModel = sender;
                    //若未选中节点或者选中节点数不为1
                    if (selectionModel.cells == null || selectionModel.cells.length != 1) {
                        _this.selectEventEmitter.emit(null);
                        return;
                    }
                    /** @type {?} */
                    var selectedCell = selectionModel.cells[0];
                    //选中的是边
                    if (selectedCell.edge || !selectedCell.vertex) {
                        return;
                    }
                    _this.selectEventEmitter.emit(selectedCell);
                }));
                graph.addListener(Events.CLICK_FIRST_SUMMARY, ( /**
                 * @param {?} serder
                 * @param {?} evt
                 * @return {?}
                 */function (serder, evt) {
                    /** @type {?} */
                    var cell = evt.getProperty("cell");
                    _this.stateChangeEventEmitter.emit({
                        type: Events.CLICK_FIRST_SUMMARY,
                        data: cell
                    });
                    // 点击超链接时主动触发节点选中事件
                    graph.setSelectionCell(cell);
                }));
                // 定义全局事件处理器，点击空白处隐藏弹出菜单
                /** @type {?} */
                var gestureHandler = ( /**
                 * @param {?} evt
                 * @return {?}
                 */function (evt) {
                    if (_this.currentMenu != null && mxEventType.getSource(evt) != _this.currentMenu.div) {
                        _this.hideCurrentMenu();
                    }
                });
                mxEventType.addGestureListeners(document, gestureHandler);
            };
        /**
         * 隐藏当前菜单
         */
        /**
         * 隐藏当前菜单
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.hideCurrentMenu = /**
         * 隐藏当前菜单
         * @return {?}
         */
            function () {
                if (this.currentMenu != null) {
                    this.currentMenu.hideMenu();
                    this.resetCurrentMenu();
                }
            };
        /**
         * 重置当前菜单
         */
        /**
         * 重置当前菜单
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.resetCurrentMenu = /**
         * 重置当前菜单
         * @return {?}
         */
            function () {
                this.currentMenu = null;
                this.currentMenuElt = null;
            };
        /**
         * @param {?} graph
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.paintGraph = /**
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                graph.getModel().beginUpdate();
                this.entry = this.paintEntry(graph);
                this.afterPaintGraph(this.graph, this.entry);
                graph.getModel().endUpdate();
            };
        /**
         * @param {?} graph
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.repaintGraph = /**
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                graph.getModel().beginUpdate();
                graph.removeCells(graph.getChildCells(graph.getDefaultParent()));
                this.paintGraph(graph);
                graph.getModel().endUpdate();
            };
        /**
         * @param {?} graph
         * @param {?} entry
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.afterPaintGraph = /**
         * @param {?} graph
         * @param {?} entry
         * @return {?}
         */
            function (graph, entry) {
                if (entry == null) {
                    return;
                }
                // 默认选中入口节点
                if (this.billTrackerArgs.gridOptions.showEntryData) {
                    graph.setSelectionCell(this.entry);
                }
                // 默认展示一层？
                /** @type {?} */
                var canTrackingResult = this.billTrackerArgs.canTrackingResult;
                if (this.billTrackerArgs.graphOptions.showDownBills == true) {
                    canTrackingResult.canDownTracking && this.entry.downCellOverlay && this.entry.downCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK, "resetView", true));
                }
                if (this.billTrackerArgs.graphOptions.showUpBills == true) {
                    canTrackingResult.canUpTracking && this.entry.upCellOverlay && this.entry.upCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK, "resetView", true));
                }
            };
        /**
         * @param {?} graph
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.paintEntry = /**
         * @param {?} graph
         * @return {?}
         */
            function (graph) {
                /** @type {?} */
                var entry = null;
                if (this.billTrackerArgs == null || this.billTrackerArgs.canTrackingResult == null) {
                    return entry;
                }
                /** @type {?} */
                var canTrackingResult = this.billTrackerArgs.canTrackingResult;
                /** @type {?} */
                var info = this.dataService.buildEntryBillInfo(canTrackingResult);
                /** @type {?} */
                var dataInfo = info.billDataInfos[0];
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                bts.LoadFromJson(canTrackingResult.billTrackingSettings);
                /** @type {?} */
                var parent = graph.getDefaultParent();
                graph.getModel().beginUpdate();
                try {
                    /** @type {?} */
                    var x0 = 0;
                    /** @type {?} */
                    var y0 = 0;
                    /** @type {?} */
                    var bts_1 = new commonApi.BillTrackingSettings();
                    if (info && info.billTrackingSettings) {
                        bts_1.LoadFromJson(info.billTrackingSettings);
                    }
                    /** @type {?} */
                    var customStyle = "";
                    entry = graph.insertBillCell(parent, null, dataInfo, info, true, x0, y0, this.nodeWidth, this.nodeHeight, "billNode;billNodeEntry;" + customStyle);
                    /** @type {?} */
                    var geometry = graph.getModel().getGeometry(entry);
                    /** @type {?} */
                    var size = graph.getPreferredSizeForCell(entry);
                    this.entryCellData = new EntryCellData();
                    this.setCellData(this.entryCellData, entry);
                    this.entryCellData.canTrackingResult = canTrackingResult;
                    entry.data = this.entryCellData;
                    // 添加上查下查按钮
                    if (canTrackingResult.canDownTracking) {
                        /** @type {?} */
                        var overlay = this.addDownOverlay(graph, entry);
                        entry.downCellOverlay = overlay;
                    }
                    if (canTrackingResult.canUpTracking) {
                        /** @type {?} */
                        var overlay = this.addUpOverlay(graph, entry);
                        entry.upCellOverlay = overlay;
                    }
                    this.upParent = parent.clone();
                    this.downParent = parent.clone();
                    graph.addCells([this.upParent, this.downParent], parent);
                }
                finally {
                    graph.getModel().endUpdate();
                }
                return entry;
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.addUpOverlay = /**
         * @param {?} graph
         * @param {?} cell
         * @return {?}
         */
            function (graph, cell) {
                var _this = this;
                /** @type {?} */
                var upSearch = new CellOverlay(this.upSearchImage, this.localePipe.transform("upSearch"), mxConstantsType.ALIGN_LEFT, mxConstantsType.ALIGN_MIDDLE, this.upSearchOffset, "hand");
                upSearch.state = CellOverlayState.Search;
                /** @type {?} */
                var upSearchHandler = ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    /** @type {?} */
                    var resetView = evt.getProperty("resetView");
                    /** @type {?} */
                    var showLoading = evt.getProperty("showLoading") != null ? evt.getProperty("showLoading") : true;
                    graph.getModel().beginUpdate();
                    _this.addUpAssoCell(graph, cell, resetView, showLoading);
                    upSearch.removeListener(upSearchHandler);
                    upSearch.tooltip = _this.localePipe.transform("folder");
                    upSearch.image = _this.upFolderImage;
                    upSearch.state = CellOverlayState.Fold;
                    upSearch.addListener(mxEventType.CLICK, upFolderHandler);
                    graph.removeCellOverlay(cell, upSearch);
                    graph.addCellOverlay(cell, upSearch);
                    graph.getModel().endUpdate();
                });
                /** @type {?} */
                var upFolderHandler = ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    graph.getModel().beginUpdate();
                    _this.removeAssoCell(graph, cell, BillTrackerDirection.Up);
                    upSearch.removeListener(upFolderHandler);
                    upSearch.tooltip = _this.localePipe.transform("upSearch");
                    upSearch.image = _this.upSearchImage;
                    upSearch.state = CellOverlayState.Search;
                    upSearch.addListener(mxEventType.CLICK, upSearchHandler);
                    graph.removeCellOverlay(cell, upSearch);
                    graph.addCellOverlay(cell, upSearch);
                    graph.model.endUpdate();
                });
                upSearch.addListener(mxEventType.CLICK, upSearchHandler);
                graph.removeCellOverlay(cell, upSearch);
                graph.addCellOverlay(cell, upSearch);
                return upSearch;
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.addDownOverlay = /**
         * @param {?} graph
         * @param {?} cell
         * @return {?}
         */
            function (graph, cell) {
                var _this = this;
                /** @type {?} */
                var downSearch = new CellOverlay(this.downSearchImage, this.localePipe.transform("downSearch"), mxConstantsType.ALIGN_RIGHT, mxConstantsType.ALIGN_MIDDLE, this.downSearchOffset, "hand");
                downSearch.state = CellOverlayState.Search;
                /** @type {?} */
                var downSearchHandler = ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    /** @type {?} */
                    var resetView = evt.getProperty("resetView");
                    /** @type {?} */
                    var showLoading = evt.getProperty("showLoading") != null ? evt.getProperty("showLoading") : true;
                    graph.getModel().beginUpdate();
                    _this.addDownAssoCell(graph, cell, resetView, showLoading);
                    downSearch.image = _this.downFolderImage;
                    downSearch.tooltip = _this.localePipe.transform("folder");
                    downSearch.state = CellOverlayState.Fold;
                    downSearch.removeListener(downSearchHandler);
                    downSearch.addListener(mxEventType.CLICK, downFolderHandler);
                    graph.removeCellOverlay(cell, downSearch);
                    graph.addCellOverlay(cell, downSearch);
                    // graph.refresh(cell);
                    graph.getModel().endUpdate();
                });
                /** @type {?} */
                var downFolderHandler = ( /**
                 * @param {?} sender
                 * @param {?} evt
                 * @return {?}
                 */function (sender, evt) {
                    graph.getModel().beginUpdate();
                    _this.removeAssoCell(graph, cell, BillTrackerDirection.Down);
                    downSearch.image = _this.downSearchImage;
                    downSearch.tooltip = _this.localePipe.transform("downSearch");
                    downSearch.state = CellOverlayState.Search;
                    downSearch.removeListener(downFolderHandler);
                    downSearch.addListener(mxEventType.CLICK, downSearchHandler);
                    graph.removeCellOverlay(cell, downSearch);
                    graph.addCellOverlay(cell, downSearch);
                    // graph.refresh(cell);
                    graph.getModel().endUpdate();
                });
                downSearch.addListener(mxEventType.CLICK, downSearchHandler);
                graph.removeCellOverlay(cell, downSearch);
                graph.addCellOverlay(cell, downSearch);
                return downSearch;
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?=} resetView
         * @param {?=} showLoading
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.addUpAssoCell = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?=} resetView
         * @param {?=} showLoading
         * @return {?}
         */
            function (graph, cell, resetView, showLoading) {
                var _this = this;
                if (resetView === void 0) {
                    resetView = false;
                }
                if (showLoading === void 0) {
                    showLoading = true;
                }
                graph.getModel().beginUpdate();
                /** @type {?} */
                var args = this.dataService.buildGetUpBillsInfoArgs(cell);
                /** @type {?} */
                var l = showLoading && (this.loading.clearAll(), this.loading.show({ message: this.localePipe.transform("loading") }));
                this.numCellsAddingReq++;
                this.dataService.getUpBillsInfo(args).subscribe(( /**
                 * @param {?} infos
                 * @return {?}
                 */function (infos) {
                    var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
                    /** @type {?} */
                    var parent = graph.getDefaultParent();
                    /** @type {?} */
                    var newCells = [];
                    // graph.getModel().beginUpdate();
                    try {
                        try {
                            for (var infos_1 = __values(infos), infos_1_1 = infos_1.next(); !infos_1_1.done; infos_1_1 = infos_1.next()) {
                                var info = infos_1_1.value;
                                try {
                                    for (var _e = __values(info.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                        var dataInfo = _f.value;
                                        /** @type {?} */
                                        var billCell = null;
                                        /** @type {?} */
                                        var bts = new commonApi.BillTrackingSettings();
                                        if (info && info.billTrackingSettings) {
                                            bts.LoadFromJson(info.billTrackingSettings);
                                        }
                                        /** @type {?} */
                                        var customStyle = "";
                                        billCell = graph.insertBillCell(_this.upParent, null, dataInfo, info, false, cell.geometry.x - _this.hspace, cell.geometry.y, _this.nodeWidth, _this.nodeHeight, "billNode;" + customStyle);
                                        newCells.push(billCell);
                                    }
                                }
                                catch (e_2_1) {
                                    e_2 = { error: e_2_1 };
                                }
                                finally {
                                    try {
                                        if (_f && !_f.done && (_b = _e.return))
                                            _b.call(_e);
                                    }
                                    finally {
                                        if (e_2)
                                            throw e_2.error;
                                    }
                                }
                            }
                        }
                        catch (e_1_1) {
                            e_1 = { error: e_1_1 };
                        }
                        finally {
                            try {
                                if (infos_1_1 && !infos_1_1.done && (_a = infos_1.return))
                                    _a.call(infos_1);
                            }
                            finally {
                                if (e_1)
                                    throw e_1.error;
                            }
                        }
                        _this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Up);
                        try {
                            for (var newCells_1 = __values(newCells), newCells_1_1 = newCells_1.next(); !newCells_1_1.done; newCells_1_1 = newCells_1.next()) {
                                var nc = newCells_1_1.value;
                                if (nc.billDataInfo.canContinueTracking) {
                                    /** @type {?} */
                                    var ol = _this.addUpOverlay(graph, nc);
                                    nc.upCellOverlay = ol;
                                }
                                graph.insertEdge(parent, null, '', nc, cell, "billAssociation;");
                            }
                        }
                        catch (e_3_1) {
                            e_3 = { error: e_3_1 };
                        }
                        finally {
                            try {
                                if (newCells_1_1 && !newCells_1_1.done && (_c = newCells_1.return))
                                    _c.call(newCells_1);
                            }
                            finally {
                                if (e_3)
                                    throw e_3.error;
                            }
                        }
                        /** @type {?} */
                        var oldGeo = _this.entry.getGeometry().clone();
                        _this.upLayout.execute(_this.upParent, _this.entry);
                        /** @type {?} */
                        var newGeo = _this.entry.getGeometry().clone();
                        /** @type {?} */
                        var dx = oldGeo.x - newGeo.x;
                        /** @type {?} */
                        var dy = oldGeo.y - newGeo.y;
                        _this.restoreEntryPosition(graph, _this.entry, dx, dy);
                        /** @type {?} */
                        var cellData = ( /** @type {?} */(cell.data));
                        cellData.ups.length = 0;
                        try {
                            for (var newCells_2 = __values(newCells), newCells_2_1 = newCells_2.next(); !newCells_2_1.done; newCells_2_1 = newCells_2.next()) {
                                var nc = newCells_2_1.value;
                                /** @type {?} */
                                var cd = new UpCellData();
                                _this.setCellData(cd, nc);
                                nc.data = cd;
                                cd.down = cellData;
                                cellData.ups.push(cd);
                            }
                        }
                        catch (e_4_1) {
                            e_4 = { error: e_4_1 };
                        }
                        finally {
                            try {
                                if (newCells_2_1 && !newCells_2_1.done && (_d = newCells_2.return))
                                    _d.call(newCells_2);
                            }
                            finally {
                                if (e_4)
                                    throw e_4.error;
                            }
                        }
                    }
                    finally {
                        graph.getModel().endUpdate();
                    }
                    // 重绘画布大小
                    resetView && graph.fireEvent(new mxEventObjectType(Events.RESET_GRAPH_VIEW));
                    _this.numCellsAddingReq--;
                    // 自定义单据节点插入并移位后事件
                    _this.graph.fireEvent(new mxEventObjectType(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', _this.upParent));
                    l && l.close();
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.numCellsAddingReq--;
                    l && l.close();
                    _this.messager.currentId == -1 && _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    throw err;
                }));
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?=} resetView
         * @param {?=} showLoading
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.addDownAssoCell = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?=} resetView
         * @param {?=} showLoading
         * @return {?}
         */
            function (graph, cell, resetView, showLoading) {
                var _this = this;
                if (resetView === void 0) {
                    resetView = false;
                }
                if (showLoading === void 0) {
                    showLoading = true;
                }
                graph.getModel().beginUpdate();
                /** @type {?} */
                var args = this.dataService.buildGetDownBillsInfoArgs(cell);
                /** @type {?} */
                var l = showLoading && (this.loading.clearAll(), this.loading.show({ message: this.localePipe.transform("loading") }));
                this.numCellsAddingReq++;
                this.dataService.getDownBillsInfo(args).subscribe(( /**
                 * @param {?} infos
                 * @return {?}
                 */function (infos) {
                    var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
                    /** @type {?} */
                    var model = graph.getModel();
                    /** @type {?} */
                    var parent = graph.getDefaultParent();
                    /** @type {?} */
                    var newCells = [];
                    // graph.getModel().beginUpdate();
                    try {
                        try {
                            for (var infos_2 = __values(infos), infos_2_1 = infos_2.next(); !infos_2_1.done; infos_2_1 = infos_2.next()) {
                                var info = infos_2_1.value;
                                try {
                                    for (var _e = __values(info.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                        var dataInfo = _f.value;
                                        /** @type {?} */
                                        var billCell = null;
                                        /** @type {?} */
                                        var bts = new commonApi.BillTrackingSettings();
                                        if (info && info.billTrackingSettings) {
                                            bts.LoadFromJson(info.billTrackingSettings);
                                        }
                                        /** @type {?} */
                                        var customStyle = "";
                                        billCell = graph.insertBillCell(_this.downParent, null, dataInfo, info, false, cell.geometry.x + _this.hspace, cell.geometry.y, _this.nodeWidth, _this.nodeHeight, "billNode;" + customStyle);
                                        newCells.push(billCell);
                                    }
                                }
                                catch (e_6_1) {
                                    e_6 = { error: e_6_1 };
                                }
                                finally {
                                    try {
                                        if (_f && !_f.done && (_b = _e.return))
                                            _b.call(_e);
                                    }
                                    finally {
                                        if (e_6)
                                            throw e_6.error;
                                    }
                                }
                            }
                        }
                        catch (e_5_1) {
                            e_5 = { error: e_5_1 };
                        }
                        finally {
                            try {
                                if (infos_2_1 && !infos_2_1.done && (_a = infos_2.return))
                                    _a.call(infos_2);
                            }
                            finally {
                                if (e_5)
                                    throw e_5.error;
                            }
                        }
                        _this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Down);
                        try {
                            for (var newCells_3 = __values(newCells), newCells_3_1 = newCells_3.next(); !newCells_3_1.done; newCells_3_1 = newCells_3.next()) {
                                var nc = newCells_3_1.value;
                                if (nc.billDataInfo.canContinueTracking) {
                                    /** @type {?} */
                                    var ol = _this.addDownOverlay(graph, nc);
                                    nc.downCellOverlay = ol;
                                }
                                graph.insertEdge(parent, null, '', cell, nc, "billAssociation;");
                            }
                        }
                        catch (e_7_1) {
                            e_7 = { error: e_7_1 };
                        }
                        finally {
                            try {
                                if (newCells_3_1 && !newCells_3_1.done && (_c = newCells_3.return))
                                    _c.call(newCells_3);
                            }
                            finally {
                                if (e_7)
                                    throw e_7.error;
                            }
                        }
                        /** @type {?} */
                        var oldGeo = _this.entry.getGeometry().clone();
                        _this.downLayout.execute(_this.downParent, _this.entry);
                        /** @type {?} */
                        var newGeo = _this.entry.getGeometry().clone();
                        /** @type {?} */
                        var dx = oldGeo.x - newGeo.x;
                        /** @type {?} */
                        var dy = oldGeo.y - newGeo.y;
                        _this.restoreEntryPosition(graph, _this.entry, dx, dy);
                        /** @type {?} */
                        var cellData = ( /** @type {?} */(cell.data));
                        cellData.downs.length = 0;
                        try {
                            for (var newCells_4 = __values(newCells), newCells_4_1 = newCells_4.next(); !newCells_4_1.done; newCells_4_1 = newCells_4.next()) {
                                var nc = newCells_4_1.value;
                                /** @type {?} */
                                var cd = new DownCellData();
                                _this.setCellData(cd, nc);
                                nc.data = cd;
                                cd.up = cellData;
                                cellData.downs.push(cd);
                            }
                        }
                        catch (e_8_1) {
                            e_8 = { error: e_8_1 };
                        }
                        finally {
                            try {
                                if (newCells_4_1 && !newCells_4_1.done && (_d = newCells_4.return))
                                    _d.call(newCells_4);
                            }
                            finally {
                                if (e_8)
                                    throw e_8.error;
                            }
                        }
                    }
                    finally {
                        graph.getModel().endUpdate();
                    }
                    // 重绘画布大小
                    resetView && graph.fireEvent(new mxEventObjectType(Events.RESET_GRAPH_VIEW));
                    _this.numCellsAddingReq--;
                    // 自定义单据节点插入并移位后事件
                    _this.graph.fireEvent(new mxEventObjectType(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', _this.downParent));
                    l && l.close();
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.numCellsAddingReq--;
                    l && l.close();
                    _this.messager.currentId == -1 && _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    throw err;
                }));
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} dir
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.removeAssoCell = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} dir
         * @return {?}
         */
            function (graph, cell, dir) {
                /** @type {?} */
                var model = graph.getModel();
                /** @type {?} */
                var parent = graph.getDefaultParent();
                graph.getModel().beginUpdate();
                try {
                    /** @type {?} */
                    var assoCells = [];
                    if (dir == BillTrackerDirection.Down) {
                        /** @type {?} */
                        var edges = model.getOutgoingEdges(cell);
                        /** @type {?} */
                        var i = 0;
                        while (edges && edges.length > 0 && i < edges.length) {
                            if (edges[i].target && edges[i].target != this.entry) {
                                assoCells.push(( /** @type {?} */(edges[i].target)));
                                edges.push.apply(edges, __spread(model.getOutgoingEdges(edges[i].target)));
                            }
                            i++;
                        }
                    }
                    else if (dir == BillTrackerDirection.Up) {
                        /** @type {?} */
                        var edges = model.getIncomingEdges(cell);
                        /** @type {?} */
                        var i = 0;
                        while (edges && edges.length > 0 && i < edges.length) {
                            if (edges[i].source && edges[i].source != this.entry) {
                                assoCells.push(( /** @type {?} */(edges[i].source)));
                                edges.push.apply(edges, __spread(model.getIncomingEdges(edges[i].source)));
                            }
                            i++;
                        }
                    }
                    if (dir == BillTrackerDirection.Down) {
                        (( /** @type {?} */(cell.data))).downs.length = 0;
                    }
                    else if (dir == BillTrackerDirection.Up) {
                        (( /** @type {?} */(cell.data))).ups.length = 0;
                    }
                    graph.removeCells(assoCells);
                    /** @type {?} */
                    var oldGeo = this.entry.getGeometry().clone();
                    this.upLayout.execute(this.upParent, this.entry);
                    /** @type {?} */
                    var newGeo = this.entry.getGeometry().clone();
                    /** @type {?} */
                    var dx = oldGeo.x - newGeo.x;
                    /** @type {?} */
                    var dy = oldGeo.y - newGeo.y;
                    this.restoreEntryPosition(graph, this.entry, dx, dy);
                    /** @type {?} */
                    var oldGeo2 = this.entry.getGeometry().clone();
                    this.downLayout.execute(this.downParent, this.entry);
                    /** @type {?} */
                    var newGeo2 = this.entry.getGeometry().clone();
                    /** @type {?} */
                    var dx2 = oldGeo2.x - newGeo2.x;
                    /** @type {?} */
                    var dy2 = oldGeo2.y - newGeo2.y;
                    this.restoreEntryPosition(graph, this.entry, dx2, dy2);
                }
                finally {
                    graph.getModel().endUpdate();
                }
            };
        /**
         * @param {?} graph
         * @param {?} entry
         * @param {?} dx
         * @param {?} dy
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.restoreEntryPosition = /**
         * @param {?} graph
         * @param {?} entry
         * @param {?} dx
         * @param {?} dy
         * @return {?}
         */
            function (graph, entry, dx, dy) {
                graph.getModel().beginUpdate();
                try {
                    /** @type {?} */
                    var vertices = null;
                    vertices = __spread([entry], graph.getChildCells(this.upParent, true, false), graph.getChildCells(this.downParent, true, false));
                    graph.moveCells(vertices, dx, dy);
                }
                finally {
                    graph.getModel().endUpdate();
                }
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @param {?} dir
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.calCellsPosition = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @param {?} dir
         * @return {?}
         */
            function (graph, cell, newCells, dir) {
                if (dir == BillTrackerDirection.Down) {
                    this.resetDownCellsPosition(graph, cell, newCells);
                }
                else if (dir == BillTrackerDirection.Up) {
                    this.resetUpCellsPosition(graph, cell, newCells);
                }
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.resetDownCellsPosition = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @return {?}
         */
            function (graph, cell, newCells) {
                graph.getModel().beginUpdate();
                try {
                    /** @type {?} */
                    var targets = graph.getOutgoingEdges(cell).map(( /**
                     * @param {?} edge
                     * @return {?}
                     */function (edge) { return edge.target; }));
                    /** @type {?} */
                    var deals = targets;
                    //按纵坐标从大到小排序
                    /** @type {?} */
                    var temp = deals.sort(( /**
                     * @param {?} c1
                     * @param {?} c2
                     * @return {?}
                     */function (c1, c2) { return c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE; }));
                    //最小纵坐标
                    /** @type {?} */
                    var minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
                    //最大纵坐标
                    /** @type {?} */
                    var maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
                    //依次修改新插入节点的纵坐标
                    for (var i = 0; i < newCells.length; i++) {
                        maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                        graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                        deals.push(newCells[i]);
                    }
                    /** @type {?} */
                    var midY = (maxY + minY) / 2;
                    /** @type {?} */
                    var diffY_1 = cell.geometry.y - midY;
                    //依次修改所有点纵坐标
                    deals.forEach(( /**
                     * @param {?} c
                     * @return {?}
                     */function (c) {
                        graph.translateCell(c, 0, diffY_1);
                    }));
                    minY += diffY_1;
                    maxY += diffY_1;
                    midY += diffY_1;
                    // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
                    for (var key in graph.model.cells) {
                        if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                            continue;
                        }
                        if (graph.model.cells[key] == cell || newCells.indexOf(( /** @type {?} */(graph.model.cells[key]))) != -1) {
                            continue;
                        }
                        if (graph.model.cells[key] == this.entry) {
                            continue;
                        }
                        if (graph.model.cells[key].geometry.x < this.entry.geometry.x) {
                            continue;
                        }
                        /** @type {?} */
                        var c = graph.model.cells[key];
                        /** @type {?} */
                        var geo = c.geometry;
                        graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
                    }
                }
                finally {
                    graph.getModel().endUpdate();
                }
            };
        /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.resetUpCellsPosition = /**
         * @param {?} graph
         * @param {?} cell
         * @param {?} newCells
         * @return {?}
         */
            function (graph, cell, newCells) {
                graph.getModel().beginUpdate();
                try {
                    /** @type {?} */
                    var sources = graph.getIncomingEdges(cell).map(( /**
                     * @param {?} edge
                     * @return {?}
                     */function (edge) { return edge.source; }));
                    /** @type {?} */
                    var deals = sources;
                    //按纵坐标从大到小排序
                    /** @type {?} */
                    var temp = deals.sort(( /**
                     * @param {?} c1
                     * @param {?} c2
                     * @return {?}
                     */function (c1, c2) { return c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE; }));
                    //最小纵坐标
                    /** @type {?} */
                    var minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
                    //最大纵坐标
                    /** @type {?} */
                    var maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
                    //依次修改新插入节点的纵坐标
                    for (var i = 0; i < newCells.length; i++) {
                        maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                        graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                        deals.push(newCells[i]);
                    }
                    /** @type {?} */
                    var midY = (maxY + minY) / 2;
                    /** @type {?} */
                    var diffY_2 = cell.geometry.y - midY;
                    //依次修改所有点纵坐标
                    deals.forEach(( /**
                     * @param {?} c
                     * @return {?}
                     */function (c) {
                        graph.translateCell(c, 0, diffY_2);
                    }));
                    minY += diffY_2;
                    maxY += diffY_2;
                    midY += diffY_2;
                    // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
                    for (var key in graph.model.cells) {
                        if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                            continue;
                        }
                        if (graph.model.cells[key] == cell || newCells.indexOf(( /** @type {?} */(graph.model.cells[key]))) != -1) {
                            continue;
                        }
                        if (graph.model.cells[key] == this.entry) {
                            continue;
                        }
                        if (graph.model.cells[key].geometry.x > this.entry.geometry.x) {
                            continue;
                        }
                        /** @type {?} */
                        var c = graph.model.cells[key];
                        /** @type {?} */
                        var geo = c.geometry;
                        graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
                    }
                }
                finally {
                    graph.getModel().endUpdate();
                }
            };
        /**
         * @param {?} cellData
         * @param {?} cell
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.setCellData = /**
         * @param {?} cellData
         * @param {?} cell
         * @return {?}
         */
            function (cellData, cell) {
                cellData.billInfo = cell.billInfo;
                cellData.billDataInfo = cell.billDataInfo;
                cellData.visible = true;
                cellData.diagramInfo.x = cell.geometry.x;
                cellData.diagramInfo.y = cell.geometry.y;
                cellData.diagramInfo.width = cell.geometry.width;
                cellData.diagramInfo.height = cell.geometry.height;
                cellData.diagramInfo.extProps = {
                    style: cell.style
                };
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.zoomOut = /**
         * @return {?}
         */
            function () {
                this.graph.zoomOut();
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.zoomIn = /**
         * @return {?}
         */
            function () {
                this.graph.zoomIn();
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.zoomActual = /**
         * @return {?}
         */
            function () {
                this.graph.zoomActual();
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.getZoomScale = /**
         * @return {?}
         */
            function () {
                return Math.round(this.graph.view.scale * 100);
            };
        /**
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.print = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var preview = new mxPrintPreviewType(this.graph, 1);
                preview.printOverlays = true;
                preview.printControls = true;
                preview.printBackgroundImage = true;
                preview.open(billTrackerCellCss);
            };
        /**
         * @param {?} direction
         * @param {?=} all
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.expand = /**
         * @param {?} direction
         * @param {?=} all
         * @return {?}
         */
            function (direction, all) {
                if (all === void 0) {
                    all = false;
                }
                if (all) {
                    this.expandAll(direction);
                    return;
                }
                if (direction == BillTrackerDirection.Up) {
                    /** @type {?} */
                    var cells = [this.entry];
                    this.upParent.children && cells.push.apply(cells, __spread(this.upParent.children));
                    cells.forEach(( /**
                     * @param {?} cell
                     * @return {?}
                     */function (cell) {
                        if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                            cell.upCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK));
                        }
                    }));
                }
                else if (direction == BillTrackerDirection.Down) {
                    /** @type {?} */
                    var cells = [this.entry];
                    this.downParent.children && cells.push.apply(cells, __spread(this.downParent.children));
                    cells.forEach(( /**
                     * @param {?} cell
                     * @return {?}
                     */function (cell) {
                        if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                            cell.downCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK));
                        }
                    }));
                }
            };
        /**
         * @param {?} direction
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.expandAll = /**
         * @param {?} direction
         * @return {?}
         */
            function (direction) {
                var _this = this;
                if (direction != BillTrackerDirection.Up && direction != BillTrackerDirection.Down) {
                    return;
                }
                // 单据节点添加并移位后事件监听器
                /** @type {?} */
                var afterBillCellsAddedAndMoved = null;
                if (direction == BillTrackerDirection.Up) {
                    afterBillCellsAddedAndMoved = ( /**
                     * @return {?}
                     */function () {
                        /** @type {?} */
                        var cells = [_this.entry];
                        _this.upParent.children && cells.push.apply(cells, __spread(_this.upParent.children));
                        /** @type {?} */
                        var canTrackUpCells = cells.filter(( /**
                         * @param {?} cell
                         * @return {?}
                         */function (cell) {
                            return cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search;
                        }));
                        // 没有可上查节点且没有正在执行的上查请求时删除监听器
                        if (canTrackUpCells == null || canTrackUpCells.length == 0) {
                            if (_this.numCellsAddingReq === 0) {
                                // console.log("移除监听器");
                                l && l.close();
                                _this.graph.removeListener(afterBillCellsAddedAndMoved);
                                // console.timeEnd("ExpandAll");
                            }
                        }
                        else {
                            canTrackUpCells.forEach(( /**
                             * @param {?} cell
                             * @return {?}
                             */function (cell) {
                                if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                                    cell.upCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK, "showLoading", false));
                                }
                            }));
                        }
                    });
                }
                else if (direction == BillTrackerDirection.Down) {
                    afterBillCellsAddedAndMoved = ( /**
                     * @return {?}
                     */function () {
                        /** @type {?} */
                        var cells = [_this.entry];
                        _this.downParent.children && cells.push.apply(cells, __spread(_this.downParent.children));
                        /** @type {?} */
                        var canTrackDownCells = cells.filter(( /**
                         * @param {?} cell
                         * @return {?}
                         */function (cell) {
                            return cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search;
                        }));
                        // 没有可下查节点且没有正在执行的下查请求时删除监听器
                        if (canTrackDownCells == null || canTrackDownCells.length == 0) {
                            if (_this.numCellsAddingReq === 0) {
                                // console.log("移除监听器");
                                l && l.close();
                                _this.graph.removeListener(afterBillCellsAddedAndMoved);
                                // console.timeEnd("ExpandAll");
                            }
                        }
                        else {
                            canTrackDownCells.forEach(( /**
                             * @param {?} cell
                             * @return {?}
                             */function (cell) {
                                if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                                    cell.downCellOverlay.fireEvent(new mxEventObjectType(mxEventType.CLICK, "showLoading", false));
                                }
                            }));
                        }
                    });
                }
                // console.time("ExpandAll");
                // 添加监听器
                // console.log("添加监听器");
                this.graph.addListener("billCellsAddedAndMoved", afterBillCellsAddedAndMoved);
                // 直接触发一次展开事件
                /** @type {?} */
                var l = this.loading.show({ message: this.localePipe.transform("loading") });
                afterBillCellsAddedAndMoved();
            };
        /**
         * 继续追踪
         * @param cell
         */
        /**
         * 继续追踪
         * @param {?} cell
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.goOnTrack = /**
         * 继续追踪
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                /** @type {?} */
                var billTrackerUiService = this.inj.get(BillTrackerUiService);
                // 构造查询参数
                /** @type {?} */
                var args = new GetBillsInfoArgs();
                args.billDataId = cell.billDataInfo.dataId;
                args.curYear = cell.billDataInfo.curYear;
                args.bizKind = cell.billInfo.bizKind;
                args.bizType = cell.billInfo.bizType;
                args.documentTypeId = cell.billInfo.documentTypeId;
                // args.billChildInfos = cell.billDataInfo.billChildInfos;
                // // 如果又回到了最原始的当前节点
                // if (cell.billDataInfo.dataId == this.originBillTrackerArgs.getBillsInfoArgs.billDataId) {
                //   args = this.originBillTrackerArgs.getBillsInfoArgs;
                // }
                /** @type {?} */
                var modalOptions = {
                    title: this.localePipe.transform("billTracker"),
                };
                /** @type {?} */
                var graphOptions = {
                    // // 上查结果节点没有下查按钮，继续追踪时默认下查
                    // showDownBills: cell.downCellOverlay == null,
                    // // 下查结果节点没有上查按钮，继续追踪时默认上查
                    // showUpBills: cell.upCellOverlay == null,
                    showDownBills: true,
                    showUpBills: true,
                };
                /** @type {?} */
                var gridOptions = {
                // // 此选项仅控制首次打开时行为
                // showEntryData: false,
                // // 数据区高度1px相当于不显示
                // defaultHeight: 1,
                };
                billTrackerUiService.openDefaultBillTrackerApp(args, graphOptions, gridOptions);
                // billTrackerUiService.openDefaultBillTrackerDialog(args, false, modalOptions, graphOptions, gridOptions).subscribe();
            };
        /**
         * 设为当前
         * @param cell
         */
        /**
         * 设为当前
         * @param {?} cell
         * @return {?}
         */
        BillTrackerGraphComponent.prototype.setAsCurrent = /**
         * 设为当前
         * @param {?} cell
         * @return {?}
         */
            function (cell) {
                var _this = this;
                /** @type {?} */
                var args = this.dataService.buildGetBillsInfoArgs(cell);
                // // 如果又回到了最原始的当前节点
                // if (cell.billDataInfo.dataId == this.originBillTrackerArgs.getBillsInfoArgs.billDataId) {
                //   args = this.originBillTrackerArgs.getBillsInfoArgs;
                // }
                /** @type {?} */
                var downArgs = new GetDownBillsInfoArgs();
                downArgs.documentTypeId = args.documentTypeId;
                downArgs.billDataId = args.billDataId;
                downArgs.bizKind = args.bizKind;
                downArgs.bizType = args.bizType;
                // downArgs.billChildInfos = args.billChildInfos;
                downArgs.curYear = args.curYear;
                this.loading.show({ message: this.localePipe.transform("loading") });
                this.dataService.canTracking(downArgs).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    _this.loading.close();
                    if (!res.canDownTracking && !res.canUpTracking) {
                        _this.messager.info(_this.localePipe.transform("noAssoBill"));
                        return;
                    }
                    /** @type {?} */
                    var billTrackerArgs = new BillTrackerArgs();
                    billTrackerArgs.canTrackingResult = res;
                    billTrackerArgs.getBillsInfoArgs = args;
                    billTrackerArgs.graphOptions = _this.billTrackerArgs.graphOptions;
                    billTrackerArgs.gridOptions = _this.billTrackerArgs.gridOptions;
                    _this.billTrackerArgs = billTrackerArgs;
                    _this.repaintGraph(_this.graph);
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.loading.close();
                    //todo 确定异常结构, 目前采用兼容取值方式
                    _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    throw err;
                }));
            };
        BillTrackerGraphComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: 'lib-bill-tracker-graph',
                        template: "<div #mxContainer id=\"mx-container\" class=\"mx-container-ng\">\r\n\r\n</div>\r\n\r\n<div #mxOutlineContainer id=\"mx-outline-container\" class=\"mx-outline-container\" [style.top]=\"modalRef?'50px':null\">\r\n\r\n</div>",
                        styles: [".mx-container-ng{position:absolute;top:0;left:0;bottom:0;right:0;cursor:default;overflow:auto;padding-right:16px;padding-bottom:16px;margin:4px}.mx-outline-container{z-index:1;position:absolute;overflow:hidden;top:20px;right:20px;width:160px;height:120px;background:#fff;border:1px solid #d3d3d3}"]
                    }] }
        ];
        /** @nocollapse */
        BillTrackerGraphComponent.ctorParameters = function () {
            return [
                { type: BillTrackerArgs },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: BillTrackerDataService },
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: core$1.ViewContainerRef },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef }
            ];
        };
        BillTrackerGraphComponent.propDecorators = {
            mxContainerER: [{ type: core$1.ViewChild, args: ["mxContainer",] }],
            mxOutlineContainer: [{ type: core$1.ViewChild, args: ["mxOutlineContainer",] }],
            selectEventEmitter: [{ type: core$1.Output, args: ["select",] }],
            stateChangeEventEmitter: [{ type: core$1.Output, args: ["stateChange",] }],
            billTrackerArgs: [{ type: core$1.Input, args: ["billTrackerArgs",] }]
        };
        return BillTrackerGraphComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/basic-table/BillFrontField.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillFrontField = /** @class */ (function () {
        function BillFrontField() {
        }
        return BillFrontField;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/basic-table/BillFrontDataRow.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillFrontDataRow = /** @class */ (function () {
        function BillFrontDataRow() {
        }
        return BillFrontDataRow;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/basic-table/basic-table.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BasicTableComponent = /** @class */ (function () {
        function BasicTableComponent(viewContainerRef, inj, cfr, cdr) {
            this.viewContainerRef = viewContainerRef;
            this.inj = inj;
            this.cfr = cfr;
            this.cdr = cdr;
        }
        /**
         * @return {?}
         */
        BasicTableComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?} item
         * @param {?} evt
         * @return {?}
         */
        BasicTableComponent.prototype.clickHandler = /**
         * @param {?} item
         * @param {?} evt
         * @return {?}
         */
            function (item, evt) {
                item['expanded'] = !item['expanded'];
            };
        /**
         * @param {?} res
         * @return {?}
         */
        BasicTableComponent.prototype.showMainTable = /**
         * @param {?} res
         * @return {?}
         */
            function (res) {
                this.showTable(res.billSchema.mainTable, res.billData.mainTable);
            };
        /**
         * @param {?} schemaTable
         * @param {?} dataTable
         * @return {?}
         */
        BasicTableComponent.prototype.showTable = /**
         * @param {?} schemaTable
         * @param {?} dataTable
         * @return {?}
         */
            function (schemaTable, dataTable) {
                this.billSchemaTable = schemaTable;
                this.billDataTable = dataTable;
                this.loadData(schemaTable.getFieldList(), dataTable.GetRowList());
                this.cdr.detectChanges();
            };
        /**
         * @param {?} billSchemaFields
         * @param {?} billDataRows
         * @return {?}
         */
        BasicTableComponent.prototype.loadData = /**
         * @param {?} billSchemaFields
         * @param {?} billDataRows
         * @return {?}
         */
            function (billSchemaFields, billDataRows) {
                this.fields = billSchemaFields;
                this.rows = billDataRows;
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                if (bts.billTrackingDataShownMode == commonApi.BillTrackingDataShownMode.CUSTOMFIELD) {
                    this.ffields = this.extractFFieldsWithCustomFields(billSchemaFields, bts.customFieldContent);
                    this.frows = this.extractFRows(billDataRows, this.ffields);
                }
                else {
                    this.ffields = this.extractFFields(billSchemaFields);
                    this.frows = this.extractFRows(billDataRows, this.ffields);
                }
            };
        /**
         * 默认展示方式
         * @param fields
         */
        /**
         * 默认展示方式
         * @private
         * @param {?} fields
         * @return {?}
         */
        BasicTableComponent.prototype.extractFFields = /**
         * 默认展示方式
         * @private
         * @param {?} fields
         * @return {?}
         */
            function (fields) {
                var e_1, _a;
                /** @type {?} */
                var ffields = [];
                try {
                    for (var fields_1 = __values(fields), fields_1_1 = fields_1.next(); !fields_1_1.done; fields_1_1 = fields_1.next()) {
                        var field = fields_1_1.value;
                        //枚举或者枚举型单值UDT时默认取Name
                        if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                            /** @type {?} */
                            var ff = new BillFrontField();
                            ff.fieldName = field.fieldName;
                            ff.dataType = field.dataType;
                            ff.caption = field.caption;
                            ff.fieldType = field.fieldType;
                            ff.length = field.length;
                            ff.precision = field.precision;
                            ff.scale = field.scale;
                            ff.captionPath = this.extractCaptionPath(field);
                            ff.fieldPath = this.extractFieldPath(field) + ".Name";
                            ffields.push(ff);
                        }
                        else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                            ffields.push.apply(ffields, __spread(this.extractFSubFields(field.GetSubFieldList())));
                        }
                        else {
                            /** @type {?} */
                            var ff = new BillFrontField();
                            ff.fieldName = field.fieldName;
                            ff.dataType = field.dataType;
                            ff.caption = field.caption;
                            ff.fieldType = field.fieldType;
                            ff.length = field.length;
                            ff.precision = field.precision;
                            ff.scale = field.scale;
                            ff.captionPath = this.extractCaptionPath(field);
                            ff.fieldPath = this.extractFieldPath(field);
                            ffields.push(ff);
                        }
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (fields_1_1 && !fields_1_1.done && (_a = fields_1.return))
                            _a.call(fields_1);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                return ffields;
            };
        /**
         * @private
         * @param {?} fields
         * @param {?=} parentField
         * @return {?}
         */
        BasicTableComponent.prototype.extractFSubFields = /**
         * @private
         * @param {?} fields
         * @param {?=} parentField
         * @return {?}
         */
            function (fields, parentField) {
                var e_2, _a;
                /** @type {?} */
                var ffields = [];
                try {
                    for (var fields_2 = __values(fields), fields_2_1 = fields_2.next(); !fields_2_1.done; fields_2_1 = fields_2.next()) {
                        var field = fields_2_1.value;
                        //枚举或者枚举型单值UDT时默认取Name
                        if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                            /** @type {?} */
                            var ff = new BillFrontField();
                            ff.fieldName = field.fieldName;
                            ff.dataType = field.dataType;
                            ff.caption = field.caption;
                            ff.fieldType = field.fieldType;
                            ff.length = field.length;
                            ff.precision = field.precision;
                            ff.scale = field.scale;
                            ff.captionPath = this.extractCaptionPath(field);
                            ff.fieldPath = this.extractFieldPath(field) + ".Name";
                            ffields.push(ff);
                        }
                        else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                            ffields.push.apply(ffields, __spread(this.extractFSubFields(field.GetSubFieldList())));
                        }
                        else {
                            /** @type {?} */
                            var ff = new BillFrontField();
                            ff.fieldName = field.fieldName;
                            ff.dataType = field.dataType;
                            ff.caption = field.caption;
                            ff.fieldType = field.fieldType;
                            ff.length = field.length;
                            ff.precision = field.precision;
                            ff.scale = field.scale;
                            ff.captionPath = this.extractCaptionPath(field);
                            ff.fieldPath = this.extractFieldPath(field);
                            ffields.push(ff);
                        }
                    }
                }
                catch (e_2_1) {
                    e_2 = { error: e_2_1 };
                }
                finally {
                    try {
                        if (fields_2_1 && !fields_2_1.done && (_a = fields_2.return))
                            _a.call(fields_2);
                    }
                    finally {
                        if (e_2)
                            throw e_2.error;
                    }
                }
                return ffields;
            };
        /**
         * 自定义字段展示方式
         */
        /**
         * 自定义字段展示方式
         * @private
         * @param {?} fields
         * @param {?} fieldContent
         * @return {?}
         */
        BasicTableComponent.prototype.extractFFieldsWithCustomFields = /**
         * 自定义字段展示方式
         * @private
         * @param {?} fields
         * @param {?} fieldContent
         * @return {?}
         */
            function (fields, fieldContent) {
                var e_3, _a;
                // 表code
                /** @type {?} */
                var tableCode = this.billSchemaTable.tableName;
                // 单据追踪配置
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var fieldConfig = typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent);
                /** @type {?} */
                var ffields = [];
                var _loop_1 = function (field) {
                    // 字段ID
                    /** @type {?} */
                    var fieldPath = this_1.extractFieldPath(field);
                    /** @type {?} */
                    var sf = null;
                    for (var k in fieldConfig.schema) {
                        if (k == 'selectedAll') {
                            continue;
                        }
                        if (k == tableCode) {
                            /** @type {?} */
                            var s = fieldConfig.schema[k];
                            sf = s && s.fields.find(( /**
                             * @param {?} elt
                             * @return {?}
                             */function (elt) { return elt.fieldPath == fieldPath; }));
                            break;
                        }
                    }
                    if (sf == null) {
                        return "continue";
                    }
                    //枚举或者枚举型单值UDT时默认取Name
                    if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                        /** @type {?} */
                        var ff = new BillFrontField();
                        ff.fieldName = field.fieldName;
                        ff.dataType = field.dataType;
                        ff.caption = field.caption;
                        ff.fieldType = field.fieldType;
                        ff.length = field.length;
                        ff.precision = field.precision;
                        ff.scale = field.scale;
                        ff.captionPath = sf.displayName || field.caption;
                        ff.fieldPath = this_1.extractFieldPath(field) + ".Name";
                        ffields.push(ff);
                    }
                    else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                        ffields.push.apply(ffields, __spread(this_1.extractFSubFieldsWithCustomFields(field.GetSubFieldList(), fieldContent, field)));
                    }
                    else {
                        /** @type {?} */
                        var ff = new BillFrontField();
                        ff.fieldName = field.fieldName;
                        ff.dataType = field.dataType;
                        ff.caption = field.caption;
                        ff.fieldType = field.fieldType;
                        ff.length = field.length;
                        ff.precision = field.precision;
                        ff.scale = field.scale;
                        ff.captionPath = sf.displayName || field.caption;
                        ff.fieldPath = this_1.extractFieldPath(field);
                        ffields.push(ff);
                    }
                };
                var this_1 = this;
                try {
                    for (var fields_3 = __values(fields), fields_3_1 = fields_3.next(); !fields_3_1.done; fields_3_1 = fields_3.next()) {
                        var field = fields_3_1.value;
                        _loop_1(field);
                    }
                }
                catch (e_3_1) {
                    e_3 = { error: e_3_1 };
                }
                finally {
                    try {
                        if (fields_3_1 && !fields_3_1.done && (_a = fields_3.return))
                            _a.call(fields_3);
                    }
                    finally {
                        if (e_3)
                            throw e_3.error;
                    }
                }
                return ffields;
            };
        /**
         * @private
         * @param {?} fields
         * @param {?} fieldContent
         * @param {?=} parentField
         * @return {?}
         */
        BasicTableComponent.prototype.extractFSubFieldsWithCustomFields = /**
         * @private
         * @param {?} fields
         * @param {?} fieldContent
         * @param {?=} parentField
         * @return {?}
         */
            function (fields, fieldContent, parentField) {
                var e_4, _a;
                // 表编号
                /** @type {?} */
                var tableCode = this.billSchemaTable.tableName;
                // 单据追踪配置
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var fieldConfig = typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent);
                /** @type {?} */
                var ffields = [];
                var _loop_2 = function (field) {
                    // 字段ID
                    /** @type {?} */
                    var fieldPath = this_2.extractFieldPath(field);
                    /** @type {?} */
                    var sf = null;
                    for (var k in fieldConfig.schema) {
                        if (k == 'selectedAll') {
                            continue;
                        }
                        if (k == tableCode) {
                            /** @type {?} */
                            var s = fieldConfig.schema[k];
                            sf = s && s.fields.find(( /**
                             * @param {?} elt
                             * @return {?}
                             */function (elt) { return elt.fieldPath == fieldPath; }));
                            break;
                        }
                    }
                    if (sf == null) {
                        return "continue";
                    }
                    //枚举或者枚举型单值UDT时默认取Name
                    if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                        /** @type {?} */
                        var ff = new BillFrontField();
                        ff.fieldName = field.fieldName;
                        ff.dataType = field.dataType;
                        ff.caption = field.caption;
                        ff.fieldType = field.fieldType;
                        ff.length = field.length;
                        ff.precision = field.precision;
                        ff.scale = field.scale;
                        ff.captionPath = sf.displayName || field.caption;
                        ff.fieldPath = this_2.extractFieldPath(field) + ".Name";
                        ffields.push(ff);
                    }
                    else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                        ffields.push.apply(ffields, __spread(this_2.extractFSubFieldsWithCustomFields(field.GetSubFieldList(), fieldContent, field)));
                    }
                    else {
                        /** @type {?} */
                        var ff = new BillFrontField();
                        ff.fieldName = field.fieldName;
                        ff.dataType = field.dataType;
                        ff.caption = field.caption;
                        ff.fieldType = field.fieldType;
                        ff.length = field.length;
                        ff.precision = field.precision;
                        ff.scale = field.scale;
                        ff.captionPath = sf.displayName || field.caption;
                        ff.fieldPath = this_2.extractFieldPath(field);
                        ffields.push(ff);
                    }
                };
                var this_2 = this;
                try {
                    for (var fields_4 = __values(fields), fields_4_1 = fields_4.next(); !fields_4_1.done; fields_4_1 = fields_4.next()) {
                        var field = fields_4_1.value;
                        _loop_2(field);
                    }
                }
                catch (e_4_1) {
                    e_4 = { error: e_4_1 };
                }
                finally {
                    try {
                        if (fields_4_1 && !fields_4_1.done && (_a = fields_4.return))
                            _a.call(fields_4);
                    }
                    finally {
                        if (e_4)
                            throw e_4.error;
                    }
                }
                return ffields;
            };
        /**
         * @private
         * @param {?} field
         * @return {?}
         */
        BasicTableComponent.prototype.extractCaptionPath = /**
         * @private
         * @param {?} field
         * @return {?}
         */
            function (field) {
                /** @type {?} */
                var s = field.caption;
                /** @type {?} */
                var tmp = ( /** @type {?} */(field));
                while (tmp.attachedField != null) {
                    s = tmp.attachedField.caption + "." + s;
                    tmp = ( /** @type {?} */(tmp.attachedField));
                }
                return s;
            };
        /**
         * @private
         * @param {?} field
         * @return {?}
         */
        BasicTableComponent.prototype.extractFieldPath = /**
         * @private
         * @param {?} field
         * @return {?}
         */
            function (field) {
                /** @type {?} */
                var s = field.fieldName;
                /** @type {?} */
                var tmp = ( /** @type {?} */(field));
                while (tmp.attachedField != null) {
                    s = tmp.attachedField.fieldName + "." + s;
                    tmp = ( /** @type {?} */(tmp.attachedField));
                }
                return s;
            };
        /**
         * @private
         * @param {?} rows
         * @param {?} ffields
         * @return {?}
         */
        BasicTableComponent.prototype.extractFRows = /**
         * @private
         * @param {?} rows
         * @param {?} ffields
         * @return {?}
         */
            function (rows, ffields) {
                var e_5, _a, e_6, _b;
                /** @type {?} */
                var frows = [];
                try {
                    for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {
                        var row = rows_1_1.value;
                        /** @type {?} */
                        var fr = new BillFrontDataRow();
                        fr.expanded = row.GetChildTableList().length == 0 ? null : row.attachedTable && row.attachedTable.attachedRow == null ? true : false;
                        fr.hasChildren = this.hasChildren(row);
                        fr.data = {};
                        try {
                            for (var ffields_1 = __values(ffields), ffields_1_1 = ffields_1.next(); !ffields_1_1.done; ffields_1_1 = ffields_1.next()) {
                                var ff = ffields_1_1.value;
                                fr.data[ff.fieldPath] = this.extractFieldPathValue(row.GetFieldMap(), ff.fieldPath);
                            }
                        }
                        catch (e_6_1) {
                            e_6 = { error: e_6_1 };
                        }
                        finally {
                            try {
                                if (ffields_1_1 && !ffields_1_1.done && (_b = ffields_1.return))
                                    _b.call(ffields_1);
                            }
                            finally {
                                if (e_6)
                                    throw e_6.error;
                            }
                        }
                        frows.push(fr);
                    }
                }
                catch (e_5_1) {
                    e_5 = { error: e_5_1 };
                }
                finally {
                    try {
                        if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return))
                            _a.call(rows_1);
                    }
                    finally {
                        if (e_5)
                            throw e_5.error;
                    }
                }
                return frows;
            };
        /**
         * @param {?} row
         * @return {?}
         */
        BasicTableComponent.prototype.hasChildren = /**
         * @param {?} row
         * @return {?}
         */
            function (row) {
                var e_7, _a;
                /** @type {?} */
                var flag = row.GetChildTableList() && row.GetChildTableList().length > 0;
                if (flag) {
                    /** @type {?} */
                    var cf = false;
                    try {
                        for (var _b = __values(row.GetChildTableList()), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var ct = _c.value;
                            if (ct.GetRowList() && ct.GetRowList().length > 0) {
                                cf = true;
                                break;
                            }
                        }
                    }
                    catch (e_7_1) {
                        e_7 = { error: e_7_1 };
                    }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return))
                                _a.call(_b);
                        }
                        finally {
                            if (e_7)
                                throw e_7.error;
                        }
                    }
                    flag = cf;
                }
                return flag;
            };
        /**
         * @param {?} billDataFieldMap
         * @param {?} fieldPath
         * @return {?}
         */
        BasicTableComponent.prototype.extractFieldPathValue = /**
         * @param {?} billDataFieldMap
         * @param {?} fieldPath
         * @return {?}
         */
            function (billDataFieldMap, fieldPath) {
                /** @type {?} */
                var fields = fieldPath.split(".");
                /** @type {?} */
                var bdf = billDataFieldMap[fields[0]];
                for (var i = 1; bdf != null && i < fields.length; i++) {
                    /** @type {?} */
                    var temp = bdf.GetSubFieldMap();
                    if (temp == null) {
                        break;
                    }
                    bdf = temp[fields[i]];
                }
                return bdf ? bdf.GetTextValue() : "";
            };
        /**
         * @param {?} obj
         * @param {?} ffield
         * @return {?}
         */
        BasicTableComponent.prototype.getShownText = /**
         * @param {?} obj
         * @param {?} ffield
         * @return {?}
         */
            function (obj, ffield) {
                if (obj[ffield.fieldPath] == null) {
                    return "";
                }
                if (ffield.dataType == commonApi$1.DataType.String) {
                    return obj[ffield.fieldPath] || "";
                }
                else if (ffield.dataType == commonApi$1.DataType.Decimal) {
                    /** @type {?} */
                    var dec = parseFloat(String(obj[ffield.fieldPath])).toFixed(ffield.scale).toString();
                    return dec || "";
                }
                else if (ffield.dataType == commonApi$1.DataType.DateTime) {
                    /** @type {?} */
                    var date = commonApi$1.BpmnModelJsonHelper.DateTimeFromString(obj[ffield.fieldPath]);
                    if (ffield.fieldType == "DateTime") {
                        return this.dateFormat(date, "yyyy-MM-dd HH:mm:ss.SSS");
                    }
                    else if (ffield.fieldType == "Date") {
                        return this.dateFormat(date, "yyyy-MM-dd");
                    }
                    else {
                        return this.dateFormat(date, "yyyy-MM-dd");
                    }
                }
                else {
                    return obj[ffield.fieldPath] || "";
                }
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BasicTableComponent.prototype.isObject = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                return typeof (obj) == "object";
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        BasicTableComponent.prototype.isArray = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                return Array.isArray(obj);
            };
        /**
         * @private
         * @param {?} date
         * @param {?} fmt
         * @return {?}
         */
        BasicTableComponent.prototype.dateFormat = /**
         * @private
         * @param {?} date
         * @param {?} fmt
         * @return {?}
         */
            function (date, fmt) {
                /** @type {?} */
                var ret;
                /** @type {?} */
                var opt = {
                    "y+": date.getUTCFullYear().toString(),
                    // 年
                    "M+": (date.getUTCMonth() + 1).toString(),
                    // 月
                    "d+": date.getUTCDate().toString(),
                    // 日
                    "H+": date.getUTCHours().toString(),
                    // 时
                    "m+": date.getUTCMinutes().toString(),
                    // 分
                    "s+": date.getUTCSeconds().toString(),
                    // 秒
                    "S+": date.getUTCMilliseconds().toString(),
                };
                for (var k in opt) {
                    ret = new RegExp("(" + k + ")").exec(fmt);
                    if (ret) {
                        if (!String.prototype.padStart) {
                            fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (this.myPadStart(opt[k], ret[1].length, "0")));
                        }
                        else {
                            fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")));
                        }
                    }
                }
                return fmt;
            };
        /**
         * @private
         * @param {?} src
         * @param {?} targetLength
         * @param {?} padString
         * @return {?}
         */
        BasicTableComponent.prototype.myPadStart = /**
         * @private
         * @param {?} src
         * @param {?} targetLength
         * @param {?} padString
         * @return {?}
         */
            function (src, targetLength, padString) {
                targetLength = targetLength >> 0; //floor if number or convert non-number to 0;
                padString = String(typeof padString !== 'undefined' ? padString : ' ');
                if (src.length > targetLength) {
                    return String(src);
                }
                else {
                    targetLength = targetLength - src.length;
                    if (targetLength > padString.length) {
                        padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
                    }
                    return padString.slice(0, targetLength) + String(src);
                }
            };
        BasicTableComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: "app-basic-table",
                        template: "<table class=\"table table-striped table-hover text-nowrap\" [ngStyle]=\"{'margin-left': isMain ? null : '24px'}\"\r\n    style=\"min-width: 100%; width: auto;\" *ngIf=\"ffields && ffields.length > 0 && frows && frows.length > 0\">\r\n    <thead class=\"thead-light\">\r\n        <tr>\r\n            <th style=\"width: 40px;\"><span></span></th>\r\n            <th *ngFor=\"let ffield of ffields\">\r\n                <span>{{ffield.captionPath}}</span>\r\n            </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <ng-container *ngFor=\"let frow of frows;let rowIdx = index;\">\r\n            <tr #tr>\r\n                <td>\r\n                    <span *ngIf=\"frow.hasChildren\" style=\"cursor:pointer;\" (click)=\"clickHandler(frow, $event)\"\r\n                        [ngClass]=\"{'k-icon': true, 'k-i-plus-outline': !frow.expanded, 'k-i-minus-outline': frow.expanded}\"></span>\r\n                </td>\r\n                <ng-container *ngFor=\"let ffield of ffields\">\r\n                    <td>\r\n                        <span>{{getShownText(frow.data, ffield)}}</span>\r\n                        <span *ngIf=\"ffield.showMore\" class=\"f-icon f-icon-more\"></span>\r\n                    </td>\r\n                </ng-container>\r\n            </tr>\r\n            <tr *ngIf=\"frow.expanded&&frow.hasChildren\">\r\n                <td [attr.colspan]=\"tr.cells.length\">\r\n                    <ng-container appChildRowTable [parentRow]=\"rows[rowIdx]\" [parentSchemaTable]=\"billSchemaTable\"\r\n                        [parentDataTable]=\"billDataTable\" [billInfo]=\"billInfo\" [expanded]=\"frow.expanded\"\r\n                        [colspan]=\"tr.cells.length\">\r\n                    </ng-container>\r\n                </td>\r\n            </tr>\r\n        </ng-container>\r\n    </tbody>\r\n    <tfoot>\r\n    </tfoot>\r\n</table>",
                        changeDetection: core$1.ChangeDetectionStrategy.OnPush,
                        styles: ["./basic-table.component.css"]
                    }] }
        ];
        /** @nocollapse */
        BasicTableComponent.ctorParameters = function () {
            return [
                { type: core$1.ViewContainerRef },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef }
            ];
        };
        BasicTableComponent.propDecorators = {
            childTrTable: [{ type: core$1.ViewChild, args: ["childTrTable",] }],
            childTrTableVCR: [{ type: core$1.ViewChild, args: ["childTrTable", { read: core$1.ViewContainerRef },] }]
        };
        return BasicTableComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/basic-info/basic-info.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BasicInfoComponent = /** @class */ (function () {
        function BasicInfoComponent(framework, dataInfoService, notify, messager, loading, modal, localePipe, vcr, inj, cfr, cdr, localeId) {
            this.framework = framework;
            this.dataInfoService = dataInfoService;
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.localePipe = localePipe;
            this.vcr = vcr;
            this.inj = inj;
            this.cfr = cfr;
            this.cdr = cdr;
            this.localeId = localeId;
            this.fieldsWithValue = [];
            this.childSchemaTables = [];
            this.childDataTableMap = {};
            this.dataType = commonApi$1.DataType;
            this.secTitle = "";
            this.localeId = localeId || this.inj.get(core$1.LOCALE_ID);
            /** @type {?} */
            var inject = core$1.ReflectiveInjector.resolveAndCreate([
                BillTrackerInternalUiService
            ], this.inj);
            this.internalUiService = inject.get(BillTrackerInternalUiService, null);
        }
        /**
         * @return {?}
         */
        BasicInfoComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                // 设置section标题
                this.secTitle = this.localePipe.transform("basicInfo");
                // 表名解析
                this.secTitle = this.dataInfoService.getTableLabel(this.billInfo, this.schemaTable, this.localeId);
                // 获取带值的字段信息
                try {
                    this.fieldsWithValue = this.dataInfoService.getBasicInfoFieldsWithValue(this.billInfo, this.schemaTable, this.dataTable);
                }
                catch (error) {
                    this.fieldsWithValue = [];
                    if (error == Exceptions.SCALE_FIELD_VALUE_IS_NAN) {
                        this.messager.error(this.localePipe.transform("scaleFieldCantBeCastToInteger"));
                    }
                    throw error;
                }
                // 按order排序
                this.fieldsWithValue = this.dataInfoService.sortFieldsByOrder(this.fieldsWithValue);
                //主表数据
                /** @type {?} */
                var r = this.dataTable.GetRowList()[0];
                // 子表列表
                this.childSchemaTables = this.dataInfoService.getChildTables(this.billInfo, this.schemaTable);
                this.childDataTableMap = r.GetChildTableMap();
                if (this.billInfo.jointQueryParameters != null) {
                    /** @type {?} */
                    var jointQueryParameters = JSON.parse(this.billInfo.jointQueryParameters);
                    this.hasLink = (this.billInfo.jointQueryMode == commonApi.JointQueryMode.APP && jointQueryParameters.funcId != null)
                        || (this.billInfo.jointQueryMode == commonApi.JointQueryMode.URL && jointQueryParameters.url != null);
                }
                else {
                    this.hasLink = false;
                }
            };
        /**
         * @return {?}
         */
        BasicInfoComponent.prototype.clickLink = /**
         * @return {?}
         */
            function () {
                this.internalUiService.openBillDetailWithFields(this.billInfo, this.billDataInfo, this.fieldsWithValue);
                event.stopPropagation();
                return false;
            };
        BasicInfoComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: "lib-bill-tracker-main-table",
                        template: "<farris-section class=\"f-section-form f-section-in-mainsubcard\" [mainTitle]=\"secTitle\">\r\n  <div class=\"f-form-layout farris-form farris-form-controls-inline\">\r\n    <ng-container *ngFor=\"let field of fieldsWithValue; let i = index\">\r\n      <div class=\"col-12 col-md-6 col-xl-3 col-el-2\" *ngIf=\"field.show\">\r\n        <!-- \u4EC5\u663E\u793Ashow\u5C5E\u6027\u4E3Atrue\u7684\u5B57\u6BB5 -->\r\n        <!-- <div class=\"farris-group-wrap\" *ngIf=\"!(hasLink && i==0); else linkTemp\"> -->\r\n        <div class=\"farris-group-wrap\">\r\n          <!-- \u975E\u5E03\u5C14\u503C\u4F7F\u7528\u6587\u672C\u6846 -->\r\n          <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                {{field | billTrackerFieldLabel}}\r\n              </span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <div class=\"f-component-text\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n                <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\"\r\n                  [ngStyle]=\"{'text-align': field.dataType == dataType.Integer || field.dataType == dataType.Decimal ? 'right':null}\">\r\n                  {{field.fieldValue}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- \u5E03\u5C14\u503C\u4F7F\u7528\u590D\u9009\u6846 -->\r\n          <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dataType.Boolean\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                {{field | billTrackerFieldLabel}}\r\n              </span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <div class=\"custom-control custom-checkbox\">\r\n                <input class=\"custom-control-input\" type=\"checkbox\" readonly [checked]=\"field.fieldValue\" />\r\n                <label class=\"custom-control-label\"></label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- \u6709\u8054\u67E5\u914D\u7F6E\u65F6\uFF0C\u9ED8\u8BA4\u53D6\u7B2C\u4E00\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u8D85\u94FE\u63A5 -->\r\n        <!-- <ng-template #linkTemp> -->\r\n        <!-- <div class=\"farris-group-wrap\"> -->\r\n        <!-- \u975E\u5E03\u5C14\u503C\u94FE\u63A5\u5728value\u4E0A -->\r\n        <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    {{field | billTrackerFieldLabel}}\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"f-component-text\">\r\n                                    <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\">\r\n                                        <a href=\"javascript:void(0);\" (click)=\"clickLink()\">{{field.fieldValue}}</a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n\r\n        <!-- \u5E03\u5C14\u503C\u94FE\u63A5\u5728label\u4E0A -->\r\n        <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dataType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    <a href=\"javascript:void(0);\" (click)=\"clickLink()\">\r\n                                        {{field | billTrackerFieldLabel}}\r\n                                    </a>\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"farris-input-wrap\">\r\n                                    <div class=\"custom-control custom-checkbox\">\r\n                                        <input class=\"custom-control-input\" type=\"checkbox\" readonly\r\n                                            [checked]=\"field.fieldValue\" />\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n        <!-- </div> -->\r\n        <!-- </ng-template> -->\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</farris-section>\r\n<lib-bill-tracker-child-info-list [childSchemaTables]=\"childSchemaTables\" [childDataTableMap]=\"childDataTableMap\"\r\n  [billInfo]=\"billInfo\">\r\n</lib-bill-tracker-child-info-list>\r\n"
                    }] }
        ];
        /** @nocollapse */
        BasicInfoComponent.ctorParameters = function () {
            return [
                { type: rtfCommon.FrameworkService },
                { type: BillTrackerDataInfoService },
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: BillTrackerLocalePipe },
                { type: core$1.ViewContainerRef },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef },
                { type: String, decorators: [{ type: core$1.Optional }, { type: core$1.Inject, args: [core$1.LOCALE_ID,] }] }
            ];
        };
        BasicInfoComponent.propDecorators = {
            schemaTable: [{ type: core$1.Input, args: ["schemaTable",] }],
            dataTable: [{ type: core$1.Input, args: ["dataTable",] }],
            billInfo: [{ type: core$1.Input, args: ["billInfo",] }],
            billDataInfo: [{ type: core$1.Input, args: ["billDataInfo",] }]
        };
        return BasicInfoComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/bill-tracker-data/bill-tracker-data.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerDataComponent = /** @class */ (function () {
        function BillTrackerDataComponent(notify, messager, loading, modal, dataService, inj, cfr, cdf, loader, localeId, vcr, er) {
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.dataService = dataService;
            this.inj = inj;
            this.cfr = cfr;
            this.cdf = cdf;
            this.loader = loader;
            this.dataInfoService = new BillTrackerDataInfoService();
            this.localeId = localeId || this.inj.get(core$1.LOCALE_ID, null) || 'zh-CHS';
            this.localePipe = new BillTrackerLocalePipe(localeId);
            this.vcr = vcr || this.inj.get(core$1.ViewContainerRef, null);
            this.er = er || this.inj.get(core$1.ElementRef, null);
        }
        /**
         * @return {?}
         */
        BillTrackerDataComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @return {?}
         */
        BillTrackerDataComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @return {?}
         */
        BillTrackerDataComponent.prototype.clearDataRegion = /**
         * @return {?}
         */
            function () {
                this.dataRegion.clear();
            };
        /**
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @param {?=} res
         * @return {?}
         */
        BillTrackerDataComponent.prototype.showDataGrid = /**
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @param {?=} res
         * @return {?}
         */
            function (args, billInfo, billDataInfo, res) {
                // 单据追踪配置
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (billInfo && billInfo.billTrackingSettings) {
                    bts.LoadFromJson(billInfo.billTrackingSettings);
                }
                if (bts.billTrackingDataShownMode == commonApi.BillTrackingDataShownMode.CUSTOMFORM) {
                    this.showCustomForm(args, billInfo, billDataInfo);
                }
                else {
                    this.showGeneralForm(args, billInfo, billDataInfo, res);
                }
            };
        /**
         * 打开通用表单
         * @param args
         * @param billInfo
         * @param res
         */
        /**
         * 打开通用表单
         * @private
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @param {?=} res
         * @param {?=} newBTS
         * @return {?}
         */
        BillTrackerDataComponent.prototype.showGeneralForm = /**
         * 打开通用表单
         * @private
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @param {?=} res
         * @param {?=} newBTS
         * @return {?}
         */
            function (args, billInfo, billDataInfo, res, newBTS) {
                var _this = this;
                if (res != null) {
                    this.createDataComp(res, billInfo, billDataInfo);
                }
                else {
                    /** @type {?} */
                    var l_1 = this.loading.show({ message: this.localePipe.transform("loading") });
                    this.dataService.getEntityData(args).subscribe(( /**
                     * @param {?} res
                     * @return {?}
                     */function (res) {
                        _this.createDataComp(res, billInfo, billDataInfo);
                        l_1.close();
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        l_1.close();
                        _this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        throw err;
                    }));
                }
            };
        /**
         * 打开自定义表单
         * @param args
         * @param billInfo
         */
        /**
         * 打开自定义表单
         * @private
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @return {?}
         */
        BillTrackerDataComponent.prototype.showCustomForm = /**
         * 打开自定义表单
         * @private
         * @param {?} args
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @return {?}
         */
            function (args, billInfo, billDataInfo) {
                var _this = this;
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (billInfo && billInfo.billTrackingSettings) {
                    bts.LoadFromJson(billInfo.billTrackingSettings);
                }
                /** @type {?} */
                var formContent = JSON.parse(bts.customFormContent);
                /** @type {?} */
                var moduleF$ = null;
                if (formContent.form.endsWith(".js")) {
                    // url格式为[js路径]时
                    moduleF$ = rxjs.from(System.import(formContent.form.toLowerCase()).then(( /**
                     * @param {?} m
                     * @return {?}
                     */function (m) { return m; }))).pipe(operators.switchMap(( /**
                     * @param {?} m
                     * @return {?}
                     */function (m) {
                        for (var key in m) {
                            return rxjs.of(m[key]);
                        }
                        return rxjs.of(null);
                    })));
                }
                else {
                    // url格式为[js路径#模块名]时
                    moduleF$ = rxjs.from(this.loader.load(formContent.form));
                }
                moduleF$.subscribe(( /**
                 * @param {?} moduleFactory
                 * @return {?}
                 */function (moduleFactory) {
                    /** @type {?} */
                    var moduleRef = moduleFactory.create(_this.inj);
                    /** @type {?} */
                    var cmpR$ = moduleRef.instance.createDataShownComponent(_this.inj, args);
                    if (cmpR$ instanceof core$1.ComponentRef) {
                        cmpR$ = rxjs.of(cmpR$);
                    }
                    cmpR$.subscribe(( /**
                     * @param {?} cmpR
                     * @return {?}
                     */function (cmpR) {
                        // 重置滚动条
                        /** @type {?} */
                        var elt = ( /** @type {?} */(_this.dataRegion.element.nativeElement.parentElement));
                        elt.scrollTo({ left: 0 });
                        _this.dataRegion.clear();
                        _this.dataRegion.insert(cmpR.hostView);
                    }));
                }));
            };
        /**
       * 创建通用表组件
       * @param res
       * @param billInfo
       */
        /**
         * 创建通用表组件
         * @param {?} res
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
        BillTrackerDataComponent.prototype.createDataComp = /**
         * 创建通用表组件
         * @param {?} res
         * @param {?} billInfo
         * @param {?} billDataInfo
         * @return {?}
         */
            function (res, billInfo, billDataInfo) {
                /** @type {?} */
                var newBTS = this.dataInfoService.isNewBTS(billInfo.billTrackingSettings);
                // if (newBTS) {
                try {
                    this.createNewDataComp(res, billInfo, billDataInfo);
                }
                catch (e) {
                    // 重置滚动条
                    /** @type {?} */
                    var elt = ( /** @type {?} */(this.dataRegion.element.nativeElement.parentElement));
                    elt && elt.scrollTo({ left: 0 });
                    this.dataRegion.clear();
                    /** @type {?} */
                    var cmf = this.cfr.resolveComponentFactory(BasicTableComponent);
                    /** @type {?} */
                    var cmpR = this.dataRegion.createComponent(cmf);
                    cmpR.instance.billInfo = billInfo;
                    cmpR.instance.isMain = true;
                    cmpR.instance.showMainTable(res);
                    this.dataRegion.insert(cmpR.hostView);
                }
                // }
            };
        /**
       * 创建通用表组件
       * @param res
       * @param billInfo
       */
        /**
         * 创建通用表组件
         * @param {?} res
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @return {?}
         */
        BillTrackerDataComponent.prototype.createNewDataComp = /**
         * 创建通用表组件
         * @param {?} res
         * @param {?=} billInfo
         * @param {?=} billDataInfo
         * @return {?}
         */
            function (res, billInfo, billDataInfo) {
                // 重置滚动条
                /** @type {?} */
                var elt = ( /** @type {?} */(this.dataRegion.element.nativeElement.parentElement));
                elt && elt.scrollTo({ left: 0 });
                this.dataRegion.clear();
                /** @type {?} */
                var cmf = this.cfr.resolveComponentFactory(BasicInfoComponent);
                /** @type {?} */
                var cmpR = this.dataRegion.createComponent(cmf);
                cmpR.instance.schemaTable = res.billSchema.mainTable;
                cmpR.instance.dataTable = res.billData.mainTable;
                cmpR.instance.billInfo = billInfo;
                cmpR.instance.billDataInfo = billDataInfo;
                this.dataRegion.insert(cmpR.hostView);
            };
        BillTrackerDataComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: 'lib-bill-tracker-data',
                        template: "<div style=\"\">\r\n    <ng-container #dataRegion></ng-container>\r\n</div>",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        BillTrackerDataComponent.ctorParameters = function () {
            return [
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: BillTrackerDataService },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef },
                { type: core$1.NgModuleFactoryLoader },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: core$1.ViewContainerRef, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ElementRef, decorators: [{ type: core$1.Optional }] }
            ];
        };
        BillTrackerDataComponent.propDecorators = {
            dataRegion: [{ type: core$1.ViewChild, args: ["dataRegion", { read: core$1.ViewContainerRef },] }]
        };
        return BillTrackerDataComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/basic-table/child-row-table.directive.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ChildRowTableDirective = /** @class */ (function () {
        function ChildRowTableDirective(cfr, vcRef, cdr) {
            this.cfr = cfr;
            this.vcRef = vcRef;
            this.cdr = cdr;
            this.hasChildren = new core$1.EventEmitter();
        }
        Object.defineProperty(ChildRowTableDirective.prototype, "expanded", {
            get: /**
             * @return {?}
             */ function () {
                return this._expanded;
            },
            set: /**
             * @param {?} val
             * @return {?}
             */ function (val) {
                this._expanded = val;
                if (val) {
                    this.showChildTable();
                }
                else {
                    this.clearChildTable();
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ChildRowTableDirective.prototype.showChildTable = /**
         * @return {?}
         */
            function () {
                var e_1, _a;
                if (this.parentRow == null) {
                    return;
                }
                this.clearChildTable();
                /** @type {?} */
                var cmpF = this.cfr.resolveComponentFactory(BasicTableComponent);
                try {
                    for (var _b = __values(this.parentRow.GetChildTableList()), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var childTable = _c.value;
                        /** @type {?} */
                        var cmpR = this.vcRef.createComponent(cmpF);
                        cmpR.instance.billInfo = this.billInfo;
                        cmpR.instance.isMain = false;
                        cmpR.instance.showTable(this.parentSchemaTable.GetChildTableMap()[childTable.tableName], childTable);
                        this.vcRef.insert(cmpR.hostView);
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return))
                            _a.call(_b);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                this.cdr.markForCheck();
            };
        /**
         * @return {?}
         */
        ChildRowTableDirective.prototype.clearChildTable = /**
         * @return {?}
         */
            function () {
                this.vcRef.clear();
            };
        ChildRowTableDirective.decorators = [
            { type: core$1.Directive, args: [{
                        selector: '[appChildRowTable]'
                    },] }
        ];
        /** @nocollapse */
        ChildRowTableDirective.ctorParameters = function () {
            return [
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ViewContainerRef },
                { type: core$1.ChangeDetectorRef }
            ];
        };
        ChildRowTableDirective.propDecorators = {
            billInfo: [{ type: core$1.Input, args: ["billInfo",] }],
            colspan: [{ type: core$1.Input, args: ["colspan",] }],
            parentRow: [{ type: core$1.Input, args: ["parentRow",] }],
            parentSchemaTable: [{ type: core$1.Input, args: ["parentSchemaTable",] }],
            parentDataTable: [{ type: core$1.Input, args: ["parentDataTable",] }],
            expanded: [{ type: core$1.Input, args: ["expanded",] }],
            hasChildren: [{ type: core$1.Output, args: ["hasChildren",] }]
        };
        return ChildRowTableDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/child-info-list/child-info-list.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ChildInfoListComponent = /** @class */ (function () {
        function ChildInfoListComponent(dataInfoService, notify, messager, loading, modal, localePipe, vcr, inj, cfr, cdr) {
            this.dataInfoService = dataInfoService;
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.localePipe = localePipe;
            this.vcr = vcr;
            this.inj = inj;
            this.cfr = cfr;
            this.cdr = cdr;
        }
        /**
         * @return {?}
         */
        ChildInfoListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
            };
        ChildInfoListComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: "lib-bill-tracker-child-info-list",
                        template: "<ng-container *ngFor=\"let childTable of childSchemaTables\">\r\n    <lib-bill-tracker-child-info [schemaTable]=\"childTable\" [dataTable]=\"childDataTableMap[childTable.tableName]\"\r\n        [billInfo]=\"billInfo\">\r\n    </lib-bill-tracker-child-info>\r\n</ng-container>"
                    }] }
        ];
        /** @nocollapse */
        ChildInfoListComponent.ctorParameters = function () {
            return [
                { type: BillTrackerDataInfoService },
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: BillTrackerLocalePipe },
                { type: core$1.ViewContainerRef },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef }
            ];
        };
        ChildInfoListComponent.propDecorators = {
            childSchemaTables: [{ type: core$1.Input, args: ["childSchemaTables",] }],
            childDataTableMap: [{ type: core$1.Input, args: ["childDataTableMap",] }],
            billInfo: [{ type: core$1.Input, args: ["billInfo",] }]
        };
        return ChildInfoListComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/components/child-info/child-info.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ChildInfoComponent = /** @class */ (function () {
        function ChildInfoComponent(notify, messager, loading, modal, dataInfoService, localePipe, vcr, inj, cfr, cdr, localeId) {
            this.notify = notify;
            this.messager = messager;
            this.loading = loading;
            this.modal = modal;
            this.dataInfoService = dataInfoService;
            this.localePipe = localePipe;
            this.vcr = vcr;
            this.inj = inj;
            this.cfr = cfr;
            this.cdr = cdr;
            this.localeId = localeId;
            this.secTitle = null;
            this.showDetail = false;
            this.dgCols = [];
            this.dgData = [];
            this.dgLineNumberTitle = this.localePipe.transform("lineNumber");
            this.dgIdField = "bifDgId0d63";
            this.localeId = localeId || this.inj.get(core$1.LOCALE_ID);
        }
        /**
         * @return {?}
         */
        ChildInfoComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                // 设置section标题
                this.secTitle = this.localePipe.transform("basicInfo");
                // 表名解析
                this.secTitle = this.dataInfoService.getTableLabel(this.billInfo, this.schemaTable, this.localeId);
                // 单据追踪配置
                /** @type {?} */
                var bts = new commonApi.BillTrackingSettings();
                if (this.billInfo && this.billInfo.billTrackingSettings) {
                    bts.LoadFromJson(this.billInfo.billTrackingSettings);
                }
                // 字段解析
                /** @type {?} */
                var fieldContent = bts.customFieldContent;
                /** @type {?} */
                var fieldConfig = fieldContent && (typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent));
                /** @type {?} */
                var selectedFields = fieldConfig && fieldConfig.schema && fieldConfig.schema[this.schemaTable.tableName] && fieldConfig.schema[this.schemaTable.tableName].fields;
                selectedFields = selectedFields ? selectedFields : [];
                /** @type {?} */
                var showCustomFields = bts.billTrackingDataShownMode === commonApi.BillTrackingDataShownMode.CUSTOMFIELD;
                /** @type {?} */
                var fs = this.schemaTable.getFieldList();
                // 提取字段
                /** @type {?} */
                var ffs = this.dataInfoService.extractFFields(fs, selectedFields, showCustomFields);
                // 筛选显示列
                ffs = ffs.filter(( /**
                 * @param {?} f
                 * @return {?}
                 */function (f) { return f.show; }));
                // 按order排序
                ffs = this.dataInfoService.sortFieldsByOrder(ffs);
                // 创建显示列
                this.dgCols = [];
                ffs.forEach(( /**
                 * @param {?} f
                 * @return {?}
                 */function (f) {
                    /** @type {?} */
                    var c = {
                        field: f.fieldPath || f.fieldName,
                        title: _this.dataInfoService.getFieldLabel(f, _this.localeId),
                        width: 120
                    };
                    if (f.dataType == commonApi$1.DataType.Boolean) {
                        c.formatter = ( /**
                         * @param {?} value
                         * @param {?} rowData
                         * @param {?} rowIndex
                         * @return {?}
                         */function (value, rowData, rowIndex) {
                            if (value == true) {
                                return _this.localePipe.transform("yes");
                            }
                            else if (value == false) {
                                return _this.localePipe.transform("no");
                            }
                            else {
                                return "-";
                            }
                        });
                    }
                    if (f.dataType == commonApi$1.DataType.Integer || f.dataType == commonApi$1.DataType.Decimal) {
                        c.halign = "right";
                        c.align = "right";
                    }
                    _this.dgCols.push(c);
                }));
                // 构建行数据
                /** @type {?} */
                var rows = this.dataTable ? this.dataTable.GetRowList() : [];
                try {
                    this.dgData = __spread(this.dataInfoService.extractDataRows(rows, ffs, fs, this.dgIdField));
                }
                catch (error) {
                    this.dgData = [];
                    if (error == Exceptions.SCALE_FIELD_VALUE_IS_NAN) {
                        this.messager.error(this.localePipe.transform("scaleFieldCantBeCastToInteger"));
                    }
                    throw error;
                }
                if (this.dgData.length > 0) {
                    setTimeout(( /**
                     * @return {?}
                     */function () {
                        _this.dg && _this.dg.selectRow(_this.dgData[0][_this.dgIdField]);
                    }), 500);
                }
            };
        /**
         * @param {?} row
         * @return {?}
         */
        ChildInfoComponent.prototype.selectChanged = /**
         * @param {?} row
         * @return {?}
         */
            function (row) {
                /** @type {?} */
                var r = this.dataTable ? this.dataTable.GetRowMap()[row.id] : null;
                this.showDetail = r != null && this.dataInfoService.hasChildData(r, this.billInfo);
                this.cdr.detectChanges();
            };
        /**
         * @return {?}
         */
        ChildInfoComponent.prototype.viewChildData = /**
         * @return {?}
         */
            function () {
                if (this.dg.selectedRow == null) {
                    this.notify.warning(this.localePipe.transform("selectOneFirst"));
                    return;
                }
                /** @type {?} */
                var row = this.dataTable ? this.dataTable.GetRowMap()[this.dg.selectedRow.id] : null;
                if (row == null || !this.dataInfoService.hasChildData(row, this.billInfo)) {
                    this.notify.info(this.localePipe.transform("noChildData"));
                    return;
                }
                /** @type {?} */
                var cmpF = this.cfr.resolveComponentFactory(ChildInfoListComponent);
                /** @type {?} */
                var cmpR = cmpF.create(this.inj, []);
                // 获取子表列表
                /** @type {?} */
                var childSchemaTables = this.dataInfoService.getChildTables(this.billInfo, this.schemaTable);
                cmpR.instance.childSchemaTables = childSchemaTables;
                cmpR.instance.childDataTableMap = row.GetChildTableMap();
                cmpR.instance.billInfo = this.billInfo;
                /** @type {?} */
                var bsModalRef = this.modal.show(cmpR, {
                    title: this.localePipe.transform("childData"),
                    width: 900,
                    height: 600,
                    showButtons: false,
                });
                cmpR.instance.bsModalRef = bsModalRef;
            };
        ChildInfoComponent.decorators = [
            { type: core$1.Component, args: [{
                        selector: "lib-bill-tracker-child-info",
                        template: "<div class=\"f-struct-wrapper\" *ngIf=\"dgCols&&dgCols.length>0&&dgData&&dgData.length>0\">\r\n    <farris-section class=\"f-section-tabs f-section-in-mainsubcard\" [mainTitle]=\"secTitle\">\r\n        <ng-template farrisSectionToolbar [toolbarCls]=\"'section-test-toolbar'\">\r\n            <button class=\"btn btn-secondary f-btn-ml\" *ngIf=\"showDetail\" (click)=\"viewChildData()\">\r\n                {{ \"childData\" | billTrackerLocale}}\r\n            </button>\r\n        </ng-template>\r\n        <div class=\"\">\r\n            <div class=\"f-utils-fill\">\r\n                <farris-datagrid #dg [data]=\"dgData\" [idField]=\"dgIdField\" [fields]=\"dgCols\" [showLineNumber]=\"true\"\r\n                    [striped]=\"true\" [virtualized]=\"false\" [pagination]=\"false\" [virtualizedAsyncLoad]=\"false\"\r\n                    [multiSelect]=\"false\" [fit]=\"true\" [showCheckbox]=\"false\" [showAllCheckbox]=\"false\"\r\n                    [lineNumberTitle]=\"dgLineNumberTitle\" [mergeCell]=\"false\" [showBorder]=\"true\"\r\n                    [checkOnSelect]=\"false\" [selectOnCheck]=\"false\" [nowrap]=\"true\" [autoFitColumns]=\"true\"\r\n                    [fitColumns]=\"true\" [autoHeight]=\"false\" (selectChanged)=\"selectChanged($event)\">\r\n                </farris-datagrid>\r\n            </div>\r\n        </div>\r\n    </farris-section>\r\n</div>"
                    }] }
        ];
        /** @nocollapse */
        ChildInfoComponent.ctorParameters = function () {
            return [
                { type: uiNotify.NotifyService },
                { type: uiMessager.MessagerService },
                { type: uiLoading.LoadingService },
                { type: uiModal.BsModalService },
                { type: BillTrackerDataInfoService },
                { type: BillTrackerLocalePipe },
                { type: core$1.ViewContainerRef },
                { type: core$1.Injector },
                { type: core$1.ComponentFactoryResolver },
                { type: core$1.ChangeDetectorRef },
                { type: String, decorators: [{ type: core$1.Optional }, { type: core$1.Inject, args: [core$1.LOCALE_ID,] }] }
            ];
        };
        ChildInfoComponent.propDecorators = {
            schemaTable: [{ type: core$1.Input, args: ["schemaTable",] }],
            dataTable: [{ type: core$1.Input, args: ["dataTable",] }],
            billInfo: [{ type: core$1.Input, args: ["billInfo",] }],
            dg: [{ type: core$1.ViewChild, args: ["dg",] }]
        };
        return ChildInfoComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/pipe/bill-tracker-field-label.pipe.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillTrackerFieldLabelPipe = /** @class */ (function () {
        function BillTrackerFieldLabelPipe(dataInfoService, localeId) {
            this.dataInfoService = dataInfoService;
            this.localeId = localeId;
        }
        /**
         * @param {?} f
         * @param {?=} langCode
         * @return {?}
         */
        BillTrackerFieldLabelPipe.prototype.transform = /**
         * @param {?} f
         * @param {?=} langCode
         * @return {?}
         */
            function (f, langCode) {
                return this.dataInfoService.getFieldLabel(f, langCode || this.localeId);
            };
        BillTrackerFieldLabelPipe.decorators = [
            { type: core$1.Pipe, args: [{ name: 'billTrackerFieldLabel' },] }
        ];
        /** @nocollapse */
        BillTrackerFieldLabelPipe.ctorParameters = function () {
            return [
                { type: BillTrackerDataInfoService },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] }
            ];
        };
        return BillTrackerFieldLabelPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/bill-tracker/bill-tracker.module.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$1 = localStorage.getItem('languageCode') || 'zh-CHS', ɵ1$1 = {};
    var BillTrackerModule = /** @class */ (function () {
        function BillTrackerModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        BillTrackerModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                return {
                    ngModule: BillTrackerModule,
                    providers: [
                        { provide: BillTrackerModuleConfig, useValue: config || {} },
                    ]
                };
            };
        BillTrackerModule.decorators = [
            { type: core$1.NgModule, args: [{
                        declarations: [
                            BillTrackerComponent,
                            BillTrackerGraphComponent,
                            BillTrackerDataComponent,
                            BasicTableComponent,
                            ChildRowTableDirective,
                            BillTrackerLocalePipe,
                            BasicInfoComponent,
                            ChildInfoComponent,
                            ChildInfoListComponent,
                            BillTrackerFieldLabelPipe,
                        ],
                        imports: [
                            common.CommonModule,
                            http.HttpClientModule,
                            forms.FormsModule,
                            uiDraggable.AngularDraggableModule,
                            uiMessager.MessagerModule.forRoot(),
                            uiLoading.LoadingModule.forRoot(),
                            uiNotify.NotifyModule,
                            uiText.TextModule,
                            uiSection.FarrisSectionModule,
                            uiDatagrid.DatagridModule.forRoot(),
                            uiDialog.FarrisDialogModule,
                        ],
                        providers: [
                            { provide: core$1.LOCALE_ID, useValue: ɵ0$1 },
                            { provide: BillTrackerModuleConfig, useValue: ɵ1$1 },
                            { provide: core$1.NgModuleFactoryLoader, useClass: core$1.SystemJsNgModuleLoader },
                            cafCommon.CacheService,
                            cafCommon.SessionService,
                            cafCommon.HttpService,
                            rtfCommon.FrmEventBus,
                            rtfCommon.FuncsService,
                            rtfCommon.LoadingService,
                            rtfCommon.AppService,
                            rtfCommon.FrameworkService,
                            BillTrackerDataService,
                            BillTrackerUiService,
                            BillTrackerInternalUiService,
                            BillTrackerLocalePipe,
                            BillTrackerDataInfoService,
                        ],
                        bootstrap: [BillTrackerComponent],
                        exports: [
                            BillTrackerComponent,
                            BillTrackerDataComponent,
                        ],
                        entryComponents: [
                            BillTrackerComponent,
                            BillTrackerDataComponent,
                            BasicTableComponent,
                            BasicInfoComponent,
                            ChildInfoComponent,
                            ChildInfoListComponent,
                        ]
                    },] }
        ];
        return BillTrackerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-bill-tracker.webcmp.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 单据追踪web构件服务类
     */
    var BifBillTrackerWebCmpService = /** @class */ (function () {
        function BifBillTrackerWebCmpService(trackerUiService, bindingData, viewModel, frameContext, inj, cfr, localeId, messagerService) {
            this.trackerUiService = trackerUiService;
            this.bindingData = bindingData;
            this.viewModel = viewModel;
            this.frameContext = frameContext;
            this.inj = inj;
            this.cfr = cfr;
            this.localeId = localeId;
            this.messagerService = messagerService;
            if (inj == null) {
                /** @type {?} */
                var refInj = core$1.ReflectiveInjector.resolveAndCreate([], this.frameContext && this.frameContext.injector);
                this.inj = refInj;
            }
            this.cfr = cfr || this.inj.get(core$1.ComponentFactoryResolver);
            this.localeId = localeId || this.inj.get(core$1.LOCALE_ID, null) || 'zh-CHS';
            this.messagerService = messagerService || this.inj.get(uiMessager.MessagerService, null);
            this.localePipe = this.trackerUiService && this.trackerUiService.localePipe || new BillTrackerLocalePipe(localeId);
        }
        /**
         * 打开单据追踪弹窗
         * @param args 单据Id或者单据查询参数
         * @param maximized 是否最大化弹窗
         * @param modalOptions 弹窗配置
         * @param graphOptions 单据追踪图配置
         * @param gridOptions 单据追踪数据表配置
         * @returns billTrackerComponent 单据追踪组件 @type { Observable<BillTrackerComponent> }
         */
        /**
         * 打开单据追踪弹窗
         * @param {?} args 单据Id或者单据查询参数
         * @param {?=} maximized 是否最大化弹窗
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} graphOptions 单据追踪图配置
         * @param {?=} gridOptions 单据追踪数据表配置
         * @return {?} billTrackerComponent 单据追踪组件 \@type { Observable<BillTrackerComponent> }
         */
        BifBillTrackerWebCmpService.prototype.openDialog = /**
         * 打开单据追踪弹窗
         * @param {?} args 单据Id或者单据查询参数
         * @param {?=} maximized 是否最大化弹窗
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} graphOptions 单据追踪图配置
         * @param {?=} gridOptions 单据追踪数据表配置
         * @return {?} billTrackerComponent 单据追踪组件 \@type { Observable<BillTrackerComponent> }
         */
            function (args, maximized, modalOptions, graphOptions, gridOptions) {
                if (args == null || args == "" || (( /** @type {?} */(args))).trim && (( /** @type {?} */(args))).trim() == "") {
                    this.messagerService.error(this.localePipe.transform("trackerArgsCantBeEmpty"));
                    throw "参数args不可为空";
                }
                if (typeof args == "string" && canJSONParse(( /** @type {?} */(args)))) {
                    args = JSON.parse(( /** @type {?} */(args)));
                }
                else {
                    args = ( /** @type {?} */(args));
                }
                maximized = ( /** @type {?} */(maximized)) === "" || maximized == null ? undefined : maximized;
                if (maximized != null && typeof maximized != "boolean") {
                    if (maximized == "false") {
                        maximized = false;
                    }
                    else if (maximized == "true") {
                        maximized = true;
                    }
                    else {
                        maximized = undefined;
                    }
                }
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                graphOptions = ( /** @type {?} */(graphOptions)) === "" || graphOptions == null ? undefined : graphOptions;
                gridOptions = ( /** @type {?} */(gridOptions)) === "" || gridOptions == null ? undefined : gridOptions;
                /** @type {?} */
                var argz = new GetBillsInfoArgs();
                if (typeof args == "string") {
                    argz.billDataId = args;
                }
                else {
                    argz.LoadFromJsonObject(args);
                }
                return this.trackerUiService.openDefaultBillTrackerDialog(argz, maximized, modalOptions, graphOptions, gridOptions);
            };
        /**
         * 打开单据追踪App
         * @param args 单据Id或者单据查询参数
         * @param graphOptions 单据追踪图配置
         * @param gridOptions 单据追踪数据表配置
         */
        /**
         * 打开单据追踪App
         * @param {?} args 单据Id或者单据查询参数
         * @param {?=} graphOptions 单据追踪图配置
         * @param {?=} gridOptions 单据追踪数据表配置
         * @return {?}
         */
        BifBillTrackerWebCmpService.prototype.openApp = /**
         * 打开单据追踪App
         * @param {?} args 单据Id或者单据查询参数
         * @param {?=} graphOptions 单据追踪图配置
         * @param {?=} gridOptions 单据追踪数据表配置
         * @return {?}
         */
            function (args, graphOptions, gridOptions) {
                if (args == null || args == "" || (( /** @type {?} */(args))).trim && (( /** @type {?} */(args))).trim() == "") {
                    this.messagerService.error(this.localePipe.transform("trackerArgsCantBeEmpty"));
                    throw "参数args不可为空";
                }
                if (typeof args == "string" && canJSONParse(( /** @type {?} */(args)))) {
                    args = JSON.parse(( /** @type {?} */(args)));
                }
                else {
                    args = ( /** @type {?} */(args));
                }
                graphOptions = ( /** @type {?} */(graphOptions)) === "" || graphOptions == null ? undefined : graphOptions;
                gridOptions = ( /** @type {?} */(gridOptions)) === "" || gridOptions == null ? undefined : gridOptions;
                /** @type {?} */
                var argz = new GetBillsInfoArgs();
                if (typeof args == "string") {
                    argz.billDataId = args;
                }
                else {
                    argz.LoadFromJsonObject(args);
                }
                this.trackerUiService.openDefaultBillTrackerApp(argz, graphOptions, gridOptions);
            };
        BifBillTrackerWebCmpService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifBillTrackerWebCmpService.ctorParameters = function () {
            return [
                { type: BillTrackerUiService },
                { type: devkit.BindingData, decorators: [{ type: core$1.Optional }] },
                { type: devkit.ViewModel, decorators: [{ type: core$1.Optional }] },
                { type: devkit.FrameContext, decorators: [{ type: core$1.Optional }] },
                { type: core$1.Injector, decorators: [{ type: core$1.Optional }] },
                { type: core$1.ComponentFactoryResolver, decorators: [{ type: core$1.Optional }] },
                { type: String, decorators: [{ type: core$1.Inject, args: [core$1.LOCALE_ID,] }] },
                { type: uiMessager.MessagerService, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifBillTrackerWebCmpService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/EntityParamUtils.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var EntityParamUtils = /** @class */ (function () {
        function EntityParamUtils() {
        }
        /**
         * 构造sourceVoEntityDataIds和sourceVoEntityDatas参数
         * @param entities 参与生单的上游单据ID列表或实体列表
         * @returns
         */
        /**
         * 构造sourceVoEntityDataIds和sourceVoEntityDatas参数
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @return {?}
         */
        EntityParamUtils.buildSourceVoEntityData = /**
         * 构造sourceVoEntityDataIds和sourceVoEntityDatas参数
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @return {?}
         */
            function (entities) {
                /** @type {?} */
                var sourceVoEntityDataIds = null;
                /** @type {?} */
                var sourceVoEntityDatas = null;
                // 判断entities是不是全为ID字符串
                // 不存在非字符串类型或者可以JSON.parse的元素时
                if (!entities.some(( /**
                 * @param {?} it
                 * @return {?}
                 */function (it) { return ((typeof it) != "string") || (canJSONParse(it)); }))) {
                    sourceVoEntityDataIds = ( /** @type {?} */(entities));
                    sourceVoEntityDatas = null;
                }
                else {
                    sourceVoEntityDataIds = null;
                    sourceVoEntityDatas = entities.map(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item instanceof devkit.Entity) {
                            // 如果是Entity
                            return JSON.stringify((( /** @type {?} */(item))).toJSON(false, true));
                        }
                        else if (item["__type__"] == "BindingObject") {
                            //如果来自BindingData
                            /** @type {?} */
                            var bindingObject = ( /** @type {?} */(item));
                            return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                        }
                        else if ((( /** @type {?} */(item))).toJSON != null) {
                            /** @type {?} */
                            var e = ( /** @type {?} */(item));
                            return JSON.stringify((( /** @type {?} */(e))).toJSON(false, true));
                        }
                        else {
                            /** @type {?} */
                            var e = item;
                            return JSON.stringify(e);
                        }
                    }));
                }
                return {
                    sourceVoEntityDataIds: sourceVoEntityDataIds,
                    sourceVoEntityDatas: sourceVoEntityDatas,
                };
            };
        return EntityParamUtils;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-manual-creation-data.webcmp.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 手工生单数据服务类
     */
    var BifManualCreationDataWebCmpService = /** @class */ (function () {
        function BifManualCreationDataWebCmpService(dataService, bindingData, messagerService, viewModel, frameContext) {
            this.dataService = dataService;
            this.bindingData = bindingData;
            this.messagerService = messagerService;
            this.viewModel = viewModel;
            this.frameContext = frameContext;
            this.localePipe = new LocalePipe(this.dataService && this.dataService.localeId || 'zh-CHS');
        }
        /**
         * 根据生单流程Id查找指定的生单流程
         * @param processId 单据流生单流程 Id
         * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        /**
         * 根据生单流程Id查找指定的生单流程
         * @param {?} processId 单据流生单流程 Id
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        BifManualCreationDataWebCmpService.prototype.getSlimBillCreationProcessEntityExById = /**
         * 根据生单流程Id查找指定的生单流程
         * @param {?} processId 单据流生单流程 Id
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
            function (processId) {
                if (processId == null || processId == "" || processId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("processIdCantBeEmpty"));
                    throw "参数processId不可为空";
                }
                return this.dataService.getSlimBillCreationProcessEntityExById(processId);
            };
        /**
         * 查询表单配置
         * @param formSettingsId 表单配置Id
         * @returns formSettings 表单配置 @type { Observable<FormSettings> }
         */
        /**
         * 查询表单配置
         * @param {?} formSettingsId 表单配置Id
         * @return {?} formSettings 表单配置 \@type { Observable<FormSettings> }
         */
        BifManualCreationDataWebCmpService.prototype.getFormSettingsById = /**
         * 查询表单配置
         * @param {?} formSettingsId 表单配置Id
         * @return {?} formSettings 表单配置 \@type { Observable<FormSettings> }
         */
            function (formSettingsId) {
                return this.dataService.getFormSettingsById(formSettingsId);
            };
        /**
         * 执行生单流程
         * @param entities 参与生单的上游单据ID列表或实体列表
         * @param creationProcessId 单据流生单流程 Id
         * @param creationRuleId 生单规则Id（生单流程实体中记录）
         * @returns creationResult 生单结果 @type { Observable<FormBillCreationProcessExecutorResult> }
         */
        /**
         * 执行生单流程
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?} creationProcessId 单据流生单流程 Id
         * @param {?} creationRuleId 生单规则Id（生单流程实体中记录）
         * @param {?} targetDataIds
         * @param {?} manualCreationMode
         * @return {?} creationResult 生单结果 \@type { Observable<FormBillCreationProcessExecutorResult> }
         */
        BifManualCreationDataWebCmpService.prototype.executeBillCreationProcess = /**
         * 执行生单流程
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?} creationProcessId 单据流生单流程 Id
         * @param {?} creationRuleId 生单规则Id（生单流程实体中记录）
         * @param {?} targetDataIds
         * @param {?} manualCreationMode
         * @return {?} creationResult 生单结果 \@type { Observable<FormBillCreationProcessExecutorResult> }
         */
            function (entities, creationProcessId, creationRuleId, targetDataIds, manualCreationMode) {
                if (entities == null || (( /** @type {?} */(entities))) == "") {
                    this.messagerService.error(this.localePipe.transform("entitiesCantBeEmpty"));
                    throw "参数entities不可为空";
                }
                if (entities instanceof Map) {
                    entities = Array.from(entities.values());
                }
                entities = Array.isArray(entities) ? entities : [entities];
                manualCreationMode = manualCreationMode ? manualCreationMode : ManualCreationMode.Push;
                var _a = EntityParamUtils.buildSourceVoEntityData(entities), sourceVoEntityDatas = _a.sourceVoEntityDatas, sourceVoEntityDataIds = _a.sourceVoEntityDataIds;
                //创建执行生单流程参数对象
                /** @type {?} */
                var args = new FormBillCreationProcessExecutorArgs();
                args.billCreationProcessId = creationProcessId;
                args.creationRuleId = creationRuleId;
                //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                args.sourceVoEntityDatas = sourceVoEntityDatas;
                args.sourceVoEntityDataIds = sourceVoEntityDataIds;
                //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                args.targetVoDataIds = targetDataIds;
                args.manualCreationMode = manualCreationMode;
                return this.dataService.executeBillCreationProcess(args);
            };
        /**
         * 创建实体数据（RetrieveDefault至缓存）
         * @param formVoId 表单绑定VO Id
         * @param res 生单流程执行结果
         * @returns formCreateResult 创建实体数据返回结果 @type { Observable<FormCreateResult> }
         */
        /**
         * 创建实体数据（RetrieveDefault至缓存）
         * @param {?} formVoId 表单绑定VO Id
         * @param {?} res 生单流程执行结果
         * @return {?} formCreateResult 创建实体数据返回结果 \@type { Observable<FormCreateResult> }
         */
        BifManualCreationDataWebCmpService.prototype.createEntityDatas = /**
         * 创建实体数据（RetrieveDefault至缓存）
         * @param {?} formVoId 表单绑定VO Id
         * @param {?} res 生单流程执行结果
         * @return {?} formCreateResult 创建实体数据返回结果 \@type { Observable<FormCreateResult> }
         */
            function (formVoId, res) {
                /** @type {?} */
                var args = new runtimeApi.FormCreateArgs();
                args.formVoId = formVoId;
                //获取生单流程执行结果
                args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
                //创建实体数据
                return this.dataService.createEntityDatas(args);
            };
        /**
         * 更新实体数据
         * @param res 生单流程执行结果
         * @returns formUpdateResult 更新实体数据返回结果 @type { Observable<FormUpdateResult> }
         */
        /**
         * 更新实体数据
         * @param {?} res 生单流程执行结果
         * @return {?} formUpdateResult 更新实体数据返回结果 \@type { Observable<FormUpdateResult> }
         */
        BifManualCreationDataWebCmpService.prototype.updateEntityDatas = /**
         * 更新实体数据
         * @param {?} res 生单流程执行结果
         * @return {?} formUpdateResult 更新实体数据返回结果 \@type { Observable<FormUpdateResult> }
         */
            function (res) {
                /** @type {?} */
                var args = new runtimeApi.FormUpdateArgs();
                //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                if (res.conditionResult.conditionExecutionResult == true) {
                    //生单结果不为空
                    if (res.creationRuleExecutorResult && res.creationRuleExecutorResult.mappingResults && res.creationRuleExecutorResult.mappingResults.length > 0) {
                        args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
                        return this.dataService.updateEntityDatas(args);
                    }
                    else {
                        return rxjs.throwError("creationRuleExecutorResult is empty!");
                    }
                }
                else {
                    return rxjs.throwError("conditionExecutionResult is false!");
                }
            };
        /**
         * 推送任务中心
         * @param res 生单流程执行结果
         * @returns formUpdateResult 更新实体数据返回结果 @type { Observable<FormUpdateResult> }
         */
        /**
         * 推送任务中心
         * @param {?} res 生单流程执行结果
         * @return {?} formUpdateResult 更新实体数据返回结果 \@type { Observable<FormUpdateResult> }
         */
        BifManualCreationDataWebCmpService.prototype.pushTaskCenter = /**
         * 推送任务中心
         * @param {?} res 生单流程执行结果
         * @return {?} formUpdateResult 更新实体数据返回结果 \@type { Observable<FormUpdateResult> }
         */
            function (res) {
                /** @type {?} */
                var args = new PushTaskArgs();
                //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                if (res.conditionResult.conditionExecutionResult == true) {
                    //生单结果不为空
                    if (res.creationRuleExecutorResult && res.creationRuleExecutorResult.mappingResults && res.creationRuleExecutorResult.mappingResults.length > 0) {
                        if (res.pushCreationMode == commonApi$1.PushCreationMode.TASKCENTER) {
                            args.suCode = res.downBillSuCode;
                            args.creationRuleExecutorResult = res.creationRuleExecutorResult;
                            return this.dataService.pushTaskCenter(args);
                        }
                        else {
                            return rxjs.throwError("creationRuleExecutorResult can't be pushed to task center!");
                        }
                    }
                    else {
                        return rxjs.throwError("creationRuleExecutorResult is empty!");
                    }
                }
                else {
                    return rxjs.throwError("conditionExecutionResult is false!");
                }
            };
        /**
         * 查询生单结果
         * @param creationResultId 生单结果id
         */
        /**
         * 查询生单结果
         * @param {?} creationResultId 生单结果id
         * @return {?}
         */
        BifManualCreationDataWebCmpService.prototype.getCreationResultById = /**
         * 查询生单结果
         * @param {?} creationResultId 生单结果id
         * @return {?}
         */
            function (creationResultId) {
                return this.dataService.getCreationResultById(creationResultId);
            };
        /**
         * 暂存生单结果
         */
        /**
         * 暂存生单结果
         * @param {?} creationResult
         * @return {?}
         */
        BifManualCreationDataWebCmpService.prototype.addFormBillCreationProcessExecutorResult = /**
         * 暂存生单结果
         * @param {?} creationResult
         * @return {?}
         */
            function (creationResult) {
                if (creationResult == null) {
                    this.messagerService.error(this.localePipe.transform("creationResultCantBeEmpty"));
                    throw "参数creationResult不可为空";
                }
                if (typeof creationResult == "string") {
                    if (creationResult == "") {
                        this.messagerService.error(this.localePipe.transform("creationResultCantBeEmpty"));
                        throw "参数creationResult不可为空";
                    }
                    /** @type {?} */
                    var temp = new runtimeApi.FormBillCreationProcessExecutorResult();
                    temp.LoadFromJson(creationResult);
                    creationResult = temp;
                }
                if ((creationResult instanceof runtimeApi.FormBillCreationProcessExecutorResult) == false) {
                    /** @type {?} */
                    var res = new runtimeApi.FormBillCreationProcessExecutorResult();
                    res.LoadFromJsonObject(creationResult);
                    creationResult = res;
                }
                return this.dataService.addFormBillCreationProcessExecutorResult(creationResult);
            };
        /**
         * 获取VO序列化数据
         */
        /**
         * 获取VO序列化数据
         * @param args
         * @returns
         */
        /**
           * 获取VO序列化数据
           */
        /**
         * 获取VO序列化数据
         * @param {?} dataId
         * @param {?} voId
         * @param {?} suCode
         * @return {?}
         */
        BifManualCreationDataWebCmpService.prototype.getEntityDatas = /**
           * 获取VO序列化数据
           */
            /**
             * 获取VO序列化数据
             * @param {?} dataId
             * @param {?} voId
             * @param {?} suCode
             * @return {?}
             */
            function (dataId, voId, suCode) {
                if (dataId == null) {
                    this.messagerService.error(this.localePipe.transform("dataIdCantBeEmpty"));
                    throw "参数dataId不可为空";
                }
                if (voId == null) {
                    this.messagerService.error(this.localePipe.transform("voIdCantBeEmpty"));
                    throw "参数voId不可为空";
                }
                if (suCode == null) {
                    this.messagerService.error(this.localePipe.transform("suCodeCantBeEmpty"));
                    throw "参数suCode不可为空";
                }
                /** @type {?} */
                var args = new GetEntityDatasArgs();
                args.dataId = dataId;
                args.suCode = suCode;
                args.voId = voId;
                return this.dataService.getEntityDatas(args);
            };
        BifManualCreationDataWebCmpService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifManualCreationDataWebCmpService.ctorParameters = function () {
            return [
                { type: BifDataService },
                { type: devkit.BindingData },
                { type: uiMessager.MessagerService },
                { type: devkit.ViewModel, decorators: [{ type: core$1.Optional }] },
                { type: devkit.FrameContext, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifManualCreationDataWebCmpService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-manual-creation-source.webcmp.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 手工生单来源端服务类
     */
    var BifManualCreationSourceWebCmpService = /** @class */ (function () {
        function BifManualCreationSourceWebCmpService(sourceUiService, dataService, bindingData, messagerService, viewModel, frameContext) {
            this.sourceUiService = sourceUiService;
            this.dataService = dataService;
            this.bindingData = bindingData;
            this.messagerService = messagerService;
            this.viewModel = viewModel;
            this.frameContext = frameContext;
            this.localePipe = new LocalePipe(this.sourceUiService && this.sourceUiService.localeId || 'zh-CHS');
        }
        /**
         * 下推，根据来源VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param sourceVoId 单据流来源视图对象 Id
         * @param entities 参与生单的上游单据ID列表或实体列表
         * @param targetCommand 目标单据'单据流加载'命令的编号
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 弹窗配置
         * @param customSelectorModuleUrl 自定义选择器url
         * @param extParams1 打开生单流程选择器弹窗扩展参数
         * @param extParams2 打开目标单据制单界面扩展参数
         */
        /**
         * 下推，根据来源VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} customSelectorModuleUrl 自定义选择器url
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开目标单据制单界面扩展参数
         * @return {?}
         */
        BifManualCreationSourceWebCmpService.prototype.pushBySourceVoId = /**
         * 下推，根据来源VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} customSelectorModuleUrl 自定义选择器url
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开目标单据制单界面扩展参数
         * @return {?}
         */
            function (sourceVoId, entities, targetCommand, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1, extParams2) {
                var _this = this;
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                // 参数为空时尝试从根组件BindingData上取id，获取后仍为空则报错
                if (entities == null || (( /** @type {?} */(entities))) == "") {
                    try {
                        entities = this.frameContext.root.bindingData.getObject().id;
                    }
                    catch (e) {
                    }
                    if (entities == null || (( /** @type {?} */(entities))) == "") {
                        this.messagerService.error(this.localePipe.transform("entitiesCantBeEmpty"));
                        throw "参数entities不可为空";
                    }
                }
                if (entities instanceof Map) {
                    entities = Array.from(entities.values());
                }
                entities = Array.isArray(entities) ? entities : [entities];
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
                extParams2 = extParams2 === "" || extParams2 == null ? undefined : extParams2;
                var _a = EntityParamUtils.buildSourceVoEntityData(entities), sourceVoEntityDatas = _a.sourceVoEntityDatas, sourceVoEntityDataIds = _a.sourceVoEntityDataIds;
                //打开生单流程选择器
                this.sourceUiService.openBillCreationProcessSelector4Push(sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1).subscribe(( /**
                 * @param {?} cp
                 * @return {?}
                 */function (cp) {
                    //查询表单配置
                    _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                     * @param {?} formSettings
                     * @return {?}
                     */function (formSettings) {
                        //创建执行生单流程参数对象
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = sourceVoEntityDatas;
                        args.sourceVoEntityDataIds = sourceVoEntityDataIds;
                        //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                        args.targetVoDataIds = [];
                        args.manualCreationMode = ManualCreationMode.Push;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                         * @param {?} result
                         * @return {?}
                         */function (result) {
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    if (result.pushCreationMode == null || result.pushCreationMode == commonApi$1.PushCreationMode.CREATION) {
                                        _this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe(( /**
                                         * @param {?} res
                                         * @return {?}
                                         */function (res) {
                                            //打开目标单据制单界面
                                            _this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, __assign({ action: targetCommand }, extParams2));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                        }));
                                    }
                                    else if (result.pushCreationMode == commonApi$1.PushCreationMode.TASKCENTER) {
                                        //推送任务中心
                                        /** @type {?} */
                                        var pushTaskArgs = new PushTaskArgs();
                                        pushTaskArgs.suCode = result.downBillSuCode;
                                        pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                        _this.dataService.pushTaskCenter(pushTaskArgs).subscribe(( /**
                                         * @return {?}
                                         */function () {
                                            _this.messagerService.success(_this.localePipe.transform("pushTaskCenterSuccess"));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || _this.localePipe.transform("pushTaskCenterFailed"));
                                        }));
                                    }
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * 特定下推，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param sourceVoId 单据流来源视图对象 Id
         * @param targetVoId 单据流目标视图对象 Id
         * @param entities 参与生单的上游单据ID列表或实体列表
         * @param targetCommand 目标单据'单据流加载'命令的编号
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 弹窗配置
         * @param customSelectorModuleUrl 自定义选择器url
         * @param extParams1 打开生单流程选择器弹窗扩展参数
         * @param extParams2 打开目标单据制单界面扩展参数
         */
        /**
         * 特定下推，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} customSelectorModuleUrl 自定义选择器url
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开目标单据制单界面扩展参数
         * @return {?}
         */
        BifManualCreationSourceWebCmpService.prototype.pushBySourceVoIdAndTargetVoId = /**
         * 特定下推，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 弹窗配置
         * @param {?=} customSelectorModuleUrl 自定义选择器url
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开目标单据制单界面扩展参数
         * @return {?}
         */
            function (sourceVoId, targetVoId, entities, targetCommand, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1, extParams2) {
                var _this = this;
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                if (entities == null || (( /** @type {?} */(entities))) == "") {
                    this.messagerService.error(this.localePipe.transform("entitiesCantBeEmpty"));
                    throw "参数entities不可为空";
                }
                if (entities instanceof Map) {
                    entities = Array.from(entities.values());
                }
                entities = Array.isArray(entities) ? entities : [entities];
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
                extParams2 = extParams2 === "" || extParams2 == null ? undefined : extParams2;
                var _a = EntityParamUtils.buildSourceVoEntityData(entities), sourceVoEntityDatas = _a.sourceVoEntityDatas, sourceVoEntityDataIds = _a.sourceVoEntityDataIds;
                //打开生单流程选择器
                this.sourceUiService.openBillCreationProcessSelector4SpecificPush(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams1).subscribe(( /**
                 * @param {?} cp
                 * @return {?}
                 */function (cp) {
                    //查询表单配置
                    _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                     * @param {?} formSettings
                     * @return {?}
                     */function (formSettings) {
                        //创建执行生单流程参数对象
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = sourceVoEntityDatas;
                        args.sourceVoEntityDataIds = sourceVoEntityDataIds;
                        //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                        args.targetVoDataIds = [];
                        args.manualCreationMode = ManualCreationMode.SpecificPush;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                         * @param {?} result
                         * @return {?}
                         */function (result) {
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    if (result.pushCreationMode == null || result.pushCreationMode == commonApi$1.PushCreationMode.CREATION) {
                                        _this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe(( /**
                                         * @param {?} res
                                         * @return {?}
                                         */function (res) {
                                            //打开目标单据制单界面
                                            _this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, __assign({ action: targetCommand }, extParams2));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                        }));
                                    }
                                    else if (result.pushCreationMode == commonApi$1.PushCreationMode.TASKCENTER) {
                                        //推送任务中心
                                        /** @type {?} */
                                        var pushTaskArgs = new PushTaskArgs();
                                        pushTaskArgs.suCode = result.downBillSuCode;
                                        pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                        _this.dataService.pushTaskCenter(pushTaskArgs).subscribe(( /**
                                         * @return {?}
                                         */function () {
                                            _this.messagerService.success(_this.localePipe.transform("pushTaskCenterSuccess"));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || _this.localePipe.transform("pushTaskCenterFailed"));
                                        }));
                                    }
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * 特定下推，根据生单流程ID执行选中的生单流程
         *
         * @param processId 单据流生单流程 Id
         * @param entities 参与生单的上游单据ID列表或实体列表
         * @param targetCommand 目标单据'单据流加载'命令的编号
         * @param extParams 打开目标单据制单界面扩展参数
         */
        /**
         * 特定下推，根据生单流程ID执行选中的生单流程
         *
         * @param {?} processId 单据流生单流程 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} extParams 打开目标单据制单界面扩展参数
         * @return {?}
         */
        BifManualCreationSourceWebCmpService.prototype.pushByCreationProcessId = /**
         * 特定下推，根据生单流程ID执行选中的生单流程
         *
         * @param {?} processId 单据流生单流程 Id
         * @param {?} entities 参与生单的上游单据ID列表或实体列表
         * @param {?=} targetCommand 目标单据'单据流加载'命令的编号
         * @param {?=} extParams 打开目标单据制单界面扩展参数
         * @return {?}
         */
            function (processId, entities, targetCommand, extParams) {
                var _this = this;
                if (processId == null || processId == "" || processId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("processIdCantBeEmpty"));
                    throw "参数processId不可为空";
                }
                if (entities == null || (( /** @type {?} */(entities))) == "") {
                    this.messagerService.error(this.localePipe.transform("entitiesCantBeEmpty"));
                    throw "参数entities不可为空";
                }
                if (entities instanceof Map) {
                    entities = Array.from(entities.values());
                }
                entities = Array.isArray(entities) ? entities : [entities];
                extParams = extParams === "" || extParams == null ? undefined : extParams;
                var _a = EntityParamUtils.buildSourceVoEntityData(entities), sourceVoEntityDatas = _a.sourceVoEntityDatas, sourceVoEntityDataIds = _a.sourceVoEntityDataIds;
                //查找生单流程
                this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe(( /**
                 * @param {?} cp
                 * @return {?}
                 */function (cp) {
                    //查询表单配置
                    _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                     * @param {?} formSettings
                     * @return {?}
                     */function (formSettings) {
                        //创建执行生单流程参数对象
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        //FormCreationRuleExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        args.sourceVoEntityDatas = sourceVoEntityDatas;
                        args.sourceVoEntityDataIds = sourceVoEntityDataIds;
                        //下推过程中不存在目标主表单据Id，所以targetVoDataIds为空列表。
                        args.targetVoDataIds = [];
                        args.manualCreationMode = ManualCreationMode.SpecificPush;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                         * @param {?} result
                         * @return {?}
                         */function (result) {
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    if (result.pushCreationMode == null || result.pushCreationMode == commonApi$1.PushCreationMode.CREATION) {
                                        _this.dataService.addFormBillCreationProcessExecutorResult(result).subscribe(( /**
                                         * @param {?} res
                                         * @return {?}
                                         */function (res) {
                                            //打开目标单据制单界面
                                            _this.sourceUiService.openTargetApp(formSettings, result.conditionResult, res, __assign({ action: targetCommand }, extParams));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                        }));
                                    }
                                    else if (result.pushCreationMode == commonApi$1.PushCreationMode.TASKCENTER) {
                                        //推送任务中心
                                        /** @type {?} */
                                        var pushTaskArgs = new PushTaskArgs();
                                        pushTaskArgs.suCode = result.downBillSuCode;
                                        pushTaskArgs.creationRuleExecutorResult = result.creationRuleExecutorResult;
                                        _this.dataService.pushTaskCenter(pushTaskArgs).subscribe(( /**
                                         * @return {?}
                                         */function () {
                                            _this.messagerService.success(_this.localePipe.transform("pushTaskCenterSuccess"));
                                        }), ( /**
                                         * @param {?} err
                                         * @return {?}
                                         */function (err) {
                                            _this.messagerService.error((err.error == null ? err.message : (err.error.innerMessage || err.error.Message || err.error.message || err.message)) || _this.localePipe.transform("pushTaskCenterFailed"));
                                        }));
                                    }
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * 根据来源VO Id打开生单流程选择器选择生单流程
         * @param sourceVoId 来源VO Id
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 模态框配置
         * @param customSelectorModuleUrl 自定义选择器Url
         * @param extParams 扩展参数
         * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        /**
         * 根据来源VO Id打开生单流程选择器选择生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        BifManualCreationSourceWebCmpService.prototype.openBillCreationProcessSelector4Push = /**
         * 根据来源VO Id打开生单流程选择器选择生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
            function (sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams = extParams === "" || extParams == null ? undefined : extParams;
                return this.sourceUiService.openBillCreationProcessSelector4Push(sourceVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器选择生单流程
         * @param sourceVoId 来源VO Id
         * @param targetVoId 目标VO Id
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 模态框配置
         * @param customSelectorModuleUrl 自定义选择器Url
         * @param extParams 扩展参数
         * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器选择生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        BifManualCreationSourceWebCmpService.prototype.openBillCreationProcessSelector4SpecificPush = /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器选择生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
            function (sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams = extParams === "" || extParams == null ? undefined : extParams;
                //打开生单流程选择器
                return this.sourceUiService.openBillCreationProcessSelector4SpecificPush(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * @Deprecated 已弃用，请使用 {@link openTargetApp }
         * 打开目标单据制单界面
         * @param formSettings 表单配置
         * @param result 生单流程执行结果
         * @param targetCommand 目标表单命令
         * @param extParams 扩展参数
         */
        /**
         * \@Deprecated 已弃用，请使用 {\@link openTargetApp }
         * 打开目标单据制单界面
         * @param {?} formSettings 表单配置
         * @param {?} result 生单流程执行结果
         * @param {?=} targetCommand 目标表单命令
         * @param {?=} extParams 扩展参数
         * @return {?}
         */
        BifManualCreationSourceWebCmpService.prototype.openTargetForm = /**
         * \@Deprecated 已弃用，请使用 {\@link openTargetApp }
         * 打开目标单据制单界面
         * @param {?} formSettings 表单配置
         * @param {?} result 生单流程执行结果
         * @param {?=} targetCommand 目标表单命令
         * @param {?=} extParams 扩展参数
         * @return {?}
         */
            function (formSettings, result, targetCommand, extParams) {
                this.sourceUiService.openTargetForm(formSettings, result, __assign({ action: targetCommand }, extParams));
            };
        /**
         * 打开目标单据制单界面
         * @param formSettings 表单配置
         * @param conditionResult 执行条件计算结果
         * @param targetCommand 目标表单命令
         * @param extParams 扩展参数
         */
        /**
         * 打开目标单据制单界面
         * @param {?} formSettings 表单配置
         * @param {?} conditionResult 执行条件计算结果
         * @param {?} textIdWithDataIds
         * @param {?=} targetCommand 目标表单命令
         * @param {?=} extParams 扩展参数
         * @return {?}
         */
        BifManualCreationSourceWebCmpService.prototype.openTargetApp = /**
         * 打开目标单据制单界面
         * @param {?} formSettings 表单配置
         * @param {?} conditionResult 执行条件计算结果
         * @param {?} textIdWithDataIds
         * @param {?=} targetCommand 目标表单命令
         * @param {?=} extParams 扩展参数
         * @return {?}
         */
            function (formSettings, conditionResult, textIdWithDataIds, targetCommand, extParams) {
                this.sourceUiService.openTargetApp(formSettings, conditionResult, textIdWithDataIds, __assign({ action: targetCommand }, extParams));
            };
        BifManualCreationSourceWebCmpService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifManualCreationSourceWebCmpService.ctorParameters = function () {
            return [
                { type: BifSourceUiService },
                { type: BifDataService },
                { type: devkit.BindingData },
                { type: uiMessager.MessagerService },
                { type: devkit.ViewModel, decorators: [{ type: core$1.Optional }] },
                { type: devkit.FrameContext, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifManualCreationSourceWebCmpService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-manual-creation-target.webcmp.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 手工生单目标端服务类
     */
    var BifManualCreationTargetWebCmpService = /** @class */ (function () {
        function BifManualCreationTargetWebCmpService(dataService, targetUiService, stateMachineService, bindingData, messagerService, cardDataService, viewModel, frameContext) {
            this.dataService = dataService;
            this.targetUiService = targetUiService;
            this.stateMachineService = stateMachineService;
            this.bindingData = bindingData;
            this.messagerService = messagerService;
            this.cardDataService = cardDataService;
            this.viewModel = viewModel;
            this.frameContext = frameContext;
            this.localePipe = new LocalePipe(this.targetUiService && this.targetUiService.localeId || 'zh-CHS');
        }
        /**
         * 加载单据流生单流程执行后数据
         * @param formVoId 表单绑定视图对象 Id
         */
        /**
         * 加载单据流生单流程执行后数据
         * @param {?} formVoId 表单绑定视图对象 Id
         * @return {?}
         */
        BifManualCreationTargetWebCmpService.prototype.bifLoad = /**
         * 加载单据流生单流程执行后数据
         * @param {?} formVoId 表单绑定视图对象 Id
         * @return {?}
         */
            function (formVoId) {
                var _this = this;
                /** @type {?} */
                var args = new runtimeApi.FormCreateArgs();
                args.formVoId = formVoId;
                //获取生单流程执行结果
                this.targetUiService.getCreationResult().subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
                    //创建实体数据
                    _this.dataService.createEntityDatas(args).subscribe(( /**
                     * @param {?} result
                     * @return {?}
                     */function (result) {
                        //切换状态机至 “新增”
                        _this.stateMachineService.transit("Create");
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }));
            };
        /**
         * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param targetVoId 单据流目标视图对象 Id
         * @param targetDataIds 目标单据主表Id列表
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions1 生单流程选择器模态框配置
         * @param customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param modalOptions2 来源单据选择器模态框配置
         * @param extParams1 打开生单流程选择器弹窗扩展参数
         * @param extParams2 打开来源单据选择器扩展参数
         */
        /**
         * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions1 生单流程选择器模态框配置
         * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param {?=} modalOptions2 来源单据选择器模态框配置
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开来源单据选择器扩展参数
         * @return {?}
         */
        BifManualCreationTargetWebCmpService.prototype.referByTargetVoId = /**
         * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions1 生单流程选择器模态框配置
         * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param {?=} modalOptions2 来源单据选择器模态框配置
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开来源单据选择器扩展参数
         * @return {?}
         */
            function (targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
                var _this = this;
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                targetDataIds = ( /** @type {?} */(targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
                modalOptions1 = ( /** @type {?} */(modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                modalOptions2 = ( /** @type {?} */(modalOptions2)) === "" || modalOptions2 == null ? {
                    title: this.localePipe.transform("selectUpstreamBill"),
                    width: 1100,
                    height: 550,
                } : modalOptions2;
                extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
                extParams2 = ( /** @type {?} */(extParams2)) === "" || extParams2 == null ? undefined : extParams2;
                //更新表单现有变更集
                this.cardDataService.update().subscribe(( /**
                 * @return {?}
                 */function () {
                    //打开生单流程选择器
                    _this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe(( /**
                     * @param {?} cp
                     * @return {?}
                     */function (cp) {
                        //获取表单配置
                        _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                         * @param {?} formSettings
                         * @return {?}
                         */function (formSettings) {
                            //打开来源单据选择器模态框
                            _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe(( /**
                             * @param {?} entities
                             * @return {?}
                             */function (entities) {
                                //构造生单流程执行参数实体
                                /** @type {?} */
                                var args = new FormBillCreationProcessExecutorArgs();
                                args.billCreationProcessId = cp.id;
                                args.creationRuleId = cp.creationRuleId;
                                // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                                // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                                // args.sourceVoEntityDatas = entities.map(item => {
                                //   if (item instanceof Entity) {
                                //     // 如果是Entity
                                //     return JSON.stringify((item as any).toJSON(false, true));
                                //   } else if (item["__type__"] == "BindingObject") {
                                //     //如果来自BindingData
                                //     const bindingObject = item as BindingObject;
                                //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                                //   } else {
                                //     const e = item as Entity;
                                //     return JSON.stringify((e as any).toJSON(false, true));
                                //   }
                                // });
                                args.sourceVoEntityDatas = null;
                                // 默认使用ID列表
                                args.sourceVoEntityDataIds = entities.map(( /**
                                 * @param {?} it
                                 * @return {?}
                                 */function (it) { return it.id || it.primaryValue; }));
                                args.targetVoDataIds = targetDataIds;
                                args.manualCreationMode = ManualCreationMode.Pull;
                                //执行生单流程
                                _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                                 * @param {?} result
                                 * @return {?}
                                 */function (result) {
                                    /** @type {?} */
                                    var args = new runtimeApi.FormUpdateArgs();
                                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                                    if (result.conditionResult.conditionExecutionResult == true) {
                                        //生单结果不为空
                                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                            args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                            //更新表单数据
                                            _this.dataService.updateEntityDatas(args).subscribe(( /**
                                             * @param {?} res
                                             * @return {?}
                                             */function (res) {
                                                //重新加载表单数据
                                                _this.cardDataService.load(targetDataIds[0]).subscribe();
                                            }), ( /**
                                             * @param {?} err
                                             * @return {?}
                                             */function (err) {
                                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                            }));
                                        }
                                        else {
                                            _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                        }
                                    }
                                    else {
                                        //为false时可得到配置的错误提示信息
                                        _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                                    }
                                }), ( /**
                                 * @param {?} err
                                 * @return {?}
                                 */function (err) {
                                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                }));
                            }), ( /**
                             * @param {?} err
                             * @return {?}
                             */function (err) {
                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                            }));
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param sourceVoId 单据流来源视图对象 Id
         * @param targetVoId 单据流目标视图对象 Id
         * @param targetDataIds 目标单据主表Id列表
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions1 生单流程选择器模态框配置
         * @param customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param modalOptions2 来源单据选择器模态框配置
         * @param extParams1 打开生单流程选择器弹窗扩展参数
         * @param extParams2 打开来源单据选择器扩展参数
         */
        /**
         * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions1 生单流程选择器模态框配置
         * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param {?=} modalOptions2 来源单据选择器模态框配置
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开来源单据选择器扩展参数
         * @return {?}
         */
        BifManualCreationTargetWebCmpService.prototype.referBySourceVoIdAndTargetVoId = /**
         * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
         *
         * @param {?} sourceVoId 单据流来源视图对象 Id
         * @param {?} targetVoId 单据流目标视图对象 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions1 生单流程选择器模态框配置
         * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
         * @param {?=} modalOptions2 来源单据选择器模态框配置
         * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
         * @param {?=} extParams2 打开来源单据选择器扩展参数
         * @return {?}
         */
            function (sourceVoId, targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
                var _this = this;
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                targetDataIds = ( /** @type {?} */(targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
                modalOptions1 = ( /** @type {?} */(modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                modalOptions2 = ( /** @type {?} */(modalOptions2)) === "" || modalOptions2 == null ? {
                    title: this.localePipe.transform("selectUpstreamBill"),
                    width: 1100,
                    height: 550,
                } : modalOptions2;
                extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
                extParams2 = ( /** @type {?} */(extParams2)) === "" || extParams2 == null ? undefined : extParams2;
                //更新表单现有变更集
                this.cardDataService.update().subscribe(( /**
                 * @return {?}
                 */function () {
                    //打开生单流程选择器
                    _this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe(( /**
                     * @param {?} cp
                     * @return {?}
                     */function (cp) {
                        //获取表单配置
                        _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                         * @param {?} formSettings
                         * @return {?}
                         */function (formSettings) {
                            //打开来源单据选择器模态框
                            _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe(( /**
                             * @param {?} entities
                             * @return {?}
                             */function (entities) {
                                //构造生单流程执行参数实体
                                /** @type {?} */
                                var args = new FormBillCreationProcessExecutorArgs();
                                args.billCreationProcessId = cp.id;
                                args.creationRuleId = cp.creationRuleId;
                                // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                                // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                                // args.sourceVoEntityDatas = entities.map(item => {
                                //   if (item instanceof Entity) {
                                //     // 如果是Entity
                                //     return JSON.stringify((item as any).toJSON(false, true));
                                //   } else if (item["__type__"] == "BindingObject") {
                                //     //如果来自BindingData
                                //     const bindingObject = item as BindingObject;
                                //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                                //   } else {
                                //     const e = item as Entity;
                                //     return JSON.stringify((e as any).toJSON(false, true));
                                //   }
                                // });
                                args.sourceVoEntityDatas = null;
                                // 默认使用ID列表
                                args.sourceVoEntityDataIds = entities.map(( /**
                                 * @param {?} it
                                 * @return {?}
                                 */function (it) { return it.id || it.primaryValue; }));
                                args.targetVoDataIds = targetDataIds;
                                args.manualCreationMode = ManualCreationMode.SpecificPull;
                                //执行生单流程
                                _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                                 * @param {?} result
                                 * @return {?}
                                 */function (result) {
                                    /** @type {?} */
                                    var args = new runtimeApi.FormUpdateArgs();
                                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                                    if (result.conditionResult.conditionExecutionResult == true) {
                                        //生单结果不为空
                                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                            args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                            //更新表单数据
                                            _this.dataService.updateEntityDatas(args).subscribe(( /**
                                             * @param {?} res
                                             * @return {?}
                                             */function (res) {
                                                //重新加载表单数据
                                                _this.cardDataService.load(targetDataIds[0]).subscribe();
                                            }), ( /**
                                             * @param {?} err
                                             * @return {?}
                                             */function (err) {
                                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                            }));
                                        }
                                        else {
                                            _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                        }
                                    }
                                    else {
                                        //为false时可得到配置的错误提示信息
                                        _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                                    }
                                }), ( /**
                                 * @param {?} err
                                 * @return {?}
                                 */function (err) {
                                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                }));
                            }), ( /**
                             * @param {?} err
                             * @return {?}
                             */function (err) {
                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                            }));
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * 特定参照，根据生单流程ID执行选中的生单流程
         *
         * @param processId 单据流生单流程 Id
         * @param targetDataIds 目标单据主表Id列表
         * @param modalOptions 来源单据选择器模态框配置
         * @param extParams 打开来源单据选择器扩展参数
         */
        /**
         * 特定参照，根据生单流程ID执行选中的生单流程
         *
         * @param {?} processId 单据流生单流程 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} modalOptions 来源单据选择器模态框配置
         * @param {?=} extParams 打开来源单据选择器扩展参数
         * @return {?}
         */
        BifManualCreationTargetWebCmpService.prototype.referByCreationProcessId = /**
         * 特定参照，根据生单流程ID执行选中的生单流程
         *
         * @param {?} processId 单据流生单流程 Id
         * @param {?=} targetDataIds 目标单据主表Id列表
         * @param {?=} modalOptions 来源单据选择器模态框配置
         * @param {?=} extParams 打开来源单据选择器扩展参数
         * @return {?}
         */
            function (processId, targetDataIds, modalOptions, extParams) {
                var _this = this;
                if (processId == null || processId == "" || processId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("processIdCantBeEmpty"));
                    throw "参数processId不可为空";
                }
                targetDataIds = ( /** @type {?} */(targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? {
                    title: this.localePipe.transform("selectUpstreamBill"),
                    width: 1100,
                    height: 550,
                } : modalOptions;
                extParams = ( /** @type {?} */(extParams)) === "" || extParams == null ? undefined : extParams;
                //更新表单现有变更集
                this.cardDataService.update().subscribe(( /**
                 * @return {?}
                 */function () {
                    //打开生单流程选择器
                    _this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe(( /**
                     * @param {?} cp
                     * @return {?}
                     */function (cp) {
                        //获取表单配置
                        _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe(( /**
                         * @param {?} formSettings
                         * @return {?}
                         */function (formSettings) {
                            //打开来源单据选择器模态框
                            _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams).subscribe(( /**
                             * @param {?} entities
                             * @return {?}
                             */function (entities) {
                                //构造生单流程执行参数实体
                                /** @type {?} */
                                var args = new FormBillCreationProcessExecutorArgs();
                                args.billCreationProcessId = cp.id;
                                args.creationRuleId = cp.creationRuleId;
                                // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                                // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                                // args.sourceVoEntityDatas = entities.map(item => {
                                //   if (item instanceof Entity) {
                                //     // 如果是Entity
                                //     return JSON.stringify((item as any).toJSON(false, true));
                                //   } else if (item["__type__"] == "BindingObject") {
                                //     //如果来自BindingData
                                //     const bindingObject = item as BindingObject;
                                //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                                //   } else {
                                //     const e = item as Entity;
                                //     return JSON.stringify((e as any).toJSON(false, true));
                                //   }
                                // });
                                args.sourceVoEntityDatas = null;
                                // 默认使用ID列表
                                args.sourceVoEntityDataIds = entities.map(( /**
                                 * @param {?} it
                                 * @return {?}
                                 */function (it) { return it.id || it.primaryValue; }));
                                args.targetVoDataIds = targetDataIds;
                                args.manualCreationMode = ManualCreationMode.SpecificPull;
                                //执行生单流程
                                _this.dataService.executeBillCreationProcess(args).subscribe(( /**
                                 * @param {?} result
                                 * @return {?}
                                 */function (result) {
                                    /** @type {?} */
                                    var args = new runtimeApi.FormUpdateArgs();
                                    //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                                    if (result.conditionResult.conditionExecutionResult == true) {
                                        //生单结果不为空
                                        if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                            args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                            //更新表单数据
                                            _this.dataService.updateEntityDatas(args).subscribe(( /**
                                             * @param {?} res
                                             * @return {?}
                                             */function (res) {
                                                //重新加载表单数据
                                                _this.cardDataService.load(targetDataIds[0]).subscribe();
                                            }), ( /**
                                             * @param {?} err
                                             * @return {?}
                                             */function (err) {
                                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                            }));
                                        }
                                        else {
                                            _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                        }
                                    }
                                    else {
                                        //为false时可得到配置的错误提示信息
                                        _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                                    }
                                }), ( /**
                                 * @param {?} err
                                 * @return {?}
                                 */function (err) {
                                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                }));
                            }), ( /**
                             * @param {?} err
                             * @return {?}
                             */function (err) {
                                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                            }));
                        }), ( /**
                         * @param {?} err
                         * @return {?}
                         */function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), ( /**
                     * @param {?} err
                     * @return {?}
                     */function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), ( /**
                 * @param {?} err
                 * @return {?}
                 */function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            };
        /**
         * @Deprecated 已弃用，请使用 {@link getCreationResult }
         * 获取来源界面传入的生单流程执行结果
         * @returns creationResult 生单流程执行结果 @type { FormBillCreationProcessExecutorResult }
         */
        /**
         * \@Deprecated 已弃用，请使用 {\@link getCreationResult }
         * 获取来源界面传入的生单流程执行结果
         * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
         */
        BifManualCreationTargetWebCmpService.prototype.getFormBillCreationProcessExecutorResult = /**
         * \@Deprecated 已弃用，请使用 {\@link getCreationResult }
         * 获取来源界面传入的生单流程执行结果
         * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
         */
            function () {
                return this.targetUiService.getFormBillCreationProcessExecutorResult();
            };
        /**
         * 根据目标VO Id打开生单流程选择器查找生单流程
         * @param targetVoId 目标VO Id
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 模态框配置
         * @param customSelectorModuleUrl 自定义选择器Url
         * @param extParams 扩展参数
         * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        /**
         * 根据目标VO Id打开生单流程选择器查找生单流程
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        BifManualCreationTargetWebCmpService.prototype.openBillCreationProcessSelector4Pull = /**
         * 根据目标VO Id打开生单流程选择器查找生单流程
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
            function (targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams = extParams === "" || extParams == null ? undefined : extParams;
                //打开生单流程选择器
                return this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
         * @param sourceVoId 来源VO Id
         * @param targetVoId 目标VO Id
         * @param bizFlowchartId 业务场景图Id
         * @param modalOptions 模态框配置
         * @param customSelectorModuleUrl 自定义选择器Url
         * @param extParams 扩展参数
         * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
        BifManualCreationTargetWebCmpService.prototype.openBillCreationProcessSelector4SpecificPull = /**
         * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
         * @param {?} sourceVoId 来源VO Id
         * @param {?} targetVoId 目标VO Id
         * @param {?=} bizFlowchartId 业务场景图Id
         * @param {?=} modalOptions 模态框配置
         * @param {?=} customSelectorModuleUrl 自定义选择器Url
         * @param {?=} extParams 扩展参数
         * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
         */
            function (sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
                if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
                    throw "参数sourceVoId不可为空";
                }
                if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
                    this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
                    throw "参数targetVoId不可为空";
                }
                bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
                customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
                extParams = ( /** @type {?} */(extParams)) === "" || extParams == null ? undefined : extParams;
                return this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
            };
        /**
         * 打开来源单据选择器选择数据
         * @param formSettings 表单配置
         * @param modalOptions 模态框配置
         * @param extParams 扩展参数
         * @returns entities 数据列表 @type { Observable<Entity[]> }
         */
        /**
         * 打开来源单据选择器选择数据
         * @param {?} formSettings 表单配置
         * @param {?=} modalOptions 模态框配置
         * @param {?=} extParams 扩展参数
         * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
         */
        BifManualCreationTargetWebCmpService.prototype.openSourceDataSelector4Pull = /**
         * 打开来源单据选择器选择数据
         * @param {?} formSettings 表单配置
         * @param {?=} modalOptions 模态框配置
         * @param {?=} extParams 扩展参数
         * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
         */
            function (formSettings, modalOptions, extParams) {
                modalOptions = ( /** @type {?} */(modalOptions)) === "" || modalOptions == null ? {
                    title: this.localePipe.transform("selectUpstreamBill"),
                    width: 1100,
                    height: 550,
                } : modalOptions;
                extParams = ( /** @type {?} */(extParams)) === "" || extParams == null ? undefined : extParams;
                //打开来源单据选择器模态框
                return this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams);
            };
        /**
         * 获取传到根组件UIState上的生单规则执行器结果
         * @returns creationResult 生单流程执行结果 @type { FormBillCreationProcessExecutorResult }
         */
        /**
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
         */
        BifManualCreationTargetWebCmpService.prototype.getCreationResult = /**
         * 获取传到根组件UIState上的生单规则执行器结果
         * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
         */
            function () {
                return this.targetUiService.getCreationResult();
            };
        BifManualCreationTargetWebCmpService.decorators = [
            { type: core$1.Injectable }
        ];
        /** @nocollapse */
        BifManualCreationTargetWebCmpService.ctorParameters = function () {
            return [
                { type: BifDataService },
                { type: BifTargetUiService },
                { type: commandServices.StateMachineService },
                { type: devkit.BindingData },
                { type: uiMessager.MessagerService },
                { type: commandServices.CardDataService },
                { type: devkit.ViewModel, decorators: [{ type: core$1.Optional }] },
                { type: devkit.FrameContext, decorators: [{ type: core$1.Optional }] }
            ];
        };
        return BifManualCreationTargetWebCmpService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/providers.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * 因为BifDataService,BifSourceUiService,BifTargetUiService所依赖的\@farris/devkit相关
     * 服务类如FrameContext、BindingData、Repository等均在RootComponent上提供，因此直接在模
     * 块上注册BIF_MANUAL_CREATION_PROVIDERS也无法获取到上述服务类，因此
     * BIF_MANUAL_CREATION_PROVIDERS只能在RootComponent上注册。
     * @type {?}
     */
    var BIF_MANUAL_CREATION_PROVIDERS = [
        BifDataService,
        BifSourceUiService,
        BifTargetUiService,
        { provide: AbstractBifDataSelectorService, useClass: DefaultBifDataSelectorService },
        BifManualCreationDataWebCmpService,
        BifManualCreationSourceWebCmpService,
        BifManualCreationTargetWebCmpService,
    ];
    /**
     * 同理，如果后续BIF_BILL_TRACKER_PROVIDERS中服务类需要使用\@farris/devkit时，也只能在
     * root-component上注册
     * @type {?}
     */
    var BIF_BILL_TRACKER_PROVIDERS = [
        BillTrackerUiService,
        BifBillTrackerWebCmpService,
    ];
    /** @type {?} */
    var BIF_DEVKIT_PROVIDERS = __spread(BIF_MANUAL_CREATION_PROVIDERS, BIF_BILL_TRACKER_PROVIDERS);

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-bill-tracker-webcmp.module.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BifBillTrackerWebCmpModule = /** @class */ (function () {
        function BifBillTrackerWebCmpModule() {
        }
        /**
         * @return {?}
         */
        BifBillTrackerWebCmpModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: BifBillTrackerWebCmpModule,
                    providers: [
                    // ...BIF_BILL_TRACKER_PROVIDERS,
                    ]
                };
            };
        BifBillTrackerWebCmpModule.decorators = [
            { type: core$1.NgModule, args: [{
                        providers: __spread(BIF_BILL_TRACKER_PROVIDERS),
                    },] }
        ];
        return BifBillTrackerWebCmpModule;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/webcmp/bif-manual-creation-webcmp.module.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BifManualCreationWebCmpModule = /** @class */ (function () {
        function BifManualCreationWebCmpModule() {
        }
        /**
         * @return {?}
         */
        BifManualCreationWebCmpModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: BifManualCreationWebCmpModule,
                    providers: [
                    // ...BIF_MANUAL_CREATION_PROVIDERS,
                    ]
                };
            };
        BifManualCreationWebCmpModule.decorators = [
            { type: core$1.NgModule, args: [{
                        providers: __spread(BIF_MANUAL_CREATION_PROVIDERS),
                    },] }
        ];
        return BifManualCreationWebCmpModule;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: public-api.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: edp-bif-runtime-api.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.FormBillCreationProcessExecutorResult = runtimeApi.FormBillCreationProcessExecutorResult;
    exports.FormCreationRuleExecutorArgs = runtimeApi.FormCreationRuleExecutorArgs;
    exports.FormCreateArgs = runtimeApi.FormCreateArgs;
    exports.FormCreateResult = runtimeApi.FormCreateResult;
    exports.FormUpdateArgs = runtimeApi.FormUpdateArgs;
    exports.FormUpdateResult = runtimeApi.FormUpdateResult;
    exports.RpcCreationRuleExecutorResult = runtimeApi.RpcCreationRuleExecutorResult;
    exports.RpcCreationMappingResult = runtimeApi.RpcCreationMappingResult;
    exports.MappingAssociation = runtimeApi.MappingAssociation;
    exports.RpcMappingResult = runtimeApi.RpcMappingResult;
    exports.BifDataService = BifDataService;
    exports.AbstractBifDataSelectorService = AbstractBifDataSelectorService;
    exports.DefaultBifDataSelectorService = DefaultBifDataSelectorService;
    exports.BifSourceUiService = BifSourceUiService;
    exports.BifTargetUiService = BifTargetUiService;
    exports.PushSelectorComponent = PushSelectorComponent;
    exports.PullSelectorComponent = PullSelectorComponent;
    exports.BifManualCreationModule = BifManualCreationModule;
    exports.BillTrackerArgs = BillTrackerArgs;
    exports.BillTrackerUiService = BillTrackerUiService;
    exports.BillTrackerComponent = BillTrackerComponent;
    exports.BillTrackerModule = BillTrackerModule;
    exports.BifBillTrackerWebCmpService = BifBillTrackerWebCmpService;
    exports.BifManualCreationDataWebCmpService = BifManualCreationDataWebCmpService;
    exports.BifManualCreationSourceWebCmpService = BifManualCreationSourceWebCmpService;
    exports.BifManualCreationTargetWebCmpService = BifManualCreationTargetWebCmpService;
    exports.BifBillTrackerWebCmpModule = BifBillTrackerWebCmpModule;
    exports.BifManualCreationWebCmpModule = BifManualCreationWebCmpModule;
    exports.mxDefaultKeyHandler = mxDefaultKeyHandlerType;
    exports.mxDefaultPopupMenu = mxDefaultPopupMenuType;
    exports.mxDefaultToolbar = mxDefaultToolbarType;
    exports.mxEditor = mxEditorType;
    exports.mxCellHighlight = mxCellHighlightType;
    exports.mxCellMarker = mxCellMarkerType;
    exports.mxCellTracker = mxCellTrackerType;
    exports.mxConnectionHandler = mxConnectionHandlerType;
    exports.mxConstraintHandler = mxConstraintHandlerType;
    exports.mxEdgeHandler = mxEdgeHandlerType;
    exports.mxEdgeSegmentHandler = mxEdgeSegmentHandlerType;
    exports.mxElbowEdgeHandler = mxElbowEdgeHandlerType;
    exports.mxGraphHandler = mxGraphHandlerType;
    exports.mxHandle = mxHandleType;
    exports.mxKeyHandler = mxKeyHandlerType;
    exports.mxPanningHandler = mxPanningHandlerType;
    exports.mxPopupMenuHandler = mxPopupMenuHandlerType;
    exports.mxRubberband = mxRubberbandType;
    exports.mxSelectionCellsHandler = mxSelectionCellsHandlerType;
    exports.mxTooltipHandler = mxTooltipHandlerType;
    exports.mxVertexHandler = mxVertexHandlerType;
    exports.mxCellCodec = mxCellCodecType;
    exports.mxChildChangeCodec = mxChildChangeCodecType;
    exports.mxDefaultKeyHandlerCodec = mxDefaultKeyHandlerCodecType;
    exports.mxDefaultPopupMenuCodec = mxDefaultPopupMenuCodecType;
    exports.mxDefaultToolbarCodec = mxDefaultToolbarCodecType;
    exports.mxEditorCodec = mxEditorCodecType;
    exports.mxGenericChangeCodec = mxGenericChangeCodecType;
    exports.mxGraphCodec = mxGraphCodecType;
    exports.mxGraphViewCodec = mxGraphViewCodecType;
    exports.mxModelCodec = mxModelCodecType;
    exports.mxObjectCodec = mxObjectCodecType;
    exports.mxRootChangeCodec = mxRootChangeCodecType;
    exports.mxStylesheetCodec = mxStylesheetCodecType;
    exports.mxTerminalChangeCodec = mxTerminalChangeCodecType;
    exports.mxCircleLayout = mxCircleLayoutType;
    exports.mxCompactTreeLayout = mxCompactTreeLayoutType;
    exports.mxCompositeLayout = mxCompositeLayoutType;
    exports.mxEdgeLabelLayout = mxEdgeLabelLayoutType;
    exports.mxFastOrganicLayout = mxFastOrganicLayoutType;
    exports.mxGraphLayout = mxGraphLayoutType;
    exports.mxParallelEdgeLayout = mxParallelEdgeLayoutType;
    exports.mxPartitionLayout = mxPartitionLayoutType;
    exports.mxRadialTreeLayout = mxRadialTreeLayoutType;
    exports.mxStackLayout = mxStackLayoutType;
    exports.mxHierarchicalLayout = mxHierarchicalLayoutType;
    exports.mxSwimlaneLayout = mxSwimlaneLayoutType;
    exports.mxGraphAbstractHierarchyCell = mxGraphAbstractHierarchyCellType;
    exports.mxGraphHierarchyEdge = mxGraphHierarchyEdgeType;
    exports.mxGraphHierarchyModel = mxGraphHierarchyModelType;
    exports.mxGraphHierarchyNode = mxGraphHierarchyNodeType;
    exports.mxSwimlaneModel = mxSwimlaneModelType;
    exports.mxCoordinateAssignment = mxCoordinateAssignmentType;
    exports.mxHierarchicalLayoutStage = mxHierarchicalLayoutStageType;
    exports.mxMedianHybridCrossingReduction = mxMedianHybridCrossingReductionType;
    exports.mxMinimumCycleRemover = mxMinimumCycleRemoverType;
    exports.mxSwimlaneOrdering = mxSwimlaneOrderingType;
    exports.mxCell = mxCellType;
    exports.mxCellPath = mxCellPathType;
    exports.mxGeometry = mxGeometryType;
    exports.mxGraphModel = mxGraphModelType;
    exports.renderingHint = renderingHintType;
    exports.mxActor = mxActorType;
    exports.mxArrow = mxArrowType;
    exports.mxArrowConnector = mxArrowConnectorType;
    exports.mxCloud = mxCloudType;
    exports.mxConnector = mxConnectorType;
    exports.mxCylinder = mxCylinderType;
    exports.mxDoubleEllipse = mxDoubleEllipseType;
    exports.mxEllipse = mxEllipseType;
    exports.mxHexagon = mxHexagonType;
    exports.mxImageShape = mxImageShapeType;
    exports.mxLabel = mxLabelType;
    exports.mxLine = mxLineType;
    exports.mxMarker = mxMarkerType;
    exports.mxPolyline = mxPolylineType;
    exports.mxRectangleShape = mxRectangleShapeType;
    exports.mxRhombus = mxRhombusType;
    exports.mxShape = mxShapeType;
    exports.mxStencil = mxStencilType;
    exports.mxStencilRegistry = mxStencilRegistryType;
    exports.mxSwimlane = mxSwimlaneType;
    exports.mxText = mxTextType;
    exports.mxTriangle = mxTriangleType;
    exports.mxAbstractCanvas2D = mxAbstractCanvas2DType;
    exports.mxAnimation = mxAnimationType;
    exports.mxAutoSaveManager = mxAutoSaveManagerType;
    exports.mxClipboard = mxClipboardType;
    exports.mxConstants = mxConstantsType;
    exports.mxDictionary = mxDictionaryType;
    exports.mxDivResizer = mxDivResizerType;
    exports.mxDragSource = mxDragSourceType;
    exports.mxEffects = mxEffectsType;
    exports.mxEvent = mxEventType;
    exports.mxEventObject = mxEventObjectType;
    exports.mxEventSource = mxEventSourceType;
    exports.mxForm = mxFormType;
    exports.mxGuide = mxGuideType;
    exports.mxImage = mxImageType;
    exports.mxImageBundle = mxImageBundleType;
    exports.mxImageExport = mxImageExportType;
    exports.mxLog = mxLogType;
    exports.mxMorphing = mxMorphingType;
    exports.mxMouseEvent = mxMouseEventType;
    exports.mxObjectIdentity = mxObjectIdentityType;
    exports.mxPanningManager = mxPanningManagerType;
    exports.mxPoint = mxPointType;
    exports.mxPopupMenu = mxPopupMenuType;
    exports.mxRectangle = mxRectangleType;
    exports.mxResources = mxResourcesType;
    exports.mxSvgCanvas2D = mxSvgCanvas2DType;
    exports.mxToolbar = mxToolbarType;
    exports.mxUndoableEdit = mxUndoableEditType;
    exports.mxUndoManager = mxUndoManagerType;
    exports.mxUrlConverter = mxUrlConverterType;
    exports.mxUtils = mxUtilsType;
    exports.mxVmlCanvas2D = mxVmlCanvas2DType;
    exports.mxWindow = mxWindowType;
    exports.mxXmlCanvas2D = mxXmlCanvas2DType;
    exports.mxXmlRequest = mxXmlRequestType;
    exports.mxCellEditor = mxCellEditorType;
    exports.mxCellOverlay = mxCellOverlayType;
    exports.mxCellRenderer = mxCellRendererType;
    exports.mxCellState = mxCellStateType;
    exports.mxCellStatePreview = mxCellStatePreviewType;
    exports.mxConnectionConstraint = mxConnectionConstraintType;
    exports.mxEdgeStyle = mxEdgeStyleType;
    exports.mxGraph = mxGraphType;
    exports.mxGraphSelectionModel = mxGraphSelectionModelType;
    exports.mxGraphView = mxGraphViewType;
    exports.mxLayoutManager = mxLayoutManagerType;
    exports.mxMultiplicity = mxMultiplicityType;
    exports.mxOutline = mxOutlineType;
    exports.mxPerimeter = mxPerimeterType;
    exports.mxPrintPreview = mxPrintPreviewType;
    exports.mxStyleRegistry = mxStyleRegistryType;
    exports.mxStylesheet = mxStylesheetType;
    exports.mxSwimlaneManager = mxSwimlaneManagerType;
    exports.mxTemporaryCellStates = mxTemporaryCellStatesType;
    exports.mxClient = mxClientType;
    exports.mxgraph = mxgraph;
    exports.BillData = BillData;
    exports.FormBillCreationProcessExecutorArgs = FormBillCreationProcessExecutorArgs;
    exports.FormGetBillCreationProcessEntityExArgs = FormGetBillCreationProcessEntityExArgs;
    exports.FormGetBillCreationProcessEntityExResult = FormGetBillCreationProcessEntityExResult;
    exports.ManualCreationMode = ManualCreationMode;
    exports.GeneralTextIdWithDataId = GeneralTextIdWithDataId;
    exports.BillDataInfo = BillDataInfo;
    exports.BillInfo = BillInfo;
    exports.CanTrackingInfo = CanTrackingInfo;
    exports.DownBillInfo = DownBillInfo;
    exports.GetBillsInfoArgs = GetBillsInfoArgs;
    exports.GetDownBillsInfoArgs = GetDownBillsInfoArgs;
    exports.GetUpBillsInfoArgs = GetUpBillsInfoArgs;
    exports.TrackingHelper = TrackingHelper;
    exports.TrackingMappingAssociation = TrackingMappingAssociation;
    exports.UpBillInfo = UpBillInfo;
    exports.BillChildInfo = BillChildInfo;
    exports.BillDetailInfo = BillDetailInfo;
    exports.BillItemInfo = BillItemInfo;
    exports.FieldsWithOrder = FieldsWithOrder;
    exports.SummaryFieldsInfo = SummaryFieldsInfo;
    exports.FieldNameAndValue = FieldNameAndValue;
    exports.DateTypeFormatInfo = DateTypeFormatInfo;
    exports.DecimalTypeFormatInfo = DecimalTypeFormatInfo;
    exports.TypeToFormat = TypeToFormat$1;
    exports.ScaleMode = ScaleMode;
    exports.ExpressionJointQueryParameterContent = ExpressionJointQueryParameterContent;
    exports.FieldJointQueryParameterContent = FieldJointQueryParameterContent;
    exports.JointQueryParameterContent = JointQueryParameterContent;
    exports.JointQueryParameterMode = JointQueryParameterMode;
    exports.JointQueryParameterResult = JointQueryParameterResult;
    exports.JointQueryParametersContent = JointQueryParametersContent;
    exports.SimpleValueMappingInfo = SimpleValueMappingInfo;
    exports.StringDisplayMode = StringDisplayMode;
    exports.StringTypeFormatInfo = StringTypeFormatInfo;
    exports.Exceptions = Exceptions;
    exports.BIF_UISTATE_KEY_CREATION_RESULT = BIF_UISTATE_KEY_CREATION_RESULT;
    exports.BIF_UISTATE_KEY_OPEN_TYPE = BIF_UISTATE_KEY_OPEN_TYPE;
    exports.ModuleConfig = ModuleConfig;
    exports.SELECTOR_ARGS_INJECTOR = SELECTOR_ARGS_INJECTOR;
    exports.DEFAULT_SELECTOR_ARGS = DEFAULT_SELECTOR_ARGS;
    exports.PushTaskArgs = PushTaskArgs;
    exports.GetEntityDatasArgs = GetEntityDatasArgs;
    exports.CanTrackingResult = CanTrackingResult;
    exports.GetChildrenEntityDataArgs = GetChildrenEntityDataArgs;
    exports.DownBillInfoResult = DownBillInfoResult;
    exports.EntityDataResult = EntityDataResult;
    exports.GetEntityDataArgs = GetEntityDataArgs;
    exports.GetMainEntityDataArgs = GetMainEntityDataArgs;
    exports.UpBillInfoResult = UpBillInfoResult;
    exports.GetJointQueryParametersArgs = GetJointQueryParametersArgs;
    exports.BillTrackerConstant = BillTrackerConstant;
    exports.BillTrackerModuleConfig = BillTrackerModuleConfig;
    exports.BillTrackerDirection = BillTrackerDirection;
    exports.BillTrackerGraphOptions = BillTrackerGraphOptions;
    exports.BillTrackerGridOptions = BillTrackerGridOptions;
    exports.Graph = Graph;
    exports.GraphView = GraphView;
    exports.BillNodeShape = BillNodeShape;
    exports.BillAssociationLine = BillAssociationLine;
    exports.CompactTreeLayout = CompactTreeLayout;
    exports.RevertCompactTreeLayout = RevertCompactTreeLayout;
    exports.VertexHandler = VertexHandler;
    exports.Events = Events;
    exports.BillCell = BillCell;
    exports.CellOverlay = CellOverlay;
    exports.CellOverlayState = CellOverlayState;
    exports.Outline = Outline;
    exports.Styles = Styles;
    exports.BIF_MANUAL_CREATION_PROVIDERS = BIF_MANUAL_CREATION_PROVIDERS;
    exports.BIF_BILL_TRACKER_PROVIDERS = BIF_BILL_TRACKER_PROVIDERS;
    exports.BIF_DEVKIT_PROVIDERS = BIF_DEVKIT_PROVIDERS;
    exports.ɵe = ModuleConfig;
    exports.ɵd = SELECTOR_ARGS_INJECTOR;
    exports.ɵa = LocalePipe;
    exports.ɵb = AbstractUiService;
    exports.ɵl = BasicInfoComponent;
    exports.ɵi = BasicTableComponent;
    exports.ɵj = ChildRowTableDirective;
    exports.ɵh = BillTrackerDataComponent;
    exports.ɵg = BillTrackerGraphComponent;
    exports.ɵo = ChildInfoListComponent;
    exports.ɵn = ChildInfoComponent;
    exports.ɵq = BillTrackerModuleConfig;
    exports.ɵp = BillTrackerFieldLabelPipe;
    exports.ɵk = BillTrackerLocalePipe;
    exports.ɵm = BillTrackerDataInfoService;
    exports.ɵf = BillTrackerDataService;
    exports.ɵr = BillTrackerInternalUiService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=edp-bif-runtime-api.umd.js.map