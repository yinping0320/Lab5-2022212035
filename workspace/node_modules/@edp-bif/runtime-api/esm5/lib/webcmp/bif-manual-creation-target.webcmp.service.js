/**
 * @fileoverview added by tsickle
 * Generated from: lib/webcmp/bif-manual-creation-target.webcmp.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Optional } from '@angular/core';
import { MessagerService } from '@farris/ui-messager';
import { BindingData, ViewModel, FrameContext } from '@farris/devkit';
import { StateMachineService, CardDataService } from '@farris/command-services';
import { FormCreateArgs, FormUpdateArgs } from '../ref';
import { BifTargetUiService } from '../bif-manual-creation/service/bif-target-ui.service';
import { BifDataService } from '../bif-manual-creation/service/bif-data.service';
import { FormBillCreationProcessExecutorArgs } from '../entity/form-rest/FormBillCreationProcessExecutorArgs';
import { LocalePipe } from '../bif-manual-creation/pipe/locale.pipe';
import { ManualCreationMode } from '../entity/form-rest/ManualCreationMode';
/**
 * 手工生单目标端服务类
 */
var BifManualCreationTargetWebCmpService = /** @class */ (function () {
    function BifManualCreationTargetWebCmpService(dataService, targetUiService, stateMachineService, bindingData, messagerService, cardDataService, viewModel, frameContext) {
        this.dataService = dataService;
        this.targetUiService = targetUiService;
        this.stateMachineService = stateMachineService;
        this.bindingData = bindingData;
        this.messagerService = messagerService;
        this.cardDataService = cardDataService;
        this.viewModel = viewModel;
        this.frameContext = frameContext;
        this.localePipe = new LocalePipe(this.targetUiService && this.targetUiService.localeId || 'zh-CHS');
    }
    /**
     * 加载单据流生单流程执行后数据
     * @param formVoId 表单绑定视图对象 Id
     */
    /**
     * 加载单据流生单流程执行后数据
     * @param {?} formVoId 表单绑定视图对象 Id
     * @return {?}
     */
    BifManualCreationTargetWebCmpService.prototype.bifLoad = /**
     * 加载单据流生单流程执行后数据
     * @param {?} formVoId 表单绑定视图对象 Id
     * @return {?}
     */
    function (formVoId) {
        var _this = this;
        /** @type {?} */
        var args = new FormCreateArgs();
        args.formVoId = formVoId;
        //获取生单流程执行结果
        this.targetUiService.getCreationResult().subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            args.rpcCreationRuleExecutorResult = res.creationRuleExecutorResult.ConvertToJson();
            //创建实体数据
            _this.dataService.createEntityDatas(args).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                //切换状态机至 “新增”
                _this.stateMachineService.transit("Create");
            }), (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            }));
        }));
    };
    /**
     * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param targetVoId 单据流目标视图对象 Id
     * @param targetDataIds 目标单据主表Id列表
     * @param bizFlowchartId 业务场景图Id
     * @param modalOptions1 生单流程选择器模态框配置
     * @param customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param modalOptions2 来源单据选择器模态框配置
     * @param extParams1 打开生单流程选择器弹窗扩展参数
     * @param extParams2 打开来源单据选择器扩展参数
     */
    /**
     * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    BifManualCreationTargetWebCmpService.prototype.referByTargetVoId = /**
     * 参照，根据目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    function (targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        var _this = this;
        if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
            throw "参数targetVoId不可为空";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        function () {
            //打开生单流程选择器
            _this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            function (cp) {
                //获取表单配置
                _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                function (formSettings) {
                    //打开来源单据选择器模态框
                    _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    function (entities) {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        // args.sourceVoEntityDatas = entities.map(item => {
                        //   if (item instanceof Entity) {
                        //     // 如果是Entity
                        //     return JSON.stringify((item as any).toJSON(false, true));
                        //   } else if (item["__type__"] == "BindingObject") {
                        //     //如果来自BindingData
                        //     const bindingObject = item as BindingObject;
                        //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                        //   } else {
                        //     const e = item as Entity;
                        //     return JSON.stringify((e as any).toJSON(false, true));
                        //   }
                        // });
                        args.sourceVoEntityDatas = null;
                        // 默认使用ID列表
                        args.sourceVoEntityDataIds = entities.map((/**
                         * @param {?} it
                         * @return {?}
                         */
                        function (it) { return it.id || it.primaryValue; }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.Pull;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        function (result) {
                            /** @type {?} */
                            var args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    _this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    function (res) {
                                        //重新加载表单数据
                                        _this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    function (err) {
                                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), (/**
                         * @param {?} err
                         * @return {?}
                         */
                        function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), (/**
                     * @param {?} err
                     * @return {?}
                     */
                    function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }), (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    };
    /**
     * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param sourceVoId 单据流来源视图对象 Id
     * @param targetVoId 单据流目标视图对象 Id
     * @param targetDataIds 目标单据主表Id列表
     * @param bizFlowchartId 业务场景图Id
     * @param modalOptions1 生单流程选择器模态框配置
     * @param customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param modalOptions2 来源单据选择器模态框配置
     * @param extParams1 打开生单流程选择器弹窗扩展参数
     * @param extParams2 打开来源单据选择器扩展参数
     */
    /**
     * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    BifManualCreationTargetWebCmpService.prototype.referBySourceVoIdAndTargetVoId = /**
     * 特定参照，根据来源VO Id和目标VO Id打开生单流程选择器并执行选中的生单流程
     *
     * @param {?} sourceVoId 单据流来源视图对象 Id
     * @param {?} targetVoId 单据流目标视图对象 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions1 生单流程选择器模态框配置
     * @param {?=} customSelectorModuleUrl 生单流程选择器自定义选择器url
     * @param {?=} modalOptions2 来源单据选择器模态框配置
     * @param {?=} extParams1 打开生单流程选择器弹窗扩展参数
     * @param {?=} extParams2 打开来源单据选择器扩展参数
     * @return {?}
     */
    function (sourceVoId, targetVoId, targetDataIds, bizFlowchartId, modalOptions1, customSelectorModuleUrl, modalOptions2, extParams1, extParams2) {
        var _this = this;
        if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
            throw "参数sourceVoId不可为空";
        }
        if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
            throw "参数targetVoId不可为空";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions1 = (/** @type {?} */ (modalOptions1)) === "" || modalOptions1 == null ? undefined : modalOptions1;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        modalOptions2 = (/** @type {?} */ (modalOptions2)) === "" || modalOptions2 == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions2;
        extParams1 = extParams1 === "" || extParams1 == null ? undefined : extParams1;
        extParams2 = (/** @type {?} */ (extParams2)) === "" || extParams2 == null ? undefined : extParams2;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        function () {
            //打开生单流程选择器
            _this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions1, customSelectorModuleUrl, extParams1).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            function (cp) {
                //获取表单配置
                _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                function (formSettings) {
                    //打开来源单据选择器模态框
                    _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions2, extParams2).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    function (entities) {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        // args.sourceVoEntityDatas = entities.map(item => {
                        //   if (item instanceof Entity) {
                        //     // 如果是Entity
                        //     return JSON.stringify((item as any).toJSON(false, true));
                        //   } else if (item["__type__"] == "BindingObject") {
                        //     //如果来自BindingData
                        //     const bindingObject = item as BindingObject;
                        //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                        //   } else {
                        //     const e = item as Entity;
                        //     return JSON.stringify((e as any).toJSON(false, true));
                        //   }
                        // });
                        args.sourceVoEntityDatas = null;
                        // 默认使用ID列表
                        args.sourceVoEntityDataIds = entities.map((/**
                         * @param {?} it
                         * @return {?}
                         */
                        function (it) { return it.id || it.primaryValue; }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.SpecificPull;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        function (result) {
                            /** @type {?} */
                            var args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    _this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    function (res) {
                                        //重新加载表单数据
                                        _this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    function (err) {
                                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), (/**
                         * @param {?} err
                         * @return {?}
                         */
                        function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), (/**
                     * @param {?} err
                     * @return {?}
                     */
                    function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }), (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    };
    /**
     * 特定参照，根据生单流程ID执行选中的生单流程
     *
     * @param processId 单据流生单流程 Id
     * @param targetDataIds 目标单据主表Id列表
     * @param modalOptions 来源单据选择器模态框配置
     * @param extParams 打开来源单据选择器扩展参数
     */
    /**
     * 特定参照，根据生单流程ID执行选中的生单流程
     *
     * @param {?} processId 单据流生单流程 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} modalOptions 来源单据选择器模态框配置
     * @param {?=} extParams 打开来源单据选择器扩展参数
     * @return {?}
     */
    BifManualCreationTargetWebCmpService.prototype.referByCreationProcessId = /**
     * 特定参照，根据生单流程ID执行选中的生单流程
     *
     * @param {?} processId 单据流生单流程 Id
     * @param {?=} targetDataIds 目标单据主表Id列表
     * @param {?=} modalOptions 来源单据选择器模态框配置
     * @param {?=} extParams 打开来源单据选择器扩展参数
     * @return {?}
     */
    function (processId, targetDataIds, modalOptions, extParams) {
        var _this = this;
        if (processId == null || processId == "" || processId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("processIdCantBeEmpty"));
            throw "参数processId不可为空";
        }
        targetDataIds = (/** @type {?} */ (targetDataIds)) === "" || targetDataIds == null ? [this.bindingData.getObject().id] : targetDataIds;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //更新表单现有变更集
        this.cardDataService.update().subscribe((/**
         * @return {?}
         */
        function () {
            //打开生单流程选择器
            _this.dataService.getSlimBillCreationProcessEntityExById(processId).subscribe((/**
             * @param {?} cp
             * @return {?}
             */
            function (cp) {
                //获取表单配置
                _this.dataService.getFormSettingsById(cp.formSettingsId).subscribe((/**
                 * @param {?} formSettings
                 * @return {?}
                 */
                function (formSettings) {
                    //打开来源单据选择器模态框
                    _this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams).subscribe((/**
                     * @param {?} entities
                     * @return {?}
                     */
                    function (entities) {
                        //构造生单流程执行参数实体
                        /** @type {?} */
                        var args = new FormBillCreationProcessExecutorArgs();
                        args.billCreationProcessId = cp.id;
                        args.creationRuleId = cp.creationRuleId;
                        // //FormBillCreationProcessExecutorArgs的sourceVoEntityDatas属性为前端实体序列化后的字符串列表
                        // //sourceVoEntityDatas列表中的每个字符串，在结构上应与单据流定义中所选中的上游视图对象一致。
                        // args.sourceVoEntityDatas = entities.map(item => {
                        //   if (item instanceof Entity) {
                        //     // 如果是Entity
                        //     return JSON.stringify((item as any).toJSON(false, true));
                        //   } else if (item["__type__"] == "BindingObject") {
                        //     //如果来自BindingData
                        //     const bindingObject = item as BindingObject;
                        //     return JSON.stringify(bindingObject.toJSON({ useFullMultiLangProperty: true }));
                        //   } else {
                        //     const e = item as Entity;
                        //     return JSON.stringify((e as any).toJSON(false, true));
                        //   }
                        // });
                        args.sourceVoEntityDatas = null;
                        // 默认使用ID列表
                        args.sourceVoEntityDataIds = entities.map((/**
                         * @param {?} it
                         * @return {?}
                         */
                        function (it) { return it.id || it.primaryValue; }));
                        args.targetVoDataIds = targetDataIds;
                        args.manualCreationMode = ManualCreationMode.SpecificPull;
                        //执行生单流程
                        _this.dataService.executeBillCreationProcess(args).subscribe((/**
                         * @param {?} result
                         * @return {?}
                         */
                        function (result) {
                            /** @type {?} */
                            var args = new FormUpdateArgs();
                            //Mapping执行条件判断结果为true时才会执行生单流程得到生单结果
                            if (result.conditionResult.conditionExecutionResult == true) {
                                //生单结果不为空
                                if (result.creationRuleExecutorResult && result.creationRuleExecutorResult.mappingResults && result.creationRuleExecutorResult.mappingResults.length > 0) {
                                    args.rpcCreationRuleExecutorResult = result.creationRuleExecutorResult.ConvertToJson();
                                    //更新表单数据
                                    _this.dataService.updateEntityDatas(args).subscribe((/**
                                     * @param {?} res
                                     * @return {?}
                                     */
                                    function (res) {
                                        //重新加载表单数据
                                        _this.cardDataService.load(targetDataIds[0]).subscribe();
                                    }), (/**
                                     * @param {?} err
                                     * @return {?}
                                     */
                                    function (err) {
                                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                                    }));
                                }
                                else {
                                    _this.messagerService.error(_this.localePipe.transform("creationResultEmpty"));
                                }
                            }
                            else {
                                //为false时可得到配置的错误提示信息
                                _this.messagerService.error(result.conditionResult.message || _this.localePipe.transform("creationExecutionError"));
                            }
                        }), (/**
                         * @param {?} err
                         * @return {?}
                         */
                        function (err) {
                            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                        }));
                    }), (/**
                     * @param {?} err
                     * @return {?}
                     */
                    function (err) {
                        _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                    }));
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                function (err) {
                    _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }));
            }), (/**
             * @param {?} err
             * @return {?}
             */
            function (err) {
                _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            }));
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            _this.messagerService.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
        }));
    };
    /**
     * @Deprecated 已弃用，请使用 {@link getCreationResult }
     * 获取来源界面传入的生单流程执行结果
     * @returns creationResult 生单流程执行结果 @type { FormBillCreationProcessExecutorResult }
     */
    /**
     * \@Deprecated 已弃用，请使用 {\@link getCreationResult }
     * 获取来源界面传入的生单流程执行结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    BifManualCreationTargetWebCmpService.prototype.getFormBillCreationProcessExecutorResult = /**
     * \@Deprecated 已弃用，请使用 {\@link getCreationResult }
     * 获取来源界面传入的生单流程执行结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    function () {
        return this.targetUiService.getFormBillCreationProcessExecutorResult();
    };
    /**
     * 根据目标VO Id打开生单流程选择器查找生单流程
     * @param targetVoId 目标VO Id
     * @param bizFlowchartId 业务场景图Id
     * @param modalOptions 模态框配置
     * @param customSelectorModuleUrl 自定义选择器Url
     * @param extParams 扩展参数
     * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    /**
     * 根据目标VO Id打开生单流程选择器查找生单流程
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    BifManualCreationTargetWebCmpService.prototype.openBillCreationProcessSelector4Pull = /**
     * 根据目标VO Id打开生单流程选择器查找生单流程
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    function (targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
            throw "参数targetVoId不可为空";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = extParams === "" || extParams == null ? undefined : extParams;
        //打开生单流程选择器
        return this.targetUiService.openBillCreationProcessSelector4Pull(targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    };
    /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
     * @param sourceVoId 来源VO Id
     * @param targetVoId 目标VO Id
     * @param bizFlowchartId 业务场景图Id
     * @param modalOptions 模态框配置
     * @param customSelectorModuleUrl 自定义选择器Url
     * @param extParams 扩展参数
     * @returns creationProcess 生单流程 @type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    BifManualCreationTargetWebCmpService.prototype.openBillCreationProcessSelector4SpecificPull = /**
     * 根据来源VO Id和目标VO Id打开生单流程选择器查找生单流程
     * @param {?} sourceVoId 来源VO Id
     * @param {?} targetVoId 目标VO Id
     * @param {?=} bizFlowchartId 业务场景图Id
     * @param {?=} modalOptions 模态框配置
     * @param {?=} customSelectorModuleUrl 自定义选择器Url
     * @param {?=} extParams 扩展参数
     * @return {?} creationProcess 生单流程 \@type { Observable<IRtSlimBillCreationProcessEntityEx> }
     */
    function (sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams) {
        if (sourceVoId == null || sourceVoId == "" || sourceVoId.trim && sourceVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("sourceVoIdCantBeEmpty"));
            throw "参数sourceVoId不可为空";
        }
        if (targetVoId == null || targetVoId == "" || targetVoId.trim && targetVoId.trim() == "") {
            this.messagerService.error(this.localePipe.transform("targetVoIdVoIdCantBeEmpty"));
            throw "参数targetVoId不可为空";
        }
        bizFlowchartId = bizFlowchartId === "" || bizFlowchartId == null ? undefined : bizFlowchartId;
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? undefined : modalOptions;
        customSelectorModuleUrl = customSelectorModuleUrl === "" || customSelectorModuleUrl == null ? undefined : customSelectorModuleUrl;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        return this.targetUiService.openBillCreationProcessSelector4SpecificPull(sourceVoId, targetVoId, bizFlowchartId, modalOptions, customSelectorModuleUrl, extParams);
    };
    /**
     * 打开来源单据选择器选择数据
     * @param formSettings 表单配置
     * @param modalOptions 模态框配置
     * @param extParams 扩展参数
     * @returns entities 数据列表 @type { Observable<Entity[]> }
     */
    /**
     * 打开来源单据选择器选择数据
     * @param {?} formSettings 表单配置
     * @param {?=} modalOptions 模态框配置
     * @param {?=} extParams 扩展参数
     * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
     */
    BifManualCreationTargetWebCmpService.prototype.openSourceDataSelector4Pull = /**
     * 打开来源单据选择器选择数据
     * @param {?} formSettings 表单配置
     * @param {?=} modalOptions 模态框配置
     * @param {?=} extParams 扩展参数
     * @return {?} entities 数据列表 \@type { Observable<Entity[]> }
     */
    function (formSettings, modalOptions, extParams) {
        modalOptions = (/** @type {?} */ (modalOptions)) === "" || modalOptions == null ? {
            title: this.localePipe.transform("selectUpstreamBill"),
            width: 1100,
            height: 550,
        } : modalOptions;
        extParams = (/** @type {?} */ (extParams)) === "" || extParams == null ? undefined : extParams;
        //打开来源单据选择器模态框
        return this.targetUiService.openSourceDataSelector4Pull(formSettings, modalOptions, extParams);
    };
    /**
     * 获取传到根组件UIState上的生单规则执行器结果
     * @returns creationResult 生单流程执行结果 @type { FormBillCreationProcessExecutorResult }
     */
    /**
     * 获取传到根组件UIState上的生单规则执行器结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    BifManualCreationTargetWebCmpService.prototype.getCreationResult = /**
     * 获取传到根组件UIState上的生单规则执行器结果
     * @return {?} creationResult 生单流程执行结果 \@type { FormBillCreationProcessExecutorResult }
     */
    function () {
        return this.targetUiService.getCreationResult();
    };
    BifManualCreationTargetWebCmpService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    BifManualCreationTargetWebCmpService.ctorParameters = function () { return [
        { type: BifDataService },
        { type: BifTargetUiService },
        { type: StateMachineService },
        { type: BindingData },
        { type: MessagerService },
        { type: CardDataService },
        { type: ViewModel, decorators: [{ type: Optional }] },
        { type: FrameContext, decorators: [{ type: Optional }] }
    ]; };
    return BifManualCreationTargetWebCmpService;
}());
export { BifManualCreationTargetWebCmpService };
if (false) {
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.localePipe;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.dataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.targetUiService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.stateMachineService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.bindingData;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.messagerService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.cardDataService;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.viewModel;
    /** @type {?} */
    BifManualCreationTargetWebCmpService.prototype.frameContext;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi93ZWJjbXAvYmlmLW1hbnVhbC1jcmVhdGlvbi10YXJnZXQud2ViY21wLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLFdBQVcsRUFBVSxTQUFTLEVBQUUsWUFBWSxFQUFpQixNQUFNLGdCQUFnQixDQUFDO0FBQzdGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUloRixPQUFPLEVBQUUsY0FBYyxFQUFvQixjQUFjLEVBQW9CLE1BQU0sUUFBUSxDQUFDO0FBQzVGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQzFGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUNqRixPQUFPLEVBQUUsbUNBQW1DLEVBQUUsTUFBTSx5REFBeUQsQ0FBQztBQUc5RyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDckUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7Ozs7QUFLNUU7SUFHRSw4Q0FDUyxXQUEyQixFQUMzQixlQUFtQyxFQUNuQyxtQkFBd0MsRUFDeEMsV0FBd0IsRUFDeEIsZUFBZ0MsRUFDaEMsZUFBZ0MsRUFDcEIsU0FBb0IsRUFDcEIsWUFBMEI7UUFQdEMsZ0JBQVcsR0FBWCxXQUFXLENBQWdCO1FBQzNCLG9CQUFlLEdBQWYsZUFBZSxDQUFvQjtRQUNuQyx3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBQ3hDLGdC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QUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDbEQsQ0FBQzs7Z0JBeGRGLFVBQVU7Ozs7Z0JBVkYsY0FBYztnQkFEZCxrQkFBa0I7Z0JBTGxCLG1CQUFtQjtnQkFEbkIsV0FBVztnQkFGWCxlQUFlO2dCQUdNLGVBQWU7Z0JBRGYsU0FBUyx1QkEyQmxDLFFBQVE7Z0JBM0I0QixZQUFZLHVCQTRCaEQsUUFBUTs7SUE4Y2IsMkNBQUM7Q0FBQSxBQXpkRCxJQXlkQztTQXhkWSxvQ0FBb0M7OztJQUMvQywwREFBOEI7O0lBRTVCLDJEQUFrQzs7SUFDbEMsK0RBQTBDOztJQUMxQyxtRUFBK0M7O0lBQy9DLDJEQUErQjs7SUFDL0IsK0RBQXVDOztJQUN2QywrREFBdUM7O0lBQ3ZDLHlEQUF1Qzs7SUFDdkMsNERBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBNb2RhbE9wdGlvbnMgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgQmluZGluZ0RhdGEsIEVudGl0eSwgVmlld01vZGVsLCBGcmFtZUNvbnRleHQsIEJpbmRpbmdPYmplY3QgfSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbmltcG9ydCB7IFN0YXRlTWFjaGluZVNlcnZpY2UsIENhcmREYXRhU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcyc7XHJcblxyXG5pbXBvcnQgeyBGb3JtU2V0dGluZ3MgfSBmcm9tICdAZWRwLWFpZi9jb21tb24tYXBpJztcclxuaW1wb3J0IHsgSVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeCB9IGZyb20gXCJAZWRwLWJpZi9jb21tb24tYXBpXCI7XHJcbmltcG9ydCB7IEZvcm1DcmVhdGVBcmdzLCBGb3JtQ3JlYXRlUmVzdWx0LCBGb3JtVXBkYXRlQXJncywgRm9ybVVwZGF0ZVJlc3VsdCB9IGZyb20gJy4uL3JlZic7XHJcbmltcG9ydCB7IEJpZlRhcmdldFVpU2VydmljZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vc2VydmljZS9iaWYtdGFyZ2V0LXVpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCaWZEYXRhU2VydmljZSB9IGZyb20gJy4uL2JpZi1tYW51YWwtY3JlYXRpb24vc2VydmljZS9iaWYtZGF0YS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3MgfSBmcm9tICcuLi9lbnRpdHkvZm9ybS1yZXN0L0Zvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzJztcclxuaW1wb3J0IHsgRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCB9IGZyb20gJ0BlZHAtYWlmL3J1bnRpbWUtYXBpJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBMb2NhbGVQaXBlIH0gZnJvbSAnLi4vYmlmLW1hbnVhbC1jcmVhdGlvbi9waXBlL2xvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgTWFudWFsQ3JlYXRpb25Nb2RlIH0gZnJvbSAnLi4vZW50aXR5L2Zvcm0tcmVzdC9NYW51YWxDcmVhdGlvbk1vZGUnO1xyXG5cclxuLyoqXHJcbiAqIOaJi+W3peeUn+WNleebruagh+err+acjeWKoeexu1xyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQmlmTWFudWFsQ3JlYXRpb25UYXJnZXRXZWJDbXBTZXJ2aWNlIHtcclxuICBwdWJsaWMgbG9jYWxlUGlwZTogTG9jYWxlUGlwZTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBkYXRhU2VydmljZTogQmlmRGF0YVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgdGFyZ2V0VWlTZXJ2aWNlOiBCaWZUYXJnZXRVaVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgc3RhdGVNYWNoaW5lU2VydmljZTogU3RhdGVNYWNoaW5lU2VydmljZSxcclxuICAgIHB1YmxpYyBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEsXHJcbiAgICBwdWJsaWMgbWVzc2FnZXJTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgY2FyZERhdGFTZXJ2aWNlOiBDYXJkRGF0YVNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgdmlld01vZGVsOiBWaWV3TW9kZWwsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSBuZXcgTG9jYWxlUGlwZSh0aGlzLnRhcmdldFVpU2VydmljZSAmJiB0aGlzLnRhcmdldFVpU2VydmljZS5sb2NhbGVJZCB8fCAnemgtQ0hTJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3ljZXmja7mtYHnlJ/ljZXmtYHnqIvmiafooYzlkI7mlbDmja5cclxuICAgKiBAcGFyYW0gZm9ybVZvSWQg6KGo5Y2V57uR5a6a6KeG5Zu+5a+56LGhIElkXHJcbiAgICovXHJcbiAgcHVibGljIGJpZkxvYWQoZm9ybVZvSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQ3JlYXRlQXJncygpO1xyXG4gICAgYXJncy5mb3JtVm9JZCA9IGZvcm1Wb0lkO1xyXG4gICAgLy/ojrflj5bnlJ/ljZXmtYHnqIvmiafooYznu5PmnpxcclxuICAgIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLmdldENyZWF0aW9uUmVzdWx0KCkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgIGFyZ3MucnBjQ3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgPSByZXMuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQuQ29udmVydFRvSnNvbigpO1xyXG4gICAgICAvL+WIm+W7uuWunuS9k+aVsOaNrlxyXG4gICAgICB0aGlzLmRhdGFTZXJ2aWNlLmNyZWF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAocmVzdWx0OiBGb3JtQ3JlYXRlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAvL+WIh+aNoueKtuaAgeacuuiHsyDigJzmlrDlop7igJ1cclxuICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lU2VydmljZS50cmFuc2l0KFwiQ3JlYXRlXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+C54Wn77yM5qC55o2u55uu5qCHVk8gSWTmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlubbmiafooYzpgInkuK3nmoTnlJ/ljZXmtYHnqItcclxuICAgKlxyXG4gICAqIEBwYXJhbSB0YXJnZXRWb0lkIOWNleaNrua1geebruagh+inhuWbvuWvueixoSBJZFxyXG4gICAqIEBwYXJhbSB0YXJnZXREYXRhSWRzIOebruagh+WNleaNruS4u+ihqElk5YiX6KGoXHJcbiAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICogQHBhcmFtIG1vZGFsT3B0aW9uczEg55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5qih5oCB5qGG6YWN572uXHJcbiAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOeUn+WNlea1geeoi+mAieaLqeWZqOiHquWumuS5iemAieaLqeWZqHVybFxyXG4gICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMyIOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAqIEBwYXJhbSBleHRQYXJhbXMxIOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOW8ueeql+aJqeWxleWPguaVsFxyXG4gICAqIEBwYXJhbSBleHRQYXJhbXMyIOaJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaJqeWxleWPguaVsFxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlckJ5VGFyZ2V0Vm9JZCh0YXJnZXRWb0lkOiBzdHJpbmcsIHRhcmdldERhdGFJZHM/OiBzdHJpbmdbXSwgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9uczE/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBtb2RhbE9wdGlvbnMyPzogTW9kYWxPcHRpb25zLCBleHRQYXJhbXMxPzoge30sIGV4dFBhcmFtczI/OiB7IFtrZXk6IHN0cmluZ106IGFueTsgYm9vdHN0cmFwQ29tcG9uZW50U2VsZWN0b3I/OiBzdHJpbmc7IH0pIHtcclxuICAgIGlmICh0YXJnZXRWb0lkID09IG51bGwgfHwgdGFyZ2V0Vm9JZCA9PSBcIlwiIHx8IHRhcmdldFZvSWQudHJpbSAmJiB0YXJnZXRWb0lkLnRyaW0oKSA9PSBcIlwiKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJ0YXJnZXRWb0lkVm9JZENhbnRCZUVtcHR5XCIpKTtcclxuICAgICAgdGhyb3cgXCLlj4LmlbB0YXJnZXRWb0lk5LiN5Y+v5Li656m6XCI7XHJcbiAgICB9XHJcbiAgICBiaXpGbG93Y2hhcnRJZCA9IGJpekZsb3djaGFydElkID09PSBcIlwiIHx8IGJpekZsb3djaGFydElkID09IG51bGwgPyB1bmRlZmluZWQgOiBiaXpGbG93Y2hhcnRJZDtcclxuICAgIHRhcmdldERhdGFJZHMgPSB0YXJnZXREYXRhSWRzIGFzIGFueSA9PT0gXCJcIiB8fCB0YXJnZXREYXRhSWRzID09IG51bGwgPyBbdGhpcy5iaW5kaW5nRGF0YS5nZXRPYmplY3QoKS5pZF0gOiB0YXJnZXREYXRhSWRzO1xyXG4gICAgbW9kYWxPcHRpb25zMSA9IG1vZGFsT3B0aW9uczEgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9uczEgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1vZGFsT3B0aW9uczE7XHJcbiAgICBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09PSBcIlwiIHx8IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID09IG51bGwgPyB1bmRlZmluZWQgOiBjdXN0b21TZWxlY3Rvck1vZHVsZVVybDtcclxuICAgIG1vZGFsT3B0aW9uczIgPSBtb2RhbE9wdGlvbnMyIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMyID09IG51bGwgPyB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwic2VsZWN0VXBzdHJlYW1CaWxsXCIpLFxyXG4gICAgICB3aWR0aDogMTEwMCxcclxuICAgICAgaGVpZ2h0OiA1NTAsXHJcbiAgICB9IDogbW9kYWxPcHRpb25zMjtcclxuICAgIGV4dFBhcmFtczEgPSBleHRQYXJhbXMxID09PSBcIlwiIHx8IGV4dFBhcmFtczEgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczE7XHJcbiAgICBleHRQYXJhbXMyID0gZXh0UGFyYW1zMiBhcyBhbnkgPT09IFwiXCIgfHwgZXh0UGFyYW1zMiA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zMjtcclxuXHJcbiAgICAvL+abtOaWsOihqOWNleeOsOacieWPmOabtOmbhlxyXG4gICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UudXBkYXRlKCkuc3Vic2NyaWJlKFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgICAgICB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFB1bGwodGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9uczEsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMxKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgLy/ojrflj5booajljZXphY3nva5cclxuICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhlxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zMiwgZXh0UGFyYW1zMikuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAoZW50aXRpZXM6IEVudGl0eVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mnoTpgKDnlJ/ljZXmtYHnqIvmiafooYzlj4LmlbDlrp7kvZNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNyZWF0aW9uUnVsZUlkID0gY3AuY3JlYXRpb25SdWxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy9Gb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJnc+eahHNvdXJjZVZvRW50aXR5RGF0YXPlsZ7mgKfkuLrliY3nq6/lrp7kvZPluo/liJfljJblkI7nmoTlrZfnrKbkuLLliJfooahcclxuICAgICAgICAgICAgICAgICAgICAvLyAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAvLyBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBlbnRpdGllcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICBpZiAoaXRlbSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyDlpoLmnpzmmK9FbnRpdHlcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KChpdGVtIGFzIGFueSkudG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9IGVsc2UgaWYgKGl0ZW1bXCJfX3R5cGVfX1wiXSA9PSBcIkJpbmRpbmdPYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvL+WmguaenOadpeiHqkJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IGJpbmRpbmdPYmplY3QgPSBpdGVtIGFzIEJpbmRpbmdPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShiaW5kaW5nT2JqZWN0LnRvSlNPTih7IHVzZUZ1bGxNdWx0aUxhbmdQcm9wZXJ0eTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBlID0gaXRlbSBhcyBFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgoZSBhcyBhbnkpLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6buY6K6k5L2/55SoSUTliJfooahcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YUlkcyA9IGVudGl0aWVzLm1hcCgoaXQ6IGFueSkgPT4gaXQuaWQgfHwgaXQucHJpbWFyeVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnRhcmdldFZvRGF0YUlkcyA9IHRhcmdldERhdGFJZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5tYW51YWxDcmVhdGlvbk1vZGUgPSBNYW51YWxDcmVhdGlvbk1vZGUuUHVsbDtcclxuICAgICAgICAgICAgICAgICAgICAvL+aJp+ihjOeUn+WNlea1geeoi1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZXhlY3V0ZUJpbGxDcmVhdGlvblByb2Nlc3MoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdDogRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1VcGRhdGVBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFwcGluZ+aJp+ihjOadoeS7tuWIpOaWree7k+aenOS4unRydWXml7bmiY3kvJrmiafooYznlJ/ljZXmtYHnqIvlvpfliLDnlJ/ljZXnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb25kaXRpb25SZXN1bHQuY29uZGl0aW9uRXhlY3V0aW9uUmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+WNlee7k+aenOS4jeS4uuepulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJwY0NyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pu05paw6KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnVwZGF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogRm9ybVVwZGF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN5paw5Yqg6L296KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UubG9hZCh0YXJnZXREYXRhSWRzWzBdKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNyZWF0aW9uUmVzdWx0RW1wdHlcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4umZhbHNl5pe25Y+v5b6X5Yiw6YWN572u55qE6ZSZ6K+v5o+Q56S65L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvbkV4ZWN1dGlvbkVycm9yXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnIpID0+IHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnibnlrprlj4LnhafvvIzmoLnmja7mnaXmupBWTyBJZOWSjOebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5bm25omn6KGM6YCJ5Lit55qE55Sf5Y2V5rWB56iLXHJcbiAgICpcclxuICAgKiBAcGFyYW0gc291cmNlVm9JZCDljZXmja7mtYHmnaXmupDop4blm77lr7nosaEgSWRcclxuICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDljZXmja7mtYHnm67moIfop4blm77lr7nosaEgSWRcclxuICAgKiBAcGFyYW0gdGFyZ2V0RGF0YUlkcyDnm67moIfljZXmja7kuLvooahJZOWIl+ihqFxyXG4gICAqIEBwYXJhbSBiaXpGbG93Y2hhcnRJZCDkuJrliqHlnLrmma/lm75JZFxyXG4gICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMxIOeUn+WNlea1geeoi+mAieaLqeWZqOaooeaAgeahhumFjee9rlxyXG4gICAqIEBwYXJhbSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCDnlJ/ljZXmtYHnqIvpgInmi6nlmajoh6rlrprkuYnpgInmi6nlmah1cmxcclxuICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zMiDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYbphY3nva5cclxuICAgKiBAcGFyYW0gZXh0UGFyYW1zMSDmiZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmajlvLnnqpfmianlsZXlj4LmlbBcclxuICAgKiBAcGFyYW0gZXh0UGFyYW1zMiDmiZPlvIDmnaXmupDljZXmja7pgInmi6nlmajmianlsZXlj4LmlbBcclxuICAgKi9cclxuICBwdWJsaWMgcmVmZXJCeVNvdXJjZVZvSWRBbmRUYXJnZXRWb0lkKHNvdXJjZVZvSWQ6IHN0cmluZywgdGFyZ2V0Vm9JZDogc3RyaW5nLCB0YXJnZXREYXRhSWRzPzogc3RyaW5nW10sIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnMxPzogTW9kYWxPcHRpb25zLCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybD86IHN0cmluZywgbW9kYWxPcHRpb25zMj86IE1vZGFsT3B0aW9ucywgZXh0UGFyYW1zMT86IHt9LCBleHRQYXJhbXMyPzogeyBba2V5OiBzdHJpbmddOiBhbnk7IGJvb3RzdHJhcENvbXBvbmVudFNlbGVjdG9yPzogc3RyaW5nOyB9KSB7XHJcbiAgICBpZiAoc291cmNlVm9JZCA9PSBudWxsIHx8IHNvdXJjZVZvSWQgPT0gXCJcIiB8fCBzb3VyY2VWb0lkLnRyaW0gJiYgc291cmNlVm9JZC50cmltKCkgPT0gXCJcIikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwic291cmNlVm9JZENhbnRCZUVtcHR5XCIpKTtcclxuICAgICAgdGhyb3cgXCLlj4LmlbBzb3VyY2VWb0lk5LiN5Y+v5Li656m6XCI7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0Vm9JZCA9PSBudWxsIHx8IHRhcmdldFZvSWQgPT0gXCJcIiB8fCB0YXJnZXRWb0lkLnRyaW0gJiYgdGFyZ2V0Vm9JZC50cmltKCkgPT0gXCJcIikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwidGFyZ2V0Vm9JZFZvSWRDYW50QmVFbXB0eVwiKSk7XHJcbiAgICAgIHRocm93IFwi5Y+C5pWwdGFyZ2V0Vm9JZOS4jeWPr+S4uuepulwiO1xyXG4gICAgfVxyXG4gICAgYml6Rmxvd2NoYXJ0SWQgPSBiaXpGbG93Y2hhcnRJZCA9PT0gXCJcIiB8fCBiaXpGbG93Y2hhcnRJZCA9PSBudWxsID8gdW5kZWZpbmVkIDogYml6Rmxvd2NoYXJ0SWQ7XHJcbiAgICB0YXJnZXREYXRhSWRzID0gdGFyZ2V0RGF0YUlkcyBhcyBhbnkgPT09IFwiXCIgfHwgdGFyZ2V0RGF0YUlkcyA9PSBudWxsID8gW3RoaXMuYmluZGluZ0RhdGEuZ2V0T2JqZWN0KCkuaWRdIDogdGFyZ2V0RGF0YUlkcztcclxuICAgIG1vZGFsT3B0aW9uczEgPSBtb2RhbE9wdGlvbnMxIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMxID09IG51bGwgPyB1bmRlZmluZWQgOiBtb2RhbE9wdGlvbnMxO1xyXG4gICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICBtb2RhbE9wdGlvbnMyID0gbW9kYWxPcHRpb25zMiBhcyBhbnkgPT09IFwiXCIgfHwgbW9kYWxPcHRpb25zMiA9PSBudWxsID8ge1xyXG4gICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInNlbGVjdFVwc3RyZWFtQmlsbFwiKSxcclxuICAgICAgd2lkdGg6IDExMDAsXHJcbiAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgfSA6IG1vZGFsT3B0aW9uczI7XHJcbiAgICBleHRQYXJhbXMxID0gZXh0UGFyYW1zMSA9PT0gXCJcIiB8fCBleHRQYXJhbXMxID09IG51bGwgPyB1bmRlZmluZWQgOiBleHRQYXJhbXMxO1xyXG4gICAgZXh0UGFyYW1zMiA9IGV4dFBhcmFtczIgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtczIgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGV4dFBhcmFtczI7XHJcblxyXG4gICAgLy/mm7TmlrDooajljZXnjrDmnInlj5jmm7Tpm4ZcclxuICAgIHRoaXMuY2FyZERhdGFTZXJ2aWNlLnVwZGF0ZSgpLnN1YnNjcmliZShcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIC8v5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5ZmoXHJcbiAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlbkJpbGxDcmVhdGlvblByb2Nlc3NTZWxlY3RvcjRTcGVjaWZpY1B1bGwoc291cmNlVm9JZCwgdGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9uczEsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMxKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgLy/ojrflj5booajljZXphY3nva5cclxuICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhlxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zMiwgZXh0UGFyYW1zMikuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAoZW50aXRpZXM6IEVudGl0eVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mnoTpgKDnlJ/ljZXmtYHnqIvmiafooYzlj4LmlbDlrp7kvZNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5iaWxsQ3JlYXRpb25Qcm9jZXNzSWQgPSBjcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNyZWF0aW9uUnVsZUlkID0gY3AuY3JlYXRpb25SdWxlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy9Gb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJnc+eahHNvdXJjZVZvRW50aXR5RGF0YXPlsZ7mgKfkuLrliY3nq6/lrp7kvZPluo/liJfljJblkI7nmoTlrZfnrKbkuLLliJfooahcclxuICAgICAgICAgICAgICAgICAgICAvLyAvL3NvdXJjZVZvRW50aXR5RGF0YXPliJfooajkuK3nmoTmr4/kuKrlrZfnrKbkuLLvvIzlnKjnu5PmnoTkuIrlupTkuI7ljZXmja7mtYHlrprkuYnkuK3miYDpgInkuK3nmoTkuIrmuLjop4blm77lr7nosaHkuIDoh7TjgIJcclxuICAgICAgICAgICAgICAgICAgICAvLyBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBlbnRpdGllcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICBpZiAoaXRlbSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyDlpoLmnpzmmK9FbnRpdHlcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KChpdGVtIGFzIGFueSkudG9KU09OKGZhbHNlLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9IGVsc2UgaWYgKGl0ZW1bXCJfX3R5cGVfX1wiXSA9PSBcIkJpbmRpbmdPYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvL+WmguaenOadpeiHqkJpbmRpbmdEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IGJpbmRpbmdPYmplY3QgPSBpdGVtIGFzIEJpbmRpbmdPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShiaW5kaW5nT2JqZWN0LnRvSlNPTih7IHVzZUZ1bGxNdWx0aUxhbmdQcm9wZXJ0eTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBlID0gaXRlbSBhcyBFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgoZSBhcyBhbnkpLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3Muc291cmNlVm9FbnRpdHlEYXRhcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6buY6K6k5L2/55SoSUTliJfooahcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YUlkcyA9IGVudGl0aWVzLm1hcCgoaXQ6IGFueSkgPT4gaXQuaWQgfHwgaXQucHJpbWFyeVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnRhcmdldFZvRGF0YUlkcyA9IHRhcmdldERhdGFJZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5tYW51YWxDcmVhdGlvbk1vZGUgPSBNYW51YWxDcmVhdGlvbk1vZGUuU3BlY2lmaWNQdWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5omn6KGM55Sf5Y2V5rWB56iLXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5leGVjdXRlQmlsbENyZWF0aW9uUHJvY2VzcyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgRm9ybVVwZGF0ZUFyZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXBwaW5n5omn6KGM5p2h5Lu25Yik5pat57uT5p6c5Li6dHJ1ZeaXtuaJjeS8muaJp+ihjOeUn+WNlea1geeoi+W+l+WIsOeUn+WNlee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5jb25kaXRpb25FeGVjdXRpb25SZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8v55Sf5Y2V57uT5p6c5LiN5Li656m6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdCAmJiByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQubWFwcGluZ1Jlc3VsdHMgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucnBjQ3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgPSByZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQuQ29udmVydFRvSnNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlrDooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudXBkYXRlRW50aXR5RGF0YXMoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzOiBGb3JtVXBkYXRlUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43mlrDliqDovb3ooajljZXmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmREYXRhU2VydmljZS5sb2FkKHRhcmdldERhdGFJZHNbMF0pLnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY3JlYXRpb25SZXN1bHRFbXB0eVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li6ZmFsc2Xml7blj6/lvpfliLDphY3nva7nmoTplJnor6/mj5DnpLrkv6Hmga9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihyZXN1bHQuY29uZGl0aW9uUmVzdWx0Lm1lc3NhZ2UgfHwgdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNyZWF0aW9uRXhlY3V0aW9uRXJyb3JcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfSxcclxuICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeJueWumuWPgueFp++8jOagueaNrueUn+WNlea1geeoi0lE5omn6KGM6YCJ5Lit55qE55Sf5Y2V5rWB56iLXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcHJvY2Vzc0lkIOWNleaNrua1geeUn+WNlea1geeoiyBJZFxyXG4gICAqIEBwYXJhbSB0YXJnZXREYXRhSWRzIOebruagh+WNleaNruS4u+ihqElk5YiX6KGoXHJcbiAgICogQHBhcmFtIG1vZGFsT3B0aW9ucyDmnaXmupDljZXmja7pgInmi6nlmajmqKHmgIHmoYbphY3nva5cclxuICAgKiBAcGFyYW0gZXh0UGFyYW1zIOaJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaJqeWxleWPguaVsFxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWZlckJ5Q3JlYXRpb25Qcm9jZXNzSWQocHJvY2Vzc0lkOiBzdHJpbmcsIHRhcmdldERhdGFJZHM/OiBzdHJpbmdbXSwgbW9kYWxPcHRpb25zPzogTW9kYWxPcHRpb25zLCBleHRQYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueTsgYm9vdHN0cmFwQ29tcG9uZW50U2VsZWN0b3I/OiBzdHJpbmc7IH0pIHtcclxuICAgIGlmIChwcm9jZXNzSWQgPT0gbnVsbCB8fCBwcm9jZXNzSWQgPT0gXCJcIiB8fCBwcm9jZXNzSWQudHJpbSgpID09IFwiXCIpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NJZENhbnRCZUVtcHR5XCIpKTtcclxuICAgICAgdGhyb3cgXCLlj4LmlbBwcm9jZXNzSWTkuI3lj6/kuLrnqbpcIjtcclxuICAgIH1cclxuICAgIHRhcmdldERhdGFJZHMgPSB0YXJnZXREYXRhSWRzIGFzIGFueSA9PT0gXCJcIiB8fCB0YXJnZXREYXRhSWRzID09IG51bGwgPyBbdGhpcy5iaW5kaW5nRGF0YS5nZXRPYmplY3QoKS5pZF0gOiB0YXJnZXREYXRhSWRzO1xyXG4gICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzZWxlY3RVcHN0cmVhbUJpbGxcIiksXHJcbiAgICAgIHdpZHRoOiAxMTAwLFxyXG4gICAgICBoZWlnaHQ6IDU1MCxcclxuICAgIH0gOiBtb2RhbE9wdGlvbnM7XHJcbiAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG5cclxuICAgIC8v5pu05paw6KGo5Y2V546w5pyJ5Y+Y5pu06ZuGXHJcbiAgICB0aGlzLmNhcmREYXRhU2VydmljZS51cGRhdGUoKS5zdWJzY3JpYmUoXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICAvL+aJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqFxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeEJ5SWQocHJvY2Vzc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAoY3A6IElSdFNsaW1CaWxsQ3JlYXRpb25Qcm9jZXNzRW50aXR5RXgpID0+IHtcclxuICAgICAgICAgICAgLy/ojrflj5booajljZXphY3nva5cclxuICAgICAgICAgICAgdGhpcy5kYXRhU2VydmljZS5nZXRGb3JtU2V0dGluZ3NCeUlkKGNwLmZvcm1TZXR0aW5nc0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgKGZvcm1TZXR0aW5nczogRm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOadpea6kOWNleaNrumAieaLqeWZqOaooeaAgeahhlxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zLCBleHRQYXJhbXMpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgKGVudGl0aWVzOiBFbnRpdHlbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5p6E6YCg55Sf5Y2V5rWB56iL5omn6KGM5Y+C5pWw5a6e5L2TXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IG5ldyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yQXJncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuYmlsbENyZWF0aW9uUHJvY2Vzc0lkID0gY3AuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jcmVhdGlvblJ1bGVJZCA9IGNwLmNyZWF0aW9uUnVsZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvckFyZ3PnmoRzb3VyY2VWb0VudGl0eURhdGFz5bGe5oCn5Li65YmN56uv5a6e5L2T5bqP5YiX5YyW5ZCO55qE5a2X56ym5Liy5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy9zb3VyY2VWb0VudGl0eURhdGFz5YiX6KGo5Lit55qE5q+P5Liq5a2X56ym5Liy77yM5Zyo57uT5p6E5LiK5bqU5LiO5Y2V5o2u5rWB5a6a5LmJ5Lit5omA6YCJ5Lit55qE5LiK5ri46KeG5Zu+5a+56LGh5LiA6Ie044CCXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJncy5zb3VyY2VWb0VudGl0eURhdGFzID0gZW50aXRpZXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBFbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8g5aaC5p6c5pivRW50aXR5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgoaXRlbSBhcyBhbnkpLnRvSlNPTihmYWxzZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgfSBlbHNlIGlmIChpdGVtW1wiX190eXBlX19cIl0gPT0gXCJCaW5kaW5nT2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy/lpoLmnpzmnaXoh6pCaW5kaW5nRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBiaW5kaW5nT2JqZWN0ID0gaXRlbSBhcyBCaW5kaW5nT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYmluZGluZ09iamVjdC50b0pTT04oeyB1c2VGdWxsTXVsdGlMYW5nUHJvcGVydHk6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgZSA9IGl0ZW0gYXMgRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoKGUgYXMgYW55KS50b0pTT04oZmFsc2UsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnNvdXJjZVZvRW50aXR5RGF0YXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOm7mOiupOS9v+eUqElE5YiX6KGoXHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5zb3VyY2VWb0VudGl0eURhdGFJZHMgPSBlbnRpdGllcy5tYXAoKGl0OiBhbnkpID0+IGl0LmlkIHx8IGl0LnByaW1hcnlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy50YXJnZXRWb0RhdGFJZHMgPSB0YXJnZXREYXRhSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MubWFudWFsQ3JlYXRpb25Nb2RlID0gTWFudWFsQ3JlYXRpb25Nb2RlLlNwZWNpZmljUHVsbDtcclxuICAgICAgICAgICAgICAgICAgICAvL+aJp+ihjOeUn+WNlea1geeoi1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuZXhlY3V0ZUJpbGxDcmVhdGlvblByb2Nlc3MoYXJncykuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdDogRm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3IEZvcm1VcGRhdGVBcmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFwcGluZ+aJp+ihjOadoeS7tuWIpOaWree7k+aenOS4unRydWXml7bmiY3kvJrmiafooYznlJ/ljZXmtYHnqIvlvpfliLDnlJ/ljZXnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb25kaXRpb25SZXN1bHQuY29uZGl0aW9uRXhlY3V0aW9uUmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+WNlee7k+aenOS4jeS4uuepulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlYXRpb25SdWxlRXhlY3V0b3JSZXN1bHQgJiYgcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0Lm1hcHBpbmdSZXN1bHRzICYmIHJlc3VsdC5jcmVhdGlvblJ1bGVFeGVjdXRvclJlc3VsdC5tYXBwaW5nUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJwY0NyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0ID0gcmVzdWx0LmNyZWF0aW9uUnVsZUV4ZWN1dG9yUmVzdWx0LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pu05paw6KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnVwZGF0ZUVudGl0eURhdGFzKGFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlczogRm9ybVVwZGF0ZVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN5paw5Yqg6L296KGo5Y2V5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRGF0YVNlcnZpY2UubG9hZCh0YXJnZXREYXRhSWRzWzBdKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVyci5lcnJvciA9PSBudWxsID8gZXJyLm1lc3NhZ2UgOiAoZXJyLmVycm9yLk1lc3NhZ2UgfHwgZXJyLmVycm9yLm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNyZWF0aW9uUmVzdWx0RW1wdHlcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4umZhbHNl5pe25Y+v5b6X5Yiw6YWN572u55qE6ZSZ6K+v5o+Q56S65L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IocmVzdWx0LmNvbmRpdGlvblJlc3VsdC5tZXNzYWdlIHx8IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjcmVhdGlvbkV4ZWN1dGlvbkVycm9yXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIChlcnIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnIpID0+IHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBARGVwcmVjYXRlZCDlt7LlvIPnlKjvvIzor7fkvb/nlKgge0BsaW5rIGdldENyZWF0aW9uUmVzdWx0IH1cclxuICAgKiDojrflj5bmnaXmupDnlYzpnaLkvKDlhaXnmoTnlJ/ljZXmtYHnqIvmiafooYznu5PmnpxcclxuICAgKiBAcmV0dXJucyBjcmVhdGlvblJlc3VsdCDnlJ/ljZXmtYHnqIvmiafooYznu5PmnpwgQHR5cGUgeyBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0IH1cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Rm9ybUJpbGxDcmVhdGlvblByb2Nlc3NFeGVjdXRvclJlc3VsdCgpOiBGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0IHtcclxuICAgIHJldHVybiB0aGlzLnRhcmdldFVpU2VydmljZS5nZXRGb3JtQmlsbENyZWF0aW9uUHJvY2Vzc0V4ZWN1dG9yUmVzdWx0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmoLnmja7nm67moIdWTyBJZOaJk+W8gOeUn+WNlea1geeoi+mAieaLqeWZqOafpeaJvueUn+WNlea1geeoi1xyXG4gICAqIEBwYXJhbSB0YXJnZXRWb0lkIOebruagh1ZPIElkXHJcbiAgICogQHBhcmFtIGJpekZsb3djaGFydElkIOS4muWKoeWcuuaZr+WbvklkXHJcbiAgICogQHBhcmFtIG1vZGFsT3B0aW9ucyDmqKHmgIHmoYbphY3nva5cclxuICAgKiBAcGFyYW0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwg6Ieq5a6a5LmJ6YCJ5oup5ZmoVXJsXHJcbiAgICogQHBhcmFtIGV4dFBhcmFtcyDmianlsZXlj4LmlbBcclxuICAgKiBAcmV0dXJucyBjcmVhdGlvblByb2Nlc3Mg55Sf5Y2V5rWB56iLIEB0eXBlIHsgT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB9XHJcbiAgICovXHJcbiAgcHVibGljIG9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0UHVsbCh0YXJnZXRWb0lkOiBzdHJpbmcsIGJpekZsb3djaGFydElkPzogc3RyaW5nLCBtb2RhbE9wdGlvbnM/OiBNb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsPzogc3RyaW5nLCBleHRQYXJhbXM/OiB7fSk6IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4ge1xyXG4gICAgaWYgKHRhcmdldFZvSWQgPT0gbnVsbCB8fCB0YXJnZXRWb0lkID09IFwiXCIgfHwgdGFyZ2V0Vm9JZC50cmltICYmIHRhcmdldFZvSWQudHJpbSgpID09IFwiXCIpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInRhcmdldFZvSWRWb0lkQ2FudEJlRW1wdHlcIikpO1xyXG4gICAgICB0aHJvdyBcIuWPguaVsHRhcmdldFZvSWTkuI3lj6/kuLrnqbpcIjtcclxuICAgIH1cclxuICAgIGJpekZsb3djaGFydElkID0gYml6Rmxvd2NoYXJ0SWQgPT09IFwiXCIgfHwgYml6Rmxvd2NoYXJ0SWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJpekZsb3djaGFydElkO1xyXG4gICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1vZGFsT3B0aW9ucztcclxuICAgIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsID0gY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT09IFwiXCIgfHwgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsO1xyXG4gICAgZXh0UGFyYW1zID0gZXh0UGFyYW1zID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG4gICAgLy/miZPlvIDnlJ/ljZXmtYHnqIvpgInmi6nlmahcclxuICAgIHJldHVybiB0aGlzLnRhcmdldFVpU2VydmljZS5vcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFB1bGwodGFyZ2V0Vm9JZCwgYml6Rmxvd2NoYXJ0SWQsIG1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwsIGV4dFBhcmFtcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmoLnmja7mnaXmupBWTyBJZOWSjOebruagh1ZPIElk5omT5byA55Sf5Y2V5rWB56iL6YCJ5oup5Zmo5p+l5om+55Sf5Y2V5rWB56iLXHJcbiAgICogQHBhcmFtIHNvdXJjZVZvSWQg5p2l5rqQVk8gSWRcclxuICAgKiBAcGFyYW0gdGFyZ2V0Vm9JZCDnm67moIdWTyBJZFxyXG4gICAqIEBwYXJhbSBiaXpGbG93Y2hhcnRJZCDkuJrliqHlnLrmma/lm75JZFxyXG4gICAqIEBwYXJhbSBtb2RhbE9wdGlvbnMg5qih5oCB5qGG6YWN572uXHJcbiAgICogQHBhcmFtIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsIOiHquWumuS5iemAieaLqeWZqFVybFxyXG4gICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICogQHJldHVybnMgY3JlYXRpb25Qcm9jZXNzIOeUn+WNlea1geeoiyBAdHlwZSB7IE9ic2VydmFibGU8SVJ0U2xpbUJpbGxDcmVhdGlvblByb2Nlc3NFbnRpdHlFeD4gfVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcGVuQmlsbENyZWF0aW9uUHJvY2Vzc1NlbGVjdG9yNFNwZWNpZmljUHVsbChzb3VyY2VWb0lkOiBzdHJpbmcsIHRhcmdldFZvSWQ6IHN0cmluZywgYml6Rmxvd2NoYXJ0SWQ/OiBzdHJpbmcsIG1vZGFsT3B0aW9ucz86IE1vZGFsT3B0aW9ucywgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw/OiBzdHJpbmcsIGV4dFBhcmFtcz86IHt9KTogT2JzZXJ2YWJsZTxJUnRTbGltQmlsbENyZWF0aW9uUHJvY2Vzc0VudGl0eUV4PiB7XHJcbiAgICBpZiAoc291cmNlVm9JZCA9PSBudWxsIHx8IHNvdXJjZVZvSWQgPT0gXCJcIiB8fCBzb3VyY2VWb0lkLnRyaW0gJiYgc291cmNlVm9JZC50cmltKCkgPT0gXCJcIikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwic291cmNlVm9JZENhbnRCZUVtcHR5XCIpKTtcclxuICAgICAgdGhyb3cgXCLlj4LmlbBzb3VyY2VWb0lk5LiN5Y+v5Li656m6XCI7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0Vm9JZCA9PSBudWxsIHx8IHRhcmdldFZvSWQgPT0gXCJcIiB8fCB0YXJnZXRWb0lkLnRyaW0gJiYgdGFyZ2V0Vm9JZC50cmltKCkgPT0gXCJcIikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwidGFyZ2V0Vm9JZFZvSWRDYW50QmVFbXB0eVwiKSk7XHJcbiAgICAgIHRocm93IFwi5Y+C5pWwdGFyZ2V0Vm9JZOS4jeWPr+S4uuepulwiO1xyXG4gICAgfVxyXG4gICAgYml6Rmxvd2NoYXJ0SWQgPSBiaXpGbG93Y2hhcnRJZCA9PT0gXCJcIiB8fCBiaXpGbG93Y2hhcnRJZCA9PSBudWxsID8gdW5kZWZpbmVkIDogYml6Rmxvd2NoYXJ0SWQ7XHJcbiAgICBtb2RhbE9wdGlvbnMgPSBtb2RhbE9wdGlvbnMgYXMgYW55ID09PSBcIlwiIHx8IG1vZGFsT3B0aW9ucyA9PSBudWxsID8gdW5kZWZpbmVkIDogbW9kYWxPcHRpb25zO1xyXG4gICAgY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmwgPSBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PT0gXCJcIiB8fCBjdXN0b21TZWxlY3Rvck1vZHVsZVVybCA9PSBudWxsID8gdW5kZWZpbmVkIDogY3VzdG9tU2VsZWN0b3JNb2R1bGVVcmw7XHJcbiAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0VWlTZXJ2aWNlLm9wZW5CaWxsQ3JlYXRpb25Qcm9jZXNzU2VsZWN0b3I0U3BlY2lmaWNQdWxsKHNvdXJjZVZvSWQsIHRhcmdldFZvSWQsIGJpekZsb3djaGFydElkLCBtb2RhbE9wdGlvbnMsIGN1c3RvbVNlbGVjdG9yTW9kdWxlVXJsLCBleHRQYXJhbXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo6YCJ5oup5pWw5o2uXHJcbiAgICogQHBhcmFtIGZvcm1TZXR0aW5ncyDooajljZXphY3nva5cclxuICAgKiBAcGFyYW0gbW9kYWxPcHRpb25zIOaooeaAgeahhumFjee9rlxyXG4gICAqIEBwYXJhbSBleHRQYXJhbXMg5omp5bGV5Y+C5pWwXHJcbiAgICogQHJldHVybnMgZW50aXRpZXMg5pWw5o2u5YiX6KGoIEB0eXBlIHsgT2JzZXJ2YWJsZTxFbnRpdHlbXT4gfVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvcGVuU291cmNlRGF0YVNlbGVjdG9yNFB1bGwoZm9ybVNldHRpbmdzOiBGb3JtU2V0dGluZ3MsIG1vZGFsT3B0aW9ucz86IE1vZGFsT3B0aW9ucywgZXh0UGFyYW1zPzogeyBib290c3RyYXBDb21wb25lbnRTZWxlY3Rvcj86IHN0cmluZywgbG9hZENvbW1hbmQ/OiBzdHJpbmcsIGxvYWRQYXJhbXM/OiBhbnksIFtrZXk6IHN0cmluZ106IGFueSB9KTogT2JzZXJ2YWJsZTxFbnRpdHlbXT4ge1xyXG4gICAgbW9kYWxPcHRpb25zID0gbW9kYWxPcHRpb25zIGFzIGFueSA9PT0gXCJcIiB8fCBtb2RhbE9wdGlvbnMgPT0gbnVsbCA/IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzZWxlY3RVcHN0cmVhbUJpbGxcIiksXHJcbiAgICAgIHdpZHRoOiAxMTAwLFxyXG4gICAgICBoZWlnaHQ6IDU1MCxcclxuICAgIH0gOiBtb2RhbE9wdGlvbnM7XHJcbiAgICBleHRQYXJhbXMgPSBleHRQYXJhbXMgYXMgYW55ID09PSBcIlwiIHx8IGV4dFBhcmFtcyA9PSBudWxsID8gdW5kZWZpbmVkIDogZXh0UGFyYW1zO1xyXG5cclxuICAgIC8v5omT5byA5p2l5rqQ5Y2V5o2u6YCJ5oup5Zmo5qih5oCB5qGGXHJcbiAgICByZXR1cm4gdGhpcy50YXJnZXRVaVNlcnZpY2Uub3BlblNvdXJjZURhdGFTZWxlY3RvcjRQdWxsKGZvcm1TZXR0aW5ncywgbW9kYWxPcHRpb25zLCBleHRQYXJhbXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Lyg5Yiw5qC557uE5Lu2VUlTdGF0ZeS4iueahOeUn+WNleinhOWImeaJp+ihjOWZqOe7k+aenFxyXG4gICAqIEByZXR1cm5zIGNyZWF0aW9uUmVzdWx0IOeUn+WNlea1geeoi+aJp+ihjOe7k+aenCBAdHlwZSB7IEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQgfVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDcmVhdGlvblJlc3VsdCgpOiBPYnNlcnZhYmxlPEZvcm1CaWxsQ3JlYXRpb25Qcm9jZXNzRXhlY3V0b3JSZXN1bHQ+IHtcclxuICAgIHJldHVybiB0aGlzLnRhcmdldFVpU2VydmljZS5nZXRDcmVhdGlvblJlc3VsdCgpO1xyXG4gIH1cclxufVxyXG4iXX0=