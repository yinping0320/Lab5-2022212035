/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker/bill-tracker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Inject, LOCALE_ID, Input, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef, Optional, ApplicationRef, Injector, ComponentFactoryResolver, ReflectiveInjector } from '@angular/core';
import { BillTrackerGraphComponent } from '../bill-tracker-graph/bill-tracker-graph.component';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataComponent } from '../bill-tracker-data/bill-tracker-data.component';
import { BsModalService } from '@farris/ui-modal';
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { NotifyService } from "@farris/ui-notify";
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { Events } from '../../mxgraph-ext/Events';
import { BillTrackerInternalUiService } from '../../services/bill-tracker-internal-ui.service';
import { mxEvent } from '../../../ref/mxgraph';
var BillTrackerComponent = /** @class */ (function () {
    function BillTrackerComponent(args, localeId, dataService, notify, messager, loading, modal, cdf, vcr, appr, inj, cfr) {
        this.localeId = localeId;
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.cdf = cdf;
        this.vcr = vcr;
        this.appr = appr;
        this.inj = inj;
        this.cfr = cfr;
        this.defaultDataWrapperHeight = 180;
        this.dataWrapperHeight = 180;
        this.showData = false;
        this.dataFullScreen = false;
        this.billTrackerArgs = args;
        this.dataInfoService = new BillTrackerDataInfoService();
        this.newBTS = this.dataInfoService.isNewBTS(this.billTrackerArgs.canTrackingResult.billTrackingSettings);
        /** @type {?} */
        var inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
        this.defaultDataWrapperHeight = args && args.gridOptions && args.gridOptions.defaultHeight ? args.gridOptions.defaultHeight : this.defaultDataWrapperHeight;
        this.dataWrapperHeight = this.defaultDataWrapperHeight;
    }
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.paintGraph();
        }), 0);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.paintGraph = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.billGraph.paint();
        this.graphZoomScale = this.billGraph.getZoomScale();
        this.billGraph.graph.view.addListener(mxEvent.SCALE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            // console.log(sender, evt);
            _this.graphZoomScale = _this.billGraph.getZoomScale();
        }));
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    BillTrackerComponent.prototype.selectHandler = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        if (cell) {
            /** @type {?} */
            var billInfo = cell.billInfo;
            /** @type {?} */
            var billDataInfo = cell.billDataInfo;
            if (billInfo == this.lastBillInfo && billDataInfo == this.lastBillDataInfo && this.showData == true) {
                return;
            }
            /** @type {?} */
            var args = this.dataService.buildGetMainEntityDataArgs(billInfo, billDataInfo);
            this.billData.showDataGrid(args, billInfo, billDataInfo, null);
            // 重置滚动条
            this.divDataWrapperER.nativeElement.scrollTo({ top: 0 });
            this.showData = true;
            this.lastBillInfo = billInfo;
            this.lastBillDataInfo = billDataInfo;
        }
        else {
            this.billData.clearDataRegion();
            this.showData = false;
        }
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.stateChangeHandler = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        if (evt.type == Events.CLICK_FIRST_SUMMARY) {
            this.openBillDetail(evt.data);
        }
    };
    /**
     * @param {?} modalRef
     * @return {?}
     */
    BillTrackerComponent.prototype.setModalRef = /**
     * @param {?} modalRef
     * @return {?}
     */
    function (modalRef) {
        this.modalRef = modalRef;
        if (this.billGraph != null) {
            this.billGraph.setModalRef(modalRef);
        }
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.resetGraphHeight = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        var _this = this;
        ((/** @type {?} */ (evt.host))).style.top = '';
        ((/** @type {?} */ (evt.host))).style.left = '';
        this.graphContainerER.nativeElement.style.height = this.mainContainerER.nativeElement.clientHeight - evt.size.height + "px";
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.billGraph.refresh();
        }));
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.expandDataRegion = /**
     * @return {?}
     */
    function () {
        this.dataFullScreen = true;
        this.divDataWrapperER.nativeElement.style.height = '100%';
        this.divDataWrapperER.nativeElement.style.top = '0';
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.collapseDataRegion = /**
     * @return {?}
     */
    function () {
        this.dataFullScreen = false;
        this.dataWrapperHeight = this.defaultDataWrapperHeight;
        this.divDataWrapperER.nativeElement.style.height = this.dataWrapperHeight + "px";
        this.divDataWrapperER.nativeElement.style.top = null;
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BillTrackerComponent.prototype.onRzResized = /**
     * @param {?} evt
     * @return {?}
     */
    function (evt) {
        if (evt.position.top < 0) {
            this.divDataWrapperER.nativeElement.style.top = '0';
            this.divDataWrapperER.nativeElement.style.height = '100%';
            this.dataFullScreen = true;
        }
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomIn = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomIn();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomOut = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomOut();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphZoomActual = /**
     * @return {?}
     */
    function () {
        this.billGraph.zoomActual();
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphPrint = /**
     * @return {?}
     */
    function () {
        this.billGraph.print();
    };
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpand = /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    function (direction, all) {
        if (all === void 0) { all = false; }
        this.billGraph.expand(direction, all);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandUpAll = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Up, true);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandUp = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Up, false);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandDown = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Down, false);
    };
    /**
     * @return {?}
     */
    BillTrackerComponent.prototype.graphExpandDownAll = /**
     * @return {?}
     */
    function () {
        this.graphExpand(BillTrackerDirection.Down, true);
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    BillTrackerComponent.prototype.openBillDetail = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        this.internalUiService.openBillDetail(cell.billInfo, cell.billDataInfo);
    };
    BillTrackerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-bill-tracker',
                    template: "<div class=\"g-main\" style=\"height: 100%; background-color: #ffffff;\" #mainContainer>\r\n  <div class=\"bill-tracker-toolbar-wrapper\" *ngIf=\"modalRef!=null\">\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUpAll()\">\r\n      {{'expandUpAll'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUp()\">\r\n      {{'expandUp'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDown()\">\r\n      {{'expandDown'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDownAll()\">\r\n      {{'expandDownAll'|billTrackerLocale}}\r\n    </button>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomOut()\">\r\n      <i class=\"f-icon f-icon-minus\" title=\"{{'zoomOut' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-input\">\r\n      <input *ngIf=\"false\" type=\"text\" style=\"border: 0; width: 30px; text-align: right;\" readonly\r\n        [(ngModel)]=\"graphZoomScale\">\r\n      <span style=\"border: 0; width: 30px; text-align: right;\">{{graphZoomScale}}</span>\r\n      <span>%</span>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomIn()\">\r\n      <i class=\"f-icon f-icon-add\" title=\"{{'zoomIn' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomActual()\">\r\n      <i class=\"f-icon f-icon-reset\" title=\"{{'zoomReset' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphPrint()\" *ngIf=\"false\">\r\n      <i class=\"f-icon f-icon-print\" title=\"{{'print' | billTrackerLocale}}\"></i>\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-graph-wrapper\" #graphContainer>\r\n    <lib-bill-tracker-graph #billGraph [billTrackerArgs]=\"billTrackerArgs\" (select)=\"selectHandler($event)\"\r\n      (stateChange)=\"stateChangeHandler($event)\">\r\n    </lib-bill-tracker-graph>\r\n  </div>\r\n</div>\r\n<!-- todo: \u5206\u5272\u6761\u6682\u672A\u52A0\u6700\u5927\u9AD8\u5EA6\u9650\u5236 -->\r\n<div #divDataWrapper class=\"bill-tracker-data-wrapper\" [style.height]=\"dataWrapperHeight + 'px'\"\r\n  [style.display]=\"showData ? null : 'none'\" ngResizable rzAspectRatio=\"false\" [rzHandles]=\"'n'\" [rzMinHeight]=\"40\"\r\n  (rzStop)=\"onRzResized($event)\">\r\n  <div class=\"bill-tracker-divider-wrapper\">\r\n    <div class=\"bill-tracker-divider bill-tracker-divider-transparent bill-tracker-divider-img\">\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-fold-container\">\r\n    <div class=\"bill-tracker-fold-wrapper\">\r\n      <div class=\"bill-tracker-fold-icon\">\r\n        <i class=\"f-icon f-icon-arrow-seek-up\" *ngIf=\"dataFullScreen==false\" (click)=\"expandDataRegion()\"></i>\r\n        <i class=\"f-icon f-icon-arrow-seek-down\" *ngIf=\"dataFullScreen==true\" (click)=\"collapseDataRegion()\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div #divDataTable class=\"bill-tracker-data-table-wrapper\">\r\n    <lib-bill-tracker-data #billData></lib-bill-tracker-data>\r\n  </div>\r\n</div>\r\n",
                    providers: [
                        BillTrackerDataService
                    ],
                    changeDetection: ChangeDetectionStrategy.Default,
                    styles: [".bill-tracker-divider{position:relative;height:5px}.bill-tracker-divider-transparent:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#e9ecf3}.bill-tracker-divider-transparent:hover:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#3f65ff}.bill-tracker-divider-img:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator.svg);background-repeat:no-repeat}.bill-tracker-divider-img:hover:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator-hover.svg);background-repeat:no-repeat}.bill-tracker-graph-wrapper{height:100%;position:relative}.bill-tracker-data-wrapper{z-index:2;overflow-y:auto;position:absolute;left:0;width:100%;bottom:0;height:200px;background-color:#fff;overflow:hidden}.bill-tracker-data-wrapper .ng-resizable-handle.ng-resizable-n{height:10px}.bill-tracker-data-table-wrapper{position:relative;width:100%;padding-top:6px;height:100%;overflow:auto}.bill-tracker-fold-wrapper{z-index:1;position:absolute;right:1rem;top:0;width:2rem;height:2rem}.bill-tracker-fold-icon{display:inline-flex;width:1.5em;height:1.5em;line-height:1.5em;text-align:center;color:#848c9a;background:#fff;border-radius:1.5em;border:1px solid #e9ecf3;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden;margin:.5em .5em 0 0}.bill-tracker-fold-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-wrapper{z-index:1;position:absolute;right:0;top:0;display:flex;margin-right:14px;margin-top:14px;background-color:#fff}.bill-tracker-toolbar-icon{background:#fff;width:22px;height:22px;line-height:22px;text-align:center;color:#595d63;border:1px solid #e8ebf2;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);border-radius:22px;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden}.bill-tracker-toolbar-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-btn:hover{background-color:#fff}.bill-tracker-fold-container{position:fixed;height:2rem;width:100%;z-index:1}"]
                }] }
    ];
    /** @nocollapse */
    BillTrackerComponent.ctorParameters = function () { return [
        { type: BillTrackerArgs },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: BillTrackerDataService },
        { type: NotifyService },
        { type: MessagerService },
        { type: LoadingService },
        { type: BsModalService },
        { type: ChangeDetectorRef },
        { type: ViewContainerRef },
        { type: ApplicationRef },
        { type: Injector, decorators: [{ type: Optional }] },
        { type: ComponentFactoryResolver, decorators: [{ type: Optional }] }
    ]; };
    BillTrackerComponent.propDecorators = {
        billGraph: [{ type: ViewChild, args: ["billGraph",] }],
        billGraphVCR: [{ type: ViewChild, args: ["billGraph", { read: ViewContainerRef },] }],
        mainContainerER: [{ type: ViewChild, args: ["mainContainer",] }],
        graphContainerER: [{ type: ViewChild, args: ["graphContainer",] }],
        billData: [{ type: ViewChild, args: ["billData",] }],
        billDataVCR: [{ type: ViewChild, args: ["billData", { read: ViewContainerRef },] }],
        divDataTableER: [{ type: ViewChild, args: ["divDataTable",] }],
        divDataWrapperER: [{ type: ViewChild, args: ["divDataWrapper",] }],
        billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
    };
    return BillTrackerComponent;
}());
export { BillTrackerComponent };
if (false) {
    /** @type {?} */
    BillTrackerComponent.prototype.billGraph;
    /** @type {?} */
    BillTrackerComponent.prototype.billGraphVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.mainContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.graphContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.billData;
    /** @type {?} */
    BillTrackerComponent.prototype.billDataVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataTableER;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataWrapperER;
    /** @type {?} */
    BillTrackerComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerComponent.prototype.defaultDataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.dataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.showData;
    /** @type {?} */
    BillTrackerComponent.prototype.dataFullScreen;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillDataInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.graphZoomScale;
    /** @type {?} */
    BillTrackerComponent.prototype.newBTS;
    /** @type {?} */
    BillTrackerComponent.prototype.dataInfoService;
    /** @type {?} */
    BillTrackerComponent.prototype.internalUiService;
    /** @type {?} */
    BillTrackerComponent.prototype.localeId;
    /** @type {?} */
    BillTrackerComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerComponent.prototype.notify;
    /** @type {?} */
    BillTrackerComponent.prototype.messager;
    /** @type {?} */
    BillTrackerComponent.prototype.loading;
    /** @type {?} */
    BillTrackerComponent.prototype.modal;
    /** @type {?} */
    BillTrackerComponent.prototype.cdf;
    /** @type {?} */
    BillTrackerComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerComponent.prototype.appr;
    /** @type {?} */
    BillTrackerComponent.prototype.inj;
    /** @type {?} */
    BillTrackerComponent.prototype.cfr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci9iaWxsLXRyYWNrZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBaUIsS0FBSyxFQUFFLFVBQVUsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsUSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQUMvRixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFHNUYsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQzNGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFB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QWlCOztJQTJLMUIsMkJBQUM7Q0FBQSxBQS9NRCxJQStNQztTQXRNWSxvQkFBb0I7OztJQUMvQix5Q0FDcUM7O0lBRXJDLDRDQUMrQjs7SUFFL0IsK0NBQzRDOztJQUU1QyxnREFDNkM7O0lBRTdDLHdDQUNtQzs7SUFFbkMsMkNBQzhCOztJQUU5Qiw4Q0FDMkM7O0lBRTNDLGdEQUM2Qzs7SUFFN0Msd0NBQXFCOztJQUVyQiwrQ0FDaUM7O0lBRWpDLHdEQUFnRDs7SUFDaEQsaURBQXlDOztJQUN6Qyx3Q0FBMEI7O0lBQzFCLDhDQUFnQzs7SUFDaEMsNENBQXVCOztJQUN2QixnREFBK0I7O0lBQy9CLDhDQUF1Qjs7SUFFdkIsc0NBQWdCOztJQUNoQiwrQ0FBNEM7O0lBQzVDLGlEQUFnRDs7SUFJOUMsd0NBQTBDOztJQUMxQywyQ0FBMEM7O0lBQzFDLHNDQUE0Qjs7SUFDNUIsd0NBQWdDOztJQUNoQyx1Q0FBOEI7O0lBQzlCLHFDQUE0Qjs7SUFDNUIsbUNBQTZCOztJQUM3QixtQ0FBNEI7O0lBQzVCLG9DQUEyQjs7SUFDM0IsbUNBQWdDOztJQUNoQyxtQ0FBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBJbmplY3QsIExPQ0FMRV9JRCwgQWZ0ZXJWaWV3SW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgVmlld0NvbnRhaW5lclJlZiwgT3B0aW9uYWwsIEFwcGxpY2F0aW9uUmVmLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBSZWZsZWN0aXZlSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudCB9IGZyb20gJy4uL2JpbGwtdHJhY2tlci1ncmFwaC9iaWxsLXRyYWNrZXItZ3JhcGguY29tcG9uZW50JztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEYXRhU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1kYXRhLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckFyZ3MgfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWFyZ3MnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFDb21wb25lbnQgfSBmcm9tICcuLi9iaWxsLXRyYWNrZXItZGF0YS9iaWxsLXRyYWNrZXItZGF0YS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCaWxsRGF0YUluZm8gfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbERhdGFJbmZvJztcclxuaW1wb3J0IHsgQmlsbEluZm8gfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbEluZm8nO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmLCBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWxvYWRpbmdcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbWVzc2FnZXJcIjtcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW5vdGlmeVwiO1xyXG5pbXBvcnQgeyBJUmVzaXplRXZlbnQgfSBmcm9tICdAZmFycmlzL3VpLWRyYWdnYWJsZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWRhdGEtaW5mby5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEaXJlY3Rpb24gfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWRpcmVjdGlvbic7XHJcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L0V2ZW50cyc7XHJcbmltcG9ydCB7IEJpbGxDZWxsIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvQmlsbENlbGwnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWludGVybmFsLXVpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBteEV2ZW50IH0gZnJvbSAnLi4vLi4vLi4vcmVmL214Z3JhcGgnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItYmlsbC10cmFja2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYmlsbC10cmFja2VyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9iaWxsLXRyYWNrZXIuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQmlsbFRyYWNrZXJEYXRhU2VydmljZVxyXG4gIF0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5EZWZhdWx0XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBCaWxsVHJhY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgQFZpZXdDaGlsZChcImJpbGxHcmFwaFwiKVxyXG4gIGJpbGxHcmFwaDogQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZChcImJpbGxHcmFwaFwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICBiaWxsR3JhcGhWQ1I6IFZpZXdDb250YWluZXJSZWY7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJtYWluQ29udGFpbmVyXCIpXHJcbiAgbWFpbkNvbnRhaW5lckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImdyYXBoQ29udGFpbmVyXCIpXHJcbiAgZ3JhcGhDb250YWluZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsRGF0YVwiKVxyXG4gIGJpbGxEYXRhOiBCaWxsVHJhY2tlckRhdGFDb21wb25lbnQ7XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJiaWxsRGF0YVwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICBiaWxsRGF0YVZDUjogVmlld0NvbnRhaW5lclJlZjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRpdkRhdGFUYWJsZVwiKVxyXG4gIGRpdkRhdGFUYWJsZUVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRpdkRhdGFXcmFwcGVyXCIpXHJcbiAgZGl2RGF0YVdyYXBwZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIG1vZGFsUmVmOiBCc01vZGFsUmVmO1xyXG5cclxuICBASW5wdXQoXCJiaWxsVHJhY2tlckFyZ3NcIilcclxuICBiaWxsVHJhY2tlckFyZ3M6IEJpbGxUcmFja2VyQXJncztcclxuXHJcbiAgZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0OiBudW1iZXIgfCBzdHJpbmcgPSAxODA7XHJcbiAgZGF0YVdyYXBwZXJIZWlnaHQ6IG51bWJlciB8IHN0cmluZyA9IDE4MDtcclxuICBzaG93RGF0YTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGRhdGFGdWxsU2NyZWVuOiBib29sZWFuID0gZmFsc2U7XHJcbiAgbGFzdEJpbGxJbmZvOiBCaWxsSW5mbztcclxuICBsYXN0QmlsbERhdGFJbmZvOiBCaWxsRGF0YUluZm87XHJcbiAgZ3JhcGhab29tU2NhbGU6IG51bWJlcjtcclxuXHJcbiAgbmV3QlRTOiBib29sZWFuO1xyXG4gIGRhdGFJbmZvU2VydmljZTogQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2U7XHJcbiAgaW50ZXJuYWxVaVNlcnZpY2U6IEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgYXJnczogQmlsbFRyYWNrZXJBcmdzLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHB1YmxpYyBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgcHVibGljIGRhdGFTZXJ2aWNlOiBCaWxsVHJhY2tlckRhdGFTZXJ2aWNlLFxyXG4gICAgcHVibGljIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHB1YmxpYyBtZXNzYWdlcjogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHVibGljIGxvYWRpbmc6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1vZGFsOiBCc01vZGFsU2VydmljZSxcclxuICAgIHB1YmxpYyBjZGY6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHVibGljIHZjcjogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHB1YmxpYyBhcHByOiBBcHBsaWNhdGlvblJlZixcclxuICAgIEBPcHRpb25hbCgpIHB1YmxpYyBpbmo6IEluamVjdG9yLFxyXG4gICAgQE9wdGlvbmFsKCkgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICkge1xyXG5cclxuICAgIHRoaXMuYmlsbFRyYWNrZXJBcmdzID0gYXJncztcclxuICAgIHRoaXMuZGF0YUluZm9TZXJ2aWNlID0gbmV3IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlKCk7XHJcbiAgICB0aGlzLm5ld0JUUyA9IHRoaXMuZGF0YUluZm9TZXJ2aWNlLmlzTmV3QlRTKHRoaXMuYmlsbFRyYWNrZXJBcmdzLmNhblRyYWNraW5nUmVzdWx0LmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuXHJcbiAgICBjb25zdCBpbmplY3QgPSBSZWZsZWN0aXZlSW5qZWN0b3IucmVzb2x2ZUFuZENyZWF0ZShbXHJcbiAgICAgIEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2VcclxuICAgIF0sIHRoaXMuaW5qKTtcclxuICAgIHRoaXMuaW50ZXJuYWxVaVNlcnZpY2UgPSBpbmplY3QuZ2V0KEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2UsIG51bGwpO1xyXG5cclxuICAgIHRoaXMuZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0ID0gYXJncyAmJiBhcmdzLmdyaWRPcHRpb25zICYmIGFyZ3MuZ3JpZE9wdGlvbnMuZGVmYXVsdEhlaWdodCA/IGFyZ3MuZ3JpZE9wdGlvbnMuZGVmYXVsdEhlaWdodCA6IHRoaXMuZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0O1xyXG4gICAgdGhpcy5kYXRhV3JhcHBlckhlaWdodCA9IHRoaXMuZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcblxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGFpbnRHcmFwaCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBwYWludEdyYXBoKCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGgucGFpbnQoKTtcclxuICAgIHRoaXMuZ3JhcGhab29tU2NhbGUgPSB0aGlzLmJpbGxHcmFwaC5nZXRab29tU2NhbGUoKTtcclxuICAgIHRoaXMuYmlsbEdyYXBoLmdyYXBoLnZpZXcuYWRkTGlzdGVuZXIobXhFdmVudC5TQ0FMRSwgKHNlbmRlciwgZXZ0KSA9PiB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNlbmRlciwgZXZ0KTtcclxuICAgICAgdGhpcy5ncmFwaFpvb21TY2FsZSA9IHRoaXMuYmlsbEdyYXBoLmdldFpvb21TY2FsZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RIYW5kbGVyKGNlbGwpIHtcclxuICAgIGlmIChjZWxsKSB7XHJcbiAgICAgIGNvbnN0IGJpbGxJbmZvOiBCaWxsSW5mbyA9IGNlbGwuYmlsbEluZm87XHJcbiAgICAgIGNvbnN0IGJpbGxEYXRhSW5mbzogQmlsbERhdGFJbmZvID0gY2VsbC5iaWxsRGF0YUluZm87XHJcblxyXG4gICAgICBpZiAoYmlsbEluZm8gPT0gdGhpcy5sYXN0QmlsbEluZm8gJiYgYmlsbERhdGFJbmZvID09IHRoaXMubGFzdEJpbGxEYXRhSW5mbyAmJiB0aGlzLnNob3dEYXRhID09IHRydWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmRhdGFTZXJ2aWNlLmJ1aWxkR2V0TWFpbkVudGl0eURhdGFBcmdzKGJpbGxJbmZvLCBiaWxsRGF0YUluZm8pO1xyXG4gICAgICB0aGlzLmJpbGxEYXRhLnNob3dEYXRhR3JpZChhcmdzLCBiaWxsSW5mbywgYmlsbERhdGFJbmZvLCBudWxsKTtcclxuXHJcbiAgICAgIC8vIOmHjee9rua7muWKqOadoVxyXG4gICAgICB0aGlzLmRpdkRhdGFXcmFwcGVyRVIubmF0aXZlRWxlbWVudC5zY3JvbGxUbyh7IHRvcDogMCB9KTtcclxuICAgICAgdGhpcy5zaG93RGF0YSA9IHRydWU7XHJcbiAgICAgIHRoaXMubGFzdEJpbGxJbmZvID0gYmlsbEluZm87XHJcbiAgICAgIHRoaXMubGFzdEJpbGxEYXRhSW5mbyA9IGJpbGxEYXRhSW5mbztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYmlsbERhdGEuY2xlYXJEYXRhUmVnaW9uKCk7XHJcbiAgICAgIHRoaXMuc2hvd0RhdGEgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRlQ2hhbmdlSGFuZGxlcihldnQ6IHtcclxuICAgIHR5cGU6IGFueSxcclxuICAgIGRhdGE/OiBhbnlcclxuICB9KSB7XHJcbiAgICBpZiAoZXZ0LnR5cGUgPT0gRXZlbnRzLkNMSUNLX0ZJUlNUX1NVTU1BUlkpIHtcclxuICAgICAgdGhpcy5vcGVuQmlsbERldGFpbChldnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRNb2RhbFJlZihtb2RhbFJlZjogQnNNb2RhbFJlZikge1xyXG4gICAgdGhpcy5tb2RhbFJlZiA9IG1vZGFsUmVmO1xyXG5cclxuICAgIGlmICh0aGlzLmJpbGxHcmFwaCAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuYmlsbEdyYXBoLnNldE1vZGFsUmVmKG1vZGFsUmVmKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0R3JhcGhIZWlnaHQoZXZ0OiBJUmVzaXplRXZlbnQpIHtcclxuICAgIChldnQuaG9zdCBhcyBIVE1MRWxlbWVudCkuc3R5bGUudG9wID0gJyc7XHJcbiAgICAoZXZ0Lmhvc3QgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIHRoaXMuZ3JhcGhDb250YWluZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMubWFpbkNvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gZXZ0LnNpemUuaGVpZ2h0fXB4YDtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmJpbGxHcmFwaC5yZWZyZXNoKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGV4cGFuZERhdGFSZWdpb24oKSB7XHJcbiAgICB0aGlzLmRhdGFGdWxsU2NyZWVuID0gdHJ1ZTtcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICcwJztcclxuICB9XHJcblxyXG4gIGNvbGxhcHNlRGF0YVJlZ2lvbigpIHtcclxuICAgIHRoaXMuZGF0YUZ1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuZGF0YVdyYXBwZXJIZWlnaHQgPSB0aGlzLmRlZmF1bHREYXRhV3JhcHBlckhlaWdodDtcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVdyYXBwZXJIZWlnaHQgKyBcInB4XCI7XHJcbiAgICB0aGlzLmRpdkRhdGFXcmFwcGVyRVIubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgb25SelJlc2l6ZWQoZXZ0OiBJUmVzaXplRXZlbnQpIHtcclxuICAgIGlmIChldnQucG9zaXRpb24udG9wIDwgMCkge1xyXG4gICAgICB0aGlzLmRpdkRhdGFXcmFwcGVyRVIubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAnMCc7XHJcbiAgICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgdGhpcy5kYXRhRnVsbFNjcmVlbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBncmFwaFpvb21JbigpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnpvb21JbigpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhab29tT3V0KCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguem9vbU91dCgpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhab29tQWN0dWFsKCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguem9vbUFjdHVhbCgpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhQcmludCgpIHtcclxuICAgIHRoaXMuYmlsbEdyYXBoLnByaW50KCk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZChkaXJlY3Rpb246IEJpbGxUcmFja2VyRGlyZWN0aW9uLCBhbGw6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguZXhwYW5kKGRpcmVjdGlvbiwgYWxsKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kVXBBbGwoKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kVXAoKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBncmFwaEV4cGFuZERvd24oKSB7XHJcbiAgICB0aGlzLmdyYXBoRXhwYW5kKEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24sIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kRG93bkFsbCgpIHtcclxuICAgIHRoaXMuZ3JhcGhFeHBhbmQoQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93biwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBvcGVuQmlsbERldGFpbChjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgdGhpcy5pbnRlcm5hbFVpU2VydmljZS5vcGVuQmlsbERldGFpbChjZWxsLmJpbGxJbmZvLCBjZWxsLmJpbGxEYXRhSW5mbyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==