/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/basic-table/basic-table.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewContainerRef, Injector, ComponentFactoryResolver, ViewChild, TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef } from "@angular/core";
import { DataType, BpmnModelJsonHelper } from '@edp-aif/common-api';
import { BillTrackingSettings, BillTrackingDataShownMode } from "@edp-bif/common-api";
import { BillFrontField } from './BillFrontField';
import { BillFrontDataRow } from './BillFrontDataRow';
var BasicTableComponent = /** @class */ (function () {
    function BasicTableComponent(viewContainerRef, inj, cfr, cdr) {
        this.viewContainerRef = viewContainerRef;
        this.inj = inj;
        this.cfr = cfr;
        this.cdr = cdr;
    }
    /**
     * @return {?}
     */
    BasicTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} item
     * @param {?} evt
     * @return {?}
     */
    BasicTableComponent.prototype.clickHandler = /**
     * @param {?} item
     * @param {?} evt
     * @return {?}
     */
    function (item, evt) {
        item['expanded'] = !item['expanded'];
    };
    /**
     * @param {?} res
     * @return {?}
     */
    BasicTableComponent.prototype.showMainTable = /**
     * @param {?} res
     * @return {?}
     */
    function (res) {
        this.showTable(res.billSchema.mainTable, res.billData.mainTable);
    };
    /**
     * @param {?} schemaTable
     * @param {?} dataTable
     * @return {?}
     */
    BasicTableComponent.prototype.showTable = /**
     * @param {?} schemaTable
     * @param {?} dataTable
     * @return {?}
     */
    function (schemaTable, dataTable) {
        this.billSchemaTable = schemaTable;
        this.billDataTable = dataTable;
        this.loadData(schemaTable.getFieldList(), dataTable.GetRowList());
        this.cdr.detectChanges();
    };
    /**
     * @param {?} billSchemaFields
     * @param {?} billDataRows
     * @return {?}
     */
    BasicTableComponent.prototype.loadData = /**
     * @param {?} billSchemaFields
     * @param {?} billDataRows
     * @return {?}
     */
    function (billSchemaFields, billDataRows) {
        this.fields = billSchemaFields;
        this.rows = billDataRows;
        /** @type {?} */
        var bts = new BillTrackingSettings();
        if (this.billInfo && this.billInfo.billTrackingSettings) {
            bts.LoadFromJson(this.billInfo.billTrackingSettings);
        }
        if (bts.billTrackingDataShownMode == BillTrackingDataShownMode.CUSTOMFIELD) {
            this.ffields = this.extractFFieldsWithCustomFields(billSchemaFields, bts.customFieldContent);
            this.frows = this.extractFRows(billDataRows, this.ffields);
        }
        else {
            this.ffields = this.extractFFields(billSchemaFields);
            this.frows = this.extractFRows(billDataRows, this.ffields);
        }
    };
    /**
     * 默认展示方式
     * @param fields
     */
    /**
     * 默认展示方式
     * @private
     * @param {?} fields
     * @return {?}
     */
    BasicTableComponent.prototype.extractFFields = /**
     * 默认展示方式
     * @private
     * @param {?} fields
     * @return {?}
     */
    function (fields) {
        var e_1, _a;
        /** @type {?} */
        var ffields = [];
        try {
            for (var fields_1 = tslib_1.__values(fields), fields_1_1 = fields_1.next(); !fields_1_1.done; fields_1_1 = fields_1.next()) {
                var field = fields_1_1.value;
                //枚举或者枚举型单值UDT时默认取Name
                if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                    /** @type {?} */
                    var ff = new BillFrontField();
                    ff.fieldName = field.fieldName;
                    ff.dataType = field.dataType;
                    ff.caption = field.caption;
                    ff.fieldType = field.fieldType;
                    ff.length = field.length;
                    ff.precision = field.precision;
                    ff.scale = field.scale;
                    ff.captionPath = this.extractCaptionPath(field);
                    ff.fieldPath = this.extractFieldPath(field) + ".Name";
                    ffields.push(ff);
                }
                else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                    ffields.push.apply(ffields, tslib_1.__spread(this.extractFSubFields(field.GetSubFieldList())));
                }
                else {
                    /** @type {?} */
                    var ff = new BillFrontField();
                    ff.fieldName = field.fieldName;
                    ff.dataType = field.dataType;
                    ff.caption = field.caption;
                    ff.fieldType = field.fieldType;
                    ff.length = field.length;
                    ff.precision = field.precision;
                    ff.scale = field.scale;
                    ff.captionPath = this.extractCaptionPath(field);
                    ff.fieldPath = this.extractFieldPath(field);
                    ffields.push(ff);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (fields_1_1 && !fields_1_1.done && (_a = fields_1.return)) _a.call(fields_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return ffields;
    };
    /**
     * @private
     * @param {?} fields
     * @param {?=} parentField
     * @return {?}
     */
    BasicTableComponent.prototype.extractFSubFields = /**
     * @private
     * @param {?} fields
     * @param {?=} parentField
     * @return {?}
     */
    function (fields, parentField) {
        var e_2, _a;
        /** @type {?} */
        var ffields = [];
        try {
            for (var fields_2 = tslib_1.__values(fields), fields_2_1 = fields_2.next(); !fields_2_1.done; fields_2_1 = fields_2.next()) {
                var field = fields_2_1.value;
                //枚举或者枚举型单值UDT时默认取Name
                if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                    /** @type {?} */
                    var ff = new BillFrontField();
                    ff.fieldName = field.fieldName;
                    ff.dataType = field.dataType;
                    ff.caption = field.caption;
                    ff.fieldType = field.fieldType;
                    ff.length = field.length;
                    ff.precision = field.precision;
                    ff.scale = field.scale;
                    ff.captionPath = this.extractCaptionPath(field);
                    ff.fieldPath = this.extractFieldPath(field) + ".Name";
                    ffields.push(ff);
                }
                else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                    ffields.push.apply(ffields, tslib_1.__spread(this.extractFSubFields(field.GetSubFieldList())));
                }
                else {
                    /** @type {?} */
                    var ff = new BillFrontField();
                    ff.fieldName = field.fieldName;
                    ff.dataType = field.dataType;
                    ff.caption = field.caption;
                    ff.fieldType = field.fieldType;
                    ff.length = field.length;
                    ff.precision = field.precision;
                    ff.scale = field.scale;
                    ff.captionPath = this.extractCaptionPath(field);
                    ff.fieldPath = this.extractFieldPath(field);
                    ffields.push(ff);
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (fields_2_1 && !fields_2_1.done && (_a = fields_2.return)) _a.call(fields_2);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return ffields;
    };
    /**
     * 自定义字段展示方式
     */
    /**
     * 自定义字段展示方式
     * @private
     * @param {?} fields
     * @param {?} fieldContent
     * @return {?}
     */
    BasicTableComponent.prototype.extractFFieldsWithCustomFields = /**
     * 自定义字段展示方式
     * @private
     * @param {?} fields
     * @param {?} fieldContent
     * @return {?}
     */
    function (fields, fieldContent) {
        var e_3, _a;
        // 表code
        /** @type {?} */
        var tableCode = this.billSchemaTable.tableName;
        // 单据追踪配置
        /** @type {?} */
        var bts = new BillTrackingSettings();
        if (this.billInfo && this.billInfo.billTrackingSettings) {
            bts.LoadFromJson(this.billInfo.billTrackingSettings);
        }
        /** @type {?} */
        var fieldConfig = typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent);
        /** @type {?} */
        var ffields = [];
        var _loop_1 = function (field) {
            // 字段ID
            /** @type {?} */
            var fieldPath = this_1.extractFieldPath(field);
            /** @type {?} */
            var sf = null;
            for (var k in fieldConfig.schema) {
                if (k == 'selectedAll') {
                    continue;
                }
                if (k == tableCode) {
                    /** @type {?} */
                    var s = fieldConfig.schema[k];
                    sf = s && s.fields.find((/**
                     * @param {?} elt
                     * @return {?}
                     */
                    function (elt) { return elt.fieldPath == fieldPath; }));
                    break;
                }
            }
            if (sf == null) {
                return "continue";
            }
            //枚举或者枚举型单值UDT时默认取Name
            if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                /** @type {?} */
                var ff = new BillFrontField();
                ff.fieldName = field.fieldName;
                ff.dataType = field.dataType;
                ff.caption = field.caption;
                ff.fieldType = field.fieldType;
                ff.length = field.length;
                ff.precision = field.precision;
                ff.scale = field.scale;
                ff.captionPath = sf.displayName || field.caption;
                ff.fieldPath = this_1.extractFieldPath(field) + ".Name";
                ffields.push(ff);
            }
            else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                ffields.push.apply(ffields, tslib_1.__spread(this_1.extractFSubFieldsWithCustomFields(field.GetSubFieldList(), fieldContent, field)));
            }
            else {
                /** @type {?} */
                var ff = new BillFrontField();
                ff.fieldName = field.fieldName;
                ff.dataType = field.dataType;
                ff.caption = field.caption;
                ff.fieldType = field.fieldType;
                ff.length = field.length;
                ff.precision = field.precision;
                ff.scale = field.scale;
                ff.captionPath = sf.displayName || field.caption;
                ff.fieldPath = this_1.extractFieldPath(field);
                ffields.push(ff);
            }
        };
        var this_1 = this;
        try {
            for (var fields_3 = tslib_1.__values(fields), fields_3_1 = fields_3.next(); !fields_3_1.done; fields_3_1 = fields_3.next()) {
                var field = fields_3_1.value;
                _loop_1(field);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (fields_3_1 && !fields_3_1.done && (_a = fields_3.return)) _a.call(fields_3);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return ffields;
    };
    /**
     * @private
     * @param {?} fields
     * @param {?} fieldContent
     * @param {?=} parentField
     * @return {?}
     */
    BasicTableComponent.prototype.extractFSubFieldsWithCustomFields = /**
     * @private
     * @param {?} fields
     * @param {?} fieldContent
     * @param {?=} parentField
     * @return {?}
     */
    function (fields, fieldContent, parentField) {
        var e_4, _a;
        // 表编号
        /** @type {?} */
        var tableCode = this.billSchemaTable.tableName;
        // 单据追踪配置
        /** @type {?} */
        var bts = new BillTrackingSettings();
        if (this.billInfo && this.billInfo.billTrackingSettings) {
            bts.LoadFromJson(this.billInfo.billTrackingSettings);
        }
        /** @type {?} */
        var fieldConfig = typeof fieldContent == "object" ? fieldContent : JSON.parse(fieldContent);
        /** @type {?} */
        var ffields = [];
        var _loop_2 = function (field) {
            // 字段ID
            /** @type {?} */
            var fieldPath = this_2.extractFieldPath(field);
            /** @type {?} */
            var sf = null;
            for (var k in fieldConfig.schema) {
                if (k == 'selectedAll') {
                    continue;
                }
                if (k == tableCode) {
                    /** @type {?} */
                    var s = fieldConfig.schema[k];
                    sf = s && s.fields.find((/**
                     * @param {?} elt
                     * @return {?}
                     */
                    function (elt) { return elt.fieldPath == fieldPath; }));
                    break;
                }
            }
            if (sf == null) {
                return "continue";
            }
            //枚举或者枚举型单值UDT时默认取Name
            if (field.fieldType == "Enum" || field.fieldType == "EnumSingleUdt") {
                /** @type {?} */
                var ff = new BillFrontField();
                ff.fieldName = field.fieldName;
                ff.dataType = field.dataType;
                ff.caption = field.caption;
                ff.fieldType = field.fieldType;
                ff.length = field.length;
                ff.precision = field.precision;
                ff.scale = field.scale;
                ff.captionPath = sf.displayName || field.caption;
                ff.fieldPath = this_2.extractFieldPath(field) + ".Name";
                ffields.push(ff);
            }
            else if (field.GetSubFieldList() != null && field.GetSubFieldList().length > 0) {
                ffields.push.apply(ffields, tslib_1.__spread(this_2.extractFSubFieldsWithCustomFields(field.GetSubFieldList(), fieldContent, field)));
            }
            else {
                /** @type {?} */
                var ff = new BillFrontField();
                ff.fieldName = field.fieldName;
                ff.dataType = field.dataType;
                ff.caption = field.caption;
                ff.fieldType = field.fieldType;
                ff.length = field.length;
                ff.precision = field.precision;
                ff.scale = field.scale;
                ff.captionPath = sf.displayName || field.caption;
                ff.fieldPath = this_2.extractFieldPath(field);
                ffields.push(ff);
            }
        };
        var this_2 = this;
        try {
            for (var fields_4 = tslib_1.__values(fields), fields_4_1 = fields_4.next(); !fields_4_1.done; fields_4_1 = fields_4.next()) {
                var field = fields_4_1.value;
                _loop_2(field);
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (fields_4_1 && !fields_4_1.done && (_a = fields_4.return)) _a.call(fields_4);
            }
            finally { if (e_4) throw e_4.error; }
        }
        return ffields;
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    BasicTableComponent.prototype.extractCaptionPath = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        /** @type {?} */
        var s = field.caption;
        /** @type {?} */
        var tmp = (/** @type {?} */ (field));
        while (tmp.attachedField != null) {
            s = tmp.attachedField.caption + "." + s;
            tmp = (/** @type {?} */ (tmp.attachedField));
        }
        return s;
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    BasicTableComponent.prototype.extractFieldPath = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        /** @type {?} */
        var s = field.fieldName;
        /** @type {?} */
        var tmp = (/** @type {?} */ (field));
        while (tmp.attachedField != null) {
            s = tmp.attachedField.fieldName + "." + s;
            tmp = (/** @type {?} */ (tmp.attachedField));
        }
        return s;
    };
    /**
     * @private
     * @param {?} rows
     * @param {?} ffields
     * @return {?}
     */
    BasicTableComponent.prototype.extractFRows = /**
     * @private
     * @param {?} rows
     * @param {?} ffields
     * @return {?}
     */
    function (rows, ffields) {
        var e_5, _a, e_6, _b;
        /** @type {?} */
        var frows = [];
        try {
            for (var rows_1 = tslib_1.__values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {
                var row = rows_1_1.value;
                /** @type {?} */
                var fr = new BillFrontDataRow();
                fr.expanded = row.GetChildTableList().length == 0 ? null : row.attachedTable && row.attachedTable.attachedRow == null ? true : false;
                fr.hasChildren = this.hasChildren(row);
                fr.data = {};
                try {
                    for (var ffields_1 = tslib_1.__values(ffields), ffields_1_1 = ffields_1.next(); !ffields_1_1.done; ffields_1_1 = ffields_1.next()) {
                        var ff = ffields_1_1.value;
                        fr.data[ff.fieldPath] = this.extractFieldPathValue(row.GetFieldMap(), ff.fieldPath);
                    }
                }
                catch (e_6_1) { e_6 = { error: e_6_1 }; }
                finally {
                    try {
                        if (ffields_1_1 && !ffields_1_1.done && (_b = ffields_1.return)) _b.call(ffields_1);
                    }
                    finally { if (e_6) throw e_6.error; }
                }
                frows.push(fr);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);
            }
            finally { if (e_5) throw e_5.error; }
        }
        return frows;
    };
    /**
     * @param {?} row
     * @return {?}
     */
    BasicTableComponent.prototype.hasChildren = /**
     * @param {?} row
     * @return {?}
     */
    function (row) {
        var e_7, _a;
        /** @type {?} */
        var flag = row.GetChildTableList() && row.GetChildTableList().length > 0;
        if (flag) {
            /** @type {?} */
            var cf = false;
            try {
                for (var _b = tslib_1.__values(row.GetChildTableList()), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var ct = _c.value;
                    if (ct.GetRowList() && ct.GetRowList().length > 0) {
                        cf = true;
                        break;
                    }
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_7) throw e_7.error; }
            }
            flag = cf;
        }
        return flag;
    };
    /**
     * @param {?} billDataFieldMap
     * @param {?} fieldPath
     * @return {?}
     */
    BasicTableComponent.prototype.extractFieldPathValue = /**
     * @param {?} billDataFieldMap
     * @param {?} fieldPath
     * @return {?}
     */
    function (billDataFieldMap, fieldPath) {
        /** @type {?} */
        var fields = fieldPath.split(".");
        /** @type {?} */
        var bdf = billDataFieldMap[fields[0]];
        for (var i = 1; bdf != null && i < fields.length; i++) {
            /** @type {?} */
            var temp = bdf.GetSubFieldMap();
            if (temp == null) {
                break;
            }
            bdf = temp[fields[i]];
        }
        return bdf ? bdf.GetTextValue() : "";
    };
    /**
     * @param {?} obj
     * @param {?} ffield
     * @return {?}
     */
    BasicTableComponent.prototype.getShownText = /**
     * @param {?} obj
     * @param {?} ffield
     * @return {?}
     */
    function (obj, ffield) {
        if (obj[ffield.fieldPath] == null) {
            return "";
        }
        if (ffield.dataType == DataType.String) {
            return obj[ffield.fieldPath] || "";
        }
        else if (ffield.dataType == DataType.Decimal) {
            /** @type {?} */
            var dec = parseFloat(String(obj[ffield.fieldPath])).toFixed(ffield.scale).toString();
            return dec || "";
        }
        else if (ffield.dataType == DataType.DateTime) {
            /** @type {?} */
            var date = BpmnModelJsonHelper.DateTimeFromString(obj[ffield.fieldPath]);
            if (ffield.fieldType == "DateTime") {
                return this.dateFormat(date, "yyyy-MM-dd HH:mm:ss.SSS");
            }
            else if (ffield.fieldType == "Date") {
                return this.dateFormat(date, "yyyy-MM-dd");
            }
            else {
                return this.dateFormat(date, "yyyy-MM-dd");
            }
        }
        else {
            return obj[ffield.fieldPath] || "";
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BasicTableComponent.prototype.isObject = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return typeof (obj) == "object";
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BasicTableComponent.prototype.isArray = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return Array.isArray(obj);
    };
    /**
     * @private
     * @param {?} date
     * @param {?} fmt
     * @return {?}
     */
    BasicTableComponent.prototype.dateFormat = /**
     * @private
     * @param {?} date
     * @param {?} fmt
     * @return {?}
     */
    function (date, fmt) {
        /** @type {?} */
        var ret;
        /** @type {?} */
        var opt = {
            "y+": date.getUTCFullYear().toString(),
            // 年
            "M+": (date.getUTCMonth() + 1).toString(),
            // 月
            "d+": date.getUTCDate().toString(),
            // 日
            "H+": date.getUTCHours().toString(),
            // 时
            "m+": date.getUTCMinutes().toString(),
            // 分
            "s+": date.getUTCSeconds().toString(),
            // 秒
            "S+": date.getUTCMilliseconds().toString(),
        };
        for (var k in opt) {
            ret = new RegExp("(" + k + ")").exec(fmt);
            if (ret) {
                if (!String.prototype.padStart) {
                    fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (this.myPadStart(opt[k], ret[1].length, "0")));
                }
                else {
                    fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")));
                }
            }
        }
        return fmt;
    };
    /**
     * @private
     * @param {?} src
     * @param {?} targetLength
     * @param {?} padString
     * @return {?}
     */
    BasicTableComponent.prototype.myPadStart = /**
     * @private
     * @param {?} src
     * @param {?} targetLength
     * @param {?} padString
     * @return {?}
     */
    function (src, targetLength, padString) {
        targetLength = targetLength >> 0; //floor if number or convert non-number to 0;
        padString = String(typeof padString !== 'undefined' ? padString : ' ');
        if (src.length > targetLength) {
            return String(src);
        }
        else {
            targetLength = targetLength - src.length;
            if (targetLength > padString.length) {
                padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
            }
            return padString.slice(0, targetLength) + String(src);
        }
    };
    BasicTableComponent.decorators = [
        { type: Component, args: [{
                    selector: "app-basic-table",
                    template: "<table class=\"table table-striped table-hover text-nowrap\" [ngStyle]=\"{'margin-left': isMain ? null : '24px'}\"\r\n    style=\"min-width: 100%; width: auto;\" *ngIf=\"ffields && ffields.length > 0 && frows && frows.length > 0\">\r\n    <thead class=\"thead-light\">\r\n        <tr>\r\n            <th style=\"width: 40px;\"><span></span></th>\r\n            <th *ngFor=\"let ffield of ffields\">\r\n                <span>{{ffield.captionPath}}</span>\r\n            </th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <ng-container *ngFor=\"let frow of frows;let rowIdx = index;\">\r\n            <tr #tr>\r\n                <td>\r\n                    <span *ngIf=\"frow.hasChildren\" style=\"cursor:pointer;\" (click)=\"clickHandler(frow, $event)\"\r\n                        [ngClass]=\"{'k-icon': true, 'k-i-plus-outline': !frow.expanded, 'k-i-minus-outline': frow.expanded}\"></span>\r\n                </td>\r\n                <ng-container *ngFor=\"let ffield of ffields\">\r\n                    <td>\r\n                        <span>{{getShownText(frow.data, ffield)}}</span>\r\n                        <span *ngIf=\"ffield.showMore\" class=\"f-icon f-icon-more\"></span>\r\n                    </td>\r\n                </ng-container>\r\n            </tr>\r\n            <tr *ngIf=\"frow.expanded&&frow.hasChildren\">\r\n                <td [attr.colspan]=\"tr.cells.length\">\r\n                    <ng-container appChildRowTable [parentRow]=\"rows[rowIdx]\" [parentSchemaTable]=\"billSchemaTable\"\r\n                        [parentDataTable]=\"billDataTable\" [billInfo]=\"billInfo\" [expanded]=\"frow.expanded\"\r\n                        [colspan]=\"tr.cells.length\">\r\n                    </ng-container>\r\n                </td>\r\n            </tr>\r\n        </ng-container>\r\n    </tbody>\r\n    <tfoot>\r\n    </tfoot>\r\n</table>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["./basic-table.component.css"]
                }] }
    ];
    /** @nocollapse */
    BasicTableComponent.ctorParameters = function () { return [
        { type: ViewContainerRef },
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ChangeDetectorRef }
    ]; };
    BasicTableComponent.propDecorators = {
        childTrTable: [{ type: ViewChild, args: ["childTrTable",] }],
        childTrTableVCR: [{ type: ViewChild, args: ["childTrTable", { read: ViewContainerRef },] }]
    };
    return BasicTableComponent;
}());
export { BasicTableComponent };
if (false) {
    /** @type {?} */
    BasicTableComponent.prototype.billInfo;
    /** @type {?} */
    BasicTableComponent.prototype.isMain;
    /** @type {?} */
    BasicTableComponent.prototype.billSchemaTable;
    /** @type {?} */
    BasicTableComponent.prototype.billDataTable;
    /** @type {?} */
    BasicTableComponent.prototype.fields;
    /** @type {?} */
    BasicTableComponent.prototype.rows;
    /** @type {?} */
    BasicTableComponent.prototype.ffields;
    /** @type {?} */
    BasicTableComponent.prototype.frows;
    /** @type {?} */
    BasicTableComponent.prototype.childTrTable;
    /** @type {?} */
    BasicTableComponent.prototype.childTrTableVCR;
    /** @type {?} */
    BasicTableComponent.prototype.viewContainerRef;
    /** @type {?} */
    BasicTableComponent.prototype.inj;
    /** @type {?} */
    BasicTableComponent.prototype.cfr;
    /** @type {?} */
    BasicTableComponent.prototype.cdr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVkcC1iaWYvcnVudGltZS1hcGkvIiwic291cmNlcyI6WyJsaWIvYmlsbC10cmFja2VyL2NvbXBvbmVudHMvYmFzaWMtdGFibGUvYmFzaWMtdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUssT0FBTyxFQUFxSCxRQUFRLEVBQUUsbUJBQW1CLEVBQXVCLE1BQU0scUJBQXFCLENBQUM7QUFDNU0sT0FBTyxFQUFFLG9CQUFvQixFQUFFLHlCQUF5QixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBSXREO0lBeUJJLDZCQUNXLGdCQUFrQyxFQUNsQyxHQUFhLEVBQ2IsR0FBNkIsRUFDN0IsR0FBc0I7UUFIdEIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxRQUFHLEdBQUgsR0FBRyxDQUFVO1FBQ2IsUUFBRyxHQUFILEdBQUcsQ0FBMEI7UUFDN0IsUUFBRyxHQUFILEdBQUcsQ0FBbUI7SUFFakMsQ0FBQzs7OztJQUVELHNDQUFROzs7SUFBUjtJQUVBLENBQUM7Ozs7OztJQUVELDBDQUFZOzs7OztJQUFaLFVBQWEsSUFBeUMsRUFBRSxHQUFVO1FBQzlELElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN6QyxDQUFDOzs7OztJQUVELDJDQUFhOzs7O0lBQWIsVUFBYyxHQUFxQjtRQUMvQixJQUFJLENBQUMsU0FB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Q0FBZ0I7O0lBRWhCLDhDQUFpQzs7SUFDakMsNENBQTZCOztJQUU3QixxQ0FBMEI7O0lBQzFCLG1DQUFvQjs7SUFFcEIsc0NBQTBCOztJQUMxQixvQ0FBMEI7O0lBRTFCLDJDQUMrQjs7SUFFL0IsOENBQ2tDOztJQUc5QiwrQ0FBeUM7O0lBQ3pDLGtDQUFvQjs7SUFDcEIsa0NBQW9DOztJQUNwQyxrQ0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NvbnRhaW5lclJlZiwgSW5qZWN0b3IsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQmlsbFNjaGVtYUZpZWxkLCBCaWxsRGF0YVRhYmxlLCBCaWxsRGF0YVJvdywgQmlsbERhdGFGaWVsZCwgQmlsbFNjaGVtYVRhYmxlLCBCaWxsU2NoZW1hU3ViRmllbGQsIEJpbGxEYXRhU3ViRmllbGQsIERhdGFUeXBlLCBCcG1uTW9kZWxKc29uSGVscGVyLCBCaWxsU2NoZW1hRmllbGRCYXNlIH0gZnJvbSAnQGVkcC1haWYvY29tbW9uLWFwaSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2luZ1NldHRpbmdzLCBCaWxsVHJhY2tpbmdEYXRhU2hvd25Nb2RlIH0gZnJvbSBcIkBlZHAtYmlmL2NvbW1vbi1hcGlcIjtcclxuaW1wb3J0IHsgQmlsbEZyb250RmllbGQgfSBmcm9tICcuL0JpbGxGcm9udEZpZWxkJztcclxuaW1wb3J0IHsgQmlsbEZyb250RGF0YVJvdyB9IGZyb20gJy4vQmlsbEZyb250RGF0YVJvdyc7XHJcbmltcG9ydCB7IEVudGl0eURhdGFSZXN1bHQgfSBmcm9tICcuLi8uLi9hcmdzL0VudGl0eURhdGFSZXN1bHQnO1xyXG5pbXBvcnQgeyBCaWxsSW5mbyB9IGZyb20gJy4uLy4uLy4uL2VudGl0eS90cmFja2luZy9CaWxsSW5mbyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImFwcC1iYXNpYy10YWJsZVwiLFxyXG4gICAgc3R5bGVzOiBbXCIuL2Jhc2ljLXRhYmxlLmNvbXBvbmVudC5jc3NcIl0sXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIuL2Jhc2ljLXRhYmxlLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmFzaWNUYWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBiaWxsSW5mbzogQmlsbEluZm87XHJcbiAgICBpc01haW46IGJvb2xlYW47XHJcblxyXG4gICAgYmlsbFNjaGVtYVRhYmxlOiBCaWxsU2NoZW1hVGFibGU7XHJcbiAgICBiaWxsRGF0YVRhYmxlOiBCaWxsRGF0YVRhYmxlO1xyXG5cclxuICAgIGZpZWxkczogQmlsbFNjaGVtYUZpZWxkW107XHJcbiAgICByb3dzOiBCaWxsRGF0YVJvd1tdO1xyXG5cclxuICAgIGZmaWVsZHM6IEJpbGxGcm9udEZpZWxkW107XHJcbiAgICBmcm93czogQmlsbEZyb250RGF0YVJvd1tdO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoXCJjaGlsZFRyVGFibGVcIilcclxuICAgIGNoaWxkVHJUYWJsZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICBAVmlld0NoaWxkKFwiY2hpbGRUclRhYmxlXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgY2hpbGRUclRhYmxlVkNSOiBWaWV3Q29udGFpbmVyUmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB2aWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgICAgIHB1YmxpYyBpbmo6IEluamVjdG9yLFxyXG4gICAgICAgIHB1YmxpYyBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgICAgICBwdWJsaWMgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICkge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjbGlja0hhbmRsZXIoaXRlbTogeyByb3dEYXRhOiBhbnksIGV4cGFuZGVkOiBib29sZWFuIH0sIGV2dDogRXZlbnQpIHtcclxuICAgICAgICBpdGVtWydleHBhbmRlZCddID0gIWl0ZW1bJ2V4cGFuZGVkJ107XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd01haW5UYWJsZShyZXM6IEVudGl0eURhdGFSZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnNob3dUYWJsZShyZXMuYmlsbFNjaGVtYS5tYWluVGFibGUsIHJlcy5iaWxsRGF0YS5tYWluVGFibGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dUYWJsZShzY2hlbWFUYWJsZTogQmlsbFNjaGVtYVRhYmxlLCBkYXRhVGFibGU6IEJpbGxEYXRhVGFibGUpIHtcclxuICAgICAgICB0aGlzLmJpbGxTY2hlbWFUYWJsZSA9IHNjaGVtYVRhYmxlO1xyXG4gICAgICAgIHRoaXMuYmlsbERhdGFUYWJsZSA9IGRhdGFUYWJsZTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShzY2hlbWFUYWJsZS5nZXRGaWVsZExpc3QoKSwgZGF0YVRhYmxlLkdldFJvd0xpc3QoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YShiaWxsU2NoZW1hRmllbGRzOiBCaWxsU2NoZW1hRmllbGRbXSwgYmlsbERhdGFSb3dzOiBCaWxsRGF0YVJvd1tdKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMgPSBiaWxsU2NoZW1hRmllbGRzO1xyXG4gICAgICAgIHRoaXMucm93cyA9IGJpbGxEYXRhUm93cztcclxuXHJcbiAgICAgICAgbGV0IGJ0cyA9IG5ldyBCaWxsVHJhY2tpbmdTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICh0aGlzLmJpbGxJbmZvICYmIHRoaXMuYmlsbEluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgYnRzLkxvYWRGcm9tSnNvbih0aGlzLmJpbGxJbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJ0cy5iaWxsVHJhY2tpbmdEYXRhU2hvd25Nb2RlID09IEJpbGxUcmFja2luZ0RhdGFTaG93bk1vZGUuQ1VTVE9NRklFTEQpIHtcclxuICAgICAgICAgICAgdGhpcy5mZmllbGRzID0gdGhpcy5leHRyYWN0RkZpZWxkc1dpdGhDdXN0b21GaWVsZHMoYmlsbFNjaGVtYUZpZWxkcywgYnRzLmN1c3RvbUZpZWxkQ29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvd3MgPSB0aGlzLmV4dHJhY3RGUm93cyhiaWxsRGF0YVJvd3MsIHRoaXMuZmZpZWxkcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mZmllbGRzID0gdGhpcy5leHRyYWN0RkZpZWxkcyhiaWxsU2NoZW1hRmllbGRzKTtcclxuICAgICAgICAgICAgdGhpcy5mcm93cyA9IHRoaXMuZXh0cmFjdEZSb3dzKGJpbGxEYXRhUm93cywgdGhpcy5mZmllbGRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6buY6K6k5bGV56S65pa55byPXHJcbiAgICAgKiBAcGFyYW0gZmllbGRzIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4dHJhY3RGRmllbGRzKGZpZWxkczogQmlsbFNjaGVtYUZpZWxkW10pOiBCaWxsRnJvbnRGaWVsZFtdIHtcclxuICAgICAgICBsZXQgZmZpZWxkczogQmlsbEZyb250RmllbGRbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGZpZWxkIG9mIGZpZWxkcykge1xyXG4gICAgICAgICAgICAvL+aemuS4vuaIluiAheaemuS4vuWei+WNleWAvFVEVOaXtum7mOiupOWPlk5hbWVcclxuICAgICAgICAgICAgaWYgKGZpZWxkLmZpZWxkVHlwZSA9PSBcIkVudW1cIiB8fCBmaWVsZC5maWVsZFR5cGUgPT0gXCJFbnVtU2luZ2xlVWR0XCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBCaWxsRnJvbnRGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGROYW1lID0gZmllbGQuZmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgZmYuZGF0YVR5cGUgPSBmaWVsZC5kYXRhVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb24gPSBmaWVsZC5jYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRUeXBlID0gZmllbGQuZmllbGRUeXBlO1xyXG4gICAgICAgICAgICAgICAgZmYubGVuZ3RoID0gZmllbGQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZmYucHJlY2lzaW9uID0gZmllbGQucHJlY2lzaW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuc2NhbGUgPSBmaWVsZC5zY2FsZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb25QYXRoID0gdGhpcy5leHRyYWN0Q2FwdGlvblBhdGgoZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRQYXRoID0gdGhpcy5leHRyYWN0RmllbGRQYXRoKGZpZWxkKSArIFwiLk5hbWVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBmZmllbGRzLnB1c2goZmYpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLkdldFN1YkZpZWxkTGlzdCgpICE9IG51bGwgJiYgZmllbGQuR2V0U3ViRmllbGRMaXN0KCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZmZpZWxkcy5wdXNoKC4uLnRoaXMuZXh0cmFjdEZTdWJGaWVsZHMoZmllbGQuR2V0U3ViRmllbGRMaXN0KCkpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBCaWxsRnJvbnRGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGROYW1lID0gZmllbGQuZmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgZmYuZGF0YVR5cGUgPSBmaWVsZC5kYXRhVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb24gPSBmaWVsZC5jYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRUeXBlID0gZmllbGQuZmllbGRUeXBlO1xyXG4gICAgICAgICAgICAgICAgZmYubGVuZ3RoID0gZmllbGQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZmYucHJlY2lzaW9uID0gZmllbGQucHJlY2lzaW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuc2NhbGUgPSBmaWVsZC5zY2FsZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb25QYXRoID0gdGhpcy5leHRyYWN0Q2FwdGlvblBhdGgoZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRQYXRoID0gdGhpcy5leHRyYWN0RmllbGRQYXRoKGZpZWxkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmZmllbGRzLnB1c2goZmYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmZpZWxkcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV4dHJhY3RGU3ViRmllbGRzKGZpZWxkczogQmlsbFNjaGVtYVN1YkZpZWxkW10sIHBhcmVudEZpZWxkPzogQmlsbFNjaGVtYUZpZWxkKTogQmlsbEZyb250RmllbGRbXSB7XHJcbiAgICAgICAgbGV0IGZmaWVsZHM6IEJpbGxGcm9udEZpZWxkW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMpIHtcclxuICAgICAgICAgICAgLy/mnprkuL7miJbogIXmnprkuL7lnovljZXlgLxVRFTml7bpu5jorqTlj5ZOYW1lXHJcbiAgICAgICAgICAgIGlmIChmaWVsZC5maWVsZFR5cGUgPT0gXCJFbnVtXCIgfHwgZmllbGQuZmllbGRUeXBlID09IFwiRW51bVNpbmdsZVVkdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmYgPSBuZXcgQmlsbEZyb250RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkTmFtZSA9IGZpZWxkLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZmLmRhdGFUeXBlID0gZmllbGQuZGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uID0gZmllbGQuY2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkVHlwZSA9IGZpZWxkLmZpZWxkVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmxlbmd0aCA9IGZpZWxkLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZmLnByZWNpc2lvbiA9IGZpZWxkLnByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgIGZmLnNjYWxlID0gZmllbGQuc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uUGF0aCA9IHRoaXMuZXh0cmFjdENhcHRpb25QYXRoKGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkUGF0aCA9IHRoaXMuZXh0cmFjdEZpZWxkUGF0aChmaWVsZCkgKyBcIi5OYW1lXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgZmZpZWxkcy5wdXNoKGZmKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZC5HZXRTdWJGaWVsZExpc3QoKSAhPSBudWxsICYmIGZpZWxkLkdldFN1YkZpZWxkTGlzdCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZmaWVsZHMucHVzaCguLi50aGlzLmV4dHJhY3RGU3ViRmllbGRzKGZpZWxkLkdldFN1YkZpZWxkTGlzdCgpKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmYgPSBuZXcgQmlsbEZyb250RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkTmFtZSA9IGZpZWxkLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZmLmRhdGFUeXBlID0gZmllbGQuZGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uID0gZmllbGQuY2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkVHlwZSA9IGZpZWxkLmZpZWxkVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmxlbmd0aCA9IGZpZWxkLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZmLnByZWNpc2lvbiA9IGZpZWxkLnByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgIGZmLnNjYWxlID0gZmllbGQuc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uUGF0aCA9IHRoaXMuZXh0cmFjdENhcHRpb25QYXRoKGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkUGF0aCA9IHRoaXMuZXh0cmFjdEZpZWxkUGF0aChmaWVsZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmZpZWxkcy5wdXNoKGZmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZmaWVsZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDoh6rlrprkuYnlrZfmrrXlsZXnpLrmlrnlvI9cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBleHRyYWN0RkZpZWxkc1dpdGhDdXN0b21GaWVsZHMoZmllbGRzOiBCaWxsU2NoZW1hRmllbGRbXSwgZmllbGRDb250ZW50OiBhbnkpOiBCaWxsRnJvbnRGaWVsZFtdIHtcclxuICAgICAgICAvLyDooahjb2RlXHJcbiAgICAgICAgY29uc3QgdGFibGVDb2RlID0gdGhpcy5iaWxsU2NoZW1hVGFibGUudGFibGVOYW1lO1xyXG5cclxuICAgICAgICAvLyDljZXmja7ov73ouKrphY3nva5cclxuICAgICAgICBsZXQgYnRzOiBCaWxsVHJhY2tpbmdTZXR0aW5ncyA9IG5ldyBCaWxsVHJhY2tpbmdTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICh0aGlzLmJpbGxJbmZvICYmIHRoaXMuYmlsbEluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgYnRzLkxvYWRGcm9tSnNvbih0aGlzLmJpbGxJbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmaWVsZENvbmZpZzogeyBzY2hlbWE/OiB7IHNlbGVjdGVkQWxsPzogYW55O1tpZDogc3RyaW5nXTogeyBjb2RlOiBzdHJpbmcsIGNhcHRpb246IHN0cmluZywgZmllbGRzOiBhbnlbXSB9IH0sIFtrOiBzdHJpbmddOiBhbnkgfSA9IHR5cGVvZiBmaWVsZENvbnRlbnQgPT0gXCJvYmplY3RcIiA/IGZpZWxkQ29udGVudCA6IEpTT04ucGFyc2UoZmllbGRDb250ZW50KTtcclxuXHJcbiAgICAgICAgbGV0IGZmaWVsZHM6IEJpbGxGcm9udEZpZWxkW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMpIHtcclxuICAgICAgICAgICAgLy8g5a2X5q61SURcclxuICAgICAgICAgICAgY29uc3QgZmllbGRQYXRoID0gdGhpcy5leHRyYWN0RmllbGRQYXRoKGZpZWxkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZiA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgaW4gZmllbGRDb25maWcuc2NoZW1hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSAnc2VsZWN0ZWRBbGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSB0YWJsZUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZmllbGRDb25maWcuc2NoZW1hW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNmID0gcyAmJiBzLmZpZWxkcy5maW5kKChlbHQpID0+IGVsdC5maWVsZFBhdGggPT0gZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2YgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5p6a5Li+5oiW6ICF5p6a5Li+5Z6L5Y2V5YC8VURU5pe26buY6K6k5Y+WTmFtZVxyXG4gICAgICAgICAgICBpZiAoZmllbGQuZmllbGRUeXBlID09IFwiRW51bVwiIHx8IGZpZWxkLmZpZWxkVHlwZSA9PSBcIkVudW1TaW5nbGVVZHRcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZmID0gbmV3IEJpbGxGcm9udEZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICBmZi5maWVsZE5hbWUgPSBmaWVsZC5maWVsZE5hbWU7XHJcbiAgICAgICAgICAgICAgICBmZi5kYXRhVHlwZSA9IGZpZWxkLmRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgZmYuY2FwdGlvbiA9IGZpZWxkLmNhcHRpb247XHJcbiAgICAgICAgICAgICAgICBmZi5maWVsZFR5cGUgPSBmaWVsZC5maWVsZFR5cGU7XHJcbiAgICAgICAgICAgICAgICBmZi5sZW5ndGggPSBmaWVsZC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmZi5wcmVjaXNpb24gPSBmaWVsZC5wcmVjaXNpb247XHJcbiAgICAgICAgICAgICAgICBmZi5zY2FsZSA9IGZpZWxkLnNjYWxlO1xyXG4gICAgICAgICAgICAgICAgZmYuY2FwdGlvblBhdGggPSBzZi5kaXNwbGF5TmFtZSB8fCBmaWVsZC5jYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRQYXRoID0gdGhpcy5leHRyYWN0RmllbGRQYXRoKGZpZWxkKSArIFwiLk5hbWVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBmZmllbGRzLnB1c2goZmYpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLkdldFN1YkZpZWxkTGlzdCgpICE9IG51bGwgJiYgZmllbGQuR2V0U3ViRmllbGRMaXN0KCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZmZpZWxkcy5wdXNoKC4uLnRoaXMuZXh0cmFjdEZTdWJGaWVsZHNXaXRoQ3VzdG9tRmllbGRzKGZpZWxkLkdldFN1YkZpZWxkTGlzdCgpLCBmaWVsZENvbnRlbnQsIGZpZWxkKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmYgPSBuZXcgQmlsbEZyb250RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkTmFtZSA9IGZpZWxkLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZmLmRhdGFUeXBlID0gZmllbGQuZGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uID0gZmllbGQuY2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkVHlwZSA9IGZpZWxkLmZpZWxkVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmxlbmd0aCA9IGZpZWxkLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZmLnByZWNpc2lvbiA9IGZpZWxkLnByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgIGZmLnNjYWxlID0gZmllbGQuc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uUGF0aCA9IHNmLmRpc3BsYXlOYW1lIHx8IGZpZWxkLmNhcHRpb247XHJcbiAgICAgICAgICAgICAgICBmZi5maWVsZFBhdGggPSB0aGlzLmV4dHJhY3RGaWVsZFBhdGgoZmllbGQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZmaWVsZHMucHVzaChmZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmZmllbGRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXh0cmFjdEZTdWJGaWVsZHNXaXRoQ3VzdG9tRmllbGRzKGZpZWxkczogQmlsbFNjaGVtYVN1YkZpZWxkW10sIGZpZWxkQ29udGVudDogYW55LCBwYXJlbnRGaWVsZD86IEJpbGxTY2hlbWFGaWVsZEJhc2UpOiBCaWxsRnJvbnRGaWVsZFtdIHtcclxuICAgICAgICAvLyDooajnvJblj7dcclxuICAgICAgICBjb25zdCB0YWJsZUNvZGUgPSB0aGlzLmJpbGxTY2hlbWFUYWJsZS50YWJsZU5hbWU7XHJcblxyXG4gICAgICAgIC8vIOWNleaNrui/vei4qumFjee9rlxyXG4gICAgICAgIGxldCBidHM6IEJpbGxUcmFja2luZ1NldHRpbmdzID0gbmV3IEJpbGxUcmFja2luZ1NldHRpbmdzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuYmlsbEluZm8gJiYgdGhpcy5iaWxsSW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncykge1xyXG4gICAgICAgICAgICBidHMuTG9hZEZyb21Kc29uKHRoaXMuYmlsbEluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpZWxkQ29uZmlnOiB7IHNjaGVtYT86IHsgc2VsZWN0ZWRBbGw/OiBhbnk7W2lkOiBzdHJpbmddOiB7IGNvZGU6IHN0cmluZywgbmFtZTogc3RyaW5nLCBmaWVsZHM6IGFueVtdIH0gfSwgW2s6IHN0cmluZ106IGFueSB9ID0gdHlwZW9mIGZpZWxkQ29udGVudCA9PSBcIm9iamVjdFwiID8gZmllbGRDb250ZW50IDogSlNPTi5wYXJzZShmaWVsZENvbnRlbnQpO1xyXG5cclxuICAgICAgICBsZXQgZmZpZWxkczogQmlsbEZyb250RmllbGRbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGZpZWxkIG9mIGZpZWxkcykge1xyXG4gICAgICAgICAgICAvLyDlrZfmrrVJRFxyXG4gICAgICAgICAgICBjb25zdCBmaWVsZFBhdGggPSB0aGlzLmV4dHJhY3RGaWVsZFBhdGgoZmllbGQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNmID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yIChsZXQgayBpbiBmaWVsZENvbmZpZy5zY2hlbWEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrID09ICdzZWxlY3RlZEFsbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrID09IHRhYmxlQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBmaWVsZENvbmZpZy5zY2hlbWFba107XHJcbiAgICAgICAgICAgICAgICAgICAgc2YgPSBzICYmIHMuZmllbGRzLmZpbmQoKGVsdCkgPT4gZWx0LmZpZWxkUGF0aCA9PSBmaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/mnprkuL7miJbogIXmnprkuL7lnovljZXlgLxVRFTml7bpu5jorqTlj5ZOYW1lXHJcbiAgICAgICAgICAgIGlmIChmaWVsZC5maWVsZFR5cGUgPT0gXCJFbnVtXCIgfHwgZmllbGQuZmllbGRUeXBlID09IFwiRW51bVNpbmdsZVVkdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmYgPSBuZXcgQmlsbEZyb250RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkTmFtZSA9IGZpZWxkLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZmLmRhdGFUeXBlID0gZmllbGQuZGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uID0gZmllbGQuY2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkVHlwZSA9IGZpZWxkLmZpZWxkVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmxlbmd0aCA9IGZpZWxkLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZmLnByZWNpc2lvbiA9IGZpZWxkLnByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgIGZmLnNjYWxlID0gZmllbGQuc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBmZi5jYXB0aW9uUGF0aCA9IHNmLmRpc3BsYXlOYW1lIHx8IGZpZWxkLmNhcHRpb247XHJcbiAgICAgICAgICAgICAgICBmZi5maWVsZFBhdGggPSB0aGlzLmV4dHJhY3RGaWVsZFBhdGgoZmllbGQpICsgXCIuTmFtZVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGZmaWVsZHMucHVzaChmZik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQuR2V0U3ViRmllbGRMaXN0KCkgIT0gbnVsbCAmJiBmaWVsZC5HZXRTdWJGaWVsZExpc3QoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmZmllbGRzLnB1c2goLi4udGhpcy5leHRyYWN0RlN1YkZpZWxkc1dpdGhDdXN0b21GaWVsZHMoZmllbGQuR2V0U3ViRmllbGRMaXN0KCksIGZpZWxkQ29udGVudCwgZmllbGQpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZiA9IG5ldyBCaWxsRnJvbnRGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGROYW1lID0gZmllbGQuZmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgZmYuZGF0YVR5cGUgPSBmaWVsZC5kYXRhVHlwZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb24gPSBmaWVsZC5jYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuZmllbGRUeXBlID0gZmllbGQuZmllbGRUeXBlO1xyXG4gICAgICAgICAgICAgICAgZmYubGVuZ3RoID0gZmllbGQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZmYucHJlY2lzaW9uID0gZmllbGQucHJlY2lzaW9uO1xyXG4gICAgICAgICAgICAgICAgZmYuc2NhbGUgPSBmaWVsZC5zY2FsZTtcclxuICAgICAgICAgICAgICAgIGZmLmNhcHRpb25QYXRoID0gc2YuZGlzcGxheU5hbWUgfHwgZmllbGQuY2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIGZmLmZpZWxkUGF0aCA9IHRoaXMuZXh0cmFjdEZpZWxkUGF0aChmaWVsZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmZpZWxkcy5wdXNoKGZmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZmaWVsZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBleHRyYWN0Q2FwdGlvblBhdGgoZmllbGQ6IEJpbGxTY2hlbWFGaWVsZCB8IEJpbGxTY2hlbWFTdWJGaWVsZCkge1xyXG4gICAgICAgIGxldCBzID0gZmllbGQuY2FwdGlvbjtcclxuICAgICAgICBsZXQgdG1wID0gZmllbGQgYXMgQmlsbFNjaGVtYVN1YkZpZWxkO1xyXG4gICAgICAgIHdoaWxlICh0bXAuYXR0YWNoZWRGaWVsZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHMgPSB0bXAuYXR0YWNoZWRGaWVsZC5jYXB0aW9uICsgXCIuXCIgKyBzO1xyXG4gICAgICAgICAgICB0bXAgPSB0bXAuYXR0YWNoZWRGaWVsZCBhcyBCaWxsU2NoZW1hU3ViRmllbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXh0cmFjdEZpZWxkUGF0aChmaWVsZDogQmlsbFNjaGVtYUZpZWxkIHwgQmlsbFNjaGVtYVN1YkZpZWxkKSB7XHJcbiAgICAgICAgbGV0IHMgPSBmaWVsZC5maWVsZE5hbWU7XHJcbiAgICAgICAgbGV0IHRtcCA9IGZpZWxkIGFzIEJpbGxTY2hlbWFTdWJGaWVsZDtcclxuICAgICAgICB3aGlsZSAodG1wLmF0dGFjaGVkRmllbGQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzID0gdG1wLmF0dGFjaGVkRmllbGQuZmllbGROYW1lICsgXCIuXCIgKyBzO1xyXG4gICAgICAgICAgICB0bXAgPSB0bXAuYXR0YWNoZWRGaWVsZCBhcyBCaWxsU2NoZW1hU3ViRmllbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXh0cmFjdEZSb3dzKHJvd3M6IEJpbGxEYXRhUm93W10sIGZmaWVsZHM6IEJpbGxGcm9udEZpZWxkW10pIHtcclxuICAgICAgICBsZXQgZnJvd3M6IEJpbGxGcm9udERhdGFSb3dbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCByb3cgb2Ygcm93cykge1xyXG4gICAgICAgICAgICBsZXQgZnIgPSBuZXcgQmlsbEZyb250RGF0YVJvdygpO1xyXG4gICAgICAgICAgICBmci5leHBhbmRlZCA9IHJvdy5HZXRDaGlsZFRhYmxlTGlzdCgpLmxlbmd0aCA9PSAwID8gbnVsbCA6IHJvdy5hdHRhY2hlZFRhYmxlICYmIHJvdy5hdHRhY2hlZFRhYmxlLmF0dGFjaGVkUm93ID09IG51bGwgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGZyLmhhc0NoaWxkcmVuID0gdGhpcy5oYXNDaGlsZHJlbihyb3cpO1xyXG4gICAgICAgICAgICBmci5kYXRhID0ge307XHJcbiAgICAgICAgICAgIGZvciAobGV0IGZmIG9mIGZmaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGZyLmRhdGFbZmYuZmllbGRQYXRoXSA9IHRoaXMuZXh0cmFjdEZpZWxkUGF0aFZhbHVlKHJvdy5HZXRGaWVsZE1hcCgpLCBmZi5maWVsZFBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmcm93cy5wdXNoKGZyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmcm93cztcclxuICAgIH1cclxuXHJcbiAgICBoYXNDaGlsZHJlbihyb3c6IEJpbGxEYXRhUm93KTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGZsYWcgPSByb3cuR2V0Q2hpbGRUYWJsZUxpc3QoKSAmJiByb3cuR2V0Q2hpbGRUYWJsZUxpc3QoKS5sZW5ndGggPiAwO1xyXG5cclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICBsZXQgY2YgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgY3Qgb2Ygcm93LkdldENoaWxkVGFibGVMaXN0KCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdC5HZXRSb3dMaXN0KCkgJiYgY3QuR2V0Um93TGlzdCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjZiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZsYWcgPSBjZjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gZmxhZztcclxuICAgIH1cclxuXHJcbiAgICBleHRyYWN0RmllbGRQYXRoVmFsdWUoYmlsbERhdGFGaWVsZE1hcDogeyBba2V5OiBzdHJpbmddOiBCaWxsRGF0YUZpZWxkOyB9LCBmaWVsZFBhdGg6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgbGV0IGZpZWxkcyA9IGZpZWxkUGF0aC5zcGxpdChcIi5cIik7XHJcblxyXG4gICAgICAgIGxldCBiZGY6IEJpbGxEYXRhRmllbGQgfCBCaWxsRGF0YVN1YkZpZWxkID0gYmlsbERhdGFGaWVsZE1hcFtmaWVsZHNbMF1dO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBiZGYgIT0gbnVsbCAmJiBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBiZGYuR2V0U3ViRmllbGRNYXAoKTtcclxuICAgICAgICAgICAgaWYgKHRlbXAgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmRmID0gdGVtcFtmaWVsZHNbaV1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJkZiA/IGJkZi5HZXRUZXh0VmFsdWUoKSA6IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2hvd25UZXh0KG9iajogeyBbZmllbGRQYXRoOiBzdHJpbmddOiBhbnkgfSwgZmZpZWxkOiBCaWxsRnJvbnRGaWVsZCkge1xyXG4gICAgICAgIGlmIChvYmpbZmZpZWxkLmZpZWxkUGF0aF0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZmaWVsZC5kYXRhVHlwZSA9PSBEYXRhVHlwZS5TdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9ialtmZmllbGQuZmllbGRQYXRoXSB8fCBcIlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZmZpZWxkLmRhdGFUeXBlID09IERhdGFUeXBlLkRlY2ltYWwpIHtcclxuICAgICAgICAgICAgbGV0IGRlYyA9IHBhcnNlRmxvYXQoU3RyaW5nKG9ialtmZmllbGQuZmllbGRQYXRoXSkpLnRvRml4ZWQoZmZpZWxkLnNjYWxlKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjIHx8IFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmZmllbGQuZGF0YVR5cGUgPT0gRGF0YVR5cGUuRGF0ZVRpbWUpIHtcclxuICAgICAgICAgICAgbGV0IGRhdGUgPSBCcG1uTW9kZWxKc29uSGVscGVyLkRhdGVUaW1lRnJvbVN0cmluZyhvYmpbZmZpZWxkLmZpZWxkUGF0aF0pO1xyXG4gICAgICAgICAgICBpZiAoZmZpZWxkLmZpZWxkVHlwZSA9PSBcIkRhdGVUaW1lXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGb3JtYXQoZGF0ZSwgXCJ5eXl5LU1NLWRkIEhIOm1tOnNzLlNTU1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmZmllbGQuZmllbGRUeXBlID09IFwiRGF0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlRm9ybWF0KGRhdGUsIFwieXl5eS1NTS1kZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGb3JtYXQoZGF0ZSwgXCJ5eXl5LU1NLWRkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9ialtmZmllbGQuZmllbGRQYXRoXSB8fCBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc09iamVjdChvYmopOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIChvYmopID09IFwib2JqZWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBcnJheShvYmopOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGF0ZUZvcm1hdChkYXRlOiBEYXRlLCBmbXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJldDtcclxuICAgICAgICBjb25zdCBvcHQgPSB7XHJcbiAgICAgICAgICAgIFwieStcIjogZGF0ZS5nZXRVVENGdWxsWWVhcigpLnRvU3RyaW5nKCksICAgICAgICAvLyDlubRcclxuICAgICAgICAgICAgXCJNK1wiOiAoZGF0ZS5nZXRVVENNb250aCgpICsgMSkudG9TdHJpbmcoKSwgICAgIC8vIOaciFxyXG4gICAgICAgICAgICBcImQrXCI6IGRhdGUuZ2V0VVRDRGF0ZSgpLnRvU3RyaW5nKCksICAgICAgICAgICAgLy8g5pelXHJcbiAgICAgICAgICAgIFwiSCtcIjogZGF0ZS5nZXRVVENIb3VycygpLnRvU3RyaW5nKCksICAgICAgICAgICAvLyDml7ZcclxuICAgICAgICAgICAgXCJtK1wiOiBkYXRlLmdldFVUQ01pbnV0ZXMoKS50b1N0cmluZygpLCAgICAgICAgIC8vIOWIhlxyXG4gICAgICAgICAgICBcInMrXCI6IGRhdGUuZ2V0VVRDU2Vjb25kcygpLnRvU3RyaW5nKCksICAgICAgICAgLy8g56eSXHJcbiAgICAgICAgICAgIFwiUytcIjogZGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKS50b1N0cmluZygpLCAgICAvLyDnp5JcclxuICAgICAgICAgICAgLy8g5pyJ5YW25LuW5qC85byP5YyW5a2X56ym6ZyA5rGC5Y+v5Lul57un57ut5re75Yqg77yM5b+F6aG76L2s5YyW5oiQ5a2X56ym5LiyXHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKGxldCBrIGluIG9wdCkge1xyXG4gICAgICAgICAgICByZXQgPSBuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS5leGVjKGZtdCk7XHJcbiAgICAgICAgICAgIGlmIChyZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghU3RyaW5nLnByb3RvdHlwZS5wYWRTdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKHJldFsxXSwgKHJldFsxXS5sZW5ndGggPT0gMSkgPyAob3B0W2tdKSA6ICh0aGlzLm15UGFkU3RhcnQob3B0W2tdLCByZXRbMV0ubGVuZ3RoLCBcIjBcIikpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm10ID0gZm10LnJlcGxhY2UocmV0WzFdLCAocmV0WzFdLmxlbmd0aCA9PSAxKSA/IChvcHRba10pIDogKG9wdFtrXS5wYWRTdGFydChyZXRbMV0ubGVuZ3RoLCBcIjBcIikpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm10O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbXlQYWRTdGFydChzcmM6IHN0cmluZywgdGFyZ2V0TGVuZ3RoOiBudW1iZXIsIHBhZFN0cmluZzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGFyZ2V0TGVuZ3RoID0gdGFyZ2V0TGVuZ3RoID4+IDA7IC8vZmxvb3IgaWYgbnVtYmVyIG9yIGNvbnZlcnQgbm9uLW51bWJlciB0byAwO1xyXG4gICAgICAgIHBhZFN0cmluZyA9IFN0cmluZyh0eXBlb2YgcGFkU3RyaW5nICE9PSAndW5kZWZpbmVkJyA/IHBhZFN0cmluZyA6ICcgJyk7XHJcbiAgICAgICAgaWYgKHNyYy5sZW5ndGggPiB0YXJnZXRMZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhzcmMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldExlbmd0aCA9IHRhcmdldExlbmd0aCAtIHNyYy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRMZW5ndGggPiBwYWRTdHJpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBwYWRTdHJpbmcgKz0gcGFkU3RyaW5nLnJlcGVhdCh0YXJnZXRMZW5ndGggLyBwYWRTdHJpbmcubGVuZ3RoKTsgLy9hcHBlbmQgdG8gb3JpZ2luYWwgdG8gZW5zdXJlIHdlIGFyZSBsb25nZXIgdGhhbiBuZWVkZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFkU3RyaW5nLnNsaWNlKDAsIHRhcmdldExlbmd0aCkgKyBTdHJpbmcoc3JjKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=