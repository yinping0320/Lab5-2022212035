/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/basic-info/basic-info.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ComponentFactoryResolver, Inject, Injector, Input, LOCALE_ID, Optional, ReflectiveInjector, ViewContainerRef } from "@angular/core";
import { BillDataTable, BillSchemaTable, DataType } from "@edp-aif/common-api";
import { JointQueryMode } from "@edp-bif/common-api";
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { BsModalService } from "@farris/ui-modal";
import { NotifyService } from "@farris/ui-notify";
import { FrameworkService } from "@gsp-sys/rtf-common";
import { BillDataInfo } from "../../../entity/tracking/BillDataInfo";
import { BillInfo } from "../../../entity/tracking/BillInfo";
import { BillTrackerLocalePipe } from "../../pipe/bill-tracker-locale.pipe";
import { BillTrackerDataInfoService } from "../../services/bill-tracker-data-info.service";
import { BillTrackerInternalUiService } from "../../services/bill-tracker-internal-ui.service";
import { Exceptions } from "../../../entity/tracking/Exceptions";
var BasicInfoComponent = /** @class */ (function () {
    function BasicInfoComponent(framework, dataInfoService, notify, messager, loading, modal, localePipe, vcr, inj, cfr, cdr, localeId) {
        this.framework = framework;
        this.dataInfoService = dataInfoService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.localePipe = localePipe;
        this.vcr = vcr;
        this.inj = inj;
        this.cfr = cfr;
        this.cdr = cdr;
        this.localeId = localeId;
        this.fieldsWithValue = [];
        this.childSchemaTables = [];
        this.childDataTableMap = {};
        this.dataType = DataType;
        this.secTitle = "";
        this.localeId = localeId || this.inj.get(LOCALE_ID);
        /** @type {?} */
        var inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
    }
    /**
     * @return {?}
     */
    BasicInfoComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 设置section标题
        this.secTitle = this.localePipe.transform("basicInfo");
        // 表名解析
        this.secTitle = this.dataInfoService.getTableLabel(this.billInfo, this.schemaTable, this.localeId);
        // 获取带值的字段信息
        try {
            this.fieldsWithValue = this.dataInfoService.getBasicInfoFieldsWithValue(this.billInfo, this.schemaTable, this.dataTable);
        }
        catch (error) {
            this.fieldsWithValue = [];
            if (error == Exceptions.SCALE_FIELD_VALUE_IS_NAN) {
                this.messager.error(this.localePipe.transform("scaleFieldCantBeCastToInteger"));
            }
            throw error;
        }
        // 按order排序
        this.fieldsWithValue = this.dataInfoService.sortFieldsByOrder(this.fieldsWithValue);
        //主表数据
        /** @type {?} */
        var r = this.dataTable.GetRowList()[0];
        // 子表列表
        this.childSchemaTables = this.dataInfoService.getChildTables(this.billInfo, this.schemaTable);
        this.childDataTableMap = r.GetChildTableMap();
        if (this.billInfo.jointQueryParameters != null) {
            /** @type {?} */
            var jointQueryParameters = JSON.parse(this.billInfo.jointQueryParameters);
            this.hasLink = (this.billInfo.jointQueryMode == JointQueryMode.APP && jointQueryParameters.funcId != null)
                || (this.billInfo.jointQueryMode == JointQueryMode.URL && jointQueryParameters.url != null);
        }
        else {
            this.hasLink = false;
        }
    };
    /**
     * @return {?}
     */
    BasicInfoComponent.prototype.clickLink = /**
     * @return {?}
     */
    function () {
        this.internalUiService.openBillDetailWithFields(this.billInfo, this.billDataInfo, this.fieldsWithValue);
        event.stopPropagation();
        return false;
    };
    BasicInfoComponent.decorators = [
        { type: Component, args: [{
                    selector: "lib-bill-tracker-main-table",
                    template: "<farris-section class=\"f-section-form f-section-in-mainsubcard\" [mainTitle]=\"secTitle\">\r\n  <div class=\"f-form-layout farris-form farris-form-controls-inline\">\r\n    <ng-container *ngFor=\"let field of fieldsWithValue; let i = index\">\r\n      <div class=\"col-12 col-md-6 col-xl-3 col-el-2\" *ngIf=\"field.show\">\r\n        <!-- \u4EC5\u663E\u793Ashow\u5C5E\u6027\u4E3Atrue\u7684\u5B57\u6BB5 -->\r\n        <!-- <div class=\"farris-group-wrap\" *ngIf=\"!(hasLink && i==0); else linkTemp\"> -->\r\n        <div class=\"farris-group-wrap\">\r\n          <!-- \u975E\u5E03\u5C14\u503C\u4F7F\u7528\u6587\u672C\u6846 -->\r\n          <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                {{field | billTrackerFieldLabel}}\r\n              </span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <div class=\"f-component-text\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n                <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\"\r\n                  [ngStyle]=\"{'text-align': field.dataType == dataType.Integer || field.dataType == dataType.Decimal ? 'right':null}\">\r\n                  {{field.fieldValue}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- \u5E03\u5C14\u503C\u4F7F\u7528\u590D\u9009\u6846 -->\r\n          <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dataType.Boolean\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                {{field | billTrackerFieldLabel}}\r\n              </span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <div class=\"custom-control custom-checkbox\">\r\n                <input class=\"custom-control-input\" type=\"checkbox\" readonly [checked]=\"field.fieldValue\" />\r\n                <label class=\"custom-control-label\"></label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- \u6709\u8054\u67E5\u914D\u7F6E\u65F6\uFF0C\u9ED8\u8BA4\u53D6\u7B2C\u4E00\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u8D85\u94FE\u63A5 -->\r\n        <!-- <ng-template #linkTemp> -->\r\n        <!-- <div class=\"farris-group-wrap\"> -->\r\n        <!-- \u975E\u5E03\u5C14\u503C\u94FE\u63A5\u5728value\u4E0A -->\r\n        <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType!=dataType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    {{field | billTrackerFieldLabel}}\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"f-component-text\">\r\n                                    <span class=\"f-form-control-text\" title=\"{{field.fieldValue}}\">\r\n                                        <a href=\"javascript:void(0);\" (click)=\"clickLink()\">{{field.fieldValue}}</a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n\r\n        <!-- \u5E03\u5C14\u503C\u94FE\u63A5\u5728label\u4E0A -->\r\n        <!-- <div class=\"form-group farris-form-group\" *ngIf=\"field.dataType==dataType.Boolean\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\" title=\"{{field | billTrackerFieldLabel}}\">\r\n                                    <a href=\"javascript:void(0);\" (click)=\"clickLink()\">\r\n                                        {{field | billTrackerFieldLabel}}\r\n                                    </a>\r\n                                </span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <div class=\"farris-input-wrap\">\r\n                                    <div class=\"custom-control custom-checkbox\">\r\n                                        <input class=\"custom-control-input\" type=\"checkbox\" readonly\r\n                                            [checked]=\"field.fieldValue\" />\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div> -->\r\n        <!-- </div> -->\r\n        <!-- </ng-template> -->\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</farris-section>\r\n<lib-bill-tracker-child-info-list [childSchemaTables]=\"childSchemaTables\" [childDataTableMap]=\"childDataTableMap\"\r\n  [billInfo]=\"billInfo\">\r\n</lib-bill-tracker-child-info-list>\r\n"
                }] }
    ];
    /** @nocollapse */
    BasicInfoComponent.ctorParameters = function () { return [
        { type: FrameworkService },
        { type: BillTrackerDataInfoService },
        { type: NotifyService },
        { type: MessagerService },
        { type: LoadingService },
        { type: BsModalService },
        { type: BillTrackerLocalePipe },
        { type: ViewContainerRef },
        { type: Injector },
        { type: ComponentFactoryResolver },
        { type: ChangeDetectorRef },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [LOCALE_ID,] }] }
    ]; };
    BasicInfoComponent.propDecorators = {
        schemaTable: [{ type: Input, args: ["schemaTable",] }],
        dataTable: [{ type: Input, args: ["dataTable",] }],
        billInfo: [{ type: Input, args: ["billInfo",] }],
        billDataInfo: [{ type: Input, args: ["billDataInfo",] }]
    };
    return BasicInfoComponent;
}());
export { BasicInfoComponent };
if (false) {
    /** @type {?} */
    BasicInfoComponent.prototype.schemaTable;
    /** @type {?} */
    BasicInfoComponent.prototype.dataTable;
    /** @type {?} */
    BasicInfoComponent.prototype.billInfo;
    /** @type {?} */
    BasicInfoComponent.prototype.billDataInfo;
    /** @type {?} */
    BasicInfoComponent.prototype.fieldsWithValue;
    /** @type {?} */
    BasicInfoComponent.prototype.childSchemaTables;
    /** @type {?} */
    BasicInfoComponent.prototype.childDataTableMap;
    /** @type {?} */
    BasicInfoComponent.prototype.hasLink;
    /** @type {?} */
    BasicInfoComponent.prototype.dataType;
    /** @type {?} */
    BasicInfoComponent.prototype.secTitle;
    /** @type {?} */
    BasicInfoComponent.prototype.internalUiService;
    /** @type {?} */
    BasicInfoComponent.prototype.framework;
    /** @type {?} */
    BasicInfoComponent.prototype.dataInfoService;
    /** @type {?} */
    BasicInfoComponent.prototype.notify;
    /** @type {?} */
    BasicInfoComponent.prototype.messager;
    /** @type {?} */
    BasicInfoComponent.prototype.loading;
    /** @type {?} */
    BasicInfoComponent.prototype.modal;
    /** @type {?} */
    BasicInfoComponent.prototype.localePipe;
    /** @type {?} */
    BasicInfoComponent.prototype.vcr;
    /** @type {?} */
    BasicInfoComponent.prototype.inj;
    /** @type {?} */
    BasicInfoComponent.prototype.cfr;
    /** @type {?} */
    BasicInfoComponent.prototype.cdr;
    /** @type {?} */
    BasicInfoComponent.prototype.localeId;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtaW5mby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi9iaWxsLXRyYWNrZXIvY29tcG9uZW50cy9iYXNpYy1pbmZvL2Jhc2ljLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSx3QkFBd0IsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQVUsUUFBUSxFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25MLE9BQU8sRUFBMkIsYUFBYSxFQUF3RSxlQUFlLEVBQXVCLFFBQVEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25NLE9BQU8sRUFBa0csY0FBYyxFQUFpRCxNQUFNLHFCQUFxQixDQUFDO0FBQ3BNLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQXVCLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUU3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUMzRixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUMvRixPQUFPLEVBQUUsVUFB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VUFBVTsrQkFHaEIsS0FBSyxTQUFDLGNBQWM7O0lBNEV2Qix5QkFBQztDQUFBLEFBM0ZELElBMkZDO1NBdEZZLGtCQUFrQjs7O0lBQzdCLHlDQUNvQzs7SUFFcEMsdUNBQ2dDOztJQUVoQyxzQ0FDMEI7O0lBRTFCLDBDQUNrQzs7SUFFbEMsNkNBQStEOztJQUMvRCwrQ0FBMEM7O0lBQzFDLCtDQUVPOztJQUNQLHFDQUFpQjs7SUFDakIsc0NBQW9COztJQUNwQixzQ0FBc0I7O0lBRXRCLCtDQUFnRDs7SUFHOUMsdUNBQWtDOztJQUNsQyw2Q0FBa0Q7O0lBQ2xELG9DQUE0Qjs7SUFDNUIsc0NBQWdDOztJQUNoQyxxQ0FBOEI7O0lBQzlCLG1DQUE0Qjs7SUFDNUIsd0NBQXdDOztJQUN4QyxpQ0FBNEI7O0lBQzVCLGlDQUFvQjs7SUFDcEIsaUNBQW9DOztJQUNwQyxpQ0FBNkI7O0lBQzdCLHNDQUFzRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0LCBJbmplY3RvciwgSW5wdXQsIExPQ0FMRV9JRCwgT25Jbml0LCBPcHRpb25hbCwgUmVmbGVjdGl2ZUluamVjdG9yLCBWaWV3Q29udGFpbmVyUmVmIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQmlsbERhdGEsIEJpbGxEYXRhRmllbGQsIEJpbGxEYXRhVGFibGUsIEJpbGxTY2hlbWEsIEJpbGxTY2hlbWFGaWVsZCwgQmlsbFNjaGVtYUZpZWxkQmFzZSwgQmlsbFNjaGVtYVN1YkZpZWxkLCBCaWxsU2NoZW1hVGFibGUsIEJwbW5Nb2RlbEpzb25IZWxwZXIsIERhdGFUeXBlIH0gZnJvbSBcIkBlZHAtYWlmL2NvbW1vbi1hcGlcIjtcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJTY2hlbWFGaWVsZENvbnRlbnQsIEJpbGxUcmFja2luZ0RhdGFTaG93bk1vZGUsIEJpbGxUcmFja2luZ1NldHRpbmdzLCBmdWxsUGF0aFByZWZpeCwgSm9pbnRRdWVyeU1vZGUsIEpvaW50UXVlcnlQYXJhbWV0ZXJzLCBKb2ludFF1ZXJ5UGFyYW1ldGVyVHlwZSB9IGZyb20gXCJAZWRwLWJpZi9jb21tb24tYXBpXCI7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9hZGluZ1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1tZXNzYWdlclwiO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLW1vZGFsXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1ub3RpZnlcIjtcclxuaW1wb3J0IHsgQXBwT3B0aW9ucywgQXBwVHlwZSwgRnJhbWV3b3JrU2VydmljZSB9IGZyb20gXCJAZ3NwLXN5cy9ydGYtY29tbW9uXCI7XHJcbmltcG9ydCB7IEJpbGxEYXRhSW5mbyB9IGZyb20gXCIuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbERhdGFJbmZvXCI7XHJcbmltcG9ydCB7IEJpbGxJbmZvIH0gZnJvbSBcIi4uLy4uLy4uL2VudGl0eS90cmFja2luZy9CaWxsSW5mb1wiO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckNvbnN0YW50IH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItY29uc3RhbnRcIjtcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJMb2NhbGVQaXBlIH0gZnJvbSBcIi4uLy4uL3BpcGUvYmlsbC10cmFja2VyLWxvY2FsZS5waXBlXCI7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1kYXRhLWluZm8uc2VydmljZVwiO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckludGVybmFsVWlTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2JpbGwtdHJhY2tlci1pbnRlcm5hbC11aS5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEV4Y2VwdGlvbnMgfSBmcm9tIFwiLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL0V4Y2VwdGlvbnNcIjtcclxuXHJcbmRlY2xhcmUgbW9kdWxlICdAZWRwLWFpZi9jb21tb24tYXBpL2xpYi9iaWxsa2l0JyB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBLaXRGaWVsZCB7XHJcbiAgICBmaWVsZFZhbHVlPzogYW55O1xyXG4gICAgY2FwdGlvblBhdGg/OiBzdHJpbmc7XHJcbiAgICBmaWVsZFBhdGg/OiBzdHJpbmc7XHJcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZztcclxuICAgIG9yZGVyPzogbnVtYmVyO1xyXG4gICAgc2hvdz86IGJvb2xlYW47XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEJpbGxTY2hlbWFUYWJsZSB7XHJcbiAgICBmdWxsUGF0aD86IHN0cmluZztcclxuICAgIHNob3c/OiBib29sZWFuO1xyXG4gICAgb3JkZXI/OiBudW1iZXI7XHJcbiAgfVxyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogXCJsaWItYmlsbC10cmFja2VyLW1haW4tdGFibGVcIixcclxuICB0ZW1wbGF0ZVVybDogJy4vYmFzaWMtaW5mby5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmFzaWNJbmZvQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASW5wdXQoXCJzY2hlbWFUYWJsZVwiKVxyXG4gIHB1YmxpYyBzY2hlbWFUYWJsZTogQmlsbFNjaGVtYVRhYmxlO1xyXG5cclxuICBASW5wdXQoXCJkYXRhVGFibGVcIilcclxuICBwdWJsaWMgZGF0YVRhYmxlOiBCaWxsRGF0YVRhYmxlO1xyXG5cclxuICBASW5wdXQoXCJiaWxsSW5mb1wiKVxyXG4gIHB1YmxpYyBiaWxsSW5mbzogQmlsbEluZm87XHJcblxyXG4gIEBJbnB1dChcImJpbGxEYXRhSW5mb1wiKVxyXG4gIHB1YmxpYyBiaWxsRGF0YUluZm86IEJpbGxEYXRhSW5mbztcclxuXHJcbiAgZmllbGRzV2l0aFZhbHVlOiAoQmlsbFNjaGVtYUZpZWxkIHwgQmlsbFNjaGVtYVN1YkZpZWxkKVtdID0gW107XHJcbiAgY2hpbGRTY2hlbWFUYWJsZXM6IEJpbGxTY2hlbWFUYWJsZVtdID0gW107XHJcbiAgY2hpbGREYXRhVGFibGVNYXA6IHtcclxuICAgIFtrZXk6IHN0cmluZ106IEJpbGxEYXRhVGFibGU7XHJcbiAgfSA9IHt9O1xyXG4gIGhhc0xpbms6IGJvb2xlYW47XHJcbiAgZGF0YVR5cGUgPSBEYXRhVHlwZTtcclxuICBzZWNUaXRsZTogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgaW50ZXJuYWxVaVNlcnZpY2U6IEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGZyYW1ld29yazogRnJhbWV3b3JrU2VydmljZSxcclxuICAgIHB1YmxpYyBkYXRhSW5mb1NlcnZpY2U6IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlLFxyXG4gICAgcHVibGljIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHB1YmxpYyBtZXNzYWdlcjogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHVibGljIGxvYWRpbmc6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1vZGFsOiBCc01vZGFsU2VydmljZSxcclxuICAgIHB1YmxpYyBsb2NhbGVQaXBlOiBCaWxsVHJhY2tlckxvY2FsZVBpcGUsXHJcbiAgICBwdWJsaWMgdmNyOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgcHVibGljIGluajogSW5qZWN0b3IsXHJcbiAgICBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwdWJsaWMgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoTE9DQUxFX0lEKSBwdWJsaWMgbG9jYWxlSWQ6IHN0cmluZyxcclxuICApIHtcclxuICAgIHRoaXMubG9jYWxlSWQgPSBsb2NhbGVJZCB8fCB0aGlzLmluai5nZXQoTE9DQUxFX0lEKTtcclxuXHJcbiAgICBjb25zdCBpbmplY3QgPSBSZWZsZWN0aXZlSW5qZWN0b3IucmVzb2x2ZUFuZENyZWF0ZShbXHJcbiAgICAgIEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2VcclxuICAgIF0sIHRoaXMuaW5qKTtcclxuICAgIHRoaXMuaW50ZXJuYWxVaVNlcnZpY2UgPSBpbmplY3QuZ2V0KEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2UsIG51bGwpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAvLyDorr7nva5zZWN0aW9u5qCH6aKYXHJcbiAgICB0aGlzLnNlY1RpdGxlID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImJhc2ljSW5mb1wiKTtcclxuICAgIC8vIOihqOWQjeino+aekFxyXG4gICAgdGhpcy5zZWNUaXRsZSA9IHRoaXMuZGF0YUluZm9TZXJ2aWNlLmdldFRhYmxlTGFiZWwodGhpcy5iaWxsSW5mbywgdGhpcy5zY2hlbWFUYWJsZSwgdGhpcy5sb2NhbGVJZCk7XHJcblxyXG4gICAgLy8g6I635Y+W5bim5YC855qE5a2X5q615L+h5oGvXHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLmZpZWxkc1dpdGhWYWx1ZSA9IHRoaXMuZGF0YUluZm9TZXJ2aWNlLmdldEJhc2ljSW5mb0ZpZWxkc1dpdGhWYWx1ZSh0aGlzLmJpbGxJbmZvLCB0aGlzLnNjaGVtYVRhYmxlLCB0aGlzLmRhdGFUYWJsZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmZpZWxkc1dpdGhWYWx1ZSA9IFtdO1xyXG4gICAgICBpZiAoZXJyb3IgPT0gRXhjZXB0aW9ucy5TQ0FMRV9GSUVMRF9WQUxVRV9JU19OQU4pIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VyLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzY2FsZUZpZWxkQ2FudEJlQ2FzdFRvSW50ZWdlclwiKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5oyJb3JkZXLmjpLluo9cclxuICAgIHRoaXMuZmllbGRzV2l0aFZhbHVlID0gdGhpcy5kYXRhSW5mb1NlcnZpY2Uuc29ydEZpZWxkc0J5T3JkZXIodGhpcy5maWVsZHNXaXRoVmFsdWUpO1xyXG5cclxuICAgIC8v5Li76KGo5pWw5o2uXHJcbiAgICBjb25zdCByID0gdGhpcy5kYXRhVGFibGUuR2V0Um93TGlzdCgpWzBdO1xyXG4gICAgLy8g5a2Q6KGo5YiX6KGoXHJcbiAgICB0aGlzLmNoaWxkU2NoZW1hVGFibGVzID0gdGhpcy5kYXRhSW5mb1NlcnZpY2UuZ2V0Q2hpbGRUYWJsZXModGhpcy5iaWxsSW5mbywgdGhpcy5zY2hlbWFUYWJsZSk7XHJcbiAgICB0aGlzLmNoaWxkRGF0YVRhYmxlTWFwID0gci5HZXRDaGlsZFRhYmxlTWFwKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuYmlsbEluZm8uam9pbnRRdWVyeVBhcmFtZXRlcnMgIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBqb2ludFF1ZXJ5UGFyYW1ldGVyczogSm9pbnRRdWVyeVBhcmFtZXRlcnMgPSBKU09OLnBhcnNlKHRoaXMuYmlsbEluZm8uam9pbnRRdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICB0aGlzLmhhc0xpbmsgPSAodGhpcy5iaWxsSW5mby5qb2ludFF1ZXJ5TW9kZSA9PSBKb2ludFF1ZXJ5TW9kZS5BUFAgJiYgam9pbnRRdWVyeVBhcmFtZXRlcnMuZnVuY0lkICE9IG51bGwpXHJcbiAgICAgICAgfHwgKHRoaXMuYmlsbEluZm8uam9pbnRRdWVyeU1vZGUgPT0gSm9pbnRRdWVyeU1vZGUuVVJMICYmIGpvaW50UXVlcnlQYXJhbWV0ZXJzLnVybCAhPSBudWxsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaGFzTGluayA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2tMaW5rKCkge1xyXG4gICAgdGhpcy5pbnRlcm5hbFVpU2VydmljZS5vcGVuQmlsbERldGFpbFdpdGhGaWVsZHModGhpcy5iaWxsSW5mbywgdGhpcy5iaWxsRGF0YUluZm8sIHRoaXMuZmllbGRzV2l0aFZhbHVlKTtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iXX0=