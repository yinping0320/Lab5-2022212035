/**
 * @fileoverview added by tsickle
 * Generated from: lib/entity/tracking/TrackingHelper.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
var TrackingHelper = /** @class */ (function () {
    function TrackingHelper() {
    }
    /**
     * @param {?} originalDownBillInfos
     * @param {?} downBillInfos
     * @return {?}
     */
    TrackingHelper.concatDownBillInfos = /**
     * @param {?} originalDownBillInfos
     * @param {?} downBillInfos
     * @return {?}
     */
    function (originalDownBillInfos, downBillInfos) {
        var e_1, _a, e_2, _b;
        if (originalDownBillInfos == null) {
            originalDownBillInfos = new Array();
        }
        if (downBillInfos == null || downBillInfos.length == 0) {
            return originalDownBillInfos;
        }
        /** @type {?} */
        var originalVoIds = new Array();
        originalDownBillInfos.forEach((/**
         * @param {?} info
         * @return {?}
         */
        function (info) { return originalVoIds.push(info.schemaId); }));
        try {
            for (var downBillInfos_1 = tslib_1.__values(downBillInfos), downBillInfos_1_1 = downBillInfos_1.next(); !downBillInfos_1_1.done; downBillInfos_1_1 = downBillInfos_1.next()) {
                var downBillInfo = downBillInfos_1_1.value;
                //是否存在某类单据
                if (originalVoIds.includes(downBillInfo.schemaId)) {
                    var _loop_1 = function (oldDownBillInfo) {
                        var e_3, _a, e_4, _b, e_5, _c, e_6, _d;
                        if (oldDownBillInfo.schemaId == downBillInfo.schemaId) {
                            /** @type {?} */
                            var oldBillDataInfos = oldDownBillInfo.billDataInfos;
                            /** @type {?} */
                            var dataIds_1 = new Array();
                            oldBillDataInfos.forEach((/**
                             * @param {?} dataInfo
                             * @return {?}
                             */
                            function (dataInfo) { return dataIds_1.push(dataInfo.dataId); }));
                            try {
                                for (var _e = tslib_1.__values(downBillInfo.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                    var billDataInfo = _f.value;
                                    //是否存在某张单据
                                    if (dataIds_1.includes(billDataInfo.dataId)) {
                                        try {
                                            for (var oldBillDataInfos_1 = tslib_1.__values(oldBillDataInfos), oldBillDataInfos_1_1 = oldBillDataInfos_1.next(); !oldBillDataInfos_1_1.done; oldBillDataInfos_1_1 = oldBillDataInfos_1.next()) {
                                                var oldBillDataInfo = oldBillDataInfos_1_1.value;
                                                if (oldBillDataInfo.dataId == billDataInfo.dataId) {
                                                    /** @type {?} */
                                                    var oldAssociations = oldBillDataInfo.trackingMappingAssociations;
                                                    try {
                                                        for (var _g = tslib_1.__values(billDataInfo.trackingMappingAssociations), _h = _g.next(); !_h.done; _h = _g.next()) {
                                                            var association = _h.value;
                                                            /** @type {?} */
                                                            var i = 0;
                                                            try {
                                                                for (var oldAssociations_1 = tslib_1.__values(oldAssociations), oldAssociations_1_1 = oldAssociations_1.next(); !oldAssociations_1_1.done; oldAssociations_1_1 = oldAssociations_1.next()) {
                                                                    var association1 = oldAssociations_1_1.value;
                                                                    //是否存在某条记录
                                                                    if (!(association.downBillDataIdPath == association1.downBillDataIdPath) ||
                                                                        !(association.downBillTableCodePath == association1.downBillTableCodePath) ||
                                                                        !(association.upBillDataIdPath == association1.upBillDataIdPath) ||
                                                                        !(association.upBillTableCodePath == association1.upBillTableCodePath)) {
                                                                        i++;
                                                                    }
                                                                }
                                                            }
                                                            catch (e_6_1) { e_6 = { error: e_6_1 }; }
                                                            finally {
                                                                try {
                                                                    if (oldAssociations_1_1 && !oldAssociations_1_1.done && (_d = oldAssociations_1.return)) _d.call(oldAssociations_1);
                                                                }
                                                                finally { if (e_6) throw e_6.error; }
                                                            }
                                                            if (i == oldAssociations.length) {
                                                                oldAssociations.push(association);
                                                            }
                                                        }
                                                    }
                                                    catch (e_5_1) { e_5 = { error: e_5_1 }; }
                                                    finally {
                                                        try {
                                                            if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                                                        }
                                                        finally { if (e_5) throw e_5.error; }
                                                    }
                                                }
                                            }
                                        }
                                        catch (e_4_1) { e_4 = { error: e_4_1 }; }
                                        finally {
                                            try {
                                                if (oldBillDataInfos_1_1 && !oldBillDataInfos_1_1.done && (_b = oldBillDataInfos_1.return)) _b.call(oldBillDataInfos_1);
                                            }
                                            finally { if (e_4) throw e_4.error; }
                                        }
                                    }
                                    else {
                                        oldBillDataInfos.push(billDataInfo);
                                    }
                                }
                            }
                            catch (e_3_1) { e_3 = { error: e_3_1 }; }
                            finally {
                                try {
                                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                                }
                                finally { if (e_3) throw e_3.error; }
                            }
                        }
                    };
                    try {
                        for (var originalDownBillInfos_1 = tslib_1.__values(originalDownBillInfos), originalDownBillInfos_1_1 = originalDownBillInfos_1.next(); !originalDownBillInfos_1_1.done; originalDownBillInfos_1_1 = originalDownBillInfos_1.next()) {
                            var oldDownBillInfo = originalDownBillInfos_1_1.value;
                            _loop_1(oldDownBillInfo);
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (originalDownBillInfos_1_1 && !originalDownBillInfos_1_1.done && (_b = originalDownBillInfos_1.return)) _b.call(originalDownBillInfos_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
                else {
                    originalVoIds.push(downBillInfo.schemaId);
                    originalDownBillInfos.push(downBillInfo);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (downBillInfos_1_1 && !downBillInfos_1_1.done && (_a = downBillInfos_1.return)) _a.call(downBillInfos_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return originalDownBillInfos;
    };
    /**
     * @param {?} originalUpBillInfos
     * @param {?} upBillInfos
     * @return {?}
     */
    TrackingHelper.concatUpBillInfos = /**
     * @param {?} originalUpBillInfos
     * @param {?} upBillInfos
     * @return {?}
     */
    function (originalUpBillInfos, upBillInfos) {
        var e_7, _a, e_8, _b;
        if (originalUpBillInfos == null) {
            originalUpBillInfos = new Array();
        }
        if (upBillInfos == null || upBillInfos.length == 0) {
            return originalUpBillInfos;
        }
        /** @type {?} */
        var originalVoIds = new Array();
        originalUpBillInfos.forEach((/**
         * @param {?} info
         * @return {?}
         */
        function (info) {
            originalVoIds.push(info.schemaId);
        }));
        try {
            for (var upBillInfos_1 = tslib_1.__values(upBillInfos), upBillInfos_1_1 = upBillInfos_1.next(); !upBillInfos_1_1.done; upBillInfos_1_1 = upBillInfos_1.next()) {
                var upBillInfo = upBillInfos_1_1.value;
                //是否存在某类单据
                if (originalVoIds.includes(upBillInfo.schemaId)) {
                    var _loop_2 = function (oldUpBillInfo) {
                        var e_9, _a, e_10, _b, e_11, _c, e_12, _d;
                        if (oldUpBillInfo.schemaId == upBillInfo.schemaId) {
                            /** @type {?} */
                            var oldBillDataInfos = oldUpBillInfo.billDataInfos;
                            /** @type {?} */
                            var dataIds_2 = new Array();
                            oldBillDataInfos.forEach((/**
                             * @param {?} dataInfo
                             * @return {?}
                             */
                            function (dataInfo) { return dataIds_2.push(dataInfo.dataId); }));
                            try {
                                for (var _e = tslib_1.__values(upBillInfo.billDataInfos), _f = _e.next(); !_f.done; _f = _e.next()) {
                                    var billDataInfo = _f.value;
                                    //是否存在某张单据
                                    if (dataIds_2.includes(billDataInfo.dataId)) {
                                        try {
                                            for (var oldBillDataInfos_2 = tslib_1.__values(oldBillDataInfos), oldBillDataInfos_2_1 = oldBillDataInfos_2.next(); !oldBillDataInfos_2_1.done; oldBillDataInfos_2_1 = oldBillDataInfos_2.next()) {
                                                var oldBillDataInfo = oldBillDataInfos_2_1.value;
                                                if (oldBillDataInfo.dataId == billDataInfo.dataId) {
                                                    /** @type {?} */
                                                    var oldAssociations = oldBillDataInfo.trackingMappingAssociations;
                                                    try {
                                                        for (var _g = tslib_1.__values(billDataInfo.trackingMappingAssociations), _h = _g.next(); !_h.done; _h = _g.next()) {
                                                            var association = _h.value;
                                                            /** @type {?} */
                                                            var i = 0;
                                                            try {
                                                                for (var oldAssociations_2 = tslib_1.__values(oldAssociations), oldAssociations_2_1 = oldAssociations_2.next(); !oldAssociations_2_1.done; oldAssociations_2_1 = oldAssociations_2.next()) {
                                                                    var association1 = oldAssociations_2_1.value;
                                                                    //是否存在某条记录
                                                                    if (!(association.downBillDataIdPath == association1.downBillDataIdPath) ||
                                                                        !(association.downBillTableCodePath == association1.downBillTableCodePath) ||
                                                                        !(association.upBillDataIdPath == association1.upBillDataIdPath) ||
                                                                        !(association.upBillTableCodePath == association1.upBillTableCodePath)) {
                                                                        i++;
                                                                    }
                                                                }
                                                            }
                                                            catch (e_12_1) { e_12 = { error: e_12_1 }; }
                                                            finally {
                                                                try {
                                                                    if (oldAssociations_2_1 && !oldAssociations_2_1.done && (_d = oldAssociations_2.return)) _d.call(oldAssociations_2);
                                                                }
                                                                finally { if (e_12) throw e_12.error; }
                                                            }
                                                            if (i == oldAssociations.length) {
                                                                oldAssociations.push(association);
                                                            }
                                                        }
                                                    }
                                                    catch (e_11_1) { e_11 = { error: e_11_1 }; }
                                                    finally {
                                                        try {
                                                            if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                                                        }
                                                        finally { if (e_11) throw e_11.error; }
                                                    }
                                                }
                                            }
                                        }
                                        catch (e_10_1) { e_10 = { error: e_10_1 }; }
                                        finally {
                                            try {
                                                if (oldBillDataInfos_2_1 && !oldBillDataInfos_2_1.done && (_b = oldBillDataInfos_2.return)) _b.call(oldBillDataInfos_2);
                                            }
                                            finally { if (e_10) throw e_10.error; }
                                        }
                                    }
                                    else {
                                        oldBillDataInfos.push(billDataInfo);
                                    }
                                }
                            }
                            catch (e_9_1) { e_9 = { error: e_9_1 }; }
                            finally {
                                try {
                                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                                }
                                finally { if (e_9) throw e_9.error; }
                            }
                        }
                    };
                    try {
                        for (var originalUpBillInfos_1 = tslib_1.__values(originalUpBillInfos), originalUpBillInfos_1_1 = originalUpBillInfos_1.next(); !originalUpBillInfos_1_1.done; originalUpBillInfos_1_1 = originalUpBillInfos_1.next()) {
                            var oldUpBillInfo = originalUpBillInfos_1_1.value;
                            _loop_2(oldUpBillInfo);
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (originalUpBillInfos_1_1 && !originalUpBillInfos_1_1.done && (_b = originalUpBillInfos_1.return)) _b.call(originalUpBillInfos_1);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
                else {
                    originalVoIds.push(upBillInfo.schemaId);
                    originalUpBillInfos.push(upBillInfo);
                }
            }
        }
        catch (e_7_1) { e_7 = { error: e_7_1 }; }
        finally {
            try {
                if (upBillInfos_1_1 && !upBillInfos_1_1.done && (_a = upBillInfos_1.return)) _a.call(upBillInfos_1);
            }
            finally { if (e_7) throw e_7.error; }
        }
        return originalUpBillInfos;
    };
    return TrackingHelper;
}());
export { TrackingHelper };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhY2tpbmdIZWxwZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWJpZi9ydW50aW1lLWFwaS8iLCJzb3VyY2VzIjpbImxpYi9lbnRpdHkvdHJhY2tpbmcvVHJhY2tpbmdIZWxwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0E7SUFBQTtJQThIQSxDQUFDOzs7Ozs7SUE3SGlCLGtDQUFtQjs7Ozs7SUFBakMsVUFBa0MscUJBQTBDLEVBQUUsYUFBa0M7O1FBQzVHLElBQUkscUJBQXFCLElBQUksSUFBSSxFQUFFO1lBQy9CLHFCQUFxQixHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7U0FDdkM7UUFFRCxJQUFJLGFBQWEsSUFBSSxJQUFJLElBQUksYUFBYSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDcEQsT0FBTyxxQkFBcUIsQ0FBQztTQUNoQzs7WUFFRyxhQUFhLEdBQWtCLElBQUksS0FBSyxFQUFFO1FBQzlDLHFCQUFxQixDQUFDLE9BQU87Ozs7UUFBQyxVQUFBLElBQUksSUFBSSxPQUFBLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFqQyxDQUFpQyxFQUFDLENBQUM7O1lBRXpFLEtBQXlCLElBQUEsa0JBQUEsaUJBQUEsYUFBYSxDQUFBLDRDQUFBLHVFQUFFO2dCQUFuQyxJQUFJLFlBQVksMEJBQUE7Z0JBQ2pCLFVBQVU7Z0JBQ1YsSUFBSSxhQUFhLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRTs0Q0FDdEMsZUFBZTs7d0JBQ3BCLElBQUksZUFBZSxDQUFDLFFBQVEsSUFBSSxZQUFZLENBQUMsUUFBUSxFQUFFOztnQ0FDL0MsZ0JBQWdCLEdBQXdCLGVBQWUsQ0FBQyxhQUFhOztnQ0FDckUsU0FBTyxHQUFrQixJQUFJLEtBQUssRUFBRTs0QkFDeEMsZ0JBQWdCLENBQUMsT0FBTzs7Ozs0QkFBQyxVQUFBLFFBQVEsSUFBSSxPQUFBLFNBQU8sQ0FBQyxJQUFJLENBQUMs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QXFCLENBQUM7d0VBQzFFLENBQUMsQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLElBQUksWUFBWSxDQUFDLGdCQUFnQixDQUFDO3dFQUNoRSxDQUFDLENBQUMsV0FBVyxDQUFDLG1CQUFtQixJQUFJLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO3dFQUN4RSxDQUFDLEVBQUUsQ0FBQztxRUFDUDtpRUFDSjs7Ozs7Ozs7OzREQUNELElBQUksQ0FBQyxJQUFJLGVBQWUsQ0FBQyxNQUFNLEVBQUU7Z0VBQzdCLGVBQWUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7NkRBQ3JDO3lEQUNKOzs7Ozs7Ozs7aURBQ0o7NkNBQ0o7Ozs7Ozs7OztxQ0FDSjt5Q0FDSTt3Q0FDRCxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7cUNBQ3ZDO2lDQUNKOzs7Ozs7Ozs7eUJBQ0o7Ozt3QkFuQ0wsS0FBMEIsSUFBQSx3QkFBQSxpQkFBQSxtQkFBbUIsQ0FBQSx3REFBQTs0QkFBeEMsSUFBSSxhQUFhLGdDQUFBO29DQUFiLGFBQWE7eUJBb0NyQjs7Ozs7Ozs7O2lCQUNKO3FCQUNJO29CQUNELGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUN4QyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7aUJBQ3hDO2FBQ0o7Ozs7Ozs7OztRQUVELE9BQU8sbUJBQW1CLENBQUM7SUFDL0IsQ0FBQztJQUNMLHFCQUFDO0FBQUQsQ0FBQyxBQTlIRCxJQThIQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvd25CaWxsSW5mbyB9IGZyb20gJy4vRG93bkJpbGxJbmZvJztcclxuaW1wb3J0IHsgQmlsbERhdGFJbmZvIH0gZnJvbSAnLi9CaWxsRGF0YUluZm8nO1xyXG5pbXBvcnQgeyBUcmFja2luZ01hcHBpbmdBc3NvY2lhdGlvbiB9IGZyb20gJy4vVHJhY2tpbmdNYXBwaW5nQXNzb2NpYXRpb24nO1xyXG5pbXBvcnQgeyBVcEJpbGxJbmZvIH0gZnJvbSAnLi9VcEJpbGxJbmZvJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUcmFja2luZ0hlbHBlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbmNhdERvd25CaWxsSW5mb3Mob3JpZ2luYWxEb3duQmlsbEluZm9zOiBBcnJheTxEb3duQmlsbEluZm8+LCBkb3duQmlsbEluZm9zOiBBcnJheTxEb3duQmlsbEluZm8+KTogQXJyYXk8RG93bkJpbGxJbmZvPiB7XHJcbiAgICAgICAgaWYgKG9yaWdpbmFsRG93bkJpbGxJbmZvcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRG93bkJpbGxJbmZvcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRvd25CaWxsSW5mb3MgPT0gbnVsbCB8fCBkb3duQmlsbEluZm9zLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbERvd25CaWxsSW5mb3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgb3JpZ2luYWxWb0lkczogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIG9yaWdpbmFsRG93bkJpbGxJbmZvcy5mb3JFYWNoKGluZm8gPT4gb3JpZ2luYWxWb0lkcy5wdXNoKGluZm8uc2NoZW1hSWQpKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZG93bkJpbGxJbmZvIG9mIGRvd25CaWxsSW5mb3MpIHtcclxuICAgICAgICAgICAgLy/mmK/lkKblrZjlnKjmn5DnsbvljZXmja5cclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsVm9JZHMuaW5jbHVkZXMoZG93bkJpbGxJbmZvLnNjaGVtYUlkKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb2xkRG93bkJpbGxJbmZvIG9mIG9yaWdpbmFsRG93bkJpbGxJbmZvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGREb3duQmlsbEluZm8uc2NoZW1hSWQgPT0gZG93bkJpbGxJbmZvLnNjaGVtYUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRCaWxsRGF0YUluZm9zOiBBcnJheTxCaWxsRGF0YUluZm8+ID0gb2xkRG93bkJpbGxJbmZvLmJpbGxEYXRhSW5mb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhSWRzOiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEJpbGxEYXRhSW5mb3MuZm9yRWFjaChkYXRhSW5mbyA9PiBkYXRhSWRzLnB1c2goZGF0YUluZm8uZGF0YUlkKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiaWxsRGF0YUluZm8gb2YgZG93bkJpbGxJbmZvLmJpbGxEYXRhSW5mb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5a2Y5Zyo5p+Q5byg5Y2V5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUlkcy5pbmNsdWRlcyhiaWxsRGF0YUluZm8uZGF0YUlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG9sZEJpbGxEYXRhSW5mbyBvZiBvbGRCaWxsRGF0YUluZm9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRCaWxsRGF0YUluZm8uZGF0YUlkID09IGJpbGxEYXRhSW5mby5kYXRhSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRBc3NvY2lhdGlvbnM6IEFycmF5PFRyYWNraW5nTWFwcGluZ0Fzc29jaWF0aW9uPiA9IG9sZEJpbGxEYXRhSW5mby50cmFja2luZ01hcHBpbmdBc3NvY2lhdGlvbnM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYXNzb2NpYXRpb24gb2YgYmlsbERhdGFJbmZvLnRyYWNraW5nTWFwcGluZ0Fzc29jaWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhc3NvY2lhdGlvbjEgb2Ygb2xkQXNzb2NpYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5a2Y5Zyo5p+Q5p2h6K6w5b2VXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGFzc29jaWF0aW9uLmRvd25CaWxsRGF0YUlkUGF0aCA9PSBhc3NvY2lhdGlvbjEuZG93bkJpbGxEYXRhSWRQYXRoKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIShhc3NvY2lhdGlvbi5kb3duQmlsbFRhYmxlQ29kZVBhdGggPT0gYXNzb2NpYXRpb24xLmRvd25CaWxsVGFibGVDb2RlUGF0aCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoYXNzb2NpYXRpb24udXBCaWxsRGF0YUlkUGF0aCA9PSBhc3NvY2lhdGlvbjEudXBCaWxsRGF0YUlkUGF0aCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoYXNzb2NpYXRpb24udXBCaWxsVGFibGVDb2RlUGF0aCA9PSBhc3NvY2lhdGlvbjEudXBCaWxsVGFibGVDb2RlUGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBvbGRBc3NvY2lhdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEFzc29jaWF0aW9ucy5wdXNoKGFzc29jaWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRCaWxsRGF0YUluZm9zLnB1c2goYmlsbERhdGFJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsVm9JZHMucHVzaChkb3duQmlsbEluZm8uc2NoZW1hSWQpO1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxEb3duQmlsbEluZm9zLnB1c2goZG93bkJpbGxJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsRG93bkJpbGxJbmZvcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbmNhdFVwQmlsbEluZm9zKG9yaWdpbmFsVXBCaWxsSW5mb3M6IEFycmF5PFVwQmlsbEluZm8+LCB1cEJpbGxJbmZvczogQXJyYXk8VXBCaWxsSW5mbz4pOiBBcnJheTxVcEJpbGxJbmZvPiB7XHJcbiAgICAgICAgaWYgKG9yaWdpbmFsVXBCaWxsSW5mb3MgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBvcmlnaW5hbFVwQmlsbEluZm9zID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodXBCaWxsSW5mb3MgPT0gbnVsbCB8fCB1cEJpbGxJbmZvcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxVcEJpbGxJbmZvcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvcmlnaW5hbFZvSWRzOiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgb3JpZ2luYWxVcEJpbGxJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xyXG4gICAgICAgICAgICBvcmlnaW5hbFZvSWRzLnB1c2goaW5mby5zY2hlbWFJZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHVwQmlsbEluZm8gb2YgdXBCaWxsSW5mb3MpIHtcclxuICAgICAgICAgICAgLy/mmK/lkKblrZjlnKjmn5DnsbvljZXmja5cclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsVm9JZHMuaW5jbHVkZXModXBCaWxsSW5mby5zY2hlbWFJZCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG9sZFVwQmlsbEluZm8gb2Ygb3JpZ2luYWxVcEJpbGxJbmZvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRVcEJpbGxJbmZvLnNjaGVtYUlkID09IHVwQmlsbEluZm8uc2NoZW1hSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9sZEJpbGxEYXRhSW5mb3M6IEFycmF5PEJpbGxEYXRhSW5mbz4gPSBvbGRVcEJpbGxJbmZvLmJpbGxEYXRhSW5mb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhSWRzOiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEJpbGxEYXRhSW5mb3MuZm9yRWFjaChkYXRhSW5mbyA9PiBkYXRhSWRzLnB1c2goZGF0YUluZm8uZGF0YUlkKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiaWxsRGF0YUluZm8gb2YgdXBCaWxsSW5mby5iaWxsRGF0YUluZm9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuWtmOWcqOafkOW8oOWNleaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFJZHMuaW5jbHVkZXMoYmlsbERhdGFJbmZvLmRhdGFJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBvbGRCaWxsRGF0YUluZm8gb2Ygb2xkQmlsbERhdGFJbmZvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkQmlsbERhdGFJbmZvLmRhdGFJZCA9PSBiaWxsRGF0YUluZm8uZGF0YUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2xkQXNzb2NpYXRpb25zOiBBcnJheTxUcmFja2luZ01hcHBpbmdBc3NvY2lhdGlvbj4gPSBvbGRCaWxsRGF0YUluZm8udHJhY2tpbmdNYXBwaW5nQXNzb2NpYXRpb25zO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGFzc29jaWF0aW9uIG9mIGJpbGxEYXRhSW5mby50cmFja2luZ01hcHBpbmdBc3NvY2lhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYXNzb2NpYXRpb24xIG9mIG9sZEFzc29jaWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuWtmOWcqOafkOadoeiusOW9lVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhc3NvY2lhdGlvbi5kb3duQmlsbERhdGFJZFBhdGggPT0gYXNzb2NpYXRpb24xLmRvd25CaWxsRGF0YUlkUGF0aCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoYXNzb2NpYXRpb24uZG93bkJpbGxUYWJsZUNvZGVQYXRoID09IGFzc29jaWF0aW9uMS5kb3duQmlsbFRhYmxlQ29kZVBhdGgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKGFzc29jaWF0aW9uLnVwQmlsbERhdGFJZFBhdGggPT0gYXNzb2NpYXRpb24xLnVwQmlsbERhdGFJZFBhdGgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKGFzc29jaWF0aW9uLnVwQmlsbFRhYmxlQ29kZVBhdGggPT0gYXNzb2NpYXRpb24xLnVwQmlsbFRhYmxlQ29kZVBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gb2xkQXNzb2NpYXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRBc3NvY2lhdGlvbnMucHVzaChhc3NvY2lhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQmlsbERhdGFJbmZvcy5wdXNoKGJpbGxEYXRhSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFZvSWRzLnB1c2godXBCaWxsSW5mby5zY2hlbWFJZCk7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFVwQmlsbEluZm9zLnB1c2godXBCaWxsSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbFVwQmlsbEluZm9zO1xyXG4gICAgfVxyXG59Il19