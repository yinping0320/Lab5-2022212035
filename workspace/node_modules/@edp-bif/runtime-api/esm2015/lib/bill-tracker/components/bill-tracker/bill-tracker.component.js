/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker/bill-tracker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Inject, LOCALE_ID, Input, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef, Optional, ApplicationRef, Injector, ComponentFactoryResolver, ReflectiveInjector } from '@angular/core';
import { BillTrackerGraphComponent } from '../bill-tracker-graph/bill-tracker-graph.component';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataComponent } from '../bill-tracker-data/bill-tracker-data.component';
import { BsModalService } from '@farris/ui-modal';
import { LoadingService } from "@farris/ui-loading";
import { MessagerService } from "@farris/ui-messager";
import { NotifyService } from "@farris/ui-notify";
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { Events } from '../../mxgraph-ext/Events';
import { BillTrackerInternalUiService } from '../../services/bill-tracker-internal-ui.service';
import { mxEvent } from '../../../ref/mxgraph';
export class BillTrackerComponent {
    /**
     * @param {?} args
     * @param {?} localeId
     * @param {?} dataService
     * @param {?} notify
     * @param {?} messager
     * @param {?} loading
     * @param {?} modal
     * @param {?} cdf
     * @param {?} vcr
     * @param {?} appr
     * @param {?} inj
     * @param {?} cfr
     */
    constructor(args, localeId, dataService, notify, messager, loading, modal, cdf, vcr, appr, inj, cfr) {
        this.localeId = localeId;
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.cdf = cdf;
        this.vcr = vcr;
        this.appr = appr;
        this.inj = inj;
        this.cfr = cfr;
        this.defaultDataWrapperHeight = 180;
        this.dataWrapperHeight = 180;
        this.showData = false;
        this.dataFullScreen = false;
        this.billTrackerArgs = args;
        this.dataInfoService = new BillTrackerDataInfoService();
        this.newBTS = this.dataInfoService.isNewBTS(this.billTrackerArgs.canTrackingResult.billTrackingSettings);
        /** @type {?} */
        const inject = ReflectiveInjector.resolveAndCreate([
            BillTrackerInternalUiService
        ], this.inj);
        this.internalUiService = inject.get(BillTrackerInternalUiService, null);
        this.defaultDataWrapperHeight = args && args.gridOptions && args.gridOptions.defaultHeight ? args.gridOptions.defaultHeight : this.defaultDataWrapperHeight;
        this.dataWrapperHeight = this.defaultDataWrapperHeight;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.paintGraph();
        }), 0);
    }
    /**
     * @return {?}
     */
    paintGraph() {
        this.billGraph.paint();
        this.graphZoomScale = this.billGraph.getZoomScale();
        this.billGraph.graph.view.addListener(mxEvent.SCALE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            // console.log(sender, evt);
            this.graphZoomScale = this.billGraph.getZoomScale();
        }));
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    selectHandler(cell) {
        if (cell) {
            /** @type {?} */
            const billInfo = cell.billInfo;
            /** @type {?} */
            const billDataInfo = cell.billDataInfo;
            if (billInfo == this.lastBillInfo && billDataInfo == this.lastBillDataInfo && this.showData == true) {
                return;
            }
            /** @type {?} */
            const args = this.dataService.buildGetMainEntityDataArgs(billInfo, billDataInfo);
            this.billData.showDataGrid(args, billInfo, billDataInfo, null);
            // 重置滚动条
            this.divDataWrapperER.nativeElement.scrollTo({ top: 0 });
            this.showData = true;
            this.lastBillInfo = billInfo;
            this.lastBillDataInfo = billDataInfo;
        }
        else {
            this.billData.clearDataRegion();
            this.showData = false;
        }
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    stateChangeHandler(evt) {
        if (evt.type == Events.CLICK_FIRST_SUMMARY) {
            this.openBillDetail(evt.data);
        }
    }
    /**
     * @param {?} modalRef
     * @return {?}
     */
    setModalRef(modalRef) {
        this.modalRef = modalRef;
        if (this.billGraph != null) {
            this.billGraph.setModalRef(modalRef);
        }
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    resetGraphHeight(evt) {
        ((/** @type {?} */ (evt.host))).style.top = '';
        ((/** @type {?} */ (evt.host))).style.left = '';
        this.graphContainerER.nativeElement.style.height = `${this.mainContainerER.nativeElement.clientHeight - evt.size.height}px`;
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.billGraph.refresh();
        }));
    }
    /**
     * @return {?}
     */
    expandDataRegion() {
        this.dataFullScreen = true;
        this.divDataWrapperER.nativeElement.style.height = '100%';
        this.divDataWrapperER.nativeElement.style.top = '0';
    }
    /**
     * @return {?}
     */
    collapseDataRegion() {
        this.dataFullScreen = false;
        this.dataWrapperHeight = this.defaultDataWrapperHeight;
        this.divDataWrapperER.nativeElement.style.height = this.dataWrapperHeight + "px";
        this.divDataWrapperER.nativeElement.style.top = null;
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    onRzResized(evt) {
        if (evt.position.top < 0) {
            this.divDataWrapperER.nativeElement.style.top = '0';
            this.divDataWrapperER.nativeElement.style.height = '100%';
            this.dataFullScreen = true;
        }
    }
    /**
     * @return {?}
     */
    graphZoomIn() {
        this.billGraph.zoomIn();
    }
    /**
     * @return {?}
     */
    graphZoomOut() {
        this.billGraph.zoomOut();
    }
    /**
     * @return {?}
     */
    graphZoomActual() {
        this.billGraph.zoomActual();
    }
    /**
     * @return {?}
     */
    graphPrint() {
        this.billGraph.print();
    }
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    graphExpand(direction, all = false) {
        this.billGraph.expand(direction, all);
    }
    /**
     * @return {?}
     */
    graphExpandUpAll() {
        this.graphExpand(BillTrackerDirection.Up, true);
    }
    /**
     * @return {?}
     */
    graphExpandUp() {
        this.graphExpand(BillTrackerDirection.Up, false);
    }
    /**
     * @return {?}
     */
    graphExpandDown() {
        this.graphExpand(BillTrackerDirection.Down, false);
    }
    /**
     * @return {?}
     */
    graphExpandDownAll() {
        this.graphExpand(BillTrackerDirection.Down, true);
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    openBillDetail(cell) {
        this.internalUiService.openBillDetail(cell.billInfo, cell.billDataInfo);
    }
}
BillTrackerComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-bill-tracker',
                template: "<div class=\"g-main\" style=\"height: 100%; background-color: #ffffff;\" #mainContainer>\r\n  <div class=\"bill-tracker-toolbar-wrapper\" *ngIf=\"modalRef!=null\">\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUpAll()\">\r\n      {{'expandUpAll'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandUp()\">\r\n      {{'expandUp'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDown()\">\r\n      {{'expandDown'|billTrackerLocale}}\r\n    </button>\r\n    <button class=\"btn btn-secondary bill-tracker-toolbar-btn mr-1\" (click)=\"graphExpandDownAll()\">\r\n      {{'expandDownAll'|billTrackerLocale}}\r\n    </button>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomOut()\">\r\n      <i class=\"f-icon f-icon-minus\" title=\"{{'zoomOut' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-input\">\r\n      <input *ngIf=\"false\" type=\"text\" style=\"border: 0; width: 30px; text-align: right;\" readonly\r\n        [(ngModel)]=\"graphZoomScale\">\r\n      <span style=\"border: 0; width: 30px; text-align: right;\">{{graphZoomScale}}</span>\r\n      <span>%</span>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomIn()\">\r\n      <i class=\"f-icon f-icon-add\" title=\"{{'zoomIn' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphZoomActual()\">\r\n      <i class=\"f-icon f-icon-reset\" title=\"{{'zoomReset' | billTrackerLocale}}\"></i>\r\n    </div>\r\n    <div class=\"bill-tracker-toolbar-icon\" (click)=\"graphPrint()\" *ngIf=\"false\">\r\n      <i class=\"f-icon f-icon-print\" title=\"{{'print' | billTrackerLocale}}\"></i>\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-graph-wrapper\" #graphContainer>\r\n    <lib-bill-tracker-graph #billGraph [billTrackerArgs]=\"billTrackerArgs\" (select)=\"selectHandler($event)\"\r\n      (stateChange)=\"stateChangeHandler($event)\">\r\n    </lib-bill-tracker-graph>\r\n  </div>\r\n</div>\r\n<!-- todo: \u5206\u5272\u6761\u6682\u672A\u52A0\u6700\u5927\u9AD8\u5EA6\u9650\u5236 -->\r\n<div #divDataWrapper class=\"bill-tracker-data-wrapper\" [style.height]=\"dataWrapperHeight + 'px'\"\r\n  [style.display]=\"showData ? null : 'none'\" ngResizable rzAspectRatio=\"false\" [rzHandles]=\"'n'\" [rzMinHeight]=\"40\"\r\n  (rzStop)=\"onRzResized($event)\">\r\n  <div class=\"bill-tracker-divider-wrapper\">\r\n    <div class=\"bill-tracker-divider bill-tracker-divider-transparent bill-tracker-divider-img\">\r\n    </div>\r\n  </div>\r\n  <div class=\"bill-tracker-fold-container\">\r\n    <div class=\"bill-tracker-fold-wrapper\">\r\n      <div class=\"bill-tracker-fold-icon\">\r\n        <i class=\"f-icon f-icon-arrow-seek-up\" *ngIf=\"dataFullScreen==false\" (click)=\"expandDataRegion()\"></i>\r\n        <i class=\"f-icon f-icon-arrow-seek-down\" *ngIf=\"dataFullScreen==true\" (click)=\"collapseDataRegion()\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div #divDataTable class=\"bill-tracker-data-table-wrapper\">\r\n    <lib-bill-tracker-data #billData></lib-bill-tracker-data>\r\n  </div>\r\n</div>\r\n",
                providers: [
                    BillTrackerDataService
                ],
                changeDetection: ChangeDetectionStrategy.Default,
                styles: [".bill-tracker-divider{position:relative;height:5px}.bill-tracker-divider-transparent:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#e9ecf3}.bill-tracker-divider-transparent:hover:before{content:\"\";position:absolute;top:1px;left:0;width:100%;height:2px;background-color:#3f65ff}.bill-tracker-divider-img:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator.svg);background-repeat:no-repeat}.bill-tracker-divider-img:hover:after{content:\"\";position:absolute;top:-1px;left:50%;width:60px;height:5px;background-image:url(/platform/runtime/common/web/@edp-bif/runtime-api/images/separator-hover.svg);background-repeat:no-repeat}.bill-tracker-graph-wrapper{height:100%;position:relative}.bill-tracker-data-wrapper{z-index:2;overflow-y:auto;position:absolute;left:0;width:100%;bottom:0;height:200px;background-color:#fff;overflow:hidden}.bill-tracker-data-wrapper .ng-resizable-handle.ng-resizable-n{height:10px}.bill-tracker-data-table-wrapper{position:relative;width:100%;padding-top:6px;height:100%;overflow:auto}.bill-tracker-fold-wrapper{z-index:1;position:absolute;right:1rem;top:0;width:2rem;height:2rem}.bill-tracker-fold-icon{display:inline-flex;width:1.5em;height:1.5em;line-height:1.5em;text-align:center;color:#848c9a;background:#fff;border-radius:1.5em;border:1px solid #e9ecf3;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden;margin:.5em .5em 0 0}.bill-tracker-fold-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-wrapper{z-index:1;position:absolute;right:0;top:0;display:flex;margin-right:14px;margin-top:14px;background-color:#fff}.bill-tracker-toolbar-icon{background:#fff;width:22px;height:22px;line-height:22px;text-align:center;color:#595d63;border:1px solid #e8ebf2;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);border-radius:22px;justify-content:center;align-items:center;flex-shrink:0;overflow:hidden}.bill-tracker-toolbar-icon:hover{background-image:linear-gradient(214deg,#3f65ff 0,#4d9aff 100%);box-shadow:0 3px 8px 0 rgba(78,148,255,.4);color:#fff}.bill-tracker-toolbar-btn:hover{background-color:#fff}.bill-tracker-fold-container{position:fixed;height:2rem;width:100%;z-index:1}"]
            }] }
];
/** @nocollapse */
BillTrackerComponent.ctorParameters = () => [
    { type: BillTrackerArgs },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: BillTrackerDataService },
    { type: NotifyService },
    { type: MessagerService },
    { type: LoadingService },
    { type: BsModalService },
    { type: ChangeDetectorRef },
    { type: ViewContainerRef },
    { type: ApplicationRef },
    { type: Injector, decorators: [{ type: Optional }] },
    { type: ComponentFactoryResolver, decorators: [{ type: Optional }] }
];
BillTrackerComponent.propDecorators = {
    billGraph: [{ type: ViewChild, args: ["billGraph",] }],
    billGraphVCR: [{ type: ViewChild, args: ["billGraph", { read: ViewContainerRef },] }],
    mainContainerER: [{ type: ViewChild, args: ["mainContainer",] }],
    graphContainerER: [{ type: ViewChild, args: ["graphContainer",] }],
    billData: [{ type: ViewChild, args: ["billData",] }],
    billDataVCR: [{ type: ViewChild, args: ["billData", { read: ViewContainerRef },] }],
    divDataTableER: [{ type: ViewChild, args: ["divDataTable",] }],
    divDataWrapperER: [{ type: ViewChild, args: ["divDataWrapper",] }],
    billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
};
if (false) {
    /** @type {?} */
    BillTrackerComponent.prototype.billGraph;
    /** @type {?} */
    BillTrackerComponent.prototype.billGraphVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.mainContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.graphContainerER;
    /** @type {?} */
    BillTrackerComponent.prototype.billData;
    /** @type {?} */
    BillTrackerComponent.prototype.billDataVCR;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataTableER;
    /** @type {?} */
    BillTrackerComponent.prototype.divDataWrapperER;
    /** @type {?} */
    BillTrackerComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerComponent.prototype.defaultDataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.dataWrapperHeight;
    /** @type {?} */
    BillTrackerComponent.prototype.showData;
    /** @type {?} */
    BillTrackerComponent.prototype.dataFullScreen;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.lastBillDataInfo;
    /** @type {?} */
    BillTrackerComponent.prototype.graphZoomScale;
    /** @type {?} */
    BillTrackerComponent.prototype.newBTS;
    /** @type {?} */
    BillTrackerComponent.prototype.dataInfoService;
    /** @type {?} */
    BillTrackerComponent.prototype.internalUiService;
    /** @type {?} */
    BillTrackerComponent.prototype.localeId;
    /** @type {?} */
    BillTrackerComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerComponent.prototype.notify;
    /** @type {?} */
    BillTrackerComponent.prototype.messager;
    /** @type {?} */
    BillTrackerComponent.prototype.loading;
    /** @type {?} */
    BillTrackerComponent.prototype.modal;
    /** @type {?} */
    BillTrackerComponent.prototype.cdf;
    /** @type {?} */
    BillTrackerComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerComponent.prototype.appr;
    /** @type {?} */
    BillTrackerComponent.prototype.inj;
    /** @type {?} */
    BillTrackerComponent.prototype.cfr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci9iaWxsLXRyYWNrZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBaUIsS0FBSyxFQUFFLFVBQVUsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsUSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxvREFBb0QsQ0FBQztBQUMvRixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFHNUYsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQzNGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxpREFB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RCxpREFBeUM7O0lBQ3pDLHdDQUEwQjs7SUFDMUIsOENBQWdDOztJQUNoQyw0Q0FBdUI7O0lBQ3ZCLGdEQUErQjs7SUFDL0IsOENBQXVCOztJQUV2QixzQ0FBZ0I7O0lBQ2hCLCtDQUE0Qzs7SUFDNUMsaURBQWdEOztJQUk5Qyx3Q0FBMEM7O0lBQzFDLDJDQUEwQzs7SUFDMUMsc0NBQTRCOztJQUM1Qix3Q0FBZ0M7O0lBQ2hDLHVDQUE4Qjs7SUFDOUIscUNBQTRCOztJQUM1QixtQ0FBNkI7O0lBQzdCLG1DQUE0Qjs7SUFDNUIsb0NBQTJCOztJQUMzQixtQ0FBZ0M7O0lBQ2hDLG1DQUFnRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEluamVjdCwgTE9DQUxFX0lELCBBZnRlclZpZXdJbml0LCBJbnB1dCwgRWxlbWVudFJlZiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBWaWV3Q29udGFpbmVyUmVmLCBPcHRpb25hbCwgQXBwbGljYXRpb25SZWYsIEluamVjdG9yLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIFJlZmxlY3RpdmVJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckdyYXBoQ29tcG9uZW50IH0gZnJvbSAnLi4vYmlsbC10cmFja2VyLWdyYXBoL2JpbGwtdHJhY2tlci1ncmFwaC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyQXJncyB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItYXJncyc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YUNvbXBvbmVudCB9IGZyb20gJy4uL2JpbGwtdHJhY2tlci1kYXRhL2JpbGwtdHJhY2tlci1kYXRhLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJpbGxEYXRhSW5mbyB9IGZyb20gJy4uLy4uLy4uL2VudGl0eS90cmFja2luZy9CaWxsRGF0YUluZm8nO1xyXG5pbXBvcnQgeyBCaWxsSW5mbyB9IGZyb20gJy4uLy4uLy4uL2VudGl0eS90cmFja2luZy9CaWxsSW5mbyc7XHJcbmltcG9ydCB7IEJzTW9kYWxSZWYsIEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9hZGluZ1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1tZXNzYWdlclwiO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbm90aWZ5XCI7XHJcbmltcG9ydCB7IElSZXNpemVFdmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZHJhZ2dhYmxlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS1pbmZvLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckRpcmVjdGlvbiB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItZGlyZWN0aW9uJztcclxuaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvRXZlbnRzJztcclxuaW1wb3J0IHsgQmlsbENlbGwgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9CaWxsQ2VsbCc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VySW50ZXJuYWxVaVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItaW50ZXJuYWwtdWkuc2VydmljZSc7XHJcbmltcG9ydCB7IG14RXZlbnQgfSBmcm9tICcuLi8uLi8uLi9yZWYvbXhncmFwaCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1iaWxsLXRyYWNrZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9iaWxsLXRyYWNrZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2JpbGwtdHJhY2tlci5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBCaWxsVHJhY2tlckRhdGFTZXJ2aWNlXHJcbiAgXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LkRlZmF1bHRcclxufSlcclxuZXhwb3J0IGNsYXNzIEJpbGxUcmFja2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBAVmlld0NoaWxkKFwiYmlsbEdyYXBoXCIpXHJcbiAgYmlsbEdyYXBoOiBCaWxsVHJhY2tlckdyYXBoQ29tcG9uZW50O1xyXG5cclxuICBAVmlld0NoaWxkKFwiYmlsbEdyYXBoXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gIGJpbGxHcmFwaFZDUjogVmlld0NvbnRhaW5lclJlZjtcclxuXHJcbiAgQFZpZXdDaGlsZChcIm1haW5Db250YWluZXJcIilcclxuICBtYWluQ29udGFpbmVyRVI6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xyXG5cclxuICBAVmlld0NoaWxkKFwiZ3JhcGhDb250YWluZXJcIilcclxuICBncmFwaENvbnRhaW5lckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcImJpbGxEYXRhXCIpXHJcbiAgYmlsbERhdGE6IEJpbGxUcmFja2VyRGF0YUNvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZChcImJpbGxEYXRhXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gIGJpbGxEYXRhVkNSOiBWaWV3Q29udGFpbmVyUmVmO1xyXG5cclxuICBAVmlld0NoaWxkKFwiZGl2RGF0YVRhYmxlXCIpXHJcbiAgZGl2RGF0YVRhYmxlRVI6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+O1xyXG5cclxuICBAVmlld0NoaWxkKFwiZGl2RGF0YVdyYXBwZXJcIilcclxuICBkaXZEYXRhV3JhcHBlckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgbW9kYWxSZWY6IEJzTW9kYWxSZWY7XHJcblxyXG4gIEBJbnB1dChcImJpbGxUcmFja2VyQXJnc1wiKVxyXG4gIGJpbGxUcmFja2VyQXJnczogQmlsbFRyYWNrZXJBcmdzO1xyXG5cclxuICBkZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQ6IG51bWJlciB8IHN0cmluZyA9IDE4MDtcclxuICBkYXRhV3JhcHBlckhlaWdodDogbnVtYmVyIHwgc3RyaW5nID0gMTgwO1xyXG4gIHNob3dEYXRhOiBib29sZWFuID0gZmFsc2U7XHJcbiAgZGF0YUZ1bGxTY3JlZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICBsYXN0QmlsbEluZm86IEJpbGxJbmZvO1xyXG4gIGxhc3RCaWxsRGF0YUluZm86IEJpbGxEYXRhSW5mbztcclxuICBncmFwaFpvb21TY2FsZTogbnVtYmVyO1xyXG5cclxuICBuZXdCVFM6IGJvb2xlYW47XHJcbiAgZGF0YUluZm9TZXJ2aWNlOiBCaWxsVHJhY2tlckRhdGFJbmZvU2VydmljZTtcclxuICBpbnRlcm5hbFVpU2VydmljZTogQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBhcmdzOiBCaWxsVHJhY2tlckFyZ3MsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHVibGljIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGF0YVNlcnZpY2U6IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1lc3NhZ2VyOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbG9hZGluZzogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwdWJsaWMgbW9kYWw6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHVibGljIGNkZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwdWJsaWMgdmNyOiBWaWV3Q29udGFpbmVyUmVmLFxyXG4gICAgcHVibGljIGFwcHI6IEFwcGxpY2F0aW9uUmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHVibGljIGluajogSW5qZWN0b3IsXHJcbiAgICBAT3B0aW9uYWwoKSBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgKSB7XHJcblxyXG4gICAgdGhpcy5iaWxsVHJhY2tlckFyZ3MgPSBhcmdzO1xyXG4gICAgdGhpcy5kYXRhSW5mb1NlcnZpY2UgPSBuZXcgQmlsbFRyYWNrZXJEYXRhSW5mb1NlcnZpY2UoKTtcclxuICAgIHRoaXMubmV3QlRTID0gdGhpcy5kYXRhSW5mb1NlcnZpY2UuaXNOZXdCVFModGhpcy5iaWxsVHJhY2tlckFyZ3MuY2FuVHJhY2tpbmdSZXN1bHQuYmlsbFRyYWNraW5nU2V0dGluZ3MpO1xyXG5cclxuICAgIGNvbnN0IGluamVjdCA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtcclxuICAgICAgQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZVxyXG4gICAgXSwgdGhpcy5pbmopO1xyXG4gICAgdGhpcy5pbnRlcm5hbFVpU2VydmljZSA9IGluamVjdC5nZXQoQmlsbFRyYWNrZXJJbnRlcm5hbFVpU2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQgPSBhcmdzICYmIGFyZ3MuZ3JpZE9wdGlvbnMgJiYgYXJncy5ncmlkT3B0aW9ucy5kZWZhdWx0SGVpZ2h0ID8gYXJncy5ncmlkT3B0aW9ucy5kZWZhdWx0SGVpZ2h0IDogdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQ7XHJcbiAgICB0aGlzLmRhdGFXcmFwcGVySGVpZ2h0ID0gdGhpcy5kZWZhdWx0RGF0YVdyYXBwZXJIZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuXHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5wYWludEdyYXBoKCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIHBhaW50R3JhcGgoKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC5wYWludCgpO1xyXG4gICAgdGhpcy5ncmFwaFpvb21TY2FsZSA9IHRoaXMuYmlsbEdyYXBoLmdldFpvb21TY2FsZSgpO1xyXG4gICAgdGhpcy5iaWxsR3JhcGguZ3JhcGgudmlldy5hZGRMaXN0ZW5lcihteEV2ZW50LlNDQUxFLCAoc2VuZGVyLCBldnQpID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2coc2VuZGVyLCBldnQpO1xyXG4gICAgICB0aGlzLmdyYXBoWm9vbVNjYWxlID0gdGhpcy5iaWxsR3JhcGguZ2V0Wm9vbVNjYWxlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEhhbmRsZXIoY2VsbCkge1xyXG4gICAgaWYgKGNlbGwpIHtcclxuICAgICAgY29uc3QgYmlsbEluZm86IEJpbGxJbmZvID0gY2VsbC5iaWxsSW5mbztcclxuICAgICAgY29uc3QgYmlsbERhdGFJbmZvOiBCaWxsRGF0YUluZm8gPSBjZWxsLmJpbGxEYXRhSW5mbztcclxuXHJcbiAgICAgIGlmIChiaWxsSW5mbyA9PSB0aGlzLmxhc3RCaWxsSW5mbyAmJiBiaWxsRGF0YUluZm8gPT0gdGhpcy5sYXN0QmlsbERhdGFJbmZvICYmIHRoaXMuc2hvd0RhdGEgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYXJncyA9IHRoaXMuZGF0YVNlcnZpY2UuYnVpbGRHZXRNYWluRW50aXR5RGF0YUFyZ3MoYmlsbEluZm8sIGJpbGxEYXRhSW5mbyk7XHJcbiAgICAgIHRoaXMuYmlsbERhdGEuc2hvd0RhdGFHcmlkKGFyZ3MsIGJpbGxJbmZvLCBiaWxsRGF0YUluZm8sIG51bGwpO1xyXG5cclxuICAgICAgLy8g6YeN572u5rua5Yqo5p2hXHJcbiAgICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvKHsgdG9wOiAwIH0pO1xyXG4gICAgICB0aGlzLnNob3dEYXRhID0gdHJ1ZTtcclxuICAgICAgdGhpcy5sYXN0QmlsbEluZm8gPSBiaWxsSW5mbztcclxuICAgICAgdGhpcy5sYXN0QmlsbERhdGFJbmZvID0gYmlsbERhdGFJbmZvO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5iaWxsRGF0YS5jbGVhckRhdGFSZWdpb24oKTtcclxuICAgICAgdGhpcy5zaG93RGF0YSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGVDaGFuZ2VIYW5kbGVyKGV2dDoge1xyXG4gICAgdHlwZTogYW55LFxyXG4gICAgZGF0YT86IGFueVxyXG4gIH0pIHtcclxuICAgIGlmIChldnQudHlwZSA9PSBFdmVudHMuQ0xJQ0tfRklSU1RfU1VNTUFSWSkge1xyXG4gICAgICB0aGlzLm9wZW5CaWxsRGV0YWlsKGV2dC5kYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1vZGFsUmVmKG1vZGFsUmVmOiBCc01vZGFsUmVmKSB7XHJcbiAgICB0aGlzLm1vZGFsUmVmID0gbW9kYWxSZWY7XHJcblxyXG4gICAgaWYgKHRoaXMuYmlsbEdyYXBoICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5iaWxsR3JhcGguc2V0TW9kYWxSZWYobW9kYWxSZWYpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRHcmFwaEhlaWdodChldnQ6IElSZXNpemVFdmVudCkge1xyXG4gICAgKGV2dC5ob3N0IGFzIEhUTUxFbGVtZW50KS5zdHlsZS50b3AgPSAnJztcclxuICAgIChldnQuaG9zdCBhcyBIVE1MRWxlbWVudCkuc3R5bGUubGVmdCA9ICcnO1xyXG4gICAgdGhpcy5ncmFwaENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5tYWluQ29udGFpbmVyRVIubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQgLSBldnQuc2l6ZS5oZWlnaHR9cHhgO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuYmlsbEdyYXBoLnJlZnJlc2goKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZXhwYW5kRGF0YVJlZ2lvbigpIHtcclxuICAgIHRoaXMuZGF0YUZ1bGxTY3JlZW4gPSB0cnVlO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gJzAnO1xyXG4gIH1cclxuXHJcbiAgY29sbGFwc2VEYXRhUmVnaW9uKCkge1xyXG4gICAgdGhpcy5kYXRhRnVsbFNjcmVlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5kYXRhV3JhcHBlckhlaWdodCA9IHRoaXMuZGVmYXVsdERhdGFXcmFwcGVySGVpZ2h0O1xyXG4gICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhV3JhcHBlckhlaWdodCArIFwicHhcIjtcclxuICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBvblJ6UmVzaXplZChldnQ6IElSZXNpemVFdmVudCkge1xyXG4gICAgaWYgKGV2dC5wb3NpdGlvbi50b3AgPCAwKSB7XHJcbiAgICAgIHRoaXMuZGl2RGF0YVdyYXBwZXJFUi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICcwJztcclxuICAgICAgdGhpcy5kaXZEYXRhV3JhcHBlckVSLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICB0aGlzLmRhdGFGdWxsU2NyZWVuID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdyYXBoWm9vbUluKCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGguem9vbUluKCk7XHJcbiAgfVxyXG5cclxuICBncmFwaFpvb21PdXQoKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC56b29tT3V0KCk7XHJcbiAgfVxyXG5cclxuICBncmFwaFpvb21BY3R1YWwoKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC56b29tQWN0dWFsKCk7XHJcbiAgfVxyXG5cclxuICBncmFwaFByaW50KCkge1xyXG4gICAgdGhpcy5iaWxsR3JhcGgucHJpbnQoKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kKGRpcmVjdGlvbjogQmlsbFRyYWNrZXJEaXJlY3Rpb24sIGFsbDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLmJpbGxHcmFwaC5leHBhbmQoZGlyZWN0aW9uLCBhbGwpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhFeHBhbmRVcEFsbCgpIHtcclxuICAgIHRoaXMuZ3JhcGhFeHBhbmQoQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXAsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhFeHBhbmRVcCgpIHtcclxuICAgIHRoaXMuZ3JhcGhFeHBhbmQoQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXAsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGdyYXBoRXhwYW5kRG93bigpIHtcclxuICAgIHRoaXMuZ3JhcGhFeHBhbmQoQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93biwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZ3JhcGhFeHBhbmREb3duQWxsKCkge1xyXG4gICAgdGhpcy5ncmFwaEV4cGFuZChCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIG9wZW5CaWxsRGV0YWlsKGNlbGw6IEJpbGxDZWxsKSB7XHJcbiAgICB0aGlzLmludGVybmFsVWlTZXJ2aWNlLm9wZW5CaWxsRGV0YWlsKGNlbGwuYmlsbEluZm8sIGNlbGwuYmlsbERhdGFJbmZvKTtcclxuICB9XHJcbn1cclxuIl19