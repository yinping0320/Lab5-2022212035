/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/components/bill-tracker-graph/bill-tracker-graph.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, ElementRef, Output, EventEmitter, Inject, LOCALE_ID, Input, ViewContainerRef, Injector, ComponentFactoryResolver, ChangeDetectorRef } from '@angular/core';
import { Graph } from '../../mxgraph-ext/Graph';
import { mxEvent, mxGraphHandler, mxEventObject, mxGraphSelectionModel, mxConstants, mxImage, mxClient, mxGuide, mxPolyline, mxLayoutManager, mxConnectionHandler, mxEllipse, mxHandle, mxVertexHandler, mxPoint, mxPrintPreview, mxPopupMenu } from "../../../ref/mxgraph";
import { BillTrackerArgs } from '../../config/bill-tracker-args';
import { BillTrackerDataService } from '../../services/bill-tracker-data.service';
import { BillTrackerDirection } from '../../config/bill-tracker-direction';
import { BillTrackerLocalePipe } from '../../pipe/bill-tracker-locale.pipe';
import { MessagerService } from '@farris/ui-messager';
import { LoadingService } from '@farris/ui-loading';
import { BsModalService } from '@farris/ui-modal';
import { BillTrackerConstant } from '../../config/bill-tracker-constant';
import { RevertCompactTreeLayout } from '../../mxgraph-ext/RevertCompactTreeLayout';
import { CompactTreeLayout } from '../../mxgraph-ext/CompactTreeLayout';
import { EntryCellData } from '../../../entity/tracking/cell-data/EntryCellData';
import { UpCellData } from '../../../entity/tracking/cell-data/UpCellData';
import { DownCellData } from '../../../entity/tracking/cell-data/DownCellData';
import { BillTrackingSettings } from '@edp-bif/common-api';
import { NotifyService } from '@farris/ui-notify';
import { BillTrackerDataInfoService } from '../../services/bill-tracker-data-info.service';
import { CellOverlay } from '../../mxgraph-ext/CellOverlay';
import { CellOverlayState } from '../../mxgraph-ext/CellOverlayState';
import { Events } from '../../mxgraph-ext/Events';
import { billTrackerCellCss, billTrackerPopupMenuCss } from '../../config/bill-tracker-cell-css';
import { addCustomCSS } from '../../utils/addCustomCSS';
import { Outline } from '../../mxgraph-ext/Outline';
import { BillTrackerUiService } from '../../services/bill-tracker-ui.service';
import { GetBillsInfoArgs } from '../../../entity/tracking/GetBillsInfoArgs';
import { GetDownBillsInfoArgs } from '../../../entity/tracking/GetDownBillsInfoArgs';
// 在head中添加节点样式
addCustomCSS(billTrackerCellCss);
// 在head中添加弹出菜单样式
addCustomCSS(billTrackerPopupMenuCss);
export class BillTrackerGraphComponent {
    /**
     * @param {?} args
     * @param {?} localeId
     * @param {?} dataService
     * @param {?} notify
     * @param {?} messager
     * @param {?} loading
     * @param {?} modal
     * @param {?} vcr
     * @param {?} inj
     * @param {?} cfr
     * @param {?} cdr
     */
    constructor(args, localeId, dataService, notify, messager, loading, modal, vcr, inj, cfr, cdr) {
        this.dataService = dataService;
        this.notify = notify;
        this.messager = messager;
        this.loading = loading;
        this.modal = modal;
        this.vcr = vcr;
        this.inj = inj;
        this.cfr = cfr;
        this.cdr = cdr;
        this.selectEventEmitter = new EventEmitter();
        this.stateChangeEventEmitter = new EventEmitter();
        this.hspace = 80;
        this.vspace = 28;
        this.defaultWidth = 250;
        this.defaultHeight = 138;
        this.nodeWidth = this.defaultWidth;
        this.nodeHeight = this.defaultHeight;
        this.defaultNonEntryImage = (!mxClient.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/non-entry-bill.svg';
        this.defaultEntryImage = (!mxClient.IS_SVG) ? BillTrackerConstant.IMAGE_PATH + '/entry-bill.png' : BillTrackerConstant.IMAGE_PATH + '/entry-bill.svg';
        this.defaultOverlayWidth = 26;
        this.defaultOverlayHeight = 26;
        this.overlayWidth = this.defaultOverlayWidth;
        this.overlayHeight = this.defaultOverlayHeight;
        this.defaultUpSearchImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultDownSearchImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-plus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultUpFolderImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
        this.defaultDownFolderImage = new mxImage(BillTrackerConstant.IMAGE_PATH + '/tracker-minus.svg', this.overlayWidth, this.overlayHeight);
        this.upSearchImage = this.defaultUpSearchImage;
        this.downSearchImage = this.defaultDownSearchImage;
        this.upFolderImage = this.defaultUpFolderImage;
        this.downFolderImage = this.defaultDownFolderImage;
        this.upSearchOffset = new mxPoint(-50, 0);
        this.downSearchOffset = new mxPoint(50, 0);
        /**
         * 正在加载中的单据节点请求数
         */
        this.numCellsAddingReq = 0;
        this.localePipe = new BillTrackerLocalePipe(localeId);
        this.dataInfoService = new BillTrackerDataInfoService();
        this.billTrackerArgs = args;
        this.originBillTrackerArgs = this.billTrackerArgs;
        /** @type {?} */
        const graphOptions = this.billTrackerArgs.graphOptions;
        this.graphOptions = graphOptions;
        /** @type {?} */
        const gridOptions = this.billTrackerArgs.gridOptions;
        this.gridOptions = gridOptions;
        this.upSearchImage = graphOptions && graphOptions.upSearchImage ? new mxImage(graphOptions.upSearchImage, this.overlayWidth, this.overlayHeight) : this.upSearchImage;
        this.downSearchImage = graphOptions && graphOptions.downSearchImage ? new mxImage(graphOptions.downSearchImage, this.overlayWidth, this.overlayHeight) : this.downSearchImage;
        this.upFolderImage = graphOptions && graphOptions.upFolderImage ? new mxImage(graphOptions.upFolderImage, this.overlayWidth, this.overlayHeight) : this.upFolderImage;
        this.downFolderImage = graphOptions && graphOptions.downFolderImage ? new mxImage(graphOptions.downFolderImage, this.overlayWidth, this.overlayHeight) : this.downFolderImage;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.graph = this.createGraph();
        this.createLayout(this.graph);
        this.layoutManager = new mxLayoutManager(this.graph);
        this.outline = new Outline(this.graph, this.mxOutlineContainer.nativeElement);
        // 创建节点“更多”按钮弹出菜单
        this.morePopupMenu = new mxPopupMenu((/**
         * @param {?} menu
         * @param {?} cell
         * @param {?} evt
         * @return {?}
         */
        (menu, cell, evt) => {
            // 继续追踪
            menu.addItem(this.localePipe.transform("goOnTracking"), null, (/**
             * @return {?}
             */
            () => {
                this.goOnTrack(cell);
            }));
            // // 设为当前
            // menu.addItem(this.localePipe.transform("setAsCurrent"), null, () => {
            //   this.setAsCurrent(cell);
            // });
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @param {?=} sizeDidChange
     * @return {?}
     */
    refresh(sizeDidChange = true) {
        if (sizeDidChange && this.graph != null) {
            this.graph.sizeDidChange();
        }
    }
    /**
     * @return {?}
     */
    paint() {
        this.paintGraph(this.graph);
    }
    /**
     * @param {?} modalRef
     * @return {?}
     */
    setModalRef(modalRef) {
        this.modalRef = modalRef;
        if (this.modalRef != null) {
            this.modalRef.dialog.instance.closed.subscribe((/**
             * @param {?} evt
             * @return {?}
             */
            (evt) => {
                this.graph && this.graph.destroy();
            }));
            // todo: 临时解决弹窗模式下先刷新出入口节点问题
            /** @type {?} */
            let flag = 0;
            this.modalRef.dialog.instance.resized.subscribe((/**
             * @param {?} evt
             * @return {?}
             */
            (evt) => {
                if (flag >= 2) {
                    this.refresh();
                }
                flag++;
            }));
        }
    }
    /**
     * @return {?}
     */
    createGraph() {
        //启用mxGuide
        mxGraphHandler.prototype.guidesEnabled = true;
        //禁用mxgraph容器内上下文菜单
        mxEvent.disableContextMenu(this.mxContainerER.nativeElement);
        mxGraphHandler.prototype.scrollOnMove = false;
        mxGraphHandler.prototype.scaleGrid = true;
        //修改节点选中后处理器图片及填充色
        mxConstants.HANDLE_FILLCOLOR = '#29b6f2';
        mxHandle.prototype.createShape = (/**
         * @param {?} html
         * @return {?}
         */
        function (html) {
            /** @type {?} */
            const bounds = new mxEllipse(0, 0, mxConstants.HANDLE_SIZE, mxConstants.HANDLE_SIZE);
            return new mxEllipse(bounds, mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);
        });
        mxVertexHandler.prototype.handleImage = (!mxClient.IS_SVG) ? new mxImage(BillTrackerConstant.IMAGE_PATH + '/handle-main.png', mxConstants.HANDLE_SIZE, mxConstants.HANDLE_SIZE) : Graph.createSvgImage(18, 18, '<circle cx="9" cy="9" r="3" stroke="#fff" fill="' + Graph.handleFill + '" stroke-width="1"/>');
        mxConstants.DEFAULT_VALID_COLOR = '#FFFFFF';
        mxConstants.HIGHLIGHT_STROKEWIDTH = 1;
        //修改mxGuide默认配置
        mxConstants.GUIDE_COLOR = '#0088cf';
        mxGuide.prototype.createGuideShape = (/**
         * @param {?} horizontal
         * @return {?}
         */
        (horizontal) => new mxPolyline([], mxConstants.GUIDE_COLOR, mxConstants.GUIDE_STROKEWIDTH));
        //设置节点选中线框宽度
        mxConstants.VERTEX_SELECTION_STROKEWIDTH = 1;
        mxConstants.VERTEX_SELECTION_COLOR = '#3E8DFF';
        mxConstants.VERTEX_SELECTION_DASHED = false;
        //修改线宽
        mxConnectionHandler.prototype.getEdgeWidth = (/**
         * @param {?} valid
         * @return {?}
         */
        (valid) => 1);
        mxConstants.VALID_COLOR = '#00CD66';
        //创建mxGraph
        /** @type {?} */
        const graph = new Graph(this.mxContainerER.nativeElement, undefined, undefined, undefined);
        graph.localePipe = this.localePipe;
        graph.graphOptions = this.graphOptions;
        graph.gridOptions = this.gridOptions;
        //添加自定义监听器
        this.addListener(graph);
        graph.ngComp = this;
        return graph;
    }
    /**
     * @param {?} graph
     * @return {?}
     */
    createLayout(graph) {
        /** @type {?} */
        const upLayout = new RevertCompactTreeLayout(graph, true);
        upLayout.levelDistance = this.hspace;
        upLayout.edgeRouting = false;
        upLayout.resetEdges = false;
        this.upLayout = upLayout;
        /** @type {?} */
        const downLayout = new CompactTreeLayout(graph, true);
        downLayout.levelDistance = this.hspace;
        downLayout.edgeRouting = false;
        downLayout.resetEdges = true;
        this.downLayout = downLayout;
    }
    /**
     * @param {?} graph
     * @return {?}
     */
    addListener(graph) {
        /** @type {?} */
        const autoAdjustHandler = (/**
         * @return {?}
         */
        () => {
            window.setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.graph != null) {
                    this.refresh();
                }
            }), 0);
        });
        mxEvent.addListener(window, 'resize', autoAdjustHandler);
        /** @type {?} */
        const wheelResizeHandler = (/**
         * @param {?} evt
         * @param {?} up
         * @return {?}
         */
        (evt, up) => {
            // window下Ctrl按下，Mac下Command按下
            if (mxEvent.isControlDown(evt) || (mxClient.IS_MAC && evt.metaKey)) {
                if (up) {
                    this.zoomIn();
                }
                else {
                    this.zoomOut();
                }
                mxEvent.consume(evt);
                return false;
            }
        });
        mxEvent.addMouseWheelListener(wheelResizeHandler, this.mxContainerER.nativeElement);
        graph.selectEventEmitter = this.selectEventEmitter;
        graph.getSelectionModel().addListener(mxEvent.CHANGE, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            if (!(sender instanceof mxGraphSelectionModel)) {
                return;
            }
            /** @type {?} */
            let selectionModel = sender;
            //若未选中节点或者选中节点数不为1
            if (selectionModel.cells == null || selectionModel.cells.length != 1) {
                this.selectEventEmitter.emit(null);
                return;
            }
            /** @type {?} */
            let selectedCell = selectionModel.cells[0];
            //选中的是边
            if (selectedCell.edge || !selectedCell.vertex) {
                return;
            }
            this.selectEventEmitter.emit(selectedCell);
        }));
        graph.addListener(Events.CLICK_FIRST_SUMMARY, (/**
         * @param {?} serder
         * @param {?} evt
         * @return {?}
         */
        (serder, evt) => {
            /** @type {?} */
            const cell = evt.getProperty("cell");
            this.stateChangeEventEmitter.emit({
                type: Events.CLICK_FIRST_SUMMARY,
                data: cell
            });
            // 点击超链接时主动触发节点选中事件
            graph.setSelectionCell(cell);
        }));
        // 定义全局事件处理器，点击空白处隐藏弹出菜单
        /** @type {?} */
        const gestureHandler = (/**
         * @param {?} evt
         * @return {?}
         */
        (evt) => {
            if (this.currentMenu != null && mxEvent.getSource(evt) != this.currentMenu.div) {
                this.hideCurrentMenu();
            }
        });
        mxEvent.addGestureListeners(document, gestureHandler);
    }
    /**
     * 隐藏当前菜单
     * @return {?}
     */
    hideCurrentMenu() {
        if (this.currentMenu != null) {
            this.currentMenu.hideMenu();
            this.resetCurrentMenu();
        }
    }
    /**
     * 重置当前菜单
     * @return {?}
     */
    resetCurrentMenu() {
        this.currentMenu = null;
        this.currentMenuElt = null;
    }
    /**
     * @param {?} graph
     * @return {?}
     */
    paintGraph(graph) {
        graph.getModel().beginUpdate();
        this.entry = this.paintEntry(graph);
        this.afterPaintGraph(this.graph, this.entry);
        graph.getModel().endUpdate();
    }
    /**
     * @param {?} graph
     * @return {?}
     */
    repaintGraph(graph) {
        graph.getModel().beginUpdate();
        graph.removeCells(graph.getChildCells(graph.getDefaultParent()));
        this.paintGraph(graph);
        graph.getModel().endUpdate();
    }
    /**
     * @param {?} graph
     * @param {?} entry
     * @return {?}
     */
    afterPaintGraph(graph, entry) {
        if (entry == null) {
            return;
        }
        // 默认选中入口节点
        if (this.billTrackerArgs.gridOptions.showEntryData) {
            graph.setSelectionCell(this.entry);
        }
        // 默认展示一层？
        /** @type {?} */
        const canTrackingResult = this.billTrackerArgs.canTrackingResult;
        if (this.billTrackerArgs.graphOptions.showDownBills == true) {
            canTrackingResult.canDownTracking && this.entry.downCellOverlay && this.entry.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK, "resetView", true));
        }
        if (this.billTrackerArgs.graphOptions.showUpBills == true) {
            canTrackingResult.canUpTracking && this.entry.upCellOverlay && this.entry.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK, "resetView", true));
        }
    }
    /**
     * @param {?} graph
     * @return {?}
     */
    paintEntry(graph) {
        /** @type {?} */
        let entry = null;
        if (this.billTrackerArgs == null || this.billTrackerArgs.canTrackingResult == null) {
            return entry;
        }
        /** @type {?} */
        const canTrackingResult = this.billTrackerArgs.canTrackingResult;
        /** @type {?} */
        const info = this.dataService.buildEntryBillInfo(canTrackingResult);
        /** @type {?} */
        const dataInfo = info.billDataInfos[0];
        /** @type {?} */
        let bts = new BillTrackingSettings();
        bts.LoadFromJson(canTrackingResult.billTrackingSettings);
        /** @type {?} */
        const parent = graph.getDefaultParent();
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            let x0 = 0;
            /** @type {?} */
            let y0 = 0;
            /** @type {?} */
            let bts = new BillTrackingSettings();
            if (info && info.billTrackingSettings) {
                bts.LoadFromJson(info.billTrackingSettings);
            }
            /** @type {?} */
            let customStyle = "";
            entry = graph.insertBillCell(parent, null, dataInfo, info, true, x0, y0, this.nodeWidth, this.nodeHeight, `billNode;billNodeEntry;${customStyle}`);
            /** @type {?} */
            let geometry = graph.getModel().getGeometry(entry);
            /** @type {?} */
            let size = graph.getPreferredSizeForCell(entry);
            this.entryCellData = new EntryCellData();
            this.setCellData(this.entryCellData, entry);
            this.entryCellData.canTrackingResult = canTrackingResult;
            entry.data = this.entryCellData;
            // 添加上查下查按钮
            if (canTrackingResult.canDownTracking) {
                /** @type {?} */
                const overlay = this.addDownOverlay(graph, entry);
                entry.downCellOverlay = overlay;
            }
            if (canTrackingResult.canUpTracking) {
                /** @type {?} */
                const overlay = this.addUpOverlay(graph, entry);
                entry.upCellOverlay = overlay;
            }
            this.upParent = parent.clone();
            this.downParent = parent.clone();
            graph.addCells([this.upParent, this.downParent], parent);
        }
        finally {
            graph.getModel().endUpdate();
        }
        return entry;
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @return {?}
     */
    addUpOverlay(graph, cell) {
        /** @type {?} */
        let upSearch = new CellOverlay(this.upSearchImage, this.localePipe.transform("upSearch"), mxConstants.ALIGN_LEFT, mxConstants.ALIGN_MIDDLE, this.upSearchOffset, "hand");
        upSearch.state = CellOverlayState.Search;
        /** @type {?} */
        const upSearchHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            /** @type {?} */
            const resetView = evt.getProperty("resetView");
            /** @type {?} */
            const showLoading = evt.getProperty("showLoading") != null ? evt.getProperty("showLoading") : true;
            graph.getModel().beginUpdate();
            this.addUpAssoCell(graph, cell, resetView, showLoading);
            upSearch.removeListener(upSearchHandler);
            upSearch.tooltip = this.localePipe.transform("folder");
            upSearch.image = this.upFolderImage;
            upSearch.state = CellOverlayState.Fold;
            upSearch.addListener(mxEvent.CLICK, upFolderHandler);
            graph.removeCellOverlay(cell, upSearch);
            graph.addCellOverlay(cell, upSearch);
            graph.getModel().endUpdate();
        });
        /** @type {?} */
        const upFolderHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            graph.getModel().beginUpdate();
            this.removeAssoCell(graph, cell, BillTrackerDirection.Up);
            upSearch.removeListener(upFolderHandler);
            upSearch.tooltip = this.localePipe.transform("upSearch");
            upSearch.image = this.upSearchImage;
            upSearch.state = CellOverlayState.Search;
            upSearch.addListener(mxEvent.CLICK, upSearchHandler);
            graph.removeCellOverlay(cell, upSearch);
            graph.addCellOverlay(cell, upSearch);
            graph.model.endUpdate();
        });
        upSearch.addListener(mxEvent.CLICK, upSearchHandler);
        graph.removeCellOverlay(cell, upSearch);
        graph.addCellOverlay(cell, upSearch);
        return upSearch;
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @return {?}
     */
    addDownOverlay(graph, cell) {
        /** @type {?} */
        let downSearch = new CellOverlay(this.downSearchImage, this.localePipe.transform("downSearch"), mxConstants.ALIGN_RIGHT, mxConstants.ALIGN_MIDDLE, this.downSearchOffset, "hand");
        downSearch.state = CellOverlayState.Search;
        /** @type {?} */
        const downSearchHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            /** @type {?} */
            const resetView = evt.getProperty("resetView");
            /** @type {?} */
            const showLoading = evt.getProperty("showLoading") != null ? evt.getProperty("showLoading") : true;
            graph.getModel().beginUpdate();
            this.addDownAssoCell(graph, cell, resetView, showLoading);
            downSearch.image = this.downFolderImage;
            downSearch.tooltip = this.localePipe.transform("folder");
            downSearch.state = CellOverlayState.Fold;
            downSearch.removeListener(downSearchHandler);
            downSearch.addListener(mxEvent.CLICK, downFolderHandler);
            graph.removeCellOverlay(cell, downSearch);
            graph.addCellOverlay(cell, downSearch);
            // graph.refresh(cell);
            graph.getModel().endUpdate();
        });
        /** @type {?} */
        const downFolderHandler = (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        (sender, evt) => {
            graph.getModel().beginUpdate();
            this.removeAssoCell(graph, cell, BillTrackerDirection.Down);
            downSearch.image = this.downSearchImage;
            downSearch.tooltip = this.localePipe.transform("downSearch");
            downSearch.state = CellOverlayState.Search;
            downSearch.removeListener(downFolderHandler);
            downSearch.addListener(mxEvent.CLICK, downSearchHandler);
            graph.removeCellOverlay(cell, downSearch);
            graph.addCellOverlay(cell, downSearch);
            // graph.refresh(cell);
            graph.getModel().endUpdate();
        });
        downSearch.addListener(mxEvent.CLICK, downSearchHandler);
        graph.removeCellOverlay(cell, downSearch);
        graph.addCellOverlay(cell, downSearch);
        return downSearch;
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @param {?=} showLoading
     * @return {?}
     */
    addUpAssoCell(graph, cell, resetView = false, showLoading = true) {
        graph.getModel().beginUpdate();
        /** @type {?} */
        const args = this.dataService.buildGetUpBillsInfoArgs(cell);
        /** @type {?} */
        const l = showLoading && (this.loading.clearAll(), this.loading.show({ message: this.localePipe.transform("loading") }));
        this.numCellsAddingReq++;
        this.dataService.getUpBillsInfo(args).subscribe((/**
         * @param {?} infos
         * @return {?}
         */
        (infos) => {
            /** @type {?} */
            let parent = graph.getDefaultParent();
            /** @type {?} */
            let newCells = [];
            // graph.getModel().beginUpdate();
            try {
                for (let info of infos) {
                    for (let dataInfo of info.billDataInfos) {
                        /** @type {?} */
                        let billCell = null;
                        /** @type {?} */
                        let bts = new BillTrackingSettings();
                        if (info && info.billTrackingSettings) {
                            bts.LoadFromJson(info.billTrackingSettings);
                        }
                        /** @type {?} */
                        let customStyle = "";
                        billCell = graph.insertBillCell(this.upParent, null, dataInfo, info, false, cell.geometry.x - this.hspace, cell.geometry.y, this.nodeWidth, this.nodeHeight, `billNode;${customStyle}`);
                        newCells.push(billCell);
                    }
                }
                this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Up);
                for (let nc of newCells) {
                    if (nc.billDataInfo.canContinueTracking) {
                        /** @type {?} */
                        const ol = this.addUpOverlay(graph, nc);
                        nc.upCellOverlay = ol;
                    }
                    graph.insertEdge(parent, null, '', nc, cell, "billAssociation;");
                }
                /** @type {?} */
                const oldGeo = this.entry.getGeometry().clone();
                this.upLayout.execute(this.upParent, this.entry);
                /** @type {?} */
                const newGeo = this.entry.getGeometry().clone();
                /** @type {?} */
                const dx = oldGeo.x - newGeo.x;
                /** @type {?} */
                const dy = oldGeo.y - newGeo.y;
                this.restoreEntryPosition(graph, this.entry, dx, dy);
                /** @type {?} */
                const cellData = (/** @type {?} */ (cell.data));
                cellData.ups.length = 0;
                for (let nc of newCells) {
                    /** @type {?} */
                    const cd = new UpCellData();
                    this.setCellData(cd, nc);
                    nc.data = cd;
                    cd.down = cellData;
                    cellData.ups.push(cd);
                }
            }
            finally {
                graph.getModel().endUpdate();
            }
            // 重绘画布大小
            resetView && graph.fireEvent(new mxEventObject(Events.RESET_GRAPH_VIEW));
            this.numCellsAddingReq--;
            // 自定义单据节点插入并移位后事件
            this.graph.fireEvent(new mxEventObject(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', this.upParent));
            l && l.close();
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.numCellsAddingReq--;
            l && l.close();
            this.messager.currentId == -1 && this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            throw err;
        }));
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?=} resetView
     * @param {?=} showLoading
     * @return {?}
     */
    addDownAssoCell(graph, cell, resetView = false, showLoading = true) {
        graph.getModel().beginUpdate();
        /** @type {?} */
        const args = this.dataService.buildGetDownBillsInfoArgs(cell);
        /** @type {?} */
        const l = showLoading && (this.loading.clearAll(), this.loading.show({ message: this.localePipe.transform("loading") }));
        this.numCellsAddingReq++;
        this.dataService.getDownBillsInfo(args).subscribe((/**
         * @param {?} infos
         * @return {?}
         */
        (infos) => {
            /** @type {?} */
            let model = graph.getModel();
            /** @type {?} */
            let parent = graph.getDefaultParent();
            /** @type {?} */
            let newCells = [];
            // graph.getModel().beginUpdate();
            try {
                for (let info of infos) {
                    for (let dataInfo of info.billDataInfos) {
                        /** @type {?} */
                        let billCell = null;
                        /** @type {?} */
                        let bts = new BillTrackingSettings();
                        if (info && info.billTrackingSettings) {
                            bts.LoadFromJson(info.billTrackingSettings);
                        }
                        /** @type {?} */
                        let customStyle = "";
                        billCell = graph.insertBillCell(this.downParent, null, dataInfo, info, false, cell.geometry.x + this.hspace, cell.geometry.y, this.nodeWidth, this.nodeHeight, `billNode;${customStyle}`);
                        newCells.push(billCell);
                    }
                }
                this.calCellsPosition(graph, cell, newCells, BillTrackerDirection.Down);
                for (let nc of newCells) {
                    if (nc.billDataInfo.canContinueTracking) {
                        /** @type {?} */
                        const ol = this.addDownOverlay(graph, nc);
                        nc.downCellOverlay = ol;
                    }
                    graph.insertEdge(parent, null, '', cell, nc, "billAssociation;");
                }
                /** @type {?} */
                const oldGeo = this.entry.getGeometry().clone();
                this.downLayout.execute(this.downParent, this.entry);
                /** @type {?} */
                const newGeo = this.entry.getGeometry().clone();
                /** @type {?} */
                const dx = oldGeo.x - newGeo.x;
                /** @type {?} */
                const dy = oldGeo.y - newGeo.y;
                this.restoreEntryPosition(graph, this.entry, dx, dy);
                /** @type {?} */
                const cellData = (/** @type {?} */ (cell.data));
                cellData.downs.length = 0;
                for (let nc of newCells) {
                    /** @type {?} */
                    const cd = new DownCellData();
                    this.setCellData(cd, nc);
                    nc.data = cd;
                    cd.up = cellData;
                    cellData.downs.push(cd);
                }
            }
            finally {
                graph.getModel().endUpdate();
            }
            // 重绘画布大小
            resetView && graph.fireEvent(new mxEventObject(Events.RESET_GRAPH_VIEW));
            this.numCellsAddingReq--;
            // 自定义单据节点插入并移位后事件
            this.graph.fireEvent(new mxEventObject(Events.BILL_CELLS_ADDED_AND_MOVED, 'cells', newCells, 'parent', this.downParent));
            l && l.close();
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.numCellsAddingReq--;
            l && l.close();
            this.messager.currentId == -1 && this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            throw err;
        }));
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} dir
     * @return {?}
     */
    removeAssoCell(graph, cell, dir) {
        /** @type {?} */
        const model = graph.getModel();
        /** @type {?} */
        const parent = graph.getDefaultParent();
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            let assoCells = [];
            if (dir == BillTrackerDirection.Down) {
                /** @type {?} */
                let edges = model.getOutgoingEdges(cell);
                /** @type {?} */
                let i = 0;
                while (edges && edges.length > 0 && i < edges.length) {
                    if (edges[i].target && edges[i].target != this.entry) {
                        assoCells.push((/** @type {?} */ (edges[i].target)));
                        edges.push(...model.getOutgoingEdges(edges[i].target));
                    }
                    i++;
                }
            }
            else if (dir == BillTrackerDirection.Up) {
                /** @type {?} */
                let edges = model.getIncomingEdges(cell);
                /** @type {?} */
                let i = 0;
                while (edges && edges.length > 0 && i < edges.length) {
                    if (edges[i].source && edges[i].source != this.entry) {
                        assoCells.push((/** @type {?} */ (edges[i].source)));
                        edges.push(...model.getIncomingEdges(edges[i].source));
                    }
                    i++;
                }
            }
            if (dir == BillTrackerDirection.Down) {
                ((/** @type {?} */ (cell.data))).downs.length = 0;
            }
            else if (dir == BillTrackerDirection.Up) {
                ((/** @type {?} */ (cell.data))).ups.length = 0;
            }
            graph.removeCells(assoCells);
            /** @type {?} */
            const oldGeo = this.entry.getGeometry().clone();
            this.upLayout.execute(this.upParent, this.entry);
            /** @type {?} */
            const newGeo = this.entry.getGeometry().clone();
            /** @type {?} */
            const dx = oldGeo.x - newGeo.x;
            /** @type {?} */
            const dy = oldGeo.y - newGeo.y;
            this.restoreEntryPosition(graph, this.entry, dx, dy);
            /** @type {?} */
            const oldGeo2 = this.entry.getGeometry().clone();
            this.downLayout.execute(this.downParent, this.entry);
            /** @type {?} */
            const newGeo2 = this.entry.getGeometry().clone();
            /** @type {?} */
            const dx2 = oldGeo2.x - newGeo2.x;
            /** @type {?} */
            const dy2 = oldGeo2.y - newGeo2.y;
            this.restoreEntryPosition(graph, this.entry, dx2, dy2);
        }
        finally {
            graph.getModel().endUpdate();
        }
    }
    /**
     * @param {?} graph
     * @param {?} entry
     * @param {?} dx
     * @param {?} dy
     * @return {?}
     */
    restoreEntryPosition(graph, entry, dx, dy) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            let vertices = null;
            vertices = [entry, ...graph.getChildCells(this.upParent, true, false), ...graph.getChildCells(this.downParent, true, false)];
            graph.moveCells(vertices, dx, dy);
        }
        finally {
            graph.getModel().endUpdate();
        }
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @param {?} dir
     * @return {?}
     */
    calCellsPosition(graph, cell, newCells, dir) {
        if (dir == BillTrackerDirection.Down) {
            this.resetDownCellsPosition(graph, cell, newCells);
        }
        else if (dir == BillTrackerDirection.Up) {
            this.resetUpCellsPosition(graph, cell, newCells);
        }
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    resetDownCellsPosition(graph, cell, newCells) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            let targets = graph.getOutgoingEdges(cell).map((/**
             * @param {?} edge
             * @return {?}
             */
            edge => edge.target));
            /** @type {?} */
            let deals = targets;
            //按纵坐标从大到小排序
            /** @type {?} */
            let temp = deals.sort((/**
             * @param {?} c1
             * @param {?} c2
             * @return {?}
             */
            (c1, c2) => c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE));
            //最小纵坐标
            /** @type {?} */
            let minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
            //最大纵坐标
            /** @type {?} */
            let maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
            //依次修改新插入节点的纵坐标
            for (let i = 0; i < newCells.length; i++) {
                maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                deals.push(newCells[i]);
            }
            /** @type {?} */
            let midY = (maxY + minY) / 2;
            /** @type {?} */
            let diffY = cell.geometry.y - midY;
            //依次修改所有点纵坐标
            deals.forEach((/**
             * @param {?} c
             * @return {?}
             */
            c => {
                graph.translateCell(c, 0, diffY);
            }));
            minY += diffY;
            maxY += diffY;
            midY += diffY;
            // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
            for (let key in graph.model.cells) {
                if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                    continue;
                }
                if (graph.model.cells[key] == cell || newCells.indexOf((/** @type {?} */ (graph.model.cells[key]))) != -1) {
                    continue;
                }
                if (graph.model.cells[key] == this.entry) {
                    continue;
                }
                if (graph.model.cells[key].geometry.x < this.entry.geometry.x) {
                    continue;
                }
                /** @type {?} */
                const c = graph.model.cells[key];
                /** @type {?} */
                let geo = c.geometry;
                graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
            }
        }
        finally {
            graph.getModel().endUpdate();
        }
    }
    /**
     * @param {?} graph
     * @param {?} cell
     * @param {?} newCells
     * @return {?}
     */
    resetUpCellsPosition(graph, cell, newCells) {
        graph.getModel().beginUpdate();
        try {
            /** @type {?} */
            let sources = graph.getIncomingEdges(cell).map((/**
             * @param {?} edge
             * @return {?}
             */
            edge => edge.source));
            /** @type {?} */
            let deals = sources;
            //按纵坐标从大到小排序
            /** @type {?} */
            let temp = deals.sort((/**
             * @param {?} c1
             * @param {?} c2
             * @return {?}
             */
            (c1, c2) => c1.geometry && c2.geometry ? c2.geometry.y - c1.geometry.y : Number.MIN_VALUE));
            //最小纵坐标
            /** @type {?} */
            let minY = temp.length > 0 ? temp[temp.length - 1].geometry.y : cell.geometry.y;
            //最大纵坐标
            /** @type {?} */
            let maxY = temp.length > 0 ? temp[0].geometry.y : cell.geometry.y;
            //依次修改新插入节点的纵坐标
            for (let i = 0; i < newCells.length; i++) {
                maxY = deals.length > 0 ? maxY + this.vspace : maxY;
                graph.translateCell(newCells[i], 0, maxY - newCells[i].geometry.y);
                deals.push(newCells[i]);
            }
            /** @type {?} */
            let midY = (maxY + minY) / 2;
            /** @type {?} */
            let diffY = cell.geometry.y - midY;
            //依次修改所有点纵坐标
            deals.forEach((/**
             * @param {?} c
             * @return {?}
             */
            c => {
                graph.translateCell(c, 0, diffY);
            }));
            minY += diffY;
            maxY += diffY;
            midY += diffY;
            // 将<=midY的节点全部上移至minY-diffY,>=midY下移至maxY + diffY
            for (let key in graph.model.cells) {
                if (graph.model.cells[key] == graph.model.root || graph.model.cells[key].geometry == null || graph.model.cells[key].edge == true) {
                    continue;
                }
                if (graph.model.cells[key] == cell || newCells.indexOf((/** @type {?} */ (graph.model.cells[key]))) != -1) {
                    continue;
                }
                if (graph.model.cells[key] == this.entry) {
                    continue;
                }
                if (graph.model.cells[key].geometry.x > this.entry.geometry.x) {
                    continue;
                }
                /** @type {?} */
                const c = graph.model.cells[key];
                /** @type {?} */
                let geo = c.geometry;
                graph.translateCell(c, 0, geo.y <= cell.geometry.y ? minY - (cell.geometry.y - geo.y) - geo.y : maxY + (geo.y - cell.geometry.y) - geo.y);
            }
        }
        finally {
            graph.getModel().endUpdate();
        }
    }
    /**
     * @param {?} cellData
     * @param {?} cell
     * @return {?}
     */
    setCellData(cellData, cell) {
        cellData.billInfo = cell.billInfo;
        cellData.billDataInfo = cell.billDataInfo;
        cellData.visible = true;
        cellData.diagramInfo.x = cell.geometry.x;
        cellData.diagramInfo.y = cell.geometry.y;
        cellData.diagramInfo.width = cell.geometry.width;
        cellData.diagramInfo.height = cell.geometry.height;
        cellData.diagramInfo.extProps = {
            style: cell.style
        };
    }
    /**
     * @return {?}
     */
    zoomOut() {
        this.graph.zoomOut();
    }
    /**
     * @return {?}
     */
    zoomIn() {
        this.graph.zoomIn();
    }
    /**
     * @return {?}
     */
    zoomActual() {
        this.graph.zoomActual();
    }
    /**
     * @return {?}
     */
    getZoomScale() {
        return Math.round(this.graph.view.scale * 100);
    }
    /**
     * @return {?}
     */
    print() {
        /** @type {?} */
        const preview = new mxPrintPreview(this.graph, 1);
        preview.printOverlays = true;
        preview.printControls = true;
        preview.printBackgroundImage = true;
        preview.open(billTrackerCellCss);
    }
    /**
     * @param {?} direction
     * @param {?=} all
     * @return {?}
     */
    expand(direction, all = false) {
        if (all) {
            this.expandAll(direction);
            return;
        }
        if (direction == BillTrackerDirection.Up) {
            /** @type {?} */
            const cells = [this.entry];
            this.upParent.children && cells.push(...this.upParent.children);
            cells.forEach((/**
             * @param {?} cell
             * @return {?}
             */
            (cell) => {
                if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                    cell.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                }
            }));
        }
        else if (direction == BillTrackerDirection.Down) {
            /** @type {?} */
            const cells = [this.entry];
            this.downParent.children && cells.push(...this.downParent.children);
            cells.forEach((/**
             * @param {?} cell
             * @return {?}
             */
            (cell) => {
                if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                    cell.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK));
                }
            }));
        }
    }
    /**
     * @param {?} direction
     * @return {?}
     */
    expandAll(direction) {
        if (direction != BillTrackerDirection.Up && direction != BillTrackerDirection.Down) {
            return;
        }
        // 单据节点添加并移位后事件监听器
        /** @type {?} */
        let afterBillCellsAddedAndMoved = null;
        if (direction == BillTrackerDirection.Up) {
            afterBillCellsAddedAndMoved = (/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                const cells = [this.entry];
                this.upParent.children && cells.push(...this.upParent.children);
                /** @type {?} */
                const canTrackUpCells = cells.filter((/**
                 * @param {?} cell
                 * @return {?}
                 */
                (cell) => {
                    return cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search;
                }));
                // 没有可上查节点且没有正在执行的上查请求时删除监听器
                if (canTrackUpCells == null || canTrackUpCells.length == 0) {
                    if (this.numCellsAddingReq === 0) {
                        // console.log("移除监听器");
                        l && l.close();
                        this.graph.removeListener(afterBillCellsAddedAndMoved);
                        // console.timeEnd("ExpandAll");
                    }
                }
                else {
                    canTrackUpCells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    (cell) => {
                        if (cell.upCellOverlay && cell.upCellOverlay.state == CellOverlayState.Search) {
                            cell.upCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK, "showLoading", false));
                        }
                    }));
                }
            });
        }
        else if (direction == BillTrackerDirection.Down) {
            afterBillCellsAddedAndMoved = (/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                const cells = [this.entry];
                this.downParent.children && cells.push(...this.downParent.children);
                /** @type {?} */
                const canTrackDownCells = cells.filter((/**
                 * @param {?} cell
                 * @return {?}
                 */
                (cell) => {
                    return cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search;
                }));
                // 没有可下查节点且没有正在执行的下查请求时删除监听器
                if (canTrackDownCells == null || canTrackDownCells.length == 0) {
                    if (this.numCellsAddingReq === 0) {
                        // console.log("移除监听器");
                        l && l.close();
                        this.graph.removeListener(afterBillCellsAddedAndMoved);
                        // console.timeEnd("ExpandAll");
                    }
                }
                else {
                    canTrackDownCells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    (cell) => {
                        if (cell.downCellOverlay && cell.downCellOverlay.state == CellOverlayState.Search) {
                            cell.downCellOverlay.fireEvent(new mxEventObject(mxEvent.CLICK, "showLoading", false));
                        }
                    }));
                }
            });
        }
        // console.time("ExpandAll");
        // 添加监听器
        // console.log("添加监听器");
        this.graph.addListener("billCellsAddedAndMoved", afterBillCellsAddedAndMoved);
        // 直接触发一次展开事件
        /** @type {?} */
        const l = this.loading.show({ message: this.localePipe.transform("loading") });
        afterBillCellsAddedAndMoved();
    }
    /**
     * 继续追踪
     * @param {?} cell
     * @return {?}
     */
    goOnTrack(cell) {
        /** @type {?} */
        const billTrackerUiService = this.inj.get(BillTrackerUiService);
        // 构造查询参数
        /** @type {?} */
        let args = new GetBillsInfoArgs();
        args.billDataId = cell.billDataInfo.dataId;
        args.curYear = cell.billDataInfo.curYear;
        args.bizKind = cell.billInfo.bizKind;
        args.bizType = cell.billInfo.bizType;
        args.documentTypeId = cell.billInfo.documentTypeId;
        // args.billChildInfos = cell.billDataInfo.billChildInfos;
        // // 如果又回到了最原始的当前节点
        // if (cell.billDataInfo.dataId == this.originBillTrackerArgs.getBillsInfoArgs.billDataId) {
        //   args = this.originBillTrackerArgs.getBillsInfoArgs;
        // }
        /** @type {?} */
        const modalOptions = {
            title: this.localePipe.transform("billTracker"),
        };
        /** @type {?} */
        const graphOptions = {
            // // 上查结果节点没有下查按钮，继续追踪时默认下查
            // showDownBills: cell.downCellOverlay == null,
            // // 下查结果节点没有上查按钮，继续追踪时默认上查
            // showUpBills: cell.upCellOverlay == null,
            showDownBills: true,
            showUpBills: true,
        };
        /** @type {?} */
        const gridOptions = {
        // // 此选项仅控制首次打开时行为
        // showEntryData: false,
        // // 数据区高度1px相当于不显示
        // defaultHeight: 1,
        };
        billTrackerUiService.openDefaultBillTrackerApp(args, graphOptions, gridOptions);
        // billTrackerUiService.openDefaultBillTrackerDialog(args, false, modalOptions, graphOptions, gridOptions).subscribe();
    }
    /**
     * 设为当前
     * @param {?} cell
     * @return {?}
     */
    setAsCurrent(cell) {
        /** @type {?} */
        let args = this.dataService.buildGetBillsInfoArgs(cell);
        // // 如果又回到了最原始的当前节点
        // if (cell.billDataInfo.dataId == this.originBillTrackerArgs.getBillsInfoArgs.billDataId) {
        //   args = this.originBillTrackerArgs.getBillsInfoArgs;
        // }
        /** @type {?} */
        const downArgs = new GetDownBillsInfoArgs();
        downArgs.documentTypeId = args.documentTypeId;
        downArgs.billDataId = args.billDataId;
        downArgs.bizKind = args.bizKind;
        downArgs.bizType = args.bizType;
        // downArgs.billChildInfos = args.billChildInfos;
        downArgs.curYear = args.curYear;
        this.loading.show({ message: this.localePipe.transform("loading") });
        this.dataService.canTracking(downArgs).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            this.loading.close();
            if (!res.canDownTracking && !res.canUpTracking) {
                this.messager.info(this.localePipe.transform("noAssoBill"));
                return;
            }
            /** @type {?} */
            const billTrackerArgs = new BillTrackerArgs();
            billTrackerArgs.canTrackingResult = res;
            billTrackerArgs.getBillsInfoArgs = args;
            billTrackerArgs.graphOptions = this.billTrackerArgs.graphOptions;
            billTrackerArgs.gridOptions = this.billTrackerArgs.gridOptions;
            this.billTrackerArgs = billTrackerArgs;
            this.repaintGraph(this.graph);
        }), (/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            this.loading.close();
            //todo 确定异常结构, 目前采用兼容取值方式
            this.messager.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
            throw err;
        }));
    }
}
BillTrackerGraphComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-bill-tracker-graph',
                template: "<div #mxContainer id=\"mx-container\" class=\"mx-container-ng\">\r\n\r\n</div>\r\n\r\n<div #mxOutlineContainer id=\"mx-outline-container\" class=\"mx-outline-container\" [style.top]=\"modalRef?'50px':null\">\r\n\r\n</div>",
                styles: [".mx-container-ng{position:absolute;top:0;left:0;bottom:0;right:0;cursor:default;overflow:auto;padding-right:16px;padding-bottom:16px;margin:4px}.mx-outline-container{z-index:1;position:absolute;overflow:hidden;top:20px;right:20px;width:160px;height:120px;background:#fff;border:1px solid #d3d3d3}"]
            }] }
];
/** @nocollapse */
BillTrackerGraphComponent.ctorParameters = () => [
    { type: BillTrackerArgs },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: BillTrackerDataService },
    { type: NotifyService },
    { type: MessagerService },
    { type: LoadingService },
    { type: BsModalService },
    { type: ViewContainerRef },
    { type: Injector },
    { type: ComponentFactoryResolver },
    { type: ChangeDetectorRef }
];
BillTrackerGraphComponent.propDecorators = {
    mxContainerER: [{ type: ViewChild, args: ["mxContainer",] }],
    mxOutlineContainer: [{ type: ViewChild, args: ["mxOutlineContainer",] }],
    selectEventEmitter: [{ type: Output, args: ["select",] }],
    stateChangeEventEmitter: [{ type: Output, args: ["stateChange",] }],
    billTrackerArgs: [{ type: Input, args: ["billTrackerArgs",] }]
};
if (false) {
    /** @type {?} */
    BillTrackerGraphComponent.prototype.localePipe;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.mxContainerER;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.mxOutlineContainer;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.selectEventEmitter;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.stateChangeEventEmitter;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.billTrackerArgs;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.originBillTrackerArgs;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.graphOptions;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.gridOptions;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.modalRef;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.graph;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.hspace;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.vspace;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upLayout;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downLayout;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.outline;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.entryCellData;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.layoutManager;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.entry;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upParent;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downParent;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.nodeWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.nodeHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultNonEntryImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultEntryImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultOverlayWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultOverlayHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.overlayWidth;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.overlayHeight;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultUpSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultDownSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultUpFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.defaultDownFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downSearchImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downFolderImage;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.upSearchOffset;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.downSearchOffset;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.dataInfoService;
    /**
     * 正在加载中的单据节点请求数
     * @type {?}
     */
    BillTrackerGraphComponent.prototype.numCellsAddingReq;
    /**
     * 当前菜单
     * @type {?}
     */
    BillTrackerGraphComponent.prototype.currentMenu;
    /**
     * 当前菜单dom元素
     * @type {?}
     */
    BillTrackerGraphComponent.prototype.currentMenuElt;
    /**
     * 节点“更多”按钮弹出菜单对象
     * @type {?}
     */
    BillTrackerGraphComponent.prototype.morePopupMenu;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.dataService;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.notify;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.messager;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.loading;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.modal;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.vcr;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.inj;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.cfr;
    /** @type {?} */
    BillTrackerGraphComponent.prototype.cdr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLWdyYXBoLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9jb21wb25lbnRzL2JpbGwtdHJhY2tlci1ncmFwaC9iaWxsLXRyYWNrZXItZ3JhcGguY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBaUIsS0FBSyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxpQkFBaUIsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUMzTixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLE9BQU8sRUFBZ0IsY0FBYyxFQUFFLGFBQWEsRUFBRSxxQkFBcUIsRUFBRSxXQUFXLEVBQWlCLE9BQU8sRUFBdUIsUUFBUSxFQUFhLE9BQU8sRUFBRSxVQUFVLEVBQXFCLGVBQWUsRUFBRSxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxPQUFPLEVBQWtKLGNBQWMsRUFBc0IsV0FBVyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDaGdCLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNqRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUMzRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUk1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BE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QyxrREFBMEM7O0lBQzFDLG9EQUE4Qzs7SUFFOUMsbURBQXFDOztJQUNyQyxxREFBc0M7O0lBRXRDLG9EQUE0Qzs7Ozs7SUFLNUMsc0RBQXNCOzs7OztJQUt0QixnREFBbUM7Ozs7O0lBSW5DLG1EQUFvQjs7Ozs7SUFJcEIsa0RBQXFDOztJQUtuQyxnREFBMEM7O0lBQzFDLDJDQUE0Qjs7SUFDNUIsNkNBQWdDOztJQUNoQyw0Q0FBOEI7O0lBQzlCLDBDQUE0Qjs7SUFDNUIsd0NBQTRCOztJQUM1Qix3Q0FBb0I7O0lBQ3BCLHdDQUFvQzs7SUFDcEMsd0NBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEluamVjdCwgTE9DQUxFX0lELCBBZnRlclZpZXdJbml0LCBJbnB1dCwgVmlld0NvbnRhaW5lclJlZiwgSW5qZWN0b3IsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvR3JhcGgnO1xyXG5pbXBvcnQgeyBteEV2ZW50LCBteFJ1YmJlcmJhbmQsIG14R3JhcGhIYW5kbGVyLCBteEV2ZW50T2JqZWN0LCBteEdyYXBoU2VsZWN0aW9uTW9kZWwsIG14Q29uc3RhbnRzLCBteENlbGxPdmVybGF5LCBteEltYWdlLCBteENvbXBhY3RUcmVlTGF5b3V0LCBteENsaWVudCwgTXhHcmFwaE5TLCBteEd1aWRlLCBteFBvbHlsaW5lLCBteFN3aW1sYW5lTWFuYWdlciwgbXhMYXlvdXRNYW5hZ2VyLCBteENvbm5lY3Rpb25IYW5kbGVyLCBteEVsbGlwc2UsIG14SGFuZGxlLCBteFZlcnRleEhhbmRsZXIsIG14UG9pbnQsIG14U3dpbWxhbmVMYXlvdXQsIG14SGllcmFyY2hpY2FsTGF5b3V0LCBteE1vcnBoaW5nLCBteFJlY3RhbmdsZVNoYXBlLCBteENvbm5lY3Rpb25Db25zdHJhaW50LCBteEVkZ2VIYW5kbGVyLCBteFNoYXBlLCBteENlbGxTdGF0ZSwgbXhSZWN0YW5nbGUsIG14UHJpbnRQcmV2aWV3LCBteFV0aWxzLCBteE91dGxpbmUsIG14UG9wdXBNZW51IH0gZnJvbSBcIi4uLy4uLy4uL3JlZi9teGdyYXBoXCI7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyQXJncyB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItYXJncyc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJEaXJlY3Rpb24gfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWRpcmVjdGlvbic7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uL3BpcGUvYmlsbC10cmFja2VyLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgQmlsbENlbGwgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9CaWxsQ2VsbCc7XHJcbmltcG9ydCB7IERvd25CaWxsSW5mb1Jlc3VsdCB9IGZyb20gJy4uLy4uL2FyZ3MvRG93bkJpbGxJbmZvUmVzdWx0JztcclxuaW1wb3J0IHsgVXBCaWxsSW5mb1Jlc3VsdCB9IGZyb20gJy4uLy4uL2FyZ3MvVXBCaWxsSW5mb1Jlc3VsdCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZyc7XHJcbmltcG9ydCB7IEJzTW9kYWxSZWYsIEJzTW9kYWxTZXJ2aWNlLCBNb2RhbE9wdGlvbnMgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJDb25zdGFudCB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBSZXZlcnRDb21wYWN0VHJlZUxheW91dCB9IGZyb20gJy4uLy4uL214Z3JhcGgtZXh0L1JldmVydENvbXBhY3RUcmVlTGF5b3V0JztcclxuaW1wb3J0IHsgQ29tcGFjdFRyZWVMYXlvdXQgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9Db21wYWN0VHJlZUxheW91dCc7XHJcbmltcG9ydCB7IEVudHJ5Q2VsbERhdGEgfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvY2VsbC1kYXRhL0VudHJ5Q2VsbERhdGEnO1xyXG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJy4uLy4uLy4uL2VudGl0eS90cmFja2luZy9jZWxsLWRhdGEvQ2VsbERhdGEnO1xyXG5pbXBvcnQgeyBVcENlbGxEYXRhIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL2NlbGwtZGF0YS9VcENlbGxEYXRhJztcclxuaW1wb3J0IHsgRG93bkNlbGxEYXRhIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL2NlbGwtZGF0YS9Eb3duQ2VsbERhdGEnO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tpbmdTZXR0aW5ncyB9IGZyb20gJ0BlZHAtYmlmL2NvbW1vbi1hcGknO1xyXG5pbXBvcnQgeyBCaWxsVHJhY2tlckdyYXBoT3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItZ3JhcGgtb3B0aW9ucyc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYmlsbC10cmFja2VyLWRhdGEtaW5mby5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ2VsbE92ZXJsYXkgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9DZWxsT3ZlcmxheSc7XHJcbmltcG9ydCB7IENlbGxPdmVybGF5U3RhdGUgfSBmcm9tICcuLi8uLi9teGdyYXBoLWV4dC9DZWxsT3ZlcmxheVN0YXRlJztcclxuaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvRXZlbnRzJztcclxuaW1wb3J0IHsgYmlsbFRyYWNrZXJDZWxsQ3NzLCBiaWxsVHJhY2tlclBvcHVwTWVudUNzcyB9IGZyb20gJy4uLy4uL2NvbmZpZy9iaWxsLXRyYWNrZXItY2VsbC1jc3MnO1xyXG5pbXBvcnQgeyBhZGRDdXN0b21DU1MgfSBmcm9tICcuLi8uLi91dGlscy9hZGRDdXN0b21DU1MnO1xyXG5pbXBvcnQgeyBPdXRsaW5lIH0gZnJvbSAnLi4vLi4vbXhncmFwaC1leHQvT3V0bGluZSc7XHJcbmltcG9ydCB7IEJpbGxUcmFja2VyR3JpZE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb25maWcvYmlsbC10cmFja2VyLWdyaWQtb3B0aW9ucyc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQmlsbFRyYWNrZXJVaVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItdWkuc2VydmljZSc7XHJcbmltcG9ydCB7IEdldEJpbGxzSW5mb0FyZ3MgfSBmcm9tICcuLi8uLi8uLi9lbnRpdHkvdHJhY2tpbmcvR2V0QmlsbHNJbmZvQXJncyc7XHJcbmltcG9ydCB7IEdldERvd25CaWxsc0luZm9BcmdzIH0gZnJvbSAnLi4vLi4vLi4vZW50aXR5L3RyYWNraW5nL0dldERvd25CaWxsc0luZm9BcmdzJztcclxuaW1wb3J0IHsgQ2FuVHJhY2tpbmdSZXN1bHQgfSBmcm9tICcuLi8uLi9hcmdzL0NhblRyYWNraW5nUmVzdWx0JztcclxuXHJcbi8vIOWcqGhlYWTkuK3mt7vliqDoioLngrnmoLflvI9cclxuYWRkQ3VzdG9tQ1NTKGJpbGxUcmFja2VyQ2VsbENzcyk7XHJcbi8vIOWcqGhlYWTkuK3mt7vliqDlvLnlh7roj5zljZXmoLflvI9cclxuYWRkQ3VzdG9tQ1NTKGJpbGxUcmFja2VyUG9wdXBNZW51Q3NzKTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWJpbGwtdHJhY2tlci1ncmFwaCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2JpbGwtdHJhY2tlci1ncmFwaC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYmlsbC10cmFja2VyLWdyYXBoLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmlsbFRyYWNrZXJHcmFwaENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgbG9jYWxlUGlwZTogQmlsbFRyYWNrZXJMb2NhbGVQaXBlO1xyXG5cclxuICBAVmlld0NoaWxkKFwibXhDb250YWluZXJcIilcclxuICBteENvbnRhaW5lckVSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuXHJcbiAgQFZpZXdDaGlsZChcIm14T3V0bGluZUNvbnRhaW5lclwiKVxyXG4gIG14T3V0bGluZUNvbnRhaW5lcjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIEBPdXRwdXQoXCJzZWxlY3RcIilcclxuICBzZWxlY3RFdmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQE91dHB1dChcInN0YXRlQ2hhbmdlXCIpXHJcbiAgc3RhdGVDaGFuZ2VFdmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHtcclxuICAgIHR5cGU6IGFueSxcclxuICAgIGRhdGE/OiBhbnlcclxuICB9PigpO1xyXG5cclxuICBASW5wdXQoXCJiaWxsVHJhY2tlckFyZ3NcIilcclxuICBiaWxsVHJhY2tlckFyZ3M6IEJpbGxUcmFja2VyQXJncztcclxuICBvcmlnaW5CaWxsVHJhY2tlckFyZ3M6IEJpbGxUcmFja2VyQXJncztcclxuXHJcbiAgZ3JhcGhPcHRpb25zOiBCaWxsVHJhY2tlckdyYXBoT3B0aW9ucztcclxuICBncmlkT3B0aW9uczogQmlsbFRyYWNrZXJHcmlkT3B0aW9ucztcclxuXHJcbiAgbW9kYWxSZWY6IEJzTW9kYWxSZWY7XHJcblxyXG4gIGdyYXBoOiBHcmFwaDtcclxuICBoc3BhY2UgPSA4MDtcclxuICB2c3BhY2UgPSAyODtcclxuICB1cExheW91dDogUmV2ZXJ0Q29tcGFjdFRyZWVMYXlvdXQ7XHJcbiAgZG93bkxheW91dDogQ29tcGFjdFRyZWVMYXlvdXQ7XHJcbiAgb3V0bGluZTogT3V0bGluZTtcclxuXHJcbiAgZW50cnlDZWxsRGF0YTogRW50cnlDZWxsRGF0YTtcclxuXHJcbiAgbGF5b3V0TWFuYWdlcjogTXhHcmFwaE5TLm14TGF5b3V0TWFuYWdlcjtcclxuICBlbnRyeTogQmlsbENlbGw7XHJcbiAgdXBQYXJlbnQ6IE14R3JhcGhOUy5teENlbGw7XHJcbiAgZG93blBhcmVudDogTXhHcmFwaE5TLm14Q2VsbDtcclxuXHJcbiAgZGVmYXVsdFdpZHRoID0gMjUwO1xyXG4gIGRlZmF1bHRIZWlnaHQgPSAxMzg7XHJcbiAgbm9kZVdpZHRoID0gdGhpcy5kZWZhdWx0V2lkdGg7XHJcbiAgbm9kZUhlaWdodCA9IHRoaXMuZGVmYXVsdEhlaWdodDtcclxuICBkZWZhdWx0Tm9uRW50cnlJbWFnZSA9ICghbXhDbGllbnQuSVNfU1ZHKSA/IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvbm9uLWVudHJ5LWJpbGwucG5nJyA6IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvbm9uLWVudHJ5LWJpbGwuc3ZnJztcclxuICBkZWZhdWx0RW50cnlJbWFnZSA9ICghbXhDbGllbnQuSVNfU1ZHKSA/IEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvZW50cnktYmlsbC5wbmcnIDogQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy9lbnRyeS1iaWxsLnN2Zyc7XHJcblxyXG4gIGRlZmF1bHRPdmVybGF5V2lkdGggPSAyNjtcclxuICBkZWZhdWx0T3ZlcmxheUhlaWdodCA9IDI2O1xyXG4gIG92ZXJsYXlXaWR0aDogbnVtYmVyID0gdGhpcy5kZWZhdWx0T3ZlcmxheVdpZHRoO1xyXG4gIG92ZXJsYXlIZWlnaHQ6IG51bWJlciA9IHRoaXMuZGVmYXVsdE92ZXJsYXlIZWlnaHQ7XHJcblxyXG4gIGRlZmF1bHRVcFNlYXJjaEltYWdlID0gbmV3IG14SW1hZ2UoQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy90cmFja2VyLXBsdXMuc3ZnJywgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCk7XHJcbiAgZGVmYXVsdERvd25TZWFyY2hJbWFnZSA9IG5ldyBteEltYWdlKEJpbGxUcmFja2VyQ29uc3RhbnQuSU1BR0VfUEFUSCArICcvdHJhY2tlci1wbHVzLnN2ZycsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpO1xyXG4gIGRlZmF1bHRVcEZvbGRlckltYWdlID0gbmV3IG14SW1hZ2UoQmlsbFRyYWNrZXJDb25zdGFudC5JTUFHRV9QQVRIICsgJy90cmFja2VyLW1pbnVzLnN2ZycsIHRoaXMub3ZlcmxheVdpZHRoLCB0aGlzLm92ZXJsYXlIZWlnaHQpO1xyXG4gIGRlZmF1bHREb3duRm9sZGVySW1hZ2UgPSBuZXcgbXhJbWFnZShCaWxsVHJhY2tlckNvbnN0YW50LklNQUdFX1BBVEggKyAnL3RyYWNrZXItbWludXMuc3ZnJywgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCk7XHJcblxyXG4gIHVwU2VhcmNoSW1hZ2UgPSB0aGlzLmRlZmF1bHRVcFNlYXJjaEltYWdlO1xyXG4gIGRvd25TZWFyY2hJbWFnZSA9IHRoaXMuZGVmYXVsdERvd25TZWFyY2hJbWFnZTtcclxuICB1cEZvbGRlckltYWdlID0gdGhpcy5kZWZhdWx0VXBGb2xkZXJJbWFnZTtcclxuICBkb3duRm9sZGVySW1hZ2UgPSB0aGlzLmRlZmF1bHREb3duRm9sZGVySW1hZ2U7XHJcblxyXG4gIHVwU2VhcmNoT2Zmc2V0ID0gbmV3IG14UG9pbnQoLTUwLCAwKTtcclxuICBkb3duU2VhcmNoT2Zmc2V0ID0gbmV3IG14UG9pbnQoNTAsIDApO1xyXG5cclxuICBkYXRhSW5mb1NlcnZpY2U6IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlO1xyXG5cclxuICAvKipcclxuICAgKiDmraPlnKjliqDovb3kuK3nmoTljZXmja7oioLngrnor7fmsYLmlbBcclxuICAgKi9cclxuICBudW1DZWxsc0FkZGluZ1JlcSA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIOW9k+WJjeiPnOWNlVxyXG4gICAqL1xyXG4gIGN1cnJlbnRNZW51OiBNeEdyYXBoTlMubXhQb3B1cE1lbnU7XHJcbiAgLyoqXHJcbiAgICog5b2T5YmN6I+c5Y2VZG9t5YWD57SgXHJcbiAgICovXHJcbiAgY3VycmVudE1lbnVFbHQ6IGFueTtcclxuICAvKipcclxuICAgKiDoioLngrnigJzmm7TlpJrigJ3mjInpkq7lvLnlh7roj5zljZXlr7nosaFcclxuICAgKi9cclxuICBtb3JlUG9wdXBNZW51OiBNeEdyYXBoTlMubXhQb3B1cE1lbnU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgYXJnczogQmlsbFRyYWNrZXJBcmdzLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGF0YVNlcnZpY2U6IEJpbGxUcmFja2VyRGF0YVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1lc3NhZ2VyOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbG9hZGluZzogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwdWJsaWMgbW9kYWw6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHVibGljIHZjcjogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHB1YmxpYyBpbmo6IEluamVjdG9yLFxyXG4gICAgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHVibGljIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSBuZXcgQmlsbFRyYWNrZXJMb2NhbGVQaXBlKGxvY2FsZUlkKTtcclxuICAgIHRoaXMuZGF0YUluZm9TZXJ2aWNlID0gbmV3IEJpbGxUcmFja2VyRGF0YUluZm9TZXJ2aWNlKCk7XHJcblxyXG4gICAgdGhpcy5iaWxsVHJhY2tlckFyZ3MgPSBhcmdzO1xyXG4gICAgdGhpcy5vcmlnaW5CaWxsVHJhY2tlckFyZ3MgPSB0aGlzLmJpbGxUcmFja2VyQXJncztcclxuICAgIGNvbnN0IGdyYXBoT3B0aW9ucyA9IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmdyYXBoT3B0aW9ucztcclxuICAgIHRoaXMuZ3JhcGhPcHRpb25zID0gZ3JhcGhPcHRpb25zO1xyXG4gICAgY29uc3QgZ3JpZE9wdGlvbnMgPSB0aGlzLmJpbGxUcmFja2VyQXJncy5ncmlkT3B0aW9ucztcclxuICAgIHRoaXMuZ3JpZE9wdGlvbnMgPSBncmlkT3B0aW9ucztcclxuXHJcbiAgICB0aGlzLnVwU2VhcmNoSW1hZ2UgPSBncmFwaE9wdGlvbnMgJiYgZ3JhcGhPcHRpb25zLnVwU2VhcmNoSW1hZ2UgPyBuZXcgbXhJbWFnZShncmFwaE9wdGlvbnMudXBTZWFyY2hJbWFnZSwgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCkgOiB0aGlzLnVwU2VhcmNoSW1hZ2U7XHJcbiAgICB0aGlzLmRvd25TZWFyY2hJbWFnZSA9IGdyYXBoT3B0aW9ucyAmJiBncmFwaE9wdGlvbnMuZG93blNlYXJjaEltYWdlID8gbmV3IG14SW1hZ2UoZ3JhcGhPcHRpb25zLmRvd25TZWFyY2hJbWFnZSwgdGhpcy5vdmVybGF5V2lkdGgsIHRoaXMub3ZlcmxheUhlaWdodCkgOiB0aGlzLmRvd25TZWFyY2hJbWFnZTtcclxuICAgIHRoaXMudXBGb2xkZXJJbWFnZSA9IGdyYXBoT3B0aW9ucyAmJiBncmFwaE9wdGlvbnMudXBGb2xkZXJJbWFnZSA/IG5ldyBteEltYWdlKGdyYXBoT3B0aW9ucy51cEZvbGRlckltYWdlLCB0aGlzLm92ZXJsYXlXaWR0aCwgdGhpcy5vdmVybGF5SGVpZ2h0KSA6IHRoaXMudXBGb2xkZXJJbWFnZTtcclxuICAgIHRoaXMuZG93bkZvbGRlckltYWdlID0gZ3JhcGhPcHRpb25zICYmIGdyYXBoT3B0aW9ucy5kb3duRm9sZGVySW1hZ2UgPyBuZXcgbXhJbWFnZShncmFwaE9wdGlvbnMuZG93bkZvbGRlckltYWdlLCB0aGlzLm92ZXJsYXlXaWR0aCwgdGhpcy5vdmVybGF5SGVpZ2h0KSA6IHRoaXMuZG93bkZvbGRlckltYWdlO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmdyYXBoID0gdGhpcy5jcmVhdGVHcmFwaCgpO1xyXG4gICAgdGhpcy5jcmVhdGVMYXlvdXQodGhpcy5ncmFwaCk7XHJcbiAgICB0aGlzLmxheW91dE1hbmFnZXIgPSBuZXcgbXhMYXlvdXRNYW5hZ2VyKHRoaXMuZ3JhcGgpO1xyXG4gICAgdGhpcy5vdXRsaW5lID0gbmV3IE91dGxpbmUodGhpcy5ncmFwaCwgdGhpcy5teE91dGxpbmVDb250YWluZXIubmF0aXZlRWxlbWVudCk7XHJcblxyXG4gICAgLy8g5Yib5bu66IqC54K54oCc5pu05aSa4oCd5oyJ6ZKu5by55Ye66I+c5Y2VXHJcbiAgICB0aGlzLm1vcmVQb3B1cE1lbnUgPSBuZXcgbXhQb3B1cE1lbnUoKG1lbnUsIGNlbGw6IEJpbGxDZWxsLCBldnQpID0+IHtcclxuICAgICAgLy8g57un57ut6L+96LiqXHJcbiAgICAgIG1lbnUuYWRkSXRlbSh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiZ29PblRyYWNraW5nXCIpLCBudWxsLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5nb09uVHJhY2soY2VsbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyAvLyDorr7kuLrlvZPliY1cclxuICAgICAgLy8gbWVudS5hZGRJdGVtKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJzZXRBc0N1cnJlbnRcIiksIG51bGwsICgpID0+IHtcclxuICAgICAgLy8gICB0aGlzLnNldEFzQ3VycmVudChjZWxsKTtcclxuICAgICAgLy8gfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZWZyZXNoKHNpemVEaWRDaGFuZ2U6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICBpZiAoc2l6ZURpZENoYW5nZSAmJiB0aGlzLmdyYXBoICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5ncmFwaC5zaXplRGlkQ2hhbmdlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGFpbnQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBhaW50R3JhcGgodGhpcy5ncmFwaCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0TW9kYWxSZWYobW9kYWxSZWY6IEJzTW9kYWxSZWYpIHtcclxuICAgIHRoaXMubW9kYWxSZWYgPSBtb2RhbFJlZjtcclxuXHJcbiAgICBpZiAodGhpcy5tb2RhbFJlZiAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMubW9kYWxSZWYuZGlhbG9nLmluc3RhbmNlLmNsb3NlZC5zdWJzY3JpYmUoKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZ3JhcGggJiYgdGhpcy5ncmFwaC5kZXN0cm95KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyB0b2RvOiDkuLTml7bop6PlhrPlvLnnqpfmqKHlvI/kuIvlhYjliLfmlrDlh7rlhaXlj6PoioLngrnpl67pophcclxuICAgICAgbGV0IGZsYWcgPSAwO1xyXG4gICAgICB0aGlzLm1vZGFsUmVmLmRpYWxvZy5pbnN0YW5jZS5yZXNpemVkLnN1YnNjcmliZSgoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGZsYWcgPj0gMikge1xyXG4gICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZsYWcrKztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlR3JhcGgoKSB7XHJcbiAgICAvL+WQr+eUqG14R3VpZGVcclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5ndWlkZXNFbmFibGVkID0gdHJ1ZTtcclxuICAgIC8v56aB55SobXhncmFwaOWuueWZqOWGheS4iuS4i+aWh+iPnOWNlVxyXG4gICAgbXhFdmVudC5kaXNhYmxlQ29udGV4dE1lbnUodGhpcy5teENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5zY3JvbGxPbk1vdmUgPSBmYWxzZTtcclxuICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5zY2FsZUdyaWQgPSB0cnVlO1xyXG5cclxuICAgIC8v5L+u5pS56IqC54K56YCJ5Lit5ZCO5aSE55CG5Zmo5Zu+54mH5Y+K5aGr5YWF6ImyXHJcbiAgICBteENvbnN0YW50cy5IQU5ETEVfRklMTENPTE9SID0gJyMyOWI2ZjInO1xyXG4gICAgbXhIYW5kbGUucHJvdG90eXBlLmNyZWF0ZVNoYXBlID0gZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgY29uc3QgYm91bmRzID0gbmV3IG14RWxsaXBzZSgwLCAwLCBteENvbnN0YW50cy5IQU5ETEVfU0laRSwgbXhDb25zdGFudHMuSEFORExFX1NJWkUpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBteEVsbGlwc2UoYm91bmRzLCBteENvbnN0YW50cy5IQU5ETEVfRklMTENPTE9SLCBteENvbnN0YW50cy5IQU5ETEVfU1RST0tFQ09MT1IpO1xyXG4gICAgfTtcclxuICAgIG14VmVydGV4SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2UgPSAoIW14Q2xpZW50LklTX1NWRykgPyBuZXcgbXhJbWFnZShCaWxsVHJhY2tlckNvbnN0YW50LklNQUdFX1BBVEggKyAnL2hhbmRsZS1tYWluLnBuZycsIG14Q29uc3RhbnRzLkhBTkRMRV9TSVpFLCBteENvbnN0YW50cy5IQU5ETEVfU0laRSkgOiBHcmFwaC5jcmVhdGVTdmdJbWFnZSgxOCwgMTgsICc8Y2lyY2xlIGN4PVwiOVwiIGN5PVwiOVwiIHI9XCIzXCIgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCInICsgR3JhcGguaGFuZGxlRmlsbCArICdcIiBzdHJva2Utd2lkdGg9XCIxXCIvPicpO1xyXG5cclxuICAgIG14Q29uc3RhbnRzLkRFRkFVTFRfVkFMSURfQ09MT1IgPSAnI0ZGRkZGRic7XHJcbiAgICBteENvbnN0YW50cy5ISUdITElHSFRfU1RST0tFV0lEVEggPSAxO1xyXG5cclxuICAgIC8v5L+u5pS5bXhHdWlkZem7mOiupOmFjee9rlxyXG4gICAgbXhDb25zdGFudHMuR1VJREVfQ09MT1IgPSAnIzAwODhjZic7XHJcbiAgICBteEd1aWRlLnByb3RvdHlwZS5jcmVhdGVHdWlkZVNoYXBlID0gKGhvcml6b250YWwpID0+IG5ldyBteFBvbHlsaW5lKFtdLCBteENvbnN0YW50cy5HVUlERV9DT0xPUiwgbXhDb25zdGFudHMuR1VJREVfU1RST0tFV0lEVEgpO1xyXG5cclxuICAgIC8v6K6+572u6IqC54K56YCJ5Lit57q/5qGG5a695bqmXHJcbiAgICBteENvbnN0YW50cy5WRVJURVhfU0VMRUNUSU9OX1NUUk9LRVdJRFRIID0gMTtcclxuICAgIG14Q29uc3RhbnRzLlZFUlRFWF9TRUxFQ1RJT05fQ09MT1IgPSAnIzNFOERGRic7XHJcbiAgICBteENvbnN0YW50cy5WRVJURVhfU0VMRUNUSU9OX0RBU0hFRCA9IGZhbHNlO1xyXG5cclxuICAgIC8v5L+u5pS557q/5a69XHJcbiAgICBteENvbm5lY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5nZXRFZGdlV2lkdGggPSAodmFsaWQ6IGFueSkgPT4gMTtcclxuICAgIG14Q29uc3RhbnRzLlZBTElEX0NPTE9SID0gJyMwMENENjYnO1xyXG5cclxuICAgIC8v5Yib5bu6bXhHcmFwaFxyXG4gICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgodGhpcy5teENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgZ3JhcGgubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZTtcclxuICAgIGdyYXBoLmdyYXBoT3B0aW9ucyA9IHRoaXMuZ3JhcGhPcHRpb25zO1xyXG4gICAgZ3JhcGguZ3JpZE9wdGlvbnMgPSB0aGlzLmdyaWRPcHRpb25zO1xyXG4gICAgLy/mt7vliqDoh6rlrprkuYnnm5HlkKzlmahcclxuICAgIHRoaXMuYWRkTGlzdGVuZXIoZ3JhcGgpO1xyXG4gICAgZ3JhcGgubmdDb21wID0gdGhpcztcclxuICAgIHJldHVybiBncmFwaDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVMYXlvdXQoZ3JhcGg6IEdyYXBoKSB7XHJcbiAgICBjb25zdCB1cExheW91dCA9IG5ldyBSZXZlcnRDb21wYWN0VHJlZUxheW91dChncmFwaCwgdHJ1ZSk7XHJcbiAgICB1cExheW91dC5sZXZlbERpc3RhbmNlID0gdGhpcy5oc3BhY2U7XHJcbiAgICB1cExheW91dC5lZGdlUm91dGluZyA9IGZhbHNlO1xyXG4gICAgdXBMYXlvdXQucmVzZXRFZGdlcyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMudXBMYXlvdXQgPSB1cExheW91dDtcclxuXHJcbiAgICBjb25zdCBkb3duTGF5b3V0ID0gbmV3IENvbXBhY3RUcmVlTGF5b3V0KGdyYXBoLCB0cnVlKTtcclxuICAgIGRvd25MYXlvdXQubGV2ZWxEaXN0YW5jZSA9IHRoaXMuaHNwYWNlO1xyXG4gICAgZG93bkxheW91dC5lZGdlUm91dGluZyA9IGZhbHNlO1xyXG4gICAgZG93bkxheW91dC5yZXNldEVkZ2VzID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmRvd25MYXlvdXQgPSBkb3duTGF5b3V0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZExpc3RlbmVyKGdyYXBoOiBhbnkpIHtcclxuICAgIGNvbnN0IGF1dG9BZGp1c3RIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3JhcGggIT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAwKTtcclxuICAgIH07XHJcbiAgICBteEV2ZW50LmFkZExpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsIGF1dG9BZGp1c3RIYW5kbGVyKTtcclxuXHJcbiAgICBjb25zdCB3aGVlbFJlc2l6ZUhhbmRsZXIgPSAoZXZ0OiBXaGVlbEV2ZW50LCB1cDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAvLyB3aW5kb3fkuItDdHJs5oyJ5LiL77yMTWFj5LiLQ29tbWFuZOaMieS4i1xyXG4gICAgICBpZiAobXhFdmVudC5pc0NvbnRyb2xEb3duKGV2dCkgfHwgKG14Q2xpZW50LklTX01BQyAmJiBldnQubWV0YUtleSkpIHtcclxuICAgICAgICBpZiAodXApIHtcclxuICAgICAgICAgIHRoaXMuem9vbUluKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuem9vbU91dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBteEV2ZW50LmNvbnN1bWUoZXZ0KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbXhFdmVudC5hZGRNb3VzZVdoZWVsTGlzdGVuZXIod2hlZWxSZXNpemVIYW5kbGVyLCB0aGlzLm14Q29udGFpbmVyRVIubmF0aXZlRWxlbWVudCk7XHJcblxyXG4gICAgZ3JhcGguc2VsZWN0RXZlbnRFbWl0dGVyID0gdGhpcy5zZWxlY3RFdmVudEVtaXR0ZXI7XHJcbiAgICBncmFwaC5nZXRTZWxlY3Rpb25Nb2RlbCgpLmFkZExpc3RlbmVyKG14RXZlbnQuQ0hBTkdFLCAoc2VuZGVyLCBldnQpID0+IHtcclxuICAgICAgaWYgKCEoc2VuZGVyIGluc3RhbmNlb2YgbXhHcmFwaFNlbGVjdGlvbk1vZGVsKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBsZXQgc2VsZWN0aW9uTW9kZWwgPSBzZW5kZXI7XHJcbiAgICAgIC8v6Iul5pyq6YCJ5Lit6IqC54K55oiW6ICF6YCJ5Lit6IqC54K55pWw5LiN5Li6MVxyXG4gICAgICBpZiAoc2VsZWN0aW9uTW9kZWwuY2VsbHMgPT0gbnVsbCB8fCBzZWxlY3Rpb25Nb2RlbC5jZWxscy5sZW5ndGggIT0gMSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RXZlbnRFbWl0dGVyLmVtaXQobnVsbCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBzZWxlY3RlZENlbGwgPSBzZWxlY3Rpb25Nb2RlbC5jZWxsc1swXTtcclxuICAgICAgLy/pgInkuK3nmoTmmK/ovrlcclxuICAgICAgaWYgKHNlbGVjdGVkQ2VsbC5lZGdlIHx8ICFzZWxlY3RlZENlbGwudmVydGV4KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNlbGVjdEV2ZW50RW1pdHRlci5lbWl0KHNlbGVjdGVkQ2VsbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBncmFwaC5hZGRMaXN0ZW5lcihFdmVudHMuQ0xJQ0tfRklSU1RfU1VNTUFSWSwgKHNlcmRlciwgZXZ0OiBNeEdyYXBoTlMubXhFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjZWxsID0gZXZ0LmdldFByb3BlcnR5KFwiY2VsbFwiKTtcclxuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUV2ZW50RW1pdHRlci5lbWl0KHtcclxuICAgICAgICB0eXBlOiBFdmVudHMuQ0xJQ0tfRklSU1RfU1VNTUFSWSxcclxuICAgICAgICBkYXRhOiBjZWxsXHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyDngrnlh7votoXpk77mjqXml7bkuLvliqjop6blj5HoioLngrnpgInkuK3kuovku7ZcclxuICAgICAgZ3JhcGguc2V0U2VsZWN0aW9uQ2VsbChjZWxsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOWumuS5ieWFqOWxgOS6i+S7tuWkhOeQhuWZqO+8jOeCueWHu+epuueZveWkhOmakOiXj+W8ueWHuuiPnOWNlVxyXG4gICAgY29uc3QgZ2VzdHVyZUhhbmRsZXIgPSAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRNZW51ICE9IG51bGwgJiYgbXhFdmVudC5nZXRTb3VyY2UoZXZ0KSAhPSB0aGlzLmN1cnJlbnRNZW51LmRpdikge1xyXG4gICAgICAgIHRoaXMuaGlkZUN1cnJlbnRNZW51KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBteEV2ZW50LmFkZEdlc3R1cmVMaXN0ZW5lcnMoZG9jdW1lbnQsIGdlc3R1cmVIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmakOiXj+W9k+WJjeiPnOWNlVxyXG4gICAqL1xyXG4gIGhpZGVDdXJyZW50TWVudSgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRNZW51ICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5jdXJyZW50TWVudS5oaWRlTWVudSgpO1xyXG4gICAgICB0aGlzLnJlc2V0Q3VycmVudE1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmHjee9ruW9k+WJjeiPnOWNlVxyXG4gICAqL1xyXG4gIHJlc2V0Q3VycmVudE1lbnUoKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRNZW51ID0gbnVsbDtcclxuICAgIHRoaXMuY3VycmVudE1lbnVFbHQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBhaW50R3JhcGgoZ3JhcGg6IEdyYXBoKSB7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICB0aGlzLmVudHJ5ID0gdGhpcy5wYWludEVudHJ5KGdyYXBoKTtcclxuICAgIHRoaXMuYWZ0ZXJQYWludEdyYXBoKHRoaXMuZ3JhcGgsIHRoaXMuZW50cnkpO1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXBhaW50R3JhcGgoZ3JhcGg6IEdyYXBoKSB7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICBncmFwaC5yZW1vdmVDZWxscyhncmFwaC5nZXRDaGlsZENlbGxzKGdyYXBoLmdldERlZmF1bHRQYXJlbnQoKSkpO1xyXG4gICAgdGhpcy5wYWludEdyYXBoKGdyYXBoKTtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWZ0ZXJQYWludEdyYXBoKGdyYXBoOiBHcmFwaCwgZW50cnk6IEJpbGxDZWxsKSB7XHJcbiAgICBpZiAoZW50cnkgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6buY6K6k6YCJ5Lit5YWl5Y+j6IqC54K5XHJcbiAgICBpZiAodGhpcy5iaWxsVHJhY2tlckFyZ3MuZ3JpZE9wdGlvbnMuc2hvd0VudHJ5RGF0YSkge1xyXG4gICAgICBncmFwaC5zZXRTZWxlY3Rpb25DZWxsKHRoaXMuZW50cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOm7mOiupOWxleekuuS4gOWxgu+8n1xyXG4gICAgY29uc3QgY2FuVHJhY2tpbmdSZXN1bHQgPSB0aGlzLmJpbGxUcmFja2VyQXJncy5jYW5UcmFja2luZ1Jlc3VsdDtcclxuICAgIGlmICh0aGlzLmJpbGxUcmFja2VyQXJncy5ncmFwaE9wdGlvbnMuc2hvd0Rvd25CaWxscyA9PSB0cnVlKSB7XHJcbiAgICAgIGNhblRyYWNraW5nUmVzdWx0LmNhbkRvd25UcmFja2luZyAmJiB0aGlzLmVudHJ5LmRvd25DZWxsT3ZlcmxheSAmJiB0aGlzLmVudHJ5LmRvd25DZWxsT3ZlcmxheS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QobXhFdmVudC5DTElDSywgXCJyZXNldFZpZXdcIiwgdHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYmlsbFRyYWNrZXJBcmdzLmdyYXBoT3B0aW9ucy5zaG93VXBCaWxscyA9PSB0cnVlKSB7XHJcbiAgICAgIGNhblRyYWNraW5nUmVzdWx0LmNhblVwVHJhY2tpbmcgJiYgdGhpcy5lbnRyeS51cENlbGxPdmVybGF5ICYmIHRoaXMuZW50cnkudXBDZWxsT3ZlcmxheS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QobXhFdmVudC5DTElDSywgXCJyZXNldFZpZXdcIiwgdHJ1ZSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHBhaW50RW50cnkoZ3JhcGg6IEdyYXBoKSB7XHJcbiAgICBsZXQgZW50cnk6IEJpbGxDZWxsID0gbnVsbDtcclxuXHJcbiAgICBpZiAodGhpcy5iaWxsVHJhY2tlckFyZ3MgPT0gbnVsbCB8fCB0aGlzLmJpbGxUcmFja2VyQXJncy5jYW5UcmFja2luZ1Jlc3VsdCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBlbnRyeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYW5UcmFja2luZ1Jlc3VsdCA9IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmNhblRyYWNraW5nUmVzdWx0O1xyXG4gICAgY29uc3QgaW5mbyA9IHRoaXMuZGF0YVNlcnZpY2UuYnVpbGRFbnRyeUJpbGxJbmZvKGNhblRyYWNraW5nUmVzdWx0KTtcclxuICAgIGNvbnN0IGRhdGFJbmZvID0gaW5mby5iaWxsRGF0YUluZm9zWzBdO1xyXG4gICAgbGV0IGJ0czogQmlsbFRyYWNraW5nU2V0dGluZ3MgPSBuZXcgQmlsbFRyYWNraW5nU2V0dGluZ3MoKTtcclxuICAgIGJ0cy5Mb2FkRnJvbUpzb24oY2FuVHJhY2tpbmdSZXN1bHQuYmlsbFRyYWNraW5nU2V0dGluZ3MpO1xyXG5cclxuICAgIGNvbnN0IHBhcmVudCA9IGdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTtcclxuXHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgeDAgPSAwO1xyXG4gICAgICBsZXQgeTAgPSAwO1xyXG5cclxuICAgICAgbGV0IGJ0czogQmlsbFRyYWNraW5nU2V0dGluZ3MgPSBuZXcgQmlsbFRyYWNraW5nU2V0dGluZ3MoKTtcclxuICAgICAgaWYgKGluZm8gJiYgaW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncykge1xyXG4gICAgICAgIGJ0cy5Mb2FkRnJvbUpzb24oaW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncyk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGN1c3RvbVN0eWxlID0gXCJcIjtcclxuICAgICAgZW50cnkgPSBncmFwaC5pbnNlcnRCaWxsQ2VsbChwYXJlbnQsIG51bGwsIGRhdGFJbmZvLCBpbmZvLCB0cnVlLCB4MCwgeTAsIHRoaXMubm9kZVdpZHRoLCB0aGlzLm5vZGVIZWlnaHQsIGBiaWxsTm9kZTtiaWxsTm9kZUVudHJ5OyR7Y3VzdG9tU3R5bGV9YCk7XHJcblxyXG4gICAgICBsZXQgZ2VvbWV0cnkgPSBncmFwaC5nZXRNb2RlbCgpLmdldEdlb21ldHJ5KGVudHJ5KTtcclxuICAgICAgbGV0IHNpemUgPSBncmFwaC5nZXRQcmVmZXJyZWRTaXplRm9yQ2VsbChlbnRyeSk7XHJcblxyXG4gICAgICB0aGlzLmVudHJ5Q2VsbERhdGEgPSBuZXcgRW50cnlDZWxsRGF0YSgpO1xyXG4gICAgICB0aGlzLnNldENlbGxEYXRhKHRoaXMuZW50cnlDZWxsRGF0YSwgZW50cnkpO1xyXG4gICAgICB0aGlzLmVudHJ5Q2VsbERhdGEuY2FuVHJhY2tpbmdSZXN1bHQgPSBjYW5UcmFja2luZ1Jlc3VsdDtcclxuICAgICAgZW50cnkuZGF0YSA9IHRoaXMuZW50cnlDZWxsRGF0YTtcclxuXHJcbiAgICAgIC8vIOa3u+WKoOS4iuafpeS4i+afpeaMiemSrlxyXG4gICAgICBpZiAoY2FuVHJhY2tpbmdSZXN1bHQuY2FuRG93blRyYWNraW5nKSB7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkRG93bk92ZXJsYXkoZ3JhcGgsIGVudHJ5KTtcclxuICAgICAgICBlbnRyeS5kb3duQ2VsbE92ZXJsYXkgPSBvdmVybGF5O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjYW5UcmFja2luZ1Jlc3VsdC5jYW5VcFRyYWNraW5nKSB7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkVXBPdmVybGF5KGdyYXBoLCBlbnRyeSk7XHJcbiAgICAgICAgZW50cnkudXBDZWxsT3ZlcmxheSA9IG92ZXJsYXk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudXBQYXJlbnQgPSBwYXJlbnQuY2xvbmUoKTtcclxuICAgICAgdGhpcy5kb3duUGFyZW50ID0gcGFyZW50LmNsb25lKCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxzKFt0aGlzLnVwUGFyZW50LCB0aGlzLmRvd25QYXJlbnRdLCBwYXJlbnQpO1xyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFVwT3ZlcmxheShncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsKTogYW55IHtcclxuICAgIGxldCB1cFNlYXJjaCA9IG5ldyBDZWxsT3ZlcmxheSh0aGlzLnVwU2VhcmNoSW1hZ2UsIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJ1cFNlYXJjaFwiKSwgbXhDb25zdGFudHMuQUxJR05fTEVGVCwgbXhDb25zdGFudHMuQUxJR05fTUlERExFLCB0aGlzLnVwU2VhcmNoT2Zmc2V0LCBcImhhbmRcIik7XHJcbiAgICB1cFNlYXJjaC5zdGF0ZSA9IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoO1xyXG4gICAgY29uc3QgdXBTZWFyY2hIYW5kbGVyID0gKHNlbmRlciwgZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc2V0VmlldyA9IGV2dC5nZXRQcm9wZXJ0eShcInJlc2V0Vmlld1wiKTtcclxuICAgICAgY29uc3Qgc2hvd0xvYWRpbmcgPSBldnQuZ2V0UHJvcGVydHkoXCJzaG93TG9hZGluZ1wiKSAhPSBudWxsID8gZXZ0LmdldFByb3BlcnR5KFwic2hvd0xvYWRpbmdcIikgOiB0cnVlO1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICAgIHRoaXMuYWRkVXBBc3NvQ2VsbChncmFwaCwgY2VsbCwgcmVzZXRWaWV3LCBzaG93TG9hZGluZyk7XHJcbiAgICAgIHVwU2VhcmNoLnJlbW92ZUxpc3RlbmVyKHVwU2VhcmNoSGFuZGxlcik7XHJcbiAgICAgIHVwU2VhcmNoLnRvb2x0aXAgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiZm9sZGVyXCIpO1xyXG4gICAgICB1cFNlYXJjaC5pbWFnZSA9IHRoaXMudXBGb2xkZXJJbWFnZTtcclxuICAgICAgdXBTZWFyY2guc3RhdGUgPSBDZWxsT3ZlcmxheVN0YXRlLkZvbGQ7XHJcbiAgICAgIHVwU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIHVwRm9sZGVySGFuZGxlcik7XHJcbiAgICAgIGdyYXBoLnJlbW92ZUNlbGxPdmVybGF5KGNlbGwsIHVwU2VhcmNoKTtcclxuICAgICAgZ3JhcGguYWRkQ2VsbE92ZXJsYXkoY2VsbCwgdXBTZWFyY2gpO1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHVwRm9sZGVySGFuZGxlciA9IChzZW5kZXIsIGV2dDogTXhHcmFwaE5TLm14RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgICB0aGlzLnJlbW92ZUFzc29DZWxsKGdyYXBoLCBjZWxsLCBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCk7XHJcbiAgICAgIHVwU2VhcmNoLnJlbW92ZUxpc3RlbmVyKHVwRm9sZGVySGFuZGxlcik7XHJcbiAgICAgIHVwU2VhcmNoLnRvb2x0aXAgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwidXBTZWFyY2hcIik7XHJcbiAgICAgIHVwU2VhcmNoLmltYWdlID0gdGhpcy51cFNlYXJjaEltYWdlO1xyXG4gICAgICB1cFNlYXJjaC5zdGF0ZSA9IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoO1xyXG4gICAgICB1cFNlYXJjaC5hZGRMaXN0ZW5lcihteEV2ZW50LkNMSUNLLCB1cFNlYXJjaEhhbmRsZXIpO1xyXG4gICAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcbiAgICAgIGdyYXBoLmFkZENlbGxPdmVybGF5KGNlbGwsIHVwU2VhcmNoKTtcclxuICAgICAgZ3JhcGgubW9kZWwuZW5kVXBkYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHVwU2VhcmNoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0xJQ0ssIHVwU2VhcmNoSGFuZGxlcik7XHJcbiAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcbiAgICBncmFwaC5hZGRDZWxsT3ZlcmxheShjZWxsLCB1cFNlYXJjaCk7XHJcblxyXG4gICAgcmV0dXJuIHVwU2VhcmNoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZERvd25PdmVybGF5KGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwpOiBhbnkge1xyXG4gICAgbGV0IGRvd25TZWFyY2ggPSBuZXcgQ2VsbE92ZXJsYXkodGhpcy5kb3duU2VhcmNoSW1hZ2UsIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJkb3duU2VhcmNoXCIpLCBteENvbnN0YW50cy5BTElHTl9SSUdIVCwgbXhDb25zdGFudHMuQUxJR05fTUlERExFLCB0aGlzLmRvd25TZWFyY2hPZmZzZXQsIFwiaGFuZFwiKTtcclxuICAgIGRvd25TZWFyY2guc3RhdGUgPSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaDtcclxuICAgIGNvbnN0IGRvd25TZWFyY2hIYW5kbGVyID0gKHNlbmRlciwgZXZ0OiBNeEdyYXBoTlMubXhFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNldFZpZXcgPSBldnQuZ2V0UHJvcGVydHkoXCJyZXNldFZpZXdcIik7XHJcbiAgICAgIGNvbnN0IHNob3dMb2FkaW5nID0gZXZ0LmdldFByb3BlcnR5KFwic2hvd0xvYWRpbmdcIikgIT0gbnVsbCA/IGV2dC5nZXRQcm9wZXJ0eShcInNob3dMb2FkaW5nXCIpIDogdHJ1ZTtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgICB0aGlzLmFkZERvd25Bc3NvQ2VsbChncmFwaCwgY2VsbCwgcmVzZXRWaWV3LCBzaG93TG9hZGluZyk7XHJcbiAgICAgIGRvd25TZWFyY2guaW1hZ2UgPSB0aGlzLmRvd25Gb2xkZXJJbWFnZTtcclxuICAgICAgZG93blNlYXJjaC50b29sdGlwID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImZvbGRlclwiKTtcclxuICAgICAgZG93blNlYXJjaC5zdGF0ZSA9IENlbGxPdmVybGF5U3RhdGUuRm9sZDtcclxuICAgICAgZG93blNlYXJjaC5yZW1vdmVMaXN0ZW5lcihkb3duU2VhcmNoSGFuZGxlcik7XHJcbiAgICAgIGRvd25TZWFyY2guYWRkTGlzdGVuZXIobXhFdmVudC5DTElDSywgZG93bkZvbGRlckhhbmRsZXIpO1xyXG4gICAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCBkb3duU2VhcmNoKTtcclxuICAgICAgZ3JhcGguYWRkQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcbiAgICAgIC8vIGdyYXBoLnJlZnJlc2goY2VsbCk7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRvd25Gb2xkZXJIYW5kbGVyID0gKHNlbmRlciwgZXZ0KSA9PiB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgICAgdGhpcy5yZW1vdmVBc3NvQ2VsbChncmFwaCwgY2VsbCwgQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bik7XHJcbiAgICAgIGRvd25TZWFyY2guaW1hZ2UgPSB0aGlzLmRvd25TZWFyY2hJbWFnZTtcclxuICAgICAgZG93blNlYXJjaC50b29sdGlwID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImRvd25TZWFyY2hcIik7XHJcbiAgICAgIGRvd25TZWFyY2guc3RhdGUgPSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaDtcclxuICAgICAgZG93blNlYXJjaC5yZW1vdmVMaXN0ZW5lcihkb3duRm9sZGVySGFuZGxlcik7XHJcbiAgICAgIGRvd25TZWFyY2guYWRkTGlzdGVuZXIobXhFdmVudC5DTElDSywgZG93blNlYXJjaEhhbmRsZXIpO1xyXG4gICAgICBncmFwaC5yZW1vdmVDZWxsT3ZlcmxheShjZWxsLCBkb3duU2VhcmNoKTtcclxuICAgICAgZ3JhcGguYWRkQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcbiAgICAgIC8vIGdyYXBoLnJlZnJlc2goY2VsbCk7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRvd25TZWFyY2guYWRkTGlzdGVuZXIobXhFdmVudC5DTElDSywgZG93blNlYXJjaEhhbmRsZXIpO1xyXG4gICAgZ3JhcGgucmVtb3ZlQ2VsbE92ZXJsYXkoY2VsbCwgZG93blNlYXJjaCk7XHJcbiAgICBncmFwaC5hZGRDZWxsT3ZlcmxheShjZWxsLCBkb3duU2VhcmNoKTtcclxuXHJcbiAgICByZXR1cm4gZG93blNlYXJjaDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRVcEFzc29DZWxsKGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIHJlc2V0VmlldzogYm9vbGVhbiA9IGZhbHNlLCBzaG93TG9hZGluZzogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmRhdGFTZXJ2aWNlLmJ1aWxkR2V0VXBCaWxsc0luZm9BcmdzKGNlbGwpO1xyXG5cclxuICAgIGNvbnN0IGwgPSBzaG93TG9hZGluZyAmJiAodGhpcy5sb2FkaW5nLmNsZWFyQWxsKCksIHRoaXMubG9hZGluZy5zaG93KHsgbWVzc2FnZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImxvYWRpbmdcIikgfSkpO1xyXG4gICAgdGhpcy5udW1DZWxsc0FkZGluZ1JlcSsrO1xyXG4gICAgdGhpcy5kYXRhU2VydmljZS5nZXRVcEJpbGxzSW5mbyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgIChpbmZvczogVXBCaWxsSW5mb1Jlc3VsdFtdKSA9PiB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IGdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld0NlbGxzID0gW107XHJcbiAgICAgICAgLy8gZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpbmZvIG9mIGluZm9zKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGRhdGFJbmZvIG9mIGluZm8uYmlsbERhdGFJbmZvcykge1xyXG4gICAgICAgICAgICAgIGxldCBiaWxsQ2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgbGV0IGJ0czogQmlsbFRyYWNraW5nU2V0dGluZ3MgPSBuZXcgQmlsbFRyYWNraW5nU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICBpZiAoaW5mbyAmJiBpbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICBidHMuTG9hZEZyb21Kc29uKGluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgbGV0IGN1c3RvbVN0eWxlID0gXCJcIjtcclxuICAgICAgICAgICAgICBiaWxsQ2VsbCA9IGdyYXBoLmluc2VydEJpbGxDZWxsKHRoaXMudXBQYXJlbnQsIG51bGwsIGRhdGFJbmZvLCBpbmZvLCBmYWxzZSwgY2VsbC5nZW9tZXRyeS54IC0gdGhpcy5oc3BhY2UsIGNlbGwuZ2VvbWV0cnkueSwgdGhpcy5ub2RlV2lkdGgsIHRoaXMubm9kZUhlaWdodCwgYGJpbGxOb2RlOyR7Y3VzdG9tU3R5bGV9YCk7XHJcblxyXG4gICAgICAgICAgICAgIG5ld0NlbGxzLnB1c2goYmlsbENlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5jYWxDZWxsc1Bvc2l0aW9uKGdyYXBoLCBjZWxsLCBuZXdDZWxscywgQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXApO1xyXG5cclxuICAgICAgICAgIGZvciAobGV0IG5jIG9mIG5ld0NlbGxzKSB7XHJcbiAgICAgICAgICAgIGlmIChuYy5iaWxsRGF0YUluZm8uY2FuQ29udGludWVUcmFja2luZykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9sID0gdGhpcy5hZGRVcE92ZXJsYXkoZ3JhcGgsIG5jKTtcclxuICAgICAgICAgICAgICBuYy51cENlbGxPdmVybGF5ID0gb2w7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3JhcGguaW5zZXJ0RWRnZShwYXJlbnQsIG51bGwsICcnLCBuYywgY2VsbCwgXCJiaWxsQXNzb2NpYXRpb247XCIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IG9sZEdlbyA9IHRoaXMuZW50cnkuZ2V0R2VvbWV0cnkoKS5jbG9uZSgpO1xyXG4gICAgICAgICAgdGhpcy51cExheW91dC5leGVjdXRlKHRoaXMudXBQYXJlbnQsIHRoaXMuZW50cnkpO1xyXG4gICAgICAgICAgY29uc3QgbmV3R2VvID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgICAgICBjb25zdCBkeCA9IG9sZEdlby54IC0gbmV3R2VvLng7XHJcbiAgICAgICAgICBjb25zdCBkeSA9IG9sZEdlby55IC0gbmV3R2VvLnk7XHJcblxyXG4gICAgICAgICAgdGhpcy5yZXN0b3JlRW50cnlQb3NpdGlvbihncmFwaCwgdGhpcy5lbnRyeSwgZHgsIGR5KTtcclxuXHJcbiAgICAgICAgICBjb25zdCBjZWxsRGF0YSA9IGNlbGwuZGF0YSBhcyBVcENlbGxEYXRhO1xyXG4gICAgICAgICAgY2VsbERhdGEudXBzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICBmb3IgKGxldCBuYyBvZiBuZXdDZWxscykge1xyXG4gICAgICAgICAgICBjb25zdCBjZCA9IG5ldyBVcENlbGxEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbERhdGEoY2QsIG5jKTtcclxuICAgICAgICAgICAgbmMuZGF0YSA9IGNkO1xyXG5cclxuICAgICAgICAgICAgY2QuZG93biA9IGNlbGxEYXRhO1xyXG4gICAgICAgICAgICBjZWxsRGF0YS51cHMucHVzaChjZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6YeN57uY55S75biD5aSn5bCPXHJcbiAgICAgICAgcmVzZXRWaWV3ICYmIGdyYXBoLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChFdmVudHMuUkVTRVRfR1JBUEhfVklFVykpO1xyXG4gICAgICAgIHRoaXMubnVtQ2VsbHNBZGRpbmdSZXEtLTtcclxuICAgICAgICAvLyDoh6rlrprkuYnljZXmja7oioLngrnmj5LlhaXlubbnp7vkvY3lkI7kuovku7ZcclxuICAgICAgICB0aGlzLmdyYXBoLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChFdmVudHMuQklMTF9DRUxMU19BRERFRF9BTkRfTU9WRUQsICdjZWxscycsIG5ld0NlbGxzLCAncGFyZW50JywgdGhpcy51cFBhcmVudCkpO1xyXG4gICAgICAgIGwgJiYgbC5jbG9zZSgpO1xyXG4gICAgICB9LFxyXG4gICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5udW1DZWxsc0FkZGluZ1JlcS0tO1xyXG4gICAgICAgIGwgJiYgbC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXIuY3VycmVudElkID09IC0xICYmIHRoaXMubWVzc2FnZXIuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGREb3duQXNzb0NlbGwoZ3JhcGg6IEdyYXBoLCBjZWxsOiBCaWxsQ2VsbCwgcmVzZXRWaWV3OiBib29sZWFuID0gZmFsc2UsIHNob3dMb2FkaW5nOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgY29uc3QgYXJncyA9IHRoaXMuZGF0YVNlcnZpY2UuYnVpbGRHZXREb3duQmlsbHNJbmZvQXJncyhjZWxsKTtcclxuXHJcbiAgICBjb25zdCBsID0gc2hvd0xvYWRpbmcgJiYgKHRoaXMubG9hZGluZy5jbGVhckFsbCgpLCB0aGlzLmxvYWRpbmcuc2hvdyh7IG1lc3NhZ2U6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJsb2FkaW5nXCIpIH0pKTtcclxuICAgIHRoaXMubnVtQ2VsbHNBZGRpbmdSZXErKztcclxuICAgIHRoaXMuZGF0YVNlcnZpY2UuZ2V0RG93bkJpbGxzSW5mbyhhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgIChpbmZvczogRG93bkJpbGxJbmZvUmVzdWx0W10pID0+IHtcclxuICAgICAgICBsZXQgbW9kZWwgPSBncmFwaC5nZXRNb2RlbCgpO1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSBncmFwaC5nZXREZWZhdWx0UGFyZW50KCk7XHJcblxyXG4gICAgICAgIGxldCBuZXdDZWxscyA9IFtdO1xyXG4gICAgICAgIC8vIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChsZXQgaW5mbyBvZiBpbmZvcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBkYXRhSW5mbyBvZiBpbmZvLmJpbGxEYXRhSW5mb3MpIHtcclxuICAgICAgICAgICAgICBsZXQgYmlsbENlbGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgIGxldCBidHM6IEJpbGxUcmFja2luZ1NldHRpbmdzID0gbmV3IEJpbGxUcmFja2luZ1NldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGluZm8gJiYgaW5mby5iaWxsVHJhY2tpbmdTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgYnRzLkxvYWRGcm9tSnNvbihpbmZvLmJpbGxUcmFja2luZ1NldHRpbmdzKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGxldCBjdXN0b21TdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgYmlsbENlbGwgPSBncmFwaC5pbnNlcnRCaWxsQ2VsbCh0aGlzLmRvd25QYXJlbnQsIG51bGwsIGRhdGFJbmZvLCBpbmZvLCBmYWxzZSwgY2VsbC5nZW9tZXRyeS54ICsgdGhpcy5oc3BhY2UsIGNlbGwuZ2VvbWV0cnkueSwgdGhpcy5ub2RlV2lkdGgsIHRoaXMubm9kZUhlaWdodCwgYGJpbGxOb2RlOyR7Y3VzdG9tU3R5bGV9YCk7XHJcblxyXG4gICAgICAgICAgICAgIG5ld0NlbGxzLnB1c2goYmlsbENlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNhbENlbGxzUG9zaXRpb24oZ3JhcGgsIGNlbGwsIG5ld0NlbGxzLCBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBuYyBvZiBuZXdDZWxscykge1xyXG4gICAgICAgICAgICBpZiAobmMuYmlsbERhdGFJbmZvLmNhbkNvbnRpbnVlVHJhY2tpbmcpIHtcclxuICAgICAgICAgICAgICBjb25zdCBvbCA9IHRoaXMuYWRkRG93bk92ZXJsYXkoZ3JhcGgsIG5jKTtcclxuICAgICAgICAgICAgICBuYy5kb3duQ2VsbE92ZXJsYXkgPSBvbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBncmFwaC5pbnNlcnRFZGdlKHBhcmVudCwgbnVsbCwgJycsIGNlbGwsIG5jLCBcImJpbGxBc3NvY2lhdGlvbjtcIik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3Qgb2xkR2VvID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgICAgICB0aGlzLmRvd25MYXlvdXQuZXhlY3V0ZSh0aGlzLmRvd25QYXJlbnQsIHRoaXMuZW50cnkpO1xyXG4gICAgICAgICAgY29uc3QgbmV3R2VvID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgICAgICBjb25zdCBkeCA9IG9sZEdlby54IC0gbmV3R2VvLng7XHJcbiAgICAgICAgICBjb25zdCBkeSA9IG9sZEdlby55IC0gbmV3R2VvLnk7XHJcblxyXG4gICAgICAgICAgdGhpcy5yZXN0b3JlRW50cnlQb3NpdGlvbihncmFwaCwgdGhpcy5lbnRyeSwgZHgsIGR5KTtcclxuXHJcbiAgICAgICAgICBjb25zdCBjZWxsRGF0YSA9IGNlbGwuZGF0YSBhcyBEb3duQ2VsbERhdGE7XHJcbiAgICAgICAgICBjZWxsRGF0YS5kb3ducy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgZm9yIChsZXQgbmMgb2YgbmV3Q2VsbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgY2QgPSBuZXcgRG93bkNlbGxEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbERhdGEoY2QsIG5jKTtcclxuICAgICAgICAgICAgbmMuZGF0YSA9IGNkO1xyXG5cclxuICAgICAgICAgICAgY2QudXAgPSBjZWxsRGF0YTtcclxuICAgICAgICAgICAgY2VsbERhdGEuZG93bnMucHVzaChjZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6YeN57uY55S75biD5aSn5bCPXHJcbiAgICAgICAgcmVzZXRWaWV3ICYmIGdyYXBoLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChFdmVudHMuUkVTRVRfR1JBUEhfVklFVykpO1xyXG4gICAgICAgIHRoaXMubnVtQ2VsbHNBZGRpbmdSZXEtLTtcclxuICAgICAgICAvLyDoh6rlrprkuYnljZXmja7oioLngrnmj5LlhaXlubbnp7vkvY3lkI7kuovku7ZcclxuICAgICAgICB0aGlzLmdyYXBoLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChFdmVudHMuQklMTF9DRUxMU19BRERFRF9BTkRfTU9WRUQsICdjZWxscycsIG5ld0NlbGxzLCAncGFyZW50JywgdGhpcy5kb3duUGFyZW50KSk7XHJcbiAgICAgICAgbCAmJiBsLmNsb3NlKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnIpID0+IHtcclxuICAgICAgICB0aGlzLm51bUNlbGxzQWRkaW5nUmVxLS07XHJcbiAgICAgICAgbCAmJiBsLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlci5jdXJyZW50SWQgPT0gLTEgJiYgdGhpcy5tZXNzYWdlci5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZUFzc29DZWxsKGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIGRpcjogQmlsbFRyYWNrZXJEaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IG1vZGVsID0gZ3JhcGguZ2V0TW9kZWwoKTtcclxuICAgIGNvbnN0IHBhcmVudCA9IGdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBhc3NvQ2VsbHM6IEJpbGxDZWxsW10gPSBbXTtcclxuICAgICAgaWYgKGRpciA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKSB7XHJcbiAgICAgICAgbGV0IGVkZ2VzID0gbW9kZWwuZ2V0T3V0Z29pbmdFZGdlcyhjZWxsKTtcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGVkZ2VzICYmIGVkZ2VzLmxlbmd0aCA+IDAgJiYgaSA8IGVkZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKGVkZ2VzW2ldLnRhcmdldCAmJiBlZGdlc1tpXS50YXJnZXQgIT0gdGhpcy5lbnRyeSkge1xyXG4gICAgICAgICAgICBhc3NvQ2VsbHMucHVzaChlZGdlc1tpXS50YXJnZXQgYXMgQmlsbENlbGwpO1xyXG4gICAgICAgICAgICBlZGdlcy5wdXNoKC4uLm1vZGVsLmdldE91dGdvaW5nRWRnZXMoZWRnZXNbaV0udGFyZ2V0KSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpciA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCkge1xyXG4gICAgICAgIGxldCBlZGdlcyA9IG1vZGVsLmdldEluY29taW5nRWRnZXMoY2VsbCk7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIHdoaWxlIChlZGdlcyAmJiBlZGdlcy5sZW5ndGggPiAwICYmIGkgPCBlZGdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmIChlZGdlc1tpXS5zb3VyY2UgJiYgZWRnZXNbaV0uc291cmNlICE9IHRoaXMuZW50cnkpIHtcclxuICAgICAgICAgICAgYXNzb0NlbGxzLnB1c2goZWRnZXNbaV0uc291cmNlIGFzIEJpbGxDZWxsKTtcclxuICAgICAgICAgICAgZWRnZXMucHVzaCguLi5tb2RlbC5nZXRJbmNvbWluZ0VkZ2VzKGVkZ2VzW2ldLnNvdXJjZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoZGlyID09IEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24pIHtcclxuICAgICAgICAoY2VsbC5kYXRhIGFzIERvd25DZWxsRGF0YSkuZG93bnMubGVuZ3RoID0gMDtcclxuICAgICAgfSBlbHNlIGlmIChkaXIgPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uVXApIHtcclxuICAgICAgICAoY2VsbC5kYXRhIGFzIFVwQ2VsbERhdGEpLnVwcy5sZW5ndGggPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGdyYXBoLnJlbW92ZUNlbGxzKGFzc29DZWxscyk7XHJcblxyXG4gICAgICBjb25zdCBvbGRHZW8gPSB0aGlzLmVudHJ5LmdldEdlb21ldHJ5KCkuY2xvbmUoKTtcclxuICAgICAgdGhpcy51cExheW91dC5leGVjdXRlKHRoaXMudXBQYXJlbnQsIHRoaXMuZW50cnkpO1xyXG4gICAgICBjb25zdCBuZXdHZW8gPSB0aGlzLmVudHJ5LmdldEdlb21ldHJ5KCkuY2xvbmUoKTtcclxuICAgICAgY29uc3QgZHggPSBvbGRHZW8ueCAtIG5ld0dlby54O1xyXG4gICAgICBjb25zdCBkeSA9IG9sZEdlby55IC0gbmV3R2VvLnk7XHJcbiAgICAgIHRoaXMucmVzdG9yZUVudHJ5UG9zaXRpb24oZ3JhcGgsIHRoaXMuZW50cnksIGR4LCBkeSk7XHJcblxyXG4gICAgICBjb25zdCBvbGRHZW8yID0gdGhpcy5lbnRyeS5nZXRHZW9tZXRyeSgpLmNsb25lKCk7XHJcbiAgICAgIHRoaXMuZG93bkxheW91dC5leGVjdXRlKHRoaXMuZG93blBhcmVudCwgdGhpcy5lbnRyeSk7XHJcbiAgICAgIGNvbnN0IG5ld0dlbzIgPSB0aGlzLmVudHJ5LmdldEdlb21ldHJ5KCkuY2xvbmUoKTtcclxuICAgICAgY29uc3QgZHgyID0gb2xkR2VvMi54IC0gbmV3R2VvMi54O1xyXG4gICAgICBjb25zdCBkeTIgPSBvbGRHZW8yLnkgLSBuZXdHZW8yLnk7XHJcbiAgICAgIHRoaXMucmVzdG9yZUVudHJ5UG9zaXRpb24oZ3JhcGgsIHRoaXMuZW50cnksIGR4MiwgZHkyKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzdG9yZUVudHJ5UG9zaXRpb24oZ3JhcGg6IEdyYXBoLCBlbnRyeTogQmlsbENlbGwsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpIHtcclxuICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCB2ZXJ0aWNlczogTXhHcmFwaE5TLm14Q2VsbFtdID0gbnVsbDtcclxuICAgICAgdmVydGljZXMgPSBbZW50cnksIC4uLmdyYXBoLmdldENoaWxkQ2VsbHModGhpcy51cFBhcmVudCwgdHJ1ZSwgZmFsc2UpLCAuLi5ncmFwaC5nZXRDaGlsZENlbGxzKHRoaXMuZG93blBhcmVudCwgdHJ1ZSwgZmFsc2UpXTtcclxuICAgICAgZ3JhcGgubW92ZUNlbGxzKHZlcnRpY2VzLCBkeCwgZHkpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBjYWxDZWxsc1Bvc2l0aW9uKGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIG5ld0NlbGxzOiBCaWxsQ2VsbFtdLCBkaXI6IEJpbGxUcmFja2VyRGlyZWN0aW9uKSB7XHJcbiAgICBpZiAoZGlyID09IEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24pIHtcclxuICAgICAgdGhpcy5yZXNldERvd25DZWxsc1Bvc2l0aW9uKGdyYXBoLCBjZWxsLCBuZXdDZWxscyk7XHJcbiAgICB9IGVsc2UgaWYgKGRpciA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCkge1xyXG4gICAgICB0aGlzLnJlc2V0VXBDZWxsc1Bvc2l0aW9uKGdyYXBoLCBjZWxsLCBuZXdDZWxscyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXREb3duQ2VsbHNQb3NpdGlvbihncmFwaDogR3JhcGgsIGNlbGw6IEJpbGxDZWxsLCBuZXdDZWxsczogQmlsbENlbGxbXSkge1xyXG4gICAgZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHRhcmdldHMgPSBncmFwaC5nZXRPdXRnb2luZ0VkZ2VzKGNlbGwpLm1hcChlZGdlID0+IGVkZ2UudGFyZ2V0KTtcclxuXHJcbiAgICAgIGxldCBkZWFscyA9IHRhcmdldHM7XHJcblxyXG4gICAgICAvL+aMiee6teWdkOagh+S7juWkp+WIsOWwj+aOkuW6j1xyXG4gICAgICBsZXQgdGVtcCA9IGRlYWxzLnNvcnQoKGMxLCBjMikgPT4gYzEuZ2VvbWV0cnkgJiYgYzIuZ2VvbWV0cnkgPyBjMi5nZW9tZXRyeS55IC0gYzEuZ2VvbWV0cnkueSA6IE51bWJlci5NSU5fVkFMVUUpO1xyXG4gICAgICAvL+acgOWwj+e6teWdkOagh1xyXG4gICAgICBsZXQgbWluWSA9IHRlbXAubGVuZ3RoID4gMCA/IHRlbXBbdGVtcC5sZW5ndGggLSAxXS5nZW9tZXRyeS55IDogY2VsbC5nZW9tZXRyeS55O1xyXG4gICAgICAvL+acgOWkp+e6teWdkOagh1xyXG4gICAgICBsZXQgbWF4WSA9IHRlbXAubGVuZ3RoID4gMCA/IHRlbXBbMF0uZ2VvbWV0cnkueSA6IGNlbGwuZ2VvbWV0cnkueTtcclxuICAgICAgLy/kvp3mrKHkv67mlLnmlrDmj5LlhaXoioLngrnnmoTnurXlnZDmoIdcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDZWxscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG1heFkgPSBkZWFscy5sZW5ndGggPiAwID8gbWF4WSArIHRoaXMudnNwYWNlIDogbWF4WTtcclxuICAgICAgICBncmFwaC50cmFuc2xhdGVDZWxsKG5ld0NlbGxzW2ldLCAwLCBtYXhZIC0gbmV3Q2VsbHNbaV0uZ2VvbWV0cnkueSk7XHJcbiAgICAgICAgZGVhbHMucHVzaChuZXdDZWxsc1tpXSk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IG1pZFkgPSAobWF4WSArIG1pblkpIC8gMjtcclxuICAgICAgbGV0IGRpZmZZID0gY2VsbC5nZW9tZXRyeS55IC0gbWlkWTtcclxuICAgICAgLy/kvp3mrKHkv67mlLnmiYDmnInngrnnurXlnZDmoIdcclxuICAgICAgZGVhbHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICBncmFwaC50cmFuc2xhdGVDZWxsKGMsIDAsIGRpZmZZKTtcclxuICAgICAgfSk7XHJcbiAgICAgIG1pblkgKz0gZGlmZlk7XHJcbiAgICAgIG1heFkgKz0gZGlmZlk7XHJcblxyXG4gICAgICBtaWRZICs9IGRpZmZZO1xyXG4gICAgICAvLyDlsIY8PW1pZFnnmoToioLngrnlhajpg6jkuIrnp7voh7NtaW5ZLWRpZmZZLD49bWlkWeS4i+enu+iHs21heFkgKyBkaWZmWVxyXG4gICAgICBmb3IgKGxldCBrZXkgaW4gZ3JhcGgubW9kZWwuY2VsbHMpIHtcclxuICAgICAgICBpZiAoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSA9PSBncmFwaC5tb2RlbC5yb290IHx8IGdyYXBoLm1vZGVsLmNlbGxzW2tleV0uZ2VvbWV0cnkgPT0gbnVsbCB8fCBncmFwaC5tb2RlbC5jZWxsc1trZXldLmVkZ2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChncmFwaC5tb2RlbC5jZWxsc1trZXldID09IGNlbGwgfHwgbmV3Q2VsbHMuaW5kZXhPZihncmFwaC5tb2RlbC5jZWxsc1trZXldIGFzIGFueSkgIT0gLTEpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSA9PSB0aGlzLmVudHJ5KSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0uZ2VvbWV0cnkueCA8IHRoaXMuZW50cnkuZ2VvbWV0cnkueCkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGMgPSBncmFwaC5tb2RlbC5jZWxsc1trZXldO1xyXG4gICAgICAgIGxldCBnZW8gPSBjLmdlb21ldHJ5O1xyXG4gICAgICAgIGdyYXBoLnRyYW5zbGF0ZUNlbGwoYywgMCwgZ2VvLnkgPD0gY2VsbC5nZW9tZXRyeS55ID8gbWluWSAtIChjZWxsLmdlb21ldHJ5LnkgLSBnZW8ueSkgLSBnZW8ueSA6IG1heFkgKyAoZ2VvLnkgLSBjZWxsLmdlb21ldHJ5LnkpIC0gZ2VvLnkpO1xyXG4gICAgICB9XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0VXBDZWxsc1Bvc2l0aW9uKGdyYXBoOiBHcmFwaCwgY2VsbDogQmlsbENlbGwsIG5ld0NlbGxzOiBCaWxsQ2VsbFtdKSB7XHJcbiAgICBncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgc291cmNlcyA9IGdyYXBoLmdldEluY29taW5nRWRnZXMoY2VsbCkubWFwKGVkZ2UgPT4gZWRnZS5zb3VyY2UpO1xyXG4gICAgICBsZXQgZGVhbHMgPSBzb3VyY2VzO1xyXG5cclxuICAgICAgLy/mjInnurXlnZDmoIfku47lpKfliLDlsI/mjpLluo9cclxuICAgICAgbGV0IHRlbXAgPSBkZWFscy5zb3J0KChjMSwgYzIpID0+IGMxLmdlb21ldHJ5ICYmIGMyLmdlb21ldHJ5ID8gYzIuZ2VvbWV0cnkueSAtIGMxLmdlb21ldHJ5LnkgOiBOdW1iZXIuTUlOX1ZBTFVFKTtcclxuICAgICAgLy/mnIDlsI/nurXlnZDmoIdcclxuICAgICAgbGV0IG1pblkgPSB0ZW1wLmxlbmd0aCA+IDAgPyB0ZW1wW3RlbXAubGVuZ3RoIC0gMV0uZ2VvbWV0cnkueSA6IGNlbGwuZ2VvbWV0cnkueTtcclxuICAgICAgLy/mnIDlpKfnurXlnZDmoIdcclxuICAgICAgbGV0IG1heFkgPSB0ZW1wLmxlbmd0aCA+IDAgPyB0ZW1wWzBdLmdlb21ldHJ5LnkgOiBjZWxsLmdlb21ldHJ5Lnk7XHJcbiAgICAgIC8v5L6d5qyh5L+u5pS55paw5o+S5YWl6IqC54K555qE57q15Z2Q5qCHXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2VsbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBtYXhZID0gZGVhbHMubGVuZ3RoID4gMCA/IG1heFkgKyB0aGlzLnZzcGFjZSA6IG1heFk7XHJcbiAgICAgICAgZ3JhcGgudHJhbnNsYXRlQ2VsbChuZXdDZWxsc1tpXSwgMCwgbWF4WSAtIG5ld0NlbGxzW2ldLmdlb21ldHJ5LnkpO1xyXG4gICAgICAgIGRlYWxzLnB1c2gobmV3Q2VsbHNbaV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBtaWRZID0gKG1heFkgKyBtaW5ZKSAvIDI7XHJcbiAgICAgIGxldCBkaWZmWSA9IGNlbGwuZ2VvbWV0cnkueSAtIG1pZFk7XHJcbiAgICAgIC8v5L6d5qyh5L+u5pS55omA5pyJ54K557q15Z2Q5qCHXHJcbiAgICAgIGRlYWxzLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgZ3JhcGgudHJhbnNsYXRlQ2VsbChjLCAwLCBkaWZmWSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBtaW5ZICs9IGRpZmZZO1xyXG4gICAgICBtYXhZICs9IGRpZmZZO1xyXG5cclxuICAgICAgbWlkWSArPSBkaWZmWTtcclxuICAgICAgLy8g5bCGPD1taWRZ55qE6IqC54K55YWo6YOo5LiK56e76IezbWluWS1kaWZmWSw+PW1pZFnkuIvnp7voh7NtYXhZICsgZGlmZllcclxuICAgICAgZm9yIChsZXQga2V5IGluIGdyYXBoLm1vZGVsLmNlbGxzKSB7XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gPT0gZ3JhcGgubW9kZWwucm9vdCB8fCBncmFwaC5tb2RlbC5jZWxsc1trZXldLmdlb21ldHJ5ID09IG51bGwgfHwgZ3JhcGgubW9kZWwuY2VsbHNba2V5XS5lZGdlID09IHRydWUpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSA9PSBjZWxsIHx8IG5ld0NlbGxzLmluZGV4T2YoZ3JhcGgubW9kZWwuY2VsbHNba2V5XSBhcyBhbnkpICE9IC0xKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdyYXBoLm1vZGVsLmNlbGxzW2tleV0gPT0gdGhpcy5lbnRyeSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChncmFwaC5tb2RlbC5jZWxsc1trZXldLmdlb21ldHJ5LnggPiB0aGlzLmVudHJ5Lmdlb21ldHJ5LngpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjID0gZ3JhcGgubW9kZWwuY2VsbHNba2V5XTtcclxuICAgICAgICBsZXQgZ2VvID0gYy5nZW9tZXRyeTtcclxuXHJcbiAgICAgICAgZ3JhcGgudHJhbnNsYXRlQ2VsbChjLCAwLCBnZW8ueSA8PSBjZWxsLmdlb21ldHJ5LnkgPyBtaW5ZIC0gKGNlbGwuZ2VvbWV0cnkueSAtIGdlby55KSAtIGdlby55IDogbWF4WSArIChnZW8ueSAtIGNlbGwuZ2VvbWV0cnkueSkgLSBnZW8ueSk7XHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0Q2VsbERhdGEoY2VsbERhdGE6IENlbGxEYXRhLCBjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgY2VsbERhdGEuYmlsbEluZm8gPSBjZWxsLmJpbGxJbmZvO1xyXG4gICAgY2VsbERhdGEuYmlsbERhdGFJbmZvID0gY2VsbC5iaWxsRGF0YUluZm87XHJcbiAgICBjZWxsRGF0YS52aXNpYmxlID0gdHJ1ZTtcclxuICAgIGNlbGxEYXRhLmRpYWdyYW1JbmZvLnggPSBjZWxsLmdlb21ldHJ5Lng7XHJcbiAgICBjZWxsRGF0YS5kaWFncmFtSW5mby55ID0gY2VsbC5nZW9tZXRyeS55O1xyXG4gICAgY2VsbERhdGEuZGlhZ3JhbUluZm8ud2lkdGggPSBjZWxsLmdlb21ldHJ5LndpZHRoO1xyXG4gICAgY2VsbERhdGEuZGlhZ3JhbUluZm8uaGVpZ2h0ID0gY2VsbC5nZW9tZXRyeS5oZWlnaHQ7XHJcbiAgICBjZWxsRGF0YS5kaWFncmFtSW5mby5leHRQcm9wcyA9IHtcclxuICAgICAgc3R5bGU6IGNlbGwuc3R5bGVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB6b29tT3V0KCkge1xyXG4gICAgdGhpcy5ncmFwaC56b29tT3V0KCk7XHJcbiAgfVxyXG5cclxuICB6b29tSW4oKSB7XHJcbiAgICB0aGlzLmdyYXBoLnpvb21JbigpO1xyXG4gIH1cclxuXHJcbiAgem9vbUFjdHVhbCgpIHtcclxuICAgIHRoaXMuZ3JhcGguem9vbUFjdHVhbCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Wm9vbVNjYWxlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLmdyYXBoLnZpZXcuc2NhbGUgKiAxMDApO1xyXG4gIH1cclxuXHJcbiAgcHJpbnQoKSB7XHJcbiAgICBjb25zdCBwcmV2aWV3ID0gbmV3IG14UHJpbnRQcmV2aWV3KHRoaXMuZ3JhcGgsIDEpO1xyXG4gICAgcHJldmlldy5wcmludE92ZXJsYXlzID0gdHJ1ZTtcclxuICAgIHByZXZpZXcucHJpbnRDb250cm9scyA9IHRydWU7XHJcbiAgICBwcmV2aWV3LnByaW50QmFja2dyb3VuZEltYWdlID0gdHJ1ZTtcclxuXHJcbiAgICBwcmV2aWV3Lm9wZW4oYmlsbFRyYWNrZXJDZWxsQ3NzKTtcclxuICB9XHJcblxyXG4gIGV4cGFuZChkaXJlY3Rpb246IEJpbGxUcmFja2VyRGlyZWN0aW9uLCBhbGw6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgaWYgKGFsbCkge1xyXG4gICAgICB0aGlzLmV4cGFuZEFsbChkaXJlY3Rpb24pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZGlyZWN0aW9uID09IEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwKSB7XHJcbiAgICAgIGNvbnN0IGNlbGxzOiBNeEdyYXBoTlMubXhDZWxsW10gPSBbdGhpcy5lbnRyeV07XHJcbiAgICAgIHRoaXMudXBQYXJlbnQuY2hpbGRyZW4gJiYgY2VsbHMucHVzaCguLi50aGlzLnVwUGFyZW50LmNoaWxkcmVuKTtcclxuICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICBpZiAoY2VsbC51cENlbGxPdmVybGF5ICYmIGNlbGwudXBDZWxsT3ZlcmxheS5zdGF0ZSA9PSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaCkge1xyXG4gICAgICAgICAgY2VsbC51cENlbGxPdmVybGF5LmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChteEV2ZW50LkNMSUNLKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IEJpbGxUcmFja2VyRGlyZWN0aW9uLkRvd24pIHtcclxuICAgICAgY29uc3QgY2VsbHM6IE14R3JhcGhOUy5teENlbGxbXSA9IFt0aGlzLmVudHJ5XTtcclxuICAgICAgdGhpcy5kb3duUGFyZW50LmNoaWxkcmVuICYmIGNlbGxzLnB1c2goLi4udGhpcy5kb3duUGFyZW50LmNoaWxkcmVuKTtcclxuICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICBpZiAoY2VsbC5kb3duQ2VsbE92ZXJsYXkgJiYgY2VsbC5kb3duQ2VsbE92ZXJsYXkuc3RhdGUgPT0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2gpIHtcclxuICAgICAgICAgIGNlbGwuZG93bkNlbGxPdmVybGF5LmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChteEV2ZW50LkNMSUNLKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4cGFuZEFsbChkaXJlY3Rpb246IEJpbGxUcmFja2VyRGlyZWN0aW9uKSB7XHJcbiAgICBpZiAoZGlyZWN0aW9uICE9IEJpbGxUcmFja2VyRGlyZWN0aW9uLlVwICYmIGRpcmVjdGlvbiAhPSBCaWxsVHJhY2tlckRpcmVjdGlvbi5Eb3duKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyDljZXmja7oioLngrnmt7vliqDlubbnp7vkvY3lkI7kuovku7bnm5HlkKzlmahcclxuICAgIGxldCBhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQgPSBudWxsO1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBCaWxsVHJhY2tlckRpcmVjdGlvbi5VcCkge1xyXG4gICAgICBhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2VsbHM6IE14R3JhcGhOUy5teENlbGxbXSA9IFt0aGlzLmVudHJ5XTtcclxuICAgICAgICB0aGlzLnVwUGFyZW50LmNoaWxkcmVuICYmIGNlbGxzLnB1c2goLi4udGhpcy51cFBhcmVudC5jaGlsZHJlbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhblRyYWNrVXBDZWxscyA9IGNlbGxzLmZpbHRlcigoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgIHJldHVybiBjZWxsLnVwQ2VsbE92ZXJsYXkgJiYgY2VsbC51cENlbGxPdmVybGF5LnN0YXRlID09IENlbGxPdmVybGF5U3RhdGUuU2VhcmNoO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDmsqHmnInlj6/kuIrmn6XoioLngrnkuJTmsqHmnInmraPlnKjmiafooYznmoTkuIrmn6Xor7fmsYLml7bliKDpmaTnm5HlkKzlmahcclxuICAgICAgICBpZiAoY2FuVHJhY2tVcENlbGxzID09IG51bGwgfHwgY2FuVHJhY2tVcENlbGxzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5udW1DZWxsc0FkZGluZ1JlcSA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuenu+mZpOebkeWQrOWZqFwiKTtcclxuICAgICAgICAgICAgbCAmJiBsLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlTGlzdGVuZXIoYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKFwiRXhwYW5kQWxsXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjYW5UcmFja1VwQ2VsbHMuZm9yRWFjaCgoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNlbGwudXBDZWxsT3ZlcmxheSAmJiBjZWxsLnVwQ2VsbE92ZXJsYXkuc3RhdGUgPT0gQ2VsbE92ZXJsYXlTdGF0ZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgICBjZWxsLnVwQ2VsbE92ZXJsYXkuZmlyZUV2ZW50KG5ldyBteEV2ZW50T2JqZWN0KG14RXZlbnQuQ0xJQ0ssIFwic2hvd0xvYWRpbmdcIiwgZmFsc2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gQmlsbFRyYWNrZXJEaXJlY3Rpb24uRG93bikge1xyXG4gICAgICBhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2VsbHM6IE14R3JhcGhOUy5teENlbGxbXSA9IFt0aGlzLmVudHJ5XTtcclxuICAgICAgICB0aGlzLmRvd25QYXJlbnQuY2hpbGRyZW4gJiYgY2VsbHMucHVzaCguLi50aGlzLmRvd25QYXJlbnQuY2hpbGRyZW4pO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5UcmFja0Rvd25DZWxscyA9IGNlbGxzLmZpbHRlcigoY2VsbDogQmlsbENlbGwpID0+IHtcclxuICAgICAgICAgIHJldHVybiBjZWxsLmRvd25DZWxsT3ZlcmxheSAmJiBjZWxsLmRvd25DZWxsT3ZlcmxheS5zdGF0ZSA9PSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g5rKh5pyJ5Y+v5LiL5p+l6IqC54K55LiU5rKh5pyJ5q2j5Zyo5omn6KGM55qE5LiL5p+l6K+35rGC5pe25Yig6Zmk55uR5ZCs5ZmoXHJcbiAgICAgICAgaWYgKGNhblRyYWNrRG93bkNlbGxzID09IG51bGwgfHwgY2FuVHJhY2tEb3duQ2VsbHMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIGlmICh0aGlzLm51bUNlbGxzQWRkaW5nUmVxID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwi56e76Zmk55uR5ZCs5ZmoXCIpO1xyXG4gICAgICAgICAgICBsICYmIGwuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5ncmFwaC5yZW1vdmVMaXN0ZW5lcihhZnRlckJpbGxDZWxsc0FkZGVkQW5kTW92ZWQpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLnRpbWVFbmQoXCJFeHBhbmRBbGxcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNhblRyYWNrRG93bkNlbGxzLmZvckVhY2goKGNlbGw6IEJpbGxDZWxsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsLmRvd25DZWxsT3ZlcmxheSAmJiBjZWxsLmRvd25DZWxsT3ZlcmxheS5zdGF0ZSA9PSBDZWxsT3ZlcmxheVN0YXRlLlNlYXJjaCkge1xyXG4gICAgICAgICAgICAgIGNlbGwuZG93bkNlbGxPdmVybGF5LmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChteEV2ZW50LkNMSUNLLCBcInNob3dMb2FkaW5nXCIsIGZhbHNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zb2xlLnRpbWUoXCJFeHBhbmRBbGxcIik7XHJcbiAgICAvLyDmt7vliqDnm5HlkKzlmahcclxuICAgIC8vIGNvbnNvbGUubG9nKFwi5re75Yqg55uR5ZCs5ZmoXCIpO1xyXG4gICAgdGhpcy5ncmFwaC5hZGRMaXN0ZW5lcihcImJpbGxDZWxsc0FkZGVkQW5kTW92ZWRcIiwgYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkKTtcclxuXHJcbiAgICAvLyDnm7TmjqXop6blj5HkuIDmrKHlsZXlvIDkuovku7ZcclxuICAgIGNvbnN0IGwgPSB0aGlzLmxvYWRpbmcuc2hvdyh7IG1lc3NhZ2U6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJsb2FkaW5nXCIpIH0pO1xyXG4gICAgYWZ0ZXJCaWxsQ2VsbHNBZGRlZEFuZE1vdmVkKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu6fnu63ov73ouKpcclxuICAgKiBAcGFyYW0gY2VsbFxyXG4gICAqL1xyXG4gIGdvT25UcmFjayhjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgY29uc3QgYmlsbFRyYWNrZXJVaVNlcnZpY2UgPSB0aGlzLmluai5nZXQoQmlsbFRyYWNrZXJVaVNlcnZpY2UpO1xyXG4gICAgLy8g5p6E6YCg5p+l6K+i5Y+C5pWwXHJcbiAgICBsZXQgYXJncyA9IG5ldyBHZXRCaWxsc0luZm9BcmdzKCk7XHJcbiAgICBhcmdzLmJpbGxEYXRhSWQgPSBjZWxsLmJpbGxEYXRhSW5mby5kYXRhSWQ7XHJcbiAgICBhcmdzLmN1clllYXIgPSBjZWxsLmJpbGxEYXRhSW5mby5jdXJZZWFyO1xyXG4gICAgYXJncy5iaXpLaW5kID0gY2VsbC5iaWxsSW5mby5iaXpLaW5kO1xyXG4gICAgYXJncy5iaXpUeXBlID0gY2VsbC5iaWxsSW5mby5iaXpUeXBlO1xyXG4gICAgYXJncy5kb2N1bWVudFR5cGVJZCA9IGNlbGwuYmlsbEluZm8uZG9jdW1lbnRUeXBlSWQ7XHJcbiAgICAvLyBhcmdzLmJpbGxDaGlsZEluZm9zID0gY2VsbC5iaWxsRGF0YUluZm8uYmlsbENoaWxkSW5mb3M7XHJcblxyXG4gICAgLy8gLy8g5aaC5p6c5Y+I5Zue5Yiw5LqG5pyA5Y6f5aeL55qE5b2T5YmN6IqC54K5XHJcbiAgICAvLyBpZiAoY2VsbC5iaWxsRGF0YUluZm8uZGF0YUlkID09IHRoaXMub3JpZ2luQmlsbFRyYWNrZXJBcmdzLmdldEJpbGxzSW5mb0FyZ3MuYmlsbERhdGFJZCkge1xyXG4gICAgLy8gICBhcmdzID0gdGhpcy5vcmlnaW5CaWxsVHJhY2tlckFyZ3MuZ2V0QmlsbHNJbmZvQXJncztcclxuICAgIC8vIH1cclxuXHJcbiAgICBjb25zdCBtb2RhbE9wdGlvbnM6IE1vZGFsT3B0aW9ucyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJiaWxsVHJhY2tlclwiKSxcclxuICAgIH07XHJcbiAgICBjb25zdCBncmFwaE9wdGlvbnM6IEJpbGxUcmFja2VyR3JhcGhPcHRpb25zID0ge1xyXG4gICAgICAvLyAvLyDkuIrmn6Xnu5PmnpzoioLngrnmsqHmnInkuIvmn6XmjInpkq7vvIznu6fnu63ov73ouKrml7bpu5jorqTkuIvmn6VcclxuICAgICAgLy8gc2hvd0Rvd25CaWxsczogY2VsbC5kb3duQ2VsbE92ZXJsYXkgPT0gbnVsbCxcclxuICAgICAgLy8gLy8g5LiL5p+l57uT5p6c6IqC54K55rKh5pyJ5LiK5p+l5oyJ6ZKu77yM57un57ut6L+96Liq5pe26buY6K6k5LiK5p+lXHJcbiAgICAgIC8vIHNob3dVcEJpbGxzOiBjZWxsLnVwQ2VsbE92ZXJsYXkgPT0gbnVsbCxcclxuICAgICAgc2hvd0Rvd25CaWxsczogdHJ1ZSxcclxuICAgICAgc2hvd1VwQmlsbHM6IHRydWUsXHJcbiAgICB9O1xyXG4gICAgY29uc3QgZ3JpZE9wdGlvbnM6IEJpbGxUcmFja2VyR3JpZE9wdGlvbnMgPSB7XHJcbiAgICAgIC8vIC8vIOatpOmAiemhueS7heaOp+WItummluasoeaJk+W8gOaXtuihjOS4ulxyXG4gICAgICAvLyBzaG93RW50cnlEYXRhOiBmYWxzZSxcclxuICAgICAgLy8gLy8g5pWw5o2u5Yy66auY5bqmMXB455u45b2T5LqO5LiN5pi+56S6XHJcbiAgICAgIC8vIGRlZmF1bHRIZWlnaHQ6IDEsXHJcbiAgICB9O1xyXG4gICAgYmlsbFRyYWNrZXJVaVNlcnZpY2Uub3BlbkRlZmF1bHRCaWxsVHJhY2tlckFwcChhcmdzLCBncmFwaE9wdGlvbnMsIGdyaWRPcHRpb25zKTtcclxuICAgIC8vIGJpbGxUcmFja2VyVWlTZXJ2aWNlLm9wZW5EZWZhdWx0QmlsbFRyYWNrZXJEaWFsb2coYXJncywgZmFsc2UsIG1vZGFsT3B0aW9ucywgZ3JhcGhPcHRpb25zLCBncmlkT3B0aW9ucykuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7kuLrlvZPliY1cclxuICAgKiBAcGFyYW0gY2VsbFxyXG4gICAqL1xyXG4gIHNldEFzQ3VycmVudChjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgbGV0IGFyZ3M6IEdldEJpbGxzSW5mb0FyZ3MgPSB0aGlzLmRhdGFTZXJ2aWNlLmJ1aWxkR2V0QmlsbHNJbmZvQXJncyhjZWxsKTtcclxuICAgIC8vIC8vIOWmguaenOWPiOWbnuWIsOS6huacgOWOn+Wni+eahOW9k+WJjeiKgueCuVxyXG4gICAgLy8gaWYgKGNlbGwuYmlsbERhdGFJbmZvLmRhdGFJZCA9PSB0aGlzLm9yaWdpbkJpbGxUcmFja2VyQXJncy5nZXRCaWxsc0luZm9BcmdzLmJpbGxEYXRhSWQpIHtcclxuICAgIC8vICAgYXJncyA9IHRoaXMub3JpZ2luQmlsbFRyYWNrZXJBcmdzLmdldEJpbGxzSW5mb0FyZ3M7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgY29uc3QgZG93bkFyZ3MgPSBuZXcgR2V0RG93bkJpbGxzSW5mb0FyZ3MoKTtcclxuICAgIGRvd25BcmdzLmRvY3VtZW50VHlwZUlkID0gYXJncy5kb2N1bWVudFR5cGVJZDtcclxuICAgIGRvd25BcmdzLmJpbGxEYXRhSWQgPSBhcmdzLmJpbGxEYXRhSWQ7XHJcbiAgICBkb3duQXJncy5iaXpLaW5kID0gYXJncy5iaXpLaW5kO1xyXG4gICAgZG93bkFyZ3MuYml6VHlwZSA9IGFyZ3MuYml6VHlwZTtcclxuICAgIC8vIGRvd25BcmdzLmJpbGxDaGlsZEluZm9zID0gYXJncy5iaWxsQ2hpbGRJbmZvcztcclxuICAgIGRvd25BcmdzLmN1clllYXIgPSBhcmdzLmN1clllYXI7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nLnNob3coeyBtZXNzYWdlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwibG9hZGluZ1wiKSB9KTtcclxuICAgIHRoaXMuZGF0YVNlcnZpY2UuY2FuVHJhY2tpbmcoZG93bkFyZ3MpLnN1YnNjcmliZShcclxuICAgICAgKHJlczogQ2FuVHJhY2tpbmdSZXN1bHQpID0+IHtcclxuICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICBpZiAoIXJlcy5jYW5Eb3duVHJhY2tpbmcgJiYgIXJlcy5jYW5VcFRyYWNraW5nKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VyLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIm5vQXNzb0JpbGxcIikpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmlsbFRyYWNrZXJBcmdzOiBCaWxsVHJhY2tlckFyZ3MgPSBuZXcgQmlsbFRyYWNrZXJBcmdzKCk7XHJcbiAgICAgICAgYmlsbFRyYWNrZXJBcmdzLmNhblRyYWNraW5nUmVzdWx0ID0gcmVzO1xyXG4gICAgICAgIGJpbGxUcmFja2VyQXJncy5nZXRCaWxsc0luZm9BcmdzID0gYXJncztcclxuICAgICAgICBiaWxsVHJhY2tlckFyZ3MuZ3JhcGhPcHRpb25zID0gdGhpcy5iaWxsVHJhY2tlckFyZ3MuZ3JhcGhPcHRpb25zO1xyXG4gICAgICAgIGJpbGxUcmFja2VyQXJncy5ncmlkT3B0aW9ucyA9IHRoaXMuYmlsbFRyYWNrZXJBcmdzLmdyaWRPcHRpb25zO1xyXG5cclxuICAgICAgICB0aGlzLmJpbGxUcmFja2VyQXJncyA9IGJpbGxUcmFja2VyQXJncztcclxuICAgICAgICB0aGlzLnJlcGFpbnRHcmFwaCh0aGlzLmdyYXBoKTtcclxuICAgICAgfSxcclxuICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgICAgIC8vdG9kbyDnoa7lrprlvILluLjnu5PmnoQsIOebruWJjemHh+eUqOWFvOWuueWPluWAvOaWueW8j1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXIuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl19