/**
 * @fileoverview added by tsickle
 * Generated from: lib/bill-tracker/services/bill-tracker-data.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { of } from 'rxjs';
import { switchMap, catchError } from 'rxjs/operators';
import { HttpClient } from '@angular/common/http';
import { BpmnModelJsonHelper } from '@edp-aif/common-api';
import { GetDownBillsInfoArgs } from '../../entity/tracking/GetDownBillsInfoArgs';
import { GetUpBillsInfoArgs } from '../../entity/tracking/GetUpBillsInfoArgs';
import { GetMainEntityDataArgs } from '../args/GetMainEntityDataArgs';
import { CanTrackingResult } from '../args/CanTrackingResult';
import { DownBillInfoResult } from '../args/DownBillInfoResult';
import { UpBillInfoResult } from '../args/UpBillInfoResult';
import { EntityDataResult } from '../args/EntityDataResult';
import { BillDataInfo } from '../../entity/tracking/BillDataInfo';
import { GetBillsInfoArgs } from '../../entity/tracking/GetBillsInfoArgs';
import { JointQueryParameterType } from '@edp-bif/common-api';
import { GetJointQueryParametersArgs } from '../args';
import { JointQueryParameterResult } from '../../entity/tracking/JointQueryParameterResult';
import { JointQueryParametersContent } from '../../entity/tracking/JointQueryParametersContent';
import { ExpressionJointQueryParameterContent } from '../../entity/tracking/ExpressionJointQueryParameterContent';
import { FieldJointQueryParameterContent } from "../../entity/tracking/FieldJointQueryParameterContent";
import { JointQueryParameterMode } from '../../entity/tracking/JointQueryParameterMode';
export class BillTrackerDataService {
    /**
     * @param {?} httpService
     * @param {?} httpClient
     */
    constructor(httpService, httpClient) {
        this.httpService = httpService;
        this.httpClient = httpClient;
        this.baseUrl = "/api/runtime/aif/v1.0/billtracking";
        this.canTrackingUrl = this.baseUrl + "/cantracking";
        this.canTrackingMethod = "POST";
        this.getDownBillsInfoUrl = this.baseUrl + "/getdownbillsinfo";
        this.getDownBillsInfoMethod = "POST";
        this.getUpBillsInfoUrl = this.baseUrl + "/getupbillsinfo";
        this.getUpBillsInfoMethod = "POST";
        this.getEntityDataUrl = this.baseUrl + "/getentitydata";
        this.getEntityDataMethod = "POST";
        this.jointQueryParserUrl = "/api/runtime/aif/v1.0/jointquery";
        this.jointQueryParserMethod = "POST";
    }
    /**
     * @param {?} args
     * @return {?}
     */
    getJointQueryParameters(args) {
        /** @type {?} */
        const body = args.ConvertToJson();
        /** @type {?} */
        const opt = this.httpService.setHeader({ body: body });
        return this.httpService.request(this.jointQueryParserMethod, this.jointQueryParserUrl, opt).pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            let obj = res;
            /** @type {?} */
            const results = (/** @type {?} */ (BpmnModelJsonHelper.FromJson(obj.value, JointQueryParameterResult)));
            return of(results);
        })), catchError((/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            try {
                if (typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
            }
            catch (e) {
            }
            throw err;
        })));
    }
    /**
     * @param {?} args
     * @return {?}
     */
    canTracking(args) {
        /** @type {?} */
        const opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
        return this.httpService.request(this.canTrackingMethod, this.canTrackingUrl, opt).pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            let result = new CanTrackingResult();
            result.LoadFromJson(res);
            return of(result);
        })), catchError((/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            try {
                if (typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
            }
            catch (e) {
            }
            throw err;
        })));
    }
    /**
     * @param {?} args
     * @return {?}
     */
    getDownBillsInfo(args) {
        /** @type {?} */
        const opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
        return this.httpService.request(this.getDownBillsInfoMethod, this.getDownBillsInfoUrl, opt).pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            let result = BpmnModelJsonHelper.FromJson(res, DownBillInfoResult);
            return of(result);
        })), catchError((/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            try {
                if (typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
            }
            catch (e) {
            }
            throw err;
        })));
    }
    /**
     * @param {?} args
     * @return {?}
     */
    getUpBillsInfo(args) {
        /** @type {?} */
        const opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
        return this.httpService.request(this.getUpBillsInfoMethod, this.getUpBillsInfoUrl, opt).pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            let result = BpmnModelJsonHelper.FromJson(res, UpBillInfoResult);
            return of(result);
        })), catchError((/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            try {
                if (typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
            }
            catch (e) {
            }
            throw err;
        })));
    }
    /**
     * @param {?} args
     * @return {?}
     */
    getEntityData(args) {
        /** @type {?} */
        const opt = this.httpService.setHeader({ body: args.ConvertToJson(), responseType: "text" });
        return this.httpService.request(this.getEntityDataMethod, this.getEntityDataUrl, opt).pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            const result = new EntityDataResult();
            result.LoadFromJson(res);
            return of(result);
        })), catchError((/**
         * @param {?} err
         * @return {?}
         */
        (err) => {
            try {
                if (typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
            }
            catch (e) {
            }
            throw err;
        })));
    }
    /**
     * @param {?} canTrackingResult
     * @return {?}
     */
    buildEntryBillInfo(canTrackingResult) {
        /** @type {?} */
        const info = new DownBillInfoResult();
        info.schemaId = canTrackingResult.schemaId;
        info.suCode = canTrackingResult.suCode;
        info.voName = canTrackingResult.voName;
        info.billTrackingSettings = canTrackingResult.billTrackingSettings;
        info.bizKind = canTrackingResult.bizKind;
        info.bizType = canTrackingResult.bizType;
        info.jointQueryMode = canTrackingResult.jointQueryMode;
        info.jointQueryParameters = canTrackingResult.jointQueryParameters;
        info.trackingSourceType = canTrackingResult.trackingSourceType;
        /** @type {?} */
        const dataInfo = new BillDataInfo();
        dataInfo.caption = canTrackingResult.caption;
        dataInfo.dataId = canTrackingResult.dataId;
        dataInfo.summary = canTrackingResult.summary;
        dataInfo.trackingMappingAssociations = [];
        dataInfo.billChildInfos = canTrackingResult.billChildInfos;
        dataInfo.curYear = canTrackingResult.curYear;
        info.billDataInfos = [dataInfo];
        info.documentTypeId = canTrackingResult.documentTypeId;
        return info;
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    buildGetBillsInfoArgs(cell) {
        /** @type {?} */
        const args = new GetBillsInfoArgs();
        args.billDataId = cell.billDataInfo.dataId;
        args.documentTypeId = cell.billInfo.documentTypeId;
        args.bizKind = cell.billInfo.bizKind;
        args.bizType = cell.billInfo.bizType;
        args.billChildInfos = cell.billDataInfo.billChildInfos;
        args.curYear = cell.billDataInfo.curYear;
        return args;
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    buildGetUpBillsInfoArgs(cell) {
        /** @type {?} */
        const args = new GetUpBillsInfoArgs();
        args.LoadFromJsonObject(this.buildGetBillsInfoArgs(cell).ConvertToJsonObject());
        return args;
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    buildGetDownBillsInfoArgs(cell) {
        /** @type {?} */
        const args = new GetDownBillsInfoArgs();
        args.LoadFromJsonObject(this.buildGetBillsInfoArgs(cell).ConvertToJsonObject());
        return args;
    }
    /**
     * @param {?} billInfo
     * @param {?} billDataInfo
     * @return {?}
     */
    buildGetMainEntityDataArgs(billInfo, billDataInfo) {
        /** @type {?} */
        const args = new GetMainEntityDataArgs();
        args.dataId = billDataInfo.dataId;
        args.suCode = billInfo.suCode;
        args.schemaId = billInfo.schemaId;
        args.trackingSourceType = billInfo.trackingSourceType;
        args.billChildInfos = billDataInfo.billChildInfos;
        args.curYear = billDataInfo.curYear;
        args.documentTypeId = billInfo.documentTypeId;
        return args;
    }
    /**
     * @param {?} jointQueryParameters
     * @return {?}
     */
    hasDynamicParams(jointQueryParameters) {
        if (!jointQueryParameters.params) {
            return false;
        }
        // 添加自定义参数
        if (Array.isArray(jointQueryParameters.params)) {
            return jointQueryParameters.params.find((/**
             * @param {?} p
             * @return {?}
             */
            (p) => p.type != JointQueryParameterType.Constant)) != null;
        }
        else {
            return false;
        }
    }
    /**
     * 构造联查参数解析器参数
     * @param {?} jointQueryParameters
     * @param {?} billInfo
     * @param {?} billDataInfo
     * @return {?}
     */
    buildGetJointQueryParametersArgs(jointQueryParameters, billInfo, billDataInfo) {
        /** @type {?} */
        const args = new GetJointQueryParametersArgs();
        args.dataId = billDataInfo.dataId;
        args.suCode = billInfo.suCode;
        args.schemaId = billInfo.schemaId;
        args.trackingSourceType = billInfo.trackingSourceType;
        args.curYear = billDataInfo.curYear;
        args.contents = [];
        if (Array.isArray(jointQueryParameters.params)) {
            jointQueryParameters.params.forEach((/**
             * @param {?} it
             * @return {?}
             */
            it => {
                if (it.type == JointQueryParameterType.Constant) {
                    return;
                }
                /** @type {?} */
                const jointQueryParametersContent = new JointQueryParametersContent();
                if (it.type == JointQueryParameterType.Field) {
                    jointQueryParametersContent.jointQueryParameterMode = JointQueryParameterMode.FIELD;
                    /** @type {?} */
                    const content = new FieldJointQueryParameterContent();
                    content.parameterCode = it.code;
                    content.fieldContent = it.value;
                    jointQueryParametersContent.content = content.ConvertToJson();
                }
                else if (it.type == JointQueryParameterType.Expression) {
                    jointQueryParametersContent.jointQueryParameterMode = JointQueryParameterMode.EXPRESSION;
                    /** @type {?} */
                    const content = new ExpressionJointQueryParameterContent();
                    content.parameterCode = it.code;
                    content.expressionContent = it.value;
                    jointQueryParametersContent.content = content.ConvertToJson();
                }
                args.contents.push(jointQueryParametersContent);
            }));
        }
        return args;
    }
}
BillTrackerDataService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
BillTrackerDataService.ctorParameters = () => [
    { type: HttpService },
    { type: HttpClient }
];
if (false) {
    /** @type {?} */
    BillTrackerDataService.prototype.baseUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.canTrackingUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.canTrackingMethod;
    /** @type {?} */
    BillTrackerDataService.prototype.getDownBillsInfoUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.getDownBillsInfoMethod;
    /** @type {?} */
    BillTrackerDataService.prototype.getUpBillsInfoUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.getUpBillsInfoMethod;
    /** @type {?} */
    BillTrackerDataService.prototype.getEntityDataUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.getEntityDataMethod;
    /** @type {?} */
    BillTrackerDataService.prototype.jointQueryParserUrl;
    /** @type {?} */
    BillTrackerDataService.prototype.jointQueryParserMethod;
    /** @type {?} */
    BillTrackerDataService.prototype.httpService;
    /** @type {?} */
    BillTrackerDataService.prototype.httpClient;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbC10cmFja2VyLWRhdGEuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYmlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGwtdHJhY2tlci9zZXJ2aWNlcy9iaWxsLXRyYWNrZXItZGF0YS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEQsT0FBTyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0QyxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUM5RSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUU1RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFFbEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFMUUsT0FBTyxFQUE2Qyx1QkFBdUIsRUFBRSxNQUFNLHFCQUFxQixD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OztJQUdyQyw2Q0FBK0I7O0lBQy9CLDRDQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgc3dpdGNoTWFwLCBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBCcG1uTW9kZWxKc29uSGVscGVyIH0gZnJvbSAnQGVkcC1haWYvY29tbW9uLWFwaSc7XHJcbmltcG9ydCB7IEdldERvd25CaWxsc0luZm9BcmdzIH0gZnJvbSAnLi4vLi4vZW50aXR5L3RyYWNraW5nL0dldERvd25CaWxsc0luZm9BcmdzJztcclxuaW1wb3J0IHsgR2V0VXBCaWxsc0luZm9BcmdzIH0gZnJvbSAnLi4vLi4vZW50aXR5L3RyYWNraW5nL0dldFVwQmlsbHNJbmZvQXJncyc7XHJcbmltcG9ydCB7IEdldE1haW5FbnRpdHlEYXRhQXJncyB9IGZyb20gJy4uL2FyZ3MvR2V0TWFpbkVudGl0eURhdGFBcmdzJztcclxuaW1wb3J0IHsgQ2FuVHJhY2tpbmdSZXN1bHQgfSBmcm9tICcuLi9hcmdzL0NhblRyYWNraW5nUmVzdWx0JztcclxuaW1wb3J0IHsgRG93bkJpbGxJbmZvUmVzdWx0IH0gZnJvbSAnLi4vYXJncy9Eb3duQmlsbEluZm9SZXN1bHQnO1xyXG5pbXBvcnQgeyBVcEJpbGxJbmZvUmVzdWx0IH0gZnJvbSAnLi4vYXJncy9VcEJpbGxJbmZvUmVzdWx0JztcclxuaW1wb3J0IHsgRW50aXR5RGF0YVJlc3VsdCB9IGZyb20gJy4uL2FyZ3MvRW50aXR5RGF0YVJlc3VsdCc7XHJcbmltcG9ydCB7IElCaWxsVHJhY2tlckRhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vYmFzZS9JQmlsbFRyYWNrZXJEYXRhU2VydmljZSc7XHJcbmltcG9ydCB7IEJpbGxEYXRhSW5mbyB9IGZyb20gJy4uLy4uL2VudGl0eS90cmFja2luZy9CaWxsRGF0YUluZm8nO1xyXG5pbXBvcnQgeyBCaWxsQ2VsbCB9IGZyb20gJy4uL214Z3JhcGgtZXh0L0JpbGxDZWxsJztcclxuaW1wb3J0IHsgR2V0QmlsbHNJbmZvQXJncyB9IGZyb20gJy4uLy4uL2VudGl0eS90cmFja2luZy9HZXRCaWxsc0luZm9BcmdzJztcclxuaW1wb3J0IHsgQmlsbEluZm8gfSBmcm9tICcuLi8uLi9lbnRpdHkvdHJhY2tpbmcvQmlsbEluZm8nO1xyXG5pbXBvcnQgeyBKb2ludFF1ZXJ5UGFyYW1ldGVyLCBKb2ludFF1ZXJ5UGFyYW1ldGVycywgSm9pbnRRdWVyeVBhcmFtZXRlclR5cGUgfSBmcm9tICdAZWRwLWJpZi9jb21tb24tYXBpJztcclxuaW1wb3J0IHsgR2V0Sm9pbnRRdWVyeVBhcmFtZXRlcnNBcmdzIH0gZnJvbSAnLi4vYXJncyc7XHJcbmltcG9ydCB7IEpvaW50UXVlcnlQYXJhbWV0ZXJSZXN1bHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvdHJhY2tpbmcvSm9pbnRRdWVyeVBhcmFtZXRlclJlc3VsdCc7XHJcbmltcG9ydCB7IEpvaW50UXVlcnlQYXJhbWV0ZXJzQ29udGVudCB9IGZyb20gJy4uLy4uL2VudGl0eS90cmFja2luZy9Kb2ludFF1ZXJ5UGFyYW1ldGVyc0NvbnRlbnQnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uSm9pbnRRdWVyeVBhcmFtZXRlckNvbnRlbnQgfSBmcm9tICcuLi8uLi9lbnRpdHkvdHJhY2tpbmcvRXhwcmVzc2lvbkpvaW50UXVlcnlQYXJhbWV0ZXJDb250ZW50JztcclxuaW1wb3J0IHsgRmllbGRKb2ludFF1ZXJ5UGFyYW1ldGVyQ29udGVudCB9IGZyb20gXCIuLi8uLi9lbnRpdHkvdHJhY2tpbmcvRmllbGRKb2ludFF1ZXJ5UGFyYW1ldGVyQ29udGVudFwiO1xyXG5pbXBvcnQgeyBKb2ludFF1ZXJ5UGFyYW1ldGVyTW9kZSB9IGZyb20gJy4uLy4uL2VudGl0eS90cmFja2luZy9Kb2ludFF1ZXJ5UGFyYW1ldGVyTW9kZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBCaWxsVHJhY2tlckRhdGFTZXJ2aWNlIGltcGxlbWVudHMgSUJpbGxUcmFja2VyRGF0YVNlcnZpY2Uge1xyXG4gICAgcmVhZG9ubHkgYmFzZVVybCA9IFwiL2FwaS9ydW50aW1lL2FpZi92MS4wL2JpbGx0cmFja2luZ1wiO1xyXG5cclxuICAgIHJlYWRvbmx5IGNhblRyYWNraW5nVXJsID0gdGhpcy5iYXNlVXJsICsgXCIvY2FudHJhY2tpbmdcIjtcclxuICAgIHJlYWRvbmx5IGNhblRyYWNraW5nTWV0aG9kID0gXCJQT1NUXCI7XHJcblxyXG4gICAgcmVhZG9ubHkgZ2V0RG93bkJpbGxzSW5mb1VybCA9IHRoaXMuYmFzZVVybCArIFwiL2dldGRvd25iaWxsc2luZm9cIjtcclxuICAgIHJlYWRvbmx5IGdldERvd25CaWxsc0luZm9NZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICByZWFkb25seSBnZXRVcEJpbGxzSW5mb1VybCA9IHRoaXMuYmFzZVVybCArIFwiL2dldHVwYmlsbHNpbmZvXCI7XHJcbiAgICByZWFkb25seSBnZXRVcEJpbGxzSW5mb01ldGhvZCA9IFwiUE9TVFwiO1xyXG5cclxuICAgIHJlYWRvbmx5IGdldEVudGl0eURhdGFVcmwgPSB0aGlzLmJhc2VVcmwgKyBcIi9nZXRlbnRpdHlkYXRhXCI7XHJcbiAgICByZWFkb25seSBnZXRFbnRpdHlEYXRhTWV0aG9kID0gXCJQT1NUXCI7XHJcblxyXG4gICAgcmVhZG9ubHkgam9pbnRRdWVyeVBhcnNlclVybCA9IFwiL2FwaS9ydW50aW1lL2FpZi92MS4wL2pvaW50cXVlcnlcIjtcclxuICAgIHJlYWRvbmx5IGpvaW50UXVlcnlQYXJzZXJNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgaHR0cFNlcnZpY2U6IEh0dHBTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LFxyXG4gICAgKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRKb2ludFF1ZXJ5UGFyYW1ldGVycyhhcmdzOiBHZXRKb2ludFF1ZXJ5UGFyYW1ldGVyc0FyZ3MpOiBPYnNlcnZhYmxlPEpvaW50UXVlcnlQYXJhbWV0ZXJSZXN1bHRbXT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBhcmdzLkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICBjb25zdCBvcHQgPSB0aGlzLmh0dHBTZXJ2aWNlLnNldEhlYWRlcih7IGJvZHk6IGJvZHkgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucmVxdWVzdCh0aGlzLmpvaW50UXVlcnlQYXJzZXJNZXRob2QsIHRoaXMuam9pbnRRdWVyeVBhcnNlclVybCwgb3B0KS5waXBlKFxyXG4gICAgICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb2JqOiB7IHZhbHVlOiBzdHJpbmcgfSA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gQnBtbk1vZGVsSnNvbkhlbHBlci5Gcm9tSnNvbihvYmoudmFsdWUsIEpvaW50UXVlcnlQYXJhbWV0ZXJSZXN1bHQpIGFzIEpvaW50UXVlcnlQYXJhbWV0ZXJSZXN1bHRbXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YocmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVyci5lcnJvciA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIuZXJyb3IgPSBKU09OLnBhcnNlKGVyci5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjYW5UcmFja2luZyhhcmdzOiBHZXREb3duQmlsbHNJbmZvQXJncyk6IE9ic2VydmFibGU8Q2FuVHJhY2tpbmdSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCBvcHQgPSB0aGlzLmh0dHBTZXJ2aWNlLnNldEhlYWRlcih7IGJvZHk6IGFyZ3MuQ29udmVydFRvSnNvbigpLCByZXNwb25zZVR5cGU6IFwidGV4dFwiIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTZXJ2aWNlLnJlcXVlc3QodGhpcy5jYW5UcmFja2luZ01ldGhvZCwgdGhpcy5jYW5UcmFja2luZ1VybCwgb3B0KS5waXBlKFxyXG4gICAgICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0OiBDYW5UcmFja2luZ1Jlc3VsdCA9IG5ldyBDYW5UcmFja2luZ1Jlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5Mb2FkRnJvbUpzb24ocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgY2F0Y2hFcnJvcihcclxuICAgICAgICAgICAgICAgIChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyLmVycm9yID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5lcnJvciA9IEpTT04ucGFyc2UoZXJyLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldERvd25CaWxsc0luZm8oYXJnczogR2V0RG93bkJpbGxzSW5mb0FyZ3MpOiBPYnNlcnZhYmxlPERvd25CaWxsSW5mb1Jlc3VsdFtdPiB7XHJcbiAgICAgICAgY29uc3Qgb3B0ID0gdGhpcy5odHRwU2VydmljZS5zZXRIZWFkZXIoeyBib2R5OiBhcmdzLkNvbnZlcnRUb0pzb24oKSwgcmVzcG9uc2VUeXBlOiBcInRleHRcIiB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5yZXF1ZXN0KHRoaXMuZ2V0RG93bkJpbGxzSW5mb01ldGhvZCwgdGhpcy5nZXREb3duQmlsbHNJbmZvVXJsLCBvcHQpLnBpcGUoXHJcbiAgICAgICAgICAgIHN3aXRjaE1hcChcclxuICAgICAgICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ6IERvd25CaWxsSW5mb1Jlc3VsdFtdID0gQnBtbk1vZGVsSnNvbkhlbHBlci5Gcm9tSnNvbihyZXMsIERvd25CaWxsSW5mb1Jlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVyci5lcnJvciA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIuZXJyb3IgPSBKU09OLnBhcnNlKGVyci5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRVcEJpbGxzSW5mbyhhcmdzOiBHZXRVcEJpbGxzSW5mb0FyZ3MpOiBPYnNlcnZhYmxlPFVwQmlsbEluZm9SZXN1bHRbXT4ge1xyXG4gICAgICAgIGNvbnN0IG9wdCA9IHRoaXMuaHR0cFNlcnZpY2Uuc2V0SGVhZGVyKHsgYm9keTogYXJncy5Db252ZXJ0VG9Kc29uKCksIHJlc3BvbnNlVHlwZTogXCJ0ZXh0XCIgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucmVxdWVzdCh0aGlzLmdldFVwQmlsbHNJbmZvTWV0aG9kLCB0aGlzLmdldFVwQmlsbHNJbmZvVXJsLCBvcHQpLnBpcGUoXHJcbiAgICAgICAgICAgIHN3aXRjaE1hcChcclxuICAgICAgICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ6IFVwQmlsbEluZm9SZXN1bHRbXSA9IEJwbW5Nb2RlbEpzb25IZWxwZXIuRnJvbUpzb24ocmVzLCBVcEJpbGxJbmZvUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgY2F0Y2hFcnJvcihcclxuICAgICAgICAgICAgICAgIChlcnI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyLmVycm9yID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5lcnJvciA9IEpTT04ucGFyc2UoZXJyLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudGl0eURhdGEoYXJnczogR2V0TWFpbkVudGl0eURhdGFBcmdzKTogT2JzZXJ2YWJsZTxFbnRpdHlEYXRhUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3Qgb3B0ID0gdGhpcy5odHRwU2VydmljZS5zZXRIZWFkZXIoeyBib2R5OiBhcmdzLkNvbnZlcnRUb0pzb24oKSwgcmVzcG9uc2VUeXBlOiBcInRleHRcIiB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5yZXF1ZXN0KHRoaXMuZ2V0RW50aXR5RGF0YU1ldGhvZCwgdGhpcy5nZXRFbnRpdHlEYXRhVXJsLCBvcHQpLnBpcGUoXHJcbiAgICAgICAgICAgIHN3aXRjaE1hcChcclxuICAgICAgICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBFbnRpdHlEYXRhUmVzdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LkxvYWRGcm9tSnNvbihyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvZihyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBjYXRjaEVycm9yKFxyXG4gICAgICAgICAgICAgICAgKGVycjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnIuZXJyb3IgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLmVycm9yID0gSlNPTi5wYXJzZShlcnIuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVpbGRFbnRyeUJpbGxJbmZvKGNhblRyYWNraW5nUmVzdWx0OiBDYW5UcmFja2luZ1Jlc3VsdCkge1xyXG4gICAgICAgIGNvbnN0IGluZm8gPSBuZXcgRG93bkJpbGxJbmZvUmVzdWx0KCk7XHJcbiAgICAgICAgaW5mby5zY2hlbWFJZCA9IGNhblRyYWNraW5nUmVzdWx0LnNjaGVtYUlkO1xyXG4gICAgICAgIGluZm8uc3VDb2RlID0gY2FuVHJhY2tpbmdSZXN1bHQuc3VDb2RlO1xyXG4gICAgICAgIGluZm8udm9OYW1lID0gY2FuVHJhY2tpbmdSZXN1bHQudm9OYW1lO1xyXG4gICAgICAgIGluZm8uYmlsbFRyYWNraW5nU2V0dGluZ3MgPSBjYW5UcmFja2luZ1Jlc3VsdC5iaWxsVHJhY2tpbmdTZXR0aW5ncztcclxuICAgICAgICBpbmZvLmJpektpbmQgPSBjYW5UcmFja2luZ1Jlc3VsdC5iaXpLaW5kO1xyXG4gICAgICAgIGluZm8uYml6VHlwZSA9IGNhblRyYWNraW5nUmVzdWx0LmJpelR5cGU7XHJcbiAgICAgICAgaW5mby5qb2ludFF1ZXJ5TW9kZSA9IGNhblRyYWNraW5nUmVzdWx0LmpvaW50UXVlcnlNb2RlO1xyXG4gICAgICAgIGluZm8uam9pbnRRdWVyeVBhcmFtZXRlcnMgPSBjYW5UcmFja2luZ1Jlc3VsdC5qb2ludFF1ZXJ5UGFyYW1ldGVycztcclxuICAgICAgICBpbmZvLnRyYWNraW5nU291cmNlVHlwZSA9IGNhblRyYWNraW5nUmVzdWx0LnRyYWNraW5nU291cmNlVHlwZTtcclxuICAgICAgICBjb25zdCBkYXRhSW5mbyA9IG5ldyBCaWxsRGF0YUluZm8oKTtcclxuICAgICAgICBkYXRhSW5mby5jYXB0aW9uID0gY2FuVHJhY2tpbmdSZXN1bHQuY2FwdGlvbjtcclxuICAgICAgICBkYXRhSW5mby5kYXRhSWQgPSBjYW5UcmFja2luZ1Jlc3VsdC5kYXRhSWQ7XHJcbiAgICAgICAgZGF0YUluZm8uc3VtbWFyeSA9IGNhblRyYWNraW5nUmVzdWx0LnN1bW1hcnk7XHJcbiAgICAgICAgZGF0YUluZm8udHJhY2tpbmdNYXBwaW5nQXNzb2NpYXRpb25zID0gW107XHJcbiAgICAgICAgZGF0YUluZm8uYmlsbENoaWxkSW5mb3MgPSBjYW5UcmFja2luZ1Jlc3VsdC5iaWxsQ2hpbGRJbmZvcztcclxuICAgICAgICBkYXRhSW5mby5jdXJZZWFyID0gY2FuVHJhY2tpbmdSZXN1bHQuY3VyWWVhcjtcclxuICAgICAgICBpbmZvLmJpbGxEYXRhSW5mb3MgPSBbZGF0YUluZm9dO1xyXG4gICAgICAgIGluZm8uZG9jdW1lbnRUeXBlSWQgPSBjYW5UcmFja2luZ1Jlc3VsdC5kb2N1bWVudFR5cGVJZDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGluZm87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkR2V0QmlsbHNJbmZvQXJncyhjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgR2V0QmlsbHNJbmZvQXJncygpO1xyXG4gICAgICAgIGFyZ3MuYmlsbERhdGFJZCA9IGNlbGwuYmlsbERhdGFJbmZvLmRhdGFJZDtcclxuICAgICAgICBhcmdzLmRvY3VtZW50VHlwZUlkID0gY2VsbC5iaWxsSW5mby5kb2N1bWVudFR5cGVJZDtcclxuICAgICAgICBhcmdzLmJpektpbmQgPSBjZWxsLmJpbGxJbmZvLmJpektpbmQ7XHJcbiAgICAgICAgYXJncy5iaXpUeXBlID0gY2VsbC5iaWxsSW5mby5iaXpUeXBlO1xyXG4gICAgICAgIGFyZ3MuYmlsbENoaWxkSW5mb3MgPSBjZWxsLmJpbGxEYXRhSW5mby5iaWxsQ2hpbGRJbmZvcztcclxuICAgICAgICBhcmdzLmN1clllYXIgPSBjZWxsLmJpbGxEYXRhSW5mby5jdXJZZWFyO1xyXG4gICAgICAgIHJldHVybiBhcmdzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZEdldFVwQmlsbHNJbmZvQXJncyhjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgR2V0VXBCaWxsc0luZm9BcmdzKCk7XHJcbiAgICAgICAgYXJncy5Mb2FkRnJvbUpzb25PYmplY3QodGhpcy5idWlsZEdldEJpbGxzSW5mb0FyZ3MoY2VsbCkuQ29udmVydFRvSnNvbk9iamVjdCgpKTtcclxuICAgICAgICByZXR1cm4gYXJncztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVpbGRHZXREb3duQmlsbHNJbmZvQXJncyhjZWxsOiBCaWxsQ2VsbCkge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgR2V0RG93bkJpbGxzSW5mb0FyZ3MoKTtcclxuICAgICAgICBhcmdzLkxvYWRGcm9tSnNvbk9iamVjdCh0aGlzLmJ1aWxkR2V0QmlsbHNJbmZvQXJncyhjZWxsKS5Db252ZXJ0VG9Kc29uT2JqZWN0KCkpO1xyXG4gICAgICAgIHJldHVybiBhcmdzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidWlsZEdldE1haW5FbnRpdHlEYXRhQXJncyhiaWxsSW5mbzogQmlsbEluZm8sIGJpbGxEYXRhSW5mbzogQmlsbERhdGFJbmZvKTogR2V0TWFpbkVudGl0eURhdGFBcmdzIHtcclxuICAgICAgICBjb25zdCBhcmdzID0gbmV3IEdldE1haW5FbnRpdHlEYXRhQXJncygpO1xyXG4gICAgICAgIGFyZ3MuZGF0YUlkID0gYmlsbERhdGFJbmZvLmRhdGFJZDtcclxuICAgICAgICBhcmdzLnN1Q29kZSA9IGJpbGxJbmZvLnN1Q29kZTtcclxuICAgICAgICBhcmdzLnNjaGVtYUlkID0gYmlsbEluZm8uc2NoZW1hSWQ7XHJcbiAgICAgICAgYXJncy50cmFja2luZ1NvdXJjZVR5cGUgPSBiaWxsSW5mby50cmFja2luZ1NvdXJjZVR5cGU7XHJcbiAgICAgICAgYXJncy5iaWxsQ2hpbGRJbmZvcyA9IGJpbGxEYXRhSW5mby5iaWxsQ2hpbGRJbmZvcztcclxuICAgICAgICBhcmdzLmN1clllYXIgPSBiaWxsRGF0YUluZm8uY3VyWWVhcjtcclxuICAgICAgICBhcmdzLmRvY3VtZW50VHlwZUlkID0gYmlsbEluZm8uZG9jdW1lbnRUeXBlSWQ7XHJcblxyXG4gICAgICAgIHJldHVybiBhcmdzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNEeW5hbWljUGFyYW1zKGpvaW50UXVlcnlQYXJhbWV0ZXJzOiBKb2ludFF1ZXJ5UGFyYW1ldGVycykge1xyXG4gICAgICAgIGlmICgham9pbnRRdWVyeVBhcmFtZXRlcnMucGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5re75Yqg6Ieq5a6a5LmJ5Y+C5pWwXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoam9pbnRRdWVyeVBhcmFtZXRlcnMucGFyYW1zKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gam9pbnRRdWVyeVBhcmFtZXRlcnMucGFyYW1zLmZpbmQoKHApID0+IHAudHlwZSAhPSBKb2ludFF1ZXJ5UGFyYW1ldGVyVHlwZS5Db25zdGFudCkgIT0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCg6IGU5p+l5Y+C5pWw6Kej5p6Q5Zmo5Y+C5pWwXHJcbiAgICAgKiBAcGFyYW0gam9pbnRRdWVyeVBhcmFtZXRlcnMgXHJcbiAgICAgKiBAcGFyYW0gYmlsbEluZm8gXHJcbiAgICAgKiBAcGFyYW0gYmlsbERhdGFJbmZvIFxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBidWlsZEdldEpvaW50UXVlcnlQYXJhbWV0ZXJzQXJncyhqb2ludFF1ZXJ5UGFyYW1ldGVyczogSm9pbnRRdWVyeVBhcmFtZXRlcnMsIGJpbGxJbmZvOiBCaWxsSW5mbywgYmlsbERhdGFJbmZvOiBCaWxsRGF0YUluZm8pOiBHZXRKb2ludFF1ZXJ5UGFyYW1ldGVyc0FyZ3Mge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSBuZXcgR2V0Sm9pbnRRdWVyeVBhcmFtZXRlcnNBcmdzKCk7XHJcblxyXG4gICAgICAgIGFyZ3MuZGF0YUlkID0gYmlsbERhdGFJbmZvLmRhdGFJZDtcclxuICAgICAgICBhcmdzLnN1Q29kZSA9IGJpbGxJbmZvLnN1Q29kZTtcclxuICAgICAgICBhcmdzLnNjaGVtYUlkID0gYmlsbEluZm8uc2NoZW1hSWQ7XHJcbiAgICAgICAgYXJncy50cmFja2luZ1NvdXJjZVR5cGUgPSBiaWxsSW5mby50cmFja2luZ1NvdXJjZVR5cGU7XHJcbiAgICAgICAgYXJncy5jdXJZZWFyID0gYmlsbERhdGFJbmZvLmN1clllYXI7XHJcblxyXG4gICAgICAgIGFyZ3MuY29udGVudHMgPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqb2ludFF1ZXJ5UGFyYW1ldGVycy5wYXJhbXMpKSB7XHJcbiAgICAgICAgICAgIGpvaW50UXVlcnlQYXJhbWV0ZXJzLnBhcmFtcy5mb3JFYWNoKGl0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdC50eXBlID09IEpvaW50UXVlcnlQYXJhbWV0ZXJUeXBlLkNvbnN0YW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnRRdWVyeVBhcmFtZXRlcnNDb250ZW50ID0gbmV3IEpvaW50UXVlcnlQYXJhbWV0ZXJzQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0LnR5cGUgPT0gSm9pbnRRdWVyeVBhcmFtZXRlclR5cGUuRmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBqb2ludFF1ZXJ5UGFyYW1ldGVyc0NvbnRlbnQuam9pbnRRdWVyeVBhcmFtZXRlck1vZGUgPSBKb2ludFF1ZXJ5UGFyYW1ldGVyTW9kZS5GSUVMRDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gbmV3IEZpZWxkSm9pbnRRdWVyeVBhcmFtZXRlckNvbnRlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnBhcmFtZXRlckNvZGUgPSBpdC5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuZmllbGRDb250ZW50ID0gaXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgam9pbnRRdWVyeVBhcmFtZXRlcnNDb250ZW50LmNvbnRlbnQgPSBjb250ZW50LkNvbnZlcnRUb0pzb24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXQudHlwZSA9PSBKb2ludFF1ZXJ5UGFyYW1ldGVyVHlwZS5FeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgam9pbnRRdWVyeVBhcmFtZXRlcnNDb250ZW50LmpvaW50UXVlcnlQYXJhbWV0ZXJNb2RlID0gSm9pbnRRdWVyeVBhcmFtZXRlck1vZGUuRVhQUkVTU0lPTjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gbmV3IEV4cHJlc3Npb25Kb2ludFF1ZXJ5UGFyYW1ldGVyQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucGFyYW1ldGVyQ29kZSA9IGl0LmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5leHByZXNzaW9uQ29udGVudCA9IGl0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGpvaW50UXVlcnlQYXJhbWV0ZXJzQ29udGVudC5jb250ZW50ID0gY29udGVudC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXJncy5jb250ZW50cy5wdXNoKGpvaW50UXVlcnlQYXJhbWV0ZXJzQ29udGVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJncztcclxuICAgIH1cclxufSJdfQ==