/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
var BeOperationUtil = /** @class */ (function () {
    function BeOperationUtil() {
    }
    /**
     * @param {?} be
     * @return {?}
     */
    BeOperationUtil.prototype.getAllMgrActions = /**
     * @param {?} be
     * @return {?}
     */
    function (be) {
        return be.BizMgrActions;
    };
    /**
     * bizActions
     */
    /**
     * bizActions
     * @param {?} be
     * @return {?}
     */
    BeOperationUtil.prototype.getAllBizEntityActions = /**
     * bizActions
     * @param {?} be
     * @return {?}
     */
    function (be) {
        return this.getChidrenObjectsActions(be.MainObject);
    };
    /**
     * @param {?} bizObject
     * @return {?}
     */
    BeOperationUtil.prototype.getChidrenObjectsActions = /**
     * @param {?} bizObject
     * @return {?}
     */
    function (bizObject) {
        /** @type {?} */
        var result = new Array();
        if (!(bizObject)) {
            return result;
        }
        if (bizObject.BizActions && bizObject.BizActions.length > 0) {
            result.push.apply(result, tslib_1.__spread(bizObject.BizActions));
        }
        if (bizObject.ContainChildObjects && bizObject.ContainChildObjects.length > 0) {
            for (var i = 0; i < bizObject.ContainChildObjects.length; i++) {
                result.push.apply(result, tslib_1.__spread(this.getChidrenObjectsActions((/** @type {?} */ (bizObject.ContainChildObjects[i])))));
            }
        }
        return result;
    };
    /**
     * determination
     */
    /**
     * determination
     * @param {?} be
     * @return {?}
     */
    BeOperationUtil.prototype.getAllDeterminations = /**
     * determination
     * @param {?} be
     * @return {?}
     */
    function (be) {
        return this.getChidrenObjectsDeterminations(be.MainObject);
    };
    /**
     * @param {?} bizObject
     * @return {?}
     */
    BeOperationUtil.prototype.getChidrenObjectsDeterminations = /**
     * @param {?} bizObject
     * @return {?}
     */
    function (bizObject) {
        /** @type {?} */
        var result = new Array();
        if (!(bizObject)) {
            return result;
        }
        if (bizObject.Determinations && bizObject.Determinations.length > 0) {
            result.push.apply(result, tslib_1.__spread(bizObject.Determinations));
        }
        if (bizObject.ContainChildObjects && bizObject.ContainChildObjects.length > 0) {
            for (var i = 0; i < bizObject.ContainChildObjects.length; i++) {
                result.push.apply(result, tslib_1.__spread(this.getChidrenObjectsDeterminations((/** @type {?} */ (bizObject.ContainChildObjects[i])))));
            }
        }
        return result;
    };
    /**
     * validation
     */
    /**
     * validation
     * @param {?} be
     * @return {?}
     */
    BeOperationUtil.prototype.getAllValidations = /**
     * validation
     * @param {?} be
     * @return {?}
     */
    function (be) {
        return this.getChidrenObjectsValidations(be.MainObject);
    };
    /**
     * @param {?} bizObject
     * @return {?}
     */
    BeOperationUtil.prototype.getChidrenObjectsValidations = /**
     * @param {?} bizObject
     * @return {?}
     */
    function (bizObject) {
        /** @type {?} */
        var result = new Array();
        if (!(bizObject)) {
            return result;
        }
        if (bizObject.Validations && bizObject.Validations.length > 0) {
            result.push.apply(result, tslib_1.__spread(bizObject.Validations));
        }
        if (bizObject.ContainChildObjects && bizObject.ContainChildObjects.length > 0) {
            for (var i = 0; i < bizObject.ContainChildObjects.length; i++) {
                result.push.apply(result, tslib_1.__spread(this.getChidrenObjectsValidations((/** @type {?} */ (bizObject.ContainChildObjects[i])))));
            }
        }
        return result;
    };
    /**
     * 获取所有操作
     */
    /**
     * 获取所有操作
     * @param {?} be
     * @return {?}
     */
    BeOperationUtil.prototype.getAllOperations = /**
     * 获取所有操作
     * @param {?} be
     * @return {?}
     */
    function (be) {
        /** @type {?} */
        var result = new Array();
        result.push.apply(result, tslib_1.__spread(this.getAllBizEntityActions(be)));
        result.push.apply(result, tslib_1.__spread(this.getAllMgrActions(be)));
        result.push.apply(result, tslib_1.__spread(this.getAllDeterminations(be)));
        result.push.apply(result, tslib_1.__spread(this.getAllValidations(be)));
        return result;
    };
    /**
     * validation触发字段中是否包含某字段
     * @param eleId 字段ID
     */
    /**
     * validation触发字段中是否包含某字段
     * @param {?} be
     * @param {?} eleId 字段ID
     * @return {?}
     */
    BeOperationUtil.prototype.countainValidationRequestElement = /**
     * validation触发字段中是否包含某字段
     * @param {?} be
     * @param {?} eleId 字段ID
     * @return {?}
     */
    function (be, eleId) {
        /** @type {?} */
        var validations = this.getAllValidations(be);
        if (!!(validations) && validations.length > 0) {
            for (var i = 0; i < validations.length; i++) {
                /** @type {?} */
                var b = this.validationCountainRequestElement(validations[i], eleId);
                if (b) {
                    /** @type {?} */
                    var result = validations[i].Name;
                    return result;
                }
            }
        }
        return null;
    };
    /**
     * determination触发字段中是否包含某字段
     * @param eleId 字段ID
     */
    /**
     * determination触发字段中是否包含某字段
     * @param {?} be
     * @param {?} eleId 字段ID
     * @return {?}
     */
    BeOperationUtil.prototype.countainDeterminationRequestElement = /**
     * determination触发字段中是否包含某字段
     * @param {?} be
     * @param {?} eleId 字段ID
     * @return {?}
     */
    function (be, eleId) {
        /** @type {?} */
        var dtms = this.getAllDeterminations(be);
        if (!!(dtms) && dtms.length > 0) {
            for (var i = 0; i < dtms.length; i++) {
                /** @type {?} */
                var b = this.determinationCountainRequestElement(dtms[i], eleId);
                if (b) {
                    /** @type {?} */
                    var result = dtms[i].Name;
                    return result;
                }
            }
        }
        return null;
    };
    /**
     * @private
     * @param {?} id
     * @param {?} requestEles
     * @return {?}
     */
    BeOperationUtil.prototype.countainEle = /**
     * @private
     * @param {?} id
     * @param {?} requestEles
     * @return {?}
     */
    function (id, requestEles) {
        if (!!(id) && !!(requestEles) && requestEles.length > 0) {
            return requestEles.indexOf(id) >= 0;
        }
        return false;
    };
    /**
     * 触发字段中是否包含某字段
     */
    /**
     * 触发字段中是否包含某字段
     * @param {?} dtm
     * @param {?} id
     * @return {?}
     */
    BeOperationUtil.prototype.determinationCountainRequestElement = /**
     * 触发字段中是否包含某字段
     * @param {?} dtm
     * @param {?} id
     * @return {?}
     */
    function (dtm, id) {
        if (this.countainEle(id, dtm.RequestElements)) {
            return true;
        }
        if (!!(dtm.RequestChildElements) && dtm.RequestChildElements.length > 0) {
            return this.countainEle(id, dtm.RequestChildElements[0].RequestChildElementValue);
        }
        return false;
    };
    /**
     * 触发字段中是否包含某字段
     */
    /**
     * 触发字段中是否包含某字段
     * @param {?} validation
     * @param {?} id
     * @return {?}
     */
    BeOperationUtil.prototype.validationCountainRequestElement = /**
     * 触发字段中是否包含某字段
     * @param {?} validation
     * @param {?} id
     * @return {?}
     */
    function (validation, id) {
        if (this.countainEle(id, validation.RequestElements)) {
            return true;
        }
        if (!!(validation.RequestChildElements) && validation.RequestChildElements.length > 0) {
            return this.countainEle(id, validation.RequestChildElements[0].RequestChildElementValue);
        }
        return false;
    };
    return BeOperationUtil;
}());
export { BeOperationUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmVPcGVyYXRpb25VdGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1iZWYvZ3NwLWJlLW1ldGFkYXRhLyIsInNvdXJjZXMiOlsibGliL2Jpei1lbnRpdHkvc3JjL1V0aWwvQmVPcGVyYXRpb25VdGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBU0E7SUFBQTtJQTBKQSxDQUFDOzs7OztJQXpKQywwQ0FBZ0I7Ozs7SUFBaEIsVUFBaUIsRUFBcUI7UUFDcEMsT0FBTyxFQUFFLENBQUMsYUFBYSxDQUFDO0lBQzFCLENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0gsZ0RBQXNCOzs7OztJQUF0QixVQUF1QixFQUFxQjtRQUMxQyxPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdEQsQ0FBQzs7Ozs7SUFFRCxrREFBd0I7Ozs7SUFBeEIsVUFBeUIsU0FBNkI7O1lBQzlDLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBYTtRQUNyQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNoQixPQUFPLE1BQU0sQ0FBQztTQUNmO1FBQ0QsSUFBSSxTQUFTLENBQUMsVUFBVSxJQUFJLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUMzRCxNQUFNLENBQUMsSUFBSSxPQUFYLE1BQU0sbUJBQVMsU0FBUyxDQUFDLFVBQVUsR0FBRTtTQUN0QztRQUNELElBQUksU0FBUyxDQUFDLG1CQUFtQixJQUFJLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzdFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUM3RCxNQUFNLENBQUMsSUFBSSxPQUFYLE1BQU0sbUJBQVMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLG1CQUFBLFNBQVMsQ0FBQyxt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RUFBRTtZQUNwRCxPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsSUFBSSxVQUFVLENBQUMsb0JBQW9CLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNyRixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQzFGO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBMUpELElBMEpDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR1NQQnVzaW5lc3NFbnRpdHkgfSBmcm9tICcuLi9HU1BCdXNpbmVzc0VudGl0eSc7XHJcbmltcG9ydCB7IEJpekFjdGlvbiB9IGZyb20gJy4uL09wZXJhdGlvbi9CaXpBY3Rpb24nO1xyXG5pbXBvcnQgeyBHU1BCaXpFbnRpdHlPYmplY3QgfSBmcm9tICcuLi9HU1BCaXpFbnRpdHlPYmplY3QnO1xyXG5cclxuaW1wb3J0IHsgRGV0ZXJtaW5hdGlvbiB9IGZyb20gJy4uL09wZXJhdGlvbi9EZXRlcm1pbmF0aW9uJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbiB9IGZyb20gJy4uL09wZXJhdGlvbi9WYWxpZGF0aW9uJztcclxuaW1wb3J0IHsgQml6T3BlcmF0aW9uIH0gZnJvbSAnLi4vT3BlcmF0aW9uL0Jpek9wZXJhdGlvbic7XHJcbmltcG9ydCB7IEJpek1nckFjdGlvbiB9IGZyb20gJy4uL09wZXJhdGlvbi9CaXpNZ3JBY3Rpb24nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJlT3BlcmF0aW9uVXRpbCB7XHJcbiAgZ2V0QWxsTWdyQWN0aW9ucyhiZTogR1NQQnVzaW5lc3NFbnRpdHkpOiBCaXpNZ3JBY3Rpb25bXSB7XHJcbiAgICByZXR1cm4gYmUuQml6TWdyQWN0aW9ucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGJpekFjdGlvbnNcclxuICAgKi9cclxuICBnZXRBbGxCaXpFbnRpdHlBY3Rpb25zKGJlOiBHU1BCdXNpbmVzc0VudGl0eSk6IEJpekFjdGlvbltdIHtcclxuICAgIHJldHVybiB0aGlzLmdldENoaWRyZW5PYmplY3RzQWN0aW9ucyhiZS5NYWluT2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGdldENoaWRyZW5PYmplY3RzQWN0aW9ucyhiaXpPYmplY3Q6IEdTUEJpekVudGl0eU9iamVjdCk6IEJpekFjdGlvbltdIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheTxCaXpBY3Rpb24+KCk7XHJcbiAgICBpZiAoIShiaXpPYmplY3QpKSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYml6T2JqZWN0LkJpekFjdGlvbnMgJiYgYml6T2JqZWN0LkJpekFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXN1bHQucHVzaCguLi5iaXpPYmplY3QuQml6QWN0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpZiAoYml6T2JqZWN0LkNvbnRhaW5DaGlsZE9iamVjdHMgJiYgYml6T2JqZWN0LkNvbnRhaW5DaGlsZE9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpek9iamVjdC5Db250YWluQ2hpbGRPYmplY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goLi4udGhpcy5nZXRDaGlkcmVuT2JqZWN0c0FjdGlvbnMoYml6T2JqZWN0LkNvbnRhaW5DaGlsZE9iamVjdHNbaV0gYXMgR1NQQml6RW50aXR5T2JqZWN0KSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBkZXRlcm1pbmF0aW9uXHJcbiAgICovXHJcbiAgZ2V0QWxsRGV0ZXJtaW5hdGlvbnMoYmU6IEdTUEJ1c2luZXNzRW50aXR5KTogRGV0ZXJtaW5hdGlvbltdIHtcclxuICAgIHJldHVybiB0aGlzLmdldENoaWRyZW5PYmplY3RzRGV0ZXJtaW5hdGlvbnMoYmUuTWFpbk9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBnZXRDaGlkcmVuT2JqZWN0c0RldGVybWluYXRpb25zKGJpek9iamVjdDogR1NQQml6RW50aXR5T2JqZWN0KTogRGV0ZXJtaW5hdGlvbltdIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheTxEZXRlcm1pbmF0aW9uPigpO1xyXG4gICAgaWYgKCEoYml6T2JqZWN0KSkge1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgaWYgKGJpek9iamVjdC5EZXRlcm1pbmF0aW9ucyAmJiBiaXpPYmplY3QuRGV0ZXJtaW5hdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXN1bHQucHVzaCguLi5iaXpPYmplY3QuRGV0ZXJtaW5hdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgaWYgKGJpek9iamVjdC5Db250YWluQ2hpbGRPYmplY3RzICYmIGJpek9iamVjdC5Db250YWluQ2hpbGRPYmplY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaXpPYmplY3QuQ29udGFpbkNoaWxkT2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLnRoaXMuZ2V0Q2hpZHJlbk9iamVjdHNEZXRlcm1pbmF0aW9ucyhiaXpPYmplY3QuQ29udGFpbkNoaWxkT2JqZWN0c1tpXSBhcyBHU1BCaXpFbnRpdHlPYmplY3QpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHZhbGlkYXRpb25cclxuICAgKi9cclxuICBnZXRBbGxWYWxpZGF0aW9ucyhiZTogR1NQQnVzaW5lc3NFbnRpdHkpOiBWYWxpZGF0aW9uW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hpZHJlbk9iamVjdHNWYWxpZGF0aW9ucyhiZS5NYWluT2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGdldENoaWRyZW5PYmplY3RzVmFsaWRhdGlvbnMoYml6T2JqZWN0OiBHU1BCaXpFbnRpdHlPYmplY3QpOiBWYWxpZGF0aW9uW10ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5PFZhbGlkYXRpb24+KCk7XHJcbiAgICBpZiAoIShiaXpPYmplY3QpKSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYml6T2JqZWN0LlZhbGlkYXRpb25zICYmIGJpek9iamVjdC5WYWxpZGF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKC4uLmJpek9iamVjdC5WYWxpZGF0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpZiAoYml6T2JqZWN0LkNvbnRhaW5DaGlsZE9iamVjdHMgJiYgYml6T2JqZWN0LkNvbnRhaW5DaGlsZE9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpek9iamVjdC5Db250YWluQ2hpbGRPYmplY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goLi4udGhpcy5nZXRDaGlkcmVuT2JqZWN0c1ZhbGlkYXRpb25zKGJpek9iamVjdC5Db250YWluQ2hpbGRPYmplY3RzW2ldIGFzIEdTUEJpekVudGl0eU9iamVjdCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5omA5pyJ5pON5L2cXHJcbiAgICovXHJcbiAgZ2V0QWxsT3BlcmF0aW9ucyhiZTogR1NQQnVzaW5lc3NFbnRpdHkpOiBCaXpPcGVyYXRpb25bXSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXk8Qml6T3BlcmF0aW9uPigpO1xyXG4gICAgcmVzdWx0LnB1c2goLi4udGhpcy5nZXRBbGxCaXpFbnRpdHlBY3Rpb25zKGJlKSk7XHJcbiAgICByZXN1bHQucHVzaCguLi50aGlzLmdldEFsbE1nckFjdGlvbnMoYmUpKTtcclxuICAgIHJlc3VsdC5wdXNoKC4uLnRoaXMuZ2V0QWxsRGV0ZXJtaW5hdGlvbnMoYmUpKTtcclxuICAgIHJlc3VsdC5wdXNoKC4uLnRoaXMuZ2V0QWxsVmFsaWRhdGlvbnMoYmUpKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB2YWxpZGF0aW9u6Kem5Y+R5a2X5q615Lit5piv5ZCm5YyF5ZCr5p+Q5a2X5q61XHJcbiAgICogQHBhcmFtIGVsZUlkIOWtl+autUlEXHJcbiAgICovXHJcbiAgY291bnRhaW5WYWxpZGF0aW9uUmVxdWVzdEVsZW1lbnQoYmU6IEdTUEJ1c2luZXNzRW50aXR5LCBlbGVJZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHZhbGlkYXRpb25zID0gdGhpcy5nZXRBbGxWYWxpZGF0aW9ucyhiZSk7XHJcbiAgICBpZiAoISEodmFsaWRhdGlvbnMpICYmIHZhbGlkYXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWxpZGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLnZhbGlkYXRpb25Db3VudGFpblJlcXVlc3RFbGVtZW50KHZhbGlkYXRpb25zW2ldLCBlbGVJZCk7XHJcbiAgICAgICAgaWYgKGIpIHtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRpb25zW2ldLk5hbWU7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBkZXRlcm1pbmF0aW9u6Kem5Y+R5a2X5q615Lit5piv5ZCm5YyF5ZCr5p+Q5a2X5q61XHJcbiAgICogQHBhcmFtIGVsZUlkIOWtl+autUlEXHJcbiAgICovXHJcbiAgY291bnRhaW5EZXRlcm1pbmF0aW9uUmVxdWVzdEVsZW1lbnQoYmU6IEdTUEJ1c2luZXNzRW50aXR5LCBlbGVJZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGR0bXMgPSB0aGlzLmdldEFsbERldGVybWluYXRpb25zKGJlKTtcclxuICAgIGlmICghIShkdG1zKSAmJiBkdG1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkdG1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuZGV0ZXJtaW5hdGlvbkNvdW50YWluUmVxdWVzdEVsZW1lbnQoZHRtc1tpXSwgZWxlSWQpO1xyXG4gICAgICAgIGlmIChiKSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBkdG1zW2ldLk5hbWU7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvdW50YWluRWxlKGlkOiBzdHJpbmcsIHJlcXVlc3RFbGVzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCEhKGlkKSAmJiAhIShyZXF1ZXN0RWxlcykgJiYgcmVxdWVzdEVsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gcmVxdWVzdEVsZXMuaW5kZXhPZihpZCkgPj0gMDtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOinpuWPkeWtl+auteS4reaYr+WQpuWMheWQq+afkOWtl+autVxyXG4gICAqL1xyXG4gIGRldGVybWluYXRpb25Db3VudGFpblJlcXVlc3RFbGVtZW50KGR0bTogRGV0ZXJtaW5hdGlvbiwgaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuY291bnRhaW5FbGUoaWQsIGR0bS5SZXF1ZXN0RWxlbWVudHMpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKCEhKGR0bS5SZXF1ZXN0Q2hpbGRFbGVtZW50cykgJiYgZHRtLlJlcXVlc3RDaGlsZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY291bnRhaW5FbGUoaWQsIGR0bS5SZXF1ZXN0Q2hpbGRFbGVtZW50c1swXS5SZXF1ZXN0Q2hpbGRFbGVtZW50VmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R5a2X5q615Lit5piv5ZCm5YyF5ZCr5p+Q5a2X5q61XHJcbiAgICovXHJcbiAgdmFsaWRhdGlvbkNvdW50YWluUmVxdWVzdEVsZW1lbnQodmFsaWRhdGlvbjogVmFsaWRhdGlvbiwgaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuY291bnRhaW5FbGUoaWQsIHZhbGlkYXRpb24uUmVxdWVzdEVsZW1lbnRzKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmICghISh2YWxpZGF0aW9uLlJlcXVlc3RDaGlsZEVsZW1lbnRzKSAmJiB2YWxpZGF0aW9uLlJlcXVlc3RDaGlsZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY291bnRhaW5FbGUoaWQsIHZhbGlkYXRpb24uUmVxdWVzdENoaWxkRWxlbWVudHNbMF0uUmVxdWVzdENoaWxkRWxlbWVudFZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIl19