/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ContentChild, TemplateRef, ViewChild } from '@angular/core';
import { QdpViewComponent, RenderService } from '@qdp/spread';
import { LcpBindingDataDirective, FormBindingDataDirective } from '@qdp/echarts';
import { SchemaService } from '@qdp/ide-cmp';
import { FilterService } from '@gsp-svc/filtercondition';
import { FilterManagerService, ParasMappingManagerService, RtfServices, QDPCacheUtil } from '@qdp/common';
import { EventBus } from '@qdp/common';
import { QueryFrameworkToolbarComponent } from '../qf-toolbar/qf-toolbar.component';
import { ConditionDialogComponent } from '../condition-dialog/condition-dialog.component';
export class QueryFrameworkLayoutComponent {
    /**
     * @param {?} schemaService
     * @param {?} renderService
     * @param {?} filter
     * @param {?} filterService
     * @param {?} parasMappingManagerService
     */
    constructor(schemaService, renderService, filter, filterService, parasMappingManagerService) {
        this.schemaService = schemaService;
        this.renderService = renderService;
        this.filter = filter;
        this.filterService = filterService;
        this.parasMappingManagerService = parasMappingManagerService;
        this.isShowToolbar = true;
        this.isMultiForm = false; // 是否嵌入式表单
        this.isInit = true;
        this.toolbarOption = {
            showPreSchema: true,
            showSchemaManager: true,
            showExport: true,
            showReFresh: true,
            showFilter: true,
            showPrint: true,
            showClearSort: true,
            showClearCache: true
        };
        this.toolBarEvent = 'toolBarEvent' + EventBus.guid();
        this.contentSizeChange = new EventEmitter();
        this.formPrintOption = {
            isShowFormPrint: false,
            printBEId: '',
            printFormIdField: ''
        };
        this.size = {
            height: '500px',
            width: '300px'
        };
        this.pageInfo = {};
        this.pageIndex = 1;
        this.co = {
            NodeType: 'QueryNode',
            IsBe: true,
            ContainElements: [],
            Code: 'QueryNode',
            Name: 'QueryNdoe',
            BizEntityID: EventBus.guid()
        };
        this.subscriptions = [];
        /** @type {?} */
        const self = this;
        this.tabId = RtfServices.getTabId(this.queryId);
        this.subscriptions = [];
        this.subscriptions.push(self.schemaService.schemaInfo.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        value => {
            try {
                if (value) {
                    /** @type {?} */
                    const schemaInfoAll = Object.assign({}, value);
                    if (schemaInfoAll.schemaList && schemaInfoAll.schemaList[this.queryId]) {
                        schemaInfoAll.schemaList = schemaInfoAll.schemaList[this.queryId];
                        if (!self.schemaId) {
                            if (schemaInfoAll.isDefaultSchema && schemaInfoAll.isDefaultSchema.id) {
                                self.initColListData(schemaInfoAll.isDefaultSchema.schemaValue.columnOption.colList);
                            }
                        }
                        else if (self.schemaId !== '1' && self.schemaId !== 'prefab' && self.schemaId !== 'public_schema' && self.schemaId !== 'person_schema') {
                            self.initColListData(schemaInfoAll.schemaList[self.schemaId].schemaValue.columnOption.colList);
                        }
                    }
                    else {
                        schemaInfoAll.schemaList = null;
                        self.initColListData(schemaInfoAll.preSchema.schemaValue.columnOption.colList);
                    }
                    self.schemaInfo = schemaInfoAll;
                }
            }
            catch (e) {
                // console.log(e); 
            }
        })));
        this.subscriptions.push(self.schemaService.colList.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        value => {
            self.colList = value;
            if (value && value.length) {
                this.initColListData(value, 'col');
            }
        })));
        // 如果有筛选方案
        if (this.filterService && this.filterService.isFilterQDP) {
            // this.filterService.isFilterQDP.observers = [];
            this.subscriptions.push(self.filterService.isFilterQDP.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    if (data) {
                        if (self.toolbarComponent && self.toolbarComponent.paginationComponent) {
                            self.toolbarComponent.paginationComponent.initPageInfo();
                            self.pageIndex = self.toolbarComponent.paginationComponent.pagination.pageIndex = 1;
                            self.pageInfo = self.toolbarComponent.paginationComponent.pagination;
                        }
                        self.refresh();
                    }
                }));
            })));
        }
    }
    /**
     * @return {?}
     */
    getQdpView() {
        if (this.qdpView) {
            return this.qdpView;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + this.controlType + 'qdpview')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + this.controlType + 'qdpview');
        }
    }
    /**
     * @return {?}
     */
    getCharts() {
        if (this.charts) {
            return this.charts;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + 'lcp-charts')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + 'lcp-charts');
        }
    }
    /**
     * @return {?}
     */
    getFormDatasource() {
        if (this.formdatasource) {
            return this.formdatasource;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + 'form-charts')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + 'form-charts');
        }
    }
    /**
     * @return {?}
     */
    getConditionDialog() {
        if (this.conditionDialog) {
            return this.conditionDialog;
        }
        else if (QDPCacheUtil.getCache(this.tabId + 'advanceTemplate-condition-dialog')) {
            return QDPCacheUtil.getCache(this.tabId + 'advanceTemplate-condition-dialog');
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.subscriptions && this.subscriptions.length) {
            for (const subscription of this.subscriptions) {
                subscription.unsubscribe();
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const self = this;
        if (this.controlType !== 'crosstab') {
            this.subscriptions.push(self.schemaService.pageInfoChange.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                self.pageInfo = value;
            })));
        }
        // if (this.qoId) {
        if (this.isInit == true) {
            this.subscriptions.push(self.filterService.getFilter(self.qoManagerCode ? self.qoManagerCode : self.queryId, self.queryId, self.queryRelativeUrl, 1, this.groupType).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                if (data) {
                    self.conditionExpression = JSON.stringify(data.filter);
                }
            })));
        }
        // this.subscriptions.push(self.parasMappingManagerService.getMetaDataInfoById(self.qoId).subscribe(voInfo => {
        //   if (voInfo) {
        //     self.co = JSON.parse(voInfo.content).QueryNode;
        //   }
        // }));
        // }
        if (this.isMultiForm) {
            /** @type {?} */
            const divShowToolBarDom = (/** @type {?} */ (document.getElementById(this.toolBarEvent)));
            divShowToolBarDom.addEventListener('mouseover', (/**
             * @return {?}
             */
            () => {
                this.isShowToolbar = true;
            }));
            divShowToolBarDom.addEventListener('mouseout', (/**
             * @return {?}
             */
            () => {
                this.isShowToolbar = false;
            }));
        }
    }
    /**
     * @private
     * @param {?} newValue
     * @param {?=} type
     * @return {?}
     */
    initColListData(newValue, type) {
        newValue.forEach((/**
         * @param {?} col
         * @return {?}
         */
        col => {
            this.recursiveInitColListData(null, col, type);
        }));
    }
    /**
     * @private
     * @param {?} children
     * @param {?} col
     * @param {?=} type
     * @return {?}
     */
    recursiveInitColListData(children, col, type) {
        if (col) {
            /** @type {?} */
            const index = this.co.ContainElements.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            (item) => item.Code === col.bindField));
            if (index < 0) {
                /** @type {?} */
                const node = {};
                node['ID'] = EventBus.guid();
                node['Code'] = col.bindField;
                node['LabelID'] = col.bindField;
                node['MDataType'] = this.getDataType(col.type);
                node['NodeType'] = 'QueryProperty';
                node['Name'] = col.name;
                this.co.ContainElements.push(node);
            }
            else if (type !== 'col') {
                this.co.ContainElements[index]['Name'] = col.name;
            }
            if (col.childList && col.childList.length) {
                this.recursiveInitColListData(col.childList, null);
            }
        }
        else {
            children.forEach((/**
             * @param {?} c
             * @return {?}
             */
            (c) => {
                /** @type {?} */
                const index = this.co.ContainElements.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                (item) => item.Code === c.bindField));
                if (index < 0) {
                    /** @type {?} */
                    const node = {};
                    node['ID'] = EventBus.guid();
                    node['Code'] = c.bindField;
                    node['LabelID'] = c.bindField;
                    node['MDataType'] = this.getDataType(c.type);
                    node['NodeType'] = 'QueryProperty';
                    node['Name'] = c.name;
                    this.co.ContainElements.push(node);
                }
                else if (type !== 'col') {
                    this.co.ContainElements[index]['Name'] = c.name;
                }
                if (c.childList && c.childList.length) {
                    this.recursiveInitColListData(c.childList, null);
                }
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        for (const changeName in changes) {
            /** @type {?} */
            const newValue = changes[changeName].currentValue;
            if (newValue !== null && newValue !== void 0) {
                this.tabId = RtfServices.getTabId(newValue);
                switch (changeName) {
                    case 'queryId':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'queryId', newValue);
                        }
                        break;
                    case 'qoManagerCode':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'qoManagerCode', newValue);
                        }
                        break;
                    case 'controlType':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'controlType', newValue);
                        }
                        break;
                    case 'queryRelativeUrl':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'queryRelativeUrl', newValue);
                        }
                        break;
                    case 'voId':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'voId', newValue);
                        }
                        break;
                }
            }
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        /** @type {?} */
        const self = this;
        this.subscriptions.push(self.getQdpView().sheetChanged.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        value => {
            self.groupType = value;
        })));
        if (this.getConditionDialog()) { // 生成型高级查询表单分支
            this.subscriptions.push(self.getConditionDialog().queryEvent.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data === 1) {
                    self.getQdpView().initQdpView();
                }
                else if (data > 1) {
                    self.refresh();
                }
            })));
            this.subscriptions.push(self.getConditionDialog().dialogInitEvent.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (self.templateType === 'qdpAdvancedTemplate') {
                    self.getConditionDialog().handleDialogShow();
                }
            })));
        }
        else { // 解析型高级查询表单分支
            EventBus.register(this.tabId + 'advanceTemplate-condition-dialog-queryEvent', (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data === 1) {
                    self.getQdpView().initQdpView();
                }
                else if (data > 1) {
                    self.refresh();
                }
            }), this.tabId);
            EventBus.register(this.tabId + 'advanceTemplate-condition-dialog-dialogInitEvent', (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (self.templateType === 'qdpAdvancedTemplate') {
                    self.getConditionDialog().handleDialogShow();
                }
            }), this.tabId);
        }
    }
    /**
     * @param {?} id
     * @return {?}
     */
    handleSchemaSelected(id) {
        this.schemaId = id;
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().initSpread(this.queryId, id, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, null, true);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(id, this.getChartsOption(id), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId));
            }
        }
        this.pageIndex = 1;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    handleBeforeClose(id) {
        this.schemaId = id;
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().initSpread(this.queryId, id, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, null, true);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(id, this.getChartsOption(id), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(id));
            }
        }
        this.pageIndex = this.pageIndex ? this.pageIndex : 1;
    }
    /**
     * @return {?}
     */
    refresh() {
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().pageIndex = this.pageIndex;
                this.getQdpView().initSpread(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(this.schemaId, this.getChartsOption(this.schemaId), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId));
            }
        }
        this.pageIndex = this.pageIndex ? this.pageIndex : 1;
    }
    /**
     * @return {?}
     */
    clearCache() {
        this.renderService.clearCache(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
    }
    /**
     * @return {?}
     */
    clearSort() {
        this.getQdpView().handleClearSort();
    }
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    handlePageChange(pageInfo) {
        this.pageIndex = pageInfo.pageIndex;
        if (this.controlType !== 'crosstab') {
            this.getQdpView().pageIndex = this.pageIndex;
            this.getQdpView().initSpread(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
        }
        else {
            this.getQdpView().handleCrosstabPageChange(this.pageIndex, pageInfo.pageSize);
        }
    }
    /**
     * @param {?} eventData
     * @return {?}
     */
    handleExportExcel(eventData) {
        this.getQdpView().exportExcel(this.queryId, this.schemaId, this.controlType, this.pageIndex, this.qoManagerCode, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, this.pageInfo.totalCount, eventData);
    }
    /**
     * @param {?} eventData
     * @return {?}
     */
    pdfExportEvent(eventData) {
        this.getQdpView().pdfExportEvent(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, eventData, this.queryRelativeUrl, this.conditionExpression, this.pageIndex, this.groupType, this.voId);
    }
    /**
     * @param {?} eventData
     * @return {?}
     */
    printPreview(eventData) {
        this.getQdpView().printPreView(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, eventData, this.queryRelativeUrl, this.conditionExpression, this.pageIndex, this.groupType, this.voId);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onResized(event) {
        this.size.height = event.newHeight + 'px';
        this.size.width = (event.newWidth ? (event.newWidth - 15) : 0) + 'px';
        this.contentSizeChange.emit(Object.assign({}, this.size));
    }
    /**
     * @private
     * @param {?} schemaId
     * @return {?}
     */
    getChartsOption(schemaId) {
        /** @type {?} */
        let chartsOption = {};
        if (schemaId === 'prefab') {
        }
        else if (this.schemaInfo && this.schemaInfo.schemaList && this.schemaInfo.schemaList[schemaId]) {
            chartsOption = Object.assign({}, this.schemaInfo.schemaList[schemaId].schemaValue.chartsStyle, this.schemaInfo.schemaList[schemaId].schemaValue.chartsData);
        }
        if (chartsOption.series && this.schemaInfo.schemaList[schemaId].schemaValue.chartsType.series.type) {
            chartsOption.series.type = this.schemaInfo.schemaList[schemaId].schemaValue.chartsType.series.type;
            if (chartsOption.series.type !== 'line1') {
                delete chartsOption.series.areaStyle;
            }
            else {
                chartsOption.series.areaStyle = {};
            }
        }
        return chartsOption;
    }
    /**
     * @return {?}
     */
    filterCondition() {
        /** @type {?} */
        const self = this;
        if (this.co && this.co.ContainElements && this.co.ContainElements.length) {
            this.filter.addCommonObject(this.co);
            this.filter.addInjectedEntity(this.co.Code, 'CommonObject');
            // if (this.conditionExpression) {
            this.filter.addFilterCondition(this.conditionExpression);
            // }
            this.filter.buildExpression().then((/**
             * @param {?} buildedExpression
             * @return {?}
             */
            buildedExpression => {
                this.conditionExpression = buildedExpression;
                if (buildedExpression) {
                    // tslint:disable-next-line:max-line-length
                    /** @type {?} */
                    const filter = { Id: EventBus.guid(), filter: buildedExpression, queryid: this.queryId, datasourceid: this.qoManagerCode ? this.qoManagerCode : this.queryId, queryType: 1 };
                    this.subscriptions.push(self.filterService.saveFilter(filter, self.queryRelativeUrl)
                        .subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    data => self.refresh())));
                }
                else {
                    this.subscriptions.push(self.filterService.deleteFilter(self.qoManagerCode ? self.qoManagerCode : self.queryId, self.queryId, self.queryRelativeUrl, 1).subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    data => self.refresh())));
                    this.conditionExpression = null;
                    if (self.controlType !== 'charts') {
                        self.getQdpView().conditionExpression = null;
                    }
                }
            }));
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    expendCollapseLevel($event) {
        /** @type {?} */
        const maxLevel = this.getQdpView().spread.getActiveSheet().rowOutlines.getMaxLevel();
        for (let index = 1; index <= maxLevel; index++) {
            this.getQdpView().spread.getActiveSheet().rowOutlines.expand(index, $event);
        }
        this.getQdpView().spread.getActiveSheet().resumePaint();
    }
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    getDataType(type) {
        /** @type {?} */
        let result = 'String';
        switch (type) {
            case 'string':
                result = 'String';
                break;
            case 'text':
                result = 'Text';
                break;
            case 'integer':
            case 'int':
                result = 'Integer';
                break;
            case 'decimal':
                result = 'Decimal';
                break;
            case 'boolean':
                result = 'Boolean';
                break;
            case 'date':
                result = 'Date';
                break;
            case 'dateTime':
                result = 'DateTime';
                break;
            case 'binary':
                result = 'Binary';
                break;
            default:
                break;
        }
        return result;
    }
}
QueryFrameworkLayoutComponent.decorators = [
    { type: Component, args: [{
                selector: 'query-framework-layout',
                template: "<div class=\"f-page f-page-is-managelist\" id =\"{{toolBarEvent}}\" >\r\n  <div class=\"f-page-header mt-1\" [ngClass]=\"{'floatShow shadow-none': isMultiForm && isShowToolbar }\"\r\n    [hidden]=\"!isShowToolbar\">\r\n    <query-framework-toolbar [formPrintOption]=\"formPrintOption\" [conditionDialog]=\"conditionDialog\" [templateType]=\"templateType\" [schemaInfo]=\"schemaInfo\" [colList]=\"colList\" [pageInfo]=\"pageInfo\" [schemaId]=\"schemaId\"\r\n      [queryId]=\"queryId\" [groupType]=\"groupType\" [queryName]=\"queryName\" [controlType]=\"controlType\" [isShowToolbar]=\"isShowToolbar\"\r\n      [isMultiForm]=\"isMultiForm\" [inputTemplate]=\"inputTemplate\" [qoManagerCode]=\"qoManagerCode\" [qdpView]=\"qdpView\" [conditionExpression]=\"conditionExpression\"\r\n      [queryRelativeUrl]=\"queryRelativeUrl\" [qoId]=\"qoId\" [voId]=\"voId\" (schemaSelected)=\"handleSchemaSelected($event)\"\r\n      (dialogBeforeClose)=\"handleBeforeClose($event)\" (pageChange)=\"handlePageChange($event)\"\r\n      (exportExcel)=\"handleExportExcel($event)\" (printIntegration)=\"pdfExportEvent($event)\" (printPreview)=\"printPreview($event)\" (refreshEvent)=\"refresh()\"\r\n      (filterCondition)=\"filterCondition()\" (clearCache)=\"clearCache()\" (clearSort)=\"clearSort()\"\r\n      (expendCollapseLevel)=\"expendCollapseLevel($event)\"\r\n      [showSchemaManager]=\"toolbarOption.showSchemaManager\"\r\n      [showExport]=\"toolbarOption.showExport\"\r\n      [showReFresh]=\"toolbarOption.showReFresh\"\r\n      [showFilter]=\"toolbarOption.showFilter\"\r\n      [showPrint]=\"toolbarOption.showPrint\"\r\n      [showClearSort]=\"toolbarOption.showClearSort\"\r\n      [showClearCache]=\"toolbarOption.showClearCache\"\r\n      [showPreSchema]=\"toolbarOption.showPreSchema\"\r\n      >\r\n    </query-framework-toolbar>\r\n  </div>\r\n  <div class=\"position-relative h-100 ml-2 mr-2 bg-white farris-overflow-y-auto\">\r\n    <div class=\"farris-form farris-card-content-bg f-utils-absolute-all f-utils-flex-column\" (resized)=\"onResized($event)\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                styles: [".floatShow{position:absolute;right:2px;top:2px;z-index:1;background-color:rgba(255,255,255,.15)}"]
            }] }
];
/** @nocollapse */
QueryFrameworkLayoutComponent.ctorParameters = () => [
    { type: SchemaService },
    { type: RenderService },
    { type: FilterService },
    { type: FilterManagerService },
    { type: ParasMappingManagerService }
];
QueryFrameworkLayoutComponent.propDecorators = {
    queryId: [{ type: Input }],
    groupType: [{ type: Input }],
    qoManagerCode: [{ type: Input }],
    controlType: [{ type: Input }],
    queryName: [{ type: Input }],
    isShowToolbar: [{ type: Input }],
    isMultiForm: [{ type: Input }],
    queryRelativeUrl: [{ type: Input }],
    qoId: [{ type: Input }],
    voId: [{ type: Input }],
    templateType: [{ type: Input }],
    isInit: [{ type: Input }],
    toolbarOption: [{ type: Input }],
    qdpView: [{ type: ContentChild, args: ['qdp-view',] }],
    charts: [{ type: ContentChild, args: ['lcpBindingData',] }],
    formdatasource: [{ type: ContentChild, args: ['formBindingData',] }],
    conditionDialog: [{ type: Input }],
    toolbarComponent: [{ type: ViewChild, args: [QueryFrameworkToolbarComponent,] }],
    contentSizeChange: [{ type: Output }],
    formPrintOption: [{ type: Input }],
    inputTemplate: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.groupType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qoManagerCode;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.controlType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryName;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isShowToolbar;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isMultiForm;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qoId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.voId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.templateType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isInit;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolbarOption;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qdpView;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolBarEvent;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.tabId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.charts;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.formdatasource;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.conditionDialog;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolbarComponent;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.contentSizeChange;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.formPrintOption;
    /**
     * 模板作为参数
     * @type {?}
     */
    QueryFrameworkLayoutComponent.prototype.inputTemplate;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.size;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.schemaInfo;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.colList;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.pageInfo;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.schemaId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.pageIndex;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.conditionExpression;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.co;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.subscriptions;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.schemaService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.renderService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.filter;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.parasMappingManagerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicWYtbGF5b3V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BxZHAvcXVlcnktZnJhbWV3b3JrLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9xZi1sYXlvdXQvcWYtbGF5b3V0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFpQixTQUFTLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ3pLLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDOUQsT0FBTyxFQUF1Qix1QkFBdUIsRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUN0RyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQzdDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsMEJBQTBCLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMxRyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBUzFGLE1BQU0sT0FBTyw2QkFBNkI7Ozs7Ozs7O0lBNEZ4QyxZQUFvQixhQUE0QixFQUFVLGFBQTRCLEVBQVUsTUFBcUIsRUFBVSxhQUFtQyxFQUFVLDBCQUFzRDtRQUE5TSxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUFVLCtCQUEwQixHQUExQiwwQkFBMEIs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QUs7MkJBQ0wsS0FBSztxQkFDTCxLQUFLOzRCQUNMLEtBQUs7c0JBVUwsWUFBWSxTQUFDLFVBQVU7cUJBWXZCLFlBQVksU0FBQyxnQkFBZ0I7NkJBUzdCLFlBQVksU0FBQyxpQkFBaUI7OEJBUzlCLEtBQUs7K0JBUUwsU0FBUyxTQUFDLDhCQUE4QjtnQ0FDeEMsTUFBTTs4QkFDTixLQUFLOzRCQVFMLEtBQUs7Ozs7SUF0RU4sZ0RBQXNCOztJQUN0QixrREFBd0I7O0lBQ3hCLHNEQUE0Qjs7SUFDNUIsb0RBQTBCOztJQUMxQixrREFBd0I7O0lBQ3hCLHNEQUE4Qjs7SUFDOUIsb0RBQTZCOztJQUM3Qix5REFBK0I7O0lBQy9CLDZDQUFtQjs7SUFDbkIsNkNBQW1COztJQUNuQixxREFBMkI7O0lBQzNCLCtDQUF1Qjs7SUFDdkIsc0RBU0M7O0lBQ0QsZ0RBQW9EOztJQUNwRCxxREFBZ0Q7O0lBQ2hELDhDQUFXOztJQVVYLCtDQUFnRTs7SUFTaEUsdURBQTBFOztJQVMxRSx3REFBbUQ7O0lBUW5ELHlEQUE0Rjs7SUFDNUYsMERBQXNEOztJQUN0RCx3REFJRTs7Ozs7SUFJRixzREFBeUM7O0lBQ3pDLDZDQUdFOztJQUNGLG1EQUFnQjs7SUFDaEIsZ0RBQWE7O0lBQ2IsaURBQW1COztJQUNuQixpREFBYzs7SUFDZCxrREFBbUI7O0lBQ25CLDREQUF5Qjs7SUFDekIsMkNBT0U7O0lBQ0Ysc0RBQXdCOzs7OztJQUVaLHNEQUFvQzs7Ozs7SUFBRSxzREFBb0M7Ozs7O0lBQUUsK0NBQTZCOzs7OztJQUFFLHNEQUEyQzs7Ozs7SUFBRSxtRUFBOEQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBDb250ZW50Q2hpbGQsIFRlbXBsYXRlUmVmLCBBZnRlclZpZXdJbml0LCBWaWV3Q2hpbGQsIE9uRGVzdHJveSwgU2ltcGxlQ2hhbmdlcywgT25DaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFFkcFZpZXdDb21wb25lbnQsIFJlbmRlclNlcnZpY2UgfSBmcm9tICdAcWRwL3NwcmVhZCc7XHJcbmltcG9ydCB7IE5neEVjaGFydHNEaXJlY3RpdmUsIExjcEJpbmRpbmdEYXRhRGlyZWN0aXZlLCBGb3JtQmluZGluZ0RhdGFEaXJlY3RpdmUgfSBmcm9tICdAcWRwL2VjaGFydHMnO1xyXG5pbXBvcnQgeyBTY2hlbWFTZXJ2aWNlIH0gZnJvbSAnQHFkcC9pZGUtY21wJztcclxuaW1wb3J0IHsgRmlsdGVyU2VydmljZSB9IGZyb20gJ0Bnc3Atc3ZjL2ZpbHRlcmNvbmRpdGlvbic7XHJcbmltcG9ydCB7IEZpbHRlck1hbmFnZXJTZXJ2aWNlLCBQYXJhc01hcHBpbmdNYW5hZ2VyU2VydmljZSwgUnRmU2VydmljZXMsIFFEUENhY2hlVXRpbCB9IGZyb20gJ0BxZHAvY29tbW9uJztcclxuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAcWRwL2NvbW1vbic7XHJcbmltcG9ydCB7IFF1ZXJ5RnJhbWV3b3JrVG9vbGJhckNvbXBvbmVudCB9IGZyb20gJy4uL3FmLXRvb2xiYXIvcWYtdG9vbGJhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDb25kaXRpb25EaWFsb2dDb21wb25lbnQgfSBmcm9tICcuLi9jb25kaXRpb24tZGlhbG9nL2NvbmRpdGlvbi1kaWFsb2cuY29tcG9uZW50JztcclxuXHJcbmRlY2xhcmUgdmFyIGdzcGZyYW1ld29ya1NlcnZpY2U6IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncXVlcnktZnJhbWV3b3JrLWxheW91dCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3FmLWxheW91dC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcWYtbGF5b3V0LmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUXVlcnlGcmFtZXdvcmtMYXlvdXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcclxuICBASW5wdXQoKSBxdWVyeUlkOiBhbnk7XHJcbiAgQElucHV0KCkgZ3JvdXBUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgcW9NYW5hZ2VyQ29kZTogYW55O1xyXG4gIEBJbnB1dCgpIGNvbnRyb2xUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgcXVlcnlOYW1lOiBhbnk7XHJcbiAgQElucHV0KCkgaXNTaG93VG9vbGJhciA9IHRydWU7XHJcbiAgQElucHV0KCkgaXNNdWx0aUZvcm0gPSBmYWxzZTsgLy8g5piv5ZCm5bWM5YWl5byP6KGo5Y2VXHJcbiAgQElucHV0KCkgcXVlcnlSZWxhdGl2ZVVybDogYW55O1xyXG4gIEBJbnB1dCgpIHFvSWQ6IGFueTtcclxuICBASW5wdXQoKSB2b0lkOiBhbnk7XHJcbiAgQElucHV0KCkgdGVtcGxhdGVUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgaXNJbml0ID0gdHJ1ZTtcclxuICBASW5wdXQoKSB0b29sYmFyT3B0aW9uID0ge1xyXG4gICAgc2hvd1ByZVNjaGVtYTogdHJ1ZSxcclxuICAgIHNob3dTY2hlbWFNYW5hZ2VyOiB0cnVlLFxyXG4gICAgc2hvd0V4cG9ydDogdHJ1ZSxcclxuICAgIHNob3dSZUZyZXNoOiB0cnVlLFxyXG4gICAgc2hvd0ZpbHRlcjogdHJ1ZSxcclxuICAgIHNob3dQcmludDogdHJ1ZSxcclxuICAgIHNob3dDbGVhclNvcnQ6IHRydWUsXHJcbiAgICBzaG93Q2xlYXJDYWNoZTogdHJ1ZVxyXG4gIH1cclxuICBAQ29udGVudENoaWxkKCdxZHAtdmlldycpIHFkcFZpZXc6IFFkcFZpZXdDb21wb25lbnQ7XHJcbiAgdG9vbEJhckV2ZW50ID0gJ3Rvb2xCYXJFdmVudCcgKyBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgdGFiSWQ6IGFueTtcclxuXHJcbiAgZ2V0UWRwVmlldygpIHtcclxuICAgIGlmICh0aGlzLnFkcFZpZXcpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucWRwVmlldztcclxuICAgIH0gZWxzZSBpZiAoUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyB0aGlzLmNvbnRyb2xUeXBlICsgJ3FkcHZpZXcnKSkge1xyXG4gICAgICByZXR1cm4gUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyB0aGlzLmNvbnRyb2xUeXBlICsgJ3FkcHZpZXcnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoJ2xjcEJpbmRpbmdEYXRhJykgY2hhcnRzOiBMY3BCaW5kaW5nRGF0YURpcmVjdGl2ZTtcclxuICBnZXRDaGFydHMoKSB7XHJcbiAgICBpZiAodGhpcy5jaGFydHMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hhcnRzO1xyXG4gICAgfSBlbHNlIGlmIChRRFBDYWNoZVV0aWwuZ2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArICdsY3AtY2hhcnRzJykpIHtcclxuICAgICAgcmV0dXJuIFFEUENhY2hlVXRpbC5nZXRDYWNoZSh0aGlzLnRhYklkICsgdGhpcy5xdWVyeUlkICsgJ2xjcC1jaGFydHMnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoJ2Zvcm1CaW5kaW5nRGF0YScpIGZvcm1kYXRhc291cmNlOiBGb3JtQmluZGluZ0RhdGFEaXJlY3RpdmU7XHJcbiAgZ2V0Rm9ybURhdGFzb3VyY2UoKSB7XHJcbiAgICBpZiAodGhpcy5mb3JtZGF0YXNvdXJjZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5mb3JtZGF0YXNvdXJjZTtcclxuICAgIH0gZWxzZSBpZiAoUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyAnZm9ybS1jaGFydHMnKSkge1xyXG4gICAgICByZXR1cm4gUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyAnZm9ybS1jaGFydHMnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBJbnB1dCgpIGNvbmRpdGlvbkRpYWxvZzogQ29uZGl0aW9uRGlhbG9nQ29tcG9uZW50O1xyXG4gIGdldENvbmRpdGlvbkRpYWxvZygpIHtcclxuICAgIGlmICh0aGlzLmNvbmRpdGlvbkRpYWxvZykge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25EaWFsb2c7XHJcbiAgICB9IGVsc2UgaWYgKFFEUENhY2hlVXRpbC5nZXRDYWNoZSh0aGlzLnRhYklkICsgJ2FkdmFuY2VUZW1wbGF0ZS1jb25kaXRpb24tZGlhbG9nJykpIHtcclxuICAgICAgcmV0dXJuIFFEUENhY2hlVXRpbC5nZXRDYWNoZSh0aGlzLnRhYklkICsgJ2FkdmFuY2VUZW1wbGF0ZS1jb25kaXRpb24tZGlhbG9nJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIEBWaWV3Q2hpbGQoUXVlcnlGcmFtZXdvcmtUb29sYmFyQ29tcG9uZW50KSB0b29sYmFyQ29tcG9uZW50OiBRdWVyeUZyYW1ld29ya1Rvb2xiYXJDb21wb25lbnQ7XHJcbiAgQE91dHB1dCgpIGNvbnRlbnRTaXplQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQElucHV0KCkgZm9ybVByaW50T3B0aW9uID0ge1xyXG4gICAgaXNTaG93Rm9ybVByaW50OiBmYWxzZSxcclxuICAgIHByaW50QkVJZDogJycsXHJcbiAgICBwcmludEZvcm1JZEZpZWxkOiAnJ1xyXG4gIH07XHJcbiAgLyoqXHJcbiAgICog5qih5p2/5L2c5Li65Y+C5pWwXHJcbiAgICovXHJcbiAgQElucHV0KCkgaW5wdXRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICBzaXplID0ge1xyXG4gICAgaGVpZ2h0OiAnNTAwcHgnLFxyXG4gICAgd2lkdGg6ICczMDBweCdcclxuICB9O1xyXG4gIHNjaGVtYUluZm86IGFueTtcclxuICBjb2xMaXN0OiBhbnk7XHJcbiAgcGFnZUluZm86IGFueSA9IHt9O1xyXG4gIHNjaGVtYUlkOiBhbnk7XHJcbiAgcGFnZUluZGV4OiBhbnkgPSAxO1xyXG4gIGNvbmRpdGlvbkV4cHJlc3Npb246IGFueTtcclxuICBjbzogYW55ID0ge1xyXG4gICAgTm9kZVR5cGU6ICdRdWVyeU5vZGUnLFxyXG4gICAgSXNCZTogdHJ1ZSxcclxuICAgIENvbnRhaW5FbGVtZW50czogW10sXHJcbiAgICBDb2RlOiAnUXVlcnlOb2RlJyxcclxuICAgIE5hbWU6ICdRdWVyeU5kb2UnLFxyXG4gICAgQml6RW50aXR5SUQ6IEV2ZW50QnVzLmd1aWQoKVxyXG4gIH07XHJcbiAgc3Vic2NyaXB0aW9uczogYW55ID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NoZW1hU2VydmljZTogU2NoZW1hU2VydmljZSwgcHJpdmF0ZSByZW5kZXJTZXJ2aWNlOiBSZW5kZXJTZXJ2aWNlLCBwcml2YXRlIGZpbHRlcjogRmlsdGVyU2VydmljZSwgcHJpdmF0ZSBmaWx0ZXJTZXJ2aWNlOiBGaWx0ZXJNYW5hZ2VyU2VydmljZSwgcHJpdmF0ZSBwYXJhc01hcHBpbmdNYW5hZ2VyU2VydmljZTogUGFyYXNNYXBwaW5nTWFuYWdlclNlcnZpY2UpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50YWJJZCA9IFJ0ZlNlcnZpY2VzLmdldFRhYklkKHRoaXMucXVlcnlJZCk7XHJcblxyXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLnNjaGVtYVNlcnZpY2Uuc2NoZW1hSW5mby5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgY29uc3Qgc2NoZW1hSW5mb0FsbCA9IE9iamVjdC5hc3NpZ24oe30sIHZhbHVlKTtcclxuICAgICAgICAgIGlmIChzY2hlbWFJbmZvQWxsLnNjaGVtYUxpc3QgJiYgc2NoZW1hSW5mb0FsbC5zY2hlbWFMaXN0W3RoaXMucXVlcnlJZF0pIHtcclxuICAgICAgICAgICAgc2NoZW1hSW5mb0FsbC5zY2hlbWFMaXN0ID0gc2NoZW1hSW5mb0FsbC5zY2hlbWFMaXN0W3RoaXMucXVlcnlJZF07XHJcbiAgICAgICAgICAgIGlmICghc2VsZi5zY2hlbWFJZCkge1xyXG4gICAgICAgICAgICAgIGlmIChzY2hlbWFJbmZvQWxsLmlzRGVmYXVsdFNjaGVtYSAmJiBzY2hlbWFJbmZvQWxsLmlzRGVmYXVsdFNjaGVtYS5pZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbml0Q29sTGlzdERhdGEoc2NoZW1hSW5mb0FsbC5pc0RlZmF1bHRTY2hlbWEuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLnNjaGVtYUlkICE9PSAnMScgJiYgc2VsZi5zY2hlbWFJZCAhPT0gJ3ByZWZhYicgJiYgc2VsZi5zY2hlbWFJZCAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIHNlbGYuc2NoZW1hSWQgIT09ICdwZXJzb25fc2NoZW1hJykge1xyXG4gICAgICAgICAgICAgIHNlbGYuaW5pdENvbExpc3REYXRhKHNjaGVtYUluZm9BbGwuc2NoZW1hTGlzdFtzZWxmLnNjaGVtYUlkXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjaGVtYUluZm9BbGwuc2NoZW1hTGlzdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHNlbGYuaW5pdENvbExpc3REYXRhKHNjaGVtYUluZm9BbGwucHJlU2NoZW1hLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNlbGYuc2NoZW1hSW5mbyA9IHNjaGVtYUluZm9BbGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZSk7IFxyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLnNjaGVtYVNlcnZpY2UuY29sTGlzdC5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICBzZWxmLmNvbExpc3QgPSB2YWx1ZTtcclxuICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuaW5pdENvbExpc3REYXRhKHZhbHVlLCAnY29sJyk7XHJcbiAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIC8vIOWmguaenOacieetm+mAieaWueahiFxyXG4gICAgaWYgKHRoaXMuZmlsdGVyU2VydmljZSAmJiB0aGlzLmZpbHRlclNlcnZpY2UuaXNGaWx0ZXJRRFApIHtcclxuICAgICAgLy8gdGhpcy5maWx0ZXJTZXJ2aWNlLmlzRmlsdGVyUURQLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLmZpbHRlclNlcnZpY2UuaXNGaWx0ZXJRRFAuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYudG9vbGJhckNvbXBvbmVudCAmJiBzZWxmLnRvb2xiYXJDb21wb25lbnQucGFnaW5hdGlvbkNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgIHNlbGYudG9vbGJhckNvbXBvbmVudC5wYWdpbmF0aW9uQ29tcG9uZW50LmluaXRQYWdlSW5mbygpO1xyXG4gICAgICAgICAgICAgIHNlbGYucGFnZUluZGV4ID0gc2VsZi50b29sYmFyQ29tcG9uZW50LnBhZ2luYXRpb25Db21wb25lbnQucGFnaW5hdGlvbi5wYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgIHNlbGYucGFnZUluZm8gPSBzZWxmLnRvb2xiYXJDb21wb25lbnQucGFnaW5hdGlvbkNvbXBvbmVudC5wYWdpbmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYucmVmcmVzaCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMgJiYgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHN1YnNjcmlwdGlvbiBvZiB0aGlzLnN1YnNjcmlwdGlvbnMpIHtcclxuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2Nyb3NzdGFiJykge1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLnNjaGVtYVNlcnZpY2UucGFnZUluZm9DaGFuZ2Uuc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgICBzZWxmLnBhZ2VJbmZvID0gdmFsdWU7XHJcbiAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIC8vIGlmICh0aGlzLnFvSWQpIHtcclxuICAgIGlmICh0aGlzLmlzSW5pdCA9PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZmlsdGVyU2VydmljZS5nZXRGaWx0ZXIoc2VsZi5xb01hbmFnZXJDb2RlID8gc2VsZi5xb01hbmFnZXJDb2RlIDogc2VsZi5xdWVyeUlkLCBzZWxmLnF1ZXJ5SWQsIHNlbGYucXVlcnlSZWxhdGl2ZVVybCwgMSwgdGhpcy5ncm91cFR5cGUpLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgc2VsZi5jb25kaXRpb25FeHByZXNzaW9uID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5maWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgLy8gdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc2VsZi5wYXJhc01hcHBpbmdNYW5hZ2VyU2VydmljZS5nZXRNZXRhRGF0YUluZm9CeUlkKHNlbGYucW9JZCkuc3Vic2NyaWJlKHZvSW5mbyA9PiB7XHJcbiAgICAvLyAgIGlmICh2b0luZm8pIHtcclxuICAgIC8vICAgICBzZWxmLmNvID0gSlNPTi5wYXJzZSh2b0luZm8uY29udGVudCkuUXVlcnlOb2RlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9KSk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNNdWx0aUZvcm0pIHtcclxuICAgICAgY29uc3QgZGl2U2hvd1Rvb2xCYXJEb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRvb2xCYXJFdmVudCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGRpdlNob3dUb29sQmFyRG9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHtcclxuICAgICAgICB0aGlzLmlzU2hvd1Rvb2xiYXIgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgICAgZGl2U2hvd1Rvb2xCYXJEb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dUb29sYmFyID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0Q29sTGlzdERhdGEobmV3VmFsdWU6IGFueSwgdHlwZT86IGFueSkge1xyXG4gICAgbmV3VmFsdWUuZm9yRWFjaChjb2wgPT4ge1xyXG4gICAgICB0aGlzLnJlY3Vyc2l2ZUluaXRDb2xMaXN0RGF0YShudWxsLCBjb2wsIHR5cGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlY3Vyc2l2ZUluaXRDb2xMaXN0RGF0YShjaGlsZHJlbjogYW55LCBjb2w6IGFueSwgdHlwZT86IGFueSkge1xyXG4gICAgaWYgKGNvbCkge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuY28uQ29udGFpbkVsZW1lbnRzLmZpbmRJbmRleCgoaXRlbTogYW55KSA9PiBpdGVtLkNvZGUgPT09IGNvbC5iaW5kRmllbGQpO1xyXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHt9O1xyXG4gICAgICAgIG5vZGVbJ0lEJ10gPSBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgICAgICAgbm9kZVsnQ29kZSddID0gY29sLmJpbmRGaWVsZDtcclxuICAgICAgICBub2RlWydMYWJlbElEJ10gPSBjb2wuYmluZEZpZWxkO1xyXG4gICAgICAgIG5vZGVbJ01EYXRhVHlwZSddID0gdGhpcy5nZXREYXRhVHlwZShjb2wudHlwZSk7XHJcbiAgICAgICAgbm9kZVsnTm9kZVR5cGUnXSA9ICdRdWVyeVByb3BlcnR5JztcclxuICAgICAgICBub2RlWydOYW1lJ10gPSBjb2wubmFtZTtcclxuICAgICAgICB0aGlzLmNvLkNvbnRhaW5FbGVtZW50cy5wdXNoKG5vZGUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgIT09ICdjb2wnKSB7XHJcbiAgICAgICAgdGhpcy5jby5Db250YWluRWxlbWVudHNbaW5kZXhdWydOYW1lJ10gPSBjb2wubmFtZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sLmNoaWxkTGlzdCAmJiBjb2wuY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMucmVjdXJzaXZlSW5pdENvbExpc3REYXRhKGNvbC5jaGlsZExpc3QsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjaGlsZHJlbi5mb3JFYWNoKChjOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY28uQ29udGFpbkVsZW1lbnRzLmZpbmRJbmRleCgoaXRlbTogYW55KSA9PiBpdGVtLkNvZGUgPT09IGMuYmluZEZpZWxkKTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICBjb25zdCBub2RlID0ge307XHJcbiAgICAgICAgICBub2RlWydJRCddID0gRXZlbnRCdXMuZ3VpZCgpO1xyXG4gICAgICAgICAgbm9kZVsnQ29kZSddID0gYy5iaW5kRmllbGQ7XHJcbiAgICAgICAgICBub2RlWydMYWJlbElEJ10gPSBjLmJpbmRGaWVsZDtcclxuICAgICAgICAgIG5vZGVbJ01EYXRhVHlwZSddID0gdGhpcy5nZXREYXRhVHlwZShjLnR5cGUpO1xyXG4gICAgICAgICAgbm9kZVsnTm9kZVR5cGUnXSA9ICdRdWVyeVByb3BlcnR5JztcclxuICAgICAgICAgIG5vZGVbJ05hbWUnXSA9IGMubmFtZTtcclxuICAgICAgICAgIHRoaXMuY28uQ29udGFpbkVsZW1lbnRzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlICE9PSAnY29sJykge1xyXG4gICAgICAgICAgdGhpcy5jby5Db250YWluRWxlbWVudHNbaW5kZXhdWydOYW1lJ10gPSBjLm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjLmNoaWxkTGlzdCAmJiBjLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMucmVjdXJzaXZlSW5pdENvbExpc3REYXRhKGMuY2hpbGRMaXN0LCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgZm9yIChjb25zdCBjaGFuZ2VOYW1lIGluIGNoYW5nZXMpIHtcclxuICAgICAgY29uc3QgbmV3VmFsdWUgPSBjaGFuZ2VzW2NoYW5nZU5hbWVdLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgaWYgKG5ld1ZhbHVlICE9PSBudWxsICYmIG5ld1ZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICB0aGlzLnRhYklkID0gUnRmU2VydmljZXMuZ2V0VGFiSWQobmV3VmFsdWUpO1xyXG4gICAgICAgIHN3aXRjaCAoY2hhbmdlTmFtZSkge1xyXG4gICAgICAgICAgY2FzZSAncXVlcnlJZCc6XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIFFEUENhY2hlVXRpbC5zZXRDYWNoZSh0aGlzLnRhYklkICsgJ3F1ZXJ5SWQnLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdxb01hbmFnZXJDb2RlJzpcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgUURQQ2FjaGVVdGlsLnNldENhY2hlKHRoaXMudGFiSWQgKyAncW9NYW5hZ2VyQ29kZScsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2NvbnRyb2xUeXBlJzpcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgUURQQ2FjaGVVdGlsLnNldENhY2hlKHRoaXMudGFiSWQgKyAnY29udHJvbFR5cGUnLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdxdWVyeVJlbGF0aXZlVXJsJzpcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgUURQQ2FjaGVVdGlsLnNldENhY2hlKHRoaXMudGFiSWQgKyAncXVlcnlSZWxhdGl2ZVVybCcsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3ZvSWQnOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBRRFBDYWNoZVV0aWwuc2V0Q2FjaGUodGhpcy50YWJJZCArICd2b0lkJywgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLmdldFFkcFZpZXcoKS5zaGVldENoYW5nZWQuc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgc2VsZi5ncm91cFR5cGUgPSB2YWx1ZTtcclxuICAgIH0pKTtcclxuICAgIGlmICh0aGlzLmdldENvbmRpdGlvbkRpYWxvZygpKSB7IC8vIOeUn+aIkOWei+mrmOe6p+afpeivouihqOWNleWIhuaUr1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLmdldENvbmRpdGlvbkRpYWxvZygpLnF1ZXJ5RXZlbnQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09IDEpIHtcclxuICAgICAgICAgIHNlbGYuZ2V0UWRwVmlldygpLmluaXRRZHBWaWV3KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID4gMSkge1xyXG4gICAgICAgICAgc2VsZi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZ2V0Q29uZGl0aW9uRGlhbG9nKCkuZGlhbG9nSW5pdEV2ZW50LnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmIChzZWxmLnRlbXBsYXRlVHlwZSA9PT0gJ3FkcEFkdmFuY2VkVGVtcGxhdGUnKSB7XHJcbiAgICAgICAgICBzZWxmLmdldENvbmRpdGlvbkRpYWxvZygpLmhhbmRsZURpYWxvZ1Nob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pKTtcclxuICAgIH0gZWxzZSB7IC8vIOino+aekOWei+mrmOe6p+afpeivouihqOWNleWIhuaUr1xyXG4gICAgICBFdmVudEJ1cy5yZWdpc3Rlcih0aGlzLnRhYklkICsgJ2FkdmFuY2VUZW1wbGF0ZS1jb25kaXRpb24tZGlhbG9nLXF1ZXJ5RXZlbnQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhID09PSAxKSB7XHJcbiAgICAgICAgICBzZWxmLmdldFFkcFZpZXcoKS5pbml0UWRwVmlldygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA+IDEpIHtcclxuICAgICAgICAgIHNlbGYucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdGhpcy50YWJJZCk7XHJcbiAgICAgIEV2ZW50QnVzLnJlZ2lzdGVyKHRoaXMudGFiSWQgKyAnYWR2YW5jZVRlbXBsYXRlLWNvbmRpdGlvbi1kaWFsb2ctZGlhbG9nSW5pdEV2ZW50JywgKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoc2VsZi50ZW1wbGF0ZVR5cGUgPT09ICdxZHBBZHZhbmNlZFRlbXBsYXRlJykge1xyXG4gICAgICAgICAgc2VsZi5nZXRDb25kaXRpb25EaWFsb2coKS5oYW5kbGVEaWFsb2dTaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0aGlzLnRhYklkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVNjaGVtYVNlbGVjdGVkKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc2NoZW1hSWQgPSBpZDtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICBpZiAodGhpcy5nZXRRZHBWaWV3KCkpIHtcclxuICAgICAgICB0aGlzLmdldFFkcFZpZXcoKS5pbml0U3ByZWFkKHRoaXMucXVlcnlJZCwgaWQsIHRoaXMuY29udHJvbFR5cGUsIHRoaXMucW9NYW5hZ2VyQ29kZSwgdGhpcy5wYWdlSW5kZXgsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLmdyb3VwVHlwZSwgdGhpcy52b0lkLCBudWxsLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0Q2hhcnRzKCkpIHtcclxuICAgICAgICB0aGlzLmdldENoYXJ0cygpLnJlbmRlcihpZCwgdGhpcy5nZXRDaGFydHNPcHRpb24oaWQpLCAnJywgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdldEZvcm1EYXRhc291cmNlKCkpIHtcclxuICAgICAgICB0aGlzLmdldEZvcm1EYXRhc291cmNlKCkuY2hhcnRzLnNldE9wdGlvbih0aGlzLmdldENoYXJ0c09wdGlvbih0aGlzLnNjaGVtYUlkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGFnZUluZGV4ID0gMTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUJlZm9yZUNsb3NlKGlkOiBhbnkpIHtcclxuICAgIHRoaXMuc2NoZW1hSWQgPSBpZDtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICBpZiAodGhpcy5nZXRRZHBWaWV3KCkpIHtcclxuICAgICAgICB0aGlzLmdldFFkcFZpZXcoKS5pbml0U3ByZWFkKHRoaXMucXVlcnlJZCwgaWQsIHRoaXMuY29udHJvbFR5cGUsIHRoaXMucW9NYW5hZ2VyQ29kZSwgdGhpcy5wYWdlSW5kZXgsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLmdyb3VwVHlwZSwgdGhpcy52b0lkLCBudWxsLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0Q2hhcnRzKCkpIHtcclxuICAgICAgICB0aGlzLmdldENoYXJ0cygpLnJlbmRlcihpZCwgdGhpcy5nZXRDaGFydHNPcHRpb24oaWQpLCAnJywgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdldEZvcm1EYXRhc291cmNlKCkpIHtcclxuICAgICAgICB0aGlzLmdldEZvcm1EYXRhc291cmNlKCkuY2hhcnRzLnNldE9wdGlvbih0aGlzLmdldENoYXJ0c09wdGlvbihpZCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhZ2VJbmRleCA9IHRoaXMucGFnZUluZGV4ID8gdGhpcy5wYWdlSW5kZXggOiAxO1xyXG4gIH1cclxuXHJcbiAgcmVmcmVzaCgpIHtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICBpZiAodGhpcy5nZXRRZHBWaWV3KCkpIHtcclxuICAgICAgICB0aGlzLmdldFFkcFZpZXcoKS5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgICAgICB0aGlzLmdldFFkcFZpZXcoKS5pbml0U3ByZWFkKHRoaXMucXVlcnlJZCwgdGhpcy5zY2hlbWFJZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5nZXRDaGFydHMoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhcnRzKCkucmVuZGVyKHRoaXMuc2NoZW1hSWQsIHRoaXMuZ2V0Q2hhcnRzT3B0aW9uKHRoaXMuc2NoZW1hSWQpLCAnJywgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdldEZvcm1EYXRhc291cmNlKCkpIHtcclxuICAgICAgICB0aGlzLmdldEZvcm1EYXRhc291cmNlKCkuY2hhcnRzLnNldE9wdGlvbih0aGlzLmdldENoYXJ0c09wdGlvbih0aGlzLnNjaGVtYUlkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXggPyB0aGlzLnBhZ2VJbmRleCA6IDE7XHJcbiAgfVxyXG5cclxuICBjbGVhckNhY2hlKCkge1xyXG4gICAgdGhpcy5yZW5kZXJTZXJ2aWNlLmNsZWFyQ2FjaGUodGhpcy5xdWVyeUlkLCB0aGlzLnNjaGVtYUlkLCB0aGlzLmNvbnRyb2xUeXBlLCB0aGlzLnFvTWFuYWdlckNvZGUsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLmdyb3VwVHlwZSwgdGhpcy52b0lkKTtcclxuICB9XHJcblxyXG4gIGNsZWFyU29ydCgpIHtcclxuICAgIHRoaXMuZ2V0UWRwVmlldygpLmhhbmRsZUNsZWFyU29ydCgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUGFnZUNoYW5nZShwYWdlSW5mbzogYW55KSB7XHJcbiAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY3Jvc3N0YWInKSB7XHJcbiAgICAgIHRoaXMuZ2V0UWRwVmlldygpLnBhZ2VJbmRleCA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICB0aGlzLmdldFFkcFZpZXcoKS5pbml0U3ByZWFkKHRoaXMucXVlcnlJZCwgdGhpcy5zY2hlbWFJZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5nZXRRZHBWaWV3KCkuaGFuZGxlQ3Jvc3N0YWJQYWdlQ2hhbmdlKHRoaXMucGFnZUluZGV4LCBwYWdlSW5mby5wYWdlU2l6ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVFeHBvcnRFeGNlbChldmVudERhdGE6IGFueSkge1xyXG4gICAgdGhpcy5nZXRRZHBWaWV3KCkuZXhwb3J0RXhjZWwodGhpcy5xdWVyeUlkLCB0aGlzLnNjaGVtYUlkLCB0aGlzLmNvbnRyb2xUeXBlLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5xb01hbmFnZXJDb2RlLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbiwgdGhpcy5ncm91cFR5cGUsIHRoaXMudm9JZCwgdGhpcy5wYWdlSW5mby50b3RhbENvdW50LCBldmVudERhdGEpO1xyXG4gIH1cclxuXHJcbiAgcGRmRXhwb3J0RXZlbnQoZXZlbnREYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuZ2V0UWRwVmlldygpLnBkZkV4cG9ydEV2ZW50KHRoaXMucXVlcnlJZCwgdGhpcy5zY2hlbWFJZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCBldmVudERhdGEsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5ncm91cFR5cGUsIHRoaXMudm9JZCk7XHJcbiAgfVxyXG5cclxuICBwcmludFByZXZpZXcoZXZlbnREYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuZ2V0UWRwVmlldygpLnByaW50UHJlVmlldyh0aGlzLnF1ZXJ5SWQsIHRoaXMuc2NoZW1hSWQsIHRoaXMuY29udHJvbFR5cGUsIHRoaXMucW9NYW5hZ2VyQ29kZSwgZXZlbnREYXRhLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbiwgdGhpcy5wYWdlSW5kZXgsIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemVkKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuc2l6ZS5oZWlnaHQgPSBldmVudC5uZXdIZWlnaHQgKyAncHgnO1xyXG4gICAgdGhpcy5zaXplLndpZHRoID0gKGV2ZW50Lm5ld1dpZHRoID8gKGV2ZW50Lm5ld1dpZHRoIC0gMTUpIDogMCkgKyAncHgnO1xyXG4gICAgdGhpcy5jb250ZW50U2l6ZUNoYW5nZS5lbWl0KE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2l6ZSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDaGFydHNPcHRpb24oc2NoZW1hSWQ6IGFueSkge1xyXG4gICAgbGV0IGNoYXJ0c09wdGlvbjogYW55ID0ge307XHJcbiAgICBpZiAoc2NoZW1hSWQgPT09ICdwcmVmYWInKSB7XHJcblxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjaGVtYUluZm8gJiYgdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3QgJiYgdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2NoZW1hSWRdKSB7XHJcbiAgICAgIGNoYXJ0c09wdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2NoZW1hSW5mby5zY2hlbWFMaXN0W3NjaGVtYUlkXS5zY2hlbWFWYWx1ZS5jaGFydHNTdHlsZSwgdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2NoZW1hSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNoYXJ0c09wdGlvbi5zZXJpZXMgJiYgdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2NoZW1hSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1R5cGUuc2VyaWVzLnR5cGUpIHtcclxuICAgICAgY2hhcnRzT3B0aW9uLnNlcmllcy50eXBlID0gdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2NoZW1hSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1R5cGUuc2VyaWVzLnR5cGU7XHJcbiAgICAgIGlmIChjaGFydHNPcHRpb24uc2VyaWVzLnR5cGUgIT09ICdsaW5lMScpIHtcclxuICAgICAgICBkZWxldGUgY2hhcnRzT3B0aW9uLnNlcmllcy5hcmVhU3R5bGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hhcnRzT3B0aW9uLnNlcmllcy5hcmVhU3R5bGUgPSB7fTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNoYXJ0c09wdGlvbjtcclxuICB9XHJcblxyXG4gIGZpbHRlckNvbmRpdGlvbigpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuY28gJiYgdGhpcy5jby5Db250YWluRWxlbWVudHMgJiYgdGhpcy5jby5Db250YWluRWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuZmlsdGVyLmFkZENvbW1vbk9iamVjdCh0aGlzLmNvKTtcclxuICAgICAgdGhpcy5maWx0ZXIuYWRkSW5qZWN0ZWRFbnRpdHkodGhpcy5jby5Db2RlLCAnQ29tbW9uT2JqZWN0Jyk7XHJcbiAgICAgIC8vIGlmICh0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24pIHtcclxuICAgICAgdGhpcy5maWx0ZXIuYWRkRmlsdGVyQ29uZGl0aW9uKHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbik7XHJcbiAgICAgIC8vIH1cclxuICAgICAgdGhpcy5maWx0ZXIuYnVpbGRFeHByZXNzaW9uKCkudGhlbihidWlsZGVkRXhwcmVzc2lvbiA9PiB7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uID0gYnVpbGRlZEV4cHJlc3Npb247XHJcbiAgICAgICAgaWYgKGJ1aWxkZWRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXHJcbiAgICAgICAgICBjb25zdCBmaWx0ZXIgPSB7IElkOiBFdmVudEJ1cy5ndWlkKCksIGZpbHRlcjogYnVpbGRlZEV4cHJlc3Npb24sIHF1ZXJ5aWQ6IHRoaXMucXVlcnlJZCwgZGF0YXNvdXJjZWlkOiB0aGlzLnFvTWFuYWdlckNvZGUgPyB0aGlzLnFvTWFuYWdlckNvZGUgOiB0aGlzLnF1ZXJ5SWQsIHF1ZXJ5VHlwZTogMSB9O1xyXG4gICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc2VsZi5maWx0ZXJTZXJ2aWNlLnNhdmVGaWx0ZXIoZmlsdGVyLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwpXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZGF0YSA9PiBzZWxmLnJlZnJlc2goKSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLmZpbHRlclNlcnZpY2UuZGVsZXRlRmlsdGVyKHNlbGYucW9NYW5hZ2VyQ29kZSA/IHNlbGYucW9NYW5hZ2VyQ29kZSA6IHNlbGYucXVlcnlJZCwgc2VsZi5xdWVyeUlkLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwsIDEpLnN1YnNjcmliZShkYXRhID0+IHNlbGYucmVmcmVzaCgpKSk7XHJcbiAgICAgICAgICB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24gPSBudWxsO1xyXG4gICAgICAgICAgaWYgKHNlbGYuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZ2V0UWRwVmlldygpLmNvbmRpdGlvbkV4cHJlc3Npb24gPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBleHBlbmRDb2xsYXBzZUxldmVsKCRldmVudCkge1xyXG4gICAgY29uc3QgbWF4TGV2ZWwgPSB0aGlzLmdldFFkcFZpZXcoKS5zcHJlYWQuZ2V0QWN0aXZlU2hlZXQoKS5yb3dPdXRsaW5lcy5nZXRNYXhMZXZlbCgpO1xyXG4gICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBtYXhMZXZlbDsgaW5kZXgrKykge1xyXG4gICAgICB0aGlzLmdldFFkcFZpZXcoKS5zcHJlYWQuZ2V0QWN0aXZlU2hlZXQoKS5yb3dPdXRsaW5lcy5leHBhbmQoaW5kZXgsICRldmVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmdldFFkcFZpZXcoKS5zcHJlYWQuZ2V0QWN0aXZlU2hlZXQoKS5yZXN1bWVQYWludCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXREYXRhVHlwZSh0eXBlOiBhbnkpIHtcclxuICAgIGxldCByZXN1bHQgPSAnU3RyaW5nJztcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdTdHJpbmcnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd0ZXh0JzpcclxuICAgICAgICByZXN1bHQgPSAnVGV4dCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2ludGVnZXInOlxyXG4gICAgICBjYXNlICdpbnQnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdJbnRlZ2VyJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGVjaW1hbCc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ0RlY2ltYWwnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdib29sZWFuJzpcclxuICAgICAgICByZXN1bHQgPSAnQm9vbGVhbic7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2RhdGUnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdEYXRlJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGF0ZVRpbWUnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdEYXRlVGltZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ0JpbmFyeSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG4iXX0=