!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@qdp/spread"),require("@qdp/localize"),require("@farris/ui-messager"),require("@farris/devkit"),require("rxjs"),require("@ecp-caf/caf-common"),require("@farris/command-services"),require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@farris/ui-flex-layout"),require("@farris/ui-dropdown"),require("@farris/ui-dialog"),require("@farris/ui-input-group"),require("@farris/ui-notify"),require("@farris/ui-perfect-scrollbar"),require("@farris/ui-treetable"),require("@qdp/ide-cmp"),require("@gsp-svc/filtercondition"),require("@qdp/condition-schema"),require("@qdp/common"),require("@gsp-svc/cloudprint")):"function"==typeof define&&define.amd?define("@qdp/query-framework",["exports","@qdp/spread","@qdp/localize","@farris/ui-messager","@farris/devkit","rxjs","@ecp-caf/caf-common","@farris/command-services","@angular/core","@angular/common","@angular/forms","@farris/ui-flex-layout","@farris/ui-dropdown","@farris/ui-dialog","@farris/ui-input-group","@farris/ui-notify","@farris/ui-perfect-scrollbar","@farris/ui-treetable","@qdp/ide-cmp","@gsp-svc/filtercondition","@qdp/condition-schema","@qdp/common","@gsp-svc/cloudprint"],t):t((e.qdp=e.qdp||{},e.qdp["query-framework"]={}),e.spread,e.localize,e.uiMessager,e.devkit,e.rxjs,e.cafCommon,e.commandServices,e.ng.core,e.ng.common,e.ng.forms,e.uiFlexLayout,e.uiDropdown,e.uiDialog,e.uiInputGroup,e.uiNotify,e.uiPerfectScrollbar,e.uiTreetable,e.ideCmp,e.filtercondition,e.conditionSchema,e.common$1,e.cloudprint)}(this,function(e,t,a,n,r,o,s,c,M,i,l,u,g,d,D,p,h,N,y,T,m,w,I){"use strict";function z(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function j(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,a=i.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(i=a["return"])&&i.call(a)}finally{if(r)throw r.error}}return o}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e}var f=function(){function e(){this.pagination={pageIndex:1,pageSize:10,totalPage:0},this.isDisablePreBtn=!1,this.isDisableNextBtn=!1,this.isEnable=!0,this.totalCount=21,this.pageSize=10,this.pageIndex=1,this.pageChange=new M.EventEmitter}return e.prototype.ngOnInit=function(){this.initPageInfo()},e.prototype.ngOnChanges=function(e){for(var t in e){var i=e[t].currentValue;if(null!=i)switch(t){case"schemaInfo":break;case"pageInfo":if(0===i.pageSize)return void(this.isEnable=!1);this.isEnable=!0,this.pagination.pageIndex=this.pageIndex=i.pageIndex,this.pagination.pageSize=this.pageSize=i.pageSize,this.pagination.totalPage=i.pageCount,this.totalCount=i.totalCount,this.initPageInfo()}}},e.prototype.initPageInfo=function(){var e=0;e=this.totalCount<=this.pageSize?1:0<this.totalCount%this.pageSize?Math.ceil(this.totalCount/this.pageSize):this.totalCount/this.pageSize,this.pagination={pageIndex:this.pageIndex,totalPage:e},this.isDisablePreBtn=1===this.pagination.pageIndex,this.isDisableNextBtn=this.pagination.pageIndex===this.pagination.totalPage,this.isEnable||(this.isDisablePreBtn=this.isDisableNextBtn=!this.isEnable)},e.prototype.handlePreBtnClick=function(e){switch(e){case"0":this.pagination.pageIndex=1;break;case"1":this.pagination.pageIndex-=1}this.isDisablePreBtn=1===this.pagination.pageIndex,this.isDisableNextBtn=this.pagination.pageIndex===this.pagination.totalPage,this.pageChange.emit(this.pagination)},e.prototype.handleNextBtnClick=function(e){switch(e){case"0":this.pagination.pageIndex=this.pagination.totalPage;break;case"1":this.pagination.pageIndex+=1}this.isDisablePreBtn=1===this.pagination.pageIndex,this.isDisableNextBtn=this.pagination.pageIndex===this.pagination.totalPage,this.pageChange.emit(this.pagination)},e.decorators=[{type:M.Component,args:[{selector:"query-framework-pagination",template:'<nav *ngIf="isEnable" aria-label="Page navigation">\r\n  <ul class="pagination p-0 pr-1">\r\n    <li class="page-item">\r\n      <span class="page-link border-0 w-100">{{localizePageInfo?.totalPreInfo}}{{totalCount}}{{localizePageInfo?.totalEndInfo}}</span>\r\n    </li>\r\n    <li class="page-item ml-0" [class.disabled]="isDisablePreBtn">\r\n      <a href="javascript:void(0);" (click)="handlePreBtnClick(\'0\')" tabindex="-1" class="page-link border-0">\r\n        <span class="f-icon f-icon-seek-w" aria-label="">\r\n        </span>\r\n      </a>\r\n    </li>\r\n    <li class="page-item" [class.disabled]="isDisablePreBtn">\r\n      <a href="javascript:void(0);" (click)="handlePreBtnClick(\'1\')" tabindex="-1" class="page-link border-0">\r\n        <span class="f-icon f-icon-arrow-w" aria-label="">\r\n        </span>\r\n      </a>\r\n    </li>\r\n    <li class="page-item">\r\n      <span class="page-link border-0 w-100">{{pagination.pageIndex}}/{{pagination.totalPage?pagination.totalPage:0}}</span>\r\n    </li>\r\n    <li class="page-item" [class.disabled]="isDisableNextBtn">\r\n      <a href="javascript:void(0);" (click)="handleNextBtnClick(\'1\')" tabindex="-1" class="page-link border-0">\r\n        <span class="f-icon f-icon-arrow-e" aria-label="">\r\n        </span>\r\n      </a>\r\n    </li>\r\n    <li class="page-item" [class.disabled]="isDisableNextBtn">\r\n      <a href="javascript:void(0);" (click)="handleNextBtnClick(\'0\')" tabindex="-1" class="page-link border-0">\r\n        <span class="f-icon f-icon-seek-e" aria-label="">\r\n        </span>\r\n      </a>\r\n    </li>\r\n  </ul>\r\n</nav>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[]},e.propDecorators={pageInfo:[{type:M.Input}],localizePageInfo:[{type:M.Input}],pageChange:[{type:M.Output}]},e}(),L=function(){function e(e,t,i){this.cloudprintService=e,this.cacheservice=t,this.injector=i,this.isShowToolbar=!0,this.schemaSelected=new M.EventEmitter,this.dialogBeforeClose=new M.EventEmitter,this.pageChange=new M.EventEmitter,this.exportExcel=new M.EventEmitter,this.printIntegration=new M.EventEmitter,this.printPreview=new M.EventEmitter,this.refreshEvent=new M.EventEmitter,this.filterCondition=new M.EventEmitter,this.clearCache=new M.EventEmitter,this.expendCollapseLevel=new M.EventEmitter,this.clearSort=new M.EventEmitter,this.showSchemaManager=!0,this.showExport=!0,this.showReFresh=!0,this.showFilter=!0,this.showPrint=!0,this.showClearSort=!0,this.showClearCache=!0,this.showPreSchema=!0,this.formPrintOption={isShowFormPrint:!1,printBEId:"",printFormIdField:"",dim1:"",dim2:""},this.isShowMore=!1,this.isClickShowMore=!1,this.svgShuaxin=!0,this.svgFilter=!0,this.svgDimesion=!0,this.svgClearCache=!0,this.svgPrint=!0,this.isExpand=!1,this.printShow=!1,this.cprintService=this.cloudprintService,this.injector&&(this.localizeService=this.injector.get(a.LocalizeService),this.integrationPrintService=new w.IntegrationPrintService(this.cloudprintService),this.msgService=this.injector.get(n.MessagerService),this.cache=this.injector.get(s.CacheService),this.localizePageInfo=this.localizeService.getValue("queryFramework.pageInfo"),this.tabId=w.RtfServices.getTabId(this.queryId))}return e.prototype.getConditionDialog=function(){return this.conditionDialog?this.conditionDialog:w.QDPCacheUtil.getCache(this.tabId+"advanceTemplate-condition-dialog")?w.QDPCacheUtil.getCache(this.tabId+"advanceTemplate-condition-dialog"):void 0},e.prototype.ngOnInit=function(){"list"===this.controlType||"treelist"===this.controlType?this.printShow=!0:this.printShow=!1,this.inputTemplate&&(this.isShowMore=!0)},e.prototype.ngOnChanges=function(e){for(var t in e){var i=e[t].currentValue;if(null!=i)switch(t){case"queryId":this.tabId=w.RtfServices.getTabId(i)}}},e.prototype.ngAfterViewInit=function(){},e.prototype.handleBeforeClose=function(e){this.dialogBeforeClose.emit(e)},e.prototype.refresh=function(){this.refreshEvent.emit()},e.prototype.filter=function(){this.filterCondition.emit()},e.prototype.handleClearSort=function(){this.clearSort.emit()},e.prototype.condition=function(){this.getConditionDialog()&&(this.getConditionDialog().handleDialogShow(),this.getConditionDialog().handleInfoChanged(0),this.getConditionDialog().Id=this.getConditionDialog().schemaId)},e.prototype.handleDimesionSetting=function(){this.qdpView.toggle()},e.prototype.handlePrintIntegration=function(e){this.printIntegration.emit(e)},e.prototype.handlePrintPreview=function(e){this.printPreview.emit(e)},e.prototype.handleClearCache=function(){this.clearCache.emit()},e.prototype.print=function(){if("crosstab"!==this.controlType&&"charts"!==this.controlType){var e=this.createParameters(Object.assign({},{queryId:this.queryId,controlType:this.controlType,schemaId:this.schemaId,filtercondition:this.conditionExpression,qoManagerCode:this.qoManagerCode,voId:this.voId},{pageIndex:0,pageSize:0})),t=this.qdpView.spread.getActiveSheet(),i=t.getSelections(),n="",r="",a="",o="";if(!this.formPrintOption||!this.formPrintOption.printBEId)return void this.msgService.warning(this.localizeService.getValue("queryFramework.message.validate.beMetadataIdEmpty"));if(r=this.formPrintOption.printBEId,e.beId=r,!this.formPrintOption||!this.formPrintOption.printFormIdField)return void this.msgService.warning(this.localizeService.getValue("queryFramework.message.validate.formIdFieldEmpty"));n=this.formPrintOption.printFormIdField,e.formIdField=n,this.formPrintOption&&this.formPrintOption.dim1&&(a=this.formPrintOption.dim1),this.formPrintOption&&this.formPrintOption.dim2&&(o=this.formPrintOption.dim2);var s="";if(i&&i.length){for(var c=0;c<i.length;c++)for(var M=i[c].row;M<i[c].rowCount+i[c].row;M++){var l=t.getDataItem(M);l&&l.hasOwnProperty(n)&&(s+=","+l[n])}s=s.substring(1),this.integrationPrintService.printByIdsWithDimension(r,s,a,o)}else s="1",this.integrationPrintService.printWithDimensionCustomDataSource(r,s,a,o,"InternalService","com.inspur.edp.qdp.lcp.print.FormPrintDataManager",e);t.clearSelection()}},e.prototype.handleHover=function(e,t){switch(e){case 0:this.svgShuaxin=1===t;break;case 1:this.svgFilter=1===t;break;case 2:this.svgDimesion=1===t;break;case 3:this.svgClearCache=1===t;break;case 4:this.svgPrint=1==t}},e.prototype.handleExpand=function(e){this.isExpand=e,this.expendCollapseLevel.emit(this.isExpand)},e.prototype.createParameters=function(e){var t,i=w.RtfServices.getTabId(e.queryId),n={entityData:t=this.cache.get(i)?JSON.stringify(this.cache.get(i)):this.cache.get(e.queryId)?JSON.stringify(this.cache.get(e.queryId)):JSON.stringify({id:"undefined_null"}),extendCond:this.cache.get(i+"extendCond")?this.cache.get(i+"extendCond"):e.extendCond,pageIndex:e.pageIndex,pageSize:e.pageSize,schemaId:e.schemaId&&"prefab"!==e.schemaId?e.schemaId:"1",filterCond:e.filterCondition?e.filterCondition:this.cache.get(i+"filtercondition")?this.cache.get(i+"filtercondition"):"",qoManagerCode:e.qoManagerCode?e.qoManagerCode:"",voCode:e.voId?e.voId:""};try{var r=JSON.parse(t);if(r.hasOwnProperty("@filterExpressionString@")){var a=n&&n.filterCond?JSON.parse(n.filterCond):null;if(a){var o=JSON.parse(r["@filterExpressionString@"]);o.expressItems=o.expressItems.concat(a.expressItems),n.filterCond=JSON.stringify(o)}else n.filterCond=r["@filterExpressionString@"]}}catch(s){}return e.controlType&&(n.controlType=e.controlType),e.excelExportName&&(n.excelExportName=e.excelExportName),e.printIntegration&&(n.printIntegration=e.printIntegration?JSON.stringify(e.printIntegration):""),n},e.decorators=[{type:M.Component,args:[{selector:"query-framework-toolbar",template:'<div class="f-page-header-base pl-0 pr-2 border-top">\r\n  \x3c!-- <label class="farris-form-title mr-auto" for="page-header-title" [hidden]="isMultiForm ">\r\n    <span>{{queryName}}</span>\r\n  </label> --\x3e\r\n  \x3c!--嵌入式表单根据是否显示工具栏控制按钮隐藏与显示--\x3e\r\n  <div class="btn-toolbar btn-group-lg align-items-center" id="page-header-toolbar"\r\n    [hidden]="!isShowToolbar || isMultiForm ">\r\n    <button *ngIf="templateType===\'qdpAdvancedTemplate\'" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-condition"\r\n     (click)="condition()" (mouseenter)="handleHover(1, 0)" (mouseleave)="handleHover(1, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgFilter" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNoYWl4dWFuPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSfkuqTkupLmlrnmoYgxLeW4uOinhOaAgeWkh+S7vScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTQwNC4wMDAwMDAsIC0xOTUuMDAwMDAwKScgZmlsbD0nIzhBOThCRSc+PGcgaWQ9J+e8lue7hC0xNScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi4wMDAwMDAsIDE4Mi4wMDAwMDApJz48ZyBpZD0neml5dWFuJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgzOTguMDAwMDAwLCAxMi4wMDAwMDApJz48ZyBpZD0n57yW57uELTIwJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNMTUuNTg0MzMyMywyLjAwMDE5MTgzIEMxNS43NDIzMjAzLDEuOTk1MzMxOTYgMTUuODg4NTgyOSwyLjA4MzE1MTk0IDE1Ljk1ODQ1NTUsMi4yMjQ4MjU0NSBDMTYuMDI4MzI4MSwyLjM2NjQ5ODk2IDE2LjAwODkyNiwyLjUzNTkwMDc3IDE1LjkwODgyNywyLjY1ODEzNjIxIEwxNS45MDg4MjcsMi42NTgxMzYyMSBMMTAuOTUzMTk0OSw4LjYwNzk2ODIxIEMxMC44OTM3NDM3LDguNjc5NjIxOTEgMTAuODYxNDAzLDguNzY5ODg0NzcgMTAuODYxODMyMyw4Ljg2Mjk2MTAxIEwxMC44NjE4MzIzLDguODYyOTYxMDEgTDEwLjg2MTgzMjMsMTUuNTkzNTExNyBDMTAuODU3MjAwOSwxNS43NTIxNjk1IDEwLjc2MzE4NDQsMTUuODk0NTY4NyAxMC42MTkwMzc4LDE1Ljk2MTI1MyBDMTAuNDc0ODkxMSwxNi4wMjc5MzcyIDEwLjMwNTQwMjQsMTYuMDA3NDM5MyAxMC4xODEzMzg2LDE1LjkwODMxNzYgTDEwLjE4MTMzODYsMTUuOTA4MzE3NiBMNy4yNzM0ODgzNywxMy42MTAyMzQ0IEM3LjE3NzQ2MTI0LDEzLjUzNDAwNCA3LjEyMTcyNjIsMTMuNDE3OTc2OCA3LjEyMjI2NzU1LDEzLjI5NTQyODQgTDcuMTIyMjY3NTUsMTMuMjk1NDI4NCBMNy4xMjIyNjc1NSw4Ljg2NjEwOTA3IEM3LjEyMTQxMDczLDguNzczMjU3NDggNy4wODkyMTk1OSw4LjY4MzQxMjA1IDcuMDMwOTA0OTcsOC42MTExMTYyNyBMNy4wMzA5MDQ5Nyw4LjYxMTExNjI3IEwyLjA5MTAyNTAyLDIuNjU4MTM2MjEgQzEuOTkyMTIzMDcsMi41MzcyMTk0IDEuOTcyMDQ1NDMsMi4zNzAwODc0NiAyLjAzOTQ5ODY4LDIuMjI5MjE2NDMgQzIuMTA2OTUxOTMsMi4wODgzNDU0IDIuMjQ5Nzg4NjYsMS45OTkxMDQxOCAyLjQwNjA2ODM4LDIuMDAwMTkxODMgTDIuNDA2MDY4MzgsMi4wMDAxOTE4MyBaIE0xMC41NDI4NzU2LDYuNjY2NjY2NjcgTDcuNiw2LjY2NjY2NjY3IEw3LjYsNy42IEwxMC41NDI4NzU2LDcuNiBMMTAuNTQyODc1Niw2LjY2NjY2NjY3IFonIGlkPSflvaLnirbnu5PlkIgnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgFilter" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNoYWl4dWFuMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0n5Zu+5qCH6YCJ5Lit6aKc6Imy5YiH5Zu+5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtNDA0LjAwMDAwMCwgLTE5NS4wMDAwMDApJyBmaWxsPScjNThBMUZFJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSd6aXl1YW4nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDM5OC4wMDAwMDAsIDExLjAwMDAwMCknPjxwYXRoIGQ9J00xNS41ODQzMzIzLDQuMDAwMTkxODMgQzE1Ljc0MjMyMDMsMy45OTUzMzE5NiAxNS44ODg1ODI5LDQuMDgzMTUxOTQgMTUuOTU4NDU1NSw0LjIyNDgyNTQ1IEMxNi4wMjgzMjgxLDQuMzY2NDk4OTYgMTYuMDA4OTI2LDQuNTM1OTAwNzcgMTUuOTA4ODI3LDQuNjU4MTM2MjEgTDE1LjkwODgyNyw0LjY1ODEzNjIxIEwxMC45NTMxOTQ5LDEwLjYwNzk2ODIgQzEwLjg5Mzc0MzcsMTAuNjc5NjIxOSAxMC44NjE0MDMsMTAuNzY5ODg0OCAxMC44NjE4MzIzLDEwLjg2Mjk2MSBMMTAuODYxODMyMywxMC44NjI5NjEgTDEwLjg2MTgzMjMsMTcuNTkzNTExNyBDMTAuODU3MjAwOSwxNy43NTIxNjk1IDEwLjc2MzE4NDQsMTcuODk0NTY4NyAxMC42MTkwMzc4LDE3Ljk2MTI1MyBDMTAuNDc0ODkxMSwxOC4wMjc5MzcyIDEwLjMwNTQwMjQsMTguMDA3NDM5MyAxMC4xODEzMzg2LDE3LjkwODMxNzYgTDEwLjE4MTMzODYsMTcuOTA4MzE3NiBMNy4yNzM0ODgzNywxNS42MTAyMzQ0IEM3LjE3NzQ2MTI0LDE1LjUzNDAwNCA3LjEyMTcyNjIsMTUuNDE3OTc2OCA3LjEyMjI2NzU1LDE1LjI5NTQyODQgTDcuMTIyMjY3NTUsMTUuMjk1NDI4NCBMNy4xMjIyNjc1NSwxMC44NjYxMDkxIEM3LjEyMTQxMDczLDEwLjc3MzI1NzUgNy4wODkyMTk1OSwxMC42ODM0MTIxIDcuMDMwOTA0OTcsMTAuNjExMTE2MyBMNy4wMzA5MDQ5NywxMC42MTExMTYzIEwyLjA5MTAyNTAyLDQuNjU4MTM2MjEgQzEuOTkyMTIzMDcsNC41MzcyMTk0IDEuOTcyMDQ1NDMsNC4zNzAwODc0NiAyLjAzOTQ5ODY4LDQuMjI5MjE2NDMgQzIuMTA2OTUxOTMsNC4wODgzNDU0IDIuMjQ5Nzg4NjYsMy45OTkxMDQxOCAyLjQwNjA2ODM4LDQuMDAwMTkxODMgTDIuNDA2MDY4MzgsNC4wMDAxOTE4MyBaIE0xMC41NDI4NzU2LDguNjY2NjY2NjcgTDcuNiw4LjY2NjY2NjY3IEw3LjYsOS42IEwxMC41NDI4NzU2LDkuNiBMMTAuNTQyODc1Niw4LjY2NjY2NjY3IFonIGlkPSflvaLnirbnu5PlkIgnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.btnCondition\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-filter-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    <schema-manager *ngIf="showSchemaManager" [schemaInfo]="schemaInfo" [colList]="colList" [queryId]="queryId" [groupType]="groupType"\r\n      [controlType]="controlType" [isMultiForm]="isMultiForm" [queryRelativeUrl]="queryRelativeUrl" [showPreSchema]="showPreSchema"\r\n      (schemaSelected)="schemaSelected.emit($event)" (dialogBeforeClose)="handleBeforeClose($event)"></schema-manager>\r\n    <export-data *ngIf="controlType!=\'charts\' && showExport" [isMultiForm]="isMultiForm" (exportExcel)="exportExcel.emit($event)">\r\n    </export-data>\r\n    <button *ngIf="showReFresh" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-refresh"\r\n      (click)="refresh()" (mouseenter)="handleHover(0, 0)" (mouseleave)="handleHover(0, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgShuaxin" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNodWF4aW48L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9J+S6pOS6kuaWueahiDEt5bi46KeE5oCB5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMzI3LjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSdzaHVheGluJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgzMjEuMDAwMDAwLCAxMi4wMDAwMDApJz48ZyBpZD0n57yW57uELTE4JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNNy43OTI1NTAyNSw4LjIzODE3ODQ1IEw2LjQyNjAyMzY4LDguMjM4MTc4NDUgQzYuNDI2MDIzNjgsNS44MzUzMjU0NSA2LjQyNjAyMzY4LDIuNzQ1MjQ0MjcgMTAuNzUzMTU1MSwwLjIyODY2ODQ0OSBDMTAuODY2MzIyNCwwLjExMzcyMjgwMiAxMC43NTMxNTUxLDAgMTAuNjM4NzcwOCwwIEMyLjU1NTIxMjM5LDEuMjU4Mjg3OTEgMS44NzM3NzQzOCw2Ljc0OTk5OTI3IDEuODczNzc0MzgsOC4yMzgxNzg0NSBMMC41MDYwMzA5NDQsOC4yMzgxNzg0NSBDMC4wNTA5Mjc2OTMsOC4yMzgxNzg0NSAtMC4xNzc4NDA3OCw4LjY5NTUxNTM3IDAuMTY1MzExOTM4LDkuMDM5MTI5NDYgTDMuNDY2NjM1NzMsMTMuMTU3NjA3MyBDMy42MjgwMDk4NCwxMy4zNzMxODg5IDMuODgwODQyODYsMTMuNSA0LjE0OTI5MDYsMTMuNSBDNC40MTc3MzgzNCwxMy41IDQuNjcwNTcxMzUsMTMuMzczMTg4OSA0LjgzMTk0NTQ3LDEzLjE1NzYwNzMgTDguMTM0NDg2MTIsOS4wMzkxMjk0NiBDOC4zNjIwMzc3Myw4LjY5NTUxNTM3IDguMTM0NDg2MTIsOC4yMzgxNzg0NyA3Ljc5Mzc2NzExLDguMjM4MTc4NDUgTDcuNzkyNTUwMjUsOC4yMzgxNzg0NSBaJyBpZD0n5b2i54q2JyBmaWxsPScjOEE5OEJFJyBmaWxsLXJ1bGU9J25vbnplcm8nPjwvcGF0aD48cGF0aCBkPSdNMTcuOTExNTc0MSw3LjE2MjA5MzM2IEwxNC42MjA5MjY5LDMuMDQyMzkyNzEgQzE0LjQ2MDEzNCwyLjgyNjgxMTA1IDE0LjIwODIxMTUsMi43IDEzLjk0MDczMDUsMi43IEMxMy42NzMyNDk1LDIuNyAxMy40MjEzMjcsMi44MjY4MTEwNSAxMy4yNjA1MzQxLDMuMDQyMzkyNzEgTDkuOTY5ODg2ODYsNy4xNjIwOTMzNiBDOS43NDMxNTQ3Myw3LjUwNDQ4NDYzIDkuOTY5ODg2ODYsNy45NjE4MjE1NCAxMC4zMDkzNzg4LDcuOTYxODIxNTIgTDExLjU1ODIyNDMsNy45NjE4MjE1MiBDMTEuNTU4MjI0MywxMC4zNjQ2NzQ1IDExLjU1ODIyNDMsMTMuNDU0NzU1NyA3LjI0NjY3NjI0LDE1Ljk3MTMzMTUgQzcuMTMzOTE2NCwxNi4wODYyNzcyIDcuMjQ2Njc2MjQsMTYuMiA3LjM2MDY0ODU1LDE2LjIgQzE1LjQxNTA5NTcsMTQuOTQxNzEyMSAxNi4wOTY1MDQ1LDkuNDUwMDAwNzMgMTYuMDk2NTA0NSw3Ljk2MTgyMTUyIEwxNy40NTgxMDk4LDcuOTYxODIxNTIgQzE3LjkxMTU3NDEsNy45NjE4MjE1MiAxOC4xMzcwOTM4LDcuNTA0NDg0NjEgMTcuOTExNTc0MSw3LjE2MjA5MzM2IEwxNy45MTE1NzQxLDcuMTYyMDkzMzYgWicgaWQ9J+i3r+W+hCcgZmlsbD0nIzdBODlCMicgb3BhY2l0eT0nMC41Jz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgShuaxin" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNodWF4aW4yPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSflm77moIfpgInkuK3popzoibLliIflm77lpIfku70nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC0zMjcuMDAwMDAwLCAtMTk1LjAwMDAwMCknIGZpbGw9JyM1MEQwODEnPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J3NodWF4aW4nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDMyMS4wMDAwMDAsIDExLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTgnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDAuMDAwMDAwLCAyLjAwMDAwMCknPjxwYXRoIGQ9J003Ljc5MjU1MDI1LDguMjM4MTc4NDUgTDYuNDI2MDIzNjgsOC4yMzgxNzg0NSBDNi40MjYwMjM2OCw1LjgzNTMyNTQ1IDYuNDI2MDIzNjgsMi43NDUyNDQyNyAxMC43NTMxNTUxLDAuMjI4NjY4NDQ5IEMxMC44NjYzMjI0LDAuMTEzNzIyODAyIDEwLjc1MzE1NTEsMCAxMC42Mzg3NzA4LDAgQzIuNTU1MjEyMzksMS4yNTgyODc5MSAxLjg3Mzc3NDM4LDYuNzQ5OTk5MjcgMS44NzM3NzQzOCw4LjIzODE3ODQ1IEwwLjUwNjAzMDk0NCw4LjIzODE3ODQ1IEMwLjA1MDkyNzY5Myw4LjIzODE3ODQ1IC0wLjE3Nzg0MDc4LDguNjk1NTE1MzcgMC4xNjUzMTE5MzgsOS4wMzkxMjk0NiBMMy40NjY2MzU3MywxMy4xNTc2MDczIEMzLjYyODAwOTg0LDEzLjM3MzE4ODkgMy44ODA4NDI4NiwxMy41IDQuMTQ5MjkwNiwxMy41IEM0LjQxNzczODM0LDEzLjUgNC42NzA1NzEzNSwxMy4zNzMxODg5IDQuODMxOTQ1NDcsMTMuMTU3NjA3MyBMOC4xMzQ0ODYxMiw5LjAzOTEyOTQ2IEM4LjM2MjAzNzczLDguNjk1NTE1MzcgOC4xMzQ0ODYxMiw4LjIzODE3ODQ3IDcuNzkzNzY3MTEsOC4yMzgxNzg0NSBMNy43OTI1NTAyNSw4LjIzODE3ODQ1IFonIGlkPSflvaLnirYnIGZpbGwtcnVsZT0nbm9uemVybyc+PC9wYXRoPjxwYXRoIGQ9J00xNy45MTE1NzQxLDcuMTYyMDkzMzYgTDE0LjYyMDkyNjksMy4wNDIzOTI3MSBDMTQuNDYwMTM0LDIuODI2ODExMDUgMTQuMjA4MjExNSwyLjcgMTMuOTQwNzMwNSwyLjcgQzEzLjY3MzI0OTUsMi43IDEzLjQyMTMyNywyLjgyNjgxMTA1IDEzLjI2MDUzNDEsMy4wNDIzOTI3MSBMOS45Njk4ODY4Niw3LjE2MjA5MzM2IEM5Ljc0MzE1NDczLDcuNTA0NDg0NjMgOS45Njk4ODY4Niw3Ljk2MTgyMTU0IDEwLjMwOTM3ODgsNy45NjE4MjE1MiBMMTEuNTU4MjI0Myw3Ljk2MTgyMTUyIEMxMS41NTgyMjQzLDEwLjM2NDY3NDUgMTEuNTU4MjI0MywxMy40NTQ3NTU3IDcuMjQ2Njc2MjQsMTUuOTcxMzMxNSBDNy4xMzM5MTY0LDE2LjA4NjI3NzIgNy4yNDY2NzYyNCwxNi4yIDcuMzYwNjQ4NTUsMTYuMiBDMTUuNDE1MDk1NywxNC45NDE3MTIxIDE2LjA5NjUwNDUsOS40NTAwMDA3MyAxNi4wOTY1MDQ1LDcuOTYxODIxNTIgTDE3LjQ1ODEwOTgsNy45NjE4MjE1MiBDMTcuOTExNTc0MSw3Ljk2MTgyMTUyIDE4LjEzNzA5MzgsNy41MDQ0ODQ2MSAxNy45MTE1NzQxLDcuMTYyMDkzMzYgTDE3LjkxMTU3NDEsNy4xNjIwOTMzNiBaJyBpZD0n6Lev5b6EJyBvcGFjaXR5PScwLjYnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.refreshName\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-reload-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    <button *ngIf="showFilter" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-filter"\r\n      (click)="filter()" (mouseenter)="handleHover(1, 0)" (mouseleave)="handleHover(1, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgFilter" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNoYWl4dWFuPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSfkuqTkupLmlrnmoYgxLeW4uOinhOaAgeWkh+S7vScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTQwNC4wMDAwMDAsIC0xOTUuMDAwMDAwKScgZmlsbD0nIzhBOThCRSc+PGcgaWQ9J+e8lue7hC0xNScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi4wMDAwMDAsIDE4Mi4wMDAwMDApJz48ZyBpZD0neml5dWFuJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgzOTguMDAwMDAwLCAxMi4wMDAwMDApJz48ZyBpZD0n57yW57uELTIwJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNMTUuNTg0MzMyMywyLjAwMDE5MTgzIEMxNS43NDIzMjAzLDEuOTk1MzMxOTYgMTUuODg4NTgyOSwyLjA4MzE1MTk0IDE1Ljk1ODQ1NTUsMi4yMjQ4MjU0NSBDMTYuMDI4MzI4MSwyLjM2NjQ5ODk2IDE2LjAwODkyNiwyLjUzNTkwMDc3IDE1LjkwODgyNywyLjY1ODEzNjIxIEwxNS45MDg4MjcsMi42NTgxMzYyMSBMMTAuOTUzMTk0OSw4LjYwNzk2ODIxIEMxMC44OTM3NDM3LDguNjc5NjIxOTEgMTAuODYxNDAzLDguNzY5ODg0NzcgMTAuODYxODMyMyw4Ljg2Mjk2MTAxIEwxMC44NjE4MzIzLDguODYyOTYxMDEgTDEwLjg2MTgzMjMsMTUuNTkzNTExNyBDMTAuODU3MjAwOSwxNS43NTIxNjk1IDEwLjc2MzE4NDQsMTUuODk0NTY4NyAxMC42MTkwMzc4LDE1Ljk2MTI1MyBDMTAuNDc0ODkxMSwxNi4wMjc5MzcyIDEwLjMwNTQwMjQsMTYuMDA3NDM5MyAxMC4xODEzMzg2LDE1LjkwODMxNzYgTDEwLjE4MTMzODYsMTUuOTA4MzE3NiBMNy4yNzM0ODgzNywxMy42MTAyMzQ0IEM3LjE3NzQ2MTI0LDEzLjUzNDAwNCA3LjEyMTcyNjIsMTMuNDE3OTc2OCA3LjEyMjI2NzU1LDEzLjI5NTQyODQgTDcuMTIyMjY3NTUsMTMuMjk1NDI4NCBMNy4xMjIyNjc1NSw4Ljg2NjEwOTA3IEM3LjEyMTQxMDczLDguNzczMjU3NDggNy4wODkyMTk1OSw4LjY4MzQxMjA1IDcuMDMwOTA0OTcsOC42MTExMTYyNyBMNy4wMzA5MDQ5Nyw4LjYxMTExNjI3IEwyLjA5MTAyNTAyLDIuNjU4MTM2MjEgQzEuOTkyMTIzMDcsMi41MzcyMTk0IDEuOTcyMDQ1NDMsMi4zNzAwODc0NiAyLjAzOTQ5ODY4LDIuMjI5MjE2NDMgQzIuMTA2OTUxOTMsMi4wODgzNDU0IDIuMjQ5Nzg4NjYsMS45OTkxMDQxOCAyLjQwNjA2ODM4LDIuMDAwMTkxODMgTDIuNDA2MDY4MzgsMi4wMDAxOTE4MyBaIE0xMC41NDI4NzU2LDYuNjY2NjY2NjcgTDcuNiw2LjY2NjY2NjY3IEw3LjYsNy42IEwxMC41NDI4NzU2LDcuNiBMMTAuNTQyODc1Niw2LjY2NjY2NjY3IFonIGlkPSflvaLnirbnu5PlkIgnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgFilter" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPnNoYWl4dWFuMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0n5Zu+5qCH6YCJ5Lit6aKc6Imy5YiH5Zu+5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtNDA0LjAwMDAwMCwgLTE5NS4wMDAwMDApJyBmaWxsPScjNThBMUZFJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSd6aXl1YW4nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDM5OC4wMDAwMDAsIDExLjAwMDAwMCknPjxwYXRoIGQ9J00xNS41ODQzMzIzLDQuMDAwMTkxODMgQzE1Ljc0MjMyMDMsMy45OTUzMzE5NiAxNS44ODg1ODI5LDQuMDgzMTUxOTQgMTUuOTU4NDU1NSw0LjIyNDgyNTQ1IEMxNi4wMjgzMjgxLDQuMzY2NDk4OTYgMTYuMDA4OTI2LDQuNTM1OTAwNzcgMTUuOTA4ODI3LDQuNjU4MTM2MjEgTDE1LjkwODgyNyw0LjY1ODEzNjIxIEwxMC45NTMxOTQ5LDEwLjYwNzk2ODIgQzEwLjg5Mzc0MzcsMTAuNjc5NjIxOSAxMC44NjE0MDMsMTAuNzY5ODg0OCAxMC44NjE4MzIzLDEwLjg2Mjk2MSBMMTAuODYxODMyMywxMC44NjI5NjEgTDEwLjg2MTgzMjMsMTcuNTkzNTExNyBDMTAuODU3MjAwOSwxNy43NTIxNjk1IDEwLjc2MzE4NDQsMTcuODk0NTY4NyAxMC42MTkwMzc4LDE3Ljk2MTI1MyBDMTAuNDc0ODkxMSwxOC4wMjc5MzcyIDEwLjMwNTQwMjQsMTguMDA3NDM5MyAxMC4xODEzMzg2LDE3LjkwODMxNzYgTDEwLjE4MTMzODYsMTcuOTA4MzE3NiBMNy4yNzM0ODgzNywxNS42MTAyMzQ0IEM3LjE3NzQ2MTI0LDE1LjUzNDAwNCA3LjEyMTcyNjIsMTUuNDE3OTc2OCA3LjEyMjI2NzU1LDE1LjI5NTQyODQgTDcuMTIyMjY3NTUsMTUuMjk1NDI4NCBMNy4xMjIyNjc1NSwxMC44NjYxMDkxIEM3LjEyMTQxMDczLDEwLjc3MzI1NzUgNy4wODkyMTk1OSwxMC42ODM0MTIxIDcuMDMwOTA0OTcsMTAuNjExMTE2MyBMNy4wMzA5MDQ5NywxMC42MTExMTYzIEwyLjA5MTAyNTAyLDQuNjU4MTM2MjEgQzEuOTkyMTIzMDcsNC41MzcyMTk0IDEuOTcyMDQ1NDMsNC4zNzAwODc0NiAyLjAzOTQ5ODY4LDQuMjI5MjE2NDMgQzIuMTA2OTUxOTMsNC4wODgzNDU0IDIuMjQ5Nzg4NjYsMy45OTkxMDQxOCAyLjQwNjA2ODM4LDQuMDAwMTkxODMgTDIuNDA2MDY4MzgsNC4wMDAxOTE4MyBaIE0xMC41NDI4NzU2LDguNjY2NjY2NjcgTDcuNiw4LjY2NjY2NjY3IEw3LjYsOS42IEwxMC41NDI4NzU2LDkuNiBMMTAuNTQyODc1Niw4LjY2NjY2NjY3IFonIGlkPSflvaLnirbnu5PlkIgnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.filterName\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-filter-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    \x3c!-- 打印 --\x3e\r\n    <print-integration *ngIf="showPrint && printShow" [queryId]="queryId" [controlType]="controlType" [isMultiForm]="isMultiForm"\r\n      [queryRelativeUrl]="queryRelativeUrl" (printIntegration)="handlePrintIntegration($event)"\r\n      (printPreview)="handlePrintPreview($event)"></print-integration>\r\n    <button class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-dimensionSetting"\r\n      *ngIf="controlType===\'crosstab\'" (click)="handleDimesionSetting()" (mouseenter)="handleHover(2, 0)" (mouseleave)="handleHover(2, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgDimesion" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMTZweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTYgMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPuiHquWumuS5iee7tOW6puagkS3nu7TluqbnrqHnkIY8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9JzAyLeafpeivolVJ6K6+6K6hJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtNDg2LjAwMDAwMCwgLTE5NS4wMDAwMDApJyBmaWxsPScjOEE5OEJFJyBmaWxsLXJ1bGU9J25vbnplcm8nPjxnIGlkPSdzaHVheGluJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg0ODUuMDAwMDAwLCAxOTMuMDAwMDAwKSc+PGcgaWQ9J+iHquWumuS5iee7tOW6puagkS3nu7TluqbnrqHnkIYnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDAuMDAwMDAwLCAxLjAwMDAwMCknPjxwYXRoIGQ9J005LjYwMDY1ODI5LDEuMzE4NjA0NjYgTDE0Ljg1OTg4OSw0LjI3MTE1NDg1IEMxNS41Njg1NCw0LjY2OTEwNTQ5IDE2LjAwNDMzNzMsNS4zOTkyMjg4MSAxNi4wMDQ1MDQ0LDYuMTg4ODEzNDMgTDE2LjAwNDUwNDQsMTEuODQyOTYzNyBDMTYuMDA0NzQ3NywxMi42MzI5NDQ4IDE1LjU2ODg5NTksMTMuMzYzNTgyMiAxNC44NTk4ODksMTMuNzYxNzMyNyBMOS42MDA2NTgyOSwxNi43MTQyODI4IEM4Ljg3NTUyNTU2LDE3LjEyMDk1NjcgNy45NzgxMzMwOSwxNy4xMTY3MDQ2IDcuMjU3MTk2NzcsMTYuNzAzMTc4OSBMMi4xMzA2NTgzNCwxMy43NjUwNjM5IEMxLjQzMjI5MzU2LDEzLjM2NDQ3NjIgMS4wMDQ0OTI2NywxMi42Mzk3OTY2IDEuMDA0NTA0NTEsMTEuODU3Mzk4OSBMMS4wMDQ1MDQ1MSw2LjE3NTQ4ODY0IEMxLjAwNDQ5MjY4LDUuMzkzMDkwOTUgMS40MzIyOTM1Nyw0LjY2ODQxMTI4IDIuMTMwNjU4MzQsNC4yNjc4MjM2NSBMNy4yNTgzNTA2MiwxLjMyODU5ODI1IEM3Ljk3OTIwODUyLDAuOTE1ODUyMDQ1IDguODc2MDI1NzgsMC45MTIwMjU3MjQgOS42MDA2NTgyOSwxLjMxODYwNDY2IFogTTEzLjYzNTY1ODMsNi43ODg0Mjg3MyBMOC45OTAyNzM2OSw5LjM2NDU1Mzc2IEw4Ljk5MDI3MzY5LDEzLjU4MDczNzcgTDEwLjkyNDExOTgsMTIuNDQ4MTMxIEwxMC45MjQxMTk4LDEwLjE3NDAzNDQgTDEzLjYzNTY1ODMsOC43NDkzOTI4NiBMMTMuNjM1NjU4Myw2Ljc4ODQyODczIFogTTMuMzEyMTk2OCw2Ljc4ODQyODczIEwzLjMxMjE5NjgsOC43NDA1MDk2NyBMNi4wNTE0Mjc1NiwxMC4xNzI5MjQgTDYuMDUxNDI3NTYsMTIuNDU1OTAzOCBMNy45NTc1ODEzOSwxMy41ODA3Mzc3IEw3Ljk1NzU4MTM5LDkuMzYxMjIyNTYgTDMuMzEyMTk2OCw2Ljc4ODQyODczIFogTTExLjc1NzE5NjcsNS4xMDA2MjI2OSBMOC41MzEwNDI5MSw2Ljg4NjE0MzgyIEw1LjE4ODM1MDYzLDUuMTAwNjIyNjkgTDMuODI3OTY2MDMsNS45NDY3NDY1MSBMOC41MzkxMTk4NCw4LjUyNjIwMjcyIEwxMy4yNDkxMTk4LDUuOTUwMDc3NzEgTDExLjc1NzE5NjcsNS4xMDA2MjI2OSBaJyBpZD0n5b2i54q2Jz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgDimesion" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMTZweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTYgMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPuiHquWumuS5iee7tOW6puagkS3nu7TluqbnrqHnkIY8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPScx44CB57u05bqm6K6+572uJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0nMDIt5p+l6K+iVUnorr7orqEnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC00ODYuMDAwMDAwLCAtMTk1LjAwMDAwMCknIGZpbGw9JyM1OEExRkUnIGZpbGwtcnVsZT0nbm9uemVybyc+PGcgaWQ9J3NodWF4aW4nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDQ4NS4wMDAwMDAsIDE5My4wMDAwMDApJz48ZyBpZD0n6Ieq5a6a5LmJ57u05bqm5qCRLee7tOW6pueuoeeQhicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMC4wMDAwMDAsIDEuMDAwMDAwKSc+PHBhdGggZD0nTTkuNjAwNjU4MjksMS4zMTg2MDQ2NiBMMTQuODU5ODg5LDQuMjcxMTU0ODUgQzE1LjU2ODU0LDQuNjY5MTA1NDkgMTYuMDA0MzM3Myw1LjM5OTIyODgxIDE2LjAwNDUwNDQsNi4xODg4MTM0MyBMMTYuMDA0NTA0NCwxMS44NDI5NjM3IEMxNi4wMDQ3NDc3LDEyLjYzMjk0NDggMTUuNTY4ODk1OSwxMy4zNjM1ODIyIDE0Ljg1OTg4OSwxMy43NjE3MzI3IEw5LjYwMDY1ODI5LDE2LjcxNDI4MjggQzguODc1NTI1NTYsMTcuMTIwOTU2NyA3Ljk3ODEzMzA5LDE3LjExNjcwNDYgNy4yNTcxOTY3NywxNi43MDMxNzg5IEwyLjEzMDY1ODM0LDEzLjc2NTA2MzkgQzEuNDMyMjkzNTYsMTMuMzY0NDc2MiAxLjAwNDQ5MjY3LDEyLjYzOTc5NjYgMS4wMDQ1MDQ1MSwxMS44NTczOTg5IEwxLjAwNDUwNDUxLDYuMTc1NDg4NjQgQzEuMDA0NDkyNjgsNS4zOTMwOTA5NSAxLjQzMjI5MzU3LDQuNjY4NDExMjggMi4xMzA2NTgzNCw0LjI2NzgyMzY1IEw3LjI1ODM1MDYyLDEuMzI4NTk4MjUgQzcuOTc5MjA4NTIsMC45MTU4NTIwNDUgOC44NzYwMjU3OCwwLjkxMjAyNTcyNCA5LjYwMDY1ODI5LDEuMzE4NjA0NjYgWiBNMTMuNjM1NjU4Myw2Ljc4ODQyODczIEw4Ljk5MDI3MzY5LDkuMzY0NTUzNzYgTDguOTkwMjczNjksMTMuNTgwNzM3NyBMMTAuOTI0MTE5OCwxMi40NDgxMzEgTDEwLjkyNDExOTgsMTAuMTc0MDM0NCBMMTMuNjM1NjU4Myw4Ljc0OTM5Mjg2IEwxMy42MzU2NTgzLDYuNzg4NDI4NzMgWiBNMy4zMTIxOTY4LDYuNzg4NDI4NzMgTDMuMzEyMTk2OCw4Ljc0MDUwOTY3IEw2LjA1MTQyNzU2LDEwLjE3MjkyNCBMNi4wNTE0Mjc1NiwxMi40NTU5MDM4IEw3Ljk1NzU4MTM5LDEzLjU4MDczNzcgTDcuOTU3NTgxMzksOS4zNjEyMjI1NiBMMy4zMTIxOTY4LDYuNzg4NDI4NzMgWiBNMTEuNzU3MTk2Nyw1LjEwMDYyMjY5IEw4LjUzMTA0MjkxLDYuODg2MTQzODIgTDUuMTg4MzUwNjMsNS4xMDA2MjI2OSBMMy44Mjc5NjYwMyw1Ljk0Njc0NjUxIEw4LjUzOTExOTg0LDguNTI2MjAyNzIgTDEzLjI0OTExOTgsNS45NTAwNzc3MSBMMTEuNzU3MTk2Nyw1LjEwMDYyMjY5IFonIGlkPSflvaLnirYnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.dimensionSetting\')}}</span>\r\n    </button>\r\n    <button *ngIf="controlType!==\'charts\' && controlType!==\'crosstab\' && showClearSort" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-clearSort"\r\n      (click)="handleClearSort()">\r\n      <span class="f-icon f-icon-delete font-color"></span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.btnClearSort\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-reload-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    <button *ngIf="showClearCache" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-clearcache"\r\n      (click)="handleClearCache()" (mouseenter)="handleHover(3, 0)" (mouseleave)="handleHover(3, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgClearCache" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMTNweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTMgMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPue8lue7hCAyMDwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0nMDHln7rmnKzmn6Xor6It5bi46KeE5oCBJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtNDgzLjAwMDAwMCwgLTE5NS4wMDAwMDApJyBmaWxsPScjOEE5OEJFJyBmaWxsLXJ1bGU9J25vbnplcm8nPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J3ppeXVhbicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNDc1LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0yMCcgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMC4wMDAwMDAsIDEuMDAwMDAwKSc+PGcgaWQ9J+a4heepui0oNCknIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDIuMDAwMDAwLCAtMC4wMDAwMDApJz48cGF0aCBkPSdNMS4wNTQ5MjE4OCw5LjEwODA3MTQzIEwxMi41NzUwMjYsOS4xMDgwNzE0MyBDMTIuOTU1NjUxLDkuMTA4MDcxNDMgMTMuMTM0OTUzMSw4LjgyNTIxNDI5IDEyLjk3Mjg0MTEsOC40Nzk3MzIxNCBMMTEuNjEzNDkyMiw1LjU4MjI1IEMxMS40NTA3MDU3LDUuMjM2Nzg1NzEgMTEuMDA2NDI0NSw0Ljk1MzkxMDcxIDEwLjYyNTgzNTksNC45NTM5MTA3MSBMOC4yNDI3MDA1Miw0Ljk1MzkxMDcxIEw4LjI0MjcwMDUyLDAuNzA5NjI1IEM4LjI0MjcwMDUyLDAuMzI3MzAzNTcxIDcuOTMwNTgwNzMsMC4wMTQ5ODIxNDI5IDcuNTQ5OTU1NzMsMC4wMTQ5ODIxNDI5IEw2LjE2Mzc1NTIxLDAuMDE0OTgyMTQyOSBDNS43ODI0OTIxOSwwLjAxNDk4MjE0MjkgNS40NzAzNzI0LDAuMzI3MjY3ODU3IDUuNDcwMzcyNCwwLjcwOTYyNSBMNS40NzAzNzI0LDQuOTUzOTEwNzEgTDMuMDA0MDc1NTIsNC45NTM5MTA3MSBDMi42MjI3OTQyNyw0Ljk1MzkxMDcxIDIuMTc4NTEzMDIsNS4yMzc0MTA3MSAyLjAxNjMwOTksNS41ODIyNSBMMC42NTcxNDMyMjksOC40Nzk3MzIxNCBDMC40OTQzNTY3NzEsOC44MjUyMzIxNCAwLjY3MzY3NzA4Myw5LjEwODA3MTQzIDEuMDU0OTIxODgsOS4xMDgwNzE0MyBNMTIuMjUwNjAxNiwxMC4xMzY0NjQzIEwxLjYzNDQ4MTc3LDEwLjEzNjQ2NDMgQzEuNjkxOTc2NTYsMTEuMjA3ODM5MyAxLjY2NzQ3NjU2LDEyLjQ5NzA4OTMgMC43ODA3NzM0MzgsMTMuMjYyMjMyMSBDLTAuNDYwOTc5MTY3LDE0LjMzMjk2NDMgLTAuMDQyMzI4MTI1LDE1LjUwNDk0NjQgMC44MzgzNDExNDYsMTUuOTY4ODkyOSBMMi42NDA1ODU5NCwxNS45Njg4OTI5IEMyLjgxODA4MzMzLDE1LjcyNTgzOTMgMy43OTU0MjE4OCwxNC4zMzc5Mjg2IDQuMDgyNDAzNjUsMTIuOTM1MTYwNyBDNC4xMjcxMTk3OSwxMi42NDQzMjE0IDQuMTU0MDYyNSwxMi40NTE1ODkzIDQuMTU0MDYyNSwxMi40NTE1ODkzIEM0LjE0MTg0ODk2LDEyLjYxMTc4NTcgNC4xMTU0NzEzNSwxMi43NzMxNjA3IDQuMDgyNDAzNjUsMTIuOTM1MTYwNyBDMy45NDUzNTY3NywxMy44MjczNzUgMy42Mzg3Nzg2NSwxNS42NjU3NSAzLjQxNTM5ODQ0LDE1Ljk2ODg5MjkgTDQuNzE5NTEzMDIsMTUuOTY4ODkyOSBDNC44OTcwMjg2NSwxNS43MjU4MzkzIDUuODc0MzY3MTksMTQuMzM3OTI4NiA2LjE2MTMzMDczLDEyLjkzNTE2MDcgQzYuMTg2MTkzNTgsMTIuNzc0MDgzMyA2LjIxMDI3NDU4LDEyLjYxMjg5MSA2LjIzMzU3MjkyLDEyLjQ1MTU4OTMgQzYuMjIwNzAzMTMsMTIuNjExNzg1NyA2LjE5NDM4MDIxLDEyLjc3MzE2MDcgNi4xNjEzMzA3MywxMi45MzUxNjA3IEM2LjAyMzYyNzYsMTMuODI3Mzc1IDUuNzE3NjE0NTgsMTUuNjY1NzUgNS40OTM2NjkyNywxNS45Njg4OTI5IEw3LjEzNzQ0NzkyLDE1Ljk2ODg5MjkgQzcuMzE0OTYzNTQsMTUuNzI1ODM5MyA4LjI5MjMwMjA4LDE0LjMzNzkyODYgOC41NzkyNjU2MywxMi45MzUxNjA3IEM4LjYyMzk4MTc3LDEyLjY0NDMyMTQgOC42NTE1MDc4MSwxMi40NTE1ODkzIDguNjUxNTA3ODEsMTIuNDUxNTg5MyBDOC42Mzg2MTk3OSwxMi42MTE3ODU3IDguNjEyMzE1MSwxMi43NzMxNjA3IDguNTc5MjY1NjMsMTIuOTM1MTYwNyBDOC40NDE2NTM2NSwxMy44MjczNzUgOC4xMzU2NDA2MywxNS42NjU3NSA3LjkxMTYwNDE3LDE1Ljk2ODg5MjkgTDkuNTYyMTI3NiwxNS45Njg4OTI5IEM5LjczOTU3MDMxLDE1LjcyNTgzOTMgMTAuNzE2OTgxOCwxNC4zMzc5Mjg2IDExLjAwMzk2MzUsMTIuOTM1MTYwNyBDMTEuMDQ4Njc5NywxMi42NDQzMjE0IDExLjA3NjE4NzUsMTIuNDUxNTg5MyAxMS4wNzYxODc1LDEyLjQ1MTU4OTMgQzExLjA2MzMxNzcsMTIuNjExNzg1NyAxMS4wMzcwMTMsMTIuNzczMTYwNyAxMS4wMDM5NjM1LDEyLjkzNTE2MDcgQzEwLjg2NjI2MDQsMTMuODI3Mzc1IDEwLjU1OTY4MjMsMTUuNjY1NzUgMTAuMzM2MzAyMSwxNS45Njg4OTI5IEwxMS45OTY2ODc1LDE1Ljk2ODg5MjkgQzExLjk5NjY4NzUsMTUuOTY4ODkyOSAxMy4wOTE0NTgzLDE1LjU3NDI2NzkgMTIuOTIwNjg3NSwxNC4zMDQxNjA3IEMxMi42NzY1OTksMTIuNDkyNzg1NyAxMi41NzkyNTUyLDExLjQ4NTg1NzEgMTIuMjUwNjAxNiwxMC4xMzY0NjQzJyBpZD0n5b2i54q2Jz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgClearCache" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMTNweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTMgMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPue8lue7hCAyMDwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0nMDPln7rmnKzmn6Xor6It5Zu+5qCH6YCJ5Lit6aKc6Imy5Y+Y5YyWJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtNDgzLjAwMDAwMCwgLTE5NS4wMDAwMDApJyBmaWxsPScjNThBMUZFJyBmaWxsLXJ1bGU9J25vbnplcm8nPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J3ppeXVhbicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNDc1LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0yMCcgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMC4wMDAwMDAsIDEuMDAwMDAwKSc+PGcgaWQ9J+a4heepui0oNCknIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDIuMDAwMDAwLCAtMC4wMDAwMDApJz48cGF0aCBkPSdNMS4wNTQ5MjE4Nyw5LjEwODA3MTQzIEwxMi41NzUwMjYsOS4xMDgwNzE0MyBDMTIuOTU1NjUxLDkuMTA4MDcxNDMgMTMuMTM0OTUzMSw4LjgyNTIxNDI5IDEyLjk3Mjg0MTEsOC40Nzk3MzIxNCBMMTEuNjEzNDkyMiw1LjU4MjI1IEMxMS40NTA3MDU3LDUuMjM2Nzg1NzEgMTEuMDA2NDI0NSw0Ljk1MzkxMDcxIDEwLjYyNTgzNTksNC45NTM5MTA3MSBMOC4yNDI3MDA1Miw0Ljk1MzkxMDcxIEw4LjI0MjcwMDUyLDAuNzA5NjI1IEM4LjI0MjcwMDUyLDAuMzI3MzAzNTcxIDcuOTMwNTgwNzMsMC4wMTQ5ODIxNDI5IDcuNTQ5OTU1NzMsMC4wMTQ5ODIxNDI5IEw2LjE2Mzc1NTIxLDAuMDE0OTgyMTQyOSBDNS43ODI0OTIxOSwwLjAxNDk4MjE0MjkgNS40NzAzNzI0LDAuMzI3MjY3ODU3IDUuNDcwMzcyNCwwLjcwOTYyNSBMNS40NzAzNzI0LDQuOTUzOTEwNzEgTDMuMDA0MDc1NTIsNC45NTM5MTA3MSBDMi42MjI3OTQyNyw0Ljk1MzkxMDcxIDIuMTc4NTEzMDIsNS4yMzc0MTA3MSAyLjAxNjMwOTksNS41ODIyNSBMMC42NTcxNDMyMjksOC40Nzk3MzIxNCBDMC40OTQzNTY3NzEsOC44MjUyMzIxNCAwLjY3MzY3NzA4Myw5LjEwODA3MTQzIDEuMDU0OTIxODgsOS4xMDgwNzE0MyBNMTIuMjUwNjAxNiwxMC4xMzY0NjQzIEwxLjYzNDQ4MTc3LDEwLjEzNjQ2NDMgQzEuNjkxOTc2NTYsMTEuMjA3ODM5MyAxLjY2NzQ3NjU2LDEyLjQ5NzA4OTMgMC43ODA3NzM0MzgsMTMuMjYyMjMyMSBDLTAuNDYwOTc5MTY3LDE0LjMzMjk2NDMgLTAuMDQyMzI4MTI1LDE1LjUwNDk0NjQgMC44MzgzNDExNDYsMTUuOTY4ODkyOSBMMi42NDA1ODU5NCwxNS45Njg4OTI5IEMyLjgxODA4MzMzLDE1LjcyNTgzOTMgMy43OTU0MjE4OCwxNC4zMzc5Mjg2IDQuMDgyNDAzNjUsMTIuOTM1MTYwNyBDNC4xMjcxMTk3OSwxMi42NDQzMjE0IDQuMTU0MDYyNSwxMi40NTE1ODkzIDQuMTU0MDYyNSwxMi40NTE1ODkzIEM0LjE0MTg0ODk2LDEyLjYxMTc4NTcgNC4xMTU0NzEzNSwxMi43NzMxNjA3IDQuMDgyNDAzNjUsMTIuOTM1MTYwNyBDMy45NDUzNTY3NywxMy44MjczNzUgMy42Mzg3Nzg2NSwxNS42NjU3NSAzLjQxNTM5ODQ0LDE1Ljk2ODg5MjkgTDQuNzE5NTEzMDIsMTUuOTY4ODkyOSBDNC44OTcwMjg2NSwxNS43MjU4MzkzIDUuODc0MzY3MTksMTQuMzM3OTI4NiA2LjE2MTMzMDczLDEyLjkzNTE2MDcgQzYuMTg2MTkzNTgsMTIuNzc0MDgzMyA2LjIxMDI3NDU4LDEyLjYxMjg5MSA2LjIzMzU3MjkyLDEyLjQ1MTU4OTMgQzYuMjIwNzAzMTMsMTIuNjExNzg1NyA2LjE5NDM4MDIxLDEyLjc3MzE2MDcgNi4xNjEzMzA3MywxMi45MzUxNjA3IEM2LjAyMzYyNzYsMTMuODI3Mzc1IDUuNzE3NjE0NTgsMTUuNjY1NzUgNS40OTM2NjkyNywxNS45Njg4OTI5IEw3LjEzNzQ0NzkyLDE1Ljk2ODg5MjkgQzcuMzE0OTYzNTQsMTUuNzI1ODM5MyA4LjI5MjMwMjA4LDE0LjMzNzkyODYgOC41NzkyNjU2MywxMi45MzUxNjA3IEM4LjYyMzk4MTc3LDEyLjY0NDMyMTQgOC42NTE1MDc4MSwxMi40NTE1ODkzIDguNjUxNTA3ODEsMTIuNDUxNTg5MyBDOC42Mzg2MTk3OSwxMi42MTE3ODU3IDguNjEyMzE1MSwxMi43NzMxNjA3IDguNTc5MjY1NjMsMTIuOTM1MTYwNyBDOC40NDE2NTM2NSwxMy44MjczNzUgOC4xMzU2NDA2MywxNS42NjU3NSA3LjkxMTYwNDE3LDE1Ljk2ODg5MjkgTDkuNTYyMTI3NiwxNS45Njg4OTI5IEM5LjczOTU3MDMxLDE1LjcyNTgzOTMgMTAuNzE2OTgxOCwxNC4zMzc5Mjg2IDExLjAwMzk2MzUsMTIuOTM1MTYwNyBDMTEuMDQ4Njc5NywxMi42NDQzMjE0IDExLjA3NjE4NzUsMTIuNDUxNTg5MyAxMS4wNzYxODc1LDEyLjQ1MTU4OTMgQzExLjA2MzMxNzcsMTIuNjExNzg1NyAxMS4wMzcwMTMsMTIuNzczMTYwNyAxMS4wMDM5NjM1LDEyLjkzNTE2MDcgQzEwLjg2NjI2MDQsMTMuODI3Mzc1IDEwLjU1OTY4MjMsMTUuNjY1NzUgMTAuMzM2MzAyMSwxNS45Njg4OTI5IEwxMS45OTY2ODc1LDE1Ljk2ODg5MjkgQzExLjk5NjY4NzUsMTUuOTY4ODkyOSAxMy4wOTE0NTgzLDE1LjU3NDI2NzkgMTIuOTIwNjg3NSwxNC4zMDQxNjA3IEMxMi42NzY1OTksMTIuNDkyNzg1NyAxMi41NzkyNTUyLDExLjQ4NTg1NzEgMTIuMjUwNjAxNiwxMC4xMzY0NjQzJyBpZD0n5b2i54q2Jz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.clearCache\')}}</span>\r\n    </button>\r\n    <button *ngIf="controlType===\'treelist\'" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-treeExpand"\r\n      (click)="handleExpand(true)">\r\n      <span class="f-icon f-icon-plus-outline font-color"></span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.btnExpand\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-reload-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    <button *ngIf="controlType===\'treelist\'" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-treeExpand"\r\n      (click)="handleExpand(false)">\r\n      <span class="f-icon f-icon-minus-outline font-color"></span>\r\n      <span *ngIf="!isMultiForm">{{localizeService.getValue(\'queryFramework.btnCollapse\')}}</span>\r\n      \x3c!-- <span class="f-icon f-icon-reload-sm" role="presentation"></span> --\x3e\r\n    </button>\r\n    <button *ngIf="formPrintOption && formPrintOption.isShowFormPrint && controlType !== \'crosstab\' && controlType !== \'charts\'" class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0" id="button-print" (click)="print()" (mouseenter)="handleHover(4, 0)" (mouseleave)="handleHover(4, 1)">\r\n      <span class="f-icon" role="presentation">\r\n        <img *ngIf="svgPrint" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZGVmcz48cGF0aCBkPSdNMTQuNjI1LDEzLjgyMTU1IEwxNC42MjUsMTcuMSBMMy4zNzUsMTcuMSBMMy4zNzUsMTMuODIxNTUgTDAsMTMuODIxNTUgTDAsNi43MTgwOTk5OSBDMCw2LjU3MzYgMC4wNTk0LDYuNDM0MTk5OTkgMC4xNjQ3LDYuMzMxMzUgQzAuMjY4OTQyOTk5LDYuMjI5NDQxNTEgMC40MTI0Njc5MzksNi4xNzE3ODYxOSAwLjU2MjUwMDAwNyw2LjE3MTU1MDAxIEwxNy40Mzc1LDYuMTcxNTUwMDEgQzE3LjU4NjksNi4xNzE1NTAwMSAxNy43Myw2LjIyOTM1IDE3LjgzNTMsNi4zMzEzNSBDMTcuOTQwNiw2LjQzMzM1IDE4LDYuNTcyNzQ5OTkgMTgsNi43MTgwOTk5OSBMMTgsMTMuODIxNTUgTDE0LjYyNSwxMy44MjE1NSBaIE01LjYyNSwxMS42MzUzNSBMNS42MjUsMTQuOTE0NjUgTDEyLjM3NSwxNC45MTQ2NSBMMTIuMzc1LDExLjYzNDUgTDUuNjI1LDExLjYzNDUgTDUuNjI1LDExLjYzNTM1IFogTTE1LjE4NzUsMTAuMDA5MyBDMTUuNDg1NCwxMC4wMDkzIDE1Ljc3MjUsOS44OTQ1NTAwMSAxNS45ODMxLDkuNjg5NyBDMTYuMTkzNyw5LjQ4NDg0OTk5IDE2LjMxMjUsOS4yMDY4OTk5OSAxNi4zMTI1LDguOTE2MTk5OTkgQzE2LjMxMjUsOC42MjcxOTk5OSAxNi4xOTM3LDguMzQ5MjQ5OTkgMTUuOTgzMSw4LjE0MzU0OTk5IEMxNS43NzQ1NTQ0LDcuOTM5ODE0ODIgMTUuNDg3NTQzLDcuODI0NTE5NjQgMTUuMTg3NSw3LjgyMzk1MDAxIEMxNC44ODk2LDcuODIzOTUwMDEgMTQuNjAyNSw3LjkzODcwMDAxIDE0LjM5MTksOC4xNDM1NDk5OSBDMTQuMTc5NzgwMSw4LjM1MTEyMDg2IDE0LjA2MTYyNTUsOC42Mjg1NzI0NSAxNC4wNjI0OTUyLDguOTE3MDUgQzE0LjA2MjQ5NTIsOS4yMDYwNTAwMSAxNC4xODEzLDkuNDg0ODQ5OTkgMTQuMzkxOSw5LjY4OTcgQzE0LjYwMzQsOS44OTM3IDE0Ljg4OTYsMTAuMDA5MyAxNS4xODc1LDEwLjAwOTMgTDE1LjE4NzUsMTAuMDA5MyBaJyBpZD0ncGF0aC0xJz48L3BhdGg+PC9kZWZzPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9J+S6pOS6kuaWueahiDEt5bi46KeE5oCB5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTYxLjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTQnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDE1NS4wMDAwMDAsIDEyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTblpIfku70nPjxtYXNrIGlkPSdtYXNrLTInIGZpbGw9J3doaXRlJz48dXNlIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvbWFzaz48dXNlIGlkPSflvaLnirYnIGZpbGw9JyM4QTk4QkUnIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvZz48cGF0aCBkPSdNMy44MjUsMS44IEwxNC4xNzUsMS44IEMxNC40MjM1MjgxLDEuOCAxNC42MjUsMi4wMDE0NzE4NiAxNC42MjUsMi4yNSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDE0LjYyNSw1LjA3ODQ0OTk5IEwzLjM3NSw1LjA3ODQ0OTk5IEwzLjM3NSwyLjI1IEMzLjM3NSwyLjAwMTQ3MTg2IDMuNTc2NDcxODYsMS44IDMuODI1LDEuOCBaJyBpZD0n55+p5b2iJyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjUnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+" style="width: 16px; height: 16px; display: block;" />\r\n        <img *ngIf="!svgPrint" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGRlZnM+PHBhdGggZD0nTTE0LjYyNSwxMy44MjE1NSBMMTQuNjI1LDE3LjEgTDMuMzc1LDE3LjEgTDMuMzc1LDEzLjgyMTU1IEwwLDEzLjgyMTU1IEwwLDYuNzE4MDk5OTkgQzAsNi41NzM2IDAuMDU5NCw2LjQzNDE5OTk5IDAuMTY0Nyw2LjMzMTM1IEMwLjI2ODk0Mjk5OSw2LjIyOTQ0MTUxIDAuNDEyNDY3OTM5LDYuMTcxNzg2MTkgMC41NjI1MDAwMDcsNi4xNzE1NTAwMSBMMTcuNDM3NSw2LjE3MTU1MDAxIEMxNy41ODY5LDYuMTcxNTUwMDEgMTcuNzMsNi4yMjkzNSAxNy44MzUzLDYuMzMxMzUgQzE3Ljk0MDYsNi40MzMzNSAxOCw2LjU3Mjc0OTk5IDE4LDYuNzE4MDk5OTkgTDE4LDEzLjgyMTU1IEwxNC42MjUsMTMuODIxNTUgWiBNNS42MjUsMTEuNjM1MzUgTDUuNjI1LDE0LjkxNDY1IEwxMi4zNzUsMTQuOTE0NjUgTDEyLjM3NSwxMS42MzQ1IEw1LjYyNSwxMS42MzQ1IEw1LjYyNSwxMS42MzUzNSBaIE0xNS4xODc1LDEwLjAwOTMgQzE1LjQ4NTQsMTAuMDA5MyAxNS43NzI1LDkuODk0NTUwMDEgMTUuOTgzMSw5LjY4OTcgQzE2LjE5MzcsOS40ODQ4NDk5OSAxNi4zMTI1LDkuMjA2ODk5OTkgMTYuMzEyNSw4LjkxNjE5OTk5IEMxNi4zMTI1LDguNjI3MTk5OTkgMTYuMTkzNyw4LjM0OTI0OTk5IDE1Ljk4MzEsOC4xNDM1NDk5OSBDMTUuNzc0NTU0NCw3LjkzOTgxNDgyIDE1LjQ4NzU0Myw3LjgyNDUxOTY0IDE1LjE4NzUsNy44MjM5NTAwMSBDMTQuODg5Niw3LjgyMzk1MDAxIDE0LjYwMjUsNy45Mzg3MDAwMSAxNC4zOTE5LDguMTQzNTQ5OTkgQzE0LjE3OTc4MDEsOC4zNTExMjA4NiAxNC4wNjE2MjU1LDguNjI4NTcyNDUgMTQuMDYyNDk1Miw4LjkxNzA1IEMxNC4wNjI0OTUyLDkuMjA2MDUwMDEgMTQuMTgxMyw5LjQ4NDg0OTk5IDE0LjM5MTksOS42ODk3IEMxNC42MDM0LDkuODkzNyAxNC44ODk2LDEwLjAwOTMgMTUuMTg3NSwxMC4wMDkzIEwxNS4xODc1LDEwLjAwOTMgWicgaWQ9J3BhdGgtMSc+PC9wYXRoPjwvZGVmcz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSflm77moIfpgInkuK3popzoibLliIflm77lpIfku70nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC0xNjEuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNCcgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMTU1LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNuWkh+S7vSc+PG1hc2sgaWQ9J21hc2stMicgZmlsbD0nd2hpdGUnPjx1c2UgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9tYXNrPjx1c2UgaWQ9J+W9oueKticgZmlsbD0nIzU4QTFGRScgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9nPjxwYXRoIGQ9J00zLjgyNSwxLjggTDE0LjE3NSwxLjggQzE0LjQyMzUyODEsMS44IDE0LjYyNSwyLjAwMTQ3MTg2IDE0LjYyNSwyLjI1IEwxNC42MjUsNS4wNzg0NDk5OSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDMuMzc1LDUuMDc4NDQ5OTkgTDMuMzc1LDIuMjUgQzMuMzc1LDIuMDAxNDcxODYgMy41NzY0NzE4NiwxLjggMy44MjUsMS44IFonIGlkPSfnn6nlvaInIGZpbGw9JyM1OEExRkUnIG9wYWNpdHk9JzAuNSc+PC9wYXRoPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=" style="width: 16px; height: 16px; display: block;" />\r\n      </span>\r\n      <span *ngIf="!isMultiForm">&nbsp;{{localizeService.getValue(\'queryFramework.btnPrintForm\')}}</span>\r\n    </button>\r\n    \x3c!-- <paras-mapping [queryId]="queryId"  [qoManagerCode]="qoManagerCode" [queryRelativeUrl]="queryRelativeUrl" [isMultiForm]="isMultiForm" *ngIf="false"></paras-mapping> --\x3e\r\n    <div class="dropdown" fDropdown *ngIf="isMultiForm && inputTemplate">\r\n      <button class="btn f-rt-btn f-btn-ml btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"\r\n        fDropdownToggle (click)="isClickShowMore=!isClickShowMore">\r\n        <span class="f-icon f-icon-more-vertical" role="presentation"></span>\r\n      </button>\r\n      <div class="dropdown-menu" fDropdownMenu *ngIf="isClickShowMore">\r\n        <ng-container *ngTemplateOutlet="inputTemplate"></ng-container>\r\n      </div>\r\n    </div>\r\n    <div *ngIf="!isMultiForm">\r\n      <ng-container *ngTemplateOutlet="inputTemplate"></ng-container>\r\n    </div>\r\n  </div>\r\n  <query-framework-pagination *ngIf="controlType!=\'charts\' && controlType!=\'crosstab\' && !isMultiForm "\r\n    [pageInfo]="pageInfo" [localizePageInfo]="localizePageInfo" (pageChange)="pageChange.emit($event)">\r\n  </query-framework-pagination>\r\n</div>\r\n\x3c!-- <condition-dialog [queryId]="queryId"></condition-dialog> --\x3e\r\n',styles:[".font-color{color:#8a98be!important}"]}]}],e.ctorParameters=function(){return[{type:I.CloudprintService},{type:s.CacheService},{type:M.Injector,decorators:[{type:M.Optional}]}]},e.propDecorators={queryId:[{type:M.Input}],groupType:[{type:M.Input}],queryName:[{type:M.Input}],controlType:[{type:M.Input}],isMultiForm:[{type:M.Input}],schemaId:[{type:M.Input}],schemaInfo:[{type:M.Input}],colList:[{type:M.Input}],pageInfo:[{type:M.Input}],isShowToolbar:[{type:M.Input}],queryRelativeUrl:[{type:M.Input}],qoManagerCode:[{type:M.Input}],conditionExpression:[{type:M.Input}],schemaSelected:[{type:M.Output}],dialogBeforeClose:[{type:M.Output}],pageChange:[{type:M.Output}],exportExcel:[{type:M.Output}],printIntegration:[{type:M.Output}],printPreview:[{type:M.Output}],refreshEvent:[{type:M.Output}],filterCondition:[{type:M.Output}],clearCache:[{type:M.Output}],expendCollapseLevel:[{type:M.Output}],clearSort:[{type:M.Output}],inputTemplate:[{type:M.Input}],qoId:[{type:M.Input}],voId:[{type:M.Input}],qdpView:[{type:M.Input}],templateType:[{type:M.Input}],showSchemaManager:[{type:M.Input}],showExport:[{type:M.Input}],showReFresh:[{type:M.Input}],showFilter:[{type:M.Input}],showPrint:[{type:M.Input}],showClearSort:[{type:M.Input}],showClearCache:[{type:M.Input}],showPreSchema:[{type:M.Input}],formPrintOption:[{type:M.Input}],paginationComponent:[{type:M.ViewChild,args:[f]}],conditionDialog:[{type:M.Input}]},e}(),E=function(){function e(e,t,i,n,r){var a=this;this.schemaService=e,this.renderService=t,this.filter=i,this.filterService=n,this.parasMappingManagerService=r,this.isShowToolbar=!0,this.isMultiForm=!1,this.isInit=!0,this.toolbarOption={showPreSchema:!0,showSchemaManager:!0,showExport:!0,showReFresh:!0,showFilter:!0,showPrint:!0,showClearSort:!0,showClearCache:!0},this.toolBarEvent="toolBarEvent"+w.EventBus.guid(),this.contentSizeChange=new M.EventEmitter,this.formPrintOption={isShowFormPrint:!1,printBEId:"",printFormIdField:""},this.size={height:"500px",width:"300px"},this.pageInfo={},this.pageIndex=1,this.co={NodeType:"QueryNode",IsBe:!0,ContainElements:[],Code:"QueryNode",Name:"QueryNdoe",BizEntityID:w.EventBus.guid()},this.subscriptions=[];var o=this;this.tabId=w.RtfServices.getTabId(this.queryId),this.subscriptions=[],this.subscriptions.push(o.schemaService.schemaInfo.subscribe(function(e){try{if(e){var t=Object.assign({},e);t.schemaList&&t.schemaList[a.queryId]?(t.schemaList=t.schemaList[a.queryId],o.schemaId?"1"!==o.schemaId&&"prefab"!==o.schemaId&&"public_schema"!==o.schemaId&&"person_schema"!==o.schemaId&&o.initColListData(t.schemaList[o.schemaId].schemaValue.columnOption.colList):t.isDefaultSchema&&t.isDefaultSchema.id&&o.initColListData(t.isDefaultSchema.schemaValue.columnOption.colList)):(t.schemaList=null,o.initColListData(t.preSchema.schemaValue.columnOption.colList)),o.schemaInfo=t}}catch(i){}})),this.subscriptions.push(o.schemaService.colList.subscribe(function(e){(o.colList=e)&&e.length&&a.initColListData(e,"col")})),this.filterService&&this.filterService.isFilterQDP&&this.subscriptions.push(o.filterService.isFilterQDP.subscribe(function(e){setTimeout(function(){e&&(o.toolbarComponent&&o.toolbarComponent.paginationComponent&&(o.toolbarComponent.paginationComponent.initPageInfo(),o.pageIndex=o.toolbarComponent.paginationComponent.pagination.pageIndex=1,o.pageInfo=o.toolbarComponent.paginationComponent.pagination),o.refresh())})}))}return e.prototype.getQdpView=function(){return this.qdpView?this.qdpView:w.QDPCacheUtil.getCache(this.tabId+this.queryId+this.controlType+"qdpview")?w.QDPCacheUtil.getCache(this.tabId+this.queryId+this.controlType+"qdpview"):void 0},e.prototype.getCharts=function(){return this.charts?this.charts:w.QDPCacheUtil.getCache(this.tabId+this.queryId+"lcp-charts")?w.QDPCacheUtil.getCache(this.tabId+this.queryId+"lcp-charts"):void 0},e.prototype.getFormDatasource=function(){return this.formdatasource?this.formdatasource:w.QDPCacheUtil.getCache(this.tabId+this.queryId+"form-charts")?w.QDPCacheUtil.getCache(this.tabId+this.queryId+"form-charts"):void 0},e.prototype.getConditionDialog=function(){return this.conditionDialog?this.conditionDialog:w.QDPCacheUtil.getCache(this.tabId+"advanceTemplate-condition-dialog")?w.QDPCacheUtil.getCache(this.tabId+"advanceTemplate-condition-dialog"):void 0},e.prototype.ngOnDestroy=function(){var e,t;if(this.subscriptions&&this.subscriptions.length)try{for(var i=z(this.subscriptions),n=i.next();!n.done;n=i.next()){n.value.unsubscribe()}}catch(r){e={error:r}}finally{try{n&&!n.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.ngOnInit=function(){var e=this,t=this;if("crosstab"!==this.controlType&&this.subscriptions.push(t.schemaService.pageInfoChange.subscribe(function(e){t.pageInfo=e})),1==this.isInit&&this.subscriptions.push(t.filterService.getFilter(t.qoManagerCode?t.qoManagerCode:t.queryId,t.queryId,t.queryRelativeUrl,1,this.groupType).subscribe(function(e){e&&(t.conditionExpression=JSON.stringify(e.filter))})),this.isMultiForm){var i=document.getElementById(this.toolBarEvent);i.addEventListener("mouseover",function(){e.isShowToolbar=!0}),i.addEventListener("mouseout",function(){e.isShowToolbar=!1})}},e.prototype.initColListData=function(e,t){var i=this;e.forEach(function(e){i.recursiveInitColListData(null,e,t)})},e.prototype.recursiveInitColListData=function(e,t,n){var r=this;if(t){var i=this.co.ContainElements.findIndex(function(e){return e.Code===t.bindField});if(i<0){var a={};a.ID=w.EventBus.guid(),a.Code=t.bindField,a.LabelID=t.bindField,a.MDataType=this.getDataType(t.type),a.NodeType="QueryProperty",a.Name=t.name,this.co.ContainElements.push(a)}else"col"!==n&&(this.co.ContainElements[i].Name=t.name);t.childList&&t.childList.length&&this.recursiveInitColListData(t.childList,null)}else e.forEach(function(t){var e=r.co.ContainElements.findIndex(function(e){return e.Code===t.bindField});if(e<0){var i={};i.ID=w.EventBus.guid(),i.Code=t.bindField,i.LabelID=t.bindField,i.MDataType=r.getDataType(t.type),i.NodeType="QueryProperty",i.Name=t.name,r.co.ContainElements.push(i)}else"col"!==n&&(r.co.ContainElements[e].Name=t.name);t.childList&&t.childList.length&&r.recursiveInitColListData(t.childList,null)})},e.prototype.ngOnChanges=function(e){for(var t in e){var i=e[t].currentValue;if(null!=i)switch(this.tabId=w.RtfServices.getTabId(i),t){case"queryId":i&&w.QDPCacheUtil.setCache(this.tabId+"queryId",i);break;case"qoManagerCode":i&&w.QDPCacheUtil.setCache(this.tabId+"qoManagerCode",i);break;case"controlType":i&&w.QDPCacheUtil.setCache(this.tabId+"controlType",i);break;case"queryRelativeUrl":i&&w.QDPCacheUtil.setCache(this.tabId+"queryRelativeUrl",i);break;case"voId":i&&w.QDPCacheUtil.setCache(this.tabId+"voId",i)}}},e.prototype.ngAfterViewInit=function(){var t=this;this.subscriptions.push(t.getQdpView().sheetChanged.subscribe(function(e){t.groupType=e})),this.getConditionDialog()?(this.subscriptions.push(t.getConditionDialog().queryEvent.subscribe(function(e){1===e?t.getQdpView().initQdpView():1<e&&t.refresh()})),this.subscriptions.push(t.getConditionDialog().dialogInitEvent.subscribe(function(e){"qdpAdvancedTemplate"===t.templateType&&t.getConditionDialog().handleDialogShow()}))):(w.EventBus.register(this.tabId+"advanceTemplate-condition-dialog-queryEvent",function(e){1===e?t.getQdpView().initQdpView():1<e&&t.refresh()},this.tabId),w.EventBus.register(this.tabId+"advanceTemplate-condition-dialog-dialogInitEvent",function(e){"qdpAdvancedTemplate"===t.templateType&&t.getConditionDialog().handleDialogShow()},this.tabId))},e.prototype.handleSchemaSelected=function(e){this.schemaId=e,"charts"!==this.controlType?this.getQdpView()&&this.getQdpView().initSpread(this.queryId,e,this.controlType,this.qoManagerCode,this.pageIndex,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId,null,!0):this.getCharts()?this.getCharts().render(e,this.getChartsOption(e),"",this.conditionExpression):this.getFormDatasource()&&this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId)),this.pageIndex=1},e.prototype.handleBeforeClose=function(e){this.schemaId=e,"charts"!==this.controlType?this.getQdpView()&&this.getQdpView().initSpread(this.queryId,e,this.controlType,this.qoManagerCode,this.pageIndex,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId,null,!0):this.getCharts()?this.getCharts().render(e,this.getChartsOption(e),"",this.conditionExpression):this.getFormDatasource()&&this.getFormDatasource().charts.setOption(this.getChartsOption(e)),this.pageIndex=this.pageIndex?this.pageIndex:1},e.prototype.refresh=function(){"charts"!==this.controlType?this.getQdpView()&&(this.getQdpView().pageIndex=this.pageIndex,this.getQdpView().initSpread(this.queryId,this.schemaId,this.controlType,this.qoManagerCode,this.pageIndex,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId)):this.getCharts()?this.getCharts().render(this.schemaId,this.getChartsOption(this.schemaId),"",this.conditionExpression):this.getFormDatasource()&&this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId)),this.pageIndex=this.pageIndex?this.pageIndex:1},e.prototype.clearCache=function(){this.renderService.clearCache(this.queryId,this.schemaId,this.controlType,this.qoManagerCode,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId)},e.prototype.clearSort=function(){this.getQdpView().handleClearSort()},e.prototype.handlePageChange=function(e){this.pageIndex=e.pageIndex,"crosstab"!==this.controlType?(this.getQdpView().pageIndex=this.pageIndex,this.getQdpView().initSpread(this.queryId,this.schemaId,this.controlType,this.qoManagerCode,this.pageIndex,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId)):this.getQdpView().handleCrosstabPageChange(this.pageIndex,e.pageSize)},e.prototype.handleExportExcel=function(e){this.getQdpView().exportExcel(this.queryId,this.schemaId,this.controlType,this.pageIndex,this.qoManagerCode,this.queryRelativeUrl,this.conditionExpression,this.groupType,this.voId,this.pageInfo.totalCount,e)},e.prototype.pdfExportEvent=function(e){this.getQdpView().pdfExportEvent(this.queryId,this.schemaId,this.controlType,this.qoManagerCode,e,this.queryRelativeUrl,this.conditionExpression,this.pageIndex,this.groupType,this.voId)},e.prototype.printPreview=function(e){this.getQdpView().printPreView(this.queryId,this.schemaId,this.controlType,this.qoManagerCode,e,this.queryRelativeUrl,this.conditionExpression,this.pageIndex,this.groupType,this.voId)},e.prototype.onResized=function(e){this.size.height=e.newHeight+"px",this.size.width=(e.newWidth?e.newWidth-15:0)+"px",this.contentSizeChange.emit(Object.assign({},this.size))},e.prototype.getChartsOption=function(e){var t={};return"prefab"===e||this.schemaInfo&&this.schemaInfo.schemaList&&this.schemaInfo.schemaList[e]&&(t=Object.assign({},this.schemaInfo.schemaList[e].schemaValue.chartsStyle,this.schemaInfo.schemaList[e].schemaValue.chartsData)),t.series&&this.schemaInfo.schemaList[e].schemaValue.chartsType.series.type&&(t.series.type=this.schemaInfo.schemaList[e].schemaValue.chartsType.series.type,"line1"!==t.series.type?delete t.series.areaStyle:t.series.areaStyle={}),t},e.prototype.filterCondition=function(){var i=this,n=this;this.co&&this.co.ContainElements&&this.co.ContainElements.length&&(this.filter.addCommonObject(this.co),this.filter.addInjectedEntity(this.co.Code,"CommonObject"),this.filter.addFilterCondition(this.conditionExpression),this.filter.buildExpression().then(function(e){if(i.conditionExpression=e){var t={Id:w.EventBus.guid(),filter:e,queryid:i.queryId,datasourceid:i.qoManagerCode?i.qoManagerCode:i.queryId,queryType:1};i.subscriptions.push(n.filterService.saveFilter(t,n.queryRelativeUrl).subscribe(function(e){return n.refresh()}))}else i.subscriptions.push(n.filterService.deleteFilter(n.qoManagerCode?n.qoManagerCode:n.queryId,n.queryId,n.queryRelativeUrl,1).subscribe(function(e){return n.refresh()})),i.conditionExpression=null,"charts"!==n.controlType&&(n.getQdpView().conditionExpression=null)}))},e.prototype.expendCollapseLevel=function(e){for(var t=this.getQdpView().spread.getActiveSheet().rowOutlines.getMaxLevel(),i=1;i<=t;i++)this.getQdpView().spread.getActiveSheet().rowOutlines.expand(i,e);this.getQdpView().spread.getActiveSheet().resumePaint()},e.prototype.getDataType=function(e){var t="String";switch(e){case"string":t="String";break;case"text":t="Text";break;case"integer":case"int":t="Integer";break;case"decimal":t="Decimal";break;case"boolean":t="Boolean";break;case"date":t="Date";break;case"dateTime":t="DateTime";break;case"binary":t="Binary"}return t},e.decorators=[{type:M.Component,args:[{selector:"query-framework-layout",template:'<div class="f-page f-page-is-managelist" id ="{{toolBarEvent}}" >\r\n  <div class="f-page-header mt-1" [ngClass]="{\'floatShow shadow-none\': isMultiForm && isShowToolbar }"\r\n    [hidden]="!isShowToolbar">\r\n    <query-framework-toolbar [formPrintOption]="formPrintOption" [conditionDialog]="conditionDialog" [templateType]="templateType" [schemaInfo]="schemaInfo" [colList]="colList" [pageInfo]="pageInfo" [schemaId]="schemaId"\r\n      [queryId]="queryId" [groupType]="groupType" [queryName]="queryName" [controlType]="controlType" [isShowToolbar]="isShowToolbar"\r\n      [isMultiForm]="isMultiForm" [inputTemplate]="inputTemplate" [qoManagerCode]="qoManagerCode" [qdpView]="qdpView" [conditionExpression]="conditionExpression"\r\n      [queryRelativeUrl]="queryRelativeUrl" [qoId]="qoId" [voId]="voId" (schemaSelected)="handleSchemaSelected($event)"\r\n      (dialogBeforeClose)="handleBeforeClose($event)" (pageChange)="handlePageChange($event)"\r\n      (exportExcel)="handleExportExcel($event)" (printIntegration)="pdfExportEvent($event)" (printPreview)="printPreview($event)" (refreshEvent)="refresh()"\r\n      (filterCondition)="filterCondition()" (clearCache)="clearCache()" (clearSort)="clearSort()"\r\n      (expendCollapseLevel)="expendCollapseLevel($event)"\r\n      [showSchemaManager]="toolbarOption.showSchemaManager"\r\n      [showExport]="toolbarOption.showExport"\r\n      [showReFresh]="toolbarOption.showReFresh"\r\n      [showFilter]="toolbarOption.showFilter"\r\n      [showPrint]="toolbarOption.showPrint"\r\n      [showClearSort]="toolbarOption.showClearSort"\r\n      [showClearCache]="toolbarOption.showClearCache"\r\n      [showPreSchema]="toolbarOption.showPreSchema"\r\n      >\r\n    </query-framework-toolbar>\r\n  </div>\r\n  <div class="position-relative h-100 ml-2 mr-2 bg-white farris-overflow-y-auto">\r\n    <div class="farris-form farris-card-content-bg f-utils-absolute-all f-utils-flex-column" (resized)="onResized($event)">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n',styles:[".floatShow{position:absolute;right:2px;top:2px;z-index:1;background-color:rgba(255,255,255,.15)}"]}]}],e.ctorParameters=function(){return[{type:y.SchemaService},{type:t.RenderService},{type:T.FilterService},{type:w.FilterManagerService},{type:w.ParasMappingManagerService}]},e.propDecorators={queryId:[{type:M.Input}],groupType:[{type:M.Input}],qoManagerCode:[{type:M.Input}],controlType:[{type:M.Input}],queryName:[{type:M.Input}],isShowToolbar:[{type:M.Input}],isMultiForm:[{type:M.Input}],queryRelativeUrl:[{type:M.Input}],qoId:[{type:M.Input}],voId:[{type:M.Input}],templateType:[{type:M.Input}],isInit:[{type:M.Input}],toolbarOption:[{type:M.Input}],qdpView:[{type:M.ContentChild,args:["qdp-view"]}],charts:[{type:M.ContentChild,args:["lcpBindingData"]}],formdatasource:[{type:M.ContentChild,args:["formBindingData"]}],conditionDialog:[{type:M.Input}],toolbarComponent:[{type:M.ViewChild,args:[L]}],contentSizeChange:[{type:M.Output}],formPrintOption:[{type:M.Input}],inputTemplate:[{type:M.Input}]},e}(),S=function(){function e(e){this.injector=e,this.exportExcel=new M.EventEmitter,this.svgExport=!0,this.localizeService=this.injector.get(a.LocalizeService),this.exportTitle=this.localizeService.getValue("queryFramework.exportName"),this.exportType1=this.localizeService.getValue("queryFramework.btnExportText"),this.exportType2=this.localizeService.getValue("queryFramework.btnExportValue")}return e.prototype.ngOnInit=function(){},e.prototype.handleHover=function(e,t){this.svgExport=1===t},e.decorators=[{type:M.Component,args:[{selector:"export-data",template:'<div class="dropdown" fDropdown>\r\n  <button class="btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0 dropdown-toggle" type="button" id="dropdownMenuButtonExport" fDropdownToggle  (mouseenter)="handleHover(0, 0)" (mouseleave)="handleHover(0, 1)">\r\n    <span class="f-icon" role="presentation">\r\n      <img *ngIf="svgExport" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRhb2NodTwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0n5Lqk5LqS5pa55qGIMS3luLjop4TmgIHlpIfku70nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC0yMzUuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNycgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMjI5LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J2Rhb2NodS00JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNMTEuNDM3NTM5MSwxIEw0LjE3OCwxIEw0LjE3OCwxNC4wNjggTDE2LjE1NywxNC4wNjggTDE2LjE1Nyw0LjQ4NTI3MzE2IEwxMS40Mzc1MzkxLDQuNDg1MjczMTYgTDExLjQzNzUzOTEsMSBaIE0xNC4xNjAzODAzLDguODM1NTk1MjIgTDE0LjE2MDM4MDMsOS43MDkxNjEwMyBMMTAuNTMwMzY4MywxMi4zMjA4Njg0IEwxMC41MzAzNjgzLDEwLjU4MjcyNjggTDYuODk5OTQzMjgsMTAuNTgyNzI2OCBMNi44OTk5NDMyOCw3Ljk3MTAwMTI5IEwxMC41MzA0MDQyLDcuOTcxMDAxMjkgTDEwLjUzMDQwNDIsNi4yMjM4ODc4NyBMMTQuMTYwMzgwMyw4LjgzNTU5NTIyIFonIGlkPSflvaLnirYnIGZpbGw9JyM4QTk4QkUnIGZpbGwtcnVsZT0nbm9uemVybyc+PC9wYXRoPjxwYXRoIGQ9J00xMi44OSwxIEwxMi44OSwzLjY0MDg4NTIgTDE1LjYyMjYwNiwzLjY0MDg4NTIgTDEyLjg5LDEgWiBNMiwyLjg1NTIzNjk0IEwyLDE2LjI0NiBMMTMuNjE3MTQ5MiwxNi4yNDYgTDEzLjYxNzE0OTIsMTQuOTQ3MjM0OCBMMy4yOTY1MjMyMSwxNC45NDcyMzQ4IEwzLjI5NjUyMzIxLDIuODU1MjM2OTQgTDIsMi44NTUyMzY5NCBaJyBpZD0n5b2i54q2JyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjY5NTQ3NTI2Jz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=" style="width: 16px; height: 16px; display: block;" />\r\n      <img *ngIf="!svgExport" src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRhb2NodTI8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9J+Wbvuagh+mAieS4reminOiJsuWIh+WbvuWkh+S7vScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTIzNS4wMDAwMDAsIC0xOTUuMDAwMDAwKScgZmlsbD0nIzU4QTFGRSc+PGcgaWQ9J+e8lue7hC0xNScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi4wMDAwMDAsIDE4Mi4wMDAwMDApJz48ZyBpZD0n57yW57uELTE3JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgyMjkuMDAwMDAwLCAxMS4wMDAwMDApJz48ZyBpZD0nZGFvY2h1LTQnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDAuMDAwMDAwLCAyLjAwMDAwMCknPjxwYXRoIGQ9J00xMS40Mzc1MzkxLDEgTDQuMTc4LDEgTDQuMTc4LDE0LjA2OCBMMTYuMTU3LDE0LjA2OCBMMTYuMTU3LDQuNDg1MjczMTYgTDExLjQzNzUzOTEsNC40ODUyNzMxNiBMMTEuNDM3NTM5MSwxIFogTTE0LjE2MDM4MDMsOC44MzU1OTUyMiBMMTQuMTYwMzgwMyw5LjcwOTE2MTAzIEwxMC41MzAzNjgzLDEyLjMyMDg2ODQgTDEwLjUzMDM2ODMsMTAuNTgyNzI2OCBMNi44OTk5NDMyOCwxMC41ODI3MjY4IEw2Ljg5OTk0MzI4LDcuOTcxMDAxMjkgTDEwLjUzMDQwNDIsNy45NzEwMDEyOSBMMTAuNTMwNDA0Miw2LjIyMzg4Nzg3IEwxNC4xNjAzODAzLDguODM1NTk1MjIgWicgaWQ9J+W9oueKticgZmlsbC1ydWxlPSdub256ZXJvJz48L3BhdGg+PHBhdGggZD0nTTEyLjg5LDEgTDEyLjg5LDMuNjQwODg1MiBMMTUuNjIyNjA2LDMuNjQwODg1MiBMMTIuODksMSBaIE0yLDIuODU1MjM2OTQgTDIsMTYuMjQ2IEwxMy42MTcxNDkyLDE2LjI0NiBMMTMuNjE3MTQ5MiwxNC45NDcyMzQ4IEwzLjI5NjUyMzIxLDE0Ljk0NzIzNDggTDMuMjk2NTIzMjEsMi44NTUyMzY5NCBMMiwyLjg1NTIzNjk0IFonIGlkPSflvaLnirYnIG9wYWNpdHk9JzAuNjk1NDc1MjYnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==" style="width: 16px; height: 16px; display: block;" />\r\n    </span>\r\n    \x3c!-- <span class="f-icon f-icon-download" role="presentation"></span> --\x3e\r\n    <span *ngIf="!isMultiForm">&nbsp;{{exportTitle}}</span>\r\n  </button>\r\n  <div class="dropdown-menu" fDropdownMenu>\r\n    <a class="dropdown-item" href="javascript:void(0);" (click)="exportExcel.emit(\'text\')">{{exportType1}}</a>\r\n    <a class="dropdown-item" href="javascript:void(0);" (click)="exportExcel.emit(\'value\')">{{exportType2}}</a>\r\n  </div>\r\n</div>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:M.Injector}]},e.propDecorators={isMultiForm:[{type:M.Input}],exportExcel:[{type:M.Output}]},e}(),b=function(){function e(e,t,i,n){this.injector=e,this.msgService=t,this.conditionService=i,this.notifyService=n,this.expandPublic=!0,this.expandPersonal=!0,this.publicList=[],this.personalList=[],this.removeList=[],this.motifyList=[],this.removeListEvent=new o.Subject,this.injector&&(this.localizeService=this.injector.get(a.LocalizeService),this.formErrorService=this.injector.get(c.FormErrorService))}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){},e.prototype.handleDialogShow=function(){this.farrisDialog.show()},e.prototype.handleExpandType=function(e){this.expandPublic=0===e?!this.expandPublic:this.expandPublic,this.expandPersonal=1===e?!this.expandPersonal:this.expandPersonal},e.prototype.handleNgModelChange=function(e,t){t.isDefault=e?1:0},e.prototype.handleDeleteSchame=function(t){this.removeList.findIndex(function(e){return e.id===t.id})<0&&(this.removeList.push(t),this.motifyList.push({type:"delete",id:t.id}));var e=0===t.schemaType?this.publicList.findIndex(function(e){return e.id===t.id}):this.personalList.findIndex(function(e){return e.id===t.id});0===t.schemaType?this.publicList.splice(e,1):this.personalList.splice(e,1)},e.prototype.handleSettingDefault=function(t){var i=this;this.publicList.forEach(function(e){e.isDefault=e.id===t.id?1:0,e.id===t.id&&i.motifyList.push({type:"edit",id:t.id})}),this.personalList.forEach(function(e){e.isDefault=e.id===t.id?1:0,e.id===t.id&&i.motifyList.push({type:"edit",id:t.id})})},e.prototype.handleOKClick=function(){var e=this,i=this;if(this.motifyList.length){var n,r=[];this.motifyList.forEach(function(t){"delete"===t.type?r.push(t.id):(n=i.publicList.find(function(e){return e.id===t.id}))&&n.id||(n=i.personalList.find(function(e){return e.id===t.id}))}),n&&n.schemaValue&&(n.schemaValue=n&&n.schemaValue?JSON.stringify(n.schemaValue):null),r.length&&n&&n.id?this.conditionService.deleteSchemaList(r.join(","),i.queryId).subscribe(function(){e.conditionService.saveSchema(n).subscribe(function(){i.clearChanges(),i.notifyService.success({title:i.localizeService.getValue("queryFramework.message.info.title"),msg:i.localizeService.getValue("queryFramework.message.operate.success"),timeout:3e3}),i.farrisDialog.close()},function(e){i.formErrorService.exception(e.Message,e),i.farrisDialog.close()})},function(e){i.formErrorService.exception(e.Message,e),i.farrisDialog.close()}):r.length?this.conditionService.deleteSchemaList(r.join(","),i.queryId).subscribe(function(){i.clearChanges(),i.notifyService.success({title:i.localizeService.getValue("queryFramework.message.info.title"),msg:i.localizeService.getValue("queryFramework.message.operate.success"),timeout:3e3}),i.farrisDialog.close()},function(e){i.formErrorService.exception(e.Message,e),i.farrisDialog.close()}):n&&n.id&&this.conditionService.saveSchema(n).subscribe(function(){i.clearChanges(),i.notifyService.success({title:i.localizeService.getValue("queryFramework.message.info.title"),msg:i.localizeService.getValue("queryFramework.message.operate.success"),timeout:3e3}),i.farrisDialog.close()},function(e){i.formErrorService.exception(e.Message,e),i.farrisDialog.close()})}},e.prototype.clearChanges=function(){this.motifyList=[],this.removeList=[]},e.prototype.handleCancelClick=function(){var e=this,i=this;this.motifyList.length&&(this.motifyList.forEach(function(t){"delete"===t.type?0===i.removeList.find(function(e){return e.id===t.id}).schemaType?i.publicList.push(t):i.personalList.push(t):(e.publicList.forEach(function(e){e.isDefault=e.id===t.id?1:0}),e.personalList.forEach(function(e){e.isDefault=e.id===t.id?1:0}))}),this.removeList=[],this.motifyList=[]),this.farrisDialog.close()},e.decorators=[{type:M.Component,args:[{selector:"condition-manager-dialog",template:'<farris-dialog #farrisDialog [title]="localizeService.getValue(\'queryFramework.dialogTitle1\')" [showButtons]="false"\r\n  [width]="550" [showMaxButton]="false" [showMinButton]="false" [showCloseButton]="false" [resizable]="false" [height]="570">\r\n  <div class="f-utils-absolute-all f-utils-flex-column bg-white">\r\n    <div class="f-utils-fill-auto">\r\n      <div class="f-utils-flex-row-wrap m-2 item-header-row" style="height: 40px">\r\n        <div class="col-4 pt-1 item-header-col-font item-header-col1">\r\n          {{localizeService.getValue(\'queryFramework.conditionManagerListColumn\')[0]}}\r\n        </div>\r\n        <div class="col-4 pt-1 item-header-col-font item-header-col2">\r\n          {{localizeService.getValue(\'queryFramework.conditionManagerListColumn\')[1]}}\r\n        </div>\r\n        <div class="col-4 pt-1 item-header-col-font item-header-col3">\r\n          {{localizeService.getValue(\'queryFramework.conditionManagerListColumn\')[2]}}\r\n        </div>\r\n      </div>\r\n      <div class="f-utils-flex-row-wrap m-2" (click)="handleExpandType(0)">\r\n        <span *ngIf="expandPublic" class="f-icon f-icon-minus-outline ml-3 mr-2" style="color: #B9C3C9;"></span>\r\n        <span *ngIf="!expandPublic" class="f-icon f-icon-plus-outline ml-3 mr-2" style="color: #B9C3C9;"></span>\r\n        <div class="item-schema-type">{{localizeService.getValue(\'queryFramework.schemaType.public\')}}</div>\r\n      </div>\r\n      <div [class]="expandPublic ? \'f-utils-flex-column item-list-block\' : \'f-utils-flex-column item-list-none\'">\r\n        <div *ngFor="let item of publicList" [class]="currentSchema && currentSchema.id  && currentSchema.id === item.id ? \'f-utils-flex-row-wrap ml-0 mr-0 mt-1 mb-1 item-row item-row-hover\' : \'f-utils-flex-row-wrap ml-0 mr-0 mt-1 mb-1 item-row\'">\r\n          <div [class]="item.isProtected === 1 ? \'col-4 item-data-font item-data-col1\' : \'col-4 item-data-font-disable item-data-col1\'">\r\n            {{item.schemaName}}\r\n          </div>\r\n          <div class="col-4 item-data-font item-data-col2">\r\n            <div class="custom-control custom-checkbox mb-0 ml-4">\r\n              <input type="checkbox" class="custom-control-input" [ngModel]="item.isDefault === 1 ? true : false" (ngModelChange)="handleNgModelChange($event, item)" (click)="handleSettingDefault(item)" [disabled]="item.isProtected === 1" id="{{item.id}}" checked="">\r\n              <label class="custom-control-label" for="{{item.id}}"></label>\r\n            </div>\r\n          </div>\r\n          <div class="col-4 item-data-font item-data-col3">\r\n            <button class="btn btn-link p-1 mr-1" id="button-delete" [disabled]="item.isProtected === 1" (click)="handleDeleteSchame(item)">\r\n              <span class="f-icon f-icon-delete item-delete"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="f-utils-flex-row-wrap m-2" (click)="handleExpandType(1)">\r\n        <span *ngIf="expandPersonal" class="f-icon f-icon-minus-outline ml-3 mr-2" style="color: #B9C3C9;"></span>\r\n        <span *ngIf="!expandPersonal" class="f-icon f-icon-plus-outline ml-3 mr-2" style="color: #B9C3C9;"></span>\r\n        <div class="item-schema-type">{{localizeService.getValue(\'queryFramework.schemaType.personal\')}}</div>\r\n      </div>\r\n      <div [class]="expandPersonal ? \'f-utils-flex-column item-list-block\' : \'f-utils-flex-column item-list-none\'">\r\n        <div *ngFor="let item1 of personalList" [class]="currentSchema && currentSchema.id && currentSchema.id === item1.id ? \'f-utils-flex-row-wrap ml-0 mr-0 mt-1 mb-1 item-row item-row-hover\' : \'f-utils-flex-row-wrap ml-0 mr-0 mt-1 mb-1 item-row\'">\r\n          <div [class]="item1.isProtected === 1 ? \'col-4 item-data-font item-data-col1\' : \'col-4 item-data-font-disable item-data-col1\'">\r\n            {{item1.schemaName}}\r\n          </div>\r\n          <div class="col-4 item-data-font item-data-col2">\r\n            <div class="custom-control custom-checkbox mb-0 ml-4">\r\n              <input type="checkbox" class="custom-control-input" [ngModel]="item1.isDefault === 1 ? true : false" (ngModelChange)="handleNgModelChange($event, item1)" (click)="handleSettingDefault(item1)" [disabled]="item1.isProtected === 1"\r\n                id="{{item1.id}}" checked="">\r\n              <label class="custom-control-label" for="{{item1.id}}"></label>\r\n            </div>\r\n          </div>\r\n          <div class="col-4 item-data-font item-data-col3">\r\n            <button class="btn btn-link p-1 mr-1" id="button-delete" [disabled]="item1.isProtected === 1" (click)="handleDeleteSchame(item1)">\r\n              <span class="f-icon f-icon-delete item-delete"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n      <div class="btn-toolbar btn-group-lg" id="page-header-toolbar">\r\n        <button class="btn btn-primary mr-1" id="button-edit" (click)="handleOKClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnOk\')}}</button>\r\n        <button class="btn btn-secondary mr-1" id="button-edit" (click)="handleCancelClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnCancel\')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n',styles:[".item-header-row{border-bottom:1px solid #e2e8f0}.item-row{height:40px}.item-header-col-font{font-family:PingFangSC-Regular;font-size:14px;color:#000}.item-header-col1{text-align:left}.item-header-col2{text-align:center}.item-header-col3{text-align:right}.item-schema-type{font-family:PingFangSC-Regular;font-size:14px;color:#000;line-height:20px;display:block;top:-2px;position:relative}.item-row-current{background:#ddf4ff;border-left:3px solid #388fff!important}.item-data-font-disable{font-family:PingFangSC-Regular;font-size:14px;color:rgba(166,166,166,.8);line-height:20px;position:relative;top:-2px;padding-top:.75rem!important}.item-data-font{font-family:PingFangSC-Regular;font-size:14px;color:rgba(0,0,0,.8);line-height:20px;position:relative;top:-2px;padding-top:.75rem!important}.item-data-col1,.item-data-col2{text-align:center}.item-data-col3{text-align:right;padding-right:1.25rem!important}.item-row-hover,.item-row:hover{background:#ddf4ff;border-left:3px solid #388fff!important}.item-list-block{display:block!important}.item-list-none{display:none!important}.item-delete{position:relative;top:-3px}"]}]}],e.ctorParameters=function(){return[{type:M.Injector},{type:n.MessagerService},{type:m.ConditionSchemaService},{type:p.NotifyService}]},e.propDecorators={farrisDialog:[{type:M.ViewChild,args:["farrisDialog"]}],currentSchema:[{type:M.Input}],queryId:[{type:M.Input}],publicList:[{type:M.Input}],personalList:[{type:M.Input}]},e}(),O=function(){function e(e,t,i,n){this.injector=e,this.msgService=t,this.conditionService=i,this.notifyService=n,this.formInline=!0,this.conditionSchemaName="conditionSchemaName"+w.EventBus.guid(),this.schemaName="",this.isDefault=!1,this.isSchemaType=0,this.publicSchema="publicSchema"+w.EventBus.guid(),this.personSchema="personSchema"+w.EventBus.guid(),this.defaultSchema="defaultSchema"+w.EventBus.guid(),this.injector&&(this.localizeService=this.injector.get(a.LocalizeService),this.localId=this.injector.get(M.LOCALE_ID)||a.DEFAULT_LANGUAGE,this.formInline=this.localId.toLowerCase()===a.DEFAULT_LANGUAGE,this.repository=this.injector.get(r.Repository),this.formErrorService=this.injector.get(c.FormErrorService))}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){for(var t in e)e[t].currentValue},e.prototype.ngOnDestroy=function(){},e.prototype.handleDialogShow=function(){this.farrisDialog.show()},e.prototype.handleOKClick=function(){var t=this,e=this.conditionService.schemaList;if(this.schemaName)if(this.schemaName&&15<this.schemaName.length)this.msgService.warning(this.localizeService.getValue("queryFramework.message.lengthValidate"));else{if(e&&e[this.queryId])for(var i in e[t.queryId])if(e[t.queryId][i].schemaName===t.schemaName)return void this.msgService.warning(this.localizeService.getValue("queryFramework.message.saveas"));var n=this.handlerGetEntity();if(this.currentSchema&&this.currentSchema.id){for(var i in e[t.queryId])if(e[t.queryId][i].schemaName===t.schemaName)return void this.msgService.warning(this.localizeService.getValue("queryFramework.message.saveas"));(r=JSON.parse(JSON.stringify(this.currentSchema))).schemaValue=n,r.id="",r.queryId=t.queryId,this.filterInstance&&(r.schemaValue||(r.schemaValue={}),r.schemaValue["@filterExpressionString@"]=this.filterInstance.getFilterExpression()),r.schemaValue=r.schemaValue?JSON.stringify(r.schemaValue):null,r.schemaName=t.schemaName,r.isDefault=t.isDefault?1:0,r.schemaType=t.isSchemaType,this.conditionService.saveSchema(r).subscribe(function(){t.notifyService.success({title:t.localizeService.getValue("queryFramework.message.info.title"),msg:t.localizeService.getValue("queryFramework.message.save.success"),timeout:3e3}),t.farrisDialog.close()},function(e){t.formErrorService.exception(e.Message,e)})}else{var r;(r={schemaName:t.schemaName,schemaType:t.isSchemaType,schemaValue:null,isDefault:t.isDefault?1:0,isProtected:0,queryId:t.queryId}).schemaValue=n,this.filterInstance&&(r.schemaValue||(r.schemaValue={}),r.schemaValue["@filterExpressionString@"]=this.filterInstance.getFilterExpression()),r.schemaValue=r.schemaValue?JSON.stringify(r.schemaValue):null,this.conditionService.saveSchema(r).subscribe(function(){t.notifyService.success({title:t.localizeService.getValue("queryFramework.message.info.title"),msg:t.localizeService.getValue("queryFramework.message.save.success"),timeout:3e3}),t.farrisDialog.close()},function(e){t.formErrorService.exception(e.Message,e)})}}else this.msgService.warning(this.localizeService.getValue("queryFramework.message.validate.notNull"))},e.prototype.handleCancelClick=function(){this.schemaName="",this.isDefault=!1,this.isSchemaType=0,this.farrisDialog.close()},e.prototype.handleSchemaTypeSelect=function(e){this.isSchemaType=e},e.prototype.handlerGetEntity=function(){var e,t=this.repository.entityCollection.getAllEntities();return t&&t.length&&(e=t[0].toJSON()),e},e.decorators=[{type:M.Component,args:[{selector:"saveas-schema-dialog",template:'<farris-dialog #farrisDialog [title]="localizeService.getValue(\'queryFramework.dialogTitle2\')" [showButtons]="false"\r\n  [width]="509" [showMaxButton]="false" [showCloseButton]="false" [showMinButton]="false" [resizable]="false" [height]="285">\r\n  <div class="f-utils-absolute-all f-utils-flex-column bg-white">\r\n    <div class="f-utils-fill-flex-column">\r\n      <div class="f-utils-flex-row pt-2">\r\n        <div class="farris-group-wrap form-inline farris-form-inline">\r\n          <div class="form-group farris-form-group">\r\n            <label class="col-form-label" for="colName">\r\n              <span class="farris-label-info text-danger">*</span>\r\n              <span class="farris-label-text">{{localizeService.getValue(\'queryFramework.schemaName\')}}:</span>\r\n            </label>\r\n            <div class="farris-input-wrap">\r\n              <input-group id="colName" [(ngModel)]="schemaName"></input-group>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \x3c!-- <div class="f-utils-flex-row">\r\n        <div class="farris-group-wrap form-inline farris-form-inline">\r\n          <div class="form-group farris-form-group">\r\n            <label class="col-form-label" for="colVisible">\r\n              <span class="farris-label-text"></span>\r\n            </label>\r\n            <div class="farris-input-wrap farris-checkradio-hor">\r\n              <div class="custom-control custom-checkbox mb-0">\r\n                <input type="checkbox" [(ngModel)]="isDefault" class="custom-control-input" id="{{conditionSchemaName}}"\r\n                  checked="">\r\n                <label class="custom-control-label"\r\n                  for="{{conditionSchemaName}}">{{localizeService.getValue(\'queryFramework.defaultSchemaName\')}}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div> --\x3e\r\n      <div class="f-utils-flex-row pt-2">\r\n        <div class="farris-group-wrap form-inline farris-form-inline m-1">\r\n          <div class="form-group farris-group-wrap">\r\n            <label class="col-form-label" style="min-width: 0;" for="range_type_id">\r\n              <span class="farris-label-text">{{localizeService.getValue(\'ideCmp.schemaManager.schemeType\')}}:</span>\r\n            </label>\r\n            <div class="farris-input-wrap farris-checkradio-hor">\r\n              <div class="custom-control custom-radio mb-0">\r\n                <input type="radio" id="{{publicSchema}}" name="custom-radio1" class="custom-control-input"\r\n                  [checked]="isSchemaType==0">\r\n                <label class="custom-control-label" for="{{publicSchema}}"\r\n                  (click)="handleSchemaTypeSelect(0)">{{localizeService.getValue(\'ideCmp.schemaManager.schemeTypePublic\')}}</label>\r\n              </div>\r\n              <div class="custom-control custom-radio mb-0">\r\n                <input type="radio" id="{{personSchema}}" name="custom-radio1" class="custom-control-input"\r\n                  [checked]="isSchemaType==1">\r\n                <label class="custom-control-label" for="{{personSchema}}"\r\n                  (click)="handleSchemaTypeSelect(1)">{{localizeService.getValue(\'ideCmp.schemaManager.schemeTypePersonal\')}}</label>\r\n              </div>\r\n              <div class="custom-control custom-checkbox mb-0">\r\n                <input type="checkbox" class="custom-control-input" id="{{defaultSchema}}"\r\n                  [(ngModel)]="isDefault">\r\n                <label class="custom-control-label"\r\n                  for="{{defaultSchema}}">{{localizeService.getValue(\'ideCmp.schemaManager.schemeDefault\')}}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n      <div class="btn-toolbar btn-group-lg" id="page-header-toolbar">\r\n        <button class="btn btn-primary mr-1" id="button-edit" (click)="handleOKClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnOk\')}}</button>\r\n        <button class="btn btn-secondary mr-1" id="button-edit" (click)="handleCancelClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnCancel\')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:M.Injector},{type:n.MessagerService},{type:m.ConditionSchemaService},{type:p.NotifyService}]},e.propDecorators={currentSchema:[{type:M.Input}],queryId:[{type:M.Input}],farrisDialog:[{type:M.ViewChild,args:["farrisDialog"]}]},e}(),v=function(){function e(){this.cls="",this.tabIndex=0,this.controlIndexChanged=0,this.propertyList=[],this.filterExpressionString="",this.showFilterExpression=!0,this.showForm=!1}return e.prototype.ngOnChanges=function(e){for(var t in e){var i=e[t].currentValue;if(null!=i)switch(t){case"propertyList":i&&(this.propertyList=x(i));break;case"filterExpressionString":i&&(this.filterExpressionString=i)}}},e.prototype.changeCss=function(){this.cls=this.tabIndex===this.controlIndexChanged?"f-utils-fill":""},e.prototype.createFilterComponent=function(){},e.prototype.ngOnInit=function(){try{w.QDPCacheUtil.getCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs")?w.QDPCacheUtil.getCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs").push(this):w.QDPCacheUtil.setCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs",[this])}catch(e){}this.changeCss()},e.decorators=[{type:M.Component,args:[{selector:"condition-dialog-tab",template:'<div class="h-100 f-utils-fill" [style.display]="tabIndex===controlIndexChanged?\'block\':\'none\'">\r\n  <div class="f-utils-fill-flex-row h-100" *ngIf="tabIndex==1 && showFilterExpression">\r\n    <div class="f-utils-fill-auto h-100">\r\n      <app-filter-expression #funcFilter class="h-100" [propertyList]="propertyList" [filterExpressionString]="filterExpressionString"></app-filter-expression>\r\n    </div>\r\n  </div>\r\n  <div class="f-utils-fill-flex-row h-100" *ngIf="tabIndex!=1 || showForm">\r\n    <div class="f-utils-fill-auto h-100">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[]},e.propDecorators={cls:[{type:M.HostBinding,args:["class"]}],tabIndex:[{type:M.Input}],filterInstance:[{type:M.ViewChild,args:[T.FilterExpressionComponent]}],propertyList:[{type:M.Input}],filterExpressionString:[{type:M.Input}],showFilterExpression:[{type:M.Input}],showForm:[{type:M.Input}]},e}(),C=function(){function e(e,t,i,n,r){this.injector=e,this.conditionService=t,this.repository=i,this.cacheService=n,this.finishLoasService=r,this.schemaId="",this.showFilterExpression=!0,this.tabIndex=0,this.queryEvent=new M.EventEmitter,this.dialogInitEvent=new M.EventEmitter,this.idChanged=new o.Subject,this.menuShow=!1,this.defaultSchemaName="条件方案",this.publicList=[],this.personalList=[],this.controlIndexChanged=0,this.subscriptions=[],this.closeType="",this.propertyList=[],this.filterExpressionString="",this.beforeOpen=function(){return!0},this.handlebeforeClose=function(){return o.of(!0)},this.injector&&(this.localizeService=this.injector.get(a.LocalizeService),this.notifyService=this.injector.get(p.NotifyService),this.defaultSchemaName=this.localizeService.getValue("queryFramework.ispreName"),this.formErrorService=this.injector.get(c.FormErrorService),this.schemaService=this.injector.get(y.SchemaService),this.lcpService=this.injector.get(w.LcpService))}return e.prototype.getConditionTabs=function(){try{if(this.conditionTabs&&this.conditionTabs.length)return this.conditionTabs;if(w.QDPCacheUtil.getCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs")&&w.QDPCacheUtil.getCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs").length)return w.QDPCacheUtil.getCache(w.RtfServices.getTabId("condition-dialog-tabs")+"condition-dialog-tabs")}catch(e){return this.conditionTabs}},Object.defineProperty(e.prototype,"Id",{get:function(){return this.schemaId},set:function(e){this.schemaId=e,this.idChanged.next(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.tabId=w.RtfServices.getTabId(this.queryId),this.queryCount=1,this.conditionDialogInit(),this.beforeQuery||(this.beforeQuery=function(e){return o.of(!0)}),w.QDPCacheUtil.setCache(this.tabId+"advanceTemplate-condition-dialog",this)},e.prototype.ngAfterViewInit=function(){w.EventBus.dispatch(this.tabId+"advanceTemplate-condition-dialog-dialogInitEvent",{}),this.dialogInitEvent.emit(!0)},e.prototype.conditionDialogInit=function(){var a=this,o=this;this.subscriptions.push(o.conditionService.getSchemaList(o.queryId,"","").subscribe()),this.subscriptions.push(o.conditionService.schemaListChange.subscribe(function(e){var t=e.schemaInfo;if(t&&t[o.queryId]){for(var i in o.publicList=[],o.personalList=[],t[o.queryId])0===t[o.queryId][i].schemaType?o.publicList.push(t[o.queryId][i]):o.personalList.push(t[o.queryId][i]);var n=!1;if(o.schemaId){var r=o.publicList.findIndex(function(e){return e.id===o.schemaId});0<=r&&(n=!0,o.currentSchema=o.publicList[r],o.initCondition(o.currentSchema)),0<=(r=o.personalList.findIndex(function(e){return e.id===o.schemaId}))&&(n=!0,o.currentSchema=o.personalList[r],o.initCondition(o.currentSchema))}!n&&o.conditionService.isDefaultSchema&&o.conditionService.isDefaultSchema[o.queryId]&&o.conditionService.isDefaultSchema[o.queryId].id&&(o.currentSchema=o.conditionService.isDefaultSchema[o.queryId],o.schemaId=o.conditionService.isDefaultSchema[o.queryId].id,o.defaultSchemaName=o.currentSchema.schemaName),a.subscriptions.push(a.finishLoasService.finish.subscribe(function(e){o.initCondition(o.currentSchema)}))}else o.defaultSchemaName=o.localizeService.getValue("queryFramework.ispreName")})),this.subscriptions.push(o.idChanged.subscribe(function(e){e&&o.subscriptions.push(o.conditionService.getSchema(e,o.queryId,!0).subscribe(function(e){e&&(o.currentSchema=e,o.defaultSchemaName=o.currentSchema.schemaName,o.initCondition(o.currentSchema),1===o.controlIndexChanged&&o.handleInfoChanged(o.controlIndexChanged))}))}))},e.prototype.initCondition=function(e){var t=this;if(e)if(e.schemaValue&&"object"==typeof e.schemaValue)e&&e.schemaValue&&this.repository.entityCollection.getAllEntities()&&this.repository.entityCollection.getAllEntities().length&&(e.schemaValue.id=this.repository.entityCollection.getAllEntities()[0].id),t.repository.entityCollection.getAllEntities()[0].load(e.schemaValue),t.filterExpressionString="",e.schemaValue.hasOwnProperty("@filterExpressionString@")&&(t.filterExpressionString=e.schemaValue["@filterExpressionString@"]);else if(t.repository.entityCollection.getAllEntities()&&t.repository.entityCollection.getAllEntities()[0]){var i={id:t.repository.entityCollection.getAllEntities()[0].id};t.repository.entityCollection.getAllEntities()[0].load(i)}},e.prototype.getPropertyList=function(t){var i=this;this.subscriptions.push(this.lcpService.getCol({schemaId:"1",entityData:JSON.stringify({id:"undefined_null"}),pageIndex:1,pageSize:0,qoManagerCode:w.QDPCacheUtil.getCache(this.tabId+"qoManagerCode"),controlType:w.QDPCacheUtil.getCache(this.tabId+"controlType"),voCode:w.QDPCacheUtil.getCache(this.tabId+"voId")},w.QDPCacheUtil.getCache(this.tabId+"queryRelativeUrl")).subscribe(function(e){e&&e.dynamicCols&&e.dynamicCols.length&&(i.analysisColListData(e.dynamicCols,"col"),i.advanceFilterTab&&(i.advanceFilterTab.propertyList=x(i.propertyList),i.advanceFilterTab.filterExpressionString=i.filterExpressionString),t.createFilterComponent())}))},e.prototype.analysisColListData=function(e,t){var i=this;this.propertyList=[],e.forEach(function(e){i.recursiveAnalysisColListData(null,e,t)})},e.prototype.recursiveAnalysisColListData=function(e,t,n){var r=this;if(t){var i=this.propertyList.findIndex(function(e){return e.Code===t.bindField});if(i<0){var a={};a.value=t.bindField,a.propertyFieldType=this.getDataType(t.type),a.text=t.name,this.propertyList.push(a)}else"col"!==n&&(this.propertyList[i].text=t.name);t.childList&&t.childList.length&&this.recursiveAnalysisColListData(t.childList,null)}else e.forEach(function(t){var e=r.propertyList.findIndex(function(e){return e.Code===t.bindField});if(e<0){var i={};i.value=t.bindField,i.propertyFieldType=r.getDataType(t.type),i.text=t.name,r.propertyList.push(i)}else"col"!==n&&(r.propertyList[e].text=t.name);t.childList&&t.childList.length&&r.recursiveAnalysisColListData(t.childList,null)})},e.prototype.getDataType=function(e){var t=0;switch(e){case"string":case"text":t=0;break;case"integer":t=2;break;case"decimal":t=4;break;case"boolean":t=8;break;case"date":case"dateTime":t=9;break;case"byte":t=6;break;case"char":t=7;break;case"array":t=10}return t},e.prototype.ngOnDestroy=function(){var e,t;if(this.subscriptions&&this.subscriptions.length)try{for(var i=z(this.subscriptions),n=i.next();!n.done;n=i.next()){n.value.unsubscribe()}}catch(r){e={error:r}}finally{try{n&&!n.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.ngOnChanges=function(e){},e.prototype.handleDialogShow=function(){this.farrisDialog.show()},e.prototype.handleDialogClose=function(){this.farrisDialog.close()},e.prototype.handleSchemaManagerDialog=function(){this.conditionManagerDialog.handleDialogShow(),this.menuShow=!this.menuShow},e.prototype.handleSaveasSchemaDialog=function(){this.saveasSchemaDialogComponent.schemaName="",this.saveasSchemaDialogComponent.isDefault=!1,this.saveasSchemaDialogComponent.isSchemaType=0,this.menuShow=!1,this.saveasSchemaDialogComponent.handleDialogShow(),this.advanceFilterTab&&this.advanceFilterTab.filterInstance&&(this.saveasSchemaDialogComponent.filterInstance=this.advanceFilterTab.filterInstance)},e.prototype.handleSchemaMenu=function(){this.menuShow=!this.menuShow},e.prototype.handleInfoChanged=function(t){var i=this;this.controlIndexChanged=t,this.getConditionTabs()&&this.getConditionTabs().length&&this.getConditionTabs().forEach(function(e){e.controlIndexChanged=t,e.changeCss(),1===e.tabIndex&&i.showFilterExpression&&(i.advanceFilterTab=e,i.getPropertyList(e))})},e.prototype.handleSchemaSelected=function(e){this.defaultSchemaName=e.schemaName,this.menuShow=!this.menuShow,this.currentSchema=e,this.Id=this.currentSchema.id},e.prototype.handleQueryClick=function(){var t=this,i=this.handlerGetEntity();this.beforeQuery().subscribe(function(e){1==e&&(w.EventBus.dispatch("openAdvanceTemplateDialog",{}),t.cacheService.set(t.tabId,i),w.EventBus.dispatch(t.tabId+"advanceTemplate-condition-dialog-queryEvent",t.queryCount++),t.queryEvent.emit(t.queryCount++),t.closeType="query",t.handleDialogClose())})},e.prototype.handleSaveClick=function(){var t=this,i=this,e=this.handlerGetEntity();if(this.currentSchema){this.currentSchema.schemaValue=e;var n=JSON.parse(JSON.stringify(this.currentSchema));this.advanceFilterTab&&this.advanceFilterTab.filterInstance&&(n.schemaValue||(n.schemaValue={}),n.schemaValue["@filterExpressionString@"]=this.advanceFilterTab.filterInstance.getFilterExpression()),n.schemaValue=n.schemaValue?JSON.stringify(n.schemaValue):null,this.conditionService.saveSchema(n).subscribe(function(){i.notifyService.success({title:i.localizeService.getValue("queryFramework.message.info.title"),msg:i.localizeService.getValue("queryFramework.message.save.success"),timeout:3e3})},function(e){i.formErrorService.exception(t.localizeService.getValue("ideCmp.schemaManager.message.validate.qdpModifyPublicSchema"),e)})}},e.prototype.handlerGetEntity=function(){var e,t=this.repository.entityCollection.getAllEntities();return t&&t.length&&(e=t[0].toJSON(),this.advanceFilterTab&&this.advanceFilterTab.filterInstance?(e||(e={id:"undefined_null"}),e["@filterExpressionString@"]=this.advanceFilterTab.filterInstance.getFilterExpression()):this.filterExpressionString&&(e||(e={id:"undefined_null"}),e["@filterExpressionString@"]=this.filterExpressionString)),e},e.decorators=[{type:M.Component,args:[{selector:"condition-dialog",template:'<farris-dialog #farrisDialog [title]="localizeService.getValue(\'queryFramework.dialogTitle\')" [showButtons]="false" [beforeClose]="handlebeforeClose"\r\n  [width]="960" [showMaxButton]="false" [showMinButton]="false" [resizable]="false" [height]="570" [beforeOpen]="beforeOpen">\r\n  <div class="f-utils-absolute-all f-utils-flex-column bg-white">\r\n    <div class="f-utils-flex-row-wrap farris-overflow-hidden">\r\n      <div class="ml-3 mt-2 schema-manager-title" (click)="handleSchemaMenu()">{{defaultSchemaName}}</div>\r\n      <div class="schema-manager-tr">\r\n      </div>\r\n    </div>\r\n    <div class="box ml-3 mt-2 schema-manager-dropdown" [style.display]="menuShow?\'block\':\'none\'">\r\n      <div class="f-utils-absolute-all f-utils-flex-column">\r\n        <div class="f-utils-fill-flex-column f-utils-fill-auto">\r\n          <div class="schemaType">{{localizeService.getValue(\'queryFramework.schemaType.public\')}}</div>\r\n          <div *ngFor="let item of publicList" [class]="currentSchema && currentSchema.id && currentSchema.id === item.id ? \'schemaItem schemaItemHover\' : \'schemaItem\'">\r\n            <div class="f-utils-flex-row-wrap" (click)="handleSchemaSelected(item)">\r\n              <div class="schemaItemFont1 col-8">{{item.schemaName}}</div>\r\n              <div *ngIf="item.isDefault === 1" class="schemaItemFont2 col-4">\r\n                {{localizeService.getValue(\'queryFramework.defaultName\')}}</div>\r\n            </div>\r\n          </div>\r\n          <div class="schemaType">{{localizeService.getValue(\'queryFramework.schemaType.personal\')}}</div>\r\n          <div *ngFor="let item1 of personalList" [class]="currentSchema && currentSchema.id && currentSchema.id === item1.id ? \'schemaItem schemaItemHover\' : \'schemaItem\'">\r\n            <div class="f-utils-flex-row-wrap" (click)="handleSchemaSelected(item1)">\r\n              <div class="schemaItemFont1 col-8">{{item1.schemaName}}</div>\r\n              <div *ngIf="item1.isDefault === 1" class="schemaItemFont2 col-4">\r\n                {{localizeService.getValue(\'queryFramework.defaultName\')}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="p-2 schema-manager-toolbar">\r\n          <div class="btn-toolbar btn-group-lg" id="page-header-toolbar">\r\n            <button class="btn btn-link mr-1" id="button-edit"\r\n              (click)="handleSchemaManagerDialog()">{{localizeService.getValue(\'queryFramework.btnManager\')}}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="f-utils-flex-row pl-3 pr-3 pt-2 pb-2">\r\n      <button [class]="controlIndexChanged === 0 ? \'btn btn-primary\' : \'btn btn-secondary\'" id="button-edit1"\r\n        (click)="handleInfoChanged(0)">\r\n        {{localizeService.getValue(\'queryFramework.tabName1\')}}</button>\r\n      <button [class]="controlIndexChanged === 1 ? \'btn btn-primary\' : \'btn btn-secondary\'" id="button-edit2"\r\n        (click)="handleInfoChanged(1)">\r\n        {{localizeService.getValue(\'queryFramework.tabName2\')}}</button>\r\n      \x3c!-- <button [class]="controlIndexChanged == false ? \'btn btn-primary\' : \'btn btn-secondary\'" id="button-edit2"\r\n          (click)="handleInfoChanged(2)">\r\n          {{localizeService.getValue(\'ideCmp.schemaManager.columnOption.selection2\')}}</button> --\x3e\r\n    </div>\r\n    <div class="f-utils-fill-flex-column">\r\n      <ng-content></ng-content>\r\n    </div>\r\n    <div class="modal-footer">\r\n      <div class="btn-toolbar btn-group-lg" id="page-header-toolbar">\r\n        <button class="btn btn-primary mr-1" id="button-edit" (click)="handleQueryClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnQuery\')}}</button>\r\n        <button class="btn btn-secondary mr-1" id="button-edit" (click)="handleSaveasSchemaDialog()">\r\n          {{localizeService.getValue(\'queryFramework.btnSaveAsSchema\')}}</button>\r\n        <button *ngIf="(!currentSchema) == false" class="btn btn-secondary mr-1" id="button-edit" (click)="handleSaveClick()">\r\n          {{localizeService.getValue(\'queryFramework.btnSaveSchema\')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n<condition-manager-dialog [queryId]="queryId" [publicList]="publicList" [personalList]="personalList" [currentSchema]="currentSchema"></condition-manager-dialog>\r\n<saveas-schema-dialog [queryId]="queryId" [currentSchema]="currentSchema"></saveas-schema-dialog>\r\n',styles:['.schema-manager-title{cursor:pointer;display:block;height:22px;font-family:PingFangSC-Regular;font-size:16px;color:#388fff;text-align:right}.schema-manager-tr{margin-top:1.1rem!important;margin-left:.25rem!important;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:6px solid rgba(0,0,0,.25)}.box{cursor:pointer;display:inline-block;position:relative;width:200px;height:246px;-webkit-filter:drop-shadow(0 2px 4px rgba(0, 0, 0, .2));filter:drop-shadow(0 2px 4px rgba(0, 0, 0, .2));border-radius:3px;background-color:#fff;border:1px solid #bbb}.box:after,.box:before{content:"";position:absolute;border:10px solid transparent;bottom:100%;left:10px}.box:before{border-bottom-color:#bbb}.box:after{border-bottom-color:#fff;margin-bottom:-1px}.schemaType{font-family:PingFangSC-Regular;font-size:14px;color:rgba(0,0,0,.45);line-height:20px;padding-left:.75rem!important;padding-top:.75rem!important;padding-bottom:.25rem!important}.schemaItem{height:30px}.schemaItem:hover,.schemaItemHover{background:#ddf4ff}.schemaItemFont1{font-family:PingFangSC-Regular;font-size:14px;color:rgba(0,0,0,.85);line-height:20px;margin-top:.25rem!important;margin-bottom:.25rem!important;float:left;text-align:center;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:0;padding-right:0}.schemaItemFont2{font-family:PingFangSC-Regular;font-size:12px;color:rgba(0,0,0,.45);line-height:20px;margin-top:.25rem!important;margin-bottom:.25rem!important;float:right;text-align:right;padding-left:0}.schema-manager-toolbar{background:#f9f9f9;display:flex;align-items:center;justify-content:flex-end;border-top:1px solid #e2e8f0}.schema-manager-dropdown{float:left;z-index:1000;position:absolute;top:30px}']}]}],e.ctorParameters=function(){return[{type:M.Injector},{type:m.ConditionSchemaService},{type:r.Repository},{type:s.CacheService},{type:m.FinishLoadService}]},e.propDecorators={showFilterExpression:[{type:M.Input}],queryId:[{type:M.Input}],tabIndex:[{type:M.Input}],beforeQuery:[{type:M.Input}],queryEvent:[{type:M.Output}],farrisDialog:[{type:M.ViewChild,args:["farrisDialog"]}],conditionTabs:[{type:M.ContentChildren,args:[v]}],conditionManagerDialog:[{type:M.ViewChild,args:[b]}],saveasSchemaDialogComponent:[{type:M.ViewChild,args:[O]}]},e}(),A=function(){function e(){}return e.decorators=[{type:M.NgModule,args:[{imports:[i.CommonModule,l.FormsModule,l.ReactiveFormsModule,p.NotifyModule,g.FDropdownDirectiveTypeModule,u.FlexLayoutModule,N.TreeTableModule,h.PerfectScrollbarModule,y.IdeCmpModule,T.FilterConditionModule,I.CloudPrintModule,d.FarrisDialogModule,D.InputGroupModule],declarations:[E,L,f,S,C,b,O,v],providers:[g.FDropdownDirective,T.FilterService,w.FilterManagerService,m.ConditionSchemaService],exports:[E,L,f,S,C,b,O,v]}]}],e}();e.QueryFrameworkLayoutComponent=E,e.QueryFrameworkToolbarComponent=L,e.QueryFrameworkPaginationComponent=f,e.ExportDataComponent=S,e.ConditionDialogComponent=C,e.ConditionManagerDialogComponent=b,e.SaveasSchemaDialogComponent=O,e.ConditionDialogTabComponent=v,e.QueryFrameworkModule=A,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=qdp-query-framework.umd.min.js.map