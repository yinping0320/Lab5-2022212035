/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, ContentChild, TemplateRef, ViewChild } from '@angular/core';
import { QdpViewComponent, RenderService } from '@qdp/spread';
import { LcpBindingDataDirective, FormBindingDataDirective } from '@qdp/echarts';
import { SchemaService } from '@qdp/ide-cmp';
import { FilterService } from '@gsp-svc/filtercondition';
import { FilterManagerService, ParasMappingManagerService, RtfServices, QDPCacheUtil } from '@qdp/common';
import { EventBus } from '@qdp/common';
import { QueryFrameworkToolbarComponent } from '../qf-toolbar/qf-toolbar.component';
import { ConditionDialogComponent } from '../condition-dialog/condition-dialog.component';
var QueryFrameworkLayoutComponent = /** @class */ (function () {
    function QueryFrameworkLayoutComponent(schemaService, renderService, filter, filterService, parasMappingManagerService) {
        var _this = this;
        this.schemaService = schemaService;
        this.renderService = renderService;
        this.filter = filter;
        this.filterService = filterService;
        this.parasMappingManagerService = parasMappingManagerService;
        this.isShowToolbar = true;
        this.isMultiForm = false; // 是否嵌入式表单
        this.isInit = true;
        this.toolbarOption = {
            showPreSchema: true,
            showSchemaManager: true,
            showExport: true,
            showReFresh: true,
            showFilter: true,
            showPrint: true,
            showClearSort: true,
            showClearCache: true
        };
        this.toolBarEvent = 'toolBarEvent' + EventBus.guid();
        this.contentSizeChange = new EventEmitter();
        this.formPrintOption = {
            isShowFormPrint: false,
            printBEId: '',
            printFormIdField: ''
        };
        this.size = {
            height: '500px',
            width: '300px'
        };
        this.pageInfo = {};
        this.pageIndex = 1;
        this.co = {
            NodeType: 'QueryNode',
            IsBe: true,
            ContainElements: [],
            Code: 'QueryNode',
            Name: 'QueryNdoe',
            BizEntityID: EventBus.guid()
        };
        this.subscriptions = [];
        /** @type {?} */
        var self = this;
        this.tabId = RtfServices.getTabId(this.queryId);
        this.subscriptions = [];
        this.subscriptions.push(self.schemaService.schemaInfo.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            try {
                if (value) {
                    /** @type {?} */
                    var schemaInfoAll = Object.assign({}, value);
                    if (schemaInfoAll.schemaList && schemaInfoAll.schemaList[_this.queryId]) {
                        schemaInfoAll.schemaList = schemaInfoAll.schemaList[_this.queryId];
                        if (!self.schemaId) {
                            if (schemaInfoAll.isDefaultSchema && schemaInfoAll.isDefaultSchema.id) {
                                self.initColListData(schemaInfoAll.isDefaultSchema.schemaValue.columnOption.colList);
                            }
                        }
                        else if (self.schemaId !== '1' && self.schemaId !== 'prefab' && self.schemaId !== 'public_schema' && self.schemaId !== 'person_schema') {
                            self.initColListData(schemaInfoAll.schemaList[self.schemaId].schemaValue.columnOption.colList);
                        }
                    }
                    else {
                        schemaInfoAll.schemaList = null;
                        self.initColListData(schemaInfoAll.preSchema.schemaValue.columnOption.colList);
                    }
                    self.schemaInfo = schemaInfoAll;
                }
            }
            catch (e) {
                // console.log(e); 
            }
        })));
        this.subscriptions.push(self.schemaService.colList.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            self.colList = value;
            if (value && value.length) {
                _this.initColListData(value, 'col');
            }
        })));
        // 如果有筛选方案
        if (this.filterService && this.filterService.isFilterQDP) {
            // this.filterService.isFilterQDP.observers = [];
            this.subscriptions.push(self.filterService.isFilterQDP.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    if (data) {
                        if (self.toolbarComponent && self.toolbarComponent.paginationComponent) {
                            self.toolbarComponent.paginationComponent.initPageInfo();
                            self.pageIndex = self.toolbarComponent.paginationComponent.pagination.pageIndex = 1;
                            self.pageInfo = self.toolbarComponent.paginationComponent.pagination;
                        }
                        self.refresh();
                    }
                }));
            })));
        }
    }
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getQdpView = /**
     * @return {?}
     */
    function () {
        if (this.qdpView) {
            return this.qdpView;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + this.controlType + 'qdpview')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + this.controlType + 'qdpview');
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getCharts = /**
     * @return {?}
     */
    function () {
        if (this.charts) {
            return this.charts;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + 'lcp-charts')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + 'lcp-charts');
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getFormDatasource = /**
     * @return {?}
     */
    function () {
        if (this.formdatasource) {
            return this.formdatasource;
        }
        else if (QDPCacheUtil.getCache(this.tabId + this.queryId + 'form-charts')) {
            return QDPCacheUtil.getCache(this.tabId + this.queryId + 'form-charts');
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getConditionDialog = /**
     * @return {?}
     */
    function () {
        if (this.conditionDialog) {
            return this.conditionDialog;
        }
        else if (QDPCacheUtil.getCache(this.tabId + 'advanceTemplate-condition-dialog')) {
            return QDPCacheUtil.getCache(this.tabId + 'advanceTemplate-condition-dialog');
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        if (this.subscriptions && this.subscriptions.length) {
            try {
                for (var _b = tslib_1.__values(this.subscriptions), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var subscription = _c.value;
                    subscription.unsubscribe();
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        if (this.controlType !== 'crosstab') {
            this.subscriptions.push(self.schemaService.pageInfoChange.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                self.pageInfo = value;
            })));
        }
        // if (this.qoId) {
        if (this.isInit == true) {
            this.subscriptions.push(self.filterService.getFilter(self.qoManagerCode ? self.qoManagerCode : self.queryId, self.queryId, self.queryRelativeUrl, 1, this.groupType).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data) {
                    self.conditionExpression = JSON.stringify(data.filter);
                }
            })));
        }
        // this.subscriptions.push(self.parasMappingManagerService.getMetaDataInfoById(self.qoId).subscribe(voInfo => {
        //   if (voInfo) {
        //     self.co = JSON.parse(voInfo.content).QueryNode;
        //   }
        // }));
        // }
        if (this.isMultiForm) {
            /** @type {?} */
            var divShowToolBarDom = (/** @type {?} */ (document.getElementById(this.toolBarEvent)));
            divShowToolBarDom.addEventListener('mouseover', (/**
             * @return {?}
             */
            function () {
                _this.isShowToolbar = true;
            }));
            divShowToolBarDom.addEventListener('mouseout', (/**
             * @return {?}
             */
            function () {
                _this.isShowToolbar = false;
            }));
        }
    };
    /**
     * @private
     * @param {?} newValue
     * @param {?=} type
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.initColListData = /**
     * @private
     * @param {?} newValue
     * @param {?=} type
     * @return {?}
     */
    function (newValue, type) {
        var _this = this;
        newValue.forEach((/**
         * @param {?} col
         * @return {?}
         */
        function (col) {
            _this.recursiveInitColListData(null, col, type);
        }));
    };
    /**
     * @private
     * @param {?} children
     * @param {?} col
     * @param {?=} type
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.recursiveInitColListData = /**
     * @private
     * @param {?} children
     * @param {?} col
     * @param {?=} type
     * @return {?}
     */
    function (children, col, type) {
        var _this = this;
        if (col) {
            /** @type {?} */
            var index = this.co.ContainElements.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.Code === col.bindField; }));
            if (index < 0) {
                /** @type {?} */
                var node = {};
                node['ID'] = EventBus.guid();
                node['Code'] = col.bindField;
                node['LabelID'] = col.bindField;
                node['MDataType'] = this.getDataType(col.type);
                node['NodeType'] = 'QueryProperty';
                node['Name'] = col.name;
                this.co.ContainElements.push(node);
            }
            else if (type !== 'col') {
                this.co.ContainElements[index]['Name'] = col.name;
            }
            if (col.childList && col.childList.length) {
                this.recursiveInitColListData(col.childList, null);
            }
        }
        else {
            children.forEach((/**
             * @param {?} c
             * @return {?}
             */
            function (c) {
                /** @type {?} */
                var index = _this.co.ContainElements.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.Code === c.bindField; }));
                if (index < 0) {
                    /** @type {?} */
                    var node = {};
                    node['ID'] = EventBus.guid();
                    node['Code'] = c.bindField;
                    node['LabelID'] = c.bindField;
                    node['MDataType'] = _this.getDataType(c.type);
                    node['NodeType'] = 'QueryProperty';
                    node['Name'] = c.name;
                    _this.co.ContainElements.push(node);
                }
                else if (type !== 'col') {
                    _this.co.ContainElements[index]['Name'] = c.name;
                }
                if (c.childList && c.childList.length) {
                    _this.recursiveInitColListData(c.childList, null);
                }
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        for (var changeName in changes) {
            /** @type {?} */
            var newValue = changes[changeName].currentValue;
            if (newValue !== null && newValue !== void 0) {
                this.tabId = RtfServices.getTabId(newValue);
                switch (changeName) {
                    case 'queryId':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'queryId', newValue);
                        }
                        break;
                    case 'qoManagerCode':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'qoManagerCode', newValue);
                        }
                        break;
                    case 'controlType':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'controlType', newValue);
                        }
                        break;
                    case 'queryRelativeUrl':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'queryRelativeUrl', newValue);
                        }
                        break;
                    case 'voId':
                        if (newValue) {
                            QDPCacheUtil.setCache(this.tabId + 'voId', newValue);
                        }
                        break;
                }
            }
        }
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.subscriptions.push(self.getQdpView().sheetChanged.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            self.groupType = value;
        })));
        if (this.getConditionDialog()) { // 生成型高级查询表单分支
            this.subscriptions.push(self.getConditionDialog().queryEvent.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data === 1) {
                    self.getQdpView().initQdpView();
                }
                else if (data > 1) {
                    self.refresh();
                }
            })));
            this.subscriptions.push(self.getConditionDialog().dialogInitEvent.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (self.templateType === 'qdpAdvancedTemplate') {
                    self.getConditionDialog().handleDialogShow();
                }
            })));
        }
        else { // 解析型高级查询表单分支
            EventBus.register(this.tabId + 'advanceTemplate-condition-dialog-queryEvent', (/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data === 1) {
                    self.getQdpView().initQdpView();
                }
                else if (data > 1) {
                    self.refresh();
                }
            }), this.tabId);
            EventBus.register(this.tabId + 'advanceTemplate-condition-dialog-dialogInitEvent', (/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (self.templateType === 'qdpAdvancedTemplate') {
                    self.getConditionDialog().handleDialogShow();
                }
            }), this.tabId);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.handleSchemaSelected = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.schemaId = id;
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().initSpread(this.queryId, id, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, null, true);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(id, this.getChartsOption(id), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId));
            }
        }
        this.pageIndex = 1;
    };
    /**
     * @param {?} id
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.handleBeforeClose = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.schemaId = id;
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().initSpread(this.queryId, id, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, null, true);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(id, this.getChartsOption(id), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(id));
            }
        }
        this.pageIndex = this.pageIndex ? this.pageIndex : 1;
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.refresh = /**
     * @return {?}
     */
    function () {
        if (this.controlType !== 'charts') {
            if (this.getQdpView()) {
                this.getQdpView().pageIndex = this.pageIndex;
                this.getQdpView().initSpread(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
            }
        }
        else {
            if (this.getCharts()) {
                this.getCharts().render(this.schemaId, this.getChartsOption(this.schemaId), '', this.conditionExpression);
            }
            else if (this.getFormDatasource()) {
                this.getFormDatasource().charts.setOption(this.getChartsOption(this.schemaId));
            }
        }
        this.pageIndex = this.pageIndex ? this.pageIndex : 1;
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.clearCache = /**
     * @return {?}
     */
    function () {
        this.renderService.clearCache(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.clearSort = /**
     * @return {?}
     */
    function () {
        this.getQdpView().handleClearSort();
    };
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.handlePageChange = /**
     * @param {?} pageInfo
     * @return {?}
     */
    function (pageInfo) {
        this.pageIndex = pageInfo.pageIndex;
        if (this.controlType !== 'crosstab') {
            this.getQdpView().pageIndex = this.pageIndex;
            this.getQdpView().initSpread(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, this.pageIndex, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId);
        }
        else {
            this.getQdpView().handleCrosstabPageChange(this.pageIndex, pageInfo.pageSize);
        }
    };
    /**
     * @param {?} eventData
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.handleExportExcel = /**
     * @param {?} eventData
     * @return {?}
     */
    function (eventData) {
        this.getQdpView().exportExcel(this.queryId, this.schemaId, this.controlType, this.pageIndex, this.qoManagerCode, this.queryRelativeUrl, this.conditionExpression, this.groupType, this.voId, this.pageInfo.totalCount, eventData);
    };
    /**
     * @param {?} eventData
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.pdfExportEvent = /**
     * @param {?} eventData
     * @return {?}
     */
    function (eventData) {
        this.getQdpView().pdfExportEvent(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, eventData, this.queryRelativeUrl, this.conditionExpression, this.pageIndex, this.groupType, this.voId);
    };
    /**
     * @param {?} eventData
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.printPreview = /**
     * @param {?} eventData
     * @return {?}
     */
    function (eventData) {
        this.getQdpView().printPreView(this.queryId, this.schemaId, this.controlType, this.qoManagerCode, eventData, this.queryRelativeUrl, this.conditionExpression, this.pageIndex, this.groupType, this.voId);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.onResized = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.size.height = event.newHeight + 'px';
        this.size.width = (event.newWidth ? (event.newWidth - 15) : 0) + 'px';
        this.contentSizeChange.emit(Object.assign({}, this.size));
    };
    /**
     * @private
     * @param {?} schemaId
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getChartsOption = /**
     * @private
     * @param {?} schemaId
     * @return {?}
     */
    function (schemaId) {
        /** @type {?} */
        var chartsOption = {};
        if (schemaId === 'prefab') {
        }
        else if (this.schemaInfo && this.schemaInfo.schemaList && this.schemaInfo.schemaList[schemaId]) {
            chartsOption = Object.assign({}, this.schemaInfo.schemaList[schemaId].schemaValue.chartsStyle, this.schemaInfo.schemaList[schemaId].schemaValue.chartsData);
        }
        if (chartsOption.series && this.schemaInfo.schemaList[schemaId].schemaValue.chartsType.series.type) {
            chartsOption.series.type = this.schemaInfo.schemaList[schemaId].schemaValue.chartsType.series.type;
            if (chartsOption.series.type !== 'line1') {
                delete chartsOption.series.areaStyle;
            }
            else {
                chartsOption.series.areaStyle = {};
            }
        }
        return chartsOption;
    };
    /**
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.filterCondition = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        if (this.co && this.co.ContainElements && this.co.ContainElements.length) {
            this.filter.addCommonObject(this.co);
            this.filter.addInjectedEntity(this.co.Code, 'CommonObject');
            // if (this.conditionExpression) {
            this.filter.addFilterCondition(this.conditionExpression);
            // }
            this.filter.buildExpression().then((/**
             * @param {?} buildedExpression
             * @return {?}
             */
            function (buildedExpression) {
                _this.conditionExpression = buildedExpression;
                if (buildedExpression) {
                    // tslint:disable-next-line:max-line-length
                    /** @type {?} */
                    var filter = { Id: EventBus.guid(), filter: buildedExpression, queryid: _this.queryId, datasourceid: _this.qoManagerCode ? _this.qoManagerCode : _this.queryId, queryType: 1 };
                    _this.subscriptions.push(self.filterService.saveFilter(filter, self.queryRelativeUrl)
                        .subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) { return self.refresh(); })));
                }
                else {
                    _this.subscriptions.push(self.filterService.deleteFilter(self.qoManagerCode ? self.qoManagerCode : self.queryId, self.queryId, self.queryRelativeUrl, 1).subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) { return self.refresh(); })));
                    _this.conditionExpression = null;
                    if (self.controlType !== 'charts') {
                        self.getQdpView().conditionExpression = null;
                    }
                }
            }));
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.expendCollapseLevel = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var maxLevel = this.getQdpView().spread.getActiveSheet().rowOutlines.getMaxLevel();
        for (var index = 1; index <= maxLevel; index++) {
            this.getQdpView().spread.getActiveSheet().rowOutlines.expand(index, $event);
        }
        this.getQdpView().spread.getActiveSheet().resumePaint();
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    QueryFrameworkLayoutComponent.prototype.getDataType = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var result = 'String';
        switch (type) {
            case 'string':
                result = 'String';
                break;
            case 'text':
                result = 'Text';
                break;
            case 'integer':
            case 'int':
                result = 'Integer';
                break;
            case 'decimal':
                result = 'Decimal';
                break;
            case 'boolean':
                result = 'Boolean';
                break;
            case 'date':
                result = 'Date';
                break;
            case 'dateTime':
                result = 'DateTime';
                break;
            case 'binary':
                result = 'Binary';
                break;
            default:
                break;
        }
        return result;
    };
    QueryFrameworkLayoutComponent.decorators = [
        { type: Component, args: [{
                    selector: 'query-framework-layout',
                    template: "<div class=\"f-page f-page-is-managelist\" id =\"{{toolBarEvent}}\" >\r\n  <div class=\"f-page-header mt-1\" [ngClass]=\"{'floatShow shadow-none': isMultiForm && isShowToolbar }\"\r\n    [hidden]=\"!isShowToolbar\">\r\n    <query-framework-toolbar [formPrintOption]=\"formPrintOption\" [conditionDialog]=\"conditionDialog\" [templateType]=\"templateType\" [schemaInfo]=\"schemaInfo\" [colList]=\"colList\" [pageInfo]=\"pageInfo\" [schemaId]=\"schemaId\"\r\n      [queryId]=\"queryId\" [groupType]=\"groupType\" [queryName]=\"queryName\" [controlType]=\"controlType\" [isShowToolbar]=\"isShowToolbar\"\r\n      [isMultiForm]=\"isMultiForm\" [inputTemplate]=\"inputTemplate\" [qoManagerCode]=\"qoManagerCode\" [qdpView]=\"qdpView\" [conditionExpression]=\"conditionExpression\"\r\n      [queryRelativeUrl]=\"queryRelativeUrl\" [qoId]=\"qoId\" [voId]=\"voId\" (schemaSelected)=\"handleSchemaSelected($event)\"\r\n      (dialogBeforeClose)=\"handleBeforeClose($event)\" (pageChange)=\"handlePageChange($event)\"\r\n      (exportExcel)=\"handleExportExcel($event)\" (printIntegration)=\"pdfExportEvent($event)\" (printPreview)=\"printPreview($event)\" (refreshEvent)=\"refresh()\"\r\n      (filterCondition)=\"filterCondition()\" (clearCache)=\"clearCache()\" (clearSort)=\"clearSort()\"\r\n      (expendCollapseLevel)=\"expendCollapseLevel($event)\"\r\n      [showSchemaManager]=\"toolbarOption.showSchemaManager\"\r\n      [showExport]=\"toolbarOption.showExport\"\r\n      [showReFresh]=\"toolbarOption.showReFresh\"\r\n      [showFilter]=\"toolbarOption.showFilter\"\r\n      [showPrint]=\"toolbarOption.showPrint\"\r\n      [showClearSort]=\"toolbarOption.showClearSort\"\r\n      [showClearCache]=\"toolbarOption.showClearCache\"\r\n      [showPreSchema]=\"toolbarOption.showPreSchema\"\r\n      >\r\n    </query-framework-toolbar>\r\n  </div>\r\n  <div class=\"position-relative h-100 ml-2 mr-2 bg-white farris-overflow-y-auto\">\r\n    <div class=\"farris-form farris-card-content-bg f-utils-absolute-all f-utils-flex-column\" (resized)=\"onResized($event)\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                    styles: [".floatShow{position:absolute;right:2px;top:2px;z-index:1;background-color:rgba(255,255,255,.15)}"]
                }] }
    ];
    /** @nocollapse */
    QueryFrameworkLayoutComponent.ctorParameters = function () { return [
        { type: SchemaService },
        { type: RenderService },
        { type: FilterService },
        { type: FilterManagerService },
        { type: ParasMappingManagerService }
    ]; };
    QueryFrameworkLayoutComponent.propDecorators = {
        queryId: [{ type: Input }],
        groupType: [{ type: Input }],
        qoManagerCode: [{ type: Input }],
        controlType: [{ type: Input }],
        queryName: [{ type: Input }],
        isShowToolbar: [{ type: Input }],
        isMultiForm: [{ type: Input }],
        queryRelativeUrl: [{ type: Input }],
        qoId: [{ type: Input }],
        voId: [{ type: Input }],
        templateType: [{ type: Input }],
        isInit: [{ type: Input }],
        toolbarOption: [{ type: Input }],
        qdpView: [{ type: ContentChild, args: ['qdp-view',] }],
        charts: [{ type: ContentChild, args: ['lcpBindingData',] }],
        formdatasource: [{ type: ContentChild, args: ['formBindingData',] }],
        conditionDialog: [{ type: Input }],
        toolbarComponent: [{ type: ViewChild, args: [QueryFrameworkToolbarComponent,] }],
        contentSizeChange: [{ type: Output }],
        formPrintOption: [{ type: Input }],
        inputTemplate: [{ type: Input }]
    };
    return QueryFrameworkLayoutComponent;
}());
export { QueryFrameworkLayoutComponent };
if (false) {
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.groupType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qoManagerCode;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.controlType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryName;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isShowToolbar;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isMultiForm;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qoId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.voId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.templateType;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.isInit;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolbarOption;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.qdpView;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolBarEvent;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.tabId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.charts;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.formdatasource;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.conditionDialog;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.toolbarComponent;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.contentSizeChange;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.formPrintOption;
    /**
     * 模板作为参数
     * @type {?}
     */
    QueryFrameworkLayoutComponent.prototype.inputTemplate;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.size;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.schemaInfo;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.colList;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.pageInfo;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.schemaId;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.pageIndex;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.conditionExpression;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.co;
    /** @type {?} */
    QueryFrameworkLayoutComponent.prototype.subscriptions;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.schemaService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.renderService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.filter;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    QueryFrameworkLayoutComponent.prototype.parasMappingManagerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicWYtbGF5b3V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BxZHAvcXVlcnktZnJhbWV3b3JrLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9xZi1sYXlvdXQvcWYtbGF5b3V0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBaUIsU0FBUyxFQUF1QyxNQUFNLGVBQWUsQ0FBQztBQUN6SyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQzlELE9BQU8sRUFBdUIsdUJBQXVCLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDdEcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDekQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLDBCQUEwQixFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUcsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN2QyxPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRixPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUkxRjtJQWlHRSx1Q0FBb0IsYUFBNEIsRUFBVSxhQUE0QixFQUFVLE1BQXFCLEVBQVUsYUFBbUMsRUFBVSwwQkFBc0Q7UUFBbE8saUJBa0RDO1FBbERtQixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUFVLCtCQUEwQixHQUExQiwwQkFBMEIsQ0FBNEI7UUF0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O0lBRVosc0RBQW9DOzs7OztJQUFFLHNEQUFvQzs7Ozs7SUFBRSwrQ0FBNkI7Ozs7O0lBQUUsc0RBQTJDOzs7OztJQUFFLG1FQUE4RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIENvbnRlbnRDaGlsZCwgVGVtcGxhdGVSZWYsIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgT25EZXN0cm95LCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUWRwVmlld0NvbXBvbmVudCwgUmVuZGVyU2VydmljZSB9IGZyb20gJ0BxZHAvc3ByZWFkJztcclxuaW1wb3J0IHsgTmd4RWNoYXJ0c0RpcmVjdGl2ZSwgTGNwQmluZGluZ0RhdGFEaXJlY3RpdmUsIEZvcm1CaW5kaW5nRGF0YURpcmVjdGl2ZSB9IGZyb20gJ0BxZHAvZWNoYXJ0cyc7XHJcbmltcG9ydCB7IFNjaGVtYVNlcnZpY2UgfSBmcm9tICdAcWRwL2lkZS1jbXAnO1xyXG5pbXBvcnQgeyBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnQGdzcC1zdmMvZmlsdGVyY29uZGl0aW9uJztcclxuaW1wb3J0IHsgRmlsdGVyTWFuYWdlclNlcnZpY2UsIFBhcmFzTWFwcGluZ01hbmFnZXJTZXJ2aWNlLCBSdGZTZXJ2aWNlcywgUURQQ2FjaGVVdGlsIH0gZnJvbSAnQHFkcC9jb21tb24nO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0BxZHAvY29tbW9uJztcclxuaW1wb3J0IHsgUXVlcnlGcmFtZXdvcmtUb29sYmFyQ29tcG9uZW50IH0gZnJvbSAnLi4vcWYtdG9vbGJhci9xZi10b29sYmFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENvbmRpdGlvbkRpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4uL2NvbmRpdGlvbi1kaWFsb2cvY29uZGl0aW9uLWRpYWxvZy5jb21wb25lbnQnO1xyXG5cclxuZGVjbGFyZSB2YXIgZ3NwZnJhbWV3b3JrU2VydmljZTogYW55O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdxdWVyeS1mcmFtZXdvcmstbGF5b3V0JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcWYtbGF5b3V0LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9xZi1sYXlvdXQuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBRdWVyeUZyYW1ld29ya0xheW91dENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpIHF1ZXJ5SWQ6IGFueTtcclxuICBASW5wdXQoKSBncm91cFR5cGU6IGFueTtcclxuICBASW5wdXQoKSBxb01hbmFnZXJDb2RlOiBhbnk7XHJcbiAgQElucHV0KCkgY29udHJvbFR5cGU6IGFueTtcclxuICBASW5wdXQoKSBxdWVyeU5hbWU6IGFueTtcclxuICBASW5wdXQoKSBpc1Nob3dUb29sYmFyID0gdHJ1ZTtcclxuICBASW5wdXQoKSBpc011bHRpRm9ybSA9IGZhbHNlOyAvLyDmmK/lkKbltYzlhaXlvI/ooajljZVcclxuICBASW5wdXQoKSBxdWVyeVJlbGF0aXZlVXJsOiBhbnk7XHJcbiAgQElucHV0KCkgcW9JZDogYW55O1xyXG4gIEBJbnB1dCgpIHZvSWQ6IGFueTtcclxuICBASW5wdXQoKSB0ZW1wbGF0ZVR5cGU6IGFueTtcclxuICBASW5wdXQoKSBpc0luaXQgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHRvb2xiYXJPcHRpb24gPSB7XHJcbiAgICBzaG93UHJlU2NoZW1hOiB0cnVlLFxyXG4gICAgc2hvd1NjaGVtYU1hbmFnZXI6IHRydWUsXHJcbiAgICBzaG93RXhwb3J0OiB0cnVlLFxyXG4gICAgc2hvd1JlRnJlc2g6IHRydWUsXHJcbiAgICBzaG93RmlsdGVyOiB0cnVlLFxyXG4gICAgc2hvd1ByaW50OiB0cnVlLFxyXG4gICAgc2hvd0NsZWFyU29ydDogdHJ1ZSxcclxuICAgIHNob3dDbGVhckNhY2hlOiB0cnVlXHJcbiAgfVxyXG4gIEBDb250ZW50Q2hpbGQoJ3FkcC12aWV3JykgcWRwVmlldzogUWRwVmlld0NvbXBvbmVudDtcclxuICB0b29sQmFyRXZlbnQgPSAndG9vbEJhckV2ZW50JyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICB0YWJJZDogYW55O1xyXG5cclxuICBnZXRRZHBWaWV3KCkge1xyXG4gICAgaWYgKHRoaXMucWRwVmlldykge1xyXG4gICAgICByZXR1cm4gdGhpcy5xZHBWaWV3O1xyXG4gICAgfSBlbHNlIGlmIChRRFBDYWNoZVV0aWwuZ2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArIHRoaXMuY29udHJvbFR5cGUgKyAncWRwdmlldycpKSB7XHJcbiAgICAgIHJldHVybiBRRFBDYWNoZVV0aWwuZ2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArIHRoaXMuY29udHJvbFR5cGUgKyAncWRwdmlldycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQENvbnRlbnRDaGlsZCgnbGNwQmluZGluZ0RhdGEnKSBjaGFydHM6IExjcEJpbmRpbmdEYXRhRGlyZWN0aXZlO1xyXG4gIGdldENoYXJ0cygpIHtcclxuICAgIGlmICh0aGlzLmNoYXJ0cykge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGFydHM7XHJcbiAgICB9IGVsc2UgaWYgKFFEUENhY2hlVXRpbC5nZXRDYWNoZSh0aGlzLnRhYklkICsgdGhpcy5xdWVyeUlkICsgJ2xjcC1jaGFydHMnKSkge1xyXG4gICAgICByZXR1cm4gUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyAnbGNwLWNoYXJ0cycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQENvbnRlbnRDaGlsZCgnZm9ybUJpbmRpbmdEYXRhJykgZm9ybWRhdGFzb3VyY2U6IEZvcm1CaW5kaW5nRGF0YURpcmVjdGl2ZTtcclxuICBnZXRGb3JtRGF0YXNvdXJjZSgpIHtcclxuICAgIGlmICh0aGlzLmZvcm1kYXRhc291cmNlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1kYXRhc291cmNlO1xyXG4gICAgfSBlbHNlIGlmIChRRFBDYWNoZVV0aWwuZ2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArICdmb3JtLWNoYXJ0cycpKSB7XHJcbiAgICAgIHJldHVybiBRRFBDYWNoZVV0aWwuZ2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArICdmb3JtLWNoYXJ0cycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KCkgY29uZGl0aW9uRGlhbG9nOiBDb25kaXRpb25EaWFsb2dDb21wb25lbnQ7XHJcbiAgZ2V0Q29uZGl0aW9uRGlhbG9nKCkge1xyXG4gICAgaWYgKHRoaXMuY29uZGl0aW9uRGlhbG9nKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbkRpYWxvZztcclxuICAgIH0gZWxzZSBpZiAoUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyAnYWR2YW5jZVRlbXBsYXRlLWNvbmRpdGlvbi1kaWFsb2cnKSkge1xyXG4gICAgICByZXR1cm4gUURQQ2FjaGVVdGlsLmdldENhY2hlKHRoaXMudGFiSWQgKyAnYWR2YW5jZVRlbXBsYXRlLWNvbmRpdGlvbi1kaWFsb2cnKTtcclxuICAgIH1cclxuICB9XHJcbiAgQFZpZXdDaGlsZChRdWVyeUZyYW1ld29ya1Rvb2xiYXJDb21wb25lbnQpIHRvb2xiYXJDb21wb25lbnQ6IFF1ZXJ5RnJhbWV3b3JrVG9vbGJhckNvbXBvbmVudDtcclxuICBAT3V0cHV0KCkgY29udGVudFNpemVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBASW5wdXQoKSBmb3JtUHJpbnRPcHRpb24gPSB7XHJcbiAgICBpc1Nob3dGb3JtUHJpbnQ6IGZhbHNlLFxyXG4gICAgcHJpbnRCRUlkOiAnJyxcclxuICAgIHByaW50Rm9ybUlkRmllbGQ6ICcnXHJcbiAgfTtcclxuICAvKipcclxuICAgKiDmqKHmnb/kvZzkuLrlj4LmlbBcclxuICAgKi9cclxuICBASW5wdXQoKSBpbnB1dFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIHNpemUgPSB7XHJcbiAgICBoZWlnaHQ6ICc1MDBweCcsXHJcbiAgICB3aWR0aDogJzMwMHB4J1xyXG4gIH07XHJcbiAgc2NoZW1hSW5mbzogYW55O1xyXG4gIGNvbExpc3Q6IGFueTtcclxuICBwYWdlSW5mbzogYW55ID0ge307XHJcbiAgc2NoZW1hSWQ6IGFueTtcclxuICBwYWdlSW5kZXg6IGFueSA9IDE7XHJcbiAgY29uZGl0aW9uRXhwcmVzc2lvbjogYW55O1xyXG4gIGNvOiBhbnkgPSB7XHJcbiAgICBOb2RlVHlwZTogJ1F1ZXJ5Tm9kZScsXHJcbiAgICBJc0JlOiB0cnVlLFxyXG4gICAgQ29udGFpbkVsZW1lbnRzOiBbXSxcclxuICAgIENvZGU6ICdRdWVyeU5vZGUnLFxyXG4gICAgTmFtZTogJ1F1ZXJ5TmRvZScsXHJcbiAgICBCaXpFbnRpdHlJRDogRXZlbnRCdXMuZ3VpZCgpXHJcbiAgfTtcclxuICBzdWJzY3JpcHRpb25zOiBhbnkgPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzY2hlbWFTZXJ2aWNlOiBTY2hlbWFTZXJ2aWNlLCBwcml2YXRlIHJlbmRlclNlcnZpY2U6IFJlbmRlclNlcnZpY2UsIHByaXZhdGUgZmlsdGVyOiBGaWx0ZXJTZXJ2aWNlLCBwcml2YXRlIGZpbHRlclNlcnZpY2U6IEZpbHRlck1hbmFnZXJTZXJ2aWNlLCBwcml2YXRlIHBhcmFzTWFwcGluZ01hbmFnZXJTZXJ2aWNlOiBQYXJhc01hcHBpbmdNYW5hZ2VyU2VydmljZSkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRhYklkID0gUnRmU2VydmljZXMuZ2V0VGFiSWQodGhpcy5xdWVyeUlkKTtcclxuXHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuc2NoZW1hU2VydmljZS5zY2hlbWFJbmZvLnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICBjb25zdCBzY2hlbWFJbmZvQWxsID0gT2JqZWN0LmFzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgaWYgKHNjaGVtYUluZm9BbGwuc2NoZW1hTGlzdCAmJiBzY2hlbWFJbmZvQWxsLnNjaGVtYUxpc3RbdGhpcy5xdWVyeUlkXSkge1xyXG4gICAgICAgICAgICBzY2hlbWFJbmZvQWxsLnNjaGVtYUxpc3QgPSBzY2hlbWFJbmZvQWxsLnNjaGVtYUxpc3RbdGhpcy5xdWVyeUlkXTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLnNjaGVtYUlkKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNjaGVtYUluZm9BbGwuaXNEZWZhdWx0U2NoZW1hICYmIHNjaGVtYUluZm9BbGwuaXNEZWZhdWx0U2NoZW1hLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmluaXRDb2xMaXN0RGF0YShzY2hlbWFJbmZvQWxsLmlzRGVmYXVsdFNjaGVtYS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuc2NoZW1hSWQgIT09ICcxJyAmJiBzZWxmLnNjaGVtYUlkICE9PSAncHJlZmFiJyAmJiBzZWxmLnNjaGVtYUlkICE9PSAncHVibGljX3NjaGVtYScgJiYgc2VsZi5zY2hlbWFJZCAhPT0gJ3BlcnNvbl9zY2hlbWEnKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5pbml0Q29sTGlzdERhdGEoc2NoZW1hSW5mb0FsbC5zY2hlbWFMaXN0W3NlbGYuc2NoZW1hSWRdLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NoZW1hSW5mb0FsbC5zY2hlbWFMaXN0ID0gbnVsbDtcclxuICAgICAgICAgICAgc2VsZi5pbml0Q29sTGlzdERhdGEoc2NoZW1hSW5mb0FsbC5wcmVTY2hlbWEuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2VsZi5zY2hlbWFJbmZvID0gc2NoZW1hSW5mb0FsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsgXHJcbiAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuc2NoZW1hU2VydmljZS5jb2xMaXN0LnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgIHNlbGYuY29sTGlzdCA9IHZhbHVlO1xyXG4gICAgICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0Q29sTGlzdERhdGEodmFsdWUsICdjb2wnKTtcclxuICAgICAgfVxyXG4gICAgfSkpO1xyXG4gICAgLy8g5aaC5p6c5pyJ562b6YCJ5pa55qGIXHJcbiAgICBpZiAodGhpcy5maWx0ZXJTZXJ2aWNlICYmIHRoaXMuZmlsdGVyU2VydmljZS5pc0ZpbHRlclFEUCkge1xyXG4gICAgICAvLyB0aGlzLmZpbHRlclNlcnZpY2UuaXNGaWx0ZXJRRFAub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZmlsdGVyU2VydmljZS5pc0ZpbHRlclFEUC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi50b29sYmFyQ29tcG9uZW50ICYmIHNlbGYudG9vbGJhckNvbXBvbmVudC5wYWdpbmF0aW9uQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgc2VsZi50b29sYmFyQ29tcG9uZW50LnBhZ2luYXRpb25Db21wb25lbnQuaW5pdFBhZ2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgc2VsZi5wYWdlSW5kZXggPSBzZWxmLnRvb2xiYXJDb21wb25lbnQucGFnaW5hdGlvbkNvbXBvbmVudC5wYWdpbmF0aW9uLnBhZ2VJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgc2VsZi5wYWdlSW5mbyA9IHNlbGYudG9vbGJhckNvbXBvbmVudC5wYWdpbmF0aW9uQ29tcG9uZW50LnBhZ2luYXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucyAmJiB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMuc3Vic2NyaXB0aW9ucykge1xyXG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY3Jvc3N0YWInKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuc2NoZW1hU2VydmljZS5wYWdlSW5mb0NoYW5nZS5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICAgIHNlbGYucGFnZUluZm8gPSB2YWx1ZTtcclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgKHRoaXMucW9JZCkge1xyXG4gICAgaWYgKHRoaXMuaXNJbml0ID09IHRydWUpIHtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc2VsZi5maWx0ZXJTZXJ2aWNlLmdldEZpbHRlcihzZWxmLnFvTWFuYWdlckNvZGUgPyBzZWxmLnFvTWFuYWdlckNvZGUgOiBzZWxmLnF1ZXJ5SWQsIHNlbGYucXVlcnlJZCwgc2VsZi5xdWVyeVJlbGF0aXZlVXJsLCAxLCB0aGlzLmdyb3VwVHlwZSkuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICBzZWxmLmNvbmRpdGlvbkV4cHJlc3Npb24gPSBKU09OLnN0cmluZ2lmeShkYXRhLmZpbHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLnBhcmFzTWFwcGluZ01hbmFnZXJTZXJ2aWNlLmdldE1ldGFEYXRhSW5mb0J5SWQoc2VsZi5xb0lkKS5zdWJzY3JpYmUodm9JbmZvID0+IHtcclxuICAgIC8vICAgaWYgKHZvSW5mbykge1xyXG4gICAgLy8gICAgIHNlbGYuY28gPSBKU09OLnBhcnNlKHZvSW5mby5jb250ZW50KS5RdWVyeU5vZGU7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH0pKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc011bHRpRm9ybSkge1xyXG4gICAgICBjb25zdCBkaXZTaG93VG9vbEJhckRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudG9vbEJhckV2ZW50KSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgZGl2U2hvd1Rvb2xCYXJEb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNTaG93VG9vbGJhciA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkaXZTaG93VG9vbEJhckRvbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLmlzU2hvd1Rvb2xiYXIgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRDb2xMaXN0RGF0YShuZXdWYWx1ZTogYW55LCB0eXBlPzogYW55KSB7XHJcbiAgICBuZXdWYWx1ZS5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgIHRoaXMucmVjdXJzaXZlSW5pdENvbExpc3REYXRhKG51bGwsIGNvbCwgdHlwZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVjdXJzaXZlSW5pdENvbExpc3REYXRhKGNoaWxkcmVuOiBhbnksIGNvbDogYW55LCB0eXBlPzogYW55KSB7XHJcbiAgICBpZiAoY29sKSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jby5Db250YWluRWxlbWVudHMuZmluZEluZGV4KChpdGVtOiBhbnkpID0+IGl0ZW0uQ29kZSA9PT0gY29sLmJpbmRGaWVsZCk7XHJcbiAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICBjb25zdCBub2RlID0ge307XHJcbiAgICAgICAgbm9kZVsnSUQnXSA9IEV2ZW50QnVzLmd1aWQoKTtcclxuICAgICAgICBub2RlWydDb2RlJ10gPSBjb2wuYmluZEZpZWxkO1xyXG4gICAgICAgIG5vZGVbJ0xhYmVsSUQnXSA9IGNvbC5iaW5kRmllbGQ7XHJcbiAgICAgICAgbm9kZVsnTURhdGFUeXBlJ10gPSB0aGlzLmdldERhdGFUeXBlKGNvbC50eXBlKTtcclxuICAgICAgICBub2RlWydOb2RlVHlwZSddID0gJ1F1ZXJ5UHJvcGVydHknO1xyXG4gICAgICAgIG5vZGVbJ05hbWUnXSA9IGNvbC5uYW1lO1xyXG4gICAgICAgIHRoaXMuY28uQ29udGFpbkVsZW1lbnRzLnB1c2gobm9kZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZSAhPT0gJ2NvbCcpIHtcclxuICAgICAgICB0aGlzLmNvLkNvbnRhaW5FbGVtZW50c1tpbmRleF1bJ05hbWUnXSA9IGNvbC5uYW1lO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb2wuY2hpbGRMaXN0ICYmIGNvbC5jaGlsZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5yZWN1cnNpdmVJbml0Q29sTGlzdERhdGEoY29sLmNoaWxkTGlzdCwgbnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNoaWxkcmVuLmZvckVhY2goKGM6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jby5Db250YWluRWxlbWVudHMuZmluZEluZGV4KChpdGVtOiBhbnkpID0+IGl0ZW0uQ29kZSA9PT0gYy5iaW5kRmllbGQpO1xyXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICAgIGNvbnN0IG5vZGUgPSB7fTtcclxuICAgICAgICAgIG5vZGVbJ0lEJ10gPSBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgICAgICAgICBub2RlWydDb2RlJ10gPSBjLmJpbmRGaWVsZDtcclxuICAgICAgICAgIG5vZGVbJ0xhYmVsSUQnXSA9IGMuYmluZEZpZWxkO1xyXG4gICAgICAgICAgbm9kZVsnTURhdGFUeXBlJ10gPSB0aGlzLmdldERhdGFUeXBlKGMudHlwZSk7XHJcbiAgICAgICAgICBub2RlWydOb2RlVHlwZSddID0gJ1F1ZXJ5UHJvcGVydHknO1xyXG4gICAgICAgICAgbm9kZVsnTmFtZSddID0gYy5uYW1lO1xyXG4gICAgICAgICAgdGhpcy5jby5Db250YWluRWxlbWVudHMucHVzaChub2RlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgIT09ICdjb2wnKSB7XHJcbiAgICAgICAgICB0aGlzLmNvLkNvbnRhaW5FbGVtZW50c1tpbmRleF1bJ05hbWUnXSA9IGMubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMuY2hpbGRMaXN0ICYmIGMuY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5yZWN1cnNpdmVJbml0Q29sTGlzdERhdGEoYy5jaGlsZExpc3QsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBmb3IgKGNvbnN0IGNoYW5nZU5hbWUgaW4gY2hhbmdlcykge1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IGNoYW5nZXNbY2hhbmdlTmFtZV0uY3VycmVudFZhbHVlO1xyXG4gICAgICBpZiAobmV3VmFsdWUgIT09IG51bGwgJiYgbmV3VmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIHRoaXMudGFiSWQgPSBSdGZTZXJ2aWNlcy5nZXRUYWJJZChuZXdWYWx1ZSk7XHJcbiAgICAgICAgc3dpdGNoIChjaGFuZ2VOYW1lKSB7XHJcbiAgICAgICAgICBjYXNlICdxdWVyeUlkJzpcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgUURQQ2FjaGVVdGlsLnNldENhY2hlKHRoaXMudGFiSWQgKyAncXVlcnlJZCcsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3FvTWFuYWdlckNvZGUnOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBRRFBDYWNoZVV0aWwuc2V0Q2FjaGUodGhpcy50YWJJZCArICdxb01hbmFnZXJDb2RlJywgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnY29udHJvbFR5cGUnOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBRRFBDYWNoZVV0aWwuc2V0Q2FjaGUodGhpcy50YWJJZCArICdjb250cm9sVHlwZScsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3F1ZXJ5UmVsYXRpdmVVcmwnOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBRRFBDYWNoZVV0aWwuc2V0Q2FjaGUodGhpcy50YWJJZCArICdxdWVyeVJlbGF0aXZlVXJsJywgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAndm9JZCc6XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIFFEUENhY2hlVXRpbC5zZXRDYWNoZSh0aGlzLnRhYklkICsgJ3ZvSWQnLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZ2V0UWRwVmlldygpLnNoZWV0Q2hhbmdlZC5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICBzZWxmLmdyb3VwVHlwZSA9IHZhbHVlO1xyXG4gICAgfSkpO1xyXG4gICAgaWYgKHRoaXMuZ2V0Q29uZGl0aW9uRGlhbG9nKCkpIHsgLy8g55Sf5oiQ5Z6L6auY57qn5p+l6K+i6KGo5Y2V5YiG5pSvXHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZ2V0Q29uZGl0aW9uRGlhbG9nKCkucXVlcnlFdmVudC5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoZGF0YSA9PT0gMSkge1xyXG4gICAgICAgICAgc2VsZi5nZXRRZHBWaWV3KCkuaW5pdFFkcFZpZXcoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPiAxKSB7XHJcbiAgICAgICAgICBzZWxmLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pKTtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc2VsZi5nZXRDb25kaXRpb25EaWFsb2coKS5kaWFsb2dJbml0RXZlbnQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYgKHNlbGYudGVtcGxhdGVUeXBlID09PSAncWRwQWR2YW5jZWRUZW1wbGF0ZScpIHtcclxuICAgICAgICAgIHNlbGYuZ2V0Q29uZGl0aW9uRGlhbG9nKCkuaGFuZGxlRGlhbG9nU2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSkpO1xyXG4gICAgfSBlbHNlIHsgLy8g6Kej5p6Q5Z6L6auY57qn5p+l6K+i6KGo5Y2V5YiG5pSvXHJcbiAgICAgIEV2ZW50QnVzLnJlZ2lzdGVyKHRoaXMudGFiSWQgKyAnYWR2YW5jZVRlbXBsYXRlLWNvbmRpdGlvbi1kaWFsb2ctcXVlcnlFdmVudCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09IDEpIHtcclxuICAgICAgICAgIHNlbGYuZ2V0UWRwVmlldygpLmluaXRRZHBWaWV3KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID4gMSkge1xyXG4gICAgICAgICAgc2VsZi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0aGlzLnRhYklkKTtcclxuICAgICAgRXZlbnRCdXMucmVnaXN0ZXIodGhpcy50YWJJZCArICdhZHZhbmNlVGVtcGxhdGUtY29uZGl0aW9uLWRpYWxvZy1kaWFsb2dJbml0RXZlbnQnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmIChzZWxmLnRlbXBsYXRlVHlwZSA9PT0gJ3FkcEFkdmFuY2VkVGVtcGxhdGUnKSB7XHJcbiAgICAgICAgICBzZWxmLmdldENvbmRpdGlvbkRpYWxvZygpLmhhbmRsZURpYWxvZ1Nob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRoaXMudGFiSWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2NoZW1hU2VsZWN0ZWQoaWQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5zY2hlbWFJZCA9IGlkO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgIGlmICh0aGlzLmdldFFkcFZpZXcoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0UWRwVmlldygpLmluaXRTcHJlYWQodGhpcy5xdWVyeUlkLCBpZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQsIG51bGwsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5nZXRDaGFydHMoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhcnRzKCkucmVuZGVyKGlkLCB0aGlzLmdldENoYXJ0c09wdGlvbihpZCksICcnLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24pO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKS5jaGFydHMuc2V0T3B0aW9uKHRoaXMuZ2V0Q2hhcnRzT3B0aW9uKHRoaXMuc2NoZW1hSWQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wYWdlSW5kZXggPSAxO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQmVmb3JlQ2xvc2UoaWQ6IGFueSkge1xyXG4gICAgdGhpcy5zY2hlbWFJZCA9IGlkO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgIGlmICh0aGlzLmdldFFkcFZpZXcoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0UWRwVmlldygpLmluaXRTcHJlYWQodGhpcy5xdWVyeUlkLCBpZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQsIG51bGwsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5nZXRDaGFydHMoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhcnRzKCkucmVuZGVyKGlkLCB0aGlzLmdldENoYXJ0c09wdGlvbihpZCksICcnLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24pO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKS5jaGFydHMuc2V0T3B0aW9uKHRoaXMuZ2V0Q2hhcnRzT3B0aW9uKGlkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXggPyB0aGlzLnBhZ2VJbmRleCA6IDE7XHJcbiAgfVxyXG5cclxuICByZWZyZXNoKCkge1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgIGlmICh0aGlzLmdldFFkcFZpZXcoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0UWRwVmlldygpLnBhZ2VJbmRleCA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICAgIHRoaXMuZ2V0UWRwVmlldygpLmluaXRTcHJlYWQodGhpcy5xdWVyeUlkLCB0aGlzLnNjaGVtYUlkLCB0aGlzLmNvbnRyb2xUeXBlLCB0aGlzLnFvTWFuYWdlckNvZGUsIHRoaXMucGFnZUluZGV4LCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbiwgdGhpcy5ncm91cFR5cGUsIHRoaXMudm9JZCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLmdldENoYXJ0cygpKSB7XHJcbiAgICAgICAgdGhpcy5nZXRDaGFydHMoKS5yZW5kZXIodGhpcy5zY2hlbWFJZCwgdGhpcy5nZXRDaGFydHNPcHRpb24odGhpcy5zY2hlbWFJZCksICcnLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24pO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKSkge1xyXG4gICAgICAgIHRoaXMuZ2V0Rm9ybURhdGFzb3VyY2UoKS5jaGFydHMuc2V0T3B0aW9uKHRoaXMuZ2V0Q2hhcnRzT3B0aW9uKHRoaXMuc2NoZW1hSWQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleCA/IHRoaXMucGFnZUluZGV4IDogMTtcclxuICB9XHJcblxyXG4gIGNsZWFyQ2FjaGUoKSB7XHJcbiAgICB0aGlzLnJlbmRlclNlcnZpY2UuY2xlYXJDYWNoZSh0aGlzLnF1ZXJ5SWQsIHRoaXMuc2NoZW1hSWQsIHRoaXMuY29udHJvbFR5cGUsIHRoaXMucW9NYW5hZ2VyQ29kZSwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMuZ3JvdXBUeXBlLCB0aGlzLnZvSWQpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJTb3J0KCkge1xyXG4gICAgdGhpcy5nZXRRZHBWaWV3KCkuaGFuZGxlQ2xlYXJTb3J0KCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVQYWdlQ2hhbmdlKHBhZ2VJbmZvOiBhbnkpIHtcclxuICAgIHRoaXMucGFnZUluZGV4ID0gcGFnZUluZm8ucGFnZUluZGV4O1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjcm9zc3RhYicpIHtcclxuICAgICAgdGhpcy5nZXRRZHBWaWV3KCkucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXg7XHJcbiAgICAgIHRoaXMuZ2V0UWRwVmlldygpLmluaXRTcHJlYWQodGhpcy5xdWVyeUlkLCB0aGlzLnNjaGVtYUlkLCB0aGlzLmNvbnRyb2xUeXBlLCB0aGlzLnFvTWFuYWdlckNvZGUsIHRoaXMucGFnZUluZGV4LCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbiwgdGhpcy5ncm91cFR5cGUsIHRoaXMudm9JZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdldFFkcFZpZXcoKS5oYW5kbGVDcm9zc3RhYlBhZ2VDaGFuZ2UodGhpcy5wYWdlSW5kZXgsIHBhZ2VJbmZvLnBhZ2VTaXplKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUV4cG9ydEV4Y2VsKGV2ZW50RGF0YTogYW55KSB7XHJcbiAgICB0aGlzLmdldFFkcFZpZXcoKS5leHBvcnRFeGNlbCh0aGlzLnF1ZXJ5SWQsIHRoaXMuc2NoZW1hSWQsIHRoaXMuY29udHJvbFR5cGUsIHRoaXMucGFnZUluZGV4LCB0aGlzLnFvTWFuYWdlckNvZGUsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLmdyb3VwVHlwZSwgdGhpcy52b0lkLCB0aGlzLnBhZ2VJbmZvLnRvdGFsQ291bnQsIGV2ZW50RGF0YSk7XHJcbiAgfVxyXG5cclxuICBwZGZFeHBvcnRFdmVudChldmVudERhdGE6IGFueSkge1xyXG4gICAgdGhpcy5nZXRRZHBWaWV3KCkucGRmRXhwb3J0RXZlbnQodGhpcy5xdWVyeUlkLCB0aGlzLnNjaGVtYUlkLCB0aGlzLmNvbnRyb2xUeXBlLCB0aGlzLnFvTWFuYWdlckNvZGUsIGV2ZW50RGF0YSwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsLCB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24sIHRoaXMucGFnZUluZGV4LCB0aGlzLmdyb3VwVHlwZSwgdGhpcy52b0lkKTtcclxuICB9XHJcblxyXG4gIHByaW50UHJldmlldyhldmVudERhdGE6IGFueSkge1xyXG4gICAgdGhpcy5nZXRRZHBWaWV3KCkucHJpbnRQcmVWaWV3KHRoaXMucXVlcnlJZCwgdGhpcy5zY2hlbWFJZCwgdGhpcy5jb250cm9sVHlwZSwgdGhpcy5xb01hbmFnZXJDb2RlLCBldmVudERhdGEsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5jb25kaXRpb25FeHByZXNzaW9uLCB0aGlzLnBhZ2VJbmRleCwgdGhpcy5ncm91cFR5cGUsIHRoaXMudm9JZCk7XHJcbiAgfVxyXG5cclxuICBvblJlc2l6ZWQoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5zaXplLmhlaWdodCA9IGV2ZW50Lm5ld0hlaWdodCArICdweCc7XHJcbiAgICB0aGlzLnNpemUud2lkdGggPSAoZXZlbnQubmV3V2lkdGggPyAoZXZlbnQubmV3V2lkdGggLSAxNSkgOiAwKSArICdweCc7XHJcbiAgICB0aGlzLmNvbnRlbnRTaXplQ2hhbmdlLmVtaXQoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zaXplKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENoYXJ0c09wdGlvbihzY2hlbWFJZDogYW55KSB7XHJcbiAgICBsZXQgY2hhcnRzT3B0aW9uOiBhbnkgPSB7fTtcclxuICAgIGlmIChzY2hlbWFJZCA9PT0gJ3ByZWZhYicpIHtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2NoZW1hSW5mbyAmJiB0aGlzLnNjaGVtYUluZm8uc2NoZW1hTGlzdCAmJiB0aGlzLnNjaGVtYUluZm8uc2NoZW1hTGlzdFtzY2hlbWFJZF0pIHtcclxuICAgICAgY2hhcnRzT3B0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2NoZW1hSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1N0eWxlLCB0aGlzLnNjaGVtYUluZm8uc2NoZW1hTGlzdFtzY2hlbWFJZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YSk7XHJcbiAgICB9XHJcbiAgICBpZiAoY2hhcnRzT3B0aW9uLnNlcmllcyAmJiB0aGlzLnNjaGVtYUluZm8uc2NoZW1hTGlzdFtzY2hlbWFJZF0uc2NoZW1hVmFsdWUuY2hhcnRzVHlwZS5zZXJpZXMudHlwZSkge1xyXG4gICAgICBjaGFydHNPcHRpb24uc2VyaWVzLnR5cGUgPSB0aGlzLnNjaGVtYUluZm8uc2NoZW1hTGlzdFtzY2hlbWFJZF0uc2NoZW1hVmFsdWUuY2hhcnRzVHlwZS5zZXJpZXMudHlwZTtcclxuICAgICAgaWYgKGNoYXJ0c09wdGlvbi5zZXJpZXMudHlwZSAhPT0gJ2xpbmUxJykge1xyXG4gICAgICAgIGRlbGV0ZSBjaGFydHNPcHRpb24uc2VyaWVzLmFyZWFTdHlsZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjaGFydHNPcHRpb24uc2VyaWVzLmFyZWFTdHlsZSA9IHt9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnRzT3B0aW9uO1xyXG4gIH1cclxuXHJcbiAgZmlsdGVyQ29uZGl0aW9uKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAodGhpcy5jbyAmJiB0aGlzLmNvLkNvbnRhaW5FbGVtZW50cyAmJiB0aGlzLmNvLkNvbnRhaW5FbGVtZW50cy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5maWx0ZXIuYWRkQ29tbW9uT2JqZWN0KHRoaXMuY28pO1xyXG4gICAgICB0aGlzLmZpbHRlci5hZGRJbmplY3RlZEVudGl0eSh0aGlzLmNvLkNvZGUsICdDb21tb25PYmplY3QnKTtcclxuICAgICAgLy8gaWYgKHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbikge1xyXG4gICAgICB0aGlzLmZpbHRlci5hZGRGaWx0ZXJDb25kaXRpb24odGhpcy5jb25kaXRpb25FeHByZXNzaW9uKTtcclxuICAgICAgLy8gfVxyXG4gICAgICB0aGlzLmZpbHRlci5idWlsZEV4cHJlc3Npb24oKS50aGVuKGJ1aWxkZWRFeHByZXNzaW9uID0+IHtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24gPSBidWlsZGVkRXhwcmVzc2lvbjtcclxuICAgICAgICBpZiAoYnVpbGRlZEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcclxuICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHsgSWQ6IEV2ZW50QnVzLmd1aWQoKSwgZmlsdGVyOiBidWlsZGVkRXhwcmVzc2lvbiwgcXVlcnlpZDogdGhpcy5xdWVyeUlkLCBkYXRhc291cmNlaWQ6IHRoaXMucW9NYW5hZ2VyQ29kZSA/IHRoaXMucW9NYW5hZ2VyQ29kZSA6IHRoaXMucXVlcnlJZCwgcXVlcnlUeXBlOiAxIH07XHJcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLmZpbHRlclNlcnZpY2Uuc2F2ZUZpbHRlcihmaWx0ZXIsIHNlbGYucXVlcnlSZWxhdGl2ZVVybClcclxuICAgICAgICAgICAgLnN1YnNjcmliZShkYXRhID0+IHNlbGYucmVmcmVzaCgpKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHNlbGYuZmlsdGVyU2VydmljZS5kZWxldGVGaWx0ZXIoc2VsZi5xb01hbmFnZXJDb2RlID8gc2VsZi5xb01hbmFnZXJDb2RlIDogc2VsZi5xdWVyeUlkLCBzZWxmLnF1ZXJ5SWQsIHNlbGYucXVlcnlSZWxhdGl2ZVVybCwgMSkuc3Vic2NyaWJlKGRhdGEgPT4gc2VsZi5yZWZyZXNoKCkpKTtcclxuICAgICAgICAgIHRoaXMuY29uZGl0aW9uRXhwcmVzc2lvbiA9IG51bGw7XHJcbiAgICAgICAgICBpZiAoc2VsZi5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgICAgICAgc2VsZi5nZXRRZHBWaWV3KCkuY29uZGl0aW9uRXhwcmVzc2lvbiA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4cGVuZENvbGxhcHNlTGV2ZWwoJGV2ZW50KSB7XHJcbiAgICBjb25zdCBtYXhMZXZlbCA9IHRoaXMuZ2V0UWRwVmlldygpLnNwcmVhZC5nZXRBY3RpdmVTaGVldCgpLnJvd091dGxpbmVzLmdldE1heExldmVsKCk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IG1heExldmVsOyBpbmRleCsrKSB7XHJcbiAgICAgIHRoaXMuZ2V0UWRwVmlldygpLnNwcmVhZC5nZXRBY3RpdmVTaGVldCgpLnJvd091dGxpbmVzLmV4cGFuZChpbmRleCwgJGV2ZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuZ2V0UWRwVmlldygpLnNwcmVhZC5nZXRBY3RpdmVTaGVldCgpLnJlc3VtZVBhaW50KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldERhdGFUeXBlKHR5cGU6IGFueSkge1xyXG4gICAgbGV0IHJlc3VsdCA9ICdTdHJpbmcnO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ1N0cmluZyc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3RleHQnOlxyXG4gICAgICAgIHJlc3VsdCA9ICdUZXh0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnaW50ZWdlcic6XHJcbiAgICAgIGNhc2UgJ2ludCc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ0ludGVnZXInO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkZWNpbWFsJzpcclxuICAgICAgICByZXN1bHQgPSAnRGVjaW1hbCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxyXG4gICAgICAgIHJlc3VsdCA9ICdCb29sZWFuJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZGF0ZSc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ0RhdGUnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdkYXRlVGltZSc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ0RhdGVUaW1lJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYmluYXJ5JzpcclxuICAgICAgICByZXN1bHQgPSAnQmluYXJ5JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==