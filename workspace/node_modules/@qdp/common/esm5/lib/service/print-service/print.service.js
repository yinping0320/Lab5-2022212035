/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { OutputType, FileType, PrintType } from '@gsp-svc/cloudprint';
/**
 * 打印服务
 * \@Scope FrameComponent
 */
var /**
 * 打印服务
 * \@Scope FrameComponent
 */
IntegrationPrintService = /** @class */ (function () {
    /**
     * 构造函数
     */
    function IntegrationPrintService(_printService) {
        this.printService = _printService;
    }
    /**
     * 打印单据
     * @param beMetaId BE元数据标识
     * @param bizBillId 业务单据标识
     */
    /**
     * 打印单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} bizBillId 业务单据标识
     * @return {?}
     */
    IntegrationPrintService.prototype.printSingle = /**
     * 打印单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} bizBillId 业务单据标识
     * @return {?}
     */
    function (beMetaId, bizBillId) {
        return this.printArray(beMetaId, [bizBillId]);
    };
    /**
     * 打印单据（通过id或ids）
     * @param beMetaId be元数据Id
     * @param ids 单据id或ids
     */
    /**
     * 打印单据（通过id或ids）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @return {?}
     */
    IntegrationPrintService.prototype.printByIds = /**
     * 打印单据（通过id或ids）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @return {?}
     */
    function (beMetaId, ids) {
        /** @type {?} */
        var dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item; }));
        return this.printArray(beMetaId, dataIds);
    };
    /**
     * 打印单据（带维度）
     * @param beMetaId be元数据Id
     * @param ids 单据id或ids
     * @param dim1 维度1值
     * @param dim2 维度2值
     * @param billCategoryId 单据类型Id
     */
    /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?=} dim1 维度1值
     * @param {?=} dim2 维度2值
     * @param {?=} billCategoryId 单据类型Id
     * @return {?}
     */
    IntegrationPrintService.prototype.printByIdsWithDimension = /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?=} dim1 维度1值
     * @param {?=} dim2 维度2值
     * @param {?=} billCategoryId 单据类型Id
     * @return {?}
     */
    function (beMetaId, ids, dim1, dim2, billCategoryId) {
        /** @type {?} */
        var dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item; }));
        return this.printArray(beMetaId, dataIds, dim1, dim2, billCategoryId);
    };
    /**
     * 打印单据（带维度）
     * @param beMetaId be元数据Id
     * @param ids 单据id或ids
     * @param dim1 维度1值
     * @param dim2 维度2值
     * @param billCategoryId 单据类型Id
     */
    /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?} dim1 维度1值
     * @param {?} dim2 维度2值
     * @param {?} queryType
     * @param {?} queryServiceId
     * @param {?} queryParam
     * @return {?}
     */
    IntegrationPrintService.prototype.printWithDimensionCustomDataSource = /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?} dim1 维度1值
     * @param {?} dim2 维度2值
     * @param {?} queryType
     * @param {?} queryServiceId
     * @param {?} queryParam
     * @return {?}
     */
    function (beMetaId, ids, dim1, dim2, queryType, queryServiceId, queryParam) {
        /** @type {?} */
        var dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item; }));
        return this.printArray(beMetaId, dataIds, dim1, dim2, undefined, queryType, queryServiceId, queryParam);
    };
    /**
     * 打印多个单据
     * @param beMetaId BE元数据标识
     * @param dataIds 业务单据标识数组
     * @param dim1 维度1
     * @param dim2 维度2
     * @param billCategoryId 业务单据类型Id
     */
    /**
     * 打印多个单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} dataIds 业务单据标识数组
     * @param {?=} dim1 维度1
     * @param {?=} dim2 维度2
     * @param {?=} billCategoryId 业务单据类型Id
     * @param {?=} queryType
     * @param {?=} queryServiceId
     * @param {?=} queryParam
     * @return {?}
     */
    IntegrationPrintService.prototype.printArray = /**
     * 打印多个单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} dataIds 业务单据标识数组
     * @param {?=} dim1 维度1
     * @param {?=} dim2 维度2
     * @param {?=} billCategoryId 业务单据类型Id
     * @param {?=} queryType
     * @param {?=} queryServiceId
     * @param {?=} queryParam
     * @return {?}
     */
    function (beMetaId, dataIds, dim1, dim2, billCategoryId, queryType, queryServiceId, queryParam) {
        /** @type {?} */
        var sourceOptions = this.buildSourceOptions({
            dataIds: dataIds,
            sourceId: beMetaId
        });
        /** @type {?} */
        var outputOptions = this.buildOutputOptions();
        if (dim1) {
            sourceOptions.FirstDimensionVal = dim1;
        }
        if (dim2) {
            sourceOptions.SecondDimensionVal = dim2;
        }
        if (typeof billCategoryId !== 'undefined') {
            sourceOptions.billCategoryId = billCategoryId;
        }
        if (queryType) {
            sourceOptions.queryType = queryType;
        }
        if (queryServiceId) {
            sourceOptions.queryServiceId = queryServiceId;
        }
        if (queryParam) {
            sourceOptions.queryParam = queryParam;
        }
        return this.printService.outputBEData(sourceOptions, outputOptions, 'tab');
    };
    /**
     * 构造SourceOptions
     * @param options options
     */
    /**
     * 构造SourceOptions
     * @private
     * @param {?} options options
     * @return {?}
     */
    IntegrationPrintService.prototype.buildSourceOptions = /**
     * 构造SourceOptions
     * @private
     * @param {?} options options
     * @return {?}
     */
    function (options) {
        /** @type {?} */
        var so = {
            DataIds: options && options.dataIds || undefined,
            SourceId: options && options.sourceId || undefined,
            FirstDimensionVal: options && options.dim1 || undefined,
            SecondDimensionVal: options && options.dim2 || undefined,
            RetrieveParam: options && options.retrieveParam || undefined,
            FormatId: options && options.formatId || undefined,
            billCategoryId: options && options.billCategoryId || undefined,
            ServiceUnit: options && options.serviceUnit || undefined,
            currentPage: options && options.currentPage || undefined,
            pageRowCount: options && options.pageRowCount || undefined,
            queryType: options && options.queryType || undefined,
            queryServiceId: options && options.queryServiceId || undefined,
            bizTypeId: options && options.bizTypeId || undefined,
            queryParam: options && options.queryParam || undefined
        };
        return so;
    };
    /**
     * 构造OutputOptions
     * @param options options
     */
    /**
     * 构造OutputOptions
     * @private
     * @param {?=} options options
     * @return {?}
     */
    IntegrationPrintService.prototype.buildOutputOptions = /**
     * 构造OutputOptions
     * @private
     * @param {?=} options options
     * @return {?}
     */
    function (options) {
        /** @type {?} */
        var oo = {
            OutputType: options && options.outputType || OutputType.PRINT,
            FileType: options && options.fileType || FileType.Html5,
            Path: options && options.path || undefined,
            DeviceId: options && options.deviceId || undefined,
            printJob: options && options.printJob || undefined,
            printerName: options && options.printerName || undefined,
            printSetting: options && options.printSetting || undefined,
            printType: options && options.printType || PrintType.Form
        };
        return oo;
    };
    return IntegrationPrintService;
}());
/**
 * 打印服务
 * \@Scope FrameComponent
 */
export { IntegrationPrintService };
if (false) {
    /** @type {?} */
    IntegrationPrintService.prototype.printService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BxZHAvY29tbW9uLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvcHJpbnQtc2VydmljZS9wcmludC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQW1ELFVBQVUsRUFBRSxRQUFRLEVBQXVCLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7OztBQU01STs7Ozs7SUFFRTs7T0FFRztJQUNILGlDQUFZLGFBQWdDO1FBQzFDLElBQUksQ0FBQyxZQUFZLEdBQUcsYUFBYSxDQUFDO0lBQ3BDLENBQUM7SUFFRDs7OztPQUlHOzs7Ozs7O0lBQ0ksNkNBQVc7Ozs7OztJQUFsQixVQUFtQixRQUFnQixFQUFFLFNBQWlCO1FBQ3BELE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFDRDs7OztPQUlHOzs7Ozs7O0lBQ0ksNENBQVU7Ozs7OztJQUFqQixVQUFrQixRQUFnQixFQUFFLEdBQVc7O1lBQ3ZDLE9BQU8sR0FBa0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNOzs7O1FBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLEVBQUosQ0FBSSxFQUFDO1FBQ2xFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUNEOzs7Ozs7O09BT0c7Ozs7Ozs7Ozs7SUFDSSx5REFBdUI7Ozs7Ozs7OztJQUE5QixVQUErQixRQUFnQixFQUFFLEdBQVcsRUFBRSxJQUFhLEVBQUUsSUFBYSxFQUFFLGNBQXVCOztZQUMzRyxPQUFPLEdBQWtCLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTTs7OztRQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxFQUFKLENBQUksRUFBQztRQUNs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RSxPQUFPLElBQUksT0FBTyxDQUFDLFNBQVMsSUFBSSxTQUFTO1lBQ3BELGNBQWMsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLGNBQWMsSUFBSSxTQUFTO1lBQzlELFNBQVMsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFNBQVMsSUFBSSxTQUFTO1lBQ3BELFVBQVUsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFVBQVUsSUFBSSxTQUFTO1NBQ3ZEO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBQ0Q7OztPQUdHOzs7Ozs7O0lBQ0ssb0RBQWtCOzs7Ozs7SUFBMUIsVUFBMkIsT0FBaUM7O1lBQ3BELEVBQUUsR0FBa0I7WUFDeEIsVUFBVSxFQUFFLE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBVSxJQUFJLFVBQVUsQ0FBQyxLQUFLO1lBQzdELFFBQVEsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsS0FBSztZQUN2RCxJQUFJLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksU0FBUztZQUMxQyxRQUFRLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxRQUFRLElBQUksU0FBUztZQUNsRCxRQUFRLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxRQUFRLElBQUksU0FBUztZQUNsRCxXQUFXLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxXQUFXLElBQUksU0FBUztZQUN4RCxZQUFZLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxZQUFZLElBQUksU0FBUztZQUMxRCxTQUFTLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLElBQUk7U0FDMUQ7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDSCw4QkFBQztBQUFELENBQUMsQUE5SEQsSUE4SEM7Ozs7Ozs7O0lBN0hDLCtDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsb3VkcHJpbnRTZXJ2aWNlLCBPdXRwdXRPcHRpb25zLCBTb3VyY2VPcHRpb25zLCBPdXRwdXRUeXBlLCBGaWxlVHlwZSwgU291cmNlRmlsdGVyT3B0aW9ucywgUHJpbnRUeXBlIH0gZnJvbSAnQGdzcC1zdmMvY2xvdWRwcmludCc7XHJcblxyXG4vKipcclxuICog5omT5Y2w5pyN5YqhXHJcbiAqIEBTY29wZSBGcmFtZUNvbXBvbmVudFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEludGVncmF0aW9uUHJpbnRTZXJ2aWNlIHtcclxuICBwcmludFNlcnZpY2U6IENsb3VkcHJpbnRTZXJ2aWNlO1xyXG4gIC8qKlxyXG4gICAqIOaehOmAoOWHveaVsFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKF9wcmludFNlcnZpY2U6IENsb3VkcHJpbnRTZXJ2aWNlKSB7XHJcbiAgICB0aGlzLnByaW50U2VydmljZSA9IF9wcmludFNlcnZpY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiZPljbDljZXmja5cclxuICAgKiBAcGFyYW0gYmVNZXRhSWQgQkXlhYPmlbDmja7moIfor4ZcclxuICAgKiBAcGFyYW0gYml6QmlsbElkIOS4muWKoeWNleaNruagh+ivhlxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmludFNpbmdsZShiZU1ldGFJZDogc3RyaW5nLCBiaXpCaWxsSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMucHJpbnRBcnJheShiZU1ldGFJZCwgW2JpekJpbGxJZF0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmiZPljbDljZXmja7vvIjpgJrov4dpZOaIlmlkc++8iVxyXG4gICAqIEBwYXJhbSBiZU1ldGFJZCBiZeWFg+aVsOaNrklkXHJcbiAgICogQHBhcmFtIGlkcyDljZXmja5pZOaIlmlkc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmludEJ5SWRzKGJlTWV0YUlkOiBzdHJpbmcsIGlkczogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhSWRzOiBBcnJheTxzdHJpbmc+ID0gaWRzLnNwbGl0KCcsJykuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7XHJcbiAgICByZXR1cm4gdGhpcy5wcmludEFycmF5KGJlTWV0YUlkLCBkYXRhSWRzKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5omT5Y2w5Y2V5o2u77yI5bim57u05bqm77yJXHJcbiAgICogQHBhcmFtIGJlTWV0YUlkIGJl5YWD5pWw5o2uSWRcclxuICAgKiBAcGFyYW0gaWRzIOWNleaNrmlk5oiWaWRzXHJcbiAgICogQHBhcmFtIGRpbTEg57u05bqmMeWAvFxyXG4gICAqIEBwYXJhbSBkaW0yIOe7tOW6pjLlgLxcclxuICAgKiBAcGFyYW0gYmlsbENhdGVnb3J5SWQg5Y2V5o2u57G75Z6LSWRcclxuICAgKi9cclxuICBwdWJsaWMgcHJpbnRCeUlkc1dpdGhEaW1lbnNpb24oYmVNZXRhSWQ6IHN0cmluZywgaWRzOiBzdHJpbmcsIGRpbTE/OiBzdHJpbmcsIGRpbTI/OiBzdHJpbmcsIGJpbGxDYXRlZ29yeUlkPzogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhSWRzOiBBcnJheTxzdHJpbmc+ID0gaWRzLnNwbGl0KCcsJykuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7XHJcbiAgICByZXR1cm4gdGhpcy5wcmludEFycmF5KGJlTWV0YUlkLCBkYXRhSWRzLCBkaW0xLCBkaW0yLCBiaWxsQ2F0ZWdvcnlJZCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsOWNleaNru+8iOW4pue7tOW6pu+8iVxyXG4gICAqIEBwYXJhbSBiZU1ldGFJZCBiZeWFg+aVsOaNrklkXHJcbiAgICogQHBhcmFtIGlkcyDljZXmja5pZOaIlmlkc1xyXG4gICAqIEBwYXJhbSBkaW0xIOe7tOW6pjHlgLxcclxuICAgKiBAcGFyYW0gZGltMiDnu7TluqYy5YC8XHJcbiAgICogQHBhcmFtIGJpbGxDYXRlZ29yeUlkIOWNleaNruexu+Wei0lkXHJcbiAgICovXHJcbiAgIHB1YmxpYyBwcmludFdpdGhEaW1lbnNpb25DdXN0b21EYXRhU291cmNlKGJlTWV0YUlkOiBzdHJpbmcsIGlkczpzdHJpbmcsIGRpbTE6IHN0cmluZywgZGltMjogc3RyaW5nLCBxdWVyeVR5cGU6IHN0cmluZywgcXVlcnlTZXJ2aWNlSWQ6IHN0cmluZywgcXVlcnlQYXJhbTogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhSWRzOiBBcnJheTxzdHJpbmc+ID0gaWRzLnNwbGl0KCcsJykuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7XHJcbiAgICByZXR1cm4gdGhpcy5wcmludEFycmF5KGJlTWV0YUlkLCBkYXRhSWRzLCBkaW0xLCBkaW0yLCB1bmRlZmluZWQsIHF1ZXJ5VHlwZSwgcXVlcnlTZXJ2aWNlSWQsIHF1ZXJ5UGFyYW0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmiZPljbDlpJrkuKrljZXmja5cclxuICAgKiBAcGFyYW0gYmVNZXRhSWQgQkXlhYPmlbDmja7moIfor4ZcclxuICAgKiBAcGFyYW0gZGF0YUlkcyDkuJrliqHljZXmja7moIfor4bmlbDnu4RcclxuICAgKiBAcGFyYW0gZGltMSDnu7TluqYxXHJcbiAgICogQHBhcmFtIGRpbTIg57u05bqmMlxyXG4gICAqIEBwYXJhbSBiaWxsQ2F0ZWdvcnlJZCDkuJrliqHljZXmja7nsbvlnotJZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmludEFycmF5KGJlTWV0YUlkOiBzdHJpbmcsIGRhdGFJZHM6IHN0cmluZ1tdLCBkaW0xPzogYW55LCBkaW0yPzogYW55LCBiaWxsQ2F0ZWdvcnlJZD86IHN0cmluZywgcXVlcnlUeXBlPzogc3RyaW5nLCBxdWVyeVNlcnZpY2VJZD86IHN0cmluZywgcXVlcnlQYXJhbT86IGFueSkge1xyXG4gICAgY29uc3Qgc291cmNlT3B0aW9uczogYW55ID0gdGhpcy5idWlsZFNvdXJjZU9wdGlvbnMoe1xyXG4gICAgICBkYXRhSWRzOiBkYXRhSWRzLFxyXG4gICAgICBzb3VyY2VJZDogYmVNZXRhSWRcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG91dHB1dE9wdGlvbnM6IE91dHB1dE9wdGlvbnMgPSB0aGlzLmJ1aWxkT3V0cHV0T3B0aW9ucygpO1xyXG5cclxuICAgIGlmIChkaW0xKSB7XHJcbiAgICAgIHNvdXJjZU9wdGlvbnMuRmlyc3REaW1lbnNpb25WYWwgPSBkaW0xO1xyXG4gICAgfVxyXG4gICAgaWYgKGRpbTIpIHtcclxuICAgICAgc291cmNlT3B0aW9ucy5TZWNvbmREaW1lbnNpb25WYWwgPSBkaW0yO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBiaWxsQ2F0ZWdvcnlJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgc291cmNlT3B0aW9ucy5iaWxsQ2F0ZWdvcnlJZCA9IGJpbGxDYXRlZ29yeUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKHF1ZXJ5VHlwZSkge1xyXG4gICAgICBzb3VyY2VPcHRpb25zLnF1ZXJ5VHlwZSA9IHF1ZXJ5VHlwZTtcclxuICAgIH1cclxuICAgIGlmIChxdWVyeVNlcnZpY2VJZCkge1xyXG4gICAgICBzb3VyY2VPcHRpb25zLnF1ZXJ5U2VydmljZUlkID0gcXVlcnlTZXJ2aWNlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAocXVlcnlQYXJhbSkge1xyXG4gICAgICBzb3VyY2VPcHRpb25zLnF1ZXJ5UGFyYW0gPSBxdWVyeVBhcmFtO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMucHJpbnRTZXJ2aWNlLm91dHB1dEJFRGF0YShzb3VyY2VPcHRpb25zLCBvdXRwdXRPcHRpb25zLCAndGFiJyk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaehOmAoFNvdXJjZU9wdGlvbnNcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZFNvdXJjZU9wdGlvbnMob3B0aW9uczogeyBkYXRhSWRzOiBzdHJpbmdbXSwgc291cmNlSWQ6IHN0cmluZywgW3Byb3A6IHN0cmluZ106IGFueSB9KTogYW55IHtcclxuICAgIGNvbnN0IHNvOiBhbnkgPSB7XHJcbiAgICAgIERhdGFJZHM6IG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhSWRzIHx8IHVuZGVmaW5lZCxcclxuICAgICAgU291cmNlSWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5zb3VyY2VJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIEZpcnN0RGltZW5zaW9uVmFsOiBvcHRpb25zICYmIG9wdGlvbnMuZGltMSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIFNlY29uZERpbWVuc2lvblZhbDogb3B0aW9ucyAmJiBvcHRpb25zLmRpbTIgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBSZXRyaWV2ZVBhcmFtOiBvcHRpb25zICYmIG9wdGlvbnMucmV0cmlldmVQYXJhbSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIEZvcm1hdElkOiBvcHRpb25zICYmIG9wdGlvbnMuZm9ybWF0SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBiaWxsQ2F0ZWdvcnlJZDogb3B0aW9ucyAmJiBvcHRpb25zLmJpbGxDYXRlZ29yeUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgU2VydmljZVVuaXQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5zZXJ2aWNlVW5pdCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGN1cnJlbnRQYWdlOiBvcHRpb25zICYmIG9wdGlvbnMuY3VycmVudFBhZ2UgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBwYWdlUm93Q291bnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5wYWdlUm93Q291bnQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBxdWVyeVR5cGU6IG9wdGlvbnMgJiYgb3B0aW9ucy5xdWVyeVR5cGUgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBxdWVyeVNlcnZpY2VJZDogb3B0aW9ucyAmJiBvcHRpb25zLnF1ZXJ5U2VydmljZUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgYml6VHlwZUlkOiBvcHRpb25zICYmIG9wdGlvbnMuYml6VHlwZUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgcXVlcnlQYXJhbTogb3B0aW9ucyAmJiBvcHRpb25zLnF1ZXJ5UGFyYW0gfHwgdW5kZWZpbmVkXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHNvO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmnoTpgKBPdXRwdXRPcHRpb25zXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYnVpbGRPdXRwdXRPcHRpb25zKG9wdGlvbnM/OiB7IFtwcm9wOiBzdHJpbmddOiBhbnkgfSk6IE91dHB1dE9wdGlvbnMge1xyXG4gICAgY29uc3Qgb286IE91dHB1dE9wdGlvbnMgPSB7XHJcbiAgICAgIE91dHB1dFR5cGU6IG9wdGlvbnMgJiYgb3B0aW9ucy5vdXRwdXRUeXBlIHx8IE91dHB1dFR5cGUuUFJJTlQsXHJcbiAgICAgIEZpbGVUeXBlOiBvcHRpb25zICYmIG9wdGlvbnMuZmlsZVR5cGUgfHwgRmlsZVR5cGUuSHRtbDUsXHJcbiAgICAgIFBhdGg6IG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoIHx8IHVuZGVmaW5lZCxcclxuICAgICAgRGV2aWNlSWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZXZpY2VJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHByaW50Sm9iOiBvcHRpb25zICYmIG9wdGlvbnMucHJpbnRKb2IgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBwcmludGVyTmFtZTogb3B0aW9ucyAmJiBvcHRpb25zLnByaW50ZXJOYW1lIHx8IHVuZGVmaW5lZCxcclxuICAgICAgcHJpbnRTZXR0aW5nOiBvcHRpb25zICYmIG9wdGlvbnMucHJpbnRTZXR0aW5nIHx8IHVuZGVmaW5lZCxcclxuICAgICAgcHJpbnRUeXBlOiBvcHRpb25zICYmIG9wdGlvbnMucHJpbnRUeXBlIHx8IFByaW50VHlwZS5Gb3JtXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG9vO1xyXG4gIH1cclxufVxyXG4iXX0=