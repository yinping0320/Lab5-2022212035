{"version":3,"file":"qdp-common.js.map","sources":["ng://@qdp/common/lib/service/restful-service/restful.service.ts","ng://@qdp/common/lib/entitties/server.host.ts","ng://@qdp/common/lib/service/extend-service/schema-renderextend.service.ts","ng://@qdp/common/lib/service/rtfservices/rtfservices.ts","ng://@qdp/common/lib/service/schema-manager/schema-manager.service.ts","ng://@qdp/common/lib/service/lcp-service/lcp.service.ts","ng://@qdp/common/lib/service/print-service/print.service.ts","ng://@qdp/common/lib/service/paras-mapping/paras-mappingmanager.service.ts","ng://@qdp/common/lib/service/print-integration/print-integrationmanager.service.ts","ng://@qdp/common/lib/service/joint-search/joint-searchmanager.service.ts","ng://@qdp/common/lib/service/extend-service/data-renderextend.service.ts","ng://@qdp/common/lib/service/extend-service/joint-searchextend.service.ts","ng://@qdp/common/lib/service/filter/filtermanager.service.ts","ng://@qdp/common/lib/service/eventbus/eventbus.ts","ng://@qdp/common/lib/service/utils/json.util.ts","ng://@qdp/common/lib/service/utils/qdp.cache.util.ts","ng://@qdp/common/lib/common.module.ts","ng://@qdp/common/lib/dnd-list/services/dnd-draggable.service.ts","ng://@qdp/common/lib/dnd-list/dnd-constants.ts","ng://@qdp/common/lib/dnd-list/directives/dnd-draggable.directive.ts","ng://@qdp/common/lib/dnd-list/directives/dnd-list.directive.ts","ng://@qdp/common/lib/dnd-list/directives/dnd-nodrag.directive.ts","ng://@qdp/common/lib/dnd-list/directives/dnd-handle.directive.ts","ng://@qdp/common/lib/dnd-list/dnd-list.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport type RestfulMethod = 'GET' | 'PUT' | 'POST' | 'DELETE';\r\n\r\n@Injectable()\r\nexport class RestfulService {\r\n  /**\r\n   * æé å½æ°\r\n   * @param httpClient httpå®¢æ·ç«¯\r\n   */\r\n  constructor(private httpClient: HttpClient) { }\r\n  /**\r\n   * åéGETè¯·æ±\r\n   * @param uri è¯·æ±å°å\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  get(uri: string, params?: object, options?: any): Observable<any[]> {\r\n    return this.request(uri, 'GET', params, options);\r\n  }\r\n\r\n  /**\r\n   * åéPOSTè¯·æ±\r\n   * @param uri è¯·æ±å°å\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  put(uri: string, body: any, params?: object, options?: any): Observable<any> {\r\n    const optionsWithBody = this.addBody(options, body);\r\n    return this.request(uri, 'PUT', params, optionsWithBody);\r\n  }\r\n\r\n  /**\r\n   * åéPUTè¯·æ±\r\n   * @param uri è¯·æ±å°å\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  post(uri: string, body: any, params?: object, options?: any): Observable<any> {\r\n    const optionsWithBody = this.addBody(options, body);\r\n    return this.request(uri, 'POST', params, optionsWithBody);\r\n  }\r\n\r\n  /**\r\n   * åéDELETEè¯·æ±\r\n   * @param uri è¯·æ±å°å\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  delete(uri: string, params?: object, options?: any): Observable<any> {\r\n    return this.request(uri, 'DELETE', params, options);\r\n  }\r\n\r\n  /**\r\n   * åéè¯·æ±\r\n   * @param uri è¯·æ±å°å\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  private request(uri: string, method: any, params: object, options: any = {}): Observable<any> {\r\n    options = options || {};\r\n    if (params) {\r\n      const httpParams = this.buildParams(params);\r\n      options.params = httpParams;\r\n    }\r\n    const methodName = method as string;\r\n    const result = this.httpClient.request(methodName, uri, options);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * æé Httpè¯·æ±åæ°\r\n   * @param params è¯·æ±åæ°\r\n   */\r\n  private buildParams(params: object): HttpParams {\r\n    const parameters: any = {};\r\n    for (const key in params) {\r\n      if (params.hasOwnProperty(key) && params[key]) {\r\n        const value = params[key].toString();\r\n        parameters[key] = value;\r\n      }\r\n    }\r\n    return parameters;\r\n  }\r\n\r\n  private addBody(options: any, body: any) {\r\n    options = options || {};\r\n    const mergedOptions = Object.assign(options, { body });\r\n    return mergedOptions;\r\n  }\r\n}\r\n","export const Server_Host = 'serverHost';\r\nexport const Load_Data_Uri = 'loadDataUri';\r\nexport const Load_Data_Col = 'loadDataCol';\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport abstract class SchemaRenderExtendService  {\r\n  // æ ¼å¼æ¹æ¡æ¸²ææ©å±å\r\n  abstract schemaInfoRenderBefore($event: any);\r\n}\r\n","import { Subject } from \"rxjs\";\r\n\r\ndeclare var gspframeworkService: any;\r\n\r\nexport class RtfServices {\r\n  static uuid = \"\";\r\n  static isInSuite = false;\r\n\r\n  static createHeaderSessionId(sessionService?: any) {\r\n    const options = {\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n    try {\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session && gspframeworkService.rtf.session.getFormToken()) {\r\n        options.headers['X-CAF-Runtime-CommonVariable'] = gspframeworkService.rtf.session.getFormToken();\r\n      } else if (sessionService && sessionService.getCurrentSeesionId()) {\r\n        options.headers['X-CAF-Runtime-CommonVariable'] = sessionService.getCurrentSeesionId();\r\n      } else if (sessionService && sessionService.getUserSessionId()) {\r\n        options.headers['SessionId'] = sessionService.getUserSessionId();\r\n      } else if (localStorage.getItem('sessionId')) {\r\n        options.headers['SessionId'] = localStorage.getItem('sessionId');\r\n      }\r\n    } catch (e) { }\r\n    return options;\r\n  }\r\n\r\n  static getSessionId(sessionService?: any) {\r\n    let sessionId;\r\n    try {\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session && gspframeworkService.rtf.session.getFormToken()) {\r\n        sessionId = gspframeworkService.rtf.session.getFormToken();\r\n      } else if (sessionService && sessionService.getCurrentSeesionId()) {\r\n        sessionId = sessionService.getCurrentSeesionId();\r\n      } else if (sessionService && sessionService.getUserSessionId()) {\r\n        sessionId = sessionService.getUserSessionId();\r\n      } else if (localStorage.getItem('sessionId')) {\r\n        sessionId = localStorage.getItem('sessionId');\r\n      }\r\n    } catch (e) { }\r\n    return sessionId;\r\n  }\r\n\r\n  static getTabId(queryId?: any) {\r\n    try {\r\n\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session) {\r\n        const tab = gspframeworkService.rtf.session.getCommonVariable();\r\n        if (gspframeworkService.rtf.extendMethod && gspframeworkService.rtf.extendMethod.getExtObj && gspframeworkService.rtf.extendMethod.getExtObj() && gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID) {\r\n          const uuid = gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() ? gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() : '';\r\n          return tab.tabId + uuid;\r\n        } else {\r\n          return tab.tabId;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      return queryId;\r\n    }\r\n  }\r\n\r\n  static getInSuiteFrmUUID() {\r\n    try {\r\n      if (gspframeworkService.rtf.extendMethod && gspframeworkService.rtf.extendMethod.getExtObj && gspframeworkService.rtf.extendMethod.getExtObj() && gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID) {\r\n        const uuid = gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() ? gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() : '';\r\n        return uuid;\r\n      } else {\r\n        return \"\";\r\n      }\r\n    } catch (e) {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  static getCommonVariable() {\r\n    try {\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session) {\r\n        const tab = gspframeworkService.rtf.session.getCommonVariable();\r\n        return tab;\r\n      }\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static getMenuParameter(key: string) {\r\n    try {\r\n      const funcId = RtfServices.getCommonVariable().funcId;\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.func) {\r\n        let param: Map<any, any> = null;\r\n        const callback = function (res) {\r\n          // åå°å½æ°å¾å°res å³åæ°\r\n          param = res;\r\n        }\r\n        gspframeworkService.rtf.func.getMenuParams(funcId, callback);\r\n        if (param) {\r\n          return param.get(key);\r\n        }\r\n      }\r\n      return null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static getMenuSwitchControlParameter(tabId: any) {\r\n    return {\r\n      menuSwitchControl: {\r\n        key: tabId,\r\n        value: new Subject<any>(),\r\n        changeEnable: false\r\n      }\r\n    }\r\n  }\r\n\r\n  static getMenuSwitchControlEvent() {\r\n    try {\r\n      const tabId = RtfServices.getTabId();\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.frmEvent) {\r\n        let param = null;\r\n        const option = RtfServices.getCommonVariable();\r\n        const callback = function (res) {\r\n          // åå°å½æ°å¾å°res å³åæ°\r\n          param = res;\r\n        }\r\n        gspframeworkService.rtf.frmEvent.eventListener(tabId, callback, option);\r\n        if (param && param.hasOwnProperty('menuSwitchControl') && param['menuSwitchControl'].key === tabId) {\r\n          return param['menuSwitchControl'].value;\r\n        }\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·ååè½ID\r\n   * @param option `{appIdï¼'åºç¨ID', appEntrance: 'åºç¨å¥å£', appType: 'ç±»åï¼app, menu', funcId: 'åè½ID', tabId: 'æ ç­¾é¡µID'}`\r\n   */\r\n  static getFuncId(option: any) {\r\n    return RtfServices.getNewPageIdFunc(option);\r\n  }\r\n\r\n  static getFuncName() {\r\n    try {\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.tabs) {\r\n        const func = gspframeworkService.rtf.tabs.getAll().find(x => x.id == gspframeworkService.rtf.tabs.getActiveTab().funcId);\r\n        return func.FuncName;\r\n      } else {\r\n        return '';\r\n      }\r\n    } catch (e) {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  private static getFuncIdOlde(option: any) {\r\n    let funcId;\r\n    if (option.appType.toLowerCase() === 'app') {\r\n      funcId = RtfServices.newPageIdApp(option.appId, option.appEntrance, option.tabId);\r\n    } else {\r\n      funcId = RtfServices.newPageIdFunc(option.funcId, option.tabId);\r\n    }\r\n    return funcId;\r\n  }\r\n\r\n  private static getNewPageIdFunc(option: any) {\r\n    try {\r\n      if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.func) {\r\n        return gspframeworkService.rtf.func.newPageId(option);\r\n      } else {\r\n        return RtfServices.getFuncIdOlde(option);\r\n      }\r\n    } catch (e) {\r\n      return RtfServices.getFuncIdOlde(option);\r\n    }\r\n  }\r\n\r\n  private static newPageIdFunc(funcId, tabId) {\r\n    return tabId ? `${funcId}_${tabId}` : funcId;\r\n  }\r\n\r\n  private static mergeAppId(appId: any, appEntrance: any) {\r\n    return `${appId}_${appEntrance}`;\r\n  }\r\n\r\n  private static newPageIdApp(appId: any, appEntrance: any, tabId: any) {\r\n    return tabId ? `${RtfServices.mergeAppId(appId, appEntrance)}_${tabId}` : RtfServices.mergeAppId(appId, appEntrance);\r\n  }\r\n}\r\n","// import 'rxjs/add/operator/map';\r\nimport { Injectable, Inject, Optional } from '@angular/core';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { switchMap, map } from 'rxjs/operators';\r\nimport { filter } from 'lodash-es';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { Server_Host } from '../../entitties/server.host';\r\nimport { SchemaRenderExtendService } from '../extend-service/schema-renderextend.service';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\n\r\n@Injectable()\r\nexport class SchemaManagerService {\r\n  private uri = '/api/runtime/bcc/v1.0/qdpschemamanager/';\r\n  schemaInfoChange = new Subject<any>();\r\n  colList = new Subject<any>();\r\n  controlType = new Subject<string>();\r\n  schemaInfo: any = {};\r\n  schemaid: any = {} = new Subject<any>();\r\n  operationChange = new Subject<any>();\r\n  dynamicCols: any = {};\r\n  customSchema: any = {};\r\n  dynamicColIndex = 0;\r\n\r\n  preSchema = {\r\n    id: 'prefab',\r\n    schemaName: 'ç³»ç»é¢å¶',\r\n    isPrefab: 1,\r\n    isDefault: 0,\r\n    isProtected: '0',\r\n    schemaValue: {\r\n      titleOption: {\r\n        title: '',\r\n        subTitles: []\r\n      },\r\n      columnOption: {\r\n        maxLevel: 0,\r\n        colList: []\r\n      },\r\n      styleOption: {\r\n        Title: {\r\n          fontFamily: 9,\r\n          size: 14,\r\n          fontWeight: 0,\r\n          fontStyle: 0,\r\n          textDecoration: 0,\r\n          fontColor: 'black',\r\n          rowHeight: 35\r\n        },\r\n        SubTitle: {\r\n          fontFamily: 9,\r\n          size: 14,\r\n          fontWeight: 0,\r\n          fontStyle: 0,\r\n          textDecoration: 0,\r\n          fontColor: 'black',\r\n          rowHeight: 35\r\n        },\r\n        Header: {\r\n          fontFamily: 9,\r\n          size: 14,\r\n          fontWeight: 0,\r\n          fontStyle: 0,\r\n          textDecoration: 0,\r\n          fontColor: 'black',\r\n          rowHeight: 35\r\n        },\r\n        DataArea: {\r\n          fontFamily: 9,\r\n          size: 14,\r\n          fontWeight: 0,\r\n          fontStyle: 0,\r\n          textDecoration: 0,\r\n          fontColor: 'black',\r\n          rowHeight: 35\r\n        },\r\n        Footer: {\r\n          fontFamily: 9,\r\n          size: 14,\r\n          fontWeight: 0,\r\n          fontStyle: 0,\r\n          textDecoration: 0,\r\n          fontColor: 'black',\r\n          rowHeight: 35\r\n        }\r\n      },\r\n      otherOption: {\r\n        showFilterRow: true,\r\n        dataCahce: true,\r\n        level: '',\r\n        isDetails: '',\r\n        loadDataType: 1,\r\n        pageSize: 20,\r\n        treeInfoType: 2,\r\n        pathField: '',\r\n        pathStep: 0,\r\n        idField: '',\r\n        parentField: '',\r\n        firstLoad: true,\r\n        showZero: true,\r\n        expand: true,\r\n        showHeaderSort: true\r\n      }\r\n    }\r\n  };\r\n\r\n  isDefaultSchema: any = [];\r\n\r\n  schemaList: any;\r\n\r\n  operations = {};\r\n\r\n  constructor(private restService: RestfulService, private sessionService: SessionService, @Inject(Server_Host) private host: string, @Optional() private schemaRenderExtendService: SchemaRenderExtendService) {\r\n    const self = this;\r\n    this.getOperation().subscribe((value: any) => {\r\n      if (value) {\r\n        self.operations['QdpQueryExport'] = value['05202284-dfc4-149c-853e-cfd35b4a02bb'];\r\n        self.operations['QdpQueryPrint'] = value['653fe24b-d77f-d8b0-71c5-5e3d561e33ca'];\r\n        self.operations['QdpModifyPublicSchema'] = value['d6832d96-e6f3-114e-1d53-f9e636548eb9'];\r\n        self.operations['QdpPubQuery'] = value['cd6c2057-5ad6-90dd-54ac-771c192563e8'];\r\n        self.operationChange.next(self.operations);\r\n      }\r\n      // console.log(value);\r\n    });\r\n  }\r\n\r\n  getSpreadTemplate(id: string, queryId: string, dynamicCols: any, queryRelativeUrl: any, scheme?: any, frozenCols?: any, groupType?: any): Observable<any> {\r\n    if (dynamicCols && dynamicCols.length) {\r\n      this.dynamicCols[groupType ? groupType : queryId] = dynamicCols;\r\n      this.dynamicCols[id] = dynamicCols;\r\n    }\r\n    let schema;\r\n    if (this.schemaList && this.schemaList[id]) {\r\n      schema = this.schemaList[id];\r\n    }\r\n    let colInfo: any = [];\r\n    // æ°çæ¬åä¿¡æ¯éè¿frozenColsè·å\r\n    if (this.dynamicCols[groupType ? groupType : queryId]) {\r\n      colInfo = Object.assign(frozenCols, this.dynamicCols[groupType ? groupType : queryId]);\r\n    } else {\r\n      colInfo = frozenCols;\r\n    }\r\n    this.colList.next(colInfo);\r\n    return this.analysis((schema && schema.id ? schema.id : '1'), queryId, dynamicCols, queryRelativeUrl, scheme);\r\n  }\r\n  /**\r\n   * è·åæå®æ¹æ¡\r\n   * @param id æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  getSchema(id: string, queryId: string, queryRelativeUrl: any, groupType?: any, organizationId?: any, fromCache?: any): Observable<any> {\r\n    const self = this;\r\n    if (this.schemaList && this.schemaList[id] && fromCache && fromCache === true) {\r\n      return of(this.schemaList[id]);\r\n    } else {\r\n      const result$ = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);\r\n      return result$.pipe(\r\n        map(value => {\r\n          if (id === '1' || id === 'prefab') {\r\n            return Object.assign({}, self.preSchema, { id: '1' });\r\n          } else if (value && value['schemaList'] && value['schemaList'][queryId]) {\r\n            if (value['schemaList'][queryId][id]) {\r\n              return value['schemaList'][queryId][id];\r\n            } else {\r\n              let defaultSchemaId = '';\r\n              if (value.isDefaultSchema && value.isDefaultSchema.id && value['schemaList'][queryId][value.isDefaultSchema.id]) {\r\n                defaultSchemaId = value.isDefaultSchema.id;\r\n                return value['schemaList'][queryId][defaultSchemaId];\r\n              } else {\r\n                return null;\r\n              }\r\n            }\r\n          } else {\r\n            return null;\r\n          }\r\n        })\r\n      );\r\n    }\r\n  }\r\n  /**\r\n   * è·åé»è®¤æ¹æ¡\r\n   */\r\n  getDefaultSchema(queryId: string, queryRelativeUrl: any, groupType?: any, organizationId?: any): Observable<any> {\r\n    const result$ = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);\r\n    return result$.pipe(\r\n      map(() => {\r\n        if (this.isDefaultSchema[queryId] && this.isDefaultSchema[queryId].id) {\r\n          return this.isDefaultSchema[queryId];\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * è·åæ¹æ¡åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param userId ç¨æ·ID\r\n   * @param organizationId ç»ç»id\r\n   */\r\n  getSchemaList(queryId: string, userId: string, organizationId: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getschemalist';\r\n    return this.getSchemas(restUri, queryRelativeUrl, { queryId, userId, organizationId });\r\n  }\r\n\r\n  /**\r\n   * è·åæ¹æ¡åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param userId ç¨æ·ID\r\n   * @param organizationId ç»ç»id\r\n   */\r\n  getSchemaListByGroupType(queryId: string, userId: string, organizationId: string, groupType: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getschemalistbygroup';\r\n    return this.getSchemas(restUri, queryRelativeUrl, { queryId, userId, organizationId, groupType });\r\n  }\r\n\r\n  private getSchemas(uri: any, queryRelativeUrl: any, params: any) { // queryId: string, userId: string, organizationId: string, groupType: any, queryRelativeUrl: any, params: any\r\n    const self = this;\r\n    const result$ = self.restService.get(uri, params, self.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        self.schemaList = {};\r\n        if (data && data.length) {\r\n          self.isDefaultSchema[params.queryId] = null;\r\n          data.forEach((element: any) => {\r\n            element.schemaValue = JSON.parse(element.schemaValue);\r\n            if (element.isDefault === 1) {\r\n              self.isDefaultSchema[params.queryId] = element;\r\n            }\r\n            self.schemaList[element.id] = element;\r\n            self.operateDynamicColsForSchema.call(self, element, params.groupType ? params.groupType : params.queryId);\r\n          });\r\n          let schemaExtendId = '';\r\n          if (self.schemaRenderExtendService && self.schemaRenderExtendService.schemaInfoRenderBefore) {\r\n            const $event: any = { queryId: params.queryId };\r\n            $event['defaultSchemaId'] = '';\r\n            $event['schemalList'] = self.schemaList;\r\n            self.schemaRenderExtendService.schemaInfoRenderBefore($event);\r\n            if ($event['defaultSchemaId']) {\r\n              schemaExtendId = $event['defaultSchemaId'];\r\n            }\r\n          }\r\n          const filterCondition: any = { schemaType: 0 };\r\n          if (schemaExtendId) {\r\n            filterCondition.id = schemaExtendId;\r\n          }\r\n          if (schemaExtendId || !self.isDefaultSchema || !self.isDefaultSchema[params.queryId]) {\r\n            if (filter(data, filterCondition) && filter(data, filterCondition).length) {\r\n              self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];\r\n            } else {\r\n              filterCondition.schemaType = 1;\r\n              if (filter(data, filterCondition) && filter(data, filterCondition).length) {\r\n                self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];\r\n              } else {\r\n                filterCondition.schemaType = 2;\r\n                if (filter(data, filterCondition) && filter(data, filterCondition).length) {\r\n                  self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];\r\n                }\r\n              }\r\n            }\r\n          }\r\n          self.schemaInfo[params.queryId] = self.schemaList;\r\n          const preSchema = JSON.parse(JSON.stringify(self.preSchema));\r\n          self.operateCustomSchema(preSchema, params.groupType ? params.groupType : params.queryId);\r\n          self.operateDynamicColsForSchema.call(self, preSchema, params.groupType ? params.groupType : params.queryId, 1);\r\n          self.schemaInfoChange.next({ schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema[params.queryId], preSchema: preSchema });\r\n          return { schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema[params.queryId], preSchema: preSchema };\r\n        } else {\r\n          delete self.schemaInfo[params.queryId];\r\n          const preSchema = JSON.parse(JSON.stringify(self.preSchema));\r\n          self.isDefaultSchema[params.queryId] = null;\r\n          self.operateCustomSchema(preSchema, params.groupType ? params.groupType : params.queryId);\r\n          self.operateDynamicColsForSchema.call(self, preSchema, params.groupType ? params.groupType : params.queryId, 1);\r\n          self.schemaInfoChange.next({ schemaList: null, isDefaultSchema: null, preSchema: preSchema });\r\n          return { schemaList: null, isDefaultSchema: null, preSchema: preSchema };\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  public mergeCustomSchema(groupType: any, queryId?: any) {\r\n    const self = this;\r\n    let preSchema = JSON.parse(JSON.stringify(self.preSchema));\r\n    preSchema = self.operateCustomSchema(preSchema, groupType);\r\n    self.operateDynamicColsForSchema.call(self, preSchema, groupType, 1);\r\n    self.schemaInfoChange.next({ schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema && self.isDefaultSchema[queryId] ? self.isDefaultSchema[queryId] : null, preSchema: preSchema });\r\n    return preSchema;\r\n  }\r\n\r\n  private operateCustomSchema(preSchema: any, groupType: any) {\r\n    try {\r\n      if (this.customSchema && this.customSchema[groupType]) {\r\n        const schema = JSON.parse(this.customSchema[groupType]);\r\n        preSchema.schemaValue.titleOption = Object.assign(preSchema.schemaValue.titleOption, schema.titleOption);\r\n        preSchema.schemaValue.columnOption = Object.assign(preSchema.schemaValue.columnOption, schema.columnOption);\r\n        preSchema.schemaValue.styleOption = Object.assign(preSchema.schemaValue.styleOption, schema.styleOption);\r\n        preSchema.schemaValue.otherOption = Object.assign(preSchema.schemaValue.otherOption, schema.otherOption);\r\n        return preSchema;\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n  /**\r\n   * ä¿å­æ¹æ¡\r\n   * @param schema æ¹æ¡å®ä½\r\n   */\r\n  saveSchema(schema: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'saveschema';\r\n    const schemaObj = JSON.parse(schema.schema);\r\n    const result$ = this.restService.post(restUri, schema, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      switchMap(() => {\r\n        if (schema.groupType) {\r\n          return this.getSchemaListByGroupType(schemaObj.queryId, '', schemaObj.orgId, schema.groupType, queryRelativeUrl);\r\n        } else {\r\n          return this.getSchemaList(schemaObj.queryId, '', schemaObj.orgId, queryRelativeUrl);\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * å é¤æ¹æ¡\r\n   * @param id æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  deleteSchema(id: string, queryId: string, queryRelativeUrl: any, groupType?: any, organizationId?: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'deleteschema';\r\n    const result$ = this.restService.delete(restUri, { id }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.isDefaultSchema[queryId] = null;\r\n          const result$1 = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);\r\n          return result$1.pipe(\r\n            map(value => {\r\n              return true;\r\n            })\r\n          );\r\n        } else {\r\n          return of(false);\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * è·åspreadæ¨¡ç\r\n   * @param id æ¹æ¡ID\r\n   */\r\n  analysis(id: string, queryId: string, dynamicCols: any, queryRelativeUrl: any, scheme?: any): Observable<any> {\r\n    const restUri = this.host + this.uri;\r\n    let param = {};\r\n    if (id !== '1') {\r\n      if (dynamicCols && dynamicCols.length) {\r\n        param = { id, dynamicCols: JSON.stringify(dynamicCols), schema: !scheme ? '' : scheme };\r\n        return this.restService.post(restUri + 'getspreadtemplatewithdynamiccolumn', param, {}, this.createHeaderSessionId());\r\n      } else {\r\n        if (scheme) {\r\n          return this.restService.post(restUri + 'getspreadtemplatebyid', { id: id, schema: !scheme ? '' : scheme }, {}, this.createHeaderSessionId());\r\n        } else {\r\n          return this.restService.get(restUri + 'getspreadtemplate', { id }, this.createHeaderSessionId());\r\n        }\r\n      }\r\n    } else {\r\n      dynamicCols = dynamicCols && dynamicCols.length ? dynamicCols : [];\r\n      param = { dynamicCols: JSON.stringify(dynamicCols), schema: !scheme ? '' : scheme };\r\n      return this.restService.post(restUri + 'getinitspreadtemplate', param, {}, this.createHeaderSessionId());\r\n    }\r\n  }\r\n\r\n  getOperation(operators?: any) {\r\n    const restUri = this.host + this.uri;\r\n    let param = {};\r\n    if (!operators || !operators.length) {\r\n      param = {\r\n        operators: ['05202284-dfc4-149c-853e-cfd35b4a02bb', '653fe24b-d77f-d8b0-71c5-5e3d561e33ca', 'd6832d96-e6f3-114e-1d53-f9e636548eb9', 'cd6c2057-5ad6-90dd-54ac-771c192563e8']\r\n      };\r\n    } else {\r\n      param = {\r\n        operators: operators\r\n      };\r\n    }\r\n    return this.restService.post(restUri + 'isprincipalhasop', param, {}, this.createHeaderSessionId());\r\n  }\r\n\r\n  validateOperation(type: any) {\r\n    return this.operations['QdpModifyPublicSchema'] === true && (type === 0 || type === '0');\r\n  }\r\n\r\n  // è®¾ç½®åä¿¡æ¯\r\n  setColInfo(dynamicCols) {\r\n    let colInfo = [];\r\n    if (dynamicCols && dynamicCols.length) {\r\n      colInfo = dynamicCols;\r\n    }\r\n    this.colList.next(colInfo);\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n\r\n  /**\r\n   * äºå¼äººåé¢å¶çæ ¼å¼æ¹æ¡å¯ä»¥æ¾ç¤ºå¨æåä¿¡æ¯\r\n   */\r\n  operateDynamicColsForSchema(element: any, groupType: any, schemaId?: any) {\r\n    if (this.dynamicCols && this.dynamicCols[groupType]) {\r\n      if (element && element.id && (element.isProtected === 1 || element.isProtected === '1' || schemaId === 1)) {\r\n        const dynamicColumns = schemaId === 1 ? this.dynamicCols[groupType] : this.dynamicCols[element.id];\r\n        const dyCols = this.createColumns(dynamicColumns, element.schemaValue.columnOption.colList);\r\n        element.schemaValue.columnOption.colList = dyCols;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * åå¹¶å¨æå\r\n   */\r\n  private createColumns(colList: any, columns: any) {\r\n    const columnList = [];\r\n    if (columns && columns.length) {\r\n      columnList.push(...JSON.parse(JSON.stringify(columns)));\r\n      if (colList && colList.length > 0) {\r\n        let index = 0;\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let col = 0; col < colList.length; col++) {\r\n          let c = this.getColumn(columnList, colList[col]);\r\n          if (c) {\r\n            if (this.recursiveCompareColumn(c['childList'], colList[col]['childList']) === false) {\r\n              c = colList[col];\r\n            }\r\n          } else {\r\n            if (index >= columnList.length) {\r\n              columnList.push(colList[col]);\r\n            } else {\r\n              columnList.splice(index, 0, colList[col]);\r\n            }\r\n          }\r\n          if (c && index === 0) {\r\n            index = this.dynamicColIndex + 1;\r\n          } else {\r\n            index += 1;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (colList && colList.length > 0) {\r\n        columnList.push(...colList);\r\n      }\r\n    }\r\n    return columnList;\r\n  }\r\n  private getColumn(columns: any, col: any) {\r\n    let result = null;\r\n    this.dynamicColIndex = 0;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let item = 0; item < columns.length; item++) {\r\n      result = this.recursiveGetColumn(col, columns[item], null);\r\n      if (result != null) {\r\n        return result;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  private recursiveGetColumn(col: any, parentColumn: any, childList: any) {\r\n    if (parentColumn) {\r\n      if (parentColumn['bindField'] === col['bindField']) {\r\n        return parentColumn;\r\n      }\r\n      if (parentColumn['childList'] && parentColumn['childList'].length > 0) {\r\n        return this.recursiveGetColumn(col, null, parentColumn['childList']);\r\n      } else {\r\n        this.dynamicColIndex += 1;\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let item = 0; item < childList.length; item++) {\r\n        if (childList[item]['bindField'] === col['bindField']) {\r\n          return childList[item];\r\n        }\r\n        if (childList[item]['childList'] && childList[item]['childList'].length > 0) {\r\n          return this.recursiveGetColumn(col, null, childList[item]['childList']);\r\n        } else {\r\n          this.dynamicColIndex += 1;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  private recursiveCompareColumn(firstChildList: any, secondChildList: any) {\r\n    if (!firstChildList && !secondChildList) {\r\n      return true;\r\n    } else if (!firstChildList && secondChildList) {\r\n      return false;\r\n    } else if (firstChildList && !secondChildList) {\r\n      return false;\r\n    } else if (firstChildList && secondChildList) {\r\n      if (firstChildList.length !== secondChildList.length) {\r\n        return false;\r\n      } else {\r\n        if (firstChildList.length === 0 && secondChildList.length === 0) {\r\n          return true;\r\n        } else if (firstChildList.length === 0) {\r\n          return false;\r\n        } else {\r\n          for (let i = 0; i < firstChildList.length; i++) {\r\n            if (firstChildList[i].bindField !== secondChildList[i].bindField) {\r\n              return false;\r\n            }\r\n            return this.recursiveCompareColumn(firstChildList[i].childList, secondChildList[i].childList);\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import { Injectable, Inject, Optional } from '@angular/core';\r\nimport { Server_Host, Load_Data_Uri, Load_Data_Col } from '../../entitties/server.host';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\nimport { CloudprintService, FileType, OutputOptions, OutputType, PrintType } from '@gsp-svc/cloudprint';\r\n\r\n@Injectable()\r\nexport class LcpService {\r\n  pageInfoChange = new Subject<any>();\r\n  variablesChange = new Subject<any>();\r\n  inSuiteDropDownInfoChange = new Subject<any>();\r\n  inSuiteDropDownInfo: any;\r\n  cloudprintService: CloudprintService;\r\n  formErrorService: any;\r\n  loading: any;\r\n\r\n  constructor(\r\n    private restfulService: RestfulService,\r\n    private sessionService: SessionService,\r\n    @Inject(Server_Host) @Optional() private serverHost: string,\r\n    @Inject(Load_Data_Uri) @Optional() private loadDataUri: string,\r\n    @Inject(Load_Data_Col) @Optional() private loadDataCol: string\r\n  ) { }\r\n\r\n  exportData(params: any, queryRelativeUrl: any) {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += (!queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/' : queryRelativeUrl) + 'export';\r\n    }\r\n    const config = {\r\n      responseType: 'application/json' // è¡¨æè¿åæå¡å¨è¿åçæ°æ®ç±»å\r\n    };\r\n    Object.assign(config, this.createHeaderSessionId());\r\n    const fileName = params.excelExportName + '.xlsx';\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, config)\r\n      : this.restfulService.put(uri, params, {}, config);\r\n    result$.toPromise().then(data => {\r\n      data = !queryRelativeUrl ? data : JSON.parse(data).returnValue;\r\n      const byteString = atob(data); // base64 è§£ç \r\n      const arrayBuffer = new ArrayBuffer(byteString.length); // åå»ºç¼å²æ°ç»\r\n      const intArray = new Uint8Array(arrayBuffer); // åå»ºè§å¾\r\n\r\n      for (let i = 0; i < byteString.length; i++) {\r\n        intArray[i] = byteString.charCodeAt(i);\r\n      }\r\n      const blob = new Blob([intArray], { type: 'application/vnd.ms-excel' });\r\n      if ('download' in document.createElement('a')) { // éIEä¸è½½\r\n        const elink = document.createElement('a');\r\n        elink.download = fileName;\r\n        elink.style.display = 'none';\r\n        elink.href = URL.createObjectURL(blob);\r\n        document.body.appendChild(elink);\r\n        elink.click();\r\n        URL.revokeObjectURL(elink.href); // éæ¾URL å¯¹è±¡\r\n        document.body.removeChild(elink);\r\n      } else { // IE10+ä¸è½½\r\n        navigator.msSaveBlob(blob, fileName);\r\n      }\r\n      self.loading.close();\r\n    }, error => {\r\n      self.formErrorService.exception(error.Message, error);\r\n    });\r\n  }\r\n\r\n  aysnExportData(params: any, queryRelativeUrl: any) {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += (!queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/' : queryRelativeUrl) + 'export';\r\n    }\r\n    const config = {\r\n      responseType: 'application/json' // è¡¨æè¿åæå¡å¨è¿åçæ°æ®ç±»å\r\n    };\r\n    Object.assign(config, this.createHeaderSessionId());\r\n    params.async = 1;\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, config)\r\n      : this.restfulService.put(uri, params, {}, config);\r\n    result$.toPromise().then(data => {\r\n      data = !queryRelativeUrl ? data : JSON.parse(data).returnValue;\r\n      if (data) {\r\n      }\r\n    }, error => {\r\n      self.formErrorService.exception(error.Message, error);\r\n    })\r\n  }\r\n\r\n  pdfExportEvent(params: any, queryRelativeUrl: any) {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += (!queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/' : queryRelativeUrl) + 'print';\r\n    }\r\n\r\n    const config = {\r\n      responseType: 'application/json' // è¡¨æè¿åæå¡å¨è¿åçæ°æ®ç±»å\r\n    };\r\n    Object.assign(config, this.createHeaderSessionId());\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const fileName = params.Param && params.Param.excelExportName ? params.Param.excelExportName + '' : params.excelExportName + '';\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, config)\r\n      : this.restfulService.put(uri, params, {}, config);\r\n    result$.toPromise().then(data => {\r\n      data = !queryRelativeUrl ? data : JSON.parse(data).returnValue;\r\n      const byteString = atob(data); // base64 è§£ç \r\n      const arrayBuffer = new ArrayBuffer(byteString.length); // åå»ºç¼å²æ°ç»\r\n      const intArray = new Uint8Array(arrayBuffer); // åå»ºè§å¾\r\n\r\n      for (let i = 0; i < byteString.length; i++) {\r\n        intArray[i] = byteString.charCodeAt(i);\r\n      }\r\n      const blob = new Blob([intArray], { type: 'application/pdf' });\r\n      if ('download' in document.createElement('a')) { // éIEä¸è½½\r\n        const elink = document.createElement('a');\r\n        elink.download = fileName;\r\n        elink.style.display = 'none';\r\n        elink.href = URL.createObjectURL(blob);\r\n        document.body.appendChild(elink);\r\n        elink.click();\r\n        URL.revokeObjectURL(elink.href); // éæ¾URL å¯¹è±¡\r\n        document.body.removeChild(elink);\r\n      } else { // IE10+ä¸è½½\r\n        navigator.msSaveBlob(blob, fileName);\r\n      }\r\n    }, error => {\r\n      self.formErrorService.exception(error.Message, error);\r\n    });\r\n  }\r\n\r\n  printPreView(params: any, queryRelativeUrl: any) {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += (!queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/' : queryRelativeUrl) + 'print';\r\n    }\r\n\r\n    const config = {\r\n      responseType: 'application/json' // è¡¨æè¿åæå¡å¨è¿åçæ°æ®ç±»å\r\n    };\r\n    Object.assign(config, this.createHeaderSessionId());\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const fileName = params.Param && params.Param.excelExportName ? params.Param.excelExportName + '' : params.excelExportName + '';\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, config)\r\n      : this.restfulService.put(uri, params, {}, config);\r\n    result$.toPromise().then(data => {\r\n      data = !queryRelativeUrl ? data : JSON.parse(data).returnValue;\r\n      const options: OutputOptions = {\r\n        OutputType: OutputType.PRINT,\r\n        FileType: FileType.Pdf,\r\n        Path: '',\r\n        DeviceId: '',\r\n        printType: PrintType.Query,\r\n        printJob: false,\r\n        printerName: '',\r\n        printSetting: null\r\n      };\r\n      const byteString = atob(data); // base64 è§£ç \r\n      const arrayBuffer = new ArrayBuffer(byteString.length); // åå»ºç¼å²æ°ç»\r\n      const intArray = new Uint8Array(arrayBuffer); // åå»ºè§å¾\r\n\r\n      for (let i = 0; i < byteString.length; i++) {\r\n        intArray[i] = byteString.charCodeAt(i);\r\n      }\r\n      const blob = new Blob([intArray]);\r\n      self.cloudprintService.openRendedViewer('tab', blob, options);\r\n    }, error => {\r\n      self.formErrorService.exception(error.Message, error);\r\n    });\r\n  }\r\n\r\n  getData(params: any, queryRelativeUrl: any): Observable<any> {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += !queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/query' : (queryRelativeUrl + 'querydata');\r\n    }\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, this.createHeaderSessionId())\r\n      : this.restfulService.put(uri, params, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data) {\r\n          data = !queryRelativeUrl ? data : data.returnValue;\r\n          if (data && data.pageInfo) {\r\n            self.pageInfoChange.next(data.pageInfo);\r\n          }\r\n          if (data && data.variables) {\r\n            self.variablesChange.next(data.variables);\r\n          }\r\n          if (data && data.dropDownOption) {\r\n            self.inSuiteDropDownInfo = data.dropDownOption;\r\n            self.inSuiteDropDownInfoChange.next(data.dropDownOption);\r\n          }\r\n        }\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getCol(params: any, queryRelativeUrl: any): Observable<any> {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataCol) {\r\n      uri += this.loadDataCol;\r\n    } else {\r\n      uri += (!queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/' : queryRelativeUrl) + 'querycol';\r\n    }\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, this.createHeaderSessionId())\r\n      : this.restfulService.put(uri, params, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data) {\r\n          data = !queryRelativeUrl ? data : data.returnValue;\r\n        }\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getCrosstabTemplate(params: any, queryRelativeUrl: any) {\r\n    const self = this;\r\n    let uri = this.serverHost;\r\n    if (this.loadDataUri) {\r\n      uri += this.loadDataUri;\r\n    } else {\r\n      uri += !queryRelativeUrl ? '/api/runtime/bcc/v1.0/qdpsearch/getcrosstabtemplate' : (queryRelativeUrl + 'getcrosstabtemplate');\r\n    }\r\n    params = !queryRelativeUrl ? params : { 'Param': params };\r\n    const result$ = !queryRelativeUrl ? this.restfulService.post(uri, params, {}, this.createHeaderSessionId())\r\n      : this.restfulService.put(uri, params, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((result: any) => {\r\n        if (result) {\r\n          result = !queryRelativeUrl ? result : (result && result.returnValue) ? JSON.parse(result.returnValue) : undefined;\r\n        }\r\n        return result;\r\n      })\r\n    );\r\n  }\r\n\r\n  getSpreadLicense() {\r\n    const uri = '/api/runtime/bcc/v1.0/qdpschemamanager/getSpreadLicense';\r\n    const result$ = this.restfulService.get(uri, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        return data.spreadjs;\r\n      })\r\n    );\r\n  }\r\n\r\n  clearCache(params: any) {\r\n    const self = this;\r\n    const uri = this.serverHost + '/api/runtime/bcc/v1.0/qdpsearch/clearcache';\r\n    const result$ = this.restfulService.post(uri, params, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((result: any) => {\r\n        return result;\r\n      })\r\n    );\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n}\r\n","import { CloudprintService, OutputOptions, SourceOptions, OutputType, FileType, SourceFilterOptions, PrintType } from '@gsp-svc/cloudprint';\r\n\r\n/**\r\n * æå°æå¡\r\n * @Scope FrameComponent\r\n */\r\nexport class IntegrationPrintService {\r\n  printService: CloudprintService;\r\n  /**\r\n   * æé å½æ°\r\n   */\r\n  constructor(_printService: CloudprintService) {\r\n    this.printService = _printService;\r\n  }\r\n\r\n  /**\r\n   * æå°åæ®\r\n   * @param beMetaId BEåæ°æ®æ è¯\r\n   * @param bizBillId ä¸å¡åæ®æ è¯\r\n   */\r\n  public printSingle(beMetaId: string, bizBillId: string) {\r\n    return this.printArray(beMetaId, [bizBillId]);\r\n  }\r\n  /**\r\n   * æå°åæ®ï¼éè¿idæidsï¼\r\n   * @param beMetaId beåæ°æ®Id\r\n   * @param ids åæ®idæids\r\n   */\r\n  public printByIds(beMetaId: string, ids: string) {\r\n    const dataIds: Array<string> = ids.split(',').filter(item => item);\r\n    return this.printArray(beMetaId, dataIds);\r\n  }\r\n  /**\r\n   * æå°åæ®ï¼å¸¦ç»´åº¦ï¼\r\n   * @param beMetaId beåæ°æ®Id\r\n   * @param ids åæ®idæids\r\n   * @param dim1 ç»´åº¦1å¼\r\n   * @param dim2 ç»´åº¦2å¼\r\n   * @param billCategoryId åæ®ç±»åId\r\n   */\r\n  public printByIdsWithDimension(beMetaId: string, ids: string, dim1?: string, dim2?: string, billCategoryId?: string) {\r\n    const dataIds: Array<string> = ids.split(',').filter(item => item);\r\n    return this.printArray(beMetaId, dataIds, dim1, dim2, billCategoryId);\r\n  }\r\n  /**\r\n   * æå°åæ®ï¼å¸¦ç»´åº¦ï¼\r\n   * @param beMetaId beåæ°æ®Id\r\n   * @param ids åæ®idæids\r\n   * @param dim1 ç»´åº¦1å¼\r\n   * @param dim2 ç»´åº¦2å¼\r\n   * @param billCategoryId åæ®ç±»åId\r\n   */\r\n   public printWithDimensionCustomDataSource(beMetaId: string, ids:string, dim1: string, dim2: string, queryType: string, queryServiceId: string, queryParam: any) {\r\n    const dataIds: Array<string> = ids.split(',').filter(item => item);\r\n    return this.printArray(beMetaId, dataIds, dim1, dim2, undefined, queryType, queryServiceId, queryParam);\r\n  }\r\n  /**\r\n   * æå°å¤ä¸ªåæ®\r\n   * @param beMetaId BEåæ°æ®æ è¯\r\n   * @param dataIds ä¸å¡åæ®æ è¯æ°ç»\r\n   * @param dim1 ç»´åº¦1\r\n   * @param dim2 ç»´åº¦2\r\n   * @param billCategoryId ä¸å¡åæ®ç±»åId\r\n   */\r\n  public printArray(beMetaId: string, dataIds: string[], dim1?: any, dim2?: any, billCategoryId?: string, queryType?: string, queryServiceId?: string, queryParam?: any) {\r\n    const sourceOptions: any = this.buildSourceOptions({\r\n      dataIds: dataIds,\r\n      sourceId: beMetaId\r\n    });\r\n\r\n    const outputOptions: OutputOptions = this.buildOutputOptions();\r\n\r\n    if (dim1) {\r\n      sourceOptions.FirstDimensionVal = dim1;\r\n    }\r\n    if (dim2) {\r\n      sourceOptions.SecondDimensionVal = dim2;\r\n    }\r\n    if (typeof billCategoryId !== 'undefined') {\r\n      sourceOptions.billCategoryId = billCategoryId;\r\n    }\r\n    if (queryType) {\r\n      sourceOptions.queryType = queryType;\r\n    }\r\n    if (queryServiceId) {\r\n      sourceOptions.queryServiceId = queryServiceId;\r\n    }\r\n    if (queryParam) {\r\n      sourceOptions.queryParam = queryParam;\r\n    }\r\n    return this.printService.outputBEData(sourceOptions, outputOptions, 'tab');\r\n  }\r\n  /**\r\n   * æé SourceOptions\r\n   * @param options options\r\n   */\r\n  private buildSourceOptions(options: { dataIds: string[], sourceId: string, [prop: string]: any }): any {\r\n    const so: any = {\r\n      DataIds: options && options.dataIds || undefined,\r\n      SourceId: options && options.sourceId || undefined,\r\n      FirstDimensionVal: options && options.dim1 || undefined,\r\n      SecondDimensionVal: options && options.dim2 || undefined,\r\n      RetrieveParam: options && options.retrieveParam || undefined,\r\n      FormatId: options && options.formatId || undefined,\r\n      billCategoryId: options && options.billCategoryId || undefined,\r\n      ServiceUnit: options && options.serviceUnit || undefined,\r\n      currentPage: options && options.currentPage || undefined,\r\n      pageRowCount: options && options.pageRowCount || undefined,\r\n      queryType: options && options.queryType || undefined,\r\n      queryServiceId: options && options.queryServiceId || undefined,\r\n      bizTypeId: options && options.bizTypeId || undefined,\r\n      queryParam: options && options.queryParam || undefined\r\n    };\r\n    return so;\r\n  }\r\n  /**\r\n   * æé OutputOptions\r\n   * @param options options\r\n   */\r\n  private buildOutputOptions(options?: { [prop: string]: any }): OutputOptions {\r\n    const oo: OutputOptions = {\r\n      OutputType: options && options.outputType || OutputType.PRINT,\r\n      FileType: options && options.fileType || FileType.Html5,\r\n      Path: options && options.path || undefined,\r\n      DeviceId: options && options.deviceId || undefined,\r\n      printJob: options && options.printJob || undefined,\r\n      printerName: options && options.printerName || undefined,\r\n      printSetting: options && options.printSetting || undefined,\r\n      printType: options && options.printType || PrintType.Form\r\n    };\r\n    return oo;\r\n  }\r\n}\r\n","// import 'rxjs/add/operator/map';\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { Server_Host } from '../../entitties/server.host';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\n\r\n@Injectable()\r\nexport class ParasMappingManagerService {\r\n  private uri = '/api/runtime/bcc/v1.0/qdpparasmapping/';\r\n  parasmappingInfoChange = new Subject<any>();\r\n\r\n  parasmappingInfoList: any = {};\r\n\r\n  constructor(private restService: RestfulService, private sessionService: SessionService, @Inject(Server_Host) private host: string) {\r\n  }\r\n\r\n  /**\r\n   * è·åæ¥è¯¢åæ°æ å°ä¿¡æ¯\r\n   * @param id æ°æ®æºID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  getParasMapping(id: string, queryId: string, queryRelativeUrl: any, type: number = 0): Observable<any> {\r\n    const result$ = this.getParasMappingList(queryId, id, '', '', queryRelativeUrl, type);\r\n    return result$.pipe(\r\n      map(value => {\r\n        if (value && value[id]) {\r\n          return value[id];\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * è·ååæ°æ å°åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param userId ç¨æ·ID\r\n   * @param languageType è¯­è¨ç±»å\r\n   */\r\n  getParasMappingList(queryId: string, datasourceId: any, userId: string, languageType: string, queryRelativeUrl: any, queryType: number = 0): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getparasmappinglist';\r\n    const result$ = this.restService.get(restUri, { queryId, datasourceId, userId, languageType, queryType }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data && data.length) {\r\n          data.forEach((element: any) => {\r\n            element.parasmapping = JSON.parse(element.parasmapping);\r\n            this.parasmappingInfoList[element.datasourceid] = element;\r\n          });\r\n          this.parasmappingInfoChange.next({ parasInfoList: this.parasmappingInfoList });\r\n          return this.parasmappingInfoList;\r\n        } else {\r\n          this.parasmappingInfoChange.next({ parasInfoList: null });\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * ä¿å­åæ°æ å°\r\n   * @param parasmapping åæ°æ å°å®ä½\r\n   */\r\n  saveParasMapping(parasmapping: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'saveparasmapping';\r\n    const result$ = this.restService.post(restUri, parasmapping, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map(() => {\r\n        parasmapping.parasmapping = JSON.parse(parasmapping.parasmapping);\r\n        if (Object.keys(this.parasmappingInfoList).indexOf(parasmapping.datasourceid)) {\r\n          this.parasmappingInfoList[parasmapping.datasourceid] = parasmapping;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * å é¤æ¹æ¡\r\n   * @param id æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  deleteParasMapping(datasourceid: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'deleteparasmapping';\r\n    const result$ = this.restService.delete(restUri, { datasourceId: datasourceid, queryId }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.parasmappingInfoList[datasourceid] = null;\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * è·ååæ°æ®ä¿¡æ¯\r\n   * @param Id metadataid\r\n   */\r\n  getMetaDataInfoById(Id: string): Observable<any> {\r\n    const restUri = this.host + '/api/runtime/lcm/v1.0/rt-metadatas/' + Id;\r\n    const result$ = this.restService.get(restUri, {}, this.createHeaderSessionId());\r\n\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data) {\r\n          return data;\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n}\r\n","// import 'rxjs/add/operator/map';\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { Server_Host } from '../../entitties/server.host';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\n\r\n@Injectable()\r\nexport class PrintIntegrationManagerService {\r\n  private uri = '/api/runtime/bcc/v1.0/printintegration/';\r\n  printIntegrationInfoChange = new Subject<any>();\r\n\r\n  printIntegrationInfoList: any = {};\r\n\r\n  constructor(private restService: RestfulService, private sessionService: SessionService, @Inject(Server_Host) private host: string) {\r\n  }\r\n\r\n  /**\r\n   * è·åæ¥è¯¢åæ°æ å°ä¿¡æ¯\r\n   * @param schemaId æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  getPrintIntegration(schemaId: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    const result$ = this.getPrintIntegrationList(queryId, schemaId, '', '', queryRelativeUrl);\r\n    return result$.pipe(\r\n      map(value => {\r\n        if (value && value[schemaId + queryId]) {\r\n          return value[schemaId + queryId];\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * è·åæå°è®¾ç½®ä¿¡æ¯åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param schemaId æ¹æ¡ID\r\n   * @param userId ç¨æ·ID\r\n   * @param languageType è¯­è¨ç±»å\r\n   */\r\n  getPrintIntegrationList(queryId: string, schemaId: any, userId: string, languageType: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getprintintegrationlist';\r\n    const result$ = this.restService.get(restUri, { queryId, schemaId, userId, languageType }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data && data.length) {\r\n          data.forEach((element: any) => {\r\n            element.printintegration = JSON.parse(element.printintegration);\r\n            this.printIntegrationInfoList[schemaId + queryId] = element;\r\n          });\r\n          this.printIntegrationInfoChange.next({ printIntegrationInfoList: this.printIntegrationInfoList });\r\n          return this.printIntegrationInfoList;\r\n        } else {\r\n          this.printIntegrationInfoChange.next({ printIntegrationInfoList: null });\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * ä¿å­æå°è®¾ç½®ä¿¡æ¯\r\n   * @param element æå°è®¾ç½®\r\n   */\r\n  savePrintIntegration(element: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'saveprintintegration';\r\n    const integration = element;\r\n    const result$ = this.restService.post(restUri, integration, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map(() => {\r\n        element.printintegration = JSON.parse(element.printintegration);\r\n        if (Object.keys(this.printIntegrationInfoList).indexOf(element.schemaId + element.queryId)) {\r\n          this.printIntegrationInfoList[element.schemaId + element.queryId] = element;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * å é¤æå°è®¾ç½®ä¿¡æ¯\r\n   * @param schemaId æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  deletePrintIntegration(schemaId: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'deleteprintintegration';\r\n    const result$ = this.restService.delete(restUri, { schemaId, queryId }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.printIntegrationInfoList[schemaId + queryId] = null;\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n\r\n}\r\n","// import 'rxjs/add/operator/map';\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { Server_Host } from '../../entitties/server.host';\r\nimport { element } from '@angular/core/src/render3';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\n\r\n@Injectable()\r\nexport class JointSearchManagerService {\r\n  private uri = '/api/runtime/bcc/v1.0/joinsearch/';\r\n  private localUri = '/api/runtime/sys/v1.0/loginInfo';\r\n  private lcpUri = '/api/runtime/bcc/v1.0/qdpsearch/';\r\n  jointsearchInfoChange = new Subject<any>();\r\n\r\n  jointsearchInfoList: any = {};\r\n\r\n  constructor(private restService: RestfulService, private sessionService: SessionService, @Inject(Server_Host) private host: string) {\r\n    // this.uri = this.host + this.uri;\r\n  }\r\n\r\n  /**\r\n   * è·åæ¥è¯¢åæ°æ å°ä¿¡æ¯\r\n   * @param formid è¡¨åID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  getjointsearch(formId: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    const result$ = this.getjointsearchList(formId, queryId, '', '', queryRelativeUrl);\r\n    return result$.pipe(\r\n      map(value => {\r\n        if (value && value[formId + queryId]) {\r\n          return value[formId + queryId];\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  getVisibleJoint(visibleJointParam: any, queryRelativeUrl: any, searchList: any): Observable<any> {\r\n    const jointUri = this.host + (!queryRelativeUrl ? this.lcpUri : queryRelativeUrl) + 'visiblejoint';\r\n\r\n    const result$ = this.restService.put(jointUri, { 'Param': visibleJointParam}, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        const jointSearchList = [];\r\n        if (data) {\r\n          data = !queryRelativeUrl ? data : data.returnValue;\r\n          if (!queryRelativeUrl) {\r\n            for (const search of searchList) {\r\n              if (data[search.id] !== null && data[search.id] === true) {\r\n                jointSearchList.push(search);\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            for (const search of searchList) {\r\n              const item = data.find(d => d.id === search.id);\r\n              if (item && item.visible === true) {\r\n                jointSearchList.push(search);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        return jointSearchList;\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * è·ååæ°æ å°åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param userId ç¨æ·ID\r\n   * @param languageType è¯­è¨ç±»å\r\n   */\r\n  getjointsearchList(formId: any, queryId: string, userId: string, languageType: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getjoinsearch';\r\n    const result$ = this.restService.get(restUri, { formId, queryId, userId, languageType }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        // this.jointsearchInfoList = {};\r\n        if (data && data.length) {\r\n          data.forEach((element: any) => {\r\n            this.jointsearchInfoList[element.formId + element.queryId] = element;\r\n          });\r\n          this.jointsearchInfoChange.next({ jointsearchInfoList: this.jointsearchInfoList });\r\n          return this.jointsearchInfoList;\r\n        } else {\r\n          this.jointsearchInfoChange.next({ jointsearchInfoList: null });\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * ä¿å­åæ°æ å°\r\n   * @param jointsearch åæ°æ å°å®ä½\r\n   */\r\n  savejointsearch(jointsearch: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'addjointsearch';\r\n    const result$ = this.restService.post(restUri, jointsearch, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.jointsearchInfoList[jointsearch.FormId + jointsearch.queryId] = jointsearch;\r\n          return true;\r\n\r\n        } else {\r\n          return false;\r\n        }\r\n      }));\r\n  }\r\n  /**\r\n   * å é¤èæ¥\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  deletejointsearch(formId: any, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'deletejointsearch';\r\n    const result$ = this.restService.delete(restUri, { formId, queryId }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.jointsearchInfoList[formId + queryId] = null;\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  getLanguageList() {\r\n    const result$ = this.restService.get(this.localUri, { infoType: 'supportedLanguage' });\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport abstract class DataRenderExtendService  {\r\n  // æ¥è¯¢æ°æ®å\r\n  abstract beforeQueryData($event: any) ;\r\n  // æ°æ®å è½½å\r\n  abstract beforeLoadData($event: any) ;\r\n  // é¡µé¢æ¸²æå\r\n  abstract afterLoadData($event: any) ;\r\n  // // è¡éä¸­\r\n  // abstract rowSelected($event: any) ;\r\n  // // ååæ ¼éä¸­\r\n  // abstract cellSelected($event: any) ;\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport abstract class JointSearchExtendService  {\r\n  // // èæ¥èåæ¾ç¤ºå\r\n  // abstract beforeJointSearchMenuShow($event: any) ;\r\n  // èæ¥å\r\n  abstract beforeJointSearch($event: any) ;\r\n}\r\n","// import 'rxjs/add/operator/map';\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from '../restful-service/restful.service';\r\nimport { Server_Host } from '../../entitties/server.host';\r\nimport { RtfServices } from '../rtfservices/rtfservices';\r\n\r\n@Injectable()\r\nexport class FilterManagerService {\r\n  private uri = '/api/runtime/bcc/v1.0/qdpfilter/';\r\n  filterInfoChange = new Subject<any>();\r\n  isFilterQDP = new Subject(); // æ¯å¦å·æ°\r\n\r\n  filterInfoList: any = {};\r\n\r\n  constructor(private restService: RestfulService, private sessionService: SessionService, @Inject(Server_Host) private host: string) {\r\n    // this.uri = this.host + this.uri;\r\n  }\r\n\r\n  /**\r\n   * è·åæ¥è¯¢åæ°æ å°ä¿¡æ¯\r\n   * @param id æ°æ®æºID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  getFilter(id: string, queryId: string, queryRelativeUrl: any, queryType: number, groupType?: any): Observable<any> {\r\n    const result$ = this.getFilterList(queryId, id, groupType, '', queryRelativeUrl, queryType);\r\n    return result$.pipe(\r\n      map(value => {\r\n        if (value && value[queryId]) {\r\n          return value[queryId];\r\n        } else {\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * è·ååæ°æ å°åè¡¨\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   * @param userId ç¨æ·ID\r\n   * @param languageType è¯­è¨ç±»å\r\n   */\r\n  getFilterList(queryId: string, datasourceId: any, groupType: string, languageType: string, queryRelativeUrl: any, queryType: number = 0): Observable<any> {\r\n    const restUri = this.host + this.uri + 'getfilterlist';\r\n    const result$ = this.restService.get(restUri, { queryId, datasourceId, groupType, languageType, queryType }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data && data.length) {\r\n          data.forEach((element: any) => {\r\n            element.filter = JSON.parse(element.filter);\r\n            this.filterInfoList[element.queryid] = element;\r\n          });\r\n          this.filterInfoChange.next({ parasInfoList: this.filterInfoList });\r\n          return this.filterInfoList;\r\n        } else {\r\n          this.filterInfoChange.next({ parasInfoList: null });\r\n          return null;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * ä¿å­åæ°æ å°\r\n   * @param filter åæ°æ å°å®ä½\r\n   */\r\n  saveFilter(filter: any, queryRelativeUrl: any): Observable<any> {\r\n    const restUri = this.host + this.uri + 'savefilter';\r\n    const result$ = this.restService.post(restUri, filter, {}, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map(() => {\r\n        filter.filter = JSON.parse(filter.filter);\r\n        if (Object.keys(this.filterInfoList).indexOf(filter.queryid)) {\r\n          this.filterInfoList[filter.queryid] = filter;\r\n        }\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * å é¤æ¹æ¡\r\n   * @param id æ¹æ¡ID\r\n   * @param queryId æ¥è¯¢ç¼å·\r\n   */\r\n  deleteFilter(datasourceid: string, queryId: string, queryRelativeUrl: any, queryType: number): Observable<any> {\r\n    const restUri = this.host + this.uri + 'deletefilter';\r\n    const result$ = this.restService.delete(restUri, { datasourceId: datasourceid, queryId, queryType }, this.createHeaderSessionId());\r\n    return result$.pipe(\r\n      map((data: any) => {\r\n        if (data === true) {\r\n          this.filterInfoList[queryId] = null;\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  private createHeaderSessionId() {\r\n    return RtfServices.createHeaderSessionId(this.sessionService);\r\n  }\r\n}\r\n","type Func = (args: any) => any;\r\n\r\nexport class EventBus {\r\n  public static handlers: any = {};\r\n\r\n  static register(eventType: string, handler: Func, eventId?: string) {\r\n    if (!this.handlers[eventType]) {\r\n      this.handlers[eventType] = {};\r\n    }\r\n\r\n    let id = eventId;\r\n    if (!id) {\r\n      id = this.guid();\r\n    } \r\n    this.handlers[eventType][id] = handler;\r\n\r\n    const unsubscribe = () => {\r\n      delete this.handlers[eventType][id];\r\n      if (Object.keys(this.handlers[eventType]).length === 0) {\r\n        delete this.handlers[eventType];\r\n      }\r\n    };\r\n\r\n    return unsubscribe;\r\n  }\r\n\r\n  static dispatch(eventType: string, args: any) {\r\n    if (this.handlers[eventType]) {\r\n      Object.keys(this.handlers[eventType]).forEach(key => {\r\n        this.handlers[eventType][key](args);\r\n      });\r\n    }\r\n  }\r\n\r\n  static guid() {\r\n    function S4() {\r\n      // tslint:disable-next-line:no-bitwise\r\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    }\r\n    return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n  }\r\n}\r\n","export class JSONUtils {\r\n    static isObj(object) {\r\n        return object && typeof (object) == 'object' && Object.prototype.toString.call(object).toLowerCase() == \"[object object]\";\r\n    }\r\n\r\n    static isArray(object) {\r\n        return object && typeof (object) == 'object' && object.constructor == Array;\r\n    }\r\n\r\n    static getLength(object) {\r\n        var count = 0;\r\n        for (var i in object) count++;\r\n        return count;\r\n    }\r\n    static Compare(objA, objB) {\r\n        if (!JSONUtils.isObj(objA) || !JSONUtils.isObj(objB)) return false; //å¤æ­ç±»åæ¯å¦æ­£ç¡®\r\n        if (JSONUtils.getLength(objA) != JSONUtils.getLength(objB)) return false; //å¤æ­é¿åº¦æ¯å¦ä¸è´\r\n        return JSONUtils.CompareObj(objA, objB, true); //é»è®¤ä¸ºtrue\r\n    }\r\n\r\n    private static CompareObj(objA, objB, flag) {\r\n        for (var key in objA) {\r\n            if (!flag) //è·³åºæ´ä¸ªå¾ªç¯\r\n                break;\r\n            if (!objB.hasOwnProperty(key)) {\r\n                flag = false;\r\n                break;\r\n            }\r\n            if (!JSONUtils.isArray(objA[key])) { //å­çº§ä¸æ¯æ°ç»æ¶,æ¯è¾å±æ§å¼\r\n                if (objB[key] != objA[key]) {\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            } else {\r\n                if (!JSONUtils.isArray(objB[key])) {\r\n                    flag = false;\r\n                    break;\r\n                }\r\n                var oA = objA[key],\r\n                    oB = objB[key];\r\n                if (oA.length != oB.length) {\r\n                    flag = false;\r\n                    break;\r\n                }\r\n                for (var k in oA) {\r\n                    if (!flag) //è¿éè·³åºå¾ªç¯æ¯ä¸ºäºä¸è®©éå½ç»§ç»­\r\n                        break;\r\n                    flag = JSONUtils.CompareObj(oA[k], oB[k], flag);\r\n                }\r\n            }\r\n        }\r\n        return flag;\r\n    }\r\n}","export class QDPCacheUtil {\r\n    private static CacheMap = new Map();\r\n\r\n    public static setCache(key: String, value: any) {\r\n        QDPCacheUtil.CacheMap.set(key, value);\r\n    }\r\n\r\n    public static getCache(key: String) {\r\n        return QDPCacheUtil.CacheMap.get(key);\r\n    }\r\n}","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SessionService } from '@ecp-caf/caf-common';\r\nimport { RestfulService } from './service/restful-service/restful.service';\r\nimport { SchemaManagerService } from './service/schema-manager/schema-manager.service';\r\nimport { LcpService } from './service/lcp-service/lcp.service';\r\nimport { ParasMappingManagerService } from './service/paras-mapping/paras-mappingmanager.service';\r\nimport { JointSearchManagerService } from './service/joint-search/joint-searchmanager.service';\r\nimport { PrintIntegrationManagerService } from './service/print-integration/print-integrationmanager.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n  ],\r\n  declarations: [\r\n  ],\r\n  exports: [\r\n  ]\r\n})\r\nexport class QdpCommonModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: QdpCommonModule,\r\n      providers: [\r\n        SessionService,\r\n        SchemaManagerService,\r\n        RestfulService,\r\n        LcpService,\r\n        ParasMappingManagerService,\r\n        JointSearchManagerService,\r\n        PrintIntegrationManagerService\r\n      ]\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class DndDraggableService {\r\n\r\n  private _isDragging = false;\r\n  private _itemType = '';\r\n  private _dropCallback: Function;\r\n  private _dropEffect: string;\r\n  private _effectAllowed: string;\r\n  private _removeOnDrop = false;\r\n\r\n  public dropEndSource = new Subject<any>();\r\n\r\n  constructor() {}\r\n\r\n  setDraggingState(state: boolean) {\r\n    this._isDragging = state;\r\n  }\r\n\r\n  getDraggingState(): boolean {\r\n    return this._isDragging;\r\n  }\r\n\r\n  setItemType(value: string): void {\r\n    this._itemType = value.toLowerCase();\r\n  }\r\n\r\n  getItemType(): string {\r\n    return this._itemType;\r\n  }\r\n\r\n  setDropCallback(value: Function): void {\r\n    this._dropCallback = value;\r\n  }\r\n\r\n  getDropCallback(): Function {\r\n    return this._dropCallback;\r\n  }\r\n\r\n  setDropEffect(dropEffect: string): void {\r\n    this._dropEffect = dropEffect;\r\n  }\r\n\r\n  getDropEffect(): string {\r\n    return this._dropEffect;\r\n  }\r\n\r\n  setEffectAllowed(effectAllowed: string): void {\r\n    this._effectAllowed = effectAllowed;\r\n  }\r\n\r\n  getEffectAllowed(): string {\r\n    return this._effectAllowed;\r\n  }\r\n\r\n  setRemoveOnDrop(value: boolean) {\r\n    this._removeOnDrop = value;\r\n  }\r\n\r\n  getRemoveOnDrop() {\r\n    return this._removeOnDrop;\r\n  }\r\n\r\n}\r\n","export const MIME_TYPE = 'application/x-dnd';\r\nexport const EDGE_MIME_TYPE = 'application/json';\r\nexport const MSIE_MIME_TYPE = 'Text';\r\nexport const ALL_EFFECTS = ['move', 'copy', 'link'];\r\n","import {\r\n  Directive, HostBinding, OnChanges, SimpleChanges, Input, OnInit,\r\n  HostListener, ElementRef, Renderer2, Output, EventEmitter\r\n} from '@angular/core';\r\nimport { DndDraggableService } from '../services/dnd-draggable.service';\r\nimport { MIME_TYPE, EDGE_MIME_TYPE, MSIE_MIME_TYPE, ALL_EFFECTS } from '../dnd-constants';\r\nimport { DndDragendEvent } from '../models/events';\r\n\r\n@Directive({\r\n  selector: '[dndDraggable]',\r\n})\r\nexport class DndDraggableDirective implements OnInit {\r\n\r\n  @Input() dndDraggable: any;\r\n  @Input() dndDisable: boolean;\r\n  @Input() dndType = '';\r\n  @Input() dndCallback: Function;\r\n  @Input() dndEffectAllowed: string;\r\n\r\n  @Output() dndDragstart = new EventEmitter<DragEvent>();\r\n  @Output() dndDragend = new EventEmitter<DndDragendEvent>();\r\n  @Output() dndSelected = new EventEmitter<Event>();\r\n\r\n  @Output() dndMoved = new EventEmitter<DragEvent>();\r\n  @Output() dndCopied = new EventEmitter<DragEvent>();\r\n  @Output() dndLinked = new EventEmitter<DragEvent>();\r\n  @Output() dndCanceled = new EventEmitter<DragEvent>();\r\n\r\n  @HostBinding('draggable')\r\n  get draggable() {\r\n    return !this.dndDisable;\r\n  }\r\n\r\n  private _nativeElement: Element;\r\n\r\n  constructor(private _dndService: DndDraggableService, private _renderer: Renderer2, _hostElement: ElementRef) {\r\n    if (_hostElement) {\r\n      this._nativeElement = _hostElement.nativeElement;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragStart(event) {\r\n    event = event.originalEvent || event;\r\n    if (!this.draggable) {\r\n      return true;\r\n    }\r\n    this._dndService.setDraggingState(true);\r\n    this._dndService.setItemType(this.dndType);\r\n    const mimeType = MIME_TYPE + (this._dndService.getItemType() ? ('-' + this._dndService.getItemType()) : '');\r\n    // Set the allowed drop effects. See below for special IE handling.\r\n    this._dndService.setDropEffect('none');\r\n    this._dndService.setEffectAllowed(this.dndEffectAllowed || ALL_EFFECTS[0]);\r\n\r\n    event.dataTransfer.effectAllowed = this._dndService.getEffectAllowed(); // TODO: set allowed effects\r\n    try {\r\n      event.dataTransfer.setData(mimeType, JSON.stringify(this.dndDraggable));\r\n    } catch (e) {\r\n      const data = {\r\n        item: this.dndDraggable,\r\n        type: this._dndService.getItemType()\r\n      };\r\n\r\n      try {\r\n        // Setting a custom MIME type did not work, we are probably in IE or Edge.\r\n        event.dataTransfer.setData(EDGE_MIME_TYPE, JSON.stringify(data));\r\n\r\n      } catch (e) {\r\n        // We are in Internet Explorer and can only use the Text MIME type. Also note that IE\r\n        // does not allow changing the cursor in the dragover event, therefore we have to choose\r\n        // the one we want to display now by setting effectAllowed.\r\n        event.dataTransfer.effectAllowed = 'move';\r\n        event.dataTransfer.setData(MSIE_MIME_TYPE, JSON.stringify(data));\r\n      }\r\n    }\r\n    this._renderer.addClass(this._nativeElement, 'dndDragging');\r\n    setTimeout(() => this._renderer.addClass(this._nativeElement, 'dndDraggingSource'), 0);\r\n    // Try setting a proper drag image if triggered on a dnd-handle (won't work in IE).\r\n    if (event._dndHandle && event.dataTransfer.setDragImage) {\r\n      event.dataTransfer.setDragImage(this._nativeElement, 0, 0);\r\n    }\r\n    // Emit dragstart event and prepare extra callback for dropzone.\r\n    this.dndDragstart.emit(event);\r\n\r\n    if (this.dndCallback) {\r\n      const callback = this.dndCallback;\r\n      this._dndService.setDropCallback(function (params) {\r\n        return callback(params);\r\n      });\r\n    }\r\n    event.stopPropagation();\r\n  }\r\n\r\n  @HostListener('dragend', ['$event'])\r\n  onDragEnd(event: DragEvent) {\r\n    const dropEffect = this._dndService.getDropEffect();\r\n    const cb = { copy: 'dndCopied', link: 'dndLinked', move: 'dndMoved', none: 'dndCanceled' };\r\n    this[cb[dropEffect]].emit(event);\r\n    this.dndDragend.emit({\r\n      event: event,\r\n      dropEffect: dropEffect\r\n    });\r\n\r\n    // Clean up\r\n    this._dndService.setDraggingState(false);\r\n    this._dndService.setDropCallback(undefined);\r\n    this._dndService.setRemoveOnDrop(false);\r\n    this._renderer.removeClass(this._nativeElement, 'dndDragging');\r\n    this._renderer.removeClass(this._nativeElement, 'dndDraggingSource');\r\n    event.stopPropagation();\r\n\r\n    // In IE9 it is possible that the timeout from dragstart triggers after the dragend handler.\r\n    setTimeout(() => this._renderer.removeClass(this._nativeElement, 'dndDraggingSource'), 0);\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  click(event: MouseEvent) {\r\n    this.dndSelected.emit(event);\r\n    // Prevent triggering dndSelected in parent elements.\r\n    event.stopPropagation();\r\n  }\r\n\r\n}\r\n","import {\r\n   Directive,\r\n   HostBinding,\r\n   OnChanges,\r\n   Input,\r\n   HostListener,\r\n   ElementRef,\r\n   Renderer2,\r\n   OnInit,\r\n   Output,\r\n   EventEmitter\r\n} from '@angular/core';\r\nimport { DndDraggableService } from '../services/dnd-draggable.service';\r\nimport { MSIE_MIME_TYPE, EDGE_MIME_TYPE, MIME_TYPE, ALL_EFFECTS } from '../dnd-constants';\r\nimport { DndListEvent } from '../models/events';\r\n\r\n@Directive({\r\n   selector: '[dndList]',\r\n})\r\nexport class DndListDirective implements OnInit {\r\n   @Input() dndDisable = false;\r\n   @Input() dndAllowedTypes: String[];\r\n   @Input() dndExternalSources: any;\r\n   @Input() dndHorizontalList: any;\r\n   @Input() dndEffectAllowed: string;\r\n   @Input() pureComponent: boolean;\r\n   @Input() dndList: any;\r\n\r\n   @Output() dndListChange = new EventEmitter<any>();\r\n\r\n   @Output() dndDragover = new EventEmitter<DndListEvent>();\r\n   @Output() dndDrop = new EventEmitter<DndListEvent>();\r\n   @Output() dndInserted = new EventEmitter<DndListEvent>();\r\n\r\n   private _nativeElement: Element;\r\n   private _placeholderNode: Element;\r\n\r\n   private _listSettings: any = {};\r\n   private _listNode: any;\r\n   private _dragOverStopped = false;\r\n\r\n   private _counter = 0;\r\n\r\n   constructor(private _el: ElementRef, private _renderer: Renderer2, private _dndService: DndDraggableService) {\r\n      this._nativeElement = this._el.nativeElement;\r\n   }\r\n\r\n   ngOnInit(): void {\r\n      const placeholder = this._getPlaceholderElement();\r\n      placeholder.remove();\r\n      this._placeholderNode = placeholder;\r\n      this._listNode = this._nativeElement;\r\n   }\r\n\r\n   @HostListener('dragenter', ['$event'])\r\n   onDragEnter(event) {\r\n      this._counter++;\r\n      this._dragOverStopped = false;\r\n      event = event.originalEvent || event;\r\n      this._listSettings = {\r\n         allowedTypes: Array.isArray(this.dndAllowedTypes) && this.dndAllowedTypes.join('|').toLowerCase().split('|'),\r\n         disabled: this.dndDisable,\r\n         externalSources: this.dndExternalSources,\r\n         horizontal: this.dndHorizontalList\r\n      };\r\n      const mimeType = this._getMimeType(event.dataTransfer.types);\r\n      if (!mimeType || !this._isDropAllowed(this._getItemType(mimeType))) {\r\n         return true;\r\n      }\r\n      event.preventDefault();\r\n   }\r\n\r\n   @HostListener('dragover', ['$event'])\r\n   onDragOver(event) {\r\n      event = event.originalEvent || event;\r\n      // Check whether the drop is allowed and determine mime type.\r\n      const mimeType = this._getMimeType(event.dataTransfer.types);\r\n      const itemType = this._getItemType(mimeType);\r\n      if (!mimeType || !this._isDropAllowed(itemType)) {\r\n         return true;\r\n      }\r\n      // Make sure the placeholder is shown, which is especially important if the list is empty.\r\n      if (this._placeholderNode.parentNode !== this._listNode) {\r\n         this._renderer.appendChild(this._nativeElement, this._placeholderNode);\r\n      }\r\n\r\n      if (event.target !== this._listNode) {\r\n         // Try to find the node direct directly below the list node.\r\n         let listItemNode = event.target;\r\n         while (listItemNode.parentNode !== this._listNode && listItemNode.parentNode) {\r\n            listItemNode = listItemNode.parentNode;\r\n         }\r\n\r\n         if (listItemNode.parentNode === this._listNode && listItemNode !== this._placeholderNode) {\r\n            // If the mouse pointer is in the upper half of the list item element,\r\n            // we position the placeholder before the list item, otherwise after it.\r\n            const rect = listItemNode.getBoundingClientRect();\r\n            let isFirstHalf;\r\n            if (this._listSettings.horizontal) {\r\n               isFirstHalf = event.clientX < rect.left + rect.width / 2;\r\n            } else {\r\n               isFirstHalf = event.clientY < rect.top + rect.height / 2;\r\n            }\r\n            this._listNode.insertBefore(this._placeholderNode,\r\n               isFirstHalf ? listItemNode : listItemNode.nextSibling);\r\n         }\r\n      }\r\n\r\n      // In IE we set a fake effectAllowed in dragstart to get the correct cursor, we therefore\r\n      // ignore the effectAllowed passed in dataTransfer. We must also not access dataTransfer for\r\n      // drops from external sources, as that throws an exception.\r\n      const ignoreDataTransfer = mimeType === MSIE_MIME_TYPE;\r\n      const dropEffect = this._getDropEffect(event, ignoreDataTransfer);\r\n\r\n      if (dropEffect === 'none') {\r\n         return this._stopDragover();\r\n      }\r\n      // At this point we invoke the callback, which still can disallow the drop.\r\n      // We can't do this earlier because we want to pass the index of the placeholder.\r\n\r\n      this.dndDragover.emit(this._getEventResponse(event, dropEffect, itemType));\r\n      if (this._dragOverStopped) {\r\n         return this._stopDragover();\r\n      }\r\n\r\n      // Set dropEffect to modify the cursor shown by the browser, unless we're in IE, where this\r\n      // is not supported. This must be done after preventDefault in Firefox.\r\n      event.preventDefault();\r\n      if (!ignoreDataTransfer) {\r\n         event.dataTransfer.dropEffect = dropEffect;\r\n      }\r\n\r\n      this._renderer.addClass(this._nativeElement, 'dndDragover');\r\n      event.stopPropagation();\r\n      return false;\r\n   }\r\n\r\n   @HostListener('drop', ['$event'])\r\n   onDrop(event) {\r\n      this._counter = 0;\r\n      event = event.originalEvent || event;\r\n      // Check whether the drop is allowed and determine mime type.\r\n      const mimeType = this._getMimeType(event.dataTransfer.types);\r\n      let itemType = this._getItemType(mimeType);\r\n      if (!mimeType || !this._isDropAllowed(itemType)) {\r\n         return true;\r\n      }\r\n      // The default behavior in Firefox is to interpret the dropped element as URL and\r\n      // forward to it. We want to prevent that even if our drop is aborted.\r\n      event.preventDefault();\r\n\r\n      // Unserialize the data that was serialized in dragstart.\r\n      let data;\r\n      try {\r\n         data = JSON.parse(event.dataTransfer.getData(mimeType));\r\n      } catch (e) {\r\n         return this._stopDragover();\r\n      }\r\n\r\n      // Drops with invalid types from external sources might not have been filtered out yet.\r\n      if (mimeType === MSIE_MIME_TYPE || mimeType === EDGE_MIME_TYPE) {\r\n         itemType = data.type || undefined;\r\n         data = data.item;\r\n         if (!this._isDropAllowed(itemType)) {\r\n            return this._stopDragover();\r\n         }\r\n      }\r\n\r\n      // Special handling for internal IE drops, see dragover handler.\r\n      const ignoreDataTransfer = mimeType === MSIE_MIME_TYPE;\r\n      const dropEffect = this._getDropEffect(event, ignoreDataTransfer);\r\n      if (dropEffect === 'none') {\r\n         return this._stopDragover();\r\n      }\r\n      // Invoke the callback, which can transform the transferredObject and even abort the drop.\r\n      const index = this._getPlaceholderIndex();\r\n      this.dndDrop.emit(this._getEventResponse(event, dropEffect, itemType, index, data));\r\n      if (this._dragOverStopped) {\r\n         return this._stopDragover();\r\n      }\r\n\r\n      // The drop is definitely going to happen now, store the dropEffect.\r\n      this._dndService.setDropEffect(dropEffect);\r\n      if (!ignoreDataTransfer) {\r\n         event.dataTransfer.dropEffect = dropEffect;\r\n      }\r\n\r\n      if (this.dndList) {\r\n         // Creates a new array adding the object into the array position without mutate the original.\r\n         const newList = [...this.dndList.slice(0, index), data, ...this.dndList.slice(index)];\r\n         this.dndListChange.emit(newList);\r\n      }\r\n\r\n      this._dndService.setRemoveOnDrop(true);\r\n      // this._dndService.dropEndSource()\r\n\r\n      this.dndInserted.emit(this._getEventResponse(event, dropEffect, itemType, index, data));\r\n\r\n      // Clean up\r\n      this._stopDragover();\r\n      event.stopPropagation();\r\n      return false;\r\n   }\r\n\r\n   /**\r\n  * We have to remove the placeholder when the element is no longer dragged over our list. The\r\n  * problem is that the dragleave event is not only fired when the element leaves our list,\r\n  * but also when it leaves a child element. Therefore, we determine whether the mouse cursor\r\n  * is still pointing to an element inside the list or not.\r\n  */\r\n   @HostListener('dragleave', ['$event'])\r\n   onDragLeave(event) {\r\n      this._counter--;\r\n      event = event.originalEvent || event;\r\n      if (this._counter !== 0) {\r\n         // Signalize to potential parent lists that a placeholder is already shown.\r\n         event._dndPhShown = true;\r\n      } else {\r\n         this._stopDragover();\r\n      }\r\n   }\r\n\r\n   @HostListener('mouseleave', ['$event'])\r\n   onmouseout(event) {\r\n      if (this._dndService.getDraggingState()) {\r\n         this._stopDragover();\r\n      }\r\n   }\r\n\r\n   private _stopDrag() {\r\n      this._dragOverStopped = true;\r\n   }\r\n\r\n   private _stopDragover() {\r\n      this._placeholderNode.remove();\r\n      this._renderer.removeClass(this._nativeElement, 'dndDragover');\r\n      return true;\r\n   }\r\n\r\n\r\n   /**\r\n  * Create a DndListEvent instance for events response.\r\n  */\r\n   private _getEventResponse(event: DragEvent, dropEffect: string, itemType: string, index?: number, item?): DndListEvent {\r\n      return {\r\n         callback: this._dndService.getDropCallback(),\r\n         dropEffect: dropEffect,\r\n         event: event,\r\n         external: !this._dndService.getDraggingState(),\r\n         index: index !== undefined ? index : this._getPlaceholderIndex(),\r\n         item: item || undefined,\r\n         stopDragover: this._stopDrag.bind(this),\r\n         type: itemType\r\n      };\r\n   }\r\n\r\n   private _getPlaceholderIndex() {\r\n      return Array.prototype.indexOf.call(this._nativeElement.children, this._placeholderNode);\r\n   }\r\n\r\n   private _getPlaceholderElement(): Element {\r\n      let placeholder = [].slice.call(this._nativeElement.children).filter((childNode) => {\r\n         return childNode.className.indexOf('dndPlaceholder') > -1;\r\n      });\r\n      if (placeholder.length) {\r\n         return placeholder;\r\n      }\r\n      placeholder = this._renderer.createElement('li');\r\n      this._renderer.addClass(placeholder, 'dndPlaceholder');\r\n      return placeholder;\r\n   }\r\n\r\n   private _getMimeType(types) {\r\n      if (!types) {\r\n         return MSIE_MIME_TYPE; // IE 9 workaround.\r\n      }\r\n      for (let i = 0; i < types.length; i++) {\r\n         if (types[i] === MSIE_MIME_TYPE || types[i] === EDGE_MIME_TYPE ||\r\n            types[i].substr(0, MIME_TYPE.length) === MIME_TYPE) {\r\n            return types[i];\r\n         }\r\n      }\r\n      return null;\r\n   }\r\n\r\n   /**\r\n  * Determines the type of the item from the dndService, or from the mime type for items from\r\n  * external sources. Returns undefined if no item type was set and null if the item type could\r\n  * not be determined.\r\n  */\r\n   private _getItemType(mimeType) {\r\n      if (this._dndService.getDraggingState()) {\r\n         return this._dndService.getItemType() || undefined;\r\n      }\r\n      if (mimeType === MSIE_MIME_TYPE || mimeType === EDGE_MIME_TYPE) {\r\n         return null;\r\n      }\r\n      return (mimeType && mimeType.substr(MIME_TYPE.length + 1)) || undefined;\r\n   }\r\n\r\n   private _isDropAllowed(itemType) {\r\n      if (this._listSettings.disabled) {\r\n         return false;\r\n      }\r\n      if (!this._listSettings.externalSources && !this._dndService.getDraggingState()) {\r\n         return false;\r\n      }\r\n      if (!this._listSettings.allowedTypes || itemType === null) {\r\n         return true;\r\n      }\r\n      return itemType && this._listSettings.allowedTypes.indexOf(itemType) !== -1;\r\n   }\r\n\r\n   /**\r\n  * Determines which drop effect to use for the given event. In Internet Explorer we have to\r\n  * ignore the effectAllowed field on dataTransfer, since we set a fake value in dragstart.\r\n  * In those cases we rely on dndState to filter effects. Read the design doc for more details:\r\n  * https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\r\n  */\r\n   private _getDropEffect(event, ignoreDataTransfer) {\r\n      let effects = ALL_EFFECTS;\r\n      if (!ignoreDataTransfer) {\r\n         effects = this._filterEffects(effects, event.dataTransfer.effectAllowed);\r\n      }\r\n      if (this._dndService.getDraggingState()) {\r\n         effects = this._filterEffects(effects, this._dndService.getEffectAllowed());\r\n      }\r\n      if (this.dndEffectAllowed) {\r\n         effects = this._filterEffects(effects, this.dndEffectAllowed);\r\n      }\r\n      // MacOS automatically filters dataTransfer.effectAllowed depending on the modifier keys,\r\n      // therefore the following modifier keys will only affect other operating systems.\r\n      if (!effects.length) {\r\n         return 'none';\r\n      } else if (event.ctrlKey && effects.indexOf('copy') !== -1) {\r\n         return 'copy';\r\n      } else if (event.altKey && effects.indexOf('link') !== -1) {\r\n         return 'link';\r\n      } else {\r\n         return effects[0];\r\n      }\r\n   }\r\n\r\n   /**\r\n  * Filters an array of drop effects using a HTML5 effectAllowed string.\r\n  */\r\n   private _filterEffects(effects, effectAllowed) {\r\n      if (effectAllowed === 'all') {\r\n         return effects;\r\n      }\r\n      return effects.filter(function (effect) {\r\n         return effectAllowed.toLowerCase().indexOf(effect) !== -1;\r\n      });\r\n   }\r\n}\r\n","import { Directive, HostBinding, HostListener, OnInit } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[dndNodrag]',\r\n})\r\nexport class DndNodragDirective implements OnInit {\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n\r\n  @HostBinding('draggable')\r\n  get draggable() {\r\n    return true;\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragStart(event) {\r\n    event = event.originalEvent || event;\r\n    if (!event._dndHandle) {\r\n      // If a child element already reacted to dragstart and set a dataTransfer object, we will\r\n      // allow that. For example, this is the case for user selections inside of input elements.\r\n      if (!(event.dataTransfer.types && event.dataTransfer.types.length)) {\r\n        event.preventDefault();\r\n      }\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop propagation of dragend events, otherwise dnd-moved might be triggered and the element\r\n   * would be removed.\r\n   */\r\n  @HostListener('dragend', ['$event'])\r\n  onDragEnd(event) {\r\n    event = event.originalEvent || event;\r\n    if (!event._dndHandle) {\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n}\r\n","import { Directive, HostBinding, HostListener, OnInit } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[dndHandle]',\r\n})\r\nexport class DndHandleDirective implements OnInit {\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n\r\n  @HostBinding('draggable')\r\n  get draggable() {\r\n    return true;\r\n  }\r\n\r\n  @HostListener('dragstart dragend', ['$event'])\r\n  onDragStart(event) {\r\n    event = event.originalEvent || event;\r\n    event._dndHandle = true;\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { DndDraggableDirective } from './directives/dnd-draggable.directive';\r\nimport { DndDraggableService } from './services/dnd-draggable.service';\r\nimport { DndListDirective } from './directives/dnd-list.directive';\r\nimport { DndNodragDirective } from './directives/dnd-nodrag.directive';\r\nimport { DndHandleDirective } from './directives/dnd-handle.directive';\r\n\r\nconst declarations = [\r\n  DndDraggableDirective,\r\n  DndListDirective,\r\n  DndNodragDirective,\r\n  DndHandleDirective\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations,\r\n  providers: [\r\n    DndDraggableService\r\n  ],\r\n  exports: declarations\r\n})\r\nexport class DndListModule { }\r\n"],"names":["filter"],"mappings":"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"}
