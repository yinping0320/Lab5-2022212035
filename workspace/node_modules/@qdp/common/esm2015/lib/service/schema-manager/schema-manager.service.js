/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// import 'rxjs/add/operator/map';
import { Injectable, Inject, Optional } from '@angular/core';
import { Subject, of } from 'rxjs';
import { switchMap, map } from 'rxjs/operators';
import { filter } from 'lodash-es';
import { SessionService } from '@ecp-caf/caf-common';
import { RestfulService } from '../restful-service/restful.service';
import { Server_Host } from '../../entitties/server.host';
import { SchemaRenderExtendService } from '../extend-service/schema-renderextend.service';
import { RtfServices } from '../rtfservices/rtfservices';
export class SchemaManagerService {
    /**
     * @param {?} restService
     * @param {?} sessionService
     * @param {?} host
     * @param {?} schemaRenderExtendService
     */
    constructor(restService, sessionService, host, schemaRenderExtendService) {
        this.restService = restService;
        this.sessionService = sessionService;
        this.host = host;
        this.schemaRenderExtendService = schemaRenderExtendService;
        this.uri = '/api/runtime/bcc/v1.0/qdpschemamanager/';
        this.schemaInfoChange = new Subject();
        this.colList = new Subject();
        this.controlType = new Subject();
        this.schemaInfo = {};
        this.schemaid = {} = new Subject();
        this.operationChange = new Subject();
        this.dynamicCols = {};
        this.customSchema = {};
        this.dynamicColIndex = 0;
        this.preSchema = {
            id: 'prefab',
            schemaName: '系统预制',
            isPrefab: 1,
            isDefault: 0,
            isProtected: '0',
            schemaValue: {
                titleOption: {
                    title: '',
                    subTitles: []
                },
                columnOption: {
                    maxLevel: 0,
                    colList: []
                },
                styleOption: {
                    Title: {
                        fontFamily: 9,
                        size: 14,
                        fontWeight: 0,
                        fontStyle: 0,
                        textDecoration: 0,
                        fontColor: 'black',
                        rowHeight: 35
                    },
                    SubTitle: {
                        fontFamily: 9,
                        size: 14,
                        fontWeight: 0,
                        fontStyle: 0,
                        textDecoration: 0,
                        fontColor: 'black',
                        rowHeight: 35
                    },
                    Header: {
                        fontFamily: 9,
                        size: 14,
                        fontWeight: 0,
                        fontStyle: 0,
                        textDecoration: 0,
                        fontColor: 'black',
                        rowHeight: 35
                    },
                    DataArea: {
                        fontFamily: 9,
                        size: 14,
                        fontWeight: 0,
                        fontStyle: 0,
                        textDecoration: 0,
                        fontColor: 'black',
                        rowHeight: 35
                    },
                    Footer: {
                        fontFamily: 9,
                        size: 14,
                        fontWeight: 0,
                        fontStyle: 0,
                        textDecoration: 0,
                        fontColor: 'black',
                        rowHeight: 35
                    }
                },
                otherOption: {
                    showFilterRow: true,
                    dataCahce: true,
                    level: '',
                    isDetails: '',
                    loadDataType: 1,
                    pageSize: 20,
                    treeInfoType: 2,
                    pathField: '',
                    pathStep: 0,
                    idField: '',
                    parentField: '',
                    firstLoad: true,
                    showZero: true,
                    expand: true,
                    showHeaderSort: true
                }
            }
        };
        this.isDefaultSchema = [];
        this.operations = {};
        /** @type {?} */
        const self = this;
        this.getOperation().subscribe((/**
         * @param {?} value
         * @return {?}
         */
        (value) => {
            if (value) {
                self.operations['QdpQueryExport'] = value['05202284-dfc4-149c-853e-cfd35b4a02bb'];
                self.operations['QdpQueryPrint'] = value['653fe24b-d77f-d8b0-71c5-5e3d561e33ca'];
                self.operations['QdpModifyPublicSchema'] = value['d6832d96-e6f3-114e-1d53-f9e636548eb9'];
                self.operations['QdpPubQuery'] = value['cd6c2057-5ad6-90dd-54ac-771c192563e8'];
                self.operationChange.next(self.operations);
            }
            // console.log(value);
        }));
    }
    /**
     * @param {?} id
     * @param {?} queryId
     * @param {?} dynamicCols
     * @param {?} queryRelativeUrl
     * @param {?=} scheme
     * @param {?=} frozenCols
     * @param {?=} groupType
     * @return {?}
     */
    getSpreadTemplate(id, queryId, dynamicCols, queryRelativeUrl, scheme, frozenCols, groupType) {
        if (dynamicCols && dynamicCols.length) {
            this.dynamicCols[groupType ? groupType : queryId] = dynamicCols;
            this.dynamicCols[id] = dynamicCols;
        }
        /** @type {?} */
        let schema;
        if (this.schemaList && this.schemaList[id]) {
            schema = this.schemaList[id];
        }
        /** @type {?} */
        let colInfo = [];
        // 新版本列信息通过frozenCols获取
        if (this.dynamicCols[groupType ? groupType : queryId]) {
            colInfo = Object.assign(frozenCols, this.dynamicCols[groupType ? groupType : queryId]);
        }
        else {
            colInfo = frozenCols;
        }
        this.colList.next(colInfo);
        return this.analysis((schema && schema.id ? schema.id : '1'), queryId, dynamicCols, queryRelativeUrl, scheme);
    }
    /**
     * 获取指定方案
     * @param {?} id 方案ID
     * @param {?} queryId 查询编号
     * @param {?} queryRelativeUrl
     * @param {?=} groupType
     * @param {?=} organizationId
     * @param {?=} fromCache
     * @return {?}
     */
    getSchema(id, queryId, queryRelativeUrl, groupType, organizationId, fromCache) {
        /** @type {?} */
        const self = this;
        if (this.schemaList && this.schemaList[id] && fromCache && fromCache === true) {
            return of(this.schemaList[id]);
        }
        else {
            /** @type {?} */
            const result$ = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);
            return result$.pipe(map((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                if (id === '1' || id === 'prefab') {
                    return Object.assign({}, self.preSchema, { id: '1' });
                }
                else if (value && value['schemaList'] && value['schemaList'][queryId]) {
                    if (value['schemaList'][queryId][id]) {
                        return value['schemaList'][queryId][id];
                    }
                    else {
                        /** @type {?} */
                        let defaultSchemaId = '';
                        if (value.isDefaultSchema && value.isDefaultSchema.id && value['schemaList'][queryId][value.isDefaultSchema.id]) {
                            defaultSchemaId = value.isDefaultSchema.id;
                            return value['schemaList'][queryId][defaultSchemaId];
                        }
                        else {
                            return null;
                        }
                    }
                }
                else {
                    return null;
                }
            })));
        }
    }
    /**
     * 获取默认方案
     * @param {?} queryId
     * @param {?} queryRelativeUrl
     * @param {?=} groupType
     * @param {?=} organizationId
     * @return {?}
     */
    getDefaultSchema(queryId, queryRelativeUrl, groupType, organizationId) {
        /** @type {?} */
        const result$ = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);
        return result$.pipe(map((/**
         * @return {?}
         */
        () => {
            if (this.isDefaultSchema[queryId] && this.isDefaultSchema[queryId].id) {
                return this.isDefaultSchema[queryId];
            }
            else {
                return null;
            }
        })));
    }
    /**
     * 获取方案列表
     * @param {?} queryId 查询编号
     * @param {?} userId 用户ID
     * @param {?} organizationId 组织id
     * @param {?} queryRelativeUrl
     * @return {?}
     */
    getSchemaList(queryId, userId, organizationId, queryRelativeUrl) {
        /** @type {?} */
        const restUri = this.host + this.uri + 'getschemalist';
        return this.getSchemas(restUri, queryRelativeUrl, { queryId, userId, organizationId });
    }
    /**
     * 获取方案列表
     * @param {?} queryId 查询编号
     * @param {?} userId 用户ID
     * @param {?} organizationId 组织id
     * @param {?} groupType
     * @param {?} queryRelativeUrl
     * @return {?}
     */
    getSchemaListByGroupType(queryId, userId, organizationId, groupType, queryRelativeUrl) {
        /** @type {?} */
        const restUri = this.host + this.uri + 'getschemalistbygroup';
        return this.getSchemas(restUri, queryRelativeUrl, { queryId, userId, organizationId, groupType });
    }
    /**
     * @private
     * @param {?} uri
     * @param {?} queryRelativeUrl
     * @param {?} params
     * @return {?}
     */
    getSchemas(uri, queryRelativeUrl, params) {
        // queryId: string, userId: string, organizationId: string, groupType: any, queryRelativeUrl: any, params: any
        /** @type {?} */
        const self = this;
        /** @type {?} */
        const result$ = self.restService.get(uri, params, self.createHeaderSessionId());
        return result$.pipe(map((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            self.schemaList = {};
            if (data && data.length) {
                self.isDefaultSchema[params.queryId] = null;
                data.forEach((/**
                 * @param {?} element
                 * @return {?}
                 */
                (element) => {
                    element.schemaValue = JSON.parse(element.schemaValue);
                    if (element.isDefault === 1) {
                        self.isDefaultSchema[params.queryId] = element;
                    }
                    self.schemaList[element.id] = element;
                    self.operateDynamicColsForSchema.call(self, element, params.groupType ? params.groupType : params.queryId);
                }));
                /** @type {?} */
                let schemaExtendId = '';
                if (self.schemaRenderExtendService && self.schemaRenderExtendService.schemaInfoRenderBefore) {
                    /** @type {?} */
                    const $event = { queryId: params.queryId };
                    $event['defaultSchemaId'] = '';
                    $event['schemalList'] = self.schemaList;
                    self.schemaRenderExtendService.schemaInfoRenderBefore($event);
                    if ($event['defaultSchemaId']) {
                        schemaExtendId = $event['defaultSchemaId'];
                    }
                }
                /** @type {?} */
                const filterCondition = { schemaType: 0 };
                if (schemaExtendId) {
                    filterCondition.id = schemaExtendId;
                }
                if (schemaExtendId || !self.isDefaultSchema || !self.isDefaultSchema[params.queryId]) {
                    if (filter(data, filterCondition) && filter(data, filterCondition).length) {
                        self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];
                    }
                    else {
                        filterCondition.schemaType = 1;
                        if (filter(data, filterCondition) && filter(data, filterCondition).length) {
                            self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];
                        }
                        else {
                            filterCondition.schemaType = 2;
                            if (filter(data, filterCondition) && filter(data, filterCondition).length) {
                                self.isDefaultSchema[params.queryId] = filter(data, filterCondition)[0];
                            }
                        }
                    }
                }
                self.schemaInfo[params.queryId] = self.schemaList;
                /** @type {?} */
                const preSchema = JSON.parse(JSON.stringify(self.preSchema));
                self.operateCustomSchema(preSchema, params.groupType ? params.groupType : params.queryId);
                self.operateDynamicColsForSchema.call(self, preSchema, params.groupType ? params.groupType : params.queryId, 1);
                self.schemaInfoChange.next({ schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema[params.queryId], preSchema: preSchema });
                return { schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema[params.queryId], preSchema: preSchema };
            }
            else {
                delete self.schemaInfo[params.queryId];
                /** @type {?} */
                const preSchema = JSON.parse(JSON.stringify(self.preSchema));
                self.isDefaultSchema[params.queryId] = null;
                self.operateCustomSchema(preSchema, params.groupType ? params.groupType : params.queryId);
                self.operateDynamicColsForSchema.call(self, preSchema, params.groupType ? params.groupType : params.queryId, 1);
                self.schemaInfoChange.next({ schemaList: null, isDefaultSchema: null, preSchema: preSchema });
                return { schemaList: null, isDefaultSchema: null, preSchema: preSchema };
            }
        })));
    }
    /**
     * @param {?} groupType
     * @param {?=} queryId
     * @return {?}
     */
    mergeCustomSchema(groupType, queryId) {
        /** @type {?} */
        const self = this;
        /** @type {?} */
        let preSchema = JSON.parse(JSON.stringify(self.preSchema));
        preSchema = self.operateCustomSchema(preSchema, groupType);
        self.operateDynamicColsForSchema.call(self, preSchema, groupType, 1);
        self.schemaInfoChange.next({ schemaList: self.schemaInfo, isDefaultSchema: self.isDefaultSchema && self.isDefaultSchema[queryId] ? self.isDefaultSchema[queryId] : null, preSchema: preSchema });
        return preSchema;
    }
    /**
     * @private
     * @param {?} preSchema
     * @param {?} groupType
     * @return {?}
     */
    operateCustomSchema(preSchema, groupType) {
        try {
            if (this.customSchema && this.customSchema[groupType]) {
                /** @type {?} */
                const schema = JSON.parse(this.customSchema[groupType]);
                preSchema.schemaValue.titleOption = Object.assign(preSchema.schemaValue.titleOption, schema.titleOption);
                preSchema.schemaValue.columnOption = Object.assign(preSchema.schemaValue.columnOption, schema.columnOption);
                preSchema.schemaValue.styleOption = Object.assign(preSchema.schemaValue.styleOption, schema.styleOption);
                preSchema.schemaValue.otherOption = Object.assign(preSchema.schemaValue.otherOption, schema.otherOption);
                return preSchema;
            }
        }
        catch (e) {
            console.log(e);
        }
    }
    /**
     * 保存方案
     * @param {?} schema 方案实体
     * @param {?} queryRelativeUrl
     * @return {?}
     */
    saveSchema(schema, queryRelativeUrl) {
        /** @type {?} */
        const restUri = this.host + this.uri + 'saveschema';
        /** @type {?} */
        const schemaObj = JSON.parse(schema.schema);
        /** @type {?} */
        const result$ = this.restService.post(restUri, schema, {}, this.createHeaderSessionId());
        return result$.pipe(switchMap((/**
         * @return {?}
         */
        () => {
            if (schema.groupType) {
                return this.getSchemaListByGroupType(schemaObj.queryId, '', schemaObj.orgId, schema.groupType, queryRelativeUrl);
            }
            else {
                return this.getSchemaList(schemaObj.queryId, '', schemaObj.orgId, queryRelativeUrl);
            }
        })));
    }
    /**
     * 删除方案
     * @param {?} id 方案ID
     * @param {?} queryId 查询编号
     * @param {?} queryRelativeUrl
     * @param {?=} groupType
     * @param {?=} organizationId
     * @return {?}
     */
    deleteSchema(id, queryId, queryRelativeUrl, groupType, organizationId) {
        /** @type {?} */
        const restUri = this.host + this.uri + 'deleteschema';
        /** @type {?} */
        const result$ = this.restService.delete(restUri, { id }, this.createHeaderSessionId());
        return result$.pipe(map((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data === true) {
                this.isDefaultSchema[queryId] = null;
                /** @type {?} */
                const result$1 = groupType ? this.getSchemaListByGroupType(queryId, '', organizationId, groupType, queryRelativeUrl) : this.getSchemaList(queryId, '', organizationId, queryRelativeUrl);
                return result$1.pipe(map((/**
                 * @param {?} value
                 * @return {?}
                 */
                value => {
                    return true;
                })));
            }
            else {
                return of(false);
            }
        })));
    }
    /**
     * 获取spread模版
     * @param {?} id 方案ID
     * @param {?} queryId
     * @param {?} dynamicCols
     * @param {?} queryRelativeUrl
     * @param {?=} scheme
     * @return {?}
     */
    analysis(id, queryId, dynamicCols, queryRelativeUrl, scheme) {
        /** @type {?} */
        const restUri = this.host + this.uri;
        /** @type {?} */
        let param = {};
        if (id !== '1') {
            if (dynamicCols && dynamicCols.length) {
                param = { id, dynamicCols: JSON.stringify(dynamicCols), schema: !scheme ? '' : scheme };
                return this.restService.post(restUri + 'getspreadtemplatewithdynamiccolumn', param, {}, this.createHeaderSessionId());
            }
            else {
                if (scheme) {
                    return this.restService.post(restUri + 'getspreadtemplatebyid', { id: id, schema: !scheme ? '' : scheme }, {}, this.createHeaderSessionId());
                }
                else {
                    return this.restService.get(restUri + 'getspreadtemplate', { id }, this.createHeaderSessionId());
                }
            }
        }
        else {
            dynamicCols = dynamicCols && dynamicCols.length ? dynamicCols : [];
            param = { dynamicCols: JSON.stringify(dynamicCols), schema: !scheme ? '' : scheme };
            return this.restService.post(restUri + 'getinitspreadtemplate', param, {}, this.createHeaderSessionId());
        }
    }
    /**
     * @param {?=} operators
     * @return {?}
     */
    getOperation(operators) {
        /** @type {?} */
        const restUri = this.host + this.uri;
        /** @type {?} */
        let param = {};
        if (!operators || !operators.length) {
            param = {
                operators: ['05202284-dfc4-149c-853e-cfd35b4a02bb', '653fe24b-d77f-d8b0-71c5-5e3d561e33ca', 'd6832d96-e6f3-114e-1d53-f9e636548eb9', 'cd6c2057-5ad6-90dd-54ac-771c192563e8']
            };
        }
        else {
            param = {
                operators: operators
            };
        }
        return this.restService.post(restUri + 'isprincipalhasop', param, {}, this.createHeaderSessionId());
    }
    /**
     * @param {?} type
     * @return {?}
     */
    validateOperation(type) {
        return this.operations['QdpModifyPublicSchema'] === true && (type === 0 || type === '0');
    }
    // 设置列信息
    /**
     * @param {?} dynamicCols
     * @return {?}
     */
    setColInfo(dynamicCols) {
        /** @type {?} */
        let colInfo = [];
        if (dynamicCols && dynamicCols.length) {
            colInfo = dynamicCols;
        }
        this.colList.next(colInfo);
    }
    /**
     * @private
     * @return {?}
     */
    createHeaderSessionId() {
        return RtfServices.createHeaderSessionId(this.sessionService);
    }
    /**
     * 二开人员预制的格式方案可以显示动态列信息
     * @param {?} element
     * @param {?} groupType
     * @param {?=} schemaId
     * @return {?}
     */
    operateDynamicColsForSchema(element, groupType, schemaId) {
        if (this.dynamicCols && this.dynamicCols[groupType]) {
            if (element && element.id && (element.isProtected === 1 || element.isProtected === '1' || schemaId === 1)) {
                /** @type {?} */
                const dynamicColumns = schemaId === 1 ? this.dynamicCols[groupType] : this.dynamicCols[element.id];
                /** @type {?} */
                const dyCols = this.createColumns(dynamicColumns, element.schemaValue.columnOption.colList);
                element.schemaValue.columnOption.colList = dyCols;
            }
        }
    }
    /**
     * 合并动态列
     * @private
     * @param {?} colList
     * @param {?} columns
     * @return {?}
     */
    createColumns(colList, columns) {
        /** @type {?} */
        const columnList = [];
        if (columns && columns.length) {
            columnList.push(...JSON.parse(JSON.stringify(columns)));
            if (colList && colList.length > 0) {
                /** @type {?} */
                let index = 0;
                // tslint:disable-next-line:prefer-for-of
                for (let col = 0; col < colList.length; col++) {
                    /** @type {?} */
                    let c = this.getColumn(columnList, colList[col]);
                    if (c) {
                        if (this.recursiveCompareColumn(c['childList'], colList[col]['childList']) === false) {
                            c = colList[col];
                        }
                    }
                    else {
                        if (index >= columnList.length) {
                            columnList.push(colList[col]);
                        }
                        else {
                            columnList.splice(index, 0, colList[col]);
                        }
                    }
                    if (c && index === 0) {
                        index = this.dynamicColIndex + 1;
                    }
                    else {
                        index += 1;
                    }
                }
            }
        }
        else {
            if (colList && colList.length > 0) {
                columnList.push(...colList);
            }
        }
        return columnList;
    }
    /**
     * @private
     * @param {?} columns
     * @param {?} col
     * @return {?}
     */
    getColumn(columns, col) {
        /** @type {?} */
        let result = null;
        this.dynamicColIndex = 0;
        // tslint:disable-next-line:prefer-for-of
        for (let item = 0; item < columns.length; item++) {
            result = this.recursiveGetColumn(col, columns[item], null);
            if (result != null) {
                return result;
            }
        }
        return result;
    }
    /**
     * @private
     * @param {?} col
     * @param {?} parentColumn
     * @param {?} childList
     * @return {?}
     */
    recursiveGetColumn(col, parentColumn, childList) {
        if (parentColumn) {
            if (parentColumn['bindField'] === col['bindField']) {
                return parentColumn;
            }
            if (parentColumn['childList'] && parentColumn['childList'].length > 0) {
                return this.recursiveGetColumn(col, null, parentColumn['childList']);
            }
            else {
                this.dynamicColIndex += 1;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (let item = 0; item < childList.length; item++) {
                if (childList[item]['bindField'] === col['bindField']) {
                    return childList[item];
                }
                if (childList[item]['childList'] && childList[item]['childList'].length > 0) {
                    return this.recursiveGetColumn(col, null, childList[item]['childList']);
                }
                else {
                    this.dynamicColIndex += 1;
                }
            }
        }
        return null;
    }
    /**
     * @private
     * @param {?} firstChildList
     * @param {?} secondChildList
     * @return {?}
     */
    recursiveCompareColumn(firstChildList, secondChildList) {
        if (!firstChildList && !secondChildList) {
            return true;
        }
        else if (!firstChildList && secondChildList) {
            return false;
        }
        else if (firstChildList && !secondChildList) {
            return false;
        }
        else if (firstChildList && secondChildList) {
            if (firstChildList.length !== secondChildList.length) {
                return false;
            }
            else {
                if (firstChildList.length === 0 && secondChildList.length === 0) {
                    return true;
                }
                else if (firstChildList.length === 0) {
                    return false;
                }
                else {
                    for (let i = 0; i < firstChildList.length; i++) {
                        if (firstChildList[i].bindField !== secondChildList[i].bindField) {
                            return false;
                        }
                        return this.recursiveCompareColumn(firstChildList[i].childList, secondChildList[i].childList);
                    }
                    return false;
                }
            }
        }
        return false;
    }
}
SchemaManagerService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
SchemaManagerService.ctorParameters = () => [
    { type: RestfulService },
    { type: SessionService },
    { type: String, decorators: [{ type: Inject, args: [Server_Host,] }] },
    { type: SchemaRenderExtendService, decorators: [{ type: Optional }] }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    SchemaManagerService.prototype.uri;
    /** @type {?} */
    SchemaManagerService.prototype.schemaInfoChange;
    /** @type {?} */
    SchemaManagerService.prototype.colList;
    /** @type {?} */
    SchemaManagerService.prototype.controlType;
    /** @type {?} */
    SchemaManagerService.prototype.schemaInfo;
    /** @type {?} */
    SchemaManagerService.prototype.schemaid;
    /** @type {?} */
    SchemaManagerService.prototype.operationChange;
    /** @type {?} */
    SchemaManagerService.prototype.dynamicCols;
    /** @type {?} */
    SchemaManagerService.prototype.customSchema;
    /** @type {?} */
    SchemaManagerService.prototype.dynamicColIndex;
    /** @type {?} */
    SchemaManagerService.prototype.preSchema;
    /** @type {?} */
    SchemaManagerService.prototype.isDefaultSchema;
    /** @type {?} */
    SchemaManagerService.prototype.schemaList;
    /** @type {?} */
    SchemaManagerService.prototype.operations;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerService.prototype.restService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerService.prototype.sessionService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerService.prototype.host;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerService.prototype.schemaRenderExtendService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLW1hbmFnZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BxZHAvY29tbW9uLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2Uvc2NoZW1hLW1hbmFnZXIvc2NoZW1hLW1hbmFnZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM3RCxPQUFPLEVBQWMsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQyxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDbkMsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDMUYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBR3pELE1BQU0sT0FBTyxvQkFBb0I7Ozs7Ozs7SUFvRy9CLFlBQW9CLFdBQTJCLEVBQVUsY0FBOEIsRUFBK0IsSUFBWSxFQUFzQix5QkFBb0Q7UUFBeEwsZ0JBQVcsR0FBWCxXQUFXLENBQWdCO1FBQVUsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQStCLFNBQUksR0FBSixJQUFJLENBQVE7UUFBc0IsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUEyQjtRQW5HcE0sUUFBRyxHQUFHLHlDQUF5QyxDQUFDO1FBQ3hELHFCQUFnQixHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7UUFDdEMsWUFBTyxHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7UUFD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Ozs7OztJQUFFLHlEQUF3RSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcclxuaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0LCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgUmVzdGZ1bFNlcnZpY2UgfSBmcm9tICcuLi9yZXN0ZnVsLXNlcnZpY2UvcmVzdGZ1bC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU2VydmVyX0hvc3QgfSBmcm9tICcuLi8uLi9lbnRpdHRpZXMvc2VydmVyLmhvc3QnO1xyXG5pbXBvcnQgeyBTY2hlbWFSZW5kZXJFeHRlbmRTZXJ2aWNlIH0gZnJvbSAnLi4vZXh0ZW5kLXNlcnZpY2Uvc2NoZW1hLXJlbmRlcmV4dGVuZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUnRmU2VydmljZXMgfSBmcm9tICcuLi9ydGZzZXJ2aWNlcy9ydGZzZXJ2aWNlcyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBTY2hlbWFNYW5hZ2VyU2VydmljZSB7XHJcbiAgcHJpdmF0ZSB1cmkgPSAnL2FwaS9ydW50aW1lL2JjYy92MS4wL3FkcHNjaGVtYW1hbmFnZXIvJztcclxuICBzY2hlbWFJbmZvQ2hhbmdlID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gIGNvbExpc3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgY29udHJvbFR5cGUgPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XHJcbiAgc2NoZW1hSW5mbzogYW55ID0ge307XHJcbiAgc2NoZW1haWQ6IGFueSA9IHt9ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gIG9wZXJhdGlvbkNoYW5nZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICBkeW5hbWljQ29sczogYW55ID0ge307XHJcbiAgY3VzdG9tU2NoZW1hOiBhbnkgPSB7fTtcclxuICBkeW5hbWljQ29sSW5kZXggPSAwO1xyXG5cclxuICBwcmVTY2hlbWEgPSB7XHJcbiAgICBpZDogJ3ByZWZhYicsXHJcbiAgICBzY2hlbWFOYW1lOiAn57O757uf6aKE5Yi2JyxcclxuICAgIGlzUHJlZmFiOiAxLFxyXG4gICAgaXNEZWZhdWx0OiAwLFxyXG4gICAgaXNQcm90ZWN0ZWQ6ICcwJyxcclxuICAgIHNjaGVtYVZhbHVlOiB7XHJcbiAgICAgIHRpdGxlT3B0aW9uOiB7XHJcbiAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgIHN1YlRpdGxlczogW11cclxuICAgICAgfSxcclxuICAgICAgY29sdW1uT3B0aW9uOiB7XHJcbiAgICAgICAgbWF4TGV2ZWw6IDAsXHJcbiAgICAgICAgY29sTGlzdDogW11cclxuICAgICAgfSxcclxuICAgICAgc3R5bGVPcHRpb246IHtcclxuICAgICAgICBUaXRsZToge1xyXG4gICAgICAgICAgZm9udEZhbWlseTogOSxcclxuICAgICAgICAgIHNpemU6IDE0LFxyXG4gICAgICAgICAgZm9udFdlaWdodDogMCxcclxuICAgICAgICAgIGZvbnRTdHlsZTogMCxcclxuICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAwLFxyXG4gICAgICAgICAgZm9udENvbG9yOiAnYmxhY2snLFxyXG4gICAgICAgICAgcm93SGVpZ2h0OiAzNVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU3ViVGl0bGU6IHtcclxuICAgICAgICAgIGZvbnRGYW1pbHk6IDksXHJcbiAgICAgICAgICBzaXplOiAxNCxcclxuICAgICAgICAgIGZvbnRXZWlnaHQ6IDAsXHJcbiAgICAgICAgICBmb250U3R5bGU6IDAsXHJcbiAgICAgICAgICB0ZXh0RGVjb3JhdGlvbjogMCxcclxuICAgICAgICAgIGZvbnRDb2xvcjogJ2JsYWNrJyxcclxuICAgICAgICAgIHJvd0hlaWdodDogMzVcclxuICAgICAgICB9LFxyXG4gICAgICAgIEhlYWRlcjoge1xyXG4gICAgICAgICAgZm9udEZhbWlseTogOSxcclxuICAgICAgICAgIHNpemU6IDE0LFxyXG4gICAgICAgICAgZm9udFdlaWdodDogMCxcclxuICAgICAgICAgIGZvbnRTdHlsZTogMCxcclxuICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAwLFxyXG4gICAgICAgICAgZm9udENvbG9yOiAnYmxhY2snLFxyXG4gICAgICAgICAgcm93SGVpZ2h0OiAzNVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRGF0YUFyZWE6IHtcclxuICAgICAgICAgIGZvbnRGYW1pbHk6IDksXHJcbiAgICAgICAgICBzaXplOiAxNCxcclxuICAgICAgICAgIGZvbnRXZWlnaHQ6IDAsXHJcbiAgICAgICAgICBmb250U3R5bGU6IDAsXHJcbiAgICAgICAgICB0ZXh0RGVjb3JhdGlvbjogMCxcclxuICAgICAgICAgIGZvbnRDb2xvcjogJ2JsYWNrJyxcclxuICAgICAgICAgIHJvd0hlaWdodDogMzVcclxuICAgICAgICB9LFxyXG4gICAgICAgIEZvb3Rlcjoge1xyXG4gICAgICAgICAgZm9udEZhbWlseTogOSxcclxuICAgICAgICAgIHNpemU6IDE0LFxyXG4gICAgICAgICAgZm9udFdlaWdodDogMCxcclxuICAgICAgICAgIGZvbnRTdHlsZTogMCxcclxuICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAwLFxyXG4gICAgICAgICAgZm9udENvbG9yOiAnYmxhY2snLFxyXG4gICAgICAgICAgcm93SGVpZ2h0OiAzNVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgb3RoZXJPcHRpb246IHtcclxuICAgICAgICBzaG93RmlsdGVyUm93OiB0cnVlLFxyXG4gICAgICAgIGRhdGFDYWhjZTogdHJ1ZSxcclxuICAgICAgICBsZXZlbDogJycsXHJcbiAgICAgICAgaXNEZXRhaWxzOiAnJyxcclxuICAgICAgICBsb2FkRGF0YVR5cGU6IDEsXHJcbiAgICAgICAgcGFnZVNpemU6IDIwLFxyXG4gICAgICAgIHRyZWVJbmZvVHlwZTogMixcclxuICAgICAgICBwYXRoRmllbGQ6ICcnLFxyXG4gICAgICAgIHBhdGhTdGVwOiAwLFxyXG4gICAgICAgIGlkRmllbGQ6ICcnLFxyXG4gICAgICAgIHBhcmVudEZpZWxkOiAnJyxcclxuICAgICAgICBmaXJzdExvYWQ6IHRydWUsXHJcbiAgICAgICAgc2hvd1plcm86IHRydWUsXHJcbiAgICAgICAgZXhwYW5kOiB0cnVlLFxyXG4gICAgICAgIHNob3dIZWFkZXJTb3J0OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpc0RlZmF1bHRTY2hlbWE6IGFueSA9IFtdO1xyXG5cclxuICBzY2hlbWFMaXN0OiBhbnk7XHJcblxyXG4gIG9wZXJhdGlvbnMgPSB7fTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZXN0U2VydmljZTogUmVzdGZ1bFNlcnZpY2UsIHByaXZhdGUgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBASW5qZWN0KFNlcnZlcl9Ib3N0KSBwcml2YXRlIGhvc3Q6IHN0cmluZywgQE9wdGlvbmFsKCkgcHJpdmF0ZSBzY2hlbWFSZW5kZXJFeHRlbmRTZXJ2aWNlOiBTY2hlbWFSZW5kZXJFeHRlbmRTZXJ2aWNlKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuZ2V0T3BlcmF0aW9uKCkuc3Vic2NyaWJlKCh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHNlbGYub3BlcmF0aW9uc1snUWRwUXVlcnlFeHBvcnQnXSA9IHZhbHVlWycwNTIwMjI4NC1kZmM0LTE0OWMtODUzZS1jZmQzNWI0YTAyYmInXTtcclxuICAgICAgICBzZWxmLm9wZXJhdGlvbnNbJ1FkcFF1ZXJ5UHJpbnQnXSA9IHZhbHVlWyc2NTNmZTI0Yi1kNzdmLWQ4YjAtNzFjNS01ZTNkNTYxZTMzY2EnXTtcclxuICAgICAgICBzZWxmLm9wZXJhdGlvbnNbJ1FkcE1vZGlmeVB1YmxpY1NjaGVtYSddID0gdmFsdWVbJ2Q2ODMyZDk2LWU2ZjMtMTE0ZS0xZDUzLWY5ZTYzNjU0OGViOSddO1xyXG4gICAgICAgIHNlbGYub3BlcmF0aW9uc1snUWRwUHViUXVlcnknXSA9IHZhbHVlWydjZDZjMjA1Ny01YWQ2LTkwZGQtNTRhYy03NzFjMTkyNTYzZTgnXTtcclxuICAgICAgICBzZWxmLm9wZXJhdGlvbkNoYW5nZS5uZXh0KHNlbGYub3BlcmF0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRTcHJlYWRUZW1wbGF0ZShpZDogc3RyaW5nLCBxdWVyeUlkOiBzdHJpbmcsIGR5bmFtaWNDb2xzOiBhbnksIHF1ZXJ5UmVsYXRpdmVVcmw6IGFueSwgc2NoZW1lPzogYW55LCBmcm96ZW5Db2xzPzogYW55LCBncm91cFR5cGU/OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgaWYgKGR5bmFtaWNDb2xzICYmIGR5bmFtaWNDb2xzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmR5bmFtaWNDb2xzW2dyb3VwVHlwZSA/IGdyb3VwVHlwZSA6IHF1ZXJ5SWRdID0gZHluYW1pY0NvbHM7XHJcbiAgICAgIHRoaXMuZHluYW1pY0NvbHNbaWRdID0gZHluYW1pY0NvbHM7XHJcbiAgICB9XHJcbiAgICBsZXQgc2NoZW1hO1xyXG4gICAgaWYgKHRoaXMuc2NoZW1hTGlzdCAmJiB0aGlzLnNjaGVtYUxpc3RbaWRdKSB7XHJcbiAgICAgIHNjaGVtYSA9IHRoaXMuc2NoZW1hTGlzdFtpZF07XHJcbiAgICB9XHJcbiAgICBsZXQgY29sSW5mbzogYW55ID0gW107XHJcbiAgICAvLyDmlrDniYjmnKzliJfkv6Hmga/pgJrov4dmcm96ZW5Db2xz6I635Y+WXHJcbiAgICBpZiAodGhpcy5keW5hbWljQ29sc1tncm91cFR5cGUgPyBncm91cFR5cGUgOiBxdWVyeUlkXSkge1xyXG4gICAgICBjb2xJbmZvID0gT2JqZWN0LmFzc2lnbihmcm96ZW5Db2xzLCB0aGlzLmR5bmFtaWNDb2xzW2dyb3VwVHlwZSA/IGdyb3VwVHlwZSA6IHF1ZXJ5SWRdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbEluZm8gPSBmcm96ZW5Db2xzO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb2xMaXN0Lm5leHQoY29sSW5mbyk7XHJcbiAgICByZXR1cm4gdGhpcy5hbmFseXNpcygoc2NoZW1hICYmIHNjaGVtYS5pZCA/IHNjaGVtYS5pZCA6ICcxJyksIHF1ZXJ5SWQsIGR5bmFtaWNDb2xzLCBxdWVyeVJlbGF0aXZlVXJsLCBzY2hlbWUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5bmjIflrprmlrnmoYhcclxuICAgKiBAcGFyYW0gaWQg5pa55qGISURcclxuICAgKiBAcGFyYW0gcXVlcnlJZCDmn6Xor6LnvJblj7dcclxuICAgKi9cclxuICBnZXRTY2hlbWEoaWQ6IHN0cmluZywgcXVlcnlJZDogc3RyaW5nLCBxdWVyeVJlbGF0aXZlVXJsOiBhbnksIGdyb3VwVHlwZT86IGFueSwgb3JnYW5pemF0aW9uSWQ/OiBhbnksIGZyb21DYWNoZT86IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICh0aGlzLnNjaGVtYUxpc3QgJiYgdGhpcy5zY2hlbWFMaXN0W2lkXSAmJiBmcm9tQ2FjaGUgJiYgZnJvbUNhY2hlID09PSB0cnVlKSB7XHJcbiAgICAgIHJldHVybiBvZih0aGlzLnNjaGVtYUxpc3RbaWRdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCQgPSBncm91cFR5cGUgPyB0aGlzLmdldFNjaGVtYUxpc3RCeUdyb3VwVHlwZShxdWVyeUlkLCAnJywgb3JnYW5pemF0aW9uSWQsIGdyb3VwVHlwZSwgcXVlcnlSZWxhdGl2ZVVybCkgOiB0aGlzLmdldFNjaGVtYUxpc3QocXVlcnlJZCwgJycsIG9yZ2FuaXphdGlvbklkLCBxdWVyeVJlbGF0aXZlVXJsKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdCQucGlwZShcclxuICAgICAgICBtYXAodmFsdWUgPT4ge1xyXG4gICAgICAgICAgaWYgKGlkID09PSAnMScgfHwgaWQgPT09ICdwcmVmYWInKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzZWxmLnByZVNjaGVtYSwgeyBpZDogJzEnIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAmJiB2YWx1ZVsnc2NoZW1hTGlzdCddICYmIHZhbHVlWydzY2hlbWFMaXN0J11bcXVlcnlJZF0pIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlWydzY2hlbWFMaXN0J11bcXVlcnlJZF1baWRdKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlWydzY2hlbWFMaXN0J11bcXVlcnlJZF1baWRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxldCBkZWZhdWx0U2NoZW1hSWQgPSAnJztcclxuICAgICAgICAgICAgICBpZiAodmFsdWUuaXNEZWZhdWx0U2NoZW1hICYmIHZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pZCAmJiB2YWx1ZVsnc2NoZW1hTGlzdCddW3F1ZXJ5SWRdW3ZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pZF0pIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRTY2hlbWFJZCA9IHZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVsnc2NoZW1hTGlzdCddW3F1ZXJ5SWRdW2RlZmF1bHRTY2hlbWFJZF07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W6buY6K6k5pa55qGIXHJcbiAgICovXHJcbiAgZ2V0RGVmYXVsdFNjaGVtYShxdWVyeUlkOiBzdHJpbmcsIHF1ZXJ5UmVsYXRpdmVVcmw6IGFueSwgZ3JvdXBUeXBlPzogYW55LCBvcmdhbml6YXRpb25JZD86IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCByZXN1bHQkID0gZ3JvdXBUeXBlID8gdGhpcy5nZXRTY2hlbWFMaXN0QnlHcm91cFR5cGUocXVlcnlJZCwgJycsIG9yZ2FuaXphdGlvbklkLCBncm91cFR5cGUsIHF1ZXJ5UmVsYXRpdmVVcmwpIDogdGhpcy5nZXRTY2hlbWFMaXN0KHF1ZXJ5SWQsICcnLCBvcmdhbml6YXRpb25JZCwgcXVlcnlSZWxhdGl2ZVVybCk7XHJcbiAgICByZXR1cm4gcmVzdWx0JC5waXBlKFxyXG4gICAgICBtYXAoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVmYXVsdFNjaGVtYVtxdWVyeUlkXSAmJiB0aGlzLmlzRGVmYXVsdFNjaGVtYVtxdWVyeUlkXS5pZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuaXNEZWZhdWx0U2NoZW1hW3F1ZXJ5SWRdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDojrflj5bmlrnmoYjliJfooahcclxuICAgKiBAcGFyYW0gcXVlcnlJZCDmn6Xor6LnvJblj7dcclxuICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXHJcbiAgICogQHBhcmFtIG9yZ2FuaXphdGlvbklkIOe7hOe7h2lkXHJcbiAgICovXHJcbiAgZ2V0U2NoZW1hTGlzdChxdWVyeUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBvcmdhbml6YXRpb25JZDogc3RyaW5nLCBxdWVyeVJlbGF0aXZlVXJsOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzdFVyaSA9IHRoaXMuaG9zdCArIHRoaXMudXJpICsgJ2dldHNjaGVtYWxpc3QnO1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NoZW1hcyhyZXN0VXJpLCBxdWVyeVJlbGF0aXZlVXJsLCB7IHF1ZXJ5SWQsIHVzZXJJZCwgb3JnYW5pemF0aW9uSWQgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmlrnmoYjliJfooahcclxuICAgKiBAcGFyYW0gcXVlcnlJZCDmn6Xor6LnvJblj7dcclxuICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXHJcbiAgICogQHBhcmFtIG9yZ2FuaXphdGlvbklkIOe7hOe7h2lkXHJcbiAgICovXHJcbiAgZ2V0U2NoZW1hTGlzdEJ5R3JvdXBUeXBlKHF1ZXJ5SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcsIGdyb3VwVHlwZTogYW55LCBxdWVyeVJlbGF0aXZlVXJsOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzdFVyaSA9IHRoaXMuaG9zdCArIHRoaXMudXJpICsgJ2dldHNjaGVtYWxpc3RieWdyb3VwJztcclxuICAgIHJldHVybiB0aGlzLmdldFNjaGVtYXMocmVzdFVyaSwgcXVlcnlSZWxhdGl2ZVVybCwgeyBxdWVyeUlkLCB1c2VySWQsIG9yZ2FuaXphdGlvbklkLCBncm91cFR5cGUgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFNjaGVtYXModXJpOiBhbnksIHF1ZXJ5UmVsYXRpdmVVcmw6IGFueSwgcGFyYW1zOiBhbnkpIHsgLy8gcXVlcnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgb3JnYW5pemF0aW9uSWQ6IHN0cmluZywgZ3JvdXBUeXBlOiBhbnksIHF1ZXJ5UmVsYXRpdmVVcmw6IGFueSwgcGFyYW1zOiBhbnlcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgY29uc3QgcmVzdWx0JCA9IHNlbGYucmVzdFNlcnZpY2UuZ2V0KHVyaSwgcGFyYW1zLCBzZWxmLmNyZWF0ZUhlYWRlclNlc3Npb25JZCgpKTtcclxuICAgIHJldHVybiByZXN1bHQkLnBpcGUoXHJcbiAgICAgIG1hcCgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgc2VsZi5zY2hlbWFMaXN0ID0ge307XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgIHNlbGYuaXNEZWZhdWx0U2NoZW1hW3BhcmFtcy5xdWVyeUlkXSA9IG51bGw7XHJcbiAgICAgICAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnNjaGVtYVZhbHVlID0gSlNPTi5wYXJzZShlbGVtZW50LnNjaGVtYVZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaXNEZWZhdWx0ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5pc0RlZmF1bHRTY2hlbWFbcGFyYW1zLnF1ZXJ5SWRdID0gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLnNjaGVtYUxpc3RbZWxlbWVudC5pZF0gPSBlbGVtZW50O1xyXG4gICAgICAgICAgICBzZWxmLm9wZXJhdGVEeW5hbWljQ29sc0ZvclNjaGVtYS5jYWxsKHNlbGYsIGVsZW1lbnQsIHBhcmFtcy5ncm91cFR5cGUgPyBwYXJhbXMuZ3JvdXBUeXBlIDogcGFyYW1zLnF1ZXJ5SWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBsZXQgc2NoZW1hRXh0ZW5kSWQgPSAnJztcclxuICAgICAgICAgIGlmIChzZWxmLnNjaGVtYVJlbmRlckV4dGVuZFNlcnZpY2UgJiYgc2VsZi5zY2hlbWFSZW5kZXJFeHRlbmRTZXJ2aWNlLnNjaGVtYUluZm9SZW5kZXJCZWZvcmUpIHtcclxuICAgICAgICAgICAgY29uc3QgJGV2ZW50OiBhbnkgPSB7IHF1ZXJ5SWQ6IHBhcmFtcy5xdWVyeUlkIH07XHJcbiAgICAgICAgICAgICRldmVudFsnZGVmYXVsdFNjaGVtYUlkJ10gPSAnJztcclxuICAgICAgICAgICAgJGV2ZW50WydzY2hlbWFsTGlzdCddID0gc2VsZi5zY2hlbWFMaXN0O1xyXG4gICAgICAgICAgICBzZWxmLnNjaGVtYVJlbmRlckV4dGVuZFNlcnZpY2Uuc2NoZW1hSW5mb1JlbmRlckJlZm9yZSgkZXZlbnQpO1xyXG4gICAgICAgICAgICBpZiAoJGV2ZW50WydkZWZhdWx0U2NoZW1hSWQnXSkge1xyXG4gICAgICAgICAgICAgIHNjaGVtYUV4dGVuZElkID0gJGV2ZW50WydkZWZhdWx0U2NoZW1hSWQnXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgZmlsdGVyQ29uZGl0aW9uOiBhbnkgPSB7IHNjaGVtYVR5cGU6IDAgfTtcclxuICAgICAgICAgIGlmIChzY2hlbWFFeHRlbmRJZCkge1xyXG4gICAgICAgICAgICBmaWx0ZXJDb25kaXRpb24uaWQgPSBzY2hlbWFFeHRlbmRJZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChzY2hlbWFFeHRlbmRJZCB8fCAhc2VsZi5pc0RlZmF1bHRTY2hlbWEgfHwgIXNlbGYuaXNEZWZhdWx0U2NoZW1hW3BhcmFtcy5xdWVyeUlkXSkge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyKGRhdGEsIGZpbHRlckNvbmRpdGlvbikgJiYgZmlsdGVyKGRhdGEsIGZpbHRlckNvbmRpdGlvbikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5pc0RlZmF1bHRTY2hlbWFbcGFyYW1zLnF1ZXJ5SWRdID0gZmlsdGVyKGRhdGEsIGZpbHRlckNvbmRpdGlvbilbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZmlsdGVyQ29uZGl0aW9uLnNjaGVtYVR5cGUgPSAxO1xyXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXIoZGF0YSwgZmlsdGVyQ29uZGl0aW9uKSAmJiBmaWx0ZXIoZGF0YSwgZmlsdGVyQ29uZGl0aW9uKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaXNEZWZhdWx0U2NoZW1hW3BhcmFtcy5xdWVyeUlkXSA9IGZpbHRlcihkYXRhLCBmaWx0ZXJDb25kaXRpb24pWzBdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJDb25kaXRpb24uc2NoZW1hVHlwZSA9IDI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKGRhdGEsIGZpbHRlckNvbmRpdGlvbikgJiYgZmlsdGVyKGRhdGEsIGZpbHRlckNvbmRpdGlvbikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNlbGYuaXNEZWZhdWx0U2NoZW1hW3BhcmFtcy5xdWVyeUlkXSA9IGZpbHRlcihkYXRhLCBmaWx0ZXJDb25kaXRpb24pWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2VsZi5zY2hlbWFJbmZvW3BhcmFtcy5xdWVyeUlkXSA9IHNlbGYuc2NoZW1hTGlzdDtcclxuICAgICAgICAgIGNvbnN0IHByZVNjaGVtYSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VsZi5wcmVTY2hlbWEpKTtcclxuICAgICAgICAgIHNlbGYub3BlcmF0ZUN1c3RvbVNjaGVtYShwcmVTY2hlbWEsIHBhcmFtcy5ncm91cFR5cGUgPyBwYXJhbXMuZ3JvdXBUeXBlIDogcGFyYW1zLnF1ZXJ5SWQpO1xyXG4gICAgICAgICAgc2VsZi5vcGVyYXRlRHluYW1pY0NvbHNGb3JTY2hlbWEuY2FsbChzZWxmLCBwcmVTY2hlbWEsIHBhcmFtcy5ncm91cFR5cGUgPyBwYXJhbXMuZ3JvdXBUeXBlIDogcGFyYW1zLnF1ZXJ5SWQsIDEpO1xyXG4gICAgICAgICAgc2VsZi5zY2hlbWFJbmZvQ2hhbmdlLm5leHQoeyBzY2hlbWFMaXN0OiBzZWxmLnNjaGVtYUluZm8sIGlzRGVmYXVsdFNjaGVtYTogc2VsZi5pc0RlZmF1bHRTY2hlbWFbcGFyYW1zLnF1ZXJ5SWRdLCBwcmVTY2hlbWE6IHByZVNjaGVtYSB9KTtcclxuICAgICAgICAgIHJldHVybiB7IHNjaGVtYUxpc3Q6IHNlbGYuc2NoZW1hSW5mbywgaXNEZWZhdWx0U2NoZW1hOiBzZWxmLmlzRGVmYXVsdFNjaGVtYVtwYXJhbXMucXVlcnlJZF0sIHByZVNjaGVtYTogcHJlU2NoZW1hIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRlbGV0ZSBzZWxmLnNjaGVtYUluZm9bcGFyYW1zLnF1ZXJ5SWRdO1xyXG4gICAgICAgICAgY29uc3QgcHJlU2NoZW1hID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzZWxmLnByZVNjaGVtYSkpO1xyXG4gICAgICAgICAgc2VsZi5pc0RlZmF1bHRTY2hlbWFbcGFyYW1zLnF1ZXJ5SWRdID0gbnVsbDtcclxuICAgICAgICAgIHNlbGYub3BlcmF0ZUN1c3RvbVNjaGVtYShwcmVTY2hlbWEsIHBhcmFtcy5ncm91cFR5cGUgPyBwYXJhbXMuZ3JvdXBUeXBlIDogcGFyYW1zLnF1ZXJ5SWQpO1xyXG4gICAgICAgICAgc2VsZi5vcGVyYXRlRHluYW1pY0NvbHNGb3JTY2hlbWEuY2FsbChzZWxmLCBwcmVTY2hlbWEsIHBhcmFtcy5ncm91cFR5cGUgPyBwYXJhbXMuZ3JvdXBUeXBlIDogcGFyYW1zLnF1ZXJ5SWQsIDEpO1xyXG4gICAgICAgICAgc2VsZi5zY2hlbWFJbmZvQ2hhbmdlLm5leHQoeyBzY2hlbWFMaXN0OiBudWxsLCBpc0RlZmF1bHRTY2hlbWE6IG51bGwsIHByZVNjaGVtYTogcHJlU2NoZW1hIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHsgc2NoZW1hTGlzdDogbnVsbCwgaXNEZWZhdWx0U2NoZW1hOiBudWxsLCBwcmVTY2hlbWE6IHByZVNjaGVtYSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbWVyZ2VDdXN0b21TY2hlbWEoZ3JvdXBUeXBlOiBhbnksIHF1ZXJ5SWQ/OiBhbnkpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgbGV0IHByZVNjaGVtYSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VsZi5wcmVTY2hlbWEpKTtcclxuICAgIHByZVNjaGVtYSA9IHNlbGYub3BlcmF0ZUN1c3RvbVNjaGVtYShwcmVTY2hlbWEsIGdyb3VwVHlwZSk7XHJcbiAgICBzZWxmLm9wZXJhdGVEeW5hbWljQ29sc0ZvclNjaGVtYS5jYWxsKHNlbGYsIHByZVNjaGVtYSwgZ3JvdXBUeXBlLCAxKTtcclxuICAgIHNlbGYuc2NoZW1hSW5mb0NoYW5nZS5uZXh0KHsgc2NoZW1hTGlzdDogc2VsZi5zY2hlbWFJbmZvLCBpc0RlZmF1bHRTY2hlbWE6IHNlbGYuaXNEZWZhdWx0U2NoZW1hICYmIHNlbGYuaXNEZWZhdWx0U2NoZW1hW3F1ZXJ5SWRdID8gc2VsZi5pc0RlZmF1bHRTY2hlbWFbcXVlcnlJZF0gOiBudWxsLCBwcmVTY2hlbWE6IHByZVNjaGVtYSB9KTtcclxuICAgIHJldHVybiBwcmVTY2hlbWE7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9wZXJhdGVDdXN0b21TY2hlbWEocHJlU2NoZW1hOiBhbnksIGdyb3VwVHlwZTogYW55KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5jdXN0b21TY2hlbWEgJiYgdGhpcy5jdXN0b21TY2hlbWFbZ3JvdXBUeXBlXSkge1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IEpTT04ucGFyc2UodGhpcy5jdXN0b21TY2hlbWFbZ3JvdXBUeXBlXSk7XHJcbiAgICAgICAgcHJlU2NoZW1hLnNjaGVtYVZhbHVlLnRpdGxlT3B0aW9uID0gT2JqZWN0LmFzc2lnbihwcmVTY2hlbWEuc2NoZW1hVmFsdWUudGl0bGVPcHRpb24sIHNjaGVtYS50aXRsZU9wdGlvbik7XHJcbiAgICAgICAgcHJlU2NoZW1hLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbiA9IE9iamVjdC5hc3NpZ24ocHJlU2NoZW1hLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbiwgc2NoZW1hLmNvbHVtbk9wdGlvbik7XHJcbiAgICAgICAgcHJlU2NoZW1hLnNjaGVtYVZhbHVlLnN0eWxlT3B0aW9uID0gT2JqZWN0LmFzc2lnbihwcmVTY2hlbWEuc2NoZW1hVmFsdWUuc3R5bGVPcHRpb24sIHNjaGVtYS5zdHlsZU9wdGlvbik7XHJcbiAgICAgICAgcHJlU2NoZW1hLnNjaGVtYVZhbHVlLm90aGVyT3B0aW9uID0gT2JqZWN0LmFzc2lnbihwcmVTY2hlbWEuc2NoZW1hVmFsdWUub3RoZXJPcHRpb24sIHNjaGVtYS5vdGhlck9wdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHByZVNjaGVtYTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y5pa55qGIXHJcbiAgICogQHBhcmFtIHNjaGVtYSDmlrnmoYjlrp7kvZNcclxuICAgKi9cclxuICBzYXZlU2NoZW1hKHNjaGVtYTogYW55LCBxdWVyeVJlbGF0aXZlVXJsOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzdFVyaSA9IHRoaXMuaG9zdCArIHRoaXMudXJpICsgJ3NhdmVzY2hlbWEnO1xyXG4gICAgY29uc3Qgc2NoZW1hT2JqID0gSlNPTi5wYXJzZShzY2hlbWEuc2NoZW1hKTtcclxuICAgIGNvbnN0IHJlc3VsdCQgPSB0aGlzLnJlc3RTZXJ2aWNlLnBvc3QocmVzdFVyaSwgc2NoZW1hLCB7fSwgdGhpcy5jcmVhdGVIZWFkZXJTZXNzaW9uSWQoKSk7XHJcbiAgICByZXR1cm4gcmVzdWx0JC5waXBlKFxyXG4gICAgICBzd2l0Y2hNYXAoKCkgPT4ge1xyXG4gICAgICAgIGlmIChzY2hlbWEuZ3JvdXBUeXBlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTY2hlbWFMaXN0QnlHcm91cFR5cGUoc2NoZW1hT2JqLnF1ZXJ5SWQsICcnLCBzY2hlbWFPYmoub3JnSWQsIHNjaGVtYS5ncm91cFR5cGUsIHF1ZXJ5UmVsYXRpdmVVcmwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTY2hlbWFMaXN0KHNjaGVtYU9iai5xdWVyeUlkLCAnJywgc2NoZW1hT2JqLm9yZ0lkLCBxdWVyeVJlbGF0aXZlVXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDliKDpmaTmlrnmoYhcclxuICAgKiBAcGFyYW0gaWQg5pa55qGISURcclxuICAgKiBAcGFyYW0gcXVlcnlJZCDmn6Xor6LnvJblj7dcclxuICAgKi9cclxuICBkZWxldGVTY2hlbWEoaWQ6IHN0cmluZywgcXVlcnlJZDogc3RyaW5nLCBxdWVyeVJlbGF0aXZlVXJsOiBhbnksIGdyb3VwVHlwZT86IGFueSwgb3JnYW5pemF0aW9uSWQ/OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzdFVyaSA9IHRoaXMuaG9zdCArIHRoaXMudXJpICsgJ2RlbGV0ZXNjaGVtYSc7XHJcbiAgICBjb25zdCByZXN1bHQkID0gdGhpcy5yZXN0U2VydmljZS5kZWxldGUocmVzdFVyaSwgeyBpZCB9LCB0aGlzLmNyZWF0ZUhlYWRlclNlc3Npb25JZCgpKTtcclxuICAgIHJldHVybiByZXN1bHQkLnBpcGUoXHJcbiAgICAgIG1hcCgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09IHRydWUpIHtcclxuICAgICAgICAgIHRoaXMuaXNEZWZhdWx0U2NoZW1hW3F1ZXJ5SWRdID0gbnVsbDtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCQxID0gZ3JvdXBUeXBlID8gdGhpcy5nZXRTY2hlbWFMaXN0QnlHcm91cFR5cGUocXVlcnlJZCwgJycsIG9yZ2FuaXphdGlvbklkLCBncm91cFR5cGUsIHF1ZXJ5UmVsYXRpdmVVcmwpIDogdGhpcy5nZXRTY2hlbWFMaXN0KHF1ZXJ5SWQsICcnLCBvcmdhbml6YXRpb25JZCwgcXVlcnlSZWxhdGl2ZVVybCk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0JDEucGlwZShcclxuICAgICAgICAgICAgbWFwKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+Wc3ByZWFk5qih54mIXHJcbiAgICogQHBhcmFtIGlkIOaWueahiElEXHJcbiAgICovXHJcbiAgYW5hbHlzaXMoaWQ6IHN0cmluZywgcXVlcnlJZDogc3RyaW5nLCBkeW5hbWljQ29sczogYW55LCBxdWVyeVJlbGF0aXZlVXJsOiBhbnksIHNjaGVtZT86IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCByZXN0VXJpID0gdGhpcy5ob3N0ICsgdGhpcy51cmk7XHJcbiAgICBsZXQgcGFyYW0gPSB7fTtcclxuICAgIGlmIChpZCAhPT0gJzEnKSB7XHJcbiAgICAgIGlmIChkeW5hbWljQ29scyAmJiBkeW5hbWljQ29scy5sZW5ndGgpIHtcclxuICAgICAgICBwYXJhbSA9IHsgaWQsIGR5bmFtaWNDb2xzOiBKU09OLnN0cmluZ2lmeShkeW5hbWljQ29scyksIHNjaGVtYTogIXNjaGVtZSA/ICcnIDogc2NoZW1lIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdFNlcnZpY2UucG9zdChyZXN0VXJpICsgJ2dldHNwcmVhZHRlbXBsYXRld2l0aGR5bmFtaWNjb2x1bW4nLCBwYXJhbSwge30sIHRoaXMuY3JlYXRlSGVhZGVyU2Vzc2lvbklkKCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChzY2hlbWUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnJlc3RTZXJ2aWNlLnBvc3QocmVzdFVyaSArICdnZXRzcHJlYWR0ZW1wbGF0ZWJ5aWQnLCB7IGlkOiBpZCwgc2NoZW1hOiAhc2NoZW1lID8gJycgOiBzY2hlbWUgfSwge30sIHRoaXMuY3JlYXRlSGVhZGVyU2Vzc2lvbklkKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZXN0U2VydmljZS5nZXQocmVzdFVyaSArICdnZXRzcHJlYWR0ZW1wbGF0ZScsIHsgaWQgfSwgdGhpcy5jcmVhdGVIZWFkZXJTZXNzaW9uSWQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkeW5hbWljQ29scyA9IGR5bmFtaWNDb2xzICYmIGR5bmFtaWNDb2xzLmxlbmd0aCA/IGR5bmFtaWNDb2xzIDogW107XHJcbiAgICAgIHBhcmFtID0geyBkeW5hbWljQ29sczogSlNPTi5zdHJpbmdpZnkoZHluYW1pY0NvbHMpLCBzY2hlbWE6ICFzY2hlbWUgPyAnJyA6IHNjaGVtZSB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5yZXN0U2VydmljZS5wb3N0KHJlc3RVcmkgKyAnZ2V0aW5pdHNwcmVhZHRlbXBsYXRlJywgcGFyYW0sIHt9LCB0aGlzLmNyZWF0ZUhlYWRlclNlc3Npb25JZCgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldE9wZXJhdGlvbihvcGVyYXRvcnM/OiBhbnkpIHtcclxuICAgIGNvbnN0IHJlc3RVcmkgPSB0aGlzLmhvc3QgKyB0aGlzLnVyaTtcclxuICAgIGxldCBwYXJhbSA9IHt9O1xyXG4gICAgaWYgKCFvcGVyYXRvcnMgfHwgIW9wZXJhdG9ycy5sZW5ndGgpIHtcclxuICAgICAgcGFyYW0gPSB7XHJcbiAgICAgICAgb3BlcmF0b3JzOiBbJzA1MjAyMjg0LWRmYzQtMTQ5Yy04NTNlLWNmZDM1YjRhMDJiYicsICc2NTNmZTI0Yi1kNzdmLWQ4YjAtNzFjNS01ZTNkNTYxZTMzY2EnLCAnZDY4MzJkOTYtZTZmMy0xMTRlLTFkNTMtZjllNjM2NTQ4ZWI5JywgJ2NkNmMyMDU3LTVhZDYtOTBkZC01NGFjLTc3MWMxOTI1NjNlOCddXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYXJhbSA9IHtcclxuICAgICAgICBvcGVyYXRvcnM6IG9wZXJhdG9yc1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMucmVzdFNlcnZpY2UucG9zdChyZXN0VXJpICsgJ2lzcHJpbmNpcGFsaGFzb3AnLCBwYXJhbSwge30sIHRoaXMuY3JlYXRlSGVhZGVyU2Vzc2lvbklkKCkpO1xyXG4gIH1cclxuXHJcbiAgdmFsaWRhdGVPcGVyYXRpb24odHlwZTogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zWydRZHBNb2RpZnlQdWJsaWNTY2hlbWEnXSA9PT0gdHJ1ZSAmJiAodHlwZSA9PT0gMCB8fCB0eXBlID09PSAnMCcpO1xyXG4gIH1cclxuXHJcbiAgLy8g6K6+572u5YiX5L+h5oGvXHJcbiAgc2V0Q29sSW5mbyhkeW5hbWljQ29scykge1xyXG4gICAgbGV0IGNvbEluZm8gPSBbXTtcclxuICAgIGlmIChkeW5hbWljQ29scyAmJiBkeW5hbWljQ29scy5sZW5ndGgpIHtcclxuICAgICAgY29sSW5mbyA9IGR5bmFtaWNDb2xzO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb2xMaXN0Lm5leHQoY29sSW5mbyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUhlYWRlclNlc3Npb25JZCgpIHtcclxuICAgIHJldHVybiBSdGZTZXJ2aWNlcy5jcmVhdGVIZWFkZXJTZXNzaW9uSWQodGhpcy5zZXNzaW9uU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuozlvIDkurrlkZjpooTliLbnmoTmoLzlvI/mlrnmoYjlj6/ku6XmmL7npLrliqjmgIHliJfkv6Hmga9cclxuICAgKi9cclxuICBvcGVyYXRlRHluYW1pY0NvbHNGb3JTY2hlbWEoZWxlbWVudDogYW55LCBncm91cFR5cGU6IGFueSwgc2NoZW1hSWQ/OiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmR5bmFtaWNDb2xzICYmIHRoaXMuZHluYW1pY0NvbHNbZ3JvdXBUeXBlXSkge1xyXG4gICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmlkICYmIChlbGVtZW50LmlzUHJvdGVjdGVkID09PSAxIHx8IGVsZW1lbnQuaXNQcm90ZWN0ZWQgPT09ICcxJyB8fCBzY2hlbWFJZCA9PT0gMSkpIHtcclxuICAgICAgICBjb25zdCBkeW5hbWljQ29sdW1ucyA9IHNjaGVtYUlkID09PSAxID8gdGhpcy5keW5hbWljQ29sc1tncm91cFR5cGVdIDogdGhpcy5keW5hbWljQ29sc1tlbGVtZW50LmlkXTtcclxuICAgICAgICBjb25zdCBkeUNvbHMgPSB0aGlzLmNyZWF0ZUNvbHVtbnMoZHluYW1pY0NvbHVtbnMsIGVsZW1lbnQuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpO1xyXG4gICAgICAgIGVsZW1lbnQuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgPSBkeUNvbHM7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5ZCI5bm25Yqo5oCB5YiXXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVDb2x1bW5zKGNvbExpc3Q6IGFueSwgY29sdW1uczogYW55KSB7XHJcbiAgICBjb25zdCBjb2x1bW5MaXN0ID0gW107XHJcbiAgICBpZiAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICBjb2x1bW5MaXN0LnB1c2goLi4uSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb2x1bW5zKSkpO1xyXG4gICAgICBpZiAoY29sTGlzdCAmJiBjb2xMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgY29sTGlzdC5sZW5ndGg7IGNvbCsrKSB7XHJcbiAgICAgICAgICBsZXQgYyA9IHRoaXMuZ2V0Q29sdW1uKGNvbHVtbkxpc3QsIGNvbExpc3RbY29sXSk7XHJcbiAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWN1cnNpdmVDb21wYXJlQ29sdW1uKGNbJ2NoaWxkTGlzdCddLCBjb2xMaXN0W2NvbF1bJ2NoaWxkTGlzdCddKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICBjID0gY29sTGlzdFtjb2xdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gY29sdW1uTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBjb2x1bW5MaXN0LnB1c2goY29sTGlzdFtjb2xdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb2x1bW5MaXN0LnNwbGljZShpbmRleCwgMCwgY29sTGlzdFtjb2xdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGMgJiYgaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmR5bmFtaWNDb2xJbmRleCArIDE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGNvbExpc3QgJiYgY29sTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29sdW1uTGlzdC5wdXNoKC4uLmNvbExpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29sdW1uTGlzdDtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRDb2x1bW4oY29sdW1uczogYW55LCBjb2w6IGFueSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcbiAgICB0aGlzLmR5bmFtaWNDb2xJbmRleCA9IDA7XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgZm9yIChsZXQgaXRlbSA9IDA7IGl0ZW0gPCBjb2x1bW5zLmxlbmd0aDsgaXRlbSsrKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRoaXMucmVjdXJzaXZlR2V0Q29sdW1uKGNvbCwgY29sdW1uc1tpdGVtXSwgbnVsbCk7XHJcbiAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIHByaXZhdGUgcmVjdXJzaXZlR2V0Q29sdW1uKGNvbDogYW55LCBwYXJlbnRDb2x1bW46IGFueSwgY2hpbGRMaXN0OiBhbnkpIHtcclxuICAgIGlmIChwYXJlbnRDb2x1bW4pIHtcclxuICAgICAgaWYgKHBhcmVudENvbHVtblsnYmluZEZpZWxkJ10gPT09IGNvbFsnYmluZEZpZWxkJ10pIHtcclxuICAgICAgICByZXR1cm4gcGFyZW50Q29sdW1uO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYXJlbnRDb2x1bW5bJ2NoaWxkTGlzdCddICYmIHBhcmVudENvbHVtblsnY2hpbGRMaXN0J10ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlY3Vyc2l2ZUdldENvbHVtbihjb2wsIG51bGwsIHBhcmVudENvbHVtblsnY2hpbGRMaXN0J10pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZHluYW1pY0NvbEluZGV4ICs9IDE7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGl0ZW0gPSAwOyBpdGVtIDwgY2hpbGRMaXN0Lmxlbmd0aDsgaXRlbSsrKSB7XHJcbiAgICAgICAgaWYgKGNoaWxkTGlzdFtpdGVtXVsnYmluZEZpZWxkJ10gPT09IGNvbFsnYmluZEZpZWxkJ10pIHtcclxuICAgICAgICAgIHJldHVybiBjaGlsZExpc3RbaXRlbV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGlsZExpc3RbaXRlbV1bJ2NoaWxkTGlzdCddICYmIGNoaWxkTGlzdFtpdGVtXVsnY2hpbGRMaXN0J10ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVjdXJzaXZlR2V0Q29sdW1uKGNvbCwgbnVsbCwgY2hpbGRMaXN0W2l0ZW1dWydjaGlsZExpc3QnXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZHluYW1pY0NvbEluZGV4ICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgcHJpdmF0ZSByZWN1cnNpdmVDb21wYXJlQ29sdW1uKGZpcnN0Q2hpbGRMaXN0OiBhbnksIHNlY29uZENoaWxkTGlzdDogYW55KSB7XHJcbiAgICBpZiAoIWZpcnN0Q2hpbGRMaXN0ICYmICFzZWNvbmRDaGlsZExpc3QpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKCFmaXJzdENoaWxkTGlzdCAmJiBzZWNvbmRDaGlsZExpc3QpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChmaXJzdENoaWxkTGlzdCAmJiAhc2Vjb25kQ2hpbGRMaXN0KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoZmlyc3RDaGlsZExpc3QgJiYgc2Vjb25kQ2hpbGRMaXN0KSB7XHJcbiAgICAgIGlmIChmaXJzdENoaWxkTGlzdC5sZW5ndGggIT09IHNlY29uZENoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGZpcnN0Q2hpbGRMaXN0Lmxlbmd0aCA9PT0gMCAmJiBzZWNvbmRDaGlsZExpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZpcnN0Q2hpbGRMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpcnN0Q2hpbGRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdENoaWxkTGlzdFtpXS5iaW5kRmllbGQgIT09IHNlY29uZENoaWxkTGlzdFtpXS5iaW5kRmllbGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjdXJzaXZlQ29tcGFyZUNvbHVtbihmaXJzdENoaWxkTGlzdFtpXS5jaGlsZExpc3QsIHNlY29uZENoaWxkTGlzdFtpXS5jaGlsZExpc3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iXX0=