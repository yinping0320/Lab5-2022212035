/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Subject } from "rxjs";
export class RtfServices {
    /**
     * @param {?=} sessionService
     * @return {?}
     */
    static createHeaderSessionId(sessionService) {
        /** @type {?} */
        const options = {
            headers: {
                'Content-Type': 'application/json'
            }
        };
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session && gspframeworkService.rtf.session.getFormToken()) {
                options.headers['X-CAF-Runtime-CommonVariable'] = gspframeworkService.rtf.session.getFormToken();
            }
            else if (sessionService && sessionService.getCurrentSeesionId()) {
                options.headers['X-CAF-Runtime-CommonVariable'] = sessionService.getCurrentSeesionId();
            }
            else if (sessionService && sessionService.getUserSessionId()) {
                options.headers['SessionId'] = sessionService.getUserSessionId();
            }
            else if (localStorage.getItem('sessionId')) {
                options.headers['SessionId'] = localStorage.getItem('sessionId');
            }
        }
        catch (e) { }
        return options;
    }
    /**
     * @param {?=} sessionService
     * @return {?}
     */
    static getSessionId(sessionService) {
        /** @type {?} */
        let sessionId;
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session && gspframeworkService.rtf.session.getFormToken()) {
                sessionId = gspframeworkService.rtf.session.getFormToken();
            }
            else if (sessionService && sessionService.getCurrentSeesionId()) {
                sessionId = sessionService.getCurrentSeesionId();
            }
            else if (sessionService && sessionService.getUserSessionId()) {
                sessionId = sessionService.getUserSessionId();
            }
            else if (localStorage.getItem('sessionId')) {
                sessionId = localStorage.getItem('sessionId');
            }
        }
        catch (e) { }
        return sessionId;
    }
    /**
     * @param {?=} queryId
     * @return {?}
     */
    static getTabId(queryId) {
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session) {
                /** @type {?} */
                const tab = gspframeworkService.rtf.session.getCommonVariable();
                if (gspframeworkService.rtf.extendMethod && gspframeworkService.rtf.extendMethod.getExtObj && gspframeworkService.rtf.extendMethod.getExtObj() && gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID) {
                    /** @type {?} */
                    const uuid = gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() ? gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() : '';
                    return tab.tabId + uuid;
                }
                else {
                    return tab.tabId;
                }
            }
        }
        catch (e) {
            return queryId;
        }
    }
    /**
     * @return {?}
     */
    static getInSuiteFrmUUID() {
        try {
            if (gspframeworkService.rtf.extendMethod && gspframeworkService.rtf.extendMethod.getExtObj && gspframeworkService.rtf.extendMethod.getExtObj() && gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID) {
                /** @type {?} */
                const uuid = gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() ? gspframeworkService.rtf.extendMethod.getExtObj().iGIXFrmUUID() : '';
                return uuid;
            }
            else {
                return "";
            }
        }
        catch (e) {
            return "";
        }
    }
    /**
     * @return {?}
     */
    static getCommonVariable() {
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.session) {
                /** @type {?} */
                const tab = gspframeworkService.rtf.session.getCommonVariable();
                return tab;
            }
        }
        catch (e) {
            return null;
        }
    }
    /**
     * @param {?} key
     * @return {?}
     */
    static getMenuParameter(key) {
        try {
            /** @type {?} */
            const funcId = RtfServices.getCommonVariable().funcId;
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.func) {
                /** @type {?} */
                let param = null;
                /** @type {?} */
                const callback = (/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) {
                    // 回到函数得到res 即参数
                    param = res;
                });
                gspframeworkService.rtf.func.getMenuParams(funcId, callback);
                if (param) {
                    return param.get(key);
                }
            }
            return null;
        }
        catch (e) {
            return null;
        }
    }
    /**
     * @param {?} tabId
     * @return {?}
     */
    static getMenuSwitchControlParameter(tabId) {
        return {
            menuSwitchControl: {
                key: tabId,
                value: new Subject(),
                changeEnable: false
            }
        };
    }
    /**
     * @return {?}
     */
    static getMenuSwitchControlEvent() {
        try {
            /** @type {?} */
            const tabId = RtfServices.getTabId();
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.frmEvent) {
                /** @type {?} */
                let param = null;
                /** @type {?} */
                const option = RtfServices.getCommonVariable();
                /** @type {?} */
                const callback = (/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) {
                    // 回到函数得到res 即参数
                    param = res;
                });
                gspframeworkService.rtf.frmEvent.eventListener(tabId, callback, option);
                if (param && param.hasOwnProperty('menuSwitchControl') && param['menuSwitchControl'].key === tabId) {
                    return param['menuSwitchControl'].value;
                }
                return null;
            }
        }
        catch (e) {
            return null;
        }
    }
    /**
     * 获取功能ID
     * @param {?} option `{appId：'应用ID', appEntrance: '应用入口', appType: '类型：app, menu', funcId: '功能ID', tabId: '标签页ID'}`
     * @return {?}
     */
    static getFuncId(option) {
        return RtfServices.getNewPageIdFunc(option);
    }
    /**
     * @return {?}
     */
    static getFuncName() {
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.tabs) {
                /** @type {?} */
                const func = gspframeworkService.rtf.tabs.getAll().find((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x.id == gspframeworkService.rtf.tabs.getActiveTab().funcId));
                return func.FuncName;
            }
            else {
                return '';
            }
        }
        catch (e) {
            return '';
        }
    }
    /**
     * @private
     * @param {?} option
     * @return {?}
     */
    static getFuncIdOlde(option) {
        /** @type {?} */
        let funcId;
        if (option.appType.toLowerCase() === 'app') {
            funcId = RtfServices.newPageIdApp(option.appId, option.appEntrance, option.tabId);
        }
        else {
            funcId = RtfServices.newPageIdFunc(option.funcId, option.tabId);
        }
        return funcId;
    }
    /**
     * @private
     * @param {?} option
     * @return {?}
     */
    static getNewPageIdFunc(option) {
        try {
            if (gspframeworkService && gspframeworkService.rtf && gspframeworkService.rtf.func) {
                return gspframeworkService.rtf.func.newPageId(option);
            }
            else {
                return RtfServices.getFuncIdOlde(option);
            }
        }
        catch (e) {
            return RtfServices.getFuncIdOlde(option);
        }
    }
    /**
     * @private
     * @param {?} funcId
     * @param {?} tabId
     * @return {?}
     */
    static newPageIdFunc(funcId, tabId) {
        return tabId ? `${funcId}_${tabId}` : funcId;
    }
    /**
     * @private
     * @param {?} appId
     * @param {?} appEntrance
     * @return {?}
     */
    static mergeAppId(appId, appEntrance) {
        return `${appId}_${appEntrance}`;
    }
    /**
     * @private
     * @param {?} appId
     * @param {?} appEntrance
     * @param {?} tabId
     * @return {?}
     */
    static newPageIdApp(appId, appEntrance, tabId) {
        return tabId ? `${RtfServices.mergeAppId(appId, appEntrance)}_${tabId}` : RtfServices.mergeAppId(appId, appEntrance);
    }
}
RtfServices.uuid = "";
RtfServices.isInSuite = false;
if (false) {
    /** @type {?} */
    RtfServices.uuid;
    /** @type {?} */
    RtfServices.isInSuite;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnRmc2VydmljZXMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcWRwL2NvbW1vbi8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlL3J0ZnNlcnZpY2VzL3J0ZnNlcnZpY2VzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSS9CLE1BQU0sT0FBTyxXQUFXOzs7OztJQUl0QixNQUFNLENBQUMscUJBQXFCLENBQUMsY0FBb0I7O2NBQ3pDLE9BQU8sR0FBRztZQUNkLE9BQU8sRUFBRTtnQkFDUCxjQUFjLEVBQUUsa0JBQWtCO2FBQ25DO1NBQ0Y7UUFDRCxJQUFJO1lBQ0YsSUFBSSxtQkFBbUIsSUFBSSxtQkFBbUIsQ0FBQyxHQUFHLElBQUksbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sSUFBSSxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFO2dCQUN2SSxPQUFPLENBQUMsT0FBTyxDQUFDLDhCQUE4QixDQUFDLEdBQUcsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQzthQUNsRztpQkFBTSxJQUFJLGNBQWMsSUFBSSxjQUFjLENBQUMsbUJBQW1CLEVBQUUsRUFBRTtnQkFDakUsT0FBTyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2FBQ3hGO2lCQUFNLElBQUksY0FBYyxJQUFJLGNBQWMsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO2dCQUM5RCxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ2xFO2lCQUFNLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRTtnQkFDNUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFD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QUFNLENBQUMsQ0FBQzthQUN2RDtpQkFBTTtnQkFDTCxPQUFPLFdBQVcsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDMUM7U0FDRjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsT0FBTyxXQUFXLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzFDO0lBQ0gsQ0FBQzs7Ozs7OztJQUVPLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLEtBQUs7UUFDeEMsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDL0MsQ0FBQzs7Ozs7OztJQUVPLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBVSxFQUFFLFdBQWdCO1FBQ3BELE9BQU8sR0FBRyxLQUFLLElBQUksV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FBQzs7Ozs7Ozs7SUFFTyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQVUsRUFBRSxXQUFnQixFQUFFLEtBQVU7UUFDbEUsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ3ZILENBQUM7O0FBeExNLGdCQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ1YscUJBQVMsR0FBRyxLQUFLLENBQUM7OztJQUR6QixpQkFBaUI7O0lBQ2pCLHNCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5cclxuZGVjbGFyZSB2YXIgZ3NwZnJhbWV3b3JrU2VydmljZTogYW55O1xyXG5cclxuZXhwb3J0IGNsYXNzIFJ0ZlNlcnZpY2VzIHtcclxuICBzdGF0aWMgdXVpZCA9IFwiXCI7XHJcbiAgc3RhdGljIGlzSW5TdWl0ZSA9IGZhbHNlO1xyXG5cclxuICBzdGF0aWMgY3JlYXRlSGVhZGVyU2Vzc2lvbklkKHNlc3Npb25TZXJ2aWNlPzogYW55KSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGdzcGZyYW1ld29ya1NlcnZpY2UgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuc2Vzc2lvbiAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldEZvcm1Ub2tlbigpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydYLUNBRi1SdW50aW1lLUNvbW1vblZhcmlhYmxlJ10gPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldEZvcm1Ub2tlbigpO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlc3Npb25TZXJ2aWNlICYmIHNlc3Npb25TZXJ2aWNlLmdldEN1cnJlbnRTZWVzaW9uSWQoKSkge1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1snWC1DQUYtUnVudGltZS1Db21tb25WYXJpYWJsZSddID0gc2Vzc2lvblNlcnZpY2UuZ2V0Q3VycmVudFNlZXNpb25JZCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlc3Npb25TZXJ2aWNlICYmIHNlc3Npb25TZXJ2aWNlLmdldFVzZXJTZXNzaW9uSWQoKSkge1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1snU2Vzc2lvbklkJ10gPSBzZXNzaW9uU2VydmljZS5nZXRVc2VyU2Vzc2lvbklkKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydTZXNzaW9uSWQnXSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uSWQnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTZXNzaW9uSWQoc2Vzc2lvblNlcnZpY2U/OiBhbnkpIHtcclxuICAgIGxldCBzZXNzaW9uSWQ7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoZ3NwZnJhbWV3b3JrU2VydmljZSAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0ZiAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLnNlc3Npb24uZ2V0Rm9ybVRva2VuKCkpIHtcclxuICAgICAgICBzZXNzaW9uSWQgPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldEZvcm1Ub2tlbigpO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlc3Npb25TZXJ2aWNlICYmIHNlc3Npb25TZXJ2aWNlLmdldEN1cnJlbnRTZWVzaW9uSWQoKSkge1xyXG4gICAgICAgIHNlc3Npb25JZCA9IHNlc3Npb25TZXJ2aWNlLmdldEN1cnJlbnRTZWVzaW9uSWQoKTtcclxuICAgICAgfSBlbHNlIGlmIChzZXNzaW9uU2VydmljZSAmJiBzZXNzaW9uU2VydmljZS5nZXRVc2VyU2Vzc2lvbklkKCkpIHtcclxuICAgICAgICBzZXNzaW9uSWQgPSBzZXNzaW9uU2VydmljZS5nZXRVc2VyU2Vzc2lvbklkKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpKSB7XHJcbiAgICAgICAgc2Vzc2lvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25JZCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBzZXNzaW9uSWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0VGFiSWQocXVlcnlJZD86IGFueSkge1xyXG4gICAgdHJ5IHtcclxuXHJcbiAgICAgIGlmIChnc3BmcmFtZXdvcmtTZXJ2aWNlICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLnNlc3Npb24pIHtcclxuICAgICAgICBjb25zdCB0YWIgPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldENvbW1vblZhcmlhYmxlKCk7XHJcbiAgICAgICAgaWYgKGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZCAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5leHRlbmRNZXRob2QuZ2V0RXh0T2JqICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZC5nZXRFeHRPYmooKSAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5leHRlbmRNZXRob2QuZ2V0RXh0T2JqKCkuaUdJWEZybVVVSUQpIHtcclxuICAgICAgICAgIGNvbnN0IHV1aWQgPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5leHRlbmRNZXRob2QuZ2V0RXh0T2JqKCkuaUdJWEZybVVVSUQoKSA/IGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZC5nZXRFeHRPYmooKS5pR0lYRnJtVVVJRCgpIDogJyc7XHJcbiAgICAgICAgICByZXR1cm4gdGFiLnRhYklkICsgdXVpZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRhYi50YWJJZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIHF1ZXJ5SWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0SW5TdWl0ZUZybVVVSUQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuZXh0ZW5kTWV0aG9kICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZC5nZXRFeHRPYmogJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuZXh0ZW5kTWV0aG9kLmdldEV4dE9iaigpICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZC5nZXRFeHRPYmooKS5pR0lYRnJtVVVJRCkge1xyXG4gICAgICAgIGNvbnN0IHV1aWQgPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5leHRlbmRNZXRob2QuZ2V0RXh0T2JqKCkuaUdJWEZybVVVSUQoKSA/IGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmV4dGVuZE1ldGhvZC5nZXRFeHRPYmooKS5pR0lYRnJtVVVJRCgpIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIHV1aWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q29tbW9uVmFyaWFibGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoZ3NwZnJhbWV3b3JrU2VydmljZSAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0ZiAmJiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uKSB7XHJcbiAgICAgICAgY29uc3QgdGFiID0gZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuc2Vzc2lvbi5nZXRDb21tb25WYXJpYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiB0YWI7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0TWVudVBhcmFtZXRlcihrZXk6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZnVuY0lkID0gUnRmU2VydmljZXMuZ2V0Q29tbW9uVmFyaWFibGUoKS5mdW5jSWQ7XHJcbiAgICAgIGlmIChnc3BmcmFtZXdvcmtTZXJ2aWNlICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmZ1bmMpIHtcclxuICAgICAgICBsZXQgcGFyYW06IE1hcDxhbnksIGFueT4gPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgLy8g5Zue5Yiw5Ye95pWw5b6X5YiwcmVzIOWNs+WPguaVsFxyXG4gICAgICAgICAgcGFyYW0gPSByZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmZ1bmMuZ2V0TWVudVBhcmFtcyhmdW5jSWQsIGNhbGxiYWNrKTtcclxuICAgICAgICBpZiAocGFyYW0pIHtcclxuICAgICAgICAgIHJldHVybiBwYXJhbS5nZXQoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE1lbnVTd2l0Y2hDb250cm9sUGFyYW1ldGVyKHRhYklkOiBhbnkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lbnVTd2l0Y2hDb250cm9sOiB7XHJcbiAgICAgICAga2V5OiB0YWJJZCxcclxuICAgICAgICB2YWx1ZTogbmV3IFN1YmplY3Q8YW55PigpLFxyXG4gICAgICAgIGNoYW5nZUVuYWJsZTogZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE1lbnVTd2l0Y2hDb250cm9sRXZlbnQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0YWJJZCA9IFJ0ZlNlcnZpY2VzLmdldFRhYklkKCk7XHJcbiAgICAgIGlmIChnc3BmcmFtZXdvcmtTZXJ2aWNlICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmICYmIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmZybUV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHBhcmFtID0gbnVsbDtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBSdGZTZXJ2aWNlcy5nZXRDb21tb25WYXJpYWJsZSgpO1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgLy8g5Zue5Yiw5Ye95pWw5b6X5YiwcmVzIOWNs+WPguaVsFxyXG4gICAgICAgICAgcGFyYW0gPSByZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmZybUV2ZW50LmV2ZW50TGlzdGVuZXIodGFiSWQsIGNhbGxiYWNrLCBvcHRpb24pO1xyXG4gICAgICAgIGlmIChwYXJhbSAmJiBwYXJhbS5oYXNPd25Qcm9wZXJ0eSgnbWVudVN3aXRjaENvbnRyb2wnKSAmJiBwYXJhbVsnbWVudVN3aXRjaENvbnRyb2wnXS5rZXkgPT09IHRhYklkKSB7XHJcbiAgICAgICAgICByZXR1cm4gcGFyYW1bJ21lbnVTd2l0Y2hDb250cm9sJ10udmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Yqf6IO9SURcclxuICAgKiBAcGFyYW0gb3B0aW9uIGB7YXBwSWTvvJon5bqU55SoSUQnLCBhcHBFbnRyYW5jZTogJ+W6lOeUqOWFpeWPoycsIGFwcFR5cGU6ICfnsbvlnovvvJphcHAsIG1lbnUnLCBmdW5jSWQ6ICflip/og71JRCcsIHRhYklkOiAn5qCH562+6aG1SUQnfWBcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RnVuY0lkKG9wdGlvbjogYW55KSB7XHJcbiAgICByZXR1cm4gUnRmU2VydmljZXMuZ2V0TmV3UGFnZUlkRnVuYyhvcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEZ1bmNOYW1lKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGdzcGZyYW1ld29ya1NlcnZpY2UgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYudGFicykge1xyXG4gICAgICAgIGNvbnN0IGZ1bmMgPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi50YWJzLmdldEFsbCgpLmZpbmQoeCA9PiB4LmlkID09IGdzcGZyYW1ld29ya1NlcnZpY2UucnRmLnRhYnMuZ2V0QWN0aXZlVGFiKCkuZnVuY0lkKTtcclxuICAgICAgICByZXR1cm4gZnVuYy5GdW5jTmFtZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0RnVuY0lkT2xkZShvcHRpb246IGFueSkge1xyXG4gICAgbGV0IGZ1bmNJZDtcclxuICAgIGlmIChvcHRpb24uYXBwVHlwZS50b0xvd2VyQ2FzZSgpID09PSAnYXBwJykge1xyXG4gICAgICBmdW5jSWQgPSBSdGZTZXJ2aWNlcy5uZXdQYWdlSWRBcHAob3B0aW9uLmFwcElkLCBvcHRpb24uYXBwRW50cmFuY2UsIG9wdGlvbi50YWJJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmdW5jSWQgPSBSdGZTZXJ2aWNlcy5uZXdQYWdlSWRGdW5jKG9wdGlvbi5mdW5jSWQsIG9wdGlvbi50YWJJZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY0lkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0TmV3UGFnZUlkRnVuYyhvcHRpb246IGFueSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGdzcGZyYW1ld29ya1NlcnZpY2UgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYgJiYgZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuZnVuYykge1xyXG4gICAgICAgIHJldHVybiBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5mdW5jLm5ld1BhZ2VJZChvcHRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBSdGZTZXJ2aWNlcy5nZXRGdW5jSWRPbGRlKG9wdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgcmV0dXJuIFJ0ZlNlcnZpY2VzLmdldEZ1bmNJZE9sZGUob3B0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIG5ld1BhZ2VJZEZ1bmMoZnVuY0lkLCB0YWJJZCkge1xyXG4gICAgcmV0dXJuIHRhYklkID8gYCR7ZnVuY0lkfV8ke3RhYklkfWAgOiBmdW5jSWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBtZXJnZUFwcElkKGFwcElkOiBhbnksIGFwcEVudHJhbmNlOiBhbnkpIHtcclxuICAgIHJldHVybiBgJHthcHBJZH1fJHthcHBFbnRyYW5jZX1gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgbmV3UGFnZUlkQXBwKGFwcElkOiBhbnksIGFwcEVudHJhbmNlOiBhbnksIHRhYklkOiBhbnkpIHtcclxuICAgIHJldHVybiB0YWJJZCA/IGAke1J0ZlNlcnZpY2VzLm1lcmdlQXBwSWQoYXBwSWQsIGFwcEVudHJhbmNlKX1fJHt0YWJJZH1gIDogUnRmU2VydmljZXMubWVyZ2VBcHBJZChhcHBJZCwgYXBwRW50cmFuY2UpO1xyXG4gIH1cclxufVxyXG4iXX0=