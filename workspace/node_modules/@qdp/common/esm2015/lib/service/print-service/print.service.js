/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { OutputType, FileType, PrintType } from '@gsp-svc/cloudprint';
/**
 * 打印服务
 * \@Scope FrameComponent
 */
export class IntegrationPrintService {
    /**
     * 构造函数
     * @param {?} _printService
     */
    constructor(_printService) {
        this.printService = _printService;
    }
    /**
     * 打印单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} bizBillId 业务单据标识
     * @return {?}
     */
    printSingle(beMetaId, bizBillId) {
        return this.printArray(beMetaId, [bizBillId]);
    }
    /**
     * 打印单据（通过id或ids）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @return {?}
     */
    printByIds(beMetaId, ids) {
        /** @type {?} */
        const dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item));
        return this.printArray(beMetaId, dataIds);
    }
    /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?=} dim1 维度1值
     * @param {?=} dim2 维度2值
     * @param {?=} billCategoryId 单据类型Id
     * @return {?}
     */
    printByIdsWithDimension(beMetaId, ids, dim1, dim2, billCategoryId) {
        /** @type {?} */
        const dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item));
        return this.printArray(beMetaId, dataIds, dim1, dim2, billCategoryId);
    }
    /**
     * 打印单据（带维度）
     * @param {?} beMetaId be元数据Id
     * @param {?} ids 单据id或ids
     * @param {?} dim1 维度1值
     * @param {?} dim2 维度2值
     * @param {?} queryType
     * @param {?} queryServiceId
     * @param {?} queryParam
     * @return {?}
     */
    printWithDimensionCustomDataSource(beMetaId, ids, dim1, dim2, queryType, queryServiceId, queryParam) {
        /** @type {?} */
        const dataIds = ids.split(',').filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item));
        return this.printArray(beMetaId, dataIds, dim1, dim2, undefined, queryType, queryServiceId, queryParam);
    }
    /**
     * 打印多个单据
     * @param {?} beMetaId BE元数据标识
     * @param {?} dataIds 业务单据标识数组
     * @param {?=} dim1 维度1
     * @param {?=} dim2 维度2
     * @param {?=} billCategoryId 业务单据类型Id
     * @param {?=} queryType
     * @param {?=} queryServiceId
     * @param {?=} queryParam
     * @return {?}
     */
    printArray(beMetaId, dataIds, dim1, dim2, billCategoryId, queryType, queryServiceId, queryParam) {
        /** @type {?} */
        const sourceOptions = this.buildSourceOptions({
            dataIds: dataIds,
            sourceId: beMetaId
        });
        /** @type {?} */
        const outputOptions = this.buildOutputOptions();
        if (dim1) {
            sourceOptions.FirstDimensionVal = dim1;
        }
        if (dim2) {
            sourceOptions.SecondDimensionVal = dim2;
        }
        if (typeof billCategoryId !== 'undefined') {
            sourceOptions.billCategoryId = billCategoryId;
        }
        if (queryType) {
            sourceOptions.queryType = queryType;
        }
        if (queryServiceId) {
            sourceOptions.queryServiceId = queryServiceId;
        }
        if (queryParam) {
            sourceOptions.queryParam = queryParam;
        }
        return this.printService.outputBEData(sourceOptions, outputOptions, 'tab');
    }
    /**
     * 构造SourceOptions
     * @private
     * @param {?} options options
     * @return {?}
     */
    buildSourceOptions(options) {
        /** @type {?} */
        const so = {
            DataIds: options && options.dataIds || undefined,
            SourceId: options && options.sourceId || undefined,
            FirstDimensionVal: options && options.dim1 || undefined,
            SecondDimensionVal: options && options.dim2 || undefined,
            RetrieveParam: options && options.retrieveParam || undefined,
            FormatId: options && options.formatId || undefined,
            billCategoryId: options && options.billCategoryId || undefined,
            ServiceUnit: options && options.serviceUnit || undefined,
            currentPage: options && options.currentPage || undefined,
            pageRowCount: options && options.pageRowCount || undefined,
            queryType: options && options.queryType || undefined,
            queryServiceId: options && options.queryServiceId || undefined,
            bizTypeId: options && options.bizTypeId || undefined,
            queryParam: options && options.queryParam || undefined
        };
        return so;
    }
    /**
     * 构造OutputOptions
     * @private
     * @param {?=} options options
     * @return {?}
     */
    buildOutputOptions(options) {
        /** @type {?} */
        const oo = {
            OutputType: options && options.outputType || OutputType.PRINT,
            FileType: options && options.fileType || FileType.Html5,
            Path: options && options.path || undefined,
            DeviceId: options && options.deviceId || undefined,
            printJob: options && options.printJob || undefined,
            printerName: options && options.printerName || undefined,
            printSetting: options && options.printSetting || undefined,
            printType: options && options.printType || PrintType.Form
        };
        return oo;
    }
}
if (false) {
    /** @type {?} */
    IntegrationPrintService.prototype.printService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BxZHAvY29tbW9uLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvcHJpbnQtc2VydmljZS9wcmludC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQW1ELFVBQVUsRUFBRSxRQUFRLEVBQXVCLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7OztBQU01SSxNQUFNLE9BQU8sdUJBQXVCOzs7OztJQUtsQyxZQUFZLGFBQWdDO1FBQzFDLElBQUksQ0FBQyxZQUFZLEdBQUcsYUFBYSxDQUFDO0lBQ3BDLENBQUM7Ozs7Ozs7SUFPTSxXQUFXLENBQUMsUUFBZ0IsRUFBRSxTQUFpQjtRQUNwRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUNoRCxDQUFDOzs7Ozs7O0lBTU0sVUFBVSxDQUFDLFFBQWdCLEVBQUUsR0FBVzs7Y0FDdkMsT0FBTyxHQUFrQixHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU07Ozs7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBQztRQUNsRSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzVDLENBQUM7Ozs7Ozs7Ozs7SUFTTSx1QkFBdUIsQ0FBQyxRQUFnQixFQUFFLEdBQVcsRUFBRSxJQUFhLEVBQUUsSUFBYSxFQUFFLGNBQXVCOztjQUMzRyxPQUFPLEdBQWtCLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTTs7OztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFDO1FBQ2xFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDeEUsQ0FBQzs7Ozs7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RCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Ozs7Ozs7SUFLTyxrQkFBa0IsQ0FBQyxPQUFpQzs7Y0FDcEQsRUFBRSxHQUFrQjtZQUN4QixVQUFVLEVBQUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFVLElBQUksVUFBVSxDQUFDLEtBQUs7WUFDN0QsUUFBUSxFQUFFLE9BQU8sSUFBSSxPQUFPLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxLQUFLO1lBQ3ZELElBQUksRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxTQUFTO1lBQzFDLFFBQVEsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxTQUFTO1lBQ2xELFFBQVEsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxTQUFTO1lBQ2xELFdBQVcsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFdBQVcsSUFBSSxTQUFTO1lBQ3hELFlBQVksRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFlBQVksSUFBSSxTQUFTO1lBQzFELFNBQVMsRUFBRSxPQUFPLElBQUksT0FBTyxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsSUFBSTtTQUMxRDtRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztDQUNGOzs7SUE3SEMsK0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xvdWRwcmludFNlcnZpY2UsIE91dHB1dE9wdGlvbnMsIFNvdXJjZU9wdGlvbnMsIE91dHB1dFR5cGUsIEZpbGVUeXBlLCBTb3VyY2VGaWx0ZXJPcHRpb25zLCBQcmludFR5cGUgfSBmcm9tICdAZ3NwLXN2Yy9jbG91ZHByaW50JztcclxuXHJcbi8qKlxyXG4gKiDmiZPljbDmnI3liqFcclxuICogQFNjb3BlIEZyYW1lQ29tcG9uZW50XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW50ZWdyYXRpb25QcmludFNlcnZpY2Uge1xyXG4gIHByaW50U2VydmljZTogQ2xvdWRwcmludFNlcnZpY2U7XHJcbiAgLyoqXHJcbiAgICog5p6E6YCg5Ye95pWwXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoX3ByaW50U2VydmljZTogQ2xvdWRwcmludFNlcnZpY2UpIHtcclxuICAgIHRoaXMucHJpbnRTZXJ2aWNlID0gX3ByaW50U2VydmljZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsOWNleaNrlxyXG4gICAqIEBwYXJhbSBiZU1ldGFJZCBCReWFg+aVsOaNruagh+ivhlxyXG4gICAqIEBwYXJhbSBiaXpCaWxsSWQg5Lia5Yqh5Y2V5o2u5qCH6K+GXHJcbiAgICovXHJcbiAgcHVibGljIHByaW50U2luZ2xlKGJlTWV0YUlkOiBzdHJpbmcsIGJpekJpbGxJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcmludEFycmF5KGJlTWV0YUlkLCBbYml6QmlsbElkXSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsOWNleaNru+8iOmAmui/h2lk5oiWaWRz77yJXHJcbiAgICogQHBhcmFtIGJlTWV0YUlkIGJl5YWD5pWw5o2uSWRcclxuICAgKiBAcGFyYW0gaWRzIOWNleaNrmlk5oiWaWRzXHJcbiAgICovXHJcbiAgcHVibGljIHByaW50QnlJZHMoYmVNZXRhSWQ6IHN0cmluZywgaWRzOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGFJZHM6IEFycmF5PHN0cmluZz4gPSBpZHMuc3BsaXQoJywnKS5maWx0ZXIoaXRlbSA9PiBpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLnByaW50QXJyYXkoYmVNZXRhSWQsIGRhdGFJZHMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmiZPljbDljZXmja7vvIjluKbnu7TluqbvvIlcclxuICAgKiBAcGFyYW0gYmVNZXRhSWQgYmXlhYPmlbDmja5JZFxyXG4gICAqIEBwYXJhbSBpZHMg5Y2V5o2uaWTmiJZpZHNcclxuICAgKiBAcGFyYW0gZGltMSDnu7TluqYx5YC8XHJcbiAgICogQHBhcmFtIGRpbTIg57u05bqmMuWAvFxyXG4gICAqIEBwYXJhbSBiaWxsQ2F0ZWdvcnlJZCDljZXmja7nsbvlnotJZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmludEJ5SWRzV2l0aERpbWVuc2lvbihiZU1ldGFJZDogc3RyaW5nLCBpZHM6IHN0cmluZywgZGltMT86IHN0cmluZywgZGltMj86IHN0cmluZywgYmlsbENhdGVnb3J5SWQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGFJZHM6IEFycmF5PHN0cmluZz4gPSBpZHMuc3BsaXQoJywnKS5maWx0ZXIoaXRlbSA9PiBpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLnByaW50QXJyYXkoYmVNZXRhSWQsIGRhdGFJZHMsIGRpbTEsIGRpbTIsIGJpbGxDYXRlZ29yeUlkKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5omT5Y2w5Y2V5o2u77yI5bim57u05bqm77yJXHJcbiAgICogQHBhcmFtIGJlTWV0YUlkIGJl5YWD5pWw5o2uSWRcclxuICAgKiBAcGFyYW0gaWRzIOWNleaNrmlk5oiWaWRzXHJcbiAgICogQHBhcmFtIGRpbTEg57u05bqmMeWAvFxyXG4gICAqIEBwYXJhbSBkaW0yIOe7tOW6pjLlgLxcclxuICAgKiBAcGFyYW0gYmlsbENhdGVnb3J5SWQg5Y2V5o2u57G75Z6LSWRcclxuICAgKi9cclxuICAgcHVibGljIHByaW50V2l0aERpbWVuc2lvbkN1c3RvbURhdGFTb3VyY2UoYmVNZXRhSWQ6IHN0cmluZywgaWRzOnN0cmluZywgZGltMTogc3RyaW5nLCBkaW0yOiBzdHJpbmcsIHF1ZXJ5VHlwZTogc3RyaW5nLCBxdWVyeVNlcnZpY2VJZDogc3RyaW5nLCBxdWVyeVBhcmFtOiBhbnkpIHtcclxuICAgIGNvbnN0IGRhdGFJZHM6IEFycmF5PHN0cmluZz4gPSBpZHMuc3BsaXQoJywnKS5maWx0ZXIoaXRlbSA9PiBpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLnByaW50QXJyYXkoYmVNZXRhSWQsIGRhdGFJZHMsIGRpbTEsIGRpbTIsIHVuZGVmaW5lZCwgcXVlcnlUeXBlLCBxdWVyeVNlcnZpY2VJZCwgcXVlcnlQYXJhbSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsOWkmuS4quWNleaNrlxyXG4gICAqIEBwYXJhbSBiZU1ldGFJZCBCReWFg+aVsOaNruagh+ivhlxyXG4gICAqIEBwYXJhbSBkYXRhSWRzIOS4muWKoeWNleaNruagh+ivhuaVsOe7hFxyXG4gICAqIEBwYXJhbSBkaW0xIOe7tOW6pjFcclxuICAgKiBAcGFyYW0gZGltMiDnu7TluqYyXHJcbiAgICogQHBhcmFtIGJpbGxDYXRlZ29yeUlkIOS4muWKoeWNleaNruexu+Wei0lkXHJcbiAgICovXHJcbiAgcHVibGljIHByaW50QXJyYXkoYmVNZXRhSWQ6IHN0cmluZywgZGF0YUlkczogc3RyaW5nW10sIGRpbTE/OiBhbnksIGRpbTI/OiBhbnksIGJpbGxDYXRlZ29yeUlkPzogc3RyaW5nLCBxdWVyeVR5cGU/OiBzdHJpbmcsIHF1ZXJ5U2VydmljZUlkPzogc3RyaW5nLCBxdWVyeVBhcmFtPzogYW55KSB7XHJcbiAgICBjb25zdCBzb3VyY2VPcHRpb25zOiBhbnkgPSB0aGlzLmJ1aWxkU291cmNlT3B0aW9ucyh7XHJcbiAgICAgIGRhdGFJZHM6IGRhdGFJZHMsXHJcbiAgICAgIHNvdXJjZUlkOiBiZU1ldGFJZFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgb3V0cHV0T3B0aW9uczogT3V0cHV0T3B0aW9ucyA9IHRoaXMuYnVpbGRPdXRwdXRPcHRpb25zKCk7XHJcblxyXG4gICAgaWYgKGRpbTEpIHtcclxuICAgICAgc291cmNlT3B0aW9ucy5GaXJzdERpbWVuc2lvblZhbCA9IGRpbTE7XHJcbiAgICB9XHJcbiAgICBpZiAoZGltMikge1xyXG4gICAgICBzb3VyY2VPcHRpb25zLlNlY29uZERpbWVuc2lvblZhbCA9IGRpbTI7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGJpbGxDYXRlZ29yeUlkICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBzb3VyY2VPcHRpb25zLmJpbGxDYXRlZ29yeUlkID0gYmlsbENhdGVnb3J5SWQ7XHJcbiAgICB9XHJcbiAgICBpZiAocXVlcnlUeXBlKSB7XHJcbiAgICAgIHNvdXJjZU9wdGlvbnMucXVlcnlUeXBlID0gcXVlcnlUeXBlO1xyXG4gICAgfVxyXG4gICAgaWYgKHF1ZXJ5U2VydmljZUlkKSB7XHJcbiAgICAgIHNvdXJjZU9wdGlvbnMucXVlcnlTZXJ2aWNlSWQgPSBxdWVyeVNlcnZpY2VJZDtcclxuICAgIH1cclxuICAgIGlmIChxdWVyeVBhcmFtKSB7XHJcbiAgICAgIHNvdXJjZU9wdGlvbnMucXVlcnlQYXJhbSA9IHF1ZXJ5UGFyYW07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5wcmludFNlcnZpY2Uub3V0cHV0QkVEYXRhKHNvdXJjZU9wdGlvbnMsIG91dHB1dE9wdGlvbnMsICd0YWInKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5p6E6YCgU291cmNlT3B0aW9uc1xyXG4gICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnNcclxuICAgKi9cclxuICBwcml2YXRlIGJ1aWxkU291cmNlT3B0aW9ucyhvcHRpb25zOiB7IGRhdGFJZHM6IHN0cmluZ1tdLCBzb3VyY2VJZDogc3RyaW5nLCBbcHJvcDogc3RyaW5nXTogYW55IH0pOiBhbnkge1xyXG4gICAgY29uc3Qgc286IGFueSA9IHtcclxuICAgICAgRGF0YUlkczogb3B0aW9ucyAmJiBvcHRpb25zLmRhdGFJZHMgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBTb3VyY2VJZDogb3B0aW9ucyAmJiBvcHRpb25zLnNvdXJjZUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgRmlyc3REaW1lbnNpb25WYWw6IG9wdGlvbnMgJiYgb3B0aW9ucy5kaW0xIHx8IHVuZGVmaW5lZCxcclxuICAgICAgU2Vjb25kRGltZW5zaW9uVmFsOiBvcHRpb25zICYmIG9wdGlvbnMuZGltMiB8fCB1bmRlZmluZWQsXHJcbiAgICAgIFJldHJpZXZlUGFyYW06IG9wdGlvbnMgJiYgb3B0aW9ucy5yZXRyaWV2ZVBhcmFtIHx8IHVuZGVmaW5lZCxcclxuICAgICAgRm9ybWF0SWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5mb3JtYXRJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGJpbGxDYXRlZ29yeUlkOiBvcHRpb25zICYmIG9wdGlvbnMuYmlsbENhdGVnb3J5SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBTZXJ2aWNlVW5pdDogb3B0aW9ucyAmJiBvcHRpb25zLnNlcnZpY2VVbml0IHx8IHVuZGVmaW5lZCxcclxuICAgICAgY3VycmVudFBhZ2U6IG9wdGlvbnMgJiYgb3B0aW9ucy5jdXJyZW50UGFnZSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHBhZ2VSb3dDb3VudDogb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2VSb3dDb3VudCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHF1ZXJ5VHlwZTogb3B0aW9ucyAmJiBvcHRpb25zLnF1ZXJ5VHlwZSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHF1ZXJ5U2VydmljZUlkOiBvcHRpb25zICYmIG9wdGlvbnMucXVlcnlTZXJ2aWNlSWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBiaXpUeXBlSWQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5iaXpUeXBlSWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBxdWVyeVBhcmFtOiBvcHRpb25zICYmIG9wdGlvbnMucXVlcnlQYXJhbSB8fCB1bmRlZmluZWRcclxuICAgIH07XHJcbiAgICByZXR1cm4gc287XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOaehOmAoE91dHB1dE9wdGlvbnNcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBidWlsZE91dHB1dE9wdGlvbnMob3B0aW9ucz86IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KTogT3V0cHV0T3B0aW9ucyB7XHJcbiAgICBjb25zdCBvbzogT3V0cHV0T3B0aW9ucyA9IHtcclxuICAgICAgT3V0cHV0VHlwZTogb3B0aW9ucyAmJiBvcHRpb25zLm91dHB1dFR5cGUgfHwgT3V0cHV0VHlwZS5QUklOVCxcclxuICAgICAgRmlsZVR5cGU6IG9wdGlvbnMgJiYgb3B0aW9ucy5maWxlVHlwZSB8fCBGaWxlVHlwZS5IdG1sNSxcclxuICAgICAgUGF0aDogb3B0aW9ucyAmJiBvcHRpb25zLnBhdGggfHwgdW5kZWZpbmVkLFxyXG4gICAgICBEZXZpY2VJZDogb3B0aW9ucyAmJiBvcHRpb25zLmRldmljZUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgcHJpbnRKb2I6IG9wdGlvbnMgJiYgb3B0aW9ucy5wcmludEpvYiB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHByaW50ZXJOYW1lOiBvcHRpb25zICYmIG9wdGlvbnMucHJpbnRlck5hbWUgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBwcmludFNldHRpbmc6IG9wdGlvbnMgJiYgb3B0aW9ucy5wcmludFNldHRpbmcgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBwcmludFR5cGU6IG9wdGlvbnMgJiYgb3B0aW9ucy5wcmludFR5cGUgfHwgUHJpbnRUeXBlLkZvcm1cclxuICAgIH07XHJcbiAgICByZXR1cm4gb287XHJcbiAgfVxyXG59XHJcbiJdfQ==