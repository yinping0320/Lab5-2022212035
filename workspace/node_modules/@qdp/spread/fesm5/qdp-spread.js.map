{"version":3,"file":"qdp-spread.js.map","sources":["ng://@qdp/spread/lib/util/services.utils.ts","ng://@qdp/spread/lib/util/parameter.utils.ts","ng://@qdp/spread/lib/util/render.extends.utils.ts","ng://@qdp/spread/lib/util/schema.utils.ts","ng://@qdp/spread/lib/util/spread.style.utils.ts","ng://@qdp/spread/lib/engine/base-render.ts","ng://@qdp/spread/lib/engine/crosstab-render.ts","ng://@qdp/spread/lib/engine/list-render.ts","ng://@qdp/spread/lib/service/render/render.service.ts","ng://@qdp/spread/lib/component/dimension-setting/dimension-setting.component.ts","ng://@qdp/spread/lib/component/columns-setting/columns-setting.component.ts","ng://@qdp/spread/lib/component/qdp-view/qdp-view.component.ts","ng://@qdp/spread/lib/spread.module.ts"],"sourcesContent":["export class ServicesUtils {\r\n    private static ServicesMap = new Map();\r\n\r\n    public static setServices(key: String, value: any) {\r\n        ServicesUtils.ServicesMap.set(key, value);\r\n    }\r\n\r\n    public static getServices(key: String) {\r\n        return ServicesUtils.ServicesMap.get(key);\r\n    }\r\n}","import { CacheService } from \"@ecp-caf/caf-common\";\r\nimport { RtfServices } from \"@qdp/common\";\r\nimport { ServicesUtils } from \"./services.utils\";\r\n\r\ndeclare var gspframeworkService: any;\r\n\r\nexport class ParameterUtils {\r\n    private cache: CacheService;\r\n    queryId: any;\r\n    funcInfoCache: any;\r\n\r\n    constructor(_queryId?: any, _funcInfoCache?: any, _serviceCache?: any) {\r\n        this.queryId = _queryId;\r\n        this.funcInfoCache = _funcInfoCache;\r\n        this.cache = _serviceCache.cacheService;\r\n    }\r\n\r\n    /**\r\n     * åå»ºåæ°\r\n     * @param option åæ°éç½®é¡¹\r\n     * { queryId: æ¥è¯¢ID, controlType: æ¥è¯¢ç±»åï¼list  treelist  crosstab, schemaId: æ¹æ¡ID, qoManagerCode: æ¥è¯¢å¯¹è±¡ç¼å·, extendCond: æ©å±æ¡ä»¶, pageIndex: é¡µç´¢å¼, pageSize: åé¡µå¤§å°, filterCondition: ç»æè¿æ»¤æ¡ä»¶, printIntegration: æå°éç½®, excelExportName: å¯¼åºExcelæä»¶å }\r\n     * @returns \r\n     */\r\n    createParameters(option: any) {\r\n        const tabId = this.bindCloseTabEvent();\r\n        let entityData: any;\r\n        if (this.cache.get(tabId)) {\r\n            entityData = JSON.stringify(this.cache.get(tabId));\r\n        } else if (this.cache.get(option.queryId)) {\r\n            entityData = JSON.stringify(this.cache.get(option.queryId));\r\n        } else {\r\n            entityData = JSON.stringify({ 'id': 'undefined_null' });\r\n        }\r\n        const params = {\r\n            entityData: entityData,\r\n            extendCond: this.cache.get(tabId + 'extendCond') ? this.cache.get(tabId + 'extendCond') : option.extendCond,\r\n            pageIndex: option.pageIndex ? option.pageIndex : 0,\r\n            pageSize: option.pageSize ? option.pageSize : 0,\r\n            schemaId: option.schemaId && option.schemaId !== 'prefab' ? option.schemaId : '1',\r\n            filterCond: option.filterCondition ? option.filterCondition : (this.cache.get(tabId + 'filtercondition') ? this.cache.get(tabId + 'filtercondition') : ''),\r\n            qoManagerCode: option.qoManagerCode ? option.qoManagerCode : '',\r\n            voCode: option.voId ? option.voId : '',\r\n        };\r\n        try {\r\n            const parameterEntityData = JSON.parse(entityData);\r\n            if (parameterEntityData.hasOwnProperty('@filterExpressionString@')) {\r\n\r\n                const filterExpression = params && params.filterCond ? JSON.parse(params.filterCond) : null;\r\n                if (!filterExpression) {\r\n                    params.filterCond = parameterEntityData['@filterExpressionString@'];\r\n                } else {\r\n                    const advanceFilterExpression = JSON.parse(parameterEntityData['@filterExpressionString@']);\r\n                    advanceFilterExpression.expressItems = advanceFilterExpression.expressItems.concat(filterExpression.expressItems);\r\n                    params.filterCond = JSON.stringify(advanceFilterExpression);\r\n                }\r\n            }\r\n        } catch (e) {\r\n        }\r\n        if (option.controlType) {\r\n            params['controlType'] = option.controlType;\r\n        }\r\n        if (option.excelExportName) {\r\n            params['excelExportName'] = option.excelExportName;\r\n        }\r\n        if (option.printIntegration) {\r\n            params['printIntegration'] = option.printIntegration ? JSON.stringify(option.printIntegration) : '';\r\n        }\r\n        if (option.multiSheets) {\r\n            params['multiSheets'] = option.multiSheets && option.multiSheets.length ? option.multiSheets.join(\",\") : '';\r\n        }\r\n        if (option.curSheet) {\r\n            params['curSheet'] = option.curSheet;\r\n        }\r\n        if (option.multiSheetsSchemaIds) {\r\n            params['multiSheetsSchemaIds'] = option.multiSheetsSchemaIds ? JSON.stringify(option.multiSheetsSchemaIds) : '';\r\n        }\r\n        if (option.groupType) {\r\n            params['groupType'] = option.groupType ? option.groupType : '';\r\n        }\r\n        if (option.queryId) {\r\n            params['queryId'] = option.queryId ? option.queryId : '';\r\n        }\r\n        if (RtfServices.getMenuParameter('enableQOExtends')) {\r\n            params['enableQOExtends'] = RtfServices.getMenuParameter('enableQOExtends');\r\n            params['qoId'] = ServicesUtils.getServices(RtfServices.getTabId(this.queryId) + 'qoId');\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n    /**\r\n     * ç»å®åè½èåå³é­äºä»¶\r\n     */\r\n    bindCloseTabEvent() {\r\n        try {\r\n            const tab = gspframeworkService.rtf.session.getCommonVariable();\r\n            gspframeworkService.rtf.frmEvent.eventListener('beforeFuncCloseEvent', this.clearParametersCache.bind(this), tab);\r\n            const index = this.funcInfoCache.funcIds.findIndex(el => el === tab.tabId);\r\n            if (index < 0) {\r\n                this.funcInfoCache.funcIds.push(tab.tabId);\r\n            }\r\n            return tab.tabId + RtfServices.getInSuiteFrmUUID();\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¸é¤æ¥è¯¢ç¼å­\r\n     */\r\n    clearParametersCache() {\r\n        const tabId = arguments[0].tabId;\r\n        if (this.queryId) {\r\n            this.cache.set(this.queryId, '');\r\n        }\r\n        this.cache.set(tabId, '');\r\n        this.cache.set(tabId + 'renderMode', '');\r\n        let index = this.funcInfoCache.funcIds.findIndex(el => el === tabId);\r\n        if (index >= 0) {\r\n            this.funcInfoCache.funcIds.splice(index, 1);\r\n            index = this.funcInfoCache.firstLoadCache.findIndex(el => el === tabId);\r\n            if (index >= 0) {\r\n                this.funcInfoCache.firstLoadCache.splice(index, 1);\r\n            }\r\n            gspframeworkService.rtf.func.close(arguments[0]);\r\n        }\r\n    }\r\n}","import { DataRenderExtendService } from \"@qdp/common\";\r\nimport { ServicesUtils } from \"./services.utils\";\r\n\r\nexport class RenderExtendsUtils {\r\n    dataRenderExtendService: DataRenderExtendService;\r\n    renderExtends: DataRenderExtendService;\r\n\r\n    constructor(_queryId: any) {\r\n        this.init(_queryId);\r\n    }\r\n\r\n    private init(_queryId: any) {\r\n        this.dataRenderExtendService = ServicesUtils.getServices('dataRenderExtendService' + _queryId);\r\n        this.renderExtends = ServicesUtils.getServices('renderExtends' + _queryId);\r\n    }\r\n\r\n    /**\r\n   * æ§è¡æ¥è¯¢æ©å±\r\n   */\r\n    runRenderExtends(extendCode: any, extendName: any, extendData: any, control: any) {\r\n        const $event = this.createRenderExtendParams({\r\n            eventCode: extendCode, // 'beforeQueryData',\r\n            eventName: extendName, // this.localizeService.getValue('spread.message.extend.query.before'),\r\n            data: extendData, // params,\r\n            spread: control, // obj.spread\r\n            control: control // obj.spread\r\n        });\r\n        if (extendCode === 'beforeQueryData') {\r\n            if (this.dataRenderExtendService && this.dataRenderExtendService.beforeQueryData) {\r\n                this.dataRenderExtendService.beforeQueryData($event);\r\n            } else {\r\n                if (this.renderExtends && this.renderExtends.beforeQueryData) {\r\n                    this.renderExtends.beforeQueryData($event);\r\n                }\r\n            }\r\n        } else if (extendCode === 'beforeLoadData') {\r\n            if (this.dataRenderExtendService && this.dataRenderExtendService.beforeLoadData) {\r\n                this.dataRenderExtendService.beforeLoadData($event);\r\n            } else {\r\n                if (this.renderExtends && this.renderExtends.beforeQueryData) {\r\n                    this.renderExtends.beforeLoadData($event);\r\n                }\r\n            }\r\n        } else if (extendCode === 'afterLoadData') {\r\n            if (this.dataRenderExtendService && this.dataRenderExtendService.afterLoadData) {\r\n                this.dataRenderExtendService.afterLoadData($event);\r\n            } else {\r\n                if (this.renderExtends && this.renderExtends.beforeQueryData) {\r\n                    this.renderExtends.afterLoadData($event);\r\n                }\r\n            }\r\n        }\r\n        return $event['data'];\r\n    }\r\n\r\n    createRenderExtendParams(obj) {\r\n        return {\r\n            eventCode: obj.eventCode,\r\n            eventName: obj.eventName,\r\n            data: obj.data,\r\n            control: obj.control,\r\n            spread: obj.spread || undefined\r\n        };\r\n    }\r\n}","import { RtfServices, SchemaManagerService } from \"@qdp/common\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { switchMap } from \"rxjs/operators\";\r\n\r\nexport class SchemaUtils {\r\n    schemaManager: SchemaManagerService;\r\n    cacheService: any;\r\n\r\n    constructor(_serviceCache: any) {\r\n        this.init(_serviceCache);\r\n    }\r\n    \r\n    private init(_serviceCache: any) {\r\n        this.schemaManager = _serviceCache.schemaManagerService;\r\n        this.cacheService = _serviceCache.cacheService;\r\n    }\r\n    /**\r\n     * è·åæ ¼å¼æ¹æ¡ä¿¡æ¯\r\n     * @param option åæ°éç½®é¡¹ \r\n     * { schemaId: æ¹æ¡ID, schemaValue: æ ¼å¼æ¹æ¡ï¼äº¤åè¡¨æå¿«éè¨­ç½®æä½¿ç¨ï¼, controlType: æ¥è¯¢ç±»åï¼list  treelist  crosstab, queryId: æ¥è¯¢ID, queryRelativeUrlï¼eapiåºç¡uri, groupType: æ¹æ¡åç»æ è¯ }\r\n     * @returns æ¹æ¡åè¡¨\r\n     */\r\n    getSchemaInfo(option: any): Observable<any> {\r\n        const self = this;\r\n        option.schemaId = option.schemaId === 'prefab' || option.schemaId === '1'\r\n            ? '1'\r\n            : option.schemaValue && option.schemaValue.id && option.controlType === 'crosstab'\r\n                ? option.schemaValue.id\r\n                : option.schemaId;\r\n        if (!option.schemaId) {\r\n            return self.getDefaultSchemaInfo(option);\r\n        } else {\r\n            const organizationId = this.cacheService.get(RtfServices.getTabId(option.queryId) + 'organizationId') || '';\r\n            const result$ = this.schemaManager.getSchema(option.schemaId, option.queryId, option.queryRelativeUrl, option.groupType, organizationId, option.fromCache);\r\n            return result$.pipe(\r\n                switchMap((schemaValue: any) => {\r\n                    if (schemaValue && schemaValue['id']) {\r\n                        return of(schemaValue);\r\n                    }\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è·åé»è®¤æ ¼å¼æ¹æ¡\r\n     * @param option åæ°éç½®é¡¹ \r\n     * { queryIdï¼æ¥è¯¢ID, queryRelativeUrlï¼eapiåºç¡uri, groupType: æ¹æ¡åç»æ è¯ }\r\n     * @returns é»è®¤æ ¼å¼æ¹æ¡\r\n     */\r\n    getDefaultSchemaInfo(option: any) {\r\n        const organizationId = this.cacheService.get(RtfServices.getTabId(option.queryId) + 'organizationId') || '';\r\n        return this.schemaManager.getDefaultSchema(option.queryId, option.queryRelativeUrl, option.groupType, organizationId);\r\n    }\r\n}","import { FormErrorService } from \"@farris/command-services\";\r\nimport { EventBus, RtfServices, LcpService } from \"@qdp/common\";\r\nimport { filter } from 'lodash-es';\r\n\r\ndeclare var GC: any;\r\ndeclare var TreeCellType: any;\r\ndeclare var MyNumFormatter: any;\r\ndeclare var FilterCellType: any;\r\ndeclare var SortCellType: any;\r\ndeclare var gspframeworkService: any;\r\n\r\nexport class SpreadStyleUtils {\r\n    dataStyleArray: any[] = [];\r\n    dataRowHeightArray: any[] = [];\r\n    dataColInfoArray: any[] = [];\r\n    footerStyleArray: any[] = [];\r\n    footerRowHeightArray: any[] = [];\r\n    footerSpansArray: any[] = [];\r\n    footerDataArray: any[] = [];\r\n    hyperLinkQuery: any = {};\r\n    private autoFitColumnIndex = 0;\r\n    type: any;\r\n    queryId: any;\r\n    valueHeaderRowCount = 0; // å¼ç»´åº¦æ°é\r\n    valueHeaderRowArray: number[] = [];\r\n    rowHeadersColumnCount = 0; // è¡æ é¢åæ°\r\n    rowHeaderRowArray: number[] = [];\r\n    rowHeaderInfo: any;\r\n    valInfo: any;\r\n    joinParam: any = {};\r\n    jointsearchInfoList: any;\r\n    cache: any;\r\n    loadService: any;\r\n    msgService: any;\r\n    localizeService: any;\r\n    schemaManager: any;\r\n    formErrorService: FormErrorService;\r\n    lcpService: any;\r\n\r\n    constructor(_queryId: any, _controlType: any, _jointsearchInfoList?: any, _serviceCache?: any) {\r\n        this.queryId = _queryId;\r\n        this.type = _controlType;\r\n        this.jointsearchInfoList = _jointsearchInfoList;\r\n        this.cache = _serviceCache.cacheService;\r\n        this.loadService = _serviceCache.loadingService;\r\n        this.msgService = _serviceCache.msgService;\r\n        this.localizeService = _serviceCache.localizeService;\r\n        this.schemaManager = _serviceCache.schemaManagerService;\r\n        this.formErrorService = _serviceCache.formErrorService;\r\n        this.lcpService = _serviceCache.lcpService;\r\n    }\r\n\r\n    setAutoFitColumn(schema: any, sheet: any) {\r\n        if (schema && schema.schemaValue && schema.schemaValue.columnOption && schema.schemaValue.columnOption.colList && schema.schemaValue.columnOption.colList.length) {\r\n            this.autoFitColumnIndex = 0;\r\n            schema.schemaValue.columnOption.colList.forEach((col: any) => {\r\n                this.recursionAutoFitColumn(col, null, sheet);\r\n            });\r\n        }\r\n    }\r\n\r\n    private recursionAutoFitColumn(column: any, childList: any[], sheet: any) {\r\n        if (column) {\r\n            if (column.childList && column.childList.length) {\r\n                this.recursionAutoFitColumn(null, column.childList, sheet);\r\n            } else {\r\n                if (column.autoFit) {\r\n                    sheet.autoFitColumn(this.autoFitColumnIndex);\r\n                }\r\n                this.autoFitColumnIndex += 1;\r\n            }\r\n        } else {\r\n            childList.forEach((col: any) => {\r\n                if (col.childList && col.childList.length) {\r\n                    this.recursionAutoFitColumn(null, col.childList, sheet);\r\n                } else {\r\n                    if (col.autoFit) {\r\n                        sheet.autoFitColumn(this.autoFitColumnIndex);\r\n                    }\r\n                    this.autoFitColumnIndex += 1;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    cacheStyle(sheet: any) {\r\n        this.dataStyleArray = [];\r\n        this.dataRowHeightArray = [];\r\n        this.dataColInfoArray = [];\r\n        this.footerStyleArray = [];\r\n        this.footerRowHeightArray = [];\r\n        this.footerSpansArray = [];\r\n        this.footerDataArray = [];\r\n\r\n        // ç¼å­åºåæ ·å¼ä¿¡æ¯\r\n        for (let r = 0; r < sheet.getRowCount(); r++) {\r\n            const columnStyleArray = new Array();\r\n            const dataArray = new Array();\r\n            for (let c = 0; c < sheet.getColumnCount(); c++) {\r\n                if (r === 0) {\r\n                    let formatter = '';\r\n                    if (sheet.getFormatter(r, c, GC.Spread.Sheets.SheetArea.viewport)) {\r\n                        formatter = sheet.getFormatter(r, c, GC.Spread.Sheets.SheetArea.viewport);\r\n                    }\r\n                    const colHeaderCount = sheet.getRowCount(GC.Spread.Sheets.SheetArea.colHeader);\r\n                    const colInfo: any = {\r\n                        name: sheet.getCell(r, c, GC.Spread.Sheets.SheetArea.viewport).value(),\r\n                        size: sheet.getColumnWidth(c, GC.Spread.Sheets.SheetArea.viewport),\r\n                        visible: sheet.getColumnVisible(c, GC.Spread.Sheets.SheetArea.viewport),\r\n                        resizable: sheet.getColumnResizable(c, GC.Spread.Sheets.SheetArea.viewport),\r\n                        formatter: formatter.indexOf('&') >= 0 ? new MyNumFormatter(formatter) : formatter,\r\n                        displayName: sheet.getCell((colHeaderCount - 1), c, GC.Spread.Sheets.SheetArea.colHeader).value()\r\n                    };\r\n                    this.dataColInfoArray.push(colInfo);\r\n                }\r\n                let style = sheet.getStyle(r, c, GC.Spread.Sheets.SheetArea.viewport);\r\n                if (style == null) {\r\n                    style = new GC.Spread.Sheets.Style();\r\n                    style.locked = true;\r\n                } else {\r\n                    style.locked = true;\r\n                }\r\n                if (style && style.formatter && style.formatter.indexOf('&') >= 0) {\r\n                    style.formatter = new MyNumFormatter(style.formatter);\r\n                }\r\n                columnStyleArray.push(style);\r\n\r\n                const text = sheet.getValue(r, c, GC.Spread.Sheets.SheetArea.viewport)\r\n                    || sheet.getText(r, c, GC.Spread.Sheets.SheetArea.viewport)\r\n                    || '';\r\n                dataArray.push(text);\r\n\r\n            }\r\n            if (r === 0) {\r\n                this.dataRowHeightArray.push(sheet.getRowHeight(r));\r\n                this.dataStyleArray.push(columnStyleArray);\r\n            } else {\r\n                this.footerRowHeightArray.push(sheet.getRowHeight(r));\r\n                this.footerStyleArray.push(columnStyleArray);\r\n                this.footerDataArray.push(dataArray);\r\n            }\r\n        }\r\n\r\n        // ç¼å­span\r\n        const spans = sheet.getSpans();\r\n        if (spans && spans.length) {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < spans.length; i++) {\r\n                if (spans[i].row > 0) {\r\n                    this.footerSpansArray.push(spans[i]);\r\n                }\r\n            }\r\n        }\r\n        sheet.deleteRows(1, sheet.getRowCount() - 1);\r\n    }\r\n\r\n    applyStyle(sheet: any, schema: any, showZero?: boolean) {\r\n        let rowCount = sheet.getRowCount();\r\n        const colCount = sheet.getColumnCount();\r\n        const footerCount = this.footerRowHeightArray.length;\r\n        sheet.addRows(rowCount, footerCount);\r\n        let index = 0;\r\n        const groupFieldCache = [];\r\n        const groupFieldValueCache = [];\r\n        const groupRowCache = [];\r\n        const groupTreeLevel = {};\r\n        const columns = sheet.toJSON().columns;\r\n        this.getGroupField(groupFieldCache, schema);\r\n        const formatFieldCache = [];\r\n        this.getFormatField(formatFieldCache, schema);\r\n        this.getIsRedColumns(formatFieldCache, schema);\r\n        const isRedColumns = {\r\n            colIndex: 0,\r\n            isRedColumns: []\r\n        };\r\n        this.getIsRedColumns(schema, isRedColumns);\r\n        const sheetColumns = sheet.toJSON().columns;\r\n        for (let r = 0; r < (rowCount + footerCount); r++) {\r\n            if (formatFieldCache && formatFieldCache.length && r < rowCount) {\r\n                formatFieldCache.forEach((item: any) => {\r\n                    const dataItem = sheet.getDataItem(r);\r\n                    const precision = dataItem[item.formatField] - 0;\r\n                    let numberFormat = item.formatter && (item.formatter.indexOf('#,###') >= 0 || item.formatter.indexOf('#,##0') >= 0) ? '#,##0.' : '0.';\r\n                    if (this.isNumber(precision)) {\r\n                        for (let p = 0; p < precision; p++) {\r\n                            numberFormat += '0';\r\n                        }\r\n                    }\r\n                    const formatColIndex = sheetColumns.findIndex((el: any) => el.name == item.sourceField);\r\n                    if (formatColIndex >= 0 && numberFormat != '0.' && numberFormat != '#,##0.') {\r\n                        sheet.getCell(r, formatColIndex).formatter(numberFormat);\r\n                    }\r\n                });\r\n            }\r\n\r\n            for (let c = 0; c < colCount; c++) {\r\n                if (r === 0 && !sheet.getColumnVisible(index)) {\r\n                    index += 1;\r\n                }\r\n                if (r >= rowCount) {\r\n                    if (c === 0) {\r\n                        sheet.setStyle(r, c, this.footerStyleArray[r - rowCount][c]);\r\n                        if (this.footerDataArray && this.footerDataArray.length) {\r\n                            sheet.setValue(r, c, this.footerDataArray[r - rowCount][c]);\r\n                        }\r\n                        sheet.setRowHeight(r, this.footerRowHeightArray[r - rowCount]);\r\n                        if (this.footerSpansArray && this.footerSpansArray.length) {\r\n                            sheet.addSpan(r, this.footerSpansArray[0].col, this.footerSpansArray[0].rowCount, this.footerSpansArray[0].colCount);\r\n                        }\r\n                    }\r\n                } else {\r\n                    const formatter = sheet.getFormatter(r, c, GC.Spread.Sheets.SheetArea.viewport);\r\n                    if (formatter && formatter.indexOf && formatter.indexOf('/') >= 0 && formatter.indexOf(';') >= 0) {\r\n                        const cellValue = this.logicFormat(formatter, sheet.getValue(r, c));\r\n                        sheet.setText(r, c, cellValue);\r\n                    }\r\n                    if (formatter && typeof formatter === 'string' && (formatter.indexOf('yy') >= 0 || formatter.indexOf('MM') >= 0 || formatter.indexOf('dd') >= 0 || formatter.indexOf('HH') >= 0 || formatter.indexOf('mm') >= 0 || formatter.indexOf('ss') >= 0)) {\r\n                        if (sheet.getDataItem(r).hasOwnProperty(\"qdp_data_flag\")) {\r\n                            sheet.setFormatter(r, c, '');\r\n                        }\r\n                    }\r\n                    if (isRedColumns.isRedColumns.findIndex(el => el.colIndex == c) >= 0 && this.isNumber(sheet.getCell(r, c).value()) && (sheet.getCell(r, c).value() - 0 < 0)) {\r\n                        sheet.getCell(r, c).foreColor('red');\r\n                    }\r\n                    if (!showZero) {\r\n                        if (!showZero && columns && columns.length) {\r\n                            if (columns[c].name === 'treeLevel' || columns[c].name === 'isDetail') { continue; }\r\n                            if (sheet.getCell(r, c).value() === 0 || sheet.getCell(r, c).value() == '0') {\r\n                                sheet.getCell(r, c).value('');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (r < rowCount) {\r\n                // è®¾ç½®è¡é«\r\n                sheet.setRowHeight(r, this.dataRowHeightArray[0]);\r\n                if (this.type === 'treelist') {\r\n                    const level = sheet.getDataItem(r)['treeLevel'];\r\n                    const isDetail = sheet.getDataItem(r)['isDetail'];\r\n                    sheet.setCellType(r, index, new TreeCellType(null, false, level, isDetail));\r\n                    sheet.getStyle(r, index).hAlign = 0;\r\n                    sheet.getStyle(r, index).textIndent = level + 2;\r\n                    for (let i = 0; i <= level; i++) {\r\n                        sheet.rowOutlines.group(r, 1);\r\n                    }\r\n                } else if (this.type === 'list' && groupFieldCache.length) {\r\n                    let filterCondition: any = {};\r\n                    if (groupRowCache.findIndex(x => x === r) >= 0) {\r\n                        continue;\r\n                    }\r\n                    for (let c = 0; c < colCount; c++) {\r\n                        if (sheet.getDataItem(r).hasOwnProperty(\"qdp_data_flag\") && (sheet.getDataItem(r)[\"qdp_data_flag\"] + '') === (4 + '')) {\r\n                            if (sheet.getFormatter(r, c) && (sheet.getFormatter(r, c).toString().indexOf('y') >= 0 || sheet.getFormatter(r, c).toString().indexOf('d') >= 0 || sheet.getFormatter(r, c).toString().indexOf('M') >= 0)) {\r\n                                sheet.setFormatter(r, c, '');\r\n                            }\r\n                        }\r\n                    }\r\n                    const addRowsCache = [];\r\n                    for (let i = 0; i < groupFieldCache.length; i++) {\r\n                        const addRowIndex = r + addRowsCache.length;\r\n                        // const groupField = groupFieldCache[i];\r\n                        const fieldIndex = this.dataColInfoArray.findIndex(x => x.name === groupFieldCache[i]);\r\n                        filterCondition = {};\r\n                        for (let f = 0; f <= i; f++) {\r\n                            filterCondition[groupFieldCache[f]] = sheet.getDataItem(addRowIndex)[groupFieldCache[f]];\r\n                        }\r\n                        const filterResult = filter(groupFieldValueCache, filterCondition);\r\n                        if ((!filterResult || !filterResult.length) && !sheet.getDataItem(addRowIndex).hasOwnProperty(\"qdp_data_flag\")) {\r\n                            // const groupFieldValue = {};\r\n                            // groupFieldValue[groupField] = filterCondition[groupField];\r\n                            groupFieldValueCache.push(filterCondition);\r\n                            const style = this.dataStyleArray[0][fieldIndex];\r\n                            style.hAlign = 0;\r\n                            style.cellType = null;\r\n                            style.backColor = '#F4F7FA';\r\n                            sheet.addRows(addRowIndex, 1);\r\n                            sheet.setRowHeight(addRowIndex, this.dataRowHeightArray[0]);\r\n                            sheet.setStyle(addRowIndex, index, style);\r\n                            sheet.getCell(addRowIndex, index).value(filterCondition[groupFieldCache[i]]);\r\n                            sheet.addSpan(addRowIndex, index, 1, (colCount - index));\r\n                            sheet.getCell(addRowIndex, index).textIndent((i + 1) * 2);\r\n                            groupTreeLevel[addRowIndex + ''] = { treeLevel: i, isDetail: 0 };\r\n                            if (i === (groupFieldCache.length - 1)) {\r\n                                groupTreeLevel[(addRowIndex + 1) + ''] = { treeLevel: groupFieldCache.length, isDetail: 1 };\r\n                            }\r\n                            rowCount += 1;\r\n                            addRowsCache.push(i);\r\n                            groupRowCache.push(addRowIndex);\r\n                        } else {\r\n                            if (sheet.getDataItem(addRowIndex).hasOwnProperty(\"qdp_data_flag\") && (sheet.getDataItem(addRowIndex)[\"qdp_data_flag\"] + '') === (3 + '')) {\r\n                                continue;\r\n                            }\r\n                            if (i === (groupFieldCache.length - 1)) {\r\n                                groupTreeLevel[(addRowIndex + 1) + ''] = { treeLevel: groupFieldCache.length, isDetail: 1 };\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (let r = 0; r < rowCount; r++) {\r\n            if (!groupTreeLevel.hasOwnProperty(r)) {\r\n                break;\r\n            }\r\n            for (let t = 0; t <= groupTreeLevel[r + ''].treeLevel; t++) {\r\n                sheet.rowOutlines.group(r, 1);\r\n            }\r\n            sheet.setCellType(r, index, new TreeCellType(null, false, groupTreeLevel[r + ''].treeLevel, groupTreeLevel[r + ''].isDetail));\r\n        }\r\n        if (this.type !== 'crosstab' && this.getShowFilterRow(schema)) {\r\n            this.filterRow(sheet);\r\n        }\r\n    }\r\n\r\n    getGroupField(groupColCache: any, schema: any) {\r\n        if (schema && schema.schemaValue && schema.schemaValue.columnOption && schema.schemaValue.columnOption.colList && schema.schemaValue.columnOption.colList.length) {\r\n            this.autoFitColumnIndex = 0;\r\n            schema.schemaValue.columnOption.colList.forEach((col: any) => {\r\n                this.recursionGetGroupColumn(groupColCache, col, null);\r\n            });\r\n        }\r\n    }\r\n\r\n    getIsRedColumns(schema: any, params: any) {\r\n        if (schema && schema.schemaValue && schema.schemaValue.columnOption && schema.schemaValue.columnOption.colList && schema.schemaValue.columnOption.colList.length) {\r\n            schema.schemaValue.columnOption.colList.forEach((col: any) => {\r\n                this.recursiveIsRedColumn(col, null, params);\r\n            });\r\n        }\r\n    }\r\n\r\n    getFormatField(fieldCache: any, schema: any) {\r\n        if (schema && schema.schemaValue && schema.schemaValue.columnOption && schema.schemaValue.columnOption.colList && schema.schemaValue.columnOption.colList.length) {\r\n            this.autoFitColumnIndex = 0;\r\n            schema.schemaValue.columnOption.colList.forEach((col: any) => {\r\n                this.recursionGetFormatColumn(fieldCache, col, null);\r\n            });\r\n        }\r\n    }\r\n\r\n    getShowHeaderSort(schema: any) {\r\n        try {\r\n            if (schema && schema.schemaValue && schema.schemaValue.otherOption && schema.schemaValue.otherOption.showHeaderSort != null && schema.schemaValue.otherOption.showHeaderSort != undefined) {\r\n                return schema.schemaValue.otherOption.showHeaderSort;\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    getShowFilterRow(schema: any) {\r\n        try {\r\n            if (schema && schema.schemaValue && schema.schemaValue.otherOption && schema.schemaValue.otherOption.showFilterRow != null && schema.schemaValue.otherOption.showFilterRow != undefined) {\r\n                return schema.schemaValue.otherOption.showFilterRow;\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    getMergeCell(schema: any) {\r\n        try {\r\n            if (schema && schema.schemaValue && schema.schemaValue.otherOption && schema.schemaValue.otherOption.mergeCell != null && schema.schemaValue.otherOption.mergeCell != undefined) {\r\n                return schema.schemaValue.otherOption.mergeCell;\r\n            }\r\n            return false;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private recursionGetFormatColumn(fieldCache: any, column: any, childList: any[]) {\r\n        if (column) {\r\n            if (column.childList && column.childList.length) {\r\n                this.recursionGetFormatColumn(fieldCache, null, column.childList);\r\n            } else {\r\n                if (column.formatType == 1 && column.formatField) {\r\n                    fieldCache.push({ sourceField: column.bindField, formatField: column.formatField, formatter: column.formattor });\r\n                }\r\n            }\r\n        } else {\r\n            childList.forEach((col: any) => {\r\n                if (col.childList && col.childList.length) {\r\n                    this.recursionGetFormatColumn(fieldCache, null, col.childList);\r\n                } else {\r\n                    if (col.formatType == 1 && col.formatField) {\r\n                        fieldCache.push({ sourceField: col.bindField, formatField: col.formatField, formatter: col.formattor });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private recursionGetGroupColumn(groupColCache: any, column: any, childList: any[]) {\r\n        if (column) {\r\n            if (column.childList && column.childList.length) {\r\n                this.recursionGetGroupColumn(groupColCache, null, column.childList);\r\n            } else {\r\n                if (column.isGroup) {\r\n                    groupColCache.push(column.bindField);\r\n                }\r\n            }\r\n        } else {\r\n            childList.forEach((col: any) => {\r\n                if (col.childList && col.childList.length) {\r\n                    this.recursionGetGroupColumn(groupColCache, null, col.childList);\r\n                } else {\r\n                    if (col.isGroup) {\r\n                        groupColCache.push(col.bindField);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    logicFormat(formattor: any, cellValue: any) {\r\n        const str = formattor.split(';');\r\n        const real = str[0].split('/');\r\n        const disp = str[1].split('/');\r\n        for (let i = 0; i < real.length; i++) {\r\n            // tslint:disable-next-line:triple-equals\r\n            if (real[i] == (cellValue + '')) {\r\n                cellValue = disp[i];\r\n                break;\r\n            }\r\n        }\r\n        return cellValue;\r\n    }\r\n\r\n    filterRow(sheet: any) {\r\n        sheet.addRows(0, 1);\r\n        for (let i = 0; i < sheet.getRowCount(); i++) {\r\n            sheet.getCell(i, 0, GC.Spread.Sheets.SheetArea.rowHeader).value(i == 0 ? '' : i);\r\n        }\r\n        sheet.setRowHeight(0, this.dataRowHeightArray[0]);\r\n        for (let i = 0; i < sheet.getColumnCount(); i++) {\r\n            const s = new GC.Spread.Sheets.Style();\r\n            s.fromJSON(this.dataStyleArray[0][i].toJSON());\r\n            s.locked = false;\r\n            s.formatter = '@';\r\n            sheet.setStyle(0, i, s);\r\n            sheet.setCellType(0, i, new FilterCellType(sheet));\r\n        }\r\n        const filter = new GC.Spread.Sheets.Filter.HideRowFilter(new GC.Spread.Sheets.Range(1, 0, sheet.getRowCount(), sheet.getColumnCount()));\r\n        sheet.rowFilter(filter);\r\n        filter.filterButtonVisible(false);\r\n    }\r\n\r\n    linkField(spread: any, sheet: any) {\r\n        try {\r\n            const self = this;\r\n            const rowCount = sheet.getRowCount();\r\n            const colCount = sheet.getColumnCount();\r\n            // const footerCount = this.footerRowHeightArray.length;\r\n            for (let r = 1; r < (rowCount); r++) {\r\n                const dataItem = sheet.getDataItem(r);\r\n                if (dataItem.hasOwnProperty('dynamicPropSet') && dataItem.dynamicPropSet.hasOwnProperty('qdp_data_flag')) {\r\n                    continue;\r\n                }\r\n                for (let c = 0; c < colCount; c++) {\r\n                    const joinSearch = JSON.parse(this.jointsearchInfoList['joinSearch']);\r\n                    // tslint:disable-next-line:prefer-for-of\r\n                    for (let i = 0; i < joinSearch.length; i++) {\r\n                        const el = joinSearch[i];\r\n                        if (el.jointserachdisplaystyle === 2) {\r\n                            if (el.linkfield === this.dataColInfoArray[c].name) {\r\n                                if (!this.hyperLinkQuery[this.queryId]) {\r\n                                    this.hyperLinkQuery[this.queryId] = {};\r\n                                }\r\n                                this.hyperLinkQuery[this.queryId][c + ''] = el;\r\n                                const h1 = new GC.Spread.Sheets.CellTypes.HyperLink();\r\n                                h1.text(h1.format(sheet.getCell(r, c).value(), this.dataColInfoArray[c].formatter));\r\n                                h1.activeOnClick(true);\r\n                                h1.onClickAction(function () {\r\n                                    spread.commandManager().execute({\r\n                                        cmd: 'dropdownquery',\r\n                                        self: self\r\n                                    });\r\n                                });\r\n                                sheet.setCellType(r, c, h1, GC.Spread.Sheets.SheetArea.viewport);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            spread.commandManager().register('dropdownquery', {\r\n                canUndo: true,\r\n                execute: function (context, options, isUndo) {\r\n                    const row = context.getActiveSheet().getActiveRowIndex();\r\n                    const col = context.getActiveSheet().getActiveColumnIndex();\r\n                    for (const key in options.self.hyperLinkQuery[options.self.queryId]) {\r\n                        if (key === (col + '')) {\r\n                            const el = options.self.hyperLinkQuery[options.self.queryId][key];\r\n                            let entityParam = { 'id': 'null' };\r\n                            const paramMap = new Map<string, string>();\r\n                            const searchparas = JSON.parse(options.self.jointsearchInfoList['jointparam']).filter(x => x.functionid === el['id']);\r\n                            const joinParam = options.self.cache.get(RtfServices.getTabId(options.self.queryId) + 'joinSearch');\r\n                            let dataItem = { 'id': 'null' };\r\n                            if (joinParam.controlType === 'crosstab') { // äº¤åè¡¨\r\n                                // è·åè¡æ é¢çæ°æ®\r\n                                for (let i = joinParam.rowHeaderColInfo.start; i < joinParam.rowHeaderColInfo.end; i++) {\r\n                                    const value = context.getActiveSheet().getValue(row, i, GC.Spread.Sheets.SheetArea.viewport);\r\n                                    const name = context.getActiveSheet().getValue(joinParam.colHeaderRowInfo.start, i, GC.Spread.Sheets.SheetArea.colHeader);\r\n                                    const colInfo = joinParam.colInfos.find((x: any) => x.dimension === 1 && x.name === name).bindField;\r\n                                    dataItem[colInfo] = value;\r\n                                }\r\n                                // è·ååæ é¢çæ°æ®\r\n                                for (let i = joinParam.colHeaderRowInfo.start; i < joinParam.colHeaderRowInfo.end; i++) {\r\n                                    const value = context.getActiveSheet().getValue(i, col, GC.Spread.Sheets.SheetArea.colHeader);\r\n                                    const colInfo = joinParam.colInfos.filter((x: any) => x.dimension === 2)[i - joinParam.colHeaderRowInfo.start].bindField;\r\n                                    dataItem[colInfo] = value;\r\n                                }\r\n                                // è·åå¼æ é¢çæ°æ®\r\n                                const value = context.getActiveSheet().getValue(row, col, GC.Spread.Sheets.SheetArea.viewport);\r\n                                const name = context.getActiveSheet().getValue(joinParam.colHeaderRowInfo.end, col, GC.Spread.Sheets.SheetArea.colHeader);\r\n                                let colInfo = joinParam.colInfos.find((x: any) => x.dimension === 3 && x.name === name);\r\n                                if (colInfo) {\r\n                                    colInfo = colInfo.bindField;\r\n                                    dataItem[colInfo] = value;\r\n                                }\r\n                            } else {\r\n                                dataItem = context.getActiveSheet().getDataItem(row);\r\n                            }\r\n\r\n                            const currentSelectedItem = dataItem; // å½åéä¸­æ°æ®\r\n                            if (searchparas.length > 0) {\r\n                                searchparas.forEach(value => {\r\n                                    if (value.paravaluetype) {// è¡¨è¾¾å¼\r\n                                        if (value.paravalue.indexOf('getParameter(') >= 0) {\r\n                                            const parameterKey = value.paravalue.replace(/'/g, '').replace(/\"/g, '').replace(/getParameter\\(/g, '').replace(/\\)/g, '');\r\n                                            options.self.getQueryParameters(entityParam, paramMap, parameterKey, value.para);\r\n                                        } else {\r\n                                            entityParam[value.para] = currentSelectedItem[value.paravalue];\r\n                                            paramMap.set(value.para, currentSelectedItem[value.paravalue]);\r\n                                        }\r\n                                    } else {\r\n                                        entityParam[value.para] = value.paravalue;\r\n                                        paramMap.set(value.para, value.paravalue);\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                entityParam = currentSelectedItem;\r\n                            }\r\n                            const op: any = {\r\n                                ParentSessionId: options.self.cache.get('session'),\r\n                                EntityParam: entityParam\r\n                            };\r\n                            let tabId = '';\r\n                            if (el.searchtype === 'func') {\r\n                                // èæ¥å\r\n                                const openMenuoptions = {\r\n                                    'appType': 'menu',\r\n                                    'funcId': el.functioncode,\r\n                                    'tabId': EventBus.guid(),\r\n                                    'appId': '',\r\n                                    'appEntrance': '',\r\n                                    'entityParams': op.entityParam,\r\n                                    'queryStringParams': paramMap,\r\n                                    'isNewTab': true\r\n                                };\r\n                                tabId = RtfServices.getFuncId(openMenuoptions);\r\n                                options.self.cache.set(tabId ? tabId : options.self.queryId, op.EntityParam);\r\n                                const menuSwitchControl = Object.assign({}, openMenuoptions['entityParams'], RtfServices.getMenuSwitchControlParameter(tabId));\r\n                                openMenuoptions['entityParams'] = menuSwitchControl;\r\n                                // å¡çå¡è¿å»params\r\n                                gspframeworkService.rtf.func.openMenu(openMenuoptions);\r\n                            } else if (el.searchtype === 'app') {\r\n                                const appOption = {\r\n                                    appType: 'app',\r\n                                    appId: el.functioncode,\r\n                                    appEntrance: el.appEntrance,\r\n                                    funcId: '',\r\n                                    isReload: true,\r\n                                    tabId: EventBus.guid(),\r\n                                    entityParams: op.entityParam,\r\n                                    queryStringParams: paramMap\r\n                                };\r\n                                tabId = RtfServices.getFuncId(appOption);\r\n                                options.self.cache.set(tabId ? tabId : options.queryId, op.EntityParam);\r\n                                const menuSwitchControl = Object.assign({}, appOption['entityParams'], RtfServices.getMenuSwitchControlParameter(tabId));\r\n                                appOption['entityParams'] = menuSwitchControl;\r\n                                gspframeworkService.rtf.func.openMenu(appOption);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }, null, false, false, false, false);\r\n        } catch (e) { }\r\n    }\r\n\r\n    inSuiteLinkField(spread: any, sheet: any, extObj: any) {\r\n        try {\r\n            const self = this;\r\n            let data = null;\r\n            try {\r\n                if (this.lcpService.inSuiteDropDownInfo && typeof this.lcpService.inSuiteDropDownInfo == 'string') {\r\n                    data = JSON.parse(this.lcpService.inSuiteDropDownInfo);\r\n                }\r\n            } catch (e) {\r\n                throw e;\r\n            }\r\n            const rowCount = sheet.getRowCount();\r\n            const colCount = sheet.getColumnCount();\r\n            let rowDropDown = true;\r\n            const cacheRowDropDown = [];\r\n            const cacheCellDropDown = {};\r\n            // è§£æç¸å³æ°æ®\r\n            const {\r\n                click_events: clickEvents,\r\n                event_data: eventData,\r\n                double_click_event: dcEvent,\r\n                double_click_event_params: dcEventParams,\r\n                rc_event_ids: rcEventIds\r\n            } = data\r\n            if (dcEvent && !(\"{}\" == JSON.stringify(dcEvent)) && dcEventParams && !(\"{}\" == JSON.stringify(dcEventParams))) {\r\n                rowDropDown = true;\r\n                for (let key in dcEventParams) {\r\n                    cacheRowDropDown.push(key);\r\n                }\r\n            } else if (eventData && !(\"{}\" == JSON.stringify(eventData))) {\r\n                rowDropDown = false;\r\n                for (let key in eventData) {\r\n                    if (eventData[key]) {\r\n                        const cellIndex = [];\r\n                        cacheCellDropDown[key] = cellIndex;\r\n                        for (let key1 in eventData[key]) {\r\n                            cacheCellDropDown[key].push(key1);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            for (let r = 1; r < (rowCount); r++) {\r\n                const dataItem = sheet.getDataItem(r);\r\n                if (dataItem.hasOwnProperty('dynamicPropSet') && dataItem.dynamicPropSet.hasOwnProperty('qdp_data_flag')) {\r\n                    continue;\r\n                }\r\n                for (let c = 0; c < colCount; c++) {\r\n                    if (rowDropDown) {\r\n                        for (let i = 0; i < cacheRowDropDown.length; i++) {\r\n                            if (r == (cacheRowDropDown[i] - 0)) {\r\n                                const h1 = new GC.Spread.Sheets.CellTypes.HyperLink();\r\n                                const formatter = sheet.getFormatter(r, c);\r\n                                h1.text(h1.format(sheet.getCell(r, c).value(), formatter));\r\n                                h1.activeOnClick(true);\r\n                                h1.onClickAction(function () {\r\n                                    spread.commandManager().execute({\r\n                                        cmd: 'dropdownquery',\r\n                                        self: self\r\n                                    });\r\n                                });\r\n                                sheet.setCellType(r, c, h1, GC.Spread.Sheets.SheetArea.viewport);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        for (let key in cacheCellDropDown) {\r\n                            if ((r + '') === key) {\r\n                                for (let i = 0; i < cacheCellDropDown[key].length; i++) {\r\n                                    const h1 = new GC.Spread.Sheets.CellTypes.HyperLink();\r\n                                    const formatter = sheet.getFormatter(r, cacheCellDropDown[key][i]);\r\n                                    h1.text(h1.format(sheet.getCell(r, cacheCellDropDown[key][i]).value(), formatter));\r\n                                    h1.activeOnClick(true);\r\n                                    h1.onClickAction(function () {\r\n                                        spread.commandManager().execute({\r\n                                            cmd: 'dropdownquery',\r\n                                            self: self\r\n                                        });\r\n                                    });\r\n                                    sheet.setCellType(r, cacheCellDropDown[key][i], h1, GC.Spread.Sheets.SheetArea.viewport);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            spread.commandManager().register('dropdownquery', {\r\n                canUndo: true,\r\n                execute: function (context, options, isUndo) {\r\n                    const row = context.getActiveSheet().getActiveRowIndex();\r\n                    const col = context.getActiveSheet().getActiveColumnIndex();\r\n                    // åå»äºä»¶çé»è¾\r\n                    let event, params;\r\n                    // è¡ç¹å»æ°æ®\r\n                    if (dcEvent && !(\"{}\" == JSON.stringify(dcEvent)) && dcEventParams && !(\"{}\" == JSON.stringify(dcEventParams))) {\r\n                        event = dcEvent;\r\n                        // args.rowä¸ºè¡åºå·ï¼ä¸å\r\n                        params = dcEventParams[row];\r\n                        // å¦æeventDataæ°æ®ä¸ä¸ºç©ºï¼å¹¶ä¸å¯¹åºè¡çæ°æ®ä¹ä¸ä¸ºç©º\r\n                        // ååæ ¼æ°æ®\r\n                    } else if (eventData && !(\"{}\" == JSON.stringify(eventData)) && eventData[row] && !(\"{}\" == JSON.stringify(eventData[row]))) {\r\n                        let thisEventId;\r\n                        // å¦æå¯¹åºè¡åå«-1ï¼åå-1ä¸­çæ°æ®, å¦ååå¯¹åºåå·çæ°æ®\r\n                        // args.colä¸ºååºå·\r\n                        let thisEventData = eventData[row][-1] || eventData[row][col];\r\n                        if (thisEventData && !(\"{}\" == JSON.stringify(thisEventData))) {\r\n                            if (!rcEventIds && rcEventIds.length) {\r\n                                const obj = {};\r\n                                for (let key in thisEventData) {\r\n                                    if (rcEventIds.findIndex((el: any) => el == key) < 0) {\r\n                                        obj[key] = thisEventData[key];\r\n                                    }\r\n                                }\r\n                                thisEventData = obj;\r\n                            }\r\n                            let index = 0;\r\n                            for (let key in thisEventData) {\r\n                                if (index == 0) {\r\n                                    thisEventId = key;\r\n                                } else {\r\n                                    break;\r\n                                }\r\n                                index++;\r\n                            }\r\n                            params = thisEventData[thisEventId];\r\n                        }\r\n\r\n                        // æ ¹æ®event idè·åevent\r\n                        if (thisEventId != null && thisEventId != undefined) {\r\n                            event = clickEvents[thisEventId] && !(\"{}\" == JSON.stringify(clickEvents[thisEventId])) ? clickEvents[thisEventId].event : {};\r\n                        }\r\n                    }\r\n                    let message;\r\n                    if (!(\"{}\" == JSON.stringify(event)) && !(\"{}\" == JSON.stringify(params))) {\r\n                        // è¿åæ°æ®\r\n                        message = { type: 'cellAction', event, params, defaults: data.defaults };\r\n                    }\r\n                    if (message) {\r\n                        try {\r\n                            extObj.inSuiteWindow().postMessage(message, location.origin)\r\n                        } catch (e) {\r\n                            console.log(e);\r\n                        }\r\n                    }\r\n                }\r\n            }, null, false, false, false, false);\r\n        } catch (e) { }\r\n    }\r\n\r\n    private getQueryParameters(entityParam: any, paramMap: any, parameterKey: any, key: any) {\r\n        try {\r\n            const tab = gspframeworkService.rtf.session.getCommonVariable();\r\n            if (tab && tab.tabId) {\r\n                const tid = tab.tabId + RtfServices.getInSuiteFrmUUID();\r\n                if (this.cache.get(tid) && this.cache.get(tid)[parameterKey]) {\r\n                    entityParam[key] = this.cache.get(tid)[parameterKey];\r\n                    paramMap.set(key, this.cache.get(tid)[parameterKey]);\r\n                }\r\n            }\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    bindSelectChanged(spread: any, queryId: any) {\r\n        const self = this;\r\n        spread.bind(GC.Spread.Sheets.Events.SelectionChanging, function (e: any, args: any) {\r\n            const tempData = {};\r\n            const selection = args.newSelections.pop();\r\n            const sheetArea = args.sheetArea === 0 ? 'sheetCorner' : args.sheetArea === 1 ? 'columnHeader' : args.sheetArea === 2 ? 'rowHeader' : 'viewPort';\r\n            if (selection) {\r\n                tempData['SpreadEvent'] = GC.Spread.Sheets.Events.SelectionChanging;\r\n                tempData['sheetArea'] = sheetArea;\r\n                tempData['row'] = selection.row;\r\n                tempData['column'] = selection.col;\r\n                tempData['rowCount'] = selection.rowCount;\r\n                tempData['colCount'] = selection.colCount;\r\n                this.selectChanging = tempData;\r\n            }\r\n        });\r\n        spread.bind(GC.Spread.Sheets.Events.CellClick, function (e: any, args: any) {\r\n            // è§£æå½åéä¸­çæ°æ®\r\n            const dataItems = [];\r\n            // èå¨åæ°\r\n            let linkageParams = {};\r\n            for (let rowIndex = 0; rowIndex < this.selectChanging.rowCount; rowIndex++) {\r\n                if (self.joinParam.controlType !== 'crosstab') {\r\n                    const dataItem = args.sheet.getDataItem(rowIndex + this.selectChanging.row);\r\n                    linkageParams = dataItem;\r\n                    dataItems.push(dataItem);\r\n                } else {\r\n                    if (this.selectChanging.column === -1) {\r\n                        this.selectChanging.colCount = this.selectChanging.colCount + 1;\r\n                    }\r\n                    for (let colIndex = 0; colIndex < this.selectChanging.colCount; colIndex++) {\r\n                        const dataItem = {};\r\n                        if (self.joinParam.controlType === 'crosstab') { // äº¤åè¡¨\r\n                            if (args.sheetArea === 1) {\r\n                                this.selectChanging.row = 0;\r\n                            }\r\n                            if (colIndex + this.selectChanging.column < self.joinParam.rowHeaderColInfo.end) {\r\n                                continue;\r\n                            }\r\n                            // è·åè¡æ é¢çæ°æ®\r\n                            for (let i = self.joinParam.rowHeaderColInfo.start; i < self.joinParam.rowHeaderColInfo.end; i++) {\r\n                                const value = args.sheet.getValue(rowIndex + this.selectChanging.row, i, GC.Spread.Sheets.SheetArea.viewport);\r\n                                const name = args.sheet.getValue(self.joinParam.colHeaderRowInfo.start, i, GC.Spread.Sheets.SheetArea.colHeader);\r\n                                const colInfo = self.joinParam.colInfos.find((x: any) => x.dimension === 1 && x.name === name).bindField;\r\n                                dataItem[colInfo] = value;\r\n                            }\r\n                            // è·ååæ é¢çæ°æ®\r\n                            for (let i = self.joinParam.colHeaderRowInfo.start; i < self.joinParam.colHeaderRowInfo.end; i++) {\r\n                                const value = args.sheet.getValue(i, colIndex + this.selectChanging.column, GC.Spread.Sheets.SheetArea.colHeader);\r\n                                const colInfo = self.joinParam.colInfos.filter((x: any) => x.dimension === 2)[i - self.joinParam.colHeaderRowInfo.start].bindField;\r\n                                dataItem[colInfo] = value;\r\n                            }\r\n                            // è·åå¼æ é¢çæ°æ®\r\n                            const value = args.sheet.getValue(rowIndex + this.selectChanging.row, colIndex + this.selectChanging.column, GC.Spread.Sheets.SheetArea.viewport);\r\n                            const name = args.sheet.getValue(self.joinParam.colHeaderRowInfo.end, colIndex + this.selectChanging.column, GC.Spread.Sheets.SheetArea.colHeader);\r\n\r\n                            const colInfo = self.joinParam.colInfos.find((x: any) => x.dimension === 3 && x.name === name).bindField;\r\n                            dataItem[colInfo] = value;\r\n                        }\r\n                        linkageParams = dataItem;\r\n                        dataItems.push(dataItem);\r\n                    }\r\n                }\r\n            }\r\n            // spread èå¨äºä»¶\r\n            EventBus.dispatch(queryId + '_spread_change', linkageParams);\r\n        });\r\n    }\r\n\r\n    setSortCellType(sheet: any, schema: any, qdpView: any) {\r\n        const self = this;\r\n        const header = sheet.getRowCount(GC.Spread.Sheets.SheetArea.colHeader);\r\n        for (let i = 0; i < sheet.getColumnCount(); i++) {\r\n            const span = sheet.getSpan(header - 1, i, GC.Spread.Sheets.SheetArea.colHeader);\r\n            if (span && span.rowCount > 1) {\r\n                sheet.setCellType(header - span.rowCount, i, new SortCellType(self.columnSort.bind(self), schema, qdpView), GC.Spread.Sheets.SheetArea.colHeader);\r\n            } else {\r\n                sheet.setCellType(header - 1, i, new SortCellType(self.columnSort.bind(self), schema, qdpView), GC.Spread.Sheets.SheetArea.colHeader);\r\n            }\r\n        }\r\n    }\r\n\r\n    mergeCell(sheet: any, schema: any) {\r\n        if (!this.getMergeCell(schema)) {\r\n            return;\r\n        }\r\n        const groupFieldCache1 = [];\r\n        this.getGroupField(groupFieldCache1, schema);\r\n        if (groupFieldCache1.length) {\r\n            return;\r\n        }\r\n        const columnCount = sheet.getColumnCount();\r\n        const rowCount = sheet.getRowCount();\r\n        let beginRowIndex = 0;\r\n        if (this.getShowFilterRow(schema)) {\r\n            beginRowIndex = 1;\r\n        }\r\n        // æ£æ¥åæ°\r\n        if (columnCount < 1 || (rowCount - beginRowIndex) < 1) {\r\n            return;\r\n        }\r\n        const rowSpans = {};\r\n        let curCellValues = '';\r\n        let currentName = '';\r\n        let key = '';\r\n        for (let row = beginRowIndex; row < rowCount; row++) {\r\n            if (sheet.getDataItem(row).hasOwnProperty(\"qdp_data_flag\") &&\r\n                (\r\n                    (sheet.getDataItem(row)[\"qdp_data_flag\"] + '') === (4 + '')\r\n                    || (sheet.getDataItem(row)[\"qdp_data_flag\"] + '') === (3 + '')\r\n                    || (sheet.getDataItem(row)[\"qdp_data_flag\"] + '') === (2 + '')\r\n                    || (sheet.getDataItem(row)[\"qdp_data_flag\"] + '') === (1 + '')\r\n                )) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < columnCount; col++) {\r\n                currentName = sheet.getCell(row, col).value();\r\n                if (col == 0) {\r\n                    key = currentName;\r\n                    if (rowSpans.hasOwnProperty(key)) {\r\n                        rowSpans[key].rowCount = row - rowSpans[key].row + 1;\r\n                    } else {\r\n                        rowSpans[key] = { 'row': row, 'rowCount': 1, 'col': col, 'colCount': 1 };\r\n                    }\r\n                } else {\r\n                    curCellValues = '';\r\n                    for (let i = 0; i <= col; i++) {\r\n                        curCellValues += sheet.getCell(row, i).value();\r\n                        curCellValues += \"_&_\";\r\n                    }\r\n                    if (rowSpans.hasOwnProperty(curCellValues)) {\r\n                        rowSpans[curCellValues].rowCount = row - rowSpans[curCellValues].row + 1;\r\n                    } else {\r\n                        rowSpans[curCellValues] = { 'row': row, 'rowCount': 1, 'col': col, 'colCount': 1 };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let k in rowSpans) {\r\n            if ((rowSpans[k].rowCount == 1 && rowSpans[k].colCount == 1) == false) {\r\n                sheet.addSpan(rowSpans[k].row, rowSpans[k].col, rowSpans[k].rowCount, rowSpans[k].colCount);\r\n            }\r\n        }\r\n    }\r\n\r\n    private columnSort(index: any, sheet: any, schema: any, qdpView: any) {\r\n        const loading = this.loadService.show({ container: 'body' });\r\n        try {\r\n            const header = sheet.getRowCount(GC.Spread.Sheets.SheetArea.colHeader);\r\n            if (schema && schema.schemaValue && schema.schemaValue.columnOption && schema.schemaValue.columnOption.colList && schema.schemaValue.columnOption.colList.length) {\r\n                let cell = null;\r\n                const span = sheet.getSpan(header - 1, index, GC.Spread.Sheets.SheetArea.colHeader);\r\n                if (span && span.rowCount > 1) {\r\n                    cell = sheet.getCell(header - span.rowCount, index, GC.Spread.Sheets.SheetArea.colHeader);\r\n                } else {\r\n                    cell = sheet.getCell(header - 1, index, GC.Spread.Sheets.SheetArea.colHeader);\r\n                }\r\n                if (schema && schema.isPrefab === 1) {\r\n                    loading.close();\r\n                    cell.tag(0);\r\n                    sheet.invalidateLayout();\r\n                    sheet.repaint();\r\n                    this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));\r\n                    return;\r\n                }\r\n                if (schema.isProtected === 1 || schema.isProtected === '1') {\r\n                    loading.close();\r\n                    cell.tag(0);\r\n                    sheet.invalidateLayout();\r\n                    sheet.repaint();\r\n                    this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n                    return;\r\n                }\r\n                const colList = schema.schemaValue.columnOption.colList;\r\n                const params = {\r\n                    index: index,\r\n                    cell: cell,\r\n                    colIndex: 0,\r\n                    sortInfo: { sortIndex: 0, bindField: '' },\r\n                    isText: []\r\n                };\r\n\r\n                // tslint:disable-next-line:prefer-for-of\r\n                for (let i = 0; i < colList.length; i++) {\r\n                    this.recursiveColumnSortIndex(colList[i], null, params);\r\n                }\r\n                // tslint:disable-next-line:prefer-for-of\r\n                for (let i = 0; i < colList.length; i++) {\r\n                    this.recursiveColumnSort(colList[i], null, params);\r\n                }\r\n                if (params.isText.length) {\r\n                    loading.close();\r\n                    cell.tag(0);\r\n                    sheet.invalidateLayout();\r\n                    sheet.repaint();\r\n                    this.msgService.warning(params.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));\r\n                    return;\r\n                }\r\n                const newSchema = JSON.parse(JSON.stringify(schema));\r\n                newSchema.schemaValue.columnOption.colList = colList;\r\n                newSchema.schemaValue = JSON.stringify(newSchema.schemaValue);\r\n                this.schemaManager.saveSchema({ schema: JSON.stringify(newSchema), groupType: qdpView.groupType }, '').subscribe(data => {\r\n                    loading.close();\r\n                    qdpView.initSpread(qdpView.queryId, newSchema.id, qdpView.controlType, qdpView.qoManagerCode, qdpView.pageIndex, qdpView.queryRelativeUrl, qdpView.conditionExpression, qdpView.groupType, qdpView.voId, true);\r\n                }, (error: any) => {\r\n                    loading.close();\r\n                    this.formErrorService.exception(error.Message, error);\r\n                });\r\n            } else {\r\n                loading.close();\r\n                this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));\r\n                return;\r\n            }\r\n        } catch (e) {\r\n            loading.close();\r\n        }\r\n    }\r\n\r\n    private recursiveColumnSortIndex(col, colList, params) {\r\n        if (colList == null) {\r\n            if (col.childList && col.childList.length) {\r\n                this.recursiveColumnSortIndex(null, col.childList, params);\r\n            } else {\r\n                if (col.sort !== 0 && col['sortIndex'] != null && col['sortIndex'] !== undefined && col.sortIndex > params.sortInfo.sortIndex) {\r\n                    params.sortInfo.sortIndex = col['sortIndex'];\r\n                    params.sortInfo.bindField = col.bindField;\r\n                }\r\n            }\r\n        } else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < colList.length; i++) {\r\n                if (colList[i].childList && colList[i].childList.length) {\r\n                    this.recursiveColumnSortIndex(null, colList[i].childList, params);\r\n                } else {\r\n                    if (colList[i].sort !== 0 && colList[i]['sortIndex'] != null && colList[i]['sortIndex'] !== undefined && colList[i].sortIndex > params.sortInfo.sortIndex) {\r\n                        params.sortInfo.sortIndex = colList[i]['sortIndex'];\r\n                        params.sortInfo.bindField = colList[i].bindField;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private recursiveColumnSort(col, colList, params) {\r\n        if (colList == null) {\r\n            if (col.childList && col.childList.length) {\r\n                this.recursiveColumnSort(null, col.childList, params);\r\n            } else {\r\n                if (params.colIndex === params.index) {\r\n                    if (col.type && col.type.toLowerCase() === 'text') {\r\n                        params.isText.push(col.bindField);\r\n                    } else {\r\n                        switch (params.cell.tag()) {\r\n                            case 0:\r\n                                col.sort = 0;\r\n                                col['sortIndex'] = 0;\r\n                                break;\r\n                            case 1:\r\n                                col.sort = 1;\r\n                                col['sortIndex'] = col['sortIndex'] !== null && col['sortIndex'] !== undefined && col['sortIndex'] > 0 ? col['sortIndex'] : col.bindField === params.sortInfo.bindField ? params.sortInfo.sortIndex : params.sortInfo.sortIndex + 1;\r\n                                break;\r\n                            case 2:\r\n                                col.sort = 2;\r\n                                col['sortIndex'] = col['sortIndex'] !== null && col['sortIndex'] !== undefined && col['sortIndex'] > 0 ? col['sortIndex'] : col.bindField === params.sortInfo.bindField ? params.sortInfo.sortIndex : params.sortInfo.sortIndex + 1;\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                params.colIndex++;\r\n            }\r\n        } else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < colList.length; i++) {\r\n                if (colList[i].childList && colList[i].childList.length) {\r\n                    this.recursiveColumnSort(null, colList[i].childList, params);\r\n                } else {\r\n                    if (params.colIndex === params.index) {\r\n                        if (colList[i].type && colList[i].type.toLowerCase() === 'text') {\r\n                            params.isText.push(colList[i].bindField);\r\n                        } else {\r\n                            switch (params.cell.tag()) {\r\n                                case 0:\r\n                                    colList[i].sort = 0;\r\n                                    colList[i]['sortIndex'] = 0;\r\n                                    break;\r\n                                case 1:\r\n                                    colList[i].sort = 1;\r\n                                    colList[i]['sortIndex'] = colList[i]['sortIndex'] !== null && colList[i]['sortIndex'] !== undefined && colList[i]['sortIndex'] > 0 ? colList[i]['sortIndex'] : colList[i].bindField === params.sortInfo.bindField ? params.sortInfo.sortIndex : params.sortInfo.sortIndex + 1;\r\n                                    break;\r\n                                case 2:\r\n                                    colList[i].sort = 2;\r\n                                    colList[i]['sortIndex'] = colList[i]['sortIndex'] !== null && colList[i]['sortIndex'] !== undefined && colList[i]['sortIndex'] > 0 ? colList[i]['sortIndex'] : colList[i].bindField === params.sortInfo.bindField ? params.sortInfo.sortIndex : params.sortInfo.sortIndex + 1;\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                    params.colIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private recursiveIsRedColumn(col, colList, params) {\r\n        if (colList == null) {\r\n            if (col.childList && col.childList.length) {\r\n                this.recursiveIsRedColumn(null, col.childList, params);\r\n            } else {\r\n                if (col.isRed) {\r\n                    params.isRedColumns.push({\r\n                        colIndex: params.colIndex\r\n                    });\r\n                }\r\n                params.colIndex++;\r\n            }\r\n        } else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < colList.length; i++) {\r\n                if (colList[i].childList && colList[i].childList.length) {\r\n                    this.recursiveIsRedColumn(null, colList[i].childList, params);\r\n                } else {\r\n                    if (colList[i].isRed) {\r\n                        params.isRedColumns.push({\r\n                            colIndex: params.colIndex\r\n                        });\r\n                    }\r\n                    params.colIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private isNumber(val) {\r\n        if (parseFloat(val).toString() == \"NaN\") {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n}","import { Observable, Subject } from \"rxjs\";\r\nimport { RenderOption } from \"../entity/RenderOption\";\r\nimport { ParameterUtils } from \"../util/parameter.utils\";\r\nimport { RenderExtendsUtils } from \"../util/render.extends.utils\";\r\nimport { SchemaUtils } from \"../util/schema.utils\";\r\nimport { ServicesUtils } from \"../util/services.utils\";\r\nimport { SpreadStyleUtils } from \"../util/spread.style.utils\";\r\nimport { RtfServices } from '@qdp/common';\r\n\r\ndeclare var GC: any;\r\n\r\nexport class BaseRender {\r\n    queryId: any;\r\n    type: any;\r\n    utils = new Map();\r\n    autoFitColumnIndex = 0;\r\n    cache: any;\r\n    msgService: any;\r\n    lcpService: any;\r\n    localizeService: any;\r\n    schemaManager: any;\r\n    formErrorService: any;\r\n    loadService: any;\r\n    funcInfoCache: any;\r\n    serviceCache: any;\r\n    isSchemaSelectChanged = false;\r\n    tabId: any;\r\n\r\n    constructor(_queryId: any, _controlType: any, _jointsearchInfoList?: any, _funcInfoCache?: any, _serviceCache?: any) {\r\n        this.tabId = RtfServices.getTabId(_queryId);\r\n        this.queryId = _queryId;\r\n        this.type = _controlType;\r\n        this.funcInfoCache = _funcInfoCache;\r\n        this.serviceCache = _serviceCache;\r\n        this.baseRenderInit(_queryId, _controlType, _jointsearchInfoList, _funcInfoCache);\r\n    }\r\n\r\n    private baseRenderInit(_queryId: any, _controlType: any, _jointsearchInfoList?: any, _funcInfoCache?: any) {\r\n        const parameterUtils = new ParameterUtils(_queryId, _funcInfoCache, this.serviceCache);\r\n        const schemaUtils = new SchemaUtils(this.serviceCache);\r\n        const spreadStyleUtils = new SpreadStyleUtils(_queryId, _controlType, _jointsearchInfoList, this.serviceCache);\r\n        const renderExtendsUtils = new RenderExtendsUtils(_queryId);\r\n        this.msgService = this.serviceCache.msgService; \r\n        this.cache = this.serviceCache.cacheService; \r\n        this.lcpService = this.serviceCache.lcpService; \r\n        this.loadService = this.serviceCache.loadService; \r\n        this.localizeService = this.serviceCache.localizeService; \r\n        this.schemaManager = this.serviceCache.schemaManagerService; \r\n        this.formErrorService = this.serviceCache.formErrorService; \r\n        this.queryId = _queryId;\r\n        this.utils.set('parameter', parameterUtils);\r\n        this.utils.set('schema', schemaUtils);\r\n        this.utils.set('spreadStyle', spreadStyleUtils);\r\n        this.utils.set('renderExtends', renderExtendsUtils);\r\n        this.utils.set('queryId', _queryId);\r\n    }\r\n\r\n    getData(params: any, queryRelativeUrl: any): Observable<any> {\r\n        this.cache.set(this.queryId + 'param', params);\r\n        return this.lcpService.getData(params, queryRelativeUrl);\r\n    }\r\n\r\n    changeData(data: any, value: any) {\r\n        if (data && data.data && data.dynamicCols && value) {\r\n            if (value.schemaValue.columnOption && value.schemaValue.columnOption.colList && value.schemaValue.columnOption.colList.length) {\r\n                const columns = value.schemaValue.columnOption.colList.filter(x => x.type === 'enum');\r\n                if (columns && columns.length > 0) {\r\n                    data.data.forEach(x => {\r\n                        columns.forEach(y => {\r\n                            const orginValue = x[y.bindField];\r\n                            let showValue = orginValue;\r\n                            if (data.resultEnumItems) {\r\n                                const resultEnumItem = data.resultEnumItems.find(resultEnumItem => resultEnumItem.enumName === y.bindField);\r\n                                if (resultEnumItem) {\r\n                                    const findShowValue = resultEnumItem.resultEnumInfoList.find(resultEnum => resultEnum.key === orginValue);\r\n                                    if (findShowValue) {\r\n                                        showValue = y.showType === '0' ? findShowValue.key : y.showType === '1' ? findShowValue.code : findShowValue.name;\r\n                                    }\r\n                                }\r\n                            }\r\n                            x[y.bindField] = showValue;\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * äºå¼äººåèªå®ä¹æ ¼å¼æ¹æ¡å¤ç\r\n     */\r\n    operateCustomFormatSchema(data: any, obj: RenderOption) {\r\n        if (data.customFormatScheme) {\r\n            obj.customFormatScheme = data.customFormatScheme;\r\n            this.schemaManager.customSchema[obj.groupType ? obj.groupType : obj.queryId] = data.customFormatScheme;\r\n            let customSchema = null;\r\n            if (obj.schemaId === '1') {\r\n                customSchema = this.schemaManager.mergeCustomSchema(obj.groupType ? obj.groupType : obj.queryId, obj.queryId);\r\n            }\r\n            if (customSchema && customSchema.schemaValue) {\r\n                ServicesUtils.setServices(RtfServices.getTabId(obj.queryId) + 'customScheme', JSON.stringify(customSchema.schemaValue));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤çåé¡µä¿¡æ¯\r\n     */\r\n    operatePagination(obj: RenderOption, params: any) {\r\n        const self = this;\r\n        if (obj.controlType === 'list') {\r\n            let pageSize = 0;\r\n            if (obj.schemaId !== '1' && self.schemaManager.schemaList && self.schemaManager.schemaList[obj.schemaId]) {\r\n                if (typeof self.schemaManager.schemaList[obj.schemaId].schemaValue === \"string\") {\r\n                    self.schemaManager.schemaList[obj.schemaId].schemaValue = JSON.parse(self.schemaManager.schemaList[obj.schemaId].schemaValue);\r\n                }\r\n                if (self.schemaManager.schemaList[obj.schemaId].schemaValue.otherOption.loadDataType !== 0) {\r\n                    pageSize = self.schemaManager.schemaList[obj.schemaId].schemaValue.otherOption.pageSize;\r\n                }\r\n            } else {\r\n                if (obj.schemaId === '1' && self.schemaManager.preSchema && self.schemaManager.preSchema.schemaValue.otherOption.loadDataType !== 0) {\r\n                    pageSize = self.schemaManager.preSchema.schemaValue.otherOption.pageSize;\r\n                }\r\n            }\r\n            if (pageSize !== 0) {\r\n                params['pageSize'] = pageSize;\r\n                params['pageIndex'] = !obj.pageIndex ? 1 : obj.pageIndex;\r\n            }\r\n        }\r\n    }\r\n\r\n    titleVariablesReplace(sheet: any, data: any) {\r\n        const colCount = sheet.getColumnCount(GC.Spread.Sheets.SheetArea.colHeader);\r\n        const rowCount = sheet.getRowCount(GC.Spread.Sheets.SheetArea.colHeader);\r\n        if (data && data.variables) {\r\n            for (let r = 0; r < rowCount; r++) {\r\n                for (let c = 0; c < colCount; c++) {\r\n                    sheet.setValue(r, c,\r\n                        this.variablesReplace(sheet.getValue(r, c, GC.Spread.Sheets.SheetArea.colHeader), data),\r\n                        GC.Spread.Sheets.SheetArea.colHeader);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    footerVariablesReplace(sheet: any, data: any) {\r\n        const rowCount = sheet.getRowCount();\r\n        const colCount = sheet.getColumnCount();\r\n        if (this.utils.get('spreadStyle').footerDataArray && this.utils.get('spreadStyle').footerDataArray.length) {\r\n            for (let r = 0; r < this.utils.get('spreadStyle').footerDataArray.length; r++) {\r\n                for (let c = 0; c < colCount; c++) {\r\n                    sheet.setValue(r + (rowCount - this.utils.get('spreadStyle').footerDataArray.length), c,\r\n                        this.variablesReplace(this.utils.get('spreadStyle').footerDataArray[r][c], data));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private variablesReplace(cellValue: any, data: any) {\r\n        if (data && data.variables) {\r\n            Object.keys(data.variables).forEach(key => {\r\n                const reg = new RegExp(key, 'g');\r\n                if (cellValue) {\r\n                    cellValue = cellValue.replace(reg, data.variables[key]);\r\n                }\r\n            });\r\n        }\r\n        return cellValue;\r\n    }\r\n\r\n    errorHandle(spread: any, errmsg: any) {\r\n        if (spread.getActiveSheet()) {\r\n            spread.removeSheet(0);\r\n        }\r\n        spread.options.tabStripVisible = false;\r\n        this.msgService.warning(errmsg);\r\n        return;\r\n    }\r\n}","import { EventBus } from \"@qdp/common\";\r\nimport { RtfServices } from \"@qdp/common\";\r\nimport { RenderOption } from \"../entity/RenderOption\";\r\nimport { BaseRender } from \"./base-render\";\r\n\r\ndeclare var GC: any;\r\n\r\nexport class CrosstabRender extends BaseRender {\r\n\r\n    constructor(_queryId: any, _controlType: any, _jointsearchInfoList?: any, _funcInfoCache?: any, _serviceCache?: any) {\r\n        super(_queryId, _controlType, _jointsearchInfoList, _funcInfoCache, _serviceCache);\r\n        this.crosstabInit();\r\n    }\r\n\r\n    private crosstabInit() {\r\n\r\n    }\r\n\r\n    /**\r\n     * æ¸²æ\r\n     * @param obj åæ°éç½®é¡¹\r\n     */\r\n    render(obj: RenderOption) {\r\n        const self = this;\r\n        this.queryId = obj.queryId;\r\n        obj.schemaId = obj.schemaId === 'prefab' ? '1' : obj.schemaId;\r\n        this.utils.get('schema').getSchemaInfo(obj).subscribe((schemaValue: any) => {\r\n            if (schemaValue) {\r\n                obj['schemaId'] = schemaValue.id;\r\n                obj['schemaValue'] = schemaValue;\r\n                // this.currentSchemaValueChanger.next(schemaValue);\r\n                EventBus.dispatch('schemaValueChanged', schemaValue);\r\n                let delay = schemaValue.schemaValue.otherOption.delay;\r\n                const interval = schemaValue.schemaValue.otherOption.interval;\r\n\r\n                const index = self.funcInfoCache.firstLoadCache.findIndex(el => el === this.tabId);\r\n                const firstLoad = schemaValue.schemaValue.otherOption.firstLoad;\r\n                if (index < 0 && this.isSchemaSelectChanged === false) {\r\n                    if (firstLoad === false) {\r\n                        self.funcInfoCache.firstLoadCache.push(this.tabId);\r\n                        obj.loading.close();\r\n                        if (obj.spread.getActiveSheet()) {\r\n                            obj.spread.getActiveSheet().deleteRows(0, obj.spread.getActiveSheet().getRowCount());\r\n                            obj.spread.getActiveSheet().options.colHeaderVisible = false;\r\n                            obj.spread.invalidateLayout();\r\n                            obj.spread.repaint();\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n                if (!delay) {\r\n                    delay = 0;\r\n                }\r\n                setTimeout(() => {\r\n                    this.getRenderDataForCrosstab.call(this, Object.assign({}, obj));\r\n                    if (interval > 0) {\r\n                        setInterval(() => {\r\n                            this.getRenderDataForCrosstab.call(this, Object.assign({}, obj));\r\n                        }, interval * 1000);\r\n                    }\r\n                }, delay * 1000);\r\n            } else {\r\n                obj['schemaId'] = '1';\r\n                this.getRenderDataForCrosstab.call(this, Object.assign({}, obj));\r\n            }\r\n        });\r\n    }\r\n\r\n    private getRenderDataForCrosstab(obj: RenderOption) {\r\n        const self = this;\r\n        obj.schemaId = obj.schemaId ? obj.schemaId : (obj.schemaValue && obj.schemaValue.id ? obj.schemaValue.id : '1');\r\n        if (!obj.formData) {\r\n            let params = this.utils.get('parameter').createParameters(Object.assign({}, obj, { pageIndex: 0, pageSize: 0 }));\r\n            params['queryId'] = obj.queryId ? obj.queryId : '';\r\n            // æ¥è¯¢æ°æ®åäºä»¶\r\n            params = this.utils.get('renderExtends').runRenderExtends('beforeQueryData', this.localizeService.getValue('spread.message.extend.query.before'), params, obj.spread);\r\n\r\n            try {\r\n                this.cache.set(self.tabId, JSON.parse(params['entityData']));\r\n                this.cache.set(self.tabId + 'extendCond', params['extendCond']);\r\n            } catch (e) { }\r\n\r\n            self.lcpService.getCol(params, obj.queryRelativeUrl).subscribe(resultData => {\r\n                const dynamicColumns = (resultData && resultData.dynamicCols) || [];\r\n                self.initJoinParams(obj, dynamicColumns);\r\n                self.schemaManager.setColInfo(dynamicColumns);\r\n                if (obj.schemaId === '1' || !obj.schemaId) {\r\n                    obj.loading.close();\r\n                    return self.errorHandle(obj.spread, this.localizeService.getValue('spread.message.validate.schemaInfo'));\r\n                }\r\n                self.lcpService.getCrosstabTemplate(params, obj.queryRelativeUrl).subscribe((template: any) => {\r\n                    if (!template || !template.sheets || !template.sheets.sheet1 || !template.sheets.sheet1.data || !template.sheets.sheet1.data.dataTable || !template.sheets.sheet1.data.dataTable['0']) {\r\n                        obj.loading.close();\r\n                        return self.errorHandle(obj.spread, this.localizeService.getValue('spread.message.validate.nodata'));\r\n                    }\r\n                    self.renderCrossTable(Object.assign({}, obj, { template }));\r\n\r\n                    const event = RtfServices.getMenuSwitchControlEvent();\r\n                    if (event && typeof event === 'object') {\r\n                        event.next('ok');\r\n                    }\r\n\r\n                    obj.loading.close();\r\n                    this.utils.get('spreadStyle').bindSelectChanged(obj.spread, obj.queryId);\r\n                }, (error: any) => {\r\n                    self.formErrorService.exception(error.Message, error);\r\n                    obj.loading.close();\r\n                });\r\n            }, (error: any) => {\r\n                self.formErrorService.exception(error.Message, error);\r\n                obj.loading.close();\r\n            });\r\n\r\n            this.cache.set('schema_schemaid' + obj.queryId, obj.schemaId);\r\n        }\r\n    }\r\n\r\n    private renderCrossTable(obj: RenderOption) {\r\n        obj.spread.suspendEvent();\r\n        obj.spread.suspendPaint();\r\n        if (obj.template) {\r\n            obj.spread.fromJSON(obj.template);\r\n            obj.spread.getActiveSheet().rowOutlines.direction(GC.Spread.Sheets.Outlines.OutlineDirection.backward);\r\n            const row = obj.spread.getActiveSheet().getRowCount();\r\n            for (let i = 0; i < row; i++) {\r\n                const cellType = obj.spread.getActiveSheet().getCellType(i, 0);\r\n                if (cellType && cellType.typeName === 'TreeCellType') {\r\n                    const level = cellType.level;\r\n                    for (let r = 0; r <= level; r++) {\r\n                        obj.spread.getActiveSheet().rowOutlines.group(i, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const sheet = obj.spread.getActiveSheet();\r\n        if (sheet) {\r\n            this.titleVariablesReplace(sheet, obj.data);\r\n            sheet.clearSelection();\r\n        }\r\n\r\n        // é¡µé¢æ¸²æåäºä»¶\r\n        this.utils.get('renderExtends').runRenderExtends('afterLoadData', this.localizeService.getValue('spread.message.extend.dataLoading.after'), obj.data, obj.spread);\r\n\r\n        obj.spread.resumePaint();\r\n        obj.spread.resumeEvent();\r\n        // å¢å å½åååæ ¼èæ¥åæ°ç¼å­\r\n        this.utils.get('spreadStyle').joinParam['controlType'] = obj.controlType;\r\n        this.cache.set(this.tabId + 'joinSearch', this.utils.get('spreadStyle').joinParam);\r\n    }\r\n\r\n    private initJoinParams(obj: RenderOption, dynamicColumns: any) {\r\n        this.utils.get('spreadStyle').joinParam = {\r\n            controlType: obj.controlType,\r\n            rowHeaderColInfo: { start: 0, end: 0 }, // è¡æ é¢èµ·å§ä½ç½®ä¿¡æ¯ï¼è¡å·ï¼\r\n            colHeaderRowInfo: { start: 0, end: 0 }, // åæ é¢ä¿¡æ¯èµ·å§ä½ç½®ä¿¡æ¯ï¼åå·)\r\n            valueColCount: 0, // è¡æ é¢ä¿¡æ¯èµ·å§ä½ç½®ä¿¡æ¯ï¼åå·)\r\n            colInfos: dynamicColumns, // åä¿¡æ¯\r\n        };\r\n        let columnHeaderRowCount = this.utils.get('spreadStyle').rowHeadersColumnCount = this.utils.get('spreadStyle').valueHeaderRowCount = 0;\r\n        let titleCount = 0;\r\n        if (obj.schemaId !== '1') {\r\n            titleCount += obj.schemaValue.schemaValue.titleOption.title ? 1 : 0;\r\n            titleCount += obj.schemaValue.schemaValue.titleOption.subTitles.length;\r\n            obj.schemaValue.schemaValue.columnOption.colList.forEach((data: any) => {\r\n                if (data.dimension && data.dimension !== 0) {\r\n                    if (data.dimension === 1) {\r\n                        this.utils.get('spreadStyle').rowHeadersColumnCount++;\r\n                    } else if (data.dimension === 2) {\r\n                        columnHeaderRowCount++;\r\n                    } else if (data.dimension === 3) {\r\n                        this.utils.get('spreadStyle').valueHeaderRowCount++;\r\n                    }\r\n                }\r\n            });\r\n            this.utils.get('spreadStyle').joinParam['controlType'] = obj.controlType;\r\n            this.utils.get('spreadStyle').joinParam['rowHeaderColInfo'] = { start: 0, end: this.utils.get('spreadStyle').rowHeadersColumnCount }; // è¡æ é¢èµ·å§ä½ç½®ä¿¡æ¯ï¼è¡å·ï¼\r\n            this.utils.get('spreadStyle').joinParam['colHeaderRowInfo'] = { start: titleCount, end: titleCount + columnHeaderRowCount }; // åæ é¢ä¿¡æ¯èµ·å§ä½ç½®ä¿¡æ¯ï¼åå·)\r\n            this.utils.get('spreadStyle').joinParam['valueColCount'] = this.utils.get('spreadStyle').valueHeaderRowCount; // è¡æ é¢ä¿¡æ¯èµ·å§ä½ç½®ä¿¡æ¯ï¼åå·)\r\n            this.utils.get('spreadStyle').joinParam['colInfos'] = obj.schemaValue.schemaValue.columnOption.colList; // åä¿¡æ¯\r\n        }\r\n        this.cache.set(this.tabId + 'joinSearch', this.utils.get('spreadStyle').joinParam);\r\n    }\r\n}","import { anyChanged } from \"@progress/kendo-angular-grid/dist/es2015/utils\";\r\nimport { EventBus, RtfServices } from \"@qdp/common\";\r\nimport { RenderOption } from \"../entity/RenderOption\";\r\nimport { BaseRender } from \"./base-render\";\r\n\r\ndeclare var GC: any;\r\ndeclare var gspframeworkService: any;\r\nexport class ListTreeRender extends BaseRender {\r\n    constructor(_queryId: any, _controlType: any, _jointsearchInfoList?: any, _funcInfoCache?: any, _serviceCache?: any) {\r\n        super(_queryId, _controlType, _jointsearchInfoList, _funcInfoCache, _serviceCache);\r\n        this.listRenderInit(_queryId, _controlType);\r\n    }\r\n\r\n    listRenderInit(_queryId: any, _controlType: any) {\r\n        this.type = _controlType;\r\n        this.queryId = _queryId;\r\n    }\r\n\r\n    /**\r\n     * æ¸²æ\r\n     * @param obj åæ°éç½®é¡¹\r\n     */\r\n    render(obj: RenderOption) {\r\n        const self = this;\r\n        this.queryId = obj.queryId;\r\n        this.type = obj.controlType;\r\n        obj.schemaId = obj.schemaId === 'prefab' ? '1' : obj.schemaId;\r\n        this.utils.get('schema').getSchemaInfo(obj).subscribe((schemaValue: any) => {\r\n            if (schemaValue) {\r\n                obj['schemaId'] = schemaValue.id;\r\n                obj['schemaValue'] = schemaValue;\r\n                // this.currentSchemaValueChanger.next(schemaValue);\r\n                EventBus.dispatch('schemaValueChanged', schemaValue);\r\n                let delay = schemaValue.schemaValue.otherOption.delay;\r\n                const interval = schemaValue.schemaValue.otherOption.interval;\r\n\r\n                const funcId = RtfServices.getTabId(obj.queryId);\r\n                const index = self.funcInfoCache.firstLoadCache.findIndex(el => el === funcId);\r\n                const firstLoad = schemaValue.schemaValue.otherOption.firstLoad;\r\n                if (index < 0 && this.isSchemaSelectChanged === false) {\r\n                    if (firstLoad === false) {\r\n                        self.funcInfoCache.firstLoadCache.push(funcId);\r\n                        obj.loading.close();\r\n                        if (obj.spread.getActiveSheet()) {\r\n                            obj.spread.getActiveSheet().deleteRows(0, obj.spread.getActiveSheet().getRowCount());\r\n                            obj.spread.getActiveSheet().options.colHeaderVisible = false;\r\n                            obj.spread.invalidateLayout();\r\n                            obj.spread.repaint();\r\n                            self.serviceCache.lcpService.pageInfoChange.next({\r\n                                pageCount: 1,\r\n                                pageIndex: 1,\r\n                                pageSize: schemaValue.schemaValue.otherOption.pageSize || 20,\r\n                                totalCount: 1\r\n                            });\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n                if (!delay) {\r\n                    delay = 0;\r\n                }\r\n                setTimeout(() => {\r\n                    this.getRenderDataForList.call(this, Object.assign({}, obj));\r\n                    if (interval > 0) {\r\n                        setInterval(() => {\r\n                            this.getRenderDataForList.call(this, Object.assign({}, obj));\r\n                        }, interval * 1000);\r\n                    }\r\n                }, delay * 1000);\r\n            } else {\r\n                obj['schemaId'] = '1';\r\n                this.getRenderDataForList.call(this, Object.assign({}, obj));\r\n            }\r\n        });\r\n    }\r\n\r\n    private getRenderDataForList(obj: RenderOption) {\r\n        const self = this;\r\n        obj.schemaId = obj.schemaId ? obj.schemaId : (obj.schemaValue && obj.schemaValue.id ? obj.schemaValue.id : '1');\r\n        if (!obj.formData) {\r\n            let params = this.utils.get('parameter').createParameters(Object.assign({}, obj, { pageIndex: 0, pageSize: 0 }));\r\n            params['queryId'] = obj.queryId ? obj.queryId : '';\r\n            self.operatePagination(obj, params);\r\n            // æ¥è¯¢æ°æ®åäºä»¶\r\n            params = this.utils.get('renderExtends').runRenderExtends('beforeQueryData', this.localizeService.getValue('spread.message.extend.query.before'), params, obj.spread);\r\n\r\n            try {\r\n                const tab = RtfServices.getTabId(obj.queryId);\r\n                this.cache.set(tab, JSON.parse(params['entityData']));\r\n                this.cache.set(tab + 'extendCond', params['extendCond']);\r\n            } catch (e) { }\r\n\r\n            self.getData(params, obj.queryRelativeUrl).subscribe((data: any) => {\r\n                data = data || { data: [], dynamicCols: [] };\r\n                if (obj.schemaId !== '1' || (data && data.dynamicCols && data.dynamicCols.length)) {\r\n                    self.schemaManager.dynamicCols[obj.groupType ? obj.groupType : obj.queryId] = data.dynamicCols || [];\r\n                    self.schemaManager.dynamicCols[obj.schemaId] = data.dynamicCols || [];\r\n                    self.schemaManager.operateDynamicColsForSchema(obj.schemaValue, obj.groupType ? obj.groupType : obj.queryId, obj.schemaId);\r\n                    self.schemaManager.schemaInfoChange.next({ schemaList: self.schemaManager.schemaInfo, isDefaultSchema: self.schemaManager.isDefaultSchema && self.schemaManager.isDefaultSchema[obj.queryId] ? self.schemaManager.isDefaultSchema[obj.queryId] : null, preSchema: self.schemaManager.preSchema });\r\n                }\r\n                if (!obj.schemaValue || obj.schemaId == '1') {\r\n                    self.operateCustomFormatSchema(data, obj);\r\n                }\r\n                // æ°æ®å è½½åäºä»¶\r\n                this.utils.get('renderExtends').runRenderExtends('beforeLoadData', self.localizeService.getValue('spread.message.extend.dataLoading.before'), data, obj.spread);\r\n\r\n                self.lcpService.getCol(params, obj.queryRelativeUrl).subscribe(resultData => {\r\n                    if (obj.schemaId === '1') {\r\n                        if (!data.dynamicCols.length) {\r\n                            data.dynamicCols = resultData.dynamicCols || [];\r\n                        }\r\n                    }\r\n                    obj.frozenCols = (resultData && resultData.dynamicCols) || [];\r\n                    obj['data'] = data;\r\n                    self.getListRenderTemplate(obj);\r\n                    // { schemaId: _schemaId, queryId, data, queryRelativeUrl, spread, schemaValue, pageIndex, controlType, loading }\r\n                });\r\n            }, (error: any) => {\r\n                self.formErrorService.exception(error.Message, error);\r\n                obj.loading.close();\r\n            });\r\n\r\n            this.cache.set('schema_schemaid' + obj.queryId, obj.schemaId);\r\n            // EventBus.dispatch('schema_schemaid', _schemaId);\r\n        } else {\r\n            obj['data'] = obj.formData;\r\n            obj['frozenCols'] = obj.formData.dynamicCols;\r\n            self.getListRenderTemplate(obj);\r\n            // { schemaId: _schemaId, queryId, formData, queryRelativeUrl, spread, schemaValue, pageIndex, controlType, loading }\r\n        }\r\n    }\r\n\r\n    private getListRenderTemplate(obj: RenderOption) {\r\n        const self = this;\r\n        self.schemaManager.getSpreadTemplate(obj.schemaId, obj.queryId, obj.data && obj.data.dynamicCols ? obj.data.dynamicCols : [], obj.queryRelativeUrl, obj.customFormatScheme, obj.frozenCols, obj.groupType).subscribe(template => {\r\n            template = template.returnValue ? JSON.parse(template.returnValue) : template;\r\n\r\n            self.renderList.call(self, Object.assign({}, obj, { template }));\r\n            self.utils.get('spreadStyle').bindSelectChanged(obj.spread, obj.queryId);\r\n\r\n            const event = RtfServices.getMenuSwitchControlEvent();\r\n            if (event && typeof event === 'object') {\r\n                event.next('ok');\r\n            }\r\n\r\n            EventBus.dispatch(self.queryId + 'spread_init', {});\r\n\r\n            obj.loading.close();\r\n        }, (error: any) => {\r\n            self.formErrorService.exception(error.Message, error);\r\n            obj.loading.close();\r\n        });\r\n    }\r\n\r\n    renderList(obj: RenderOption) {\r\n        const self = this;\r\n        this.type = obj.controlType;\r\n        obj.spread.suspendEvent();\r\n        obj.spread.suspendPaint();\r\n        obj.spread.fromJSON(obj.template);\r\n        const sheet = obj.spread.getActiveSheet();\r\n        // å¨ç²®éæ±ï¼å¤sheeté¡µ\r\n        if (obj.curSheet && obj.multiSheets.length) {\r\n            sheet.name(obj.curSheet);\r\n            for (let i = 0; i < obj.multiSheets.length; i++) {\r\n                if (obj.curSheet !== obj.multiSheets[i]) {\r\n                    obj.spread.addSheet(i, new GC.Spread.Sheets.Worksheet(obj.multiSheets[i]));\r\n                    obj.spread.sheets[i].deleteRows(0, obj.spread.sheets[i].getRowCount());\r\n                    obj.spread.sheets[i].deleteColumns(0, obj.spread.sheets[i].getColumnCount());\r\n                }\r\n            }\r\n            obj.spread.setActiveSheet(obj.curSheet);\r\n            obj.spread.options.tabStripVisible = true;\r\n            obj.spread.options.tabEditable = false;\r\n        }\r\n        // å¨ç²®éæ±ï¼å¤sheeté¡µ\r\n        this.utils.get('spreadStyle').cacheStyle(sheet);\r\n        let showZero = true;\r\n        if (obj.schemaValue && obj.schemaValue.schemaValue && obj.schemaValue.schemaValue.otherOption) {\r\n            if (obj.schemaValue.schemaValue.otherOption.showZero != null && obj.schemaValue.schemaValue.otherOption.showZero !== undefined) {\r\n                showZero = obj.schemaValue.schemaValue.otherOption.showZero;\r\n            }\r\n        }\r\n        if (obj.data && obj.data.data && obj.data.data.length) {\r\n            obj.data.data.forEach((item: any) => {\r\n                if (item.dynamicPropSet) {\r\n                    for (const key in item.dynamicPropSet) {\r\n                        item[key] = item.dynamicPropSet[key];\r\n                    }\r\n                }\r\n            });\r\n            // ä¿®æ¹æä¸¾å­æ®µæ¾ç¤º\r\n            self.changeData(obj.data, obj.schemaValue);\r\n            sheet.setDataSource(obj.data.data);\r\n            sheet.bindColumns(this.utils.get('spreadStyle').dataColInfoArray);\r\n            sheet.options.isProtected = true;\r\n            sheet.options.protectionOptions = {\r\n                allowSelectLockedCells: true,\r\n                allowSelectUnlockedCells: true,\r\n                allowFilter: true,\r\n                allowSort: true,\r\n                allowResizeRows: true,\r\n                allowResizeColumns: true,\r\n                allowEditObjects: false\r\n            };\r\n            obj.spread.options.allowCopyPasteExcelStyle = true;\r\n            obj.spread.options.allowExtendPasteRange = true;\r\n            obj.spread.options.copyPasteHeaderOptions = GC.Spread.Sheets.CopyPasteHeaderOptions.allHeaders;\r\n            sheet.rowOutlines.direction(GC.Spread.Sheets.Outlines.OutlineDirection.backward);\r\n            try {\r\n                if (!obj.schemaValue && obj.customFormatScheme) {\r\n                    if (typeof obj.customFormatScheme == 'string') {\r\n                        obj.schemaValue = {};\r\n                        obj.schemaValue['schemaValue'] = JSON.parse(obj.customFormatScheme);\r\n                    }\r\n                }\r\n            } catch (e) { }\r\n            this.utils.get('spreadStyle').applyStyle(sheet, obj.schemaValue, showZero);\r\n            this.utils.get('spreadStyle').linkField(obj.spread, sheet);\r\n            try {\r\n                let extObj = gspframeworkService.rtf.extendMethod.getExtObj();\r\n                if (extObj) {\r\n                    this.utils.get('spreadStyle').inSuiteLinkField(obj.spread, sheet, extObj);\r\n                }\r\n            } catch (e) {\r\n            }\r\n            this.footerVariablesReplace(sheet, obj.data);\r\n        } else {\r\n            this.footerVariablesReplace(sheet, obj.data);\r\n            sheet.deleteRows(0, 1);\r\n        }\r\n        this.titleVariablesReplace(sheet, obj.data);\r\n        this.utils.get('spreadStyle').setAutoFitColumn(obj.schemaValue, sheet);\r\n        if (this.utils.get('spreadStyle').getShowHeaderSort(obj.schemaValue)) {\r\n            this.utils.get('spreadStyle').setSortCellType(sheet, obj.schemaValue, obj.qdpView);\r\n        }\r\n        if (obj.controlType == 'list') {\r\n            this.utils.get('spreadStyle').mergeCell(sheet, obj.schemaValue);\r\n        }\r\n        sheet.clearSelection();\r\n        // é¡µé¢æ¸²æåäºä»¶\r\n        this.utils.get('renderExtends').runRenderExtends('afterLoadData', this.localizeService.getValue('spread.message.extend.dataLoading.after'), obj.data, obj.spread);\r\n\r\n        obj.spread.resumePaint();\r\n        obj.spread.resumeEvent();\r\n        // å¢å å½åååæ ¼èæ¥åæ°ç¼å­\r\n        this.utils.get('spreadStyle').joinParam['controlType'] = this.type;\r\n        this.cache.set(RtfServices.getTabId(obj.queryId) + 'joinSearch', this.utils.get('spreadStyle').joinParam);\r\n    }\r\n}","import { Injectable, Injector, Optional, EventEmitter } from '@angular/core';\r\nimport { SchemaManagerService, LcpService, ParasMappingManagerService, JointSearchManagerService } from '@qdp/common';\r\nimport { Observable, of, Subject } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { CacheService } from '@ecp-caf/caf-common';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { DataRenderExtendService, EventBus } from '@qdp/common';\r\nimport { RtfServices } from '@qdp/common';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { FormErrorService } from '@farris/command-services';\r\nimport { CloudprintService } from '@gsp-svc/cloudprint';\r\nimport { ServicesUtils } from '../../util/services.utils';\r\nimport { RenderOption } from '../../entity/RenderOption';\r\nimport { CrosstabRender } from '../../engine/crosstab-render';\r\nimport { ListTreeRender } from '../../engine/list-render';\r\n\r\ndeclare var GC: any;\r\ndeclare var TreeCellType: any;\r\ndeclare var MyNumFormatter: any;\r\ndeclare var FilterCellType: any;\r\ndeclare var gspframeworkService: any;\r\ndeclare var SortCellType: any;\r\n\r\n@Injectable()\r\nexport class RenderService {\r\n  cloudprintService: CloudprintService;\r\n  formErrorService: any;\r\n  localizeService: LocalizeService;\r\n  notifyService: NotifyService;\r\n  serviceCache = {};\r\n  columnCount = 0;\r\n  operations = {};\r\n  renderObject: any;\r\n  spread: any;\r\n  funcInfoCache = {\r\n    funcIds: [],\r\n    firstLoadCache: []\r\n  }\r\n\r\n  constructor(\r\n    public schemaManager: SchemaManagerService,\r\n    public lcpService: LcpService,\r\n    private cache: CacheService,\r\n    private loadService: LoadingService,\r\n    private msgService: MessagerService,\r\n    @Optional() private dataRenderExtendService: DataRenderExtendService,\r\n    @Optional() private injector: Injector\r\n  ) {\r\n    const self = this;\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.formErrorService = this.injector.get(FormErrorService);\r\n      this.cloudprintService = this.injector.get(CloudprintService);\r\n      this.notifyService = this.injector.get(NotifyService);\r\n      this.setService();\r\n      self.schemaManager.operationChange.subscribe((value: any) => {\r\n        if (value) {\r\n          self.operations = value;\r\n        }\r\n      })\r\n      self.setSecurityLevel();\r\n    }\r\n  }\r\n\r\n  private setService() {\r\n    const tabId = RtfServices.getTabId() || 'default';\r\n    this.serviceCache[tabId] = {\r\n      'formErrorService': this.formErrorService,\r\n      'cloudprintService': this.cloudprintService,\r\n      'schemaManagerService': this.schemaManager,\r\n      'lcpService': this.lcpService,\r\n      'cacheService': this.cache,\r\n      'loadingService': this.loadService,\r\n      'msgService': this.msgService,\r\n      'localizeService': this.localizeService,\r\n      'notifyService': this.notifyService\r\n    };\r\n  }\r\n\r\n  private getService() {\r\n    const tabId = RtfServices.getTabId() || 'default';\r\n    return this.serviceCache[tabId];\r\n  }\r\n\r\n  private setSecurityLevel() {\r\n    this.lcpService.variablesChange.subscribe((data: any) => {\r\n      if (data && data.hasOwnProperty('securityLevel') && data['securityLevel']) {\r\n        this.cache.set(RtfServices.getTabId() + 'securityLevel', data['securityLevel']);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getSecurityLevel() {\r\n    if (this.cache.get(RtfServices.getTabId() + 'securityLevel')) {\r\n      return this.cache.get(RtfServices.getTabId() + 'securityLevel');\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  render(option: RenderOption) {\r\n    if (!option.loading) {\r\n      option.loading = this.loadService.show({ container: 'body' });\r\n    }\r\n    this.spread = option.spread ? option.spread : null;\r\n    this.renderObject = this.getRender(option);\r\n    this.renderObject.render(option);\r\n  }\r\n\r\n  private getRender(obj: RenderOption) {\r\n    this.setService();\r\n    ServicesUtils.setServices('dataRenderExtendService' + obj.queryId, this.dataRenderExtendService);\r\n    let render;\r\n    switch (obj.controlType) {\r\n      case 'crosstab':\r\n        render = new CrosstabRender(obj.queryId, obj.controlType, obj.jointsearchInfoList, this.funcInfoCache, this.getService());\r\n        break;\r\n      default:\r\n        render = new ListTreeRender(obj.queryId, obj.controlType, obj.jointsearchInfoList, this.funcInfoCache, this.getService());\r\n        break;\r\n    }\r\n    render.isSchemaSelectChanged = obj.isSchemaSelectChanged ? obj.isSchemaSelectChanged : false;\r\n    return render;\r\n  }\r\n\r\n  exportData(renderOption: RenderOption) {\r\n  // exportData(queryId: any, schemaId: any, controlType: any, pageIndex?: number, qoManagerCode?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, voId?: any, totalCount?: any, exportType?: any) {\r\n    const loading = this.loadService.show({ container: 'body' });\r\n    this.renderObject.utils.get('schema').getSchemaInfo({ schemaId: renderOption.schemaValue, queryId: renderOption.queryId, queryRelativeUrl: renderOption.queryRelativeUrl, groupType: renderOption.groupType }).subscribe(value => {\r\n      renderOption.schemaId = renderOption.schemaId ? renderOption.schemaId : (value && value.id ? value.id : '1');\r\n      let schemaName = value && value.schemaValue && value.schemaValue.titleOption && value.schemaValue.titleOption.title\r\n        ? value.schemaValue.titleOption.title\r\n        : value && value.schemaName\r\n          ? value.schemaName\r\n          : '';\r\n      if (RtfServices.getFuncName()) {\r\n        schemaName = RtfServices.getFuncName() + '-' + schemaName;\r\n      }\r\n      renderOption.excelExportName = schemaName;\r\n      const params = this.renderObject.utils.get('parameter').createParameters(renderOption);\r\n      params['exportType'] = renderOption.exportType ? renderOption.exportType : '';\r\n      let isCustomShema = false;\r\n      let customSchema = null;\r\n      if (params['schemaId'] === '1') {\r\n        if (ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme')) {\r\n          isCustomShema = true;\r\n          params.customSchema = ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme');\r\n          customSchema = JSON.parse(params.customSchema);\r\n          if (!params.excelExportName) {\r\n            params.excelExportName = customSchema && customSchema.titleOption && customSchema.titleOption.title\r\n              ? customSchema.titleOption.title : 'export'\r\n          }\r\n        } else {\r\n          this.msgService.warning(this.localizeService.getValue('spread.message.export'));\r\n          loading.close();\r\n          return;\r\n        }\r\n      }\r\n      if (this.operations['QdpQueryExport'] === false) {\r\n        this.msgService.warning(this.localizeService.getValue('spread.message.validate.qdpQueryExport'));\r\n        loading.close();\r\n        return;\r\n      }\r\n\r\n      try {\r\n        if (renderOption.controlType === 'treelist' && this.spread) {\r\n          let expandNodes = '';\r\n          if (value && value.schemaValue && value.schemaValue.otherOption && value.schemaValue.otherOption.treeInfoType !== 2) {\r\n            const pathField = value.schemaValue.otherOption.treeInfoType === 0 ? value.schemaValue.otherOption.pathField : value.schemaValue.otherOption.idField;\r\n            if (pathField) {\r\n              for (let i = 0; i < this.spread.getActiveSheet().getRowCount(); i++) {\r\n                if (this.spread.getActiveSheet().rowOutlines.isCollapsed(i)) {\r\n                  expandNodes += ',' + this.spread.getActiveSheet().getDataItem(i)[pathField];\r\n                }\r\n              }\r\n              params['expandNodes'] = expandNodes.substring(1);\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n      }\r\n\r\n      this.columnCount = 0;\r\n      if (!isCustomShema) {\r\n        this.calculationColumnCount(value.schemaValue.columnOption.colList);\r\n      } else {\r\n        if (customSchema && customSchema.columnOption && customSchema.columnOption.colList) {\r\n          this.calculationColumnCount(customSchema.columnOption.colList);\r\n        }\r\n      }\r\n      this.lcpService.loading = loading;\r\n      if (this.getSecurityLevel()) {\r\n        params.excelExportName += '_' + this.getSecurityLevel();\r\n      }\r\n      if ((this.columnCount * renderOption.totalCount) < 100000) {\r\n        this.lcpService.exportData(params, renderOption.queryRelativeUrl);\r\n        loading.close();\r\n      } else {\r\n        this.lcpService.aysnExportData(params, renderOption.queryRelativeUrl);\r\n        loading.close();\r\n        this.msgService.warning(this.localizeService.getValue('spread.message.aysnExport'));\r\n      }\r\n    });\r\n  }\r\n\r\n  private calculationColumnCount(colList: any) {\r\n    try {\r\n      colList.forEach((item: any) => {\r\n        if (item.childList && item.childList.length) {\r\n          this.calculationColumnCount(item.childList);\r\n        } else {\r\n          this.columnCount += 1;\r\n        }\r\n      });\r\n    } catch (e) { this.columnCount = 0; }\r\n  }\r\n\r\n  clearCache(queryId: any, schemaId: any, controlType: any, qoManagerCode?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, voId?: any) {\r\n    this.renderObject.utils.get('schema').getSchemaInfo({ schemaId, queryId, queryRelativeUrl, groupType }).subscribe(value => {\r\n      schemaId = schemaId ? schemaId : (value && value.id ? value.id : '1');\r\n      const schemaName = value && value.schemaValue && value.schemaValue.titleOption && value.schemaValue.titleOption.title\r\n        ? value.schemaValue.titleOption.title\r\n        : value && value.schemaName\r\n          ? value.schemaName\r\n          : '';\r\n      const params = this.renderObject.utils.get('parameter').createParameters({\r\n        queryId,\r\n        controlType,\r\n        schemaId,\r\n        qoManagerCode,\r\n        pageIndex: 0,\r\n        pageSize: 0,\r\n        excelExportName: schemaName,\r\n        filterCondition,\r\n        voId\r\n      });\r\n      if (ServicesUtils.getServices(RtfServices.getTabId(queryId) + 'customScheme')) {\r\n        params.customSchema = ServicesUtils.getServices(RtfServices.getTabId(queryId) + 'customScheme');\r\n      }\r\n      this.lcpService.clearCache(params).subscribe(data => {\r\n        if (data) {\r\n          this.notifyService['success']({\r\n            title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('spread.message.clearCache'), timeout: 3000\r\n          } as NotifyOptions);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  pdfExportEvent(renderOption: RenderOption) {\r\n  // pdfExportEvent(queryId: any, schemaId: any, controlType: any, qoManagerCode?: any, printIntegration?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, pageIndex?: any, voId?: any) {\r\n    const loading = this.loadService.show({ container: 'body' });\r\n    try {\r\n      this.renderObject.utils.get('schema').getSchemaInfo({ schemaId: renderOption.schemaValue, queryId: renderOption.queryId, queryRelativeUrl: renderOption.queryRelativeUrl, groupType: renderOption.groupType }).subscribe(value => {\r\n        renderOption.schemaId = renderOption.schemaId ? renderOption.schemaId : (value && value.id ? value.id : '1');\r\n        let schemaName = value && value.schemaValue && value.schemaValue.titleOption && value.schemaValue.titleOption.title\r\n          ? value.schemaValue.titleOption.title\r\n          : value && value.schemaName\r\n            ? value.schemaName\r\n            : '';\r\n        if (RtfServices.getFuncName()) {\r\n          schemaName = RtfServices.getFuncName() + '-' + schemaName;\r\n        }\r\n        renderOption.excelExportName = schemaName;\r\n        const params = this.renderObject.utils.get('parameter').createParameters(renderOption);\r\n        if (params['schemaId'] === '1') {\r\n          if (ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme')) {\r\n            params.customSchema = ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme');\r\n            const customSchema = JSON.parse(params.customSchema);\r\n            if (!params.excelExportName) {\r\n              params.excelExportName = customSchema && customSchema.titleOption && customSchema.titleOption.title\r\n                ? customSchema.titleOption.title : 'export'\r\n            }\r\n          } else {\r\n            this.msgService.warning(this.localizeService.getValue('spread.message.print'));\r\n            loading.close();\r\n            return;\r\n          }\r\n        }\r\n        if (this.operations['QdpQueryPrint'] === false) {\r\n          this.msgService.warning(this.localizeService.getValue('spread.message.validate.qdpQueryPrint'));\r\n          loading.close();\r\n          return;\r\n        }\r\n        if (this.getSecurityLevel()) {\r\n          params.excelExportName += '_' + this.getSecurityLevel();\r\n        }\r\n        this.lcpService.pdfExportEvent(params, renderOption.queryRelativeUrl);\r\n        loading.close();\r\n      });\r\n    } catch (e) {\r\n      loading.close();\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  printPreView(renderOption: RenderOption) {\r\n  // printPreView(queryId: any, schemaId: any, controlType: any, qoManagerCode?: any, printIntegration?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, pageIndex?: any, voId?: any) {\r\n    this.renderObject.utils.get('schema').getSchemaInfo({ schemaId: renderOption.schemaValue, queryId: renderOption.queryId, queryRelativeUrl: renderOption.queryRelativeUrl, groupType: renderOption.groupType }).subscribe(value => {\r\n      renderOption.schemaId = renderOption.schemaId ? renderOption.schemaId : (value && value.id ? value.id : '1');\r\n      const schemaName = value && value.schemaValue && value.schemaValue.titleOption && value.schemaValue.titleOption.title\r\n        ? value.schemaValue.titleOption.title\r\n        : value && value.schemaName\r\n          ? value.schemaName\r\n          : '';\r\n      renderOption.excelExportName = schemaName;\r\n      const params = this.renderObject.utils.get('parameter').createParameters(renderOption);\r\n      if (params['schemaId'] === '1') {\r\n        if (ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme')) {\r\n          params.customSchema = ServicesUtils.getServices(RtfServices.getTabId(renderOption.queryId) + 'customScheme');\r\n          const customSchema = JSON.parse(params.customSchema);\r\n          if (!params.excelExportName) {\r\n            params.excelExportName = customSchema && customSchema.titleOption && customSchema.titleOption.title\r\n              ? customSchema.titleOption.title : 'export'\r\n          }\r\n        } else {\r\n          this.msgService.warning(this.localizeService.getValue('spread.message.preview'));\r\n          return;\r\n        }\r\n      }\r\n      if (this.getSecurityLevel()) {\r\n        params.excelExportName += '_' + this.getSecurityLevel();\r\n      }\r\n      this.lcpService.cloudprintService = this.cloudprintService;\r\n      this.lcpService.printPreView(params, renderOption.queryRelativeUrl);\r\n    });\r\n  }\r\n\r\n  clearFirstLoadCache(queryId?: any) {\r\n    const funcId = RtfServices.getTabId(queryId);\r\n    const index = this.funcInfoCache.firstLoadCache.findIndex(el => el === funcId);\r\n    if (index >= 0) {\r\n      this.funcInfoCache.firstLoadCache.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n","import { Component, Injector, Input, OnInit, OnChanges, SimpleChanges, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { FormErrorService } from '@farris/command-services';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { EventBus, JSONUtils, RtfServices, SchemaManagerService } from '@qdp/common';\r\nimport { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';\r\nimport { RenderService } from '../../service/render/render.service';\r\n\r\n@Component({\r\n  selector: 'dimension-setting',\r\n  templateUrl: './dimension-setting.component.html',\r\n  styleUrls: ['./dimension-setting.component.css']\r\n})\r\nexport class DimensionSettingComponent implements OnInit, OnDestroy {\r\n  @Input() controlType;\r\n  schemaValue: any; // æ ¼å¼æ¹æ¡ä¿¡æ¯\r\n  colList: any; // åä¿¡æ¯\r\n  @Input() queryRelativeUrl: any; // åä¿¡æ¯\r\n  @Input() queryId: string;\r\n  @Input() qoManagerCode: any;\r\n  @Input() qoId: any;\r\n  @Input() voId: any;\r\n  @Input() groupType: any;\r\n  @Input() spread: any;\r\n  @Input() conditionExpression: any;\r\n  @Input() jointsearchInfoList: any;\r\n  @Input() qdpView: any;\r\n  isCompare = false;\r\n  zero: any; // æªéæ©\r\n  rowDimension: any; // è¡ç»´åº¦\r\n  colDimension: any; // åç»´åº¦\r\n  valDimension: any; // å¼ç»´åº¦  \r\n  searchText = '';\r\n  groupIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n  public lists: any = [];\r\n  public listsCache: any = [];\r\n\r\n  public models = {\r\n    selected: null,\r\n    lists: this.lists\r\n  };\r\n\r\n  localizeService: LocalizeService;\r\n  renderService: RenderService;\r\n  msgService: MessagerService;\r\n  formErrorService: FormErrorService;\r\n  schemaManagerService: SchemaManagerService;\r\n\r\n  constructor(private injector: Injector) {\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.renderService = this.injector.get(RenderService);\r\n      this.msgService = this.injector.get(MessagerService);\r\n      this.formErrorService = this.injector.get(FormErrorService);\r\n      this.schemaManagerService = this.injector.get(SchemaManagerService);\r\n    }\r\n    this.initLists();\r\n  }\r\n\r\n  ngOnInit() {\r\n    const eventId = RtfServices.getTabId(this.queryId);\r\n    EventBus.register('schemaValueChanged', this.handleSchemaValueChanged.bind(this), eventId + 'dimensionSetting');\r\n  }\r\n  ngOnDestroy() { }\r\n\r\n  private initLists() {\r\n    this.lists = [];\r\n    for (let i = 0; i < 4; i++) {\r\n      this.lists.push({\r\n        name: this.localizeService.getValue('spread.crossTable.dimensionName')[i],\r\n        value: []\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå§åäº¤åè¡¨ç»´åº¦è®¾ç½®\r\n   */\r\n  initCrosstab() {\r\n    // this.renderService.renderObject.currentSchemaValueChanger.subscribe((schemaValue: any) => {\r\n    // });\r\n  }\r\n\r\n  private handleSchemaValueChanged(schemaValue: any) {\r\n    if (schemaValue) {\r\n      if (schemaValue.id === 1 || schemaValue.id === '1') return;\r\n      this.schemaValue = schemaValue;\r\n      if (this.controlType === 'crosstab') {\r\n        this.colList = schemaValue.schemaValue.columnOption.colList;\r\n        if (this.colList) {\r\n          this.zero = this.colList.filter((x: { dimension: number; }) => x.dimension === 0);\r\n          this.rowDimension = this.colList.filter(x => x.dimension === 1);\r\n          this.colDimension = this.colList.filter(x => x.dimension === 2);\r\n          this.valDimension = this.colList.filter(x => x.dimension === 3);\r\n          setTimeout(() => {\r\n            this.lists[0].value = this.zero;\r\n            this.listsCache = this.zero;\r\n            this.lists[1].value = this.rowDimension;\r\n            this.lists[2].value = this.colDimension;\r\n            this.lists[3].value = this.valDimension;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  moved(index: number, list: Array<any>) {\r\n    list.splice(index, 1);\r\n    this.selectedDimesion();\r\n    if (this.schemaValue) {\r\n      if (this.schemaValue.isProtected === 1 || this.schemaValue.isProtected === '1') {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n        return;\r\n      }\r\n      this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);\r\n      this.schemaManagerService.saveSchema({ 'schema': JSON.stringify(this.schemaValue) }, this.queryRelativeUrl).subscribe(() => {\r\n        this.renderService.render({ queryId: this.queryId, spread: this.spread, controlType: this.controlType, qoManagerCode: this.qoManagerCode, queryRelativeUrl: this.queryRelativeUrl, schemaValue: this.schemaValue, filterCondition: this.conditionExpression, groupType: this.groupType, voId: this.voId, jointsearchInfoList: this.jointsearchInfoList, fromCache: true, qdpView: this.qdpView });\r\n        this.schemaValue.schemaValue = typeof this.schemaValue.schemaValue === 'string' ? JSON.parse(this.schemaValue.schemaValue) : this.schemaValue.schemaValue;\r\n      }, (error: any) => {\r\n        this.formErrorService.exception(error.Message, error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private crosstabColumnValidate(columns: any) {\r\n    let flag = false;\r\n    if (this.controlType === 'crosstab') {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < columns.length; i++) {\r\n        if (columns[i].groupAggre !== 4 && columns[i].totalAggre !== 4) {\r\n          if (!'int,integer,float,double,decimal,number'.includes(columns[i].type ? columns[i].type.toLowerCase() : '')) {\r\n            flag = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  selectedDimesion() {\r\n    this.colList = [];\r\n    if (this.lists[0]) {\r\n      this.lists[0].value.forEach(value => {\r\n        value.dimension = 0;\r\n        value.isGroup = false;\r\n        value.groupAggre = 0;\r\n      });\r\n      this.colList = this.lists[0].value;\r\n    }\r\n    if (this.lists[1]) {\r\n      this.lists[1].value.forEach(value => {\r\n        value.dimension = 1;\r\n        value.isGroup = true;\r\n        value.groupAggre = 0;\r\n      });\r\n      if (this.colList.length === 0) {\r\n        this.colList = this.lists[1].value;\r\n      } else {\r\n        this.colList = this.colList.concat(this.lists[1].value);\r\n      }\r\n    }\r\n    if (this.lists[2]) {\r\n      this.lists[2].value.forEach(value => {\r\n        value.dimension = 2;\r\n        value.isGroup = true;\r\n        value.groupAggre = 0;\r\n      });\r\n      if (this.colList.length === 0) {\r\n        this.colList = this.lists[2].value;\r\n      } else {\r\n        this.colList = this.colList.concat(this.lists[2].value);\r\n      }\r\n    }\r\n    if (this.lists[3]) {\r\n      this.lists[3].value.forEach(value => {\r\n        value.dimension = 3;\r\n        value.isGroup = false;\r\n        value.groupAggre = 1;\r\n      });\r\n      if (this.colList.length === 0) {\r\n        this.colList = this.lists[3].value;\r\n      } else {\r\n        this.colList = this.colList.concat(this.lists[3].value);\r\n      }\r\n    }\r\n    if (this.colList.length > 0) {\r\n      try {\r\n        this.isCompare = JSONUtils.Compare({ schema: this.schemaValue.schemaValue.columnOption.colList }, { schema: this.colList });\r\n      } catch (e) { }\r\n      this.schemaValue.schemaValue.columnOption.colList = this.colList;\r\n    }\r\n  }\r\n\r\n  dimensionSearchValueOnChange(val: any) {\r\n    if (val) {\r\n      const searchCols = this.listsCache.find((item) => item.name.indexOf(val) >= 0);\r\n      this.lists[0].value = [...searchCols];\r\n    } else {\r\n      this.lists[0].value = [...this.listsCache];\r\n    }\r\n  }\r\n\r\n  dndListChange0($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[0].value = $event;\r\n    }\r\n  }\r\n  dndListChange1($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[1].value = $event;\r\n    }\r\n  }\r\n  dndListChange2($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[2].value = $event;\r\n    }\r\n  }\r\n  dndListChange3($event) {\r\n    if (this.crosstabColumnValidate($event)) {\r\n      for (let i = 0; i < $event.length; i++) {\r\n        const dimensionIndex = $event[i].dimension - 0;\r\n        if (dimensionIndex !== 3) {\r\n          this.lists[dimensionIndex].value = [...this.lists[dimensionIndex].value, $event.splice(i, 1)[0]]\r\n        }\r\n      }\r\n      this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));\r\n      return;\r\n    }\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[3].value = $event;\r\n    }\r\n  }\r\n}\r\n","import { EventHandlerVars } from '@angular/compiler/src/compiler_util/expression_converter';\r\nimport { Component, Injector, Input, OnInit, LOCALE_ID, OnChanges, SimpleChanges, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { FormErrorService } from '@farris/command-services';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { EventBus, JSONUtils, RtfServices, SchemaManagerService } from '@qdp/common';\r\nimport { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';\r\nimport { filter } from 'lodash-es';\r\nimport { RenderService } from '../../service/render/render.service';\r\n\r\n@Component({\r\n  selector: 'columns-setting',\r\n  templateUrl: './columns-setting.component.html',\r\n  styleUrls: ['./columns-setting.component.css']\r\n})\r\nexport class ColumnsSettingComponent implements OnInit, OnDestroy {\r\n  @Input() controlType;\r\n  schemaValue: any; // æ ¼å¼æ¹æ¡ä¿¡æ¯\r\n  colList: any; // åä¿¡æ¯\r\n  @Input() queryRelativeUrl: any; // åä¿¡æ¯\r\n  @Input() queryId: string;\r\n  @Input() qoManagerCode: any;\r\n  @Input() qoId: any;\r\n  @Input() voId: any;\r\n  @Input() groupType: any;\r\n  @Input() spread: any;\r\n  @Input() conditionExpression: any;\r\n  @Input() jointsearchInfoList: any;\r\n  @Input() qdpView: any;\r\n  hideColCache: any = []; // éèå\r\n  showColCache: any = []; // æ¾ç¤ºå\r\n  groupColCache: any = []; // åç»å\r\n  allColCache: any = []; // å¨é¨å\r\n  searchText = '';\r\n  isCompare = false;\r\n  groupIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n  public lists: any = [];\r\n  public listsCache: any = []; \r\n\r\n  multiSheets: any[];  //å¤sheeté¡µæ¯æ\r\n  curSheet: any;\r\n  multiSheetsSchemaIds: any = {};\r\n\r\n  public models = {\r\n    selected: null,\r\n    lists: this.lists\r\n  };\r\n\r\n  localizeService: LocalizeService;\r\n  renderService: RenderService;\r\n  formErrorService: FormErrorService;\r\n  schemaManagerService: SchemaManagerService;\r\n  localId: any;\r\n  formInline = true;\r\n  isOrNotPaging = true;\r\n\r\n  // formatTypeData: any = [\r\n  //   { name: 'è¯·éæ©', value: 0 },\r\n  //   { name: 'æ°å­', value: 1 },\r\n  //   { name: 'æ¥æ', value: 2 },\r\n  //   { name: 'é»è¾', value: 3 }\r\n  // ];\r\n  // formatTypeSelectValue: any = this.formatTypeData[0].value;\r\n  // formatText = '';\r\n  aggreData: any = [\r\n    { name: 'è¯·éæ©', value: 0 },\r\n    { name: 'åè®¡', value: 1 },\r\n    { name: 'æå°å¼', value: 2 },\r\n    { name: 'æå¤§å¼', value: 3 },\r\n    { name: 'è®¡æ°', value: 4 },\r\n    { name: 'å¹³åå¼', value: 5 }\r\n  ];\r\n  pageSelectValue: any = this.aggreData[0].value;\r\n  pageText = '';\r\n  colIsGroup: any = false;\r\n  groupSelectValue: any = this.aggreData[0].value;\r\n  groupSubSelectValue: any = this.aggreData[0].value;\r\n  groupText = '';\r\n  totalSelectValue: any = this.aggreData[0].value;\r\n  totalText = '';\r\n  currentColIndex = 0;\r\n  enumType: any = [\r\n    { name: 'ç´¢å¼', value: '0' },\r\n    { name: 'ç¼å·', value: '1' },\r\n    { name: 'åç§°', value: '2' }\r\n  ];\r\n  msgService: MessagerService;\r\n\r\n  constructor(private injector: Injector) {\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.renderService = this.injector.get(RenderService);\r\n      this.msgService = this.injector.get(MessagerService);\r\n      this.formErrorService = this.injector.get(FormErrorService);\r\n      this.schemaManagerService = this.injector.get(SchemaManagerService);\r\n      this.localId = this.injector.get(LOCALE_ID) || DEFAULT_LANGUAGE;\r\n      this.formInline = this.localId.toLowerCase() === DEFAULT_LANGUAGE;\r\n      this.aggreData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.aggregateData');\r\n      this.enumType = this.localizeService.getValue('ideCmp.schemaManager.columnOption.enumType');\r\n    }\r\n    this.initLists();\r\n  }\r\n\r\n  ngOnInit() {\r\n    const eventId = RtfServices.getTabId(this.queryId);\r\n    EventBus.register('pagingModeChanges', this.handlePagingModeChanged.bind(this), eventId + 'columnsSetting');\r\n    EventBus.register('schemaValueChanged', this.handleSchemaValueChanged.bind(this), eventId + 'columnsSetting');\r\n  }\r\n  ngOnDestroy() { }\r\n\r\n  private initLists() {\r\n    this.lists = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      this.lists.push({\r\n        name: this.localizeService.getValue('spread.crossTable.columnSetting')[i],\r\n        value: []\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åå§åäº¤åè¡¨ç»´åº¦è®¾ç½®\r\n   */\r\n  initCrosstab() {\r\n    // this.renderService.renderObject.currentSchemaValueChanger.subscribe((schemaValue: any) => {\r\n    // });\r\n  }\r\n\r\n  private handleSchemaValueChanged(schemaValue: any) {\r\n    if (schemaValue) {\r\n      this.schemaValue = schemaValue;\r\n      if (schemaValue.id === 1 || schemaValue.id === '1') {\r\n        this.lists[0].value = [];\r\n        this.listsCache = [];\r\n        this.lists[1].value = [];\r\n        this.lists[2].value = [];\r\n        return;\r\n      }\r\n      if (this.controlType !== 'crosstab') {\r\n        this.colList = schemaValue.schemaValue.columnOption.colList;\r\n        if (this.colList) {\r\n          this.hideColCache = []; // éèå\r\n          this.showColCache = []; // æ¾ç¤ºå\r\n          this.groupColCache = []; // åç»å\r\n          this.allColCache = []; // å¨é¨å\r\n          for (let i = 0; i < this.colList.length; i++) {\r\n            this.getSubColumns(this.colList[i], null, '');\r\n          }\r\n          setTimeout(() => {\r\n            this.lists[0].value = this.hideColCache;\r\n            this.listsCache = this.hideColCache;\r\n            this.lists[1].value = this.showColCache;\r\n            this.lists[2].value = this.groupColCache;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private getSubColumns(col: any, colList: any, pid: any) {\r\n    if (col) {\r\n      col['id'] = EventBus.guid();\r\n      col['pid'] = pid;\r\n      const pcol = JSON.parse(JSON.stringify(col));\r\n      pcol.childList = [];\r\n      this.allColCache.push(pcol);\r\n      if (col.childList && col.childList.length) {\r\n        this.getSubColumns(null, col.childList, col['id']);\r\n      } else {\r\n        if (col.isGroup) {\r\n          this.groupColCache.push(col);\r\n        } else if (col.visible) {\r\n          this.showColCache.push(col);\r\n        } else {\r\n          this.hideColCache.push(col);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < colList.length; i++) {\r\n        colList[i]['id'] = EventBus.guid();\r\n        colList[i]['pid'] = pid;\r\n        const pcol = JSON.parse(JSON.stringify(colList[i]));\r\n        pcol.childList = [];\r\n        this.allColCache.push(pcol);\r\n        if (colList[i].childList && colList[i].childList.length) {\r\n          this.getSubColumns(null, colList[i].childList, colList[i]['id']);\r\n        } else {\r\n          if (colList[i].isGroup) {\r\n            this.groupColCache.push(colList[i]);\r\n          } else if (colList[i].visible) {\r\n            this.showColCache.push(colList[i]);\r\n          } else {\r\n            this.hideColCache.push(colList[i]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  moved(index: number, list: Array<any>) {\r\n    list.splice(index, 1);\r\n    this.selectedDimesion();\r\n    if (this.schemaValue) {\r\n      if (this.schemaValue.isProtected === 1 || this.schemaValue.isProtected === '1') {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n        return;\r\n      }\r\n      this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);\r\n      this.schemaManagerService.saveSchema({ 'schema': JSON.stringify(this.schemaValue) }, this.queryRelativeUrl).subscribe(() => {\r\n        this.renderService.render({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets, schemaId: this.schemaValue.id, queryId: this.queryId, spread: this.spread, controlType: this.controlType, qoManagerCode: this.qoManagerCode, queryRelativeUrl: this.queryRelativeUrl, schemaValue: this.schemaValue, filterCondition: this.conditionExpression, groupType: this.groupType, voId: this.voId, jointsearchInfoList: this.jointsearchInfoList, fromCache: true, qdpView: this.qdpView });\r\n        this.schemaValue.schemaValue = typeof this.schemaValue.schemaValue === 'string' ? JSON.parse(this.schemaValue.schemaValue) : this.schemaValue.schemaValue;\r\n      }, (error: any) => {\r\n        this.formErrorService.exception(error.Message, error);\r\n      });\r\n    }\r\n  }\r\n\r\n  selectedDimesion() {\r\n    this.colList = [];\r\n    if (this.lists[0]) {\r\n      this.lists[0].value.forEach(value => {\r\n        value.isGroup = false;\r\n        value.visible = false;\r\n      });\r\n      this.colList = this.lists[0].value;\r\n    }\r\n    if (this.lists[1]) {\r\n      this.lists[1].value.forEach(value => {\r\n        value.isGroup = false;\r\n        value.visible = true;\r\n      });\r\n      if (this.colList.length === 0) {\r\n        this.colList = this.lists[1].value;\r\n      } else {\r\n        this.colList = this.colList.concat(this.lists[1].value);\r\n      }\r\n    }\r\n    if (this.lists[2]) {\r\n      this.lists[2].value.forEach(value => {\r\n        value.isGroup = true;\r\n        value.visible = false;\r\n      });\r\n      if (this.colList.length === 0) {\r\n        this.colList = this.lists[2].value;\r\n      } else {\r\n        this.colList = this.colList.concat(this.lists[2].value);\r\n      }\r\n    }\r\n    if (this.colList.length > 0) {\r\n      for (let i = 0; i < this.colList.length; i++) {\r\n        if (this.colList[i].isGroup) continue;\r\n        const filterCondition: any = { pid: this.colList[i]['pid'] };\r\n        if (i == 0 && this.colList.length > 1) {\r\n          if (this.colList.length > 2) {\r\n            if (this.colList[i]['pid'] && this.colList[i + 2]['pid'] && this.colList[i]['pid'] == this.colList[i + 2]['pid']) {\r\n              this.colList[i]['pid'] = this.colList[i + 2]['pid'];\r\n            }\r\n          } else {\r\n            if (this.colList[i]['pid'] && this.colList[i]['pid'] != this.colList[i + 1]['pid'] && filter(this.colList, filterCondition) && filter(this.colList, filterCondition).length > 1) {\r\n              this.colList[i]['pid'] = '';\r\n            }\r\n          }\r\n        } else if (i == (this.colList.length - 1) && this.colList.length > 1) {\r\n          if (this.colList[i]['pid'] && this.colList[i]['pid'] != this.colList[i - 1]['pid'] && filter(this.colList, filterCondition) && filter(this.colList, filterCondition).length > 1) {\r\n            this.colList[i]['pid'] = '';\r\n          }\r\n        } else if (i > 0 && i < (this.colList.length - 1)) {\r\n          if (this.colList[i - 1]['pid'] && this.colList[i + 1]['pid'] && this.colList[i - 1]['pid'] == this.colList[i + 1]['pid']) {\r\n            this.colList[i]['pid'] = this.colList[i - 1]['pid'];\r\n          }\r\n        }\r\n      }\r\n      for (let i = 0; i < this.colList.length; i++) {\r\n        this.recursiveFindParent(this.colList, i, this.colList[i]['pid']);\r\n      }\r\n\r\n      const objCache = {};\r\n      for (let i = 0; i < this.colList.length; i++) {\r\n        objCache[this.colList[i]['id']] = this.colList[i];\r\n      }\r\n      const result = [];\r\n      for (const key in objCache) {\r\n        const parent = objCache[objCache[key]['pid']];\r\n        if (!parent) {\r\n          result.push(objCache[key]);\r\n        } else {\r\n          parent['childList'].push(objCache[key])\r\n        }\r\n      }\r\n      if (this.colList.length > 0) {\r\n        try {\r\n          this.isCompare = JSONUtils.Compare({ schema: this.schemaValue.schemaValue.columnOption.colList }, { schema: result });\r\n        } catch (e) { }\r\n        this.schemaValue.schemaValue.columnOption.colList = result;\r\n        // this.schemaValue.schemaValue.columnOption.colList = this.colList;\r\n      }\r\n    }\r\n  }\r\n\r\n  private recursiveFindParent(colList: any[], index: any, pid: any) {\r\n    const colIndex = this.allColCache.findIndex(x => x.id == pid);\r\n    if (colIndex >= 0 && this.colList.findIndex(x => x.id === this.allColCache[colIndex].id) < 0) {\r\n      this.colList.splice(index, 0, this.allColCache[colIndex]);\r\n      if (this.allColCache[colIndex]['pid']) {\r\n        this.recursiveFindParent(colList, index, this.allColCache[colIndex]['pid']);\r\n      }\r\n    }\r\n  }\r\n\r\n  dimensionSearchValueOnChange(val: any) {\r\n    if (val) {\r\n      const searchCols = this.listsCache.find((item) => item.name.indexOf(val) >= 0);\r\n      this.lists[0].value = [...searchCols];\r\n    } else {\r\n      this.lists[0].value = [...this.listsCache];\r\n    }\r\n  }\r\n\r\n  dndListChange0($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[0].value = $event;\r\n    }\r\n  }\r\n  dndListChange1($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[1].value = $event;\r\n    }\r\n  }\r\n  dndListChange2($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[2].value = $event;\r\n    }\r\n  }\r\n  dndListChange3($event) {\r\n    if (this.lists && this.lists.length) {\r\n      this.lists[3].value = $event;\r\n    }\r\n  }\r\n\r\n  private handlePagingModeChanged(pagingMode: any) {\r\n    this.isOrNotPaging = pagingMode.value === 1;\r\n  }\r\n}\r\n","import {\r\n  Component, Input, OnChanges, SimpleChanges, AfterViewInit, OnDestroy,\r\n  ElementRef, Inject, OnInit, Renderer2, HostBinding, Injector, Optional,\r\n  ViewChild, LOCALE_ID, Output, EventEmitter\r\n} from '@angular/core';\r\nimport { RenderService } from '../../service/render/render.service';\r\nimport { FilterManagerService, SchemaManagerService, EventBus, DataRenderExtendService, JointSearchManagerService, LcpService, QDPCacheUtil, RtfServices } from '@qdp/common';\r\nimport { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ServicesUtils } from '../../util/services.utils';\r\nimport { RenderOption } from '../../entity/RenderOption';\r\nimport { DimensionSettingComponent } from '../dimension-setting/dimension-setting.component';\r\nimport { ColumnsSettingComponent } from '../columns-setting/columns-setting.component';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { FormErrorService } from '@farris/command-services';\r\nimport { CacheService } from '@ecp-caf/caf-common';\r\nimport { Subject } from 'rxjs';\r\n\r\ndeclare var GC: any;\r\n\r\nconst matches = (el, selector) => (el.matches || el.msMatchesSelector).call(el, selector);\r\n@Component({\r\n  selector: 'qdp-view',\r\n  templateUrl: './qdp-view.component.html',\r\n  styleUrls: ['./qdp-view.component.css']\r\n})\r\nexport class QdpViewComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n  localizeService: LocalizeService;\r\n  @ViewChild('sheet', { read: ElementRef }) public sheetEl: ElementRef;\r\n  @ViewChild(DimensionSettingComponent) dimensionSettingComponent;\r\n  @ViewChild(ColumnsSettingComponent) columnsSettingComponent;\r\n  aggreData: any = [\r\n    { name: 'è¯·éæ©', value: 0 },\r\n    { name: 'åè®¡', value: 1 },\r\n    { name: 'æå°å¼', value: 2 },\r\n    { name: 'æå¤§å¼', value: 3 },\r\n    { name: 'è®¡æ°', value: 4 },\r\n    { name: 'å¹³åå¼', value: 5 }\r\n  ];\r\n  groupSelectValue = this.aggreData[0].value;\r\n  groupText = '';\r\n  colIsGroup = false;\r\n  formInline = true;\r\n  localId: any;\r\n  msgService: any;\r\n  currentColIndex = 0;\r\n  schemaManager: SchemaManagerService;\r\n  jointSearchManagerService: JointSearchManagerService;\r\n  lcpService: LcpService;\r\n  pageIndex: any;\r\n  dataRenderExtendService: any;\r\n  loadService: LoadingService;\r\n  formErrorService: FormErrorService;\r\n  cache: CacheService;\r\n  @Input() isInitQdpView = true;  // æ¯å¦åå§åqdpViewComponent\r\n  @Input() isShowDimension = true;\r\n\r\n  constructor(\r\n    @Inject(ElementRef) elRef: ElementRef,\r\n    public renderService: RenderService,\r\n    private renderer: Renderer2,\r\n    private filterService: FilterManagerService,\r\n    @Optional() private injector: Injector\r\n  ) {\r\n    this.elRef = elRef;\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.msgService = this.injector.get(MessagerService);\r\n      this.localId = this.injector.get(LOCALE_ID) || DEFAULT_LANGUAGE;\r\n      this.formInline = this.localId.toLowerCase() === DEFAULT_LANGUAGE;\r\n      this.loadService = this.injector.get(LoadingService);\r\n      this.lcpService = this.injector.get(LcpService);\r\n      this.jointSearchManagerService = this.injector.get(JointSearchManagerService);\r\n      this.schemaManager = this.injector.get(SchemaManagerService);\r\n      this.dataRenderExtendService = this.injector.get(DataRenderExtendService);\r\n      this.formErrorService = this.injector.get(FormErrorService);\r\n      this.aggreData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.aggregateData');\r\n      this.cache = this.injector.get(CacheService);\r\n    }\r\n  }\r\n\r\n  private setServices() {\r\n    ServicesUtils.setServices('renderExtends' + this.queryId, this.dataRenderExtendService);\r\n  }\r\n\r\n  @HostBinding('class.f-utils-fill-flex-column') cls = true;\r\n  public spread: any;\r\n  private elRef: ElementRef;\r\n  private spreadOptions: any[];\r\n  public isOpen = false;\r\n  private docClickSubscription: any;\r\n  headerMenuTop = 0;\r\n  headerMenuLeft = 0;\r\n  headerMenuDisplay = 'none';\r\n  colIsGroupId = 'colIsGroup' + EventBus.guid();\r\n\r\n  style = {\r\n    width: '800px',\r\n    height: '600px'\r\n  };\r\n\r\n  // indicate all options\r\n  @Input() isCommonQdpViewComponent = false;\r\n  @Input() allowUserDragDrop: boolean;        // æå®æ¯å¦åè®¸ææ½Rangeæ°æ®\r\n  @Input() allowUserDragFill: boolean;        // æå®æ¯å¦åè®¸ææ½å¡«åèå´\r\n  @Input() allowUserZoom: boolean;            // æå®æ¯å¦åè®¸æä½ctrl, é¼ æ æ»è½®è¿è¡ç¼©æ¾\r\n  @Input() allowUserResize: boolean;          // æå®æ¯å¦åè®¸è°æ´ååè¡çå¤§å°\r\n  @Input() showHorizontalScrollbar: boolean;  // æå®æ¯å¦æ¾ç¤ºåç´æ¹åçæ»å¨æ¡\r\n  @Input() showVerticalScrollbar: boolean;    // æå®æ¯å¦æ¾ç¤ºæ°´å¹³æ¹åçæ»å¨æ¡\r\n  @Input() tabStripVisible: boolean;          // æå®æ¯å¦æ¾ç¤ºTabæ ç­¾é¡µ\r\n  @Input() allowUndo: boolean;                // æå®æ¯å¦åè®¸æ¤é\r\n  @Input() allowSheetReorder: boolean;        // æå®ç¨æ·æ¯å¦å¯ä»¥éæ°æåºSpreadç»ä»¶ä¸­çå·¥ä½è¡¨ï¼å¯é\r\n  @Input() allowCopyPasteExcelStyle: boolean; // æå®æ¯å¦åè®¸æ·è´ãç²è´´Excelæ ·å¼\r\n  @Input() allowExtendPasteRange: boolean;    // æå®æ¯å¦æ©å±ç²è´´èå´\r\n  @Input() copyPasteHeaderOptions: boolean;   // æå®æ·è´æ¯å¦åæ¬è¡¨å¤´\r\n  @Input() showDragFillSmartTag: boolean;     // æå®æ¯å¦æ¾ç¤ºææ½å¡«åå¯¹è¯æ¡\r\n  @Input() scrollbarShowMax: boolean;         // æå®æ¾ç¤ºçæ»å¨æ¡æ¯å¦åºäºå·¥ä½è¡¨ä¸­çæ´ä¸ªåæ°åè¡æ°\r\n  @Input() scrollbarMaxAlign: boolean;        // æå®æ»å¨æ¡æ¯å¦ä¸æ´»å¨å·¥ä½è¡¨çæåä¸è¡ååå¯¹é½\r\n  @Input() tabEditable: boolean;              // æå®æ¯å¦å¯ä»¥ç¼è¾sheet tab\r\n  @Input() newTabVisible: boolean;            // æå®æ¯å¦æ¾ç¤ºæ°å¢tabæé®\r\n  @Input() tabNavigationVisible: boolean;     // æå®æ¯å¦æ¾ç¤ºå·¥ä½è¡¨éé¡¹å¡å¯¼èª\r\n  @Input() backColor: string;                 // èæ¯è²è®¾ç½®\r\n  @Input() backgroundImage: string;           // èæ¯å¾çè®¾ç½®\r\n  @Input() backgroundImageLayout: number;     // èæ¯å¾ççå¸å±è®¾ç½®\r\n  @Input() grayAreaBackColor: string;         // ç°è²åºåçèæ¯è²è®¾ç½®\r\n  @Input() showResizeTip: number;             // æå®å¦ä½æ¾ç¤ºè°æ´å¤§å°æç¤º\r\n  @Input() showDragDropTip: boolean;          // æå®æ¯å¦æ¾ç¤ºææ½æç¤º\r\n  @Input() showDragFillTip: boolean;          // æå®æ¯å¦æ¾ç¤ºææ½å¡«åæç¤º\r\n  @Input() showScrollTip: number;             // æå®æ¯å¦æ¾ç¤ºæ»å¨æ¡æç¤º\r\n  @Input() highlightInvalidData: boolean;     // æå®æ¯å¦é«äº®æ¾ç¤ºæ ææ°æ®\r\n  @Input() useTouchLayout: boolean;           // æå®æ¯å¦ä½¿ç¨è§¦æ¸å¸å±æ¥æ¾ç¤ºspread\r\n  @Input() hideSelection: boolean;            // æå®å½spreadç»ä»¶æ²¡æç¦ç¹æ¶æ¯å¦éæ©çªåºæ¾ç¤º\r\n  @Input() allowUserEditFormula: boolean;     // æå®ç¨æ·æ¯å¦å¯ä»¥ç¼è¾ååæ ¼ä¸­çå¬å¼\r\n  @Input() enableFormulaTextbox: boolean;     // æå®æ¯å¦å¯ç¨å¬å¼ææ¬æ¡\r\n  @Input() autoFitType: number;               // æå®æ¯å¦å°åå®¹æ ¼å¼åä¸ºéåååæ ¼åæ é¢ä¸­çåå®¹\r\n  @Input() referenceStyle: number;            // å·¥ä½è¡¨ä¸ååæ ¼å¬å¼ä¸­ååæ ¼åèå´å¼ç¨çæ ·å¼\r\n  @Input() hostStyle: any; // used for get styles form parent host DIV\r\n  @Input() hostClass: string;\r\n  @Input() name: string;\r\n  @Input() queryId: string;\r\n  @Input() controlType: string; // æ¥è¯¢ç±»å\r\n  @Input() licenseKey: string;\r\n  @Input() qoManagerCode: any;\r\n  @Input() queryRelativeUrl: any;\r\n  @Input() qoId: any;\r\n  @Input() voId: any;\r\n  @Input() groupType: any;\r\n  @Input() templateType: any;\r\n  @Input() multiSheets: any[];  //å¤sheeté¡µæ¯æ\r\n  curSheet: any;\r\n  sheetChanged = new Subject<any>(); //åæ¢sheetçå¬äºä»¶\r\n  multiSheetsSchemaIds: any = {};\r\n\r\n  sheet: any;\r\n  // æ ¼å¼æ¹æ¡ä¿¡æ¯\r\n  schemaValue: any;\r\n  colList: any; // åä¿¡æ¯\r\n  @Input() formData: any; // æ¥æºæ°æ®\r\n  searchText = '';\r\n  groupIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n  conditionExpression = null;\r\n  jointsearchInfoList: any;\r\n  loading: any;\r\n  tabId: any;\r\n\r\n  ngOnInit() {\r\n    this.loading = this.loadService.show({ container: 'body' });\r\n    this.setServices();\r\n    // äº¤åè¡¨ç»æé¡µçå¬äºä»¶\r\n    if (this.controlType === 'crosstab') {\r\n      this.docClickSubscription = this.renderer.listen('document', 'click', this.onDocumentClick.bind(this));\r\n    }\r\n    this.tabId = RtfServices.getTabId(this.queryId);\r\n    // ç¼å­ç»æé¡µå¯¹è±¡ï¼ç»å·¥å·æ ä½¿ç¨\r\n    QDPCacheUtil.setCache(this.tabId + this.queryId + this.controlType + 'qdpview', this);\r\n    ServicesUtils.setServices(this.tabId + 'qoId', this.qoId);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    try {\r\n      // éè¿éç½®ä¸­å¿ï¼è·åspreadjsæ§ä»¶åºåå·\r\n      this.lcpService.formErrorService = this.formErrorService;\r\n      this.lcpService.getSpreadLicense().subscribe(data => {\r\n        if (data) {\r\n          GC.Spread.Sheets.LicenseKey = data;\r\n        }\r\n        this.afterView();\r\n      });\r\n    } catch (e) {\r\n      this.loading.close();\r\n    }\r\n    this.setMultiSheetsVarible();\r\n  }\r\n\r\n  private setMultiSheetsVarible() {\r\n    if (this.columnsSettingComponent) {\r\n      this.columnsSettingComponent.multiSheets = this.multiSheets;\r\n      this.columnsSettingComponent.curSheet = this.curSheet;\r\n      this.columnsSettingComponent.multiSheetsSchemaIds = this.multiSheetsSchemaIds;\r\n    }\r\n  }\r\n\r\n  afterView() {\r\n    const elRef = this.elRef;\r\n    const dom = elRef.nativeElement as HTMLElement;\r\n    const hostElement = dom.querySelector('#sheet');\r\n    if (this.licenseKey) {\r\n      GC.Spread.Sheets.LicenseKey = this.licenseKey;\r\n    }\r\n    this.spread = new GC.Spread.Sheets.Workbook(hostElement, { sheetCount: 0 });\r\n    this.setSpreadOptions();\r\n    // this.bindCustomEvent(this.spread);\r\n    const eventId = this.tabId;\r\n    EventBus.register('schemaValueChanged', this.handleSchemaValueChanged.bind(this), eventId + 'qdpViewComponent');\r\n    if (this.templateType !== 'qdpAdvancedTemplate' && this.isInitQdpView) {\r\n      this.initQdpView();\r\n    } else {\r\n      this.loading.close();\r\n    }\r\n  }\r\n\r\n  private handleSchemaValueChanged(schemaValue: any) {\r\n    this.schemaValue = schemaValue;\r\n    if (this.curSheet && this.multiSheets.length && schemaValue && schemaValue.id) {\r\n      this.multiSheetsSchemaIds[this.curSheet] = schemaValue.id;\r\n      this.setMultiSheetsVarible();\r\n    }\r\n  }\r\n\r\n  public initQdpView() {\r\n    const self = this;\r\n    if (!this.loading) {\r\n      this.loading = this.loadService.show({ container: 'body' });\r\n    }\r\n    this.jointSearchManagerService.getjointsearch('form' + 'ff3ea474-cc65-23b0-cdb1-73c9146cea3b', this.queryId, '').subscribe((jointsearchList: any) => {\r\n      this.filterService.getFilter(this.qoManagerCode ? this.qoManagerCode : this.queryId, this.queryId, this.queryRelativeUrl, 1, this.groupType).subscribe(data => {\r\n        self.conditionExpression = null;\r\n        self.jointsearchInfoList = jointsearchList;\r\n        if (data && data.filter) { self.conditionExpression = JSON.stringify(data.filter); }\r\n        const renderOption: RenderOption = Object.assign({ multiSheetsSchemaIds: self.multiSheetsSchemaIds, curSheet: self.curSheet, multiSheets: self.multiSheets }, { queryId: self.queryId, controlType: self.controlType, qoManagerCode: self.qoManagerCode, pageIndex: 0, queryRelativeUrl: self.queryRelativeUrl, filterCondition: self.conditionExpression, groupType: self.groupType, voId: self.voId, jointsearchInfoList: self.jointsearchInfoList, loading: this.loading });\r\n        this.qdpViewRender(renderOption);\r\n      });\r\n    });\r\n  }\r\n\r\n  private bindCustomEvent(spread: any) {\r\n    // const customEventNameSpace = '.ng';\r\n    // const events = [];\r\n    // events.forEach((event) => {\r\n    //   spread.bind(event + customEventNameSpace, (event: any, data: any) => {\r\n    //     const eventType = event.type;\r\n    //     const camelCaseEvent = eventType[0].toLowerCase() + eventType.substr(1);\r\n    //     this[camelCaseEvent].emit(data);\r\n    //   });\r\n    // });\r\n  }\r\n\r\n  setSpreadOptions() {\r\n    const self = this;\r\n    const spread = this.spread;\r\n    if (!this.spread) {\r\n      return;\r\n    }\r\n    spread.suspendEvent();\r\n    spread.suspendPaint();\r\n    this.spread.fromJSON(null);\r\n    const options = this.spreadOptions;\r\n    if (options) {\r\n      options.forEach((option) => {\r\n        if (option.name === 'name') {\r\n          spread.name = option.value;\r\n        } else {\r\n          spread.options[option.name] = option.value;\r\n        }\r\n      });\r\n    }\r\n    spread.unbind(GC.Spread.Sheets.Events.ActiveSheetChanged);\r\n    spread.bind(GC.Spread.Sheets.Events.ActiveSheetChanged, function (e, args) {\r\n      self.curSheet = args.newSheet.name();\r\n      self.setGroup(self.curSheet);\r\n      self.setMultiSheetsVarible();\r\n      self.initQdpView();\r\n    });\r\n    spread.resumePaint();\r\n    spread.resumeEvent();\r\n  }\r\n\r\n  /**\r\n   * æ¹æ³å·²åºå¼ï¼å»ºè®®æ¿æ¢ä¸ºinitQDPViewæ¹æ³\r\n   * åå§åæ¥è¯¢ç»æé¡µæ§ä»¶\r\n   */\r\n  initSpread(queryId: string, schemaId: string, controlType?: any, qoManagerCode?: any, pageIndex?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, voId?: any, fromCache?: any, isSchemaSelectChanged?: any) {\r\n    if (this.curSheet && this.multiSheets.length) {\r\n      this.multiSheetsSchemaIds[this.curSheet] = schemaId;\r\n      this.setMultiSheetsVarible();\r\n    }\r\n    this.qdpViewRender(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { schemaId, queryId, spread: this.spread, controlType, qoManagerCode, pageIndex, queryRelativeUrl, filterCondition, formData: this.formData, groupType: groupType, voId: voId, qdpView: this, fromCache, isSchemaSelectChanged, jointsearchInfoList: this.jointsearchInfoList }));\r\n  }\r\n\r\n  /**\r\n   * åå§åæ¥è¯¢ç»ææ§ä»¶\r\n   */\r\n  qdpViewRender(option: RenderOption) {\r\n    if (!option.loading) {\r\n      option.loading = this.loadService.show({ container: 'body' });\r\n    }\r\n    option.voId = !option.voId ? this.voId : option.voId;\r\n    option.groupType = !option.groupType ? this.groupType : option.groupType;\r\n    option.fromCache = option.fromCache ? option.fromCache : false;\r\n    if (option.filterCondition) {\r\n      this.conditionExpression = option.filterCondition;\r\n    }\r\n    const renderOption: RenderOption = Object.assign({}, option, { formData: this.formData, spread: this.spread, qdpView: this });\r\n    this.renderService.render(renderOption);\r\n    EventBus.register(this.queryId + 'spread_init', this.registeSpreadColumnWidthChangedEvent.bind(this), this.queryId);\r\n  }\r\n\r\n  /**\r\n   * æ¹æ³å·²åºå¼ï¼å»ºè®®æ¿æ¢ä¸ºexportæ¹æ³\r\n   * å¯¼åºExcel\r\n   */\r\n  exportExcel(queryId: string, id: string, type?: any, pageIndex?: any, qoManagerCode?: any, queryRelativeUrl?: any, filterCondition?: any, groupType?: any, voId?: any, totalCount?: any, exportType?: any) {\r\n    this.export(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId, schemaId: id, controlType: type, pageIndex, qoManagerCode, queryRelativeUrl, filterCondition, groupType, voId, totalCount, exportType }));\r\n  }\r\n\r\n  /**\r\n   * å¯¼åºExcel\r\n   * @param opiton æ¸²æéç½®é¡¹\r\n   */\r\n  export(option: RenderOption) {\r\n    if (this.controlType === 'crosstab') {\r\n      option.totalCount = this.spread.getActiveSheet().getRowCount();\r\n    }\r\n    option.voId = this.voId ? this.voId : option.voId;\r\n    option.queryId = this.queryId ? this.queryId : option.queryId;\r\n    option.groupType = this.groupType ? this.groupType : option.groupType;\r\n    option.qoManagerCode = this.qoManagerCode ? this.qoManagerCode : option.qoManagerCode;\r\n    this.renderService.exportData(option);\r\n    // this.renderService.exportData(option.queryId, option.schemaId, option.controlType, option.pageIndex, option.qoManagerCode, option.queryRelativeUrl, option.filterCondition, option.groupType, option.voId, option.totalCount || 1, option.exportType);\r\n  }\r\n\r\n  /**\r\n   * æ¹æ³å·²åºå¼ï¼å»ºè®®æ¿æ¢ä¸ºprintæ¹æ³\r\n   * æå°PDF\r\n   */\r\n  pdfExportEvent(queryId: string, id: string, type?: any, qoManagerCode?: any, printIntegration?: any, queryRelativeUrl?: any, filterCondition?: any, pageIndex?: any, groupType?: any, voId?: any) {\r\n    this.print(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId, schemaId: id, controlType: type, pageIndex, qoManagerCode, queryRelativeUrl, printIntegration, filterCondition, groupType, voId }));\r\n  }\r\n\r\n  /**\r\n   * æå°\r\n   * @param option æ¸²æéç½®é¡¹\r\n   */\r\n  print(option: RenderOption) {\r\n    option.voId = this.voId ? this.voId : option.voId;\r\n    option.queryId = this.queryId ? this.queryId : option.queryId;\r\n    option.groupType = this.groupType ? this.groupType : option.groupType;\r\n    option.qoManagerCode = this.qoManagerCode ? this.qoManagerCode : option.qoManagerCode;\r\n    this.renderService.pdfExportEvent(option);\r\n    // this.renderService.pdfExportEvent(option.queryId, option.schemaId, option.controlType, option.qoManagerCode, option.printIntegration, option.queryRelativeUrl, option.filterCondition, option.groupType, option.pageIndex, option.voId);\r\n  }\r\n\r\n  /**\r\n   * æ¹æ³å·²åºå¼ï¼å»ºè®®æ¿æ¢ä¸ºprintPreview(option: RenderOption)æ¹æ³\r\n   * æå°é¢è§\r\n   */\r\n  printPreView(queryId: string, id: string, type?: any, qoManagerCode?: any, printIntegration?: any, queryRelativeUrl?: any, filterCondition?: any, pageIndex?: any, groupType?: any, voId?: any) {\r\n    const _voId = this.voId ? this.voId : voId;\r\n    const _queryId = this.queryId ? this.queryId : queryId;\r\n    const _groupType = this.groupType ? this.groupType : groupType;\r\n    const _qoManagerCode = this.qoManagerCode ? this.qoManagerCode : qoManagerCode;\r\n    this.renderService.printPreView(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId: _queryId, schemaId: id, controlType: type, qoManagerCode: _qoManagerCode, printIntegration, queryRelativeUrl, filterCondition, groupType: _groupType, pageIndex, voId: _voId}));\r\n    // this.renderService.printPreView(queryId, id, type, qoManagerCode, printIntegration, queryRelativeUrl, filterCondition, groupType ? groupType : this.groupType, pageIndex, voId ? voId : this.voId);\r\n  }\r\n\r\n  /**\r\n   * æå°é¢è§\r\n   * @param option æ¸²æéç½®é¡¹\r\n   */\r\n  printPreview(option: RenderOption) {\r\n    option.groupType = this.groupType ? this.groupType : option.groupType;\r\n    option.voId = this.voId ? this.voId : option.voId;\r\n    this.renderService.printPreView(option);\r\n    // this.renderService.printPreView(option.queryId, option.schemaId, option.controlType, option.qoManagerCode, option.printIntegration, option.queryRelativeUrl, option.filterCondition, option.groupType, option.pageIndex, option.voId);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const options = [];\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        this.tabId = RtfServices.getTabId(this.queryId);\r\n        switch (changeName) {\r\n          case 'hostStyle':\r\n            this.style = newValue;\r\n            if (this.spread) {\r\n              this.spread.refresh();\r\n            }\r\n            break;\r\n          case 'hostClass':\r\n            break;\r\n          case 'name':\r\n            this.spread.name = newValue;\r\n            break;\r\n          case 'formData':\r\n            newValue.dynamicCols.forEach(col => {\r\n              col.name = col.title;\r\n              col.bindField = col.field;\r\n              col.colWidth = 150;\r\n              col.align = 0;\r\n              col.visible = true;\r\n              col.isFixed = false;\r\n              col.formatType = 0;\r\n              col.formattor = '';\r\n              col.sort = 0;\r\n              col.pageAggreText = null;\r\n              col.pageAggre = 0;\r\n              col.isGroup = false;\r\n              col.groupAggreText = '';\r\n              col.groupAggre = 0;\r\n              col.totalAggreText = '';\r\n              col.totalAggre = 0;\r\n              col.level = 1;\r\n              col.childList = [];\r\n              col.dimension = 0;\r\n              col.rowColor = null;\r\n            });\r\n            this.formData = newValue;\r\n            this.ngOnDestroy();\r\n            this.afterView();\r\n            break;\r\n          case 'groupType':\r\n            this.groupType = newValue;\r\n            break;\r\n          case 'queryId':\r\n            this.queryId = newValue;\r\n            QDPCacheUtil.setCache(this.tabId + this.queryId + this.controlType + 'qdpview', this);\r\n            break;\r\n          case 'controlType':\r\n            this.controlType = newValue;\r\n            break;\r\n          case 'qoId':\r\n            this.qoId = newValue;\r\n            ServicesUtils.setServices(this.tabId + 'qoId', this.qoId);\r\n            break;\r\n          case 'qoManagerCode':\r\n          case 'voId':\r\n          case 'queryRelativeUrl':\r\n          case 'templateType':\r\n            break;\r\n          case 'multiSheets':\r\n            this.multiSheets = newValue;\r\n            this.setGroup(this.multiSheets[0]);\r\n            break;\r\n          case 'licenseKey':\r\n            if (newValue) {\r\n              GC.Spread.Sheets.LicenseKey = newValue;\r\n            }\r\n            break;\r\n          case 'isCommonQdpViewComponent':\r\n            this.isCommonQdpViewComponent = newValue;\r\n            if (this.isCommonQdpViewComponent) {\r\n\r\n            }\r\n            break;\r\n          default:\r\n            options.push({ name: changeName, value: newValue });\r\n        }\r\n      }\r\n    }\r\n    this.spreadOptions = options;\r\n    this.setSpreadOptions();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.spread) {\r\n      this.spread.destroy();\r\n    }\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.style.height = event.newHeight + 'px';\r\n    this.style.width = event.newWidth + 'px';\r\n  }\r\n\r\n  toggle() {\r\n    let isCompare = false;\r\n    if (this.isOpen) {\r\n      if (this.controlType === 'crosstab') {\r\n        this.dimensionSettingComponent.isCompare = false;\r\n        this.dimensionSettingComponent.selectedDimesion();\r\n        isCompare = this.dimensionSettingComponent.isCompare;\r\n      } else {\r\n        this.columnsSettingComponent.isCompare = false;\r\n        this.columnsSettingComponent.selectedDimesion();\r\n        isCompare = this.columnsSettingComponent.isCompare;\r\n      }\r\n      if (this.schemaValue && this.schemaValue.isPrefab !== 1 && !isCompare) {\r\n        this.schemaValue.schemaValue = this.controlType === 'crosstab' ? JSON.stringify(this.dimensionSettingComponent.schemaValue.schemaValue) : JSON.stringify(this.columnsSettingComponent.schemaValue.schemaValue);\r\n        this.schemaManager.saveSchema({ 'schema': JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe(() => { }, (error: any) => {\r\n          this.formErrorService.exception(error.Message, error);\r\n        });\r\n        this.schemaValue.schemaValue = JSON.parse(this.schemaValue.schemaValue);\r\n      }\r\n    }\r\n    this.isOpen = !this.isOpen;\r\n  }\r\n\r\n  setGroup(sheetName: any) {\r\n    this.curSheet = sheetName;\r\n    if (this.groupType) {\r\n      for (let i = 0; i < this.multiSheets.length; i++) {\r\n        this.groupType = this.groupType.replace(this.multiSheets[i], \"\");\r\n      }\r\n      this.groupType += sheetName;\r\n    } else {\r\n      this.groupType = sheetName;\r\n    }\r\n    this.sheetChanged.next(this.groupType);\r\n  }\r\n\r\n  private onDocumentClick(e: any): void {\r\n    if (e.target.tagName === 'CANVAS') {\r\n      this.isOpen = false;\r\n    }\r\n  }\r\n\r\n  public handleCrosstabPageChange(pageIndex: any, pageSize: any) {\r\n    this.sheet = this.spread.getActiveSheet();\r\n    for (let i = 0; i < this.sheet.getRowCount(); i++) {\r\n      if (i >= (pageIndex - 1) * pageSize && i < pageIndex * pageSize) {\r\n        this.sheet.setRowVisible(i, true, GC.Spread.Sheets.SheetArea.viewport);\r\n        this.sheet.showRow(i, GC.Spread.Sheets.VerticalPosition.bottom);\r\n      } else {\r\n        this.sheet.setRowVisible(i, false, GC.Spread.Sheets.SheetArea.viewport);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleContextMenu($event) {\r\n    if ('list' === this.controlType.toLowerCase()) {\r\n      let x = 0, y = 0;\r\n      let qdpviewNative = this.sheetEl.nativeElement;\r\n      while (qdpviewNative) {\r\n        x += qdpviewNative.offsetLeft;\r\n        y += qdpviewNative.offsetTop;\r\n        qdpviewNative = qdpviewNative.offsetParent;\r\n      }\r\n\r\n      const activeSheet = this.spread.getActiveSheet();\r\n      const colHeader = GC.Spread.Sheets.SheetArea.colHeader;\r\n      const target = activeSheet.hitTest($event.clientX - x, $event.clientY - y);\r\n      if (target.hitTestType !== colHeader || target.col === undefined || target.row === undefined) {\r\n        return false;\r\n      }\r\n\r\n      const headerRowCount = activeSheet.getRowCount(colHeader);\r\n      const span = activeSheet.getSpan(target.row, target.col, colHeader);\r\n      // å¤æ­å¤çº§è¡¨å¤´çæåµä¸ï¼åªå¤çæå­éè¡¨å¤´\r\n      if (span && (target.row + span.rowCount) < headerRowCount) {\r\n        return false;\r\n      }\r\n      this.currentColIndex = target.col;\r\n      this.initColGroupAggre(this.currentColIndex);\r\n\r\n      this.headerMenuDisplay = 'block';\r\n      this.headerMenuTop = $event.clientY;\r\n      this.headerMenuLeft = $event.clientX;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  handleIsGroupClick() {\r\n    if (this.colIsGroup) {\r\n      this.groupSelectValue = this.aggreData[0].value;\r\n      this.groupText = '';\r\n    }\r\n  }\r\n\r\n  handleSaveClick() {\r\n    const self = this;\r\n    try {\r\n      if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption && this.schemaValue.schemaValue.columnOption.colList) {\r\n        if (this.schemaValue && this.schemaValue.isPrefab === 1) {\r\n          this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));\r\n          return;\r\n        }\r\n        const colList = JSON.parse(JSON.stringify(this.schemaValue.schemaValue.columnOption.colList));\r\n        const params = { index: this.currentColIndex, colIndex: 0, type: 'edit' };\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < colList.length; i++) {\r\n          this.recursiveColumnSort(colList[i], null, params);\r\n        }\r\n\r\n        this.schemaValue.schemaValue.columnOption.colList = colList;\r\n        this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);\r\n        this.schemaManager.saveSchema({ schema: JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe(data => {\r\n          self.initQdpView();\r\n          self.currentColIndex = 0;\r\n          self.headerMenuDisplay = 'none';\r\n        }, (error: any) => {\r\n          this.formErrorService.exception(error.Message, error);\r\n        });\r\n      }\r\n    } catch (e) { self.currentColIndex = 0; }\r\n  }\r\n\r\n  handleClearSort() {\r\n    const self = this;\r\n    try {\r\n      if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption && this.schemaValue.schemaValue.columnOption.colList && this.schemaValue.schemaValue.columnOption.colList.length) {\r\n        if (this.schemaValue && this.schemaValue.isPrefab === 1) {\r\n          this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));\r\n          return;\r\n        }\r\n        const colList = JSON.parse(JSON.stringify(this.schemaValue.schemaValue.columnOption.colList));\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < colList.length; i++) {\r\n          this.recursiveClearColumnSort(colList[i], null);\r\n        }\r\n\r\n        this.schemaValue.schemaValue.columnOption.colList = colList;\r\n        this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);\r\n        this.schemaManager.saveSchema({ schema: JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe(data => {\r\n          const renderOption: RenderOption = Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { schemaId: this.schemaValue.id, queryId: self.queryId, controlType: self.controlType, qoManagerCode: self.qoManagerCode, pageIndex: 0, queryRelativeUrl: self.queryRelativeUrl, filterCondition: self.conditionExpression, groupType: self.groupType, voId: self.voId, jointsearchInfoList: self.jointsearchInfoList });\r\n          self.qdpViewRender(renderOption);\r\n          self.currentColIndex = 0;\r\n          self.headerMenuDisplay = 'none';\r\n        }, (error: any) => {\r\n          this.formErrorService.exception(error.Message, error);\r\n        });\r\n      }\r\n    } catch (e) {\r\n      self.currentColIndex = 0;\r\n    }\r\n  }\r\n\r\n  // @HostListener('click')\r\n  handleBlur($event) {\r\n    this.headerMenuDisplay = 'none';\r\n  }\r\n\r\n  private initColGroupAggre(index: any) {\r\n    if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption\r\n      && this.schemaValue.schemaValue.columnOption.colList && this.schemaValue.schemaValue.columnOption.colList.length > index) {\r\n      const params = { index: this.currentColIndex, colIndex: 0, type: 'init' };\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < this.schemaValue.schemaValue.columnOption.colList.length; i++) {\r\n        this.recursiveColumnSort(this.schemaValue.schemaValue.columnOption.colList[i], null, params);\r\n      }\r\n    }\r\n  }\r\n\r\n  private recursiveColumnSort(col, colList, params) {\r\n    if (colList == null) {\r\n      if (col.childList && col.childList.length) {\r\n        this.recursiveColumnSort(null, col.childList, params);\r\n      } else {\r\n        if (params.colIndex === params.index) {\r\n          if (params.type === 'init') {\r\n            this.colIsGroup = col.isGroup;\r\n            this.groupText = col.groupAggreText || '';\r\n            this.groupSelectValue = col.groupAggre;\r\n          } else if (params.type === 'edit') {\r\n            col.isGroup = this.colIsGroup;\r\n            col.groupAggreText = this.groupText || '';\r\n            col.groupAggre = this.groupSelectValue;\r\n          }\r\n        }\r\n        params.colIndex++;\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < colList.length; i++) {\r\n        if (colList[i].childList && colList[i].childList.length) {\r\n          this.recursiveColumnSort(null, colList[i].childList, params);\r\n        } else {\r\n          if (params.colIndex === params.index) {\r\n            if (params.type === 'init') {\r\n              this.colIsGroup = colList[i].isGroup;\r\n              this.groupText = colList[i].groupAggreText || '';\r\n              this.groupSelectValue = colList[i].groupAggre;\r\n            } else if (params.type === 'edit') {\r\n              colList[i].isGroup = this.colIsGroup;\r\n              colList[i].groupAggreText = this.groupText || '';\r\n              colList[i].groupAggre = this.groupSelectValue;\r\n            }\r\n          }\r\n          params.colIndex++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private recursiveClearColumnSort(col, colList) {\r\n    if (colList == null) {\r\n      if (col.childList && col.childList.length) {\r\n        this.recursiveClearColumnSort(null, col.childList);\r\n      } else {\r\n        col['sort'] = 0;\r\n        col['sortIndex'] = 0;\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < colList.length; i++) {\r\n        if (colList[i].childList && colList[i].childList.length) {\r\n          this.recursiveClearColumnSort(null, colList[i].childList);\r\n        } else {\r\n          colList[i]['sort'] = 0;\r\n          colList[i]['sortIndex'] = 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private registeSpreadColumnWidthChangedEvent() {\r\n    const self = this;\r\n    this.sheet = this.spread.getActiveSheet();\r\n    self.sheet.bind(GC.Spread.Sheets.Events.ColumnWidthChanged, function (sender, info) {\r\n      const index = info.colList[0];\r\n      const colW = info.sheet.getColumnWidth(info.colList[0]);\r\n      if (self.schemaValue && self.schemaValue.schemaValue && self.schemaValue.schemaValue.columnOption\r\n        && self.schemaValue.schemaValue.columnOption.colList && self.schemaValue.schemaValue.columnOption.colList.length) {\r\n        if (self.schemaValue && self.schemaValue.isPrefab === 1) {\r\n          self.msgService.info(self.localizeService.getValue('spread.message.validate.sort'));\r\n          return;\r\n        }\r\n\r\n        const colList = JSON.parse(JSON.stringify(self.schemaValue.schemaValue.columnOption.colList));\r\n        const params = { index: index, colIndex: 0, colWidth: colW };\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < colList.length; i++) {\r\n          self.recursiveColumnWidthChanged(colList[i], null, params);\r\n        }\r\n\r\n        self.schemaValue.schemaValue.columnOption.colList = colList;\r\n        self.schemaValue.schemaValue = JSON.stringify(self.schemaValue.schemaValue);\r\n        self.schemaManager.saveSchema({ schema: JSON.stringify(self.schemaValue), groupType: this.groupType }, '').subscribe(data => {\r\n          self.schemaValue.schemaValue = JSON.parse(self.schemaValue.schemaValue);\r\n        }, (error: any) => {\r\n          self.formErrorService.exception(error.Message, error);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private recursiveColumnWidthChanged(col, colList, params) {\r\n    if (colList == null) {\r\n      if (col.childList && col.childList.length) {\r\n        this.recursiveColumnWidthChanged(null, col.childList, params);\r\n      } else {\r\n        if (params.colIndex === params.index) {\r\n          col.colWidth = params.colWidth;\r\n        }\r\n        params.colIndex++;\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < colList.length; i++) {\r\n        if (colList[i].childList && colList[i].childList.length) {\r\n          this.recursiveColumnWidthChanged(null, colList[i].childList, params);\r\n        } else {\r\n          if (params.colIndex === params.index) {\r\n            colList[i].colWidth = params.colWidth;\r\n          }\r\n          params.colIndex++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { QdpViewComponent } from './component/qdp-view/qdp-view.component';\r\nimport { RenderService } from './service/render/render.service';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { FlexLayoutModule } from '@farris/ui-flex-layout';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown'\r\nimport { DndListModule } from '@qdp/common';\r\nimport { LocalizeModule } from '@qdp/localize';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { ColumnsSettingComponent } from './component/columns-setting/columns-setting.component';\r\nimport { DimensionSettingComponent } from './component/dimension-setting/dimension-setting.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    LoadingModule.forRoot({\r\n      message: 'Loading...'\r\n    }),\r\n    DndListModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ComboListModule,\r\n    InputGroupModule,\r\n    FDropdownDirectiveTypeModule,\r\n    // LocalizeModule\r\n  ],\r\n  declarations: [\r\n    QdpViewComponent,\r\n    ColumnsSettingComponent,\r\n    DimensionSettingComponent,\r\n    DimensionSettingComponent\r\n  ],\r\n  exports: [\r\n    QdpViewComponent,\r\n    ColumnsSettingComponent,\r\n  ]\r\n})\r\nexport class SpreadModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: SpreadModule,\r\n      providers: [\r\n        RenderService\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"names":["filter","tslib_1.__extends"],"mappings":"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"}
