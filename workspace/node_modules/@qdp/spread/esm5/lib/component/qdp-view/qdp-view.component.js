/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, Inject, Renderer2, HostBinding, Injector, Optional, ViewChild, LOCALE_ID } from '@angular/core';
import { RenderService } from '../../service/render/render.service';
import { FilterManagerService, SchemaManagerService, EventBus, DataRenderExtendService, JointSearchManagerService, LcpService, QDPCacheUtil, RtfServices } from '@qdp/common';
import { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';
import { MessagerService } from '@farris/ui-messager';
import { ServicesUtils } from '../../util/services.utils';
import { DimensionSettingComponent } from '../dimension-setting/dimension-setting.component';
import { ColumnsSettingComponent } from '../columns-setting/columns-setting.component';
import { LoadingService } from '@farris/ui-loading';
import { FormErrorService } from '@farris/command-services';
import { CacheService } from '@ecp-caf/caf-common';
import { Subject } from 'rxjs';
/** @type {?} */
var matches = (/**
 * @param {?} el
 * @param {?} selector
 * @return {?}
 */
function (el, selector) { return (el.matches || el.msMatchesSelector).call(el, selector); });
var ɵ0 = matches;
var QdpViewComponent = /** @class */ (function () {
    function QdpViewComponent(elRef, renderService, renderer, filterService, injector) {
        this.renderService = renderService;
        this.renderer = renderer;
        this.filterService = filterService;
        this.injector = injector;
        this.aggreData = [
            { name: '请选择', value: 0 },
            { name: '合计', value: 1 },
            { name: '最小值', value: 2 },
            { name: '最大值', value: 3 },
            { name: '计数', value: 4 },
            { name: '平均值', value: 5 }
        ];
        this.groupSelectValue = this.aggreData[0].value;
        this.groupText = '';
        this.colIsGroup = false;
        this.formInline = true;
        this.currentColIndex = 0;
        this.isInitQdpView = true; // 是否初始化qdpViewComponent
        // 是否初始化qdpViewComponent
        this.isShowDimension = true;
        this.cls = true;
        this.isOpen = false;
        this.headerMenuTop = 0;
        this.headerMenuLeft = 0;
        this.headerMenuDisplay = 'none';
        this.colIsGroupId = 'colIsGroup' + EventBus.guid();
        this.style = {
            width: '800px',
            height: '600px'
        };
        // indicate all options
        this.isCommonQdpViewComponent = false;
        this.sheetChanged = new Subject(); //切换sheet监听事件
        //切换sheet监听事件
        this.multiSheetsSchemaIds = {};
        // 来源数据
        this.searchText = '';
        this.groupIcon = '<span class="k-icon k-i-search"></span>';
        this.conditionExpression = null;
        this.elRef = elRef;
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.msgService = this.injector.get(MessagerService);
            this.localId = this.injector.get(LOCALE_ID) || DEFAULT_LANGUAGE;
            this.formInline = this.localId.toLowerCase() === DEFAULT_LANGUAGE;
            this.loadService = this.injector.get(LoadingService);
            this.lcpService = this.injector.get(LcpService);
            this.jointSearchManagerService = this.injector.get(JointSearchManagerService);
            this.schemaManager = this.injector.get(SchemaManagerService);
            this.dataRenderExtendService = this.injector.get(DataRenderExtendService);
            this.formErrorService = this.injector.get(FormErrorService);
            this.aggreData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.aggregateData');
            this.cache = this.injector.get(CacheService);
        }
    }
    /**
     * @private
     * @return {?}
     */
    QdpViewComponent.prototype.setServices = /**
     * @private
     * @return {?}
     */
    function () {
        ServicesUtils.setServices('renderExtends' + this.queryId, this.dataRenderExtendService);
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.loading = this.loadService.show({ container: 'body' });
        this.setServices();
        // 交叉表结果页监听事件
        if (this.controlType === 'crosstab') {
            this.docClickSubscription = this.renderer.listen('document', 'click', this.onDocumentClick.bind(this));
        }
        this.tabId = RtfServices.getTabId(this.queryId);
        // 缓存结果页对象，给工具栏使用
        QDPCacheUtil.setCache(this.tabId + this.queryId + this.controlType + 'qdpview', this);
        ServicesUtils.setServices(this.tabId + 'qoId', this.qoId);
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        try {
            // 通过配置中心，获取spreadjs控件序列号
            this.lcpService.formErrorService = this.formErrorService;
            this.lcpService.getSpreadLicense().subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data) {
                    GC.Spread.Sheets.LicenseKey = data;
                }
                _this.afterView();
            }));
        }
        catch (e) {
            this.loading.close();
        }
        this.setMultiSheetsVarible();
    };
    /**
     * @private
     * @return {?}
     */
    QdpViewComponent.prototype.setMultiSheetsVarible = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.columnsSettingComponent) {
            this.columnsSettingComponent.multiSheets = this.multiSheets;
            this.columnsSettingComponent.curSheet = this.curSheet;
            this.columnsSettingComponent.multiSheetsSchemaIds = this.multiSheetsSchemaIds;
        }
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.afterView = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var elRef = this.elRef;
        /** @type {?} */
        var dom = (/** @type {?} */ (elRef.nativeElement));
        /** @type {?} */
        var hostElement = dom.querySelector('#sheet');
        if (this.licenseKey) {
            GC.Spread.Sheets.LicenseKey = this.licenseKey;
        }
        this.spread = new GC.Spread.Sheets.Workbook(hostElement, { sheetCount: 0 });
        this.setSpreadOptions();
        // this.bindCustomEvent(this.spread);
        /** @type {?} */
        var eventId = this.tabId;
        EventBus.register('schemaValueChanged', this.handleSchemaValueChanged.bind(this), eventId + 'qdpViewComponent');
        if (this.templateType !== 'qdpAdvancedTemplate' && this.isInitQdpView) {
            this.initQdpView();
        }
        else {
            this.loading.close();
        }
    };
    /**
     * @private
     * @param {?} schemaValue
     * @return {?}
     */
    QdpViewComponent.prototype.handleSchemaValueChanged = /**
     * @private
     * @param {?} schemaValue
     * @return {?}
     */
    function (schemaValue) {
        this.schemaValue = schemaValue;
        if (this.curSheet && this.multiSheets.length && schemaValue && schemaValue.id) {
            this.multiSheetsSchemaIds[this.curSheet] = schemaValue.id;
            this.setMultiSheetsVarible();
        }
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.initQdpView = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        if (!this.loading) {
            this.loading = this.loadService.show({ container: 'body' });
        }
        this.jointSearchManagerService.getjointsearch('form' + 'ff3ea474-cc65-23b0-cdb1-73c9146cea3b', this.queryId, '').subscribe((/**
         * @param {?} jointsearchList
         * @return {?}
         */
        function (jointsearchList) {
            _this.filterService.getFilter(_this.qoManagerCode ? _this.qoManagerCode : _this.queryId, _this.queryId, _this.queryRelativeUrl, 1, _this.groupType).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                self.conditionExpression = null;
                self.jointsearchInfoList = jointsearchList;
                if (data && data.filter) {
                    self.conditionExpression = JSON.stringify(data.filter);
                }
                /** @type {?} */
                var renderOption = Object.assign({ multiSheetsSchemaIds: self.multiSheetsSchemaIds, curSheet: self.curSheet, multiSheets: self.multiSheets }, { queryId: self.queryId, controlType: self.controlType, qoManagerCode: self.qoManagerCode, pageIndex: 0, queryRelativeUrl: self.queryRelativeUrl, filterCondition: self.conditionExpression, groupType: self.groupType, voId: self.voId, jointsearchInfoList: self.jointsearchInfoList, loading: _this.loading });
                _this.qdpViewRender(renderOption);
            }));
        }));
    };
    /**
     * @private
     * @param {?} spread
     * @return {?}
     */
    QdpViewComponent.prototype.bindCustomEvent = /**
     * @private
     * @param {?} spread
     * @return {?}
     */
    function (spread) {
        // const customEventNameSpace = '.ng';
        // const events = [];
        // events.forEach((event) => {
        //   spread.bind(event + customEventNameSpace, (event: any, data: any) => {
        //     const eventType = event.type;
        //     const camelCaseEvent = eventType[0].toLowerCase() + eventType.substr(1);
        //     this[camelCaseEvent].emit(data);
        //   });
        // });
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.setSpreadOptions = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        /** @type {?} */
        var spread = this.spread;
        if (!this.spread) {
            return;
        }
        spread.suspendEvent();
        spread.suspendPaint();
        this.spread.fromJSON(null);
        /** @type {?} */
        var options = this.spreadOptions;
        if (options) {
            options.forEach((/**
             * @param {?} option
             * @return {?}
             */
            function (option) {
                if (option.name === 'name') {
                    spread.name = option.value;
                }
                else {
                    spread.options[option.name] = option.value;
                }
            }));
        }
        spread.unbind(GC.Spread.Sheets.Events.ActiveSheetChanged);
        spread.bind(GC.Spread.Sheets.Events.ActiveSheetChanged, (/**
         * @param {?} e
         * @param {?} args
         * @return {?}
         */
        function (e, args) {
            self.curSheet = args.newSheet.name();
            self.setGroup(self.curSheet);
            self.setMultiSheetsVarible();
            self.initQdpView();
        }));
        spread.resumePaint();
        spread.resumeEvent();
    };
    /**
     * 方法已废弃，建议替换为initQDPView方法
     * 初始化查询结果页控件
     */
    /**
     * 方法已废弃，建议替换为initQDPView方法
     * 初始化查询结果页控件
     * @param {?} queryId
     * @param {?} schemaId
     * @param {?=} controlType
     * @param {?=} qoManagerCode
     * @param {?=} pageIndex
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} groupType
     * @param {?=} voId
     * @param {?=} fromCache
     * @param {?=} isSchemaSelectChanged
     * @return {?}
     */
    QdpViewComponent.prototype.initSpread = /**
     * 方法已废弃，建议替换为initQDPView方法
     * 初始化查询结果页控件
     * @param {?} queryId
     * @param {?} schemaId
     * @param {?=} controlType
     * @param {?=} qoManagerCode
     * @param {?=} pageIndex
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} groupType
     * @param {?=} voId
     * @param {?=} fromCache
     * @param {?=} isSchemaSelectChanged
     * @return {?}
     */
    function (queryId, schemaId, controlType, qoManagerCode, pageIndex, queryRelativeUrl, filterCondition, groupType, voId, fromCache, isSchemaSelectChanged) {
        if (this.curSheet && this.multiSheets.length) {
            this.multiSheetsSchemaIds[this.curSheet] = schemaId;
            this.setMultiSheetsVarible();
        }
        this.qdpViewRender(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { schemaId: schemaId, queryId: queryId, spread: this.spread, controlType: controlType, qoManagerCode: qoManagerCode, pageIndex: pageIndex, queryRelativeUrl: queryRelativeUrl, filterCondition: filterCondition, formData: this.formData, groupType: groupType, voId: voId, qdpView: this, fromCache: fromCache, isSchemaSelectChanged: isSchemaSelectChanged, jointsearchInfoList: this.jointsearchInfoList }));
    };
    /**
     * 初始化查询结果控件
     */
    /**
     * 初始化查询结果控件
     * @param {?} option
     * @return {?}
     */
    QdpViewComponent.prototype.qdpViewRender = /**
     * 初始化查询结果控件
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (!option.loading) {
            option.loading = this.loadService.show({ container: 'body' });
        }
        option.voId = !option.voId ? this.voId : option.voId;
        option.groupType = !option.groupType ? this.groupType : option.groupType;
        option.fromCache = option.fromCache ? option.fromCache : false;
        if (option.filterCondition) {
            this.conditionExpression = option.filterCondition;
        }
        /** @type {?} */
        var renderOption = Object.assign({}, option, { formData: this.formData, spread: this.spread, qdpView: this });
        this.renderService.render(renderOption);
        EventBus.register(this.queryId + 'spread_init', this.registeSpreadColumnWidthChangedEvent.bind(this), this.queryId);
    };
    /**
     * 方法已废弃，建议替换为export方法
     * 导出Excel
     */
    /**
     * 方法已废弃，建议替换为export方法
     * 导出Excel
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} pageIndex
     * @param {?=} qoManagerCode
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} groupType
     * @param {?=} voId
     * @param {?=} totalCount
     * @param {?=} exportType
     * @return {?}
     */
    QdpViewComponent.prototype.exportExcel = /**
     * 方法已废弃，建议替换为export方法
     * 导出Excel
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} pageIndex
     * @param {?=} qoManagerCode
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} groupType
     * @param {?=} voId
     * @param {?=} totalCount
     * @param {?=} exportType
     * @return {?}
     */
    function (queryId, id, type, pageIndex, qoManagerCode, queryRelativeUrl, filterCondition, groupType, voId, totalCount, exportType) {
        this.export(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId: queryId, schemaId: id, controlType: type, pageIndex: pageIndex, qoManagerCode: qoManagerCode, queryRelativeUrl: queryRelativeUrl, filterCondition: filterCondition, groupType: groupType, voId: voId, totalCount: totalCount, exportType: exportType }));
    };
    /**
     * 导出Excel
     * @param opiton 渲染配置项
     */
    /**
     * 导出Excel
     * @param {?} option
     * @return {?}
     */
    QdpViewComponent.prototype.export = /**
     * 导出Excel
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (this.controlType === 'crosstab') {
            option.totalCount = this.spread.getActiveSheet().getRowCount();
        }
        option.voId = this.voId ? this.voId : option.voId;
        option.queryId = this.queryId ? this.queryId : option.queryId;
        option.groupType = this.groupType ? this.groupType : option.groupType;
        option.qoManagerCode = this.qoManagerCode ? this.qoManagerCode : option.qoManagerCode;
        this.renderService.exportData(option);
        // this.renderService.exportData(option.queryId, option.schemaId, option.controlType, option.pageIndex, option.qoManagerCode, option.queryRelativeUrl, option.filterCondition, option.groupType, option.voId, option.totalCount || 1, option.exportType);
    };
    /**
     * 方法已废弃，建议替换为print方法
     * 打印PDF
     */
    /**
     * 方法已废弃，建议替换为print方法
     * 打印PDF
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} qoManagerCode
     * @param {?=} printIntegration
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} pageIndex
     * @param {?=} groupType
     * @param {?=} voId
     * @return {?}
     */
    QdpViewComponent.prototype.pdfExportEvent = /**
     * 方法已废弃，建议替换为print方法
     * 打印PDF
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} qoManagerCode
     * @param {?=} printIntegration
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} pageIndex
     * @param {?=} groupType
     * @param {?=} voId
     * @return {?}
     */
    function (queryId, id, type, qoManagerCode, printIntegration, queryRelativeUrl, filterCondition, pageIndex, groupType, voId) {
        this.print(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId: queryId, schemaId: id, controlType: type, pageIndex: pageIndex, qoManagerCode: qoManagerCode, queryRelativeUrl: queryRelativeUrl, printIntegration: printIntegration, filterCondition: filterCondition, groupType: groupType, voId: voId }));
    };
    /**
     * 打印
     * @param option 渲染配置项
     */
    /**
     * 打印
     * @param {?} option 渲染配置项
     * @return {?}
     */
    QdpViewComponent.prototype.print = /**
     * 打印
     * @param {?} option 渲染配置项
     * @return {?}
     */
    function (option) {
        option.voId = this.voId ? this.voId : option.voId;
        option.queryId = this.queryId ? this.queryId : option.queryId;
        option.groupType = this.groupType ? this.groupType : option.groupType;
        option.qoManagerCode = this.qoManagerCode ? this.qoManagerCode : option.qoManagerCode;
        this.renderService.pdfExportEvent(option);
        // this.renderService.pdfExportEvent(option.queryId, option.schemaId, option.controlType, option.qoManagerCode, option.printIntegration, option.queryRelativeUrl, option.filterCondition, option.groupType, option.pageIndex, option.voId);
    };
    /**
     * 方法已废弃，建议替换为printPreview(option: RenderOption)方法
     * 打印预览
     */
    /**
     * 方法已废弃，建议替换为printPreview(option: RenderOption)方法
     * 打印预览
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} qoManagerCode
     * @param {?=} printIntegration
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} pageIndex
     * @param {?=} groupType
     * @param {?=} voId
     * @return {?}
     */
    QdpViewComponent.prototype.printPreView = /**
     * 方法已废弃，建议替换为printPreview(option: RenderOption)方法
     * 打印预览
     * @param {?} queryId
     * @param {?} id
     * @param {?=} type
     * @param {?=} qoManagerCode
     * @param {?=} printIntegration
     * @param {?=} queryRelativeUrl
     * @param {?=} filterCondition
     * @param {?=} pageIndex
     * @param {?=} groupType
     * @param {?=} voId
     * @return {?}
     */
    function (queryId, id, type, qoManagerCode, printIntegration, queryRelativeUrl, filterCondition, pageIndex, groupType, voId) {
        /** @type {?} */
        var _voId = this.voId ? this.voId : voId;
        /** @type {?} */
        var _queryId = this.queryId ? this.queryId : queryId;
        /** @type {?} */
        var _groupType = this.groupType ? this.groupType : groupType;
        /** @type {?} */
        var _qoManagerCode = this.qoManagerCode ? this.qoManagerCode : qoManagerCode;
        this.renderService.printPreView(Object.assign({ multiSheetsSchemaIds: this.multiSheetsSchemaIds, curSheet: this.curSheet, multiSheets: this.multiSheets }, { queryId: _queryId, schemaId: id, controlType: type, qoManagerCode: _qoManagerCode, printIntegration: printIntegration, queryRelativeUrl: queryRelativeUrl, filterCondition: filterCondition, groupType: _groupType, pageIndex: pageIndex, voId: _voId }));
        // this.renderService.printPreView(queryId, id, type, qoManagerCode, printIntegration, queryRelativeUrl, filterCondition, groupType ? groupType : this.groupType, pageIndex, voId ? voId : this.voId);
    };
    /**
     * 打印预览
     * @param option 渲染配置项
     */
    /**
     * 打印预览
     * @param {?} option 渲染配置项
     * @return {?}
     */
    QdpViewComponent.prototype.printPreview = /**
     * 打印预览
     * @param {?} option 渲染配置项
     * @return {?}
     */
    function (option) {
        option.groupType = this.groupType ? this.groupType : option.groupType;
        option.voId = this.voId ? this.voId : option.voId;
        this.renderService.printPreView(option);
        // this.renderService.printPreView(option.queryId, option.schemaId, option.controlType, option.qoManagerCode, option.printIntegration, option.queryRelativeUrl, option.filterCondition, option.groupType, option.pageIndex, option.voId);
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    QdpViewComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var options = [];
        for (var changeName in changes) {
            /** @type {?} */
            var newValue = changes[changeName].currentValue;
            if (newValue !== null && newValue !== void 0) {
                this.tabId = RtfServices.getTabId(this.queryId);
                switch (changeName) {
                    case 'hostStyle':
                        this.style = newValue;
                        if (this.spread) {
                            this.spread.refresh();
                        }
                        break;
                    case 'hostClass':
                        break;
                    case 'name':
                        this.spread.name = newValue;
                        break;
                    case 'formData':
                        newValue.dynamicCols.forEach((/**
                         * @param {?} col
                         * @return {?}
                         */
                        function (col) {
                            col.name = col.title;
                            col.bindField = col.field;
                            col.colWidth = 150;
                            col.align = 0;
                            col.visible = true;
                            col.isFixed = false;
                            col.formatType = 0;
                            col.formattor = '';
                            col.sort = 0;
                            col.pageAggreText = null;
                            col.pageAggre = 0;
                            col.isGroup = false;
                            col.groupAggreText = '';
                            col.groupAggre = 0;
                            col.totalAggreText = '';
                            col.totalAggre = 0;
                            col.level = 1;
                            col.childList = [];
                            col.dimension = 0;
                            col.rowColor = null;
                        }));
                        this.formData = newValue;
                        this.ngOnDestroy();
                        this.afterView();
                        break;
                    case 'groupType':
                        this.groupType = newValue;
                        break;
                    case 'queryId':
                        this.queryId = newValue;
                        QDPCacheUtil.setCache(this.tabId + this.queryId + this.controlType + 'qdpview', this);
                        break;
                    case 'controlType':
                        this.controlType = newValue;
                        break;
                    case 'qoId':
                        this.qoId = newValue;
                        ServicesUtils.setServices(this.tabId + 'qoId', this.qoId);
                        break;
                    case 'qoManagerCode':
                    case 'voId':
                    case 'queryRelativeUrl':
                    case 'templateType':
                        break;
                    case 'multiSheets':
                        this.multiSheets = newValue;
                        this.setGroup(this.multiSheets[0]);
                        break;
                    case 'licenseKey':
                        if (newValue) {
                            GC.Spread.Sheets.LicenseKey = newValue;
                        }
                        break;
                    case 'isCommonQdpViewComponent':
                        this.isCommonQdpViewComponent = newValue;
                        if (this.isCommonQdpViewComponent) {
                        }
                        break;
                    default:
                        options.push({ name: changeName, value: newValue });
                }
            }
        }
        this.spreadOptions = options;
        this.setSpreadOptions();
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.spread) {
            this.spread.destroy();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    QdpViewComponent.prototype.onResized = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.style.height = event.newHeight + 'px';
        this.style.width = event.newWidth + 'px';
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.toggle = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var isCompare = false;
        if (this.isOpen) {
            if (this.controlType === 'crosstab') {
                this.dimensionSettingComponent.isCompare = false;
                this.dimensionSettingComponent.selectedDimesion();
                isCompare = this.dimensionSettingComponent.isCompare;
            }
            else {
                this.columnsSettingComponent.isCompare = false;
                this.columnsSettingComponent.selectedDimesion();
                isCompare = this.columnsSettingComponent.isCompare;
            }
            if (this.schemaValue && this.schemaValue.isPrefab !== 1 && !isCompare) {
                this.schemaValue.schemaValue = this.controlType === 'crosstab' ? JSON.stringify(this.dimensionSettingComponent.schemaValue.schemaValue) : JSON.stringify(this.columnsSettingComponent.schemaValue.schemaValue);
                this.schemaManager.saveSchema({ 'schema': JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe((/**
                 * @return {?}
                 */
                function () { }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.formErrorService.exception(error.Message, error);
                }));
                this.schemaValue.schemaValue = JSON.parse(this.schemaValue.schemaValue);
            }
        }
        this.isOpen = !this.isOpen;
    };
    /**
     * @param {?} sheetName
     * @return {?}
     */
    QdpViewComponent.prototype.setGroup = /**
     * @param {?} sheetName
     * @return {?}
     */
    function (sheetName) {
        this.curSheet = sheetName;
        if (this.groupType) {
            for (var i = 0; i < this.multiSheets.length; i++) {
                this.groupType = this.groupType.replace(this.multiSheets[i], "");
            }
            this.groupType += sheetName;
        }
        else {
            this.groupType = sheetName;
        }
        this.sheetChanged.next(this.groupType);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    QdpViewComponent.prototype.onDocumentClick = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e.target.tagName === 'CANVAS') {
            this.isOpen = false;
        }
    };
    /**
     * @param {?} pageIndex
     * @param {?} pageSize
     * @return {?}
     */
    QdpViewComponent.prototype.handleCrosstabPageChange = /**
     * @param {?} pageIndex
     * @param {?} pageSize
     * @return {?}
     */
    function (pageIndex, pageSize) {
        this.sheet = this.spread.getActiveSheet();
        for (var i = 0; i < this.sheet.getRowCount(); i++) {
            if (i >= (pageIndex - 1) * pageSize && i < pageIndex * pageSize) {
                this.sheet.setRowVisible(i, true, GC.Spread.Sheets.SheetArea.viewport);
                this.sheet.showRow(i, GC.Spread.Sheets.VerticalPosition.bottom);
            }
            else {
                this.sheet.setRowVisible(i, false, GC.Spread.Sheets.SheetArea.viewport);
            }
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    QdpViewComponent.prototype.handleContextMenu = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if ('list' === this.controlType.toLowerCase()) {
            /** @type {?} */
            var x = 0;
            /** @type {?} */
            var y = 0;
            /** @type {?} */
            var qdpviewNative = this.sheetEl.nativeElement;
            while (qdpviewNative) {
                x += qdpviewNative.offsetLeft;
                y += qdpviewNative.offsetTop;
                qdpviewNative = qdpviewNative.offsetParent;
            }
            /** @type {?} */
            var activeSheet = this.spread.getActiveSheet();
            /** @type {?} */
            var colHeader = GC.Spread.Sheets.SheetArea.colHeader;
            /** @type {?} */
            var target = activeSheet.hitTest($event.clientX - x, $event.clientY - y);
            if (target.hitTestType !== colHeader || target.col === undefined || target.row === undefined) {
                return false;
            }
            /** @type {?} */
            var headerRowCount = activeSheet.getRowCount(colHeader);
            /** @type {?} */
            var span = activeSheet.getSpan(target.row, target.col, colHeader);
            // 判断多级表头的情况下，只处理最子集表头
            if (span && (target.row + span.rowCount) < headerRowCount) {
                return false;
            }
            this.currentColIndex = target.col;
            this.initColGroupAggre(this.currentColIndex);
            this.headerMenuDisplay = 'block';
            this.headerMenuTop = $event.clientY;
            this.headerMenuLeft = $event.clientX;
        }
        return false;
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.handleIsGroupClick = /**
     * @return {?}
     */
    function () {
        if (this.colIsGroup) {
            this.groupSelectValue = this.aggreData[0].value;
            this.groupText = '';
        }
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.handleSaveClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        try {
            if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption && this.schemaValue.schemaValue.columnOption.colList) {
                if (this.schemaValue && this.schemaValue.isPrefab === 1) {
                    this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));
                    return;
                }
                /** @type {?} */
                var colList = JSON.parse(JSON.stringify(this.schemaValue.schemaValue.columnOption.colList));
                /** @type {?} */
                var params = { index: this.currentColIndex, colIndex: 0, type: 'edit' };
                // tslint:disable-next-line:prefer-for-of
                for (var i = 0; i < colList.length; i++) {
                    this.recursiveColumnSort(colList[i], null, params);
                }
                this.schemaValue.schemaValue.columnOption.colList = colList;
                this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);
                this.schemaManager.saveSchema({ schema: JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    self.initQdpView();
                    self.currentColIndex = 0;
                    self.headerMenuDisplay = 'none';
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.formErrorService.exception(error.Message, error);
                }));
            }
        }
        catch (e) {
            self.currentColIndex = 0;
        }
    };
    /**
     * @return {?}
     */
    QdpViewComponent.prototype.handleClearSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        try {
            if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption && this.schemaValue.schemaValue.columnOption.colList && this.schemaValue.schemaValue.columnOption.colList.length) {
                if (this.schemaValue && this.schemaValue.isPrefab === 1) {
                    this.msgService.info(this.localizeService.getValue('spread.message.validate.sort'));
                    return;
                }
                /** @type {?} */
                var colList = JSON.parse(JSON.stringify(this.schemaValue.schemaValue.columnOption.colList));
                // tslint:disable-next-line:prefer-for-of
                for (var i = 0; i < colList.length; i++) {
                    this.recursiveClearColumnSort(colList[i], null);
                }
                this.schemaValue.schemaValue.columnOption.colList = colList;
                this.schemaValue.schemaValue = JSON.stringify(this.schemaValue.schemaValue);
                this.schemaManager.saveSchema({ schema: JSON.stringify(this.schemaValue), groupType: this.groupType }, '').subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    /** @type {?} */
                    var renderOption = Object.assign({ multiSheetsSchemaIds: _this.multiSheetsSchemaIds, curSheet: _this.curSheet, multiSheets: _this.multiSheets }, { schemaId: _this.schemaValue.id, queryId: self.queryId, controlType: self.controlType, qoManagerCode: self.qoManagerCode, pageIndex: 0, queryRelativeUrl: self.queryRelativeUrl, filterCondition: self.conditionExpression, groupType: self.groupType, voId: self.voId, jointsearchInfoList: self.jointsearchInfoList });
                    self.qdpViewRender(renderOption);
                    self.currentColIndex = 0;
                    self.headerMenuDisplay = 'none';
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.formErrorService.exception(error.Message, error);
                }));
            }
        }
        catch (e) {
            self.currentColIndex = 0;
        }
    };
    // @HostListener('click')
    // @HostListener('click')
    /**
     * @param {?} $event
     * @return {?}
     */
    QdpViewComponent.prototype.handleBlur = 
    // @HostListener('click')
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.headerMenuDisplay = 'none';
    };
    /**
     * @private
     * @param {?} index
     * @return {?}
     */
    QdpViewComponent.prototype.initColGroupAggre = /**
     * @private
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (this.schemaValue && this.schemaValue.schemaValue && this.schemaValue.schemaValue.columnOption
            && this.schemaValue.schemaValue.columnOption.colList && this.schemaValue.schemaValue.columnOption.colList.length > index) {
            /** @type {?} */
            var params = { index: this.currentColIndex, colIndex: 0, type: 'init' };
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < this.schemaValue.schemaValue.columnOption.colList.length; i++) {
                this.recursiveColumnSort(this.schemaValue.schemaValue.columnOption.colList[i], null, params);
            }
        }
    };
    /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    QdpViewComponent.prototype.recursiveColumnSort = /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    function (col, colList, params) {
        if (colList == null) {
            if (col.childList && col.childList.length) {
                this.recursiveColumnSort(null, col.childList, params);
            }
            else {
                if (params.colIndex === params.index) {
                    if (params.type === 'init') {
                        this.colIsGroup = col.isGroup;
                        this.groupText = col.groupAggreText || '';
                        this.groupSelectValue = col.groupAggre;
                    }
                    else if (params.type === 'edit') {
                        col.isGroup = this.colIsGroup;
                        col.groupAggreText = this.groupText || '';
                        col.groupAggre = this.groupSelectValue;
                    }
                }
                params.colIndex++;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < colList.length; i++) {
                if (colList[i].childList && colList[i].childList.length) {
                    this.recursiveColumnSort(null, colList[i].childList, params);
                }
                else {
                    if (params.colIndex === params.index) {
                        if (params.type === 'init') {
                            this.colIsGroup = colList[i].isGroup;
                            this.groupText = colList[i].groupAggreText || '';
                            this.groupSelectValue = colList[i].groupAggre;
                        }
                        else if (params.type === 'edit') {
                            colList[i].isGroup = this.colIsGroup;
                            colList[i].groupAggreText = this.groupText || '';
                            colList[i].groupAggre = this.groupSelectValue;
                        }
                    }
                    params.colIndex++;
                }
            }
        }
    };
    /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @return {?}
     */
    QdpViewComponent.prototype.recursiveClearColumnSort = /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @return {?}
     */
    function (col, colList) {
        if (colList == null) {
            if (col.childList && col.childList.length) {
                this.recursiveClearColumnSort(null, col.childList);
            }
            else {
                col['sort'] = 0;
                col['sortIndex'] = 0;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < colList.length; i++) {
                if (colList[i].childList && colList[i].childList.length) {
                    this.recursiveClearColumnSort(null, colList[i].childList);
                }
                else {
                    colList[i]['sort'] = 0;
                    colList[i]['sortIndex'] = 0;
                }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    QdpViewComponent.prototype.registeSpreadColumnWidthChangedEvent = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.sheet = this.spread.getActiveSheet();
        self.sheet.bind(GC.Spread.Sheets.Events.ColumnWidthChanged, (/**
         * @param {?} sender
         * @param {?} info
         * @return {?}
         */
        function (sender, info) {
            /** @type {?} */
            var index = info.colList[0];
            /** @type {?} */
            var colW = info.sheet.getColumnWidth(info.colList[0]);
            if (self.schemaValue && self.schemaValue.schemaValue && self.schemaValue.schemaValue.columnOption
                && self.schemaValue.schemaValue.columnOption.colList && self.schemaValue.schemaValue.columnOption.colList.length) {
                if (self.schemaValue && self.schemaValue.isPrefab === 1) {
                    self.msgService.info(self.localizeService.getValue('spread.message.validate.sort'));
                    return;
                }
                /** @type {?} */
                var colList = JSON.parse(JSON.stringify(self.schemaValue.schemaValue.columnOption.colList));
                /** @type {?} */
                var params = { index: index, colIndex: 0, colWidth: colW };
                // tslint:disable-next-line:prefer-for-of
                for (var i = 0; i < colList.length; i++) {
                    self.recursiveColumnWidthChanged(colList[i], null, params);
                }
                self.schemaValue.schemaValue.columnOption.colList = colList;
                self.schemaValue.schemaValue = JSON.stringify(self.schemaValue.schemaValue);
                self.schemaManager.saveSchema({ schema: JSON.stringify(self.schemaValue), groupType: this.groupType }, '').subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    self.schemaValue.schemaValue = JSON.parse(self.schemaValue.schemaValue);
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    self.formErrorService.exception(error.Message, error);
                }));
            }
        }));
    };
    /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    QdpViewComponent.prototype.recursiveColumnWidthChanged = /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    function (col, colList, params) {
        if (colList == null) {
            if (col.childList && col.childList.length) {
                this.recursiveColumnWidthChanged(null, col.childList, params);
            }
            else {
                if (params.colIndex === params.index) {
                    col.colWidth = params.colWidth;
                }
                params.colIndex++;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < colList.length; i++) {
                if (colList[i].childList && colList[i].childList.length) {
                    this.recursiveColumnWidthChanged(null, colList[i].childList, params);
                }
                else {
                    if (params.colIndex === params.index) {
                        colList[i].colWidth = params.colWidth;
                    }
                    params.colIndex++;
                }
            }
        }
    };
    QdpViewComponent.decorators = [
        { type: Component, args: [{
                    selector: 'qdp-view',
                    template: "<div *ngIf=\"isShowDimension\" #crosstab class=\"f-cmp-sidebar f-sidebar-slide  f-sidebar-pos-right\"\r\n  [ngClass]=\"{'f-sidebar-show': isOpen, 'f-sidebar-collapse': !isOpen }\">\r\n  <div class=\"f-sidebar-main\">\r\n    <div class=\"f-sidebar-header-ctr ng-star-inserted border mb-2\">\r\n      <h5 class=\"f-sidebar-header-title\">{{localizeService.getValue('spread.crossTable.dimensionManager')}}</h5>\r\n      <span id=\"dimensionClose\" (click)=\"toggle()\">\r\n        <img src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMTRweCcgaGVpZ2h0PScxNHB4JyB2aWV3Qm94PScwIDAgMTQgMTQnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPuW9oueKtue7k+WQiDwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJyBzdHJva2UtbGluZWNhcD0ncm91bmQnPjxnIGlkPScwMi3mn6Xor6JVSeiuvuiuoScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTEzMjUuMDAwMDAwLCAtOTUuMDAwMDAwKScgc3Ryb2tlPScjMkQyRjMzJyBzdHJva2Utd2lkdGg9JzEuNCc+PGcgaWQ9J+e8lue7hC0yNicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoODk4LjAwMDAwMCwgNzUuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0yNScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNDIwLjAwMDAwMCwgMTMuMDAwMDAwKSc+PHBhdGggZD0nTTE0LDE0IEw4LDggTDE0LDE0IEw4LDIwIEwxNCwxNCBaIE0xNCwxNCBMMjAsMjAgTDE0LDE0IEwyMCw4IEwxNCwxNCBaJyBpZD0n5b2i54q257uT5ZCIJz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==\" style=\"width: 16px; height: 16px; display: block;\" />\r\n      </span>\r\n    </div>\r\n    <div class=\"container f-utils-fill-flex-column\">\r\n      <dimension-setting class=\"h-100\"  *ngIf=\"controlType=='crosstab'\"\r\n        [controlType]=\"controlType\" \r\n        [queryRelativeUrl]=\"queryRelativeUrl\"\r\n        [qoManagerCode]=\"qoManagerCode\"\r\n        [queryId]=\"queryId\"\r\n        [qoId]=\"qoId\"\r\n        [voId]=\"voId\"\r\n        [groupType]=\"groupType\"\r\n        [spread]=\"spread\"\r\n        [conditionExpression]=\"conditionExpression\"\r\n        [jointsearchInfoList]=\"jointsearchInfoList\"\r\n        [qdpView]=\"this\"\r\n      ></dimension-setting>\r\n      <columns-setting class=\"h-100\"  *ngIf=\"controlType!='crosstab'\"\r\n        [controlType]=\"controlType\" \r\n        [queryRelativeUrl]=\"queryRelativeUrl\"\r\n        [qoManagerCode]=\"qoManagerCode\"\r\n        [queryId]=\"queryId\"\r\n        [qoId]=\"qoId\"\r\n        [voId]=\"voId\"\r\n        [groupType]=\"groupType\"\r\n        [spread]=\"spread\"\r\n        [conditionExpression]=\"conditionExpression\"\r\n        [jointsearchInfoList]=\"jointsearchInfoList\"\r\n        [qdpView]=\"this\"\r\n      ></columns-setting>\r\n    </div>\r\n  </div>\r\n  <div class=\"f-sidebar-entry-ctr\">\r\n    <div class=\"f-sidebar-entry-icon ng-star-inserted\"><span class=\"f-icon f-sidebar-entry\" (click)=\"toggle()\"></span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div #sheet id='sheet' [ngStyle]=\"style\" [ngClass]=\"hostClass\" class=\"flex-fill qdp-overflow-hidden ml-3 mr-3 border\"\r\n  (resized)=\"onResized($event)\" (contextmenu)=\"handleContextMenu($event)\" (click)=\"handleBlur($event)\">\r\n</div>\r\n\r\n<div class=\"dropdown-menu headerMenu\" *ngIf=\"controlType!='crosstab' && controlType!='charts'\"\r\n  [style.left.px]=\"headerMenuLeft\" [style.top.px]=\"headerMenuTop\" [style.display]=\"headerMenuDisplay\">\r\n  <div class=\"flex-fill farris-split-section farris-overflow-hidden\">\r\n    <div class=\"farris-form farris-card-content-bg\">\r\n      <div class=\"col-12 col-md-12 col-lg-12\">\r\n        <div class=\"farris-group-wrap\" [class.form-inline]=\"formInline\" [class.farris-form-inline]=\"formInline\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" for=\"{{colIsGroupId}}\">\r\n              <span\r\n                class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.columnOption.group')}}:</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap farris-checkradio-hor\">\r\n              <div class=\"custom-control custom-checkbox mb-0\">\r\n                <input type=\"checkbox\" [(ngModel)]=\"colIsGroup\" class=\"custom-control-input\" id=\"{{colIsGroupId}}\"\r\n                  checked=\"\">\r\n                <label class=\"custom-control-label\" for=\"{{colIsGroupId}}\" (click)=\"handleIsGroupClick()\"></label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-lg-12\">\r\n        <div class=\"farris-group-wrap\" [class.form-inline]=\"formInline\" [class.farris-form-inline]=\"formInline\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" for=\"colGroupText\">\r\n              <span\r\n                class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.columnOption.groupTotal')}}:</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <input-group [(ngModel)]=\"groupText\" id=\"colGroupText\"></input-group>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-lg-12\">\r\n        <div class=\"farris-group-wrap\" [class.form-inline]=\"formInline\" [class.farris-form-inline]=\"formInline\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" for=\"colGroupAggre\">\r\n              <span\r\n                class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.columnOption.totalType')}}:</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <farris-combo-list id=\"colGroupAggre\" [disabled]=\"colIsGroup\" [(ngModel)]=\"groupSelectValue\"\r\n                [data]=\"aggreData\" [textField]=\"'name'\" [idField]=\"'value'\" [enableClear]=\"false\"></farris-combo-list>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-lg-12\">\r\n        <button class=\"btn btn-primary mr-1\" id=\"button-edit\" (click)=\"handleSaveClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSave')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                    styles: [".qdp-overflow-hidden{overflow:hidden!important}.simpleDemo ul{min-height:42px;padding:0}.card-title,.demo-header{text-align:center}.title{margin:20px 0}.simpleDemo ul .dndDraggingSource{display:none}.simpleDemo ul .dndPlaceholder{background:rgba(56,143,255,.06);border:1px dashed #388fff;box-shadow:0 0 4px 0 rgba(13,95,201,.22);margin:.25rem!important;padding:.25rem!important}.simpleDemo ul li{background:rgba(235,244,254,.84);border:1px solid #388fff;box-shadow:0 0 10px 0 rgba(63,113,177,.22);border-radius:3px;height:28px;font-family:PingFangSC-Regular;font-size:13px;color:#388fff;margin:.25rem!important;padding:.25rem!important}#unselectFieldList li{border:none;background-color:rgba(0,0,0,0);box-shadow:0 0 #000;border-radius:3px;height:28px;margin:.25rem!important;padding:.25rem!important}#unselectFieldList li:hover{background:#f4f5f9}#unselectFieldList .dndPlaceholder{background:rgba(56,143,255,.06);border:1px dashed #388fff;box-shadow:0 0 4px 0 rgba(13,95,201,.22);margin:.25rem!important;padding:.25rem!important}.unselectField{font-family:PingFangSC-Regular;font-size:13px;color:rgba(0,0,0,.85)}.unselectFieldFront{font-family:PingFangSC-Medium;font-size:13px;color:#b4bccc}.simpleDemo ul li.selected{background-color:#dff0d8;color:#3c763d}.current-model{background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;padding:18px 22px}.slicer{height:220px;position:relative}.headerMenu{position:fixed;display:none;top:0;left:0}.cardTitle{background:#f5f7fa;border-radius:3px 3px 0 0;height:36px}.dimensionTitle{font-family:PingFangSC-Medium;font-size:14px;color:rgba(0,0,0,.65);line-height:20px}.imgFont{font-family:PingFangSC-Regular;font-size:13px;color:#b4bccc}"]
                }] }
    ];
    /** @nocollapse */
    QdpViewComponent.ctorParameters = function () { return [
        { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] },
        { type: RenderService },
        { type: Renderer2 },
        { type: FilterManagerService },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    QdpViewComponent.propDecorators = {
        sheetEl: [{ type: ViewChild, args: ['sheet', { read: ElementRef },] }],
        dimensionSettingComponent: [{ type: ViewChild, args: [DimensionSettingComponent,] }],
        columnsSettingComponent: [{ type: ViewChild, args: [ColumnsSettingComponent,] }],
        isInitQdpView: [{ type: Input }],
        isShowDimension: [{ type: Input }],
        cls: [{ type: HostBinding, args: ['class.f-utils-fill-flex-column',] }],
        isCommonQdpViewComponent: [{ type: Input }],
        allowUserDragDrop: [{ type: Input }],
        allowUserDragFill: [{ type: Input }],
        allowUserZoom: [{ type: Input }],
        allowUserResize: [{ type: Input }],
        showHorizontalScrollbar: [{ type: Input }],
        showVerticalScrollbar: [{ type: Input }],
        tabStripVisible: [{ type: Input }],
        allowUndo: [{ type: Input }],
        allowSheetReorder: [{ type: Input }],
        allowCopyPasteExcelStyle: [{ type: Input }],
        allowExtendPasteRange: [{ type: Input }],
        copyPasteHeaderOptions: [{ type: Input }],
        showDragFillSmartTag: [{ type: Input }],
        scrollbarShowMax: [{ type: Input }],
        scrollbarMaxAlign: [{ type: Input }],
        tabEditable: [{ type: Input }],
        newTabVisible: [{ type: Input }],
        tabNavigationVisible: [{ type: Input }],
        backColor: [{ type: Input }],
        backgroundImage: [{ type: Input }],
        backgroundImageLayout: [{ type: Input }],
        grayAreaBackColor: [{ type: Input }],
        showResizeTip: [{ type: Input }],
        showDragDropTip: [{ type: Input }],
        showDragFillTip: [{ type: Input }],
        showScrollTip: [{ type: Input }],
        highlightInvalidData: [{ type: Input }],
        useTouchLayout: [{ type: Input }],
        hideSelection: [{ type: Input }],
        allowUserEditFormula: [{ type: Input }],
        enableFormulaTextbox: [{ type: Input }],
        autoFitType: [{ type: Input }],
        referenceStyle: [{ type: Input }],
        hostStyle: [{ type: Input }],
        hostClass: [{ type: Input }],
        name: [{ type: Input }],
        queryId: [{ type: Input }],
        controlType: [{ type: Input }],
        licenseKey: [{ type: Input }],
        qoManagerCode: [{ type: Input }],
        queryRelativeUrl: [{ type: Input }],
        qoId: [{ type: Input }],
        voId: [{ type: Input }],
        groupType: [{ type: Input }],
        templateType: [{ type: Input }],
        multiSheets: [{ type: Input }],
        formData: [{ type: Input }]
    };
    return QdpViewComponent;
}());
export { QdpViewComponent };
if (false) {
    /** @type {?} */
    QdpViewComponent.prototype.localizeService;
    /** @type {?} */
    QdpViewComponent.prototype.sheetEl;
    /** @type {?} */
    QdpViewComponent.prototype.dimensionSettingComponent;
    /** @type {?} */
    QdpViewComponent.prototype.columnsSettingComponent;
    /** @type {?} */
    QdpViewComponent.prototype.aggreData;
    /** @type {?} */
    QdpViewComponent.prototype.groupSelectValue;
    /** @type {?} */
    QdpViewComponent.prototype.groupText;
    /** @type {?} */
    QdpViewComponent.prototype.colIsGroup;
    /** @type {?} */
    QdpViewComponent.prototype.formInline;
    /** @type {?} */
    QdpViewComponent.prototype.localId;
    /** @type {?} */
    QdpViewComponent.prototype.msgService;
    /** @type {?} */
    QdpViewComponent.prototype.currentColIndex;
    /** @type {?} */
    QdpViewComponent.prototype.schemaManager;
    /** @type {?} */
    QdpViewComponent.prototype.jointSearchManagerService;
    /** @type {?} */
    QdpViewComponent.prototype.lcpService;
    /** @type {?} */
    QdpViewComponent.prototype.pageIndex;
    /** @type {?} */
    QdpViewComponent.prototype.dataRenderExtendService;
    /** @type {?} */
    QdpViewComponent.prototype.loadService;
    /** @type {?} */
    QdpViewComponent.prototype.formErrorService;
    /** @type {?} */
    QdpViewComponent.prototype.cache;
    /** @type {?} */
    QdpViewComponent.prototype.isInitQdpView;
    /** @type {?} */
    QdpViewComponent.prototype.isShowDimension;
    /** @type {?} */
    QdpViewComponent.prototype.cls;
    /** @type {?} */
    QdpViewComponent.prototype.spread;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.elRef;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.spreadOptions;
    /** @type {?} */
    QdpViewComponent.prototype.isOpen;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.docClickSubscription;
    /** @type {?} */
    QdpViewComponent.prototype.headerMenuTop;
    /** @type {?} */
    QdpViewComponent.prototype.headerMenuLeft;
    /** @type {?} */
    QdpViewComponent.prototype.headerMenuDisplay;
    /** @type {?} */
    QdpViewComponent.prototype.colIsGroupId;
    /** @type {?} */
    QdpViewComponent.prototype.style;
    /** @type {?} */
    QdpViewComponent.prototype.isCommonQdpViewComponent;
    /** @type {?} */
    QdpViewComponent.prototype.allowUserDragDrop;
    /** @type {?} */
    QdpViewComponent.prototype.allowUserDragFill;
    /** @type {?} */
    QdpViewComponent.prototype.allowUserZoom;
    /** @type {?} */
    QdpViewComponent.prototype.allowUserResize;
    /** @type {?} */
    QdpViewComponent.prototype.showHorizontalScrollbar;
    /** @type {?} */
    QdpViewComponent.prototype.showVerticalScrollbar;
    /** @type {?} */
    QdpViewComponent.prototype.tabStripVisible;
    /** @type {?} */
    QdpViewComponent.prototype.allowUndo;
    /** @type {?} */
    QdpViewComponent.prototype.allowSheetReorder;
    /** @type {?} */
    QdpViewComponent.prototype.allowCopyPasteExcelStyle;
    /** @type {?} */
    QdpViewComponent.prototype.allowExtendPasteRange;
    /** @type {?} */
    QdpViewComponent.prototype.copyPasteHeaderOptions;
    /** @type {?} */
    QdpViewComponent.prototype.showDragFillSmartTag;
    /** @type {?} */
    QdpViewComponent.prototype.scrollbarShowMax;
    /** @type {?} */
    QdpViewComponent.prototype.scrollbarMaxAlign;
    /** @type {?} */
    QdpViewComponent.prototype.tabEditable;
    /** @type {?} */
    QdpViewComponent.prototype.newTabVisible;
    /** @type {?} */
    QdpViewComponent.prototype.tabNavigationVisible;
    /** @type {?} */
    QdpViewComponent.prototype.backColor;
    /** @type {?} */
    QdpViewComponent.prototype.backgroundImage;
    /** @type {?} */
    QdpViewComponent.prototype.backgroundImageLayout;
    /** @type {?} */
    QdpViewComponent.prototype.grayAreaBackColor;
    /** @type {?} */
    QdpViewComponent.prototype.showResizeTip;
    /** @type {?} */
    QdpViewComponent.prototype.showDragDropTip;
    /** @type {?} */
    QdpViewComponent.prototype.showDragFillTip;
    /** @type {?} */
    QdpViewComponent.prototype.showScrollTip;
    /** @type {?} */
    QdpViewComponent.prototype.highlightInvalidData;
    /** @type {?} */
    QdpViewComponent.prototype.useTouchLayout;
    /** @type {?} */
    QdpViewComponent.prototype.hideSelection;
    /** @type {?} */
    QdpViewComponent.prototype.allowUserEditFormula;
    /** @type {?} */
    QdpViewComponent.prototype.enableFormulaTextbox;
    /** @type {?} */
    QdpViewComponent.prototype.autoFitType;
    /** @type {?} */
    QdpViewComponent.prototype.referenceStyle;
    /** @type {?} */
    QdpViewComponent.prototype.hostStyle;
    /** @type {?} */
    QdpViewComponent.prototype.hostClass;
    /** @type {?} */
    QdpViewComponent.prototype.name;
    /** @type {?} */
    QdpViewComponent.prototype.queryId;
    /** @type {?} */
    QdpViewComponent.prototype.controlType;
    /** @type {?} */
    QdpViewComponent.prototype.licenseKey;
    /** @type {?} */
    QdpViewComponent.prototype.qoManagerCode;
    /** @type {?} */
    QdpViewComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    QdpViewComponent.prototype.qoId;
    /** @type {?} */
    QdpViewComponent.prototype.voId;
    /** @type {?} */
    QdpViewComponent.prototype.groupType;
    /** @type {?} */
    QdpViewComponent.prototype.templateType;
    /** @type {?} */
    QdpViewComponent.prototype.multiSheets;
    /** @type {?} */
    QdpViewComponent.prototype.curSheet;
    /** @type {?} */
    QdpViewComponent.prototype.sheetChanged;
    /** @type {?} */
    QdpViewComponent.prototype.multiSheetsSchemaIds;
    /** @type {?} */
    QdpViewComponent.prototype.sheet;
    /** @type {?} */
    QdpViewComponent.prototype.schemaValue;
    /** @type {?} */
    QdpViewComponent.prototype.colList;
    /** @type {?} */
    QdpViewComponent.prototype.formData;
    /** @type {?} */
    QdpViewComponent.prototype.searchText;
    /** @type {?} */
    QdpViewComponent.prototype.groupIcon;
    /** @type {?} */
    QdpViewComponent.prototype.conditionExpression;
    /** @type {?} */
    QdpViewComponent.prototype.jointsearchInfoList;
    /** @type {?} */
    QdpViewComponent.prototype.loading;
    /** @type {?} */
    QdpViewComponent.prototype.tabId;
    /** @type {?} */
    QdpViewComponent.prototype.renderService;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    QdpViewComponent.prototype.injector;
}
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicWRwLXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHFkcC9zcHJlYWQvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L3FkcC12aWV3L3FkcC12aWV3LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFBRSxLQUFLLEVBQ2hCLFVBQVUsRUFBRSxNQUFNLEVBQVUsU0FBUyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUN0RSxTQUFTLEVBQUUsU0FBUyxFQUNyQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDcEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSx1QkFBdUIsRUFBRSx5QkFBeUIsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUM5SyxPQUFPLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFMUQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDN0YsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDdkYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzVELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDOztJQUl6QixPQUFPOzs7OztBQUFHLFVBQUMsRUFBRSxFQUFFLFFBQVEsSUFBSyxPQUFBLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUF2RCxDQUF1RCxDQUFBOztBQUN6RjtJQW9DRSwwQkFDc0IsS0FBaUIsRUFDOUIsYUFBNEIsRUFDM0IsUUFBbUIsRUFDbkIsYUFBbUMsRUFDdkIsUUFBa0I7UUFIL0Isa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDM0IsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixrQkFBYSxHQUFiLGFBQWEsQ0FBc0I7UUFDdkIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQS9CeEMsY0FBUyxHQUFRO1lBQ2YsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDekIsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDeEIsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDekIsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDekIsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDeEIsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7U0FDMUIsQ0FBQztRQUNGLHFCQUFnQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzNDLGNBQVMsR0FBRyxFQUFFLENBQUM7UUFDZixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ25CLGVBQVUsR0FBRyxJQUFJLENBQUM7UUFHbEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFTWCxrQkFBYSxHQUFHLElBQUksQ0FBQyxDQUFFLHdCQUF3Qjs7UUFDL0Msb0JBQWUsR0FBRyxJQUFJLENBQUM7UUE4QmUsUUFBRyxHQUFHLElBQUksQ0FBQztRQUluRCxXQUFNLEdBQUcsS0FBSyxDQUFDO1FBRXRCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLHNCQUFpQixHQUFHLE1BQU0sQ0FBQztRQUMzQixpQkFBWSxHQUFHLFlBQVksR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFOUMsVUFBSyxHQUFHO1lBQ04sS0FBSyxFQUFFLE9BQU87WUFDZCxNQUFNLEVBQUUsT0FBTztTQUNoQixDQUFDOztRQUdPLDZCQUF3QixHQUFHLEtBQUssQ0FBQztRQWdEMUMsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDLENBQUMsYUFBYTs7UUFDaEQseUJBQW9CLEdBQVEsRUFBRSxDQUFDOztRQU8vQixlQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLGNBQVMsR0FBRyx5Q0FBeUMsQ0FBQztRQUN0RCx3QkFBbUIsR0FBRyxJQUFJLENBQUM7UUFoR3pCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDckQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQztZQUNoRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEtBQUssZ0JBQWdCLENBQUM7WUFDbEUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hELElBQUksQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQzlFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUMxRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLGlEQUFpRCxDQUFDLENBQUM7WUFDbEcsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUM5QztJQUNILENBQUM7Ozs7O0lBRU8sc0NBQVc7Ozs7SUFBbkI7UUFDRSxhQUFhLENBQUMsV0FBVyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQzFGLENBQUM7Ozs7SUFrRkQsbUNBQVE7OztJQUFSO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixhQUFhO1FBQ2IsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLFVBQVUsRUFBRTtZQUNuQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ3hHO1FBQ0QsSUFBSSxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoRCxpQkFBaUI7UUFDakIsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDdEYsYUFBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUQsQ0FBQzs7OztJQUVELDBDQUFlOzs7SUFBZjtRQUFBLGlCQWNDO1FBYkMsSUFBSTtZQUNGLHlCQUF5QjtZQUN6QixJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztZQUN6RCxJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsSUFBSTtnQkFDL0MsSUFBSSxJQUFJLEVBQUU7b0JBQ1IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztpQkFDcEM7Z0JBQ0QsS0FBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ25CLENBQUMsRUFBQyxDQUFDO1NBQ0o7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDdEI7UUFDRCxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUMvQixDQUFDOzs7OztJQUVPLGdEQUFxQjs7OztJQUE3QjtRQUNFLElBQUksSUFBSSxDQUFDLHVCQUF1QixFQUFFO1lBQ2hDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUM1RCxJQUFJLENBQUMsdUJBQXVCLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDdEQsSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztTQUMvRTtJQUNILENBQUM7Ozs7SUFFRCxvQ0FBUzs7O0lBQVQ7O1lBQ1EsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLOztZQUNsQixHQUFHLEdBQUcsbUJBQUEsS0FBSyxDQUFDLGFBQWEsRUFBZTs7WUFDeEMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDO1FBQy9DLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztTQUMvQztRQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7OztZQUVsQixPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUs7UUFDMUIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sR0FBRyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hILElBQUksSUFBSSxDQUFDLFlBQVksS0FBSyxxQkFBcUIsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3JFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNwQjthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7Ozs7OztJQUVPLG1EQUF3Qjs7Ozs7SUFBaEMsVUFBaUMsV0FBZ0I7UUFDL0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFO1lBQzdFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsV0FBVyxDQUFDLEVBQUUsQ0FBQztZQUMxRCxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUM5QjtJQUNILENBQUM7Ozs7SUFFTSxzQ0FBVzs7O0lBQWxCO1FBQUEsaUJBY0M7O1lBYk8sSUFBSSxHQUFHLElBQUk7UUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQzdEO1FBQ0QsSUFBSSxDQUFDLHlCQUF5QixDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsc0NBQXNDLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQyxlQUFvQjtZQUM5SSxLQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsT0FBTyxFQUFFLEtBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxLQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsSUFBSTtnQkFDekosSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztnQkFDaEMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLGVBQWUsQ0FBQztnQkFDM0MsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtvQkFBRSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQUU7O29CQUM5RSxZQUFZLEdBQWlCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixFQUFFLE9BQU8sRUFBRSxLQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzljLEtBQUksQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDbkMsQ0FBQyxFQUFDLENBQUM7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7OztJQUVPLDBDQUFlOzs7OztJQUF2QixVQUF3QixNQUFXO1FBQ2pDLHNDQUFzQztRQUN0QyxxQkFBcUI7UUFDckIsOEJBQThCO1FBQzlCLDJFQUEyRTtRQUMzRSxvQ0FBb0M7UUFDcEMsK0VBQStFO1FBQy9FLHVDQUF1QztRQUN2QyxRQUFRO1FBQ1IsTUFBTTtJQUNSLENBQUM7Ozs7SUFFRCwyQ0FBZ0I7OztJQUFoQjs7WUFDUSxJQUFJLEdBQUcsSUFBSTs7WUFDWCxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU07UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDaEIsT0FBTztTQUNSO1FBQ0QsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7WUFDckIsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhO1FBQ2xDLElBQUksT0FBTyxFQUFFO1lBQ1gsT0FBTyxDQUFDLE9BQU87Ozs7WUFBQyxVQUFDLE1BQU07Z0JBQ3JCLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7b0JBQzFCLE1BQU0sQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztpQkFDNUI7cUJBQU07b0JBQ0wsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztpQkFDNUM7WUFDSCxDQUFDLEVBQUMsQ0FBQztTQUNKO1FBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUMxRCxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0I7Ozs7O1FBQUUsVUFBVSxDQUFDLEVBQUUsSUFBSTtZQUN2RSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDckMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0IsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLENBQUMsRUFBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7Ozs7Ozs7Ozs7OztJQUNILHFDQUFVOzs7Ozs7Ozs7Ozs7Ozs7O0lBQVYsVUFBVyxPQUFlLEVBQUUsUUFBZ0IsRUFBRSxXQUFpQixFQUFFLGFBQW1CLEVBQUUsU0FBZSxFQUFFLGdCQUFzQixFQUFFLGVBQXFCLEVBQUUsU0FBZSxFQUFFLElBQVUsRUFBRSxTQUFlLEVBQUUscUJBQTJCO1FBQzdOLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtZQUM1QyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUNwRCxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUM5QjtRQUNELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLG9CQUFvQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLEVBQUUsUUFBUSxVQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsV0FBVyxhQUFBLEVBQUUsYUFBYSxlQUFBLEVBQUUsU0FBUyxXQUFBLEVBQUUsZ0JBQWdCLGtCQUFBLEVBQUUsZUFBZSxpQkFBQSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFNBQVMsV0FBQSxFQUFFLHFCQUFxQix1QkFBQSxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsYSxDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNILHdDQUFhOzs7OztJQUFiLFVBQWMsTUFBb0I7UUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDbkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQy9EO1FBQ0QsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDckQsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFDekUsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDL0QsSUFBSSxNQUFNLENBQUMsZUFBZSxFQUFFO1lBQzFCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsZUFBZSxDQUFDO1NBQ25EOztZQUNLLFlBQVksR0FBaUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQzdILElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3hDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxhQUFhLEVBQUUsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEgsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDSCxzQ0FBVzs7Ozs7Ozs7Ozs7Ozs7OztJQUFYLFVBQVksT0FBZSxFQUFFLEVBQVUsRUFBRSxJQUFVLEVBQUUsU0FBZSxFQUFFLGFBQW1CLEVBQUUsZ0JBQXNCLEVBQUUsZUFBcUIsRUFBRSxTQUFlLEVBQUUsSUFBVSxFQUFFLFVBQWdCLEVBQUUsVUFBZ0I7UUFDdk0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRSxPQUFPLFNBQUEsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsU0FBUyxXQUFBLEVBQUUsYUFBYSxlQUFBLEVBQUUsZ0JBQWdCLGtCQUFBLEVBQUUsZUFBZSxpQkFBQSxFQUFFLFNBQVMsV0FBQSxFQUFFLElBQUksTUFBQSxFQUFFLFVBQVUsWUFBQSxFQUFFLFVBQVUsWUFBQSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzlSLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILGlDQUFNOzs7OztJQUFOLFVBQU8sTUFBb0I7UUFDekIsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLFVBQVUsRUFBRTtZQUNuQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDaEU7UUFDRCxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDbEQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUN0RSxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDdEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEMseVBBQXlQO0lBQzNQLENBQUM7SUFFRDs7O09BR0c7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDSCx5Q0FBYzs7Ozs7Ozs7Ozs7Ozs7O0lBQWQsVUFBZSxPQUFlLEVBQUUsRUFBVSxFQUFFLElBQVUsRUFBRSxhQUFtQixFQUFFLGdCQUFzQixFQUFFLGdCQUFzQixFQUFFLGVBQXFCLEVBQUUsU0FBZSxFQUFFLFNBQWUsRUFBRSxJQUFVO1FBQzlMLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLG9CQUFvQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLEVBQUUsT0FBTyxTQUFBLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLFNBQVMsV0FBQSxFQUFFLGFBQWEsZUFBQSxFQUFFLGdCQUFnQixrQkFBQSxFQUFFLGdCQUFnQixrQkFBQSxFQUFFLGVBQWUsaUJBQUEsRUFBRSxTQUFTLFdBQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN2UixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCxnQ0FBSzs7Ozs7SUFBTCxVQUFNLE1BQW9CO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNsRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDOUQsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ3RFLE1BQU0sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUN0RixJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQywyT0FBMk87SUFDN08sQ0FBQztJQUVEOzs7T0FHRzs7Ozs7Ozs7Ozs7Ozs7OztJQUNILHVDQUFZOzs7Ozs7Ozs7Ozs7Ozs7SUFBWixVQUFhLE9BQWUsRUFBRSxFQUFVLEVBQUUsSUFBVSxFQUFFLGFBQW1CLEVBQUUsZ0JBQXNCLEVBQUUsZ0JBQXNCLEVBQUUsZUFBcUIsRUFBRSxTQUFlLEVBQUUsU0FBZSxFQUFFLElBQVU7O1lBQ3RMLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJOztZQUNwQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTzs7WUFDaEQsVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVM7O1lBQ3hELGNBQWMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxhQUFhO1FBQzlFLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxvQkFBb0IsRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsZ0JBQWdCLGtCQUFBLEVBQUUsZ0JBQWdCLGtCQUFBLEVBQUUsZUFBZSxpQkFBQSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxXQUFBLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQztRQUN0VixzTUFBc007SUFDeE0sQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsdUNBQVk7Ozs7O0lBQVosVUFBYSxNQUFvQjtRQUMvQixNQUFNLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFDdEUsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2xELElBQUksQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hDLHlPQUF5TztJQUMzTyxDQUFDOzs7OztJQUVELHNDQUFXOzs7O0lBQVgsVUFBWSxPQUFzQjs7WUFDMUIsT0FBTyxHQUFHLEVBQUU7UUFDbEIsS0FBSyxJQUFNLFVBQVUsSUFBSSxPQUFPLEVBQUU7O2dCQUMxQixRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVk7WUFDakQsSUFBSSxRQUFRLEtBQUssSUFBSSxJQUFJLFFBQVEsS0FBSyxLQUFLLENBQUMsRUFBRTtnQkFDNUMsSUFBSSxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDaEQsUUFBUSxVQUFVLEVBQUU7b0JBQ2xCLEtBQUssV0FBVzt3QkFDZCxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQzt3QkFDdEIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFOzRCQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7eUJBQ3ZCO3dCQUNELE1BQU07b0JBQ1IsS0FBSyxXQUFXO3dCQUNkLE1BQU07b0JBQ1IsS0FBSyxNQUFNO3dCQUNULElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQzt3QkFDNUIsTUFBTTtvQkFDUixLQUFLLFVBQVU7d0JBQ2IsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPOzs7O3dCQUFDLFVBQUEsR0FBRzs0QkFDOUIsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDOzRCQUNyQixHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7NEJBQzFCLEdBQUcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDOzRCQUNuQixHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQzs0QkFDZCxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzs0QkFDbkIsR0FBRyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7NEJBQ3BCLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDOzRCQUNuQixHQUFHLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQzs0QkFDbkIsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7NEJBQ2IsR0FBRyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7NEJBQ3pCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDOzRCQUNsQixHQUFHLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzs0QkFDcEIsR0FBRyxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7NEJBQ3hCLEdBQUcsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDOzRCQUNuQixHQUFHLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQzs0QkFDeEIsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7NEJBQ25CLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDOzRCQUNkLEdBQUcsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDOzRCQUNuQixHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQzs0QkFDbEIsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7d0JBQ3RCLENBQUMsRUFBQyxDQUFDO3dCQUNILElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO3dCQUN6QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7d0JBQ25CLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQzt3QkFDakIsTUFBTTtvQkFDUixLQUFLLFdBQVc7d0JBQ2QsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7d0JBQzFCLE1BQU07b0JBQ1IsS0FBSyxTQUFTO3dCQUNaLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO3dCQUN4QixZQUFZLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQzt3QkFDdEYsTUFBTTtvQkFDUixLQUFLLGFBQWE7d0JBQ2hCLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO3dCQUM1QixNQUFNO29CQUNSLEtBQUssTUFBTTt3QkFDVCxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQzt3QkFDckIsYUFBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzFELE1BQU07b0JBQ1IsS0FBSyxlQUFlLENBQUM7b0JBQ3JCLEtBQUssTUFBTSxDQUFDO29CQUNaLEtBQUssa0JBQWtCLENBQUM7b0JBQ3hCLEtBQUssY0FBYzt3QkFDakIsTUFBTTtvQkFDUixLQUFLLGFBQWE7d0JBQ2hCLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO3dCQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbkMsTUFBTTtvQkFDUixLQUFLLFlBQVk7d0JBQ2YsSUFBSSxRQUFRLEVBQUU7NEJBQ1osRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQzt5QkFDeEM7d0JBQ0QsTUFBTTtvQkFDUixLQUFLLDBCQUEwQjt3QkFDN0IsSUFBSSxDQUFDLHdCQUF3QixHQUFHLFFBQVEsQ0FBQzt3QkFDekMsSUFBSSxJQUFJLENBQUMsd0JBQXdCLEVBQUU7eUJBRWxDO3dCQUNELE1BQU07b0JBQ1I7d0JBQ0UsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7aUJBQ3ZEO2FBQ0Y7U0FDRjtRQUNELElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDO1FBQzdCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7Ozs7SUFFRCxzQ0FBVzs7O0lBQVg7UUFDRSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQzs7Ozs7SUFFRCxvQ0FBUzs7OztJQUFULFVBQVUsS0FBVTtRQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUMzQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztJQUMzQyxDQUFDOzs7O0lBRUQsaUNBQU07OztJQUFOO1FBQUEsaUJBcUJDOztZQXBCSyxTQUFTLEdBQUcsS0FBSztRQUNyQixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssVUFBVSxFQUFFO2dCQUNuQyxJQUFJLENBQUMseUJBQXlCLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztnQkFDakQsSUFBSSxDQUFDLHlCQUF5QixDQUFDLGdCQUFnQixFQUFFLENBQUM7Z0JBQ2xELFNBQVMsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMsU0FBUyxDQUFDO2FBQ3REO2lCQUFNO2dCQUNMLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUMvQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDaEQsU0FBUyxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxTQUFTLENBQUM7YUFDcEQ7WUFDRCxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUNyRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQy9NLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBUzs7O2dCQUFDLGNBQVEsQ0FBQzs7OztnQkFBRSxVQUFDLEtBQVU7b0JBQzNJLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDeEQsQ0FBQyxFQUFDLENBQUM7Z0JBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQ3pFO1NBQ0Y7UUFDRCxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUM3QixDQUFDOzs7OztJQUVELG1DQUFROzs7O0lBQVIsVUFBUyxTQUFjO1FBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQzFCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2hELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNsRTtZQUNELElBQUksQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDO1NBQzdCO2FBQU07WUFDTCxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztTQUM1QjtRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6QyxDQUFDOzs7Ozs7SUFFTywwQ0FBZTs7Ozs7SUFBdkIsVUFBd0IsQ0FBTTtRQUM1QixJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxLQUFLLFFBQVEsRUFBRTtZQUNqQyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztTQUNyQjtJQUNILENBQUM7Ozs7OztJQUVNLG1EQUF3Qjs7Ozs7SUFBL0IsVUFBZ0MsU0FBYyxFQUFFLFFBQWE7UUFDM0QsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQzFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pELElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsSUFBSSxDQUFDLEdBQUcsU0FBUyxHQUFHLFFBQVEsRUFBRTtnQkFDL0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3ZFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUNqRTtpQkFBTTtnQkFDTCxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN6RTtTQUNGO0lBQ0gsQ0FBQzs7Ozs7SUFFRCw0Q0FBaUI7Ozs7SUFBakIsVUFBa0IsTUFBTTtRQUN0QixJQUFJLE1BQU0sS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxFQUFFOztnQkFDekMsQ0FBQyxHQUFHLENBQUM7O2dCQUFFLENBQUMsR0FBRyxDQUFDOztnQkFDWixhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhO1lBQzlDLE9BQU8sYUFBYSxFQUFFO2dCQUNwQixDQUFDLElBQUksYUFBYSxDQUFDLFVBQVUsQ0FBQztnQkFDOUIsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxTQUFTLENBQUM7Z0JBQzdCLGFBQWEsR0FBRyxhQUFhLENBQUMsWUFBWSxDQUFDO2FBQzVDOztnQkFFSyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUU7O2dCQUMxQyxTQUFTLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVM7O2dCQUNoRCxNQUFNLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUMxRSxJQUFJLE1BQU0sQ0FBQyxXQUFXLEtBQUssU0FBUyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEtBQUssU0FBUyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEtBQUssU0FBUyxFQUFFO2dCQUM1RixPQUFPLEtBQUssQ0FBQzthQUNkOztnQkFFSyxjQUFjLEdBQUcsV0FBVyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUM7O2dCQUNuRCxJQUFJLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDO1lBQ25FLHNCQUFzQjtZQUN0QixJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLGNBQWMsRUFBRTtnQkFDekQsT0FBTyxLQUFLLENBQUM7YUFDZDtZQUNELElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQztZQUNsQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBRTdDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxPQUFPLENBQUM7WUFDakMsSUFBSSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztTQUN0QztRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQzs7OztJQUVELDZDQUFrQjs7O0lBQWxCO1FBQ0UsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUNoRCxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztTQUNyQjtJQUNILENBQUM7Ozs7SUFFRCwwQ0FBZTs7O0lBQWY7UUFBQSxpQkEwQkM7O1lBekJPLElBQUksR0FBRyxJQUFJO1FBQ2pCLElBQUk7WUFDRixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUU7Z0JBQ3RKLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsS0FBSyxDQUFDLEVBQUU7b0JBQ3ZELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDhCQUE4QixDQUFDLENBQUMsQ0FBQztvQkFDcEYsT0FBTztpQkFDUjs7b0JBQ0ssT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7O29CQUN2RixNQUFNLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7Z0JBQ3pFLHlDQUF5QztnQkFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ3ZDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2lCQUNwRDtnQkFFRCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztnQkFDNUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUM1RSxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxJQUFJO29CQUN2SCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQ25CLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO29CQUN6QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDO2dCQUNsQyxDQUFDOzs7O2dCQUFFLFVBQUMsS0FBVTtvQkFDWixLQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3hELENBQUMsRUFBQyxDQUFDO2FBQ0o7U0FDRjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7U0FBRTtJQUMzQyxDQUFDOzs7O0lBRUQsMENBQWU7OztJQUFmO1FBQUEsaUJBNEJDOztZQTNCTyxJQUFJLEdBQUcsSUFBSTtRQUNqQixJQUFJO1lBQ0YsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUNsTixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEtBQUssQ0FBQyxFQUFFO29CQUN2RCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLENBQUM7b0JBQ3BGLE9BQU87aUJBQ1I7O29CQUNLLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUM3Rix5Q0FBeUM7Z0JBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUN2QyxJQUFJLENBQUMsd0JBQXdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNqRDtnQkFFRCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztnQkFDNUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUM1RSxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxJQUFJOzt3QkFDakgsWUFBWSxHQUFpQixNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsb0JBQW9CLEVBQUUsS0FBSSxDQUFDLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxLQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxLQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxtQkFBbUIsRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztvQkFDdGQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFDakMsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7b0JBQ3pCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUM7Z0JBQ2xDLENBQUM7Ozs7Z0JBQUUsVUFBQyxLQUFVO29CQUNaLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDeEQsQ0FBQyxFQUFDLENBQUM7YUFDSjtTQUNGO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQztTQUMxQjtJQUNILENBQUM7SUFFRCx5QkFBeUI7Ozs7OztJQUN6QixxQ0FBVTs7Ozs7O0lBQVYsVUFBVyxNQUFNO1FBQ2YsSUFBSSxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQztJQUNsQyxDQUFDOzs7Ozs7SUFFTyw0Q0FBaUI7Ozs7O0lBQXpCLFVBQTBCLEtBQVU7UUFDbEMsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVk7ZUFDNUYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLEVBQUU7O2dCQUNwSCxNQUFNLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7WUFDekUseUNBQXlDO1lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakYsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQzlGO1NBQ0Y7SUFDSCxDQUFDOzs7Ozs7OztJQUVPLDhDQUFtQjs7Ozs7OztJQUEzQixVQUE0QixHQUFHLEVBQUUsT0FBTyxFQUFFLE1BQU07UUFDOUMsSUFBSSxPQUFPLElBQUksSUFBSSxFQUFFO1lBQ25CLElBQUksR0FBRyxDQUFDLFNBQVMsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRTtnQkFDekMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQ3ZEO2lCQUFNO2dCQUNMLElBQUksTUFBTSxDQUFDLFFBQVEsS0FBSyxNQUFNLENBQUMsS0FBSyxFQUFFO29CQUNwQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFO3dCQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUM7d0JBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUM7d0JBQzFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDO3FCQUN4Qzt5QkFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFO3dCQUNqQyxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7d0JBQzlCLEdBQUcsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7d0JBQzFDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDO3FCQUN4QztpQkFDRjtnQkFDRCxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDbkI7U0FDRjthQUFNO1lBQ0wseUNBQXlDO1lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUU7b0JBQ3ZELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztpQkFDOUQ7cUJBQU07b0JBQ0wsSUFBSSxNQUFNLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxLQUFLLEVBQUU7d0JBQ3BDLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7NEJBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQzs0QkFDckMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQzs0QkFDakQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7eUJBQy9DOzZCQUFNLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7NEJBQ2pDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQzs0QkFDckMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQzs0QkFDakQsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7eUJBQy9DO3FCQUNGO29CQUNELE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztpQkFDbkI7YUFDRjtTQUNGO0lBQ0gsQ0FBQzs7Ozs7OztJQUVPLG1EQUF3Qjs7Ozs7O0lBQWhDLFVBQWlDLEdBQUcsRUFBRSxPQUFPO1FBQzNDLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtZQUNuQixJQUFJLEdBQUcsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUU7Z0JBQ3pDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3BEO2lCQUFNO2dCQUNMLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2hCLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdEI7U0FDRjthQUFNO1lBQ0wseUNBQXlDO1lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUU7b0JBQ3ZELElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2lCQUMzRDtxQkFBTTtvQkFDTCxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUN2QixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUM3QjthQUNGO1NBQ0Y7SUFDSCxDQUFDOzs7OztJQUVPLCtEQUFvQzs7OztJQUE1Qzs7WUFDUSxJQUFJLEdBQUcsSUFBSTtRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGtCQUFrQjs7Ozs7UUFBRSxVQUFVLE1BQU0sRUFBRSxJQUFJOztnQkFDMUUsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOztnQkFDdkIsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkQsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVk7bUJBQzVGLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7Z0JBQ2xILElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsS0FBSyxDQUFDLEVBQUU7b0JBQ3ZELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDhCQUE4QixDQUFDLENBQUMsQ0FBQztvQkFDcEYsT0FBTztpQkFDUjs7b0JBRUssT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7O29CQUN2RixNQUFNLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtnQkFDNUQseUNBQXlDO2dCQUN6QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDdkMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7aUJBQzVEO2dCQUVELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO2dCQUM1RCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQzVFLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLElBQUk7b0JBQ3ZILElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDMUUsQ0FBQzs7OztnQkFBRSxVQUFDLEtBQVU7b0JBQ1osSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUN4RCxDQUFDLEVBQUMsQ0FBQzthQUNKO1FBQ0gsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7Ozs7OztJQUVPLHNEQUEyQjs7Ozs7OztJQUFuQyxVQUFvQyxHQUFHLEVBQUUsT0FBTyxFQUFFLE1BQU07UUFDdEQsSUFBSSxPQUFPLElBQUksSUFBSSxFQUFFO1lBQ25CLElBQUksR0FBRyxDQUFDLFNBQVMsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRTtnQkFDekMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQy9EO2lCQUFNO2dCQUNMLElBQUksTUFBTSxDQUFDLFFBQVEsS0FBSyxNQUFNLENBQUMsS0FBSyxFQUFFO29CQUNwQyxHQUFHLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7aUJBQ2hDO2dCQUNELE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQzthQUNuQjtTQUNGO2FBQU07WUFDTCx5Q0FBeUM7WUFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3ZDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRTtvQkFDdkQsSUFBSSxDQUFDLDJCQUEyQixDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2lCQUN0RTtxQkFBTTtvQkFDTCxJQUFJLE1BQU0sQ0FBQyxRQUFRLEtBQUssTUFBTSxDQUFDLEtBQUssRUFBRTt3QkFDcEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO3FCQUN2QztvQkFDRCxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7aUJBQ25CO2FBQ0Y7U0FDRjtJQUNILENBQUM7O2dCQTV1QkYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxVQUFVO29CQUNwQixndE1BQXdDOztpQkFFekM7Ozs7Z0JBdkJDLFVBQVUsdUJBd0RQLE1BQU0sU0FBQyxVQUFVO2dCQXJEYixhQUFhO2dCQUhRLFNBQVM7Z0JBSTlCLG9CQUFvQjtnQkFKeUIsUUFBUSx1QkE0RHpELFFBQVE7OzswQkFsQ1YsU0FBUyxTQUFDLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7NENBQ3ZDLFNBQVMsU0FBQyx5QkFBeUI7MENBQ25DLFNBQVMsU0FBQyx1QkFBdUI7Z0NBd0JqQyxLQUFLO2tDQUNMLEtBQUs7c0JBOEJMLFdBQVcsU0FBQyxnQ0FBZ0M7MkNBaUI1QyxLQUFLO29DQUNMLEtBQUs7b0NBQ0wsS0FBSztnQ0FDTCxLQUFLO2tDQUNMLEtBQUs7MENBQ0wsS0FBSzt3Q0FDTCxLQUFLO2tDQUNMLEtBQUs7NEJBQ0wsS0FBSztvQ0FDTCxLQUFLOzJDQUNMLEtBQUs7d0NBQ0wsS0FBSzt5Q0FDTCxLQUFLO3VDQUNMLEtBQUs7bUNBQ0wsS0FBSztvQ0FDTCxLQUFLOzhCQUNMLEtBQUs7Z0NBQ0wsS0FBSzt1Q0FDTCxLQUFLOzRCQUNMLEtBQUs7a0NBQ0wsS0FBSzt3Q0FDTCxLQUFLO29DQUNMLEtBQUs7Z0NBQ0wsS0FBSztrQ0FDTCxLQUFLO2tDQUNMLEtBQUs7Z0NBQ0wsS0FBSzt1Q0FDTCxLQUFLO2lDQUNMLEtBQUs7Z0NBQ0wsS0FBSzt1Q0FDTCxLQUFLO3VDQUNMLEtBQUs7OEJBQ0wsS0FBSztpQ0FDTCxLQUFLOzRCQUNMLEtBQUs7NEJBQ0wsS0FBSzt1QkFDTCxLQUFLOzBCQUNMLEtBQUs7OEJBQ0wsS0FBSzs2QkFDTCxLQUFLO2dDQUNMLEtBQUs7bUNBQ0wsS0FBSzt1QkFDTCxLQUFLO3VCQUNMLEtBQUs7NEJBQ0wsS0FBSzsrQkFDTCxLQUFLOzhCQUNMLEtBQUs7MkJBU0wsS0FBSzs7SUFxbUJSLHVCQUFDO0NBQUEsQUE3dUJELElBNnVCQztTQXh1QlksZ0JBQWdCOzs7SUFDM0IsMkNBQWlDOztJQUNqQyxtQ0FBcUU7O0lBQ3JFLHFEQUFnRTs7SUFDaEUsbURBQTREOztJQUM1RCxxQ0FPRTs7SUFDRiw0Q0FBMkM7O0lBQzNDLHFDQUFlOztJQUNmLHNDQUFtQjs7SUFDbkIsc0NBQWtCOztJQUNsQixtQ0FBYTs7SUFDYixzQ0FBZ0I7O0lBQ2hCLDJDQUFvQjs7SUFDcEIseUNBQW9DOztJQUNwQyxxREFBcUQ7O0lBQ3JELHNDQUF1Qjs7SUFDdkIscUNBQWU7O0lBQ2YsbURBQTZCOztJQUM3Qix1Q0FBNEI7O0lBQzVCLDRDQUFtQzs7SUFDbkMsaUNBQW9COztJQUNwQix5Q0FBOEI7O0lBQzlCLDJDQUFnQzs7SUE4QmhDLCtCQUEwRDs7SUFDMUQsa0NBQW1COzs7OztJQUNuQixpQ0FBMEI7Ozs7O0lBQzFCLHlDQUE2Qjs7SUFDN0Isa0NBQXNCOzs7OztJQUN0QixnREFBa0M7O0lBQ2xDLHlDQUFrQjs7SUFDbEIsMENBQW1COztJQUNuQiw2Q0FBMkI7O0lBQzNCLHdDQUE4Qzs7SUFFOUMsaUNBR0U7O0lBR0Ysb0RBQTBDOztJQUMxQyw2Q0FBb0M7O0lBQ3BDLDZDQUFvQzs7SUFDcEMseUNBQWdDOztJQUNoQywyQ0FBa0M7O0lBQ2xDLG1EQUEwQzs7SUFDMUMsaURBQXdDOztJQUN4QywyQ0FBa0M7O0lBQ2xDLHFDQUE0Qjs7SUFDNUIsNkNBQW9DOztJQUNwQyxvREFBMkM7O0lBQzNDLGlEQUF3Qzs7SUFDeEMsa0RBQXlDOztJQUN6QyxnREFBdUM7O0lBQ3ZDLDRDQUFtQzs7SUFDbkMsNkNBQW9DOztJQUNwQyx1Q0FBOEI7O0lBQzlCLHlDQUFnQzs7SUFDaEMsZ0RBQXVDOztJQUN2QyxxQ0FBMkI7O0lBQzNCLDJDQUFpQzs7SUFDakMsaURBQXVDOztJQUN2Qyw2Q0FBbUM7O0lBQ25DLHlDQUErQjs7SUFDL0IsMkNBQWtDOztJQUNsQywyQ0FBa0M7O0lBQ2xDLHlDQUErQjs7SUFDL0IsZ0RBQXVDOztJQUN2QywwQ0FBaUM7O0lBQ2pDLHlDQUFnQzs7SUFDaEMsZ0RBQXVDOztJQUN2QyxnREFBdUM7O0lBQ3ZDLHVDQUE2Qjs7SUFDN0IsMENBQWdDOztJQUNoQyxxQ0FBd0I7O0lBQ3hCLHFDQUEyQjs7SUFDM0IsZ0NBQXNCOztJQUN0QixtQ0FBeUI7O0lBQ3pCLHVDQUE2Qjs7SUFDN0Isc0NBQTRCOztJQUM1Qix5Q0FBNEI7O0lBQzVCLDRDQUErQjs7SUFDL0IsZ0NBQW1COztJQUNuQixnQ0FBbUI7O0lBQ25CLHFDQUF3Qjs7SUFDeEIsd0NBQTJCOztJQUMzQix1Q0FBNEI7O0lBQzVCLG9DQUFjOztJQUNkLHdDQUFrQzs7SUFDbEMsZ0RBQStCOztJQUUvQixpQ0FBVzs7SUFFWCx1Q0FBaUI7O0lBQ2pCLG1DQUFhOztJQUNiLG9DQUF1Qjs7SUFDdkIsc0NBQWdCOztJQUNoQixxQ0FBc0Q7O0lBQ3RELCtDQUEyQjs7SUFDM0IsK0NBQXlCOztJQUN6QixtQ0FBYTs7SUFDYixpQ0FBVzs7SUF4R1QseUNBQW1DOzs7OztJQUNuQyxvQ0FBMkI7Ozs7O0lBQzNCLHlDQUEyQzs7Ozs7SUFDM0Msb0NBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSxcclxuICBFbGVtZW50UmVmLCBJbmplY3QsIE9uSW5pdCwgUmVuZGVyZXIyLCBIb3N0QmluZGluZywgSW5qZWN0b3IsIE9wdGlvbmFsLFxyXG4gIFZpZXdDaGlsZCwgTE9DQUxFX0lELCBPdXRwdXQsIEV2ZW50RW1pdHRlclxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9yZW5kZXIvcmVuZGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGaWx0ZXJNYW5hZ2VyU2VydmljZSwgU2NoZW1hTWFuYWdlclNlcnZpY2UsIEV2ZW50QnVzLCBEYXRhUmVuZGVyRXh0ZW5kU2VydmljZSwgSm9pbnRTZWFyY2hNYW5hZ2VyU2VydmljZSwgTGNwU2VydmljZSwgUURQQ2FjaGVVdGlsLCBSdGZTZXJ2aWNlcyB9IGZyb20gJ0BxZHAvY29tbW9uJztcclxuaW1wb3J0IHsgTG9jYWxpemVTZXJ2aWNlLCBERUZBVUxUX0xBTkdVQUdFIH0gZnJvbSAnQHFkcC9sb2NhbGl6ZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBTZXJ2aWNlc1V0aWxzIH0gZnJvbSAnLi4vLi4vdXRpbC9zZXJ2aWNlcy51dGlscyc7XHJcbmltcG9ydCB7IFJlbmRlck9wdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0eS9SZW5kZXJPcHRpb24nO1xyXG5pbXBvcnQgeyBEaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50IH0gZnJvbSAnLi4vZGltZW5zaW9uLXNldHRpbmcvZGltZW5zaW9uLXNldHRpbmcuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ29sdW1uc1NldHRpbmdDb21wb25lbnQgfSBmcm9tICcuLi9jb2x1bW5zLXNldHRpbmcvY29sdW1ucy1zZXR0aW5nLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgRm9ybUVycm9yU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IENhY2hlU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcblxyXG5kZWNsYXJlIHZhciBHQzogYW55O1xyXG5cclxuY29uc3QgbWF0Y2hlcyA9IChlbCwgc2VsZWN0b3IpID0+IChlbC5tYXRjaGVzIHx8IGVsLm1zTWF0Y2hlc1NlbGVjdG9yKS5jYWxsKGVsLCBzZWxlY3Rvcik7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncWRwLXZpZXcnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9xZHAtdmlldy5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcWRwLXZpZXcuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBRZHBWaWV3Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XHJcbiAgbG9jYWxpemVTZXJ2aWNlOiBMb2NhbGl6ZVNlcnZpY2U7XHJcbiAgQFZpZXdDaGlsZCgnc2hlZXQnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgcHVibGljIHNoZWV0RWw6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZChEaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50KSBkaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoQ29sdW1uc1NldHRpbmdDb21wb25lbnQpIGNvbHVtbnNTZXR0aW5nQ29tcG9uZW50O1xyXG4gIGFnZ3JlRGF0YTogYW55ID0gW1xyXG4gICAgeyBuYW1lOiAn6K+36YCJ5oupJywgdmFsdWU6IDAgfSxcclxuICAgIHsgbmFtZTogJ+WQiOiuoScsIHZhbHVlOiAxIH0sXHJcbiAgICB7IG5hbWU6ICfmnIDlsI/lgLwnLCB2YWx1ZTogMiB9LFxyXG4gICAgeyBuYW1lOiAn5pyA5aSn5YC8JywgdmFsdWU6IDMgfSxcclxuICAgIHsgbmFtZTogJ+iuoeaVsCcsIHZhbHVlOiA0IH0sXHJcbiAgICB7IG5hbWU6ICflubPlnYflgLwnLCB2YWx1ZTogNSB9XHJcbiAgXTtcclxuICBncm91cFNlbGVjdFZhbHVlID0gdGhpcy5hZ2dyZURhdGFbMF0udmFsdWU7XHJcbiAgZ3JvdXBUZXh0ID0gJyc7XHJcbiAgY29sSXNHcm91cCA9IGZhbHNlO1xyXG4gIGZvcm1JbmxpbmUgPSB0cnVlO1xyXG4gIGxvY2FsSWQ6IGFueTtcclxuICBtc2dTZXJ2aWNlOiBhbnk7XHJcbiAgY3VycmVudENvbEluZGV4ID0gMDtcclxuICBzY2hlbWFNYW5hZ2VyOiBTY2hlbWFNYW5hZ2VyU2VydmljZTtcclxuICBqb2ludFNlYXJjaE1hbmFnZXJTZXJ2aWNlOiBKb2ludFNlYXJjaE1hbmFnZXJTZXJ2aWNlO1xyXG4gIGxjcFNlcnZpY2U6IExjcFNlcnZpY2U7XHJcbiAgcGFnZUluZGV4OiBhbnk7XHJcbiAgZGF0YVJlbmRlckV4dGVuZFNlcnZpY2U6IGFueTtcclxuICBsb2FkU2VydmljZTogTG9hZGluZ1NlcnZpY2U7XHJcbiAgZm9ybUVycm9yU2VydmljZTogRm9ybUVycm9yU2VydmljZTtcclxuICBjYWNoZTogQ2FjaGVTZXJ2aWNlO1xyXG4gIEBJbnB1dCgpIGlzSW5pdFFkcFZpZXcgPSB0cnVlOyAgLy8g5piv5ZCm5Yid5aeL5YyWcWRwVmlld0NvbXBvbmVudFxyXG4gIEBJbnB1dCgpIGlzU2hvd0RpbWVuc2lvbiA9IHRydWU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQEluamVjdChFbGVtZW50UmVmKSBlbFJlZjogRWxlbWVudFJlZixcclxuICAgIHB1YmxpYyByZW5kZXJTZXJ2aWNlOiBSZW5kZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSBmaWx0ZXJTZXJ2aWNlOiBGaWx0ZXJNYW5hZ2VyU2VydmljZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLmVsUmVmID0gZWxSZWY7XHJcbiAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICB0aGlzLmxvY2FsaXplU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsaXplU2VydmljZSk7XHJcbiAgICAgIHRoaXMubXNnU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE1lc3NhZ2VyU2VydmljZSk7XHJcbiAgICAgIHRoaXMubG9jYWxJZCA9IHRoaXMuaW5qZWN0b3IuZ2V0KExPQ0FMRV9JRCkgfHwgREVGQVVMVF9MQU5HVUFHRTtcclxuICAgICAgdGhpcy5mb3JtSW5saW5lID0gdGhpcy5sb2NhbElkLnRvTG93ZXJDYXNlKCkgPT09IERFRkFVTFRfTEFOR1VBR0U7XHJcbiAgICAgIHRoaXMubG9hZFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2FkaW5nU2VydmljZSk7XHJcbiAgICAgIHRoaXMubGNwU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExjcFNlcnZpY2UpO1xyXG4gICAgICB0aGlzLmpvaW50U2VhcmNoTWFuYWdlclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChKb2ludFNlYXJjaE1hbmFnZXJTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5zY2hlbWFNYW5hZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoU2NoZW1hTWFuYWdlclNlcnZpY2UpO1xyXG4gICAgICB0aGlzLmRhdGFSZW5kZXJFeHRlbmRTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoRGF0YVJlbmRlckV4dGVuZFNlcnZpY2UpO1xyXG4gICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChGb3JtRXJyb3JTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5hZ2dyZURhdGEgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIuY29sdW1uT3B0aW9uLmFnZ3JlZ2F0ZURhdGEnKTtcclxuICAgICAgdGhpcy5jYWNoZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KENhY2hlU2VydmljZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFNlcnZpY2VzKCkge1xyXG4gICAgU2VydmljZXNVdGlscy5zZXRTZXJ2aWNlcygncmVuZGVyRXh0ZW5kcycgKyB0aGlzLnF1ZXJ5SWQsIHRoaXMuZGF0YVJlbmRlckV4dGVuZFNlcnZpY2UpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLXV0aWxzLWZpbGwtZmxleC1jb2x1bW4nKSBjbHMgPSB0cnVlO1xyXG4gIHB1YmxpYyBzcHJlYWQ6IGFueTtcclxuICBwcml2YXRlIGVsUmVmOiBFbGVtZW50UmVmO1xyXG4gIHByaXZhdGUgc3ByZWFkT3B0aW9uczogYW55W107XHJcbiAgcHVibGljIGlzT3BlbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZG9jQ2xpY2tTdWJzY3JpcHRpb246IGFueTtcclxuICBoZWFkZXJNZW51VG9wID0gMDtcclxuICBoZWFkZXJNZW51TGVmdCA9IDA7XHJcbiAgaGVhZGVyTWVudURpc3BsYXkgPSAnbm9uZSc7XHJcbiAgY29sSXNHcm91cElkID0gJ2NvbElzR3JvdXAnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG5cclxuICBzdHlsZSA9IHtcclxuICAgIHdpZHRoOiAnODAwcHgnLFxyXG4gICAgaGVpZ2h0OiAnNjAwcHgnXHJcbiAgfTtcclxuXHJcbiAgLy8gaW5kaWNhdGUgYWxsIG9wdGlvbnNcclxuICBASW5wdXQoKSBpc0NvbW1vblFkcFZpZXdDb21wb25lbnQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBhbGxvd1VzZXJEcmFnRHJvcDogYm9vbGVhbjsgICAgICAgIC8vIOaMh+WumuaYr+WQpuWFgeiuuOaLluaLvVJhbmdl5pWw5o2uXHJcbiAgQElucHV0KCkgYWxsb3dVc2VyRHJhZ0ZpbGw6IGJvb2xlYW47ICAgICAgICAvLyDmjIflrprmmK/lkKblhYHorrjmi5bmi73loavlhYXojIPlm7RcclxuICBASW5wdXQoKSBhbGxvd1VzZXJab29tOiBib29sZWFuOyAgICAgICAgICAgIC8vIOaMh+WumuaYr+WQpuWFgeiuuOaMieS9j2N0cmwsIOm8oOagh+a7mui9rui/m+ihjOe8qeaUvlxyXG4gIEBJbnB1dCgpIGFsbG93VXNlclJlc2l6ZTogYm9vbGVhbjsgICAgICAgICAgLy8g5oyH5a6a5piv5ZCm5YWB6K646LCD5pW05YiX5ZKM6KGM55qE5aSn5bCPXHJcbiAgQElucHV0KCkgc2hvd0hvcml6b250YWxTY3JvbGxiYXI6IGJvb2xlYW47ICAvLyDmjIflrprmmK/lkKbmmL7npLrlnoLnm7TmlrnlkJHnmoTmu5rliqjmnaFcclxuICBASW5wdXQoKSBzaG93VmVydGljYWxTY3JvbGxiYXI6IGJvb2xlYW47ICAgIC8vIOaMh+WumuaYr+WQpuaYvuekuuawtOW5s+aWueWQkeeahOa7muWKqOadoVxyXG4gIEBJbnB1dCgpIHRhYlN0cmlwVmlzaWJsZTogYm9vbGVhbjsgICAgICAgICAgLy8g5oyH5a6a5piv5ZCm5pi+56S6VGFi5qCH562+6aG1XHJcbiAgQElucHV0KCkgYWxsb3dVbmRvOiBib29sZWFuOyAgICAgICAgICAgICAgICAvLyDmjIflrprmmK/lkKblhYHorrjmkqTplIBcclxuICBASW5wdXQoKSBhbGxvd1NoZWV0UmVvcmRlcjogYm9vbGVhbjsgICAgICAgIC8vIOaMh+WumueUqOaIt+aYr+WQpuWPr+S7pemHjeaWsOaOkuW6j1NwcmVhZOe7hOS7tuS4reeahOW3peS9nOihqO+8jOWPr+mAiVxyXG4gIEBJbnB1dCgpIGFsbG93Q29weVBhc3RlRXhjZWxTdHlsZTogYm9vbGVhbjsgLy8g5oyH5a6a5piv5ZCm5YWB6K645ou36LSd44CB57KY6LS0RXhjZWzmoLflvI9cclxuICBASW5wdXQoKSBhbGxvd0V4dGVuZFBhc3RlUmFuZ2U6IGJvb2xlYW47ICAgIC8vIOaMh+WumuaYr+WQpuaJqeWxleeymOi0tOiMg+WbtFxyXG4gIEBJbnB1dCgpIGNvcHlQYXN0ZUhlYWRlck9wdGlvbnM6IGJvb2xlYW47ICAgLy8g5oyH5a6a5ou36LSd5piv5ZCm5YyF5ous6KGo5aS0XHJcbiAgQElucHV0KCkgc2hvd0RyYWdGaWxsU21hcnRUYWc6IGJvb2xlYW47ICAgICAvLyDmjIflrprmmK/lkKbmmL7npLrmi5bmi73loavlhYXlr7nor53moYZcclxuICBASW5wdXQoKSBzY3JvbGxiYXJTaG93TWF4OiBib29sZWFuOyAgICAgICAgIC8vIOaMh+WumuaYvuekuueahOa7muWKqOadoeaYr+WQpuWfuuS6juW3peS9nOihqOS4reeahOaVtOS4quWIl+aVsOWSjOihjOaVsFxyXG4gIEBJbnB1dCgpIHNjcm9sbGJhck1heEFsaWduOiBib29sZWFuOyAgICAgICAgLy8g5oyH5a6a5rua5Yqo5p2h5piv5ZCm5LiO5rS75Yqo5bel5L2c6KGo55qE5pyA5ZCO5LiA6KGM5ZKM5YiX5a+56b2QXHJcbiAgQElucHV0KCkgdGFiRWRpdGFibGU6IGJvb2xlYW47ICAgICAgICAgICAgICAvLyDmjIflrprmmK/lkKblj6/ku6XnvJbovpFzaGVldCB0YWJcclxuICBASW5wdXQoKSBuZXdUYWJWaXNpYmxlOiBib29sZWFuOyAgICAgICAgICAgIC8vIOaMh+WumuaYr+WQpuaYvuekuuaWsOWinnRhYuaMiemSrlxyXG4gIEBJbnB1dCgpIHRhYk5hdmlnYXRpb25WaXNpYmxlOiBib29sZWFuOyAgICAgLy8g5oyH5a6a5piv5ZCm5pi+56S65bel5L2c6KGo6YCJ6aG55Y2h5a+86IiqXHJcbiAgQElucHV0KCkgYmFja0NvbG9yOiBzdHJpbmc7ICAgICAgICAgICAgICAgICAvLyDog4zmma/oibLorr7nva5cclxuICBASW5wdXQoKSBiYWNrZ3JvdW5kSW1hZ2U6IHN0cmluZzsgICAgICAgICAgIC8vIOiDjOaZr+WbvueJh+iuvue9rlxyXG4gIEBJbnB1dCgpIGJhY2tncm91bmRJbWFnZUxheW91dDogbnVtYmVyOyAgICAgLy8g6IOM5pmv5Zu+54mH55qE5biD5bGA6K6+572uXHJcbiAgQElucHV0KCkgZ3JheUFyZWFCYWNrQ29sb3I6IHN0cmluZzsgICAgICAgICAvLyDngbDoibLljLrln5/nmoTog4zmma/oibLorr7nva5cclxuICBASW5wdXQoKSBzaG93UmVzaXplVGlwOiBudW1iZXI7ICAgICAgICAgICAgIC8vIOaMh+WumuWmguS9leaYvuekuuiwg+aVtOWkp+Wwj+aPkOekulxyXG4gIEBJbnB1dCgpIHNob3dEcmFnRHJvcFRpcDogYm9vbGVhbjsgICAgICAgICAgLy8g5oyH5a6a5piv5ZCm5pi+56S65ouW5ou95o+Q56S6XHJcbiAgQElucHV0KCkgc2hvd0RyYWdGaWxsVGlwOiBib29sZWFuOyAgICAgICAgICAvLyDmjIflrprmmK/lkKbmmL7npLrmi5bmi73loavlhYXmj5DnpLpcclxuICBASW5wdXQoKSBzaG93U2Nyb2xsVGlwOiBudW1iZXI7ICAgICAgICAgICAgIC8vIOaMh+WumuaYr+WQpuaYvuekuua7muWKqOadoeaPkOekulxyXG4gIEBJbnB1dCgpIGhpZ2hsaWdodEludmFsaWREYXRhOiBib29sZWFuOyAgICAgLy8g5oyH5a6a5piv5ZCm6auY5Lqu5pi+56S65peg5pWI5pWw5o2uXHJcbiAgQElucHV0KCkgdXNlVG91Y2hMYXlvdXQ6IGJvb2xlYW47ICAgICAgICAgICAvLyDmjIflrprmmK/lkKbkvb/nlKjop6bmkbjluIPlsYDmnaXmmL7npLpzcHJlYWRcclxuICBASW5wdXQoKSBoaWRlU2VsZWN0aW9uOiBib29sZWFuOyAgICAgICAgICAgIC8vIOaMh+WumuW9k3NwcmVhZOe7hOS7tuayoeacieeEpueCueaXtuaYr+WQpumAieaLqeeqgeWHuuaYvuekulxyXG4gIEBJbnB1dCgpIGFsbG93VXNlckVkaXRGb3JtdWxhOiBib29sZWFuOyAgICAgLy8g5oyH5a6a55So5oi35piv5ZCm5Y+v5Lul57yW6L6R5Y2V5YWD5qC85Lit55qE5YWs5byPXHJcbiAgQElucHV0KCkgZW5hYmxlRm9ybXVsYVRleHRib3g6IGJvb2xlYW47ICAgICAvLyDmjIflrprmmK/lkKblkK/nlKjlhazlvI/mlofmnKzmoYZcclxuICBASW5wdXQoKSBhdXRvRml0VHlwZTogbnVtYmVyOyAgICAgICAgICAgICAgIC8vIOaMh+WumuaYr+WQpuWwhuWGheWuueagvOW8j+WMluS4uumAguWQiOWNleWFg+agvOWSjOagh+mimOS4reeahOWGheWuuVxyXG4gIEBJbnB1dCgpIHJlZmVyZW5jZVN0eWxlOiBudW1iZXI7ICAgICAgICAgICAgLy8g5bel5L2c6KGo5LiK5Y2V5YWD5qC85YWs5byP5Lit5Y2V5YWD5qC85ZKM6IyD5Zu05byV55So55qE5qC35byPXHJcbiAgQElucHV0KCkgaG9zdFN0eWxlOiBhbnk7IC8vIHVzZWQgZm9yIGdldCBzdHlsZXMgZm9ybSBwYXJlbnQgaG9zdCBESVZcclxuICBASW5wdXQoKSBob3N0Q2xhc3M6IHN0cmluZztcclxuICBASW5wdXQoKSBuYW1lOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgcXVlcnlJZDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGNvbnRyb2xUeXBlOiBzdHJpbmc7IC8vIOafpeivouexu+Wei1xyXG4gIEBJbnB1dCgpIGxpY2Vuc2VLZXk6IHN0cmluZztcclxuICBASW5wdXQoKSBxb01hbmFnZXJDb2RlOiBhbnk7XHJcbiAgQElucHV0KCkgcXVlcnlSZWxhdGl2ZVVybDogYW55O1xyXG4gIEBJbnB1dCgpIHFvSWQ6IGFueTtcclxuICBASW5wdXQoKSB2b0lkOiBhbnk7XHJcbiAgQElucHV0KCkgZ3JvdXBUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgdGVtcGxhdGVUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgbXVsdGlTaGVldHM6IGFueVtdOyAgLy/lpJpzaGVldOmhteaUr+aMgVxyXG4gIGN1clNoZWV0OiBhbnk7XHJcbiAgc2hlZXRDaGFuZ2VkID0gbmV3IFN1YmplY3Q8YW55PigpOyAvL+WIh+aNonNoZWV055uR5ZCs5LqL5Lu2XHJcbiAgbXVsdGlTaGVldHNTY2hlbWFJZHM6IGFueSA9IHt9O1xyXG5cclxuICBzaGVldDogYW55O1xyXG4gIC8vIOagvOW8j+aWueahiOS/oeaBr1xyXG4gIHNjaGVtYVZhbHVlOiBhbnk7XHJcbiAgY29sTGlzdDogYW55OyAvLyDliJfkv6Hmga9cclxuICBASW5wdXQoKSBmb3JtRGF0YTogYW55OyAvLyDmnaXmupDmlbDmja5cclxuICBzZWFyY2hUZXh0ID0gJyc7XHJcbiAgZ3JvdXBJY29uID0gJzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1zZWFyY2hcIj48L3NwYW4+JztcclxuICBjb25kaXRpb25FeHByZXNzaW9uID0gbnVsbDtcclxuICBqb2ludHNlYXJjaEluZm9MaXN0OiBhbnk7XHJcbiAgbG9hZGluZzogYW55O1xyXG4gIHRhYklkOiBhbnk7XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkU2VydmljZS5zaG93KHsgY29udGFpbmVyOiAnYm9keScgfSk7XHJcbiAgICB0aGlzLnNldFNlcnZpY2VzKCk7XHJcbiAgICAvLyDkuqTlj4nooajnu5PmnpzpobXnm5HlkKzkuovku7ZcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlID09PSAnY3Jvc3N0YWInKSB7XHJcbiAgICAgIHRoaXMuZG9jQ2xpY2tTdWJzY3JpcHRpb24gPSB0aGlzLnJlbmRlcmVyLmxpc3RlbignZG9jdW1lbnQnLCAnY2xpY2snLCB0aGlzLm9uRG9jdW1lbnRDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIHRoaXMudGFiSWQgPSBSdGZTZXJ2aWNlcy5nZXRUYWJJZCh0aGlzLnF1ZXJ5SWQpO1xyXG4gICAgLy8g57yT5a2Y57uT5p6c6aG15a+56LGh77yM57uZ5bel5YW35qCP5L2/55SoXHJcbiAgICBRRFBDYWNoZVV0aWwuc2V0Q2FjaGUodGhpcy50YWJJZCArIHRoaXMucXVlcnlJZCArIHRoaXMuY29udHJvbFR5cGUgKyAncWRwdmlldycsIHRoaXMpO1xyXG4gICAgU2VydmljZXNVdGlscy5zZXRTZXJ2aWNlcyh0aGlzLnRhYklkICsgJ3FvSWQnLCB0aGlzLnFvSWQpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g6YCa6L+H6YWN572u5Lit5b+D77yM6I635Y+Wc3ByZWFkanPmjqfku7bluo/liJflj7dcclxuICAgICAgdGhpcy5sY3BTZXJ2aWNlLmZvcm1FcnJvclNlcnZpY2UgPSB0aGlzLmZvcm1FcnJvclNlcnZpY2U7XHJcbiAgICAgIHRoaXMubGNwU2VydmljZS5nZXRTcHJlYWRMaWNlbnNlKCkuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICBHQy5TcHJlYWQuU2hlZXRzLkxpY2Vuc2VLZXkgPSBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFmdGVyVmlldygpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldE11bHRpU2hlZXRzVmFyaWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRNdWx0aVNoZWV0c1ZhcmlibGUoKSB7XHJcbiAgICBpZiAodGhpcy5jb2x1bW5zU2V0dGluZ0NvbXBvbmVudCkge1xyXG4gICAgICB0aGlzLmNvbHVtbnNTZXR0aW5nQ29tcG9uZW50Lm11bHRpU2hlZXRzID0gdGhpcy5tdWx0aVNoZWV0cztcclxuICAgICAgdGhpcy5jb2x1bW5zU2V0dGluZ0NvbXBvbmVudC5jdXJTaGVldCA9IHRoaXMuY3VyU2hlZXQ7XHJcbiAgICAgIHRoaXMuY29sdW1uc1NldHRpbmdDb21wb25lbnQubXVsdGlTaGVldHNTY2hlbWFJZHMgPSB0aGlzLm11bHRpU2hlZXRzU2NoZW1hSWRzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWZ0ZXJWaWV3KCkge1xyXG4gICAgY29uc3QgZWxSZWYgPSB0aGlzLmVsUmVmO1xyXG4gICAgY29uc3QgZG9tID0gZWxSZWYubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJyNzaGVldCcpO1xyXG4gICAgaWYgKHRoaXMubGljZW5zZUtleSkge1xyXG4gICAgICBHQy5TcHJlYWQuU2hlZXRzLkxpY2Vuc2VLZXkgPSB0aGlzLmxpY2Vuc2VLZXk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNwcmVhZCA9IG5ldyBHQy5TcHJlYWQuU2hlZXRzLldvcmtib29rKGhvc3RFbGVtZW50LCB7IHNoZWV0Q291bnQ6IDAgfSk7XHJcbiAgICB0aGlzLnNldFNwcmVhZE9wdGlvbnMoKTtcclxuICAgIC8vIHRoaXMuYmluZEN1c3RvbUV2ZW50KHRoaXMuc3ByZWFkKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSB0aGlzLnRhYklkO1xyXG4gICAgRXZlbnRCdXMucmVnaXN0ZXIoJ3NjaGVtYVZhbHVlQ2hhbmdlZCcsIHRoaXMuaGFuZGxlU2NoZW1hVmFsdWVDaGFuZ2VkLmJpbmQodGhpcyksIGV2ZW50SWQgKyAncWRwVmlld0NvbXBvbmVudCcpO1xyXG4gICAgaWYgKHRoaXMudGVtcGxhdGVUeXBlICE9PSAncWRwQWR2YW5jZWRUZW1wbGF0ZScgJiYgdGhpcy5pc0luaXRRZHBWaWV3KSB7XHJcbiAgICAgIHRoaXMuaW5pdFFkcFZpZXcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVTY2hlbWFWYWx1ZUNoYW5nZWQoc2NoZW1hVmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5zY2hlbWFWYWx1ZSA9IHNjaGVtYVZhbHVlO1xyXG4gICAgaWYgKHRoaXMuY3VyU2hlZXQgJiYgdGhpcy5tdWx0aVNoZWV0cy5sZW5ndGggJiYgc2NoZW1hVmFsdWUgJiYgc2NoZW1hVmFsdWUuaWQpIHtcclxuICAgICAgdGhpcy5tdWx0aVNoZWV0c1NjaGVtYUlkc1t0aGlzLmN1clNoZWV0XSA9IHNjaGVtYVZhbHVlLmlkO1xyXG4gICAgICB0aGlzLnNldE11bHRpU2hlZXRzVmFyaWJsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXRRZHBWaWV3KCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoIXRoaXMubG9hZGluZykge1xyXG4gICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRTZXJ2aWNlLnNob3coeyBjb250YWluZXI6ICdib2R5JyB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuam9pbnRTZWFyY2hNYW5hZ2VyU2VydmljZS5nZXRqb2ludHNlYXJjaCgnZm9ybScgKyAnZmYzZWE0NzQtY2M2NS0yM2IwLWNkYjEtNzNjOTE0NmNlYTNiJywgdGhpcy5xdWVyeUlkLCAnJykuc3Vic2NyaWJlKChqb2ludHNlYXJjaExpc3Q6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmZpbHRlclNlcnZpY2UuZ2V0RmlsdGVyKHRoaXMucW9NYW5hZ2VyQ29kZSA/IHRoaXMucW9NYW5hZ2VyQ29kZSA6IHRoaXMucXVlcnlJZCwgdGhpcy5xdWVyeUlkLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIDEsIHRoaXMuZ3JvdXBUeXBlKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgc2VsZi5jb25kaXRpb25FeHByZXNzaW9uID0gbnVsbDtcclxuICAgICAgICBzZWxmLmpvaW50c2VhcmNoSW5mb0xpc3QgPSBqb2ludHNlYXJjaExpc3Q7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5maWx0ZXIpIHsgc2VsZi5jb25kaXRpb25FeHByZXNzaW9uID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5maWx0ZXIpOyB9XHJcbiAgICAgICAgY29uc3QgcmVuZGVyT3B0aW9uOiBSZW5kZXJPcHRpb24gPSBPYmplY3QuYXNzaWduKHsgbXVsdGlTaGVldHNTY2hlbWFJZHM6IHNlbGYubXVsdGlTaGVldHNTY2hlbWFJZHMsIGN1clNoZWV0OiBzZWxmLmN1clNoZWV0LCBtdWx0aVNoZWV0czogc2VsZi5tdWx0aVNoZWV0cyB9LCB7IHF1ZXJ5SWQ6IHNlbGYucXVlcnlJZCwgY29udHJvbFR5cGU6IHNlbGYuY29udHJvbFR5cGUsIHFvTWFuYWdlckNvZGU6IHNlbGYucW9NYW5hZ2VyQ29kZSwgcGFnZUluZGV4OiAwLCBxdWVyeVJlbGF0aXZlVXJsOiBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwsIGZpbHRlckNvbmRpdGlvbjogc2VsZi5jb25kaXRpb25FeHByZXNzaW9uLCBncm91cFR5cGU6IHNlbGYuZ3JvdXBUeXBlLCB2b0lkOiBzZWxmLnZvSWQsIGpvaW50c2VhcmNoSW5mb0xpc3Q6IHNlbGYuam9pbnRzZWFyY2hJbmZvTGlzdCwgbG9hZGluZzogdGhpcy5sb2FkaW5nIH0pO1xyXG4gICAgICAgIHRoaXMucWRwVmlld1JlbmRlcihyZW5kZXJPcHRpb24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBiaW5kQ3VzdG9tRXZlbnQoc3ByZWFkOiBhbnkpIHtcclxuICAgIC8vIGNvbnN0IGN1c3RvbUV2ZW50TmFtZVNwYWNlID0gJy5uZyc7XHJcbiAgICAvLyBjb25zdCBldmVudHMgPSBbXTtcclxuICAgIC8vIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xyXG4gICAgLy8gICBzcHJlYWQuYmluZChldmVudCArIGN1c3RvbUV2ZW50TmFtZVNwYWNlLCAoZXZlbnQ6IGFueSwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAvLyAgICAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQudHlwZTtcclxuICAgIC8vICAgICBjb25zdCBjYW1lbENhc2VFdmVudCA9IGV2ZW50VHlwZVswXS50b0xvd2VyQ2FzZSgpICsgZXZlbnRUeXBlLnN1YnN0cigxKTtcclxuICAgIC8vICAgICB0aGlzW2NhbWVsQ2FzZUV2ZW50XS5lbWl0KGRhdGEpO1xyXG4gICAgLy8gICB9KTtcclxuICAgIC8vIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3ByZWFkT3B0aW9ucygpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgY29uc3Qgc3ByZWFkID0gdGhpcy5zcHJlYWQ7XHJcbiAgICBpZiAoIXRoaXMuc3ByZWFkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHNwcmVhZC5zdXNwZW5kRXZlbnQoKTtcclxuICAgIHNwcmVhZC5zdXNwZW5kUGFpbnQoKTtcclxuICAgIHRoaXMuc3ByZWFkLmZyb21KU09OKG51bGwpO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuc3ByZWFkT3B0aW9ucztcclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XHJcbiAgICAgICAgaWYgKG9wdGlvbi5uYW1lID09PSAnbmFtZScpIHtcclxuICAgICAgICAgIHNwcmVhZC5uYW1lID0gb3B0aW9uLnZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzcHJlYWQub3B0aW9uc1tvcHRpb24ubmFtZV0gPSBvcHRpb24udmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHNwcmVhZC51bmJpbmQoR0MuU3ByZWFkLlNoZWV0cy5FdmVudHMuQWN0aXZlU2hlZXRDaGFuZ2VkKTtcclxuICAgIHNwcmVhZC5iaW5kKEdDLlNwcmVhZC5TaGVldHMuRXZlbnRzLkFjdGl2ZVNoZWV0Q2hhbmdlZCwgZnVuY3Rpb24gKGUsIGFyZ3MpIHtcclxuICAgICAgc2VsZi5jdXJTaGVldCA9IGFyZ3MubmV3U2hlZXQubmFtZSgpO1xyXG4gICAgICBzZWxmLnNldEdyb3VwKHNlbGYuY3VyU2hlZXQpO1xyXG4gICAgICBzZWxmLnNldE11bHRpU2hlZXRzVmFyaWJsZSgpO1xyXG4gICAgICBzZWxmLmluaXRRZHBWaWV3KCk7XHJcbiAgICB9KTtcclxuICAgIHNwcmVhZC5yZXN1bWVQYWludCgpO1xyXG4gICAgc3ByZWFkLnJlc3VtZUV2ZW50KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlrnms5Xlt7Llup/lvIPvvIzlu7rorq7mm7/mjaLkuLppbml0UURQVmlld+aWueazlVxyXG4gICAqIOWIneWni+WMluafpeivoue7k+aenOmhteaOp+S7tlxyXG4gICAqL1xyXG4gIGluaXRTcHJlYWQocXVlcnlJZDogc3RyaW5nLCBzY2hlbWFJZDogc3RyaW5nLCBjb250cm9sVHlwZT86IGFueSwgcW9NYW5hZ2VyQ29kZT86IGFueSwgcGFnZUluZGV4PzogYW55LCBxdWVyeVJlbGF0aXZlVXJsPzogYW55LCBmaWx0ZXJDb25kaXRpb24/OiBhbnksIGdyb3VwVHlwZT86IGFueSwgdm9JZD86IGFueSwgZnJvbUNhY2hlPzogYW55LCBpc1NjaGVtYVNlbGVjdENoYW5nZWQ/OiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmN1clNoZWV0ICYmIHRoaXMubXVsdGlTaGVldHMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMubXVsdGlTaGVldHNTY2hlbWFJZHNbdGhpcy5jdXJTaGVldF0gPSBzY2hlbWFJZDtcclxuICAgICAgdGhpcy5zZXRNdWx0aVNoZWV0c1ZhcmlibGUoKTtcclxuICAgIH1cclxuICAgIHRoaXMucWRwVmlld1JlbmRlcihPYmplY3QuYXNzaWduKHsgbXVsdGlTaGVldHNTY2hlbWFJZHM6IHRoaXMubXVsdGlTaGVldHNTY2hlbWFJZHMsIGN1clNoZWV0OiB0aGlzLmN1clNoZWV0LCBtdWx0aVNoZWV0czogdGhpcy5tdWx0aVNoZWV0cyB9LCB7IHNjaGVtYUlkLCBxdWVyeUlkLCBzcHJlYWQ6IHRoaXMuc3ByZWFkLCBjb250cm9sVHlwZSwgcW9NYW5hZ2VyQ29kZSwgcGFnZUluZGV4LCBxdWVyeVJlbGF0aXZlVXJsLCBmaWx0ZXJDb25kaXRpb24sIGZvcm1EYXRhOiB0aGlzLmZvcm1EYXRhLCBncm91cFR5cGU6IGdyb3VwVHlwZSwgdm9JZDogdm9JZCwgcWRwVmlldzogdGhpcywgZnJvbUNhY2hlLCBpc1NjaGVtYVNlbGVjdENoYW5nZWQsIGpvaW50c2VhcmNoSW5mb0xpc3Q6IHRoaXMuam9pbnRzZWFyY2hJbmZvTGlzdCB9KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbmn6Xor6Lnu5Pmnpzmjqfku7ZcclxuICAgKi9cclxuICBxZHBWaWV3UmVuZGVyKG9wdGlvbjogUmVuZGVyT3B0aW9uKSB7XHJcbiAgICBpZiAoIW9wdGlvbi5sb2FkaW5nKSB7XHJcbiAgICAgIG9wdGlvbi5sb2FkaW5nID0gdGhpcy5sb2FkU2VydmljZS5zaG93KHsgY29udGFpbmVyOiAnYm9keScgfSk7XHJcbiAgICB9XHJcbiAgICBvcHRpb24udm9JZCA9ICFvcHRpb24udm9JZCA/IHRoaXMudm9JZCA6IG9wdGlvbi52b0lkO1xyXG4gICAgb3B0aW9uLmdyb3VwVHlwZSA9ICFvcHRpb24uZ3JvdXBUeXBlID8gdGhpcy5ncm91cFR5cGUgOiBvcHRpb24uZ3JvdXBUeXBlO1xyXG4gICAgb3B0aW9uLmZyb21DYWNoZSA9IG9wdGlvbi5mcm9tQ2FjaGUgPyBvcHRpb24uZnJvbUNhY2hlIDogZmFsc2U7XHJcbiAgICBpZiAob3B0aW9uLmZpbHRlckNvbmRpdGlvbikge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbkV4cHJlc3Npb24gPSBvcHRpb24uZmlsdGVyQ29uZGl0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVuZGVyT3B0aW9uOiBSZW5kZXJPcHRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb24sIHsgZm9ybURhdGE6IHRoaXMuZm9ybURhdGEsIHNwcmVhZDogdGhpcy5zcHJlYWQsIHFkcFZpZXc6IHRoaXMgfSk7XHJcbiAgICB0aGlzLnJlbmRlclNlcnZpY2UucmVuZGVyKHJlbmRlck9wdGlvbik7XHJcbiAgICBFdmVudEJ1cy5yZWdpc3Rlcih0aGlzLnF1ZXJ5SWQgKyAnc3ByZWFkX2luaXQnLCB0aGlzLnJlZ2lzdGVTcHJlYWRDb2x1bW5XaWR0aENoYW5nZWRFdmVudC5iaW5kKHRoaXMpLCB0aGlzLnF1ZXJ5SWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pa55rOV5bey5bqf5byD77yM5bu66K6u5pu/5o2i5Li6ZXhwb3J05pa55rOVXHJcbiAgICog5a+85Ye6RXhjZWxcclxuICAgKi9cclxuICBleHBvcnRFeGNlbChxdWVyeUlkOiBzdHJpbmcsIGlkOiBzdHJpbmcsIHR5cGU/OiBhbnksIHBhZ2VJbmRleD86IGFueSwgcW9NYW5hZ2VyQ29kZT86IGFueSwgcXVlcnlSZWxhdGl2ZVVybD86IGFueSwgZmlsdGVyQ29uZGl0aW9uPzogYW55LCBncm91cFR5cGU/OiBhbnksIHZvSWQ/OiBhbnksIHRvdGFsQ291bnQ/OiBhbnksIGV4cG9ydFR5cGU/OiBhbnkpIHtcclxuICAgIHRoaXMuZXhwb3J0KE9iamVjdC5hc3NpZ24oeyBtdWx0aVNoZWV0c1NjaGVtYUlkczogdGhpcy5tdWx0aVNoZWV0c1NjaGVtYUlkcywgY3VyU2hlZXQ6IHRoaXMuY3VyU2hlZXQsIG11bHRpU2hlZXRzOiB0aGlzLm11bHRpU2hlZXRzIH0sIHsgcXVlcnlJZCwgc2NoZW1hSWQ6IGlkLCBjb250cm9sVHlwZTogdHlwZSwgcGFnZUluZGV4LCBxb01hbmFnZXJDb2RlLCBxdWVyeVJlbGF0aXZlVXJsLCBmaWx0ZXJDb25kaXRpb24sIGdyb3VwVHlwZSwgdm9JZCwgdG90YWxDb3VudCwgZXhwb3J0VHlwZSB9KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlr7zlh7pFeGNlbFxyXG4gICAqIEBwYXJhbSBvcGl0b24g5riy5p+T6YWN572u6aG5XHJcbiAgICovXHJcbiAgZXhwb3J0KG9wdGlvbjogUmVuZGVyT3B0aW9uKSB7XHJcbiAgICBpZiAodGhpcy5jb250cm9sVHlwZSA9PT0gJ2Nyb3NzdGFiJykge1xyXG4gICAgICBvcHRpb24udG90YWxDb3VudCA9IHRoaXMuc3ByZWFkLmdldEFjdGl2ZVNoZWV0KCkuZ2V0Um93Q291bnQoKTtcclxuICAgIH1cclxuICAgIG9wdGlvbi52b0lkID0gdGhpcy52b0lkID8gdGhpcy52b0lkIDogb3B0aW9uLnZvSWQ7XHJcbiAgICBvcHRpb24ucXVlcnlJZCA9IHRoaXMucXVlcnlJZCA/IHRoaXMucXVlcnlJZCA6IG9wdGlvbi5xdWVyeUlkO1xyXG4gICAgb3B0aW9uLmdyb3VwVHlwZSA9IHRoaXMuZ3JvdXBUeXBlID8gdGhpcy5ncm91cFR5cGUgOiBvcHRpb24uZ3JvdXBUeXBlO1xyXG4gICAgb3B0aW9uLnFvTWFuYWdlckNvZGUgPSB0aGlzLnFvTWFuYWdlckNvZGUgPyB0aGlzLnFvTWFuYWdlckNvZGUgOiBvcHRpb24ucW9NYW5hZ2VyQ29kZTtcclxuICAgIHRoaXMucmVuZGVyU2VydmljZS5leHBvcnREYXRhKG9wdGlvbik7XHJcbiAgICAvLyB0aGlzLnJlbmRlclNlcnZpY2UuZXhwb3J0RGF0YShvcHRpb24ucXVlcnlJZCwgb3B0aW9uLnNjaGVtYUlkLCBvcHRpb24uY29udHJvbFR5cGUsIG9wdGlvbi5wYWdlSW5kZXgsIG9wdGlvbi5xb01hbmFnZXJDb2RlLCBvcHRpb24ucXVlcnlSZWxhdGl2ZVVybCwgb3B0aW9uLmZpbHRlckNvbmRpdGlvbiwgb3B0aW9uLmdyb3VwVHlwZSwgb3B0aW9uLnZvSWQsIG9wdGlvbi50b3RhbENvdW50IHx8IDEsIG9wdGlvbi5leHBvcnRUeXBlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaWueazleW3suW6n+W8g++8jOW7uuiuruabv+aNouS4unByaW505pa55rOVXHJcbiAgICog5omT5Y2wUERGXHJcbiAgICovXHJcbiAgcGRmRXhwb3J0RXZlbnQocXVlcnlJZDogc3RyaW5nLCBpZDogc3RyaW5nLCB0eXBlPzogYW55LCBxb01hbmFnZXJDb2RlPzogYW55LCBwcmludEludGVncmF0aW9uPzogYW55LCBxdWVyeVJlbGF0aXZlVXJsPzogYW55LCBmaWx0ZXJDb25kaXRpb24/OiBhbnksIHBhZ2VJbmRleD86IGFueSwgZ3JvdXBUeXBlPzogYW55LCB2b0lkPzogYW55KSB7XHJcbiAgICB0aGlzLnByaW50KE9iamVjdC5hc3NpZ24oeyBtdWx0aVNoZWV0c1NjaGVtYUlkczogdGhpcy5tdWx0aVNoZWV0c1NjaGVtYUlkcywgY3VyU2hlZXQ6IHRoaXMuY3VyU2hlZXQsIG11bHRpU2hlZXRzOiB0aGlzLm11bHRpU2hlZXRzIH0sIHsgcXVlcnlJZCwgc2NoZW1hSWQ6IGlkLCBjb250cm9sVHlwZTogdHlwZSwgcGFnZUluZGV4LCBxb01hbmFnZXJDb2RlLCBxdWVyeVJlbGF0aXZlVXJsLCBwcmludEludGVncmF0aW9uLCBmaWx0ZXJDb25kaXRpb24sIGdyb3VwVHlwZSwgdm9JZCB9KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiZPljbBcclxuICAgKiBAcGFyYW0gb3B0aW9uIOa4suafk+mFjee9rumhuVxyXG4gICAqL1xyXG4gIHByaW50KG9wdGlvbjogUmVuZGVyT3B0aW9uKSB7XHJcbiAgICBvcHRpb24udm9JZCA9IHRoaXMudm9JZCA/IHRoaXMudm9JZCA6IG9wdGlvbi52b0lkO1xyXG4gICAgb3B0aW9uLnF1ZXJ5SWQgPSB0aGlzLnF1ZXJ5SWQgPyB0aGlzLnF1ZXJ5SWQgOiBvcHRpb24ucXVlcnlJZDtcclxuICAgIG9wdGlvbi5ncm91cFR5cGUgPSB0aGlzLmdyb3VwVHlwZSA/IHRoaXMuZ3JvdXBUeXBlIDogb3B0aW9uLmdyb3VwVHlwZTtcclxuICAgIG9wdGlvbi5xb01hbmFnZXJDb2RlID0gdGhpcy5xb01hbmFnZXJDb2RlID8gdGhpcy5xb01hbmFnZXJDb2RlIDogb3B0aW9uLnFvTWFuYWdlckNvZGU7XHJcbiAgICB0aGlzLnJlbmRlclNlcnZpY2UucGRmRXhwb3J0RXZlbnQob3B0aW9uKTtcclxuICAgIC8vIHRoaXMucmVuZGVyU2VydmljZS5wZGZFeHBvcnRFdmVudChvcHRpb24ucXVlcnlJZCwgb3B0aW9uLnNjaGVtYUlkLCBvcHRpb24uY29udHJvbFR5cGUsIG9wdGlvbi5xb01hbmFnZXJDb2RlLCBvcHRpb24ucHJpbnRJbnRlZ3JhdGlvbiwgb3B0aW9uLnF1ZXJ5UmVsYXRpdmVVcmwsIG9wdGlvbi5maWx0ZXJDb25kaXRpb24sIG9wdGlvbi5ncm91cFR5cGUsIG9wdGlvbi5wYWdlSW5kZXgsIG9wdGlvbi52b0lkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaWueazleW3suW6n+W8g++8jOW7uuiuruabv+aNouS4unByaW50UHJldmlldyhvcHRpb246IFJlbmRlck9wdGlvbinmlrnms5VcclxuICAgKiDmiZPljbDpooTop4hcclxuICAgKi9cclxuICBwcmludFByZVZpZXcocXVlcnlJZDogc3RyaW5nLCBpZDogc3RyaW5nLCB0eXBlPzogYW55LCBxb01hbmFnZXJDb2RlPzogYW55LCBwcmludEludGVncmF0aW9uPzogYW55LCBxdWVyeVJlbGF0aXZlVXJsPzogYW55LCBmaWx0ZXJDb25kaXRpb24/OiBhbnksIHBhZ2VJbmRleD86IGFueSwgZ3JvdXBUeXBlPzogYW55LCB2b0lkPzogYW55KSB7XHJcbiAgICBjb25zdCBfdm9JZCA9IHRoaXMudm9JZCA/IHRoaXMudm9JZCA6IHZvSWQ7XHJcbiAgICBjb25zdCBfcXVlcnlJZCA9IHRoaXMucXVlcnlJZCA/IHRoaXMucXVlcnlJZCA6IHF1ZXJ5SWQ7XHJcbiAgICBjb25zdCBfZ3JvdXBUeXBlID0gdGhpcy5ncm91cFR5cGUgPyB0aGlzLmdyb3VwVHlwZSA6IGdyb3VwVHlwZTtcclxuICAgIGNvbnN0IF9xb01hbmFnZXJDb2RlID0gdGhpcy5xb01hbmFnZXJDb2RlID8gdGhpcy5xb01hbmFnZXJDb2RlIDogcW9NYW5hZ2VyQ29kZTtcclxuICAgIHRoaXMucmVuZGVyU2VydmljZS5wcmludFByZVZpZXcoT2JqZWN0LmFzc2lnbih7IG11bHRpU2hlZXRzU2NoZW1hSWRzOiB0aGlzLm11bHRpU2hlZXRzU2NoZW1hSWRzLCBjdXJTaGVldDogdGhpcy5jdXJTaGVldCwgbXVsdGlTaGVldHM6IHRoaXMubXVsdGlTaGVldHMgfSwgeyBxdWVyeUlkOiBfcXVlcnlJZCwgc2NoZW1hSWQ6IGlkLCBjb250cm9sVHlwZTogdHlwZSwgcW9NYW5hZ2VyQ29kZTogX3FvTWFuYWdlckNvZGUsIHByaW50SW50ZWdyYXRpb24sIHF1ZXJ5UmVsYXRpdmVVcmwsIGZpbHRlckNvbmRpdGlvbiwgZ3JvdXBUeXBlOiBfZ3JvdXBUeXBlLCBwYWdlSW5kZXgsIHZvSWQ6IF92b0lkfSkpO1xyXG4gICAgLy8gdGhpcy5yZW5kZXJTZXJ2aWNlLnByaW50UHJlVmlldyhxdWVyeUlkLCBpZCwgdHlwZSwgcW9NYW5hZ2VyQ29kZSwgcHJpbnRJbnRlZ3JhdGlvbiwgcXVlcnlSZWxhdGl2ZVVybCwgZmlsdGVyQ29uZGl0aW9uLCBncm91cFR5cGUgPyBncm91cFR5cGUgOiB0aGlzLmdyb3VwVHlwZSwgcGFnZUluZGV4LCB2b0lkID8gdm9JZCA6IHRoaXMudm9JZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiZPljbDpooTop4hcclxuICAgKiBAcGFyYW0gb3B0aW9uIOa4suafk+mFjee9rumhuVxyXG4gICAqL1xyXG4gIHByaW50UHJldmlldyhvcHRpb246IFJlbmRlck9wdGlvbikge1xyXG4gICAgb3B0aW9uLmdyb3VwVHlwZSA9IHRoaXMuZ3JvdXBUeXBlID8gdGhpcy5ncm91cFR5cGUgOiBvcHRpb24uZ3JvdXBUeXBlO1xyXG4gICAgb3B0aW9uLnZvSWQgPSB0aGlzLnZvSWQgPyB0aGlzLnZvSWQgOiBvcHRpb24udm9JZDtcclxuICAgIHRoaXMucmVuZGVyU2VydmljZS5wcmludFByZVZpZXcob3B0aW9uKTtcclxuICAgIC8vIHRoaXMucmVuZGVyU2VydmljZS5wcmludFByZVZpZXcob3B0aW9uLnF1ZXJ5SWQsIG9wdGlvbi5zY2hlbWFJZCwgb3B0aW9uLmNvbnRyb2xUeXBlLCBvcHRpb24ucW9NYW5hZ2VyQ29kZSwgb3B0aW9uLnByaW50SW50ZWdyYXRpb24sIG9wdGlvbi5xdWVyeVJlbGF0aXZlVXJsLCBvcHRpb24uZmlsdGVyQ29uZGl0aW9uLCBvcHRpb24uZ3JvdXBUeXBlLCBvcHRpb24ucGFnZUluZGV4LCBvcHRpb24udm9JZCk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGNoYW5nZU5hbWUgaW4gY2hhbmdlcykge1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IGNoYW5nZXNbY2hhbmdlTmFtZV0uY3VycmVudFZhbHVlO1xyXG4gICAgICBpZiAobmV3VmFsdWUgIT09IG51bGwgJiYgbmV3VmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIHRoaXMudGFiSWQgPSBSdGZTZXJ2aWNlcy5nZXRUYWJJZCh0aGlzLnF1ZXJ5SWQpO1xyXG4gICAgICAgIHN3aXRjaCAoY2hhbmdlTmFtZSkge1xyXG4gICAgICAgICAgY2FzZSAnaG9zdFN0eWxlJzpcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zcHJlYWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLnNwcmVhZC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdob3N0Q2xhc3MnOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ25hbWUnOlxyXG4gICAgICAgICAgICB0aGlzLnNwcmVhZC5uYW1lID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnZm9ybURhdGEnOlxyXG4gICAgICAgICAgICBuZXdWYWx1ZS5keW5hbWljQ29scy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgICAgY29sLm5hbWUgPSBjb2wudGl0bGU7XHJcbiAgICAgICAgICAgICAgY29sLmJpbmRGaWVsZCA9IGNvbC5maWVsZDtcclxuICAgICAgICAgICAgICBjb2wuY29sV2lkdGggPSAxNTA7XHJcbiAgICAgICAgICAgICAgY29sLmFsaWduID0gMDtcclxuICAgICAgICAgICAgICBjb2wudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgY29sLmlzRml4ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBjb2wuZm9ybWF0VHlwZSA9IDA7XHJcbiAgICAgICAgICAgICAgY29sLmZvcm1hdHRvciA9ICcnO1xyXG4gICAgICAgICAgICAgIGNvbC5zb3J0ID0gMDtcclxuICAgICAgICAgICAgICBjb2wucGFnZUFnZ3JlVGV4dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgY29sLnBhZ2VBZ2dyZSA9IDA7XHJcbiAgICAgICAgICAgICAgY29sLmlzR3JvdXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBjb2wuZ3JvdXBBZ2dyZVRleHQgPSAnJztcclxuICAgICAgICAgICAgICBjb2wuZ3JvdXBBZ2dyZSA9IDA7XHJcbiAgICAgICAgICAgICAgY29sLnRvdGFsQWdncmVUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgY29sLnRvdGFsQWdncmUgPSAwO1xyXG4gICAgICAgICAgICAgIGNvbC5sZXZlbCA9IDE7XHJcbiAgICAgICAgICAgICAgY29sLmNoaWxkTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgIGNvbC5kaW1lbnNpb24gPSAwO1xyXG4gICAgICAgICAgICAgIGNvbC5yb3dDb2xvciA9IG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMubmdPbkRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5hZnRlclZpZXcoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdncm91cFR5cGUnOlxyXG4gICAgICAgICAgICB0aGlzLmdyb3VwVHlwZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3F1ZXJ5SWQnOlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5SWQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgUURQQ2FjaGVVdGlsLnNldENhY2hlKHRoaXMudGFiSWQgKyB0aGlzLnF1ZXJ5SWQgKyB0aGlzLmNvbnRyb2xUeXBlICsgJ3FkcHZpZXcnLCB0aGlzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdjb250cm9sVHlwZSc6XHJcbiAgICAgICAgICAgIHRoaXMuY29udHJvbFR5cGUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdxb0lkJzpcclxuICAgICAgICAgICAgdGhpcy5xb0lkID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIFNlcnZpY2VzVXRpbHMuc2V0U2VydmljZXModGhpcy50YWJJZCArICdxb0lkJywgdGhpcy5xb0lkKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdxb01hbmFnZXJDb2RlJzpcclxuICAgICAgICAgIGNhc2UgJ3ZvSWQnOlxyXG4gICAgICAgICAgY2FzZSAncXVlcnlSZWxhdGl2ZVVybCc6XHJcbiAgICAgICAgICBjYXNlICd0ZW1wbGF0ZVR5cGUnOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ211bHRpU2hlZXRzJzpcclxuICAgICAgICAgICAgdGhpcy5tdWx0aVNoZWV0cyA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnNldEdyb3VwKHRoaXMubXVsdGlTaGVldHNbMF0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2xpY2Vuc2VLZXknOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICBHQy5TcHJlYWQuU2hlZXRzLkxpY2Vuc2VLZXkgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2lzQ29tbW9uUWRwVmlld0NvbXBvbmVudCc6XHJcbiAgICAgICAgICAgIHRoaXMuaXNDb21tb25RZHBWaWV3Q29tcG9uZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tbW9uUWRwVmlld0NvbXBvbmVudCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7IG5hbWU6IGNoYW5nZU5hbWUsIHZhbHVlOiBuZXdWYWx1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc3ByZWFkT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLnNldFNwcmVhZE9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuc3ByZWFkKSB7XHJcbiAgICAgIHRoaXMuc3ByZWFkLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUmVzaXplZChldmVudDogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLnN0eWxlLmhlaWdodCA9IGV2ZW50Lm5ld0hlaWdodCArICdweCc7XHJcbiAgICB0aGlzLnN0eWxlLndpZHRoID0gZXZlbnQubmV3V2lkdGggKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlKCkge1xyXG4gICAgbGV0IGlzQ29tcGFyZSA9IGZhbHNlO1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlID09PSAnY3Jvc3N0YWInKSB7XHJcbiAgICAgICAgdGhpcy5kaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50LmlzQ29tcGFyZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGltZW5zaW9uU2V0dGluZ0NvbXBvbmVudC5zZWxlY3RlZERpbWVzaW9uKCk7XHJcbiAgICAgICAgaXNDb21wYXJlID0gdGhpcy5kaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50LmlzQ29tcGFyZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbHVtbnNTZXR0aW5nQ29tcG9uZW50LmlzQ29tcGFyZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29sdW1uc1NldHRpbmdDb21wb25lbnQuc2VsZWN0ZWREaW1lc2lvbigpO1xyXG4gICAgICAgIGlzQ29tcGFyZSA9IHRoaXMuY29sdW1uc1NldHRpbmdDb21wb25lbnQuaXNDb21wYXJlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNjaGVtYVZhbHVlICYmIHRoaXMuc2NoZW1hVmFsdWUuaXNQcmVmYWIgIT09IDEgJiYgIWlzQ29tcGFyZSkge1xyXG4gICAgICAgIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUgPSB0aGlzLmNvbnRyb2xUeXBlID09PSAnY3Jvc3N0YWInID8gSlNPTi5zdHJpbmdpZnkodGhpcy5kaW1lbnNpb25TZXR0aW5nQ29tcG9uZW50LnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlKSA6IEpTT04uc3RyaW5naWZ5KHRoaXMuY29sdW1uc1NldHRpbmdDb21wb25lbnQuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2NoZW1hTWFuYWdlci5zYXZlU2NoZW1hKHsgJ3NjaGVtYSc6IEpTT04uc3RyaW5naWZ5KHRoaXMuc2NoZW1hVmFsdWUpLCBncm91cFR5cGU6IHRoaXMuZ3JvdXBUeXBlIH0sICcnKS5zdWJzY3JpYmUoKCkgPT4geyB9LCAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZSA9IEpTT04ucGFyc2UodGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xyXG4gIH1cclxuXHJcbiAgc2V0R3JvdXAoc2hlZXROYW1lOiBhbnkpIHtcclxuICAgIHRoaXMuY3VyU2hlZXQgPSBzaGVldE5hbWU7XHJcbiAgICBpZiAodGhpcy5ncm91cFR5cGUpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm11bHRpU2hlZXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5ncm91cFR5cGUgPSB0aGlzLmdyb3VwVHlwZS5yZXBsYWNlKHRoaXMubXVsdGlTaGVldHNbaV0sIFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ3JvdXBUeXBlICs9IHNoZWV0TmFtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ3JvdXBUeXBlID0gc2hlZXROYW1lO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zaGVldENoYW5nZWQubmV4dCh0aGlzLmdyb3VwVHlwZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uRG9jdW1lbnRDbGljayhlOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSAnQ0FOVkFTJykge1xyXG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGhhbmRsZUNyb3NzdGFiUGFnZUNoYW5nZShwYWdlSW5kZXg6IGFueSwgcGFnZVNpemU6IGFueSkge1xyXG4gICAgdGhpcy5zaGVldCA9IHRoaXMuc3ByZWFkLmdldEFjdGl2ZVNoZWV0KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hlZXQuZ2V0Um93Q291bnQoKTsgaSsrKSB7XHJcbiAgICAgIGlmIChpID49IChwYWdlSW5kZXggLSAxKSAqIHBhZ2VTaXplICYmIGkgPCBwYWdlSW5kZXggKiBwYWdlU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuc2hlZXQuc2V0Um93VmlzaWJsZShpLCB0cnVlLCBHQy5TcHJlYWQuU2hlZXRzLlNoZWV0QXJlYS52aWV3cG9ydCk7XHJcbiAgICAgICAgdGhpcy5zaGVldC5zaG93Um93KGksIEdDLlNwcmVhZC5TaGVldHMuVmVydGljYWxQb3NpdGlvbi5ib3R0b20pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2hlZXQuc2V0Um93VmlzaWJsZShpLCBmYWxzZSwgR0MuU3ByZWFkLlNoZWV0cy5TaGVldEFyZWEudmlld3BvcnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDb250ZXh0TWVudSgkZXZlbnQpIHtcclxuICAgIGlmICgnbGlzdCcgPT09IHRoaXMuY29udHJvbFR5cGUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICBsZXQgeCA9IDAsIHkgPSAwO1xyXG4gICAgICBsZXQgcWRwdmlld05hdGl2ZSA9IHRoaXMuc2hlZXRFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICB3aGlsZSAocWRwdmlld05hdGl2ZSkge1xyXG4gICAgICAgIHggKz0gcWRwdmlld05hdGl2ZS5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIHkgKz0gcWRwdmlld05hdGl2ZS5vZmZzZXRUb3A7XHJcbiAgICAgICAgcWRwdmlld05hdGl2ZSA9IHFkcHZpZXdOYXRpdmUub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhY3RpdmVTaGVldCA9IHRoaXMuc3ByZWFkLmdldEFjdGl2ZVNoZWV0KCk7XHJcbiAgICAgIGNvbnN0IGNvbEhlYWRlciA9IEdDLlNwcmVhZC5TaGVldHMuU2hlZXRBcmVhLmNvbEhlYWRlcjtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gYWN0aXZlU2hlZXQuaGl0VGVzdCgkZXZlbnQuY2xpZW50WCAtIHgsICRldmVudC5jbGllbnRZIC0geSk7XHJcbiAgICAgIGlmICh0YXJnZXQuaGl0VGVzdFR5cGUgIT09IGNvbEhlYWRlciB8fCB0YXJnZXQuY29sID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0LnJvdyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBoZWFkZXJSb3dDb3VudCA9IGFjdGl2ZVNoZWV0LmdldFJvd0NvdW50KGNvbEhlYWRlcik7XHJcbiAgICAgIGNvbnN0IHNwYW4gPSBhY3RpdmVTaGVldC5nZXRTcGFuKHRhcmdldC5yb3csIHRhcmdldC5jb2wsIGNvbEhlYWRlcik7XHJcbiAgICAgIC8vIOWIpOaWreWkmue6p+ihqOWktOeahOaDheWGteS4i++8jOWPquWkhOeQhuacgOWtkOmbhuihqOWktFxyXG4gICAgICBpZiAoc3BhbiAmJiAodGFyZ2V0LnJvdyArIHNwYW4ucm93Q291bnQpIDwgaGVhZGVyUm93Q291bnQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jdXJyZW50Q29sSW5kZXggPSB0YXJnZXQuY29sO1xyXG4gICAgICB0aGlzLmluaXRDb2xHcm91cEFnZ3JlKHRoaXMuY3VycmVudENvbEluZGV4KTtcclxuXHJcbiAgICAgIHRoaXMuaGVhZGVyTWVudURpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB0aGlzLmhlYWRlck1lbnVUb3AgPSAkZXZlbnQuY2xpZW50WTtcclxuICAgICAgdGhpcy5oZWFkZXJNZW51TGVmdCA9ICRldmVudC5jbGllbnRYO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSXNHcm91cENsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMuY29sSXNHcm91cCkge1xyXG4gICAgICB0aGlzLmdyb3VwU2VsZWN0VmFsdWUgPSB0aGlzLmFnZ3JlRGF0YVswXS52YWx1ZTtcclxuICAgICAgdGhpcy5ncm91cFRleHQgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVNhdmVDbGljaygpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuc2NoZW1hVmFsdWUgJiYgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZSAmJiB0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbiAmJiB0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NoZW1hVmFsdWUgJiYgdGhpcy5zY2hlbWFWYWx1ZS5pc1ByZWZhYiA9PT0gMSkge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ3NwcmVhZC5tZXNzYWdlLnZhbGlkYXRlLnNvcnQnKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbExpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpKTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IGluZGV4OiB0aGlzLmN1cnJlbnRDb2xJbmRleCwgY29sSW5kZXg6IDAsIHR5cGU6ICdlZGl0JyB9O1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLnJlY3Vyc2l2ZUNvbHVtblNvcnQoY29sTGlzdFtpXSwgbnVsbCwgcGFyYW1zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgPSBjb2xMaXN0O1xyXG4gICAgICAgIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlKTtcclxuICAgICAgICB0aGlzLnNjaGVtYU1hbmFnZXIuc2F2ZVNjaGVtYSh7IHNjaGVtYTogSlNPTi5zdHJpbmdpZnkodGhpcy5zY2hlbWFWYWx1ZSksIGdyb3VwVHlwZTogdGhpcy5ncm91cFR5cGUgfSwgJycpLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgIHNlbGYuaW5pdFFkcFZpZXcoKTtcclxuICAgICAgICAgIHNlbGYuY3VycmVudENvbEluZGV4ID0gMDtcclxuICAgICAgICAgIHNlbGYuaGVhZGVyTWVudURpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSwgKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICAgIHRoaXMuZm9ybUVycm9yU2VydmljZS5leGNlcHRpb24oZXJyb3IuTWVzc2FnZSwgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7IHNlbGYuY3VycmVudENvbEluZGV4ID0gMDsgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xlYXJTb3J0KCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5zY2hlbWFWYWx1ZSAmJiB0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlICYmIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uICYmIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgJiYgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICBpZiAodGhpcy5zY2hlbWFWYWx1ZSAmJiB0aGlzLnNjaGVtYVZhbHVlLmlzUHJlZmFiID09PSAxKSB7XHJcbiAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnc3ByZWFkLm1lc3NhZ2UudmFsaWRhdGUuc29ydCcpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29sTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCkpO1xyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLnJlY3Vyc2l2ZUNsZWFyQ29sdW1uU29ydChjb2xMaXN0W2ldLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgPSBjb2xMaXN0O1xyXG4gICAgICAgIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlKTtcclxuICAgICAgICB0aGlzLnNjaGVtYU1hbmFnZXIuc2F2ZVNjaGVtYSh7IHNjaGVtYTogSlNPTi5zdHJpbmdpZnkodGhpcy5zY2hlbWFWYWx1ZSksIGdyb3VwVHlwZTogdGhpcy5ncm91cFR5cGUgfSwgJycpLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgIGNvbnN0IHJlbmRlck9wdGlvbjogUmVuZGVyT3B0aW9uID0gT2JqZWN0LmFzc2lnbih7IG11bHRpU2hlZXRzU2NoZW1hSWRzOiB0aGlzLm11bHRpU2hlZXRzU2NoZW1hSWRzLCBjdXJTaGVldDogdGhpcy5jdXJTaGVldCwgbXVsdGlTaGVldHM6IHRoaXMubXVsdGlTaGVldHMgfSwgeyBzY2hlbWFJZDogdGhpcy5zY2hlbWFWYWx1ZS5pZCwgcXVlcnlJZDogc2VsZi5xdWVyeUlkLCBjb250cm9sVHlwZTogc2VsZi5jb250cm9sVHlwZSwgcW9NYW5hZ2VyQ29kZTogc2VsZi5xb01hbmFnZXJDb2RlLCBwYWdlSW5kZXg6IDAsIHF1ZXJ5UmVsYXRpdmVVcmw6IHNlbGYucXVlcnlSZWxhdGl2ZVVybCwgZmlsdGVyQ29uZGl0aW9uOiBzZWxmLmNvbmRpdGlvbkV4cHJlc3Npb24sIGdyb3VwVHlwZTogc2VsZi5ncm91cFR5cGUsIHZvSWQ6IHNlbGYudm9JZCwgam9pbnRzZWFyY2hJbmZvTGlzdDogc2VsZi5qb2ludHNlYXJjaEluZm9MaXN0IH0pO1xyXG4gICAgICAgICAgc2VsZi5xZHBWaWV3UmVuZGVyKHJlbmRlck9wdGlvbik7XHJcbiAgICAgICAgICBzZWxmLmN1cnJlbnRDb2xJbmRleCA9IDA7XHJcbiAgICAgICAgICBzZWxmLmhlYWRlck1lbnVEaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UuZXhjZXB0aW9uKGVycm9yLk1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBzZWxmLmN1cnJlbnRDb2xJbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBASG9zdExpc3RlbmVyKCdjbGljaycpXHJcbiAgaGFuZGxlQmx1cigkZXZlbnQpIHtcclxuICAgIHRoaXMuaGVhZGVyTWVudURpc3BsYXkgPSAnbm9uZSc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRDb2xHcm91cEFnZ3JlKGluZGV4OiBhbnkpIHtcclxuICAgIGlmICh0aGlzLnNjaGVtYVZhbHVlICYmIHRoaXMuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUgJiYgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb25cclxuICAgICAgJiYgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCAmJiB0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0Lmxlbmd0aCA+IGluZGV4KSB7XHJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHsgaW5kZXg6IHRoaXMuY3VycmVudENvbEluZGV4LCBjb2xJbmRleDogMCwgdHlwZTogJ2luaXQnIH07XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMucmVjdXJzaXZlQ29sdW1uU29ydCh0aGlzLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0W2ldLCBudWxsLCBwYXJhbXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlY3Vyc2l2ZUNvbHVtblNvcnQoY29sLCBjb2xMaXN0LCBwYXJhbXMpIHtcclxuICAgIGlmIChjb2xMaXN0ID09IG51bGwpIHtcclxuICAgICAgaWYgKGNvbC5jaGlsZExpc3QgJiYgY29sLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnJlY3Vyc2l2ZUNvbHVtblNvcnQobnVsbCwgY29sLmNoaWxkTGlzdCwgcGFyYW1zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAocGFyYW1zLmNvbEluZGV4ID09PSBwYXJhbXMuaW5kZXgpIHtcclxuICAgICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2luaXQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sSXNHcm91cCA9IGNvbC5pc0dyb3VwO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwVGV4dCA9IGNvbC5ncm91cEFnZ3JlVGV4dCB8fCAnJztcclxuICAgICAgICAgICAgdGhpcy5ncm91cFNlbGVjdFZhbHVlID0gY29sLmdyb3VwQWdncmU7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy50eXBlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgICAgY29sLmlzR3JvdXAgPSB0aGlzLmNvbElzR3JvdXA7XHJcbiAgICAgICAgICAgIGNvbC5ncm91cEFnZ3JlVGV4dCA9IHRoaXMuZ3JvdXBUZXh0IHx8ICcnO1xyXG4gICAgICAgICAgICBjb2wuZ3JvdXBBZ2dyZSA9IHRoaXMuZ3JvdXBTZWxlY3RWYWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyYW1zLmNvbEluZGV4Kys7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChjb2xMaXN0W2ldLmNoaWxkTGlzdCAmJiBjb2xMaXN0W2ldLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMucmVjdXJzaXZlQ29sdW1uU29ydChudWxsLCBjb2xMaXN0W2ldLmNoaWxkTGlzdCwgcGFyYW1zKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHBhcmFtcy5jb2xJbmRleCA9PT0gcGFyYW1zLmluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ2luaXQnKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jb2xJc0dyb3VwID0gY29sTGlzdFtpXS5pc0dyb3VwO1xyXG4gICAgICAgICAgICAgIHRoaXMuZ3JvdXBUZXh0ID0gY29sTGlzdFtpXS5ncm91cEFnZ3JlVGV4dCB8fCAnJztcclxuICAgICAgICAgICAgICB0aGlzLmdyb3VwU2VsZWN0VmFsdWUgPSBjb2xMaXN0W2ldLmdyb3VwQWdncmU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnR5cGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgICAgIGNvbExpc3RbaV0uaXNHcm91cCA9IHRoaXMuY29sSXNHcm91cDtcclxuICAgICAgICAgICAgICBjb2xMaXN0W2ldLmdyb3VwQWdncmVUZXh0ID0gdGhpcy5ncm91cFRleHQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgY29sTGlzdFtpXS5ncm91cEFnZ3JlID0gdGhpcy5ncm91cFNlbGVjdFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYXJhbXMuY29sSW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVjdXJzaXZlQ2xlYXJDb2x1bW5Tb3J0KGNvbCwgY29sTGlzdCkge1xyXG4gICAgaWYgKGNvbExpc3QgPT0gbnVsbCkge1xyXG4gICAgICBpZiAoY29sLmNoaWxkTGlzdCAmJiBjb2wuY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMucmVjdXJzaXZlQ2xlYXJDb2x1bW5Tb3J0KG51bGwsIGNvbC5jaGlsZExpc3QpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbFsnc29ydCddID0gMDtcclxuICAgICAgICBjb2xbJ3NvcnRJbmRleCddID0gMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNvbExpc3RbaV0uY2hpbGRMaXN0ICYmIGNvbExpc3RbaV0uY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5yZWN1cnNpdmVDbGVhckNvbHVtblNvcnQobnVsbCwgY29sTGlzdFtpXS5jaGlsZExpc3QpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb2xMaXN0W2ldWydzb3J0J10gPSAwO1xyXG4gICAgICAgICAgY29sTGlzdFtpXVsnc29ydEluZGV4J10gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWdpc3RlU3ByZWFkQ29sdW1uV2lkdGhDaGFuZ2VkRXZlbnQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuc2hlZXQgPSB0aGlzLnNwcmVhZC5nZXRBY3RpdmVTaGVldCgpO1xyXG4gICAgc2VsZi5zaGVldC5iaW5kKEdDLlNwcmVhZC5TaGVldHMuRXZlbnRzLkNvbHVtbldpZHRoQ2hhbmdlZCwgZnVuY3Rpb24gKHNlbmRlciwgaW5mbykge1xyXG4gICAgICBjb25zdCBpbmRleCA9IGluZm8uY29sTGlzdFswXTtcclxuICAgICAgY29uc3QgY29sVyA9IGluZm8uc2hlZXQuZ2V0Q29sdW1uV2lkdGgoaW5mby5jb2xMaXN0WzBdKTtcclxuICAgICAgaWYgKHNlbGYuc2NoZW1hVmFsdWUgJiYgc2VsZi5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZSAmJiBzZWxmLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvblxyXG4gICAgICAgICYmIHNlbGYuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgJiYgc2VsZi5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoc2VsZi5zY2hlbWFWYWx1ZSAmJiBzZWxmLnNjaGVtYVZhbHVlLmlzUHJlZmFiID09PSAxKSB7XHJcbiAgICAgICAgICBzZWxmLm1zZ1NlcnZpY2UuaW5mbyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnc3ByZWFkLm1lc3NhZ2UudmFsaWRhdGUuc29ydCcpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbExpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNlbGYuc2NoZW1hVmFsdWUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpKTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IGluZGV4OiBpbmRleCwgY29sSW5kZXg6IDAsIGNvbFdpZHRoOiBjb2xXIH07XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHNlbGYucmVjdXJzaXZlQ29sdW1uV2lkdGhDaGFuZ2VkKGNvbExpc3RbaV0sIG51bGwsIHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gY29sTGlzdDtcclxuICAgICAgICBzZWxmLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlID0gSlNPTi5zdHJpbmdpZnkoc2VsZi5zY2hlbWFWYWx1ZS5zY2hlbWFWYWx1ZSk7XHJcbiAgICAgICAgc2VsZi5zY2hlbWFNYW5hZ2VyLnNhdmVTY2hlbWEoeyBzY2hlbWE6IEpTT04uc3RyaW5naWZ5KHNlbGYuc2NoZW1hVmFsdWUpLCBncm91cFR5cGU6IHRoaXMuZ3JvdXBUeXBlIH0sICcnKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICBzZWxmLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlID0gSlNPTi5wYXJzZShzZWxmLnNjaGVtYVZhbHVlLnNjaGVtYVZhbHVlKTtcclxuICAgICAgICB9LCAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgc2VsZi5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWN1cnNpdmVDb2x1bW5XaWR0aENoYW5nZWQoY29sLCBjb2xMaXN0LCBwYXJhbXMpIHtcclxuICAgIGlmIChjb2xMaXN0ID09IG51bGwpIHtcclxuICAgICAgaWYgKGNvbC5jaGlsZExpc3QgJiYgY29sLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnJlY3Vyc2l2ZUNvbHVtbldpZHRoQ2hhbmdlZChudWxsLCBjb2wuY2hpbGRMaXN0LCBwYXJhbXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChwYXJhbXMuY29sSW5kZXggPT09IHBhcmFtcy5pbmRleCkge1xyXG4gICAgICAgICAgY29sLmNvbFdpZHRoID0gcGFyYW1zLmNvbFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJhbXMuY29sSW5kZXgrKztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNvbExpc3RbaV0uY2hpbGRMaXN0ICYmIGNvbExpc3RbaV0uY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5yZWN1cnNpdmVDb2x1bW5XaWR0aENoYW5nZWQobnVsbCwgY29sTGlzdFtpXS5jaGlsZExpc3QsIHBhcmFtcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChwYXJhbXMuY29sSW5kZXggPT09IHBhcmFtcy5pbmRleCkge1xyXG4gICAgICAgICAgICBjb2xMaXN0W2ldLmNvbFdpZHRoID0gcGFyYW1zLmNvbFdpZHRoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFyYW1zLmNvbEluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==