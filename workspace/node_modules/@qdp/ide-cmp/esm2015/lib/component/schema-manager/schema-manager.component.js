/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef, Optional, Injector } from '@angular/core';
import { of } from 'rxjs';
import { DialogComponent } from '@farris/ui-dialog';
import { TreeTableComponent } from '@farris/ui-treetable';
import { MessagerService } from '@farris/ui-messager';
import { FarrisPanelComponent } from '@farris/ui-panel';
import { NotifyService } from '@farris/ui-notify';
import { SchemaService } from '../../service/schema/schema.service';
import { SchemaEditorComponent } from '../schema-editor/schema-editor.component';
import { ChartsSchemaEditorComponent } from '../charts-schema-editor/charts-schema-editor.component';
import { EventBus, RtfServices } from '@qdp/common';
import { LocalizeService } from '@qdp/localize';
import { FormErrorService } from '@farris/command-services';
import { CacheService } from '@ecp-caf/caf-common';
export class SchemaManagerComponent {
    /**
     * @param {?} schemaService
     * @param {?} msgService
     * @param {?} notifyService
     * @param {?} injector
     */
    constructor(schemaService, msgService, notifyService, injector) {
        this.schemaService = schemaService;
        this.msgService = msgService;
        this.notifyService = notifyService;
        this.injector = injector;
        this.editorParams = {};
        this.schemaSelected = new EventEmitter();
        this.saveSchema = new EventEmitter();
        this.saveAsSchema = new EventEmitter();
        this.removeSchema = new EventEmitter();
        this.saveAndCloseSchema = new EventEmitter();
        this.dialogBeforeClose = new EventEmitter();
        this.closeModal = new EventEmitter();
        // 模态框确定后关闭，并传递参数
        this.submitModal = new EventEmitter();
        this.defaultExpand = true;
        this.inputCollapse = '收起';
        this.inputExpand = '展开';
        this.size = {};
        this.isShow = false;
        this.personSchema = 'personSchema' + EventBus.guid();
        this.orgSchema = 'orgSchema' + EventBus.guid();
        this.publicSchema = 'publicSchema' + EventBus.guid();
        this.defaultSchema = 'defaultSchema' + EventBus.guid();
        this.schemaTreeData = [
            {
                data: {
                    id: 'public_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '公共',
                    schemaType: 0,
                },
                expanded: true,
                children: []
            }, {
                data: {
                    id: 'org_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '单位',
                    schemaType: 2
                },
                expanded: true,
                children: []
            }, {
                data: {
                    id: 'person_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '个人',
                    schemaType: 1
                },
                expanded: true,
                children: []
            }
        ];
        this.schemaDropDownData = [];
        this.isSchemaType = 0;
        this.isDefault = false;
        this.currentmode = false;
        this.qoManagerCode = '';
        this.modalConfig = {
            title: '格式方案',
            width: 900,
            height: 500,
            showButtons: true
        };
        this.chartsOption = {
            chartsType: {
                series: {
                    type: null
                }
            },
            chartsStyle: {
                title: {
                    text: null,
                    x: null,
                    y: null,
                    textStyle: {
                        lineHeight: 25,
                        fontSize: 25,
                        fontStyle: 'normal',
                        fontWight: 'normal',
                        fontFamily: 'Microsoft YaHei',
                        color: 'black'
                    }
                },
                legend: {
                    itemGap: 10,
                    itemWidth: 25,
                    itemHeight: 14,
                    align: 'auto',
                    orient: 'horizontal'
                },
                visualMap: [{
                        type: 'continuous',
                        top: 'top',
                        bottom: null,
                        left: 'right',
                        right: null,
                        pieces: [],
                        categories: [],
                        calculable: true,
                        inRange: {
                            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                        },
                        outOfRange: {
                            color: ['rgba(255,255,255,.2)']
                        },
                        controller: {
                            inRange: {
                                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                            },
                            outOfRange: {
                                color: ['#444']
                            }
                        },
                        textStyle: {
                            color: '#837' // 值域控件的文本颜色
                        },
                    }]
            },
            chartsData: {
                xAxis: {
                    type: 'category',
                    position: 'bottom'
                },
                yAxis: {
                    type: 'value',
                    position: 'left'
                },
                series: {
                    type: null,
                    encode: {
                        x: [],
                        y: []
                    }
                },
                legend: {
                    data: []
                }
            }
        };
        this.cacheSchemaData = {};
        this.operations = {};
        this.subscriptions = [];
        this.svgSchema = true;
        this.handlebeforeClose = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            let id = '';
            if (this.schemaId) {
                id = this.schemaId === 'prefab' ? '1' : this.schemaId;
            }
            if (!id && this.schemaInfo && this.schemaInfo.isDefaultSchema) {
                id = this.schemaInfo.isDefaultSchema.id;
            }
            this.dialogBeforeClose.emit(id);
            return of(true);
        });
        this.personSchema = this.personSchema + EventBus.guid();
        this.publicSchema = this.publicSchema + EventBus.guid();
        this.defaultSchema = this.defaultSchema + EventBus.guid();
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.modalConfig.title = this.localizeService.getValue('ideCmp.schemaManager.dailogName');
            this.schemaTreeData[0].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePublic');
            this.schemaTreeData[1].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg');
            this.schemaTreeData[2].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal');
            this.formErrorService = this.injector.get(FormErrorService);
            this.cache = this.injector.get(CacheService);
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const self = this;
        this.tabId = RtfServices.getTabId(this.queryId);
        EventBus.register('openAdvanceTemplateDialog', this.initSelectedSchemaId.bind(this), this.tabId);
        this.subscriptions.push(self.schemaService.operationChange.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        (value) => {
            if (value) {
                self.operations = value;
            }
            // console.log(value);
        })));
    }
    /**
     * @return {?}
     */
    initSelectedSchemaId() {
        this.selectedSchemaId = '';
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        for (const changeName in changes) {
            /** @type {?} */
            const newValue = changes[changeName].currentValue;
            if (newValue !== null && newValue !== void 0) {
                switch (changeName) {
                    case 'schemaInfo':
                        if (newValue) {
                            this.schemaInfoChange(newValue);
                        }
                        break;
                    case 'colList':
                        if (newValue) {
                            this.colListChange(newValue);
                        }
                        break;
                    case 'editorParams':
                        this.schemaManagerInitForIDE();
                        break;
                }
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.subscriptions && this.subscriptions.length) {
            for (const subscription of this.subscriptions) {
                subscription.unsubscribe();
            }
        }
    }
    /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    colListChange(newValue) {
        if (this.controlType !== 'charts') {
            if (this.schemaTreeData[0].data['schemaValue'] && this.schemaTreeData[1].data['schemaValue'] && this.schemaTreeData[2].data['schemaValue'] && newValue && newValue.length) {
                /** @type {?} */
                const cols = this.initColumns(this.objectCopy(newValue));
                this.schemaTreeData[0].data['schemaValue'].columnOption.colList = cols;
                this.schemaTreeData[1].data['schemaValue'].columnOption.colList = cols;
                this.schemaTreeData[2].data['schemaValue'].columnOption.colList = cols;
            }
            if (this.cacheSchemaData['public_schema'] && this.cacheSchemaData['public_schema'].schemaValue
                && this.cacheSchemaData['public_schema'].schemaValue.columnOption && this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList) {
                if (this.colList && this.colList.length) {
                    /** @type {?} */
                    const cols = this.initColumns(this.objectCopy(this.colList));
                    this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList = cols;
                }
                if (this.currTreeNode.id === 'public_schema') {
                    this.currTreeNodeChanged({
                        node: {
                            data: this.cacheSchemaData['public_schema']
                        }
                    });
                }
            }
        }
    }
    /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    initColumns(columns) {
        if (columns && columns.length) {
            columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                col.colWidth = 150, col.visible = true, col.isFixed = false, col.align = 1,
                    col.formatType = 0, col.formattor = '', col.sort = 0, col.pageAggre = 0, col.pageAggreText = '',
                    col.isGroup = false, col.groupAggre = 0, col.groupAggreText = '', col.totalAggre = 0,
                    col.totalAggreText = '', col.dimension = 0, col.rowColor = '', col.showType = '0';
            }));
        }
        return columns;
    }
    /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    schemaInfoChange(newValue) {
        this.controlInit();
        if (this.controlType !== 'charts') {
            this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = newValue && newValue.preSchema ? newValue.preSchema.schemaValue : null;
        }
        else {
            this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = this.chartsOption;
        }
        if (newValue && newValue.schemaList) {
            // 初始化格式方案管理的方案导航树控件以及方案管理的下拉控件
            Object.keys(newValue.schemaList).forEach((/**
             * @param {?} key
             * @return {?}
             */
            key => {
                this.cacheSchemaData[newValue.schemaList[key].id] = JSON.parse(JSON.stringify(newValue.schemaList[key]));
                this.schemaDropDownData.push(newValue.schemaList[key]);
                if ((newValue.schemaList[key].schemaType - 0) === 0) {
                    this.schemaTreeData[0].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
                else if ((newValue.schemaList[key].schemaType - 0) === 2) {
                    this.schemaTreeData[1].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
                else {
                    this.schemaTreeData[2].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
            }));
        }
        this.schemaTree.updateSerializedValue();
        if (newValue && newValue.isDefaultSchema && newValue.isDefaultSchema.id && this.selectedSchemaId !== 'selected_prefab') {
            if (!this.schemaId || (this.schemaId && '1,public_schema'.indexOf(this.schemaId) >= 0) || ('1,public_schema'.indexOf(this.schemaId) >= 0 && !this.validateSchemaId(this.schemaId, newValue)) || ('1,public_schema'.indexOf(this.schemaId) < 0 && !this.validateSchemaId(this.schemaId, newValue))) {
                this.schemaId = newValue.isDefaultSchema.id;
            }
            this.isDefault = newValue.isDefaultSchema.isDefault === 1 ? true : false;
            this.isSchemaType = newValue.isDefaultSchema.schemaType - 0;
            this.schemaName = newValue.isDefaultSchema.schemaName;
        }
        else {
            if (!this.schemaId || !this.validateSchemaId(this.schemaId, newValue)) {
                this.schemaId = 'prefab';
            }
        }
        if (this.schemaId === 'prefab' || this.schemaId === '1' || !this.schemaId) {
            this.treeNodeSelected('public_schema');
            this.isDefault = false;
            this.isSchemaType = 0;
            this.schemaName = '';
        }
        else {
            this.treeNodeSelected(this.schemaId);
        }
    }
    /**
     * @private
     * @return {?}
     */
    schemaManagerInitForIDE() {
        /** @type {?} */
        const self = this;
        if (this.editorParams && this.editorParams.queryId) {
            this.subscriptions = [];
            // 订阅格式信息的变化
            this.subscriptions.push(self.schemaService.schemaInfo.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                if (value) {
                    /** @type {?} */
                    const schemaInfoAll = Object.assign({}, value);
                    self.schemaInfo = schemaInfoAll;
                    if (self.schemaInfo.schemaList) {
                        self.schemaInfo.schemaList = self.schemaInfo.schemaList[self.editorParams.queryId];
                    }
                    self.schemaInfoChange(self.schemaInfo);
                }
            })));
            this.subscriptions.push(
            // 订阅数据列信息的变化
            self.schemaService.colList.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                self.colList = value;
                self.colListChange(self.colList);
            })));
            if (this.schemaEditor && this.schemaEditor.tabs) {
                this.schemaEditor.tabs.selectTab('title');
            }
            this.queryId = this.editorParams.queryId;
            this.controlType = this.editorParams.controlType;
            this.qoManagerCode = this.editorParams.qoManagerCode;
            this.queryRelativeUrl = this.editorParams.queryRelativeUrl;
            this.currentmode = true;
            /** @type {?} */
            const organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            this.schemaService.getSchemaList(self.queryId, '', organizationId, self.queryRelativeUrl, self.groupType).subscribe((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                /** @type {?} */
                const schemaData = value ? value : [];
                /** @type {?} */
                const schemaId = schemaData && schemaData.length && schemaData[0] && schemaData[0].id ? schemaData[0].id : '1';
                /** @type {?} */
                const params = {};
                params['qoManagerCode'] = self.qoManagerCode;
                params['pageIndex'] = 0;
                params['schemaId'] = schemaId;
                params['entityData'] = '';
                params['extendCond'] = '';
                if (self.editorParams && self.editorParams.dynamicCols && self.editorParams.dynamicCols.length) {
                    self.schemaService.getSpreadTemplate(schemaId, self.queryId, self.editorParams.dynamicCols, self.queryRelativeUrl, null, self.editorParams.dynamicCols).subscribe();
                }
                else {
                    self.schemaService.getCol(params, self.queryRelativeUrl).subscribe((/**
                     * @param {?} result
                     * @return {?}
                     */
                    result => {
                        if (result && result.dynamicCols) {
                            self.schemaService.getSpreadTemplate(schemaId, self.queryId, result.dynamicCols, self.queryRelativeUrl, null, result.dynamicCols).subscribe();
                        }
                    }));
                }
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    controlInit() {
        this.currTreeNode = undefined;
        this.cacheSchemaData = {};
        this.schemaTreeData[0].children = [];
        this.schemaTreeData[1].children = [];
        this.schemaTreeData[2].children = [];
        this.schemaDropDownData = [];
    }
    /**
     * @private
     * @param {?} id
     * @param {?} newValue
     * @return {?}
     */
    validateSchemaId(id, newValue) {
        /** @type {?} */
        let result = false;
        if (!id) {
            return result;
        }
        if (newValue && newValue.schemaList) {
            for (const key in newValue.schemaList) {
                if (id === key) {
                    result = true;
                }
            }
        }
        return result;
    }
    /**
     * @return {?}
     */
    handleDialogShow() {
        this.personSchema = 'personSchema' + EventBus.guid();
        this.publicSchema = 'publicSchema' + EventBus.guid();
        this.defaultSchema = 'defaultSchema' + EventBus.guid();
        if (this.controlType !== 'charts') {
            if (this.schemaEditor && this.schemaEditor.tabs) {
                this.schemaEditor.tabs.selectTab('title');
            }
        }
        else {
            if (this.chartsSchemaEditor && this.chartsSchemaEditor.tabs) {
                this.chartsSchemaEditor.tabs.selectTab('type');
            }
        }
        this.isShow = true;
        this.farrisDialog.show();
    }
    /**
     * @param {?} id
     * @return {?}
     */
    handleDropDownItemClick(id) {
        this.schemaId = id;
        if (this.schemaId === 'prefab') {
            this.selectedSchemaId = 'selected_prefab';
            this.treeNodeSelected('public_schema');
        }
        else {
            this.selectedSchemaId = id;
            this.treeNodeSelected(this.schemaId);
        }
        this.schemaSelected.emit(id === 'prefab' ? '1' : id);
    }
    /**
     * @param {?} option
     * @return {?}
     */
    handleTabsSelectChange(option) {
        if (this.farrisPanelComponent && this.farrisPanelComponent.modelValue.length) {
            this.farrisPanelComponent.updateModel('schemaInfo');
        }
        this.updateCurrSchema(option, 'tabChanged');
    }
    /**
     * @param {?} value
     * @return {?}
     */
    handleSchemaTypeSelect(value) {
        this.isSchemaType = value;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    handleTreeNodeSelected(data) {
        /** @type {?} */
        const self = this;
        if (!this.currTreeNode) {
            this.currTreeNodeChanged(data);
        }
        else {
            if (data.node.data.id !== this.currTreeNode.id) {
                if (this.schemaEditor || this.chartsSchemaEditor) {
                    if (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema') {
                        this.currTreeNodeChanged(data);
                    }
                    else {
                        /** @type {?} */
                        let compare = true;
                        this.updateCurrSchema(null);
                        if (this.controlType === 'charts' && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData) {
                            this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type.replace('1', '');
                        }
                        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
                            if (this.controlType === 'charts') {
                                this.currTreeNode.schemaValue.chartsData.series.type = this.currTreeNode.schemaValue.chartsType.series.type;
                                this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsType.series.type;
                            }
                            compare = (JSON.stringify(this.currTreeNode.schemaValue) ===
                                JSON.stringify(this.cacheSchemaData[this.currTreeNode.id].schemaValue)
                                && this.currTreeNode.schemaName === this.cacheSchemaData[this.currTreeNode.id].schemaName
                                && this.currTreeNode.schemaType === this.cacheSchemaData[this.currTreeNode.id].schemaType
                                && this.currTreeNode.isDefault === this.cacheSchemaData[this.currTreeNode.id].isDefault);
                            if (false && !compare && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type !== 'effectScatter') {
                                this.msgService.question(this.localizeService.getValue('ideCmp.schemaManager.message.validate.judgeUpdate'), (/**
                                 * @return {?}
                                 */
                                () => {
                                    self.currTreeNodeChanged(data);
                                }), (/**
                                 * @return {?}
                                 */
                                () => {
                                    this.schemaTree.selectNode(this.cacheSchemaData[this.currTreeNode.id].id);
                                    this.schemaName = this.cacheSchemaData[this.currTreeNode.id].schemaName;
                                    this.isSchemaType = this.cacheSchemaData[this.currTreeNode.id].schemaType;
                                    this.isDefault = this.cacheSchemaData[this.currTreeNode.id].isDefault === 1 ? true : false;
                                }));
                            }
                            else {
                                this.currTreeNodeChanged(data);
                            }
                        }
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    currTreeNodeChanged(data) {
        if (this.currTreeNode && (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema')) {
            delete this.cacheSchemaData[this.currTreeNode.id];
        }
        this.currTreeNode = data.node.data;
        if (this.currTreeNode.id === 'public_schema') {
            if (this.controlType !== 'charts' && this.colList && this.colList.length) {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 0;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePublic');
            this.schemaId = 'prefab';
        }
        else if (this.currTreeNode.id === 'person_schema') {
            if (this.controlType !== 'charts') {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 1;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePersonal');
            this.schemaId = 'prefab';
        }
        else if (this.currTreeNode.id === 'org_schema') {
            if (this.controlType !== 'charts') {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 2;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeOrg');
            this.schemaId = 'prefab';
        }
        else {
            this.isDefault = this.currTreeNode.isDefault === 1 ? true : false;
            this.isSchemaType = this.currTreeNode.schemaType - 0;
            this.schemaName = this.currTreeNode.schemaName;
            this.schemaId = this.currTreeNode.id;
        }
        this.cacheSchemaData[this.currTreeNode.id] = JSON.parse(JSON.stringify(this.currTreeNode));
    }
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    treeNodeSelected(id) {
        this.schemaTree.clearSelections();
        if (id) {
            this.schemaTree.selectNode(id);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onResized(event) {
        this.size.height = event.newHeight || 300;
        this.size.width = event.newWidth;
        if (this.schemaTree) {
            this.schemaTree.resize(this.size);
        }
    }
    /**
     * @return {?}
     */
    handleSaveAsClick() {
        /** @type {?} */
        const self = this;
        this.updateCurrSchema(null, 'save_as');
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData['public_schema']) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData['public_schema'].schemaType === 0) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            /** @type {?} */
            const str = JSON.stringify(this.cacheSchemaData['public_schema']);
            /** @type {?} */
            const schema = JSON.parse(str);
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (const key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            const textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            schema.id = '';
            /** @type {?} */
            const organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                this.schemaId = '';
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    this.schemaId = data.isDefaultSchema.id;
                }
                this.notifyService['success']((/** @type {?} */ ({
                    title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                this.saveAsSchema.emit();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                self.formErrorService.exception(error.Message, error);
            }));
        }
    }
    /**
     * @return {?}
     */
    handleRemoveClick() {
        /** @type {?} */
        const self = this;
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' &&
                this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' &&
                this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                /** @type {?} */
                const organizationId = this.cache.get(this.tabId + 'organizationId') || '';
                this.schemaService.deleteSchema(this.cacheSchemaData[this.currTreeNode.id].id, this.queryId, this.queryRelativeUrl, this.groupType, organizationId).subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    data.subscribe((/**
                     * @param {?} value
                     * @return {?}
                     */
                    (value) => {
                        this.schemaId = '';
                        this.notifyService['success']((/** @type {?} */ ({
                            title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.delete.success'), timeout: 3000
                        })));
                        this.removeSchema.emit();
                    }));
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                (error) => {
                    self.formErrorService.exception(error.Message, error);
                }));
            }
            else {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));
            }
        }
        else {
            this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));
        }
    }
    /**
     * @return {?}
     */
    handleSaveClick() {
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
        }
        this.updateCurrSchema(null);
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            /** @type {?} */
            const str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);
            /** @type {?} */
            const schema = JSON.parse(str);
            if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {
                schema.id = '';
            }
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (const key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            const textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            /** @type {?} */
            const organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    this.schemaId = data.isDefaultSchema.id;
                }
                this.schemaId = this.schemaId === 'prefab' ? '' : this.schemaId;
                this.notifyService['success']((/** @type {?} */ ({
                    title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                this.treeNodeSelected(this.schemaId);
                this.saveSchema.emit();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.formErrorService.exception(error.Message, error);
            }));
        }
    }
    /**
     * @return {?}
     */
    handleSaveAndCloseClick() {
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
        }
        this.updateCurrSchema(null);
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            /** @type {?} */
            const str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);
            /** @type {?} */
            const schema = JSON.parse(str);
            if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {
                schema.id = '';
            }
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (const key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            const textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            /** @type {?} */
            const organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    this.schemaId = data.isDefaultSchema.id;
                }
                this.schemaId = this.schemaId === 'prefab' ? '' : this.schemaId;
                this.notifyService['success']((/** @type {?} */ ({
                    title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                this.treeNodeSelected(this.schemaId);
                this.saveAndCloseSchema.emit();
                if (!this.currentmode) {
                    this.farrisDialog.close();
                }
                else {
                    this.closeModal.emit();
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.formErrorService.exception(error.Message, error);
            }));
        }
    }
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    updateCurrSchema(options, type) {
        if (this.controlType !== 'charts') {
            this.updateListSchema(options, type);
        }
        else {
            this.updateChartsSchema(options, type);
        }
    }
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    updateListSchema(options, type) {
        /** @type {?} */
        let option = options;
        if (!option) {
            if (this.schemaEditor) {
                option = this.schemaEditor.getOption();
            }
        }
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            /** @type {?} */
            let sId = this.currTreeNode.id;
            if (type === 'save_as') {
                sId = 'public_schema';
                this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));
                this.cacheSchemaData[sId].id = sId;
            }
            if (option && option.titleOption) {
                this.cacheSchemaData[sId].schemaValue.titleOption = option.titleOption;
            }
            if (option && option.columnOption && option.columnOption.length) {
                this.cacheSchemaData[sId].schemaValue.columnOption.colList = option.columnOption;
            }
            if (option && option.styleOption) {
                this.cacheSchemaData[sId].schemaValue.styleOption = option.styleOption;
            }
            if (option && option.otherOption) {
                this.cacheSchemaData[sId].schemaValue.otherOption = option.otherOption;
            }
            if (type !== 'tabChanged') {
                this.cacheSchemaData[sId].schemaName = this.schemaName;
                this.cacheSchemaData[sId].schemaType = this.isSchemaType;
                this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;
            }
        }
    }
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    updateChartsSchema(options, type) {
        /** @type {?} */
        let option = options;
        if (!option) {
            if (this.chartsSchemaEditor) {
                option = this.chartsSchemaEditor.getOption();
            }
        }
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            /** @type {?} */
            let sId = this.currTreeNode.id;
            if (type === 'save_as') {
                sId = 'public_schema';
                this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));
                this.cacheSchemaData[sId].id = sId;
            }
            if (option && option.chartsType) {
                this.cacheSchemaData[sId].schemaValue.chartsType = option.chartsType;
            }
            if (option && option.chartsData) {
                this.cacheSchemaData[sId].schemaValue.chartsData = option.chartsData;
                if (option && option.groupSummarySet) {
                    this.cacheSchemaData[sId].schemaValue['groupSummarySet'] = option.groupSummarySet;
                }
            }
            if (option && option.chartsStyle) {
                this.cacheSchemaData[sId].schemaValue.chartsStyle = option.chartsStyle;
                if (option && option.customOption) {
                    if (option.customOption === 'error') {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                        return;
                    }
                }
                this.cacheSchemaData[sId].schemaValue['customOption'] = option.customOption;
            }
            this.cacheSchemaData[sId].schemaValue.chartsData.series.type = this.cacheSchemaData[sId].schemaValue.chartsType.series.type;
            if (this.cacheSchemaData[sId].schemaValue.chartsData.legend) {
                this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.show = this.cacheSchemaData[sId].schemaValue.chartsData.legend.show;
                this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.data = this.cacheSchemaData[sId].schemaValue.chartsData.legend.data;
            }
            if (type !== 'tabChanged') {
                this.cacheSchemaData[sId].schemaName = this.schemaName;
                this.cacheSchemaData[sId].schemaType = this.isSchemaType;
                this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;
            }
        }
    }
    /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    crosstabColumnValidate(columns) {
        /** @type {?} */
        let flag = false;
        if (this.controlType === 'crosstab') {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < columns.length; i++) {
                if (columns[i].groupAggre !== 4 && columns[i].totalAggre !== 4) {
                    if ((columns[i].dimension - 0) === 3 && !'int,integer,float,double,decimal,number'.includes(columns[i].type ? columns[i].type.toLowerCase() : '')) {
                        flag = true;
                        break;
                    }
                }
            }
        }
        return flag;
    }
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    objectCopy(obj) {
        /** @type {?} */
        const str = JSON.stringify(obj);
        return JSON.parse(str);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    handleHover(type, state) {
        this.svgSchema = state === 1;
    }
    /**
     * @param {?} schema
     * @param {?} params
     * @return {?}
     */
    getTextColumnSort(schema, params) {
        /** @type {?} */
        let schemaValue;
        if (schema && typeof schema.schemaValue === 'string') {
            schemaValue = JSON.parse(schema.schemaValue);
        }
        else {
            schemaValue = schema.schemaValue;
        }
        if (schemaValue.columnOption && schemaValue.columnOption.colList && schemaValue.columnOption.colList.length) {
            schemaValue.columnOption.colList.forEach((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                this.recursiveTextColumnSort(col, null, params);
            }));
        }
    }
    /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    recursiveTextColumnSort(col, colList, params) {
        if (colList == null) {
            if (col.childList && col.childList.length) {
                this.recursiveTextColumnSort(null, col.childList, params);
            }
            else {
                if (col.type && col.type.toLowerCase() === 'text' && col.sort > 0) {
                    params.isText.push(col.bindField);
                }
                params.colIndex++;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < colList.length; i++) {
                if (colList[i].childList && colList[i].childList.length) {
                    this.recursiveTextColumnSort(null, colList[i].childList, params);
                }
                else {
                    if (colList[i].type && colList[i].type.toLowerCase() === 'text' && colList[i].sort > 0) {
                        params.isText.push(colList[i].bindField);
                    }
                    params.colIndex++;
                }
            }
        }
    }
}
SchemaManagerComponent.decorators = [
    { type: Component, args: [{
                selector: 'schema-manager',
                template: "<div class=\"btn-group\" fDropdown *ngIf=\"!currentmode\">\r\n  <button class=\"btn btn-secondary btn-outline-link btn-icontext f-rt-btn border-0 dropdown-toggle\" type=\"button\"\r\n    id=\"dropdownMenuButtonSchema\" fDropdownToggle (mouseenter)=\"handleHover(0, 0)\" (mouseleave)=\"handleHover(0, 1)\">\r\n    <span class=\"f-icon\" role=\"presentation\">\r\n      <img *ngIf=\"svgSchema\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmdlc2hpPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSfkuqTkupLmlrnmoYgxLeW4uOinhOaAgeWkh+S7vScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTE5LjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTYnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDEzLjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J2ZhbmdhbicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMC4wMDAwMDAsIDEuMDAwMDAwKSc+PHBhdGggZD0nTTIuMzQyODU3MTQsMy4yMTUzODQ2MiBMMTYuMDU3MTQyOSwzLjIxNTM4NDYyIEMxNi4xNDgwNzQyLDMuMjE1Mzg0NjIgMTYuMjM1MjgxMywzLjI1MTA0Mzg1IDE2LjI5OTU3OTUsMy4zMTQ1MTc3IEMxNi4zNjM4Nzc3LDMuMzc3OTkxNTUgMTYuNCwzLjQ2NDA4MDU3IDE2LjQsMy41NTM4NDYxNSBMMTYuNCwxNS4wNjE1Mzg1IEMxNi40LDE1LjI0ODQ2NTYgMTYuMjQ2NDk3NiwxNS40IDE2LjA1NzE0MjksMTUuNCBMMi4zNDI4NTcxNCwxNS40IEMyLjE1MzUwMjM3LDE1LjQgMiwxNS4yNDg0NjU2IDIsMTUuMDYxNTM4NSBMMiwzLjU1Mzg0NjE1IEMyLDMuNDY0MDgwNTcgMi4wMzYxMjIzNCwzLjM3Nzk5MTU1IDIuMTAwNDIwNTMsMy4zMTQ1MTc3IEMyLjE2NDcxODcyLDMuMjUxMDQzODUgMi4yNTE5MjU3NywzLjIxNTM4NDYyIDIuMzQyODU3MTQsMy4yMTUzODQ2MiBaJyBpZD0n6Lev5b6EJyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjUnPjwvcGF0aD48cGF0aCBkPSdNMi4zNDI5MDc3MSwxIEw4Ljk4MTYwMSwxIEM5LjEwOTg5ODU2LDEgOS4yMjc0NTAwNywxLjA3MTY1NjYzIDkuMjg2Mjc0NDksMS4xODU2NTcxNCBMMTYuMzYxODMyMiwxNC44OTk5NDI4IEMxNi40MTY2ODUxLDE1LjAwNjI0NjUgMTYuNDEyMTYxLDE1LjEzMzQ0OTEgMTYuMzQ5ODk0NywxNS4yMzU1ODg2IEMxNi4yODc2Mjg0LDE1LjMzNzcyODEgMTYuMTc2NjIyNywxNS40IDE2LjA1Njk4NzMsMTUuNCBMMi4zNDI5MDc3MSwxNS40IEMyLjE1MzUyNTAxLDE1LjQgMiwxNS4yNDY0OTc2IDIsMTUuMDU3MTQyOCBMMiwxLjM0Mjg1NzE0IEMyLDEuMTUzNTAyMzcgMi4xNTM1MjUwMSwxIDIuMzQyOTA3NzEsMSBaJyBpZD0n6Lev5b6EJyBmaWxsPScjOEZBMUNCJz48L3BhdGg+PHBhdGggZD0nTTQuMzY2NDMzNTYsMy4yMTUzODQ2MiBMNy4zODc0MTI2LDMuMjE1Mzg0NjIgQzcuNDg4MTExOSwzLjIxNTM4NDYyIDcuNTM4NDYxNTQsMy4yODkyMzA3NyA3LjUzODQ2MTU0LDMuNDM2OTIzMDYgTDcuNTM4NDYxNTQsNS4yMDkyMzA3OCBDNy41Mzg0NjE1NCw1LjM1NjkyMzA5IDcuNDg4MTExODksNS40MzA3NjkyMyA3LjM4NzQxMjYsNS40MzA3NjkyMyBMNC4zNjY0MzM1Niw1LjQzMDc2OTIzIEM0LjI2NTczNDI1LDUuNDMwNzY5MjMgNC4yMTUzODQ2Miw1LjM1NjkyMzA4IDQuMjE1Mzg0NjIsNS4yMDkyMzA3OCBMNC4yMTUzODQ2MiwzLjQzNjkyMzA2IEM0LjIxNTM4NDYyLDMuMjg5MjMwNzUgNC4yNjU3MzQyNiwzLjIxNTM4NDYyIDQuMzY2NDMzNTYsMy4yMTUzODQ2MiBaJyBpZD0n6Lev5b6EJyBmaWxsPScjRkZGRkZGJyBmaWxsLXJ1bGU9J25vbnplcm8nPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==\" style=\"width: 16px; height: 16px; display: block;\" />\r\n      <img *ngIf=\"!svgSchema\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmdlc2hpMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0n5Zu+5qCH6YCJ5Lit6aKc6Imy5YiH5Zu+5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTkuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMTMuMDAwMDAwLCAxMi4wMDAwMDApJz48ZyBpZD0nZmFuZ2FuJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNMi4zNDI4NTcxNCwzLjIxNTM4NDYyIEwxNi4wNTcxNDI5LDMuMjE1Mzg0NjIgQzE2LjE0ODA3NDIsMy4yMTUzODQ2MiAxNi4yMzUyODEzLDMuMjUxMDQzODUgMTYuMjk5NTc5NSwzLjMxNDUxNzcgQzE2LjM2Mzg3NzcsMy4zNzc5OTE1NSAxNi40LDMuNDY0MDgwNTcgMTYuNCwzLjU1Mzg0NjE1IEwxNi40LDE1LjA2MTUzODUgQzE2LjQsMTUuMjQ4NDY1NiAxNi4yNDY0OTc2LDE1LjQgMTYuMDU3MTQyOSwxNS40IEwyLjM0Mjg1NzE0LDE1LjQgQzIuMTUzNTAyMzcsMTUuNCAyLDE1LjI0ODQ2NTYgMiwxNS4wNjE1Mzg1IEwyLDMuNTUzODQ2MTUgQzIsMy40NjQwODA1NyAyLjAzNjEyMjM0LDMuMzc3OTkxNTUgMi4xMDA0MjA1MywzLjMxNDUxNzcgQzIuMTY0NzE4NzIsMy4yNTEwNDM4NSAyLjI1MTkyNTc3LDMuMjE1Mzg0NjIgMi4zNDI4NTcxNCwzLjIxNTM4NDYyIFonIGlkPSfot6/lvoQnIGZpbGw9JyM0Qjk5RkYnIG9wYWNpdHk9JzAuNic+PC9wYXRoPjxwYXRoIGQ9J00yLjM0MjkwNzcxLDEgTDguOTgxNjAxLDEgQzkuMTA5ODk4NTYsMSA5LjIyNzQ1MDA3LDEuMDcxNjU2NjMgOS4yODYyNzQ0OSwxLjE4NTY1NzE0IEwxNi4zNjE4MzIyLDE0Ljg5OTk0MjggQzE2LjQxNjY4NTEsMTUuMDA2MjQ2NSAxNi40MTIxNjEsMTUuMTMzNDQ5MSAxNi4zNDk4OTQ3LDE1LjIzNTU4ODYgQzE2LjI4NzYyODQsMTUuMzM3NzI4MSAxNi4xNzY2MjI3LDE1LjQgMTYuMDU2OTg3MywxNS40IEwyLjM0MjkwNzcxLDE1LjQgQzIuMTUzNTI1MDEsMTUuNCAyLDE1LjI0NjQ5NzYgMiwxNS4wNTcxNDI4IEwyLDEuMzQyODU3MTQgQzIsMS4xNTM1MDIzNyAyLjE1MzUyNTAxLDEgMi4zNDI5MDc3MSwxIFonIGlkPSfot6/lvoQnIGZpbGw9JyM0Qjk5RkYnIG9wYWNpdHk9JzAuOCc+PC9wYXRoPjxwYXRoIGQ9J000LjM2NjQzMzU2LDMuMjE1Mzg0NjIgTDcuMzg3NDEyNiwzLjIxNTM4NDYyIEM3LjQ4ODExMTksMy4yMTUzODQ2MiA3LjUzODQ2MTU0LDMuMjg5MjMwNzcgNy41Mzg0NjE1NCwzLjQzNjkyMzA2IEw3LjUzODQ2MTU0LDUuMjA5MjMwNzggQzcuNTM4NDYxNTQsNS4zNTY5MjMwOSA3LjQ4ODExMTg5LDUuNDMwNzY5MjMgNy4zODc0MTI2LDUuNDMwNzY5MjMgTDQuMzY2NDMzNTYsNS40MzA3NjkyMyBDNC4yNjU3MzQyNSw1LjQzMDc2OTIzIDQuMjE1Mzg0NjIsNS4zNTY5MjMwOCA0LjIxNTM4NDYyLDUuMjA5MjMwNzggTDQuMjE1Mzg0NjIsMy40MzY5MjMwNiBDNC4yMTUzODQ2MiwzLjI4OTIzMDc1IDQuMjY1NzM0MjYsMy4yMTUzODQ2MiA0LjM2NjQzMzU2LDMuMjE1Mzg0NjIgWicgaWQ9J+i3r+W+hCcgZmlsbD0nI0ZGRkZGRicgZmlsbC1ydWxlPSdub256ZXJvJz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=\" style=\"width: 16px; height: 16px; display: block;\" />\r\n    </span>\r\n    <!-- <span *ngIf=\"isMultiForm\" class=\"f-icon f-icon-indent\" role=\"presentation\"></span> -->\r\n    <span *ngIf=\"!isMultiForm\">&nbsp;{{localizeService.getValue('ideCmp.schemaManager.formatSchemaManagerName')}}</span>\r\n  </button>\r\n  <div class=\"dropdown-menu\" fDropdownMenu>\r\n    <a class=\"dropdown-item\" href=\"javascript:void(0);\" (click)=\"handleDialogShow()\">\r\n      <span class=\"k-icon\"></span>{{localizeService.getValue('ideCmp.schemaManager.formatManager')}}</a>\r\n    <div class=\"dropdown-divider\"></div>\r\n    <a *ngIf=\"controlType!='charts' && showPreSchema\" class=\"dropdown-item\" href=\"javascript:void(0);\"\r\n      (click)=\"handleDropDownItemClick('prefab')\">\r\n      <span [class.k-i-check]=\"schemaId=='prefab'\"\r\n        class=\"k-icon\"></span>&nbsp;{{localizeService.getValue('ideCmp.schemaManager.preFormat')}}</a>\r\n    <a *ngFor=\"let item of schemaDropDownData\" class=\"dropdown-item\" href=\"javascript:void(0);\"\r\n      (click)=\"handleDropDownItemClick(item.id)\">\r\n      <span [class.k-i-check]=\"schemaId==item.id\" class=\"k-icon\"></span>&nbsp;{{item.schemaName}}</a>\r\n  </div>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog [title]=\"localizeService.getValue('ideCmp.schemaManager.formatSchemaManagerName')\"\r\n  [showButtons]=\"false\" [width]=\"1258\" [height]=\"630\" [beforeClose]=\"handlebeforeClose\" *ngIf=\"!currentmode\">\r\n  <div class=\"farris-main-area flex-column bg-white\">\r\n    <div class=\"d-flex flex-row flex-fill farris-overflow-hidden\">\r\n      <div class=\"col-3 p-0 m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n        <farris-treetable #schemaTree [data]=\"schemaTreeData\" [idField]=\"'id'\" [showCheckAll]=\"false\"\r\n          [resizableColumns]=\"true\" [showHeader]=\"false\" [striped]=\"false\" [fixedHeader]=\"true\" [width]=\"size.width\"\r\n          [height]=\"size.height\" (nodeSelected)=\"handleTreeNodeSelected($event)\">\r\n          <tt-column [field]=\"'schemaName'\" [width]=\"100\" [align]=\"'left'\" [hAlign]=\"'center'\"></tt-column>\r\n        </farris-treetable>\r\n      </div>\r\n      <div class=\"d-flex flex-column flex-fill mt-1 mb-1 mr-1\">\r\n        <farris-panel class=\"w-100\" defaultExpand=\"defaultExpand\">\r\n          <farris-panel-item [title]=\"localizeService.getValue('ideCmp.schemaManager.basicInfoName')\"\r\n            [value]=\"'schemaInfo'\">\r\n            <ng-template #contentTempl>\r\n              <div class=\"farris-header p-1\">\r\n                <div class=\"form-row\">\r\n                  <div class=\"col-8 col-md-8 col-lg-8\">\r\n                    <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                      <div class=\"form-group farris-group-wrap\">\r\n                        <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"schema_name_id\">\r\n                          <span\r\n                            class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeName')}}:</span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap\">\r\n                          <input-group id=\"schema_name_id\" [(ngModel)]=\"schemaName\"></input-group>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-row\">\r\n                  <div class=\"col-12 col-md-12 col-lg-12\">\r\n                    <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                      <div class=\"form-group farris-group-wrap\">\r\n                        <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"range_type_id\">\r\n                          <span\r\n                            class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeType')}}:</span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap farris-checkradio-hor\">\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{publicSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==0\">\r\n                            <label class=\"custom-control-label\" for=\"{{publicSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(0)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePublic')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{orgSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==2\">\r\n                            <label class=\"custom-control-label\" for=\"{{orgSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(2)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{personSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==1\">\r\n                            <label class=\"custom-control-label\" for=\"{{personSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(1)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-checkbox mb-0\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"{{defaultSchema}}\"\r\n                              [(ngModel)]=\"isDefault\">\r\n                            <label class=\"custom-control-label\"\r\n                              for=\"{{defaultSchema}}\">{{localizeService.getValue('ideCmp.schemaManager.schemeDefault')}}</label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </ng-template>\r\n          </farris-panel-item>\r\n        </farris-panel>\r\n        <div class=\"farris-form d-flex flex-fill flex-column farris-overflow-hidden\">\r\n          <schema-editor *ngIf=\"controlType!='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n            [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n            (tabsSelectChange)=\"handleTabsSelectChange($event)\">\r\n          </schema-editor>\r\n          <charts-schema-editor *ngIf=\"controlType=='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n            [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n            (tabsSelectChange)=\"handleTabsSelectChange($event)\"></charts-schema-editor>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <div class=\"btn-toolbar btn-group-lg\" id=\"page-header-toolbar\">\r\n        <button class=\"btn btn-primary mr-1\" id=\"button-edit\" (click)=\"handleSaveClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSave')}}</button>\r\n        <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleSaveAsClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSaveAs')}}</button>\r\n        <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleRemoveClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnDelete')}}</button>\r\n        <button class=\"btn btn-secondary\" id=\"button-edit\" (click)=\"handleSaveAndCloseClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSaveAsClose')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n<div class=\"farris-main-area flex-column bg-white\" *ngIf=\"currentmode\">\r\n  <div class=\"d-flex flex-row flex-fill farris-overflow-hidden\">\r\n    <div class=\"col-3 p-0 m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n      <farris-treetable #schemaTree [data]=\"schemaTreeData\" [idField]=\"'id'\" [showCheckAll]=\"false\"\r\n        [resizableColumns]=\"true\" [fit]=\"true\" [showHeader]=\"false\" [striped]=\"false\" [fixedHeader]=\"true\"\r\n        [width]=\"size.width\" [height]=\"size.height\" (nodeSelected)=\"handleTreeNodeSelected($event)\">\r\n        <tt-column [field]=\"'schemaName'\" [width]=\"100\" [align]=\"'left'\" [hAlign]=\"'center'\"></tt-column>\r\n      </farris-treetable>\r\n    </div>\r\n    <div class=\"d-flex flex-column flex-fill mt-1 mb-1 mr-1\">\r\n      <farris-panel class=\"w-100\" defaultExpand=\"defaultExpand\">\r\n        <farris-panel-item [title]=\"localizeService.getValue('ideCmp.schemaManager.basicInfoName')\"\r\n          [value]=\"'schemaInfo'\">\r\n          <ng-template #contentTempl>\r\n            <div class=\"farris-header p-1\">\r\n              <div class=\"form-row\">\r\n                <div class=\"col-8 col-md-8 col-lg-8\">\r\n                  <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                    <div class=\"form-group farris-group-wrap\">\r\n                      <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"schema_name_id\">\r\n                        <span\r\n                          class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeName')}}:</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap\">\r\n                        <input-group id=\"schema_name_id\" [(ngModel)]=\"schemaName\"></input-group>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-row\">\r\n                <div class=\"col-12 col-md-12 col-lg-12\">\r\n                  <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                    <div class=\"form-group farris-group-wrap\">\r\n                      <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"range_type_id\">\r\n                        <span\r\n                          class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeType')}}:</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap farris-checkradio-hor\">\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{publicSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==0\">\r\n                          <label class=\"custom-control-label\" for=\"{{publicSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(0)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePublic')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{orgSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==2\">\r\n                          <label class=\"custom-control-label\" for=\"{{orgSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(2)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{personSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==1\">\r\n                          <label class=\"custom-control-label\" for=\"{{personSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(1)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-checkbox mb-0\">\r\n                          <input type=\"checkbox\" class=\"custom-control-input\" id=\"{{defaultSchema}}\"\r\n                            [(ngModel)]=\"isDefault\">\r\n                          <label class=\"custom-control-label\"\r\n                            for=\"{{defaultSchema}}\">{{localizeService.getValue('ideCmp.schemaManager.schemeDefault')}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n        </farris-panel-item>\r\n      </farris-panel>\r\n      <div class=\"farris-form d-flex flex-fill flex-column farris-overflow-hidden\">\r\n        <schema-editor *ngIf=\"controlType!='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n          [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n          (tabsSelectChange)=\"handleTabsSelectChange($event)\">\r\n        </schema-editor>\r\n        <charts-schema-editor *ngIf=\"controlType=='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n          [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n          (tabsSelectChange)=\"handleTabsSelectChange($event)\"></charts-schema-editor>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <div class=\"btn-toolbar btn-group-lg\" id=\"page-header-toolbar\">\r\n      <button class=\"btn btn-primary mr-1\" id=\"button-edit\" (click)=\"handleSaveClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSave')}}</button>\r\n      <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleSaveAsClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSaveAs')}}</button>\r\n      <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleRemoveClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnDelete')}}</button>\r\n      <button class=\"btn btn-secondary\" id=\"button-edit\" (click)=\"handleSaveAndCloseClick()\" *ngIf=\"!currentmode\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSaveAsClose')}}</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #enumFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary\"\r\n    (click)=\"clickCancel()\">{{localizeService.getValue('ideCmp.schemaManager.btnCancel')}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary\"\r\n    (click)=\"handleSaveAndCloseClick()\">{{localizeService.getValue('ideCmp.schemaManager.btnOK')}}</button>\r\n</ng-template>\r\n",
                styles: [".schema-position{position:absolute;top:0;left:0;right:0}"]
            }] }
];
/** @nocollapse */
SchemaManagerComponent.ctorParameters = () => [
    { type: SchemaService },
    { type: MessagerService },
    { type: NotifyService },
    { type: Injector, decorators: [{ type: Optional }] }
];
SchemaManagerComponent.propDecorators = {
    queryId: [{ type: Input }],
    groupType: [{ type: Input }],
    schemaInfo: [{ type: Input }],
    colList: [{ type: Input }],
    controlType: [{ type: Input }],
    showPreSchema: [{ type: Input }],
    editorParams: [{ type: Input }],
    isMultiForm: [{ type: Input }],
    schemaTree: [{ type: ViewChild, args: ['schemaTree',] }],
    modalFooter: [{ type: ViewChild, args: ['enumFooter',] }],
    schemaEditor: [{ type: ViewChild, args: [SchemaEditorComponent,] }],
    chartsSchemaEditor: [{ type: ViewChild, args: [ChartsSchemaEditorComponent,] }],
    farrisPanelComponent: [{ type: ViewChild, args: [FarrisPanelComponent,] }],
    farrisDialog: [{ type: ViewChild, args: ['farrisDialog',] }],
    schemaSelected: [{ type: Output }],
    saveSchema: [{ type: Output }],
    saveAsSchema: [{ type: Output }],
    removeSchema: [{ type: Output }],
    saveAndCloseSchema: [{ type: Output }],
    dialogBeforeClose: [{ type: Output }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    queryRelativeUrl: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    SchemaManagerComponent.prototype.queryId;
    /** @type {?} */
    SchemaManagerComponent.prototype.groupType;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaInfo;
    /** @type {?} */
    SchemaManagerComponent.prototype.colList;
    /** @type {?} */
    SchemaManagerComponent.prototype.controlType;
    /** @type {?} */
    SchemaManagerComponent.prototype.showPreSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.editorParams;
    /** @type {?} */
    SchemaManagerComponent.prototype.isMultiForm;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaTree;
    /** @type {?} */
    SchemaManagerComponent.prototype.modalFooter;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaEditor;
    /** @type {?} */
    SchemaManagerComponent.prototype.chartsSchemaEditor;
    /** @type {?} */
    SchemaManagerComponent.prototype.farrisPanelComponent;
    /** @type {?} */
    SchemaManagerComponent.prototype.farrisDialog;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaSelected;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveAsSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.removeSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveAndCloseSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.dialogBeforeClose;
    /** @type {?} */
    SchemaManagerComponent.prototype.closeModal;
    /** @type {?} */
    SchemaManagerComponent.prototype.submitModal;
    /** @type {?} */
    SchemaManagerComponent.prototype.defaultExpand;
    /** @type {?} */
    SchemaManagerComponent.prototype.inputCollapse;
    /** @type {?} */
    SchemaManagerComponent.prototype.inputExpand;
    /** @type {?} */
    SchemaManagerComponent.prototype.size;
    /** @type {?} */
    SchemaManagerComponent.prototype.isShow;
    /** @type {?} */
    SchemaManagerComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    SchemaManagerComponent.prototype.personSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.orgSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.publicSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.defaultSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaTreeData;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaDropDownData;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaId;
    /** @type {?} */
    SchemaManagerComponent.prototype.selectedSchemaId;
    /** @type {?} */
    SchemaManagerComponent.prototype.isSchemaType;
    /** @type {?} */
    SchemaManagerComponent.prototype.isDefault;
    /** @type {?} */
    SchemaManagerComponent.prototype.currTreeNode;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaName;
    /** @type {?} */
    SchemaManagerComponent.prototype.currentmode;
    /** @type {?} */
    SchemaManagerComponent.prototype.qoManagerCode;
    /** @type {?} */
    SchemaManagerComponent.prototype.modalConfig;
    /** @type {?} */
    SchemaManagerComponent.prototype.chartsOption;
    /** @type {?} */
    SchemaManagerComponent.prototype.cacheSchemaData;
    /** @type {?} */
    SchemaManagerComponent.prototype.operations;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.subscriptions;
    /** @type {?} */
    SchemaManagerComponent.prototype.localizeService;
    /** @type {?} */
    SchemaManagerComponent.prototype.svgSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.formErrorService;
    /** @type {?} */
    SchemaManagerComponent.prototype.cache;
    /** @type {?} */
    SchemaManagerComponent.prototype.tabId;
    /** @type {?} */
    SchemaManagerComponent.prototype.handlebeforeClose;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.schemaService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLW1hbmFnZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHFkcC9pZGUtY21wLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9zY2hlbWEtbWFuYWdlci9zY2hlbWEtbWFuYWdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUE0QixXQUFXLEVBQWEsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoSyxPQUFPLEVBQWMsRUFBRSxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxhQUFhLEVBQWlCLE1BQU0sbUJBQW1CLENBQUM7QUFDakUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBQ3JHLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBT25ELE1BQU0sT0FBTyxzQkFBc0I7Ozs7Ozs7SUEy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QU1OLEtBQUs7Ozs7SUE1Qk4seUNBQXNCOztJQUN0QiwyQ0FBd0I7O0lBQ3hCLDRDQUF5Qjs7SUFDekIseUNBQXNCOztJQUN0Qiw2Q0FBNkI7O0lBQzdCLCtDQUErQjs7SUFDL0IsOENBQWdDOztJQUNoQyw2Q0FBMEI7O0lBQzFCLDRDQUF3RDs7SUFDeEQsNkNBQXVEOztJQUN2RCw4Q0FBc0U7O0lBQ3RFLG9EQUF3Rjs7SUFDeEYsc0RBQTRFOztJQUM1RSw4Q0FBeUQ7O0lBQ3pELGdEQUFtRDs7SUFDbkQsNENBQStDOztJQUMvQyw4Q0FBaUQ7O0lBQ2pELDhDQUFpRDs7SUFDakQsb0RBQXVEOztJQUN2RCxtREFBc0Q7O0lBQ3RELDRDQUErQzs7SUFFL0MsNkNBQWdEOztJQUNoRCwrQ0FBcUI7O0lBQ3JCLCtDQUFxQjs7SUFDckIsNkNBQW1COztJQUNuQixzQ0FBZTs7SUFDZix3Q0FBb0I7O0lBQ3BCLGtEQUErQjs7SUFDL0IsOENBQWdEOztJQUNoRCwyQ0FBMEM7O0lBQzFDLDhDQUFnRDs7SUFDaEQsK0NBQWtEOztJQUNsRCxnREFnQ0U7O0lBQ0Ysb0RBQStCOztJQUMvQiwwQ0FBYzs7SUFDZCxrREFBc0I7O0lBQ3RCLDhDQUFpQjs7SUFDakIsMkNBQWtCOztJQUNsQiw4Q0FBa0I7O0lBQ2xCLDRDQUFtQjs7SUFDbkIsNkNBQW9COztJQUNwQiwrQ0FBbUI7O0lBQ25CLDZDQUtFOztJQUNGLDhDQTRFRTs7SUFDRixpREFBMEI7O0lBQzFCLDRDQUFxQjs7Ozs7SUFFckIsK0NBQTJDOztJQUUzQyxpREFBaUM7O0lBRWpDLDJDQUFpQjs7SUFDakIsa0RBQXNCOztJQUN0Qix1Q0FBb0I7O0lBQ3BCLHVDQUFXOztJQXVtQlgsbURBVUM7Ozs7O0lBOW1CQywrQ0FBb0M7Ozs7O0lBQ3BDLDRDQUFtQzs7Ozs7SUFDbkMsK0NBQW9DOzs7OztJQUNwQywwQ0FBc0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgVGVtcGxhdGVSZWYsIE9uRGVzdHJveSwgT3B0aW9uYWwsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBUcmVlVGFibGVDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLXRyZWV0YWJsZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBGYXJyaXNQYW5lbENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktcGFuZWwnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlLCBOb3RpZnlPcHRpb25zIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBTY2hlbWFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9zY2hlbWEvc2NoZW1hLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTY2hlbWFFZGl0b3JDb21wb25lbnQgfSBmcm9tICcuLi9zY2hlbWEtZWRpdG9yL3NjaGVtYS1lZGl0b3IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ2hhcnRzU2NoZW1hRWRpdG9yQ29tcG9uZW50IH0gZnJvbSAnLi4vY2hhcnRzLXNjaGVtYS1lZGl0b3IvY2hhcnRzLXNjaGVtYS1lZGl0b3IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXZlbnRCdXMsIFJ0ZlNlcnZpY2VzIH0gZnJvbSAnQHFkcC9jb21tb24nO1xyXG5pbXBvcnQgeyBMb2NhbGl6ZVNlcnZpY2UgfSBmcm9tICdAcWRwL2xvY2FsaXplJztcclxuaW1wb3J0IHsgRm9ybUVycm9yU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IENhY2hlU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzY2hlbWEtbWFuYWdlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3NjaGVtYS1tYW5hZ2VyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9zY2hlbWEtbWFuYWdlci5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFNjaGVtYU1hbmFnZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuICBASW5wdXQoKSBxdWVyeUlkOiBhbnk7XHJcbiAgQElucHV0KCkgZ3JvdXBUeXBlOiBhbnk7XHJcbiAgQElucHV0KCkgc2NoZW1hSW5mbzogYW55O1xyXG4gIEBJbnB1dCgpIGNvbExpc3Q6IGFueTtcclxuICBASW5wdXQoKSBjb250cm9sVHlwZTogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHNob3dQcmVTY2hlbWE6IHN0cmluZztcclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xyXG4gIEBJbnB1dCgpIGlzTXVsdGlGb3JtOiBhbnk7IC8vIOaYr+WQpuW1jOWFpeW8j+ihqOWNlVxyXG4gIEBWaWV3Q2hpbGQoJ3NjaGVtYVRyZWUnKSBzY2hlbWFUcmVlOiBUcmVlVGFibGVDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnZW51bUZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoU2NoZW1hRWRpdG9yQ29tcG9uZW50KSBzY2hlbWFFZGl0b3I6IFNjaGVtYUVkaXRvckNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKENoYXJ0c1NjaGVtYUVkaXRvckNvbXBvbmVudCkgY2hhcnRzU2NoZW1hRWRpdG9yOiBDaGFydHNTY2hlbWFFZGl0b3JDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChGYXJyaXNQYW5lbENvbXBvbmVudCkgZmFycmlzUGFuZWxDb21wb25lbnQ6IEZhcnJpc1BhbmVsQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2ZhcnJpc0RpYWxvZycpIGZhcnJpc0RpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIEBPdXRwdXQoKSBzY2hlbWFTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzYXZlU2NoZW1hID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHNhdmVBc1NjaGVtYSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSByZW1vdmVTY2hlbWEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc2F2ZUFuZENsb3NlU2NoZW1hID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGRpYWxvZ0JlZm9yZUNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAvLyDmqKHmgIHmoYbnoa7lrprlkI7lhbPpl63vvIzlubbkvKDpgJLlj4LmlbBcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBkZWZhdWx0RXhwYW5kID0gdHJ1ZTtcclxuICBpbnB1dENvbGxhcHNlID0gJ+aUtui1tyc7XHJcbiAgaW5wdXRFeHBhbmQgPSAn5bGV5byAJztcclxuICBzaXplOiBhbnkgPSB7fTtcclxuICBpc1Nob3c6IGFueSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHF1ZXJ5UmVsYXRpdmVVcmw6IGFueTtcclxuICBwZXJzb25TY2hlbWEgPSAncGVyc29uU2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICBvcmdTY2hlbWEgPSAnb3JnU2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICBwdWJsaWNTY2hlbWEgPSAncHVibGljU2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICBkZWZhdWx0U2NoZW1hID0gJ2RlZmF1bHRTY2hlbWEnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gIHNjaGVtYVRyZWVEYXRhOiBhbnkgPSBbXHJcbiAgICB7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZDogJ3B1YmxpY19zY2hlbWEnLFxyXG4gICAgICAgIGlzRGVmYXVsdDogMCxcclxuICAgICAgICBpc1ByZWZhYjogMSxcclxuICAgICAgICBzY2hlbWFOYW1lOiAn5YWs5YWxJyxcclxuICAgICAgICBzY2hlbWFUeXBlOiAwLFxyXG4gICAgICB9LFxyXG4gICAgICBleHBhbmRlZDogdHJ1ZSxcclxuICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICB9LCB7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZDogJ29yZ19zY2hlbWEnLFxyXG4gICAgICAgIGlzRGVmYXVsdDogMCxcclxuICAgICAgICBpc1ByZWZhYjogMSxcclxuICAgICAgICBzY2hlbWFOYW1lOiAn5Y2V5L2NJyxcclxuICAgICAgICBzY2hlbWFUeXBlOiAyXHJcbiAgICAgIH0sXHJcbiAgICAgIGV4cGFuZGVkOiB0cnVlLFxyXG4gICAgICBjaGlsZHJlbjogW11cclxuICAgIH0sIHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGlkOiAncGVyc29uX3NjaGVtYScsXHJcbiAgICAgICAgaXNEZWZhdWx0OiAwLFxyXG4gICAgICAgIGlzUHJlZmFiOiAxLFxyXG4gICAgICAgIHNjaGVtYU5hbWU6ICfkuKrkuronLFxyXG4gICAgICAgIHNjaGVtYVR5cGU6IDFcclxuICAgICAgfSxcclxuICAgICAgZXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgfVxyXG4gIF07XHJcbiAgc2NoZW1hRHJvcERvd25EYXRhOiBhbnlbXSA9IFtdO1xyXG4gIHNjaGVtYUlkOiBhbnk7XHJcbiAgc2VsZWN0ZWRTY2hlbWFJZDogYW55O1xyXG4gIGlzU2NoZW1hVHlwZSA9IDA7XHJcbiAgaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgY3VyclRyZWVOb2RlOiBhbnk7XHJcbiAgc2NoZW1hTmFtZTogc3RyaW5nO1xyXG4gIGN1cnJlbnRtb2RlID0gZmFsc2U7XHJcbiAgcW9NYW5hZ2VyQ29kZSA9ICcnO1xyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6ICfmoLzlvI/mlrnmoYgnLFxyXG4gICAgd2lkdGg6IDkwMCxcclxuICAgIGhlaWdodDogNTAwLFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG4gIGNoYXJ0c09wdGlvbjogYW55ID0ge1xyXG4gICAgY2hhcnRzVHlwZToge1xyXG4gICAgICBzZXJpZXM6IHtcclxuICAgICAgICB0eXBlOiBudWxsXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjaGFydHNTdHlsZToge1xyXG4gICAgICB0aXRsZToge1xyXG4gICAgICAgIHRleHQ6IG51bGwsXHJcbiAgICAgICAgeDogbnVsbCxcclxuICAgICAgICB5OiBudWxsLFxyXG4gICAgICAgIHRleHRTdHlsZToge1xyXG4gICAgICAgICAgbGluZUhlaWdodDogMjUsXHJcbiAgICAgICAgICBmb250U2l6ZTogMjUsXHJcbiAgICAgICAgICBmb250U3R5bGU6ICdub3JtYWwnLFxyXG4gICAgICAgICAgZm9udFdpZ2h0OiAnbm9ybWFsJyxcclxuICAgICAgICAgIGZvbnRGYW1pbHk6ICdNaWNyb3NvZnQgWWFIZWknLFxyXG4gICAgICAgICAgY29sb3I6ICdibGFjaydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgIGl0ZW1HYXA6IDEwLFxyXG4gICAgICAgIGl0ZW1XaWR0aDogMjUsXHJcbiAgICAgICAgaXRlbUhlaWdodDogMTQsXHJcbiAgICAgICAgYWxpZ246ICdhdXRvJyxcclxuICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJ1xyXG4gICAgICB9LFxyXG4gICAgICB2aXN1YWxNYXA6XHJcbiAgICAgICAgW3tcclxuICAgICAgICAgIHR5cGU6ICdjb250aW51b3VzJyxcclxuICAgICAgICAgIHRvcDogJ3RvcCcsXHJcbiAgICAgICAgICBib3R0b206IG51bGwsXHJcbiAgICAgICAgICBsZWZ0OiAncmlnaHQnLFxyXG4gICAgICAgICAgcmlnaHQ6IG51bGwsXHJcbiAgICAgICAgICBwaWVjZXM6IFtdLFxyXG4gICAgICAgICAgY2F0ZWdvcmllczogW10sXHJcbiAgICAgICAgICBjYWxjdWxhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgaW5SYW5nZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWycjMzEzNjk1JywgJyM0NTc1YjQnLCAnIzc0YWRkMScsICcjYWJkOWU5JywgJyNlMGYzZjgnLCAnI2ZmZmZiZicsICcjZmVlMDkwJywgJyNmZGFlNjEnLCAnI2Y0NmQ0MycsICcjZDczMDI3JywgJyNhNTAwMjYnXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG91dE9mUmFuZ2U6IHtcclxuICAgICAgICAgICAgY29sb3I6IFsncmdiYSgyNTUsMjU1LDI1NSwuMiknXVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNvbnRyb2xsZXI6IHtcclxuICAgICAgICAgICAgaW5SYW5nZToge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBbJyMzMTM2OTUnLCAnIzQ1NzViNCcsICcjNzRhZGQxJywgJyNhYmQ5ZTknLCAnI2UwZjNmOCcsICcjZmZmZmJmJywgJyNmZWUwOTAnLCAnI2ZkYWU2MScsICcjZjQ2ZDQzJywgJyNkNzMwMjcnLCAnI2E1MDAyNiddXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG91dE9mUmFuZ2U6IHtcclxuICAgICAgICAgICAgICBjb2xvcjogWycjNDQ0J11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRleHRTdHlsZToge1xyXG4gICAgICAgICAgICBjb2xvcjogJyM4MzcnXHQvLyDlgLzln5/mjqfku7bnmoTmlofmnKzpopzoibJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfV1cclxuICAgIH0sXHJcbiAgICBjaGFydHNEYXRhOiB7XHJcbiAgICAgIHhBeGlzOiB7XHJcbiAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbSdcclxuICAgICAgfSxcclxuICAgICAgeUF4aXM6IHtcclxuICAgICAgICB0eXBlOiAndmFsdWUnLFxyXG4gICAgICAgIHBvc2l0aW9uOiAnbGVmdCdcclxuICAgICAgfSxcclxuICAgICAgc2VyaWVzOiB7XHJcbiAgICAgICAgdHlwZTogbnVsbCxcclxuICAgICAgICBlbmNvZGU6IHtcclxuICAgICAgICAgIHg6IFtdLFxyXG4gICAgICAgICAgeTogW11cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgIGRhdGE6IFtdXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIGNhY2hlU2NoZW1hRGF0YTogYW55ID0ge307XHJcbiAgb3BlcmF0aW9uczogYW55ID0ge307XHJcblxyXG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuXHJcbiAgbG9jYWxpemVTZXJ2aWNlOiBMb2NhbGl6ZVNlcnZpY2U7XHJcblxyXG4gIHN2Z1NjaGVtYSA9IHRydWU7XHJcbiAgZm9ybUVycm9yU2VydmljZTogYW55O1xyXG4gIGNhY2hlOiBDYWNoZVNlcnZpY2U7XHJcbiAgdGFiSWQ6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHNjaGVtYVNlcnZpY2U6IFNjaGVtYVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLnBlcnNvblNjaGVtYSA9IHRoaXMucGVyc29uU2NoZW1hICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gICAgdGhpcy5wdWJsaWNTY2hlbWEgPSB0aGlzLnB1YmxpY1NjaGVtYSArIEV2ZW50QnVzLmd1aWQoKTtcclxuICAgIHRoaXMuZGVmYXVsdFNjaGVtYSA9IHRoaXMuZGVmYXVsdFNjaGVtYSArIEV2ZW50QnVzLmd1aWQoKTtcclxuICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgIHRoaXMubG9jYWxpemVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxpemVTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5tb2RhbENvbmZpZy50aXRsZSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5kYWlsb2dOYW1lJyk7XHJcbiAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uZGF0YS5zY2hlbWFOYW1lID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLnNjaGVtZVR5cGVQdWJsaWMnKTtcclxuICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVsxXS5kYXRhLnNjaGVtYU5hbWUgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIuc2NoZW1lVHlwZU9yZycpO1xyXG4gICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzJdLmRhdGEuc2NoZW1hTmFtZSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5zY2hlbWVUeXBlUGVyc29uYWwnKTtcclxuICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoRm9ybUVycm9yU2VydmljZSk7XHJcbiAgICAgIHRoaXMuY2FjaGUgPSB0aGlzLmluamVjdG9yLmdldChDYWNoZVNlcnZpY2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGFiSWQgPSBSdGZTZXJ2aWNlcy5nZXRUYWJJZCh0aGlzLnF1ZXJ5SWQpO1xyXG4gICAgRXZlbnRCdXMucmVnaXN0ZXIoJ29wZW5BZHZhbmNlVGVtcGxhdGVEaWFsb2cnLCB0aGlzLmluaXRTZWxlY3RlZFNjaGVtYUlkLmJpbmQodGhpcyksIHRoaXMudGFiSWQpO1xyXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc2VsZi5zY2hlbWFTZXJ2aWNlLm9wZXJhdGlvbkNoYW5nZS5zdWJzY3JpYmUoKHZhbHVlOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgc2VsZi5vcGVyYXRpb25zID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgaW5pdFNlbGVjdGVkU2NoZW1hSWQoKSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkU2NoZW1hSWQgPSAnJztcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGZvciAoY29uc3QgY2hhbmdlTmFtZSBpbiBjaGFuZ2VzKSB7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gY2hhbmdlc1tjaGFuZ2VOYW1lXS5jdXJyZW50VmFsdWU7XHJcbiAgICAgIGlmIChuZXdWYWx1ZSAhPT0gbnVsbCAmJiBuZXdWYWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgc3dpdGNoIChjaGFuZ2VOYW1lKSB7XHJcbiAgICAgICAgICBjYXNlICdzY2hlbWFJbmZvJzpcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zY2hlbWFJbmZvQ2hhbmdlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2NvbExpc3QnOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLmNvbExpc3RDaGFuZ2UobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnZWRpdG9yUGFyYW1zJzpcclxuICAgICAgICAgICAgdGhpcy5zY2hlbWFNYW5hZ2VySW5pdEZvcklERSgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucyAmJiB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMuc3Vic2NyaXB0aW9ucykge1xyXG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbExpc3RDaGFuZ2UobmV3VmFsdWU6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgIGlmICh0aGlzLnNjaGVtYVRyZWVEYXRhWzBdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gJiYgdGhpcy5zY2hlbWFUcmVlRGF0YVsxXS5kYXRhWydzY2hlbWFWYWx1ZSddICYmIHRoaXMuc2NoZW1hVHJlZURhdGFbMl0uZGF0YVsnc2NoZW1hVmFsdWUnXSAmJiBuZXdWYWx1ZSAmJiBuZXdWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjb2xzID0gdGhpcy5pbml0Q29sdW1ucyh0aGlzLm9iamVjdENvcHkobmV3VmFsdWUpKTtcclxuICAgICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzBdLmRhdGFbJ3NjaGVtYVZhbHVlJ10uY29sdW1uT3B0aW9uLmNvbExpc3QgPSBjb2xzO1xyXG4gICAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMV0uZGF0YVsnc2NoZW1hVmFsdWUnXS5jb2x1bW5PcHRpb24uY29sTGlzdCA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVsyXS5kYXRhWydzY2hlbWFWYWx1ZSddLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gY29scztcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddLnNjaGVtYVZhbHVlXHJcbiAgICAgICAgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24gJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbExpc3QgJiYgdGhpcy5jb2xMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgY29uc3QgY29scyA9IHRoaXMuaW5pdENvbHVtbnModGhpcy5vYmplY3RDb3B5KHRoaXMuY29sTGlzdCkpO1xyXG4gICAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCA9IGNvbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnKSB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJUcmVlTm9kZUNoYW5nZWQoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBub2RlOiB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0Q29sdW1ucyhjb2x1bW5zOiBhbnkpIHtcclxuICAgIGlmIChjb2x1bW5zICYmIGNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sOiBhbnkpID0+IHtcclxuICAgICAgICBjb2wuY29sV2lkdGggPSAxNTAsIGNvbC52aXNpYmxlID0gdHJ1ZSwgY29sLmlzRml4ZWQgPSBmYWxzZSwgY29sLmFsaWduID0gMSxcclxuICAgICAgICAgIGNvbC5mb3JtYXRUeXBlID0gMCwgY29sLmZvcm1hdHRvciA9ICcnLCBjb2wuc29ydCA9IDAsIGNvbC5wYWdlQWdncmUgPSAwLCBjb2wucGFnZUFnZ3JlVGV4dCA9ICcnLFxyXG4gICAgICAgICAgY29sLmlzR3JvdXAgPSBmYWxzZSwgY29sLmdyb3VwQWdncmUgPSAwLCBjb2wuZ3JvdXBBZ2dyZVRleHQgPSAnJywgY29sLnRvdGFsQWdncmUgPSAwLFxyXG4gICAgICAgICAgY29sLnRvdGFsQWdncmVUZXh0ID0gJycsIGNvbC5kaW1lbnNpb24gPSAwLCBjb2wucm93Q29sb3IgPSAnJywgY29sLnNob3dUeXBlID0gJzAnO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb2x1bW5zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzY2hlbWFJbmZvQ2hhbmdlKG5ld1ZhbHVlOiBhbnkpIHtcclxuICAgIHRoaXMuY29udHJvbEluaXQoKTtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzBdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSB0aGlzLnNjaGVtYVRyZWVEYXRhWzJdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSBuZXdWYWx1ZSAmJiBuZXdWYWx1ZS5wcmVTY2hlbWEgPyBuZXdWYWx1ZS5wcmVTY2hlbWEuc2NoZW1hVmFsdWUgOiBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVswXS5kYXRhWydzY2hlbWFWYWx1ZSddID0gdGhpcy5zY2hlbWFUcmVlRGF0YVsxXS5kYXRhWydzY2hlbWFWYWx1ZSddID0gdGhpcy5zY2hlbWFUcmVlRGF0YVsyXS5kYXRhWydzY2hlbWFWYWx1ZSddID0gdGhpcy5jaGFydHNPcHRpb247XHJcbiAgICB9XHJcbiAgICBpZiAobmV3VmFsdWUgJiYgbmV3VmFsdWUuc2NoZW1hTGlzdCkge1xyXG4gICAgICAvLyDliJ3lp4vljJbmoLzlvI/mlrnmoYjnrqHnkIbnmoTmlrnmoYjlr7zoiKrmoJHmjqfku7bku6Xlj4rmlrnmoYjnrqHnkIbnmoTkuIvmi4nmjqfku7ZcclxuICAgICAgT2JqZWN0LmtleXMobmV3VmFsdWUuc2NoZW1hTGlzdCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW25ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XS5pZF0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XSkpO1xyXG4gICAgICAgIHRoaXMuc2NoZW1hRHJvcERvd25EYXRhLnB1c2gobmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldKTtcclxuICAgICAgICBpZiAoKG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XS5zY2hlbWFUeXBlIC0gMCkgPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uY2hpbGRyZW4ucHVzaCh7IGRhdGE6IG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XSwgZXhwYW5kZWQ6IHRydWUsIGNoaWxkcmVuOiBbXSB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKChuZXdWYWx1ZS5zY2hlbWFMaXN0W2tleV0uc2NoZW1hVHlwZSAtIDApID09PSAyKSB7XHJcbiAgICAgICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmNoaWxkcmVuLnB1c2goeyBkYXRhOiBuZXdWYWx1ZS5zY2hlbWFMaXN0W2tleV0sIGV4cGFuZGVkOiB0cnVlLCBjaGlsZHJlbjogW10gfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMl0uY2hpbGRyZW4ucHVzaCh7IGRhdGE6IG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XSwgZXhwYW5kZWQ6IHRydWUsIGNoaWxkcmVuOiBbXSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zY2hlbWFUcmVlLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgaWYgKG5ld1ZhbHVlICYmIG5ld1ZhbHVlLmlzRGVmYXVsdFNjaGVtYSAmJiBuZXdWYWx1ZS5pc0RlZmF1bHRTY2hlbWEuaWQgJiYgdGhpcy5zZWxlY3RlZFNjaGVtYUlkICE9PSAnc2VsZWN0ZWRfcHJlZmFiJykge1xyXG4gICAgICBpZiAoIXRoaXMuc2NoZW1hSWQgfHwgKHRoaXMuc2NoZW1hSWQgJiYgJzEscHVibGljX3NjaGVtYScuaW5kZXhPZih0aGlzLnNjaGVtYUlkKSA+PSAwKSB8fCAoJzEscHVibGljX3NjaGVtYScuaW5kZXhPZih0aGlzLnNjaGVtYUlkKSA+PSAwICYmICF0aGlzLnZhbGlkYXRlU2NoZW1hSWQodGhpcy5zY2hlbWFJZCwgbmV3VmFsdWUpKSB8fCAoJzEscHVibGljX3NjaGVtYScuaW5kZXhPZih0aGlzLnNjaGVtYUlkKSA8IDAgJiYgIXRoaXMudmFsaWRhdGVTY2hlbWFJZCh0aGlzLnNjaGVtYUlkLCBuZXdWYWx1ZSkpKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFJZCA9IG5ld1ZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pZDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmlzRGVmYXVsdCA9IG5ld1ZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pc0RlZmF1bHQgPT09IDEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gbmV3VmFsdWUuaXNEZWZhdWx0U2NoZW1hLnNjaGVtYVR5cGUgLSAwO1xyXG4gICAgICB0aGlzLnNjaGVtYU5hbWUgPSBuZXdWYWx1ZS5pc0RlZmF1bHRTY2hlbWEuc2NoZW1hTmFtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghdGhpcy5zY2hlbWFJZCB8fCAhdGhpcy52YWxpZGF0ZVNjaGVtYUlkKHRoaXMuc2NoZW1hSWQsIG5ld1ZhbHVlKSkge1xyXG4gICAgICAgIHRoaXMuc2NoZW1hSWQgPSAncHJlZmFiJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2NoZW1hSWQgPT09ICdwcmVmYWInIHx8IHRoaXMuc2NoZW1hSWQgPT09ICcxJyB8fCAhdGhpcy5zY2hlbWFJZCkge1xyXG4gICAgICB0aGlzLnRyZWVOb2RlU2VsZWN0ZWQoJ3B1YmxpY19zY2hlbWEnKTtcclxuICAgICAgdGhpcy5pc0RlZmF1bHQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5pc1NjaGVtYVR5cGUgPSAwO1xyXG4gICAgICB0aGlzLnNjaGVtYU5hbWUgPSAnJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudHJlZU5vZGVTZWxlY3RlZCh0aGlzLnNjaGVtYUlkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2NoZW1hTWFuYWdlckluaXRGb3JJREUoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICh0aGlzLmVkaXRvclBhcmFtcyAmJiB0aGlzLmVkaXRvclBhcmFtcy5xdWVyeUlkKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAvLyDorqLpmIXmoLzlvI/kv6Hmga/nmoTlj5jljJZcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgICAgc2VsZi5zY2hlbWFTZXJ2aWNlLnNjaGVtYUluZm8uc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzY2hlbWFJbmZvQWxsID0gT2JqZWN0LmFzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgICBzZWxmLnNjaGVtYUluZm8gPSBzY2hlbWFJbmZvQWxsO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5zY2hlbWFJbmZvLnNjaGVtYUxpc3QpIHtcclxuICAgICAgICAgICAgICBzZWxmLnNjaGVtYUluZm8uc2NoZW1hTGlzdCA9IHNlbGYuc2NoZW1hSW5mby5zY2hlbWFMaXN0W3NlbGYuZWRpdG9yUGFyYW1zLnF1ZXJ5SWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuc2NoZW1hSW5mb0NoYW5nZShzZWxmLnNjaGVtYUluZm8pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKFxyXG4gICAgICAgIC8vIOiuoumYheaVsOaNruWIl+S/oeaBr+eahOWPmOWMllxyXG4gICAgICAgIHNlbGYuc2NoZW1hU2VydmljZS5jb2xMaXN0LnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICBzZWxmLmNvbExpc3QgPSB2YWx1ZTtcclxuICAgICAgICAgIHNlbGYuY29sTGlzdENoYW5nZShzZWxmLmNvbExpc3QpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICAgIGlmICh0aGlzLnNjaGVtYUVkaXRvciAmJiB0aGlzLnNjaGVtYUVkaXRvci50YWJzKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFFZGl0b3IudGFicy5zZWxlY3RUYWIoJ3RpdGxlJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5xdWVyeUlkID0gdGhpcy5lZGl0b3JQYXJhbXMucXVlcnlJZDtcclxuICAgICAgdGhpcy5jb250cm9sVHlwZSA9IHRoaXMuZWRpdG9yUGFyYW1zLmNvbnRyb2xUeXBlO1xyXG4gICAgICB0aGlzLnFvTWFuYWdlckNvZGUgPSB0aGlzLmVkaXRvclBhcmFtcy5xb01hbmFnZXJDb2RlO1xyXG4gICAgICB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwgPSB0aGlzLmVkaXRvclBhcmFtcy5xdWVyeVJlbGF0aXZlVXJsO1xyXG4gICAgICB0aGlzLmN1cnJlbnRtb2RlID0gdHJ1ZTtcclxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSB0aGlzLmNhY2hlLmdldCh0aGlzLnRhYklkICsgJ29yZ2FuaXphdGlvbklkJykgfHwgJyc7XHJcbiAgICAgIHRoaXMuc2NoZW1hU2VydmljZS5nZXRTY2hlbWFMaXN0KHNlbGYucXVlcnlJZCwgJycsIG9yZ2FuaXphdGlvbklkLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwsIHNlbGYuZ3JvdXBUeXBlKS5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYURhdGEgPSB2YWx1ZSA/IHZhbHVlIDogW107XHJcbiAgICAgICAgY29uc3Qgc2NoZW1hSWQgPSBzY2hlbWFEYXRhICYmIHNjaGVtYURhdGEubGVuZ3RoICYmIHNjaGVtYURhdGFbMF0gJiYgc2NoZW1hRGF0YVswXS5pZCA/IHNjaGVtYURhdGFbMF0uaWQgOiAnMSc7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge307XHJcbiAgICAgICAgcGFyYW1zWydxb01hbmFnZXJDb2RlJ10gPSBzZWxmLnFvTWFuYWdlckNvZGU7XHJcbiAgICAgICAgcGFyYW1zWydwYWdlSW5kZXgnXSA9IDA7XHJcbiAgICAgICAgcGFyYW1zWydzY2hlbWFJZCddID0gc2NoZW1hSWQ7XHJcbiAgICAgICAgcGFyYW1zWydlbnRpdHlEYXRhJ10gPSAnJztcclxuICAgICAgICBwYXJhbXNbJ2V4dGVuZENvbmQnXSA9ICcnO1xyXG4gICAgICAgIGlmIChzZWxmLmVkaXRvclBhcmFtcyAmJiBzZWxmLmVkaXRvclBhcmFtcy5keW5hbWljQ29scyAmJiBzZWxmLmVkaXRvclBhcmFtcy5keW5hbWljQ29scy5sZW5ndGgpIHtcclxuICAgICAgICAgIHNlbGYuc2NoZW1hU2VydmljZS5nZXRTcHJlYWRUZW1wbGF0ZShzY2hlbWFJZCwgc2VsZi5xdWVyeUlkLCBzZWxmLmVkaXRvclBhcmFtcy5keW5hbWljQ29scywgc2VsZi5xdWVyeVJlbGF0aXZlVXJsLCBudWxsLCBzZWxmLmVkaXRvclBhcmFtcy5keW5hbWljQ29scykuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlbGYuc2NoZW1hU2VydmljZS5nZXRDb2wocGFyYW1zLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5keW5hbWljQ29scykge1xyXG4gICAgICAgICAgICAgIHNlbGYuc2NoZW1hU2VydmljZS5nZXRTcHJlYWRUZW1wbGF0ZShzY2hlbWFJZCwgc2VsZi5xdWVyeUlkLCByZXN1bHQuZHluYW1pY0NvbHMsIHNlbGYucXVlcnlSZWxhdGl2ZVVybCwgbnVsbCwgcmVzdWx0LmR5bmFtaWNDb2xzKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29udHJvbEluaXQoKSB7XHJcbiAgICB0aGlzLmN1cnJUcmVlTm9kZSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhID0ge307XHJcbiAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzBdLmNoaWxkcmVuID0gW107XHJcbiAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmNoaWxkcmVuID0gW107XHJcbiAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzJdLmNoaWxkcmVuID0gW107XHJcbiAgICB0aGlzLnNjaGVtYURyb3BEb3duRGF0YSA9IFtdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZVNjaGVtYUlkKGlkOiBhbnksIG5ld1ZhbHVlOiBhbnkpIHtcclxuICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuICAgIGlmICghaWQpIHtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGlmIChuZXdWYWx1ZSAmJiBuZXdWYWx1ZS5zY2hlbWFMaXN0KSB7XHJcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1ZhbHVlLnNjaGVtYUxpc3QpIHtcclxuICAgICAgICBpZiAoaWQgPT09IGtleSkge1xyXG4gICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEaWFsb2dTaG93KCkge1xyXG4gICAgdGhpcy5wZXJzb25TY2hlbWEgPSAncGVyc29uU2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICAgIHRoaXMucHVibGljU2NoZW1hID0gJ3B1YmxpY1NjaGVtYScgKyBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgICB0aGlzLmRlZmF1bHRTY2hlbWEgPSAnZGVmYXVsdFNjaGVtYScgKyBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgaWYgKHRoaXMuc2NoZW1hRWRpdG9yICYmIHRoaXMuc2NoZW1hRWRpdG9yLnRhYnMpIHtcclxuICAgICAgICB0aGlzLnNjaGVtYUVkaXRvci50YWJzLnNlbGVjdFRhYigndGl0bGUnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuY2hhcnRzU2NoZW1hRWRpdG9yICYmIHRoaXMuY2hhcnRzU2NoZW1hRWRpdG9yLnRhYnMpIHtcclxuICAgICAgICB0aGlzLmNoYXJ0c1NjaGVtYUVkaXRvci50YWJzLnNlbGVjdFRhYigndHlwZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzU2hvdyA9IHRydWU7XHJcbiAgICB0aGlzLmZhcnJpc0RpYWxvZy5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEcm9wRG93bkl0ZW1DbGljayhpZDogYW55KSB7XHJcbiAgICB0aGlzLnNjaGVtYUlkID0gaWQ7XHJcbiAgICBpZiAodGhpcy5zY2hlbWFJZCA9PT0gJ3ByZWZhYicpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFNjaGVtYUlkID0gJ3NlbGVjdGVkX3ByZWZhYic7XHJcbiAgICAgIHRoaXMudHJlZU5vZGVTZWxlY3RlZCgncHVibGljX3NjaGVtYScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFNjaGVtYUlkID0gaWQ7XHJcbiAgICAgIHRoaXMudHJlZU5vZGVTZWxlY3RlZCh0aGlzLnNjaGVtYUlkKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2NoZW1hU2VsZWN0ZWQuZW1pdChpZCA9PT0gJ3ByZWZhYicgPyAnMScgOiBpZCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVUYWJzU2VsZWN0Q2hhbmdlKG9wdGlvbjogYW55KSB7XHJcbiAgICBpZiAodGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudCAmJiB0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50Lm1vZGVsVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQudXBkYXRlTW9kZWwoJ3NjaGVtYUluZm8nKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlQ3VyclNjaGVtYShvcHRpb24sICd0YWJDaGFuZ2VkJyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTY2hlbWFUeXBlU2VsZWN0KHZhbHVlOiBhbnkpIHtcclxuICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVUcmVlTm9kZVNlbGVjdGVkKGRhdGE6IGFueSkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoIXRoaXMuY3VyclRyZWVOb2RlKSB7XHJcbiAgICAgIHRoaXMuY3VyclRyZWVOb2RlQ2hhbmdlZChkYXRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChkYXRhLm5vZGUuZGF0YS5pZCAhPT0gdGhpcy5jdXJyVHJlZU5vZGUuaWQpIHtcclxuICAgICAgICBpZiAodGhpcy5zY2hlbWFFZGl0b3IgfHwgdGhpcy5jaGFydHNTY2hlbWFFZGl0b3IpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnIHx8IHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncGVyc29uX3NjaGVtYScgfHwgdGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJUcmVlTm9kZUNoYW5nZWQoZGF0YSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgY29tcGFyZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VyclNjaGVtYShudWxsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbFR5cGUgPT09ICdjaGFydHMnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEuc2VyaWVzLnR5cGUgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5zZXJpZXMudHlwZS5yZXBsYWNlKCcxJywgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5jb250cm9sVHlwZSA9PT0gJ2NoYXJ0cycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEuc2VyaWVzLnR5cGUgPSB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFWYWx1ZS5jaGFydHNUeXBlLnNlcmllcy50eXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEuc2VyaWVzLnR5cGUgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUuY2hhcnRzVHlwZS5zZXJpZXMudHlwZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29tcGFyZSA9IChKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFWYWx1ZSkgPT09XHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFOYW1lID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hTmFtZVxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5jdXJyVHJlZU5vZGUuc2NoZW1hVHlwZSA9PT0gdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVR5cGVcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuY3VyclRyZWVOb2RlLmlzRGVmYXVsdCA9PT0gdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgaWYgKGZhbHNlICYmICFjb21wYXJlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhLnNlcmllcy50eXBlICE9PSAnZWZmZWN0U2NhdHRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS5xdWVzdGlvbih0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5qdWRnZVVwZGF0ZScpLFxyXG4gICAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyVHJlZU5vZGVDaGFuZ2VkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlbWFUcmVlLnNlbGVjdE5vZGUodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYU5hbWUgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2NoZW1hVHlwZSA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEZWZhdWx0ID0gdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzRGVmYXVsdCA9PT0gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyVHJlZU5vZGVDaGFuZ2VkKGRhdGEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjdXJyVHJlZU5vZGVDaGFuZ2VkKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnIHx8IHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncGVyc29uX3NjaGVtYScgfHwgdGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdvcmdfc2NoZW1hJykpIHtcclxuICAgICAgZGVsZXRlIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXTtcclxuICAgIH1cclxuICAgIHRoaXMuY3VyclRyZWVOb2RlID0gZGF0YS5ub2RlLmRhdGE7XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdwdWJsaWNfc2NoZW1hJykge1xyXG4gICAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycgJiYgdGhpcy5jb2xMaXN0ICYmIHRoaXMuY29sTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCA9IHRoaXMuY29sTGlzdDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmlzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmlzU2NoZW1hVHlwZSA9IDA7XHJcbiAgICAgIHRoaXMuc2NoZW1hTmFtZSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5zY2hlbWVQdWJsaWMnKTtcclxuICAgICAgdGhpcy5zY2hlbWFJZCA9ICdwcmVmYWInO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ3BlcnNvbl9zY2hlbWEnKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICAgIHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gdGhpcy5jb2xMaXN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gMTtcclxuICAgICAgdGhpcy5zY2hlbWFOYW1lID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLnNjaGVtZVBlcnNvbmFsJyk7XHJcbiAgICAgIHRoaXMuc2NoZW1hSWQgPSAncHJlZmFiJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgICB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCA9IHRoaXMuY29sTGlzdDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmlzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmlzU2NoZW1hVHlwZSA9IDI7XHJcbiAgICAgIHRoaXMuc2NoZW1hTmFtZSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5zY2hlbWVPcmcnKTtcclxuICAgICAgdGhpcy5zY2hlbWFJZCA9ICdwcmVmYWInO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0RlZmF1bHQgPSB0aGlzLmN1cnJUcmVlTm9kZS5pc0RlZmF1bHQgPT09IDEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gdGhpcy5jdXJyVHJlZU5vZGUuc2NoZW1hVHlwZSAtIDA7XHJcbiAgICAgIHRoaXMuc2NoZW1hTmFtZSA9IHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYU5hbWU7XHJcbiAgICAgIHRoaXMuc2NoZW1hSWQgPSB0aGlzLmN1cnJUcmVlTm9kZS5pZDtcclxuICAgIH1cclxuICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyVHJlZU5vZGUpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJlZU5vZGVTZWxlY3RlZChpZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnNjaGVtYVRyZWUuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICBpZiAoaWQpIHtcclxuICAgICAgdGhpcy5zY2hlbWFUcmVlLnNlbGVjdE5vZGUoaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25SZXNpemVkKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuc2l6ZS5oZWlnaHQgPSBldmVudC5uZXdIZWlnaHQgfHwgMzAwO1xyXG4gICAgdGhpcy5zaXplLndpZHRoID0gZXZlbnQubmV3V2lkdGg7XHJcbiAgICBpZiAodGhpcy5zY2hlbWFUcmVlKSB7XHJcbiAgICAgIHRoaXMuc2NoZW1hVHJlZS5yZXNpemUodGhpcy5zaXplKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVNhdmVBc0NsaWNrKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnVwZGF0ZUN1cnJTY2hlbWEobnVsbCwgJ3NhdmVfYXMnKTtcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddKSB7XHJcbiAgICAgIGlmICh0aGlzLm9wZXJhdGlvbnNbJ1FkcE1vZGlmeVB1YmxpY1NjaGVtYSddID09PSBmYWxzZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddLnNjaGVtYVR5cGUgPT09IDApIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5xZHBNb2RpZnlQdWJsaWNTY2hlbWEnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ10pO1xyXG4gICAgICBjb25zdCBzY2hlbWEgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgIHNjaGVtYS5xdWVyeUlkID0gdGhpcy5xdWVyeUlkO1xyXG4gICAgICBzY2hlbWEuc2NoZW1hVmFsdWUgPSBKU09OLnN0cmluZ2lmeShzY2hlbWEuc2NoZW1hVmFsdWUpO1xyXG4gICAgICBpZiAoIXNjaGVtYS5zY2hlbWFOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUubm90TnVsbCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5jYWNoZVNjaGVtYURhdGEpIHtcclxuICAgICAgICAgIGlmIChrZXkgIT09ICdwdWJsaWNfc2NoZW1hJyAmJiBrZXkgIT09ICdwZXJzb25fc2NoZW1hJyAmJiBrZXkgIT09ICdvcmdfc2NoZW1hJyAmJiBrZXkgIT09IHNjaGVtYS5pZCAmJiBzY2hlbWEuc2NoZW1hTmFtZSA9PT0gdGhpcy5jYWNoZVNjaGVtYURhdGFba2V5XS5zY2hlbWFOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmV4aXN0cycpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQgJiYgIXRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQubW9kZWxWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICB0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50LnVwZGF0ZU1vZGVsKCdzY2hlbWFJbmZvJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgICBpZiAodGhpcy5jcm9zc3RhYkNvbHVtblZhbGlkYXRlKHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ10uc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpKSB7XHJcbiAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5jcm9zc3RhYlZhbHVlRGltZW5zaW9uJykpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoc2NoZW1hLnNjaGVtYU5hbWUgJiYgc2NoZW1hLnNjaGVtYU5hbWUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUudG9vTG9uZycpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdGV4dFNvcnRDb2x1bW4gPSB7IGlzVGV4dDogW10gfTtcclxuICAgICAgdGhpcy5nZXRUZXh0Q29sdW1uU29ydChzY2hlbWEsIHRleHRTb3J0Q29sdW1uKTtcclxuICAgICAgaWYgKHRleHRTb3J0Q29sdW1uLmlzVGV4dC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0ZXh0U29ydENvbHVtbi5pc1RleHRbMF0gKyAnICcgKyB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS50ZXh0Q29sdW1uU29ydCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2NoZW1hLmlkID0gJyc7XHJcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gdGhpcy5jYWNoZS5nZXQodGhpcy50YWJJZCArICdvcmdhbml6YXRpb25JZCcpIHx8ICcnO1xyXG4gICAgICBzY2hlbWEub3JnSWQgPSBvcmdhbml6YXRpb25JZDtcclxuICAgICAgdGhpcy5zY2hlbWFTZXJ2aWNlLnNhdmVTY2hlbWEoeyBzY2hlbWE6IEpTT04uc3RyaW5naWZ5KHNjaGVtYSksIGdyb3VwVHlwZTogdGhpcy5ncm91cFR5cGUgfSwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2NoZW1hSWQgPSAnJztcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmlzRGVmYXVsdFNjaGVtYSAmJiBkYXRhLmlzRGVmYXVsdFNjaGVtYS5pZCkge1xyXG4gICAgICAgICAgdGhpcy5zY2hlbWFJZCA9IGRhdGEuaXNEZWZhdWx0U2NoZW1hLmlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2VbJ3N1Y2Nlc3MnXSh7XHJcbiAgICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuaW5mby50aXRsZScpLCBtc2c6IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnNhdmUuc3VjY2VzcycpLCB0aW1lb3V0OiAzMDAwXHJcbiAgICAgICAgfSBhcyBOb3RpZnlPcHRpb25zKTtcclxuICAgICAgICB0aGlzLnNhdmVBc1NjaGVtYS5lbWl0KCk7XHJcbiAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgc2VsZi5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmVtb3ZlQ2xpY2soKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgaWYgKHRoaXMub3BlcmF0aW9uc1snUWRwTW9kaWZ5UHVibGljU2NoZW1hJ10gPT09IGZhbHNlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFUeXBlID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUucWRwTW9kaWZ5UHVibGljU2NoZW1hJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkICYmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgPT09IDEgfHwgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkID09PSAnMScpKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuaXNQcm90ZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwdWJsaWNfc2NoZW1hJyAmJlxyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmXHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAnb3JnX3NjaGVtYScpIHtcclxuICAgICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IHRoaXMuY2FjaGUuZ2V0KHRoaXMudGFiSWQgKyAnb3JnYW5pemF0aW9uSWQnKSB8fCAnJztcclxuICAgICAgICB0aGlzLnNjaGVtYVNlcnZpY2UuZGVsZXRlU2NoZW1hKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCwgdGhpcy5xdWVyeUlkLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwsIHRoaXMuZ3JvdXBUeXBlLCBvcmdhbml6YXRpb25JZCkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgIGRhdGEuc3Vic2NyaWJlKCh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hSWQgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlWydzdWNjZXNzJ10oe1xyXG4gICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5pbmZvLnRpdGxlJyksIG1zZzogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuZGVsZXRlLnN1Y2Nlc3MnKSwgdGltZW91dDogMzAwMFxyXG4gICAgICAgICAgICB9IGFzIE5vdGlmeU9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNjaGVtYS5lbWl0KCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LCAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgc2VsZi5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuaW5mby5kZWxldGUnKSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubXNnU2VydmljZS5pbmZvKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLmluZm8uZGVsZXRlJykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2F2ZUNsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkge1xyXG4gICAgICBpZiAodGhpcy5vcGVyYXRpb25zWydRZHBNb2RpZnlQdWJsaWNTY2hlbWEnXSA9PT0gZmFsc2UgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVR5cGUgPT09IDAgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAncHVibGljX3NjaGVtYScgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAncGVyc29uX3NjaGVtYScgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAnb3JnX3NjaGVtYScpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5xZHBNb2RpZnlQdWJsaWNTY2hlbWEnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZUN1cnJTY2hlbWEobnVsbCk7XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGEgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKSB7XHJcbiAgICAgIGlmICh0aGlzLm9wZXJhdGlvbnNbJ1FkcE1vZGlmeVB1YmxpY1NjaGVtYSddID09PSBmYWxzZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVHlwZSA9PT0gMCAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwdWJsaWNfc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwZXJzb25fc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnFkcE1vZGlmeVB1YmxpY1NjaGVtYScpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pc1Byb3RlY3RlZCAmJiAodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkID09PSAxIHx8IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pc1Byb3RlY3RlZCA9PT0gJzEnKSkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS5pbmZvKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmlzUHJvdGVjdGVkJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pO1xyXG4gICAgICBjb25zdCBzY2hlbWEgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgIGlmIChzY2hlbWEuaWQgPT09ICdwdWJsaWNfc2NoZW1hJyB8fCBzY2hlbWEuaWQgPT09ICdwZXJzb25fc2NoZW1hJyB8fCBzY2hlbWEuaWQgPT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgIHNjaGVtYS5pZCA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIHNjaGVtYS5xdWVyeUlkID0gdGhpcy5xdWVyeUlkO1xyXG4gICAgICBzY2hlbWEuc2NoZW1hVmFsdWUgPSBKU09OLnN0cmluZ2lmeShzY2hlbWEuc2NoZW1hVmFsdWUpO1xyXG4gICAgICBpZiAoIXNjaGVtYS5zY2hlbWFOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUubm90TnVsbCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5jYWNoZVNjaGVtYURhdGEpIHtcclxuICAgICAgICAgIGlmIChrZXkgIT09ICdwdWJsaWNfc2NoZW1hJyAmJiBrZXkgIT09ICdwZXJzb25fc2NoZW1hJyAmJiBrZXkgIT09ICdvcmdfc2NoZW1hJyAmJiBrZXkgIT09IHNjaGVtYS5pZCAmJiBzY2hlbWEuc2NoZW1hTmFtZSA9PT0gdGhpcy5jYWNoZVNjaGVtYURhdGFba2V5XS5zY2hlbWFOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmV4aXN0cycpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQgJiYgIXRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQubW9kZWxWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICB0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50LnVwZGF0ZU1vZGVsKCdzY2hlbWFJbmZvJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgICBpZiAodGhpcy5jcm9zc3RhYkNvbHVtblZhbGlkYXRlKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCkpIHtcclxuICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmNyb3NzdGFiVmFsdWVEaW1lbnNpb24nKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChzY2hlbWEuc2NoZW1hTmFtZSAmJiBzY2hlbWEuc2NoZW1hTmFtZS5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS50b29Mb25nJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0ZXh0U29ydENvbHVtbiA9IHsgaXNUZXh0OiBbXSB9O1xyXG4gICAgICB0aGlzLmdldFRleHRDb2x1bW5Tb3J0KHNjaGVtYSwgdGV4dFNvcnRDb2x1bW4pO1xyXG4gICAgICBpZiAodGV4dFNvcnRDb2x1bW4uaXNUZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRleHRTb3J0Q29sdW1uLmlzVGV4dFswXSArICcgJyArIHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnRleHRDb2x1bW5Tb3J0JykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IHRoaXMuY2FjaGUuZ2V0KHRoaXMudGFiSWQgKyAnb3JnYW5pemF0aW9uSWQnKSB8fCAnJztcclxuICAgICAgc2NoZW1hLm9yZ0lkID0gb3JnYW5pemF0aW9uSWQ7XHJcbiAgICAgIHRoaXMuc2NoZW1hU2VydmljZS5zYXZlU2NoZW1hKHsgc2NoZW1hOiBKU09OLnN0cmluZ2lmeShzY2hlbWEpLCBncm91cFR5cGU6IHRoaXMuZ3JvdXBUeXBlIH0sIHRoaXMucXVlcnlSZWxhdGl2ZVVybCkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmlzRGVmYXVsdFNjaGVtYSAmJiBkYXRhLmlzRGVmYXVsdFNjaGVtYS5pZCkge1xyXG4gICAgICAgICAgdGhpcy5zY2hlbWFJZCA9IGRhdGEuaXNEZWZhdWx0U2NoZW1hLmlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVtYUlkID0gdGhpcy5zY2hlbWFJZCA9PT0gJ3ByZWZhYicgPyAnJyA6IHRoaXMuc2NoZW1hSWQ7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlWydzdWNjZXNzJ10oe1xyXG4gICAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLmluZm8udGl0bGUnKSwgbXNnOiB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5zYXZlLnN1Y2Nlc3MnKSwgdGltZW91dDogMzAwMFxyXG4gICAgICAgIH0gYXMgTm90aWZ5T3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy50cmVlTm9kZVNlbGVjdGVkKHRoaXMuc2NoZW1hSWQpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVNjaGVtYS5lbWl0KCk7XHJcbiAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2F2ZUFuZENsb3NlQ2xpY2soKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGEgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKSB7XHJcbiAgICAgIGlmICh0aGlzLm9wZXJhdGlvbnNbJ1FkcE1vZGlmeVB1YmxpY1NjaGVtYSddID09PSBmYWxzZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVHlwZSA9PT0gMCAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwdWJsaWNfc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwZXJzb25fc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnFkcE1vZGlmeVB1YmxpY1NjaGVtYScpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlQ3VyclNjaGVtYShudWxsKTtcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgaWYgKHRoaXMub3BlcmF0aW9uc1snUWRwTW9kaWZ5UHVibGljU2NoZW1hJ10gPT09IGZhbHNlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFUeXBlID09PSAwICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUucWRwTW9kaWZ5UHVibGljU2NoZW1hJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkICYmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgPT09IDEgfHwgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkID09PSAnMScpKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuaXNQcm90ZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSk7XHJcbiAgICAgIGNvbnN0IHNjaGVtYSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgaWYgKHNjaGVtYS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnIHx8IHNjaGVtYS5pZCA9PT0gJ3BlcnNvbl9zY2hlbWEnIHx8IHNjaGVtYS5pZCA9PT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgc2NoZW1hLmlkID0gJyc7XHJcbiAgICAgIH1cclxuICAgICAgc2NoZW1hLnF1ZXJ5SWQgPSB0aGlzLnF1ZXJ5SWQ7XHJcbiAgICAgIHNjaGVtYS5zY2hlbWFWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHNjaGVtYS5zY2hlbWFWYWx1ZSk7XHJcbiAgICAgIGlmICghc2NoZW1hLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5ub3ROdWxsJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNhY2hlU2NoZW1hRGF0YSkge1xyXG4gICAgICAgICAgaWYgKGtleSAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIGtleSAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIGtleSAhPT0gJ29yZ19zY2hlbWEnICYmIGtleSAhPT0gc2NoZW1hLmlkICYmIHNjaGVtYS5zY2hlbWFOYW1lID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVtrZXldLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuZXhpc3RzJykpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudCAmJiAhdGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudC5tb2RlbFZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQudXBkYXRlTW9kZWwoJ3NjaGVtYUluZm8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICAgIGlmICh0aGlzLmNyb3NzdGFiQ29sdW1uVmFsaWRhdGUodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KSkge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuY3Jvc3N0YWJWYWx1ZURpbWVuc2lvbicpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNjaGVtYS5zY2hlbWFOYW1lICYmIHNjaGVtYS5zY2hlbWFOYW1lLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnRvb0xvbmcnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHRleHRTb3J0Q29sdW1uID0geyBpc1RleHQ6IFtdIH07XHJcbiAgICAgIHRoaXMuZ2V0VGV4dENvbHVtblNvcnQoc2NoZW1hLCB0ZXh0U29ydENvbHVtbik7XHJcbiAgICAgIGlmICh0ZXh0U29ydENvbHVtbi5pc1RleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGV4dFNvcnRDb2x1bW4uaXNUZXh0WzBdICsgJyAnICsgdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUudGV4dENvbHVtblNvcnQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gdGhpcy5jYWNoZS5nZXQodGhpcy50YWJJZCArICdvcmdhbml6YXRpb25JZCcpIHx8ICcnO1xyXG4gICAgICBzY2hlbWEub3JnSWQgPSBvcmdhbml6YXRpb25JZDtcclxuICAgICAgdGhpcy5zY2hlbWFTZXJ2aWNlLnNhdmVTY2hlbWEoeyBzY2hlbWE6IEpTT04uc3RyaW5naWZ5KHNjaGVtYSksIGdyb3VwVHlwZTogdGhpcy5ncm91cFR5cGUgfSwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hLmlkKSB7XHJcbiAgICAgICAgICB0aGlzLnNjaGVtYUlkID0gZGF0YS5pc0RlZmF1bHRTY2hlbWEuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZW1hSWQgPSB0aGlzLnNjaGVtYUlkID09PSAncHJlZmFiJyA/ICcnIDogdGhpcy5zY2hlbWFJZDtcclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2VbJ3N1Y2Nlc3MnXSh7XHJcbiAgICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuaW5mby50aXRsZScpLCBtc2c6IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnNhdmUuc3VjY2VzcycpLCB0aW1lb3V0OiAzMDAwXHJcbiAgICAgICAgfSBhcyBOb3RpZnlPcHRpb25zKTtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlU2VsZWN0ZWQodGhpcy5zY2hlbWFJZCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQW5kQ2xvc2VTY2hlbWEuZW1pdCgpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudG1vZGUpIHtcclxuICAgICAgICAgIHRoaXMuZmFycmlzRGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZm9ybUVycm9yU2VydmljZS5leGNlcHRpb24oZXJyb3IuTWVzc2FnZSwgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZWJlZm9yZUNsb3NlID0gKCk6IE9ic2VydmFibGU8YW55PiA9PiB7XHJcbiAgICBsZXQgaWQ6IGFueSA9ICcnO1xyXG4gICAgaWYgKHRoaXMuc2NoZW1hSWQpIHtcclxuICAgICAgaWQgPSB0aGlzLnNjaGVtYUlkID09PSAncHJlZmFiJyA/ICcxJyA6IHRoaXMuc2NoZW1hSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkICYmIHRoaXMuc2NoZW1hSW5mbyAmJiB0aGlzLnNjaGVtYUluZm8uaXNEZWZhdWx0U2NoZW1hKSB7XHJcbiAgICAgIGlkID0gdGhpcy5zY2hlbWFJbmZvLmlzRGVmYXVsdFNjaGVtYS5pZDtcclxuICAgIH1cclxuICAgIHRoaXMuZGlhbG9nQmVmb3JlQ2xvc2UuZW1pdChpZCk7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUN1cnJTY2hlbWEob3B0aW9uczogYW55LCB0eXBlPzogYW55KSB7XHJcbiAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgdGhpcy51cGRhdGVMaXN0U2NoZW1hKG9wdGlvbnMsIHR5cGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51cGRhdGVDaGFydHNTY2hlbWEob3B0aW9ucywgdHlwZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUxpc3RTY2hlbWEob3B0aW9uczogYW55LCB0eXBlPzogYW55KSB7XHJcbiAgICBsZXQgb3B0aW9uID0gb3B0aW9ucztcclxuICAgIGlmICghb3B0aW9uKSB7XHJcbiAgICAgIGlmICh0aGlzLnNjaGVtYUVkaXRvcikge1xyXG4gICAgICAgIG9wdGlvbiA9IHRoaXMuc2NoZW1hRWRpdG9yLmdldE9wdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGEgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKSB7XHJcbiAgICAgIGxldCBzSWQgPSB0aGlzLmN1cnJUcmVlTm9kZS5pZDtcclxuICAgICAgaWYgKHR5cGUgPT09ICdzYXZlX2FzJykge1xyXG4gICAgICAgIHNJZCA9ICdwdWJsaWNfc2NoZW1hJztcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pKTtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLmlkID0gc0lkO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnRpdGxlT3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS50aXRsZU9wdGlvbiA9IG9wdGlvbi50aXRsZU9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5jb2x1bW5PcHRpb24gJiYgb3B0aW9uLmNvbHVtbk9wdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gb3B0aW9uLmNvbHVtbk9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zdHlsZU9wdGlvbikge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuc3R5bGVPcHRpb24gPSBvcHRpb24uc3R5bGVPcHRpb247XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24ub3RoZXJPcHRpb24pIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLm90aGVyT3B0aW9uID0gb3B0aW9uLm90aGVyT3B0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlICE9PSAndGFiQ2hhbmdlZCcpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYU5hbWUgPSB0aGlzLnNjaGVtYU5hbWU7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFUeXBlID0gdGhpcy5pc1NjaGVtYVR5cGU7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5pc0RlZmF1bHQgPSB0aGlzLmlzRGVmYXVsdCA/IDEgOiAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUNoYXJ0c1NjaGVtYShvcHRpb25zOiBhbnksIHR5cGU/OiBhbnkpIHtcclxuICAgIGxldCBvcHRpb24gPSBvcHRpb25zO1xyXG4gICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgaWYgKHRoaXMuY2hhcnRzU2NoZW1hRWRpdG9yKSB7XHJcbiAgICAgICAgb3B0aW9uID0gdGhpcy5jaGFydHNTY2hlbWFFZGl0b3IuZ2V0T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgbGV0IHNJZCA9IHRoaXMuY3VyclRyZWVOb2RlLmlkO1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3NhdmVfYXMnKSB7XHJcbiAgICAgICAgc0lkID0gJ3B1YmxpY19zY2hlbWEnO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uaWQgPSBzSWQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uY2hhcnRzVHlwZSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzVHlwZSA9IG9wdGlvbi5jaGFydHNUeXBlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLmNoYXJ0c0RhdGEpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEgPSBvcHRpb24uY2hhcnRzRGF0YTtcclxuICAgICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5ncm91cFN1bW1hcnlTZXQpIHtcclxuICAgICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWVbJ2dyb3VwU3VtbWFyeVNldCddID0gb3B0aW9uLmdyb3VwU3VtbWFyeVNldDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uY2hhcnRzU3R5bGUpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1N0eWxlID0gb3B0aW9uLmNoYXJ0c1N0eWxlO1xyXG4gICAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLmN1c3RvbU9wdGlvbikge1xyXG4gICAgICAgICAgaWYgKG9wdGlvbi5jdXN0b21PcHRpb24gPT09ICdlcnJvcicpIHtcclxuICAgICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuY3Jvc3N0YWJWYWx1ZURpbWVuc2lvbicpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlWydjdXN0b21PcHRpb24nXSA9IG9wdGlvbi5jdXN0b21PcHRpb247XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhLnNlcmllcy50eXBlID0gdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNUeXBlLnNlcmllcy50eXBlO1xyXG4gICAgICBpZiAodGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhLmxlZ2VuZCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzU3R5bGUubGVnZW5kLnNob3cgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEubGVnZW5kLnNob3c7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNTdHlsZS5sZWdlbmQuZGF0YSA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5sZWdlbmQuZGF0YTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZSAhPT0gJ3RhYkNoYW5nZWQnKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFOYW1lID0gdGhpcy5zY2hlbWFOYW1lO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVHlwZSA9IHRoaXMuaXNTY2hlbWFUeXBlO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uaXNEZWZhdWx0ID0gdGhpcy5pc0RlZmF1bHQgPyAxIDogMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcm9zc3RhYkNvbHVtblZhbGlkYXRlKGNvbHVtbnM6IGFueSkge1xyXG4gICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlID09PSAnY3Jvc3N0YWInKSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChjb2x1bW5zW2ldLmdyb3VwQWdncmUgIT09IDQgJiYgY29sdW1uc1tpXS50b3RhbEFnZ3JlICE9PSA0KSB7XHJcbiAgICAgICAgICBpZiAoKGNvbHVtbnNbaV0uZGltZW5zaW9uIC0gMCkgPT09IDMgJiYgISdpbnQsaW50ZWdlcixmbG9hdCxkb3VibGUsZGVjaW1hbCxudW1iZXInLmluY2x1ZGVzKGNvbHVtbnNbaV0udHlwZSA/IGNvbHVtbnNbaV0udHlwZS50b0xvd2VyQ2FzZSgpIDogJycpKSB7XHJcbiAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmbGFnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvYmplY3RDb3B5KG9iajogYW55KSB7XHJcbiAgICBjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopO1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxuICB9XHJcblxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUhvdmVyKHR5cGU6IGFueSwgc3RhdGU6IGFueSkge1xyXG4gICAgdGhpcy5zdmdTY2hlbWEgPSBzdGF0ZSA9PT0gMTtcclxuICB9XHJcblxyXG4gIGdldFRleHRDb2x1bW5Tb3J0KHNjaGVtYTogYW55LCBwYXJhbXM6IGFueSkge1xyXG4gICAgbGV0IHNjaGVtYVZhbHVlO1xyXG4gICAgaWYgKHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hLnNjaGVtYVZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICBzY2hlbWFWYWx1ZSA9IEpTT04ucGFyc2Uoc2NoZW1hLnNjaGVtYVZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNjaGVtYVZhbHVlID0gc2NoZW1hLnNjaGVtYVZhbHVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbiAmJiBzY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCAmJiBzY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdC5sZW5ndGgpIHtcclxuICAgICAgc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QuZm9yRWFjaCgoY29sOiBhbnkpID0+IHtcclxuICAgICAgICB0aGlzLnJlY3Vyc2l2ZVRleHRDb2x1bW5Tb3J0KGNvbCwgbnVsbCwgcGFyYW1zKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlY3Vyc2l2ZVRleHRDb2x1bW5Tb3J0KGNvbCwgY29sTGlzdCwgcGFyYW1zKSB7XHJcbiAgICBpZiAoY29sTGlzdCA9PSBudWxsKSB7XHJcbiAgICAgIGlmIChjb2wuY2hpbGRMaXN0ICYmIGNvbC5jaGlsZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5yZWN1cnNpdmVUZXh0Q29sdW1uU29ydChudWxsLCBjb2wuY2hpbGRMaXN0LCBwYXJhbXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChjb2wudHlwZSAmJiBjb2wudHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGV4dCcgJiYgY29sLnNvcnQgPiAwKSB7XHJcbiAgICAgICAgICBwYXJhbXMuaXNUZXh0LnB1c2goY29sLmJpbmRGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhcmFtcy5jb2xJbmRleCsrO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoY29sTGlzdFtpXS5jaGlsZExpc3QgJiYgY29sTGlzdFtpXS5jaGlsZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnJlY3Vyc2l2ZVRleHRDb2x1bW5Tb3J0KG51bGwsIGNvbExpc3RbaV0uY2hpbGRMaXN0LCBwYXJhbXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY29sTGlzdFtpXS50eXBlICYmIGNvbExpc3RbaV0udHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGV4dCcgJiYgY29sTGlzdFtpXS5zb3J0ID4gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuaXNUZXh0LnB1c2goY29sTGlzdFtpXS5iaW5kRmllbGQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFyYW1zLmNvbEluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==