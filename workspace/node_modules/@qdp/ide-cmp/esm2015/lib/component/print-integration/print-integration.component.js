/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, Optional, Injector } from '@angular/core';
import { PrintIntegrationService } from '../../service/print-integration/print-integration.service';
import { DialogComponent } from '@farris/ui-dialog';
import { CacheService } from '@ecp-caf/caf-common';
import { of } from 'rxjs';
import { EventBus } from '@qdp/common';
import { LocalizeService } from '@qdp/localize';
import { MessagerService } from '@farris/ui-messager';
export class PrintIntegrationComponent {
    /**
     * @param {?} printIntegrationService
     * @param {?} cache
     * @param {?} injector
     */
    constructor(printIntegrationService, cache, injector) {
        this.printIntegrationService = printIntegrationService;
        this.cache = cache;
        this.injector = injector;
        // 是否嵌入式表单
        this.printIntegration = new EventEmitter();
        this.printPreview = new EventEmitter();
        this.dialogBeforeClose = new EventEmitter();
        this.printIntegrationData = {
            distributionSelectValue: 0,
            pageSizeSelectValue: 0,
            marginSelectValue: 0,
            zoomSize: 0
        };
        this.zoomSize = 100; // 缩放
        this.distributionData = [
            { name: '横向', value: 1 },
            { name: '纵向', value: 0 }
        ];
        this.pageSizeData = [
            { name: '信纸', value: 1 },
            { name: 'Tabloid', value: 3 },
            { name: '法律专用纸', value: 5 },
            { name: 'Statement', value: 6 },
            { name: 'A3', value: 8 },
            { name: 'A4', value: 9 },
            { name: 'A5', value: 11 },
            { name: 'B4 (JIS)', value: 12 },
            { name: 'B5 (JIS)', value: 13 }
        ];
        this.marginData = [
            { name: '默认', value: 0, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } },
            { name: '无', value: 1, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },
            { name: '最小值', value: 2, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },
            { name: '自定义', value: 3, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } }
        ];
        this.size = {};
        this.marginTop = 1;
        this.marginLeft = 1;
        this.marginBottom = 1;
        this.marginRight = 1;
        // 纸张尺寸
        this.marginSelectValue = 0; // 边距
        // 边距
        this.currentMarginData = this.marginData[0];
        this.isShowCustom = false;
        this.svgPrint = true;
        this.handlebeforeClose = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const self = this;
            self.currentMarginData.margin.marginTop = this.marginTop;
            self.currentMarginData.margin.marginLeft = this.marginLeft;
            self.currentMarginData.margin.marginBottom = this.marginBottom;
            self.currentMarginData.margin.marginRight = this.marginRight;
            self.printIntegrationData = {
                distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),
                pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),
                marginSelectValue: self.currentMarginData,
                // self.findItem(self.marginData, self.marginSelectValue),
                zoomSize: self.zoomSize
            };
            if (self.printIntegrationData) {
                // tslint:disable-next-line:max-line-length
                self.saveDatas = { Id: EventBus.guid(), printintegration: JSON.stringify(self.printIntegrationData), queryid: self.queryId, schemaId: self.schemaId };
                self.printIntegrationService.savePrintIntegration(self.saveDatas, self.queryRelativeUrl)
                    .subscribe();
            }
            return of(true);
        });
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.msgService = this.injector.get(MessagerService);
            this.distributionData = this.localizeService.getValue('ideCmp.printOption.distributionData');
            this.pageSizeData = this.localizeService.getValue('ideCmp.printOption.pageSizeData');
            this.marginData = this.localizeService.getValue('ideCmp.printOption.marginData');
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    handleDialogShow() {
        if (this.queryId) {
            this.schemaId = this.cache.get('schema_schemaid' + this.queryId);
            this.printIntegrationService.getPrintIntegration(this.schemaId, this.queryId, this.queryRelativeUrl).subscribe((/**
             * @param {?} value
             * @return {?}
             */
            value => {
                if (value) {
                    // this.printIntegrationData = value ? value : [];
                    this.distributionSelectValue = value.printintegration.distributionSelectValue.value;
                    this.pageSizeSelectValue = value.printintegration.pageSizeSelectValue.value;
                    this.marginSelectValue = value.printintegration.marginSelectValue.value;
                    this.currentMarginData = value.printintegration.marginSelectValue;
                    this.marginTop = value.printintegration.marginSelectValue.margin.marginTop;
                    this.marginLeft = value.printintegration.marginSelectValue.margin.marginLeft;
                    this.marginBottom = value.printintegration.marginSelectValue.margin.marginBottom;
                    this.marginRight = value.printintegration.marginSelectValue.margin.marginRight;
                    this.zoomSize = value.printintegration.zoomSize;
                }
                else {
                    this.distributionSelectValue = this.distributionData[0].value;
                    this.pageSizeSelectValue = this.pageSizeData[5].value;
                    this.marginSelectValue = this.marginData[0].value;
                    this.currentMarginData = this.marginData[0];
                }
                this.farrisDialog.show();
            }));
        }
        this.farrisDialog.show();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onResized(event) {
        this.size.height = event.newHeight;
        this.size.width = event.newWidth;
    }
    /**
     * @param {?} type
     * @return {?}
     */
    clickConfirm(type) {
        /** @type {?} */
        const self = this;
        if (!self.currentMarginData) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.margin'));
            return;
        }
        self.currentMarginData.margin.marginTop = this.marginTop;
        self.currentMarginData.margin.marginLeft = this.marginLeft;
        self.currentMarginData.margin.marginBottom = this.marginBottom;
        self.currentMarginData.margin.marginRight = this.marginRight;
        self.printIntegrationData = {
            distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),
            pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),
            marginSelectValue: self.currentMarginData,
            // self.findItem(self.marginData, self.marginSelectValue),
            zoomSize: self.zoomSize
        };
        if (!self.printIntegrationData.distributionSelectValue) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.distribution'));
            return;
        }
        if (!self.printIntegrationData.pageSizeSelectValue) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.pageSize'));
            return;
        }
        if (type === 'preview') {
            self.printPreview.emit(self.printIntegrationData);
        }
        else {
            self.printIntegration.emit(self.printIntegrationData);
        }
        self.farrisDialog.close();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onValueChange(value) {
        this.currentMarginData = this.marginData[value.value];
        if (value.value === 3) {
            this.farrisDialog.height = 350;
        }
        else {
            this.farrisDialog.height = 220;
        }
    }
    /**
     * @private
     * @param {?} list
     * @param {?} id
     * @return {?}
     */
    findItem(list, id) {
        /** @type {?} */
        let item = null;
        if (list && list.length) {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < list.length; i++) {
                if (list[i].value === id) {
                    item = list[i];
                    break;
                }
            }
        }
        return item;
    }
    /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    handleHover(type, state) {
        this.svgPrint = state === 1;
    }
}
PrintIntegrationComponent.decorators = [
    { type: Component, args: [{
                selector: 'print-integration',
                template: "<div class=\"btn-group\" fDropdown>\r\n  <button id=\"printBtn\" class=\"btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0\" type=\"button\" (click)=\"handleDialogShow()\" (mouseenter)=\"handleHover(0, 0)\" (mouseleave)=\"handleHover(0, 1)\">\r\n    <span class=\"f-icon\" role=\"presentation\">\r\n      <img *ngIf=\"svgPrint\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZGVmcz48cGF0aCBkPSdNMTQuNjI1LDEzLjgyMTU1IEwxNC42MjUsMTcuMSBMMy4zNzUsMTcuMSBMMy4zNzUsMTMuODIxNTUgTDAsMTMuODIxNTUgTDAsNi43MTgwOTk5OSBDMCw2LjU3MzYgMC4wNTk0LDYuNDM0MTk5OTkgMC4xNjQ3LDYuMzMxMzUgQzAuMjY4OTQyOTk5LDYuMjI5NDQxNTEgMC40MTI0Njc5MzksNi4xNzE3ODYxOSAwLjU2MjUwMDAwNyw2LjE3MTU1MDAxIEwxNy40Mzc1LDYuMTcxNTUwMDEgQzE3LjU4NjksNi4xNzE1NTAwMSAxNy43Myw2LjIyOTM1IDE3LjgzNTMsNi4zMzEzNSBDMTcuOTQwNiw2LjQzMzM1IDE4LDYuNTcyNzQ5OTkgMTgsNi43MTgwOTk5OSBMMTgsMTMuODIxNTUgTDE0LjYyNSwxMy44MjE1NSBaIE01LjYyNSwxMS42MzUzNSBMNS42MjUsMTQuOTE0NjUgTDEyLjM3NSwxNC45MTQ2NSBMMTIuMzc1LDExLjYzNDUgTDUuNjI1LDExLjYzNDUgTDUuNjI1LDExLjYzNTM1IFogTTE1LjE4NzUsMTAuMDA5MyBDMTUuNDg1NCwxMC4wMDkzIDE1Ljc3MjUsOS44OTQ1NTAwMSAxNS45ODMxLDkuNjg5NyBDMTYuMTkzNyw5LjQ4NDg0OTk5IDE2LjMxMjUsOS4yMDY4OTk5OSAxNi4zMTI1LDguOTE2MTk5OTkgQzE2LjMxMjUsOC42MjcxOTk5OSAxNi4xOTM3LDguMzQ5MjQ5OTkgMTUuOTgzMSw4LjE0MzU0OTk5IEMxNS43NzQ1NTQ0LDcuOTM5ODE0ODIgMTUuNDg3NTQzLDcuODI0NTE5NjQgMTUuMTg3NSw3LjgyMzk1MDAxIEMxNC44ODk2LDcuODIzOTUwMDEgMTQuNjAyNSw3LjkzODcwMDAxIDE0LjM5MTksOC4xNDM1NDk5OSBDMTQuMTc5NzgwMSw4LjM1MTEyMDg2IDE0LjA2MTYyNTUsOC42Mjg1NzI0NSAxNC4wNjI0OTUyLDguOTE3MDUgQzE0LjA2MjQ5NTIsOS4yMDYwNTAwMSAxNC4xODEzLDkuNDg0ODQ5OTkgMTQuMzkxOSw5LjY4OTcgQzE0LjYwMzQsOS44OTM3IDE0Ljg4OTYsMTAuMDA5MyAxNS4xODc1LDEwLjAwOTMgTDE1LjE4NzUsMTAuMDA5MyBaJyBpZD0ncGF0aC0xJz48L3BhdGg+PC9kZWZzPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9J+S6pOS6kuaWueahiDEt5bi46KeE5oCB5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTYxLjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTQnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDE1NS4wMDAwMDAsIDEyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTblpIfku70nPjxtYXNrIGlkPSdtYXNrLTInIGZpbGw9J3doaXRlJz48dXNlIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvbWFzaz48dXNlIGlkPSflvaLnirYnIGZpbGw9JyM4QTk4QkUnIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvZz48cGF0aCBkPSdNMy44MjUsMS44IEwxNC4xNzUsMS44IEMxNC40MjM1MjgxLDEuOCAxNC42MjUsMi4wMDE0NzE4NiAxNC42MjUsMi4yNSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDE0LjYyNSw1LjA3ODQ0OTk5IEwzLjM3NSw1LjA3ODQ0OTk5IEwzLjM3NSwyLjI1IEMzLjM3NSwyLjAwMTQ3MTg2IDMuNTc2NDcxODYsMS44IDMuODI1LDEuOCBaJyBpZD0n55+p5b2iJyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjUnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+\" style=\"width: 16px; height: 16px; display: block;\" />\r\n      <img *ngIf=\"!svgPrint\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGRlZnM+PHBhdGggZD0nTTE0LjYyNSwxMy44MjE1NSBMMTQuNjI1LDE3LjEgTDMuMzc1LDE3LjEgTDMuMzc1LDEzLjgyMTU1IEwwLDEzLjgyMTU1IEwwLDYuNzE4MDk5OTkgQzAsNi41NzM2IDAuMDU5NCw2LjQzNDE5OTk5IDAuMTY0Nyw2LjMzMTM1IEMwLjI2ODk0Mjk5OSw2LjIyOTQ0MTUxIDAuNDEyNDY3OTM5LDYuMTcxNzg2MTkgMC41NjI1MDAwMDcsNi4xNzE1NTAwMSBMMTcuNDM3NSw2LjE3MTU1MDAxIEMxNy41ODY5LDYuMTcxNTUwMDEgMTcuNzMsNi4yMjkzNSAxNy44MzUzLDYuMzMxMzUgQzE3Ljk0MDYsNi40MzMzNSAxOCw2LjU3Mjc0OTk5IDE4LDYuNzE4MDk5OTkgTDE4LDEzLjgyMTU1IEwxNC42MjUsMTMuODIxNTUgWiBNNS42MjUsMTEuNjM1MzUgTDUuNjI1LDE0LjkxNDY1IEwxMi4zNzUsMTQuOTE0NjUgTDEyLjM3NSwxMS42MzQ1IEw1LjYyNSwxMS42MzQ1IEw1LjYyNSwxMS42MzUzNSBaIE0xNS4xODc1LDEwLjAwOTMgQzE1LjQ4NTQsMTAuMDA5MyAxNS43NzI1LDkuODk0NTUwMDEgMTUuOTgzMSw5LjY4OTcgQzE2LjE5MzcsOS40ODQ4NDk5OSAxNi4zMTI1LDkuMjA2ODk5OTkgMTYuMzEyNSw4LjkxNjE5OTk5IEMxNi4zMTI1LDguNjI3MTk5OTkgMTYuMTkzNyw4LjM0OTI0OTk5IDE1Ljk4MzEsOC4xNDM1NDk5OSBDMTUuNzc0NTU0NCw3LjkzOTgxNDgyIDE1LjQ4NzU0Myw3LjgyNDUxOTY0IDE1LjE4NzUsNy44MjM5NTAwMSBDMTQuODg5Niw3LjgyMzk1MDAxIDE0LjYwMjUsNy45Mzg3MDAwMSAxNC4zOTE5LDguMTQzNTQ5OTkgQzE0LjE3OTc4MDEsOC4zNTExMjA4NiAxNC4wNjE2MjU1LDguNjI4NTcyNDUgMTQuMDYyNDk1Miw4LjkxNzA1IEMxNC4wNjI0OTUyLDkuMjA2MDUwMDEgMTQuMTgxMyw5LjQ4NDg0OTk5IDE0LjM5MTksOS42ODk3IEMxNC42MDM0LDkuODkzNyAxNC44ODk2LDEwLjAwOTMgMTUuMTg3NSwxMC4wMDkzIEwxNS4xODc1LDEwLjAwOTMgWicgaWQ9J3BhdGgtMSc+PC9wYXRoPjwvZGVmcz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSflm77moIfpgInkuK3popzoibLliIflm77lpIfku70nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC0xNjEuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNCcgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMTU1LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNuWkh+S7vSc+PG1hc2sgaWQ9J21hc2stMicgZmlsbD0nd2hpdGUnPjx1c2UgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9tYXNrPjx1c2UgaWQ9J+W9oueKticgZmlsbD0nIzU4QTFGRScgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9nPjxwYXRoIGQ9J00zLjgyNSwxLjggTDE0LjE3NSwxLjggQzE0LjQyMzUyODEsMS44IDE0LjYyNSwyLjAwMTQ3MTg2IDE0LjYyNSwyLjI1IEwxNC42MjUsNS4wNzg0NDk5OSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDMuMzc1LDUuMDc4NDQ5OTkgTDMuMzc1LDIuMjUgQzMuMzc1LDIuMDAxNDcxODYgMy41NzY0NzE4NiwxLjggMy44MjUsMS44IFonIGlkPSfnn6nlvaInIGZpbGw9JyM1OEExRkUnIG9wYWNpdHk9JzAuNSc+PC9wYXRoPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=\" style=\"width: 16px; height: 16px; display: block;\" />\r\n    </span>\r\n    <!-- <span *ngIf=\"isMultiForm\" class=\"f-icon f-icon-print\" role=\"presentation\"></span> -->\r\n    <span *ngIf=\"!isMultiForm\">&nbsp;{{localizeService.getValue('ideCmp.printOption.print')}}</span>\r\n  </button>\r\n</div>\r\n<farris-dialog #farrisDialog [title]=\"localizeService.getValue('ideCmp.printOption.dailogName')\" [showButtons]=\"false\" [width]=\"450\" [height]=\"220\"\r\n  [beforeClose]=\"handlebeforeClose\" (resized)=\"onResized($event)\">\r\n  <div class=\"flex-fill farris-split-section m-1 farris-overflow-hidden\">\r\n    <div class=\"farris-form farris-card-content-bg\">\r\n      <div class=\"form-row m-0\">\r\n        <fieldSet farrisFold>\r\n          <div class=\"d-flex flex-wrap mb-2\">\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"distributionSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.layout')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"distributionSelectValue\" [(ngModel)]=\"distributionSelectValue\"\r\n                    [data]=\"distributionData\" [textField]=\"'name'\" [idField]=\"'value'\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"pageSizeSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.paperSize')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"pageSizeSelectValue\" [(ngModel)]=\"pageSizeSelectValue\" [data]=\"pageSizeData\"\r\n                    [textField]=\"'name'\" [idField]=\"'value'\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"marginSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.margin')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"marginSelectValue\" [(ngModel)]=\"marginSelectValue\" [data]=\"marginData\"\r\n                    [textField]=\"'name'\" [idField]=\"'value'\" (valueChange)=\"onValueChange($event)\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\" *ngIf=\"marginSelectValue==3\">\r\n                <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\" for=\"marginSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                      <span class=\"farris-label-text\"></span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-4 offset-4\">\r\n                              <farris-number-spinner id=\"marginTop\" [(ngModel)]=\"marginTop\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"row p-3\">\r\n                            <div class=\"col-4\">\r\n                              <farris-number-spinner id=\"marginLeft\" [(ngModel)]=\"marginLeft\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                            <div class=\"col-4  offset-4\">\r\n                              <farris-number-spinner id=\"marginRight\" [(ngModel)]=\"marginRight\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"row\">\r\n                            <div class=\"col-4 offset-4\">\r\n                              <farris-number-spinner id=\"marginBottom\" [(ngModel)]=\"marginBottom\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"zoomSize\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.zoom')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-number-spinner id=\"zoomSize\" [(ngModel)]=\"zoomSize\" [min]=\"1\"></farris-number-spinner>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12 text-right\">\r\n              <button type=\"button\" class=\"btn btn-primary mr-2\" (click)=\"clickConfirm('print')\">{{localizeService.getValue('ideCmp.printOption.pdfDownload')}}</button>\r\n              <button type=\"button\" class=\"btn btn-primary\" (click)=\"clickConfirm('preview')\">{{localizeService.getValue('ideCmp.printOption.printPreview')}}</button>\r\n            </div>\r\n          </div>\r\n        </fieldSet>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n",
                styles: [""]
            }] }
];
/** @nocollapse */
PrintIntegrationComponent.ctorParameters = () => [
    { type: PrintIntegrationService },
    { type: CacheService },
    { type: Injector, decorators: [{ type: Optional }] }
];
PrintIntegrationComponent.propDecorators = {
    queryId: [{ type: Input }],
    controlType: [{ type: Input }],
    isMultiForm: [{ type: Input }],
    printIntegration: [{ type: Output }],
    printPreview: [{ type: Output }],
    queryRelativeUrl: [{ type: Input }],
    dialogBeforeClose: [{ type: Output }],
    farrisDialog: [{ type: ViewChild, args: ['farrisDialog',] }]
};
if (false) {
    /** @type {?} */
    PrintIntegrationComponent.prototype.queryId;
    /** @type {?} */
    PrintIntegrationComponent.prototype.schemaId;
    /** @type {?} */
    PrintIntegrationComponent.prototype.controlType;
    /** @type {?} */
    PrintIntegrationComponent.prototype.isMultiForm;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printIntegration;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printPreview;
    /** @type {?} */
    PrintIntegrationComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    PrintIntegrationComponent.prototype.dialogBeforeClose;
    /** @type {?} */
    PrintIntegrationComponent.prototype.farrisDialog;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printIntegrationData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.zoomSize;
    /** @type {?} */
    PrintIntegrationComponent.prototype.saveDatas;
    /** @type {?} */
    PrintIntegrationComponent.prototype.distributionData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.pageSizeData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.size;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginTop;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginLeft;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginBottom;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginRight;
    /** @type {?} */
    PrintIntegrationComponent.prototype.distributionSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.pageSizeSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.currentMarginData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.isShowCustom;
    /** @type {?} */
    PrintIntegrationComponent.prototype.localizeService;
    /** @type {?} */
    PrintIntegrationComponent.prototype.msgService;
    /** @type {?} */
    PrintIntegrationComponent.prototype.svgPrint;
    /** @type {?} */
    PrintIntegrationComponent.prototype.handlebeforeClose;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.printIntegrationService;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.cache;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQtaW50ZWdyYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHFkcC9pZGUtY21wLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9wcmludC1pbnRlZ3JhdGlvbi9wcmludC1pbnRlZ3JhdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUcsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sMkRBQTJELENBQUM7QUFDcEcsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDdkMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFPdEQsTUFBTSxPQUFPLHlCQUF5Qjs7Ozs7O0lBc0RwQyxZQUFvQix1QkFBZ0QsRUFBVSxLQUFtQixFQUFzQixRQUFrQjtRQUFySCw0QkFBdUIsR0FBdkIsdUJBQXVCLENBQXlCO1FBQVUsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUFzQixhQUFRLEdBQVIsUUFBUSxDQUFVOztRQWpEL0gscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUMzQyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFdkMsc0JBQWlCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUV0RCx5QkFBb0IsR0FBUTtZQUMxQix1QkFBdUIsRUFBRSxDQUFDO1lB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Ozs7O0lBQUUsNkNBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkLCBPcHRpb25hbCwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUHJpbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL3ByaW50LWludGVncmF0aW9uL3ByaW50LWludGVncmF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IENhY2hlU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0BxZHAvY29tbW9uJztcclxuaW1wb3J0IHsgTG9jYWxpemVTZXJ2aWNlIH0gZnJvbSAnQHFkcC9sb2NhbGl6ZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdwcmludC1pbnRlZ3JhdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3ByaW50LWludGVncmF0aW9uLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wcmludC1pbnRlZ3JhdGlvbi5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFByaW50SW50ZWdyYXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBJbnB1dCgpIHF1ZXJ5SWQ6IGFueTtcclxuICBzY2hlbWFJZDogYW55O1xyXG4gIEBJbnB1dCgpIGNvbnRyb2xUeXBlOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgaXNNdWx0aUZvcm06IGFueTsgLy8g5piv5ZCm5bWM5YWl5byP6KGo5Y2VXHJcbiAgQE91dHB1dCgpIHByaW50SW50ZWdyYXRpb24gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgcHJpbnRQcmV2aWV3ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQElucHV0KCkgcXVlcnlSZWxhdGl2ZVVybDogYW55O1xyXG4gIEBPdXRwdXQoKSBkaWFsb2dCZWZvcmVDbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZhcnJpc0RpYWxvZycpIGZhcnJpc0RpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIHByaW50SW50ZWdyYXRpb25EYXRhOiBhbnkgPSB7XHJcbiAgICBkaXN0cmlidXRpb25TZWxlY3RWYWx1ZTogMCxcclxuICAgIHBhZ2VTaXplU2VsZWN0VmFsdWU6IDAsXHJcbiAgICBtYXJnaW5TZWxlY3RWYWx1ZTogMCxcclxuICAgIHpvb21TaXplOiAwXHJcbiAgfTtcclxuICB6b29tU2l6ZTogYW55ID0gMTAwOyAvLyDnvKnmlL5cclxuICBzYXZlRGF0YXM6IGFueTtcclxuXHJcbiAgZGlzdHJpYnV0aW9uRGF0YTogYW55ID0gW1xyXG4gICAgeyBuYW1lOiAn5qiq5ZCRJywgdmFsdWU6IDEgfSxcclxuICAgIHsgbmFtZTogJ+e6teWQkScsIHZhbHVlOiAwIH1cclxuICBdO1xyXG4gIHBhZ2VTaXplRGF0YTogYW55ID0gW1xyXG4gICAgeyBuYW1lOiAn5L+h57q4JywgdmFsdWU6IDEgfSxcclxuICAgIHsgbmFtZTogJ1RhYmxvaWQnLCB2YWx1ZTogMyB9LFxyXG4gICAgeyBuYW1lOiAn5rOV5b6L5LiT55So57q4JywgdmFsdWU6IDUgfSxcclxuICAgIHsgbmFtZTogJ1N0YXRlbWVudCcsIHZhbHVlOiA2IH0sXHJcbiAgICB7IG5hbWU6ICdBMycsIHZhbHVlOiA4IH0sXHJcbiAgICB7IG5hbWU6ICdBNCcsIHZhbHVlOiA5IH0sXHJcbiAgICB7IG5hbWU6ICdBNScsIHZhbHVlOiAxMSB9LFxyXG4gICAgeyBuYW1lOiAnQjQgKEpJUyknLCB2YWx1ZTogMTIgfSxcclxuICAgIHsgbmFtZTogJ0I1IChKSVMpJywgdmFsdWU6IDEzIH1cclxuICBdO1xyXG4gIG1hcmdpbkRhdGE6IGFueSA9IFtcclxuICAgIHsgbmFtZTogJ+m7mOiupCcsIHZhbHVlOiAwLCBtYXJnaW46IHsgbWFyZ2luVG9wOiAxLCBtYXJnaW5MZWZ0OiAxLCBtYXJnaW5Cb3R0b206IDEsIG1hcmdpblJpZ2h0OiAxIH0gfSxcclxuICAgIHsgbmFtZTogJ+aXoCcsIHZhbHVlOiAxLCBtYXJnaW46IHsgbWFyZ2luVG9wOiAwLCBtYXJnaW5MZWZ0OiAwLCBtYXJnaW5Cb3R0b206IDAsIG1hcmdpblJpZ2h0OiAwIH0gfSxcclxuICAgIHsgbmFtZTogJ+acgOWwj+WAvCcsIHZhbHVlOiAyLCBtYXJnaW46IHsgbWFyZ2luVG9wOiAwLCBtYXJnaW5MZWZ0OiAwLCBtYXJnaW5Cb3R0b206IDAsIG1hcmdpblJpZ2h0OiAwIH0gfSxcclxuICAgIHsgbmFtZTogJ+iHquWumuS5iScsIHZhbHVlOiAzLCBtYXJnaW46IHsgbWFyZ2luVG9wOiAxLCBtYXJnaW5MZWZ0OiAxLCBtYXJnaW5Cb3R0b206IDEsIG1hcmdpblJpZ2h0OiAxIH0gfVxyXG4gIF07XHJcbiAgc2l6ZTogYW55ID0ge307XHJcbiAgbWFyZ2luVG9wID0gMTtcclxuICBtYXJnaW5MZWZ0ID0gMTtcclxuICBtYXJnaW5Cb3R0b20gPSAxO1xyXG4gIG1hcmdpblJpZ2h0ID0gMTtcclxuICBkaXN0cmlidXRpb25TZWxlY3RWYWx1ZTogYW55OyAvLyDluIPlsYBcclxuICBwYWdlU2l6ZVNlbGVjdFZhbHVlOiBhbnk7IC8vIOe6uOW8oOWwuuWvuFxyXG4gIG1hcmdpblNlbGVjdFZhbHVlOiBhbnkgPSAwOyAvLyDovrnot51cclxuICBjdXJyZW50TWFyZ2luRGF0YTogYW55ID0gdGhpcy5tYXJnaW5EYXRhWzBdO1xyXG4gIGlzU2hvd0N1c3RvbSA9IGZhbHNlO1xyXG4gIGxvY2FsaXplU2VydmljZTogTG9jYWxpemVTZXJ2aWNlO1xyXG4gIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZTtcclxuICBzdmdQcmludCA9IHRydWU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJpbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFByaW50SW50ZWdyYXRpb25TZXJ2aWNlLCBwcml2YXRlIGNhY2hlOiBDYWNoZVNlcnZpY2UsIEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICB0aGlzLmxvY2FsaXplU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsaXplU2VydmljZSk7XHJcbiAgICAgIHRoaXMubXNnU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE1lc3NhZ2VyU2VydmljZSk7XHJcbiAgICAgIHRoaXMuZGlzdHJpYnV0aW9uRGF0YSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24uZGlzdHJpYnV0aW9uRGF0YScpO1xyXG4gICAgICB0aGlzLnBhZ2VTaXplRGF0YSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24ucGFnZVNpemVEYXRhJyk7XHJcbiAgICAgIHRoaXMubWFyZ2luRGF0YSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24ubWFyZ2luRGF0YScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEaWFsb2dTaG93KCkge1xyXG4gICAgaWYgKHRoaXMucXVlcnlJZCkge1xyXG4gICAgICB0aGlzLnNjaGVtYUlkID0gdGhpcy5jYWNoZS5nZXQoJ3NjaGVtYV9zY2hlbWFpZCcgKyB0aGlzLnF1ZXJ5SWQpO1xyXG4gICAgICB0aGlzLnByaW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFByaW50SW50ZWdyYXRpb24odGhpcy5zY2hlbWFJZCwgdGhpcy5xdWVyeUlkLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAvLyB0aGlzLnByaW50SW50ZWdyYXRpb25EYXRhID0gdmFsdWUgPyB2YWx1ZSA6IFtdO1xyXG4gICAgICAgICAgdGhpcy5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZSA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24uZGlzdHJpYnV0aW9uU2VsZWN0VmFsdWUudmFsdWU7XHJcbiAgICAgICAgICB0aGlzLnBhZ2VTaXplU2VsZWN0VmFsdWUgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLnBhZ2VTaXplU2VsZWN0VmFsdWUudmFsdWU7XHJcbiAgICAgICAgICB0aGlzLm1hcmdpblNlbGVjdFZhbHVlID0gdmFsdWUucHJpbnRpbnRlZ3JhdGlvbi5tYXJnaW5TZWxlY3RWYWx1ZS52YWx1ZTtcclxuICAgICAgICAgIHRoaXMuY3VycmVudE1hcmdpbkRhdGEgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5tYXJnaW5Ub3AgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlLm1hcmdpbi5tYXJnaW5Ub3A7XHJcbiAgICAgICAgICB0aGlzLm1hcmdpbkxlZnQgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlLm1hcmdpbi5tYXJnaW5MZWZ0O1xyXG4gICAgICAgICAgdGhpcy5tYXJnaW5Cb3R0b20gPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlLm1hcmdpbi5tYXJnaW5Cb3R0b207XHJcbiAgICAgICAgICB0aGlzLm1hcmdpblJpZ2h0ID0gdmFsdWUucHJpbnRpbnRlZ3JhdGlvbi5tYXJnaW5TZWxlY3RWYWx1ZS5tYXJnaW4ubWFyZ2luUmlnaHQ7XHJcbiAgICAgICAgICB0aGlzLnpvb21TaXplID0gdmFsdWUucHJpbnRpbnRlZ3JhdGlvbi56b29tU2l6ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZSA9IHRoaXMuZGlzdHJpYnV0aW9uRGF0YVswXS52YWx1ZTtcclxuICAgICAgICAgIHRoaXMucGFnZVNpemVTZWxlY3RWYWx1ZSA9IHRoaXMucGFnZVNpemVEYXRhWzVdLnZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5tYXJnaW5TZWxlY3RWYWx1ZSA9IHRoaXMubWFyZ2luRGF0YVswXS52YWx1ZTtcclxuICAgICAgICAgIHRoaXMuY3VycmVudE1hcmdpbkRhdGEgPSB0aGlzLm1hcmdpbkRhdGFbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmFycmlzRGlhbG9nLnNob3coKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZhcnJpc0RpYWxvZy5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBvblJlc2l6ZWQoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5zaXplLmhlaWdodCA9IGV2ZW50Lm5ld0hlaWdodDtcclxuICAgIHRoaXMuc2l6ZS53aWR0aCA9IGV2ZW50Lm5ld1dpZHRoO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlYmVmb3JlQ2xvc2UgPSAoKTogT2JzZXJ2YWJsZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5jdXJyZW50TWFyZ2luRGF0YS5tYXJnaW4ubWFyZ2luVG9wID0gdGhpcy5tYXJnaW5Ub3A7XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5MZWZ0ID0gdGhpcy5tYXJnaW5MZWZ0O1xyXG4gICAgc2VsZi5jdXJyZW50TWFyZ2luRGF0YS5tYXJnaW4ubWFyZ2luQm90dG9tID0gdGhpcy5tYXJnaW5Cb3R0b207XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5SaWdodCA9IHRoaXMubWFyZ2luUmlnaHQ7XHJcbiAgICBzZWxmLnByaW50SW50ZWdyYXRpb25EYXRhID0ge1xyXG4gICAgICBkaXN0cmlidXRpb25TZWxlY3RWYWx1ZTogc2VsZi5maW5kSXRlbShzZWxmLmRpc3RyaWJ1dGlvbkRhdGEsIHNlbGYuZGlzdHJpYnV0aW9uU2VsZWN0VmFsdWUpLFxyXG4gICAgICBwYWdlU2l6ZVNlbGVjdFZhbHVlOiBzZWxmLmZpbmRJdGVtKHNlbGYucGFnZVNpemVEYXRhLCBzZWxmLnBhZ2VTaXplU2VsZWN0VmFsdWUpLFxyXG4gICAgICBtYXJnaW5TZWxlY3RWYWx1ZTogc2VsZi5jdXJyZW50TWFyZ2luRGF0YSwgLy8gc2VsZi5maW5kSXRlbShzZWxmLm1hcmdpbkRhdGEsIHNlbGYubWFyZ2luU2VsZWN0VmFsdWUpLFxyXG4gICAgICB6b29tU2l6ZTogc2VsZi56b29tU2l6ZVxyXG4gICAgfTtcclxuICAgIGlmIChzZWxmLnByaW50SW50ZWdyYXRpb25EYXRhKSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcclxuICAgICAgc2VsZi5zYXZlRGF0YXMgPSB7IElkOiBFdmVudEJ1cy5ndWlkKCksIHByaW50aW50ZWdyYXRpb246IEpTT04uc3RyaW5naWZ5KHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEpLCBxdWVyeWlkOiBzZWxmLnF1ZXJ5SWQsIHNjaGVtYUlkOiBzZWxmLnNjaGVtYUlkIH07XHJcbiAgICAgIHNlbGYucHJpbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2F2ZVByaW50SW50ZWdyYXRpb24oc2VsZi5zYXZlRGF0YXMsIHNlbGYucXVlcnlSZWxhdGl2ZVVybClcclxuICAgICAgICAuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBjbGlja0NvbmZpcm0odHlwZTogYW55KSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICghc2VsZi5jdXJyZW50TWFyZ2luRGF0YSkge1xyXG4gICAgICBzZWxmLm1zZ1NlcnZpY2Uud2FybmluZyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnByaW50T3B0aW9uLm1lc3NhZ2UudmFsaWRhdGUubWFyZ2luJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5Ub3AgPSB0aGlzLm1hcmdpblRvcDtcclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpbkxlZnQgPSB0aGlzLm1hcmdpbkxlZnQ7XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5Cb3R0b20gPSB0aGlzLm1hcmdpbkJvdHRvbTtcclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpblJpZ2h0ID0gdGhpcy5tYXJnaW5SaWdodDtcclxuICAgIHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEgPSB7XHJcbiAgICAgIGRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlOiBzZWxmLmZpbmRJdGVtKHNlbGYuZGlzdHJpYnV0aW9uRGF0YSwgc2VsZi5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZSksXHJcbiAgICAgIHBhZ2VTaXplU2VsZWN0VmFsdWU6IHNlbGYuZmluZEl0ZW0oc2VsZi5wYWdlU2l6ZURhdGEsIHNlbGYucGFnZVNpemVTZWxlY3RWYWx1ZSksXHJcbiAgICAgIG1hcmdpblNlbGVjdFZhbHVlOiBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLCAvLyBzZWxmLmZpbmRJdGVtKHNlbGYubWFyZ2luRGF0YSwgc2VsZi5tYXJnaW5TZWxlY3RWYWx1ZSksXHJcbiAgICAgIHpvb21TaXplOiBzZWxmLnpvb21TaXplXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghc2VsZi5wcmludEludGVncmF0aW9uRGF0YS5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZSkge1xyXG4gICAgICBzZWxmLm1zZ1NlcnZpY2Uud2FybmluZyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnByaW50T3B0aW9uLm1lc3NhZ2UudmFsaWRhdGUuZGlzdHJpYnV0aW9uJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEucGFnZVNpemVTZWxlY3RWYWx1ZSkge1xyXG4gICAgICBzZWxmLm1zZ1NlcnZpY2Uud2FybmluZyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnByaW50T3B0aW9uLm1lc3NhZ2UudmFsaWRhdGUucGFnZVNpemUnKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09PSAncHJldmlldycpIHtcclxuICAgICAgc2VsZi5wcmludFByZXZpZXcuZW1pdChzZWxmLnByaW50SW50ZWdyYXRpb25EYXRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYucHJpbnRJbnRlZ3JhdGlvbi5lbWl0KHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEpO1xyXG4gICAgfVxyXG4gICAgc2VsZi5mYXJyaXNEaWFsb2cuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvblZhbHVlQ2hhbmdlKHZhbHVlKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRNYXJnaW5EYXRhID0gdGhpcy5tYXJnaW5EYXRhW3ZhbHVlLnZhbHVlXTtcclxuICAgIGlmICh2YWx1ZS52YWx1ZSA9PT0gMykge1xyXG4gICAgICB0aGlzLmZhcnJpc0RpYWxvZy5oZWlnaHQgPSAzNTA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZhcnJpc0RpYWxvZy5oZWlnaHQgPSAyMjA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZpbmRJdGVtKGxpc3Q6IGFueSwgaWQ6IGFueSkge1xyXG4gICAgbGV0IGl0ZW0gPSBudWxsO1xyXG4gICAgaWYgKGxpc3QgJiYgbGlzdC5sZW5ndGgpIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGxpc3RbaV0udmFsdWUgPT09IGlkKSB7XHJcbiAgICAgICAgICBpdGVtID0gbGlzdFtpXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGl0ZW07XHJcbiAgfVxyXG5cclxuICBoYW5kbGVIb3Zlcih0eXBlOiBhbnksIHN0YXRlOiBhbnkpIHtcclxuICAgIHRoaXMuc3ZnUHJpbnQgPSBzdGF0ZSA9PT0gMTtcclxuICB9XHJcbn1cclxuIl19