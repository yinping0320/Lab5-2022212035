/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, Renderer2, ViewEncapsulation, Output, EventEmitter, TemplateRef, Optional, Injector } from '@angular/core';
import { FormGroup, FormControl, Validators } from '@angular/forms';
import { findIndex } from 'lodash-es';
import { DialogComponent } from '@farris/ui-dialog';
import { DatagridComponent } from '@farris/ui-datagrid';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { MessagerService } from '@farris/ui-messager';
import { ParasMappingService } from '../../service/paras-mapping/paras-mapping.service';
import { of } from 'rxjs';
import { EventBus } from '@qdp/common';
import { LocalizeService } from '@qdp/localize';
/** @type {?} */
var createFormGroup = (/**
 * @param {?} dataItem
 * @return {?}
 */
function (dataItem) { return new FormGroup({
    'id': new FormControl(dataItem.id),
    'parameter': new FormControl(dataItem.parameter, Validators.required),
    'sourceParameter': new FormControl(dataItem.sourceParameter),
    'mappingType': new FormControl(dataItem.mappingType),
    'constant': new FormControl(dataItem.constant),
    'expression': new FormControl(dataItem.expression),
    'paraisused': new FormControl(dataItem.paraisused)
}); });
var ɵ0 = createFormGroup;
/** @type {?} */
var matches = (/**
 * @param {?} el
 * @param {?} selector
 * @return {?}
 */
function (el, selector) { return (el.matches || el.msMatchesSelector).call(el, selector); });
var ɵ1 = matches;
var ParasMappingComponent = /** @class */ (function () {
    function ParasMappingComponent(renderer, parasMappingService, msgService, injector) {
        var _this = this;
        this.renderer = renderer;
        this.parasMappingService = parasMappingService;
        this.msgService = msgService;
        this.injector = injector;
        this.closeModal = new EventEmitter();
        // 模态框确定后关闭，并传递参数
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.modalConfig = {
            title: '参数设置',
            width: 900,
            height: 500,
            showButtons: true
        };
        this.colName = '';
        this.size = {};
        this.mappingTypeData = [
            { name: '字段', value: 0 },
            { name: '常量', value: 1 },
            { name: '表达式', value: 2 }
        ];
        this.QueryInfoDatas = [];
        this.saveDatas = {};
        this.currentmode = true;
        this.columns = [];
        this.total = 0;
        this.editMode = 'row';
        this.pageSize = 200;
        this.pageIndex = 1;
        this.handlebeforeClose = (/**
         * @return {?}
         */
        function () {
            if (_this.dg1) {
                _this.dg1.endRowEdit();
            }
            _this.updateParasMapping();
            return of(true);
        });
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.mappingTypeData = this.localizeService.getValue('ideCmp.paramsMapping.mappingTypeData');
            this.modalConfig.title = this.localizeService.getValue('ideCmp.paramsMapping.paramOption');
        }
    }
    /**
     * @return {?}
     */
    ParasMappingComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.editorParams && this.editorParams.queryId) {
            this.currentmode = true;
            this.queryId = this.editorParams.queryId;
            this.queryparaData = this.editorParams.queryparaData;
            this.sourceparaData = this.editorParams.sourceparaData;
            this.qoManagerCode = this.editorParams.datasourceid;
            this.queryRelativeUrl = this.editorParams.queryRelativeUrl;
            /*
            this.parasMappingService.getParasMapping(this.qoManagerCode , this.queryId, this.queryRelativeUrl).subscribe(
              data => { if (data != null) { this.QueryInfoDatas =  JSON.parse(data.parasmapping.value); } });
              */
            this.parasMappingService.getParasMapping(this.qoManagerCode, this.queryId, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data != null) {
                    _this.QueryInfoDatas = JSON.parse(data.parasmapping.value);
                }
                else if (_this.editorParams.QueryInfoDatas) {
                    _this.QueryInfoDatas = _this.editorParams.QueryInfoDatas;
                }
            }));
        }
        else {
            this.currentmode = false;
            this.parasMappingService.getParasMapping(this.qoManagerCode, this.queryId, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data != null) {
                    _this.queryparaData = JSON.parse(data.parasmapping.queryparaData);
                    _this.sourceparaData = JSON.parse(data.parasmapping.sourceparaData);
                    _this.QueryInfoDatas = JSON.parse(data.parasmapping.value);
                }
            }));
        }
        this.gridInit();
    };
    /**
     * @private
     * @return {?}
     */
    ParasMappingComponent.prototype.gridInit = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        /** @type {?} */
        var enumOpts = { valueField: 'value', textField: 'name', data: this.queryparaData };
        /** @type {?} */
        var enumOpts1 = { valueField: 'value', textField: 'name', data: this.mappingTypeData };
        /** @type {?} */
        var enumOpts2 = { valueField: 'value', textField: 'name', data: this.sourceparaData };
        this.columns = [
            {
                field: 'parameter', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[0], formatter: { type: 'enum', options: enumOpts },
                editor: {
                    type: EditorTypes.COMBOLIST,
                    options: tslib_1.__assign({}, enumOpts, { idField: 'value' }),
                    validators: [
                        { type: 'required', messager: '该字段不能为空！' }
                    ]
                }
            },
            {
                field: 'mappingType', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[1], formatter: { type: 'enum', options: enumOpts1 },
                editor: {
                    type: EditorTypes.COMBOLIST,
                    options: tslib_1.__assign({}, enumOpts1, { idField: 'value' })
                }
            },
            {
                field: 'sourceParameter', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[2], formatter: { type: 'enum', options: enumOpts2 },
                editor: {
                    type: EditorTypes.COMBOLIST,
                    options: tslib_1.__assign({}, enumOpts2, { idField: 'value' })
                }
            },
            {
                field: 'constant', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[3],
                editor: {
                    type: EditorTypes.TEXTBOX
                }
            },
            {
                field: 'expression', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[4],
                editor: {
                    type: EditorTypes.TEXTBOX
                }
            },
            {
                field: 'paraisused', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[5],
                editor: {
                    type: EditorTypes.CHECKBOX
                }
            }
        ];
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ParasMappingComponent.prototype.onResized = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.size.height = event.newHeight;
        this.size.width = event.newWidth;
    };
    /**
     * @return {?}
     */
    ParasMappingComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        if (this.dg2) {
            this.dg2.endRowEdit();
        }
        this.closeModal.emit();
    };
    /**
     * @return {?}
     */
    ParasMappingComponent.prototype.clickConfirm = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.updateParasMapping();
        self.submitModal.emit({ value: self.QueryInfoDatas });
    };
    /**
     * @return {?}
     */
    ParasMappingComponent.prototype.updateParasMapping = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        if (self.QueryInfoDatas && self.QueryInfoDatas.length) {
            // tslint:disable-next-line:max-line-length
            self.saveDatas = { Id: EventBus.guid(), parasmapping: JSON.stringify({ value: JSON.stringify(self.QueryInfoDatas), queryparaData: JSON.stringify(self.queryparaData), sourceparaData: JSON.stringify(self.sourceparaData) }), queryid: self.queryId, datasourceid: self.qoManagerCode };
            self.parasMappingService.saveParasMapping(self.saveDatas, self.queryRelativeUrl)
                .subscribe();
        }
        else {
            self.parasMappingService.deleteParasMapping(self.qoManagerCode, self.queryId, self.queryRelativeUrl).subscribe();
            self.QueryInfoDatas = [];
        }
    };
    /**
     * @return {?}
     */
    ParasMappingComponent.prototype.handleDialogShow = /**
     * @return {?}
     */
    function () {
        this.farrisDialog.show();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.addFilterRow = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.QueryInfoDatas.push({
            'id': EventBus.guid(),
            'parameter': '',
            'sourceParameter': '',
            'mappingType': 0,
            'constant': '',
            'expression': '',
            'paraisused': true
        });
        if (this.dg1) {
            this.dg1.refresh();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.addFilterRowForIde = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.QueryInfoDatas.push({
            'id': EventBus.guid(),
            'parameter': '',
            'sourceParameter': '',
            'mappingType': 0,
            'constant': '',
            'expression': '',
            'paraisused': true
        });
        if (this.dg2) {
            this.dg2.refresh();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.deleteFilterRow = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var self = this;
        if (this.dg1.selectedRow) {
            /** @type {?} */
            var index = findIndex(this.QueryInfoDatas, (/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === self.dg1.selectedRow.id; }));
            this.QueryInfoDatas.splice(index, 1);
            this.dg1.refresh();
        }
        else {
            this.msgService.info(self.localizeService.getValue('ideCmp.paramsMapping.message.validate.select'));
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.deleteFilterRowForIde = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var self = this;
        if (this.dg2.selectedRow) {
            /** @type {?} */
            var index = findIndex(this.QueryInfoDatas, (/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === self.dg2.selectedRow.id; }));
            this.QueryInfoDatas.splice(index, 1);
            this.dg2.refresh();
        }
        else {
            this.msgService.info(self.localizeService.getValue('ideCmp.paramsMapping.message.validate.select'));
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.cancelEdit = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.dg1) {
            this.dg1.endRowEdit();
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ParasMappingComponent.prototype.cancelEditForIde = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.dg2) {
            this.dg2.endRowEdit();
        }
    };
    ParasMappingComponent.decorators = [
        { type: Component, args: [{
                    selector: 'paras-mapping',
                    template: "<div class=\"btn-group mr-3\" fDropdown *ngIf=\"!currentmode\">\r\n  <button class=\"btn f-rt-btn f-btn-ml btn-secondary dropdown-toggle\" type=\"button\" id=\"menuButton\" (click)=\"handleDialogShow()\" >\r\n    <span class=\"f-icon f-icon-grid-layout\" role=\"presentation\"></span>\r\n    <span *ngIf=\"!isMultiForm\">&nbsp;{{localizeService.getValue('ideCmp.paramsMapping.paramOption')}}</span>\r\n  </button>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog [title]=\"localizeService.getValue('ideCmp.paramsMapping.paramOption')\" [showButtons]=\"false\" [width]=\"700\" [height]=\"500\" *ngIf=\"!currentmode\" [beforeClose]=\"handlebeforeClose\">\r\n  <div class=\"d-flex flex-column flex-fill position-relative h-100 m-0\">\r\n    <div class=\"flex-fill farris-split-section m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n      <div class=\"farris-form farris-card-content-bg\">\r\n          <fieldSet farrisFold [style.height.px]=\"size.height\">\r\n            <button id=\"addFilterRow\" class=\"btn btn-primary mr-1 mb-1\" (click)=\"addFilterRow($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnAdd')}}</button>\r\n            <button id=\"addFilterRow\" class=\"btn btn-secondary mr-1 mb-1\" (click)=\"deleteFilterRow($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnDelete')}}</button>\r\n            <button id=\"addFilterRow\" class=\"btn btn-secondary mr-1 mb-1\" (click)=\"cancelEdit($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnCancel')}}</button>\r\n            <farris-datagrid [data]=\"QueryInfoDatas\" [columns]=\"columns\" #dg1=\"datagrid\" [fit]=\"true\"\r\n              [editable]=\"true\" [editMode]=\"editMode\" [showCheckbox]=\"false\" [fitColumns]=\"true\"\r\n              [showLineNumber] =\"true\" [striped]=\"true\"  [total]=\"total\" [pageSize]=\"100\"\r\n              [virtualized]=\"true\" [pagination]=\"false\">\r\n            </farris-datagrid>\r\n          </fieldSet>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</farris-dialog>\r\n<div class=\"d-flex flex-column flex-fill position-relative h-100 m-0\" *ngIf=\"currentmode\">\r\n  <div class=\"flex-fill farris-split-section m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n    <div class=\"farris-form farris-card-content-bg\">\r\n        <fieldSet farrisFold [style.height.px]=\"size.height\">\r\n          <button id=\"addFilterRow\" class=\"btn btn-primary mr-1 mb-1\" (click)=\"addFilterRowForIde($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnAdd')}}</button>\r\n            <button id=\"addFilterRow\" class=\"btn btn-secondary mr-1 mb-1\" (click)=\"deleteFilterRowForIde($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnDelete')}}</button>\r\n            <button id=\"addFilterRow\" class=\"btn btn-secondary mr-1 mb-1\" (click)=\"cancelEditForIde($event)\">{{localizeService.getValue('ideCmp.paramsMapping.btnCancel')}}</button>\r\n            <farris-datagrid [data]=\"QueryInfoDatas\" [columns]=\"columns\" #dg2=\"datagrid\" [fit]=\"true\"\r\n              [editable]=\"true\" [editMode]=\"editMode\" [showCheckbox]=\"false\" [fitColumns]=\"true\"\r\n              [showLineNumber] =\"true\" [striped]=\"true\"  [total]=\"total\" [pageSize]=\"100\"\r\n              [virtualized]=\"true\" [pagination]=\"false\">\r\n            </farris-datagrid>\r\n        </fieldSet>\r\n      </div>\r\n    </div>\r\n</div>\r\n<ng-template #enumFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"clickCancel()\">{{localizeService.getValue('ideCmp.paramsMapping.btnCancel')}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"clickConfirm()\">{{localizeService.getValue('ideCmp.paramsMapping.btnOK')}}</button>\r\n</ng-template>\r\n",
                    encapsulation: ViewEncapsulation.None,
                    styles: ["tr .center{text-align:center}"]
                }] }
    ];
    /** @nocollapse */
    ParasMappingComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ParasMappingService },
        { type: MessagerService, decorators: [{ type: Optional }] },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    ParasMappingComponent.propDecorators = {
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        editorParams: [{ type: Input }],
        queryId: [{ type: Input }],
        qoManagerCode: [{ type: Input }],
        queryRelativeUrl: [{ type: Input }],
        isMultiForm: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['enumFooter',] }],
        farrisDialog: [{ type: ViewChild, args: ['farrisDialog',] }],
        dg1: [{ type: ViewChild, args: ['dg1',] }],
        dg2: [{ type: ViewChild, args: ['dg2',] }]
    };
    return ParasMappingComponent;
}());
export { ParasMappingComponent };
if (false) {
    /** @type {?} */
    ParasMappingComponent.prototype.closeModal;
    /** @type {?} */
    ParasMappingComponent.prototype.submitModal;
    /** @type {?} */
    ParasMappingComponent.prototype.editorParams;
    /** @type {?} */
    ParasMappingComponent.prototype.queryId;
    /** @type {?} */
    ParasMappingComponent.prototype.qoManagerCode;
    /** @type {?} */
    ParasMappingComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    ParasMappingComponent.prototype.isMultiForm;
    /** @type {?} */
    ParasMappingComponent.prototype.queryparaData;
    /** @type {?} */
    ParasMappingComponent.prototype.sourceparaData;
    /** @type {?} */
    ParasMappingComponent.prototype.modalFooter;
    /** @type {?} */
    ParasMappingComponent.prototype.modalConfig;
    /** @type {?} */
    ParasMappingComponent.prototype.farrisDialog;
    /** @type {?} */
    ParasMappingComponent.prototype.currTreeNodeId;
    /** @type {?} */
    ParasMappingComponent.prototype.currQueryInfoData;
    /** @type {?} */
    ParasMappingComponent.prototype.colSelectValue;
    /** @type {?} */
    ParasMappingComponent.prototype.colName;
    /** @type {?} */
    ParasMappingComponent.prototype.size;
    /** @type {?} */
    ParasMappingComponent.prototype.datasourceid;
    /** @type {?} */
    ParasMappingComponent.prototype.gridData;
    /** @type {?} */
    ParasMappingComponent.prototype.formGroup;
    /**
     * @type {?}
     * @private
     */
    ParasMappingComponent.prototype.editedRowIndex;
    /** @type {?} */
    ParasMappingComponent.prototype.isNew;
    /** @type {?} */
    ParasMappingComponent.prototype.mappingTypeData;
    /** @type {?} */
    ParasMappingComponent.prototype.QueryInfoDatas;
    /** @type {?} */
    ParasMappingComponent.prototype.saveDatas;
    /** @type {?} */
    ParasMappingComponent.prototype.currentmode;
    /** @type {?} */
    ParasMappingComponent.prototype.localizeService;
    /** @type {?} */
    ParasMappingComponent.prototype.columns;
    /** @type {?} */
    ParasMappingComponent.prototype.total;
    /** @type {?} */
    ParasMappingComponent.prototype.editMode;
    /** @type {?} */
    ParasMappingComponent.prototype.pageSize;
    /** @type {?} */
    ParasMappingComponent.prototype.pageIndex;
    /** @type {?} */
    ParasMappingComponent.prototype.dg1;
    /** @type {?} */
    ParasMappingComponent.prototype.dg2;
    /** @type {?} */
    ParasMappingComponent.prototype.handlebeforeClose;
    /**
     * @type {?}
     * @private
     */
    ParasMappingComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    ParasMappingComponent.prototype.parasMappingService;
    /**
     * @type {?}
     * @private
     */
    ParasMappingComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    ParasMappingComponent.prototype.injector;
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyYXMtbWFwcGluZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcWRwL2lkZS1jbXAvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L3BhcmFzLW1hcHBpbmcvcGFyYXMtbWFwcGluZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBaUIsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3hLLE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDdEMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxpQkFBaUIsRUFBbUIsTUFBTSxxQkFBcUIsQ0FBQztBQUN6RSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBQ3hGLE9BQU8sRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN2QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZUFBZSxDQUFDOztJQUUxQyxlQUFlOzs7O0FBQUcsVUFBQSxRQUFRLElBQUksT0FBQSxJQUFJLFNBQVMsQ0FBQztJQUNoRCxJQUFJLEVBQUUsSUFBSSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztJQUNsQyxXQUFXLEVBQUUsSUFBSSxXQUFXLENBQUMsUUFB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cG9uZW50LCBPbkluaXQsIElucHV0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQsIFJlbmRlcmVyMiwgVmlld0VuY2Fwc3VsYXRpb24sIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBUZW1wbGF0ZVJlZiwgT3B0aW9uYWwsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IGZpbmRJbmRleCB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQsIEdSSURfVkFMSURBVE9SUyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBFZGl0b3JUeXBlcyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBQYXJhc01hcHBpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9wYXJhcy1tYXBwaW5nL3BhcmFzLW1hcHBpbmcuc2VydmljZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQHFkcC9jb21tb24nO1xyXG5pbXBvcnQgeyBMb2NhbGl6ZVNlcnZpY2UgfSBmcm9tICdAcWRwL2xvY2FsaXplJztcclxuXHJcbmNvbnN0IGNyZWF0ZUZvcm1Hcm91cCA9IGRhdGFJdGVtID0+IG5ldyBGb3JtR3JvdXAoe1xyXG4gICdpZCc6IG5ldyBGb3JtQ29udHJvbChkYXRhSXRlbS5pZCksXHJcbiAgJ3BhcmFtZXRlcic6IG5ldyBGb3JtQ29udHJvbChkYXRhSXRlbS5wYXJhbWV0ZXIsIFZhbGlkYXRvcnMucmVxdWlyZWQpLFxyXG4gICdzb3VyY2VQYXJhbWV0ZXInOiBuZXcgRm9ybUNvbnRyb2woZGF0YUl0ZW0uc291cmNlUGFyYW1ldGVyKSxcclxuICAnbWFwcGluZ1R5cGUnOiBuZXcgRm9ybUNvbnRyb2woZGF0YUl0ZW0ubWFwcGluZ1R5cGUpLFxyXG4gICdjb25zdGFudCc6IG5ldyBGb3JtQ29udHJvbChkYXRhSXRlbS5jb25zdGFudCksXHJcbiAgJ2V4cHJlc3Npb24nOiBuZXcgRm9ybUNvbnRyb2woZGF0YUl0ZW0uZXhwcmVzc2lvbiksXHJcbiAgJ3BhcmFpc3VzZWQnOiBuZXcgRm9ybUNvbnRyb2woZGF0YUl0ZW0ucGFyYWlzdXNlZClcclxufSk7XHJcbmNvbnN0IG1hdGNoZXMgPSAoZWwsIHNlbGVjdG9yKSA9PiAoZWwubWF0Y2hlcyB8fCBlbC5tc01hdGNoZXNTZWxlY3RvcikuY2FsbChlbCwgc2VsZWN0b3IpO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3BhcmFzLW1hcHBpbmcnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wYXJhcy1tYXBwaW5nLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wYXJhcy1tYXBwaW5nLmNvbXBvbmVudC5jc3MnXSxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgUGFyYXNNYXBwaW5nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIC8vIOaooeaAgeahhuehruWumuWQjuWFs+mXre+8jOW5tuS8oOmAkuWPguaVsFxyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQElucHV0KCkgcXVlcnlJZDogYW55O1xyXG4gIEBJbnB1dCgpIHFvTWFuYWdlckNvZGU6IGFueTtcclxuICBASW5wdXQoKSBxdWVyeVJlbGF0aXZlVXJsOiBhbnk7XHJcbiAgQElucHV0KCkgaXNNdWx0aUZvcm06IGFueTtcclxuICBxdWVyeXBhcmFEYXRhOiBhbnk7IC8vIOa6kOWPguaVsOS/oeaBr1xyXG4gIHNvdXJjZXBhcmFEYXRhOiBhbnk7IC8vIOWPguaVsOWQjeS/oeaBr1xyXG4gIEBWaWV3Q2hpbGQoJ2VudW1Gb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBtb2RhbENvbmZpZyA9IHtcclxuICAgIHRpdGxlOiAn5Y+C5pWw6K6+572uJyxcclxuICAgIHdpZHRoOiA5MDAsXHJcbiAgICBoZWlnaHQ6IDUwMCxcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuICBAVmlld0NoaWxkKCdmYXJyaXNEaWFsb2cnKSBmYXJyaXNEaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBjdXJyVHJlZU5vZGVJZDogYW55O1xyXG4gIGN1cnJRdWVyeUluZm9EYXRhOiBhbnk7XHJcbiAgLy8gcXVlcnlwYXJhRGF0YTogYW55ID0gW107XHJcbiAgLy8gc291cmNlcGFyYURhdGE6IGFueSA9IFtdO1xyXG4gIGNvbFNlbGVjdFZhbHVlOiBhbnk7XHJcbiAgY29sTmFtZSA9ICcnO1xyXG4gIHNpemU6IGFueSA9IHt9O1xyXG4gIGRhdGFzb3VyY2VpZDogYW55O1xyXG4gIHB1YmxpYyBncmlkRGF0YTogYW55W107XHJcbiAgcHVibGljIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xyXG4gIHByaXZhdGUgZWRpdGVkUm93SW5kZXg6IG51bWJlcjtcclxuICBpc05ldzogYm9vbGVhbjtcclxuICBtYXBwaW5nVHlwZURhdGE6IGFueSA9IFtcclxuICAgIHsgbmFtZTogJ+Wtl+autScsIHZhbHVlOiAwIH0sXHJcbiAgICB7IG5hbWU6ICfluLjph48nLCB2YWx1ZTogMSB9LFxyXG4gICAgeyBuYW1lOiAn6KGo6L6+5byPJywgdmFsdWU6IDIgfVxyXG4gIF07XHJcbiAgUXVlcnlJbmZvRGF0YXM6IGFueSA9IFtdO1xyXG4gIHNhdmVEYXRhczogYW55ID0ge307XHJcbiAgY3VycmVudG1vZGUgPSB0cnVlO1xyXG4gIGxvY2FsaXplU2VydmljZTogTG9jYWxpemVTZXJ2aWNlO1xyXG5cclxuICBjb2x1bW5zID0gW107XHJcbiAgdG90YWwgPSAwO1xyXG4gIGVkaXRNb2RlID0gJ3Jvdyc7XHJcbiAgcGFnZVNpemUgPSAyMDA7XHJcbiAgcGFnZUluZGV4ID0gMTtcclxuICBAVmlld0NoaWxkKCdkZzEnKSBkZzE6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2RnMicpIGRnMjogRGF0YWdyaWRDb21wb25lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBwYXJhc01hcHBpbmdTZXJ2aWNlOiBQYXJhc01hcHBpbmdTZXJ2aWNlLCBAT3B0aW9uYWwoKSBwcml2YXRlIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSwgQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcclxuICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgIHRoaXMubG9jYWxpemVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxpemVTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5tYXBwaW5nVHlwZURhdGEgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcubWFwcGluZ1R5cGVEYXRhJyk7XHJcbiAgICAgIHRoaXMubW9kYWxDb25maWcudGl0bGUgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcucGFyYW1PcHRpb24nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgaWYgKHRoaXMuZWRpdG9yUGFyYW1zICYmIHRoaXMuZWRpdG9yUGFyYW1zLnF1ZXJ5SWQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50bW9kZSA9IHRydWU7XHJcbiAgICAgIHRoaXMucXVlcnlJZCA9IHRoaXMuZWRpdG9yUGFyYW1zLnF1ZXJ5SWQ7XHJcbiAgICAgIHRoaXMucXVlcnlwYXJhRGF0YSA9IHRoaXMuZWRpdG9yUGFyYW1zLnF1ZXJ5cGFyYURhdGE7XHJcbiAgICAgIHRoaXMuc291cmNlcGFyYURhdGEgPSB0aGlzLmVkaXRvclBhcmFtcy5zb3VyY2VwYXJhRGF0YTtcclxuICAgICAgdGhpcy5xb01hbmFnZXJDb2RlID0gdGhpcy5lZGl0b3JQYXJhbXMuZGF0YXNvdXJjZWlkO1xyXG4gICAgICB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwgPSB0aGlzLmVkaXRvclBhcmFtcy5xdWVyeVJlbGF0aXZlVXJsO1xyXG4gICAgICAvKlxyXG4gICAgICB0aGlzLnBhcmFzTWFwcGluZ1NlcnZpY2UuZ2V0UGFyYXNNYXBwaW5nKHRoaXMucW9NYW5hZ2VyQ29kZSAsIHRoaXMucXVlcnlJZCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgZGF0YSA9PiB7IGlmIChkYXRhICE9IG51bGwpIHsgdGhpcy5RdWVyeUluZm9EYXRhcyA9ICBKU09OLnBhcnNlKGRhdGEucGFyYXNtYXBwaW5nLnZhbHVlKTsgfSB9KTtcclxuICAgICAgICAqL1xyXG4gICAgICB0aGlzLnBhcmFzTWFwcGluZ1NlcnZpY2UuZ2V0UGFyYXNNYXBwaW5nKHRoaXMucW9NYW5hZ2VyQ29kZSwgdGhpcy5xdWVyeUlkLCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZShcclxuICAgICAgICBkYXRhID0+IHtcclxuICAgICAgICAgIGlmIChkYXRhICE9IG51bGwpIHsgdGhpcy5RdWVyeUluZm9EYXRhcyA9IEpTT04ucGFyc2UoZGF0YS5wYXJhc21hcHBpbmcudmFsdWUpOyB9IGVsc2UgaWYgKHRoaXMuZWRpdG9yUGFyYW1zLlF1ZXJ5SW5mb0RhdGFzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuUXVlcnlJbmZvRGF0YXMgPSB0aGlzLmVkaXRvclBhcmFtcy5RdWVyeUluZm9EYXRhcztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VycmVudG1vZGUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wYXJhc01hcHBpbmdTZXJ2aWNlLmdldFBhcmFzTWFwcGluZyh0aGlzLnFvTWFuYWdlckNvZGUsIHRoaXMucXVlcnlJZCwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgZGF0YSA9PiB7XHJcbiAgICAgICAgICBpZiAoZGF0YSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlwYXJhRGF0YSA9IEpTT04ucGFyc2UoZGF0YS5wYXJhc21hcHBpbmcucXVlcnlwYXJhRGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuc291cmNlcGFyYURhdGEgPSBKU09OLnBhcnNlKGRhdGEucGFyYXNtYXBwaW5nLnNvdXJjZXBhcmFEYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5RdWVyeUluZm9EYXRhcyA9IEpTT04ucGFyc2UoZGF0YS5wYXJhc21hcHBpbmcudmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHRoaXMuZ3JpZEluaXQoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ3JpZEluaXQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGNvbnN0IGVudW1PcHRzID0geyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICduYW1lJywgZGF0YTogdGhpcy5xdWVyeXBhcmFEYXRhIH07XHJcbiAgICBjb25zdCBlbnVtT3B0czEgPSB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ25hbWUnLCBkYXRhOiB0aGlzLm1hcHBpbmdUeXBlRGF0YSB9O1xyXG4gICAgY29uc3QgZW51bU9wdHMyID0geyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICduYW1lJywgZGF0YTogdGhpcy5zb3VyY2VwYXJhRGF0YSB9O1xyXG4gICAgdGhpcy5jb2x1bW5zID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICdwYXJhbWV0ZXInLCB3aWR0aDogMTAwLCB0aXRsZTogc2VsZi5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5wYXJhbXNNYXBwaW5nLmNvbHVtbkhlYWRlcicpWzBdLCBmb3JtYXR0ZXI6IHsgdHlwZTogJ2VudW0nLCBvcHRpb25zOiBlbnVtT3B0cyB9LFxyXG4gICAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgICAgdHlwZTogRWRpdG9yVHlwZXMuQ09NQk9MSVNULFxyXG4gICAgICAgICAgb3B0aW9uczogeyAuLi5lbnVtT3B0cywgaWRGaWVsZDogJ3ZhbHVlJyB9LFxyXG4gICAgICAgICAgdmFsaWRhdG9yczogW1xyXG4gICAgICAgICAgICB7IHR5cGU6ICdyZXF1aXJlZCcsIG1lc3NhZ2VyOiAn6K+l5a2X5q615LiN6IO95Li656m677yBJyB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICdtYXBwaW5nVHlwZScsIHdpZHRoOiAxMDAsIHRpdGxlOiBzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcuY29sdW1uSGVhZGVyJylbMV0sIGZvcm1hdHRlcjogeyB0eXBlOiAnZW51bScsIG9wdGlvbnM6IGVudW1PcHRzMSB9LFxyXG4gICAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgICAgdHlwZTogRWRpdG9yVHlwZXMuQ09NQk9MSVNULFxyXG4gICAgICAgICAgb3B0aW9uczogeyAuLi5lbnVtT3B0czEsIGlkRmllbGQ6ICd2YWx1ZScgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGZpZWxkOiAnc291cmNlUGFyYW1ldGVyJywgd2lkdGg6IDEwMCwgdGl0bGU6IHNlbGYubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucGFyYW1zTWFwcGluZy5jb2x1bW5IZWFkZXInKVsyXSwgZm9ybWF0dGVyOiB7IHR5cGU6ICdlbnVtJywgb3B0aW9uczogZW51bU9wdHMyIH0sXHJcbiAgICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgICB0eXBlOiBFZGl0b3JUeXBlcy5DT01CT0xJU1QsXHJcbiAgICAgICAgICBvcHRpb25zOiB7IC4uLmVudW1PcHRzMiwgaWRGaWVsZDogJ3ZhbHVlJyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICdjb25zdGFudCcsIHdpZHRoOiAxMDAsIHRpdGxlOiBzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcuY29sdW1uSGVhZGVyJylbM10sXHJcbiAgICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgICB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICdleHByZXNzaW9uJywgd2lkdGg6IDEwMCwgdGl0bGU6IHNlbGYubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucGFyYW1zTWFwcGluZy5jb2x1bW5IZWFkZXInKVs0XSxcclxuICAgICAgICBlZGl0b3I6IHtcclxuICAgICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLlRFWFRCT1hcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBmaWVsZDogJ3BhcmFpc3VzZWQnLCB3aWR0aDogMTAwLCB0aXRsZTogc2VsZi5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5wYXJhbXNNYXBwaW5nLmNvbHVtbkhlYWRlcicpWzVdLFxyXG4gICAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgICAgdHlwZTogRWRpdG9yVHlwZXMuQ0hFQ0tCT1hcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBvblJlc2l6ZWQoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5zaXplLmhlaWdodCA9IGV2ZW50Lm5ld0hlaWdodDtcclxuICAgIHRoaXMuc2l6ZS53aWR0aCA9IGV2ZW50Lm5ld1dpZHRoO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICBpZiAodGhpcy5kZzIpIHtcclxuICAgICAgdGhpcy5kZzIuZW5kUm93RWRpdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIGNsaWNrQ29uZmlybSgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy51cGRhdGVQYXJhc01hcHBpbmcoKTtcclxuICAgIHNlbGYuc3VibWl0TW9kYWwuZW1pdCh7IHZhbHVlOiBzZWxmLlF1ZXJ5SW5mb0RhdGFzIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlYmVmb3JlQ2xvc2UgPSAoKTogT2JzZXJ2YWJsZTxhbnk+ID0+IHtcclxuICAgIGlmICh0aGlzLmRnMSkge1xyXG4gICAgICB0aGlzLmRnMS5lbmRSb3dFZGl0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVBhcmFzTWFwcGluZygpO1xyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUGFyYXNNYXBwaW5nKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoc2VsZi5RdWVyeUluZm9EYXRhcyAmJiBzZWxmLlF1ZXJ5SW5mb0RhdGFzLmxlbmd0aCkge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXHJcbiAgICAgIHNlbGYuc2F2ZURhdGFzID0geyBJZDogRXZlbnRCdXMuZ3VpZCgpLCBwYXJhc21hcHBpbmc6IEpTT04uc3RyaW5naWZ5KHsgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHNlbGYuUXVlcnlJbmZvRGF0YXMpLCBxdWVyeXBhcmFEYXRhOiBKU09OLnN0cmluZ2lmeShzZWxmLnF1ZXJ5cGFyYURhdGEpLCBzb3VyY2VwYXJhRGF0YTogSlNPTi5zdHJpbmdpZnkoc2VsZi5zb3VyY2VwYXJhRGF0YSkgfSksIHF1ZXJ5aWQ6IHNlbGYucXVlcnlJZCwgZGF0YXNvdXJjZWlkOiBzZWxmLnFvTWFuYWdlckNvZGUgfTtcclxuICAgICAgc2VsZi5wYXJhc01hcHBpbmdTZXJ2aWNlLnNhdmVQYXJhc01hcHBpbmcoc2VsZi5zYXZlRGF0YXMsIHNlbGYucXVlcnlSZWxhdGl2ZVVybClcclxuICAgICAgICAuc3Vic2NyaWJlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLnBhcmFzTWFwcGluZ1NlcnZpY2UuZGVsZXRlUGFyYXNNYXBwaW5nKHNlbGYucW9NYW5hZ2VyQ29kZSwgc2VsZi5xdWVyeUlkLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZSgpO1xyXG4gICAgICBzZWxmLlF1ZXJ5SW5mb0RhdGFzID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEaWFsb2dTaG93KCkge1xyXG4gICAgdGhpcy5mYXJyaXNEaWFsb2cuc2hvdygpO1xyXG4gIH1cclxuXHJcbiAgYWRkRmlsdGVyUm93KCRldmVudDogYW55KSB7XHJcbiAgICB0aGlzLlF1ZXJ5SW5mb0RhdGFzLnB1c2goe1xyXG4gICAgICAnaWQnOiBFdmVudEJ1cy5ndWlkKCksXHJcbiAgICAgICdwYXJhbWV0ZXInOiAnJyxcclxuICAgICAgJ3NvdXJjZVBhcmFtZXRlcic6ICcnLFxyXG4gICAgICAnbWFwcGluZ1R5cGUnOiAwLFxyXG4gICAgICAnY29uc3RhbnQnOiAnJyxcclxuICAgICAgJ2V4cHJlc3Npb24nOiAnJyxcclxuICAgICAgJ3BhcmFpc3VzZWQnOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLmRnMSkge1xyXG4gICAgICB0aGlzLmRnMS5yZWZyZXNoKCk7XHJcbiAgfVxyXG4gIH1cclxuXHJcbiAgYWRkRmlsdGVyUm93Rm9ySWRlKCRldmVudDogYW55KSB7XHJcbiAgICB0aGlzLlF1ZXJ5SW5mb0RhdGFzLnB1c2goe1xyXG4gICAgICAnaWQnOiBFdmVudEJ1cy5ndWlkKCksXHJcbiAgICAgICdwYXJhbWV0ZXInOiAnJyxcclxuICAgICAgJ3NvdXJjZVBhcmFtZXRlcic6ICcnLFxyXG4gICAgICAnbWFwcGluZ1R5cGUnOiAwLFxyXG4gICAgICAnY29uc3RhbnQnOiAnJyxcclxuICAgICAgJ2V4cHJlc3Npb24nOiAnJyxcclxuICAgICAgJ3BhcmFpc3VzZWQnOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLmRnMikge1xyXG4gICAgICB0aGlzLmRnMi5yZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVGaWx0ZXJSb3coJGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuZGcxLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRoaXMuUXVlcnlJbmZvRGF0YXMsIGZ1bmN0aW9uIChuOiBhbnkpIHsgcmV0dXJuIG4uaWQgPT09IHNlbGYuZGcxLnNlbGVjdGVkUm93LmlkOyB9KTtcclxuICAgICAgdGhpcy5RdWVyeUluZm9EYXRhcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB0aGlzLmRnMS5yZWZyZXNoKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcubWVzc2FnZS52YWxpZGF0ZS5zZWxlY3QnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVGaWx0ZXJSb3dGb3JJZGUoJGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuZGcyLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRoaXMuUXVlcnlJbmZvRGF0YXMsIGZ1bmN0aW9uIChuOiBhbnkpIHsgcmV0dXJuIG4uaWQgPT09IHNlbGYuZGcyLnNlbGVjdGVkUm93LmlkOyB9KTtcclxuICAgICAgdGhpcy5RdWVyeUluZm9EYXRhcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB0aGlzLmRnMi5yZWZyZXNoKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyhzZWxmLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnBhcmFtc01hcHBpbmcubWVzc2FnZS52YWxpZGF0ZS5zZWxlY3QnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYW5jZWxFZGl0KCRldmVudDogYW55KSB7XHJcbiAgICBpZiAodGhpcy5kZzEpIHtcclxuICAgICAgdGhpcy5kZzEuZW5kUm93RWRpdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FuY2VsRWRpdEZvcklkZSgkZXZlbnQ6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuZGcyKSB7XHJcbiAgICAgIHRoaXMuZGcyLmVuZFJvd0VkaXQoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19