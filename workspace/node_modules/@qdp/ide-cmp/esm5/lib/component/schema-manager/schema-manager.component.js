/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef, Optional, Injector } from '@angular/core';
import { of } from 'rxjs';
import { DialogComponent } from '@farris/ui-dialog';
import { TreeTableComponent } from '@farris/ui-treetable';
import { MessagerService } from '@farris/ui-messager';
import { FarrisPanelComponent } from '@farris/ui-panel';
import { NotifyService } from '@farris/ui-notify';
import { SchemaService } from '../../service/schema/schema.service';
import { SchemaEditorComponent } from '../schema-editor/schema-editor.component';
import { ChartsSchemaEditorComponent } from '../charts-schema-editor/charts-schema-editor.component';
import { EventBus, RtfServices } from '@qdp/common';
import { LocalizeService } from '@qdp/localize';
import { FormErrorService } from '@farris/command-services';
import { CacheService } from '@ecp-caf/caf-common';
var SchemaManagerComponent = /** @class */ (function () {
    function SchemaManagerComponent(schemaService, msgService, notifyService, injector) {
        var _this = this;
        this.schemaService = schemaService;
        this.msgService = msgService;
        this.notifyService = notifyService;
        this.injector = injector;
        this.editorParams = {};
        this.schemaSelected = new EventEmitter();
        this.saveSchema = new EventEmitter();
        this.saveAsSchema = new EventEmitter();
        this.removeSchema = new EventEmitter();
        this.saveAndCloseSchema = new EventEmitter();
        this.dialogBeforeClose = new EventEmitter();
        this.closeModal = new EventEmitter();
        // 模态框确定后关闭，并传递参数
        this.submitModal = new EventEmitter();
        this.defaultExpand = true;
        this.inputCollapse = '收起';
        this.inputExpand = '展开';
        this.size = {};
        this.isShow = false;
        this.personSchema = 'personSchema' + EventBus.guid();
        this.orgSchema = 'orgSchema' + EventBus.guid();
        this.publicSchema = 'publicSchema' + EventBus.guid();
        this.defaultSchema = 'defaultSchema' + EventBus.guid();
        this.schemaTreeData = [
            {
                data: {
                    id: 'public_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '公共',
                    schemaType: 0,
                },
                expanded: true,
                children: []
            }, {
                data: {
                    id: 'org_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '单位',
                    schemaType: 2
                },
                expanded: true,
                children: []
            }, {
                data: {
                    id: 'person_schema',
                    isDefault: 0,
                    isPrefab: 1,
                    schemaName: '个人',
                    schemaType: 1
                },
                expanded: true,
                children: []
            }
        ];
        this.schemaDropDownData = [];
        this.isSchemaType = 0;
        this.isDefault = false;
        this.currentmode = false;
        this.qoManagerCode = '';
        this.modalConfig = {
            title: '格式方案',
            width: 900,
            height: 500,
            showButtons: true
        };
        this.chartsOption = {
            chartsType: {
                series: {
                    type: null
                }
            },
            chartsStyle: {
                title: {
                    text: null,
                    x: null,
                    y: null,
                    textStyle: {
                        lineHeight: 25,
                        fontSize: 25,
                        fontStyle: 'normal',
                        fontWight: 'normal',
                        fontFamily: 'Microsoft YaHei',
                        color: 'black'
                    }
                },
                legend: {
                    itemGap: 10,
                    itemWidth: 25,
                    itemHeight: 14,
                    align: 'auto',
                    orient: 'horizontal'
                },
                visualMap: [{
                        type: 'continuous',
                        top: 'top',
                        bottom: null,
                        left: 'right',
                        right: null,
                        pieces: [],
                        categories: [],
                        calculable: true,
                        inRange: {
                            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                        },
                        outOfRange: {
                            color: ['rgba(255,255,255,.2)']
                        },
                        controller: {
                            inRange: {
                                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                            },
                            outOfRange: {
                                color: ['#444']
                            }
                        },
                        textStyle: {
                            color: '#837' // 值域控件的文本颜色
                        },
                    }]
            },
            chartsData: {
                xAxis: {
                    type: 'category',
                    position: 'bottom'
                },
                yAxis: {
                    type: 'value',
                    position: 'left'
                },
                series: {
                    type: null,
                    encode: {
                        x: [],
                        y: []
                    }
                },
                legend: {
                    data: []
                }
            }
        };
        this.cacheSchemaData = {};
        this.operations = {};
        this.subscriptions = [];
        this.svgSchema = true;
        this.handlebeforeClose = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var id = '';
            if (_this.schemaId) {
                id = _this.schemaId === 'prefab' ? '1' : _this.schemaId;
            }
            if (!id && _this.schemaInfo && _this.schemaInfo.isDefaultSchema) {
                id = _this.schemaInfo.isDefaultSchema.id;
            }
            _this.dialogBeforeClose.emit(id);
            return of(true);
        });
        this.personSchema = this.personSchema + EventBus.guid();
        this.publicSchema = this.publicSchema + EventBus.guid();
        this.defaultSchema = this.defaultSchema + EventBus.guid();
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.modalConfig.title = this.localizeService.getValue('ideCmp.schemaManager.dailogName');
            this.schemaTreeData[0].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePublic');
            this.schemaTreeData[1].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg');
            this.schemaTreeData[2].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal');
            this.formErrorService = this.injector.get(FormErrorService);
            this.cache = this.injector.get(CacheService);
        }
    }
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.tabId = RtfServices.getTabId(this.queryId);
        EventBus.register('openAdvanceTemplateDialog', this.initSelectedSchemaId.bind(this), this.tabId);
        this.subscriptions.push(self.schemaService.operationChange.subscribe((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                self.operations = value;
            }
            // console.log(value);
        })));
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.initSelectedSchemaId = /**
     * @return {?}
     */
    function () {
        this.selectedSchemaId = '';
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    SchemaManagerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        for (var changeName in changes) {
            /** @type {?} */
            var newValue = changes[changeName].currentValue;
            if (newValue !== null && newValue !== void 0) {
                switch (changeName) {
                    case 'schemaInfo':
                        if (newValue) {
                            this.schemaInfoChange(newValue);
                        }
                        break;
                    case 'colList':
                        if (newValue) {
                            this.colListChange(newValue);
                        }
                        break;
                    case 'editorParams':
                        this.schemaManagerInitForIDE();
                        break;
                }
            }
        }
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        if (this.subscriptions && this.subscriptions.length) {
            try {
                for (var _b = tslib_1.__values(this.subscriptions), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var subscription = _c.value;
                    subscription.unsubscribe();
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    SchemaManagerComponent.prototype.colListChange = /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    function (newValue) {
        if (this.controlType !== 'charts') {
            if (this.schemaTreeData[0].data['schemaValue'] && this.schemaTreeData[1].data['schemaValue'] && this.schemaTreeData[2].data['schemaValue'] && newValue && newValue.length) {
                /** @type {?} */
                var cols = this.initColumns(this.objectCopy(newValue));
                this.schemaTreeData[0].data['schemaValue'].columnOption.colList = cols;
                this.schemaTreeData[1].data['schemaValue'].columnOption.colList = cols;
                this.schemaTreeData[2].data['schemaValue'].columnOption.colList = cols;
            }
            if (this.cacheSchemaData['public_schema'] && this.cacheSchemaData['public_schema'].schemaValue
                && this.cacheSchemaData['public_schema'].schemaValue.columnOption && this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList) {
                if (this.colList && this.colList.length) {
                    /** @type {?} */
                    var cols = this.initColumns(this.objectCopy(this.colList));
                    this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList = cols;
                }
                if (this.currTreeNode.id === 'public_schema') {
                    this.currTreeNodeChanged({
                        node: {
                            data: this.cacheSchemaData['public_schema']
                        }
                    });
                }
            }
        }
    };
    /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    SchemaManagerComponent.prototype.initColumns = /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    function (columns) {
        if (columns && columns.length) {
            columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                col.colWidth = 150, col.visible = true, col.isFixed = false, col.align = 1,
                    col.formatType = 0, col.formattor = '', col.sort = 0, col.pageAggre = 0, col.pageAggreText = '',
                    col.isGroup = false, col.groupAggre = 0, col.groupAggreText = '', col.totalAggre = 0,
                    col.totalAggreText = '', col.dimension = 0, col.rowColor = '', col.showType = '0';
            }));
        }
        return columns;
    };
    /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    SchemaManagerComponent.prototype.schemaInfoChange = /**
     * @private
     * @param {?} newValue
     * @return {?}
     */
    function (newValue) {
        var _this = this;
        this.controlInit();
        if (this.controlType !== 'charts') {
            this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = newValue && newValue.preSchema ? newValue.preSchema.schemaValue : null;
        }
        else {
            this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = this.chartsOption;
        }
        if (newValue && newValue.schemaList) {
            // 初始化格式方案管理的方案导航树控件以及方案管理的下拉控件
            Object.keys(newValue.schemaList).forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) {
                _this.cacheSchemaData[newValue.schemaList[key].id] = JSON.parse(JSON.stringify(newValue.schemaList[key]));
                _this.schemaDropDownData.push(newValue.schemaList[key]);
                if ((newValue.schemaList[key].schemaType - 0) === 0) {
                    _this.schemaTreeData[0].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
                else if ((newValue.schemaList[key].schemaType - 0) === 2) {
                    _this.schemaTreeData[1].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
                else {
                    _this.schemaTreeData[2].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });
                }
            }));
        }
        this.schemaTree.updateSerializedValue();
        if (newValue && newValue.isDefaultSchema && newValue.isDefaultSchema.id && this.selectedSchemaId !== 'selected_prefab') {
            if (!this.schemaId || (this.schemaId && '1,public_schema'.indexOf(this.schemaId) >= 0) || ('1,public_schema'.indexOf(this.schemaId) >= 0 && !this.validateSchemaId(this.schemaId, newValue)) || ('1,public_schema'.indexOf(this.schemaId) < 0 && !this.validateSchemaId(this.schemaId, newValue))) {
                this.schemaId = newValue.isDefaultSchema.id;
            }
            this.isDefault = newValue.isDefaultSchema.isDefault === 1 ? true : false;
            this.isSchemaType = newValue.isDefaultSchema.schemaType - 0;
            this.schemaName = newValue.isDefaultSchema.schemaName;
        }
        else {
            if (!this.schemaId || !this.validateSchemaId(this.schemaId, newValue)) {
                this.schemaId = 'prefab';
            }
        }
        if (this.schemaId === 'prefab' || this.schemaId === '1' || !this.schemaId) {
            this.treeNodeSelected('public_schema');
            this.isDefault = false;
            this.isSchemaType = 0;
            this.schemaName = '';
        }
        else {
            this.treeNodeSelected(this.schemaId);
        }
    };
    /**
     * @private
     * @return {?}
     */
    SchemaManagerComponent.prototype.schemaManagerInitForIDE = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        if (this.editorParams && this.editorParams.queryId) {
            this.subscriptions = [];
            // 订阅格式信息的变化
            this.subscriptions.push(self.schemaService.schemaInfo.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (value) {
                    /** @type {?} */
                    var schemaInfoAll = Object.assign({}, value);
                    self.schemaInfo = schemaInfoAll;
                    if (self.schemaInfo.schemaList) {
                        self.schemaInfo.schemaList = self.schemaInfo.schemaList[self.editorParams.queryId];
                    }
                    self.schemaInfoChange(self.schemaInfo);
                }
            })));
            this.subscriptions.push(
            // 订阅数据列信息的变化
            self.schemaService.colList.subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                self.colList = value;
                self.colListChange(self.colList);
            })));
            if (this.schemaEditor && this.schemaEditor.tabs) {
                this.schemaEditor.tabs.selectTab('title');
            }
            this.queryId = this.editorParams.queryId;
            this.controlType = this.editorParams.controlType;
            this.qoManagerCode = this.editorParams.qoManagerCode;
            this.queryRelativeUrl = this.editorParams.queryRelativeUrl;
            this.currentmode = true;
            /** @type {?} */
            var organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            this.schemaService.getSchemaList(self.queryId, '', organizationId, self.queryRelativeUrl, self.groupType).subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                /** @type {?} */
                var schemaData = value ? value : [];
                /** @type {?} */
                var schemaId = schemaData && schemaData.length && schemaData[0] && schemaData[0].id ? schemaData[0].id : '1';
                /** @type {?} */
                var params = {};
                params['qoManagerCode'] = self.qoManagerCode;
                params['pageIndex'] = 0;
                params['schemaId'] = schemaId;
                params['entityData'] = '';
                params['extendCond'] = '';
                if (self.editorParams && self.editorParams.dynamicCols && self.editorParams.dynamicCols.length) {
                    self.schemaService.getSpreadTemplate(schemaId, self.queryId, self.editorParams.dynamicCols, self.queryRelativeUrl, null, self.editorParams.dynamicCols).subscribe();
                }
                else {
                    self.schemaService.getCol(params, self.queryRelativeUrl).subscribe((/**
                     * @param {?} result
                     * @return {?}
                     */
                    function (result) {
                        if (result && result.dynamicCols) {
                            self.schemaService.getSpreadTemplate(schemaId, self.queryId, result.dynamicCols, self.queryRelativeUrl, null, result.dynamicCols).subscribe();
                        }
                    }));
                }
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    SchemaManagerComponent.prototype.controlInit = /**
     * @private
     * @return {?}
     */
    function () {
        this.currTreeNode = undefined;
        this.cacheSchemaData = {};
        this.schemaTreeData[0].children = [];
        this.schemaTreeData[1].children = [];
        this.schemaTreeData[2].children = [];
        this.schemaDropDownData = [];
    };
    /**
     * @private
     * @param {?} id
     * @param {?} newValue
     * @return {?}
     */
    SchemaManagerComponent.prototype.validateSchemaId = /**
     * @private
     * @param {?} id
     * @param {?} newValue
     * @return {?}
     */
    function (id, newValue) {
        /** @type {?} */
        var result = false;
        if (!id) {
            return result;
        }
        if (newValue && newValue.schemaList) {
            for (var key in newValue.schemaList) {
                if (id === key) {
                    result = true;
                }
            }
        }
        return result;
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleDialogShow = /**
     * @return {?}
     */
    function () {
        this.personSchema = 'personSchema' + EventBus.guid();
        this.publicSchema = 'publicSchema' + EventBus.guid();
        this.defaultSchema = 'defaultSchema' + EventBus.guid();
        if (this.controlType !== 'charts') {
            if (this.schemaEditor && this.schemaEditor.tabs) {
                this.schemaEditor.tabs.selectTab('title');
            }
        }
        else {
            if (this.chartsSchemaEditor && this.chartsSchemaEditor.tabs) {
                this.chartsSchemaEditor.tabs.selectTab('type');
            }
        }
        this.isShow = true;
        this.farrisDialog.show();
    };
    /**
     * @param {?} id
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleDropDownItemClick = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.schemaId = id;
        if (this.schemaId === 'prefab') {
            this.selectedSchemaId = 'selected_prefab';
            this.treeNodeSelected('public_schema');
        }
        else {
            this.selectedSchemaId = id;
            this.treeNodeSelected(this.schemaId);
        }
        this.schemaSelected.emit(id === 'prefab' ? '1' : id);
    };
    /**
     * @param {?} option
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleTabsSelectChange = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (this.farrisPanelComponent && this.farrisPanelComponent.modelValue.length) {
            this.farrisPanelComponent.updateModel('schemaInfo');
        }
        this.updateCurrSchema(option, 'tabChanged');
    };
    /**
     * @param {?} value
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleSchemaTypeSelect = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.isSchemaType = value;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleTreeNodeSelected = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var self = this;
        if (!this.currTreeNode) {
            this.currTreeNodeChanged(data);
        }
        else {
            if (data.node.data.id !== this.currTreeNode.id) {
                if (this.schemaEditor || this.chartsSchemaEditor) {
                    if (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema') {
                        this.currTreeNodeChanged(data);
                    }
                    else {
                        /** @type {?} */
                        var compare = true;
                        this.updateCurrSchema(null);
                        if (this.controlType === 'charts' && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData) {
                            this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type.replace('1', '');
                        }
                        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
                            if (this.controlType === 'charts') {
                                this.currTreeNode.schemaValue.chartsData.series.type = this.currTreeNode.schemaValue.chartsType.series.type;
                                this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsType.series.type;
                            }
                            compare = (JSON.stringify(this.currTreeNode.schemaValue) ===
                                JSON.stringify(this.cacheSchemaData[this.currTreeNode.id].schemaValue)
                                && this.currTreeNode.schemaName === this.cacheSchemaData[this.currTreeNode.id].schemaName
                                && this.currTreeNode.schemaType === this.cacheSchemaData[this.currTreeNode.id].schemaType
                                && this.currTreeNode.isDefault === this.cacheSchemaData[this.currTreeNode.id].isDefault);
                            if (false && !compare && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type !== 'effectScatter') {
                                this.msgService.question(this.localizeService.getValue('ideCmp.schemaManager.message.validate.judgeUpdate'), (/**
                                 * @return {?}
                                 */
                                function () {
                                    self.currTreeNodeChanged(data);
                                }), (/**
                                 * @return {?}
                                 */
                                function () {
                                    _this.schemaTree.selectNode(_this.cacheSchemaData[_this.currTreeNode.id].id);
                                    _this.schemaName = _this.cacheSchemaData[_this.currTreeNode.id].schemaName;
                                    _this.isSchemaType = _this.cacheSchemaData[_this.currTreeNode.id].schemaType;
                                    _this.isDefault = _this.cacheSchemaData[_this.currTreeNode.id].isDefault === 1 ? true : false;
                                }));
                            }
                            else {
                                this.currTreeNodeChanged(data);
                            }
                        }
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    SchemaManagerComponent.prototype.currTreeNodeChanged = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.currTreeNode && (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema')) {
            delete this.cacheSchemaData[this.currTreeNode.id];
        }
        this.currTreeNode = data.node.data;
        if (this.currTreeNode.id === 'public_schema') {
            if (this.controlType !== 'charts' && this.colList && this.colList.length) {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 0;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePublic');
            this.schemaId = 'prefab';
        }
        else if (this.currTreeNode.id === 'person_schema') {
            if (this.controlType !== 'charts') {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 1;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePersonal');
            this.schemaId = 'prefab';
        }
        else if (this.currTreeNode.id === 'org_schema') {
            if (this.controlType !== 'charts') {
                this.currTreeNode.schemaValue.columnOption.colList = this.colList;
            }
            this.isDefault = false;
            this.isSchemaType = 2;
            this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeOrg');
            this.schemaId = 'prefab';
        }
        else {
            this.isDefault = this.currTreeNode.isDefault === 1 ? true : false;
            this.isSchemaType = this.currTreeNode.schemaType - 0;
            this.schemaName = this.currTreeNode.schemaName;
            this.schemaId = this.currTreeNode.id;
        }
        this.cacheSchemaData[this.currTreeNode.id] = JSON.parse(JSON.stringify(this.currTreeNode));
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    SchemaManagerComponent.prototype.treeNodeSelected = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.schemaTree.clearSelections();
        if (id) {
            this.schemaTree.selectNode(id);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    SchemaManagerComponent.prototype.onResized = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.size.height = event.newHeight || 300;
        this.size.width = event.newWidth;
        if (this.schemaTree) {
            this.schemaTree.resize(this.size);
        }
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleSaveAsClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        this.updateCurrSchema(null, 'save_as');
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData['public_schema']) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData['public_schema'].schemaType === 0) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            /** @type {?} */
            var str = JSON.stringify(this.cacheSchemaData['public_schema']);
            /** @type {?} */
            var schema = JSON.parse(str);
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (var key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            var textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            schema.id = '';
            /** @type {?} */
            var organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                _this.schemaId = '';
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    _this.schemaId = data.isDefaultSchema.id;
                }
                _this.notifyService['success']((/** @type {?} */ ({
                    title: _this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: _this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                _this.saveAsSchema.emit();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                self.formErrorService.exception(error.Message, error);
            }));
        }
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleRemoveClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var self = this;
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' &&
                this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' &&
                this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                /** @type {?} */
                var organizationId = this.cache.get(this.tabId + 'organizationId') || '';
                this.schemaService.deleteSchema(this.cacheSchemaData[this.currTreeNode.id].id, this.queryId, this.queryRelativeUrl, this.groupType, organizationId).subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    data.subscribe((/**
                     * @param {?} value
                     * @return {?}
                     */
                    function (value) {
                        _this.schemaId = '';
                        _this.notifyService['success']((/** @type {?} */ ({
                            title: _this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: _this.localizeService.getValue('ideCmp.schemaManager.message.delete.success'), timeout: 3000
                        })));
                        _this.removeSchema.emit();
                    }));
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    self.formErrorService.exception(error.Message, error);
                }));
            }
            else {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));
            }
        }
        else {
            this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));
        }
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleSaveClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
        }
        this.updateCurrSchema(null);
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            /** @type {?} */
            var str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);
            /** @type {?} */
            var schema = JSON.parse(str);
            if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {
                schema.id = '';
            }
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (var key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            var textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            /** @type {?} */
            var organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    _this.schemaId = data.isDefaultSchema.id;
                }
                _this.schemaId = _this.schemaId === 'prefab' ? '' : _this.schemaId;
                _this.notifyService['success']((/** @type {?} */ ({
                    title: _this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: _this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                _this.treeNodeSelected(_this.schemaId);
                _this.saveSchema.emit();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.formErrorService.exception(error.Message, error);
            }));
        }
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleSaveAndCloseClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
        }
        this.updateCurrSchema(null);
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));
                return;
            }
            if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {
                this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));
                return;
            }
            /** @type {?} */
            var str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);
            /** @type {?} */
            var schema = JSON.parse(str);
            if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {
                schema.id = '';
            }
            schema.queryId = this.queryId;
            schema.schemaValue = JSON.stringify(schema.schemaValue);
            if (!schema.schemaName) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));
                return;
            }
            else {
                for (var key in this.cacheSchemaData) {
                    if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));
                        if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {
                            this.farrisPanelComponent.updateModel('schemaInfo');
                        }
                        return;
                    }
                }
            }
            if (this.controlType !== 'charts') {
                if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {
                    this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                    return;
                }
            }
            if (schema.schemaName && schema.schemaName.length > 100) {
                this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));
                return;
            }
            /** @type {?} */
            var textSortColumn = { isText: [] };
            this.getTextColumnSort(schema, textSortColumn);
            if (textSortColumn.isText.length) {
                this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));
                return;
            }
            /** @type {?} */
            var organizationId = this.cache.get(this.tabId + 'organizationId') || '';
            schema.orgId = organizationId;
            this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data && data.isDefaultSchema && data.isDefaultSchema.id) {
                    _this.schemaId = data.isDefaultSchema.id;
                }
                _this.schemaId = _this.schemaId === 'prefab' ? '' : _this.schemaId;
                _this.notifyService['success']((/** @type {?} */ ({
                    title: _this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: _this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000
                })));
                _this.treeNodeSelected(_this.schemaId);
                _this.saveAndCloseSchema.emit();
                if (!_this.currentmode) {
                    _this.farrisDialog.close();
                }
                else {
                    _this.closeModal.emit();
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.formErrorService.exception(error.Message, error);
            }));
        }
    };
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    SchemaManagerComponent.prototype.updateCurrSchema = /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    function (options, type) {
        if (this.controlType !== 'charts') {
            this.updateListSchema(options, type);
        }
        else {
            this.updateChartsSchema(options, type);
        }
    };
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    SchemaManagerComponent.prototype.updateListSchema = /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    function (options, type) {
        /** @type {?} */
        var option = options;
        if (!option) {
            if (this.schemaEditor) {
                option = this.schemaEditor.getOption();
            }
        }
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            /** @type {?} */
            var sId = this.currTreeNode.id;
            if (type === 'save_as') {
                sId = 'public_schema';
                this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));
                this.cacheSchemaData[sId].id = sId;
            }
            if (option && option.titleOption) {
                this.cacheSchemaData[sId].schemaValue.titleOption = option.titleOption;
            }
            if (option && option.columnOption && option.columnOption.length) {
                this.cacheSchemaData[sId].schemaValue.columnOption.colList = option.columnOption;
            }
            if (option && option.styleOption) {
                this.cacheSchemaData[sId].schemaValue.styleOption = option.styleOption;
            }
            if (option && option.otherOption) {
                this.cacheSchemaData[sId].schemaValue.otherOption = option.otherOption;
            }
            if (type !== 'tabChanged') {
                this.cacheSchemaData[sId].schemaName = this.schemaName;
                this.cacheSchemaData[sId].schemaType = this.isSchemaType;
                this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;
            }
        }
    };
    /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    SchemaManagerComponent.prototype.updateChartsSchema = /**
     * @private
     * @param {?} options
     * @param {?=} type
     * @return {?}
     */
    function (options, type) {
        /** @type {?} */
        var option = options;
        if (!option) {
            if (this.chartsSchemaEditor) {
                option = this.chartsSchemaEditor.getOption();
            }
        }
        if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {
            /** @type {?} */
            var sId = this.currTreeNode.id;
            if (type === 'save_as') {
                sId = 'public_schema';
                this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));
                this.cacheSchemaData[sId].id = sId;
            }
            if (option && option.chartsType) {
                this.cacheSchemaData[sId].schemaValue.chartsType = option.chartsType;
            }
            if (option && option.chartsData) {
                this.cacheSchemaData[sId].schemaValue.chartsData = option.chartsData;
                if (option && option.groupSummarySet) {
                    this.cacheSchemaData[sId].schemaValue['groupSummarySet'] = option.groupSummarySet;
                }
            }
            if (option && option.chartsStyle) {
                this.cacheSchemaData[sId].schemaValue.chartsStyle = option.chartsStyle;
                if (option && option.customOption) {
                    if (option.customOption === 'error') {
                        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));
                        return;
                    }
                }
                this.cacheSchemaData[sId].schemaValue['customOption'] = option.customOption;
            }
            this.cacheSchemaData[sId].schemaValue.chartsData.series.type = this.cacheSchemaData[sId].schemaValue.chartsType.series.type;
            if (this.cacheSchemaData[sId].schemaValue.chartsData.legend) {
                this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.show = this.cacheSchemaData[sId].schemaValue.chartsData.legend.show;
                this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.data = this.cacheSchemaData[sId].schemaValue.chartsData.legend.data;
            }
            if (type !== 'tabChanged') {
                this.cacheSchemaData[sId].schemaName = this.schemaName;
                this.cacheSchemaData[sId].schemaType = this.isSchemaType;
                this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;
            }
        }
    };
    /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    SchemaManagerComponent.prototype.crosstabColumnValidate = /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    function (columns) {
        /** @type {?} */
        var flag = false;
        if (this.controlType === 'crosstab') {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < columns.length; i++) {
                if (columns[i].groupAggre !== 4 && columns[i].totalAggre !== 4) {
                    if ((columns[i].dimension - 0) === 3 && !'int,integer,float,double,decimal,number'.includes(columns[i].type ? columns[i].type.toLowerCase() : '')) {
                        flag = true;
                        break;
                    }
                }
            }
        }
        return flag;
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    SchemaManagerComponent.prototype.objectCopy = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var str = JSON.stringify(obj);
        return JSON.parse(str);
    };
    /**
     * @return {?}
     */
    SchemaManagerComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    SchemaManagerComponent.prototype.handleHover = /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    function (type, state) {
        this.svgSchema = state === 1;
    };
    /**
     * @param {?} schema
     * @param {?} params
     * @return {?}
     */
    SchemaManagerComponent.prototype.getTextColumnSort = /**
     * @param {?} schema
     * @param {?} params
     * @return {?}
     */
    function (schema, params) {
        var _this = this;
        /** @type {?} */
        var schemaValue;
        if (schema && typeof schema.schemaValue === 'string') {
            schemaValue = JSON.parse(schema.schemaValue);
        }
        else {
            schemaValue = schema.schemaValue;
        }
        if (schemaValue.columnOption && schemaValue.columnOption.colList && schemaValue.columnOption.colList.length) {
            schemaValue.columnOption.colList.forEach((/**
             * @param {?} col
             * @return {?}
             */
            function (col) {
                _this.recursiveTextColumnSort(col, null, params);
            }));
        }
    };
    /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    SchemaManagerComponent.prototype.recursiveTextColumnSort = /**
     * @private
     * @param {?} col
     * @param {?} colList
     * @param {?} params
     * @return {?}
     */
    function (col, colList, params) {
        if (colList == null) {
            if (col.childList && col.childList.length) {
                this.recursiveTextColumnSort(null, col.childList, params);
            }
            else {
                if (col.type && col.type.toLowerCase() === 'text' && col.sort > 0) {
                    params.isText.push(col.bindField);
                }
                params.colIndex++;
            }
        }
        else {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < colList.length; i++) {
                if (colList[i].childList && colList[i].childList.length) {
                    this.recursiveTextColumnSort(null, colList[i].childList, params);
                }
                else {
                    if (colList[i].type && colList[i].type.toLowerCase() === 'text' && colList[i].sort > 0) {
                        params.isText.push(colList[i].bindField);
                    }
                    params.colIndex++;
                }
            }
        }
    };
    SchemaManagerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'schema-manager',
                    template: "<div class=\"btn-group\" fDropdown *ngIf=\"!currentmode\">\r\n  <button class=\"btn btn-secondary btn-outline-link btn-icontext f-rt-btn border-0 dropdown-toggle\" type=\"button\"\r\n    id=\"dropdownMenuButtonSchema\" fDropdownToggle (mouseenter)=\"handleHover(0, 0)\" (mouseleave)=\"handleHover(0, 1)\">\r\n    <span class=\"f-icon\" role=\"presentation\">\r\n      <img *ngIf=\"svgSchema\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmdlc2hpPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSfkuqTkupLmlrnmoYgxLeW4uOinhOaAgeWkh+S7vScgdHJhbnNmb3JtPSd0cmFuc2xhdGUoLTE5LjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTYnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDEzLjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J2ZhbmdhbicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMC4wMDAwMDAsIDEuMDAwMDAwKSc+PHBhdGggZD0nTTIuMzQyODU3MTQsMy4yMTUzODQ2MiBMMTYuMDU3MTQyOSwzLjIxNTM4NDYyIEMxNi4xNDgwNzQyLDMuMjE1Mzg0NjIgMTYuMjM1MjgxMywzLjI1MTA0Mzg1IDE2LjI5OTU3OTUsMy4zMTQ1MTc3IEMxNi4zNjM4Nzc3LDMuMzc3OTkxNTUgMTYuNCwzLjQ2NDA4MDU3IDE2LjQsMy41NTM4NDYxNSBMMTYuNCwxNS4wNjE1Mzg1IEMxNi40LDE1LjI0ODQ2NTYgMTYuMjQ2NDk3NiwxNS40IDE2LjA1NzE0MjksMTUuNCBMMi4zNDI4NTcxNCwxNS40IEMyLjE1MzUwMjM3LDE1LjQgMiwxNS4yNDg0NjU2IDIsMTUuMDYxNTM4NSBMMiwzLjU1Mzg0NjE1IEMyLDMuNDY0MDgwNTcgMi4wMzYxMjIzNCwzLjM3Nzk5MTU1IDIuMTAwNDIwNTMsMy4zMTQ1MTc3IEMyLjE2NDcxODcyLDMuMjUxMDQzODUgMi4yNTE5MjU3NywzLjIxNTM4NDYyIDIuMzQyODU3MTQsMy4yMTUzODQ2MiBaJyBpZD0n6Lev5b6EJyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjUnPjwvcGF0aD48cGF0aCBkPSdNMi4zNDI5MDc3MSwxIEw4Ljk4MTYwMSwxIEM5LjEwOTg5ODU2LDEgOS4yMjc0NTAwNywxLjA3MTY1NjYzIDkuMjg2Mjc0NDksMS4xODU2NTcxNCBMMTYuMzYxODMyMiwxNC44OTk5NDI4IEMxNi40MTY2ODUxLDE1LjAwNjI0NjUgMTYuNDEyMTYxLDE1LjEzMzQ0OTEgMTYuMzQ5ODk0NywxNS4yMzU1ODg2IEMxNi4yODc2Mjg0LDE1LjMzNzcyODEgMTYuMTc2NjIyNywxNS40IDE2LjA1Njk4NzMsMTUuNCBMMi4zNDI5MDc3MSwxNS40IEMyLjE1MzUyNTAxLDE1LjQgMiwxNS4yNDY0OTc2IDIsMTUuMDU3MTQyOCBMMiwxLjM0Mjg1NzE0IEMyLDEuMTUzNTAyMzcgMi4xNTM1MjUwMSwxIDIuMzQyOTA3NzEsMSBaJyBpZD0n6Lev5b6EJyBmaWxsPScjOEZBMUNCJz48L3BhdGg+PHBhdGggZD0nTTQuMzY2NDMzNTYsMy4yMTUzODQ2MiBMNy4zODc0MTI2LDMuMjE1Mzg0NjIgQzcuNDg4MTExOSwzLjIxNTM4NDYyIDcuNTM4NDYxNTQsMy4yODkyMzA3NyA3LjUzODQ2MTU0LDMuNDM2OTIzMDYgTDcuNTM4NDYxNTQsNS4yMDkyMzA3OCBDNy41Mzg0NjE1NCw1LjM1NjkyMzA5IDcuNDg4MTExODksNS40MzA3NjkyMyA3LjM4NzQxMjYsNS40MzA3NjkyMyBMNC4zNjY0MzM1Niw1LjQzMDc2OTIzIEM0LjI2NTczNDI1LDUuNDMwNzY5MjMgNC4yMTUzODQ2Miw1LjM1NjkyMzA4IDQuMjE1Mzg0NjIsNS4yMDkyMzA3OCBMNC4yMTUzODQ2MiwzLjQzNjkyMzA2IEM0LjIxNTM4NDYyLDMuMjg5MjMwNzUgNC4yNjU3MzQyNiwzLjIxNTM4NDYyIDQuMzY2NDMzNTYsMy4yMTUzODQ2MiBaJyBpZD0n6Lev5b6EJyBmaWxsPScjRkZGRkZGJyBmaWxsLXJ1bGU9J25vbnplcm8nPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==\" style=\"width: 16px; height: 16px; display: block;\" />\r\n      <img *ngIf=\"!svgSchema\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmdlc2hpMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9J+mhtemdoi0xJyBzdHJva2U9J25vbmUnIHN0cm9rZS13aWR0aD0nMScgZmlsbD0nbm9uZScgZmlsbC1ydWxlPSdldmVub2RkJz48ZyBpZD0n5Zu+5qCH6YCJ5Lit6aKc6Imy5YiH5Zu+5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTkuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNicgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMTMuMDAwMDAwLCAxMi4wMDAwMDApJz48ZyBpZD0nZmFuZ2FuJyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgwLjAwMDAwMCwgMS4wMDAwMDApJz48cGF0aCBkPSdNMi4zNDI4NTcxNCwzLjIxNTM4NDYyIEwxNi4wNTcxNDI5LDMuMjE1Mzg0NjIgQzE2LjE0ODA3NDIsMy4yMTUzODQ2MiAxNi4yMzUyODEzLDMuMjUxMDQzODUgMTYuMjk5NTc5NSwzLjMxNDUxNzcgQzE2LjM2Mzg3NzcsMy4zNzc5OTE1NSAxNi40LDMuNDY0MDgwNTcgMTYuNCwzLjU1Mzg0NjE1IEwxNi40LDE1LjA2MTUzODUgQzE2LjQsMTUuMjQ4NDY1NiAxNi4yNDY0OTc2LDE1LjQgMTYuMDU3MTQyOSwxNS40IEwyLjM0Mjg1NzE0LDE1LjQgQzIuMTUzNTAyMzcsMTUuNCAyLDE1LjI0ODQ2NTYgMiwxNS4wNjE1Mzg1IEwyLDMuNTUzODQ2MTUgQzIsMy40NjQwODA1NyAyLjAzNjEyMjM0LDMuMzc3OTkxNTUgMi4xMDA0MjA1MywzLjMxNDUxNzcgQzIuMTY0NzE4NzIsMy4yNTEwNDM4NSAyLjI1MTkyNTc3LDMuMjE1Mzg0NjIgMi4zNDI4NTcxNCwzLjIxNTM4NDYyIFonIGlkPSfot6/lvoQnIGZpbGw9JyM0Qjk5RkYnIG9wYWNpdHk9JzAuNic+PC9wYXRoPjxwYXRoIGQ9J00yLjM0MjkwNzcxLDEgTDguOTgxNjAxLDEgQzkuMTA5ODk4NTYsMSA5LjIyNzQ1MDA3LDEuMDcxNjU2NjMgOS4yODYyNzQ0OSwxLjE4NTY1NzE0IEwxNi4zNjE4MzIyLDE0Ljg5OTk0MjggQzE2LjQxNjY4NTEsMTUuMDA2MjQ2NSAxNi40MTIxNjEsMTUuMTMzNDQ5MSAxNi4zNDk4OTQ3LDE1LjIzNTU4ODYgQzE2LjI4NzYyODQsMTUuMzM3NzI4MSAxNi4xNzY2MjI3LDE1LjQgMTYuMDU2OTg3MywxNS40IEwyLjM0MjkwNzcxLDE1LjQgQzIuMTUzNTI1MDEsMTUuNCAyLDE1LjI0NjQ5NzYgMiwxNS4wNTcxNDI4IEwyLDEuMzQyODU3MTQgQzIsMS4xNTM1MDIzNyAyLjE1MzUyNTAxLDEgMi4zNDI5MDc3MSwxIFonIGlkPSfot6/lvoQnIGZpbGw9JyM0Qjk5RkYnIG9wYWNpdHk9JzAuOCc+PC9wYXRoPjxwYXRoIGQ9J000LjM2NjQzMzU2LDMuMjE1Mzg0NjIgTDcuMzg3NDEyNiwzLjIxNTM4NDYyIEM3LjQ4ODExMTksMy4yMTUzODQ2MiA3LjUzODQ2MTU0LDMuMjg5MjMwNzcgNy41Mzg0NjE1NCwzLjQzNjkyMzA2IEw3LjUzODQ2MTU0LDUuMjA5MjMwNzggQzcuNTM4NDYxNTQsNS4zNTY5MjMwOSA3LjQ4ODExMTg5LDUuNDMwNzY5MjMgNy4zODc0MTI2LDUuNDMwNzY5MjMgTDQuMzY2NDMzNTYsNS40MzA3NjkyMyBDNC4yNjU3MzQyNSw1LjQzMDc2OTIzIDQuMjE1Mzg0NjIsNS4zNTY5MjMwOCA0LjIxNTM4NDYyLDUuMjA5MjMwNzggTDQuMjE1Mzg0NjIsMy40MzY5MjMwNiBDNC4yMTUzODQ2MiwzLjI4OTIzMDc1IDQuMjY1NzM0MjYsMy4yMTUzODQ2MiA0LjM2NjQzMzU2LDMuMjE1Mzg0NjIgWicgaWQ9J+i3r+W+hCcgZmlsbD0nI0ZGRkZGRicgZmlsbC1ydWxlPSdub256ZXJvJz48L3BhdGg+PC9nPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=\" style=\"width: 16px; height: 16px; display: block;\" />\r\n    </span>\r\n    <!-- <span *ngIf=\"isMultiForm\" class=\"f-icon f-icon-indent\" role=\"presentation\"></span> -->\r\n    <span *ngIf=\"!isMultiForm\">&nbsp;{{localizeService.getValue('ideCmp.schemaManager.formatSchemaManagerName')}}</span>\r\n  </button>\r\n  <div class=\"dropdown-menu\" fDropdownMenu>\r\n    <a class=\"dropdown-item\" href=\"javascript:void(0);\" (click)=\"handleDialogShow()\">\r\n      <span class=\"k-icon\"></span>{{localizeService.getValue('ideCmp.schemaManager.formatManager')}}</a>\r\n    <div class=\"dropdown-divider\"></div>\r\n    <a *ngIf=\"controlType!='charts' && showPreSchema\" class=\"dropdown-item\" href=\"javascript:void(0);\"\r\n      (click)=\"handleDropDownItemClick('prefab')\">\r\n      <span [class.k-i-check]=\"schemaId=='prefab'\"\r\n        class=\"k-icon\"></span>&nbsp;{{localizeService.getValue('ideCmp.schemaManager.preFormat')}}</a>\r\n    <a *ngFor=\"let item of schemaDropDownData\" class=\"dropdown-item\" href=\"javascript:void(0);\"\r\n      (click)=\"handleDropDownItemClick(item.id)\">\r\n      <span [class.k-i-check]=\"schemaId==item.id\" class=\"k-icon\"></span>&nbsp;{{item.schemaName}}</a>\r\n  </div>\r\n</div>\r\n\r\n<farris-dialog #farrisDialog [title]=\"localizeService.getValue('ideCmp.schemaManager.formatSchemaManagerName')\"\r\n  [showButtons]=\"false\" [width]=\"1258\" [height]=\"630\" [beforeClose]=\"handlebeforeClose\" *ngIf=\"!currentmode\">\r\n  <div class=\"farris-main-area flex-column bg-white\">\r\n    <div class=\"d-flex flex-row flex-fill farris-overflow-hidden\">\r\n      <div class=\"col-3 p-0 m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n        <farris-treetable #schemaTree [data]=\"schemaTreeData\" [idField]=\"'id'\" [showCheckAll]=\"false\"\r\n          [resizableColumns]=\"true\" [showHeader]=\"false\" [striped]=\"false\" [fixedHeader]=\"true\" [width]=\"size.width\"\r\n          [height]=\"size.height\" (nodeSelected)=\"handleTreeNodeSelected($event)\">\r\n          <tt-column [field]=\"'schemaName'\" [width]=\"100\" [align]=\"'left'\" [hAlign]=\"'center'\"></tt-column>\r\n        </farris-treetable>\r\n      </div>\r\n      <div class=\"d-flex flex-column flex-fill mt-1 mb-1 mr-1\">\r\n        <farris-panel class=\"w-100\" defaultExpand=\"defaultExpand\">\r\n          <farris-panel-item [title]=\"localizeService.getValue('ideCmp.schemaManager.basicInfoName')\"\r\n            [value]=\"'schemaInfo'\">\r\n            <ng-template #contentTempl>\r\n              <div class=\"farris-header p-1\">\r\n                <div class=\"form-row\">\r\n                  <div class=\"col-8 col-md-8 col-lg-8\">\r\n                    <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                      <div class=\"form-group farris-group-wrap\">\r\n                        <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"schema_name_id\">\r\n                          <span\r\n                            class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeName')}}:</span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap\">\r\n                          <input-group id=\"schema_name_id\" [(ngModel)]=\"schemaName\"></input-group>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-row\">\r\n                  <div class=\"col-12 col-md-12 col-lg-12\">\r\n                    <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                      <div class=\"form-group farris-group-wrap\">\r\n                        <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"range_type_id\">\r\n                          <span\r\n                            class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeType')}}:</span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap farris-checkradio-hor\">\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{publicSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==0\">\r\n                            <label class=\"custom-control-label\" for=\"{{publicSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(0)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePublic')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{orgSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==2\">\r\n                            <label class=\"custom-control-label\" for=\"{{orgSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(2)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-radio mb-0\">\r\n                            <input type=\"radio\" id=\"{{personSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                              [checked]=\"isSchemaType==1\">\r\n                            <label class=\"custom-control-label\" for=\"{{personSchema}}\"\r\n                              (click)=\"handleSchemaTypeSelect(1)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal')}}</label>\r\n                          </div>\r\n                          <div class=\"custom-control custom-checkbox mb-0\">\r\n                            <input type=\"checkbox\" class=\"custom-control-input\" id=\"{{defaultSchema}}\"\r\n                              [(ngModel)]=\"isDefault\">\r\n                            <label class=\"custom-control-label\"\r\n                              for=\"{{defaultSchema}}\">{{localizeService.getValue('ideCmp.schemaManager.schemeDefault')}}</label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </ng-template>\r\n          </farris-panel-item>\r\n        </farris-panel>\r\n        <div class=\"farris-form d-flex flex-fill flex-column farris-overflow-hidden\">\r\n          <schema-editor *ngIf=\"controlType!='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n            [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n            (tabsSelectChange)=\"handleTabsSelectChange($event)\">\r\n          </schema-editor>\r\n          <charts-schema-editor *ngIf=\"controlType=='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n            [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n            (tabsSelectChange)=\"handleTabsSelectChange($event)\"></charts-schema-editor>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <div class=\"btn-toolbar btn-group-lg\" id=\"page-header-toolbar\">\r\n        <button class=\"btn btn-primary mr-1\" id=\"button-edit\" (click)=\"handleSaveClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSave')}}</button>\r\n        <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleSaveAsClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSaveAs')}}</button>\r\n        <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleRemoveClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnDelete')}}</button>\r\n        <button class=\"btn btn-secondary\" id=\"button-edit\" (click)=\"handleSaveAndCloseClick()\">\r\n          {{localizeService.getValue('ideCmp.schemaManager.btnSaveAsClose')}}</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n<div class=\"farris-main-area flex-column bg-white\" *ngIf=\"currentmode\">\r\n  <div class=\"d-flex flex-row flex-fill farris-overflow-hidden\">\r\n    <div class=\"col-3 p-0 m-1 farris-overflow-hidden\" (resized)=\"onResized($event)\">\r\n      <farris-treetable #schemaTree [data]=\"schemaTreeData\" [idField]=\"'id'\" [showCheckAll]=\"false\"\r\n        [resizableColumns]=\"true\" [fit]=\"true\" [showHeader]=\"false\" [striped]=\"false\" [fixedHeader]=\"true\"\r\n        [width]=\"size.width\" [height]=\"size.height\" (nodeSelected)=\"handleTreeNodeSelected($event)\">\r\n        <tt-column [field]=\"'schemaName'\" [width]=\"100\" [align]=\"'left'\" [hAlign]=\"'center'\"></tt-column>\r\n      </farris-treetable>\r\n    </div>\r\n    <div class=\"d-flex flex-column flex-fill mt-1 mb-1 mr-1\">\r\n      <farris-panel class=\"w-100\" defaultExpand=\"defaultExpand\">\r\n        <farris-panel-item [title]=\"localizeService.getValue('ideCmp.schemaManager.basicInfoName')\"\r\n          [value]=\"'schemaInfo'\">\r\n          <ng-template #contentTempl>\r\n            <div class=\"farris-header p-1\">\r\n              <div class=\"form-row\">\r\n                <div class=\"col-8 col-md-8 col-lg-8\">\r\n                  <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                    <div class=\"form-group farris-group-wrap\">\r\n                      <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"schema_name_id\">\r\n                        <span\r\n                          class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeName')}}:</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap\">\r\n                        <input-group id=\"schema_name_id\" [(ngModel)]=\"schemaName\"></input-group>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-row\">\r\n                <div class=\"col-12 col-md-12 col-lg-12\">\r\n                  <div class=\"farris-group-wrap form-inline farris-form-inline m-1\">\r\n                    <div class=\"form-group farris-group-wrap\">\r\n                      <label class=\"col-form-label\" style=\"min-width: 0;\" for=\"range_type_id\">\r\n                        <span\r\n                          class=\"farris-label-text\">{{localizeService.getValue('ideCmp.schemaManager.schemeType')}}:</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap farris-checkradio-hor\">\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{publicSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==0\">\r\n                          <label class=\"custom-control-label\" for=\"{{publicSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(0)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePublic')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{orgSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==2\">\r\n                          <label class=\"custom-control-label\" for=\"{{orgSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(2)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-radio mb-0\">\r\n                          <input type=\"radio\" id=\"{{personSchema}}\" name=\"custom-radio1\" class=\"custom-control-input\"\r\n                            [checked]=\"isSchemaType==1\">\r\n                          <label class=\"custom-control-label\" for=\"{{personSchema}}\"\r\n                            (click)=\"handleSchemaTypeSelect(1)\">{{localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal')}}</label>\r\n                        </div>\r\n                        <div class=\"custom-control custom-checkbox mb-0\">\r\n                          <input type=\"checkbox\" class=\"custom-control-input\" id=\"{{defaultSchema}}\"\r\n                            [(ngModel)]=\"isDefault\">\r\n                          <label class=\"custom-control-label\"\r\n                            for=\"{{defaultSchema}}\">{{localizeService.getValue('ideCmp.schemaManager.schemeDefault')}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n        </farris-panel-item>\r\n      </farris-panel>\r\n      <div class=\"farris-form d-flex flex-fill flex-column farris-overflow-hidden\">\r\n        <schema-editor *ngIf=\"controlType!='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n          [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n          (tabsSelectChange)=\"handleTabsSelectChange($event)\">\r\n        </schema-editor>\r\n        <charts-schema-editor *ngIf=\"controlType=='charts'\" class=\"d-flex flex-fill flex-column mt-1\"\r\n          [currSchema]=\"currTreeNode\" [colList]=\"colList\" [controlType]=\"controlType\"\r\n          (tabsSelectChange)=\"handleTabsSelectChange($event)\"></charts-schema-editor>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <div class=\"btn-toolbar btn-group-lg\" id=\"page-header-toolbar\">\r\n      <button class=\"btn btn-primary mr-1\" id=\"button-edit\" (click)=\"handleSaveClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSave')}}</button>\r\n      <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleSaveAsClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSaveAs')}}</button>\r\n      <button class=\"btn btn-secondary mr-1\" id=\"button-edit\" (click)=\"handleRemoveClick()\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnDelete')}}</button>\r\n      <button class=\"btn btn-secondary\" id=\"button-edit\" (click)=\"handleSaveAndCloseClick()\" *ngIf=\"!currentmode\">\r\n        {{localizeService.getValue('ideCmp.schemaManager.btnSaveAsClose')}}</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #enumFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary\"\r\n    (click)=\"clickCancel()\">{{localizeService.getValue('ideCmp.schemaManager.btnCancel')}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary\"\r\n    (click)=\"handleSaveAndCloseClick()\">{{localizeService.getValue('ideCmp.schemaManager.btnOK')}}</button>\r\n</ng-template>\r\n",
                    styles: [".schema-position{position:absolute;top:0;left:0;right:0}"]
                }] }
    ];
    /** @nocollapse */
    SchemaManagerComponent.ctorParameters = function () { return [
        { type: SchemaService },
        { type: MessagerService },
        { type: NotifyService },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    SchemaManagerComponent.propDecorators = {
        queryId: [{ type: Input }],
        groupType: [{ type: Input }],
        schemaInfo: [{ type: Input }],
        colList: [{ type: Input }],
        controlType: [{ type: Input }],
        showPreSchema: [{ type: Input }],
        editorParams: [{ type: Input }],
        isMultiForm: [{ type: Input }],
        schemaTree: [{ type: ViewChild, args: ['schemaTree',] }],
        modalFooter: [{ type: ViewChild, args: ['enumFooter',] }],
        schemaEditor: [{ type: ViewChild, args: [SchemaEditorComponent,] }],
        chartsSchemaEditor: [{ type: ViewChild, args: [ChartsSchemaEditorComponent,] }],
        farrisPanelComponent: [{ type: ViewChild, args: [FarrisPanelComponent,] }],
        farrisDialog: [{ type: ViewChild, args: ['farrisDialog',] }],
        schemaSelected: [{ type: Output }],
        saveSchema: [{ type: Output }],
        saveAsSchema: [{ type: Output }],
        removeSchema: [{ type: Output }],
        saveAndCloseSchema: [{ type: Output }],
        dialogBeforeClose: [{ type: Output }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        queryRelativeUrl: [{ type: Input }]
    };
    return SchemaManagerComponent;
}());
export { SchemaManagerComponent };
if (false) {
    /** @type {?} */
    SchemaManagerComponent.prototype.queryId;
    /** @type {?} */
    SchemaManagerComponent.prototype.groupType;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaInfo;
    /** @type {?} */
    SchemaManagerComponent.prototype.colList;
    /** @type {?} */
    SchemaManagerComponent.prototype.controlType;
    /** @type {?} */
    SchemaManagerComponent.prototype.showPreSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.editorParams;
    /** @type {?} */
    SchemaManagerComponent.prototype.isMultiForm;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaTree;
    /** @type {?} */
    SchemaManagerComponent.prototype.modalFooter;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaEditor;
    /** @type {?} */
    SchemaManagerComponent.prototype.chartsSchemaEditor;
    /** @type {?} */
    SchemaManagerComponent.prototype.farrisPanelComponent;
    /** @type {?} */
    SchemaManagerComponent.prototype.farrisDialog;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaSelected;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveAsSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.removeSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.saveAndCloseSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.dialogBeforeClose;
    /** @type {?} */
    SchemaManagerComponent.prototype.closeModal;
    /** @type {?} */
    SchemaManagerComponent.prototype.submitModal;
    /** @type {?} */
    SchemaManagerComponent.prototype.defaultExpand;
    /** @type {?} */
    SchemaManagerComponent.prototype.inputCollapse;
    /** @type {?} */
    SchemaManagerComponent.prototype.inputExpand;
    /** @type {?} */
    SchemaManagerComponent.prototype.size;
    /** @type {?} */
    SchemaManagerComponent.prototype.isShow;
    /** @type {?} */
    SchemaManagerComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    SchemaManagerComponent.prototype.personSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.orgSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.publicSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.defaultSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaTreeData;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaDropDownData;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaId;
    /** @type {?} */
    SchemaManagerComponent.prototype.selectedSchemaId;
    /** @type {?} */
    SchemaManagerComponent.prototype.isSchemaType;
    /** @type {?} */
    SchemaManagerComponent.prototype.isDefault;
    /** @type {?} */
    SchemaManagerComponent.prototype.currTreeNode;
    /** @type {?} */
    SchemaManagerComponent.prototype.schemaName;
    /** @type {?} */
    SchemaManagerComponent.prototype.currentmode;
    /** @type {?} */
    SchemaManagerComponent.prototype.qoManagerCode;
    /** @type {?} */
    SchemaManagerComponent.prototype.modalConfig;
    /** @type {?} */
    SchemaManagerComponent.prototype.chartsOption;
    /** @type {?} */
    SchemaManagerComponent.prototype.cacheSchemaData;
    /** @type {?} */
    SchemaManagerComponent.prototype.operations;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.subscriptions;
    /** @type {?} */
    SchemaManagerComponent.prototype.localizeService;
    /** @type {?} */
    SchemaManagerComponent.prototype.svgSchema;
    /** @type {?} */
    SchemaManagerComponent.prototype.formErrorService;
    /** @type {?} */
    SchemaManagerComponent.prototype.cache;
    /** @type {?} */
    SchemaManagerComponent.prototype.tabId;
    /** @type {?} */
    SchemaManagerComponent.prototype.handlebeforeClose;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.schemaService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    SchemaManagerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLW1hbmFnZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHFkcC9pZGUtY21wLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9zY2hlbWEtbWFuYWdlci9zY2hlbWEtbWFuYWdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBNEIsV0FBVyxFQUFhLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEssT0FBTyxFQUFjLEVBQUUsRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDcEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQzFELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsYUFBYSxFQUFpQixNQUFNLG1CQUFtQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNwRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNqRixPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSx3REFBd0QsQ0FBQztBQUNyRyxPQUFPLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzVELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVuRDtJQWdMRSxnQ0FDVSxhQUE0QixFQUM1QixVQUEyQixFQUMzQixhQUE0QixFQUNoQixRQUFrQjtRQUp4QyxpQkFrQkM7UUFqQlMsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsZUFBVSxHQUFWLFVBQVUsQ0FBaUI7UUFDM0Isa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDaEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQXhLL0IsaUJBQVksR0FBUSxFQUFFLENBQUM7UUFRdEIsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3pDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3JDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUN2QyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDdkMsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUM3QyxzQkFBaUIsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzVDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUVyQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDaEQsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFDckIsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFDckIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7UUFDbkIsU0FBSSxHQUFRLEVBQUUsQ0FBQztRQUNmLFdBQU0sR0FBUSxLQUFLLENBQUM7UUFFcEIsaUJBQVksR0FBRyxjQUFjLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2hELGNBQVMsR0FBRyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFDLGlCQUFZLEdBQUcsY0FBYyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoRCxrQkFBYSxHQUFHLGVBQWUsR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEQsbUJBQWMsR0FBUTtZQUNwQjtnQkFDRSxJQUFJLEVBQUU7b0JBQ0osRUFBRSxFQUFFLGVBQWU7b0JBQ25CLFNBQVMsRUFBRSxDQUFDO29CQUNaLFFBQVEsRUFBRSxDQUFDO29CQUNYLFVBQVUsRUFBRSxJQUFJO29CQUNoQixVQUFVLEVBQUUsQ0FBQztpQkFDZDtnQkFDRCxRQUFRLEVBQUUsSUFBSTtnQkFDZCxRQUFRLEVBQUUsRUFBRTthQUNiLEVBQUU7Z0JBQ0QsSUFBSSxFQUFFO29CQUNKLEVBQUUsRUFBRSxZQUFZO29CQUNoQixTQUFTLEVBQUUsQ0FBQztvQkFDWixRQUFRLEVBQUUsQ0FBQztvQkFDWCxVQUFVLEVBQUUsSUFBSTtvQkFDaEIsVUFBVSxFQUFFLENBQUM7aUJBQ2Q7Z0JBQ0QsUUFBUSxFQUFFLElBQUk7Z0JBQ2QsUUFBUSxFQUFFLEVBQUU7YUFDYixFQUFFO2dCQUNELElBQUksRUFBRTtvQkFDSixFQUFFLEVBQUUsZUFBZTtvQkFDbkIsU0FBUyxFQUFFLENBQUM7b0JBQ1osUUFBUSxFQUFFLENBQUM7b0JBQ1gsVUFBVSxFQUFFLElBQUk7b0JBQ2hCLFVBQVUsRUFBRSxDQUFDO2lCQUNkO2dCQUNELFFBQVEsRUFBRSxJQUFJO2dCQUNkLFFBQVEsRUFBRSxFQUFFO2FBQ2I7U0FDRixDQUFDO1FBQ0YsdUJBQWtCLEdBQVUsRUFBRSxDQUFDO1FBRy9CLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFHbEIsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFDcEIsa0JBQWEsR0FBRyxFQUFFLENBQUM7UUFDbkIsZ0JBQVcsR0FBRztZQUNaLEtBQUssRUFBRSxNQUFNO1lBQ2IsS0FBSyxFQUFFLEdBQUc7WUFDVixNQUFNLEVBQUUsR0FBRztZQUNYLFdBQVcsRUFBRSxJQUFJO1NBQ2xCLENBQUM7UUFDRixpQkFBWSxHQUFRO1lBQ2xCLFVBQVUsRUFBRTtnQkFDVixNQUFNLEVBQUU7b0JBQ04sSUFBSSxFQUFFLElBQUk7aUJBQ1g7YUFDRjtZQUNELFdBQVcsRUFBRTtnQkFDWCxLQUFLLEVBQUU7b0JBQ0wsSUFBSSxFQUFFLElBQUk7b0JBQ1YsQ0FBQyxFQUFFLElBQUk7b0JBQ1AsQ0FBQyxFQUFFLElBQUk7b0JBQ1AsU0FBUyxFQUFFO3dCQUNULFVBQVUsRUFBRSxFQUFFO3dCQUNkLFFBQVEsRUFBRSxFQUFFO3dCQUNaLFNBQVMsRUFBRSxRQUFRO3dCQUNuQixTQUFTLEVBQUUsUUFBUTt3QkFDbkIsVUFBVSxFQUFFLGlCQUFpQjt3QkFDN0IsS0FBSyxFQUFFLE9BQU87cUJBQ2Y7aUJBQ0Y7Z0JBQ0QsTUFBTSxFQUFFO29CQUNOLE9BQU8sRUFBRSxFQUFFO29CQUNYLFNBQVMsRUFBRSxFQUFFO29CQUNiLFVBQVUsRUFBRSxFQUFFO29CQUNkLEtBQUssRUFBRSxNQUFNO29CQUNiLE1BQU0sRUFBRSxZQUFZO2lCQUNyQjtnQkFDRCxTQUFTLEVBQ1AsQ0FBQzt3QkFDQyxJQUFJLEVBQUUsWUFBWTt3QkFDbEIsR0FBRyxFQUFFLEtBQUs7d0JBQ1YsTUFBTSxFQUFFLElBQUk7d0JBQ1osSUFBSSxFQUFFLE9BQU87d0JBQ2IsS0FBSyxFQUFFLElBQUk7d0JBQ1gsTUFBTSxFQUFFLEVBQUU7d0JBQ1YsVUFBVSxFQUFFLEVBQUU7d0JBQ2QsVUFBVSxFQUFFLElBQUk7d0JBQ2hCLE9BQU8sRUFBRTs0QkFDUCxLQUFLLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDO3lCQUNqSTt3QkFDRCxVQUFVLEVBQUU7NEJBQ1YsS0FBSyxFQUFFLENBQUMsc0JBQXNCLENBQUM7eUJBQ2hDO3dCQUNELFVBQVUsRUFBRTs0QkFDVixPQUFPLEVBQUU7Z0NBQ1AsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQzs2QkFDakk7NEJBQ0QsVUFBVSxFQUFFO2dDQUNWLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQzs2QkFDaEI7eUJBQ0Y7d0JBQ0QsU0FBUyxFQUFFOzRCQUNULEtBQUssRUFBRSxNQUFNLENBQUMsWUFBWTt5QkFDM0I7cUJBQ0YsQ0FBQzthQUNMO1lBQ0QsVUFBVSxFQUFFO2dCQUNWLEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsVUFBVTtvQkFDaEIsUUFBUSxFQUFFLFFBQVE7aUJBQ25CO2dCQUNELEtBQUssRUFBRTtvQkFDTCxJQUFJLEVBQUUsT0FBTztvQkFDYixRQUFRLEVBQUUsTUFBTTtpQkFDakI7Z0JBQ0QsTUFBTSxFQUFFO29CQUNOLElBQUksRUFBRSxJQUFJO29CQUNWLE1BQU0sRUFBRTt3QkFDTixDQUFDLEVBQUUsRUFBRTt3QkFDTCxDQUFDLEVBQUUsRUFBRTtxQkFDTjtpQkFDRjtnQkFDRCxNQUFNLEVBQUU7b0JBQ04sSUFBSSxFQUFFLEVBQUU7aUJBQ1Q7YUFDRjtTQUNGLENBQUM7UUFDRixvQkFBZSxHQUFRLEVBQUUsQ0FBQztRQUMxQixlQUFVLEdBQVEsRUFBRSxDQUFDO1FBRWIsa0JBQWEsR0FBbUIsRUFBRSxDQUFDO1FBSTNDLGNBQVMsR0FBRyxJQUFJLENBQUM7UUEwbUJqQixzQkFBaUI7OztRQUFHOztnQkFDZCxFQUFFLEdBQVEsRUFBRTtZQUNoQixJQUFJLEtBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2pCLEVBQUUsR0FBRyxLQUFJLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDO2FBQ3ZEO1lBQ0QsSUFBSSxDQUFDLEVBQUUsSUFBSSxLQUFJLENBQUMsVUFBVSxJQUFJLEtBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFO2dCQUM3RCxFQUFFLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO2FBQ3pDO1lBQ0QsS0FBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNoQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQixDQUFDLEVBQUE7UUF6bUJDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDeEQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN4RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLGlDQUFpQyxDQUFDLENBQUM7WUFDMUYsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLHVDQUF1QyxDQUFDLENBQUM7WUFDaEgsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLG9DQUFvQyxDQUFDLENBQUM7WUFDN0csSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLHlDQUF5QyxDQUFDLENBQUM7WUFDbEgsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDNUQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUM5QztJQUNILENBQUM7Ozs7SUFFRCx5Q0FBUTs7O0lBQVI7O1lBQ1EsSUFBSSxHQUFHLElBQUk7UUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoRCxRQUFRLENBQUMsUUFBUSxDQUFDLDJCQUEyQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLFNBQVM7Ozs7UUFBQyxVQUFDLEtBQVU7WUFDOUUsSUFBSSxLQUFLLEVBQUU7Z0JBQ1QsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7YUFDekI7WUFDRCxzQkFBc0I7UUFDeEIsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNOLENBQUM7Ozs7SUFFRCxxREFBb0I7OztJQUFwQjtRQUNFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7SUFDN0IsQ0FBQzs7Ozs7SUFFRCw0Q0FBVzs7OztJQUFYLFVBQVksT0FBc0I7UUFDaEMsS0FBSyxJQUFNLFVBQVUsSUFBSSxPQUFPLEVBQUU7O2dCQUMxQixRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVk7WUFDakQsSUFBSSxRQUFRLEtBQUssSUFBSSxJQUFJLFFBQVEsS0FBSyxLQUFLLENBQUMsRUFBRTtnQkFDNUMsUUFBUSxVQUFVLEVBQUU7b0JBQ2xCLEtBQUssWUFBWTt3QkFDZixJQUFJLFFBQVEsRUFBRTs0QkFDWixJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7eUJBQ2pDO3dCQUNELE1BQU07b0JBQ1IsS0FBSyxTQUFTO3dCQUNaLElBQUksUUFBUSxFQUFFOzRCQUNaLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7eUJBQzlCO3dCQUNELE1BQU07b0JBQ1IsS0FBSyxjQUFjO3dCQUNqQixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzt3QkFDL0IsTUFBTTtpQkFDVDthQUNGO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsNENBQVc7OztJQUFYOztRQUNFLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRTs7Z0JBQ25ELEtBQTJCLElBQUEsS0FBQSxpQkFBQSxJQUFJLENBQUMsYUFBYSxDQUFBLGdCQUFBLDRCQUFFO29CQUExQyxJQUFNLFlBQVksV0FBQTtvQkFDckIsWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDO2lCQUM1Qjs7Ozs7Ozs7O1NBQ0Y7SUFDSCxDQUFDOzs7Ozs7SUFFTyw4Q0FBYTs7Ozs7SUFBckIsVUFBc0IsUUFBYTtRQUNqQyxJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFO1lBQ2pDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxNQUFNLEVBQUU7O29CQUNuSyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN4RCxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztnQkFDdkUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsWUFBWSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7Z0JBQ3ZFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2FBQ3hFO1lBQ0QsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVzttQkFDekYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxXQUFXLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUU7Z0JBQzdJLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTs7d0JBQ2pDLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUM1RCxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztpQkFDL0U7Z0JBQ0QsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxlQUFlLEVBQUU7b0JBQzVDLElBQUksQ0FBQyxtQkFBbUIsQ0FDdEI7d0JBQ0UsSUFBSSxFQUFFOzRCQUNKLElBQUksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQzt5QkFDNUM7cUJBQ0YsQ0FDRixDQUFDO2lCQUNIO2FBQ0Y7U0FDRjtJQUNILENBQUM7Ozs7OztJQUVPLDRDQUFXOzs7OztJQUFuQixVQUFvQixPQUFZO1FBQzlCLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7WUFDN0IsT0FBTyxDQUFDLE9BQU87Ozs7WUFBQyxVQUFDLEdBQVE7Z0JBQ3ZCLEdBQUcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxFQUFFLEdBQUcsQ0FBQyxPQUFPLEdBQUcsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQztvQkFDeEUsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLFNBQVMsR0FBRyxFQUFFLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLGFBQWEsR0FBRyxFQUFFO29CQUMvRixHQUFHLENBQUMsT0FBTyxHQUFHLEtBQUssRUFBRSxHQUFHLENBQUMsVUFBVSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsY0FBYyxHQUFHLEVBQUUsRUFBRSxHQUFHLENBQUMsVUFBVSxHQUFHLENBQUM7b0JBQ3BGLEdBQUcsQ0FBQyxjQUFjLEdBQUcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxRQUFRLEdBQUcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO1lBQ3RGLENBQUMsRUFBQyxDQUFDO1NBQ0o7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDOzs7Ozs7SUFFTyxpREFBZ0I7Ozs7O0lBQXhCLFVBQXlCLFFBQWE7UUFBdEMsaUJBMENDO1FBekNDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFO1lBQ2pDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLFFBQVEsSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1NBQy9NO2FBQU07WUFDTCxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1NBQzFKO1FBQ0QsSUFBSSxRQUFRLElBQUksUUFBUSxDQUFDLFVBQVUsRUFBRTtZQUNuQywrQkFBK0I7WUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsR0FBRztnQkFDMUMsS0FBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekcsS0FBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZELElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ25ELEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ3hHO3FCQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQzFELEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ3hHO3FCQUFNO29CQUNMLEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ3hHO1lBQ0gsQ0FBQyxFQUFDLENBQUM7U0FDSjtRQUNELElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUN4QyxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsZUFBZSxJQUFJLFFBQVEsQ0FBQyxlQUFlLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxpQkFBaUIsRUFBRTtZQUN0SCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksaUJBQWlCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtnQkFDalMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQzthQUM3QztZQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUN6RSxJQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDO1NBQ3ZEO2FBQU07WUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2dCQUNyRSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQzthQUMxQjtTQUNGO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDekUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQ3RCO2FBQU07WUFDTCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQzs7Ozs7SUFFTyx3REFBdUI7Ozs7SUFBL0I7O1lBQ1EsSUFBSSxHQUFHLElBQUk7UUFDakIsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFO1lBQ2xELElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO1lBQ3hCLFlBQVk7WUFDWixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FDckIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsS0FBSztnQkFDM0MsSUFBSSxLQUFLLEVBQUU7O3dCQUNILGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUM7b0JBQzlDLElBQUksQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDO29CQUNoQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFO3dCQUM5QixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUNwRjtvQkFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2lCQUN4QztZQUNILENBQUMsRUFBQyxDQUNILENBQUM7WUFDRixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUk7WUFDckIsYUFBYTtZQUNiLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLEtBQUs7Z0JBQ3hDLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNyQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuQyxDQUFDLEVBQUMsQ0FDSCxDQUFDO1lBQ0YsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFO2dCQUMvQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDM0M7WUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7WUFDakQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQztZQUNyRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQztZQUMzRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzs7Z0JBQ2xCLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLElBQUksRUFBRTtZQUMxRSxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxLQUFLOztvQkFDakgsVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFOztvQkFDL0IsUUFBUSxHQUFHLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHOztvQkFDeEcsTUFBTSxHQUFHLEVBQUU7Z0JBQ2pCLE1BQU0sQ0FBQyxlQUFlLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO2dCQUM3QyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QixNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFDO2dCQUM5QixNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUMxQixNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUMxQixJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFO29CQUM5RixJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztpQkFDcks7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVM7Ozs7b0JBQUMsVUFBQSxNQUFNO3dCQUN2RSxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFOzRCQUNoQyxJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7eUJBQy9JO29CQUNILENBQUMsRUFBQyxDQUFDO2lCQUNKO1lBQ0gsQ0FBQyxFQUFDLENBQUM7U0FDSjtJQUNILENBQUM7Ozs7O0lBRU8sNENBQVc7Ozs7SUFBbkI7UUFDRSxJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztRQUM5QixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO0lBQy9CLENBQUM7Ozs7Ozs7SUFFTyxpREFBZ0I7Ozs7OztJQUF4QixVQUF5QixFQUFPLEVBQUUsUUFBYTs7WUFDekMsTUFBTSxHQUFHLEtBQUs7UUFDbEIsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNQLE9BQU8sTUFBTSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsVUFBVSxFQUFFO1lBQ25DLEtBQUssSUFBTSxHQUFHLElBQUksUUFBUSxDQUFDLFVBQVUsRUFBRTtnQkFDckMsSUFBSSxFQUFFLEtBQUssR0FBRyxFQUFFO29CQUNkLE1BQU0sR0FBRyxJQUFJLENBQUM7aUJBQ2Y7YUFDRjtTQUNGO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7OztJQUVELGlEQUFnQjs7O0lBQWhCO1FBQ0UsSUFBSSxDQUFDLFlBQVksR0FBRyxjQUFjLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JELElBQUksQ0FBQyxZQUFZLEdBQUcsY0FBYyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyRCxJQUFJLENBQUMsYUFBYSxHQUFHLGVBQWUsR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdkQsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLFFBQVEsRUFBRTtZQUNqQyxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUU7Z0JBQy9DLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUMzQztTQUNGO2FBQU07WUFDTCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFO2dCQUMzRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUNoRDtTQUNGO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMzQixDQUFDOzs7OztJQUVELHdEQUF1Qjs7OztJQUF2QixVQUF3QixFQUFPO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksSUFBSSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQUU7WUFDOUIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGlCQUFpQixDQUFDO1lBQzFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUN4QzthQUFNO1lBQ0wsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztZQUMzQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RDO1FBQ0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN2RCxDQUFDOzs7OztJQUVELHVEQUFzQjs7OztJQUF0QixVQUF1QixNQUFXO1FBQ2hDLElBQUksSUFBSSxDQUFDLG9CQUFvQixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO1lBQzVFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDckQ7UUFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQzlDLENBQUM7Ozs7O0lBRUQsdURBQXNCOzs7O0lBQXRCLFVBQXVCLEtBQVU7UUFDL0IsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7SUFDNUIsQ0FBQzs7Ozs7SUFFRCx1REFBc0I7Ozs7SUFBdEIsVUFBdUIsSUFBUztRQUFoQyxpQkE2Q0M7O1lBNUNPLElBQUksR0FBRyxJQUFJO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNoQzthQUFNO1lBQ0wsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUU7Z0JBQzlDLElBQUksSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7b0JBQ2hELElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssZUFBZSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLGVBQWUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxZQUFZLEVBQUU7d0JBQ2pJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDaEM7eUJBQU07OzRCQUNELE9BQU8sR0FBRyxJQUFJO3dCQUNsQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzVCLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxRQUFRLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUU7NEJBQ3RHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3lCQUNoTDt3QkFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEVBQUU7NEJBQzNGLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxRQUFRLEVBQUU7Z0NBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO2dDQUM1RyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7NkJBQy9KOzRCQUNELE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7Z0NBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQzttQ0FDbkUsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVU7bUNBQ3RGLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVO21DQUN0RixJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7NEJBQzNGLElBQUksS0FBSyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssZUFBZSxFQUFFO2dDQUMxSCxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxtREFBbUQsQ0FBQzs7O2dDQUN6RztvQ0FDRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7Z0NBQ2pDLENBQUM7OztnQ0FDRDtvQ0FDRSxLQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLEtBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7b0NBQzFFLEtBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSSxDQUFDLGVBQWUsQ0FBQyxLQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQztvQ0FDeEUsS0FBSSxDQUFDLFlBQVksR0FBRyxLQUFJLENBQUMsZUFBZSxDQUFDLEtBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDO29DQUMxRSxLQUFJLENBQUMsU0FBUyxHQUFHLEtBQUksQ0FBQyxlQUFlLENBQUMsS0FBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQ0FDN0YsQ0FBQyxFQUNGLENBQUM7NkJBQ0g7aUNBQU07Z0NBQ0wsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDOzZCQUNoQzt5QkFDRjtxQkFDRjtpQkFDRjthQUNGO1NBQ0Y7SUFDSCxDQUFDOzs7Ozs7SUFFTyxvREFBbUI7Ozs7O0lBQTNCLFVBQTRCLElBQVM7UUFDbkMsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssZUFBZSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLGVBQWUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxZQUFZLENBQUMsRUFBRTtZQUN4SixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNuRDtRQUNELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDbkMsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxlQUFlLEVBQUU7WUFDNUMsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUN4RSxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDbkU7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLG1DQUFtQyxDQUFDLENBQUM7WUFDckYsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDMUI7YUFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLGVBQWUsRUFBRTtZQUNuRCxJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFO2dCQUNqQyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDbkU7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLHFDQUFxQyxDQUFDLENBQUM7WUFDdkYsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDMUI7YUFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLFlBQVksRUFBRTtZQUNoRCxJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFO2dCQUNqQyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDbkU7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFDbEYsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDMUI7YUFBTTtZQUNMLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUNsRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQy9DLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7U0FDdEM7UUFDRCxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQzdGLENBQUM7Ozs7OztJQUVPLGlEQUFnQjs7Ozs7SUFBeEIsVUFBeUIsRUFBVTtRQUNqQyxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ2xDLElBQUksRUFBRSxFQUFFO1lBQ04sSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEM7SUFDSCxDQUFDOzs7OztJQUVELDBDQUFTOzs7O0lBQVQsVUFBVSxLQUFVO1FBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDO1FBQzFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDakMsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNuQztJQUNILENBQUM7Ozs7SUFFRCxrREFBaUI7OztJQUFqQjtRQUFBLGlCQTBEQzs7WUF6RE8sSUFBSSxHQUFHLElBQUk7UUFDakIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN2QyxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQ3RGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxDQUFDLEVBQUU7Z0JBQ2hILElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDZEQUE2RCxDQUFDLENBQUMsQ0FBQztnQkFDdEgsT0FBTzthQUNSOztnQkFDSyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxDQUFDOztnQkFDM0QsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUM5QixNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3hELElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO2dCQUN0QixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hHLE9BQU87YUFDUjtpQkFBTTtnQkFDTCxLQUFLLElBQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7b0JBQ3RDLElBQUksR0FBRyxLQUFLLGVBQWUsSUFBSSxHQUFHLEtBQUssZUFBZSxJQUFJLEdBQUcsS0FBSyxZQUFZLElBQUksR0FBRyxLQUFLLE1BQU0sQ0FBQyxFQUFFLElBQUksTUFBTSxDQUFDLFVBQVUsS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRTt3QkFDakssSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsOENBQThDLENBQUMsQ0FBQyxDQUFDO3dCQUN2RyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFOzRCQUM3RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO3lCQUNyRDt3QkFDRCxPQUFPO3FCQUNSO2lCQUNGO2FBQ0Y7WUFDRCxJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssUUFBUSxFQUFFO2dCQUNqQyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQ3ZHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDhEQUE4RCxDQUFDLENBQUMsQ0FBQztvQkFDdkgsT0FBTztpQkFDUjthQUNGO1lBQ0QsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtnQkFDdkQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsK0NBQStDLENBQUMsQ0FBQyxDQUFDO2dCQUN4RyxPQUFPO2FBQ1I7O2dCQUNLLGNBQWMsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUU7WUFDckMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztZQUMvQyxJQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUNoQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxzREFBc0QsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hKLE9BQU87YUFDUjtZQUNELE1BQU0sQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDOztnQkFDVCxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUU7WUFDMUUsTUFBTSxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUM7WUFDOUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFDLElBQVM7Z0JBQ3RJLEtBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO2dCQUNuQixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxFQUFFO29CQUMzRCxLQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO2lCQUN6QztnQkFDRCxLQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLG1CQUFBO29CQUM1QixLQUFLLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMseUNBQXlDLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsMkNBQTJDLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSTtpQkFDaEwsRUFBaUIsQ0FBQyxDQUFDO2dCQUNwQixLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzNCLENBQUM7Ozs7WUFBRSxVQUFDLEtBQVU7Z0JBQ1osSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3hELENBQUMsRUFBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDOzs7O0lBRUQsa0RBQWlCOzs7SUFBakI7UUFBQSxpQkFnQ0M7O1lBL0JPLElBQUksR0FBRyxJQUFJO1FBQ2pCLElBQUksSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUMzRixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsdUJBQXVCLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxDQUFDLEVBQUU7Z0JBQ3JILElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDZEQUE2RCxDQUFDLENBQUMsQ0FBQztnQkFDdEgsT0FBTzthQUNSO1lBQ0QsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxHQUFHLENBQUMsRUFBRTtnQkFDOUwsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsbURBQW1ELENBQUMsQ0FBQyxDQUFDO2dCQUN6RyxPQUFPO2FBQ1I7WUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssZUFBZTtnQkFDbkUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxlQUFlO2dCQUNqRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLFlBQVksRUFBRTs7b0JBQzFELGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLElBQUksRUFBRTtnQkFDMUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQyxJQUFTO29CQUN0SyxJQUFJLENBQUMsU0FBUzs7OztvQkFBQyxVQUFDLEtBQVU7d0JBQ3hCLEtBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO3dCQUNuQixLQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLG1CQUFBOzRCQUM1QixLQUFLLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMseUNBQXlDLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsNkNBQTZDLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSTt5QkFDbEwsRUFBaUIsQ0FBQyxDQUFDO3dCQUNwQixLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO29CQUMzQixDQUFDLEVBQUMsQ0FBQztnQkFDTCxDQUFDOzs7O2dCQUFFLFVBQUMsS0FBVTtvQkFDWixJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3hELENBQUMsRUFBQyxDQUFDO2FBQ0o7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsMENBQTBDLENBQUMsQ0FBQyxDQUFDO2FBQ2pHO1NBQ0Y7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLDBDQUEwQyxDQUFDLENBQUMsQ0FBQztTQUNqRztJQUNILENBQUM7Ozs7SUFFRCxnREFBZTs7O0lBQWY7UUFBQSxpQkFzRUM7UUFyRUMsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQzNGLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLFlBQVksRUFBRTtnQkFDalUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsNkRBQTZELENBQUMsQ0FBQyxDQUFDO2dCQUN0SCxPQUFPO2FBQ1I7U0FDRjtRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDM0YsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLHVCQUF1QixDQUFDLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssZUFBZSxJQUFJLElB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SUFDbkIsNkNBS0U7O0lBQ0YsOENBNEVFOztJQUNGLGlEQUEwQjs7SUFDMUIsNENBQXFCOzs7OztJQUVyQiwrQ0FBMkM7O0lBRTNDLGlEQUFpQzs7SUFFakMsMkNBQWlCOztJQUNqQixrREFBc0I7O0lBQ3RCLHVDQUFvQjs7SUFDcEIsdUNBQVc7O0lBdW1CWCxtREFVQzs7Ozs7SUE5bUJDLCtDQUFvQzs7Ozs7SUFDcEMsNENBQW1DOzs7OztJQUNuQywrQ0FBb0M7Ozs7O0lBQ3BDLDBDQUFzQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBUZW1wbGF0ZVJlZiwgT25EZXN0cm95LCBPcHRpb25hbCwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IEZhcnJpc1BhbmVsQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wYW5lbCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UsIE5vdGlmeU9wdGlvbnMgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IFNjaGVtYVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL3NjaGVtYS9zY2hlbWEuc2VydmljZSc7XHJcbmltcG9ydCB7IFNjaGVtYUVkaXRvckNvbXBvbmVudCB9IGZyb20gJy4uL3NjaGVtYS1lZGl0b3Ivc2NoZW1hLWVkaXRvci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDaGFydHNTY2hlbWFFZGl0b3JDb21wb25lbnQgfSBmcm9tICcuLi9jaGFydHMtc2NoZW1hLWVkaXRvci9jaGFydHMtc2NoZW1hLWVkaXRvci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cywgUnRmU2VydmljZXMgfSBmcm9tICdAcWRwL2NvbW1vbic7XHJcbmltcG9ydCB7IExvY2FsaXplU2VydmljZSB9IGZyb20gJ0BxZHAvbG9jYWxpemUnO1xyXG5pbXBvcnQgeyBGb3JtRXJyb3JTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzJztcclxuaW1wb3J0IHsgQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3NjaGVtYS1tYW5hZ2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vc2NoZW1hLW1hbmFnZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3NjaGVtYS1tYW5hZ2VyLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2NoZW1hTWFuYWdlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG4gIEBJbnB1dCgpIHF1ZXJ5SWQ6IGFueTtcclxuICBASW5wdXQoKSBncm91cFR5cGU6IGFueTtcclxuICBASW5wdXQoKSBzY2hlbWFJbmZvOiBhbnk7XHJcbiAgQElucHV0KCkgY29sTGlzdDogYW55O1xyXG4gIEBJbnB1dCgpIGNvbnRyb2xUeXBlOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgc2hvd1ByZVNjaGVtYTogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQElucHV0KCkgaXNNdWx0aUZvcm06IGFueTsgLy8g5piv5ZCm5bWM5YWl5byP6KGo5Y2VXHJcbiAgQFZpZXdDaGlsZCgnc2NoZW1hVHJlZScpIHNjaGVtYVRyZWU6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdlbnVtRm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZChTY2hlbWFFZGl0b3JDb21wb25lbnQpIHNjaGVtYUVkaXRvcjogU2NoZW1hRWRpdG9yQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoQ2hhcnRzU2NoZW1hRWRpdG9yQ29tcG9uZW50KSBjaGFydHNTY2hlbWFFZGl0b3I6IENoYXJ0c1NjaGVtYUVkaXRvckNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKEZhcnJpc1BhbmVsQ29tcG9uZW50KSBmYXJyaXNQYW5lbENvbXBvbmVudDogRmFycmlzUGFuZWxDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnZmFycmlzRGlhbG9nJykgZmFycmlzRGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XHJcbiAgQE91dHB1dCgpIHNjaGVtYVNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHNhdmVTY2hlbWEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc2F2ZUFzU2NoZW1hID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHJlbW92ZVNjaGVtYSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzYXZlQW5kQ2xvc2VTY2hlbWEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgZGlhbG9nQmVmb3JlQ2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIC8vIOaooeaAgeahhuehruWumuWQjuWFs+mXre+8jOW5tuS8oOmAkuWPguaVsFxyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIGRlZmF1bHRFeHBhbmQgPSB0cnVlO1xyXG4gIGlucHV0Q29sbGFwc2UgPSAn5pS26LW3JztcclxuICBpbnB1dEV4cGFuZCA9ICflsZXlvIAnO1xyXG4gIHNpemU6IGFueSA9IHt9O1xyXG4gIGlzU2hvdzogYW55ID0gZmFsc2U7XHJcbiAgQElucHV0KCkgcXVlcnlSZWxhdGl2ZVVybDogYW55O1xyXG4gIHBlcnNvblNjaGVtYSA9ICdwZXJzb25TY2hlbWEnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gIG9yZ1NjaGVtYSA9ICdvcmdTY2hlbWEnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gIHB1YmxpY1NjaGVtYSA9ICdwdWJsaWNTY2hlbWEnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gIGRlZmF1bHRTY2hlbWEgPSAnZGVmYXVsdFNjaGVtYScgKyBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgc2NoZW1hVHJlZURhdGE6IGFueSA9IFtcclxuICAgIHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGlkOiAncHVibGljX3NjaGVtYScsXHJcbiAgICAgICAgaXNEZWZhdWx0OiAwLFxyXG4gICAgICAgIGlzUHJlZmFiOiAxLFxyXG4gICAgICAgIHNjaGVtYU5hbWU6ICflhazlhbEnLFxyXG4gICAgICAgIHNjaGVtYVR5cGU6IDAsXHJcbiAgICAgIH0sXHJcbiAgICAgIGV4cGFuZGVkOiB0cnVlLFxyXG4gICAgICBjaGlsZHJlbjogW11cclxuICAgIH0sIHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGlkOiAnb3JnX3NjaGVtYScsXHJcbiAgICAgICAgaXNEZWZhdWx0OiAwLFxyXG4gICAgICAgIGlzUHJlZmFiOiAxLFxyXG4gICAgICAgIHNjaGVtYU5hbWU6ICfljZXkvY0nLFxyXG4gICAgICAgIHNjaGVtYVR5cGU6IDJcclxuICAgICAgfSxcclxuICAgICAgZXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgfSwge1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgaWQ6ICdwZXJzb25fc2NoZW1hJyxcclxuICAgICAgICBpc0RlZmF1bHQ6IDAsXHJcbiAgICAgICAgaXNQcmVmYWI6IDEsXHJcbiAgICAgICAgc2NoZW1hTmFtZTogJ+S4quS6uicsXHJcbiAgICAgICAgc2NoZW1hVHlwZTogMVxyXG4gICAgICB9LFxyXG4gICAgICBleHBhbmRlZDogdHJ1ZSxcclxuICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICB9XHJcbiAgXTtcclxuICBzY2hlbWFEcm9wRG93bkRhdGE6IGFueVtdID0gW107XHJcbiAgc2NoZW1hSWQ6IGFueTtcclxuICBzZWxlY3RlZFNjaGVtYUlkOiBhbnk7XHJcbiAgaXNTY2hlbWFUeXBlID0gMDtcclxuICBpc0RlZmF1bHQgPSBmYWxzZTtcclxuICBjdXJyVHJlZU5vZGU6IGFueTtcclxuICBzY2hlbWFOYW1lOiBzdHJpbmc7XHJcbiAgY3VycmVudG1vZGUgPSBmYWxzZTtcclxuICBxb01hbmFnZXJDb2RlID0gJyc7XHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogJ+agvOW8j+aWueahiCcsXHJcbiAgICB3aWR0aDogOTAwLFxyXG4gICAgaGVpZ2h0OiA1MDAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcbiAgY2hhcnRzT3B0aW9uOiBhbnkgPSB7XHJcbiAgICBjaGFydHNUeXBlOiB7XHJcbiAgICAgIHNlcmllczoge1xyXG4gICAgICAgIHR5cGU6IG51bGxcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNoYXJ0c1N0eWxlOiB7XHJcbiAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgdGV4dDogbnVsbCxcclxuICAgICAgICB4OiBudWxsLFxyXG4gICAgICAgIHk6IG51bGwsXHJcbiAgICAgICAgdGV4dFN0eWxlOiB7XHJcbiAgICAgICAgICBsaW5lSGVpZ2h0OiAyNSxcclxuICAgICAgICAgIGZvbnRTaXplOiAyNSxcclxuICAgICAgICAgIGZvbnRTdHlsZTogJ25vcm1hbCcsXHJcbiAgICAgICAgICBmb250V2lnaHQ6ICdub3JtYWwnLFxyXG4gICAgICAgICAgZm9udEZhbWlseTogJ01pY3Jvc29mdCBZYUhlaScsXHJcbiAgICAgICAgICBjb2xvcjogJ2JsYWNrJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgaXRlbUdhcDogMTAsXHJcbiAgICAgICAgaXRlbVdpZHRoOiAyNSxcclxuICAgICAgICBpdGVtSGVpZ2h0OiAxNCxcclxuICAgICAgICBhbGlnbjogJ2F1dG8nLFxyXG4gICAgICAgIG9yaWVudDogJ2hvcml6b250YWwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHZpc3VhbE1hcDpcclxuICAgICAgICBbe1xyXG4gICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLFxyXG4gICAgICAgICAgdG9wOiAndG9wJyxcclxuICAgICAgICAgIGJvdHRvbTogbnVsbCxcclxuICAgICAgICAgIGxlZnQ6ICdyaWdodCcsXHJcbiAgICAgICAgICByaWdodDogbnVsbCxcclxuICAgICAgICAgIHBpZWNlczogW10sXHJcbiAgICAgICAgICBjYXRlZ29yaWVzOiBbXSxcclxuICAgICAgICAgIGNhbGN1bGFibGU6IHRydWUsXHJcbiAgICAgICAgICBpblJhbmdlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbJyMzMTM2OTUnLCAnIzQ1NzViNCcsICcjNzRhZGQxJywgJyNhYmQ5ZTknLCAnI2UwZjNmOCcsICcjZmZmZmJmJywgJyNmZWUwOTAnLCAnI2ZkYWU2MScsICcjZjQ2ZDQzJywgJyNkNzMwMjcnLCAnI2E1MDAyNiddXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgb3V0T2ZSYW5nZToge1xyXG4gICAgICAgICAgICBjb2xvcjogWydyZ2JhKDI1NSwyNTUsMjU1LC4yKSddXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY29udHJvbGxlcjoge1xyXG4gICAgICAgICAgICBpblJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgY29sb3I6IFsnIzMxMzY5NScsICcjNDU3NWI0JywgJyM3NGFkZDEnLCAnI2FiZDllOScsICcjZTBmM2Y4JywgJyNmZmZmYmYnLCAnI2ZlZTA5MCcsICcjZmRhZTYxJywgJyNmNDZkNDMnLCAnI2Q3MzAyNycsICcjYTUwMDI2J11cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb3V0T2ZSYW5nZToge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBbJyM0NDQnXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGV4dFN0eWxlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzgzNydcdC8vIOWAvOWfn+aOp+S7tueahOaWh+acrOminOiJslxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9XVxyXG4gICAgfSxcclxuICAgIGNoYXJ0c0RhdGE6IHtcclxuICAgICAgeEF4aXM6IHtcclxuICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLFxyXG4gICAgICAgIHBvc2l0aW9uOiAnYm90dG9tJ1xyXG4gICAgICB9LFxyXG4gICAgICB5QXhpczoge1xyXG4gICAgICAgIHR5cGU6ICd2YWx1ZScsXHJcbiAgICAgICAgcG9zaXRpb246ICdsZWZ0J1xyXG4gICAgICB9LFxyXG4gICAgICBzZXJpZXM6IHtcclxuICAgICAgICB0eXBlOiBudWxsLFxyXG4gICAgICAgIGVuY29kZToge1xyXG4gICAgICAgICAgeDogW10sXHJcbiAgICAgICAgICB5OiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgZGF0YTogW11cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgY2FjaGVTY2hlbWFEYXRhOiBhbnkgPSB7fTtcclxuICBvcGVyYXRpb25zOiBhbnkgPSB7fTtcclxuXHJcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG5cclxuICBsb2NhbGl6ZVNlcnZpY2U6IExvY2FsaXplU2VydmljZTtcclxuXHJcbiAgc3ZnU2NoZW1hID0gdHJ1ZTtcclxuICBmb3JtRXJyb3JTZXJ2aWNlOiBhbnk7XHJcbiAgY2FjaGU6IENhY2hlU2VydmljZTtcclxuICB0YWJJZDogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgc2NoZW1hU2VydmljZTogU2NoZW1hU2VydmljZSxcclxuICAgIHByaXZhdGUgbXNnU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMucGVyc29uU2NoZW1hID0gdGhpcy5wZXJzb25TY2hlbWEgKyBFdmVudEJ1cy5ndWlkKCk7XHJcbiAgICB0aGlzLnB1YmxpY1NjaGVtYSA9IHRoaXMucHVibGljU2NoZW1hICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gICAgdGhpcy5kZWZhdWx0U2NoZW1hID0gdGhpcy5kZWZhdWx0U2NoZW1hICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgdGhpcy5sb2NhbGl6ZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGl6ZVNlcnZpY2UpO1xyXG4gICAgICB0aGlzLm1vZGFsQ29uZmlnLnRpdGxlID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLmRhaWxvZ05hbWUnKTtcclxuICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVswXS5kYXRhLnNjaGVtYU5hbWUgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIuc2NoZW1lVHlwZVB1YmxpYycpO1xyXG4gICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmRhdGEuc2NoZW1hTmFtZSA9IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5zY2hlbWVUeXBlT3JnJyk7XHJcbiAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMl0uZGF0YS5zY2hlbWFOYW1lID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLnNjaGVtZVR5cGVQZXJzb25hbCcpO1xyXG4gICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChGb3JtRXJyb3JTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5jYWNoZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KENhY2hlU2VydmljZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50YWJJZCA9IFJ0ZlNlcnZpY2VzLmdldFRhYklkKHRoaXMucXVlcnlJZCk7XHJcbiAgICBFdmVudEJ1cy5yZWdpc3Rlcignb3BlbkFkdmFuY2VUZW1wbGF0ZURpYWxvZycsIHRoaXMuaW5pdFNlbGVjdGVkU2NoZW1hSWQuYmluZCh0aGlzKSwgdGhpcy50YWJJZCk7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzZWxmLnNjaGVtYVNlcnZpY2Uub3BlcmF0aW9uQ2hhbmdlLnN1YnNjcmliZSgodmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICBzZWxmLm9wZXJhdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBpbml0U2VsZWN0ZWRTY2hlbWFJZCgpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRTY2hlbWFJZCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgZm9yIChjb25zdCBjaGFuZ2VOYW1lIGluIGNoYW5nZXMpIHtcclxuICAgICAgY29uc3QgbmV3VmFsdWUgPSBjaGFuZ2VzW2NoYW5nZU5hbWVdLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgaWYgKG5ld1ZhbHVlICE9PSBudWxsICYmIG5ld1ZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBzd2l0Y2ggKGNoYW5nZU5hbWUpIHtcclxuICAgICAgICAgIGNhc2UgJ3NjaGVtYUluZm8nOlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnNjaGVtYUluZm9DaGFuZ2UobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnY29sTGlzdCc6XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY29sTGlzdENoYW5nZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdlZGl0b3JQYXJhbXMnOlxyXG4gICAgICAgICAgICB0aGlzLnNjaGVtYU1hbmFnZXJJbml0Rm9ySURFKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zICYmIHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgdGhpcy5zdWJzY3JpcHRpb25zKSB7XHJcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29sTGlzdENoYW5nZShuZXdWYWx1ZTogYW55KSB7XHJcbiAgICBpZiAodGhpcy5jb250cm9sVHlwZSAhPT0gJ2NoYXJ0cycpIHtcclxuICAgICAgaWYgKHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uZGF0YVsnc2NoZW1hVmFsdWUnXSAmJiB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gJiYgdGhpcy5zY2hlbWFUcmVlRGF0YVsyXS5kYXRhWydzY2hlbWFWYWx1ZSddICYmIG5ld1ZhbHVlICYmIG5ld1ZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSB0aGlzLmluaXRDb2x1bW5zKHRoaXMub2JqZWN0Q29weShuZXdWYWx1ZSkpO1xyXG4gICAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uZGF0YVsnc2NoZW1hVmFsdWUnXS5jb2x1bW5PcHRpb24uY29sTGlzdCA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVsxXS5kYXRhWydzY2hlbWFWYWx1ZSddLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gY29scztcclxuICAgICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzJdLmRhdGFbJ3NjaGVtYVZhbHVlJ10uY29sdW1uT3B0aW9uLmNvbExpc3QgPSBjb2xzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ10uc2NoZW1hVmFsdWVcclxuICAgICAgICAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbiAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sTGlzdCAmJiB0aGlzLmNvbExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjb25zdCBjb2xzID0gdGhpcy5pbml0Q29sdW1ucyh0aGlzLm9iamVjdENvcHkodGhpcy5jb2xMaXN0KSk7XHJcbiAgICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVsncHVibGljX3NjaGVtYSddLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gY29scztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncHVibGljX3NjaGVtYScpIHtcclxuICAgICAgICAgIHRoaXMuY3VyclRyZWVOb2RlQ2hhbmdlZChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5vZGU6IHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ11cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRDb2x1bW5zKGNvbHVtbnM6IGFueSkge1xyXG4gICAgaWYgKGNvbHVtbnMgJiYgY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgY29sdW1ucy5mb3JFYWNoKChjb2w6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbC5jb2xXaWR0aCA9IDE1MCwgY29sLnZpc2libGUgPSB0cnVlLCBjb2wuaXNGaXhlZCA9IGZhbHNlLCBjb2wuYWxpZ24gPSAxLFxyXG4gICAgICAgICAgY29sLmZvcm1hdFR5cGUgPSAwLCBjb2wuZm9ybWF0dG9yID0gJycsIGNvbC5zb3J0ID0gMCwgY29sLnBhZ2VBZ2dyZSA9IDAsIGNvbC5wYWdlQWdncmVUZXh0ID0gJycsXHJcbiAgICAgICAgICBjb2wuaXNHcm91cCA9IGZhbHNlLCBjb2wuZ3JvdXBBZ2dyZSA9IDAsIGNvbC5ncm91cEFnZ3JlVGV4dCA9ICcnLCBjb2wudG90YWxBZ2dyZSA9IDAsXHJcbiAgICAgICAgICBjb2wudG90YWxBZ2dyZVRleHQgPSAnJywgY29sLmRpbWVuc2lvbiA9IDAsIGNvbC5yb3dDb2xvciA9ICcnLCBjb2wuc2hvd1R5cGUgPSAnMCc7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbHVtbnM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNjaGVtYUluZm9DaGFuZ2UobmV3VmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5jb250cm9sSW5pdCgpO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uZGF0YVsnc2NoZW1hVmFsdWUnXSA9IHRoaXMuc2NoZW1hVHJlZURhdGFbMV0uZGF0YVsnc2NoZW1hVmFsdWUnXSA9IHRoaXMuc2NoZW1hVHJlZURhdGFbMl0uZGF0YVsnc2NoZW1hVmFsdWUnXSA9IG5ld1ZhbHVlICYmIG5ld1ZhbHVlLnByZVNjaGVtYSA/IG5ld1ZhbHVlLnByZVNjaGVtYS5zY2hlbWFWYWx1ZSA6IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNjaGVtYVRyZWVEYXRhWzBdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSB0aGlzLnNjaGVtYVRyZWVEYXRhWzFdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSB0aGlzLnNjaGVtYVRyZWVEYXRhWzJdLmRhdGFbJ3NjaGVtYVZhbHVlJ10gPSB0aGlzLmNoYXJ0c09wdGlvbjtcclxuICAgIH1cclxuICAgIGlmIChuZXdWYWx1ZSAmJiBuZXdWYWx1ZS5zY2hlbWFMaXN0KSB7XHJcbiAgICAgIC8vIOWIneWni+WMluagvOW8j+aWueahiOeuoeeQhueahOaWueahiOWvvOiIquagkeaOp+S7tuS7peWPiuaWueahiOeuoeeQhueahOS4i+aLieaOp+S7tlxyXG4gICAgICBPYmplY3Qua2V5cyhuZXdWYWx1ZS5zY2hlbWFMaXN0KS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbbmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldLmlkXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldKSk7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFEcm9wRG93bkRhdGEucHVzaChuZXdWYWx1ZS5zY2hlbWFMaXN0W2tleV0pO1xyXG4gICAgICAgIGlmICgobmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldLnNjaGVtYVR5cGUgLSAwKSA9PT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVswXS5jaGlsZHJlbi5wdXNoKHsgZGF0YTogbmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldLCBleHBhbmRlZDogdHJ1ZSwgY2hpbGRyZW46IFtdIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XS5zY2hlbWFUeXBlIC0gMCkgPT09IDIpIHtcclxuICAgICAgICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMV0uY2hpbGRyZW4ucHVzaCh7IGRhdGE6IG5ld1ZhbHVlLnNjaGVtYUxpc3Rba2V5XSwgZXhwYW5kZWQ6IHRydWUsIGNoaWxkcmVuOiBbXSB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zY2hlbWFUcmVlRGF0YVsyXS5jaGlsZHJlbi5wdXNoKHsgZGF0YTogbmV3VmFsdWUuc2NoZW1hTGlzdFtrZXldLCBleHBhbmRlZDogdHJ1ZSwgY2hpbGRyZW46IFtdIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNjaGVtYVRyZWUudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICBpZiAobmV3VmFsdWUgJiYgbmV3VmFsdWUuaXNEZWZhdWx0U2NoZW1hICYmIG5ld1ZhbHVlLmlzRGVmYXVsdFNjaGVtYS5pZCAmJiB0aGlzLnNlbGVjdGVkU2NoZW1hSWQgIT09ICdzZWxlY3RlZF9wcmVmYWInKSB7XHJcbiAgICAgIGlmICghdGhpcy5zY2hlbWFJZCB8fCAodGhpcy5zY2hlbWFJZCAmJiAnMSxwdWJsaWNfc2NoZW1hJy5pbmRleE9mKHRoaXMuc2NoZW1hSWQpID49IDApIHx8ICgnMSxwdWJsaWNfc2NoZW1hJy5pbmRleE9mKHRoaXMuc2NoZW1hSWQpID49IDAgJiYgIXRoaXMudmFsaWRhdGVTY2hlbWFJZCh0aGlzLnNjaGVtYUlkLCBuZXdWYWx1ZSkpIHx8ICgnMSxwdWJsaWNfc2NoZW1hJy5pbmRleE9mKHRoaXMuc2NoZW1hSWQpIDwgMCAmJiAhdGhpcy52YWxpZGF0ZVNjaGVtYUlkKHRoaXMuc2NoZW1hSWQsIG5ld1ZhbHVlKSkpIHtcclxuICAgICAgICB0aGlzLnNjaGVtYUlkID0gbmV3VmFsdWUuaXNEZWZhdWx0U2NoZW1hLmlkO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaXNEZWZhdWx0ID0gbmV3VmFsdWUuaXNEZWZhdWx0U2NoZW1hLmlzRGVmYXVsdCA9PT0gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgdGhpcy5pc1NjaGVtYVR5cGUgPSBuZXdWYWx1ZS5pc0RlZmF1bHRTY2hlbWEuc2NoZW1hVHlwZSAtIDA7XHJcbiAgICAgIHRoaXMuc2NoZW1hTmFtZSA9IG5ld1ZhbHVlLmlzRGVmYXVsdFNjaGVtYS5zY2hlbWFOYW1lO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCF0aGlzLnNjaGVtYUlkIHx8ICF0aGlzLnZhbGlkYXRlU2NoZW1hSWQodGhpcy5zY2hlbWFJZCwgbmV3VmFsdWUpKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFJZCA9ICdwcmVmYWInO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zY2hlbWFJZCA9PT0gJ3ByZWZhYicgfHwgdGhpcy5zY2hlbWFJZCA9PT0gJzEnIHx8ICF0aGlzLnNjaGVtYUlkKSB7XHJcbiAgICAgIHRoaXMudHJlZU5vZGVTZWxlY3RlZCgncHVibGljX3NjaGVtYScpO1xyXG4gICAgICB0aGlzLmlzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmlzU2NoZW1hVHlwZSA9IDA7XHJcbiAgICAgIHRoaXMuc2NoZW1hTmFtZSA9ICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50cmVlTm9kZVNlbGVjdGVkKHRoaXMuc2NoZW1hSWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzY2hlbWFNYW5hZ2VySW5pdEZvcklERSgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuZWRpdG9yUGFyYW1zICYmIHRoaXMuZWRpdG9yUGFyYW1zLnF1ZXJ5SWQpIHtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICAgIC8vIOiuoumYheagvOW8j+S/oeaBr+eahOWPmOWMllxyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgICBzZWxmLnNjaGVtYVNlcnZpY2Uuc2NoZW1hSW5mby5zdWJzY3JpYmUodmFsdWUgPT4ge1xyXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYUluZm9BbGwgPSBPYmplY3QuYXNzaWduKHt9LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHNlbGYuc2NoZW1hSW5mbyA9IHNjaGVtYUluZm9BbGw7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNjaGVtYUluZm8uc2NoZW1hTGlzdCkge1xyXG4gICAgICAgICAgICAgIHNlbGYuc2NoZW1hSW5mby5zY2hlbWFMaXN0ID0gc2VsZi5zY2hlbWFJbmZvLnNjaGVtYUxpc3Rbc2VsZi5lZGl0b3JQYXJhbXMucXVlcnlJZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5zY2hlbWFJbmZvQ2hhbmdlKHNlbGYuc2NoZW1hSW5mbyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgICAgLy8g6K6i6ZiF5pWw5o2u5YiX5L+h5oGv55qE5Y+Y5YyWXHJcbiAgICAgICAgc2VsZi5zY2hlbWFTZXJ2aWNlLmNvbExpc3Quc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgICAgIHNlbGYuY29sTGlzdCA9IHZhbHVlO1xyXG4gICAgICAgICAgc2VsZi5jb2xMaXN0Q2hhbmdlKHNlbGYuY29sTGlzdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgICAgaWYgKHRoaXMuc2NoZW1hRWRpdG9yICYmIHRoaXMuc2NoZW1hRWRpdG9yLnRhYnMpIHtcclxuICAgICAgICB0aGlzLnNjaGVtYUVkaXRvci50YWJzLnNlbGVjdFRhYigndGl0bGUnKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnF1ZXJ5SWQgPSB0aGlzLmVkaXRvclBhcmFtcy5xdWVyeUlkO1xyXG4gICAgICB0aGlzLmNvbnRyb2xUeXBlID0gdGhpcy5lZGl0b3JQYXJhbXMuY29udHJvbFR5cGU7XHJcbiAgICAgIHRoaXMucW9NYW5hZ2VyQ29kZSA9IHRoaXMuZWRpdG9yUGFyYW1zLnFvTWFuYWdlckNvZGU7XHJcbiAgICAgIHRoaXMucXVlcnlSZWxhdGl2ZVVybCA9IHRoaXMuZWRpdG9yUGFyYW1zLnF1ZXJ5UmVsYXRpdmVVcmw7XHJcbiAgICAgIHRoaXMuY3VycmVudG1vZGUgPSB0cnVlO1xyXG4gICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IHRoaXMuY2FjaGUuZ2V0KHRoaXMudGFiSWQgKyAnb3JnYW5pemF0aW9uSWQnKSB8fCAnJztcclxuICAgICAgdGhpcy5zY2hlbWFTZXJ2aWNlLmdldFNjaGVtYUxpc3Qoc2VsZi5xdWVyeUlkLCAnJywgb3JnYW5pemF0aW9uSWQsIHNlbGYucXVlcnlSZWxhdGl2ZVVybCwgc2VsZi5ncm91cFR5cGUpLnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2NoZW1hRGF0YSA9IHZhbHVlID8gdmFsdWUgOiBbXTtcclxuICAgICAgICBjb25zdCBzY2hlbWFJZCA9IHNjaGVtYURhdGEgJiYgc2NoZW1hRGF0YS5sZW5ndGggJiYgc2NoZW1hRGF0YVswXSAmJiBzY2hlbWFEYXRhWzBdLmlkID8gc2NoZW1hRGF0YVswXS5pZCA6ICcxJztcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBwYXJhbXNbJ3FvTWFuYWdlckNvZGUnXSA9IHNlbGYucW9NYW5hZ2VyQ29kZTtcclxuICAgICAgICBwYXJhbXNbJ3BhZ2VJbmRleCddID0gMDtcclxuICAgICAgICBwYXJhbXNbJ3NjaGVtYUlkJ10gPSBzY2hlbWFJZDtcclxuICAgICAgICBwYXJhbXNbJ2VudGl0eURhdGEnXSA9ICcnO1xyXG4gICAgICAgIHBhcmFtc1snZXh0ZW5kQ29uZCddID0gJyc7XHJcbiAgICAgICAgaWYgKHNlbGYuZWRpdG9yUGFyYW1zICYmIHNlbGYuZWRpdG9yUGFyYW1zLmR5bmFtaWNDb2xzICYmIHNlbGYuZWRpdG9yUGFyYW1zLmR5bmFtaWNDb2xzLmxlbmd0aCkge1xyXG4gICAgICAgICAgc2VsZi5zY2hlbWFTZXJ2aWNlLmdldFNwcmVhZFRlbXBsYXRlKHNjaGVtYUlkLCBzZWxmLnF1ZXJ5SWQsIHNlbGYuZWRpdG9yUGFyYW1zLmR5bmFtaWNDb2xzLCBzZWxmLnF1ZXJ5UmVsYXRpdmVVcmwsIG51bGwsIHNlbGYuZWRpdG9yUGFyYW1zLmR5bmFtaWNDb2xzKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZi5zY2hlbWFTZXJ2aWNlLmdldENvbChwYXJhbXMsIHNlbGYucXVlcnlSZWxhdGl2ZVVybCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmR5bmFtaWNDb2xzKSB7XHJcbiAgICAgICAgICAgICAgc2VsZi5zY2hlbWFTZXJ2aWNlLmdldFNwcmVhZFRlbXBsYXRlKHNjaGVtYUlkLCBzZWxmLnF1ZXJ5SWQsIHJlc3VsdC5keW5hbWljQ29scywgc2VsZi5xdWVyeVJlbGF0aXZlVXJsLCBudWxsLCByZXN1bHQuZHluYW1pY0NvbHMpLnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb250cm9sSW5pdCgpIHtcclxuICAgIHRoaXMuY3VyclRyZWVOb2RlID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5jYWNoZVNjaGVtYURhdGEgPSB7fTtcclxuICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMF0uY2hpbGRyZW4gPSBbXTtcclxuICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMV0uY2hpbGRyZW4gPSBbXTtcclxuICAgIHRoaXMuc2NoZW1hVHJlZURhdGFbMl0uY2hpbGRyZW4gPSBbXTtcclxuICAgIHRoaXMuc2NoZW1hRHJvcERvd25EYXRhID0gW107XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHZhbGlkYXRlU2NoZW1hSWQoaWQ6IGFueSwgbmV3VmFsdWU6IGFueSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgaWYgKCFpZCkge1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgaWYgKG5ld1ZhbHVlICYmIG5ld1ZhbHVlLnNjaGVtYUxpc3QpIHtcclxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3VmFsdWUuc2NoZW1hTGlzdCkge1xyXG4gICAgICAgIGlmIChpZCA9PT0ga2V5KSB7XHJcbiAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGhhbmRsZURpYWxvZ1Nob3coKSB7XHJcbiAgICB0aGlzLnBlcnNvblNjaGVtYSA9ICdwZXJzb25TY2hlbWEnICsgRXZlbnRCdXMuZ3VpZCgpO1xyXG4gICAgdGhpcy5wdWJsaWNTY2hlbWEgPSAncHVibGljU2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICAgIHRoaXMuZGVmYXVsdFNjaGVtYSA9ICdkZWZhdWx0U2NoZW1hJyArIEV2ZW50QnVzLmd1aWQoKTtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICBpZiAodGhpcy5zY2hlbWFFZGl0b3IgJiYgdGhpcy5zY2hlbWFFZGl0b3IudGFicykge1xyXG4gICAgICAgIHRoaXMuc2NoZW1hRWRpdG9yLnRhYnMuc2VsZWN0VGFiKCd0aXRsZScpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5jaGFydHNTY2hlbWFFZGl0b3IgJiYgdGhpcy5jaGFydHNTY2hlbWFFZGl0b3IudGFicykge1xyXG4gICAgICAgIHRoaXMuY2hhcnRzU2NoZW1hRWRpdG9yLnRhYnMuc2VsZWN0VGFiKCd0eXBlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTtcclxuICAgIHRoaXMuZmFycmlzRGlhbG9nLnNob3coKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURyb3BEb3duSXRlbUNsaWNrKGlkOiBhbnkpIHtcclxuICAgIHRoaXMuc2NoZW1hSWQgPSBpZDtcclxuICAgIGlmICh0aGlzLnNjaGVtYUlkID09PSAncHJlZmFiJykge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkU2NoZW1hSWQgPSAnc2VsZWN0ZWRfcHJlZmFiJztcclxuICAgICAgdGhpcy50cmVlTm9kZVNlbGVjdGVkKCdwdWJsaWNfc2NoZW1hJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkU2NoZW1hSWQgPSBpZDtcclxuICAgICAgdGhpcy50cmVlTm9kZVNlbGVjdGVkKHRoaXMuc2NoZW1hSWQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zY2hlbWFTZWxlY3RlZC5lbWl0KGlkID09PSAncHJlZmFiJyA/ICcxJyA6IGlkKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVRhYnNTZWxlY3RDaGFuZ2Uob3B0aW9uOiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50ICYmIHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQubW9kZWxWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudC51cGRhdGVNb2RlbCgnc2NoZW1hSW5mbycpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVDdXJyU2NoZW1hKG9wdGlvbiwgJ3RhYkNoYW5nZWQnKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNjaGVtYVR5cGVTZWxlY3QodmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5pc1NjaGVtYVR5cGUgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVRyZWVOb2RlU2VsZWN0ZWQoZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICghdGhpcy5jdXJyVHJlZU5vZGUpIHtcclxuICAgICAgdGhpcy5jdXJyVHJlZU5vZGVDaGFuZ2VkKGRhdGEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGRhdGEubm9kZS5kYXRhLmlkICE9PSB0aGlzLmN1cnJUcmVlTm9kZS5pZCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjaGVtYUVkaXRvciB8fCB0aGlzLmNoYXJ0c1NjaGVtYUVkaXRvcikge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncHVibGljX3NjaGVtYScgfHwgdGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdwZXJzb25fc2NoZW1hJyB8fCB0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyclRyZWVOb2RlQ2hhbmdlZChkYXRhKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjb21wYXJlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyU2NoZW1hKG51bGwpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sVHlwZSA9PT0gJ2NoYXJ0cycgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEpIHtcclxuICAgICAgICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5zZXJpZXMudHlwZSA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhLnNlcmllcy50eXBlLnJlcGxhY2UoJzEnLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlID09PSAnY2hhcnRzJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyVHJlZU5vZGUuc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5zZXJpZXMudHlwZSA9IHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlLmNoYXJ0c1R5cGUuc2VyaWVzLnR5cGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5zZXJpZXMudHlwZSA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZS5jaGFydHNUeXBlLnNlcmllcy50eXBlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBjb21wYXJlID0gKEpTT04uc3RyaW5naWZ5KHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlKSA9PT1cclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFWYWx1ZSlcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYU5hbWUgPT09IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFOYW1lXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFUeXBlID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVHlwZVxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5jdXJyVHJlZU5vZGUuaXNEZWZhdWx0ID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNEZWZhdWx0KTtcclxuICAgICAgICAgICAgICBpZiAoZmFsc2UgJiYgIWNvbXBhcmUgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEuc2VyaWVzLnR5cGUgIT09ICdlZmZlY3RTY2F0dGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLnF1ZXN0aW9uKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmp1ZGdlVXBkYXRlJyksXHJcbiAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJUcmVlTm9kZUNoYW5nZWQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYVRyZWUuc2VsZWN0Tm9kZSh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZW1hTmFtZSA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHQgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNEZWZhdWx0ID09PSAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJUcmVlTm9kZUNoYW5nZWQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGN1cnJUcmVlTm9kZUNoYW5nZWQoZGF0YTogYW55KSB7XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUgJiYgKHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncHVibGljX3NjaGVtYScgfHwgdGhpcy5jdXJyVHJlZU5vZGUuaWQgPT09ICdwZXJzb25fc2NoZW1hJyB8fCB0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ29yZ19zY2hlbWEnKSkge1xyXG4gICAgICBkZWxldGUgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyVHJlZU5vZGUgPSBkYXRhLm5vZGUuZGF0YTtcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJyAmJiB0aGlzLmNvbExpc3QgJiYgdGhpcy5jb2xMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gdGhpcy5jb2xMaXN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gMDtcclxuICAgICAgdGhpcy5zY2hlbWFOYW1lID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLnNjaGVtZVB1YmxpYycpO1xyXG4gICAgICB0aGlzLnNjaGVtYUlkID0gJ3ByZWZhYic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3VyclRyZWVOb2RlLmlkID09PSAncGVyc29uX3NjaGVtYScpIHtcclxuICAgICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyVHJlZU5vZGUuc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgPSB0aGlzLmNvbExpc3Q7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pc0RlZmF1bHQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5pc1NjaGVtYVR5cGUgPSAxO1xyXG4gICAgICB0aGlzLnNjaGVtYU5hbWUgPSB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIuc2NoZW1lUGVyc29uYWwnKTtcclxuICAgICAgdGhpcy5zY2hlbWFJZCA9ICdwcmVmYWInO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJUcmVlTm9kZS5pZCA9PT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICAgIHRoaXMuY3VyclRyZWVOb2RlLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ID0gdGhpcy5jb2xMaXN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaXNTY2hlbWFUeXBlID0gMjtcclxuICAgICAgdGhpcy5zY2hlbWFOYW1lID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLnNjaGVtZU9yZycpO1xyXG4gICAgICB0aGlzLnNjaGVtYUlkID0gJ3ByZWZhYic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzRGVmYXVsdCA9IHRoaXMuY3VyclRyZWVOb2RlLmlzRGVmYXVsdCA9PT0gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgdGhpcy5pc1NjaGVtYVR5cGUgPSB0aGlzLmN1cnJUcmVlTm9kZS5zY2hlbWFUeXBlIC0gMDtcclxuICAgICAgdGhpcy5zY2hlbWFOYW1lID0gdGhpcy5jdXJyVHJlZU5vZGUuc2NoZW1hTmFtZTtcclxuICAgICAgdGhpcy5zY2hlbWFJZCA9IHRoaXMuY3VyclRyZWVOb2RlLmlkO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJUcmVlTm9kZSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmVlTm9kZVNlbGVjdGVkKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc2NoZW1hVHJlZS5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgIGlmIChpZCkge1xyXG4gICAgICB0aGlzLnNjaGVtYVRyZWUuc2VsZWN0Tm9kZShpZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblJlc2l6ZWQoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5zaXplLmhlaWdodCA9IGV2ZW50Lm5ld0hlaWdodCB8fCAzMDA7XHJcbiAgICB0aGlzLnNpemUud2lkdGggPSBldmVudC5uZXdXaWR0aDtcclxuICAgIGlmICh0aGlzLnNjaGVtYVRyZWUpIHtcclxuICAgICAgdGhpcy5zY2hlbWFUcmVlLnJlc2l6ZSh0aGlzLnNpemUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2F2ZUFzQ2xpY2soKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudXBkYXRlQ3VyclNjaGVtYShudWxsLCAnc2F2ZV9hcycpO1xyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ10pIHtcclxuICAgICAgaWYgKHRoaXMub3BlcmF0aW9uc1snUWRwTW9kaWZ5UHVibGljU2NoZW1hJ10gPT09IGZhbHNlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhWydwdWJsaWNfc2NoZW1hJ10uc2NoZW1hVHlwZSA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnFkcE1vZGlmeVB1YmxpY1NjaGVtYScpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXSk7XHJcbiAgICAgIGNvbnN0IHNjaGVtYSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgc2NoZW1hLnF1ZXJ5SWQgPSB0aGlzLnF1ZXJ5SWQ7XHJcbiAgICAgIHNjaGVtYS5zY2hlbWFWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHNjaGVtYS5zY2hlbWFWYWx1ZSk7XHJcbiAgICAgIGlmICghc2NoZW1hLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5ub3ROdWxsJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNhY2hlU2NoZW1hRGF0YSkge1xyXG4gICAgICAgICAgaWYgKGtleSAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIGtleSAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIGtleSAhPT0gJ29yZ19zY2hlbWEnICYmIGtleSAhPT0gc2NoZW1hLmlkICYmIHNjaGVtYS5zY2hlbWFOYW1lID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVtrZXldLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuZXhpc3RzJykpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudCAmJiAhdGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudC5tb2RlbFZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQudXBkYXRlTW9kZWwoJ3NjaGVtYUluZm8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICAgIGlmICh0aGlzLmNyb3NzdGFiQ29sdW1uVmFsaWRhdGUodGhpcy5jYWNoZVNjaGVtYURhdGFbJ3B1YmxpY19zY2hlbWEnXS5zY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdCkpIHtcclxuICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLmNyb3NzdGFiVmFsdWVEaW1lbnNpb24nKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChzY2hlbWEuc2NoZW1hTmFtZSAmJiBzY2hlbWEuc2NoZW1hTmFtZS5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS50b29Mb25nJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0ZXh0U29ydENvbHVtbiA9IHsgaXNUZXh0OiBbXSB9O1xyXG4gICAgICB0aGlzLmdldFRleHRDb2x1bW5Tb3J0KHNjaGVtYSwgdGV4dFNvcnRDb2x1bW4pO1xyXG4gICAgICBpZiAodGV4dFNvcnRDb2x1bW4uaXNUZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRleHRTb3J0Q29sdW1uLmlzVGV4dFswXSArICcgJyArIHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnRleHRDb2x1bW5Tb3J0JykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzY2hlbWEuaWQgPSAnJztcclxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSB0aGlzLmNhY2hlLmdldCh0aGlzLnRhYklkICsgJ29yZ2FuaXphdGlvbklkJykgfHwgJyc7XHJcbiAgICAgIHNjaGVtYS5vcmdJZCA9IG9yZ2FuaXphdGlvbklkO1xyXG4gICAgICB0aGlzLnNjaGVtYVNlcnZpY2Uuc2F2ZVNjaGVtYSh7IHNjaGVtYTogSlNPTi5zdHJpbmdpZnkoc2NoZW1hKSwgZ3JvdXBUeXBlOiB0aGlzLmdyb3VwVHlwZSB9LCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zY2hlbWFJZCA9ICcnO1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hLmlkKSB7XHJcbiAgICAgICAgICB0aGlzLnNjaGVtYUlkID0gZGF0YS5pc0RlZmF1bHRTY2hlbWEuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZVsnc3VjY2VzcyddKHtcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5pbmZvLnRpdGxlJyksIG1zZzogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2Uuc2F2ZS5zdWNjZXNzJyksIHRpbWVvdXQ6IDMwMDBcclxuICAgICAgICB9IGFzIE5vdGlmeU9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUFzU2NoZW1hLmVtaXQoKTtcclxuICAgICAgfSwgKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICBzZWxmLmZvcm1FcnJvclNlcnZpY2UuZXhjZXB0aW9uKGVycm9yLk1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVSZW1vdmVDbGljaygpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkge1xyXG4gICAgICBpZiAodGhpcy5vcGVyYXRpb25zWydRZHBNb2RpZnlQdWJsaWNTY2hlbWEnXSA9PT0gZmFsc2UgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVR5cGUgPT09IDApIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5xZHBNb2RpZnlQdWJsaWNTY2hlbWEnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgJiYgKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pc1Byb3RlY3RlZCA9PT0gMSB8fCB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgPT09ICcxJykpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5pc1Byb3RlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3B1YmxpY19zY2hlbWEnICYmXHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAncGVyc29uX3NjaGVtYScgJiZcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gdGhpcy5jYWNoZS5nZXQodGhpcy50YWJJZCArICdvcmdhbml6YXRpb25JZCcpIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuc2NoZW1hU2VydmljZS5kZWxldGVTY2hlbWEodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkLCB0aGlzLnF1ZXJ5SWQsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCwgdGhpcy5ncm91cFR5cGUsIG9yZ2FuaXphdGlvbklkKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgZGF0YS5zdWJzY3JpYmUoKHZhbHVlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlbWFJZCA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2VbJ3N1Y2Nlc3MnXSh7XHJcbiAgICAgICAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLmluZm8udGl0bGUnKSwgbXNnOiB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5kZWxldGUuc3VjY2VzcycpLCB0aW1lb3V0OiAzMDAwXHJcbiAgICAgICAgICAgIH0gYXMgTm90aWZ5T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2NoZW1hLmVtaXQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICBzZWxmLmZvcm1FcnJvclNlcnZpY2UuZXhjZXB0aW9uKGVycm9yLk1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5pbmZvLmRlbGV0ZScpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuaW5mby5kZWxldGUnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTYXZlQ2xpY2soKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyVHJlZU5vZGUgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGEgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKSB7XHJcbiAgICAgIGlmICh0aGlzLm9wZXJhdGlvbnNbJ1FkcE1vZGlmeVB1YmxpY1NjaGVtYSddID09PSBmYWxzZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVHlwZSA9PT0gMCAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwdWJsaWNfc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdwZXJzb25fc2NoZW1hJyAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaWQgIT09ICdvcmdfc2NoZW1hJykge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnFkcE1vZGlmeVB1YmxpY1NjaGVtYScpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlQ3VyclNjaGVtYShudWxsKTtcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgaWYgKHRoaXMub3BlcmF0aW9uc1snUWRwTW9kaWZ5UHVibGljU2NoZW1hJ10gPT09IGZhbHNlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFUeXBlID09PSAwICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUucWRwTW9kaWZ5UHVibGljU2NoZW1hJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkICYmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgPT09IDEgfHwgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlzUHJvdGVjdGVkID09PSAnMScpKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8odGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuaXNQcm90ZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSk7XHJcbiAgICAgIGNvbnN0IHNjaGVtYSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgaWYgKHNjaGVtYS5pZCA9PT0gJ3B1YmxpY19zY2hlbWEnIHx8IHNjaGVtYS5pZCA9PT0gJ3BlcnNvbl9zY2hlbWEnIHx8IHNjaGVtYS5pZCA9PT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgc2NoZW1hLmlkID0gJyc7XHJcbiAgICAgIH1cclxuICAgICAgc2NoZW1hLnF1ZXJ5SWQgPSB0aGlzLnF1ZXJ5SWQ7XHJcbiAgICAgIHNjaGVtYS5zY2hlbWFWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHNjaGVtYS5zY2hlbWFWYWx1ZSk7XHJcbiAgICAgIGlmICghc2NoZW1hLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5ub3ROdWxsJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNhY2hlU2NoZW1hRGF0YSkge1xyXG4gICAgICAgICAgaWYgKGtleSAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIGtleSAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIGtleSAhPT0gJ29yZ19zY2hlbWEnICYmIGtleSAhPT0gc2NoZW1hLmlkICYmIHNjaGVtYS5zY2hlbWFOYW1lID09PSB0aGlzLmNhY2hlU2NoZW1hRGF0YVtrZXldLnNjaGVtYU5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuZXhpc3RzJykpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudCAmJiAhdGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudC5tb2RlbFZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuZmFycmlzUGFuZWxDb21wb25lbnQudXBkYXRlTW9kZWwoJ3NjaGVtYUluZm8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICAgIGlmICh0aGlzLmNyb3NzdGFiQ29sdW1uVmFsaWRhdGUodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0KSkge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUuY3Jvc3N0YWJWYWx1ZURpbWVuc2lvbicpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNjaGVtYS5zY2hlbWFOYW1lICYmIHNjaGVtYS5zY2hlbWFOYW1lLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLnRvb0xvbmcnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHRleHRTb3J0Q29sdW1uID0geyBpc1RleHQ6IFtdIH07XHJcbiAgICAgIHRoaXMuZ2V0VGV4dENvbHVtblNvcnQoc2NoZW1hLCB0ZXh0U29ydENvbHVtbik7XHJcbiAgICAgIGlmICh0ZXh0U29ydENvbHVtbi5pc1RleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGV4dFNvcnRDb2x1bW4uaXNUZXh0WzBdICsgJyAnICsgdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUudGV4dENvbHVtblNvcnQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gdGhpcy5jYWNoZS5nZXQodGhpcy50YWJJZCArICdvcmdhbml6YXRpb25JZCcpIHx8ICcnO1xyXG4gICAgICBzY2hlbWEub3JnSWQgPSBvcmdhbml6YXRpb25JZDtcclxuICAgICAgdGhpcy5zY2hlbWFTZXJ2aWNlLnNhdmVTY2hlbWEoeyBzY2hlbWE6IEpTT04uc3RyaW5naWZ5KHNjaGVtYSksIGdyb3VwVHlwZTogdGhpcy5ncm91cFR5cGUgfSwgdGhpcy5xdWVyeVJlbGF0aXZlVXJsKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hICYmIGRhdGEuaXNEZWZhdWx0U2NoZW1hLmlkKSB7XHJcbiAgICAgICAgICB0aGlzLnNjaGVtYUlkID0gZGF0YS5pc0RlZmF1bHRTY2hlbWEuaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZW1hSWQgPSB0aGlzLnNjaGVtYUlkID09PSAncHJlZmFiJyA/ICcnIDogdGhpcy5zY2hlbWFJZDtcclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2VbJ3N1Y2Nlc3MnXSh7XHJcbiAgICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UuaW5mby50aXRsZScpLCBtc2c6IHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnNhdmUuc3VjY2VzcycpLCB0aW1lb3V0OiAzMDAwXHJcbiAgICAgICAgfSBhcyBOb3RpZnlPcHRpb25zKTtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlU2VsZWN0ZWQodGhpcy5zY2hlbWFJZCk7XHJcbiAgICAgICAgdGhpcy5zYXZlU2NoZW1hLmVtaXQoKTtcclxuICAgICAgfSwgKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UuZXhjZXB0aW9uKGVycm9yLk1lc3NhZ2UsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTYXZlQW5kQ2xvc2VDbGljaygpIHtcclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgaWYgKHRoaXMub3BlcmF0aW9uc1snUWRwTW9kaWZ5UHVibGljU2NoZW1hJ10gPT09IGZhbHNlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5zY2hlbWFUeXBlID09PSAwICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3B1YmxpY19zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ3BlcnNvbl9zY2hlbWEnICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pZCAhPT0gJ29yZ19zY2hlbWEnKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUucWRwTW9kaWZ5UHVibGljU2NoZW1hJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVDdXJyU2NoZW1hKG51bGwpO1xyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkge1xyXG4gICAgICBpZiAodGhpcy5vcGVyYXRpb25zWydRZHBNb2RpZnlQdWJsaWNTY2hlbWEnXSA9PT0gZmFsc2UgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLnNjaGVtYVR5cGUgPT09IDAgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAncHVibGljX3NjaGVtYScgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAncGVyc29uX3NjaGVtYScgJiYgdGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdLmlkICE9PSAnb3JnX3NjaGVtYScpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5xZHBNb2RpZnlQdWJsaWNTY2hlbWEnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgJiYgKHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXS5pc1Byb3RlY3RlZCA9PT0gMSB8fCB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uaXNQcm90ZWN0ZWQgPT09ICcxJykpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuaW5mbyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5pc1Byb3RlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKTtcclxuICAgICAgY29uc3Qgc2NoZW1hID0gSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgICBpZiAoc2NoZW1hLmlkID09PSAncHVibGljX3NjaGVtYScgfHwgc2NoZW1hLmlkID09PSAncGVyc29uX3NjaGVtYScgfHwgc2NoZW1hLmlkID09PSAnb3JnX3NjaGVtYScpIHtcclxuICAgICAgICBzY2hlbWEuaWQgPSAnJztcclxuICAgICAgfVxyXG4gICAgICBzY2hlbWEucXVlcnlJZCA9IHRoaXMucXVlcnlJZDtcclxuICAgICAgc2NoZW1hLnNjaGVtYVZhbHVlID0gSlNPTi5zdHJpbmdpZnkoc2NoZW1hLnNjaGVtYVZhbHVlKTtcclxuICAgICAgaWYgKCFzY2hlbWEuc2NoZW1hTmFtZSkge1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAuc2NoZW1hTWFuYWdlci5tZXNzYWdlLnZhbGlkYXRlLm5vdE51bGwnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuY2FjaGVTY2hlbWFEYXRhKSB7XHJcbiAgICAgICAgICBpZiAoa2V5ICE9PSAncHVibGljX3NjaGVtYScgJiYga2V5ICE9PSAncGVyc29uX3NjaGVtYScgJiYga2V5ICE9PSAnb3JnX3NjaGVtYScgJiYga2V5ICE9PSBzY2hlbWEuaWQgJiYgc2NoZW1hLnNjaGVtYU5hbWUgPT09IHRoaXMuY2FjaGVTY2hlbWFEYXRhW2tleV0uc2NoZW1hTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5leGlzdHMnKSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50ICYmICF0aGlzLmZhcnJpc1BhbmVsQ29tcG9uZW50Lm1vZGVsVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5mYXJyaXNQYW5lbENvbXBvbmVudC51cGRhdGVNb2RlbCgnc2NoZW1hSW5mbycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuY29udHJvbFR5cGUgIT09ICdjaGFydHMnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3Jvc3N0YWJDb2x1bW5WYWxpZGF0ZSh0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0uc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QpKSB7XHJcbiAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5jcm9zc3RhYlZhbHVlRGltZW5zaW9uJykpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoc2NoZW1hLnNjaGVtYU5hbWUgJiYgc2NoZW1hLnNjaGVtYU5hbWUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2UudmFsaWRhdGUudG9vTG9uZycpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdGV4dFNvcnRDb2x1bW4gPSB7IGlzVGV4dDogW10gfTtcclxuICAgICAgdGhpcy5nZXRUZXh0Q29sdW1uU29ydChzY2hlbWEsIHRleHRTb3J0Q29sdW1uKTtcclxuICAgICAgaWYgKHRleHRTb3J0Q29sdW1uLmlzVGV4dC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0ZXh0U29ydENvbHVtbi5pc1RleHRbMF0gKyAnICcgKyB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS50ZXh0Q29sdW1uU29ydCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSB0aGlzLmNhY2hlLmdldCh0aGlzLnRhYklkICsgJ29yZ2FuaXphdGlvbklkJykgfHwgJyc7XHJcbiAgICAgIHNjaGVtYS5vcmdJZCA9IG9yZ2FuaXphdGlvbklkO1xyXG4gICAgICB0aGlzLnNjaGVtYVNlcnZpY2Uuc2F2ZVNjaGVtYSh7IHNjaGVtYTogSlNPTi5zdHJpbmdpZnkoc2NoZW1hKSwgZ3JvdXBUeXBlOiB0aGlzLmdyb3VwVHlwZSB9LCB0aGlzLnF1ZXJ5UmVsYXRpdmVVcmwpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5pc0RlZmF1bHRTY2hlbWEgJiYgZGF0YS5pc0RlZmF1bHRTY2hlbWEuaWQpIHtcclxuICAgICAgICAgIHRoaXMuc2NoZW1hSWQgPSBkYXRhLmlzRGVmYXVsdFNjaGVtYS5pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2hlbWFJZCA9IHRoaXMuc2NoZW1hSWQgPT09ICdwcmVmYWInID8gJycgOiB0aGlzLnNjaGVtYUlkO1xyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZVsnc3VjY2VzcyddKHtcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS5pbmZvLnRpdGxlJyksIG1zZzogdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5zY2hlbWFNYW5hZ2VyLm1lc3NhZ2Uuc2F2ZS5zdWNjZXNzJyksIHRpbWVvdXQ6IDMwMDBcclxuICAgICAgICB9IGFzIE5vdGlmeU9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVTZWxlY3RlZCh0aGlzLnNjaGVtYUlkKTtcclxuICAgICAgICB0aGlzLnNhdmVBbmRDbG9zZVNjaGVtYS5lbWl0KCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50bW9kZSkge1xyXG4gICAgICAgICAgdGhpcy5mYXJyaXNEaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlLmV4Y2VwdGlvbihlcnJvci5NZXNzYWdlLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlYmVmb3JlQ2xvc2UgPSAoKTogT2JzZXJ2YWJsZTxhbnk+ID0+IHtcclxuICAgIGxldCBpZDogYW55ID0gJyc7XHJcbiAgICBpZiAodGhpcy5zY2hlbWFJZCkge1xyXG4gICAgICBpZCA9IHRoaXMuc2NoZW1hSWQgPT09ICdwcmVmYWInID8gJzEnIDogdGhpcy5zY2hlbWFJZDtcclxuICAgIH1cclxuICAgIGlmICghaWQgJiYgdGhpcy5zY2hlbWFJbmZvICYmIHRoaXMuc2NoZW1hSW5mby5pc0RlZmF1bHRTY2hlbWEpIHtcclxuICAgICAgaWQgPSB0aGlzLnNjaGVtYUluZm8uaXNEZWZhdWx0U2NoZW1hLmlkO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kaWFsb2dCZWZvcmVDbG9zZS5lbWl0KGlkKTtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQ3VyclNjaGVtYShvcHRpb25zOiBhbnksIHR5cGU/OiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xUeXBlICE9PSAnY2hhcnRzJykge1xyXG4gICAgICB0aGlzLnVwZGF0ZUxpc3RTY2hlbWEob3B0aW9ucywgdHlwZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnVwZGF0ZUNoYXJ0c1NjaGVtYShvcHRpb25zLCB0eXBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTGlzdFNjaGVtYShvcHRpb25zOiBhbnksIHR5cGU/OiBhbnkpIHtcclxuICAgIGxldCBvcHRpb24gPSBvcHRpb25zO1xyXG4gICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgaWYgKHRoaXMuc2NoZW1hRWRpdG9yKSB7XHJcbiAgICAgICAgb3B0aW9uID0gdGhpcy5zY2hlbWFFZGl0b3IuZ2V0T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmN1cnJUcmVlTm9kZSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YSAmJiB0aGlzLmNhY2hlU2NoZW1hRGF0YVt0aGlzLmN1cnJUcmVlTm9kZS5pZF0pIHtcclxuICAgICAgbGV0IHNJZCA9IHRoaXMuY3VyclRyZWVOb2RlLmlkO1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3NhdmVfYXMnKSB7XHJcbiAgICAgICAgc0lkID0gJ3B1YmxpY19zY2hlbWEnO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkpO1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uaWQgPSBzSWQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24udGl0bGVPcHRpb24pIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLnRpdGxlT3B0aW9uID0gb3B0aW9uLnRpdGxlT3B0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLmNvbHVtbk9wdGlvbiAmJiBvcHRpb24uY29sdW1uT3B0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uLmNvbExpc3QgPSBvcHRpb24uY29sdW1uT3B0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnN0eWxlT3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5zdHlsZU9wdGlvbiA9IG9wdGlvbi5zdHlsZU9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5vdGhlck9wdGlvbikge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUub3RoZXJPcHRpb24gPSBvcHRpb24ub3RoZXJPcHRpb247XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGUgIT09ICd0YWJDaGFuZ2VkJykge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hTmFtZSA9IHRoaXMuc2NoZW1hTmFtZTtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVR5cGUgPSB0aGlzLmlzU2NoZW1hVHlwZTtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLmlzRGVmYXVsdCA9IHRoaXMuaXNEZWZhdWx0ID8gMSA6IDA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQ2hhcnRzU2NoZW1hKG9wdGlvbnM6IGFueSwgdHlwZT86IGFueSkge1xyXG4gICAgbGV0IG9wdGlvbiA9IG9wdGlvbnM7XHJcbiAgICBpZiAoIW9wdGlvbikge1xyXG4gICAgICBpZiAodGhpcy5jaGFydHNTY2hlbWFFZGl0b3IpIHtcclxuICAgICAgICBvcHRpb24gPSB0aGlzLmNoYXJ0c1NjaGVtYUVkaXRvci5nZXRPcHRpb24oKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY3VyclRyZWVOb2RlICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhICYmIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3RoaXMuY3VyclRyZWVOb2RlLmlkXSkge1xyXG4gICAgICBsZXQgc0lkID0gdGhpcy5jdXJyVHJlZU5vZGUuaWQ7XHJcbiAgICAgIGlmICh0eXBlID09PSAnc2F2ZV9hcycpIHtcclxuICAgICAgICBzSWQgPSAncHVibGljX3NjaGVtYSc7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jYWNoZVNjaGVtYURhdGFbdGhpcy5jdXJyVHJlZU5vZGUuaWRdKSk7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5pZCA9IHNJZDtcclxuICAgICAgfVxyXG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5jaGFydHNUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNUeXBlID0gb3B0aW9uLmNoYXJ0c1R5cGU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uY2hhcnRzRGF0YSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YSA9IG9wdGlvbi5jaGFydHNEYXRhO1xyXG4gICAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLmdyb3VwU3VtbWFyeVNldCkge1xyXG4gICAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZVsnZ3JvdXBTdW1tYXJ5U2V0J10gPSBvcHRpb24uZ3JvdXBTdW1tYXJ5U2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5jaGFydHNTdHlsZSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzU3R5bGUgPSBvcHRpb24uY2hhcnRzU3R5bGU7XHJcbiAgICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uY3VzdG9tT3B0aW9uKSB7XHJcbiAgICAgICAgICBpZiAob3B0aW9uLmN1c3RvbU9wdGlvbiA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZyh0aGlzLmxvY2FsaXplU2VydmljZS5nZXRWYWx1ZSgnaWRlQ21wLnNjaGVtYU1hbmFnZXIubWVzc2FnZS52YWxpZGF0ZS5jcm9zc3RhYlZhbHVlRGltZW5zaW9uJykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWVbJ2N1c3RvbU9wdGlvbiddID0gb3B0aW9uLmN1c3RvbU9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEuc2VyaWVzLnR5cGUgPSB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1R5cGUuc2VyaWVzLnR5cGU7XHJcbiAgICAgIGlmICh0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c0RhdGEubGVnZW5kKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNTdHlsZS5sZWdlbmQuc2hvdyA9IHRoaXMuY2FjaGVTY2hlbWFEYXRhW3NJZF0uc2NoZW1hVmFsdWUuY2hhcnRzRGF0YS5sZWdlbmQuc2hvdztcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYVZhbHVlLmNoYXJ0c1N0eWxlLmxlZ2VuZC5kYXRhID0gdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFWYWx1ZS5jaGFydHNEYXRhLmxlZ2VuZC5kYXRhO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlICE9PSAndGFiQ2hhbmdlZCcpIHtcclxuICAgICAgICB0aGlzLmNhY2hlU2NoZW1hRGF0YVtzSWRdLnNjaGVtYU5hbWUgPSB0aGlzLnNjaGVtYU5hbWU7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5zY2hlbWFUeXBlID0gdGhpcy5pc1NjaGVtYVR5cGU7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNjaGVtYURhdGFbc0lkXS5pc0RlZmF1bHQgPSB0aGlzLmlzRGVmYXVsdCA/IDEgOiAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyb3NzdGFiQ29sdW1uVmFsaWRhdGUoY29sdW1uczogYW55KSB7XHJcbiAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbFR5cGUgPT09ICdjcm9zc3RhYicpIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNvbHVtbnNbaV0uZ3JvdXBBZ2dyZSAhPT0gNCAmJiBjb2x1bW5zW2ldLnRvdGFsQWdncmUgIT09IDQpIHtcclxuICAgICAgICAgIGlmICgoY29sdW1uc1tpXS5kaW1lbnNpb24gLSAwKSA9PT0gMyAmJiAhJ2ludCxpbnRlZ2VyLGZsb2F0LGRvdWJsZSxkZWNpbWFsLG51bWJlcicuaW5jbHVkZXMoY29sdW1uc1tpXS50eXBlID8gY29sdW1uc1tpXS50eXBlLnRvTG93ZXJDYXNlKCkgOiAnJykpIHtcclxuICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZsYWc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9iamVjdENvcHkob2JqOiBhbnkpIHtcclxuICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSG92ZXIodHlwZTogYW55LCBzdGF0ZTogYW55KSB7XHJcbiAgICB0aGlzLnN2Z1NjaGVtYSA9IHN0YXRlID09PSAxO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGV4dENvbHVtblNvcnQoc2NoZW1hOiBhbnksIHBhcmFtczogYW55KSB7XHJcbiAgICBsZXQgc2NoZW1hVmFsdWU7XHJcbiAgICBpZiAoc2NoZW1hICYmIHR5cGVvZiBzY2hlbWEuc2NoZW1hVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHNjaGVtYVZhbHVlID0gSlNPTi5wYXJzZShzY2hlbWEuc2NoZW1hVmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2NoZW1hVmFsdWUgPSBzY2hlbWEuc2NoZW1hVmFsdWU7XHJcbiAgICB9XHJcbiAgICBpZiAoc2NoZW1hVmFsdWUuY29sdW1uT3B0aW9uICYmIHNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0ICYmIHNjaGVtYVZhbHVlLmNvbHVtbk9wdGlvbi5jb2xMaXN0Lmxlbmd0aCkge1xyXG4gICAgICBzY2hlbWFWYWx1ZS5jb2x1bW5PcHRpb24uY29sTGlzdC5mb3JFYWNoKChjb2w6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVjdXJzaXZlVGV4dENvbHVtblNvcnQoY29sLCBudWxsLCBwYXJhbXMpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVjdXJzaXZlVGV4dENvbHVtblNvcnQoY29sLCBjb2xMaXN0LCBwYXJhbXMpIHtcclxuICAgIGlmIChjb2xMaXN0ID09IG51bGwpIHtcclxuICAgICAgaWYgKGNvbC5jaGlsZExpc3QgJiYgY29sLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnJlY3Vyc2l2ZVRleHRDb2x1bW5Tb3J0KG51bGwsIGNvbC5jaGlsZExpc3QsIHBhcmFtcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGNvbC50eXBlICYmIGNvbC50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0JyAmJiBjb2wuc29ydCA+IDApIHtcclxuICAgICAgICAgIHBhcmFtcy5pc1RleHQucHVzaChjb2wuYmluZEZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyYW1zLmNvbEluZGV4Kys7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChjb2xMaXN0W2ldLmNoaWxkTGlzdCAmJiBjb2xMaXN0W2ldLmNoaWxkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMucmVjdXJzaXZlVGV4dENvbHVtblNvcnQobnVsbCwgY29sTGlzdFtpXS5jaGlsZExpc3QsIHBhcmFtcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChjb2xMaXN0W2ldLnR5cGUgJiYgY29sTGlzdFtpXS50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0JyAmJiBjb2xMaXN0W2ldLnNvcnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5pc1RleHQucHVzaChjb2xMaXN0W2ldLmJpbmRGaWVsZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYXJhbXMuY29sSW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19