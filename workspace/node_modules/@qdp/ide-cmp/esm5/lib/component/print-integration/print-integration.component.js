/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, Optional, Injector } from '@angular/core';
import { PrintIntegrationService } from '../../service/print-integration/print-integration.service';
import { DialogComponent } from '@farris/ui-dialog';
import { CacheService } from '@ecp-caf/caf-common';
import { of } from 'rxjs';
import { EventBus } from '@qdp/common';
import { LocalizeService } from '@qdp/localize';
import { MessagerService } from '@farris/ui-messager';
var PrintIntegrationComponent = /** @class */ (function () {
    function PrintIntegrationComponent(printIntegrationService, cache, injector) {
        var _this = this;
        this.printIntegrationService = printIntegrationService;
        this.cache = cache;
        this.injector = injector;
        // 是否嵌入式表单
        this.printIntegration = new EventEmitter();
        this.printPreview = new EventEmitter();
        this.dialogBeforeClose = new EventEmitter();
        this.printIntegrationData = {
            distributionSelectValue: 0,
            pageSizeSelectValue: 0,
            marginSelectValue: 0,
            zoomSize: 0
        };
        this.zoomSize = 100; // 缩放
        this.distributionData = [
            { name: '横向', value: 1 },
            { name: '纵向', value: 0 }
        ];
        this.pageSizeData = [
            { name: '信纸', value: 1 },
            { name: 'Tabloid', value: 3 },
            { name: '法律专用纸', value: 5 },
            { name: 'Statement', value: 6 },
            { name: 'A3', value: 8 },
            { name: 'A4', value: 9 },
            { name: 'A5', value: 11 },
            { name: 'B4 (JIS)', value: 12 },
            { name: 'B5 (JIS)', value: 13 }
        ];
        this.marginData = [
            { name: '默认', value: 0, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } },
            { name: '无', value: 1, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },
            { name: '最小值', value: 2, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },
            { name: '自定义', value: 3, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } }
        ];
        this.size = {};
        this.marginTop = 1;
        this.marginLeft = 1;
        this.marginBottom = 1;
        this.marginRight = 1;
        // 纸张尺寸
        this.marginSelectValue = 0; // 边距
        // 边距
        this.currentMarginData = this.marginData[0];
        this.isShowCustom = false;
        this.svgPrint = true;
        this.handlebeforeClose = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var self = _this;
            self.currentMarginData.margin.marginTop = _this.marginTop;
            self.currentMarginData.margin.marginLeft = _this.marginLeft;
            self.currentMarginData.margin.marginBottom = _this.marginBottom;
            self.currentMarginData.margin.marginRight = _this.marginRight;
            self.printIntegrationData = {
                distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),
                pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),
                marginSelectValue: self.currentMarginData,
                // self.findItem(self.marginData, self.marginSelectValue),
                zoomSize: self.zoomSize
            };
            if (self.printIntegrationData) {
                // tslint:disable-next-line:max-line-length
                self.saveDatas = { Id: EventBus.guid(), printintegration: JSON.stringify(self.printIntegrationData), queryid: self.queryId, schemaId: self.schemaId };
                self.printIntegrationService.savePrintIntegration(self.saveDatas, self.queryRelativeUrl)
                    .subscribe();
            }
            return of(true);
        });
        if (this.injector) {
            this.localizeService = this.injector.get(LocalizeService);
            this.msgService = this.injector.get(MessagerService);
            this.distributionData = this.localizeService.getValue('ideCmp.printOption.distributionData');
            this.pageSizeData = this.localizeService.getValue('ideCmp.printOption.pageSizeData');
            this.marginData = this.localizeService.getValue('ideCmp.printOption.marginData');
        }
    }
    /**
     * @return {?}
     */
    PrintIntegrationComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    PrintIntegrationComponent.prototype.handleDialogShow = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.queryId) {
            this.schemaId = this.cache.get('schema_schemaid' + this.queryId);
            this.printIntegrationService.getPrintIntegration(this.schemaId, this.queryId, this.queryRelativeUrl).subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (value) {
                    // this.printIntegrationData = value ? value : [];
                    _this.distributionSelectValue = value.printintegration.distributionSelectValue.value;
                    _this.pageSizeSelectValue = value.printintegration.pageSizeSelectValue.value;
                    _this.marginSelectValue = value.printintegration.marginSelectValue.value;
                    _this.currentMarginData = value.printintegration.marginSelectValue;
                    _this.marginTop = value.printintegration.marginSelectValue.margin.marginTop;
                    _this.marginLeft = value.printintegration.marginSelectValue.margin.marginLeft;
                    _this.marginBottom = value.printintegration.marginSelectValue.margin.marginBottom;
                    _this.marginRight = value.printintegration.marginSelectValue.margin.marginRight;
                    _this.zoomSize = value.printintegration.zoomSize;
                }
                else {
                    _this.distributionSelectValue = _this.distributionData[0].value;
                    _this.pageSizeSelectValue = _this.pageSizeData[5].value;
                    _this.marginSelectValue = _this.marginData[0].value;
                    _this.currentMarginData = _this.marginData[0];
                }
                _this.farrisDialog.show();
            }));
        }
        this.farrisDialog.show();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PrintIntegrationComponent.prototype.onResized = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.size.height = event.newHeight;
        this.size.width = event.newWidth;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    PrintIntegrationComponent.prototype.clickConfirm = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var self = this;
        if (!self.currentMarginData) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.margin'));
            return;
        }
        self.currentMarginData.margin.marginTop = this.marginTop;
        self.currentMarginData.margin.marginLeft = this.marginLeft;
        self.currentMarginData.margin.marginBottom = this.marginBottom;
        self.currentMarginData.margin.marginRight = this.marginRight;
        self.printIntegrationData = {
            distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),
            pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),
            marginSelectValue: self.currentMarginData,
            // self.findItem(self.marginData, self.marginSelectValue),
            zoomSize: self.zoomSize
        };
        if (!self.printIntegrationData.distributionSelectValue) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.distribution'));
            return;
        }
        if (!self.printIntegrationData.pageSizeSelectValue) {
            self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.pageSize'));
            return;
        }
        if (type === 'preview') {
            self.printPreview.emit(self.printIntegrationData);
        }
        else {
            self.printIntegration.emit(self.printIntegrationData);
        }
        self.farrisDialog.close();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    PrintIntegrationComponent.prototype.onValueChange = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.currentMarginData = this.marginData[value.value];
        if (value.value === 3) {
            this.farrisDialog.height = 350;
        }
        else {
            this.farrisDialog.height = 220;
        }
    };
    /**
     * @private
     * @param {?} list
     * @param {?} id
     * @return {?}
     */
    PrintIntegrationComponent.prototype.findItem = /**
     * @private
     * @param {?} list
     * @param {?} id
     * @return {?}
     */
    function (list, id) {
        /** @type {?} */
        var item = null;
        if (list && list.length) {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < list.length; i++) {
                if (list[i].value === id) {
                    item = list[i];
                    break;
                }
            }
        }
        return item;
    };
    /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    PrintIntegrationComponent.prototype.handleHover = /**
     * @param {?} type
     * @param {?} state
     * @return {?}
     */
    function (type, state) {
        this.svgPrint = state === 1;
    };
    PrintIntegrationComponent.decorators = [
        { type: Component, args: [{
                    selector: 'print-integration',
                    template: "<div class=\"btn-group\" fDropdown>\r\n  <button id=\"printBtn\" class=\"btn btn-secondary btn-outline-link btn-icontext f-rt-btn f-btn-ml border-0\" type=\"button\" (click)=\"handleDialogShow()\" (mouseenter)=\"handleHover(0, 0)\" (mouseleave)=\"handleHover(0, 1)\">\r\n    <span class=\"f-icon\" role=\"presentation\">\r\n      <img *ngIf=\"svgPrint\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxNnB4JyB2aWV3Qm94PScwIDAgMTggMTYnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZGVmcz48cGF0aCBkPSdNMTQuNjI1LDEzLjgyMTU1IEwxNC42MjUsMTcuMSBMMy4zNzUsMTcuMSBMMy4zNzUsMTMuODIxNTUgTDAsMTMuODIxNTUgTDAsNi43MTgwOTk5OSBDMCw2LjU3MzYgMC4wNTk0LDYuNDM0MTk5OTkgMC4xNjQ3LDYuMzMxMzUgQzAuMjY4OTQyOTk5LDYuMjI5NDQxNTEgMC40MTI0Njc5MzksNi4xNzE3ODYxOSAwLjU2MjUwMDAwNyw2LjE3MTU1MDAxIEwxNy40Mzc1LDYuMTcxNTUwMDEgQzE3LjU4NjksNi4xNzE1NTAwMSAxNy43Myw2LjIyOTM1IDE3LjgzNTMsNi4zMzEzNSBDMTcuOTQwNiw2LjQzMzM1IDE4LDYuNTcyNzQ5OTkgMTgsNi43MTgwOTk5OSBMMTgsMTMuODIxNTUgTDE0LjYyNSwxMy44MjE1NSBaIE01LjYyNSwxMS42MzUzNSBMNS42MjUsMTQuOTE0NjUgTDEyLjM3NSwxNC45MTQ2NSBMMTIuMzc1LDExLjYzNDUgTDUuNjI1LDExLjYzNDUgTDUuNjI1LDExLjYzNTM1IFogTTE1LjE4NzUsMTAuMDA5MyBDMTUuNDg1NCwxMC4wMDkzIDE1Ljc3MjUsOS44OTQ1NTAwMSAxNS45ODMxLDkuNjg5NyBDMTYuMTkzNyw5LjQ4NDg0OTk5IDE2LjMxMjUsOS4yMDY4OTk5OSAxNi4zMTI1LDguOTE2MTk5OTkgQzE2LjMxMjUsOC42MjcxOTk5OSAxNi4xOTM3LDguMzQ5MjQ5OTkgMTUuOTgzMSw4LjE0MzU0OTk5IEMxNS43NzQ1NTQ0LDcuOTM5ODE0ODIgMTUuNDg3NTQzLDcuODI0NTE5NjQgMTUuMTg3NSw3LjgyMzk1MDAxIEMxNC44ODk2LDcuODIzOTUwMDEgMTQuNjAyNSw3LjkzODcwMDAxIDE0LjM5MTksOC4xNDM1NDk5OSBDMTQuMTc5NzgwMSw4LjM1MTEyMDg2IDE0LjA2MTYyNTUsOC42Mjg1NzI0NSAxNC4wNjI0OTUyLDguOTE3MDUgQzE0LjA2MjQ5NTIsOS4yMDYwNTAwMSAxNC4xODEzLDkuNDg0ODQ5OTkgMTQuMzkxOSw5LjY4OTcgQzE0LjYwMzQsOS44OTM3IDE0Ljg4OTYsMTAuMDA5MyAxNS4xODc1LDEwLjAwOTMgTDE1LjE4NzUsMTAuMDA5MyBaJyBpZD0ncGF0aC0xJz48L3BhdGg+PC9kZWZzPjxnIGlkPSfpobXpnaItMScgc3Ryb2tlPSdub25lJyBzdHJva2Utd2lkdGg9JzEnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCc+PGcgaWQ9J+S6pOS6kuaWueahiDEt5bi46KeE5oCB5aSH5Lu9JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTYxLjAwMDAwMCwgLTE5NS4wMDAwMDApJz48ZyBpZD0n57yW57uELTE1JyB0cmFuc2Zvcm09J3RyYW5zbGF0ZSg2LjAwMDAwMCwgMTgyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTQnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDE1NS4wMDAwMDAsIDEyLjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTblpIfku70nPjxtYXNrIGlkPSdtYXNrLTInIGZpbGw9J3doaXRlJz48dXNlIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvbWFzaz48dXNlIGlkPSflvaLnirYnIGZpbGw9JyM4QTk4QkUnIHhsaW5rOmhyZWY9JyNwYXRoLTEnPjwvdXNlPjwvZz48cGF0aCBkPSdNMy44MjUsMS44IEwxNC4xNzUsMS44IEMxNC40MjM1MjgxLDEuOCAxNC42MjUsMi4wMDE0NzE4NiAxNC42MjUsMi4yNSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDE0LjYyNSw1LjA3ODQ0OTk5IEwzLjM3NSw1LjA3ODQ0OTk5IEwzLjM3NSwyLjI1IEMzLjM3NSwyLjAwMTQ3MTg2IDMuNTc2NDcxODYsMS44IDMuODI1LDEuOCBaJyBpZD0n55+p5b2iJyBmaWxsPScjN0E4OUIyJyBvcGFjaXR5PScwLjUnPjwvcGF0aD48L2c+PC9nPjwvZz48L2c+PC9zdmc+\" style=\"width: 16px; height: 16px; display: block;\" />\r\n      <img *ngIf=\"!svgPrint\" src=\"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0nMThweCcgaGVpZ2h0PScxN3B4JyB2aWV3Qm94PScwIDAgMTggMTcnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+PHRpdGxlPmRheWluMjwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGRlZnM+PHBhdGggZD0nTTE0LjYyNSwxMy44MjE1NSBMMTQuNjI1LDE3LjEgTDMuMzc1LDE3LjEgTDMuMzc1LDEzLjgyMTU1IEwwLDEzLjgyMTU1IEwwLDYuNzE4MDk5OTkgQzAsNi41NzM2IDAuMDU5NCw2LjQzNDE5OTk5IDAuMTY0Nyw2LjMzMTM1IEMwLjI2ODk0Mjk5OSw2LjIyOTQ0MTUxIDAuNDEyNDY3OTM5LDYuMTcxNzg2MTkgMC41NjI1MDAwMDcsNi4xNzE1NTAwMSBMMTcuNDM3NSw2LjE3MTU1MDAxIEMxNy41ODY5LDYuMTcxNTUwMDEgMTcuNzMsNi4yMjkzNSAxNy44MzUzLDYuMzMxMzUgQzE3Ljk0MDYsNi40MzMzNSAxOCw2LjU3Mjc0OTk5IDE4LDYuNzE4MDk5OTkgTDE4LDEzLjgyMTU1IEwxNC42MjUsMTMuODIxNTUgWiBNNS42MjUsMTEuNjM1MzUgTDUuNjI1LDE0LjkxNDY1IEwxMi4zNzUsMTQuOTE0NjUgTDEyLjM3NSwxMS42MzQ1IEw1LjYyNSwxMS42MzQ1IEw1LjYyNSwxMS42MzUzNSBaIE0xNS4xODc1LDEwLjAwOTMgQzE1LjQ4NTQsMTAuMDA5MyAxNS43NzI1LDkuODk0NTUwMDEgMTUuOTgzMSw5LjY4OTcgQzE2LjE5MzcsOS40ODQ4NDk5OSAxNi4zMTI1LDkuMjA2ODk5OTkgMTYuMzEyNSw4LjkxNjE5OTk5IEMxNi4zMTI1LDguNjI3MTk5OTkgMTYuMTkzNyw4LjM0OTI0OTk5IDE1Ljk4MzEsOC4xNDM1NDk5OSBDMTUuNzc0NTU0NCw3LjkzOTgxNDgyIDE1LjQ4NzU0Myw3LjgyNDUxOTY0IDE1LjE4NzUsNy44MjM5NTAwMSBDMTQuODg5Niw3LjgyMzk1MDAxIDE0LjYwMjUsNy45Mzg3MDAwMSAxNC4zOTE5LDguMTQzNTQ5OTkgQzE0LjE3OTc4MDEsOC4zNTExMjA4NiAxNC4wNjE2MjU1LDguNjI4NTcyNDUgMTQuMDYyNDk1Miw4LjkxNzA1IEMxNC4wNjI0OTUyLDkuMjA2MDUwMDEgMTQuMTgxMyw5LjQ4NDg0OTk5IDE0LjM5MTksOS42ODk3IEMxNC42MDM0LDkuODkzNyAxNC44ODk2LDEwLjAwOTMgMTUuMTg3NSwxMC4wMDkzIEwxNS4xODc1LDEwLjAwOTMgWicgaWQ9J3BhdGgtMSc+PC9wYXRoPjwvZGVmcz48ZyBpZD0n6aG16Z2iLTEnIHN0cm9rZT0nbm9uZScgc3Ryb2tlLXdpZHRoPScxJyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnPjxnIGlkPSflm77moIfpgInkuK3popzoibLliIflm77lpIfku70nIHRyYW5zZm9ybT0ndHJhbnNsYXRlKC0xNjEuMDAwMDAwLCAtMTk1LjAwMDAwMCknPjxnIGlkPSfnvJbnu4QtMTUnIHRyYW5zZm9ybT0ndHJhbnNsYXRlKDYuMDAwMDAwLCAxODIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNCcgdHJhbnNmb3JtPSd0cmFuc2xhdGUoMTU1LjAwMDAwMCwgMTIuMDAwMDAwKSc+PGcgaWQ9J+e8lue7hC0xNuWkh+S7vSc+PG1hc2sgaWQ9J21hc2stMicgZmlsbD0nd2hpdGUnPjx1c2UgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9tYXNrPjx1c2UgaWQ9J+W9oueKticgZmlsbD0nIzU4QTFGRScgeGxpbms6aHJlZj0nI3BhdGgtMSc+PC91c2U+PC9nPjxwYXRoIGQ9J00zLjgyNSwxLjggTDE0LjE3NSwxLjggQzE0LjQyMzUyODEsMS44IDE0LjYyNSwyLjAwMTQ3MTg2IDE0LjYyNSwyLjI1IEwxNC42MjUsNS4wNzg0NDk5OSBMMTQuNjI1LDUuMDc4NDQ5OTkgTDMuMzc1LDUuMDc4NDQ5OTkgTDMuMzc1LDIuMjUgQzMuMzc1LDIuMDAxNDcxODYgMy41NzY0NzE4NiwxLjggMy44MjUsMS44IFonIGlkPSfnn6nlvaInIGZpbGw9JyM1OEExRkUnIG9wYWNpdHk9JzAuNSc+PC9wYXRoPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=\" style=\"width: 16px; height: 16px; display: block;\" />\r\n    </span>\r\n    <!-- <span *ngIf=\"isMultiForm\" class=\"f-icon f-icon-print\" role=\"presentation\"></span> -->\r\n    <span *ngIf=\"!isMultiForm\">&nbsp;{{localizeService.getValue('ideCmp.printOption.print')}}</span>\r\n  </button>\r\n</div>\r\n<farris-dialog #farrisDialog [title]=\"localizeService.getValue('ideCmp.printOption.dailogName')\" [showButtons]=\"false\" [width]=\"450\" [height]=\"220\"\r\n  [beforeClose]=\"handlebeforeClose\" (resized)=\"onResized($event)\">\r\n  <div class=\"flex-fill farris-split-section m-1 farris-overflow-hidden\">\r\n    <div class=\"farris-form farris-card-content-bg\">\r\n      <div class=\"form-row m-0\">\r\n        <fieldSet farrisFold>\r\n          <div class=\"d-flex flex-wrap mb-2\">\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"distributionSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.layout')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"distributionSelectValue\" [(ngModel)]=\"distributionSelectValue\"\r\n                    [data]=\"distributionData\" [textField]=\"'name'\" [idField]=\"'value'\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"pageSizeSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.paperSize')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"pageSizeSelectValue\" [(ngModel)]=\"pageSizeSelectValue\" [data]=\"pageSizeData\"\r\n                    [textField]=\"'name'\" [idField]=\"'value'\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"marginSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.margin')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-combo-list id=\"marginSelectValue\" [(ngModel)]=\"marginSelectValue\" [data]=\"marginData\"\r\n                    [textField]=\"'name'\" [idField]=\"'value'\" (valueChange)=\"onValueChange($event)\"></farris-combo-list>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\" *ngIf=\"marginSelectValue==3\">\r\n                <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\" for=\"marginSelectValue\" style=\"width: 5rem; min-width: 5rem;\">\r\n                      <span class=\"farris-label-text\"></span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-4 offset-4\">\r\n                              <farris-number-spinner id=\"marginTop\" [(ngModel)]=\"marginTop\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"row p-3\">\r\n                            <div class=\"col-4\">\r\n                              <farris-number-spinner id=\"marginLeft\" [(ngModel)]=\"marginLeft\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                            <div class=\"col-4  offset-4\">\r\n                              <farris-number-spinner id=\"marginRight\" [(ngModel)]=\"marginRight\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"row\">\r\n                            <div class=\"col-4 offset-4\">\r\n                              <farris-number-spinner id=\"marginBottom\" [(ngModel)]=\"marginBottom\" [min]=\"0\"></farris-number-spinner>\r\n                            </div>\r\n                          </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12\">\r\n              <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\" for=\"zoomSize\" style=\"width: 5rem; min-width: 5rem;\">\r\n                    <span class=\"farris-label-text\">{{localizeService.getValue('ideCmp.printOption.zoom')}}:</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\">\r\n                    <farris-number-spinner id=\"zoomSize\" [(ngModel)]=\"zoomSize\" [min]=\"1\"></farris-number-spinner>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-12 col-lg-12 text-right\">\r\n              <button type=\"button\" class=\"btn btn-primary mr-2\" (click)=\"clickConfirm('print')\">{{localizeService.getValue('ideCmp.printOption.pdfDownload')}}</button>\r\n              <button type=\"button\" class=\"btn btn-primary\" (click)=\"clickConfirm('preview')\">{{localizeService.getValue('ideCmp.printOption.printPreview')}}</button>\r\n            </div>\r\n          </div>\r\n        </fieldSet>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    PrintIntegrationComponent.ctorParameters = function () { return [
        { type: PrintIntegrationService },
        { type: CacheService },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    PrintIntegrationComponent.propDecorators = {
        queryId: [{ type: Input }],
        controlType: [{ type: Input }],
        isMultiForm: [{ type: Input }],
        printIntegration: [{ type: Output }],
        printPreview: [{ type: Output }],
        queryRelativeUrl: [{ type: Input }],
        dialogBeforeClose: [{ type: Output }],
        farrisDialog: [{ type: ViewChild, args: ['farrisDialog',] }]
    };
    return PrintIntegrationComponent;
}());
export { PrintIntegrationComponent };
if (false) {
    /** @type {?} */
    PrintIntegrationComponent.prototype.queryId;
    /** @type {?} */
    PrintIntegrationComponent.prototype.schemaId;
    /** @type {?} */
    PrintIntegrationComponent.prototype.controlType;
    /** @type {?} */
    PrintIntegrationComponent.prototype.isMultiForm;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printIntegration;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printPreview;
    /** @type {?} */
    PrintIntegrationComponent.prototype.queryRelativeUrl;
    /** @type {?} */
    PrintIntegrationComponent.prototype.dialogBeforeClose;
    /** @type {?} */
    PrintIntegrationComponent.prototype.farrisDialog;
    /** @type {?} */
    PrintIntegrationComponent.prototype.printIntegrationData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.zoomSize;
    /** @type {?} */
    PrintIntegrationComponent.prototype.saveDatas;
    /** @type {?} */
    PrintIntegrationComponent.prototype.distributionData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.pageSizeData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.size;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginTop;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginLeft;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginBottom;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginRight;
    /** @type {?} */
    PrintIntegrationComponent.prototype.distributionSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.pageSizeSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.marginSelectValue;
    /** @type {?} */
    PrintIntegrationComponent.prototype.currentMarginData;
    /** @type {?} */
    PrintIntegrationComponent.prototype.isShowCustom;
    /** @type {?} */
    PrintIntegrationComponent.prototype.localizeService;
    /** @type {?} */
    PrintIntegrationComponent.prototype.msgService;
    /** @type {?} */
    PrintIntegrationComponent.prototype.svgPrint;
    /** @type {?} */
    PrintIntegrationComponent.prototype.handlebeforeClose;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.printIntegrationService;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.cache;
    /**
     * @type {?}
     * @private
     */
    PrintIntegrationComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQtaW50ZWdyYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHFkcC9pZGUtY21wLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9wcmludC1pbnRlZ3JhdGlvbi9wcmludC1pbnRlZ3JhdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUcsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sMkRBQTJELENBQUM7QUFDcEcsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDdkMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQ7SUEyREUsbUNBQW9CLHVCQUFnRCxFQUFVLEtBQW1CLEVBQXNCLFFBQWtCO1FBQXpJLGlCQVFDO1FBUm1CLDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBeUI7UUFBVSxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQXNCLGFBQVEsR0FBUixRQUFRLENBQVU7O1FBakQvSCxxQkFBZ0IsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzNDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUV2QyxzQkFBaUIsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRXRELHlCQUFvQixHQUFRO1lBQzFCLHVCQUF1QixFQUFFLENBQUM7WUFDMUIsbUJBQW1C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QzVDLGlEQUFxQjs7SUFDckIsb0RBQWlDOztJQUNqQywrQ0FBNEI7O0lBQzVCLDZDQUFnQjs7SUErQ2hCLHNEQW1CQzs7Ozs7SUFoRVcsNERBQXdEOzs7OztJQUFFLDBDQUEyQjs7Ozs7SUFBRSw2Q0FBc0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIE9wdGlvbmFsLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQcmludEludGVncmF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvcHJpbnQtaW50ZWdyYXRpb24vcHJpbnQtaW50ZWdyYXRpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQHFkcC9jb21tb24nO1xyXG5pbXBvcnQgeyBMb2NhbGl6ZVNlcnZpY2UgfSBmcm9tICdAcWRwL2xvY2FsaXplJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3ByaW50LWludGVncmF0aW9uJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcHJpbnQtaW50ZWdyYXRpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3ByaW50LWludGVncmF0aW9uLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUHJpbnRJbnRlZ3JhdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQElucHV0KCkgcXVlcnlJZDogYW55O1xyXG4gIHNjaGVtYUlkOiBhbnk7XHJcbiAgQElucHV0KCkgY29udHJvbFR5cGU6IHN0cmluZztcclxuICBASW5wdXQoKSBpc011bHRpRm9ybTogYW55OyAvLyDmmK/lkKbltYzlhaXlvI/ooajljZVcclxuICBAT3V0cHV0KCkgcHJpbnRJbnRlZ3JhdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBwcmludFByZXZpZXcgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBASW5wdXQoKSBxdWVyeVJlbGF0aXZlVXJsOiBhbnk7XHJcbiAgQE91dHB1dCgpIGRpYWxvZ0JlZm9yZUNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQFZpZXdDaGlsZCgnZmFycmlzRGlhbG9nJykgZmFycmlzRGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XHJcbiAgcHJpbnRJbnRlZ3JhdGlvbkRhdGE6IGFueSA9IHtcclxuICAgIGRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlOiAwLFxyXG4gICAgcGFnZVNpemVTZWxlY3RWYWx1ZTogMCxcclxuICAgIG1hcmdpblNlbGVjdFZhbHVlOiAwLFxyXG4gICAgem9vbVNpemU6IDBcclxuICB9O1xyXG4gIHpvb21TaXplOiBhbnkgPSAxMDA7IC8vIOe8qeaUvlxyXG4gIHNhdmVEYXRhczogYW55O1xyXG5cclxuICBkaXN0cmlidXRpb25EYXRhOiBhbnkgPSBbXHJcbiAgICB7IG5hbWU6ICfmqKrlkJEnLCB2YWx1ZTogMSB9LFxyXG4gICAgeyBuYW1lOiAn57q15ZCRJywgdmFsdWU6IDAgfVxyXG4gIF07XHJcbiAgcGFnZVNpemVEYXRhOiBhbnkgPSBbXHJcbiAgICB7IG5hbWU6ICfkv6HnurgnLCB2YWx1ZTogMSB9LFxyXG4gICAgeyBuYW1lOiAnVGFibG9pZCcsIHZhbHVlOiAzIH0sXHJcbiAgICB7IG5hbWU6ICfms5XlvovkuJPnlKjnurgnLCB2YWx1ZTogNSB9LFxyXG4gICAgeyBuYW1lOiAnU3RhdGVtZW50JywgdmFsdWU6IDYgfSxcclxuICAgIHsgbmFtZTogJ0EzJywgdmFsdWU6IDggfSxcclxuICAgIHsgbmFtZTogJ0E0JywgdmFsdWU6IDkgfSxcclxuICAgIHsgbmFtZTogJ0E1JywgdmFsdWU6IDExIH0sXHJcbiAgICB7IG5hbWU6ICdCNCAoSklTKScsIHZhbHVlOiAxMiB9LFxyXG4gICAgeyBuYW1lOiAnQjUgKEpJUyknLCB2YWx1ZTogMTMgfVxyXG4gIF07XHJcbiAgbWFyZ2luRGF0YTogYW55ID0gW1xyXG4gICAgeyBuYW1lOiAn6buY6K6kJywgdmFsdWU6IDAsIG1hcmdpbjogeyBtYXJnaW5Ub3A6IDEsIG1hcmdpbkxlZnQ6IDEsIG1hcmdpbkJvdHRvbTogMSwgbWFyZ2luUmlnaHQ6IDEgfSB9LFxyXG4gICAgeyBuYW1lOiAn5pegJywgdmFsdWU6IDEsIG1hcmdpbjogeyBtYXJnaW5Ub3A6IDAsIG1hcmdpbkxlZnQ6IDAsIG1hcmdpbkJvdHRvbTogMCwgbWFyZ2luUmlnaHQ6IDAgfSB9LFxyXG4gICAgeyBuYW1lOiAn5pyA5bCP5YC8JywgdmFsdWU6IDIsIG1hcmdpbjogeyBtYXJnaW5Ub3A6IDAsIG1hcmdpbkxlZnQ6IDAsIG1hcmdpbkJvdHRvbTogMCwgbWFyZ2luUmlnaHQ6IDAgfSB9LFxyXG4gICAgeyBuYW1lOiAn6Ieq5a6a5LmJJywgdmFsdWU6IDMsIG1hcmdpbjogeyBtYXJnaW5Ub3A6IDEsIG1hcmdpbkxlZnQ6IDEsIG1hcmdpbkJvdHRvbTogMSwgbWFyZ2luUmlnaHQ6IDEgfSB9XHJcbiAgXTtcclxuICBzaXplOiBhbnkgPSB7fTtcclxuICBtYXJnaW5Ub3AgPSAxO1xyXG4gIG1hcmdpbkxlZnQgPSAxO1xyXG4gIG1hcmdpbkJvdHRvbSA9IDE7XHJcbiAgbWFyZ2luUmlnaHQgPSAxO1xyXG4gIGRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlOiBhbnk7IC8vIOW4g+WxgFxyXG4gIHBhZ2VTaXplU2VsZWN0VmFsdWU6IGFueTsgLy8g57q45byg5bC65a+4XHJcbiAgbWFyZ2luU2VsZWN0VmFsdWU6IGFueSA9IDA7IC8vIOi+uei3nVxyXG4gIGN1cnJlbnRNYXJnaW5EYXRhOiBhbnkgPSB0aGlzLm1hcmdpbkRhdGFbMF07XHJcbiAgaXNTaG93Q3VzdG9tID0gZmFsc2U7XHJcbiAgbG9jYWxpemVTZXJ2aWNlOiBMb2NhbGl6ZVNlcnZpY2U7XHJcbiAgbXNnU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlO1xyXG4gIHN2Z1ByaW50ID0gdHJ1ZTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwcmludEludGVncmF0aW9uU2VydmljZTogUHJpbnRJbnRlZ3JhdGlvblNlcnZpY2UsIHByaXZhdGUgY2FjaGU6IENhY2hlU2VydmljZSwgQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcclxuICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgIHRoaXMubG9jYWxpemVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxpemVTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5tc2dTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgICAgdGhpcy5kaXN0cmlidXRpb25EYXRhID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5wcmludE9wdGlvbi5kaXN0cmlidXRpb25EYXRhJyk7XHJcbiAgICAgIHRoaXMucGFnZVNpemVEYXRhID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5wcmludE9wdGlvbi5wYWdlU2l6ZURhdGEnKTtcclxuICAgICAgdGhpcy5tYXJnaW5EYXRhID0gdGhpcy5sb2NhbGl6ZVNlcnZpY2UuZ2V0VmFsdWUoJ2lkZUNtcC5wcmludE9wdGlvbi5tYXJnaW5EYXRhJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIGhhbmRsZURpYWxvZ1Nob3coKSB7XHJcbiAgICBpZiAodGhpcy5xdWVyeUlkKSB7XHJcbiAgICAgIHRoaXMuc2NoZW1hSWQgPSB0aGlzLmNhY2hlLmdldCgnc2NoZW1hX3NjaGVtYWlkJyArIHRoaXMucXVlcnlJZCk7XHJcbiAgICAgIHRoaXMucHJpbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UHJpbnRJbnRlZ3JhdGlvbih0aGlzLnNjaGVtYUlkLCB0aGlzLnF1ZXJ5SWQsIHRoaXMucXVlcnlSZWxhdGl2ZVVybCkuc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIC8vIHRoaXMucHJpbnRJbnRlZ3JhdGlvbkRhdGEgPSB2YWx1ZSA/IHZhbHVlIDogW107XHJcbiAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlID0gdmFsdWUucHJpbnRpbnRlZ3JhdGlvbi5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZS52YWx1ZTtcclxuICAgICAgICAgIHRoaXMucGFnZVNpemVTZWxlY3RWYWx1ZSA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24ucGFnZVNpemVTZWxlY3RWYWx1ZS52YWx1ZTtcclxuICAgICAgICAgIHRoaXMubWFyZ2luU2VsZWN0VmFsdWUgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50TWFyZ2luRGF0YSA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24ubWFyZ2luU2VsZWN0VmFsdWU7XHJcbiAgICAgICAgICB0aGlzLm1hcmdpblRvcCA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24ubWFyZ2luU2VsZWN0VmFsdWUubWFyZ2luLm1hcmdpblRvcDtcclxuICAgICAgICAgIHRoaXMubWFyZ2luTGVmdCA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24ubWFyZ2luU2VsZWN0VmFsdWUubWFyZ2luLm1hcmdpbkxlZnQ7XHJcbiAgICAgICAgICB0aGlzLm1hcmdpbkJvdHRvbSA9IHZhbHVlLnByaW50aW50ZWdyYXRpb24ubWFyZ2luU2VsZWN0VmFsdWUubWFyZ2luLm1hcmdpbkJvdHRvbTtcclxuICAgICAgICAgIHRoaXMubWFyZ2luUmlnaHQgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLm1hcmdpblNlbGVjdFZhbHVlLm1hcmdpbi5tYXJnaW5SaWdodDtcclxuICAgICAgICAgIHRoaXMuem9vbVNpemUgPSB2YWx1ZS5wcmludGludGVncmF0aW9uLnpvb21TaXplO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlID0gdGhpcy5kaXN0cmlidXRpb25EYXRhWzBdLnZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5wYWdlU2l6ZVNlbGVjdFZhbHVlID0gdGhpcy5wYWdlU2l6ZURhdGFbNV0udmFsdWU7XHJcbiAgICAgICAgICB0aGlzLm1hcmdpblNlbGVjdFZhbHVlID0gdGhpcy5tYXJnaW5EYXRhWzBdLnZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50TWFyZ2luRGF0YSA9IHRoaXMubWFyZ2luRGF0YVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mYXJyaXNEaWFsb2cuc2hvdygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuZmFycmlzRGlhbG9nLnNob3coKTtcclxuICB9XHJcblxyXG4gIG9uUmVzaXplZChldmVudDogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLnNpemUuaGVpZ2h0ID0gZXZlbnQubmV3SGVpZ2h0O1xyXG4gICAgdGhpcy5zaXplLndpZHRoID0gZXZlbnQubmV3V2lkdGg7XHJcbiAgfVxyXG5cclxuICBoYW5kbGViZWZvcmVDbG9zZSA9ICgpOiBPYnNlcnZhYmxlPGFueT4gPT4ge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5Ub3AgPSB0aGlzLm1hcmdpblRvcDtcclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpbkxlZnQgPSB0aGlzLm1hcmdpbkxlZnQ7XHJcbiAgICBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLm1hcmdpbi5tYXJnaW5Cb3R0b20gPSB0aGlzLm1hcmdpbkJvdHRvbTtcclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpblJpZ2h0ID0gdGhpcy5tYXJnaW5SaWdodDtcclxuICAgIHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEgPSB7XHJcbiAgICAgIGRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlOiBzZWxmLmZpbmRJdGVtKHNlbGYuZGlzdHJpYnV0aW9uRGF0YSwgc2VsZi5kaXN0cmlidXRpb25TZWxlY3RWYWx1ZSksXHJcbiAgICAgIHBhZ2VTaXplU2VsZWN0VmFsdWU6IHNlbGYuZmluZEl0ZW0oc2VsZi5wYWdlU2l6ZURhdGEsIHNlbGYucGFnZVNpemVTZWxlY3RWYWx1ZSksXHJcbiAgICAgIG1hcmdpblNlbGVjdFZhbHVlOiBzZWxmLmN1cnJlbnRNYXJnaW5EYXRhLCAvLyBzZWxmLmZpbmRJdGVtKHNlbGYubWFyZ2luRGF0YSwgc2VsZi5tYXJnaW5TZWxlY3RWYWx1ZSksXHJcbiAgICAgIHpvb21TaXplOiBzZWxmLnpvb21TaXplXHJcbiAgICB9O1xyXG4gICAgaWYgKHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEpIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxyXG4gICAgICBzZWxmLnNhdmVEYXRhcyA9IHsgSWQ6IEV2ZW50QnVzLmd1aWQoKSwgcHJpbnRpbnRlZ3JhdGlvbjogSlNPTi5zdHJpbmdpZnkoc2VsZi5wcmludEludGVncmF0aW9uRGF0YSksIHF1ZXJ5aWQ6IHNlbGYucXVlcnlJZCwgc2NoZW1hSWQ6IHNlbGYuc2NoZW1hSWQgfTtcclxuICAgICAgc2VsZi5wcmludEludGVncmF0aW9uU2VydmljZS5zYXZlUHJpbnRJbnRlZ3JhdGlvbihzZWxmLnNhdmVEYXRhcywgc2VsZi5xdWVyeVJlbGF0aXZlVXJsKVxyXG4gICAgICAgIC5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIGNsaWNrQ29uZmlybSh0eXBlOiBhbnkpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKCFzZWxmLmN1cnJlbnRNYXJnaW5EYXRhKSB7XHJcbiAgICAgIHNlbGYubXNnU2VydmljZS53YXJuaW5nKHNlbGYubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24ubWVzc2FnZS52YWxpZGF0ZS5tYXJnaW4nKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpblRvcCA9IHRoaXMubWFyZ2luVG9wO1xyXG4gICAgc2VsZi5jdXJyZW50TWFyZ2luRGF0YS5tYXJnaW4ubWFyZ2luTGVmdCA9IHRoaXMubWFyZ2luTGVmdDtcclxuICAgIHNlbGYuY3VycmVudE1hcmdpbkRhdGEubWFyZ2luLm1hcmdpbkJvdHRvbSA9IHRoaXMubWFyZ2luQm90dG9tO1xyXG4gICAgc2VsZi5jdXJyZW50TWFyZ2luRGF0YS5tYXJnaW4ubWFyZ2luUmlnaHQgPSB0aGlzLm1hcmdpblJpZ2h0O1xyXG4gICAgc2VsZi5wcmludEludGVncmF0aW9uRGF0YSA9IHtcclxuICAgICAgZGlzdHJpYnV0aW9uU2VsZWN0VmFsdWU6IHNlbGYuZmluZEl0ZW0oc2VsZi5kaXN0cmlidXRpb25EYXRhLCBzZWxmLmRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlKSxcclxuICAgICAgcGFnZVNpemVTZWxlY3RWYWx1ZTogc2VsZi5maW5kSXRlbShzZWxmLnBhZ2VTaXplRGF0YSwgc2VsZi5wYWdlU2l6ZVNlbGVjdFZhbHVlKSxcclxuICAgICAgbWFyZ2luU2VsZWN0VmFsdWU6IHNlbGYuY3VycmVudE1hcmdpbkRhdGEsIC8vIHNlbGYuZmluZEl0ZW0oc2VsZi5tYXJnaW5EYXRhLCBzZWxmLm1hcmdpblNlbGVjdFZhbHVlKSxcclxuICAgICAgem9vbVNpemU6IHNlbGYuem9vbVNpemVcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFzZWxmLnByaW50SW50ZWdyYXRpb25EYXRhLmRpc3RyaWJ1dGlvblNlbGVjdFZhbHVlKSB7XHJcbiAgICAgIHNlbGYubXNnU2VydmljZS53YXJuaW5nKHNlbGYubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24ubWVzc2FnZS52YWxpZGF0ZS5kaXN0cmlidXRpb24nKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghc2VsZi5wcmludEludGVncmF0aW9uRGF0YS5wYWdlU2l6ZVNlbGVjdFZhbHVlKSB7XHJcbiAgICAgIHNlbGYubXNnU2VydmljZS53YXJuaW5nKHNlbGYubG9jYWxpemVTZXJ2aWNlLmdldFZhbHVlKCdpZGVDbXAucHJpbnRPcHRpb24ubWVzc2FnZS52YWxpZGF0ZS5wYWdlU2l6ZScpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGUgPT09ICdwcmV2aWV3Jykge1xyXG4gICAgICBzZWxmLnByaW50UHJldmlldy5lbWl0KHNlbGYucHJpbnRJbnRlZ3JhdGlvbkRhdGEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5wcmludEludGVncmF0aW9uLmVtaXQoc2VsZi5wcmludEludGVncmF0aW9uRGF0YSk7XHJcbiAgICB9XHJcbiAgICBzZWxmLmZhcnJpc0RpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uVmFsdWVDaGFuZ2UodmFsdWUpIHtcclxuICAgIHRoaXMuY3VycmVudE1hcmdpbkRhdGEgPSB0aGlzLm1hcmdpbkRhdGFbdmFsdWUudmFsdWVdO1xyXG4gICAgaWYgKHZhbHVlLnZhbHVlID09PSAzKSB7XHJcbiAgICAgIHRoaXMuZmFycmlzRGlhbG9nLmhlaWdodCA9IDM1MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmFycmlzRGlhbG9nLmhlaWdodCA9IDIyMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZmluZEl0ZW0obGlzdDogYW55LCBpZDogYW55KSB7XHJcbiAgICBsZXQgaXRlbSA9IG51bGw7XHJcbiAgICBpZiAobGlzdCAmJiBsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAobGlzdFtpXS52YWx1ZSA9PT0gaWQpIHtcclxuICAgICAgICAgIGl0ZW0gPSBsaXN0W2ldO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXRlbTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUhvdmVyKHR5cGU6IGFueSwgc3RhdGU6IGFueSkge1xyXG4gICAgdGhpcy5zdmdQcmludCA9IHN0YXRlID09PSAxO1xyXG4gIH1cclxufVxyXG4iXX0=