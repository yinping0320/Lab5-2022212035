{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@qdp/ide-cmp/lib/service/joint-search/joint-search.service.ts","ng://@qdp/ide-cmp/lib/component/joint-search/joint-search.component.ts","ng://@qdp/ide-cmp/lib/service/paras-mapping/paras-mapping.service.ts","ng://@qdp/ide-cmp/lib/component/paras-mapping/paras-mapping.component.ts","ng://@qdp/ide-cmp/lib/component/paras-mapping/popup.anchor-target.directive.ts","ng://@qdp/ide-cmp/lib/component/charts-schema-editor/charts-type/charts-type.component.ts","ng://@qdp/ide-cmp/lib/component/charts-schema-editor/charts-data/charts-data.component.ts","ng://@qdp/ide-cmp/lib/component/charts-schema-editor/charts-style/charts-style.component.ts","ng://@qdp/ide-cmp/lib/component/charts-schema-editor/charts-schema-editor.component.ts","ng://@qdp/ide-cmp/lib/service/schema/schema.service.ts","ng://@qdp/ide-cmp/lib/component/schema-editor/title-editor/title-editor.component.ts","ng://@qdp/ide-cmp/lib/component/schema-editor/column-editor/column-editor.component.ts","ng://@qdp/ide-cmp/lib/component/schema-editor/style-editor/style-editor.component.ts","ng://@qdp/ide-cmp/lib/component/schema-editor/other-editor/other-editor.component.ts","ng://@qdp/ide-cmp/lib/component/schema-editor/schema-editor.component.ts","ng://@qdp/ide-cmp/lib/component/schema-manager/schema-manager.component.ts","ng://@qdp/ide-cmp/lib/service/print-integration/print-integration.service.ts","ng://@qdp/ide-cmp/lib/component/print-integration/print-integration.component.ts","ng://@qdp/ide-cmp/lib/directive/resized/resized.directive.ts","ng://@qdp/ide-cmp/lib/ide-cmp.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","JointSearchService","jointSearchManager","lcpService","_this","jointSearchInfo","Subject","jointsearchInfoChange","subscribe","getjointsearch","id","queryId","queryRelativeUrl","savejointsearch","deletejointsearch","formid","queryID","getLanguageList","getCol","params","Injectable","JointSearchManagerService","LcpService","JointSearchComponent","renderer","resolver","jointSearchService","injector","closeModal","EventEmitter","submitModal","editorParams","formId","modalConfig","title","width","height","showButtons","functionSubDatas","functionParaDatas","size","paraColumns","SubColumns","displaystyle","name","QueryInfoDatas","languages","_currentConditionInput","functionParaDatasOfSub","handlebeforeClose","dg","endRowEdit","dg1","of","localizeService","get","LocalizeService","language","expressionService","ExpressionService","getValue","ngOnDestroy","ngOnInit","dropDownInitForIDE","gridInit","ngOnChanges","changes","changeName","newValue","currentValue","self","sessionId","qoManagerCode","domJson","viewModelFields","getViewModelFields","data","forEach","code","toLowerCase","description","JSON","parse","joinSearch","jointparam","jointserachdisplaystyle","showColumn","dynamicCols","enumOpts","valueField","textField","field","template","functioncodeTemp","functionNameTemp","formatter","type","options","editor","EditorTypes","COMBOLIST","idField","selectChange","bind","visible","TEXTBOX","INPUTGROUP","groupText","clickHandle","inputCondExp","CHECKBOX","trueText","falseText","$event","hideColumn","selectedRow","index","findIndex","component","module","components","find","x","componentType","recursiveGetViewModelFields","contents","_c","tslib_1.__values","_d","ParamCode","_e","_f","onResized","event","newHeight","newWidth","clickCancel","emit","clickConfirm","Id","EventBus","guid","joinsearch","stringify","queryid","FormId","selectedIndex","handleDialogShow","farrisDialog","show","addSubHandler","queryParaID","searchtype","functioncode","functionname","appEntrance","jointsearchid","linkfield","visibleformula","doubleclikjoinsearch","destinationqueryId","refresh","removeSubHandler","id_1","splice","functionid","_a","cancelSubHandler","getFunctionName","local","gsp","cache","gspframeworkService","rtf","getLanguageCode","openFunc","appHelp","showHelp","openApp","rtfappHelp","selectedFunc","zh-chs","Name","staticParam","InvokingConfig","staticParams","staticParam_1","staticParam_1_1","staticPara","selectedApp","selectedInvok","appId","staticParam_2","staticParam_2_1","filter","cancelEditedPara","id_2","index_1","_b","addContext","key","element","bindField","addExpressionText","buildExpression","then","expressStr","formControl","setValue","addParaHandler","para","paraname","paravalue","paravaluetype","removeParaHandler","Component","args","selector","encapsulation","ViewEncapsulation","None","Renderer2","ComponentFactoryResolver","Injector","decorators","Optional","Output","Input","ViewChild","ParasMappingService","parasMappingManager","paramMappingInfo","parasmappingInfoChange","getParasMapping","saveParasMapping","deleteParasMapping","datasourceID","ParasMappingManagerService","ParasMappingComponent","parasMappingService","msgService","colName","mappingTypeData","saveDatas","currentmode","columns","total","editMode","pageSize","pageIndex","updateParasMapping","queryparaData","sourceparaData","datasourceid","parasmapping","enumOpts1","enumOpts2","validators","messager","dg2","addFilterRow","parameter","sourceParameter","mappingType","constant","expression","paraisused","addFilterRowForIde","deleteFilterRow","info","deleteFilterRowForIde","cancelEdit","cancelEditForIde","MessagerService","PopupAnchorDirective","Directive","exportAs","ElementRef","ChartsTypeComponent","chartsType","series","chartsTypeData","chartsTypeSelectValue","chartTypeChange","schemaValue","str","c","valueChange","getChartsTypeOption","indexOf","areaStyle","ChartsDataComponent","live1","live2","live3","live","axisTypeData","xAxisTypeSelectValue","yAxisTypeSelectValue","xAxisDisableItemIndex","yAxisDisableItemIndex","xPositionData","xPositionValue","yPositionData","yPositionValue","bindingData","barTypeData","barTypeSelectValue","dimensionFieldList","indicatorFieldList","xAxisBindingFeildList","yAxisBindingFeildList","firstBindingFeildList","secondBindingFeildList","thirdBindingFeildList","fourthBindingFeildList","fifthBindingFeildList","aggreData","aggreSelectValue","groupSummarySet","dimensions","indicators","chartsData","xAxis","yAxis","position","encode","y","value1","lng","lat","value2","barValueChange","xItemDisabled","itemArgs","yItemDisabled","handleBinding","dimensionField","indicatorField","xAxisFeild","yAxisFeild","firstFeild","secondFeild","thirdFeild","fourthFeild","fifthFeild","handleRemoveFeild","feild","getChartsDataOption","option","axisLine","tooltip","padding","backgroundColor","borderColor","borderWidth","legend","j","colList","itemGap","itemWidth","itemHeight","align","orient","roam","map","itemStyle","emphasis","label","textFixed","Alaska","toolbox","left","top","feature","dataView","readOnly","restore","saveAsImage","visualMap","min","max","inRange","color","text","calculable","geo","center","zoom","normal","areaColor","coordinateSystem","dimension","outOfRange","controller","textStyle","right","textGap","symbolSize","getGroupSummarySetOption","myIsNaN","isNaN","ChartsStyleComponent","xAxisAlignData","xAxisAlignValue","yAxisAlignData","yAxisAlignValue","fontFamilyData","fontFamily","fontSizeData","fontSize","lineHeight","fontStyle","fontWight","legendAlignData","legendAlignValue","orientData","legendOrientValue","visualMapOrientValue","visualMapTypeData","visualMapTypeValue","dataMultiple","dataMultipleValue","vmTopValue","vmLeftValue","vmBottom","vmRight","visualMapPieces","visualMapCategories","isWeight","isStyle","cBtn","pBtn","tBtn","customOption","chartsStyle","bottom","pieces","vmMin","vmMax","categories","handleWeight","fontWeight","handleStyle","vmCategories","vmPiecesMin","vmPiecesMax","handleAddBtnDisabled","handleRemove","getChartsStyleOption","getCustomOption","ChartsSchemaEditorComponent","cls","tabsSelectChange","handleTabSelect","getOption","chartsTypeCmp","chartsDataCmp","chartsStyleCmp","HostBinding","FarrisTabsComponent","SchemaService","schemaManager","schemaInfo","pageInfoChange","operationChange","schemaInfoChange","getSchemaList","userId","organizationId","groupType","getSchemaListByGroupType","getSchema","saveSchema","schema","deleteSchema","getSpreadTemplate","sheme","frozenCols","getData","param","getOperation","SchemaManagerService","TitleEditorComponent","columnSizeData","subTitleType","subTitleAlign","newSubTitle","level","alignData","currentSubTitle","subscriptions","variablesChange","replace","substring","titleOption","subTitles","unsubscribe","insertSubTitle","_newSubTitle","removeSubTitle","onAddSubTitle","selected","isSelected","getTitleOption","ColumnEditorComponent","colWidth","colVisible","colFixed","colWrap","colAutoFit","schemaTreeData","colListData","alignSelectValue","formatTypeData","formatTypeSelectValue","formatText","sortData","sortSelectValue","pageSelectValue","pageText","colIsGroup","colIsRed","groupSelectValue","groupSubSelectValue","totalSelectValue","totalText","formatField","dimensionData","enumType","dataShowOption","dimensionSelectValue","showTypeSelectValue","newNodeData","isFixed","wordWrap","autoFit","formatType","formattor","sort","pageAggre","pageAggreText","isGroup","groupAggre","groupSubAggre","groupAggreText","totalAggre","totalAggreText","rowColor","showType","expanded","children","cols","colIsGroupId","colVisibleId","colFixedId","colWrapId","colAutoFitId","colIsRedId","formInline","colInfoChanged","editable","isOrNotPaging","localId","LOCALE_ID","DEFAULT_LANGUAGE","nameCell","bindFieldCell","colWidthCell","colAlignCell","visibleCell","isFixedCell","autoFixCell","currSchema","eventId","RtfServices","getTabId","register","handlePagingModeChanged","otherOption","loadDataType","columnOption","objectCopy","initColListData","col","childList","recursiveInitTreeData","schemaTree","updateSerializedValue","currTreeNode","currTreeNodeId","initColInfo","setTimeout","selectNode","colSelectValue","ngAfterViewInit","handleAddTreeNode","node","handleRemoveTreeNode","parent","undefined","handleTreeNodeSelected","el","handleTreeNodeUnSelected","findTreeNodeById","updateColInfo","handleNodeUpAndDown","recursiveNodeUpAndDown","handleNodeLeft","self_1","childIndex","recursiveNodeLeft","handleNodeRight","self_2","recursiveNodeRight","handleIsGroupClick","handleVisible","self_3","isRed","handleWrap","recursiveInitColListData","item","resize","getColumnOption","recursiveGetTreeNodes","onValueChange","handleInfoChanged","handleNgModelChange","treeNode","getComboboxName","result","getAlignName","findEditable","obj","copyNode","pagingMode","StyleEditorComponent","rowHeight","fontColor","isUnderLine","fontUnderLine","titleActive","subTitleActive","headerActive","dataAreaActive","footerActive","styleOption","initStyleOption","handleTitleBtn","updateStyleOption","handleSubTitleBtn","handleHeaderBtn","handleDataAreaBtn","handleFooterBtn","handleUnderLine","getStyleOption","textDecoration","getFontFamily","OtherEditorComponent","isCache","firstLoadId","dataCache","firstLoad","pageTypeData","rangeData","pageTypeSelectValue","pageSizeData","rowGroup","colGroup","colSum","rowSum","rangeSelectValue","rangeValue","delay","interval","treeInfoData","treeInfoSelectValue","showZero","expand","showHeaderSort","showFilterRow","mergeCell","isRowGroup","isColGroup","isRowSum","isColSum","isExpand","isShowZero","filterRowId","showHeaderSortId","mergeCellId","selectType","treeInfoType","pathField","pathStep","parentField","getOtherOption","handlePagingChanged","dispatch","SchemaEditorComponent","nextId","SchemaManagerComponent","schemaService","notifyService","schemaSelected","saveAsSchema","removeSchema","saveAndCloseSchema","dialogBeforeClose","defaultExpand","inputCollapse","inputExpand","isShow","personSchema","orgSchema","publicSchema","defaultSchema","isDefault","isPrefab","schemaName","schemaType","schemaDropDownData","isSchemaType","chartsOption","cacheSchemaData","operations","svgSchema","schemaId","isDefaultSchema","formErrorService","FormErrorService","CacheService","tabId","initSelectedSchemaId","selectedSchemaId","colListChange","schemaManagerInitForIDE","controlType","initColumns","currTreeNodeChanged","controlInit","preSchema","schemaList","keys","validateSchemaId","treeNodeSelected","schemaInfoAll","schemaEditor","tabs","selectTab","schemaData","chartsSchemaEditor","handleDropDownItemClick","handleTabsSelectChange","farrisPanelComponent","modelValue","updateModel","updateCurrSchema","handleSchemaTypeSelect","clearSelections","handleSaveAsClick","warning","crosstabColumnValidate","textSortColumn","isText","getTextColumnSort","orgId","msg","timeout","exception","Message","handleRemoveClick","isProtected","handleSaveClick","handleSaveAndCloseClick","close","updateListSchema","updateChartsSchema","sId","flag","includes","handleHover","state","recursiveTextColumnSort","colIndex","NotifyService","FarrisPanelComponent","PrintIntegrationService","printIntegrationManager","printIntegrationInfo","printIntegrationInfoChange","getPrintIntegration","savePrintIntegration","deletPrintIntegration","deletePrintIntegration","PrintIntegrationManagerService","PrintIntegrationComponent","printIntegrationService","printIntegration","printPreview","printIntegrationData","distributionSelectValue","pageSizeSelectValue","marginSelectValue","zoomSize","distributionData","marginData","margin","marginTop","marginLeft","marginBottom","marginRight","currentMarginData","isShowCustom","svgPrint","findItem","printintegration","list","ResizedEvent","oldWidth","oldHeight","ResizedDirective","resized","ResizeSensor","nativeElement","clientWidth","clientHeight","IdeCmpModule","NgModule","declarations","imports","CommonModule","FormsModule","ReactiveFormsModule","ComboListModule","InputGroupModule","NumberSpinnerModule","FarrisDialogModule","NotifyModule","FDropdownDirectiveTypeModule","FlexLayoutModule","TreeTableModule","PerfectScrollbarModule","RtfAppHelpModule","ColorPickerModule","ScrollbarModule","DatagridEditorsModule","DatagridModule","forRoot","EditorProviders","FarrisTabsModule","RtfAppHelpModuleL","LanguageTextboxModule","FarrisSectionModule","ExpressionModule","FarrisPanelModule","providers","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { JointSearchManagerService, LcpService } from '@qdp/common';\r\n\r\n@Injectable()\r\nexport class JointSearchService {\r\n\r\n  jointSearchInfo = new Subject<any>();\r\n\r\n  constructor(private jointSearchManager: JointSearchManagerService, private lcpService: LcpService) {\r\n    this.jointSearchManager.jointsearchInfoChange.subscribe(value => {\r\n      this.jointSearchInfo.next(value);\r\n    });\r\n  }\r\n\r\n  getjointsearch(id: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    return this.jointSearchManager.getjointsearch(id, queryId, queryRelativeUrl);\r\n  }\r\n\r\n  savejointsearch(jointSearchInfo: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.jointSearchManager.savejointsearch(jointSearchInfo, queryRelativeUrl);\r\n  }\r\n\r\n  deletejointsearch(formid: any, queryID: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.jointSearchManager.deletejointsearch(formid, queryID, queryRelativeUrl);\r\n  }\r\n\r\n  getLanguageList() {\r\n    return this.jointSearchManager.getLanguageList();\r\n  }\r\n  \r\n  getCol(params: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.lcpService.getCol(params, queryRelativeUrl);\r\n  }\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nimport { Component, OnInit, OnDestroy, Input, Optional, OnChanges, SimpleChanges, ViewChild, Renderer2, ViewEncapsulation, ComponentFactoryResolver, Injector, Output, EventEmitter, TemplateRef, Inject } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { RtfAppHelpComponent } from '@gsp-sys/rtf-ui';\r\nimport { RtfAppHelpComponent as RtfApplicationHelpComponent } from '@gsp-sys/rtf-apphelp';\r\nimport { JointSearchService } from '../../service/joint-search/joint-search.service';\r\nimport { EventBus } from '@qdp/common';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { Observable, of } from 'rxjs';\r\nimport { findIndex } from 'lodash-es';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { ExpressionService } from '@gsp-svc/expression';\r\nimport { element } from 'protractor';\r\n\r\ndeclare var gsp: any;\r\ndeclare var gspframeworkService: any;\r\n\r\n@Component({\r\n  selector: 'joint-search',\r\n  templateUrl: './joint-search.component.html',\r\n  styleUrls: ['./joint-search.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class JointSearchComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  // \r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @Input() editorParams: any = {};\r\n  queryId: any; // ID\r\n  formId: any = 'form' + 'ff3ea474-cc65-23b0-cdb1-73c9146cea3b'; // ID\r\n  sessionId: any; // sessionid\r\n  queryRelativeUrl: any;\r\n  qoManagerCode: any; // qoManagerCode\r\n  dynamicCols: any; // \r\n  domJson: any;\r\n  viewModelFields: any[];\r\n\r\n  @ViewChild('enumFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: '',\r\n    width: 900,\r\n    height: 800,\r\n    showButtons: true\r\n  };\r\n\r\n  functionSubDatas: any = []; // \r\n  functionParaDatas: any = [];\r\n  size: any = {};\r\n  private selectedIndex: any;\r\n  paraColumns: any = [];\r\n  SubColumns: any = [];\r\n  displaystyle: any = [\r\n    { 'name': '', value: 1 },\r\n    { 'name': '', value: 2 }\r\n  ];\r\n  QueryInfoDatas: any = [];\r\n  localizeService: LocalizeService;\r\n  expressionService: ExpressionService;\r\n\r\n  languages = [];\r\n  language: any;\r\n\r\n  _currentConditionInput = null;\r\n\r\n  functionParaDatasOfSub: any = [];\r\n  @ViewChild('dg') dg: DatagridComponent;\r\n  @ViewChild('dg1') dg1: DatagridComponent;\r\n  @ViewChild('farrisDialog') farrisDialog: DialogComponent;\r\n  //   // @ViewChild('gridFunctionSub') gridFunctionSub: GridComponent;\r\n  //   // @ViewChild('gridFunctionPara') gridFunctionPara: GridComponent;\r\n  @ViewChild('appHelp') appHelp: RtfAppHelpComponent;\r\n  @ViewChild('rtfappHelp') rtfappHelp: RtfApplicationHelpComponent;\r\n  @ViewChild('functioncodeTemp') functioncodeTemp: TemplateRef<any>;\r\n  @ViewChild('functionNameTemp') functionNameTemp: TemplateRef<any>;\r\n\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private resolver: ComponentFactoryResolver,\r\n    private jointSearchService: JointSearchService,\r\n    @Optional() private injector: Injector\r\n  ) {\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.language = this.localizeService.language;\r\n      this.expressionService = this.injector.get(ExpressionService);\r\n      this.modalConfig.title = this.localizeService.getValue('ideCmp.drillDown.drillDownName');\r\n      this.displaystyle = this.localizeService.getValue('ideCmp.drillDown.displayStyle');\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.dropDownInitForIDE();\r\n    this.gridInit();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'editorParams':\r\n            this.dropDownInitForIDE();\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private dropDownInitForIDE() {\r\n    const self = this;\r\n    self.formId = 'form' + 'ff3ea474-cc65-23b0-cdb1-73c9146cea3b';\r\n    if (self.editorParams && self.editorParams.queryId) {\r\n      self.queryId = self.editorParams.queryId;\r\n      self.sessionId = self.editorParams.sessionId;\r\n      self.queryRelativeUrl = self.editorParams.queryRelativeUrl;\r\n      self.qoManagerCode = self.editorParams.qoManagerCode;\r\n      self.domJson = self.editorParams.domJson;\r\n      self.viewModelFields = [];\r\n      self.getViewModelFields();\r\n\r\n      self.jointSearchService.getLanguageList().subscribe((data: any) => {\r\n        if (data && data.length) {\r\n          data.forEach((e: any) => {\r\n            self.languages.push({ code: e.code.toLowerCase(), name: e.description });\r\n          });\r\n        }\r\n        self.jointSearchService.getjointsearch(self.formId, self.queryId, self.queryRelativeUrl).subscribe(\r\n          data => {\r\n            if (data != null) {\r\n              self.functionSubDatas = JSON.parse(data.joinSearch);\r\n              self.functionParaDatas = JSON.parse(data.jointparam);\r\n              // tslint:disable-next-line:prefer-for-of\r\n              for (let i = 0; i < self.functionSubDatas.length; i++) {\r\n                if (self.functionSubDatas[i].jointserachdisplaystyle === 2) {\r\n                  self.dg.showColumn('linkfield');\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n        const params = {};\r\n        params['qoManagerCode'] = self.qoManagerCode;\r\n        params['pageIndex'] = 0;\r\n        params['schemaId'] = '';\r\n        params['entityData'] = '';\r\n        params['extendCond'] = '';\r\n        self.jointSearchService.getCol(params, self.queryRelativeUrl).subscribe(value => {\r\n          if (value && value.dynamicCols) {\r\n            self.dynamicCols = value.dynamicCols;\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  gridInit() {\r\n    const self = this;\r\n    const enumOpts = { valueField: 'value', textField: 'name', data: this.displaystyle };\r\n    this.SubColumns = [\r\n      { field: 'functioncode', width: 160, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[0], template: this.functioncodeTemp },\r\n      { field: 'functionname', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[1], template: this.functionNameTemp },\r\n      // { field: 'jointsearchid', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[2], editor: { type: EditorTypes.TEXTBOX, options: {} } },\r\n      {\r\n        field: 'jointserachdisplaystyle', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[3],\r\n        formatter: { type: 'enum', options: enumOpts },\r\n        editor: { type: EditorTypes.COMBOLIST, options: {\r\n            data: this.displaystyle,\r\n            idField: 'value',\r\n            textField: 'name',\r\n            selectChange: this.selectChange.bind(this)\r\n          }\r\n        }\r\n      },\r\n      { field: 'linkfield', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[6], visible: false, editor: { type: EditorTypes.TEXTBOX, options: {} } },\r\n      {\r\n        field: 'visibleformula', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.columnHeader')[4],\r\n        editor: {\r\n          type: EditorTypes.INPUTGROUP, options: {\r\n            groupText: '<i class=\"f-icon f-icon-lookup\"></i>',\r\n            clickHandle: (e) => {\r\n              this._currentConditionInput = e;\r\n              this.inputCondExp();\r\n            }\r\n          },\r\n        }\r\n      },\r\n    ];\r\n    this.paraColumns = [\r\n      { field: 'para', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.paramColumnHeader')[0], editor: { type: EditorTypes.TEXTBOX, options: {} } },\r\n      { field: 'paraname', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.paramColumnHeader')[1], editor: { type: EditorTypes.TEXTBOX, options: {} } },\r\n      { field: 'paravalue', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.paramColumnHeader')[2], editor: { type: EditorTypes.TEXTBOX, options: {} } },\r\n      {\r\n        field: 'paravaluetype', width: 100, title: self.localizeService.getValue('ideCmp.drillDown.paramColumnHeader')[3], editor: { type: EditorTypes.CHECKBOX, options: {} },\r\n        formatter: { type: 'boolean', options: { trueText: self.localizeService.getValue('ideCmp.drillDown.enumExpress')[0], falseText: self.localizeService.getValue('ideCmp.drillDown.enumExpress')[1] } }\r\n      },\r\n    ];\r\n  }\r\n\r\n  private selectChange($event: any) {\r\n    // console.log($event);\r\n    const self = this;\r\n    if (($event.value.data.value - 0) === 2) {\r\n      this.dg.showColumn('linkfield');\r\n    } else {\r\n      this.dg.hideColumn('linkfield');\r\n    }\r\n    if (this.dg.selectedRow) {\r\n      const index = findIndex(this.functionSubDatas, function (n: any) {\r\n        return n.id === self.dg.selectedRow.id;\r\n      });\r\n      self.functionSubDatas[index].jointserachdisplaystyle = $event.value.data.value;\r\n      self.functionSubDatas = [...self.functionSubDatas];\r\n    }\r\n  }\r\n\r\n  private getViewModelFields() {\r\n    if (this.domJson) {\r\n      const component = this.domJson.module.components.find(x => x.componentType === 'Frame');\r\n      this.recursiveGetViewModelFields(component, null);\r\n    }\r\n  }\r\n\r\n  private recursiveGetViewModelFields(component: any, contents: any) {\r\n    if (component) {\r\n      if (component.type === 'QdpFramework') {\r\n        if (component && component.params && component.params.length) {\r\n          for (const field of component.params) {\r\n            this.viewModelFields.push(field.ParamCode);\r\n          }\r\n        }\r\n      } else if (component.contents && component.contents.length) {\r\n        this.recursiveGetViewModelFields(null, component.contents);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < contents.length; i++) {\r\n        if (contents[i].type === 'QdpFramework') {\r\n          if (contents[i] && contents[i].params && contents[i].params.length) {\r\n            for (const field of contents[i].params) {\r\n              this.viewModelFields.push(field.ParamCode);\r\n            }\r\n          }\r\n        } else if (contents[i].contents && contents[i].contents.length) {\r\n          this.recursiveGetViewModelFields(null, contents[i].contents);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  clickConfirm() {\r\n    const self = this;\r\n    self.dg.endRowEdit();\r\n    self.dg1.endRowEdit();\r\n    if (self.functionSubDatas.length > 0) {\r\n      self.jointSearchService.savejointsearch({ Id: EventBus.guid(), joinsearch: JSON.stringify(self.functionSubDatas), jointparam: JSON.stringify(self.functionParaDatas), queryid: self.queryId, FormId: self.formId }, this.queryRelativeUrl).subscribe();\r\n    } else {\r\n      self.jointSearchService.deletejointsearch(self.formId, self.queryId, this.queryRelativeUrl).subscribe();\r\n      self.functionSubDatas = [];\r\n      self.functionParaDatas = [];\r\n      self.functionParaDatasOfSub = [];\r\n    }\r\n    this.selectedIndex = -1;\r\n    this.submitModal.emit({ value: this.functionSubDatas });\r\n\r\n  }\r\n\r\n  handlebeforeClose = (): Observable<any> => {\r\n    this.dg.endRowEdit();\r\n    this.dg1.endRowEdit();\r\n    return of(true);\r\n  }\r\n\r\n  handleDialogShow() {\r\n    this.farrisDialog.show();\r\n  }\r\n\r\n  addSubHandler() {\r\n    this.functionSubDatas.push({\r\n      'id': EventBus.guid(),\r\n      'queryParaID': this.queryId,\r\n      'searchtype': '',\r\n      'functioncode': '',\r\n      'functionname': null,\r\n      'appEntrance': '',\r\n      'jointsearchid': '',\r\n      'jointserachdisplaystyle': 1,\r\n      'linkfield': '',\r\n      'visibleformula': '',\r\n      'doubleclikjoinsearch': true,\r\n      'destinationqueryId': ''\r\n    });\r\n\r\n    this.dg.refresh();\r\n  }\r\n\r\n  removeSubHandler() {\r\n    const self = this;\r\n    if (self.dg.selectedRow) {\r\n      const id = self.dg.selectedRow.id;\r\n      const index = findIndex(self.functionSubDatas, function (n: any) {\r\n        return n.id === id;\r\n      });\r\n      self.functionSubDatas.splice(index, 1);\r\n      self.functionSubDatas = [...self.functionSubDatas];\r\n      if (self.functionSubDatas.length === 0) {\r\n        self.functionParaDatas = [];\r\n        self.functionParaDatasOfSub = [];\r\n      } else {\r\n        const params = [];\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < this.functionParaDatas.length; i++) {\r\n          if (self.functionParaDatas[i].functionid !== id) {\r\n            params.push(self.functionParaDatas[i]);\r\n          }\r\n        }\r\n        self.functionParaDatas.push(...params);\r\n      }\r\n      this.dg.refresh();\r\n      this.dg1.refresh();\r\n    }\r\n  }\r\n\r\n  public cancelSubHandler(type: any): void {\r\n    this.dg.endRowEdit();\r\n  }\r\n\r\n  getFunctionName(data: any) {\r\n    let local = 'zh-chs';\r\n    if ((!gsp && !gsp.cache) && gspframeworkService) {\r\n      local = gspframeworkService.rtf.language.getLanguageCode().toLowerCase();\r\n    }\r\n    if (!local) {\r\n      local = 'zh-chs';\r\n    }\r\n    return data[local] ? data[local] : data;\r\n  }\r\n\r\n  openFunc() {\r\n    this.appHelp.showHelp(this.sessionId);\r\n  }\r\n  openApp() {\r\n    this.rtfappHelp.showHelp(this.sessionId);\r\n  }\r\n\r\n  selectedFunc($event: any) {\r\n    const self = this;\r\n    if (self.dg.selectedRow) {\r\n      const index = findIndex(self.functionSubDatas, function (n: any) {\r\n        return n.id === self.dg.selectedRow.id;\r\n      });\r\n\r\n      self.functionSubDatas[index].functioncode = $event[0].Id;\r\n      self.functionSubDatas[index].functionname = { 'zh-chs': $event[0].Name };\r\n      self.functionSubDatas[index].searchtype = 'func';\r\n      let staticParam = $event[0].InvokingConfig.staticParams;\r\n      if (staticParam) {\r\n        staticParam = JSON.parse(staticParam);\r\n        for (const staticPara of staticParam) {\r\n          if (staticPara.name === 'queryId') {\r\n            self.functionSubDatas[index].destinationqueryId = staticPara.value;\r\n          }\r\n        }\r\n      }\r\n      self.functionSubDatas = [...self.functionSubDatas];\r\n    }\r\n  }\r\n  selectedApp($event: any) {\r\n    const self = this;\r\n    if (self.dg.selectedRow) {\r\n      const index = findIndex(this.functionSubDatas, function (n: any) {\r\n        return n.id === self.dg.selectedRow.id;\r\n      });\r\n\r\n      self.functionSubDatas[index].functioncode = $event.selectedInvok[0].appId;\r\n      self.functionSubDatas[index].functionname = { 'zh-chs': $event.selectedInvok[0].name };\r\n      self.functionSubDatas[index].appEntrance = $event.selectedInvok[0].appEntrance;\r\n      self.functionSubDatas[index].searchtype = 'app';\r\n      let staticParam = $event.selectedInvok[0].staticParams;\r\n      if (staticParam) {\r\n        staticParam = JSON.parse(staticParam);\r\n        for (const staticPara of staticParam) {\r\n          if (staticPara.name === 'queryId') {\r\n            self.functionSubDatas[index].destinationqueryId = staticPara.value;\r\n          }\r\n        }\r\n      }\r\n      self.functionSubDatas = [...self.functionSubDatas];\r\n    }\r\n  }\r\n\r\n  findIndex(event: any) {\r\n    this.selectedIndex = event.data.id;\r\n    this.functionParaDatasOfSub = this.functionParaDatas.filter(x => x.functionid === this.selectedIndex);\r\n    this.dg.endRowEdit();\r\n    this.dg1.endRowEdit();\r\n  }\r\n\r\n  cancelEditedPara(event: any) {\r\n    this.dg1.endRowEdit();\r\n  }\r\n\r\n  inputCondExp() {\r\n    const self = this;\r\n    if (self.dg.selectedRow) {\r\n      const id = self.dg.selectedRow.id;\r\n      const index = findIndex(self.functionSubDatas, function (n: any) {\r\n        return n.id === id;\r\n      });\r\n\r\n      if (this.viewModelFields) {\r\n        for (const code of this.viewModelFields) {\r\n          this.expressionService.addContext({\r\n            key: '@P_' + code,\r\n            name: code,\r\n            description: ''\r\n          });\r\n        }\r\n      }\r\n\r\n      // \r\n      if (this.dynamicCols) {\r\n        this.dynamicCols.forEach(element => {\r\n          this.expressionService.addContext({\r\n            key: '@R_' + element.bindField,\r\n            name: element.name,\r\n            description: ''\r\n          });\r\n        });\r\n      }\r\n\r\n      self.expressionService.addExpressionText(self.functionSubDatas[index].visibleformula);\r\n      self.expressionService.buildExpression().then(expressStr => {\r\n        self.functionSubDatas[index].visibleformula = expressStr;\r\n        // if (self.dg) {\r\n        //   self.dg.refresh();\r\n        //   self.dg.data = self.functionSubDatas;\r\n        // }\r\n        self.functionSubDatas = [...self.functionSubDatas];\r\n        if (self._currentConditionInput) {\r\n          self._currentConditionInput.formControl.setValue(expressStr);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  addParaHandler() {\r\n    const functionid = this.selectedIndex;\r\n    if (functionid !== -1) {\r\n      this.functionParaDatas.push({\r\n        'id': EventBus.guid(),\r\n        'functionid': functionid,\r\n        'para': '',\r\n        'paraname': '',\r\n        'paravalue': '',\r\n        'paravaluetype': false\r\n      });\r\n      this.functionParaDatasOfSub = this.functionParaDatas.filter(x => x.functionid === this.selectedIndex);\r\n    }\r\n    this.dg1.refresh();\r\n  }\r\n  removeParaHandler() {\r\n    const self = this;\r\n    if (self.dg1.selectedRow) {\r\n      const index = findIndex(self.functionParaDatas, function (n: any) {\r\n        return n.id === self.dg1.selectedRow.id;\r\n      });\r\n      self.functionParaDatas.splice(index, 1);\r\n      self.functionParaDatasOfSub = self.functionParaDatas.filter(x => x.functionid === this.selectedIndex);\r\n      self.functionParaDatasOfSub = [...self.functionParaDatasOfSub];\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { ParasMappingManagerService } from '@qdp/common';\r\n\r\n@Injectable()\r\nexport class ParasMappingService {\r\n\r\n  paramMappingInfo = new Subject<any>();\r\n\r\n  constructor(private parasMappingManager: ParasMappingManagerService) {\r\n    this.parasMappingManager.parasmappingInfoChange.subscribe(value => {\r\n      this.paramMappingInfo.next(value);\r\n    });\r\n  }\r\n\r\n  getParasMapping(id: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    return this.parasMappingManager.getParasMapping(id, queryId, queryRelativeUrl);\r\n  }\r\n\r\n  saveParasMapping(paramMappingInfo: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.parasMappingManager.saveParasMapping(paramMappingInfo, queryRelativeUrl);\r\n  }\r\n\r\n  deleteParasMapping(datasourceID: string, queryID: string, queryRelativeUrl: any): Observable<any> {\r\n    return this.parasMappingManager.deleteParasMapping(datasourceID, queryID, queryRelativeUrl);\r\n  }\r\n}\r\n","import { Component, OnInit, Input, SimpleChanges, ViewChild, Renderer2, ViewEncapsulation, Output, EventEmitter, TemplateRef, Optional, Injector } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { findIndex } from 'lodash-es';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { DatagridComponent, GRID_VALIDATORS } from '@farris/ui-datagrid';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ParasMappingService } from '../../service/paras-mapping/paras-mapping.service';\r\nimport { Observable, of } from 'rxjs';\r\nimport { EventBus } from '@qdp/common';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\nconst createFormGroup = dataItem => new FormGroup({\r\n  'id': new FormControl(dataItem.id),\r\n  'parameter': new FormControl(dataItem.parameter, Validators.required),\r\n  'sourceParameter': new FormControl(dataItem.sourceParameter),\r\n  'mappingType': new FormControl(dataItem.mappingType),\r\n  'constant': new FormControl(dataItem.constant),\r\n  'expression': new FormControl(dataItem.expression),\r\n  'paraisused': new FormControl(dataItem.paraisused)\r\n});\r\nconst matches = (el, selector) => (el.matches || el.msMatchesSelector).call(el, selector);\r\n@Component({\r\n  selector: 'paras-mapping',\r\n  templateUrl: './paras-mapping.component.html',\r\n  styleUrls: ['./paras-mapping.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class ParasMappingComponent implements OnInit {\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  // \r\n  @Output() submitModal = new EventEmitter<any>();\r\n  @Input() editorParams: any = {};\r\n  @Input() queryId: any;\r\n  @Input() qoManagerCode: any;\r\n  @Input() queryRelativeUrl: any;\r\n  @Input() isMultiForm: any;\r\n  queryparaData: any; // \r\n  sourceparaData: any; // \r\n  @ViewChild('enumFooter') modalFooter: TemplateRef<any>;\r\n  modalConfig = {\r\n    title: '',\r\n    width: 900,\r\n    height: 500,\r\n    showButtons: true\r\n  };\r\n  @ViewChild('farrisDialog') farrisDialog: DialogComponent;\r\n  currTreeNodeId: any;\r\n  currQueryInfoData: any;\r\n  // queryparaData: any = [];\r\n  // sourceparaData: any = [];\r\n  colSelectValue: any;\r\n  colName = '';\r\n  size: any = {};\r\n  datasourceid: any;\r\n  public gridData: any[];\r\n  public formGroup: FormGroup;\r\n  private editedRowIndex: number;\r\n  isNew: boolean;\r\n  mappingTypeData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 }\r\n  ];\r\n  QueryInfoDatas: any = [];\r\n  saveDatas: any = {};\r\n  currentmode = true;\r\n  localizeService: LocalizeService;\r\n\r\n  columns = [];\r\n  total = 0;\r\n  editMode = 'row';\r\n  pageSize = 200;\r\n  pageIndex = 1;\r\n  @ViewChild('dg1') dg1: DatagridComponent;\r\n  @ViewChild('dg2') dg2: DatagridComponent;\r\n\r\n  constructor(private renderer: Renderer2, private parasMappingService: ParasMappingService, @Optional() private msgService: MessagerService, @Optional() private injector: Injector) {\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.mappingTypeData = this.localizeService.getValue('ideCmp.paramsMapping.mappingTypeData');\r\n      this.modalConfig.title = this.localizeService.getValue('ideCmp.paramsMapping.paramOption');\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.editorParams && this.editorParams.queryId) {\r\n      this.currentmode = true;\r\n      this.queryId = this.editorParams.queryId;\r\n      this.queryparaData = this.editorParams.queryparaData;\r\n      this.sourceparaData = this.editorParams.sourceparaData;\r\n      this.qoManagerCode = this.editorParams.datasourceid;\r\n      this.queryRelativeUrl = this.editorParams.queryRelativeUrl;\r\n      /*\r\n      this.parasMappingService.getParasMapping(this.qoManagerCode , this.queryId, this.queryRelativeUrl).subscribe(\r\n        data => { if (data != null) { this.QueryInfoDatas =  JSON.parse(data.parasmapping.value); } });\r\n        */\r\n      this.parasMappingService.getParasMapping(this.qoManagerCode, this.queryId, this.queryRelativeUrl).subscribe(\r\n        data => {\r\n          if (data != null) { this.QueryInfoDatas = JSON.parse(data.parasmapping.value); } else if (this.editorParams.QueryInfoDatas) {\r\n            this.QueryInfoDatas = this.editorParams.QueryInfoDatas;\r\n          }\r\n        });\r\n    } else {\r\n      this.currentmode = false;\r\n      this.parasMappingService.getParasMapping(this.qoManagerCode, this.queryId, this.queryRelativeUrl).subscribe(\r\n        data => {\r\n          if (data != null) {\r\n            this.queryparaData = JSON.parse(data.parasmapping.queryparaData);\r\n            this.sourceparaData = JSON.parse(data.parasmapping.sourceparaData);\r\n            this.QueryInfoDatas = JSON.parse(data.parasmapping.value);\r\n          }\r\n        }\r\n      );\r\n    }\r\n    this.gridInit();\r\n  }\r\n\r\n  private gridInit() {\r\n    const self = this;\r\n    const enumOpts = { valueField: 'value', textField: 'name', data: this.queryparaData };\r\n    const enumOpts1 = { valueField: 'value', textField: 'name', data: this.mappingTypeData };\r\n    const enumOpts2 = { valueField: 'value', textField: 'name', data: this.sourceparaData };\r\n    this.columns = [\r\n      {\r\n        field: 'parameter', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[0], formatter: { type: 'enum', options: enumOpts },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { ...enumOpts, idField: 'value' },\r\n          validators: [\r\n            { type: 'required', messager: '' }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        field: 'mappingType', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[1], formatter: { type: 'enum', options: enumOpts1 },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { ...enumOpts1, idField: 'value' }\r\n        }\r\n      },\r\n      {\r\n        field: 'sourceParameter', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[2], formatter: { type: 'enum', options: enumOpts2 },\r\n        editor: {\r\n          type: EditorTypes.COMBOLIST,\r\n          options: { ...enumOpts2, idField: 'value' }\r\n        }\r\n      },\r\n      {\r\n        field: 'constant', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[3],\r\n        editor: {\r\n          type: EditorTypes.TEXTBOX\r\n        }\r\n      },\r\n      {\r\n        field: 'expression', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[4],\r\n        editor: {\r\n          type: EditorTypes.TEXTBOX\r\n        }\r\n      },\r\n      {\r\n        field: 'paraisused', width: 100, title: self.localizeService.getValue('ideCmp.paramsMapping.columnHeader')[5],\r\n        editor: {\r\n          type: EditorTypes.CHECKBOX\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  clickCancel() {\r\n    if (this.dg2) {\r\n      this.dg2.endRowEdit();\r\n    }\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  clickConfirm() {\r\n    const self = this;\r\n    this.updateParasMapping();\r\n    self.submitModal.emit({ value: self.QueryInfoDatas });\r\n  }\r\n\r\n  handlebeforeClose = (): Observable<any> => {\r\n    if (this.dg1) {\r\n      this.dg1.endRowEdit();\r\n    }\r\n    this.updateParasMapping();\r\n    return of(true);\r\n  }\r\n\r\n  updateParasMapping() {\r\n    const self = this;\r\n    if (self.QueryInfoDatas && self.QueryInfoDatas.length) {\r\n      // tslint:disable-next-line:max-line-length\r\n      self.saveDatas = { Id: EventBus.guid(), parasmapping: JSON.stringify({ value: JSON.stringify(self.QueryInfoDatas), queryparaData: JSON.stringify(self.queryparaData), sourceparaData: JSON.stringify(self.sourceparaData) }), queryid: self.queryId, datasourceid: self.qoManagerCode };\r\n      self.parasMappingService.saveParasMapping(self.saveDatas, self.queryRelativeUrl)\r\n        .subscribe();\r\n    } else {\r\n      self.parasMappingService.deleteParasMapping(self.qoManagerCode, self.queryId, self.queryRelativeUrl).subscribe();\r\n      self.QueryInfoDatas = [];\r\n    }\r\n  }\r\n\r\n  handleDialogShow() {\r\n    this.farrisDialog.show();\r\n  }\r\n\r\n  addFilterRow($event: any) {\r\n    this.QueryInfoDatas.push({\r\n      'id': EventBus.guid(),\r\n      'parameter': '',\r\n      'sourceParameter': '',\r\n      'mappingType': 0,\r\n      'constant': '',\r\n      'expression': '',\r\n      'paraisused': true\r\n    });\r\n    if (this.dg1) {\r\n      this.dg1.refresh();\r\n  }\r\n  }\r\n\r\n  addFilterRowForIde($event: any) {\r\n    this.QueryInfoDatas.push({\r\n      'id': EventBus.guid(),\r\n      'parameter': '',\r\n      'sourceParameter': '',\r\n      'mappingType': 0,\r\n      'constant': '',\r\n      'expression': '',\r\n      'paraisused': true\r\n    });\r\n    if (this.dg2) {\r\n      this.dg2.refresh();\r\n    }\r\n  }\r\n\r\n  deleteFilterRow($event: any) {\r\n    const self = this;\r\n    if (this.dg1.selectedRow) {\r\n      const index = findIndex(this.QueryInfoDatas, function (n: any) { return n.id === self.dg1.selectedRow.id; });\r\n      this.QueryInfoDatas.splice(index, 1);\r\n      this.dg1.refresh();\r\n    } else {\r\n      this.msgService.info(self.localizeService.getValue('ideCmp.paramsMapping.message.validate.select'));\r\n    }\r\n  }\r\n\r\n  deleteFilterRowForIde($event: any) {\r\n    const self = this;\r\n    if (this.dg2.selectedRow) {\r\n      const index = findIndex(this.QueryInfoDatas, function (n: any) { return n.id === self.dg2.selectedRow.id; });\r\n      this.QueryInfoDatas.splice(index, 1);\r\n      this.dg2.refresh();\r\n    } else {\r\n      this.msgService.info(self.localizeService.getValue('ideCmp.paramsMapping.message.validate.select'));\r\n    }\r\n  }\r\n\r\n  cancelEdit($event: any) {\r\n    if (this.dg1) {\r\n      this.dg1.endRowEdit();\r\n    }\r\n  }\r\n\r\n  cancelEditForIde($event: any) {\r\n    if (this.dg2) {\r\n      this.dg2.endRowEdit();\r\n    }\r\n  }\r\n}\r\n","import { Directive, ElementRef, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line:directive-selector\r\n  selector: '[popupAnchor]',\r\n  exportAs: 'popupAnchor'\r\n})\r\nexport class PopupAnchorDirective {\r\n  constructor(public element: ElementRef) {}\r\n}\r\n","import { Component, Input, OnInit, OnChanges, SimpleChanges, Output, EventEmitter, Injector } from '@angular/core';\r\nimport { findIndex } from 'lodash-es';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\n@Component({\r\n  selector: 'charts-type',\r\n  templateUrl: './charts-type.component.html',\r\n  styleUrls: ['./charts-type.component.css']\r\n})\r\nexport class ChartsTypeComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  chartsType: any = {\r\n    series: {\r\n      type: null\r\n    }\r\n  };\r\n  chartsTypeData: any = [\r\n    { name: '', value: -1 },\r\n    { name: '', value: 'line' },\r\n    { name: '', value: 'bar' },\r\n    { name: '', value: 'pie' },\r\n    { name: '', value: 'line1' },\r\n    { name: '', value: 'scatter' },\r\n    { name: '', value: 'effectScatter' },\r\n    // { name: '', value: 'map'},\r\n    // \r\n  ];\r\n  chartsTypeSelectValue: any = -1;\r\n  @Output() chartTypeChange = new EventEmitter<any>();\r\n  localizeService: LocalizeService;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.chartsTypeData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsType.chartsTypeData');\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const self = this;\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.chartsType) {\r\n              const str = JSON.stringify(newValue.schemaValue.chartsType);\r\n              this.chartsType = JSON.parse(str);\r\n              const index = findIndex(this.chartsTypeData, function (c: any) { return c.value === (self.chartsType.series.type || -1); });\r\n              if (index >= 0) {\r\n                this.chartsTypeSelectValue = this.chartsTypeData[index].value;\r\n                this.valueChange(this.chartsTypeSelectValue); // \r\n              }\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  valueChange(value: any): void {\r\n    this.chartsType.series.type = value.value || -1;\r\n    this.chartTypeChange.emit(value.value);\r\n  }\r\n\r\n  getChartsTypeOption() {\r\n    if (this.chartsTypeSelectValue !== -1) {\r\n      this.chartsType.series.type = this.chartsTypeSelectValue;\r\n      if (this.chartsType.series.type.indexOf('1') >= 0) {\r\n        this.chartsType.series.areaStyle = {};\r\n      } else {\r\n        delete this.chartsType.series.areaStyle;\r\n      }\r\n    }\r\n    return this.chartsType;\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit, OnChanges, SimpleChanges, Injector, EventEmitter } from '@angular/core';\r\nimport { findIndex } from 'lodash-es';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\n\r\n@Component({\r\n  selector: 'charts-data',\r\n  templateUrl: './charts-data.component.html',\r\n  styleUrls: ['./charts-data.component.css']\r\n})\r\nexport class ChartsDataComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  @Input() chartsType: any;\r\n  @Input() colList: any;\r\n  // \r\n  live1 = [1, 1, 0, 0, 0, 0, 0];\r\n  live2 = [0, 0, 1, 1, 1, 1, 1];\r\n  live3 = [0, 0, 1, 1, 0, 0, 0];\r\n  live = [];\r\n  groupSummarySet: any;\r\n  chartsData: any;\r\n  axisTypeData: any = [\r\n    { name: '', value: 'category' },\r\n    { name: '', value: 'value' }\r\n  ];\r\n  xAxisTypeSelectValue: any = this.axisTypeData[0].value;\r\n  yAxisTypeSelectValue: any = this.axisTypeData[1].value;\r\n  xAxisDisableItemIndex = -1;\r\n  yAxisDisableItemIndex = -1;\r\n\r\n  xPositionData: any = [\r\n    { name: '', value: 'bottom' },\r\n    { name: '', value: 'top' }\r\n  ];\r\n  xPositionValue: any = this.xPositionData[0].value;\r\n  yPositionData: any = [\r\n    { name: '', value: 'left' },\r\n    { name: '', value: 'right' }\r\n  ];\r\n  yPositionValue: any = this.yPositionData[0].value;\r\n\r\n  bindingData: any = [\r\n    // { 'name': 'Code', value: 'Code' },\r\n    // { 'name': 'Name', value: 'Name' },\r\n    // { 'name': 'Value', value: 'Value' },\r\n  ];\r\n  barTypeData: any = [\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 },\r\n  ];\r\n  barTypeSelectValue: any = this.barTypeData[0];\r\n  dimensionField: any;\r\n  indicatorField: any;\r\n  dimensionFieldList: any[] = [];\r\n  indicatorFieldList: any[] = [];\r\n  xAxisFeild: any;\r\n  yAxisFeild: any;\r\n  // legendFeild: any;\r\n  firstFeild: any;\r\n  secondFeild: any;\r\n  thirdFeild: any;\r\n  fourthFeild: any;\r\n  fifthFeild: any;\r\n  xAxisBindingFeildList: any[] = [];\r\n  yAxisBindingFeildList: any[] = [];\r\n  // legendBindingFeildList: any[] = [];\r\n  firstBindingFeildList: any[] = [];\r\n  secondBindingFeildList: any[] = [];\r\n  thirdBindingFeildList: any[] = [];\r\n  fourthBindingFeildList: any[] = [];\r\n  fifthBindingFeildList: any[] = [];\r\n  aggreData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 },\r\n    { name: '', value: 4 },\r\n    { name: '', value: 5 }\r\n  ];\r\n  aggreSelectValue: any = this.aggreData[0].value;\r\n  size: any = {};\r\n  localizeService: LocalizeService;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.axisTypeData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsData.axisTypeData');\r\n    this.xPositionData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsData.xPositionData');\r\n    this.yPositionData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsData.yPositionData');\r\n    this.barTypeData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsData.barTypeData');\r\n    this.aggreData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.aggregateData');\r\n    // this.aggreData.splice(0, 1);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const self = this;\r\n    self.live = self.live1;\r\n    if (self.chartsType === 'effectScatter') {\r\n      self.live = self.live2;\r\n    }\r\n    if (self.chartsType === 'pie' || self.chartsType === 'map') {\r\n      self.live = self.live3;\r\n    }\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.groupSummarySet) {\r\n              this.groupSummarySet = JSON.parse(JSON.stringify(newValue.schemaValue.groupSummarySet));\r\n              this.dimensionFieldList = (this.groupSummarySet && this.groupSummarySet.dimensions) || [];\r\n              this.indicatorFieldList = (this.groupSummarySet && this.groupSummarySet.indicators) || [];\r\n            }\r\n            // todo :bug\r\n            if (this.chartsType !== 'effectScatter' && this.chartsType !== 'pie' && this.chartsType !== 'map') {\r\n              if (newValue.schemaValue && newValue.schemaValue.chartsData) {\r\n                const str = JSON.stringify(newValue.schemaValue.chartsData);\r\n                this.chartsData = JSON.parse(str);\r\n\r\n                let index = findIndex(this.axisTypeData, function (c: any) {\r\n                  return c.value === (self.chartsData.xAxis ? self.chartsData.xAxis.type || 'category' : 'category');\r\n                });\r\n                this.xAxisTypeSelectValue = this.axisTypeData[index].value;\r\n                index = findIndex(this.axisTypeData, function (c: any) {\r\n                  return c.value === (self.chartsData.xAxis ? self.chartsData.yAxis.type || 'value' : 'value');\r\n                });\r\n                this.yAxisTypeSelectValue = this.axisTypeData[index].value;\r\n                index = findIndex(this.xPositionData, function (c: any) {\r\n                  return c.value === (self.chartsData.xAxis ? self.chartsData.xAxis.position || 'bottom' : 'bottom');\r\n                });\r\n                this.xPositionValue = this.xPositionData[index].value;\r\n                index = findIndex(this.yPositionData, function (c: any) {\r\n                  return c.value === (self.chartsData.xAxis ? self.chartsData.yAxis.position || 'left' : 'left');\r\n                });\r\n                this.yPositionValue = this.yPositionData[index].value;\r\n                if (this.chartsData && this.chartsData.series && this.chartsData.series.type) {\r\n                  this.chartsType = this.chartsData.series.type;\r\n                }\r\n                this.xAxisBindingFeildList = this.chartsData.series.encode.x || this.chartsData.series.encode.name || [];\r\n                this.yAxisBindingFeildList = this.chartsData.series.encode.y || this.chartsData.series.encode.value1 || [];\r\n              }\r\n              // this.legendBindingFeildList = this.chartsData.legend.data||[];\r\n\r\n            } else {\r\n              if (newValue.schemaValue && newValue.schemaValue.chartsData) {\r\n                const str = JSON.stringify(newValue.schemaValue.chartsData);\r\n                this.chartsData = JSON.parse(str);\r\n                // this.legendBindingFeildList = this.chartsData.legend.data||[];\r\n                this.firstBindingFeildList = this.chartsData.series.encode.name || this.chartsData.series.encode.x || [];\r\n                this.secondBindingFeildList = this.chartsData.series.encode.value1 || this.chartsData.series.encode.y || [];\r\n                this.thirdBindingFeildList = this.chartsData.series.encode.lng || [];\r\n                this.fourthBindingFeildList = this.chartsData.series.encode.lat || [];\r\n                this.fifthBindingFeildList = this.chartsData.series.encode.value2 || [];\r\n              }\r\n            }\r\n            break;\r\n          case 'colList':\r\n            this.bindingData = newValue;\r\n            break;\r\n          case 'chartsType':\r\n            this.chartsType = newValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  barValueChange(value: any): void {\r\n  }\r\n\r\n  public xItemDisabled(itemArgs: { dataItem: string, index: number }) {\r\n    return itemArgs.index === this.xAxisDisableItemIndex;\r\n  }\r\n\r\n  public yItemDisabled(itemArgs: { dataItem: string, index: number }) {\r\n    return itemArgs.index === this.yAxisDisableItemIndex;\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  handleBinding(type: string) {\r\n    const self = this;\r\n    let index = -1;\r\n    if (type === 'dimension') {\r\n      if (!this.dimensionField) {\r\n        return;\r\n      }\r\n      index = findIndex(this.dimensionFieldList, function (c: any) {\r\n        return c === self.dimensionField;\r\n      });\r\n      if (index < 0) {\r\n        this.dimensionFieldList.push(this.dimensionField);\r\n      }\r\n    } else if (type === 'indicator') {\r\n      if (!this.indicatorField || !this.aggreSelectValue || this.aggreSelectValue === 0 || this.aggreSelectValue === '0') {\r\n        return;\r\n      }\r\n      index = findIndex(this.indicatorFieldList, function (c: any) {\r\n        return c === self.indicatorField;\r\n      });\r\n      if (index < 0) {\r\n        this.indicatorFieldList.push(this.aggreSelectValue + ';' + this.indicatorField);\r\n      }\r\n    } else if (type === 'x') {\r\n      if (!this.xAxisFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.xAxisBindingFeildList, function (c: any) {\r\n        return c === self.xAxisFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.xAxisBindingFeildList.push(this.xAxisFeild);\r\n      }\r\n    } else if (type === 'y') {\r\n      if (!this.yAxisFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.yAxisBindingFeildList, function (c: any) {\r\n        return c === self.yAxisFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.yAxisBindingFeildList.push(this.yAxisFeild);\r\n      }\r\n    } else if (type === 'f') {\r\n      if (!this.firstFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.firstBindingFeildList, function (c: any) {\r\n        return c === self.firstFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.firstBindingFeildList.push(this.firstFeild);\r\n      }\r\n    } else if (type === 's') {\r\n      if (!this.secondFeild || !this.secondFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.secondBindingFeildList, function (c: any) {\r\n        return c === self.secondFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.secondBindingFeildList.push(this.secondFeild);\r\n      }\r\n    } else if (type === 't') {\r\n      if (!this.thirdFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.thirdBindingFeildList, function (c: any) {\r\n        return c === self.thirdFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.thirdBindingFeildList.push(this.thirdFeild);\r\n      }\r\n    } else if (type === '4') {\r\n      if (!this.fourthFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.fourthBindingFeildList, function (c: any) {\r\n        return c === self.fourthFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.fourthBindingFeildList.push(this.fourthFeild);\r\n      }\r\n    } else if (type === '5') {\r\n      if (!this.fifthFeild) {\r\n        return;\r\n      }\r\n      index = findIndex(this.fifthBindingFeildList, function (c: any) {\r\n        return c === self.fifthFeild;\r\n      });\r\n      if (index < 0) {\r\n        this.fifthBindingFeildList.push(this.fifthFeild);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRemoveFeild(type: string, feild: string) {\r\n    let index = -1;\r\n    if (type === 'dimension') {\r\n      index = findIndex(this.dimensionFieldList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.dimensionFieldList.splice(index, 1);\r\n    } else if (type === 'indicator') {\r\n      index = findIndex(this.indicatorFieldList, function (c: any) {\r\n        return c.indexOf(feild) >= 0;\r\n      });\r\n      this.indicatorFieldList.splice(index, 1);\r\n    } else if (type === 'x') {\r\n      index = findIndex(this.xAxisBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.xAxisBindingFeildList.splice(index, 1);\r\n    } else if (type === 'y') {\r\n      index = findIndex(this.yAxisBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.yAxisBindingFeildList.splice(index, 1);\r\n    } else if (type === 'f') {\r\n      index = findIndex(this.firstBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.firstBindingFeildList.splice(index, 1);\r\n    } else if (type === 's') {\r\n      index = findIndex(this.secondBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.secondBindingFeildList.splice(index, 1);\r\n    } else if (type === 't') {\r\n      index = findIndex(this.thirdBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.thirdBindingFeildList.splice(index, 1);\r\n    } else if (type === '4') {\r\n      index = findIndex(this.fourthBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.fourthBindingFeildList.splice(index, 1);\r\n    } else if (type === '5') {\r\n      index = findIndex(this.fifthBindingFeildList, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.fifthBindingFeildList.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  getChartsDataOption() {\r\n    const option: any = {\r\n\r\n      series: {\r\n        type: null,\r\n        encode: {},\r\n      },\r\n    };\r\n    if (this.chartsType !== 'effectScatter' && this.chartsType !== 'pie' && this.chartsType !== 'map') {\r\n      option.xAxis = {\r\n        type: null,\r\n        position: 'bottom',\r\n        axisLine: {\r\n          show: true,\r\n        },\r\n      };\r\n      option.yAxis = {\r\n        type: null,\r\n        position: 'left',\r\n        axisLine: {\r\n          show: true,\r\n        },\r\n      };\r\n      option.series.encode = {\r\n        x: [this.xAxisBindingFeildList[0]],\r\n        y: this.yAxisBindingFeildList,\r\n      };\r\n      option.tooltip = {\r\n        padding: 10,\r\n        backgroundColor: '#222',\r\n        borderColor: '#f21',\r\n        borderWidth: 1,\r\n      };\r\n      if (this.xAxisTypeSelectValue) {\r\n        option.xAxis.type = this.xAxisTypeSelectValue;\r\n      }\r\n      if (this.xPositionValue) {\r\n        option.xAxis.position = this.xPositionValue;\r\n      }\r\n      if (this.yAxisTypeSelectValue) {\r\n        option.yAxis.type = this.yAxisTypeSelectValue;\r\n      }\r\n      if (this.yPositionValue) {\r\n        option.yAxis.position = this.yPositionValue;\r\n      }\r\n    }\r\n\r\n    if (this.chartsType !== 'effectScatter' && this.chartsType !== 'pie' && this.chartsType !== 'map' && this.yAxisBindingFeildList.length > 1) {\r\n      option.legend = {};\r\n      option.legend.show = true;\r\n      option.legend.data = [];\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < this.yAxisBindingFeildList.length; i++) {\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let j = 0; j < this.colList.length; j++) {\r\n          if (this.colList[j].bindField === this.yAxisBindingFeildList[i]) {\r\n            option.legend.data.push(this.colList[j].name);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.chartsType === 'pie') {\r\n      option.xAxis = {\r\n        type: null,\r\n        position: 'bottom',\r\n        axisLine: {\r\n          show: false,\r\n        },\r\n      };\r\n      option.yAxis = {\r\n        type: null,\r\n        position: 'left',\r\n        axisLine: {\r\n          show: false,\r\n        },\r\n      };\r\n      option.tooltip = {\r\n        formatter: '{b}:{c}</br>{d}%'\r\n      };\r\n      option.series.encode = {\r\n        x: [this.firstBindingFeildList[0]],\r\n        y: [this.secondBindingFeildList[0]],\r\n      };\r\n      option.legend = {\r\n        itemGap: 10,\r\n        itemWidth: 25,\r\n        itemHeight: 14,\r\n        align: 'auto',\r\n        orient: 'horizontal'\r\n      };\r\n    }\r\n    if (this.chartsType === 'map') {\r\n      option.xAxis = {\r\n        type: null,\r\n        position: 'bottom',\r\n        axisLine: {\r\n          show: false,\r\n        },\r\n      };\r\n      option.yAxis = {\r\n        type: null,\r\n        position: 'left',\r\n        axisLine: {\r\n          show: false,\r\n        },\r\n      };\r\n      option.series = {\r\n        roam: 'scale',\r\n        map: 'china',\r\n        itemStyle: {\r\n          emphasis: { label: { show: true } }\r\n        },\r\n        // \r\n        textFixed: {\r\n          Alaska: [20, -20]\r\n        },\r\n      };\r\n      option.toolbox = {\r\n        show: true,\r\n        // orient: 'vertical',series-pie.encode\r\n        left: 'left',\r\n        top: 'top',\r\n        feature: {\r\n          dataView: { readOnly: false },\r\n          restore: {},\r\n          saveAsImage: {}\r\n        }\r\n      },\r\n        option.visualMap = {\r\n          left: 'right',\r\n          min: 0,\r\n          max: 9,\r\n          inRange: {\r\n            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          },\r\n          text: ['High', 'Low'],           // \r\n          calculable: true\r\n        },\r\n        option.series.encode = {\r\n          x: [this.firstBindingFeildList[0]],\r\n          y: [this.secondBindingFeildList[0]],\r\n        };\r\n    }\r\n    if (this.chartsType === 'effectScatter') {\r\n      option.geo = {\r\n        map: 'china',\r\n        center: [115, 30],\r\n        zoom: 1,\r\n        roam: 'scale', // \r\n        itemStyle: {\t\t\t\t\t// \r\n          normal: {\t\t\t\t\t// \r\n            areaColor: '#323c48',\r\n            borderColor: '#111'\r\n          },\r\n          emphasis: {\t\t\t\t\t// \r\n            areaColor: '#2a333d'\r\n          }\r\n        }\r\n      };\r\n      option.tooltip = {\r\n        padding: 10,\r\n        backgroundColor: '#333',\r\n        borderColor: '#777',\r\n        borderWidth: 1,\r\n        // formatter: '{b}:{c}',\r\n      };\r\n      option.series = {\r\n        name: 'map',\r\n        coordinateSystem: 'geo', // series\r\n      };\r\n      option.series.encode = {\r\n        name: [this.firstBindingFeildList[0]],\r\n        lng: [this.thirdBindingFeildList[0]],\r\n        lat: [this.fourthBindingFeildList[0]],\r\n        value1: [this.secondBindingFeildList[0]],\r\n        value2: this.fifthBindingFeildList,\r\n        tooltip: [this.firstBindingFeildList[0], this.secondBindingFeildList[0]]\r\n      };\r\n      option.visualMap = [{\r\n\r\n        type: 'continuous',\r\n        top: 'top',\r\n\r\n        left: 'right',\r\n\r\n        dimension: 1,\r\n        calculable: true,\r\n        min: 0,\r\n        max: 1000,\r\n\r\n        inRange: {\r\n          color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          // colorLightness: [1, 0.5],\r\n          // \r\n        },\r\n        outOfRange: {\r\n          color: ['rgba(255,255,255,.2)']\r\n        },\r\n        controller: {\r\n          inRange: {\r\n            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          },\r\n          outOfRange: {\r\n            color: ['#444']\r\n          }\r\n        },\r\n        textStyle: {\r\n          color: '#837'\t// \r\n        }\r\n      }, { // \r\n        right: 'right',\r\n        top: 'bottom',\r\n        dimension: 2,\r\n        type: 'continuous', // \r\n        min: 0,       \t\t// \r\n        max: 1000,\t\t\t// \r\n        calculable: true,\t// \r\n        itemWidth: 30,\r\n        itemHeight: 120, // vm\r\n        // \r\n        // text: [\"2\"],\r\n        textGap: 30, // \r\n        inRange: {\r\n          symbolSize: [5, 30],\r\n          // \r\n        },\r\n        outOfRange: {\r\n          symbolSize: [5, 30],\r\n          color: ['rgba(255,255,255,.2)']\r\n        },\r\n        textStyle: {\r\n          color: '#837'\r\n        },\r\n        controller: {\r\n          inRange: {\r\n            color: ['#c23531']\r\n          },\r\n          outOfRange: {\r\n            color: ['#444']\r\n          }\r\n        }\r\n      }];\r\n      if (this.fifthBindingFeildList !== []) {\r\n        option.series.encode.tooltip.push(this.fifthBindingFeildList[0]);\r\n      }\r\n    }\r\n    // console.log(JSON.stringify(option));\r\n    return option;\r\n  }\r\n\r\n  getGroupSummarySetOption() {\r\n    const option: any = {\r\n      dimensions: null,\r\n      indicators: null\r\n    };\r\n    try {\r\n      if (this.dimensionFieldList && this.dimensionFieldList.length) {\r\n        option.dimensions = this.dimensionFieldList;\r\n      }\r\n      if (this.indicatorFieldList && this.indicatorFieldList.length) {\r\n        option.indicators = this.indicatorFieldList;\r\n      }\r\n      return option;\r\n    } catch (e) {\r\n      return option;\r\n    }\r\n  }\r\n\r\n  myIsNaN(value: any) {\r\n    return !isNaN(value);\r\n  }\r\n}\r\n","import { Component, Input, OnInit, OnChanges, SimpleChanges, Injector, EventEmitter } from '@angular/core';\r\nimport { findIndex } from 'lodash-es';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\n@Component({\r\n  selector: 'charts-style',\r\n  templateUrl: './charts-style.component.html',\r\n  styleUrls: ['./charts-style.component.css']\r\n})\r\nexport class ChartsStyleComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  @Input() chartsType: any;\r\n  chartsStyle: any;\r\n  title = '';\r\n  xAxisAlignData: any = [\r\n    { name: '', value: 'left' },\r\n    { name: '', value: 'center' },\r\n    { name: '', value: 'right' }\r\n  ];\r\n  xAxisAlignValue = this.xAxisAlignData[1].value;\r\n  yAxisAlignData: any = [\r\n    { name: '', value: 'top' },\r\n    { name: '', value: 'middle' },\r\n    { name: '', value: 'bottom' }\r\n  ];\r\n  yAxisAlignValue = this.yAxisAlignData[0].value;\r\n  fontFamilyData: any = [\r\n    { name: 'Microsoft YaHei', value: 'Microsoft YaHei' },\r\n    { name: 'sans-serif', value: 'sans-serif' },\r\n    { name: 'serif', value: 'serif' },\r\n    { name: 'monospace', value: 'monospace' },\r\n    { name: 'Arial', value: 'Arial' },\r\n    { name: 'Courier New', value: 'Courier New' }\r\n  ];\r\n  fontFamily = this.fontFamilyData[0].value;\r\n  fontSizeData: any = [\r\n    { name: '10', value: '10', },\r\n    { name: '15', value: '15', },\r\n    { name: '20', value: '20', },\r\n    { name: '25', value: '25', },\r\n    { name: '30', value: '30', },\r\n    { name: '35', value: '35', },\r\n    { name: '40', value: '40', },\r\n  ];\r\n  fontSize = this.fontSizeData[3].value;\r\n\r\n  textStyle: any = {\r\n    lineHeight: 25,\r\n    fontSize: 25,\r\n    fontStyle: 'normal',\r\n    fontWight: 'normal',\r\n    fontFamily: this.fontFamily || 'Microsoft YaHei',\r\n    color: 'black'\r\n  };\r\n\r\n  legendAlignData: any = [\r\n    { name: '', value: 'auto' },\r\n    { name: '', value: 'left' },\r\n    { name: '', value: 'right' }\r\n  ];\r\n  legendAlignValue = this.legendAlignData[0].value;\r\n  orientData: any = [\r\n    { name: '', value: 'horizontal' },\r\n    { name: '', value: 'vertical' }\r\n  ];\r\n  legendOrientValue: any = this.orientData[0].value;\r\n  visualMapOrientValue: any = this.orientData[1].value;\r\n  itemGap = 10;\r\n  itemWidth = 25;\r\n  itemHeight = 14;\r\n  visualMapTypeData: any = [\r\n    { name: 'continuous', value: 'continuous' },\r\n    { name: 'piecewise', value: 'piecewise' }\r\n  ];\r\n  visualMapTypeValue = this.visualMapTypeData[0].value;\r\n\r\n  // title.iddata\r\n  dataMultiple: any = [\r\n    { name: '', value: 'side' },\r\n    { name: '', value: 'pile' }\r\n  ];\r\n  dataMultipleValue = this.dataMultiple[0].value;\r\n  vmTopValue = this.yAxisAlignData[0].value;\r\n  vmLeftValue = this.xAxisAlignData[2].value;\r\n  vmTop: any;\r\n  vmBottom: any = 0;\r\n  vmLeft: any;\r\n  vmRight: any = 0;\r\n\r\n  visualMapPieces: any = [];\r\n  visualMapCategories: any = [];\r\n\r\n  vmPiecesMin: any;\r\n  vmPiecesMax: any;\r\n  vmCategories: any;\r\n\r\n  isWeight = false;\r\n  isStyle = false;\r\n  cBtn = false;\r\n  pBtn = false;\r\n  tBtn = false;\r\n  size: any = {};\r\n  vmMax: any;\r\n  vmMin: any;\r\n  localizeService: LocalizeService;\r\n  customOption: any;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.xAxisAlignData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.xAxisAlignData');\r\n    this.yAxisAlignData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.yAxisAlignData');\r\n    this.fontFamilyData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.fontFamilyData');\r\n    this.legendAlignData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.legendAlignData');\r\n    this.orientData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.orientData');\r\n    this.visualMapTypeData = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.visualMapTypeData');\r\n    this.dataMultiple = this.localizeService.getValue('ideCmp.chartsSchemaManager.chartsStyle.dataMultiple');\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const self = this;\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.customOption) {\r\n              this.customOption = JSON.stringify(newValue.schemaValue.customOption);\r\n            } else {\r\n              this.customOption = '';\r\n            }\r\n            if (newValue.schemaValue && newValue.schemaValue.chartsStyle) {\r\n              const str = JSON.stringify(newValue.schemaValue.chartsStyle);\r\n              this.chartsStyle = JSON.parse(str);\r\n              this.title = this.chartsStyle.title.text || '';\r\n              let index = findIndex(this.xAxisAlignData, function (c: any) {\r\n                return c.value === (self.chartsStyle.title.x || 'center');\r\n              });\r\n              this.xAxisAlignValue = this.xAxisAlignData[index].value;\r\n              index = findIndex(this.yAxisAlignData, function (c: any) {\r\n                return c.value === (self.chartsStyle.title.y || 'top');\r\n              });\r\n              this.yAxisAlignValue = this.yAxisAlignData[index].value;\r\n              this.textStyle.lineHeight = this.chartsStyle.title.textStyle.lineHeight || 25;\r\n              this.textStyle.fontSize = this.chartsStyle.title.textStyle.fontSize || 25;\r\n              this.textStyle.fontStyle = this.chartsStyle.title.textStyle.fontStyle || 'normal';\r\n              this.textStyle.fontWight = this.chartsStyle.title.textStyle.fontWight || 'normal';\r\n\r\n              this.textStyle.fontFamily = this.chartsStyle.title.textStyle.fontFamily || 'Microsoft YaHei';\r\n              index = findIndex(this.fontFamilyData, function (c: any) {\r\n                return c.value === (self.textStyle.fontFamily || 'Microsoft YaHei');\r\n              });\r\n              this.fontFamily = this.fontFamilyData[index].value;\r\n\r\n              this.textStyle.color = this.chartsStyle.title.textStyle.color || 'black';\r\n              index = findIndex(this.legendAlignData, function (c: any) {\r\n                return c.value === (self.chartsStyle.legend.align || 'auto');\r\n              });\r\n              this.legendAlignValue = this.legendAlignData[index].value;\r\n              index = findIndex(this.orientData, function (c: any) {\r\n                return c.value === (self.chartsStyle.legend.orient || 'horizontal');\r\n              });\r\n              this.legendOrientValue = this.orientData[index].value;\r\n              this.itemGap = this.chartsStyle.legend.itemGap;\r\n              this.itemWidth = this.chartsStyle.legend.itemWidth;\r\n              this.itemHeight = this.chartsStyle.legend.itemHeight;\r\n              index = findIndex(this.visualMapTypeData, function (c: any) {\r\n                return c.value === (self.chartsStyle.visualMap.type || 'continuous');\r\n              });\r\n              this.visualMapTypeValue = this.visualMapTypeData[index].value;\r\n              index = findIndex(this.dataMultiple, function (c: any) {\r\n                return c.value === (self.chartsStyle.title.id || 'side');\r\n              });\r\n              this.dataMultipleValue = this.dataMultiple[index].value;\r\n              index = findIndex(this.yAxisAlignData, function (c: any) {\r\n                return c.value === (self.chartsStyle.visualMap.top || 'top');\r\n              });\r\n              this.vmTopValue = this.yAxisAlignData[index].value;\r\n              this.vmBottom = this.chartsStyle.visualMap.bottom || null;\r\n              index = findIndex(this.xAxisAlignData, function (c: any) {\r\n                return c.value === (self.chartsStyle.visualMap.left || 'right');\r\n              });\r\n              this.vmLeftValue = this.xAxisAlignData[index].value;\r\n              this.vmRight = this.chartsStyle.visualMap.right || null;\r\n              this.visualMapPieces = this.chartsStyle.visualMap.pieces || [];\r\n              this.vmMin = this.chartsStyle.visualMap.min || 0; // \r\n              this.vmMax = this.chartsStyle.visualMap.max || 1000;\r\n              this.visualMapCategories = this.chartsStyle.visualMap.categories || [];\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  handleWeight() {\r\n    this.isWeight = !this.isWeight;\r\n    if (this.isWeight) {\r\n      this.textStyle.fontWeight = 'bold';\r\n    } else {\r\n      this.textStyle.fontWeight = 'normal';\r\n    }\r\n  }\r\n\r\n  handleStyle() {\r\n    this.isStyle = !this.isStyle;\r\n    if (this.isStyle) {\r\n      this.textStyle.fontStyle = 'italic';\r\n    } else {\r\n      this.textStyle.fontStyle = 'normal';\r\n    }\r\n  }\r\n\r\n  handleBinding(type: string) {\r\n    const self = this;\r\n    let index = -1;\r\n    if (type === 'c') {\r\n      if (!this.vmCategories) {\r\n        return;\r\n      }\r\n      index = findIndex(this.visualMapCategories, function (c: any) {\r\n        return c === self.vmCategories;\r\n      });\r\n      if (index < 0) {\r\n        this.visualMapCategories.push(this.vmCategories);\r\n      }\r\n      this.vmCategories = null;\r\n    } else if (type === 'v') {\r\n      if (!this.vmCategories) {\r\n        return;\r\n      }\r\n      index = findIndex(this.visualMapCategories, function (c: any) {\r\n        return c === self.vmCategories;\r\n      });\r\n      if (index < 0) {\r\n        this.visualMapCategories.push(this.vmCategories);\r\n      }\r\n      this.vmCategories = null;\r\n    } else if (type === 't') {\r\n      if (!this.vmMin || !this.vmMax) {\r\n        // alert('');\r\n        return;\r\n      }\r\n      if (this.vmPiecesMin && this.vmPiecesMax) { }\r\n\r\n    } else {\r\n      if (!this.vmPiecesMin && !this.vmPiecesMax) {\r\n        return;\r\n      }\r\n\r\n      if (this.vmPiecesMin && !this.vmPiecesMax) {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.min === self.vmPiecesMin;\r\n        });\r\n        if (index < 0) {\r\n          this.visualMapPieces.push({ min: this.vmPiecesMin });\r\n        }\r\n      } else if (!this.vmPiecesMin && this.vmPiecesMax) {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.max === self.vmPiecesMax;\r\n        });\r\n        if (index < 0) {\r\n          this.visualMapPieces.push({ max: this.vmPiecesMax });\r\n        }\r\n      } else {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.min === self.vmPiecesMin && c.max === self.vmPiecesMax;\r\n        });\r\n        if (index < 0) {\r\n          this.visualMapPieces.push({ min: this.vmPiecesMin, max: this.vmPiecesMax });\r\n        }\r\n      }\r\n      this.vmPiecesMin = this.vmPiecesMax = null;\r\n    }\r\n    this.handleAddBtnDisabled();\r\n  }\r\n\r\n  handleRemove(type: string, feild: any) {\r\n    let index = -1;\r\n    if (type === 'c') {\r\n      index = findIndex(this.visualMapCategories, function (c: any) {\r\n        return c === feild;\r\n      });\r\n      this.visualMapCategories.splice(index, 1);\r\n    } else {\r\n      if (feild.min && !feild.max) {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.min === feild.min;\r\n        });\r\n        this.visualMapPieces.splice(index, 1);\r\n      } else if (!feild.min && feild.max) {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.max === feild.max;\r\n        });\r\n        this.visualMapPieces.splice(index, 1);\r\n      } else {\r\n        index = findIndex(this.visualMapPieces, function (c: any) {\r\n          return c.min === feild.min && c.max === feild.max;\r\n        });\r\n        this.visualMapPieces.splice(index, 1);\r\n      }\r\n    }\r\n    this.handleAddBtnDisabled();\r\n  }\r\n\r\n  private handleAddBtnDisabled() {\r\n    if (this.visualMapCategories.length) {\r\n      this.pBtn = true;\r\n    } else {\r\n      this.pBtn = false;\r\n    }\r\n    if (this.visualMapPieces.length) {\r\n      this.cBtn = true;\r\n    } else {\r\n      this.cBtn = false;\r\n    }\r\n  }\r\n\r\n  getChartsStyleOption() {\r\n    const option: any = {\r\n      title: {\r\n        id: this.dataMultipleValue || 'side',\r\n        text: this.title,\r\n        x: this.xAxisAlignValue || 'right',\r\n        y: this.yAxisAlignValue || 'top',\r\n        textStyle: this.textStyle\r\n      },\r\n      legend: {\r\n        itemGap: this.itemGap,\r\n        itemWidth: this.itemWidth,\r\n        itemHeight: this.itemHeight,\r\n        align: (this.legendAlignValue) || 'auto',\r\n        orient: (this.legendOrientValue) || 'horizontal'\r\n      },\r\n      visualMap: [{\r\n        type: (this.visualMapTypeValue) || 'continuous',\r\n        top: (this.vmTopValue) || 'top',\r\n        bottom: this.vmBottom,\r\n        left: (this.vmLeftValue) || 'right',\r\n        right: this.vmRight,\r\n        dimension: 1,\r\n        calculable: true,\r\n        min: this.vmMin,\r\n        max: this.vmMax,\r\n        pieces: this.visualMapPieces, // \r\n        categories: this.visualMapCategories, // \r\n        inRange: {\r\n          color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          // colorLightness: [1, 0.5],\r\n          // \r\n        },\r\n        outOfRange: {\r\n          color: ['rgba(255,255,255,.2)']\r\n        },\r\n        controller: {\r\n          inRange: {\r\n            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          },\r\n          outOfRange: {\r\n            color: ['#444']\r\n          }\r\n        },\r\n        textStyle: {\r\n          color: '#837'\t// \r\n        }\r\n      }]\r\n    };\r\n    if (this.visualMapTypeValue && this.visualMapTypeValue === 'continuous') {\r\n      option.visualMap.calculable = true;\r\n    } else {\r\n      delete option.visualMap.calculable;\r\n    }\r\n    if (this.chartsType === 'effectScatter') {\r\n      option.visualMap.push({ // \r\n        right: 'right',\r\n        top: 'bottom',\r\n        dimension: 2,\r\n        type: 'continuous', // \r\n        min: this.vmMin,       \t\t// \r\n        max: this.vmMax,\t\t\t// \r\n        calculable: true,\t// \r\n        itemWidth: 30,\r\n        itemHeight: 120, // vm\r\n        // \r\n        // text: [\"2\"],\r\n        textGap: 30, // \r\n        inRange: {\r\n          symbolSize: [5, 30],\r\n          // \r\n        },\r\n        outOfRange: {\r\n          symbolSize: [5, 30],\r\n          color: ['rgba(255,255,255,.2)']\r\n        },\r\n        textStyle: {\r\n          color: '#837'\r\n        },\r\n        controller: {\r\n          inRange: {\r\n            color: ['#c23531']\r\n          },\r\n          outOfRange: {\r\n            color: ['#444']\r\n          }\r\n        }\r\n      });\r\n      if (option.visualMap[0].top === 'bottom' && option.visualMap.left === 'right') {\r\n        option.visualMap[1].top = 'top';\r\n      } else {\r\n        option.visualMap[1].top = 'bottom';\r\n      }\r\n    }\r\n    return option;\r\n  }\r\n\r\n  getCustomOption() {\r\n    if (this.customOption) {\r\n      try {\r\n        return JSON.parse(this.customOption);\r\n      } catch (e) {\r\n        return 'error';\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Injector, HostBinding, ViewEncapsulation, Input, Output, EventEmitter, ViewChild } from '@angular/core';\r\nimport { ChartsTypeComponent } from './charts-type/charts-type.component';\r\nimport { ChartsDataComponent } from './charts-data/charts-data.component';\r\nimport { ChartsStyleComponent } from './charts-style/charts-style.component';\r\nimport { FarrisTabsComponent } from '@farris/ui-tabs';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\n@Component({\r\n  selector: 'charts-schema-editor',\r\n  templateUrl: './charts-schema-editor.component.html',\r\n  styleUrls: ['./charts-schema-editor.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ChartsSchemaEditorComponent implements OnInit {\r\n  @HostBinding('class') cls = \"f-utils-flex-column h-100\";\r\n  @Input() currSchema: any;\r\n  @Input() colList: any;\r\n  @Input() controlType: any;\r\n  @Output() tabsSelectChange = new EventEmitter<any>();\r\n  @ViewChild(ChartsTypeComponent) chartsTypeCmp: ChartsTypeComponent;\r\n  @ViewChild(ChartsDataComponent) chartsDataCmp: ChartsDataComponent;\r\n  @ViewChild(ChartsStyleComponent) chartsStyleCmp: ChartsStyleComponent;\r\n  @ViewChild(FarrisTabsComponent) tabs: FarrisTabsComponent;\r\n  chartsType: any;\r\n  localizeService: LocalizeService;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n  }\r\n  ngOnInit() {\r\n  }\r\n\r\n  handleTabSelect(data: any) {\r\n    const option = this.getOption();\r\n    this.tabsSelectChange.emit(option);\r\n  }\r\n\r\n  chartTypeChange(value: any) {\r\n    this.chartsType = value;\r\n  }\r\n\r\n  getOption() {\r\n    const option = {};\r\n    if (this.chartsTypeCmp) {\r\n      option['chartsType'] = this.chartsTypeCmp.getChartsTypeOption();\r\n      // console.log(\"chartsType:\");\r\n      // console.log(option['chartsType']);\r\n    }\r\n    if (this.chartsDataCmp) {\r\n      option['chartsData'] = this.chartsDataCmp.getChartsDataOption();\r\n      option['groupSummarySet'] = this.chartsDataCmp.getGroupSummarySetOption();\r\n      // console.log(\"chartsData:\");\r\n      // console.log(option['chartsData']);\r\n    }\r\n    if (this.chartsStyleCmp) {\r\n      option['chartsStyle'] = this.chartsStyleCmp.getChartsStyleOption();\r\n      option['customOption'] = this.chartsStyleCmp.getCustomOption();\r\n      // console.log(\"chartsStyle:\");\r\n      // console.log(option['chartsStyle']);\r\n    }\r\n    return option;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { SchemaManagerService, LcpService } from '@qdp/common';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\n@Injectable()\r\nexport class SchemaService {\r\n  schemaInfo = new Subject<any>();\r\n  colList = new Subject<any>();\r\n  pageInfoChange = new Subject<any>();\r\n  operationChange = new Subject<any>();\r\n\r\n  constructor(private schemaManager: SchemaManagerService, private lcpService: LcpService) {\r\n    this.schemaManager.schemaInfoChange.subscribe(value => {\r\n      this.schemaInfo.next(value);\r\n    });\r\n    this.schemaManager.colList.subscribe(value => {\r\n      this.colList.next(value);\r\n    });\r\n    this.lcpService.pageInfoChange.subscribe(value => {\r\n      this.pageInfoChange.next(value);\r\n    });\r\n    this.schemaManager.operationChange.subscribe(value => {\r\n      this.operationChange.next(value);\r\n    });\r\n  }\r\n\r\n  getSchemaList(queryId: string, userId: string, organizationId: string, queryRelativeUrl: any, groupType?: any): Observable<any> {\r\n    if (groupType) {\r\n      return this.schemaManager.getSchemaListByGroupType(queryId, userId, organizationId, groupType, queryRelativeUrl);\r\n    } else {\r\n      return this.schemaManager.getSchemaList(queryId, userId, organizationId, queryRelativeUrl);\r\n    }\r\n  }\r\n\r\n  getSchema(id: string, queryId: string, queryRelativeUrl: any, groupType?: any, organizationId?: any): Observable<any> {\r\n    return this.schemaManager.getSchema(id, queryId, queryRelativeUrl, groupType, organizationId);\r\n  }\r\n\r\n  saveSchema(schema: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.schemaManager.saveSchema(schema, queryRelativeUrl);\r\n  }\r\n\r\n  deleteSchema(id: string, queryId: string, queryRelativeUrl: any, groupType?: any, organizationId?: any): Observable<any> {\r\n    return this.schemaManager.deleteSchema(id, queryId, queryRelativeUrl, groupType, organizationId);\r\n  }\r\n\r\n  getSpreadTemplate(id: string, queryId: string, dynamicCols: any, queryRelativeUrl: any, sheme?: any, frozenCols?: any, groupType?: any): Observable<any> {\r\n    return this.schemaManager.getSpreadTemplate(id, queryId, dynamicCols, queryRelativeUrl, sheme, frozenCols, groupType);\r\n  }\r\n\r\n  getData(param: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.lcpService.getData(param, queryRelativeUrl);\r\n  }\r\n\r\n  getCol(params: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.lcpService.getCol(params, queryRelativeUrl);\r\n  }\r\n\r\n  getOperation() {\r\n    return this.schemaManager.getOperation();\r\n  }\r\n}\r\n","import { Component, OnInit, OnChanges, SimpleChanges, Input, Injector, OnDestroy } from '@angular/core';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { LcpService } from '@qdp/common';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'title-editor',\r\n  templateUrl: './title-editor.component.html',\r\n  styleUrls: ['./title-editor.component.css']\r\n})\r\nexport class TitleEditorComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() currSchema: any;\r\n  titleOption: any;\r\n  title: any;\r\n  subTitles: any[];\r\n  columnSizeData: any = [\r\n    60, 90, 160, 80, 80\r\n  ];\r\n  subTitleType: any = [\r\n    { label: '', value: 0 },\r\n    { label: '', value: 1 }\r\n  ];\r\n  subTitleAlign: any = [\r\n    { label: '', value: 0 },\r\n    { label: '', value: 1 },\r\n    { label: '', value: 2 }\r\n  ];\r\n  private newSubTitle = {\r\n    type: 0,\r\n    text: '',\r\n    level: 1,\r\n    align: 0\r\n  };\r\n  localizeService: LocalizeService;\r\n\r\n  alignData = [];\r\n\r\n  currentSubTitle: { index: number, subTitle: any } = null;\r\n\r\n  lcpService: LcpService;\r\n  private subscriptions: Subscription[];\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.lcpService = this.injector.get(LcpService);\r\n    this.subTitleType = this.localizeService.getValue('ideCmp.schemaManager.titleOption.subTitleData');\r\n    this.subTitleAlign = this.localizeService.getValue('ideCmp.schemaManager.titleOption.subTitleAlign');\r\n  }\r\n\r\n  ngOnInit() {\r\n    const self = this;\r\n    if (!this.subscriptions) {\r\n      this.subscriptions = [];\r\n    }\r\n    this.subscriptions.push(self.lcpService.variablesChange.subscribe((data: any) => {\r\n      if (data) {\r\n        for (const key in data) {\r\n          // if (key === 'securityLevel') { continue; }\r\n          if (self.alignData.findIndex(x => x.name.replace(x.name.substring(x.name.indexOf('[')), \"\").replace(/ /g, \"\") === key) < 0) {\r\n            self.alignData.push({ name: key + '   [' + data[key] + ']', value: key });\r\n          }\r\n        }\r\n      }\r\n    }));\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.titleOption) {\r\n              const str = JSON.stringify(newValue.schemaValue.titleOption);\r\n              this.titleOption = JSON.parse(str);\r\n              this.title = this.titleOption.title;\r\n              this.subTitles = this.titleOption.subTitles || [];\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.subscriptions && this.subscriptions.length) {\r\n      for (const subscription of this.subscriptions) {\r\n        subscription.unsubscribe();\r\n      }\r\n    }\r\n  }\r\n\r\n  insertSubTitle(index: number) {\r\n    const _newSubTitle = Object.assign({}, this.newSubTitle);\r\n    // if (index === 0) {\r\n    //   this.subTitles.unshift(_newSubTitle);\r\n    // } else {\r\n    this.subTitles.splice(index + 1, 0, _newSubTitle);\r\n    // }\r\n  }\r\n\r\n  removeSubTitle(index: number) {\r\n    this.subTitles.splice(index, 1);\r\n\r\n    if (this.currentSubTitle) {\r\n      if (index === this.currentSubTitle.index) {\r\n        this.currentSubTitle = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  onAddSubTitle() {\r\n    this.subTitles = [...this.subTitles];\r\n    this.subTitles.push(Object.assign({}, this.newSubTitle));\r\n  }\r\n\r\n  selected($event) {\r\n    this.currentSubTitle = $event;\r\n  }\r\n\r\n  isSelected($event: number) {\r\n    if (this.currentSubTitle) {\r\n      return this.currentSubTitle.index === $event;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getTitleOption() {\r\n    if (this.titleOption) {\r\n      this.titleOption.title = this.title;\r\n      this.titleOption.subTitles = this.subTitles;\r\n    }\r\n    return this.titleOption;\r\n  }\r\n}\r\n","import { Component, OnInit, Input, OnChanges, TemplateRef, SimpleChanges, ViewChild, AfterViewInit, Injector, Inject, LOCALE_ID } from '@angular/core';\r\nimport { find, findIndex } from 'lodash-es';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { EventBus, RtfServices } from '@qdp/common';\r\nimport { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';\r\n\r\n@Component({\r\n  selector: 'column-editor',\r\n  templateUrl: './column-editor.component.html',\r\n  styleUrls: ['./column-editor.component.css']\r\n})\r\nexport class ColumnEditorComponent implements OnInit, OnChanges, AfterViewInit {\r\n  @Input() currSchema: any;\r\n  @Input() colList: any[];\r\n  @Input() controlType: string;\r\n  @ViewChild('colToolbar') colToolbar: any;\r\n  @ViewChild('schemaTree') schemaTree: TreeTableComponent;\r\n  @ViewChild('nameCell') nameCell: TemplateRef<any>;\r\n  @ViewChild('bindFieldCell') bindFieldCell: TemplateRef<any>;\r\n  @ViewChild('colWidthCell') colWidthCell: TemplateRef<any>;\r\n  @ViewChild('colAlignCell') colAlignCell: TemplateRef<any>;\r\n  @ViewChild('visibleCell') visibleCell: TemplateRef<any>;\r\n  @ViewChild('isFixedCell') isFixedCell: TemplateRef<any>;\r\n  @ViewChild('autoFixCell') autoFixCell: TemplateRef<any>;\r\n  currTreeNodeId: any;\r\n  currTreeNode: any;\r\n  size: any = {};\r\n  columnOption: any;\r\n  colName = '';\r\n  colWidth = 150;\r\n  colVisible = true;\r\n  colFixed = false;\r\n  colWrap = false;\r\n  colAutoFit = false;\r\n  schemaTreeData: any = [];\r\n  colListData: any = [];\r\n  colSelectValue: any;\r\n  alignData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 }\r\n  ];\r\n  alignSelectValue: any = this.alignData[1].value;\r\n  formatTypeData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 }\r\n  ];\r\n  formatTypeSelectValue: any = this.formatTypeData[0].value;\r\n  formatText = '';\r\n  sortData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 }\r\n  ];\r\n  sortSelectValue: any = this.sortData[0].value;\r\n  aggreData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 },\r\n    { name: '', value: 4 },\r\n    { name: '', value: 5 }\r\n  ];\r\n  pageSelectValue: any = this.aggreData[0].value;\r\n  pageText = '';\r\n  colIsGroup: any = false;\r\n  colIsRed: any = false;\r\n  groupSelectValue: any = this.aggreData[0].value;\r\n  groupSubSelectValue: any = this.aggreData[0].value;\r\n  groupText = '';\r\n  totalSelectValue: any = this.aggreData[0].value;\r\n  totalText = '';\r\n  formatField = '';\r\n  dimensionData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 }\r\n  ];\r\n  enumType: any = [\r\n    { name: '', value: '0' },\r\n    { name: '', value: '1' },\r\n    { name: '', value: '2' }\r\n  ];\r\n  dataShowOption: any = [\r\n    { name: '', value: -1 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 }\r\n  ];\r\n  type: any = 'String';\r\n  dimensionSelectValue: any = this.dimensionData[0].value;\r\n  showTypeSelectValue: any = this.enumType[0].value;\r\n  rowColor: any;\r\n  newNodeData: any = {\r\n    data: {\r\n      name: '',\r\n      bindField: '',\r\n      colWidth: 150,\r\n      visible: true,\r\n      isFixed: false,\r\n      wordWrap: false,\r\n      autoFit: false,\r\n      align: 1,\r\n      formatType: 0,\r\n      formattor: '',\r\n      formatField: '',\r\n      sort: 0,\r\n      pageAggre: 0,\r\n      pageAggreText: '',\r\n      isGroup: false,\r\n      groupAggre: 0,\r\n      groupSubAggre: 0,\r\n      groupAggreText: '',\r\n      totalAggre: 0,\r\n      totalAggreText: '',\r\n      dimension: '',\r\n      rowColor: '',\r\n      type: 'string',\r\n      showType: '0'\r\n    },\r\n    expanded: true,\r\n    children: []\r\n  };\r\n  cols = [];\r\n\r\n  colIsGroupId: any = 'colIsGroupId' + EventBus.guid();\r\n  colVisibleId: any = 'colVisibleId' + EventBus.guid();\r\n  colFixedId: any = 'colFixedId' + EventBus.guid();\r\n  colWrapId: any = 'colWrapId' + EventBus.guid();\r\n  colAutoFitId: any = 'colAutoFitId' + EventBus.guid();\r\n  colIsRedId: any = 'colIsRedId' + EventBus.guid();\r\n\r\n  localizeService: LocalizeService;\r\n  localId: string;\r\n  formInline = true;\r\n  colInfoChanged = true;\r\n  editable = [];\r\n  isOrNotPaging = true;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.localId = this.injector.get(LOCALE_ID) || DEFAULT_LANGUAGE;\r\n    this.formInline = this.localId.toLowerCase() === DEFAULT_LANGUAGE || this.localId.toLowerCase() === 'zh-cht';\r\n    this.alignData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.alignData');\r\n    this.formatTypeData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.formatTypeData');\r\n    this.sortData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.sortData');\r\n    this.aggreData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.aggregateData');\r\n    this.dimensionData = this.localizeService.getValue('ideCmp.schemaManager.columnOption.dimensionData');\r\n    this.enumType = this.localizeService.getValue('ideCmp.schemaManager.columnOption.enumType');\r\n    this.dataShowOption = this.localizeService.getValue('ideCmp.schemaManager.columnOption.dataShowOption');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.cols = [\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.name'), width: 200, template: this.nameCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.binding'), width: 100, template: this.bindFieldCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.colWidth'), width: 80, template: this.colWidthCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.align'), width: 80, template: this.colAlignCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.show'), width: 80, template: this.visibleCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.fixColumn'), width: 80, template: this.isFixedCell },\r\n      { field: '', title: this.localizeService.getValue('ideCmp.schemaManager.columnOption.dataShow'), width: 80, template: this.autoFixCell }\r\n    ];\r\n    const queryId = this.currSchema && this.currSchema.queryId ? this.currSchema.queryId : '';\r\n    const eventId = RtfServices.getTabId(queryId);\r\n    EventBus.register('pagingModeChanges', this.handlePagingModeChanged.bind(this), eventId);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const self = this;\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.otherOption) {\r\n              this.isOrNotPaging = newValue.schemaValue.otherOption.loadDataType == 1;\r\n            }\r\n            if (newValue.schemaValue && newValue.schemaValue.columnOption) {\r\n              this.columnOption = this.objectCopy(newValue.schemaValue.columnOption);\r\n              if (this.columnOption && this.columnOption.colList && this.columnOption.colList.length) {\r\n                if (newValue.id && newValue.id !== '1' && newValue.id !== 'prefab') {\r\n                  this.initColListData(this.columnOption.colList);\r\n                }\r\n                this.editable = [];\r\n                this.schemaTreeData = [];\r\n                this.columnOption.colList.forEach((col: any) => {\r\n                  col.id = EventBus.guid();\r\n                  this.editable.push({ id: col.id, editable: false });\r\n                  this.schemaTreeData.push({ data: col, expanded: true, children: [] });\r\n                  if (col.childList && col.childList.length) {\r\n                    const childList = this.objectCopy(col.childList);\r\n                    col.childList = [];\r\n                    this.recursiveInitTreeData(childList, this.schemaTreeData[this.schemaTreeData.length - 1]);\r\n                  }\r\n                });\r\n                this.schemaTree.updateSerializedValue();\r\n                this.currTreeNode = this.schemaTreeData[0];\r\n                this.currTreeNodeId = this.currTreeNode.data.id;\r\n                this.initColInfo();\r\n\r\n                setTimeout(function () {\r\n                  self.schemaTree.selectNode(self.currTreeNodeId);\r\n                }, 200);\r\n              }\r\n            }\r\n            break;\r\n          case 'colList':\r\n            if (newValue && newValue.length && this.currSchema) { // &&(!this.currSchema.id || '1,prefab,public_schema'.indexOf(this.currSchema.id) >= 0)\r\n              this.initColListData(newValue);\r\n              if (this.currTreeNode && this.currTreeNode.data) {\r\n                if (this.currTreeNode.data.bindField) {\r\n                  this.colSelectValue = find(this.colListData, function (c: any) { return c.value === self.currTreeNode.data.bindField; }).value;\r\n                }\r\n                if (this.currTreeNode.data.formatField) {\r\n                  this.formatField = find(this.colListData, function (c: any) { return c.value === self.currTreeNode.data.formatField; }).value;\r\n                }\r\n              }\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  handleAddTreeNode() {\r\n    const node = JSON.parse(JSON.stringify(this.newNodeData));\r\n    node.data.id = EventBus.guid();\r\n    if (this.currTreeNode) {\r\n      this.currTreeNode.children.push(node);\r\n    } else {\r\n      this.schemaTreeData.push(node);\r\n    }\r\n    this.editable.push({ id: node.data.id, editable: true });\r\n    this.schemaTree.updateSerializedValue();\r\n    this.schemaTree.selectNode(node.data.id);\r\n  }\r\n\r\n  handleRemoveTreeNode() {\r\n    const self = this;\r\n    if (this.currTreeNode) {\r\n      if (this.currTreeNode.parent) {\r\n        const index = findIndex(this.currTreeNode.parent.children, function (n: any) { return n.data.id === self.currTreeNode.data.id; });\r\n        this.currTreeNode.parent.children.splice(index, 1);\r\n      } else {\r\n        const index = findIndex(this.schemaTreeData, function (n: any) { return n.data.id === self.currTreeNode.data.id; });\r\n        this.schemaTreeData.splice(index, 1);\r\n      }\r\n    }\r\n    this.schemaTree.updateSerializedValue();\r\n    this.currTreeNode = undefined;\r\n    this.currTreeNodeId = undefined;\r\n  }\r\n\r\n  handleTreeNodeSelected(data: any) {\r\n    const self = this;\r\n    this.currTreeNode = data.node;\r\n    this.currTreeNodeId = this.currTreeNode.data.id;\r\n    this.editable.forEach((el: any) => {\r\n      el.editable = el.id === self.currTreeNodeId;\r\n    });\r\n    this.initColInfo();\r\n  }\r\n\r\n  handleTreeNodeUnSelected(data: any) {\r\n    const node = this.findTreeNodeById(data.node.data.id, []);\r\n    this.updateColInfo(node);\r\n    this.currTreeNode = undefined;\r\n  }\r\n\r\n  handleNodeUpAndDown(type: any) {\r\n    const self = this;\r\n    const index = findIndex(this.schemaTreeData, function (n: any) { return n.data.id === self.currTreeNodeId; });\r\n    if (index >= 0) {\r\n      if ((index !== 0 && (type === 'up' || type === 'top')) || (index + 1 !== this.schemaTreeData.length && type !== 'up' && type !== 'top')) {\r\n        this.updateColInfo(this.schemaTreeData[index]);\r\n        if (type === 'up') {\r\n          this.schemaTreeData[index] = this.schemaTreeData.splice(index - 1, 1, this.schemaTreeData[index])[0];\r\n        } else if (type === 'down') {\r\n          this.schemaTreeData[index] = this.schemaTreeData.splice(index + 1, 1, this.schemaTreeData[index])[0];\r\n        } else if (type === 'top') {\r\n          this.schemaTreeData[index] = this.schemaTreeData.splice(0, 1, this.schemaTreeData[index])[0];\r\n        } else if (type === 'bottom') {\r\n          this.schemaTreeData[index] = this.schemaTreeData.splice(this.schemaTreeData.length - 1, 1, this.schemaTreeData[index])[0];\r\n        }\r\n        this.schemaTree.updateSerializedValue();\r\n      }\r\n    } else {\r\n      this.schemaTreeData.forEach((node: any) => {\r\n        if (node.children && node.children.length) {\r\n          this.recursiveNodeUpAndDown(node.children, type);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleNodeLeft() {\r\n    if (this.currTreeNode && this.currTreeNode.parent) {\r\n      const self = this;\r\n      const index = findIndex(this.schemaTreeData, function (n: any) { return n.data.id === self.currTreeNode.parent.data.id; });\r\n      if (index >= 0) {\r\n        const childIndex = findIndex(self.currTreeNode.parent.children, function (n: any) { return n.data.id === self.currTreeNode.data.id; });\r\n        this.updateColInfo(self.currTreeNode.parent.children[childIndex]);\r\n        this.schemaTreeData.splice(index + 1, 0, self.currTreeNode.parent.children.splice(childIndex, 1)[0]);\r\n        this.schemaTree.updateSerializedValue();\r\n      } else {\r\n        this.schemaTreeData.forEach((node: any) => {\r\n          if (node.children && node.children.length) {\r\n            this.recursiveNodeLeft(node.children);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleNodeRight() {\r\n    if (this.currTreeNodeId) {\r\n      const self = this;\r\n      const index = findIndex(this.schemaTreeData, function (n: any) { return n.data.id === self.currTreeNodeId; });\r\n      if (index > 0) {\r\n        this.updateColInfo(this.schemaTreeData[index]);\r\n        this.schemaTreeData[index - 1].children.push(this.schemaTreeData.splice(index, 1)[0]);\r\n        this.schemaTree.updateSerializedValue();\r\n      } else {\r\n        this.schemaTreeData.forEach((node: any) => {\r\n          if (node.children && node.children.length) {\r\n            this.recursiveNodeRight(node.children);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleIsGroupClick($event: any) {\r\n    if (this.colIsGroup) {\r\n      this.groupSelectValue = this.aggreData[0].value;\r\n      this.groupText = '';\r\n      this.groupSubSelectValue = this.aggreData[0].value;\r\n      if (this.currTreeNode && this.currTreeNode.data) {\r\n        this.currTreeNode.data.visible = false;\r\n      }\r\n    }\r\n    if ($event && $event.isGroup == true) {\r\n      $event.visible = false;\r\n    }\r\n  }\r\n\r\n  handleVisible($event: any) {\r\n    if ($event.isGroup) {\r\n      $event.visible = false;\r\n    }\r\n  }\r\n\r\n  private recursiveNodeUpAndDown(children: any[], type: any) {\r\n    const self = this;\r\n    const index = findIndex(children, function (n: any) { return n.data.id === self.currTreeNodeId; });\r\n    if (index >= 0) {\r\n      if ((index !== 0 && (type === 'up' || type === 'top')) || (index + 1 !== children.length && type !== 'up' && type !== 'top')) {\r\n        this.updateColInfo(children[index]);\r\n        if (type === 'up') {\r\n          children[index] = children.splice(index - 1, 1, children[index])[0];\r\n        } else if (type === 'down') {\r\n          children[index] = children.splice(index + 1, 1, children[index])[0];\r\n        } else if (type === 'top') {\r\n          children[index] = children.splice(0, 1, children[index])[0];\r\n        } else if (type === 'bottom') {\r\n          children[index] = children.splice(children.length - 1, 1, children[index])[0];\r\n        }\r\n        this.schemaTree.updateSerializedValue();\r\n      }\r\n    } else {\r\n      children.forEach((node: any) => {\r\n        if (node.children && node.children.length) {\r\n          this.recursiveNodeUpAndDown(node.children, type);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private recursiveNodeLeft(children: any[]) {\r\n    if (this.currTreeNode && this.currTreeNode.parent) {\r\n      const self = this;\r\n      const index = findIndex(children, function (n: any) { return n.data.id === self.currTreeNode.parent.data.id; });\r\n      if (index >= 0) {\r\n        const childIndex = findIndex(self.currTreeNode.parent.children, function (n: any) { return n.data.id === self.currTreeNodeId; });\r\n        this.updateColInfo(self.currTreeNode.parent.children[childIndex]);\r\n        children.splice(index + 1, 0, self.currTreeNode.parent.children.splice(childIndex, 1)[0]);\r\n        this.schemaTree.updateSerializedValue();\r\n      } else {\r\n        children.forEach((node: any) => {\r\n          if (node.children && node.children.length) {\r\n            this.recursiveNodeLeft(node.children);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private recursiveNodeRight(children: any[]) {\r\n    const self = this;\r\n    const index = findIndex(children, function (n: any) { return n.data.id === self.currTreeNodeId; });\r\n    if (index > 0) {\r\n      this.updateColInfo(children[index]);\r\n      children[index - 1].children.push(children.splice(index, 1)[0]);\r\n      this.schemaTree.updateSerializedValue();\r\n    } else {\r\n      children.forEach((node: any) => {\r\n        if (node.children && node.children.length) {\r\n          this.recursiveNodeRight(node.children);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private initColInfo() {\r\n    const self = this;\r\n    this.colName = this.currTreeNode.data.name;\r\n    this.colWidth = this.currTreeNode.data.colWidth;\r\n    this.colVisible = this.currTreeNode.data.visible;\r\n    this.colFixed = this.currTreeNode.data.isFixed;\r\n    this.colWrap = this.currTreeNode.data.wordWrap != null && this.currTreeNode.data.wordWrap !== undefined ? this.currTreeNode.data.wordWrap : false;\r\n    this.colAutoFit = this.currTreeNode.data.autoFit != null && this.currTreeNode.data.autoFit !== undefined ? this.currTreeNode.data.autoFit : false;\r\n    this.alignSelectValue = this.alignData[this.currTreeNode.data.align].value;\r\n    let formatType = 0;\r\n    if (this.currTreeNode.data.formatType) {\r\n      formatType = this.currTreeNode.data.formatType;\r\n    }\r\n    this.formatTypeSelectValue = this.formatTypeData[formatType].value;\r\n    this.formatText = !this.formatTypeSelectValue || this.formatTypeSelectValue === 0 ? '' : this.currTreeNode.data.formattor;\r\n    this.sortSelectValue = this.sortData[this.currTreeNode.data.sort].value;\r\n    this.pageSelectValue = this.currTreeNode.data.pageAggre ? this.aggreData[this.currTreeNode.data.pageAggre].value : this.aggreData[0].value;\r\n    this.pageText = this.currTreeNode.data.pageAggreText ? this.currTreeNode.data.pageAggreText : '';\r\n    this.colIsGroup = this.currTreeNode.data.isGroup === null\r\n      || this.currTreeNode.data.isGroup === undefined ? false : this.currTreeNode.data.isGroup;\r\n\r\n    this.colIsRed = this.currTreeNode.data.isRed === null\r\n      || this.currTreeNode.data.isRed === undefined ? false : this.currTreeNode.data.isRed;\r\n    this.groupSelectValue = this.aggreData[this.currTreeNode.data.groupAggre].value;\r\n    this.groupSubSelectValue = this.aggreData[this.currTreeNode.data.groupSubAggre == null || this.currTreeNode.data.groupSubAggre === undefined ? 0 : this.currTreeNode.data.groupSubAggre].value;\r\n    this.groupText = this.currTreeNode.data.groupAggreText;\r\n    this.totalSelectValue = this.aggreData[this.currTreeNode.data.totalAggre].value;\r\n    this.totalText = this.currTreeNode.data.totalAggreText;\r\n    if (this.colListData && this.colListData.length) {\r\n      let bindField = find(this.colListData, function (c: any) { return c.value === self.currTreeNode.data.bindField; });\r\n      this.colSelectValue = bindField && bindField.value;\r\n      bindField = find(this.colListData, function (c: any) { return c.value === self.currTreeNode.data.formatField; });\r\n      this.formatField = bindField && bindField.value;\r\n    }\r\n    this.dimensionSelectValue = this.dimensionData[this.currTreeNode.data.dimension] && this.dimensionData[this.currTreeNode.data.dimension].value;\r\n    this.rowColor = this.currTreeNode.data.rowColor;\r\n    this.type = this.currTreeNode.data.type;\r\n    this.showTypeSelectValue = this.enumType[this.currTreeNode.data.showType || 0].value;\r\n  }\r\n\r\n  handleWrap(type: any) {\r\n    if (type === 'wrap') {\r\n      this.colAutoFit = this.colWrap ? false : true;\r\n    } else {\r\n      this.colWrap = this.colAutoFit ? false : true;\r\n    }\r\n  }\r\n\r\n  private updateColInfo(node: any) {\r\n    if (!node) { return; }\r\n    // node.data.name = this.colName;\r\n    // node.data.colWidth = this.colWidth;\r\n    // node.data.visible = this.colVisible;\r\n    // node.data.isFixed = this.colFixed;\r\n    // node.data.wordWrap = this.colWrap;\r\n    // node.data.autoFit = this.colAutoFit;\r\n    // node.data.align = this.alignSelectValue;\r\n    let formatType = 0;\r\n    if (this.formatTypeSelectValue) {\r\n      formatType = this.formatTypeSelectValue;\r\n    }\r\n    // node.data.bindField = this.colSelectValue;\r\n    node.data.formatType = formatType;\r\n    node.data.formattor = !formatType || formatType === 0 ? '' : this.formatText;\r\n    node.data.formatField = formatType && formatType === 1 && this.formatField ? this.formatField : '';\r\n    node.data.sort = this.sortSelectValue;\r\n    node.data.pageAggre = this.pageSelectValue;\r\n    node.data.pageAggreText = this.pageText;\r\n    node.data.isGroup = this.colIsGroup;\r\n    node.data.isRed = this.colIsRed;\r\n    node.data.groupAggre = this.groupSelectValue;\r\n    node.data.groupSubAggre = this.groupSubSelectValue;\r\n    node.data.groupAggreText = this.groupText;\r\n    node.data.totalAggre = this.totalSelectValue;\r\n    node.data.totalAggreText = this.totalText;\r\n    if (this.colIsGroup == true) {\r\n      node.data.visible = false;\r\n    }\r\n    if (this.dimensionSelectValue) {\r\n      node.data.dimension = this.dimensionSelectValue;\r\n    } else {\r\n      node.data.dimension = this.dimensionData[0].value;\r\n    }\r\n    if (this.rowColor) {\r\n      node.data.rowColor = this.rowColor;\r\n    }\r\n    if (this.showTypeSelectValue) {\r\n      node.data.showType = this.showTypeSelectValue;\r\n    }\r\n  }\r\n\r\n  private findTreeNodeById(id: any, children: any[]) {\r\n    if (!children || !children.length) {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < this.schemaTreeData.length; i++) {\r\n        if (this.schemaTreeData[i].data.id === id) {\r\n          return this.schemaTreeData[i];\r\n        }\r\n        if (this.schemaTreeData[i].children && this.schemaTreeData[i].children.length) {\r\n          const node = this.findTreeNodeById(id, this.schemaTreeData[i].children);\r\n          if (node) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < children.length; i++) {\r\n        if (children[i].data.id === id) {\r\n          return children[i];\r\n        }\r\n        if (children[i].children && children[i].children.length) {\r\n          const node = this.findTreeNodeById(id, children[i].children);\r\n          if (node) {\r\n            return node;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private recursiveInitTreeData(children: any, parent: any) {\r\n    children.forEach((node: any) => {\r\n      node.id = EventBus.guid();\r\n      this.editable.push({ id: node.id, editable: false });\r\n      parent.children.push({ data: node, expanded: true, children: [] });\r\n      if (node.childList && node.childList.length) {\r\n        const childList = this.objectCopy(node.childList);\r\n        node.childList = [];\r\n        this.recursiveInitTreeData(childList, parent.children[parent.children.length - 1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  private initColListData(newValue: any) {\r\n    newValue.forEach(col => {\r\n      this.recursiveInitColListData(null, col);\r\n    });\r\n  }\r\n\r\n  private recursiveInitColListData(children: any, col: any) {\r\n    if (col) {\r\n      if (this.colListData.findIndex((item: any) => item.value === col.bindField) < 0) {\r\n        this.colListData.push({ name: col.name + '(' + col.bindField + ')', value: col.bindField });\r\n      }\r\n      if (col.childList && col.childList.length) {\r\n        this.recursiveInitColListData(col.childList, null);\r\n      }\r\n    } else {\r\n      children.forEach((c: any) => {\r\n        if (this.colListData.findIndex((item: any) => item.value === c.bindField) < 0) {\r\n          this.colListData.push({ name: c.name + '(' + c.bindField + ')', value: c.bindField });\r\n        }\r\n        if (c.childList && c.childList.length) {\r\n          this.recursiveInitColListData(c.childList, null);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n    if (this.schemaTree) {\r\n      this.schemaTree.resize(this.size);\r\n    }\r\n  }\r\n\r\n  getColumnOption() {\r\n    const columns: any[] = [];\r\n    if (this.currTreeNode) {\r\n      this.updateColInfo(this.currTreeNode);\r\n    }\r\n    if (this.schemaTreeData && this.schemaTreeData.length) {\r\n      this.schemaTreeData.forEach((n: any) => {\r\n        const node = this.objectCopy(n.data);\r\n        delete node.id;\r\n        node.childList = [];\r\n        columns.push(node);\r\n        if (n.children && n.children.length) {\r\n          this.recursiveGetTreeNodes(n.children, node);\r\n        }\r\n      });\r\n    }\r\n    return columns;\r\n  }\r\n\r\n  onValueChange($event) {\r\n    if ($event.value === 1) {\r\n      this.currTreeNode.data.autoFit = true;\r\n      this.currTreeNode.data.wordWrap = false;\r\n    } else if ($event.value === 2) {\r\n      this.currTreeNode.data.wordWrap = true;\r\n      this.currTreeNode.data.autoFit = false;\r\n    } else {\r\n      this.currTreeNode.data.wordWrap = false;\r\n      this.currTreeNode.data.autoFit = false;\r\n    }\r\n  }\r\n\r\n  handleInfoChanged($event: any) {\r\n    this.colInfoChanged = $event === 0;\r\n  }\r\n\r\n  handleNgModelChange(treeNode: any) {\r\n    if (!this.schemaTree.selectedRow || (treeNode.id !== this.schemaTree.selectedRow.id)) {\r\n      this.schemaTree.selectNode(treeNode.id);\r\n    }\r\n  }\r\n\r\n  getComboboxName(type: any, value: any) {\r\n    let result = '';\r\n    switch (type) {\r\n      case 0:\r\n        value = value === -1 ? 0 : value;\r\n        result = this.dataShowOption[value].name;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  getAlignName(value: any) {\r\n    return !this.alignData[value].name ? '' : this.alignData[value].name;\r\n  }\r\n\r\n  findEditable(id: any) {\r\n    return find(this.editable, function (item: any) { return item.id === id; });\r\n  }\r\n\r\n  private recursiveGetTreeNodes(children: any, parent: any) {\r\n    children.forEach((n: any) => {\r\n      if (!parent.childList) {\r\n        parent.childList = [];\r\n      }\r\n      const node = this.objectCopy(n.data);\r\n      delete node.id;\r\n      node.childList = [];\r\n      parent.childList.push(node);\r\n      if (n.children && n.children.length) {\r\n        this.recursiveGetTreeNodes(n.children, node);\r\n      }\r\n    });\r\n  }\r\n\r\n  private objectCopy(obj: any) {\r\n    const str = JSON.stringify(obj);\r\n    const copyNode = JSON.parse(str);\r\n    if (copyNode.isGroup == true) {\r\n      copyNode.visible = false;\r\n    }\r\n    return copyNode;\r\n  }\r\n\r\n  private handlePagingModeChanged(pagingMode: any) {\r\n    this.isOrNotPaging = pagingMode.value === 1;\r\n    if (!this.isOrNotPaging) {\r\n      this.pageText = '';\r\n      this.pageSelectValue = 0;\r\n    } else {\r\n      this.totalText = '';\r\n      this.totalSelectValue = 0;\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, Injector } from '@angular/core';\r\nimport { LocalizeService } from '@qdp/localize';\r\n\r\n@Component({\r\n  selector: 'style-editor',\r\n  templateUrl: './style-editor.component.html',\r\n  styleUrls: ['./style-editor.component.css']\r\n})\r\nexport class StyleEditorComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  styleOption: any;\r\n  rowHeight = 35;\r\n  fontFamilyData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 },\r\n    { name: '', value: 3 },\r\n    { name: '', value: 4 },\r\n    { name: 'ARIAL', value: 5 },\r\n    { name: 'ROMAN', value: 6 },\r\n    { name: 'TIMES NEW ROMAN', value: 7 },\r\n    { name: 'VERDANA', value: 8 },\r\n    { name: 'Microsoft YaHei', value: 9 }\r\n  ];\r\n  fontFamily: any = 9;\r\n  fontSizeData: any = [\r\n    { name: 8, value: 8}, { name: 9, value: 9}, { name: 10, value: 10}, { name: 11, value: 11}, { name: 12, value: 12},\r\n    { name: 13, value: 13}, { name: 14, value: 14}, { name: 15, value: 15}, { name: 16, value: 16}, { name: 17, value: 17},\r\n    { name: 18, value: 18}, { name: 19, value: 19}, { name: 20, value: 20}, { name: 21, value: 21}, { name: 22, value: 22},\r\n    { name: 23, value: 23}, { name: 24, value: 24}, { name: 25, value: 25}, { name: 26, value: 26}, { name: 27, value: 27},\r\n    { name: 28, value: 28}, { name: 29, value: 29}, { name: 30, value: 30}, { name: 31, value: 31}, { name: 32, value: 32},\r\n    { name: 33, value: 33}, { name: 34, value: 34}, { name: 35, value: 35}, { name: 36, value: 36}, { name: 37, value: 37},\r\n    { name: 38, value: 38}, { name: 39, value: 39}, { name: 40, value: 40}\r\n  ];\r\n  // fontSizeData: any = [\r\n  //   8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\r\n  //   18, 19, 20, 21, 22, 23, 24, 25, 26,\r\n  //   27, 28, 29, 30, 31, 32, 33, 34, 35,\r\n  //   36, 37, 38, 39, 40\r\n  // ];\r\n  fontSize = 14;\r\n  fontColor = 'black';\r\n  private isWeight = false;\r\n  private isStyle = false;\r\n  private isUnderLine = false;\r\n  fontWeight = 'normal';\r\n  fontStyle = 'normal';\r\n  fontUnderLine = 'none';\r\n  titleActive = true;\r\n  subTitleActive = false;\r\n  headerActive = false;\r\n  dataAreaActive = false;\r\n  footerActive = false;\r\n  localizeService: LocalizeService;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.fontFamilyData = this.localizeService.getValue('ideCmp.schemaManager.styleOption.fontFamilyData');\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.styleOption) {\r\n              const str = JSON.stringify(newValue.schemaValue.styleOption);\r\n              this.styleOption = JSON.parse(str);\r\n              if (this.styleOption) {\r\n                if (this.titleActive) {\r\n                  this.initStyleOption('Title');\r\n                }\r\n                if (this.subTitleActive) {\r\n                  this.initStyleOption('SubTitle');\r\n                }\r\n                if (this.headerActive) {\r\n                  this.initStyleOption('Header');\r\n                }\r\n                if (this.dataAreaActive) {\r\n                  this.initStyleOption('DataArea');\r\n                }\r\n                if (this.footerActive) {\r\n                  this.initStyleOption('Footer');\r\n                }\r\n              }\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleTitleBtn() {\r\n    this.updateStyleOption();\r\n    this.initStyleOption('Title');\r\n    this.titleActive = true;\r\n    this.subTitleActive = this.headerActive = this.dataAreaActive = this.footerActive = false;\r\n  }\r\n  handleSubTitleBtn() {\r\n    this.updateStyleOption();\r\n    this.initStyleOption('SubTitle');\r\n    this.subTitleActive = true;\r\n    this.titleActive = this.headerActive = this.dataAreaActive = this.footerActive = false;\r\n  }\r\n  handleHeaderBtn() {\r\n    this.updateStyleOption();\r\n    this.initStyleOption('Header');\r\n    this.headerActive = true;\r\n    this.titleActive = this.subTitleActive = this.dataAreaActive = this.footerActive = false;\r\n  }\r\n  handleDataAreaBtn() {\r\n    this.updateStyleOption();\r\n    this.initStyleOption('DataArea');\r\n    this.dataAreaActive = true;\r\n    this.titleActive = this.subTitleActive = this.headerActive = this.footerActive = false;\r\n  }\r\n  handleFooterBtn() {\r\n    this.updateStyleOption();\r\n    this.initStyleOption('Footer');\r\n    this.footerActive = true;\r\n    this.titleActive = this.subTitleActive = this.headerActive = this.dataAreaActive = false;\r\n  }\r\n\r\n  handleWeight() {\r\n    this.isWeight = !this.isWeight;\r\n    if (this.isWeight) {\r\n      this.fontWeight = 'bold';\r\n    } else {\r\n      this.fontWeight = 'normal';\r\n    }\r\n  }\r\n  handleStyle() {\r\n    this.isStyle = !this.isStyle;\r\n    if (this.isStyle) {\r\n      this.fontStyle = 'italic';\r\n    } else {\r\n      this.fontStyle = 'normal';\r\n    }\r\n  }\r\n  handleUnderLine() {\r\n    this.isUnderLine = !this.isUnderLine;\r\n    if (this.isUnderLine) {\r\n      this.fontUnderLine = 'underline';\r\n    } else {\r\n      this.fontUnderLine = 'none';\r\n    }\r\n  }\r\n\r\n  getStyleOption() {\r\n    this.updateStyleOption();\r\n    return this.styleOption;\r\n  }\r\n\r\n  private initStyleOption(key: string) {\r\n    if (this.styleOption && this.styleOption[key]) {\r\n      this.rowHeight = this.styleOption[key].rowHeight - 0;\r\n      this.fontFamily = this.styleOption[key].fontFamily - 0;\r\n      this.fontSize = this.styleOption[key].size;\r\n      this.fontWeight = this.styleOption[key].fontWeight === 0 ? 'normal' : 'bold';\r\n      this.fontStyle = this.styleOption[key].fontStyle === 0 ? 'normal' : 'italic';\r\n      this.fontUnderLine = this.styleOption[key].textDecoration === 0 ? 'none' : 'underline';\r\n      this.fontColor = this.styleOption[key].fontColor;\r\n    }\r\n  }\r\n\r\n  private updateStyleOption() {\r\n    let key = '';\r\n    if (this.titleActive) {\r\n      key = 'Title';\r\n    } else if (this.subTitleActive) {\r\n      key = 'SubTitle';\r\n    } else if (this.headerActive) {\r\n      key = 'Header';\r\n    } else if (this.dataAreaActive) {\r\n      key = 'DataArea';\r\n    } else {\r\n      key = 'Footer';\r\n    }\r\n    if (this.styleOption && this.styleOption[key]) {\r\n      this.styleOption[key].rowHeight = this.rowHeight;\r\n      this.styleOption[key].fontFamily = this.fontFamily;\r\n      this.styleOption[key].size = this.fontSize - 0;\r\n      this.styleOption[key].fontWeight = this.fontWeight === 'normal' ? 0 : 1;\r\n      this.styleOption[key].fontStyle = this.fontStyle === 'normal' ? 0 : 1;\r\n      this.styleOption[key].textDecoration = this.fontUnderLine === 'none' ? 0 : 1;\r\n      this.styleOption[key].fontColor = this.fontColor;\r\n    }\r\n  }\r\n\r\n  getFontFamily(key: any) {\r\n    switch (key - 0) {\r\n      case 0:\r\n        return 'SimSun';\r\n      case 1:\r\n        return 'NSimSun';\r\n      case 2:\r\n        return 'FangSong';\r\n      case 3:\r\n        return 'KaiTi';\r\n      case 4:\r\n        return 'SimHei';\r\n      case 5:\r\n        return 'ARIAL';\r\n      case 6:\r\n        return 'ROMAN';\r\n      case 7:\r\n        return '\\'TIMES NEW ROMAN\\'';\r\n      case 8:\r\n        return 'VERDANA';\r\n      case 9:\r\n        return '\\'Microsoft YaHei\\'';\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, Injector, LOCALE_ID } from '@angular/core';\r\nimport { LocalizeService, DEFAULT_LANGUAGE } from '@qdp/localize';\r\nimport { EventBus } from '@qdp/common';\r\n\r\n@Component({\r\n  selector: 'other-editor',\r\n  templateUrl: './other-editor.component.html',\r\n  styleUrls: ['./other-editor.component.css']\r\n})\r\nexport class OtherEditorComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  @Input() controlType: string;\r\n  isCache = 'isCache' + EventBus.guid();\r\n  firstLoadId = 'firstLoadId' + EventBus.guid();\r\n  size: any = {};\r\n  colList: any;\r\n  colListData: any;\r\n  otherOption: any;\r\n  dataCache = true;\r\n  firstLoad = true;\r\n  pageTypeData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    // { name: '', value: 2 }\r\n  ];\r\n  rangeData: any = [\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 },\r\n    { name: '', value: 2 }\r\n  ];\r\n  pageTypeSelectValue = this.pageTypeData[1].value;\r\n  pageSizeData = 20;\r\n  rowGroup = true;\r\n  colGroup = true;\r\n  colSum = true;\r\n  rowSum = true;\r\n  rangeSelectValue = this.rangeData[0].value;\r\n  rangeValue = '';\r\n  delay = 0;\r\n  interval = 0;\r\n  localizeService: LocalizeService;\r\n  treeInfoData: any = [\r\n    { name: '', value: 2 },\r\n    { name: '', value: 0 },\r\n    { name: '', value: 1 }\r\n  ];\r\n  treeInfoSelectValue: any = this.treeInfoData[2].value;\r\n  pathField: any;\r\n  pathStep: any;\r\n  idField: any;\r\n  parentField: any;\r\n  localId: string;\r\n  formInline = true;\r\n  showZero = true;\r\n  expand = true;\r\n  showHeaderSort = true;\r\n  showFilterRow = true;\r\n  mergeCell = true;\r\n\r\n  isRowGroup = 'isRowGroup' + EventBus.guid();\r\n  isColGroup = 'isColGroup' + EventBus.guid();\r\n  isRowSum = 'isRowSum' + EventBus.guid();\r\n  isColSum = 'isColSum' + EventBus.guid();\r\n  isExpand = 'isExpand' + EventBus.guid();\r\n  isShowZero = 'isShowZero' + EventBus.guid();\r\n  filterRowId = 'filterRowId' + EventBus.guid();\r\n  showHeaderSortId = 'showHeaderSortId' + EventBus.guid();\r\n  mergeCellId = 'mergeCellId' + EventBus.guid();\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n    this.localId = this.injector.get(LOCALE_ID) || DEFAULT_LANGUAGE;\r\n    this.formInline = this.localId.toLowerCase() === DEFAULT_LANGUAGE;\r\n    this.pageTypeData = this.localizeService.getValue('ideCmp.schemaManager.otherOption.pageTypeData');\r\n    this.rangeData = this.localizeService.getValue('ideCmp.schemaManager.otherOption.rangeData');\r\n    this.treeInfoData = this.localizeService.getValue('ideCmp.schemaManager.otherOption.treeInfoData');\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'currSchema':\r\n            if (newValue.schemaValue && newValue.schemaValue.otherOption) {\r\n              const str = JSON.stringify(newValue.schemaValue.otherOption);\r\n              this.otherOption = JSON.parse(str);\r\n              this.dataCache = this.otherOption.dataCache;\r\n              this.firstLoad = this.otherOption.firstLoad === undefined || this.otherOption.firstLoad == null ? true : this.otherOption.firstLoad;\r\n              this.pageSizeData = this.otherOption.pageSize;\r\n              this.pageTypeSelectValue = this.pageTypeData[this.otherOption.loadDataType].value;\r\n              this.rowGroup = this.otherOption.rowGroup;\r\n              this.colGroup = this.otherOption.colGroup;\r\n              this.rowSum = this.otherOption.rowSum;\r\n              this.colSum = this.otherOption.colSum;\r\n              this.showZero = this.otherOption['showZero'] == null || this.otherOption['showZero'] === undefined ? true : this.otherOption['showZero'];\r\n              this.expand = this.otherOption['expand'] == null || this.otherOption['expand'] === undefined ? true : this.otherOption['expand'];\r\n              this.delay = this.otherOption.delay ? this.otherOption.delay : 0;\r\n              this.showHeaderSort = this.otherOption['showHeaderSort'] == null || this.otherOption['showHeaderSort'] == undefined ? true : this.otherOption['showHeaderSort'];\r\n              this.showFilterRow = this.otherOption['showFilterRow'] == null || this.otherOption['showFilterRow'] == undefined ? true : this.otherOption['showFilterRow'];\r\n              this.mergeCell = this.otherOption['mergeCell'] == null || this.otherOption['mergeCell'] == undefined ? true : this.otherOption['mergeCell'];\r\n              this.interval = this.otherOption.interval ? this.otherOption.interval : 0;\r\n              if (this.otherOption.rangeData) {\r\n                this.rangeSelectValue = this.rangeData[this.otherOption.rangeData.selectType].value;\r\n                this.rangeValue = this.otherOption.rangeData.rangeValue;\r\n              }\r\n              this.treeInfoSelectValue = this.otherOption.treeInfoType != null || this.otherOption.treeInfoType !== undefined ? this.otherOption.treeInfoType : 2;\r\n              this.pathField = this.otherOption.pathField ? this.otherOption.pathField : '';\r\n              this.pathStep = this.otherOption.pathStep ? this.otherOption.pathStep : 0;\r\n              this.idField = this.otherOption.idField ? this.otherOption.idField : '';\r\n              this.parentField = this.otherOption.parentField ? this.otherOption.parentField : '';\r\n            }\r\n            if (newValue.schemaValue && newValue.schemaValue.columnOption && newValue.schemaValue.columnOption.colList && newValue.schemaValue.columnOption.colList.length) {\r\n              const str = JSON.stringify(newValue.schemaValue.columnOption.colList);\r\n              this.colList = JSON.parse(str);\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getOtherOption() {\r\n    if (this.otherOption) {\r\n      this.otherOption.dataCache = this.dataCache;\r\n      this.otherOption.firstLoad = this.firstLoad;\r\n      this.otherOption.pageSize = this.pageSizeData;\r\n      this.otherOption.loadDataType = this.pageTypeSelectValue - 0;\r\n      this.otherOption.rowGroup = this.rowGroup;\r\n      this.otherOption.colGroup = this.colGroup;\r\n      this.otherOption.rowSum = this.rowSum;\r\n      this.otherOption.colSum = this.colSum;\r\n      this.otherOption['showZero'] = this.showZero;\r\n      this.otherOption['expand'] = this.expand;\r\n      this.otherOption['showHeaderSort'] = this.showHeaderSort;\r\n      this.otherOption['showFilterRow'] = this.showFilterRow;\r\n      this.otherOption['mergeCell'] = this.mergeCell;\r\n      this.otherOption.rangeData = { selectType: this.rangeSelectValue, rangeValue: this.rangeValue };\r\n      this.otherOption.delay = this.delay;\r\n      this.otherOption.interval = this.interval;\r\n      this.otherOption['treeInfoType'] = this.treeInfoSelectValue;\r\n      this.otherOption['pathField'] = this.pathField;\r\n      this.otherOption['pathStep'] = this.pathStep;\r\n      this.otherOption['idField'] = this.idField;\r\n      this.otherOption['parentField'] = this.parentField;\r\n    }\r\n    return this.otherOption;\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  handlePagingChanged($event) {\r\n    EventBus.dispatch('pagingModeChanges', $event);\r\n  }\r\n}\r\n","import { Component, OnInit, OnChanges, SimpleChanges, ViewEncapsulation, Input, Output, EventEmitter, ViewChild, Injector } from '@angular/core';\r\nimport { FarrisTabsComponent } from '@farris/ui-tabs';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { TitleEditorComponent } from './title-editor/title-editor.component';\r\nimport { ColumnEditorComponent } from './column-editor/column-editor.component';\r\nimport { StyleEditorComponent } from './style-editor/style-editor.component';\r\nimport { OtherEditorComponent } from './other-editor/other-editor.component';\r\n\r\n@Component({\r\n  selector: 'schema-editor',\r\n  templateUrl: './schema-editor.component.html',\r\n  styleUrls: ['./schema-editor.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SchemaEditorComponent implements OnInit, OnChanges {\r\n  @Input() currSchema: any;\r\n  @Input() colList: any[];\r\n  @Input() controlType: string;\r\n  editorParams: any;\r\n  @Output() tabsSelectChange = new EventEmitter<any>();\r\n  @ViewChild(TitleEditorComponent) titleOption: TitleEditorComponent;\r\n  @ViewChild(ColumnEditorComponent) columnOption: ColumnEditorComponent;\r\n  @ViewChild(StyleEditorComponent) styleOption: StyleEditorComponent;\r\n  @ViewChild(OtherEditorComponent) otherOption: OtherEditorComponent;\r\n  @ViewChild(FarrisTabsComponent) tabs: FarrisTabsComponent;\r\n  localizeService: LocalizeService;\r\n\r\n  constructor(private injector: Injector) {\r\n    this.localizeService = this.injector.get(LocalizeService);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n  }\r\n\r\n  handleTabSelect(data: any) {\r\n    const option = this.getOption();\r\n    if (data.nextId === 'column') {\r\n      this.columnOption.handleInfoChanged(0);\r\n    }\r\n    this.tabsSelectChange.emit(option);\r\n  }\r\n\r\n  getOption() {\r\n    const option = {};\r\n    if (this.titleOption) {\r\n      option['titleOption'] = this.titleOption.getTitleOption();\r\n    }\r\n    if (this.columnOption) {\r\n      option['columnOption'] = this.columnOption.getColumnOption();\r\n    }\r\n    if (this.styleOption) {\r\n      option['styleOption'] = this.styleOption.getStyleOption();\r\n    }\r\n    if (this.otherOption) {\r\n      option['otherOption'] = this.otherOption.getOtherOption();\r\n    }\r\n\r\n    return option;\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, OnChanges, SimpleChanges, TemplateRef, OnDestroy, Optional, Injector } from '@angular/core';\r\nimport { Observable, of, Subscription } from 'rxjs';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { FarrisPanelComponent } from '@farris/ui-panel';\r\nimport { NotifyService, NotifyOptions } from '@farris/ui-notify';\r\nimport { SchemaService } from '../../service/schema/schema.service';\r\nimport { SchemaEditorComponent } from '../schema-editor/schema-editor.component';\r\nimport { ChartsSchemaEditorComponent } from '../charts-schema-editor/charts-schema-editor.component';\r\nimport { EventBus, RtfServices } from '@qdp/common';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { FormErrorService } from '@farris/command-services';\r\nimport { CacheService } from '@ecp-caf/caf-common';\r\n\r\n@Component({\r\n  selector: 'schema-manager',\r\n  templateUrl: './schema-manager.component.html',\r\n  styleUrls: ['./schema-manager.component.css']\r\n})\r\nexport class SchemaManagerComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() queryId: any;\r\n  @Input() groupType: any;\r\n  @Input() schemaInfo: any;\r\n  @Input() colList: any;\r\n  @Input() controlType: string;\r\n  @Input() showPreSchema: string;\r\n  @Input() editorParams: any = {};\r\n  @Input() isMultiForm: any; // \r\n  @ViewChild('schemaTree') schemaTree: TreeTableComponent;\r\n  @ViewChild('enumFooter') modalFooter: TemplateRef<any>;\r\n  @ViewChild(SchemaEditorComponent) schemaEditor: SchemaEditorComponent;\r\n  @ViewChild(ChartsSchemaEditorComponent) chartsSchemaEditor: ChartsSchemaEditorComponent;\r\n  @ViewChild(FarrisPanelComponent) farrisPanelComponent: FarrisPanelComponent;\r\n  @ViewChild('farrisDialog') farrisDialog: DialogComponent;\r\n  @Output() schemaSelected = new EventEmitter<any>();\r\n  @Output() saveSchema = new EventEmitter<any>();\r\n  @Output() saveAsSchema = new EventEmitter<any>();\r\n  @Output() removeSchema = new EventEmitter<any>();\r\n  @Output() saveAndCloseSchema = new EventEmitter<any>();\r\n  @Output() dialogBeforeClose = new EventEmitter<any>();\r\n  @Output() closeModal = new EventEmitter<any>();\r\n  // \r\n  @Output() submitModal = new EventEmitter<any>();\r\n  defaultExpand = true;\r\n  inputCollapse = '';\r\n  inputExpand = '';\r\n  size: any = {};\r\n  isShow: any = false;\r\n  @Input() queryRelativeUrl: any;\r\n  personSchema = 'personSchema' + EventBus.guid();\r\n  orgSchema = 'orgSchema' + EventBus.guid();\r\n  publicSchema = 'publicSchema' + EventBus.guid();\r\n  defaultSchema = 'defaultSchema' + EventBus.guid();\r\n  schemaTreeData: any = [\r\n    {\r\n      data: {\r\n        id: 'public_schema',\r\n        isDefault: 0,\r\n        isPrefab: 1,\r\n        schemaName: '',\r\n        schemaType: 0,\r\n      },\r\n      expanded: true,\r\n      children: []\r\n    }, {\r\n      data: {\r\n        id: 'org_schema',\r\n        isDefault: 0,\r\n        isPrefab: 1,\r\n        schemaName: '',\r\n        schemaType: 2\r\n      },\r\n      expanded: true,\r\n      children: []\r\n    }, {\r\n      data: {\r\n        id: 'person_schema',\r\n        isDefault: 0,\r\n        isPrefab: 1,\r\n        schemaName: '',\r\n        schemaType: 1\r\n      },\r\n      expanded: true,\r\n      children: []\r\n    }\r\n  ];\r\n  schemaDropDownData: any[] = [];\r\n  schemaId: any;\r\n  selectedSchemaId: any;\r\n  isSchemaType = 0;\r\n  isDefault = false;\r\n  currTreeNode: any;\r\n  schemaName: string;\r\n  currentmode = false;\r\n  qoManagerCode = '';\r\n  modalConfig = {\r\n    title: '',\r\n    width: 900,\r\n    height: 500,\r\n    showButtons: true\r\n  };\r\n  chartsOption: any = {\r\n    chartsType: {\r\n      series: {\r\n        type: null\r\n      }\r\n    },\r\n    chartsStyle: {\r\n      title: {\r\n        text: null,\r\n        x: null,\r\n        y: null,\r\n        textStyle: {\r\n          lineHeight: 25,\r\n          fontSize: 25,\r\n          fontStyle: 'normal',\r\n          fontWight: 'normal',\r\n          fontFamily: 'Microsoft YaHei',\r\n          color: 'black'\r\n        }\r\n      },\r\n      legend: {\r\n        itemGap: 10,\r\n        itemWidth: 25,\r\n        itemHeight: 14,\r\n        align: 'auto',\r\n        orient: 'horizontal'\r\n      },\r\n      visualMap:\r\n        [{\r\n          type: 'continuous',\r\n          top: 'top',\r\n          bottom: null,\r\n          left: 'right',\r\n          right: null,\r\n          pieces: [],\r\n          categories: [],\r\n          calculable: true,\r\n          inRange: {\r\n            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n          },\r\n          outOfRange: {\r\n            color: ['rgba(255,255,255,.2)']\r\n          },\r\n          controller: {\r\n            inRange: {\r\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\r\n            },\r\n            outOfRange: {\r\n              color: ['#444']\r\n            }\r\n          },\r\n          textStyle: {\r\n            color: '#837'\t// \r\n          },\r\n        }]\r\n    },\r\n    chartsData: {\r\n      xAxis: {\r\n        type: 'category',\r\n        position: 'bottom'\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        position: 'left'\r\n      },\r\n      series: {\r\n        type: null,\r\n        encode: {\r\n          x: [],\r\n          y: []\r\n        }\r\n      },\r\n      legend: {\r\n        data: []\r\n      }\r\n    }\r\n  };\r\n  cacheSchemaData: any = {};\r\n  operations: any = {};\r\n\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  localizeService: LocalizeService;\r\n\r\n  svgSchema = true;\r\n  formErrorService: any;\r\n  cache: CacheService;\r\n  tabId: any;\r\n\r\n  constructor(\r\n    private schemaService: SchemaService,\r\n    private msgService: MessagerService,\r\n    private notifyService: NotifyService,\r\n    @Optional() private injector: Injector\r\n  ) {\r\n    this.personSchema = this.personSchema + EventBus.guid();\r\n    this.publicSchema = this.publicSchema + EventBus.guid();\r\n    this.defaultSchema = this.defaultSchema + EventBus.guid();\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.modalConfig.title = this.localizeService.getValue('ideCmp.schemaManager.dailogName');\r\n      this.schemaTreeData[0].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePublic');\r\n      this.schemaTreeData[1].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypeOrg');\r\n      this.schemaTreeData[2].data.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeTypePersonal');\r\n      this.formErrorService = this.injector.get(FormErrorService);\r\n      this.cache = this.injector.get(CacheService);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    const self = this;\r\n    this.tabId = RtfServices.getTabId(this.queryId);\r\n    EventBus.register('openAdvanceTemplateDialog', this.initSelectedSchemaId.bind(this), this.tabId);\r\n    this.subscriptions.push(self.schemaService.operationChange.subscribe((value: any) => {\r\n      if (value) {\r\n        self.operations = value;\r\n      }\r\n      // console.log(value);\r\n    }));\r\n  }\r\n\r\n  initSelectedSchemaId() {\r\n    this.selectedSchemaId = '';\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    for (const changeName in changes) {\r\n      const newValue = changes[changeName].currentValue;\r\n      if (newValue !== null && newValue !== void 0) {\r\n        switch (changeName) {\r\n          case 'schemaInfo':\r\n            if (newValue) {\r\n              this.schemaInfoChange(newValue);\r\n            }\r\n            break;\r\n          case 'colList':\r\n            if (newValue) {\r\n              this.colListChange(newValue);\r\n            }\r\n            break;\r\n          case 'editorParams':\r\n            this.schemaManagerInitForIDE();\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.subscriptions && this.subscriptions.length) {\r\n      for (const subscription of this.subscriptions) {\r\n        subscription.unsubscribe();\r\n      }\r\n    }\r\n  }\r\n\r\n  private colListChange(newValue: any) {\r\n    if (this.controlType !== 'charts') {\r\n      if (this.schemaTreeData[0].data['schemaValue'] && this.schemaTreeData[1].data['schemaValue'] && this.schemaTreeData[2].data['schemaValue'] && newValue && newValue.length) {\r\n        const cols = this.initColumns(this.objectCopy(newValue));\r\n        this.schemaTreeData[0].data['schemaValue'].columnOption.colList = cols;\r\n        this.schemaTreeData[1].data['schemaValue'].columnOption.colList = cols;\r\n        this.schemaTreeData[2].data['schemaValue'].columnOption.colList = cols;\r\n      }\r\n      if (this.cacheSchemaData['public_schema'] && this.cacheSchemaData['public_schema'].schemaValue\r\n        && this.cacheSchemaData['public_schema'].schemaValue.columnOption && this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList) {\r\n        if (this.colList && this.colList.length) {\r\n          const cols = this.initColumns(this.objectCopy(this.colList));\r\n          this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList = cols;\r\n        }\r\n        if (this.currTreeNode.id === 'public_schema') {\r\n          this.currTreeNodeChanged(\r\n            {\r\n              node: {\r\n                data: this.cacheSchemaData['public_schema']\r\n              }\r\n            }\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private initColumns(columns: any) {\r\n    if (columns && columns.length) {\r\n      columns.forEach((col: any) => {\r\n        col.colWidth = 150, col.visible = true, col.isFixed = false, col.align = 1,\r\n          col.formatType = 0, col.formattor = '', col.sort = 0, col.pageAggre = 0, col.pageAggreText = '',\r\n          col.isGroup = false, col.groupAggre = 0, col.groupAggreText = '', col.totalAggre = 0,\r\n          col.totalAggreText = '', col.dimension = 0, col.rowColor = '', col.showType = '0';\r\n      });\r\n    }\r\n    return columns;\r\n  }\r\n\r\n  private schemaInfoChange(newValue: any) {\r\n    this.controlInit();\r\n    if (this.controlType !== 'charts') {\r\n      this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = newValue && newValue.preSchema ? newValue.preSchema.schemaValue : null;\r\n    } else {\r\n      this.schemaTreeData[0].data['schemaValue'] = this.schemaTreeData[1].data['schemaValue'] = this.schemaTreeData[2].data['schemaValue'] = this.chartsOption;\r\n    }\r\n    if (newValue && newValue.schemaList) {\r\n      // \r\n      Object.keys(newValue.schemaList).forEach(key => {\r\n        this.cacheSchemaData[newValue.schemaList[key].id] = JSON.parse(JSON.stringify(newValue.schemaList[key]));\r\n        this.schemaDropDownData.push(newValue.schemaList[key]);\r\n        if ((newValue.schemaList[key].schemaType - 0) === 0) {\r\n          this.schemaTreeData[0].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });\r\n        } else if ((newValue.schemaList[key].schemaType - 0) === 2) {\r\n          this.schemaTreeData[1].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });\r\n        } else {\r\n          this.schemaTreeData[2].children.push({ data: newValue.schemaList[key], expanded: true, children: [] });\r\n        }\r\n      });\r\n    }\r\n    this.schemaTree.updateSerializedValue();\r\n    if (newValue && newValue.isDefaultSchema && newValue.isDefaultSchema.id && this.selectedSchemaId !== 'selected_prefab') {\r\n      if (!this.schemaId || (this.schemaId && '1,public_schema'.indexOf(this.schemaId) >= 0) || ('1,public_schema'.indexOf(this.schemaId) >= 0 && !this.validateSchemaId(this.schemaId, newValue)) || ('1,public_schema'.indexOf(this.schemaId) < 0 && !this.validateSchemaId(this.schemaId, newValue))) {\r\n        this.schemaId = newValue.isDefaultSchema.id;\r\n      }\r\n      this.isDefault = newValue.isDefaultSchema.isDefault === 1 ? true : false;\r\n      this.isSchemaType = newValue.isDefaultSchema.schemaType - 0;\r\n      this.schemaName = newValue.isDefaultSchema.schemaName;\r\n    } else {\r\n      if (!this.schemaId || !this.validateSchemaId(this.schemaId, newValue)) {\r\n        this.schemaId = 'prefab';\r\n      }\r\n    }\r\n    if (this.schemaId === 'prefab' || this.schemaId === '1' || !this.schemaId) {\r\n      this.treeNodeSelected('public_schema');\r\n      this.isDefault = false;\r\n      this.isSchemaType = 0;\r\n      this.schemaName = '';\r\n    } else {\r\n      this.treeNodeSelected(this.schemaId);\r\n    }\r\n  }\r\n\r\n  private schemaManagerInitForIDE() {\r\n    const self = this;\r\n    if (this.editorParams && this.editorParams.queryId) {\r\n      this.subscriptions = [];\r\n      // \r\n      this.subscriptions.push(\r\n        self.schemaService.schemaInfo.subscribe(value => {\r\n          if (value) {\r\n            const schemaInfoAll = Object.assign({}, value);\r\n            self.schemaInfo = schemaInfoAll;\r\n            if (self.schemaInfo.schemaList) {\r\n              self.schemaInfo.schemaList = self.schemaInfo.schemaList[self.editorParams.queryId];\r\n            }\r\n            self.schemaInfoChange(self.schemaInfo);\r\n          }\r\n        })\r\n      );\r\n      this.subscriptions.push(\r\n        // \r\n        self.schemaService.colList.subscribe(value => {\r\n          self.colList = value;\r\n          self.colListChange(self.colList);\r\n        })\r\n      );\r\n      if (this.schemaEditor && this.schemaEditor.tabs) {\r\n        this.schemaEditor.tabs.selectTab('title');\r\n      }\r\n      this.queryId = this.editorParams.queryId;\r\n      this.controlType = this.editorParams.controlType;\r\n      this.qoManagerCode = this.editorParams.qoManagerCode;\r\n      this.queryRelativeUrl = this.editorParams.queryRelativeUrl;\r\n      this.currentmode = true;\r\n      const organizationId = this.cache.get(this.tabId + 'organizationId') || '';\r\n      this.schemaService.getSchemaList(self.queryId, '', organizationId, self.queryRelativeUrl, self.groupType).subscribe(value => {\r\n        const schemaData = value ? value : [];\r\n        const schemaId = schemaData && schemaData.length && schemaData[0] && schemaData[0].id ? schemaData[0].id : '1';\r\n        const params = {};\r\n        params['qoManagerCode'] = self.qoManagerCode;\r\n        params['pageIndex'] = 0;\r\n        params['schemaId'] = schemaId;\r\n        params['entityData'] = '';\r\n        params['extendCond'] = '';\r\n        if (self.editorParams && self.editorParams.dynamicCols && self.editorParams.dynamicCols.length) {\r\n          self.schemaService.getSpreadTemplate(schemaId, self.queryId, self.editorParams.dynamicCols, self.queryRelativeUrl, null, self.editorParams.dynamicCols).subscribe();\r\n        } else {\r\n          self.schemaService.getCol(params, self.queryRelativeUrl).subscribe(result => {\r\n            if (result && result.dynamicCols) {\r\n              self.schemaService.getSpreadTemplate(schemaId, self.queryId, result.dynamicCols, self.queryRelativeUrl, null, result.dynamicCols).subscribe();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private controlInit() {\r\n    this.currTreeNode = undefined;\r\n    this.cacheSchemaData = {};\r\n    this.schemaTreeData[0].children = [];\r\n    this.schemaTreeData[1].children = [];\r\n    this.schemaTreeData[2].children = [];\r\n    this.schemaDropDownData = [];\r\n  }\r\n\r\n  private validateSchemaId(id: any, newValue: any) {\r\n    let result = false;\r\n    if (!id) {\r\n      return result;\r\n    }\r\n    if (newValue && newValue.schemaList) {\r\n      for (const key in newValue.schemaList) {\r\n        if (id === key) {\r\n          result = true;\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  handleDialogShow() {\r\n    this.personSchema = 'personSchema' + EventBus.guid();\r\n    this.publicSchema = 'publicSchema' + EventBus.guid();\r\n    this.defaultSchema = 'defaultSchema' + EventBus.guid();\r\n    if (this.controlType !== 'charts') {\r\n      if (this.schemaEditor && this.schemaEditor.tabs) {\r\n        this.schemaEditor.tabs.selectTab('title');\r\n      }\r\n    } else {\r\n      if (this.chartsSchemaEditor && this.chartsSchemaEditor.tabs) {\r\n        this.chartsSchemaEditor.tabs.selectTab('type');\r\n      }\r\n    }\r\n    this.isShow = true;\r\n    this.farrisDialog.show();\r\n  }\r\n\r\n  handleDropDownItemClick(id: any) {\r\n    this.schemaId = id;\r\n    if (this.schemaId === 'prefab') {\r\n      this.selectedSchemaId = 'selected_prefab';\r\n      this.treeNodeSelected('public_schema');\r\n    } else {\r\n      this.selectedSchemaId = id;\r\n      this.treeNodeSelected(this.schemaId);\r\n    }\r\n    this.schemaSelected.emit(id === 'prefab' ? '1' : id);\r\n  }\r\n\r\n  handleTabsSelectChange(option: any) {\r\n    if (this.farrisPanelComponent && this.farrisPanelComponent.modelValue.length) {\r\n      this.farrisPanelComponent.updateModel('schemaInfo');\r\n    }\r\n    this.updateCurrSchema(option, 'tabChanged');\r\n  }\r\n\r\n  handleSchemaTypeSelect(value: any) {\r\n    this.isSchemaType = value;\r\n  }\r\n\r\n  handleTreeNodeSelected(data: any) {\r\n    const self = this;\r\n    if (!this.currTreeNode) {\r\n      this.currTreeNodeChanged(data);\r\n    } else {\r\n      if (data.node.data.id !== this.currTreeNode.id) {\r\n        if (this.schemaEditor || this.chartsSchemaEditor) {\r\n          if (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema') {\r\n            this.currTreeNodeChanged(data);\r\n          } else {\r\n            let compare = true;\r\n            this.updateCurrSchema(null);\r\n            if (this.controlType === 'charts' && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData) {\r\n              this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type.replace('1', '');\r\n            }\r\n            if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n              if (this.controlType === 'charts') {\r\n                this.currTreeNode.schemaValue.chartsData.series.type = this.currTreeNode.schemaValue.chartsType.series.type;\r\n                this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type = this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsType.series.type;\r\n              }\r\n              compare = (JSON.stringify(this.currTreeNode.schemaValue) ===\r\n                JSON.stringify(this.cacheSchemaData[this.currTreeNode.id].schemaValue)\r\n                && this.currTreeNode.schemaName === this.cacheSchemaData[this.currTreeNode.id].schemaName\r\n                && this.currTreeNode.schemaType === this.cacheSchemaData[this.currTreeNode.id].schemaType\r\n                && this.currTreeNode.isDefault === this.cacheSchemaData[this.currTreeNode.id].isDefault);\r\n              if (false && !compare && this.cacheSchemaData[this.currTreeNode.id].schemaValue.chartsData.series.type !== 'effectScatter') {\r\n                this.msgService.question(this.localizeService.getValue('ideCmp.schemaManager.message.validate.judgeUpdate'),\r\n                  () => {\r\n                    self.currTreeNodeChanged(data);\r\n                  },\r\n                  () => {\r\n                    this.schemaTree.selectNode(this.cacheSchemaData[this.currTreeNode.id].id);\r\n                    this.schemaName = this.cacheSchemaData[this.currTreeNode.id].schemaName;\r\n                    this.isSchemaType = this.cacheSchemaData[this.currTreeNode.id].schemaType;\r\n                    this.isDefault = this.cacheSchemaData[this.currTreeNode.id].isDefault === 1 ? true : false;\r\n                  }\r\n                );\r\n              } else {\r\n                this.currTreeNodeChanged(data);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private currTreeNodeChanged(data: any) {\r\n    if (this.currTreeNode && (this.currTreeNode.id === 'public_schema' || this.currTreeNode.id === 'person_schema' || this.currTreeNode.id === 'org_schema')) {\r\n      delete this.cacheSchemaData[this.currTreeNode.id];\r\n    }\r\n    this.currTreeNode = data.node.data;\r\n    if (this.currTreeNode.id === 'public_schema') {\r\n      if (this.controlType !== 'charts' && this.colList && this.colList.length) {\r\n        this.currTreeNode.schemaValue.columnOption.colList = this.colList;\r\n      }\r\n      this.isDefault = false;\r\n      this.isSchemaType = 0;\r\n      this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePublic');\r\n      this.schemaId = 'prefab';\r\n    } else if (this.currTreeNode.id === 'person_schema') {\r\n      if (this.controlType !== 'charts') {\r\n        this.currTreeNode.schemaValue.columnOption.colList = this.colList;\r\n      }\r\n      this.isDefault = false;\r\n      this.isSchemaType = 1;\r\n      this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemePersonal');\r\n      this.schemaId = 'prefab';\r\n    } else if (this.currTreeNode.id === 'org_schema') {\r\n      if (this.controlType !== 'charts') {\r\n        this.currTreeNode.schemaValue.columnOption.colList = this.colList;\r\n      }\r\n      this.isDefault = false;\r\n      this.isSchemaType = 2;\r\n      this.schemaName = this.localizeService.getValue('ideCmp.schemaManager.schemeOrg');\r\n      this.schemaId = 'prefab';\r\n    } else {\r\n      this.isDefault = this.currTreeNode.isDefault === 1 ? true : false;\r\n      this.isSchemaType = this.currTreeNode.schemaType - 0;\r\n      this.schemaName = this.currTreeNode.schemaName;\r\n      this.schemaId = this.currTreeNode.id;\r\n    }\r\n    this.cacheSchemaData[this.currTreeNode.id] = JSON.parse(JSON.stringify(this.currTreeNode));\r\n  }\r\n\r\n  private treeNodeSelected(id: string) {\r\n    this.schemaTree.clearSelections();\r\n    if (id) {\r\n      this.schemaTree.selectNode(id);\r\n    }\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight || 300;\r\n    this.size.width = event.newWidth;\r\n    if (this.schemaTree) {\r\n      this.schemaTree.resize(this.size);\r\n    }\r\n  }\r\n\r\n  handleSaveAsClick() {\r\n    const self = this;\r\n    this.updateCurrSchema(null, 'save_as');\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData['public_schema']) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData['public_schema'].schemaType === 0) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n      const str = JSON.stringify(this.cacheSchemaData['public_schema']);\r\n      const schema = JSON.parse(str);\r\n      schema.queryId = this.queryId;\r\n      schema.schemaValue = JSON.stringify(schema.schemaValue);\r\n      if (!schema.schemaName) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));\r\n        return;\r\n      } else {\r\n        for (const key in this.cacheSchemaData) {\r\n          if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {\r\n            this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));\r\n            if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {\r\n              this.farrisPanelComponent.updateModel('schemaInfo');\r\n            }\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      if (this.controlType !== 'charts') {\r\n        if (this.crosstabColumnValidate(this.cacheSchemaData['public_schema'].schemaValue.columnOption.colList)) {\r\n          this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));\r\n          return;\r\n        }\r\n      }\r\n      if (schema.schemaName && schema.schemaName.length > 100) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));\r\n        return;\r\n      }\r\n      const textSortColumn = { isText: [] };\r\n      this.getTextColumnSort(schema, textSortColumn);\r\n      if (textSortColumn.isText.length) {\r\n        this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));\r\n        return;\r\n      }\r\n      schema.id = '';\r\n      const organizationId = this.cache.get(this.tabId + 'organizationId') || '';\r\n      schema.orgId = organizationId;\r\n      this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((data: any) => {\r\n        this.schemaId = '';\r\n        if (data && data.isDefaultSchema && data.isDefaultSchema.id) {\r\n          this.schemaId = data.isDefaultSchema.id;\r\n        }\r\n        this.notifyService['success']({\r\n          title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000\r\n        } as NotifyOptions);\r\n        this.saveAsSchema.emit();\r\n      }, (error: any) => {\r\n        self.formErrorService.exception(error.Message, error);\r\n      });\r\n    }\r\n  }\r\n\r\n  handleRemoveClick() {\r\n    const self = this;\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n      if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n        return;\r\n      }\r\n      if (this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' &&\r\n        this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' &&\r\n        this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {\r\n        const organizationId = this.cache.get(this.tabId + 'organizationId') || '';\r\n        this.schemaService.deleteSchema(this.cacheSchemaData[this.currTreeNode.id].id, this.queryId, this.queryRelativeUrl, this.groupType, organizationId).subscribe((data: any) => {\r\n          data.subscribe((value: any) => {\r\n            this.schemaId = '';\r\n            this.notifyService['success']({\r\n              title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.delete.success'), timeout: 3000\r\n            } as NotifyOptions);\r\n            this.removeSchema.emit();\r\n          });\r\n        }, (error: any) => {\r\n          self.formErrorService.exception(error.Message, error);\r\n        });\r\n      } else {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));\r\n      }\r\n    } else {\r\n      this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.info.delete'));\r\n    }\r\n  }\r\n\r\n  handleSaveClick() {\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n    }\r\n    this.updateCurrSchema(null);\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n      if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n        return;\r\n      }\r\n      const str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);\r\n      const schema = JSON.parse(str);\r\n      if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {\r\n        schema.id = '';\r\n      }\r\n      schema.queryId = this.queryId;\r\n      schema.schemaValue = JSON.stringify(schema.schemaValue);\r\n      if (!schema.schemaName) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));\r\n        return;\r\n      } else {\r\n        for (const key in this.cacheSchemaData) {\r\n          if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {\r\n            this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));\r\n            if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {\r\n              this.farrisPanelComponent.updateModel('schemaInfo');\r\n            }\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      if (this.controlType !== 'charts') {\r\n        if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {\r\n          this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));\r\n          return;\r\n        }\r\n      }\r\n      if (schema.schemaName && schema.schemaName.length > 100) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));\r\n        return;\r\n      }\r\n      const textSortColumn = { isText: [] };\r\n      this.getTextColumnSort(schema, textSortColumn);\r\n      if (textSortColumn.isText.length) {\r\n        this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));\r\n        return;\r\n      }\r\n      const organizationId = this.cache.get(this.tabId + 'organizationId') || '';\r\n      schema.orgId = organizationId;\r\n      this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((data: any) => {\r\n        if (data && data.isDefaultSchema && data.isDefaultSchema.id) {\r\n          this.schemaId = data.isDefaultSchema.id;\r\n        }\r\n        this.schemaId = this.schemaId === 'prefab' ? '' : this.schemaId;\r\n        this.notifyService['success']({\r\n          title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000\r\n        } as NotifyOptions);\r\n        this.treeNodeSelected(this.schemaId);\r\n        this.saveSchema.emit();\r\n      }, (error: any) => {\r\n        this.formErrorService.exception(error.Message, error);\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSaveAndCloseClick() {\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n    }\r\n    this.updateCurrSchema(null);\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      if (this.operations['QdpModifyPublicSchema'] === false && this.cacheSchemaData[this.currTreeNode.id].schemaType === 0 && this.cacheSchemaData[this.currTreeNode.id].id !== 'public_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'person_schema' && this.cacheSchemaData[this.currTreeNode.id].id !== 'org_schema') {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.qdpModifyPublicSchema'));\r\n        return;\r\n      }\r\n      if (this.cacheSchemaData[this.currTreeNode.id].isProtected && (this.cacheSchemaData[this.currTreeNode.id].isProtected === 1 || this.cacheSchemaData[this.currTreeNode.id].isProtected === '1')) {\r\n        this.msgService.info(this.localizeService.getValue('ideCmp.schemaManager.message.validate.isProtected'));\r\n        return;\r\n      }\r\n      const str = JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]);\r\n      const schema = JSON.parse(str);\r\n      if (schema.id === 'public_schema' || schema.id === 'person_schema' || schema.id === 'org_schema') {\r\n        schema.id = '';\r\n      }\r\n      schema.queryId = this.queryId;\r\n      schema.schemaValue = JSON.stringify(schema.schemaValue);\r\n      if (!schema.schemaName) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.notNull'));\r\n        return;\r\n      } else {\r\n        for (const key in this.cacheSchemaData) {\r\n          if (key !== 'public_schema' && key !== 'person_schema' && key !== 'org_schema' && key !== schema.id && schema.schemaName === this.cacheSchemaData[key].schemaName) {\r\n            this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.exists'));\r\n            if (this.farrisPanelComponent && !this.farrisPanelComponent.modelValue.length) {\r\n              this.farrisPanelComponent.updateModel('schemaInfo');\r\n            }\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      if (this.controlType !== 'charts') {\r\n        if (this.crosstabColumnValidate(this.cacheSchemaData[this.currTreeNode.id].schemaValue.columnOption.colList)) {\r\n          this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));\r\n          return;\r\n        }\r\n      }\r\n      if (schema.schemaName && schema.schemaName.length > 100) {\r\n        this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.tooLong'));\r\n        return;\r\n      }\r\n      const textSortColumn = { isText: [] };\r\n      this.getTextColumnSort(schema, textSortColumn);\r\n      if (textSortColumn.isText.length) {\r\n        this.msgService.warning(textSortColumn.isText[0] + ' ' + this.localizeService.getValue('ideCmp.schemaManager.message.validate.textColumnSort'));\r\n        return;\r\n      }\r\n      const organizationId = this.cache.get(this.tabId + 'organizationId') || '';\r\n      schema.orgId = organizationId;\r\n      this.schemaService.saveSchema({ schema: JSON.stringify(schema), groupType: this.groupType }, this.queryRelativeUrl).subscribe((data: any) => {\r\n        if (data && data.isDefaultSchema && data.isDefaultSchema.id) {\r\n          this.schemaId = data.isDefaultSchema.id;\r\n        }\r\n        this.schemaId = this.schemaId === 'prefab' ? '' : this.schemaId;\r\n        this.notifyService['success']({\r\n          title: this.localizeService.getValue('ideCmp.schemaManager.message.info.title'), msg: this.localizeService.getValue('ideCmp.schemaManager.message.save.success'), timeout: 3000\r\n        } as NotifyOptions);\r\n        this.treeNodeSelected(this.schemaId);\r\n        this.saveAndCloseSchema.emit();\r\n\r\n        if (!this.currentmode) {\r\n          this.farrisDialog.close();\r\n        } else {\r\n          this.closeModal.emit();\r\n        }\r\n      }, (error: any) => {\r\n        this.formErrorService.exception(error.Message, error);\r\n      });\r\n    }\r\n  }\r\n\r\n  handlebeforeClose = (): Observable<any> => {\r\n    let id: any = '';\r\n    if (this.schemaId) {\r\n      id = this.schemaId === 'prefab' ? '1' : this.schemaId;\r\n    }\r\n    if (!id && this.schemaInfo && this.schemaInfo.isDefaultSchema) {\r\n      id = this.schemaInfo.isDefaultSchema.id;\r\n    }\r\n    this.dialogBeforeClose.emit(id);\r\n    return of(true);\r\n  }\r\n\r\n  private updateCurrSchema(options: any, type?: any) {\r\n    if (this.controlType !== 'charts') {\r\n      this.updateListSchema(options, type);\r\n    } else {\r\n      this.updateChartsSchema(options, type);\r\n    }\r\n  }\r\n\r\n  private updateListSchema(options: any, type?: any) {\r\n    let option = options;\r\n    if (!option) {\r\n      if (this.schemaEditor) {\r\n        option = this.schemaEditor.getOption();\r\n      }\r\n    }\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      let sId = this.currTreeNode.id;\r\n      if (type === 'save_as') {\r\n        sId = 'public_schema';\r\n        this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));\r\n        this.cacheSchemaData[sId].id = sId;\r\n      }\r\n      if (option && option.titleOption) {\r\n        this.cacheSchemaData[sId].schemaValue.titleOption = option.titleOption;\r\n      }\r\n      if (option && option.columnOption && option.columnOption.length) {\r\n        this.cacheSchemaData[sId].schemaValue.columnOption.colList = option.columnOption;\r\n      }\r\n      if (option && option.styleOption) {\r\n        this.cacheSchemaData[sId].schemaValue.styleOption = option.styleOption;\r\n      }\r\n      if (option && option.otherOption) {\r\n        this.cacheSchemaData[sId].schemaValue.otherOption = option.otherOption;\r\n      }\r\n      if (type !== 'tabChanged') {\r\n        this.cacheSchemaData[sId].schemaName = this.schemaName;\r\n        this.cacheSchemaData[sId].schemaType = this.isSchemaType;\r\n        this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateChartsSchema(options: any, type?: any) {\r\n    let option = options;\r\n    if (!option) {\r\n      if (this.chartsSchemaEditor) {\r\n        option = this.chartsSchemaEditor.getOption();\r\n      }\r\n    }\r\n    if (this.currTreeNode && this.cacheSchemaData && this.cacheSchemaData[this.currTreeNode.id]) {\r\n      let sId = this.currTreeNode.id;\r\n      if (type === 'save_as') {\r\n        sId = 'public_schema';\r\n        this.cacheSchemaData[sId] = JSON.parse(JSON.stringify(this.cacheSchemaData[this.currTreeNode.id]));\r\n        this.cacheSchemaData[sId].id = sId;\r\n      }\r\n      if (option && option.chartsType) {\r\n        this.cacheSchemaData[sId].schemaValue.chartsType = option.chartsType;\r\n      }\r\n      if (option && option.chartsData) {\r\n        this.cacheSchemaData[sId].schemaValue.chartsData = option.chartsData;\r\n        if (option && option.groupSummarySet) {\r\n          this.cacheSchemaData[sId].schemaValue['groupSummarySet'] = option.groupSummarySet;\r\n        }\r\n      }\r\n      if (option && option.chartsStyle) {\r\n        this.cacheSchemaData[sId].schemaValue.chartsStyle = option.chartsStyle;\r\n        if (option && option.customOption) {\r\n          if (option.customOption === 'error') {\r\n            this.msgService.warning(this.localizeService.getValue('ideCmp.schemaManager.message.validate.crosstabValueDimension'));\r\n            return;\r\n          }\r\n        }\r\n        this.cacheSchemaData[sId].schemaValue['customOption'] = option.customOption;\r\n      }\r\n      this.cacheSchemaData[sId].schemaValue.chartsData.series.type = this.cacheSchemaData[sId].schemaValue.chartsType.series.type;\r\n      if (this.cacheSchemaData[sId].schemaValue.chartsData.legend) {\r\n        this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.show = this.cacheSchemaData[sId].schemaValue.chartsData.legend.show;\r\n        this.cacheSchemaData[sId].schemaValue.chartsStyle.legend.data = this.cacheSchemaData[sId].schemaValue.chartsData.legend.data;\r\n      }\r\n      if (type !== 'tabChanged') {\r\n        this.cacheSchemaData[sId].schemaName = this.schemaName;\r\n        this.cacheSchemaData[sId].schemaType = this.isSchemaType;\r\n        this.cacheSchemaData[sId].isDefault = this.isDefault ? 1 : 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  private crosstabColumnValidate(columns: any) {\r\n    let flag = false;\r\n    if (this.controlType === 'crosstab') {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < columns.length; i++) {\r\n        if (columns[i].groupAggre !== 4 && columns[i].totalAggre !== 4) {\r\n          if ((columns[i].dimension - 0) === 3 && !'int,integer,float,double,decimal,number'.includes(columns[i].type ? columns[i].type.toLowerCase() : '')) {\r\n            flag = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  private objectCopy(obj: any) {\r\n    const str = JSON.stringify(obj);\r\n    return JSON.parse(str);\r\n  }\r\n\r\n  clickCancel() {\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  handleHover(type: any, state: any) {\r\n    this.svgSchema = state === 1;\r\n  }\r\n\r\n  getTextColumnSort(schema: any, params: any) {\r\n    let schemaValue;\r\n    if (schema && typeof schema.schemaValue === 'string') {\r\n      schemaValue = JSON.parse(schema.schemaValue);\r\n    } else {\r\n      schemaValue = schema.schemaValue;\r\n    }\r\n    if (schemaValue.columnOption && schemaValue.columnOption.colList && schemaValue.columnOption.colList.length) {\r\n      schemaValue.columnOption.colList.forEach((col: any) => {\r\n        this.recursiveTextColumnSort(col, null, params);\r\n      });\r\n    }\r\n  }\r\n\r\n  private recursiveTextColumnSort(col, colList, params) {\r\n    if (colList == null) {\r\n      if (col.childList && col.childList.length) {\r\n        this.recursiveTextColumnSort(null, col.childList, params);\r\n      } else {\r\n        if (col.type && col.type.toLowerCase() === 'text' && col.sort > 0) {\r\n          params.isText.push(col.bindField);\r\n        }\r\n        params.colIndex++;\r\n      }\r\n    } else {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < colList.length; i++) {\r\n        if (colList[i].childList && colList[i].childList.length) {\r\n          this.recursiveTextColumnSort(null, colList[i].childList, params);\r\n        } else {\r\n          if (colList[i].type && colList[i].type.toLowerCase() === 'text' && colList[i].sort > 0) {\r\n            params.isText.push(colList[i].bindField);\r\n          }\r\n          params.colIndex++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { PrintIntegrationManagerService } from '@qdp/common';\r\n\r\n@Injectable()\r\nexport class PrintIntegrationService {\r\n\r\n  printIntegrationInfo = new Subject<any>();\r\n\r\n  constructor(private printIntegrationManager: PrintIntegrationManagerService) {\r\n    this.printIntegrationManager.printIntegrationInfoChange.subscribe(value => {\r\n      this.printIntegrationInfo.next(value);\r\n    });\r\n  }\r\n\r\n  getPrintIntegration(schemaId: string, queryId: string, queryRelativeUrl: any): Observable<any> {\r\n    return this.printIntegrationManager.getPrintIntegration(schemaId, queryId, queryRelativeUrl);\r\n  }\r\n\r\n  savePrintIntegration(printIntegrationInfo: any, queryRelativeUrl: any): Observable<any> {\r\n    return this.printIntegrationManager.savePrintIntegration(printIntegrationInfo, queryRelativeUrl);\r\n  }\r\n\r\n  deletPrintIntegration(schemaId: string, queryID: string, queryRelativeUrl: any): Observable<any> {\r\n    return this.printIntegrationManager.deletePrintIntegration(schemaId, queryID, queryRelativeUrl);\r\n  }\r\n}\r\n","import { Component, OnInit, Input, EventEmitter, Output, ViewChild, Optional, Injector } from '@angular/core';\r\nimport { PrintIntegrationService } from '../../service/print-integration/print-integration.service';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { CacheService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { EventBus } from '@qdp/common';\r\nimport { LocalizeService } from '@qdp/localize';\r\nimport { MessagerService } from '@farris/ui-messager';\r\n\r\n@Component({\r\n  selector: 'print-integration',\r\n  templateUrl: './print-integration.component.html',\r\n  styleUrls: ['./print-integration.component.css']\r\n})\r\nexport class PrintIntegrationComponent implements OnInit {\r\n  @Input() queryId: any;\r\n  schemaId: any;\r\n  @Input() controlType: string;\r\n  @Input() isMultiForm: any; // \r\n  @Output() printIntegration = new EventEmitter<any>();\r\n  @Output() printPreview = new EventEmitter<any>();\r\n  @Input() queryRelativeUrl: any;\r\n  @Output() dialogBeforeClose = new EventEmitter<any>();\r\n  @ViewChild('farrisDialog') farrisDialog: DialogComponent;\r\n  printIntegrationData: any = {\r\n    distributionSelectValue: 0,\r\n    pageSizeSelectValue: 0,\r\n    marginSelectValue: 0,\r\n    zoomSize: 0\r\n  };\r\n  zoomSize: any = 100; // \r\n  saveDatas: any;\r\n\r\n  distributionData: any = [\r\n    { name: '', value: 1 },\r\n    { name: '', value: 0 }\r\n  ];\r\n  pageSizeData: any = [\r\n    { name: '', value: 1 },\r\n    { name: 'Tabloid', value: 3 },\r\n    { name: '', value: 5 },\r\n    { name: 'Statement', value: 6 },\r\n    { name: 'A3', value: 8 },\r\n    { name: 'A4', value: 9 },\r\n    { name: 'A5', value: 11 },\r\n    { name: 'B4 (JIS)', value: 12 },\r\n    { name: 'B5 (JIS)', value: 13 }\r\n  ];\r\n  marginData: any = [\r\n    { name: '', value: 0, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } },\r\n    { name: '', value: 1, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },\r\n    { name: '', value: 2, margin: { marginTop: 0, marginLeft: 0, marginBottom: 0, marginRight: 0 } },\r\n    { name: '', value: 3, margin: { marginTop: 1, marginLeft: 1, marginBottom: 1, marginRight: 1 } }\r\n  ];\r\n  size: any = {};\r\n  marginTop = 1;\r\n  marginLeft = 1;\r\n  marginBottom = 1;\r\n  marginRight = 1;\r\n  distributionSelectValue: any; // \r\n  pageSizeSelectValue: any; // \r\n  marginSelectValue: any = 0; // \r\n  currentMarginData: any = this.marginData[0];\r\n  isShowCustom = false;\r\n  localizeService: LocalizeService;\r\n  msgService: MessagerService;\r\n  svgPrint = true;\r\n\r\n  constructor(private printIntegrationService: PrintIntegrationService, private cache: CacheService, @Optional() private injector: Injector) {\r\n    if (this.injector) {\r\n      this.localizeService = this.injector.get(LocalizeService);\r\n      this.msgService = this.injector.get(MessagerService);\r\n      this.distributionData = this.localizeService.getValue('ideCmp.printOption.distributionData');\r\n      this.pageSizeData = this.localizeService.getValue('ideCmp.printOption.pageSizeData');\r\n      this.marginData = this.localizeService.getValue('ideCmp.printOption.marginData');\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  handleDialogShow() {\r\n    if (this.queryId) {\r\n      this.schemaId = this.cache.get('schema_schemaid' + this.queryId);\r\n      this.printIntegrationService.getPrintIntegration(this.schemaId, this.queryId, this.queryRelativeUrl).subscribe(value => {\r\n        if (value) {\r\n          // this.printIntegrationData = value ? value : [];\r\n          this.distributionSelectValue = value.printintegration.distributionSelectValue.value;\r\n          this.pageSizeSelectValue = value.printintegration.pageSizeSelectValue.value;\r\n          this.marginSelectValue = value.printintegration.marginSelectValue.value;\r\n          this.currentMarginData = value.printintegration.marginSelectValue;\r\n          this.marginTop = value.printintegration.marginSelectValue.margin.marginTop;\r\n          this.marginLeft = value.printintegration.marginSelectValue.margin.marginLeft;\r\n          this.marginBottom = value.printintegration.marginSelectValue.margin.marginBottom;\r\n          this.marginRight = value.printintegration.marginSelectValue.margin.marginRight;\r\n          this.zoomSize = value.printintegration.zoomSize;\r\n        } else {\r\n          this.distributionSelectValue = this.distributionData[0].value;\r\n          this.pageSizeSelectValue = this.pageSizeData[5].value;\r\n          this.marginSelectValue = this.marginData[0].value;\r\n          this.currentMarginData = this.marginData[0];\r\n        }\r\n        this.farrisDialog.show();\r\n      });\r\n    }\r\n    this.farrisDialog.show();\r\n  }\r\n\r\n  onResized(event: any): void {\r\n    this.size.height = event.newHeight;\r\n    this.size.width = event.newWidth;\r\n  }\r\n\r\n  handlebeforeClose = (): Observable<any> => {\r\n    const self = this;\r\n    self.currentMarginData.margin.marginTop = this.marginTop;\r\n    self.currentMarginData.margin.marginLeft = this.marginLeft;\r\n    self.currentMarginData.margin.marginBottom = this.marginBottom;\r\n    self.currentMarginData.margin.marginRight = this.marginRight;\r\n    self.printIntegrationData = {\r\n      distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),\r\n      pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),\r\n      marginSelectValue: self.currentMarginData, // self.findItem(self.marginData, self.marginSelectValue),\r\n      zoomSize: self.zoomSize\r\n    };\r\n    if (self.printIntegrationData) {\r\n      // tslint:disable-next-line:max-line-length\r\n      self.saveDatas = { Id: EventBus.guid(), printintegration: JSON.stringify(self.printIntegrationData), queryid: self.queryId, schemaId: self.schemaId };\r\n      self.printIntegrationService.savePrintIntegration(self.saveDatas, self.queryRelativeUrl)\r\n        .subscribe();\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  clickConfirm(type: any) {\r\n    const self = this;\r\n    if (!self.currentMarginData) {\r\n      self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.margin'));\r\n      return;\r\n    }\r\n    self.currentMarginData.margin.marginTop = this.marginTop;\r\n    self.currentMarginData.margin.marginLeft = this.marginLeft;\r\n    self.currentMarginData.margin.marginBottom = this.marginBottom;\r\n    self.currentMarginData.margin.marginRight = this.marginRight;\r\n    self.printIntegrationData = {\r\n      distributionSelectValue: self.findItem(self.distributionData, self.distributionSelectValue),\r\n      pageSizeSelectValue: self.findItem(self.pageSizeData, self.pageSizeSelectValue),\r\n      marginSelectValue: self.currentMarginData, // self.findItem(self.marginData, self.marginSelectValue),\r\n      zoomSize: self.zoomSize\r\n    };\r\n\r\n    if (!self.printIntegrationData.distributionSelectValue) {\r\n      self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.distribution'));\r\n      return;\r\n    }\r\n    if (!self.printIntegrationData.pageSizeSelectValue) {\r\n      self.msgService.warning(self.localizeService.getValue('ideCmp.printOption.message.validate.pageSize'));\r\n      return;\r\n    }\r\n    if (type === 'preview') {\r\n      self.printPreview.emit(self.printIntegrationData);\r\n    } else {\r\n      self.printIntegration.emit(self.printIntegrationData);\r\n    }\r\n    self.farrisDialog.close();\r\n  }\r\n\r\n  public onValueChange(value) {\r\n    this.currentMarginData = this.marginData[value.value];\r\n    if (value.value === 3) {\r\n      this.farrisDialog.height = 350;\r\n    } else {\r\n      this.farrisDialog.height = 220;\r\n    }\r\n  }\r\n\r\n  private findItem(list: any, id: any) {\r\n    let item = null;\r\n    if (list && list.length) {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < list.length; i++) {\r\n        if (list[i].value === id) {\r\n          item = list[i];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return item;\r\n  }\r\n\r\n  handleHover(type: any, state: any) {\r\n    this.svgPrint = state === 1;\r\n  }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, Output, OnInit } from '@angular/core';\r\nimport { ResizeSensor } from 'css-element-queries';\r\n\r\nexport class ResizedEvent {\r\n  constructor(\r\n    readonly element: ElementRef,\r\n    readonly newWidth: number,\r\n    readonly newHeight: number,\r\n    readonly oldWidth: number,\r\n    readonly oldHeight: number\r\n  ) {}\r\n}\r\n\r\n@Directive({\r\n  selector: '[resized]'\r\n})\r\nexport class ResizedDirective implements OnInit {\r\n  // tslint:disable-next-line:no-output-rename\r\n  @Output('resized')\r\n  readonly resized = new EventEmitter<ResizedEvent>();\r\n\r\n  private oldWidth: number;\r\n  private oldHeight: number;\r\n\r\n  constructor(private readonly element: ElementRef) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // tslint:disable-next-line:no-unused-expression\r\n    new ResizeSensor(this.element.nativeElement, x => this.onResized());\r\n    this.onResized();\r\n  }\r\n\r\n  private onResized(): void {\r\n    const newWidth = this.element.nativeElement.clientWidth;\r\n    const newHeight = this.element.nativeElement.clientHeight;\r\n\r\n    if (newWidth === this.oldWidth && newHeight === this.oldHeight) {\r\n      return;\r\n    }\r\n\r\n    const event = new ResizedEvent(\r\n      this.element,\r\n      newWidth,\r\n      newHeight,\r\n      this.oldWidth,\r\n      this.oldHeight);\r\n\r\n    this.oldWidth = this.element.nativeElement.clientWidth;\r\n    this.oldHeight = this.element.nativeElement.clientHeight;\r\n\r\n    this.resized.next(event);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { FlexLayoutModule } from '@farris/ui-flex-layout';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { NumberSpinnerModule } from '@farris/ui-number-spinner';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { DatagridModule, ScrollbarModule } from '@farris/ui-datagrid';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { LanguageTextboxModule } from '@farris/ui-language-textbox';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\nimport { ColorPickerModule } from 'ngx-color-picker';\r\nimport { RtfAppHelpModule } from '@gsp-sys/rtf-ui';\r\nimport {RtfAppHelpModule as RtfAppHelpModuleL} from '@gsp-sys/rtf-apphelp';\r\nimport { LocalizeModule } from '@qdp/localize';\r\nimport { FarrisPanelModule } from '@farris/ui-panel';\r\n// component\r\nimport { JointSearchComponent } from './component/joint-search/joint-search.component';\r\nimport { ParasMappingComponent } from './component/paras-mapping/paras-mapping.component';\r\nimport { PrintIntegrationComponent } from './component/print-integration/print-integration.component';\r\nimport { PopupAnchorDirective } from './component/paras-mapping/popup.anchor-target.directive';\r\nimport { ChartsSchemaEditorComponent } from './component/charts-schema-editor/charts-schema-editor.component';\r\nimport { ChartsTypeComponent } from './component/charts-schema-editor/charts-type/charts-type.component';\r\nimport { ChartsDataComponent } from './component/charts-schema-editor/charts-data/charts-data.component';\r\nimport { ChartsStyleComponent } from './component/charts-schema-editor/charts-style/charts-style.component';\r\nimport { SchemaManagerComponent } from './component/schema-manager/schema-manager.component';\r\nimport { SchemaEditorComponent } from './component/schema-editor/schema-editor.component';\r\nimport { ColumnEditorComponent } from './component/schema-editor/column-editor/column-editor.component';\r\nimport { TitleEditorComponent } from './component/schema-editor/title-editor/title-editor.component';\r\nimport { StyleEditorComponent } from './component/schema-editor/style-editor/style-editor.component';\r\nimport { OtherEditorComponent } from './component/schema-editor/other-editor/other-editor.component';\r\nimport { ResizedDirective } from './directive/resized/resized.directive';\r\n// services\r\nimport { ParasMappingService } from './service/paras-mapping/paras-mapping.service';\r\nimport { JointSearchService } from './service/joint-search/joint-search.service';\r\nimport { SchemaService } from './service/schema/schema.service';\r\nimport { PrintIntegrationService } from './service/print-integration/print-integration.service';\r\nimport {ExpressionModule, ExpressionService} from '@gsp-svc/expression';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    JointSearchComponent,\r\n    ParasMappingComponent,\r\n    PopupAnchorDirective,\r\n    ChartsSchemaEditorComponent,\r\n    ChartsTypeComponent,\r\n    ChartsDataComponent,\r\n    ChartsStyleComponent,\r\n    SchemaManagerComponent,\r\n    SchemaEditorComponent,\r\n    ColumnEditorComponent,\r\n    TitleEditorComponent,\r\n    StyleEditorComponent,\r\n    OtherEditorComponent,\r\n    PrintIntegrationComponent,\r\n    ResizedDirective\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ComboListModule,\r\n    InputGroupModule,\r\n    NumberSpinnerModule,\r\n    FarrisDialogModule,\r\n    NotifyModule,\r\n    FDropdownDirectiveTypeModule,\r\n    FlexLayoutModule,\r\n    TreeTableModule,\r\n    PerfectScrollbarModule,\r\n    RtfAppHelpModule,\r\n    ColorPickerModule,\r\n    ScrollbarModule,\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n        ...EditorProviders\r\n    ]),\r\n    FarrisTabsModule,\r\n    RtfAppHelpModuleL,\r\n    // LocalizeModule.forRoot(),\r\n    LanguageTextboxModule,\r\n    FarrisSectionModule,\r\n    ExpressionModule,\r\n    FarrisPanelModule\r\n  ],\r\n  providers: [\r\n    ParasMappingService,\r\n    JointSearchService,\r\n    SchemaService,\r\n    PrintIntegrationService,\r\n    ExpressionService,\r\n  ],\r\n  exports: [\r\n    JointSearchComponent,\r\n    PopupAnchorDirective,\r\n    ParasMappingComponent,\r\n    ChartsSchemaEditorComponent,\r\n    ChartsTypeComponent,\r\n    ChartsDataComponent,\r\n    ChartsStyleComponent,\r\n    SchemaManagerComponent,\r\n    SchemaEditorComponent,\r\n    ColumnEditorComponent,\r\n    TitleEditorComponent,\r\n    StyleEditorComponent,\r\n    OtherEditorComponent,\r\n    PrintIntegrationComponent,\r\n    ResizedDirective\r\n  ]\r\n})\r\nexport class IdeCmpModule {\r\n\r\n}\r\n"]}