'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var calculateFixedTrackSize = function (ref) {
        var max = ref.max;
        var min = ref.min;
        var smallStep = ref.smallStep;
        var fixedTickWidth = ref.fixedTickWidth;

        return ((max - min) / smallStep) * fixedTickWidth;
};

var calculateTrackSize = function (wrapperWidth, offset, showButtons) {
    if ( showButtons === void 0 ) showButtons = true;

    var BUTTONS_COUNT = 2;
    var trackOffset = showButtons ? parseFloat(offset, 10) * BUTTONS_COUNT : 0;
    var trackWidth = wrapperWidth - trackOffset;

    return trackWidth;
};

var calculateTicksCount = function (max, min, smallStep) {
        if ( max === void 0 ) max = 0;
        if ( min === void 0 ) min = 0;
        if ( smallStep === void 0 ) smallStep = 1;

        return calculateAreasCount(max, min, smallStep) + 1;
};

var calculateAreasCount = function (max, min, smallStep) {
    if ( max === void 0 ) max = 0;
    if ( min === void 0 ) min = 0;
    if ( smallStep === void 0 ) smallStep = 1;

    if (smallStep <= 0 ) {
        throw new Error("Invalid argument: smallStep must be a positive number");
    }

    return Math.floor(Math.abs(min - max) / smallStep);
};

var calculateValueFromTick = function (index, ref) {
    var max = ref.max;
    var min = ref.min;
    var smallStep = ref.smallStep;
    var reverse = ref.reverse;
    var vertical = ref.vertical;

    var value = min + (index * smallStep);

    return vertical || reverse ? Math.abs(value - max) : value;
};

var calculateValueFromTrack = function (clientRect, pageOffset, props) {
    var length, wrapperOffset;

    if (props.vertical) {
        var top = clientRect.top;
        var bottom = clientRect.bottom;
        length = top - bottom;
        wrapperOffset = pageOffset.pageY - bottom;
    } else {
        var left = clientRect.left;
        var right = clientRect.right;
        length = right - left;
        wrapperOffset = pageOffset.pageX - left;
    }

    return valueFromTrack(props, wrapperOffset, length);
};

var valueFromTrack = function (props, wrapperOffset, length) {
    var max = props.max;
    var min = props.min;
    var reverse = props.reverse;
    var smallStep = props.smallStep;
    var distance = max - min;
    var clickOffset = wrapperOffset / length;
    var maxTickValue = distance - (distance % smallStep);
    var maxOffset = (100 / distance) * maxTickValue / 100;
    var absValue = (wrapperOffset / length) * distance;
    var value = max;

    if (clickOffset < maxOffset) {
        value = reverse ? max - absValue : absValue + min;
    }

    return snapValue(extendProps(props, { value: value }));
};

var calculateTickSizes = function (trackSize, min, max, step) {
    var elementCount = Math.floor((max - min) / step) + 1;
    var distStep = trackSize / (max - min);
    var result = [];
    var usedSpace = 0;
    var endPoint = 0;

    for (var i = 0; i < elementCount; i++) {
        if (i === 0 || i === elementCount - 1) {
            endPoint += (step / 2) * distStep;
        } else {
            endPoint += step * distStep;
        }

        var size = Math.round(endPoint - usedSpace);

        result.push(size);

        usedSpace += size;
    }

    return result;
};

var calculateHandlePosition = function (ref) {
    var handleWidth = ref.handleWidth;
    var trackWidth = ref.trackWidth;
    var min = ref.min;
    var max = ref.max;
    var reverse = ref.reverse;
    var value = ref.value;

    var halfHandleWidth = Math.floor(handleWidth / 2);
    var step = trackWidth / Math.abs(max - min);
    var pos = step * (value - min);
    if (reverse) {
        pos = trackWidth - pos;
    }

    return Math.floor(pos - halfHandleWidth);
};

var decreaseValueToStep = function (ref) {
    var max = ref.max;
    var min = ref.min;
    var smallStep = ref.smallStep;
    var value = ref.value;

    var result;
    if (value % smallStep === 0) {
        result = value - smallStep;
    } else {
        result = value - (value % smallStep);
    }
    return trimValue(max, min, result);
};

var increaseValueToStep = function (ref) {
    var max = ref.max;
    var min = ref.min;
    var smallStep = ref.smallStep;
    var value = ref.value;

    var result = value - (value % smallStep) + smallStep;

    return trimValue(max, min, result);
};

var snapValue = function (props) {
    var smallStep = props.smallStep;
    var value = props.value;
    var left = decreaseValueToStep(props);
    var right = increaseValueToStep(props);

    if (value % smallStep === 0) {
        return value;
    }

    if (right - value <= smallStep / 2) {
        return right;
    }

    return left;
};

var trimValue = function (max, min, value) {
    if (value > max) {
        return max;
    }

    if (value < min) {
        return min;
    }

    return value;
};

var identity = function (value) { return value; };

var extendProps = function (target) {
    var sources = [], len = arguments.length - 1;
    while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];

    return Object.assign.apply(Object, [ {}, target ].concat( sources ));
};

var SliderUtil = {
    calculateFixedTrackSize: calculateFixedTrackSize,
    calculateValueFromTick: calculateValueFromTick,
    calculateValueFromTrack: calculateValueFromTrack,
    calculateTrackSize: calculateTrackSize,
    calculateTicksCount: calculateTicksCount,
    calculateTickSizes: calculateTickSizes,
    calculateHandlePosition: calculateHandlePosition,
    decreaseValueToStep: decreaseValueToStep,
    identity: identity,
    increaseValueToStep: increaseValueToStep,
    trimValue: trimValue,
    snapValue: snapValue,
    valueFromTrack: valueFromTrack
};

var SliderModel = function SliderModel(props, wrapper, track) {
    this.props = props;
    this.wrapper = wrapper;
    this.track = track;
    this.tickSizes = this.getTickSizes();
};

SliderModel.prototype.getTickSizes = function getTickSizes () {
    var ref = this.props;
        var max = ref.max;
        var min = ref.min;
        var smallStep = ref.smallStep;
    var trackWidth = this.trackWidth();

    return SliderUtil.calculateTickSizes(trackWidth, min, max, smallStep);
};

SliderModel.prototype.trackWidth = function trackWidth () {
    if (this.props.fixedTickWidth) {
        return SliderUtil.calculateFixedTrackSize(this.props);
    }

    return SliderUtil.calculateTrackSize(
        this.elementSize(this.wrapper),
        this.elementOffset(this.track),
        this.props.buttons
    );
};

SliderModel.prototype.resizeTrack = function resizeTrack () {
    var orientation = this.props.vertical ? 'height' : 'width';
    var trackWidth = this.trackWidth();

    this.track.style[orientation] = trackWidth + "px";
};

SliderModel.prototype.resizeTicks = function resizeTicks (ticksContainer, ticks) {
        var this$1 = this;

    var dimension = this.props.vertical ? "height" : "width";

    Array.prototype.slice.call(ticks).map(function (tick, index) { return tick.style[dimension] = (this$1.tickSizes[index]) + "px"; });

    if (this.props.vertical) {
        this.adjustPadding(ticksContainer);
    }
};

SliderModel.prototype.resizeWrapper = function resizeWrapper () {
    var dimension = this.props.vertical ? "height" : "width";
    var wrapperSize = this.elementSize(this.wrapper);
    var trackWidth = SliderUtil.calculateTrackSize(wrapperSize, this.elementOffset(this.track));
    var fixedTrackWidth = SliderUtil.calculateFixedTrackSize(this.props);

    if (trackWidth > fixedTrackWidth) {
        this.wrapper.parentElement.style[dimension] = (wrapperSize - (trackWidth - fixedTrackWidth)) + "px";
    } else {
        this.wrapper.parentElement.style[dimension] = (wrapperSize + (fixedTrackWidth - trackWidth)) + "px";
    }
};

SliderModel.prototype.positionHandle = function positionHandle (dragHandle) {
    var ref = this.props;
        var max = ref.max;
        var min = ref.min;
        var reverse = ref.reverse;
        var vertical = ref.vertical;
    var position = vertical ? 'bottom' : 'left';
    var trackWidth = this.trackWidth();
    var value = SliderUtil.trimValue(max, min, this.props.value);

    this.handlePosition = SliderUtil.calculateHandlePosition({
        min: min,
        max: max,
        reverse: reverse,
        value: value,
        trackWidth: trackWidth,
        handleWidth: dragHandle.offsetWidth
    });

    dragHandle.style[position] = (this.handlePosition) + "px";
};

SliderModel.prototype.positionSelection = function positionSelection (dragHandle, selection) {
    var ref = this.props;
        var reverse = ref.reverse;
        var vertical = ref.vertical;
    var dimension = vertical ? 'height' : 'width';
    var handleWidth = Math.floor(dragHandle.offsetWidth / 2);
    var size = this.handlePosition + handleWidth;

    if (reverse) {
        size = this.trackWidth() - size;
    }

    selection.style[dimension] = size + "px";
};

SliderModel.prototype.adjustPadding = function adjustPadding (ticksContainer) {
    var totalTickSize = this.tickSizes.reduce(function (prev, curr) { return prev + curr; }, 0);
    var trackWidth = this.trackWidth();
    var reminder = trackWidth - totalTickSize;

    if (reminder !== 0) {
        var padding = reminder + this.elementOffset(this.track);
        ticksContainer.style.paddingTop = padding + "px";
    }
};

SliderModel.prototype.elementOffset = function elementOffset (element) {
    var ref = this.props;
        var vertical = ref.vertical;
    var style = getComputedStyle(element);

    return parseInt(vertical ? style.bottom : style.left, 10);
};

SliderModel.prototype.elementSize = function elementSize (element) {
    var ref = this.props;
        var vertical = ref.vertical;

    return vertical ? element.clientHeight : element.clientWidth;
};

var Model = function Model(value, animate) {
    if ( value === void 0 ) value = 0;

    this.handle = {
        transform: 'translateX(' + value + 'px)',
        transition: animate
    };
};

var DEFAULT_THRESHOLD = 5;

var noop = function () { /*noop*/ };

var SwitchController = function SwitchController(updateView, onChange) {
    var this$1 = this;
    if ( updateView === void 0 ) updateView = noop;
    if ( onChange === void 0 ) onChange = noop;

    this.handlePosition = 0;
    this.wrapperOffset = 0;
    this.handleOffset = 0;
    this.handleMargin = 4;

    this.updateView = updateView;
    this.onChange = onChange;

    this.change = function (checked) {
        this$1.checked = checked;

        this$1.updateView(this$1.updateModel(checked ? this$1.constrain : 0));

        this$1.onChange(checked);
    };

    this.limit = function (value) {
        if (value > this$1.constrain) {
            return this$1.constrain;
        }

        if (value < 0) {
            return 0;
        }

        return value;
    };

    this.addAnimation = function (model) {
        if (model.transition === true) {
            model.transition = 'all 200ms ease-out';
        } else {
            model.transition = 'none';
        }
        return model;
    };

    this.onPress = function (ref) {
        var pageX = ref.pageX;

        this$1.lastPressX = this$1.originalPressX = pageX;
    };

    this.onRelease = function (ref) {
        var pageX = ref.pageX;

        var delta = Math.abs(this$1.originalPressX - pageX);
        var snapPoint = this$1.constrain / 2;
        var checked = delta < DEFAULT_THRESHOLD ? !this$1.checked : this$1.handlePosition > snapPoint;

        this$1.change(checked);
    };

    this.onDrag = function (ref) {
        var pageX = ref.pageX;

        var ref$1 = this$1.coords;
        var left = ref$1.left;
        var right = ref$1.right;
        var overElement = pageX > left && pageX < right;

        if (overElement) {
            var delta = this$1.reverse ? this$1.lastPressX - pageX : pageX - this$1.lastPressX;
            var position = this$1.limit(this$1.handlePosition + delta);

            this$1.lastPressX = pageX;
            this$1.handlePosition = position;
            this$1.updateView(this$1.updateModel(this$1.handlePosition));
        }

        if (pageX > right) {
            this$1.updateView(this$1.updateModel(this$1.reverse ? 0 : this$1.constrain));
        }

        if (pageX < left) {
            this$1.updateView(this$1.updateModel(this$1.reverse ? this$1.constrain : 0));
        }
    };
};

var prototypeAccessors = { constrain: {} };

prototypeAccessors.constrain.get = function () {
    return this.wrapperOffset - this.handleOffset - this.handleMargin;
};

SwitchController.prototype.updateState = function updateState (ref) {
        var wrapperOffset = ref.wrapperOffset;
        var handleOffset = ref.handleOffset;
        var checked = ref.checked;
        var animate = ref.animate; if ( animate === void 0 ) animate = true;
        var coords = ref.coords;
        var handleMargin = ref.handleMargin;
        var reverse = ref.reverse;

    this.wrapperOffset = wrapperOffset;
    this.handleOffset = handleOffset;
    this.coords = coords;
    this.handleMargin = handleMargin;

    this.checked = checked;
    this.reverse = reverse;

    this.updateView(this.updateModel(checked ? this.constrain : 0, animate));
};

SwitchController.prototype.updateModel = function updateModel (position, animate) {
        if ( animate === void 0 ) animate = true;

    var pos = this.reverse ? this.wrapperOffset / 2 - position : position;
    return new Model(pos, animate);
};

Object.defineProperties( SwitchController.prototype, prototypeAccessors );

exports.SliderModel = SliderModel;
exports.SliderUtil = SliderUtil;
exports.SwitchController = SwitchController;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9yb290L3NyYy9naXRodWIuY29tL3RlbGVyaWsva2VuZG8taW5wdXRzLWNvbW1vbi9zcmMvU2xpZGVyVXRpbC5qcyIsIi9yb290L3NyYy9naXRodWIuY29tL3RlbGVyaWsva2VuZG8taW5wdXRzLWNvbW1vbi9zcmMvU2xpZGVyTW9kZWwuanMiLCIvcm9vdC9zcmMvZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLWlucHV0cy1jb21tb24vc3JjL1N3aXRjaE1vZGVsLmpzIiwiL3Jvb3Qvc3JjL2dpdGh1Yi5jb20vdGVsZXJpay9rZW5kby1pbnB1dHMtY29tbW9uL3NyYy9Td2l0Y2hDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhbGN1bGF0ZUZpeGVkVHJhY2tTaXplID0gKHsgbWF4LCBtaW4sIHNtYWxsU3RlcCwgZml4ZWRUaWNrV2lkdGggfSkgPT5cbiAgICAoKG1heCAtIG1pbikgLyBzbWFsbFN0ZXApICogZml4ZWRUaWNrV2lkdGg7XG5cbmNvbnN0IGNhbGN1bGF0ZVRyYWNrU2l6ZSA9ICh3cmFwcGVyV2lkdGgsIG9mZnNldCwgc2hvd0J1dHRvbnMgPSB0cnVlKSA9PiB7XG4gICAgY29uc3QgQlVUVE9OU19DT1VOVCA9IDI7XG4gICAgY29uc3QgdHJhY2tPZmZzZXQgPSBzaG93QnV0dG9ucyA/IHBhcnNlRmxvYXQob2Zmc2V0LCAxMCkgKiBCVVRUT05TX0NPVU5UIDogMDtcbiAgICBjb25zdCB0cmFja1dpZHRoID0gd3JhcHBlcldpZHRoIC0gdHJhY2tPZmZzZXQ7XG5cbiAgICByZXR1cm4gdHJhY2tXaWR0aDtcbn07XG5cbmNvbnN0IGNhbGN1bGF0ZVRpY2tzQ291bnQgPSAobWF4ID0gMCwgbWluID0gMCwgc21hbGxTdGVwID0gMSkgPT5cbiAgICBjYWxjdWxhdGVBcmVhc0NvdW50KG1heCwgbWluLCBzbWFsbFN0ZXApICsgMTtcblxuY29uc3QgY2FsY3VsYXRlQXJlYXNDb3VudCA9IChtYXggPSAwLCBtaW4gPSAwLCBzbWFsbFN0ZXAgPSAxKSA9PiB7XG4gICAgaWYgKHNtYWxsU3RlcCA8PSAwICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50OiBzbWFsbFN0ZXAgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLmFicyhtaW4gLSBtYXgpIC8gc21hbGxTdGVwKTtcbn07XG5cbmNvbnN0IGNhbGN1bGF0ZVZhbHVlRnJvbVRpY2sgPSAoaW5kZXgsIHsgbWF4LCBtaW4sIHNtYWxsU3RlcCwgcmV2ZXJzZSwgdmVydGljYWwgfSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gbWluICsgKGluZGV4ICogc21hbGxTdGVwKTtcblxuICAgIHJldHVybiB2ZXJ0aWNhbCB8fCByZXZlcnNlID8gTWF0aC5hYnModmFsdWUgLSBtYXgpIDogdmFsdWU7XG59O1xuXG5jb25zdCBjYWxjdWxhdGVWYWx1ZUZyb21UcmFjayA9IChjbGllbnRSZWN0LCBwYWdlT2Zmc2V0LCBwcm9wcykgPT4ge1xuICAgIGxldCBsZW5ndGgsIHdyYXBwZXJPZmZzZXQ7XG5cbiAgICBpZiAocHJvcHMudmVydGljYWwpIHtcbiAgICAgICAgY29uc3QgeyB0b3AsIGJvdHRvbSB9ID0gY2xpZW50UmVjdDtcbiAgICAgICAgbGVuZ3RoID0gdG9wIC0gYm90dG9tO1xuICAgICAgICB3cmFwcGVyT2Zmc2V0ID0gcGFnZU9mZnNldC5wYWdlWSAtIGJvdHRvbTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBjbGllbnRSZWN0O1xuICAgICAgICBsZW5ndGggPSByaWdodCAtIGxlZnQ7XG4gICAgICAgIHdyYXBwZXJPZmZzZXQgPSBwYWdlT2Zmc2V0LnBhZ2VYIC0gbGVmdDtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVGcm9tVHJhY2socHJvcHMsIHdyYXBwZXJPZmZzZXQsIGxlbmd0aCk7XG59O1xuXG5jb25zdCB2YWx1ZUZyb21UcmFjayA9IChwcm9wcywgd3JhcHBlck9mZnNldCwgbGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgeyBtYXgsIG1pbiwgcmV2ZXJzZSwgc21hbGxTdGVwIH0gPSBwcm9wcztcbiAgICBjb25zdCBkaXN0YW5jZSA9IG1heCAtIG1pbjtcbiAgICBjb25zdCBjbGlja09mZnNldCA9IHdyYXBwZXJPZmZzZXQgLyBsZW5ndGg7XG4gICAgY29uc3QgbWF4VGlja1ZhbHVlID0gZGlzdGFuY2UgLSAoZGlzdGFuY2UgJSBzbWFsbFN0ZXApO1xuICAgIGNvbnN0IG1heE9mZnNldCA9ICgxMDAgLyBkaXN0YW5jZSkgKiBtYXhUaWNrVmFsdWUgLyAxMDA7XG4gICAgY29uc3QgYWJzVmFsdWUgPSAod3JhcHBlck9mZnNldCAvIGxlbmd0aCkgKiBkaXN0YW5jZTtcbiAgICBsZXQgdmFsdWUgPSBtYXg7XG5cbiAgICBpZiAoY2xpY2tPZmZzZXQgPCBtYXhPZmZzZXQpIHtcbiAgICAgICAgdmFsdWUgPSByZXZlcnNlID8gbWF4IC0gYWJzVmFsdWUgOiBhYnNWYWx1ZSArIG1pbjtcbiAgICB9XG5cbiAgICByZXR1cm4gc25hcFZhbHVlKGV4dGVuZFByb3BzKHByb3BzLCB7IHZhbHVlIH0pKTtcbn07XG5cbmNvbnN0IGNhbGN1bGF0ZVRpY2tTaXplcyA9ICh0cmFja1NpemUsIG1pbiwgbWF4LCBzdGVwKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudENvdW50ID0gTWF0aC5mbG9vcigobWF4IC0gbWluKSAvIHN0ZXApICsgMTtcbiAgICBjb25zdCBkaXN0U3RlcCA9IHRyYWNrU2l6ZSAvIChtYXggLSBtaW4pO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBsZXQgdXNlZFNwYWNlID0gMDtcbiAgICBsZXQgZW5kUG9pbnQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50Q291bnQ7IGkrKykge1xuICAgICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSBlbGVtZW50Q291bnQgLSAxKSB7XG4gICAgICAgICAgICBlbmRQb2ludCArPSAoc3RlcCAvIDIpICogZGlzdFN0ZXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbmRQb2ludCArPSBzdGVwICogZGlzdFN0ZXA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaXplID0gTWF0aC5yb3VuZChlbmRQb2ludCAtIHVzZWRTcGFjZSk7XG5cbiAgICAgICAgcmVzdWx0LnB1c2goc2l6ZSk7XG5cbiAgICAgICAgdXNlZFNwYWNlICs9IHNpemU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNvbnN0IGNhbGN1bGF0ZUhhbmRsZVBvc2l0aW9uID0gKHsgaGFuZGxlV2lkdGgsIHRyYWNrV2lkdGgsIG1pbiwgbWF4LCByZXZlcnNlLCB2YWx1ZSB9KSA9PiB7XG4gICAgY29uc3QgaGFsZkhhbmRsZVdpZHRoID0gTWF0aC5mbG9vcihoYW5kbGVXaWR0aCAvIDIpO1xuICAgIGNvbnN0IHN0ZXAgPSB0cmFja1dpZHRoIC8gTWF0aC5hYnMobWF4IC0gbWluKTtcbiAgICBsZXQgcG9zID0gc3RlcCAqICh2YWx1ZSAtIG1pbik7XG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgcG9zID0gdHJhY2tXaWR0aCAtIHBvcztcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5mbG9vcihwb3MgLSBoYWxmSGFuZGxlV2lkdGgpO1xufTtcblxuY29uc3QgZGVjcmVhc2VWYWx1ZVRvU3RlcCA9ICh7IG1heCwgbWluLCBzbWFsbFN0ZXAsIHZhbHVlIH0pID0+IHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmICh2YWx1ZSAlIHNtYWxsU3RlcCA9PT0gMCkge1xuICAgICAgICByZXN1bHQgPSB2YWx1ZSAtIHNtYWxsU3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSB2YWx1ZSAtICh2YWx1ZSAlIHNtYWxsU3RlcCk7XG4gICAgfVxuICAgIHJldHVybiB0cmltVmFsdWUobWF4LCBtaW4sIHJlc3VsdCk7XG59O1xuXG5jb25zdCBpbmNyZWFzZVZhbHVlVG9TdGVwID0gKHsgbWF4LCBtaW4sIHNtYWxsU3RlcCwgdmFsdWUgfSkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHZhbHVlIC0gKHZhbHVlICUgc21hbGxTdGVwKSArIHNtYWxsU3RlcDtcblxuICAgIHJldHVybiB0cmltVmFsdWUobWF4LCBtaW4sIHJlc3VsdCk7XG59O1xuXG5jb25zdCBzbmFwVmFsdWUgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHNtYWxsU3RlcCwgdmFsdWUgfSA9IHByb3BzO1xuICAgIGNvbnN0IGxlZnQgPSBkZWNyZWFzZVZhbHVlVG9TdGVwKHByb3BzKTtcbiAgICBjb25zdCByaWdodCA9IGluY3JlYXNlVmFsdWVUb1N0ZXAocHJvcHMpO1xuXG4gICAgaWYgKHZhbHVlICUgc21hbGxTdGVwID09PSAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAocmlnaHQgLSB2YWx1ZSA8PSBzbWFsbFN0ZXAgLyAyKSB7XG4gICAgICAgIHJldHVybiByaWdodDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGVmdDtcbn07XG5cbmNvbnN0IHRyaW1WYWx1ZSA9IChtYXgsIG1pbiwgdmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPiBtYXgpIHtcbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPCBtaW4pIHtcbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuXG5jb25zdCBpZGVudGl0eSA9ICh2YWx1ZSkgPT4gdmFsdWU7XG5cbmNvbnN0IGV4dGVuZFByb3BzID0gKHRhcmdldCwgLi4uc291cmNlcykgPT4gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0LCAuLi5zb3VyY2VzKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNhbGN1bGF0ZUZpeGVkVHJhY2tTaXplLFxuICAgIGNhbGN1bGF0ZVZhbHVlRnJvbVRpY2ssXG4gICAgY2FsY3VsYXRlVmFsdWVGcm9tVHJhY2ssXG4gICAgY2FsY3VsYXRlVHJhY2tTaXplLFxuICAgIGNhbGN1bGF0ZVRpY2tzQ291bnQsXG4gICAgY2FsY3VsYXRlVGlja1NpemVzLFxuICAgIGNhbGN1bGF0ZUhhbmRsZVBvc2l0aW9uLFxuICAgIGRlY3JlYXNlVmFsdWVUb1N0ZXAsXG4gICAgaWRlbnRpdHksXG4gICAgaW5jcmVhc2VWYWx1ZVRvU3RlcCxcbiAgICB0cmltVmFsdWUsXG4gICAgc25hcFZhbHVlLFxuICAgIHZhbHVlRnJvbVRyYWNrXG59O1xuIiwiaW1wb3J0IFNsaWRlclV0aWwgZnJvbSAnLi9TbGlkZXJVdGlsJztcblxuY2xhc3MgU2xpZGVyTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCB3cmFwcGVyLCB0cmFjaykge1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICAgIHRoaXMudHJhY2sgPSB0cmFjaztcbiAgICAgICAgdGhpcy50aWNrU2l6ZXMgPSB0aGlzLmdldFRpY2tTaXplcygpO1xuICAgIH1cblxuICAgIGdldFRpY2tTaXplcygpIHtcbiAgICAgICAgY29uc3QgeyBtYXgsIG1pbiwgc21hbGxTdGVwIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB0cmFja1dpZHRoID0gdGhpcy50cmFja1dpZHRoKCk7XG5cbiAgICAgICAgcmV0dXJuIFNsaWRlclV0aWwuY2FsY3VsYXRlVGlja1NpemVzKHRyYWNrV2lkdGgsIG1pbiwgbWF4LCBzbWFsbFN0ZXApO1xuICAgIH1cblxuICAgIHRyYWNrV2lkdGgoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmZpeGVkVGlja1dpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gU2xpZGVyVXRpbC5jYWxjdWxhdGVGaXhlZFRyYWNrU2l6ZSh0aGlzLnByb3BzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBTbGlkZXJVdGlsLmNhbGN1bGF0ZVRyYWNrU2l6ZShcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUodGhpcy53cmFwcGVyKSxcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE9mZnNldCh0aGlzLnRyYWNrKSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYnV0dG9uc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlc2l6ZVRyYWNrKCkge1xuICAgICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHRoaXMucHJvcHMudmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgICAgIGNvbnN0IHRyYWNrV2lkdGggPSB0aGlzLnRyYWNrV2lkdGgoKTtcblxuICAgICAgICB0aGlzLnRyYWNrLnN0eWxlW29yaWVudGF0aW9uXSA9IGAke3RyYWNrV2lkdGh9cHhgO1xuICAgIH1cblxuICAgIHJlc2l6ZVRpY2tzKHRpY2tzQ29udGFpbmVyLCB0aWNrcykge1xuICAgICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLnByb3BzLnZlcnRpY2FsID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIjtcblxuICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aWNrcykubWFwKCh0aWNrLCBpbmRleCkgPT4gdGljay5zdHlsZVtkaW1lbnNpb25dID0gYCR7dGhpcy50aWNrU2l6ZXNbaW5kZXhdfXB4YCk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmVydGljYWwpIHtcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0UGFkZGluZyh0aWNrc0NvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNpemVXcmFwcGVyKCkge1xuICAgICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLnByb3BzLnZlcnRpY2FsID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIjtcbiAgICAgICAgY29uc3Qgd3JhcHBlclNpemUgPSB0aGlzLmVsZW1lbnRTaXplKHRoaXMud3JhcHBlcik7XG4gICAgICAgIGNvbnN0IHRyYWNrV2lkdGggPSBTbGlkZXJVdGlsLmNhbGN1bGF0ZVRyYWNrU2l6ZSh3cmFwcGVyU2l6ZSwgdGhpcy5lbGVtZW50T2Zmc2V0KHRoaXMudHJhY2spKTtcbiAgICAgICAgY29uc3QgZml4ZWRUcmFja1dpZHRoID0gU2xpZGVyVXRpbC5jYWxjdWxhdGVGaXhlZFRyYWNrU2l6ZSh0aGlzLnByb3BzKTtcblxuICAgICAgICBpZiAodHJhY2tXaWR0aCA+IGZpeGVkVHJhY2tXaWR0aCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnBhcmVudEVsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IGAkeyB3cmFwcGVyU2l6ZSAtICh0cmFja1dpZHRoIC0gZml4ZWRUcmFja1dpZHRoKX1weGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIucGFyZW50RWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gYCR7IHdyYXBwZXJTaXplICsgKGZpeGVkVHJhY2tXaWR0aCAtIHRyYWNrV2lkdGgpfXB4YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBvc2l0aW9uSGFuZGxlKGRyYWdIYW5kbGUpIHtcbiAgICAgICAgY29uc3QgeyBtYXgsIG1pbiwgcmV2ZXJzZSwgdmVydGljYWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmVydGljYWwgPyAnYm90dG9tJyA6ICdsZWZ0JztcbiAgICAgICAgY29uc3QgdHJhY2tXaWR0aCA9IHRoaXMudHJhY2tXaWR0aCgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IFNsaWRlclV0aWwudHJpbVZhbHVlKG1heCwgbWluLCB0aGlzLnByb3BzLnZhbHVlKTtcblxuICAgICAgICB0aGlzLmhhbmRsZVBvc2l0aW9uID0gU2xpZGVyVXRpbC5jYWxjdWxhdGVIYW5kbGVQb3NpdGlvbih7XG4gICAgICAgICAgICBtaW4sXG4gICAgICAgICAgICBtYXgsXG4gICAgICAgICAgICByZXZlcnNlLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB0cmFja1dpZHRoLFxuICAgICAgICAgICAgaGFuZGxlV2lkdGg6IGRyYWdIYW5kbGUub2Zmc2V0V2lkdGhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZHJhZ0hhbmRsZS5zdHlsZVtwb3NpdGlvbl0gPSBgJHt0aGlzLmhhbmRsZVBvc2l0aW9ufXB4YDtcbiAgICB9XG5cbiAgICBwb3NpdGlvblNlbGVjdGlvbihkcmFnSGFuZGxlLCBzZWxlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgeyByZXZlcnNlLCB2ZXJ0aWNhbCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgZGltZW5zaW9uID0gdmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgICAgIGNvbnN0IGhhbmRsZVdpZHRoID0gTWF0aC5mbG9vcihkcmFnSGFuZGxlLm9mZnNldFdpZHRoIC8gMik7XG4gICAgICAgIGxldCBzaXplID0gdGhpcy5oYW5kbGVQb3NpdGlvbiArIGhhbmRsZVdpZHRoO1xuXG4gICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICBzaXplID0gdGhpcy50cmFja1dpZHRoKCkgLSBzaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0aW9uLnN0eWxlW2RpbWVuc2lvbl0gPSBgJHtzaXplfXB4YDtcbiAgICB9XG5cbiAgICBhZGp1c3RQYWRkaW5nKHRpY2tzQ29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsVGlja1NpemUgPSB0aGlzLnRpY2tTaXplcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHByZXYgKyBjdXJyLCAwKTtcbiAgICAgICAgY29uc3QgdHJhY2tXaWR0aCA9IHRoaXMudHJhY2tXaWR0aCgpO1xuICAgICAgICBjb25zdCByZW1pbmRlciA9IHRyYWNrV2lkdGggLSB0b3RhbFRpY2tTaXplO1xuXG4gICAgICAgIGlmIChyZW1pbmRlciAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgcGFkZGluZyA9IHJlbWluZGVyICsgdGhpcy5lbGVtZW50T2Zmc2V0KHRoaXMudHJhY2spO1xuICAgICAgICAgICAgdGlja3NDb250YWluZXIuc3R5bGUucGFkZGluZ1RvcCA9IGAke3BhZGRpbmd9cHhgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZWxlbWVudE9mZnNldChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHsgdmVydGljYWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgICAgICByZXR1cm4gcGFyc2VJbnQodmVydGljYWwgPyBzdHlsZS5ib3R0b20gOiBzdHlsZS5sZWZ0LCAxMCk7XG4gICAgfVxuXG4gICAgZWxlbWVudFNpemUoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB7IHZlcnRpY2FsIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiB2ZXJ0aWNhbCA/IGVsZW1lbnQuY2xpZW50SGVpZ2h0IDogZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlck1vZGVsO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlID0gMCwgYW5pbWF0ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZSA9IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHZhbHVlICsgJ3B4KScsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBhbmltYXRlXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IE1vZGVsIGZyb20gJy4vU3dpdGNoTW9kZWwnO1xuXG5jb25zdCBERUZBVUxUX1RIUkVTSE9MRCA9IDU7XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7IC8qbm9vcCovIH07XG5cbmNsYXNzIFN3aXRjaENvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZVZpZXcgPSBub29wLCBvbkNoYW5nZSA9IG5vb3ApIHtcbiAgICAgICAgdGhpcy5oYW5kbGVQb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMud3JhcHBlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuaGFuZGxlT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5oYW5kbGVNYXJnaW4gPSA0O1xuXG4gICAgICAgIHRoaXMudXBkYXRlVmlldyA9IHVwZGF0ZVZpZXc7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcblxuICAgICAgICB0aGlzLmNoYW5nZSA9IChjaGVja2VkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBjaGVja2VkO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcodGhpcy51cGRhdGVNb2RlbChjaGVja2VkID8gdGhpcy5jb25zdHJhaW4gOiAwKSk7XG5cbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoY2hlY2tlZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5saW1pdCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlID4gdGhpcy5jb25zdHJhaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uID0gKG1vZGVsKSA9PiB7XG4gICAgICAgICAgICBpZiAobW9kZWwudHJhbnNpdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIG1vZGVsLnRyYW5zaXRpb24gPSAnYWxsIDIwMG1zIGVhc2Utb3V0JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZWwudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uUHJlc3MgPSAoeyBwYWdlWCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxhc3RQcmVzc1ggPSB0aGlzLm9yaWdpbmFsUHJlc3NYID0gcGFnZVg7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vblJlbGVhc2UgPSAoeyBwYWdlWCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKHRoaXMub3JpZ2luYWxQcmVzc1ggLSBwYWdlWCk7XG4gICAgICAgICAgICBjb25zdCBzbmFwUG9pbnQgPSB0aGlzLmNvbnN0cmFpbiAvIDI7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGVsdGEgPCBERUZBVUxUX1RIUkVTSE9MRCA/ICF0aGlzLmNoZWNrZWQgOiB0aGlzLmhhbmRsZVBvc2l0aW9uID4gc25hcFBvaW50O1xuXG4gICAgICAgICAgICB0aGlzLmNoYW5nZShjaGVja2VkKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uRHJhZyA9ICh7IHBhZ2VYIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMuY29vcmRzO1xuICAgICAgICAgICAgY29uc3Qgb3ZlckVsZW1lbnQgPSBwYWdlWCA+IGxlZnQgJiYgcGFnZVggPCByaWdodDtcblxuICAgICAgICAgICAgaWYgKG92ZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLnJldmVyc2UgPyB0aGlzLmxhc3RQcmVzc1ggLSBwYWdlWCA6IHBhZ2VYIC0gdGhpcy5sYXN0UHJlc3NYO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5saW1pdCh0aGlzLmhhbmRsZVBvc2l0aW9uICsgZGVsdGEpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UHJlc3NYID0gcGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldyh0aGlzLnVwZGF0ZU1vZGVsKHRoaXMuaGFuZGxlUG9zaXRpb24pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VYID4gcmlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcodGhpcy51cGRhdGVNb2RlbCh0aGlzLnJldmVyc2UgPyAwIDogdGhpcy5jb25zdHJhaW4pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VYIDwgbGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldyh0aGlzLnVwZGF0ZU1vZGVsKHRoaXMucmV2ZXJzZSA/IHRoaXMuY29uc3RyYWluIDogMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldCBjb25zdHJhaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXJPZmZzZXQgLSB0aGlzLmhhbmRsZU9mZnNldCAtIHRoaXMuaGFuZGxlTWFyZ2luO1xuICAgIH1cblxuICAgIHVwZGF0ZVN0YXRlKHsgd3JhcHBlck9mZnNldCwgaGFuZGxlT2Zmc2V0LCBjaGVja2VkLCBhbmltYXRlID0gdHJ1ZSwgY29vcmRzLCBoYW5kbGVNYXJnaW4sIHJldmVyc2UgfSkge1xuICAgICAgICB0aGlzLndyYXBwZXJPZmZzZXQgPSB3cmFwcGVyT2Zmc2V0O1xuICAgICAgICB0aGlzLmhhbmRsZU9mZnNldCA9IGhhbmRsZU9mZnNldDtcbiAgICAgICAgdGhpcy5jb29yZHMgPSBjb29yZHM7XG4gICAgICAgIHRoaXMuaGFuZGxlTWFyZ2luID0gaGFuZGxlTWFyZ2luO1xuXG4gICAgICAgIHRoaXMuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgICAgIHRoaXMucmV2ZXJzZSA9IHJldmVyc2U7XG5cbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KHRoaXMudXBkYXRlTW9kZWwoY2hlY2tlZCA/IHRoaXMuY29uc3RyYWluIDogMCwgYW5pbWF0ZSkpO1xuICAgIH1cblxuICAgIHVwZGF0ZU1vZGVsKHBvc2l0aW9uLCBhbmltYXRlID0gdHJ1ZSkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5yZXZlcnNlID8gdGhpcy53cmFwcGVyT2Zmc2V0IC8gMiAtIHBvc2l0aW9uIDogcG9zaXRpb247XG4gICAgICAgIHJldHVybiBuZXcgTW9kZWwocG9zLCBhbmltYXRlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN3aXRjaENvbnRyb2xsZXI7XG4iXSwibmFtZXMiOlsiY29uc3QiLCJsZXQiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUFBLElBQU0sdUJBQXVCLEdBQUcsVUFBQyxHQUFBLEVBQXlDO1lBQXZDLEdBQUcsV0FBRTtZQUFBLEdBQUcsV0FBRTtZQUFBLFNBQVMsaUJBQUU7WUFBQSxjQUFjOztlQUNsRSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLGNBQWM7Q0FBQSxDQUFDOztBQUUvQ0EsSUFBTSxrQkFBa0IsR0FBRyxVQUFDLFlBQVksRUFBRSxNQUFNLEVBQUUsV0FBa0IsRUFBRTs2Q0FBVCxHQUFHLElBQUk7O0lBQ2hFQSxJQUFNLGFBQWEsR0FBRyxDQUFDLENBQUM7SUFDeEJBLElBQU0sV0FBVyxHQUFHLFdBQVcsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxHQUFHLGFBQWEsR0FBRyxDQUFDLENBQUM7SUFDN0VBLElBQU0sVUFBVSxHQUFHLFlBQVksR0FBRyxXQUFXLENBQUM7O0lBRTlDLE9BQU8sVUFBVSxDQUFDO0NBQ3JCLENBQUM7O0FBRUZBLElBQU0sbUJBQW1CLEdBQUcsVUFBQyxHQUFPLEVBQUUsR0FBTyxFQUFFLFNBQWEsRUFBRTtpQ0FBOUIsR0FBRyxDQUFDLENBQUs7aUNBQUEsR0FBRyxDQUFDLENBQVc7NkNBQUEsR0FBRyxDQUFDOztlQUN4RCxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUM7Q0FBQSxDQUFDOztBQUVqREEsSUFB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