{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@gspwidget/widget-devkit/lib/widget-registry/widget-registry.ts","ng://@gspwidget/widget-devkit/lib/widget-registry/widget.decorator.ts","ng://@gspwidget/widget-devkit/lib/widget-registry/widget-event.decorator.ts","ng://@gspwidget/widget-devkit/lib/widget-registry/widget-event.service.ts","ng://@gspwidget/widget-devkit/types.ts","ng://@gspwidget/widget-devkit/lib/filter.ts","ng://@gspwidget/widget-devkit/lib/preset/preset.jump.ts","ng://@gspwidget/widget-devkit/lib/widget-registry/widget-property.decorator.ts","ng://@gspwidget/widget-devkit/lib/WidgetBase.ts","ng://@gspwidget/widget-devkit/lib/widget-registry/widget-property.service.ts","ng://@gspwidget/widget-devkit/lib/util.ts","ng://@gspwidget/widget-devkit/lib/widget-devkit.service.ts","ng://@gspwidget/widget-devkit/lib/widget-title-bar/widget-title-bar.component.ts","ng://@gspwidget/widget-devkit/lib/widget-title-bar/widget-title-bar-select/widget-title-bar-select.component.ts","ng://@gspwidget/widget-devkit/lib/widget-title-bar/widget-title-bar.module.ts","ng://@gspwidget/widget-devkit/lib/preset/zrender.gradient.ts","ng://@gspwidget/widget-devkit/lib/preset/zrender.linear-gradient.ts","ng://@gspwidget/widget-devkit/lib/preset/preset.echarts.ts","ng://@gspwidget/widget-devkit/lib/preset/preset.index.ts","ng://@gspwidget/widget-devkit/lib/data.service.ts","ng://@gspwidget/widget-devkit/lib/widget-instance-info.ts","ng://@gspwidget/widget-devkit/lib/widget-devkit.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","__read","o","m","Symbol","iterator","e","ar","next","done","push","value","error","__spread","concat","window","registry","WidgetRegistry","setWidget","name","config","getWidgetByName","getWidgetByCtorName","ctorName","values","find","widgetConfig","ctor","Widget","widgetName","WidgetEventMap","Map","WidgetEvent","eventConfig","widgetPrototype","eventPropName","get","set","propName","WidgetEventService","getEventsByWidgetName","pvs","widgetEvents","FILTERS_WIDGET_NAME","FILTERS_WIDGET_FILTERS_PROP_NAME","map","fc","i18nName","curLang","test","Injectable","args","providedIn","Text","Bool","Number","Enum","Color","Custom","SelectHelp","Help","DataField","Filter","Html","DataParam","table","treeTable","transfer","treeTransfer","getObj","obj","FSLastTimeItem","GetDates","lastTimeItem","sub","Date","unit","num","FSRangeDefault","rangeDefault","beforeUnit","afterNum","add","beforeNum","afterUnit","FSDate","type","singleUnit","singleDefaultType","singleDefaultSpecified","lastTimeItems","lastTimeDisplayType","FSEnum","GetItems","fsEnum","source","itemsFromData","itemsManual","GetItemValues","mapCb","item","multi","displayType","allowEmpty","multiDefault","FSEnumItem","FilterSchema","getDefaultValue","fs","date","_a","enum","singleDefault","number","default","text","showName","ifFsDateRange","isFsFlat","FILTER_PROP_NAME","frontendFilterProp","displayName","isArray","PropertyTypes","objectOption","objPropertyOptions","ifShow","pv","None","Func","ChartTable","NewBrowserTab","jumpTypeOption","enumOption","JumpTypes","items","funcOption","tip","helpOption","getData","httpClient","pipe","funcs","list2Tree","rootParentIdValue","beforeProcess","layer","isLeaf","isTableParent","structure","HelpStructure","tableFields","valueField","nameField","dataJumpOption","category","jumpType","funcIdSource","textOption","i18n","funcParam","valueType","urlParam","datalessJumpOption","CommonPropertyOptions","jump","WidgetPropertyMap","Property","option","forEach","subOption","Input","WidgetBase","onResized","width","height","onPropertyChange","onGetData","data","tslib_1.__decorate","title","useDataEngine","console","PropertyTypeDefaultValues","titleBarProps","boolOption","WidgetPropertyService","getPropertyDefaultValue","prop","arrayItem","_this","newObj_1","childProp","firstItem","colors","getColorsByColorOption","colorOption","Math","random","floor","getWidgetProps","widgetProps","filter","baseProp","some","enableCommonTitleBar","enableDataConfig","mixinWidgetPropValues","props","propValues","mixinedPropValues","undefined","palette","PlThemeColors","gradient","pure","CHART_TABLE_FUNC_ID","DASHBOARD_API","WidgetDevkitService","openModal","content","modalService","show","openMenu","funcId","queryParamsArray","openApp","appId","openInfoMsg","options","messageSvc","info","openSuccessMsg","success","openWarningMsg","warning","openErrorMsg","dataOption","storageSvc","getUserInfo","reload","getUserAvatar","jumpProperty","dataItem","params","param","fixedValue","fieldName","jumpWithData","dataJumpConfig","funcIdDataField","funcParams","url","urlParams","queryParams","funcParamsArray","resultFuncId","finalUrl","urlParamPart","join","endsWith","queryParam","open","jumpWithoutData","datalessJumpConfig","BsModalService","WidgetTitleBarComponent","ngOnInit","handleClickJump","devkitSvc","jumpConfig","Component","selector","template","encapsulation","ViewEncapsulation","Output","ContentChild","icon","showTitle","showNumber","showSetting","clickSetting","EventEmitter","showRefresh","clickRefresh","WidgetTitleBarSelectComponent","FormControl","defaultFilterValue","filterOptions","valueChanges","subscribe","newValue","onFilterChange","emit","WidgetTitleBarModule","NgModule","declarations","exports","imports","CommonModule","ReactiveFormsModule","TranslateModule","forChild","Gradient","addColorStop","offset","color","colorStops","tslib_1.__extends","LinearGradient","x","y","x2","y2","globalCoord","_super","global","EchartsOptions","grid","top","right","bottom","left","containLabel","xAxis","axisLine","lineStyle","axisTick","axisLabel","margin","fontSize","yAxis","splitLine","legend","itemWidth","itemHeight","borderRadius","padding","textStyle","tooltip","backgroundColor","extraCssText","appendToBody","confine","chartsConsts","seriesLabelFontSize","split","splitedGradientColors","getChartColorsPure","dataIndex","getChartColorsGradient","getChartColorsGradientOne","filterYData","filterYFlag","yFields_1","yFieldObjs","yField","minY","maxY","EchartsPropertyOptions","numberOption","showLabel","showTooltip","legendStyleOption","valueStyleOption","echartsGradient","c1","c2","includes","tempMap","金额","en","zh-CHS","数量","tempLabel","dataField","currentLang","label","resolveTemplate","html","expPatt","exps","match","exp","replace","eval","slice","err","WidgetDataService","loadData","onLoadData","loadDataWithDims","onGetDataWithDims","reloadData","setData","dataWithDims","tableData","WidgetInstanceInfo","portletId","id","assetsBaseUrl","WidgetDevkitModule","providers","ModalModule","forRoot"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { RegisteredWidgetConfig, PropertyOption } from '../../types';\n\n/** å­å¨ window ä¸ä¸ºäºé¿å ng serve å farris rollup æ æ³ä¸è´åä¾æ§ */\ndeclare global {\n  interface Window {\n    /** åç¬å­ widget base ç propertiesï¼å ä¸ºå®ä¸æ¯ä¸ªåé¨ä»¶ */\n    // widgetBaseProperies: PropertyOption[]\n    // TODO: èèæ¹é¤ widget name æ¦å¿µ\n    registry: { [widgetName: string]: RegisteredWidgetConfig }\n  }\n}\n// if (!window.widgetBaseProperies) window.widgetBaseProperies = []\nif (!window.registry) window.registry = {}\n/**\n * åé¨ä»¶æ³¨åè¡¨\n */\nexport const WidgetRegistry = {\n  setWidget (name: string, config: RegisteredWidgetConfig) {\n    if (!window.registry[name]) window.registry[name] = {}\n    window.registry[name] = { ...window.registry[name], ...config }\n  },\n  getWidgetByName (name: string) {\n    return window.registry[name]\n  },\n  getWidgetByCtorName (ctorName: string) {\n    return Object.values(window.registry)\n      .find((widgetConfig) => {\n        return widgetConfig.ctor.name === ctorName\n      })\n  }\n}\n","import { WidgetConfig } from '../../types'\nimport { WidgetRegistry } from './widget-registry'\n\nexport function Widget (widgetConfig: WidgetConfig) {\n  return (constructor) => {\n    WidgetRegistry.setWidget(widgetConfig.name, { // TODO: æéæ£ï¼widget name éåä¼è¦çãå¦æççåºç°äºè¦ççæåµï¼èèæååé¨ä»¶æ¶çæä¸ä¸ª id æ¥ä»£æ¿ widget name\n      ctor: constructor,\n      ...widgetConfig\n    })\n    // ç¶ç±» WidgetBase\n    constructor.prototype.widgetName = widgetConfig.name\n  }\n}\n","import { Input } from '@angular/core';\nimport { WidgetEventConfig } from '@gspwidget/util';\nimport { PropertyOption, PropertyTypes } from '../../types';\n\nexport const WidgetEventMap = new Map<string, WidgetEventConfig[]>()\n/** ç¨äºæ EventEmitter å±æ§æ³¨åä¸ºåé¨ä»¶äºä»¶ */\nexport function WidgetEvent (eventConfig: WidgetEventConfig = {}) {\n  return (widgetPrototype, eventPropName: string) => {\n    // TODO: æ³åæ³æ su å è¿ææè¿è¡æ¶æ³¨åè¡¨éç keys é\n    const ctorName = widgetPrototype.constructor.name\n    if (!WidgetEventMap.get(ctorName)) WidgetEventMap.set(ctorName, [])\n    WidgetEventMap.get(ctorName).push({\n      propName: eventPropName,\n      ...eventConfig\n    })\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { curLang, FILTERS_WIDGET_FILTERS_PROP_NAME, FILTERS_WIDGET_NAME, WidgetEventConfig } from '@gspwidget/util';\nimport { FilterConfig, FilterSchema } from '../filter';\nimport { WidgetEventMap } from './widget-event.decorator';\nimport { WidgetRegistry } from './widget-registry';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetEventService {\n\n  constructor () { }\n\n  getEventsByWidgetName (widgetName: string, pvs)\n    : WidgetEventConfig[] {\n    const ctorName = WidgetRegistry.getWidgetByName(widgetName).ctor.name\n    const widgetEvents = WidgetEventMap.get(ctorName) || []\n    if (widgetName === FILTERS_WIDGET_NAME) {\n      return pvs[FILTERS_WIDGET_FILTERS_PROP_NAME].map((fc: FilterSchema) => ({\n        name: fc.i18nName[curLang],\n        propName: fc.i18nName[curLang],\n      }))\n    }\n    // ç»è£\n    return [\n      ...widgetEvents,\n      ...test,\n    ]\n  }\n}\nconst test: WidgetEventConfig[] = [{\n  name: 'click bar'\n}, {\n  name: 'event 2'\n}, {\n  name: 'event 3'\n}]\n","import { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n// TODO: color å¨é¨æ¹ä¸ºé»è®¤ä¸ºè²æ¿ï¼å¯æçº¯è²ãæ¸åãé½åå« ä¸ç§éé¡¹ï¼è²çä¸ºå¹³å°é¢å¶ï¼ä½ä¹ä¿çèªå·±è°æ´é¢è²çå¥å£ã\nexport enum PropertyTypes {\n  Text = 'textOption',\n  Bool = 'boolOption',\n  Number = 'numberOption',\n  Enum = 'enumOption',\n  Color = 'colorOption',\n  // Date = 'dateOption',\n  Object = 'objectOption',\n  Custom = 'customOption',\n  SelectHelp = 'selectHelpOption',\n  /** Help å¾å°çå¼çç»æï¼åå³äºéç½® HelpOption åï¼æç»å¾å°çæ°æ®ç»æ */\n  Help = 'helpOption',\n  /** DataField å¾å°çå¼çå¼çç±»åä¸º DataField */\n  DataField = 'dataFieldOption',\n  Filter = 'filterOption',\n  Html = 'htmlOption',\n  DataParam = 'dataParamOption',\n}\n\nexport interface DataField {\n  name: string, label: string\n}\n\n/**\n * typeï¼ç±»åï¼é»è®¤ PropertyTypes.String\n * isArrayï¼æ¯å¦ä¸ºæ°ç»ï¼é»è®¤ false\n * ç¨ prop[prop.type] å¯è·åå° xxxOption\n */\nexport interface PropertyOption {\n  name?: string, // è¿ä¸é¡¹ä¸éè¦åï¼ä¼èªå¨è®¾ç½®ä¸º property ä¿®é¥°çå±æ§å\n  displayName?: string,\n  type?: PropertyTypes,\n  isArray?: boolean,\n  category?: string, /** åç»è·¯å¾ï¼å¯ç¨ / åå²å¤å± */\n  tip?: string, /** å¸®å©æç¤ºï¼æ¾ç¤ºå¸®å©ä¿¡æ¯ */\n  /**\n   * å®ä¹å¦ä½æ ¹æ®å¶ä» prop çå¼ï¼æ§å¶å½å item æ¯å¦æ¾ç¤ºã\n   * æ³¨æï¼curPropValues æ¯å½å property æå¨çç´æ¥ç¶å¯¹è±¡åçï¼**å³ä¸èªèº«å¹³çº§ç**ï¼ææ propValuesï¼ä¸åå«ç¸ç¸çåè¾ã\n   * ä»åºå½æ ¹æ®åè¾çå¼æ§å¶æ¾ç¤ºä¸å¦ï¼æä»¥æå¿å­ä¸åºè¯¥æ ¹æ®ç¸ç¸çæåè¾èååã\n   */\n  ifShow?: (curPropValues: { [propName: string]: any }) => boolean,\n\n  textOption?: {\n    default?: string | string[],\n    short?: boolean,\n    /** æ¯å¦æ¯å¤è¯­å­æ®µï¼é»è®¤ true */\n    i18n?: boolean\n  },\n  boolOption?: {\n    default?: boolean | boolean[]\n  },\n  numberOption?: {\n    default?: number | number[],\n    min?: number,\n    max?: number,\n    step?: boolean\n  },\n  enumOption?: {\n    default?: string | string[],\n    items: string[] | {\n      value: string,\n      displayName?: string /** displayName é»è®¤ä¸ value ä¸è´ */\n    }[]\n  },\n  colorOption?: {\n    default?: string | string[],\n    pureOnly?: boolean\n    gradientOnly?: boolean\n    type?: 'pure' | 'gradient' | 'pureOrGradient'\n    /** å¯éè²æ¿ï¼é»è®¤æ¯å¨å±éç½®è²æ¿ */\n    palette?: string[]\n    /** æ¯å¦æ¾ç¤ºæ©å±çº¯è²è²æ¿ï¼åå«é¢è²æ´å¨ï¼é»è®¤å */\n    // showExtPurePalette: boolean\n    /** å¯è¾å¥è²å¼ */\n    // canInput: boolean\n  },\n  dateOption?: {\n    default?: Date | Date[]\n  },\n  objectOption?: {\n    default?: any,\n    /**\n     * è¿éç PropertyOption æç¹ç¹æ®:\n     * name å¿å¡«\n     * category, xxxOption.default æ æ ð\n     */\n    objPropertyOptions: PropertyOption[]\n  },\n  selectHelpOption?: {\n    url: string, /** è·å options ç url */\n    valueField?: string, /** å¦æè¿åç»ææ¯å¯¹è±¡æ°ç»ï¼è¿ä¸ªæ¯ç¼è¾å¨ç»æå¼å¯¹åºçå­æ®µ */\n    displayField?: string, /** å¦æè¿åç»ææ¯å¯¹è±¡æ°ç»ï¼è¿ä¸ªæ¯ç¼è¾å¨æ¾ç¤ºå¼å¯¹åºçå­æ®µ */\n    usePost?: boolean, /** æ¯å¦ä½¿ç¨ post è¯·æ± */\n    body?: any, /** post è¯·æ±ç body */\n    default?: string, /** é»è®¤å¼ */\n  },\n  helpOption?: {\n    getData?: (httpClient: HttpClient) => Observable<any[]> /** è·åæ°æ®ï¼é»è®¤å¼ä¸ºç©ºæ°ç» */\n    structure?: HelpStructure /** æ¯å¦æ¯æ ç¶ãæ çç»æå¯å¨ getTreeFromRes ä¸­æ¼æ¥ */\n    tableFields: (string | string[])[]\n    valueField: string\n    nameField: string\n    // childrenField?: string /** é»è®¤æ¯ childrenï¼ç¨äºæ¸²ææ  */\n    // parentIdField?: string /** é»è®¤æ¯ parentIdï¼ç¨äºèªå¨åè¡¨ææ  */\n    default?: string\n    // getTree?: Function\n    getTableOnSelectTree?: Function\n  },\n  dataFieldOption?: {\n\n  }\n}\n\nexport enum HelpStructure {\n  table,\n  treeTable,\n  transfer,\n  treeTransfer\n}\n\nexport interface WidgetConfig {\n  name?: string\n  /** æ¯å¦å¨é¨ä»¶éç½®ä¸­å¼å¯æ°æ®éç½®ãç­ééç½®ï¼é»è®¤ false */\n  enableDataConfig?: boolean\n  /** æ¯å¦ä½¿ç¨å¬å±çæ é¢å¤´ï¼é»è®¤ false */\n  enableCommonTitleBar?: boolean\n  /** æ¯å¦ç¦ç¨å¬å±èæ¯ï¼å³ä½¿ç¨éæèæ¯ï¼é»è®¤ false */\n  // disableCommonBgStyle?: boolean\n  /** æ¯å¦å¯ç¨å è½½ assets/i18n/ ä¸çå½éåèµæºæä»¶ï¼é»è®¤ false */\n  enableLoadingI18n?: boolean\n  /** èªå®ä¹å½éåèµæºæä»¶ç®å½ä½ç½®ï¼å¦ '/apps/test/i18n/'ï¼é»è®¤ä½ç½®ä¸ºåé¨ä»¶èªèº«ç®å½ä¸ç assets/i18n/ ä½ç½®ã*/\n  customI18nResourceUrl?: string\n}\nexport interface RegisteredWidgetConfig extends WidgetConfig {\n  ctor?: any // TODO: ?\n}\n","import add from \"date-fns/add\"\nimport sub from 'date-fns/sub'\nimport { PropertyOption, PropertyTypes } from \"../types\"\n\n/**\n * æ²¡åç´æ¥ç¨ [] ä½ key ç´æ¥å»º literal å¯¹è±¡ï¼aot ç¼è¯ä¼æ¥é\n */\nexport function getObj (key: string, value: number) {\n  const obj = {}\n  obj[key] = value\n  return obj\n}\nexport type FSDateUnit = 'year' | 'month' | 'day'\n/** ç­éæè¿° */\nexport class FSLastTimeItem {\n  num = 1\n  unit?: FSDateUnit = 'day'\n  isDefault?: boolean\n  /**\n   * ä¼ å¥ä¸ä¸ª 'æè¿næ'ï¼è¿åå¯¹åºçæ¶é´èå´æ°ç»\n   */\n  static  GetDates (lastTimeItem: FSLastTimeItem) {\n    return [\n      sub(new Date(), getObj(lastTimeItem.unit + 's', lastTimeItem.num)),\n      new Date()\n    ]\n  }\n}\nexport class FSRangeDefault {\n  beforeNum = 1\n  beforeUnit: FSDateUnit = 'month'\n  afterNum = 0\n  afterUnit: FSDateUnit = 'day'\n  static GetDates (rangeDefault: FSRangeDefault) {\n    return [\n      sub(new Date(), getObj(rangeDefault.beforeUnit + 's', rangeDefault.afterNum)),\n      add(new Date(), getObj(rangeDefault.beforeUnit + 's', rangeDefault.afterNum)),\n    ]\n  }\n}\nexport class FSDate {\n  type?: 'single' | 'range' | 'lastTimeEnum' = 'single'\n  singleUnit?: FSDateUnit = 'day'\n  singleDefaultType?: 'current' | 'specified' = 'current'\n  singleDefaultSpecified = new Date()\n  rangeDefault = new FSRangeDefault()\n  lastTimeItems?: FSLastTimeItem[] = []\n  lastTimeDisplayType?: 'select' | 'flat' = 'flat'\n}\nexport type FSEnumSource = 'dataField' | 'manual' | 'dataset'\nexport class FSEnum {\n  multi = false\n  /** ææ¶å®ä¸ºï¼ä»æ single æ¶å¯ä»¥éæ© flat */\n  displayType?: 'select' | 'flat' = 'select'\n  source?: FSEnumSource = 'manual'\n  /** æ¯å¦å¯æ¸ç©ºä¸éãä»æ select ä¸ single æææ­¤éé¡¹ */\n  allowEmpty = false\n  // TODO: ä¸é¢ä¸¤ä¸ªå­æ®µä»ç¨ä½ä¸æ¬¡ç¼è¾æ¶æ¾ç¤ºå§ã\n  itemsLabelField?: string\n  itemsValueField?: string\n  /** éè¿ä¸é¢ä¸¤ä¸ªå­æ®µååº items å­å¨ä¸é¢ */\n  itemsFromData?: FSEnumItem[] = []\n  itemsManual?: FSEnumItem[] = []\n  multiDefault: string[] = []\n  singleDefault: string\n  // ææ¶ä¸å\n  // sourceDatasetId: string\n  // sourceDatasetLabelField?: DataField\n  // sourceDatasetValueField?: DataField\n  static GetItems (fsEnum: FSEnum): FSEnumItem[] {\n    const {\n      source, itemsFromData, itemsManual\n    } = fsEnum\n    if (source === 'dataField') {\n      // if (!itemsValueField || !intactData) return []\n      // const tempItems = intactData.map(dataItem => ({\n      //   label: dataItem[itemsLabelField || itemsValueField],\n      //   value: dataItem[itemsValueField]\n      // }))\n      // return ArrUtil.Unique(tempItems)\n      return itemsFromData\n    } else if (source === 'manual') {\n      return itemsManual\n    }\n  }\n  static GetItemValues (fsEnum: FSEnum) {\n    function mapCb (item) { return item.value }\n    return FSEnum.GetItems(fsEnum).map(mapCb)\n  }\n}\nexport class FSEnumItem {\n  label: string\n  value: string\n}\nexport class FilterSchema {\n  /** è¿æ»¤åç§°ï¼å¨ç­éæ§ä»¶ä¸æ¾ç¤ºï¼å¯é */\n  i18nName: any = {}\n  showName = false\n  /** è¿æ»¤å¤§ç±» */\n  type?: 'date' | 'enum' | 'number' | 'text' | 'help' = 'date'\n  /** æ¯ç§ç±»åçè¿æ»¤éç½® */\n  date = new FSDate()\n  enum = new FSEnum()\n  help?: {}\n  number = {\n    default: 0\n  }\n  text = {\n    default: ''\n  }\n  /**\n   * è·å FS çé»è®¤å¼\n   * ð ä¸å¯ä»¥ä¾èµ dataï¼é¨ä»¶ç¬¬ä¸æ¬¡æ ¹æ®é»è®¤å¼ç­éæ¶ï¼è¿æ²¡æ data å¢ã\n   */\n  static getDefaultValue (fs: FilterSchema) {\n    switch (fs.type) {\n      case 'date':\n        if (fs.date.type === 'single') {\n          if (fs.date.singleDefaultType === 'current') {\n            return new Date()\n          } else {\n            return fs.date.singleDefaultSpecified\n          }\n        } else if (fs.date.type === 'range') {\n          return FSRangeDefault.GetDates(fs.date.rangeDefault)\n        } else if (fs.date.type === 'lastTimeEnum') {\n          return FSLastTimeItem.GetDates(fs.date.lastTimeItems[0])\n        }\n        break\n      case 'enum':\n        const { multi, singleDefault, multiDefault } = fs.enum\n        return multi ? multiDefault : singleDefault\n      case 'number':\n        return fs.number.default\n        break\n      case 'text':\n        return fs.text.default\n        break\n    }\n  }\n}\nexport function ifFsDateRange (fs: FilterSchema) {\n  if (!fs) return\n  return fs.type === 'date' && fs.date.type === 'range'\n}\nexport function isFsFlat (fs: FilterSchema) {\n  if (!fs) return\n  return fs.type==='date' && fs.date.type==='lastTimeEnum' && fs.date.lastTimeDisplayType==='flat'\n    || fs.type==='enum' && !fs.enum.multi && fs.enum.displayType==='flat'\n}\n\n/**\n * å®æ¹é¢å¶çç­é property\n */\nexport const FILTER_PROP_NAME = 'filter'\nexport const frontendFilterProp: PropertyOption = {\n  name: FILTER_PROP_NAME,\n  displayName: 'ç­é',\n  isArray: true,\n  type: PropertyTypes.Object,\n  objectOption: {\n    objPropertyOptions: [{\n      name: 'fs',\n      type: PropertyTypes.Filter,\n    }, {\n      name: 'dpId',\n      type: PropertyTypes.DataParam,\n    }, {\n      name: 'dpId2',\n      type: PropertyTypes.DataParam,\n      ifShow: pv => {\n        return pv.fs && ifFsDateRange(pv.fs)\n      }\n    }]\n  }\n}\nexport interface FilterConfig {\n  fs: FilterSchema\n  dpId: string\n  dpId2: string\n}\n","import { HttpClient } from '@angular/common/http'\nimport { PropertyOption, PropertyTypes, HelpStructure, DataField } from '../../types'\nimport { tap, map } from 'rxjs/operators'\n// import { list2Tree } from './util'\nimport { of } from 'rxjs'\nimport { list2Tree } from '@gspwidget/util'\n\n/**\n * æä¸æ¡æ°æ®èæ¥è·³è½¬çéç½®å±æ§çç±»å\n */\nexport interface DataJumpConfig {\n  jumpType: JumpTypes,\n  /** èå */\n  funcIdSource?: 'fixed' | 'fromData'\n  /** funcId from data */\n  funcIdDataField?: DataField\n  /** funcId fixed */\n  funcId?: string,\n  funcParams?: {\n      key?: string,\n      valueType?: string,\n      fixedValue?: string,\n      fieldName?: DataField\n  }[]\n  /** æ°æ ç­¾é¡µ */\n  url?: string\n  urlParams?: {\n      valueType?: string\n      fixedValue?: string\n      fieldName?: DataField\n  }[]\n  queryParams?: {\n      key?: string,\n      valueType?: string,\n      fixedValue?: string,\n      fieldName?: DataField\n  }[]\n  /** å¾è¡¨é¡µé¢ææ å¯éåæ° */\n}\n/**\n * å¨å±èæ¥è·³è½¬çéç½®å±æ§çç±»å\n */\nexport interface DatalessJumpConfig {\n  jumpType: JumpTypes\n  /** èå */\n  funcId?: string // TODO: interface å¼ç¨ä¼ä¸ä¼å¯¼è´æåæ¶æé®é¢ï¼\n  funcParams?: {\n      key?: string\n      value?: string\n  }[]\n  /** æ°æ ç­¾é¡µ */\n  url?: string\n  /** å¾è¡¨é¡µé¢ææ å¯éåæ° */\n}\n\n/**\n * å¸¸ç¨ç property options ç»æ¨åå¤å¥½äºï¼\n * æ¨éè¦å¾èªå·±æå® displayNameã\n */\n\n/**\n * èæ¥è·³è½¬çä¸ç§ç±»åï¼\n * æ ï¼èå/èæ¥ï¼é¢å¶å¾è¡¨é¡µ\n */\nexport enum JumpTypes {\n  None = '0',\n  Func = '1',\n  ChartTable = '2',\n  NewBrowserTab = '3'\n}\n/** éæ©èæ¥ç±»å */\nexport const jumpTypeOption: PropertyOption = {\n  type: PropertyTypes.Enum,\n  enumOption: {\n    default: JumpTypes.None,\n    items: [\n      { value: JumpTypes.None, displayName: 'none' },\n      { value: JumpTypes.Func, displayName: 'toFuncOrInvoke' },\n      // { value: JumpTypes.ChartTable, displayName: 'è·³è½¬è³é¢å¶å¾è¡¨é¡µ' },\n      { value: JumpTypes.NewBrowserTab, displayName: 'browserNewTab' }\n    ]\n  }\n}\n\n// let allFuncs\n/** èå/èæ¥å¸®å© option */\nexport const funcOption: PropertyOption = {\n  type: PropertyTypes.Help,\n  tip: 'éèå/èæ¥çå¸®å©',\n  helpOption: {\n    getData: (httpClient: HttpClient) => {\n      return httpClient\n        .get<any[]>('/api/runtime/sys/v1.0/functions/allFuncs')\n        .pipe(map(funcs => {\n          // allFuncs = funcs\n          return list2Tree(funcs, {\n            rootParentIdValue: '0',\n            beforeProcess (item) {\n              if (item.layer === '3') {\n                item.isLeaf = true\n                item.isTableParent = true\n              }\n            }\n          })\n        }))\n    },\n    structure: HelpStructure.treeTable,\n    tableFields: ['code', 'name'],\n    valueField: 'id',\n    nameField: 'name'\n  }\n}\n\n/** ä¸åå³äºææ¡æ°æ®å¼çèæ¥ */\nexport const dataJumpOption: PropertyOption = {\n  category: 'clickJump',\n  type: PropertyTypes.Object,\n  objectOption: {\n    objPropertyOptions: [\n      {\n        name: 'jumpType',\n        displayName: 'jumpType',\n        ...jumpTypeOption\n      },\n      /** èå/èæ¥ */\n      {\n        name: 'funcIdSource',\n        type: PropertyTypes.Enum,\n        enumOption: {\n          items: ['fixed', 'fromData']\n        },\n        ifShow (c: DataJumpConfig) { return c.jumpType === JumpTypes.Func }\n      }, {\n        name: 'funcIdDataField',\n        type: PropertyTypes.DataField,\n        ifShow (c: DataJumpConfig) {\n          return c.jumpType === JumpTypes.Func && c.funcIdSource === 'fromData'\n        }\n      }, {\n        name: 'funcId',\n        displayName: 'func/invoke',\n        ifShow (c: DataJumpConfig) {\n          return c.jumpType === JumpTypes.Func && c.funcIdSource === 'fixed'\n        },\n        ...funcOption\n      }, {\n        name: 'funcParams',\n        displayName: 'routeParams',\n        type: PropertyTypes.Object,\n        isArray: true,\n        objectOption: {\n          objPropertyOptions: [{\n            name: 'key',\n            displayName: 'paramKey',\n            textOption: { i18n: false },\n            type: PropertyTypes.Text,\n          }, {\n            name: 'valueType',\n            displayName: 'valueType',\n            type: PropertyTypes.Enum,\n            enumOption: {\n              items: [\n                { value: 'fieldName', displayName: 'dataFieldValue' },\n                { value: 'fixedValue', displayName: 'fixedValue' }\n              ]\n            }\n          }, {\n            name: 'fixedValue',\n            displayName: 'paramFixedValue',\n            type: PropertyTypes.Text,\n            textOption: { i18n: false },\n            ifShow (funcParam) { return funcParam.valueType === 'fixedValue' }\n          }, {\n            name: 'fieldName',\n            displayName: 'paramValueField',\n            type: PropertyTypes.DataField,\n            ifShow (funcParam) { return funcParam.valueType === 'fieldName' }\n          }]\n        },\n        ifShow (values: DataJumpConfig) { return values.jumpType === JumpTypes.Func }\n      },\n      /** æµè§å¨æ ç­¾ */\n      {\n        name: 'url',\n        displayName: 'newTabUrl',\n        type: PropertyTypes.Text,\n        textOption: { i18n: false },\n        ifShow (values: DataJumpConfig) { return values.jumpType === JumpTypes.NewBrowserTab }\n      }, {\n        name: 'urlParams',\n        displayName: 'urlParams',\n        type: PropertyTypes.Object,\n        isArray: true,\n        objectOption: {\n          objPropertyOptions: [{\n            name: 'valueType',\n            displayName: 'valueType',\n            type: PropertyTypes.Enum,\n            enumOption: {\n              items: [\n                { value: 'fieldName', displayName: 'dataFieldValue' },\n                { value: 'fixedValue', displayName: 'fixedValue' }\n              ]\n            }\n          }, {\n            name: 'fixedValue',\n            displayName: 'paramFixedValue',\n            type: PropertyTypes.Text,\n            textOption: { i18n: false },\n            ifShow (urlParam) { return urlParam.valueType === 'fixedValue' }\n          }, {\n            name: 'fieldName',\n            displayName: 'paramValueField',\n            type: PropertyTypes.DataField,\n            ifShow (urlParam) { return urlParam.valueType === 'fieldName' }\n          }]\n        },\n        ifShow (values: DataJumpConfig) { return values.jumpType === JumpTypes.NewBrowserTab }\n      }, {\n        name: 'queryParams',\n        displayName: 'urlQueryParams',\n        type: PropertyTypes.Object,\n        isArray: true,\n        objectOption: {\n          objPropertyOptions: [{\n            name: 'key',\n            displayName: 'paramKey',\n            type: PropertyTypes.Text,\n            textOption: { i18n: false },\n          }, {\n            name: 'valueType',\n            displayName: 'valueType',\n            type: PropertyTypes.Enum,\n            enumOption: {\n              items: [\n                { value: 'fieldName', displayName: 'dataFieldValue' },\n                { value: 'fixedValue', displayName: 'fixedValue' }\n              ]\n            }\n          }, {\n            name: 'fixedValue',\n            displayName: 'paramFixedValue',\n            type: PropertyTypes.Text,\n            textOption: { i18n: false },\n            ifShow (funcParam) { return funcParam.valueType === 'fixedValue' }\n          }, {\n            name: 'fieldName',\n            displayName: 'paramValueField',\n            type: PropertyTypes.DataField,\n            ifShow (funcParam) { return funcParam.valueType === 'fieldName' }\n          }]\n        },\n        ifShow (values: DataJumpConfig) { return values.jumpType === JumpTypes.NewBrowserTab }\n      }\n    ]\n  }\n}\n/** å³äºææ¡æ°æ®å¼çèæ¥ */\nexport const datalessJumpOption: PropertyOption = {\n  category: 'clickJump',\n  type: PropertyTypes.Object,\n  objectOption: {\n    objPropertyOptions: [\n      {\n        name: 'jumpType',\n        displayName: 'jumpType',\n        ...jumpTypeOption\n      },\n      /** èå/èæ¥ */\n      {\n        name: 'funcId',\n        displayName: 'func/invoke',\n        ifShow (values: DatalessJumpConfig) { return values.jumpType === JumpTypes.Func },\n        ...funcOption\n      }, {\n      name: 'funcParams',\n      displayName: 'routeParams',\n      type: PropertyTypes.Object,\n      isArray: true,\n      objectOption: {\n        objPropertyOptions: [{\n          name: 'key',\n          displayName: 'paramKey',\n          type: PropertyTypes.Text,\n          textOption: { i18n: false },\n        }, {\n          name: 'value',\n          displayName: 'paramValue',\n          type: PropertyTypes.Text,\n          textOption: { i18n: false },\n        }]\n      },\n      ifShow (values: DatalessJumpConfig) { return values.jumpType === JumpTypes.Func }\n    },\n    /** æµè§å¨æ ç­¾ */\n    {\n      name: 'url',\n      displayName: 'newTabUrl',\n      type: PropertyTypes.Text,\n      textOption: { i18n: false },\n      ifShow (values: DatalessJumpConfig) { return values.jumpType === JumpTypes.NewBrowserTab }\n    }]\n  }\n}\n\n\n/** @deprecated è¯·ç¨ datalessJump æ dataJump */\nexport const CommonPropertyOptions = {\n  jump: datalessJumpOption\n}\n","import { Input } from '@angular/core';\nimport { PropertyOption, PropertyTypes } from '../../types';\n/**\n * åé¨ä»¶å±æ§æ³¨åè¡¨ï¼å½¢å¦\n * { constructorName: { propertyName: propertyOption }\n */\nexport const WidgetPropertyMap = new Map<string, PropertyOption[]>()\n/**\n * TODO: å å¥æ£æ¥ï¼ç¼è¯æ¶æ¥éï¼nameä¸åºè¯¥åï¼ï¼\n * @param option å¯éï¼é»è®¤ä¸º { type: PropertyTypes.String }\n */\nexport function Property (option: PropertyOption = {}) {\n  // è¿éç»ä¸å¤çï¼æ²¡æè®¾ç½® type çä¸å¾è®¾ç½®ä¸º Textãæ²¡ç¨éå½ï¼ä»å¤èèäº Obj åä¸å±ã\n  option.type = option.type || PropertyTypes.Text\n  if (option.objectOption && option.objectOption.objPropertyOptions) {\n    option.objectOption.objPropertyOptions.forEach(subOption => {\n      subOption.type = subOption.type || PropertyTypes.Text\n    })\n  }\n  option.isArray = !!option.isArray\n  return (widgetPrototype, propName) => {\n    // TODO: æ³åæ³æ su å è¿ææè¿è¡æ¶æ³¨åè¡¨éç keys é\n    const ctorName = widgetPrototype.constructor.name\n    if (!WidgetPropertyMap.get(ctorName)) WidgetPropertyMap.set(ctorName, [])\n    WidgetPropertyMap.get(ctorName).push({ name: propName, ...option })\n    // è° angular Input decorator\n    Input()(widgetPrototype, propName)\n  }\n}\n","// import { datalessJumpOption, DatalessJumpConfig, JumpTypes } from './presets';\nimport { Property } from './widget-registry/widget-property.decorator';\n\nexport abstract class WidgetBase {\n\n  @Property({\n    category: 'å¬å±å±æ§',\n    displayName: 'é¨ä»¶æ é¢'\n  }) title = 'untitled';\n\n  // @Property({\n  //   ...datalessJumpOption,\n  //   displayName: 'topRightJump'\n  // }) globalJumpConfig: DatalessJumpConfig = {\n  //   jumpType: JumpTypes.None\n  // }\n\n  /** @deprecated */\n  // icon = ''\n\n  /** çç»ç­éè§¦å load dataï¼åé¨ä»¶å¯ä»¥è§¦åï¼å¹¶ä¼ å¥é¢å¤åæ°ï¼ä½å®é load ç± wc æ¥åãå ä¸º wc ç¥é idã */\n  // @Output() triggerLoadData = new EventEmitter();\n\n  /** ç¼è¯æ¶å° @Widget ä¸­ç name èµå¼ç» widgetName, æé å¨ä¸­ä¼æ£æ¥æ¯å¦æå¼ï¼æ²¡æå°±æ¥é */\n  widgetName;\n\n  // TODO: å·²åºå¼æ¹æ¡, ä»¥ä¸ä¸ºè¿æ¸¡æ¹æ¡ä»¥å¼å®¹èåæ³åé¨ä»¶, åæå°ç§»é¤\n  /** @deprecated å½åé¨ä»¶ id */\n  portletId: string\n  /** @deprecated å½åé¨ä»¶å®ä¾ id */\n  id: string\n  /** @deprecated æ¯å¦ä½¿ç¨å¤é¨æ°æ®æºãæ¯çè¯ï¼wc å°±æ¿å®ç portlet id è¯·æ±æ°æ®å»ãåºæ¹ä¸º dataEngine åæ³ã */\n  useDataEngine = false\n  /**\n   * @deprecated\n   * assets æä»¶è·¯å¾å¿éå ä¸è¿ä¸ª base åç¼ãæ³¨æå¨æé å½æ°æä¹åä½¿ç¨æ¶å¶å¼ä¼ä¸º undefinedï¼\n   * å ä¸ºå®ä¾åå®æåï¼widget-container æä¼ç»å®èµæ­£ç¡®çå¼ã\n   */\n  assetsBaseUrl: string\n\n  /**\n   * å ä¸ºæ¯ç¶ç±»æé å½æ°æä»¥æ æ³ä¾èµæ³¨å¥, ä¹æ²¡æ³ä¼ å¥åæ°;\n   * compInstance.field = xxx çæ¹å¼ååçå¨æé å½æ°åèä¸å¤ªå¥½,\n   * æä»¥èèæ­¤ç¶ç±»ä¸æä¾æåå±æ§, èéè¿ä¾èµæ³¨å¥, å¨å­ç»ä»¶èªå.\n   */\n  constructor () {\n    if (this.widgetName == null) console.error(`åé¨ä»¶ ${this.constructor.name} æªæ·»å  @Widget({ name: <name>})`);\n  }\n\n  /**\n   * åé¨ä»¶å®¹å¨å¤§å°ååäºä»¶ï¼åæ° width ä¸ºå®¹å¨å®½åº¦ï¼åä½ pxã\n   * å¯éåæ­¤æ¹æ³ä»¥å¤çå¤æçååºå¼æ ·å¼ã\n   */\n  onResized (width: number, height: number): void { }\n\n  onPropertyChange (propName: string, value): void { }\n\n  /**\n   * @deprecated\n   * è¯·ç¨ this.dataService.loadData() ä»£æ¿\n   * @param data è·å¾çæ°æ®\n   */\n  onGetData (data: any[]) { }\n\n}\n","import { Injectable } from '@angular/core';\nimport { PlThemeColors } from '@gspwidget/util';\nimport { PropertyOption, PropertyTypes, WidgetConfig } from '../../types';\nimport { FilterSchema, frontendFilterProp, ifFsDateRange } from '../filter';\nimport { datalessJumpOption } from '../preset/preset.jump';\n// import { WidgetPropertyMap } from './widget-event.decorator';\nimport { WidgetRegistry } from './widget-registry';\nimport { WidgetBase } from '../WidgetBase';\nimport { WidgetPropertyMap } from './widget-property.decorator';\n\nconst PropertyTypeDefaultValues = {\n  [PropertyTypes.Text]: '',\n  [PropertyTypes.Bool]: false,\n  [PropertyTypes.Number]: 0,\n  [PropertyTypes.DataField]: {}\n  // [PropertyTypes.Color]: '#000000',\n  // [PropertyTypes.Enum]: 0,\n  // [PropertyTypes.Date]: new Date()\n  // [PropertyTypes.Object]: {},\n}\n\n// const frontendFilterProp: PropertyOption = {\n//   name: 'filter',\n//   displayName: 'ç­é',\n//   isArray: true,\n//   type: PropertyTypes.Filter,\n// }\n// TODO: filters\n\n\nconst titleBarProps: PropertyOption[] = [{\n  category: 'titleBar',\n  name: 'titleBarHide',\n  type: PropertyTypes.Bool,\n  boolOption: {\n    default: false\n  }\n}, {\n  category: 'titleBar',\n  name: 'titleBarShowRefresh',\n  displayName: 'showRefreshBtn',\n  type: PropertyTypes.Bool,\n  boolOption: {\n    default: true\n  }\n}, {\n  ...datalessJumpOption,\n  category: 'titleBar',\n  name: 'titleBarJump',\n}]\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetPropertyService {\n\n  constructor (\n  ) { }\n  /**\n   * è·å¾æç§ç±»åçå¨å±é»è®¤å¼ï¼å¨å®å¨æ²¡æå¼æ¶ä½¿ç¨\n   * @param prop\n   * @param arrayItem æ¯å¦æ¯æ¥è·å array çå­é¡¹é»è®¤å¼çï¼é»è®¤ä¸æ¯ã\n   * å¦æä¸æ¯ï¼è¥ prop.isArray ä¸ºçï¼å°±è¿åç©ºæ°ç» []ï¼\n   * å¦ææ¯ï¼åä¸ç®¡ prop.isArray æ¯å¦ä¸ºçï¼æ»è¿å prop.type å¯¹åºçé»è®¤å¼ï¼ä»åºç¨äºå¢å æ°ç»é¡¹æ¶è·åæ°é¡¹ã\n   */\n  public getPropertyDefaultValue (prop: PropertyOption, arrayItem = false) {\n    if (!arrayItem && prop.isArray) return []\n    // object: éå½çæå·æææ key çå¯¹è±¡ï¼æ¯ä¸ª key ç value æ¯é»è®¤å¼\n    if (prop.type === PropertyTypes.Object) {\n      const newObj = {}\n      prop.objectOption.objPropertyOptions.forEach((childProp: PropertyOption) => {\n        newObj[childProp.name] = (childProp[childProp.type]\n          && childProp[childProp.type].default)\n          || this.getPropertyDefaultValue(childProp)\n      })\n      return newObj\n    } else if (prop.type === PropertyTypes.Enum) {\n      const firstItem = prop.enumOption.items[0]\n      return typeof firstItem === 'string'\n        ? firstItem\n        : firstItem['value']\n    } else if (prop.type === PropertyTypes.Color) {\n      const colors = this.getColorsByColorOption(prop.colorOption)\n      const i = Math.random()\n      return colors[Math.floor(i * colors.length)]\n    } else if (prop.type === PropertyTypes.Filter) {\n      return new FilterSchema()\n    } else {\n      return PropertyTypeDefaultValues[prop.type]\n    }\n  }\n  /**\n   * åé¨ä»¶å è½½ãç¼è¯å®æåï¼ç»è£æ°ç properties\n   * widget name\n   * -> constructor name\n   * -> widget + title bar + base properties\n   * -> åé¨ä»¶çææå¯éç½® properties\n   */\n  public getWidgetProps (widgetName: string, widgetConfig: WidgetConfig): PropertyOption[] {\n    const ctorName = WidgetRegistry.getWidgetByName(widgetName).ctor.name\n    // widget å­ç±»ä¸­ç property\n    const widgetProps = WidgetPropertyMap.get(ctorName) || []\n    // ç­éåº widget å­ç±»ä¸­æ²¡éåè¿ç propertyï¼å¦åå¯è½ä¼æä¿©ä¸æ ·ç\n    const baseProps = WidgetPropertyMap.get(WidgetBase.name)\n      .filter(baseProp => !widgetProps.some(prop => baseProp.name === prop.name))\n    // ç»è£\n    return [\n      // å¬å±éç½®é½æ¾è¿\n      ...baseProps,\n      // æ é¢éç½®\n      ...(widgetConfig.enableCommonTitleBar\n        ? titleBarProps\n        : []),\n      // ç­ééç½®\n      ...(widgetConfig.enableDataConfig && widgetConfig.enableCommonTitleBar\n        ? [frontendFilterProp]\n        : []),\n      // åé¨ä»¶èªèº«éç½®\n      ...widgetProps\n      // ...testProps,\n    ]\n  }\n  /**\n   * mixin å·²æpv + åé¨ä»¶æ¨èçé»è®¤pv + æ­¤ç±»åçå¨å±é»è®¤pv\n   */\n  public mixinWidgetPropValues (props: PropertyOption[], propValues: object) {\n    const mixinedPropValues: { [propName: string]: any } = { ...propValues }\n    // æ£æ¥ææ propertiesï¼åªä¸ªæ²¡æå¼ï¼å°±èµä¸é»è®¤æ¨èå¼\n    props.forEach(prop => {\n      // è¿éå¿é¡»æ¯å¤æ­ undefinedï¼å¦å bool ç±»åç false ä¹å¯è½å¤å®ä¸ºæ å¼\n      if (mixinedPropValues[prop.name] === undefined) {\n        mixinedPropValues[prop.name] = prop[prop.type] && prop[prop.type].default\n          // å¦æåé¨ä»¶æ é»è®¤å¼ï¼å°±å å¥å¨å±çå½åç±»åé»è®¤å¼\n          || this.getPropertyDefaultValue(prop)\n      }\n    })\n    return mixinedPropValues\n  }\n\n  public getColorsByColorOption (colorOption) {\n    if (colorOption && colorOption.palette) return colorOption.palette\n    const colorType = colorOption ? colorOption.type : 'pure'\n    let colors\n    switch (colorType) {\n      case 'gradient':\n        colors = PlThemeColors.gradient\n        break\n      case 'pureOrGradient':\n        colors = [...PlThemeColors.pure, ...PlThemeColors.gradient]\n        break\n      case 'pure':\n      default:\n        colors = PlThemeColors.pure\n        break\n    }\n    return colors\n  }\n\n}\n","\n// TODO: å·¦å¾å³è¡¨é¡µé¢ãfuncId\nexport const CHART_TABLE_FUNC_ID = '???'\n\n","import { Injectable } from '@angular/core';\nimport { BsModalService, ModalOptions } from 'ngx-bootstrap/modal';\nimport { DataJumpConfig, DatalessJumpConfig, JumpTypes } from './preset/preset.jump';\nimport { CHART_TABLE_FUNC_ID } from './util';\n\n/**\n * @deprecated\n * ä¸ºäº widget-devkit çå¼å®¹èææ¶ä¿çãä¸ååç¨äºã\n * åé¨ä»¶åºè¯¥ç´æ¥ç¨ @gspwidget/utilã\n */\nexport const DASHBOARD_API = 'DashboardApi'\n\n@Injectable(\n  // { providedIn: 'root' }\n)\nexport class WidgetDevkitService {\n\n  constructor (\n    private modalService: BsModalService,\n    // private http: HttpClient\n    // private storageSvc: StorageService\n  ) { }\n\n  openModal (content: any, config?: ModalOptions) {\n    return this.modalService.show(content, config)\n  }\n\n  openMenu (funcId: string, queryParamsArray?: string[][]) {\n    window[DASHBOARD_API].openMenu(funcId, queryParamsArray)\n  }\n  openApp (appId: string) {\n    window[DASHBOARD_API].openApp(appId)\n  }\n  /**\n   * options åè https://ng.ant.design/components/message/zh\n   */\n  openInfoMsg (content: string, options?) {\n    window[DASHBOARD_API].messageSvc.info(content, options)\n  }\n  /**\n   * options åè https://ng.ant.design/components/message/zh\n   */\n  openSuccessMsg (content: string, options?) {\n    window[DASHBOARD_API].messageSvc.success(content, options)\n  }\n  /**\n   * options åè https://ng.ant.design/components/message/zh\n   */\n  openWarningMsg (content: string, options?) {\n    window[DASHBOARD_API].messageSvc.warning(content, options)\n  }\n  /**\n   * options åè https://ng.ant.design/components/message/zh\n   */\n  openErrorMsg (content: string, options?) {\n    window[DASHBOARD_API].messageSvc.error(content, options)\n  }\n\n  getData (dataOption) {\n    return window[DASHBOARD_API].storageSvc.getData(dataOption)\n  }\n  getUserInfo (reload = false) {\n    return window[DASHBOARD_API].storageSvc.getUserInfo(reload)\n  }\n  getUserAvatar (reload = false) {\n    return window[DASHBOARD_API].storageSvc.getUserAvatar(reload)\n  }\n  /**\n   * @deprecated åºç¨å¦å¤ä¸¤ä¸ª jump æ¹æ³\n   * èæ¥è·³è½¬ï¼ç´æ¥æéç½®å±æ§çå¼ä¼ è¿æ¥å°±è¡ãéæâæ âå°±ä¸è·³è½¬ã\n   * @param jumpProperty è·³è½¬çéç½®å±æ§çå¼\n   * @param dataItem å½åè·³è½¬å¯¹åºçæ°æ®è¡ãå¦ææ¯å¨å±è·³è½¬ï¼å°±ä¼ å¥ç¬¬ä¸è¡ï¼\n   */\n  jump (jumpProperty, dataItem?: any) {\n    const { type, funcId, params } = jumpProperty\n    const queryParamsArray = Array.isArray(params)\n      ? params.map(param => [param.key, (param.valueType === 'fixedValue'\n        ? param.fixedValue\n        : (dataItem\n          ? dataItem[param.fieldName.name]\n          : undefined\n        )\n      )])\n      : undefined\n    switch (type) {\n      case JumpTypes.None:\n        return\n      case JumpTypes.Func:\n        this.openMenu(funcId, queryParamsArray)\n        break\n      case JumpTypes.ChartTable:\n        this.openMenu(CHART_TABLE_FUNC_ID, queryParamsArray)\n        break\n    }\n  }\n  jumpWithData (dataJumpConfig: DataJumpConfig, dataItem: any) {\n    const { jumpType, funcIdSource, funcIdDataField, funcId, funcParams, url, urlParams, queryParams } = dataJumpConfig\n    const funcParamsArray = Array.isArray(funcParams)\n      ? funcParams.map(funcParam => [funcParam.key, (funcParam.valueType === 'fixedValue'\n        ? funcParam.fixedValue\n        : (dataItem\n          ? dataItem[funcParam.fieldName.name]\n          : undefined\n        )\n      )])\n      : undefined\n    switch (jumpType) {\n      case JumpTypes.None:\n        return\n      case JumpTypes.Func:\n        const resultFuncId =\n          (!funcIdSource || funcIdSource==='fixed')\n          ? funcId\n          : dataItem[funcIdDataField.name]\n        if (resultFuncId) this.openMenu(resultFuncId, funcParamsArray)\n        break\n      case JumpTypes.ChartTable:\n        this.openMenu(CHART_TABLE_FUNC_ID, funcParamsArray)\n        break\n      case JumpTypes.NewBrowserTab:\n        // æ¼ url\n        let finalUrl = url\n        // + urlParams\n        if (urlParams && urlParams.length > 0) {\n          const urlParamPart = urlParams.map(urlParam => {\n            const { valueType, fixedValue, fieldName } = urlParam\n            return valueType === 'fixedValue' ? fixedValue : dataItem[fieldName.name]\n          }).join('/')\n          finalUrl += url.endsWith('/') ? '' : '/'\n          finalUrl += urlParamPart\n        }\n        // + queryParams\n        if (queryParams && queryParams.length > 0) {\n          const queryParamPart = queryParams.map(queryParam => {\n            const { key, valueType, fixedValue, fieldName } = queryParam\n            return `${key}=${valueType === 'fixedValue' ? fixedValue : dataItem[fieldName.name]}`\n          }).join('&')\n          finalUrl += '?' + queryParamPart\n        }\n        // æå¼\n        window.open(finalUrl, '_blank')\n    }\n  }\n  jumpWithoutData (datalessJumpConfig: DatalessJumpConfig) {\n    const { jumpType, funcId, funcParams, url } = datalessJumpConfig\n    const funcParamsArray = Array.isArray(funcParams)\n      ? funcParams.map(funcParam => [funcParam.key, funcParam.value])\n      : undefined\n    switch (jumpType) {\n      case JumpTypes.None:\n        return\n      case JumpTypes.Func:\n        this.openMenu(funcId, funcParamsArray)\n        break\n      case JumpTypes.ChartTable:\n        this.openMenu(CHART_TABLE_FUNC_ID, funcParamsArray)\n        break\n      case JumpTypes.NewBrowserTab:\n        window.open(url, '_blank')\n    }\n  }\n\n}\n","import {\n  Component,\n  ContentChild, ElementRef, EventEmitter, Input, OnInit, Output,\n  TemplateRef, ViewEncapsulation\n} from '@angular/core';\nimport { DatalessJumpConfig, JumpTypes } from '../preset/preset.jump';\nimport { WidgetDevkitService } from '../widget-devkit.service';\n\n@Component({\n  selector: 'lib-widget-title-bar',\n  templateUrl: './widget-title-bar.component.html',\n  styleUrls: ['./widget-title-bar.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WidgetTitleBarComponent implements OnInit {\n\n  @Input() icon = ''\n  /** æ é¢ */\n  @Input() showTitle = true\n  @Input() title = ''\n  /** æ°å­ */\n  @Input() showNumber = false\n  @Input() number = 0\n  /** è®¾ç½®æé® */\n  @Input() showSetting = false\n  @Input() settingTitle: string\n  @Output() clickSetting = new EventEmitter<any>()\n  /** å·æ°æé® */\n  @Input() showRefresh = false\n  @Output() clickRefresh = new EventEmitter<any>()\n\n  /** æ¯å¦å¯ç¨è·³è½¬ï¼å¼å¯ååé¨ä»¶éç½®ä¸­å¯éç½®å¨å±èæ¥ */\n  @Input() jumpConfig: DatalessJumpConfig\n  /** @deprecated åºæ¹ç¨ enableJumpãå¨å±èæ¥éç½® */\n  @Input() jumpProperty\n  /** @deprecated åºæ¹ç¨ enableJumpãä¸ºäºè·³è½¬æ¶è½åå°æ°æ®çç¬¬ä¸è¡ï¼ç¨æ¥æ¼æ¥è·³è½¬è·¯ç±åæ°ã */\n  @Input() data: any[]\n\n  /** ä¼ å¥æ¨¡æ¿ */\n  @ContentChild('leftTemplate') leftTemplate: TemplateRef<ElementRef>\n  @ContentChild('rightTemplate') rightTemplate: TemplateRef<ElementRef>\n\n  JumpTypes = JumpTypes\n\n  constructor (\n    private devkitSvc: WidgetDevkitService\n  ) { }\n\n  ngOnInit () {}\n\n  handleClickJump () {\n    this.devkitSvc.jumpWithoutData(this.jumpConfig)\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nexport interface FilterOption<> {\n  value: any,\n  name: string\n}\n\n@Component({\n  selector: 'lib-widget-title-bar-select',\n  templateUrl: './widget-title-bar-select.component.html',\n  styleUrls: ['./widget-title-bar-select.component.scss']\n})\nexport class WidgetTitleBarSelectComponent implements OnInit {\n  filter: FormControl\n  \n  /** è¥ä¸è®¾ç½®ï¼é»è®¤ä½¿ç¨ç¬¬ä¸é¡¹ option */\n  @Input() defaultFilterValue: any\n  @Input() filterOptions: FilterOption[] = []\n  @Output() onFilterChange = new EventEmitter<any>()\n  \n  constructor() { }\n\n  ngOnInit() {\n    this.filter = new FormControl(this.defaultFilterValue ? this.defaultFilterValue : this.filterOptions[0].value)\n\n    this.filter.valueChanges.subscribe(newValue => {\n      this.onFilterChange.emit(newValue)\n    })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { WidgetTitleBarComponent } from './widget-title-bar.component';\nimport { WidgetTitleBarSelectComponent } from './widget-title-bar-select/widget-title-bar-select.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n    declarations: [\n        WidgetTitleBarComponent,\n        WidgetTitleBarSelectComponent\n    ],\n    exports: [\n        WidgetTitleBarComponent,\n        WidgetTitleBarSelectComponent\n    ],\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        TranslateModule.forChild()\n    ]\n})\nexport class WidgetTitleBarModule {\n}","// TODO Should GradientObject been LinearGradientObject | RadialGradientObject\nexport interface GradientObject {\n  id?: number;\n\n  type: string;\n\n  colorStops: GradientColorStop[];\n}\n\nexport interface InnerGradientObject extends GradientObject {\n  __canvasGradient: CanvasGradient;\n}\n\nexport interface GradientColorStop {\n  offset: number;\n  color: string;\n}\n\nexport default class Gradient {\n  id?: number;\n\n  type: string;\n\n  colorStops: GradientColorStop[];\n\n  constructor(colorStops: GradientColorStop[]) {\n    this.colorStops = colorStops || [];\n  }\n\n  addColorStop(offset: number, color: string) {\n    this.colorStops.push({\n      offset,\n      color,\n    });\n  }\n}\n","import Gradient, { GradientObject, GradientColorStop } from \"./zrender.gradient\";\n\nexport interface LinearGradientObject extends GradientObject {\n  type: \"linear\";\n\n  x: number;\n  y: number;\n  x2: number;\n  y2: number;\n\n  global: boolean;\n}\n/**\n * x, y, x2, y2 are all percent from 0 to 1 when globalCoord is false\n */\n\nexport default class LinearGradient extends Gradient {\n  type: \"linear\";\n\n  x: number;\n  y: number;\n  x2: number;\n  y2: number;\n\n  global: boolean;\n\n  constructor(\n    x: number,\n    y: number,\n    x2: number,\n    y2: number,\n    colorStops?: GradientColorStop[],\n    globalCoord?: boolean\n  ) {\n    super(colorStops);\n\n    // Should do nothing more in this constructor. Because gradient can be\n    // declard by `color: {type: 'linear', colorStops: ...}`, where\n    // this constructor will not be called.\n\n    this.x = x == null ? 0 : x;\n\n    this.y = y == null ? 0 : y;\n\n    this.x2 = x2 == null ? 1 : x2;\n\n    this.y2 = y2 == null ? 0 : y2;\n\n    // Can be cloned\n    this.type = \"linear\";\n\n    // If use global coord\n    this.global = globalCoord || false;\n  }\n}\n","import { PlThemeColors } from \"@gspwidget/util\"\nimport { DataField, PropertyTypes } from \"../../types\"\nimport LinearGradient from \"./zrender.linear-gradient\"\n\nexport const EchartsOptions = {\n  grid: {\n    top: 20,\n    right: 30,\n    bottom: 36,\n    left: 10,\n    containLabel: true,\n  },\n  xAxis: {\n    type: 'category',\n    axisLine: {\n      lineStyle: {\n        color: '#D9D9D9',\n      }\n    },\n    axisTick: {\n      lineStyle: {\n        color: '#D9D9D9',\n      }\n    },\n    axisLabel: {\n      color: 'black',\n      margin: 10,\n      fontSize: 11\n    }\n  },\n  yAxis: {\n    axisLine: {\n      show: false\n    },\n    axisTick: {\n      show: false\n    },\n    splitLine: {\n      lineStyle: {\n        color: '#E4EBF057',\n        // type: 'dashed'\n      }\n    },\n    axisLabel: {\n      fontSize: 11\n    }\n  },\n  legend: {\n    // left: 45,\n    // top: -3,\n    x: 'center',\n    y: 'bottom',\n    itemWidth: 16,\n    itemHeight: 3,\n    borderRadius: 2,\n    icon: 'roundRect',\n    padding: [15, 0],\n    textStyle: {\n      color: '#000000a6'\n    }\n  },\n  tooltip: {\n    backgroundColor: \"#ffffffe8\",\n    textStyle: {\n      color: \"#000000e6\",\n    },\n    extraCssText: \"box-shadow: 0px 1px 7px #00000017;\",\n    appendToBody: true,\n    confine: true,\n  },\n}\nexport const chartsConsts = {\n  /** series label å­ä½å¤§å° */\n  seriesLabelFontSize: 9,\n}\n\nconst splitedGradientColors = PlThemeColors.gradient.map(c => c.split(','))\n\nexport const getChartColorsPure = (params) => {\n  return PlThemeColors.pure[params.dataIndex];\n}\nexport const getChartColorsGradient = (params) => {\n  return new LinearGradient(\n    0, 0, 0, 1, [\n      {offset: 0, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][0]},\n      {offset: 1, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][1]}\n    ]\n  )\n}\nexport const getChartColorsGradientOne = (params) => {\n  return new LinearGradient(\n    1, 0, 0, 0, [\n      {offset: 0, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][0]},\n      {offset: 1, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][1]}\n    ]\n  )\n}\n\n/**\n * å¯¹äºæ ây è½´èªå®ä¹èå´â ç charts åé¨ä»¶ï¼data é½è¦ç¨å®è¿æ»¤ååç¨\n * @param obj åé¨ä»¶å®ä¾\n */\nexport function filterYData (obj: { filterYFlag, yFieldObjs: { valueField: DataField, color: string }[], minY, maxY }, data) {\n  if (obj.filterYFlag) {\n    const yFields = obj.yFieldObjs.map(o => o.valueField.name)\n    return data.filter(item => {\n      return !yFields.some(yField => item[yField] <= obj.minY || item[yField] >= obj.maxY)\n    })\n  }\n  return data\n}\n\nexport const EchartsPropertyOptions = {\n  showRefresh: {\n    category: 'data',\n    displayName: 'showRefreshBtn',\n    type: PropertyTypes.Bool,\n    boolOption: {\n      default: true\n    }\n  },\n  filterYFlag: {\n    type: PropertyTypes.Bool,\n    category: 'data',\n    displayName: 'setYRange'\n  },\n  minY: {\n    type: PropertyTypes.Number,\n    category: 'data',\n    displayName: 'minY',\n    numberOption: {\n      default: 0\n    },\n    ifShow (values) { return values.filterYFlag }\n  },\n  maxY: {\n    type: PropertyTypes.Number,\n    category: 'data',\n    displayName: 'maxY',\n    numberOption: {\n      default: 1000\n    },\n    ifShow (values) { return values.filterYFlag }\n  },\n\n  showLabel: {\n    category: 'style',\n    type: PropertyTypes.Bool,\n    displayName: 'showNumber'\n  },\n  showTooltip: {\n    category: 'style',\n    type: PropertyTypes.Bool,\n    boolOption: { default: true },\n    displayName: 'showHoverDetail'\n  }\n\n  , legendStyleOption: {\n    type: PropertyTypes.Enum,\n    displayName: 'legendType',\n    category: 'style',\n    enumOption: {\n      default: 'scroll',\n      items: [\n        { value: 'none', displayName: 'notVisible' },\n        { value: 'plain', displayName: 'showAll' },\n        { value: 'scroll', displayName: 'scrollOverflow' }\n      ]\n    }\n  },\n  valueStyleOption: {\n    type: PropertyTypes.Enum,\n    displayName: 'valueType',\n    category: 'style',\n    enumOption: {\n      default: 'right',\n      items: [\n        { value: 'right', displayName: 'right' },\n        { value: 'insideRight', displayName: 'inside' },\n      ]\n    }\n  }\n}\n\n/**\n * ä¸ç§ä¼ åæ¹å¼ï¼\n * 1. '#000', '#fff'\n * 2. '#000,#fff'\n * 3. '#000'\n */\nexport function echartsGradient (c1: string, c2?: string) {\n  // è¥åªä¼ äºä¸ä¸ªå¼ãè¿ä¸æ¯éå·åå²ï¼åç´æ¥è¿åæ­¤çº¯è²\n  if (!c2 && !c1.includes(',')) return c1\n  // è¥åªä¼ äºä¸ä¸ªå¼ãæ¯éå·åå²ï¼å°±åå²ä¸ºä¿©é¢è²\n  if (!c2) [c1, c2] = c1.split(',')\n  return new LinearGradient(\n    0, 0, 0, 1, [\n      {offset: 0, color: c1},\n      {offset: 1, color: c2}\n    ]\n  )\n}\n\n// TODO: ææ¶ç»èµéåå½éå\nexport const tempMap = {\n  'éé¢': {\n    'en': 'Amount',\n    'zh-CHS': 'éé¢',\n  },\n  'æ°é': {\n    'en': 'Number',\n    'zh-CHS': 'æ°é',\n  }\n}\n// TODO: ææ¶ç»èµéå½éå\nexport function tempLabel (dataField: DataField, currentLang: string) {\n  const { label } = dataField\n  return tempMap[label] && tempMap[label][currentLang]\n    ? tempMap[label][currentLang]\n    : dataField.label\n}\n","/**\n * å­æ¾ææä»é¢å¶åé¨ä»¶ä¸­æ½ååºæ¥çå¬å±å¼ãæ¹æ³ã\n * å¥½å¤æ¯å¨æ­¤åºä¸­ç»ä¸ç»´æ¤ãç®¡çï¼ä¸ä¼è¢«æå°æ¯ä¸ªåé¨ä»¶ä¸­ã\n */\nexport * from './preset.jump'\nexport * from './preset.echarts'\n\n/**\n * dataItem è¿ä¸ªåå­ä¼å½±å exp ä¸­çåæ³ï¼ä¸å¯éææ´æ¹ã\n */\nexport function resolveTemplate (html: string, dataItem) {\n  const expPatt = /{{[\\d\\D]+?}}/gm\n  if (!html) return ''\n  const exps = html.match(expPatt) || []\n  try {\n    exps.forEach(exp => {\n      html = html.replace(exp, eval(exp.slice(2, -2)))\n    })\n  } catch (err) {\n    return html\n  }\n  return html\n}\n\n","import { Injectable, EventEmitter } from '@angular/core';\nimport { DataWithDims, Dimension } from '@gspwidget/util';\nimport { Observable } from 'rxjs';\n\nexport interface LoadDataOptions {\n  param?: { [key: string]: any }\n}\n/** é¨ä»¶ç³»ç»ãæ°æ®æå¡åé¨ä½¿ç¨ */\nexport interface LoadDataPayload {\n\n}\n/**\n * æ°æ®å è½½ä¸åºè¯¥è®©æ­¤ service ç´æ¥ååºï¼å ä¸ºå¤é¨æ¡æ¶å¹¶ä¸éæ¶é½æ¯æåæ°ï¼\n * æ¯å¦æ°å¢é¨ä»¶åçé¨ä»¶éç½®ï¼æ­¤æ¶æ²¡æéç½®è¿æ°æ®ï¼ä¾¿ä¼æå¡ç«¯æ¥éã\n * åºè¯¥äº¤ç±åé¨ä»¶å®¹å¨å è½½æ°æ®ã\n */\n@Injectable()\nexport class WidgetDataService {\n  /** loadData() / reloadData() æ¶è§¦åï¼å¤é¨åé¨ä»¶å®¹å¨æ¥æ¶ãå è½½æ°æ®ï¼å¹¶éè¿ setData è®¾ç½®åæ°æ® */\n  public onLoadData = new EventEmitter<{ [key: string]: any }>()\n  private onGetData = new EventEmitter<any[]>()\n  private onGetDataWithDims = new EventEmitter<DataWithDims>()\n\n  /**\n   * åé¨ä»¶è°ç¨æ­¤æ¹æ³è·åæ°æ®ãç¤ºä¾ï¼\n   * ```ts\n   * this.dataService.loadData().subscribe(data => {\n   *  this.data = data // ä½¿ç¨æ°æ®\n   * })\n   * ```\n   */\n  loadData (options?: LoadDataOptions) {\n    this.onLoadData.emit(options)\n    return this.onGetData\n  }\n  /**\n   * è·åå¨æ°æ®ä¿¡æ¯ï¼åå« dimensions\n   */\n  loadDataWithDims (options?: LoadDataOptions): Observable<DataWithDims> {\n    this.onLoadData.emit(options)\n    return this.onGetDataWithDims\n  }\n  /**\n   * åé¨ä»¶è°ç¨æ­¤æ¹æ³ä»¥éæ°è·åæ°æ®ï¼æ°æ®å è½½å®æååæ¬¡è°ç¨å¨ loadData() æ³¨åçäºä»¶å¤çå¨ãç¤ºä¾ï¼\n   * ```ts\n   * this.dataService.refreshData()\n   * ```\n   */\n  reloadData (param?: { [key: string]: any }) {\n    this.onLoadData.emit(param)\n  }\n\n  /**\n   * å¤é¨éè¿æ­¤æ¹æ³ç»åé¨ä»¶è®¾ç½®æ°æ®ï¼åé¨ä»¶æ éè°ç¨\n   * @param dataWithDims è¦è®¾ç½®çæ°æ®\n   */\n  setData (dataWithDims: DataWithDims) {\n    this.onGetData.emit(dataWithDims.tableData)\n    this.onGetDataWithDims.emit(dataWithDims)\n  }\n\n}\n","/** å¯ä¾èµæ³¨å¥è³åé¨ä»¶çåé¨ä»¶å®ä¾ä¿¡æ¯ */\nexport class WidgetInstanceInfo {\n  constructor (\n    /** é¨ä»¶ id */\n    public portletId?: string,\n    /** åé¨ä»¶å®ä¾ id */\n    public id?: string,\n    /** éææä»¶å¼ç¨åç¼ */\n    public assetsBaseUrl?: string,\n  ) {\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { WidgetDevkitService } from './widget-devkit.service';\nimport { WidgetTitleBarComponent } from './widget-title-bar/widget-title-bar.component';\nimport { WidgetTitleBarModule } from './widget-title-bar/widget-title-bar.module';\n// import { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [  ],\n  providers: [ WidgetDevkitService ],\n  imports: [\n    CommonModule,\n    // éè¦å  forRootï¼ä¿è¯ WidgetDevkitService è½å¨æ­¤å±æ¾å°ä¾èµçéé¢çæå¡ã\n    // æ æ³ä¿è¯å¤é¨ç¯å¢ã\n    ModalModule.forRoot(),\n    // TranslateModule.forChild()\n  ],\n  exports: [\n    // TranslateModule\n    WidgetTitleBarModule\n  ]\n})\nexport class WidgetDevkitModule { }\n"]}