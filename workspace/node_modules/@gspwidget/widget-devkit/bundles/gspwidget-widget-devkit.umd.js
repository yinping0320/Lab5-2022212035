(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('date-fns/add'), require('date-fns/sub'), require('rxjs/operators'), require('@angular/forms'), require('@ngx-translate/core'), require('@gspwidget/util'), require('@angular/core'), require('@angular/common'), require('ngx-bootstrap/modal')) :
    typeof define === 'function' && define.amd ? define('@gspwidget/widget-devkit', ['exports', 'date-fns/add', 'date-fns/sub', 'rxjs/operators', '@angular/forms', '@ngx-translate/core', '@gspwidget/util', '@angular/core', '@angular/common', 'ngx-bootstrap/modal'], factory) :
    (factory((global.gspwidget = global.gspwidget || {}, global.gspwidget['widget-devkit'] = {}),global.add,global.sub,global.rxjs.operators,global.ng.forms,global.core,global.util,global.ng.core,global.ng.common,global.modal));
}(this, (function (exports,add,sub,operators,forms,core,util,i0,common,modal) { 'use strict';

    add = add && add.hasOwnProperty('default') ? add['default'] : add;
    sub = sub && sub.hasOwnProperty('default') ? sub['default'] : sub;

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __decorate(decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
            r = Reflect.decorate(decorators, target, key, desc);
        else
            for (var i = decorators.length - 1; i >= 0; i--)
                if (d = decorators[i])
                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    }
    function __metadata(metadataKey, metadataValue) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function")
            return Reflect.metadata(metadataKey, metadataValue);
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // if (!window.widgetBaseProperies) window.widgetBaseProperies = []
    if (!window.registry)
        window.registry = {};
    /**
     * å…ƒéƒ¨ä»¶æ³¨å†Œè¡¨
     * @type {?}
     */
    var WidgetRegistry = {
        setWidget: /**
         * @param {?} name
         * @param {?} config
         * @return {?}
         */ function (name, config) {
            if (!window.registry[name])
                window.registry[name] = {};
            window.registry[name] = __assign({}, window.registry[name], config);
        },
        getWidgetByName: /**
         * @param {?} name
         * @return {?}
         */ function (name) {
            return window.registry[name];
        },
        getWidgetByCtorName: /**
         * @param {?} ctorName
         * @return {?}
         */ function (ctorName) {
            return Object.values(window.registry)
                .find(( /**
         * @param {?} widgetConfig
         * @return {?}
         */function (widgetConfig) {
                return widgetConfig.ctor.name === ctorName;
            }));
        }
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} widgetConfig
     * @return {?}
     */
    function Widget(widgetConfig) {
        return ( /**
         * @param {?} constructor
         * @return {?}
         */function (constructor) {
            WidgetRegistry.setWidget(widgetConfig.name, __assign({ ctor: constructor }, widgetConfig));
            // çˆ¶ç±» WidgetBase
            constructor.prototype.widgetName = widgetConfig.name;
        });
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var WidgetEventMap = new Map();
    /**
     * ç”¨äºæŠŠ EventEmitter å±æ€§æ³¨å†Œä¸ºå…ƒéƒ¨ä»¶äº‹ä»¶
     * @param {?=} eventConfig
     * @return {?}
     */
    function WidgetEvent(eventConfig) {
        if (eventConfig === void 0) {
            eventConfig = {};
        }
        return ( /**
         * @param {?} widgetPrototype
         * @param {?} eventPropName
         * @return {?}
         */function (widgetPrototype, eventPropName) {
            // TODO: æƒ³åŠæ³•æŠŠ su åŠ è¿›æ‰€æœ‰è¿è¡Œæ—¶æ³¨å†Œè¡¨é‡Œçš„ keys é‡Œ
            /** @type {?} */
            var ctorName = widgetPrototype.constructor.name;
            if (!WidgetEventMap.get(ctorName))
                WidgetEventMap.set(ctorName, []);
            WidgetEventMap.get(ctorName).push(__assign({ propName: eventPropName }, eventConfig));
        });
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WidgetEventService = /** @class */ (function () {
        function WidgetEventService() {
        }
        /**
         * @param {?} widgetName
         * @param {?} pvs
         * @return {?}
         */
        WidgetEventService.prototype.getEventsByWidgetName = /**
         * @param {?} widgetName
         * @param {?} pvs
         * @return {?}
         */
            function (widgetName, pvs) {
                /** @type {?} */
                var ctorName = WidgetRegistry.getWidgetByName(widgetName).ctor.name;
                /** @type {?} */
                var widgetEvents = WidgetEventMap.get(ctorName) || [];
                if (widgetName === util.FILTERS_WIDGET_NAME) {
                    return pvs[util.FILTERS_WIDGET_FILTERS_PROP_NAME].map(( /**
                     * @param {?} fc
                     * @return {?}
                     */function (fc) {
                        return ({
                            name: fc.i18nName[util.curLang],
                            propName: fc.i18nName[util.curLang],
                        });
                    }));
                }
                // ç»„è£…
                return __spread(widgetEvents, test);
            };
        WidgetEventService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] }
        ];
        /** @nocollapse */
        WidgetEventService.ctorParameters = function () { return []; };
        /** @nocollapse */ WidgetEventService.ngInjectableDef = i0.defineInjectable({ factory: function WidgetEventService_Factory() { return new WidgetEventService(); }, token: WidgetEventService, providedIn: "root" });
        return WidgetEventService;
    }());
    /** @type {?} */
    var test = [{
            name: 'click bar'
        }, {
            name: 'event 2'
        }, {
            name: 'event 3'
        }];

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var PropertyTypes = {
        Text: 'textOption',
        Bool: 'boolOption',
        Number: 'numberOption',
        Enum: 'enumOption',
        Color: 'colorOption',
        // Date = 'dateOption',
        Object: 'objectOption',
        Custom: 'customOption',
        SelectHelp: 'selectHelpOption',
        /** Help å¾—åˆ°çš„å€¼çš„ç»“æ„ï¼Œå–å†³äºé…ç½® HelpOption åï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°æ®ç»“æ„ */
        Help: 'helpOption',
        /** DataField å¾—åˆ°çš„å€¼çš„å€¼çš„ç±»å‹ä¸º DataField */
        DataField: 'dataFieldOption',
        Filter: 'filterOption',
        Html: 'htmlOption',
        DataParam: 'dataParamOption',
    };
    /** @enum {number} */
    var HelpStructure = {
        table: 0,
        treeTable: 1,
        transfer: 2,
        treeTransfer: 3,
    };
    HelpStructure[HelpStructure.table] = 'table';
    HelpStructure[HelpStructure.treeTable] = 'treeTable';
    HelpStructure[HelpStructure.transfer] = 'transfer';
    HelpStructure[HelpStructure.treeTransfer] = 'treeTransfer';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * æ²¡å‘ç›´æ¥ç”¨ [] ä½œ key ç›´æ¥å»º literal å¯¹è±¡ï¼Œaot ç¼–è¯‘ä¼šæŠ¥é”™
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    function getObj(key, value) {
        /** @type {?} */
        var obj = {};
        obj[key] = value;
        return obj;
    }
    /**
     * ç­›é€‰æè¿°
     */
    var /**
     * ç­›é€‰æè¿°
     */ FSLastTimeItem = /** @class */ (function () {
        function FSLastTimeItem() {
            this.num = 1;
            this.unit = 'day';
        }
        /**
         * ä¼ å…¥ä¸€ä¸ª 'æœ€è¿‘næŸ'ï¼Œè¿”å›å¯¹åº”çš„æ—¶é—´èŒƒå›´æ•°ç»„
         */
        /**
         * ä¼ å…¥ä¸€ä¸ª 'æœ€è¿‘næŸ'ï¼Œè¿”å›å¯¹åº”çš„æ—¶é—´èŒƒå›´æ•°ç»„
         * @param {?} lastTimeItem
         * @return {?}
         */
        FSLastTimeItem.GetDates = /**
         * ä¼ å…¥ä¸€ä¸ª 'æœ€è¿‘næŸ'ï¼Œè¿”å›å¯¹åº”çš„æ—¶é—´èŒƒå›´æ•°ç»„
         * @param {?} lastTimeItem
         * @return {?}
         */
            function (lastTimeItem) {
                return [
                    sub(new Date(), getObj(lastTimeItem.unit + 's', lastTimeItem.num)),
                    new Date()
                ];
            };
        return FSLastTimeItem;
    }());
    var FSRangeDefault = /** @class */ (function () {
        function FSRangeDefault() {
            this.beforeNum = 1;
            this.beforeUnit = 'month';
            this.afterNum = 0;
            this.afterUnit = 'day';
        }
        /**
         * @param {?} rangeDefault
         * @return {?}
         */
        FSRangeDefault.GetDates = /**
         * @param {?} rangeDefault
         * @return {?}
         */
            function (rangeDefault) {
                return [
                    sub(new Date(), getObj(rangeDefault.beforeUnit + 's', rangeDefault.afterNum)),
                    add(new Date(), getObj(rangeDefault.beforeUnit + 's', rangeDefault.afterNum)),
                ];
            };
        return FSRangeDefault;
    }());
    var FSDate = /** @class */ (function () {
        function FSDate() {
            this.type = 'single';
            this.singleUnit = 'day';
            this.singleDefaultType = 'current';
            this.singleDefaultSpecified = new Date();
            this.rangeDefault = new FSRangeDefault();
            this.lastTimeItems = [];
            this.lastTimeDisplayType = 'flat';
        }
        return FSDate;
    }());
    var FSEnum = /** @class */ (function () {
        function FSEnum() {
            this.multi = false;
            /**
             * æš‚æ—¶å®šä¸ºï¼Œä»…æœ‰ single æ—¶å¯ä»¥é€‰æ‹© flat
             */
            this.displayType = 'select';
            this.source = 'manual';
            /**
             * æ˜¯å¦å¯æ¸…ç©ºä¸é€‰ã€‚ä»…æœ‰ select ä¸” single æ‰æœ‰æ­¤é€‰é¡¹
             */
            this.allowEmpty = false;
            /**
             * é€šè¿‡ä¸Šé¢ä¸¤ä¸ªå­—æ®µå–å‡º items å­˜åœ¨ä¸‹é¢
             */
            this.itemsFromData = [];
            this.itemsManual = [];
            this.multiDefault = [];
        }
        // æš‚æ—¶ä¸åš
        // sourceDatasetId: string
        // sourceDatasetLabelField?: DataField
        // sourceDatasetValueField?: DataField
        // æš‚æ—¶ä¸åš
        // sourceDatasetId: string
        // sourceDatasetLabelField?: DataField
        // sourceDatasetValueField?: DataField
        /**
         * @param {?} fsEnum
         * @return {?}
         */
        FSEnum.GetItems =
            // æš‚æ—¶ä¸åš
            // sourceDatasetId: string
            // sourceDatasetLabelField?: DataField
            // sourceDatasetValueField?: DataField
            /**
             * @param {?} fsEnum
             * @return {?}
             */
            function (fsEnum) {
                var source = fsEnum.source, itemsFromData = fsEnum.itemsFromData, itemsManual = fsEnum.itemsManual;
                if (source === 'dataField') {
                    // if (!itemsValueField || !intactData) return []
                    // const tempItems = intactData.map(dataItem => ({
                    //   label: dataItem[itemsLabelField || itemsValueField],
                    //   value: dataItem[itemsValueField]
                    // }))
                    // return ArrUtil.Unique(tempItems)
                    return itemsFromData;
                }
                else if (source === 'manual') {
                    return itemsManual;
                }
            };
        /**
         * @param {?} fsEnum
         * @return {?}
         */
        FSEnum.GetItemValues = /**
         * @param {?} fsEnum
         * @return {?}
         */
            function (fsEnum) {
                /**
                 * @param {?} item
                 * @return {?}
                 */
                function mapCb(item) { return item.value; }
                return FSEnum.GetItems(fsEnum).map(mapCb);
            };
        return FSEnum;
    }());
    var FSEnumItem = /** @class */ (function () {
        function FSEnumItem() {
        }
        return FSEnumItem;
    }());
    var FilterSchema = /** @class */ (function () {
        function FilterSchema() {
            /**
             * è¿‡æ»¤åç§°ï¼Œåœ¨ç­›é€‰æ§ä»¶ä¸Šæ˜¾ç¤ºï¼Œå¯é€‰
             */
            this.i18nName = {};
            this.showName = false;
            /**
             * è¿‡æ»¤å¤§ç±»
             */
            this.type = 'date';
            /**
             * æ¯ç§ç±»å‹çš„è¿‡æ»¤é…ç½®
             */
            this.date = new FSDate();
            this.enum = new FSEnum();
            this.number = {
                default: 0
            };
            this.text = {
                default: ''
            };
        }
        /**
         * è·å– FS çš„é»˜è®¤å€¼
         * ğŸ™… ä¸å¯ä»¥ä¾èµ– dataï¼šéƒ¨ä»¶ç¬¬ä¸€æ¬¡æ ¹æ®é»˜è®¤å€¼ç­›é€‰æ—¶ï¼Œè¿˜æ²¡æœ‰ data å‘¢ã€‚
         */
        /**
         * è·å– FS çš„é»˜è®¤å€¼
         * ğŸ™… ä¸å¯ä»¥ä¾èµ– dataï¼šéƒ¨ä»¶ç¬¬ä¸€æ¬¡æ ¹æ®é»˜è®¤å€¼ç­›é€‰æ—¶ï¼Œè¿˜æ²¡æœ‰ data å‘¢ã€‚
         * @param {?} fs
         * @return {?}
         */
        FilterSchema.getDefaultValue = /**
         * è·å– FS çš„é»˜è®¤å€¼
         * ğŸ™… ä¸å¯ä»¥ä¾èµ– dataï¼šéƒ¨ä»¶ç¬¬ä¸€æ¬¡æ ¹æ®é»˜è®¤å€¼ç­›é€‰æ—¶ï¼Œè¿˜æ²¡æœ‰ data å‘¢ã€‚
         * @param {?} fs
         * @return {?}
         */
            function (fs) {
                switch (fs.type) {
                    case 'date':
                        if (fs.date.type === 'single') {
                            if (fs.date.singleDefaultType === 'current') {
                                return new Date();
                            }
                            else {
                                return fs.date.singleDefaultSpecified;
                            }
                        }
                        else if (fs.date.type === 'range') {
                            return FSRangeDefault.GetDates(fs.date.rangeDefault);
                        }
                        else if (fs.date.type === 'lastTimeEnum') {
                            return FSLastTimeItem.GetDates(fs.date.lastTimeItems[0]);
                        }
                        break;
                    case 'enum':
                        var _a = fs.enum, multi = _a.multi, singleDefault = _a.singleDefault, multiDefault = _a.multiDefault;
                        return multi ? multiDefault : singleDefault;
                    case 'number':
                        return fs.number.default;
                        break;
                    case 'text':
                        return fs.text.default;
                        break;
                }
            };
        return FilterSchema;
    }());
    /**
     * @param {?} fs
     * @return {?}
     */
    function ifFsDateRange(fs) {
        if (!fs)
            return;
        return fs.type === 'date' && fs.date.type === 'range';
    }
    /**
     * @param {?} fs
     * @return {?}
     */
    function isFsFlat(fs) {
        if (!fs)
            return;
        return fs.type === 'date' && fs.date.type === 'lastTimeEnum' && fs.date.lastTimeDisplayType === 'flat'
            || fs.type === 'enum' && !fs.enum.multi && fs.enum.displayType === 'flat';
    }
    /**
     * å®˜æ–¹é¢„åˆ¶çš„ç­›é€‰ property
     * @type {?}
     */
    var FILTER_PROP_NAME = 'filter';
    /** @type {?} */
    var frontendFilterProp = {
        name: FILTER_PROP_NAME,
        displayName: 'ç­›é€‰',
        isArray: true,
        type: PropertyTypes.Object,
        objectOption: {
            objPropertyOptions: [{
                    name: 'fs',
                    type: PropertyTypes.Filter,
                }, {
                    name: 'dpId',
                    type: PropertyTypes.DataParam,
                }, {
                    name: 'dpId2',
                    type: PropertyTypes.DataParam,
                    ifShow: ( /**
                     * @param {?} pv
                     * @return {?}
                     */function (pv) {
                        return pv.fs && ifFsDateRange(pv.fs);
                    })
                }]
        }
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var JumpTypes = {
        None: '0',
        Func: '1',
        ChartTable: '2',
        NewBrowserTab: '3',
    };
    /**
     * é€‰æ‹©è”æŸ¥ç±»å‹
     * @type {?}
     */
    var jumpTypeOption = {
        type: PropertyTypes.Enum,
        enumOption: {
            default: JumpTypes.None,
            items: [
                { value: JumpTypes.None, displayName: 'none' },
                { value: JumpTypes.Func, displayName: 'toFuncOrInvoke' },
                // { value: JumpTypes.ChartTable, displayName: 'è·³è½¬è‡³é¢„åˆ¶å›¾è¡¨é¡µ' },
                { value: JumpTypes.NewBrowserTab, displayName: 'browserNewTab' }
            ]
        }
    };
    // let allFuncs
    /**
     * èœå•/è”æŸ¥å¸®åŠ© option
     * @type {?}
     */
    var funcOption = {
        type: PropertyTypes.Help,
        tip: 'é€‰èœå•/è”æŸ¥çš„å¸®åŠ©',
        helpOption: {
            getData: ( /**
             * @param {?} httpClient
             * @return {?}
             */function (httpClient) {
                return httpClient
                    .get('/api/runtime/sys/v1.0/functions/allFuncs')
                    .pipe(operators.map(( /**
             * @param {?} funcs
             * @return {?}
             */function (funcs) {
                    // allFuncs = funcs
                    return util.list2Tree(funcs, {
                        rootParentIdValue: '0',
                        beforeProcess: /**
                         * @param {?} item
                         * @return {?}
                         */ function (item) {
                            if (item.layer === '3') {
                                item.isLeaf = true;
                                item.isTableParent = true;
                            }
                        }
                    });
                })));
            }),
            structure: HelpStructure.treeTable,
            tableFields: ['code', 'name'],
            valueField: 'id',
            nameField: 'name'
        }
    };
    /**
     * ä¸å–å†³äºæŸæ¡æ•°æ®å€¼çš„è”æŸ¥
     * @type {?}
     */
    var dataJumpOption = {
        category: 'clickJump',
        type: PropertyTypes.Object,
        objectOption: {
            objPropertyOptions: [
                __assign({ name: 'jumpType', displayName: 'jumpType' }, jumpTypeOption),
                /** èœå•/è”æŸ¥ */
                {
                    name: 'funcIdSource',
                    type: PropertyTypes.Enum,
                    enumOption: {
                        items: ['fixed', 'fromData']
                    },
                    ifShow: /**
                     * @param {?} c
                     * @return {?}
                     */ function (c) { return c.jumpType === JumpTypes.Func; }
                }, {
                    name: 'funcIdDataField',
                    type: PropertyTypes.DataField,
                    ifShow: /**
                     * @param {?} c
                     * @return {?}
                     */ function (c) {
                        return c.jumpType === JumpTypes.Func && c.funcIdSource === 'fromData';
                    }
                },
                __assign({ name: 'funcId', displayName: 'func/invoke', ifShow: /**
                         * @param {?} c
                         * @return {?}
                         */ function (c) {
                        return c.jumpType === JumpTypes.Func && c.funcIdSource === 'fixed';
                    } }, funcOption),
                {
                    name: 'funcParams',
                    displayName: 'routeParams',
                    type: PropertyTypes.Object,
                    isArray: true,
                    objectOption: {
                        objPropertyOptions: [{
                                name: 'key',
                                displayName: 'paramKey',
                                textOption: { i18n: false },
                                type: PropertyTypes.Text,
                            }, {
                                name: 'valueType',
                                displayName: 'valueType',
                                type: PropertyTypes.Enum,
                                enumOption: {
                                    items: [
                                        { value: 'fieldName', displayName: 'dataFieldValue' },
                                        { value: 'fixedValue', displayName: 'fixedValue' }
                                    ]
                                }
                            }, {
                                name: 'fixedValue',
                                displayName: 'paramFixedValue',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                                ifShow: /**
                                 * @param {?} funcParam
                                 * @return {?}
                                 */ function (funcParam) { return funcParam.valueType === 'fixedValue'; }
                            }, {
                                name: 'fieldName',
                                displayName: 'paramValueField',
                                type: PropertyTypes.DataField,
                                ifShow: /**
                                 * @param {?} funcParam
                                 * @return {?}
                                 */ function (funcParam) { return funcParam.valueType === 'fieldName'; }
                            }]
                    },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.Func; }
                },
                /** æµè§ˆå™¨æ ‡ç­¾ */
                {
                    name: 'url',
                    displayName: 'newTabUrl',
                    type: PropertyTypes.Text,
                    textOption: { i18n: false },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.NewBrowserTab; }
                }, {
                    name: 'urlParams',
                    displayName: 'urlParams',
                    type: PropertyTypes.Object,
                    isArray: true,
                    objectOption: {
                        objPropertyOptions: [{
                                name: 'valueType',
                                displayName: 'valueType',
                                type: PropertyTypes.Enum,
                                enumOption: {
                                    items: [
                                        { value: 'fieldName', displayName: 'dataFieldValue' },
                                        { value: 'fixedValue', displayName: 'fixedValue' }
                                    ]
                                }
                            }, {
                                name: 'fixedValue',
                                displayName: 'paramFixedValue',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                                ifShow: /**
                                 * @param {?} urlParam
                                 * @return {?}
                                 */ function (urlParam) { return urlParam.valueType === 'fixedValue'; }
                            }, {
                                name: 'fieldName',
                                displayName: 'paramValueField',
                                type: PropertyTypes.DataField,
                                ifShow: /**
                                 * @param {?} urlParam
                                 * @return {?}
                                 */ function (urlParam) { return urlParam.valueType === 'fieldName'; }
                            }]
                    },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.NewBrowserTab; }
                }, {
                    name: 'queryParams',
                    displayName: 'urlQueryParams',
                    type: PropertyTypes.Object,
                    isArray: true,
                    objectOption: {
                        objPropertyOptions: [{
                                name: 'key',
                                displayName: 'paramKey',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                            }, {
                                name: 'valueType',
                                displayName: 'valueType',
                                type: PropertyTypes.Enum,
                                enumOption: {
                                    items: [
                                        { value: 'fieldName', displayName: 'dataFieldValue' },
                                        { value: 'fixedValue', displayName: 'fixedValue' }
                                    ]
                                }
                            }, {
                                name: 'fixedValue',
                                displayName: 'paramFixedValue',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                                ifShow: /**
                                 * @param {?} funcParam
                                 * @return {?}
                                 */ function (funcParam) { return funcParam.valueType === 'fixedValue'; }
                            }, {
                                name: 'fieldName',
                                displayName: 'paramValueField',
                                type: PropertyTypes.DataField,
                                ifShow: /**
                                 * @param {?} funcParam
                                 * @return {?}
                                 */ function (funcParam) { return funcParam.valueType === 'fieldName'; }
                            }]
                    },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.NewBrowserTab; }
                }
            ]
        }
    };
    /**
     * å†³äºæŸæ¡æ•°æ®å€¼çš„è”æŸ¥
     * @type {?}
     */
    var datalessJumpOption = {
        category: 'clickJump',
        type: PropertyTypes.Object,
        objectOption: {
            objPropertyOptions: [
                __assign({ name: 'jumpType', displayName: 'jumpType' }, jumpTypeOption),
                __assign({ name: 'funcId', displayName: 'func/invoke', ifShow: /**
                         * @param {?} values
                         * @return {?}
                         */ function (values) { return values.jumpType === JumpTypes.Func; } }, funcOption),
                {
                    name: 'funcParams',
                    displayName: 'routeParams',
                    type: PropertyTypes.Object,
                    isArray: true,
                    objectOption: {
                        objPropertyOptions: [{
                                name: 'key',
                                displayName: 'paramKey',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                            }, {
                                name: 'value',
                                displayName: 'paramValue',
                                type: PropertyTypes.Text,
                                textOption: { i18n: false },
                            }]
                    },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.Func; }
                },
                /** æµè§ˆå™¨æ ‡ç­¾ */
                {
                    name: 'url',
                    displayName: 'newTabUrl',
                    type: PropertyTypes.Text,
                    textOption: { i18n: false },
                    ifShow: /**
                     * @param {?} values
                     * @return {?}
                     */ function (values) { return values.jumpType === JumpTypes.NewBrowserTab; }
                }
            ]
        }
    };
    /**
     * @deprecated è¯·ç”¨ datalessJump æˆ– dataJump
     * @type {?}
     */
    var CommonPropertyOptions = {
        jump: datalessJumpOption
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * å…ƒéƒ¨ä»¶å±æ€§æ³¨å†Œè¡¨ï¼Œå½¢å¦‚
     * { constructorName: { propertyName: propertyOption }
     * @type {?}
     */
    var WidgetPropertyMap = new Map();
    /**
     * TODO: åŠ å…¥æ£€æŸ¥ï¼Œç¼–è¯‘æ—¶æŠ¥é”™ï¼ˆnameä¸åº”è¯¥å†™ï¼›ï¼‰
     * @param {?=} option å¯é€‰ï¼Œé»˜è®¤ä¸º { type: PropertyTypes.String }
     * @return {?}
     */
    function Property(option) {
        if (option === void 0) {
            option = {};
        }
        // è¿™é‡Œç»Ÿä¸€å¤„ç†ï¼šæ²¡æœ‰è®¾ç½® type çš„ä¸€å¾‹è®¾ç½®ä¸º Textã€‚æ²¡ç”¨é€’å½’ï¼Œä»…å¤šè€ƒè™‘äº† Obj å†…ä¸€å±‚ã€‚
        option.type = option.type || PropertyTypes.Text;
        if (option.objectOption && option.objectOption.objPropertyOptions) {
            option.objectOption.objPropertyOptions.forEach(( /**
             * @param {?} subOption
             * @return {?}
             */function (subOption) {
                subOption.type = subOption.type || PropertyTypes.Text;
            }));
        }
        option.isArray = !!option.isArray;
        return ( /**
         * @param {?} widgetPrototype
         * @param {?} propName
         * @return {?}
         */function (widgetPrototype, propName) {
            // TODO: æƒ³åŠæ³•æŠŠ su åŠ è¿›æ‰€æœ‰è¿è¡Œæ—¶æ³¨å†Œè¡¨é‡Œçš„ keys é‡Œ
            /** @type {?} */
            var ctorName = widgetPrototype.constructor.name;
            if (!WidgetPropertyMap.get(ctorName))
                WidgetPropertyMap.set(ctorName, []);
            WidgetPropertyMap.get(ctorName).push(__assign({ name: propName }, option));
            // è°ƒ angular Input decorator
            i0.Input()(widgetPrototype, propName);
        });
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var WidgetBase = /** @class */ (function () {
        /**
         * å› ä¸ºæ˜¯çˆ¶ç±»æ„é€ å‡½æ•°æ‰€ä»¥æ— æ³•ä¾èµ–æ³¨å…¥, ä¹Ÿæ²¡æ³•ä¼ å…¥å‚æ•°;
         * compInstance.field = xxx çš„æ–¹å¼åˆå‘ç”Ÿåœ¨æ„é€ å‡½æ•°åè€Œä¸å¤ªå¥½,
         * æ‰€ä»¥è€ƒè™‘æ­¤çˆ¶ç±»ä¸æä¾›æˆå‘˜å±æ€§, è€Œé€šè¿‡ä¾èµ–æ³¨å…¥, åœ¨å­ç»„ä»¶è‡ªå–.
         */
        function WidgetBase() {
            this.title = 'untitled';
            /**
             * @deprecated æ˜¯å¦ä½¿ç”¨å¤–éƒ¨æ•°æ®æºã€‚æ˜¯çš„è¯ï¼Œwc å°±æ‹¿å®ƒçš„ portlet id è¯·æ±‚æ•°æ®å»ã€‚åº”æ”¹ä¸º dataEngine å†™æ³•ã€‚
             */
            this.useDataEngine = false;
            if (this.widgetName == null)
                console.error("\u5143\u90E8\u4EF6 " + this.constructor.name + " \u672A\u6DFB\u52A0 @Widget({ name: <name>})");
        }
        /**
         * å…ƒéƒ¨ä»¶å®¹å™¨å¤§å°å˜åŒ–äº‹ä»¶ï¼Œå‚æ•° width ä¸ºå®¹å™¨å®½åº¦ï¼Œå•ä½ pxã€‚
         * å¯é‡å†™æ­¤æ–¹æ³•ä»¥å¤„ç†å¤æ‚çš„å“åº”å¼æ ·å¼ã€‚
         */
        /**
         * å…ƒéƒ¨ä»¶å®¹å™¨å¤§å°å˜åŒ–äº‹ä»¶ï¼Œå‚æ•° width ä¸ºå®¹å™¨å®½åº¦ï¼Œå•ä½ pxã€‚
         * å¯é‡å†™æ­¤æ–¹æ³•ä»¥å¤„ç†å¤æ‚çš„å“åº”å¼æ ·å¼ã€‚
         * @param {?} width
         * @param {?} height
         * @return {?}
         */
        WidgetBase.prototype.onResized = /**
         * å…ƒéƒ¨ä»¶å®¹å™¨å¤§å°å˜åŒ–äº‹ä»¶ï¼Œå‚æ•° width ä¸ºå®¹å™¨å®½åº¦ï¼Œå•ä½ pxã€‚
         * å¯é‡å†™æ­¤æ–¹æ³•ä»¥å¤„ç†å¤æ‚çš„å“åº”å¼æ ·å¼ã€‚
         * @param {?} width
         * @param {?} height
         * @return {?}
         */
            function (width, height) { };
        /**
         * @param {?} propName
         * @param {?} value
         * @return {?}
         */
        WidgetBase.prototype.onPropertyChange = /**
         * @param {?} propName
         * @param {?} value
         * @return {?}
         */
            function (propName, value) { };
        /**
         * @deprecated
         * è¯·ç”¨ this.dataService.loadData() ä»£æ›¿
         * @param data è·å¾—çš„æ•°æ®
         */
        /**
         * @deprecated
         * è¯·ç”¨ this.dataService.loadData() ä»£æ›¿
         * @param {?} data è·å¾—çš„æ•°æ®
         * @return {?}
         */
        WidgetBase.prototype.onGetData = /**
         * @deprecated
         * è¯·ç”¨ this.dataService.loadData() ä»£æ›¿
         * @param {?} data è·å¾—çš„æ•°æ®
         * @return {?}
         */
            function (data) { };
        __decorate([
            Property({
                category: 'å…¬å…±å±æ€§',
                displayName: 'éƒ¨ä»¶æ ‡é¢˜'
            }),
            __metadata("design:type", Object)
        ], WidgetBase.prototype, "title", void 0);
        return WidgetBase;
    }());

    var _a;
    /** @type {?} */
    var PropertyTypeDefaultValues = (_a = {},
        _a[PropertyTypes.Text] = '',
        _a[PropertyTypes.Bool] = false,
        _a[PropertyTypes.Number] = 0,
        _a[PropertyTypes.DataField] = {},
        _a);
    // const frontendFilterProp: PropertyOption = {
    //   name: 'filter',
    //   displayName: 'ç­›é€‰',
    //   isArray: true,
    //   type: PropertyTypes.Filter,
    // }
    // TODO: filters
    /** @type {?} */
    var titleBarProps = [{
            category: 'titleBar',
            name: 'titleBarHide',
            type: PropertyTypes.Bool,
            boolOption: {
                default: false
            }
        }, {
            category: 'titleBar',
            name: 'titleBarShowRefresh',
            displayName: 'showRefreshBtn',
            type: PropertyTypes.Bool,
            boolOption: {
                default: true
            }
        }, __assign({}, datalessJumpOption, { category: 'titleBar', name: 'titleBarJump' })];
    var WidgetPropertyService = /** @class */ (function () {
        function WidgetPropertyService() {
        }
        /**
         * è·å¾—æŸç§ç±»å‹çš„å…¨å±€é»˜è®¤å€¼ï¼Œåœ¨å®Œå…¨æ²¡æœ‰å€¼æ—¶ä½¿ç”¨
         * @param prop
         * @param arrayItem æ˜¯å¦æ˜¯æ¥è·å– array çš„å­é¡¹é»˜è®¤å€¼çš„ï¼Œé»˜è®¤ä¸æ˜¯ã€‚
         * å¦‚æœä¸æ˜¯ï¼Œè‹¥ prop.isArray ä¸ºçœŸï¼Œå°±è¿”å›ç©ºæ•°ç»„ []ï¼›
         * å¦‚æœæ˜¯ï¼Œåˆ™ä¸ç®¡ prop.isArray æ˜¯å¦ä¸ºçœŸï¼Œæ€»è¿”å› prop.type å¯¹åº”çš„é»˜è®¤å€¼ï¼Œä»…åº”ç”¨äºå¢åŠ æ•°ç»„é¡¹æ—¶è·å–æ–°é¡¹ã€‚
         */
        /**
         * è·å¾—æŸç§ç±»å‹çš„å…¨å±€é»˜è®¤å€¼ï¼Œåœ¨å®Œå…¨æ²¡æœ‰å€¼æ—¶ä½¿ç”¨
         * @param {?} prop
         * @param {?=} arrayItem æ˜¯å¦æ˜¯æ¥è·å– array çš„å­é¡¹é»˜è®¤å€¼çš„ï¼Œé»˜è®¤ä¸æ˜¯ã€‚
         * å¦‚æœä¸æ˜¯ï¼Œè‹¥ prop.isArray ä¸ºçœŸï¼Œå°±è¿”å›ç©ºæ•°ç»„ []ï¼›
         * å¦‚æœæ˜¯ï¼Œåˆ™ä¸ç®¡ prop.isArray æ˜¯å¦ä¸ºçœŸï¼Œæ€»è¿”å› prop.type å¯¹åº”çš„é»˜è®¤å€¼ï¼Œä»…åº”ç”¨äºå¢åŠ æ•°ç»„é¡¹æ—¶è·å–æ–°é¡¹ã€‚
         * @return {?}
         */
        WidgetPropertyService.prototype.getPropertyDefaultValue = /**
         * è·å¾—æŸç§ç±»å‹çš„å…¨å±€é»˜è®¤å€¼ï¼Œåœ¨å®Œå…¨æ²¡æœ‰å€¼æ—¶ä½¿ç”¨
         * @param {?} prop
         * @param {?=} arrayItem æ˜¯å¦æ˜¯æ¥è·å– array çš„å­é¡¹é»˜è®¤å€¼çš„ï¼Œé»˜è®¤ä¸æ˜¯ã€‚
         * å¦‚æœä¸æ˜¯ï¼Œè‹¥ prop.isArray ä¸ºçœŸï¼Œå°±è¿”å›ç©ºæ•°ç»„ []ï¼›
         * å¦‚æœæ˜¯ï¼Œåˆ™ä¸ç®¡ prop.isArray æ˜¯å¦ä¸ºçœŸï¼Œæ€»è¿”å› prop.type å¯¹åº”çš„é»˜è®¤å€¼ï¼Œä»…åº”ç”¨äºå¢åŠ æ•°ç»„é¡¹æ—¶è·å–æ–°é¡¹ã€‚
         * @return {?}
         */
            function (prop, arrayItem) {
                var _this = this;
                if (arrayItem === void 0) {
                    arrayItem = false;
                }
                if (!arrayItem && prop.isArray)
                    return [];
                // object: é€’å½’ç”Ÿæˆå…·æœ‰æ‰€æœ‰ key çš„å¯¹è±¡ï¼Œæ¯ä¸ª key çš„ value æ˜¯é»˜è®¤å€¼
                if (prop.type === PropertyTypes.Object) {
                    /** @type {?} */
                    var newObj_1 = {};
                    prop.objectOption.objPropertyOptions.forEach(( /**
                     * @param {?} childProp
                     * @return {?}
                     */function (childProp) {
                        newObj_1[childProp.name] = (childProp[childProp.type]
                            && childProp[childProp.type].default)
                            || _this.getPropertyDefaultValue(childProp);
                    }));
                    return newObj_1;
                }
                else if (prop.type === PropertyTypes.Enum) {
                    /** @type {?} */
                    var firstItem = prop.enumOption.items[0];
                    return typeof firstItem === 'string'
                        ? firstItem
                        : firstItem['value'];
                }
                else if (prop.type === PropertyTypes.Color) {
                    /** @type {?} */
                    var colors = this.getColorsByColorOption(prop.colorOption);
                    /** @type {?} */
                    var i = Math.random();
                    return colors[Math.floor(i * colors.length)];
                }
                else if (prop.type === PropertyTypes.Filter) {
                    return new FilterSchema();
                }
                else {
                    return PropertyTypeDefaultValues[prop.type];
                }
            };
        /**
         * å…ƒéƒ¨ä»¶åŠ è½½ã€ç¼–è¯‘å®Œæˆåï¼Œç»„è£…æ–°çš„ properties
         * widget name
         * -> constructor name
         * -> widget + title bar + base properties
         * -> å…ƒéƒ¨ä»¶çš„æ‰€æœ‰å¯é…ç½® properties
         */
        /**
         * å…ƒéƒ¨ä»¶åŠ è½½ã€ç¼–è¯‘å®Œæˆåï¼Œç»„è£…æ–°çš„ properties
         * widget name
         * -> constructor name
         * -> widget + title bar + base properties
         * -> å…ƒéƒ¨ä»¶çš„æ‰€æœ‰å¯é…ç½® properties
         * @param {?} widgetName
         * @param {?} widgetConfig
         * @return {?}
         */
        WidgetPropertyService.prototype.getWidgetProps = /**
         * å…ƒéƒ¨ä»¶åŠ è½½ã€ç¼–è¯‘å®Œæˆåï¼Œç»„è£…æ–°çš„ properties
         * widget name
         * -> constructor name
         * -> widget + title bar + base properties
         * -> å…ƒéƒ¨ä»¶çš„æ‰€æœ‰å¯é…ç½® properties
         * @param {?} widgetName
         * @param {?} widgetConfig
         * @return {?}
         */
            function (widgetName, widgetConfig) {
                /** @type {?} */
                var ctorName = WidgetRegistry.getWidgetByName(widgetName).ctor.name;
                // widget å­ç±»ä¸­çš„ property
                /** @type {?} */
                var widgetProps = WidgetPropertyMap.get(ctorName) || [];
                // ç­›é€‰å‡º widget å­ç±»ä¸­æ²¡é‡å†™è¿‡çš„ propertyï¼Œå¦åˆ™å¯èƒ½ä¼šæœ‰ä¿©ä¸€æ ·çš„
                /** @type {?} */
                var baseProps = WidgetPropertyMap.get(WidgetBase.name)
                    .filter(( /**
             * @param {?} baseProp
             * @return {?}
             */function (baseProp) {
                    return !widgetProps.some(( /**
                     * @param {?} prop
                     * @return {?}
                     */function (prop) { return baseProp.name === prop.name; }));
                }));
                // ç»„è£…
                return __spread(baseProps, (widgetConfig.enableCommonTitleBar
                    ? titleBarProps
                    : []), (widgetConfig.enableDataConfig && widgetConfig.enableCommonTitleBar
                    ? [frontendFilterProp]
                    : []), widgetProps
                // ...testProps,
                );
            };
        /**
         * mixin å·²æœ‰pv + å…ƒéƒ¨ä»¶æ¨èçš„é»˜è®¤pv + æ­¤ç±»å‹çš„å…¨å±€é»˜è®¤pv
         */
        /**
         * mixin å·²æœ‰pv + å…ƒéƒ¨ä»¶æ¨èçš„é»˜è®¤pv + æ­¤ç±»å‹çš„å…¨å±€é»˜è®¤pv
         * @param {?} props
         * @param {?} propValues
         * @return {?}
         */
        WidgetPropertyService.prototype.mixinWidgetPropValues = /**
         * mixin å·²æœ‰pv + å…ƒéƒ¨ä»¶æ¨èçš„é»˜è®¤pv + æ­¤ç±»å‹çš„å…¨å±€é»˜è®¤pv
         * @param {?} props
         * @param {?} propValues
         * @return {?}
         */
            function (props, propValues) {
                var _this = this;
                /** @type {?} */
                var mixinedPropValues = __assign({}, propValues);
                // æ£€æŸ¥æ‰€æœ‰ propertiesï¼Œå“ªä¸ªæ²¡æœ‰å€¼ï¼Œå°±èµ‹ä¸Šé»˜è®¤æ¨èå€¼
                props.forEach(( /**
                 * @param {?} prop
                 * @return {?}
                 */function (prop) {
                    // è¿™é‡Œå¿…é¡»æ˜¯åˆ¤æ–­ undefinedï¼Œå¦åˆ™ bool ç±»å‹çš„ false ä¹Ÿå¯èƒ½åˆ¤å®šä¸ºæ— å€¼
                    if (mixinedPropValues[prop.name] === undefined) {
                        mixinedPropValues[prop.name] = prop[prop.type] && prop[prop.type].default
                            // å¦‚æœå…ƒéƒ¨ä»¶æ— é»˜è®¤å€¼ï¼Œå°±åŠ å…¥å…¨å±€çš„å½“å‰ç±»å‹é»˜è®¤å€¼
                            || _this.getPropertyDefaultValue(prop);
                    }
                }));
                return mixinedPropValues;
            };
        /**
         * @param {?} colorOption
         * @return {?}
         */
        WidgetPropertyService.prototype.getColorsByColorOption = /**
         * @param {?} colorOption
         * @return {?}
         */
            function (colorOption) {
                if (colorOption && colorOption.palette)
                    return colorOption.palette;
                /** @type {?} */
                var colorType = colorOption ? colorOption.type : 'pure';
                /** @type {?} */
                var colors;
                switch (colorType) {
                    case 'gradient':
                        colors = util.PlThemeColors.gradient;
                        break;
                    case 'pureOrGradient':
                        colors = __spread(util.PlThemeColors.pure, util.PlThemeColors.gradient);
                        break;
                    case 'pure':
                    default:
                        colors = util.PlThemeColors.pure;
                        break;
                }
                return colors;
            };
        WidgetPropertyService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] }
        ];
        /** @nocollapse */
        WidgetPropertyService.ctorParameters = function () { return []; };
        /** @nocollapse */ WidgetPropertyService.ngInjectableDef = i0.defineInjectable({ factory: function WidgetPropertyService_Factory() { return new WidgetPropertyService(); }, token: WidgetPropertyService, providedIn: "root" });
        return WidgetPropertyService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // TODO: å·¦å›¾å³è¡¨é¡µé¢ã€funcId
    /** @type {?} */
    var CHART_TABLE_FUNC_ID = '???';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @deprecated
     * ä¸ºäº† widget-devkit çš„å…¼å®¹è€Œæš‚æ—¶ä¿ç•™ã€‚ä¸å‡†å†ç”¨äº†ã€‚
     * å…ƒéƒ¨ä»¶åº”è¯¥ç›´æ¥ç”¨ \@gspwidget/utilã€‚
     * @type {?}
     */
    var DASHBOARD_API = 'DashboardApi';
    var WidgetDevkitService = /** @class */ (function () {
        function WidgetDevkitService(modalService) {
            this.modalService = modalService;
        }
        /**
         * @param {?} content
         * @param {?=} config
         * @return {?}
         */
        WidgetDevkitService.prototype.openModal = /**
         * @param {?} content
         * @param {?=} config
         * @return {?}
         */
            function (content, config) {
                return this.modalService.show(content, config);
            };
        /**
         * @param {?} funcId
         * @param {?=} queryParamsArray
         * @return {?}
         */
        WidgetDevkitService.prototype.openMenu = /**
         * @param {?} funcId
         * @param {?=} queryParamsArray
         * @return {?}
         */
            function (funcId, queryParamsArray) {
                window[DASHBOARD_API].openMenu(funcId, queryParamsArray);
            };
        /**
         * @param {?} appId
         * @return {?}
         */
        WidgetDevkitService.prototype.openApp = /**
         * @param {?} appId
         * @return {?}
         */
            function (appId) {
                window[DASHBOARD_API].openApp(appId);
            };
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         */
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        WidgetDevkitService.prototype.openInfoMsg = /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
            function (content, options) {
                window[DASHBOARD_API].messageSvc.info(content, options);
            };
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         */
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        WidgetDevkitService.prototype.openSuccessMsg = /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
            function (content, options) {
                window[DASHBOARD_API].messageSvc.success(content, options);
            };
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         */
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        WidgetDevkitService.prototype.openWarningMsg = /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
            function (content, options) {
                window[DASHBOARD_API].messageSvc.warning(content, options);
            };
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         */
        /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        WidgetDevkitService.prototype.openErrorMsg = /**
         * options å‚è€ƒ https://ng.ant.design/components/message/zh
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
            function (content, options) {
                window[DASHBOARD_API].messageSvc.error(content, options);
            };
        /**
         * @param {?} dataOption
         * @return {?}
         */
        WidgetDevkitService.prototype.getData = /**
         * @param {?} dataOption
         * @return {?}
         */
            function (dataOption) {
                return window[DASHBOARD_API].storageSvc.getData(dataOption);
            };
        /**
         * @param {?=} reload
         * @return {?}
         */
        WidgetDevkitService.prototype.getUserInfo = /**
         * @param {?=} reload
         * @return {?}
         */
            function (reload) {
                if (reload === void 0) {
                    reload = false;
                }
                return window[DASHBOARD_API].storageSvc.getUserInfo(reload);
            };
        /**
         * @param {?=} reload
         * @return {?}
         */
        WidgetDevkitService.prototype.getUserAvatar = /**
         * @param {?=} reload
         * @return {?}
         */
            function (reload) {
                if (reload === void 0) {
                    reload = false;
                }
                return window[DASHBOARD_API].storageSvc.getUserAvatar(reload);
            };
        /**
         * @deprecated åº”ç”¨å¦å¤–ä¸¤ä¸ª jump æ–¹æ³•
         * è”æŸ¥è·³è½¬ï¼Œç›´æ¥æŠŠé…ç½®å±æ€§çš„å€¼ä¼ è¿›æ¥å°±è¡Œã€‚é…æˆâ€œæ— â€å°±ä¸è·³è½¬ã€‚
         * @param jumpProperty è·³è½¬çš„é…ç½®å±æ€§çš„å€¼
         * @param dataItem å½“å‰è·³è½¬å¯¹åº”çš„æ•°æ®è¡Œã€‚å¦‚æœæ˜¯å…¨å±€è·³è½¬ï¼Œå°±ä¼ å…¥ç¬¬ä¸€è¡Œï¼Ÿ
         */
        /**
         * @deprecated åº”ç”¨å¦å¤–ä¸¤ä¸ª jump æ–¹æ³•
         * è”æŸ¥è·³è½¬ï¼Œç›´æ¥æŠŠé…ç½®å±æ€§çš„å€¼ä¼ è¿›æ¥å°±è¡Œã€‚é…æˆâ€œæ— â€å°±ä¸è·³è½¬ã€‚
         * @param {?} jumpProperty è·³è½¬çš„é…ç½®å±æ€§çš„å€¼
         * @param {?=} dataItem å½“å‰è·³è½¬å¯¹åº”çš„æ•°æ®è¡Œã€‚å¦‚æœæ˜¯å…¨å±€è·³è½¬ï¼Œå°±ä¼ å…¥ç¬¬ä¸€è¡Œï¼Ÿ
         * @return {?}
         */
        WidgetDevkitService.prototype.jump = /**
         * @deprecated åº”ç”¨å¦å¤–ä¸¤ä¸ª jump æ–¹æ³•
         * è”æŸ¥è·³è½¬ï¼Œç›´æ¥æŠŠé…ç½®å±æ€§çš„å€¼ä¼ è¿›æ¥å°±è¡Œã€‚é…æˆâ€œæ— â€å°±ä¸è·³è½¬ã€‚
         * @param {?} jumpProperty è·³è½¬çš„é…ç½®å±æ€§çš„å€¼
         * @param {?=} dataItem å½“å‰è·³è½¬å¯¹åº”çš„æ•°æ®è¡Œã€‚å¦‚æœæ˜¯å…¨å±€è·³è½¬ï¼Œå°±ä¼ å…¥ç¬¬ä¸€è¡Œï¼Ÿ
         * @return {?}
         */
            function (jumpProperty, dataItem) {
                var type = jumpProperty.type, funcId = jumpProperty.funcId, params = jumpProperty.params;
                /** @type {?} */
                var queryParamsArray = Array.isArray(params)
                    ? params.map(( /**
                     * @param {?} param
                     * @return {?}
                     */function (param) {
                        return [param.key, (param.valueType === 'fixedValue'
                                ? param.fixedValue
                                : (dataItem
                                    ? dataItem[param.fieldName.name]
                                    : undefined))];
                    }))
                    : undefined;
                switch (type) {
                    case JumpTypes.None:
                        return;
                    case JumpTypes.Func:
                        this.openMenu(funcId, queryParamsArray);
                        break;
                    case JumpTypes.ChartTable:
                        this.openMenu(CHART_TABLE_FUNC_ID, queryParamsArray);
                        break;
                }
            };
        /**
         * @param {?} dataJumpConfig
         * @param {?} dataItem
         * @return {?}
         */
        WidgetDevkitService.prototype.jumpWithData = /**
         * @param {?} dataJumpConfig
         * @param {?} dataItem
         * @return {?}
         */
            function (dataJumpConfig, dataItem) {
                var jumpType = dataJumpConfig.jumpType, funcIdSource = dataJumpConfig.funcIdSource, funcIdDataField = dataJumpConfig.funcIdDataField, funcId = dataJumpConfig.funcId, funcParams = dataJumpConfig.funcParams, url = dataJumpConfig.url, urlParams = dataJumpConfig.urlParams, queryParams = dataJumpConfig.queryParams;
                /** @type {?} */
                var funcParamsArray = Array.isArray(funcParams)
                    ? funcParams.map(( /**
                     * @param {?} funcParam
                     * @return {?}
                     */function (funcParam) {
                        return [funcParam.key, (funcParam.valueType === 'fixedValue'
                                ? funcParam.fixedValue
                                : (dataItem
                                    ? dataItem[funcParam.fieldName.name]
                                    : undefined))];
                    }))
                    : undefined;
                switch (jumpType) {
                    case JumpTypes.None:
                        return;
                    case JumpTypes.Func:
                        /** @type {?} */
                        var resultFuncId = (!funcIdSource || funcIdSource === 'fixed')
                            ? funcId
                            : dataItem[funcIdDataField.name];
                        if (resultFuncId)
                            this.openMenu(resultFuncId, funcParamsArray);
                        break;
                    case JumpTypes.ChartTable:
                        this.openMenu(CHART_TABLE_FUNC_ID, funcParamsArray);
                        break;
                    case JumpTypes.NewBrowserTab:
                        // æ‹¼ url
                        /** @type {?} */
                        var finalUrl = url;
                        // + urlParams
                        if (urlParams && urlParams.length > 0) {
                            /** @type {?} */
                            var urlParamPart = urlParams.map(( /**
                             * @param {?} urlParam
                             * @return {?}
                             */function (urlParam) {
                                var valueType = urlParam.valueType, fixedValue = urlParam.fixedValue, fieldName = urlParam.fieldName;
                                return valueType === 'fixedValue' ? fixedValue : dataItem[fieldName.name];
                            })).join('/');
                            finalUrl += url.endsWith('/') ? '' : '/';
                            finalUrl += urlParamPart;
                        }
                        // + queryParams
                        if (queryParams && queryParams.length > 0) {
                            /** @type {?} */
                            var queryParamPart = queryParams.map(( /**
                             * @param {?} queryParam
                             * @return {?}
                             */function (queryParam) {
                                var key = queryParam.key, valueType = queryParam.valueType, fixedValue = queryParam.fixedValue, fieldName = queryParam.fieldName;
                                return key + "=" + (valueType === 'fixedValue' ? fixedValue : dataItem[fieldName.name]);
                            })).join('&');
                            finalUrl += '?' + queryParamPart;
                        }
                        // æ‰“å¼€
                        window.open(finalUrl, '_blank');
                }
            };
        /**
         * @param {?} datalessJumpConfig
         * @return {?}
         */
        WidgetDevkitService.prototype.jumpWithoutData = /**
         * @param {?} datalessJumpConfig
         * @return {?}
         */
            function (datalessJumpConfig) {
                var jumpType = datalessJumpConfig.jumpType, funcId = datalessJumpConfig.funcId, funcParams = datalessJumpConfig.funcParams, url = datalessJumpConfig.url;
                /** @type {?} */
                var funcParamsArray = Array.isArray(funcParams)
                    ? funcParams.map(( /**
                     * @param {?} funcParam
                     * @return {?}
                     */function (funcParam) { return [funcParam.key, funcParam.value]; }))
                    : undefined;
                switch (jumpType) {
                    case JumpTypes.None:
                        return;
                    case JumpTypes.Func:
                        this.openMenu(funcId, funcParamsArray);
                        break;
                    case JumpTypes.ChartTable:
                        this.openMenu(CHART_TABLE_FUNC_ID, funcParamsArray);
                        break;
                    case JumpTypes.NewBrowserTab:
                        window.open(url, '_blank');
                }
            };
        WidgetDevkitService.decorators = [
            { type: i0.Injectable }
        ];
        /** @nocollapse */
        WidgetDevkitService.ctorParameters = function () {
            return [
                { type: modal.BsModalService }
            ];
        };
        return WidgetDevkitService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WidgetTitleBarComponent = /** @class */ (function () {
        function WidgetTitleBarComponent(devkitSvc) {
            this.devkitSvc = devkitSvc;
            this.icon = '';
            /**
             * æ ‡é¢˜
             */
            this.showTitle = true;
            this.title = '';
            /**
             * æ•°å­—
             */
            this.showNumber = false;
            this.number = 0;
            /**
             * è®¾ç½®æŒ‰é’®
             */
            this.showSetting = false;
            this.clickSetting = new i0.EventEmitter();
            /**
             * åˆ·æ–°æŒ‰é’®
             */
            this.showRefresh = false;
            this.clickRefresh = new i0.EventEmitter();
            this.JumpTypes = JumpTypes;
        }
        /**
         * @return {?}
         */
        WidgetTitleBarComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        WidgetTitleBarComponent.prototype.handleClickJump = /**
         * @return {?}
         */
            function () {
                this.devkitSvc.jumpWithoutData(this.jumpConfig);
            };
        WidgetTitleBarComponent.decorators = [
            { type: i0.Component, args: [{
                        selector: 'lib-widget-title-bar',
                        template: "\n<div class=\"widget-title-bar d-flex\">\n  <!-- left -->\n  <div class=\"left align-items-center\">\n    <i *ngIf=\"icon!=''\" class=\"material-icons\">{{icon}}</i>\n    <div *ngIf=\"showTitle\" class=\"title\">{{title}}</div>\n    <div *ngIf=\"showNumber\" class=\"number\">{{number}}</div>\n    <ng-container *ngTemplateOutlet=\"leftTemplate\"></ng-container>\n  </div>\n  <!-- right -->\n  <div class=\"right\">\n    <ng-container *ngTemplateOutlet=\"rightTemplate\"></ng-container>\n    <div class=\"tool-wrap d-flex\" [title]=\"(settingTitle || '') | translate\">\n      <img\n        class=\"setting\"\n        *ngIf=\"showSetting\"\n        (click)=\"clickSetting.emit()\"\n        src=\"assets/img/setting.svg\"\n        [alt]=\"settingTitle\">\n    </div>\n    <div\n      class=\"tool-wrap d-flex\"\n      *ngIf=\"showRefresh\"\n      (click)=\"clickRefresh.emit()\">\n      <i class=\"icon-refresh material-icons\" style=\"font-size: 20px;\">refresh</i>\n    </div>\n    <div\n      *ngIf=\"jumpConfig && jumpConfig.jumpType!==JumpTypes.None\"\n      (click)=\"handleClickJump()\"\n      class=\"tool-wrap d-flex\">\n      <i class=\"material-icons\">chevron_right</i>\n    </div>\n  </div>\n</div>",
                        encapsulation: i0.ViewEncapsulation.None,
                        styles: ["@charset \"UTF-8\";.widget-title-bar{display:flex;padding:12px 20px 10px}.widget-title-bar .left{flex:1 1 auto;display:flex}.widget-title-bar .left .material-icons{font-size:18px;margin-right:8px;color:#3794ff;padding-top:1px}.widget-title-bar .left .title{font-weight:700;font-size:15px}.widget-title-bar .left .number{font-size:15px;margin-left:10px}.widget-title-bar .right{flex:1 1 auto;display:flex;justify-content:flex-end;align-items:center}.widget-title-bar .right .widget-select{margin-left:5px}.widget-title-bar .right .setting{width:16px;height:16px;transition:.3s;opacity:1!important}.widget-title-bar .right .setting:hover{transform:rotate(60deg)}.widget-title-bar .right .tool-wrap{width:20px;margin-left:10px;font-size:14px;color:#000;transition:.3s;cursor:pointer;opacity:.2}.widget-title-bar .right .tool-wrap:hover{opacity:.4}"]
                    }] }
        ];
        /** @nocollapse */
        WidgetTitleBarComponent.ctorParameters = function () {
            return [
                { type: WidgetDevkitService }
            ];
        };
        WidgetTitleBarComponent.propDecorators = {
            icon: [{ type: i0.Input }],
            showTitle: [{ type: i0.Input }],
            title: [{ type: i0.Input }],
            showNumber: [{ type: i0.Input }],
            number: [{ type: i0.Input }],
            showSetting: [{ type: i0.Input }],
            settingTitle: [{ type: i0.Input }],
            clickSetting: [{ type: i0.Output }],
            showRefresh: [{ type: i0.Input }],
            clickRefresh: [{ type: i0.Output }],
            jumpConfig: [{ type: i0.Input }],
            jumpProperty: [{ type: i0.Input }],
            data: [{ type: i0.Input }],
            leftTemplate: [{ type: i0.ContentChild, args: ['leftTemplate',] }],
            rightTemplate: [{ type: i0.ContentChild, args: ['rightTemplate',] }]
        };
        return WidgetTitleBarComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WidgetTitleBarSelectComponent = /** @class */ (function () {
        function WidgetTitleBarSelectComponent() {
            this.filterOptions = [];
            this.onFilterChange = new i0.EventEmitter();
        }
        /**
         * @return {?}
         */
        WidgetTitleBarSelectComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.filter = new forms.FormControl(this.defaultFilterValue ? this.defaultFilterValue : this.filterOptions[0].value);
                this.filter.valueChanges.subscribe(( /**
                 * @param {?} newValue
                 * @return {?}
                 */function (newValue) {
                    _this.onFilterChange.emit(newValue);
                }));
            };
        WidgetTitleBarSelectComponent.decorators = [
            { type: i0.Component, args: [{
                        selector: 'lib-widget-title-bar-select',
                        template: "\n<select\n  [formControl]=\"filter\"\n  class=\"widget-select form-control\" >\n  <option *ngFor=\"let option of filterOptions\"\n    [value]=\"option.value\">{{option.name}}</option>\n</select>",
                        styles: [".widget-select{font-size:12px;padding:0 5px;height:25px}"]
                    }] }
        ];
        /** @nocollapse */
        WidgetTitleBarSelectComponent.ctorParameters = function () { return []; };
        WidgetTitleBarSelectComponent.propDecorators = {
            defaultFilterValue: [{ type: i0.Input }],
            filterOptions: [{ type: i0.Input }],
            onFilterChange: [{ type: i0.Output }]
        };
        return WidgetTitleBarSelectComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WidgetTitleBarModule = /** @class */ (function () {
        function WidgetTitleBarModule() {
        }
        WidgetTitleBarModule.decorators = [
            { type: i0.NgModule, args: [{
                        declarations: [
                            WidgetTitleBarComponent,
                            WidgetTitleBarSelectComponent
                        ],
                        exports: [
                            WidgetTitleBarComponent,
                            WidgetTitleBarSelectComponent
                        ],
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            core.TranslateModule.forChild()
                        ]
                    },] }
        ];
        return WidgetTitleBarModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Gradient = /** @class */ (function () {
        function Gradient(colorStops) {
            this.colorStops = colorStops || [];
        }
        /**
         * @param {?} offset
         * @param {?} color
         * @return {?}
         */
        Gradient.prototype.addColorStop = /**
         * @param {?} offset
         * @param {?} color
         * @return {?}
         */
            function (offset, color) {
                this.colorStops.push({
                    offset: offset,
                    color: color,
                });
            };
        return Gradient;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * x, y, x2, y2 are all percent from 0 to 1 when globalCoord is false
     */
    var /**
     * x, y, x2, y2 are all percent from 0 to 1 when globalCoord is false
     */ LinearGradient = /** @class */ (function (_super) {
        __extends(LinearGradient, _super);
        function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {
            var _this = _super.call(this, colorStops) || this;
            // Should do nothing more in this constructor. Because gradient can be
            // declard by `color: {type: 'linear', colorStops: ...}`, where
            // this constructor will not be called.
            _this.x = x == null ? 0 : x;
            _this.y = y == null ? 0 : y;
            _this.x2 = x2 == null ? 1 : x2;
            _this.y2 = y2 == null ? 0 : y2;
            // Can be cloned
            _this.type = "linear";
            // If use global coord
            _this.global = globalCoord || false;
            return _this;
        }
        return LinearGradient;
    }(Gradient));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var EchartsOptions = {
        grid: {
            top: 20,
            right: 30,
            bottom: 36,
            left: 10,
            containLabel: true,
        },
        xAxis: {
            type: 'category',
            axisLine: {
                lineStyle: {
                    color: '#D9D9D9',
                }
            },
            axisTick: {
                lineStyle: {
                    color: '#D9D9D9',
                }
            },
            axisLabel: {
                color: 'black',
                margin: 10,
                fontSize: 11
            }
        },
        yAxis: {
            axisLine: {
                show: false
            },
            axisTick: {
                show: false
            },
            splitLine: {
                lineStyle: {
                    color: '#E4EBF057',
                }
            },
            axisLabel: {
                fontSize: 11
            }
        },
        legend: {
            // left: 45,
            // top: -3,
            x: 'center',
            y: 'bottom',
            itemWidth: 16,
            itemHeight: 3,
            borderRadius: 2,
            icon: 'roundRect',
            padding: [15, 0],
            textStyle: {
                color: '#000000a6'
            }
        },
        tooltip: {
            backgroundColor: "#ffffffe8",
            textStyle: {
                color: "#000000e6",
            },
            extraCssText: "box-shadow: 0px 1px 7px #00000017;",
            appendToBody: true,
            confine: true,
        },
    };
    /** @type {?} */
    var chartsConsts = {
        /**
         * series label å­—ä½“å¤§å°
         */
        seriesLabelFontSize: 9,
    };
    var Éµ0 = /**
     * @param {?} c
     * @return {?}
     */ function (c) { return c.split(','); };
    /** @type {?} */
    var splitedGradientColors = util.PlThemeColors.gradient.map((Éµ0));
    /** @type {?} */
    var getChartColorsPure = ( /**
     * @param {?} params
     * @return {?}
     */function (params) {
        return util.PlThemeColors.pure[params.dataIndex];
    });
    /** @type {?} */
    var getChartColorsGradient = ( /**
     * @param {?} params
     * @return {?}
     */function (params) {
        return new LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][0] },
            { offset: 1, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][1] }
        ]);
    });
    /** @type {?} */
    var getChartColorsGradientOne = ( /**
     * @param {?} params
     * @return {?}
     */function (params) {
        return new LinearGradient(1, 0, 0, 0, [
            { offset: 0, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][0] },
            { offset: 1, color: splitedGradientColors[params.dataIndex % splitedGradientColors.length][1] }
        ]);
    });
    /**
     * å¯¹äºæœ‰ â€œy è½´è‡ªå®šä¹‰èŒƒå›´â€ çš„ charts å…ƒéƒ¨ä»¶ï¼Œdata éƒ½è¦ç”¨å®ƒè¿‡æ»¤åå†ç”¨
     * @param {?} obj å…ƒéƒ¨ä»¶å®ä¾‹
     * @param {?} data
     * @return {?}
     */
    function filterYData(obj, data) {
        if (obj.filterYFlag) {
            /** @type {?} */
            var yFields_1 = obj.yFieldObjs.map(( /**
             * @param {?} o
             * @return {?}
             */function (o) { return o.valueField.name; }));
            return data.filter(( /**
             * @param {?} item
             * @return {?}
             */function (item) {
                return !yFields_1.some(( /**
                 * @param {?} yField
                 * @return {?}
                 */function (yField) { return item[yField] <= obj.minY || item[yField] >= obj.maxY; }));
            }));
        }
        return data;
    }
    /** @type {?} */
    var EchartsPropertyOptions = {
        showRefresh: {
            category: 'data',
            displayName: 'showRefreshBtn',
            type: PropertyTypes.Bool,
            boolOption: {
                default: true
            }
        },
        filterYFlag: {
            type: PropertyTypes.Bool,
            category: 'data',
            displayName: 'setYRange'
        },
        minY: {
            type: PropertyTypes.Number,
            category: 'data',
            displayName: 'minY',
            numberOption: {
                default: 0
            },
            ifShow: /**
             * @param {?} values
             * @return {?}
             */ function (values) { return values.filterYFlag; }
        },
        maxY: {
            type: PropertyTypes.Number,
            category: 'data',
            displayName: 'maxY',
            numberOption: {
                default: 1000
            },
            ifShow: /**
             * @param {?} values
             * @return {?}
             */ function (values) { return values.filterYFlag; }
        },
        showLabel: {
            category: 'style',
            type: PropertyTypes.Bool,
            displayName: 'showNumber'
        },
        showTooltip: {
            category: 'style',
            type: PropertyTypes.Bool,
            boolOption: { default: true },
            displayName: 'showHoverDetail'
        },
        legendStyleOption: {
            type: PropertyTypes.Enum,
            displayName: 'legendType',
            category: 'style',
            enumOption: {
                default: 'scroll',
                items: [
                    { value: 'none', displayName: 'notVisible' },
                    { value: 'plain', displayName: 'showAll' },
                    { value: 'scroll', displayName: 'scrollOverflow' }
                ]
            }
        },
        valueStyleOption: {
            type: PropertyTypes.Enum,
            displayName: 'valueType',
            category: 'style',
            enumOption: {
                default: 'right',
                items: [
                    { value: 'right', displayName: 'right' },
                    { value: 'insideRight', displayName: 'inside' },
                ]
            }
        }
    };
    /**
     * ä¸‰ç§ä¼ å‚æ–¹å¼ï¼š
     * 1. '#000', '#fff'
     * 2. '#000,#fff'
     * 3. '#000'
     * @param {?} c1
     * @param {?=} c2
     * @return {?}
     */
    function echartsGradient(c1, c2) {
        var _a;
        // è‹¥åªä¼ äº†ä¸€ä¸ªå€¼ã€è¿˜ä¸æ˜¯é€—å·åˆ†å‰²ï¼Œåˆ™ç›´æ¥è¿”å›æ­¤çº¯è‰²
        if (!c2 && !c1.includes(','))
            return c1;
        // è‹¥åªä¼ äº†ä¸€ä¸ªå€¼ã€æ˜¯é€—å·åˆ†å‰²ï¼Œå°±åˆ†å‰²ä¸ºä¿©é¢œè‰²
        if (!c2)
            _a = __read(c1.split(','), 2), c1 = _a[0], c2 = _a[1];
        return new LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: c1 },
            { offset: 1, color: c2 }
        ]);
    }
    // TODO: æš‚æ—¶ç»™èµ„é‡‘åšå›½é™…åŒ–
    /** @type {?} */
    var tempMap = {
        'é‡‘é¢': {
            'en': 'Amount',
            'zh-CHS': 'é‡‘é¢',
        },
        'æ•°é‡': {
            'en': 'Number',
            'zh-CHS': 'æ•°é‡',
        }
    };
    // TODO: æš‚æ—¶ç»™èµ„é‡‘å›½é™…åŒ–
    /**
     * @param {?} dataField
     * @param {?} currentLang
     * @return {?}
     */
    function tempLabel(dataField, currentLang) {
        var label = dataField.label;
        return tempMap[label] && tempMap[label][currentLang]
            ? tempMap[label][currentLang]
            : dataField.label;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * dataItem è¿™ä¸ªåå­—ä¼šå½±å“ exp ä¸­çš„å†™æ³•ï¼Œä¸å¯éšæ„æ›´æ”¹ã€‚
     * @param {?} html
     * @param {?} dataItem
     * @return {?}
     */
    function resolveTemplate(html, dataItem) {
        /** @type {?} */
        var expPatt = /{{[\d\D]+?}}/gm;
        if (!html)
            return '';
        /** @type {?} */
        var exps = html.match(expPatt) || [];
        try {
            exps.forEach(( /**
             * @param {?} exp
             * @return {?}
             */function (exp) {
                html = html.replace(exp, eval(exp.slice(2, -2)));
            }));
        }
        catch (err) {
            return html;
        }
        return html;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * æ•°æ®åŠ è½½ä¸åº”è¯¥è®©æ­¤ service ç›´æ¥å‘å‡ºï¼Œå› ä¸ºå¤–éƒ¨æ¡†æ¶å¹¶ä¸éšæ—¶éƒ½æ”¯æŒå–æ•°ï¼Œ
     * æ¯”å¦‚æ–°å¢éƒ¨ä»¶åçš„éƒ¨ä»¶é…ç½®ï¼Œæ­¤æ—¶æ²¡æœ‰é…ç½®è¿‡æ•°æ®ï¼Œä¾¿ä¼šæœåŠ¡ç«¯æŠ¥é”™ã€‚
     * åº”è¯¥äº¤ç”±å…ƒéƒ¨ä»¶å®¹å™¨åŠ è½½æ•°æ®ã€‚
     */
    var WidgetDataService = /** @class */ (function () {
        function WidgetDataService() {
            /**
             * loadData() / reloadData() æ—¶è§¦å‘ï¼Œå¤–éƒ¨å…ƒéƒ¨ä»¶å®¹å™¨æ¥æ”¶ã€åŠ è½½æ•°æ®ï¼Œå¹¶é€šè¿‡ setData è®¾ç½®å›æ•°æ®
             */
            this.onLoadData = new i0.EventEmitter();
            this.onGetData = new i0.EventEmitter();
            this.onGetDataWithDims = new i0.EventEmitter();
        }
        /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•è·å–æ•°æ®ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.loadData().subscribe(data => {
         *  this.data = data // ä½¿ç”¨æ•°æ®
         * })
         * ```
         */
        /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•è·å–æ•°æ®ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.loadData().subscribe(data => {
         *  this.data = data // ä½¿ç”¨æ•°æ®
         * })
         * ```
         * @param {?=} options
         * @return {?}
         */
        WidgetDataService.prototype.loadData = /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•è·å–æ•°æ®ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.loadData().subscribe(data => {
         *  this.data = data // ä½¿ç”¨æ•°æ®
         * })
         * ```
         * @param {?=} options
         * @return {?}
         */
            function (options) {
                this.onLoadData.emit(options);
                return this.onGetData;
            };
        /**
         * è·å–å…¨æ•°æ®ä¿¡æ¯ï¼ŒåŒ…å« dimensions
         */
        /**
         * è·å–å…¨æ•°æ®ä¿¡æ¯ï¼ŒåŒ…å« dimensions
         * @param {?=} options
         * @return {?}
         */
        WidgetDataService.prototype.loadDataWithDims = /**
         * è·å–å…¨æ•°æ®ä¿¡æ¯ï¼ŒåŒ…å« dimensions
         * @param {?=} options
         * @return {?}
         */
            function (options) {
                this.onLoadData.emit(options);
                return this.onGetDataWithDims;
            };
        /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•ä»¥é‡æ–°è·å–æ•°æ®ï¼Œæ•°æ®åŠ è½½å®Œæˆåå†æ¬¡è°ƒç”¨åœ¨ loadData() æ³¨å†Œçš„äº‹ä»¶å¤„ç†å™¨ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.refreshData()
         * ```
         */
        /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•ä»¥é‡æ–°è·å–æ•°æ®ï¼Œæ•°æ®åŠ è½½å®Œæˆåå†æ¬¡è°ƒç”¨åœ¨ loadData() æ³¨å†Œçš„äº‹ä»¶å¤„ç†å™¨ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.refreshData()
         * ```
         * @param {?=} param
         * @return {?}
         */
        WidgetDataService.prototype.reloadData = /**
         * å…ƒéƒ¨ä»¶è°ƒç”¨æ­¤æ–¹æ³•ä»¥é‡æ–°è·å–æ•°æ®ï¼Œæ•°æ®åŠ è½½å®Œæˆåå†æ¬¡è°ƒç”¨åœ¨ loadData() æ³¨å†Œçš„äº‹ä»¶å¤„ç†å™¨ã€‚ç¤ºä¾‹ï¼š
         * ```ts
         * this.dataService.refreshData()
         * ```
         * @param {?=} param
         * @return {?}
         */
            function (param) {
                this.onLoadData.emit(param);
            };
        /**
         * å¤–éƒ¨é€šè¿‡æ­¤æ–¹æ³•ç»™å…ƒéƒ¨ä»¶è®¾ç½®æ•°æ®ï¼Œå…ƒéƒ¨ä»¶æ— éœ€è°ƒç”¨
         * @param dataWithDims è¦è®¾ç½®çš„æ•°æ®
         */
        /**
         * å¤–éƒ¨é€šè¿‡æ­¤æ–¹æ³•ç»™å…ƒéƒ¨ä»¶è®¾ç½®æ•°æ®ï¼Œå…ƒéƒ¨ä»¶æ— éœ€è°ƒç”¨
         * @param {?} dataWithDims è¦è®¾ç½®çš„æ•°æ®
         * @return {?}
         */
        WidgetDataService.prototype.setData = /**
         * å¤–éƒ¨é€šè¿‡æ­¤æ–¹æ³•ç»™å…ƒéƒ¨ä»¶è®¾ç½®æ•°æ®ï¼Œå…ƒéƒ¨ä»¶æ— éœ€è°ƒç”¨
         * @param {?} dataWithDims è¦è®¾ç½®çš„æ•°æ®
         * @return {?}
         */
            function (dataWithDims) {
                this.onGetData.emit(dataWithDims.tableData);
                this.onGetDataWithDims.emit(dataWithDims);
            };
        WidgetDataService.decorators = [
            { type: i0.Injectable }
        ];
        return WidgetDataService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * å¯ä¾èµ–æ³¨å…¥è‡³å…ƒéƒ¨ä»¶çš„å…ƒéƒ¨ä»¶å®ä¾‹ä¿¡æ¯
     */
    var /**
     * å¯ä¾èµ–æ³¨å…¥è‡³å…ƒéƒ¨ä»¶çš„å…ƒéƒ¨ä»¶å®ä¾‹ä¿¡æ¯
     */ WidgetInstanceInfo = /** @class */ (function () {
        function WidgetInstanceInfo(portletId, id, assetsBaseUrl) {
            this.portletId = portletId;
            this.id = id;
            this.assetsBaseUrl = assetsBaseUrl;
        }
        return WidgetInstanceInfo;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // import { TranslateModule } from '@ngx-translate/core';
    var WidgetDevkitModule = /** @class */ (function () {
        function WidgetDevkitModule() {
        }
        WidgetDevkitModule.decorators = [
            { type: i0.NgModule, args: [{
                        declarations: [],
                        providers: [WidgetDevkitService],
                        imports: [
                            common.CommonModule,
                            // éœ€è¦åŠ  forRootï¼Œä¿è¯ WidgetDevkitService èƒ½åœ¨æ­¤å±‚æ‰¾åˆ°ä¾èµ–çš„é‡Œé¢çš„æœåŠ¡ã€‚
                            // æ— æ³•ä¿è¯å¤–éƒ¨ç¯å¢ƒã€‚
                            modal.ModalModule.forRoot(),
                        ],
                        exports: [
                            // TranslateModule
                            WidgetTitleBarModule
                        ]
                    },] }
        ];
        return WidgetDevkitModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.Widget = Widget;
    exports.WidgetRegistry = WidgetRegistry;
    exports.WidgetEvent = WidgetEvent;
    exports.WidgetEventMap = WidgetEventMap;
    exports.WidgetEventService = WidgetEventService;
    exports.WidgetPropertyService = WidgetPropertyService;
    exports.Property = Property;
    exports.WidgetPropertyMap = WidgetPropertyMap;
    exports.WidgetTitleBarModule = WidgetTitleBarModule;
    exports.WidgetTitleBarComponent = WidgetTitleBarComponent;
    exports.WidgetTitleBarSelectComponent = WidgetTitleBarSelectComponent;
    exports.WidgetBase = WidgetBase;
    exports.resolveTemplate = resolveTemplate;
    exports.JumpTypes = JumpTypes;
    exports.jumpTypeOption = jumpTypeOption;
    exports.funcOption = funcOption;
    exports.dataJumpOption = dataJumpOption;
    exports.datalessJumpOption = datalessJumpOption;
    exports.CommonPropertyOptions = CommonPropertyOptions;
    exports.filterYData = filterYData;
    exports.echartsGradient = echartsGradient;
    exports.tempLabel = tempLabel;
    exports.EchartsOptions = EchartsOptions;
    exports.chartsConsts = chartsConsts;
    exports.getChartColorsPure = getChartColorsPure;
    exports.getChartColorsGradient = getChartColorsGradient;
    exports.getChartColorsGradientOne = getChartColorsGradientOne;
    exports.EchartsPropertyOptions = EchartsPropertyOptions;
    exports.tempMap = tempMap;
    exports.WidgetDataService = WidgetDataService;
    exports.WidgetInstanceInfo = WidgetInstanceInfo;
    exports.WidgetDevkitModule = WidgetDevkitModule;
    exports.DASHBOARD_API = DASHBOARD_API;
    exports.WidgetDevkitService = WidgetDevkitService;
    exports.PropertyTypes = PropertyTypes;
    exports.HelpStructure = HelpStructure;
    exports.CHART_TABLE_FUNC_ID = CHART_TABLE_FUNC_ID;
    exports.getObj = getObj;
    exports.ifFsDateRange = ifFsDateRange;
    exports.isFsFlat = isFsFlat;
    exports.FSLastTimeItem = FSLastTimeItem;
    exports.FSRangeDefault = FSRangeDefault;
    exports.FSDate = FSDate;
    exports.FSEnum = FSEnum;
    exports.FSEnumItem = FSEnumItem;
    exports.FilterSchema = FilterSchema;
    exports.FILTER_PROP_NAME = FILTER_PROP_NAME;
    exports.frontendFilterProp = frontendFilterProp;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=gspwidget-widget-devkit.umd.js.map