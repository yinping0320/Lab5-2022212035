!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("date-fns/add"),require("date-fns/sub"),require("rxjs/operators"),require("@angular/forms"),require("@ngx-translate/core"),require("@gspwidget/util"),require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/modal")):"function"==typeof define&&define.amd?define("@gspwidget/widget-devkit",["exports","date-fns/add","date-fns/sub","rxjs/operators","@angular/forms","@ngx-translate/core","@gspwidget/util","@angular/core","@angular/common","ngx-bootstrap/modal"],t):t((e.gspwidget=e.gspwidget||{},e.gspwidget["widget-devkit"]={}),e.add,e.sub,e.rxjs.operators,e.ng.forms,e.core,e.util,e.ng.core,e.ng.common,e.modal)}(this,function(exports,add,sub,operators,forms,core,util,i0,common,modal){"use strict";add=add&&add.hasOwnProperty("default")?add["default"]:add,sub=sub&&sub.hasOwnProperty("default")?sub["default"]:sub;var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __decorate(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var p=e.length-1;0<=p;p--)(n=e[p])&&(o=(i<3?n(o):3<i?n(t,r,o):n(t,r))||o);return 3<i&&o&&Object.defineProperty(t,r,o),o}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(a=i.next()).done;)o.push(a.value)}catch(p){n={error:p}}finally{try{a&&!a.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return o}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}window.registry||(window.registry={});var WidgetRegistry={setWidget:function(e,t){window.registry[e]||(window.registry[e]={}),window.registry[e]=__assign({},window.registry[e],t)},getWidgetByName:function(e){return window.registry[e]},getWidgetByCtorName:function(t){return Object.values(window.registry).find(function(e){return e.ctor.name===t})}};function Widget(t){return function(e){WidgetRegistry.setWidget(t.name,__assign({ctor:e},t)),e.prototype.widgetName=t.name}}var WidgetEventMap=new Map;function WidgetEvent(a){return void 0===a&&(a={}),function(e,t){var r=e.constructor.name;WidgetEventMap.get(r)||WidgetEventMap.set(r,[]),WidgetEventMap.get(r).push(__assign({propName:t},a))}}var WidgetEventService=(Y.prototype.getEventsByWidgetName=function(e,t){var r=WidgetRegistry.getWidgetByName(e).ctor.name,a=WidgetEventMap.get(r)||[];return e===util.FILTERS_WIDGET_NAME?t[util.FILTERS_WIDGET_FILTERS_PROP_NAME].map(function(e){return{name:e.i18nName[util.curLang],propName:e.i18nName[util.curLang]}}):__spread(a,test)},Y.decorators=[{type:i0.Injectable,args:[{providedIn:"root"}]}],Y.ctorParameters=function(){return[]},Y.ngInjectableDef=i0.defineInjectable({factory:function(){return new Y},token:Y,providedIn:"root"}),Y);function Y(){}var test=[{name:"click bar"},{name:"event 2"},{name:"event 3"}],PropertyTypes={Text:"textOption",Bool:"boolOption",Number:"numberOption",Enum:"enumOption",Color:"colorOption",Object:"objectOption",Custom:"customOption",SelectHelp:"selectHelpOption",Help:"helpOption",DataField:"dataFieldOption",Filter:"filterOption",Html:"htmlOption",DataParam:"dataParamOption"},HelpStructure={table:0,treeTable:1,transfer:2,treeTransfer:3};function getObj(e,t){var r={};return r[e]=t,r}HelpStructure[HelpStructure.table]="table",HelpStructure[HelpStructure.treeTable]="treeTable",HelpStructure[HelpStructure.transfer]="transfer",HelpStructure[HelpStructure.treeTransfer]="treeTransfer";var FSLastTimeItem=(ga.GetDates=function(e){return[sub(new Date,getObj(e.unit+"s",e.num)),new Date]},ga);function ga(){this.num=1,this.unit="day"}var FSRangeDefault=(ia.GetDates=function(e){return[sub(new Date,getObj(e.beforeUnit+"s",e.afterNum)),add(new Date,getObj(e.beforeUnit+"s",e.afterNum))]},ia);function ia(){this.beforeNum=1,this.beforeUnit="month",this.afterNum=0,this.afterUnit="day"}var FSDate=function ka(){this.type="single",this.singleUnit="day",this.singleDefaultType="current",this.singleDefaultSpecified=new Date,this.rangeDefault=new FSRangeDefault,this.lastTimeItems=[],this.lastTimeDisplayType="flat"},FSEnum=(la.GetItems=function(e){var t=e.source,r=e.itemsFromData,a=e.itemsManual;return"dataField"===t?r:"manual"===t?a:void 0},la.GetItemValues=function(e){return la.GetItems(e).map(function t(e){return e.value})},la);function la(){this.multi=!1,this.displayType="select",this.source="manual",this.allowEmpty=!1,this.itemsFromData=[],this.itemsManual=[],this.multiDefault=[]}var FSEnumItem=function ta(){},FilterSchema=(ua.getDefaultValue=function(e){switch(e.type){case"date":if("single"===e.date.type)return"current"===e.date.singleDefaultType?new Date:e.date.singleDefaultSpecified;if("range"===e.date.type)return FSRangeDefault.GetDates(e.date.rangeDefault);if("lastTimeEnum"===e.date.type)return FSLastTimeItem.GetDates(e.date.lastTimeItems[0]);break;case"enum":var t=e["enum"],r=t.multi,a=t.singleDefault,n=t.multiDefault;return r?n:a;case"number":return e.number["default"];case"text":return e.text["default"]}},ua);function ua(){this.i18nName={},this.showName=!1,this.type="date",this.date=new FSDate,this["enum"]=new FSEnum,this.number={"default":0},this.text={"default":""}}function ifFsDateRange(e){if(e)return"date"===e.type&&"range"===e.date.type}function isFsFlat(e){if(e)return"date"===e.type&&"lastTimeEnum"===e.date.type&&"flat"===e.date.lastTimeDisplayType||"enum"===e.type&&!e["enum"].multi&&"flat"===e["enum"].displayType}var FILTER_PROP_NAME="filter",frontendFilterProp={name:FILTER_PROP_NAME,displayName:"筛选",isArray:!0,type:PropertyTypes.Object,objectOption:{objPropertyOptions:[{name:"fs",type:PropertyTypes.Filter},{name:"dpId",type:PropertyTypes.DataParam},{name:"dpId2",type:PropertyTypes.DataParam,ifShow:function(e){return e.fs&&ifFsDateRange(e.fs)}}]}},JumpTypes={None:"0",Func:"1",ChartTable:"2",NewBrowserTab:"3"},jumpTypeOption={type:PropertyTypes.Enum,enumOption:{"default":JumpTypes.None,items:[{value:JumpTypes.None,displayName:"none"},{value:JumpTypes.Func,displayName:"toFuncOrInvoke"},{value:JumpTypes.NewBrowserTab,displayName:"browserNewTab"}]}},funcOption={type:PropertyTypes.Help,tip:"选菜单/联查的帮助",helpOption:{getData:function(e){return e.get("/api/runtime/sys/v1.0/functions/allFuncs").pipe(operators.map(function(e){return util.list2Tree(e,{rootParentIdValue:"0",beforeProcess:function(e){"3"===e.layer&&(e.isLeaf=!0,e.isTableParent=!0)}})}))},structure:HelpStructure.treeTable,tableFields:["code","name"],valueField:"id",nameField:"name"}},dataJumpOption={category:"clickJump",type:PropertyTypes.Object,objectOption:{objPropertyOptions:[__assign({name:"jumpType",displayName:"jumpType"},jumpTypeOption),{name:"funcIdSource",type:PropertyTypes.Enum,enumOption:{items:["fixed","fromData"]},ifShow:function(e){return e.jumpType===JumpTypes.Func}},{name:"funcIdDataField",type:PropertyTypes.DataField,ifShow:function(e){return e.jumpType===JumpTypes.Func&&"fromData"===e.funcIdSource}},__assign({name:"funcId",displayName:"func/invoke",ifShow:function(e){return e.jumpType===JumpTypes.Func&&"fixed"===e.funcIdSource}},funcOption),{name:"funcParams",displayName:"routeParams",type:PropertyTypes.Object,isArray:!0,objectOption:{objPropertyOptions:[{name:"key",displayName:"paramKey",textOption:{i18n:!1},type:PropertyTypes.Text},{name:"valueType",displayName:"valueType",type:PropertyTypes.Enum,enumOption:{items:[{value:"fieldName",displayName:"dataFieldValue"},{value:"fixedValue",displayName:"fixedValue"}]}},{name:"fixedValue",displayName:"paramFixedValue",type:PropertyTypes.Text,textOption:{i18n:!1},ifShow:function(e){return"fixedValue"===e.valueType}},{name:"fieldName",displayName:"paramValueField",type:PropertyTypes.DataField,ifShow:function(e){return"fieldName"===e.valueType}}]},ifShow:function(e){return e.jumpType===JumpTypes.Func}},{name:"url",displayName:"newTabUrl",type:PropertyTypes.Text,textOption:{i18n:!1},ifShow:function(e){return e.jumpType===JumpTypes.NewBrowserTab}},{name:"urlParams",displayName:"urlParams",type:PropertyTypes.Object,isArray:!0,objectOption:{objPropertyOptions:[{name:"valueType",displayName:"valueType",type:PropertyTypes.Enum,enumOption:{items:[{value:"fieldName",displayName:"dataFieldValue"},{value:"fixedValue",displayName:"fixedValue"}]}},{name:"fixedValue",displayName:"paramFixedValue",type:PropertyTypes.Text,textOption:{i18n:!1},ifShow:function(e){return"fixedValue"===e.valueType}},{name:"fieldName",displayName:"paramValueField",type:PropertyTypes.DataField,ifShow:function(e){return"fieldName"===e.valueType}}]},ifShow:function(e){return e.jumpType===JumpTypes.NewBrowserTab}},{name:"queryParams",displayName:"urlQueryParams",type:PropertyTypes.Object,isArray:!0,objectOption:{objPropertyOptions:[{name:"key",displayName:"paramKey",type:PropertyTypes.Text,textOption:{i18n:!1}},{name:"valueType",displayName:"valueType",type:PropertyTypes.Enum,enumOption:{items:[{value:"fieldName",displayName:"dataFieldValue"},{value:"fixedValue",displayName:"fixedValue"}]}},{name:"fixedValue",displayName:"paramFixedValue",type:PropertyTypes.Text,textOption:{i18n:!1},ifShow:function(e){return"fixedValue"===e.valueType}},{name:"fieldName",displayName:"paramValueField",type:PropertyTypes.DataField,ifShow:function(e){return"fieldName"===e.valueType}}]},ifShow:function(e){return e.jumpType===JumpTypes.NewBrowserTab}}]}},datalessJumpOption={category:"clickJump",type:PropertyTypes.Object,objectOption:{objPropertyOptions:[__assign({name:"jumpType",displayName:"jumpType"},jumpTypeOption),__assign({name:"funcId",displayName:"func/invoke",ifShow:function(e){return e.jumpType===JumpTypes.Func}},funcOption),{name:"funcParams",displayName:"routeParams",type:PropertyTypes.Object,isArray:!0,objectOption:{objPropertyOptions:[{name:"key",displayName:"paramKey",type:PropertyTypes.Text,textOption:{i18n:!1}},{name:"value",displayName:"paramValue",type:PropertyTypes.Text,textOption:{i18n:!1}}]},ifShow:function(e){return e.jumpType===JumpTypes.Func}},{name:"url",displayName:"newTabUrl",type:PropertyTypes.Text,textOption:{i18n:!1},ifShow:function(e){return e.jumpType===JumpTypes.NewBrowserTab}}]}},CommonPropertyOptions={jump:datalessJumpOption},WidgetPropertyMap=new Map;function Property(a){return void 0===a&&(a={}),a.type=a.type||PropertyTypes.Text,a.objectOption&&a.objectOption.objPropertyOptions&&a.objectOption.objPropertyOptions.forEach(function(e){e.type=e.type||PropertyTypes.Text}),a.isArray=!!a.isArray,function(e,t){var r=e.constructor.name;WidgetPropertyMap.get(r)||WidgetPropertyMap.set(r,[]),WidgetPropertyMap.get(r).push(__assign({name:t},a)),i0.Input()(e,t)}}var WidgetBase=(ab.prototype.onResized=function(e,t){},ab.prototype.onPropertyChange=function(e,t){},ab.prototype.onGetData=function(e){},__decorate([Property({category:"公共属性",displayName:"部件标题"}),__metadata("design:type",Object)],ab.prototype,"title",void 0),ab),_a;function ab(){this.title="untitled",this.useDataEngine=!1,null==this.widgetName&&console.error("元部件 "+this.constructor.name+" 未添加 @Widget({ name: <name>})")}var PropertyTypeDefaultValues=(_a={},_a[PropertyTypes.Text]="",_a[PropertyTypes.Bool]=!1,_a[PropertyTypes.Number]=0,_a[PropertyTypes.DataField]={},_a),titleBarProps=[{category:"titleBar",name:"titleBarHide",type:PropertyTypes.Bool,boolOption:{"default":!1}},{category:"titleBar",name:"titleBarShowRefresh",displayName:"showRefreshBtn",type:PropertyTypes.Bool,boolOption:{"default":!0}},__assign({},datalessJumpOption,{category:"titleBar",name:"titleBarJump"})],WidgetPropertyService=(gb.prototype.getPropertyDefaultValue=function(e,t){var r=this;if(void 0===t&&(t=!1),!t&&e.isArray)return[];if(e.type===PropertyTypes.Object){var a={};return e.objectOption.objPropertyOptions.forEach(function(e){a[e.name]=e[e.type]&&e[e.type]["default"]||r.getPropertyDefaultValue(e)}),a}if(e.type===PropertyTypes.Enum){var n=e.enumOption.items[0];return"string"==typeof n?n:n.value}if(e.type!==PropertyTypes.Color)return e.type===PropertyTypes.Filter?new FilterSchema:PropertyTypeDefaultValues[e.type];var i=this.getColorsByColorOption(e.colorOption),o=Math.random();return i[Math.floor(o*i.length)]},gb.prototype.getWidgetProps=function(e,t){var r=WidgetRegistry.getWidgetByName(e).ctor.name,a=WidgetPropertyMap.get(r)||[];return __spread(WidgetPropertyMap.get(WidgetBase.name).filter(function(t){return!a.some(function(e){return t.name===e.name})}),t.enableCommonTitleBar?titleBarProps:[],t.enableDataConfig&&t.enableCommonTitleBar?[frontendFilterProp]:[],a)},gb.prototype.mixinWidgetPropValues=function(e,t){var r=this,a=__assign({},t);return e.forEach(function(e){a[e.name]===undefined&&(a[e.name]=e[e.type]&&e[e.type]["default"]||r.getPropertyDefaultValue(e))}),a},gb.prototype.getColorsByColorOption=function(e){if(e&&e.palette)return e.palette;var t;switch(e?e.type:"pure"){case"gradient":t=util.PlThemeColors.gradient;break;case"pureOrGradient":t=__spread(util.PlThemeColors.pure,util.PlThemeColors.gradient);break;case"pure":default:t=util.PlThemeColors.pure}return t},gb.decorators=[{type:i0.Injectable,args:[{providedIn:"root"}]}],gb.ctorParameters=function(){return[]},gb.ngInjectableDef=i0.defineInjectable({factory:function(){return new gb},token:gb,providedIn:"root"}),gb);function gb(){}var CHART_TABLE_FUNC_ID="???",DASHBOARD_API="DashboardApi",WidgetDevkitService=(Fb.prototype.openModal=function(e,t){return this.modalService.show(e,t)},Fb.prototype.openMenu=function(e,t){window[DASHBOARD_API].openMenu(e,t)},Fb.prototype.openApp=function(e){window[DASHBOARD_API].openApp(e)},Fb.prototype.openInfoMsg=function(e,t){window[DASHBOARD_API].messageSvc.info(e,t)},Fb.prototype.openSuccessMsg=function(e,t){window[DASHBOARD_API].messageSvc.success(e,t)},Fb.prototype.openWarningMsg=function(e,t){window[DASHBOARD_API].messageSvc.warning(e,t)},Fb.prototype.openErrorMsg=function(e,t){window[DASHBOARD_API].messageSvc.error(e,t)},Fb.prototype.getData=function(e){return window[DASHBOARD_API].storageSvc.getData(e)},Fb.prototype.getUserInfo=function(e){return void 0===e&&(e=!1),window[DASHBOARD_API].storageSvc.getUserInfo(e)},Fb.prototype.getUserAvatar=function(e){return void 0===e&&(e=!1),window[DASHBOARD_API].storageSvc.getUserAvatar(e)},Fb.prototype.jump=function(e,t){var r=e.type,a=e.funcId,n=e.params,i=Array.isArray(n)?n.map(function(e){return[e.key,"fixedValue"===e.valueType?e.fixedValue:t?t[e.fieldName.name]:undefined]}):undefined;switch(r){case JumpTypes.None:return;case JumpTypes.Func:this.openMenu(a,i);break;case JumpTypes.ChartTable:this.openMenu(CHART_TABLE_FUNC_ID,i)}},Fb.prototype.jumpWithData=function(e,i){var t=e.jumpType,r=e.funcIdSource,a=e.funcIdDataField,n=e.funcId,o=e.funcParams,p=e.url,s=e.urlParams,l=e.queryParams,u=Array.isArray(o)?o.map(function(e){return[e.key,"fixedValue"===e.valueType?e.fixedValue:i?i[e.fieldName.name]:undefined]}):undefined;switch(t){case JumpTypes.None:return;case JumpTypes.Func:var d=r&&"fixed"!==r?i[a.name]:n;d&&this.openMenu(d,u);break;case JumpTypes.ChartTable:this.openMenu(CHART_TABLE_FUNC_ID,u);break;case JumpTypes.NewBrowserTab:var c=p;if(s&&0<s.length){var y=s.map(function(e){var t=e.valueType,r=e.fixedValue,a=e.fieldName;return"fixedValue"===t?r:i[a.name]}).join("/");c+=p.endsWith("/")?"":"/",c+=y}l&&0<l.length&&(c+="?"+l.map(function(e){var t=e.key,r=e.valueType,a=e.fixedValue,n=e.fieldName;return t+"="+("fixedValue"===r?a:i[n.name])}).join("&")),window.open(c,"_blank")}},Fb.prototype.jumpWithoutData=function(e){var t=e.jumpType,r=e.funcId,a=e.funcParams,n=e.url,i=Array.isArray(a)?a.map(function(e){return[e.key,e.value]}):undefined;switch(t){case JumpTypes.None:return;case JumpTypes.Func:this.openMenu(r,i);break;case JumpTypes.ChartTable:this.openMenu(CHART_TABLE_FUNC_ID,i);break;case JumpTypes.NewBrowserTab:window.open(n,"_blank")}},Fb.decorators=[{type:i0.Injectable}],Fb.ctorParameters=function(){return[{type:modal.BsModalService}]},Fb);function Fb(e){this.modalService=e}var WidgetTitleBarComponent=(Ic.prototype.ngOnInit=function(){},Ic.prototype.handleClickJump=function(){this.devkitSvc.jumpWithoutData(this.jumpConfig)},Ic.decorators=[{type:i0.Component,args:[{selector:"lib-widget-title-bar",template:'\n<div class="widget-title-bar d-flex">\n  \x3c!-- left --\x3e\n  <div class="left align-items-center">\n    <i *ngIf="icon!=\'\'" class="material-icons">{{icon}}</i>\n    <div *ngIf="showTitle" class="title">{{title}}</div>\n    <div *ngIf="showNumber" class="number">{{number}}</div>\n    <ng-container *ngTemplateOutlet="leftTemplate"></ng-container>\n  </div>\n  \x3c!-- right --\x3e\n  <div class="right">\n    <ng-container *ngTemplateOutlet="rightTemplate"></ng-container>\n    <div class="tool-wrap d-flex" [title]="(settingTitle || \'\') | translate">\n      <img\n        class="setting"\n        *ngIf="showSetting"\n        (click)="clickSetting.emit()"\n        src="assets/img/setting.svg"\n        [alt]="settingTitle">\n    </div>\n    <div\n      class="tool-wrap d-flex"\n      *ngIf="showRefresh"\n      (click)="clickRefresh.emit()">\n      <i class="icon-refresh material-icons" style="font-size: 20px;">refresh</i>\n    </div>\n    <div\n      *ngIf="jumpConfig && jumpConfig.jumpType!==JumpTypes.None"\n      (click)="handleClickJump()"\n      class="tool-wrap d-flex">\n      <i class="material-icons">chevron_right</i>\n    </div>\n  </div>\n</div>',encapsulation:i0.ViewEncapsulation.None,styles:['@charset "UTF-8";.widget-title-bar{display:flex;padding:12px 20px 10px}.widget-title-bar .left{flex:1 1 auto;display:flex}.widget-title-bar .left .material-icons{font-size:18px;margin-right:8px;color:#3794ff;padding-top:1px}.widget-title-bar .left .title{font-weight:700;font-size:15px}.widget-title-bar .left .number{font-size:15px;margin-left:10px}.widget-title-bar .right{flex:1 1 auto;display:flex;justify-content:flex-end;align-items:center}.widget-title-bar .right .widget-select{margin-left:5px}.widget-title-bar .right .setting{width:16px;height:16px;transition:.3s;opacity:1!important}.widget-title-bar .right .setting:hover{transform:rotate(60deg)}.widget-title-bar .right .tool-wrap{width:20px;margin-left:10px;font-size:14px;color:#000;transition:.3s;cursor:pointer;opacity:.2}.widget-title-bar .right .tool-wrap:hover{opacity:.4}']}]}],Ic.ctorParameters=function(){return[{type:WidgetDevkitService}]},Ic.propDecorators={icon:[{type:i0.Input}],showTitle:[{type:i0.Input}],title:[{type:i0.Input}],showNumber:[{type:i0.Input}],number:[{type:i0.Input}],showSetting:[{type:i0.Input}],settingTitle:[{type:i0.Input}],clickSetting:[{type:i0.Output}],showRefresh:[{type:i0.Input}],clickRefresh:[{type:i0.Output}],jumpConfig:[{type:i0.Input}],jumpProperty:[{type:i0.Input}],data:[{type:i0.Input}],leftTemplate:[{type:i0.ContentChild,args:["leftTemplate"]}],rightTemplate:[{type:i0.ContentChild,args:["rightTemplate"]}]},Ic);function Ic(e){this.devkitSvc=e,this.icon="",this.showTitle=!0,this.title="",this.showNumber=!1,this.number=0,this.showSetting=!1,this.clickSetting=new i0.EventEmitter,this.showRefresh=!1,this.clickRefresh=new i0.EventEmitter,this.JumpTypes=JumpTypes}var WidgetTitleBarSelectComponent=(Kc.prototype.ngOnInit=function(){var t=this;this.filter=new forms.FormControl(this.defaultFilterValue?this.defaultFilterValue:this.filterOptions[0].value),this.filter.valueChanges.subscribe(function(e){t.onFilterChange.emit(e)})},Kc.decorators=[{type:i0.Component,args:[{selector:"lib-widget-title-bar-select",template:'\n<select\n  [formControl]="filter"\n  class="widget-select form-control" >\n  <option *ngFor="let option of filterOptions"\n    [value]="option.value">{{option.name}}</option>\n</select>',styles:[".widget-select{font-size:12px;padding:0 5px;height:25px}"]}]}],Kc.ctorParameters=function(){return[]},Kc.propDecorators={defaultFilterValue:[{type:i0.Input}],filterOptions:[{type:i0.Input}],onFilterChange:[{type:i0.Output}]},Kc);function Kc(){this.filterOptions=[],this.onFilterChange=new i0.EventEmitter}var WidgetTitleBarModule=(Nc.decorators=[{type:i0.NgModule,args:[{declarations:[WidgetTitleBarComponent,WidgetTitleBarSelectComponent],exports:[WidgetTitleBarComponent,WidgetTitleBarSelectComponent],imports:[common.CommonModule,forms.ReactiveFormsModule,core.TranslateModule.forChild()]}]}],Nc);function Nc(){}var Gradient=(Oc.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},Oc);function Oc(e){this.colorStops=e||[]}var LinearGradient=(Sc=Gradient,__extends(Tc,Sc),Tc),Sc;function Tc(e,t,r,a,n,i){var o=Sc.call(this,n)||this;return o.x=null==e?0:e,o.y=null==t?0:t,o.x2=null==r?1:r,o.y2=null==a?0:a,o.type="linear",o.global=i||!1,o}var EchartsOptions={grid:{top:20,right:30,bottom:36,left:10,containLabel:!0},xAxis:{type:"category",axisLine:{lineStyle:{color:"#D9D9D9"}},axisTick:{lineStyle:{color:"#D9D9D9"}},axisLabel:{color:"black",margin:10,fontSize:11}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#E4EBF057"}},axisLabel:{fontSize:11}},legend:{x:"center",y:"bottom",itemWidth:16,itemHeight:3,borderRadius:2,icon:"roundRect",padding:[15,0],textStyle:{color:"#000000a6"}},tooltip:{backgroundColor:"#ffffffe8",textStyle:{color:"#000000e6"},extraCssText:"box-shadow: 0px 1px 7px #00000017;",appendToBody:!0,confine:!0}},chartsConsts={seriesLabelFontSize:9},ɵ0=function(e){return e.split(",")},splitedGradientColors=util.PlThemeColors.gradient.map(ɵ0),getChartColorsPure=function(e){return util.PlThemeColors.pure[e.dataIndex]},getChartColorsGradient=function(e){return new LinearGradient(0,0,0,1,[{offset:0,color:splitedGradientColors[e.dataIndex%splitedGradientColors.length][0]},{offset:1,color:splitedGradientColors[e.dataIndex%splitedGradientColors.length][1]}])},getChartColorsGradientOne=function(e){return new LinearGradient(1,0,0,0,[{offset:0,color:splitedGradientColors[e.dataIndex%splitedGradientColors.length][0]},{offset:1,color:splitedGradientColors[e.dataIndex%splitedGradientColors.length][1]}])};function filterYData(r,e){if(r.filterYFlag){var a=r.yFieldObjs.map(function(e){return e.valueField.name});return e.filter(function(t){return!a.some(function(e){return t[e]<=r.minY||t[e]>=r.maxY})})}return e}var EchartsPropertyOptions={showRefresh:{category:"data",displayName:"showRefreshBtn",type:PropertyTypes.Bool,boolOption:{"default":!0}},filterYFlag:{type:PropertyTypes.Bool,category:"data",displayName:"setYRange"},minY:{type:PropertyTypes.Number,category:"data",displayName:"minY",numberOption:{"default":0},ifShow:function(e){return e.filterYFlag}},maxY:{type:PropertyTypes.Number,category:"data",displayName:"maxY",numberOption:{"default":1e3},ifShow:function(e){return e.filterYFlag}},showLabel:{category:"style",type:PropertyTypes.Bool,displayName:"showNumber"},showTooltip:{category:"style",type:PropertyTypes.Bool,boolOption:{"default":!0},displayName:"showHoverDetail"},legendStyleOption:{type:PropertyTypes.Enum,displayName:"legendType",category:"style",enumOption:{"default":"scroll",items:[{value:"none",displayName:"notVisible"},{value:"plain",displayName:"showAll"},{value:"scroll",displayName:"scrollOverflow"}]}},valueStyleOption:{type:PropertyTypes.Enum,displayName:"valueType",category:"style",enumOption:{"default":"right",items:[{value:"right",displayName:"right"},{value:"insideRight",displayName:"inside"}]}}};function echartsGradient(e,t){var r;return t||e.includes(",")?(t||(e=(r=__read(e.split(","),2))[0],t=r[1]),new LinearGradient(0,0,0,1,[{offset:0,color:e},{offset:1,color:t}])):e}var tempMap={"金额":{en:"Amount","zh-CHS":"金额"},"数量":{en:"Number","zh-CHS":"数量"}};function tempLabel(e,t){var r=e.label;return tempMap[r]&&tempMap[r][t]?tempMap[r][t]:e.label}function resolveTemplate(html,dataItem){var expPatt=/{{[\d\D]+?}}/gm;if(!html)return"";var exps=html.match(expPatt)||[];try{exps.forEach(function(exp){html=html.replace(exp,eval(exp.slice(2,-2)))})}catch(err){return html}return html}var WidgetDataService=(rd.prototype.loadData=function(e){return this.onLoadData.emit(e),this.onGetData},rd.prototype.loadDataWithDims=function(e){return this.onLoadData.emit(e),this.onGetDataWithDims},rd.prototype.reloadData=function(e){this.onLoadData.emit(e)},rd.prototype.setData=function(e){this.onGetData.emit(e.tableData),this.onGetDataWithDims.emit(e)},rd.decorators=[{type:i0.Injectable}],rd);function rd(){this.onLoadData=new i0.EventEmitter,this.onGetData=new i0.EventEmitter,this.onGetDataWithDims=new i0.EventEmitter}var WidgetInstanceInfo=function wd(e,t,r){this.portletId=e,this.id=t,this.assetsBaseUrl=r},WidgetDevkitModule=(Ad.decorators=[{type:i0.NgModule,args:[{declarations:[],providers:[WidgetDevkitService],imports:[common.CommonModule,modal.ModalModule.forRoot()],exports:[WidgetTitleBarModule]}]}],Ad);function Ad(){}exports.Widget=Widget,exports.WidgetRegistry=WidgetRegistry,exports.WidgetEvent=WidgetEvent,exports.WidgetEventMap=WidgetEventMap,exports.WidgetEventService=WidgetEventService,exports.WidgetPropertyService=WidgetPropertyService,exports.Property=Property,exports.WidgetPropertyMap=WidgetPropertyMap,exports.WidgetTitleBarModule=WidgetTitleBarModule,exports.WidgetTitleBarComponent=WidgetTitleBarComponent,exports.WidgetTitleBarSelectComponent=WidgetTitleBarSelectComponent,exports.WidgetBase=WidgetBase,exports.resolveTemplate=resolveTemplate,exports.JumpTypes=JumpTypes,exports.jumpTypeOption=jumpTypeOption,exports.funcOption=funcOption,exports.dataJumpOption=dataJumpOption,exports.datalessJumpOption=datalessJumpOption,exports.CommonPropertyOptions=CommonPropertyOptions,exports.filterYData=filterYData,exports.echartsGradient=echartsGradient,exports.tempLabel=tempLabel,exports.EchartsOptions=EchartsOptions,exports.chartsConsts=chartsConsts,exports.getChartColorsPure=getChartColorsPure,exports.getChartColorsGradient=getChartColorsGradient,exports.getChartColorsGradientOne=getChartColorsGradientOne,exports.EchartsPropertyOptions=EchartsPropertyOptions,exports.tempMap=tempMap,exports.WidgetDataService=WidgetDataService,exports.WidgetInstanceInfo=WidgetInstanceInfo,exports.WidgetDevkitModule=WidgetDevkitModule,exports.DASHBOARD_API=DASHBOARD_API,exports.WidgetDevkitService=WidgetDevkitService,exports.PropertyTypes=PropertyTypes,exports.HelpStructure=HelpStructure,exports.CHART_TABLE_FUNC_ID=CHART_TABLE_FUNC_ID,exports.getObj=getObj,exports.ifFsDateRange=ifFsDateRange,exports.isFsFlat=isFsFlat,exports.FSLastTimeItem=FSLastTimeItem,exports.FSRangeDefault=FSRangeDefault,exports.FSDate=FSDate,exports.FSEnum=FSEnum,exports.FSEnumItem=FSEnumItem,exports.FilterSchema=FilterSchema,exports.FILTER_PROP_NAME=FILTER_PROP_NAME,exports.frontendFilterProp=frontendFilterProp,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=gspwidget-widget-devkit.umd.min.js.map