{"version":3,"file":"gspwidget-widget-core.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@gspwidget/widget-core/lib/dynamic-loader.service.ts","ng://@gspwidget/widget-core/lib/instance.service.ts","ng://@gspwidget/widget-core/lib/widget/runtime-agg.ts","ng://@gspwidget/widget-core/lib/widget/widget.component.ts","ng://@gspwidget/widget-core/lib/title-bar/title-bar.component.ts","ng://@gspwidget/widget-core/lib/filter/filter.component.ts","ng://@gspwidget/widget-core/lib/flat-select/flat-select.component.ts","ng://@gspwidget/widget-core/lib/flat-select/flat-select.module.ts","ng://@gspwidget/widget-core/lib/filter/filter.module.ts","ng://@gspwidget/widget-core/lib/widget-core.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { HttpClient } from '@angular/common/http';\nimport { ComponentFactoryResolver, getModuleFactory, Injectable, Injector, NgModuleFactory, NgModuleFactoryLoader } from '@angular/core';\nimport { BasicWidgetInfoAotMode, BasicWidgetInfoDevMode, WidgetContainerMode } from '@gspwidget/util';\nimport { appendScript } from '@gspwidget/util';\nimport { WidgetPropertyService, WidgetRegistry } from '@gspwidget/widget-devkit';\n\nimport * as AngularCommon from '@angular/common'\nimport * as AngularCommonHttp from '@angular/common/http'\nimport * as AngularCore from '@angular/core'\nimport * as AngularForms from '@angular/forms'\nimport * as AngularPlatformBrowser from '@angular/platform-browser'\nimport * as AngularPlatformBrowserAnimations from '@angular/platform-browser/animations'\nimport * as AngularPlatformBrowserDynamic from '@angular/platform-browser-dynamic'\nimport * as AngularRouter from '@angular/router'\nimport * as AngularAnimations from '@angular/animations'\nimport * as AngularAnimationsBrowser from '@angular/animations/browser'\nimport * as NgxTranslateCore from '@ngx-translate/core'\nimport * as NgxTranslateHttpLoader from '@ngx-translate/http-loader'\n// import * as PortletModule from '@gspwidget/portlet';\nimport * as WidgetCoreModule from '../public-api';\nimport * as WidgetDevkitModule from '@gspwidget/widget-devkit';\nimport * as UtilModule from '@gspwidget/util';\nimport { IGIX_HOME_PATH } from '@gspwidget/util';\n// import * as UtilModule from '@gspwidget/util';\n// import * as GridsterModule from '@gspwidget/gridster';\n// declare var System\n/* iGIX å systemjs ææ¶æ¯ 3.x */\nif (!window.define) {\n  appendScript(`${IGIX_HOME_PATH}assets/amd.6.js`)\n}\n\nlet sys\n\n@Injectable({ providedIn: 'root' })\nexport class DynamicLoaderService {\n\n  private initSystemjsPromise: Promise<void>\n  constructor (\n    private injector: Injector,\n    private http: HttpClient,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private widgetProperty: WidgetPropertyService,\n    ) {\n    /**\n     * ä¸ºäºé¿å ng serve æ¶ï¼webpack ä¼æ system.import\n     * æ¦æªä¸ºèªèº«çå®ç°ï¼æ æ³æ»¡è¶³ç°å¨çç»å¯¹å°åå è½½\n     */\n    sys = window['System']\n    this.initSystemjsPromise = this.initSystemjs()\n  }\n  async initSystemjs () {\n    sys.set('lib:@angular/common', AngularCommon)\n    sys.set('lib:@angular/common/http', AngularCommonHttp)\n    sys.set('lib:@angular/core', AngularCore)\n    sys.set('lib:@angular/forms', AngularForms)\n    sys.set('lib:@angular/platform-browser', AngularPlatformBrowser)\n    sys.set('lib:@angular/platform-browser/animations', AngularPlatformBrowserAnimations)\n    sys.set('lib:@angular/platform-browser-dynamic', AngularPlatformBrowserDynamic)\n    sys.set('lib:@angular/router', AngularRouter)\n    sys.set('lib:@angular/animations', AngularAnimations)\n    sys.set('lib:@angular/animations/browser', AngularAnimationsBrowser)\n    sys.set('lib:@ngx-translate/core', NgxTranslateCore)\n    sys.set('lib:@ngx-translate/http-loader', NgxTranslateHttpLoader)\n\n    // sys.set('lib:@gspwidget/portlet', PortletModule)\n    sys.set('lib:@gspwidget/widget-core', WidgetCoreModule)\n    sys.set('lib:@gspwidget/widget-devkit', WidgetDevkitModule)\n    sys.set('lib:@gspwidget/util', UtilModule)\n    // sys.set('lib:@gspwidget/gridster', GridsterModule)\n  }\n\n  /**\n   * å è½½åé¨ä»¶æä»¶ï¼å¹¶è·å widget çè¯¦ç»ä¿¡æ¯ä¾å¤é¢ç¨\n   */\n  async loadWidget (\n    widgetInfo: BasicWidgetInfoAotMode | BasicWidgetInfoDevMode,\n    rawPropValues: object,\n    mode: WidgetContainerMode) {\n    const { name: widgetName } = widgetInfo\n    let widgetCompFactory\n    let widgetModuleFactory\n    switch (mode) {\n      case WidgetContainerMode.AOT:\n        // å è½½ widget js æä»¶\n        await this.initSystemjsPromise\n        const systemModule = await sys.import(`${(widgetInfo as BasicWidgetInfoAotMode).href}?v=${widgetInfo.version}`)\n        this.fixCompFacError(systemModule)\n        // å è½½å®æåï¼è·å widget çè¯¦ç»ä¿¡æ¯ä¾å¤é¢ç¨\n        widgetCompFactory = getWidgetComponentFactory(widgetName, systemModule)\n        widgetModuleFactory = getModuleFactoryAot(systemModule)\n        break\n      case WidgetContainerMode.DEV:\n        widgetCompFactory = this.componentFactoryResolver.resolveComponentFactory((widgetInfo as BasicWidgetInfoDevMode).widgetComponent)\n        break\n    }\n    const widgetConfig = WidgetRegistry.getWidgetByName(widgetName)\n    const properties = this.widgetProperty.getWidgetProps(widgetName, widgetConfig)\n    const propValues = this.widgetProperty.mixinWidgetPropValues(properties, rawPropValues)\n    return {\n      widgetCompFactory,\n      widgetModuleFactory,\n      properties,\n      propValues,\n      widgetConfig,\n    }\n  }\n  /**\n   * TODO:\n   * ç½èæçé®é¢ï¼å»æè¯è¯ï¼æ¿ä»çåé¨ä»¶è¯è¯ãæçæ¯ä¹åä¸ç´æ²¡ä¼ å¥ module çåå ã\n   * ä¿®å¤åé¨ä»¶ä¾èµçç¬¬ä¸æ¹ç»ä»¶ä¸­ this.componentFactoryResolver.resolveComponentFactory\n   * æ¾ä¸å°ç¬¬ä¸æ¹ç»ä»¶ç ComponentFactory çé®é¢ï¼\n   * å¦ nz RateComponent æ¾ä¸å° toolTipComponent\n   */\n  fixCompFacError (systemModule) {\n    Object.keys(systemModule)\n    .filter(key => key.endsWith('ModuleNgFactory'))\n    .forEach(key => {\n      try {\n        const { _factories } = systemModule[key].create(this.injector).componentFactoryResolver\n        _factories.forEach(iFactory => {\n          // @ts-ignore\n          this.componentFactoryResolver._factories.set(iFactory.componentType, iFactory);\n        })\n      } catch (err) {}\n    })\n  }\n}\nfunction getWidgetComponentFactory (widgetName: string, systemModule: any): any {\n  const componentType = WidgetRegistry.getWidgetByName(widgetName).ctor\n  if (componentType) {\n    return Object.values(systemModule)\n      .find((fac: any) => fac.componentType === componentType)\n  }\n}\nfunction getModuleFactoryAot (systemModule: any) {\n  const key = Object\n    .keys(systemModule)\n    .find(k => k.endsWith('ModuleNgFactory'))\n  return systemModule[key] as NgModuleFactory<any>\n}\n","import { Injectable, Type } from '@angular/core';\nimport { WidgetComponent } from './widget/widget.component';\n\n/**\n * instance æè¿è¡æ¶ï¼å¨æå¤è¿è¡çä¸ä¸ªé¨ä»¶ã\n * æ­¤æå¡è¢«å¨æ¶éãè¾åºå®ä¾idä¸å®ä¾å¼ç¨ä¿¡æ¯ï¼\n * ä¸»å¨è°ç¨èä¸º widgetComponent æ portletComponent\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class InstanceService {\n  /** é¨ä»¶å®ä¾å¼ç¨ä¿¡æ¯ */\n  instances: {\n    [insId: string]: {\n      // portletComp: PortletComponent,\n      widgetComp?: WidgetComponent\n    }\n  } = {}\n\n  constructor () { }\n\n  getInsByPInsId (insId: string) {\n    return this.instances[insId]\n  }\n  addInsInfo (insId: string, widgetComp: WidgetComponent, type: 'widgetComp' | 'portletComp') {\n    if (!insId) console.warn('ins id ä¸ºç©º')\n    if (!this.instances[insId]) this.instances[insId] = {}\n    this.instances[insId][type] = widgetComp\n  }\n}\n","import { Dimension, PlThemeColors, RuntimeAggOption } from \"@gspwidget/util\"\nimport { DataField } from \"@gspwidget/widget-devkit\"\n\nconst aggFirstDim2Field = (runtimeAgg: RuntimeAggOption, allDims: Dimension[]) => getFieldByName(allDims, runtimeAgg.dimensions[0])\nconst aggFirstInd2Field = (runtimeAgg: RuntimeAggOption, allDims: Dimension[]) => getFieldByName(allDims, runtimeAgg.indicators[0].dimName)\nconst stackAggFields = (pure = false) => [{\n  name: 'yFieldObjs',\n  valueFactory: ({ indicators }: RuntimeAggOption, allDims: Dimension[]) => {\n    return indicators.map((ind, i) => ({\n      valueField: getFieldByName(allDims, ind.dimName),\n      color: pure\n        ? PlThemeColors.pure[i % indicators.length]\n        : PlThemeColors.gradient[i % indicators.length]\n    }))\n  }\n}, {\n  name: 'categoryFieldName',\n  valueFactory: aggFirstDim2Field\n}]\nconst barAggFields = [\n  { name: 'categoryFieldName', valueFactory: aggFirstDim2Field },\n  { name: 'valueFieldName', valueFactory: aggFirstInd2Field }\n]\nexport const chartAggFieldMap = {\n  stack: stackAggFields(),\n  area: stackAggFields(true),\n  'bar-group': stackAggFields(),\n  'widget-line': stackAggFields(true),\n  bar: barAggFields,\n  pie: barAggFields,\n  pie2: barAggFields,\n  'bar-horizontal': barAggFields,\n  'simple-line': barAggFields,\n  'bar-multiple': [{\n    categoryFieldName: aggFirstDim2Field,\n    valueFieldNameOne: aggFirstInd2Field,\n    valueFieldNameTwo: (runtimeAgg: RuntimeAggOption, allDims: Dimension[]) => getFieldByName(allDims, runtimeAgg.indicators[1].dimName),\n  }]\n}\nfunction getFieldByName (dims: Dimension[], dimName: string): DataField {\n  const { name, label } = dims.find(dim => dim.name === dimName)\n  return { name, label }\n}\nexport function isWidgetRuntimeAggActive (widgetName: string) {\n  return Object\n    .keys(chartAggFieldMap)\n    .includes(widgetName)\n}\n","import { HttpClient } from '@angular/common/http';\nimport {\n  ChangeDetectorRef, Component,\n  EventEmitter, Injector, Input,\n  OnChanges, OnInit,\n  Output, SimpleChanges, ViewChild, ViewContainerRef\n} from '@angular/core';\nimport { BasicWidgetInfo, DataWithDims, Dimension, DpValue, EppPortlet, FILTERS_WIDGET_NAME, FILTERS_WIDGET_PROP_NAME, FilterWidgetEventParam, IGIX_HOME_PATH, LinkMap, loadCommonStyleNTheme, objectLiteralEqual, RuntimeAggOption, WidgetContainerMode } from '@gspwidget/util';\nimport {\n  FilterConfig,\n  FilterSchema,\n  FILTER_PROP_NAME,\n  RegisteredWidgetConfig, WidgetBase, WidgetDataService, WidgetEventService, WidgetInstanceInfo, WidgetPropertyService\n} from '@gspwidget/widget-devkit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { Observable } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport { DynamicLoaderService } from '../dynamic-loader.service';\nimport { InstanceService } from '../instance.service';\nimport { TitleBarComponent } from '../title-bar/title-bar.component';\nimport { chartAggFieldMap, isWidgetRuntimeAggActive } from './runtime-agg';\n\n  /** å·²è¢« set ç¿»è¯ç langï¼ä¸æ¬¡ä¸åè¯·æ±æ­¤ lang */\n  // private langsSet: { [widgetName: string]: string[] } = {}\nconst loadedI18nUrls: string[] = []\n\ndeclare global {\n  interface Window {\n    widgetI18nResLoaded: boolean\n    widgetStyleLoaded: boolean\n    define: any\n  }\n}\nexport enum WCStatus {\n  LoadingWidget,\n  LoadingData,\n  DataEmpty,\n  Normal,\n  DataError,\n  WidgetLoadError,\n}\nexport interface GetDataOptions {\n  dpValues: DpValue[],\n  runtimeAgg: RuntimeAggOption\n}\n\nloadCommonStyleNTheme()\n/**\n * å¼å®¹é¶æ®µæ°æ®å è½½é»è¾\n * 1. è¥åé¨ä»¶ useDataEngine === true, è¯´ææ¯èåæ³ãä¸éè¦æ°æ®çåé¨ä»¶ï¼ä½å¶åé¨æªè°ç¨å è½½æ°æ®ï¼æä»¥åå§åå®æåå è½½ä¸ä¸ï¼\n *    æ°æ°æ®å è½½è¯·æ±å¤çæ°¸è¿å¯ç¨ï¼å ä¸ºä»ææ°åæ³åé¨ä»¶ä¼è§¦åï¼\n * 2. è¥ getData æå¼ï¼åç¨å®è·å¾æ°æ®ï¼ä¸ç¨çæ°æ®\n * 3. è¥åä¸­å¸¦æ 'æ¼ç¤º'ï¼åç¨æ¼ç¤ºæ°æ®\n * 4. é½ä¸æ»¡è¶³åç¨çæ°æ®\n */\n@Component({\n  selector: 'lib-widget',\n  templateUrl: './widget.component.html',\n  styleUrls: ['./widget.component.scss']\n})\nexport class WidgetComponent implements OnInit, OnChanges {\n  /** å¿éï¼è¦æ¸²æç widget ä¿¡æ¯ */\n  @Input() basicWidgetInfo: BasicWidgetInfo\n  /** å¿éï¼æ­¤ widget çéç½®ä¿¡æ¯ï¼ä»å¨åé¨ä»¶å è½½æ¶èµ·ä½ç¨ï¼è¥å±æ§æ¹åï¼å¿éè°ç¨ setPropValues() */\n  @Input() propValues\n  @Input() linkMap: LinkMap\n  /** å¯é */\n  @Input() mode = WidgetContainerMode.AOT\n  /** å¯éï¼widget çéæèµæºå°åï¼ä¸è¬ä¸ç¨ç®¡ï¼ç¹æ®æåµå¯éç½®ï¼é»è®¤å¼ä¸º this.basicWidgetInfo.baseUrl + '/assets/' */\n  @Input() assetsBaseUrl: string\n  // TODO: è§£è¦ portlet\n  /** å¯éï¼é¨ä»¶ä¿¡æ¯ï¼éè¦æ³¨å¥å°åé¨ä»¶ */\n  @Input() portlet: EppPortlet = new EppPortlet(null)\n  /** å¯éï¼é¨ä»¶å®ä¾ id, è·åæ°æ®å¯è½ç¨å° */\n  @Input() instanceId: string\n  /**\n   * å¿éï¼\n   * è¥æå®ï¼ååé¨ä»¶ä¸»å¨å è½½æ°æ®æ¶ä½¿ç¨å®è·åæ°æ®ï¼\n   * ä¸åå è½½çå®æ°æ®ãç¨äºç»åé¨ä»¶è®¾ç½®åæ°æ®\n   */\n  @Input() getData: (getDataOpts: GetDataOptions) => Observable<DataWithDims>\n  @Input() status = WCStatus.LoadingWidget\n\n  /** widget å è½½å®æï¼ååºå½å widget çä¿¡æ¯ */\n  @Output() widgetLoaded = new EventEmitter()\n  /** widget component create å®æï¼ååºå½å widget çä¿¡æ¯ */\n  @Output() widgetInit = new EventEmitter()\n  @Output() runtimeAggChange = new EventEmitter()\n  // TODO: èèå»æ\n  // @Output() triggerLoadData = new EventEmitter()\n\n  @ViewChild('resizeTarget') resizeTarget\n  @ViewChild('wc', { read: ViewContainerRef }) widgetContainer: ViewContainerRef\n  @ViewChild('titleBar') titleBar: TitleBarComponent\n\n  // public isLoading = true\n  // public status = WCStatus.Normal\n  public WCStatus = WCStatus\n  public IGIX_HOME_PATH = IGIX_HOME_PATH\n  public FILTER_PROP_NAME = FILTER_PROP_NAME\n  public width: number\n  public height: number\n  public curWidgetConfig: RegisteredWidgetConfig\n  // public feFilterValues: FrontendFilter[]\n  /** å­å¨æ­¤å±çæ°æ®ãå¯ç¨äºåç«¯ç­éãæ°æ®è·åç¶æå¤æ­ */\n  public data: any[] = null\n  /** è·åæ°æ®åå­èµ·æ¥çç»´åº¦ãå¯ç¨äºé¡µé¢è®¾è®¡æ¶ãè¿è¡æ¶è·åãæ¾ç¤ºç»´åº¦ */\n  public dims: Dimension[]\n  public widgetInstance: WidgetBase\n  public showRuntimeAgg = false\n\n  // private widgetComponentRef: ComponentRef<any>\n  // private widgetInstanceInfo: WidgetInstanceInfo\n  private widgetDataService: WidgetDataService\n  /** å¬å±å¤´ä¸æ¯å¦æ¾ç¤ºè¿è¡æ¶èåéç½® */\n\n  constructor (\n    private loader: DynamicLoaderService,\n    private cd: ChangeDetectorRef,\n    private injector: Injector,\n    private modal: NzModalService,\n    private http: HttpClient,\n    private translate: TranslateService,\n    private widgetPropertyService: WidgetPropertyService,\n    private widgetEventService: WidgetEventService,\n    private insSerivce: InstanceService,\n  ) {\n    this._initWidgetEnv()\n  }\n  /**\n   * å¨å±åå§å\n   */\n  private _initWidgetEnv () {\n    // i18n\n    if (!this.translate.defaultLang) this.translate.setDefaultLang('zh-CHS');\n    if (!this.translate.currentLang) {\n      const lang = localStorage.getItem('languageCode') || 'zh-CHS'\n      this.translate.use(lang || 'zh-CHS')\n    }\n    if (!window.widgetI18nResLoaded) {\n      const { currentLang } = this.translate\n      this.http.get(`${IGIX_HOME_PATH}assets/i18n/${currentLang}.json`).subscribe(res => {\n        this.translate.setTranslation(currentLang, res, true)\n      })\n      window.widgetI18nResLoaded = true\n    }\n  }\n\n  ngOnInit () {\n    this.insSerivce.addInsInfo(this.instanceId, this, 'widgetComp')\n    // çå¬ resizeTarget çå¤§å°ååï¼ååæ¶è°ç¨åé¨ä»¶.onResized()ï¼ä¼ å¥ DomRectReadonly\n    if (this.resizeTarget) {\n      new ResizeObserver(entries => {\n        const { width, height } = entries[0].contentRect\n        if (this.widgetInstance) this.widgetInstance.onResized(width, height)\n        this.width = width\n        this.height = height\n        this.cd.markForCheck()\n      }).observe(this.resizeTarget.nativeElement)\n    }\n  }\n\n  ngOnChanges (c: SimpleChanges) {\n    const { basicWidgetInfo } = c\n    if (basicWidgetInfo && basicWidgetInfo.currentValue && basicWidgetInfo.currentValue !== basicWidgetInfo.previousValue) {\n      // widget åäºï¼æ¸²ææ°åé¨ä»¶\n      this.renderWidget()\n    }\n  }\n  /**\n   * æ­¤ container è¢« gridster æ¸²æåºæ­£ç¡®çå¤§å°äºä»¶\n   */\n  public triggerWidgetResize () {\n    if (this.widgetInstance && this.widgetInstance.onResized) {\n      const { clientWidth, clientHeight } = this.resizeTarget.nativeElement\n      this.widgetInstance.onResized(clientWidth, clientHeight)\n    }\n  }\n  // TODO: è¿äºé½æ¹é æï¼åæ°ä¸ºä¸ä¸ªå¯¹è±¡ï¼éé¢å¯ä»¥ä¸æ¬¡å¡å¤ä¸ªå±æ§-å¼ï¼å¨é¨æ´æ°ååè§¦å onPropertyChangeï¼\n  // å¦åååå§åå®è¦èµå¤ä¸ªå¼çæåµï¼éç¥è§¦åå¤ªé¢ç¹äºï¼ä¹ä¼å¯¼è´é¢ç¹è§¦ååé¨ä»¶æ¸²æãæ°æ®å è½½\n  /**\n   * å¤é¨æ´æ°åé¨ä»¶ propValues çæå±æ§åï¼éè¦è°ç¨æ­¤æ¹æ³ï¼å¦åæä»¬ä¸ç¥é propValues åçäºååã\n   * ä¸å¤ªå¥½ç²¾ç®æè¿ä¸ªæ¹æ³ãå°è¯è¿ç¨ keyValueDiffer å¨ ngDoCheck ä¸­æ£æµ propValues ååï¼ä½ä»è½æ£æµä¸å±ã\n   */\n  public setPropertyValue (propName: string, pValue) {\n    // TODO: portlet ç»ææ¹ååï¼å¯ä»¥çå»è¿ä¸æ­¥ï¼__extra åºè¯¥æ ¹æ¬ä¸ä¼ä¼ è¿æ¥\n    if (propName === '__extra') return\n    // å¦æä¸æ¯ objectï¼åå¤æ­å¼å¦æ pValue ä¸å½ååé¨ä»¶å®ä¾ä¸­ç¸åï¼å°±ä¸ä¼ ç»é¨ä»¶äº\n    if (typeof pValue !== 'object' && this.widgetInstance[propName] === pValue) return\n    // TODO: é¨ä»¶éç½®æ¶ï¼è¿è¡æ¶æ´æ¹è¯­è¨çå¤ç\n    const value = this.processPV(pValue)\n    // æ¹å¼\n    this.widgetInstance[propName] = value\n    // éç¥ï¼å ä¸ºåé¨ä»¶å¯è½éè¦è¿ä¸ªæ¶æº\n    // é²æ­¢æ²¡æè¿ä¸ªæ¹æ³çèåé¨ä»¶æ¥éï¼åé¢é½ä¼åçº§æ\n    if (this.widgetInstance.onPropertyChange) {\n      this.widgetInstance.onPropertyChange(propName, value)\n    }\n    if (propName === FILTER_PROP_NAME) {\n      this.dpValues = (pValue as FilterConfig[])\n        .filter(dv => dv.dpId)\n        .map(fc => ({\n          value: FilterSchema.getDefaultValue(fc.fs),\n          dpId: fc.dpId\n        }))\n      // TODO:\n\n      // if (pValue && pValue.slice) this.propValues[FILTER_PROP_NAME] = pValue.slice()\n      // this.cd.markForCheck()\n    }\n    if (!this.propValues) this.propValues = {}\n    this.propValues[propName] = pValue\n    this.cd.markForCheck()\n  }\n\n  /* éå½æ£æ¥ pvï¼åç¹æ®å¤çï¼æ¯å¦å½éåãå¸®å© */\n  private processPV (value) {\n    const { currentLang } = this.translate\n    try {\n      value = JSON.parse(JSON.stringify(value))\n    } catch (e) { }\n    return _processPVRecursively(value)\n\n    function _processPVRecursively (pValue) {\n      if (Array.isArray(pValue)) {\n        pValue.forEach((v, i) => {\n          pValue[i] = _processPVRecursively(v)\n        })\n        return pValue\n        // i18n: å¦æ value ä¸­åå« en æ zh-CHS æ å½åè¯­è¨çkeyï¼åæ¯ i18n å­æ®µ\n      } else if (pValue && !pValue._notProcess && typeof (pValue.en + pValue['zh-CHS'] + pValue[currentLang]) === 'string') {\n        return pValue[currentLang]\n        // help\n      } else if (pValue && pValue.__type === 'help') {\n        return pValue.value\n      } else if (pValue && ['Object'].includes(pValue.constructor.name)) {\n        Object.keys(pValue).forEach(key => {\n          pValue[key] = _processPVRecursively(pValue[key])\n        })\n        return pValue\n      } else {\n        return pValue\n      }\n    }\n  }\n  public async renderWidget () {\n    // å è½½æ¸²æè¿ä¸ª widget éè¦çä¸ååæ°æ®\n    const { baseUrl } = this.basicWidgetInfo\n    const curWidgetData = await this.loader.loadWidget(this.basicWidgetInfo, this.propValues, this.mode)\n    // TODO: propValues æ¯ä¸æ¯ä¸ç¨ç»è¿ loaderï¼ç´æ¥è° widgetPropService è·åå°±è¡ï¼\n    const { widgetCompFactory, widgetModuleFactory, propValues, widgetConfig } = curWidgetData\n    this.curWidgetConfig = widgetConfig\n    this.initRuntimeAgg()\n    if (this.curWidgetConfig.enableLoadingI18n) this.loadI18nRes()\n    // åé¨ä»¶å è½½å®æäºä»¶\n    this.widgetLoaded.emit(curWidgetData)\n    // å èåé¨ä»¶\n    this.widgetContainer.remove()\n    // åå»ºæ³¨å¥å¨\n    const injector = Injector.create({\n      providers: [{\n        provide: WidgetInstanceInfo, /** åé¨ä»¶å®ä¾ä¿¡æ¯ */\n        useValue: new WidgetInstanceInfo(\n          this.portlet.id,\n          this.instanceId,\n          this.assetsBaseUrl || this.basicWidgetInfo.baseUrl + '/assets/',\n        )\n      }, {\n        provide: WidgetDataService, /** åé¨ä»¶æ°æ®æå¡ */\n        useFactory: () => {\n          this.widgetDataService = new WidgetDataService()\n          this.widgetDataService.onLoadData\n            .pipe(delay(0)) // ä¸ºé¿åç¨ of(data) ä¼åæ­¥è¿åæ°æ®ï¼å¯¼è´ data service ä¸­ç onGetData è¿æ²¡è¿åå°åé¨ä»¶æéå°±è§¦åå®äº\n            .subscribe(this.loadNSetData.bind(this))\n          return this.widgetDataService\n        },\n        deps: []\n      }],\n      parent: this.injector\n    })\n    // åå»ºãæè½½ widget ç»ä»¶\n    this.widgetInstance = this.widgetContainer.createComponent(\n      widgetCompFactory, 0, injector, undefined,\n      widgetModuleFactory && widgetModuleFactory.create(this.injector)\n    ).instance as WidgetBase\n\n    // è®¾ç½® widget ç properties ç values\n    // TODO: æ¹ä¸ºä¸æ¬¡éå¤ä¸ª\n    Object.keys(propValues).forEach(prop => {\n      this.setPropertyValue(prop, propValues[prop])\n    })\n\n    // TODO: å·²åºå¼æ¹æ¡, ä»¥ä¸ä¸ºè¿æ¸¡æ¹æ¡ä»¥å¼å®¹èåæ³åé¨ä»¶, åæå°ç§»é¤\n    this.widgetInstance.id = this.instanceId\n    this.widgetInstance.portletId = this.portlet.id\n    this.widgetInstance.assetsBaseUrl = this.assetsBaseUrl || baseUrl + '/assets/'\n    if (this.widgetInstance.useDataEngine) this.loadNSetData({})\n\n    // TODO: å®å®æä¹åæç®ä½ widget åå§åå®æï¼å¯ä»¥æ¾ç¤ºåºæ¥ãå¦åä¼æ¾ç¤º codeã\n    // this.setWidgetTranslation()\n    // event\n    this.initWidgetEventListener()\n    // åé¨ä»¶åå§åå®æäºä»¶\n    this.widgetInit.emit(curWidgetData)\n    // this.isLoading = false\n    this.status = WCStatus.Normal\n    this.cd.markForCheck()\n  }\n\n  private loadI18nRes () {\n    const { currentLang } = this.translate\n    const { name, baseUrl } = this.basicWidgetInfo\n    const { customI18nResourceUrl } = this.curWidgetConfig\n    const i18nResUrl = customI18nResourceUrl || `${baseUrl}/assets/i18n/${currentLang}.json`\n\n    // ç¼å­æ¾å è½½è¿çèµæºæä»¶åï¼ä¸æ¬¡ç¸åæä»¶ä¸åè¯·æ±ãç¼å­èµæºæä»¶åï¼æ¯å ä¸ºå¯è½å¤ä¸ªåé¨ä»¶æå®ç¸åçèµæºæä»¶ã\n    if (loadedI18nUrls.includes(i18nResUrl)) return\n    loadedI18nUrls.push(i18nResUrl)\n\n    return this.http.get(i18nResUrl).toPromise().then(res => {\n      this.translate.setTranslation(currentLang, res, true)\n    }, () => {\n      console.log(`åé¨ä»¶ ${name} æ  ${currentLang} çèµæºæä»¶`)\n    }).finally(() => {\n      return Promise.resolve()\n    })\n  }\n  /**\n   * pv ä¸­åå« {fs,dp}[]ï¼ç­éæ§ä»¶+åæ°åæ°=ç­éï¼\n   * é¨ä»¶å®ä¾ä¸­ä¿å­ {fs,dp}: filterValue\n   */\n  dpValues: DpValue[] = []\n  /**\n   * å¡æ°æ®å¥å£ 1/2: å è½½æ°æ®å¹¶å¡ç»é¨ä»¶\n   */\n  // TODO: loadNSetData å¯è½æ¯ä¸å¸¦åæ°çãåæ°åæ°å¯è½å­å¨å½å widget å®ä¾éï¼ç´æ¥åã\n  // loadNSetData ææ²¡æå¯è½å¸¦çæ¥èªé¨ä»¶çé¢å¤åæ°ï¼\n  public loadNSetData (param: {\n    dpValues?: DpValue[],\n  } = {}) {\n    const ob = this.getData({\n      dpValues: mergeDpValuesForNew(this.dpValues, param.dpValues),\n      runtimeAgg: this.runtimeAgg\n    })\n    if (!ob) return\n    ob.subscribe(dataWithDims => {\n      this.setData(dataWithDims)\n    }, this.handleDataError.bind(this))\n  }\n  /**\n   * ç»åé¨ä»¶éæ°è®¾ç½®æ°æ®ç»æï¼å¤é¨å¯è°ç¨æ­¤æ¹æ³ç»é¨ä»¶è®¾ç½®æ°æ®ã\n   */\n  public setData (pDataWithDims: DataWithDims) {\n    let dataWithDims = pDataWithDims\n    // set if empty status\n    if (!pDataWithDims || !pDataWithDims.tableData || pDataWithDims.tableData.length === 0) this.status = WCStatus.DataEmpty\n    // å¦æå¤é¢æ²¡æç» DataWithDims èæ¯ç®åæ°æ®åè¡¨ï¼å°±ç®åè½¬ä¸æãä»¥å¼å®¹ config éçåæ°æ®ç­ã\n    if (!pDataWithDims.dimensions && pDataWithDims['length']) {\n      dataWithDims = {\n        dimensions: Object\n          .keys(pDataWithDims[0])\n          .map(key => ({ name: key, label: key })),\n        tableData: (pDataWithDims as unknown as any[])\n      }\n    }\n    this.status = WCStatus.Normal\n    this.data = dataWithDims.tableData\n    this.dims = dataWithDims.dimensions\n\n    if (this.widgetDataService) this.widgetDataService.setData(dataWithDims)\n    if (this.widgetInstance && this.widgetInstance.useDataEngine) this.widgetInstance.onGetData(dataWithDims.tableData) // å¼å®¹ç¨é\n\n    // ç»åé¨ä»¶è®¾ç½®å®æ°æ®ï¼è¥æè¿è¡æ¶èåï¼è¿éè¦éæ°ç»å®å­æ®µ\n    this.setRuntimeAggDims()\n    this.cd.markForCheck()\n  }\n\n  handleDataError = () => {\n    // æ°æ®å è½½å¤±è´¥\n    this.status = WCStatus.DataError\n    this.cd.markForCheck()\n  }\n  handleClickStatusMore () {\n    this.modal.error({\n      nzTitle: 'å°é¨ä»¶éè¯¯',\n      nzContent: 'æ­¤å°é¨ä»¶çæ°æ®éç½®æ æï¼éè¦ç®¡çåéæ°éç½®æå é¤ã'\n    })\n  }\n  filterValues: any[]\n  handleFilterChange (dpValues: DpValue[]) {\n    mergeDpValues(this.dpValues, dpValues)\n    this.loadNSetData()\n  }\n  // @Input() initRuntimeAgg: RuntimeAggOption\n  /**\n   * æ­¤ runtimeAgg å­å¨å½åè¿è¡æ¶ç¨æ·éçãææ°ç runtimeAggã\n   * extra ä¸­çæ¯å­å¨å¨é¨ä»¶ä¸­çã\n   * widget ä¸è´è´£æ runtimeAgg æ¾å° extra éï¼å ä¸ºè¿éä¸ç¡®å®æ¯å¦éè¦æä¹åã\n   */\n  runtimeAgg: RuntimeAggOption\n  handleRuntimeAggChange (runtimeAgg: RuntimeAggOption) {\n    // if (objectLiteralEqual(runtimeAgg, this.runtimeAgg)) return\n    this.runtimeAgg = runtimeAgg\n    // ä¸é¢ä¸¤è¡é¡ºåºä¸¥æ ¼ï¼å ä¸ºå¤é¨å è½½æ°æ®æ¶å¯è½è¦ä¾èµå½åææ°ç runtimeAgg\n    this.runtimeAggChange.emit(runtimeAgg)\n    this.loadNSetData()\n  }\n  /** å½ååæ³éè¦ä¿è¯ renderWidget() å·²å®æ */\n  handleTitleBarInit (titleBar: TitleBarComponent) {\n    if (this.showRuntimeAgg) {\n      titleBar.setRuntimeAgg(this.runtimeAgg)\n    }\n  }\n  initRuntimeAgg () {\n    // runtime agg\n    this.showRuntimeAgg = isWidgetRuntimeAggActive(this.basicWidgetInfo.name)\n    if (this.showRuntimeAgg) {\n      this.runtimeAgg = this.propValues.__extra ? this.propValues.__extra.runtimeAgg : null\n    }\n  }\n  // TODO: ä»¥åæ su æ¾ basic... é\n  /**\n   * åå§åé¨ä»¶äºä»¶çå¬\n   */\n  private initWidgetEventListener () {\n    if (!this.linkMap) return\n    if (this.amIFilterWidget()) {\n      this.initOneEventListener(FILTERS_WIDGET_PROP_NAME)\n    } else {\n      this.widgetEventService\n        .getEventsByWidgetName(this.basicWidgetInfo.name, this.propValues)\n        .forEach(eventConfig => {\n            this.initOneEventListener(eventConfig.propName)\n        })\n      }\n  }\n  /**\n   * eventPropName æ¯äºä»¶å¯¹åºçå®éå±æ§åï¼\n   * eventKey éç½®å¨ link éçäºä»¶åã\n   * ä¸è¬ä»ä¿©æ¯ä¸æ ·çï¼åèå¯ä»¥ä¸ä¼ ã\n   * è¥æ¯ç­éé¨ä»¶ï¼åä¸¤èä¸åï¼ä¸ä¸ªæ¯ 'filter'ï¼ä¸ä¸ªæ¯å®éçäºä»¶ï¼ç­éï¼åç§°ã\n   */\n  private initOneEventListener (eventPropName: string) {\n    const eventEmitter = this.widgetInstance[eventPropName]\n    if (eventEmitter) eventEmitter.subscribe(widgetEventParam => {\n      console.log('èå¨äºä»¶è§¦åï¼åæ°ï¼' + widgetEventParam)\n      const linkEventKey = this.amIFilterWidget()\n      ? (widgetEventParam as FilterWidgetEventParam).eventKey\n      : eventPropName\n      // æ ¹æ® link map è°ç¨å¶ä» ins æ ¹æ® éæ°å è½½æ°æ®\n      const pInsLink = this.linkMap[linkEventKey]\n      Object.keys(pInsLink).forEach(pInsId => {\n        if (!pInsLink[pInsId] || !pInsLink[pInsId].active || !pInsLink[pInsId].dpId) return\n        const targetWIns = this.insSerivce.getInsByPInsId(pInsId).widgetComp\n        if (targetWIns) targetWIns.loadNSetData({\n          dpValues: [{\n            dpId: pInsLink[pInsId].dpId,\n            // TODO: èå¨åæ°å¼çå¤çå å¨è¿\n            value: String(widgetEventParam['dataIndex']),\n          }]\n        })\n      })\n    })\n  }\n  setRuntimeAggDims () {\n    if (!this.runtimeAgg) return\n    chartAggFieldMap[this.basicWidgetInfo.name].forEach(aggField => {\n      this.setPropertyValue(aggField.name, aggField.valueFactory(this.runtimeAgg, this.dims))\n    })\n  }\n  amIFilterWidget () {\n    return this.basicWidgetInfo.name === FILTERS_WIDGET_NAME\n      && this.basicWidgetInfo.baseUrl.includes('/epp/')\n  }\n}\n\n/**\n * newDpValues åå¹¶å° this.dpValuesï¼å dpId è¦çã\n * æ­¤æ¹æ³ä¼æ¹å oldDpValuesã\n */\nfunction mergeDpValues (oldDpValues: DpValue[], newDpValues: DpValue[]) {\n  for (const newDV of newDpValues.filter(dv => dv.dpId)) {\n    const targetOldDV = oldDpValues.find(oldDV => oldDV.dpId === newDV.dpId)\n    if (targetOldDV) {\n      targetOldDV.value = newDV.value\n    } else {\n      oldDpValues.push(newDV)\n    }\n  }\n}\nfunction mergeDpValuesForNew (oldDpValues: DpValue[] = [], newDpValues: DpValue[] = []) {\n  const result = oldDpValues.slice()\n  mergeDpValues(result, newDpValues)\n  return result\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ContentChild, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output,\n  SimpleChanges,\n  TemplateRef\n} from '@angular/core';\nimport { ArrUtil, deepClone, Dimension, DpValue, Indicator, objectLiteralEqual, RuntimeAggOption } from '@gspwidget/util';\nimport { DataField, DatalessJumpConfig, FilterConfig, ifFsDateRange, isFsFlat, JumpTypes, WidgetDevkitService } from '@gspwidget/widget-devkit';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'lib-title-bar',\n  templateUrl: './title-bar.component.html',\n  styleUrls: ['./title-bar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TitleBarComponent implements OnInit, OnChanges {\n\n  @Input() icon = ''\n  /** æ é¢ */\n  @Input() showTitle = true\n  @Input() title = ''\n  /** æ°å­ */\n  @Input() showNumber = false\n  @Input() number = 0\n  /** è®¾ç½®æé® */\n  @Input() showSetting = false\n  @Input() settingTitle: string\n  @Output() clickSetting = new EventEmitter<any>()\n  /** å·æ°æé® */\n  @Input() showRefresh = false\n  @Output() clickRefresh = new EventEmitter<any>()\n\n  /** æ¯å¦å¯ç¨è·³è½¬ï¼å¼å¯ååé¨ä»¶éç½®ä¸­å¯éç½®å¨å±èæ¥ */\n  @Input() jumpConfig: DatalessJumpConfig\n  /** @deprecated åºæ¹ç¨ enableJumpãå¨å±èæ¥éç½® */\n  @Input() jumpProperty\n  /** @deprecated åºæ¹ç¨ enableJumpãä¸ºäºè·³è½¬æ¶è½åå°æ°æ®çç¬¬ä¸è¡ï¼ç¨æ¥æ¼æ¥è·³è½¬è·¯ç±åæ°ã */\n  @Input() data: any[]\n  /** ç­é */\n  @Input() filterConfigs: FilterConfig[]\n  /** ç»´åº¦ï¼ç¨äºè¿è¡æ¶èå */\n  @Input() dims: Dimension[] = []\n  /** æ¯å¦æ¾ç¤ºè¿è¡æ¶èå */\n  @Input() showRuntimeAgg = false\n\n  @Output() filterChange = new EventEmitter<DpValue[]>()\n  @Output() runtimeAggChange = new EventEmitter<RuntimeAggOption>()\n  @Output() init = new EventEmitter<TitleBarComponent>()\n  /** ä¼ å¥æ¨¡æ¿ */\n  @ContentChild('leftTemplate') leftTemplate: TemplateRef<ElementRef>\n  @ContentChild('rightTemplate') rightTemplate: TemplateRef<ElementRef>\n\n  JumpTypes = JumpTypes\n\n  /** é flat ç fcs */\n  outerFC: FilterConfig\n  innerFCs: FilterConfig[]\n  /** è¢«éä¸­çãæ¾ç¤ºå¨å¤é¢ç fc */\n  // selectedFC: FilterConfig\n  /** flat ç fc */\n  flatFCs: FilterConfig[]\n\n  /** èå */\n  editingRuntimeAgg = new RuntimeAggOption()\n  confirmedRuntimeAgg: RuntimeAggOption\n  runtimeAggDropdownOpen = false\n\n  constructor (\n    private devkitSvc: WidgetDevkitService,\n    public translate: TranslateService,\n  ) { }\n\n  ngOnInit () {\n    this.init.emit(this)\n  }\n\n  ngOnChanges (changes: SimpleChanges) {\n    if (changes.filterConfigs) {\n      this.outerFC = null\n      this.innerFCs = null\n      const notFlatFCs = this.filterConfigs.filter(fc => !isFsFlat(fc.fs))\n      if (notFlatFCs && notFlatFCs[0]) this.outerFC = notFlatFCs[0]\n      if (notFlatFCs && notFlatFCs.length > 1) this.innerFCs = notFlatFCs.slice(1)\n      this.flatFCs = this.filterConfigs.filter(fc => isFsFlat(fc.fs))\n    }\n  }\n  /** ç¨äºå¤é¨æå¨è®¾ç½® runtime aggãå ä¸ºæ¯æ¬¡é½éè¦ deep cloneï¼æä»¥å°è£ä¸ºæå¨è°ç¨çå½æ°ï¼èéæ¨¡æ¿ç»å®ï¼ä»¥åå°æ¬¡æ°ã */\n  public setRuntimeAgg (runtimeAgg: RuntimeAggOption) {\n    if (!runtimeAgg) return\n    this.editingRuntimeAgg = deepClone(runtimeAgg)\n    this.confirmedRuntimeAgg = deepClone(runtimeAgg)\n  }\n\n  handleClickJump () {\n    this.devkitSvc.jumpWithoutData(this.jumpConfig)\n  }\n  /** æ filter åæ¥çç»æå¼ï¼å ä¸ dpId ä¸èµ·åè£ä¸º dpValues ååºå» */\n  handleFilterSingleChange (value, fc: FilterConfig) {\n    // 1. æ®éï¼ååºå¯¹åº 1 ä¸ª dp çåä¸ªå¼\n    this.filterChange.emit([{\n      value,\n      dpId: fc.dpId,\n    }])\n  }\n  handleFilterMultiChange (values: any[], fc: FilterConfig) {\n    let dpValues\n    // 2. æ¥æèå´ï¼ååºå¯¹åº 2 ä¸ª dp ç 2 ä¸ªå¼\n    if (ifFsDateRange(fc.fs)) {\n      dpValues = [\n        { value: values[0], dpId: fc.dpId },\n        { value: values[1], dpId: fc.dpId2 },\n      ]\n    } else {\n      // 3. æä¸¾å¤éï¼ååºå¯¹åº 1 ä¸ª dp çå¤ä¸ªå¼\n      dpValues = [{\n        // TODO: å¤å¼çè¿æ¥æ¹å¼æ¯å¦å¯éï¼\n        value: values.join(','), dpId: fc.dpId\n      }]\n    }\n    this.filterChange.emit(dpValues)\n  }\n\n  /** èå */\n  handleAddInd () {\n    this.editingRuntimeAgg.indicators.push(new Indicator())\n  }\n  handleRemoveInd (ind: Indicator) {\n    ArrUtil.Remove(this.editingRuntimeAgg.indicators, ind)\n  }\n  handleConfirmAgg () {\n    this.runtimeAggDropdownOpen = false\n    if (objectLiteralEqual(this.editingRuntimeAgg, this.confirmedRuntimeAgg)) return\n    this.confirmedRuntimeAgg = deepClone(this.editingRuntimeAgg)\n    this.runtimeAggChange.emit(this.confirmedRuntimeAgg)\n  }\n}\n\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, Pipe, PipeTransform, SimpleChanges } from '@angular/core';\nimport { FilterSchema, FSEnum, FSEnumItem } from '@gspwidget/widget-devkit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { subDays, subMonths } from 'date-fns';\n\n@Component({\n  selector: 'filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.css']\n})\nexport class FilterComponent implements OnInit, OnChanges {\n  /** ç¨äºè·å¾ enum åçå¼ */\n  /** filter éç»ä¸åºè¯¥éè¦å®æ´æ°æ®ï¼å¦ååä¸æ¥è¯¢çç­éè¿æå¥æä¹ï¼ */\n  // @Input() intactData: any[] = []\n  @Input('filterSchema') fs: FilterSchema\n  @Output() singleValueChange = new EventEmitter()\n  @Output() multiValueChange = new EventEmitter()\n\n  value\n\n  constructor(\n    public translate: TranslateService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges (changes: SimpleChanges) {\n    if (changes.fs && changes.fs.currentValue != changes.fs.previousValue) {\n      this.value = FilterSchema.getDefaultValue(this.fs)\n    }\n  }\n\n  getEnumItems (): FSEnumItem[] {\n    return FSEnum.GetItems(this.fs.enum)\n  }\n  /**\n   * filter ä¸å³å¿å¤çå¦ä½çå¾ãå¤çå¤ä¸ªå¼ï¼å¤ä¸ªå¼å¯¹åºä¸ä¸ªè¿æ¯å¤ä¸ª dpï¼ï¼\n   * ä»æå¤ä¸ªå¼çæ°ç»ååºå»\n   */\n  handleChange (value) {\n    this.singleValueChange.emit(value)\n  }\n  handleChangeMulti (values: any[]) {\n    this.multiValueChange.emit(values)\n  }\n}\n\n@Pipe({ name: 'colValues' })\nexport class ColValuesPipe implements PipeTransform {\n  transform (data: any[], col: string ): any {\n    if (data && data.map) return Array.from(new Set(data.map(i => i[col])))\n  }\n}\n","import { Component, OnInit, ChangeDetectionStrategy, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'flat-select',\n  templateUrl: './flat-select.component.html',\n  styleUrls: ['./flat-select.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FlatSelectComponent implements OnInit {\n\n  @Input() options: {\n    label: string\n    value: any\n  }[] = []\n\n  @Input() value\n  @Output() valueChange = new EventEmitter()\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FlatSelectComponent } from './flat-select.component';\n\n@NgModule({\n  declarations: [\n    FlatSelectComponent,\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    FlatSelectComponent,\n  ]\n})\nexport class FlatSelectModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FilterComponent, ColValuesPipe } from './filter.component';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { FormsModule } from '@angular/forms';\nimport { NzDatePickerModule } from 'ng-zorro-antd/date-picker';\nimport { FlatSelectModule } from '../flat-select/flat-select.module';\n\n@NgModule({\n  declarations: [\n    FilterComponent,\n    ColValuesPipe,\n  ],\n  imports: [\n    CommonModule,\n    NzSelectModule,\n    NzDatePickerModule,\n    FormsModule,\n    FlatSelectModule,\n  ],\n  exports: [\n    FilterComponent\n  ]\n})\nexport class FilterModule { }\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { UtilModule } from '@gspwidget/util';\nimport { WidgetDevkitModule } from '@gspwidget/widget-devkit';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NzAutocompleteModule } from 'ng-zorro-antd/auto-complete';\nimport { NzDatePickerModule } from 'ng-zorro-antd/date-picker';\nimport { NzModalModule } from 'ng-zorro-antd/modal';\nimport { AccordionModule } from 'ngx-bootstrap/accordion';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { WidgetComponent } from './widget/widget.component';\nimport { TitleBarComponent } from './title-bar/title-bar.component';\nimport { FilterModule } from './filter/filter.module';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzInputModule } from 'ng-zorro-antd/input';\n\n// import { FilterComponent } from './filter/filter.component';\n// import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n// import { GridDesignerComponent } from '../../../designer/src/app/components/grid-designer/grid-designer.component';\n// import {GridsterModule as Gridster2} from '@widget/gridster';\n// TODO: å¼ç¨æ¹å¼\n// import { WidgetDevkitModule } from '@gspwidget/widget-devkit';\n\n@NgModule({\n  declarations: [\n    WidgetComponent,\n    TitleBarComponent,\n    // GridDesignerComponent,\n  ],\n  entryComponents: [],\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n    AccordionModule.forRoot(),\n    ColorPickerModule,\n    // Gridster2\n    // TranslateModule.forRoot(),\n    TranslateModule,\n    NzAutocompleteModule, // TODO: è¿äº module çç»ç»æ¹å¼\n    NzModalModule,\n    NzDatePickerModule,\n    // NzSelectModule,\n    // ä¿è¯åé¨ä»¶å¨è¿å±è½è·åå°è¿éé¢çæå¡ã\n    // ä¸è½ä»æ³¨åå¨ rootï¼å ä¸ºæå¡çæå¡ä¸ä¿è¯å¨ root ä¸ï¼\n    // ä¸è½é½æ³¨åå¨ widget éï¼å ä¸ºä¼æ¯ä¸ªé¨ä»¶ä¸ä¸ªæå¡å®ä¾ï¼\n    // æ³¨åå¨è¿ä¿è¯åé¨ä»¶å¨æ­¤å±æ¾å°åä¸ä¸ªæå¡å®ä¾ãå¹¶ä¸æå¡çæå¡ä¹å¨ module éæä¾äºã\n    WidgetDevkitModule,\n    UtilModule,\n    FilterModule,\n    NzDropDownModule,\n    NzSelectModule,\n    NzInputModule,\n  ],\n  exports: [\n    WidgetComponent,\n  ],\n  providers: [\n  ]\n})\nexport class WidgetCoreModule { }\n"],"names":["appendScript","IGIX_HOME_PATH","DynamicLoaderService","AngularCore","WidgetCoreModule","WidgetContainerMode","WidgetRegistry","Injectable","Injector","HttpClient","ComponentFactoryResolver","WidgetPropertyService","PlThemeColors","loadCommonStyleNTheme","modal","EppPortlet","EventEmitter","FILTER_PROP_NAME","FilterSchema","WidgetInstanceInfo","WidgetDataService","delay","FILTERS_WIDGET_PROP_NAME","FILTERS_WIDGET_NAME","Component","ChangeDetectorRef","NzModalService","TranslateService","WidgetEventService","Input","Output","ViewChild","ViewContainerRef","tslib_1.__values","JumpTypes","RuntimeAggOption","isFsFlat","deepClone","ifFsDateRange","Indicator","ArrUtil","objectLiteralEqual","ChangeDetectionStrategy","WidgetDevkitService","ContentChild","FSEnum","Pipe","NgModule","CommonModule","NzSelectModule","NzDatePickerModule","FormsModule","HttpClientModule","ReactiveFormsModule","AccordionModule","ColorPickerModule","TranslateModule","NzAutocompleteModule","NzModalModule","WidgetDevkitModule","UtilModule","NzDropDownModule","NzInputModule"],"mappings":"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"}
