{"version":3,"file":"gsp-wf-wf-biz-navigation.js.map","sources":["ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/en.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-cht.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-chs.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/index.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.service.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/translate.pipe.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.component.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.module.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.entity.ts"],"sourcesContent":["export const en = {\r\n  static: {\r\n    kind: \"business kind\",\r\n    object: \"business object\",\r\n    noData: \"no data\",\r\n    code: \"code\"\r\n  }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    kind: \"æ¥­åç¨®é¡\",\r\n    object: \"æ¥­åå°è±¡\",\r\n    noData: \"æ«ç¡æ¸æ\",\r\n    code: \"ç·¨è\"\r\n  }\r\n};\r\n","export const zh_CHS = {\r\n    static: {\r\n      kind: \"ä¸å¡ç§ç±»\",\r\n      object: \"ä¸å¡å¯¹è±¡\",\r\n      noData: \"ææ æ°æ®\",\r\n      code: \"ç¼ç \"\r\n    }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport {translate} from \"./services/i18n\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WfBizNavigationService {\r\n\r\n  constructor(private injector: Injector) { }\r\n\r\n  getI18nValue(name: string) {\r\n    if (!name) { return ''; }\r\n    const defaultLang = localStorage.getItem('languageCode');\r\n    const langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];\r\n    let resultVal = '';\r\n    if (name.indexOf('.') === -1) {\r\n      resultVal = langData[name];\r\n    } else {\r\n      resultVal = name.split('.').reduce((obj, key) => {\r\n        if (obj) {\r\n          return obj[key];\r\n        } else {\r\n          return null;\r\n        }\r\n      }, langData);\r\n    }\r\n    return resultVal;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { WfBizNavigationService } from \"../wf-biz-navigation.service\";\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n\r\n    constructor(\r\n        private service: WfBizNavigationService\r\n    ) { }\r\n\r\n    transform(name: any, defaultVal = ''): any {\r\n        const r = this.service.getI18nValue(name);\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { Component, OnInit, Injector, Output, EventEmitter, ViewChild, AfterViewInit, Input } from '@angular/core';\r\nimport { WFBizNavigation } from './wf-biz-navigation.entity';\r\nimport { BillcatTreeComponent } from '@gsp-bef/billcat-tree';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n\r\n@Component({\r\n  selector: 'wf-biz-navigation',\r\n  templateUrl: `./wf-biz-navigation.component.html`,\r\n  styleUrls: ['./wf-biz-navigation.component.scss']\r\n})\r\nexport class WfBizNavigationComponent implements OnInit, AfterViewInit {\r\n\r\n  @Output()\r\n  selectNodeEmitter = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizObject = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizCategory = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Input()\r\n  tab: 'billCategory' | 'bizObject' = 'billCategory';\r\n\r\n  @ViewChild(BillcatTreeComponent) billcat: BillcatTreeComponent;\r\n\r\n  data = new Array();\r\n\r\n  config = {\r\n    expandLevel: 1\r\n  };\r\n\r\n  emptyData = new Array();\r\n  emptyCols = [{\r\n    field: 'code', width: 100, title: this.translate.transform('static.code'),\r\n  }];\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private http: HttpService,\r\n    private translate: TranslatePipe\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getBillcategoriesByExtend();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.billcat.treeConfig.expandLevel = 1;\r\n  }\r\n\r\n\r\n  tabChange(args: any) {\r\n    this.tab = args.nextId;\r\n    // console.log({ tabchange: args });\r\n  }\r\n\r\n  boTreeSelectionChanged(data: any) {\r\n    if (data.data && data.data.isDetail === '1') {\r\n      const node: WFBizNavigation = {\r\n        type: 'bo',\r\n        nodeInfo: data\r\n      };\r\n      this.bizObject.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n\r\n  billCategorySelectionChanged(data: any) {\r\n    if (data && data.detail) {\r\n      const node: WFBizNavigation = {\r\n        type: 'bill',\r\n        nodeInfo: data\r\n      };\r\n      this.bizCategory.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n  private getBillcategoriesByExtend() {\r\n    const url = '/api/runtime/bcc/v1.0/billcategory/billcategoriesByExtend?allextends=false&customconfig=processAssignManager';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      if (re) {\r\n        this.data = re;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { WfBizNavigationComponent } from './wf-biz-navigation.component';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { BOTreePanelPackageModule } from '@gsp-lcm/bo-tree';\r\nimport { BillcatTreeModule } from '@gsp-bef/billcat-tree';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n@NgModule({\r\n  declarations: [WfBizNavigationComponent,TranslatePipe],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    FarrisTabsModule,\r\n    BOTreePanelPackageModule,\r\n    BillcatTreeModule,\r\n    PerfectScrollbarModule,\r\n    DatagridModule\r\n  ],\r\n  providers: [\r\n    SessionService,\r\n    HttpService,\r\n    TranslatePipe\r\n  ],\r\n  exports: [WfBizNavigationComponent]\r\n})\r\nexport class WfBizNavigationModule { }\r\n","export class WFBizNavigation {\r\n    type: 'bo' | 'bill';\r\n    nodeInfo: any;\r\n}\r\n"],"names":[],"mappings":"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"}
