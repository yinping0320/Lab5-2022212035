{"version":3,"file":"gsp-wf-wf-biz-navigation.umd.js.map","sources":["ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/en.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-cht.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-chs.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/index.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.service.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/translate.pipe.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.component.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.module.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.entity.ts"],"sourcesContent":["export const en = {\r\n  static: {\r\n    kind: \"business kind\",\r\n    object: \"business object\",\r\n    noData: \"no data\",\r\n    code: \"code\"\r\n  }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    kind: \"æ¥­åç¨®é¡\",\r\n    object: \"æ¥­åå°è±¡\",\r\n    noData: \"æ«ç¡æ¸æ\",\r\n    code: \"ç·¨è\"\r\n  }\r\n};\r\n","export const zh_CHS = {\r\n    static: {\r\n      kind: \"ä¸å¡ç§ç±»\",\r\n      object: \"ä¸å¡å¯¹è±¡\",\r\n      noData: \"ææ æ°æ®\",\r\n      code: \"ç¼ç \"\r\n    }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport {translate} from \"./services/i18n\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WfBizNavigationService {\r\n\r\n  constructor(private injector: Injector) { }\r\n\r\n  getI18nValue(name: string) {\r\n    if (!name) { return ''; }\r\n    const defaultLang = localStorage.getItem('languageCode');\r\n    const langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];\r\n    let resultVal = '';\r\n    if (name.indexOf('.') === -1) {\r\n      resultVal = langData[name];\r\n    } else {\r\n      resultVal = name.split('.').reduce((obj, key) => {\r\n        if (obj) {\r\n          return obj[key];\r\n        } else {\r\n          return null;\r\n        }\r\n      }, langData);\r\n    }\r\n    return resultVal;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { WfBizNavigationService } from \"../wf-biz-navigation.service\";\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n\r\n    constructor(\r\n        private service: WfBizNavigationService\r\n    ) { }\r\n\r\n    transform(name: any, defaultVal = ''): any {\r\n        const r = this.service.getI18nValue(name);\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { Component, OnInit, Injector, Output, EventEmitter, ViewChild, AfterViewInit, Input } from '@angular/core';\r\nimport { WFBizNavigation } from './wf-biz-navigation.entity';\r\nimport { BillcatTreeComponent } from '@gsp-bef/billcat-tree';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n\r\n@Component({\r\n  selector: 'wf-biz-navigation',\r\n  templateUrl: `./wf-biz-navigation.component.html`,\r\n  styleUrls: ['./wf-biz-navigation.component.scss']\r\n})\r\nexport class WfBizNavigationComponent implements OnInit, AfterViewInit {\r\n\r\n  @Output()\r\n  selectNodeEmitter = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizObject = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizCategory = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Input()\r\n  tab: 'billCategory' | 'bizObject' = 'billCategory';\r\n\r\n  @ViewChild(BillcatTreeComponent) billcat: BillcatTreeComponent;\r\n\r\n  data = new Array();\r\n\r\n  config = {\r\n    expandLevel: 1\r\n  };\r\n\r\n  emptyData = new Array();\r\n  emptyCols = [{\r\n    field: 'code', width: 100, title: this.translate.transform('static.code'),\r\n  }];\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private http: HttpService,\r\n    private translate: TranslatePipe\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getBillcategoriesByExtend();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.billcat.treeConfig.expandLevel = 1;\r\n  }\r\n\r\n\r\n  tabChange(args: any) {\r\n    this.tab = args.nextId;\r\n    // console.log({ tabchange: args });\r\n  }\r\n\r\n  boTreeSelectionChanged(data: any) {\r\n    if (data.data && data.data.isDetail === '1') {\r\n      const node: WFBizNavigation = {\r\n        type: 'bo',\r\n        nodeInfo: data\r\n      };\r\n      this.bizObject.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n\r\n  billCategorySelectionChanged(data: any) {\r\n    if (data && data.detail) {\r\n      const node: WFBizNavigation = {\r\n        type: 'bill',\r\n        nodeInfo: data\r\n      };\r\n      this.bizCategory.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n  private getBillcategoriesByExtend() {\r\n    const url = '/api/runtime/bcc/v1.0/billcategory/billcategoriesByExtend?allextends=false&customconfig=processAssignManager';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      if (re) {\r\n        this.data = re;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { WfBizNavigationComponent } from './wf-biz-navigation.component';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { BOTreePanelPackageModule } from '@gsp-lcm/bo-tree';\r\nimport { BillcatTreeModule } from '@gsp-bef/billcat-tree';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n@NgModule({\r\n  declarations: [WfBizNavigationComponent,TranslatePipe],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    FarrisTabsModule,\r\n    BOTreePanelPackageModule,\r\n    BillcatTreeModule,\r\n    PerfectScrollbarModule,\r\n    DatagridModule\r\n  ],\r\n  providers: [\r\n    SessionService,\r\n    HttpService,\r\n    TranslatePipe\r\n  ],\r\n  exports: [WfBizNavigationComponent]\r\n})\r\nexport class WfBizNavigationModule { }\r\n","export class WFBizNavigation {\r\n    type: 'bo' | 'bill';\r\n    nodeInfo: any;\r\n}\r\n"],"names":["Injectable","Injector","Pipe","EventEmitter","Component","HttpService","Output","Input","ViewChild","BillcatTreeComponent","NgModule","CommonModule","FormsModule","FarrisTabsModule","BOTreePanelPackageModule","BillcatTreeModule","PerfectScrollbarModule","DatagridModule","SessionService"],"mappings":"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"}
