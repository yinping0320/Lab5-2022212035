{"version":3,"sources":["ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/en.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/index.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-chs.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/i18n/zh-cht.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.service.ts","ng://@gsp-wf/wf-biz-navigation/lib/services/translate.pipe.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.component.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.module.ts","ng://@gsp-wf/wf-biz-navigation/lib/wf-biz-navigation.entity.ts"],"sourcesContent":["export const en = {\r\n  static: {\r\n    kind: \"business kind\",\r\n    object: \"business object\",\r\n    noData: \"no data\",\r\n    code: \"code\"\r\n  }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","export const zh_CHS = {\r\n    static: {\r\n      kind: \"ä¸å¡ç§ç±»\",\r\n      object: \"ä¸å¡å¯¹è±¡\",\r\n      noData: \"ææ æ°æ®\",\r\n      code: \"ç¼ç \"\r\n    }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    kind: \"æ¥­åç¨®é¡\",\r\n    object: \"æ¥­åå°è±¡\",\r\n    noData: \"æ«ç¡æ¸æ\",\r\n    code: \"ç·¨è\"\r\n  }\r\n};\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport {translate} from \"./services/i18n\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WfBizNavigationService {\r\n\r\n  constructor(private injector: Injector) { }\r\n\r\n  getI18nValue(name: string) {\r\n    if (!name) { return ''; }\r\n    const defaultLang = localStorage.getItem('languageCode');\r\n    const langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];\r\n    let resultVal = '';\r\n    if (name.indexOf('.') === -1) {\r\n      resultVal = langData[name];\r\n    } else {\r\n      resultVal = name.split('.').reduce((obj, key) => {\r\n        if (obj) {\r\n          return obj[key];\r\n        } else {\r\n          return null;\r\n        }\r\n      }, langData);\r\n    }\r\n    return resultVal;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { WfBizNavigationService } from \"../wf-biz-navigation.service\";\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n\r\n    constructor(\r\n        private service: WfBizNavigationService\r\n    ) { }\r\n\r\n    transform(name: any, defaultVal = ''): any {\r\n        const r = this.service.getI18nValue(name);\r\n        return r ? r : defaultVal;\r\n    }\r\n}\r\n","import { Component, OnInit, Injector, Output, EventEmitter, ViewChild, AfterViewInit, Input } from '@angular/core';\r\nimport { WFBizNavigation } from './wf-biz-navigation.entity';\r\nimport { BillcatTreeComponent } from '@gsp-bef/billcat-tree';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n\r\n@Component({\r\n  selector: 'wf-biz-navigation',\r\n  templateUrl: `./wf-biz-navigation.component.html`,\r\n  styleUrls: ['./wf-biz-navigation.component.scss']\r\n})\r\nexport class WfBizNavigationComponent implements OnInit, AfterViewInit {\r\n\r\n  @Output()\r\n  selectNodeEmitter = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizObject = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Output()\r\n  bizCategory = new EventEmitter<WFBizNavigation>();\r\n\r\n  @Input()\r\n  tab: 'billCategory' | 'bizObject' = 'billCategory';\r\n\r\n  @ViewChild(BillcatTreeComponent) billcat: BillcatTreeComponent;\r\n\r\n  data = new Array();\r\n\r\n  config = {\r\n    expandLevel: 1\r\n  };\r\n\r\n  emptyData = new Array();\r\n  emptyCols = [{\r\n    field: 'code', width: 100, title: this.translate.transform('static.code'),\r\n  }];\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private http: HttpService,\r\n    private translate: TranslatePipe\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getBillcategoriesByExtend();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.billcat.treeConfig.expandLevel = 1;\r\n  }\r\n\r\n\r\n  tabChange(args: any) {\r\n    this.tab = args.nextId;\r\n    // console.log({ tabchange: args });\r\n  }\r\n\r\n  boTreeSelectionChanged(data: any) {\r\n    if (data.data && data.data.isDetail === '1') {\r\n      const node: WFBizNavigation = {\r\n        type: 'bo',\r\n        nodeInfo: data\r\n      };\r\n      this.bizObject.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n\r\n  billCategorySelectionChanged(data: any) {\r\n    if (data && data.detail) {\r\n      const node: WFBizNavigation = {\r\n        type: 'bill',\r\n        nodeInfo: data\r\n      };\r\n      this.bizCategory.emit(node);\r\n      this.selectNodeEmitter.emit(node);\r\n    }\r\n  }\r\n\r\n  private getBillcategoriesByExtend() {\r\n    const url = '/api/runtime/bcc/v1.0/billcategory/billcategoriesByExtend?allextends=false&customconfig=processAssignManager';\r\n    this.http.get(url).subscribe((re: any) => {\r\n      if (re) {\r\n        this.data = re;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { WfBizNavigationComponent } from './wf-biz-navigation.component';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { BOTreePanelPackageModule } from '@gsp-lcm/bo-tree';\r\nimport { BillcatTreeModule } from '@gsp-bef/billcat-tree';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { SessionService, HttpService } from '@ecp-caf/caf-common';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { TranslatePipe } from './services/translate.pipe';\r\n\r\n@NgModule({\r\n  declarations: [WfBizNavigationComponent,TranslatePipe],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    FarrisTabsModule,\r\n    BOTreePanelPackageModule,\r\n    BillcatTreeModule,\r\n    PerfectScrollbarModule,\r\n    DatagridModule\r\n  ],\r\n  providers: [\r\n    SessionService,\r\n    HttpService,\r\n    TranslatePipe\r\n  ],\r\n  exports: [WfBizNavigationComponent]\r\n})\r\nexport class WfBizNavigationModule { }\r\n","export class WFBizNavigation {\r\n    type: 'bo' | 'bill';\r\n    nodeInfo: any;\r\n}\r\n"],"names":["translate","zh-CHS","static","kind","object","noData","code","en","zh-CHT","WfBizNavigationService","prototype","getI18nValue","name","defaultLang","localStorage","getItem","langData","indexOf","split","reduce","obj","key","Injectable","args","providedIn","Injector","injector","this","TranslatePipe","transform","defaultVal","r","service","Pipe","WfBizNavigationComponent","ngOnInit","getBillcategoriesByExtend","ngAfterViewInit","tabChange","tab","nextId","boTreeSelectionChanged","data","isDetail","bizObject","emit","node","type","nodeInfo","selectNodeEmitter","billCategorySelectionChanged","detail","bizCategory","_this","http","get","subscribe","re","Component","selector","template","HttpService","Output","Input","ViewChild","BillcatTreeComponent","EventEmitter","Array","config","expandLevel","emptyData","emptyCols","field","width","title","NgModule","declarations","imports","CommonModule","FormsModule","FarrisTabsModule","BOTreePanelPackageModule","BillcatTreeModule","PerfectScrollbarModule","DatagridModule","providers","SessionService","exports","WfBizNavigationModule","WFBizNavigation"],"mappings":"m1BAAA,ICIaA,EAAY,CACrBC,SCLkB,CAClBC,SAAQ,CACNC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,KAAM,ODCRC,GDNc,CAChBL,SAAQ,CACNC,KAAM,gBACNC,OAAQ,kBACRC,OAAQ,UACRC,KAAM,SCENE,SEPkB,CACpBN,SAAQ,CACNC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,KAAM,QCLVG,GAUEA,EAAAC,UAAAC,aAAA,SAAaC,GACX,IAAKA,EAAQ,MAAO,G,IACdC,EAAcC,aAAaC,QAAQ,gBACnCC,EAAWH,EAAcb,EAAUa,GAAeb,EAAU,UAalE,OAX2B,IAAvBY,EAAKK,QAAQ,KACHD,EAASJ,GAETA,EAAKM,MAAM,KAAKC,OAAM,SAAEC,EAAKC,GACvC,OAAID,EACKA,EAAIC,GAEJ,MAERL,I,oBArBRM,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,W,yCAJOC,EAAAA,Y,4HAQnB,SAAAhB,EAAoBiB,GAAAC,KAAAD,SAAAA,ECRtB,IAAAE,GAUIA,EAAAlB,UAAAmB,UAAA,SAAUjB,EAAWkB,QAAA,IAAAA,IAAAA,EAAA,IACXC,EAAIJ,KAAKK,QAAQrB,aAAaC,GACpC,OAAOmB,GAAQD,G,oBATtBG,EAAAA,KAAIV,KAAA,CAAC,CAAEX,KAAM,gB,yCAFLH,KAaTmB,GARI,SAAAA,EACYI,GAAAL,KAAAK,QAAAA,ECPhB,IAAAE,GA6CEA,EAAAxB,UAAAyB,SAAA,WACER,KAAKS,6BAGPF,EAAAxB,UAAA2B,gBAAA,aAKAH,EAAAxB,UAAA4B,UAAA,SAAUf,GACRI,KAAKY,IAAMhB,EAAKiB,QAIlBN,EAAAxB,UAAA+B,uBAAA,SAAuBC,GACjBA,EAAKA,MAA+B,MAAvBA,EAAKA,KAAKC,WAKzBhB,KAAKiB,UAAUC,KAJTC,EAAwB,CAC5BC,KAAM,KACNC,SAAUN,IAGZf,KAAKsB,kBAAkBJ,KAAKC,KAKhCZ,EAAAxB,UAAAwC,6BAAA,SAA6BR,GACvBA,GAAQA,EAAKS,SAKfxB,KAAKyB,YAAYP,KAJXC,EAAwB,CAC5BC,KAAM,OACNC,SAAUN,IAGZf,KAAKsB,kBAAkBJ,KAAKC,KAIxBZ,EAAAxB,UAAA0B,0BAAR,WAAA,IAAAiB,EAAA1B,KAEEA,KAAK2B,KAAKC,IADE,gHACOC,UAAS,SAAEC,GACxBA,IACFJ,EAAKX,KAAOe,M,oBA/EnBC,EAAAA,UAASnC,KAAA,CAAC,CACToC,SAAU,oBACVC,SAAA,4jD,yDAT0BnC,EAAAA,U,MAGnBoC,EAAAA,a,MACAjC,K,2CAUNkC,EAAAA,S,iBAGAA,EAAAA,S,mBAGAA,EAAAA,S,WAGAC,EAAAA,Q,eAGAC,EAAAA,UAASzC,KAAA,CAAC0C,EAAAA,yBAgEb/B,GAnDE,SAAAA,EACUR,EACA4B,EACAtD,GAFA2B,KAAAD,SAAAA,EACAC,KAAA2B,KAAAA,EACA3B,KAAA3B,UAAAA,EA3BV2B,KAAAsB,kBAAoB,IAAIiB,EAAAA,aAGxBvC,KAAAiB,UAAY,IAAIsB,EAAAA,aAGhBvC,KAAAyB,YAAc,IAAIc,EAAAA,aAGlBvC,KAAAY,IAAoC,eAIpCZ,KAAAe,KAAO,IAAIyB,MAEXxC,KAAAyC,OAAS,CACPC,YAAa,GAGf1C,KAAA2C,UAAY,IAAIH,MAChBxC,KAAA4C,UAAY,CAAC,CACXC,MAAO,OAAQC,MAAO,IAAKC,MAAO/C,KAAK3B,UAAU6B,UAAU,iB,oBCxB9D8C,EAAAA,SAAQpD,KAAA,CAAC,CACRqD,aAAc,CAAC1C,EAAyBN,GACxCiD,QAAS,CACPC,EAAAA,aACAC,EAAAA,YACAC,EAAAA,iBACAC,EAAAA,yBACAC,EAAAA,kBACAC,EAAAA,uBACAC,EAAAA,gBAEFC,UAAW,CACTC,EAAAA,eACAzB,EAAAA,YACAjC,GAEF2D,QAAS,CAACrD,OA5BZsD,EA8BqCA,EAlBrC,SAAAA,KCZAC,EAAA,a"}