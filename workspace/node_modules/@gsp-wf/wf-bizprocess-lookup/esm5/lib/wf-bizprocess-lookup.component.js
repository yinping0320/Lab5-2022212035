/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { of } from 'rxjs';
import { LookupGridComponent, ServerSideToken } from '@farris/ui-lookup';
import { WFBizProcessLookUpUIState } from './service/wf-bizprocess-lookup.uistate';
import { WFBizProcessLookUpService } from './service/wf-bizprocess-lookup.service';
var WfBizprocessLookupComponent = /** @class */ (function () {
    function WfBizprocessLookupComponent(uiState) {
        var _this = this;
        this.uiState = uiState;
        /**
         * 宽度
         */
        this.width = 550;
        /**
         * 取数源
         */
        this.sourceType = 'rtProcess';
        /**
         * 只读
         */
        this.disabled = false;
        /**
         * 是否单选
         */
        this.singleSelect = true;
        /**
         * 是否分页，默认true
         */
        this.pagination = true;
        /**
         * 首次加载第几页，默认1
         */
        this.pageIndex = 1;
        /**
         * 每页加载数，默认20
         */
        this.pageSize = 20;
        // @Input() beforeClose: (selectData: any) => Observable<PickedResult>;
        /**
         * 帮助选择后事件
         */
        this.afterConfirm = new EventEmitter();
        this.dialogClosed = new EventEmitter();
        this.clear = new EventEmitter();
        this.columns = [];
        /**
         * 帮助前事件,强行传递过滤条件
         */
        this.beforeOpen = (/**
         * @param {?} arg
         * @return {?}
         */
        function (arg) {
            // if (!this.filter) {
            //   // 可能调用方不传递，识别为非空
            //   this.filter = {};
            // }
            // this.filter.pageIndex = this.pageIndex;
            // this.filter.pageSize = this.pageSize;
            // 把过滤数据和当前的数据传递到service层
            return of({
                showDialog: true, data: {
                    filter: _this.filter
                }
            });
        });
        this.dictPicked = (/**
         * @param {?} arg
         * @return {?}
         */
        function (arg) {
            _this.afterConfirm.next(arg);
            return of({ closeDialog: true });
        });
    }
    /**
     * @return {?}
     */
    WfBizprocessLookupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        switch (this.sourceType) {
            case 'rtProcess':
                this.columns = [
                    { title: 'Key值', field: 'id', width: '80', searchField: 'id', },
                    { title: '名称', field: 'name', width: '100', searchField: 'name', }
                ];
                this.dataUri = this.uiState.rtProcessUri;
                break;
            case 'flowform':
                this.columns = [
                    { title: '编号', field: 'code', width: '80', searchField: 'code', },
                    { title: '名称', field: 'name', width: '100', searchField: 'name', }
                ];
                this.dataUri = this.uiState.flowFormUri;
                break;
            default:
                break;
        }
    };
    /**
     * @param {?} arg
     * @return {?}
     */
    WfBizprocessLookupComponent.prototype.afterClear = /**
     * @param {?} arg
     * @return {?}
     */
    function (arg) {
        this.clear.next(arg);
    };
    /** 手动显示帮助 */
    /**
     * 手动显示帮助
     * @return {?}
     */
    WfBizprocessLookupComponent.prototype.showHelp = /**
     * 手动显示帮助
     * @return {?}
     */
    function () {
        this.lookUp.showDialog();
    };
    WfBizprocessLookupComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-bizprocess-lookup',
                    template: "\n    <farris-lookup-grid #lookup\n      [disabled]=\"disabled\"\n      [editable]=\"false\"\n      [bindingData]=\"bindingData\"\n      [(ngModel)]=\"displayTxt\"\n      [columns]=\"columns\"\n      [singleSelect]=\"singleSelect\"\n      [title]=\"title\"\n      [displayType]=\"'List'\"\n      [uri]=\"dataUri\"\n      [idField]=\"'id'\"\n      [pageIndex]=\"pageIndex\"\n      [pageSize]=\"pageSize\"\n      [pagination]=\"pagination\"\n      [valueField]=\"'id'\"\n      [textField]=\"'name'\"\n      (clear)=\"afterClear($event)\"\n      [dialogWidth]=\"width\"\n      [dictPicking]=\"beforeOpen\"\n      [dictPicked]=\"dictPicked\">\n    </farris-lookup-grid>\n  ",
                    providers: [{ provide: ServerSideToken, useClass: WFBizProcessLookUpService }]
                }] }
    ];
    /** @nocollapse */
    WfBizprocessLookupComponent.ctorParameters = function () { return [
        { type: WFBizProcessLookUpUIState }
    ]; };
    WfBizprocessLookupComponent.propDecorators = {
        title: [{ type: Input }],
        width: [{ type: Input }],
        sourceType: [{ type: Input }],
        disabled: [{ type: Input }],
        singleSelect: [{ type: Input }],
        pagination: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        displayTxt: [{ type: Input }],
        bindingData: [{ type: Input }],
        filter: [{ type: Input }],
        afterConfirm: [{ type: Output }],
        dialogClosed: [{ type: Output }],
        clear: [{ type: Output }],
        lookUp: [{ type: ViewChild, args: ['lookup',] }]
    };
    return WfBizprocessLookupComponent;
}());
export { WfBizprocessLookupComponent };
if (false) {
    /**
     * 标题
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.title;
    /**
     * 宽度
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.width;
    /**
     * 取数源
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.sourceType;
    /**
     * 只读
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.disabled;
    /**
     * 是否单选
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.singleSelect;
    /**
     * 是否分页，默认true
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pagination;
    /**
     * 首次加载第几页，默认1
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pageIndex;
    /**
     * 每页加载数，默认20
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pageSize;
    /**
     * 绑定到帮助上的数据，初始显示值用
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.displayTxt;
    /**
     * 存储帮助选择的对象
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.bindingData;
    /**
     * 过滤条件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.filter;
    /**
     * 帮助选择后事件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.afterConfirm;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dialogClosed;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.clear;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dataUri;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.columns;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.lookUp;
    /**
     * 帮助前事件,强行传递过滤条件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.beforeOpen;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dictPicked;
    /**
     * @type {?}
     * @private
     */
    WfBizprocessLookupComponent.prototype.uiState;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YtYml6cHJvY2Vzcy1sb29rdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1iaXpwcm9jZXNzLWxvb2t1cC8iLCJzb3VyY2VzIjpbImxpYi93Zi1iaXpwcm9jZXNzLWxvb2t1cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFGLE9BQU8sRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEMsT0FBTyxFQUFnQixtQkFBbUIsRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN2RixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUNuRixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUVuRjtJQStERSxxQ0FDVSxPQUFrQztRQUQ1QyxpQkFFSztRQURLLFlBQU8sR0FBUCxPQUFPLENBQTJCOzs7O1FBL0JuQyxVQUFLLEdBQUcsR0FBRyxDQUFDOzs7O1FBRVosZUFBVSxHQUE2QixXQUFXLENBQUM7Ozs7UUFFbkQsYUFBUSxHQUFHLEtBQUssQ0FBQzs7OztRQUVqQixpQkFBWSxHQUFHLElBQUksQ0FBQzs7OztRQUVwQixlQUFVLEdBQUcsSUFBSSxDQUFDOzs7O1FBRWxCLGNBQVMsR0FBRyxDQUFDLENBQUM7Ozs7UUFFZCxhQUFRLEdBQUcsRUFBRSxDQUFDOzs7OztRQVViLGlCQUFZLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFDMUQsaUJBQVksR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUMxRCxVQUFLLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFN0QsWUFBTyxHQUFVLEVBQUUsQ0FBQzs7OztRQWtDcEIsZUFBVTs7OztRQUFHLFVBQUMsR0FBRztZQUNmLHNC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SUFFbkQsNkNBQXFCOzs7OztJQUlyQixtREFBb0U7O0lBQ3BFLG1EQUFvRTs7SUFDcEUsNENBQTZEOztJQUM3RCw4Q0FBZ0I7O0lBQ2hCLDhDQUFvQjs7SUFFcEIsNkNBQXdEOzs7OztJQWdDeEQsaURBYUM7O0lBQ0QsaURBR0M7Ozs7O0lBOUNDLDhDQUEwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBQaWNrZWRSZXN1bHQsIExvb2t1cEdyaWRDb21wb25lbnQsIFNlcnZlclNpZGVUb2tlbiB9IGZyb20gJ0BmYXJyaXMvdWktbG9va3VwJztcclxuaW1wb3J0IHsgV0ZCaXpQcm9jZXNzTG9va1VwVUlTdGF0ZSB9IGZyb20gJy4vc2VydmljZS93Zi1iaXpwcm9jZXNzLWxvb2t1cC51aXN0YXRlJztcclxuaW1wb3J0IHsgV0ZCaXpQcm9jZXNzTG9va1VwU2VydmljZSB9IGZyb20gJy4vc2VydmljZS93Zi1iaXpwcm9jZXNzLWxvb2t1cC5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnd2YtYml6cHJvY2Vzcy1sb29rdXAnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8ZmFycmlzLWxvb2t1cC1ncmlkICNsb29rdXBcclxuICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcclxuICAgICAgW2VkaXRhYmxlXT1cImZhbHNlXCJcclxuICAgICAgW2JpbmRpbmdEYXRhXT1cImJpbmRpbmdEYXRhXCJcclxuICAgICAgWyhuZ01vZGVsKV09XCJkaXNwbGF5VHh0XCJcclxuICAgICAgW2NvbHVtbnNdPVwiY29sdW1uc1wiXHJcbiAgICAgIFtzaW5nbGVTZWxlY3RdPVwic2luZ2xlU2VsZWN0XCJcclxuICAgICAgW3RpdGxlXT1cInRpdGxlXCJcclxuICAgICAgW2Rpc3BsYXlUeXBlXT1cIidMaXN0J1wiXHJcbiAgICAgIFt1cmldPVwiZGF0YVVyaVwiXHJcbiAgICAgIFtpZEZpZWxkXT1cIidpZCdcIlxyXG4gICAgICBbcGFnZUluZGV4XT1cInBhZ2VJbmRleFwiXHJcbiAgICAgIFtwYWdlU2l6ZV09XCJwYWdlU2l6ZVwiXHJcbiAgICAgIFtwYWdpbmF0aW9uXT1cInBhZ2luYXRpb25cIlxyXG4gICAgICBbdmFsdWVGaWVsZF09XCInaWQnXCJcclxuICAgICAgW3RleHRGaWVsZF09XCInbmFtZSdcIlxyXG4gICAgICAoY2xlYXIpPVwiYWZ0ZXJDbGVhcigkZXZlbnQpXCJcclxuICAgICAgW2RpYWxvZ1dpZHRoXT1cIndpZHRoXCJcclxuICAgICAgW2RpY3RQaWNraW5nXT1cImJlZm9yZU9wZW5cIlxyXG4gICAgICBbZGljdFBpY2tlZF09XCJkaWN0UGlja2VkXCI+XHJcbiAgICA8L2ZhcnJpcy1sb29rdXAtZ3JpZD5cclxuICBgLFxyXG4gIHN0eWxlczogW10sXHJcbiAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBTZXJ2ZXJTaWRlVG9rZW4sIHVzZUNsYXNzOiBXRkJpelByb2Nlc3NMb29rVXBTZXJ2aWNlIH1dXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBXZkJpenByb2Nlc3NMb29rdXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICAvKiog5qCH6aKYICovXHJcbiAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcclxuICAvKiog5a695bqmICovXHJcbiAgQElucHV0KCkgd2lkdGggPSA1NTA7XHJcbiAgLyoqIOWPluaVsOa6kCAqL1xyXG4gIEBJbnB1dCgpIHNvdXJjZVR5cGU6ICdydFByb2Nlc3MnIHwgJ2Zsb3dmb3JtJyA9ICdydFByb2Nlc3MnO1xyXG4gIC8qKiDlj6ror7sgKi9cclxuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIC8qKiDmmK/lkKbljZXpgIkgKi9cclxuICBASW5wdXQoKSBzaW5nbGVTZWxlY3QgPSB0cnVlO1xyXG4gIC8qKiDmmK/lkKbliIbpobXvvIzpu5jorqR0cnVlICovXHJcbiAgQElucHV0KCkgcGFnaW5hdGlvbiA9IHRydWU7XHJcbiAgLyoqIOmmluasoeWKoOi9veesrOWHoOmhte+8jOm7mOiupDEgKi9cclxuICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gIC8qKiDmr4/pobXliqDovb3mlbDvvIzpu5jorqQyMCAqL1xyXG4gIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgLyoqIOe7keWumuWIsOW4ruWKqeS4iueahOaVsOaNru+8jOWIneWni+aYvuekuuWAvOeUqCAqL1xyXG4gIEBJbnB1dCgpIGRpc3BsYXlUeHQ6IHN0cmluZztcclxuICAvKiog5a2Y5YKo5biu5Yqp6YCJ5oup55qE5a+56LGhICovXHJcbiAgQElucHV0KCkgYmluZGluZ0RhdGE6IHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH07XHJcbiAgLyoqIOi/h+a7pOadoeS7tiAqL1xyXG4gIEBJbnB1dCgpIGZpbHRlcjogYW55O1xyXG5cclxuICAvLyBASW5wdXQoKSBiZWZvcmVDbG9zZTogKHNlbGVjdERhdGE6IGFueSkgPT4gT2JzZXJ2YWJsZTxQaWNrZWRSZXN1bHQ+O1xyXG4gIC8qKiDluK7liqnpgInmi6nlkI7kuovku7YgKi9cclxuICBAT3V0cHV0KCkgYWZ0ZXJDb25maXJtOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBkaWFsb2dDbG9zZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGNsZWFyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIGRhdGFVcmk6IHN0cmluZztcclxuICBjb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG5cclxuICBAVmlld0NoaWxkKCdsb29rdXAnKSBwdWJsaWMgbG9va1VwOiBMb29rdXBHcmlkQ29tcG9uZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdWlTdGF0ZTogV0ZCaXpQcm9jZXNzTG9va1VwVUlTdGF0ZVxyXG4gICkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgc3dpdGNoICh0aGlzLnNvdXJjZVR5cGUpIHtcclxuICAgICAgY2FzZSAncnRQcm9jZXNzJzpcclxuICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXHJcbiAgICAgICAgICB7IHRpdGxlOiAnS2V55YC8JywgZmllbGQ6ICdpZCcsIHdpZHRoOiAnODAnLCBzZWFyY2hGaWVsZDogJ2lkJywgfSxcclxuICAgICAgICAgIHsgdGl0bGU6ICflkI3np7AnLCBmaWVsZDogJ25hbWUnLCB3aWR0aDogJzEwMCcsIHNlYXJjaEZpZWxkOiAnbmFtZScsIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMuZGF0YVVyaSA9IHRoaXMudWlTdGF0ZS5ydFByb2Nlc3NVcmk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Zsb3dmb3JtJzpcclxuICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXHJcbiAgICAgICAgICB7IHRpdGxlOiAn57yW5Y+3JywgZmllbGQ6ICdjb2RlJywgd2lkdGg6ICc4MCcsIHNlYXJjaEZpZWxkOiAnY29kZScsIH0sXHJcbiAgICAgICAgICB7IHRpdGxlOiAn5ZCN56ewJywgZmllbGQ6ICduYW1lJywgd2lkdGg6ICcxMDAnLCBzZWFyY2hGaWVsZDogJ25hbWUnLCB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmRhdGFVcmkgPSB0aGlzLnVpU3RhdGUuZmxvd0Zvcm1Vcmk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZnRlckNsZWFyKGFyZzogYW55KSB7XHJcbiAgICB0aGlzLmNsZWFyLm5leHQoYXJnKTtcclxuICB9XHJcblxyXG4gIC8qKiDluK7liqnliY3kuovku7Ys5by66KGM5Lyg6YCS6L+H5ruk5p2h5Lu2ICovXHJcbiAgYmVmb3JlT3BlbiA9IChhcmcpID0+IHtcclxuICAgIC8vIGlmICghdGhpcy5maWx0ZXIpIHtcclxuICAgIC8vICAgLy8g5Y+v6IO96LCD55So5pa55LiN5Lyg6YCS77yM6K+G5Yir5Li66Z2e56m6XHJcbiAgICAvLyAgIHRoaXMuZmlsdGVyID0ge307XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0aGlzLmZpbHRlci5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgIC8vIHRoaXMuZmlsdGVyLnBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZTtcclxuICAgIC8vIOaKiui/h+a7pOaVsOaNruWSjOW9k+WJjeeahOaVsOaNruS8oOmAkuWIsHNlcnZpY2XlsYJcclxuICAgIHJldHVybiBvZih7XHJcbiAgICAgIHNob3dEaWFsb2c6IHRydWUsIGRhdGE6IHtcclxuICAgICAgICBmaWx0ZXI6IHRoaXMuZmlsdGVyXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBkaWN0UGlja2VkID0gKGFyZzogYW55KTogT2JzZXJ2YWJsZTxQaWNrZWRSZXN1bHQ+ID0+IHtcclxuICAgIHRoaXMuYWZ0ZXJDb25maXJtLm5leHQoYXJnKTtcclxuICAgIHJldHVybiBvZih7IGNsb3NlRGlhbG9nOiB0cnVlIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKiDmiYvliqjmmL7npLrluK7liqkgKi9cclxuICBwdWJsaWMgc2hvd0hlbHAoKSB7XHJcbiAgICB0aGlzLmxvb2tVcC5zaG93RGlhbG9nKCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==