!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@angular/common/http"),require("@farris/ui-lookup"),require("@farris/ui-modal"),require("@farris/ui-messager"),require("@ecp-caf/caf-common")):"function"==typeof define&&define.amd?define("@gsp-wf/wf-bizprocess-lookup",["exports","rxjs","rxjs/operators","@angular/core","@angular/common","@angular/forms","@angular/common/http","@farris/ui-lookup","@farris/ui-modal","@farris/ui-messager","@ecp-caf/caf-common"],t):t((e["gsp-wf"]=e["gsp-wf"]||{},e["gsp-wf"]["wf-bizprocess-lookup"]={}),e.rxjs,e.rxjs.operators,e.ng.core,e.ng.common,e.ng.forms,e.ng.common.http,e.uiLookup,e.uiModal,e.uiMessager,e.cafCommon)}(this,function(e,r,h,o,t,i,n,a,s,p,l){"use strict";var u=(c.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],c.ctorParameters=function(){return[]},c.ngInjectableDef=o.defineInjectable({factory:function(){return new c},token:c,providedIn:"root"}),c);function c(){}var d=(f.decorators=[{type:o.Injectable}],f.ctorParameters=function(){return[]},f);function f(){this.rtProcessUri="/api/runtime/wf/v1.0/procDefs/processDefinitionKeys/query",this.flowFormUri="/api/runtime/wf/v1.0/flowForm/query"}var g=(m.prototype.getData=function(e,t){var r,o,i=t.customData,n=t.pageIndex||1,a=t.pageSize||20,s=JSON.parse(t.searchValue);if(s.searchValue||i.filter){var p="?param=",l="{";if(s.searchValue&&("*"===s.searchField?l+='"allColumns":"'+s.searchValue+'",':l+='"'+s.searchField+'":"'+s.searchValue+'",'),i.filter){var u=Object.keys(i.filter);if(u&&0<u.length)try{for(var c=function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),d=c.next();!d.done;d=c.next()){var f=d.value;i.filter[f]&&(l+='"'+f+'":"'+i.filter[f]+'",')}}catch(m){r={error:m}}finally{try{d&&!d.done&&(o=c["return"])&&o.call(c)}finally{if(r)throw r.error}}}","===l.substr(l.length-1,1)&&(l=l.substring(0,l.length-1)),l+="}",e+=p+=(l=encodeURIComponent(l))+"&pageNum="+n+"&pageSize="+a}else e+="?pageNum="+n+"&pageSize="+a;return this.http.get(e).pipe(h.map(function(e){return{items:e.content,total:e.totalElements,pageInfo:{pageIndex:e.pageable.pageNumber+1,pageSize:e.pageable.pageSize,pageList:[20,40,60,80,100],enablePager:!0}}}))},m.decorators=[{type:o.Injectable}],m.ctorParameters=function(){return[{type:l.HttpService}]},m);function m(e){this.http=e}var y=(b.prototype.ngOnInit=function(){switch(this.sourceType){case"rtProcess":this.columns=[{title:"Key值",field:"id",width:"80",searchField:"id"},{title:"名称",field:"name",width:"100",searchField:"name"}],this.dataUri=this.uiState.rtProcessUri;break;case"flowform":this.columns=[{title:"编号",field:"code",width:"80",searchField:"code"},{title:"名称",field:"name",width:"100",searchField:"name"}],this.dataUri=this.uiState.flowFormUri}},b.prototype.afterClear=function(e){this.clear.next(e)},b.prototype.showHelp=function(){this.lookUp.showDialog()},b.decorators=[{type:o.Component,args:[{selector:"wf-bizprocess-lookup",template:'\n    <farris-lookup-grid #lookup\n      [disabled]="disabled"\n      [editable]="false"\n      [bindingData]="bindingData"\n      [(ngModel)]="displayTxt"\n      [columns]="columns"\n      [singleSelect]="singleSelect"\n      [title]="title"\n      [displayType]="\'List\'"\n      [uri]="dataUri"\n      [idField]="\'id\'"\n      [pageIndex]="pageIndex"\n      [pageSize]="pageSize"\n      [pagination]="pagination"\n      [valueField]="\'id\'"\n      [textField]="\'name\'"\n      (clear)="afterClear($event)"\n      [dialogWidth]="width"\n      [dictPicking]="beforeOpen"\n      [dictPicked]="dictPicked">\n    </farris-lookup-grid>\n  ',providers:[{provide:a.ServerSideToken,useClass:g}]}]}],b.ctorParameters=function(){return[{type:d}]},b.propDecorators={title:[{type:o.Input}],width:[{type:o.Input}],sourceType:[{type:o.Input}],disabled:[{type:o.Input}],singleSelect:[{type:o.Input}],pagination:[{type:o.Input}],pageIndex:[{type:o.Input}],pageSize:[{type:o.Input}],displayTxt:[{type:o.Input}],bindingData:[{type:o.Input}],filter:[{type:o.Input}],afterConfirm:[{type:o.Output}],dialogClosed:[{type:o.Output}],clear:[{type:o.Output}],lookUp:[{type:o.ViewChild,args:["lookup"]}]},b);function b(e){var t=this;this.uiState=e,this.width=550,this.sourceType="rtProcess",this.disabled=!1,this.singleSelect=!0,this.pagination=!0,this.pageIndex=1,this.pageSize=20,this.afterConfirm=new o.EventEmitter,this.dialogClosed=new o.EventEmitter,this.clear=new o.EventEmitter,this.columns=[],this.beforeOpen=function(e){return r.of({showDialog:!0,data:{filter:t.filter}})},this.dictPicked=function(e){return t.afterConfirm.next(e),r.of({closeDialog:!0})}}var v=(w.decorators=[{type:o.NgModule,args:[{declarations:[y],imports:[t.CommonModule,i.FormsModule,n.HttpClientModule,a.LookupModule,s.ModalModule.forRoot(),p.MessagerModule.forRoot()],providers:[l.HttpService,d],exports:[y]}]}],w);function w(){}e.WfBizprocessLookupService=u,e.WfBizprocessLookupComponent=y,e.WfBizprocessLookupModule=v,e.WFBizProcessLookUpService=g,e.WFBizProcessLookUpUIState=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-wf-wf-bizprocess-lookup.umd.min.js.map