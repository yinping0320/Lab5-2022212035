/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { of } from 'rxjs';
import { LookupGridComponent, ServerSideToken } from '@farris/ui-lookup';
import { WFBizProcessLookUpUIState } from './service/wf-bizprocess-lookup.uistate';
import { WFBizProcessLookUpService } from './service/wf-bizprocess-lookup.service';
export class WfBizprocessLookupComponent {
    /**
     * @param {?} uiState
     */
    constructor(uiState) {
        this.uiState = uiState;
        /**
         * 宽度
         */
        this.width = 550;
        /**
         * 取数源
         */
        this.sourceType = 'rtProcess';
        /**
         * 只读
         */
        this.disabled = false;
        /**
         * 是否单选
         */
        this.singleSelect = true;
        /**
         * 是否分页，默认true
         */
        this.pagination = true;
        /**
         * 首次加载第几页，默认1
         */
        this.pageIndex = 1;
        /**
         * 每页加载数，默认20
         */
        this.pageSize = 20;
        // @Input() beforeClose: (selectData: any) => Observable<PickedResult>;
        /**
         * 帮助选择后事件
         */
        this.afterConfirm = new EventEmitter();
        this.dialogClosed = new EventEmitter();
        this.clear = new EventEmitter();
        this.columns = [];
        /**
         * 帮助前事件,强行传递过滤条件
         */
        this.beforeOpen = (/**
         * @param {?} arg
         * @return {?}
         */
        (arg) => {
            // if (!this.filter) {
            //   // 可能调用方不传递，识别为非空
            //   this.filter = {};
            // }
            // this.filter.pageIndex = this.pageIndex;
            // this.filter.pageSize = this.pageSize;
            // 把过滤数据和当前的数据传递到service层
            return of({
                showDialog: true, data: {
                    filter: this.filter
                }
            });
        });
        this.dictPicked = (/**
         * @param {?} arg
         * @return {?}
         */
        (arg) => {
            this.afterConfirm.next(arg);
            return of({ closeDialog: true });
        });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        switch (this.sourceType) {
            case 'rtProcess':
                this.columns = [
                    { title: 'Key值', field: 'id', width: '80', searchField: 'id', },
                    { title: '名称', field: 'name', width: '100', searchField: 'name', }
                ];
                this.dataUri = this.uiState.rtProcessUri;
                break;
            case 'flowform':
                this.columns = [
                    { title: '编号', field: 'code', width: '80', searchField: 'code', },
                    { title: '名称', field: 'name', width: '100', searchField: 'name', }
                ];
                this.dataUri = this.uiState.flowFormUri;
                break;
            default:
                break;
        }
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    afterClear(arg) {
        this.clear.next(arg);
    }
    /**
     * 手动显示帮助
     * @return {?}
     */
    showHelp() {
        this.lookUp.showDialog();
    }
}
WfBizprocessLookupComponent.decorators = [
    { type: Component, args: [{
                selector: 'wf-bizprocess-lookup',
                template: `
    <farris-lookup-grid #lookup
      [disabled]="disabled"
      [editable]="false"
      [bindingData]="bindingData"
      [(ngModel)]="displayTxt"
      [columns]="columns"
      [singleSelect]="singleSelect"
      [title]="title"
      [displayType]="'List'"
      [uri]="dataUri"
      [idField]="'id'"
      [pageIndex]="pageIndex"
      [pageSize]="pageSize"
      [pagination]="pagination"
      [valueField]="'id'"
      [textField]="'name'"
      (clear)="afterClear($event)"
      [dialogWidth]="width"
      [dictPicking]="beforeOpen"
      [dictPicked]="dictPicked">
    </farris-lookup-grid>
  `,
                providers: [{ provide: ServerSideToken, useClass: WFBizProcessLookUpService }]
            }] }
];
/** @nocollapse */
WfBizprocessLookupComponent.ctorParameters = () => [
    { type: WFBizProcessLookUpUIState }
];
WfBizprocessLookupComponent.propDecorators = {
    title: [{ type: Input }],
    width: [{ type: Input }],
    sourceType: [{ type: Input }],
    disabled: [{ type: Input }],
    singleSelect: [{ type: Input }],
    pagination: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    displayTxt: [{ type: Input }],
    bindingData: [{ type: Input }],
    filter: [{ type: Input }],
    afterConfirm: [{ type: Output }],
    dialogClosed: [{ type: Output }],
    clear: [{ type: Output }],
    lookUp: [{ type: ViewChild, args: ['lookup',] }]
};
if (false) {
    /**
     * 标题
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.title;
    /**
     * 宽度
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.width;
    /**
     * 取数源
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.sourceType;
    /**
     * 只读
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.disabled;
    /**
     * 是否单选
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.singleSelect;
    /**
     * 是否分页，默认true
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pagination;
    /**
     * 首次加载第几页，默认1
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pageIndex;
    /**
     * 每页加载数，默认20
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.pageSize;
    /**
     * 绑定到帮助上的数据，初始显示值用
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.displayTxt;
    /**
     * 存储帮助选择的对象
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.bindingData;
    /**
     * 过滤条件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.filter;
    /**
     * 帮助选择后事件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.afterConfirm;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dialogClosed;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.clear;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dataUri;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.columns;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.lookUp;
    /**
     * 帮助前事件,强行传递过滤条件
     * @type {?}
     */
    WfBizprocessLookupComponent.prototype.beforeOpen;
    /** @type {?} */
    WfBizprocessLookupComponent.prototype.dictPicked;
    /**
     * @type {?}
     * @private
     */
    WfBizprocessLookupComponent.prototype.uiState;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YtYml6cHJvY2Vzcy1sb29rdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1iaXpwcm9jZXNzLWxvb2t1cC8iLCJzb3VyY2VzIjpbImxpYi93Zi1iaXpwcm9jZXNzLWxvb2t1cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFGLE9BQU8sRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEMsT0FBTyxFQUFnQixtQkFBbUIsRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN2RixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUNuRixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQThCbkYsTUFBTSxPQUFPLDJCQUEyQjs7OztJQW1DdEMsWUFDVSxPQUFrQztRQUFsQyxZQUFPLEdBQVAsT0FBTyxDQUEyQjs7OztRQS9CbkMsVUFBSyxHQUFHLEdBQUcsQ0FBQzs7OztRQUVaLGVBQVUsR0FBNkIsV0FBVyxDQUFDOzs7O1FBRW5ELGFBQVEsR0FBRyxLQUFLLENBQUM7Ozs7UUFFakIsaUJBQVksR0FBRyxJQUFJLENBQUM7Ozs7UUFFcEIsZUFBVSxHQUFHLElBQUksQ0FBQzs7OztRQUVsQixjQUFTLEdBQUcsQ0FBQyxDQUFDOzs7O1FBRWQsYUFBUSxHQUFHLEVBQUUsQ0FBQzs7Ozs7UUFVYixpQkFBWSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzFELGlCQUFZLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFDMUQsVUFBSyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTdELFlBQU8sR0FBVSxFQUFFLENBQUM7Ozs7UUFrQ3BCLGVBQVU7Ozs7UUFBRyxDQUFDLEdB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OztJQUNwRSxtREFBb0U7O0lBQ3BFLDRDQUE2RDs7SUFDN0QsOENBQWdCOztJQUNoQiw4Q0FBb0I7O0lBRXBCLDZDQUF3RDs7Ozs7SUFnQ3hELGlEQWFDOztJQUNELGlEQUdDOzs7OztJQTlDQyw4Q0FBMEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgUGlja2VkUmVzdWx0LCBMb29rdXBHcmlkQ29tcG9uZW50LCBTZXJ2ZXJTaWRlVG9rZW4gfSBmcm9tICdAZmFycmlzL3VpLWxvb2t1cCc7XHJcbmltcG9ydCB7IFdGQml6UHJvY2Vzc0xvb2tVcFVJU3RhdGUgfSBmcm9tICcuL3NlcnZpY2Uvd2YtYml6cHJvY2Vzcy1sb29rdXAudWlzdGF0ZSc7XHJcbmltcG9ydCB7IFdGQml6UHJvY2Vzc0xvb2tVcFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2Uvd2YtYml6cHJvY2Vzcy1sb29rdXAuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3dmLWJpenByb2Nlc3MtbG9va3VwJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGZhcnJpcy1sb29rdXAtZ3JpZCAjbG9va3VwXHJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgIFtlZGl0YWJsZV09XCJmYWxzZVwiXHJcbiAgICAgIFtiaW5kaW5nRGF0YV09XCJiaW5kaW5nRGF0YVwiXHJcbiAgICAgIFsobmdNb2RlbCldPVwiZGlzcGxheVR4dFwiXHJcbiAgICAgIFtjb2x1bW5zXT1cImNvbHVtbnNcIlxyXG4gICAgICBbc2luZ2xlU2VsZWN0XT1cInNpbmdsZVNlbGVjdFwiXHJcbiAgICAgIFt0aXRsZV09XCJ0aXRsZVwiXHJcbiAgICAgIFtkaXNwbGF5VHlwZV09XCInTGlzdCdcIlxyXG4gICAgICBbdXJpXT1cImRhdGFVcmlcIlxyXG4gICAgICBbaWRGaWVsZF09XCInaWQnXCJcclxuICAgICAgW3BhZ2VJbmRleF09XCJwYWdlSW5kZXhcIlxyXG4gICAgICBbcGFnZVNpemVdPVwicGFnZVNpemVcIlxyXG4gICAgICBbcGFnaW5hdGlvbl09XCJwYWdpbmF0aW9uXCJcclxuICAgICAgW3ZhbHVlRmllbGRdPVwiJ2lkJ1wiXHJcbiAgICAgIFt0ZXh0RmllbGRdPVwiJ25hbWUnXCJcclxuICAgICAgKGNsZWFyKT1cImFmdGVyQ2xlYXIoJGV2ZW50KVwiXHJcbiAgICAgIFtkaWFsb2dXaWR0aF09XCJ3aWR0aFwiXHJcbiAgICAgIFtkaWN0UGlja2luZ109XCJiZWZvcmVPcGVuXCJcclxuICAgICAgW2RpY3RQaWNrZWRdPVwiZGljdFBpY2tlZFwiPlxyXG4gICAgPC9mYXJyaXMtbG9va3VwLWdyaWQ+XHJcbiAgYCxcclxuICBzdHlsZXM6IFtdLFxyXG4gIHByb3ZpZGVyczogW3sgcHJvdmlkZTogU2VydmVyU2lkZVRva2VuLCB1c2VDbGFzczogV0ZCaXpQcm9jZXNzTG9va1VwU2VydmljZSB9XVxyXG59KVxyXG5leHBvcnQgY2xhc3MgV2ZCaXpwcm9jZXNzTG9va3VwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgLyoqIOagh+mimCAqL1xyXG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmc7XHJcbiAgLyoqIOWuveW6piAqL1xyXG4gIEBJbnB1dCgpIHdpZHRoID0gNTUwO1xyXG4gIC8qKiDlj5bmlbDmupAgKi9cclxuICBASW5wdXQoKSBzb3VyY2VUeXBlOiAncnRQcm9jZXNzJyB8ICdmbG93Zm9ybScgPSAncnRQcm9jZXNzJztcclxuICAvKiog5Y+q6K+7ICovXHJcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAvKiog5piv5ZCm5Y2V6YCJICovXHJcbiAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAvKiog5piv5ZCm5YiG6aG177yM6buY6K6kdHJ1ZSAqL1xyXG4gIEBJbnB1dCgpIHBhZ2luYXRpb24gPSB0cnVlO1xyXG4gIC8qKiDpppbmrKHliqDovb3nrKzlh6DpobXvvIzpu5jorqQxICovXHJcbiAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAvKiog5q+P6aG15Yqg6L295pWw77yM6buY6K6kMjAgKi9cclxuICBASW5wdXQoKSBwYWdlU2l6ZSA9IDIwO1xyXG4gIC8qKiDnu5HlrprliLDluK7liqnkuIrnmoTmlbDmja7vvIzliJ3lp4vmmL7npLrlgLznlKggKi9cclxuICBASW5wdXQoKSBkaXNwbGF5VHh0OiBzdHJpbmc7XHJcbiAgLyoqIOWtmOWCqOW4ruWKqemAieaLqeeahOWvueixoSAqL1xyXG4gIEBJbnB1dCgpIGJpbmRpbmdEYXRhOiB7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9O1xyXG4gIC8qKiDov4fmu6TmnaHku7YgKi9cclxuICBASW5wdXQoKSBmaWx0ZXI6IGFueTtcclxuXHJcbiAgLy8gQElucHV0KCkgYmVmb3JlQ2xvc2U6IChzZWxlY3REYXRhOiBhbnkpID0+IE9ic2VydmFibGU8UGlja2VkUmVzdWx0PjtcclxuICAvKiog5biu5Yqp6YCJ5oup5ZCO5LqL5Lu2ICovXHJcbiAgQE91dHB1dCgpIGFmdGVyQ29uZmlybTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgZGlhbG9nQ2xvc2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBjbGVhcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBkYXRhVXJpOiBzdHJpbmc7XHJcbiAgY29sdW1uczogYW55W10gPSBbXTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnbG9va3VwJykgcHVibGljIGxvb2tVcDogTG9va3VwR3JpZENvbXBvbmVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHVpU3RhdGU6IFdGQml6UHJvY2Vzc0xvb2tVcFVJU3RhdGVcclxuICApIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHN3aXRjaCAodGhpcy5zb3VyY2VUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ3J0UHJvY2Vzcyc6XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gW1xyXG4gICAgICAgICAgeyB0aXRsZTogJ0tleeWAvCcsIGZpZWxkOiAnaWQnLCB3aWR0aDogJzgwJywgc2VhcmNoRmllbGQ6ICdpZCcsIH0sXHJcbiAgICAgICAgICB7IHRpdGxlOiAn5ZCN56ewJywgZmllbGQ6ICduYW1lJywgd2lkdGg6ICcxMDAnLCBzZWFyY2hGaWVsZDogJ25hbWUnLCB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmRhdGFVcmkgPSB0aGlzLnVpU3RhdGUucnRQcm9jZXNzVXJpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmbG93Zm9ybSc6XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gW1xyXG4gICAgICAgICAgeyB0aXRsZTogJ+e8luWPtycsIGZpZWxkOiAnY29kZScsIHdpZHRoOiAnODAnLCBzZWFyY2hGaWVsZDogJ2NvZGUnLCB9LFxyXG4gICAgICAgICAgeyB0aXRsZTogJ+WQjeensCcsIGZpZWxkOiAnbmFtZScsIHdpZHRoOiAnMTAwJywgc2VhcmNoRmllbGQ6ICduYW1lJywgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdGhpcy5kYXRhVXJpID0gdGhpcy51aVN0YXRlLmZsb3dGb3JtVXJpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWZ0ZXJDbGVhcihhcmc6IGFueSkge1xyXG4gICAgdGhpcy5jbGVhci5uZXh0KGFyZyk7XHJcbiAgfVxyXG5cclxuICAvKiog5biu5Yqp5YmN5LqL5Lu2LOW8uuihjOS8oOmAkui/h+a7pOadoeS7tiAqL1xyXG4gIGJlZm9yZU9wZW4gPSAoYXJnKSA9PiB7XHJcbiAgICAvLyBpZiAoIXRoaXMuZmlsdGVyKSB7XHJcbiAgICAvLyAgIC8vIOWPr+iDveiwg+eUqOaWueS4jeS8oOmAku+8jOivhuWIq+S4uumdnuepulxyXG4gICAgLy8gICB0aGlzLmZpbHRlciA9IHt9O1xyXG4gICAgLy8gfVxyXG4gICAgLy8gdGhpcy5maWx0ZXIucGFnZUluZGV4ID0gdGhpcy5wYWdlSW5kZXg7XHJcbiAgICAvLyB0aGlzLmZpbHRlci5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemU7XHJcbiAgICAvLyDmiorov4fmu6TmlbDmja7lkozlvZPliY3nmoTmlbDmja7kvKDpgJLliLBzZXJ2aWNl5bGCXHJcbiAgICByZXR1cm4gb2Yoe1xyXG4gICAgICBzaG93RGlhbG9nOiB0cnVlLCBkYXRhOiB7XHJcbiAgICAgICAgZmlsdGVyOiB0aGlzLmZpbHRlclxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZGljdFBpY2tlZCA9IChhcmc6IGFueSk6IE9ic2VydmFibGU8UGlja2VkUmVzdWx0PiA9PiB7XHJcbiAgICB0aGlzLmFmdGVyQ29uZmlybS5uZXh0KGFyZyk7XHJcbiAgICByZXR1cm4gb2YoeyBjbG9zZURpYWxvZzogdHJ1ZSB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKiog5omL5Yqo5pi+56S65biu5YqpICovXHJcbiAgcHVibGljIHNob3dIZWxwKCkge1xyXG4gICAgdGhpcy5sb29rVXAuc2hvd0RpYWxvZygpO1xyXG4gIH1cclxufVxyXG4iXX0=