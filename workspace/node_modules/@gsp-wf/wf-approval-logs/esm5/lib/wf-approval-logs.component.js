/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, ViewChild, TemplateRef } from '@angular/core';
var WfApprovalLogsComponent = /** @class */ (function () {
    function WfApprovalLogsComponent() {
        // 流程实例id
        this.ifForecast = false; // 是否预测日志
        //查看日志类型
        this.cls = ''; // 弹框显示时，增加样式
        // 弹框显示时，增加样式
        this.ShowHeader = false; //是否显示日志头部
        //是否显示日志头部
        this.ShowViewProcess = false; //是否显示查看流程按钮
        //是否显示查看流程按钮
        this.OnlyIncludeCurrentProcInst = false; //是否只包含当前流程的日志
        //是否只包含当前流程的日志
        this.IncludeAdminOperate = false; //是否显示操作日志
        //是否显示操作日志
        this.IncludeHistory = false; //是否包含历史日志
    }
    Object.defineProperty(WfApprovalLogsComponent.prototype, "DataId", {
        set: 
        //日志容器
        /**
         * @param {?} dataId
         * @return {?}
         */
        function (dataId) {
            if (dataId) {
                this.dataId = dataId;
                this.dataIdSubStr = dataId.substring(0, 5);
                this.getTaskLogs();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfApprovalLogsComponent.prototype, "ProcInstId", {
        set: /**
         * @param {?} procInstId
         * @return {?}
         */
        function (procInstId) {
            if (procInstId) {
                this.procInstId = procInstId;
                this.getTaskLogs();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfApprovalLogsComponent.prototype, "ActivityDefinitionId", {
        set: /**
         * @param {?} actDefId
         * @return {?}
         */
        function (actDefId) {
            if (actDefId) {
                this.getTaskLogs(actDefId);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfApprovalLogsComponent.prototype, "IfForecast", {
        set: /**
         * @param {?} ifForecast
         * @return {?}
         */
        function (ifForecast) {
            if (ifForecast) {
                this.ifForecast = ifForecast == 'true' ? true : false;
                this.getTaskLogs();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfApprovalLogsComponent.prototype, "Type", {
        set: /**
         * @param {?} type
         * @return {?}
         */
        function (type) {
            if ((type == 'process' || type == 'activity') && this.type != type) {
                this.type = type;
                if (type === 'process') { // type = 'process'查看流程日志；type = 'activity'，查看节点日志 sequence，转移线
                    this.getTaskLogs();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfApprovalLogsComponent.prototype, "processForecastPayload", {
        set: /**
         * @param {?} payload
         * @return {?}
         */
        function (payload) {
            if (payload) {
                this.ifForecast = true;
                this.getTaskLogs('', payload);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    WfApprovalLogsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.getTaskLogs();
    };
    /**
     * @return {?}
     */
    WfApprovalLogsComponent.prototype.fill = /**
     * @return {?}
     */
    function () {
        this.cls = 'd-flex flex-fill h-100 f-utils-absolute-all px-4 py-3';
    };
    /**
     * @private
     * @param {?=} actDefId
     * @param {?=} wfForecastPayload
     * @return {?}
     */
    WfApprovalLogsComponent.prototype.getTaskLogs = /**
     * @private
     * @param {?=} actDefId
     * @param {?=} wfForecastPayload
     * @return {?}
     */
    function (actDefId, wfForecastPayload) {
        var _this = this;
        if (this.dataId || this.procInstId || wfForecastPayload) {
            System.import('/platform/runtime/wf/webapp/mobiletaskcenter/taskComment.js' + '?v=20230602').then((/**
             * @return {?}
             */
            function () {
                if (_this.dataId) {
                    _this.logContainer = window.document.querySelector('.dataId' + _this.dataIdSubStr);
                }
                else {
                    _this.logContainer = window.document.querySelector('.procInstId' + _this.procInstId);
                }
                /** @type {?} */
                var payload = {
                    bizInstId: _this.dataId,
                    processInstanceId: _this.procInstId,
                    activityDefinitionId: actDefId,
                    container: _this.logContainer,
                    terminal: 'web',
                    typeId: 'wf',
                    ifForecast: _this.ifForecast,
                    showHeader: _this.ShowHeader,
                    showViewProcess: _this.ShowViewProcess,
                    wfForecastPayload: wfForecastPayload,
                    onlyIncludeCurrentProcInst: _this.OnlyIncludeCurrentProcInst,
                    isIncludeHistory: _this.IncludeHistory,
                    includeRetrieve: _this.IncludeAdminOperate,
                    includeAdminOperate: _this.IncludeAdminOperate,
                };
                if (_this.Style && _this.Style == 'datagrid') { //表格版
                    ((/** @type {?} */ (window))).gspTaskCenterBizLog.ApprovalLogUtil.getWebHtml(payload).then((/**
                     * @param {?} result
                     * @return {?}
                     */
                    function (result) { }));
                }
                else { //卡片版
                    ((/** @type {?} */ (window))).gspTaskCenterBizLog.ApprovalLogUtil.getWebLogsHtml(payload).then((/**
                     * @param {?} result
                     * @return {?}
                     */
                    function (result) { }));
                }
            }));
        }
    };
    /**
     * 是否显示操作日志
     */
    /**
     * 是否显示操作日志
     * @return {?}
     */
    WfApprovalLogsComponent.prototype.ifShowOperateLogChange = /**
     * 是否显示操作日志
     * @return {?}
     */
    function () {
        this.getTaskLogs();
    };
    /**
    * 国际化
    */
    /**
     * 国际化
     * @param {?} code
     * @return {?}
     */
    WfApprovalLogsComponent.prototype.i18nTranslate = /**
     * 国际化
     * @param {?} code
     * @return {?}
     */
    function (code) {
        /** @type {?} */
        var result;
        /** @type {?} */
        var supportLanguage = ["zh-CHS", "zh-CHT", "en"];
        /** @type {?} */
        var curLanguage = localStorage.getItem("languageCode");
        /** @type {?} */
        var translate = {
            "zh-CHS": {
                showOperateLog: "显示操作日志"
            },
            "zh-CHT": {
                showOperateLog: "顯示操作日誌"
            },
            en: {
                showOperateLog: "Show operate log"
            },
        };
        if (curLanguage && supportLanguage.indexOf(curLanguage) > -1) {
            result = translate[curLanguage][code];
        }
        else {
            result = translate["zh-CHS"][code];
        }
        return result;
    };
    WfApprovalLogsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-approval-logs',
                    template: "<div\r\n  [class]=\"dataId ? 'dataId' + dataIdSubStr : 'procInstId' + procInstId\"\r\n  style=\"width: 100%; height: 100%; overflow: auto\"\r\n></div>\r\n\r\n<ng-template #taskDialogFooter>\r\n  <div style=\"display: flex; flex-grow: 1\">\r\n    <div class=\"custom-control custom-checkbox custom-control-inline\">\r\n      <input\r\n        type=\"checkbox\"\r\n        class=\"custom-control-input\"\r\n        [(ngModel)]=\"IncludeAdminOperate\"\r\n        (ngModelChange)=\"ifShowOperateLogChange()\"\r\n        id=\"taskShowOperateLog\"\r\n        name=\"taskShowOperateLog\"\r\n      />\r\n      <label class=\"custom-control-label\" for=\"taskShowOperateLog\">\r\n        {{ i18nTranslate(\"showOperateLog\") }}\r\n      </label>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n",
                    styles: [".approval-log-background{width:100%;background:#f9f9f9;padding:16px 14px;border-radius:4px}.log-activity-name{font-size:14px}.receive-time{font-size:12px;-moz-columns:#565656;columns:#565656;padding-left:40px;white-space:nowrap;color:#a1a1a1}.log-creator-name{font-size:14px;color:#4297fa;text-align:left}.log-action-name-do{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#59a1ff;white-space:nowrap;float:right}.log-action-name-todo{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#f59c24;white-space:nowrap;float:right}.log-action-name-undo{font-size:12px;color:#fff;margin-left:40px;margin-right:16px;border-radius:10px;padding:2px 8px;background:#5ac1c3;white-space:nowrap;float:right}.work-item-state-done{font-size:13px;border-radius:2px;padding:0 10px;background:#f6faff;margin-left:20px;color:#5f637a;border:1px solid #e6e6e6}.timeline-item{position:relative;padding:0 0 14px 10px;margin:0;font-size:14px;list-style:none}.timeline-item-tail{position:absolute;top:.75em;left:7px;height:100%;border-left:2px dashed #e8e8e8}.timeline-item-head-blue{position:absolute;width:16px;height:16px;background-color:#388fff;border:4px solid #bdd9ff;border-radius:100px;left:0;top:10px}.timeline-item-head-green{position:absolute;width:16px;height:16px;background-color:#5ac1c3;border:4px solid #7fffd4;border-radius:100px;left:0;top:10px}.timeline-item-head-yellow{position:absolute;width:16px;height:16px;background-color:#f59c24;border:4px solid #fbd7a7;border-radius:100px;left:0;top:10px}.timeline-item-content{position:relative;top:-6px;margin:0 0 0 18px}.user-avatar{height:30px;width:30px;border-radius:50%}li{list-style:none}.wf-docFile{flex-shrink:1;flex-grow:1;flex-basis:0;display:flex;flex-direction:row;align-items:flex-start;border-top:1px solid #f8f9fa;border-left:1px solid #f8f9fa}.wf-docFileIcon{width:20px;height:20px;line-height:20px;text-align:center;overflow:hidden;white-space:nowrap;padding:2px}.wf-docFileInfo{flex-shrink:1;flex-grow:1;flex-basis:0;padding:2px 6px 0 0;margin-left:0}.wf-docFileSize{font-size:11px;color:#888}.wf-doc-delete{margin:auto;font-size:18px;color:#f8f9fa}.attachment-delete:hover{color:#4297fa}.approval-log-message{font-size:14px;padding:10px 0 10px 40px}.approval-log-signature{padding-left:40px;display:flex;justify-content:flex-end}.approval-log-user-name{display:flex;align-items:center;justify-content:space-between;padding-top:14px}.log-attachment-array{padding-top:10px;padding-left:40px}.log-attachment-file-name{font-size:12px;color:#4297fa;float:left;cursor:pointer;margin-left:5px}"]
                }] }
    ];
    /** @nocollapse */
    WfApprovalLogsComponent.ctorParameters = function () { return []; };
    WfApprovalLogsComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        ShowHeader: [{ type: Input }],
        ShowViewProcess: [{ type: Input }],
        OnlyIncludeCurrentProcInst: [{ type: Input }],
        IncludeAdminOperate: [{ type: Input }],
        IncludeHistory: [{ type: Input }],
        taskDialogFooter: [{ type: ViewChild, args: ['taskDialogFooter',] }],
        DataId: [{ type: Input }],
        ProcInstId: [{ type: Input }],
        ActivityDefinitionId: [{ type: Input }],
        IfForecast: [{ type: Input }],
        Type: [{ type: Input }],
        processForecastPayload: [{ type: Input }],
        Style: [{ type: Input }]
    };
    return WfApprovalLogsComponent;
}());
export { WfApprovalLogsComponent };
if (false) {
    /** @type {?} */
    WfApprovalLogsComponent.prototype.dataId;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.dataIdSubStr;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.procInstId;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.ifForecast;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.type;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.cls;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.ShowHeader;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.ShowViewProcess;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.OnlyIncludeCurrentProcInst;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.IncludeAdminOperate;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.IncludeHistory;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.taskDialogFooter;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.logContainer;
    /** @type {?} */
    WfApprovalLogsComponent.prototype.Style;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YtYXBwcm92YWwtbG9ncy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLWFwcHJvdmFsLWxvZ3MvIiwic291cmNlcyI6WyJsaWIvd2YtYXBwcm92YWwtbG9ncy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSTlGO0lBMkVFOztRQWpFQSxlQUFVLEdBQVksS0FBSyxDQUFDLENBQUMsU0FBUzs7UUFFaEIsUUFBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLGFBQWE7O1FBRXBDLGVBQVUsR0FBWSxLQUFLLENBQUMsQ0FBQSxVQUFVOztRQUN0QyxvQkFBZSxHQUFZLEtBQUssQ0FBQyxDQUFBLFlBQVk7O1FBQzdDLCtCQUEwQixHQUFZLEtBQUssQ0FBQyxDQUFBLGNBQWM7O1FBQzFELHdCQUFtQixHQUFZLEtBQUssQ0FBQyxDQUFBLFVBQVU7O1FBQy9DLG1CQUFjLEdBQVksS0FBSyxDQUFDLENBQUEsVUFBVTtJQXlEbkMsQ0FBQztJQXBEakIsc0JBQ0ksMkNBQU07Ozs7Ozs7UUFEVixVQUNXLE1BQWM7WUFDdkIsSUFBSSxNQUFNLEVBQUU7Z0JBQ1YsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Z0JBQ3JCLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUNwQjtRQUNILENBQUM7OztPQUFBO0lBRUQsc0JBQ0ksK0NBQVU7Ozs7O1FBRGQsVUFDZSxVQUFrQjtZQUMvQixJQUFJLFVBQVUsRUFBRTtnQkFDZCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2FBQ3BCO1FB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QVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNwQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O2dCQXJKRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGtCQUFrQjtvQkFDNUIsNHhCQUFnRDs7aUJBRWpEOzs7OztzQkFRRSxXQUFXLFNBQUMsT0FBTzs2QkFFbkIsS0FBSztrQ0FDTCxLQUFLOzZDQUNMLEtBQUs7c0NBQ0wsS0FBSztpQ0FDTCxLQUFLO21DQUNMLFNBQVMsU0FBQyxrQkFBa0I7eUJBSTVCLEtBQUs7NkJBU0wsS0FBSzt1Q0FRTCxLQUFLOzZCQU9MLEtBQUs7dUJBUUwsS0FBSzt5Q0FVTCxLQUFLO3dCQVFMLEtBQUs7O0lBNkVSLDhCQUFDO0NBQUEsQUF0SkQsSUFzSkM7U0FqSlksdUJBQXVCOzs7SUFFbEMseUNBQWU7O0lBQ2YsK0NBQXFCOztJQUNyQiw2Q0FBbUI7O0lBQ25CLDZDQUE0Qjs7SUFDNUIsdUNBQWE7O0lBQ2Isc0NBQStCOztJQUUvQiw2Q0FBcUM7O0lBQ3JDLGtEQUEwQzs7SUFDMUMsNkRBQXFEOztJQUNyRCxzREFBOEM7O0lBQzlDLGlEQUF5Qzs7SUFDekMsbURBQWtFOztJQUVsRSwrQ0FBa0I7O0lBb0RsQix3Q0FBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEhvc3RCaW5kaW5nLCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5kZWNsYXJlIHZhciBTeXN0ZW06IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnd2YtYXBwcm92YWwtbG9ncycsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3dmLWFwcHJvdmFsLWxvZ3MuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3dmLWFwcHJvdmFsLWxvZ3MuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgV2ZBcHByb3ZhbExvZ3NDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBkYXRhSWQ6IHN0cmluZzsgLy8g5Y2V5o2uaWRcclxuICBkYXRhSWRTdWJTdHI6IHN0cmluZzsvL+WNleaNrmlkIOeahCBzdWJTdHLvvIzop6PlhrPlrZDooahkYXRhSWTov5jopoHpgJflj7fvvIxxdWVyeVNlbGVjdOaKpemUmemXrumimFxyXG4gIHByb2NJbnN0SWQ6IHN0cmluZzsgLy8g5rWB56iL5a6e5L6LaWRcclxuICBpZkZvcmVjYXN0OiBib29sZWFuID0gZmFsc2U7IC8vIOaYr+WQpumihOa1i+aXpeW/l1xyXG4gIHR5cGU6IHN0cmluZzsvL+afpeeci+aXpeW/l+exu+Wei1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbHMgPSAnJzsgLy8g5by55qGG5pi+56S65pe277yM5aKe5Yqg5qC35byPXHJcblxyXG4gIEBJbnB1dCgpIFNob3dIZWFkZXI6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuaYvuekuuaXpeW/l+WktOmDqFxyXG4gIEBJbnB1dCgpIFNob3dWaWV3UHJvY2VzczogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5pi+56S65p+l55yL5rWB56iL5oyJ6ZKuXHJcbiAgQElucHV0KCkgT25seUluY2x1ZGVDdXJyZW50UHJvY0luc3Q6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuWPquWMheWQq+W9k+WJjea1geeoi+eahOaXpeW/l1xyXG4gIEBJbnB1dCgpIEluY2x1ZGVBZG1pbk9wZXJhdGU6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuaYvuekuuaTjeS9nOaXpeW/l1xyXG4gIEBJbnB1dCgpIEluY2x1ZGVIaXN0b3J5OiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbljIXlkKvljoblj7Lml6Xlv5dcclxuICBAVmlld0NoaWxkKCd0YXNrRGlhbG9nRm9vdGVyJykgdGFza0RpYWxvZ0Zvb3RlcjogVGVtcGxhdGVSZWY8YW55PjsvL+W6lemDqOWMuuWfn1xyXG5cclxuICBsb2dDb250YWluZXI6IGFueTsvL+aXpeW/l+WuueWZqFxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBEYXRhSWQoZGF0YUlkOiBzdHJpbmcpIHtcclxuICAgIGlmIChkYXRhSWQpIHtcclxuICAgICAgdGhpcy5kYXRhSWQgPSBkYXRhSWQ7XHJcbiAgICAgIHRoaXMuZGF0YUlkU3ViU3RyID0gZGF0YUlkLnN1YnN0cmluZygwLCA1KTtcclxuICAgICAgdGhpcy5nZXRUYXNrTG9ncygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgUHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpIHtcclxuICAgIGlmIChwcm9jSW5zdElkKSB7XHJcbiAgICAgIHRoaXMucHJvY0luc3RJZCA9IHByb2NJbnN0SWQ7XHJcbiAgICAgIHRoaXMuZ2V0VGFza0xvZ3MoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IEFjdGl2aXR5RGVmaW5pdGlvbklkKGFjdERlZklkOiBzdHJpbmcpIHtcclxuICAgIGlmIChhY3REZWZJZCkge1xyXG4gICAgICB0aGlzLmdldFRhc2tMb2dzKGFjdERlZklkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IElmRm9yZWNhc3QoaWZGb3JlY2FzdDogc3RyaW5nKSB7XHJcbiAgICBpZiAoaWZGb3JlY2FzdCkge1xyXG4gICAgICB0aGlzLmlmRm9yZWNhc3QgPSBpZkZvcmVjYXN0ID09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgdGhpcy5nZXRUYXNrTG9ncygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgVHlwZSh0eXBlOiBzdHJpbmcpIHtcclxuICAgIGlmICgodHlwZSA9PSAncHJvY2VzcycgfHwgdHlwZSA9PSAnYWN0aXZpdHknKSAmJiB0aGlzLnR5cGUgIT0gdHlwZSkge1xyXG4gICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICBpZiAodHlwZSA9PT0gJ3Byb2Nlc3MnKSB7Ly8gdHlwZSA9ICdwcm9jZXNzJ+afpeeci+a1geeoi+aXpeW/l++8m3R5cGUgPSAnYWN0aXZpdHkn77yM5p+l55yL6IqC54K55pel5b+XIHNlcXVlbmNl77yM6L2s56e757q/XHJcbiAgICAgICAgdGhpcy5nZXRUYXNrTG9ncygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBwcm9jZXNzRm9yZWNhc3RQYXlsb2FkKHBheWxvYWQ6IGFueSkge1xyXG4gICAgaWYgKHBheWxvYWQpIHtcclxuICAgICAgdGhpcy5pZkZvcmVjYXN0ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nZXRUYXNrTG9ncygnJywgcGF5bG9hZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKSBTdHlsZTogc3RyaW5nOy8v5qC35byP77yMY2FyZCDljaHniYfniYjvvJtkYXRhZ3JpZCDooajmoLzniYhcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvLyB0aGlzLmdldFRhc2tMb2dzKCk7XHJcbiAgfVxyXG5cclxuICBmaWxsKCkge1xyXG4gICAgdGhpcy5jbHMgPSAnZC1mbGV4IGZsZXgtZmlsbCBoLTEwMCBmLXV0aWxzLWFic29sdXRlLWFsbCBweC00IHB5LTMnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRUYXNrTG9ncyhhY3REZWZJZD86IHN0cmluZywgd2ZGb3JlY2FzdFBheWxvYWQ/OiBhbnkpIHtcclxuICAgIGlmICh0aGlzLmRhdGFJZCB8fCB0aGlzLnByb2NJbnN0SWQgfHwgd2ZGb3JlY2FzdFBheWxvYWQpIHtcclxuICAgICAgU3lzdGVtLmltcG9ydCgnL3BsYXRmb3JtL3J1bnRpbWUvd2Yvd2ViYXBwL21vYmlsZXRhc2tjZW50ZXIvdGFza0NvbW1lbnQuanMnICsgJz92PTIwMjMwNjAyJykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YUlkKSB7XHJcbiAgICAgICAgICB0aGlzLmxvZ0NvbnRhaW5lciA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0YUlkJyArIHRoaXMuZGF0YUlkU3ViU3RyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5sb2dDb250YWluZXIgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2NJbnN0SWQnICsgdGhpcy5wcm9jSW5zdElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHBheWxvYWQ6IGFueSA9IHtcclxuICAgICAgICAgIGJpekluc3RJZDogdGhpcy5kYXRhSWQsXHJcbiAgICAgICAgICBwcm9jZXNzSW5zdGFuY2VJZDogdGhpcy5wcm9jSW5zdElkLFxyXG4gICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6IGFjdERlZklkLFxyXG4gICAgICAgICAgY29udGFpbmVyOiB0aGlzLmxvZ0NvbnRhaW5lcixcclxuICAgICAgICAgIHRlcm1pbmFsOiAnd2ViJyxcclxuICAgICAgICAgIHR5cGVJZDogJ3dmJyxcclxuICAgICAgICAgIGlmRm9yZWNhc3Q6IHRoaXMuaWZGb3JlY2FzdCxcclxuICAgICAgICAgIHNob3dIZWFkZXI6IHRoaXMuU2hvd0hlYWRlcixcclxuICAgICAgICAgIHNob3dWaWV3UHJvY2VzczogdGhpcy5TaG93Vmlld1Byb2Nlc3MsXHJcbiAgICAgICAgICB3ZkZvcmVjYXN0UGF5bG9hZDogd2ZGb3JlY2FzdFBheWxvYWQsXHJcbiAgICAgICAgICBvbmx5SW5jbHVkZUN1cnJlbnRQcm9jSW5zdDogdGhpcy5Pbmx5SW5jbHVkZUN1cnJlbnRQcm9jSW5zdCxcclxuICAgICAgICAgIGlzSW5jbHVkZUhpc3Rvcnk6IHRoaXMuSW5jbHVkZUhpc3RvcnksXHJcbiAgICAgICAgICBpbmNsdWRlUmV0cmlldmU6IHRoaXMuSW5jbHVkZUFkbWluT3BlcmF0ZSxcclxuICAgICAgICAgIGluY2x1ZGVBZG1pbk9wZXJhdGU6IHRoaXMuSW5jbHVkZUFkbWluT3BlcmF0ZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLlN0eWxlICYmIHRoaXMuU3R5bGUgPT0gJ2RhdGFncmlkJykgey8v6KGo5qC854mIXHJcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuZ3NwVGFza0NlbnRlckJpekxvZy5BcHByb3ZhbExvZ1V0aWwuZ2V0V2ViSHRtbChwYXlsb2FkKS50aGVuKChyZXN1bHQpID0+IHsgfSk7XHJcbiAgICAgICAgfSBlbHNlIHsvL+WNoeeJh+eJiFxyXG4gICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcFRhc2tDZW50ZXJCaXpMb2cuQXBwcm92YWxMb2dVdGlsLmdldFdlYkxvZ3NIdG1sKHBheWxvYWQpLnRoZW4oKHJlc3VsdCkgPT4geyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5pi+56S65pON5L2c5pel5b+XXHJcbiAgICovXHJcbiAgaWZTaG93T3BlcmF0ZUxvZ0NoYW5nZSgpIHtcclxuICAgIHRoaXMuZ2V0VGFza0xvZ3MoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICog5Zu96ZmF5YyWXHJcbiAgKi9cclxuICBpMThuVHJhbnNsYXRlKGNvZGU6IHN0cmluZykge1xyXG4gICAgdmFyIHJlc3VsdDogc3RyaW5nO1xyXG4gICAgY29uc3Qgc3VwcG9ydExhbmd1YWdlID0gW1wiemgtQ0hTXCIsIFwiemgtQ0hUXCIsIFwiZW5cIl07XHJcbiAgICBjb25zdCBjdXJMYW5ndWFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibGFuZ3VhZ2VDb2RlXCIpO1xyXG4gICAgY29uc3QgdHJhbnNsYXRlID0ge1xyXG4gICAgICBcInpoLUNIU1wiOiB7XHJcbiAgICAgICAgc2hvd09wZXJhdGVMb2c6IFwi5pi+56S65pON5L2c5pel5b+XXCJcclxuICAgICAgfSxcclxuICAgICAgXCJ6aC1DSFRcIjoge1xyXG4gICAgICAgIHNob3dPcGVyYXRlTG9nOiBcIumhr+ekuuaTjeS9nOaXpeiqjFwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGVuOiB7XHJcbiAgICAgICAgc2hvd09wZXJhdGVMb2c6IFwiU2hvdyBvcGVyYXRlIGxvZ1wiXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgaWYgKGN1ckxhbmd1YWdlICYmIHN1cHBvcnRMYW5ndWFnZS5pbmRleE9mKGN1ckxhbmd1YWdlKSA+IC0xKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRyYW5zbGF0ZVtjdXJMYW5ndWFnZV1bY29kZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQgPSB0cmFuc2xhdGVbXCJ6aC1DSFNcIl1bY29kZV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG4iXX0=