/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ElementPropertyConfig, PmfEvents, ProcessCell } from "@edp-pmf/grapheditor";
import { BpmnModelHelper, DataTypes, DataType, DataObject } from "@edp-pmf/bpmn-model";
import { ProcessHeader, StartMode, Component, CDTSchemaType, ToolTime, ExecuteForm, VariableSetting, ActualParameter, TitleExpression, CustomizeAction, MessageNotice, TimeLimitControl, ExtendProperty, ImageSettings, PositionParticipantExpression, UserParticipantExpression, ValuedDataObject, TimeLimitControlInfo, SendMessageExpireOperationInfo, SendMessageExpireOperation, AutoHandleExpireOperation, AutoHandleExpireOperationInfo, ActivityExecutorParticipantExpression, SmsMessageTemplate, SmsMessageVariable, } from "@gsp-wf/wf-process-model";
import { mxEventObject, mxResources } from "@edp-pmf/mxgraph-ts";
import { MessageReceiver } from "../entity/MessageReceiver";
import { BizComponent } from "../entity/BizComponent";
import { BizParameter } from "../entity/BizParameter";
import { WfDesignerUtils } from "../WfDesignerUtils";
import { WfEvents } from "../WfEvents";
import { ProcessPropertyKeys } from "./property-keys/ProcessPropertyKeys";
import { PropertyHelper } from "./PropertyHelper";
/**
 * 流程元素类。
 * 取名虽然Cell，但实际上不需要继承mxCell以及Cell类，仅持有流程与画布实例，方法属性获取与修改操作。
 */
export class WfProcessCell extends ProcessCell {
    /**
     * @return {?}
     */
    getFarrisPropConfig() {
        /** @type {?} */
        let extendList = [];
        if (this.editorUi.procExtProps && this.editorUi.procExtProps.length > 0) {
            extendList = JSON.parse(JSON.stringify(this.editorUi.procExtProps)).sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => {
                return a.sortOrder - b.sortOrder;
            }));
        }
        extendList = extendList.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => {
            return a.sortOrder - b.sortOrder;
        }));
        /** @type {?} */
        let propertyData = {};
        /** @type {?} */
        let usual = new ElementPropertyConfig();
        usual.categoryId = 'usual';
        usual.categoryName = mxResources.get("basicInfo");
        usual.tabId = 'basic';
        usual.tabName = mxResources.get("basic");
        usual.properties = [
            { propertyID: ProcessPropertyKeys.Name, propertyName: mxResources.get("name"), propertyType: 'string', visible: !this.editorUi.multiLangEnabled },
            { propertyID: ProcessPropertyKeys.NameLanguage, propertyName: mxResources.get("nameLanguage"), propertyType: 'multiLanguage', visible: this.editorUi.multiLangEnabled },
            { propertyID: ProcessPropertyKeys.Key, propertyName: mxResources.get("key"), propertyType: 'string', readonly: true },
            { propertyID: ProcessPropertyKeys.EntryForm, propertyName: mxResources.get("entryForm"), propertyType: 'modal' },
            { propertyID: ProcessPropertyKeys.startMode, propertyName: mxResources.get("startMode"), propertyType: 'select' },
            { propertyID: ProcessPropertyKeys.wf_TitleExpression, propertyName: mxResources.get("wfTitle"), propertyType: 'modal' },
        ];
        /** @type {?} */
        let formDef = new ElementPropertyConfig();
        formDef.categoryId = 'formDef';
        formDef.categoryName = mxResources.get("formDef");
        formDef.tabId = 'basic';
        formDef.tabName = mxResources.get("basic");
        formDef.properties = [
            { propertyID: ProcessPropertyKeys.wf_ExecuteForms_PC, propertyName: mxResources.get("formsPC"), propertyType: 'modal' },
            { propertyID: ProcessPropertyKeys.wf_ExecuteForms_Mobile, propertyName: mxResources.get("formsMobile"), propertyType: 'modal' },
        ];
        /** @type {?} */
        let process = new ElementPropertyConfig();
        process.categoryId = 'process';
        process.categoryName = mxResources.get("process");
        process.tabId = 'advanced';
        process.tabName = mxResources.get("advanced");
        process.properties = [
            { propertyID: ProcessPropertyKeys.wf_Component, propertyName: mxResources.get("wfComponent"), propertyType: 'modal' },
        ];
        /** @type {?} */
        let advanced = new ElementPropertyConfig();
        advanced.categoryId = 'advanced';
        advanced.categoryName = mxResources.get("otherConfig");
        advanced.tabId = 'advanced';
        advanced.tabName = mxResources.get("advanced");
        advanced.properties = [
            { propertyID: ProcessPropertyKeys.processVariables, propertyName: mxResources.get("processVariables"), propertyType: 'modal' },
            { propertyID: ProcessPropertyKeys.wf_CustomizeAction, propertyName: mxResources.get("customizeAction"), propertyType: 'modal' },
            { propertyID: ProcessPropertyKeys.enablePriority, propertyName: mxResources.get("enablePriority"), propertyType: 'select' },
            { propertyID: ProcessPropertyKeys.enableWholeOrderRetrieve, propertyName: mxResources.get("enableWholeOrderRetrieve"), propertyType: 'select', description: mxResources.get("description") },
            { propertyID: ProcessPropertyKeys.imageSettings, propertyName: mxResources.get("messageProperty"), propertyType: 'modal' },
        ];
        /** @type {?} */
        const time = new ElementPropertyConfig();
        time.categoryId = 'messageProperty'; // 消息属性
        time.categoryName = mxResources.get("timelinessInfo");
        time.tabId = 'advanced';
        time.tabName = mxResources.get("advanced");
        time.properties = [
            { propertyID: ProcessPropertyKeys.timeLimitControl, propertyName: mxResources.get("timeLimitControl"), propertyType: 'modal' },
            { propertyID: ProcessPropertyKeys.messageNotice, propertyName: mxResources.get("messageNotice"), propertyType: 'modal' },
        ];
        // 扩展属性分group处理，每个group包含父级属性和属于它的子扩展属性
        /** @type {?} */
        const groupList = new Array();
        for (const extend of extendList) {
            if (!extend.parentId) {
                /** @type {?} */
                const group = { parent: extend, childs: new Array() };
                for (const e of extendList) {
                    if (e.parentId === extend.id) {
                        group.childs.push(e);
                    }
                }
                groupList.push(group);
            }
        }
        // 没有扩展属性值的时候不显示扩展属性一栏
        if (groupList && groupList.length > 0) {
            /** @type {?} */
            const extendProperty = new ElementPropertyConfig();
            extendProperty.categoryId = 'extendProperty';
            extendProperty.categoryName = mxResources.get("extendProperty");
            extendProperty.tabId = 'advanced';
            extendProperty.tabName = mxResources.get("advanced");
            extendProperty.properties = new Array();
            // 组织扩展属性的二级list
            for (const g of groupList) {
                extendProperty.properties.push({ propertyID: g.parent.id, propertyName: g.parent.propertyTitle, propertyType: 'modal' });
            }
            this.setProcessPropertyValue(propertyData, groupList);
            return {
                propertyConfig: [usual, formDef, process, time, advanced, extendProperty],
                propertyData: propertyData
            };
        }
        else {
            this.setProcessPropertyValue(propertyData, groupList);
            return {
                propertyConfig: [usual, formDef, process, time, advanced],
                propertyData: propertyData
            };
        }
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    updateProps(obj) {
        /** @type {?} */
        const propertyID = obj.propertyID;
        if (propertyID) {
            switch (propertyID) {
                case 'EntryForm': //流程分类
                    // 更新流程分类名称（流程分类名称可能修改）
                    this.updateProcessHeader(obj.propertyValue.name, obj.propertyValue.businessObjectId, obj.propertyValue.id);
                    this.updateFlowFormInfo(obj.formalParameters, obj.processBizComponnets, obj.executeForms, obj.customizeActions, obj.bizCmps);
                    this.bindProcessTitleExpression(obj.flowForm.processDescription);
                    break;
                case ProcessPropertyKeys.wf_Component: // 流程构件
                    this.updateProcessComponents(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.wf_ExecuteForms_PC:
                    this.updateExecuteForm(obj.propertyValue, 'PC');
                    if (obj.parameters && obj.parameters.length > 0) {
                        PropertyHelper.updateFormalParameters(this.process, obj.parameters);
                    }
                    break;
                case ProcessPropertyKeys.wf_ExecuteForms_Mobile:
                    this.updateExecuteForm(obj.propertyValue, 'MOBILE');
                    if (obj.parameters && obj.parameters.length > 0) {
                        PropertyHelper.updateFormalParameters(this.process, obj.parameters);
                    }
                    break;
                case ProcessPropertyKeys.wf_CustomizeAction:
                    this.updateCustomizeActions(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.wf_TitleExpression:
                    this.modifyProcessTitleExpression(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.allowPreAssign:
                    this.updateAllowPreAssign(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.startMode:
                    this.updateStartMode(obj.propertyValue, obj.allBizCmps, obj.bizCmps);
                    break;
                case ProcessPropertyKeys.enablePriority:
                    this.updateEnablePriority(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.enableWholeOrderRetrieve:
                    this.updateEnableWholeOrderRetrieve(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.processVariables:
                    this.updateProcessVariables(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.timeLimitControl:
                    this.updateProcessTimeLimitControl(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.messageNotice:
                    this.updateProcessMessageNotices(obj.propertyValue);
                    break;
                case ProcessPropertyKeys.imageSettings:
                    this.updateImageSettings(obj.propertyValue);
                    break;
                default:
                    // 判断ResourceKeys是不是groupid,是就走resetExtendProperty
                    if (this.editorUi.procExtProps.findIndex((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => p.id === propertyID)) > -1) {
                        this.resetExtendProperty(obj.propertyValue);
                    }
                    else {
                        super.updateProps(obj);
                    }
                    break;
            }
        }
    }
    /**
     * 设置流程属性值
     * @param {?} propertyData
     * @param {?=} groupList
     * @return {?}
     */
    setProcessPropertyValue(propertyData, groupList) {
        /** @type {?} */
        let process = this.process;
        if (process) {
            if (!process.Name)
                process.Name = '默认流程';
            if (!process.Key)
                process.Key = BpmnModelHelper.GenerateElementId();
            propertyData[ProcessPropertyKeys.Id] = process.Id;
            propertyData[ProcessPropertyKeys.ClrTypeID] = process.ClrTypeID;
            propertyData[ProcessPropertyKeys.Name] = process.Name;
            propertyData[ProcessPropertyKeys.NameLanguage] = process.NameLanguage || {
                "zh-CHS": process.Name,
            };
            propertyData[ProcessPropertyKeys.Key] = process.Key;
            propertyData[ProcessPropertyKeys.wf_TitleExpression] = '';
            /** @type {?} */
            let extendElements = process.GetExtensionElements();
            /** @type {?} */
            let component = [];
            /** @type {?} */
            let webForm;
            /** @type {?} */
            let mobileForm;
            /** @type {?} */
            let customizeActions = [];
            /** @type {?} */
            let proExtendProperties = [];
            /** @type {?} */
            let imageSettings;
            /** @type {?} */
            const messagesNotices = new Array();
            // tslint:disable-next-line: forin
            for (let i in extendElements) {
                if (extendElements[i] instanceof ProcessHeader) {
                    propertyData[ProcessPropertyKeys.EntryForm] = {
                        id: ((/** @type {?} */ (extendElements[i]))).BizDefKey,
                        name: ((/** @type {?} */ (extendElements[i]))).BizDefName
                    };
                    propertyData[ProcessPropertyKeys.allowPreAssign] = ((/** @type {?} */ (extendElements[i]))).allowPreAssign;
                    propertyData[ProcessPropertyKeys.startMode] = ((/** @type {?} */ (extendElements[i]))).startMode;
                    propertyData[ProcessPropertyKeys.enablePriority] = ((/** @type {?} */ (extendElements[i]))).enablePriority ? ((/** @type {?} */ (extendElements[i]))).enablePriority : false;
                    propertyData[ProcessPropertyKeys.enableWholeOrderRetrieve] = ((/** @type {?} */ (extendElements[i]))).enableWholeOrderRetrieve ? ((/** @type {?} */ (extendElements[i]))).enableWholeOrderRetrieve : false;
                }
                if (extendElements[i] instanceof Component
                    && ((/** @type {?} */ (extendElements[i]))).Time !== ToolTime.UNDEFINITION) {
                    component.push(this.convert2Component((/** @type {?} */ (extendElements[i]))));
                }
                if (extendElements[i] instanceof ExecuteForm) {
                    /** @type {?} */
                    const form = (/** @type {?} */ (extendElements[i]));
                    if (form.TerminalType === 'PC') {
                        webForm = form;
                    }
                    else if (form.TerminalType === 'MOBILE') {
                        mobileForm = form;
                    }
                }
                if (extendElements[i] instanceof TitleExpression) {
                    propertyData[ProcessPropertyKeys.wf_TitleExpression] =
                        ((/** @type {?} */ (extendElements[i]))).valueLanguage ? ((/** @type {?} */ (extendElements[i]))).valueLanguage : ((/** @type {?} */ (extendElements[i]))).value;
                }
                if (extendElements[i] instanceof CustomizeAction) {
                    customizeActions.push(extendElements[i]);
                }
                if (extendElements[i] instanceof MessageNotice) {
                    messagesNotices.push(this.getMessageNotice((/** @type {?} */ (extendElements[i]))));
                }
                if (extendElements[i] instanceof TimeLimitControl) {
                    propertyData[ProcessPropertyKeys.timeLimitControl] = this.getPrcocessTimeLimitInfo((/** @type {?} */ (extendElements[i])));
                }
                if (extendElements[i] instanceof ExtendProperty) {
                    proExtendProperties.push(extendElements[i]);
                }
                if (extendElements[i] instanceof ImageSettings) {
                    // imageSettings.push(extendElements[i]);
                    propertyData[ProcessPropertyKeys.imageSettings] = extendElements[i];
                }
            }
            /** @type {?} */
            const processVariables = this.getProcessVariables(process);
            propertyData[ProcessPropertyKeys.processVariables] = processVariables;
            propertyData[ProcessPropertyKeys.wf_Component] = component;
            propertyData[ProcessPropertyKeys.wf_ExecuteForms_PC] = webForm;
            propertyData[ProcessPropertyKeys.wf_ExecuteForms_Mobile] = mobileForm;
            propertyData[ProcessPropertyKeys.wf_CustomizeAction] = customizeActions;
            propertyData[ProcessPropertyKeys.messageNotice] = messagesNotices;
            for (const g of groupList) {
                // 取回模型上的value值给到扩展属性组件里
                if (proExtendProperties && proExtendProperties.length > 0) {
                    g.childs.sort((/**
                     * @param {?} a
                     * @param {?} b
                     * @return {?}
                     */
                    (a, b) => {
                        return a.sortOrder - b.sortOrder;
                    })).forEach((/**
                     * @param {?} d
                     * @return {?}
                     */
                    d => {
                        proExtendProperties.forEach((/**
                         * @param {?} e
                         * @return {?}
                         */
                        e => {
                            if (e.key == d.code) {
                                d.value = e.value;
                            }
                        }));
                    }));
                }
                propertyData[g.parent.id] = g.childs;
            }
        }
    }
    /**
     * @param {?} process
     * @return {?}
     */
    getProcessVariables(process) {
        /** @type {?} */
        let processVariables = new Array();
        /** @type {?} */
        const extendElements = process.GetExtensionElements();
        /** @type {?} */
        const dataObjects = process.GetDataObjects();
        if (dataObjects !== null && dataObjects.length > 0) {
            for (const obj of dataObjects) {
                if (obj instanceof ValuedDataObject && obj.DataType.Category !== DataTypes.CustomType) {
                    /** @type {?} */
                    const variable = {
                        id: obj.Id,
                        name: obj.Name,
                        documentation: obj.Documentation,
                        basicType: obj.DataType.BasicType,
                        tag: obj.variableSetting ? obj.variableSetting.tag : '',
                        value: obj.variableSetting ? obj.variableSetting.value : '',
                        valueText: obj.variableSetting ? obj.variableSetting.valueText : '',
                        description: obj.DataType.Description
                    };
                    if (obj.variableSetting && obj.variableSetting.tag === 'component') {
                        if (extendElements.length > 0) {
                            for (const e of extendElements) {
                                if (e instanceof Component && e.Id === obj.variableSetting.value) {
                                    /** @type {?} */
                                    const component = {
                                        Id: e.Id,
                                        Name: e.Name,
                                        MetadataId: e.MetadataId,
                                        MethodCode: e.MethodCode,
                                        ActualParameters: []
                                    };
                                    if (e.ActualParameters && e.ActualParameters.length > 0) {
                                        for (const p of e.ActualParameters) {
                                            /** @type {?} */
                                            const parameter = {
                                                Name: p.Name,
                                                Value: p.Value,
                                                Tag: p.Tag,
                                            };
                                            component.ActualParameters.push(parameter);
                                        }
                                    }
                                    variable.component = component;
                                }
                            }
                        }
                    }
                    processVariables.push(variable);
                }
            }
        }
        return processVariables;
    }
    /**
     * @param {?} timeLimitControl
     * @return {?}
     */
    getPrcocessTimeLimitInfo(timeLimitControl) {
        /** @type {?} */
        let timeLimit;
        if (timeLimitControl) {
            timeLimit = new TimeLimitControlInfo();
            timeLimit.enable = timeLimitControl.enable;
            timeLimit.tag = timeLimitControl.tag;
            timeLimit.dueTime = timeLimitControl.dueTime;
            timeLimit.timeUnit = timeLimitControl.timeUnit;
            timeLimit.expireOperations = new Array();
            if (timeLimitControl.expireOperations && timeLimitControl.expireOperations.length > 0) {
                /** @type {?} */
                const operations = timeLimitControl.expireOperations;
                for (const o of operations) {
                    if (o.ClrTypeID.indexOf('SendMessageExpireOperation') > 0) {
                        /** @type {?} */
                        const operation = (/** @type {?} */ (o));
                        /** @type {?} */
                        const sendMessage = new SendMessageExpireOperationInfo();
                        sendMessage.timeDuration = operation.timeDuration;
                        sendMessage.durationType = operation.durationType;
                        sendMessage.timeUnit = operation.timeUnit;
                        sendMessage.message = operation.message;
                        sendMessage.sendType = operation.sendType;
                        sendMessage.subject = operation.subject;
                        sendMessage.id = operation.id;
                        sendMessage.receiver = operation.receiver;
                        sendMessage.receiverText = operation.receiverText;
                        sendMessage.cycleEnable = operation.cycleEnable;
                        sendMessage.cycleTime = operation.cycleTime;
                        sendMessage.cycleTimeUnit = operation.cycleTimeUnit;
                        sendMessage.operationTypeName = operation.operationTypeName ? operation.operationTypeName : 'SendMessageExpireOperation';
                        if (operation.smsMessageTemplate) {
                            /** @type {?} */
                            const smsTemplate = new Object;
                            smsTemplate.code = operation.smsMessageTemplate.code;
                            smsTemplate.content = operation.smsMessageTemplate.content;
                            smsTemplate.smsMessageVariables = new Array();
                            if (operation.smsMessageTemplate.smsMessageVariables && operation.smsMessageTemplate.smsMessageVariables.length > 0) {
                                for (const v of operation.smsMessageTemplate.smsMessageVariables) {
                                    /** @type {?} */
                                    const variable = new Object;
                                    variable.id = WfDesignerUtils.createNM();
                                    variable.code = v.code;
                                    variable.value = v.value;
                                    variable.tag = v.tag;
                                    smsTemplate.smsMessageVariables.push(variable);
                                }
                            }
                            sendMessage.smsMessageTemplate = smsTemplate;
                        }
                        timeLimit.expireOperations.push(sendMessage);
                    }
                    else if (o.ClrTypeID.indexOf('AutoHandleExpireOperation') > 0) {
                        /** @type {?} */
                        const operation = (/** @type {?} */ (o));
                        /** @type {?} */
                        const autoHandle = new AutoHandleExpireOperationInfo;
                        autoHandle.id = operation.id;
                        autoHandle.durationType = operation.durationType;
                        autoHandle.timeDuration = operation.timeDuration;
                        autoHandle.timeUnit = operation.timeUnit;
                        autoHandle.operationTypeName = operation.operationTypeName ? operation.operationTypeName : 'AutoHandleExpireOperation';
                        autoHandle.autoHandleType = operation.autoHandleType;
                        autoHandle.message = operation.message;
                        timeLimit.expireOperations.push(autoHandle);
                    }
                }
            }
        }
        return timeLimit;
    }
    /**
     * @param {?} messageNotice
     * @return {?}
     */
    getMessageNotice(messageNotice) {
        /** @type {?} */
        const message = new Object;
        message.content = messageNotice.content;
        message.sendTime = messageNotice.sendTime;
        message.sendType = messageNotice.sendType;
        message.subject = messageNotice.subject;
        if (messageNotice.smsMessageTemplate) {
            /** @type {?} */
            const smsTemplate = new Object;
            smsTemplate.code = messageNotice.smsMessageTemplate.code;
            smsTemplate.content = messageNotice.smsMessageTemplate.content;
            smsTemplate.smsMessageVariables = new Array();
            if (messageNotice.smsMessageTemplate.smsMessageVariables && messageNotice.smsMessageTemplate.smsMessageVariables.length > 0) {
                for (const v of messageNotice.smsMessageTemplate.smsMessageVariables) {
                    /** @type {?} */
                    const variable = new Object;
                    variable.id = WfDesignerUtils.createNM();
                    variable.code = v.code;
                    variable.value = v.value;
                    variable.tag = v.tag;
                    smsTemplate.smsMessageVariables.push(variable);
                }
            }
            message.smsMessageTemplate = smsTemplate;
        }
        /** @type {?} */
        const receiverExpressions = new Array();
        if (messageNotice.receiver) {
            /** @type {?} */
            const receivers = messageNotice.receiver.split(',');
            /** @type {?} */
            const receiverTexts = messageNotice.receiverText.split(',');
            /** @type {?} */
            let userReceiver = new MessageReceiver();
            userReceiver.type = 'userParticipant';
            userReceiver.userIds = '';
            userReceiver.userNames = '';
            for (const i in receivers) {
                if (receivers[i] === 'procInstCreator') {
                    /** @type {?} */
                    let procInstCreator = new MessageReceiver();
                    procInstCreator.type = 'processParticipant';
                    procInstCreator.processParticipant = 'procInstCreator';
                    receiverExpressions.push(procInstCreator);
                }
                else if (receivers[i] === 'workItemParticipant') {
                    /** @type {?} */
                    let workItemParticipant = new MessageReceiver();
                    workItemParticipant.type = 'processParticipant';
                    workItemParticipant.processParticipant = 'workItemParticipant';
                    receiverExpressions.push(workItemParticipant);
                }
                else {
                    userReceiver.userIds += (receivers[i] + ',');
                    userReceiver.userNames += (receiverTexts[i] + ',');
                }
            }
            if (userReceiver.userIds) {
                userReceiver.userIds = userReceiver.userIds.substring(0, userReceiver.userIds.length - 1);
                userReceiver.userNames = userReceiver.userNames.substring(0, userReceiver.userNames.length - 1);
                receiverExpressions.push(userReceiver);
            }
        }
        if (messageNotice.receiverExpressions && messageNotice.receiverExpressions.length > 0) {
            for (const e of messageNotice.receiverExpressions) {
                if (e instanceof ActivityExecutorParticipantExpression) {
                    /** @type {?} */
                    let activityExecutorParticipant = new MessageReceiver();
                    activityExecutorParticipant.type = 'processParticipant';
                    activityExecutorParticipant.processParticipant = 'activityExecutorParticipant';
                    activityExecutorParticipant.activityDefId = ((/** @type {?} */ (e))).activityDefId;
                    activityExecutorParticipant.activityDefName = ((/** @type {?} */ (e))).activityDefName;
                    receiverExpressions.push(activityExecutorParticipant);
                }
                else if (e instanceof UserParticipantExpression) {
                    /** @type {?} */
                    let variableReceiver = new MessageReceiver();
                    variableReceiver.type = 'variableParticipant';
                    variableReceiver.variableParticipant = ((/** @type {?} */ (e))).UserId;
                    variableReceiver.variableName = ((/** @type {?} */ (e))).name;
                    variableReceiver.orgType = ((/** @type {?} */ (e))).OrgType;
                    receiverExpressions.push(variableReceiver);
                }
                else if (e instanceof PositionParticipantExpression) {
                    /** @type {?} */
                    let positionReceiver = new MessageReceiver();
                    positionReceiver.type = 'positionParticipant';
                    positionReceiver.positionId = ((/** @type {?} */ (e))).PositionId;
                    positionReceiver.positionName = ((/** @type {?} */ (e))).PositionName;
                    positionReceiver.positionType = ((/** @type {?} */ (e))).PositionType;
                    if (positionReceiver.positionType === '1') {
                        positionReceiver.orgId = ((/** @type {?} */ (e))).OrgId;
                        positionReceiver.orgType = ((/** @type {?} */ (e))).OrgType;
                    }
                    receiverExpressions.push(positionReceiver);
                }
            }
        }
        if (receiverExpressions.length > 0) {
            message.receivers = receiverExpressions;
        }
        return message;
    }
    /**
     * @param {?} component
     * @return {?}
     */
    convert2Component(component) {
        /** @type {?} */
        const bizComponent = new BizComponent();
        bizComponent.id = component.Id;
        bizComponent.name = component.Name;
        bizComponent.metadataId = component.MetadataId;
        bizComponent.methodCode = component.MethodCode;
        bizComponent.executionTime = component.Time;
        bizComponent.isForCompensation = component.isForCompensation;
        bizComponent.scopeType = component.ScopeType || null;
        bizComponent.actualParameters = new Array();
        if (component.ActualParameters && component.ActualParameters.length > 0) {
            for (const param of component.ActualParameters) {
                /** @type {?} */
                const bizParam = new BizParameter();
                bizParam.code = param.Name;
                bizParam.name = param.Name;
                bizParam.value = param.Value;
                bizComponent.actualParameters.push(bizParam);
            }
        }
        return bizComponent;
    }
    /**
     * 设置ProcessHeader
     * @param {?} ffId
     * @param {?} bizObjId
     * @param {?} ffName
     * @param {?} startMode
     * @return {?}
     */
    setProcessHeader(ffId, bizObjId, ffName, startMode) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        /** @type {?} */
        const processHeader = new ProcessHeader(process.Model, ffId, bizObjId, ffName, startMode);
        extendElements.push(processHeader);
    }
    /**
     * 更新流程分类绑定的参数，流程组件，表单信息
     * @param {?} params 参数列表
     * @param {?} cpts 流程组件
     * @param {?} forms
     * @param {?} customizeActions
     * @param {?} bizCmps
     * @return {?}
     */
    updateFlowFormInfo(params, cpts, forms, customizeActions, bizCmps) {
        this.updateFormalParameters(params, cpts.filter((/**
         * @param {?} cpt
         * @return {?}
         */
        cpt => cpt.ownerType === 'Schema')));
        this.setProcessComponents(cpts, bizCmps);
        this.updateExecuteForms(forms);
        this.updateCustomizeActions(customizeActions);
    }
    /**
     * @param {?} parameters
     * @param {?=} cmps
     * @return {?}
     */
    updateFormalParameters(parameters, cmps = new Array()) {
        if (!parameters) {
            parameters = [];
        }
        /** @type {?} */
        let process = this.process;
        /** @type {?} */
        let objects = process.GetDataObjects();
        if (parameters !== null && parameters.length > 0) {
            for (const p of parameters) {
                /** @type {?} */
                const dataType = new DataType(process.Model);
                if (p.dataType === 'CDTSchema') {
                    // 先清理CDTSchema类型的dataObject
                    for (const o of objects) {
                        //TODO:数据类型为customType暂时默认为参数预制
                        if (o instanceof DataObject && o.DataType.Category === DataTypes.CustomType) {
                            process.RemoveDataObject(o.Id);
                        }
                    }
                    // 重新绑定流程分类支持精简be
                    /** @type {?} */
                    const customType = new CDTSchemaType(process.Model);
                    if (p.newSchemaId && p.newSchemaMetadataId) {
                        customType.SchemaId = p.newSchemaId;
                        customType.MetadataId = p.newSchemaMetadataId;
                    }
                    else {
                        customType.SchemaId = p.schemaId;
                        customType.MetadataId = p.schemaMetadataId;
                    }
                    customType.ComponentId = cmps.filter((/**
                     * @param {?} cmp
                     * @return {?}
                     */
                    cmp => cmp.owner === p.schemaId))[0].id;
                    dataType.Category = DataTypes.CustomType;
                    dataType.CustomType = customType;
                }
                else {
                    // 先清理code相同的dataObject
                    for (const o of objects) {
                        if (o instanceof DataObject && o.Name === p.code) {
                            process.RemoveDataObject(o.Id);
                        }
                    }
                    dataType.Category = DataTypes.BasicType;
                    dataType.BasicType = p.dataType;
                }
                dataType.Description = p.description;
                // dataType.InitialValue = p.initialValue;
                if (p.parameterMode === 0) {
                    /** @type {?} */
                    const dataObject = new ValuedDataObject(process.Model);
                    dataObject.Name = p.code;
                    dataObject.Documentation = p.name;
                    dataObject.DataType = dataType;
                    dataObject.IsAllowNull = p.allowNull;
                    if (p.initialValue || p.initialValueType) {
                        /** @type {?} */
                        const variableSetting = new VariableSetting(process.Model);
                        variableSetting.variableCode = p.code;
                        variableSetting.variableName = p.name;
                        variableSetting.tag = p.initialValueType;
                        variableSetting.value = p.initialValue;
                        variableSetting.valueText = p.initialValue;
                        dataObject.variableSetting = variableSetting;
                    }
                    process.AddDataObject(dataObject);
                }
            }
        }
    }
    /**
     * 基于流程分类的切换更新流程构件
     * @param {?} procCpts
     * @param {?} bizCmps
     * @return {?}
     */
    setProcessComponents(procCpts, bizCmps) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let processHeader;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        //删除流程构件
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof Component
                    && ((/** @type {?} */ (extendElements[i - 1]))).Time !== ToolTime.UNDEFINITION) {
                    extendElements.splice(i - 1, 1);
                }
                if (extendElements[i - 1] instanceof ProcessHeader) {
                    processHeader = (/** @type {?} */ (extendElements[i - 1]));
                }
            }
        }
        // 子流程和外部流程的情况先需要绑定取数构件
        if (processHeader.startMode !== StartMode.DIRECT) {
            /** @type {?} */
            const loadDataComponent = procCpts.find((/**
             * @param {?} p
             * @return {?}
             */
            p => p.executionTime === ToolTime.LOADDATA));
            if (loadDataComponent) {
                /** @type {?} */
                let ldCpt = new Component(process.Model);
                ldCpt.Time = (/** @type {?} */ (loadDataComponent.executionTime));
                ldCpt.MetadataId = loadDataComponent.metadataId;
                ldCpt.MethodCode = loadDataComponent.methodCode;
                ldCpt.Id = loadDataComponent.id;
                ldCpt.Name = loadDataComponent.name;
                ldCpt.isForCompensation = loadDataComponent.isForCompensation;
                ldCpt.ActualParameters = [];
                if (loadDataComponent.scopeType) {
                    ldCpt.ScopeType = loadDataComponent.scopeType;
                }
                else {
                    ldCpt.ScopeType = "Undefined";
                }
                if (loadDataComponent.actualParameters && loadDataComponent.actualParameters.length > 0) {
                    for (let item of loadDataComponent.actualParameters) {
                        /** @type {?} */
                        let parameter = new ActualParameter(process.Model, item.code, item.value);
                        ldCpt.ActualParameters.push(parameter);
                    }
                }
                // 把取数构件放进去
                extendElements.push(ldCpt);
                // 如果是外部流程，校验是否集成统一预制的外部流程构件
                if (processHeader.startMode == StartMode.EXTERNAL_PROCESS) {
                    /** @type {?} */
                    let externalCmps = false;
                    /** @type {?} */
                    const cmps = bizCmps;
                    if (cmps && cmps.length > 0) {
                        // 此处标记有外部流程通用构件
                        for (const c of cmps) {
                            if (c.scopeType === 'ExternalProcess') {
                                externalCmps = true;
                                break;
                            }
                        }
                    }
                    // 如果没有外部流程构件
                    if (!externalCmps) {
                        if (procCpts && procCpts.length > 0) {
                            for (let procCpt of procCpts) {
                                /** @type {?} */
                                let cpt = new Component(process.Model);
                                cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                                cpt.MetadataId = procCpt.metadataId;
                                cpt.MethodCode = procCpt.methodCode;
                                cpt.Id = procCpt.id;
                                cpt.Name = procCpt.name;
                                cpt.isForCompensation = procCpt.isForCompensation;
                                cpt.ActualParameters = [];
                                if (procCpt.scopeType) {
                                    cpt.ScopeType = procCpt.scopeType;
                                }
                                else {
                                    cpt.ScopeType = "Undefined";
                                }
                                if (procCpt.actualParameters && procCpt.actualParameters.length > 0) {
                                    for (let item of procCpt.actualParameters) {
                                        /** @type {?} */
                                        let parameter = new ActualParameter(process.Model, item.code, item.value);
                                        cpt.ActualParameters.push(parameter);
                                    }
                                }
                                // 避免重复的放入取数构件,不要取数，子流程和直接流程的构件，要未定义，外部，全量的
                                if (cpt.Time !== ToolTime.LOADDATA
                                    && cpt.ScopeType !== StartMode.DIRECT
                                    && cpt.ScopeType !== StartMode.SUB_PROCESS) {
                                    extendElements.push(cpt);
                                }
                            }
                        }
                    }
                    else {
                        for (let procCpt of procCpts) {
                            /** @type {?} */
                            let cpt = new Component(process.Model);
                            cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                            cpt.MetadataId = procCpt.metadataId;
                            cpt.MethodCode = procCpt.methodCode;
                            cpt.Id = procCpt.id;
                            cpt.Name = procCpt.name;
                            cpt.isForCompensation = procCpt.isForCompensation;
                            cpt.ActualParameters = [];
                            if (procCpt.scopeType) {
                                cpt.ScopeType = procCpt.scopeType;
                            }
                            else {
                                cpt.ScopeType = "Undefined";
                            }
                            if (procCpt.actualParameters && procCpt.actualParameters.length > 0) {
                                for (let item of procCpt.actualParameters) {
                                    /** @type {?} */
                                    let parameter = new ActualParameter(process.Model, item.code, item.value);
                                    cpt.ActualParameters.push(parameter);
                                }
                            }
                            // 避免重复的放入取数构件,不要取数，子流程和直接流程,未知的构件，外部，全量的
                            if (cpt.Time !== ToolTime.LOADDATA
                                && cpt.ScopeType !== StartMode.DIRECT
                                && cpt.ScopeType !== StartMode.SUB_PROCESS
                                && cpt.ScopeType !== "Undefined") {
                                extendElements.push(cpt);
                            }
                        }
                    }
                    // 如果有外部流程构件，同样只保留取数构件，不需要其他处理(取数构件已经放进去了)
                    // 刷新一下属性框
                    this.editorUi.fireEvent(new mxEventObject(PmfEvents.ShowProperty));
                }
                else if (processHeader.startMode == StartMode.SUB_PROCESS) {
                    if (procCpts && procCpts.length > 0) {
                        for (let procCpt of procCpts) {
                            /** @type {?} */
                            let cpt = new Component(process.Model);
                            cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                            cpt.MetadataId = procCpt.metadataId;
                            cpt.MethodCode = procCpt.methodCode;
                            cpt.Id = procCpt.id;
                            cpt.Name = procCpt.name;
                            cpt.isForCompensation = procCpt.isForCompensation;
                            cpt.ActualParameters = [];
                            if (procCpt.scopeType) {
                                cpt.ScopeType = procCpt.scopeType;
                            }
                            else {
                                cpt.ScopeType = "Undefined";
                            }
                            if (procCpt.actualParameters && procCpt.actualParameters.length > 0) {
                                for (let item of procCpt.actualParameters) {
                                    /** @type {?} */
                                    let parameter = new ActualParameter(process.Model, item.code, item.value);
                                    cpt.ActualParameters.push(parameter);
                                }
                            }
                            // 避免重复的放入取数构件,不要取数，直接流程和外部流程，未定义的构件，要子流程，全量的
                            if (cpt.Time !== ToolTime.LOADDATA
                                && cpt.ScopeType !== StartMode.DIRECT
                                && cpt.ScopeType !== StartMode.EXTERNAL_PROCESS
                                && cpt.ScopeType !== "Undefined") {
                                extendElements.push(cpt);
                            }
                        }
                    }
                }
                // 如果是子流程则不需要其他处理(取数构件已经放进去了)
            }
        }
        else { // 直接流程
            // 直接流程
            // 直接流程过滤掉共享的构件
            /** @type {?} */
            const actualCmps = procCpts.filter((/**
             * @param {?} p
             * @return {?}
             */
            p => WfDesignerUtils.isPfComponent(p.metadataId) === false));
            if (actualCmps && actualCmps.length > 0) {
                for (let procCpt of actualCmps) {
                    /** @type {?} */
                    let cpt = new Component(process.Model);
                    cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                    cpt.MetadataId = procCpt.metadataId;
                    cpt.MethodCode = procCpt.methodCode;
                    cpt.Id = procCpt.id;
                    cpt.Name = procCpt.name;
                    cpt.isForCompensation = procCpt.isForCompensation;
                    if (procCpt.scopeType) {
                        cpt.ScopeType = procCpt.scopeType;
                    }
                    else {
                        cpt.ScopeType = "Undefined";
                    }
                    cpt.ActualParameters = [];
                    if (procCpt.actualParameters && procCpt.actualParameters.length > 0) {
                        for (let item of procCpt.actualParameters) {
                            /** @type {?} */
                            let parameter = new ActualParameter(process.Model, item.code, item.value);
                            cpt.ActualParameters.push(parameter);
                        }
                    }
                    // 避免重复的放入取数构件,子流程和外部流程的构件，要未定义，直接，全量的
                    if (cpt.ScopeType !== StartMode.EXTERNAL_PROCESS
                        && cpt.ScopeType !== StartMode.SUB_PROCESS) {
                        extendElements.push(cpt);
                    }
                }
            }
        }
    }
    /**
     * @param {?} forms
     * @return {?}
     */
    updateExecuteForms(forms) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        //删除表单构件
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof ExecuteForm) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        for (const f of forms) {
            this.updateExecuteForm(f);
        }
    }
    /**
     * @param {?} form
     * @param {?=} terminal
     * @return {?}
     */
    updateExecuteForm(form, terminal) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        //删除表单构件
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof ExecuteForm) {
                    /** @type {?} */
                    const f = (/** @type {?} */ (extendElements[i - 1]));
                    if (f.TerminalType === (terminal ? terminal : form.TerminalType)) {
                        extendElements.splice(i - 1, 1);
                    }
                }
            }
        }
        if (form) {
            /** @type {?} */
            let params = (/** @type {?} */ (form.ActualParameters));
            /** @type {?} */
            let actParas = new Array();
            if (params && params.length > 0) {
                for (let para of params) {
                    /** @type {?} */
                    let actPara = new ActualParameter(process.Model, para.Name, para.Value);
                    if (para.Tag) {
                        actPara.Tag = para.Tag;
                    }
                    else {
                        if (para.Value) {
                            if (para.Value.length >= 8 && para.Value.slice(0, 8) === `{"expr":`) {
                                actPara.Tag = 'expression';
                            }
                            else {
                                actPara.Tag = 'constant';
                            }
                        }
                        else {
                            actPara.Tag = 'variable';
                        }
                    }
                    actParas.push(actPara);
                }
            }
            /** @type {?} */
            const id = BpmnModelHelper.GenerateElementId();
            /** @type {?} */
            let item = new ExecuteForm(process.Model, id, form.Name, actParas);
            item.ComponentId = form.ComponentId;
            item.FormType = form.FormType;
            item.formFormatId = form.formFormatId;
            item.formatConfigId = form.formatConfigId;
            item.TerminalType = form.TerminalType;
            extendElements.push(item);
        }
    }
    /**
     * @param {?} customizeActions
     * @return {?}
     */
    updateCustomizeActions(customizeActions) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        //删除流程构件
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof CustomizeAction) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        //重新绑定
        if (customizeActions && customizeActions.length > 0) {
            for (let a of customizeActions) {
                /** @type {?} */
                let action = new CustomizeAction(process.Model);
                action.id = BpmnModelHelper.GenerateElementId();
                action.code = a.code;
                action.name = a.name;
                action.terminalType = a.terminalType;
                // action.enable = a.enable;
                action.actualParameters = [];
                if (a.actualParameters && a.actualParameters.length > 0) {
                    for (let p of a.actualParameters) {
                        /** @type {?} */
                        let parameter = new ActualParameter(process.Model, p.Name, p.Value, p.ValueText, p.Tag || 'expression');
                        action.actualParameters.push(parameter);
                    }
                }
                extendElements.push(action);
            }
        }
    }
    /**
     * 更新流程备注
     * @param {?} value
     * @return {?}
     */
    modifyProcessTitleExpression(value) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof TitleExpression) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        /** @type {?} */
        let title = new TitleExpression(process.Model);
        if (typeof (value) === 'string' || value == null) {
            title = new TitleExpression(process.Model, value);
        }
        else {
            title = new TitleExpression(process.Model, value['zh-CHS'], value);
        }
        extendElements.push(title);
    }
    /**
     * @param {?} ffName
     * @param {?=} bizObjId
     * @param {?=} ffId
     * @return {?}
     */
    updateProcessHeader(ffName, bizObjId, ffId) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            for (let i in extendElements) {
                if (extendElements[i] instanceof ProcessHeader) {
                    ((/** @type {?} */ (extendElements[i]))).BizDefName = ffName;
                    ((/** @type {?} */ (extendElements[i]))).BizObjId = bizObjId;
                    ((/** @type {?} */ (extendElements[i]))).BizDefKey = ffId;
                    return;
                }
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    bindProcessTitleExpression(value) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        /** @type {?} */
        const titleExpression = (/** @type {?} */ (extendElements.find((/**
         * @param {?} e
         * @return {?}
         */
        e => e.ClrTypeID === TitleExpression.Clr_Type_ID))));
        if (titleExpression && titleExpression.value) {
            return;
        }
        /** @type {?} */
        const title = new TitleExpression(process.Model, value);
        extendElements.push(title);
    }
    /**
     * 基于流程分类的切换更新流程构件
     * @param {?} procCpts
     * @return {?}
     */
    updateProcessComponents(procCpts) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        //删除流程构件
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof Component
                    && ((/** @type {?} */ (extendElements[i - 1]))).Time !== ToolTime.UNDEFINITION) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        //重新绑定
        if (procCpts && procCpts.length > 0) {
            for (let procCpt of procCpts) {
                /** @type {?} */
                let cpt = new Component(process.Model);
                cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                cpt.MetadataId = procCpt.metadataId;
                cpt.MethodCode = procCpt.methodCode;
                cpt.Id = procCpt.id;
                cpt.Name = procCpt.name;
                cpt.isForCompensation = procCpt.isForCompensation;
                cpt.ActualParameters = [];
                if (procCpt.actualParameters && procCpt.actualParameters.length > 0) {
                    for (let item of procCpt.actualParameters) {
                        /** @type {?} */
                        let parameter = new ActualParameter(process.Model, item.code, item.value);
                        cpt.ActualParameters.push(parameter);
                    }
                }
                extendElements.push(cpt);
            }
        }
    }
    /**
     * @param {?} assign
     * @return {?}
     */
    updateAllowPreAssign(assign) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            for (let i in extendElements) {
                if (extendElements[i] instanceof ProcessHeader) {
                    ((/** @type {?} */ (extendElements[i]))).allowPreAssign = assign;
                    return;
                }
            }
        }
    }
    /**
     * @param {?} priority
     * @return {?}
     */
    updateEnablePriority(priority) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            for (let i in extendElements) {
                if (extendElements[i] instanceof ProcessHeader) {
                    ((/** @type {?} */ (extendElements[i]))).enablePriority = priority;
                    return;
                }
            }
        }
    }
    /**
     * @param {?} startMode
     * @param {?} allCmps
     * @param {?} bizCmps
     * @return {?}
     */
    updateStartMode(startMode, allCmps, bizCmps) {
        // 对于启动方式的提示信息
        switch (startMode) {
            case StartMode.DIRECT:
                this.editorUi.fireEvent(new mxEventObject(WfEvents.ShowTips, "data", {
                    type: 'message',
                    level: 'info',
                    message: mxResources.get("directTips"),
                }));
                break;
            case StartMode.EXTERNAL_PROCESS:
                this.editorUi.fireEvent(new mxEventObject(WfEvents.ShowTips, "data", {
                    type: 'message',
                    level: 'info',
                    message: mxResources.get("externalTips"),
                }));
                break;
            case StartMode.SUB_PROCESS:
                this.editorUi.fireEvent(new mxEventObject(WfEvents.ShowTips, "data", {
                    type: 'message',
                    level: 'info',
                    message: mxResources.get("subprocessTips"),
                }));
                break;
        }
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            /** @type {?} */
            const procHeader = (/** @type {?} */ (extendElements.filter((/**
             * @param {?} e
             * @return {?}
             */
            e => e instanceof ProcessHeader))));
            // 修改启动方式
            procHeader[0].startMode = startMode;
            /** @type {?} */
            const procCpts = allCmps;
            //删除流程构件
            if (extendElements.length > 0) {
                for (let i = extendElements.length; i > 0; i--) {
                    if (extendElements[i - 1] instanceof Component
                        && ((/** @type {?} */ (extendElements[i - 1]))).Time !== ToolTime.UNDEFINITION
                        && ((/** @type {?} */ (extendElements[i - 1]))).Time !== ToolTime.LOADDATA) {
                        extendElements.splice(i - 1, 1);
                    }
                }
            }
            allCmps && allCmps.forEach((/**
             * @param {?} procCpt
             * @return {?}
             */
            procCpt => {
                /** @type {?} */
                const cpt = new Component(process.Model);
                cpt.Time = (/** @type {?} */ (procCpt.executionTime));
                cpt.MetadataId = procCpt.metadataId;
                cpt.MethodCode = procCpt.methodCode;
                cpt.Id = procCpt.id;
                cpt.Name = procCpt.name;
                cpt.isForCompensation = procCpt.isForCompensation;
                cpt.ActualParameters = [];
                if (procCpt.scopeType) {
                    cpt.ScopeType = procCpt.scopeType;
                }
                else {
                    cpt.ScopeType = "Undefined";
                }
                procCpt.actualParameters && procCpt.actualParameters.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                (item) => {
                    /** @type {?} */
                    let parameter = new ActualParameter(process.Model, item.code, item.value);
                    cpt.ActualParameters.push(parameter);
                }));
                extendElements.push(cpt);
            }));
            /** @type {?} */
            const procCmps = (/** @type {?} */ (extendElements.filter((/**
             * @param {?} e
             * @return {?}
             */
            e => e instanceof Component))));
            // 如果启动方式是子流程,只保留取数构件
            if (startMode === StartMode.SUB_PROCESS) {
                // Utils.postMessage(ResourceKeys.wf_showTip, {
                //     type: 'message',
                //     level: 'info',
                //     message: `启动方式为子流程，需要移除取数构件以外的流程构件`,
                // });
                for (let i = extendElements.length; i > 0; i--) {
                    if (extendElements[i - 1] instanceof Component) {
                        /** @type {?} */
                        const cmp = (/** @type {?} */ (extendElements[i - 1]));
                        if (cmp.Time !== ToolTime.UNDEFINITION
                            && cmp.Time !== ToolTime.LOADDATA
                            && (cmp.ScopeType !== StartMode.SUB_PROCESS && cmp.ScopeType !== "All_Process")) {
                            extendElements.splice(i - 1, 1);
                        }
                    }
                }
            }
            // 如果启动方式是直接启动,不允许存在共享的构件
            if (startMode === StartMode.DIRECT) {
                // 判断有没有共享（PF）的流程构件
                /** @type {?} */
                const pfCmps = procCmps.filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                (p) => WfDesignerUtils.isPfComponent(p.MetadataId)));
                if (pfCmps && pfCmps.length > 0) {
                    // 删掉共享的构件和启动方式
                    for (let i = extendElements.length; i > 0; i--) {
                        if (extendElements[i - 1] instanceof Component) {
                            /** @type {?} */
                            const cmp = (/** @type {?} */ (extendElements[i - 1]));
                            if (WfDesignerUtils.isPfComponent(cmp.MetadataId)
                                || cmp.ScopeType === StartMode.EXTERNAL_PROCESS
                                || cmp.ScopeType === StartMode.SUB_PROCESS) {
                                extendElements.splice(i - 1, 1);
                            }
                        }
                    }
                }
                // 如果启动方式是外部流程
            }
            else if (startMode === StartMode.EXTERNAL_PROCESS) {
                // const otherCmps = procCmps.filter((p: Component) => (p.MetadataId !== ResourceKeys.pf_Cmp_Id1
                //     && p.MetadataId !== ResourceKeys.pf_Cmp_Id2
                //     && p.MetadataId !== ResourceKeys.pf_Cmp_Id3
                //     && p.MetadataId !== ResourceKeys.pf_Cmp_Id4
                //     && p.Time !== ToolTime.LOADDATA
                // ));
                // 判断有没有预制外部流程通用构件
                /** @type {?} */
                let externalCmps = false;
                /** @type {?} */
                const cmps = bizCmps;
                if (cmps && cmps.length > 0) {
                    // 此处标记是外部流程通用构件
                    for (const c of cmps) {
                        if (c.scopeType === 'ExternalProcess') {
                            externalCmps = true;
                            break;
                        }
                    }
                    // 如果预制了外部流程通用构件,只保留取数构件，没有则不处理
                    if (externalCmps) {
                        for (let i = extendElements.length; i > 0; i--) {
                            if (extendElements[i - 1] instanceof Component) {
                                /** @type {?} */
                                const cmp = (/** @type {?} */ (extendElements[i - 1]));
                                if (cmp.Time !== ToolTime.UNDEFINITION
                                    && cmp.Time !== ToolTime.LOADDATA
                                    && (cmp.ScopeType === StartMode.DIRECT
                                        || cmp.ScopeType === StartMode.SUB_PROCESS
                                        || cmp.ScopeType === "Undefined")) {
                                    extendElements.splice(i - 1, 1);
                                }
                            }
                        }
                    }
                }
            }
        }
        this.editorUi.fireEvent(new mxEventObject(PmfEvents.ShowProperty));
    }
    /**
     * @param {?} variables
     * @return {?}
     */
    updateProcessVariables(variables) {
        /** @type {?} */
        let process = this.process;
        /** @type {?} */
        let objects = process.GetDataObjects();
        /** @type {?} */
        const extendElements = process.GetExtensionElements();
        if (objects && objects.length > 0) {
            for (const o of objects) {
                if (o instanceof ValuedDataObject && o.DataType.Category !== DataTypes.CustomType) {
                    if (o.variableSetting && o.variableSetting.tag === 'component') {
                        /** @type {?} */
                        const i = extendElements.findIndex((/**
                         * @param {?} e
                         * @return {?}
                         */
                        e => (e instanceof Component && e.Id === o.variableSetting.value)));
                        extendElements.splice(i, 1);
                    }
                    process.RemoveDataObject(o.Id);
                }
            }
        }
        if (variables !== null && variables.length > 0) {
            for (const v of variables) {
                /** @type {?} */
                const dataType = new DataType(process.Model);
                dataType.Category = DataTypes.BasicType;
                dataType.BasicType = v.basicType;
                dataType.Description = v.description;
                /** @type {?} */
                const dataObject = new ValuedDataObject(process.Model);
                dataObject.Id = v.id;
                dataObject.Name = v.name;
                dataObject.Documentation = v.documentation;
                dataObject.DataType = dataType;
                if (v.tag && v.value) {
                    /** @type {?} */
                    const variableSetting = new VariableSetting(process.Model);
                    variableSetting.variableCode = v.name;
                    variableSetting.variableName = v.documentation;
                    variableSetting.tag = v.tag;
                    variableSetting.value = v.value;
                    variableSetting.valueText = v.valueText;
                    dataObject.variableSetting = variableSetting;
                    if (variableSetting.tag === 'component') {
                        /** @type {?} */
                        const c = v.component;
                        if (c) {
                            /** @type {?} */
                            let cpt = new Component(process.Model);
                            cpt.MetadataId = c.MetadataId;
                            cpt.MethodCode = c.MethodCode;
                            cpt.Id = c.Id;
                            cpt.Name = c.Name;
                            cpt.ActualParameters = new Array();
                            if (c.ActualParameters && c.ActualParameters.length > 0) {
                                for (let a of c.ActualParameters) {
                                    /** @type {?} */
                                    let parameter = new ActualParameter(process.Model, a.Name, a.Value);
                                    parameter.Tag = a.Tag;
                                    cpt.ActualParameters.push(parameter);
                                }
                            }
                            extendElements.push(cpt);
                        }
                    }
                }
                process.AddDataObject(dataObject);
            }
        }
    }
    /**
     * @param {?} timeLimit
     * @return {?}
     */
    updateProcessTimeLimitControl(timeLimit) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof TimeLimitControl) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        /** @type {?} */
        const timeLimitInfo = (/** @type {?} */ (timeLimit));
        if (timeLimitInfo) {
            /** @type {?} */
            const control = new TimeLimitControl(process.Model);
            control.enable = timeLimitInfo.enable;
            control.tag = timeLimitInfo.tag;
            control.dueTime = timeLimitInfo.dueTime;
            control.timeUnit = timeLimitInfo.timeUnit;
            control.expireOperations = new Array();
            if (timeLimitInfo.expireOperations && timeLimitInfo.expireOperations.length > 0) {
                for (const o of timeLimitInfo.expireOperations) {
                    if (o.operationTypeName === 'SendMessageExpireOperation' || !o.operationTypeName) {
                        /** @type {?} */
                        const operation = (/** @type {?} */ (o));
                        /** @type {?} */
                        const sendMessage = new SendMessageExpireOperation(process.Model);
                        sendMessage.id = BpmnModelHelper.GenerateElementId();
                        sendMessage.durationType = (/** @type {?} */ (operation.durationType));
                        sendMessage.timeDuration = operation.timeDuration;
                        sendMessage.timeUnit = operation.timeUnit;
                        sendMessage.operationTypeName = operation.operationTypeName ? operation.operationTypeName : 'SendMessageExpireOperation';
                        sendMessage.message = operation.message;
                        sendMessage.subject = operation.subject;
                        sendMessage.sendType = operation.sendType;
                        sendMessage.receiver = operation.receiver;
                        sendMessage.receiverText = operation.receiverText;
                        sendMessage.cycleEnable = operation.cycleEnable;
                        sendMessage.cycleTime = operation.cycleTime;
                        sendMessage.cycleTimeUnit = operation.cycleTimeUnit;
                        if (operation.smsMessageTemplate) {
                            /** @type {?} */
                            const smsMessageTemplate = new SmsMessageTemplate(process.Model);
                            smsMessageTemplate.code = operation.smsMessageTemplate.code;
                            smsMessageTemplate.content = operation.smsMessageTemplate.content;
                            smsMessageTemplate.smsMessageVariables = new Array();
                            if (operation.smsMessageTemplate.smsMessageVariables && operation.smsMessageTemplate.smsMessageVariables.length > 0) {
                                for (const v of operation.smsMessageTemplate.smsMessageVariables) {
                                    /** @type {?} */
                                    const variable = new SmsMessageVariable(process.Model);
                                    variable.code = v.code;
                                    variable.value = v.value;
                                    variable.tag = v.tag;
                                    smsMessageTemplate.smsMessageVariables.push(variable);
                                }
                            }
                            sendMessage.smsMessageTemplate = smsMessageTemplate;
                        }
                        control.expireOperations.push(sendMessage);
                    }
                    else if (o.operationTypeName === 'AutoHandleExpireOperation') {
                        /** @type {?} */
                        const operation = (/** @type {?} */ (o));
                        /** @type {?} */
                        const autoHandle = new AutoHandleExpireOperation(process.Model);
                        autoHandle.id = BpmnModelHelper.GenerateElementId();
                        autoHandle.durationType = (/** @type {?} */ (operation.durationType));
                        autoHandle.timeDuration = operation.timeDuration;
                        autoHandle.timeUnit = operation.timeUnit;
                        autoHandle.operationTypeName = operation.operationTypeName ? operation.operationTypeName : 'AutoHandleExpireOperation';
                        autoHandle.autoHandleType = operation.autoHandleType;
                        autoHandle.message = operation.message;
                        control.expireOperations.push(autoHandle);
                    }
                }
            }
            extendElements.push(control);
        }
    }
    /**
     * @param {?} notices
     * @return {?}
     */
    updateProcessMessageNotices(notices) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof MessageNotice) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        if (notices && notices.length > 0) {
            for (let n of notices) {
                /** @type {?} */
                const messageNotice = new MessageNotice(process.Model);
                messageNotice.sendType = n.sendType;
                messageNotice.sendTime = n.sendTime;
                messageNotice.subject = n.subject;
                messageNotice.content = n.content;
                // messageNotice.receiver = n.receiver;
                // messageNotice.receiverText = n.receiverText;
                n.receivers = n.receivers.filter((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.type));
                if (n.receivers && n.receivers.length > 0) {
                    /** @type {?} */
                    const receivers = n.receivers.filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => r.type === 'userParticipant'
                        || (r.type === 'processParticipant' && r.processParticipant !== 'activityExecutorParticipant')));
                    /** @type {?} */
                    const participants = n.receivers.filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => r.type === 'variableParticipant' || r.type === 'positionParticipant'
                        || (r.type === 'processParticipant' && r.processParticipant === 'activityExecutorParticipant')));
                    if (receivers && receivers.length > 0) {
                        /** @type {?} */
                        let receiver = '';
                        /** @type {?} */
                        let receiverName = '';
                        for (const r of receivers) {
                            if (r.type === 'processParticipant') {
                                receiver += (r.processParticipant + ',');
                                if (r.processParticipant === 'procInstCreator') {
                                    receiverName += '流程发起人,';
                                }
                                else if (r.processParticipant === 'workItemParticipant') {
                                    receiverName += '任务接收人,';
                                }
                            }
                            else if (r.type === 'userParticipant') {
                                receiver += (r.userIds + ',');
                                receiverName += (r.userNames + ',');
                            }
                        }
                        if (receiver) {
                            receiver = receiver.substring(0, receiver.length - 1);
                        }
                        if (receiverName) {
                            receiverName = receiverName.substring(0, receiverName.length - 1);
                        }
                        messageNotice.receiver = receiver;
                        messageNotice.receiverText = receiverName;
                    }
                    if (participants && participants.length > 0) {
                        /** @type {?} */
                        const receiverExpressions = new Array();
                        for (const p of participants) {
                            if (p.type === 'processParticipant') {
                                /** @type {?} */
                                let activityExecutor = new ActivityExecutorParticipantExpression(process.Model);
                                activityExecutor.id = BpmnModelHelper.GenerateElementId();
                                activityExecutor.activityDefId = p.activityDefId;
                                activityExecutor.activityDefName = p.activityDefName;
                                receiverExpressions.push(activityExecutor);
                            }
                            if (p.type === 'variableParticipant') {
                                /** @type {?} */
                                let variableParticipant = new UserParticipantExpression(process.Model, p.variableParticipant, p.variableName, p.orgType);
                                variableParticipant.id = BpmnModelHelper.GenerateElementId();
                                variableParticipant.Tag = 'expression';
                                variableParticipant.OrgType = p.orgType;
                                receiverExpressions.push(variableParticipant);
                            }
                            if (p.type === 'positionParticipant') {
                                /** @type {?} */
                                let posiParticipant = new PositionParticipantExpression(process.Model, p.positionId, p.positionName);
                                posiParticipant.id = BpmnModelHelper.GenerateElementId();
                                posiParticipant.PositionType = p.positionType;
                                if (p.positionType === '1') {
                                    posiParticipant.OrgId = p.orgId;
                                    posiParticipant.OrgType = p.orgType;
                                }
                                receiverExpressions.push(posiParticipant);
                            }
                        }
                        messageNotice.receiverExpressions = receiverExpressions;
                    }
                }
                if (n.smsMessageTemplate) {
                    /** @type {?} */
                    const smsMessageTemplate = new SmsMessageTemplate(process.Model);
                    smsMessageTemplate.code = n.smsMessageTemplate.code;
                    smsMessageTemplate.content = n.smsMessageTemplate.content;
                    smsMessageTemplate.smsMessageVariables = new Array();
                    if (n.smsMessageTemplate.smsMessageVariables && n.smsMessageTemplate.smsMessageVariables.length > 0) {
                        for (const v of n.smsMessageTemplate.smsMessageVariables) {
                            /** @type {?} */
                            const variable = new SmsMessageVariable(process.Model);
                            variable.code = v.code;
                            variable.value = v.value;
                            variable.tag = v.tag;
                            smsMessageTemplate.smsMessageVariables.push(variable);
                        }
                    }
                    messageNotice.smsMessageTemplate = smsMessageTemplate;
                }
                extendElements.push(messageNotice);
            }
        }
    }
    /**
     * @param {?} imageSettings
     * @return {?}
     */
    updateImageSettings(imageSettings) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        if (extendElements.length > 0) {
            for (let i = extendElements.length; i > 0; i--) {
                if (extendElements[i - 1] instanceof ImageSettings) {
                    extendElements.splice(i - 1, 1);
                }
            }
        }
        if (imageSettings) {
            /** @type {?} */
            const imageSetting = new ImageSettings(process.Model);
            imageSetting.imageOperation = imageSettings.imageOperation;
            extendElements.push(imageSetting);
        }
    }
    /**
     * 更新扩展属性
     * @param {?} value
     * @return {?}
     */
    resetExtendProperty(value) {
        /** @type {?} */
        const process = this.process;
        /** @type {?} */
        let extendElements = process.GetExtensionElements();
        for (const o of value) {
            for (const e of extendElements) {
                if (e instanceof ExtendProperty && e.key === o.code) {
                    /** @type {?} */
                    const index = extendElements.indexOf(e);
                    if (index > -1) {
                        extendElements.splice(index, 1);
                    }
                }
            }
        }
        /** @type {?} */
        let attributes = (/** @type {?} */ (value));
        if (attributes) {
            attributes.forEach((/**
             * @param {?} a
             * @return {?}
             */
            a => {
                /** @type {?} */
                let item = new ExtendProperty(process.Model);
                item.key = a.code;
                item.value = a.value;
                extendElements.push(item);
            }));
        }
    }
    /**
     * @param {?} wholeOrderRetrieve
     * @return {?}
     */
    updateEnableWholeOrderRetrieve(wholeOrderRetrieve) {
        /** @type {?} */
        let extendElements = this.process.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            for (let i in extendElements) {
                if (extendElements[i] instanceof ProcessHeader) {
                    ((/** @type {?} */ (extendElements[i]))).enableWholeOrderRetrieve = wholeOrderRetrieve;
                    return;
                }
            }
        }
    }
}
if (false) {
    /** @type {?} */
    WfProcessCell.prototype.process;
    /** @type {?} */
    WfProcessCell.prototype.plane;
    /** @type {?} */
    WfProcessCell.prototype.editorUi;
    /** @type {?} */
    WfProcessCell.prototype.uiState;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2ZQcm9jZXNzQ2VsbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvZGVzaWduZXIvd2YtY2VsbC9XZlByb2Nlc3NDZWxsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQTRCLHFCQUFxQixFQUFpQyxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDOUksT0FBTyxFQUFpQyxlQUFlLEVBQW9CLFNBQVMsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEksT0FBTyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUF1QyxhQUFhLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsNkJBQTZCLEVBQUUseUJBQXlCLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsOEJBQThCLEVBQUUsMEJBQTBCLEVBQUUseUJBQXlCLEVBQUUsNkJBQTZCLEVBQUUscUNBQXFDLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLEdBQUcsTUFBTSwwQkFBMEIsQ0FBQztBQUN0a0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVqRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDckQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN2QyxPQUFPLEVBQUUsbUJB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LENBQUMsbUJBQUEsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFpQixDQUFDLENBQUMsd0JBQXdCLEdBQUcsa0JBQWtCLENBQUM7b0JBQ25GLE9BQU87aUJBQ1Y7YUFDSjtTQUNKO0lBQ0wsQ0FBQztDQUNKOzs7SUE3NkNHLGdDQUFpQjs7SUFDakIsOEJBQWlCOztJQUNqQixpQ0FBcUI7O0lBQ3JCLGdDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhcnJpc1Byb3BDb25maWdXaXRoRGF0YSwgRWxlbWVudFByb3BlcnR5Q29uZmlnLCBJRmFycmlzUHJvcGVydHlQYW5lbE9wZXJhdGlvbiwgUG1mRXZlbnRzLCBQcm9jZXNzQ2VsbCB9IGZyb20gXCJAZWRwLXBtZi9ncmFwaGVkaXRvclwiO1xyXG5pbXBvcnQgeyBCcG1uTW9kZWwsIFByb2Nlc3MsIEJQTU5QbGFuZSwgQnBtbk1vZGVsSGVscGVyLCBFeHRlbnNpb25FbGVtZW50LCBEYXRhVHlwZXMsIERhdGFUeXBlLCBEYXRhT2JqZWN0IH0gZnJvbSBcIkBlZHAtcG1mL2JwbW4tbW9kZWxcIjtcclxuaW1wb3J0IHsgUHJvY2Vzc0hlYWRlciwgU3RhcnRNb2RlLCBDb21wb25lbnQsIFBhcnRpY2lwYW50RXhwcmVzc2lvbiwgRHVyYXRpb25UeXBlLCBDRFRTY2hlbWFUeXBlLCBUb29sVGltZSwgRXhlY3V0ZUZvcm0sIFZhcmlhYmxlU2V0dGluZywgQWN0dWFsUGFyYW1ldGVyLCBUaXRsZUV4cHJlc3Npb24sIEN1c3RvbWl6ZUFjdGlvbiwgTWVzc2FnZU5vdGljZSwgVGltZUxpbWl0Q29udHJvbCwgRXh0ZW5kUHJvcGVydHksIEltYWdlU2V0dGluZ3MsIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLCBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uLCBWYWx1ZWREYXRhT2JqZWN0LCBUaW1lTGltaXRDb250cm9sSW5mbywgU2VuZE1lc3NhZ2VFeHBpcmVPcGVyYXRpb25JbmZvLCBTZW5kTWVzc2FnZUV4cGlyZU9wZXJhdGlvbiwgQXV0b0hhbmRsZUV4cGlyZU9wZXJhdGlvbiwgQXV0b0hhbmRsZUV4cGlyZU9wZXJhdGlvbkluZm8sIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFNtc01lc3NhZ2VUZW1wbGF0ZSwgU21zTWVzc2FnZVZhcmlhYmxlLCB9IGZyb20gXCJAZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWxcIjtcclxuaW1wb3J0IHsgbXhFdmVudE9iamVjdCwgbXhSZXNvdXJjZXMgfSBmcm9tIFwiQGVkcC1wbWYvbXhncmFwaC10c1wiO1xyXG5pbXBvcnQgeyBXZkVkaXRvclVpIH0gZnJvbSBcIi4uL1dmRWRpdG9yVWlcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVJlY2VpdmVyIH0gZnJvbSBcIi4uL2VudGl0eS9NZXNzYWdlUmVjZWl2ZXJcIjtcclxuaW1wb3J0IHsgQml6Q29tcG9uZW50IH0gZnJvbSBcIi4uL2VudGl0eS9CaXpDb21wb25lbnRcIjtcclxuaW1wb3J0IHsgQml6UGFyYW1ldGVyIH0gZnJvbSBcIi4uL2VudGl0eS9CaXpQYXJhbWV0ZXJcIjtcclxuaW1wb3J0IHsgV2ZEZXNpZ25lclV0aWxzIH0gZnJvbSBcIi4uL1dmRGVzaWduZXJVdGlsc1wiO1xyXG5pbXBvcnQgeyBXZkV2ZW50cyB9IGZyb20gXCIuLi9XZkV2ZW50c1wiO1xyXG5pbXBvcnQgeyBQcm9jZXNzUHJvcGVydHlLZXlzIH0gZnJvbSBcIi4vcHJvcGVydHkta2V5cy9Qcm9jZXNzUHJvcGVydHlLZXlzXCI7XHJcbmltcG9ydCB7IFByb3BlcnR5SGVscGVyIH0gZnJvbSBcIi4vUHJvcGVydHlIZWxwZXJcIjtcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gXCIuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlXCI7XHJcbmltcG9ydCB7IFdmTG9jYWxlUGlwZSB9IGZyb20gXCIuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGVcIjtcclxuXHJcbi8qKlxyXG4gKiDmtYHnqIvlhYPntKDnsbvjgIJcclxuICog5Y+W5ZCN6Jm954S2Q2VsbO+8jOS9huWunumZheS4iuS4jemcgOimgee7p+aJv214Q2VsbOS7peWPikNlbGznsbvvvIzku4XmjIHmnInmtYHnqIvkuI7nlLvluIPlrp7kvovvvIzmlrnms5XlsZ7mgKfojrflj5bkuI7kv67mlLnmk43kvZzjgIJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBXZlByb2Nlc3NDZWxsIGV4dGVuZHMgUHJvY2Vzc0NlbGwge1xyXG4gICAgcHJvY2VzczogUHJvY2VzcztcclxuICAgIHBsYW5lOiBCUE1OUGxhbmU7XHJcbiAgICBlZGl0b3JVaTogV2ZFZGl0b3JVaTtcclxuICAgIHVpU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGU7XHJcblxyXG4gICAgZ2V0RmFycmlzUHJvcENvbmZpZygpOiBGYXJyaXNQcm9wQ29uZmlnV2l0aERhdGEge1xyXG4gICAgICAgIGxldCBleHRlbmRMaXN0ID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdG9yVWkucHJvY0V4dFByb3BzICYmIHRoaXMuZWRpdG9yVWkucHJvY0V4dFByb3BzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZXh0ZW5kTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0b3JVaS5wcm9jRXh0UHJvcHMpKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zb3J0T3JkZXIgLSBiLnNvcnRPcmRlcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4dGVuZExpc3QgPSBleHRlbmRMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBwcm9wZXJ0eURhdGEgPSB7fTtcclxuICAgICAgICBsZXQgdXN1YWwgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgdXN1YWwuY2F0ZWdvcnlJZCA9ICd1c3VhbCc7XHJcbiAgICAgICAgdXN1YWwuY2F0ZWdvcnlOYW1lID0gIG14UmVzb3VyY2VzLmdldChcImJhc2ljSW5mb1wiKTtcclxuICAgICAgICB1c3VhbC50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgdXN1YWwudGFiTmFtZSA9ICBteFJlc291cmNlcy5nZXQoXCJiYXNpY1wiKTtcclxuICAgICAgICB1c3VhbC5wcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMuTmFtZSwgcHJvcGVydHlOYW1lOiAgbXhSZXNvdXJjZXMuZ2V0KFwibmFtZVwiKSwgcHJvcGVydHlUeXBlOiAnc3RyaW5nJywgdmlzaWJsZTogIXRoaXMuZWRpdG9yVWkubXVsdGlMYW5nRW5hYmxlZCB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMuTmFtZUxhbmd1YWdlLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJuYW1lTGFuZ3VhZ2VcIiksIHByb3BlcnR5VHlwZTogJ211bHRpTGFuZ3VhZ2UnLCB2aXNpYmxlOiB0aGlzLmVkaXRvclVpLm11bHRpTGFuZ0VuYWJsZWQgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLktleSwgcHJvcGVydHlOYW1lOiAgbXhSZXNvdXJjZXMuZ2V0KFwia2V5XCIpLCBwcm9wZXJ0eVR5cGU6ICdzdHJpbmcnLCByZWFkb25seTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMuRW50cnlGb3JtLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJlbnRyeUZvcm1cIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMuc3RhcnRNb2RlLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJzdGFydE1vZGVcIiksIHByb3BlcnR5VHlwZTogJ3NlbGVjdCcgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLndmX1RpdGxlRXhwcmVzc2lvbiwgcHJvcGVydHlOYW1lOiAgbXhSZXNvdXJjZXMuZ2V0KFwid2ZUaXRsZVwiKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IGZvcm1EZWYgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgZm9ybURlZi5jYXRlZ29yeUlkID0gJ2Zvcm1EZWYnO1xyXG4gICAgICAgIGZvcm1EZWYuY2F0ZWdvcnlOYW1lID0gIG14UmVzb3VyY2VzLmdldChcImZvcm1EZWZcIik7XHJcbiAgICAgICAgZm9ybURlZi50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgZm9ybURlZi50YWJOYW1lID0gIG14UmVzb3VyY2VzLmdldChcImJhc2ljXCIpO1xyXG4gICAgICAgIGZvcm1EZWYucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQywgcHJvcGVydHlOYW1lOiAgbXhSZXNvdXJjZXMuZ2V0KFwiZm9ybXNQQ1wiKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJmb3Jtc01vYmlsZVwiKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IHByb2Nlc3MgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgcHJvY2Vzcy5jYXRlZ29yeUlkID0gJ3Byb2Nlc3MnO1xyXG4gICAgICAgIHByb2Nlc3MuY2F0ZWdvcnlOYW1lID0gIG14UmVzb3VyY2VzLmdldChcInByb2Nlc3NcIik7XHJcbiAgICAgICAgcHJvY2Vzcy50YWJJZCA9ICdhZHZhbmNlZCc7XHJcbiAgICAgICAgcHJvY2Vzcy50YWJOYW1lID0gIG14UmVzb3VyY2VzLmdldChcImFkdmFuY2VkXCIpO1xyXG4gICAgICAgIHByb2Nlc3MucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLndmX0NvbXBvbmVudCwgcHJvcGVydHlOYW1lOiAgbXhSZXNvdXJjZXMuZ2V0KFwid2ZDb21wb25lbnRcIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGxldCBhZHZhbmNlZCA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBhZHZhbmNlZC5jYXRlZ29yeUlkID0gJ2FkdmFuY2VkJztcclxuICAgICAgICBhZHZhbmNlZC5jYXRlZ29yeU5hbWUgPSAgbXhSZXNvdXJjZXMuZ2V0KFwib3RoZXJDb25maWdcIik7XHJcbiAgICAgICAgYWR2YW5jZWQudGFiSWQgPSAnYWR2YW5jZWQnO1xyXG4gICAgICAgIGFkdmFuY2VkLnRhYk5hbWUgPSAgbXhSZXNvdXJjZXMuZ2V0KFwiYWR2YW5jZWRcIik7XHJcbiAgICAgICAgYWR2YW5jZWQucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLnByb2Nlc3NWYXJpYWJsZXMsIHByb3BlcnR5TmFtZTogIG14UmVzb3VyY2VzLmdldChcInByb2Nlc3NWYXJpYWJsZXNcIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMud2ZfQ3VzdG9taXplQWN0aW9uLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJjdXN0b21pemVBY3Rpb25cIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IFByb2Nlc3NQcm9wZXJ0eUtleXMuZW5hYmxlUHJpb3JpdHksIHByb3BlcnR5TmFtZTogIG14UmVzb3VyY2VzLmdldChcImVuYWJsZVByaW9yaXR5XCIpLCBwcm9wZXJ0eVR5cGU6ICdzZWxlY3QnIH0sXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogUHJvY2Vzc1Byb3BlcnR5S2V5cy5lbmFibGVXaG9sZU9yZGVyUmV0cmlldmUsIHByb3BlcnR5TmFtZTogIG14UmVzb3VyY2VzLmdldChcImVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZVwiKSwgcHJvcGVydHlUeXBlOiAnc2VsZWN0JywgZGVzY3JpcHRpb246IG14UmVzb3VyY2VzLmdldChcImRlc2NyaXB0aW9uXCIpIH0sXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogUHJvY2Vzc1Byb3BlcnR5S2V5cy5pbWFnZVNldHRpbmdzLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJtZXNzYWdlUHJvcGVydHlcIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgdGltZS5jYXRlZ29yeUlkID0gJ21lc3NhZ2VQcm9wZXJ0eSc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOa2iOaBr+WxnuaAp1xyXG4gICAgICAgIHRpbWUuY2F0ZWdvcnlOYW1lID0gIG14UmVzb3VyY2VzLmdldChcInRpbWVsaW5lc3NJbmZvXCIpO1xyXG4gICAgICAgIHRpbWUudGFiSWQgPSAnYWR2YW5jZWQnO1xyXG4gICAgICAgIHRpbWUudGFiTmFtZSA9ICBteFJlc291cmNlcy5nZXQoXCJhZHZhbmNlZFwiKTtcclxuICAgICAgICB0aW1lLnByb3BlcnRpZXMgPSBbXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogUHJvY2Vzc1Byb3BlcnR5S2V5cy50aW1lTGltaXRDb250cm9sLCBwcm9wZXJ0eU5hbWU6ICBteFJlc291cmNlcy5nZXQoXCJ0aW1lTGltaXRDb250cm9sXCIpLCBwcm9wZXJ0eVR5cGU6ICdtb2RhbCcgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBQcm9jZXNzUHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2UsIHByb3BlcnR5TmFtZTogIG14UmVzb3VyY2VzLmdldChcIm1lc3NhZ2VOb3RpY2VcIiksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIOaJqeWxleWxnuaAp+WIhmdyb3Vw5aSE55CG77yM5q+P5LiqZ3JvdXDljIXlkKvniLbnuqflsZ7mgKflkozlsZ7kuo7lroPnmoTlrZDmianlsZXlsZ7mgKdcclxuICAgICAgICBjb25zdCBncm91cExpc3QgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGV4dGVuZCBvZiBleHRlbmRMaXN0KSB7XHJcbiAgICAgICAgICAgIGlmICghZXh0ZW5kLnBhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IHsgcGFyZW50OiBleHRlbmQsIGNoaWxkczogbmV3IEFycmF5KCkgfTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBleHRlbmRMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucGFyZW50SWQgPT09IGV4dGVuZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cC5jaGlsZHMucHVzaChlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBncm91cExpc3QucHVzaChncm91cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5rKh5pyJ5omp5bGV5bGe5oCn5YC855qE5pe25YCZ5LiN5pi+56S65omp5bGV5bGe5oCn5LiA5qCPXHJcbiAgICAgICAgaWYgKGdyb3VwTGlzdCAmJiBncm91cExpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbmRQcm9wZXJ0eSA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICAgICAgZXh0ZW5kUHJvcGVydHkuY2F0ZWdvcnlJZCA9ICdleHRlbmRQcm9wZXJ0eSc7XHJcbiAgICAgICAgICAgIGV4dGVuZFByb3BlcnR5LmNhdGVnb3J5TmFtZSA9ICBteFJlc291cmNlcy5nZXQoXCJleHRlbmRQcm9wZXJ0eVwiKTtcclxuICAgICAgICAgICAgZXh0ZW5kUHJvcGVydHkudGFiSWQgPSAnYWR2YW5jZWQnO1xyXG4gICAgICAgICAgICBleHRlbmRQcm9wZXJ0eS50YWJOYW1lID0gIG14UmVzb3VyY2VzLmdldChcImFkdmFuY2VkXCIpO1xyXG4gICAgICAgICAgICBleHRlbmRQcm9wZXJ0eS5wcm9wZXJ0aWVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIC8vIOe7hOe7h+aJqeWxleWxnuaAp+eahOS6jOe6p2xpc3RcclxuICAgICAgICAgICAgZm9yIChjb25zdCBnIG9mIGdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5kUHJvcGVydHkucHJvcGVydGllcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvcGVydHlJRDogZy5wYXJlbnQuaWQsIHByb3BlcnR5TmFtZTogZy5wYXJlbnQucHJvcGVydHlUaXRsZSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvY2Vzc1Byb3BlcnR5VmFsdWUocHJvcGVydHlEYXRhLCBncm91cExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlDb25maWc6IFt1c3VhbCwgZm9ybURlZiwgcHJvY2VzcywgdGltZSwgYWR2YW5jZWQsIGV4dGVuZFByb3BlcnR5XSxcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YTogcHJvcGVydHlEYXRhXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQcm9jZXNzUHJvcGVydHlWYWx1ZShwcm9wZXJ0eURhdGEsIGdyb3VwTGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eUNvbmZpZzogW3VzdWFsLCBmb3JtRGVmLCBwcm9jZXNzLCB0aW1lLCBhZHZhbmNlZF0sXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eURhdGE6IHByb3BlcnR5RGF0YVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9wcyhvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5SUQgPSBvYmoucHJvcGVydHlJRDtcclxuICAgICAgICBpZiAocHJvcGVydHlJRCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5SUQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0VudHJ5Rm9ybSc6Ly/mtYHnqIvliIbnsbtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDmtYHnqIvliIbnsbvlkI3np7DvvIjmtYHnqIvliIbnsbvlkI3np7Dlj6/og73kv67mlLnvvIlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NIZWFkZXIob2JqLnByb3BlcnR5VmFsdWUubmFtZSwgb2JqLnByb3BlcnR5VmFsdWUuYnVzaW5lc3NPYmplY3RJZCwgb2JqLnByb3BlcnR5VmFsdWUuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmxvd0Zvcm1JbmZvKG9iai5mb3JtYWxQYXJhbWV0ZXJzLCBvYmoucHJvY2Vzc0JpekNvbXBvbm5ldHMsIG9iai5leGVjdXRlRm9ybXMsIG9iai5jdXN0b21pemVBY3Rpb25zLCBvYmouYml6Q21wcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kUHJvY2Vzc1RpdGxlRXhwcmVzc2lvbihvYmouZmxvd0Zvcm0ucHJvY2Vzc0Rlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9Db21wb25lbnQ6IC8vIOa1geeoi+aehOS7tlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvY2Vzc0NvbXBvbmVudHMob2JqLnByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm9jZXNzUHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4ZWN1dGVGb3JtKG9iai5wcm9wZXJ0eVZhbHVlLCAnUEMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnBhcmFtZXRlcnMgJiYgb2JqLnBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eUhlbHBlci51cGRhdGVGb3JtYWxQYXJhbWV0ZXJzKHRoaXMucHJvY2Vzcywgb2JqLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXhlY3V0ZUZvcm0ob2JqLnByb3BlcnR5VmFsdWUsICdNT0JJTEUnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnBhcmFtZXRlcnMgJiYgb2JqLnBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eUhlbHBlci51cGRhdGVGb3JtYWxQYXJhbWV0ZXJzKHRoaXMucHJvY2Vzcywgb2JqLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9DdXN0b21pemVBY3Rpb246XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXN0b21pemVBY3Rpb25zKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9UaXRsZUV4cHJlc3Npb246XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZnlQcm9jZXNzVGl0bGVFeHByZXNzaW9uKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5hbGxvd1ByZUFzc2lnbjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbG93UHJlQXNzaWduKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5zdGFydE1vZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGFydE1vZGUob2JqLnByb3BlcnR5VmFsdWUsIG9iai5hbGxCaXpDbXBzLCBvYmouYml6Q21wcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMuZW5hYmxlUHJpb3JpdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFbmFibGVQcmlvcml0eShvYmoucHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMuZW5hYmxlV2hvbGVPcmRlclJldHJpZXZlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRW5hYmxlV2hvbGVPcmRlclJldHJpZXZlKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5wcm9jZXNzVmFyaWFibGVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvY2Vzc1ZhcmlhYmxlcyhvYmoucHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMudGltZUxpbWl0Q29udHJvbDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2Nlc3NUaW1lTGltaXRDb250cm9sKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5tZXNzYWdlTm90aWNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvY2Vzc01lc3NhZ2VOb3RpY2VzKG9iai5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5pbWFnZVNldHRpbmdzOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2VTZXR0aW5ncyhvYmoucHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWrVJlc291cmNlS2V5c+aYr+S4jeaYr2dyb3VwaWQs5piv5bCx6LWwcmVzZXRFeHRlbmRQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRvclVpLnByb2NFeHRQcm9wcy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBwcm9wZXJ0eUlEKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRFeHRlbmRQcm9wZXJ0eShvYmoucHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXIudXBkYXRlUHJvcHMob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIOiuvue9rua1geeoi+WxnuaAp+WAvFxyXG4gICAgKiBAcGFyYW0gYnBtbk1vZGVsXHJcbiAgICAqIEBwYXJhbSBwcm9wZXJ0eURhdGFcclxuICAgICogQHBhcmFtIGdyb3VwTGlzdFxyXG4gICAgKi9cclxuICAgIHNldFByb2Nlc3NQcm9wZXJ0eVZhbHVlKHByb3BlcnR5RGF0YTogYW55LCBncm91cExpc3Q/OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBsZXQgcHJvY2VzcyA9IHRoaXMucHJvY2VzcztcclxuICAgICAgICBpZiAocHJvY2Vzcykge1xyXG4gICAgICAgICAgICBpZiAoIXByb2Nlc3MuTmFtZSlcclxuICAgICAgICAgICAgICAgIHByb2Nlc3MuTmFtZSA9ICfpu5jorqTmtYHnqIsnO1xyXG4gICAgICAgICAgICBpZiAoIXByb2Nlc3MuS2V5KVxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5LZXkgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLklkXSA9IHByb2Nlc3MuSWQ7XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLkNsclR5cGVJRF0gPSBwcm9jZXNzLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgcHJvcGVydHlEYXRhW1Byb2Nlc3NQcm9wZXJ0eUtleXMuTmFtZV0gPSBwcm9jZXNzLk5hbWU7XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLk5hbWVMYW5ndWFnZV0gPSBwcm9jZXNzLk5hbWVMYW5ndWFnZSB8fCB7XHJcbiAgICAgICAgICAgICAgICBcInpoLUNIU1wiOiBwcm9jZXNzLk5hbWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLktleV0gPSBwcm9jZXNzLktleTtcclxuICAgICAgICAgICAgcHJvcGVydHlEYXRhW1Byb2Nlc3NQcm9wZXJ0eUtleXMud2ZfVGl0bGVFeHByZXNzaW9uXSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzOiBFeHRlbnNpb25FbGVtZW50W10gPSBwcm9jZXNzLkdldEV4dGVuc2lvbkVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSBbXTtcclxuICAgICAgICAgICAgbGV0IHdlYkZvcm07XHJcbiAgICAgICAgICAgIGxldCBtb2JpbGVGb3JtO1xyXG4gICAgICAgICAgICBsZXQgY3VzdG9taXplQWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgcHJvRXh0ZW5kUHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgaW1hZ2VTZXR0aW5ncztcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXNOb3RpY2VzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogZm9yaW5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBleHRlbmRFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2ldIGluc3RhbmNlb2YgUHJvY2Vzc0hlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLkVudHJ5Rm9ybV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuQml6RGVmS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuQml6RGVmTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlEYXRhW1Byb2Nlc3NQcm9wZXJ0eUtleXMuYWxsb3dQcmVBc3NpZ25dID0gKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFByb2Nlc3NIZWFkZXIpLmFsbG93UHJlQXNzaWduO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLnN0YXJ0TW9kZV0gPSAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuc3RhcnRNb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLmVuYWJsZVByaW9yaXR5XSA9IChleHRlbmRFbGVtZW50c1tpXSBhcyBQcm9jZXNzSGVhZGVyKS5lbmFibGVQcmlvcml0eSA/IChleHRlbmRFbGVtZW50c1tpXSBhcyBQcm9jZXNzSGVhZGVyKS5lbmFibGVQcmlvcml0eSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLmVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZV0gPSAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuZW5hYmxlV2hvbGVPcmRlclJldHJpZXZlID8gKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFByb2Nlc3NIZWFkZXIpLmVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2ldIGluc3RhbmNlb2YgQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKGV4dGVuZEVsZW1lbnRzW2ldIGFzIENvbXBvbmVudCkuVGltZSAhPT0gVG9vbFRpbWUuVU5ERUZJTklUSU9OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnB1c2godGhpcy5jb252ZXJ0MkNvbXBvbmVudChleHRlbmRFbGVtZW50c1tpXSBhcyBDb21wb25lbnQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpXSBpbnN0YW5jZW9mIEV4ZWN1dGVGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGV4dGVuZEVsZW1lbnRzW2ldIGFzIEV4ZWN1dGVGb3JtO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLlRlcm1pbmFsVHlwZSA9PT0gJ1BDJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWJGb3JtID0gZm9ybTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZvcm0uVGVybWluYWxUeXBlID09PSAnTU9CSUxFJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVGb3JtID0gZm9ybTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaV0gaW5zdGFuY2VvZiBUaXRsZUV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eURhdGFbUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9UaXRsZUV4cHJlc3Npb25dID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFRpdGxlRXhwcmVzc2lvbikudmFsdWVMYW5ndWFnZSA/IChleHRlbmRFbGVtZW50c1tpXSBhcyBUaXRsZUV4cHJlc3Npb24pLnZhbHVlTGFuZ3VhZ2UgOiAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgVGl0bGVFeHByZXNzaW9uKS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpXSBpbnN0YW5jZW9mIEN1c3RvbWl6ZUFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWl6ZUFjdGlvbnMucHVzaChleHRlbmRFbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaV0gaW5zdGFuY2VvZiBNZXNzYWdlTm90aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNOb3RpY2VzLnB1c2godGhpcy5nZXRNZXNzYWdlTm90aWNlKGV4dGVuZEVsZW1lbnRzW2ldIGFzIE1lc3NhZ2VOb3RpY2UpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpXSBpbnN0YW5jZW9mIFRpbWVMaW1pdENvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eURhdGFbUHJvY2Vzc1Byb3BlcnR5S2V5cy50aW1lTGltaXRDb250cm9sXSA9IHRoaXMuZ2V0UHJjb2Nlc3NUaW1lTGltaXRJbmZvKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFRpbWVMaW1pdENvbnRyb2wpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2ldIGluc3RhbmNlb2YgRXh0ZW5kUHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9FeHRlbmRQcm9wZXJ0aWVzLnB1c2goZXh0ZW5kRWxlbWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2ldIGluc3RhbmNlb2YgSW1hZ2VTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGltYWdlU2V0dGluZ3MucHVzaChleHRlbmRFbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlEYXRhW1Byb2Nlc3NQcm9wZXJ0eUtleXMuaW1hZ2VTZXR0aW5nc10gPSBleHRlbmRFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzVmFyaWFibGVzID0gdGhpcy5nZXRQcm9jZXNzVmFyaWFibGVzKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBwcm9wZXJ0eURhdGFbUHJvY2Vzc1Byb3BlcnR5S2V5cy5wcm9jZXNzVmFyaWFibGVzXSA9IHByb2Nlc3NWYXJpYWJsZXM7XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLndmX0NvbXBvbmVudF0gPSBjb21wb25lbnQ7XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQ10gPSB3ZWJGb3JtO1xyXG4gICAgICAgICAgICBwcm9wZXJ0eURhdGFbUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlXSA9IG1vYmlsZUZvcm07XHJcbiAgICAgICAgICAgIHByb3BlcnR5RGF0YVtQcm9jZXNzUHJvcGVydHlLZXlzLndmX0N1c3RvbWl6ZUFjdGlvbl0gPSBjdXN0b21pemVBY3Rpb25zO1xyXG4gICAgICAgICAgICBwcm9wZXJ0eURhdGFbUHJvY2Vzc1Byb3BlcnR5S2V5cy5tZXNzYWdlTm90aWNlXSA9IG1lc3NhZ2VzTm90aWNlcztcclxuICAgICAgICAgICAgZm9yIChjb25zdCBnIG9mIGdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8g5Y+W5Zue5qih5Z6L5LiK55qEdmFsdWXlgLznu5nliLDmianlsZXlsZ7mgKfnu4Tku7bph4xcclxuICAgICAgICAgICAgICAgIGlmIChwcm9FeHRlbmRQcm9wZXJ0aWVzICYmIHByb0V4dGVuZFByb3BlcnRpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGcuY2hpbGRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuZm9yRWFjaChkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvRXh0ZW5kUHJvcGVydGllcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09IGQuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWUgPSBlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YVtnLnBhcmVudC5pZF0gPSBnLmNoaWxkcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9jZXNzVmFyaWFibGVzKHByb2Nlc3M6IFByb2Nlc3MpOiBhbnlbXSB7XHJcbiAgICAgICAgbGV0IHByb2Nlc3NWYXJpYWJsZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBjb25zdCBleHRlbmRFbGVtZW50czogRXh0ZW5zaW9uRWxlbWVudFtdID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFPYmplY3RzID0gcHJvY2Vzcy5HZXREYXRhT2JqZWN0cygpO1xyXG4gICAgICAgIGlmIChkYXRhT2JqZWN0cyAhPT0gbnVsbCAmJiBkYXRhT2JqZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIGRhdGFPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgVmFsdWVkRGF0YU9iamVjdCAmJiBvYmouRGF0YVR5cGUuQ2F0ZWdvcnkgIT09IERhdGFUeXBlcy5DdXN0b21UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGU6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG9iai5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogb2JqLk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50YXRpb246IG9iai5Eb2N1bWVudGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNpY1R5cGU6IG9iai5EYXRhVHlwZS5CYXNpY1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogb2JqLnZhcmlhYmxlU2V0dGluZyA/IG9iai52YXJpYWJsZVNldHRpbmcudGFnIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmoudmFyaWFibGVTZXR0aW5nID8gb2JqLnZhcmlhYmxlU2V0dGluZy52YWx1ZSA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRleHQ6IG9iai52YXJpYWJsZVNldHRpbmcgPyBvYmoudmFyaWFibGVTZXR0aW5nLnZhbHVlVGV4dCA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogb2JqLkRhdGFUeXBlLkRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnZhcmlhYmxlU2V0dGluZyAmJiBvYmoudmFyaWFibGVTZXR0aW5nLnRhZyA9PT0gJ2NvbXBvbmVudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBleHRlbmRFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29tcG9uZW50ICYmIGUuSWQgPT09IG9iai52YXJpYWJsZVNldHRpbmcudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50OiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZDogZS5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IGUuTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ldGFkYXRhSWQ6IGUuTWV0YWRhdGFJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZENvZGU6IGUuTWV0aG9kQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbFBhcmFtZXRlcnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLkFjdHVhbFBhcmFtZXRlcnMgJiYgZS5BY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBlLkFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hbWU6IHAuTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWU6IHAuVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhZzogcC5UYWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuQWN0dWFsUGFyYW1ldGVycy5wdXNoKHBhcmFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzVmFyaWFibGVzLnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9jZXNzVmFyaWFibGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByY29jZXNzVGltZUxpbWl0SW5mbyh0aW1lTGltaXRDb250cm9sOiBUaW1lTGltaXRDb250cm9sKTogVGltZUxpbWl0Q29udHJvbEluZm8ge1xyXG4gICAgICAgIGxldCB0aW1lTGltaXQ7XHJcbiAgICAgICAgaWYgKHRpbWVMaW1pdENvbnRyb2wpIHtcclxuICAgICAgICAgICAgdGltZUxpbWl0ID0gbmV3IFRpbWVMaW1pdENvbnRyb2xJbmZvKCk7XHJcbiAgICAgICAgICAgIHRpbWVMaW1pdC5lbmFibGUgPSB0aW1lTGltaXRDb250cm9sLmVuYWJsZTtcclxuICAgICAgICAgICAgdGltZUxpbWl0LnRhZyA9IHRpbWVMaW1pdENvbnRyb2wudGFnO1xyXG4gICAgICAgICAgICB0aW1lTGltaXQuZHVlVGltZSA9IHRpbWVMaW1pdENvbnRyb2wuZHVlVGltZTtcclxuICAgICAgICAgICAgdGltZUxpbWl0LnRpbWVVbml0ID0gdGltZUxpbWl0Q29udHJvbC50aW1lVW5pdDtcclxuICAgICAgICAgICAgdGltZUxpbWl0LmV4cGlyZU9wZXJhdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgaWYgKHRpbWVMaW1pdENvbnRyb2wuZXhwaXJlT3BlcmF0aW9ucyAmJiB0aW1lTGltaXRDb250cm9sLmV4cGlyZU9wZXJhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IHRpbWVMaW1pdENvbnRyb2wuZXhwaXJlT3BlcmF0aW9ucztcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBvcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8uQ2xyVHlwZUlELmluZGV4T2YoJ1NlbmRNZXNzYWdlRXhwaXJlT3BlcmF0aW9uJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG8gYXMgU2VuZE1lc3NhZ2VFeHBpcmVPcGVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRNZXNzYWdlID0gbmV3IFNlbmRNZXNzYWdlRXhwaXJlT3BlcmF0aW9uSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS50aW1lRHVyYXRpb24gPSBvcGVyYXRpb24udGltZUR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5kdXJhdGlvblR5cGUgPSBvcGVyYXRpb24uZHVyYXRpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS50aW1lVW5pdCA9IG9wZXJhdGlvbi50aW1lVW5pdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UubWVzc2FnZSA9IG9wZXJhdGlvbi5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5zZW5kVHlwZSA9IG9wZXJhdGlvbi5zZW5kVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2Uuc3ViamVjdCA9IG9wZXJhdGlvbi5zdWJqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5pZCA9IG9wZXJhdGlvbi5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UucmVjZWl2ZXIgPSBvcGVyYXRpb24ucmVjZWl2ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLnJlY2VpdmVyVGV4dCA9IG9wZXJhdGlvbi5yZWNlaXZlclRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLmN5Y2xlRW5hYmxlID0gb3BlcmF0aW9uLmN5Y2xlRW5hYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5jeWNsZVRpbWUgPSBvcGVyYXRpb24uY3ljbGVUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5jeWNsZVRpbWVVbml0ID0gb3BlcmF0aW9uLmN5Y2xlVGltZVVuaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLm9wZXJhdGlvblR5cGVOYW1lID0gb3BlcmF0aW9uLm9wZXJhdGlvblR5cGVOYW1lID8gb3BlcmF0aW9uLm9wZXJhdGlvblR5cGVOYW1lIDogJ1NlbmRNZXNzYWdlRXhwaXJlT3BlcmF0aW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5zbXNNZXNzYWdlVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtc1RlbXBsYXRlOiBhbnkgPSBuZXcgT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zVGVtcGxhdGUuY29kZSA9IG9wZXJhdGlvbi5zbXNNZXNzYWdlVGVtcGxhdGUuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtc1RlbXBsYXRlLmNvbnRlbnQgPSBvcGVyYXRpb24uc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzICYmIG9wZXJhdGlvbi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG9wZXJhdGlvbi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZTogYW55ID0gbmV3IE9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUuaWQgPSBXZkRlc2lnbmVyVXRpbHMuY3JlYXRlTk0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUuY29kZSA9IHYuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUudmFsdWUgPSB2LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS50YWcgPSB2LnRhZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBzbXNUZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lTGltaXQuZXhwaXJlT3BlcmF0aW9ucy5wdXNoKHNlbmRNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG8uQ2xyVHlwZUlELmluZGV4T2YoJ0F1dG9IYW5kbGVFeHBpcmVPcGVyYXRpb24nKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gbyBhcyBBdXRvSGFuZGxlRXhwaXJlT3BlcmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdXRvSGFuZGxlID0gbmV3IEF1dG9IYW5kbGVFeHBpcmVPcGVyYXRpb25JbmZvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGFuZGxlLmlkID0gb3BlcmF0aW9uLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGFuZGxlLmR1cmF0aW9uVHlwZSA9IG9wZXJhdGlvbi5kdXJhdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IYW5kbGUudGltZUR1cmF0aW9uID0gb3BlcmF0aW9uLnRpbWVEdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS50aW1lVW5pdCA9IG9wZXJhdGlvbi50aW1lVW5pdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5vcGVyYXRpb25UeXBlTmFtZSA9IG9wZXJhdGlvbi5vcGVyYXRpb25UeXBlTmFtZSA/IG9wZXJhdGlvbi5vcGVyYXRpb25UeXBlTmFtZSA6ICdBdXRvSGFuZGxlRXhwaXJlT3BlcmF0aW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5hdXRvSGFuZGxlVHlwZSA9IG9wZXJhdGlvbi5hdXRvSGFuZGxlVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5tZXNzYWdlID0gb3BlcmF0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMaW1pdC5leHBpcmVPcGVyYXRpb25zLnB1c2goYXV0b0hhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aW1lTGltaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWVzc2FnZU5vdGljZShtZXNzYWdlTm90aWNlOiBNZXNzYWdlTm90aWNlKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogYW55ID0gbmV3IE9iamVjdDtcclxuICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSBtZXNzYWdlTm90aWNlLmNvbnRlbnQ7XHJcbiAgICAgICAgbWVzc2FnZS5zZW5kVGltZSA9IG1lc3NhZ2VOb3RpY2Uuc2VuZFRpbWU7XHJcbiAgICAgICAgbWVzc2FnZS5zZW5kVHlwZSA9IG1lc3NhZ2VOb3RpY2Uuc2VuZFR5cGU7XHJcbiAgICAgICAgbWVzc2FnZS5zdWJqZWN0ID0gbWVzc2FnZU5vdGljZS5zdWJqZWN0O1xyXG4gICAgICAgIGlmIChtZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzbXNUZW1wbGF0ZTogYW55ID0gbmV3IE9iamVjdDtcclxuICAgICAgICAgICAgc21zVGVtcGxhdGUuY29kZSA9IG1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlLmNvZGU7XHJcbiAgICAgICAgICAgIHNtc1RlbXBsYXRlLmNvbnRlbnQgPSBtZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZS5jb250ZW50O1xyXG4gICAgICAgICAgICBzbXNUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzICYmIG1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZTogYW55ID0gbmV3IE9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS5pZCA9IFdmRGVzaWduZXJVdGlscy5jcmVhdGVOTSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLmNvZGUgPSB2LmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUudmFsdWUgPSB2LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLnRhZyA9IHYudGFnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc1RlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVzc2FnZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBzbXNUZW1wbGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVjZWl2ZXJFeHByZXNzaW9ucyA9IG5ldyBBcnJheTxNZXNzYWdlUmVjZWl2ZXI+KCk7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjZWl2ZXJzID0gbWVzc2FnZU5vdGljZS5yZWNlaXZlci5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBjb25zdCByZWNlaXZlclRleHRzID0gbWVzc2FnZU5vdGljZS5yZWNlaXZlclRleHQuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgbGV0IHVzZXJSZWNlaXZlciA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKTtcclxuICAgICAgICAgICAgdXNlclJlY2VpdmVyLnR5cGUgPSAndXNlclBhcnRpY2lwYW50JztcclxuICAgICAgICAgICAgdXNlclJlY2VpdmVyLnVzZXJJZHMgPSAnJztcclxuICAgICAgICAgICAgdXNlclJlY2VpdmVyLnVzZXJOYW1lcyA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gcmVjZWl2ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXJzW2ldID09PSAncHJvY0luc3RDcmVhdG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9jSW5zdENyZWF0b3IgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKClcclxuICAgICAgICAgICAgICAgICAgICBwcm9jSW5zdENyZWF0b3IudHlwZSA9ICdwcm9jZXNzUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2NJbnN0Q3JlYXRvci5wcm9jZXNzUGFydGljaXBhbnQgPSAncHJvY0luc3RDcmVhdG9yJztcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2gocHJvY0luc3RDcmVhdG9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXJzW2ldID09PSAnd29ya0l0ZW1QYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd29ya0l0ZW1QYXJ0aWNpcGFudCA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtJdGVtUGFydGljaXBhbnQudHlwZSA9ICdwcm9jZXNzUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtJdGVtUGFydGljaXBhbnQucHJvY2Vzc1BhcnRpY2lwYW50ID0gJ3dvcmtJdGVtUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaCh3b3JrSXRlbVBhcnRpY2lwYW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclJlY2VpdmVyLnVzZXJJZHMgKz0gKHJlY2VpdmVyc1tpXSArICcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclJlY2VpdmVyLnVzZXJOYW1lcyArPSAocmVjZWl2ZXJUZXh0c1tpXSArICcsJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVzZXJSZWNlaXZlci51c2VySWRzKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyUmVjZWl2ZXIudXNlcklkcyA9IHVzZXJSZWNlaXZlci51c2VySWRzLnN1YnN0cmluZygwLCB1c2VyUmVjZWl2ZXIudXNlcklkcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHVzZXJSZWNlaXZlci51c2VyTmFtZXMgPSB1c2VyUmVjZWl2ZXIudXNlck5hbWVzLnN1YnN0cmluZygwLCB1c2VyUmVjZWl2ZXIudXNlck5hbWVzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXJFeHByZXNzaW9ucy5wdXNoKHVzZXJSZWNlaXZlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJFeHByZXNzaW9ucyAmJiBtZXNzYWdlTm90aWNlLnJlY2VpdmVyRXhwcmVzc2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbWVzc2FnZU5vdGljZS5yZWNlaXZlckV4cHJlc3Npb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50ID0gbmV3IE1lc3NhZ2VSZWNlaXZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudC50eXBlID0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LnByb2Nlc3NQYXJ0aWNpcGFudCA9ICdhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudC5hY3Rpdml0eURlZklkID0gKGUgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbikuYWN0aXZpdHlEZWZJZDtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQuYWN0aXZpdHlEZWZOYW1lID0gKGUgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbikuYWN0aXZpdHlEZWZOYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2goYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFyaWFibGVSZWNlaXZlciA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVJlY2VpdmVyLnR5cGUgPSAndmFyaWFibGVQYXJ0aWNpcGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVSZWNlaXZlci52YXJpYWJsZVBhcnRpY2lwYW50ID0gKGUgYXMgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbikuVXNlcklkO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUmVjZWl2ZXIudmFyaWFibGVOYW1lID0gKGUgYXMgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbikubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVJlY2VpdmVyLm9yZ1R5cGUgPSAoZSBhcyBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uKS5PcmdUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaCh2YXJpYWJsZVJlY2VpdmVyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uUmVjZWl2ZXIgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25SZWNlaXZlci50eXBlID0gJ3Bvc2l0aW9uUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmVjZWl2ZXIucG9zaXRpb25JZCA9IChlIGFzIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKS5Qb3NpdGlvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmVjZWl2ZXIucG9zaXRpb25OYW1lID0gKGUgYXMgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pLlBvc2l0aW9uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblJlY2VpdmVyLnBvc2l0aW9uVHlwZSA9IChlIGFzIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKS5Qb3NpdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uUmVjZWl2ZXIucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25SZWNlaXZlci5vcmdJZCA9IChlIGFzIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKS5PcmdJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25SZWNlaXZlci5vcmdUeXBlID0gKGUgYXMgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pLk9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2gocG9zaXRpb25SZWNlaXZlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlY2VpdmVyRXhwcmVzc2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBtZXNzYWdlLnJlY2VpdmVycyA9IHJlY2VpdmVyRXhwcmVzc2lvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjb252ZXJ0MkNvbXBvbmVudChjb21wb25lbnQ6IENvbXBvbmVudCk6IEJpekNvbXBvbmVudCB7XHJcbiAgICAgICAgY29uc3QgYml6Q29tcG9uZW50ID0gbmV3IEJpekNvbXBvbmVudCgpO1xyXG4gICAgICAgIGJpekNvbXBvbmVudC5pZCA9IGNvbXBvbmVudC5JZDtcclxuICAgICAgICBiaXpDb21wb25lbnQubmFtZSA9IGNvbXBvbmVudC5OYW1lO1xyXG4gICAgICAgIGJpekNvbXBvbmVudC5tZXRhZGF0YUlkID0gY29tcG9uZW50Lk1ldGFkYXRhSWQ7XHJcbiAgICAgICAgYml6Q29tcG9uZW50Lm1ldGhvZENvZGUgPSBjb21wb25lbnQuTWV0aG9kQ29kZTtcclxuICAgICAgICBiaXpDb21wb25lbnQuZXhlY3V0aW9uVGltZSA9IGNvbXBvbmVudC5UaW1lO1xyXG4gICAgICAgIGJpekNvbXBvbmVudC5pc0ZvckNvbXBlbnNhdGlvbiA9IGNvbXBvbmVudC5pc0ZvckNvbXBlbnNhdGlvbjtcclxuICAgICAgICBiaXpDb21wb25lbnQuc2NvcGVUeXBlID0gY29tcG9uZW50LlNjb3BlVHlwZSB8fCBudWxsO1xyXG4gICAgICAgIGJpekNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5BY3R1YWxQYXJhbWV0ZXJzICYmIGNvbXBvbmVudC5BY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwYXJhbSBvZiBjb21wb25lbnQuQWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYml6UGFyYW0gPSBuZXcgQml6UGFyYW1ldGVyKCk7XHJcbiAgICAgICAgICAgICAgICBiaXpQYXJhbS5jb2RlID0gcGFyYW0uTmFtZTtcclxuICAgICAgICAgICAgICAgIGJpelBhcmFtLm5hbWUgPSBwYXJhbS5OYW1lO1xyXG4gICAgICAgICAgICAgICAgYml6UGFyYW0udmFsdWUgPSBwYXJhbS5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIGJpekNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzLnB1c2goYml6UGFyYW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiaXpDb21wb25lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva5Qcm9jZXNzSGVhZGVyXHJcbiAgICAgKiBAcGFyYW0gZmZJZFxyXG4gICAgICogQHBhcmFtIGJpek9iaklkXHJcbiAgICAgKiBAcGFyYW0gZmZOYW1lXHJcbiAgICAgKiBAcGFyYW0gc3RhcnRNb2RlXHJcbiAgICAgKi9cclxuICAgIHNldFByb2Nlc3NIZWFkZXIoZmZJZDogc3RyaW5nLCBiaXpPYmpJZDogc3RyaW5nLCBmZk5hbWU6IHN0cmluZywgc3RhcnRNb2RlOiBTdGFydE1vZGUpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBjb25zdCBwcm9jZXNzSGVhZGVyID0gbmV3IFByb2Nlc3NIZWFkZXIocHJvY2Vzcy5Nb2RlbCwgZmZJZCwgYml6T2JqSWQsIGZmTmFtZSwgc3RhcnRNb2RlKTtcclxuICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKHByb2Nlc3NIZWFkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu05paw5rWB56iL5YiG57G757uR5a6a55qE5Y+C5pWw77yM5rWB56iL57uE5Lu277yM6KGo5Y2V5L+h5oGvXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1zIOWPguaVsOWIl+ihqFxyXG4gICAgICogQHBhcmFtIGNwdHMg5rWB56iL57uE5Lu2XHJcbiAgICAgKiBAcGFyYW0gZm9ybSDmtYHnqIvooajljZVcclxuICAgICAqL1xyXG4gICAgdXBkYXRlRmxvd0Zvcm1JbmZvKHBhcmFtczogYW55W10sIGNwdHM6IGFueVtdLCBmb3JtczogYW55W10sIGN1c3RvbWl6ZUFjdGlvbnM6IGFueVtdLCBiaXpDbXBzOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZvcm1hbFBhcmFtZXRlcnMocGFyYW1zLCBjcHRzLmZpbHRlcihjcHQgPT4gY3B0Lm93bmVyVHlwZSA9PT0gJ1NjaGVtYScpKTtcclxuICAgICAgICB0aGlzLnNldFByb2Nlc3NDb21wb25lbnRzKGNwdHMsIGJpekNtcHMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRXhlY3V0ZUZvcm1zKGZvcm1zKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUN1c3RvbWl6ZUFjdGlvbnMoY3VzdG9taXplQWN0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlRm9ybWFsUGFyYW1ldGVycyhwYXJhbWV0ZXJzOiBhbnlbXSwgY21wczogYW55W10gPSBuZXcgQXJyYXkoKSkge1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBvYmplY3RzID0gcHJvY2Vzcy5HZXREYXRhT2JqZWN0cygpO1xyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzICE9PSBudWxsICYmIHBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVR5cGUgPSBuZXcgRGF0YVR5cGUocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5kYXRhVHlwZSA9PT0gJ0NEVFNjaGVtYScpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhYjmuIXnkIZDRFRTY2hlbWHnsbvlnovnmoRkYXRhT2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIG9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOuaVsOaNruexu+Wei+S4umN1c3RvbVR5cGXmmoLml7bpu5jorqTkuLrlj4LmlbDpooTliLZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRhT2JqZWN0ICYmIG8uRGF0YVR5cGUuQ2F0ZWdvcnkgPT09IERhdGFUeXBlcy5DdXN0b21UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLlJlbW92ZURhdGFPYmplY3Qoby5JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6YeN5paw57uR5a6a5rWB56iL5YiG57G75pSv5oyB57K+566AYmVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21UeXBlID0gbmV3IENEVFNjaGVtYVR5cGUocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAubmV3U2NoZW1hSWQgJiYgcC5uZXdTY2hlbWFNZXRhZGF0YUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21UeXBlLlNjaGVtYUlkID0gcC5uZXdTY2hlbWFJZDtcclxuICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVR5cGUuTWV0YWRhdGFJZCA9IHAubmV3U2NoZW1hTWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY3VzdG9tVHlwZS5TY2hlbWFJZCA9IHAuc2NoZW1hSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjdXN0b21UeXBlLk1ldGFkYXRhSWQgPSBwLnNjaGVtYU1ldGFkYXRhSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbVR5cGUuQ29tcG9uZW50SWQgPSBjbXBzLmZpbHRlcihjbXAgPT4gY21wLm93bmVyID09PSBwLnNjaGVtYUlkKVswXS5pZDtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZS5DYXRlZ29yeSA9IERhdGFUeXBlcy5DdXN0b21UeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlLkN1c3RvbVR5cGUgPSBjdXN0b21UeXBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhYjmuIXnkIZjb2Rl55u45ZCM55qEZGF0YU9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBvYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgRGF0YU9iamVjdCAmJiBvLk5hbWUgPT09IHAuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5SZW1vdmVEYXRhT2JqZWN0KG8uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlLkNhdGVnb3J5ID0gRGF0YVR5cGVzLkJhc2ljVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZS5CYXNpY1R5cGUgPSBwLmRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGUuRGVzY3JpcHRpb24gPSBwLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0YVR5cGUuSW5pdGlhbFZhbHVlID0gcC5pbml0aWFsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5wYXJhbWV0ZXJNb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YU9iamVjdCA9IG5ldyBWYWx1ZWREYXRhT2JqZWN0KHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QuTmFtZSA9IHAuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LkRvY3VtZW50YXRpb24gPSBwLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iamVjdC5EYXRhVHlwZSA9IGRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QuSXNBbGxvd051bGwgPSBwLmFsbG93TnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocC5pbml0aWFsVmFsdWUgfHwgcC5pbml0aWFsVmFsdWVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlU2V0dGluZyA9IG5ldyBWYXJpYWJsZVNldHRpbmcocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YXJpYWJsZUNvZGUgPSBwLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YXJpYWJsZU5hbWUgPSBwLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy50YWcgPSBwLmluaXRpYWxWYWx1ZVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YWx1ZSA9IHAuaW5pdGlhbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVNldHRpbmcudmFsdWVUZXh0ID0gcC5pbml0aWFsVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LnZhcmlhYmxlU2V0dGluZyA9IHZhcmlhYmxlU2V0dGluZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuQWRkRGF0YU9iamVjdChkYXRhT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDln7rkuo7mtYHnqIvliIbnsbvnmoTliIfmjaLmm7TmlrDmtYHnqIvmnoTku7ZcclxuICAgICAqL1xyXG4gICAgc2V0UHJvY2Vzc0NvbXBvbmVudHMocHJvY0NwdHM6IGFueVtdLCBiaXpDbXBzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBwcm9jZXNzSGVhZGVyOiBQcm9jZXNzSGVhZGVyO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICAvL+WIoOmZpOa1geeoi+aehOS7tlxyXG4gICAgICAgIGlmIChleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBleHRlbmRFbGVtZW50cy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAmJiAoZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGFzIENvbXBvbmVudCkuVGltZSAhPT0gVG9vbFRpbWUuVU5ERUZJTklUSU9OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBQcm9jZXNzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0hlYWRlciA9IGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBhcyBQcm9jZXNzSGVhZGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWtkOa1geeoi+WSjOWklumDqOa1geeoi+eahOaDheWGteWFiOmcgOimgee7keWumuWPluaVsOaehOS7tlxyXG4gICAgICAgIGlmIChwcm9jZXNzSGVhZGVyLnN0YXJ0TW9kZSAhPT0gU3RhcnRNb2RlLkRJUkVDVCkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkRGF0YUNvbXBvbmVudCA9IHByb2NDcHRzLmZpbmQocCA9PiBwLmV4ZWN1dGlvblRpbWUgPT09IFRvb2xUaW1lLkxPQUREQVRBKTtcclxuICAgICAgICAgICAgaWYgKGxvYWREYXRhQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGRDcHQgPSBuZXcgQ29tcG9uZW50KHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgbGRDcHQuVGltZSA9IGxvYWREYXRhQ29tcG9uZW50LmV4ZWN1dGlvblRpbWUgYXMgVG9vbFRpbWU7XHJcbiAgICAgICAgICAgICAgICBsZENwdC5NZXRhZGF0YUlkID0gbG9hZERhdGFDb21wb25lbnQubWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgIGxkQ3B0Lk1ldGhvZENvZGUgPSBsb2FkRGF0YUNvbXBvbmVudC5tZXRob2RDb2RlO1xyXG4gICAgICAgICAgICAgICAgbGRDcHQuSWQgPSBsb2FkRGF0YUNvbXBvbmVudC5pZDtcclxuICAgICAgICAgICAgICAgIGxkQ3B0Lk5hbWUgPSBsb2FkRGF0YUNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgbGRDcHQuaXNGb3JDb21wZW5zYXRpb24gPSBsb2FkRGF0YUNvbXBvbmVudC5pc0ZvckNvbXBlbnNhdGlvbjtcclxuICAgICAgICAgICAgICAgIGxkQ3B0LkFjdHVhbFBhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChsb2FkRGF0YUNvbXBvbmVudC5zY29wZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZENwdC5TY29wZVR5cGUgPSBsb2FkRGF0YUNvbXBvbmVudC5zY29wZVR5cGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxkQ3B0LlNjb3BlVHlwZSA9IFwiVW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsb2FkRGF0YUNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzICYmIGxvYWREYXRhQ29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgbG9hZERhdGFDb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0gbmV3IEFjdHVhbFBhcmFtZXRlcihwcm9jZXNzLk1vZGVsLCBpdGVtLmNvZGUsIGl0ZW0udmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGRDcHQuQWN0dWFsUGFyYW1ldGVycy5wdXNoKHBhcmFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5oqK5Y+W5pWw5p6E5Lu25pS+6L+b5Y67XHJcbiAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKGxkQ3B0KTtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+WklumDqOa1geeoi++8jOagoemqjOaYr+WQpumbhuaIkOe7n+S4gOmihOWItueahOWklumDqOa1geeoi+aehOS7tlxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NIZWFkZXIuc3RhcnRNb2RlID09IFN0YXJ0TW9kZS5FWFRFUk5BTF9QUk9DRVNTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4dGVybmFsQ21wcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNtcHMgPSBiaXpDbXBzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXBzICYmIGNtcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmraTlpITmoIforrDmnInlpJbpg6jmtYHnqIvpgJrnlKjmnoTku7ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjIG9mIGNtcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLnNjb3BlVHlwZSA9PT0gJ0V4dGVybmFsUHJvY2VzcycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlcm5hbENtcHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOayoeacieWklumDqOa1geeoi+aehOS7tlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0ZXJuYWxDbXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jQ3B0cyAmJiBwcm9jQ3B0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9jQ3B0IG9mIHByb2NDcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNwdCA9IG5ldyBDb21wb25lbnQocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LlRpbWUgPSBwcm9jQ3B0LmV4ZWN1dGlvblRpbWUgYXMgVG9vbFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0Lk1ldGFkYXRhSWQgPSBwcm9jQ3B0Lm1ldGFkYXRhSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0Lk1ldGhvZENvZGUgPSBwcm9jQ3B0Lm1ldGhvZENvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LklkID0gcHJvY0NwdC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuTmFtZSA9IHByb2NDcHQubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuaXNGb3JDb21wZW5zYXRpb24gPSBwcm9jQ3B0LmlzRm9yQ29tcGVuc2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5BY3R1YWxQYXJhbWV0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2NDcHQuc2NvcGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5TY29wZVR5cGUgPSBwcm9jQ3B0LnNjb3BlVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuU2NvcGVUeXBlID0gXCJVbmRlZmluZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzICYmIHByb2NDcHQuYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0gbmV3IEFjdHVhbFBhcmFtZXRlcihwcm9jZXNzLk1vZGVsLCBpdGVtLmNvZGUsIGl0ZW0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmBv+WFjemHjeWkjeeahOaUvuWFpeWPluaVsOaehOS7tizkuI3opoHlj5bmlbDvvIzlrZDmtYHnqIvlkoznm7TmjqXmtYHnqIvnmoTmnoTku7bvvIzopoHmnKrlrprkuYnvvIzlpJbpg6jvvIzlhajph4/nmoRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3B0LlRpbWUgIT09IFRvb2xUaW1lLkxPQUREQVRBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGNwdC5TY29wZVR5cGUgIT09IFN0YXJ0TW9kZS5ESVJFQ1RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY3B0LlNjb3BlVHlwZSAhPT0gU3RhcnRNb2RlLlNVQl9QUk9DRVNTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnB1c2goY3B0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9jQ3B0IG9mIHByb2NDcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3B0ID0gbmV3IENvbXBvbmVudChwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5UaW1lID0gcHJvY0NwdC5leGVjdXRpb25UaW1lIGFzIFRvb2xUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0Lk1ldGFkYXRhSWQgPSBwcm9jQ3B0Lm1ldGFkYXRhSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuTWV0aG9kQ29kZSA9IHByb2NDcHQubWV0aG9kQ29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5JZCA9IHByb2NDcHQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuTmFtZSA9IHByb2NDcHQubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5pc0ZvckNvbXBlbnNhdGlvbiA9IHByb2NDcHQuaXNGb3JDb21wZW5zYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuQWN0dWFsUGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2NDcHQuc2NvcGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LlNjb3BlVHlwZSA9IHByb2NDcHQuc2NvcGVUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuU2NvcGVUeXBlID0gXCJVbmRlZmluZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2NDcHQuYWN0dWFsUGFyYW1ldGVycyAmJiBwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0ZXIgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKHByb2Nlc3MuTW9kZWwsIGl0ZW0uY29kZSwgaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5BY3R1YWxQYXJhbWV0ZXJzLnB1c2gocGFyYW1ldGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDpgb/lhY3ph43lpI3nmoTmlL7lhaXlj5bmlbDmnoTku7Ys5LiN6KaB5Y+W5pWw77yM5a2Q5rWB56iL5ZKM55u05o6l5rWB56iLLOacquefpeeahOaehOS7tu+8jOWklumDqO+8jOWFqOmHj+eahFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNwdC5UaW1lICE9PSBUb29sVGltZS5MT0FEREFUQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGNwdC5TY29wZVR5cGUgIT09IFN0YXJ0TW9kZS5ESVJFQ1RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjcHQuU2NvcGVUeXBlICE9PSBTdGFydE1vZGUuU1VCX1BST0NFU1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjcHQuU2NvcGVUeXBlICE9PSBcIlVuZGVmaW5lZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKGNwdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyJ5aSW6YOo5rWB56iL5p6E5Lu277yM5ZCM5qC35Y+q5L+d55WZ5Y+W5pWw5p6E5Lu277yM5LiN6ZyA6KaB5YW25LuW5aSE55CGKOWPluaVsOaehOS7tuW3sue7j+aUvui/m+WOu+S6hilcclxuICAgICAgICAgICAgICAgICAgICAvLyDliLfmlrDkuIDkuIvlsZ7mgKfmoYZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChQbWZFdmVudHMuU2hvd1Byb3BlcnR5KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3NIZWFkZXIuc3RhcnRNb2RlID09IFN0YXJ0TW9kZS5TVUJfUFJPQ0VTUykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jQ3B0cyAmJiBwcm9jQ3B0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHByb2NDcHQgb2YgcHJvY0NwdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjcHQgPSBuZXcgQ29tcG9uZW50KHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LlRpbWUgPSBwcm9jQ3B0LmV4ZWN1dGlvblRpbWUgYXMgVG9vbFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuTWV0YWRhdGFJZCA9IHByb2NDcHQubWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5NZXRob2RDb2RlID0gcHJvY0NwdC5tZXRob2RDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LklkID0gcHJvY0NwdC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5OYW1lID0gcHJvY0NwdC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LmlzRm9yQ29tcGVuc2F0aW9uID0gcHJvY0NwdC5pc0ZvckNvbXBlbnNhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5BY3R1YWxQYXJhbWV0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvY0NwdC5zY29wZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuU2NvcGVUeXBlID0gcHJvY0NwdC5zY29wZVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5TY29wZVR5cGUgPSBcIlVuZGVmaW5lZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzICYmIHByb2NDcHQuYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtZXRlciA9IG5ldyBBY3R1YWxQYXJhbWV0ZXIocHJvY2Vzcy5Nb2RlbCwgaXRlbS5jb2RlLCBpdGVtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmBv+WFjemHjeWkjeeahOaUvuWFpeWPluaVsOaehOS7tizkuI3opoHlj5bmlbDvvIznm7TmjqXmtYHnqIvlkozlpJbpg6jmtYHnqIvvvIzmnKrlrprkuYnnmoTmnoTku7bvvIzopoHlrZDmtYHnqIvvvIzlhajph4/nmoRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcHQuVGltZSAhPT0gVG9vbFRpbWUuTE9BRERBVEFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjcHQuU2NvcGVUeXBlICE9PSBTdGFydE1vZGUuRElSRUNUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY3B0LlNjb3BlVHlwZSAhPT0gU3RhcnRNb2RlLkVYVEVSTkFMX1BST0NFU1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjcHQuU2NvcGVUeXBlICE9PSBcIlVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMucHVzaChjcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5a2Q5rWB56iL5YiZ5LiN6ZyA6KaB5YW25LuW5aSE55CGKOWPluaVsOaehOS7tuW3sue7j+aUvui/m+WOu+S6hilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIOebtOaOpea1geeoi1xyXG4gICAgICAgICAgICAvLyDnm7TmjqXmtYHnqIvov4fmu6TmjonlhbHkuqvnmoTmnoTku7ZcclxuICAgICAgICAgICAgY29uc3QgYWN0dWFsQ21wcyA9IHByb2NDcHRzLmZpbHRlcihwID0+IFdmRGVzaWduZXJVdGlscy5pc1BmQ29tcG9uZW50KHAubWV0YWRhdGFJZCkgPT09IGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGFjdHVhbENtcHMgJiYgYWN0dWFsQ21wcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9jQ3B0IG9mIGFjdHVhbENtcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3B0ID0gbmV3IENvbXBvbmVudChwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBjcHQuVGltZSA9IHByb2NDcHQuZXhlY3V0aW9uVGltZSBhcyBUb29sVGltZTtcclxuICAgICAgICAgICAgICAgICAgICBjcHQuTWV0YWRhdGFJZCA9IHByb2NDcHQubWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICBjcHQuTWV0aG9kQ29kZSA9IHByb2NDcHQubWV0aG9kQ29kZTtcclxuICAgICAgICAgICAgICAgICAgICBjcHQuSWQgPSBwcm9jQ3B0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGNwdC5OYW1lID0gcHJvY0NwdC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGNwdC5pc0ZvckNvbXBlbnNhdGlvbiA9IHByb2NDcHQuaXNGb3JDb21wZW5zYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2NDcHQuc2NvcGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5TY29wZVR5cGUgPSBwcm9jQ3B0LnNjb3BlVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcHQuU2NvcGVUeXBlID0gXCJVbmRlZmluZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjcHQuQWN0dWFsUGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMgJiYgcHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0ZXIgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKHByb2Nlc3MuTW9kZWwsIGl0ZW0uY29kZSwgaXRlbS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmBv+WFjemHjeWkjeeahOaUvuWFpeWPluaVsOaehOS7tizlrZDmtYHnqIvlkozlpJbpg6jmtYHnqIvnmoTmnoTku7bvvIzopoHmnKrlrprkuYnvvIznm7TmjqXvvIzlhajph4/nmoRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3B0LlNjb3BlVHlwZSAhPT0gU3RhcnRNb2RlLkVYVEVSTkFMX1BST0NFU1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgY3B0LlNjb3BlVHlwZSAhPT0gU3RhcnRNb2RlLlNVQl9QUk9DRVNTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnB1c2goY3B0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlRXhlY3V0ZUZvcm1zKGZvcm1zOiBhbnlbXSkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIC8v5Yig6Zmk6KGo5Y2V5p6E5Lu2XHJcbiAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4dGVuZEVsZW1lbnRzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBpbnN0YW5jZW9mIEV4ZWN1dGVGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgZm9ybXMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVFeGVjdXRlRm9ybShmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGVFeGVjdXRlRm9ybShmb3JtOiBhbnksIHRlcm1pbmFsPzogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMucHJvY2VzcztcclxuICAgICAgICBsZXQgZXh0ZW5kRWxlbWVudHMgPSBwcm9jZXNzLkdldEV4dGVuc2lvbkVsZW1lbnRzKCk7XHJcbiAgICAgICAgLy/liKDpmaTooajljZXmnoTku7ZcclxuICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZXh0ZW5kRWxlbWVudHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGluc3RhbmNlb2YgRXhlY3V0ZUZvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmID0gZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGFzIEV4ZWN1dGVGb3JtO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmLlRlcm1pbmFsVHlwZSA9PT0gKHRlcm1pbmFsID8gdGVybWluYWwgOiBmb3JtLlRlcm1pbmFsVHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvcm0pIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IGZvcm0uQWN0dWFsUGFyYW1ldGVycyBhcyBhbnlbXTtcclxuICAgICAgICAgICAgbGV0IGFjdFBhcmFzID0gbmV3IEFycmF5PEFjdHVhbFBhcmFtZXRlcj4oKTtcclxuICAgICAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcGFyYSBvZiBwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0UGFyYSA9IG5ldyBBY3R1YWxQYXJhbWV0ZXIocHJvY2Vzcy5Nb2RlbCwgcGFyYS5OYW1lLCBwYXJhLlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYS5UYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSBwYXJhLlRhZztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYS5WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmEuVmFsdWUubGVuZ3RoID49IDggJiYgcGFyYS5WYWx1ZS5zbGljZSgwLCA4KSA9PT0gYHtcImV4cHJcIjpgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gJ2NvbnN0YW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gJ3ZhcmlhYmxlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0UGFyYXMucHVzaChhY3RQYXJhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpZCA9IEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBFeGVjdXRlRm9ybShwcm9jZXNzLk1vZGVsLCBpZCwgZm9ybS5OYW1lLCBhY3RQYXJhcyk7XHJcbiAgICAgICAgICAgIGl0ZW0uQ29tcG9uZW50SWQgPSBmb3JtLkNvbXBvbmVudElkO1xyXG4gICAgICAgICAgICBpdGVtLkZvcm1UeXBlID0gZm9ybS5Gb3JtVHlwZTtcclxuICAgICAgICAgICAgaXRlbS5mb3JtRm9ybWF0SWQgPSBmb3JtLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgICAgICAgaXRlbS5mb3JtYXRDb25maWdJZCA9IGZvcm0uZm9ybWF0Q29uZmlnSWQ7XHJcbiAgICAgICAgICAgIGl0ZW0uVGVybWluYWxUeXBlID0gZm9ybS5UZXJtaW5hbFR5cGU7XHJcbiAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUN1c3RvbWl6ZUFjdGlvbnMoY3VzdG9taXplQWN0aW9uczogYW55W10pIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICAvL+WIoOmZpOa1geeoi+aehOS7tlxyXG4gICAgICAgIGlmIChleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBleHRlbmRFbGVtZW50cy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBDdXN0b21pemVBY3Rpb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+mHjeaWsOe7keWumlxyXG4gICAgICAgIGlmIChjdXN0b21pemVBY3Rpb25zICYmIGN1c3RvbWl6ZUFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBhIG9mIGN1c3RvbWl6ZUFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPSBuZXcgQ3VzdG9taXplQWN0aW9uKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uLmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24uY29kZSA9IGEuY29kZTtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi5uYW1lID0gYS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uLnRlcm1pbmFsVHlwZSA9IGEudGVybWluYWxUeXBlO1xyXG4gICAgICAgICAgICAgICAgLy8gYWN0aW9uLmVuYWJsZSA9IGEuZW5hYmxlO1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uLmFjdHVhbFBhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChhLmFjdHVhbFBhcmFtZXRlcnMgJiYgYS5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwIG9mIGEuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0gbmV3IEFjdHVhbFBhcmFtZXRlcihwcm9jZXNzLk1vZGVsLCBwLk5hbWUsIHAuVmFsdWUsIHAuVmFsdWVUZXh0LCBwLlRhZyB8fCAnZXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24uYWN0dWFsUGFyYW1ldGVycy5wdXNoKHBhcmFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOa1geeoi+Wkh+azqFxyXG4gICAgICogQHBhcmFtIGJwbW5Nb2RlbFxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIG1vZGlmeVByb2Nlc3NUaXRsZUV4cHJlc3Npb24odmFsdWU6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGlmIChleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBleHRlbmRFbGVtZW50cy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBUaXRsZUV4cHJlc3Npb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGl0bGUgPSBuZXcgVGl0bGVFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgIGlmKHR5cGVvZih2YWx1ZSkgPT09ICdzdHJpbmcnfHwgdmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGl0bGUgPSBuZXcgVGl0bGVFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGl0bGUgPSBuZXcgVGl0bGVFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwsIHZhbHVlWyd6aC1DSFMnXSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKHRpdGxlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9jZXNzSGVhZGVyKGZmTmFtZTogc3RyaW5nLCBiaXpPYmpJZD86IHN0cmluZywgZmZJZD86IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGlmIChleHRlbmRFbGVtZW50cyAhPT0gbnVsbCAmJiBleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gZXh0ZW5kRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpXSBpbnN0YW5jZW9mIFByb2Nlc3NIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuQml6RGVmTmFtZSA9IGZmTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuQml6T2JqSWQgPSBiaXpPYmpJZDtcclxuICAgICAgICAgICAgICAgICAgICAoZXh0ZW5kRWxlbWVudHNbaV0gYXMgUHJvY2Vzc0hlYWRlcikuQml6RGVmS2V5ID0gZmZJZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYmluZFByb2Nlc3NUaXRsZUV4cHJlc3Npb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGNvbnN0IHRpdGxlRXhwcmVzc2lvbiA9IGV4dGVuZEVsZW1lbnRzLmZpbmQoZSA9PiBlLkNsclR5cGVJRCA9PT0gVGl0bGVFeHByZXNzaW9uLkNscl9UeXBlX0lEKSBhcyBUaXRsZUV4cHJlc3Npb247XHJcbiAgICAgICAgaWYgKHRpdGxlRXhwcmVzc2lvbiAmJiB0aXRsZUV4cHJlc3Npb24udmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aXRsZSA9IG5ldyBUaXRsZUV4cHJlc3Npb24ocHJvY2Vzcy5Nb2RlbCwgdmFsdWUpO1xyXG4gICAgICAgIGV4dGVuZEVsZW1lbnRzLnB1c2godGl0bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Z+65LqO5rWB56iL5YiG57G755qE5YiH5o2i5pu05paw5rWB56iL5p6E5Lu2XHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVByb2Nlc3NDb21wb25lbnRzKHByb2NDcHRzOiBhbnlbXSkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIC8v5Yig6Zmk5rWB56iL5p6E5Lu2XHJcbiAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4dGVuZEVsZW1lbnRzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBpbnN0YW5jZW9mIENvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICYmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gYXMgQ29tcG9uZW50KS5UaW1lICE9PSBUb29sVGltZS5VTkRFRklOSVRJT04pIHtcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5zcGxpY2UoaSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6YeN5paw57uR5a6aXHJcbiAgICAgICAgaWYgKHByb2NDcHRzICYmIHByb2NDcHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvY0NwdCBvZiBwcm9jQ3B0cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNwdCA9IG5ldyBDb21wb25lbnQocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjcHQuVGltZSA9IHByb2NDcHQuZXhlY3V0aW9uVGltZSBhcyBUb29sVGltZTtcclxuICAgICAgICAgICAgICAgIGNwdC5NZXRhZGF0YUlkID0gcHJvY0NwdC5tZXRhZGF0YUlkO1xyXG4gICAgICAgICAgICAgICAgY3B0Lk1ldGhvZENvZGUgPSBwcm9jQ3B0Lm1ldGhvZENvZGU7XHJcbiAgICAgICAgICAgICAgICBjcHQuSWQgPSBwcm9jQ3B0LmlkO1xyXG4gICAgICAgICAgICAgICAgY3B0Lk5hbWUgPSBwcm9jQ3B0Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICBjcHQuaXNGb3JDb21wZW5zYXRpb24gPSBwcm9jQ3B0LmlzRm9yQ29tcGVuc2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMgJiYgcHJvY0NwdC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHByb2NDcHQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0gbmV3IEFjdHVhbFBhcmFtZXRlcihwcm9jZXNzLk1vZGVsLCBpdGVtLmNvZGUsIGl0ZW0udmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKGNwdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQWxsb3dQcmVBc3NpZ24oYXNzaWduOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMucHJvY2VzcztcclxuICAgICAgICBsZXQgZXh0ZW5kRWxlbWVudHMgPSBwcm9jZXNzLkdldEV4dGVuc2lvbkVsZW1lbnRzKCk7XHJcbiAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzICE9PSBudWxsICYmIGV4dGVuZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBleHRlbmRFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2ldIGluc3RhbmNlb2YgUHJvY2Vzc0hlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIChleHRlbmRFbGVtZW50c1tpXSBhcyBQcm9jZXNzSGVhZGVyKS5hbGxvd1ByZUFzc2lnbiA9IGFzc2lnbjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlRW5hYmxlUHJpb3JpdHkocHJpb3JpdHk6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMgIT09IG51bGwgJiYgZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGV4dGVuZEVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaV0gaW5zdGFuY2VvZiBQcm9jZXNzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFByb2Nlc3NIZWFkZXIpLmVuYWJsZVByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVN0YXJ0TW9kZShzdGFydE1vZGU6IFN0YXJ0TW9kZSwgYWxsQ21wczogYW55LCBiaXpDbXBzOiBhbnkpIHtcclxuICAgICAgICAvLyDlr7nkuo7lkK/liqjmlrnlvI/nmoTmj5DnpLrkv6Hmga9cclxuICAgICAgICBzd2l0Y2ggKHN0YXJ0TW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIFN0YXJ0TW9kZS5ESVJFQ1Q6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLmZpcmVFdmVudChuZXcgbXhFdmVudE9iamVjdChXZkV2ZW50cy5TaG93VGlwcywgXCJkYXRhXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6ICdpbmZvJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAgbXhSZXNvdXJjZXMuZ2V0KFwiZGlyZWN0VGlwc1wiKSxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFN0YXJ0TW9kZS5FWFRFUk5BTF9QUk9DRVNTOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3JVaS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoV2ZFdmVudHMuU2hvd1RpcHMsIFwiZGF0YVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAnaW5mbycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIG14UmVzb3VyY2VzLmdldChcImV4dGVybmFsVGlwc1wiKSxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFN0YXJ0TW9kZS5TVUJfUFJPQ0VTUzpcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkuZmlyZUV2ZW50KG5ldyBteEV2ZW50T2JqZWN0KFdmRXZlbnRzLlNob3dUaXBzLCBcImRhdGFcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbDogJ2luZm8nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICBteFJlc291cmNlcy5nZXQoXCJzdWJwcm9jZXNzVGlwc1wiKSxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMgIT09IG51bGwgJiYgZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jSGVhZGVyID0gZXh0ZW5kRWxlbWVudHMuZmlsdGVyKGUgPT4gZSBpbnN0YW5jZW9mIFByb2Nlc3NIZWFkZXIpIGFzIFByb2Nlc3NIZWFkZXJbXTtcclxuICAgICAgICAgICAgLy8g5L+u5pS55ZCv5Yqo5pa55byPXHJcbiAgICAgICAgICAgIHByb2NIZWFkZXJbMF0uc3RhcnRNb2RlID0gc3RhcnRNb2RlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvY0NwdHMgPSBhbGxDbXBzO1xyXG4gICAgICAgICAgICAvL+WIoOmZpOa1geeoi+aehOS7tlxyXG4gICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4dGVuZEVsZW1lbnRzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBhcyBDb21wb25lbnQpLlRpbWUgIT09IFRvb2xUaW1lLlVOREVGSU5JVElPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAoZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGFzIENvbXBvbmVudCkuVGltZSAhPT0gVG9vbFRpbWUuTE9BRERBVEEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFsbENtcHMgJiYgYWxsQ21wcy5mb3JFYWNoKHByb2NDcHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3B0ID0gbmV3IENvbXBvbmVudChwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNwdC5UaW1lID0gcHJvY0NwdC5leGVjdXRpb25UaW1lIGFzIFRvb2xUaW1lO1xyXG4gICAgICAgICAgICAgICAgY3B0Lk1ldGFkYXRhSWQgPSBwcm9jQ3B0Lm1ldGFkYXRhSWQ7XHJcbiAgICAgICAgICAgICAgICBjcHQuTWV0aG9kQ29kZSA9IHByb2NDcHQubWV0aG9kQ29kZTtcclxuICAgICAgICAgICAgICAgIGNwdC5JZCA9IHByb2NDcHQuaWQ7XHJcbiAgICAgICAgICAgICAgICBjcHQuTmFtZSA9IHByb2NDcHQubmFtZTtcclxuICAgICAgICAgICAgICAgIGNwdC5pc0ZvckNvbXBlbnNhdGlvbiA9IHByb2NDcHQuaXNGb3JDb21wZW5zYXRpb247XHJcbiAgICAgICAgICAgICAgICBjcHQuQWN0dWFsUGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2NDcHQuc2NvcGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3B0LlNjb3BlVHlwZSA9IHByb2NDcHQuc2NvcGVUeXBlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjcHQuU2NvcGVUeXBlID0gXCJVbmRlZmluZWRcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHByb2NDcHQuYWN0dWFsUGFyYW1ldGVycyAmJiBwcm9jQ3B0LmFjdHVhbFBhcmFtZXRlcnMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0ZXIgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKHByb2Nlc3MuTW9kZWwsIGl0ZW0uY29kZSwgaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMucHVzaChjcHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2NDbXBzID0gZXh0ZW5kRWxlbWVudHMuZmlsdGVyKGUgPT4gZSBpbnN0YW5jZW9mIENvbXBvbmVudCkgYXMgQ29tcG9uZW50W107XHJcbiAgICAgICAgICAgIC8vIOWmguaenOWQr+WKqOaWueW8j+aYr+WtkOa1geeoiyzlj6rkv53nlZnlj5bmlbDmnoTku7ZcclxuICAgICAgICAgICAgaWYgKHN0YXJ0TW9kZSA9PT0gU3RhcnRNb2RlLlNVQl9QUk9DRVNTKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVdGlscy5wb3N0TWVzc2FnZShSZXNvdXJjZUtleXMud2Zfc2hvd1RpcCwge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHR5cGU6ICdtZXNzYWdlJyxcclxuICAgICAgICAgICAgICAgIC8vICAgICBsZXZlbDogJ2luZm8nLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIG1lc3NhZ2U6IGDlkK/liqjmlrnlvI/kuLrlrZDmtYHnqIvvvIzpnIDopoHnp7vpmaTlj5bmlbDmnoTku7bku6XlpJbnmoTmtYHnqIvmnoTku7ZgLFxyXG4gICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZXh0ZW5kRWxlbWVudHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBpbnN0YW5jZW9mIENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbXAgPSBleHRlbmRFbGVtZW50c1tpIC0gMV0gYXMgQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbXAuVGltZSAhPT0gVG9vbFRpbWUuVU5ERUZJTklUSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjbXAuVGltZSAhPT0gVG9vbFRpbWUuTE9BRERBVEFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIChjbXAuU2NvcGVUeXBlICE9PSBTdGFydE1vZGUuU1VCX1BST0NFU1MgJiYgY21wLlNjb3BlVHlwZSAhPT0gXCJBbGxfUHJvY2Vzc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnNwbGljZShpIC0gMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5aaC5p6c5ZCv5Yqo5pa55byP5piv55u05o6l5ZCv5YqoLOS4jeWFgeiuuOWtmOWcqOWFseS6q+eahOaehOS7tlxyXG4gICAgICAgICAgICBpZiAoc3RhcnRNb2RlID09PSBTdGFydE1vZGUuRElSRUNUKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDliKTmlq3mnInmsqHmnInlhbHkuqvvvIhQRu+8ieeahOa1geeoi+aehOS7tlxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGZDbXBzID0gcHJvY0NtcHMuZmlsdGVyKChwOiBDb21wb25lbnQpID0+IFdmRGVzaWduZXJVdGlscy5pc1BmQ29tcG9uZW50KHAuTWV0YWRhdGFJZCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBmQ21wcyAmJiBwZkNtcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOaOieWFseS6q+eahOaehOS7tuWSjOWQr+WKqOaWueW8j1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBleHRlbmRFbGVtZW50cy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBpbnN0YW5jZW9mIENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY21wID0gZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGFzIENvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXZkRlc2lnbmVyVXRpbHMuaXNQZkNvbXBvbmVudChjbXAuTWV0YWRhdGFJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBjbXAuU2NvcGVUeXBlID09PSBTdGFydE1vZGUuRVhURVJOQUxfUFJPQ0VTU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNtcC5TY29wZVR5cGUgPT09IFN0YXJ0TW9kZS5TVUJfUFJPQ0VTU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWQr+WKqOaWueW8j+aYr+WklumDqOa1geeoi1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0TW9kZSA9PT0gU3RhcnRNb2RlLkVYVEVSTkFMX1BST0NFU1MpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IG90aGVyQ21wcyA9IHByb2NDbXBzLmZpbHRlcigocDogQ29tcG9uZW50KSA9PiAocC5NZXRhZGF0YUlkICE9PSBSZXNvdXJjZUtleXMucGZfQ21wX0lkMVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICYmIHAuTWV0YWRhdGFJZCAhPT0gUmVzb3VyY2VLZXlzLnBmX0NtcF9JZDJcclxuICAgICAgICAgICAgICAgIC8vICAgICAmJiBwLk1ldGFkYXRhSWQgIT09IFJlc291cmNlS2V5cy5wZl9DbXBfSWQzXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgJiYgcC5NZXRhZGF0YUlkICE9PSBSZXNvdXJjZUtleXMucGZfQ21wX0lkNFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICYmIHAuVGltZSAhPT0gVG9vbFRpbWUuTE9BRERBVEFcclxuICAgICAgICAgICAgICAgIC8vICkpO1xyXG4gICAgICAgICAgICAgICAgLy8g5Yik5pat5pyJ5rKh5pyJ6aKE5Yi25aSW6YOo5rWB56iL6YCa55So5p6E5Lu2XHJcbiAgICAgICAgICAgICAgICBsZXQgZXh0ZXJuYWxDbXBzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbXBzID0gYml6Q21wcztcclxuICAgICAgICAgICAgICAgIGlmIChjbXBzICYmIGNtcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOatpOWkhOagh+iusOaYr+WklumDqOa1geeoi+mAmueUqOaehOS7tlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYyBvZiBjbXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLnNjb3BlVHlwZSA9PT0gJ0V4dGVybmFsUHJvY2VzcycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsQ21wcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzpooTliLbkuoblpJbpg6jmtYHnqIvpgJrnlKjmnoTku7Ys5Y+q5L+d55WZ5Y+W5pWw5p6E5Lu277yM5rKh5pyJ5YiZ5LiN5aSE55CGXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsQ21wcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZXh0ZW5kRWxlbWVudHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY21wID0gZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGFzIENvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21wLlRpbWUgIT09IFRvb2xUaW1lLlVOREVGSU5JVElPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjbXAuVGltZSAhPT0gVG9vbFRpbWUuTE9BRERBVEFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKGNtcC5TY29wZVR5cGUgPT09IFN0YXJ0TW9kZS5ESVJFQ1RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNtcC5TY29wZVR5cGUgPT09IFN0YXJ0TW9kZS5TVUJfUFJPQ0VTU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgY21wLlNjb3BlVHlwZSA9PT0gXCJVbmRlZmluZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lZGl0b3JVaS5maXJlRXZlbnQobmV3IG14RXZlbnRPYmplY3QoUG1mRXZlbnRzLlNob3dQcm9wZXJ0eSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByb2Nlc3NWYXJpYWJsZXModmFyaWFibGVzOiBhbnlbXSkge1xyXG4gICAgICAgIGxldCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBvYmplY3RzID0gcHJvY2Vzcy5HZXREYXRhT2JqZWN0cygpO1xyXG4gICAgICAgIGNvbnN0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGlmIChvYmplY3RzICYmIG9iamVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2Ygb2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBWYWx1ZWREYXRhT2JqZWN0ICYmIG8uRGF0YVR5cGUuQ2F0ZWdvcnkgIT09IERhdGFUeXBlcy5DdXN0b21UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8udmFyaWFibGVTZXR0aW5nICYmIG8udmFyaWFibGVTZXR0aW5nLnRhZyA9PT0gJ2NvbXBvbmVudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IGV4dGVuZEVsZW1lbnRzLmZpbmRJbmRleChlID0+IChlIGluc3RhbmNlb2YgQ29tcG9uZW50ICYmIGUuSWQgPT09IG8udmFyaWFibGVTZXR0aW5nLnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5SZW1vdmVEYXRhT2JqZWN0KG8uSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhcmlhYmxlcyAhPT0gbnVsbCAmJiB2YXJpYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFyaWFibGVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVHlwZSA9IG5ldyBEYXRhVHlwZShwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlLkNhdGVnb3J5ID0gRGF0YVR5cGVzLkJhc2ljVHlwZTtcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlLkJhc2ljVHlwZSA9IHYuYmFzaWNUeXBlO1xyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGUuRGVzY3JpcHRpb24gPSB2LmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YU9iamVjdCA9IG5ldyBWYWx1ZWREYXRhT2JqZWN0KHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgZGF0YU9iamVjdC5JZCA9IHYuaWQ7XHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqZWN0Lk5hbWUgPSB2Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LkRvY3VtZW50YXRpb24gPSB2LmRvY3VtZW50YXRpb247XHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LkRhdGFUeXBlID0gZGF0YVR5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHYudGFnICYmIHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZVNldHRpbmcgPSBuZXcgVmFyaWFibGVTZXR0aW5nKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YXJpYWJsZUNvZGUgPSB2Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVTZXR0aW5nLnZhcmlhYmxlTmFtZSA9IHYuZG9jdW1lbnRhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVNldHRpbmcudGFnID0gdi50YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVTZXR0aW5nLnZhbHVlID0gdi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVNldHRpbmcudmFsdWVUZXh0ID0gdi52YWx1ZVRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QudmFyaWFibGVTZXR0aW5nID0gdmFyaWFibGVTZXR0aW5nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVTZXR0aW5nLnRhZyA9PT0gJ2NvbXBvbmVudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IHYuY29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNwdCA9IG5ldyBDb21wb25lbnQocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHQuTWV0YWRhdGFJZCA9IGMuTWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5NZXRob2RDb2RlID0gYy5NZXRob2RDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LklkID0gYy5JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5OYW1lID0gYy5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B0LkFjdHVhbFBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLkFjdHVhbFBhcmFtZXRlcnMgJiYgYy5BY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhIG9mIGMuQWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0gbmV3IEFjdHVhbFBhcmFtZXRlcihwcm9jZXNzLk1vZGVsLCBhLk5hbWUsIGEuVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXIuVGFnID0gYS5UYWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdC5BY3R1YWxQYXJhbWV0ZXJzLnB1c2gocGFyYW1ldGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMucHVzaChjcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHByb2Nlc3MuQWRkRGF0YU9iamVjdChkYXRhT2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9jZXNzVGltZUxpbWl0Q29udHJvbCh0aW1lTGltaXQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSB0aGlzLnByb2Nlc3M7XHJcbiAgICAgICAgbGV0IGV4dGVuZEVsZW1lbnRzID0gcHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGlmIChleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBleHRlbmRFbGVtZW50cy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50c1tpIC0gMV0gaW5zdGFuY2VvZiBUaW1lTGltaXRDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGkgLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aW1lTGltaXRJbmZvID0gdGltZUxpbWl0IGFzIFRpbWVMaW1pdENvbnRyb2xJbmZvO1xyXG4gICAgICAgIGlmICh0aW1lTGltaXRJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBuZXcgVGltZUxpbWl0Q29udHJvbChwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgY29udHJvbC5lbmFibGUgPSB0aW1lTGltaXRJbmZvLmVuYWJsZTtcclxuICAgICAgICAgICAgY29udHJvbC50YWcgPSB0aW1lTGltaXRJbmZvLnRhZztcclxuICAgICAgICAgICAgY29udHJvbC5kdWVUaW1lID0gdGltZUxpbWl0SW5mby5kdWVUaW1lO1xyXG4gICAgICAgICAgICBjb250cm9sLnRpbWVVbml0ID0gdGltZUxpbWl0SW5mby50aW1lVW5pdDtcclxuICAgICAgICAgICAgY29udHJvbC5leHBpcmVPcGVyYXRpb25zID0gbmV3IEFycmF5PFNlbmRNZXNzYWdlRXhwaXJlT3BlcmF0aW9uPigpO1xyXG4gICAgICAgICAgICBpZiAodGltZUxpbWl0SW5mby5leHBpcmVPcGVyYXRpb25zICYmIHRpbWVMaW1pdEluZm8uZXhwaXJlT3BlcmF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2YgdGltZUxpbWl0SW5mby5leHBpcmVPcGVyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3BlcmF0aW9uVHlwZU5hbWUgPT09ICdTZW5kTWVzc2FnZUV4cGlyZU9wZXJhdGlvbicgfHwgIW8ub3BlcmF0aW9uVHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gbyBhcyBTZW5kTWVzc2FnZUV4cGlyZU9wZXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBuZXcgU2VuZE1lc3NhZ2VFeHBpcmVPcGVyYXRpb24ocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLmR1cmF0aW9uVHlwZSA9IG9wZXJhdGlvbi5kdXJhdGlvblR5cGUgYXMgRHVyYXRpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS50aW1lRHVyYXRpb24gPSBvcGVyYXRpb24udGltZUR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS50aW1lVW5pdCA9IG9wZXJhdGlvbi50aW1lVW5pdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2Uub3BlcmF0aW9uVHlwZU5hbWUgPSBvcGVyYXRpb24ub3BlcmF0aW9uVHlwZU5hbWUgPyBvcGVyYXRpb24ub3BlcmF0aW9uVHlwZU5hbWUgOiAnU2VuZE1lc3NhZ2VFeHBpcmVPcGVyYXRpb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5tZXNzYWdlID0gb3BlcmF0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLnN1YmplY3QgPSBvcGVyYXRpb24uc3ViamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2Uuc2VuZFR5cGUgPSBvcGVyYXRpb24uc2VuZFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlLnJlY2VpdmVyID0gb3BlcmF0aW9uLnJlY2VpdmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5yZWNlaXZlclRleHQgPSBvcGVyYXRpb24ucmVjZWl2ZXJUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5jeWNsZUVuYWJsZSA9IG9wZXJhdGlvbi5jeWNsZUVuYWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UuY3ljbGVUaW1lID0gb3BlcmF0aW9uLmN5Y2xlVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UuY3ljbGVUaW1lVW5pdCA9IG9wZXJhdGlvbi5jeWNsZVRpbWVVbml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uLnNtc01lc3NhZ2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21zTWVzc2FnZVRlbXBsYXRlID0gbmV3IFNtc01lc3NhZ2VUZW1wbGF0ZShwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtc01lc3NhZ2VUZW1wbGF0ZS5jb2RlID0gb3BlcmF0aW9uLnNtc01lc3NhZ2VUZW1wbGF0ZS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQgPSBvcGVyYXRpb24uc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcyAmJiBvcGVyYXRpb24uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBvcGVyYXRpb24uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGUgPSBuZXcgU21zTWVzc2FnZVZhcmlhYmxlKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS5jb2RlID0gdi5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS52YWx1ZSA9IHYudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLnRhZyA9IHYudGFnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBzbXNNZXNzYWdlVGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5leHBpcmVPcGVyYXRpb25zLnB1c2goc2VuZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoby5vcGVyYXRpb25UeXBlTmFtZSA9PT0gJ0F1dG9IYW5kbGVFeHBpcmVPcGVyYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG8gYXMgQXV0b0hhbmRsZUV4cGlyZU9wZXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0b0hhbmRsZSA9IG5ldyBBdXRvSGFuZGxlRXhwaXJlT3BlcmF0aW9uKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvSGFuZGxlLmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IYW5kbGUuZHVyYXRpb25UeXBlID0gb3BlcmF0aW9uLmR1cmF0aW9uVHlwZSBhcyBEdXJhdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IYW5kbGUudGltZUR1cmF0aW9uID0gb3BlcmF0aW9uLnRpbWVEdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS50aW1lVW5pdCA9IG9wZXJhdGlvbi50aW1lVW5pdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5vcGVyYXRpb25UeXBlTmFtZSA9IG9wZXJhdGlvbi5vcGVyYXRpb25UeXBlTmFtZSA/IG9wZXJhdGlvbi5vcGVyYXRpb25UeXBlTmFtZSA6ICdBdXRvSGFuZGxlRXhwaXJlT3BlcmF0aW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5hdXRvSGFuZGxlVHlwZSA9IG9wZXJhdGlvbi5hdXRvSGFuZGxlVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0hhbmRsZS5tZXNzYWdlID0gb3BlcmF0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuZXhwaXJlT3BlcmF0aW9ucy5wdXNoKGF1dG9IYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKGNvbnRyb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9jZXNzTWVzc2FnZU5vdGljZXMobm90aWNlczogYW55W10pIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZXh0ZW5kRWxlbWVudHMubGVuZ3RoOyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaSAtIDFdIGluc3RhbmNlb2YgTWVzc2FnZU5vdGljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZEVsZW1lbnRzLnNwbGljZShpIC0gMSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vdGljZXMgJiYgbm90aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IG4gb2Ygbm90aWNlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZU5vdGljZSA9IG5ldyBNZXNzYWdlTm90aWNlKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5zZW5kVHlwZSA9IG4uc2VuZFR5cGU7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnNlbmRUaW1lID0gbi5zZW5kVGltZTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2Uuc3ViamVjdCA9IG4uc3ViamVjdDtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2UuY29udGVudCA9IG4uY29udGVudDtcclxuICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXIgPSBuLnJlY2VpdmVyO1xyXG4gICAgICAgICAgICAgICAgLy8gbWVzc2FnZU5vdGljZS5yZWNlaXZlclRleHQgPSBuLnJlY2VpdmVyVGV4dDtcclxuICAgICAgICAgICAgICAgIG4ucmVjZWl2ZXJzID0gbi5yZWNlaXZlcnMuZmlsdGVyKHIgPT4gci50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmIChuLnJlY2VpdmVycyAmJiBuLnJlY2VpdmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWl2ZXJzID0gbi5yZWNlaXZlcnMuZmlsdGVyKHIgPT4gci50eXBlID09PSAndXNlclBhcnRpY2lwYW50J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAoci50eXBlID09PSAncHJvY2Vzc1BhcnRpY2lwYW50JyAmJiByLnByb2Nlc3NQYXJ0aWNpcGFudCAhPT0gJ2FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCcpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBuLnJlY2VpdmVycy5maWx0ZXIociA9PiByLnR5cGUgPT09ICd2YXJpYWJsZVBhcnRpY2lwYW50JyB8fCByLnR5cGUgPT09ICdwb3NpdGlvblBhcnRpY2lwYW50J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAoci50eXBlID09PSAncHJvY2Vzc1BhcnRpY2lwYW50JyAmJiByLnByb2Nlc3NQYXJ0aWNpcGFudCA9PT0gJ2FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCcpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXJzICYmIHJlY2VpdmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWNlaXZlciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVjZWl2ZXJOYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiByZWNlaXZlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnR5cGUgPT09ICdwcm9jZXNzUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIgKz0gKHIucHJvY2Vzc1BhcnRpY2lwYW50ICsgJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5wcm9jZXNzUGFydGljaXBhbnQgPT09ICdwcm9jSW5zdENyZWF0b3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyTmFtZSArPSAn5rWB56iL5Y+R6LW35Lq6LCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHIucHJvY2Vzc1BhcnRpY2lwYW50ID09PSAnd29ya0l0ZW1QYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJOYW1lICs9ICfku7vliqHmjqXmlLbkurosJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoci50eXBlID09PSAndXNlclBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyICs9IChyLnVzZXJJZHMgKyAnLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyTmFtZSArPSAoci51c2VyTmFtZXMgKyAnLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSByZWNlaXZlci5zdWJzdHJpbmcoMCwgcmVjZWl2ZXIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpdmVyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJOYW1lID0gcmVjZWl2ZXJOYW1lLnN1YnN0cmluZygwLCByZWNlaXZlck5hbWUubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5yZWNlaXZlciA9IHJlY2VpdmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnJlY2VpdmVyVGV4dCA9IHJlY2VpdmVyTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50cyAmJiBwYXJ0aWNpcGFudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXZlckV4cHJlc3Npb25zID0gbmV3IEFycmF5PFBhcnRpY2lwYW50RXhwcmVzc2lvbj4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHBhcnRpY2lwYW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAudHlwZSA9PT0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZpdHlFeGVjdXRvciA9IG5ldyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQgPSBwLmFjdGl2aXR5RGVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZk5hbWUgPSBwLmFjdGl2aXR5RGVmTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2goYWN0aXZpdHlFeGVjdXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAndmFyaWFibGVQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFyaWFibGVQYXJ0aWNpcGFudCA9IG5ldyBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwsIHAudmFyaWFibGVQYXJ0aWNpcGFudCwgcC52YXJpYWJsZU5hbWUsIHAub3JnVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQYXJ0aWNpcGFudC5pZCA9IEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGFydGljaXBhbnQuVGFnID0gJ2V4cHJlc3Npb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGFydGljaXBhbnQuT3JnVHlwZSA9IHAub3JnVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2godmFyaWFibGVQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAncG9zaXRpb25QYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaVBhcnRpY2lwYW50ID0gbmV3IFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKHByb2Nlc3MuTW9kZWwsIHAucG9zaXRpb25JZCwgcC5wb3NpdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2lQYXJ0aWNpcGFudC5pZCA9IEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2lQYXJ0aWNpcGFudC5Qb3NpdGlvblR5cGUgPSBwLnBvc2l0aW9uVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5wb3NpdGlvblR5cGUgPT09ICcxJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuT3JnSWQgPSBwLm9yZ0lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuT3JnVHlwZSA9IHAub3JnVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJFeHByZXNzaW9ucy5wdXNoKHBvc2lQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5yZWNlaXZlckV4cHJlc3Npb25zID0gcmVjZWl2ZXJFeHByZXNzaW9ucztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG4uc21zTWVzc2FnZVRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21zTWVzc2FnZVRlbXBsYXRlID0gbmV3IFNtc01lc3NhZ2VUZW1wbGF0ZShwcm9jZXNzLk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuY29kZSA9IG4uc21zTWVzc2FnZVRlbXBsYXRlLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQgPSBuLnNtc01lc3NhZ2VUZW1wbGF0ZS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMgJiYgbi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBuLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZSA9IG5ldyBTbXNNZXNzYWdlVmFyaWFibGUocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS5jb2RlID0gdi5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUudmFsdWUgPSB2LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUudGFnID0gdi50YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSA9IHNtc01lc3NhZ2VUZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKG1lc3NhZ2VOb3RpY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUltYWdlU2V0dGluZ3MoaW1hZ2VTZXR0aW5nczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMucHJvY2VzcztcclxuICAgICAgICBsZXQgZXh0ZW5kRWxlbWVudHMgPSBwcm9jZXNzLkdldEV4dGVuc2lvbkVsZW1lbnRzKCk7XHJcbiAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4dGVuZEVsZW1lbnRzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuZEVsZW1lbnRzW2kgLSAxXSBpbnN0YW5jZW9mIEltYWdlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRFbGVtZW50cy5zcGxpY2UoaSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbWFnZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlU2V0dGluZyA9IG5ldyBJbWFnZVNldHRpbmdzKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICBpbWFnZVNldHRpbmcuaW1hZ2VPcGVyYXRpb24gPSBpbWFnZVNldHRpbmdzLmltYWdlT3BlcmF0aW9uO1xyXG4gICAgICAgICAgICBleHRlbmRFbGVtZW50cy5wdXNoKGltYWdlU2V0dGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu05paw5omp5bGV5bGe5oCnXHJcbiAgICAgKiBAcGFyYW0gYnBtbk1vZGVsXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgcmVzZXRFeHRlbmRQcm9wZXJ0eSh2YWx1ZTogYW55W10pIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5wcm9jZXNzO1xyXG4gICAgICAgIGxldCBleHRlbmRFbGVtZW50cyA9IHByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IG8gb2YgdmFsdWUpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGV4dGVuZEVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEV4dGVuZFByb3BlcnR5ICYmIGUua2V5ID09PSBvLmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGV4dGVuZEVsZW1lbnRzLmluZGV4T2YoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB2YWx1ZSBhcyBhbnk7XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBuZXcgRXh0ZW5kUHJvcGVydHkocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmtleSA9IGEuY29kZTtcclxuICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5kRWxlbWVudHMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZSh3aG9sZU9yZGVyUmV0cmlldmU6IGJvb2xlYW4pIHtcclxuICAgICAgICBsZXQgZXh0ZW5kRWxlbWVudHMgPSB0aGlzLnByb2Nlc3MuR2V0RXh0ZW5zaW9uRWxlbWVudHMoKTtcclxuICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHMgIT09IG51bGwgJiYgZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGV4dGVuZEVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kRWxlbWVudHNbaV0gaW5zdGFuY2VvZiBQcm9jZXNzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGV4dGVuZEVsZW1lbnRzW2ldIGFzIFByb2Nlc3NIZWFkZXIpLmVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZSA9IHdob2xlT3JkZXJSZXRyaWV2ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19