/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NodeCell, ElementPropertyConfig } from "@edp-pmf/grapheditor";
import { mxResources } from "@edp-pmf/mxgraph-ts";
import { BpmnModelHelper, FlowNodeState } from "@edp-pmf/bpmn-model";
import { NotifyActivity, ExtendProperty, MessageNotice, ActionScope, Condition, ExecuteForm, PotentialOwnerImpl, HumanPerformerImpl, OrganizationParticipantExpression, VariableParticipantExpression, ComponentParticipantExpression, ReportingLineParticipantExpression, MatrixParticipantExpression, ActivityExecutorParticipantExpression, UserParticipantExpression, PositionParticipantExpression, ActualParameter, SmsMessageTemplate, SmsMessageVariable, } from "@gsp-wf/wf-process-model";
import { PropertyHelper } from "./PropertyHelper";
import { WfConstants } from "../WfConstants";
import { NotifyActivityPropertyKeys } from "./property-keys/NotifyActivityPropertyKeys";
// import { ParticipantInfo } from "../../views/participant/participant.info";
import { ParticipantInfo } from "../entity";
/**
 * 知会活动节点
 */
export class NotifyActivityCell extends NodeCell {
    /**
     * @param {?=} value
     * @param {?=} geometry
     * @param {?=} style
     */
    constructor(value, geometry, style) {
        super(value, geometry, style);
        this.clrTypeId = NotifyActivityCell.CLR_TYPE_ID;
        this.name = "知会";
        this.nameLanguage = {
            "zh-CHS": "知会",
            "zh-CHT": "知會",
            "en": "Notify",
        };
        this.imgUrls = {
            [FlowNodeState.Default]: WfConstants.IMAGE_PATH + "/notify.png",
            [FlowNodeState.Selected]: WfConstants.IMAGE_PATH + "/notify_backup.png",
        };
    }
    /**
     * @param {?=} flowElt
     * @return {?}
     */
    createFlowElement(flowElt) {
        /** @type {?} */
        const flowNode = (/** @type {?} */ (super.createFlowElement(flowElt)));
        flowNode.Id = "NotifyActivity" + BpmnModelHelper.GenerateElementId();
        // 创建而非复制时执行
        if (flowElt == null) {
            flowNode.notifyAble = this.editorUi.generalConfig.enableNotify;
        }
        return flowNode;
    }
    /**
     * @return {?}
     */
    getFarrisPropConfig() {
        /** @type {?} */
        const editorUi = this.editorUi;
        // const graph = editorUi.graph;
        /** @type {?} */
        let act = this.flowElement;
        // 过滤配置位置为节点的扩展属性，分离一级和二级属性：知会节点
        // 一级节点List
        /** @type {?} */
        let generalExtendList = [];
        // 二级节点List
        /** @type {?} */
        let detailExtendList = [];
        if (editorUi.procExtProps && editorUi.procExtProps.length > 0) {
            JSON.parse(JSON.stringify(editorUi.procExtProps)).forEach((/**
             * @param {?} p
             * @return {?}
             */
            (p) => {
                if (p.propertyLocation && p.propertyLocation.indexOf('activity') != -1 && !p.parentId) {
                    generalExtendList.push(p);
                }
                else if (p.propertyLocation && p.propertyLocation.indexOf('activity') != -1 && p.parentId) {
                    detailExtendList.push(p);
                }
            }));
        }
        generalExtendList = generalExtendList.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => {
            return a.sortOrder - b.sortOrder;
        }));
        /** @type {?} */
        let extendList = [];
        if (editorUi.procExtProps && editorUi.procExtProps.length > 0) {
            extendList = JSON.parse(JSON.stringify(editorUi.procExtProps)).sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => {
                return a.sortOrder - b.sortOrder;
            }));
        }
        extendList = extendList.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => {
            return a.sortOrder - b.sortOrder;
        }));
        /** @type {?} */
        let basicProperty = new ElementPropertyConfig();
        /** @type {?} */
        let activityProperty = new ElementPropertyConfig();
        /** @type {?} */
        let propertyData = {};
        basicProperty.categoryId = 'basicProperty';
        basicProperty.categoryName = mxResources.get('basicInformation');
        basicProperty.tabId = 'basic';
        basicProperty.tabName = mxResources.get('basicAttributes');
        basicProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.Name, propertyName: mxResources.get('name'), propertyType: 'string', visible: !this.editorUi.multiLangEnabled },
            { propertyID: NotifyActivityPropertyKeys.NameLanguage, propertyName: mxResources.get('nameLanguage'), propertyType: 'multiLanguage', visible: this.editorUi.multiLangEnabled },
            { propertyID: NotifyActivityPropertyKeys.Id, propertyName: mxResources.get('id'), propertyType: 'string', readonly: true }
        ];
        /** @type {?} */
        let performerProperty = new ElementPropertyConfig();
        performerProperty.categoryId = 'performerProperty';
        performerProperty.categoryName = mxResources.get('performerProperty');
        performerProperty.tabId = 'basic';
        performerProperty.tabName = mxResources.get('basicAttributes');
        performerProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.ParticipantSchemes, propertyName: mxResources.get('notifyRecipient'), propertyType: 'modal' }
        ];
        /** @type {?} */
        let formDef = new ElementPropertyConfig();
        formDef.categoryId = 'formDef';
        formDef.categoryName = mxResources.get('formDef');
        formDef.tabId = 'basic';
        formDef.tabName = mxResources.get('basicAttributes');
        formDef.properties = [
            { propertyID: NotifyActivityPropertyKeys.wf_ExecuteForms_PC, propertyName: mxResources.get('pcForm'), propertyType: 'modal' },
            { propertyID: NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile, propertyName: mxResources.get('webForm'), propertyType: 'modal' },
        ];
        /** @type {?} */
        let approvalProperty = new ElementPropertyConfig();
        approvalProperty.categoryId = 'activityProperty';
        approvalProperty.categoryName = mxResources.get('activityProperty');
        approvalProperty.tabId = 'basic';
        approvalProperty.tabName = mxResources.get('basicAttributes');
        approvalProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.NotifyAble, propertyName: mxResources.get('notifyAble'), propertyType: 'modal' },
        ];
        activityProperty.categoryId = 'advanced';
        activityProperty.categoryName = mxResources.get('otherConfigurations');
        activityProperty.tabId = 'advanced';
        activityProperty.tabName = mxResources.get('advancedAttributes');
        activityProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.messageNotice, propertyName: mxResources.get('messageNotice'), propertyType: 'modal' },
        ];
        // 扩展属性分group处理，每个group包含父级属性和属于它的子扩展属性
        /** @type {?} */
        const groupList = new Array();
        for (const extend of extendList) {
            if (!extend.parentId) {
                /** @type {?} */
                const group = { parent: extend, childs: new Array() };
                for (const e of extendList) {
                    if (e.parentId === extend.id) {
                        group.childs.push(e);
                    }
                }
                groupList.push(group);
            }
        }
        // 没有扩展属性值的时候不显示扩展属性一栏
        if (groupList && groupList.length > 0) {
            /** @type {?} */
            let ExtendPropertyConfig = new ElementPropertyConfig();
            ExtendPropertyConfig.categoryId = 'extendPropertyConfig';
            ExtendPropertyConfig.categoryName = mxResources.get('extendPropertyConfig');
            ExtendPropertyConfig.tabId = 'advanced';
            ExtendPropertyConfig.tabName = mxResources.get('advancedAttributes');
            ExtendPropertyConfig.properties = new Array();
            for (const g of groupList) {
                ExtendPropertyConfig.properties.push({ propertyID: g.parent.id, propertyName: g.parent.propertyTitle, propertyType: 'modal' });
            }
            this.setPropertyData(act, propertyData, groupList);
            return {
                propertyConfig: [basicProperty, performerProperty, formDef, approvalProperty, activityProperty, ExtendPropertyConfig],
                propertyData: propertyData
            };
        }
        else {
            this.setPropertyData(act, propertyData, groupList);
            return {
                propertyConfig: [basicProperty, performerProperty, formDef, approvalProperty, activityProperty],
                propertyData: propertyData
            };
        }
    }
    /**
     * 组织UserActivity的属性值propertyData
     * @param {?} act
     * @param {?} propertyData
     * @param {?=} groupList
     * @return {?}
     */
    setPropertyData(act, propertyData, groupList) {
        propertyData[NotifyActivityPropertyKeys.Id] = act.Id;
        propertyData[NotifyActivityPropertyKeys.ClrTypeID] = act.ClrTypeID;
        propertyData[NotifyActivityPropertyKeys.Name] = act.Name;
        propertyData[NotifyActivityPropertyKeys.NameLanguage] = act.NameLanguage || {
            "zh-CHS": act.Name,
        };
        propertyData[NotifyActivityPropertyKeys.ParticipantSchemes] = this.getParticipantInfo(act);
        propertyData[NotifyActivityPropertyKeys.messageNotice] = PropertyHelper.getMessageNotices(act.messageNotices);
        ;
        propertyData[NotifyActivityPropertyKeys.wf_ExecuteForms_PC] =
            act.executeForms ? act.executeForms.find((/**
             * @param {?} e
             * @return {?}
             */
            e => e.TerminalType === 'PC')) : null;
        propertyData[NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile] =
            act.executeForms ? act.executeForms.find((/**
             * @param {?} e
             * @return {?}
             */
            e => e.TerminalType === 'MOBILE')) : null;
        propertyData[NotifyActivityPropertyKeys.NotifyAble] = PropertyHelper.getNotifyAble(act.notifyAble, act.dynamicParticipants);
        for (const g of groupList) {
            // 取回模型上的value值给到扩展属性组件里
            if (act.extendProperties && act.extendProperties.length > 0) {
                g.childs.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                (a, b) => {
                    return a.sortOrder - b.sortOrder;
                })).forEach((/**
                 * @param {?} d
                 * @return {?}
                 */
                (d) => {
                    act.extendProperties.forEach((/**
                     * @param {?} e
                     * @return {?}
                     */
                    e => {
                        if (e.key == d.code) {
                            d.value = e.value;
                        }
                    }));
                }));
            }
            propertyData[g.parent.id] = g.childs;
        }
    }
    /**
     * @param {?} notifyActivity
     * @return {?}
     */
    getParticipantInfo(notifyActivity) {
        /** @type {?} */
        const partiInfo = new ParticipantInfo();
        /** @type {?} */
        const roles = (/** @type {?} */ (notifyActivity.GetResourceRoles().filter((/**
         * @param {?} role
         * @return {?}
         */
        role => role instanceof HumanPerformerImpl))));
        partiInfo.humanPerformerList = PropertyHelper.getPerformerList(roles);
        return partiInfo;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    updateProps(obj) {
        /** @type {?} */
        const notifyActivity = this.flowElement;
        /** @type {?} */
        const editorUi = this.editorUi;
        /** @type {?} */
        const propertyId = obj.propertyID;
        switch (propertyId) {
            // 参与者属性
            case NotifyActivityPropertyKeys.ParticipantSchemes:
                this.updateParticipant(notifyActivity, obj);
                break;
            case NotifyActivityPropertyKeys.messageNotice:
                this.updateMessageNotices(notifyActivity, obj);
                break;
            case NotifyActivityPropertyKeys.wf_ExecuteForms_PC:
                this.updateStartActivityForm(notifyActivity, obj, 'PC');
                if (obj.parameters && obj.parameters.length > 0) {
                    PropertyHelper.updateFormalParameters(editorUi.graph.bpmnModel.DefaultProcess, obj.parameters);
                }
                break;
            case NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile:
                this.updateStartActivityForm(notifyActivity, obj, 'MOBILE');
                if (obj.parameters && obj.parameters.length > 0) {
                    PropertyHelper.updateFormalParameters(editorUi.graph.bpmnModel.DefaultProcess, obj.parameters);
                }
                break;
            case NotifyActivityPropertyKeys.NotifyAble:
                this.updateNotifySet(notifyActivity, obj);
                break;
            default:
                // 判断ResourceKeys是不是groupid,是就走resetExtendProperty
                if (this.editorUi.procExtProps.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.id === propertyId)) > -1) {
                    this.resetExtendProperty(notifyActivity, obj);
                }
                else {
                    super.updateProps(obj);
                }
                break;
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    updateParticipant(notifyActivity, obj) {
        /** @type {?} */
        const performerInfo = obj.propertyValue;
        /** @type {?} */
        const resourceRoles = notifyActivity.GetResourceRoles();
        if (resourceRoles && resourceRoles.length > 0) {
            resourceRoles.forEach((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                if (r instanceof HumanPerformerImpl) {
                    notifyActivity.RemoveResourceRole(r.Id);
                }
            }));
        }
        if (performerInfo.humanPerformerList && performerInfo.humanPerformerList.length > 0) {
            for (const humanPerformer of performerInfo.humanPerformerList) {
                switch (humanPerformer.type) {
                    case UserParticipantExpression.Clr_Type_ID:
                        this.addUserParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case PositionParticipantExpression.Clr_Type_ID:
                        this.addPositionParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case VariableParticipantExpression.Clr_Type_ID:
                        this.addVariableParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case ComponentParticipantExpression.Clr_Type_ID:
                        this.addComponentParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case ReportingLineParticipantExpression.Clr_Type_ID:
                        this.addReportingLineParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case ActivityExecutorParticipantExpression.Clr_Type_ID:
                        this.addActivityExecutorParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                    case MatrixParticipantExpression.Clr_Type_ID:
                        this.addMatrixParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                        break;
                }
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addUserParticipant(notifyActivity, performer, type, scope) {
        /** @type {?} */
        let userParticipant = new UserParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName, performer.orgType);
        userParticipant.id = performer.id;
        userParticipant.OrgId = performer.orgId;
        userParticipant.OrgName = performer.orgName;
        userParticipant.Tag = performer.tag;
        userParticipant.OrgType = performer.orgType;
        userParticipant.order = performer.order;
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = userParticipant;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = userParticipant;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                userParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(userParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addVariableParticipant(notifyActivity, performer, type, scope) {
        /** @type {?} */
        let variablePerformer = new VariableParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName, performer.orgType);
        variablePerformer.id = performer.id;
        variablePerformer.Name = performer.performerName ? performer.performerName : performer.name;
        ;
        variablePerformer.Tag = performer.tag;
        variablePerformer.VarValue = performer.varValue;
        variablePerformer.VarType = performer.varType;
        variablePerformer.Relation = performer.relation;
        variablePerformer.order = performer.order;
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = variablePerformer;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = variablePerformer;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                variablePerformer.actionScope = scope;
                notifyActivity.dynamicParticipants.push(variablePerformer);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addPositionParticipant(notifyActivity, performer, type, scope) {
        /** @type {?} */
        let posiParticipant = new PositionParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName);
        posiParticipant.id = performer.id;
        posiParticipant.PositionType = performer.positionType;
        posiParticipant.order = performer.order;
        if (performer.positionType === '1') {
            posiParticipant.OrgId = performer.orgId;
            posiParticipant.OrgName = performer.orgName;
            posiParticipant.OrgType = performer.orgType;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = posiParticipant;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = posiParticipant;
            if (performer.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                posiParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(posiParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} component
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addComponentParticipant(notifyActivity, component, type, scope) {
        /** @type {?} */
        let componentParticipant = new ComponentParticipantExpression(notifyActivity.Model);
        componentParticipant.id = component.id;
        componentParticipant.componentId = component.metadataId;
        componentParticipant.componentName = component.name;
        componentParticipant.methodName = component.methodName;
        componentParticipant.methodCode = component.methodCode;
        componentParticipant.order = component.order;
        if (component.actualParameters && component.actualParameters.length > 0) {
            /** @type {?} */
            let actParas = new Array();
            for (let para of component.actualParameters) {
                /** @type {?} */
                let actPara = new ActualParameter(notifyActivity.Model, para.code, para.value, para.valueText);
                // TODO:更新参与者会默认把构件参数属性改为contant，临时修复，后续代码优化
                actPara.Tag = para.tag;
                if (para.fetchValueMode) {
                    switch (para.fetchValueMode) {
                        case 'express':
                            actPara.Tag = 'expression';
                            break;
                        case 'none':
                            actPara.Tag = 'expression';
                            break;
                        default:
                            actPara.Tag = 'constant';
                            break;
                    }
                }
                actParas.push(actPara);
            }
            componentParticipant.actualParameters = actParas;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = componentParticipant;
            if (component.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = component.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = component.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = componentParticipant;
            if (component.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = component.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = component.order;
            if (scope) {
                componentParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(componentParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addReportingLineParticipant(notifyActivity, participant, type, scope) {
        /** @type {?} */
        let reportingLine = new ReportingLineParticipantExpression(notifyActivity.Model);
        reportingLine.id = participant.id;
        reportingLine.ReportingLineDefId = participant.reportingLineDefId;
        reportingLine.ReportingLineDefName = participant.reportingLineDefName;
        reportingLine.RefOrgId = participant.refOrgId;
        reportingLine.RefUserId = participant.refUserId;
        reportingLine.RefEmployeeId = participant.refEmployeeId;
        reportingLine.order = participant.order;
        reportingLine.Dimension = participant.dimension;
        reportingLine.Tag = participant.tag;
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = reportingLine;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = reportingLine;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                reportingLine.actionScope = scope;
                notifyActivity.dynamicParticipants.push(reportingLine);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addActivityExecutorParticipant(notifyActivity, participant, type, scope) {
        /** @type {?} */
        let activityExecutor = new ActivityExecutorParticipantExpression(notifyActivity.Model);
        activityExecutor.id = participant.id;
        activityExecutor.activityDefId = participant.activityDefId;
        activityExecutor.order = participant.order;
        activityExecutor.activityDefName = participant.activityDefName;
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = activityExecutor;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = activityExecutor;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                activityExecutor.actionScope = scope;
                notifyActivity.dynamicParticipants.push(activityExecutor);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addMatrixParticipant(notifyActivity, participant, type, scope) {
        /** @type {?} */
        let matrix = new MatrixParticipantExpression(notifyActivity.Model);
        matrix.order = participant.order;
        matrix.id = participant.id;
        matrix.matrixDefId = participant.matrixDefId;
        matrix.matrixDefName = participant.matrixDefName;
        matrix.conditionField1 = participant.conditionField1;
        matrix.conditionFieldText1 = participant.conditionFieldText1;
        matrix.conditionField2 = participant.conditionField2;
        matrix.conditionFieldText2 = participant.conditionFieldText2;
        matrix.conditionField3 = participant.conditionField3;
        matrix.conditionFieldText3 = participant.conditionFieldText3;
        matrix.multivaluedCondition = participant.multivaluedCondition;
        matrix.dataFieldAlias = participant.dataFieldAlias;
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = matrix;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = matrix;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                matrix.actionScope = scope;
                notifyActivity.dynamicParticipants.push(matrix);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     *
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    addOrganizationParticipant(notifyActivity, participant, type, scope) {
        /** @type {?} */
        let potential = new OrganizationParticipantExpression(notifyActivity.Model);
        potential.id = participant.id;
        potential.order = participant.order;
        potential.actionScope = ActionScope.AssignUser;
        potential.organizationLevel = (/** @type {?} */ (participant.organizationLevel));
        potential.organizationId = participant.organizationId;
        potential.organizationName = participant.organizationName;
        potential.includeChildren = participant.includeChildren;
        potential.tag = participant.tag;
        if (participant.condition) {
            /** @type {?} */
            const condition = new Condition(notifyActivity.Model);
            condition.Value = participant.condition;
            potential.condition = condition;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            let humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = potential;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            let otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = potential;
            if (participant.condition) {
                /** @type {?} */
                const condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                potential.actionScope = scope;
                notifyActivity.dynamicParticipants.push(potential);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @param {?} terminal
     * @return {?}
     */
    updateStartActivityForm(notifyActivity, obj, terminal) {
        if (notifyActivity) {
            /** @type {?} */
            let form = (/** @type {?} */ (obj.propertyValue));
            if (!notifyActivity.executeForms) {
                notifyActivity.executeForms = new Array();
            }
            notifyActivity.executeForms = notifyActivity.executeForms.filter((/**
             * @param {?} e
             * @return {?}
             */
            e => e.TerminalType !== terminal));
            if (form) {
                /** @type {?} */
                let params = (/** @type {?} */ (form.ActualParameters));
                /** @type {?} */
                let actParas = new Array();
                if (params && params.length > 0) {
                    for (let para of params) {
                        /** @type {?} */
                        let actPara = new ActualParameter(notifyActivity.Model, para.Name, para.Value);
                        if (para.Tag) {
                            actPara.Tag = para.Tag;
                        }
                        else {
                            if (para.Value) {
                                if (para.Value.length >= 8 && para.Value.slice(0, 8) === `{"expr":`) {
                                    actPara.Tag = 'expression';
                                }
                                else {
                                    actPara.Tag = 'constant';
                                }
                            }
                            else {
                                actPara.Tag = 'variable';
                            }
                        }
                        actParas.push(actPara);
                    }
                }
                /** @type {?} */
                const id = BpmnModelHelper.GenerateElementId();
                /** @type {?} */
                let item = new ExecuteForm(notifyActivity.Model, id, form.Name, actParas);
                item.ComponentId = form.ComponentId;
                item.FormType = form.FormType;
                item.formFormatId = form.formFormatId;
                item.formatConfigId = form.formatConfigId;
                item.TerminalType = form.TerminalType;
                notifyActivity.executeForms.push(item);
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    updateNotifySet(notifyActivity, obj) {
        /** @type {?} */
        const scope = (/** @type {?} */ (obj.propertyValue));
        notifyActivity.dynamicParticipants = notifyActivity.dynamicParticipants.filter((/**
         * @param {?} p
         * @return {?}
         */
        p => ((/** @type {?} */ (p))).actionScope !== ActionScope.Notify));
        notifyActivity.notifyAble = scope.enable;
        if (scope.scope) {
            if (scope.scope.organizationLevel) {
                /** @type {?} */
                const organizationParticipantExpression = new OrganizationParticipantExpression(notifyActivity.Model);
                organizationParticipantExpression.id = BpmnModelHelper.GenerateElementId();
                organizationParticipantExpression.actionScope = ActionScope.Notify;
                organizationParticipantExpression.organizationLevel = (/** @type {?} */ (scope.scope.organizationLevel));
                organizationParticipantExpression.organizationId = scope.scope.organizationId;
                organizationParticipantExpression.organizationName = scope.scope.organizationName;
                organizationParticipantExpression.includeChildren = scope.scope.includeChildren;
                organizationParticipantExpression.tag = scope.scope.tag;
                notifyActivity.dynamicParticipants.push(organizationParticipantExpression);
            }
            else {
                /** @type {?} */
                const performerInfo = (/** @type {?} */ (scope.scope.participantInfo));
                if (performerInfo.isAllScope && performerInfo.potentialOwnerList && performerInfo.potentialOwnerList.length > 0) {
                    for (const potentialOwner of performerInfo.potentialOwnerList) {
                        switch (potentialOwner.type) {
                            case UserParticipantExpression.Clr_Type_ID:
                                this.addUserParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case VariableParticipantExpression.Clr_Type_ID:
                                this.addVariableParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case PositionParticipantExpression.Clr_Type_ID:
                                this.addPositionParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case ComponentParticipantExpression.Clr_Type_ID:
                                this.addComponentParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case ReportingLineParticipantExpression.Clr_Type_ID:
                                this.addReportingLineParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case ActivityExecutorParticipantExpression.Clr_Type_ID:
                                this.addActivityExecutorParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                                notifyActivity;
                            case MatrixParticipantExpression.Clr_Type_ID:
                                this.addMatrixParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                            case OrganizationParticipantExpression.Clr_Type_ID:
                                this.addOrganizationParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                break;
                        }
                    }
                }
            }
        }
    }
    /**
     * 更新知会活动扩展属性
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    resetExtendProperty(notifyActivity, obj) {
        if (notifyActivity) {
            /** @type {?} */
            let attributes = (/** @type {?} */ (obj.propertyValue));
            if (!notifyActivity.extendProperties) {
                notifyActivity.extendProperties = new Array();
            }
            for (const o of obj.propertyValue) {
                /** @type {?} */
                const index = notifyActivity.extendProperties.findIndex((/**
                 * @param {?} e
                 * @return {?}
                 */
                e => e.key === o.code));
                if (index > -1) {
                    notifyActivity.extendProperties.splice(index, 1);
                }
            }
            if (attributes) {
                attributes.forEach((/**
                 * @param {?} a
                 * @return {?}
                 */
                (a) => {
                    /** @type {?} */
                    let item = new ExtendProperty(notifyActivity.Model);
                    item.key = a.code;
                    item.value = a.value;
                    notifyActivity.extendProperties.push(item);
                }));
            }
        }
    }
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    updateMessageNotices(notifyActivity, obj) {
        /** @type {?} */
        const bpmnModel = notifyActivity.Model;
        /** @type {?} */
        let notices = (/** @type {?} */ (obj.propertyValue));
        notifyActivity.messageNotices = new Array();
        if (notices && notices.length > 0) {
            for (let n of notices) {
                /** @type {?} */
                const messageNotice = new MessageNotice(bpmnModel);
                messageNotice.sendType = n.sendType;
                messageNotice.sendTime = n.sendTime;
                messageNotice.subject = n.subject;
                messageNotice.content = n.content;
                if (n.smsMessageTemplate) {
                    /** @type {?} */
                    const smsMessageTemplate = new SmsMessageTemplate(bpmnModel);
                    smsMessageTemplate.code = n.smsMessageTemplate.code;
                    smsMessageTemplate.content = n.smsMessageTemplate.content;
                    smsMessageTemplate.smsMessageVariables = new Array();
                    if (n.smsMessageTemplate.smsMessageVariables && n.smsMessageTemplate.smsMessageVariables.length > 0) {
                        for (const v of n.smsMessageTemplate.smsMessageVariables) {
                            /** @type {?} */
                            const variable = new SmsMessageVariable(bpmnModel);
                            variable.code = v.code;
                            variable.value = v.value;
                            variable.tag = v.tag;
                            smsMessageTemplate.smsMessageVariables.push(variable);
                        }
                    }
                    messageNotice.smsMessageTemplate = smsMessageTemplate;
                }
                // messageNotice.receiver = n.receiver;
                // messageNotice.receiverText = n.receiverText;
                n.receivers = n.receivers.filter((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => r.type));
                if (n.receivers && n.receivers.length > 0) {
                    /** @type {?} */
                    const receivers = n.receivers.filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => r.type === 'userParticipant'
                        || (r.type === 'processParticipant' && r.processParticipant !== 'activityExecutorParticipant')));
                    /** @type {?} */
                    const participants = n.receivers.filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => r.type === 'variableParticipant' || r.type === 'positionParticipant'
                        || (r.type === 'processParticipant' && r.processParticipant === 'activityExecutorParticipant')));
                    if (receivers && receivers.length > 0) {
                        /** @type {?} */
                        let receiver = '';
                        /** @type {?} */
                        let receiverName = '';
                        for (const r of receivers) {
                            if (r.type === 'processParticipant') {
                                receiver += (r.processParticipant + ',');
                                if (r.processParticipant === 'procInstCreator') {
                                    receiverName += '流程发起人,';
                                }
                                else if (r.processParticipant === 'workItemParticipant') {
                                    receiverName += '任务接收人,';
                                }
                            }
                            else if (r.type === 'userParticipant') {
                                receiver += (r.userIds + ',');
                                receiverName += (r.userNames + ',');
                            }
                        }
                        if (receiver) {
                            receiver = receiver.substring(0, receiver.length - 1);
                        }
                        if (receiverName) {
                            receiverName = receiverName.substring(0, receiverName.length - 1);
                        }
                        messageNotice.receiver = receiver;
                        messageNotice.receiverText = receiverName;
                    }
                    if (participants && participants.length > 0) {
                        /** @type {?} */
                        const receiverExpressions = new Array();
                        for (const p of participants) {
                            if (p.type === 'processParticipant') {
                                /** @type {?} */
                                let activityExecutor = new ActivityExecutorParticipantExpression(notifyActivity.Model);
                                activityExecutor.id = BpmnModelHelper.GenerateElementId();
                                activityExecutor.activityDefId = p.activityDefId;
                                activityExecutor.activityDefName = p.activityDefName;
                                receiverExpressions.push(activityExecutor);
                            }
                            if (p.type === 'variableParticipant') {
                                /** @type {?} */
                                let variableParticipant = new UserParticipantExpression(notifyActivity.Model, p.variableParticipant, p.variableName, p.orgType);
                                variableParticipant.id = BpmnModelHelper.GenerateElementId();
                                variableParticipant.Tag = 'expression';
                                variableParticipant.OrgType = p.orgType;
                                receiverExpressions.push(variableParticipant);
                            }
                            if (p.type === 'positionParticipant') {
                                /** @type {?} */
                                let posiParticipant = new PositionParticipantExpression(notifyActivity.Model, p.positionId, p.positionName);
                                posiParticipant.id = BpmnModelHelper.GenerateElementId();
                                posiParticipant.PositionType = p.positionType;
                                if (p.positionType === '1') {
                                    posiParticipant.OrgId = p.orgId;
                                    posiParticipant.OrgType = p.orgType;
                                }
                                receiverExpressions.push(posiParticipant);
                            }
                        }
                        messageNotice.receiverExpressions = receiverExpressions;
                    }
                }
                notifyActivity.messageNotices.push(messageNotice);
            }
        }
    }
}
NotifyActivityCell.CLR_TYPE_ID = NotifyActivity.Clr_Type_ID;
if (false) {
    /** @type {?} */
    NotifyActivityCell.CLR_TYPE_ID;
    /** @type {?} */
    NotifyActivityCell.prototype.clrTypeId;
    /** @type {?} */
    NotifyActivityCell.prototype.name;
    /** @type {?} */
    NotifyActivityCell.prototype.nameLanguage;
    /** @type {?} */
    NotifyActivityCell.prototype.flowElement;
    /** @type {?} */
    NotifyActivityCell.prototype.editorUi;
    /** @type {?} */
    NotifyActivityCell.prototype.imgUrls;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm90aWZ5QWN0aXZpdHlDZWxsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kZXNpZ25lci93Zi1jZWxsL05vdGlmeUFjdGl2aXR5Q2VsbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxxQkFBcUIsRUFBNEIsTUFBTSxzQkFBc0IsQ0FBQztBQUNqRyxPQUFPLEVBQWEsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNyRSxPQUFPLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQUUsaUNBQWlDLEVBQUUsNkJBQTZCLEVBQUUsOEJBQThCLEVBQUUsa0NBQWtDLEVBQUUsMkJBQTJCLEVBQXlCLHFDQUFxQyxFQUFFLHlCQUF5QixFQUFFLDZCQUE2QixFQUFFLGVBQWUsRUFBMkIsa0JBQWtCLEVBQUUsa0JBQWtCLEdBQXNCLE1BQU0sMEJBQTBCLENBQUM7QUFDdmlCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQVNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sNENBQTRDLENBQUM7O0FBR3hGLE9BQU8sRUFBMkIsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFDOzs7O0FBS3JFLE1BQU0sT0FBTyxrQkFBbUIsU0FBUSxRQUFROzs7Ozs7SUFpQjVDLFlBQVksS0FBVyxFQUFFLFFBQStCLEVBQUUsS0FBYztRQUNwRSxLQUFLLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztRQWpCbEMsY0FBUyxHQUFXLGtC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Q0FBQyxDQUFDLFlBQVksQ0FBQztnQ0FDM0csZUFBZSxDQUFDLEVBQUUsR0FBRyxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQ0FDekQsZUFBZSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDO2dDQUM5QyxJQUFJLENBQUMsQ0FBQyxZQUFZLEtBQUssR0FBRyxFQUFFO29DQUN4QixlQUFlLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7b0NBQ2hDLGVBQWUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQztpQ0FDdkM7Z0NBQ0QsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDOzZCQUM3Qzt5QkFDSjt3QkFDRCxhQUFhLENBQUMsbUJBQW1CLEdBQUcsbUJBQW1CLENBQUM7cUJBQzNEO2lCQUNKO2dCQUVELGNBQWMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQ3JEO1NBQ0o7SUFDTCxDQUFDOztBQS96Qk0sOEJBQVcsR0FBVyxjQUFjLENBQUMsV0FBVyxDQUFDOzs7SUFBeEQsK0JBQXdEOztJQVB4RCx1Q0FBbUQ7O0lBQ25ELGtDQUFvQjs7SUFDcEIsMENBSUE7O0lBRUEseUNBQTRCOztJQUM1QixzQ0FBcUI7O0lBRXJCLHFDQUdFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTm9kZUNlbGwsIEVsZW1lbnRQcm9wZXJ0eUNvbmZpZywgRmFycmlzUHJvcENvbmZpZ1dpdGhEYXRhIH0gZnJvbSBcIkBlZHAtcG1mL2dyYXBoZWRpdG9yXCI7XHJcbmltcG9ydCB7IE14R3JhcGhOUywgbXhSZXNvdXJjZXMgfSBmcm9tIFwiQGVkcC1wbWYvbXhncmFwaC10c1wiO1xyXG5pbXBvcnQgeyBCcG1uTW9kZWxIZWxwZXIsIEZsb3dOb2RlU3RhdGUgfSBmcm9tIFwiQGVkcC1wbWYvYnBtbi1tb2RlbFwiO1xyXG5pbXBvcnQgeyBOb3RpZnlBY3Rpdml0eSwgRXh0ZW5kUHJvcGVydHksIE1lc3NhZ2VOb3RpY2UsIEFjdGlvblNjb3BlLCBDb25kaXRpb24sIEV4ZWN1dGVGb3JtLCBQb3RlbnRpYWxPd25lckltcGwsIEh1bWFuUGVyZm9ybWVySW1wbCwgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLCBWYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbiwgQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uLCBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uLCBNYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFBhcnRpY2lwYW50RXhwcmVzc2lvbiwgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbiwgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbiwgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24sIEFjdHVhbFBhcmFtZXRlciwgQWN0aW9uT3JnYW5pemF0aW9uU2NvcGUsIFNtc01lc3NhZ2VUZW1wbGF0ZSwgU21zTWVzc2FnZVZhcmlhYmxlLCBPcmdhbml6YXRpb25MZXZlbCwgfSBmcm9tIFwiQGdzcC13Zi93Zi1wcm9jZXNzLW1vZGVsXCI7XHJcbmltcG9ydCB7IFByb3BlcnR5SGVscGVyIH0gZnJvbSBcIi4vUHJvcGVydHlIZWxwZXJcIjtcclxuaW1wb3J0IHsgV2ZFZGl0b3JVaSB9IGZyb20gXCIuLi9XZkVkaXRvclVpXCI7XHJcbmltcG9ydCB7IFVzZXJQYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvVXNlclBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IFBvc2l0aW9uUGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L1Bvc2l0aW9uUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgVmFyaWFibGVQZXJmb3JtZXIgfSBmcm9tIFwiLi4vZW50aXR5L1ZhcmlhYmxlUGVyZm9ybWVyXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudFBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9Db21wb25lbnRQYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L1JlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L0FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBNYXRyaXhQYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvTWF0cml4UGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgV2ZDb25zdGFudHMgfSBmcm9tIFwiLi4vV2ZDb25zdGFudHNcIjtcclxuaW1wb3J0IHsgTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMgfSBmcm9tIFwiLi9wcm9wZXJ0eS1rZXlzL05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzXCI7XHJcbmltcG9ydCB7IEFjdGlvbk9yZ2FuaXphdGlvblNjb3BlRGVzaWduIH0gZnJvbSBcIi4uLy4uL3ZpZXdzL29yZ2FuaXphdGlvbi1wb3RlbnRpYWwtb3duZXIvYWN0aW9uT3JnYW5pemF0aW9uU2NvcGVcIjtcclxuLy8gaW1wb3J0IHsgUGFydGljaXBhbnRJbmZvIH0gZnJvbSBcIi4uLy4uL3ZpZXdzL3BhcnRpY2lwYW50L3BhcnRpY2lwYW50LmluZm9cIjtcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uUGFydGljaXBhbnQsIFBhcnRpY2lwYW50SW5mbyB9IGZyb20gXCIuLi9lbnRpdHlcIjtcclxuXHJcbi8qKlxyXG4gKiDnn6XkvJrmtLvliqjoioLngrlcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOb3RpZnlBY3Rpdml0eUNlbGwgZXh0ZW5kcyBOb2RlQ2VsbCB7XHJcbiAgICBjbHJUeXBlSWQ6IHN0cmluZyA9IE5vdGlmeUFjdGl2aXR5Q2VsbC5DTFJfVFlQRV9JRDtcclxuICAgIG5hbWU6IHN0cmluZyA9IFwi55+l5LyaXCI7XHJcbiAgICBuYW1lTGFuZ3VhZ2U6IHsgW2xhbmc6IHN0cmluZ106IHN0cmluZzsgfSA9IHtcclxuICAgICAgXCJ6aC1DSFNcIjogXCLnn6XkvJpcIixcclxuICAgICAgXCJ6aC1DSFRcIjogXCLnn6XmnINcIixcclxuICAgICAgXCJlblwiOiBcIk5vdGlmeVwiLFxyXG4gIH07XHJcbiAgICBzdGF0aWMgQ0xSX1RZUEVfSUQ6IHN0cmluZyA9IE5vdGlmeUFjdGl2aXR5LkNscl9UeXBlX0lEO1xyXG4gICAgZmxvd0VsZW1lbnQ6IE5vdGlmeUFjdGl2aXR5O1xyXG4gICAgZWRpdG9yVWk6IFdmRWRpdG9yVWk7XHJcblxyXG4gICAgaW1nVXJscyA9IHtcclxuICAgICAgICBbRmxvd05vZGVTdGF0ZS5EZWZhdWx0XTogV2ZDb25zdGFudHMuSU1BR0VfUEFUSCArIFwiL25vdGlmeS5wbmdcIixcclxuICAgICAgICBbRmxvd05vZGVTdGF0ZS5TZWxlY3RlZF06IFdmQ29uc3RhbnRzLklNQUdFX1BBVEggKyBcIi9ub3RpZnlfYmFja3VwLnBuZ1wiLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZT86IGFueSwgZ2VvbWV0cnk/OiBNeEdyYXBoTlMubXhHZW9tZXRyeSwgc3R5bGU/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcih2YWx1ZSwgZ2VvbWV0cnksIHN0eWxlKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVGbG93RWxlbWVudChmbG93RWx0PzogTm90aWZ5QWN0aXZpdHkpIHtcclxuICAgICAgICBjb25zdCBmbG93Tm9kZSA9IHN1cGVyLmNyZWF0ZUZsb3dFbGVtZW50KGZsb3dFbHQpIGFzIE5vdGlmeUFjdGl2aXR5O1xyXG4gICAgICAgIGZsb3dOb2RlLklkID0gXCJOb3RpZnlBY3Rpdml0eVwiICsgQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcblxyXG4gICAgICAgIC8vIOWIm+W7uuiAjOmdnuWkjeWItuaXtuaJp+ihjFxyXG4gICAgICAgIGlmIChmbG93RWx0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZmxvd05vZGUubm90aWZ5QWJsZSA9IHRoaXMuZWRpdG9yVWkuZ2VuZXJhbENvbmZpZy5lbmFibGVOb3RpZnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbG93Tm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGYXJyaXNQcm9wQ29uZmlnKCk6IEZhcnJpc1Byb3BDb25maWdXaXRoRGF0YSB7XHJcbiAgICAgICAgY29uc3QgZWRpdG9yVWkgPSB0aGlzLmVkaXRvclVpO1xyXG4gICAgICAgIC8vIGNvbnN0IGdyYXBoID0gZWRpdG9yVWkuZ3JhcGg7XHJcbiAgICAgICAgbGV0IGFjdCA9IHRoaXMuZmxvd0VsZW1lbnQ7XHJcbiAgICAgICAgLy8g6L+H5ruk6YWN572u5L2N572u5Li66IqC54K555qE5omp5bGV5bGe5oCn77yM5YiG56a75LiA57qn5ZKM5LqM57qn5bGe5oCn77ya55+l5Lya6IqC54K5XHJcbiAgICAgICAgLy8g5LiA57qn6IqC54K5TGlzdFxyXG4gICAgICAgIGxldCBnZW5lcmFsRXh0ZW5kTGlzdDogYW55ID0gW107XHJcbiAgICAgICAgLy8g5LqM57qn6IqC54K5TGlzdFxyXG4gICAgICAgIGxldCBkZXRhaWxFeHRlbmRMaXN0ID0gW107XHJcbiAgICAgICAgaWYgKGVkaXRvclVpLnByb2NFeHRQcm9wcyAmJiBlZGl0b3JVaS5wcm9jRXh0UHJvcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVkaXRvclVpLnByb2NFeHRQcm9wcykpLmZvckVhY2goKHA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAucHJvcGVydHlMb2NhdGlvbiAmJiBwLnByb3BlcnR5TG9jYXRpb24uaW5kZXhPZignYWN0aXZpdHknKSAhPSAtMSAmJiAhcC5wYXJlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYWxFeHRlbmRMaXN0LnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHAucHJvcGVydHlMb2NhdGlvbiAmJiBwLnByb3BlcnR5TG9jYXRpb24uaW5kZXhPZignYWN0aXZpdHknKSAhPSAtMSAmJiBwLnBhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsRXh0ZW5kTGlzdC5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBnZW5lcmFsRXh0ZW5kTGlzdCA9IGdlbmVyYWxFeHRlbmRMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBleHRlbmRMaXN0ID0gW107XHJcbiAgICAgICAgaWYgKGVkaXRvclVpLnByb2NFeHRQcm9wcyAmJiBlZGl0b3JVaS5wcm9jRXh0UHJvcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBleHRlbmRMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlZGl0b3JVaS5wcm9jRXh0UHJvcHMpKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zb3J0T3JkZXIgLSBiLnNvcnRPcmRlcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4dGVuZExpc3QgPSBleHRlbmRMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IGJhc2ljUHJvcGVydHk6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZyA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBsZXQgYWN0aXZpdHlQcm9wZXJ0eTogRWxlbWVudFByb3BlcnR5Q29uZmlnID0gbmV3IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZygpO1xyXG4gICAgICAgIGxldCBwcm9wZXJ0eURhdGE6IGFueSA9IHt9O1xyXG5cclxuICAgICAgICBiYXNpY1Byb3BlcnR5LmNhdGVnb3J5SWQgPSAnYmFzaWNQcm9wZXJ0eSc7XHJcbiAgICAgICAgYmFzaWNQcm9wZXJ0eS5jYXRlZ29yeU5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Jhc2ljSW5mb3JtYXRpb24nKTtcclxuICAgICAgICBiYXNpY1Byb3BlcnR5LnRhYklkID0gJ2Jhc2ljJztcclxuICAgICAgICBiYXNpY1Byb3BlcnR5LnRhYk5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Jhc2ljQXR0cmlidXRlcycpXHJcbiAgICAgICAgYmFzaWNQcm9wZXJ0eS5wcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLk5hbWUsIHByb3BlcnR5TmFtZTogbXhSZXNvdXJjZXMuZ2V0KCduYW1lJyksIHByb3BlcnR5VHlwZTogJ3N0cmluZycsIHZpc2libGU6ICF0aGlzLmVkaXRvclVpLm11bHRpTGFuZ0VuYWJsZWQgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5OYW1lTGFuZ3VhZ2UsIHByb3BlcnR5TmFtZTogbXhSZXNvdXJjZXMuZ2V0KCduYW1lTGFuZ3VhZ2UnKSwgcHJvcGVydHlUeXBlOiAnbXVsdGlMYW5ndWFnZScsIHZpc2libGU6IHRoaXMuZWRpdG9yVWkubXVsdGlMYW5nRW5hYmxlZCB9LFxyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLklkLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnaWQnKSwgcHJvcGVydHlUeXBlOiAnc3RyaW5nJywgcmVhZG9ubHk6IHRydWUgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGxldCBwZXJmb3JtZXJQcm9wZXJ0eTogRWxlbWVudFByb3BlcnR5Q29uZmlnID0gbmV3IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZygpO1xyXG4gICAgICAgIHBlcmZvcm1lclByb3BlcnR5LmNhdGVnb3J5SWQgPSAncGVyZm9ybWVyUHJvcGVydHknO1xyXG4gICAgICAgIHBlcmZvcm1lclByb3BlcnR5LmNhdGVnb3J5TmFtZSA9IG14UmVzb3VyY2VzLmdldCgncGVyZm9ybWVyUHJvcGVydHknKTtcclxuICAgICAgICBwZXJmb3JtZXJQcm9wZXJ0eS50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgcGVyZm9ybWVyUHJvcGVydHkudGFiTmFtZSA9IG14UmVzb3VyY2VzLmdldCgnYmFzaWNBdHRyaWJ1dGVzJyk7XHJcbiAgICAgICAgcGVyZm9ybWVyUHJvcGVydHkucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5QYXJ0aWNpcGFudFNjaGVtZXMsIHByb3BlcnR5TmFtZTogbXhSZXNvdXJjZXMuZ2V0KCdub3RpZnlSZWNpcGllbnQnKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBsZXQgZm9ybURlZiA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBmb3JtRGVmLmNhdGVnb3J5SWQgPSAnZm9ybURlZic7XHJcbiAgICAgICAgZm9ybURlZi5jYXRlZ29yeU5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Zvcm1EZWYnKTtcclxuICAgICAgICBmb3JtRGVmLnRhYklkID0gJ2Jhc2ljJztcclxuICAgICAgICBmb3JtRGVmLnRhYk5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Jhc2ljQXR0cmlidXRlcycpXHJcbiAgICAgICAgZm9ybURlZi5wcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQywgcHJvcGVydHlOYW1lOiBteFJlc291cmNlcy5nZXQoJ3BjRm9ybScpLCBwcm9wZXJ0eVR5cGU6ICdtb2RhbCcgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnd2ViRm9ybScpLCBwcm9wZXJ0eVR5cGU6ICdtb2RhbCcgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBsZXQgYXBwcm92YWxQcm9wZXJ0eSA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBhcHByb3ZhbFByb3BlcnR5LmNhdGVnb3J5SWQgPSAnYWN0aXZpdHlQcm9wZXJ0eSc7XHJcbiAgICAgICAgYXBwcm92YWxQcm9wZXJ0eS5jYXRlZ29yeU5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2FjdGl2aXR5UHJvcGVydHknKTtcclxuICAgICAgICBhcHByb3ZhbFByb3BlcnR5LnRhYklkID0gJ2Jhc2ljJztcclxuICAgICAgICBhcHByb3ZhbFByb3BlcnR5LnRhYk5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Jhc2ljQXR0cmlidXRlcycpO1xyXG4gICAgICAgIGFwcHJvdmFsUHJvcGVydHkucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5Ob3RpZnlBYmxlLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnbm90aWZ5QWJsZScpLCBwcm9wZXJ0eVR5cGU6ICdtb2RhbCcgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBhY3Rpdml0eVByb3BlcnR5LmNhdGVnb3J5SWQgPSAnYWR2YW5jZWQnO1xyXG4gICAgICAgIGFjdGl2aXR5UHJvcGVydHkuY2F0ZWdvcnlOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdvdGhlckNvbmZpZ3VyYXRpb25zJyk7XHJcbiAgICAgICAgYWN0aXZpdHlQcm9wZXJ0eS50YWJJZCA9ICdhZHZhbmNlZCc7XHJcbiAgICAgICAgYWN0aXZpdHlQcm9wZXJ0eS50YWJOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdhZHZhbmNlZEF0dHJpYnV0ZXMnKTtcclxuICAgICAgICBhY3Rpdml0eVByb3BlcnR5LnByb3BlcnRpZXMgPSBbXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMubWVzc2FnZU5vdGljZSwgcHJvcGVydHlOYW1lOiBteFJlc291cmNlcy5nZXQoJ21lc3NhZ2VOb3RpY2UnKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8g5omp5bGV5bGe5oCn5YiGZ3JvdXDlpITnkIbvvIzmr4/kuKpncm91cOWMheWQq+eItue6p+WxnuaAp+WSjOWxnuS6juWug+eahOWtkOaJqeWxleWxnuaAp1xyXG4gICAgICAgIGNvbnN0IGdyb3VwTGlzdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZXh0ZW5kIG9mIGV4dGVuZExpc3QpIHtcclxuICAgICAgICAgICAgaWYgKCFleHRlbmQucGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0geyBwYXJlbnQ6IGV4dGVuZCwgY2hpbGRzOiBuZXcgQXJyYXkoKSB9O1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGV4dGVuZExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5wYXJlbnRJZCA9PT0gZXh0ZW5kLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLmNoaWxkcy5wdXNoKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5wdXNoKGdyb3VwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOayoeacieaJqeWxleWxnuaAp+WAvOeahOaXtuWAmeS4jeaYvuekuuaJqeWxleWxnuaAp+S4gOagj1xyXG4gICAgICAgIGlmIChncm91cExpc3QgJiYgZ3JvdXBMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IEV4dGVuZFByb3BlcnR5Q29uZmlnOiBFbGVtZW50UHJvcGVydHlDb25maWcgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgICAgIEV4dGVuZFByb3BlcnR5Q29uZmlnLmNhdGVnb3J5SWQgPSAnZXh0ZW5kUHJvcGVydHlDb25maWcnO1xyXG4gICAgICAgICAgICBFeHRlbmRQcm9wZXJ0eUNvbmZpZy5jYXRlZ29yeU5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2V4dGVuZFByb3BlcnR5Q29uZmlnJyk7XHJcbiAgICAgICAgICAgIEV4dGVuZFByb3BlcnR5Q29uZmlnLnRhYklkID0gJ2FkdmFuY2VkJztcclxuICAgICAgICAgICAgRXh0ZW5kUHJvcGVydHlDb25maWcudGFiTmFtZSA9IG14UmVzb3VyY2VzLmdldCgnYWR2YW5jZWRBdHRyaWJ1dGVzJyk7XHJcbiAgICAgICAgICAgIEV4dGVuZFByb3BlcnR5Q29uZmlnLnByb3BlcnRpZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBnIG9mIGdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgRXh0ZW5kUHJvcGVydHlDb25maWcucHJvcGVydGllcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvcGVydHlJRDogZy5wYXJlbnQuaWQsIHByb3BlcnR5TmFtZTogZy5wYXJlbnQucHJvcGVydHlUaXRsZSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlEYXRhKGFjdCwgcHJvcGVydHlEYXRhLCBncm91cExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlDb25maWc6IFtiYXNpY1Byb3BlcnR5LCBwZXJmb3JtZXJQcm9wZXJ0eSwgZm9ybURlZiwgYXBwcm92YWxQcm9wZXJ0eSwgYWN0aXZpdHlQcm9wZXJ0eSwgRXh0ZW5kUHJvcGVydHlDb25maWddLFxyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlEYXRhOiBwcm9wZXJ0eURhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlEYXRhKGFjdCwgcHJvcGVydHlEYXRhLCBncm91cExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlDb25maWc6IFtiYXNpY1Byb3BlcnR5LCBwZXJmb3JtZXJQcm9wZXJ0eSwgZm9ybURlZiwgYXBwcm92YWxQcm9wZXJ0eSwgYWN0aXZpdHlQcm9wZXJ0eV0sXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eURhdGE6IHByb3BlcnR5RGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uE57uHVXNlckFjdGl2aXR555qE5bGe5oCn5YC8cHJvcGVydHlEYXRhXHJcbiAgICAgKiBAcGFyYW0gYWN0XHJcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlEYXRhXHJcbiAgICAgKi9cclxuICAgIHNldFByb3BlcnR5RGF0YShhY3Q6IE5vdGlmeUFjdGl2aXR5LCBwcm9wZXJ0eURhdGE6IGFueSwgZ3JvdXBMaXN0PzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLklkXSA9IGFjdC5JZDtcclxuICAgICAgICBwcm9wZXJ0eURhdGFbTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuQ2xyVHlwZUlEXSA9IGFjdC5DbHJUeXBlSUQ7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLk5hbWVdID0gYWN0Lk5hbWU7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLk5hbWVMYW5ndWFnZV0gPSBhY3QuTmFtZUxhbmd1YWdlIHx8IHtcclxuICAgICAgICAgICAgXCJ6aC1DSFNcIjogYWN0Lk5hbWUsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLlBhcnRpY2lwYW50U2NoZW1lc10gPSB0aGlzLmdldFBhcnRpY2lwYW50SW5mbyhhY3QpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eURhdGFbTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMubWVzc2FnZU5vdGljZV0gPSBQcm9wZXJ0eUhlbHBlci5nZXRNZXNzYWdlTm90aWNlcyhhY3QubWVzc2FnZU5vdGljZXMpOztcclxuICAgICAgICBwcm9wZXJ0eURhdGFbTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMud2ZfRXhlY3V0ZUZvcm1zX1BDXSA9XHJcbiAgICAgICAgICAgIGFjdC5leGVjdXRlRm9ybXMgPyBhY3QuZXhlY3V0ZUZvcm1zLmZpbmQoZSA9PiBlLlRlcm1pbmFsVHlwZSA9PT0gJ1BDJykgOiBudWxsO1xyXG4gICAgICAgIHByb3BlcnR5RGF0YVtOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlXSA9XHJcbiAgICAgICAgICAgIGFjdC5leGVjdXRlRm9ybXMgPyBhY3QuZXhlY3V0ZUZvcm1zLmZpbmQoZSA9PiBlLlRlcm1pbmFsVHlwZSA9PT0gJ01PQklMRScpIDogbnVsbDtcclxuICAgICAgICBwcm9wZXJ0eURhdGFbTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuTm90aWZ5QWJsZV0gPSBQcm9wZXJ0eUhlbHBlci5nZXROb3RpZnlBYmxlKGFjdC5ub3RpZnlBYmxlLCBhY3QuZHluYW1pY1BhcnRpY2lwYW50cyk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZyBvZiBncm91cExpc3QpIHtcclxuICAgICAgICAgICAgLy8g5Y+W5Zue5qih5Z6L5LiK55qEdmFsdWXlgLznu5nliLDmianlsZXlsZ7mgKfnu4Tku7bph4xcclxuICAgICAgICAgICAgaWYgKGFjdC5leHRlbmRQcm9wZXJ0aWVzICYmIGFjdC5leHRlbmRQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGcuY2hpbGRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5zb3J0T3JkZXIgLSBiLnNvcnRPcmRlcjtcclxuICAgICAgICAgICAgICAgIH0pLmZvckVhY2goKGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdC5leHRlbmRQcm9wZXJ0aWVzLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PSBkLmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWUgPSBlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9wZXJ0eURhdGFbZy5wYXJlbnQuaWRdID0gZy5jaGlsZHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFBhcnRpY2lwYW50SW5mbyhub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHkpOiBQYXJ0aWNpcGFudEluZm8ge1xyXG4gICAgICAgIGNvbnN0IHBhcnRpSW5mbyA9IG5ldyBQYXJ0aWNpcGFudEluZm8oKTtcclxuICAgICAgICBjb25zdCByb2xlcyA9IG5vdGlmeUFjdGl2aXR5LkdldFJlc291cmNlUm9sZXMoKS5maWx0ZXIocm9sZSA9PiByb2xlIGluc3RhbmNlb2YgSHVtYW5QZXJmb3JtZXJJbXBsKSBhcyBBcnJheTxIdW1hblBlcmZvcm1lckltcGw+O1xyXG4gICAgICAgIHBhcnRpSW5mby5odW1hblBlcmZvcm1lckxpc3QgPSBQcm9wZXJ0eUhlbHBlci5nZXRQZXJmb3JtZXJMaXN0KHJvbGVzKTtcclxuICAgICAgICByZXR1cm4gcGFydGlJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByb3BzKG9iajogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm90aWZ5QWN0aXZpdHkgPSB0aGlzLmZsb3dFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGVkaXRvclVpID0gdGhpcy5lZGl0b3JVaTtcclxuICAgICAgICBjb25zdCBwcm9wZXJ0eUlkOiBzdHJpbmcgPSBvYmoucHJvcGVydHlJRDtcclxuICAgICAgICBzd2l0Y2ggKHByb3BlcnR5SWQpIHtcclxuICAgICAgICAgICAgLy8g5Y+C5LiO6ICF5bGe5oCnXHJcbiAgICAgICAgICAgIGNhc2UgTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuUGFydGljaXBhbnRTY2hlbWVzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2U6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1lc3NhZ2VOb3RpY2VzKG5vdGlmeUFjdGl2aXR5LCBvYmopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMud2ZfRXhlY3V0ZUZvcm1zX1BDOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGFydEFjdGl2aXR5Rm9ybShub3RpZnlBY3Rpdml0eSwgb2JqLCAnUEMnKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucGFyYW1ldGVycyAmJiBvYmoucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlIZWxwZXIudXBkYXRlRm9ybWFsUGFyYW1ldGVycyhlZGl0b3JVaS5ncmFwaC5icG1uTW9kZWwuRGVmYXVsdFByb2Nlc3MsIG9iai5wYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19Nb2JpbGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXJ0QWN0aXZpdHlGb3JtKG5vdGlmeUFjdGl2aXR5LCBvYmosICdNT0JJTEUnKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoucGFyYW1ldGVycyAmJiBvYmoucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlIZWxwZXIudXBkYXRlRm9ybWFsUGFyYW1ldGVycyhlZGl0b3JVaS5ncmFwaC5icG1uTW9kZWwuRGVmYXVsdFByb2Nlc3MsIG9iai5wYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLk5vdGlmeUFibGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5vdGlmeVNldChub3RpZnlBY3Rpdml0eSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLy8g5Yik5patUmVzb3VyY2VLZXlz5piv5LiN5pivZ3JvdXBpZCzmmK/lsLHotbByZXNldEV4dGVuZFByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0b3JVaS5wcm9jRXh0UHJvcHMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gcHJvcGVydHlJZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRFeHRlbmRQcm9wZXJ0eShub3RpZnlBY3Rpdml0eSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwZXIudXBkYXRlUHJvcHMob2JqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIG9iajogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcGVyZm9ybWVySW5mbzogUGFydGljaXBhbnRJbmZvID0gb2JqLnByb3BlcnR5VmFsdWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc291cmNlUm9sZXMgPSBub3RpZnlBY3Rpdml0eS5HZXRSZXNvdXJjZVJvbGVzKCk7XHJcbiAgICAgICAgaWYgKHJlc291cmNlUm9sZXMgJiYgcmVzb3VyY2VSb2xlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJlc291cmNlUm9sZXMuZm9yRWFjaChyID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgSHVtYW5QZXJmb3JtZXJJbXBsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuUmVtb3ZlUmVzb3VyY2VSb2xlKHIuSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBlcmZvcm1lckluZm8uaHVtYW5QZXJmb3JtZXJMaXN0ICYmIHBlcmZvcm1lckluZm8uaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBodW1hblBlcmZvcm1lciBvZiBwZXJmb3JtZXJJbmZvLmh1bWFuUGVyZm9ybWVyTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChodW1hblBlcmZvcm1lci50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFVzZXJQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgaHVtYW5QZXJmb3JtZXIgYXMgVXNlclBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQb3NpdGlvblBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBodW1hblBlcmZvcm1lciBhcyBQb3NpdGlvblBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBWYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRWYXJpYWJsZVBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBodW1hblBlcmZvcm1lciBhcyBWYXJpYWJsZVBlcmZvcm1lciwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29tcG9uZW50UGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIGh1bWFuUGVyZm9ybWVyIGFzIENvbXBvbmVudFBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgaHVtYW5QZXJmb3JtZXIgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgaHVtYW5QZXJmb3JtZXIgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTWF0cml4UGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIGh1bWFuUGVyZm9ybWVyIGFzIE1hdHJpeFBhcnRpY2lwYW50LCAnaHVtYW5QZXJmb3JtZXInLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFkZFVzZXJQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIHBlcmZvcm1lcjogVXNlclBhcnRpY2lwYW50LCB0eXBlOiBzdHJpbmcsICBzY29wZTogQWN0aW9uU2NvcGUpIHtcclxuICAgICAgICBsZXQgdXNlclBhcnRpY2lwYW50ID0gbmV3IFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwsIHBlcmZvcm1lci5wZXJmb3JtZXJJZCwgcGVyZm9ybWVyLnBlcmZvcm1lck5hbWUsIHBlcmZvcm1lci5vcmdUeXBlKTtcclxuICAgICAgICB1c2VyUGFydGljaXBhbnQuaWQgPSBwZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgdXNlclBhcnRpY2lwYW50Lk9yZ0lkID0gcGVyZm9ybWVyLm9yZ0lkO1xyXG4gICAgICAgIHVzZXJQYXJ0aWNpcGFudC5PcmdOYW1lID0gcGVyZm9ybWVyLm9yZ05hbWU7XHJcbiAgICAgICAgdXNlclBhcnRpY2lwYW50LlRhZyA9IHBlcmZvcm1lci50YWc7XHJcbiAgICAgICAgdXNlclBhcnRpY2lwYW50Lk9yZ1R5cGUgPSBwZXJmb3JtZXIub3JnVHlwZTtcclxuICAgICAgICB1c2VyUGFydGljaXBhbnQub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgbGV0IGh1bWFuUGVyZm9ybWVySW1wbCA9IG5ldyBIdW1hblBlcmZvcm1lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gdXNlclBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShodW1hblBlcmZvcm1lckltcGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSB1c2VyUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChwZXJmb3JtZXIuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBlcmZvcm1lci5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyUGFydGljaXBhbnQuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaCh1c2VyUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFZhcmlhYmxlUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBwZXJmb3JtZXI6IFZhcmlhYmxlUGVyZm9ybWVyLCB0eXBlOiBzdHJpbmcsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgIGxldCB2YXJpYWJsZVBlcmZvcm1lciA9IG5ldyBWYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCwgcGVyZm9ybWVyLnBlcmZvcm1lcklkLCBwZXJmb3JtZXIucGVyZm9ybWVyTmFtZSwgcGVyZm9ybWVyLm9yZ1R5cGUpO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLmlkID0gcGVyZm9ybWVyLmlkO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLk5hbWUgPSBwZXJmb3JtZXIucGVyZm9ybWVyTmFtZSA/IHBlcmZvcm1lci5wZXJmb3JtZXJOYW1lIDogcGVyZm9ybWVyLm5hbWU7O1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLlRhZyA9IHBlcmZvcm1lci50YWc7XHJcbiAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIuVmFyVmFsdWUgPSBwZXJmb3JtZXIudmFyVmFsdWU7XHJcbiAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIuVmFyVHlwZSA9IHBlcmZvcm1lci52YXJUeXBlO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLlJlbGF0aW9uID0gcGVyZm9ybWVyLnJlbGF0aW9uO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IHZhcmlhYmxlUGVyZm9ybWVyO1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShodW1hblBlcmZvcm1lckltcGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBsZXQgb3RlbnRpYWxPd25lckltcGwgPSBuZXcgUG90ZW50aWFsT3duZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gdmFyaWFibGVQZXJmb3JtZXI7XHJcbiAgICAgICAgICAgIGlmIChwZXJmb3JtZXIuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBlcmZvcm1lci5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5hY3Rpb25TY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKHZhcmlhYmxlUGVyZm9ybWVyKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRQb3NpdGlvblBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgcGVyZm9ybWVyOiBQb3NpdGlvblBhcnRpY2lwYW50LCB0eXBlOiBzdHJpbmcgLCBzY29wZTogQWN0aW9uU2NvcGUpIHtcclxuICAgICAgICBsZXQgcG9zaVBhcnRpY2lwYW50ID0gbmV3IFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwZXJmb3JtZXIucGVyZm9ybWVySWQsIHBlcmZvcm1lci5wZXJmb3JtZXJOYW1lKTtcclxuICAgICAgICBwb3NpUGFydGljaXBhbnQuaWQgPSBwZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgcG9zaVBhcnRpY2lwYW50LlBvc2l0aW9uVHlwZSA9IHBlcmZvcm1lci5wb3NpdGlvblR5cGU7XHJcbiAgICAgICAgcG9zaVBhcnRpY2lwYW50Lm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgIGlmIChwZXJmb3JtZXIucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50Lk9yZ0lkID0gcGVyZm9ybWVyLm9yZ0lkO1xyXG4gICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuT3JnTmFtZSA9IHBlcmZvcm1lci5vcmdOYW1lO1xyXG4gICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuT3JnVHlwZSA9IHBlcmZvcm1lci5vcmdUeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBwb3NpUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChwZXJmb3JtZXIuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBlcmZvcm1lci5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5vcmRlciA9IHBlcmZvcm1lci5vcmRlcjtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBwb3NpUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChwZXJmb3JtZXIuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBlcmZvcm1lci5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaChwb3NpUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbXBvbmVudFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgY29tcG9uZW50OiBDb21wb25lbnRQYXJ0aWNpcGFudCwgdHlwZTogc3RyaW5nICwgc2NvcGU6IEFjdGlvblNjb3BlKSB7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudFBhcnRpY2lwYW50ID0gbmV3IENvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQuaWQgPSBjb21wb25lbnQuaWQ7XHJcbiAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQuY29tcG9uZW50SWQgPSBjb21wb25lbnQubWV0YWRhdGFJZDtcclxuICAgICAgICBjb21wb25lbnRQYXJ0aWNpcGFudC5jb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQubWV0aG9kTmFtZSA9IGNvbXBvbmVudC5tZXRob2ROYW1lO1xyXG4gICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50Lm1ldGhvZENvZGUgPSBjb21wb25lbnQubWV0aG9kQ29kZTtcclxuICAgICAgICBjb21wb25lbnRQYXJ0aWNpcGFudC5vcmRlciA9IGNvbXBvbmVudC5vcmRlcjtcclxuXHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzICYmIGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGFjdFBhcmFzID0gbmV3IEFycmF5PEFjdHVhbFBhcmFtZXRlcj4oKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcGFyYSBvZiBjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdFBhcmEgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwYXJhLmNvZGUsIHBhcmEudmFsdWUsIHBhcmEudmFsdWVUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOuabtOaWsOWPguS4juiAheS8mum7mOiupOaKiuaehOS7tuWPguaVsOWxnuaAp+aUueS4umNvbnRhbnTvvIzkuLTml7bkv67lpI3vvIzlkI7nu63ku6PnoIHkvJjljJZcclxuICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gcGFyYS50YWc7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYS5mZXRjaFZhbHVlTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocGFyYS5mZXRjaFZhbHVlTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleHByZXNzJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gJ2V4cHJlc3Npb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gJ2NvbnN0YW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFjdFBhcmFzLnB1c2goYWN0UGFyYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQuYWN0dWFsUGFyYW1ldGVycyA9IGFjdFBhcmFzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBjb21wb25lbnRQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gY29tcG9uZW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLm9yZGVyID0gY29tcG9uZW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgbGV0IG90ZW50aWFsT3duZXJJbXBsID0gbmV3IFBvdGVudGlhbE93bmVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IGNvbXBvbmVudFBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBjb21wb25lbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gY29tcG9uZW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaChjb21wb25lbnRQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShvdGVudGlhbE93bmVySW1wbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgcGFydGljaXBhbnQ6IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCwgdHlwZTogc3RyaW5nICwgc2NvcGU6IEFjdGlvblNjb3BlKSB7XHJcbiAgICAgICAgbGV0IHJlcG9ydGluZ0xpbmUgPSBuZXcgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5pZCA9IHBhcnRpY2lwYW50LmlkO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuUmVwb3J0aW5nTGluZURlZklkID0gcGFydGljaXBhbnQucmVwb3J0aW5nTGluZURlZklkO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuUmVwb3J0aW5nTGluZURlZk5hbWUgPSBwYXJ0aWNpcGFudC5yZXBvcnRpbmdMaW5lRGVmTmFtZTtcclxuICAgICAgICByZXBvcnRpbmdMaW5lLlJlZk9yZ0lkID0gcGFydGljaXBhbnQucmVmT3JnSWQ7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5SZWZVc2VySWQgPSBwYXJ0aWNpcGFudC5yZWZVc2VySWQ7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5SZWZFbXBsb3llZUlkID0gcGFydGljaXBhbnQucmVmRW1wbG95ZWVJZDtcclxuICAgICAgICByZXBvcnRpbmdMaW5lLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5EaW1lbnNpb24gPSBwYXJ0aWNpcGFudC5kaW1lbnNpb247XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5UYWcgPSBwYXJ0aWNpcGFudC50YWc7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IHJlcG9ydGluZ0xpbmU7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSByZXBvcnRpbmdMaW5lO1xyXG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5hY3Rpb25TY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKHJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIHBhcnRpY2lwYW50OiBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQsIHR5cGU6IHN0cmluZyAsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgIGxldCBhY3Rpdml0eUV4ZWN1dG9yID0gbmV3IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuaWQgPSBwYXJ0aWNpcGFudC5pZDtcclxuICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQgPSBwYXJ0aWNpcGFudC5hY3Rpdml0eURlZklkO1xyXG4gICAgICAgIGFjdGl2aXR5RXhlY3V0b3Iub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmTmFtZSA9IHBhcnRpY2lwYW50LmFjdGl2aXR5RGVmTmFtZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgbGV0IGh1bWFuUGVyZm9ybWVySW1wbCA9IG5ldyBIdW1hblBlcmZvcm1lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gYWN0aXZpdHlFeGVjdXRvcjtcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgbGV0IG90ZW50aWFsT3duZXJJbXBsID0gbmV3IFBvdGVudGlhbE93bmVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IGFjdGl2aXR5RXhlY3V0b3I7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGlvblNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2goYWN0aXZpdHlFeGVjdXRvcik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShvdGVudGlhbE93bmVySW1wbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTWF0cml4UGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBwYXJ0aWNpcGFudDogTWF0cml4UGFydGljaXBhbnQsIHR5cGU6IHN0cmluZyAsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICBtYXRyaXgub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICBtYXRyaXguaWQgPSBwYXJ0aWNpcGFudC5pZDtcclxuICAgICAgICBtYXRyaXgubWF0cml4RGVmSWQgPSBwYXJ0aWNpcGFudC5tYXRyaXhEZWZJZDtcclxuICAgICAgICBtYXRyaXgubWF0cml4RGVmTmFtZSA9IHBhcnRpY2lwYW50Lm1hdHJpeERlZk5hbWU7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkMSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkMTtcclxuICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkVGV4dDE7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkMiA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkMjtcclxuICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MiA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkVGV4dDI7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkMyA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkMztcclxuICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MyA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbkZpZWxkVGV4dDM7XHJcbiAgICAgICAgbWF0cml4Lm11bHRpdmFsdWVkQ29uZGl0aW9uID0gcGFydGljaXBhbnQubXVsdGl2YWx1ZWRDb25kaXRpb247XHJcbiAgICAgICAgbWF0cml4LmRhdGFGaWVsZEFsaWFzID0gcGFydGljaXBhbnQuZGF0YUZpZWxkQWxpYXM7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IG1hdHJpeDtcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgbGV0IG90ZW50aWFsT3duZXJJbXBsID0gbmV3IFBvdGVudGlhbE93bmVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IG1hdHJpeDtcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgaWYoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgIG1hdHJpeC5hY3Rpb25TY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKG1hdHJpeCk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJBY3Rpdml0eVxyXG4gICAgICogQHBhcmFtIHBhcnRpY2lwYW50XHJcbiAgICAgKiBAcGFyYW0gdHlwZVxyXG4gICAgICovXHJcbiAgICAgICAgYWRkT3JnYW5pemF0aW9uUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBwYXJ0aWNpcGFudDogT3JnYW5pemF0aW9uUGFydGljaXBhbnQsIHR5cGU6IHN0cmluZywgc2NvcGU6IEFjdGlvblNjb3BlKSB7XHJcbiAgICAgICAgICAgIGxldCBwb3RlbnRpYWwgPSBuZXcgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgcG90ZW50aWFsLmlkID0gcGFydGljaXBhbnQuaWQ7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwuYWN0aW9uU2NvcGUgPSBBY3Rpb25TY29wZS5Bc3NpZ25Vc2VyO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uTGV2ZWwgPSBwYXJ0aWNpcGFudC5vcmdhbml6YXRpb25MZXZlbCBhcyBhbnk7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbC5vcmdhbml6YXRpb25JZCA9IHBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbklkO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uTmFtZSA9IHBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbC5pbmNsdWRlQ2hpbGRyZW4gPSBwYXJ0aWNpcGFudC5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICAgICAgICAgIHBvdGVudGlhbC50YWcgPSBwYXJ0aWNpcGFudC50YWc7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBwb3RlbnRpYWwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBwb3RlbnRpYWw7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydGljaXBhbnQuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShodW1hblBlcmZvcm1lckltcGwpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gcG90ZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgaWYoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWwuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2gocG90ZW50aWFsKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGVTdGFydEFjdGl2aXR5Rm9ybShub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIG9iajogYW55LCB0ZXJtaW5hbDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKG5vdGlmeUFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgIGxldCBmb3JtID0gb2JqLnByb3BlcnR5VmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICBpZiAoIW5vdGlmeUFjdGl2aXR5LmV4ZWN1dGVGb3Jtcykge1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZXhlY3V0ZUZvcm1zID0gbmV3IEFycmF5PEV4ZWN1dGVGb3JtPigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4ZWN1dGVGb3JtcyA9IG5vdGlmeUFjdGl2aXR5LmV4ZWN1dGVGb3Jtcy5maWx0ZXIoZSA9PiBlLlRlcm1pbmFsVHlwZSAhPT0gdGVybWluYWwpO1xyXG4gICAgICAgICAgICBpZiAoZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IGZvcm0uQWN0dWFsUGFyYW1ldGVycyBhcyBhbnlbXTtcclxuICAgICAgICAgICAgICAgIGxldCBhY3RQYXJhcyA9IG5ldyBBcnJheTxBY3R1YWxQYXJhbWV0ZXI+KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcGFyYSBvZiBwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjdFBhcmEgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwYXJhLk5hbWUsIHBhcmEuVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYS5UYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gcGFyYS5UYWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYS5WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhLlZhbHVlLmxlbmd0aCA+PSA4ICYmIHBhcmEuVmFsdWUuc2xpY2UoMCwgOCkgPT09IGB7XCJleHByXCI6YCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9ICdleHByZXNzaW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9ICdjb25zdGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9ICd2YXJpYWJsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmFzLnB1c2goYWN0UGFyYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbmV3IEV4ZWN1dGVGb3JtKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBpZCwgZm9ybS5OYW1lLCBhY3RQYXJhcyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLkNvbXBvbmVudElkID0gZm9ybS5Db21wb25lbnRJZDtcclxuICAgICAgICAgICAgICAgIGl0ZW0uRm9ybVR5cGUgPSBmb3JtLkZvcm1UeXBlO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5mb3JtRm9ybWF0SWQgPSBmb3JtLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZm9ybWF0Q29uZmlnSWQgPSBmb3JtLmZvcm1hdENvbmZpZ0lkO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5UZXJtaW5hbFR5cGUgPSBmb3JtLlRlcm1pbmFsVHlwZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4ZWN1dGVGb3Jtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU5vdGlmeVNldChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIG9iajogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgc2NvcGUgPSBvYmoucHJvcGVydHlWYWx1ZSBhcyBBY3Rpb25Pcmdhbml6YXRpb25TY29wZURlc2lnbjtcclxuXHJcbiAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cyA9IG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gKHAgYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKS5hY3Rpb25TY29wZSAhPT0gQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICBub3RpZnlBY3Rpdml0eS5ub3RpZnlBYmxlID0gc2NvcGUuZW5hYmxlO1xyXG4gICAgICAgIGlmIChzY29wZS5zY29wZSkge1xyXG4gICAgICAgICAgICBpZihzY29wZS5zY29wZS5vcmdhbml6YXRpb25MZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uID0gbmV3IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24uaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5hY3Rpb25TY29wZSA9IEFjdGlvblNjb3BlLk5vdGlmeTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5vcmdhbml6YXRpb25MZXZlbCA9IHNjb3BlLnNjb3BlLm9yZ2FuaXphdGlvbkxldmVsIGFzIGFueTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5vcmdhbml6YXRpb25JZCA9IHNjb3BlLnNjb3BlLm9yZ2FuaXphdGlvbklkO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLm9yZ2FuaXphdGlvbk5hbWUgPSBzY29wZS5zY29wZS5vcmdhbml6YXRpb25OYW1lO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLmluY2x1ZGVDaGlsZHJlbiA9IHNjb3BlLnNjb3BlLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi50YWcgPSBzY29wZS5zY29wZS50YWc7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2gob3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGVyZm9ybWVySW5mbzogUGFydGljaXBhbnRJbmZvID0gc2NvcGUuc2NvcGUucGFydGljaXBhbnRJbmZvIGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJmb3JtZXJJbmZvLmlzQWxsU2NvcGUgJiYgcGVyZm9ybWVySW5mby5wb3RlbnRpYWxPd25lckxpc3QgJiYgcGVyZm9ybWVySW5mby5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcG90ZW50aWFsT3duZXIgb2YgcGVyZm9ybWVySW5mby5wb3RlbnRpYWxPd25lckxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb3RlbnRpYWxPd25lci50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVc2VyUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIHBvdGVudGlhbE93bmVyIGFzIFVzZXJQYXJ0aWNpcGFudCwgJ3BvdGVudGlhbE93bmVyJywgQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRWYXJpYWJsZVBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBWYXJpYWJsZVBlcmZvcm1lciwgJ3BvdGVudGlhbE93bmVyJywgQWN0aW9uU2NvcGUuTm90aWZ5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBvc2l0aW9uUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIHBvdGVudGlhbE93bmVyIGFzIFBvc2l0aW9uUGFydGljaXBhbnQsICdwb3RlbnRpYWxPd25lcicsIEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENvbXBvbmVudFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBDb21wb25lbnRQYXJ0aWNpcGFudCwgJ3BvdGVudGlhbE93bmVyJywgQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgcG90ZW50aWFsT3duZXIgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50LCAncG90ZW50aWFsT3duZXInLCBBY3Rpb25TY29wZS5Ob3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQsICdwb3RlbnRpYWxPd25lcicsIEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7bm90aWZ5QWN0aXZpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTWF0cml4UGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIHBvdGVudGlhbE93bmVyIGFzIE1hdHJpeFBhcnRpY2lwYW50LCAncG90ZW50aWFsT3duZXInLCBBY3Rpb25TY29wZS5Ob3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRPcmdhbml6YXRpb25QYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgcG90ZW50aWFsT3duZXIgYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnQsICdwb3RlbnRpYWxPd25lcicgLCBBY3Rpb25TY29wZS5Ob3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu05paw55+l5Lya5rS75Yqo5omp5bGV5bGe5oCnXHJcbiAgICAgKiBAcGFyYW0gbm90aWZ5QWN0aXZpdHlcclxuICAgICAqIEBwYXJhbSBvYmpcclxuICAgICAqL1xyXG4gICAgcmVzZXRFeHRlbmRQcm9wZXJ0eShub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIG9iajogYW55KSB7XHJcbiAgICAgICAgaWYgKG5vdGlmeUFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzID0gb2JqLnByb3BlcnR5VmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICBpZiAoIW5vdGlmeUFjdGl2aXR5LmV4dGVuZFByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4dGVuZFByb3BlcnRpZXMgPSBuZXcgQXJyYXk8RXh0ZW5kUHJvcGVydHk+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIG9iai5wcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG5vdGlmeUFjdGl2aXR5LmV4dGVuZFByb3BlcnRpZXMuZmluZEluZGV4KGUgPT4gZS5rZXkgPT09IG8uY29kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4dGVuZFByb3BlcnRpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKChhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBFeHRlbmRQcm9wZXJ0eShub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5rZXkgPSBhLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52YWx1ZSA9IGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZXh0ZW5kUHJvcGVydGllcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTWVzc2FnZU5vdGljZXMobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGJwbW5Nb2RlbCA9IG5vdGlmeUFjdGl2aXR5Lk1vZGVsO1xyXG4gICAgICAgIGxldCBub3RpY2VzID0gb2JqLnByb3BlcnR5VmFsdWUgYXMgYW55W107XHJcbiAgICAgICAgbm90aWZ5QWN0aXZpdHkubWVzc2FnZU5vdGljZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBpZiAobm90aWNlcyAmJiBub3RpY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbiBvZiBub3RpY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlTm90aWNlID0gbmV3IE1lc3NhZ2VOb3RpY2UoYnBtbk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2Uuc2VuZFR5cGUgPSBuLnNlbmRUeXBlO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5zZW5kVGltZSA9IG4uc2VuZFRpbWU7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnN1YmplY3QgPSBuLnN1YmplY3Q7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLmNvbnRlbnQgPSBuLmNvbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG4uc21zTWVzc2FnZVRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21zTWVzc2FnZVRlbXBsYXRlID0gbmV3IFNtc01lc3NhZ2VUZW1wbGF0ZShicG1uTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc01lc3NhZ2VUZW1wbGF0ZS5jb2RlID0gbi5zbXNNZXNzYWdlVGVtcGxhdGUuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuY29udGVudCA9IG4uc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcyAmJiBuLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG4uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlID0gbmV3IFNtc01lc3NhZ2VWYXJpYWJsZShicG1uTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUuY29kZSA9IHYuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLnZhbHVlID0gdi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLnRhZyA9IHYudGFnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBzbXNNZXNzYWdlVGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlTm90aWNlLnJlY2VpdmVyID0gbi5yZWNlaXZlcjtcclxuICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJUZXh0ID0gbi5yZWNlaXZlclRleHQ7XHJcbiAgICAgICAgICAgICAgICBuLnJlY2VpdmVycyA9IG4ucmVjZWl2ZXJzLmZpbHRlcigocjogYW55KSA9PiByLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4ucmVjZWl2ZXJzICYmIG4ucmVjZWl2ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXZlcnMgPSBuLnJlY2VpdmVycy5maWx0ZXIoKHI6IGFueSkgPT4gci50eXBlID09PSAndXNlclBhcnRpY2lwYW50J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAoci50eXBlID09PSAncHJvY2Vzc1BhcnRpY2lwYW50JyAmJiByLnByb2Nlc3NQYXJ0aWNpcGFudCAhPT0gJ2FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCcpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBuLnJlY2VpdmVycy5maWx0ZXIoKHI6IGFueSkgPT4gci50eXBlID09PSAndmFyaWFibGVQYXJ0aWNpcGFudCcgfHwgci50eXBlID09PSAncG9zaXRpb25QYXJ0aWNpcGFudCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHIudHlwZSA9PT0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCcgJiYgci5wcm9jZXNzUGFydGljaXBhbnQgPT09ICdhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpdmVycyAmJiByZWNlaXZlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVjZWl2ZXIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY2VpdmVyTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgcmVjZWl2ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoci50eXBlID09PSAncHJvY2Vzc1BhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyICs9IChyLnByb2Nlc3NQYXJ0aWNpcGFudCArICcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIucHJvY2Vzc1BhcnRpY2lwYW50ID09PSAncHJvY0luc3RDcmVhdG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWUgKz0gJ+a1geeoi+WPkei1t+S6uiwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLnByb2Nlc3NQYXJ0aWNpcGFudCA9PT0gJ3dvcmtJdGVtUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyTmFtZSArPSAn5Lu75Yqh5o6l5pS25Lq6LCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHIudHlwZSA9PT0gJ3VzZXJQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlciArPSAoci51c2VySWRzICsgJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWUgKz0gKHIudXNlck5hbWVzICsgJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gcmVjZWl2ZXIuc3Vic3RyaW5nKDAsIHJlY2VpdmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlck5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyTmFtZSA9IHJlY2VpdmVyTmFtZS5zdWJzdHJpbmcoMCwgcmVjZWl2ZXJOYW1lLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXIgPSByZWNlaXZlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5yZWNlaXZlclRleHQgPSByZWNlaXZlck5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudHMgJiYgcGFydGljaXBhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWl2ZXJFeHByZXNzaW9ucyA9IG5ldyBBcnJheTxQYXJ0aWNpcGFudEV4cHJlc3Npb24+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwYXJ0aWNpcGFudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnR5cGUgPT09ICdwcm9jZXNzUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2aXR5RXhlY3V0b3IgPSBuZXcgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5pZCA9IEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuYWN0aXZpdHlEZWZJZCA9IHAuYWN0aXZpdHlEZWZJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmTmFtZSA9IHAuYWN0aXZpdHlEZWZOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaChhY3Rpdml0eUV4ZWN1dG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnR5cGUgPT09ICd2YXJpYWJsZVBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YXJpYWJsZVBhcnRpY2lwYW50ID0gbmV3IFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwsIHAudmFyaWFibGVQYXJ0aWNpcGFudCwgcC52YXJpYWJsZU5hbWUsIHAub3JnVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQYXJ0aWNpcGFudC5pZCA9IEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGFydGljaXBhbnQuVGFnID0gJ2V4cHJlc3Npb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGFydGljaXBhbnQuT3JnVHlwZSA9IHAub3JnVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2godmFyaWFibGVQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAncG9zaXRpb25QYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaVBhcnRpY2lwYW50ID0gbmV3IFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwLnBvc2l0aW9uSWQsIHAucG9zaXRpb25OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpUGFydGljaXBhbnQuUG9zaXRpb25UeXBlID0gcC5wb3NpdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50Lk9yZ0lkID0gcC5vcmdJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50Lk9yZ1R5cGUgPSBwLm9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaChwb3NpUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJFeHByZXNzaW9ucyA9IHJlY2VpdmVyRXhwcmVzc2lvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5Lm1lc3NhZ2VOb3RpY2VzLnB1c2gobWVzc2FnZU5vdGljZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19