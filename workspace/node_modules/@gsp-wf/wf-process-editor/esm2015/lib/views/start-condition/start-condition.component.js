/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ComponentFactoryResolver, EventEmitter, Inject, Injector, Input, LOCALE_ID, Output, TemplateRef, ViewChild } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';
import { BpmnModelJsonHelper, ComponentConditionContent, ConditionEntity, ConditionType, ExpressionConditionContent } from '@edp-bif/common-api';
import { DatagridComponent } from '@farris/ui-datagrid';
import { LoadingService } from '@farris/ui-loading';
import { MessagerService } from '@farris/ui-messager';
import { BsModalService } from '@farris/ui-modal';
import { NotifyService } from '@farris/ui-notify';
import { GSPMetadataRTService, SelectMetadataRTComponent } from '@gsp-lcm/metadatart-selector';
import { ExpressionService, InjectedType } from '@gsp-svc/expression';
import { FrameworkService } from '@gsp-sys/rtf-common';
import { of } from 'rxjs';
import { AifLocalePipe, BIF_LANG_RESOURCES } from '../aif-ui-common/pipe/aif-ui-common-locale.pipe';
import { StartConditionService } from './start-condition.service';
import { DataEntityService } from '@gsp-svc/data-entity-adapter';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { AbstractDatagridComponent } from './abstract-datagrid-component';
import { LANG_RESOURCES } from './i18n/lang.resource';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
const ɵ0 = LANG_RESOURCES;
export class StartConditionComponent extends AbstractDatagridComponent {
    /**
     * @param {?} startConditionService
     * @param {?} designerState
     * @param {?} metadata
     * @param {?} expr
     * @param {?} des
     * @param {?} messager
     * @param {?} notify
     * @param {?} modal
     * @param {?} framework
     * @param {?} router
     * @param {?} activatedRoute
     * @param {?} loading
     * @param {?} localeId
     * @param {?} localePipe
     * @param {?} cfr
     * @param {?} cdf
     * @param {?} inj
     */
    constructor(startConditionService, designerState, metadata, expr, des, messager, notify, modal, framework, router, activatedRoute, loading, localeId, localePipe, cfr, cdf, inj) {
        super(messager, notify, metadata, modal, localePipe, inj, cfr, cdf);
        this.startConditionService = startConditionService;
        this.designerState = designerState;
        this.metadata = metadata;
        this.expr = expr;
        this.des = des;
        this.messager = messager;
        this.notify = notify;
        this.modal = modal;
        this.framework = framework;
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.loading = loading;
        this.localePipe = localePipe;
        this.cfr = cfr;
        this.cdf = cdf;
        this.inj = inj;
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.modalConfig = {
            title: '启动条件',
            width: 900,
            height: 400,
            showButtons: true,
            showHeader: false
        };
        this.dgIdField = "id";
        this.designedConditionEntities = new Array();
        this.editingRowId = null;
        this.canEdit = true;
        this.beforeEdit = (/**
         * @param {...?} args
         * @return {?}
         */
        (...args) => {
            // console.log('Before Edit', args);
            return of(true);
        });
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {...?} args
         * @return {?}
         */
        (rowIndex, rowData, ...args) => {
            if (rowData.component && rowData.component.compMetadataId) {
                return of(true);
            }
            else if (rowData.expression && rowData.expression.exprContent) {
                return of(true);
            }
            else {
                this.notify.warning(this.localePipe.instant("eventRouterConditionsContentCantBeEmpty"));
                return of(false);
            }
        });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set value(data) {
        data = data ? data : '[]';
        /** @type {?} */
        const conditionEntities = data ? [] : BpmnModelJsonHelper.FromJson(data, ConditionEntity);
        this.designedConditionEntities = conditionEntities.map((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const entity = {
                id: item.id,
                isEnabled: item.isEnabled,
                name: item.name,
                type: item.type,
                remarks: item.remarks,
                component: {},
                expression: {},
            };
            if (entity.type == ConditionType.COMPONENT) {
                /** @type {?} */
                const compCondCont = new ComponentConditionContent();
                compCondCont.LoadFromJson(item.content);
                entity.component.compId = compCondCont.componentId;
                entity.component.compMetadataId = compCondCont.componentMetadataId;
                entity.component.compName = compCondCont.name;
                entity.displayedContent = entity.component.compName;
            }
            else if (entity.type == ConditionType.EXPRESSION) {
                /** @type {?} */
                const exprContent = new ExpressionConditionContent();
                exprContent.LoadFromJson(item.content);
                entity.expression.exprContent = exprContent.expressionContent;
                entity.displayedContent = entity.expression.exprContent;
            }
            else {
            }
            return entity;
        }));
    }
    /**
     * @return {?}
     */
    get dgData() {
        return this.designedConditionEntities;
    }
    /**
     * @param {?} arr
     * @return {?}
     */
    set dgData(arr) {
        this.designedConditionEntities = arr;
    }
    /**
     * @return {?}
     */
    get dgTotal() {
        return this.dgData.length || 0;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.configDgColumns();
    }
    /**
     * @return {?}
     */
    clickOk() {
        if (this.dg.isEditing() || this.editingRowId != null) {
            return;
        }
        /** @type {?} */
        const conditionEntities = this.designedConditionEntities.map((/**
         * @param {?} entity
         * @return {?}
         */
        (entity) => {
            /** @type {?} */
            const item = new ConditionEntity();
            item.id = entity.id;
            item.isEnabled = entity.isEnabled;
            item.name = entity.name;
            item.type = entity.type;
            item.remarks = entity.remarks;
            if (entity.type == ConditionType.COMPONENT) {
                /** @type {?} */
                const compCondCont = new ComponentConditionContent();
                compCondCont.name = entity.component.compName;
                compCondCont.componentId = entity.component.compId;
                compCondCont.componentMetadataId = entity.component.compMetadataId;
                item.content = compCondCont.ConvertToJson();
            }
            else if (entity.type == ConditionType.EXPRESSION) {
                /** @type {?} */
                const exprContent = new ExpressionConditionContent();
                exprContent.expressionContent = entity.expression.exprContent;
                item.content = exprContent.ConvertToJson();
            }
            else {
            }
            return item;
        }));
        /** @type {?} */
        const val = BpmnModelJsonHelper.ToJson(conditionEntities);
        /** @type {?} */
        const obj = { value: val, parameters: null };
        this.submitModal.emit(obj);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @return {?}
     */
    load() {
        throw new Error('Method not implemented.');
    }
    /**
     * @param {?} args
     * @return {?}
     */
    toolbarClickHandler(args) {
        switch (args.id) {
            case 'btn-add':
                this.add();
                break;
            case 'btn-remove':
                this.remove(null);
                break;
        }
    }
    /**
     * @return {?}
     */
    add() {
        if (this.dg.isEditing() == false || this.dg.isEditing() == null) {
            /** @type {?} */
            const newItem = this.startConditionService.createConditionEntity();
            /** @type {?} */
            const newEntity = {
                id: newItem.id,
                name: newItem.name,
                type: newItem.type,
                isEnabled: newItem.isEnabled,
                remarks: newItem.remarks,
                component: {},
                expression: {},
            };
            this.dgData = [...this.dgData, newEntity];
            this.cdf.detectChanges();
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.dg.editRow(newItem.id);
                this.editingRowId = newItem.id;
            }), 0);
        }
        else {
            this.notify.warning(this.localePipe.instant("pleaseEndCurrentRowEditing"));
        }
    }
    /**
     * 行删除
     * @param {?} evt
     * @param {?=} ctx
     * @return {?}
     */
    remove(evt, ctx) {
        /** @type {?} */
        const ids = [];
        if (ctx == null) {
            // 批量删除
            this.dg.checkeds.forEach((/**
             * @param {?} it
             * @return {?}
             */
            it => {
                ids.push(it.id);
            }));
        }
        else {
            // 行内删除
            ids.push(ctx.rowData.id);
        }
        if (ids.length == 0) {
            this.notify.warning(this.localePipe.instant("pleaseSelectOneItemAtLeast"));
            if (evt != null) {
                evt.stopPropagation();
            }
            return false;
        }
        for (let id of ids) {
            this.dg.deleteRow(id);
        }
        this.dgData = this.dg.data;
        if (this.editingRowId != null) {
            if (ids.includes(this.editingRowId)) {
                this.editingRowId = null;
            }
            else {
                this.dg.editRow(this.editingRowId);
            }
        }
        this.cdf.detectChanges();
        if (evt != null) {
            evt.stopPropagation();
        }
        return false;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    selectContent(e) {
        switch (e.form.value.type) {
            case ConditionType.COMPONENT:
                this.selectCommonComp(e);
                break;
            case ConditionType.EXPRESSION:
                this.showExpression(e);
                break;
            // case ConditionType.FULL_EXPRESSION:
            //   this.showExpression(e);
            //   break;
            // case ConditionType.INCREMENTAL_EXPRESSION:
            //   this.showExpression(e);
            //   break;
            case ConditionType.VOACTION:
                this.selectVOAction(e);
                break;
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    selectCommonComp(e) {
        /** @type {?} */
        const compFactory = this.cfr.resolveComponentFactory(SelectMetadataRTComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.inj);
        compRef.instance.typeList = "CommonComponent";
        // compRef.instance.boId = `${this.processContent.upBillBoId},${this.processContent.downBillBoId}`;
        compRef.instance.selectedMetadata.subscribe((/**
         * @param {?} metadata4RefDto
         * @return {?}
         */
        (metadata4RefDto) => {
            /** @type {?} */
            const content = new ComponentConditionContent();
            /** @type {?} */
            const metadata = metadata4RefDto.metadata;
            /** @type {?} */
            const entity = e.form.bindingData;
            entity.component.compName = metadata.name;
            entity.component.compMetadataId = metadata.id;
            /** @type {?} */
            const metadataContent = JSON.parse(metadata.content);
            entity.component.compId = metadataContent.id || metadataContent.Id || metadataContent.ID || metadata.id;
            entity.displayedContent = entity.component.compName;
            e.formControl.setValue(entity.displayedContent);
            e.instance.cd.detectChanges();
        }));
        /** @type {?} */
        const modalConfig = {
            title: this.localePipe.instant("commonComponentMetadataSelector"),
            width: 930,
            height: 573,
            showButtons: false
        };
        /** @type {?} */
        const dialog = this.modal.show(compRef, modalConfig);
        compRef.instance.closeModalEmitter.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        $event => dialog.close()));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    selectVOAction(e) {
    }
    /**
     * @param {?} e
     * @return {?}
     */
    showExpression(e) {
        // this.expr.clearContext();
        /** @type {?} */
        const context = new Array();
        if (this.designerState.subActivityContext.length > 0) {
            for (const variable of this.designerState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.addExpressionText(e.formControl.value);
        this.configExpressionExpendFuncs();
        /** @type {?} */
        let schema$ = this.des.getSchemaById(this.editorParams.voId);
        schema$.subscribe((/**
         * @param {?} schema
         * @return {?}
         */
        (schema) => {
            this.expr.addNewSchema(schema.name, schema);
            this.expr.addInjectedEntity(schema.entityTypes[0].code, schema.name, schema.entityTypes[0].code, InjectedType.EntityType);
            this.expr.buildExpression(!this.canEdit).then((/**
             * @param {?} expressioninfo
             * @return {?}
             */
            expressioninfo => {
                /** @type {?} */
                const content = new ExpressionConditionContent();
                /** @type {?} */
                let temp = expressioninfo;
                /** @type {?} */
                const entity = e.form.bindingData;
                entity.expression.exprContent = temp;
                entity.displayedContent = entity.expression.exprContent;
                e.formControl.setValue(entity.displayedContent);
                e.instance.cd.detectChanges();
                //点击确定后，去除表达式里面的新增的上下文变量
                if (context.length > 0) {
                    this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                     * @param {?} x
                     * @return {?}
                     */
                    x => !context.some((/**
                     * @param {?} y
                     * @return {?}
                     */
                    y => y.key === x.key))));
                }
            }));
        }));
    }
    /**
     * @param {?} e
     * @return {?}
     */
    clearContent(e) {
        /** @type {?} */
        const entity = e.form.bindingData;
        entity.displayedContent = null;
        //构件
        entity.component.compName = null;
        entity.component.compMetadataId = null;
        entity.component.compId = null;
        //表达式
        entity.expression.exprContent = null;
        //VO动作
        e.formControl.setValue(null);
        e.instance.cd.detectChanges();
    }
    /**
     * @return {?}
     */
    configDgColumns() {
        this.dgColumns = [
            // { field: 'id', title: this.localePipeService.instant("id"), width: 160 },
            {
                field: 'isEnabled', title: this.localePipe.instant("isEnabled"), width: 100, template: this.dgIsEnabledStateCell,
            },
            {
                field: 'type', title: this.localePipe.instant("type"), width: 120,
                editor: {
                    type: EditorTypes.SELECT,
                    options: {
                        idField: "value",
                        valueField: 'value',
                        textField: 'text',
                        data: [
                            // { value: ConditionType.VOACTION, text: this.localePipeService.instant("billAction") },
                            // { value: ConditionType.EXPRESSION, text: this.localePipe.instant("expression") },
                            { value: ConditionType.COMPONENT, text: this.localePipe.instant("commonComponent") },
                        ]
                    },
                    validators: [
                        { type: 'required', messager: this.localePipe.instant("typeMustNotBeNull") },
                    ]
                },
                validators: [
                    { type: 'required' },
                ],
                formatter: (/**
                 * @param {?} value
                 * @param {?} rowData
                 * @param {?} rowIndex
                 * @return {?}
                 */
                (value, rowData, rowIndex) => {
                    switch (value) {
                        case ConditionType.COMPONENT:
                            return this.localePipe.instant("commonComponent");
                        case ConditionType.EXPRESSION:
                            return this.localePipe.instant("expression");
                        // case ConditionType.FULL_EXPRESSION:
                        //   return this.localePipe.instant("fullExpression");
                        // case ConditionType.INCREMENTAL_EXPRESSION:
                        //   return this.localePipe.instant("incrementalExpression");
                        case ConditionType.VOACTION:
                            return this.localePipe.instant("billAction");
                        default:
                            return "Unknown";
                    }
                })
            },
            {
                field: "displayedContent", title: this.localePipe.instant("content"), width: 200,
                editor: {
                    type: EditorTypes.INPUTGROUP,
                    options: {
                        groupText: this.groupIcon,
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            this.selectContent(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            this.clearContent(e);
                        }),
                    },
                    validators: [
                        { type: 'required', messager: this.localePipe.instant("contentMustNotBeNull") }
                    ]
                },
                validators: [
                    { type: 'required' },
                ],
            },
            {
                field: 'remarks', title: this.localePipe.instant("description"), width: 200,
                editor: {
                    type: EditorTypes.TEXTAREA, options: {},
                }
            },
            { field: null, title: this.localePipe.instant("operation"), width: 250, template: this.dgOpCell, halign: 'center', align: 'center' },
        ];
    }
    /**
     * @param {?} param
     * @return {?}
     */
    beginEdit(param) {
        // console.log('Begin Edit', param);
        this.editingRowId = param.rowData.id;
        /** @type {?} */
        const editors = param.gridInstance.getEditors();
        /** @type {?} */
        const select = editors[0];
        select.instance.formControl.valueChanges.subscribe((/**
         * @param {?} val
         * @return {?}
         */
        (val) => {
            if (select.instance.dr.form.bindingData.type != val) {
                select.instance.group.bindingData.displayedContent = null;
                select.instance.group.controls.displayedContent.setValue(null);
                select.instance.group.bindingData.remarks = null;
                select.instance.group.controls.remarks.setValue(null);
                select.instance.dr.cd.detectChanges();
            }
        }));
    }
    /**
     * @param {...?} args
     * @return {?}
     */
    endEdit(...args) {
        // console.log('End Edit', args);
        this.editingRowId = null;
    }
    /**
     * @param {...?} args
     * @return {?}
     */
    cancelEdited(...args) {
        // console.log('取消编辑', args);
        this.editingRowId = null;
    }
    /**
     * @return {?}
     */
    configExpressionExpendFuncs() {
        // let changeDetails: VarEntity =
        // {
        //   key: "changeDetails",
        //   name: "业务实体变更集列表",
        //   description: "业务实体变更集列表"
        // }
        // this.expr.addContext(changeDetails);
    }
}
StartConditionComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-start-condition',
                template: "<div class=\"f-page f-page-is-managelist p-2\">\r\n  <div class=\"f-page-header-base\" style=\"min-height: unset;\">\r\n    <div class=\"f-title\">\r\n      <span class=\"f-title-icon f-text-orna-param\">\r\n        <i class=\"f-icon f-icon-clock\"></i>\r\n      </span>\r\n      <h4 class=\"f-title-text\" style=\"font-size: 1rem;\">\r\n        {{ 'startCondition' | aifLocale }}\r\n      </h4>\r\n    </div>\r\n    <f-response-toolbar class=\"f-toolbar\" #toolbar [datas]=\"toolbarData\" (rtClickEvent)=\"toolbarClickHandler($event)\"\r\n      [style.display]=\"canEdit==false?'none':null\">\r\n    </f-response-toolbar>\r\n  </div>\r\n  <div class=\"f-utils-fill-flex-column\">\r\n    <farris-datagrid #dg=\"datagrid\" [columns]=\"dgColumns\" [data]=\"dgData\" [editable]=\"canEdit\" [editMode]=\"'row'\"\r\n      [idField]=\"dgIdField\" [showLineNumber]=\"true\" [striped]=\"false\" [showBorder]=\"true\" [pagination]=\"false\"\r\n      [showAllCheckbox]=\"true\" [selectOnCheck]=\"false\" [checkOnSelect]=\"false\" [onlySelectSelf]=\"true\"\r\n      [showCheckbox]=\"true\" [multiSelect]=\"true\" [keepSelect]=\"true\" [fitColumns]=\"true\" [fit]=\"true\"\r\n      [virtualized]=\"false\" [clickToEdit]=\"false\" [beforeEdit]=\"beforeEdit\" (beginEdit)=\"beginEdit($event)\"\r\n      [afterEdit]=\"afterEdit\" (endEdit)=\"endEdit($event)\" (cancelEdited)=\"cancelEdited($event)\">\r\n    </farris-datagrid>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #dgIsEnabledStateCell let-ctx>\r\n  <div class=\"f-datagrid-cell-formgroup farris-group-auto\" style=\"line-height: 100%;\">\r\n    <farris-switch checked id=\"isEnabled\" [disabled]=\"!canEdit\" checkedLabel=\"{{'yes'|aifLocale}}\"\r\n      uncheckedLabel=\"{{'no'|aifLocale}}\" [(ngModel)]=\"ctx.rowData.isEnabled\"></farris-switch>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #dgOpCell let-ctx>\r\n  <ng-container\r\n    *ngIf=\"dg.isEditing()!=false&&dg.isEditing()!=null&&dg.selectedRow.id==ctx.rowData.id; else elseTemplate\">\r\n    <button class=\"btn btn-link mr-2\" [disabled]=\"!canEdit\" (click)=\"endRowEdit(ctx)\" title=\"{{'confirm'|aifLocale}}\">\r\n      <span class=\"f-icon f-icon-check\" [ngClass]=\"{'f-pretend-link': canEdit}\"\r\n        style=\"width: 20px; height: 20px; font-size: 20px;\"></span>\r\n    </button>\r\n  </ng-container>\r\n  <ng-template #elseTemplate>\r\n    <button class=\"btn btn-link mr-2\" [disabled]=\"!canEdit\" (click)=\"startRowEdit(ctx)\" title=\"{{'edit'|aifLocale}}\">\r\n      <span class=\"f-icon f-icon-edit-button\" [ngClass]=\"{'f-pretend-link': canEdit}\"\r\n        style=\"width: 20px; height: 20px; font-size: 20px;\"></span>\r\n    </button>\r\n  </ng-template>\r\n  <button class=\"btn btn-link mr-2\" [disabled]=\"!canEdit\" (click)=\"rowMove($event, ctx, -1)\"\r\n    title=\"{{'moveUp'|aifLocale}}\">\r\n    <span class=\"f-icon f-icon-arrow-seek-up\" [ngClass]=\"{'f-pretend-link': canEdit}\"\r\n      style=\"width: 20px; height: 20px; font-size: 20px;\"></span>\r\n  </button>\r\n  <button class=\"btn btn-link mr-2\" [disabled]=\"!canEdit\" (click)=\"rowMove($event, ctx, 1)\"\r\n    title=\"{{'moveDown'|aifLocale}}\">\r\n    <span class=\"f-icon f-icon-arrow-seek-down\" [ngClass]=\"{'f-pretend-link': canEdit}\"\r\n      style=\"width: 20px; height: 20px; font-size: 20px;\"></span>\r\n  </button>\r\n  <button class=\"btn btn-link mr-2\" [disabled]=\"!canEdit\" (click)=\"remove($event, ctx)\" title=\"{{'remove'|aifLocale}}\">\r\n    <span class=\"f-icon f-icon-delete\" [ngClass]=\"{'f-pretend-link': canEdit}\"\r\n      style=\"width: 20px; height: 20px; font-size: 20px;\"></span>\r\n  </button>\r\n</ng-template>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOk()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n",
                providers: [
                    { provide: BIF_LANG_RESOURCES, useValue: ɵ0 },
                    AifLocalePipe,
                    StartConditionService,
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
StartConditionComponent.ctorParameters = () => [
    { type: StartConditionService },
    { type: ProcessDesignerUIState },
    { type: GSPMetadataRTService },
    { type: ExpressionService },
    { type: DataEntityService },
    { type: MessagerService },
    { type: NotifyService },
    { type: BsModalService },
    { type: FrameworkService },
    { type: Router },
    { type: ActivatedRoute },
    { type: LoadingService },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: AifLocalePipe },
    { type: ComponentFactoryResolver },
    { type: ChangeDetectorRef },
    { type: Injector }
];
StartConditionComponent.propDecorators = {
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    value: [{ type: Input }],
    editorParams: [{ type: Input }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    dg: [{ type: ViewChild, args: ["dg",] }],
    dgIsEnabledStateCell: [{ type: ViewChild, args: ["dgIsEnabledStateCell",] }],
    dgOpCell: [{ type: ViewChild, args: ["dgOpCell",] }]
};
if (false) {
    /** @type {?} */
    StartConditionComponent.prototype.groupIcon;
    /** @type {?} */
    StartConditionComponent.prototype.closeModal;
    /** @type {?} */
    StartConditionComponent.prototype.submitModal;
    /** @type {?} */
    StartConditionComponent.prototype.editorParams;
    /** @type {?} */
    StartConditionComponent.prototype.modalFooter;
    /** @type {?} */
    StartConditionComponent.prototype.modalConfig;
    /** @type {?} */
    StartConditionComponent.prototype.dg;
    /** @type {?} */
    StartConditionComponent.prototype.dgIdField;
    /** @type {?} */
    StartConditionComponent.prototype.dgColumns;
    /** @type {?} */
    StartConditionComponent.prototype.designedConditionEntities;
    /** @type {?} */
    StartConditionComponent.prototype.dgIsEnabledStateCell;
    /** @type {?} */
    StartConditionComponent.prototype.dgOpCell;
    /** @type {?} */
    StartConditionComponent.prototype.editingRowId;
    /** @type {?} */
    StartConditionComponent.prototype.canEdit;
    /** @type {?} */
    StartConditionComponent.prototype.beforeEdit;
    /** @type {?} */
    StartConditionComponent.prototype.afterEdit;
    /** @type {?} */
    StartConditionComponent.prototype.startConditionService;
    /**
     * @type {?}
     * @private
     */
    StartConditionComponent.prototype.designerState;
    /** @type {?} */
    StartConditionComponent.prototype.metadata;
    /** @type {?} */
    StartConditionComponent.prototype.expr;
    /** @type {?} */
    StartConditionComponent.prototype.des;
    /** @type {?} */
    StartConditionComponent.prototype.messager;
    /** @type {?} */
    StartConditionComponent.prototype.notify;
    /** @type {?} */
    StartConditionComponent.prototype.modal;
    /** @type {?} */
    StartConditionComponent.prototype.framework;
    /** @type {?} */
    StartConditionComponent.prototype.router;
    /** @type {?} */
    StartConditionComponent.prototype.activatedRoute;
    /** @type {?} */
    StartConditionComponent.prototype.loading;
    /** @type {?} */
    StartConditionComponent.prototype.localePipe;
    /** @type {?} */
    StartConditionComponent.prototype.cfr;
    /** @type {?} */
    StartConditionComponent.prototype.cdf;
    /** @type {?} */
    StartConditionComponent.prototype.inj;
}
export class StartConditionConverter {
    constructor() { }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data && data.StartCondition) {
            return '（已设置）';
        }
        return '（未设置）';
    }
}
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtY29uZGl0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvc3RhcnQtY29uZGl0aW9uL3N0YXJ0LWNvbmRpdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsd0JBQXdCLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBVSxNQUFNLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqTCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSx5QkFBeUIsRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLDBCQUEwQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFakosT0FBTyxFQUFjLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSxvQkFBb0IsRUFBbUIseUJBQXlCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUNoSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFhLE1BQU0scUJBQXFCLENBQUM7QUFDakYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0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SUFFUCw4Q0FBNkQ7O0lBQzdELDhDQU1FOztJQUVGLHFDQUNzQjs7SUFDdEIsNENBQXlCOztJQUN6Qiw0Q0FBd0I7O0lBVXhCLDREQUFvRTs7SUFFcEUsdURBQ3VDOztJQUN2QywyQ0FDMkI7O0lBRTNCLCtDQUE0Qjs7SUFDNUIsMENBQW9COztJQXdWcEIsNkNBR0M7O0lBbUJELDRDQVNDOztJQXBYQyx3REFBbUQ7Ozs7O0lBQ25ELGdEQUE2Qzs7SUFDN0MsMkNBQXFDOztJQUNyQyx1Q0FBOEI7O0lBQzlCLHNDQUE2Qjs7SUFDN0IsMkNBQWdDOztJQUNoQyx5Q0FBNEI7O0lBQzVCLHdDQUE0Qjs7SUFDNUIsNENBQWtDOztJQUNsQyx5Q0FBcUI7O0lBQ3JCLGlEQUFxQzs7SUFDckMsMENBQThCOztJQUU5Qiw2Q0FBZ0M7O0lBQ2hDLHNDQUFvQzs7SUFDcEMsc0NBQTZCOztJQUM3QixzQ0FBb0I7O0FBMlh4QixNQUFNLE9BQU8sdUJBQXVCO0lBRWxDLGdCQUFnQixDQUFDOzs7OztJQUVqQixTQUFTLENBQUMsSUFBUztRQUNqQixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQy9CLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO1FBQ0QsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5qZWN0b3IsIElucHV0LCBMT0NBTEVfSUQsIE9uSW5pdCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBCcG1uTW9kZWxKc29uSGVscGVyLCBDb21wb25lbnRDb25kaXRpb25Db250ZW50LCBDb25kaXRpb25FbnRpdHksIENvbmRpdGlvblR5cGUsIEV4cHJlc3Npb25Db25kaXRpb25Db250ZW50IH0gZnJvbSAnQGVkcC1iaWYvY29tbW9uLWFwaSc7XHJcbmltcG9ydCB7IFR5cGVDb252ZXJ0ZXIgfSBmcm9tICdAZmFycmlzL2lkZS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7IERhdGFDb2x1bW4sIERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IFJlc3BvbnNlVG9vbGJhckNsaWNrRXZlbnQgfSBmcm9tICdAZmFycmlzL3VpLXJlc3BvbnNlLXRvb2xiYXInO1xyXG5pbXBvcnQgeyBHU1BNZXRhZGF0YVJUU2VydmljZSwgTWV0YWRhdGE0UmVmRHRvLCBTZWxlY3RNZXRhZGF0YVJUQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1sY20vbWV0YWRhdGFydC1zZWxlY3Rvcic7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25TZXJ2aWNlLCBJbmplY3RlZFR5cGUsIFZhckVudGl0eSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBGcmFtZXdvcmtTZXJ2aWNlIH0gZnJvbSAnQGdzcC1zeXMvcnRmLWNvbW1vbic7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEFpZkxvY2FsZVBpcGUsIEJJRl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uL2FpZi11aS1jb21tb24vcGlwZS9haWYtdWktY29tbW9uLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgSUNvbmRpdGlvbkVudGl0eTREZyB9IGZyb20gJy4vZW50aXR5L0lDb25kaXRpb25FbnRpdHk0RGcnO1xyXG5pbXBvcnQgeyBTdGFydENvbmRpdGlvblNlcnZpY2UgfSBmcm9tICcuL3N0YXJ0LWNvbmRpdGlvbi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YUVudGl0eVNlcnZpY2UgfSBmcm9tICdAZ3NwLXN2Yy9kYXRhLWVudGl0eS1hZGFwdGVyJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnLi9hYnN0cmFjdC1kYXRhZ3JpZC1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBMQU5HX1JFU09VUkNFUyB9IGZyb20gJy4vaTE4bi9sYW5nLnJlc291cmNlJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLXN0YXJ0LWNvbmRpdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3N0YXJ0LWNvbmRpdGlvbi5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vc3RhcnQtY29uZGl0aW9uLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHsgcHJvdmlkZTogQklGX0xBTkdfUkVTT1VSQ0VTLCB1c2VWYWx1ZTogTEFOR19SRVNPVVJDRVMgfSxcclxuICAgIEFpZkxvY2FsZVBpcGUsXHJcbiAgICBTdGFydENvbmRpdGlvblNlcnZpY2UsXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU3RhcnRDb25kaXRpb25Db21wb25lbnQgZXh0ZW5kcyBBYnN0cmFjdERhdGFncmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICByZWFkb25seSBncm91cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nO1xyXG5cclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZShkYXRhOiBzdHJpbmcpIHtcclxuICAgIGRhdGEgPSBkYXRhID8gZGF0YSA6ICdbXSc7XHJcbiAgICBjb25zdCBjb25kaXRpb25FbnRpdGllczogQ29uZGl0aW9uRW50aXR5W10gPSBkYXRhID8gW10gOiBCcG1uTW9kZWxKc29uSGVscGVyLkZyb21Kc29uKGRhdGEsIENvbmRpdGlvbkVudGl0eSk7XHJcbiAgICB0aGlzLmRlc2lnbmVkQ29uZGl0aW9uRW50aXRpZXMgPSBjb25kaXRpb25FbnRpdGllcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZW50aXR5OiBJQ29uZGl0aW9uRW50aXR5NERnID0ge1xyXG4gICAgICAgIGlkOiBpdGVtLmlkLFxyXG4gICAgICAgIGlzRW5hYmxlZDogaXRlbS5pc0VuYWJsZWQsXHJcbiAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcclxuICAgICAgICByZW1hcmtzOiBpdGVtLnJlbWFya3MsXHJcbiAgICAgICAgY29tcG9uZW50OiB7fSxcclxuICAgICAgICBleHByZXNzaW9uOiB7fSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmIChlbnRpdHkudHlwZSA9PSBDb25kaXRpb25UeXBlLkNPTVBPTkVOVCkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBDb25kQ29udCA9IG5ldyBDb21wb25lbnRDb25kaXRpb25Db250ZW50KCk7XHJcbiAgICAgICAgY29tcENvbmRDb250LkxvYWRGcm9tSnNvbihpdGVtLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICBlbnRpdHkuY29tcG9uZW50LmNvbXBJZCA9IGNvbXBDb25kQ29udC5jb21wb25lbnRJZDtcclxuICAgICAgICBlbnRpdHkuY29tcG9uZW50LmNvbXBNZXRhZGF0YUlkID0gY29tcENvbmRDb250LmNvbXBvbmVudE1ldGFkYXRhSWQ7XHJcbiAgICAgICAgZW50aXR5LmNvbXBvbmVudC5jb21wTmFtZSA9IGNvbXBDb25kQ29udC5uYW1lO1xyXG5cclxuICAgICAgICBlbnRpdHkuZGlzcGxheWVkQ29udGVudCA9IGVudGl0eS5jb21wb25lbnQuY29tcE5hbWU7XHJcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5LnR5cGUgPT0gQ29uZGl0aW9uVHlwZS5FWFBSRVNTSU9OKSB7XHJcbiAgICAgICAgY29uc3QgZXhwckNvbnRlbnQgPSBuZXcgRXhwcmVzc2lvbkNvbmRpdGlvbkNvbnRlbnQoKTtcclxuICAgICAgICBleHByQ29udGVudC5Mb2FkRnJvbUpzb24oaXRlbS5jb250ZW50KTtcclxuXHJcbiAgICAgICAgZW50aXR5LmV4cHJlc3Npb24uZXhwckNvbnRlbnQgPSBleHByQ29udGVudC5leHByZXNzaW9uQ29udGVudDtcclxuICAgICAgICBlbnRpdHkuZGlzcGxheWVkQ29udGVudCA9IGVudGl0eS5leHByZXNzaW9uLmV4cHJDb250ZW50O1xyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IHtcclxuICAgIGJpelR5cGVJZD86IHN0cmluZztcclxuICAgIHZvSWQ/OiBzdHJpbmc7XHJcbiAgfSA9IHt9O1xyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogJ+WQr+WKqOadoeS7ticsXHJcbiAgICB3aWR0aDogOTAwLFxyXG4gICAgaGVpZ2h0OiA0MDAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZSxcclxuICAgIHNob3dIZWFkZXI6IGZhbHNlXHJcbiAgfTtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRnXCIpXHJcbiAgZGc6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIGRnSWRGaWVsZDogc3RyaW5nID0gXCJpZFwiO1xyXG4gIGRnQ29sdW1uczogRGF0YUNvbHVtbltdO1xyXG4gIGdldCBkZ0RhdGEoKTogSUNvbmRpdGlvbkVudGl0eTREZ1tdIHtcclxuICAgIHJldHVybiB0aGlzLmRlc2lnbmVkQ29uZGl0aW9uRW50aXRpZXM7XHJcbiAgfVxyXG4gIHNldCBkZ0RhdGEoYXJyOiBJQ29uZGl0aW9uRW50aXR5NERnW10pIHtcclxuICAgIHRoaXMuZGVzaWduZWRDb25kaXRpb25FbnRpdGllcyA9IGFycjtcclxuICB9XHJcbiAgZ2V0IGRnVG90YWwoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmRnRGF0YS5sZW5ndGggfHwgMDtcclxuICB9XHJcbiAgZGVzaWduZWRDb25kaXRpb25FbnRpdGllczogQXJyYXk8SUNvbmRpdGlvbkVudGl0eTREZz4gPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgQFZpZXdDaGlsZChcImRnSXNFbmFibGVkU3RhdGVDZWxsXCIpXHJcbiAgZGdJc0VuYWJsZWRTdGF0ZUNlbGw6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZChcImRnT3BDZWxsXCIpXHJcbiAgZGdPcENlbGw6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gIGVkaXRpbmdSb3dJZDogc3RyaW5nID0gbnVsbDtcclxuICBjYW5FZGl0OiBhbnkgPSB0cnVlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBzdGFydENvbmRpdGlvblNlcnZpY2U6IFN0YXJ0Q29uZGl0aW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgZGVzaWduZXJTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHB1YmxpYyBtZXRhZGF0YTogR1NQTWV0YWRhdGFSVFNlcnZpY2UsXHJcbiAgICBwdWJsaWMgZXhwcjogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwdWJsaWMgZGVzOiBEYXRhRW50aXR5U2VydmljZSxcclxuICAgIHB1YmxpYyBtZXNzYWdlcjogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHVibGljIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHB1YmxpYyBtb2RhbDogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwdWJsaWMgZnJhbWV3b3JrOiBGcmFtZXdvcmtTZXJ2aWNlLFxyXG4gICAgcHVibGljIHJvdXRlcjogUm91dGVyLFxyXG4gICAgcHVibGljIGFjdGl2YXRlZFJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcclxuICAgIHB1YmxpYyBsb2FkaW5nOiBMb2FkaW5nU2VydmljZSxcclxuICAgIEBJbmplY3QoTE9DQUxFX0lEKSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgcHVibGljIGxvY2FsZVBpcGU6IEFpZkxvY2FsZVBpcGUsXHJcbiAgICBwdWJsaWMgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwdWJsaWMgY2RmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHB1YmxpYyBpbmo6IEluamVjdG9yLFxyXG4gICkge1xyXG4gICAgc3VwZXIobWVzc2FnZXIsIG5vdGlmeSwgbWV0YWRhdGEsIG1vZGFsLCBsb2NhbGVQaXBlLCBpbmosIGNmciwgY2RmKVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmNvbmZpZ0RnQ29sdW1ucygpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tPaygpIHtcclxuICAgIGlmICh0aGlzLmRnLmlzRWRpdGluZygpIHx8IHRoaXMuZWRpdGluZ1Jvd0lkICE9IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZGl0aW9uRW50aXRpZXMgPSB0aGlzLmRlc2lnbmVkQ29uZGl0aW9uRW50aXRpZXMubWFwKChlbnRpdHkpID0+IHtcclxuICAgICAgY29uc3QgaXRlbTogQ29uZGl0aW9uRW50aXR5ID0gbmV3IENvbmRpdGlvbkVudGl0eSgpO1xyXG4gICAgICBpdGVtLmlkID0gZW50aXR5LmlkO1xyXG4gICAgICBpdGVtLmlzRW5hYmxlZCA9IGVudGl0eS5pc0VuYWJsZWQ7XHJcbiAgICAgIGl0ZW0ubmFtZSA9IGVudGl0eS5uYW1lO1xyXG4gICAgICBpdGVtLnR5cGUgPSBlbnRpdHkudHlwZTtcclxuICAgICAgaXRlbS5yZW1hcmtzID0gZW50aXR5LnJlbWFya3M7XHJcblxyXG4gICAgICBpZiAoZW50aXR5LnR5cGUgPT0gQ29uZGl0aW9uVHlwZS5DT01QT05FTlQpIHtcclxuICAgICAgICBjb25zdCBjb21wQ29uZENvbnQgPSBuZXcgQ29tcG9uZW50Q29uZGl0aW9uQ29udGVudCgpO1xyXG4gICAgICAgIGNvbXBDb25kQ29udC5uYW1lID0gZW50aXR5LmNvbXBvbmVudC5jb21wTmFtZTtcclxuICAgICAgICBjb21wQ29uZENvbnQuY29tcG9uZW50SWQgPSBlbnRpdHkuY29tcG9uZW50LmNvbXBJZDtcclxuICAgICAgICBjb21wQ29uZENvbnQuY29tcG9uZW50TWV0YWRhdGFJZCA9IGVudGl0eS5jb21wb25lbnQuY29tcE1ldGFkYXRhSWQ7XHJcblxyXG4gICAgICAgIGl0ZW0uY29udGVudCA9IGNvbXBDb25kQ29udC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5LnR5cGUgPT0gQ29uZGl0aW9uVHlwZS5FWFBSRVNTSU9OKSB7XHJcbiAgICAgICAgY29uc3QgZXhwckNvbnRlbnQgPSBuZXcgRXhwcmVzc2lvbkNvbmRpdGlvbkNvbnRlbnQoKTtcclxuICAgICAgICBleHByQ29udGVudC5leHByZXNzaW9uQ29udGVudCA9IGVudGl0eS5leHByZXNzaW9uLmV4cHJDb250ZW50O1xyXG5cclxuICAgICAgICBpdGVtLmNvbnRlbnQgPSBleHByQ29udGVudC5Db252ZXJ0VG9Kc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaXRlbTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHZhbCA9IEJwbW5Nb2RlbEpzb25IZWxwZXIuVG9Kc29uKGNvbmRpdGlvbkVudGl0aWVzKTtcclxuICAgIGNvbnN0IG9iaiA9IHsgdmFsdWU6IHZhbCwgcGFyYW1ldGVyczogbnVsbCB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iaik7XHJcbiAgfVxyXG5cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBsb2FkKCk6IHZvaWQge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gIH1cclxuXHJcbiAgdG9vbGJhckNsaWNrSGFuZGxlcihhcmdzOiBSZXNwb25zZVRvb2xiYXJDbGlja0V2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGFyZ3MuaWQpIHtcclxuICAgICAgY2FzZSAnYnRuLWFkZCc6XHJcbiAgICAgICAgdGhpcy5hZGQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYnRuLXJlbW92ZSc6XHJcbiAgICAgICAgdGhpcy5yZW1vdmUobnVsbCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGQoKSB7XHJcbiAgICBpZiAodGhpcy5kZy5pc0VkaXRpbmcoKSA9PSBmYWxzZSB8fCB0aGlzLmRnLmlzRWRpdGluZygpID09IG51bGwpIHtcclxuICAgICAgY29uc3QgbmV3SXRlbSA9IHRoaXMuc3RhcnRDb25kaXRpb25TZXJ2aWNlLmNyZWF0ZUNvbmRpdGlvbkVudGl0eSgpO1xyXG4gICAgICBjb25zdCBuZXdFbnRpdHk6IElDb25kaXRpb25FbnRpdHk0RGcgPSB7XHJcbiAgICAgICAgaWQ6IG5ld0l0ZW0uaWQsXHJcbiAgICAgICAgbmFtZTogbmV3SXRlbS5uYW1lLFxyXG4gICAgICAgIHR5cGU6IG5ld0l0ZW0udHlwZSxcclxuICAgICAgICBpc0VuYWJsZWQ6IG5ld0l0ZW0uaXNFbmFibGVkLFxyXG4gICAgICAgIHJlbWFya3M6IG5ld0l0ZW0ucmVtYXJrcyxcclxuICAgICAgICBjb21wb25lbnQ6IHt9LFxyXG4gICAgICAgIGV4cHJlc3Npb246IHt9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5kZ0RhdGEgPSBbLi4udGhpcy5kZ0RhdGEsIG5ld0VudGl0eV07XHJcbiAgICAgIHRoaXMuY2RmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kZy5lZGl0Um93KG5ld0l0ZW0uaWQpO1xyXG4gICAgICAgIHRoaXMuZWRpdGluZ1Jvd0lkID0gbmV3SXRlbS5pZDtcclxuICAgICAgfSwgMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMubG9jYWxlUGlwZS5pbnN0YW50KFwicGxlYXNlRW5kQ3VycmVudFJvd0VkaXRpbmdcIikpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6KGM5Yig6ZmkXHJcbiAgICogQHBhcmFtIGN0eCBcclxuICAgKi9cclxuICByZW1vdmUoZXZ0OiBFdmVudCwgY3R4PzogeyByb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiB7IGlkO1trZXk6IHN0cmluZ106IGFueSB9IH0pIHtcclxuICAgIGNvbnN0IGlkczogc3RyaW5nW10gPSBbXTtcclxuICAgIGlmIChjdHggPT0gbnVsbCkge1xyXG4gICAgICAvLyDmibnph4/liKDpmaRcclxuICAgICAgdGhpcy5kZy5jaGVja2Vkcy5mb3JFYWNoKGl0ID0+IHtcclxuICAgICAgICBpZHMucHVzaChpdC5pZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g6KGM5YaF5Yig6ZmkXHJcbiAgICAgIGlkcy5wdXNoKGN0eC5yb3dEYXRhLmlkKTtcclxuICAgIH1cclxuICAgIGlmIChpZHMubGVuZ3RoID09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcInBsZWFzZVNlbGVjdE9uZUl0ZW1BdExlYXN0XCIpKTtcclxuICAgICAgaWYgKGV2dCAhPSBudWxsKSB7XHJcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGlkIG9mIGlkcykge1xyXG4gICAgICB0aGlzLmRnLmRlbGV0ZVJvdyhpZCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRnRGF0YSA9IHRoaXMuZGcuZGF0YTtcclxuICAgIGlmICh0aGlzLmVkaXRpbmdSb3dJZCAhPSBudWxsKSB7XHJcbiAgICAgIGlmIChpZHMuaW5jbHVkZXModGhpcy5lZGl0aW5nUm93SWQpKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0aW5nUm93SWQgPSBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGcuZWRpdFJvdyh0aGlzLmVkaXRpbmdSb3dJZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY2RmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIGlmIChldnQgIT0gbnVsbCkge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RDb250ZW50KGU6IHsgaW5zdGFuY2UsIGZvcm0sIGZvcm1Db250cm9sLCAkZXZlbnQgfSkge1xyXG4gICAgc3dpdGNoIChlLmZvcm0udmFsdWUudHlwZSkge1xyXG4gICAgICBjYXNlIENvbmRpdGlvblR5cGUuQ09NUE9ORU5UOlxyXG4gICAgICAgIHRoaXMuc2VsZWN0Q29tbW9uQ29tcChlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb25kaXRpb25UeXBlLkVYUFJFU1NJT046XHJcbiAgICAgICAgdGhpcy5zaG93RXhwcmVzc2lvbihlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8gY2FzZSBDb25kaXRpb25UeXBlLkZVTExfRVhQUkVTU0lPTjpcclxuICAgICAgLy8gICB0aGlzLnNob3dFeHByZXNzaW9uKGUpO1xyXG4gICAgICAvLyAgIGJyZWFrO1xyXG4gICAgICAvLyBjYXNlIENvbmRpdGlvblR5cGUuSU5DUkVNRU5UQUxfRVhQUkVTU0lPTjpcclxuICAgICAgLy8gICB0aGlzLnNob3dFeHByZXNzaW9uKGUpO1xyXG4gICAgICAvLyAgIGJyZWFrO1xyXG4gICAgICBjYXNlIENvbmRpdGlvblR5cGUuVk9BQ1RJT046XHJcbiAgICAgICAgdGhpcy5zZWxlY3RWT0FjdGlvbihlKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZWxlY3RDb21tb25Db21wKGU6IHsgaW5zdGFuY2UsIGZvcm0sIGZvcm1Db250cm9sLCAkZXZlbnQgfSk6IHZvaWQge1xyXG4gICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLmNmci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShTZWxlY3RNZXRhZGF0YVJUQ29tcG9uZW50KTtcclxuICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmopO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS50eXBlTGlzdCA9IFwiQ29tbW9uQ29tcG9uZW50XCI7XHJcbiAgICAvLyBjb21wUmVmLmluc3RhbmNlLmJvSWQgPSBgJHt0aGlzLnByb2Nlc3NDb250ZW50LnVwQmlsbEJvSWR9LCR7dGhpcy5wcm9jZXNzQ29udGVudC5kb3duQmlsbEJvSWR9YDtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2Uuc2VsZWN0ZWRNZXRhZGF0YS5zdWJzY3JpYmUoXHJcbiAgICAgIChtZXRhZGF0YTRSZWZEdG86IE1ldGFkYXRhNFJlZkR0bykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgQ29tcG9uZW50Q29uZGl0aW9uQ29udGVudCgpO1xyXG5cclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IG1ldGFkYXRhNFJlZkR0by5tZXRhZGF0YTtcclxuICAgICAgICBjb25zdCBlbnRpdHk6IElDb25kaXRpb25FbnRpdHk0RGcgPSBlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgICAgZW50aXR5LmNvbXBvbmVudC5jb21wTmFtZSA9IG1ldGFkYXRhLm5hbWU7XHJcbiAgICAgICAgZW50aXR5LmNvbXBvbmVudC5jb21wTWV0YWRhdGFJZCA9IG1ldGFkYXRhLmlkO1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhQ29udGVudCA9IEpTT04ucGFyc2UobWV0YWRhdGEuY29udGVudCk7XHJcbiAgICAgICAgZW50aXR5LmNvbXBvbmVudC5jb21wSWQgPSBtZXRhZGF0YUNvbnRlbnQuaWQgfHwgbWV0YWRhdGFDb250ZW50LklkIHx8IG1ldGFkYXRhQ29udGVudC5JRCB8fCBtZXRhZGF0YS5pZDtcclxuICAgICAgICBlbnRpdHkuZGlzcGxheWVkQ29udGVudCA9IGVudGl0eS5jb21wb25lbnQuY29tcE5hbWU7XHJcblxyXG4gICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZW50aXR5LmRpc3BsYXllZENvbnRlbnQpO1xyXG4gICAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImNvbW1vbkNvbXBvbmVudE1ldGFkYXRhU2VsZWN0b3JcIiksXHJcbiAgICAgIHdpZHRoOiA5MzAsXHJcbiAgICAgIGhlaWdodDogNTczLFxyXG4gICAgICBzaG93QnV0dG9uczogZmFsc2VcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsRW1pdHRlci5zdWJzY3JpYmUoJGV2ZW50ID0+IGRpYWxvZy5jbG9zZSgpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZWxlY3RWT0FjdGlvbihlOiB7IGluc3RhbmNlLCBmb3JtLCBmb3JtQ29udHJvbCwgJGV2ZW50IH0pOiB2b2lkIHtcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2hvd0V4cHJlc3Npb24oZTogeyBpbnN0YW5jZSwgZm9ybSwgZm9ybUNvbnRyb2wsICRldmVudCB9KTogdm9pZCB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IEFycmF5PFZhckVudGl0eT4oKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dChlLmZvcm1Db250cm9sLnZhbHVlKTtcclxuICAgIHRoaXMuY29uZmlnRXhwcmVzc2lvbkV4cGVuZEZ1bmNzKCk7XHJcblxyXG4gICAgbGV0IHNjaGVtYSQ6IE9ic2VydmFibGU8YW55PiA9IHRoaXMuZGVzLmdldFNjaGVtYUJ5SWQodGhpcy5lZGl0b3JQYXJhbXMudm9JZCk7XHJcbiAgICBzY2hlbWEkLnN1YnNjcmliZShcclxuICAgICAgKHNjaGVtYSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGROZXdTY2hlbWEoc2NoZW1hLm5hbWUsIHNjaGVtYSk7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KHNjaGVtYS5lbnRpdHlUeXBlc1swXS5jb2RlLCBzY2hlbWEubmFtZSwgc2NoZW1hLmVudGl0eVR5cGVzWzBdLmNvZGUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbighdGhpcy5jYW5FZGl0KS50aGVuKFxyXG4gICAgICAgICAgZXhwcmVzc2lvbmluZm8gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50OiBFeHByZXNzaW9uQ29uZGl0aW9uQ29udGVudCA9IG5ldyBFeHByZXNzaW9uQ29uZGl0aW9uQ29udGVudCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRlbXA6IGFueSA9IGV4cHJlc3Npb25pbmZvO1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHk6IElDb25kaXRpb25FbnRpdHk0RGcgPSBlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgICAgICAgIGVudGl0eS5leHByZXNzaW9uLmV4cHJDb250ZW50ID0gdGVtcDtcclxuICAgICAgICAgICAgZW50aXR5LmRpc3BsYXllZENvbnRlbnQgPSBlbnRpdHkuZXhwcmVzc2lvbi5leHByQ29udGVudDtcclxuXHJcbiAgICAgICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZW50aXR5LmRpc3BsYXllZENvbnRlbnQpO1xyXG4gICAgICAgICAgICBlLmluc3RhbmNlLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjbGVhckNvbnRlbnQoZTogeyBpbnN0YW5jZSwgZm9ybSwgZm9ybUNvbnRyb2wsICRldmVudCB9KSB7XHJcbiAgICBjb25zdCBlbnRpdHk6IElDb25kaXRpb25FbnRpdHk0RGcgPSBlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICBlbnRpdHkuZGlzcGxheWVkQ29udGVudCA9IG51bGw7XHJcblxyXG4gICAgLy/mnoTku7ZcclxuICAgIGVudGl0eS5jb21wb25lbnQuY29tcE5hbWUgPSBudWxsO1xyXG4gICAgZW50aXR5LmNvbXBvbmVudC5jb21wTWV0YWRhdGFJZCA9IG51bGw7XHJcbiAgICBlbnRpdHkuY29tcG9uZW50LmNvbXBJZCA9IG51bGw7XHJcblxyXG4gICAgLy/ooajovr7lvI9cclxuICAgIGVudGl0eS5leHByZXNzaW9uLmV4cHJDb250ZW50ID0gbnVsbDtcclxuXHJcbiAgICAvL1ZP5Yqo5L2cXHJcblxyXG4gICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShudWxsKTtcclxuICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgY29uZmlnRGdDb2x1bW5zKCkge1xyXG4gICAgdGhpcy5kZ0NvbHVtbnMgPSBbXHJcbiAgICAgIC8vIHsgZmllbGQ6ICdpZCcsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGVTZXJ2aWNlLmluc3RhbnQoXCJpZFwiKSwgd2lkdGg6IDE2MCB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICdpc0VuYWJsZWQnLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLmluc3RhbnQoXCJpc0VuYWJsZWRcIiksIHdpZHRoOiAxMDAsIHRlbXBsYXRlOiB0aGlzLmRnSXNFbmFibGVkU3RhdGVDZWxsLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZmllbGQ6ICd0eXBlJywgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS5pbnN0YW50KFwidHlwZVwiKSwgd2lkdGg6IDEyMCxcclxuICAgICAgICBlZGl0b3I6IHtcclxuICAgICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLlNFTEVDVCxcclxuICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgaWRGaWVsZDogXCJ2YWx1ZVwiLFxyXG4gICAgICAgICAgICB2YWx1ZUZpZWxkOiAndmFsdWUnLFxyXG4gICAgICAgICAgICB0ZXh0RmllbGQ6ICd0ZXh0JyxcclxuICAgICAgICAgICAgZGF0YTogW1xyXG4gICAgICAgICAgICAgIC8vIHsgdmFsdWU6IENvbmRpdGlvblR5cGUuVk9BQ1RJT04sIHRleHQ6IHRoaXMubG9jYWxlUGlwZVNlcnZpY2UuaW5zdGFudChcImJpbGxBY3Rpb25cIikgfSxcclxuICAgICAgICAgICAgICAvLyB7IHZhbHVlOiBDb25kaXRpb25UeXBlLkVYUFJFU1NJT04sIHRleHQ6IHRoaXMubG9jYWxlUGlwZS5pbnN0YW50KFwiZXhwcmVzc2lvblwiKSB9LFxyXG4gICAgICAgICAgICAgIHsgdmFsdWU6IENvbmRpdGlvblR5cGUuQ09NUE9ORU5ULCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImNvbW1vbkNvbXBvbmVudFwiKSB9LFxyXG4gICAgICAgICAgICAgIC8vIHsgdmFsdWU6IENvbmRpdGlvblR5cGUuRlVMTF9FWFBSRVNTSU9OLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImZ1bGxFeHByZXNzaW9uXCIpIH0sXHJcbiAgICAgICAgICAgICAgLy8geyB2YWx1ZTogQ29uZGl0aW9uVHlwZS5JTkNSRU1FTlRBTF9FWFBSRVNTSU9OLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImluY3JlbWVudGFsRXhwcmVzc2lvblwiKSB9LFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsaWRhdG9yczogW1xyXG4gICAgICAgICAgICB7IHR5cGU6ICdyZXF1aXJlZCcsIG1lc3NhZ2VyOiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcInR5cGVNdXN0Tm90QmVOdWxsXCIpIH0sXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB2YWxpZGF0b3JzOiBbXHJcbiAgICAgICAgICB7IHR5cGU6ICdyZXF1aXJlZCcgfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBDb25kaXRpb25UeXBlLCByb3dEYXRhOiBhbnksIHJvd0luZGV4OiBhbnkpID0+IHtcclxuICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25kaXRpb25UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLmluc3RhbnQoXCJjb21tb25Db21wb25lbnRcIik7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uZGl0aW9uVHlwZS5FWFBSRVNTSU9OOlxyXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImV4cHJlc3Npb25cIik7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgQ29uZGl0aW9uVHlwZS5GVUxMX0VYUFJFU1NJT046XHJcbiAgICAgICAgICAgIC8vICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS5pbnN0YW50KFwiZnVsbEV4cHJlc3Npb25cIik7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgQ29uZGl0aW9uVHlwZS5JTkNSRU1FTlRBTF9FWFBSRVNTSU9OOlxyXG4gICAgICAgICAgICAvLyAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImluY3JlbWVudGFsRXhwcmVzc2lvblwiKTtcclxuICAgICAgICAgICAgY2FzZSBDb25kaXRpb25UeXBlLlZPQUNUSU9OOlxyXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImJpbGxBY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFwiVW5rbm93blwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGZpZWxkOiBcImRpc3BsYXllZENvbnRlbnRcIiwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS5pbnN0YW50KFwiY29udGVudFwiKSwgd2lkdGg6IDIwMCxcclxuICAgICAgICBlZGl0b3I6IHtcclxuICAgICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLklOUFVUR1JPVVAsXHJcbiAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGdyb3VwVGV4dDogdGhpcy5ncm91cEljb24sXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xpY2tIYW5kbGU6IChlOiB7IGluc3RhbmNlLCBmb3JtLCBmb3JtQ29udHJvbCwgJGV2ZW50IH0pID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnNlbGVjdENvbnRlbnQoZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsZWFyOiAoZTogeyBpbnN0YW5jZSwgZm9ybSwgZm9ybUNvbnRyb2wsICRldmVudCB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jbGVhckNvbnRlbnQoZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsaWRhdG9yczogW1xyXG4gICAgICAgICAgICB7IHR5cGU6ICdyZXF1aXJlZCcsIG1lc3NhZ2VyOiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImNvbnRlbnRNdXN0Tm90QmVOdWxsXCIpIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcclxuICAgICAgICAgIHsgdHlwZTogJ3JlcXVpcmVkJyB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBmaWVsZDogJ3JlbWFya3MnLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLmluc3RhbnQoXCJkZXNjcmlwdGlvblwiKSwgd2lkdGg6IDIwMCxcclxuICAgICAgICBlZGl0b3I6IHtcclxuICAgICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLlRFWFRBUkVBLCBvcHRpb25zOiB7fSxcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHsgZmllbGQ6IG51bGwsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcIm9wZXJhdGlvblwiKSwgd2lkdGg6IDI1MCwgdGVtcGxhdGU6IHRoaXMuZGdPcENlbGwsIGhhbGlnbjogJ2NlbnRlcicsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGJlZm9yZUVkaXQgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ0JlZm9yZSBFZGl0JywgYXJncyk7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBiZWdpbkVkaXQocGFyYW06IHsgcm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW46IGFueSwgZ3JpZEluc3RhbmNlOiBEYXRhZ3JpZENvbXBvbmVudCB9KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQmVnaW4gRWRpdCcsIHBhcmFtKTtcclxuICAgIHRoaXMuZWRpdGluZ1Jvd0lkID0gcGFyYW0ucm93RGF0YS5pZDtcclxuICAgIGNvbnN0IGVkaXRvcnMgPSBwYXJhbS5ncmlkSW5zdGFuY2UuZ2V0RWRpdG9ycygpO1xyXG4gICAgY29uc3Qgc2VsZWN0ID0gZWRpdG9yc1swXTtcclxuICAgIHNlbGVjdC5pbnN0YW5jZS5mb3JtQ29udHJvbC52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKCh2YWwpID0+IHtcclxuICAgICAgaWYgKHNlbGVjdC5pbnN0YW5jZS5kci5mb3JtLmJpbmRpbmdEYXRhLnR5cGUgIT0gdmFsKSB7XHJcbiAgICAgICAgc2VsZWN0Lmluc3RhbmNlLmdyb3VwLmJpbmRpbmdEYXRhLmRpc3BsYXllZENvbnRlbnQgPSBudWxsO1xyXG4gICAgICAgIHNlbGVjdC5pbnN0YW5jZS5ncm91cC5jb250cm9scy5kaXNwbGF5ZWRDb250ZW50LnNldFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgICBzZWxlY3QuaW5zdGFuY2UuZ3JvdXAuYmluZGluZ0RhdGEucmVtYXJrcyA9IG51bGw7XHJcbiAgICAgICAgc2VsZWN0Lmluc3RhbmNlLmdyb3VwLmNvbnRyb2xzLnJlbWFya3Muc2V0VmFsdWUobnVsbCk7XHJcbiAgICAgICAgc2VsZWN0Lmluc3RhbmNlLmRyLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZnRlckVkaXQgPSAocm93SW5kZXgsIHJvd0RhdGE6IElDb25kaXRpb25FbnRpdHk0RGcsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChyb3dEYXRhLmNvbXBvbmVudCAmJiByb3dEYXRhLmNvbXBvbmVudC5jb21wTWV0YWRhdGFJZCkge1xyXG4gICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHJvd0RhdGEuZXhwcmVzc2lvbiAmJiByb3dEYXRhLmV4cHJlc3Npb24uZXhwckNvbnRlbnQpIHtcclxuICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcImV2ZW50Um91dGVyQ29uZGl0aW9uc0NvbnRlbnRDYW50QmVFbXB0eVwiKSk7XHJcbiAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmRFZGl0KC4uLmFyZ3MpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdFbmQgRWRpdCcsIGFyZ3MpO1xyXG4gICAgdGhpcy5lZGl0aW5nUm93SWQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgY2FuY2VsRWRpdGVkKC4uLmFyZ3MpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCflj5bmtojnvJbovpEnLCBhcmdzKTtcclxuICAgIHRoaXMuZWRpdGluZ1Jvd0lkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjb25maWdFeHByZXNzaW9uRXhwZW5kRnVuY3MoKSB7XHJcbiAgICAvLyBsZXQgY2hhbmdlRGV0YWlsczogVmFyRW50aXR5ID1cclxuICAgIC8vIHtcclxuICAgIC8vICAga2V5OiBcImNoYW5nZURldGFpbHNcIixcclxuICAgIC8vICAgbmFtZTogXCLkuJrliqHlrp7kvZPlj5jmm7Tpm4bliJfooahcIixcclxuICAgIC8vICAgZGVzY3JpcHRpb246IFwi5Lia5Yqh5a6e5L2T5Y+Y5pu06ZuG5YiX6KGoXCJcclxuICAgIC8vIH1cclxuICAgIC8vIHRoaXMuZXhwci5hZGRDb250ZXh0KGNoYW5nZURldGFpbHMpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXJ0Q29uZGl0aW9uQ29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5TdGFydENvbmRpdGlvbikge1xyXG4gICAgICByZXR1cm4gJ++8iOW3suiuvue9ru+8iSc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ++8iOacquiuvue9ru+8iSc7XHJcbiAgfVxyXG59Il19