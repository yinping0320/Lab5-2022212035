/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, EventEmitter, Inject, Input, LOCALE_ID, Optional, Output, TemplateRef, ViewChild } from '@angular/core';
import { DatagridComponent } from '@farris/ui-datagrid';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
import { DisplayInfor, OtherAssignActivityNodeInfo } from './other-assign-activity-node-info';
import { DialogComponent } from '@farris/ui-dialog';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
export class AssignScopeComponent {
    /**
     * @param {?} uistate
     * @param {?} message
     * @param {?} exprService
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(uistate, message, exprService, cdr, localeId, resources, localePipe) {
        this.uistate = uistate;
        this.message = message;
        this.exprService = exprService;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.items = new Array();
        this.listItems = new Array();
        this.modalConfig = {
            title: this.localePipe.transform('component.assignScope.assignScopeList'),
            width: 600,
            height: 520,
            showButtons: true
        };
        this.cols = [
            { title: this.localePipe.transform('component.assignScope.name'), field: 'name', width: 80 },
            { title: 'ID', field: 'activityDefinitionId', width: 100 },
            { title: this.localePipe.transform('component.assignScope.required'), field: 'required', width: 50,
                editor: {
                    type: EditorTypes.SWITCH,
                    options: {}
                },
                formatter: { type: 'boolean', options: { trueText: this.localePipe.transform('component.assignScope.yes'), falseText: this.localePipe.transform('component.assignScope.no') } },
                validators: [
                    { type: 'required', messager: '必填' }
                ]
            },
            { title: this.localePipe.transform('component.assignScope.condition'), field: 'condition', width: 70,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            console.log('clear', e);
                        })
                    }
                }
            }
        ];
        this.nodeCols = [
            { title: this.localePipe.transform('component.assignScope.name'), field: 'Name', width: 100, filter: true },
            { title: 'ID', field: 'Id', width: 100, filter: true },
        ];
        // otherAssignActivities = new Array();
        this.otherAssignActivityNodeInfos = new Array();
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set value(data) {
        if (data && data.length > 0) {
            // this.otherAssignActivities = [...data];
            data.forEach((/**
             * @param {?} data1
             * @return {?}
             */
            data1 => {
                /** @type {?} */
                let otherAssignActivityNodeInfo = new OtherAssignActivityNodeInfo(data1.activityDefinitionId, data1.condition ? data1.condition.Value : data1.condition, data1.required);
                this.otherAssignActivityNodeInfos.push(otherAssignActivityNodeInfo);
            }));
            this.otherAssignActivityNodeInfos.forEach((/**
             * @param {?} other
             * @return {?}
             */
            other => {
                /** @type {?} */
                let displayInfo = new DisplayInfor(null, other.activityDefinitionId);
                displayInfo.required = other.required;
                if (other.condition) {
                    displayInfo.condition = other.condition.Value;
                }
                // displayInfo.name = this.items.find(item => item.Id === displayInfo.activityDefinitionId).Name;
                this.listItems.push(displayInfo);
            }));
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.location) {
            this.location = this.editorParams.location;
        }
        /** @type {?} */
        let activities = new Array();
        if (this.location === 'startActivity') {
            activities = [...this.uistate.userActList.filter((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.Id !== this.uistate.propertyData.Id
                    && a.AssignmentStrategy === 'ASSIGN'
                    && a.AssignPerformerConfig
                    && a.AssignPerformerConfig.Operator === 'procInstCreator'))];
        }
        else {
            activities = [...this.uistate.userActList.filter((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.Id !== this.uistate.propertyData.Id && a.AssignmentStrategy === 'ASSIGN'))];
        }
        if (this.otherAssignActivityNodeInfos && this.otherAssignActivityNodeInfos.length > 0) {
            for (const other of this.otherAssignActivityNodeInfos) {
                /** @type {?} */
                const activity = activities.find((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.Id === other.activityDefinitionId));
                if (activity) {
                    this.items = this.items.concat([activity]);
                }
            }
            for (const activity of activities) {
                if (this.items.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.Id === activity.Id)) === -1) {
                    this.items = this.items.concat([activity]);
                }
            }
        }
        else {
            this.items = activities;
        }
        this.listItems.forEach((/**
         * @param {?} listItem
         * @return {?}
         */
        listItem => {
            listItem.name = this.items.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item.Id === listItem.activityDefinitionId)).Name;
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.otherAssignActivityNodeInfos && this.otherAssignActivityNodeInfos.length > 0) {
            for (const other of this.otherAssignActivityNodeInfos) {
                this.grid.checkRow(other.activityDefinitionId);
            }
        }
    }
    /**
     * @return {?}
     */
    delete() {
        this.grid.endCellEdit();
        if (this.grid.selectedRow && this.grid.selectedRow.data) {
            /** @type {?} */
            const i = this.listItems.findIndex((/**
             * @param {?} d
             * @return {?}
             */
            d => d.activityDefinitionId === this.grid.selectedRow.data.activityDefinitionId));
            this.listItems.splice(i, 1);
            this.grid.loadData(this.listItems);
        }
        else {
            this.message.info(this.localePipe.transform('component.assignScope.deleteRow'));
        }
    }
    /**
     * @return {?}
     */
    moveUp() {
        if (!this.curActivity) {
            this.message.info(this.localePipe.transform('component.assignScope.curActivity'));
            return;
        }
        /** @type {?} */
        const curCmpId = this.curActivity.activityDefinitionId;
        /** @type {?} */
        const i = this.listItems.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.activityDefinitionId === curCmpId));
        if (i === 0) {
            return;
        }
        this.swapArray(this.listItems, i, i - 1);
        this.grid.loadData(this.listItems);
        this.grid.selectRow(curCmpId, true);
        // const selectedRow = this.grid.selectedRow;
        // debugger;
        // if (!selectedRow) {
        //   this.message.info('尚未选中行');
        //   return;
        // }
        // if (selectedRow.index === 0) {
        //   return;
        // }
        // this.swapArray(this.items, selectedRow.index, selectedRow.index - 1);
        // this.grid.loadData(this.items);
        // this.grid.selectRow(selectedRow.id, true);
    }
    /**
     * @return {?}
     */
    moveDown() {
        if (!this.curActivity) {
            this.message.info(this.localePipe.transform('component.assignScope.curActivity'));
            return;
        }
        /** @type {?} */
        const curCmpId = this.curActivity.activityDefinitionId;
        /** @type {?} */
        const i = this.listItems.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.activityDefinitionId === curCmpId));
        if (i === this.listItems.length - 1) {
            return;
        }
        this.swapArray(this.listItems, i, i + 1);
        this.grid.loadData(this.listItems);
        this.grid.selectRow(curCmpId, true);
        // const selectedRow = this.grid.selectedRow;
        // if (!selectedRow) {
        //   this.message.info('尚未选中行');
        //   return;
        // }
        // if (selectedRow.index === this.items.length - 1) {
        //   return;
        // }
        // this.swapArray(this.items, selectedRow.index, selectedRow.index + 1);
        // this.grid.loadData(this.items);
        // this.grid.selectRow(selectedRow.id, true);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    selectionChange(data) {
        this.curActivity = data.data;
    }
    /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    swapArray(arr, i1, i2) {
        arr[i1] = arr.splice(i2, 1, arr[i1])[0];
        return arr;
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.otherAssignActivityNodeInfos = new Array();
        for (const item of this.listItems) {
            this.otherAssignActivityNodeInfos.push(new OtherAssignActivityNodeInfo(item.activityDefinitionId, item.condition, item.required));
        }
        /** @type {?} */
        const object = { value: this.otherAssignActivityNodeInfos, parameters: null };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @return {?}
     */
    actionsSelect() {
        /** @type {?} */
        const selections = this.actionsTable1.checkeds;
        if (selections && selections.length > 0) {
            selections.forEach((/**
             * @param {?} action
             * @return {?}
             */
            action => {
                /** @type {?} */
                let item = new DisplayInfor(action.data.Name, action.data.Id);
                /** @type {?} */
                const index = this.listItems.findIndex((/**
                 * @param {?} act
                 * @return {?}
                 */
                act => act.activityDefinitionId === action.data.Id));
                if (index > -1) {
                    this.listItems.splice(index, 1);
                }
                this.listItems.push(item);
            }));
            this.grid.loadData(this.listItems);
        }
        // 2023-6-13 关闭前清空已选数据
        this.actionsTable1.clearCheckeds(true);
        this.actionsDialog1.close();
    }
    /**
     * @return {?}
     */
    SelectCancel() {
        // 2023-6-13 关闭前清空已选数据
        this.actionsTable1.clearCheckeds(true);
        this.actionsDialog1.close();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    editConditon(e) {
        /** @type {?} */
        let context = new Array();
        // if(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage')) {
        //   context.push(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage'));
        // }
        // this.expr.clearContext();
        if (this.uistate.schemas.length > 0) {
            for (const schema of this.uistate.schemas) {
                this.exprService.addSchema('Schema', schema);
            }
            if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.uistate.schemas[0].entityTypes[0];
                this.exprService.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        context = this.uistate.addContext(context);
        if (this.uistate.subActivityContext.length > 0) {
            for (const variable of this.uistate.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.uistate.activityComponentContext.length > 0) {
            for (const variable of this.uistate.activityComponentContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.exprService.addContext(v);
            }
        }
        this.exprService.setEditPattern(ExprEditMode.Conditional);
        this.exprService.addExpressionText(e.instance.value);
        this.exprService.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        (cond) => {
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.exprService.exprEntity.contextEntities = this.exprService.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
}
AssignScopeComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-assign-scope',
                template: "<div class=\"f-page\">\r\n  <section class=\"f-page-main d-flex flex-column\">\r\n    <farris-section class=\"pt-0 f-section-grid f-section-in-managelist\" mainTitle=\"{{'component.assignScope.set'|wfLocale}}\" [enableAccordion]=\"''\"\r\n      [enableMaximize]=\"false\" [fill]=\"true\">\r\n      <ng-template farrisSectionToolbar>\r\n        <button class=\"btn btn-secondary mr-2\" (click)=\"actionsDialog1.show()\">{{'component.assignScope.add'|wfLocale}}</button>\r\n        <button class=\"btn btn-secondary mr-2\" (click)=\"delete()\">{{'component.assignScope.delete'|wfLocale}}</button>\r\n        <button class=\"btn btn-secondary mr-2\" (click)=\"moveUp()\">{{'component.assignScope.moveUp'|wfLocale}}</button>\r\n        <button class=\"btn btn-secondary\" (click)=\"moveDown()\">{{'component.assignScope.moveDown'|wfLocale}}</button>\r\n      </ng-template>\r\n      <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n        <farris-datagrid class=\"f-component-grid\" [columns]=\"cols\" [data]=\"listItems\" #grid [idField]=\"'activityDefinitionId'\" [showLineNumber]=\"true\"\r\n          [striped]=\"true\" [multiSelect]=\"true\" [editMode]=\"'cell'\"\r\n          [checkOnSelect]=\"true\" [selectOnCheck]=\"true\"  [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\"\r\n          (selectChanged)=\"selectionChange($event)\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </farris-section>\r\n  </section>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3\" (click)=\"clickCancel()\">{{'component.assignScope.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.assignScope.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-sm btn-default px-3\" (click)=\"SelectCancel()\">{{'component.approvelItems.clickCancel' | wfLocale}}</button>\r\n  <button class=\"btn btn-sm btn-primary px-3\" (click)=\"actionsSelect()\">{{'component.approvelItems.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n<farris-dialog #actionsDialog1 [buttons]=\"buttonRef\" [width]=\"700\" [height]=\"520\" title='\u8282\u70B9\u5217\u8868'>\r\n  <!-- 2023-6-1 \u89E3\u51B3\u5BA1\u6279\u52A8\u4F5C\u5F39\u7A97\u53CC\u6EDA\u52A8\u6761\u7684\u95EE\u9898 -->\r\n  <div class=\"f-utils-fill-flex-column farris-overflow-y-hidden h-100\" style=\"margin-left: 8px;margin-right: 8px;\">\r\n    <farris-datagrid #actionsTable1 [columns]=\"nodeCols\" [data]=\"items\"\r\n      [idField]=\"'Id'\" [fit]=\"true\" [fitColumns]=\"true\" [pagination]='false' \r\n      [showCheckbox]=\"true\" [multiSelect]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\" [showAllCheckbox]=\"true\" [striped]=\"true\">\r\n    </farris-datagrid>\r\n  </div>\r\n</farris-dialog>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
AssignScopeComponent.ctorParameters = () => [
    { type: ProcessDesignerUIState },
    { type: MessagerService },
    { type: ExpressionService },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
AssignScopeComponent.propDecorators = {
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    grid: [{ type: ViewChild, args: ['grid',] }],
    actionsTable1: [{ type: ViewChild, args: ['actionsTable1',] }],
    actionsDialog1: [{ type: ViewChild, args: ['actionsDialog1',] }],
    editorParams: [{ type: Input }],
    value: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    AssignScopeComponent.prototype.closeModal;
    /** @type {?} */
    AssignScopeComponent.prototype.submitModal;
    /** @type {?} */
    AssignScopeComponent.prototype.modalFooter;
    /** @type {?} */
    AssignScopeComponent.prototype.grid;
    /** @type {?} */
    AssignScopeComponent.prototype.actionsTable1;
    /** @type {?} */
    AssignScopeComponent.prototype.actionsDialog1;
    /** @type {?} */
    AssignScopeComponent.prototype.editorParams;
    /** @type {?} */
    AssignScopeComponent.prototype.location;
    /** @type {?} */
    AssignScopeComponent.prototype.items;
    /** @type {?} */
    AssignScopeComponent.prototype.listItems;
    /** @type {?} */
    AssignScopeComponent.prototype.modalConfig;
    /** @type {?} */
    AssignScopeComponent.prototype.cols;
    /** @type {?} */
    AssignScopeComponent.prototype.nodeCols;
    /** @type {?} */
    AssignScopeComponent.prototype.otherAssignActivityNodeInfos;
    /** @type {?} */
    AssignScopeComponent.prototype.curActivity;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.exprService;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    AssignScopeComponent.prototype.localePipe;
}
export class AssignScopeConverter {
    /**
     * @param {?} uistate
     * @param {?} localePipe
     */
    constructor(uistate, localePipe) {
        this.uistate = uistate;
        this.localePipe = localePipe;
        this.actList = new Array();
        this.actList = [...this.uistate.userActList.filter((/**
             * @param {?} a
             * @return {?}
             */
            a => a.AssignmentStrategy === 'ASSIGN'))];
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data && data.length > 0) {
            return this.localePipe.transform("component.assignScope.set");
        }
        else {
            return this.localePipe.transform("component.assignScope.notSet");
        }
    }
}
if (false) {
    /** @type {?} */
    AssignScopeConverter.prototype.actList;
    /**
     * @type {?}
     * @private
     */
    AssignScopeConverter.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    AssignScopeConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduLXNjb3BlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvYXNzaWduLXNjb3BlL2Fzc2lnbi1zY29wZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBaUIsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBVSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdEssT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFeEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUVoRyxPQUFPLEVBQUUsWUFBWSxFQUFFLDJCQUEyQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDOUYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBYSxNQUFNLHFCQUFxQixDQUFDO0FBVS9GLE1BQU0sT0FBTyxvQkFBb0I7Ozs7Ozs7Ozs7SUFvRi9CLFlBQ1UsT0FBK0IsRUFDL0IsT0FBd0IsRUFDeEIsV0FBOEIsRUFDbEIsR0FBc0IsRUFDZixRQUFnQixFQUNSLFNBQWMsRUFDN0IsVUFBd0I7UUFOcEMsWUFBTyxHQUFQLE9BQU8sQ0FBd0I7UUFDL0IsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFDeEIsZ0JBQVcsR0FBWCxXQUFXLENBQW1CO1FBQ2xCLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ2YsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNSLGNBQVMsR0FBVCxTQUFTLENBQUs7UUFDN0IsZUFBVSxHQUFWLFVBQVUsQ0FBYztRQXpGcEMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDckMsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBTXZDLGlCQUFZLEdBQVEsRUFBRSxDQUFDO1FBc0JoQyxVQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUVwQixjQUFTLEdBQUcsSUFBSSxLQUFLLEVBQWdCLENBQUM7UUFFdEMsZ0JBQVcsR0FBRztZQUNaLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQztZQUN6RSxLQUFLLEVBQUUsR0FBRztZQUNWLE1BQU0sRUFBRSxHQUFHO1lBQ1gsV0FBVyxFQUFFLElBQUk7U0FDbEIsQ0FBQztRQUVGLFNBQUksR0FBRztZQUNMLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO1lBQzNGLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsc0JBQXNCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBQztZQUN6RCxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLEVBQUU7Z0JBQ2hHLE1BQU0sRUFBRTtvQkFDTixJQUFJLEVBQUUsV0FBVyxDQUFDLE1BQU07b0JBQ3hCLE9BQU8sRUFBRSxFQUFFO2lCQUNaO2dCQUNELFNBQVMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDJCQUEyQixDQUFDLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDBCQUEwQixDQUFDLEVBQUUsRUFBRTtnQkFDL0ssVUFBVSxFQUFFO29CQUNWLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO2lCQUNyQzthQUNGO1lBQ0QsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsaUNBQWlDLENBQUMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUNsRyxNQUFNLEVBQUU7b0JBQ04sSUFBSSxFQUFFLGFBQWE7b0JBQ25CLE9BQU8sRUFBRTt3QkFDUCxTQUFTLEVBQUUsc0NBQXNDO3dCQUNqRCxRQUFRLEVBQUUsS0FBSzt3QkFDZixXQUFXOzs7O3dCQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7NEJBQ2pCLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7NEJBQ2pFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ3ZCLENBQUMsQ0FBQTt3QkFDRCxLQUFLOzs7O3dCQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7NEJBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7d0JBQzFCLENBQUMsQ0FBQTtxQkFDRjtpQkFDRjthQUNGO1NBQ0YsQ0FBQztRQUVGLGFBQVEsR0FBRztZQUNULEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7WUFDM0csRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO1NBQ3ZELENBQUE7O1FBSUQsaUNBQTRCLEdBQUcsSUFBSSxLQUFLLEVBQStCLENBQUM7UUFhdEUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksWUFBWSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1RSxDQUFDOzs7OztJQXBGRixJQUFhLEtBQUssQ0FBQyxJQUFJO1FBQ3JCLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzNCLDBDQUEwQztZQUMxQyxJQUFJLENBQUMsT0FBTzs7OztZQUFDLEtBQUssQ0FBQyxFQUFFOztvQkFDZiwyQkFBMkIsR0FBRyxJQUFJLDJCQUEyQixDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDO2dCQUN4SyxJQUFJLENBQUMsNEJBQTRCLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUM7WUFDdEUsQ0FBQyxFQUFFLENBQUM7WUFDSixJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTzs7OztZQUFDLEtBQUssQ0FBQyxFQUFFOztvQkFDNUMsV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLElBQUksRUFBQyxLQUFLLENBQUMsb0JBQW9CLENBQUM7Z0JBQ25FLFdBQVcsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztnQkFDdEMsSUFBRyxLQUFLLENBQUMsU0FBUyxFQUFDO29CQUNqQixXQUFXLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO2lCQUMvQztnQkFDRCxpR0FBaUc7Z0JBQ2pHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ25DLENBQUMsRUFBRSxDQUFDO1NBQ0w7SUFDSCxDQUFDOzs7O0lBcUVELFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO1NBQzVDOztZQUNHLFVBQVUsR0FBRyxJQUFJLEtBQUssRUFBRTtRQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssZUFBZSxFQUFFO1lBQ3JDLFVBQVUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTTs7OztnQkFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRTt1QkFDdEYsQ0FBQyxDQUFDLGtCQUFrQixLQUFLLFFBQVE7dUJBQ2pDLENBQUMsQ0FBQyxxQkFBcUI7dUJBQ3ZCLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLEtBQUssaUJBQWlCLEVBQUMsQ0FBQyxDQUFDO1NBQy9EO2FBQU07WUFDTCxVQUFVLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU07Ozs7Z0JBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsa0JBQWtCLEtBQUssUUFBUSxFQUFDLENBQUMsQ0FBQztTQUNwSTtRQUNELElBQUksSUFBSSxDQUFDLDRCQUE0QixJQUFJLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3JGLEtBQUssTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLDRCQUE0QixFQUFFOztzQkFDL0MsUUFBUSxHQUFHLFVBQVUsQ0FBQyxJQUFJOzs7O2dCQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsb0JBQW9CLEVBQUM7Z0JBQzFFLElBQUksUUFBUSxFQUFFO29CQUNaLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2lCQUM1QzthQUNGO1lBQ0QsS0FBSyxNQUFNLFFBQVEsSUFBSSxVQUFVLEVBQUU7Z0JBQ2pDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTOzs7O2dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxRQUFRLENBQUMsRUFBRSxFQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7b0JBQ2hFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2lCQUM1QzthQUNGO1NBQ0Y7YUFBTTtZQUNMLElBQUksQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDO1NBQ3pCO1FBRUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPOzs7O1FBQUMsUUFBUSxDQUFDLEVBQUU7WUFDaEMsUUFBUSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUk7Ozs7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssUUFBUSxDQUFDLG9CQUFvQixFQUFDLENBQUMsSUFBSSxDQUFDO1FBQzFGLENBQUMsRUFBQyxDQUFBO0lBQ0osQ0FBQzs7OztJQUdELGVBQWU7UUFDYixJQUFJLElBQUksQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsNEJBQTRCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNyRixLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtnQkFDckQsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7YUFDaEQ7U0FDRjtJQUNILENBQUM7Ozs7SUFFRCxNQUFNO1FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN4QixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRTs7a0JBQ2pELENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVM7Ozs7WUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUM7WUFDbkgsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUNwQzthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDO1NBQ2pGO0lBQ0gsQ0FBQzs7OztJQUVELE1BQU07UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDLENBQUM7WUFDbEYsT0FBTztTQUNSOztjQUNLLFFBQVEsR0FBVyxJQUFJLENBQUMsV0FBVyxDQUFDLG9CQUFvQjs7Y0FDeEQsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUzs7OztRQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixLQUFLLFFBQVEsRUFBQztRQUM1RSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDWCxPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUV6QyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRXBDLDZDQUE2QztRQUM3QyxZQUFZO1FBQ1osc0JBQXNCO1FBQ3RCLGdDQUFnQztRQUNoQyxZQUFZO1FBQ1osSUFBSTtRQUNKLGlDQUFpQztRQUNqQyxZQUFZO1FBQ1osSUFBSTtRQUNKLHdFQUF3RTtRQUV4RSxrQ0FBa0M7UUFDbEMsNkNBQTZDO0lBQy9DLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsbUNBQW1DLENBQUMsQ0FBQyxDQUFDO1lBQ2xGLE9BQU87U0FDUjs7Y0FDSyxRQUFRLEdBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxvQkFBb0I7O2NBQ3hELENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVM7Ozs7UUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsS0FBSyxRQUFRLEVBQUM7UUFDNUUsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ25DLE9BQU87U0FDUjtRQUNELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRXpDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFHcEMsNkNBQTZDO1FBQzdDLHNCQUFzQjtRQUN0QixnQ0FBZ0M7UUFDaEMsWUFBWTtRQUNaLElBQUk7UUFDSixxREFBcUQ7UUFDckQsWUFBWTtRQUNaLElBQUk7UUFDSix3RUFBd0U7UUFFeEUsa0NBQWtDO1FBQ2xDLDZDQUE2QztJQUMvQyxDQUFDOzs7OztJQUVELGVBQWUsQ0FBQyxJQUFTO1FBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUMvQixDQUFDOzs7Ozs7OztJQUVPLFNBQVMsQ0FBQyxHQUFlLEVBQUUsRUFBVSxFQUFFLEVBQVU7UUFDdkQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7Ozs7SUFFRCxPQUFPO1FBQ0wsSUFBSSxDQUFDLDRCQUE0QixHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFDaEQsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2pDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsSUFBSSwyQkFBMkIsQ0FDcEUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDOUQ7O2NBQ0ssTUFBTSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFO1FBQzdFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7Ozs7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN6QixDQUFDOzs7O0lBRUQsYUFBYTs7Y0FDTCxVQUFVLEdBQVUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRO1FBQ3JELElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3ZDLFVBQVUsQ0FBQyxPQUFPOzs7O1lBQUMsTUFBTSxDQUFDLEVBQUU7O29CQUN0QixJQUFJLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7O3NCQUN2RCxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTOzs7O2dCQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLG9CQUFvQixLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFDO2dCQUMxRixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRTtvQkFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQ2pDO2dCQUNELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVCLENBQUMsRUFBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQ3BDO1FBQ0Qsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDOUIsQ0FBQzs7OztJQUVELFlBQVk7UUFDVixzQkFBc0I7UUFDdEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM5QixDQUFDOzs7OztJQUVELFlBQVksQ0FBQyxDQUFNOztZQUNiLE9BQU8sR0FBRyxJQUFJLEtBQUssRUFBYTtRQUNwQyxvRkFBb0Y7UUFDcEYsK0ZBQStGO1FBQy9GLElBQUk7UUFDSiw0QkFBNEI7UUFDNUIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ25DLEtBQUssTUFBTSxNQUFNLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7Z0JBQ3pDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQzthQUM5QztZQUNELElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOztzQkFDbkYsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQzFELFVBQVUsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQzdDO1NBQ0Y7UUFDRCxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0MsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDOUMsS0FBSyxNQUFNLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixFQUFFO2dCQUN0RCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUk7Ozs7Z0JBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLFFBQVEsQ0FBQyxHQUFHLEVBQUMsRUFBRTtvQkFDOUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDeEI7YUFDRjtTQUNGO1FBQ0QsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLHdCQUF3QixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDcEQsS0FBSyxNQUFNLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLHdCQUF3QixFQUFFO2dCQUM1RCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUk7Ozs7Z0JBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLFFBQVEsQ0FBQyxHQUFHLEVBQUMsRUFBRTtvQkFDOUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDeEI7YUFDRjtTQUNGO1FBQ0QsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN0QixLQUFLLE1BQU0sQ0FBQyxJQUFJLE9BQU8sRUFBRTtnQkFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDaEM7U0FDRjtRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxJQUFJOzs7O1FBQUMsQ0FBQyxJQUFZLEVBQUUsRUFBRTtZQUN2RCxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QixDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM5Qix3QkFBd0I7WUFDeEIsSUFBRyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNOzs7O2dCQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTs7OztnQkFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBQyxFQUFDLENBQUM7YUFDNUk7UUFDSCxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7OztZQXZURixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGtCQUFrQjtnQkFDNUIsODZGQUE0QztnQkFFNUMsU0FBUyxFQUFFO29CQUNSLFlBQVk7aUJBQ2Q7O2FBQ0Y7Ozs7WUFmUSxzQkFBc0I7WUFGdEIsZUFBZTtZQVFELGlCQUFpQjtZQVpoQixpQkFBaUIsdUJBOEdwQyxRQUFRO3lDQUNSLE1BQU0sU0FBQyxTQUFTOzRDQUNoQixNQUFNLFNBQUMsaUJBQWlCO1lBekdELFlBQVksdUJBMEduQyxRQUFROzs7eUJBekZWLE1BQU07MEJBQ04sTUFBTTswQkFDTixTQUFTLFNBQUMsa0JBQWtCO21CQUM1QixTQUFTLFNBQUMsTUFBTTs0QkFDaEIsU0FBUyxTQUFDLGVBQWU7NkJBQ3pCLFNBQVMsU0FBQyxnQkFBZ0I7MkJBRTFCLEtBQUs7b0JBQ0wsS0FBSzs7OztJQVJOLDBDQUErQzs7SUFDL0MsMkNBQWdEOztJQUNoRCwyQ0FBNkQ7O0lBQzdELG9DQUEyQzs7SUFDM0MsNkNBQTZEOztJQUM3RCw4Q0FBNkQ7O0lBRTdELDRDQUFnQzs7SUFvQmhDLHdDQUFTOztJQUVULHFDQUFvQjs7SUFFcEIseUNBQXNDOztJQUV0QywyQ0FLRTs7SUFFRixvQ0E2QkU7O0lBRUYsd0NBR0M7O0lBSUQsNERBQXdFOztJQUV4RSwyQ0FBWTs7Ozs7SUFHVix1Q0FBdUM7Ozs7O0lBQ3ZDLHVDQUFnQzs7Ozs7SUFDaEMsMkNBQXNDOzs7OztJQUN0QyxtQ0FBMEM7Ozs7O0lBQzFDLHdDQUEyQzs7Ozs7SUFDM0MseUNBQWlEOzs7OztJQUNqRCwwQ0FBNEM7O0FBd05oRCxNQUFNLE9BQU8sb0JBQW9COzs7OztJQUUvQixZQUNVLE9BQStCLEVBQy9CLFVBQXdCO1FBRHhCLFlBQU8sR0FBUCxPQUFPLENBQXdCO1FBQy9CLGVBQVUsR0FBVixVQUFVLENBQWM7UUFIbEMsWUFBTyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFLcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTTs7OztZQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixLQUFLLFFBQVEsRUFBQyxDQUFDLENBQUM7SUFDOUYsQ0FBQzs7Ozs7SUFFRCxTQUFTLENBQUMsSUFBSTtRQUNaLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzNCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQztTQUMvRDthQUFNO1lBQ0wsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1NBQ2xFO0lBRUgsQ0FBQztDQUNGOzs7SUFoQkMsdUNBQXNCOzs7OztJQUVwQix1Q0FBdUM7Ozs7O0lBQ3ZDLDBDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbnB1dCwgTE9DQUxFX0lELCBPbkluaXQsIE9wdGlvbmFsLCBPdXRwdXQsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgUGlja2VkUmVzdWx0IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuaW1wb3J0IHsgRGlzcGxheUluZm9yLCBPdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm8gfSBmcm9tICcuL290aGVyLWFzc2lnbi1hY3Rpdml0eS1ub2RlLWluZm8nO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IEVkaXRvclR5cGVzIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZC1lZGl0b3JzJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlLCBFeHByZXNzaW9uU2VydmljZSwgSW5qZWN0ZWRUeXBlLCBWYXJFbnRpdHkgfSBmcm9tICdAZ3NwLXN2Yy9leHByZXNzaW9uJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWFzc2lnbi1zY29wZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Fzc2lnbi1zY29wZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYXNzaWduLXNjb3BlLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEFzc2lnblNjb3BlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZ3JpZCcpIGdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2FjdGlvbnNUYWJsZTEnKSBhY3Rpb25zVGFibGUxOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdhY3Rpb25zRGlhbG9nMScpIGFjdGlvbnNEaWFsb2cxOiBEaWFsb2dDb21wb25lbnQ7XHJcblxyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQElucHV0KCkgc2V0IHZhbHVlKGRhdGEpIHtcclxuICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyB0aGlzLm90aGVyQXNzaWduQWN0aXZpdGllcyA9IFsuLi5kYXRhXTtcclxuICAgICAgZGF0YS5mb3JFYWNoKGRhdGExID0+e1xyXG4gICAgICAgIGxldCBvdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm8gPSBuZXcgT3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvKGRhdGExLmFjdGl2aXR5RGVmaW5pdGlvbklkLCBkYXRhMS5jb25kaXRpb24gPyBkYXRhMS5jb25kaXRpb24uVmFsdWUgOiBkYXRhMS5jb25kaXRpb24sIGRhdGExLnJlcXVpcmVkKTtcclxuICAgICAgICB0aGlzLm90aGVyQXNzaWduQWN0aXZpdHlOb2RlSW5mb3MucHVzaChvdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm8pO1xyXG4gICAgICB9ICk7XHJcbiAgICAgIHRoaXMub3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvcy5mb3JFYWNoKG90aGVyID0+e1xyXG4gICAgICAgIGxldCBkaXNwbGF5SW5mbyA9IG5ldyBEaXNwbGF5SW5mb3IobnVsbCxvdGhlci5hY3Rpdml0eURlZmluaXRpb25JZCk7XHJcbiAgICAgICAgZGlzcGxheUluZm8ucmVxdWlyZWQgPSBvdGhlci5yZXF1aXJlZDtcclxuICAgICAgICBpZihvdGhlci5jb25kaXRpb24pe1xyXG4gICAgICAgICAgZGlzcGxheUluZm8uY29uZGl0aW9uID0gb3RoZXIuY29uZGl0aW9uLlZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkaXNwbGF5SW5mby5uYW1lID0gdGhpcy5pdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5JZCA9PT0gZGlzcGxheUluZm8uYWN0aXZpdHlEZWZpbml0aW9uSWQpLk5hbWU7XHJcbiAgICAgICAgdGhpcy5saXN0SXRlbXMucHVzaChkaXNwbGF5SW5mbyk7XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvY2F0aW9uO1xyXG5cclxuICBpdGVtcyA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBsaXN0SXRlbXMgPSBuZXcgQXJyYXk8RGlzcGxheUluZm9yPigpO1xyXG5cclxuICBtb2RhbENvbmZpZyA9IHtcclxuICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduU2NvcGUuYXNzaWduU2NvcGVMaXN0JyksXHJcbiAgICB3aWR0aDogNjAwLFxyXG4gICAgaGVpZ2h0OiA1MjAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIGNvbHMgPSBbXHJcbiAgICB7IHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduU2NvcGUubmFtZScpLCBmaWVsZDogJ25hbWUnLCB3aWR0aDogODB9LFxyXG4gICAgeyB0aXRsZTogJ0lEJywgZmllbGQ6ICdhY3Rpdml0eURlZmluaXRpb25JZCcsIHdpZHRoOiAxMDB9LFxyXG4gICAgeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblNjb3BlLnJlcXVpcmVkJyksIGZpZWxkOiAncmVxdWlyZWQnLCB3aWR0aDogNTAsXHJcbiAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLlNXSVRDSCxcclxuICAgICAgICBvcHRpb25zOiB7fVxyXG4gICAgICB9LFxyXG4gICAgICBmb3JtYXR0ZXI6IHsgdHlwZTogJ2Jvb2xlYW4nLCBvcHRpb25zOiB7IHRydWVUZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduU2NvcGUueWVzJyksIGZhbHNlVGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblNjb3BlLm5vJykgfSB9LFxyXG4gICAgICB2YWxpZGF0b3JzOiBbXHJcbiAgICAgICAgeyB0eXBlOiAncmVxdWlyZWQnLCBtZXNzYWdlcjogJ+W/heWhqycgfVxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblNjb3BlLmNvbmRpdGlvbicpLCBmaWVsZDogJ2NvbmRpdGlvbicsIHdpZHRoOiA3MCxcclxuICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgdHlwZTogJ2lucHV0LWdyb3VwJyxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgICAgdGhpcy5lZGl0Q29uZGl0b24oZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGVhcicsIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIG5vZGVDb2xzID0gW1xyXG4gICAgeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblNjb3BlLm5hbWUnKSwgZmllbGQ6ICdOYW1lJywgd2lkdGg6IDEwMCwgZmlsdGVyOiB0cnVlIH0sXHJcbiAgICB7IHRpdGxlOiAnSUQnLCBmaWVsZDogJ0lkJywgd2lkdGg6IDEwMCwgZmlsdGVyOiB0cnVlIH0sXHJcbiAgXVxyXG5cclxuICAvLyBvdGhlckFzc2lnbkFjdGl2aXRpZXMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgb3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvcyA9IG5ldyBBcnJheTxPdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm8+KCk7XHJcblxyXG4gIGN1ckFjdGl2aXR5O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdWlzdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBleHByU2VydmljZTogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHtcclxuICAgICAgdGhpcy5sb2NhdGlvbiA9IHRoaXMuZWRpdG9yUGFyYW1zLmxvY2F0aW9uO1xyXG4gICAgfVxyXG4gICAgbGV0IGFjdGl2aXRpZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmICh0aGlzLmxvY2F0aW9uID09PSAnc3RhcnRBY3Rpdml0eScpIHtcclxuICAgICAgYWN0aXZpdGllcyA9IFsuLi50aGlzLnVpc3RhdGUudXNlckFjdExpc3QuZmlsdGVyKGEgPT4gYS5JZCAhPT0gdGhpcy51aXN0YXRlLnByb3BlcnR5RGF0YS5JZFxyXG4gICAgICAgICYmIGEuQXNzaWdubWVudFN0cmF0ZWd5ID09PSAnQVNTSUdOJ1xyXG4gICAgICAgICYmIGEuQXNzaWduUGVyZm9ybWVyQ29uZmlnXHJcbiAgICAgICAgJiYgYS5Bc3NpZ25QZXJmb3JtZXJDb25maWcuT3BlcmF0b3IgPT09ICdwcm9jSW5zdENyZWF0b3InKV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3Rpdml0aWVzID0gWy4uLnRoaXMudWlzdGF0ZS51c2VyQWN0TGlzdC5maWx0ZXIoYSA9PiBhLklkICE9PSB0aGlzLnVpc3RhdGUucHJvcGVydHlEYXRhLklkICYmIGEuQXNzaWdubWVudFN0cmF0ZWd5ID09PSAnQVNTSUdOJyldO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMub3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvcyAmJiB0aGlzLm90aGVyQXNzaWduQWN0aXZpdHlOb2RlSW5mb3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IG90aGVyIG9mIHRoaXMub3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvcykge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gYWN0aXZpdGllcy5maW5kKGEgPT4gYS5JZCA9PT0gb3RoZXIuYWN0aXZpdHlEZWZpbml0aW9uSWQpO1xyXG4gICAgICAgIGlmIChhY3Rpdml0eSkge1xyXG4gICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuY29uY2F0KFthY3Rpdml0eV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmb3IgKGNvbnN0IGFjdGl2aXR5IG9mIGFjdGl2aXRpZXMpIHtcclxuICAgICAgICBpZiAodGhpcy5pdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLklkID09PSBhY3Rpdml0eS5JZCkgPT09IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoW2FjdGl2aXR5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLml0ZW1zID0gYWN0aXZpdGllcztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxpc3RJdGVtcy5mb3JFYWNoKGxpc3RJdGVtID0+IHtcclxuICAgICAgbGlzdEl0ZW0ubmFtZSA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uSWQgPT09IGxpc3RJdGVtLmFjdGl2aXR5RGVmaW5pdGlvbklkKS5OYW1lO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5vdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm9zICYmIHRoaXMub3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgb3RoZXIgb2YgdGhpcy5vdGhlckFzc2lnbkFjdGl2aXR5Tm9kZUluZm9zKSB7XHJcbiAgICAgICAgdGhpcy5ncmlkLmNoZWNrUm93KG90aGVyLmFjdGl2aXR5RGVmaW5pdGlvbklkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93ICYmIHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLmxpc3RJdGVtcy5maW5kSW5kZXgoZCA9PiBkLmFjdGl2aXR5RGVmaW5pdGlvbklkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5hY3Rpdml0eURlZmluaXRpb25JZCk7XHJcbiAgICAgIHRoaXMubGlzdEl0ZW1zLnNwbGljZShpLCAxKTtcclxuICAgICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMubGlzdEl0ZW1zKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5hc3NpZ25TY29wZS5kZWxldGVSb3cnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlVXAoKSB7XHJcbiAgICBpZiAoIXRoaXMuY3VyQWN0aXZpdHkpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblNjb3BlLmN1ckFjdGl2aXR5JykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXJDbXBJZDogc3RyaW5nID0gdGhpcy5jdXJBY3Rpdml0eS5hY3Rpdml0eURlZmluaXRpb25JZDtcclxuICAgIGNvbnN0IGkgPSB0aGlzLmxpc3RJdGVtcy5maW5kSW5kZXgoYyA9PiBjLmFjdGl2aXR5RGVmaW5pdGlvbklkID09PSBjdXJDbXBJZCk7XHJcbiAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnN3YXBBcnJheSh0aGlzLmxpc3RJdGVtcywgaSwgaSAtIDEpO1xyXG5cclxuICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLmxpc3RJdGVtcyk7XHJcbiAgICB0aGlzLmdyaWQuc2VsZWN0Um93KGN1ckNtcElkLCB0cnVlKTtcclxuXHJcbiAgICAvLyBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdztcclxuICAgIC8vIGRlYnVnZ2VyO1xyXG4gICAgLy8gaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgLy8gICB0aGlzLm1lc3NhZ2UuaW5mbygn5bCa5pyq6YCJ5Lit6KGMJyk7XHJcbiAgICAvLyAgIHJldHVybjtcclxuICAgIC8vIH1cclxuICAgIC8vIGlmIChzZWxlY3RlZFJvdy5pbmRleCA9PT0gMCkge1xyXG4gICAgLy8gICByZXR1cm47XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0aGlzLnN3YXBBcnJheSh0aGlzLml0ZW1zLCBzZWxlY3RlZFJvdy5pbmRleCwgc2VsZWN0ZWRSb3cuaW5kZXggLSAxKTtcclxuXHJcbiAgICAvLyB0aGlzLmdyaWQubG9hZERhdGEodGhpcy5pdGVtcyk7XHJcbiAgICAvLyB0aGlzLmdyaWQuc2VsZWN0Um93KHNlbGVjdGVkUm93LmlkLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIG1vdmVEb3duKCkge1xyXG4gICAgaWYgKCF0aGlzLmN1ckFjdGl2aXR5KSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5hc3NpZ25TY29wZS5jdXJBY3Rpdml0eScpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY3VyQ21wSWQ6IHN0cmluZyA9IHRoaXMuY3VyQWN0aXZpdHkuYWN0aXZpdHlEZWZpbml0aW9uSWQ7XHJcbiAgICBjb25zdCBpID0gdGhpcy5saXN0SXRlbXMuZmluZEluZGV4KGMgPT4gYy5hY3Rpdml0eURlZmluaXRpb25JZCA9PT0gY3VyQ21wSWQpO1xyXG4gICAgaWYgKGkgPT09IHRoaXMubGlzdEl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zd2FwQXJyYXkodGhpcy5saXN0SXRlbXMsIGksIGkgKyAxKTtcclxuXHJcbiAgICB0aGlzLmdyaWQubG9hZERhdGEodGhpcy5saXN0SXRlbXMpO1xyXG4gICAgdGhpcy5ncmlkLnNlbGVjdFJvdyhjdXJDbXBJZCwgdHJ1ZSk7XHJcblxyXG5cclxuICAgIC8vIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5ncmlkLnNlbGVjdGVkUm93O1xyXG4gICAgLy8gaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgLy8gICB0aGlzLm1lc3NhZ2UuaW5mbygn5bCa5pyq6YCJ5Lit6KGMJyk7XHJcbiAgICAvLyAgIHJldHVybjtcclxuICAgIC8vIH1cclxuICAgIC8vIGlmIChzZWxlY3RlZFJvdy5pbmRleCA9PT0gdGhpcy5pdGVtcy5sZW5ndGggLSAxKSB7XHJcbiAgICAvLyAgIHJldHVybjtcclxuICAgIC8vIH1cclxuICAgIC8vIHRoaXMuc3dhcEFycmF5KHRoaXMuaXRlbXMsIHNlbGVjdGVkUm93LmluZGV4LCBzZWxlY3RlZFJvdy5pbmRleCArIDEpO1xyXG5cclxuICAgIC8vIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLml0ZW1zKTtcclxuICAgIC8vIHRoaXMuZ3JpZC5zZWxlY3RSb3coc2VsZWN0ZWRSb3cuaWQsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0aW9uQ2hhbmdlKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5jdXJBY3Rpdml0eSA9IGRhdGEuZGF0YTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3dhcEFycmF5KGFycjogQXJyYXk8YW55PiwgaTE6IG51bWJlciwgaTI6IG51bWJlcik6IEFycmF5PGFueT4ge1xyXG4gICAgYXJyW2kxXSA9IGFyci5zcGxpY2UoaTIsIDEsIGFycltpMV0pWzBdO1xyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICB0aGlzLm90aGVyQXNzaWduQWN0aXZpdHlOb2RlSW5mb3MgPSBuZXcgQXJyYXkoKTtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmxpc3RJdGVtcykge1xyXG4gICAgICB0aGlzLm90aGVyQXNzaWduQWN0aXZpdHlOb2RlSW5mb3MucHVzaChuZXcgT3RoZXJBc3NpZ25BY3Rpdml0eU5vZGVJbmZvKFxyXG4gICAgICAgIGl0ZW0uYWN0aXZpdHlEZWZpbml0aW9uSWQsIGl0ZW0uY29uZGl0aW9uLCBpdGVtLnJlcXVpcmVkKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvYmplY3QgPSB7IHZhbHVlOiB0aGlzLm90aGVyQXNzaWduQWN0aXZpdHlOb2RlSW5mb3MsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgYWN0aW9uc1NlbGVjdCgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbnM6IGFueVtdID0gdGhpcy5hY3Rpb25zVGFibGUxLmNoZWNrZWRzO1xyXG4gICAgaWYgKHNlbGVjdGlvbnMgJiYgc2VsZWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHNlbGVjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xyXG4gICAgICAgIGxldCBpdGVtID0gbmV3IERpc3BsYXlJbmZvcihhY3Rpb24uZGF0YS5OYW1lLCBhY3Rpb24uZGF0YS5JZCk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3RJdGVtcy5maW5kSW5kZXgoYWN0ID0+IGFjdC5hY3Rpdml0eURlZmluaXRpb25JZCA9PT0gYWN0aW9uLmRhdGEuSWQpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLmxpc3RJdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RJdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMubGlzdEl0ZW1zKTtcclxuICAgIH1cclxuICAgIC8vIDIwMjMtNi0xMyDlhbPpl63liY3muIXnqbrlt7LpgInmlbDmja5cclxuICAgIHRoaXMuYWN0aW9uc1RhYmxlMS5jbGVhckNoZWNrZWRzKHRydWUpO1xyXG4gICAgdGhpcy5hY3Rpb25zRGlhbG9nMS5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgU2VsZWN0Q2FuY2VsKCkge1xyXG4gICAgLy8gMjAyMy02LTEzIOWFs+mXreWJjea4heepuuW3sumAieaVsOaNrlxyXG4gICAgdGhpcy5hY3Rpb25zVGFibGUxLmNsZWFyQ2hlY2tlZHModHJ1ZSk7XHJcbiAgICB0aGlzLmFjdGlvbnNEaWFsb2cxLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBlZGl0Q29uZGl0b24oZTogYW55KSB7XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBBcnJheTxWYXJFbnRpdHk+KCk7XHJcbiAgICAvLyBpZih0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmluZCh4ID0+IHgua2V5ID09PSAnQ3VycmVudExhbmd1YWdlJykpIHtcclxuICAgIC8vICAgY29udGV4dC5wdXNoKHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maW5kKHggPT4geC5rZXkgPT09ICdDdXJyZW50TGFuZ3VhZ2UnKSk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBpZiAodGhpcy51aXN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLnVpc3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwclNlcnZpY2UuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMudWlzdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwclNlcnZpY2UuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb250ZXh0ID0gdGhpcy51aXN0YXRlLmFkZENvbnRleHQoY29udGV4dCk7XHJcbiAgICBpZiAodGhpcy51aXN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy51aXN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51aXN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy51aXN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByU2VydmljZS5hZGRDb250ZXh0KHYpO1xyXG4gICAgICB9XHJcbiAgICB9IFxyXG4gICAgdGhpcy5leHByU2VydmljZS5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQ29uZGl0aW9uYWwpOyAgIFxyXG4gICAgdGhpcy5leHByU2VydmljZS5hZGRFeHByZXNzaW9uVGV4dChlLmluc3RhbmNlLnZhbHVlKTtcclxuICAgIHRoaXMuZXhwclNlcnZpY2UuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoY29uZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoY29uZCk7XHJcbiAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHJTZXJ2aWNlLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByU2VydmljZS5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoeCA9PiAhY29udGV4dC5zb21lKHkgPT4geS5rZXkgPT09IHgua2V5KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBc3NpZ25TY29wZUNvbnZlcnRlciBpbXBsZW1lbnRzIFR5cGVDb252ZXJ0ZXIge1xyXG4gIGFjdExpc3QgPSBuZXcgQXJyYXkoKTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdWlzdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgICApIHtcclxuICAgIHRoaXMuYWN0TGlzdCA9IFsuLi50aGlzLnVpc3RhdGUudXNlckFjdExpc3QuZmlsdGVyKGEgPT4gYS5Bc3NpZ25tZW50U3RyYXRlZ3kgPT09ICdBU1NJR04nKV07XHJcbiAgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YSk6IHN0cmluZyB7XHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQuYXNzaWduU2NvcGUuc2V0XCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQuYXNzaWduU2NvcGUubm90U2V0XCIpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn1cclxuIl19