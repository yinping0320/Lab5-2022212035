/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, TemplateRef, Output, EventEmitter, ComponentFactoryResolver, Injector, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { MessageNotice } from '../message-notice';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDesignerUIState } from '../../../app/process-designer.uistate';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { MessageReceiver } from '../message-receiver';
import { BsModalService } from '@farris/ui-modal';
import { ActivityListComponent } from '../../activity-list/activity-list.component';
import { HttpService } from '@ecp-caf/caf-common';
import { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';
import { PositionPerformerComponent } from '../../performer/views/position-performer/position-performer.component';
import { SmsMessageTemplateComponent } from '../../sms-message-template/sms-message-template.component';
import { SmsMessageTemplate } from '../../sms-message-template/sms-message-template';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../i18n/pipe/wf-process-editor-locale.pipe';
export class MessageNoticeEditComponent {
    /**
     * @param {?} message
     * @param {?} uistate
     * @param {?} expr
     * @param {?} resolver
     * @param {?} injector
     * @param {?} modalService
     * @param {?} designerUIState
     * @param {?} http
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(message, uistate, expr, resolver, injector, modalService, designerUIState, http, cdr, localeId, resources, localePipe) {
        this.message = message;
        this.uistate = uistate;
        this.expr = expr;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.designerUIState = designerUIState;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.groupIcon2 = '<i class="f-icon f-icon-lookup"></i>';
        this.exprAble = false;
        this.closeEmitter = new EventEmitter();
        this.submitEmitter = new EventEmitter();
        this._location = 'activity';
        this.messageNotice = new MessageNotice();
        this.typeGroup = this.uistate.messageChannels.map((/**
         * @param {?} m
         * @return {?}
         */
        m => ({ value: m.code, name: m.name })));
        this.receiverVariables = [
            { value: 'workItemParticipant', name: this.localePipe.transform('component.messageNoticeEdit.workItemParticipant') }
        ];
        this.variableOrgTypes = [
            { name: this.localePipe.transform('component.messageNoticeEdit.sys'), value: 'Sys' },
            { name: this.localePipe.transform('component.messageNoticeEdit.administrative_organization'), value: 'Administrative_organization' }
        ];
        this.sendTimes = [];
        this.bindingData = {};
        this.receiverTypes = [
            { value: 'processParticipant', text: this.localePipe.transform('component.MessageNotice.processParticipant') },
            { value: 'variableParticipant', text: this.localePipe.transform('component.MessageNotice.variableParticipant') },
            { value: 'userParticipant', text: this.localePipe.transform('component.MessageNotice.userParticipant') },
            { value: 'positionParticipant', text: this.localePipe.transform('component.MessageNotice.positionParticipant') },
        ];
        this.processParticipantTypes = [
            { value: 'procInstCreator', text: this.localePipe.transform('component.MessageNotice.procInstCreator') },
            { value: 'workItemParticipant', text: this.localePipe.transform('component.MessageNotice.workItemParticipant') },
            { value: 'activityExecutorParticipant', text: this.localePipe.transform('component.MessageNotice.activityExecutorParticipant') },
        ];
        this.userTypeButtonNeedShow = false; // 用户类型单选按钮是否需要显示
        this.hasSmsTemplate = false;
        this.disableAdd = (/**
         * @return {?}
         */
        () => {
            if (this.messageNotice.sendTime === 'WORKITEM_CREATED' && this.messageNotice.receivers.filter((/**
             * @param {?} r
             * @return {?}
             */
            r => r.type)).length > 0) {
                return true;
            }
            else {
                return false;
            }
        });
        // 由于需要实现国际化，此处定义不能提取；
        this.processSendTime = [
            { value: 'PROCESSINSTANCE_COMPLETED', text: this.localePipe.transform('component.MessageNotice.procComplete') },
            { value: 'PROCESSINSTANCE_ABORTED', text: this.localePipe.transform('component.MessageNotice.procAborted') },
            { value: 'PROCESSINSTANCE_ROLLBACK', text: this.localePipe.transform('component.MessageNotice.procRollBack') }
        ];
        this.ReceiverType = [
            { value: 'processParticipant', text: this.localePipe.transform('component.MessageNotice.processParticipant') },
            { value: 'variableParticipant', text: this.localePipe.transform('component.MessageNotice.variableParticipant') },
            { value: 'userParticipant', text: this.localePipe.transform('component.MessageNotice.userParticipant') },
            { value: 'positionParticipant', text: this.localePipe.transform('component.MessageNotice.positionParticipant') },
        ];
        this.activitySendTime = [
            { value: 'WORKITEM_CREATED', text: this.localePipe.transform('component.MessageNotice.workCreated') },
            { value: 'ACTIVITY_COMPLETED', text: this.localePipe.transform('component.MessageNotice.actComplete') },
            { value: 'ACTIVITY_ABORTED', text: this.localePipe.transform('component.MessageNotice.actAborted') },
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @param {?} l
     * @return {?}
     */
    set location(l) {
        this._location = l;
        if (this.location !== 'activity') {
            this.processParticipantTypes = [
                { value: 'procInstCreator', text: this.localePipe.transform('component.messageNoticeEdit.procInstCreator') },
                { value: 'activityExecutorParticipant', text: this.localePipe.transform('component.messageNoticeEdit.activityExecutorParticipant') }
            ];
        }
    }
    /**
     * @return {?}
     */
    get location() {
        return this._location;
    }
    /**
     * @param {?} m
     * @return {?}
     */
    set value(m) {
        // 深拷贝处理messageNotice 2022-12-1
        /** @type {?} */
        const jsonMessageNotice = JSON.stringify(Object.assign({}, m));
        this.messageNotice = JSON.parse(jsonMessageNotice);
        this.exprAble = this.messageNotice.subject.charAt(0) === '{';
        if (this.hasSmsMessage(this.messageNotice.sendType)) {
            this.hasSmsTemplate = true;
            if (!this.messageNotice.smsMessageTemplate) {
                this.messageNotice.smsMessageTemplate = new SmsMessageTemplate();
            }
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this.messageNotice;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.location === 'activity') {
            this.sendTimes = this.activitySendTime;
            if (this.messageNotice.sendTime === this.activitySendTime[0].value) {
                this.receiverTypes = [
                    { value: 'processParticipant', text: this.localePipe.transform('component.messageNoticeEdit.processParticipant') }
                ];
                this.processParticipantTypes = [
                    { value: 'workItemParticipant', text: this.localePipe.transform('component.messageNoticeEdit.workItemReceiveParticipant') }
                ];
            }
            else {
                this.receiverTypes = [
                    { value: 'processParticipant', text: this.localePipe.transform('component.messageNoticeEdit.processParticipant') },
                    { value: 'variableParticipant', text: this.localePipe.transform('component.messageNoticeEdit.variableParticipant') },
                    { value: 'userParticipant', text: this.localePipe.transform('component.messageNoticeEdit.userParticipant') },
                    { value: 'positionParticipant', text: this.localePipe.transform('component.messageNoticeEdit.positionParticipant') },
                ];
                this.processParticipantTypes = [
                    { value: 'procInstCreator', text: this.localePipe.transform('component.messageNoticeEdit.procInstCreator') },
                    { value: 'activityExecutorParticipant', text: this.localePipe.transform('component.messageNoticeEdit.activityExecutorParticipant') }
                ];
            }
        }
        else {
            this.sendTimes = this.processSendTime;
        }
        /** @type {?} */
        const url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';
        this.http.get(url).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            this.hasAdminOrg = data;
            // inSuite场景，变量参与者场景下显示用户类型
            if (this.designerUIState.scene === 'inSuite') {
                this.userTypeButtonNeedShow = true;
            }
            else {
                this.userTypeButtonNeedShow = data;
            }
            if (!this.userTypeButtonNeedShow) {
                this.variableOrgTypes = [{ name: this.localePipe.transform('component.messageNoticeEdit.sys'), value: 'Sys' }];
            }
        }));
    }
    /**
     * @return {?}
     */
    clickOK() {
        if (this.SmsTemplate) {
            this.SmsTemplate.endGridEdit();
        }
        this.setReceiver();
        if (this.hasSmsTemplate) {
            this.messageNotice.smsMessageTemplate = this.SmsTemplate.smsMessageTemplate;
            if (this.messageNotice.smsMessageTemplate.smsMessageVariables && this.messageNotice.smsMessageTemplate.smsMessageVariables.length > 0) {
                this.messageNotice.smsMessageTemplate.smsMessageVariables = this.messageNotice.smsMessageTemplate.smsMessageVariables.filter((/**
                 * @param {?} variable
                 * @return {?}
                 */
                variable => variable.code));
            }
        }
        else {
            this.messageNotice.smsMessageTemplate = null;
        }
        if (this.validator()) {
            this.submitEmitter.emit(this.messageNotice);
        }
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeEmitter.emit();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    sendTimeChange(data) {
        if (data.data.value === this.activitySendTime[0].value) {
            /** @type {?} */
            const messageReceiver = new MessageReceiver();
            messageReceiver.type = 'processParticipant';
            messageReceiver.processParticipant = 'workItemParticipant';
            this.messageNotice.receivers = [messageReceiver];
            this.receiverTypes = [
                { value: 'processParticipant', text: this.localePipe.transform('component.messageNoticeEdit.processParticipant') }
            ];
            this.processParticipantTypes = [
                { value: 'workItemParticipant', text: this.localePipe.transform('component.messageNoticeEdit.workItemParticipant') }
            ];
        }
        else {
            for (const r of this.messageNotice.receivers) {
                if (r.type === 'processParticipant' && r.processParticipant === 'workItemParticipant') {
                    r.processParticipant = 'procInstCreator';
                }
            }
            this.receiverTypes = [
                { value: 'processParticipant', text: this.localePipe.transform('component.messageNoticeEdit.processParticipant') },
                { value: 'variableParticipant', text: this.localePipe.transform('component.messageNoticeEdit.variableParticipant') },
                { value: 'userParticipant', text: this.localePipe.transform('component.messageNoticeEdit.userParticipant') },
                { value: 'positionParticipant', text: this.localePipe.transform('component.messageNoticeEdit.positionParticipant') },
            ];
            this.processParticipantTypes = [
                { value: 'procInstCreator', text: this.localePipe.transform('component.messageNoticeEdit.procInstCreator') },
                { value: 'activityExecutorParticipant', text: this.localePipe.transform('component.messageNoticeEdit.activityExecutorParticipant') }
            ];
        }
    }
    /**
     * @param {?} sendType
     * @return {?}
     */
    sendTypeChange(sendType) {
        if (this.hasSmsMessage(sendType)) {
            this.hasSmsTemplate = true;
            if (!this.messageNotice.smsMessageTemplate) {
                this.messageNotice.smsMessageTemplate = new SmsMessageTemplate();
            }
        }
        else {
            this.hasSmsTemplate = false;
            this.messageNotice.smsMessageTemplate = null;
        }
    }
    /**
     * @private
     * @param {?} sendType
     * @return {?}
     */
    hasSmsMessage(sendType) {
        if (sendType) {
            /** @type {?} */
            const sendTypeList = sendType.split(',');
            /** @type {?} */
            let messageChannel = sendTypeList.find((/**
             * @param {?} val
             * @return {?}
             */
            val => this.uistate.messageChannels.find((/**
             * @param {?} channel
             * @return {?}
             */
            channel => channel.code == val && channel.channelType == 'Sms'))));
            if (messageChannel) {
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    usersSelect(data) {
        this.messageNotice.receivers[this.index].userIds = '';
        this.messageNotice.receivers[this.index].userNames = '';
        if (data && data.length > 0) {
            /** @type {?} */
            let userIds = '';
            for (const d of data) {
                userIds += d.id + ',';
            }
            if (userIds) {
                this.messageNotice.receivers[this.index].userIds = userIds.substring(0, userIds.length - 1);
            }
            /** @type {?} */
            let userNames = '';
            for (const d of data) {
                userNames += d.name + ',';
            }
            if (userNames) {
                this.messageNotice.receivers[this.index].userNames = userNames.substring(0, userNames.length - 1);
            }
        }
    }
    /**
     * @param {?} index
     * @return {?}
     */
    clearUsers(index) {
        this.messageNotice.receivers[index].userIds = '';
        this.messageNotice.receivers[index].userNames = '';
    }
    /**
     * @param {?} index
     * @return {?}
     */
    clearPosition(index) {
        this.messageNotice.receivers[index].positionId = '';
        this.messageNotice.receivers[index].positionName = '';
        this.messageNotice.receivers[index].positionType = '';
        this.messageNotice.receivers[index].orgId = '';
        this.messageNotice.receivers[index].orgType = '';
    }
    /**
     * @param {?} index
     * @return {?}
     */
    clearActivityExecutor(index) {
        this.messageNotice.receivers[index].activityDefId = '';
        this.messageNotice.receivers[index].activityDefName = '';
    }
    /**
     * @param {?} index
     * @return {?}
     */
    clearVariableParticipant(index) {
        this.messageNotice.receivers[index].variableParticipant = '';
        this.messageNotice.receivers[index].variableName = '';
    }
    /**
     * @param {?} data
     * @return {?}
     */
    changeValue(data) {
    }
    /**
     * @return {?}
     */
    clear() {
        this.bindingData = {};
    }
    /**
     * @private
     * @return {?}
     */
    setReceiver() {
    }
    /**
     * @private
     * @return {?}
     */
    validator() {
        if (!this.messageNotice.sendType) {
            this.message.info(this.localePipe.transform('component.messageNoticeEdit.sendType'));
            return false;
        }
        //去除消息模板编号校验
        // if (this.hasSmsTemplate) {
        //   if (!this.messageNotice.smsMessageTemplate) {
        //     this.message.info(this.localePipe.transform('component.messageNoticeEdit.smsMessageTemplate'));
        //     return;
        //   }
        //   if (!this.messageNotice.smsMessageTemplate.code) {
        //     this.message.info(this.localePipe.transform('component.messageNoticeEdit.smsMessageTemplateCode'));
        //     return;
        //   }
        // }
        if (this.location !== 'messageActivity' && !this.messageNotice.sendTime) {
            this.message.info(this.localePipe.transform('component.messageNoticeEdit.sendTime'));
            return false;
        }
        if (!this.messageNotice.subject) {
            this.message.info(this.localePipe.transform('component.messageNoticeEdit.subject'));
            return false;
        }
        if (!this.messageNotice.content) {
            this.message.info(this.localePipe.transform('component.messageNoticeEdit.content'));
            return false;
        }
        this.messageNotice.receivers = this.messageNotice.receivers.filter((/**
         * @param {?} r
         * @return {?}
         */
        r => r.type));
        if (!this.messageNotice.receivers || this.messageNotice.receivers.length === 0) {
            this.message.info(this.localePipe.transform('component.messageNoticeEdit.receivers'));
            return false;
        }
        else {
            for (const r of this.messageNotice.receivers) {
                switch (r.type) {
                    case 'processParticipant':
                        if (!r.processParticipant) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.processParticipantNotNull'));
                            return false;
                        }
                        else if (r.processParticipant === 'activityExecutorParticipant' && !r.activityDefId) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.activityDefIdNotNull'));
                            return false;
                        }
                        break;
                    case 'variableParticipant':
                        if (!r.variableParticipant) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.variableParticipantNotNull'));
                            return false;
                        }
                        if (!r.orgType) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.orgType'));
                            return false;
                        }
                        break;
                    case 'userParticipant':
                        if (!r.userIds) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.userIds'));
                            return false;
                        }
                        break;
                    case 'positionParticipant':
                        if (!r.positionId) {
                            this.message.info(this.localePipe.transform('component.messageNoticeEdit.positionId'));
                            return false;
                        }
                        break;
                }
            }
        }
        return true;
    }
    /**
     * @return {?}
     */
    addReceiver() {
        if (this.disableAdd()) {
            return;
        }
        /** @type {?} */
        const receivers = this.messageNotice.receivers.filter((/**
         * @param {?} r
         * @return {?}
         */
        r => r.type));
        if (receivers && receivers.length > 0) {
            /** @type {?} */
            const userParticipant = new MessageReceiver();
            userParticipant.type = 'userParticipant';
            this.messageNotice.receivers = this.messageNotice.receivers.concat([userParticipant]);
        }
        else {
            if (this.location !== 'activity') {
                /** @type {?} */
                const procInstCreator = new MessageReceiver();
                procInstCreator.type = 'processParticipant';
                procInstCreator.processParticipant = 'procInstCreator';
                this.messageNotice.receivers = this.messageNotice.receivers.concat([procInstCreator]);
            }
            else {
                /** @type {?} */
                const workItemParticipant = new MessageReceiver();
                workItemParticipant.type = 'processParticipant';
                workItemParticipant.processParticipant = 'workItemParticipant';
                this.messageNotice.receivers = this.messageNotice.receivers.concat([workItemParticipant]);
            }
        }
    }
    /**
     * @param {?} activityDefId
     * @param {?} index
     * @return {?}
     */
    selectActivityExecutorParticipant(activityDefId, index) {
        /** @type {?} */
        let dialog;
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(ActivityListComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.injector);
        compRef.instance.submitEmitter.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            /** @type {?} */
            const acticity = re.shift();
            this.messageNotice.receivers[index].activityDefId = acticity.id;
            this.messageNotice.receivers[index].activityDefName = acticity.data.Name;
            if (re && re.length > 0) {
                for (const a of re) {
                    /** @type {?} */
                    const receiver = new MessageReceiver();
                    receiver.type = 'processParticipant';
                    receiver.processParticipant = 'activityExecutorParticipant';
                    receiver.activityDefId = a.id;
                    receiver.activityDefName = a.data.Name;
                    this.messageNotice.receivers = this.messageNotice.receivers.concat([receiver]);
                }
            }
            dialog.close();
        }));
        compRef.instance.closeEmitter.subscribe((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            dialog.close();
        }));
        /** @type {?} */
        const modalConfig = {
            title: this.localePipe.transform('component.messageNoticeEdit.activityList'),
            width: 490,
            height: 490,
            showButtons: true,
            buttons: compRef.instance.buttonRef
        };
        dialog = this.modalService.show(compRef, modalConfig);
    }
    /**
     * @param {?} variableParticipant
     * @param {?} index
     * @return {?}
     */
    selectVariableParticipant(variableParticipant, index) {
        /** @type {?} */
        const context = new Array();
        // if(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage')) {
        //   context.push(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage'));
        // }
        // this.expr.clearContext();
        this.expr.setEditPattern(ExprEditMode.Advanced);
        if (this.designerUIState.schemas.length > 0) {
            for (const schema of this.designerUIState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        if (this.designerUIState.participantContext.length > 0) {
            for (const variable of this.designerUIState.participantContext) {
                context.push(variable);
            }
        }
        if (this.designerUIState.processVariableContext.length > 0) {
            for (const variable of this.designerUIState.processVariableContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerUIState.subActivityContext.length > 0) {
            for (const variable of this.designerUIState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        if (variableParticipant) {
            this.expr.addExpressionText(variableParticipant);
        }
        else {
            this.expr.addExpressionText('');
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        (expressioninfo) => {
            this.messageNotice.receivers[index].variableParticipant = expressioninfo;
            this.messageNotice.receivers[index].variableName = this.variableParticipantName(expressioninfo);
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?} receiver
     * @param {?} index
     * @return {?}
     */
    selectUserParticipant(receiver, index) {
        this.index = index;
        this.bindingData = {};
        if (receiver.userIds && receiver.userIds.length > 0) {
            this.bindingData.id = receiver.userIds;
            this.bindingData.name = receiver.userNames;
        }
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.userHelp.showHelp();
        }), 0);
    }
    /**
     * @param {?} receiver
     * @param {?} index
     * @return {?}
     */
    selectPositionParticipant(receiver, index) {
        /** @type {?} */
        let dialog;
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(PositionPerformerComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.injector);
        compRef.instance.showCondition = false;
        compRef.instance.position.performerId = this.messageNotice.receivers[index].positionId;
        compRef.instance.position.performerName = this.messageNotice.receivers[index].positionName;
        compRef.instance.position.positionType = this.messageNotice.receivers[index].positionType;
        compRef.instance.position.orgId = this.messageNotice.receivers[index].orgId;
        compRef.instance.position.orgType = this.messageNotice.receivers[index].orgType;
        if (compRef.instance.position.positionType === '0') {
            compRef.instance.newFilter = { positionType: '0' };
        }
        else {
            compRef.instance.newFilter = { positionType: '1' };
        }
        compRef.instance.submitEmitter.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            if (re.performerId) {
                this.messageNotice.receivers[index].positionId = re.performerId;
                this.messageNotice.receivers[index].positionName = re.performerName;
                this.messageNotice.receivers[index].positionType = re.positionType;
                this.messageNotice.receivers[index].orgId = re.orgId;
                this.messageNotice.receivers[index].orgType = re.orgType;
            }
            dialog.close();
        }));
        compRef.instance.closeEmitter.subscribe((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            dialog.close();
        }));
        /** @type {?} */
        const modalConfig = {
            title: this.localePipe.transform('component.messageNoticeEdit.position'),
            width: 700,
            height: 400,
            showButtons: true,
            buttons: compRef.instance.buttonRef
        };
        dialog = this.modalService.show(compRef, modalConfig);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    titleExpr(data) {
        this.showTitleHelp(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    contentExpr(data) {
        this.showContentHelp(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    showContentHelp(data) {
        /** @type {?} */
        const context = this.showExpr();
        if (this.messageNotice.content && this.messageNotice.content.length > 0) {
            this.expr.addExpressionText(this.messageNotice.content);
        }
        else {
            this.expr.addExpressionText('');
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressionInfo
         * @return {?}
         */
        (expressionInfo) => {
            this.messageNotice.content = expressionInfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    showTitleHelp(data) {
        if (this.messageNotice.subject && this.messageNotice.subject.charAt(0) !== '{') {
            this.messageNotice.subject = '';
        }
        /** @type {?} */
        const context = this.showExpr();
        if (this.messageNotice.subject && this.messageNotice.subject.length > 0) {
            this.expr.addExpressionText(this.messageNotice.subject);
        }
        else {
            this.expr.addExpressionText('');
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressionInfo
         * @return {?}
         */
        (expressionInfo) => {
            this.messageNotice.subject = expressionInfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @return {?}
     */
    showExpr() {
        /** @type {?} */
        const context = new Array();
        // if(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage')) {
        //   context.push(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage'));
        // }
        // this.expr.clearContext();
        if (this.uistate.schemas.length > 0) {
            for (const schema of this.uistate.schemas) {
                // this.expr.addCommonObject(co);
                this.expr.addSchema('Schema', schema);
            }
            if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.uistate.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        if (this.uistate.procInstContext.length > 0) {
            for (const variable of this.uistate.procInstContext) {
                context.push(variable);
                // this.expr.addContext(variable);
            }
        }
        if (this.uistate.subActivityContext.length > 0) {
            for (const variable of this.uistate.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
                // this.expr.addContext(variable);
            }
        }
        if (this.uistate.processVariableContext.length > 0) {
            for (const variable of this.uistate.processVariableContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
                // this.expr.addContext(variable);
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        return context;
    }
    /**
     * @return {?}
     */
    tranExpr() {
        this.messageNotice.subject = '';
    }
    /**
     * @private
     * @param {?} expr
     * @return {?}
     */
    variableParticipantName(expr) {
        for (const c of this.designerUIState.participantContext) {
            if (expr.indexOf(c.key) > -1) {
                return c.name;
            }
        }
        for (const c of this.designerUIState.processVariableContext) {
            if (expr.indexOf(c.key) > -1) {
                return c.name;
            }
        }
        return JSON.parse(expr).expr;
    }
}
MessageNoticeEditComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-message-notice-edit',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n    <section class=\"f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-utils-fill-flex-column h-100\">\r\n        <perfect-scrollbar [config]=\"{}\">\r\n          <form class=\"h-100\">\r\n            <div class=\"f-form-layout farris-form  farris-form-controls-inline f-form-label-sm\">\r\n              <div *ngIf=\"location!=='messageActivity'\" class=\"col-12 col-md-6 mt-3\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-info text-danger\">*</span>\r\n                      <span class=\"farris-label-text\">{{'component.MessageNotice.sendTime'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <farris-combo-list [(ngModel)]=\"messageNotice.sendTime\" [idField]=\"'value'\" [textField]=\"'text'\"\r\n                        [enableClear]=\"false\" [data]=\"sendTimes\" name=\"sendTime\" [editable]=\"false\"\r\n                        (selectChange)=\"sendTimeChange($event)\">\r\n                      </farris-combo-list>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-12 farris-group-auto mt-2\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-info text-danger\">*</span>\r\n                      <span class=\"farris-label-text\">{{'component.messageNoticeEdit.messSendType'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <farris-checkboxgroup #checkboxGroup [(ngModel)]=\"messageNotice.sendType\" name=\"sendType\"\r\n                        [horizontal]=\"true\" [data]=\"typeGroup\" (changeValue)=\"sendTypeChange($event)\">\r\n                      </farris-checkboxgroup>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-8 farris-group-auto mt-2\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-info text-danger\">*</span>\r\n                      <span class=\"farris-label-text\">{{'component.messageNoticeEdit.messSubject'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\" *ngIf=\"!exprAble; else disabled\">\r\n                      <input class=\"form-control\" type=\"text\" value=\"subject\" [(ngModel)]=\"messageNotice.subject\"\r\n                        name=\"subject\" />\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                    <ng-template #disabled>\r\n                      <div class=\"farris-input-wrap ml-1\">\r\n                        <input-group [editable]=\"false\" [enableClear]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                          [(value)]=\"messageNotice.subject\" (clickHandle)=\"titleExpr($event)\">\r\n                        </input-group>\r\n                      </div>\r\n                    </ng-template>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-4 farris-group-auto mt-2\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">{{'component.messageNoticeEdit.enable'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap\">\r\n                      <farris-switch [(ngModel)]=\"exprAble\" name=\"enable\" (click)=\"tranExpr()\"></farris-switch>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-12 farris-group-auto mt-2\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-info text-danger\">*</span>\r\n                      <span class=\"farris-label-text\">{{'component.messageNoticeEdit.messContent'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <input-group [editable]=\"false\" [enableClear]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                        [(value)]=\"messageNotice.content\" (clickHandle)=\"contentExpr($event)\">\r\n                      </input-group>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-12 farris-group-auto mt-2\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-info text-danger\">*</span>\r\n                      <span class=\"farris-label-text\">{{'component.messageNoticeEdit.recipient'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap\">\r\n                      <div class=\"text-right mb-2\">\r\n                        <farris-button [type]=\"'link'\" (click)=\"addReceiver()\" [disabled]=\"disableAdd()\">\r\n                          <span class=\"f-icon f-icon-add\"></span>\r\n                          {{'component.messageNoticeEdit.addReceiver'|wfLocale}}</farris-button>\r\n                      </div>\r\n                      <div *ngFor=\"let receiver of messageNotice.receivers; let i=index\" class=\"col-12 d-flex px-0\">\r\n                        <div class=\"farris-group-wrap col-4 pl-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <farris-combo-list [(ngModel)]=\"receiver.type\" [idField]=\"'value'\" [textField]=\"'text'\"\r\n                                [enableClear]=\"true\" [data]=\"receiverTypes\" [name]=\"'receiverType'+i\"\r\n                                [editable]=\"false\">\r\n                              </farris-combo-list>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"receiver.type==='processParticipant'\" class=\"farris-group-wrap col-4 pl-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <farris-combo-list [(ngModel)]=\"receiver.processParticipant\" [idField]=\"'value'\"\r\n                                [textField]=\"'text'\" [enableClear]=\"false\" [data]=\"processParticipantTypes\"\r\n                                [name]=\"'processParticipantType'+i\" [editable]=\"false\">\r\n                              </farris-combo-list>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div\r\n                          *ngIf=\"receiver.type==='processParticipant' && receiver.processParticipant==='activityExecutorParticipant'\"\r\n                          class=\"farris-group-wrap col-4 px-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                                [enableClear]=\"true\" (clear)=\"clearActivityExecutor(i)\"\r\n                                [(value)]=\"receiver.activityDefName\"\r\n                                (clickHandle)=\"selectActivityExecutorParticipant(receiver.activityDefId, i)\">\r\n                              </input-group>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"receiver.type==='variableParticipant'\" class=\"farris-group-wrap col-5 px-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                                [enableClear]=\"true\" (clear)=\"clearVariableParticipant(i)\"\r\n                                [(value)]=\"receiver.variableName\"\r\n                                (clickHandle)=\"selectVariableParticipant(receiver.variableParticipant, i)\">\r\n                              </input-group>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"receiver.type==='variableParticipant'\" class=\"farris-group-wrap col-3 px-0 pl-3\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <farris-combo-list [(ngModel)]=\"receiver.orgType\" [idField]=\"'value'\" [textField]=\"'name'\"\r\n                                [enableClear]=\"false\" [data]=\"variableOrgTypes\" [name]=\"'variableParticipantOrgType'+i\"\r\n                                [editable]=\"false\">\r\n                              </farris-combo-list>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"receiver.type==='userParticipant'\" class=\"farris-group-wrap col-8 px-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                                [(value)]=\"receiver.userNames\" (clickHandle)=\"selectUserParticipant(receiver, i)\"\r\n                                (clear)=\"clearUsers(i)\">\r\n                              </input-group>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div *ngIf=\"receiver.type==='positionParticipant'\" class=\"farris-group-wrap col-8 px-0\">\r\n                          <div class=\"form-group farris-form-group\">\r\n                            <div class=\"farris-input-wrap\">\r\n                              <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                                [enableClear]=\"true\" (clear)=\"clearPosition(i)\"\r\n                                [value]=\"receiver.positionId?('component.messageNoticeEdit.posi'|wfLocale)+receiver.positionName+'\uFF1B'+(receiver.orgId?(('component.messageNoticeEdit.organization'|wfLocale))+receiver.orgId:''):''\"\r\n                                (clickHandle)=\"selectPositionParticipant(receiver, i)\">\r\n                              </input-group>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <lib-sms-message-template *ngIf=\"hasSmsTemplate\" [smsMessageTemplate]=\"this.messageNotice.smsMessageTemplate\"></lib-sms-message-template>\r\n          </form>\r\n        </perfect-scrollbar>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #footer>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"clickCancel()\">{{'component.messageNoticeEdit.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">{{'component.messageNoticeEdit.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n\r\n\r\n<sys-farris-grid-lookup #userHelp style=\"display: none;\" [singleSelect]=\"false\" [displayTxt]=\"bindingData.name\"\r\n  [pagination]=\"true\" [pageSize]=\"20\" title=\"{{'component.messageNoticeEdit.sys'|wfLocale}}\" [sourceType]=\"'user'\" (afterConfirm)=\"usersSelect($event)\"\r\n  [bindingData]=\"bindingData\" [filter]=\"{notGetCurrentUser:false, notGetStopUser: true}\" [typeMode]=\"1\"\r\n  [required]=\"false\">\r\n</sys-farris-grid-lookup>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [".help-tip{text-align:center;background-color:#bcdbea;border-radius:50%;width:20px;height:20px;font-size:6px;cursor:default}"]
            }] }
];
/** @nocollapse */
MessageNoticeEditComponent.ctorParameters = () => [
    { type: MessagerService },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: BsModalService },
    { type: ProcessDesignerUIState },
    { type: HttpService },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
MessageNoticeEditComponent.propDecorators = {
    footer: [{ type: ViewChild, args: ['footer',] }],
    SmsTemplate: [{ type: ViewChild, args: [SmsMessageTemplateComponent,] }],
    closeEmitter: [{ type: Output }],
    submitEmitter: [{ type: Output }],
    userHelp: [{ type: ViewChild, args: [SysFarrisLookupComponent,] }],
    location: [{ type: Input }],
    value: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    MessageNoticeEditComponent.prototype.groupIcon2;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.exprAble;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.footer;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.SmsTemplate;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.closeEmitter;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.submitEmitter;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.userHelp;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype._location;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.messageNotice;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.typeGroup;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.receiverVariables;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.variableOrgTypes;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.sendTimes;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.receiverVari;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.bindingData;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.index;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.receiverTypes;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.processParticipantTypes;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.userTypeButtonNeedShow;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.hasAdminOrg;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.hasSmsTemplate;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.disableAdd;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.processSendTime;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.ReceiverType;
    /** @type {?} */
    MessageNoticeEditComponent.prototype.activitySendTime;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    MessageNoticeEditComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS1ub3RpY2UtZWRpdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL21lc3NhZ2Utbm90aWNlL21lc3NhZ2Utbm90aWNlLWVkaXQvbWVzc2FnZS1ub3RpY2UtZWRpdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSx3QkFBd0IsRUFBRSxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0wsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUMvRSxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBWSxNQUFNLHFCQUFxQixDQUFDO0FBQzlGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFDcEYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQzlELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHVFQUF1RSxDQUFDO0FBQ25ILE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLDJEQUEyRCxDQUFDO0FBQ3hHLE9BQU8sRUFBRSxrQkFB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QUNyQixpREFBZ0M7O0lBQ2hDLDJDQUFNOztJQUNOLG1EQUtFOztJQUNGLDZEQUlFOztJQUNGLDREQUErQjs7SUFDL0IsaURBQVk7O0lBQ1osb0RBQXVCOztJQXFRdkIsZ0RBTUM7O0lBNFFELHFEQUlFOztJQUNGLGtEQUtFOztJQUNGLHNEQUlFOzs7OztJQW5pQkEsNkNBQWdDOzs7OztJQUNoQyw2Q0FBdUM7Ozs7O0lBQ3ZDLDBDQUErQjs7Ozs7SUFDL0IsOENBQTBDOzs7OztJQUMxQyw4Q0FBMEI7Ozs7O0lBQzFCLGtEQUFvQzs7Ozs7SUFDcEMscURBQStDOzs7OztJQUMvQywwQ0FBeUI7Ozs7O0lBQ3pCLHlDQUEwQzs7Ozs7SUFDMUMsOENBQTJDOzs7OztJQUMzQywrQ0FBaUQ7Ozs7O0lBQ2pELGdEQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RvciwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsLCBJbmplY3QsIExPQ0FMRV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNZXNzYWdlTm90aWNlIH0gZnJvbSAnLi4vbWVzc2FnZS1ub3RpY2UnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBFeHByRWRpdE1vZGUsIEV4cHJlc3Npb25TZXJ2aWNlLCBJbmplY3RlZFR5cGUsIFZhckVudGl0eX0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IE1lc3NhZ2VSZWNlaXZlciB9IGZyb20gJy4uL21lc3NhZ2UtcmVjZWl2ZXInO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUxpc3RDb21wb25lbnQgfSBmcm9tICcuLi8uLi9hY3Rpdml0eS1saXN0L2FjdGl2aXR5LWxpc3QuY29tcG9uZW50JztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgU3lzRmFycmlzTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1zeXMvc3lzbWdyLXVpJztcclxuaW1wb3J0IHsgUG9zaXRpb25QZXJmb3JtZXJDb21wb25lbnQgfSBmcm9tICcuLi8uLi9wZXJmb3JtZXIvdmlld3MvcG9zaXRpb24tcGVyZm9ybWVyL3Bvc2l0aW9uLXBlcmZvcm1lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTbXNNZXNzYWdlVGVtcGxhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi9zbXMtbWVzc2FnZS10ZW1wbGF0ZS9zbXMtbWVzc2FnZS10ZW1wbGF0ZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTbXNNZXNzYWdlVGVtcGxhdGUgfSBmcm9tICcuLi8uLi9zbXMtbWVzc2FnZS10ZW1wbGF0ZS9zbXMtbWVzc2FnZS10ZW1wbGF0ZSc7XHJcbmltcG9ydCB7IFdGX1BST0NFU1NfRURJVE9SX0xBTkdfUkVTT1VSQ0VTIH0gZnJvbSAnLi4vLi4vLi4vaTE4bi9hc3NldHMvbGFuZy5yZXNvdXJjZSc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItbWVzc2FnZS1ub3RpY2UtZWRpdCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL21lc3NhZ2Utbm90aWNlLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL21lc3NhZ2Utbm90aWNlLWVkaXQuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgICBXZkxvY2FsZVBpcGUsXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTWVzc2FnZU5vdGljZUVkaXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBncm91cEljb24yID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JztcclxuICBleHByQWJsZSA9IGZhbHNlO1xyXG4gIEBWaWV3Q2hpbGQoJ2Zvb3RlcicpIGZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKFNtc01lc3NhZ2VUZW1wbGF0ZUNvbXBvbmVudCkgU21zVGVtcGxhdGU6U21zTWVzc2FnZVRlbXBsYXRlQ29tcG9uZW50XHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZUVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8TWVzc2FnZU5vdGljZT4oKTtcclxuICBAVmlld0NoaWxkKFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudCkgdXNlckhlbHA6IFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudDtcclxuXHJcbiAgcHJpdmF0ZSBfbG9jYXRpb246ICdhY3Rpdml0eScgfCAncHJvY2VzcycgfCAnbWVzc2FnZUFjdGl2aXR5JyA9ICdhY3Rpdml0eSc7XHJcbiAgQElucHV0KClcclxuICBzZXQgbG9jYXRpb24obDogJ2FjdGl2aXR5JyB8ICdwcm9jZXNzJyB8ICdtZXNzYWdlQWN0aXZpdHknKSB7XHJcbiAgICB0aGlzLl9sb2NhdGlvbiA9IGw7XHJcbiAgICBpZiAodGhpcy5sb2NhdGlvbiAhPT0gJ2FjdGl2aXR5Jykge1xyXG4gICAgICB0aGlzLnByb2Nlc3NQYXJ0aWNpcGFudFR5cGVzID0gW1xyXG4gICAgICAgIHsgdmFsdWU6ICdwcm9jSW5zdENyZWF0b3InLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucHJvY0luc3RDcmVhdG9yJykgfSxcclxuICAgICAgICB7IHZhbHVlOiAnYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JywgdGV4dDogIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5hY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnKSB9XTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBsb2NhdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9sb2NhdGlvbjtcclxuICB9XHJcblxyXG4gIG1lc3NhZ2VOb3RpY2UgPSBuZXcgTWVzc2FnZU5vdGljZSgpO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKG06IE1lc3NhZ2VOb3RpY2UpIHtcclxuICAgIC8vIOa3seaLt+i0neWkhOeQhm1lc3NhZ2VOb3RpY2UgMjAyMi0xMi0xXHJcbiAgICBjb25zdCBqc29uTWVzc2FnZU5vdGljZSA9IEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oe30sIG0pKTtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZSA9IEpTT04ucGFyc2UoanNvbk1lc3NhZ2VOb3RpY2UpO1xyXG4gICAgdGhpcy5leHByQWJsZSA9IHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0LmNoYXJBdCgwKSA9PT0gJ3snO1xyXG4gICAgaWYgKHRoaXMuaGFzU21zTWVzc2FnZSh0aGlzLm1lc3NhZ2VOb3RpY2Uuc2VuZFR5cGUpKSB7XHJcbiAgICAgIHRoaXMuaGFzU21zVGVtcGxhdGUgPSB0cnVlO1xyXG4gICAgICBpZiAoIXRoaXMubWVzc2FnZU5vdGljZS5zbXNNZXNzYWdlVGVtcGxhdGUpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlID0gbmV3IFNtc01lc3NhZ2VUZW1wbGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlTm90aWNlO1xyXG4gIH1cclxuICB0eXBlR3JvdXAgPSB0aGlzLnVpc3RhdGUubWVzc2FnZUNoYW5uZWxzLm1hcChtID0+ICh7IHZhbHVlOiBtLmNvZGUsIG5hbWU6IG0ubmFtZSB9KSk7XHJcblxyXG4gIHJlY2VpdmVyVmFyaWFibGVzID0gW1xyXG4gICAgeyB2YWx1ZTogJ3dvcmtJdGVtUGFydGljaXBhbnQnLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQud29ya0l0ZW1QYXJ0aWNpcGFudCcpIH1cclxuICBdO1xyXG5cclxuICB2YXJpYWJsZU9yZ1R5cGVzID0gW1xyXG4gICAgeyBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuc3lzJyksIHZhbHVlOiAnU3lzJyB9LFxyXG4gICAgeyBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuYWRtaW5pc3RyYXRpdmVfb3JnYW5pemF0aW9uJyksIHZhbHVlOiAnQWRtaW5pc3RyYXRpdmVfb3JnYW5pemF0aW9uJyB9XHJcbiAgXTtcclxuICBzZW5kVGltZXMgPSBbXTtcclxuICByZWNlaXZlclZhcmk6IHN0cmluZztcclxuICBiaW5kaW5nRGF0YTogeyBpZD8sIG5hbWU/fSA9IHt9O1xyXG4gIGluZGV4O1xyXG4gIHJlY2VpdmVyVHlwZXMgPSBbXHJcbiAgICB7IHZhbHVlOiAncHJvY2Vzc1BhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lk1lc3NhZ2VOb3RpY2UucHJvY2Vzc1BhcnRpY2lwYW50JykgfSxcclxuICAgIHsgdmFsdWU6ICd2YXJpYWJsZVBhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lk1lc3NhZ2VOb3RpY2UudmFyaWFibGVQYXJ0aWNpcGFudCcpIH0sXHJcbiAgICB7IHZhbHVlOiAndXNlclBhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lk1lc3NhZ2VOb3RpY2UudXNlclBhcnRpY2lwYW50JykgfSxcclxuICAgIHsgdmFsdWU6ICdwb3NpdGlvblBhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lk1lc3NhZ2VOb3RpY2UucG9zaXRpb25QYXJ0aWNpcGFudCcpIH0sXHJcbiAgXTtcclxuICBwcm9jZXNzUGFydGljaXBhbnRUeXBlcyA9IFtcclxuICAgIHsgdmFsdWU6ICdwcm9jSW5zdENyZWF0b3InLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5wcm9jSW5zdENyZWF0b3InKSB9LFxyXG4gICAgeyB2YWx1ZTogJ3dvcmtJdGVtUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS53b3JrSXRlbVBhcnRpY2lwYW50JykgfSxcclxuICAgIHsgdmFsdWU6ICdhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5hY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnKSB9LFxyXG4gIF07XHJcbiAgdXNlclR5cGVCdXR0b25OZWVkU2hvdyA9IGZhbHNlOyAvLyDnlKjmiLfnsbvlnovljZXpgInmjInpkq7mmK/lkKbpnIDopoHmmL7npLpcclxuICBoYXNBZG1pbk9yZztcclxuICBoYXNTbXNUZW1wbGF0ZSA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB1aXN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBkZXNpZ25lclVJU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmxvY2F0aW9uID09PSAnYWN0aXZpdHknKSB7XHJcbiAgICAgIHRoaXMuc2VuZFRpbWVzID0gdGhpcy5hY3Rpdml0eVNlbmRUaW1lO1xyXG4gICAgICBpZiAodGhpcy5tZXNzYWdlTm90aWNlLnNlbmRUaW1lID09PSB0aGlzLmFjdGl2aXR5U2VuZFRpbWVbMF0udmFsdWUpIHtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyVHlwZXMgPSBbXHJcbiAgICAgICAgICB7IHZhbHVlOiAncHJvY2Vzc1BhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnByb2Nlc3NQYXJ0aWNpcGFudCcpIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc1BhcnRpY2lwYW50VHlwZXMgPSBbXHJcbiAgICAgICAgICB7IHZhbHVlOiAnd29ya0l0ZW1QYXJ0aWNpcGFudCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC53b3JrSXRlbVJlY2VpdmVQYXJ0aWNpcGFudCcpIH1cclxuICAgICAgICBdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXJUeXBlcyA9IFtcclxuICAgICAgICAgIHsgdmFsdWU6ICdwcm9jZXNzUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucHJvY2Vzc1BhcnRpY2lwYW50JykgfSxcclxuICAgICAgICAgIHsgdmFsdWU6ICd2YXJpYWJsZVBhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnZhcmlhYmxlUGFydGljaXBhbnQnKSB9LFxyXG4gICAgICAgICAgeyB2YWx1ZTogJ3VzZXJQYXJ0aWNpcGFudCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC51c2VyUGFydGljaXBhbnQnKSB9LFxyXG4gICAgICAgICAgeyB2YWx1ZTogJ3Bvc2l0aW9uUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucG9zaXRpb25QYXJ0aWNpcGFudCcpIH0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NQYXJ0aWNpcGFudFR5cGVzID0gW1xyXG4gICAgICAgICAgeyB2YWx1ZTogJ3Byb2NJbnN0Q3JlYXRvcicsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5wcm9jSW5zdENyZWF0b3InKSB9LFxyXG4gICAgICAgICAgeyB2YWx1ZTogJ2FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5hY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnKSB9XHJcbiAgICAgICAgXTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZW5kVGltZXMgPSB0aGlzLnByb2Nlc3NTZW5kVGltZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcmVwb3J0aW5nT3JnVHlwZS9oYXNBZG1pbk9yZyc7XHJcbiAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5oYXNBZG1pbk9yZyA9IGRhdGE7XHJcbiAgICAgIC8vIGluU3VpdGXlnLrmma/vvIzlj5jph4/lj4LkuI7ogIXlnLrmma/kuIvmmL7npLrnlKjmiLfnsbvlnotcclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjZW5lID09PSAnaW5TdWl0ZScpIHtcclxuICAgICAgICB0aGlzLnVzZXJUeXBlQnV0dG9uTmVlZFNob3cgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudXNlclR5cGVCdXR0b25OZWVkU2hvdyA9IGRhdGE7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnVzZXJUeXBlQnV0dG9uTmVlZFNob3cpIHtcclxuICAgICAgICB0aGlzLnZhcmlhYmxlT3JnVHlwZXMgPSBbeyBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuc3lzJyksIHZhbHVlOiAnU3lzJyB9XTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgaWYgKHRoaXMuU21zVGVtcGxhdGUpIHtcclxuICAgICAgdGhpcy5TbXNUZW1wbGF0ZS5lbmRHcmlkRWRpdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRSZWNlaXZlcigpO1xyXG4gICAgaWYgKHRoaXMuaGFzU21zVGVtcGxhdGUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSA9IHRoaXMuU21zVGVtcGxhdGUuc21zTWVzc2FnZVRlbXBsYXRlO1xyXG4gICAgICBpZiAodGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzICYmIHRoaXMubWVzc2FnZU5vdGljZS5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzID0gdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzLmZpbHRlcih2YXJpYWJsZSA9PiB2YXJpYWJsZS5jb2RlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy52YWxpZGF0b3IoKSkge1xyXG4gICAgICB0aGlzLnN1Ym1pdEVtaXR0ZXIuZW1pdCh0aGlzLm1lc3NhZ2VOb3RpY2UpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VFbWl0dGVyLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIHNlbmRUaW1lQ2hhbmdlKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEuZGF0YS52YWx1ZSA9PT0gdGhpcy5hY3Rpdml0eVNlbmRUaW1lWzBdLnZhbHVlKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2VSZWNlaXZlciA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKTtcclxuICAgICAgbWVzc2FnZVJlY2VpdmVyLnR5cGUgPSAncHJvY2Vzc1BhcnRpY2lwYW50JztcclxuICAgICAgbWVzc2FnZVJlY2VpdmVyLnByb2Nlc3NQYXJ0aWNpcGFudCA9ICd3b3JrSXRlbVBhcnRpY2lwYW50JztcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycyA9IFttZXNzYWdlUmVjZWl2ZXJdO1xyXG4gICAgICB0aGlzLnJlY2VpdmVyVHlwZXMgPSBbXHJcbiAgICAgICAgeyB2YWx1ZTogJ3Byb2Nlc3NQYXJ0aWNpcGFudCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5wcm9jZXNzUGFydGljaXBhbnQnKSB9XHJcbiAgICAgIF07XHJcbiAgICAgIHRoaXMucHJvY2Vzc1BhcnRpY2lwYW50VHlwZXMgPSBbXHJcbiAgICAgICAgeyB2YWx1ZTogJ3dvcmtJdGVtUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQud29ya0l0ZW1QYXJ0aWNpcGFudCcpIH1cclxuICAgICAgXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzKSB7XHJcbiAgICAgICAgaWYgKHIudHlwZSA9PT0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCcgJiYgci5wcm9jZXNzUGFydGljaXBhbnQgPT09ICd3b3JrSXRlbVBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgci5wcm9jZXNzUGFydGljaXBhbnQgPSAncHJvY0luc3RDcmVhdG9yJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZWNlaXZlclR5cGVzID0gW1xyXG4gICAgICAgIHsgdmFsdWU6ICdwcm9jZXNzUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucHJvY2Vzc1BhcnRpY2lwYW50JykgfSxcclxuICAgICAgICB7IHZhbHVlOiAndmFyaWFibGVQYXJ0aWNpcGFudCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC52YXJpYWJsZVBhcnRpY2lwYW50JykgfSxcclxuICAgICAgICB7IHZhbHVlOiAndXNlclBhcnRpY2lwYW50JywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnVzZXJQYXJ0aWNpcGFudCcpIH0sXHJcbiAgICAgICAgeyB2YWx1ZTogJ3Bvc2l0aW9uUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucG9zaXRpb25QYXJ0aWNpcGFudCcpIH0sXHJcbiAgICAgIF07XHJcbiAgICAgIHRoaXMucHJvY2Vzc1BhcnRpY2lwYW50VHlwZXMgPSBbXHJcbiAgICAgICAgeyB2YWx1ZTogJ3Byb2NJbnN0Q3JlYXRvcicsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5wcm9jSW5zdENyZWF0b3InKSB9LFxyXG4gICAgICAgIHsgdmFsdWU6ICdhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JykgfVxyXG4gICAgICBdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VuZFR5cGVDaGFuZ2Uoc2VuZFR5cGU6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuaGFzU21zTWVzc2FnZShzZW5kVHlwZSkpIHtcclxuICAgICAgdGhpcy5oYXNTbXNUZW1wbGF0ZSA9IHRydWU7XHJcbiAgICAgIGlmICghdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBuZXcgU21zTWVzc2FnZVRlbXBsYXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaGFzU21zVGVtcGxhdGUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnNtc01lc3NhZ2VUZW1wbGF0ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgaGFzU21zTWVzc2FnZShzZW5kVHlwZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoc2VuZFR5cGUpIHtcclxuICAgICAgY29uc3Qgc2VuZFR5cGVMaXN0ID0gc2VuZFR5cGUuc3BsaXQoJywnKTtcclxuICAgICAgbGV0IG1lc3NhZ2VDaGFubmVsID0gc2VuZFR5cGVMaXN0LmZpbmQodmFsID0+IHRoaXMudWlzdGF0ZS5tZXNzYWdlQ2hhbm5lbHMuZmluZChjaGFubmVsID0+IGNoYW5uZWwuY29kZSA9PSB2YWwgJiYgY2hhbm5lbC5jaGFubmVsVHlwZSA9PSAnU21zJykpO1xyXG4gICAgICBpZiAobWVzc2FnZUNoYW5uZWwpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXNlcnNTZWxlY3QoZGF0YTogYW55W10pIHtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbdGhpcy5pbmRleF0udXNlcklkcyA9ICcnO1xyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1t0aGlzLmluZGV4XS51c2VyTmFtZXMgPSAnJztcclxuICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBsZXQgdXNlcklkcyA9ICcnO1xyXG4gICAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xyXG4gICAgICAgIHVzZXJJZHMgKz0gZC5pZCArICcsJztcclxuICAgICAgfVxyXG4gICAgICBpZiAodXNlcklkcykge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbdGhpcy5pbmRleF0udXNlcklkcyA9IHVzZXJJZHMuc3Vic3RyaW5nKDAsIHVzZXJJZHMubGVuZ3RoIC0gMSk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHVzZXJOYW1lcyA9ICcnO1xyXG4gICAgICBmb3IgKGNvbnN0IGQgb2YgZGF0YSkge1xyXG4gICAgICAgIHVzZXJOYW1lcyArPSBkLm5hbWUgKyAnLCc7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVzZXJOYW1lcykge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbdGhpcy5pbmRleF0udXNlck5hbWVzID0gdXNlck5hbWVzLnN1YnN0cmluZygwLCB1c2VyTmFtZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyVXNlcnMoaW5kZXg6IGFueSkge1xyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0udXNlcklkcyA9ICcnO1xyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0udXNlck5hbWVzID0gJyc7XHJcbiAgfVxyXG5cclxuICBjbGVhclBvc2l0aW9uKGluZGV4OiBhbnkpIHtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnBvc2l0aW9uSWQgPSAnJztcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnBvc2l0aW9uTmFtZSA9ICcnO1xyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0ucG9zaXRpb25UeXBlID0gJyc7XHJcbiAgICB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzW2luZGV4XS5vcmdJZCA9ICcnO1xyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0ub3JnVHlwZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJBY3Rpdml0eUV4ZWN1dG9yKGluZGV4OiBhbnkpIHtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLmFjdGl2aXR5RGVmSWQgPSAnJztcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLmFjdGl2aXR5RGVmTmFtZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJWYXJpYWJsZVBhcnRpY2lwYW50KGluZGV4OiBhbnkpIHtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnZhcmlhYmxlUGFydGljaXBhbnQgPSAnJztcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnZhcmlhYmxlTmFtZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlVmFsdWUoZGF0YSkge1xyXG4gIH1cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuYmluZGluZ0RhdGEgPSB7fTtcclxuICB9XHJcbiAgcHJpdmF0ZSBzZXRSZWNlaXZlcigpIHtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdmFsaWRhdG9yKCk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VOb3RpY2Uuc2VuZFR5cGUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnNlbmRUeXBlJykpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL+WOu+mZpOa2iOaBr+aooeadv+e8luWPt+agoemqjFxyXG4gICAgLy8gaWYgKHRoaXMuaGFzU21zVGVtcGxhdGUpIHtcclxuICAgIC8vICAgaWYgKCF0aGlzLm1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlKSB7XHJcbiAgICAvLyAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnNtc01lc3NhZ2VUZW1wbGF0ZScpKTtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgaWYgKCF0aGlzLm1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlLmNvZGUpIHtcclxuICAgIC8vICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuc21zTWVzc2FnZVRlbXBsYXRlQ29kZScpKTtcclxuICAgIC8vICAgICByZXR1cm47XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuICAgIGlmICh0aGlzLmxvY2F0aW9uICE9PSAnbWVzc2FnZUFjdGl2aXR5JyAmJiAhdGhpcy5tZXNzYWdlTm90aWNlLnNlbmRUaW1lKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5zZW5kVGltZScpKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VOb3RpY2Uuc3ViamVjdCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuc3ViamVjdCcpKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VOb3RpY2UuY29udGVudCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQuY29udGVudCcpKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycyA9IHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnMuZmlsdGVyKHIgPT4gci50eXBlKTtcclxuICAgIGlmICghdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycyB8fCB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQucmVjZWl2ZXJzJykpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycykge1xyXG4gICAgICAgIHN3aXRjaCAoci50eXBlKSB7XHJcbiAgICAgICAgICBjYXNlICdwcm9jZXNzUGFydGljaXBhbnQnOlxyXG4gICAgICAgICAgICBpZiAoIXIucHJvY2Vzc1BhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LnByb2Nlc3NQYXJ0aWNpcGFudE5vdE51bGwnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHIucHJvY2Vzc1BhcnRpY2lwYW50ID09PSAnYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JyAmJiAhci5hY3Rpdml0eURlZklkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1lc3NhZ2VOb3RpY2VFZGl0LmFjdGl2aXR5RGVmSWROb3ROdWxsJykpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3ZhcmlhYmxlUGFydGljaXBhbnQnOlxyXG4gICAgICAgICAgICBpZiAoIXIudmFyaWFibGVQYXJ0aWNpcGFudCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC52YXJpYWJsZVBhcnRpY2lwYW50Tm90TnVsbCcpKTtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFyLm9yZ1R5cGUpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQubWVzc2FnZU5vdGljZUVkaXQub3JnVHlwZScpKTtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICd1c2VyUGFydGljaXBhbnQnOlxyXG4gICAgICAgICAgICBpZiAoIXIudXNlcklkcykge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC51c2VySWRzJykpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3Bvc2l0aW9uUGFydGljaXBhbnQnOlxyXG4gICAgICAgICAgICBpZiAoIXIucG9zaXRpb25JZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5wb3NpdGlvbklkJykpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUFkZCA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLm1lc3NhZ2VOb3RpY2Uuc2VuZFRpbWUgPT09ICdXT1JLSVRFTV9DUkVBVEVEJyAmJiB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzLmZpbHRlcihyID0+IHIudHlwZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZFJlY2VpdmVyKCkge1xyXG4gICAgaWYgKHRoaXMuZGlzYWJsZUFkZCgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlY2VpdmVycyA9IHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnMuZmlsdGVyKHIgPT4gci50eXBlKTtcclxuICAgIGlmIChyZWNlaXZlcnMgJiYgcmVjZWl2ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgdXNlclBhcnRpY2lwYW50ID0gbmV3IE1lc3NhZ2VSZWNlaXZlcigpO1xyXG4gICAgICB1c2VyUGFydGljaXBhbnQudHlwZSA9ICd1c2VyUGFydGljaXBhbnQnO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzID0gdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycy5jb25jYXQoW3VzZXJQYXJ0aWNpcGFudF0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubG9jYXRpb24gIT09ICdhY3Rpdml0eScpIHtcclxuICAgICAgICBjb25zdCBwcm9jSW5zdENyZWF0b3IgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKCk7XHJcbiAgICAgICAgcHJvY0luc3RDcmVhdG9yLnR5cGUgPSAncHJvY2Vzc1BhcnRpY2lwYW50JztcclxuICAgICAgICBwcm9jSW5zdENyZWF0b3IucHJvY2Vzc1BhcnRpY2lwYW50ID0gJ3Byb2NJbnN0Q3JlYXRvcic7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycyA9IHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnMuY29uY2F0KFtwcm9jSW5zdENyZWF0b3JdKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB3b3JrSXRlbVBhcnRpY2lwYW50ID0gbmV3IE1lc3NhZ2VSZWNlaXZlcigpO1xyXG4gICAgICAgIHdvcmtJdGVtUGFydGljaXBhbnQudHlwZSA9ICdwcm9jZXNzUGFydGljaXBhbnQnO1xyXG4gICAgICAgIHdvcmtJdGVtUGFydGljaXBhbnQucHJvY2Vzc1BhcnRpY2lwYW50ID0gJ3dvcmtJdGVtUGFydGljaXBhbnQnO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnMgPSB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzLmNvbmNhdChbd29ya0l0ZW1QYXJ0aWNpcGFudF0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNlbGVjdEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudChhY3Rpdml0eURlZklkOiBzdHJpbmcsIGluZGV4OiBhbnkpIHtcclxuICAgIGxldCBkaWFsb2c6IGFueTtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShBY3Rpdml0eUxpc3RDb21wb25lbnQpO1xyXG4gICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2Uuc3VibWl0RW1pdHRlci5zdWJzY3JpYmUoKHJlOiBhbnlbXSkgPT4ge1xyXG4gICAgICBjb25zdCBhY3RpY2l0eSA9IHJlLnNoaWZ0KCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLmFjdGl2aXR5RGVmSWQgPSBhY3RpY2l0eS5pZDtcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0uYWN0aXZpdHlEZWZOYW1lID0gYWN0aWNpdHkuZGF0YS5OYW1lO1xyXG4gICAgICBpZiAocmUgJiYgcmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgYSBvZiByZSkge1xyXG4gICAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKCk7XHJcbiAgICAgICAgICByZWNlaXZlci50eXBlID0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCc7XHJcbiAgICAgICAgICByZWNlaXZlci5wcm9jZXNzUGFydGljaXBhbnQgPSAnYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JztcclxuICAgICAgICAgIHJlY2VpdmVyLmFjdGl2aXR5RGVmSWQgPSBhLmlkO1xyXG4gICAgICAgICAgcmVjZWl2ZXIuYWN0aXZpdHlEZWZOYW1lID0gYS5kYXRhLk5hbWU7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzID0gdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVycy5jb25jYXQoW3JlY2VpdmVyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlRW1pdHRlci5zdWJzY3JpYmUociA9PiB7XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5hY3Rpdml0eUxpc3QnKSxcclxuICAgICAgd2lkdGg6IDQ5MCxcclxuICAgICAgaGVpZ2h0OiA0OTAsXHJcbiAgICAgIHNob3dCdXR0b25zOiB0cnVlLFxyXG4gICAgICBidXR0b25zOiBjb21wUmVmLmluc3RhbmNlLmJ1dHRvblJlZlxyXG4gICAgfTtcclxuICAgIGRpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gIH1cclxuICBzZWxlY3RWYXJpYWJsZVBhcnRpY2lwYW50KHZhcmlhYmxlUGFydGljaXBhbnQ6IHN0cmluZywgaW5kZXg6IGFueSkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IG5ldyBBcnJheTxWYXJFbnRpdHk+KCk7XHJcbiAgICAvLyBpZih0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmluZCh4ID0+IHgua2V5ID09PSAnQ3VycmVudExhbmd1YWdlJykpIHtcclxuICAgIC8vICAgY29udGV4dC5wdXNoKHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maW5kKHggPT4geC5rZXkgPT09ICdDdXJyZW50TGFuZ3VhZ2UnKSk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICB0aGlzLmV4cHIuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkFkdmFuY2VkKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnBhcnRpY2lwYW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUucGFydGljaXBhbnRDb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHZhcmlhYmxlUGFydGljaXBhbnQpIHtcclxuICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHZhcmlhYmxlUGFydGljaXBhbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KCcnKTtcclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChleHByZXNzaW9uaW5mbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnZhcmlhYmxlUGFydGljaXBhbnQgPSBleHByZXNzaW9uaW5mbztcclxuICAgICAgdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0udmFyaWFibGVOYW1lID0gdGhpcy52YXJpYWJsZVBhcnRpY2lwYW50TmFtZShleHByZXNzaW9uaW5mbyk7XHJcbiAgICAgIC8v54K55Ye756Gu5a6a5ZCO77yM5Y676Zmk6KGo6L6+5byP6YeM6Z2i55qE5paw5aKe55qE5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcyA9IHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoeCA9PiAhY29udGV4dC5zb21lKHkgPT4geS5rZXkgPT09IHgua2V5KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzZWxlY3RVc2VyUGFydGljaXBhbnQocmVjZWl2ZXI6IE1lc3NhZ2VSZWNlaXZlciwgaW5kZXg6IGFueSkge1xyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5iaW5kaW5nRGF0YSA9IHt9O1xyXG4gICAgaWYgKHJlY2VpdmVyLnVzZXJJZHMgJiYgcmVjZWl2ZXIudXNlcklkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuaWQgPSByZWNlaXZlci51c2VySWRzO1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLm5hbWUgPSByZWNlaXZlci51c2VyTmFtZXM7XHJcbiAgICB9XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy51c2VySGVscC5zaG93SGVscCgpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RQb3NpdGlvblBhcnRpY2lwYW50KHJlY2VpdmVyOiBNZXNzYWdlUmVjZWl2ZXIsIGluZGV4OiBhbnkpIHtcclxuICAgIGxldCBkaWFsb2c6IGFueTtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQb3NpdGlvblBlcmZvcm1lckNvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zaG93Q29uZGl0aW9uID0gZmFsc2U7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLnBvc2l0aW9uLnBlcmZvcm1lcklkID0gdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0ucG9zaXRpb25JZDtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UucG9zaXRpb24ucGVyZm9ybWVyTmFtZSA9IHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnBvc2l0aW9uTmFtZTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UucG9zaXRpb24ucG9zaXRpb25UeXBlID0gdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0ucG9zaXRpb25UeXBlO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5wb3NpdGlvbi5vcmdJZCA9IHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLm9yZ0lkO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5wb3NpdGlvbi5vcmdUeXBlID0gdGhpcy5tZXNzYWdlTm90aWNlLnJlY2VpdmVyc1tpbmRleF0ub3JnVHlwZTtcclxuICAgIGlmIChjb21wUmVmLmluc3RhbmNlLnBvc2l0aW9uLnBvc2l0aW9uVHlwZSA9PT0gJzAnKSB7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UubmV3RmlsdGVyID0geyBwb3NpdGlvblR5cGU6ICcwJyB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5uZXdGaWx0ZXIgPSB7IHBvc2l0aW9uVHlwZTogJzEnIH07XHJcbiAgICB9XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLnN1Ym1pdEVtaXR0ZXIuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZS5wZXJmb3JtZXJJZCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnBvc2l0aW9uSWQgPSByZS5wZXJmb3JtZXJJZDtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzW2luZGV4XS5wb3NpdGlvbk5hbWUgPSByZS5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLnBvc2l0aW9uVHlwZSA9IHJlLnBvc2l0aW9uVHlwZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJzW2luZGV4XS5vcmdJZCA9IHJlLm9yZ0lkO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5yZWNlaXZlcnNbaW5kZXhdLm9yZ1R5cGUgPSByZS5vcmdUeXBlO1xyXG4gICAgICB9XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlRW1pdHRlci5zdWJzY3JpYmUociA9PiB7XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tZXNzYWdlTm90aWNlRWRpdC5wb3NpdGlvbicpLFxyXG4gICAgICB3aWR0aDogNzAwLFxyXG4gICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXHJcbiAgICAgIGJ1dHRvbnM6IGNvbXBSZWYuaW5zdGFuY2UuYnV0dG9uUmVmXHJcbiAgICB9O1xyXG4gICAgZGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyhjb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgfVxyXG5cclxuICB0aXRsZUV4cHIoZGF0YTogYW55KXtcclxuICAgIHRoaXMuc2hvd1RpdGxlSGVscChkYXRhKTtcclxuICB9XHJcbiAgY29udGVudEV4cHIoZGF0YTogYW55KXtcclxuICAgIHRoaXMuc2hvd0NvbnRlbnRIZWxwKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0NvbnRlbnRIZWxwKGRhdGE6IHN0cmluZyl7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5zaG93RXhwcigpO1xyXG4gICAgaWYgKHRoaXMubWVzc2FnZU5vdGljZS5jb250ZW50ICYmIHRoaXMubWVzc2FnZU5vdGljZS5jb250ZW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMubWVzc2FnZU5vdGljZS5jb250ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoZXhwcmVzc2lvbkluZm86IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VOb3RpY2UuY29udGVudCA9IGV4cHJlc3Npb25JbmZvO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNob3dUaXRsZUhlbHAoZGF0YTogc3RyaW5nKSB7XHJcbiAgICBpZih0aGlzLm1lc3NhZ2VOb3RpY2Uuc3ViamVjdCAmJiB0aGlzLm1lc3NhZ2VOb3RpY2Uuc3ViamVjdC5jaGFyQXQoMCkgIT09ICd7Jyl7XHJcbiAgICAgIHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0ID0gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5zaG93RXhwcigpO1xyXG4gICAgaWYgKHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0ICYmIHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoZXhwcmVzc2lvbkluZm86IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VOb3RpY2Uuc3ViamVjdCA9IGV4cHJlc3Npb25JbmZvO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2hvd0V4cHIoKXtcclxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQXJyYXk8VmFyRW50aXR5PigpO1xyXG4gICAgLy8gaWYodGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbmQoeCA9PiB4LmtleSA9PT0gJ0N1cnJlbnRMYW5ndWFnZScpKSB7XHJcbiAgICAvLyAgIGNvbnRleHQucHVzaCh0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmluZCh4ID0+IHgua2V5ID09PSAnQ3VycmVudExhbmd1YWdlJykpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gdGhpcy5leHByLmNsZWFyQ29udGV4dCgpO1xyXG4gICAgaWYgKHRoaXMudWlzdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy51aXN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29tbW9uT2JqZWN0KGNvKTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMudWlzdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnVpc3RhdGUucHJvY0luc3RDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLnVpc3RhdGUucHJvY0luc3RDb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29udGV4dCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnVpc3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLnVpc3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5leHByLmFkZENvbnRleHQodmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51aXN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMudWlzdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5leHByLmFkZENvbnRleHQodmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29udGV4dDtcclxuICB9XHJcbiAgdHJhbkV4cHIoKXtcclxuICAgIHRoaXMubWVzc2FnZU5vdGljZS5zdWJqZWN0ID0gJyc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHZhcmlhYmxlUGFydGljaXBhbnROYW1lKGV4cHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBmb3IgKGNvbnN0IGMgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUucGFydGljaXBhbnRDb250ZXh0KSB7XHJcbiAgICAgIGlmIChleHByLmluZGV4T2YoYy5rZXkpID4gLTEpIHtcclxuICAgICAgICByZXR1cm4gYy5uYW1lO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGMgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUucHJvY2Vzc1ZhcmlhYmxlQ29udGV4dCkge1xyXG4gICAgICBpZiAoZXhwci5pbmRleE9mKGMua2V5KSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGMubmFtZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZXhwcikuZXhwcjtcclxuICB9XHJcbiAgLy8g55Sx5LqO6ZyA6KaB5a6e546w5Zu96ZmF5YyW77yM5q2k5aSE5a6a5LmJ5LiN6IO95o+Q5Y+W77ybXHJcbiAgcHJvY2Vzc1NlbmRUaW1lID0gW1xyXG4gICAgeyB2YWx1ZTogJ1BST0NFU1NJTlNUQU5DRV9DT01QTEVURUQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5wcm9jQ29tcGxldGUnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ1BST0NFU1NJTlNUQU5DRV9BQk9SVEVEJywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lk1lc3NhZ2VOb3RpY2UucHJvY0Fib3J0ZWQnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ1BST0NFU1NJTlNUQU5DRV9ST0xMQkFDSycsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5NZXNzYWdlTm90aWNlLnByb2NSb2xsQmFjaycpIH1cclxuICBdO1xyXG4gIFJlY2VpdmVyVHlwZSA9IFtcclxuICAgIHsgdmFsdWU6ICdwcm9jZXNzUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5wcm9jZXNzUGFydGljaXBhbnQnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ3ZhcmlhYmxlUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS52YXJpYWJsZVBhcnRpY2lwYW50JykgfSxcclxuICAgIHsgdmFsdWU6ICd1c2VyUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS51c2VyUGFydGljaXBhbnQnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ3Bvc2l0aW9uUGFydGljaXBhbnQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5wb3NpdGlvblBhcnRpY2lwYW50JykgfSxcclxuICBdO1xyXG4gIGFjdGl2aXR5U2VuZFRpbWUgPSBbXHJcbiAgICB7IHZhbHVlOiAnV09SS0lURU1fQ1JFQVRFRCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5NZXNzYWdlTm90aWNlLndvcmtDcmVhdGVkJykgfSxcclxuICAgIHsgdmFsdWU6ICdBQ1RJVklUWV9DT01QTEVURUQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuTWVzc2FnZU5vdGljZS5hY3RDb21wbGV0ZScpIH0sXHJcbiAgICB7IHZhbHVlOiAnQUNUSVZJVFlfQUJPUlRFRCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5NZXNzYWdlTm90aWNlLmFjdEFib3J0ZWQnKSB9LFxyXG4gIF07XHJcbn1cclxuIl19