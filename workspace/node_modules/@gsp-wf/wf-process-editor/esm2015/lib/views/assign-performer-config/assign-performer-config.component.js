/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Output, Input, ViewChild, EventEmitter, TemplateRef, HostBinding, Optional, ChangeDetectorRef, Inject, LOCALE_ID } from '@angular/core';
import { FormGroup, FormControl } from '@angular/forms';
import { AssignPerformerConfig } from './assign-performer-config.entity';
import { OrganizationPotentialOwner, ActionScope } from '../organization-potential-owner/actionOrganizationScope';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
export class AssignPerformerConfigComponent {
    /**
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(cdr, localeId, resources, localePipe) {
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.allowGlobalAssign = false;
        this.operatorCollection = [
            { text: this.localePipe.transform('component.assignPerformer.currentUser'), value: 'currentUser' },
            { text: this.localePipe.transform('component.assignPerformer.procInstCreator'), value: 'procInstCreator' }
        ];
        this.operator = 'currentUser';
        this.organizationLevelCollection = [
            { value: 'GLOBAL', text: this.localePipe.transform('component.assignPerformer.global'), orgId: 'global' },
            { value: 'UNIT', text: this.localePipe.transform('component.assignPerformer.currentUnit'), orgId: 'currentUnit' },
            { value: 'DEPARTMENT', text: this.localePipe.transform('component.assignPerformer.currentDepartment'), orgId: 'currentDepartment' }
        ];
        this.organizationLevel = this.organizationLevelCollection[0].value;
        this.includeChildren = false;
        this.modalConfig = {
            title: this.localePipe.transform('component.assignPerformer.assignPerformer'),
            width: 720,
            height: 490,
            showButtons: true
        };
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        this.assingPerformerConfigForm = new FormGroup({
            multiSelect: new FormControl(v.multiSelect),
            necessary: new FormControl(v.necessary)
        });
        this.operator = v.operator || 'currentUser';
        this.allowGlobalAssign = v.allowGlobalAssign || false;
        if (v.assignScope) {
            this.organizationLevel = v.assignScope.organizationLevel;
            this.includeChildren = v.assignScope.includeChildren;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.config = {
            operator: this.operator,
            multiSelect: this.assingPerformerConfigForm.get('multiSelect').value,
            necessary: this.assingPerformerConfigForm.get('necessary').value,
            allowGlobalAssign: this.allowGlobalAssign
        };
        if (this.allowGlobalAssign && this.organizationLevel !== this.organizationLevelCollection[0].value) {
            /** @type {?} */
            const potential = new OrganizationPotentialOwner();
            potential.actionScope = ActionScope.AssignUser;
            potential.organizationLevel = (/** @type {?} */ (this.organizationLevel));
            potential.organizationId = this.organizationLevelCollection.find((/**
             * @param {?} o
             * @return {?}
             */
            o => o.value === this.organizationLevel)).orgId;
            potential.organizationName = this.organizationLevelCollection.find((/**
             * @param {?} o
             * @return {?}
             */
            o => o.value === this.organizationLevel)).text;
            potential.includeChildren = this.includeChildren;
            potential.tag = 'variable';
            this.config.assignScope = potential;
        }
        /** @type {?} */
        const object = { value: this.config, parameters: null };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    valueChange(event) {
        switch (event.value) {
            case this.organizationLevelCollection[0].value:
                this.includeChildren = false;
                break;
            case this.organizationLevelCollection[1].value:
                this.includeChildren = true;
                break;
            case this.organizationLevelCollection[2].value:
                this.includeChildren = false;
                break;
        }
    }
}
AssignPerformerConfigComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-assign-performer-config',
                template: "<div class=\"f-page\">\r\n  <section class=\"f-page-main d-flex flex-column\">\r\n    <farris-section class=\"pt-0 f-section-form f-section-in-mainsubcard\" mainTitle=\"{{'component.assignPerformer.assignPerformer'|wfLocale}}\" [enableAccordion]=\"'default'\"\r\n      [enableMaximize]=\"false\">\r\n      <div class=\"f-form-layout farris-form farris-form-controls-inline\">\r\n        <fieldset class=\"f-section-formgroup\">\r\n          <div class=\"f-section-formgroup-inputs\">\r\n            <div class=\"col-12\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group\">\r\n                  <label class=\"col-form-label\">\r\n                    <span class=\"farris-label-text\">{{'component.assignPerformer.operator'|wfLocale}}</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\" style=\"width: 300px;\">\r\n                    <farris-combo-list [(ngModel)]=\"operator\" name=\"operator\" [ngModelOptions]=\"{standalone: true}\"\r\n                      [idField]=\"'value'\" [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"operatorCollection\"\r\n                      [panelHeight]=\"60\">\r\n                    </farris-combo-list>\r\n                    <div class=\"farris-feedback valid-feedback\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <div class=\"farris-group-wrap ml-2 pl-4\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <div class=\"farris-input-wrap\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                      <input class=\"custom-control-input\" type=\"checkbox\" id=\"multiSelect\" formControlName=\"multiSelect\"\r\n                        [readOnly]=\"false\" />\r\n                      <label class=\"custom-control-label\" for=\"multiSelect\">{{'component.assignPerformer.multiSelect'|wfLocale}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <div class=\"farris-input-wrap\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                      <input class=\"custom-control-input\" type=\"checkbox\" id=\"necessary\" formControlName=\"necessary\" [readOnly]=\"false\" />\r\n                      <label class=\"custom-control-label\" for=\"necessary\">{{'component.assignPerformer.necessary'|wfLocale}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fieldset>\r\n      </div>\r\n    </farris-section>\r\n    <!-- <farris-section class=\"pt-0 f-section-form f-section-in-mainsubcard\" [mainTitle]=\"'\u5907\u9009\u8303\u56F4'\" [enableAccordion]=\"'default'\"\r\n      [enableMaximize]=\"false\">\r\n      <div class=\"f-form-layout farris-form farris-form-controls-inline\">\r\n        <fieldset class=\"f-section-formgroup\">\r\n          <div class=\"f-section-formgroup-inputs\">\r\n            <div class=\"col-12\">\r\n              <div class=\"farris-group-wrap ml-2 pl-4\">\r\n                <div class=\"form-group\">\r\n                  <div class=\"farris-input-wrap\" style=\"width: 300px;\">\r\n                    <farris-radiogroup [(ngModel)]=\"assignScope\" [data]=\"assignScopeList\" name=\"assignScope\"\r\n                      [horizontal]=\"true\">\r\n                    </farris-radiogroup>\r\n                    <div class=\"farris-feedback valid-feedback\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fieldset>\r\n      </div>\r\n    </farris-section>\r\n    <farris-section class=\"pt-0 f-section-grid f-section-in-managelist\" [mainTitle]=\"'\u5907\u9009\u8303\u56F4'\" [enableAccordion]=\"'default'\"\r\n      [enableMaximize]=\"false\" style=\"height: 200px;\">\r\n      <app-performer [type]=\"'assignPerformer'\"></app-performer>\r\n    </farris-section> -->\r\n  </section>\r\n</div>\r\n\r\n<!--\r\n<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\">\r\n    <section class=\"f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-section-header pt-2 mx-2\">\r\n        <div class=\"f-title\">\r\n          <h4 class=\"f-title-text\">\u6307\u6D3E\u89C4\u5219\u9009\u9879</h4>\r\n        </div>\r\n      </div>\r\n      <div class=\"f-utils-fill-flex-column h-100\">\r\n        <form class=\"h-100\" [formGroup]=\"assingPerformerConfigForm\">\r\n          <div class=\"f-utils-fill-flex-column justify-content-center h-100 pb-4\">\r\n            <div class=\"my-2 mx-5\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group\">\r\n                  <label class=\"col-form-label\">\r\n                    <span class=\"farris-label-text\">\u6307\u6D3E\u64CD\u4F5C\u4EBA</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap mt-1\" style=\"width: 300px;\">\r\n                    <farris-combo-list [(ngModel)]=\"operator\" name=\"operator\" [ngModelOptions]=\"{standalone: true}\"\r\n                      [idField]=\"'value'\" [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"operatorCollection\"\r\n                      [panelHeight]=\"60\">\r\n                    </farris-combo-list>\r\n                    <div class=\"farris-feedback valid-feedback\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"my-2 mx-5\">\r\n              <div class=\"farris-input-wrap\">\r\n                <div class=\"custom-control custom-checkbox\">\r\n                  <input class=\"custom-control-input\" type=\"checkbox\" id=\"multiSelect\" formControlName=\"multiSelect\"\r\n                    [readOnly]=\"false\" />\r\n                  <label class=\"custom-control-label\" for=\"multiSelect\">\u5141\u8BB8\u9009\u62E9\u591A\u4E2A\u5F85\u9009\u7528\u6237</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"my-2 mx-5\">\r\n              <div class=\"farris-input-wrap\">\r\n                <div class=\"custom-control custom-checkbox\">\r\n                  <input class=\"custom-control-input\" type=\"checkbox\" id=\"necessary\" formControlName=\"necessary\" [readOnly]=\"false\" />\r\n                  <label class=\"custom-control-label\" for=\"necessary\">\u53EA\u6709\u4E00\u4E2A\u5F85\u9009\u7528\u6237\u65F6\uFF0C\u4ECD\u9700\u624B\u5DE5\u9009\u62E9</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"mx-2 mt-3\">\r\n              <div class=\"title-content\">\r\n                <h4 class=\"title-text\">\u8BBE\u5B9A\u7684\u53C2\u4E0E\u8005\u8303\u56F4\u5916\u6307\u6D3E</h4><span class=\"title-line\"></span>\r\n              </div>\r\n            </div>\r\n            <div class=\"farris-form form-inline farris-form-inline my-1\">\r\n              <div class=\"col-12 mt-3\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">\u662F\u5426\u542F\u7528</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <farris-switch [(ngModel)]=\"allowGlobalAssign\" [ngModelOptions]=\"{standalone: true}\" name=\"allowGlobalAssign\"></farris-switch>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex flex-row\">\r\n                <div class=\"col-8 my-2\">\r\n                  <div class=\"farris-group-wrap\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <label class=\"col-form-label\">\r\n                        <span class=\"farris-label-text\">\u7EC4\u7EC7\u8303\u56F4</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap ml-1\">\r\n                        <farris-combo-list [panelHeight]=\"100\" [(ngModel)]=\"organizationLevel\" [ngModelOptions]=\"{standalone: true}\"\r\n                          name=\"organizationLevel\" [idField]=\"'value'\" [textField]=\"'text'\" [valueField]=\"'value'\"\r\n                          [data]=\"organizationLevelCollection\" [readonly]=\"allowGlobalAssign===false\" (valueChange)=\"valueChange($event)\">\r\n                        </farris-combo-list>\r\n                        <div class=\"farris-feedback valid-feedback\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-4 my-2\">\r\n                  <div class=\"farris-input-wrap pt-1\">\r\n                    <div class=\"custom-control custom-checkbox mr-3\">\r\n                      <input class=\"custom-control-input\" type=\"checkbox\" [(ngModel)]=\"includeChildren\" [ngModelOptions]=\"{standalone: true}\"\r\n                        name=\"includeChildren\" id=\"includeChildren\" [disabled]=\"!(allowGlobalAssign===true && organizationLevel === organizationLevelCollection[2].value)\" />\r\n                      <label class=\"custom-control-label\" for=\"includeChildren\">\u5305\u542B\u4E0B\u7EA7</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div> -->\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.assignPerformer.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.assignPerformer.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [".title-content{color:#000;display:inline-flex;align-items:center;line-height:1.375rem;position:relative;overflow:hidden;padding:0 0 0 1rem;min-width:415px}.title-content ::before{content:'';width:.25rem;height:1.125rem;background:#59a1ff;border-radius:1px;position:absolute;top:50%;left:0;margin-top:-.5625rem}.title-text{font-size:1rem;line-height:1.375rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:0;margin-right:10px}.title-line{flex-grow:1;border-bottom:1px dashed rgba(0,0,0,.1)}"]
            }] }
];
/** @nocollapse */
AssignPerformerConfigComponent.ctorParameters = () => [
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
AssignPerformerConfigComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    value: [{ type: Input }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }]
};
if (false) {
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.cls;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.closeModal;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.submitModal;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.assingPerformerConfigForm;
    /**
     * @type {?}
     * @private
     */
    AssignPerformerConfigComponent.prototype.config;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.modalFooter;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.allowGlobalAssign;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.operatorCollection;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.operator;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.organizationLevelCollection;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.organizationLevel;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.includeChildren;
    /** @type {?} */
    AssignPerformerConfigComponent.prototype.modalConfig;
    /**
     * @type {?}
     * @private
     */
    AssignPerformerConfigComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    AssignPerformerConfigComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    AssignPerformerConfigComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    AssignPerformerConfigComponent.prototype.localePipe;
}
export class AssignConfigConverter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        return this.localePipe.transform('component.assignPerformer.set');
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    AssignConfigConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduLXBlcmZvcm1lci1jb25maWcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEssT0FBTyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN6RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsV0FBVyxFQUFxQixNQUFNLHlEQUF5RCxDQUFDO0FBQ3JJLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQVdoRyxNQUFNLE9BQU8sOEJBQThCOzs7Ozs7O0lBNEN6QyxZQUNzQixHQUFzQixFQUNmLFFBQWdCLEVBQ1IsU0FBYyxFQUM3QixVQUF3QjtRQUh4QixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUNmLGFBQVEsR0FBUixRQUFRLENBQVE7UUFDUixjQUFTLEdBQVQsU0FBUyxDQUFLO1FBQzdCLGVBQVUsR0FBVixVQUFVLENBQWM7UUE5QzlDLFFBQUcsR0FBRyw4QkFBOEIsQ0FBQztRQUMzQixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNyQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFvQmhELHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQUUxQix1QkFBa0IsR0FB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Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE91dHB1dCwgSW5wdXQsIFZpZXdDaGlsZCwgRXZlbnRFbWl0dGVyLCBUZW1wbGF0ZVJlZiwgSG9zdEJpbmRpbmcsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBMT0NBTEVfSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRm9ybUdyb3VwLCBGb3JtQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgQXNzaWduUGVyZm9ybWVyQ29uZmlnIH0gZnJvbSAnLi9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy5lbnRpdHknO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lciwgQWN0aW9uU2NvcGUsIE9yZ2FuaXphdGlvbkxldmVsIH0gZnJvbSAnLi4vb3JnYW5pemF0aW9uLXBvdGVudGlhbC1vd25lci9hY3Rpb25Pcmdhbml6YXRpb25TY29wZSc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uLy4uL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtYXNzaWduLXBlcmZvcm1lci1jb25maWcnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYXNzaWduLXBlcmZvcm1lci1jb25maWcuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgIFdmTG9jYWxlUGlwZSxcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBc3NpZ25QZXJmb3JtZXJDb25maWdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIGFzc2luZ1BlcmZvcm1lckNvbmZpZ0Zvcm06IEZvcm1Hcm91cDtcclxuICBwcml2YXRlIGNvbmZpZzogQXNzaWduUGVyZm9ybWVyQ29uZmlnO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZSh2OiBBc3NpZ25QZXJmb3JtZXJDb25maWcpIHtcclxuICAgIHRoaXMuYXNzaW5nUGVyZm9ybWVyQ29uZmlnRm9ybSA9IG5ldyBGb3JtR3JvdXAoe1xyXG4gICAgICBtdWx0aVNlbGVjdDogbmV3IEZvcm1Db250cm9sKHYubXVsdGlTZWxlY3QpLFxyXG4gICAgICBuZWNlc3Nhcnk6IG5ldyBGb3JtQ29udHJvbCh2Lm5lY2Vzc2FyeSlcclxuICAgIH0pO1xyXG4gICAgdGhpcy5vcGVyYXRvciA9IHYub3BlcmF0b3IgfHwgJ2N1cnJlbnRVc2VyJztcclxuICAgIHRoaXMuYWxsb3dHbG9iYWxBc3NpZ24gPSB2LmFsbG93R2xvYmFsQXNzaWduIHx8IGZhbHNlO1xyXG4gICAgaWYgKHYuYXNzaWduU2NvcGUpIHtcclxuICAgICAgdGhpcy5vcmdhbml6YXRpb25MZXZlbCA9IHYuYXNzaWduU2NvcGUub3JnYW5pemF0aW9uTGV2ZWw7XHJcbiAgICAgIHRoaXMuaW5jbHVkZUNoaWxkcmVuID0gdi5hc3NpZ25TY29wZS5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gIGFsbG93R2xvYmFsQXNzaWduID0gZmFsc2U7XHJcblxyXG4gIG9wZXJhdG9yQ29sbGVjdGlvbiA9IFtcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblBlcmZvcm1lci5jdXJyZW50VXNlcicpLCB2YWx1ZTogJ2N1cnJlbnRVc2VyJyB9LFxyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduUGVyZm9ybWVyLnByb2NJbnN0Q3JlYXRvcicpLCB2YWx1ZTogJ3Byb2NJbnN0Q3JlYXRvcicgfV07XHJcbiAgb3BlcmF0b3IgPSAnY3VycmVudFVzZXInO1xyXG5cclxuICBvcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb24gPSBbXHJcbiAgICB7IHZhbHVlOiAnR0xPQkFMJywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblBlcmZvcm1lci5nbG9iYWwnKSwgb3JnSWQ6ICdnbG9iYWwnIH0sXHJcbiAgICB7IHZhbHVlOiAnVU5JVCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5hc3NpZ25QZXJmb3JtZXIuY3VycmVudFVuaXQnKSwgb3JnSWQ6ICdjdXJyZW50VW5pdCcgfSxcclxuICAgIHsgdmFsdWU6ICdERVBBUlRNRU5UJywgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmFzc2lnblBlcmZvcm1lci5jdXJyZW50RGVwYXJ0bWVudCcpLCBvcmdJZDogJ2N1cnJlbnREZXBhcnRtZW50JyB9XTtcclxuICBvcmdhbml6YXRpb25MZXZlbCA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzBdLnZhbHVlO1xyXG4gIGluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG5cclxuICBtb2RhbENvbmZpZyA9IHtcclxuICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduUGVyZm9ybWVyLmFzc2lnblBlcmZvcm1lcicpLFxyXG4gICAgd2lkdGg6IDcyMCxcclxuICAgIGhlaWdodDogNDkwLFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgdGhpcy5jb25maWcgPSB7XHJcbiAgICAgIG9wZXJhdG9yOiB0aGlzLm9wZXJhdG9yLFxyXG4gICAgICBtdWx0aVNlbGVjdDogdGhpcy5hc3NpbmdQZXJmb3JtZXJDb25maWdGb3JtLmdldCgnbXVsdGlTZWxlY3QnKS52YWx1ZSxcclxuICAgICAgbmVjZXNzYXJ5OiB0aGlzLmFzc2luZ1BlcmZvcm1lckNvbmZpZ0Zvcm0uZ2V0KCduZWNlc3NhcnknKS52YWx1ZSxcclxuICAgICAgYWxsb3dHbG9iYWxBc3NpZ246IHRoaXMuYWxsb3dHbG9iYWxBc3NpZ25cclxuICAgIH07XHJcbiAgICBpZiAodGhpcy5hbGxvd0dsb2JhbEFzc2lnbiAmJiB0aGlzLm9yZ2FuaXphdGlvbkxldmVsICE9PSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblswXS52YWx1ZSkge1xyXG4gICAgICBjb25zdCBwb3RlbnRpYWwgPSBuZXcgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgcG90ZW50aWFsLmFjdGlvblNjb3BlID0gQWN0aW9uU2NvcGUuQXNzaWduVXNlcjtcclxuICAgICAgcG90ZW50aWFsLm9yZ2FuaXphdGlvbkxldmVsID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbCBhcyBPcmdhbml6YXRpb25MZXZlbDtcclxuICAgICAgcG90ZW50aWFsLm9yZ2FuaXphdGlvbklkID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb24uZmluZChvID0+IG8udmFsdWUgPT09IHRoaXMub3JnYW5pemF0aW9uTGV2ZWwpLm9yZ0lkO1xyXG4gICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uTmFtZSA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uLmZpbmQobyA9PiBvLnZhbHVlID09PSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsKS50ZXh0O1xyXG4gICAgICBwb3RlbnRpYWwuaW5jbHVkZUNoaWxkcmVuID0gdGhpcy5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICAgIHBvdGVudGlhbC50YWcgPSAndmFyaWFibGUnO1xyXG4gICAgICB0aGlzLmNvbmZpZy5hc3NpZ25TY29wZSA9IHBvdGVudGlhbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG9iamVjdCA9IHsgdmFsdWU6IHRoaXMuY29uZmlnLCBwYXJhbWV0ZXJzOiBudWxsIH07XHJcbiAgICB0aGlzLnN1Ym1pdE1vZGFsLmVtaXQob2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIHZhbHVlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudmFsdWUpIHtcclxuICAgICAgY2FzZSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblswXS52YWx1ZTpcclxuICAgICAgICB0aGlzLmluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzFdLnZhbHVlOlxyXG4gICAgICAgIHRoaXMuaW5jbHVkZUNoaWxkcmVuID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblsyXS52YWx1ZTpcclxuICAgICAgICB0aGlzLmluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgY2xhc3MgQXNzaWduQ29uZmlnQ29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYXNzaWduUGVyZm9ybWVyLnNldCcpO1xyXG4gIH1cclxufVxyXG4iXX0=