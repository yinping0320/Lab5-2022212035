/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Input, NgZone, ViewChild, ElementRef, Output, EventEmitter, TemplateRef, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { PerformerOptions } from '../../entities/performer-options';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { MessagerService } from '@farris/ui-messager';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../../i18n/pipe/wf-process-editor-locale.pipe';
export class PerformerOptionsComponent {
    /**
     * @param {?} ngZone
     * @param {?} designerState
     * @param {?} expr
     * @param {?} message
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(ngZone, designerState, expr, message, cdr, localeId, resources, localePipe) {
        this.ngZone = ngZone;
        this.designerState = designerState;
        this.expr = expr;
        this.message = message;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.editorParams = {};
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.performerOptionsLocation = '';
        this.showClearButton = false;
        this.historicFirst = false;
        this.excludeProcInstCreator = false;
        this.excludePreActExecutors = false;
        this.excludeAllPassExecutors = false;
        this.autoProcInstCreator = false;
        this.autoPreActExecutors = false;
        this.autoAllPassExecutors = false;
        this.noPerformerStrategyList = [
            { text: this.localePipe.transform('component.performerOptions.leave'), value: 'leave' },
            { text: this.localePipe.transform('component.performerOptions.throwException'), value: 'throwException' }
        ];
        this.variableOrgTypes = [
            { name: this.localePipe.transform('component.performerOptions.sys'), value: 'Sys' },
            { name: this.localePipe.transform('component.performerOptions.administrative_staff'), value: 'Administrative_staff' },
        ];
        this.exclusionPerformersOptions = [
            { value: 'procInstCreator', name: this.localePipe.transform('component.performerOptions.procInstCreator') },
            { value: 'preActExecutors', name: this.localePipe.transform('component.performerOptions.preActExecutors') },
            { value: 'allPassExecutors', name: this.localePipe.transform('component.performerOptions.allPassExecutors') }
        ];
        this.exprPerformerType = this.variableOrgTypes[0].value;
        this.noPerformerStrategy = this.noPerformerStrategyList[0].value;
        this.modalConfig = {
            title: this.localePipe.transform('component.performerOptions.performerOptions'),
            width: 760,
            height: 606,
            showButtons: true
        };
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @param {?} options
     * @return {?}
     */
    set value(options) {
        if (options) {
            this.exclusionPerformers = options.ExclusionPerformers;
            this.noPerformerStrategy = options.NoPerformerStrategy;
            this.historicFirst = options.HistoricFirst;
            this.automaticPerformers = options.automaticPerformers;
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    set exclusionPerformers(e) {
        if (e) {
            if (typeof e === 'string') {
                this.excludeProcInstCreator = e.indexOf('procInstCreator') > -1;
                this.excludePreActExecutors = e.indexOf('preActExecutors') > -1;
            }
            else {
                this.excludeProcInstCreator = e.findIndex((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i === 'procInstCreator')) > -1;
                this.excludePreActExecutors = e.findIndex((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i === 'preActExecutors')) > -1;
                this.excludeAllPassExecutors = e.findIndex((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i === 'allPassExecutors')) > -1;
                this.excludeExprPerformer = e.find((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i.indexOf('expr') > -1));
                if (this.excludeExprPerformer != null && (this.excludeExprPerformer.startsWith('Sys#') ||
                    this.excludeExprPerformer.startsWith('Administrative_staff#'))) {
                    /** @type {?} */
                    const excludeValue = this.excludeExprPerformer.split("#");
                    this.exprPerformerType = excludeValue[0];
                    this.excludeExprPerformer = excludeValue[1];
                }
            }
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    set automaticPerformers(e) {
        if (e && e.length > 0) {
            this.autoProcInstCreator = e.findIndex((/**
             * @param {?} i
             * @return {?}
             */
            i => i === 'procInstCreator')) > -1;
            this.autoPreActExecutors = e.findIndex((/**
             * @param {?} i
             * @return {?}
             */
            i => i === 'preActExecutors')) > -1;
            this.autoAllPassExecutors = e.findIndex((/**
             * @param {?} i
             * @return {?}
             */
            i => i === 'allPassExecutors')) > -1;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.performerOptionsLocation = this.editorParams.location;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.inputGroup.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));
            this.inputGroup.nativeElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));
        }));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        this.showClearButton = true;
        if (this.showClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        this.showClearButton = false;
        this.toggleClearIcon(event, false);
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? '' : 'none';
        /** @type {?} */
        const clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @return {?}
     */
    clickOK() {
        /** @type {?} */
        const options = {
            ExclusionPerformers: this.getExclusionPerformers(),
            NoPerformerStrategy: this.noPerformerStrategy,
            HistoricFirst: this.historicFirst,
            automaticPerformers: this.getAutoPerformers()
        };
        /** @type {?} */
        const object = {
            value: options, parameters: null
        };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    cancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    excludeProcInstCreatorClick(event) {
        // this.excludeProcInstCreator = !this.excludeProcInstCreator;
        if (this.excludeProcInstCreator && this.autoProcInstCreator) {
            this.autoProcInstCreator = false;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    excludePreActExecutorsClick(event) {
        // this.excludePreActExecutors = !this.excludePreActExecutors;
        if (this.autoAllPassExecutors === true && this.excludePreActExecutors === true) {
            this.message.info(this.localePipe.transform('component.performerOptions.exclusionNotAllowed'), (/**
             * @return {?}
             */
            () => {
                this.excludePreActExecutors = false;
            }));
            return;
        }
        if (this.excludePreActExecutors && this.autoPreActExecutors) {
            this.autoPreActExecutors = false;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    excludeAllPassExecutorsClick(event) {
        // this.excludeAllPassExecutors = !this.excludeAllPassExecutors;
        if (this.excludeAllPassExecutors) {
            if (this.autoPreActExecutors) {
                this.autoPreActExecutors = false;
            }
            if (this.autoAllPassExecutors) {
                this.autoAllPassExecutors = false;
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    autoProcInstCreatorClick(event) {
        // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key
        //   && this.autoProcInstCreator === true ) {
        //   this.message.info('【完成策略】为【会签】时，不允许设置自动审批，请了解！', () => {
        //     this.autoProcInstCreator = false;
        //   });
        //   return;
        // }
        if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key
            && this.autoProcInstCreator === true) {
            this.message.info(this.localePipe.transform('component.performerOptions.approvalNotAllowedAsSet'), (/**
             * @return {?}
             */
            () => {
                this.autoProcInstCreator = false;
            }));
            return;
        }
        // this.autoProcInstCreator = !this.autoProcInstCreator;
        if (this.autoProcInstCreator && this.excludeProcInstCreator) {
            this.excludeProcInstCreator = false;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    autoPreActExecutorsClick(event) {
        // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key
        //   && this.autoPreActExecutors === true) {
        //   this.message.info('【完成策略】为【会签】时，不允许设置自动审批，请了解！', () => {
        //     this.autoPreActExecutors = false;
        //   });
        //   return;
        // }
        if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key
            && this.autoPreActExecutors === true) {
            this.message.info(this.localePipe.transform('component.performerOptions.approvalNotAllowed'), (/**
             * @return {?}
             */
            () => {
                this.autoPreActExecutors = false;
            }));
            return;
        }
        if (this.excludeAllPassExecutors === true && this.autoPreActExecutors === true) {
            this.message.info(this.localePipe.transform('component.performerOptions.approvalNotAllowedAsSet'), (/**
             * @return {?}
             */
            () => {
                this.autoPreActExecutors = false;
            }));
            return;
        }
        // this.autoPreActExecutors = !this.autoPreActExecutors;
        if (this.autoPreActExecutors && this.excludePreActExecutors) {
            this.excludePreActExecutors = false;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    autoAllPassExecutorsClick(event) {
        // if (this.designerState.propertyData.CompleteStrategy !== this.designerState.completeIterator[0].key
        //   && this.autoAllPassExecutors === true) {
        //   this.message.info('【完成策略】为【会签】时，不允许设置自动审批，请了解！', () => {
        //     this.autoAllPassExecutors = false;
        //   });
        //   return;
        // }
        if (this.designerState.propertyData.AssignStrategy === this.designerState.assignIterator[2].key
            && this.autoAllPassExecutors === true) {
            this.message.info(this.localePipe.transform('component.performerOptions.allocationStrategyIsCollect'), (/**
             * @return {?}
             */
            () => {
                this.autoAllPassExecutors = false;
            }));
            return;
        }
        // this.autoAllPassExecutors = !this.autoAllPassExecutors;
        if (this.autoAllPassExecutors) {
            if (this.excludeAllPassExecutors) {
                this.excludeAllPassExecutors = false;
            }
            if (this.excludePreActExecutors) {
                this.excludePreActExecutors = false;
            }
        }
    }
    /**
     * @return {?}
     */
    getPerformerOptions() {
        return {
            ExclusionPerformers: this.getExclusionPerformers(),
            NoPerformerStrategy: this.noPerformerStrategy,
            HistoricFirst: this.historicFirst,
            automaticPerformers: this.getAutoPerformers()
        };
    }
    /**
     * @private
     * @return {?}
     */
    getExclusionPerformers() {
        /** @type {?} */
        const exclusionPerf = [];
        if (this.excludeProcInstCreator) {
            exclusionPerf.push('procInstCreator');
        }
        if (this.excludePreActExecutors) {
            exclusionPerf.push('preActExecutors');
        }
        if (this.excludeAllPassExecutors) {
            exclusionPerf.push('allPassExecutors');
        }
        if (this.excludeExprPerformer) {
            exclusionPerf.push(`${this.exprPerformerType}#${this.excludeExprPerformer}`);
        }
        return exclusionPerf;
    }
    /**
     * @private
     * @return {?}
     */
    getAutoPerformers() {
        /** @type {?} */
        const autoPerf = new Array();
        if (this.autoProcInstCreator) {
            autoPerf.push('procInstCreator');
        }
        if (this.autoPreActExecutors) {
            autoPerf.push('preActExecutors');
        }
        if (this.autoAllPassExecutors) {
            autoPerf.push('allPassExecutors');
        }
        return autoPerf;
    }
    /**
     * @return {?}
     */
    openExprEditor() {
        // this.expr.clearContext();
        this.expr.setEditPattern(ExprEditMode.Advanced);
        if (this.designerState.schemas.length > 0) {
            for (const schema of this.designerState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        let context = new Array();
        context = this.designerState.addContext(context);
        if (this.designerState.subActivityContext.length > 0) {
            for (const variable of this.designerState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
                // this.expr.addContext(variable);
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        // if (this.excludeExprPerformer) {
        this.expr.addExpressionText(this.excludeExprPerformer);
        // }
        this.expr.buildExpression().then((/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            this.excludeExprPerformer = d;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    orgTypeChange(data) {
        if (data === 'Sys') {
            this.exprPerformerType = this.variableOrgTypes[0].value;
        }
        else if (data === 'Administrative_staff') {
            this.exprPerformerType = this.variableOrgTypes[1].value;
        }
    }
    /**
     * @return {?}
     */
    clear() {
        this.excludeExprPerformer = '';
    }
}
PerformerOptionsComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-performer-options',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column h-100\">\r\n    <section class=\"f-utils-fill-flex-column h-100 mx-3\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n      <div class=\"f-utils-fill-flex-column h-100 pl-3\">\r\n        <perfect-scrollbar [config]=\"{}\">\r\n          <form class=\"h-100\" style=\"overflow-x: hidden;\">\r\n            <div class=\"f-form-layout farris-form pb-4\">\r\n              <div class=\"farris-form form-inline farris-form-inline\">\r\n                <div class=\"mx-2 mt-3\">\r\n                  <div class=\"title-content\">\r\n                    <h5 class=\"title-text\">{{'component.performerOptions.advancedOptions'|wfLocale}}</h5><span class=\"title-line\"></span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"historicFirst\" type=\"checkbox\" id=\"historicFirst\"\r\n                            [(ngModel)]=\"historicFirst\" />\r\n                          <label class=\"custom-control-label\" for=\"historicFirst\">{{'component.performerOptions.historicFirst'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto mt-3 pr-4\">\r\n                  <div class=\"farris-group-wrap f-form-lable-auto pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <label class=\"col-form-label\">\r\n                        <span class=\"farris-label-text\">{{'component.performerOptions.noPerformerStrategy'|wfLocale}}</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap\">\r\n                        <farris-combo-list [(ngModel)]=\"noPerformerStrategy\" name=\"noPerformerStrategy\" [idField]=\"'value'\"\r\n                          [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"noPerformerStrategyList\" [panelHeight]=\"60\">\r\n                        </farris-combo-list>\r\n                        <div class=\"farris-feedback valid-feedback\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"mx-2 mt-3\">\r\n                  <div class=\"title-content\">\r\n                    <h5 class=\"title-text\">{{'component.performerOptions.excludeProcInstCreator'|wfLocale}}</h5><span class=\"title-line\"></span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"excludeProcInstCreator\" type=\"checkbox\" id=\"excludeProcInstCreator\"\r\n                            [(ngModel)]=\"excludeProcInstCreator\" (change)=\"excludeProcInstCreatorClick($event)\" />\r\n                          <label class=\"custom-control-label\" for=\"excludeProcInstCreator\">{{'component.performerOptions.defaultNotParticipate'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"excludePreActExecutors\" type=\"checkbox\" id=\"excludePreActExecutors\"\r\n                            [(ngModel)]=\"excludePreActExecutors\" (change)=\"excludePreActExecutorsClick($event)\"/>\r\n                          <label class=\"custom-control-label\" for=\"excludePreActExecutors\">{{'component.performerOptions.excludePreActExecutors'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"excludeAllPassExecutors\" type=\"checkbox\" id=\"excludeAllPassExecutors\"\r\n                            [(ngModel)]=\"excludeAllPassExecutors\" (change)=\"excludeAllPassExecutorsClick($event)\"/>\r\n                          <label class=\"custom-control-label\" for=\"excludeAllPassExecutors\">{{'component.performerOptions.excludeAllPassExecutors'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto pr-4 my-2\">\r\n                  <div class=\"farris-group-wrap f-form-lable-auto pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <label class=\"col-form-label\">\r\n                        <span class=\"farris-label-text\">{{'component.performerOptions.excludeExprPerformer'|wfLocale}}</span>\r\n                      </label>\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div #inputGroup class=\"input-group\">\r\n                          <input type=\"text\" class=\"form-control\" [(ngModel)]=\"excludeExprPerformer\" name=\"excludeExprPerformer\"\r\n                            [readOnly]=\"true\" />\r\n                          <div class=\"input-group-append\">\r\n                            <span [style.display]=\"showClearButton ? '' : 'none'\" class=\"input-group-text input-group-clear\"\r\n                              (click)=\"clear()\">\r\n                              <i class=\"f-icon modal_close\"></i>\r\n                            </span>\r\n                            <span class=\"input-group-text\" (click)=\"openExprEditor()\" style=\"background: #FFF;\">\r\n                              <i class=\"f-icon f-icon-lookup\"></i>\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"farris-feedback valid-feedback\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div *ngIf=\"excludeExprPerformer != null || excludeExprPerformer != ''\">\r\n                  <div class=\"col-9 farris-group-auto my-2 pr-4\">\r\n                    <div class=\"farris-group-wrap f-form-lable-auto pl-3\">\r\n                      <div class=\"form-group farris-form-group\">\r\n                        <label class=\"col-form-label\">\r\n                          <span class=\"farris-label-text\">{{'component.performerOptions.variableOrgTypes'|wfLocale}}</span>\r\n                        </label>\r\n                        <div class=\"farris-input-wrap\" style=\"margin-bottom: 5px;\">\r\n                          <div class=\"custom-control custom-checkbox\">\r\n                            <farris-radiogroup [data]=\"variableOrgTypes\" [horizontal]=\"true\" [(ngModel)]=\"exprPerformerType\" name=\"referObject\"\r\n                              (changeValue)=\"orgTypeChange($event)\"></farris-radiogroup>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div *ngIf=\"performerOptionsLocation!='autoActivity'\">\r\n                <div class=\"mx-2 mt-3\">\r\n                  <div class=\"title-content\">\r\n                    <h5 class=\"title-text\">{{'component.performerOptions.automaticApprovalOptions'|wfLocale}}</h5><span class=\"title-line\"></span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"autoProcInstCreator\" type=\"checkbox\" id=\"autoProcInstCreator\"\r\n                            [(ngModel)]=\"autoProcInstCreator\" (change)=\"autoProcInstCreatorClick($event)\" />\r\n                          <label class=\"custom-control-label\" for=\"autoProcInstCreator\">{{'component.performerOptions.autoProcInstCreator'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"autoPreActExecutors\" type=\"checkbox\" id=\"autoPreActExecutors\"\r\n                            [(ngModel)]=\"autoPreActExecutors\" (change)=\"autoPreActExecutorsClick($event)\" />\r\n                          <label class=\"custom-control-label\" for=\"autoPreActExecutors\">{{'component.performerOptions.autoPreActExecutors'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-12 farris-group-auto my-2\" style=\"margin-left: 100px;\">\r\n                  <div class=\"farris-group-wrap pl-3\">\r\n                    <div class=\"form-group farris-form-group\">\r\n                      <div class=\"farris-input-wrap\">\r\n                        <div class=\"custom-control custom-checkbox\">\r\n                          <input class=\"custom-control-input\" name=\"autoAllPassExecutors\" type=\"checkbox\" id=\"autoAllPassExecutors\"\r\n                            [(ngModel)]=\"autoAllPassExecutors\" (change)=\"autoAllPassExecutorsClick($event)\" />\r\n                          <label class=\"custom-control-label\" for=\"autoAllPassExecutors\">{{'component.performerOptions.autoAllPassExecutors'|wfLocale}}</label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </perfect-scrollbar>\r\n\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"cancel()\">{{'component.performerOptions.cancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">{{'component.performerOptions.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [".item-header{padding:1rem}.item{padding:.5rem 5rem}.title-content{color:#000;display:inline-flex;align-items:center;line-height:1.375rem;position:relative;overflow:hidden;padding:0 0 0 1rem;min-width:450px}.title-content ::before{content:'';width:.25rem;height:1.125rem;background:#59a1ff;border-radius:1px;position:absolute;top:50%;left:0;margin-top:-.5625rem}.title-text{font-size:1rem;line-height:1.375rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:0;margin-right:10px}.title-line{flex-grow:1;border-bottom:1px dashed rgba(0,0,0,.1)}"]
            }] }
];
/** @nocollapse */
PerformerOptionsComponent.ctorParameters = () => [
    { type: NgZone },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: MessagerService },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
PerformerOptionsComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    editorParams: [{ type: Input }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    value: [{ type: Input }],
    exclusionPerformers: [{ type: Input }],
    inputGroup: [{ type: ViewChild, args: ['inputGroup',] }]
};
if (false) {
    /** @type {?} */
    PerformerOptionsComponent.prototype.cls;
    /** @type {?} */
    PerformerOptionsComponent.prototype.editorParams;
    /** @type {?} */
    PerformerOptionsComponent.prototype.closeModal;
    /** @type {?} */
    PerformerOptionsComponent.prototype.submitModal;
    /** @type {?} */
    PerformerOptionsComponent.prototype.modalFooter;
    /** @type {?} */
    PerformerOptionsComponent.prototype.performerOptionsLocation;
    /** @type {?} */
    PerformerOptionsComponent.prototype.inputGroup;
    /** @type {?} */
    PerformerOptionsComponent.prototype.showClearButton;
    /** @type {?} */
    PerformerOptionsComponent.prototype.historicFirst;
    /** @type {?} */
    PerformerOptionsComponent.prototype.excludeExprPerformer;
    /** @type {?} */
    PerformerOptionsComponent.prototype.excludeProcInstCreator;
    /** @type {?} */
    PerformerOptionsComponent.prototype.excludePreActExecutors;
    /** @type {?} */
    PerformerOptionsComponent.prototype.excludeAllPassExecutors;
    /** @type {?} */
    PerformerOptionsComponent.prototype.autoProcInstCreator;
    /** @type {?} */
    PerformerOptionsComponent.prototype.autoPreActExecutors;
    /** @type {?} */
    PerformerOptionsComponent.prototype.autoAllPassExecutors;
    /** @type {?} */
    PerformerOptionsComponent.prototype.noPerformerStrategyList;
    /** @type {?} */
    PerformerOptionsComponent.prototype.variableOrgTypes;
    /** @type {?} */
    PerformerOptionsComponent.prototype.exclusionPerformersOptions;
    /** @type {?} */
    PerformerOptionsComponent.prototype.exprPerformerType;
    /** @type {?} */
    PerformerOptionsComponent.prototype.noPerformerStrategy;
    /** @type {?} */
    PerformerOptionsComponent.prototype.modalConfig;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.designerState;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsComponent.prototype.localePipe;
}
export class PerformerOptionsConverter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        return this.localePipe.transform("component.performerOptions.set");
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    PerformerOptionsConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybWVyLW9wdGlvbnMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wZXJmb3JtZXIvdmlld3MvcGVyZm9ybWVyLW9wdGlvbnMvcGVyZm9ybWVyLW9wdGlvbnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFdBQVcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFpQixTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZNLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3BFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztBQVd0RyxNQUFNLE9BQU8seUJBQXlCOzs7Ozs7Ozs7OztJQXVGcEMsWUFDVSxNQUFjLEVBQ2QsYUFBcUMsRUFDckMsSUFBdUIsRUFDdkIsT0FBd0IsRUFDWixHQUFzQixFQUNmLFFBQWdCLEVBQ1IsU0FBYyxFQUM3QixVQUF3QjtRQVBwQyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2Qsa0JBQWEsR0FBYixhQUFhLENBQXdCO1FBQ3JDLFNBQUksR0FBSixJQUFJLENBQW1CO1FBQ3ZCLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQ1osUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFDZixh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Qy9CLDJEQUErQjs7SUFDL0IsNERBQWdDOztJQUVoQyx3REFBNEI7O0lBQzVCLHdEQUE0Qjs7SUFDNUIseURBQTZCOztJQUU3Qiw0REFFNkc7O0lBQzdHLHFEQUdFOztJQUNGLCtEQUlFOztJQUNGLHNEQUFtRDs7SUFDbkQsd0RBQW9FOztJQUdwRSxnREFLRTs7Ozs7SUFHQSwyQ0FBc0I7Ozs7O0lBQ3RCLGtEQUE2Qzs7Ozs7SUFDN0MseUNBQStCOzs7OztJQUMvQiw0Q0FBZ0M7Ozs7O0lBQ2hDLHdDQUEwQzs7Ozs7SUFDMUMsNkNBQTJDOzs7OztJQUMzQyw4Q0FBaUQ7Ozs7O0lBQ2pELCtDQUE0Qzs7QUFrUWhELE1BQU0sT0FBTyx5QkFBeUI7Ozs7SUFDcEMsWUFDVSxVQUF3QjtRQUF4QixlQUFVLEdBQVYsVUFBVSxDQUFjO0lBQzlCLENBQUM7Ozs7O0lBRUwsU0FBUyxDQUFDLElBQVc7UUFDbkIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7Q0FDRjs7Ozs7O0lBTkcsK0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEhvc3RCaW5kaW5nLCBJbnB1dCwgTmdab25lLCBBZnRlclZpZXdJbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBUZW1wbGF0ZVJlZiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsLCBJbmplY3QsIExPQ0FMRV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJPcHRpb25zIH0gZnJvbSAnLi4vLi4vZW50aXRpZXMvcGVyZm9ybWVyLW9wdGlvbnMnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25TZXJ2aWNlLCBJbmplY3RlZFR5cGUsIEV4cHJFZGl0TW9kZSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2kxOG4vcGlwZS93Zi1wcm9jZXNzLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IFdGX1BST0NFU1NfRURJVE9SX0xBTkdfUkVTT1VSQ0VTIH0gZnJvbSAnLi4vLi4vLi4vLi4vaTE4bi9hc3NldHMvbGFuZy5yZXNvdXJjZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1wZXJmb3JtZXItb3B0aW9ucycsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3BlcmZvcm1lci1vcHRpb25zLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wZXJmb3JtZXItb3B0aW9ucy5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgIFdmTG9jYWxlUGlwZSxcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgQElucHV0KCkgZWRpdG9yUGFyYW1zOiBhbnkgPSB7fTtcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBWaWV3Q2hpbGQoJ2ljb25TZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBwZXJmb3JtZXJPcHRpb25zTG9jYXRpb24gPSAnJztcclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZShvcHRpb25zOiBQZXJmb3JtZXJPcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICB0aGlzLmV4Y2x1c2lvblBlcmZvcm1lcnMgPSBvcHRpb25zLkV4Y2x1c2lvblBlcmZvcm1lcnM7XHJcbiAgICAgIHRoaXMubm9QZXJmb3JtZXJTdHJhdGVneSA9IG9wdGlvbnMuTm9QZXJmb3JtZXJTdHJhdGVneTtcclxuICAgICAgdGhpcy5oaXN0b3JpY0ZpcnN0ID0gb3B0aW9ucy5IaXN0b3JpY0ZpcnN0O1xyXG4gICAgICB0aGlzLmF1dG9tYXRpY1BlcmZvcm1lcnMgPSBvcHRpb25zLmF1dG9tYXRpY1BlcmZvcm1lcnM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBleGNsdXNpb25QZXJmb3JtZXJzKGU6IHN0cmluZyB8IEFycmF5PHN0cmluZz4pIHtcclxuICAgIGlmIChlKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aGlzLmV4Y2x1ZGVQcm9jSW5zdENyZWF0b3IgPSBlLmluZGV4T2YoJ3Byb2NJbnN0Q3JlYXRvcicpID4gLTE7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzID0gZS5pbmRleE9mKCdwcmVBY3RFeGVjdXRvcnMnKSA+IC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZXhjbHVkZVByb2NJbnN0Q3JlYXRvciA9IGUuZmluZEluZGV4KGkgPT4gaSA9PT0gJ3Byb2NJbnN0Q3JlYXRvcicpID4gLTE7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzID0gZS5maW5kSW5kZXgoaSA9PiBpID09PSAncHJlQWN0RXhlY3V0b3JzJykgPiAtMTtcclxuICAgICAgICB0aGlzLmV4Y2x1ZGVBbGxQYXNzRXhlY3V0b3JzID0gZS5maW5kSW5kZXgoaSA9PiBpID09PSAnYWxsUGFzc0V4ZWN1dG9ycycpID4gLTE7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlRXhwclBlcmZvcm1lciA9IGUuZmluZChpID0+IGkuaW5kZXhPZignZXhwcicpID4gLTEpO1xyXG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVFeHByUGVyZm9ybWVyICE9IG51bGwgJiYgKHRoaXMuZXhjbHVkZUV4cHJQZXJmb3JtZXIuc3RhcnRzV2l0aCgnU3lzIycpIHx8XHJcbiAgICAgICAgICB0aGlzLmV4Y2x1ZGVFeHByUGVyZm9ybWVyLnN0YXJ0c1dpdGgoJ0FkbWluaXN0cmF0aXZlX3N0YWZmIycpKSkge1xyXG4gICAgICAgICAgY29uc3QgZXhjbHVkZVZhbHVlID0gdGhpcy5leGNsdWRlRXhwclBlcmZvcm1lci5zcGxpdChcIiNcIik7XHJcbiAgICAgICAgICB0aGlzLmV4cHJQZXJmb3JtZXJUeXBlID0gZXhjbHVkZVZhbHVlWzBdO1xyXG4gICAgICAgICAgdGhpcy5leGNsdWRlRXhwclBlcmZvcm1lciA9IGV4Y2x1ZGVWYWx1ZVsxXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldCBhdXRvbWF0aWNQZXJmb3JtZXJzKGU6IEFycmF5PHN0cmluZz4pIHtcclxuICAgIGlmIChlICYmIGUubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmF1dG9Qcm9jSW5zdENyZWF0b3IgPSBlLmZpbmRJbmRleChpID0+IGkgPT09ICdwcm9jSW5zdENyZWF0b3InKSA+IC0xO1xyXG4gICAgICB0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMgPSBlLmZpbmRJbmRleChpID0+IGkgPT09ICdwcmVBY3RFeGVjdXRvcnMnKSA+IC0xO1xyXG4gICAgICB0aGlzLmF1dG9BbGxQYXNzRXhlY3V0b3JzID0gZS5maW5kSW5kZXgoaSA9PiBpID09PSAnYWxsUGFzc0V4ZWN1dG9ycycpID4gLTE7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZCgnaW5wdXRHcm91cCcpIGlucHV0R3JvdXA6IEVsZW1lbnRSZWY7XHJcbiAgc2hvd0NsZWFyQnV0dG9uID0gZmFsc2U7XHJcblxyXG4gIGhpc3RvcmljRmlyc3QgPSBmYWxzZTtcclxuXHJcbiAgZXhjbHVkZUV4cHJQZXJmb3JtZXI6IHN0cmluZztcclxuXHJcblxyXG4gIGV4Y2x1ZGVQcm9jSW5zdENyZWF0b3IgPSBmYWxzZTtcclxuICBleGNsdWRlUHJlQWN0RXhlY3V0b3JzID0gZmFsc2U7XHJcbiAgZXhjbHVkZUFsbFBhc3NFeGVjdXRvcnMgPSBmYWxzZTtcclxuXHJcbiAgYXV0b1Byb2NJbnN0Q3JlYXRvciA9IGZhbHNlO1xyXG4gIGF1dG9QcmVBY3RFeGVjdXRvcnMgPSBmYWxzZTtcclxuICBhdXRvQWxsUGFzc0V4ZWN1dG9ycyA9IGZhbHNlO1xyXG5cclxuICBub1BlcmZvcm1lclN0cmF0ZWd5TGlzdCA9IFtcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMubGVhdmUnKSwgdmFsdWU6ICdsZWF2ZScgfSxcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMudGhyb3dFeGNlcHRpb24nKSwgdmFsdWU6ICd0aHJvd0V4Y2VwdGlvbicgfV07XHJcbiAgdmFyaWFibGVPcmdUeXBlcyA9IFtcclxuICAgIHsgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMuc3lzJyksIHZhbHVlOiAnU3lzJyB9LFxyXG4gICAgeyBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGVyZm9ybWVyT3B0aW9ucy5hZG1pbmlzdHJhdGl2ZV9zdGFmZicpLCB2YWx1ZTogJ0FkbWluaXN0cmF0aXZlX3N0YWZmJyB9LFxyXG4gIF07XHJcbiAgZXhjbHVzaW9uUGVyZm9ybWVyc09wdGlvbnMgPSBbXHJcbiAgICB7IHZhbHVlOiAncHJvY0luc3RDcmVhdG9yJywgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMucHJvY0luc3RDcmVhdG9yJykgfSxcclxuICAgIHsgdmFsdWU6ICdwcmVBY3RFeGVjdXRvcnMnLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGVyZm9ybWVyT3B0aW9ucy5wcmVBY3RFeGVjdXRvcnMnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ2FsbFBhc3NFeGVjdXRvcnMnLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGVyZm9ybWVyT3B0aW9ucy5hbGxQYXNzRXhlY3V0b3JzJykgfVxyXG4gIF07XHJcbiAgZXhwclBlcmZvcm1lclR5cGUgPSB0aGlzLnZhcmlhYmxlT3JnVHlwZXNbMF0udmFsdWU7XHJcbiAgbm9QZXJmb3JtZXJTdHJhdGVneTogc3RyaW5nID0gdGhpcy5ub1BlcmZvcm1lclN0cmF0ZWd5TGlzdFswXS52YWx1ZTtcclxuXHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wZXJmb3JtZXJPcHRpb25zLnBlcmZvcm1lck9wdGlvbnMnKSxcclxuICAgIHdpZHRoOiA3NjAsXHJcbiAgICBoZWlnaHQ6IDYwNixcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgcHJpdmF0ZSBkZXNpZ25lclN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSxcclxuICApIHtcclxuICAgIHRoaXMubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZSB8fCBuZXcgV2ZMb2NhbGVQaXBlKGxvY2FsZUlkLCByZXNvdXJjZXMpO1xyXG4gICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5wZXJmb3JtZXJPcHRpb25zTG9jYXRpb24gPSB0aGlzLmVkaXRvclBhcmFtcy5sb2NhdGlvbjtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgdGhpcy5pbnB1dEdyb3VwLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbW91c2VlbnRlcicsXHJcbiAgICAgICAgdGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlucHV0R3JvdXAubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdtb3VzZWxlYXZlJyxcclxuICAgICAgICB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VFbnRlcihldmVudCkge1xyXG4gICAgdGhpcy5zaG93Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuc2hvd0NsZWFyQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25Nb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICB0aGlzLnNob3dDbGVhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIGZhbHNlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHN0ciA9IGlzU2hvdyA/ICcnIDogJ25vbmUnO1xyXG4gICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1jbGVhcicpO1xyXG4gICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgRXhjbHVzaW9uUGVyZm9ybWVyczogdGhpcy5nZXRFeGNsdXNpb25QZXJmb3JtZXJzKCksXHJcbiAgICAgIE5vUGVyZm9ybWVyU3RyYXRlZ3k6IHRoaXMubm9QZXJmb3JtZXJTdHJhdGVneSxcclxuICAgICAgSGlzdG9yaWNGaXJzdDogdGhpcy5oaXN0b3JpY0ZpcnN0LFxyXG4gICAgICBhdXRvbWF0aWNQZXJmb3JtZXJzOiB0aGlzLmdldEF1dG9QZXJmb3JtZXJzKClcclxuICAgIH07XHJcbiAgICBjb25zdCBvYmplY3QgPSB7XHJcbiAgICAgIHZhbHVlOiBvcHRpb25zLCBwYXJhbWV0ZXJzOiBudWxsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBjYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgZXhjbHVkZVByb2NJbnN0Q3JlYXRvckNsaWNrKGV2ZW50OiBhbnkpIHtcclxuICAgIC8vIHRoaXMuZXhjbHVkZVByb2NJbnN0Q3JlYXRvciA9ICF0aGlzLmV4Y2x1ZGVQcm9jSW5zdENyZWF0b3I7XHJcbiAgICBpZiAodGhpcy5leGNsdWRlUHJvY0luc3RDcmVhdG9yICYmIHRoaXMuYXV0b1Byb2NJbnN0Q3JlYXRvcikge1xyXG4gICAgICB0aGlzLmF1dG9Qcm9jSW5zdENyZWF0b3IgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4Y2x1ZGVQcmVBY3RFeGVjdXRvcnNDbGljayhldmVudDogYW55KSB7XHJcbiAgICAvLyB0aGlzLmV4Y2x1ZGVQcmVBY3RFeGVjdXRvcnMgPSAhdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzO1xyXG4gICAgaWYgKHRoaXMuYXV0b0FsbFBhc3NFeGVjdXRvcnMgPT09IHRydWUgJiYgdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wZXJmb3JtZXJPcHRpb25zLmV4Y2x1c2lvbk5vdEFsbG93ZWQnKSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZXhjbHVkZVByZUFjdEV4ZWN1dG9ycyA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZXhjbHVkZVByZUFjdEV4ZWN1dG9ycyAmJiB0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMpIHtcclxuICAgICAgdGhpcy5hdXRvUHJlQWN0RXhlY3V0b3JzID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBleGNsdWRlQWxsUGFzc0V4ZWN1dG9yc0NsaWNrKGV2ZW50OiBhbnkpIHtcclxuICAgIC8vIHRoaXMuZXhjbHVkZUFsbFBhc3NFeGVjdXRvcnMgPSAhdGhpcy5leGNsdWRlQWxsUGFzc0V4ZWN1dG9ycztcclxuICAgIGlmICh0aGlzLmV4Y2x1ZGVBbGxQYXNzRXhlY3V0b3JzKSB7XHJcbiAgICAgIGlmICh0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMpIHtcclxuICAgICAgICB0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5hdXRvQWxsUGFzc0V4ZWN1dG9ycykge1xyXG4gICAgICAgIHRoaXMuYXV0b0FsbFBhc3NFeGVjdXRvcnMgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGF1dG9Qcm9jSW5zdENyZWF0b3JDbGljayhldmVudDogYW55KSB7XHJcbiAgICAvLyBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnByb3BlcnR5RGF0YS5Db21wbGV0ZVN0cmF0ZWd5ICE9PSB0aGlzLmRlc2lnbmVyU3RhdGUuY29tcGxldGVJdGVyYXRvclswXS5rZXlcclxuICAgIC8vICAgJiYgdGhpcy5hdXRvUHJvY0luc3RDcmVhdG9yID09PSB0cnVlICkge1xyXG4gICAgLy8gICB0aGlzLm1lc3NhZ2UuaW5mbygn44CQ5a6M5oiQ562W55Wl44CR5Li644CQ5Lya562+44CR5pe277yM5LiN5YWB6K646K6+572u6Ieq5Yqo5a6h5om577yM6K+35LqG6Kej77yBJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHRoaXMuYXV0b1Byb2NJbnN0Q3JlYXRvciA9IGZhbHNlO1xyXG4gICAgLy8gICB9KTtcclxuICAgIC8vICAgcmV0dXJuO1xyXG4gICAgLy8gfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5wcm9wZXJ0eURhdGEuQXNzaWduU3RyYXRlZ3kgPT09IHRoaXMuZGVzaWduZXJTdGF0ZS5hc3NpZ25JdGVyYXRvclsyXS5rZXlcclxuICAgICAgJiYgdGhpcy5hdXRvUHJvY0luc3RDcmVhdG9yID09PSB0cnVlICkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGVyZm9ybWVyT3B0aW9ucy5hcHByb3ZhbE5vdEFsbG93ZWRBc1NldCcpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hdXRvUHJvY0luc3RDcmVhdG9yID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLmF1dG9Qcm9jSW5zdENyZWF0b3IgPSAhdGhpcy5hdXRvUHJvY0luc3RDcmVhdG9yO1xyXG4gICAgaWYgKHRoaXMuYXV0b1Byb2NJbnN0Q3JlYXRvciAmJiB0aGlzLmV4Y2x1ZGVQcm9jSW5zdENyZWF0b3IpIHtcclxuICAgICAgdGhpcy5leGNsdWRlUHJvY0luc3RDcmVhdG9yID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhdXRvUHJlQWN0RXhlY3V0b3JzQ2xpY2soZXZlbnQ6IGFueSkge1xyXG4gICAgLy8gaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5wcm9wZXJ0eURhdGEuQ29tcGxldGVTdHJhdGVneSAhPT0gdGhpcy5kZXNpZ25lclN0YXRlLmNvbXBsZXRlSXRlcmF0b3JbMF0ua2V5XHJcbiAgICAvLyAgICYmIHRoaXMuYXV0b1ByZUFjdEV4ZWN1dG9ycyA9PT0gdHJ1ZSkge1xyXG4gICAgLy8gICB0aGlzLm1lc3NhZ2UuaW5mbygn44CQ5a6M5oiQ562W55Wl44CR5Li644CQ5Lya562+44CR5pe277yM5LiN5YWB6K646K6+572u6Ieq5Yqo5a6h5om577yM6K+35LqG6Kej77yBJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHRoaXMuYXV0b1ByZUFjdEV4ZWN1dG9ycyA9IGZhbHNlO1xyXG4gICAgLy8gICB9KTtcclxuICAgIC8vICAgcmV0dXJuO1xyXG4gICAgLy8gfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5wcm9wZXJ0eURhdGEuQXNzaWduU3RyYXRlZ3kgPT09IHRoaXMuZGVzaWduZXJTdGF0ZS5hc3NpZ25JdGVyYXRvclsyXS5rZXlcclxuICAgICAgJiYgdGhpcy5hdXRvUHJlQWN0RXhlY3V0b3JzID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wZXJmb3JtZXJPcHRpb25zLmFwcHJvdmFsTm90QWxsb3dlZCcpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hdXRvUHJlQWN0RXhlY3V0b3JzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5leGNsdWRlQWxsUGFzc0V4ZWN1dG9ycyA9PT0gdHJ1ZSAmJiB0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMuYXBwcm92YWxOb3RBbGxvd2VkQXNTZXQnKSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuYXV0b1ByZUFjdEV4ZWN1dG9ycyA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdGhpcy5hdXRvUHJlQWN0RXhlY3V0b3JzID0gIXRoaXMuYXV0b1ByZUFjdEV4ZWN1dG9ycztcclxuICAgIGlmICh0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMgJiYgdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzKSB7XHJcbiAgICAgIHRoaXMuZXhjbHVkZVByZUFjdEV4ZWN1dG9ycyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXV0b0FsbFBhc3NFeGVjdXRvcnNDbGljayhldmVudDogYW55KSB7XHJcbiAgICAvLyBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnByb3BlcnR5RGF0YS5Db21wbGV0ZVN0cmF0ZWd5ICE9PSB0aGlzLmRlc2lnbmVyU3RhdGUuY29tcGxldGVJdGVyYXRvclswXS5rZXlcclxuICAgIC8vICAgJiYgdGhpcy5hdXRvQWxsUGFzc0V4ZWN1dG9ycyA9PT0gdHJ1ZSkge1xyXG4gICAgLy8gICB0aGlzLm1lc3NhZ2UuaW5mbygn44CQ5a6M5oiQ562W55Wl44CR5Li644CQ5Lya562+44CR5pe277yM5LiN5YWB6K646K6+572u6Ieq5Yqo5a6h5om577yM6K+35LqG6Kej77yBJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHRoaXMuYXV0b0FsbFBhc3NFeGVjdXRvcnMgPSBmYWxzZTtcclxuICAgIC8vICAgfSk7XHJcbiAgICAvLyAgIHJldHVybjtcclxuICAgIC8vIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUucHJvcGVydHlEYXRhLkFzc2lnblN0cmF0ZWd5ID09PSB0aGlzLmRlc2lnbmVyU3RhdGUuYXNzaWduSXRlcmF0b3JbMl0ua2V5XHJcbiAgICAgICYmIHRoaXMuYXV0b0FsbFBhc3NFeGVjdXRvcnMgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMuYWxsb2NhdGlvblN0cmF0ZWd5SXNDb2xsZWN0JyksICgpID0+IHtcclxuICAgICAgICB0aGlzLmF1dG9BbGxQYXNzRXhlY3V0b3JzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLmF1dG9BbGxQYXNzRXhlY3V0b3JzID0gIXRoaXMuYXV0b0FsbFBhc3NFeGVjdXRvcnM7XHJcbiAgICBpZiAodGhpcy5hdXRvQWxsUGFzc0V4ZWN1dG9ycykge1xyXG4gICAgICBpZiAodGhpcy5leGNsdWRlQWxsUGFzc0V4ZWN1dG9ycykge1xyXG4gICAgICAgIHRoaXMuZXhjbHVkZUFsbFBhc3NFeGVjdXRvcnMgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzKSB7XHJcbiAgICAgICAgdGhpcy5leGNsdWRlUHJlQWN0RXhlY3V0b3JzID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFBlcmZvcm1lck9wdGlvbnMoKTogUGVyZm9ybWVyT3B0aW9ucyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBFeGNsdXNpb25QZXJmb3JtZXJzOiB0aGlzLmdldEV4Y2x1c2lvblBlcmZvcm1lcnMoKSxcclxuICAgICAgTm9QZXJmb3JtZXJTdHJhdGVneTogdGhpcy5ub1BlcmZvcm1lclN0cmF0ZWd5LFxyXG4gICAgICBIaXN0b3JpY0ZpcnN0OiB0aGlzLmhpc3RvcmljRmlyc3QsXHJcbiAgICAgIGF1dG9tYXRpY1BlcmZvcm1lcnM6IHRoaXMuZ2V0QXV0b1BlcmZvcm1lcnMoKVxyXG4gICAgfTtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRFeGNsdXNpb25QZXJmb3JtZXJzKCk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGV4Y2x1c2lvblBlcmY6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIGlmICh0aGlzLmV4Y2x1ZGVQcm9jSW5zdENyZWF0b3IpIHtcclxuICAgICAgZXhjbHVzaW9uUGVyZi5wdXNoKCdwcm9jSW5zdENyZWF0b3InKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmV4Y2x1ZGVQcmVBY3RFeGVjdXRvcnMpIHtcclxuICAgICAgZXhjbHVzaW9uUGVyZi5wdXNoKCdwcmVBY3RFeGVjdXRvcnMnKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmV4Y2x1ZGVBbGxQYXNzRXhlY3V0b3JzKSB7XHJcbiAgICAgIGV4Y2x1c2lvblBlcmYucHVzaCgnYWxsUGFzc0V4ZWN1dG9ycycpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZXhjbHVkZUV4cHJQZXJmb3JtZXIpIHtcclxuICAgICAgZXhjbHVzaW9uUGVyZi5wdXNoKGAke3RoaXMuZXhwclBlcmZvcm1lclR5cGV9IyR7dGhpcy5leGNsdWRlRXhwclBlcmZvcm1lcn1gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXhjbHVzaW9uUGVyZjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0QXV0b1BlcmZvcm1lcnMoKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBhdXRvUGVyZjogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuYXV0b1Byb2NJbnN0Q3JlYXRvcikge1xyXG4gICAgICBhdXRvUGVyZi5wdXNoKCdwcm9jSW5zdENyZWF0b3InKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmF1dG9QcmVBY3RFeGVjdXRvcnMpIHtcclxuICAgICAgYXV0b1BlcmYucHVzaCgncHJlQWN0RXhlY3V0b3JzJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hdXRvQWxsUGFzc0V4ZWN1dG9ycykge1xyXG4gICAgICBhdXRvUGVyZi5wdXNoKCdhbGxQYXNzRXhlY3V0b3JzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF1dG9QZXJmO1xyXG4gIH1cclxuXHJcbiAgb3BlbkV4cHJFZGl0b3IoKSB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICB0aGlzLmV4cHIuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkFkdmFuY2VkKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgY29udGV4dCA9IHRoaXMuZGVzaWduZXJTdGF0ZS5hZGRDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29udGV4dCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaWYgKHRoaXMuZXhjbHVkZUV4cHJQZXJmb3JtZXIpIHtcclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCh0aGlzLmV4Y2x1ZGVFeHByUGVyZm9ybWVyKTtcclxuICAgIC8vIH1cclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChkOiBzdHJpbmcpID0+IHtcclxuICAgICAgdGhpcy5leGNsdWRlRXhwclBlcmZvcm1lciA9IGQ7XHJcbiAgICAgIC8v54K55Ye756Gu5a6a5ZCO77yM5Y676Zmk6KGo6L6+5byP6YeM6Z2i55qE5paw5aKe55qE5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcyA9IHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoeCA9PiAhY29udGV4dC5zb21lKHkgPT4geS5rZXkgPT09IHgua2V5KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBvcmdUeXBlQ2hhbmdlKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEgPT09ICdTeXMnKSB7XHJcbiAgICAgIHRoaXMuZXhwclBlcmZvcm1lclR5cGUgPSB0aGlzLnZhcmlhYmxlT3JnVHlwZXNbMF0udmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICdBZG1pbmlzdHJhdGl2ZV9zdGFmZicpIHtcclxuICAgICAgdGhpcy5leHByUGVyZm9ybWVyVHlwZSA9IHRoaXMudmFyaWFibGVPcmdUeXBlc1sxXS52YWx1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLmV4Y2x1ZGVFeHByUGVyZm9ybWVyID0gJyc7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBlcmZvcm1lck9wdGlvbnNDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7IH1cclxuXHJcbiAgY29udmVydFRvKGRhdGE6IGFueVtdKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY29tcG9uZW50LnBlcmZvcm1lck9wdGlvbnMuc2V0XCIpO1xyXG4gIH1cclxufVxyXG4iXX0=