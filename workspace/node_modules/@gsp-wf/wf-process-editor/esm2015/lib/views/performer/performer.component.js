/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';
import { PerformerUIState } from './performer.uistate';
import { PerformerRepository } from './performer.repository';
import { PerformerViewModel } from './performer.viewmodel';
import { FormBuilder } from '@angular/forms';
import { BsModalService } from '@farris/ui-modal';
import { PerformerEditComponent } from './views/performer-edit/performer-edit.component';
import { MessagerService } from '@farris/ui-messager';
import { PerformerOptionsComponent } from './views/performer-options/performer-options.component';
import { DialogComponent } from '@farris/ui-dialog';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { PerformerInfo } from './entities/performer-info.entity';
import { DatagridComponent } from '@farris/ui-datagrid';
import { of } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { FDropdownDirective } from "@farris/ui-dropdown";
import { ProcessDeUtil } from '../../domain/process-de-util';
export class PerformerComponent {
    // 编辑状态，用于区分是新增还是编辑  new | edit
    /**
     * @param {?} viewModel
     * @param {?} uistate
     * @param {?} formBuilder
     * @param {?} resolver
     * @param {?} injector
     * @param {?} modalService
     * @param {?} message
     * @param {?} designerUIState
     * @param {?} expr
     * @param {?} http
     */
    constructor(viewModel, uistate, formBuilder, resolver, injector, modalService, message, designerUIState, expr, http) {
        this.viewModel = viewModel;
        this.uistate = uistate;
        this.formBuilder = formBuilder;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.http = http;
        this.display = true; // 控制矩阵参与者是否显示
        // 控制矩阵参与者是否显示
        this.type = 'defaultPerformer';
        this.nodeType = 'userActivity';
        // 解决选择意见后，下拉菜单无法收折的问题
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.isClose = true;
        this.modalConfig = {
            title: '参与者',
            width: 700,
            height: 400,
            showButtons: true
        };
        this.columns = [
            {
                field: 'type', width: 50, title: '类型',
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            },
            { field: 'performerName', width: 50, title: '名称' },
            { field: 'description', width: 100, title: '描述', showTips: true },
            {
                field: 'condition', width: 60, title: '启用条件', showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            if (e.rowData.type === 'wf.ComponentParticipantExpression') {
                                /** @type {?} */
                                const i = this.uistate.performerInfo.components.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => item.id === e.rowData.id));
                                this.uistate.performerInfo.components[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.ReportingLineParticipantExpression') {
                                /** @type {?} */
                                const i = this.uistate.performerInfo.reportingLines.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => item.id === e.rowData.id));
                                this.uistate.performerInfo.reportingLines[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.MatrixParticipantExpression') {
                                /** @type {?} */
                                const i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => item.id === e.rowData.id));
                                this.uistate.performerInfo.matrixParticipants[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.ActivityExecutorParticipantExpression') {
                                /** @type {?} */
                                const i = this.uistate.performerInfo.activityExecutors.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                item => item.id === e.rowData.id));
                                this.uistate.performerInfo.activityExecutors[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.OrganizationParticipantExpression') {
                                this.uistate.performerInfo.organizationParticipants[0].condition = '';
                            }
                        })
                    }
                }
            }
        ];
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        (rowIndex, rowData, column) => {
            return of(true);
        });
        this.GetOrganizationType();
    }
    /**
     * @param {?} partInfo
     * @return {?}
     */
    set value(partInfo) {
        if (partInfo.performers && partInfo.performers.length > 0) {
            this.uistate.performerInfo.performers = partInfo.performers;
            this.uistate.performersList = this.uistate.performersList.concat((/** @type {?} */ (partInfo.performers)));
            this.uistate.performersList.map((/**
             * @param {?} performer
             * @return {?}
             */
            performer => performer.description = this.performerDescription((/** @type {?} */ (performer)))));
        }
        if (partInfo.variablePerformers && partInfo.variablePerformers.length > 0) {
            this.uistate.performerInfo.variablePerformers = partInfo.variablePerformers;
            this.uistate.performersList = this.uistate.performersList.concat((/** @type {?} */ (partInfo.variablePerformers)));
            this.uistate.performersList.map((/**
             * @param {?} variablePerformers
             * @return {?}
             */
            variablePerformers => variablePerformers.description = this.performerDescription((/** @type {?} */ (variablePerformers)))));
        }
        if (partInfo.components && partInfo.components.length > 0) {
            this.uistate.performerInfo.components = partInfo.components;
            partInfo.components.forEach((/**
             * @param {?} cmp
             * @return {?}
             */
            cmp => {
                this.uistate.performersList.push({
                    id: cmp.id,
                    type: 'wf.ComponentParticipantExpression',
                    performerName: cmp.name,
                    description: this.componentDescription(cmp),
                    condition: cmp.condition
                });
            }));
        }
        if (partInfo.reportingLines && partInfo.reportingLines.length > 0) {
            this.uistate.performerInfo.reportingLines = partInfo.reportingLines;
            partInfo.reportingLines.forEach((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                this.uistate.performersList.push({
                    id: r.id,
                    type: 'wf.ReportingLineParticipantExpression',
                    performerName: r.reportingLineDefName + '-' + r.dimension,
                    description: this.reportingLineDescription(r),
                    condition: r.condition
                });
            }));
        }
        if (partInfo.activityExecutors && partInfo.activityExecutors.length > 0) {
            this.uistate.performerInfo.activityExecutors = partInfo.activityExecutors;
            partInfo.activityExecutors.forEach((/**
             * @param {?} handler
             * @return {?}
             */
            handler => {
                this.uistate.performersList.push({
                    id: handler.id,
                    type: 'wf.ActivityExecutorParticipantExpression',
                    performerName: '<' + handler.activityDefName + '>活动办理人',
                    description: '<' + handler.activityDefName + '>活动办理人',
                    condition: handler.condition
                });
            }));
        }
        if (partInfo.matrixParticipants && partInfo.matrixParticipants.length > 0) {
            this.uistate.performerInfo.matrixParticipants = partInfo.matrixParticipants;
            partInfo.matrixParticipants.forEach((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                this.uistate.performersList.push({
                    id: r.id,
                    type: 'wf.MatrixParticipantExpression',
                    performerName: r.matrixDefName + '-' + r.dataFieldAlias,
                    description: this.matrixDescription(r),
                    condition: r.condition
                });
            }));
        }
        if (partInfo.organizationParticipants && partInfo.organizationParticipants.length > 0) {
            this.uistate.performerInfo.organizationParticipants = partInfo.organizationParticipants;
            partInfo.organizationParticipants.forEach((/**
             * @param {?} o
             * @return {?}
             */
            o => {
                this.uistate.performersList.push({
                    id: o.id,
                    type: 'wf.OrganizationParticipantExpression',
                    performerName: o.organizationName,
                    description: o.organizationName + '，' + (o.includeChildren ? '包含下级' : '不包含下级'),
                    condition: o.condition
                });
            }));
        }
        if (partInfo.options) {
            this.uistate.performerInfo.options = partInfo.options;
        }
        this.uistate.performerInfo.isAllScope = partInfo.isAllScope;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.type = this.editorParams.type;
        this.nodeType = this.editorParams.nodeType;
        this.getMatrixConfig().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            if (re && re.currentValue === 'false') {
                this.display = false;
            }
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    switchChange(data) {
        if (data) {
            this.uistate.clearPerformer();
        }
    }
    // add() {
    //   this.editState = 'new';
    //   const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
    //   this.compRef = compFactory.create(this.injector);
    //   this.compRef.instance.display = this.display;
    //   const modalConfig = {
    //     title: '参与者选择',
    //     width: 700,
    //     height: 400,
    //     buttons: this.editFooter,
    //     showButtons: true
    //   };
    //   this.editDialog = this.modalService.show(this.compRef, modalConfig);
    // }
    /**
     * @param {?} performerType
     * @return {?}
     */
    addPerformer(performerType) {
        this.editState = 'new';
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.display = this.display;
        this.compRef.instance.performerType = performerType;
        /** @type {?} */
        const modalConfig = {
            title: '参与者选择',
            width: 700,
            height: 400,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
        this.dropDownEl.close();
    }
    /**
     * @return {?}
     */
    edit() {
        this.editState = 'edit';
        if (this.uistate.curPerformer) {
            /** @type {?} */
            const modalConfig = {
                title: '参与者选择',
                width: 700,
                height: 400,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            this.compRef.instance.performerType = this.uistate.curPerformer.type;
            switch (this.uistate.curPerformer.type) {
                case 'wf.PositionParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipantExpression',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.id === this.uistate.curPerformer.id))
                    };
                    break;
                case 'wf.UserParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipantExpression',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.id === this.uistate.curPerformer.id))
                    };
                    break;
                case 'wf.VariableParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.VariableParticipantExpression',
                        value: this.uistate.performerInfo.variablePerformers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.id === this.uistate.curPerformer.id))
                    };
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    /** @type {?} */
                    const reportingLine = this.uistate.performerInfo.reportingLines.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => {
                        return r.id === this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipantExpression',
                        value: reportingLine
                    };
                    /** @type {?} */
                    const url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + reportingLine.reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    (res) => {
                        if (!res) {
                            this.message.error('该条汇报关系数据的定义已删除，该条数据将删除');
                            this.remove();
                        }
                        else {
                            this.editDialog = this.modalService.show(this.compRef, modalConfig);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipantExpression':
                    /** @type {?} */
                    const matrix = this.uistate.performerInfo.matrixParticipants.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => {
                        return r.id === this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipantExpression',
                        value: matrix
                    };
                    /** @type {?} */
                    const urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + matrix.matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    (res) => {
                        if (!res) {
                            this.message.error('该条矩阵数据的定义已删除，该条数据将删除');
                            this.remove();
                        }
                        else {
                            this.editDialog = this.modalService.show(this.compRef, modalConfig);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipantExpression',
                        value: this.uistate.performerInfo.components.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        c => {
                            return c.id === this.uistate.curPerformer.id;
                        }))
                    };
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ActivityExecutorParticipantExpression',
                        value: this.uistate.performerInfo.activityExecutors.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        c => {
                            return c.id === this.uistate.curPerformer.id;
                        }))
                    };
                    break;
                case 'wf.OrganizationParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.OrganizationParticipantExpression',
                        value: this.uistate.performerInfo.organizationParticipants[0]
                    };
                    break;
            }
            if (this.uistate.curPerformer.type !== 'wf.ReportingLineParticipantExpression' &&
                this.uistate.curPerformer.type !== 'wf.MatrixParticipantExpression') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig);
            }
        }
    }
    /**
     * @return {?}
     */
    remove() {
        if (this.grid.selectedRow) {
            this.grid.endCellEdit();
            if (this.grid.selectedRow.data.type === 'wf.ComponentParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.components.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.reportingLines.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.reportingLines.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.matrixParticipants.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.ActivityExecutorParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.activityExecutors.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.activityExecutors.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.OrganizationParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.organizationParticipants = new Array();
            }
            else if (this.grid.selectedRow.data.type === 'wf.VariableParticipantExpression') {
                /** @type {?} */
                const i = this.uistate.performerInfo.variablePerformers.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.variablePerformers.splice(i, 1);
            }
            else {
                /** @type {?} */
                const i = this.uistate.performerInfo.performers.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item.id === this.grid.selectedRow.data.id));
                this.uistate.performerInfo.performers.splice(i, 1);
            }
            /** @type {?} */
            const index = this.uistate.performersList.findIndex((/**
             * @param {?} p
             * @return {?}
             */
            p => p.id === this.grid.selectedRow.data.id));
            this.uistate.performersList.splice(index, 1);
            this.grid.loadData(this.uistate.performersList);
        }
        else {
            this.message.info('请先选中一条参与者信息！');
        }
    }
    /**
     * @return {?}
     */
    clear() {
        this.uistate.performerInfo.performers = [];
        this.uistate.performerInfo.variablePerformers = [];
        this.uistate.performerInfo.components = [];
        this.uistate.performerInfo.reportingLines = [];
        this.uistate.performerInfo.matrixParticipants = [];
        this.uistate.performerInfo.activityExecutors = [];
        this.uistate.performerInfo.organizationParticipants = new Array();
        this.uistate.performersList = [];
        this.grid.loadData(this.uistate.performersList);
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.grid.endCellEdit();
        /** @type {?} */
        const object = {
            value: this.uistate.performerInfo, parameters: null
        };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @return {?}
     */
    editOK() {
        this.isClose = true;
        if (this.compRef) {
            /** @type {?} */
            const re = this.compRef.instance.getPerformers();
            if (re.userPerformers && re.userPerformers.length > 0) {
                re.userPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => {
                    /** @type {?} */
                    const i = this.uistate.performerInfo.performers.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    a => (a.id === p.id || a.performerId === p.performerId)));
                    if (i > -1) {
                        /** @type {?} */
                        const id = this.uistate.performerInfo.performers[i].id;
                        this.uistate.performerInfo.performers[i] = p;
                        /** @type {?} */
                        const index = this.uistate.performersList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        a => a.id === id));
                        this.uistate.performersList[index] = p;
                    }
                    else {
                        if (this.editState === 'edit') {
                            this.remove();
                        }
                        this.uistate.performerInfo.performers.push(p);
                        this.uistate.performersList = this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                performer => performer.description =
                    this.performerDescription((/** @type {?} */ (performer)))));
            }
            if (re.positions && re.positions.length > 0) {
                for (const position of re.positions) {
                    if (position && position !== null && position.id) {
                        /** @type {?} */
                        const p = position;
                        if (!p.performerId) {
                            this.message.info('尚未选择岗位！');
                            this.isClose = false;
                        }
                        else {
                            if ((!p.orgType || p.orgType == null) && (p.isRequired && p.positionType === '1')) {
                                this.message.info('尚未选择组织类型！');
                                this.isClose = false;
                            }
                            else if ((!p.orgId || p.orgId == null) && (p.isRequired && p.positionType === '1')) {
                                this.message.info('尚未填写组织！');
                                this.isClose = false;
                            }
                            else {
                                // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                                /** @type {?} */
                                const i = this.uistate.performerInfo.performers.findIndex((/**
                                 * @param {?} a
                                 * @return {?}
                                 */
                                a => (a.id === p.id || (a.performerId === p.performerId && a.orgId === p.orgId))));
                                if (i > -1) {
                                    /** @type {?} */
                                    const id = this.uistate.performerInfo.performers[i].id;
                                    this.uistate.performerInfo.performers[i] = p;
                                    /** @type {?} */
                                    const index = this.uistate.performersList.findIndex((/**
                                     * @param {?} a
                                     * @return {?}
                                     */
                                    a => a.id === id));
                                    this.uistate.performersList[index] = p;
                                }
                                else {
                                    this.uistate.performerInfo.performers.push(p);
                                    this.uistate.performersList = this.uistate.performersList.concat([p]);
                                }
                                this.uistate.performersList
                                    .filter((/**
                                 * @param {?} p
                                 * @return {?}
                                 */
                                p => p.type === this.uistate.typeCollection[0].value || p.type === this.uistate.typeCollection[1].value))
                                    .map((/**
                                 * @param {?} performer
                                 * @return {?}
                                 */
                                performer => performer.description =
                                    this.performerDescription((/** @type {?} */ (performer)))));
                            }
                        }
                    }
                }
            }
            if (re.component && re.component.metadataId && re.component.methodCode) {
                /** @type {?} */
                const i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.id === re.component.id));
                if (i > -1) {
                    this.uistate.performerInfo.components[i] = re.component;
                    /** @type {?} */
                    const index = this.uistate.performersList.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    a => a.id === re.component.id));
                    this.uistate.performersList[index] = {
                        id: re.component.id,
                        type: 'wf.ComponentParticipantExpression',
                        performerName: re.component.name,
                        description: this.componentDescription(re.component),
                        condition: re.component.condition
                    };
                }
                else {
                    this.uistate.performerInfo.components.push(re.component);
                    this.uistate.performersList.push({
                        id: re.component.id,
                        type: 'wf.ComponentParticipantExpression',
                        performerName: re.component.name,
                        description: this.componentDescription(re.component),
                        condition: ''
                    });
                }
            }
            if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {
                if (re.reportingLine.reportingReferObject === 'dept' && !re.reportingLine.refOrgId) {
                    this.isClose = false;
                    this.message.info('“部门”汇报关系类型下，参照人所在部门不能为空');
                }
                else if (re.reportingLine.reportingReferObject !== 'dept' && !re.reportingLine.refUserId && !re.reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
                    this.isClose = false;
                    this.message.info('“用户”汇报关系类型下，参照人不能为空');
                }
                else {
                    this.isClose = true;
                    this.addReportingLineData(re);
                }
            }
            if (re.matrix && re.matrix.matrixDefId) {
                if (!re.matrix.conditionField1 && !re.matrix.conditionField2 && !re.matrix.conditionField3) {
                    this.isClose = false;
                    this.message.info('条件字段至少要存在一个');
                }
                else if (!re.matrix.dataFieldAlias) {
                    this.isClose = false;
                    this.message.info('数据字段不能为空');
                }
                else {
                    this.isClose = true;
                    this.addMatrixData(re);
                }
            }
            if (re.activityExecutorPerformers && re.activityExecutorPerformers.length > 0) {
                re.activityExecutorPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => {
                    /** @type {?} */
                    const i = this.uistate.performerInfo.activityExecutors.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    a => (a.id === p.id || a.activityDefId === p.activityDefId)));
                    if (i < 0) {
                        if (this.editState === 'edit') {
                            this.remove(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                        }
                        this.uistate.performerInfo.activityExecutors.push(p);
                        this.uistate.performersList = this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.type === this.uistate.typeCollection[5].value))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                performer => performer.description =
                    this.performerDescription((/** @type {?} */ (performer)))));
            }
            if (re.organizationParticipant) {
                console.log(re.organizationParticipant);
                this.uistate.performerInfo.organizationParticipants = [re.organizationParticipant];
                this.uistate.performersList = this.uistate.performersList.filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.type !== 'wf.OrganizationParticipantExpression'));
                this.uistate.performersList = this.uistate.performersList.concat({
                    id: re.organizationParticipant.id || ProcessDeUtil.GenerateElementId(),
                    type: 'wf.OrganizationParticipantExpression',
                    performerName: re.organizationParticipant.organizationName,
                    description: re.organizationParticipant.organizationName + '，且' + (re.organizationParticipant.includeChildren ? '包含下级' : '不包含下级'),
                    condition: re.organizationParticipant.condition
                });
            }
            this.grid.loadData(this.uistate.performersList);
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
    }
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    addReportingLineData(re) {
        /** @type {?} */
        const i = this.uistate.performerInfo.reportingLines.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        a => a.id === re.reportingLine.id));
        if (i > -1) {
            this.uistate.performerInfo.reportingLines[i] = re.reportingLine;
            /** @type {?} */
            const index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => a.id === re.reportingLine.id));
            this.uistate.performersList[index] = {
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipantExpression',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            };
        }
        else {
            for (const reportingLineData of this.uistate.performerInfo.reportingLines) {
                if (reportingLineData.reportingLineDefId === re.reportingLine.definitionId &&
                    reportingLineData.dimension === re.reportingLine.dimension &&
                    reportingLineData.refUserId === re.reportingLine.referUserId &&
                    reportingLineData.refEmployeeId === re.reportingLine.refEmployeeId &&
                    reportingLineData.refOrgId === re.reportingLine.referDeptId) {
                    this.message.error('该汇报关系已经进行过配置');
                    return;
                }
            }
            this.uistate.performerInfo.reportingLines.push(re.reportingLine);
            this.uistate.performersList.push({
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipantExpression',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            });
        }
    }
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    addMatrixData(re) {
        /** @type {?} */
        const i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        a => a.id === re.matrix.id));
        if (i > -1) {
            this.uistate.performerInfo.matrixParticipants[i] = re.matrix;
            /** @type {?} */
            const index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => a.id === re.matrix.id));
            this.uistate.performersList[index] = {
                id: re.matrix.id,
                type: 'wf.MatrixParticipantExpression',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            };
        }
        else {
            for (const matrixData of this.uistate.performerInfo.matrixParticipants) {
                if (matrixData.matrixDefId === re.matrix.matrixDefId &&
                    matrixData.conditionField1 === re.matrix.conditionField1 &&
                    matrixData.conditionField2 === re.matrix.conditionField2 &&
                    matrixData.conditionField3 === re.matrix.conditionField3 &&
                    matrixData.dataFieldAlias === re.matrix.dataFieldAlias) {
                    this.message.error('该矩阵已经进行过配置');
                    return;
                }
            }
            this.uistate.performerInfo.matrixParticipants.push(re.matrix);
            this.uistate.performersList.push({
                id: re.matrix.id,
                type: 'wf.MatrixParticipantExpression',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            });
        }
    }
    /**
     * @return {?}
     */
    editCancel() {
        if (this.editDialog) {
            this.editDialog.close();
        }
    }
    /**
     * @return {?}
     */
    participantOptionsSet() {
        this.uistate.performerInfo.options = this.options.getPerformerOptions();
        this.optionsDialog.close();
    }
    /**
     * @private
     * @param {?} performer
     * @return {?}
     */
    performerDescription(performer) {
        if (performer.type === 'wf.UserParticipantExpression' || performer.type === 'wf.VariableParticipantExpression') {
            if (performer.tag === 'expression') {
                return performer.performerId;
            }
            else {
                if (performer.orgName) {
                    return `组织：${performer.orgName}`;
                }
                else {
                    return '';
                }
            }
        }
        else if (performer.type === 'wf.PositionParticipantExpression') {
            if (this.designerUIState.scene === 'inSuite') {
                return null;
            }
            if (((/** @type {?} */ (performer))).positionType === '1') {
                if (performer.orgId) {
                    return `岗位类型：通用岗位，组织：${performer.orgId}`;
                }
                else {
                    return `岗位类型：通用岗位`;
                }
            }
            else if (((/** @type {?} */ (performer))).positionType === '0') {
                return '岗位类型：组织岗位';
            }
        }
        else if (performer.type === 'wf.ActivityExecutorParticipantExpression') {
            return performer.performerName;
        }
    }
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    componentDescription(component) {
        /** @type {?} */
        let des = `构件：${component.name},参数：{`;
        if (component.actualParameters && component.actualParameters.length > 0) {
            component.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            p => {
                des += `${p.code}：${p.value}，`;
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    }
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    reportingLineDescription(reportingLine) {
        /** @type {?} */
        let description = '';
        if (reportingLine.refUserId) {
            description += `参照人：${reportingLine.refUserId}`;
        }
        if (reportingLine.refEmployeeId) {
            description += `参照人：${reportingLine.refEmployeeId}`;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += `，`;
            }
            if (reportingLine.refEmployeeId) {
                description += `，`;
            }
            description += `参照组织：${reportingLine.refOrgId}`;
        }
        return description;
    }
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    matrixDescription(matrix) {
        /** @type {?} */
        let description = '';
        if (matrix.conditionField1) {
            description += `条件1：${matrix.conditionFieldText1}，`;
        }
        if (matrix.conditionField2) {
            description += `条件2：${matrix.conditionFieldText2}，`;
        }
        if (matrix.conditionField3) {
            description += `条件3：${matrix.conditionFieldText3}，`;
        }
        if (matrix.dataFieldAlias) {
            description += `数据：${matrix.dataFieldAlias}，`;
        }
        return description.slice(0, description.length - 1);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    editConditon(e) {
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            for (const schema of this.designerUIState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        let context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            for (const variable of this.designerUIState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            for (const variable of this.designerUIState.activityComponentContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        (cond) => {
            if (this.grid.selectedRow.data.type === 'wf.ComponentParticipantExpression') {
                this.uistate.performerInfo.components.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.id === this.grid.selectedRow.data.id)).condition = cond;
            }
            else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipantExpression') {
                this.uistate.performerInfo.reportingLines.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.id === this.grid.selectedRow.data.id)).condition = cond;
            }
            else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipantExpression') {
                this.uistate.performerInfo.matrixParticipants.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.id === this.grid.selectedRow.data.id)).condition = cond;
            }
            else if (this.grid.selectedRow.data.type === 'wf.ActivityExecutorParticipantExpression') {
                this.uistate.performerInfo.activityExecutors.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.id === this.grid.selectedRow.data.id)).condition = cond;
            }
            else {
                this.uistate.performerInfo.performers.find((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.id === this.grid.selectedRow.data.id)).condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    selectChanged(data) {
        this.uistate.curPerformer = data.data;
    }
    /**
     * @private
     * @return {?}
     */
    GetOrganizationType() {
        /** @type {?} */
        const url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        d => ({ value: d.id, text: d.name })))));
    }
    /**
     * @private
     * @return {?}
     */
    getMatrixConfig() {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/generalConfig/Is_EnableMatrix`;
        return this.http.get(url);
    }
}
PerformerComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-performer',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-page-header\">\r\n    <nav class=\"f-page-header-base\">\r\n      <div class=\"f-title\">\r\n        <span class=\"f-title-icon f-text-orna-bill\">\r\n          <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n        </span>\r\n        <h4 *ngIf=\"nodeType==='notifyActivity' || type==='defaultPerformer'\"  class=\"f-title-text\">\u529E\u7406\u4EBA\u5217\u8868</h4>\r\n        <h5 *ngIf=\"type==='assignPerformer'\" class=\"f-title-subtitle\">\u5168\u5458\u8303\u56F4</h5>\r\n        <farris-switch *ngIf=\"type==='assignPerformer'\" style=\"height: 22px;\"\r\n          [(ngModel)]=\"uistate.performerInfo.isAllScope\" name=\"isAllScope\"\r\n          [readonly]=\"false\" (valueChange)=\"switchChange($event)\"></farris-switch>\r\n      </div>\r\n      <div class=\"btn-toolbar btn-group-lg\">\r\n      <!--<button class=\"btn btn-primary mr-2\" (click)=\"add()\">\u65B0\u589E</button>-->\r\n        <div *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn-group mr-2\"  fDropdown #dropdownEl=\"fDropdown\">\r\n          <button class=\"btn btn-primary dropdown-toggle\" fDropdownToggle type=\"button\">\r\n            \u65B0\u589E\r\n          </button>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression')\"><span>\u7528\u6237</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression')\"><span>\u53D8\u91CF\u53C2\u4E0E\u8005</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression')\"><span>{{designerUIState.scene==='inSuite'?'\u89D2\u8272':'\u5C97\u4F4D'}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression')\"><span>\u6C47\u62A5\u5173\u7CFB</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression')\"><span>\u5386\u53F2\u6D3B\u52A8\u529E\u7406\u4EBA</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression')\"><span>\u77E9\u9635\u5173\u7CFB</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression')\"><span>\u53C2\u4E0E\u8005\u6784\u4EF6</span></li>\r\n            <li *ngIf=\"type==='assignPerformer'\" class=\"dropdown-item\" (click)=\"addPerformer('wf.OrganizationParticipantExpression')\"><span>\u5355\u4F4D/\u90E8\u95E8\r\n            </span></li>\r\n          </div>\r\n        </div>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" [disabled]=\"(!uistate.curPerformer)\"\r\n        (click)=\"edit()\">\u7F16\u8F91</button>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" (click)=\"remove()\">\u79FB\u9664</button>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" (click)=\"clear()\">\u6E05\u7A7A</button>\r\n        <button *ngIf=\"nodeType==='userActivity' && type==='defaultPerformer'\" class=\"btn btn-secondary\" (click)=\"participantOptions.show()\">\u529E\u7406\u4EBA\u9009\u9879</button>\r\n      </div>\r\n    </nav>\r\n  </div>\r\n  <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <farris-datagrid #grid [data]=\"uistate.performersList\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n        [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n        [multiSelect]=\"false\" [afterEdit]=\"afterEdit\" (selectChanged)=\"selectChanged($event)\">\r\n      </farris-datagrid>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">\u53D6\u6D88</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n\r\n<farris-dialog #participantOptions [buttons]=\"buttonRef\" [width]=\"500\" [height]=\"530\" title=\"'\u53C2\u4E0E\u8005\u9009\u9879'\">\r\n  <app-performer-options [value]=\"uistate.performerInfo.options\"></app-performer-options>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-sm btn-default px-3\" (click)=\"participantOptions.close()\">\u53D6\u6D88</button>\r\n  <button class=\"btn btn-sm btn-primary px-3\" (click)=\"participantOptionsSet()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n",
                providers: [PerformerViewModel, PerformerRepository, PerformerUIState],
                styles: [""]
            }] }
];
/** @nocollapse */
PerformerComponent.ctorParameters = () => [
    { type: PerformerViewModel },
    { type: PerformerUIState },
    { type: FormBuilder },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: BsModalService },
    { type: MessagerService },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: HttpService }
];
PerformerComponent.propDecorators = {
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    editFooter: [{ type: ViewChild, args: ['editFooter',] }],
    options: [{ type: ViewChild, args: [PerformerOptionsComponent,] }],
    optionsDialog: [{ type: ViewChild, args: ['participantOptions',] }],
    grid: [{ type: ViewChild, args: [DatagridComponent,] }],
    dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    value: [{ type: Input }],
    editorParams: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    PerformerComponent.prototype.display;
    /** @type {?} */
    PerformerComponent.prototype.type;
    /** @type {?} */
    PerformerComponent.prototype.nodeType;
    /** @type {?} */
    PerformerComponent.prototype.modalFooter;
    /** @type {?} */
    PerformerComponent.prototype.editFooter;
    /** @type {?} */
    PerformerComponent.prototype.options;
    /** @type {?} */
    PerformerComponent.prototype.optionsDialog;
    /** @type {?} */
    PerformerComponent.prototype.grid;
    /** @type {?} */
    PerformerComponent.prototype.dropDownEl;
    /** @type {?} */
    PerformerComponent.prototype.closeModal;
    /** @type {?} */
    PerformerComponent.prototype.submitModal;
    /** @type {?} */
    PerformerComponent.prototype.editorParams;
    /** @type {?} */
    PerformerComponent.prototype.editDialog;
    /** @type {?} */
    PerformerComponent.prototype.compRef;
    /** @type {?} */
    PerformerComponent.prototype.isClose;
    /** @type {?} */
    PerformerComponent.prototype.modalConfig;
    /** @type {?} */
    PerformerComponent.prototype.columns;
    /** @type {?} */
    PerformerComponent.prototype.curPerformer;
    /** @type {?} */
    PerformerComponent.prototype.editState;
    /** @type {?} */
    PerformerComponent.prototype.afterEdit;
    /** @type {?} */
    PerformerComponent.prototype.viewModel;
    /** @type {?} */
    PerformerComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.message;
    /** @type {?} */
    PerformerComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.http;
}
export class PerformerConverter {
    constructor() { }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if ((data.performers && data.performers.length > 0)
            || (data.variablePerformers && data.variablePerformers.length > 0)
            || (data.components && data.components.length > 0)
            || (data.reportingLines && data.reportingLines.length > 0)
            || (data.matrixParticipants && data.matrixParticipants.length > 0)
            || (data.activityExecutors && data.activityExecutors.length > 0)
            || (data.organizationParticipants && data.organizationParticipants.length > 0)
            || data.isAllScope) {
            return '（已设置）';
        }
        else {
            return '（未设置）';
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybWVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvcGVyZm9ybWVyL3BlcmZvcm1lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXVCLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUFnQixNQUFNLGVBQWUsQ0FBQztBQUV0SyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLGNBQWMsRUFBYyxNQUFNLGtCQUFrQixDQUFDO0FBQzlELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQ3pGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQUNsRyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFcEQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDNUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVwRixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDakUsT0FBTyxFQUFjLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEUsT0FBTyxFQUFj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QUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7ZUFDOUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7ZUFDL0QsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztlQUMvQyxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQ3ZELENBQUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQy9ELENBQUMsSUFBSSxDQUFDLGlCQUFpQixJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQzdELENBQUMsSUFBSSxDQUFDLHdCQUF3QixJQUFJLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQzNFLElBQUksQ0FBQyxVQUFVLEVBQ2xCO1lBQ0EsT0FBTyxPQUFPLENBQUM7U0FDaEI7YUFBTTtZQUNMLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEhvc3RCaW5kaW5nLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3IsIENvbXBvbmVudFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy9pZGUtcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJVSVN0YXRlIH0gZnJvbSAnLi9wZXJmb3JtZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IFBlcmZvcm1lclJlcG9zaXRvcnkgfSBmcm9tICcuL3BlcmZvcm1lci5yZXBvc2l0b3J5JztcclxuaW1wb3J0IHsgUGVyZm9ybWVyVmlld01vZGVsIH0gZnJvbSAnLi9wZXJmb3JtZXIudmlld21vZGVsJztcclxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlLCBCc01vZGFsUmVmIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IFBlcmZvcm1lckVkaXRDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdzL3BlcmZvcm1lci1lZGl0L3BlcmZvcm1lci1lZGl0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50IH0gZnJvbSAnLi92aWV3cy9wZXJmb3JtZXItb3B0aW9ucy9wZXJmb3JtZXItb3B0aW9ucy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IFBlcmZvcm1lckVudGl0eSB9IGZyb20gJy4vZW50aXRpZXMvcGVyZm9ybWVyLmVudGl0eSc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSwgRXhwckVkaXRNb2RlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5IH0gZnJvbSAnLi92aWV3cy9yZXBvcnRpbmctbGluZS9yZXBvcnRpbmctbGluZS1kYXRhLmVudGl0eSc7XHJcbmltcG9ydCB7IFBlcmZvcm1lckluZm8gfSBmcm9tICcuL2VudGl0aWVzL3BlcmZvcm1lci1pbmZvLmVudGl0eSc7XHJcbmltcG9ydCB7IERhdGFDb2x1bW4sIERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgUG9zaXRpb25QZXJmb3JtZXJFbnRpdHkgfSBmcm9tICcuL2VudGl0aWVzL3Bvc2l0aW9uLXBlcmZvcm1lci5lbnRpdHknO1xyXG5pbXBvcnQgeyBIdHRwU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXIgfSBmcm9tICcuL3ZpZXdzL2NvbXBvbmVudC1wZXJmb3JtZXIvY29tcG9uZW50LXBlcmZvcm1lci5lbnRpdHknO1xyXG5pbXBvcnQge01hdHJpeERhdGFJbmZvRW50aXR5fSBmcm9tICcuL3ZpZXdzL21hdHJpeC1wZXJmb3JtZXIvZW50aXRpcy9tYXRyaXgtZGF0YS1pbmZvLmVudGl0eSc7XHJcbmltcG9ydCB7RkRyb3Bkb3duRGlyZWN0aXZlfSBmcm9tIFwiQGZhcnJpcy91aS1kcm9wZG93blwiO1xyXG5pbXBvcnQgeyBBc3NpZ25QZXJmb3JtZXJDb25maWdDb21wb25lbnQgfSBmcm9tICcuLi9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy9hc3NpZ24tcGVyZm9ybWVyLWNvbmZpZy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVVdGlsIH0gZnJvbSAnLi4vLi4vZG9tYWluL3Byb2Nlc3MtZGUtdXRpbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1wZXJmb3JtZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wZXJmb3JtZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3BlcmZvcm1lci5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1BlcmZvcm1lclZpZXdNb2RlbCwgUGVyZm9ybWVyUmVwb3NpdG9yeSwgUGVyZm9ybWVyVUlTdGF0ZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIFBlcmZvcm1lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIGRpc3BsYXkgPSB0cnVlOyAvLyDmjqfliLbnn6npmLXlj4LkuI7ogIXmmK/lkKbmmL7npLpcclxuXHJcbiAgdHlwZTogJ2RlZmF1bHRQZXJmb3JtZXInIHwgJ2Fzc2lnblBlcmZvcm1lcicgPSAnZGVmYXVsdFBlcmZvcm1lcic7XHJcbiAgbm9kZVR5cGU6ICd1c2VyQWN0aXZpdHknIHwgJ25vdGlmeUFjdGl2aXR5JyAgPSAndXNlckFjdGl2aXR5JztcclxuXHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2VkaXRGb290ZXInKSBlZGl0Rm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoUGVyZm9ybWVyT3B0aW9uc0NvbXBvbmVudCkgb3B0aW9uczogUGVyZm9ybWVyT3B0aW9uc0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdwYXJ0aWNpcGFudE9wdGlvbnMnKSBvcHRpb25zRGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChEYXRhZ3JpZENvbXBvbmVudCkgZ3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnZHJvcGRvd25FbCcpIGRyb3BEb3duRWw6IEZEcm9wZG93bkRpcmVjdGl2ZTsgLy8g6Kej5Yaz6YCJ5oup5oSP6KeB5ZCO77yM5LiL5ouJ6I+c5Y2V5peg5rOV5pS25oqY55qE6Zeu6aKYXHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHN1Ym1pdE1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKHBhcnRJbmZvOiBQZXJmb3JtZXJJbmZvKSB7XHJcbiAgICBpZiAocGFydEluZm8ucGVyZm9ybWVycyAmJiBwYXJ0SW5mby5wZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycyA9IHBhcnRJbmZvLnBlcmZvcm1lcnM7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQocGFydEluZm8ucGVyZm9ybWVycyBhcyBhbnlbXSk7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5tYXAocGVyZm9ybWVyID0+IHBlcmZvcm1lci5kZXNjcmlwdGlvbiA9IHRoaXMucGVyZm9ybWVyRGVzY3JpcHRpb24ocGVyZm9ybWVyIGFzIGFueSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRJbmZvLnZhcmlhYmxlUGVyZm9ybWVycyAmJiBwYXJ0SW5mby52YXJpYWJsZVBlcmZvcm1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby52YXJpYWJsZVBlcmZvcm1lcnMgPSBwYXJ0SW5mby52YXJpYWJsZVBlcmZvcm1lcnM7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQocGFydEluZm8udmFyaWFibGVQZXJmb3JtZXJzIGFzIGFueVtdKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0Lm1hcCh2YXJpYWJsZVBlcmZvcm1lcnMgPT4gdmFyaWFibGVQZXJmb3JtZXJzLmRlc2NyaXB0aW9uID0gdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbih2YXJpYWJsZVBlcmZvcm1lcnMgYXMgYW55KSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8uY29tcG9uZW50cyAmJiBwYXJ0SW5mby5jb21wb25lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cyA9IHBhcnRJbmZvLmNvbXBvbmVudHM7XHJcbiAgICAgIHBhcnRJbmZvLmNvbXBvbmVudHMuZm9yRWFjaChjbXAgPT4ge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5wdXNoKHtcclxuICAgICAgICAgIGlkOiBjbXAuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgIHBlcmZvcm1lck5hbWU6IGNtcC5uYW1lLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY29tcG9uZW50RGVzY3JpcHRpb24oY21wKSxcclxuICAgICAgICAgIGNvbmRpdGlvbjogY21wLmNvbmRpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5yZXBvcnRpbmdMaW5lcyAmJiBwYXJ0SW5mby5yZXBvcnRpbmdMaW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzID0gcGFydEluZm8ucmVwb3J0aW5nTGluZXM7XHJcbiAgICAgIHBhcnRJbmZvLnJlcG9ydGluZ0xpbmVzLmZvckVhY2gociA9PiB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgaWQ6IHIuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICBwZXJmb3JtZXJOYW1lOiByLnJlcG9ydGluZ0xpbmVEZWZOYW1lICsgJy0nICsgci5kaW1lbnNpb24sXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5yZXBvcnRpbmdMaW5lRGVzY3JpcHRpb24ociksXHJcbiAgICAgICAgICBjb25kaXRpb246IHIuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYocGFydEluZm8uYWN0aXZpdHlFeGVjdXRvcnMgJiYgcGFydEluZm8uYWN0aXZpdHlFeGVjdXRvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9ycyA9IHBhcnRJbmZvLmFjdGl2aXR5RXhlY3V0b3JzO1xyXG4gICAgICBwYXJ0SW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5mb3JFYWNoKGhhbmRsZXIgPT4ge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5wdXNoKHtcclxuICAgICAgICAgIGlkOiBoYW5kbGVyLmlkLFxyXG4gICAgICAgICAgdHlwZTogJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogJzwnICsgaGFuZGxlci5hY3Rpdml0eURlZk5hbWUgKyAnPua0u+WKqOWKnueQhuS6uicsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJzwnICsgaGFuZGxlci5hY3Rpdml0eURlZk5hbWUgKyAnPua0u+WKqOWKnueQhuS6uicsXHJcbiAgICAgICAgICBjb25kaXRpb246IGhhbmRsZXIuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzICYmIHBhcnRJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cyA9IHBhcnRJbmZvLm1hdHJpeFBhcnRpY2lwYW50cztcclxuICAgICAgcGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzLmZvckVhY2gociA9PiB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgaWQ6IHIuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgIHBlcmZvcm1lck5hbWU6IHIubWF0cml4RGVmTmFtZSArICctJyArIHIuZGF0YUZpZWxkQWxpYXMsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5tYXRyaXhEZXNjcmlwdGlvbihyKSxcclxuICAgICAgICAgIGNvbmRpdGlvbjogci5jb25kaXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzICYmIHBhcnRJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50cyA9IHBhcnRJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50cztcclxuICAgICAgcGFydEluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzLmZvckVhY2gobyA9PiB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgaWQ6IG8uaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgIHBlcmZvcm1lck5hbWU6IG8ub3JnYW5pemF0aW9uTmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBvLm9yZ2FuaXphdGlvbk5hbWUgKyfvvIwnICsoby5pbmNsdWRlQ2hpbGRyZW4gPyAn5YyF5ZCr5LiL57qnJzon5LiN5YyF5ZCr5LiL57qnJyksXHJcbiAgICAgICAgICBjb25kaXRpb246IG8uY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8ub3B0aW9ucykge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcHRpb25zID0gcGFydEluZm8ub3B0aW9ucztcclxuICAgIH1cclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmlzQWxsU2NvcGUgPSBwYXJ0SW5mby5pc0FsbFNjb3BlO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KCkgZWRpdG9yUGFyYW1zOiBhbnkgPSB7fTtcclxuXHJcbiAgZWRpdERpYWxvZzogQnNNb2RhbFJlZjtcclxuICBjb21wUmVmOiBDb21wb25lbnRSZWY8UGVyZm9ybWVyRWRpdENvbXBvbmVudD47XHJcbiAgaXNDbG9zZSA9IHRydWU7XHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6ICflj4LkuI7ogIUnLFxyXG4gICAgd2lkdGg6IDcwMCxcclxuICAgIGhlaWdodDogNDAwLFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAndHlwZScsIHdpZHRoOiA1MCwgdGl0bGU6ICfnsbvlnosnLFxyXG4gICAgICBmb3JtYXR0ZXI6IHtcclxuICAgICAgICB0eXBlOiAnZW51bScsXHJcbiAgICAgICAgb3B0aW9uczogeyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICd0ZXh0JywgZGF0YTogdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uIH1cclxuICAgICAgfVxyXG4gICAgIH0sXHJcbiAgICB7IGZpZWxkOiAncGVyZm9ybWVyTmFtZScsIHdpZHRoOiA1MCwgdGl0bGU6ICflkI3np7AnIH0sXHJcbiAgICB7IGZpZWxkOiAnZGVzY3JpcHRpb24nLCB3aWR0aDogMTAwLCB0aXRsZTogJ+aPj+i/sCcsIHNob3dUaXBzOiB0cnVlIH0sXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAnY29uZGl0aW9uJywgd2lkdGg6IDYwLCB0aXRsZTogJ+WQr+eUqOadoeS7ticsIHNob3dUaXBzOiB0cnVlLFxyXG4gICAgICBlZGl0b3I6IHtcclxuICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGNsaWNrSGFuZGxlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRDb25kaXRvbihlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGUucm93RGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50c1tpXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnJvd0RhdGEudHlwZSA9PT0gJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGUucm93RGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXNbaV0uY29uZGl0aW9uID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5yb3dEYXRhLnR5cGUgPT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBlLnJvd0RhdGEuaWQpO1xyXG4gICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50c1tpXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnJvd0RhdGEudHlwZSA9PT0gJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGUucm93RGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnNbaV0uY29uZGl0aW9uID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5yb3dEYXRhLnR5cGUgPT09ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKXtcclxuICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHNbMF0uY29uZGl0aW9uID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdO1xyXG5cclxuICBjdXJQZXJmb3JtZXI6IGFueTtcclxuICBlZGl0U3RhdGUgPSAnbmV3JzsgLy8g57yW6L6R54q25oCB77yM55So5LqO5Yy65YiG5piv5paw5aKe6L+Y5piv57yW6L6RICBuZXcgfCBlZGl0XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHZpZXdNb2RlbDogUGVyZm9ybWVyVmlld01vZGVsLFxyXG4gICAgcHVibGljIHVpc3RhdGU6IFBlcmZvcm1lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwdWJsaWMgZGVzaWduZXJVSVN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgKSB7XHJcbiAgICB0aGlzLkdldE9yZ2FuaXphdGlvblR5cGUoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy50eXBlID0gdGhpcy5lZGl0b3JQYXJhbXMudHlwZTtcclxuICAgIHRoaXMubm9kZVR5cGUgPSB0aGlzLmVkaXRvclBhcmFtcy5ub2RlVHlwZTtcclxuICAgIHRoaXMuZ2V0TWF0cml4Q29uZmlnKCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgaWYgKHJlICYmIHJlLmN1cnJlbnRWYWx1ZSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc3dpdGNoQ2hhbmdlKGRhdGE6IGJvb2xlYW4pIHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5jbGVhclBlcmZvcm1lcigpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBhZGQoKSB7XHJcbiAgLy8gICB0aGlzLmVkaXRTdGF0ZSA9ICduZXcnO1xyXG4gIC8vICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFBlcmZvcm1lckVkaXRDb21wb25lbnQpO1xyXG4gIC8vICAgdGhpcy5jb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gIC8vICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLmRpc3BsYXkgPSB0aGlzLmRpc3BsYXk7XHJcblxyXG4gIC8vICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgLy8gICAgIHRpdGxlOiAn5Y+C5LiO6ICF6YCJ5oupJyxcclxuICAvLyAgICAgd2lkdGg6IDcwMCxcclxuICAvLyAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgLy8gICAgIGJ1dHRvbnM6IHRoaXMuZWRpdEZvb3RlcixcclxuICAvLyAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAvLyAgIH07XHJcbiAgLy8gICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gIC8vIH1cclxuICBhZGRQZXJmb3JtZXIocGVyZm9ybWVyVHlwZTogc3RyaW5nKXtcclxuICAgIHRoaXMuZWRpdFN0YXRlID0gJ25ldyc7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUGVyZm9ybWVyRWRpdENvbXBvbmVudCk7XHJcbiAgICB0aGlzLmNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UuZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcclxuICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXJUeXBlID0gcGVyZm9ybWVyVHlwZTtcclxuXHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6ICflj4LkuI7ogIXpgInmi6knLFxyXG4gICAgICB3aWR0aDogNzAwLFxyXG4gICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICB0aGlzLmRyb3BEb3duRWwuY2xvc2UoKTtcclxuICB9XHJcbiAgZWRpdCgpIHtcclxuICAgIHRoaXMuZWRpdFN0YXRlID0gJ2VkaXQnO1xyXG4gICAgaWYgKHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIpIHtcclxuICAgICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgICAgdGl0bGU6ICflj4LkuI7ogIXpgInmi6knLFxyXG4gICAgICAgIHdpZHRoOiA3MDAsXHJcbiAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQZXJmb3JtZXJFZGl0Q29tcG9uZW50KTtcclxuICAgICAgdGhpcy5jb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyVHlwZSA9IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIudHlwZTtcclxuICAgICAgc3dpdGNoICh0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuZmluZChwID0+IHAuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnZhcmlhYmxlUGVyZm9ybWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIGNvbnN0IHJlcG9ydGluZ0xpbmUgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5maW5kKHIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gci5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogcmVwb3J0aW5nTGluZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9yZXBvcnRpbmdMaW5lRGVmaW5pdGlvbnMvJyArIHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkO1xyXG4gICAgICAgICAgdGhpcy5odHRwLmdldCh1cmwpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeadoeaxh+aKpeWFs+ezu+aVsOaNrueahOWumuS5ieW3suWIoOmZpO+8jOivpeadoeaVsOaNruWwhuWIoOmZpCcpXHJcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICBjb25zdCBtYXRyaXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZmluZChyID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHIuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogbWF0cml4XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdXJsTWF0cml4ID0gJy9hcGkvcnVudGltZS93Zi92MS4wL21hdHJpeERlZmluaXRpb24vJyArIG1hdHJpeC5tYXRyaXhEZWZJZDtcclxuICAgICAgICAgIHRoaXMuaHR0cC5nZXQodXJsTWF0cml4KS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfor6XmnaHnn6npmLXmlbDmja7nmoTlrprkuYnlt7LliKDpmaTvvIzor6XmnaHmlbDmja7lsIbliKDpmaQnKVxyXG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh0aGlzLmNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLmZpbmQoYyA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGMuaWQgPT09IHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIuaWQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5maW5kKCBjID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHNbMF1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLnR5cGUgIT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyAmJlxyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIudHlwZSAhPT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpeyAvLyDmsYfmiqXlhbPns7vlkoznn6npmLXljZXni6zlpITnkIZcclxuICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbW92ZSgpIHtcclxuICAgIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby52YXJpYWJsZVBlcmZvcm1lcnMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnZhcmlhYmxlUGVyZm9ybWVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChwID0+IHAuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICB0aGlzLmdyaWQubG9hZERhdGEodGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfor7flhYjpgInkuK3kuIDmnaHlj4LkuI7ogIXkv6Hmga/vvIEnKTtcclxuICAgIH1cclxuICB9XHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzID0gW107XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby52YXJpYWJsZVBlcmZvcm1lcnMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzID0gW107XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzID0gW107XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMgPSBuZXcgQXJyYXkoKTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IFtdO1xyXG4gICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCk7XHJcbiAgfVxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBjb25zdCBvYmplY3QgPSB7XHJcbiAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mbywgcGFyYW1ldGVyczogbnVsbFxyXG4gICAgfTtcclxuICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gIH1cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG4gIGVkaXRPSygpIHtcclxuICAgIHRoaXMuaXNDbG9zZSA9IHRydWU7XHJcbiAgICBpZiAodGhpcy5jb21wUmVmKSB7XHJcbiAgICAgIGNvbnN0IHJlID0gdGhpcy5jb21wUmVmLmluc3RhbmNlLmdldFBlcmZvcm1lcnMoKTtcclxuICAgICAgaWYgKHJlLnVzZXJQZXJmb3JtZXJzICYmIHJlLnVzZXJQZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZS51c2VyUGVyZm9ybWVycy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IHAuaWQgfHwgYS5wZXJmb3JtZXJJZCA9PT0gcC5wZXJmb3JtZXJJZCkpO1xyXG4gICAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnNbaV0uaWQ7XHJcbiAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnNbaV0gPSBwO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSBwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFN0YXRlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMucHVzaChwKTtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmNvbmNhdChbcF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFxyXG4gICAgICAgICAgLmZpbHRlcihwID0+IHAudHlwZSA9PT0gdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uWzBdLnZhbHVlIHx8IHAudHlwZSA9PT0gdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uWzFdLnZhbHVlIClcclxuICAgICAgICAgIC5tYXAocGVyZm9ybWVyID0+IHBlcmZvcm1lci5kZXNjcmlwdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWVyRGVzY3JpcHRpb24ocGVyZm9ybWVyIGFzIGFueSkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5wb3NpdGlvbnMgJiYgcmUucG9zaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHJlLnBvc2l0aW9ucykge1xyXG4gICAgICAgICAgaWYgKHBvc2l0aW9uICYmIHBvc2l0aW9uICE9PSBudWxsICYmIHBvc2l0aW9uLmlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKCFwLnBlcmZvcm1lcklkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+WwmuacqumAieaLqeWyl+S9je+8gScpO1xyXG4gICAgICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmICgoIXAub3JnVHlwZSB8fCBwLm9yZ1R5cGUgPT0gbnVsbCkgJiYgKHAuaXNSZXF1aXJlZCAmJiBwLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+WwmuacqumAieaLqee7hOe7h+exu+Wei++8gScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICgoIXAub3JnSWQgfHwgcC5vcmdJZCA9PSBudWxsKSAmJiAocC5pc1JlcXVpcmVkICYmIHAucG9zaXRpb25UeXBlID09PSAnMScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5bCa5pyq5aGr5YaZ57uE57uH77yBJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gKDEpaWTkuIDoh7TvvIzkuLrnvJbovpHlspfkvY3vvJvvvIgy77yJcGVyZm9ybWlk5LiA6Ie077yM5paw5aKe55qE55So5oi377yM5bKX5L2N5bey5a2Y5ZyoXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gcC5pZCB8fCAoYS5wZXJmb3JtZXJJZCA9PT0gcC5wZXJmb3JtZXJJZCAmJiBhLm9yZ0lkID09PSBwLm9yZ0lkKSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnNbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnNbaV0gPSBwO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSBwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuY29uY2F0KFtwXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RcclxuICAgICAgICAgICAgICAgICAgLmZpbHRlcihwID0+IHAudHlwZSA9PT0gdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uWzBdLnZhbHVlIHx8IHAudHlwZSA9PT0gdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uWzFdLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAubWFwKHBlcmZvcm1lciA9PiBwZXJmb3JtZXIuZGVzY3JpcHRpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybWVyRGVzY3JpcHRpb24ocGVyZm9ybWVyIGFzIGFueSkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlLmNvbXBvbmVudCAmJiByZS5jb21wb25lbnQubWV0YWRhdGFJZCAmJiByZS5jb21wb25lbnQubWV0aG9kQ29kZSkge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlLmNvbXBvbmVudC5pZCk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50c1tpXSA9IHJlLmNvbXBvbmVudDtcclxuICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlLmNvbXBvbmVudC5pZCk7XHJcbiAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RbaW5kZXhdID0ge1xyXG4gICAgICAgICAgICBpZDogcmUuY29tcG9uZW50LmlkLFxyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUuY29tcG9uZW50Lm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNvbXBvbmVudERlc2NyaXB0aW9uKHJlLmNvbXBvbmVudCksXHJcbiAgICAgICAgICAgIGNvbmRpdGlvbjogcmUuY29tcG9uZW50LmNvbmRpdGlvblxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cy5wdXNoKHJlLmNvbXBvbmVudCk7XHJcbiAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIGlkOiByZS5jb21wb25lbnQuaWQsXHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5jb21wb25lbnQubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY29tcG9uZW50RGVzY3JpcHRpb24ocmUuY29tcG9uZW50KSxcclxuICAgICAgICAgICAgY29uZGl0aW9uOiAnJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5yZXBvcnRpbmdMaW5lICYmIHJlLnJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkICYmIHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uKSB7XHJcbiAgICAgICAgaWYocmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCA9PT0gJ2RlcHQnICYmICFyZS5yZXBvcnRpbmdMaW5lLnJlZk9yZ0lkKXtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+KAnOmDqOmXqOKAneaxh+aKpeWFs+ezu+exu+Wei+S4i++8jOWPgueFp+S6uuaJgOWcqOmDqOmXqOS4jeiDveS4uuepuicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCAhPT0gJ2RlcHQnICYmICFyZS5yZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJiAhcmUucmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKSB7IC8vIOeUqOaIt+WPiuWFtuS7luS6uuWRmOaxh+aKpeWvueixoeexu+Wei++8jOWPgueFp+eUqOaIt+WSjOWPgueFp+WRmOW3peS4jeiDveWFqOmDqOS4uuepulxyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn4oCc55So5oi34oCd5rGH5oql5YWz57O757G75Z6L5LiL77yM5Y+C54Wn5Lq65LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLmFkZFJlcG9ydGluZ0xpbmVEYXRhKHJlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm1hdHJpeCAmJiByZS5tYXRyaXgubWF0cml4RGVmSWQpIHtcclxuICAgICAgICBpZighcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJiAhcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJiAhcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMyl7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmnaHku7blrZfmrrXoh7PlsJHopoHlrZjlnKjkuIDkuKonKTtcclxuICAgICAgICB9IGVsc2UgaWYoIXJlLm1hdHJpeC5kYXRhRmllbGRBbGlhcyl7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmlbDmja7lrZfmrrXkuI3og73kuLrnqbonKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuYWRkTWF0cml4RGF0YShyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5hY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycyAmJiByZS5hY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmUuYWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gcC5pZCB8fCBhLmFjdGl2aXR5RGVmSWQgPT09IHAuYWN0aXZpdHlEZWZJZCkpO1xyXG4gICAgICAgICAgaWYgKGkgPCAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTsgLy8g5Zyo57yW6L6R54q25oCB5LiL6YWN572u5LqG5rS75Yqo5Yqe55CG5Lq65Y+C5LiO6ICF77yM5YWI5bCG6YCJ5Lit55qE5Yig6ZmkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnMucHVzaChwKTtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmNvbmNhdChbcF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFxyXG4gICAgICAgICAgLmZpbHRlcihwID0+IHAudHlwZSA9PT0gdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uWzVdLnZhbHVlIClcclxuICAgICAgICAgIC5tYXAocGVyZm9ybWVyID0+IHBlcmZvcm1lci5kZXNjcmlwdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWVyRGVzY3JpcHRpb24ocGVyZm9ybWVyIGFzIGFueSkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50KTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMgPSBbcmUub3JnYW5pemF0aW9uUGFydGljaXBhbnRdO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5maWx0ZXIocCA9PiBwLnR5cGUgIT09ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKTtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuY29uY2F0KHtcclxuICAgICAgICAgIGlkOiByZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pZCB8fCBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCksXHJcbiAgICAgICAgICB0eXBlOiAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgIHBlcmZvcm1lck5hbWU6IHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbk5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogcmUub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTmFtZSArJ++8jOS4lCcgKyhyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pbmNsdWRlQ2hpbGRyZW4gPyAn5YyF5ZCr5LiL57qnJzon5LiN5YyF5ZCr5LiL57qnJyksXHJcbiAgICAgICAgICBjb25kaXRpb246IHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmNvbmRpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZWRpdERpYWxvZyAmJiB0aGlzLmlzQ2xvc2UpIHtcclxuICAgICAgdGhpcy5lZGl0RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgYWRkUmVwb3J0aW5nTGluZURhdGEocmU6IGFueSl7XHJcbiAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUucmVwb3J0aW5nTGluZS5pZCk7XHJcbiAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzW2ldID0gcmUucmVwb3J0aW5nTGluZTtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUucmVwb3J0aW5nTGluZS5pZCk7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSB7XHJcbiAgICAgICAgaWQ6IHJlLnJlcG9ydGluZ0xpbmUuaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgIHBlcmZvcm1lck5hbWU6IHJlLnJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZk5hbWUgKyAnLScgKyByZS5yZXBvcnRpbmdMaW5lLmRpbWVuc2lvbixcclxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5yZXBvcnRpbmdMaW5lRGVzY3JpcHRpb24ocmUucmVwb3J0aW5nTGluZSksXHJcbiAgICAgICAgY29uZGl0aW9uOiByZS5yZXBvcnRpbmdMaW5lLmNvbmRpdGlvblxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yKGNvbnN0IHJlcG9ydGluZ0xpbmVEYXRhIG9mIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzKXtcclxuICAgICAgICBpZihyZXBvcnRpbmdMaW5lRGF0YS5yZXBvcnRpbmdMaW5lRGVmSWQgPT09IHJlLnJlcG9ydGluZ0xpbmUuZGVmaW5pdGlvbklkICYmXHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5kaW1lbnNpb24gPT09IHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uICYmXHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZVc2VySWQgPT09IHJlLnJlcG9ydGluZ0xpbmUucmVmZXJVc2VySWQgJiZcclxuICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZkVtcGxveWVlSWQgPT09IHJlLnJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCAmJlxyXG4gICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmT3JnSWQgPT09IHJlLnJlcG9ydGluZ0xpbmUucmVmZXJEZXB0SWRcclxuICAgICAgICApe1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfor6XmsYfmiqXlhbPns7vlt7Lnu4/ov5vooYzov4fphY3nva4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMucHVzaChyZS5yZXBvcnRpbmdMaW5lKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgIGlkOiByZS5yZXBvcnRpbmdMaW5lLmlkLFxyXG4gICAgICAgIHR5cGU6ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5yZXBvcnRpbmdMaW5lLnJlcG9ydGluZ0xpbmVEZWZOYW1lICsgJy0nICsgcmUucmVwb3J0aW5nTGluZS5kaW1lbnNpb24sXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMucmVwb3J0aW5nTGluZURlc2NyaXB0aW9uKHJlLnJlcG9ydGluZ0xpbmUpLFxyXG4gICAgICAgIGNvbmRpdGlvbjogcmUucmVwb3J0aW5nTGluZS5jb25kaXRpb25cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgYWRkTWF0cml4RGF0YShyZTogYW55KXtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUubWF0cml4LmlkKTtcclxuICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzW2ldID0gcmUubWF0cml4O1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZS5tYXRyaXguaWQpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3RbaW5kZXhdID0ge1xyXG4gICAgICAgIGlkOiByZS5tYXRyaXguaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUubWF0cml4Lm1hdHJpeERlZk5hbWUgKyAnLScgKyByZS5tYXRyaXguZGF0YUZpZWxkQWxpYXMsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMubWF0cml4RGVzY3JpcHRpb24ocmUubWF0cml4KSxcclxuICAgICAgICBjb25kaXRpb246IHJlLm1hdHJpeC5jb25kaXRpb25cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcihjb25zdCBtYXRyaXhEYXRhIG9mIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cyl7XHJcbiAgICAgICAgaWYobWF0cml4RGF0YS5tYXRyaXhEZWZJZCA9PT0gcmUubWF0cml4Lm1hdHJpeERlZklkICYmXHJcbiAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMSA9PT0gcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJlxyXG4gICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDIgPT09IHJlLm1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiZcclxuICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQzID09PSByZS5tYXRyaXguY29uZGl0aW9uRmllbGQzICYmXHJcbiAgICAgICAgICBtYXRyaXhEYXRhLmRhdGFGaWVsZEFsaWFzID09PSByZS5tYXRyaXguZGF0YUZpZWxkQWxpYXNcclxuICAgICAgICApe1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfor6Xnn6npmLXlt7Lnu4/ov5vooYzov4fphY3nva4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLnB1c2gocmUubWF0cml4KTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgIGlkOiByZS5tYXRyaXguaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUubWF0cml4Lm1hdHJpeERlZk5hbWUgKyAnLScgKyByZS5tYXRyaXguZGF0YUZpZWxkQWxpYXMsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMubWF0cml4RGVzY3JpcHRpb24ocmUubWF0cml4KSxcclxuICAgICAgICBjb25kaXRpb246IHJlLm1hdHJpeC5jb25kaXRpb25cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVkaXRDYW5jZWwoKSB7XHJcbiAgICBpZiAodGhpcy5lZGl0RGlhbG9nKSB7XHJcbiAgICAgIHRoaXMuZWRpdERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwYXJ0aWNpcGFudE9wdGlvbnNTZXQoKSB7XHJcbiAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcHRpb25zID0gdGhpcy5vcHRpb25zLmdldFBlcmZvcm1lck9wdGlvbnMoKTtcclxuICAgIHRoaXMub3B0aW9uc0RpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXI6IFBlcmZvcm1lckVudGl0eSkge1xyXG4gICAgaWYgKHBlcmZvcm1lci50eXBlID09PSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbicgfHwgcGVyZm9ybWVyLnR5cGUgPT09ICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgaWYgKHBlcmZvcm1lci50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICAgIHJldHVybiBwZXJmb3JtZXIucGVyZm9ybWVySWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHBlcmZvcm1lci5vcmdOYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gYOe7hOe7h++8miR7cGVyZm9ybWVyLm9yZ05hbWV9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwZXJmb3JtZXIudHlwZSA9PT0gJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NlbmUgPT09ICdpblN1aXRlJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICgocGVyZm9ybWVyIGFzIFBvc2l0aW9uUGVyZm9ybWVyRW50aXR5KS5wb3NpdGlvblR5cGUgPT09ICcxJykge1xyXG4gICAgICAgIGlmIChwZXJmb3JtZXIub3JnSWQpIHtcclxuICAgICAgICAgIHJldHVybiBg5bKX5L2N57G75Z6L77ya6YCa55So5bKX5L2N77yM57uE57uH77yaJHtwZXJmb3JtZXIub3JnSWR9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGDlspfkvY3nsbvlnovvvJrpgJrnlKjlspfkvY1gO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICgocGVyZm9ybWVyIGFzIFBvc2l0aW9uUGVyZm9ybWVyRW50aXR5KS5wb3NpdGlvblR5cGUgPT09ICcwJykge1xyXG4gICAgICAgIHJldHVybiAn5bKX5L2N57G75Z6L77ya57uE57uH5bKX5L2NJztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmKHBlcmZvcm1lci50eXBlID09PSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgcmV0dXJuIHBlcmZvcm1lci5wZXJmb3JtZXJOYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIGNvbXBvbmVudERlc2NyaXB0aW9uKGNvbXBvbmVudDogQ29tcG9uZW50UGVyZm9ybWVyKSB7XHJcbiAgICBsZXQgZGVzID0gYOaehOS7tu+8miR7Y29tcG9uZW50Lm5hbWV9LOWPguaVsO+8mntgO1xyXG4gICAgaWYgKGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzICYmIGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICBkZXMgKz0gYCR7cC5jb2Rlfe+8miR7cC52YWx1ZX3vvIxgO1xyXG4gICAgICB9KTtcclxuICAgICAgZGVzID0gZGVzLnN1YnN0cmluZygwLCBkZXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcbiAgICBkZXMgKz0gJ30nO1xyXG4gICAgcmV0dXJuIGRlcztcclxuICB9XHJcbiAgcHJpdmF0ZSByZXBvcnRpbmdMaW5lRGVzY3JpcHRpb24ocmVwb3J0aW5nTGluZTogUmVwb3J0aW5nTGluZURhdGFFbnRpdHkpIHtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xyXG4gICAgaWYocmVwb3J0aW5nTGluZS5yZWZVc2VySWQpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5Y+C54Wn5Lq677yaJHtyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZH1gO1xyXG4gICAgfVxyXG4gICAgaWYocmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOWPgueFp+S6uu+8miR7cmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkfWA7XHJcbiAgICB9XHJcbiAgICBpZihyZXBvcnRpbmdMaW5lLnJlZk9yZ0lkKXtcclxuICAgICAgaWYocmVwb3J0aW5nTGluZS5yZWZVc2VySWQpe1xyXG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGDvvIxgO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCl7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYO+8jGA7XHJcbiAgICAgIH1cclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOWPgueFp+e7hOe7h++8miR7cmVwb3J0aW5nTGluZS5yZWZPcmdJZH1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuICBwcml2YXRlIG1hdHJpeERlc2NyaXB0aW9uKG1hdHJpeDogTWF0cml4RGF0YUluZm9FbnRpdHkpIHtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xyXG4gICAgaWYobWF0cml4LmNvbmRpdGlvbkZpZWxkMSl7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDmnaHku7Yx77yaJHttYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MX3vvIxgO1xyXG4gICAgfVxyXG4gICAgaWYobWF0cml4LmNvbmRpdGlvbkZpZWxkMil7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDmnaHku7Yy77yaJHttYXRyaXguY29uZGl0aW9uRmllbGRUZXh0Mn3vvIxgO1xyXG4gICAgfVxyXG4gICAgaWYobWF0cml4LmNvbmRpdGlvbkZpZWxkMyl7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDmnaHku7Yz77yaJHttYXRyaXguY29uZGl0aW9uRmllbGRUZXh0M33vvIxgO1xyXG4gICAgfVxyXG4gICAgaWYobWF0cml4LmRhdGFGaWVsZEFsaWFzKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOaVsOaNru+8miR7bWF0cml4LmRhdGFGaWVsZEFsaWFzfe+8jGA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVzY3JpcHRpb24uc2xpY2UoMCwgZGVzY3JpcHRpb24ubGVuZ3RoIC0gMSk7XHJcbiAgfVxyXG5cclxuICBlZGl0Q29uZGl0b24oZTogYW55KSB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzICYmIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBjb250ZXh0ID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYWRkQ29udGV4dChjb250ZXh0KTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hY3Rpdml0eUNvbXBvbmVudENvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRDb250ZXh0KHYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQoZS5pbnN0YW5jZS52YWx1ZSk7XHJcbiAgICB0aGlzLmV4cHIuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkNvbmRpdGlvbmFsKTsgLy8g6buY6K6k5omT5byA566A5piT6KGo6L6+5byP57yW6L6R5ZmoXHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoY29uZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCkuY29uZGl0aW9uID0gY29uZDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyl7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCkuY29uZGl0aW9uID0gY29uZDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicpe1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCkuY29uZGl0aW9uID0gY29uZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCkuY29uZGl0aW9uID0gY29uZDtcclxuICAgICAgfVxyXG4gICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGNvbmQpO1xyXG4gICAgICBlLmluc3RhbmNlLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZnRlckVkaXQgPSAocm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW4/OiBEYXRhQ29sdW1uKSA9PiB7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RDaGFuZ2VkKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lciA9IGRhdGEuZGF0YTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgR2V0T3JnYW5pemF0aW9uVHlwZSgpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYXV0aGZpZWxkcy9nbG9iYWxhdXRoZmllbGRzJztcclxuICAgIHRoaXMuaHR0cC5nZXQodXJsKVxyXG4gICAgICAuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHRoaXMuZGVzaWduZXJVSVN0YXRlLm9yZ1R5cGVDb2xsZWN0aW9uID0gZGF0YS5tYXAoZCA9PiAoeyB2YWx1ZTogZC5pZCwgdGV4dDogZC5uYW1lIH0pKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE1hdHJpeENvbmZpZygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL2dlbmVyYWxDb25maWcvSXNfRW5hYmxlTWF0cml4YDtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxufVxyXG5leHBvcnQgY2xhc3MgUGVyZm9ybWVyQ29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgY29udmVydFRvKGRhdGE6IGFueSk6IHN0cmluZyB7XHJcbiAgICBpZiAoKGRhdGEucGVyZm9ybWVycyAmJiBkYXRhLnBlcmZvcm1lcnMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEudmFyaWFibGVQZXJmb3JtZXJzICYmIGRhdGEudmFyaWFibGVQZXJmb3JtZXJzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IChkYXRhLmNvbXBvbmVudHMgJiYgZGF0YS5jb21wb25lbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IChkYXRhLnJlcG9ydGluZ0xpbmVzICYmIGRhdGEucmVwb3J0aW5nTGluZXMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEubWF0cml4UGFydGljaXBhbnRzICYmIGRhdGEubWF0cml4UGFydGljaXBhbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IChkYXRhLmFjdGl2aXR5RXhlY3V0b3JzICYmIGRhdGEuYWN0aXZpdHlFeGVjdXRvcnMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEub3JnYW5pemF0aW9uUGFydGljaXBhbnRzICYmIGRhdGEub3JnYW5pemF0aW9uUGFydGljaXBhbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgIHx8IGRhdGEuaXNBbGxTY29wZVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiAn77yI5bey6K6+572u77yJJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAn77yI5pyq6K6+572u77yJJztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19