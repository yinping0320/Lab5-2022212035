/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, HostBinding, ElementRef, NgZone, Input, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { ReportingLineDataEntity } from './reporting-line-data.entity';
import { of } from 'rxjs';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { LookupGridComponent } from '@farris/ui-lookup';
import { SysFarrisTreeHelpComponent } from "@gsp-sys/sysmgr-ui";
import { PerformerEntity } from "../../entities/performer.entity";
import { WfReportDefHelpComponent } from "./service/wf-report-def-help.component";
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../../i18n/pipe/wf-process-editor-locale.pipe';
export class ReportingLineComponent {
    /**
     * @param {?} http
     * @param {?} designerUIState
     * @param {?} expr
     * @param {?} ngZone
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(http, designerUIState, expr, ngZone, cdr, localeId, resources, localePipe) {
        this.http = http;
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.ngZone = ngZone;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'd-flex flex-fill h-100';
        this.treeFilter = '';
        this.display = 'none';
        this.typeReadOnly = false;
        this.groupIcon2 = '<i class="f-icon f-icon-lookup"></i>';
        this.defName = '';
        /**
         * 汇报关系数据
         */
        this.reportingLineDataEntity = new ReportingLineDataEntity();
        /**
         * 汇报关系定义列表
         */
        this.reportingLineDefinitionList = [];
        this.reportingLineDimension = [];
        this.showClearButton = false;
        this.items = [];
        this.users = [];
        this.departments = [];
        this.pageIndex = 1;
        this.pageSize = 20;
        this.pageList = [10, 20, 30, 50, 100];
        this.total = 0;
        /**
         * 汇报类型显示列
         */
        this.columns = [
            { title: this.localePipe.transform('component.reportingLine.code'), field: 'code', width: 100 },
            { title: this.localePipe.transform('component.reportingLine.name'), field: 'name', width: 100 }
        ];
        /**
         *  参与者列表汇报关系显示字段
         */
        this.reportingReferObjects = [
            { name: this.localePipe.transform('component.reportingLine.dept'), value: 'dept' },
            { name: this.localePipe.transform('component.reportingLine.sysUser'), value: 'sysUser' },
            { name: this.localePipe.transform('component.reportingLine.employee'), value: 'employee' }
        ];
        this.curReportingRefer = this.reportingReferObjects[0].value;
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.getReportingLineType();
    }
    /**
     * @param {?} dataEntity
     * @return {?}
     */
    set setReportingLineDataEntity(dataEntity) {
        this.defName = dataEntity.reportingLineDefName;
        this.reportingLineDataEntity = dataEntity;
        /** @type {?} */
        const defUrl = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + dataEntity.reportingLineDefId;
        this.http.get(defUrl).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            this.reportingLineDefinition = re;
            this.designerUIState.dimensions = [
                { value: 'higherSuperior', text: this.localePipe.transform('component.reportingLine.higherSuperior') }
            ];
            // 兼容历史数据
            if (JSON.parse(this.reportingLineDefinition.dimensions)[0].code !== 'directSuperior') {
                /** @type {?} */
                const di = {
                    value: 'directSuperior',
                    text: this.localePipe.transform('component.reportingLine.directSuperior')
                };
                this.designerUIState.dimensions.push(di);
            }
            for (const dimension of JSON.parse(this.reportingLineDefinition.dimensions)) {
                /** @type {?} */
                const di = {
                    value: dimension.code,
                    text: dimension.name
                };
                this.designerUIState.dimensions.push(di);
            }
        }));
        this.users = [dataEntity];
        if (dataEntity.refUserId) {
            this.users[0].performerName = this.variableParticipantName(dataEntity.refUserId);
            this.curReportingRefer = this.reportingReferObjects[1].value;
            this.display = 'block';
        }
        else if (dataEntity.refEmployeeId) {
            this.users[0].performerName = dataEntity.refEmployeeId;
            this.curReportingRefer = this.reportingReferObjects[2].value;
            this.display = 'block';
        }
        else {
            this.curReportingRefer = this.reportingReferObjects[0].value;
        }
        if (dataEntity.reportingLineDefId) {
            this.typeReadOnly = true;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * 获取汇报关系类型
     * @return {?}
     */
    getReportingLineType() {
        /** @type {?} */
        const url = '/api/runtime/wf/v1.0/reportingLineDefinitions';
        this.http.get(url).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            this.reportingLineDefinitionList = re;
            this.items = this.reportingLineDefinitionList.slice(0, this.pageSize);
            this.total = this.reportingLineDefinitionList.length;
        }));
    }
    /**
     * @return {?}
     */
    onclear() {
        this.reportingLineDataEntity = new ReportingLineDataEntity();
    }
    // 参照类型改变
    /**
     * @param {?} data
     * @return {?}
     */
    referObjectChange(data) {
        if (data === 'dept') {
            this.display = 'none';
            this.curReportingRefer = this.reportingReferObjects[0].value;
            this.reportingLineDataEntity.refUserId = null;
            this.reportingLineDataEntity.refEmployeeId = null;
        }
        else if (data === 'sysUser') {
            this.display = 'block';
            this.curReportingRefer = this.reportingReferObjects[1].value;
            this.reportingLineDataEntity.refOrgId = null;
            this.reportingLineDataEntity.refOrgName = null;
            this.reportingLineDataEntity.refEmployeeId = null;
        }
        else { // 员工的情况
            this.display = 'block';
            this.curReportingRefer = this.reportingReferObjects[2].value;
            this.reportingLineDataEntity.refOrgId = null;
            this.reportingLineDataEntity.refOrgName = null;
            this.reportingLineDataEntity.refUserId = null;
        }
        // 参照对象切换时，清空user和department
        this.users = [];
        this.departments = [];
    }
    /**
     * 参照用户改变
     * @param {?} data
     * @return {?}
     */
    referUserChange(data) {
        console.log(data);
    }
    /**
     * 维度改变
     * @param {?} data
     * @return {?}
     */
    reportingDimensionChange(data) {
    }
    /**
     * 组织帮助选完后
     * @param {?} org
     * @return {?}
     */
    orgSelected(org) {
        this.reportingLineDataEntity.refOrgId = org.id;
        this.reportingLineDataEntity.refOrgName = org.name;
    }
    /**
     * 编辑条件
     * @return {?}
     */
    editCondition() {
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            for (const schema of this.designerUIState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        let context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            for (const variable of this.designerUIState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            for (const variable of this.designerUIState.activityComponentContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.setEditPattern(ExprEditMode.Conditional); // 表达式展现模式：默认简易版
        this.expr.addExpressionText(this.reportingLineDataEntity.condition); // this.reportingLineDataEntity.condition
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        (expressioninfo) => {
            this.reportingLineDataEntity.condition = expressioninfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?=} value
     * @return {?}
     */
    getReportingTypes(value) {
        /** @type {?} */
        const start = (this.pageIndex - 1) * this.pageSize;
        /** @type {?} */
        const end = start + this.pageSize;
        /** @type {?} */
        let items = [];
        if (value) {
            items = this.reportingLineDefinitionList.filter((/**
             * @param {?} f
             * @return {?}
             */
            f => f.name.indexOf(value) > -1 || f.code.indexOf(value) > -1));
        }
        else {
            items = this.reportingLineDefinitionList;
        }
        this.total = items.length;
        this.items = items.slice(start, end);
        this.lookup.componentRef.instance.loadData({
            total: this.total,
            pageSize: this.pageSize,
            pageIndex: this.pageIndex,
            data: this.items
        });
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.inputGroup.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));
            this.inputGroup.nativeElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));
            this.inputGroup1.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));
            this.inputGroup1.nativeElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));
        }));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        this.showClearButton = true;
        if (this.showClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        this.showClearButton = false;
        this.toggleClearIcon(event, false);
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? '' : 'none';
        /** @type {?} */
        const clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    clear(data) {
        this.reportingLineDataEntity.refOrgId = '';
        this.reportingLineDataEntity.refOrgName = '';
    }
    /**
     * @return {?}
     */
    clearUser() {
        this.users = [];
        this.reportingLineDataEntity.refUserId = '';
        this.reportingLineDataEntity.refEmployeeId = '';
    }
    /**
     * @return {?}
     */
    clearOrg() {
        this.departments = [];
        this.reportingLineDataEntity.refOrgId = '';
    }
    /**
     * @param {?} data
     * @return {?}
     */
    selectOrg(data) {
        this.showExprHelp(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    selectUsers(data) {
        this.showExprHelp(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    showExprHelp(data) {
        // this.expr.clearContext();
        this.expr.setEditPattern(ExprEditMode.Advanced); // 表达式展现模式：默认高级
        if (this.designerUIState.schemas.length > 0) {
            for (const schema of this.designerUIState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        const context = new Array();
        if (this.designerUIState.participantContext.length > 0) {
            for (const variable of this.designerUIState.participantContext) {
                context.push(variable);
            }
        }
        if (this.designerUIState.subActivityContext.length > 0) {
            for (const variable of this.designerUIState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerUIState.processVariableContext.length > 0) {
            for (const variable of this.designerUIState.processVariableContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        if (data === 'sysUser') {
            if (this.reportingLineDataEntity.refUserId && this.reportingLineDataEntity.refUserId.length > 0) {
                this.expr.addExpressionText(this.reportingLineDataEntity.refUserId);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        else if (data === 'org') {
            if (this.reportingLineDataEntity.refOrgId && this.reportingLineDataEntity.refOrgId.length > 0) {
                this.expr.addExpressionText(this.reportingLineDataEntity.refOrgId);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        else { // 员工及其他汇报对象类型
            if (this.reportingLineDataEntity.refEmployeeId && this.reportingLineDataEntity.refEmployeeId.length > 0) {
                this.expr.addExpressionText(this.reportingLineDataEntity.refEmployeeId);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressionInfo
         * @return {?}
         */
        (expressionInfo) => {
            if (data === 'sysUser') {
                /** @type {?} */
                const user = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipantExpression');
                user.tag = 'expression';
                user.performerName = this.variableParticipantName(expressionInfo);
                this.reportingLineDataEntity.refUserId = user.performerId;
                this.reportingLineDataEntity.tag = user.tag;
                this.reportingLineDataEntity.performerName = user.performerName;
                this.users = [this.reportingLineDataEntity];
            }
            else if (data === 'org') {
                /** @type {?} */
                const dept = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipantExpression');
                dept.tag = 'expression';
                this.reportingLineDataEntity.refOrgName = expressionInfo;
                this.reportingLineDataEntity.refOrgId = expressionInfo;
                this.departments = [this.reportingLineDataEntity];
            }
            else {
                /** @type {?} */
                const employee = new PerformerEntity(expressionInfo, '', 'wf.ReportingLineParticipantExpression');
                employee.performerName = expressionInfo;
                employee.tag = 'expression';
                this.reportingLineDataEntity.refEmployeeId = expressionInfo;
                this.reportingLineDataEntity.performerName = employee.performerName;
                this.users = [this.reportingLineDataEntity];
            }
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @private
     * @param {?} expr
     * @return {?}
     */
    variableParticipantName(expr) {
        for (const c of this.designerUIState.participantContext) {
            if (expr.indexOf(c.key) > -1) {
                return c.name;
            }
        }
        for (const c of this.designerUIState.processVariableContext) {
            if (expr.indexOf(c.key) > -1) {
                return c.name;
            }
        }
        return this.localePipe.transform('component.reportingLine.businessFields');
    }
    /**
     * @return {?}
     */
    defChanged() {
        System.import('/platform/runtime/wf/web/wf-reporting-data/reportingLineDefHelp.js?v=20231123').then((/**
         * @return {?}
         */
        () => {
            ((/** @type {?} */ (window))).gspWfReportingLineDef.ReportingLineDefHelpUtil.getReportingLineHelp().then((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.defSelected(data);
            }));
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    defSelected(data) {
        this.defName = data.name;
        this.reportingLineDataEntity.reportingLineDefId = data.id;
        this.reportingLineDataEntity.reportingLineDefName = data.name;
        this.reportingLineDimension = JSON.parse(data.dimensions);
        this.designerUIState.dimensions = [
            { value: 'higherSuperior', text: this.localePipe.transform('component.reportingLine.higherSuperior') }
        ];
        // 兼容历史数据
        if (this.reportingLineDimension[0].code !== 'directSuperior') {
            /** @type {?} */
            const di = {
                value: 'directSuperior',
                text: this.localePipe.transform('component.reportingLine.directSuperior')
            };
            this.designerUIState.dimensions.push(di);
        }
        for (const dimension of this.reportingLineDimension) {
            /** @type {?} */
            const di = {
                value: dimension.code,
                text: dimension.name
            };
            this.designerUIState.dimensions.push(di);
        }
        // 定义切换后，默认是参照组织
        this.curReportingRefer = this.reportingReferObjects[0].value;
        // 下边的参照人也得隐藏 2023-5-18
        this.display = 'none';
        this.reportingLineDataEntity.refUserId = null;
        this.reportingLineDataEntity.refEmployeeId = null;
        return of(true);
    }
    /**
     * @return {?}
     */
    getPerformers() {
        this.reportingLineDataEntity.type = 'wf.ReportingLineParticipantExpression';
        this.reportingLineDataEntity.reportingReferObject = this.curReportingRefer;
        return this.reportingLineDataEntity;
    }
}
ReportingLineComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-reporting-line',
                template: "<sys-farris-tree-help class=\"flex-fill\" #orgHelp style=\"display: none;\"\r\n                      [singleSelect]=\"true\" [sourceType]=\"'org'\" [disabled]=\"false\" [filter]=\"treeFilter\"\r\n                      [useBeforeCloseEvent]=\"false\" [async]=\"true\"\r\n                      (afterConfirm)=\"orgSelected($event)\">\r\n</sys-farris-tree-help>\r\n\r\n<div class=\"d-flex flex-fill farris-overflow-y-auto p-md-2\" style=\"background: #FFF;\">\r\n  <div class=\"d-flex flex-fill farris-overflow-y-auto mx-3 my-2\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n  <form style=\"width: 100%\">\r\n    <div class=\"d-flex m-2 flex-column w-100\">\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"farris-form form-inline  farris-form-inline mr-5\">\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.defName'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                               [(value)]=\"defName\"\r\n                               (clickHandle)=\"defChanged()\" [enableClear]=\"false\"\r\n                  ></input-group>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.dimension'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <farris-combo-list [(ngModel)]=\"reportingLineDataEntity.dimension\" name=\"dimension\" [panelHeight]=\"200\"\r\n                                     [idField]=\"'value'\" [textField]=\"'text'\" [data]=\"this.designerUIState.dimensions\" (valueChange)=\"reportingDimensionChange($event)\"\r\n                                     ></farris-combo-list>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.curReportingRefer'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <farris-radiogroup [data]=\"reportingReferObjects\" [horizontal]=\"true\"\r\n                                     [(ngModel)]=\"curReportingRefer\" name=\"referObject\"\r\n                                     (changeValue)=\"referObjectChange($event)\"\r\n                  ></farris-radiogroup>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\" [ngStyle]=\"{'display':display}\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.usersName'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <div #inputGroup1 class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [value]=\"users | usersName \" [(ngModel)]=\"reportingLineDataEntity.performerName\" name=\"users\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span [style.display]=\"showClearButton ? '' : 'none'\" class=\"input-group-text input-group-clear\"\r\n                            (click)=\"clearUser()\">\r\n                        <i class=\"f-icon modal_close\"></i>\r\n                      </span>\r\n                      <span *ngIf=\"curReportingRefer === 'sysUser'\" class=\"input-group-text\" (click)=\"selectUsers('sysUser')\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                      <span *ngIf=\"curReportingRefer === 'employee'\" class=\"input-group-text\" (click)=\"selectUsers('employee')\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\" [ngStyle]=\"{'display':display === 'none' ? 'block':'none'}\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.refOrgId'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <div #inputGroup class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"reportingLineDataEntity.refOrgId\" name=\"dept\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span [style.display]=\"showClearButton ? '' : 'none'\" class=\"input-group-text input-group-clear\"\r\n                            (click)=\"clearOrg()\">\r\n                        <i class=\"f-icon modal_close\"></i>\r\n                      </span>\r\n                      <span class=\"input-group-text\" (click)=\"selectOrg('org')\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"farris-form form-inline farris-form-inline mr-5\">\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.reportingLine.condition'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <div class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"reportingLineDataEntity.condition\" name=\"conditon\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span class=\"input-group-text\" (click)=\"editCondition()\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n</div>\r\n\r\n<app-wf-report-def-help style=\"display: none;\" [singleSelect]=\"true\" title=\"{{'component.reportingLine.definitionOfReport'|wfLocale}}\" (afterConfirm)=\"defSelected($event)\">\r\n\r\n</app-wf-report-def-help>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
ReportingLineComponent.ctorParameters = () => [
    { type: HttpService },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: NgZone },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
ReportingLineComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    reportingLineDefHelp: [{ type: ViewChild, args: [WfReportDefHelpComponent,] }],
    setReportingLineDataEntity: [{ type: Input }],
    lookup: [{ type: ViewChild, args: [LookupGridComponent,] }],
    orgHelp: [{ type: ViewChild, args: [SysFarrisTreeHelpComponent,] }],
    inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
    inputGroup1: [{ type: ViewChild, args: ['inputGroup1',] }]
};
if (false) {
    /** @type {?} */
    ReportingLineComponent.prototype.cls;
    /** @type {?} */
    ReportingLineComponent.prototype.treeFilter;
    /** @type {?} */
    ReportingLineComponent.prototype.display;
    /** @type {?} */
    ReportingLineComponent.prototype.typeReadOnly;
    /** @type {?} */
    ReportingLineComponent.prototype.groupIcon2;
    /** @type {?} */
    ReportingLineComponent.prototype.defName;
    /**
     * 汇报关系数据
     * @type {?}
     */
    ReportingLineComponent.prototype.reportingLineDataEntity;
    /**
     * 汇报关系定义列表
     * @type {?}
     */
    ReportingLineComponent.prototype.reportingLineDefinitionList;
    /** @type {?} */
    ReportingLineComponent.prototype.reportingLineDefinition;
    /** @type {?} */
    ReportingLineComponent.prototype.reportingLineDimension;
    /** @type {?} */
    ReportingLineComponent.prototype.reportingLineDefHelp;
    /** @type {?} */
    ReportingLineComponent.prototype.lookup;
    /** @type {?} */
    ReportingLineComponent.prototype.orgHelp;
    /** @type {?} */
    ReportingLineComponent.prototype.inputGroup;
    /** @type {?} */
    ReportingLineComponent.prototype.inputGroup1;
    /** @type {?} */
    ReportingLineComponent.prototype.showClearButton;
    /** @type {?} */
    ReportingLineComponent.prototype.condition;
    /** @type {?} */
    ReportingLineComponent.prototype.items;
    /** @type {?} */
    ReportingLineComponent.prototype.users;
    /** @type {?} */
    ReportingLineComponent.prototype.departments;
    /** @type {?} */
    ReportingLineComponent.prototype.pageIndex;
    /** @type {?} */
    ReportingLineComponent.prototype.pageSize;
    /** @type {?} */
    ReportingLineComponent.prototype.pageList;
    /** @type {?} */
    ReportingLineComponent.prototype.total;
    /**
     * 汇报类型显示列
     * @type {?}
     */
    ReportingLineComponent.prototype.columns;
    /**
     *  参与者列表汇报关系显示字段
     * @type {?}
     */
    ReportingLineComponent.prototype.reportingReferObjects;
    /** @type {?} */
    ReportingLineComponent.prototype.curReportingRefer;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.http;
    /** @type {?} */
    ReportingLineComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    ReportingLineComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0aW5nLWxpbmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wZXJmb3JtZXIvdmlld3MvcmVwb3J0aW5nLWxpbmUvcmVwb3J0aW5nLWxpbmUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFNBQVMsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckosT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRWxELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXZFLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUIsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDbEYsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNoRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDbEUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDbEYsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBWXRHLE1BQU0sT0FBTyxzQkFBc0I7Ozs7Ozs7Ozs7O0lBbUdqQyxZQUNVLElBQWlCLEVBQ2xCLGVBQXVDLEVBQ3RDLElBQXVCLEVBQ3ZCLE1BQWMsRUFD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U0FBUyxTQUFDLGFBQWE7Ozs7SUFwRXhCLHFDQUMrQjs7SUFDL0IsNENBQWdCOztJQUNoQix5Q0FBeUI7O0lBQ3pCLDhDQUFxQjs7SUFDckIsNENBQW9EOztJQUNwRCx5Q0FBYTs7Ozs7SUFLYix5REFBaUY7Ozs7O0lBS2pGLDZEQUFrRTs7SUFDbEUseURBQTZCOztJQUU3Qix3REFBNEQ7O0lBQzVELHNEQUFvRjs7SUE2Q3BGLHdDQUE0RDs7SUFDNUQseUNBQTJFOztJQUMzRSw0Q0FBZ0Q7O0lBQ2hELDZDQUFrRDs7SUFDbEQsaURBQXdCOztJQUN4QiwyQ0FBa0I7O0lBQ2xCLHVDQUE0Qzs7SUFDNUMsdUNBQThCOztJQUM5Qiw2Q0FBb0M7O0lBQ3BDLDJDQUFjOztJQUNkLDBDQUFjOztJQUNkLDBDQUFpQzs7SUFDakMsdUNBQVU7Ozs7O0lBS1YseUNBR0U7Ozs7O0lBS0YsdURBSUU7O0lBQ0YsbURBQXdEOzs7OztJQUl0RCxzQ0FBeUI7O0lBQ3pCLGlEQUE4Qzs7Ozs7SUFDOUMsc0NBQStCOzs7OztJQUMvQix3Q0FBc0I7Ozs7O0lBQ3RCLHFDQUEwQzs7Ozs7SUFDMUMsMENBQTJDOzs7OztJQUMzQywyQ0FBaUQ7Ozs7O0lBQ2pELDRDQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEhvc3RCaW5kaW5nLCBFbGVtZW50UmVmLCBOZ1pvbmUsIElucHV0LCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwsIEluamVjdCwgTE9DQUxFX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IFJlcG9ydGluZ0xpbmVEZWZpbml0aW9uRW50aXR5IH0gZnJvbSAnLi9yZXBvcnRpbmctbGluZS1kZWZpbml0aW9uLmVudGl0eSc7XHJcbmltcG9ydCB7IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5IH0gZnJvbSAnLi9yZXBvcnRpbmctbGluZS1kYXRhLmVudGl0eSc7XHJcbmltcG9ydCB7IHJlcG9ydGluZ0xpbmVEaW1lbnNpb25FbnRpdHkgfSBmcm9tICcuL3JlcG9ydGluZy1saW5lLWRpbWVuc2lvbi5lbnRpdHknO1xyXG5pbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IEV4cHJFZGl0TW9kZSwgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBMb29rdXBHcmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBTeXNGYXJyaXNUcmVlSGVscENvbXBvbmVudCB9IGZyb20gXCJAZ3NwLXN5cy9zeXNtZ3ItdWlcIjtcclxuaW1wb3J0IHsgUGVyZm9ybWVyRW50aXR5IH0gZnJvbSBcIi4uLy4uL2VudGl0aWVzL3BlcmZvcm1lci5lbnRpdHlcIjtcclxuaW1wb3J0IHsgV2ZSZXBvcnREZWZIZWxwQ29tcG9uZW50IH0gZnJvbSBcIi4vc2VydmljZS93Zi1yZXBvcnQtZGVmLWhlbHAuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uLy4uLy4uLy4uL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5kZWNsYXJlIHZhciBTeXN0ZW06IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXJlcG9ydGluZy1saW5lJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcmVwb3J0aW5nLWxpbmUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3JlcG9ydGluZy1saW5lLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFJlcG9ydGluZ0xpbmVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdkLWZsZXggZmxleC1maWxsIGgtMTAwJztcclxuICB0cmVlRmlsdGVyID0gJyc7XHJcbiAgZGlzcGxheTogc3RyaW5nID0gJ25vbmUnO1xyXG4gIHR5cGVSZWFkT25seSA9IGZhbHNlO1xyXG4gIGdyb3VwSWNvbjIgPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nO1xyXG4gIGRlZk5hbWUgPSAnJztcclxuXHJcbiAgLyoqXHJcbiAgICog5rGH5oql5YWz57O75pWw5o2uXHJcbiAgICovXHJcbiAgcmVwb3J0aW5nTGluZURhdGFFbnRpdHk6IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5ID0gbmV3IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaxh+aKpeWFs+ezu+WumuS5ieWIl+ihqFxyXG4gICAqL1xyXG4gIHJlcG9ydGluZ0xpbmVEZWZpbml0aW9uTGlzdDogUmVwb3J0aW5nTGluZURlZmluaXRpb25FbnRpdHlbXSA9IFtdO1xyXG4gIHJlcG9ydGluZ0xpbmVEZWZpbml0aW9uOiBhbnk7XHJcblxyXG4gIHJlcG9ydGluZ0xpbmVEaW1lbnNpb246IHJlcG9ydGluZ0xpbmVEaW1lbnNpb25FbnRpdHlbXSA9IFtdO1xyXG4gIEBWaWV3Q2hpbGQoV2ZSZXBvcnREZWZIZWxwQ29tcG9uZW50KSByZXBvcnRpbmdMaW5lRGVmSGVscDogV2ZSZXBvcnREZWZIZWxwQ29tcG9uZW50O1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzZXRSZXBvcnRpbmdMaW5lRGF0YUVudGl0eShkYXRhRW50aXR5OiBSZXBvcnRpbmdMaW5lRGF0YUVudGl0eSkge1xyXG4gICAgdGhpcy5kZWZOYW1lID0gZGF0YUVudGl0eS5yZXBvcnRpbmdMaW5lRGVmTmFtZTtcclxuICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkgPSBkYXRhRW50aXR5O1xyXG4gICAgY29uc3QgZGVmVXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3JlcG9ydGluZ0xpbmVEZWZpbml0aW9ucy8nICsgZGF0YUVudGl0eS5yZXBvcnRpbmdMaW5lRGVmSWQ7XHJcbiAgICB0aGlzLmh0dHAuZ2V0KGRlZlVybCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMucmVwb3J0aW5nTGluZURlZmluaXRpb24gPSByZTtcclxuICAgICAgdGhpcy5kZXNpZ25lclVJU3RhdGUuZGltZW5zaW9ucyA9IFtcclxuICAgICAgICB7IHZhbHVlOiAnaGlnaGVyU3VwZXJpb3InLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5oaWdoZXJTdXBlcmlvcicpIH1cclxuICAgICAgXTtcclxuICAgICAgLy8g5YW85a655Y6G5Y+y5pWw5o2uXHJcbiAgICAgIGlmIChKU09OLnBhcnNlKHRoaXMucmVwb3J0aW5nTGluZURlZmluaXRpb24uZGltZW5zaW9ucylbMF0uY29kZSAhPT0gJ2RpcmVjdFN1cGVyaW9yJykge1xyXG4gICAgICAgIGNvbnN0IGRpID0ge1xyXG4gICAgICAgICAgdmFsdWU6ICdkaXJlY3RTdXBlcmlvcicsXHJcbiAgICAgICAgICB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5kaXJlY3RTdXBlcmlvcicpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5kaW1lbnNpb25zLnB1c2goZGkpO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAoY29uc3QgZGltZW5zaW9uIG9mIEpTT04ucGFyc2UodGhpcy5yZXBvcnRpbmdMaW5lRGVmaW5pdGlvbi5kaW1lbnNpb25zKSkge1xyXG4gICAgICAgIGNvbnN0IGRpID0ge1xyXG4gICAgICAgICAgdmFsdWU6IGRpbWVuc2lvbi5jb2RlLFxyXG4gICAgICAgICAgdGV4dDogZGltZW5zaW9uLm5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVzaWduZXJVSVN0YXRlLmRpbWVuc2lvbnMucHVzaChkaSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy51c2VycyA9IFtkYXRhRW50aXR5XTtcclxuICAgIGlmIChkYXRhRW50aXR5LnJlZlVzZXJJZCkge1xyXG4gICAgICB0aGlzLnVzZXJzWzBdLnBlcmZvcm1lck5hbWUgPSB0aGlzLnZhcmlhYmxlUGFydGljaXBhbnROYW1lKGRhdGFFbnRpdHkucmVmVXNlcklkKTtcclxuICAgICAgdGhpcy5jdXJSZXBvcnRpbmdSZWZlciA9IHRoaXMucmVwb3J0aW5nUmVmZXJPYmplY3RzWzFdLnZhbHVlO1xyXG4gICAgICB0aGlzLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfSBlbHNlIGlmIChkYXRhRW50aXR5LnJlZkVtcGxveWVlSWQpIHtcclxuICAgICAgdGhpcy51c2Vyc1swXS5wZXJmb3JtZXJOYW1lID0gZGF0YUVudGl0eS5yZWZFbXBsb3llZUlkO1xyXG4gICAgICB0aGlzLmN1clJlcG9ydGluZ1JlZmVyID0gdGhpcy5yZXBvcnRpbmdSZWZlck9iamVjdHNbMl0udmFsdWU7XHJcbiAgICAgIHRoaXMuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1clJlcG9ydGluZ1JlZmVyID0gdGhpcy5yZXBvcnRpbmdSZWZlck9iamVjdHNbMF0udmFsdWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YUVudGl0eS5yZXBvcnRpbmdMaW5lRGVmSWQpIHtcclxuICAgICAgdGhpcy50eXBlUmVhZE9ubHkgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZChMb29rdXBHcmlkQ29tcG9uZW50KSBsb29rdXA6IExvb2t1cEdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChTeXNGYXJyaXNUcmVlSGVscENvbXBvbmVudCkgb3JnSGVscDogU3lzRmFycmlzVHJlZUhlbHBDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnaW5wdXRHcm91cCcpIGlucHV0R3JvdXA6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnaW5wdXRHcm91cDEnKSBpbnB1dEdyb3VwMTogRWxlbWVudFJlZjtcclxuICBzaG93Q2xlYXJCdXR0b24gPSBmYWxzZTtcclxuICBjb25kaXRpb246IHN0cmluZztcclxuICBpdGVtczogUmVwb3J0aW5nTGluZURlZmluaXRpb25FbnRpdHlbXSA9IFtdO1xyXG4gIHVzZXJzOiBQZXJmb3JtZXJFbnRpdHlbXSA9IFtdO1xyXG4gIGRlcGFydG1lbnRzOiBQZXJmb3JtZXJFbnRpdHlbXSA9IFtdO1xyXG4gIHBhZ2VJbmRleCA9IDE7XHJcbiAgcGFnZVNpemUgPSAyMDtcclxuICBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICB0b3RhbCA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaxh+aKpeexu+Wei+aYvuekuuWIl1xyXG4gICAqL1xyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7IHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5jb2RlJyksIGZpZWxkOiAnY29kZScsIHdpZHRoOiAxMDAgfSxcclxuICAgIHsgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5yZXBvcnRpbmdMaW5lLm5hbWUnKSwgZmllbGQ6ICduYW1lJywgd2lkdGg6IDEwMCB9XHJcbiAgXTtcclxuXHJcbiAgLyoqXHJcbiAgICogIOWPguS4juiAheWIl+ihqOaxh+aKpeWFs+ezu+aYvuekuuWtl+autVxyXG4gICAqL1xyXG4gIHJlcG9ydGluZ1JlZmVyT2JqZWN0cyA9IFtcclxuICAgIHsgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnJlcG9ydGluZ0xpbmUuZGVwdCcpLCB2YWx1ZTogJ2RlcHQnIH0sXHJcbiAgICB7IG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5yZXBvcnRpbmdMaW5lLnN5c1VzZXInKSwgdmFsdWU6ICdzeXNVc2VyJyB9LFxyXG4gICAgeyBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5lbXBsb3llZScpLCB2YWx1ZTogJ2VtcGxveWVlJyB9XHJcbiAgXTtcclxuICBjdXJSZXBvcnRpbmdSZWZlciA9IHRoaXMucmVwb3J0aW5nUmVmZXJPYmplY3RzWzBdLnZhbHVlO1xyXG5cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgcHVibGljIGRlc2lnbmVyVUlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgZXhwcjogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSxcclxuICApIHtcclxuICAgIHRoaXMubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZSB8fCBuZXcgV2ZMb2NhbGVQaXBlKGxvY2FsZUlkLCByZXNvdXJjZXMpO1xyXG4gICAgdGhpcy5nZXRSZXBvcnRpbmdMaW5lVHlwZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmsYfmiqXlhbPns7vnsbvlnotcclxuICAgKi9cclxuICBnZXRSZXBvcnRpbmdMaW5lVHlwZSgpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9yZXBvcnRpbmdMaW5lRGVmaW5pdGlvbnMnO1xyXG4gICAgdGhpcy5odHRwLmdldCh1cmwpLnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLnJlcG9ydGluZ0xpbmVEZWZpbml0aW9uTGlzdCA9IHJlO1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5yZXBvcnRpbmdMaW5lRGVmaW5pdGlvbkxpc3Quc2xpY2UoMCwgdGhpcy5wYWdlU2l6ZSk7XHJcbiAgICAgIHRoaXMudG90YWwgPSB0aGlzLnJlcG9ydGluZ0xpbmVEZWZpbml0aW9uTGlzdC5sZW5ndGg7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uY2xlYXIoKSB7XHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5ID0gbmV3IFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5KCk7XHJcbiAgfVxyXG5cclxuICAvLyDlj4LnhafnsbvlnovmlLnlj5hcclxuICByZWZlck9iamVjdENoYW5nZShkYXRhOiBhbnkpIHtcclxuICAgIGlmIChkYXRhID09PSAnZGVwdCcpIHtcclxuICAgICAgdGhpcy5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB0aGlzLmN1clJlcG9ydGluZ1JlZmVyID0gdGhpcy5yZXBvcnRpbmdSZWZlck9iamVjdHNbMF0udmFsdWU7XHJcbiAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucmVmVXNlcklkID0gbnVsbDtcclxuICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZFbXBsb3llZUlkID0gbnVsbDtcclxuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ3N5c1VzZXInKSB7XHJcbiAgICAgIHRoaXMuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIHRoaXMuY3VyUmVwb3J0aW5nUmVmZXIgPSB0aGlzLnJlcG9ydGluZ1JlZmVyT2JqZWN0c1sxXS52YWx1ZTtcclxuICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdJZCA9IG51bGw7XHJcbiAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucmVmT3JnTmFtZSA9IG51bGw7XHJcbiAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucmVmRW1wbG95ZWVJZCA9IG51bGw7XHJcbiAgICB9IGVsc2UgeyAvLyDlkZjlt6XnmoTmg4XlhrVcclxuICAgICAgdGhpcy5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgdGhpcy5jdXJSZXBvcnRpbmdSZWZlciA9IHRoaXMucmVwb3J0aW5nUmVmZXJPYmplY3RzWzJdLnZhbHVlO1xyXG4gICAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZk9yZ0lkID0gbnVsbDtcclxuICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdOYW1lID0gbnVsbDtcclxuICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZVc2VySWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8g5Y+C54Wn5a+56LGh5YiH5o2i5pe277yM5riF56m6dXNlcuWSjGRlcGFydG1lbnRcclxuICAgIHRoaXMudXNlcnMgPSBbXTtcclxuICAgIHRoaXMuZGVwYXJ0bWVudHMgPSBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPgueFp+eUqOaIt+aUueWPmFxyXG4gICAqL1xyXG4gIHJlZmVyVXNlckNoYW5nZShkYXRhOiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog57u05bqm5pS55Y+YXHJcbiAgICovXHJcbiAgcmVwb3J0aW5nRGltZW5zaW9uQ2hhbmdlKGRhdGE6IGFueSkge1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog57uE57uH5biu5Yqp6YCJ5a6M5ZCOXHJcbiAgICovXHJcbiAgb3JnU2VsZWN0ZWQob3JnOiBhbnkpIHsgLy8g57uE57uH5biu5Yqp6YCJ5a6M5ZCOXHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZk9yZ0lkID0gb3JnLmlkO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdOYW1lID0gb3JnLm5hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnvJbovpHmnaHku7ZcclxuICAgKi9cclxuICBlZGl0Q29uZGl0aW9uKCkge1xyXG4gICAgLy8gdGhpcy5leHByLmNsZWFyQ29udGV4dCgpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgY29udGV4dCA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmFkZENvbnRleHQoY29udGV4dCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByLnNldEVkaXRQYXR0ZXJuKEV4cHJFZGl0TW9kZS5Db25kaXRpb25hbCk7IC8vIOihqOi+vuW8j+WxleeOsOaooeW8j++8mum7mOiupOeugOaYk+eJiFxyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkuY29uZGl0aW9uKTsgLy8gdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5jb25kaXRpb25cclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChleHByZXNzaW9uaW5mbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkuY29uZGl0aW9uID0gZXhwcmVzc2lvbmluZm87XHJcbiAgICAgIC8v54K55Ye756Gu5a6a5ZCO77yM5Y676Zmk6KGo6L6+5byP6YeM6Z2i55qE5paw5aKe55qE5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcyA9IHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoeCA9PiAhY29udGV4dC5zb21lKHkgPT4geS5rZXkgPT09IHgua2V5KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVwb3J0aW5nVHlwZXModmFsdWU/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMucGFnZUluZGV4IC0gMSkgKiB0aGlzLnBhZ2VTaXplO1xyXG4gICAgY29uc3QgZW5kID0gc3RhcnQgKyB0aGlzLnBhZ2VTaXplO1xyXG4gICAgbGV0IGl0ZW1zID0gW107XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgaXRlbXMgPSB0aGlzLnJlcG9ydGluZ0xpbmVEZWZpbml0aW9uTGlzdC5maWx0ZXIoZiA9PiBmLm5hbWUuaW5kZXhPZih2YWx1ZSkgPiAtMSB8fCBmLmNvZGUuaW5kZXhPZih2YWx1ZSkgPiAtMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpdGVtcyA9IHRoaXMucmVwb3J0aW5nTGluZURlZmluaXRpb25MaXN0O1xyXG4gICAgfVxyXG4gICAgdGhpcy50b3RhbCA9IGl0ZW1zLmxlbmd0aDtcclxuICAgIHRoaXMuaXRlbXMgPSBpdGVtcy5zbGljZShzdGFydCwgZW5kKTtcclxuICAgIHRoaXMubG9va3VwLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5sb2FkRGF0YSh7XHJcbiAgICAgIHRvdGFsOiB0aGlzLnRvdGFsLFxyXG4gICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgZGF0YTogdGhpcy5pdGVtc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIHRoaXMuaW5wdXRHcm91cC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ21vdXNlZW50ZXInLFxyXG4gICAgICAgIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcylcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5pbnB1dEdyb3VwLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbW91c2VsZWF2ZScsXHJcbiAgICAgICAgdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlucHV0R3JvdXAxLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbW91c2VlbnRlcicsXHJcbiAgICAgICAgdGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlucHV0R3JvdXAxLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbW91c2VsZWF2ZScsXHJcbiAgICAgICAgdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIG9uTW91c2VFbnRlcihldmVudCkge1xyXG4gICAgdGhpcy5zaG93Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuc2hvd0NsZWFyQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25Nb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICB0aGlzLnNob3dDbGVhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIGZhbHNlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHN0ciA9IGlzU2hvdyA/ICcnIDogJ25vbmUnO1xyXG4gICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1jbGVhcicpO1xyXG4gICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdJZCA9ICcnO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdOYW1lID0gJyc7XHJcbiAgfVxyXG4gIGNsZWFyVXNlcigpIHtcclxuICAgIHRoaXMudXNlcnMgPSBbXTtcclxuICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucmVmVXNlcklkID0gJyc7XHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZkVtcGxveWVlSWQgPSAnJztcclxuICB9XHJcbiAgY2xlYXJPcmcoKSB7XHJcbiAgICB0aGlzLmRlcGFydG1lbnRzID0gW107XHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZk9yZ0lkID0gJyc7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RPcmcoZGF0YTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnNob3dFeHBySGVscChkYXRhKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdFVzZXJzKGRhdGE6IHN0cmluZykge1xyXG4gICAgdGhpcy5zaG93RXhwckhlbHAoZGF0YSk7XHJcbiAgfVxyXG4gIHNob3dFeHBySGVscChkYXRhOiBzdHJpbmcpIHtcclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIHRoaXMuZXhwci5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQWR2YW5jZWQpOyAvLyDooajovr7lvI/lsZXnjrDmqKHlvI/vvJrpu5jorqTpq5jnuqdcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnBhcnRpY2lwYW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUucGFydGljaXBhbnRDb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGRhdGEgPT09ICdzeXNVc2VyJykge1xyXG4gICAgICBpZiAodGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZVc2VySWQgJiYgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZVc2VySWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCh0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZlVzZXJJZCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KCcnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChkYXRhID09PSAnb3JnJykge1xyXG4gICAgICBpZiAodGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdJZCAmJiB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZk9yZ0lkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQodGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdJZCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KCcnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHsgLy8g5ZGY5bel5Y+K5YW25LuW5rGH5oql5a+56LGh57G75Z6LXHJcbiAgICAgIGlmICh0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlZkVtcGxveWVlSWQgJiYgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZFbXBsb3llZUlkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQodGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZFbXBsb3llZUlkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQoJycpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoZXhwcmVzc2lvbkluZm86IHN0cmluZykgPT4ge1xyXG4gICAgICBpZiAoZGF0YSA9PT0gJ3N5c1VzZXInKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBQZXJmb3JtZXJFbnRpdHkoZXhwcmVzc2lvbkluZm8sICcnLCAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpOyAvLyB3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uXHJcbiAgICAgICAgdXNlci50YWcgPSAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgdXNlci5wZXJmb3JtZXJOYW1lID0gdGhpcy52YXJpYWJsZVBhcnRpY2lwYW50TmFtZShleHByZXNzaW9uSW5mbyk7XHJcbiAgICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZVc2VySWQgPSB1c2VyLnBlcmZvcm1lcklkO1xyXG4gICAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkudGFnID0gdXNlci50YWc7XHJcbiAgICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5wZXJmb3JtZXJOYW1lID0gdXNlci5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIHRoaXMudXNlcnMgPSBbdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eV07XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ29yZycpIHtcclxuICAgICAgICBjb25zdCBkZXB0ID0gbmV3IFBlcmZvcm1lckVudGl0eShleHByZXNzaW9uSW5mbywgJycsICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgZGVwdC50YWcgPSAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdOYW1lID0gZXhwcmVzc2lvbkluZm87XHJcbiAgICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZPcmdJZCA9IGV4cHJlc3Npb25JbmZvO1xyXG4gICAgICAgIHRoaXMuZGVwYXJ0bWVudHMgPSBbdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZW1wbG95ZWUgPSBuZXcgUGVyZm9ybWVyRW50aXR5KGV4cHJlc3Npb25JbmZvLCAnJywgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nKTtcclxuICAgICAgICBlbXBsb3llZS5wZXJmb3JtZXJOYW1lID0gZXhwcmVzc2lvbkluZm87XHJcbiAgICAgICAgZW1wbG95ZWUudGFnID0gJ2V4cHJlc3Npb24nO1xyXG4gICAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucmVmRW1wbG95ZWVJZCA9IGV4cHJlc3Npb25JbmZvO1xyXG4gICAgICAgIHRoaXMucmVwb3J0aW5nTGluZURhdGFFbnRpdHkucGVyZm9ybWVyTmFtZSA9IGVtcGxveWVlLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgdGhpcy51c2VycyA9IFt0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5XTtcclxuICAgICAgfVxyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcHJpdmF0ZSB2YXJpYWJsZVBhcnRpY2lwYW50TmFtZShleHByOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgZm9yIChjb25zdCBjIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnBhcnRpY2lwYW50Q29udGV4dCkge1xyXG4gICAgICBpZiAoZXhwci5pbmRleE9mKGMua2V5KSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGMubmFtZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBjIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQpIHtcclxuICAgICAgaWYgKGV4cHIuaW5kZXhPZihjLmtleSkgPiAtMSkge1xyXG4gICAgICAgIHJldHVybiBjLm5hbWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5idXNpbmVzc0ZpZWxkcycpO1xyXG4gIH1cclxuXHJcbiAgZGVmQ2hhbmdlZCgpIHtcclxuICAgIFN5c3RlbS5pbXBvcnQoJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYi93Zi1yZXBvcnRpbmctZGF0YS9yZXBvcnRpbmdMaW5lRGVmSGVscC5qcz92PTIwMjMxMTIzJykudGhlbigoKSA9PiB7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BXZlJlcG9ydGluZ0xpbmVEZWYuUmVwb3J0aW5nTGluZURlZkhlbHBVdGlsLmdldFJlcG9ydGluZ0xpbmVIZWxwKCkudGhlbihkYXRhID0+IHtcclxuICAgICAgICB0aGlzLmRlZlNlbGVjdGVkKGRhdGEpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVmU2VsZWN0ZWQoZGF0YSkge1xyXG4gICAgdGhpcy5kZWZOYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZXBvcnRpbmdMaW5lRGVmSWQgPSBkYXRhLmlkO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZXBvcnRpbmdMaW5lRGVmTmFtZSA9IGRhdGEubmFtZTtcclxuXHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEaW1lbnNpb24gPSBKU09OLnBhcnNlKGRhdGEuZGltZW5zaW9ucyk7XHJcbiAgICB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5kaW1lbnNpb25zID0gW1xyXG4gICAgICB7IHZhbHVlOiAnaGlnaGVyU3VwZXJpb3InLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5oaWdoZXJTdXBlcmlvcicpIH1cclxuICAgIF07XHJcbiAgICAvLyDlhbzlrrnljoblj7LmlbDmja5cclxuICAgIGlmICh0aGlzLnJlcG9ydGluZ0xpbmVEaW1lbnNpb25bMF0uY29kZSAhPT0gJ2RpcmVjdFN1cGVyaW9yJykge1xyXG4gICAgICBjb25zdCBkaSA9IHtcclxuICAgICAgICB2YWx1ZTogJ2RpcmVjdFN1cGVyaW9yJyxcclxuICAgICAgICB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucmVwb3J0aW5nTGluZS5kaXJlY3RTdXBlcmlvcicpXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kZXNpZ25lclVJU3RhdGUuZGltZW5zaW9ucy5wdXNoKGRpKTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgZGltZW5zaW9uIG9mIHRoaXMucmVwb3J0aW5nTGluZURpbWVuc2lvbikge1xyXG4gICAgICBjb25zdCBkaSA9IHtcclxuICAgICAgICB2YWx1ZTogZGltZW5zaW9uLmNvZGUsXHJcbiAgICAgICAgdGV4dDogZGltZW5zaW9uLm5hbWVcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5kZXNpZ25lclVJU3RhdGUuZGltZW5zaW9ucy5wdXNoKGRpKTtcclxuICAgIH1cclxuICAgIC8vIOWumuS5ieWIh+aNouWQju+8jOm7mOiupOaYr+WPgueFp+e7hOe7h1xyXG4gICAgdGhpcy5jdXJSZXBvcnRpbmdSZWZlciA9IHRoaXMucmVwb3J0aW5nUmVmZXJPYmplY3RzWzBdLnZhbHVlO1xyXG4gICAgLy8g5LiL6L6555qE5Y+C54Wn5Lq65Lmf5b6X6ZqQ6JePIDIwMjMtNS0xOFxyXG4gICAgdGhpcy5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZVc2VySWQgPSBudWxsO1xyXG4gICAgdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5yZWZFbXBsb3llZUlkID0gbnVsbDtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldFBlcmZvcm1lcnMoKSB7XHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnR5cGUgPSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic7XHJcbiAgICB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5LnJlcG9ydGluZ1JlZmVyT2JqZWN0ID0gdGhpcy5jdXJSZXBvcnRpbmdSZWZlcjtcclxuICAgIHJldHVybiB0aGlzLnJlcG9ydGluZ0xpbmVEYXRhRW50aXR5O1xyXG4gIH1cclxufVxyXG4iXX0=