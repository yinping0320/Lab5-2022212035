/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ComponentFactoryResolver, EventEmitter, Inject, Injector, Input, LOCALE_ID, Optional, Output, TemplateRef, ViewChild } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { DatagridComponent } from '@farris/ui-datagrid';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { MessagerService } from '@farris/ui-messager';
import { BsModalService } from '@farris/ui-modal';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { PerformerEditComponent } from '../performer/views/performer-edit/performer-edit.component';
import { AssignConfig } from './assign-config';
import { ComponentParticipant, OrganizationParticipant, ParticipantInfo } from './participant.info';
import { ParticipantUIState } from './participant.uistate';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
export class ParticipantComponent {
    /**
     * @param {?} designerUIState
     * @param {?} uistate
     * @param {?} resolver
     * @param {?} injector
     * @param {?} modalService
     * @param {?} message
     * @param {?} expr
     * @param {?} http
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(designerUIState, uistate, resolver, injector, modalService, message, expr, http, cdr, localeId, resources, localePipe) {
        this.designerUIState = designerUIState;
        this.uistate = uistate;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.expr = expr;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.nodeType = 'notifyActivity';
        this.isClose = true;
        this.participant = new ParticipantInfo();
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        // 编辑状态，用于区分是新增还是编辑  new | edit
        this.type = 'humanPerformer';
        this.assignStrategyList = [
            { value: 'ALL', name: this.localePipe.transform('component.participant.all') },
            { value: 'ASSIGN', name: this.localePipe.transform('component.participant.assign') },
            { value: 'CLAIM', name: this.localePipe.transform('component.participant.claim') }
        ];
        this.operatorCollection = [
            { text: this.localePipe.transform('component.participant.currentUser'), value: 'currentUser' },
            { text: this.localePipe.transform('component.participant.procInstCreator'), value: 'procInstCreator' }
        ];
        this.modalConfig = {
            title: this.localePipe.transform('component.participant.participantSet'),
            width: 900,
            height: 662,
            showButtons: true
        };
        this.columns = [
            {
                field: 'order', width: 25, title: this.localePipe.transform('component.participant.order'),
                editor: {
                    type: EditorTypes.NUMBERBOX, options: {}
                },
            }, {
                field: 'type', width: 50, title: this.localePipe.transform('component.participant.type'),
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            }, {
                field: 'performerName', width: 50, title: this.localePipe.transform('component.participant.performerName'), showTips: true, formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                (v, d, i) => {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return d.performerName;
                        case 'wf.VariableParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.PositionParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.ComponentParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.ReportingLineParticipantExpression':
                            return ((/** @type {?} */ (d))).reportingLineDefName + '-' + ((/** @type {?} */ (d))).dimension;
                        case 'wf.MatrixParticipantExpression':
                            return ((/** @type {?} */ (d))).matrixDefName + '-' + ((/** @type {?} */ (d))).dataFieldAlias;
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName;
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'description', width: 100, title: this.localePipe.transform('component.participant.description'), showTips: true,
                formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                (v, d, i) => {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return this.getUserPerformerDescription(d);
                        case 'wf.VariableParticipantExpression':
                            return this.getVariablePerformerDescription(d);
                        case 'wf.PositionParticipantExpression':
                            return this.getPositionPerformerDescription(d);
                        case 'wf.ComponentParticipantExpression':
                            return this.getComponentPerformerDescription(d);
                        case 'wf.ReportingLineParticipantExpression':
                            return this.getReportingLinePerformerDescription(d);
                        case 'wf.MatrixParticipantExpression':
                            return this.getMatrixPerformerDescription(d);
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName + '，且' + (((/** @type {?} */ (d))).includeChildren ? '包含下级' : '不包含下级');
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'condition', width: 60, title: this.localePipe.transform('component.participant.condition'), showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.editConditon(e);
                        }),
                    }
                }
            }
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.GetOrganizationType();
    }
    /**
     * @param {?} participant
     * @return {?}
     */
    set value(participant) {
        this.participant = JSON.parse(JSON.stringify(participant));
        if (!this.participant.assignStrategy.assignConfig) {
            this.participant.assignStrategy.assignConfig = new AssignConfig();
        }
        this.preAssignStrategy = participant.assignStrategy.assignStrategy;
        if (this.participant.humanPerformerList
            && this.participant.humanPerformerList.length > 0) {
            if (Math.max(...this.participant.humanPerformerList.map((/**
             * @param {?} p
             * @return {?}
             */
            p => p.order))) === 0) {
                /** @type {?} */
                let index = 1;
                for (const humanPerformer of this.participant.humanPerformerList) {
                    humanPerformer.order = index;
                    index++;
                }
            }
            this.participant.humanPerformerList = this.participant.humanPerformerList.sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => a.order - b.order));
        }
        if (this.participant.potentialOwnerList
            && this.participant.potentialOwnerList.length > 0) {
            if (Math.max(...this.participant.potentialOwnerList.map((/**
             * @param {?} p
             * @return {?}
             */
            p => p.order))) === 0) {
                /** @type {?} */
                let index = 1;
                for (const potentialOwner of this.participant.potentialOwnerList) {
                    potentialOwner.order = index;
                    index++;
                }
            }
            this.participant.potentialOwnerList = this.participant.potentialOwnerList.sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => a.order - b.order));
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.nodeType = this.editorParams.nodeType;
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.humanPerformerGrid.endCellEdit();
        if (this.potentialOwnerGrid) {
            this.potentialOwnerGrid.endCellEdit();
        }
        /** @type {?} */
        const object = {
            value: this.participant, parameters: null
        };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    assignStrategyChange(data) {
        if (this.preAssignStrategy !== 'ASSIGN' && data === 'ASSIGN' && this.participant.humanPerformerList.length > 0) {
            if (!this.participant.assignStrategy.assignConfig) {
                this.participant.assignStrategy.assignConfig = new AssignConfig();
            }
            this.message.question(this.localePipe.transform('component.participant.dataMovement1'), (/**
             * @return {?}
             */
            () => {
                this.humanPerformerCopyToPotentialOwner();
            }));
        }
        else if (this.preAssignStrategy === 'ASSIGN' && data !== 'ASSIGN' && this.participant.potentialOwnerList.length > 0) {
            this.message.question(this.localePipe.transform('component.participant.dataMovement2'), (/**
             * @return {?}
             */
            () => {
                this.potentialOwnerCopyToHumanPerformer();
            }));
        }
        this.preAssignStrategy = data;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    switchChange(data) {
        if (data) {
            this.clearPerformer('potentialOwner');
        }
    }
    /**
     * @param {?} performerType
     * @param {?} type
     * @return {?}
     */
    addPerformer(performerType, type) {
        this.editState = 'new';
        this.type = type;
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.performerType = performerType;
        /** @type {?} */
        const boxsize = this.attributeBoxSize(performerType);
        /** @type {?} */
        const modalConfig = {
            title: this.localePipe.transform('component.participant.participantSelection'),
            width: boxsize.width,
            height: boxsize.height,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
        this.dropDownEl.close();
        if (this.dropDownE2) {
            this.dropDownE2.close();
        }
    }
    /**
     * @return {?}
     */
    editOK() {
        this.isClose = true;
        if (this.compRef) {
            /** @type {?} */
            const re = this.compRef.instance.getPerformers();
            if (re.userPerformers && re.userPerformers.length > 0) {
                for (const p of re.userPerformers) {
                    this.addUserPerformer(p);
                }
            }
            if (re.variable && re.variable !== null && re.variable.performerId) {
                this.addvariablePerformer(re.variable);
            }
            // 2023-7-28 组织岗支持多选
            if (re.positions && re.positions.length > 0) {
                this.addPositionPerformer(re.positions);
            }
            if (re.component && re.component.metadataId && re.component.methodCode) {
                this.addComponentPerformer(re.component);
            }
            if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {
                this.addReportingLinePerformer(re.reportingLine);
            }
            if (re.matrix && re.matrix.matrixDefId) {
                this.addMatrixPerformer(re.matrix);
            }
            if (re.activityExecutorPerformers && re.activityExecutorPerformers.length > 0) {
                for (const a of re.activityExecutorPerformers) {
                    this.addActivityExecutorPerformer(a);
                }
            }
            if (re.organizationParticipant) {
                this.addOrganizationParticipant(re.organizationParticipant);
            }
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
        // 编辑完成后刷新两个组件
        this.humanPerformerGrid.refresh();
        this.potentialOwnerGrid.refresh();
    }
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    addUserPerformer(userPerformer) {
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => (a.id === userPerformer.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === userPerformer.performerId))));
            if (i > -1) {
                // this.participant.humanPerformerList[i] = userPerformer;
            }
            else {
                if (this.editState === 'edit') {
                    this.removeHumanPerformer();
                }
                /** @type {?} */
                let index;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max(...this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.order))) + 1;
                }
                else {
                    index = 1;
                }
                userPerformer.order = index;
                this.participant.humanPerformerList.push(userPerformer);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => (a.id === userPerformer.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === userPerformer.performerId))));
            if (i > -1) {
                // this.participant.potentialOwnerList[i] = userPerformer;
            }
            else {
                if (this.editState === 'edit') {
                    this.removePotentialOwner();
                }
                /** @type {?} */
                let index;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max(...this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => p.order))) + 1;
                }
                else {
                    index = 1;
                }
                userPerformer.order = index;
                this.participant.potentialOwnerList.push(userPerformer);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    }
    /**
     * @private
     * @param {?} variable
     * @return {?}
     */
    addvariablePerformer(variable) {
        /** @type {?} */
        const v = variable;
        if (!v || !v.varValue) {
            this.message.info(this.localePipe.transform('component.participant.selectProcessVariables'));
            this.isClose = false;
        }
        else if (!v.varType) {
            this.message.info(this.localePipe.transform('component.participant.selectVariableValueType'));
            this.isClose = false;
        }
        else if (!v.relation) {
            this.message.info(this.localePipe.transform('component.participant.selectRelation'));
            this.isClose = false;
        }
        else {
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                const i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => (a.id === variable.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === variable.performerId))));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = variable;
                }
                else {
                    if (this.editState === 'edit') {
                        this.removeHumanPerformer();
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max(...this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        h => h.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    variable.order = index;
                    this.participant.humanPerformerList.push(variable);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                const i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => (a.id === variable.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === variable.performerId))));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = variable;
                }
                else {
                    if (this.editState === 'edit') {
                        this.removePotentialOwner();
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max(...this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    variable.order = index;
                    this.participant.potentialOwnerList.push(variable);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    }
    /**
     * @private
     * @param {?} positions
     * @return {?}
     */
    addPositionPerformer(positions) {
        for (const position of positions) {
            if (!position.performerId) {
                this.message.info(this.localePipe.transform('component.participant.selectPosition'));
                this.isClose = false;
            }
            else {
                if ((!position.orgType || position.orgType == null) && (position.isRequired && position.positionType === '1')) {
                    this.message.info(this.localePipe.transform('component.participant.selectOrgType'));
                    this.isClose = false;
                }
                else if ((!position.orgId || position.orgId == null) && (position.isRequired && position.positionType === '1')) {
                    this.message.info(this.localePipe.transform('component.participant.orgFill'));
                    this.isClose = false;
                }
                else {
                    // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                    if (this.type === 'humanPerformer') {
                        /** @type {?} */
                        const i = this.participant.humanPerformerList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        a => {
                            if (a.type !== 'wf.PositionParticipantExpression') {
                                return false;
                            }
                            /** @type {?} */
                            const p = (/** @type {?} */ (a));
                            return (p.id === position.id);
                        }));
                        if (i > -1) {
                            this.participant.humanPerformerList[i] = position;
                        }
                        else {
                            /** @type {?} */
                            let index;
                            if (this.participant.humanPerformerList.length > 0) {
                                index = Math.max(...this.participant.humanPerformerList.map((/**
                                 * @param {?} h
                                 * @return {?}
                                 */
                                h => h.order))) + 1;
                            }
                            else {
                                index = 1;
                            }
                            position.order = index;
                            this.participant.humanPerformerList.push(position);
                        }
                        this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
                    }
                    else if (this.type === 'potentialOwner') {
                        /** @type {?} */
                        const i = this.participant.potentialOwnerList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        a => {
                            if (a.type !== 'wf.PositionParticipantExpression') {
                                return false;
                            }
                            /** @type {?} */
                            const p = (/** @type {?} */ (a));
                            return (p.id === position.id);
                        }));
                        if (i > -1) {
                            this.participant.potentialOwnerList[i] = position;
                        }
                        else {
                            /** @type {?} */
                            let index;
                            if (this.participant.potentialOwnerList.length > 0) {
                                index = Math.max(...this.participant.potentialOwnerList.map((/**
                                 * @param {?} p
                                 * @return {?}
                                 */
                                p => p.order))) + 1;
                            }
                            else {
                                index = 1;
                            }
                            position.order = index;
                            this.participant.potentialOwnerList.push(position);
                        }
                        this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    addComponentPerformer(component) {
        /** @type {?} */
        const cmp = new ComponentParticipant();
        cmp.id = component.id;
        cmp.metadataId = component.metadataId;
        cmp.methodCode = component.methodCode;
        cmp.methodName = component.methodName;
        cmp.name = component.name;
        cmp.actualParameters = component.actualParameters;
        cmp.type = 'wf.ComponentParticipantExpression';
        cmp.condition = component.condition;
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => a.id === cmp.id));
            if (i > -1) {
                this.participant.humanPerformerList[i] = cmp;
            }
            else {
                /** @type {?} */
                let index;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max(...this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.order))) + 1;
                }
                else {
                    index = 1;
                }
                cmp.order = index;
                this.participant.humanPerformerList.push(cmp);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => a.id === cmp.id));
            if (i > -1) {
                this.participant.potentialOwnerList[i] = cmp;
            }
            else {
                /** @type {?} */
                let index;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max(...this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => p.order))) + 1;
                }
                else {
                    index = 1;
                }
                cmp.order = index;
                this.participant.potentialOwnerList.push(cmp);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    }
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    addReportingLinePerformer(reportingLine) {
        if (reportingLine.reportingReferObject === 'dept' && !reportingLine.refOrgId) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refOrgIdNotNull'));
        }
        else if (reportingLine.reportingReferObject !== 'dept' && !reportingLine.refUserId && !reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refUserIdNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                const i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.id === reportingLine.id));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = reportingLine;
                }
                else {
                    /** @type {?} */
                    const reportingLines = this.participant.humanPerformerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.type === 'wf.ReportingLineParticipantExpression'));
                    for (const r of reportingLines) {
                        /** @type {?} */
                        const reportingLineData = (/** @type {?} */ (r));
                        if (reportingLineData.reportingLineDefId === reportingLine.reportingLineDefId &&
                            reportingLineData.dimension === reportingLine.dimension &&
                            reportingLineData.refUserId === reportingLine.refUserId &&
                            reportingLineData.refEmployeeId === reportingLine.refEmployeeId &&
                            reportingLineData.refOrgId === reportingLine.refOrgId) {
                            this.message.error(this.localePipe.transform('component.participant.repDefConfigured'));
                            return;
                        }
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max(...this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        h => h.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    reportingLine.order = index;
                    this.participant.humanPerformerList.push(reportingLine);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                const i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.id === reportingLine.id));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = reportingLine;
                }
                else {
                    /** @type {?} */
                    const reportingLines = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.type === 'wf.ReportingLineParticipantExpression'));
                    for (const r of reportingLines) {
                        /** @type {?} */
                        const reportingLineData = (/** @type {?} */ (r));
                        if (reportingLineData.reportingLineDefId === reportingLine.reportingLineDefId &&
                            reportingLineData.dimension === reportingLine.dimension &&
                            reportingLineData.refUserId === reportingLine.refUserId &&
                            reportingLineData.refEmployeeId === reportingLine.refEmployeeId &&
                            reportingLineData.refOrgId === reportingLine.refOrgId) {
                            this.message.error(this.localePipe.transform('component.participant.repDefConfigured'));
                            return;
                        }
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max(...this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    reportingLine.order = index;
                    this.participant.potentialOwnerList.push(reportingLine);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    }
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    addMatrixPerformer(matrix) {
        if (!matrix.conditionField1 && !matrix.conditionField2 && !matrix.conditionField3) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.atLeastOneCondition'));
        }
        else if (!matrix.dataFieldAlias) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.dataFieldAliasNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                const i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.id === matrix.id));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = matrix;
                }
                else {
                    /** @type {?} */
                    const matrixParticipants = this.participant.humanPerformerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.type === 'wf.MatrixParticipantExpression'));
                    for (const m of matrixParticipants) {
                        /** @type {?} */
                        const matrixData = (/** @type {?} */ (m));
                        if (matrixData.matrixDefId === matrix.matrixDefId &&
                            matrixData.conditionField1 === matrix.conditionField1 &&
                            matrixData.conditionField2 === matrix.conditionField2 &&
                            matrixData.conditionField3 === matrix.conditionField3 &&
                            matrixData.dataFieldAlias === matrix.dataFieldAlias) {
                            this.message.error(this.localePipe.transform('component.participant.matrixConfigured'));
                            return;
                        }
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max(...this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        h => h.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    matrix.order = index;
                    this.participant.humanPerformerList.push(matrix);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                const i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.id === matrix.id));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = matrix;
                }
                else {
                    /** @type {?} */
                    const matrixParticipants = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.type === 'wf.MatrixParticipantExpression'));
                    for (const m of matrixParticipants) {
                        /** @type {?} */
                        const matrixData = (/** @type {?} */ (m));
                        if (matrixData.matrixDefId === matrix.matrixDefId &&
                            matrixData.conditionField1 === matrix.conditionField1 &&
                            matrixData.conditionField2 === matrix.conditionField2 &&
                            matrixData.conditionField3 === matrix.conditionField3 &&
                            matrixData.dataFieldAlias === matrix.dataFieldAlias) {
                            this.message.error(this.localePipe.transform('component.participant.matrixConfigured'));
                            return;
                        }
                    }
                    /** @type {?} */
                    let index;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max(...this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        p => p.order))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    matrix.order = index;
                    this.participant.potentialOwnerList.push(matrix);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    }
    /**
     * @private
     * @param {?} activityExecutor
     * @return {?}
     */
    addActivityExecutorPerformer(activityExecutor) {
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => (a.id === activityExecutor.id ||
                (((/** @type {?} */ (a))).activityDefId && ((/** @type {?} */ (a))).activityDefId === activityExecutor.activityDefId))));
            if (i < 0) {
                if (this.editState === 'edit') {
                    this.removeHumanPerformer(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                }
                /** @type {?} */
                let index;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max(...this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    h => h.order))) + 1;
                }
                else {
                    index = 1;
                }
                activityExecutor.order = index;
                this.participant.humanPerformerList.push(activityExecutor);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => (a.id === activityExecutor.id ||
                (((/** @type {?} */ (a))).activityDefId && ((/** @type {?} */ (a))).activityDefId === activityExecutor.activityDefId))));
            if (i < 0) {
                if (this.editState === 'edit') {
                    this.removePotentialOwner(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                }
                /** @type {?} */
                let index;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max(...this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => p.order))) + 1;
                }
                else {
                    index = 1;
                }
                activityExecutor.order = index;
                this.participant.potentialOwnerList.push(activityExecutor);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    }
    /**
     * @private
     * @param {?} organization
     * @return {?}
     */
    addOrganizationParticipant(organization) {
        /** @type {?} */
        const organizationParticipant = new OrganizationParticipant();
        organizationParticipant.id = organization.id || ProcessDeUtil.GenerateElementId();
        organizationParticipant.type = 'wf.OrganizationParticipantExpression';
        organizationParticipant.condition = organization.condition;
        organizationParticipant.name = organization.name;
        organizationParticipant.actionScope = organization.actionScope;
        organizationParticipant.organizationLevel = organization.organizationLevel;
        organizationParticipant.organizationId = organization.organizationId;
        organizationParticipant.organizationCode = organization.organizationCode;
        organizationParticipant.organizationName = organization.organizationName;
        organizationParticipant.includeChildren = organization.includeChildren;
        organizationParticipant.parentsUntil = organization.parentsUntil;
        organizationParticipant.tag = organization.tag;
        if (this.type === 'humanPerformer') {
            this.participant.humanPerformerList = this.participant.humanPerformerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            p => p.type !== 'wf.OrganizationParticipantExpression'));
            /** @type {?} */
            let index;
            if (this.participant.humanPerformerList.length > 0) {
                index = Math.max(...this.participant.humanPerformerList.map((/**
                 * @param {?} h
                 * @return {?}
                 */
                h => h.order))) + 1;
            }
            else {
                index = 1;
            }
            organizationParticipant.order = index;
            this.participant.humanPerformerList.push(organizationParticipant);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            this.participant.potentialOwnerList = this.participant.potentialOwnerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            p => p.type !== 'wf.OrganizationParticipantExpression'));
            /** @type {?} */
            let index;
            if (this.participant.potentialOwnerList.length > 0) {
                index = Math.max(...this.participant.potentialOwnerList.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.order))) + 1;
            }
            else {
                index = 1;
            }
            organizationParticipant.order = index;
            this.participant.potentialOwnerList.push(organizationParticipant);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    }
    /**
     * @return {?}
     */
    editCancel() {
        if (this.editDialog) {
            this.editDialog.close();
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    editPerformer(type) {
        this.editState = 'edit';
        this.type = type;
        /** @type {?} */
        let selectedRow;
        if (type === 'humanPerformer') {
            selectedRow = this.humanPerformerGrid.selectedRow;
        }
        else if (type === 'potentialOwner') {
            selectedRow = this.potentialOwnerGrid.selectedRow;
        }
        if (!selectedRow) {
            this.message.info(this.localePipe.transform('component.participant.selectPerformer'));
            return;
        }
        /** @type {?} */
        const curPerformer = selectedRow.data;
        if (curPerformer) {
            /** @type {?} */
            const boxsize = this.attributeBoxSize(curPerformer.type);
            /** @type {?} */
            const modalConfig = {
                title: this.localePipe.transform('component.participant.participantSelection'),
                width: boxsize.width,
                height: boxsize.height,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            this.compRef.instance.performerType = curPerformer.type;
            this.compRef.instance.editState = this.editState;
            switch (curPerformer.type) {
                case 'wf.PositionParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.UserParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.VariableParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.VariableParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    const url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + ((/** @type {?} */ (curPerformer))).reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    (res) => {
                        if (!res) {
                            this.message.error(this.localePipe.transform('component.participant.definitionDeleted'));
                            if (type === 'humanPerformer') {
                                this.removeHumanPerformer();
                            }
                            else if (type === 'potentialOwner') {
                                this.removePotentialOwner();
                            }
                        }
                        else {
                            this.editDialog = this.modalService.show(this.compRef, modalConfig);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    const urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + ((/** @type {?} */ (curPerformer))).matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    (res) => {
                        if (!res) {
                            this.message.error(this.localePipe.transform('component.participant.matrixDeleted'));
                            if (type === 'humanPerformer') {
                                this.removeHumanPerformer();
                            }
                            else if (type === 'potentialOwner') {
                                this.removePotentialOwner();
                            }
                        }
                        else {
                            this.editDialog = this.modalService.show(this.compRef, modalConfig);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ActivityExecutorParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.OrganizationParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.OrganizationParticipantExpression',
                        value: curPerformer
                    };
                    break;
            }
            if (curPerformer.type !== 'wf.ReportingLineParticipantExpression' &&
                curPerformer.type !== 'wf.MatrixParticipantExpression') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig);
            }
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    removePerformer(type) {
        if (type === 'humanPerformer') {
            if (this.humanPerformerGrid.selectedRow) {
                this.humanPerformerGrid.endCellEdit();
                /** @type {?} */
                const index = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.id === this.humanPerformerGrid.selectedRow.data.id));
                this.participant.humanPerformerList.splice(index, 1);
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else {
                this.message.info(this.localePipe.transform('component.participant.selectParticipantInfo'));
            }
        }
        else if (type === 'potentialOwner') {
            if (this.potentialOwnerGrid.selectedRow) {
                this.potentialOwnerGrid.endCellEdit();
                /** @type {?} */
                const index = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.id === this.potentialOwnerGrid.selectedRow.data.id));
                this.participant.potentialOwnerList.splice(index, 1);
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
            else {
                this.message.info(this.localePipe.transform('component.participant.selectParticipantInfo'));
            }
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    clearPerformer(type) {
        if (type === 'humanPerformer') {
            this.participant.humanPerformerList = new Array();
        }
        else if (type === 'potentialOwner') {
            this.participant.potentialOwnerList = new Array();
        }
        this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        if (this.potentialOwnerGrid) {
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    moveUp(type) {
        if (type === 'humanPerformer') {
            /** @type {?} */
            const selectedRow = this.humanPerformerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            const performer = selectedRow.data;
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            c => c.id === performer.id));
            if (i === 0) {
                return;
            }
            /** @type {?} */
            const index = this.participant.humanPerformerList[i].order;
            this.participant.humanPerformerList[i].order = this.participant.humanPerformerList[i - 1].order;
            this.participant.humanPerformerList[i - 1].order = index;
            this.swapArray(this.participant.humanPerformerList, i, i - 1);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            this.humanPerformerGrid.selectRow(performer.id, true);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            const selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            const performer = selectedRow.data;
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            c => c.id === performer.id));
            if (i === 0) {
                return;
            }
            /** @type {?} */
            const index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i - 1].order;
            this.participant.potentialOwnerList[i - 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i - 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer.id, true);
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    moveDown(type) {
        if (type === 'humanPerformer') {
            /** @type {?} */
            const selectedRow = this.humanPerformerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            const performer = selectedRow.data;
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            c => c.id === performer.id));
            if (i === this.participant.humanPerformerList.length - 1) {
                return;
            }
            /** @type {?} */
            const index = this.participant.humanPerformerList[i].order;
            this.participant.humanPerformerList[i].order = this.participant.humanPerformerList[i + 1].order;
            this.participant.humanPerformerList[i + 1].order = index;
            this.swapArray(this.participant.humanPerformerList, i, i + 1);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            this.humanPerformerGrid.selectRow(performer.id, true);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            const selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            const performer = selectedRow.data;
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            c => c.id === performer.id));
            if (i === this.participant.potentialOwnerList.length - 1) {
                return;
            }
            /** @type {?} */
            const index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i + 1].order;
            this.participant.potentialOwnerList[i + 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i + 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer.id, true);
        }
    }
    /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    swapArray(arr, i1, i2) {
        arr[i1] = arr.splice(i2, 1, arr[i1])[0];
        return arr;
    }
    /**
     * @return {?}
     */
    removeHumanPerformer() {
        if (this.humanPerformerGrid.selectedRow) {
            this.humanPerformerGrid.endCellEdit();
            /** @type {?} */
            const i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            item => item.id === this.humanPerformerGrid.selectedRow.data.id));
            this.participant.humanPerformerList.splice(i, 1);
        }
        else {
            this.message.info(this.localePipe.transform('component.participant.selectDefaultHandler'));
        }
    }
    /**
     * @return {?}
     */
    removePotentialOwner() {
        if (this.potentialOwnerGrid.selectedRow) {
            this.potentialOwnerGrid.endCellEdit();
            /** @type {?} */
            const i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            item => item.id === this.potentialOwnerGrid.selectedRow.data.id));
            this.participant.potentialOwnerList.splice(i, 1);
        }
        else {
            this.message.info(this.localePipe.transform('component.participant.selectpotentialtHandler'));
        }
    }
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    getUserPerformerDescription(userPerformer) {
        if (userPerformer.tag === 'expression') {
            return userPerformer.performerId;
        }
        else {
            if (userPerformer.orgName) {
                return this.localePipe.transform('component.participant.org') + userPerformer.orgName;
            }
            else {
                return '';
            }
        }
    }
    /**
     * @private
     * @param {?} variablePerformer
     * @return {?}
     */
    getVariablePerformerDescription(variablePerformer) {
        if (variablePerformer.tag === 'expression') {
            return variablePerformer.varValue;
        }
    }
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    getPositionPerformerDescription(position) {
        if (this.designerUIState.scene === 'inSuite') {
            return null;
        }
        if (position.positionType === '1') {
            if (position.orgId) {
                return this.localePipe.transform('component.participant.positionType1') + position.orgId;
            }
            else {
                return this.localePipe.transform('component.participant.positionType2');
            }
        }
        else if (position.positionType === '0') {
            return this.localePipe.transform('component.participant.positionType3');
        }
    }
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    getComponentPerformerDescription(position) {
        /** @type {?} */
        let des = this.localePipe.transform('component.participant.comp') + position.name
            + this.localePipe.transform('component.participant.parameters');
        if (position.actualParameters && position.actualParameters.length > 0) {
            position.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            p => {
                des += `${p.code}：${p.value}，`;
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    }
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    getReportingLinePerformerDescription(reportingLine) {
        /** @type {?} */
        let description = '';
        if (reportingLine.refUserId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refUserId;
        }
        if (reportingLine.refEmployeeId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refEmployeeId;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += `，`;
            }
            if (reportingLine.refEmployeeId) {
                description += `，`;
            }
            description += this.localePipe.transform('component.participant.referenceOrganization') + reportingLine.refOrgId;
        }
        return description;
    }
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    getMatrixPerformerDescription(matrix) {
        /** @type {?} */
        let description = '';
        if (matrix.conditionField1) {
            description += this.localePipe.transform('component.participant.condition1') + matrix.conditionFieldText1 + `，`;
        }
        if (matrix.conditionField2) {
            description += this.localePipe.transform('component.participant.condition2') + matrix.conditionFieldText2 + `，`;
        }
        if (matrix.conditionField3) {
            description += this.localePipe.transform('component.participant.condition3') + matrix.conditionFieldText3 + `，`;
        }
        if (matrix.dataFieldAlias) {
            description += this.localePipe.transform('component.participant.data') + matrix.dataFieldAlias + `，`;
        }
        return description.slice(0, description.length - 1);
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    editConditon(e) {
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            for (const schema of this.designerUIState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        let context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            for (const variable of this.designerUIState.subActivityContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            for (const variable of this.designerUIState.activityComponentContext) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.key === variable.key))) {
                    context.push(variable);
                }
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        (cond) => {
            if (this.humanPerformerGrid && this.humanPerformerGrid.selectedRow && this.humanPerformerGrid.selectedRow.data) {
                /** @type {?} */
                let temp = this.participant.humanPerformerList.find((/**
                 * @param {?} h
                 * @return {?}
                 */
                h => h.id === this.humanPerformerGrid.selectedRow.data.id));
                temp.condition = cond;
            }
            if (this.potentialOwnerGrid && this.potentialOwnerGrid.selectedRow && this.potentialOwnerGrid.selectedRow.data) {
                /** @type {?} */
                let temp = this.participant.potentialOwnerList.find((/**
                 * @param {?} h
                 * @return {?}
                 */
                h => h.id === this.potentialOwnerGrid.selectedRow.data.id));
                temp.condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    humanPerformerCopyToPotentialOwner() {
        if (this.participant.humanPerformerList && this.participant.humanPerformerList.length > 0) {
            if (!this.participant.potentialOwnerList) {
                this.participant.potentialOwnerList = new Array();
            }
            this.participant.potentialOwnerList.push(...this.participant.humanPerformerList);
            this.participant.humanPerformerList = new Array();
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            if (this.potentialOwnerGrid) {
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    potentialOwnerCopyToHumanPerformer() {
        if (this.participant.potentialOwnerList && this.participant.potentialOwnerList.length > 0) {
            if (!this.participant.humanPerformerList) {
                this.participant.humanPerformerList = new Array();
            }
            /** @type {?} */
            const performers = this.participant.potentialOwnerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            p => p.type !== 'wf.OrganizationParticipantExpression'));
            if (performers && performers.length > 0) {
                // 此处直接push会导致order重复,需要重新排序
                this.participant.humanPerformerList.push(...performers);
                this.participant.humanPerformerList.forEach((/**
                 * @param {?} human
                 * @param {?} index
                 * @return {?}
                 */
                (human, index) => {
                    human.order = index + 1;
                }));
                this.participant.potentialOwnerList = this.participant.potentialOwnerList.filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.type === 'wf.OrganizationParticipantExpression'));
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
                if (this.potentialOwnerGrid) {
                    this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
                }
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    GetOrganizationType() {
        /** @type {?} */
        const url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        d => ({ value: d.id, text: d.name })))));
    }
    // 构造不同参与者选择界面的尺寸 2023-7-5
    /**
     * @private
     * @param {?} boxType
     * @return {?}
     */
    attributeBoxSize(boxType) {
        /** @type {?} */
        const boxsize = {
            width: 760,
            height: 512
        };
        switch (boxType) {
            case 'wf.PositionParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 455;
                return boxsize;
            case 'wf.UserParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
            case 'wf.VariableParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ReportingLineParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.MatrixParticipantExpression':
                boxsize.width = 780;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ComponentParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.ActivityExecutorParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
                ;
            case 'wf.OrganizationParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 360;
                return boxsize;
                ;
        }
    }
}
ParticipantComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-participant',
                template: "<div class=\"f-page f-utils-overflow-xhya\">\r\n  <div class=\"f-page-main d-flex flex-column farris-overflow-y-auto\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n  <section class=\"f-page-main d-flex flex-column\">\r\n    <farris-section *ngIf=\"nodeType === 'userActivity'\" class=\"pt-0 f-section-form f-section-in-mainsubcard mb-1\" [showHeader]=\"false\" >\r\n      <div class=\"f-form-layout farris-form f-form-lable-auto farris-form-controls-inline\">\r\n        <div class=\"col-12 farris-group-wrap\">\r\n          <div class=\"form-group\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\">{{'component.participant.allocationPolicy'|wfLocale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <farris-radiogroup [(ngModel)]=\"participant.assignStrategy.assignStrategy\" [data]=\"assignStrategyList\" name=\"assignStrategy\"\r\n                [horizontal]=\"true\" (changeValue)=\"assignStrategyChange($event)\">\r\n              </farris-radiogroup>\r\n              <div class=\"farris-feedback valid-feedback\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n    <farris-section *ngIf=\"nodeType === 'userActivity' && participant.assignStrategy.assignStrategy==='ASSIGN'\" class=\"pt-0 f-section-form f-section-in-mainsubcard\" [showHeader]=\"false\">\r\n      <div class=\"f-form-layout farris-form f-form-lable-auto farris-form-controls-inline\">\r\n        <div class=\"col-12 px-0 d-flex\">\r\n          <div class=\"col-4 farris-group-wrap\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.operator'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-combo-list [(ngModel)]=\"participant.assignStrategy.assignConfig.operator\" name=\"operator\" [ngModelOptions]=\"{standalone: true}\"\r\n                  [idField]=\"'value'\" [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"operatorCollection\"\r\n                  [panelHeight]=\"60\">\r\n                </farris-combo-list>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-auto farris-group-wrap f-form-label-xl\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.multiSelect'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-switch size=\"small\" [(ngModel)]=\"participant.assignStrategy.assignConfig.multiSelect\" name=\"multiSelect\">\r\n                </farris-switch>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-auto farris-group-wrap f-form-label-el\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.necessary'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-switch size=\"small\" [(ngModel)]=\"participant.assignStrategy.assignConfig.necessary\" name=\"necessary\">\r\n                </farris-switch>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n    <div class=\"d-flex flex-column\" [ngStyle]=\"{'height':nodeType === 'notifyActivity'? '470px': participant.assignStrategy.assignStrategy==='ASSIGN' ? '220px':'470px'}\">\r\n      <farris-section class=\"pt-0 f-section-grid\" [mainTitle]=\"nodeType === 'notifyActivity' ? ('component.participant.notifyRecipient' | wfLocale) : ('component.participant.defaultHandler' | wfLocale)\" [enableAccordion]=\"''\"\r\n      [enableMaximize]=\"false\" [fill]=\"true\" style=\"overflow: initial;\">\r\n      <ng-template farrisSectionToolbar>\r\n        <div class=\"btn-group mr-2\"  fDropdown #dropdownEl=\"fDropdown\" [autoRectify]=\"true\">\r\n          <farris-button class=\"dropdown-toggle\" fDropdownToggle [type]=\"'link'\">\r\n            {{'component.participant.new'|wfLocale}}\r\n          </farris-button>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression' ,'humanPerformer')\"><span>{{'component.participant.user'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression','humanPerformer')\"><span>{{'component.participant.variable'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression','humanPerformer')\"><span>{{designerUIState.scene==='inSuite'?(('component.participant.role'|wfLocale)):('component.participant.position'|wfLocale)}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression','humanPerformer')\"><span>{{'component.participant.reportingLine'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression','humanPerformer')\"><span>{{'component.participant.activityExecutor'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression','humanPerformer')\"><span>{{'component.participant.matrix'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression','humanPerformer')\"><span>{{'component.participant.component'|wfLocale}}</span></li>\r\n          </div>\r\n        </div>\r\n        <farris-button  [type]=\"'link'\" (click)=\"editPerformer('humanPerformer')\">{{'component.participant.editPerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"removePerformer('humanPerformer')\">{{'component.participant.removePerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"clearPerformer('humanPerformer')\">{{'component.participant.clearPerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"moveUp('humanPerformer')\">{{'component.participant.moveUp'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"moveDown('humanPerformer')\">{{'component.participant.moveDown'|wfLocale}}</farris-button>\r\n      </ng-template>\r\n      <div class=\"f-utils-fill\">\r\n        <farris-datagrid #humanPerformerGrid class=\"f-component-grid\" [columns]=\"columns\" [data]=\"participant.humanPerformerList\" #defaultPerformerGrid [idField]=\"'id'\" [showLineNumber]=\"false\"\r\n          [striped]=\"true\" [showCheckbox]=\"false\" [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\"\r\n          [multiSelect]=\"false\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </farris-section>\r\n    </div>\r\n    <div *ngIf=\"nodeType === 'userActivity' && participant.assignStrategy.assignStrategy==='ASSIGN'\" class=\"d-flex flex-column\" style=\"height: 220px;\">\r\n      <farris-section class=\"pt-0 f-section-grid\" mainTitle=\"{{'component.participant.alternativeHandler'|wfLocale}}\" [enableAccordion]=\"''\"\r\n        [enableMaximize]=\"false\" [fill]=\"true\" style=\"overflow: initial;\">\r\n      <ng-template farrisSectionHeader>\r\n        <div class=\"f-title\">\r\n          <h4 class=\"f-title-text\">{{'component.participant.alternativeHandler'|wfLocale}}</h4>\r\n        </div>\r\n        <label class=\"col-form-label mr-2 mb-0\">\r\n          <span class=\"farris-label-text\">{{'component.participant.isAllScope'|wfLocale}}</span>\r\n        </label>\r\n        <farris-switch size=\"small\" [(ngModel)]=\"participant.isAllScope\" name=\"isAllScope\" (valueChange)=\"switchChange($event)\">\r\n        </farris-switch>\r\n        <div class=\"f-toolbar\" [ngStyle]=\"{'visibility' : participant.isAllScope ? 'hidden' : 'visible'}\">\r\n          <div class=\"btn-group mr-2\"  fDropdown #dropdownE2=\"fDropdown\" [autoRectify]=\"true\">\r\n            <farris-button class=\"dropdown-toggle\" fDropdownToggle [type]=\"'link'\">\r\n              {{'component.participant.new'|wfLocale}}\r\n            </farris-button>\r\n            <div class=\"dropdown-menu\" fDropdownMenu>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression','potentialOwner')\"><span>{{'component.participant.user'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression','potentialOwner')\"><span>{{'component.participant.variable'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression','potentialOwner')\"><span>{{designerUIState.scene==='inSuite'?(('component.participant.role'|wfLocale)):('component.participant.position'|wfLocale)}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression','potentialOwner')\"><span>{{'component.participant.reportingLine'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression','potentialOwner')\"><span>{{'component.participant.activityExecutor'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression','potentialOwner')\"><span>{{'component.participant.matrix'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression','potentialOwner')\"><span>{{'component.participant.component'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.OrganizationParticipantExpression','potentialOwner')\"><span>{{'component.participant.organization'|wfLocale}}\r\n              </span></li>\r\n            </div>\r\n          </div>\r\n          <farris-button  [type]=\"'link'\" (click)=\"editPerformer('potentialOwner')\">{{'component.participant.editPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"removePerformer('potentialOwner')\">{{'component.participant.removePerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"clearPerformer('potentialOwner')\">{{'component.participant.clearPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveUp('potentialOwner')\">{{'component.participant.moveUp'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveDown('potentialOwner')\">{{'component.participant.moveDown'|wfLocale}}</farris-button>\r\n        </div>\r\n      </ng-template>\r\n      <div class=\"f-utils-fill\">\r\n        <farris-datagrid #potentialOwnerGrid class=\"f-component-grid\" [columns]=\"columns\" [data]=\"participant.potentialOwnerList\" #defaultPerformerGrid [idField]=\"'id'\" [showLineNumber]=\"false\"\r\n          [striped]=\"true\" [showCheckbox]=\"false\" [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\"\r\n          [multiSelect]=\"false\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </farris-section>\r\n    </div>\r\n  </section>\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.participant.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.participant.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">{{'component.participant.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">{{'component.participant.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n",
                providers: [
                    ParticipantUIState,
                    WfLocalePipe
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
ParticipantComponent.ctorParameters = () => [
    { type: ProcessDesignerUIState },
    { type: ParticipantUIState },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: BsModalService },
    { type: MessagerService },
    { type: ExpressionService },
    { type: HttpService },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
ParticipantComponent.propDecorators = {
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
    dropDownE2: [{ type: ViewChild, args: ['dropdownE2',] }],
    editFooter: [{ type: ViewChild, args: ['editFooter',] }],
    humanPerformerGrid: [{ type: ViewChild, args: ['humanPerformerGrid',] }],
    potentialOwnerGrid: [{ type: ViewChild, args: ['potentialOwnerGrid',] }],
    editorParams: [{ type: Input }],
    value: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ParticipantComponent.prototype.closeModal;
    /** @type {?} */
    ParticipantComponent.prototype.submitModal;
    /** @type {?} */
    ParticipantComponent.prototype.modalFooter;
    /** @type {?} */
    ParticipantComponent.prototype.dropDownEl;
    /** @type {?} */
    ParticipantComponent.prototype.dropDownE2;
    /** @type {?} */
    ParticipantComponent.prototype.editFooter;
    /** @type {?} */
    ParticipantComponent.prototype.humanPerformerGrid;
    /** @type {?} */
    ParticipantComponent.prototype.potentialOwnerGrid;
    /** @type {?} */
    ParticipantComponent.prototype.editorParams;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.preAssignStrategy;
    /** @type {?} */
    ParticipantComponent.prototype.nodeType;
    /** @type {?} */
    ParticipantComponent.prototype.editDialog;
    /** @type {?} */
    ParticipantComponent.prototype.compRef;
    /** @type {?} */
    ParticipantComponent.prototype.isClose;
    /** @type {?} */
    ParticipantComponent.prototype.participant;
    /** @type {?} */
    ParticipantComponent.prototype.editState;
    /** @type {?} */
    ParticipantComponent.prototype.type;
    /** @type {?} */
    ParticipantComponent.prototype.assignStrategyList;
    /** @type {?} */
    ParticipantComponent.prototype.operatorCollection;
    /** @type {?} */
    ParticipantComponent.prototype.modalConfig;
    /** @type {?} */
    ParticipantComponent.prototype.columns;
    /** @type {?} */
    ParticipantComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.localePipe;
}
export class ParticipantConverter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data && data.humanPerformerList && data.humanPerformerList.length > 0) {
            return this.localePipe.transform("component.participant.set");
        }
        if (data && data.potentialOwnerList && data.potentialOwnerList.length > 0) {
            return this.localePipe.transform("component.participant.set");
        }
        if (data && data.isAllScope) {
            return this.localePipe.transform("component.participant.set");
        }
        return this.localePipe.transform("component.participant.notSet");
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    ParticipantConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFydGljaXBhbnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wYXJ0aWNpcGFudC9wYXJ0aWNpcGFudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsd0JBQXdCLEVBQWdCLFlBQVksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQVUsUUFBUSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pNLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRTlELE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFFNUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRTdELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBQ3BHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQStCLG9CQUFvQixFQUFxQix1QkFBdUIsRUFBRSxlQUFlLEVBQXVGLE1BQU0sb0JBQW9CLENBQUM7QUFDek8sT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0s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Z2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIENvbXBvbmVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbmplY3QsIEluamVjdG9yLCBJbnB1dCwgTE9DQUxFX0lELCBPbkluaXQsIE9wdGlvbmFsLCBPdXRwdXQsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgRkRyb3Bkb3duRGlyZWN0aXZlIH0gZnJvbSAnQGZhcnJpcy91aS1kcm9wZG93bic7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmLCBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy9pZGUtcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBFeHByRWRpdE1vZGUsIEV4cHJlc3Npb25TZXJ2aWNlLCBJbmplY3RlZFR5cGUgfSBmcm9tICdAZ3NwLXN2Yy9leHByZXNzaW9uJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24gfSBmcm9tICcuLi8uLi9kb21haW4vZW50aXRpZXMvb3JnYW5pemF0aW9uLXBhcnRpY2lwYW50LWV4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVVdGlsIH0gZnJvbSAnLi4vLi4vZG9tYWluL3Byb2Nlc3MtZGUtdXRpbCc7XHJcbmltcG9ydCB7IENvbXBvbmVudFBlcmZvcm1lciB9IGZyb20gJy4uL3BlcmZvcm1lci92aWV3cy9jb21wb25lbnQtcGVyZm9ybWVyL2NvbXBvbmVudC1wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHsgUGVyZm9ybWVyRWRpdENvbXBvbmVudCB9IGZyb20gJy4uL3BlcmZvcm1lci92aWV3cy9wZXJmb3JtZXItZWRpdC9wZXJmb3JtZXItZWRpdC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBBc3NpZ25Db25maWcgfSBmcm9tICcuL2Fzc2lnbi1jb25maWcnO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQsIENvbXBvbmVudFBhcnRpY2lwYW50LCBNYXRyaXhQYXJ0aWNpcGFudCwgT3JnYW5pemF0aW9uUGFydGljaXBhbnQsIFBhcnRpY2lwYW50SW5mbywgUG9zaXRpb25QYXJ0aWNpcGFudCwgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50LCBVc2VyUGFydGljaXBhbnQsIFZhcmlhYmxlUGFydGljaXBhbnQgfSBmcm9tICcuL3BhcnRpY2lwYW50LmluZm8nO1xyXG5pbXBvcnQgeyBQYXJ0aWNpcGFudFVJU3RhdGUgfSBmcm9tICcuL3BhcnRpY2lwYW50LnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBFZGl0b3JUeXBlcyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uLy4uL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItcGFydGljaXBhbnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9wYXJ0aWNpcGFudC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcGFydGljaXBhbnQuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIFBhcnRpY2lwYW50VUlTdGF0ZSxcclxuICAgICBXZkxvY2FsZVBpcGVcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHN1Ym1pdE1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2ljb25TZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkVsJykgZHJvcERvd25FbDogRkRyb3Bkb3duRGlyZWN0aXZlO1xyXG4gIEBWaWV3Q2hpbGQoJ2Ryb3Bkb3duRTInKSBkcm9wRG93bkUyOiBGRHJvcGRvd25EaXJlY3RpdmU7XHJcbiAgQFZpZXdDaGlsZCgnZWRpdEZvb3RlcicpIGVkaXRGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnaHVtYW5QZXJmb3JtZXJHcmlkJykgaHVtYW5QZXJmb3JtZXJHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdwb3RlbnRpYWxPd25lckdyaWQnKSBwb3RlbnRpYWxPd25lckdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xyXG5cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xyXG5cclxuICBASW5wdXQoKSBzZXQgdmFsdWUocGFydGljaXBhbnQ6IFBhcnRpY2lwYW50SW5mbykge1xyXG4gICAgdGhpcy5wYXJ0aWNpcGFudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFydGljaXBhbnQpKTtcclxuICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudC5hc3NpZ25TdHJhdGVneS5hc3NpZ25Db25maWcpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hc3NpZ25TdHJhdGVneS5hc3NpZ25Db25maWcgPSBuZXcgQXNzaWduQ29uZmlnKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnByZUFzc2lnblN0cmF0ZWd5ID0gcGFydGljaXBhbnQuYXNzaWduU3RyYXRlZ3kuYXNzaWduU3RyYXRlZ3k7XHJcbiAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RcclxuICAgICAgJiYgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMFxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkgPT09IDApIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAxO1xyXG4gICAgICAgIGZvciAoY29uc3QgaHVtYW5QZXJmb3JtZXIgb2YgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpIHtcclxuICAgICAgICAgIGh1bWFuUGVyZm9ybWVyLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFxyXG4gICAgICAmJiB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkgPT09IDApIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAxO1xyXG4gICAgICAgIGZvciAoY29uc3QgcG90ZW50aWFsT3duZXIgb2YgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpIHtcclxuICAgICAgICAgIHBvdGVudGlhbE93bmVyLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJlQXNzaWduU3RyYXRlZ3k7XHJcblxyXG4gIG5vZGVUeXBlOiAndXNlckFjdGl2aXR5JyB8ICdub3RpZnlBY3Rpdml0eScgID0gJ25vdGlmeUFjdGl2aXR5JztcclxuXHJcbiAgZWRpdERpYWxvZzogQnNNb2RhbFJlZjtcclxuICBjb21wUmVmOiBDb21wb25lbnRSZWY8UGVyZm9ybWVyRWRpdENvbXBvbmVudD47XHJcbiAgaXNDbG9zZSA9IHRydWU7XHJcblxyXG4gIHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudEluZm8gPSBuZXcgUGFydGljaXBhbnRJbmZvKCk7XHJcbiAgZWRpdFN0YXRlID0gJ25ldyc7IC8vIOe8lui+keeKtuaAge+8jOeUqOS6juWMuuWIhuaYr+aWsOWinui/mOaYr+e8lui+kSAgbmV3IHwgZWRpdFxyXG5cclxuICB0eXBlID0gJ2h1bWFuUGVyZm9ybWVyJztcclxuXHJcbiAgYXNzaWduU3RyYXRlZ3lMaXN0ID0gW1xyXG4gICAgeyB2YWx1ZTogJ0FMTCcsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5hbGwnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ0FTU0lHTicsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5hc3NpZ24nKSB9LFxyXG4gICAgeyB2YWx1ZTogJ0NMQUlNJywgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNsYWltJykgfVxyXG4gIF07XHJcblxyXG5cclxuICBvcGVyYXRvckNvbGxlY3Rpb24gPSBbXHJcbiAgICB7IHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jdXJyZW50VXNlcicpLCB2YWx1ZTogJ2N1cnJlbnRVc2VyJyB9LFxyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucHJvY0luc3RDcmVhdG9yJyksIHZhbHVlOiAncHJvY0luc3RDcmVhdG9yJyB9XHJcbiAgXTtcclxuXHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBhcnRpY2lwYW50U2V0JyksXHJcbiAgICB3aWR0aDogOTAwLFxyXG4gICAgaGVpZ2h0OiA2NjIsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAnb3JkZXInLCB3aWR0aDogMjUsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQub3JkZXInKSxcclxuICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgdHlwZTogRWRpdG9yVHlwZXMuTlVNQkVSQk9YLCBvcHRpb25zOiB7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSwge1xyXG4gICAgZmllbGQ6ICd0eXBlJywgd2lkdGg6IDUwLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnR5cGUnKSxcclxuICAgIGZvcm1hdHRlcjoge1xyXG4gICAgICB0eXBlOiAnZW51bScsXHJcbiAgICAgIG9wdGlvbnM6IHsgdmFsdWVGaWVsZDogJ3ZhbHVlJywgdGV4dEZpZWxkOiAndGV4dCcsIGRhdGE6IHRoaXMudWlzdGF0ZS50eXBlQ29sbGVjdGlvbiB9XHJcbiAgICB9XHJcbiAgICB9LCB7XHJcbiAgICBmaWVsZDogJ3BlcmZvcm1lck5hbWUnLCB3aWR0aDogNTAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucGVyZm9ybWVyTmFtZScpLCBzaG93VGlwczogdHJ1ZSwgZm9ybWF0dGVyOiAodiwgZCwgaSkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKGQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIGQucGVyZm9ybWVyTmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgVmFyaWFibGVQYXJ0aWNpcGFudCkubmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgUG9zaXRpb25QYXJ0aWNpcGFudCkucGVyZm9ybWVyTmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIENvbXBvbmVudFBhcnRpY2lwYW50KS5uYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkucmVwb3J0aW5nTGluZURlZk5hbWUgKyAnLScgKyAoZCBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQpLmRpbWVuc2lvbjtcclxuICAgICAgICBjYXNlICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIE1hdHJpeFBhcnRpY2lwYW50KS5tYXRyaXhEZWZOYW1lICsgJy0nICsgKGQgYXMgTWF0cml4UGFydGljaXBhbnQpLmRhdGFGaWVsZEFsaWFzO1xyXG4gICAgICAgIGNhc2UgJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkucGVyZm9ybWVyTmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50KS5vcmdhbml6YXRpb25OYW1lO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGZpZWxkOiAnZGVzY3JpcHRpb24nLCB3aWR0aDogMTAwLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmRlc2NyaXB0aW9uJyksIHNob3dUaXBzOiB0cnVlLFxyXG4gICAgZm9ybWF0dGVyOiAodiwgZCwgaSkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKGQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlclBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhcmlhYmxlUGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9zaXRpb25QZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50UGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXBvcnRpbmdMaW5lUGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldE1hdHJpeFBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkucGVyZm9ybWVyTmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50KS5vcmdhbml6YXRpb25OYW1lICsgJ++8jOS4lCcgKyAoKGQgYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnQpLmluY2x1ZGVDaGlsZHJlbiA/ICfljIXlkKvkuIvnuqcnIDogJ+S4jeWMheWQq+S4i+e6pycpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGZpZWxkOiAnY29uZGl0aW9uJywgd2lkdGg6IDYwLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNvbmRpdGlvbicpLCBzaG93VGlwczogdHJ1ZSxcclxuICAgIGVkaXRvcjoge1xyXG4gICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgZ3JvdXBUZXh0OiAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nLFxyXG4gICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZS5pbnN0YW5jZS52YWx1ZSA/IGUuaW5zdGFuY2UudmFsdWUgOiAnJyk7XHJcbiAgICAgICAgICB0aGlzLmVkaXRDb25kaXRvbihlKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB9XTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgZGVzaWduZXJVSVN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSB1aXN0YXRlOiBQYXJ0aWNpcGFudFVJU3RhdGUsXHJcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgICB0aGlzLkdldE9yZ2FuaXphdGlvblR5cGUoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5ub2RlVHlwZSA9IHRoaXMuZWRpdG9yUGFyYW1zLm5vZGVUeXBlO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgaWYgKHRoaXMucG90ZW50aWFsT3duZXJHcmlkKSB7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvYmplY3QgPSB7XHJcbiAgICAgIHZhbHVlOiB0aGlzLnBhcnRpY2lwYW50LCBwYXJhbWV0ZXJzOiBudWxsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBhc3NpZ25TdHJhdGVneUNoYW5nZShkYXRhKSB7XHJcbiAgICBpZiAodGhpcy5wcmVBc3NpZ25TdHJhdGVneSAhPT0gJ0FTU0lHTicgJiYgZGF0YSA9PT0gJ0FTU0lHTicgJiYgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoIXRoaXMucGFydGljaXBhbnQuYXNzaWduU3RyYXRlZ3kuYXNzaWduQ29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hc3NpZ25TdHJhdGVneS5hc3NpZ25Db25maWcgPSBuZXcgQXNzaWduQ29uZmlnKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5tZXNzYWdlLnF1ZXN0aW9uKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhTW92ZW1lbnQxJyksICgpID0+IHtcclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyQ29weVRvUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJlQXNzaWduU3RyYXRlZ3kgPT09ICdBU1NJR04nICYmIGRhdGEgIT09ICdBU1NJR04nICYmIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLnF1ZXN0aW9uKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhTW92ZW1lbnQyJyksICgpID0+IHtcclxuICAgICAgICB0aGlzLnBvdGVudGlhbE93bmVyQ29weVRvSHVtYW5QZXJmb3JtZXIoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnByZUFzc2lnblN0cmF0ZWd5ID0gZGF0YTtcclxuICB9XHJcblxyXG4gIHN3aXRjaENoYW5nZShkYXRhOiBib29sZWFuKSB7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICB0aGlzLmNsZWFyUGVyZm9ybWVyKCdwb3RlbnRpYWxPd25lcicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkUGVyZm9ybWVyKHBlcmZvcm1lclR5cGU6IHN0cmluZywgdHlwZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmVkaXRTdGF0ZSA9ICduZXcnO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQZXJmb3JtZXJFZGl0Q29tcG9uZW50KTtcclxuICAgIHRoaXMuY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXJUeXBlID0gcGVyZm9ybWVyVHlwZTtcclxuICAgIGNvbnN0IGJveHNpemUgPSB0aGlzLmF0dHJpYnV0ZUJveFNpemUocGVyZm9ybWVyVHlwZSk7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wYXJ0aWNpcGFudFNlbGVjdGlvbicpLFxyXG4gICAgICB3aWR0aDogYm94c2l6ZS53aWR0aCxcclxuICAgICAgaGVpZ2h0OiBib3hzaXplLmhlaWdodCxcclxuICAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICB0aGlzLmRyb3BEb3duRWwuY2xvc2UoKTtcclxuICAgIGlmICh0aGlzLmRyb3BEb3duRTIpIHtcclxuICAgICAgdGhpcy5kcm9wRG93bkUyLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlZGl0T0soKSB7XHJcbiAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuY29tcFJlZikge1xyXG4gICAgICBjb25zdCByZSA9IHRoaXMuY29tcFJlZi5pbnN0YW5jZS5nZXRQZXJmb3JtZXJzKCk7XHJcbiAgICAgIGlmIChyZS51c2VyUGVyZm9ybWVycyAmJiByZS51c2VyUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHJlLnVzZXJQZXJmb3JtZXJzKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFVzZXJQZXJmb3JtZXIocCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS52YXJpYWJsZSAmJiByZS52YXJpYWJsZSAhPT0gbnVsbCAmJiByZS52YXJpYWJsZS5wZXJmb3JtZXJJZCkge1xyXG4gICAgICAgIHRoaXMuYWRkdmFyaWFibGVQZXJmb3JtZXIocmUudmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIDIwMjMtNy0yOCDnu4Tnu4flspfmlK/mjIHlpJrpgIlcclxuICAgICAgaWYgKHJlLnBvc2l0aW9ucyAmJiByZS5wb3NpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuYWRkUG9zaXRpb25QZXJmb3JtZXIocmUucG9zaXRpb25zKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUuY29tcG9uZW50ICYmIHJlLmNvbXBvbmVudC5tZXRhZGF0YUlkICYmIHJlLmNvbXBvbmVudC5tZXRob2RDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnRQZXJmb3JtZXIocmUuY29tcG9uZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUucmVwb3J0aW5nTGluZSAmJiByZS5yZXBvcnRpbmdMaW5lLnJlcG9ydGluZ0xpbmVEZWZJZCAmJiByZS5yZXBvcnRpbmdMaW5lLmRpbWVuc2lvbikge1xyXG4gICAgICAgIHRoaXMuYWRkUmVwb3J0aW5nTGluZVBlcmZvcm1lcihyZS5yZXBvcnRpbmdMaW5lKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUubWF0cml4ICYmIHJlLm1hdHJpeC5tYXRyaXhEZWZJZCkge1xyXG4gICAgICAgIHRoaXMuYWRkTWF0cml4UGVyZm9ybWVyKHJlLm1hdHJpeCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzICYmIHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGEgb2YgcmUuYWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcnMpIHtcclxuICAgICAgICAgIHRoaXMuYWRkQWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcihhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgdGhpcy5hZGRPcmdhbml6YXRpb25QYXJ0aWNpcGFudChyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVkaXREaWFsb2cgJiYgdGhpcy5pc0Nsb3NlKSB7XHJcbiAgICAgIHRoaXMuZWRpdERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSAgIFxyXG4gICAgLy8g57yW6L6R5a6M5oiQ5ZCO5Yi35paw5Lik5Liq57uE5Lu2XHJcbiAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5yZWZyZXNoKCk7XHJcbiAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5yZWZyZXNoKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFVzZXJQZXJmb3JtZXIodXNlclBlcmZvcm1lcjogVXNlclBhcnRpY2lwYW50KSB7XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gdXNlclBlcmZvcm1lci5pZCB8fCAoKGEgYXMgVXNlclBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCAmJiAoYSBhcyBVc2VyUGFydGljaXBhbnQpLnBlcmZvcm1lcklkID09PSB1c2VyUGVyZm9ybWVyLnBlcmZvcm1lcklkKSkpO1xyXG4gICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgLy8gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0gPSB1c2VyUGVyZm9ybWVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUh1bWFuUGVyZm9ybWVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QucHVzaCh1c2VyUGVyZm9ybWVyKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IHVzZXJQZXJmb3JtZXIuaWQgfHwgKChhIGFzIFVzZXJQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgJiYgKGEgYXMgVXNlclBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCA9PT0gdXNlclBlcmZvcm1lci5wZXJmb3JtZXJJZCkpKTtcclxuICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIC8vIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gdXNlclBlcmZvcm1lcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVQb3RlbnRpYWxPd25lcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlclBlcmZvcm1lci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2godXNlclBlcmZvcm1lcik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGR2YXJpYWJsZVBlcmZvcm1lcih2YXJpYWJsZTogVmFyaWFibGVQYXJ0aWNpcGFudCkge1xyXG4gICAgY29uc3QgdiA9IHZhcmlhYmxlO1xyXG4gICAgaWYgKCF2IHx8ICF2LnZhclZhbHVlKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQcm9jZXNzVmFyaWFibGVzJykpO1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoIXYudmFyVHlwZSkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0VmFyaWFibGVWYWx1ZVR5cGUnKSk7XHJcbiAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICghdi5yZWxhdGlvbikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UmVsYXRpb24nKSk7XHJcbiAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gdmFyaWFibGUuaWQgfHwgKChhIGFzIFZhcmlhYmxlUGFydGljaXBhbnQpLnBlcmZvcm1lcklkICYmIChhIGFzIFZhcmlhYmxlUGFydGljaXBhbnQpLnBlcmZvcm1lcklkID09PSB2YXJpYWJsZS5wZXJmb3JtZXJJZCkpKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXSA9IHZhcmlhYmxlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUh1bWFuUGVyZm9ybWVyKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lm1hcChoID0+IGgub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyaWFibGUub3JkZXIgPSBpbmRleDtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IChhLmlkID09PSB2YXJpYWJsZS5pZCB8fCAoKGEgYXMgVmFyaWFibGVQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgJiYgKGEgYXMgVmFyaWFibGVQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgPT09IHZhcmlhYmxlLnBlcmZvcm1lcklkKSkpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gdmFyaWFibGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXJpYWJsZS5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRQb3NpdGlvblBlcmZvcm1lcihwb3NpdGlvbnM6IFBvc2l0aW9uUGFydGljaXBhbnRbXSkge1xyXG4gICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnMpIHtcclxuICAgICAgaWYgKCFwb3NpdGlvbi5wZXJmb3JtZXJJZCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQb3NpdGlvbicpKTtcclxuICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoKCFwb3NpdGlvbi5vcmdUeXBlIHx8IHBvc2l0aW9uLm9yZ1R5cGUgPT0gbnVsbCkgJiYgKHBvc2l0aW9uLmlzUmVxdWlyZWQgJiYgcG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMScpKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0T3JnVHlwZScpKTtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKCFwb3NpdGlvbi5vcmdJZCB8fCBwb3NpdGlvbi5vcmdJZCA9PSBudWxsKSAmJiAocG9zaXRpb24uaXNSZXF1aXJlZCAmJiBwb3NpdGlvbi5wb3NpdGlvblR5cGUgPT09ICcxJykpIHtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5vcmdGaWxsJykpO1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vICgxKWlk5LiA6Ie077yM5Li657yW6L6R5bKX5L2N77yb77yIMu+8iXBlcmZvcm1pZOS4gOiHtO+8jOaWsOWinueahOeUqOaIt++8jOWyl+S9jeW3suWtmOWcqFxyXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KGEgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChhLnR5cGUgIT09ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgcCA9IGEgYXMgUG9zaXRpb25QYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgICByZXR1cm4gKHAuaWQgPT09IHBvc2l0aW9uLmlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBwb3NpdGlvbi5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGEudHlwZSAhPT0gJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBjb25zdCBwID0gYSBhcyBQb3NpdGlvblBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICAgIHJldHVybiAocC5pZCA9PT0gcG9zaXRpb24uaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gcG9zaXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHBvc2l0aW9uLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRDb21wb25lbnRQZXJmb3JtZXIoY29tcG9uZW50OiBDb21wb25lbnRQZXJmb3JtZXIpIHtcclxuICAgIGNvbnN0IGNtcCA9IG5ldyBDb21wb25lbnRQYXJ0aWNpcGFudCgpO1xyXG4gICAgY21wLmlkID0gY29tcG9uZW50LmlkO1xyXG4gICAgY21wLm1ldGFkYXRhSWQgPSBjb21wb25lbnQubWV0YWRhdGFJZDtcclxuICAgIGNtcC5tZXRob2RDb2RlID0gY29tcG9uZW50Lm1ldGhvZENvZGU7XHJcbiAgICBjbXAubWV0aG9kTmFtZSA9IGNvbXBvbmVudC5tZXRob2ROYW1lO1xyXG4gICAgY21wLm5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGNtcC5hY3R1YWxQYXJhbWV0ZXJzID0gY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnM7XHJcbiAgICBjbXAudHlwZSA9ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nO1xyXG4gICAgY21wLmNvbmRpdGlvbiA9IGNvbXBvbmVudC5jb25kaXRpb247XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSBjbXAuaWQpO1xyXG4gICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0gPSBjbXA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lm1hcChoID0+IGgub3JkZXIpKSsxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNtcC5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2goY21wKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gY21wLmlkKTtcclxuICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gY21wO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbXAub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKGNtcCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRSZXBvcnRpbmdMaW5lUGVyZm9ybWVyKHJlcG9ydGluZ0xpbmU6IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkge1xyXG4gICAgaWYgKHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nUmVmZXJPYmplY3QgPT09ICdkZXB0JyAmJiAhcmVwb3J0aW5nTGluZS5yZWZPcmdJZCkge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZk9yZ0lkTm90TnVsbCcpKTtcclxuICAgIH0gZWxzZSBpZiAocmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCAhPT0gJ2RlcHQnICYmICFyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJiAhcmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKSB7IC8vIOeUqOaIt+WPiuWFtuS7luS6uuWRmOaxh+aKpeWvueixoeexu+Wei++8jOWPgueFp+eUqOaIt+WSjOWPgueFp+WRmOW3peS4jeiDveWFqOmDqOS4uuepulxyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZlVzZXJJZE5vdE51bGwnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlcG9ydGluZ0xpbmUuaWQpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldID0gcmVwb3J0aW5nTGluZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZXMgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maWx0ZXIoaCA9PiBoLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgcmVwb3J0aW5nTGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZURhdGEgPSByIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKHJlcG9ydGluZ0xpbmVEYXRhLnJlcG9ydGluZ0xpbmVEZWZJZCA9PT0gcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5kaW1lbnNpb24gPT09IHJlcG9ydGluZ0xpbmUuZGltZW5zaW9uICYmXHJcbiAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmVXNlcklkID09PSByZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZkVtcGxveWVlSWQgPT09IHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZk9yZ0lkID09PSByZXBvcnRpbmdMaW5lLnJlZk9yZ0lkXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVwRGVmQ29uZmlndXJlZCcpKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKGggPT4gaC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKHJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlcG9ydGluZ0xpbmUuaWQpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gcmVwb3J0aW5nTGluZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZXMgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maWx0ZXIoaCA9PiBoLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgcmVwb3J0aW5nTGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZURhdGEgPSByIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKHJlcG9ydGluZ0xpbmVEYXRhLnJlcG9ydGluZ0xpbmVEZWZJZCA9PT0gcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5kaW1lbnNpb24gPT09IHJlcG9ydGluZ0xpbmUuZGltZW5zaW9uICYmXHJcbiAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmVXNlcklkID09PSByZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZkVtcGxveWVlSWQgPT09IHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZk9yZ0lkID09PSByZXBvcnRpbmdMaW5lLnJlZk9yZ0lkXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVwRGVmQ29uZmlndXJlZCcpKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKHJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkTWF0cml4UGVyZm9ybWVyKG1hdHJpeDogTWF0cml4UGFydGljaXBhbnQpIHtcclxuICAgIGlmICghbWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJiAhbWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJiAhbWF0cml4LmNvbmRpdGlvbkZpZWxkMykge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmF0TGVhc3RPbmVDb25kaXRpb24nKSk7XHJcbiAgICB9IGVsc2UgaWYgKCFtYXRyaXguZGF0YUZpZWxkQWxpYXMpIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhRmllbGRBbGlhc05vdE51bGwnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IG1hdHJpeC5pZCk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0gPSBtYXRyaXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG1hdHJpeFBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbHRlcihoID0+IGgudHlwZSA9PT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBtIG9mIG1hdHJpeFBhcnRpY2lwYW50cykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRyaXhEYXRhID0gbSBhcyBNYXRyaXhQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKG1hdHJpeERhdGEubWF0cml4RGVmSWQgPT09IG1hdHJpeC5tYXRyaXhEZWZJZCAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQxID09PSBtYXRyaXguY29uZGl0aW9uRmllbGQxICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDIgPT09IG1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMyA9PT0gbWF0cml4LmNvbmRpdGlvbkZpZWxkMyAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuZGF0YUZpZWxkQWxpYXMgPT09IG1hdHJpeC5kYXRhRmllbGRBbGlhc1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm1hdHJpeENvbmZpZ3VyZWQnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lm1hcChoID0+IGgub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbWF0cml4Lm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKG1hdHJpeCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gbWF0cml4LmlkKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IG1hdHJpeDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgbWF0cml4UGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmlsdGVyKGggPT4gaC50eXBlID09PSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IG0gb2YgbWF0cml4UGFydGljaXBhbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeERhdGEgPSBtIGFzIE1hdHJpeFBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAobWF0cml4RGF0YS5tYXRyaXhEZWZJZCA9PT0gbWF0cml4Lm1hdHJpeERlZklkICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDEgPT09IG1hdHJpeC5jb25kaXRpb25GaWVsZDEgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMiA9PT0gbWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQzID09PSBtYXRyaXguY29uZGl0aW9uRmllbGQzICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5kYXRhRmllbGRBbGlhcyA9PT0gbWF0cml4LmRhdGFGaWVsZEFsaWFzXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubWF0cml4Q29uZmlndXJlZCcpKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBtYXRyaXgub3JkZXIgPSBpbmRleDtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2gobWF0cml4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZEFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXIoYWN0aXZpdHlFeGVjdXRvcjogQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KSB7XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gYWN0aXZpdHlFeGVjdXRvci5pZCB8fFxyXG4gICAgICAgICgoYSBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpLmFjdGl2aXR5RGVmSWQgJiYgKGEgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5hY3Rpdml0eURlZklkID09PSBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQpKSk7XHJcbiAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUh1bWFuUGVyZm9ybWVyKCk7IC8vIOWcqOe8lui+keeKtuaAgeS4i+mFjee9ruS6hua0u+WKqOWKnueQhuS6uuWPguS4juiAhe+8jOWFiOWwhumAieS4reeahOWIoOmZpFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKGggPT4gaC5vcmRlcikpKzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2goYWN0aXZpdHlFeGVjdXRvcik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IChhLmlkID09PSBhY3Rpdml0eUV4ZWN1dG9yLmlkIHx8XHJcbiAgICAgICAgKChhIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkuYWN0aXZpdHlEZWZJZCAmJiAoYSBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpLmFjdGl2aXR5RGVmSWQgPT09IGFjdGl2aXR5RXhlY3V0b3IuYWN0aXZpdHlEZWZJZCkpKTtcclxuICAgICAgaWYgKGkgPCAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdFN0YXRlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTsgLy8g5Zyo57yW6L6R54q25oCB5LiL6YWN572u5LqG5rS75Yqo5Yqe55CG5Lq65Y+C5LiO6ICF77yM5YWI5bCG6YCJ5Lit55qE5Yig6ZmkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChhY3Rpdml0eUV4ZWN1dG9yKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSBhZGRPcmdhbml6YXRpb25QYXJ0aWNpcGFudChvcmdhbml6YXRpb246IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgY29uc3Qgb3JnYW5pemF0aW9uUGFydGljaXBhbnQgPSBuZXcgT3JnYW5pemF0aW9uUGFydGljaXBhbnQoKTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmlkID0gb3JnYW5pemF0aW9uLmlkIHx8IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LnR5cGUgPSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJztcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmNvbmRpdGlvbiA9IG9yZ2FuaXphdGlvbi5jb25kaXRpb247XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5uYW1lID0gb3JnYW5pemF0aW9uLm5hbWU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5hY3Rpb25TY29wZSA9IG9yZ2FuaXphdGlvbi5hY3Rpb25TY29wZTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbkxldmVsID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb24ub3JnYW5pemF0aW9uSWQ7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25Db2RlID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkNvZGU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pbmNsdWRlQ2hpbGRyZW4gPSBvcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQucGFyZW50c1VudGlsID0gb3JnYW5pemF0aW9uLnBhcmVudHNVbnRpbDtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LnRhZyA9IG9yZ2FuaXphdGlvbi50YWc7XHJcblxyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbHRlcihwID0+IHAudHlwZSAhPT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICBsZXQgaW5kZXg7XHJcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgIH1cclxuICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QucHVzaChvcmdhbml6YXRpb25QYXJ0aWNpcGFudCk7XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmlsdGVyKHAgPT4gcC50eXBlICE9PSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgIGxldCBpbmRleDtcclxuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgfVxyXG4gICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmRlciA9IGluZGV4O1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKG9yZ2FuaXphdGlvblBhcnRpY2lwYW50KTtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZWRpdENhbmNlbCgpIHtcclxuICAgIGlmICh0aGlzLmVkaXREaWFsb2cpIHtcclxuICAgICAgdGhpcy5lZGl0RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlZGl0UGVyZm9ybWVyKHR5cGU6IHN0cmluZykge1xyXG4gICAgdGhpcy5lZGl0U3RhdGUgPSAnZWRpdCc7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgbGV0IHNlbGVjdGVkUm93O1xyXG4gICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgc2VsZWN0ZWRSb3cgPSB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdztcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBzZWxlY3RlZFJvdyA9IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93O1xyXG4gICAgfVxyXG4gICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UGVyZm9ybWVyJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXJQZXJmb3JtZXIgPSBzZWxlY3RlZFJvdy5kYXRhO1xyXG4gICAgaWYgKGN1clBlcmZvcm1lcikge1xyXG4gICAgICBjb25zdCBib3hzaXplID0gdGhpcy5hdHRyaWJ1dGVCb3hTaXplKGN1clBlcmZvcm1lci50eXBlKTtcclxuICAgICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wYXJ0aWNpcGFudFNlbGVjdGlvbicpLFxyXG4gICAgICAgIHdpZHRoOiBib3hzaXplLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogYm94c2l6ZS5oZWlnaHQsXHJcbiAgICAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQZXJmb3JtZXJFZGl0Q29tcG9uZW50KTtcclxuICAgICAgdGhpcy5jb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyVHlwZSA9IGN1clBlcmZvcm1lci50eXBlO1xyXG4gICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UuZWRpdFN0YXRlID0gIHRoaXMuZWRpdFN0YXRlO1xyXG4gICAgICBzd2l0Y2ggKGN1clBlcmZvcm1lci50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3JlcG9ydGluZ0xpbmVEZWZpbml0aW9ucy8nICsgKGN1clBlcmZvcm1lciBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQpLnJlcG9ydGluZ0xpbmVEZWZJZDtcclxuICAgICAgICAgIHRoaXMuaHR0cC5nZXQodXJsKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kZWZpbml0aW9uRGVsZXRlZCcpKTtcclxuICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIdW1hblBlcmZvcm1lcigpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3RlbnRpYWxPd25lcigpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGNvbnN0IHVybE1hdHJpeCA9ICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9tYXRyaXhEZWZpbml0aW9uLycgKyAoY3VyUGVyZm9ybWVyIGFzIE1hdHJpeFBhcnRpY2lwYW50KS5tYXRyaXhEZWZJZDtcclxuICAgICAgICAgIHRoaXMuaHR0cC5nZXQodXJsTWF0cml4KS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5tYXRyaXhEZWxldGVkJykpO1xyXG4gICAgICAgICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUh1bWFuUGVyZm9ybWVyKCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoY3VyUGVyZm9ybWVyLnR5cGUgIT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyAmJlxyXG4gICAgICAgIGN1clBlcmZvcm1lci50eXBlICE9PSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJykgeyAvLyDmsYfmiqXlhbPns7vlkoznn6npmLXljZXni6zlpITnkIZcclxuICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbW92ZVBlcmZvcm1lcih0eXBlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGlmICh0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgocCA9PiBwLmlkID09PSB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UGFydGljaXBhbnRJbmZvJykpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgaWYgKHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChwID0+IHAuaWQgPT09IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQYXJ0aWNpcGFudEluZm8nKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyUGVyZm9ybWVyKHR5cGU6IHN0cmluZykge1xyXG4gICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QgPSBuZXcgQXJyYXkoKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgaWYgKHRoaXMucG90ZW50aWFsT3duZXJHcmlkKSB7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdmVVcCh0eXBlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubm9Sb3dTZWxlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGVyZm9ybWVyID0gc2VsZWN0ZWRSb3cuZGF0YTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChjID0+IGMuaWQgPT09IHBlcmZvcm1lci5pZCk7XHJcbiAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldLm9yZGVyID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaSAtIDFdLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpLTFdLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgIHRoaXMuc3dhcEFycmF5KHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LCBpLCBpIC0gMSk7XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0Um93KHBlcmZvcm1lci5pZCwgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgY29uc3Qgc2VsZWN0ZWRSb3cgPSB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdztcclxuICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5ub1Jvd1NlbGVjdGVkJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwZXJmb3JtZXIgPSBzZWxlY3RlZFJvdy5kYXRhO1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gcGVyZm9ybWVyLmlkKTtcclxuICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0ub3JkZXIgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpIC0gMV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ktMV0ub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5zd2FwQXJyYXkodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QsIGksIGkgLSAxKTtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RSb3cocGVyZm9ybWVyLmlkLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBtb3ZlRG93bih0eXBlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubm9Sb3dTZWxlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGVyZm9ybWVyID0gc2VsZWN0ZWRSb3cuZGF0YTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChjID0+IGMuaWQgPT09IHBlcmZvcm1lci5pZCk7XHJcbiAgICAgIGlmIChpID09PSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGgtMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXS5vcmRlciA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2kgKyAxXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaSsxXS5vcmRlciA9IGluZGV4O1xyXG4gICAgICB0aGlzLnN3YXBBcnJheSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCwgaSwgaSArIDEpO1xyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdFJvdyhwZXJmb3JtZXIuaWQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubm9Sb3dTZWxlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGVyZm9ybWVyID0gc2VsZWN0ZWRSb3cuZGF0YTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChjID0+IGMuaWQgPT09IHBlcmZvcm1lci5pZCk7XHJcbiAgICAgIGlmIChpID09PSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGgtMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXS5vcmRlciA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2kgKyAxXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaSsxXS5vcmRlciA9IGluZGV4O1xyXG4gICAgICB0aGlzLnN3YXBBcnJheSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCwgaSwgaSArIDEpO1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdFJvdyhwZXJmb3JtZXIuaWQsIHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzd2FwQXJyYXkoYXJyOiBBcnJheTxhbnk+LCBpMTogbnVtYmVyLCBpMjogbnVtYmVyKTogQXJyYXk8YW55PiB7XHJcbiAgICBhcnJbaTFdID0gYXJyLnNwbGljZShpMiwgMSwgYXJyW2kxXSlbMF07XHJcbiAgICByZXR1cm4gYXJyO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlSHVtYW5QZXJmb3JtZXIoKSB7XHJcbiAgICBpZiAodGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5zcGxpY2UoaSwgMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0RGVmYXVsdEhhbmRsZXInKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVQb3RlbnRpYWxPd25lcigpIHtcclxuICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnNwbGljZShpLCAxKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3Rwb3RlbnRpYWx0SGFuZGxlcicpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VXNlclBlcmZvcm1lckRlc2NyaXB0aW9uKHVzZXJQZXJmb3JtZXI6IFVzZXJQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBpZiAodXNlclBlcmZvcm1lci50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gdXNlclBlcmZvcm1lci5wZXJmb3JtZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh1c2VyUGVyZm9ybWVyLm9yZ05hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm9yZycpICsgdXNlclBlcmZvcm1lci5vcmdOYW1lO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWYXJpYWJsZVBlcmZvcm1lckRlc2NyaXB0aW9uKHZhcmlhYmxlUGVyZm9ybWVyOiBWYXJpYWJsZVBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGlmICh2YXJpYWJsZVBlcmZvcm1lci50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gdmFyaWFibGVQZXJmb3JtZXIudmFyVmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFBvc2l0aW9uUGVyZm9ybWVyRGVzY3JpcHRpb24ocG9zaXRpb246IFBvc2l0aW9uUGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjZW5lID09PSAnaW5TdWl0ZScpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAocG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgaWYgKHBvc2l0aW9uLm9yZ0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wb3NpdGlvblR5cGUxJykgKyBwb3NpdGlvbi5vcmdJZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBvc2l0aW9uVHlwZTInKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbi5wb3NpdGlvblR5cGUgPT09ICcwJykge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBvc2l0aW9uVHlwZTMnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q29tcG9uZW50UGVyZm9ybWVyRGVzY3JpcHRpb24ocG9zaXRpb246IENvbXBvbmVudFBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGxldCBkZXMgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29tcCcpICsgcG9zaXRpb24ubmFtZVxyXG4gICAgKyB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucGFyYW1ldGVycycpO1xyXG4gICAgaWYgKHBvc2l0aW9uLmFjdHVhbFBhcmFtZXRlcnMgJiYgcG9zaXRpb24uYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHBvc2l0aW9uLmFjdHVhbFBhcmFtZXRlcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICBkZXMgKz0gYCR7cC5jb2Rlfe+8miR7cC52YWx1ZX3vvIxgO1xyXG4gICAgICB9KTtcclxuICAgICAgZGVzID0gZGVzLnN1YnN0cmluZygwLCBkZXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcbiAgICBkZXMgKz0gJ30nO1xyXG4gICAgcmV0dXJuIGRlcztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UmVwb3J0aW5nTGluZVBlcmZvcm1lckRlc2NyaXB0aW9uKHJlcG9ydGluZ0xpbmU6IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCkge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVmZXJlbmNlUGVyc29uJykgKyByZXBvcnRpbmdMaW5lLnJlZlVzZXJJZDtcclxuICAgIH1cclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZmVyZW5jZVBlcnNvbicpICsgcmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmT3JnSWQpIHtcclxuICAgICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmVXNlcklkKSB7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYO+8jGA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCkge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGDvvIxgO1xyXG4gICAgICB9XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5yZWZlcmVuY2VPcmdhbml6YXRpb24nKSArIHJlcG9ydGluZ0xpbmUucmVmT3JnSWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE1hdHJpeFBlcmZvcm1lckRlc2NyaXB0aW9uKG1hdHJpeDogTWF0cml4UGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZiAobWF0cml4LmNvbmRpdGlvbkZpZWxkMSkge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29uZGl0aW9uMScpICsgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDEgKyBg77yMYDtcclxuICAgIH1cclxuICAgIGlmIChtYXRyaXguY29uZGl0aW9uRmllbGQyKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jb25kaXRpb24yJykgKyBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MiArIGDvvIxgO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hdHJpeC5jb25kaXRpb25GaWVsZDMpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNvbmRpdGlvbjMnKSArIG1hdHJpeC5jb25kaXRpb25GaWVsZFRleHQzICsgYO+8jGA7XHJcbiAgICB9XHJcbiAgICBpZiAobWF0cml4LmRhdGFGaWVsZEFsaWFzKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhJykgKyBtYXRyaXguZGF0YUZpZWxkQWxpYXMgKyBg77yMYDtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXNjcmlwdGlvbi5zbGljZSgwLCBkZXNjcmlwdGlvbi5sZW5ndGggLSAxKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZWRpdENvbmRpdG9uKGU6IGFueSkge1xyXG4gICAgLy8gdGhpcy5leHByLmNsZWFyQ29udGV4dCgpO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzICYmIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBjb250ZXh0ID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYWRkQ29udGV4dChjb250ZXh0KTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hY3Rpdml0eUNvbXBvbmVudENvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRDb250ZXh0KHYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQoZS5pbnN0YW5jZS52YWx1ZSk7XHJcbiAgICB0aGlzLmV4cHIuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkNvbmRpdGlvbmFsKTsgLy8g6buY6K6k5omT5byA566A5piT6KGo6L6+5byP57yW6L6R5ZmoXHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoY29uZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmKHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkICYmIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93ICYmIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmQoaCA9PiBoLmlkID09PSB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0ZW1wLmNvbmRpdGlvbiA9IGNvbmQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wb3RlbnRpYWxPd25lckdyaWQgJiYgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cgJiYgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YSkge1xyXG4gICAgICAgIGxldCB0ZW1wID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZChoID0+IGguaWQgPT09IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRlbXAuY29uZGl0aW9uID0gY29uZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShjb25kKTtcclxuICAgICAgZS5pbnN0YW5jZS5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgIC8v54K55Ye756Gu5a6a5ZCO77yM5Y676Zmk6KGo6L6+5byP6YeM6Z2i55qE5paw5aKe55qE5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcyA9IHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoeCA9PiAhY29udGV4dC5zb21lKHkgPT4geS5rZXkgPT09IHgua2V5KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBodW1hblBlcmZvcm1lckNvcHlUb1BvdGVudGlhbE93bmVyKCkge1xyXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0ICYmIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCkge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0ID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZCkge1xyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwb3RlbnRpYWxPd25lckNvcHlUb0h1bWFuUGVyZm9ybWVyKCkge1xyXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0ICYmIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCkge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGVyZm9ybWVycyA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihwID0+IHAudHlwZSAhPT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICBpZiAocGVyZm9ybWVycyAmJiBwZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyDmraTlpITnm7TmjqVwdXNo5Lya5a+86Ie0b3JkZXLph43lpI0s6ZyA6KaB6YeN5paw5o6S5bqPXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QucHVzaCguLi5wZXJmb3JtZXJzKTtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5mb3JFYWNoKChodW1hbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgIGh1bWFuLm9yZGVyID0gaW5kZXggKyAxO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmlsdGVyKHAgPT4gcC50eXBlID09PSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZCkge1xyXG4gICAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBHZXRPcmdhbml6YXRpb25UeXBlKCkge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hdXRoZmllbGRzL2dsb2JhbGF1dGhmaWVsZHMnO1xyXG4gICAgdGhpcy5odHRwLmdldCh1cmwpXHJcbiAgICAgIC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4gdGhpcy5kZXNpZ25lclVJU3RhdGUub3JnVHlwZUNvbGxlY3Rpb24gPSBkYXRhLm1hcChkID0+ICh7IHZhbHVlOiBkLmlkLCB0ZXh0OiBkLm5hbWUgfSkpKTtcclxuICB9XHJcblxyXG4gIC8vIOaehOmAoOS4jeWQjOWPguS4juiAhemAieaLqeeVjOmdoueahOWwuuWvuCAyMDIzLTctNVxyXG4gIHByaXZhdGUgYXR0cmlidXRlQm94U2l6ZShib3hUeXBlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGJveHNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiA3NjAsXHJcbiAgICAgIGhlaWdodDogNTEyXHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGJveFR5cGUpIHtcclxuICAgICAgY2FzZSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA0NTU7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7XHJcbiAgICAgIGNhc2UgJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSAzMjA7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7XHJcbiAgICAgIGNhc2UgJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gNDIwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplOztcclxuICAgICAgY2FzZSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgYm94c2l6ZS53aWR0aCA9IDc2MDtcclxuICAgICAgICBib3hzaXplLmhlaWdodCA9IDUxMjtcclxuICAgICAgICByZXR1cm4gYm94c2l6ZTs7XHJcbiAgICAgIGNhc2UgJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgYm94c2l6ZS53aWR0aCA9IDc4MDtcclxuICAgICAgICBib3hzaXplLmhlaWdodCA9IDQyMDtcclxuICAgICAgICByZXR1cm4gYm94c2l6ZTs7XHJcbiAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgYm94c2l6ZS53aWR0aCA9IDc2MDtcclxuICAgICAgICBib3hzaXplLmhlaWdodCA9IDUxMjtcclxuICAgICAgICByZXR1cm4gYm94c2l6ZTs7XHJcbiAgICAgIGNhc2UgJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSAzMjA7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSAzNjA7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnRpY2lwYW50Q29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBQYXJ0aWNpcGFudEluZm8pOiBzdHJpbmcge1xyXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5odW1hblBlcmZvcm1lckxpc3QgJiYgZGF0YS5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5wYXJ0aWNpcGFudC5zZXRcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLnBvdGVudGlhbE93bmVyTGlzdCAmJiBkYXRhLnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY29tcG9uZW50LnBhcnRpY2lwYW50LnNldFwiKTtcclxuICAgIH1cclxuICAgIGlmIChkYXRhICYmIGRhdGEuaXNBbGxTY29wZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5wYXJ0aWNpcGFudC5zZXRcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5wYXJ0aWNpcGFudC5ub3RTZXRcIik7XHJcbiAgfVxyXG59XHJcbiJdfQ==