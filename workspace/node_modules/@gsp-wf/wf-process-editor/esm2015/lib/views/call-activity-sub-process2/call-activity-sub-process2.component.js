/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Input, Output, EventEmitter, ViewChild, TemplateRef, ComponentFactoryResolver, Injector, Optional, ChangeDetectorRef, Inject, LOCALE_ID } from '@angular/core';
import { CallActivitySubProcess } from '../call-activity-sub-process/call-activity-sub-process.entity';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { HttpService } from '@ecp-caf/caf-common';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ExpressionService, InjectedType } from '@gsp-svc/expression';
import { FarrisRadioGroupComponent } from '@farris/ui-forms';
import { ProcessListHelpComponent } from '../../views/aif-process-list-help/components/process-list-help/process-list-help.component';
import { NotifyService } from '@farris/ui-notify';
import { BsModalService } from '@farris/ui-modal';
import { SubProcessType } from '../call-activity-sub-process/SubProcessType';
import { BillSourceType } from '../call-activity-sub-process/BillSourceType';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
export class CallActivitySubProcess2Component {
    /**
     * @param {?} notify
     * @param {?} modalService
     * @param {?} message
     * @param {?} util
     * @param {?} http
     * @param {?} designerState
     * @param {?} expr
     * @param {?} cfr
     * @param {?} inj
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(notify, modalService, message, util, http, designerState, expr, cfr, inj, cdr, localeId, resources, localePipe) {
        this.notify = notify;
        this.modalService = modalService;
        this.message = message;
        this.util = util;
        this.http = http;
        this.designerState = designerState;
        this.expr = expr;
        this.cfr = cfr;
        this.inj = inj;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.editorParams = {};
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.modalConfig = {
            title: this.localePipe.transform('component.subProcess.subProcessSet'),
            width: 600,
            height: 342,
            showButtons: true
        };
        this.callActivitySubProcess = new CallActivitySubProcess();
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.subProcessType = SubProcessType;
        this.billSourceType = BillSourceType;
        this.radioGroupProcessTypeData = [
            { value: "Specified", name: this.localePipe.transform('component.subProcess.specified') },
            { value: "Dynamic", name: this.localePipe.transform('component.subProcess.dynamic') },
        ];
        this.radioGroupBillSourceData = [
            { value: BillSourceType.InheritParent, name: this.localePipe.transform('component.subProcess.inheritParent') },
            { value: BillSourceType.AutoCreation, name: this.localePipe.transform('component.subProcess.autoCreation') },
            { value: BillSourceType.VariablesExpression, name: this.localePipe.transform('component.subProcess.variablesExpression') },
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        if (v) {
            this.callActivitySubProcess = v;
            // 为子流程类型赋值
            if (this.callActivitySubProcess.calledElement == null || this.callActivitySubProcess.calledElement == "") {
                if (this.callActivitySubProcess.calledBizDefKey == null || this.callActivitySubProcess.calledBizDefKey == "") {
                    this.callActivitySubProcess.subProcessType = SubProcessType.Specified;
                }
                else {
                    this.callActivitySubProcess.subProcessType = SubProcessType.Dynamic;
                }
            }
            else {
                this.callActivitySubProcess.subProcessType = SubProcessType.Specified;
            }
            // 为单据来源类型赋值
            if (this.callActivitySubProcess.inheritBizDataId === true) {
                this.callActivitySubProcess.billSourceType = BillSourceType.InheritParent;
            }
            else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === false) {
                this.callActivitySubProcess.billSourceType = BillSourceType.VariablesExpression;
            }
            else if (this.callActivitySubProcess.inheritBizDataId === false && this.callActivitySubProcess.useAutoCreationData === true) {
                this.callActivitySubProcess.billSourceType = BillSourceType.AutoCreation;
            }
            this.getProcessDefKey(this.callActivitySubProcess.calledElement);
            this.getFlowForm(this.callActivitySubProcess.calledBizDefKey);
            this.getAifProcessName(this.callActivitySubProcess.aifProcessCode);
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    clickOK() {
        if (this.validator()) {
            /** @type {?} */
            const object = { value: this.callActivitySubProcess, parameters: null };
            this.submitModal.emit(object);
        }
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} args
     * @return {?}
     */
    processConfirm(args) {
        if (args) {
            this.callActivitySubProcess.calledElement = args.procDefKey;
            this.callActivitySubProcess.calledElementName = args.name;
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    processTypeChange(val) {
        console.log(val);
        if (val == SubProcessType.Specified) {
            this.callActivitySubProcess.calledBizDefKey = null;
            this.callActivitySubProcess.calledBizDefName = null;
        }
        else if (val == SubProcessType.Dynamic) {
            this.callActivitySubProcess.calledElement = null;
            this.callActivitySubProcess.calledElementName = null;
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    billSourceChange(val) {
        console.log(val);
        if (val == BillSourceType.InheritParent) {
            this.callActivitySubProcess.inheritBizDataId = true;
            this.callActivitySubProcess.useAutoCreationData = false;
        }
        else if (val == BillSourceType.AutoCreation) {
            this.callActivitySubProcess.inheritBizDataId = false;
            this.callActivitySubProcess.useAutoCreationData = true;
        }
        else if (val == BillSourceType.VariablesExpression) {
            this.callActivitySubProcess.inheritBizDataId = false;
            this.callActivitySubProcess.useAutoCreationData = false;
        }
    }
    /**
     * @return {?}
     */
    selectProcess() {
        this.openProcHelp().subscribe((/**
         * @param {?} rte
         * @return {?}
         */
        (rte) => {
            if (rte == null) {
                this.notify.warning(this.localePipe.transform('component.subProcess.rteNull'));
                return;
            }
            this.callActivitySubProcess.aifProcessCode = rte.code;
            this.callActivitySubProcess.aifProcessName = rte.name;
        }));
    }
    /**
     * @return {?}
     */
    clearProcess() {
        this.callActivitySubProcess.aifProcessCode = null;
        this.callActivitySubProcess.aifProcessName = null;
    }
    /**
     * @return {?}
     */
    openProcHelp() {
        /** @type {?} */
        const cmpF = this.cfr.resolveComponentFactory(ProcessListHelpComponent);
        /** @type {?} */
        const cmpR = cmpF.create(this.inj, []);
        cmpR.instance.editorParams = this.editorParams;
        /** @type {?} */
        const modalRef = this.modalService.show(cmpR, {
            title: this.localePipe.transform('component.subProcess.orderProcess'),
            width: 1250,
            height: 500,
            resizable: true,
            buttons: [
                {
                    text: this.localePipe.transform('component.subProcess.clickOk'),
                    cls: "btn btn-primary",
                    handle: (/**
                     * @param {?} evt
                     * @return {?}
                     */
                    (evt) => {
                        cmpR.instance.clickOk(evt);
                        modalRef.close();
                    })
                },
                {
                    text: this.localePipe.transform('component.subProcess.clickCancel'),
                    cls: "btn btn-secondary",
                    handle: (/**
                     * @param {?} evt
                     * @return {?}
                     */
                    (evt) => {
                        cmpR.instance.clickCancel(evt);
                        modalRef.close();
                    })
                }
            ],
            closed: (/**
             * @return {?}
             */
            () => {
                modalRef.dialog.destroy();
            })
        });
        cmpR.instance.modalRef = modalRef;
        return cmpR.instance.procEmitter.asObservable();
    }
    /**
     * @param {?} args
     * @return {?}
     */
    clearProcessDef(args) {
        this.callActivitySubProcess.calledElement = '';
        this.callActivitySubProcess.calledElementName = '';
    }
    /**
     * @param {?} args
     * @return {?}
     */
    flowFormConfirm(args) {
        if (args) {
            this.callActivitySubProcess.calledBizDefKey = args.id;
            this.callActivitySubProcess.calledBizDefName = args.name;
        }
    }
    /**
     * @param {?} args
     * @return {?}
     */
    clearFlowForm(args) {
        this.callActivitySubProcess.calledBizDefKey = '';
        this.callActivitySubProcess.calledBizDefName = '';
    }
    /**
     * @return {?}
     */
    setBizDataId() {
        this.showExprHelp();
    }
    /**
     * @private
     * @return {?}
     */
    showExprHelp() {
        /** @type {?} */
        let context = new Array();
        // if(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage')) {
        //   context.push(this.expr.exprEntity.contextEntities.find(x => x.key === 'CurrentLanguage'));
        // }
        // this.expr.clearContext();
        if (this.designerState.schemas.length > 0) {
            for (const schema of this.designerState.schemas) {
                this.expr.addSchema('Schema', schema);
            }
            if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                const entityType = this.designerState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        context = this.designerState.addContext(context);
        if (this.designerState.subActivityContext.length > 0) {
            for (const variable of this.designerState.subActivityContext) {
                context.push(variable);
                // this.expr.addContext(variable);
            }
        }
        if (context.length > 0) {
            for (const v of context) {
                this.expr.addContext(v);
            }
        }
        this.expr.addExpressionText(this.callActivitySubProcess.bizDataId);
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        (expressioninfo) => {
            this.callActivitySubProcess.bizDataId = expressioninfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.expr.exprEntity.contextEntities = this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * @param {?} bool
     * @return {?}
     */
    valueChange(bool) {
        if (bool) {
            this.callActivitySubProcess.bizDataId = null;
        }
    }
    /**
     * @private
     * @return {?}
     */
    validator() {
        if (!this.callActivitySubProcess.inheritBizDataId && !this.callActivitySubProcess.useAutoCreationData && !this.callActivitySubProcess.bizDataId) {
            this.message.warning(this.localePipe.transform('component.subProcess.inheritBizDataId'));
            return false;
        }
        return true;
    }
    /**
     * @private
     * @param {?} key
     * @return {?}
     */
    getProcessDefKey(key) {
        /** @type {?} */
        let url = this.util.getProcessDefinitionWebApi();
        if (key) {
            url += `/procDefKey/${key}`;
            this.http.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                this.callActivitySubProcess.calledElementName = re.name;
            }));
        }
    }
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    getFlowForm(id) {
        /** @type {?} */
        let url = this.util.getFlowFormWebApi();
        if (id) {
            url += `/${id}`;
            this.http.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                this.callActivitySubProcess.calledBizDefName = re.name;
            }));
        }
    }
    /**
     * @param {?} code
     * @return {?}
     */
    getAifProcessName(code) {
        if (code != null && code != "") {
            this.http.request("GET", `/api/runtime/aif/v1.0/rtbillcreationprocess/getname/${code}`, { responseType: 'text' }).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            (res) => {
                this.callActivitySubProcess.aifProcessName = res;
            }), (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                if (err.error && typeof err.error == "string") {
                    err.error = JSON.parse(err.error);
                }
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    //todo 确定异常结构, 目前采用兼容取值方式
                    this.message.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }), 300);
                throw err;
            }));
        }
    }
}
CallActivitySubProcess2Component.decorators = [
    { type: Component, args: [{
                selector: 'lib-call-activity-sub-process2',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section my-2 mx-3 h-100\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n    <section>\r\n      <div class=\"f-utils-fill-flex-column h-100\" style=\"margin-top: 15px;\">\r\n        <div class=\"h-100\">\r\n          <div class=\"farris-form form-inline farris-form-inline\">\r\n            <div class=\"farris-group-wrap mt-1\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.radioGroupProcessType' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <farris-radiogroup #radioGroupProcessType\r\n                    [(ngModel)]=\"callActivitySubProcess&&callActivitySubProcess.subProcessType\" [horizontal]=\"false\"\r\n                    [data]=\"radioGroupProcessTypeData\" (changeValue)=\"processTypeChange($event)\">\r\n                  </farris-radiogroup>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"farris-group-wrap mt-1\" *ngIf=\"callActivitySubProcess.subProcessType==subProcessType.Dynamic\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.flowForm' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <wf-bizprocess-lookup title=\"{{'component.subProcess.flowForm' | wfLocale}}\" [sourceType]=\"'flowform'\"\r\n                    [displayTxt]=\"callActivitySubProcess.calledBizDefName\" (afterConfirm)=\"flowFormConfirm($event)\"\r\n                    (clear)=\"clearFlowForm($event)\">\r\n                  </wf-bizprocess-lookup>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"farris-group-wrap mt-1\" *ngIf=\"callActivitySubProcess.subProcessType==subProcessType.Specified\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.processDef' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <wf-bizprocess-lookup title=\"{{'component.subProcess.processDef' | wfLocale}}\" [displayTxt]=\"callActivitySubProcess.calledElementName\"\r\n                    (afterConfirm)=\"processConfirm($event)\" (clear)=\"clearProcessDef($event)\">\r\n                  </wf-bizprocess-lookup>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <section class=\"\">\r\n      <div class=\"f-utils-fill-flex-column h-100\">\r\n        <div class=\"h-100\">\r\n          <div class=\"farris-form form-inline farris-form-inline\">\r\n\r\n            <div class=\"farris-group-wrap mt-1\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.radioGroupBillSource' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <farris-radiogroup #radioGroupBillSource\r\n                    [(ngModel)]=\"callActivitySubProcess&&callActivitySubProcess.billSourceType\" [horizontal]=\"false\"\r\n                    [data]=\"radioGroupBillSourceData\" (changeValue)=\"billSourceChange($event)\">\r\n                  </farris-radiogroup>\r\n                </div>\r\n                <div class=\"farris-feedback valid-feedback\"></div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"farris-group-wrap mt-1\"\r\n              *ngIf=\"callActivitySubProcess.billSourceType==billSourceType.AutoCreation\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.autoCreationProcess' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <input-group [ngModel]=\"callActivitySubProcess&&callActivitySubProcess.aifProcessName\"\r\n                    [editable]=\"false\" (clickHandle)=\"selectProcess()\" [groupText]=\"groupIcon\" (clear)=\"clearProcess()\">\r\n                  </input-group>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"farris-group-wrap mt-1\"\r\n              *ngIf=\"callActivitySubProcess.billSourceType==billSourceType.VariablesExpression\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.subProcess.bizDataId' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <input-group [ngModel]=\"callActivitySubProcess.bizDataId\" [enableClear]=\"false\"\r\n                    [ngModel]=\"callActivitySubProcess.bizDataId\" name=\"bizDataId\" [editable]=\"false\"\r\n                    (clickHandle)=\"setBizDataId()\" [groupText]=\"groupIcon\">\r\n                  </input-group>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"clickCancel()\">{{'component.subProcess.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">{{'component.subProcess.clickOk' | wfLocale}}</button>\r\n</ng-template>\r\n",
                providers: [
                    WfLocalePipe,
                ]
            }] }
];
/** @nocollapse */
CallActivitySubProcess2Component.ctorParameters = () => [
    { type: NotifyService },
    { type: BsModalService },
    { type: MessagerService },
    { type: ProcessDeUtil },
    { type: HttpService },
    { type: ProcessDesignerUIState },
    { type: ExpressionService },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
CallActivitySubProcess2Component.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    editorParams: [{ type: Input }],
    value: [{ type: Input }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    radioGroupProcessType: [{ type: ViewChild, args: ["radioGroupProcessType",] }],
    radioGroupBillSource: [{ type: ViewChild, args: ["radioGroupBillSource",] }]
};
if (false) {
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.cls;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.editorParams;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.closeModal;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.submitModal;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.modalFooter;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.modalConfig;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.callActivitySubProcess;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.groupIcon;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.subProcessType;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.billSourceType;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.radioGroupProcessType;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.radioGroupProcessTypeData;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.radioGroupBillSource;
    /** @type {?} */
    CallActivitySubProcess2Component.prototype.radioGroupBillSourceData;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.message;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.util;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.http;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.designerState;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.inj;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Component.prototype.localePipe;
}
export class CallActivitySubProcess2Converter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data && (data.calledBizDefKey || data.calledElement)) {
            return this.localePipe.transform("component.subProcess.set");
        }
        return this.localePipe.transform("component.subProcess.notSet");
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    CallActivitySubProcess2Converter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsbC1hY3Rpdml0eS1zdWItcHJvY2VzczIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9jYWxsLWFjdGl2aXR5LXN1Yi1wcm9jZXNzMi9jYWxsLWFjdGl2aXR5LXN1Yi1wcm9jZXNzMi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXhNLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLCtEQUErRCxDQUFDO0FBQ3ZHLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDN0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRWxELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQWEsTUFBTSxxQkFBcUIsQ0FBQztBQUVqRixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU3RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSw0RkFBNEYsQ0FBQztBQUN0SSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUM3RSxPQUFPLEVBQUUs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QzVCLFNBQVMsU0FBQyx1QkFBdUI7bUNBT2pDLFNBQVMsU0FBQyxzQkFBc0I7Ozs7SUE5RWpDLCtDQUNxQzs7SUFFckMsd0RBRU87O0lBNEJQLHNEQUErQzs7SUFDL0MsdURBQWdEOztJQUVoRCx1REFBNkQ7O0lBQzdELHVEQUtFOztJQUVGLGtFQUE4RTs7SUFFOUUscURBQW1EOztJQUVuRCwwREFBeUM7O0lBQ3pDLDBEQUF5Qzs7SUFzQnpDLGlFQUNpRDs7SUFDakQscUVBR0U7O0lBRUYsZ0VBQ2dEOztJQUNoRCxvRUFJRTs7Ozs7SUFHQSxrREFBNkI7Ozs7O0lBQzdCLHdEQUFvQzs7Ozs7SUFDcEMsbURBQWdDOzs7OztJQUNoQyxnREFBMkI7Ozs7O0lBQzNCLGdEQUF5Qjs7Ozs7SUFDekIseURBQTZDOzs7OztJQUM3QyxnREFBK0I7Ozs7O0lBQy9CLCtDQUFxQzs7Ozs7SUFDckMsK0NBQXFCOzs7OztJQUNyQiwrQ0FBMEM7Ozs7O0lBQzFDLG9EQUEyQzs7Ozs7SUFDM0MscURBQWlEOzs7OztJQUNqRCxzREFBNEM7O0FBME5oRCxNQUFNLE9BQU8sZ0NBQWdDOzs7O0lBQzNDLFlBQ1UsVUFBd0I7UUFBeEIsZUFBVSxHQUFWLFVBQVUsQ0FBYztJQUM5QixDQUFDOzs7OztJQUVMLFNBQVMsQ0FBQyxJQUFTO1FBQ2pCLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDeEQsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1NBQzlEO1FBQ0QsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7Q0FDRjs7Ozs7O0lBVEcsc0RBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEhvc3RCaW5kaW5nLCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3IsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBMT0NBTEVfSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgQ2FsbEFjdGl2aXR5U3ViUHJvY2VzcyB9IGZyb20gJy4uL2NhbGwtYWN0aXZpdHktc3ViLXByb2Nlc3MvY2FsbC1hY3Rpdml0eS1zdWItcHJvY2Vzcy5lbnRpdHknO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBIdHRwU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSwgVmFyRW50aXR5IH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IENvbWJvTGlzdENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktY29tYm8tbGlzdCc7XHJcbmltcG9ydCB7IEZhcnJpc1JhZGlvR3JvdXBDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWZvcm1zJztcclxuaW1wb3J0IHsgSVJ0U2hvd0VudGl0eSB9IGZyb20gJy4uLy4uL3ZpZXdzL2FpZi1wcm9jZXNzLWxpc3QtaGVscC9lbnRpdHkvSVJ0U2hvd0VudGl0eSc7XHJcbmltcG9ydCB7IFByb2Nlc3NMaXN0SGVscENvbXBvbmVudCB9IGZyb20gJy4uLy4uL3ZpZXdzL2FpZi1wcm9jZXNzLWxpc3QtaGVscC9jb21wb25lbnRzL3Byb2Nlc3MtbGlzdC1oZWxwL3Byb2Nlc3MtbGlzdC1oZWxwLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IFN1YlByb2Nlc3NUeXBlIH0gZnJvbSAnLi4vY2FsbC1hY3Rpdml0eS1zdWItcHJvY2Vzcy9TdWJQcm9jZXNzVHlwZSc7XHJcbmltcG9ydCB7IEJpbGxTb3VyY2VUeXBlIH0gZnJvbSAnLi4vY2FsbC1hY3Rpdml0eS1zdWItcHJvY2Vzcy9CaWxsU291cmNlVHlwZSc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uLy4uL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItY2FsbC1hY3Rpdml0eS1zdWItcHJvY2VzczInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9jYWxsLWFjdGl2aXR5LXN1Yi1wcm9jZXNzMi5jb21wb25lbnQuaHRtbCcsXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGxBY3Rpdml0eVN1YlByb2Nlc3MyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcblxyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczoge1xyXG4gICAgYml6VHlwZUlkPzogc3RyaW5nXHJcbiAgfSA9IHt9O1xyXG5cclxuICBASW5wdXQoKSBzZXQgdmFsdWUodjogQ2FsbEFjdGl2aXR5U3ViUHJvY2Vzcykge1xyXG4gICAgaWYgKHYpIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzID0gdjtcclxuICAgICAgLy8g5Li65a2Q5rWB56iL57G75Z6L6LWL5YC8XHJcbiAgICAgIGlmICh0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuY2FsbGVkRWxlbWVudCA9PSBudWxsIHx8IHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRFbGVtZW50ID09IFwiXCIpIHtcclxuICAgICAgICBpZiAodGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZktleSA9PSBudWxsIHx8IHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRCaXpEZWZLZXkgPT0gXCJcIikge1xyXG4gICAgICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLnN1YlByb2Nlc3NUeXBlID0gU3ViUHJvY2Vzc1R5cGUuU3BlY2lmaWVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3Muc3ViUHJvY2Vzc1R5cGUgPSBTdWJQcm9jZXNzVHlwZS5EeW5hbWljO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3Muc3ViUHJvY2Vzc1R5cGUgPSBTdWJQcm9jZXNzVHlwZS5TcGVjaWZpZWQ7XHJcbiAgICAgIH1cclxuICAgICAgLy8g5Li65Y2V5o2u5p2l5rqQ57G75Z6L6LWL5YC8XHJcbiAgICAgIGlmICh0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuaW5oZXJpdEJpekRhdGFJZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5iaWxsU291cmNlVHlwZSA9IEJpbGxTb3VyY2VUeXBlLkluaGVyaXRQYXJlbnQ7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmluaGVyaXRCaXpEYXRhSWQgPT09IGZhbHNlICYmIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy51c2VBdXRvQ3JlYXRpb25EYXRhID09PSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5iaWxsU291cmNlVHlwZSA9IEJpbGxTb3VyY2VUeXBlLlZhcmlhYmxlc0V4cHJlc3Npb247XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmluaGVyaXRCaXpEYXRhSWQgPT09IGZhbHNlICYmIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy51c2VBdXRvQ3JlYXRpb25EYXRhID09PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmJpbGxTb3VyY2VUeXBlID0gQmlsbFNvdXJjZVR5cGUuQXV0b0NyZWF0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ2V0UHJvY2Vzc0RlZktleSh0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuY2FsbGVkRWxlbWVudCk7XHJcbiAgICAgIHRoaXMuZ2V0Rmxvd0Zvcm0odGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZktleSk7XHJcbiAgICAgIHRoaXMuZ2V0QWlmUHJvY2Vzc05hbWUodGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmFpZlByb2Nlc3NDb2RlKTtcclxuICAgIH1cclxuICB9XHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zdWJQcm9jZXNzLnN1YlByb2Nlc3NTZXQnKSxcclxuICAgIHdpZHRoOiA2MDAsXHJcbiAgICBoZWlnaHQ6IDM0MixcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuXHJcbiAgY2FsbEFjdGl2aXR5U3ViUHJvY2VzczogQ2FsbEFjdGl2aXR5U3ViUHJvY2VzcyA9IG5ldyBDYWxsQWN0aXZpdHlTdWJQcm9jZXNzKCk7XHJcblxyXG4gIGdyb3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcblxyXG4gIHJlYWRvbmx5IHN1YlByb2Nlc3NUeXBlID0gU3ViUHJvY2Vzc1R5cGU7XHJcbiAgcmVhZG9ubHkgYmlsbFNvdXJjZVR5cGUgPSBCaWxsU291cmNlVHlwZTtcclxuICAvLyBAVmlld0NoaWxkKFwiY29tYm9Qcm9jZXNzVHlwZVwiKVxyXG4gIC8vIGNvbWJvUHJvY2Vzc1R5cGU6IENvbWJvTGlzdENvbXBvbmVudDtcclxuICAvLyBjb21ib1Byb2Nlc3NUeXBlSWRGaWVsZCA9IFwidmFsdWVcIjtcclxuICAvLyBjb21ib1Byb2Nlc3NUeXBlVmFsdWVGaWVsZCA9IFwidmFsdWVcIjtcclxuICAvLyBjb21ib1Byb2Nlc3NUeXBlVGV4dEZpZWxkID0gXCJ0ZXh0XCI7XHJcbiAgLy8gY29tYm9Qcm9jZXNzVHlwZURhdGEgPSBbXHJcbiAgLy8gICB7IHZhbHVlOiBcIlNwZWNpZmllZFwiLCB0ZXh0OiBcIuaMh+WumuWtkOa1geeoi1wiIH0sXHJcbiAgLy8gICB7IHZhbHVlOiBcIkR5bmFtaWNcIiwgdGV4dDogXCLliqjmgIHlrZDmtYHnqItcIiB9LFxyXG4gIC8vIF07XHJcblxyXG4gIC8vIEBWaWV3Q2hpbGQoXCJjb21ib0JpbGxTb3VyY2VcIilcclxuICAvLyBjb21ib0JpbGxTb3VyY2U6IENvbWJvTGlzdENvbXBvbmVudDtcclxuICAvLyBjb21ib0JpbGxTb3VyY2VJZEZpZWxkID0gXCJ2YWx1ZVwiO1xyXG4gIC8vIGNvbWJvQmlsbFNvdXJjZVZhbHVlRmllbGQgPSBcInZhbHVlXCI7XHJcbiAgLy8gY29tYm9CaWxsU291cmNlVGV4dEZpZWxkID0gXCJ0ZXh0XCI7XHJcbiAgLy8gY29tYm9CaWxsU291cmNlRGF0YSA9IFtcclxuICAvLyAgIHsgdmFsdWU6IEJpbGxTb3VyY2VUeXBlLkluaGVyaXRQYXJlbnQsIHRleHQ6ICfkuI7niLbmtYHnqIvnm7jlkIwnIH0sXHJcbiAgLy8gICB7IHZhbHVlOiBCaWxsU291cmNlVHlwZS5BdXRvQ3JlYXRpb24sIHRleHQ6ICfoh6rliqjnlJ/miJDkuIvmuLjljZXmja4nIH0sXHJcbiAgLy8gICB7IHZhbHVlOiBCaWxsU291cmNlVHlwZS5WYXJpYWJsZXNFeHByZXNzaW9uLCB0ZXh0OiAn5Y+Y6YeP6KGo6L6+5byPJyB9LFxyXG4gIC8vIF07XHJcblxyXG4gIEBWaWV3Q2hpbGQoXCJyYWRpb0dyb3VwUHJvY2Vzc1R5cGVcIilcclxuICByYWRpb0dyb3VwUHJvY2Vzc1R5cGU6IEZhcnJpc1JhZGlvR3JvdXBDb21wb25lbnQ7XHJcbiAgcmFkaW9Hcm91cFByb2Nlc3NUeXBlRGF0YSA9IFtcclxuICAgIHsgdmFsdWU6IFwiU3BlY2lmaWVkXCIsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zdWJQcm9jZXNzLnNwZWNpZmllZCcpIH0sXHJcbiAgICB7IHZhbHVlOiBcIkR5bmFtaWNcIiwgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3MuZHluYW1pYycpIH0sXHJcbiAgXTtcclxuXHJcbiAgQFZpZXdDaGlsZChcInJhZGlvR3JvdXBCaWxsU291cmNlXCIpXHJcbiAgcmFkaW9Hcm91cEJpbGxTb3VyY2U6IEZhcnJpc1JhZGlvR3JvdXBDb21wb25lbnQ7XHJcbiAgcmFkaW9Hcm91cEJpbGxTb3VyY2VEYXRhID0gW1xyXG4gICAgeyB2YWx1ZTogQmlsbFNvdXJjZVR5cGUuSW5oZXJpdFBhcmVudCwgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3MuaW5oZXJpdFBhcmVudCcpIH0sXHJcbiAgICB7IHZhbHVlOiBCaWxsU291cmNlVHlwZS5BdXRvQ3JlYXRpb24sIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zdWJQcm9jZXNzLmF1dG9DcmVhdGlvbicpIH0sXHJcbiAgICB7IHZhbHVlOiBCaWxsU291cmNlVHlwZS5WYXJpYWJsZXNFeHByZXNzaW9uLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc3ViUHJvY2Vzcy52YXJpYWJsZXNFeHByZXNzaW9uJykgfSxcclxuICBdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHV0aWw6IFByb2Nlc3NEZVV0aWwsXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBkZXNpZ25lclN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgY2ZyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwcml2YXRlIGluajogSW5qZWN0b3IsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSB0aGlzLmxvY2FsZVBpcGUgfHwgbmV3IFdmTG9jYWxlUGlwZShsb2NhbGVJZCwgcmVzb3VyY2VzKTtcclxuICAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgaWYgKHRoaXMudmFsaWRhdG9yKCkpIHtcclxuICAgICAgY29uc3Qgb2JqZWN0ID0geyB2YWx1ZTogdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLCBwYXJhbWV0ZXJzOiBudWxsIH07XHJcbiAgICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc0NvbmZpcm0oYXJnczogYW55KSB7XHJcbiAgICBpZiAoYXJncykge1xyXG4gICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuY2FsbGVkRWxlbWVudCA9IGFyZ3MucHJvY0RlZktleTtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEVsZW1lbnROYW1lID0gYXJncy5uYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc1R5cGVDaGFuZ2UodmFsKSB7XHJcbiAgICBjb25zb2xlLmxvZyh2YWwpO1xyXG4gICAgaWYgKHZhbCA9PSBTdWJQcm9jZXNzVHlwZS5TcGVjaWZpZWQpIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZktleSA9IG51bGw7XHJcbiAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRCaXpEZWZOYW1lID0gbnVsbDtcclxuICAgIH0gZWxzZSBpZiAodmFsID09IFN1YlByb2Nlc3NUeXBlLkR5bmFtaWMpIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuY2FsbGVkRWxlbWVudE5hbWUgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmlsbFNvdXJjZUNoYW5nZSh2YWwpIHtcclxuICAgIGNvbnNvbGUubG9nKHZhbCk7XHJcbiAgICBpZiAodmFsID09IEJpbGxTb3VyY2VUeXBlLkluaGVyaXRQYXJlbnQpIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmluaGVyaXRCaXpEYXRhSWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MudXNlQXV0b0NyZWF0aW9uRGF0YSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICh2YWwgPT0gQmlsbFNvdXJjZVR5cGUuQXV0b0NyZWF0aW9uKSB7XHJcbiAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5pbmhlcml0Qml6RGF0YUlkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy51c2VBdXRvQ3JlYXRpb25EYXRhID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodmFsID09IEJpbGxTb3VyY2VUeXBlLlZhcmlhYmxlc0V4cHJlc3Npb24pIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmluaGVyaXRCaXpEYXRhSWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLnVzZUF1dG9DcmVhdGlvbkRhdGEgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdFByb2Nlc3MoKSB7XHJcbiAgICB0aGlzLm9wZW5Qcm9jSGVscCgpLnN1YnNjcmliZShcclxuICAgICAgKHJ0ZTogSVJ0U2hvd0VudGl0eSkgPT4ge1xyXG4gICAgICAgIGlmIChydGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc3ViUHJvY2Vzcy5ydGVOdWxsJykpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuYWlmUHJvY2Vzc0NvZGUgPSBydGUuY29kZTtcclxuICAgICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuYWlmUHJvY2Vzc05hbWUgPSBydGUubmFtZTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNsZWFyUHJvY2VzcygpIHtcclxuICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5haWZQcm9jZXNzQ29kZSA9IG51bGw7XHJcbiAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuYWlmUHJvY2Vzc05hbWUgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgb3BlblByb2NIZWxwKCkge1xyXG4gICAgY29uc3QgY21wRiA9IHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFByb2Nlc3NMaXN0SGVscENvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjbXBSID0gY21wRi5jcmVhdGUodGhpcy5pbmosIFtdKTtcclxuICAgIGNtcFIuaW5zdGFuY2UuZWRpdG9yUGFyYW1zID0gdGhpcy5lZGl0b3JQYXJhbXM7XHJcbiAgICBjb25zdCBtb2RhbFJlZiA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY21wUiwge1xyXG4gICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3Mub3JkZXJQcm9jZXNzJyksXHJcbiAgICAgIHdpZHRoOiAxMjUwLFxyXG4gICAgICBoZWlnaHQ6IDUwMCxcclxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxyXG4gICAgICBidXR0b25zOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3MuY2xpY2tPaycpLFxyXG4gICAgICAgICAgY2xzOiBcImJ0biBidG4tcHJpbWFyeVwiLFxyXG4gICAgICAgICAgaGFuZGxlOiAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGNtcFIuaW5zdGFuY2UuY2xpY2tPayhldnQpO1xyXG4gICAgICAgICAgICBtb2RhbFJlZi5jbG9zZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3MuY2xpY2tDYW5jZWwnKSxcclxuICAgICAgICAgIGNsczogXCJidG4gYnRuLXNlY29uZGFyeVwiLFxyXG4gICAgICAgICAgaGFuZGxlOiAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGNtcFIuaW5zdGFuY2UuY2xpY2tDYW5jZWwoZXZ0KTtcclxuICAgICAgICAgICAgbW9kYWxSZWYuY2xvc2UoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIGNsb3NlZDogKCkgPT4ge1xyXG4gICAgICAgIG1vZGFsUmVmLmRpYWxvZy5kZXN0cm95KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY21wUi5pbnN0YW5jZS5tb2RhbFJlZiA9IG1vZGFsUmVmO1xyXG5cclxuICAgIHJldHVybiBjbXBSLmluc3RhbmNlLnByb2NFbWl0dGVyLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJQcm9jZXNzRGVmKGFyZ3M6IGFueSkge1xyXG4gICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEVsZW1lbnQgPSAnJztcclxuICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRFbGVtZW50TmFtZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgZmxvd0Zvcm1Db25maXJtKGFyZ3M6IGFueSkge1xyXG4gICAgaWYgKGFyZ3MpIHtcclxuICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZktleSA9IGFyZ3MuaWQ7XHJcbiAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRCaXpEZWZOYW1lID0gYXJncy5uYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbGVhckZsb3dGb3JtKGFyZ3M6IGFueSkge1xyXG4gICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZktleSA9ICcnO1xyXG4gICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEJpekRlZk5hbWUgPSAnJztcclxuICB9XHJcblxyXG4gIHNldEJpekRhdGFJZCgpIHtcclxuICAgIHRoaXMuc2hvd0V4cHJIZWxwKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNob3dFeHBySGVscCgpIHtcclxuICAgIGxldCBjb250ZXh0ID0gbmV3IEFycmF5PFZhckVudGl0eT4oKTtcclxuICAgIC8vIGlmKHRoaXMuZXhwci5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maW5kKHggPT4geC5rZXkgPT09ICdDdXJyZW50TGFuZ3VhZ2UnKSkge1xyXG4gICAgLy8gICBjb250ZXh0LnB1c2godGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbmQoeCA9PiB4LmtleSA9PT0gJ0N1cnJlbnRMYW5ndWFnZScpKTtcclxuICAgIC8vIH1cclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb250ZXh0ID0gdGhpcy5kZXNpZ25lclN0YXRlLmFkZENvbnRleHQoY29udGV4dCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgLy8gdGhpcy5leHByLmFkZENvbnRleHQodmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCh0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuYml6RGF0YUlkKTtcclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChleHByZXNzaW9uaW5mbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5iaXpEYXRhSWQgPSBleHByZXNzaW9uaW5mbztcclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YWx1ZUNoYW5nZShib29sOiBib29sZWFuKSB7XHJcbiAgICBpZiAoYm9vbCkge1xyXG4gICAgICB0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuYml6RGF0YUlkID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdmFsaWRhdG9yKCk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCF0aGlzLmNhbGxBY3Rpdml0eVN1YlByb2Nlc3MuaW5oZXJpdEJpekRhdGFJZCAmJiAhdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLnVzZUF1dG9DcmVhdGlvbkRhdGEgJiYgIXRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5iaXpEYXRhSWQpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLndhcm5pbmcodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnN1YlByb2Nlc3MuaW5oZXJpdEJpekRhdGFJZCcpKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFByb2Nlc3NEZWZLZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgIGxldCB1cmwgPSB0aGlzLnV0aWwuZ2V0UHJvY2Vzc0RlZmluaXRpb25XZWJBcGkoKTtcclxuICAgIGlmIChrZXkpIHtcclxuICAgICAgdXJsICs9IGAvcHJvY0RlZktleS8ke2tleX1gO1xyXG4gICAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmNhbGxlZEVsZW1lbnROYW1lID0gcmUubmFtZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Rmxvd0Zvcm0oaWQ6IHN0cmluZykge1xyXG4gICAgbGV0IHVybCA9IHRoaXMudXRpbC5nZXRGbG93Rm9ybVdlYkFwaSgpO1xyXG4gICAgaWYgKGlkKSB7XHJcbiAgICAgIHVybCArPSBgLyR7aWR9YDtcclxuICAgICAgdGhpcy5odHRwLmdldCh1cmwpLnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2FsbEFjdGl2aXR5U3ViUHJvY2Vzcy5jYWxsZWRCaXpEZWZOYW1lID0gcmUubmFtZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRBaWZQcm9jZXNzTmFtZShjb2RlOiBzdHJpbmcpIHtcclxuICAgIGlmIChjb2RlICE9IG51bGwgJiYgY29kZSAhPSBcIlwiKSB7XHJcbiAgICAgIHRoaXMuaHR0cC5yZXF1ZXN0KFwiR0VUXCIsIGAvYXBpL3J1bnRpbWUvYWlmL3YxLjAvcnRiaWxsY3JlYXRpb25wcm9jZXNzL2dldG5hbWUvJHtjb2RlfWAsIHsgcmVzcG9uc2VUeXBlOiAndGV4dCcgfSkuc3Vic2NyaWJlKFxyXG4gICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYWxsQWN0aXZpdHlTdWJQcm9jZXNzLmFpZlByb2Nlc3NOYW1lID0gcmVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGVycikgPT4ge1xyXG4gICAgICAgICAgaWYgKGVyci5lcnJvciAmJiB0eXBlb2YgZXJyLmVycm9yID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgZXJyLmVycm9yID0gSlNPTi5wYXJzZShlcnIuZXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vdG9kbyDnoa7lrprlvILluLjnu5PmnoQsIOebruWJjemHh+eUqOWFvOWuueWPluWAvOaWueW8j1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoZXJyLmVycm9yID09IG51bGwgPyBlcnIubWVzc2FnZSA6IChlcnIuZXJyb3IuTWVzc2FnZSB8fCBlcnIuZXJyb3IubWVzc2FnZSB8fCBlcnIubWVzc2FnZSkpO1xyXG4gICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ2FsbEFjdGl2aXR5U3ViUHJvY2VzczJDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7IH1cclxuXHJcbiAgY29udmVydFRvKGRhdGE6IGFueSk6IHN0cmluZyB7XHJcbiAgICBpZiAoZGF0YSAmJiAoZGF0YS5jYWxsZWRCaXpEZWZLZXkgfHwgZGF0YS5jYWxsZWRFbGVtZW50KSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5zdWJQcm9jZXNzLnNldFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiY29tcG9uZW50LnN1YlByb2Nlc3Mubm90U2V0XCIpO1xyXG4gIH1cclxufVxyXG4iXX0=