/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, ChangeDetectorRef, Optional, LOCALE_ID, Inject } from '@angular/core';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { MessagerService } from '@farris/ui-messager';
import { of } from 'rxjs';
import { LookupGridComponent } from '@farris/ui-lookup';
import { ResubmitEffect } from './backward-rule.entity';
import { NotifyService } from '@farris/ui-notify';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
export class BackwardRuleComponent {
    /**
     * @param {?} uiState
     * @param {?} message
     * @param {?} notify
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(uiState, message, notify, cdr, localeId, resources, localePipe) {
        this.uiState = uiState;
        this.message = message;
        this.notify = notify;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.editorParams = {};
        this.nodeType = 'UserActivity';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.modalConfig = {
            title: this.localePipe.transform('component.backwardRule.backwardRule'),
            width: 760,
            height: 505,
            showButtons: true
        };
        this.displayTestText = [];
        this.fullActs = [];
        this.listItems = [
            { Id: 'InitialActityId', Name: this.localePipe.transform('component.backwardRule.initialActityId') },
            { Id: 'PrecursorActivityId', Name: this.localePipe.transform('component.backwardRule.precursorActivityId') },
            { Id: 'Empty', Name: this.localePipe.transform('component.backwardRule.empty') }
        ];
        this.items = [];
        this.itemsTemp = [];
        this.itemsBackScope = [];
        this.itemsBackScopeTemp = [];
        this.columns = [
            { title: this.localePipe.transform('component.backwardRule.name'), field: 'Name', width: 100, searchField: 'Name' },
            { title: this.localePipe.transform('component.backwardRule.id'), field: 'Id', width: 100, searchField: 'Id' },
        ];
        this.selectAbleChecked = false;
        this.waitReturnChecked = false;
        this.resubmitEffectOptions = [
            { value: ResubmitEffect.sequence, text: this.localePipe.transform('component.backwardRule.sequence') },
            { value: ResubmitEffect.backToMe, text: this.localePipe.transform('component.backwardRule.backToMe') },
            { value: ResubmitEffect.backToCurrentNode, text: this.localePipe.transform('component.backwardRule.backToCurrentNode') },
        ];
        this.dynamicBackWardRuleAbleChecked = false;
        this.targetRef = this.listItems[0].Id;
        this.selectTargetList = new Array();
        this.popover = '1.顺序流转:按照流转线顺序进行流转; 2.返回我:完成策略为抢占：只给驳回人创建任务,完成策略为会签：驳回人与未审批人收到新任务，已审批人员自动审批通过; 3.返回本节点:实际效果受“再次进入节点时，办理人是否是节点已办人员影响”选项的影响';
        this.pageInfo = {
            pageIndex: 1,
            pageList: [10, 20, 30, 50],
            pageSize: 20
        };
        this.dictPicked = (/**
         * @param {?} arg
         * @return {?}
         */
        (arg) => {
            this.targetRef = arg.Id;
            this.displayText = arg.Name;
            if (arg.Id === 'Empty' && !this.selectAbleChecked) {
                this.selectAbleChecked = true;
                this.notify.info(this.localePipe.transform('component.backwardRule.dictPicked'));
            }
            return of({ closeDialog: true });
        });
        this.dictPickedTest = (/**
         * @param {?} arg
         * @return {?}
         */
        (arg) => {
            this.fullActs = arg;
            return of({ closeDialog: true });
        });
        this.beforeOpen = (/**
         * @return {?}
         */
        () => {
            this.items = this.deepCloneBackDefine(this.itemsTemp);
            return of(true);
        });
        this.beforeOpenTest = (/**
         * @return {?}
         */
        () => {
            this.itemsBackScope = this.deepCloneBackDefine(this.itemsBackScopeTemp);
            return of(true);
        });
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.listItems = this.listItems.concat(this.uiState.userActList);
        this.items = this.listItems;
        this.itemsBackScope = this.listItems;
        this.total = this.listItems.length;
        this.totalBackScope = this.listItems.length;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set value(data) {
        if (data) {
            this.selectAbleChecked = data.SelectTargetAble;
            if (!data.SelectTargetAble) {
                this.selectTargetList = new Array();
            }
            else {
                this.selectTargetList = data.SelectTargetList;
            }
            this.waitReturnChecked = data.WaitReturn;
            this.dynamicBackWardRuleAbleChecked = data.DynamicBackWardRuleAble;
            this.resubmitEffect = data.ResubmitEffect;
            if (!data.TargetRef) {
                this.targetRef = 'Empty';
            }
            else {
                this.targetRef = data.TargetRef;
            }
            if (this.resubmitEffect === null) {
                this.resubmitEffect = ResubmitEffect.sequence;
            }
            /** @type {?} */
            const strs = data.SelectTargetList;
            if (strs && strs.length > 0) {
                for (const str of strs) {
                    if (this.listItems.filter((/**
                     * @param {?} act
                     * @return {?}
                     */
                    act => act.Id === str))[0]) {
                        /** @type {?} */
                        const name = this.listItems.filter((/**
                         * @param {?} act
                         * @return {?}
                         */
                        act => act.Id === str))[0].Name;
                        this.displayTestText.push(name);
                    }
                    // const acti = { Id: str, Name: name };
                }
            }
            /** @type {?} */
            const act = this.listItems.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item.Id === this.targetRef));
            if (act) {
                this.displayText = act.Name;
            }
            else {
                this.displayText = '';
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.message.warning(this.localePipe.transform('component.backwardRule.reEdit'));
                }), 500);
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.nodeType = this.editorParams.nodeType;
        if (this.nodeType !== 'UserActivity') {
            this.listItems = this.listItems.filter((/**
             * @param {?} i
             * @return {?}
             */
            i => i.Id !== 'Empty'));
            this.items = this.listItems;
            this.total = this.listItems.length;
        }
        this.itemsBackScope = this.listItems.filter((/**
         * @param {?} i
         * @return {?}
         */
        i => i.Id !== 'Empty' && i.Id !== 'PrecursorActivityId'));
        this.totalBackScope = this.itemsBackScope.length;
        this.itemsTemp = this.deepCloneDefine(this.items);
        this.itemsBackScopeTemp = this.deepCloneDefine(this.itemsBackScope);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    selectAbleClick() {
        if (this.uiState.propertyData.ClrTypeID === 'wf.UserActivity'
            && this.uiState.propertyData.CompleteStrategy !== this.uiState.completeIterator[0].key
            && this.selectAbleChecked === true) {
            this.message.info(this.localePipe.transform('component.backwardRule.selectAbleClick'), (/**
             * @return {?}
             */
            () => {
                this.selectAbleChecked = false;
            }));
        }
        if (this.selectAbleChecked == false) {
            this.displayTestText = [];
        }
    }
    /**
     * @return {?}
     */
    waitReturnClick() {
        this.waitReturnChecked = !this.waitReturnChecked;
    }
    /**
     * @return {?}
     */
    dynamicBackWardRuleAbleClick() {
        this.dynamicBackWardRuleAbleChecked = !this.dynamicBackWardRuleAbleChecked;
    }
    /**
     * @return {?}
     */
    clickOK() {
        /** @type {?} */
        const list = [];
        // 重新打开设置界面，没有进行节点配置的情况（DestinationActivities）
        if (this.fullActs.length === 0 && this.displayTestText.length > 0) {
            for (const act of this.displayTestText) {
                for (const allAct of this.listItems) {
                    if (act === allAct.Name) {
                        list.push(allAct.Id);
                    }
                }
            }
        }
        else if (this.fullActs && this.fullActs.length > 0) {
            // 附加节点的id传给模型上的DestinationActivities
            this.fullActs.forEach((/**
             * @param {?} act
             * @return {?}
             */
            act => {
                if (this.uiState.userActList.some((/**
                 * @param {?} u
                 * @return {?}
                 */
                u => u.Id == act.Id))) {
                    list.push(act.Id);
                }
            }));
        }
        /** @type {?} */
        const backWardRule = {
            TargetRef: this.getTargetRef(),
            SelectTargetAble: this.selectAbleChecked,
            WaitReturn: this.waitReturnChecked,
            DynamicBackWardRuleAble: this.dynamicBackWardRuleAbleChecked,
            SelectTargetList: list,
            ResubmitEffect: this.resubmitEffect
        };
        /** @type {?} */
        const object = { value: backWardRule, parameters: null };
        this.submitModal.emit(object);
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    pagerChanged(arg) {
        this.pageInfo.pageIndex = arg.pageIndex;
        this.pageInfo.pageSize = arg.pageSize;
        /** @type {?} */
        const search = {
            field: arg.searchValue.searchField,
            value: arg.searchValue.searchValue
        };
        this.load(search);
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    pagerChangedBackScope(arg) {
        this.pageInfo.pageIndex = arg.pageIndex;
        this.pageInfo.pageSize = arg.pageSize;
        /** @type {?} */
        const search = {
            field: arg.searchValue.searchField,
            value: arg.searchValue.searchValue
        };
        this.loadBackScope(search);
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    pageSizeChange(arg) {
        console.log(arg);
        this.pageInfo.pageIndex = arg.pageIndex;
        this.pageInfo.pageSize = arg.pageSize;
        /** @type {?} */
        const search = {
            field: arg.searchValue.searchField,
            value: arg.searchValue.searchValue
        };
        this.load(search);
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    pageSizeChangeBackScope(arg) {
        console.log(arg);
        this.pageInfo.pageIndex = arg.pageIndex;
        this.pageInfo.pageSize = arg.pageSize;
        /** @type {?} */
        const search = {
            field: arg.searchValue.searchField,
            value: arg.searchValue.searchValue
        };
        this.loadBackScope(search);
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    search(arg) {
        this.pageInfo.pageIndex = arg.pageInfo.pageIndex;
        this.pageInfo.pageSize = arg.pageInfo.pageSize;
        /** @type {?} */
        const search = arg.search;
        this.load(search);
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    searchBackScope(arg) {
        this.pageInfo.pageIndex = arg.pageInfo.pageIndex;
        this.pageInfo.pageSize = arg.pageInfo.pageSize;
        /** @type {?} */
        const search = arg.search;
        this.loadBackScope(search);
    }
    /**
     * @param {?=} search
     * @return {?}
     */
    load(search) {
        /** @type {?} */
        const start = (this.pageInfo.pageIndex - 1) * this.pageInfo.pageSize;
        /** @type {?} */
        const end = start + this.pageInfo.pageSize;
        /** @type {?} */
        let items = [];
        if (search) {
            if (search.field === '*') {
                items = this.listItems.filter((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i.Name.indexOf(search.value) > -1 || i.Id.indexOf(search.value) > -1));
            }
            else {
                items = this.listItems.filter((/**
                 * @param {?} f
                 * @return {?}
                 */
                f => f[search.field].indexOf(search.value) > -1));
            }
        }
        else {
            items = this.listItems;
        }
        this.total = items.length;
        this.items = items;
        this.hlp.componentRef.instance.loadData({
            data: this.items
        });
    }
    /**
     * @param {?=} search
     * @return {?}
     */
    loadBackScope(search) {
        /** @type {?} */
        const start = (this.pageInfo.pageIndex - 1) * this.pageInfo.pageSize;
        /** @type {?} */
        const end = start + this.pageInfo.pageSize;
        /** @type {?} */
        let itemsBackScope = [];
        if (search) {
            if (search.field === '*') {
                itemsBackScope = this.listItems.filter((/**
                 * @param {?} i
                 * @return {?}
                 */
                i => i.Name.indexOf(search.value) > -1 || i.Id.indexOf(search.value) > -1));
            }
            else {
                itemsBackScope = this.listItems.filter((/**
                 * @param {?} f
                 * @return {?}
                 */
                f => f[search.field].indexOf(search.value) > -1));
            }
        }
        else {
            itemsBackScope = this.listItems;
        }
        this.totalBackScope = itemsBackScope.length;
        this.itemsBackScope = itemsBackScope;
        this.hlpScope.componentRef.instance.loadData({
            data: this.itemsBackScope
        });
    }
    /**
     * @private
     * @return {?}
     */
    getTargetRef() {
        if (this.targetRef === 'Empty') {
            return '';
        }
        else {
            return this.targetRef;
        }
    }
    //为了打开后仍然显示最初数据，而不是过滤后的数据
    /**
     * @param {?} target
     * @return {?}
     */
    deepCloneDefine(target) {
        /** @type {?} */
        let result = [];
        target.forEach((/**
         * @param {?} t
         * @return {?}
         */
        t => result.push(JSON.stringify(t))));
        return result;
    }
    /**
     * @param {?} target
     * @return {?}
     */
    deepCloneBackDefine(target) {
        /** @type {?} */
        let result = [];
        target.forEach((/**
         * @param {?} t
         * @return {?}
         */
        t => result.push(JSON.parse(t))));
        return result;
    }
}
BackwardRuleComponent.decorators = [
    { type: Component, args: [{
                selector: 'procDesigner-backward-rule',
                template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\">\r\n    <section class=\"f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n        <div class=\"farris-form form-inline farris-form-inline\">\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.backwardRule.rejectedTo:' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"padding-right: 30px\">\r\n                  <farris-lookup-grid #hlp [items]=\"items\" [columns]=\"columns\" [resizable]=\"true\" [singleSelect]=\"true\"\r\n                    [idField]=\"'Id'\" [textField]=\"'Name'\" [(ngModel)]=\"displayText\" [valueField]=\"'Id'\"  [beforeOpen] = \"beforeOpen\"\r\n                    [pagination]=\"false\" [pageIndex]=\"pageInfo.pageIndex\" [pageSize]=\"pageInfo.pageSize\"\r\n                    [pageList]=\"pageInfo.pageList\" [total]=\"total\" title=\"{{'component.backwardRule.title' | wfLocale}}\" [displayType]=\"'List'\"\r\n                    [dictPicked]=\"dictPicked\" [remoteSearch]='false' (pagerChanged)=\"pagerChanged($event)\"\r\n                    (search)=\"search($event)\" [enableClear]=\"false\" (pageSizeChange)=\"pageSizeChange($event)\">\r\n                  </farris-lookup-grid>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div *ngIf=\"nodeType==='UserActivity'\">\r\n            <div class=\"col-12 farris-group-auto my-3\">\r\n              <div class=\"farris-group-wrap\" style=\"padding-left: 2.75rem!important\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <div class=\"farris-input-wrap\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                      <input class=\"custom-control-input\" name=\"selectAble\" type=\"checkbox\" id=\"selectAble\"\r\n                        [(ngModel)]=\"selectAbleChecked\" (change)=\"selectAbleClick()\" />\r\n                      <label class=\"custom-control-label\" for=\"selectAble\">{{'component.backwardRule.dynamicSelection' | wfLocale}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 farris-group-auto my-3 pr-5\" *ngIf=\"selectAbleChecked\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\">\r\n                    <span class=\"farris-label-text\">{{'component.backwardRule.backScope' | wfLocale}}</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\" style=\"padding-right: 30px;\">\r\n                    <farris-lookup-grid #hlpScope [items]=\"itemsBackScope\" [columns]=\"columns\" [disabled]=\"!(selectAbleChecked)\"  [beforeOpen] = \"beforeOpenTest\"\r\n                      [resizable]=\"true\" [singleSelect]=\"false\" [idField]=\"'Id'\" [textField]=\"'Name'\" [(ngModel)]=\"displayTestText\" [valueField]=\"'Id'\"\r\n                      [pagination]=\"false\" [pageIndex]=\"pageInfo.pageIndex\" [pageSize]=\"pageInfo.pageSize\"\r\n                      [pageList]=\"pageInfo.pageList\" [total]=\"totalBackScope\" title=\"{{'component.backwardRule.title' | wfLocale}}\" [displayType]=\"'List'\"\r\n                      [dictPicked]=\"dictPickedTest\" [remoteSearch]='false' (pagerChanged)=\"pagerChangedBackScope($event)\"\r\n                      placeholder=\"{{'component.backwardRule.defaultPrompt' | wfLocale}}\" [enableToSelect]=\"false\"\r\n                      (search)=\"searchBackScope($event)\" [enableClear]=\"false\" (pageSizeChange)=\"pageSizeChangeBackScope($event)\">\r\n                    </farris-lookup-grid>\r\n                    <div class=\"farris-feedback valid-feedback\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\">\r\n                    <span class=\"farris-label-text\">{{'component.backwardRule.resubmitEffectOptions' | wfLocale}}</span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\" style=\"padding-right: 30px\">\r\n                    <farris-combo-list [data]=\"resubmitEffectOptions\" [textField]=\"'text'\" [valueField]=\"'value'\"\r\n                      [idField]=\"'value'\" [(ngModel)]=\"resubmitEffect\" style=\"flex: 1;\" [enableClear]=\"false\">\r\n                    </farris-combo-list>\r\n                    <div class=\"farris-feedback valid-feedback\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n              <div class=\"farris-group-wrap\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <label class=\"col-form-label\">\r\n                    <span class=\"farris-label-text\"></span>\r\n                  </label>\r\n                  <div class=\"farris-input-wrap\" style=\"padding-right: 30px;border-radius:15px\">\r\n                    <div class=\"page-friendly-reminder\" style=\"background:#ECF4FF;padding: 0.5rem!important;border-radius:6px\">\r\n                      <div class=\"reminder-message\">\r\n                        <span class=\"reminder-title\">\r\n                          <span class=\"f-icon f-icon-info\">\r\n                          </span>\r\n                          <span class=\"reminder-name\" style=\"padding-left: 0.25rem\">\r\n                          </span>\r\n                        </span>\r\n                        <span class=\"message\"><br/>{{'component.backwardRule.popover1' | wfLocale}}<br/>\r\n                          {{'component.backwardRule.popover2' | wfLocale}}<br/>\r\n                          {{'component.backwardRule.popover3' | wfLocale}}<br/>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 farris-group-auto my-3\">\r\n              <div class=\"farris-group-wrap\" style=\"padding-left: 2.75rem!important\">\r\n                <div class=\"form-group farris-form-group\">\r\n                  <div class=\"farris-input-wrap\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                      <input class=\"custom-control-input\" name=\"dynamicBackWardRuleAble\" type=\"checkbox\"\r\n                        id=\"dynamicBackWardRuleAble\" [checked]=\"dynamicBackWardRuleAbleChecked\"\r\n                        (change)=\"dynamicBackWardRuleAbleClick()\" />\r\n                      <label class=\"custom-control-label\" for=\"dynamicBackWardRuleAble\">{{'component.backwardRule.allowModification' | wfLocale}}</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"clickCancel()\">{{'component.backwardRule.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">{{'component.backwardRule.clickOk' | wfLocale}}</button>\r\n</ng-template>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [".item-header{padding:1rem}.item{padding:.5rem 5rem}"]
            }] }
];
/** @nocollapse */
BackwardRuleComponent.ctorParameters = () => [
    { type: ProcessDesignerUIState },
    { type: MessagerService },
    { type: NotifyService },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
BackwardRuleComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    editorParams: [{ type: Input }],
    value: [{ type: Input }],
    nodeType: [{ type: Input }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    hlp: [{ type: ViewChild, args: ['hlp',] }],
    hlpScope: [{ type: ViewChild, args: ['hlpScope',] }]
};
if (false) {
    /** @type {?} */
    BackwardRuleComponent.prototype.cls;
    /** @type {?} */
    BackwardRuleComponent.prototype.editorParams;
    /** @type {?} */
    BackwardRuleComponent.prototype.nodeType;
    /** @type {?} */
    BackwardRuleComponent.prototype.closeModal;
    /** @type {?} */
    BackwardRuleComponent.prototype.submitModal;
    /** @type {?} */
    BackwardRuleComponent.prototype.modalFooter;
    /** @type {?} */
    BackwardRuleComponent.prototype.hlp;
    /** @type {?} */
    BackwardRuleComponent.prototype.hlpScope;
    /** @type {?} */
    BackwardRuleComponent.prototype.modalConfig;
    /** @type {?} */
    BackwardRuleComponent.prototype.displayText;
    /** @type {?} */
    BackwardRuleComponent.prototype.displayTestText;
    /** @type {?} */
    BackwardRuleComponent.prototype.fullActs;
    /** @type {?} */
    BackwardRuleComponent.prototype.listItems;
    /** @type {?} */
    BackwardRuleComponent.prototype.items;
    /** @type {?} */
    BackwardRuleComponent.prototype.itemsTemp;
    /** @type {?} */
    BackwardRuleComponent.prototype.itemsBackScope;
    /** @type {?} */
    BackwardRuleComponent.prototype.itemsBackScopeTemp;
    /** @type {?} */
    BackwardRuleComponent.prototype.columns;
    /** @type {?} */
    BackwardRuleComponent.prototype.selectAbleChecked;
    /** @type {?} */
    BackwardRuleComponent.prototype.waitReturnChecked;
    /** @type {?} */
    BackwardRuleComponent.prototype.resubmitEffect;
    /** @type {?} */
    BackwardRuleComponent.prototype.resubmitEffectOptions;
    /** @type {?} */
    BackwardRuleComponent.prototype.dynamicBackWardRuleAbleChecked;
    /** @type {?} */
    BackwardRuleComponent.prototype.targetRef;
    /** @type {?} */
    BackwardRuleComponent.prototype.selectTargetList;
    /** @type {?} */
    BackwardRuleComponent.prototype.popover;
    /** @type {?} */
    BackwardRuleComponent.prototype.pageInfo;
    /** @type {?} */
    BackwardRuleComponent.prototype.total;
    /** @type {?} */
    BackwardRuleComponent.prototype.totalBackScope;
    /** @type {?} */
    BackwardRuleComponent.prototype.dictPicked;
    /** @type {?} */
    BackwardRuleComponent.prototype.dictPickedTest;
    /** @type {?} */
    BackwardRuleComponent.prototype.beforeOpen;
    /** @type {?} */
    BackwardRuleComponent.prototype.beforeOpenTest;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.uiState;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    BackwardRuleComponent.prototype.localePipe;
}
export class BackwardRuleConverter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        if (data) {
            return this.localePipe.transform('component.backwardRule.set');
        }
        return this.localePipe.transform('component.backwardRule.notSet');
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    BackwardRuleConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja3dhcmQtcnVsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL2JhY2t3YXJkLXJ1bGUvYmFja3dhcmQtcnVsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQWlCLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5MLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBZ0IsbUJBQW1CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUN0RSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQVdoRyxNQUFNLE9BQU8scUJBQXFCOzs7Ozs7Ozs7O0lBa0doQyxZQUNVLE9BQStCLEVBQy9CLE9BQXdCLEVBQ3hCLE1BQXFCLEVBQ1QsR0FBc0IsRUFDZixRQUFnQixFQUNSLFNBQWMsRUFDN0IsVUFBd0I7UUFOcEMsWUFBTyxHQUFQLE9BQU8sQ0FBd0I7UUFDL0IsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFDeEIsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUNULFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ2YsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNS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O0lBQ0QsK0NBR0M7O0lBRUQsMkNBR0M7O0lBRUQsK0NBR0M7Ozs7O0lBekVDLHdDQUF1Qzs7Ozs7SUFDdkMsd0NBQWdDOzs7OztJQUNoQyx1Q0FBNkI7Ozs7O0lBQzdCLG9DQUEwQzs7Ozs7SUFDMUMseUNBQTJDOzs7OztJQUMzQywwQ0FBaUQ7Ozs7O0lBQ2pELDJDQUE0Qzs7QUFnT2hELE1BQU0sT0FBTyxxQkFBcUI7Ozs7SUFDaEMsWUFDVSxVQUF3QjtRQUF4QixlQUFVLEdBQVYsVUFBVSxDQUFjO0lBQzlCLENBQUM7Ozs7O0lBRUwsU0FBUyxDQUFDLElBQVM7UUFDakIsSUFBSSxJQUFJLEVBQUU7WUFDUixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLENBQUM7U0FDaEU7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLCtCQUErQixDQUFDLENBQUM7SUFDcEUsQ0FBQztDQUNGOzs7Ozs7SUFURywyQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsLCBMT0NBTEVfSUQsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy9pZGUtcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBQaWNrZWRSZXN1bHQsIExvb2t1cEdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWxvb2t1cCc7XHJcbmltcG9ydCB7IFJlc3VibWl0RWZmZWN0IH0gZnJvbSAnLi9iYWNrd2FyZC1ydWxlLmVudGl0eSc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9IGZyb20gJy4uLy4uL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdwcm9jRGVzaWduZXItYmFja3dhcmQtcnVsZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2JhY2t3YXJkLXJ1bGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2JhY2t3YXJkLXJ1bGUuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgICBXZkxvY2FsZVBpcGUsXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmFja3dhcmRSdWxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgQElucHV0KCkgZWRpdG9yUGFyYW1zOiBhbnkgPSB7fTtcclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZShkYXRhOiBhbnkpIHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0QWJsZUNoZWNrZWQgPSBkYXRhLlNlbGVjdFRhcmdldEFibGU7XHJcbiAgICAgIGlmKCFkYXRhLlNlbGVjdFRhcmdldEFibGUpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdFRhcmdldExpc3QgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG4gICAgICB9ZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUYXJnZXRMaXN0ID0gZGF0YS5TZWxlY3RUYXJnZXRMaXN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMud2FpdFJldHVybkNoZWNrZWQgPSBkYXRhLldhaXRSZXR1cm47XHJcbiAgICAgIHRoaXMuZHluYW1pY0JhY2tXYXJkUnVsZUFibGVDaGVja2VkID0gZGF0YS5EeW5hbWljQmFja1dhcmRSdWxlQWJsZTtcclxuICAgICAgdGhpcy5yZXN1Ym1pdEVmZmVjdCA9IGRhdGEuUmVzdWJtaXRFZmZlY3Q7XHJcbiAgICAgIGlmICghZGF0YS5UYXJnZXRSZWYpIHtcclxuICAgICAgICB0aGlzLnRhcmdldFJlZiA9ICdFbXB0eSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRSZWYgPSBkYXRhLlRhcmdldFJlZjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5yZXN1Ym1pdEVmZmVjdCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMucmVzdWJtaXRFZmZlY3QgPSBSZXN1Ym1pdEVmZmVjdC5zZXF1ZW5jZTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBzdHJzOiBzdHJpbmdbXSA9IGRhdGEuU2VsZWN0VGFyZ2V0TGlzdDtcclxuICAgICAgaWYgKHN0cnMgJiYgc3Rycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzdHIgb2Ygc3Rycykge1xyXG4gICAgICAgICAgaWYodGhpcy5saXN0SXRlbXMuZmlsdGVyKGFjdCA9PiBhY3QuSWQgPT09IHN0cilbMF0pIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMubGlzdEl0ZW1zLmZpbHRlcihhY3QgPT4gYWN0LklkID09PSBzdHIpWzBdLk5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRlc3RUZXh0LnB1c2gobmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBjb25zdCBhY3RpID0geyBJZDogc3RyLCBOYW1lOiBuYW1lIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGFjdCA9IHRoaXMubGlzdEl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLklkID09PSB0aGlzLnRhcmdldFJlZik7XHJcbiAgICAgIGlmIChhY3QpIHtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gYWN0Lk5hbWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9ICcnO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLndhcm5pbmcodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmJhY2t3YXJkUnVsZS5yZUVkaXQnKSk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoKSBub2RlVHlwZTogJ1VzZXJBY3Rpdml0eScgfCAnQ2FsbEFjdGl2aXR5U3ViUHJvY2VzcycgPSAnVXNlckFjdGl2aXR5JztcclxuXHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2hscCcpIGhscDogTG9va3VwR3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdobHBTY29wZScpIGhscFNjb3BlOiBMb29rdXBHcmlkQ29tcG9uZW50O1xyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5iYWNrd2FyZFJ1bGUuYmFja3dhcmRSdWxlJyksXHJcbiAgICB3aWR0aDogNzYwLFxyXG4gICAgaGVpZ2h0OiA1MDUsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcbiAgZGlzcGxheVRleHQ6IHN0cmluZztcclxuICBkaXNwbGF5VGVzdFRleHQgPSBbXTtcclxuICBmdWxsQWN0cyA9IFtdO1xyXG4gIGxpc3RJdGVtcyA9IFtcclxuICAgIHsgSWQ6ICdJbml0aWFsQWN0aXR5SWQnLCBOYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYmFja3dhcmRSdWxlLmluaXRpYWxBY3RpdHlJZCcpIH0sXHJcbiAgICB7IElkOiAnUHJlY3Vyc29yQWN0aXZpdHlJZCcsIE5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5iYWNrd2FyZFJ1bGUucHJlY3Vyc29yQWN0aXZpdHlJZCcpIH0sXHJcbiAgICB7IElkOiAnRW1wdHknLCBOYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYmFja3dhcmRSdWxlLmVtcHR5JykgfVxyXG4gIF07XHJcblxyXG4gIGl0ZW1zID0gW107XHJcbiAgaXRlbXNUZW1wID0gW107XHJcbiAgaXRlbXNCYWNrU2NvcGUgPSBbXTtcclxuICBpdGVtc0JhY2tTY29wZVRlbXAgPSBbXTtcclxuXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5iYWNrd2FyZFJ1bGUubmFtZScpLCBmaWVsZDogJ05hbWUnLCB3aWR0aDogMTAwLCBzZWFyY2hGaWVsZDogJ05hbWUnIH0sXHJcbiAgICB7IHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYmFja3dhcmRSdWxlLmlkJyksIGZpZWxkOiAnSWQnLCB3aWR0aDogMTAwLCBzZWFyY2hGaWVsZDogJ0lkJyB9LFxyXG4gIF07XHJcbiAgc2VsZWN0QWJsZUNoZWNrZWQgPSBmYWxzZTtcclxuICB3YWl0UmV0dXJuQ2hlY2tlZCA9IGZhbHNlO1xyXG4gIHJlc3VibWl0RWZmZWN0OiBSZXN1Ym1pdEVmZmVjdDtcclxuICByZXN1Ym1pdEVmZmVjdE9wdGlvbnMgPSBbXHJcbiAgICB7IHZhbHVlOiBSZXN1Ym1pdEVmZmVjdC5zZXF1ZW5jZSwgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmJhY2t3YXJkUnVsZS5zZXF1ZW5jZScpIH0sXHJcbiAgICB7IHZhbHVlOiBSZXN1Ym1pdEVmZmVjdC5iYWNrVG9NZSwgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmJhY2t3YXJkUnVsZS5iYWNrVG9NZScpIH0sXHJcbiAgICB7IHZhbHVlOiBSZXN1Ym1pdEVmZmVjdC5iYWNrVG9DdXJyZW50Tm9kZSwgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmJhY2t3YXJkUnVsZS5iYWNrVG9DdXJyZW50Tm9kZScpIH0sXHJcbiAgXTtcclxuICBkeW5hbWljQmFja1dhcmRSdWxlQWJsZUNoZWNrZWQgPSBmYWxzZTtcclxuICB0YXJnZXRSZWYgPSB0aGlzLmxpc3RJdGVtc1swXS5JZDtcclxuICBzZWxlY3RUYXJnZXRMaXN0ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICBwb3BvdmVyID0gJzEu6aG65bqP5rWB6L2sOuaMieeFp+a1gei9rOe6v+mhuuW6j+i/m+ihjOa1gei9rDsgMi7ov5Tlm57miJE65a6M5oiQ562W55Wl5Li65oqi5Y2g77ya5Y+q57uZ6amz5Zue5Lq65Yib5bu65Lu75YqhLOWujOaIkOetlueVpeS4uuS8muetvu+8mumps+WbnuS6uuS4juacquWuoeaJueS6uuaUtuWIsOaWsOS7u+WKoe+8jOW3suWuoeaJueS6uuWRmOiHquWKqOWuoeaJuemAmui/hzsgMy7ov5Tlm57mnKzoioLngrk65a6e6ZmF5pWI5p6c5Y+X4oCc5YaN5qyh6L+b5YWl6IqC54K55pe277yM5Yqe55CG5Lq65piv5ZCm5piv6IqC54K55bey5Yqe5Lq65ZGY5b2x5ZON4oCd6YCJ6aG555qE5b2x5ZONJztcclxuICBwYWdlSW5mbyA9IHtcclxuICAgIHBhZ2VJbmRleDogMSxcclxuICAgIHBhZ2VMaXN0OiBbMTAsIDIwLCAzMCwgNTBdLFxyXG4gICAgcGFnZVNpemU6IDIwXHJcbiAgfTtcclxuXHJcbiAgdG90YWw6IG51bWJlcjtcclxuICB0b3RhbEJhY2tTY29wZTogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdWlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBub3RpZnk6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSB0aGlzLmxvY2FsZVBpcGUgfHwgbmV3IFdmTG9jYWxlUGlwZShsb2NhbGVJZCwgcmVzb3VyY2VzKTtcclxuICAgIHRoaXMubGlzdEl0ZW1zID0gdGhpcy5saXN0SXRlbXMuY29uY2F0KHRoaXMudWlTdGF0ZS51c2VyQWN0TGlzdCk7XHJcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5saXN0SXRlbXM7XHJcbiAgICB0aGlzLml0ZW1zQmFja1Njb3BlID0gdGhpcy5saXN0SXRlbXM7XHJcbiAgICB0aGlzLnRvdGFsID0gdGhpcy5saXN0SXRlbXMubGVuZ3RoO1xyXG4gICAgdGhpcy50b3RhbEJhY2tTY29wZSA9IHRoaXMubGlzdEl0ZW1zLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLm5vZGVUeXBlID0gdGhpcy5lZGl0b3JQYXJhbXMubm9kZVR5cGU7XHJcbiAgICBpZiAodGhpcy5ub2RlVHlwZSAhPT0gJ1VzZXJBY3Rpdml0eScpIHtcclxuICAgICAgdGhpcy5saXN0SXRlbXMgPSB0aGlzLmxpc3RJdGVtcy5maWx0ZXIoaSA9PiBpLklkICE9PSAnRW1wdHknKTtcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMubGlzdEl0ZW1zO1xyXG4gICAgICB0aGlzLnRvdGFsID0gdGhpcy5saXN0SXRlbXMubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pdGVtc0JhY2tTY29wZSA9IHRoaXMubGlzdEl0ZW1zLmZpbHRlcihpID0+IGkuSWQgIT09ICdFbXB0eScgJiYgaS5JZCAhPT0gJ1ByZWN1cnNvckFjdGl2aXR5SWQnKTtcclxuICAgIHRoaXMudG90YWxCYWNrU2NvcGUgPSB0aGlzLml0ZW1zQmFja1Njb3BlLmxlbmd0aDtcclxuICAgIHRoaXMuaXRlbXNUZW1wID0gdGhpcy5kZWVwQ2xvbmVEZWZpbmUodGhpcy5pdGVtcyk7XHJcbiAgICB0aGlzLml0ZW1zQmFja1Njb3BlVGVtcCA9IHRoaXMuZGVlcENsb25lRGVmaW5lKHRoaXMuaXRlbXNCYWNrU2NvcGUpO1xyXG5cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICB9XHJcblxyXG4gIHNlbGVjdEFibGVDbGljaygpIHtcclxuICAgIGlmICh0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhLkNsclR5cGVJRCA9PT0gJ3dmLlVzZXJBY3Rpdml0eSdcclxuICAgICAgJiYgdGhpcy51aVN0YXRlLnByb3BlcnR5RGF0YS5Db21wbGV0ZVN0cmF0ZWd5ICE9PSB0aGlzLnVpU3RhdGUuY29tcGxldGVJdGVyYXRvclswXS5rZXlcclxuICAgICAgJiYgdGhpcy5zZWxlY3RBYmxlQ2hlY2tlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYmFja3dhcmRSdWxlLnNlbGVjdEFibGVDbGljaycpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RBYmxlQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuc2VsZWN0QWJsZUNoZWNrZWQgPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5kaXNwbGF5VGVzdFRleHQgPSBbXTtcclxuICAgIH1cclxuICB9XHJcbiAgd2FpdFJldHVybkNsaWNrKCkge1xyXG4gICAgdGhpcy53YWl0UmV0dXJuQ2hlY2tlZCA9ICF0aGlzLndhaXRSZXR1cm5DaGVja2VkO1xyXG4gIH1cclxuICBkeW5hbWljQmFja1dhcmRSdWxlQWJsZUNsaWNrKCkge1xyXG4gICAgdGhpcy5keW5hbWljQmFja1dhcmRSdWxlQWJsZUNoZWNrZWQgPSAhdGhpcy5keW5hbWljQmFja1dhcmRSdWxlQWJsZUNoZWNrZWQ7XHJcbiAgfVxyXG4gIGRpY3RQaWNrZWQgPSAoYXJnOiBhbnkpOiBPYnNlcnZhYmxlPFBpY2tlZFJlc3VsdD4gPT4ge1xyXG4gICAgdGhpcy50YXJnZXRSZWYgPSBhcmcuSWQ7XHJcbiAgICB0aGlzLmRpc3BsYXlUZXh0ID0gYXJnLk5hbWU7XHJcbiAgICBpZiAoYXJnLklkID09PSAnRW1wdHknICYmICF0aGlzLnNlbGVjdEFibGVDaGVja2VkKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0QWJsZUNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5iYWNrd2FyZFJ1bGUuZGljdFBpY2tlZCcpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvZih7IGNsb3NlRGlhbG9nOiB0cnVlIH0pO1xyXG4gIH1cclxuICBkaWN0UGlja2VkVGVzdCA9IChhcmc6IGFueSk6IE9ic2VydmFibGU8UGlja2VkUmVzdWx0PiA9PiB7XHJcbiAgICB0aGlzLmZ1bGxBY3RzID0gYXJnO1xyXG4gICAgcmV0dXJuIG9mKHsgY2xvc2VEaWFsb2c6IHRydWUgfSk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVPcGVuID0gKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4gPT4ge1xyXG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuZGVlcENsb25lQmFja0RlZmluZSh0aGlzLml0ZW1zVGVtcCk7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVPcGVuVGVzdCA9ICgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0+IHtcclxuICAgIHRoaXMuaXRlbXNCYWNrU2NvcGUgPSB0aGlzLmRlZXBDbG9uZUJhY2tEZWZpbmUodGhpcy5pdGVtc0JhY2tTY29wZVRlbXApO1xyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tPSygpIHtcclxuICAgIGNvbnN0IGxpc3QgPSBbXTtcclxuICAgIC8vIOmHjeaWsOaJk+W8gOiuvue9rueVjOmdou+8jOayoeaciei/m+ihjOiKgueCuemFjee9rueahOaDheWGte+8iERlc3RpbmF0aW9uQWN0aXZpdGllc++8iVxyXG4gICAgaWYgKHRoaXMuZnVsbEFjdHMubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzcGxheVRlc3RUZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBhY3Qgb2YgdGhpcy5kaXNwbGF5VGVzdFRleHQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGFsbEFjdCBvZiB0aGlzLmxpc3RJdGVtcykge1xyXG4gICAgICAgICAgaWYgKGFjdCA9PT0gYWxsQWN0Lk5hbWUpIHtcclxuICAgICAgICAgICAgbGlzdC5wdXNoKGFsbEFjdC5JZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZnVsbEFjdHMgJiYgdGhpcy5mdWxsQWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIOmZhOWKoOiKgueCueeahGlk5Lyg57uZ5qih5Z6L5LiK55qERGVzdGluYXRpb25BY3Rpdml0aWVzXHJcbiAgICAgIHRoaXMuZnVsbEFjdHMuZm9yRWFjaChhY3QgPT4ge1xyXG4gICAgICAgIGlmKHRoaXMudWlTdGF0ZS51c2VyQWN0TGlzdC5zb21lKHUgPT4gdS5JZCA9PSBhY3QuSWQpKSB7XHJcbiAgICAgICAgICBsaXN0LnB1c2goYWN0LklkKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBiYWNrV2FyZFJ1bGUgPSB7XHJcbiAgICAgIFRhcmdldFJlZjogdGhpcy5nZXRUYXJnZXRSZWYoKSxcclxuICAgICAgU2VsZWN0VGFyZ2V0QWJsZTogdGhpcy5zZWxlY3RBYmxlQ2hlY2tlZCxcclxuICAgICAgV2FpdFJldHVybjogdGhpcy53YWl0UmV0dXJuQ2hlY2tlZCxcclxuICAgICAgRHluYW1pY0JhY2tXYXJkUnVsZUFibGU6IHRoaXMuZHluYW1pY0JhY2tXYXJkUnVsZUFibGVDaGVja2VkLFxyXG4gICAgICBTZWxlY3RUYXJnZXRMaXN0OiBsaXN0LFxyXG4gICAgICBSZXN1Ym1pdEVmZmVjdDogdGhpcy5yZXN1Ym1pdEVmZmVjdFxyXG4gICAgfTtcclxuICAgIGNvbnN0IG9iamVjdCA9IHsgdmFsdWU6IGJhY2tXYXJkUnVsZSwgcGFyYW1ldGVyczogbnVsbCB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBwYWdlckNoYW5nZWQoYXJnOiBhbnkpIHtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZUluZGV4ID0gYXJnLnBhZ2VJbmRleDtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZVNpemUgPSBhcmcucGFnZVNpemU7XHJcbiAgICBjb25zdCBzZWFyY2ggPSB7XHJcbiAgICAgIGZpZWxkOiBhcmcuc2VhcmNoVmFsdWUuc2VhcmNoRmllbGQsXHJcbiAgICAgIHZhbHVlOiBhcmcuc2VhcmNoVmFsdWUuc2VhcmNoVmFsdWVcclxuICAgIH07XHJcbiAgICB0aGlzLmxvYWQoc2VhcmNoKTtcclxuICB9XHJcblxyXG4gIHBhZ2VyQ2hhbmdlZEJhY2tTY29wZShhcmc6IGFueSkge1xyXG4gICAgdGhpcy5wYWdlSW5mby5wYWdlSW5kZXggPSBhcmcucGFnZUluZGV4O1xyXG4gICAgdGhpcy5wYWdlSW5mby5wYWdlU2l6ZSA9IGFyZy5wYWdlU2l6ZTtcclxuICAgIGNvbnN0IHNlYXJjaCA9IHtcclxuICAgICAgZmllbGQ6IGFyZy5zZWFyY2hWYWx1ZS5zZWFyY2hGaWVsZCxcclxuICAgICAgdmFsdWU6IGFyZy5zZWFyY2hWYWx1ZS5zZWFyY2hWYWx1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMubG9hZEJhY2tTY29wZShzZWFyY2gpO1xyXG4gIH1cclxuXHJcbiAgcGFnZVNpemVDaGFuZ2UoYXJnOiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKGFyZyk7XHJcbiAgICB0aGlzLnBhZ2VJbmZvLnBhZ2VJbmRleCA9IGFyZy5wYWdlSW5kZXg7XHJcbiAgICB0aGlzLnBhZ2VJbmZvLnBhZ2VTaXplID0gYXJnLnBhZ2VTaXplO1xyXG4gICAgY29uc3Qgc2VhcmNoID0ge1xyXG4gICAgICBmaWVsZDogYXJnLnNlYXJjaFZhbHVlLnNlYXJjaEZpZWxkLFxyXG4gICAgICB2YWx1ZTogYXJnLnNlYXJjaFZhbHVlLnNlYXJjaFZhbHVlXHJcbiAgICB9O1xyXG4gICAgdGhpcy5sb2FkKHNlYXJjaCk7XHJcbiAgfVxyXG5cclxuICBwYWdlU2l6ZUNoYW5nZUJhY2tTY29wZShhcmc6IGFueSkge1xyXG4gICAgY29uc29sZS5sb2coYXJnKTtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZUluZGV4ID0gYXJnLnBhZ2VJbmRleDtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZVNpemUgPSBhcmcucGFnZVNpemU7XHJcbiAgICBjb25zdCBzZWFyY2ggPSB7XHJcbiAgICAgIGZpZWxkOiBhcmcuc2VhcmNoVmFsdWUuc2VhcmNoRmllbGQsXHJcbiAgICAgIHZhbHVlOiBhcmcuc2VhcmNoVmFsdWUuc2VhcmNoVmFsdWVcclxuICAgIH07XHJcbiAgICB0aGlzLmxvYWRCYWNrU2NvcGUoc2VhcmNoKTtcclxuICB9XHJcblxyXG4gIHNlYXJjaChhcmc6IGFueSkge1xyXG4gICAgdGhpcy5wYWdlSW5mby5wYWdlSW5kZXggPSBhcmcucGFnZUluZm8ucGFnZUluZGV4O1xyXG4gICAgdGhpcy5wYWdlSW5mby5wYWdlU2l6ZSA9IGFyZy5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgIGNvbnN0IHNlYXJjaCA9IGFyZy5zZWFyY2g7XHJcblxyXG4gICAgdGhpcy5sb2FkKHNlYXJjaCk7XHJcbiAgfVxyXG5cclxuICBzZWFyY2hCYWNrU2NvcGUoYXJnOiBhbnkpIHtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZUluZGV4ID0gYXJnLnBhZ2VJbmZvLnBhZ2VJbmRleDtcclxuICAgIHRoaXMucGFnZUluZm8ucGFnZVNpemUgPSBhcmcucGFnZUluZm8ucGFnZVNpemU7XHJcbiAgICBjb25zdCBzZWFyY2ggPSBhcmcuc2VhcmNoO1xyXG5cclxuICAgIHRoaXMubG9hZEJhY2tTY29wZShzZWFyY2gpO1xyXG4gIH1cclxuXHJcbiAgbG9hZChzZWFyY2g/OiB7IGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmd9KSB7XHJcbiAgICBjb25zdCBzdGFydCA9ICh0aGlzLnBhZ2VJbmZvLnBhZ2VJbmRleCAtIDEpICogdGhpcy5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgdGhpcy5wYWdlSW5mby5wYWdlU2l6ZTtcclxuICAgIGxldCBpdGVtcyA9IFtdO1xyXG4gICAgaWYgKHNlYXJjaCkge1xyXG4gICAgICBpZiAoc2VhcmNoLmZpZWxkID09PSAnKicpIHtcclxuICAgICAgICBpdGVtcyA9IHRoaXMubGlzdEl0ZW1zLmZpbHRlcihpID0+IGkuTmFtZS5pbmRleE9mKHNlYXJjaC52YWx1ZSkgPiAtMSB8fCBpLklkLmluZGV4T2Yoc2VhcmNoLnZhbHVlKSA+IC0xKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpdGVtcyA9IHRoaXMubGlzdEl0ZW1zLmZpbHRlcihmID0+IGZbc2VhcmNoLmZpZWxkXS5pbmRleE9mKHNlYXJjaC52YWx1ZSkgPiAtMSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGl0ZW1zID0gdGhpcy5saXN0SXRlbXM7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRvdGFsID0gaXRlbXMubGVuZ3RoO1xyXG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5obHAuY29tcG9uZW50UmVmLmluc3RhbmNlLmxvYWREYXRhKHtcclxuICAgICAgZGF0YTogdGhpcy5pdGVtc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkQmFja1Njb3BlKHNlYXJjaD86IHsgZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZ30pIHtcclxuICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMucGFnZUluZm8ucGFnZUluZGV4IC0gMSkgKiB0aGlzLnBhZ2VJbmZvLnBhZ2VTaXplO1xyXG4gICAgY29uc3QgZW5kID0gc3RhcnQgKyB0aGlzLnBhZ2VJbmZvLnBhZ2VTaXplO1xyXG4gICAgbGV0IGl0ZW1zQmFja1Njb3BlID0gW107XHJcbiAgICBpZiAoc2VhcmNoKSB7XHJcbiAgICAgIGlmIChzZWFyY2guZmllbGQgPT09ICcqJykge1xyXG4gICAgICAgIGl0ZW1zQmFja1Njb3BlID0gdGhpcy5saXN0SXRlbXMuZmlsdGVyKGkgPT4gaS5OYW1lLmluZGV4T2Yoc2VhcmNoLnZhbHVlKSA+IC0xIHx8IGkuSWQuaW5kZXhPZihzZWFyY2gudmFsdWUpID4gLTEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW1zQmFja1Njb3BlID0gdGhpcy5saXN0SXRlbXMuZmlsdGVyKGYgPT4gZltzZWFyY2guZmllbGRdLmluZGV4T2Yoc2VhcmNoLnZhbHVlKSA+IC0xKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaXRlbXNCYWNrU2NvcGUgPSB0aGlzLmxpc3RJdGVtcztcclxuICAgIH1cclxuICAgIHRoaXMudG90YWxCYWNrU2NvcGUgPSBpdGVtc0JhY2tTY29wZS5sZW5ndGg7XHJcbiAgICB0aGlzLml0ZW1zQmFja1Njb3BlID0gaXRlbXNCYWNrU2NvcGU7XHJcbiAgICB0aGlzLmhscFNjb3BlLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5sb2FkRGF0YSh7XHJcbiAgICAgIGRhdGE6IHRoaXMuaXRlbXNCYWNrU2NvcGVcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRUYXJnZXRSZWYoKSB7XHJcbiAgICBpZiAodGhpcy50YXJnZXRSZWYgPT09ICdFbXB0eScpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0UmVmO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/kuLrkuobmiZPlvIDlkI7ku43nhLbmmL7npLrmnIDliJ3mlbDmja7vvIzogIzkuI3mmK/ov4fmu6TlkI7nmoTmlbDmja5cclxuICBkZWVwQ2xvbmVEZWZpbmUodGFyZ2V0OiBhbnlbXSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgdGFyZ2V0LmZvckVhY2godCA9PiByZXN1bHQucHVzaChKU09OLnN0cmluZ2lmeSh0KSkpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGRlZXBDbG9uZUJhY2tEZWZpbmUodGFyZ2V0OiBhbnlbXSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgdGFyZ2V0LmZvckVhY2godCA9PiByZXN1bHQucHVzaChKU09OLnBhcnNlKHQpKSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbn1cclxuZXhwb3J0IGNsYXNzIEJhY2t3YXJkUnVsZUNvbnZlcnRlciBpbXBsZW1lbnRzIFR5cGVDb252ZXJ0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBsb2NhbGVQaXBlOiBXZkxvY2FsZVBpcGVcclxuICApIHsgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YTogYW55KTogc3RyaW5nIHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuYmFja3dhcmRSdWxlLnNldCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5iYWNrd2FyZFJ1bGUubm90U2V0Jyk7XHJcbiAgfVxyXG59XHJcblxyXG4iXX0=