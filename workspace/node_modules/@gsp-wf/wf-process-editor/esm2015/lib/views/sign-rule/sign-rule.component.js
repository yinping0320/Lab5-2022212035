/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Optional, ChangeDetectorRef, Inject, LOCALE_ID } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { SignRuleEntity } from './entites/sign-rule.entity';
import { DialogComponent } from '@farris/ui-dialog';
import { ExprEditMode, ExpressionService } from '@gsp-svc/expression';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { DatagridComponent } from '@farris/ui-datagrid';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { of } from 'rxjs';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
import { BpmnModelHelper } from '@edp-pmf/bpmn-model';
import { Condition, CounterSignRule } from '@gsp-wf/wf-process-model';
export class SignRuleComponent {
    /**
     * @param {?} formBuilder
     * @param {?} message
     * @param {?} exprService
     * @param {?} designerUIState
     * @param {?} cdr
     * @param {?} localeId
     * @param {?} resources
     * @param {?} localePipe
     */
    constructor(formBuilder, message, exprService, designerUIState, cdr, localeId, resources, localePipe) {
        this.formBuilder = formBuilder;
        this.message = message;
        this.exprService = exprService;
        this.designerUIState = designerUIState;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.modalConfig = {
            title: this.localePipe.transform('component.signRule.countersignRules'),
            width: 800,
            height: 520,
            showButtons: true
        };
        this.editCondition = false;
        this.data = [];
        this.calculationMethods = [
            { text: this.localePipe.transform('component.signRule.byNumber'), value: 'byNumber' },
            { text: this.localePipe.transform('component.signRule.byProportion'), value: 'byProportion' },
            { text: this.localePipe.transform('component.signRule.customConditions'), value: 'null' },
        ];
        this.counterSignVariables = [];
        this.bpmnModel = this.designerUIState.bpmnModel;
        /**
         * **** 审批项帮助参数 ********************************************************
         */
        this.approvalCols = [{ title: this.localePipe.transform('component.signRule.value'), field: 'value', width: 80 },
            { title: this.localePipe.transform('component.signRule.text'), field: 'text', width: 90 }];
        this.approvalItems = [];
        this.approvalItems1 = [
            { value: 'Forward', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.forward') },
            { value: 'Backward', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.backward') },
            { value: 'Abort', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.abort') }
        ];
        /**
         * ********************************
         */
        this.columns = [
            { field: 'conclusionName', width: 25, title: this.localePipe.transform('component.signRule.conclusionName') },
            { field: 'conclusionValue', width: 25, title: this.localePipe.transform('component.signRule.conclusionValue') },
            { field: 'calculateType', width: 40, title: this.localePipe.transform('component.signRule.calculateType'),
                formatter: { type: 'enum', options: { valueField: 'value', textField: 'text', data: this.calculationMethods } },
                editor: { type: EditorTypes.COMBOLIST, options: { valueField: 'value', textField: 'text', data: this.calculationMethods, idField: 'value', panelHeight: 'auto' } }
            },
            { field: 'conditionValue', width: 25, title: this.localePipe.transform('component.signRule.conditionValue'),
                editor: { type: EditorTypes.NUMBERBOX, options: {} },
                formatter: { type: 'number', options: { precision: 0, min: 0 } }
            },
            { field: 'waitAllVotes', width: 35, title: this.localePipe.transform('component.signRule.waitAllVotes'),
                editor: { type: EditorTypes.SWITCH, options: {} },
                formatter: { type: 'boolean', options: { trueText: this.localePipe.transform('component.signRule.yes'), falseText: this.localePipe.transform('component.signRule.no') } }
            },
            { field: 'completionCondition', width: 50, title: this.localePipe.transform('component.signRule.customConditions'),
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        (e) => {
                            console.log('clear', e);
                        })
                    }
                }
            }
        ];
        /**
         * 结束编辑前事件
         */
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        (rowIndex, rowData, column) => {
            this.preValue = JSON.parse(JSON.stringify(rowData));
            return of(true);
        });
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    //会签规则打开页面
    /**
     * @param {?} rules
     * @return {?}
     */
    set value(rules) {
        if (rules && rules.length > 0) {
            for (const rule of rules) {
                /** @type {?} */
                const val = new SignRuleEntity();
                val.id = ProcessDeUtil.GenerateElementId();
                val.conclusionValue = rule.ConclusionValue;
                val.conclusionName = rule.ConclusionName;
                val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';
                val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;
                val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;
                val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition._value : null;
                this.data.push(val);
            }
        }
        else { // 如果模型上没有会签规则，自动带入所有的审批选项
            this.deleteRow();
        }
    }
    //多实例打开完成规则页面
    /**
     * @param {?} rules
     * @return {?}
     */
    set value1(rules) {
        this.editCondition = true;
        if (rules && rules.length > 0) {
            for (const rule of rules) {
                /** @type {?} */
                const val = new SignRuleEntity();
                val.id = BpmnModelHelper.GenerateElementId();
                val.conclusionValue = rule.ConclusionValue;
                // val.conclusionName = rule.conclusionName;
                val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';
                val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;
                val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;
                val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition.Value : null;
                this.data.push(val);
            }
            this.data = this.setName1(this.data);
        }
        else { // 如果模型上没有会签规则，自动带入所有的审批选项
            this.deleteRow1();
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.counterSignVariables = this.designerUIState.counterSignVariables || [];
        this.approvalItems = this.designerUIState.approvalItems || [];
    }
    // 重置动作
    /**
     * @return {?}
     */
    deleteRow() {
        this.data = [];
        /** @type {?} */
        const ruleItems = this.designerUIState.approvalItems || [];
        if (ruleItems && ruleItems.length > 0) {
            for (const ruleItem of ruleItems) {
                /** @type {?} */
                const val = new SignRuleEntity();
                if (ruleItem.value === 'Pass') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byProportion';
                    val.conditionValue = '100';
                    val.waitAllVotes = true;
                }
                else if (ruleItem.value === 'Back') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byNumber';
                    val.conditionValue = '1';
                    val.waitAllVotes = true;
                }
                else {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'null';
                    val.conditionValue = '0';
                    val.waitAllVotes = true;
                }
                this.data.push(val);
            }
        }
    }
    // 重置动作
    /**
     * @return {?}
     */
    deleteRow1() {
        this.data = [];
        if (this.approvalItems1 && this.approvalItems1.length > 0) {
            for (const ruleItem of this.approvalItems1) {
                /** @type {?} */
                const val = new SignRuleEntity();
                if (ruleItem.value === 'Forward') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byProportion';
                    val.conditionValue = '100';
                    val.waitAllVotes = true;
                }
                else if (ruleItem.value === 'Backward' || ruleItem.value === 'Abort') {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'byNumber';
                    val.conditionValue = '1';
                    val.waitAllVotes = true;
                }
                else {
                    val.id = ProcessDeUtil.GenerateElementId();
                    val.conclusionValue = ruleItem.value;
                    val.conclusionName = ruleItem.text;
                    val.calculateType = 'null';
                    val.conditionValue = '0';
                    val.waitAllVotes = true;
                }
                this.data.push(val);
            }
        }
    }
    // 给个名字
    /**
     * @param {?} signRuleEntity
     * @return {?}
     */
    setName1(signRuleEntity) {
        if (signRuleEntity && signRuleEntity.length > 0) {
            for (var i = 0; i < signRuleEntity.length; i++) {
                if (signRuleEntity[i].conclusionValue === 'Forward') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.forward');
                }
                else if (signRuleEntity[i].conclusionValue === 'Backward') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.backward');
                }
                else if (signRuleEntity[i].conclusionValue === 'Abort') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.abort');
                }
            }
        }
        return signRuleEntity;
    }
    /**
     * @return {?}
     */
    clickOK() {
        this.grid.endCellEdit();
        if (this.data.length === 0) {
            this.message.warning(this.localePipe.transform('component.signRule.notEmpty'));
        }
        else {
            /** @type {?} */
            const object = { value: this.data, parameters: null };
            this.submitModal.emit(object);
        }
    }
    /**
     * @return {?}
     */
    clickOK1() {
        this.grid.endCellEdit();
        if (this.data.length === 0) {
            this.message.warning(this.localePipe.transform('component.signRule.notEmpty'));
        }
        else {
            /** @type {?} */
            let counterSignRules = new Array();
            this.data.forEach((/**
             * @param {?} d
             * @return {?}
             */
            d => {
                /** @type {?} */
                let counterSignRule = new CounterSignRule(this.bpmnModel);
                counterSignRule.CalculateType = d.calculateType;
                counterSignRule.ConclusionValue = d.conclusionValue;
                counterSignRule.ConditionValue = d.conditionValue;
                counterSignRule.WaitAllVotes = d.waitAllVotes;
                counterSignRule.CompletionCondition = new Condition(this.bpmnModel);
                counterSignRule.CompletionCondition.Value = d.completionCondition;
                counterSignRules.push(counterSignRule);
            }));
            // let counterSignRules = new CounterSignRule(this.bpmnModel);
            this.submitModal.emit(counterSignRules);
        }
    }
    /**
     * @return {?}
     */
    clickCancel() {
        this.closeModal.emit();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    editConditon(e) {
        // this.exprService.clearContext();
        /** @type {?} */
        const context = new Array();
        if (this.editCondition) {
            if (this.designerUIState.multiCounterSignVariables.length > 0) {
                for (const variable of this.designerUIState.multiCounterSignVariables) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.key === variable.key))) {
                        context.push(variable);
                    }
                }
            }
            if (context.length > 0) {
                for (const v of context) {
                    this.exprService.addContext(v);
                }
            }
        }
        else {
            if (this.counterSignVariables && this.counterSignVariables.length > 0) {
                for (const variable of this.counterSignVariables) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.key === variable.key))) {
                        context.push(variable);
                    }
                }
            }
            if (this.designerUIState.subActivityContext.length > 0) {
                for (const variable of this.designerUIState.subActivityContext) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.key === variable.key))) {
                        context.push(variable);
                    }
                }
            }
            if (context.length > 0) {
                for (const v of context) {
                    this.exprService.addContext(v);
                }
            }
        }
        this.exprService.setEditPattern(ExprEditMode.Advanced); // 表达式展现模式：默认高级版（会签规则需要上下文变量）
        this.exprService.addExpressionText(e.instance.value);
        this.exprService.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        (cond) => {
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                this.exprService.exprEntity.contextEntities = this.exprService.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y.key === x.key))));
            }
        }));
    }
    /**
     * 选中审批项
     * @return {?}
     */
    approvalSelect() {
        /** @type {?} */
        const selections = this.apvlItemsGrid.checkeds;
        if (selections && selections.length > 0) {
            for (const selection of selections) {
                /** @type {?} */
                const signRule = new SignRuleEntity();
                signRule.id = ProcessDeUtil.GenerateElementId();
                signRule.conclusionValue = selection.data.value;
                signRule.conclusionName = selection.data.text;
                this.data.push(signRule);
            }
            this.grid.loadData(this.data);
            this.apvlItemDialog.close();
        }
        else {
            this.message.info(this.localePipe.transform('component.signRule.pleaseSelect'));
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    endEdit(e) {
        this.curValue = e.rowData;
        // 自定义会签规则和预置会签规则互斥
        if (this.preValue.completionCondition !== this.curValue.completionCondition &&
            !(this.isEmpty(this.preValue.completionCondition) && this.isEmpty(this.curValue.completionCondition))) {
            this.data[e.rowIndex].calculateType = 'null',
                this.data[e.rowIndex].conditionValue = '0';
            this.data[e.rowIndex].waitAllVotes = false;
        }
        else if (this.preValue.calculateType !== this.curValue.calculateType ||
            this.preValue.conditionValue !== this.curValue.conditionValue ||
            this.preValue.waitAllVotes !== this.curValue.waitAllVotes) {
            this.data[e.rowIndex].completionCondition = null;
        }
        if (e.column.field === 'conditionValue' && this.data[e.rowIndex].calculateType === 'byProportion'
            && Number.parseInt(e.value) > 100) {
            this.message.info(this.localePipe.transform('component.signRule.maxConditionValue'));
            this.data[e.rowIndex].conditionValue = '100';
        }
        else if (e.column.field === 'conditionValue' && Number.parseInt(e.value) < 0) {
            this.message.info(this.localePipe.transform('component.signRule.minConditionValue'));
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if ((e.column.field === 'calculateType' || e.column.field === 'conditionValue') && (this.data[e.rowIndex].calculateType === 'oneVote' ||
            this.data[e.rowIndex].calculateType === 'fullVote') && Number.parseInt(this.data[e.rowIndex].conditionValue) !== 0) {
            this.message.info(this.localePipe.transform('component.signRule.noConditional'));
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if (e.column.field === 'calculateType' && this.data[e.rowIndex].calculateType === 'byProportion' &&
            Number.parseInt(this.data[e.rowIndex].conditionValue) > 100) {
            this.message.info(this.localePipe.transform('component.signRule.maxConditionValue'));
            this.data[e.rowIndex].conditionValue = '100';
        }
    }
    /**
     * @param {?} s
     * @return {?}
     */
    isEmpty(s) {
        if (!s || s.length == 0) {
            return true;
        }
        else {
            return false;
        }
    }
}
SignRuleComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-sign-rule',
                template: "  <div class=\"f-page\">\r\n    <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n        <farris-datagrid #grid [data]=\"data\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n          [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n          [multiSelect]=\"false\" [afterEdit]='afterEdit' (endEdit)=\"endEdit($event)\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </div>\r\n  </div>\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"deleteRow()\">{{'component.signRule.deleteRow' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #iconSelectFooter1>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"deleteRow1()\">{{'component.signRule.deleteRow' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK1()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n\r\n<farris-dialog #approvalItemDialog [buttons]=\"buttonRef\" [width]=\"700\" [height]=\"520\" title=\"{{'component.signRule.approvalOptions'| wfLocale}}\">\r\n  <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100 m-2\">\r\n      <farris-datagrid #approvalTable [columns]=\"approvalCols\" [data]=\"approvalItems\" [idField]=\"'value'\"\r\n        [fit]=\"true\" [fitColumns]=\"true\" [pagination]='false' [multiSelect]=\"true\"\r\n        [showCheckbox]=\"true\" [multiSelect]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\">\r\n      </farris-datagrid>\r\n  </div>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"approvalItemDialog.close()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button class=\"btn btn-sm btn-primary px-3 mx-2\" (click)=\"approvalSelect()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n",
                providers: [
                    WfLocalePipe,
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
SignRuleComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: MessagerService },
    { type: ExpressionService },
    { type: ProcessDesignerUIState },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
    { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
    { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
    { type: WfLocalePipe, decorators: [{ type: Optional }] }
];
SignRuleComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    closeModal: [{ type: Output }],
    submitModal: [{ type: Output }],
    value: [{ type: Input }],
    value1: [{ type: Input }],
    editorParams: [{ type: Input }],
    modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
    modalFooter1: [{ type: ViewChild, args: ['iconSelectFooter1',] }],
    apvlItemsGrid: [{ type: ViewChild, args: ['approvalTable',] }],
    apvlItemDialog: [{ type: ViewChild, args: ['approvalItemDialog',] }],
    grid: [{ type: ViewChild, args: ['grid',] }]
};
if (false) {
    /** @type {?} */
    SignRuleComponent.prototype.cls;
    /** @type {?} */
    SignRuleComponent.prototype.closeModal;
    /** @type {?} */
    SignRuleComponent.prototype.submitModal;
    /** @type {?} */
    SignRuleComponent.prototype.editorParams;
    /** @type {?} */
    SignRuleComponent.prototype.modalFooter;
    /** @type {?} */
    SignRuleComponent.prototype.modalFooter1;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemsGrid;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemDialog;
    /** @type {?} */
    SignRuleComponent.prototype.grid;
    /** @type {?} */
    SignRuleComponent.prototype.modalConfig;
    /** @type {?} */
    SignRuleComponent.prototype.editCondition;
    /** @type {?} */
    SignRuleComponent.prototype.data;
    /** @type {?} */
    SignRuleComponent.prototype.calculationMethods;
    /** @type {?} */
    SignRuleComponent.prototype.counterSignVariables;
    /** @type {?} */
    SignRuleComponent.prototype.bpmnModel;
    /**
     * **** 审批项帮助参数 ********************************************************
     * @type {?}
     */
    SignRuleComponent.prototype.approvalCols;
    /** @type {?} */
    SignRuleComponent.prototype.approvalItems;
    /** @type {?} */
    SignRuleComponent.prototype.approvalItems1;
    /**
     * ********************************
     * @type {?}
     */
    SignRuleComponent.prototype.columns;
    /** @type {?} */
    SignRuleComponent.prototype.preValue;
    /** @type {?} */
    SignRuleComponent.prototype.curValue;
    /**
     * 结束编辑前事件
     * @type {?}
     */
    SignRuleComponent.prototype.afterEdit;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.exprService;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.localePipe;
}
export class SignRuleConverter {
    /**
     * @param {?} localePipe
     */
    constructor(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    convertTo(data) {
        // 会签规则只要启用就有默认值，所以始终置为'已设置';
        return this.localePipe.transform("component.signRule.set");
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    SignRuleConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbi1ydWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvc2lnbi1ydWxlL3NpZ24tcnVsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEssT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBYSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUM1RSxPQUFPLEVBQWMsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDN0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBRWhHLE9BQU8sRUFBYSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRSxPQUFPLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxNQUFN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LGNBQWMsR0FBRyxLQUFLLENBQUM7U0FDOUM7YUFBTSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLGdCQUFnQixJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM5RSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLENBQUM7WUFDckYsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsY0FBYyxHQUFHLEdBQUcsQ0FBQztTQUM1QzthQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxlQUFlLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGFBQWEsS0FBSyxTQUFTO1lBQzVJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGFBQWEsS0FBSyxVQUFVLENBQUMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNsSCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUM7WUFDakYsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsY0FBYyxHQUFHLEdBQUcsQ0FBQztTQUM1QzthQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssZUFBZSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGFBQWEsS0FBSyxjQUFjO1lBQ3ZHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxFQUFFO1lBQzNELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHNDQUFzQyxDQUFDLENBQUMsQ0FBQztZQUNyRixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1NBQzVDO0lBQ0wsQ0FBQzs7Ozs7SUFFRCxPQUFPLENBQUMsQ0FBUztRQUNmLElBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDdEIsT0FBTyxJQUFJLENBQUM7U0FDYjthQUFLO1lBQ0osT0FBTyxLQUFLLENBQUM7U0FDZDtJQUNILENBQUM7OztZQXpYRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGVBQWU7Z0JBQ3pCLHFnRkFBeUM7Z0JBRXpDLFNBQVMsRUFBRTtvQkFDUixZQUFZO2lCQUNkOzthQUNGOzs7O1lBdEJRLFdBQVc7WUFJWCxlQUFlO1lBREQsaUJBQWlCO1lBRS9CLHNCQUFzQjtZQVB5RSxpQkFBaUIsdUJBaUpwSCxRQUFRO3lDQUNSLE1BQU0sU0FBQyxTQUFTOzRDQUNoQixNQUFNLFNBQUMsaUJBQWlCO1lBdklELFlBQVksdUJBd0luQyxRQUFROzs7a0JBMUhWLFdBQVcsU0FBQyxPQUFPO3lCQUVuQixNQUFNOzBCQUNOLE1BQU07b0JBSU4sS0FBSztxQkFvQkwsS0FBSzsyQkFvQkwsS0FBSzswQkFDTCxTQUFTLFNBQUMsa0JBQWtCOzJCQUM1QixTQUFTLFNBQUMsbUJBQW1COzRCQUM3QixTQUFTLFNBQUMsZUFBZTs2QkFDekIsU0FBUyxTQUFDLG9CQUFvQjttQkFDOUIsU0FBUyxTQUFDLE1BQU07Ozs7SUFwRGpCLGdDQUNxQzs7SUFDckMsdUNBQStDOztJQUMvQyx3Q0FBZ0Q7O0lBNENoRCx5Q0FBZ0M7O0lBQ2hDLHdDQUE2RDs7SUFDN0QseUNBQStEOztJQUMvRCwwQ0FBNkQ7O0lBQzdELDJDQUFpRTs7SUFDakUsaUNBQTJDOztJQUUzQyx3Q0FLRTs7SUFDRiwwQ0FBK0I7O0lBQy9CLGlDQUE0Qjs7SUFDNUIsK0NBSUU7O0lBQ0YsaURBQXVDOztJQUV2QyxzQ0FBc0Q7Ozs7O0lBRXRELHlDQUMyRjs7SUFDM0YsMENBQTBCOztJQUUxQiwyQ0FJRTs7Ozs7SUFFRixvQ0ErQkU7O0lBZ05GLHFDQUF5Qjs7SUFDekIscUNBQXlCOzs7OztJQUl6QixzQ0FHQzs7Ozs7SUFyTkMsd0NBQWdDOzs7OztJQUNoQyxvQ0FBZ0M7Ozs7O0lBQ2hDLHdDQUFzQzs7Ozs7SUFDdEMsNENBQStDOzs7OztJQUMvQyxnQ0FBMEM7Ozs7O0lBQzFDLHFDQUEyQzs7Ozs7SUFDM0Msc0NBQWlEOzs7OztJQUNqRCx1Q0FBNEM7O0FBMFBoRCxNQUFNLE9BQU8saUJBQWlCOzs7O0lBQzVCLFlBQ1UsVUFBd0I7UUFBeEIsZUFBVSxHQUFWLFVBQVUsQ0FBYztJQUM5QixDQUFDOzs7OztJQUVMLFNBQVMsQ0FBQyxJQUFXO1FBQ25CLDZCQUE2QjtRQUMzQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHdCQUF3QixDQUFDLENBQUM7SUFDL0QsQ0FBQztDQUNGOzs7Ozs7SUFQRyx1Q0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgT3B0aW9uYWwsIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3QsIExPQ0FMRV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy9pZGUtcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBGb3JtQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgU2lnblJ1bGVFbnRpdHkgfSBmcm9tICcuL2VudGl0ZXMvc2lnbi1ydWxlLmVudGl0eSc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlLCBFeHByZXNzaW9uU2VydmljZSwgVmFyRW50aXR5IH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IERhdGFDb2x1bW4sIERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZVV0aWwgfSBmcm9tICcuLi8uLi9kb21haW4vcHJvY2Vzcy1kZS11dGlsJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuaW1wb3J0IHsgQnBtbk1vZGVsLCBCcG1uTW9kZWxIZWxwZXIgfSBmcm9tICdAZWRwLXBtZi9icG1uLW1vZGVsJztcclxuaW1wb3J0IHsgQ29uZGl0aW9uLCBDb3VudGVyU2lnblJ1bGUgfSBmcm9tICdAZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWwnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtc2lnbi1ydWxlJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vc2lnbi1ydWxlLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9zaWduLXJ1bGUuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgIFdmTG9jYWxlUGlwZSxcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTaWduUnVsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpXHJcbiAgY2xzID0gJ2ZhcnJpcy1tYWluLWFyZWEgZmxleC1jb2x1bW4nO1xyXG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHN1Ym1pdE1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG5cclxuICAvL+S8muetvuinhOWImeaJk+W8gOmhtemdolxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlKHJ1bGVzOiBhbnlbXSkge1xyXG4gICAgaWYgKHJ1bGVzICYmIHJ1bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBydWxlIG9mIHJ1bGVzKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gbmV3IFNpZ25SdWxlRW50aXR5KCk7XHJcbiAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlLkNvbmNsdXNpb25WYWx1ZTtcclxuICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlLkNvbmNsdXNpb25OYW1lO1xyXG4gICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gcnVsZS5DYWxjdWxhdGVUeXBlID8gcnVsZS5DYWxjdWxhdGVUeXBlIDogJ251bGwnO1xyXG4gICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9IHJ1bGUuQ29uZGl0aW9uVmFsdWUgPyBydWxlLkNvbmRpdGlvblZhbHVlIDogMDtcclxuICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gcnVsZS5XYWl0QWxsVm90ZXMgPyBydWxlLldhaXRBbGxWb3RlcyA6IGZhbHNlO1xyXG4gICAgICAgIHZhbC5jb21wbGV0aW9uQ29uZGl0aW9uID0gcnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uID8gcnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uLl92YWx1ZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHsgLy8g5aaC5p6c5qih5Z6L5LiK5rKh5pyJ5Lya562+6KeE5YiZ77yM6Ieq5Yqo5bim5YWl5omA5pyJ55qE5a6h5om56YCJ6aG5XHJcbiAgICAgIHRoaXMuZGVsZXRlUm93KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL+WkmuWunuS+i+aJk+W8gOWujOaIkOinhOWImemhtemdolxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHZhbHVlMShydWxlczogYW55W10pIHtcclxuICAgIHRoaXMuZWRpdENvbmRpdGlvbiA9IHRydWU7XHJcbiAgICBpZiAocnVsZXMgJiYgcnVsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcnVsZXMpIHtcclxuICAgICAgICBjb25zdCB2YWwgPSBuZXcgU2lnblJ1bGVFbnRpdHkoKTtcclxuICAgICAgICB2YWwuaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZS5Db25jbHVzaW9uVmFsdWU7XHJcbiAgICAgICAgLy8gdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZS5jb25jbHVzaW9uTmFtZTtcclxuICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9IHJ1bGUuQ2FsY3VsYXRlVHlwZSA/IHJ1bGUuQ2FsY3VsYXRlVHlwZSA6ICdudWxsJztcclxuICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSBydWxlLkNvbmRpdGlvblZhbHVlID8gcnVsZS5Db25kaXRpb25WYWx1ZSA6IDA7XHJcbiAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHJ1bGUuV2FpdEFsbFZvdGVzID8gcnVsZS5XYWl0QWxsVm90ZXMgOiBmYWxzZTtcclxuICAgICAgICB2YWwuY29tcGxldGlvbkNvbmRpdGlvbiA9IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbiA/IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbi5WYWx1ZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRhdGEgPSB0aGlzLnNldE5hbWUxKHRoaXMuZGF0YSk7XHJcbiAgICB9IGVsc2UgeyAvLyDlpoLmnpzmqKHlnovkuIrmsqHmnInkvJrnrb7op4TliJnvvIzoh6rliqjluKblhaXmiYDmnInnmoTlrqHmibnpgInpoblcclxuICAgICAgdGhpcy5kZWxldGVSb3cxKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2ljb25TZWxlY3RGb290ZXIxJykgbW9kYWxGb290ZXIxOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2FwcHJvdmFsVGFibGUnKSBhcHZsSXRlbXNHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdhcHByb3ZhbEl0ZW1EaWFsb2cnKSBhcHZsSXRlbURpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2dyaWQnKSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmNvdW50ZXJzaWduUnVsZXMnKSxcclxuICAgIHdpZHRoOiA4MDAsXHJcbiAgICBoZWlnaHQ6IDUyMCxcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuICBlZGl0Q29uZGl0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgZGF0YTogU2lnblJ1bGVFbnRpdHlbXSA9IFtdO1xyXG4gIGNhbGN1bGF0aW9uTWV0aG9kczogYW55W10gPSBbXHJcbiAgICB7IHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5ieU51bWJlcicpLCB2YWx1ZTogJ2J5TnVtYmVyJyB9LFxyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuYnlQcm9wb3J0aW9uJyksIHZhbHVlOiAnYnlQcm9wb3J0aW9uJyB9LFxyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuY3VzdG9tQ29uZGl0aW9ucycpLCB2YWx1ZTogJ251bGwnIH0sXHJcbiAgXTtcclxuICBjb3VudGVyU2lnblZhcmlhYmxlczogVmFyRW50aXR5W10gPSBbXTtcclxuXHJcbiAgYnBtbk1vZGVsOiBCcG1uTW9kZWwgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5icG1uTW9kZWw7XHJcbiAgLyoqKioqKiog5a6h5om56aG55biu5Yqp5Y+C5pWwICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICBhcHByb3ZhbENvbHMgPSBbeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLnZhbHVlJyksIGZpZWxkOiAndmFsdWUnLCB3aWR0aDogODAgfSxcclxuICB7IHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUudGV4dCcpLCBmaWVsZDogJ3RleHQnLCB3aWR0aDogOTAgfV07XHJcbiAgYXBwcm92YWxJdGVtczogYW55W10gPSBbXTtcclxuXHJcbiAgYXBwcm92YWxJdGVtczE6IGFueVtdID0gW1xyXG4gICAgeyB2YWx1ZTogJ0ZvcndhcmQnLCAgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnbXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzTGlzdC5mb3J3YXJkJykgfSxcclxuICAgIHsgdmFsdWU6ICdCYWNrd2FyZCcsIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlc0xpc3QuYmFja3dhcmQnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ0Fib3J0JywgIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlc0xpc3QuYWJvcnQnKSB9XHJcbiAgXTtcclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgZmllbGQ6ICdjb25jbHVzaW9uTmFtZScsIHdpZHRoOiAyNSwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5jb25jbHVzaW9uTmFtZScpIH0sXHJcbiAgICB7IGZpZWxkOiAnY29uY2x1c2lvblZhbHVlJywgd2lkdGg6IDI1LCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmNvbmNsdXNpb25WYWx1ZScpIH0sXHJcbiAgICB7IGZpZWxkOiAnY2FsY3VsYXRlVHlwZScsIHdpZHRoOiA0MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5jYWxjdWxhdGVUeXBlJyksXHJcbiAgICAgIGZvcm1hdHRlcjoge3R5cGU6ICdlbnVtJyxvcHRpb25zOiB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ3RleHQnLCBkYXRhOiB0aGlzLmNhbGN1bGF0aW9uTWV0aG9kcyB9fSxcclxuICAgICAgZWRpdG9yOiB7dHlwZTogRWRpdG9yVHlwZXMuQ09NQk9MSVNULG9wdGlvbnM6IHsgdmFsdWVGaWVsZDogJ3ZhbHVlJywgdGV4dEZpZWxkOiAndGV4dCcsIGRhdGE6IHRoaXMuY2FsY3VsYXRpb25NZXRob2RzLCBpZEZpZWxkOiAndmFsdWUnLCBwYW5lbEhlaWdodDogJ2F1dG8nIH19XHJcbiAgICB9LFxyXG4gICAgeyBmaWVsZDogJ2NvbmRpdGlvblZhbHVlJywgd2lkdGg6IDI1LCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmNvbmRpdGlvblZhbHVlJyksXHJcbiAgICAgIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5OVU1CRVJCT1gsIG9wdGlvbnM6IHt9IH0sXHJcbiAgICAgIGZvcm1hdHRlcjp7dHlwZTogJ251bWJlcicsIG9wdGlvbnM6IHsgcHJlY2lzaW9uOiAwLCBtaW46IDAgfSB9XHJcbiAgICB9LFxyXG4gICAgeyBmaWVsZDogJ3dhaXRBbGxWb3RlcycsIHdpZHRoOiAzNSwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS53YWl0QWxsVm90ZXMnKSxcclxuICAgICAgZWRpdG9yOiB7IHR5cGU6IEVkaXRvclR5cGVzLlNXSVRDSCwgb3B0aW9uczoge30gfSxcclxuICAgICAgZm9ybWF0dGVyOiB7IHR5cGU6ICdib29sZWFuJywgb3B0aW9uczogeyB0cnVlVGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLnllcycpLCBmYWxzZVRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5ubycpIH19XHJcbiAgICB9LFxyXG4gICAgeyBmaWVsZDogJ2NvbXBsZXRpb25Db25kaXRpb24nLCB3aWR0aDogNTAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuY3VzdG9tQ29uZGl0aW9ucycpLFxyXG4gICAgICBlZGl0b3I6IHtcclxuICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGNsaWNrSGFuZGxlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRDb25kaXRvbihlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjbGVhcjogKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsZWFyJywgZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBleHByU2VydmljZTogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGRlc2lnbmVyVUlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBJbmplY3QoTE9DQUxFX0lEKSBwcml2YXRlIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBASW5qZWN0KFdGX0xBTkdfUkVTT1VSQ0VTKSBwcml2YXRlIHJlc291cmNlczogYW55LFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBsb2NhbGVQaXBlOiBXZkxvY2FsZVBpcGUsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSB0aGlzLmxvY2FsZVBpcGUgfHwgbmV3IFdmTG9jYWxlUGlwZShsb2NhbGVJZCwgcmVzb3VyY2VzKTtcclxuICAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuY291bnRlclNpZ25WYXJpYWJsZXMgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5jb3VudGVyU2lnblZhcmlhYmxlcyB8fCBbXTtcclxuICAgIHRoaXMuYXBwcm92YWxJdGVtcyA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmFwcHJvdmFsSXRlbXMgfHwgW107XHJcbiAgfVxyXG4gIC8vIOmHjee9ruWKqOS9nFxyXG4gIGRlbGV0ZVJvdygpIHtcclxuICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgY29uc3QgcnVsZUl0ZW1zID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYXBwcm92YWxJdGVtcyB8fCBbXTtcclxuICAgIGlmIChydWxlSXRlbXMgJiYgcnVsZUl0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBydWxlSXRlbSBvZiBydWxlSXRlbXMpIHtcclxuICAgICAgICBjb25zdCB2YWwgPSBuZXcgU2lnblJ1bGVFbnRpdHkoKTtcclxuICAgICAgICBpZiAocnVsZUl0ZW0udmFsdWUgPT09ICdQYXNzJykge1xyXG4gICAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZUl0ZW0udGV4dDtcclxuICAgICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gJ2J5UHJvcG9ydGlvbic7XHJcbiAgICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSAnMTAwJztcclxuICAgICAgICAgIHZhbC53YWl0QWxsVm90ZXMgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocnVsZUl0ZW0udmFsdWUgPT09ICdCYWNrJykge1xyXG4gICAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZUl0ZW0udGV4dDtcclxuICAgICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gJ2J5TnVtYmVyJztcclxuICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcxJztcclxuICAgICAgICAgIHZhbC53YWl0QWxsVm90ZXMgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWwuaWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgdmFsLmNhbGN1bGF0ZVR5cGUgPSAnbnVsbCc7XHJcbiAgICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSAnMCc7XHJcbiAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgICAvLyDph43nva7liqjkvZxcclxuICAgIGRlbGV0ZVJvdzEoKSB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICBpZiAodGhpcy5hcHByb3ZhbEl0ZW1zMSAmJiB0aGlzLmFwcHJvdmFsSXRlbXMxLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHJ1bGVJdGVtIG9mIHRoaXMuYXBwcm92YWxJdGVtczEpIHtcclxuICAgICAgICAgIGNvbnN0IHZhbCA9IG5ldyBTaWduUnVsZUVudGl0eSgpO1xyXG4gICAgICAgICAgaWYgKHJ1bGVJdGVtLnZhbHVlID09PSAnRm9yd2FyZCcpIHtcclxuICAgICAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGVJdGVtLnRleHQ7XHJcbiAgICAgICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gJ2J5UHJvcG9ydGlvbic7XHJcbiAgICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcxMDAnO1xyXG4gICAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocnVsZUl0ZW0udmFsdWUgPT09ICdCYWNrd2FyZCcgfHwgcnVsZUl0ZW0udmFsdWUgPT09ICdBYm9ydCcpIHtcclxuICAgICAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGVJdGVtLnRleHQ7XHJcbiAgICAgICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gJ2J5TnVtYmVyJztcclxuICAgICAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gJzEnO1xyXG4gICAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdudWxsJztcclxuICAgICAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gJzAnO1xyXG4gICAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgIC8vIOe7meS4quWQjeWtl1xyXG4gICAgIHNldE5hbWUxKHNpZ25SdWxlRW50aXR5OlNpZ25SdWxlRW50aXR5W10pIHtcclxuICAgICAgaWYgKHNpZ25SdWxlRW50aXR5ICYmIHNpZ25SdWxlRW50aXR5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpZ25SdWxlRW50aXR5Lmxlbmd0aDtpKyspIHtcclxuICAgICAgICAgIGlmIChzaWduUnVsZUVudGl0eVtpXS5jb25jbHVzaW9uVmFsdWUgPT09ICdGb3J3YXJkJykge1xyXG4gICAgICAgICAgICBzaWduUnVsZUVudGl0eVtpXS5jb25jbHVzaW9uTmFtZSA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlc0xpc3QuZm9yd2FyZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChzaWduUnVsZUVudGl0eVtpXS5jb25jbHVzaW9uVmFsdWUgPT09ICdCYWNrd2FyZCcpIHtcclxuICAgICAgICAgICAgc2lnblJ1bGVFbnRpdHlbaV0uY29uY2x1c2lvbk5hbWUgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdtdWx0aUluc3RhbmNlTG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXNMaXN0LmJhY2t3YXJkJyk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHNpZ25SdWxlRW50aXR5W2ldLmNvbmNsdXNpb25WYWx1ZSA9PT0gJ0Fib3J0Jyl7XHJcbiAgICAgICAgICAgIHNpZ25SdWxlRW50aXR5W2ldLmNvbmNsdXNpb25OYW1lID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnbXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzTGlzdC5hYm9ydCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2lnblJ1bGVFbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS53YXJuaW5nKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5ub3RFbXB0eScpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG9iamVjdCA9IHsgdmFsdWU6IHRoaXMuZGF0YSwgcGFyYW1ldGVyczogbnVsbCB9O1xyXG4gICAgICB0aGlzLnN1Ym1pdE1vZGFsLmVtaXQob2JqZWN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsaWNrT0sxKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2Uud2FybmluZyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubm90RW1wdHknKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgY291bnRlclNpZ25SdWxlcyA9IG5ldyBBcnJheTxDb3VudGVyU2lnblJ1bGU+KCk7XHJcbiAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgIGxldCBjb3VudGVyU2lnblJ1bGUgPSBuZXcgQ291bnRlclNpZ25SdWxlKHRoaXMuYnBtbk1vZGVsKTtcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGUuQ2FsY3VsYXRlVHlwZSA9IGQuY2FsY3VsYXRlVHlwZTtcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGUuQ29uY2x1c2lvblZhbHVlID0gZC5jb25jbHVzaW9uVmFsdWU7XHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlLkNvbmRpdGlvblZhbHVlID0gZC5jb25kaXRpb25WYWx1ZVxyXG4gICAgICAgIGNvdW50ZXJTaWduUnVsZS5XYWl0QWxsVm90ZXMgPSBkLndhaXRBbGxWb3RlcztcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24odGhpcy5icG1uTW9kZWwpO1xyXG4gICAgICAgIGNvdW50ZXJTaWduUnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uLlZhbHVlID0gZC5jb21wbGV0aW9uQ29uZGl0aW9uO1xyXG4gICAgICAgIGNvdW50ZXJTaWduUnVsZXMucHVzaChjb3VudGVyU2lnblJ1bGUpO1xyXG4gICAgICB9KVxyXG4gICAgICAvLyBsZXQgY291bnRlclNpZ25SdWxlcyA9IG5ldyBDb3VudGVyU2lnblJ1bGUodGhpcy5icG1uTW9kZWwpO1xyXG5cclxuICAgICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KGNvdW50ZXJTaWduUnVsZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgZWRpdENvbmRpdG9uKGU6IGFueSkge1xyXG4gICAgLy8gdGhpcy5leHByU2VydmljZS5jbGVhckNvbnRleHQoKTtcclxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmKHRoaXMuZWRpdENvbmRpdGlvbikge1xyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUubXVsdGlDb3VudGVyU2lnblZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5tdWx0aUNvdW50ZXJTaWduVmFyaWFibGVzKSB7XHJcbiAgICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgICAgdGhpcy5leHByU2VydmljZS5hZGRDb250ZXh0KHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfWVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5jb3VudGVyU2lnblZhcmlhYmxlcyAmJiB0aGlzLmNvdW50ZXJTaWduVmFyaWFibGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuY291bnRlclNpZ25WYXJpYWJsZXMpIHtcclxuICAgICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgICB0aGlzLmV4cHJTZXJ2aWNlLmFkZENvbnRleHQodik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gICAgdGhpcy5leHByU2VydmljZS5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQWR2YW5jZWQpOyAvLyDooajovr7lvI/lsZXnjrDmqKHlvI/vvJrpu5jorqTpq5jnuqfniYjvvIjkvJrnrb7op4TliJnpnIDopoHkuIrkuIvmloflj5jph4/vvIlcclxuICAgIHRoaXMuZXhwclNlcnZpY2UuYWRkRXhwcmVzc2lvblRleHQoZS5pbnN0YW5jZS52YWx1ZSk7XHJcbiAgICB0aGlzLmV4cHJTZXJ2aWNlLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGNvbmQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGNvbmQpO1xyXG4gICAgICBlLmluc3RhbmNlLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByU2VydmljZS5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcyA9IHRoaXMuZXhwclNlcnZpY2UuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieS4reWuoeaJuemhuVxyXG4gICAqL1xyXG4gIGFwcHJvdmFsU2VsZWN0KCkge1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uczogYW55W10gPSB0aGlzLmFwdmxJdGVtc0dyaWQuY2hlY2tlZHM7XHJcbiAgICBpZiAoc2VsZWN0aW9ucyAmJiBzZWxlY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzZWxlY3Rpb24gb2Ygc2VsZWN0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHNpZ25SdWxlID0gbmV3IFNpZ25SdWxlRW50aXR5KCk7XHJcbiAgICAgICAgc2lnblJ1bGUuaWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgc2lnblJ1bGUuY29uY2x1c2lvblZhbHVlID0gc2VsZWN0aW9uLmRhdGEudmFsdWU7XHJcbiAgICAgICAgc2lnblJ1bGUuY29uY2x1c2lvbk5hbWUgPSBzZWxlY3Rpb24uZGF0YS50ZXh0O1xyXG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKHNpZ25SdWxlKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmdyaWQubG9hZERhdGEodGhpcy5kYXRhKTtcclxuICAgICAgdGhpcy5hcHZsSXRlbURpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLnBsZWFzZVNlbGVjdCcpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBwcmVWYWx1ZTogU2lnblJ1bGVFbnRpdHk7XHJcbiAgY3VyVmFsdWU6IFNpZ25SdWxlRW50aXR5O1xyXG4vKipcclxuICog57uT5p2f57yW6L6R5YmN5LqL5Lu2XHJcbiAqL1xyXG4gIGFmdGVyRWRpdCA9IChyb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnksIGNvbHVtbj86IERhdGFDb2x1bW4pID0+IHtcclxuICAgIHRoaXMucHJlVmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvd0RhdGEpKTtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIGVuZEVkaXQoZTogYW55KSB7XHJcbiAgICB0aGlzLmN1clZhbHVlID0gZS5yb3dEYXRhO1xyXG4gICAgLy8g6Ieq5a6a5LmJ5Lya562+6KeE5YiZ5ZKM6aKE572u5Lya562+6KeE5YiZ5LqS5palXHJcbiAgICBpZih0aGlzLnByZVZhbHVlLmNvbXBsZXRpb25Db25kaXRpb24gIT09IHRoaXMuY3VyVmFsdWUuY29tcGxldGlvbkNvbmRpdGlvbiAmJiBcclxuICAgICAgISh0aGlzLmlzRW1wdHkodGhpcy5wcmVWYWx1ZS5jb21wbGV0aW9uQ29uZGl0aW9uKSAmJiB0aGlzLmlzRW1wdHkodGhpcy5jdXJWYWx1ZS5jb21wbGV0aW9uQ29uZGl0aW9uKSkpIHtcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNhbGN1bGF0ZVR5cGUgPSAnbnVsbCcsXHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLndhaXRBbGxWb3RlcyA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnByZVZhbHVlLmNhbGN1bGF0ZVR5cGUgIT09IHRoaXMuY3VyVmFsdWUuY2FsY3VsYXRlVHlwZSB8fFxyXG4gICAgICB0aGlzLnByZVZhbHVlLmNvbmRpdGlvblZhbHVlICE9PSB0aGlzLmN1clZhbHVlLmNvbmRpdGlvblZhbHVlIHx8XHJcbiAgICAgIHRoaXMucHJlVmFsdWUud2FpdEFsbFZvdGVzICE9PSB0aGlzLmN1clZhbHVlLndhaXRBbGxWb3Rlcykge1xyXG4gICAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb21wbGV0aW9uQ29uZGl0aW9uID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZihlLmNvbHVtbi5maWVsZCA9PT0gJ2NvbmRpdGlvblZhbHVlJyAmJiB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ2J5UHJvcG9ydGlvbidcclxuICAgICYmIE51bWJlci5wYXJzZUludChlLnZhbHVlKSA+IDEwMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubWF4Q29uZGl0aW9uVmFsdWUnKSk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcxMDAnO1xyXG4gICAgfSBlbHNlIGlmIChlLmNvbHVtbi5maWVsZCA9PT0gJ2NvbmRpdGlvblZhbHVlJyAmJiBOdW1iZXIucGFyc2VJbnQoZS52YWx1ZSkgPCAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5taW5Db25kaXRpb25WYWx1ZScpKTtcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNvbmRpdGlvblZhbHVlID0gJzAnO1xyXG4gICAgfSBlbHNlIGlmICgoZS5jb2x1bW4uZmllbGQgPT09ICdjYWxjdWxhdGVUeXBlJyB8fCBlLmNvbHVtbi5maWVsZCA9PT0gJ2NvbmRpdGlvblZhbHVlJykgJiYgKHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jYWxjdWxhdGVUeXBlID09PSAnb25lVm90ZScgfHxcclxuICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jYWxjdWxhdGVUeXBlID09PSAnZnVsbFZvdGUnKSAmJiBOdW1iZXIucGFyc2VJbnQodGhpcy5kYXRhW2Uucm93SW5kZXhdLmNvbmRpdGlvblZhbHVlKSAhPT0gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubm9Db25kaXRpb25hbCcpKTtcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNvbmRpdGlvblZhbHVlID0gJzAnO1xyXG4gICAgfSBlbHNlIGlmIChlLmNvbHVtbi5maWVsZCA9PT0gJ2NhbGN1bGF0ZVR5cGUnICYmIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jYWxjdWxhdGVUeXBlID09PSAnYnlQcm9wb3J0aW9uJyAmJlxyXG4gICAgTnVtYmVyLnBhcnNlSW50KHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSkgPiAxMDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLm1heENvbmRpdGlvblZhbHVlJykpO1xyXG4gICAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29uZGl0aW9uVmFsdWUgPSAnMTAwJztcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgaXNFbXB0eShzOiBzdHJpbmcpIHtcclxuICAgIGlmKCFzIHx8IHMubGVuZ3RoID09IDApIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2lnblJ1bGVDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7IH1cclxuXHJcbiAgY29udmVydFRvKGRhdGE6IGFueVtdKTogc3RyaW5nIHtcclxuICAgIC8vIOS8muetvuinhOWImeWPquimgeWQr+eUqOWwseaciem7mOiupOWAvO+8jOaJgOS7peWni+e7iOe9ruS4uiflt7Lorr7nva4nO1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5zaWduUnVsZS5zZXRcIik7XHJcbiAgfVxyXG59XHJcbiJdfQ==