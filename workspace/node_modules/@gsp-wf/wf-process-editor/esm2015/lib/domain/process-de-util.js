/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { BpmnModelHelper } from '@edp-pmf/bpmn-model';
export class ProcessDeUtil {
    constructor() { }
    /**
     * @return {?}
     */
    static GenerateElementId() {
        return BpmnModelHelper.GenerateElementId();
    }
    /**
     * 创建内码
     * @return {?}
     */
    static createNM() {
        /**
         * @return {?}
         */
        function S4() {
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());
    }
    /**
     * @param {?} value
     * @return {?}
     */
    static initVariableType(value) {
        if (value) {
            if (value.length >= 8 && value.slice(0, 8) === `{"expr":`) {
                return 'expression';
            }
            else {
                return 'constant';
            }
        }
        else {
            return 'variable';
        }
    }
    /**
     * @return {?}
     */
    getProcessDesignerRouter() {
        /** @type {?} */
        const url = 'processList';
        return url;
    }
    // 获取流程分类webapi
    /**
     * @return {?}
     */
    getFlowFormWebApi() {
        return '/api/runtime/wf/v1.0/flowForm';
    }
    // 获取参数列表webapi
    /**
     * @return {?}
     */
    getFormalParametersWebApi() {
        return '/api/runtime/wf/v1.0/formalParameter';
    }
    // 获取运行时元数据webapi
    /**
     * @return {?}
     */
    getMetaDataRUWebApi() {
        return '/api/runtime/lcm/v1.0/rt-metadatas/';
    }
    // 获取流程构件webapi
    /**
     * @return {?}
     */
    getBizComponentsWebApi() {
        return '/api/runtime/wf/v1.0/bizComponent';
    }
    // 基于流程分类获取表单定义
    /**
     * @return {?}
     */
    getExcuteFormsWebApi() {
        return '/api/runtime/wf/v1.0/excuteForm';
    }
    // 获取设计时流程定义WebAPi
    /**
     * @return {?}
     */
    getProcessDefinitionWebApi() {
        return '/api/runtime/wf/v1.0/dtProcDefs';
    }
    // 判断是否允许删除流程定义的api
    /**
     * @return {?}
     */
    getCheckExistActiveProcDefApi() {
        return '/api/runtime/wf/v1.0/procDefs/checkExistActiveProcDef';
    }
    /**
     * 获取业务活动webApi
     * @param {?} ffId
     * @return {?}
     */
    getBizActivityWebApi(ffId) {
        return `/api/runtime/wf/v1.0/bizActivity?flowFormKey=${ffId}`;
    }
    /**
     * @return {?}
     */
    getProcDefKeyWebApi() {
        return '/api/runtime/wf/v1.0/procDefs/processDefinitionKeys';
    }
    /**
     * 发布流程api
     * @return {?}
     */
    deployWebApi() {
        return '/api/runtime/wf/v1.0/procDefs/deploy';
    }
    /**
     * 保存流程api
     * @return {?}
     */
    saveWebApi() {
        return '/api/runtime/wf/v1.0/DTProcessDefinitions/SaveBpmnModel';
    }
    /**
     * 获取审批动作webapi
     * @return {?}
     */
    getApprovalActionWebApi() {
        return '/api/runtime/wf/v1.0/approvalAction';
    }
    /**
     * 获取运行时流程定义WebAPi
     * @return {?}
     */
    getRTProcessDefinitionWebApi() {
        return '/api/runtime/wf/v1.0/procDefs';
    }
    /**
     * @param {?} data
     * @param {?} code
     * @return {?}
     */
    getValue(data, code) {
        if (!code) {
            return '';
        }
        /** @type {?} */
        let resultVal = '';
        if (code.indexOf('.') === -1) {
            resultVal = data[code];
        }
        else {
            resultVal = code.split('.').reduce((/**
             * @param {?} obj
             * @param {?} key
             * @return {?}
             */
            (obj, key) => {
                if (obj) {
                    return obj[key];
                }
                else {
                    return null;
                }
            }), data);
        }
        return resultVal;
    }
    /**
     * 转换
     * @param {?} jsonObj Object
     * @return {?}
     */
    toUpperCase(jsonObj) {
        if (typeof (jsonObj) === 'object') {
            for (const key of Object.keys(jsonObj)) {
                jsonObj[key.substring(0, 1).toUpperCase() + key.substring(1)] = jsonObj[key];
                delete (jsonObj[key]);
            }
        }
        return jsonObj;
    }
    /**
     * @param {?} jsonObj
     * @return {?}
     */
    toLowCase(jsonObj) {
        if (typeof (jsonObj) === 'object') {
            for (const key of Object.keys(jsonObj)) {
                if ((key.substring(0, 1).toLowerCase() + key.substring(1)) !== key) {
                    jsonObj[key.substring(0, 1).toLowerCase() + key.substring(1)] = jsonObj[key];
                    delete (jsonObj[key]);
                }
            }
        }
        return jsonObj;
    }
}
ProcessDeUtil.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ProcessDeUtil.ctorParameters = () => [];
if (false) {
    /** @type {?} */
    ProcessDeUtil.prototype.funcId;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy1kZS11dGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kb21haW4vcHJvY2Vzcy1kZS11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUl0RCxNQUFNLE9BQU8sYUFBYTtJQUd0QixnQkFBZ0IsQ0FBQzs7OztJQUVqQixNQUFNLENBQUMsaUJBQWlCO1FBQ3RCLE9BQU8sZUFBZSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDN0MsQ0FBQzs7Ozs7SUFJRCxNQUFNLENBQUMsUUFBUTs7OztRQUNYLFNBQVMsRUFBRTtZQUNQLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0UsQ0FBQztRQUNELE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMzRixDQUFDOzs7OztJQUVELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLO1FBQ3pCLElBQUksS0FBSyxFQUFFO1lBQ1AsSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxVQUFVLEVBQUU7Z0JB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QUFFO2dCQUNwQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtvQkFDaEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzdFLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztpQkFDekI7YUFDSjtTQUNKO1FBQ0QsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQzs7O1lBOUlKLFVBQVU7Ozs7OztJQUlQLCtCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQnBtbk1vZGVsSGVscGVyIH0gZnJvbSAnQGVkcC1wbWYvYnBtbi1tb2RlbCc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvY2Vzc0RlVXRpbCB7XHJcbiAgXHJcbiAgICBwdWJsaWMgZnVuY0lkOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIHN0YXRpYyBHZW5lcmF0ZUVsZW1lbnRJZCgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIm+W7uuWGheeggVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlTk0oKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gUzQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKSB8IDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoUzQoKSArIFM0KCkgKyAnLScgKyBTNCgpICsgJy0nICsgUzQoKSArICctJyArIFM0KCkgKyAnLScgKyBTNCgpICsgUzQoKSArIFM0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0VmFyaWFibGVUeXBlKHZhbHVlKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+PSA4ICYmIHZhbHVlLnNsaWNlKDAsIDgpID09PSBge1wiZXhwclwiOmApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2NvbnN0YW50JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndmFyaWFibGUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9jZXNzRGVzaWduZXJSb3V0ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJ3Byb2Nlc3NMaXN0JztcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+W5rWB56iL5YiG57G7d2ViYXBpXHJcbiAgICBnZXRGbG93Rm9ybVdlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL2Zsb3dGb3JtJztcclxuICAgIH1cclxuICAgIC8vIOiOt+WPluWPguaVsOWIl+ihqHdlYmFwaVxyXG4gICAgZ2V0Rm9ybWFsUGFyYW1ldGVyc1dlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL2Zvcm1hbFBhcmFtZXRlcic7XHJcbiAgICB9XHJcbiAgICAvLyDojrflj5bov5DooYzml7blhYPmlbDmja53ZWJhcGlcclxuICAgIGdldE1ldGFEYXRhUlVXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvbGNtL3YxLjAvcnQtbWV0YWRhdGFzLyc7XHJcbiAgICB9XHJcbiAgICAvLyDojrflj5bmtYHnqIvmnoTku7Z3ZWJhcGlcclxuICAgIGdldEJpekNvbXBvbmVudHNXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9iaXpDb21wb25lbnQnO1xyXG4gICAgfVxyXG4gICAgLy8g5Z+65LqO5rWB56iL5YiG57G76I635Y+W6KGo5Y2V5a6a5LmJXHJcbiAgICBnZXRFeGN1dGVGb3Jtc1dlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL2V4Y3V0ZUZvcm0nO1xyXG4gICAgfVxyXG4gICAgLy8g6I635Y+W6K6+6K6h5pe25rWB56iL5a6a5LmJV2ViQVBpXHJcbiAgICBnZXRQcm9jZXNzRGVmaW5pdGlvbldlYkFwaSgpIHtcclxuICAgICAgICByZXR1cm4gJy9hcGkvcnVudGltZS93Zi92MS4wL2R0UHJvY0RlZnMnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIpOaWreaYr+WQpuWFgeiuuOWIoOmZpOa1geeoi+WumuS5ieeahGFwaVxyXG4gICAgZ2V0Q2hlY2tFeGlzdEFjdGl2ZVByb2NEZWZBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jRGVmcy9jaGVja0V4aXN0QWN0aXZlUHJvY0RlZic7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4muWKoea0u+WKqHdlYkFwaVxyXG4gICAgICovXHJcbiAgICBnZXRCaXpBY3Rpdml0eVdlYkFwaShmZklkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gYC9hcGkvcnVudGltZS93Zi92MS4wL2JpekFjdGl2aXR5P2Zsb3dGb3JtS2V5PSR7ZmZJZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb2NEZWZLZXlXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jRGVmcy9wcm9jZXNzRGVmaW5pdGlvbktleXMnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5HluIPmtYHnqIthcGlcclxuICAgICAqL1xyXG4gICAgZGVwbG95V2ViQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY0RlZnMvZGVwbG95JztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5L+d5a2Y5rWB56iLYXBpXHJcbiAgICAgKi9cclxuICAgIHNhdmVXZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9EVFByb2Nlc3NEZWZpbml0aW9ucy9TYXZlQnBtbk1vZGVsJztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5a6h5om55Yqo5L2cd2ViYXBpXHJcbiAgICAgKi9cclxuICAgIGdldEFwcHJvdmFsQWN0aW9uV2ViQXBpKCkge1xyXG4gICAgICAgIHJldHVybiAnL2FwaS9ydW50aW1lL3dmL3YxLjAvYXBwcm92YWxBY3Rpb24nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6L+Q6KGM5pe25rWB56iL5a6a5LmJV2ViQVBpXHJcbiAgICAgKi9cclxuICAgIGdldFJUUHJvY2Vzc0RlZmluaXRpb25XZWJBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jRGVmcyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoZGF0YTogYW55LCBjb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghY29kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHRWYWwgPSAnJztcclxuICAgICAgICBpZiAoY29kZS5pbmRleE9mKCcuJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFZhbCA9IGRhdGFbY29kZV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0VmFsID0gY29kZS5zcGxpdCgnLicpLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6L2s5o2iXHJcbiAgICAgKiBAcGFyYW0ganNvbk9iaiBPYmplY3RcclxuICAgICAqL1xyXG4gICAgdG9VcHBlckNhc2UoanNvbk9iajogT2JqZWN0KTogYW55IHtcclxuICAgICAgICBpZiAodHlwZW9mIChqc29uT2JqKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoanNvbk9iaikpIHtcclxuICAgICAgICAgICAgICAgIGpzb25PYmpba2V5LnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKV0gPSBqc29uT2JqW2tleV07XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgKGpzb25PYmpba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmo7XHJcbiAgICB9XHJcbiAgICB0b0xvd0Nhc2UoanNvbk9iajogT2JqZWN0KTogYW55IHtcclxuICAgICAgICBpZiAodHlwZW9mIChqc29uT2JqKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoanNvbk9iaikpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoa2V5LnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKSkgIT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25PYmpba2V5LnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKV0gPSBqc29uT2JqW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChqc29uT2JqW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBqc29uT2JqO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==