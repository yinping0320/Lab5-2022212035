/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Expression } from '@edp-pmf/bpmn-model';
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, ComponentFactoryResolver, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
import { DatagridComponent } from '@farris/ui-datagrid';
import { BsModalService } from '@farris/ui-modal';
import { MessagerService } from '@farris/ui-messager';
import { ExpressionService, InjectedType } from '@gsp-svc/expression';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { MultiInstanceLoopCharacteristics } from './multi-instance-loop-characteristics.entity';
// import { ExtensionCompletionConditionRuler } from './extension-completion-condition-ruler/extension-completion-condition-ruler.entity';
import { SignRuleComponent } from '../sign-rule/sign-rule.component';
import { Condition, CounterSignRule } from '@gsp-wf/wf-process-model';
import { HttpService } from '@ecp-caf/caf-common';
import { ProcessTime } from '../../model/process-time';
var MultiInstanceLoopCharacteristicsComponent = /** @class */ (function () {
    function MultiInstanceLoopCharacteristicsComponent(resolver, injector, uistate, expr, modalService, message, http, cdr, localeId, resources, localePipe) {
        this.resolver = resolver;
        this.injector = injector;
        this.uistate = uistate;
        this.expr = expr;
        this.modalService = modalService;
        this.message = message;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.groupIcon2 = '<i class="f-icon f-icon-lookup"></i>';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.preEnable = false;
        this.preSequential = false;
        this.loopCharacteristics = new MultiInstanceLoopCharacteristics();
        this.loopCharacteristicsTemp = null;
        // peopleList: string;
        this.conditionRulesIsSet = this.localePipe.transform('multiInstanceLoopCharacteristics.conditionRulesSet');
        this.bpmnModel = this.uistate.bpmnModel;
        this.modalConfig = {
            title: this.localePipe.transform('multiInstanceLoopCharacteristics.loopCharacteristics'),
            width: 550,
            height: 450,
            showButtons: true
        };
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    Object.defineProperty(MultiInstanceLoopCharacteristicsComponent.prototype, "value", {
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            var e_1, _a;
            this.loopCharacteristics = new MultiInstanceLoopCharacteristics();
            if (v) {
                this.loopCharacteristics.enable = v.enable;
                this.loopCharacteristics.sequential = v.sequential;
                this.preEnable = v.enable;
                this.preSequential = v.sequential;
                if (v.loopCardinality && (v.loopCardinality instanceof Expression) && ((v.loopCardinality).MexExpression)) {
                    this.loopCharacteristics.loopCardinality = ((/** @type {?} */ ((v.loopCardinality).MexExpression))).Value;
                    // this.loopCharacteristics.loopCardinality = this.peopleList;
                }
                if (v.completionConditionRules && v.completionConditionRules.length > 0) {
                    /** @type {?} */
                    var signRuleEntityArray = new Array();
                    try {
                        for (var _b = tslib_1.__values(v.completionConditionRules), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var rule = _c.value;
                            /** @type {?} */
                            var signRule = new CounterSignRule(this.bpmnModel);
                            signRule.ConclusionValue = rule.ConclusionValue;
                            signRule.CalculateType = rule.CalculateType;
                            signRule.ConditionValue = rule.ConditionValue;
                            signRule.WaitAllVotes = rule.WaitAllVotes;
                            if (!signRule.CompletionCondition) {
                                signRule.CompletionCondition = new Condition(this.bpmnModel);
                            }
                            signRule.CompletionCondition.Value = rule.CompletionCondition ? rule.CompletionCondition.Value : null;
                            signRuleEntityArray.push(signRule);
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    this.loopCharacteristics.completionConditionRules = signRuleEntityArray;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.editorParams.location && this.editorParams.location == 'activity') {
            this.promptAct = true;
        }
        else {
            this.promptAct = false;
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.loopCardinalityExpr = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.showloopCardinalityHelp(data);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.showloopCardinalityHelp = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.showExpr();
        if (this.loopCharacteristics.loopCardinality) {
            this.expr.addExpressionText(this.loopCharacteristics.loopCardinality);
        }
        else {
            this.expr.addExpressionText('');
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressionInfo
         * @return {?}
         */
        function (expressionInfo) {
            // this.peopleList = expressionInfo;
            _this.loopCharacteristics.loopCardinality = expressionInfo;
        }));
    };
    /**
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.showExpr = /**
     * @return {?}
     */
    function () {
        var e_2, _a, e_3, _b, e_4, _c, e_5, _d;
        // this.expr.clearContext();
        if (this.uistate.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.uistate.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    // this.expr.addCommonObject(co);
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            if (this.uistate.schemas[0].entityTypes && this.uistate.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.uistate.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        if (this.uistate.procInstContext.length > 0) {
            try {
                for (var _g = tslib_1.__values(this.uistate.procInstContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    context.push(variable);
                    // this.expr.addContext(variable);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
        if (this.uistate.processVariableContext.length > 0) {
            var _loop_1 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.uistate.processVariableContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_1(variable);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_d = context_1.return)) _d.call(context_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.isEnable = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (!data) {
            this.loopCharacteristicsTemp = new MultiInstanceLoopCharacteristics();
            this.loopCharacteristicsTemp.enable = true;
            this.loopCharacteristicsTemp.sequential = this.loopCharacteristics.sequential;
            this.loopCharacteristicsTemp.loopCardinality = this.loopCharacteristics.loopCardinality;
            this.loopCharacteristicsTemp.completionConditionRules = new Array();
            if (this.loopCharacteristics && this.loopCharacteristics.completionConditionRules) {
                this.loopCharacteristics.completionConditionRules.forEach((/**
                 * @param {?} com
                 * @return {?}
                 */
                function (com) { return _this.loopCharacteristicsTemp.completionConditionRules.push((/** @type {?} */ (com.clone()))); }));
            }
            this.loopCharacteristics = new MultiInstanceLoopCharacteristics();
        }
        else {
            if (this.loopCharacteristicsTemp) {
                this.loopCharacteristics.enable = true;
                this.loopCharacteristics.sequential = this.loopCharacteristicsTemp.sequential;
                this.loopCharacteristics.loopCardinality = this.loopCharacteristicsTemp.loopCardinality;
                this.loopCharacteristics.completionConditionRules = new Array();
                if (this.loopCharacteristicsTemp.completionConditionRules) {
                    this.loopCharacteristicsTemp.completionConditionRules.forEach((/**
                     * @param {?} com
                     * @return {?}
                     */
                    function (com) { return _this.loopCharacteristics.completionConditionRules.push((/** @type {?} */ (com.clone()))); }));
                }
                this.loopCharacteristicsTemp = null;
            }
        }
        this.validate(data);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.validate = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data == true) {
            if (!this.loopCharacteristics.completionConditionRules || this.loopCharacteristics.completionConditionRules.length < 1) {
                this.setCompletionConditionRules(this.loopCharacteristics.completionConditionRules);
            }
        }
    };
    /**
     * @param {?} completionConditionRules
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.setCompletionConditionRules = /**
     * @param {?} completionConditionRules
     * @return {?}
     */
    function (completionConditionRules) {
        var _this = this;
        /** @type {?} */
        var dialog;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(SignRuleComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        compRef.instance.value1 = completionConditionRules;
        // compRef.instance.data = this.loopCharacteristics.completionConditionRules;
        compRef.instance.submitModal.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.loopCharacteristics.completionConditionRules = re;
            dialog.close();
        }));
        compRef.instance.closeModal.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            dialog.close();
        }));
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform("multiInstanceLoopCharacteristics.completionConditionRules"),
            width: 800,
            height: 515,
            buttons: compRef.instance.modalFooter1,
            showButtons: true
        };
        dialog = this.modalService.show(compRef, modalConfig);
    };
    /**
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var object = { value: this.loopCharacteristics, parameters: null };
        if (this.preEnable != this.loopCharacteristics.enable || this.preSequential != this.loopCharacteristics.sequential) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/runtimeActivityInstances?procDefId=" + this.uistate.procDefId + "&activityDefinitionId=" + this.uistate.propertyData.Id;
            this.http.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                if (_this.uistate.time === ProcessTime.rt && re && re.length > 0) {
                    _this.message.info(_this.localePipe.transform('multiInstanceLoopCharacteristics.checkPrompt'));
                }
                else {
                    _this.submitModal.emit(object);
                }
            }));
        }
        else {
            this.submitModal.emit(object);
        }
    };
    /**
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    MultiInstanceLoopCharacteristicsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-multi-instance-loop-characteristics',
                    template: "<div class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\">\r\n    <section class=\"f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n        <div class=\"farris-form form-inline farris-form-inline\">\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'multiInstanceLoopCharacteristics.isEnable' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap mr-5\">\r\n                  <farris-switch [(ngModel)]=\"loopCharacteristics.enable\" name=\"enable\" (valueChange)=\"isEnable($event)\"></farris-switch>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'multiInstanceLoopCharacteristics.isSequential' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap mr-5\">\r\n                  <farris-switch [(ngModel)]=\"loopCharacteristics.sequential\" name=\"sequential\"></farris-switch>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'multiInstanceLoopCharacteristics.loopCardinality' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <input-group [editable]=\"false\" [enableClear]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                    [(value)]=\"loopCharacteristics.loopCardinality\" (clickHandle)=\"loopCardinalityExpr($event)\">\r\n                  </input-group>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\"></span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"padding-right: 30px;border-radius:15px\">\r\n                  <div class=\"page-friendly-reminder\" style=\"background:#ECF4FF;padding: 0.5rem!important;border-radius:6px\">\r\n                    <div class=\"reminder-message\">\r\n                      <span class=\"reminder-title\">\r\n                        <span class=\"f-icon f-icon-info\">\r\n                        </span>\r\n                        <span class=\"reminder-name\" style=\"padding-left: 0.25rem\">\r\n                        </span>\r\n                      </span>\r\n                      <span class=\"message\" *ngIf=\"promptAct\"><br/>{{'multiInstanceLoopCharacteristics.promptAct1' | wfLocale}}<br/>\r\n                        {{'multiInstanceLoopCharacteristics.promptAct2' | wfLocale}}<br/>\r\n                      </span>\r\n                      <span class=\"message\" *ngIf=\"!promptAct\"><br/>{{'multiInstanceLoopCharacteristics.promptProc1' | wfLocale}}<br/>\r\n                        {{'multiInstanceLoopCharacteristics.promptProc2' | wfLocale}}<br/>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-3 pr-5\" *ngIf=\"loopCharacteristics.enable\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'multiInstanceLoopCharacteristics.completionConditionRules' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-1\">\r\n                  <input-group [editable]=\"false\" [enableClear]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" \r\n                    [(value)]=\"conditionRulesIsSet\" (clickHandle)=\"setCompletionConditionRules(loopCharacteristics.completionConditionRules)\">\r\n                  </input-group>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"clickCancel()\">{{'component.timeLimitControl.clickCancel' | wfLocale }}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm mx-2\" (click)=\"clickOK()\">{{'component.timeLimitControl.clickOK' | wfLocale }}</button>\r\n</ng-template>",
                    providers: [
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    MultiInstanceLoopCharacteristicsComponent.ctorParameters = function () { return [
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: BsModalService },
        { type: MessagerService },
        { type: HttpService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    MultiInstanceLoopCharacteristicsComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        editorParams: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        cell: [{ type: ViewChild, args: ['cell',] }],
        grid: [{ type: ViewChild, args: ['grid',] }]
    };
    return MultiInstanceLoopCharacteristicsComponent;
}());
export { MultiInstanceLoopCharacteristicsComponent };
if (false) {
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.cls;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.groupIcon2;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.closeModal;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.submitModal;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.editorParams;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.modalFooter;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.cell;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.grid;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.preEnable;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.preSequential;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.loopCharacteristics;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.loopCharacteristicsTemp;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.conditionRulesIsSet;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.promptAct;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.bpmnModel;
    /** @type {?} */
    MultiInstanceLoopCharacteristicsComponent.prototype.modalConfig;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsComponent.prototype.localePipe;
}
var MultiInstanceLoopCharacteristicsConverter = /** @class */ (function () {
    function MultiInstanceLoopCharacteristicsConverter(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    MultiInstanceLoopCharacteristicsConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data && ((/** @type {?} */ (data))).enable) {
            return this.localePipe.transform('multiInstanceLoopCharacteristics.set');
        }
        return this.localePipe.transform('multiInstanceLoopCharacteristics.notSet');
    };
    return MultiInstanceLoopCharacteristicsConverter;
}());
export { MultiInstanceLoopCharacteristicsConverter };
if (false) {
    /**
     * @type {?}
     * @private
     */
    MultiInstanceLoopCharacteristicsConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGktaW5zdGFuY2UtbG9vcC1jaGFyYWN0ZXJpc3RpY3MuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9tdWx0aS1pbnN0YW5jZS1sb29wLWNoYXJhY3RlcmlzdGljcy9tdWx0aS1pbnN0YW5jZS1sb29wLWNoYXJhY3RlcmlzdGljcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQWEsVUFBVSxFQUFvRCxNQUFNLHFCQUFxQixDQUFDO0FBQzlHLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3hNLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUNoRyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUNyRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUU1RSxPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQzs7QUFFaEcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDckUsT0FBTyxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQXNCLE1BQU0sMEJBQTBCLENBQUM7QUFJMUYs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RSxDQUFDO0lBQ0gsZ0RBQUM7QUFBRCxDQUFDLEFBWEQsSUFXQzs7Ozs7OztJQVRHLCtEQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJwbW5Nb2RlbCwgRXhwcmVzc2lvbiwgRXh0ZW5zaW9uQ29tcGxldGlvbkNvbmRpdGlvblJ1bGVyLCBNZXhFeHByZXNzaW9uIH0gZnJvbSAnQGVkcC1wbWYvYnBtbi1tb2RlbCc7XHJcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIElucHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwsIEluamVjdCwgTE9DQUxFX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFdGX0xBTkdfUkVTT1VSQ0VTLCBXZkxvY2FsZVBpcGUgfSBmcm9tICcuLi8uLi9pMThuL3BpcGUvd2YtcHJvY2Vzcy1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBUeXBlQ29udmVydGVyIH0gZnJvbSAnQGZhcnJpcy9pZGUtcHJvcGVydHktcGFuZWwnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZX0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuaW1wb3J0IHsgTXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MgfSBmcm9tICcuL211bHRpLWluc3RhbmNlLWxvb3AtY2hhcmFjdGVyaXN0aWNzLmVudGl0eSc7XHJcbi8vIGltcG9ydCB7IEV4dGVuc2lvbkNvbXBsZXRpb25Db25kaXRpb25SdWxlciB9IGZyb20gJy4vZXh0ZW5zaW9uLWNvbXBsZXRpb24tY29uZGl0aW9uLXJ1bGVyL2V4dGVuc2lvbi1jb21wbGV0aW9uLWNvbmRpdGlvbi1ydWxlci5lbnRpdHknO1xyXG5pbXBvcnQgeyBTaWduUnVsZUNvbXBvbmVudCB9IGZyb20gJy4uL3NpZ24tcnVsZS9zaWduLXJ1bGUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ29uZGl0aW9uLCBDb3VudGVyU2lnblJ1bGUsIFNlbWFudGljRXhwcmVzc2lvbiB9IGZyb20gJ0Bnc3Atd2Yvd2YtcHJvY2Vzcy1tb2RlbCc7XHJcbi8vIGltcG9ydCB7IFNpZ25SdWxlRW50aXR5IH0gZnJvbSAnLi4vc2lnbi1ydWxlL2VudGl0ZXMvc2lnbi1ydWxlLmVudGl0eSc7XHJcbmltcG9ydCB7IFJUUHJvY2Vzc0luZm8gfSBmcm9tICcuLi8uLi9tb2RlbC9ydC1wcm9jZXNzLWluZm8nO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFByb2Nlc3NUaW1lIH0gZnJvbSAnLi4vLi4vbW9kZWwvcHJvY2Vzcy10aW1lJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLW11bHRpLWluc3RhbmNlLWxvb3AtY2hhcmFjdGVyaXN0aWNzJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vbXVsdGktaW5zdGFuY2UtbG9vcC1jaGFyYWN0ZXJpc3RpY3MuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL211bHRpLWluc3RhbmNlLWxvb3AtY2hhcmFjdGVyaXN0aWNzLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIFdmTG9jYWxlUGlwZSxcclxuIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIE11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgZ3JvdXBJY29uMiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIHN1Ym1pdE1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG5cclxuICBASW5wdXQoKSBzZXQgdmFsdWUodikge1xyXG4gICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzID0gbmV3IE11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzKCk7XHJcbiAgICBpZiAodikge1xyXG4gICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuZW5hYmxlID0gdi5lbmFibGU7XHJcbiAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5zZXF1ZW50aWFsID0gdi5zZXF1ZW50aWFsO1xyXG4gICAgICB0aGlzLnByZUVuYWJsZSA9IHYuZW5hYmxlO1xyXG4gICAgICB0aGlzLnByZVNlcXVlbnRpYWwgPSB2LnNlcXVlbnRpYWw7XHJcbiAgICAgIGlmKHYubG9vcENhcmRpbmFsaXR5ICYmICh2Lmxvb3BDYXJkaW5hbGl0eSBpbnN0YW5jZW9mIEV4cHJlc3Npb24pICYmICgodi5sb29wQ2FyZGluYWxpdHkpLk1leEV4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmxvb3BDYXJkaW5hbGl0eSA9ICgodi5sb29wQ2FyZGluYWxpdHkpLk1leEV4cHJlc3Npb24gYXMgU2VtYW50aWNFeHByZXNzaW9uKS5WYWx1ZTtcclxuICAgICAgICAvLyB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MubG9vcENhcmRpbmFsaXR5ID0gdGhpcy5wZW9wbGVMaXN0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHYuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzICYmIHYuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsZXQgc2lnblJ1bGVFbnRpdHlBcnJheTpFeHRlbnNpb25Db21wbGV0aW9uQ29uZGl0aW9uUnVsZXJbXSA9IG5ldyBBcnJheTxDb3VudGVyU2lnblJ1bGU+KCk7XHJcbiAgICAgICAgZm9yKGxldCBydWxlIG9mIHYuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzKSB7XHJcbiAgICAgICAgICAgIGxldCBzaWduUnVsZSA9IG5ldyBDb3VudGVyU2lnblJ1bGUodGhpcy5icG1uTW9kZWwpO1xyXG4gICAgICAgICAgICBzaWduUnVsZS5Db25jbHVzaW9uVmFsdWUgPSBydWxlLkNvbmNsdXNpb25WYWx1ZTtcclxuICAgICAgICAgICAgc2lnblJ1bGUuQ2FsY3VsYXRlVHlwZSA9IHJ1bGUuQ2FsY3VsYXRlVHlwZTtcclxuICAgICAgICAgICAgc2lnblJ1bGUuQ29uZGl0aW9uVmFsdWUgPSBydWxlLkNvbmRpdGlvblZhbHVlO1xyXG4gICAgICAgICAgICBzaWduUnVsZS5XYWl0QWxsVm90ZXMgPSBydWxlLldhaXRBbGxWb3RlcztcclxuICAgICAgICAgICAgaWYoIXNpZ25SdWxlLkNvbXBsZXRpb25Db25kaXRpb24pIHtcclxuICAgICAgICAgICAgICBzaWduUnVsZS5Db21wbGV0aW9uQ29uZGl0aW9uID0gbmV3IENvbmRpdGlvbih0aGlzLmJwbW5Nb2RlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2lnblJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbi5WYWx1ZSA9IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbiA/IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbi5WYWx1ZSA6IG51bGw7XHJcbiAgICAgICAgICAgIHNpZ25SdWxlRW50aXR5QXJyYXkucHVzaChzaWduUnVsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMgPSBzaWduUnVsZUVudGl0eUFycmF5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIEBJbnB1dCgpIGVkaXRvclBhcmFtczogYW55ID0ge307XHJcbiAgQFZpZXdDaGlsZCgnaWNvblNlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2NlbGwnKSBjZWxsOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2dyaWQnKSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgcHJlRW5hYmxlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIHByZVNlcXVlbnRpYWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgbG9vcENoYXJhY3RlcmlzdGljczogTXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MgPSBuZXcgTXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MoKTtcclxuICBcclxuICBsb29wQ2hhcmFjdGVyaXN0aWNzVGVtcDogTXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MgPSBudWxsO1xyXG5cclxuICAvLyBwZW9wbGVMaXN0OiBzdHJpbmc7XHJcblxyXG4gIGNvbmRpdGlvblJ1bGVzSXNTZXQ6IHN0cmluZyA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbmRpdGlvblJ1bGVzU2V0Jyk7XHJcblxyXG4gIHByb21wdEFjdDogYm9vbGVhbjtcclxuICBcclxuICBicG1uTW9kZWw6IEJwbW5Nb2RlbCA9IHRoaXMudWlzdGF0ZS5icG1uTW9kZWw7XHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmxvb3BDaGFyYWN0ZXJpc3RpY3MnKSxcclxuICAgIHdpZHRoOiA1NTAsXHJcbiAgICBoZWlnaHQ6IDQ1MCxcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuXHJcbiAgY29uc3RydWN0b3IoICAgIFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIHVpc3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGV4cHI6IEV4cHJlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSkgeyBcclxuICAgICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgaWYodGhpcy5lZGl0b3JQYXJhbXMubG9jYXRpb24gJiYgdGhpcy5lZGl0b3JQYXJhbXMubG9jYXRpb24gPT0gJ2FjdGl2aXR5Jykge1xyXG4gICAgICB0aGlzLnByb21wdEFjdCA9IHRydWU7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHRoaXMucHJvbXB0QWN0ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsb29wQ2FyZGluYWxpdHlFeHByKGRhdGE6IGFueSl7XHJcbiAgICB0aGlzLnNob3dsb29wQ2FyZGluYWxpdHlIZWxwKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgc2hvd2xvb3BDYXJkaW5hbGl0eUhlbHAoZGF0YTogc3RyaW5nKXtcclxuICAgIHRoaXMuc2hvd0V4cHIoKTtcclxuICAgIGlmICh0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MubG9vcENhcmRpbmFsaXR5KSB7XHJcbiAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCh0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MubG9vcENhcmRpbmFsaXR5KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuYnVpbGRFeHByZXNzaW9uKCkudGhlbigoZXhwcmVzc2lvbkluZm86IHN0cmluZykgPT4ge1xyXG4gICAgICAvLyB0aGlzLnBlb3BsZUxpc3QgPSBleHByZXNzaW9uSW5mbztcclxuICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmxvb3BDYXJkaW5hbGl0eSA9IGV4cHJlc3Npb25JbmZvO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93RXhwcigpe1xyXG4gICAgLy8gdGhpcy5leHByLmNsZWFyQ29udGV4dCgpO1xyXG4gICAgaWYgKHRoaXMudWlzdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy51aXN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29tbW9uT2JqZWN0KGNvKTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLnVpc3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMudWlzdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmICh0aGlzLnVpc3RhdGUucHJvY0luc3RDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLnVpc3RhdGUucHJvY0luc3RDb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29udGV4dCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLnVpc3RhdGUucHJvY2Vzc1ZhcmlhYmxlQ29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy51aXN0YXRlLnByb2Nlc3NWYXJpYWJsZUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29udGV4dCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNFbmFibGUoZGF0YTogYW55KSB7XHJcbiAgICBpZighZGF0YSkge1xyXG4gICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3NUZW1wID0gbmV3IE11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzKCk7XHJcbiAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljc1RlbXAuZW5hYmxlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcC5zZXF1ZW50aWFsID0gdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLnNlcXVlbnRpYWw7XHJcbiAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljc1RlbXAubG9vcENhcmRpbmFsaXR5ID0gdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmxvb3BDYXJkaW5hbGl0eTtcclxuICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcC5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMgPSBuZXcgQXJyYXk8Q291bnRlclNpZ25SdWxlPigpO1xyXG4gICAgICBpZih0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MgJiYgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlcykge1xyXG4gICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMuZm9yRWFjaChjb20gPT4gdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcC5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMucHVzaChjb20uY2xvbmUoKSBhcyBhbnkpKTtcclxuICAgICAgfSBcclxuICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzID0gbmV3IE11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzKCk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIGlmKHRoaXMubG9vcENoYXJhY3RlcmlzdGljc1RlbXApIHtcclxuICAgICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuZW5hYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3Muc2VxdWVudGlhbCA9IHRoaXMubG9vcENoYXJhY3RlcmlzdGljc1RlbXAuc2VxdWVudGlhbDtcclxuICAgICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MubG9vcENhcmRpbmFsaXR5ID0gdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcC5sb29wQ2FyZGluYWxpdHk7XHJcbiAgICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlcyA9IG5ldyBBcnJheTxDb3VudGVyU2lnblJ1bGU+KCk7XHJcbiAgICAgICAgaWYodGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcC5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMpIHtcclxuICAgICAgICAgIHRoaXMubG9vcENoYXJhY3RlcmlzdGljc1RlbXAuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzLmZvckVhY2goY29tID0+IHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXMucHVzaChjb20uY2xvbmUoKSBhcyBhbnkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzVGVtcCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudmFsaWRhdGUoZGF0YSk7XHJcbiAgfVxyXG5cclxuICB2YWxpZGF0ZShkYXRhOiBhbnkpIHtcclxuICAgIGlmKGRhdGEgPT0gdHJ1ZSkge1xyXG4gICAgICBpZighdGhpcy5sb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlcyB8fCB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICB0aGlzLnNldENvbXBsZXRpb25Db25kaXRpb25SdWxlcyh0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0Q29tcGxldGlvbkNvbmRpdGlvblJ1bGVzKGNvbXBsZXRpb25Db25kaXRpb25SdWxlczogRXh0ZW5zaW9uQ29tcGxldGlvbkNvbmRpdGlvblJ1bGVyW10pIHtcclxuICAgIGxldCBkaWFsb2c6IGFueTtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShTaWduUnVsZUNvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS52YWx1ZTEgPSBjb21wbGV0aW9uQ29uZGl0aW9uUnVsZXM7XHJcbiAgICAvLyBjb21wUmVmLmluc3RhbmNlLmRhdGEgPSB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zdWJtaXRNb2RhbC5zdWJzY3JpYmUoKHJlOiBFeHRlbnNpb25Db21wbGV0aW9uQ29uZGl0aW9uUnVsZXJbXSkgPT4ge1xyXG4gICAgICB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzID0gcmU7XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlTW9kYWwuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJtdWx0aUluc3RhbmNlTG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXNcIiksXHJcbiAgICAgIHdpZHRoOiA4MDAsXHJcbiAgICAgIGhlaWdodDogNTE1LFxyXG4gICAgICBidXR0b25zOiBjb21wUmVmLmluc3RhbmNlLm1vZGFsRm9vdGVyMSxcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgIH07XHJcbiAgICBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICB9XHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICBjb25zdCBvYmplY3QgPSB7IHZhbHVlOiB0aGlzLmxvb3BDaGFyYWN0ZXJpc3RpY3MsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgIGlmKHRoaXMucHJlRW5hYmxlICE9IHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5lbmFibGUgfHwgdGhpcy5wcmVTZXF1ZW50aWFsICE9IHRoaXMubG9vcENoYXJhY3RlcmlzdGljcy5zZXF1ZW50aWFsKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL3J1bnRpbWVBY3Rpdml0eUluc3RhbmNlcz9wcm9jRGVmSWQ9JHt0aGlzLnVpc3RhdGUucHJvY0RlZklkfSZhY3Rpdml0eURlZmluaXRpb25JZD0ke3RoaXMudWlzdGF0ZS5wcm9wZXJ0eURhdGEuSWR9YDtcclxuICAgICAgdGhpcy5odHRwLmdldCh1cmwpLnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMudWlzdGF0ZS50aW1lID09PSBQcm9jZXNzVGltZS5ydCAmJiByZSAmJiByZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNoZWNrUHJvbXB0JykpO1xyXG4gICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdE1vZGFsLmVtaXQob2JqZWN0KTtcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbGlja0NhbmNlbCgpIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbC5lbWl0KCk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE11bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzQ29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgaWYgKGRhdGEgJiYgKGRhdGEgYXMgTXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MpLmVuYWJsZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnbXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3Muc2V0Jyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnbXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3Mubm90U2V0Jyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==