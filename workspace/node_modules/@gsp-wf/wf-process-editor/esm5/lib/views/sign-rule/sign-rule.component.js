/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, HostBinding, Output, EventEmitter, Input, ViewChild, TemplateRef, Optional, ChangeDetectorRef, Inject, LOCALE_ID } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { SignRuleEntity } from './entites/sign-rule.entity';
import { DialogComponent } from '@farris/ui-dialog';
import { ExprEditMode, ExpressionService } from '@gsp-svc/expression';
import { MessagerService } from '@farris/ui-messager';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { DatagridComponent } from '@farris/ui-datagrid';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { of } from 'rxjs';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
import { BpmnModelHelper } from '@edp-pmf/bpmn-model';
import { Condition, CounterSignRule } from '@gsp-wf/wf-process-model';
var SignRuleComponent = /** @class */ (function () {
    function SignRuleComponent(formBuilder, message, exprService, designerUIState, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.formBuilder = formBuilder;
        this.message = message;
        this.exprService = exprService;
        this.designerUIState = designerUIState;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.modalConfig = {
            title: this.localePipe.transform('component.signRule.countersignRules'),
            width: 800,
            height: 520,
            showButtons: true
        };
        this.editCondition = false;
        this.data = [];
        this.calculationMethods = [
            { text: this.localePipe.transform('component.signRule.byNumber'), value: 'byNumber' },
            { text: this.localePipe.transform('component.signRule.byProportion'), value: 'byProportion' },
            { text: this.localePipe.transform('component.signRule.customConditions'), value: 'null' },
        ];
        this.counterSignVariables = [];
        this.bpmnModel = this.designerUIState.bpmnModel;
        /**
         * **** 审批项帮助参数 ********************************************************
         */
        this.approvalCols = [{ title: this.localePipe.transform('component.signRule.value'), field: 'value', width: 80 },
            { title: this.localePipe.transform('component.signRule.text'), field: 'text', width: 90 }];
        this.approvalItems = [];
        this.approvalItems1 = [
            { value: 'Forward', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.forward') },
            { value: 'Backward', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.backward') },
            { value: 'Abort', text: this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.abort') }
        ];
        /**
         * ********************************
         */
        this.columns = [
            { field: 'conclusionName', width: 25, title: this.localePipe.transform('component.signRule.conclusionName') },
            { field: 'conclusionValue', width: 25, title: this.localePipe.transform('component.signRule.conclusionValue') },
            { field: 'calculateType', width: 40, title: this.localePipe.transform('component.signRule.calculateType'),
                formatter: { type: 'enum', options: { valueField: 'value', textField: 'text', data: this.calculationMethods } },
                editor: { type: EditorTypes.COMBOLIST, options: { valueField: 'value', textField: 'text', data: this.calculationMethods, idField: 'value', panelHeight: 'auto' } }
            },
            { field: 'conditionValue', width: 25, title: this.localePipe.transform('component.signRule.conditionValue'),
                editor: { type: EditorTypes.NUMBERBOX, options: {} },
                formatter: { type: 'number', options: { precision: 0, min: 0 } }
            },
            { field: 'waitAllVotes', width: 35, title: this.localePipe.transform('component.signRule.waitAllVotes'),
                editor: { type: EditorTypes.SWITCH, options: {} },
                formatter: { type: 'boolean', options: { trueText: this.localePipe.transform('component.signRule.yes'), falseText: this.localePipe.transform('component.signRule.no') } }
            },
            { field: 'completionCondition', width: 50, title: this.localePipe.transform('component.signRule.customConditions'),
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            console.log('clear', e);
                        })
                    }
                }
            }
        ];
        /**
         * 结束编辑前事件
         */
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        function (rowIndex, rowData, column) {
            _this.preValue = JSON.parse(JSON.stringify(rowData));
            return of(true);
        });
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    Object.defineProperty(SignRuleComponent.prototype, "value", {
        //会签规则打开页面
        set: 
        //会签规则打开页面
        /**
         * @param {?} rules
         * @return {?}
         */
        function (rules) {
            var e_1, _a;
            if (rules && rules.length > 0) {
                try {
                    for (var rules_1 = tslib_1.__values(rules), rules_1_1 = rules_1.next(); !rules_1_1.done; rules_1_1 = rules_1.next()) {
                        var rule = rules_1_1.value;
                        /** @type {?} */
                        var val = new SignRuleEntity();
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = rule.ConclusionValue;
                        val.conclusionName = rule.ConclusionName;
                        val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';
                        val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;
                        val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;
                        val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition._value : null;
                        this.data.push(val);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (rules_1_1 && !rules_1_1.done && (_a = rules_1.return)) _a.call(rules_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            else { // 如果模型上没有会签规则，自动带入所有的审批选项
                this.deleteRow();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SignRuleComponent.prototype, "value1", {
        //多实例打开完成规则页面
        set: 
        //多实例打开完成规则页面
        /**
         * @param {?} rules
         * @return {?}
         */
        function (rules) {
            var e_2, _a;
            this.editCondition = true;
            if (rules && rules.length > 0) {
                try {
                    for (var rules_2 = tslib_1.__values(rules), rules_2_1 = rules_2.next(); !rules_2_1.done; rules_2_1 = rules_2.next()) {
                        var rule = rules_2_1.value;
                        /** @type {?} */
                        var val = new SignRuleEntity();
                        val.id = BpmnModelHelper.GenerateElementId();
                        val.conclusionValue = rule.ConclusionValue;
                        // val.conclusionName = rule.conclusionName;
                        val.calculateType = rule.CalculateType ? rule.CalculateType : 'null';
                        val.conditionValue = rule.ConditionValue ? rule.ConditionValue : 0;
                        val.waitAllVotes = rule.WaitAllVotes ? rule.WaitAllVotes : false;
                        val.completionCondition = rule.CompletionCondition ? rule.CompletionCondition.Value : null;
                        this.data.push(val);
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (rules_2_1 && !rules_2_1.done && (_a = rules_2.return)) _a.call(rules_2);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                this.data = this.setName1(this.data);
            }
            else { // 如果模型上没有会签规则，自动带入所有的审批选项
                this.deleteRow1();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.counterSignVariables = this.designerUIState.counterSignVariables || [];
        this.approvalItems = this.designerUIState.approvalItems || [];
    };
    // 重置动作
    // 重置动作
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.deleteRow = 
    // 重置动作
    /**
     * @return {?}
     */
    function () {
        var e_3, _a;
        this.data = [];
        /** @type {?} */
        var ruleItems = this.designerUIState.approvalItems || [];
        if (ruleItems && ruleItems.length > 0) {
            try {
                for (var ruleItems_1 = tslib_1.__values(ruleItems), ruleItems_1_1 = ruleItems_1.next(); !ruleItems_1_1.done; ruleItems_1_1 = ruleItems_1.next()) {
                    var ruleItem = ruleItems_1_1.value;
                    /** @type {?} */
                    var val = new SignRuleEntity();
                    if (ruleItem.value === 'Pass') {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'byProportion';
                        val.conditionValue = '100';
                        val.waitAllVotes = true;
                    }
                    else if (ruleItem.value === 'Back') {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'byNumber';
                        val.conditionValue = '1';
                        val.waitAllVotes = true;
                    }
                    else {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'null';
                        val.conditionValue = '0';
                        val.waitAllVotes = true;
                    }
                    this.data.push(val);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (ruleItems_1_1 && !ruleItems_1_1.done && (_a = ruleItems_1.return)) _a.call(ruleItems_1);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    // 重置动作
    // 重置动作
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.deleteRow1 = 
    // 重置动作
    /**
     * @return {?}
     */
    function () {
        var e_4, _a;
        this.data = [];
        if (this.approvalItems1 && this.approvalItems1.length > 0) {
            try {
                for (var _b = tslib_1.__values(this.approvalItems1), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var ruleItem = _c.value;
                    /** @type {?} */
                    var val = new SignRuleEntity();
                    if (ruleItem.value === 'Forward') {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'byProportion';
                        val.conditionValue = '100';
                        val.waitAllVotes = true;
                    }
                    else if (ruleItem.value === 'Backward' || ruleItem.value === 'Abort') {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'byNumber';
                        val.conditionValue = '1';
                        val.waitAllVotes = true;
                    }
                    else {
                        val.id = ProcessDeUtil.GenerateElementId();
                        val.conclusionValue = ruleItem.value;
                        val.conclusionName = ruleItem.text;
                        val.calculateType = 'null';
                        val.conditionValue = '0';
                        val.waitAllVotes = true;
                    }
                    this.data.push(val);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
    };
    // 给个名字
    // 给个名字
    /**
     * @param {?} signRuleEntity
     * @return {?}
     */
    SignRuleComponent.prototype.setName1 = 
    // 给个名字
    /**
     * @param {?} signRuleEntity
     * @return {?}
     */
    function (signRuleEntity) {
        if (signRuleEntity && signRuleEntity.length > 0) {
            for (var i = 0; i < signRuleEntity.length; i++) {
                if (signRuleEntity[i].conclusionValue === 'Forward') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.forward');
                }
                else if (signRuleEntity[i].conclusionValue === 'Backward') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.backward');
                }
                else if (signRuleEntity[i].conclusionValue === 'Abort') {
                    signRuleEntity[i].conclusionName = this.localePipe.transform('multiInstanceLoopCharacteristics.completionConditionRulesList.abort');
                }
            }
        }
        return signRuleEntity;
    };
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        this.grid.endCellEdit();
        if (this.data.length === 0) {
            this.message.warning(this.localePipe.transform('component.signRule.notEmpty'));
        }
        else {
            /** @type {?} */
            var object = { value: this.data, parameters: null };
            this.submitModal.emit(object);
        }
    };
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.clickOK1 = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.grid.endCellEdit();
        if (this.data.length === 0) {
            this.message.warning(this.localePipe.transform('component.signRule.notEmpty'));
        }
        else {
            /** @type {?} */
            var counterSignRules_1 = new Array();
            this.data.forEach((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                /** @type {?} */
                var counterSignRule = new CounterSignRule(_this.bpmnModel);
                counterSignRule.CalculateType = d.calculateType;
                counterSignRule.ConclusionValue = d.conclusionValue;
                counterSignRule.ConditionValue = d.conditionValue;
                counterSignRule.WaitAllVotes = d.waitAllVotes;
                counterSignRule.CompletionCondition = new Condition(_this.bpmnModel);
                counterSignRule.CompletionCondition.Value = d.completionCondition;
                counterSignRules_1.push(counterSignRule);
            }));
            // let counterSignRules = new CounterSignRule(this.bpmnModel);
            this.submitModal.emit(counterSignRules_1);
        }
    };
    /**
     * @return {?}
     */
    SignRuleComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @param {?} e
     * @return {?}
     */
    SignRuleComponent.prototype.editConditon = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        var e_5, _a, e_6, _b, e_7, _c, e_8, _d, e_9, _e;
        // this.exprService.clearContext();
        /** @type {?} */
        var context = new Array();
        if (this.editCondition) {
            if (this.designerUIState.multiCounterSignVariables.length > 0) {
                var _loop_1 = function (variable) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.key === variable.key; }))) {
                        context.push(variable);
                    }
                };
                try {
                    for (var _f = tslib_1.__values(this.designerUIState.multiCounterSignVariables), _g = _f.next(); !_g.done; _g = _f.next()) {
                        var variable = _g.value;
                        _loop_1(variable);
                    }
                }
                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                finally {
                    try {
                        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);
                    }
                    finally { if (e_5) throw e_5.error; }
                }
            }
            if (context.length > 0) {
                try {
                    for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                        var v = context_1_1.value;
                        this.exprService.addContext(v);
                    }
                }
                catch (e_6_1) { e_6 = { error: e_6_1 }; }
                finally {
                    try {
                        if (context_1_1 && !context_1_1.done && (_b = context_1.return)) _b.call(context_1);
                    }
                    finally { if (e_6) throw e_6.error; }
                }
            }
        }
        else {
            if (this.counterSignVariables && this.counterSignVariables.length > 0) {
                var _loop_2 = function (variable) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.key === variable.key; }))) {
                        context.push(variable);
                    }
                };
                try {
                    for (var _h = tslib_1.__values(this.counterSignVariables), _j = _h.next(); !_j.done; _j = _h.next()) {
                        var variable = _j.value;
                        _loop_2(variable);
                    }
                }
                catch (e_7_1) { e_7 = { error: e_7_1 }; }
                finally {
                    try {
                        if (_j && !_j.done && (_c = _h.return)) _c.call(_h);
                    }
                    finally { if (e_7) throw e_7.error; }
                }
            }
            if (this.designerUIState.subActivityContext.length > 0) {
                var _loop_3 = function (variable) {
                    if (!context.some((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.key === variable.key; }))) {
                        context.push(variable);
                    }
                };
                try {
                    for (var _k = tslib_1.__values(this.designerUIState.subActivityContext), _l = _k.next(); !_l.done; _l = _k.next()) {
                        var variable = _l.value;
                        _loop_3(variable);
                    }
                }
                catch (e_8_1) { e_8 = { error: e_8_1 }; }
                finally {
                    try {
                        if (_l && !_l.done && (_d = _k.return)) _d.call(_k);
                    }
                    finally { if (e_8) throw e_8.error; }
                }
            }
            if (context.length > 0) {
                try {
                    for (var context_2 = tslib_1.__values(context), context_2_1 = context_2.next(); !context_2_1.done; context_2_1 = context_2.next()) {
                        var v = context_2_1.value;
                        this.exprService.addContext(v);
                    }
                }
                catch (e_9_1) { e_9 = { error: e_9_1 }; }
                finally {
                    try {
                        if (context_2_1 && !context_2_1.done && (_e = context_2.return)) _e.call(context_2);
                    }
                    finally { if (e_9) throw e_9.error; }
                }
            }
        }
        this.exprService.setEditPattern(ExprEditMode.Advanced); // 表达式展现模式：默认高级版（会签规则需要上下文变量）
        this.exprService.addExpressionText(e.instance.value);
        this.exprService.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        function (cond) {
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.exprService.exprEntity.contextEntities = _this.exprService.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * 选中审批项
     */
    /**
     * 选中审批项
     * @return {?}
     */
    SignRuleComponent.prototype.approvalSelect = /**
     * 选中审批项
     * @return {?}
     */
    function () {
        var e_10, _a;
        /** @type {?} */
        var selections = this.apvlItemsGrid.checkeds;
        if (selections && selections.length > 0) {
            try {
                for (var selections_1 = tslib_1.__values(selections), selections_1_1 = selections_1.next(); !selections_1_1.done; selections_1_1 = selections_1.next()) {
                    var selection = selections_1_1.value;
                    /** @type {?} */
                    var signRule = new SignRuleEntity();
                    signRule.id = ProcessDeUtil.GenerateElementId();
                    signRule.conclusionValue = selection.data.value;
                    signRule.conclusionName = selection.data.text;
                    this.data.push(signRule);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (selections_1_1 && !selections_1_1.done && (_a = selections_1.return)) _a.call(selections_1);
                }
                finally { if (e_10) throw e_10.error; }
            }
            this.grid.loadData(this.data);
            this.apvlItemDialog.close();
        }
        else {
            this.message.info(this.localePipe.transform('component.signRule.pleaseSelect'));
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    SignRuleComponent.prototype.endEdit = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.curValue = e.rowData;
        // 自定义会签规则和预置会签规则互斥
        if (this.preValue.completionCondition !== this.curValue.completionCondition &&
            !(this.isEmpty(this.preValue.completionCondition) && this.isEmpty(this.curValue.completionCondition))) {
            this.data[e.rowIndex].calculateType = 'null',
                this.data[e.rowIndex].conditionValue = '0';
            this.data[e.rowIndex].waitAllVotes = false;
        }
        else if (this.preValue.calculateType !== this.curValue.calculateType ||
            this.preValue.conditionValue !== this.curValue.conditionValue ||
            this.preValue.waitAllVotes !== this.curValue.waitAllVotes) {
            this.data[e.rowIndex].completionCondition = null;
        }
        if (e.column.field === 'conditionValue' && this.data[e.rowIndex].calculateType === 'byProportion'
            && Number.parseInt(e.value) > 100) {
            this.message.info(this.localePipe.transform('component.signRule.maxConditionValue'));
            this.data[e.rowIndex].conditionValue = '100';
        }
        else if (e.column.field === 'conditionValue' && Number.parseInt(e.value) < 0) {
            this.message.info(this.localePipe.transform('component.signRule.minConditionValue'));
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if ((e.column.field === 'calculateType' || e.column.field === 'conditionValue') && (this.data[e.rowIndex].calculateType === 'oneVote' ||
            this.data[e.rowIndex].calculateType === 'fullVote') && Number.parseInt(this.data[e.rowIndex].conditionValue) !== 0) {
            this.message.info(this.localePipe.transform('component.signRule.noConditional'));
            this.data[e.rowIndex].conditionValue = '0';
        }
        else if (e.column.field === 'calculateType' && this.data[e.rowIndex].calculateType === 'byProportion' &&
            Number.parseInt(this.data[e.rowIndex].conditionValue) > 100) {
            this.message.info(this.localePipe.transform('component.signRule.maxConditionValue'));
            this.data[e.rowIndex].conditionValue = '100';
        }
    };
    /**
     * @param {?} s
     * @return {?}
     */
    SignRuleComponent.prototype.isEmpty = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        if (!s || s.length == 0) {
            return true;
        }
        else {
            return false;
        }
    };
    SignRuleComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-sign-rule',
                    template: "  <div class=\"f-page\">\r\n    <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n      <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n        <farris-datagrid #grid [data]=\"data\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n          [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n          [multiSelect]=\"false\" [afterEdit]='afterEdit' (endEdit)=\"endEdit($event)\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </div>\r\n  </div>\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"deleteRow()\">{{'component.signRule.deleteRow' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #iconSelectFooter1>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"deleteRow1()\">{{'component.signRule.deleteRow' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK1()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n\r\n<farris-dialog #approvalItemDialog [buttons]=\"buttonRef\" [width]=\"700\" [height]=\"520\" title=\"{{'component.signRule.approvalOptions'| wfLocale}}\">\r\n  <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100 m-2\">\r\n      <farris-datagrid #approvalTable [columns]=\"approvalCols\" [data]=\"approvalItems\" [idField]=\"'value'\"\r\n        [fit]=\"true\" [fitColumns]=\"true\" [pagination]='false' [multiSelect]=\"true\"\r\n        [showCheckbox]=\"true\" [multiSelect]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\">\r\n      </farris-datagrid>\r\n  </div>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"approvalItemDialog.close()\">{{'component.signRule.clickCancel' | wfLocale}}</button>\r\n  <button class=\"btn btn-sm btn-primary px-3 mx-2\" (click)=\"approvalSelect()\">{{'component.signRule.clickOK' | wfLocale}}</button>\r\n</ng-template>\r\n",
                    providers: [
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    SignRuleComponent.ctorParameters = function () { return [
        { type: FormBuilder },
        { type: MessagerService },
        { type: ExpressionService },
        { type: ProcessDesignerUIState },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    SignRuleComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        value1: [{ type: Input }],
        editorParams: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        modalFooter1: [{ type: ViewChild, args: ['iconSelectFooter1',] }],
        apvlItemsGrid: [{ type: ViewChild, args: ['approvalTable',] }],
        apvlItemDialog: [{ type: ViewChild, args: ['approvalItemDialog',] }],
        grid: [{ type: ViewChild, args: ['grid',] }]
    };
    return SignRuleComponent;
}());
export { SignRuleComponent };
if (false) {
    /** @type {?} */
    SignRuleComponent.prototype.cls;
    /** @type {?} */
    SignRuleComponent.prototype.closeModal;
    /** @type {?} */
    SignRuleComponent.prototype.submitModal;
    /** @type {?} */
    SignRuleComponent.prototype.editorParams;
    /** @type {?} */
    SignRuleComponent.prototype.modalFooter;
    /** @type {?} */
    SignRuleComponent.prototype.modalFooter1;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemsGrid;
    /** @type {?} */
    SignRuleComponent.prototype.apvlItemDialog;
    /** @type {?} */
    SignRuleComponent.prototype.grid;
    /** @type {?} */
    SignRuleComponent.prototype.modalConfig;
    /** @type {?} */
    SignRuleComponent.prototype.editCondition;
    /** @type {?} */
    SignRuleComponent.prototype.data;
    /** @type {?} */
    SignRuleComponent.prototype.calculationMethods;
    /** @type {?} */
    SignRuleComponent.prototype.counterSignVariables;
    /** @type {?} */
    SignRuleComponent.prototype.bpmnModel;
    /**
     * **** 审批项帮助参数 ********************************************************
     * @type {?}
     */
    SignRuleComponent.prototype.approvalCols;
    /** @type {?} */
    SignRuleComponent.prototype.approvalItems;
    /** @type {?} */
    SignRuleComponent.prototype.approvalItems1;
    /**
     * ********************************
     * @type {?}
     */
    SignRuleComponent.prototype.columns;
    /** @type {?} */
    SignRuleComponent.prototype.preValue;
    /** @type {?} */
    SignRuleComponent.prototype.curValue;
    /**
     * 结束编辑前事件
     * @type {?}
     */
    SignRuleComponent.prototype.afterEdit;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.exprService;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    SignRuleComponent.prototype.localePipe;
}
var SignRuleConverter = /** @class */ (function () {
    function SignRuleConverter(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    SignRuleConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        // 会签规则只要启用就有默认值，所以始终置为'已设置';
        return this.localePipe.transform("component.signRule.set");
    };
    return SignRuleConverter;
}());
export { SignRuleConverter };
if (false) {
    /**
     * @type {?}
     * @private
     */
    SignRuleConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbi1ydWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvc2lnbi1ydWxlL3NpZ24tcnVsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXBLLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDNUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQWEsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDNUUsT0FBTyxFQUFjLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzdELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzFCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUVoRyxPQUFPLEVBQWEsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDakUsT0FBTyxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUUsTUFB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O0lBQy9CLGlDQUE0Qjs7SUFDNUIsK0NBSUU7O0lBQ0YsaURBQXVDOztJQUV2QyxzQ0FBc0Q7Ozs7O0lBRXRELHlDQUMyRjs7SUFDM0YsMENBQTBCOztJQUUxQiwyQ0FJRTs7Ozs7SUFFRixvQ0ErQkU7O0lBZ05GLHFDQUF5Qjs7SUFDekIscUNBQXlCOzs7OztJQUl6QixzQ0FHQzs7Ozs7SUFyTkMsd0NBQWdDOzs7OztJQUNoQyxvQ0FBZ0M7Ozs7O0lBQ2hDLHdDQUFzQzs7Ozs7SUFDdEMsNENBQStDOzs7OztJQUMvQyxnQ0FBMEM7Ozs7O0lBQzFDLHFDQUEyQzs7Ozs7SUFDM0Msc0NBQWlEOzs7OztJQUNqRCx1Q0FBNEM7O0FBMFBoRDtJQUNFLDJCQUNVLFVBQXdCO1FBQXhCLGVBQVUsR0FBVixVQUFVLENBQWM7SUFDOUIsQ0FBQzs7Ozs7SUFFTCxxQ0FBUzs7OztJQUFULFVBQVUsSUFBVztRQUNuQiw2QkFBNkI7UUFDM0IsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFURCxJQVNDOzs7Ozs7O0lBUEcsdUNBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEhvc3RCaW5kaW5nLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBMT0NBTEVfSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFNpZ25SdWxlRW50aXR5IH0gZnJvbSAnLi9lbnRpdGVzL3NpZ24tcnVsZS5lbnRpdHknO1xyXG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRpYWxvZyc7XHJcbmltcG9ydCB7IEV4cHJFZGl0TW9kZSwgRXhwcmVzc2lvblNlcnZpY2UsIFZhckVudGl0eSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVVdGlsIH0gZnJvbSAnLi4vLi4vZG9tYWluL3Byb2Nlc3MtZGUtdXRpbCc7XHJcbmltcG9ydCB7IEVkaXRvclR5cGVzIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZC1lZGl0b3JzJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uL2kxOG4vcGlwZS93Zi1wcm9jZXNzLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IFdGX1BST0NFU1NfRURJVE9SX0xBTkdfUkVTT1VSQ0VTIH0gZnJvbSAnLi4vLi4vaTE4bi9hc3NldHMvbGFuZy5yZXNvdXJjZSc7XHJcbmltcG9ydCB7IEJwbW5Nb2RlbCwgQnBtbk1vZGVsSGVscGVyIH0gZnJvbSAnQGVkcC1wbWYvYnBtbi1tb2RlbCc7XHJcbmltcG9ydCB7IENvbmRpdGlvbiwgQ291bnRlclNpZ25SdWxlIH0gZnJvbSAnQGdzcC13Zi93Zi1wcm9jZXNzLW1vZGVsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXNpZ24tcnVsZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3NpZ24tcnVsZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vc2lnbi1ydWxlLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgICBXZkxvY2FsZVBpcGUsXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2lnblJ1bGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuXHJcbiAgLy/kvJrnrb7op4TliJnmiZPlvIDpobXpnaJcclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZShydWxlczogYW55W10pIHtcclxuICAgIGlmIChydWxlcyAmJiBydWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgcnVsZSBvZiBydWxlcykge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IG5ldyBTaWduUnVsZUVudGl0eSgpO1xyXG4gICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICB2YWwuY29uY2x1c2lvblZhbHVlID0gcnVsZS5Db25jbHVzaW9uVmFsdWU7XHJcbiAgICAgICAgdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZS5Db25jbHVzaW9uTmFtZTtcclxuICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9IHJ1bGUuQ2FsY3VsYXRlVHlwZSA/IHJ1bGUuQ2FsY3VsYXRlVHlwZSA6ICdudWxsJztcclxuICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSBydWxlLkNvbmRpdGlvblZhbHVlID8gcnVsZS5Db25kaXRpb25WYWx1ZSA6IDA7XHJcbiAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHJ1bGUuV2FpdEFsbFZvdGVzID8gcnVsZS5XYWl0QWxsVm90ZXMgOiBmYWxzZTtcclxuICAgICAgICB2YWwuY29tcGxldGlvbkNvbmRpdGlvbiA9IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbiA/IHJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbi5fdmFsdWUgOiBudWxsO1xyXG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7IC8vIOWmguaenOaooeWei+S4iuayoeacieS8muetvuinhOWIme+8jOiHquWKqOW4puWFpeaJgOacieeahOWuoeaJuemAiemhuVxyXG4gICAgICB0aGlzLmRlbGV0ZVJvdygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/lpJrlrp7kvovmiZPlvIDlrozmiJDop4TliJnpobXpnaJcclxuICBASW5wdXQoKVxyXG4gIHNldCB2YWx1ZTEocnVsZXM6IGFueVtdKSB7XHJcbiAgICB0aGlzLmVkaXRDb25kaXRpb24gPSB0cnVlO1xyXG4gICAgaWYgKHJ1bGVzICYmIHJ1bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBydWxlIG9mIHJ1bGVzKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gbmV3IFNpZ25SdWxlRW50aXR5KCk7XHJcbiAgICAgICAgdmFsLmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGUuQ29uY2x1c2lvblZhbHVlO1xyXG4gICAgICAgIC8vIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGUuY29uY2x1c2lvbk5hbWU7XHJcbiAgICAgICAgdmFsLmNhbGN1bGF0ZVR5cGUgPSBydWxlLkNhbGN1bGF0ZVR5cGUgPyBydWxlLkNhbGN1bGF0ZVR5cGUgOiAnbnVsbCc7XHJcbiAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gcnVsZS5Db25kaXRpb25WYWx1ZSA/IHJ1bGUuQ29uZGl0aW9uVmFsdWUgOiAwO1xyXG4gICAgICAgIHZhbC53YWl0QWxsVm90ZXMgPSBydWxlLldhaXRBbGxWb3RlcyA/IHJ1bGUuV2FpdEFsbFZvdGVzIDogZmFsc2U7XHJcbiAgICAgICAgdmFsLmNvbXBsZXRpb25Db25kaXRpb24gPSBydWxlLkNvbXBsZXRpb25Db25kaXRpb24gPyBydWxlLkNvbXBsZXRpb25Db25kaXRpb24uVmFsdWUgOiBudWxsO1xyXG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kYXRhID0gdGhpcy5zZXROYW1lMSh0aGlzLmRhdGEpO1xyXG4gICAgfSBlbHNlIHsgLy8g5aaC5p6c5qih5Z6L5LiK5rKh5pyJ5Lya562+6KeE5YiZ77yM6Ieq5Yqo5bim5YWl5omA5pyJ55qE5a6h5om56YCJ6aG5XHJcbiAgICAgIHRoaXMuZGVsZXRlUm93MSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xyXG4gIEBWaWV3Q2hpbGQoJ2ljb25TZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyMScpIG1vZGFsRm9vdGVyMTogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdhcHByb3ZhbFRhYmxlJykgYXB2bEl0ZW1zR3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnYXBwcm92YWxJdGVtRGlhbG9nJykgYXB2bEl0ZW1EaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdncmlkJykgZ3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5jb3VudGVyc2lnblJ1bGVzJyksXHJcbiAgICB3aWR0aDogODAwLFxyXG4gICAgaGVpZ2h0OiA1MjAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcbiAgZWRpdENvbmRpdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGRhdGE6IFNpZ25SdWxlRW50aXR5W10gPSBbXTtcclxuICBjYWxjdWxhdGlvbk1ldGhvZHM6IGFueVtdID0gW1xyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuYnlOdW1iZXInKSwgdmFsdWU6ICdieU51bWJlcicgfSxcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmJ5UHJvcG9ydGlvbicpLCB2YWx1ZTogJ2J5UHJvcG9ydGlvbicgfSxcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmN1c3RvbUNvbmRpdGlvbnMnKSwgdmFsdWU6ICdudWxsJyB9LFxyXG4gIF07XHJcbiAgY291bnRlclNpZ25WYXJpYWJsZXM6IFZhckVudGl0eVtdID0gW107XHJcblxyXG4gIGJwbW5Nb2RlbDogQnBtbk1vZGVsID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYnBtbk1vZGVsO1xyXG4gIC8qKioqKioqIOWuoeaJuemhueW4ruWKqeWPguaVsCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgYXBwcm92YWxDb2xzID0gW3sgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS52YWx1ZScpLCBmaWVsZDogJ3ZhbHVlJywgd2lkdGg6IDgwIH0sXHJcbiAgeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLnRleHQnKSwgZmllbGQ6ICd0ZXh0Jywgd2lkdGg6IDkwIH1dO1xyXG4gIGFwcHJvdmFsSXRlbXM6IGFueVtdID0gW107XHJcblxyXG4gIGFwcHJvdmFsSXRlbXMxOiBhbnlbXSA9IFtcclxuICAgIHsgdmFsdWU6ICdGb3J3YXJkJywgIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlc0xpc3QuZm9yd2FyZCcpIH0sXHJcbiAgICB7IHZhbHVlOiAnQmFja3dhcmQnLCB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdtdWx0aUluc3RhbmNlTG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXNMaXN0LmJhY2t3YXJkJykgfSxcclxuICAgIHsgdmFsdWU6ICdBYm9ydCcsICB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdtdWx0aUluc3RhbmNlTG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXNMaXN0LmFib3J0JykgfVxyXG4gIF07XHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7IGZpZWxkOiAnY29uY2x1c2lvbk5hbWUnLCB3aWR0aDogMjUsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuY29uY2x1c2lvbk5hbWUnKSB9LFxyXG4gICAgeyBmaWVsZDogJ2NvbmNsdXNpb25WYWx1ZScsIHdpZHRoOiAyNSwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5jb25jbHVzaW9uVmFsdWUnKSB9LFxyXG4gICAgeyBmaWVsZDogJ2NhbGN1bGF0ZVR5cGUnLCB3aWR0aDogNDAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUuY2FsY3VsYXRlVHlwZScpLFxyXG4gICAgICBmb3JtYXR0ZXI6IHt0eXBlOiAnZW51bScsb3B0aW9uczogeyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICd0ZXh0JywgZGF0YTogdGhpcy5jYWxjdWxhdGlvbk1ldGhvZHMgfX0sXHJcbiAgICAgIGVkaXRvcjoge3R5cGU6IEVkaXRvclR5cGVzLkNPTUJPTElTVCxvcHRpb25zOiB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ3RleHQnLCBkYXRhOiB0aGlzLmNhbGN1bGF0aW9uTWV0aG9kcywgaWRGaWVsZDogJ3ZhbHVlJywgcGFuZWxIZWlnaHQ6ICdhdXRvJyB9fVxyXG4gICAgfSxcclxuICAgIHsgZmllbGQ6ICdjb25kaXRpb25WYWx1ZScsIHdpZHRoOiAyNSwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5jb25kaXRpb25WYWx1ZScpLFxyXG4gICAgICBlZGl0b3I6IHsgdHlwZTogRWRpdG9yVHlwZXMuTlVNQkVSQk9YLCBvcHRpb25zOiB7fSB9LFxyXG4gICAgICBmb3JtYXR0ZXI6e3R5cGU6ICdudW1iZXInLCBvcHRpb25zOiB7IHByZWNpc2lvbjogMCwgbWluOiAwIH0gfVxyXG4gICAgfSxcclxuICAgIHsgZmllbGQ6ICd3YWl0QWxsVm90ZXMnLCB3aWR0aDogMzUsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUud2FpdEFsbFZvdGVzJyksXHJcbiAgICAgIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5TV0lUQ0gsIG9wdGlvbnM6IHt9IH0sXHJcbiAgICAgIGZvcm1hdHRlcjogeyB0eXBlOiAnYm9vbGVhbicsIG9wdGlvbnM6IHsgdHJ1ZVRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS55ZXMnKSwgZmFsc2VUZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubm8nKSB9fVxyXG4gICAgfSxcclxuICAgIHsgZmllbGQ6ICdjb21wbGV0aW9uQ29uZGl0aW9uJywgd2lkdGg6IDUwLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLmN1c3RvbUNvbmRpdGlvbnMnKSxcclxuICAgICAgZWRpdG9yOiB7XHJcbiAgICAgICAgdHlwZTogJ2lucHV0LWdyb3VwJyxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICBjbGlja0hhbmRsZTogKGUpID0+IHtcclxuICAgICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgICAgdGhpcy5lZGl0Q29uZGl0b24oZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGVhcicsIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgZXhwclNlcnZpY2U6IEV4cHJlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBkZXNpZ25lclVJU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmNvdW50ZXJTaWduVmFyaWFibGVzID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuY291bnRlclNpZ25WYXJpYWJsZXMgfHwgW107XHJcbiAgICB0aGlzLmFwcHJvdmFsSXRlbXMgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hcHByb3ZhbEl0ZW1zIHx8IFtdO1xyXG4gIH1cclxuICAvLyDph43nva7liqjkvZxcclxuICBkZWxldGVSb3coKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgIGNvbnN0IHJ1bGVJdGVtcyA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmFwcHJvdmFsSXRlbXMgfHwgW107XHJcbiAgICBpZiAocnVsZUl0ZW1zICYmIHJ1bGVJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgcnVsZUl0ZW0gb2YgcnVsZUl0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gbmV3IFNpZ25SdWxlRW50aXR5KCk7XHJcbiAgICAgICAgaWYgKHJ1bGVJdGVtLnZhbHVlID09PSAnUGFzcycpIHtcclxuICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlSXRlbS52YWx1ZTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGVJdGVtLnRleHQ7XHJcbiAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdieVByb3BvcnRpb24nO1xyXG4gICAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gJzEwMCc7XHJcbiAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJdGVtLnZhbHVlID09PSAnQmFjaycpIHtcclxuICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlSXRlbS52YWx1ZTtcclxuICAgICAgICAgIHZhbC5jb25jbHVzaW9uTmFtZSA9IHJ1bGVJdGVtLnRleHQ7XHJcbiAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdieU51bWJlcic7XHJcbiAgICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSAnMSc7XHJcbiAgICAgICAgICB2YWwud2FpdEFsbFZvdGVzID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFsLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZUl0ZW0udGV4dDtcclxuICAgICAgICAgIHZhbC5jYWxjdWxhdGVUeXBlID0gJ251bGwnO1xyXG4gICAgICAgICAgdmFsLmNvbmRpdGlvblZhbHVlID0gJzAnO1xyXG4gICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gICAgLy8g6YeN572u5Yqo5L2cXHJcbiAgICBkZWxldGVSb3cxKCkge1xyXG4gICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgaWYgKHRoaXMuYXBwcm92YWxJdGVtczEgJiYgdGhpcy5hcHByb3ZhbEl0ZW1zMS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBydWxlSXRlbSBvZiB0aGlzLmFwcHJvdmFsSXRlbXMxKSB7XHJcbiAgICAgICAgICBjb25zdCB2YWwgPSBuZXcgU2lnblJ1bGVFbnRpdHkoKTtcclxuICAgICAgICAgIGlmIChydWxlSXRlbS52YWx1ZSA9PT0gJ0ZvcndhcmQnKSB7XHJcbiAgICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdieVByb3BvcnRpb24nO1xyXG4gICAgICAgICAgICB2YWwuY29uZGl0aW9uVmFsdWUgPSAnMTAwJztcclxuICAgICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGVJdGVtLnZhbHVlID09PSAnQmFja3dhcmQnIHx8IHJ1bGVJdGVtLnZhbHVlID09PSAnQWJvcnQnKSB7XHJcbiAgICAgICAgICAgIHZhbC5pZCA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgdmFsLmNvbmNsdXNpb25WYWx1ZSA9IHJ1bGVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICB2YWwuY29uY2x1c2lvbk5hbWUgPSBydWxlSXRlbS50ZXh0O1xyXG4gICAgICAgICAgICB2YWwuY2FsY3VsYXRlVHlwZSA9ICdieU51bWJlcic7XHJcbiAgICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcxJztcclxuICAgICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWwuaWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgIHZhbC5jb25jbHVzaW9uVmFsdWUgPSBydWxlSXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgdmFsLmNvbmNsdXNpb25OYW1lID0gcnVsZUl0ZW0udGV4dDtcclxuICAgICAgICAgICAgdmFsLmNhbGN1bGF0ZVR5cGUgPSAnbnVsbCc7XHJcbiAgICAgICAgICAgIHZhbC5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgICAgICAgICAgdmFsLndhaXRBbGxWb3RlcyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmRhdGEucHVzaCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICAvLyDnu5nkuKrlkI3lrZdcclxuICAgICBzZXROYW1lMShzaWduUnVsZUVudGl0eTpTaWduUnVsZUVudGl0eVtdKSB7XHJcbiAgICAgIGlmIChzaWduUnVsZUVudGl0eSAmJiBzaWduUnVsZUVudGl0eS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaWduUnVsZUVudGl0eS5sZW5ndGg7aSsrKSB7XHJcbiAgICAgICAgICBpZiAoc2lnblJ1bGVFbnRpdHlbaV0uY29uY2x1c2lvblZhbHVlID09PSAnRm9yd2FyZCcpIHtcclxuICAgICAgICAgICAgc2lnblJ1bGVFbnRpdHlbaV0uY29uY2x1c2lvbk5hbWUgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdtdWx0aUluc3RhbmNlTG9vcENoYXJhY3RlcmlzdGljcy5jb21wbGV0aW9uQ29uZGl0aW9uUnVsZXNMaXN0LmZvcndhcmQnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc2lnblJ1bGVFbnRpdHlbaV0uY29uY2x1c2lvblZhbHVlID09PSAnQmFja3dhcmQnKSB7XHJcbiAgICAgICAgICAgIHNpZ25SdWxlRW50aXR5W2ldLmNvbmNsdXNpb25OYW1lID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnbXVsdGlJbnN0YW5jZUxvb3BDaGFyYWN0ZXJpc3RpY3MuY29tcGxldGlvbkNvbmRpdGlvblJ1bGVzTGlzdC5iYWNrd2FyZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChzaWduUnVsZUVudGl0eVtpXS5jb25jbHVzaW9uVmFsdWUgPT09ICdBYm9ydCcpe1xyXG4gICAgICAgICAgICBzaWduUnVsZUVudGl0eVtpXS5jb25jbHVzaW9uTmFtZSA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ211bHRpSW5zdGFuY2VMb29wQ2hhcmFjdGVyaXN0aWNzLmNvbXBsZXRpb25Db25kaXRpb25SdWxlc0xpc3QuYWJvcnQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNpZ25SdWxlRW50aXR5O1xyXG4gICAgfVxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2Uud2FybmluZyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubm90RW1wdHknKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBvYmplY3QgPSB7IHZhbHVlOiB0aGlzLmRhdGEsIHBhcmFtZXRlcnM6IG51bGwgfTtcclxuICAgICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja09LMSgpIHtcclxuICAgIHRoaXMuZ3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLndhcm5pbmcodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLm5vdEVtcHR5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IGNvdW50ZXJTaWduUnVsZXMgPSBuZXcgQXJyYXk8Q291bnRlclNpZ25SdWxlPigpO1xyXG4gICAgICB0aGlzLmRhdGEuZm9yRWFjaChkID0+IHtcclxuICAgICAgICBsZXQgY291bnRlclNpZ25SdWxlID0gbmV3IENvdW50ZXJTaWduUnVsZSh0aGlzLmJwbW5Nb2RlbCk7XHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlLkNhbGN1bGF0ZVR5cGUgPSBkLmNhbGN1bGF0ZVR5cGU7XHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlLkNvbmNsdXNpb25WYWx1ZSA9IGQuY29uY2x1c2lvblZhbHVlO1xyXG4gICAgICAgIGNvdW50ZXJTaWduUnVsZS5Db25kaXRpb25WYWx1ZSA9IGQuY29uZGl0aW9uVmFsdWVcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGUuV2FpdEFsbFZvdGVzID0gZC53YWl0QWxsVm90ZXM7XHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlLkNvbXBsZXRpb25Db25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKHRoaXMuYnBtbk1vZGVsKTtcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGUuQ29tcGxldGlvbkNvbmRpdGlvbi5WYWx1ZSA9IGQuY29tcGxldGlvbkNvbmRpdGlvbjtcclxuICAgICAgICBjb3VudGVyU2lnblJ1bGVzLnB1c2goY291bnRlclNpZ25SdWxlKTtcclxuICAgICAgfSlcclxuICAgICAgLy8gbGV0IGNvdW50ZXJTaWduUnVsZXMgPSBuZXcgQ291bnRlclNpZ25SdWxlKHRoaXMuYnBtbk1vZGVsKTtcclxuXHJcbiAgICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChjb3VudGVyU2lnblJ1bGVzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIGVkaXRDb25kaXRvbihlOiBhbnkpIHtcclxuICAgIC8vIHRoaXMuZXhwclNlcnZpY2UuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZih0aGlzLmVkaXRDb25kaXRpb24pIHtcclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLm11bHRpQ291bnRlclNpZ25WYXJpYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUubXVsdGlDb3VudGVyU2lnblZhcmlhYmxlcykge1xyXG4gICAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICAgIHRoaXMuZXhwclNlcnZpY2UuYWRkQ29udGV4dCh2KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1lbHNlIHtcclxuICAgICAgaWYgKHRoaXMuY291bnRlclNpZ25WYXJpYWJsZXMgJiYgdGhpcy5jb3VudGVyU2lnblZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmNvdW50ZXJTaWduVmFyaWFibGVzKSB7XHJcbiAgICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgICAgdGhpcy5leHByU2VydmljZS5hZGRDb250ZXh0KHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICAgIHRoaXMuZXhwclNlcnZpY2Uuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkFkdmFuY2VkKTsgLy8g6KGo6L6+5byP5bGV546w5qih5byP77ya6buY6K6k6auY57qn54mI77yI5Lya562+6KeE5YiZ6ZyA6KaB5LiK5LiL5paH5Y+Y6YeP77yJXHJcbiAgICB0aGlzLmV4cHJTZXJ2aWNlLmFkZEV4cHJlc3Npb25UZXh0KGUuaW5zdGFuY2UudmFsdWUpO1xyXG4gICAgdGhpcy5leHByU2VydmljZS5idWlsZEV4cHJlc3Npb24oKS50aGVuKChjb25kOiBzdHJpbmcpID0+IHtcclxuICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShjb25kKTtcclxuICAgICAgZS5pbnN0YW5jZS5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgIC8v54K55Ye756Gu5a6a5ZCO77yM5Y676Zmk6KGo6L6+5byP6YeM6Z2i55qE5paw5aKe55qE5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhwclNlcnZpY2UuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHJTZXJ2aWNlLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgInkuK3lrqHmibnpoblcclxuICAgKi9cclxuICBhcHByb3ZhbFNlbGVjdCgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbnM6IGFueVtdID0gdGhpcy5hcHZsSXRlbXNHcmlkLmNoZWNrZWRzO1xyXG4gICAgaWYgKHNlbGVjdGlvbnMgJiYgc2VsZWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0aW9uIG9mIHNlbGVjdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBzaWduUnVsZSA9IG5ldyBTaWduUnVsZUVudGl0eSgpO1xyXG4gICAgICAgIHNpZ25SdWxlLmlkID0gUHJvY2Vzc0RlVXRpbC5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG4gICAgICAgIHNpZ25SdWxlLmNvbmNsdXNpb25WYWx1ZSA9IHNlbGVjdGlvbi5kYXRhLnZhbHVlO1xyXG4gICAgICAgIHNpZ25SdWxlLmNvbmNsdXNpb25OYW1lID0gc2VsZWN0aW9uLmRhdGEudGV4dDtcclxuICAgICAgICB0aGlzLmRhdGEucHVzaChzaWduUnVsZSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMuZGF0YSk7XHJcbiAgICAgIHRoaXMuYXB2bEl0ZW1EaWFsb2cuY2xvc2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5wbGVhc2VTZWxlY3QnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJlVmFsdWU6IFNpZ25SdWxlRW50aXR5O1xyXG4gIGN1clZhbHVlOiBTaWduUnVsZUVudGl0eTtcclxuLyoqXHJcbiAqIOe7k+adn+e8lui+keWJjeS6i+S7tlxyXG4gKi9cclxuICBhZnRlckVkaXQgPSAocm93SW5kZXg6IG51bWJlciwgcm93RGF0YTogYW55LCBjb2x1bW4/OiBEYXRhQ29sdW1uKSA9PiB7XHJcbiAgICB0aGlzLnByZVZhbHVlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3dEYXRhKSk7XHJcbiAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBlbmRFZGl0KGU6IGFueSkge1xyXG4gICAgdGhpcy5jdXJWYWx1ZSA9IGUucm93RGF0YTtcclxuICAgIC8vIOiHquWumuS5ieS8muetvuinhOWImeWSjOmihOe9ruS8muetvuinhOWImeS6kuaWpVxyXG4gICAgaWYodGhpcy5wcmVWYWx1ZS5jb21wbGV0aW9uQ29uZGl0aW9uICE9PSB0aGlzLmN1clZhbHVlLmNvbXBsZXRpb25Db25kaXRpb24gJiYgXHJcbiAgICAgICEodGhpcy5pc0VtcHR5KHRoaXMucHJlVmFsdWUuY29tcGxldGlvbkNvbmRpdGlvbikgJiYgdGhpcy5pc0VtcHR5KHRoaXMuY3VyVmFsdWUuY29tcGxldGlvbkNvbmRpdGlvbikpKSB7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jYWxjdWxhdGVUeXBlID0gJ251bGwnLFxyXG4gICAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29uZGl0aW9uVmFsdWUgPSAnMCc7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS53YWl0QWxsVm90ZXMgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5wcmVWYWx1ZS5jYWxjdWxhdGVUeXBlICE9PSB0aGlzLmN1clZhbHVlLmNhbGN1bGF0ZVR5cGUgfHxcclxuICAgICAgdGhpcy5wcmVWYWx1ZS5jb25kaXRpb25WYWx1ZSAhPT0gdGhpcy5jdXJWYWx1ZS5jb25kaXRpb25WYWx1ZSB8fFxyXG4gICAgICB0aGlzLnByZVZhbHVlLndhaXRBbGxWb3RlcyAhPT0gdGhpcy5jdXJWYWx1ZS53YWl0QWxsVm90ZXMpIHtcclxuICAgICAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29tcGxldGlvbkNvbmRpdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZS5jb2x1bW4uZmllbGQgPT09ICdjb25kaXRpb25WYWx1ZScgJiYgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNhbGN1bGF0ZVR5cGUgPT09ICdieVByb3BvcnRpb24nXHJcbiAgICAmJiBOdW1iZXIucGFyc2VJbnQoZS52YWx1ZSkgPiAxMDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLm1heENvbmRpdGlvblZhbHVlJykpO1xyXG4gICAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29uZGl0aW9uVmFsdWUgPSAnMTAwJztcclxuICAgIH0gZWxzZSBpZiAoZS5jb2x1bW4uZmllbGQgPT09ICdjb25kaXRpb25WYWx1ZScgJiYgTnVtYmVyLnBhcnNlSW50KGUudmFsdWUpIDwgMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuc2lnblJ1bGUubWluQ29uZGl0aW9uVmFsdWUnKSk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgIH0gZWxzZSBpZiAoKGUuY29sdW1uLmZpZWxkID09PSAnY2FsY3VsYXRlVHlwZScgfHwgZS5jb2x1bW4uZmllbGQgPT09ICdjb25kaXRpb25WYWx1ZScpICYmICh0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ29uZVZvdGUnIHx8XHJcbiAgICB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ2Z1bGxWb3RlJykgJiYgTnVtYmVyLnBhcnNlSW50KHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSkgIT09IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnNpZ25SdWxlLm5vQ29uZGl0aW9uYWwnKSk7XHJcbiAgICAgIHRoaXMuZGF0YVtlLnJvd0luZGV4XS5jb25kaXRpb25WYWx1ZSA9ICcwJztcclxuICAgIH0gZWxzZSBpZiAoZS5jb2x1bW4uZmllbGQgPT09ICdjYWxjdWxhdGVUeXBlJyAmJiB0aGlzLmRhdGFbZS5yb3dJbmRleF0uY2FsY3VsYXRlVHlwZSA9PT0gJ2J5UHJvcG9ydGlvbicgJiZcclxuICAgIE51bWJlci5wYXJzZUludCh0aGlzLmRhdGFbZS5yb3dJbmRleF0uY29uZGl0aW9uVmFsdWUpID4gMTAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5zaWduUnVsZS5tYXhDb25kaXRpb25WYWx1ZScpKTtcclxuICAgICAgdGhpcy5kYXRhW2Uucm93SW5kZXhdLmNvbmRpdGlvblZhbHVlID0gJzEwMCc7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIGlzRW1wdHkoczogc3RyaW5nKSB7XHJcbiAgICBpZighcyB8fCBzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNpZ25SdWxlQ29udmVydGVyIGltcGxlbWVudHMgVHlwZUNvbnZlcnRlciB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZVxyXG4gICkgeyB9XHJcblxyXG4gIGNvbnZlcnRUbyhkYXRhOiBhbnlbXSk6IHN0cmluZyB7XHJcbiAgICAvLyDkvJrnrb7op4TliJnlj6ropoHlkK/nlKjlsLHmnInpu5jorqTlgLzvvIzmiYDku6Xlp4vnu4jnva7kuLon5bey6K6+572uJztcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQuc2lnblJ1bGUuc2V0XCIpO1xyXG4gIH1cclxufVxyXG4iXX0=