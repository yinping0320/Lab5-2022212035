/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { LookupGridComponent } from '@farris/ui-lookup';
import { WfTaskHandlerService } from '@gsp-wf/wf-task-handler';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
var ReleaseComponent = /** @class */ (function () {
    function ReleaseComponent(uiState, submitService, cdr, localeId, resources, localePipe) {
        this.uiState = uiState;
        this.submitService = submitService;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.submit = new EventEmitter();
        this.cancel = new EventEmitter();
        this.accessLevel = 'public';
        this.isAdministratorConfig = false;
        this.dataUri = '/api/runtime/sys/v1.0/sysOrgs';
        this.loadType = 'layerload';
        this.releaseType = 'release';
        this.items = new Array();
        this.releaseTypeList = [
            { value: 'release', name: this.localePipe.transform('component.release.release') },
            { value: 'update', name: this.localePipe.transform('component.release.update') },
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    /**
     * @return {?}
     */
    ReleaseComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.releaseType = this.procVersion === 1 ? 'release' : 'update';
        this.uiState.getUserInfo().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.applicantName = re.name;
            _this.applicantDepartment = re.orgName;
            _this.applicantId = re.id;
        }));
    };
    /**
     * @return {?}
     */
    ReleaseComponent.prototype.saveAsOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.uiState.createData().subscribe((/**
         * @param {?} saveData
         * @return {?}
         */
        function (saveData) {
            /** @type {?} */
            var dataId = saveData.returnValue.id;
            /** @type {?} */
            var data = {
                DataId: dataId,
                applicantName: _this.applicantName,
                applicantDepartment: _this.applicantDepartment,
                procName: _this.procName,
                procVersion: _this.procVersion,
                releaseType: _this.releaseType,
                textDetail: _this.textDetail,
                processDefinitionKey: _this.processDefinitionKey,
                applicantId: _this.applicantId
            };
            /** @type {?} */
            var Info = {
                ChangeType: 'Modify',
                ChangeInfo: data
            };
            _this.uiState.releaseSave(Info).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.mySubmit(dataId, '03bdca37-8439-4924-8aef-20f3f4092b59');
                _this.submit.next();
            }));
        }));
    };
    /**
     * @return {?}
     */
    ReleaseComponent.prototype.saveAsCancel = /**
     * @return {?}
     */
    function () {
        this.cancel.emit();
    };
    /**
     * @param {?} quill
     * @return {?}
     */
    ReleaseComponent.prototype.editorCreated = /**
     * @param {?} quill
     * @return {?}
     */
    function (quill) {
        /** @type {?} */
        var toolbar = quill.getModule('toolbar');
        this.editor = quill;
    };
    /**
     * @param {?} v
     * @return {?}
     */
    ReleaseComponent.prototype.contentChanged = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        console.log(v);
    };
    /**
     * @return {?}
     */
    ReleaseComponent.prototype.validator = /**
     * @return {?}
     */
    function () {
        return true;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ReleaseComponent.prototype.changeValue = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.releaseType = data;
    };
    /**
     * 发布前审核：提交审批
     */
    /**
     * 发布前审核：提交审批
     * @private
     * @param {?} dataId
     * @param {?} bizDefKey
     * @return {?}
     */
    ReleaseComponent.prototype.mySubmit = /**
     * 发布前审核：提交审批
     * @private
     * @param {?} dataId
     * @param {?} bizDefKey
     * @return {?}
     */
    function (dataId, bizDefKey) {
        this.submitService.submitWithBizDefKey(dataId, bizDefKey);
    };
    ReleaseComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-release-component',
                    template: "<div class=\"f-page f-page-card f-page-is-mainsubcard\">\r\n  <section class=\"f-page-main\">\r\n    <div class=\"f-struct-wrapper\">\r\n      <!-- <farris-section class=\"f-section-form f-section-in-mainsubcard\" [enableAccordion]=\"''\"\r\n        [subTitle]=\"''\" [enableMaximize]=\"false\"> -->\r\n        <div class=\"f-form-layout farris-form farris-form-controls-inline pr-4 m-2\">\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.applicantName' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"applicantName\" name=\"procName\" [readOnly]=\"true\"/>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.applicantDepartment' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"applicantDepartment\" name=\"procKey\" [readOnly]=\"true\"/>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.procName' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"procName\" name=\"procName\" [readOnly]=\"true\"/>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.procVersion' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"procVersion\" name=\"procVersion\" [readOnly]=\"true\"/>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.releaseType' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <farris-radiogroup [(ngModel)]=\"releaseType\" name=\"releaseType\" [data]=\"releaseTypeList\"\r\n                  [horizontal]=\"true\" (changeValue)=\"changeValue($event)\" [disabled]=\"true\">\r\n                  </farris-radiogroup>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 px-0 my-2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.release.textDetail' | wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <textarea [(ngModel)]=\"textDetail\" name=\"textarea\" id=\"textarea\" style=\"height: 250px; width: 100%\"\r\n                  [auto-size]=\"true\" [maxHeight]=\"500\" [textarea-zoom]=\"true\"></textarea>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      <!-- </farris-section> -->\r\n    </div>\r\n  </section>\r\n</div>\r\n\r\n<ng-template #buttonRef>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm mx-2\" (click)=\"saveAsCancel()\">{{'component.release.saveAsCancel' | wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-sm btn-primary mx-2\" (click)=\"saveAsOK()\">{{'component.release.saveAsOK' | wfLocale}}</button>\r\n</ng-template>\r\n",
                    providers: [
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ReleaseComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: WfTaskHandlerService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    ReleaseComponent.propDecorators = {
        btnRef: [{ type: ViewChild, args: ['buttonRef',] }],
        procName: [{ type: Input }],
        procVersion: [{ type: Input }],
        processDefinitionKey: [{ type: Input }],
        lookUp: [{ type: ViewChild, args: ['lookup',] }],
        submit: [{ type: Output }],
        cancel: [{ type: Output }]
    };
    return ReleaseComponent;
}());
export { ReleaseComponent };
if (false) {
    /** @type {?} */
    ReleaseComponent.prototype.btnRef;
    /** @type {?} */
    ReleaseComponent.prototype.applicantName;
    /** @type {?} */
    ReleaseComponent.prototype.applicantDepartment;
    /** @type {?} */
    ReleaseComponent.prototype.procName;
    /** @type {?} */
    ReleaseComponent.prototype.procVersion;
    /** @type {?} */
    ReleaseComponent.prototype.processDefinitionKey;
    /** @type {?} */
    ReleaseComponent.prototype.lookUp;
    /** @type {?} */
    ReleaseComponent.prototype.submit;
    /** @type {?} */
    ReleaseComponent.prototype.cancel;
    /** @type {?} */
    ReleaseComponent.prototype.session;
    /** @type {?} */
    ReleaseComponent.prototype.accessLevel;
    /** @type {?} */
    ReleaseComponent.prototype.organization;
    /** @type {?} */
    ReleaseComponent.prototype.organizationName;
    /** @type {?} */
    ReleaseComponent.prototype.textDetail;
    /** @type {?} */
    ReleaseComponent.prototype.isAdministratorConfig;
    /** @type {?} */
    ReleaseComponent.prototype.editor;
    /** @type {?} */
    ReleaseComponent.prototype.administrator;
    /** @type {?} */
    ReleaseComponent.prototype.dataUri;
    /** @type {?} */
    ReleaseComponent.prototype.applicantId;
    /** @type {?} */
    ReleaseComponent.prototype.loadType;
    /** @type {?} */
    ReleaseComponent.prototype.releaseType;
    /** @type {?} */
    ReleaseComponent.prototype.items;
    /** @type {?} */
    ReleaseComponent.prototype.releaseTypeList;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.uiState;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.submitService;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    ReleaseComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVsZWFzZS1jb21wb25lbnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9yZWxlYXNlLWNvbXBvbmVudC9yZWxlYXNlLWNvbXBvbmVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2SixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUV4RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUM1RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFHaEc7SUF5Q0UsMEJBQ1UsT0FBK0IsRUFDL0IsYUFBbUMsRUFDdkIsR0FBc0IsRUFDZixRQUFnQixFQUNSLFNBQWMsRUFDN0IsVUFBd0I7UUFMcEMsWUFBTyxHQUFQLE9BQU8sQ0FBd0I7UUFDL0Isa0JBQWEsR0FBYixhQUFhLENBQXNCO1FBQ3ZCLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ2YsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNSLGNBQVMsR0FBVCxTQUFTLENBQUs7UUFDN0IsZUFBVSxHQUFWLFVBQVUsQ0FBYztRQTFCcEMsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDakMsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFM0MsZ0JBQVcsR0FBRyxRQUFRLENBQUM7UUFJdkIsMEJBQXFCLEdBQUcsS0FBSyxDQUFDO1FBSTlCLFlBQU8sR0FBRywrQkFBK0IsQ0FBQztRQUUxQyxhQUFRLEdBQUcsV0FBVyxDQUFDO1FBQ3ZCLGdCQUFXLEdBQUcsU0FBUyxDQUFDO1FBQ3hCLFVBQUssR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQ3BCLG9CQUFlLEdBQUc7WUFDaEIsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxFQUFFO1lBQ2xGLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsMEJBQTBCLENBQUMsRUFBRTtTQUNqRixDQUFDO1FBU0EsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksWUFBWSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3RSxDQUFDOzs7O0lBRUQsbUNBQVE7OztJQUFSO1FBQUEsaUJBT0M7UUFOQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUNqRSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVM7Ozs7UUFBQyxVQUFBLEVBQUU7WUFDckMsS0FBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQzdCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQ3RDLEtBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUMzQixDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7SUFFRCxtQ0FBUTs7O0lBQVI7UUFBQSxpQkF1QkM7UUF0QkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQyxRQUFROztnQkFDckMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTs7Z0JBQ2hDLElBQUksR0FBRztnQkFDWCxNQUFNLEVBQUUsTUFBTTtnQkFDZCxhQUFhLEVBQUUsS0FBSSxDQUFDLGFBQWE7Z0JBQ2pDLG1CQUFtQixFQUFFLEtBQUksQ0FBQyxtQkFBbUI7Z0JBQzdDLFFBQVEsRUFBRSxLQUFJLENBQUMsUUFBUTtnQkFDdkIsV0FBVyxFQUFFLEtBQUksQ0FBQyxXQUFXO2dCQUM3QixXQUFXLEVBQUUsS0FBSSxDQUFDLFdBQVc7Z0JBQzdCLFVBQVUsRUFBRSxLQUFJLENBQUMsVUFBVTtnQkFDM0Isb0JBQW9CLEVBQUUsS0FBSSxDQUFDLG9CQUFvQjtnQkFDL0MsV0FBVyxFQUFFLEtBQUksQ0FBQyxXQUFXO2FBQzlCOztnQkFDSyxJQUFJLEdBQUc7Z0JBQ1gsVUFBVSxFQUFFLFFBQVE7Z0JBQ3BCLFVBQVUsRUFBRSxJQUFJO2FBQ2pCO1lBQ0QsS0FBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUzs7OztZQUFDLFVBQUMsRUFBRTtnQkFDMUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsc0NBQXNDLENBQUMsQ0FBQztnQkFDOUQsS0FBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNyQixDQUFDLEVBQUMsQ0FBQztRQUNMLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7OztJQUNELHVDQUFZOzs7SUFBWjtRQUNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFDRCx3Q0FBYTs7OztJQUFiLFVBQWMsS0FBSzs7WUFDWCxPQUFPLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7UUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDdEIsQ0FBQzs7Ozs7SUFFRCx5Q0FBYzs7OztJQUFkLFVBQWUsQ0FBQztRQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakIsQ0FBQzs7OztJQUNELG9DQUFTOzs7SUFBVDtRQUNFLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7Ozs7SUFDRCxzQ0FBVzs7OztJQUFYLFVBQVksSUFBUztRQUNuQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztJQUMxQixDQUFDO0lBQ0Q7O09BRUc7Ozs7Ozs7O0lBQ0ssbUNBQVE7Ozs7Ozs7SUFBaEIsVUFBaUIsTUFBYyxFQUFFLFNBQWlCO1FBQ2hELElBQUksQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVELENBQUM7O2dCQTNHRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLHVCQUF1QjtvQkFDakMsc3BLQUFpRDtvQkFFakQsU0FBUyxFQUFFO3dCQUNSLFlBQVk7cUJBQ2Q7O2lCQUNGOzs7O2dCQVhRLHNCQUFzQjtnQkFEdEIsb0JBQW9CO2dCQUhvRCxpQkFBaUIsdUJBb0Q3RixRQUFROzZDQUNSLE1BQU0sU0FBQyxTQUFTO2dEQUNoQixNQUFNLFNBQUMsaUJBQWlCO2dCQWpERCxZQUFZLHVCQWtEbkMsUUFBUTs7O3lCQXRDVixTQUFTLFNBQUMsV0FBVzsyQkFJckIsS0FBSzs4QkFFTCxLQUFLO3VDQUVMLEtBQUs7eUJBRUwsU0FBUyxTQUFDLFFBQVE7eUJBRWxCLE1BQU07eUJBQ04sTUFBTTs7SUFzRlQsdUJBQUM7Q0FBQSxBQTVHRCxJQTRHQztTQXBHWSxnQkFBZ0I7OztJQUMzQixrQ0FBaUQ7O0lBRWpELHlDQUFzQjs7SUFDdEIsK0NBQTRCOztJQUM1QixvQ0FDYzs7SUFDZCx1Q0FDb0I7O0lBQ3BCLGdEQUM2Qjs7SUFDN0Isa0NBQXdEOztJQUV4RCxrQ0FBMkM7O0lBQzNDLGtDQUEyQzs7SUFDM0MsbUNBQWdCOztJQUNoQix1Q0FBdUI7O0lBQ3ZCLHdDQUFhOztJQUNiLDRDQUFpQjs7SUFDakIsc0NBQVc7O0lBQ1gsaURBQThCOztJQUM5QixrQ0FBWTs7SUFFWix5Q0FBbUI7O0lBQ25CLG1DQUEwQzs7SUFDMUMsdUNBQW9COztJQUNwQixvQ0FBdUI7O0lBQ3ZCLHVDQUF3Qjs7SUFDeEIsaUNBQW9COztJQUNwQiwyQ0FHRTs7Ozs7SUFFQSxtQ0FBdUM7Ozs7O0lBQ3ZDLHlDQUEyQzs7Ozs7SUFDM0MsK0JBQTBDOzs7OztJQUMxQyxvQ0FBMkM7Ozs7O0lBQzNDLHFDQUFpRDs7Ozs7SUFDakQsc0NBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsLCBJbmplY3QsIExPQ0FMRV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBMb29rdXBHcmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgV2ZUYXNrSGFuZGxlclNlcnZpY2UgfSBmcm9tICdAZ3NwLXdmL3dmLXRhc2staGFuZGxlcic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uL2kxOG4vcGlwZS93Zi1wcm9jZXNzLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IFdGX1BST0NFU1NfRURJVE9SX0xBTkdfUkVTT1VSQ0VTIH0gZnJvbSAnLi4vLi4vaTE4bi9hc3NldHMvbGFuZy5yZXNvdXJjZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1yZWxlYXNlLWNvbXBvbmVudCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3JlbGVhc2UtY29tcG9uZW50LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9yZWxlYXNlLWNvbXBvbmVudC5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFJlbGVhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBWaWV3Q2hpbGQoJ2J1dHRvblJlZicpIGJ0blJlZjogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgYXBwbGljYW50TmFtZTogc3RyaW5nO1xyXG4gIGFwcGxpY2FudERlcGFydG1lbnQ6IHN0cmluZztcclxuICBASW5wdXQoKVxyXG4gIHByb2NOYW1lOiBhbnk7XHJcbiAgQElucHV0KClcclxuICBwcm9jVmVyc2lvbjogbnVtYmVyO1xyXG4gIEBJbnB1dCgpXHJcbiAgcHJvY2Vzc0RlZmluaXRpb25LZXk6IHN0cmluZztcclxuICBAVmlld0NoaWxkKCdsb29rdXAnKSBwdWJsaWMgbG9va1VwOiBMb29rdXBHcmlkQ29tcG9uZW50O1xyXG5cclxuICBAT3V0cHV0KCkgc3VibWl0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgQE91dHB1dCgpIGNhbmNlbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIHNlc3Npb246IHN0cmluZztcclxuICBhY2Nlc3NMZXZlbCA9ICdwdWJsaWMnO1xyXG4gIG9yZ2FuaXphdGlvbjtcclxuICBvcmdhbml6YXRpb25OYW1lO1xyXG4gIHRleHREZXRhaWw7XHJcbiAgaXNBZG1pbmlzdHJhdG9yQ29uZmlnID0gZmFsc2U7XHJcbiAgZWRpdG9yOiBhbnk7XHJcblxyXG4gIGFkbWluaXN0cmF0b3I6IGFueTtcclxuICBkYXRhVXJpID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9zeXNPcmdzJztcclxuICBhcHBsaWNhbnRJZDogc3RyaW5nO1xyXG4gIGxvYWRUeXBlID0gJ2xheWVybG9hZCc7XHJcbiAgcmVsZWFzZVR5cGUgPSAncmVsZWFzZSc7XHJcbiAgaXRlbXMgPSBuZXcgQXJyYXkoKTtcclxuICByZWxlYXNlVHlwZUxpc3QgPSBbXHJcbiAgICB7IHZhbHVlOiAncmVsZWFzZScsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5yZWxlYXNlLnJlbGVhc2UnKSB9LFxyXG4gICAgeyB2YWx1ZTogJ3VwZGF0ZScsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5yZWxlYXNlLnVwZGF0ZScpIH0sXHJcbiAgXTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdWlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgc3VibWl0U2VydmljZTogV2ZUYXNrSGFuZGxlclNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMucmVsZWFzZVR5cGUgPSB0aGlzLnByb2NWZXJzaW9uID09PSAxID8gJ3JlbGVhc2UnIDogJ3VwZGF0ZSc7XHJcbiAgICB0aGlzLnVpU3RhdGUuZ2V0VXNlckluZm8oKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICB0aGlzLmFwcGxpY2FudE5hbWUgPSByZS5uYW1lO1xyXG4gICAgICB0aGlzLmFwcGxpY2FudERlcGFydG1lbnQgPSByZS5vcmdOYW1lO1xyXG4gICAgICB0aGlzLmFwcGxpY2FudElkID0gcmUuaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNhdmVBc09LKCkge1xyXG4gICAgdGhpcy51aVN0YXRlLmNyZWF0ZURhdGEoKS5zdWJzY3JpYmUoKHNhdmVEYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGFJZCA9IHNhdmVEYXRhLnJldHVyblZhbHVlLmlkO1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIERhdGFJZDogZGF0YUlkLFxyXG4gICAgICAgIGFwcGxpY2FudE5hbWU6IHRoaXMuYXBwbGljYW50TmFtZSxcclxuICAgICAgICBhcHBsaWNhbnREZXBhcnRtZW50OiB0aGlzLmFwcGxpY2FudERlcGFydG1lbnQsXHJcbiAgICAgICAgcHJvY05hbWU6IHRoaXMucHJvY05hbWUsXHJcbiAgICAgICAgcHJvY1ZlcnNpb246IHRoaXMucHJvY1ZlcnNpb24sXHJcbiAgICAgICAgcmVsZWFzZVR5cGU6IHRoaXMucmVsZWFzZVR5cGUsXHJcbiAgICAgICAgdGV4dERldGFpbDogdGhpcy50ZXh0RGV0YWlsLFxyXG4gICAgICAgIHByb2Nlc3NEZWZpbml0aW9uS2V5OiB0aGlzLnByb2Nlc3NEZWZpbml0aW9uS2V5LFxyXG4gICAgICAgIGFwcGxpY2FudElkOiB0aGlzLmFwcGxpY2FudElkXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IEluZm8gPSB7XHJcbiAgICAgICAgQ2hhbmdlVHlwZTogJ01vZGlmeScsXHJcbiAgICAgICAgQ2hhbmdlSW5mbzogZGF0YVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnVpU3RhdGUucmVsZWFzZVNhdmUoSW5mbykuc3Vic2NyaWJlKChyZSkgPT4ge1xyXG4gICAgICAgIHRoaXMubXlTdWJtaXQoZGF0YUlkLCAnMDNiZGNhMzctODQzOS00OTI0LThhZWYtMjBmM2Y0MDkyYjU5Jyk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQubmV4dCgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBzYXZlQXNDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNhbmNlbC5lbWl0KCk7XHJcbiAgfVxyXG4gIGVkaXRvckNyZWF0ZWQocXVpbGwpIHtcclxuICAgIGNvbnN0IHRvb2xiYXIgPSBxdWlsbC5nZXRNb2R1bGUoJ3Rvb2xiYXInKTtcclxuICAgIHRoaXMuZWRpdG9yID0gcXVpbGw7XHJcbiAgfVxyXG5cclxuICBjb250ZW50Q2hhbmdlZCh2KSB7XHJcbiAgICBjb25zb2xlLmxvZyh2KTtcclxuICB9XHJcbiAgdmFsaWRhdG9yKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGNoYW5nZVZhbHVlKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5yZWxlYXNlVHlwZSA9IGRhdGE7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWPkeW4g+WJjeWuoeaguO+8muaPkOS6pOWuoeaJuVxyXG4gICAqL1xyXG4gIHByaXZhdGUgbXlTdWJtaXQoZGF0YUlkOiBzdHJpbmcsIGJpekRlZktleTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnN1Ym1pdFNlcnZpY2Uuc3VibWl0V2l0aEJpekRlZktleShkYXRhSWQsIGJpekRlZktleSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==