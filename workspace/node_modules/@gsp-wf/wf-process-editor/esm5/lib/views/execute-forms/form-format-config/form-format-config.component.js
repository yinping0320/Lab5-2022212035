/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, TemplateRef, ViewChild, Input, ViewContainerRef, Injector, ChangeDetectorRef, Optional, Inject, LOCALE_ID } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { Observable, of, forkJoin, Subject } from 'rxjs';
import { FormFormat } from '../entities/form-format';
import { FormFormatConfig, FormButtonConfig, FormFieldConfig } from '../entities/form-format-config';
import { DatagridComponent } from '@farris/ui-datagrid';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { switchMap } from 'rxjs/operators';
import { FormOperationConfigComponent } from '../form-operation-config/form-operation-config.component';
import { TreeTableComponent } from '@farris/ui-treetable';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../i18n/pipe/wf-process-editor-locale.pipe';
var FormFormatConfigComponent = /** @class */ (function () {
    function FormFormatConfigComponent(http, message, notify, injector, cdr, localeId, resources, localePipe) {
        this.http = http;
        this.message = message;
        this.notify = notify;
        this.injector = injector;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.config = new FormFormatConfig();
        this.formFormat = new FormFormat();
        this.state = 'edit';
        this.showMethodTab = true;
        this.buttonCols = [];
        this.buttonConfigs = new Array();
        this.fieldCols = [];
        this.fieldConfigs = new Array();
        this.formatFieldList = new Array();
        this.showExtendTab = false;
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        /** @type {?} */
        var serchFields = {
            label: this.localePipe.transform('component.executeForms.fieldName'),
            value: 'fieldName'
        };
        if (this.searchFields) {
            if (!this.searchFields.some((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.value === serchFields.value; }))) {
                this.searchFields = this.searchFields.concat(serchFields);
            }
        }
        else {
            this.searchFields = [];
            this.searchFields = this.searchFields.concat(serchFields);
        }
    }
    Object.defineProperty(FormFormatConfigComponent.prototype, "formFormatId", {
        get: /**
         * @return {?}
         */
        function () {
            return this._formFormatId;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._formFormatId = v;
            this.config.formFormatId = v;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormFormatConfigComponent.prototype, "formatConfigId", {
        get: /**
         * @return {?}
         */
        function () {
            return this._formatConfigId;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._formatConfigId = v;
            if (!v) {
                this.state = 'new';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.buttonCols = [
            { field: 'buttonName', width: 100, title: this.localePipe.transform('component.executeForms.buttonName'), filter: true },
            // { field: 'buttonId', width: 100, title: '按钮标识' },
            {
                title: this.localePipe.transform('component.executeForms.enable'),
                field: 'enable',
                width: 80,
                template: this.btnEnable,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: this.localePipe.transform('component.executeForms.disabled'),
                field: 'disabled',
                width: 80,
                template: this.btnDisabled,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: this.localePipe.transform('component.executeForms.hidden'),
                field: 'hidden',
                width: 80,
                template: this.btnHidden,
                align: 'center',
                hAlign: 'center'
            }
        ];
        this.fieldCols = [
            { field: 'fieldName', width: 100, title: this.localePipe.transform('component.executeForms.fieldName') },
            // { field: 'fieldId', width: 100, title: '字段标识' },
            {
                title: this.localePipe.transform('component.executeForms.editable'),
                field: 'editable',
                width: 80,
                template: this.fieldEditable,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: this.localePipe.transform('component.executeForms.readonly'),
                field: 'readonly',
                width: 80,
                template: this.fieldReadonly,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: this.localePipe.transform('component.executeForms.hidden'),
                field: 'hidden',
                width: 80,
                template: this.fieldHidden,
                align: 'center',
                hAlign: 'center'
            },
            {
                title: this.localePipe.transform('component.executeForms.required'),
                field: 'required',
                width: 80,
                template: this.fieldRequired,
                align: 'center',
                hAlign: 'center'
            }
        ];
        this.getConfig();
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.submit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        this.validator().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (re) {
                _this.setBtnAndFieldConfigs();
                if (_this.extendComponentRef) {
                    _this.extendComponentRef.instance.submit().subscribe((/**
                     * @param {?} configId
                     * @return {?}
                     */
                    function (configId) {
                        if (configId) {
                            _this.config.id = configId;
                            _this.saveConfig(_this.config).subscribe((/**
                             * @param {?} re
                             * @return {?}
                             */
                            function (re) {
                                subject.next({ result: true, configId: _this.config.id });
                            }), (/**
                             * @param {?} err
                             * @return {?}
                             */
                            function (err) {
                                _this.message.error(_this.localePipe.transform('component.executeForms.saveFail'));
                                subject.next({ result: false, configId: _this.config.id });
                            }));
                        }
                        else {
                            if (_this.state === 'new' &&
                                _this.config.formButtonConfigs.length === 0 &&
                                _this.config.formFieldConfigs.length === 0 &&
                                _this.operationConfig.operations.length === 0) {
                                setTimeout((/**
                                 * @return {?}
                                 */
                                function () {
                                    subject.next({ result: true, configId: null });
                                }), 10);
                            }
                            else {
                                _this.saveConfig(_this.config).subscribe((/**
                                 * @param {?} re
                                 * @return {?}
                                 */
                                function (re) {
                                    subject.next({ result: true, configId: _this.config.id });
                                }), (/**
                                 * @param {?} err
                                 * @return {?}
                                 */
                                function (err) {
                                    _this.message.error(_this.localePipe.transform('component.executeForms.saveFail'));
                                    subject.next({ result: false, configId: _this.config.id });
                                }));
                            }
                        }
                    }));
                }
                else {
                    if (_this.state === 'new' &&
                        _this.config.formButtonConfigs.length === 0 &&
                        _this.config.formFieldConfigs.length === 0 &&
                        _this.operationConfig.operations.length === 0) {
                        setTimeout((/**
                         * @return {?}
                         */
                        function () {
                            subject.next({ result: true, configId: null });
                        }), 10);
                    }
                    else {
                        _this.saveConfig(_this.config).subscribe((/**
                         * @param {?} re
                         * @return {?}
                         */
                        function (re) {
                            subject.next({ result: true, configId: _this.config.id });
                        }), (/**
                         * @param {?} err
                         * @return {?}
                         */
                        function (err) {
                            _this.message.error(_this.localePipe.transform('component.executeForms.saveFail'));
                            subject.next({ result: false, configId: _this.config.id });
                        }));
                    }
                }
            }
            else {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    subject.next({ result: false });
                }), 10);
            }
        }));
        return subject.asObservable();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    FormFormatConfigComponent.prototype.searchField = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        data.field = 'fieldName';
        /** @type {?} */
        var searchData = {
            field: 'fieldName',
            value: data.value
        };
        this.fieldTree.searchData = searchData;
        // this.fieldTree.searchData.field = 'fieldName';
        /** @type {?} */
        var serchFields = {
            label: this.localePipe.transform('component.executeForms.fieldName'),
            value: 'fieldName'
        };
        if (this.fieldTree.searchFields) {
            if (!this.fieldTree.searchFields.some((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.value === serchFields.value; }))) {
                this.fieldTree.searchFields = this.fieldTree.searchFields.concat(serchFields);
            }
        }
        else {
            this.fieldTree.searchFields = [];
            this.fieldTree.searchFields = this.fieldTree.searchFields.concat(serchFields);
        }
        this.fieldTree.searchHandle.search(data.field, data.value, 'client');
    };
    /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnConfigChange = /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    function (bool, field, id) {
        var e_1, _a;
        if (bool) {
            try {
                for (var _b = tslib_1.__values(this.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var b = _c.value;
                    if (b.id === id) {
                        switch (field) {
                            case 'enable':
                                b.enable = bool;
                                b.disabled = false;
                                b.hidden = false;
                                break;
                            case 'disabled':
                                b.disabled = bool;
                                b.enable = false;
                                b.hidden = false;
                                break;
                            case 'hidden':
                                b.hidden = bool;
                                b.disabled = false;
                                b.enable = false;
                                break;
                        }
                        this.btnGrid.updateRow(id, b);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        this.btnGrid.cd.detectChanges();
    };
    /**
     * @param {?} operation
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnBatchOperate = /**
     * @param {?} operation
     * @return {?}
     */
    function (operation) {
        var e_2, _a;
        /** @type {?} */
        var checkeds = this.btnGrid.checkedRows;
        if (checkeds && checkeds.length > 0) {
            try {
                for (var checkeds_1 = tslib_1.__values(checkeds), checkeds_1_1 = checkeds_1.next(); !checkeds_1_1.done; checkeds_1_1 = checkeds_1.next()) {
                    var c = checkeds_1_1.value;
                    this.btnConfigChange(true, operation, c.id);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (checkeds_1_1 && !checkeds_1_1.done && (_a = checkeds_1.return)) _a.call(checkeds_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
            this.btnGrid.cd.detectChanges();
        }
        else {
            this.message.info(this.localePipe.transform('component.executeForms.checkedRows'));
        }
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.btnBatchReset = /**
     * @return {?}
     */
    function () {
        var e_3, _a;
        /** @type {?} */
        var checkeds = this.btnGrid.checkedRows;
        if (checkeds && checkeds.length > 0) {
            var _loop_1 = function (c) {
                var e_4, _a;
                /** @type {?} */
                var button = this_1.formFormat.formButtons.find((/**
                 * @param {?} b
                 * @return {?}
                 */
                function (b) { return b.id === c.id; }));
                try {
                    for (var _b = tslib_1.__values(this_1.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var b = _c.value;
                        if (b.id === c.id) {
                            b.enable = button.buttonState === 'Enable' ? true : false;
                            b.disabled = button.buttonState === 'Disabled' ? true : false;
                            b.hidden = button.buttonState === 'Hidden' ? true : false;
                        }
                        this_1.btnGrid.updateRow(b.id, b);
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            };
            var this_1 = this;
            try {
                for (var checkeds_2 = tslib_1.__values(checkeds), checkeds_2_1 = checkeds_2.next(); !checkeds_2_1.done; checkeds_2_1 = checkeds_2.next()) {
                    var c = checkeds_2_1.value;
                    _loop_1(c);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (checkeds_2_1 && !checkeds_2_1.done && (_a = checkeds_2.return)) _a.call(checkeds_2);
                }
                finally { if (e_3) throw e_3.error; }
            }
            this.btnGrid.cd.detectChanges();
        }
        else {
            this.message.info(this.localePipe.transform('component.executeForms.checkedRows'));
        }
    };
    /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @param {?=} search
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldConfigChange = /**
     * @param {?} bool
     * @param {?} field
     * @param {?} id
     * @param {?=} search
     * @return {?}
     */
    function (bool, field, id, search) {
        if (search === void 0) { search = true; }
        if (bool) {
            this.fieldSwitchChange(this.fieldConfigs, field, id);
        }
        if (search) {
            this.fieldTree.searchHandle['research']();
        }
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldSwitchChange = /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} field
     * @param {?} id
     * @return {?}
     */
    function (fieldConfigs, field, id) {
        var e_5, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_1 = tslib_1.__values(fieldConfigs), fieldConfigs_1_1 = fieldConfigs_1.next(); !fieldConfigs_1_1.done; fieldConfigs_1_1 = fieldConfigs_1.next()) {
                    var f = fieldConfigs_1_1.value;
                    if (f.data.id === id) {
                        switch (field) {
                            case 'editable':
                                f.data.editable = true;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'readonly':
                                f.data.editable = false;
                                f.data.readonly = true;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'hidden':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = true;
                                f.data.required = false;
                                break;
                            case 'required':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = true;
                                break;
                        }
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.fieldSwitchChange(f.children, field, id);
                        }
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (fieldConfigs_1_1 && !fieldConfigs_1_1.done && (_a = fieldConfigs_1.return)) _a.call(fieldConfigs_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    /**
     * @param {?} operation
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldBatchOperate = /**
     * @param {?} operation
     * @return {?}
     */
    function (operation) {
        var e_6, _a;
        /** @type {?} */
        var checkeds = this.fieldTree.checkeds;
        if (checkeds && checkeds.length > 0) {
            try {
                for (var checkeds_3 = tslib_1.__values(checkeds), checkeds_3_1 = checkeds_3.next(); !checkeds_3_1.done; checkeds_3_1 = checkeds_3.next()) {
                    var c = checkeds_3_1.value;
                    this.fieldConfigChange(true, operation, c.data.id, false);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (checkeds_3_1 && !checkeds_3_1.done && (_a = checkeds_3.return)) _a.call(checkeds_3);
                }
                finally { if (e_6) throw e_6.error; }
            }
            this.fieldTree.searchHandle['research']();
        }
        else {
            this.message.info(this.localePipe.transform('component.executeForms.checkeds'));
        }
    };
    /**
     * @return {?}
     */
    FormFormatConfigComponent.prototype.fieldBatchReset = /**
     * @return {?}
     */
    function () {
        var e_7, _a;
        /** @type {?} */
        var checkeds = this.fieldTree.checkeds;
        if (checkeds && checkeds.length > 0) {
            var _loop_2 = function (c) {
                /** @type {?} */
                var field = this_2.formatFieldList.find((/**
                 * @param {?} f
                 * @return {?}
                 */
                function (f) { return f.id === c.data.id; }));
                this_2.resetFieldConfig(this_2.fieldConfigs, c.data.id, field);
            };
            var this_2 = this;
            try {
                for (var checkeds_4 = tslib_1.__values(checkeds), checkeds_4_1 = checkeds_4.next(); !checkeds_4_1.done; checkeds_4_1 = checkeds_4.next()) {
                    var c = checkeds_4_1.value;
                    _loop_2(c);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (checkeds_4_1 && !checkeds_4_1.done && (_a = checkeds_4.return)) _a.call(checkeds_4);
                }
                finally { if (e_7) throw e_7.error; }
            }
            this.fieldTree.searchHandle['research']();
        }
        else {
            this.message.info(this.localePipe.transform('component.executeForms.checkeds'));
        }
    };
    /**
     * @param {?} fieldConfigs
     * @param {?} id
     * @param {?} field
     * @return {?}
     */
    FormFormatConfigComponent.prototype.resetFieldConfig = /**
     * @param {?} fieldConfigs
     * @param {?} id
     * @param {?} field
     * @return {?}
     */
    function (fieldConfigs, id, field) {
        var e_8, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_2 = tslib_1.__values(fieldConfigs), fieldConfigs_2_1 = fieldConfigs_2.next(); !fieldConfigs_2_1.done; fieldConfigs_2_1 = fieldConfigs_2.next()) {
                    var f = fieldConfigs_2_1.value;
                    if (f.leaf === true && f.data.id === id) {
                        f.data.editable = field.fieldState === 'Editable' ? true : false;
                        f.data.readonly = field.fieldState === 'Readonly' ? true : false;
                        f.data.hidden = field.fieldState === 'Hidden' ? true : false;
                        f.data.required = field.fieldState === 'Required' ? true : false;
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.resetFieldConfig(f.children, id, field);
                        }
                    }
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (fieldConfigs_2_1 && !fieldConfigs_2_1.done && (_a = fieldConfigs_2.return)) _a.call(fieldConfigs_2);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.validator = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.extendComponentRef) {
            /** @type {?} */
            var result$ = this.extendComponentRef.instance.validator();
            if (result$ instanceof Observable) {
                return result$.pipe(switchMap((/**
                 * @param {?} b
                 * @return {?}
                 */
                function (b) {
                    if (b && _this.innerValidator()) {
                        return of(true);
                    }
                    else {
                        return of(false);
                    }
                })));
            }
            else {
                if (result$) {
                    return of(this.innerValidator());
                }
                else {
                    return of(false);
                }
            }
        }
        else {
            return of(this.innerValidator());
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.innerValidator = /**
     * @private
     * @return {?}
     */
    function () {
        return this.operationConfig.validator();
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.setBtnAndFieldConfigs = /**
     * @private
     * @return {?}
     */
    function () {
        var e_9, _a;
        this.config.formButtonConfigs = new Array();
        var _loop_3 = function (btn) {
            /** @type {?} */
            var button = this_3.formFormat.formButtons.find((/**
             * @param {?} b
             * @return {?}
             */
            function (b) { return b.buttonId === btn.buttonId; }));
            /** @type {?} */
            var btnConfig = new FormButtonConfig();
            btnConfig.buttonId = btn.buttonId;
            if (btn.enable) {
                btnConfig.buttonState = 'Enable';
            }
            else if (btn.disabled) {
                btnConfig.buttonState = 'Disabled';
            }
            else if (btn.hidden) {
                btnConfig.buttonState = 'Hidden';
            }
            else {
                return "continue";
            }
            if (!button.buttonState && btnConfig.buttonState) {
                this_3.config.formButtonConfigs.push(btnConfig);
            }
            if (button.buttonState && button.buttonState !== btnConfig.buttonState) {
                this_3.config.formButtonConfigs.push(btnConfig);
            }
        };
        var this_3 = this;
        try {
            for (var _b = tslib_1.__values(this.buttonConfigs), _c = _b.next(); !_c.done; _c = _b.next()) {
                var btn = _c.value;
                _loop_3(btn);
            }
        }
        catch (e_9_1) { e_9 = { error: e_9_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_9) throw e_9.error; }
        }
        this.config.formFieldConfigs = new Array();
        this.getFieldConfigs(this.fieldConfigs);
        this.config.formMethodConfigs = this.operationConfig.operations || new Array();
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFieldConfigs = /**
     * @private
     * @param {?} fieldConfigs
     * @return {?}
     */
    function (fieldConfigs) {
        var e_10, _a;
        if (fieldConfigs && fieldConfigs.length > 0) {
            var _loop_4 = function (f) {
                if (f.children && f.children.length > 0) {
                    this_4.getFieldConfigs(f.children);
                }
                if (f.leaf === false) {
                    return "continue";
                }
                /** @type {?} */
                var field = this_4.formatFieldList.find((/**
                 * @param {?} fd
                 * @return {?}
                 */
                function (fd) { return fd.fieldId === f.data.fieldId; }));
                /** @type {?} */
                var fieldConfig = new FormFieldConfig();
                fieldConfig.fieldId = f.data.fieldId;
                if (f.data.editable) {
                    fieldConfig.fieldState = 'Editable';
                }
                else if (f.data.readonly) {
                    fieldConfig.fieldState = 'Readonly';
                }
                else if (f.data.hidden) {
                    fieldConfig.fieldState = 'Hidden';
                }
                else if (f.data.required) {
                    fieldConfig.fieldState = 'Required';
                }
                else {
                    return "continue";
                }
                if (!field.fieldState && fieldConfig.fieldState) {
                    this_4.config.formFieldConfigs.push(fieldConfig);
                }
                if (field.fieldState && field.fieldState !== fieldConfig.fieldState) {
                    this_4.config.formFieldConfigs.push(fieldConfig);
                }
            };
            var this_4 = this;
            try {
                for (var fieldConfigs_3 = tslib_1.__values(fieldConfigs), fieldConfigs_3_1 = fieldConfigs_3.next(); !fieldConfigs_3_1.done; fieldConfigs_3_1 = fieldConfigs_3.next()) {
                    var f = fieldConfigs_3_1.value;
                    _loop_4(f);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (fieldConfigs_3_1 && !fieldConfigs_3_1.done && (_a = fieldConfigs_3.return)) _a.call(fieldConfigs_3);
                }
                finally { if (e_10) throw e_10.error; }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getConfig = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.formFormatId) {
            forkJoin(this.getFormFormatType(), this.getFormFormat(), this.getFormFormatConfig()).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                var e_11, _a, e_12, _b, e_13, _c;
                /** @type {?} */
                var formFormatType = (/** @type {?} */ (re[0]));
                if (formFormatType) {
                    _this.formFormatType = formFormatType;
                    if (_this.formFormatType.extendImpl) {
                        _this.showExtendTab = true;
                        _this.createExtendComponent(_this.formFormatType.extendImpl);
                    }
                    else {
                        _this.showExtendTab = false;
                    }
                }
                /** @type {?} */
                var formFormat = (/** @type {?} */ (re[1]));
                if (formFormat) {
                    _this.formFormat = _this.convertFormFormat(formFormat);
                }
                /** @type {?} */
                var config = (/** @type {?} */ (re[2]));
                if (config) {
                    _this.config = config;
                }
                if (_this.formFormat.formButtons) {
                    _this.buttonConfigs = _this.formFormat.formButtons.map((/**
                     * @param {?} b
                     * @return {?}
                     */
                    function (b) { return Object.assign({}, b, {
                        enable: b.buttonState === 'Enable' ? true : false,
                        disabled: b.buttonState === 'Disabled' ? true : false,
                        hidden: b.buttonState === 'Hidden' ? true : false
                    }); }));
                    /** @type {?} */
                    var btnConfigs = new Array();
                    if (config && config.formButtonConfigs) {
                        btnConfigs = config.formButtonConfigs;
                    }
                    try {
                        for (var btnConfigs_1 = tslib_1.__values(btnConfigs), btnConfigs_1_1 = btnConfigs_1.next(); !btnConfigs_1_1.done; btnConfigs_1_1 = btnConfigs_1.next()) {
                            var b = btnConfigs_1_1.value;
                            try {
                                for (var _d = tslib_1.__values(_this.buttonConfigs), _e = _d.next(); !_e.done; _e = _d.next()) {
                                    var btn = _e.value;
                                    if (btn.buttonId === b.buttonId) {
                                        switch (b.buttonState) {
                                            case 'Enable':
                                                btn.enable = true;
                                                btn.disabled = false;
                                                btn.hidden = false;
                                                break;
                                            case 'Disabled':
                                                btn.enable = false;
                                                btn.disabled = true;
                                                btn.hidden = false;
                                                break;
                                            case 'Hidden':
                                                btn.enable = false;
                                                btn.disabled = false;
                                                btn.hidden = true;
                                                break;
                                        }
                                        break;
                                    }
                                }
                            }
                            catch (e_12_1) { e_12 = { error: e_12_1 }; }
                            finally {
                                try {
                                    if (_e && !_e.done && (_b = _d.return)) _b.call(_d);
                                }
                                finally { if (e_12) throw e_12.error; }
                            }
                        }
                    }
                    catch (e_11_1) { e_11 = { error: e_11_1 }; }
                    finally {
                        try {
                            if (btnConfigs_1_1 && !btnConfigs_1_1.done && (_a = btnConfigs_1.return)) _a.call(btnConfigs_1);
                        }
                        finally { if (e_11) throw e_11.error; }
                    }
                }
                if (_this.formFormat.formFields) {
                    _this.fieldConfigs = tslib_1.__spread(_this.formFormat.formFields);
                    _this.orgFieldConfigs(_this.fieldConfigs);
                    /** @type {?} */
                    var configs = new Array();
                    if (config && config.formFieldConfigs) {
                        configs = config.formFieldConfigs;
                    }
                    try {
                        for (var configs_1 = tslib_1.__values(configs), configs_1_1 = configs_1.next(); !configs_1_1.done; configs_1_1 = configs_1.next()) {
                            var f = configs_1_1.value;
                            _this.setFieldConfig(_this.fieldConfigs, f);
                        }
                    }
                    catch (e_13_1) { e_13 = { error: e_13_1 }; }
                    finally {
                        try {
                            if (configs_1_1 && !configs_1_1.done && (_c = configs_1.return)) _c.call(configs_1);
                        }
                        finally { if (e_13) throw e_13.error; }
                    }
                }
            }));
        }
    };
    /**
     * @param {?} extendImpl
     * @return {?}
     */
    FormFormatConfigComponent.prototype.createExtendComponent = /**
     * @param {?} extendImpl
     * @return {?}
     */
    function (extendImpl) {
        var _this = this;
        /** @type {?} */
        var url = extendImpl.split('#')[0];
        /** @type {?} */
        var selectorCmp = extendImpl.split('#')[1];
        System.import(url)
            .then((/**
         * @param {?} moduleFactorys
         * @return {?}
         */
        function (moduleFactorys) {
            /** @type {?} */
            var moduleFactory = Object.values(moduleFactorys)[0];
            /** @type {?} */
            var moduleRef = moduleFactory.create(_this.injector);
            if (selectorCmp) {
                /** @type {?} */
                var facMap = moduleRef.componentFactoryResolver['_factories'];
                facMap.forEach((/**
                 * @param {?} value
                 * @param {?} key
                 * @param {?} map
                 * @return {?}
                 */
                function (value, key, map) {
                    /** @type {?} */
                    var selector = value.selector;
                    if (selectorCmp == selector) {
                        /** @type {?} */
                        var cmpFactory = moduleRef.componentFactoryResolver.resolveComponentFactory((/** @type {?} */ (key)));
                        _this.extendComponentRef = cmpFactory.create(moduleRef.injector);
                        _this.extendComponentRef.instance.formFormatId = _this.formFormatId;
                        _this.extendComponentRef.instance.formatConfigId = _this.formatConfigId;
                        _this.container.clear();
                        _this.container.insert(_this.extendComponentRef.hostView);
                    }
                }));
            }
            else {
                /** @type {?} */
                var bootstrapComponent = moduleRef['_bootstrapComponents'][0];
                if (bootstrapComponent) //先找bootstrapComponent数组有无组件
                 {
                    /** @type {?} */
                    var cmpFactory = moduleRef.componentFactoryResolver.resolveComponentFactory(bootstrapComponent);
                    _this.extendComponentRef = cmpFactory.create(moduleRef.injector);
                    _this.extendComponentRef.instance.formFormatId = _this.formFormatId;
                    _this.extendComponentRef.instance.formatConfigId = _this.formatConfigId;
                    _this.container.clear();
                    _this.container.insert(_this.extendComponentRef.hostView);
                }
            }
        }));
    };
    /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    FormFormatConfigComponent.prototype.orgFieldConfigs = /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    function (formFields) {
        var e_14, _a;
        if (formFields.length > 0) {
            try {
                for (var formFields_1 = tslib_1.__values(formFields), formFields_1_1 = formFields_1.next(); !formFields_1_1.done; formFields_1_1 = formFields_1.next()) {
                    var d = formFields_1_1.value;
                    d.data = Object.assign({}, d.data, {
                        editable: d.data.fieldState === 'Editable' ? true : false,
                        readonly: d.data.fieldState === 'Readonly' ? true : false,
                        hidden: d.data.fieldState === 'Hidden' ? true : false,
                        required: d.data.fieldState === 'Required' ? true : false
                    });
                    if (d.children && d.children) {
                        this.orgFieldConfigs(d.children);
                    }
                }
            }
            catch (e_14_1) { e_14 = { error: e_14_1 }; }
            finally {
                try {
                    if (formFields_1_1 && !formFields_1_1.done && (_a = formFields_1.return)) _a.call(formFields_1);
                }
                finally { if (e_14) throw e_14.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} config
     * @return {?}
     */
    FormFormatConfigComponent.prototype.setFieldConfig = /**
     * @private
     * @param {?} fieldConfigs
     * @param {?} config
     * @return {?}
     */
    function (fieldConfigs, config) {
        var e_15, _a;
        if (fieldConfigs.length > 0) {
            try {
                for (var fieldConfigs_4 = tslib_1.__values(fieldConfigs), fieldConfigs_4_1 = fieldConfigs_4.next(); !fieldConfigs_4_1.done; fieldConfigs_4_1 = fieldConfigs_4.next()) {
                    var f = fieldConfigs_4_1.value;
                    if (f.data.fieldId === config.fieldId) {
                        switch (config.fieldState) {
                            case 'Editable':
                                f.data.editable = true;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'Readonly':
                                f.data.editable = false;
                                f.data.readonly = true;
                                f.data.hidden = false;
                                f.data.required = false;
                                break;
                            case 'Hidden':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = true;
                                f.data.required = false;
                                break;
                            case 'Required':
                                f.data.editable = false;
                                f.data.readonly = false;
                                f.data.hidden = false;
                                f.data.required = true;
                                break;
                        }
                        return;
                    }
                    else {
                        if (f.children && f.children.length > 0) {
                            this.setFieldConfig(f.children, config);
                        }
                    }
                }
            }
            catch (e_15_1) { e_15 = { error: e_15_1 }; }
            finally {
                try {
                    if (fieldConfigs_4_1 && !fieldConfigs_4_1.done && (_a = fieldConfigs_4.return)) _a.call(fieldConfigs_4);
                }
                finally { if (e_15) throw e_15.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} config
     * @return {?}
     */
    FormFormatConfigComponent.prototype.saveConfig = /**
     * @private
     * @param {?} config
     * @return {?}
     */
    function (config) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/formFormatConfig';
        return this.http.post(url, config);
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormFormat = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.formFormatId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/formFormat/" + this.formFormatId;
            url = encodeURI(url);
            return this.http.get(url);
        }
        else {
            return of(null);
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormFormatType = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.formFormatId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/formFormatType/formFormat?formFormat=" + this.formFormatId;
            return this.http.get(url);
        }
    };
    /**
     * @private
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormFormatConfig = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.formatConfigId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/formFormatConfig/" + this.formatConfigId;
            url = encodeURI(url);
            return this.http.get(url);
        }
        else {
            return of(null);
        }
    };
    /**
     * @private
     * @param {?} formFormat
     * @return {?}
     */
    FormFormatConfigComponent.prototype.convertFormFormat = /**
     * @private
     * @param {?} formFormat
     * @return {?}
     */
    function (formFormat) {
        if (!formFormat.status) {
            formFormat.status = 0;
        }
        this.convertformFields(formFormat.formFields);
        this.getFormatFieldList(formFormat.formFields, this.formatFieldList);
        return formFormat;
    };
    /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    FormFormatConfigComponent.prototype.convertformFields = /**
     * @private
     * @param {?} formFields
     * @return {?}
     */
    function (formFields) {
        var e_16, _a;
        if (formFields && formFields.length > 0) {
            try {
                for (var formFields_2 = tslib_1.__values(formFields), formFields_2_1 = formFields_2.next(); !formFields_2_1.done; formFields_2_1 = formFields_2.next()) {
                    var d = formFields_2_1.value;
                    if (typeof (d.leaf) !== 'boolean' && (d.leaf == null || d.leaf === undefined)) {
                        d.leaf = true;
                    }
                    if (d.children && d.children) {
                        this.orgFieldConfigs(d.children);
                    }
                }
            }
            catch (e_16_1) { e_16 = { error: e_16_1 }; }
            finally {
                try {
                    if (formFields_2_1 && !formFields_2_1.done && (_a = formFields_2.return)) _a.call(formFields_2);
                }
                finally { if (e_16) throw e_16.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} formFields
     * @param {?} array
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormatFieldList = /**
     * @private
     * @param {?} formFields
     * @param {?} array
     * @return {?}
     */
    function (formFields, array) {
        var e_17, _a;
        if (formFields && formFields.length > 0) {
            try {
                for (var formFields_3 = tslib_1.__values(formFields), formFields_3_1 = formFields_3.next(); !formFields_3_1.done; formFields_3_1 = formFields_3.next()) {
                    var d = formFields_3_1.value;
                    array.push(d.data);
                    if (d.children && d.children) {
                        this.getFormatFieldList(d.children, array);
                    }
                }
            }
            catch (e_17_1) { e_17 = { error: e_17_1 }; }
            finally {
                try {
                    if (formFields_3_1 && !formFields_3_1.done && (_a = formFields_3.return)) _a.call(formFields_3);
                }
                finally { if (e_17) throw e_17.error; }
            }
        }
    };
    /**
     * @private
     * @param {?} formFields
     * @param {?} fieldId
     * @return {?}
     */
    FormFormatConfigComponent.prototype.getFormatField = /**
     * @private
     * @param {?} formFields
     * @param {?} fieldId
     * @return {?}
     */
    function (formFields, fieldId) {
        var e_18, _a;
        try {
            for (var formFields_4 = tslib_1.__values(formFields), formFields_4_1 = formFields_4.next(); !formFields_4_1.done; formFields_4_1 = formFields_4.next()) {
                var f = formFields_4_1.value;
                if (f.data.fieldId === fieldId) {
                    return f;
                }
                if (f.children && f.children.length > 0) {
                    return this.getFormatField(f.children, fieldId);
                }
            }
        }
        catch (e_18_1) { e_18 = { error: e_18_1 }; }
        finally {
            try {
                if (formFields_4_1 && !formFields_4_1.done && (_a = formFields_4.return)) _a.call(formFields_4);
            }
            finally { if (e_18) throw e_18.error; }
        }
    };
    FormFormatConfigComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-form-format-config',
                    template: "\r\n<!--\u9700\u8981\u5D4C\u5957\u7684\u5C42-----------\u6807\u7B7E\u9875---------------->\r\n<farris-tabs class=\"h-100 f-component-tabs f-tabs-has-grid\" [value]=\"'buttonConfig'\" [contentFill]=\"true\">\r\n  <farris-tab title=\"{{'component.executeForms.formBtn'|wfLocale}}\" [id]=\"'buttonConfig'\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('enable')\">\r\n        {{'component.executeForms.enableBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('disabled')\">\r\n        {{'component.executeForms.disabledBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchOperate('hidden')\">\r\n        {{'component.executeForms.hiddenBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"btnBatchReset()\">\r\n        {{'component.executeForms.btnBatchReset'|wfLocale}}\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <div class=\"f-utils-fill-flex-column\" style=\"background: #FFF;\">\r\n        <farris-datagrid class=\"f-component-grid f-utils-fill\" [columns]=\"buttonCols\" [data]=\"buttonConfigs\" #btnGrid\r\n          [idField]=\"'id'\" [showLineNumber]=\"false\" [fitColumns]=\"true\" [striped]=\"true\"\r\n          [virtualized]=\"true\" [pagination]=\"false\" [useThemes]=\"false\" [fit]=\"true\" [showAllCheckbox]=\"true\"\r\n          [showCheckbox]=\"true\" [multiSelect]=\"true\" [enableFilterRow]=\"true\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </ng-template>\r\n  </farris-tab>\r\n  <farris-tab title=\"{{'component.executeForms.formfield'|wfLocale}}\" [id]=\"'fieldConfig'\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('editable')\">\r\n        {{'component.executeForms.editableBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('readonly')\">\r\n        {{'component.executeForms.readonlyBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('hidden')\">\r\n        {{'component.executeForms.hiddenBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchOperate('required')\">\r\n        {{'component.executeForms.requiredBtn'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"fieldBatchReset()\">\r\n        {{'component.executeForms.btnBatchReset'|wfLocale}}\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <div class=\"f-utils-fill-flex-column\" style=\"background: #FFF;\">\r\n        <farris-treetable #fieldTree [columns]=\"fieldCols\" [showFilterBar]=\"true\" [searchFields] = \"searchFields\"\r\n          [showBorder]=\"false\" [showHeader]=\"true\" [data]=\"fieldConfigs\" [fit]=\"true\" [fitColumns]=\"true\"\r\n          [idField]=\"'id'\" [virtualized]=\"false\" [singleSelect]=\"false\" [showCheckbox]=\"true\"\r\n          [showCheckAll]=\"true\" [striped]=\"true\" [fixedHeader]=\"true\" (search)=\"searchField($event)\">\r\n        </farris-treetable>\r\n      </div>\r\n    </ng-template>\r\n  </farris-tab>\r\n  <farris-tab title=\"{{'component.executeForms.formEvents'|wfLocale}}\" [id]=\"'operationConfig'\" [show]=\"showMethodTab\">\r\n    <ng-template farrisTabsExtend>\r\n      <farris-button [type]=\"'link'\" (click)=\"operationConfig.add()\">\r\n        {{'component.executeForms.add'|wfLocale}}\r\n      </farris-button>\r\n      <farris-button [type]=\"'link'\" (click)=\"operationConfig.delete()\">\r\n        {{'component.executeForms.delete'|wfLocale}}\r\n      </farris-button>\r\n    </ng-template>\r\n    <ng-template #content>\r\n      <lib-form-operation-config\r\n        [formFormatId]=\"formFormatId\"\r\n        [formFormatConfigId]=\"config.id\"\r\n        [operations]=\"config.formMethodConfigs\"\r\n        class=\"h-100\"></lib-form-operation-config>\r\n    </ng-template>\r\n  </farris-tab>\r\n  <farris-tab title=\"{{'component.executeForms.other'|wfLocale}}\" [id]=\"'extendConfig'\" [show]=\"showExtendTab\">\r\n    <ng-template #content>\r\n      <ng-container #container></ng-container>\r\n    </ng-template>\r\n  </farris-tab>\r\n</farris-tabs>\r\n<!--Tab\u533A\u57DF-->\r\n\r\n  <!-- </section>\r\n</div> -->\r\n\r\n<ng-template #btnEnable let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.enable\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #btnDisabled let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.disabled\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #btnHidden let-ctx>\r\n  <farris-switch [(ngModel)]=\"ctx.rowData.hidden\" (valueChange)=\"btnConfigChange($event, ctx.field, ctx.rowData.id)\"></farris-switch>\r\n</ng-template>\r\n<ng-template #fieldEditable let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.editable\"\r\n  (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldReadonly let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.readonly\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldHidden let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.hidden\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n<ng-template #fieldRequired let-ctx>\r\n  <farris-switch *ngIf=\"ctx.node.leaf\" size=\"small\" [(ngModel)]=\"ctx.node.data.required\"\r\n    (valueChange)=\"fieldConfigChange($event, ctx.column.field, ctx.node.data.id)\">\r\n  </farris-switch>\r\n</ng-template>\r\n\r\n\r\n",
                    providers: [
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    FormFormatConfigComponent.ctorParameters = function () { return [
        { type: HttpService },
        { type: MessagerService },
        { type: NotifyService },
        { type: Injector },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    FormFormatConfigComponent.propDecorators = {
        btnEnable: [{ type: ViewChild, args: ['btnEnable',] }],
        btnDisabled: [{ type: ViewChild, args: ['btnDisabled',] }],
        btnHidden: [{ type: ViewChild, args: ['btnHidden',] }],
        fieldEditable: [{ type: ViewChild, args: ['fieldEditable',] }],
        fieldReadonly: [{ type: ViewChild, args: ['fieldReadonly',] }],
        fieldHidden: [{ type: ViewChild, args: ['fieldHidden',] }],
        fieldRequired: [{ type: ViewChild, args: ['fieldRequired',] }],
        btnGrid: [{ type: ViewChild, args: ['btnGrid',] }],
        fieldTree: [{ type: ViewChild, args: ['fieldTree',] }],
        operationConfig: [{ type: ViewChild, args: [FormOperationConfigComponent,] }],
        container: [{ type: ViewChild, args: ['container', { read: ViewContainerRef },] }],
        showMethodTab: [{ type: Input }]
    };
    return FormFormatConfigComponent;
}());
export { FormFormatConfigComponent };
if (false) {
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnEnable;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnDisabled;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnHidden;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldEditable;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldReadonly;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldHidden;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldRequired;
    /** @type {?} */
    FormFormatConfigComponent.prototype.btnGrid;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldTree;
    /** @type {?} */
    FormFormatConfigComponent.prototype.operationConfig;
    /** @type {?} */
    FormFormatConfigComponent.prototype.container;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.extendComponentRef;
    /** @type {?} */
    FormFormatConfigComponent.prototype.config;
    /** @type {?} */
    FormFormatConfigComponent.prototype.formFormat;
    /** @type {?} */
    FormFormatConfigComponent.prototype.formFormatType;
    /** @type {?} */
    FormFormatConfigComponent.prototype.state;
    /** @type {?} */
    FormFormatConfigComponent.prototype.showMethodTab;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype._formFormatId;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype._formatConfigId;
    /** @type {?} */
    FormFormatConfigComponent.prototype.buttonCols;
    /** @type {?} */
    FormFormatConfigComponent.prototype.buttonConfigs;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldCols;
    /** @type {?} */
    FormFormatConfigComponent.prototype.fieldConfigs;
    /** @type {?} */
    FormFormatConfigComponent.prototype.formatFieldList;
    /** @type {?} */
    FormFormatConfigComponent.prototype.showExtendTab;
    /** @type {?} */
    FormFormatConfigComponent.prototype.searchFields;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    FormFormatConfigComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvZXhlY3V0ZS1mb3Jtcy9mb3JtLWZvcm1hdC1jb25maWcvZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLFNBQVMsRUFBZSxLQUFLLEVBQUUsZ0JBQWdCLEVBQWdCLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4TCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFbEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN6RCxPQUFPLEVBQUUsVUFBVSxFQUE0QixNQUFNLHlCQUF5QixDQUFDO0FBQy9FLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxlQUFlLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNyRyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxELE9BQU8sRUFBRSxTQUFTLEVBQWMsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQUN4RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUcxRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFJ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QVc7Z0NBQ3JCLFNBQVMsU0FBQyxlQUFlO2dDQUN6QixTQUFTLFNBQUMsZUFBZTs4QkFDekIsU0FBUyxTQUFDLGFBQWE7Z0NBQ3ZCLFNBQVMsU0FBQyxlQUFlOzBCQUV6QixTQUFTLFNBQUMsU0FBUzs0QkFDbkIsU0FBUyxTQUFDLFdBQVc7a0NBQ3JCLFNBQVMsU0FBQyw0QkFBNEI7NEJBRXRDLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUU7Z0NBU2pELEtBQUs7O0lBc3JCUixnQ0FBQztDQUFBLEFBcnRCRCxJQXF0QkM7U0E3c0JZLHlCQUF5Qjs7O0lBRXBDLDhDQUFvRDs7SUFDcEQsZ0RBQXdEOztJQUN4RCw4Q0FBb0Q7O0lBQ3BELGtEQUE0RDs7SUFDNUQsa0RBQTREOztJQUM1RCxnREFBd0Q7O0lBQ3hELGtEQUE0RDs7SUFFNUQsNENBQWlEOztJQUNqRCw4Q0FBc0Q7O0lBQ3RELG9EQUF1Rjs7SUFFdkYsOENBQWdGOzs7OztJQUNoRix1REFBOEM7O0lBRTlDLDJDQUFrRDs7SUFDbEQsK0NBQTBDOztJQUMxQyxtREFBK0I7O0lBRS9CLDBDQUErQjs7SUFFL0Isa0RBQThCOzs7OztJQUU5QixrREFBOEI7Ozs7O0lBVTlCLG9EQUFnQzs7SUFXaEMsK0NBQWdCOztJQUNoQixrREFBNEI7O0lBRTVCLDhDQUFlOztJQUNmLGlEQUEyQjs7SUFFM0Isb0RBQWdEOztJQUVoRCxrREFBc0I7O0lBRXRCLGlEQUFpRDs7Ozs7SUFHL0MseUNBQXlCOzs7OztJQUN6Qiw0Q0FBZ0M7Ozs7O0lBQ2hDLDJDQUE2Qjs7Ozs7SUFDN0IsNkNBQTBCOzs7OztJQUMxQix3Q0FBMEM7Ozs7O0lBQzFDLDZDQUEyQzs7Ozs7SUFDM0MsOENBQWlEOzs7OztJQUNqRCwrQ0FBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCwgSG9zdEJpbmRpbmcsIElucHV0LCBWaWV3Q29udGFpbmVyUmVmLCBDb21wb25lbnRSZWYsIEluamVjdG9yLCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwsIEluamVjdCwgTE9DQUxFX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IElGb3JtRm9ybWF0Q29uZmlnQ29tcG9uZW50IH0gZnJvbSBcIkBnc3Atd2YvYml6LXByb2Nlc3MtYXBpXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBmb3JrSm9pbiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBGb3JtRm9ybWF0LCBGb3JtRmllbGREYXRhLCBGb3JtRmllbGQgfSBmcm9tICcuLi9lbnRpdGllcy9mb3JtLWZvcm1hdCc7XHJcbmltcG9ydCB7IEZvcm1Gb3JtYXRDb25maWcsIEZvcm1CdXR0b25Db25maWcsIEZvcm1GaWVsZENvbmZpZyB9IGZyb20gJy4uL2VudGl0aWVzL2Zvcm0tZm9ybWF0LWNvbmZpZyc7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZVV0aWwgfSBmcm9tICcuLi8uLi8uLi9kb21haW4vcHJvY2Vzcy1kZS11dGlsJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IFBpY2tlZFJlc3VsdCwgU2VydmVyU2lkZVRva2VuLCBMb29rdXBHcmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IEZvcm1PcGVyYXRpb25Db25maWdDb21wb25lbnQgfSBmcm9tICcuLi9mb3JtLW9wZXJhdGlvbi1jb25maWcvZm9ybS1vcGVyYXRpb24tY29uZmlnLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuaW1wb3J0IHsgRm9ybUZvcm1hdFR5cGUgfSBmcm9tICcuLi9lbnRpdGllcy9mb3JtLWZvcm1hdC10eXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uLy4uL2kxOG4vcGlwZS93Zi1wcm9jZXNzLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcblxyXG5kZWNsYXJlIHZhciBTeXN0ZW06IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWZvcm0tZm9ybWF0LWNvbmZpZycsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Zvcm0tZm9ybWF0LWNvbmZpZy5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vZm9ybS1mb3JtYXQtY29uZmlnLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEZvcm1Gb3JtYXRDb25maWdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIElGb3JtRm9ybWF0Q29uZmlnQ29tcG9uZW50IHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnYnRuRW5hYmxlJykgYnRuRW5hYmxlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2J0bkRpc2FibGVkJykgYnRuRGlzYWJsZWQ6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnYnRuSGlkZGVuJykgYnRuSGlkZGVuOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkRWRpdGFibGUnKSBmaWVsZEVkaXRhYmxlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkUmVhZG9ubHknKSBmaWVsZFJlYWRvbmx5OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkSGlkZGVuJykgZmllbGRIaWRkZW46IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZmllbGRSZXF1aXJlZCcpIGZpZWxkUmVxdWlyZWQ6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2J0bkdyaWQnKSBidG5HcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdmaWVsZFRyZWUnKSBmaWVsZFRyZWU6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKEZvcm1PcGVyYXRpb25Db25maWdDb21wb25lbnQpIG9wZXJhdGlvbkNvbmZpZzogRm9ybU9wZXJhdGlvbkNvbmZpZ0NvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZCgnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGNvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICBwcml2YXRlIGV4dGVuZENvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcblxyXG4gIGNvbmZpZzogRm9ybUZvcm1hdENvbmZpZyA9IG5ldyBGb3JtRm9ybWF0Q29uZmlnKCk7XHJcbiAgZm9ybUZvcm1hdDogRm9ybUZvcm1hdCA9IG5ldyBGb3JtRm9ybWF0KCk7XHJcbiAgZm9ybUZvcm1hdFR5cGU6IEZvcm1Gb3JtYXRUeXBlO1xyXG5cclxuICBzdGF0ZTogJ25ldycgfCAnZWRpdCcgPSAnZWRpdCc7XHJcblxyXG4gIEBJbnB1dCgpIHNob3dNZXRob2RUYWIgPSB0cnVlO1xyXG5cclxuICBwcml2YXRlIF9mb3JtRm9ybWF0SWQ6IHN0cmluZztcclxuICBzZXQgZm9ybUZvcm1hdElkKHY6IHN0cmluZykge1xyXG4gICAgdGhpcy5fZm9ybUZvcm1hdElkID0gdjtcclxuICAgIHRoaXMuY29uZmlnLmZvcm1Gb3JtYXRJZCA9IHY7XHJcbiAgfVxyXG5cclxuICBnZXQgZm9ybUZvcm1hdElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1Gb3JtYXRJZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2Zvcm1hdENvbmZpZ0lkOiBzdHJpbmc7XHJcbiAgc2V0IGZvcm1hdENvbmZpZ0lkKHY6IHN0cmluZykge1xyXG4gICAgdGhpcy5fZm9ybWF0Q29uZmlnSWQgPSB2O1xyXG4gICAgaWYgKCF2KSB7XHJcbiAgICAgIHRoaXMuc3RhdGUgPSAnbmV3JztcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGZvcm1hdENvbmZpZ0lkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1hdENvbmZpZ0lkO1xyXG4gIH1cclxuXHJcbiAgYnV0dG9uQ29scyA9IFtdO1xyXG4gIGJ1dHRvbkNvbmZpZ3MgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgZmllbGRDb2xzID0gW107XHJcbiAgZmllbGRDb25maWdzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gIGZvcm1hdEZpZWxkTGlzdDogQXJyYXk8Rm9ybUZpZWxkPiA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBzaG93RXh0ZW5kVGFiID0gZmFsc2U7XHJcblxyXG4gIHNlYXJjaEZpZWxkczogeyBsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH1bXTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSxcclxuICApIHtcclxuICAgIHRoaXMubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZSB8fCBuZXcgV2ZMb2NhbGVQaXBlKGxvY2FsZUlkLCByZXNvdXJjZXMpO1xyXG4gICAgbGV0IHNlcmNoRmllbGRzID0ge1xyXG4gICAgICBsYWJlbCA6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuZmllbGROYW1lJyksXHJcbiAgICAgIHZhbHVlIDogJ2ZpZWxkTmFtZSdcclxuICAgIH07XHJcbiAgICBpZih0aGlzLnNlYXJjaEZpZWxkcykge1xyXG4gICAgICBpZighdGhpcy5zZWFyY2hGaWVsZHMuc29tZSh4ID0+IHgudmFsdWUgPT09IHNlcmNoRmllbGRzLnZhbHVlKSkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoRmllbGRzID0gdGhpcy5zZWFyY2hGaWVsZHMuY29uY2F0KHNlcmNoRmllbGRzKTtcclxuICAgICAgfVxyXG4gICAgfWVsc2Uge1xyXG4gICAgICB0aGlzLnNlYXJjaEZpZWxkcyA9IFtdO1xyXG4gICAgICB0aGlzLnNlYXJjaEZpZWxkcyA9IHRoaXMuc2VhcmNoRmllbGRzLmNvbmNhdChzZXJjaEZpZWxkcyk7XHJcbiAgICB9XHJcblxyXG4gICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5idXR0b25Db2xzID0gW1xyXG4gICAgICB7IGZpZWxkOiAnYnV0dG9uTmFtZScsIHdpZHRoOiAxMDAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuZXhlY3V0ZUZvcm1zLmJ1dHRvbk5hbWUnKSwgZmlsdGVyOiB0cnVlIH0sXHJcbiAgICAgIC8vIHsgZmllbGQ6ICdidXR0b25JZCcsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5oyJ6ZKu5qCH6K+GJyB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuZW5hYmxlJyksXHJcbiAgICAgICAgZmllbGQ6ICdlbmFibGUnLFxyXG4gICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5idG5FbmFibGUsXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGhBbGlnbjogJ2NlbnRlcidcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuZXhlY3V0ZUZvcm1zLmRpc2FibGVkJyksXHJcbiAgICAgICAgZmllbGQ6ICdkaXNhYmxlZCcsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmJ0bkRpc2FibGVkLFxyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBoQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmV4ZWN1dGVGb3Jtcy5oaWRkZW4nKSxcclxuICAgICAgICBmaWVsZDogJ2hpZGRlbicsXHJcbiAgICAgICAgd2lkdGg6IDgwLFxyXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmJ0bkhpZGRlbixcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgaEFsaWduOiAnY2VudGVyJ1xyXG4gICAgICB9XTtcclxuICAgIHRoaXMuZmllbGRDb2xzID0gW1xyXG4gICAgICB7IGZpZWxkOiAnZmllbGROYW1lJywgd2lkdGg6IDEwMCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuZmllbGROYW1lJyl9LFxyXG4gICAgICAvLyB7IGZpZWxkOiAnZmllbGRJZCcsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5a2X5q615qCH6K+GJyB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuZWRpdGFibGUnKSxcclxuICAgICAgICBmaWVsZDogJ2VkaXRhYmxlJyxcclxuICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuZmllbGRFZGl0YWJsZSxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgaEFsaWduOiAnY2VudGVyJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMucmVhZG9ubHknKSxcclxuICAgICAgICBmaWVsZDogJ3JlYWRvbmx5JyxcclxuICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuZmllbGRSZWFkb25seSxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgaEFsaWduOiAnY2VudGVyJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuaGlkZGVuJyksXHJcbiAgICAgICAgZmllbGQ6ICdoaWRkZW4nLFxyXG4gICAgICAgIHdpZHRoOiA4MCxcclxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5maWVsZEhpZGRlbixcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgaEFsaWduOiAnY2VudGVyJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMucmVxdWlyZWQnKSxcclxuICAgICAgICBmaWVsZDogJ3JlcXVpcmVkJyxcclxuICAgICAgICB3aWR0aDogODAsXHJcbiAgICAgICAgdGVtcGxhdGU6IHRoaXMuZmllbGRSZXF1aXJlZCxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgaEFsaWduOiAnY2VudGVyJ1xyXG4gICAgICB9XTtcclxuICAgIHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgfVxyXG5cclxuICBzdWJtaXQoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICB0aGlzLnZhbGlkYXRvcigpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgIGlmIChyZSkge1xyXG4gICAgICAgIHRoaXMuc2V0QnRuQW5kRmllbGRDb25maWdzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kQ29tcG9uZW50UmVmKSB7XHJcbiAgICAgICAgICB0aGlzLmV4dGVuZENvbXBvbmVudFJlZi5pbnN0YW5jZS5zdWJtaXQoKS5zdWJzY3JpYmUoY29uZmlnSWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnSWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5pZCA9IGNvbmZpZ0lkO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2F2ZUNvbmZpZyh0aGlzLmNvbmZpZykuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgY29uZmlnSWQ6IHRoaXMuY29uZmlnLmlkIH0pO1xyXG4gICAgICAgICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmV4ZWN1dGVGb3Jtcy5zYXZlRmFpbCcpKTtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGNvbmZpZ0lkOiB0aGlzLmNvbmZpZy5pZCB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ25ldycgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmZvcm1CdXR0b25Db25maWdzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuZm9ybUZpZWxkQ29uZmlncy5sZW5ndGggPT09IDAgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uQ29uZmlnLm9wZXJhdGlvbnMubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBjb25maWdJZDogbnVsbCB9KTtcclxuICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ29uZmlnKHRoaXMuY29uZmlnKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGNvbmZpZ0lkOiB0aGlzLmNvbmZpZy5pZCB9KTtcclxuICAgICAgICAgICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuZXhlY3V0ZUZvcm1zLnNhdmVGYWlsJykpO1xyXG4gICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBjb25maWdJZDogdGhpcy5jb25maWcuaWQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnbmV3JyAmJlxyXG4gICAgICAgICAgdGhpcy5jb25maWcuZm9ybUJ1dHRvbkNvbmZpZ3MubGVuZ3RoID09PSAwICYmXHJcbiAgICAgICAgICB0aGlzLmNvbmZpZy5mb3JtRmllbGRDb25maWdzLmxlbmd0aCA9PT0gMCAmJlxyXG4gICAgICAgICAgdGhpcy5vcGVyYXRpb25Db25maWcub3BlcmF0aW9ucy5sZW5ndGggPT09IDBcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGNvbmZpZ0lkOiBudWxsIH0pO1xyXG4gICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVDb25maWcodGhpcy5jb25maWcpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBjb25maWdJZDogdGhpcy5jb25maWcuaWQgfSk7XHJcbiAgICAgICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuc2F2ZUZhaWwnKSk7XHJcbiAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgY29uZmlnSWQ6IHRoaXMuY29uZmlnLmlkIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlfSlcclxuICAgICAgICB9LCAxMCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgc2VhcmNoRmllbGQoZGF0YSkge1xyXG4gICAgZGF0YS5maWVsZCA9ICdmaWVsZE5hbWUnO1xyXG4gICAgbGV0IHNlYXJjaERhdGEgPSB7XHJcbiAgICAgIGZpZWxkIDogJ2ZpZWxkTmFtZScsXHJcbiAgICAgIHZhbHVlIDogZGF0YS52YWx1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMuZmllbGRUcmVlLnNlYXJjaERhdGEgPSBzZWFyY2hEYXRhO1xyXG4gICAgLy8gdGhpcy5maWVsZFRyZWUuc2VhcmNoRGF0YS5maWVsZCA9ICdmaWVsZE5hbWUnO1xyXG4gICAgbGV0IHNlcmNoRmllbGRzID0ge1xyXG4gICAgICBsYWJlbCA6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuZmllbGROYW1lJyksXHJcbiAgICAgIHZhbHVlIDogJ2ZpZWxkTmFtZSdcclxuICAgIH07XHJcbiAgICBpZih0aGlzLmZpZWxkVHJlZS5zZWFyY2hGaWVsZHMpIHtcclxuICAgICAgaWYoIXRoaXMuZmllbGRUcmVlLnNlYXJjaEZpZWxkcy5zb21lKHggPT4geC52YWx1ZSA9PT0gc2VyY2hGaWVsZHMudmFsdWUpKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZFRyZWUuc2VhcmNoRmllbGRzID0gdGhpcy5maWVsZFRyZWUuc2VhcmNoRmllbGRzLmNvbmNhdChzZXJjaEZpZWxkcyk7XHJcbiAgICAgIH1cclxuICAgIH1lbHNlIHtcclxuICAgICAgdGhpcy5maWVsZFRyZWUuc2VhcmNoRmllbGRzID0gW107XHJcbiAgICAgIHRoaXMuZmllbGRUcmVlLnNlYXJjaEZpZWxkcyA9IHRoaXMuZmllbGRUcmVlLnNlYXJjaEZpZWxkcy5jb25jYXQoc2VyY2hGaWVsZHMpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maWVsZFRyZWUuc2VhcmNoSGFuZGxlLnNlYXJjaChkYXRhLmZpZWxkLCBkYXRhLnZhbHVlLCAnY2xpZW50Jyk7XHJcbiAgfVxyXG5cclxuICBidG5Db25maWdDaGFuZ2UoYm9vbDogYm9vbGVhbiwgZmllbGQ6IHN0cmluZywgaWQ6IHN0cmluZykge1xyXG4gICAgaWYgKGJvb2wpIHtcclxuICAgICAgZm9yIChjb25zdCBiIG9mIHRoaXMuYnV0dG9uQ29uZmlncykge1xyXG4gICAgICAgIGlmIChiLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgc3dpdGNoIChmaWVsZCkge1xyXG4gICAgICAgICAgICBjYXNlICdlbmFibGUnOlxyXG4gICAgICAgICAgICAgIGIuZW5hYmxlID0gYm9vbDtcclxuICAgICAgICAgICAgICBiLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYi5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZGlzYWJsZWQnOlxyXG4gICAgICAgICAgICAgIGIuZGlzYWJsZWQgPSBib29sO1xyXG4gICAgICAgICAgICAgIGIuZW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYi5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzpcclxuICAgICAgICAgICAgICBiLmhpZGRlbiA9IGJvb2w7XHJcbiAgICAgICAgICAgICAgYi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGIuZW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmJ0bkdyaWQudXBkYXRlUm93KGlkLCBiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuYnRuR3JpZC5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBidG5CYXRjaE9wZXJhdGUob3BlcmF0aW9uOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNoZWNrZWRzID0gdGhpcy5idG5HcmlkLmNoZWNrZWRSb3dzO1xyXG4gICAgaWYgKGNoZWNrZWRzICYmIGNoZWNrZWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBjIG9mIGNoZWNrZWRzKSB7XHJcbiAgICAgICAgdGhpcy5idG5Db25maWdDaGFuZ2UodHJ1ZSwgb3BlcmF0aW9uLCBjLmlkKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmJ0bkdyaWQuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmV4ZWN1dGVGb3Jtcy5jaGVja2VkUm93cycpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYnRuQmF0Y2hSZXNldCgpIHtcclxuICAgIGNvbnN0IGNoZWNrZWRzID0gdGhpcy5idG5HcmlkLmNoZWNrZWRSb3dzO1xyXG4gICAgaWYgKGNoZWNrZWRzICYmIGNoZWNrZWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBjIG9mIGNoZWNrZWRzKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5mb3JtRm9ybWF0LmZvcm1CdXR0b25zLmZpbmQoYiA9PiBiLmlkID09PSBjLmlkKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGIgb2YgdGhpcy5idXR0b25Db25maWdzKSB7XHJcbiAgICAgICAgICBpZiAoYi5pZCA9PT0gYy5pZCkge1xyXG4gICAgICAgICAgICBiLmVuYWJsZSA9IGJ1dHRvbi5idXR0b25TdGF0ZSA9PT0gJ0VuYWJsZScgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGIuZGlzYWJsZWQgPSBidXR0b24uYnV0dG9uU3RhdGUgPT09ICdEaXNhYmxlZCcgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGIuaGlkZGVuID0gYnV0dG9uLmJ1dHRvblN0YXRlID09PSAnSGlkZGVuJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuYnRuR3JpZC51cGRhdGVSb3coYi5pZCwgYik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYnRuR3JpZC5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuZXhlY3V0ZUZvcm1zLmNoZWNrZWRSb3dzJykpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaWVsZENvbmZpZ0NoYW5nZShib29sOiBib29sZWFuLCBmaWVsZDogc3RyaW5nLCBpZDogc3RyaW5nLCBzZWFyY2g9dHJ1ZSkge1xyXG4gICAgaWYgKGJvb2wpIHtcclxuICAgICAgdGhpcy5maWVsZFN3aXRjaENoYW5nZSh0aGlzLmZpZWxkQ29uZmlncywgZmllbGQsIGlkKTtcclxuICAgIH1cclxuICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgdGhpcy5maWVsZFRyZWUuc2VhcmNoSGFuZGxlWydyZXNlYXJjaCddKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgZmllbGRTd2l0Y2hDaGFuZ2UoZmllbGRDb25maWdzOiBBcnJheTxhbnk+LCBmaWVsZDogc3RyaW5nLCBpZDogc3RyaW5nKSB7XHJcbiAgICBpZiAoZmllbGRDb25maWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBmIG9mIGZpZWxkQ29uZmlncykge1xyXG4gICAgICAgIGlmIChmLmRhdGEuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICBzd2l0Y2ggKGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VkaXRhYmxlJzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVhZG9ubHknOlxyXG4gICAgICAgICAgICAgIGYuZGF0YS5lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdoaWRkZW4nOlxyXG4gICAgICAgICAgICAgIGYuZGF0YS5lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyZXF1aXJlZCc6XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChmLmNoaWxkcmVuICYmIGYuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpZWxkU3dpdGNoQ2hhbmdlKGYuY2hpbGRyZW4sIGZpZWxkLCBpZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaWVsZEJhdGNoT3BlcmF0ZShvcGVyYXRpb246IHN0cmluZykge1xyXG4gICAgY29uc3QgY2hlY2tlZHMgPSB0aGlzLmZpZWxkVHJlZS5jaGVja2VkcztcclxuICAgIGlmIChjaGVja2VkcyAmJiBjaGVja2Vkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgYyBvZiBjaGVja2Vkcykge1xyXG4gICAgICAgIHRoaXMuZmllbGRDb25maWdDaGFuZ2UodHJ1ZSwgb3BlcmF0aW9uLCBjLmRhdGEuaWQsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmZpZWxkVHJlZS5zZWFyY2hIYW5kbGVbJ3Jlc2VhcmNoJ10oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5leGVjdXRlRm9ybXMuY2hlY2tlZHMnKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpZWxkQmF0Y2hSZXNldCgpIHtcclxuICAgIGNvbnN0IGNoZWNrZWRzID0gdGhpcy5maWVsZFRyZWUuY2hlY2tlZHM7XHJcbiAgICBpZiAoY2hlY2tlZHMgJiYgY2hlY2tlZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2hlY2tlZHMpIHtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZm9ybWF0RmllbGRMaXN0LmZpbmQoZiA9PiBmLmlkID09PSBjLmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMucmVzZXRGaWVsZENvbmZpZyh0aGlzLmZpZWxkQ29uZmlncywgYy5kYXRhLmlkLCBmaWVsZCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5maWVsZFRyZWUuc2VhcmNoSGFuZGxlWydyZXNlYXJjaCddKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuZXhlY3V0ZUZvcm1zLmNoZWNrZWRzJykpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc2V0RmllbGRDb25maWcoZmllbGRDb25maWdzOiBBcnJheTxhbnk+LCBpZDogc3RyaW5nLCBmaWVsZDogRm9ybUZpZWxkKSB7XHJcbiAgICBpZiAoZmllbGRDb25maWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBmIG9mIGZpZWxkQ29uZmlncykge1xyXG4gICAgICAgIGlmIChmLmxlYWYgPT09IHRydWUgJiYgZi5kYXRhLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gZmllbGQuZmllbGRTdGF0ZSA9PT0gJ0VkaXRhYmxlJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IGZpZWxkLmZpZWxkU3RhdGUgPT09ICdSZWFkb25seScgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gZmllbGQuZmllbGRTdGF0ZSA9PT0gJ0hpZGRlbicgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmaWVsZC5maWVsZFN0YXRlID09PSAnUmVxdWlyZWQnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldEZpZWxkQ29uZmlnKGYuY2hpbGRyZW4sIGlkLCBmaWVsZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHZhbGlkYXRvcigpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIGlmICh0aGlzLmV4dGVuZENvbXBvbmVudFJlZikge1xyXG4gICAgICBjb25zdCByZXN1bHQkID0gdGhpcy5leHRlbmRDb21wb25lbnRSZWYuaW5zdGFuY2UudmFsaWRhdG9yKCk7XHJcbiAgICAgIGlmIChyZXN1bHQkIGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQkLnBpcGUoXHJcbiAgICAgICAgICBzd2l0Y2hNYXAoKGI6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKGIgJiYgdGhpcy5pbm5lclZhbGlkYXRvcigpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAocmVzdWx0JCkge1xyXG4gICAgICAgICAgcmV0dXJuIG9mKHRoaXMuaW5uZXJWYWxpZGF0b3IoKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YodGhpcy5pbm5lclZhbGlkYXRvcigpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5uZXJWYWxpZGF0b3IoKTogYm9vbGVhbiAge1xyXG4gICAgcmV0dXJuIHRoaXMub3BlcmF0aW9uQ29uZmlnLnZhbGlkYXRvcigpO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgc2V0QnRuQW5kRmllbGRDb25maWdzKCkge1xyXG4gICAgdGhpcy5jb25maWcuZm9ybUJ1dHRvbkNvbmZpZ3MgPSBuZXcgQXJyYXk8Rm9ybUJ1dHRvbkNvbmZpZz4oKTtcclxuICAgIGZvciAoY29uc3QgYnRuIG9mIHRoaXMuYnV0dG9uQ29uZmlncykge1xyXG4gICAgICBjb25zdCBidXR0b24gPSB0aGlzLmZvcm1Gb3JtYXQuZm9ybUJ1dHRvbnMuZmluZChiID0+IGIuYnV0dG9uSWQgPT09IGJ0bi5idXR0b25JZCk7XHJcbiAgICAgIGNvbnN0IGJ0bkNvbmZpZyA9IG5ldyBGb3JtQnV0dG9uQ29uZmlnKCk7XHJcbiAgICAgIGJ0bkNvbmZpZy5idXR0b25JZCA9IGJ0bi5idXR0b25JZDtcclxuICAgICAgaWYgKGJ0bi5lbmFibGUpIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnRW5hYmxlJztcclxuICAgICAgfSBlbHNlIGlmIChidG4uZGlzYWJsZWQpIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnRGlzYWJsZWQnO1xyXG4gICAgICB9IGVsc2UgaWYgKGJ0bi5oaWRkZW4pIHtcclxuICAgICAgICBidG5Db25maWcuYnV0dG9uU3RhdGUgPSAnSGlkZGVuJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWJ1dHRvbi5idXR0b25TdGF0ZSAmJiBidG5Db25maWcuYnV0dG9uU3RhdGUpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtQnV0dG9uQ29uZmlncy5wdXNoKGJ0bkNvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGJ1dHRvbi5idXR0b25TdGF0ZSAmJiBidXR0b24uYnV0dG9uU3RhdGUgIT09IGJ0bkNvbmZpZy5idXR0b25TdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmZvcm1CdXR0b25Db25maWdzLnB1c2goYnRuQ29uZmlnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb25maWcuZm9ybUZpZWxkQ29uZmlncyA9IG5ldyBBcnJheTxGb3JtRmllbGRDb25maWc+KCk7XHJcbiAgICB0aGlzLmdldEZpZWxkQ29uZmlncyh0aGlzLmZpZWxkQ29uZmlncyk7XHJcblxyXG4gICAgdGhpcy5jb25maWcuZm9ybU1ldGhvZENvbmZpZ3MgPSB0aGlzLm9wZXJhdGlvbkNvbmZpZy5vcGVyYXRpb25zIHx8IG5ldyBBcnJheSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGaWVsZENvbmZpZ3MoZmllbGRDb25maWdzOiBBcnJheTxhbnk+KSB7XHJcbiAgICBpZiAoZmllbGRDb25maWdzICYmIGZpZWxkQ29uZmlncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgZiBvZiBmaWVsZENvbmZpZ3MpIHtcclxuICAgICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMuZ2V0RmllbGRDb25maWdzKGYuY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZi5sZWFmID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5mb3JtYXRGaWVsZExpc3QuZmluZChmZCA9PiBmZC5maWVsZElkID09PSBmLmRhdGEuZmllbGRJZCk7XHJcbiAgICAgICAgY29uc3QgZmllbGRDb25maWcgPSBuZXcgRm9ybUZpZWxkQ29uZmlnKCk7XHJcbiAgICAgICAgZmllbGRDb25maWcuZmllbGRJZCA9IGYuZGF0YS5maWVsZElkO1xyXG4gICAgICAgIGlmIChmLmRhdGEuZWRpdGFibGUpIHtcclxuICAgICAgICAgIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUgPSAnRWRpdGFibGUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZi5kYXRhLnJlYWRvbmx5KSB7XHJcbiAgICAgICAgICBmaWVsZENvbmZpZy5maWVsZFN0YXRlID0gJ1JlYWRvbmx5JztcclxuICAgICAgICB9IGVsc2UgaWYgKGYuZGF0YS5oaWRkZW4pIHtcclxuICAgICAgICAgIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUgPSAnSGlkZGVuJztcclxuICAgICAgICB9IGVsc2UgaWYgKGYuZGF0YS5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgZmllbGRDb25maWcuZmllbGRTdGF0ZSA9ICdSZXF1aXJlZCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFmaWVsZC5maWVsZFN0YXRlICYmIGZpZWxkQ29uZmlnLmZpZWxkU3RhdGUpIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlnLmZvcm1GaWVsZENvbmZpZ3MucHVzaChmaWVsZENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmllbGQuZmllbGRTdGF0ZSAmJiBmaWVsZC5maWVsZFN0YXRlICE9PSBmaWVsZENvbmZpZy5maWVsZFN0YXRlKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpZy5mb3JtRmllbGRDb25maWdzLnB1c2goZmllbGRDb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDb25maWcoKSB7XHJcbiAgICBpZiAodGhpcy5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgZm9ya0pvaW4odGhpcy5nZXRGb3JtRm9ybWF0VHlwZSgpLCB0aGlzLmdldEZvcm1Gb3JtYXQoKSwgdGhpcy5nZXRGb3JtRm9ybWF0Q29uZmlnKCkpLnN1YnNjcmliZSgocmU6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZm9ybUZvcm1hdFR5cGUgPSByZVswXSBhcyBGb3JtRm9ybWF0VHlwZTtcclxuICAgICAgICBpZiAoZm9ybUZvcm1hdFR5cGUpIHtcclxuICAgICAgICAgIHRoaXMuZm9ybUZvcm1hdFR5cGUgPSBmb3JtRm9ybWF0VHlwZTtcclxuICAgICAgICAgIGlmICh0aGlzLmZvcm1Gb3JtYXRUeXBlLmV4dGVuZEltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RXh0ZW5kVGFiID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVFeHRlbmRDb21wb25lbnQodGhpcy5mb3JtRm9ybWF0VHlwZS5leHRlbmRJbXBsKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0V4dGVuZFRhYiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmb3JtRm9ybWF0ID0gcmVbMV0gYXMgRm9ybUZvcm1hdDtcclxuICAgICAgICBpZiAoZm9ybUZvcm1hdCkge1xyXG4gICAgICAgICAgdGhpcy5mb3JtRm9ybWF0ID0gdGhpcy5jb252ZXJ0Rm9ybUZvcm1hdChmb3JtRm9ybWF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0gcmVbMl0gYXMgRm9ybUZvcm1hdENvbmZpZztcclxuICAgICAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZm9ybUZvcm1hdC5mb3JtQnV0dG9ucykge1xyXG4gICAgICAgICAgdGhpcy5idXR0b25Db25maWdzID0gdGhpcy5mb3JtRm9ybWF0LmZvcm1CdXR0b25zLm1hcChiID0+IE9iamVjdC5hc3NpZ24oe30sIGIsIHtcclxuICAgICAgICAgICAgZW5hYmxlOiBiLmJ1dHRvblN0YXRlID09PSAnRW5hYmxlJyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgZGlzYWJsZWQ6IGIuYnV0dG9uU3RhdGUgPT09ICdEaXNhYmxlZCcgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgIGhpZGRlbjogYi5idXR0b25TdGF0ZSA9PT0gJ0hpZGRlbicgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIGxldCBidG5Db25maWdzID0gbmV3IEFycmF5PEZvcm1CdXR0b25Db25maWc+KCk7XHJcbiAgICAgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5mb3JtQnV0dG9uQ29uZmlncykge1xyXG4gICAgICAgICAgICBidG5Db25maWdzID0gY29uZmlnLmZvcm1CdXR0b25Db25maWdzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yIChjb25zdCBiIG9mIGJ0bkNvbmZpZ3MpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBidG4gb2YgdGhpcy5idXR0b25Db25maWdzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGJ0bi5idXR0b25JZCA9PT0gYi5idXR0b25JZCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChiLmJ1dHRvblN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ0VuYWJsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlICdEaXNhYmxlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmVuYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlICdIaWRkZW4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5lbmFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5mb3JtRm9ybWF0LmZvcm1GaWVsZHMpIHtcclxuICAgICAgICAgIHRoaXMuZmllbGRDb25maWdzID0gWy4uLnRoaXMuZm9ybUZvcm1hdC5mb3JtRmllbGRzXTtcclxuICAgICAgICAgIHRoaXMub3JnRmllbGRDb25maWdzKHRoaXMuZmllbGRDb25maWdzKTtcclxuICAgICAgICAgIGxldCBjb25maWdzID0gbmV3IEFycmF5PEZvcm1GaWVsZENvbmZpZz4oKTtcclxuICAgICAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmZvcm1GaWVsZENvbmZpZ3MpIHtcclxuICAgICAgICAgICAgY29uZmlncyA9IGNvbmZpZy5mb3JtRmllbGRDb25maWdzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yIChjb25zdCBmIG9mIGNvbmZpZ3MpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWVsZENvbmZpZyh0aGlzLmZpZWxkQ29uZmlncywgZik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZUV4dGVuZENvbXBvbmVudChleHRlbmRJbXBsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHVybCA9IGV4dGVuZEltcGwuc3BsaXQoJyMnKVswXTtcclxuICAgIGNvbnN0IHNlbGVjdG9yQ21wID0gZXh0ZW5kSW1wbC5zcGxpdCgnIycpWzFdO1xyXG4gICAgU3lzdGVtLmltcG9ydCh1cmwpXHJcbiAgICAgIC50aGVuKChtb2R1bGVGYWN0b3J5czogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbW9kdWxlRmFjdG9yeTogYW55ID0gT2JqZWN0LnZhbHVlcyhtb2R1bGVGYWN0b3J5cylbMF07XHJcbiAgICAgICAgY29uc3QgbW9kdWxlUmVmID0gbW9kdWxlRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgICAgaWYgKHNlbGVjdG9yQ21wKSB7XHJcbiAgICAgICAgICBsZXQgZmFjTWFwOiBNYXA8YW55LCBhbnk+ID0gbW9kdWxlUmVmLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlclsnX2ZhY3RvcmllcyddO1xyXG4gICAgICAgICAgZmFjTWFwLmZvckVhY2goKHZhbHVlOiBhbnksIGtleTogRnVuY3Rpb24sIG1hcDogTWFwPGFueSwgYW55PikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gdmFsdWUuc2VsZWN0b3I7XHJcbiAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yQ21wID09IHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbXBGYWN0b3J5ID0gbW9kdWxlUmVmLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShrZXkgYXMgYW55KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQ29tcG9uZW50UmVmID0gY21wRmFjdG9yeS5jcmVhdGUobW9kdWxlUmVmLmluamVjdG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kQ29tcG9uZW50UmVmLmluc3RhbmNlLmZvcm1Gb3JtYXRJZCA9IHRoaXMuZm9ybUZvcm1hdElkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRlbmRDb21wb25lbnRSZWYuaW5zdGFuY2UuZm9ybWF0Q29uZmlnSWQgPSB0aGlzLmZvcm1hdENvbmZpZ0lkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmluc2VydCh0aGlzLmV4dGVuZENvbXBvbmVudFJlZi5ob3N0Vmlldyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGJvb3RzdHJhcENvbXBvbmVudCA9IG1vZHVsZVJlZlsnX2Jvb3RzdHJhcENvbXBvbmVudHMnXVswXTtcclxuICAgICAgICAgIGlmIChib290c3RyYXBDb21wb25lbnQpLy/lhYjmib5ib290c3RyYXBDb21wb25lbnTmlbDnu4TmnInml6Dnu4Tku7ZcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgY21wRmFjdG9yeSA9IG1vZHVsZVJlZi5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoYm9vdHN0cmFwQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgdGhpcy5leHRlbmRDb21wb25lbnRSZWYgPSBjbXBGYWN0b3J5LmNyZWF0ZShtb2R1bGVSZWYuaW5qZWN0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLmV4dGVuZENvbXBvbmVudFJlZi5pbnN0YW5jZS5mb3JtRm9ybWF0SWQgPSB0aGlzLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgICAgICAgdGhpcy5leHRlbmRDb21wb25lbnRSZWYuaW5zdGFuY2UuZm9ybWF0Q29uZmlnSWQgPSB0aGlzLmZvcm1hdENvbmZpZ0lkO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnQodGhpcy5leHRlbmRDb21wb25lbnRSZWYuaG9zdFZpZXcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvcmdGaWVsZENvbmZpZ3MoZm9ybUZpZWxkczogQXJyYXk8Rm9ybUZpZWxkRGF0YT4pIHtcclxuICAgIGlmIChmb3JtRmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBkIG9mIGZvcm1GaWVsZHMpIHtcclxuICAgICAgICBkLmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBkLmRhdGEsIHtcclxuICAgICAgICAgIGVkaXRhYmxlOiBkLmRhdGEuZmllbGRTdGF0ZSA9PT0gJ0VkaXRhYmxlJyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgIHJlYWRvbmx5OiBkLmRhdGEuZmllbGRTdGF0ZSA9PT0gJ1JlYWRvbmx5JyA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgIGhpZGRlbjogZC5kYXRhLmZpZWxkU3RhdGUgPT09ICdIaWRkZW4nID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgcmVxdWlyZWQ6IGQuZGF0YS5maWVsZFN0YXRlID09PSAnUmVxdWlyZWQnID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgdGhpcy5vcmdGaWVsZENvbmZpZ3MoZC5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEZpZWxkQ29uZmlnKGZpZWxkQ29uZmlnczogQXJyYXk8YW55PiwgY29uZmlnOiBGb3JtRmllbGRDb25maWcpIHtcclxuICAgIGlmIChmaWVsZENvbmZpZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgZmllbGRDb25maWdzKSB7XHJcbiAgICAgICAgaWYgKGYuZGF0YS5maWVsZElkID09PSBjb25maWcuZmllbGRJZCkge1xyXG4gICAgICAgICAgc3dpdGNoIChjb25maWcuZmllbGRTdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlICdFZGl0YWJsZSc6XHJcbiAgICAgICAgICAgICAgZi5kYXRhLmVkaXRhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZi5kYXRhLnJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1JlYWRvbmx5JzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnSGlkZGVuJzpcclxuICAgICAgICAgICAgICBmLmRhdGEuZWRpdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVhZG9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnUmVxdWlyZWQnOlxyXG4gICAgICAgICAgICAgIGYuZGF0YS5lZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGYuZGF0YS5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICBmLmRhdGEucmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWVsZENvbmZpZyhmLmNoaWxkcmVuLCBjb25maWcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzYXZlQ29uZmlnKGNvbmZpZzogRm9ybUZvcm1hdENvbmZpZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvZm9ybUZvcm1hdENvbmZpZyc7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBjb25maWcpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGb3JtRm9ybWF0KCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAodGhpcy5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9mb3JtRm9ybWF0LyR7dGhpcy5mb3JtRm9ybWF0SWR9YDtcclxuICAgICAgdXJsID0gZW5jb2RlVVJJKHVybCk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YobnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZvcm1Gb3JtYXRUeXBlKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAodGhpcy5mb3JtRm9ybWF0SWQpIHtcclxuICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL2Zvcm1Gb3JtYXRUeXBlL2Zvcm1Gb3JtYXQ/Zm9ybUZvcm1hdD0ke3RoaXMuZm9ybUZvcm1hdElkfWA7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZvcm1Gb3JtYXRDb25maWcoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLmZvcm1hdENvbmZpZ0lkKSB7XHJcbiAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvZm9ybUZvcm1hdENvbmZpZy8ke3RoaXMuZm9ybWF0Q29uZmlnSWR9YDtcclxuICAgICAgdXJsID0gZW5jb2RlVVJJKHVybCk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gb2YobnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbnZlcnRGb3JtRm9ybWF0KGZvcm1Gb3JtYXQ6IEZvcm1Gb3JtYXQpOiBGb3JtRm9ybWF0IHtcclxuICAgIGlmICghZm9ybUZvcm1hdC5zdGF0dXMpIHtcclxuICAgICAgZm9ybUZvcm1hdC5zdGF0dXMgPSAwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb252ZXJ0Zm9ybUZpZWxkcyhmb3JtRm9ybWF0LmZvcm1GaWVsZHMpO1xyXG4gICAgdGhpcy5nZXRGb3JtYXRGaWVsZExpc3QoZm9ybUZvcm1hdC5mb3JtRmllbGRzLCB0aGlzLmZvcm1hdEZpZWxkTGlzdCk7XHJcbiAgICByZXR1cm4gZm9ybUZvcm1hdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29udmVydGZvcm1GaWVsZHMoZm9ybUZpZWxkczogQXJyYXk8Rm9ybUZpZWxkRGF0YT4pIHtcclxuICAgIGlmIChmb3JtRmllbGRzICYmIGZvcm1GaWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGQgb2YgZm9ybUZpZWxkcykge1xyXG4gICAgICAgIGlmICh0eXBlb2YoZC5sZWFmKSAhPT0gJ2Jvb2xlYW4nICYmIChkLmxlYWYgPT0gbnVsbCB8fCBkLmxlYWYgPT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgIGQubGVhZiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkLmNoaWxkcmVuICYmIGQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgIHRoaXMub3JnRmllbGRDb25maWdzKGQuY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGb3JtYXRGaWVsZExpc3QoZm9ybUZpZWxkczogQXJyYXk8Rm9ybUZpZWxkRGF0YT4sIGFycmF5OiBBcnJheTxGb3JtRmllbGQ+KSB7XHJcbiAgICBpZiAoZm9ybUZpZWxkcyAmJiBmb3JtRmllbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBkIG9mIGZvcm1GaWVsZHMpIHtcclxuICAgICAgICBhcnJheS5wdXNoKGQuZGF0YSk7XHJcbiAgICAgICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgdGhpcy5nZXRGb3JtYXRGaWVsZExpc3QoZC5jaGlsZHJlbiwgYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGb3JtYXRGaWVsZChmb3JtRmllbGRzOiBBcnJheTxGb3JtRmllbGREYXRhPiwgZmllbGRJZDogc3RyaW5nKTogRm9ybUZpZWxkRGF0YSB7XHJcbiAgICBmb3IgKGNvbnN0IGYgb2YgZm9ybUZpZWxkcykge1xyXG4gICAgICBpZiAoZi5kYXRhLmZpZWxkSWQgPT09IGZpZWxkSWQpIHtcclxuICAgICAgICByZXR1cm4gZjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZi5jaGlsZHJlbiAmJiBmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3JtYXRGaWVsZChmLmNoaWxkcmVuLCBmaWVsZElkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59XHJcbiJdfQ==