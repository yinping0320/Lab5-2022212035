/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, ComponentFactoryResolver, EventEmitter, Inject, Injector, Input, LOCALE_ID, Optional, Output, TemplateRef, ViewChild } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { DatagridComponent } from '@farris/ui-datagrid';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { MessagerService } from '@farris/ui-messager';
import { BsModalService } from '@farris/ui-modal';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ProcessDeUtil } from '../../domain/process-de-util';
import { PerformerEditComponent } from '../performer/views/performer-edit/performer-edit.component';
import { AssignConfig } from './assign-config';
import { ComponentParticipant, OrganizationParticipant, ParticipantInfo } from './participant.info';
import { ParticipantUIState } from './participant.uistate';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../i18n/pipe/wf-process-editor-locale.pipe';
var ParticipantComponent = /** @class */ (function () {
    function ParticipantComponent(designerUIState, uistate, resolver, injector, modalService, message, expr, http, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.designerUIState = designerUIState;
        this.uistate = uistate;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.expr = expr;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.nodeType = 'notifyActivity';
        this.isClose = true;
        this.participant = new ParticipantInfo();
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        // 编辑状态，用于区分是新增还是编辑  new | edit
        this.type = 'humanPerformer';
        this.assignStrategyList = [
            { value: 'ALL', name: this.localePipe.transform('component.participant.all') },
            { value: 'ASSIGN', name: this.localePipe.transform('component.participant.assign') },
            { value: 'CLAIM', name: this.localePipe.transform('component.participant.claim') }
        ];
        this.operatorCollection = [
            { text: this.localePipe.transform('component.participant.currentUser'), value: 'currentUser' },
            { text: this.localePipe.transform('component.participant.procInstCreator'), value: 'procInstCreator' }
        ];
        this.modalConfig = {
            title: this.localePipe.transform('component.participant.participantSet'),
            width: 900,
            height: 662,
            showButtons: true
        };
        this.columns = [
            {
                field: 'order', width: 25, title: this.localePipe.transform('component.participant.order'),
                editor: {
                    type: EditorTypes.NUMBERBOX, options: {}
                },
            }, {
                field: 'type', width: 50, title: this.localePipe.transform('component.participant.type'),
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            }, {
                field: 'performerName', width: 50, title: this.localePipe.transform('component.participant.performerName'), showTips: true, formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                function (v, d, i) {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return d.performerName;
                        case 'wf.VariableParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.PositionParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.ComponentParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.ReportingLineParticipantExpression':
                            return ((/** @type {?} */ (d))).reportingLineDefName + '-' + ((/** @type {?} */ (d))).dimension;
                        case 'wf.MatrixParticipantExpression':
                            return ((/** @type {?} */ (d))).matrixDefName + '-' + ((/** @type {?} */ (d))).dataFieldAlias;
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName;
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'description', width: 100, title: this.localePipe.transform('component.participant.description'), showTips: true,
                formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                function (v, d, i) {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return _this.getUserPerformerDescription(d);
                        case 'wf.VariableParticipantExpression':
                            return _this.getVariablePerformerDescription(d);
                        case 'wf.PositionParticipantExpression':
                            return _this.getPositionPerformerDescription(d);
                        case 'wf.ComponentParticipantExpression':
                            return _this.getComponentPerformerDescription(d);
                        case 'wf.ReportingLineParticipantExpression':
                            return _this.getReportingLinePerformerDescription(d);
                        case 'wf.MatrixParticipantExpression':
                            return _this.getMatrixPerformerDescription(d);
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName + '，且' + (((/** @type {?} */ (d))).includeChildren ? '包含下级' : '不包含下级');
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'condition', width: 60, title: this.localePipe.transform('component.participant.condition'), showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.editConditon(e);
                        }),
                    }
                }
            }
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.GetOrganizationType();
    }
    Object.defineProperty(ParticipantComponent.prototype, "value", {
        set: /**
         * @param {?} participant
         * @return {?}
         */
        function (participant) {
            var e_1, _a, e_2, _b;
            this.participant = JSON.parse(JSON.stringify(participant));
            if (!this.participant.assignStrategy.assignConfig) {
                this.participant.assignStrategy.assignConfig = new AssignConfig();
            }
            this.preAssignStrategy = participant.assignStrategy.assignStrategy;
            if (this.participant.humanPerformerList
                && this.participant.humanPerformerList.length > 0) {
                if (Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.order; })))) === 0) {
                    /** @type {?} */
                    var index = 1;
                    try {
                        for (var _c = tslib_1.__values(this.participant.humanPerformerList), _d = _c.next(); !_d.done; _d = _c.next()) {
                            var humanPerformer = _d.value;
                            humanPerformer.order = index;
                            index++;
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                }
                this.participant.humanPerformerList = this.participant.humanPerformerList.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) { return a.order - b.order; }));
            }
            if (this.participant.potentialOwnerList
                && this.participant.potentialOwnerList.length > 0) {
                if (Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.order; })))) === 0) {
                    /** @type {?} */
                    var index = 1;
                    try {
                        for (var _e = tslib_1.__values(this.participant.potentialOwnerList), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var potentialOwner = _f.value;
                            potentialOwner.order = index;
                            index++;
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
                this.participant.potentialOwnerList = this.participant.potentialOwnerList.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) { return a.order - b.order; }));
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.nodeType = this.editorParams.nodeType;
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        this.humanPerformerGrid.endCellEdit();
        if (this.potentialOwnerGrid) {
            this.potentialOwnerGrid.endCellEdit();
        }
        /** @type {?} */
        var object = {
            value: this.participant, parameters: null
        };
        this.submitModal.emit(object);
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ParticipantComponent.prototype.assignStrategyChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (this.preAssignStrategy !== 'ASSIGN' && data === 'ASSIGN' && this.participant.humanPerformerList.length > 0) {
            if (!this.participant.assignStrategy.assignConfig) {
                this.participant.assignStrategy.assignConfig = new AssignConfig();
            }
            this.message.question(this.localePipe.transform('component.participant.dataMovement1'), (/**
             * @return {?}
             */
            function () {
                _this.humanPerformerCopyToPotentialOwner();
            }));
        }
        else if (this.preAssignStrategy === 'ASSIGN' && data !== 'ASSIGN' && this.participant.potentialOwnerList.length > 0) {
            this.message.question(this.localePipe.transform('component.participant.dataMovement2'), (/**
             * @return {?}
             */
            function () {
                _this.potentialOwnerCopyToHumanPerformer();
            }));
        }
        this.preAssignStrategy = data;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ParticipantComponent.prototype.switchChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            this.clearPerformer('potentialOwner');
        }
    };
    /**
     * @param {?} performerType
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.addPerformer = /**
     * @param {?} performerType
     * @param {?} type
     * @return {?}
     */
    function (performerType, type) {
        this.editState = 'new';
        this.type = type;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.performerType = performerType;
        /** @type {?} */
        var boxsize = this.attributeBoxSize(performerType);
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform('component.participant.participantSelection'),
            width: boxsize.width,
            height: boxsize.height,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
        this.dropDownEl.close();
        if (this.dropDownE2) {
            this.dropDownE2.close();
        }
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.editOK = /**
     * @return {?}
     */
    function () {
        var e_3, _a, e_4, _b;
        this.isClose = true;
        if (this.compRef) {
            /** @type {?} */
            var re = this.compRef.instance.getPerformers();
            if (re.userPerformers && re.userPerformers.length > 0) {
                try {
                    for (var _c = tslib_1.__values(re.userPerformers), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var p = _d.value;
                        this.addUserPerformer(p);
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
            }
            if (re.variable && re.variable !== null && re.variable.performerId) {
                this.addvariablePerformer(re.variable);
            }
            // 2023-7-28 组织岗支持多选
            if (re.positions && re.positions.length > 0) {
                this.addPositionPerformer(re.positions);
            }
            if (re.component && re.component.metadataId && re.component.methodCode) {
                this.addComponentPerformer(re.component);
            }
            if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {
                this.addReportingLinePerformer(re.reportingLine);
            }
            if (re.matrix && re.matrix.matrixDefId) {
                this.addMatrixPerformer(re.matrix);
            }
            if (re.activityExecutorPerformers && re.activityExecutorPerformers.length > 0) {
                try {
                    for (var _e = tslib_1.__values(re.activityExecutorPerformers), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var a = _f.value;
                        this.addActivityExecutorPerformer(a);
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            }
            if (re.organizationParticipant) {
                this.addOrganizationParticipant(re.organizationParticipant);
            }
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
        // 编辑完成后刷新两个组件
        this.humanPerformerGrid.refresh();
        this.potentialOwnerGrid.refresh();
    };
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    ParticipantComponent.prototype.addUserPerformer = /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    function (userPerformer) {
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === userPerformer.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === userPerformer.performerId)); }));
            if (i > -1) {
                // this.participant.humanPerformerList[i] = userPerformer;
            }
            else {
                if (this.editState === 'edit') {
                    this.removeHumanPerformer();
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                userPerformer.order = index;
                this.participant.humanPerformerList.push(userPerformer);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === userPerformer.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === userPerformer.performerId)); }));
            if (i > -1) {
                // this.participant.potentialOwnerList[i] = userPerformer;
            }
            else {
                if (this.editState === 'edit') {
                    this.removePotentialOwner();
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                userPerformer.order = index;
                this.participant.potentialOwnerList.push(userPerformer);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @private
     * @param {?} variable
     * @return {?}
     */
    ParticipantComponent.prototype.addvariablePerformer = /**
     * @private
     * @param {?} variable
     * @return {?}
     */
    function (variable) {
        /** @type {?} */
        var v = variable;
        if (!v || !v.varValue) {
            this.message.info(this.localePipe.transform('component.participant.selectProcessVariables'));
            this.isClose = false;
        }
        else if (!v.varType) {
            this.message.info(this.localePipe.transform('component.participant.selectVariableValueType'));
            this.isClose = false;
        }
        else if (!v.relation) {
            this.message.info(this.localePipe.transform('component.participant.selectRelation'));
            this.isClose = false;
        }
        else {
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                var i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return (a.id === variable.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === variable.performerId)); }));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = variable;
                }
                else {
                    if (this.editState === 'edit') {
                        this.removeHumanPerformer();
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        function (h) { return h.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    variable.order = index;
                    this.participant.humanPerformerList.push(variable);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return (a.id === variable.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === variable.performerId)); }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = variable;
                }
                else {
                    if (this.editState === 'edit') {
                        this.removePotentialOwner();
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    variable.order = index;
                    this.participant.potentialOwnerList.push(variable);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} positions
     * @return {?}
     */
    ParticipantComponent.prototype.addPositionPerformer = /**
     * @private
     * @param {?} positions
     * @return {?}
     */
    function (positions) {
        var e_5, _a;
        var _loop_1 = function (position) {
            if (!position.performerId) {
                this_1.message.info(this_1.localePipe.transform('component.participant.selectPosition'));
                this_1.isClose = false;
            }
            else {
                if ((!position.orgType || position.orgType == null) && (position.isRequired && position.positionType === '1')) {
                    this_1.message.info(this_1.localePipe.transform('component.participant.selectOrgType'));
                    this_1.isClose = false;
                }
                else if ((!position.orgId || position.orgId == null) && (position.isRequired && position.positionType === '1')) {
                    this_1.message.info(this_1.localePipe.transform('component.participant.orgFill'));
                    this_1.isClose = false;
                }
                else {
                    // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                    if (this_1.type === 'humanPerformer') {
                        /** @type {?} */
                        var i = this_1.participant.humanPerformerList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) {
                            if (a.type !== 'wf.PositionParticipantExpression') {
                                return false;
                            }
                            /** @type {?} */
                            var p = (/** @type {?} */ (a));
                            return (p.id === position.id);
                        }));
                        if (i > -1) {
                            this_1.participant.humanPerformerList[i] = position;
                        }
                        else {
                            /** @type {?} */
                            var index = void 0;
                            if (this_1.participant.humanPerformerList.length > 0) {
                                index = Math.max.apply(Math, tslib_1.__spread(this_1.participant.humanPerformerList.map((/**
                                 * @param {?} h
                                 * @return {?}
                                 */
                                function (h) { return h.order; })))) + 1;
                            }
                            else {
                                index = 1;
                            }
                            position.order = index;
                            this_1.participant.humanPerformerList.push(position);
                        }
                        this_1.humanPerformerGrid.loadData(this_1.participant.humanPerformerList);
                    }
                    else if (this_1.type === 'potentialOwner') {
                        /** @type {?} */
                        var i = this_1.participant.potentialOwnerList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) {
                            if (a.type !== 'wf.PositionParticipantExpression') {
                                return false;
                            }
                            /** @type {?} */
                            var p = (/** @type {?} */ (a));
                            return (p.id === position.id);
                        }));
                        if (i > -1) {
                            this_1.participant.potentialOwnerList[i] = position;
                        }
                        else {
                            /** @type {?} */
                            var index = void 0;
                            if (this_1.participant.potentialOwnerList.length > 0) {
                                index = Math.max.apply(Math, tslib_1.__spread(this_1.participant.potentialOwnerList.map((/**
                                 * @param {?} p
                                 * @return {?}
                                 */
                                function (p) { return p.order; })))) + 1;
                            }
                            else {
                                index = 1;
                            }
                            position.order = index;
                            this_1.participant.potentialOwnerList.push(position);
                        }
                        this_1.potentialOwnerGrid.loadData(this_1.participant.potentialOwnerList);
                    }
                }
            }
        };
        var this_1 = this;
        try {
            for (var positions_1 = tslib_1.__values(positions), positions_1_1 = positions_1.next(); !positions_1_1.done; positions_1_1 = positions_1.next()) {
                var position = positions_1_1.value;
                _loop_1(position);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (positions_1_1 && !positions_1_1.done && (_a = positions_1.return)) _a.call(positions_1);
            }
            finally { if (e_5) throw e_5.error; }
        }
    };
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    ParticipantComponent.prototype.addComponentPerformer = /**
     * @private
     * @param {?} component
     * @return {?}
     */
    function (component) {
        /** @type {?} */
        var cmp = new ComponentParticipant();
        cmp.id = component.id;
        cmp.metadataId = component.metadataId;
        cmp.methodCode = component.methodCode;
        cmp.methodName = component.methodName;
        cmp.name = component.name;
        cmp.actualParameters = component.actualParameters;
        cmp.type = 'wf.ComponentParticipantExpression';
        cmp.condition = component.condition;
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === cmp.id; }));
            if (i > -1) {
                this.participant.humanPerformerList[i] = cmp;
            }
            else {
                /** @type {?} */
                var index = void 0;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                cmp.order = index;
                this.participant.humanPerformerList.push(cmp);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === cmp.id; }));
            if (i > -1) {
                this.participant.potentialOwnerList[i] = cmp;
            }
            else {
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                cmp.order = index;
                this.participant.potentialOwnerList.push(cmp);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    ParticipantComponent.prototype.addReportingLinePerformer = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        var e_6, _a, e_7, _b;
        if (reportingLine.reportingReferObject === 'dept' && !reportingLine.refOrgId) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refOrgIdNotNull'));
        }
        else if (reportingLine.reportingReferObject !== 'dept' && !reportingLine.refUserId && !reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refUserIdNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                var i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === reportingLine.id; }));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = reportingLine;
                }
                else {
                    /** @type {?} */
                    var reportingLines = this.participant.humanPerformerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.ReportingLineParticipantExpression'; }));
                    try {
                        for (var reportingLines_1 = tslib_1.__values(reportingLines), reportingLines_1_1 = reportingLines_1.next(); !reportingLines_1_1.done; reportingLines_1_1 = reportingLines_1.next()) {
                            var r = reportingLines_1_1.value;
                            /** @type {?} */
                            var reportingLineData = (/** @type {?} */ (r));
                            if (reportingLineData.reportingLineDefId === reportingLine.reportingLineDefId &&
                                reportingLineData.dimension === reportingLine.dimension &&
                                reportingLineData.refUserId === reportingLine.refUserId &&
                                reportingLineData.refEmployeeId === reportingLine.refEmployeeId &&
                                reportingLineData.refOrgId === reportingLine.refOrgId) {
                                this.message.error(this.localePipe.transform('component.participant.repDefConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (reportingLines_1_1 && !reportingLines_1_1.done && (_a = reportingLines_1.return)) _a.call(reportingLines_1);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        function (h) { return h.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    reportingLine.order = index;
                    this.participant.humanPerformerList.push(reportingLine);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === reportingLine.id; }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = reportingLine;
                }
                else {
                    /** @type {?} */
                    var reportingLines = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.ReportingLineParticipantExpression'; }));
                    try {
                        for (var reportingLines_2 = tslib_1.__values(reportingLines), reportingLines_2_1 = reportingLines_2.next(); !reportingLines_2_1.done; reportingLines_2_1 = reportingLines_2.next()) {
                            var r = reportingLines_2_1.value;
                            /** @type {?} */
                            var reportingLineData = (/** @type {?} */ (r));
                            if (reportingLineData.reportingLineDefId === reportingLine.reportingLineDefId &&
                                reportingLineData.dimension === reportingLine.dimension &&
                                reportingLineData.refUserId === reportingLine.refUserId &&
                                reportingLineData.refEmployeeId === reportingLine.refEmployeeId &&
                                reportingLineData.refOrgId === reportingLine.refOrgId) {
                                this.message.error(this.localePipe.transform('component.participant.repDefConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_7_1) { e_7 = { error: e_7_1 }; }
                    finally {
                        try {
                            if (reportingLines_2_1 && !reportingLines_2_1.done && (_b = reportingLines_2.return)) _b.call(reportingLines_2);
                        }
                        finally { if (e_7) throw e_7.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    reportingLine.order = index;
                    this.participant.potentialOwnerList.push(reportingLine);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    ParticipantComponent.prototype.addMatrixPerformer = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        var e_8, _a, e_9, _b;
        if (!matrix.conditionField1 && !matrix.conditionField2 && !matrix.conditionField3) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.atLeastOneCondition'));
        }
        else if (!matrix.dataFieldAlias) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.dataFieldAliasNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'humanPerformer') {
                /** @type {?} */
                var i = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === matrix.id; }));
                if (i > -1) {
                    this.participant.humanPerformerList[i] = matrix;
                }
                else {
                    /** @type {?} */
                    var matrixParticipants = this.participant.humanPerformerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.MatrixParticipantExpression'; }));
                    try {
                        for (var matrixParticipants_1 = tslib_1.__values(matrixParticipants), matrixParticipants_1_1 = matrixParticipants_1.next(); !matrixParticipants_1_1.done; matrixParticipants_1_1 = matrixParticipants_1.next()) {
                            var m = matrixParticipants_1_1.value;
                            /** @type {?} */
                            var matrixData = (/** @type {?} */ (m));
                            if (matrixData.matrixDefId === matrix.matrixDefId &&
                                matrixData.conditionField1 === matrix.conditionField1 &&
                                matrixData.conditionField2 === matrix.conditionField2 &&
                                matrixData.conditionField3 === matrix.conditionField3 &&
                                matrixData.dataFieldAlias === matrix.dataFieldAlias) {
                                this.message.error(this.localePipe.transform('component.participant.matrixConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (matrixParticipants_1_1 && !matrixParticipants_1_1.done && (_a = matrixParticipants_1.return)) _a.call(matrixParticipants_1);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.humanPerformerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                         * @param {?} h
                         * @return {?}
                         */
                        function (h) { return h.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    matrix.order = index;
                    this.participant.humanPerformerList.push(matrix);
                }
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === matrix.id; }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = matrix;
                }
                else {
                    /** @type {?} */
                    var matrixParticipants = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.MatrixParticipantExpression'; }));
                    try {
                        for (var matrixParticipants_2 = tslib_1.__values(matrixParticipants), matrixParticipants_2_1 = matrixParticipants_2.next(); !matrixParticipants_2_1.done; matrixParticipants_2_1 = matrixParticipants_2.next()) {
                            var m = matrixParticipants_2_1.value;
                            /** @type {?} */
                            var matrixData = (/** @type {?} */ (m));
                            if (matrixData.matrixDefId === matrix.matrixDefId &&
                                matrixData.conditionField1 === matrix.conditionField1 &&
                                matrixData.conditionField2 === matrix.conditionField2 &&
                                matrixData.conditionField3 === matrix.conditionField3 &&
                                matrixData.dataFieldAlias === matrix.dataFieldAlias) {
                                this.message.error(this.localePipe.transform('component.participant.matrixConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_9_1) { e_9 = { error: e_9_1 }; }
                    finally {
                        try {
                            if (matrixParticipants_2_1 && !matrixParticipants_2_1.done && (_b = matrixParticipants_2.return)) _b.call(matrixParticipants_2);
                        }
                        finally { if (e_9) throw e_9.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    matrix.order = index;
                    this.participant.potentialOwnerList.push(matrix);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} activityExecutor
     * @return {?}
     */
    ParticipantComponent.prototype.addActivityExecutorPerformer = /**
     * @private
     * @param {?} activityExecutor
     * @return {?}
     */
    function (activityExecutor) {
        if (this.type === 'humanPerformer') {
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === activityExecutor.id ||
                (((/** @type {?} */ (a))).activityDefId && ((/** @type {?} */ (a))).activityDefId === activityExecutor.activityDefId)); }));
            if (i < 0) {
                if (this.editState === 'edit') {
                    this.removeHumanPerformer(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.humanPerformerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                activityExecutor.order = index;
                this.participant.humanPerformerList.push(activityExecutor);
            }
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === activityExecutor.id ||
                (((/** @type {?} */ (a))).activityDefId && ((/** @type {?} */ (a))).activityDefId === activityExecutor.activityDefId)); }));
            if (i < 0) {
                if (this.editState === 'edit') {
                    this.removePotentialOwner(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                activityExecutor.order = index;
                this.participant.potentialOwnerList.push(activityExecutor);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @private
     * @param {?} organization
     * @return {?}
     */
    ParticipantComponent.prototype.addOrganizationParticipant = /**
     * @private
     * @param {?} organization
     * @return {?}
     */
    function (organization) {
        /** @type {?} */
        var organizationParticipant = new OrganizationParticipant();
        organizationParticipant.id = organization.id || ProcessDeUtil.GenerateElementId();
        organizationParticipant.type = 'wf.OrganizationParticipantExpression';
        organizationParticipant.condition = organization.condition;
        organizationParticipant.name = organization.name;
        organizationParticipant.actionScope = organization.actionScope;
        organizationParticipant.organizationLevel = organization.organizationLevel;
        organizationParticipant.organizationId = organization.organizationId;
        organizationParticipant.organizationCode = organization.organizationCode;
        organizationParticipant.organizationName = organization.organizationName;
        organizationParticipant.includeChildren = organization.includeChildren;
        organizationParticipant.parentsUntil = organization.parentsUntil;
        organizationParticipant.tag = organization.tag;
        if (this.type === 'humanPerformer') {
            this.participant.humanPerformerList = this.participant.humanPerformerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.type !== 'wf.OrganizationParticipantExpression'; }));
            /** @type {?} */
            var index = void 0;
            if (this.participant.humanPerformerList.length > 0) {
                index = Math.max.apply(Math, tslib_1.__spread(this.participant.humanPerformerList.map((/**
                 * @param {?} h
                 * @return {?}
                 */
                function (h) { return h.order; })))) + 1;
            }
            else {
                index = 1;
            }
            organizationParticipant.order = index;
            this.participant.humanPerformerList.push(organizationParticipant);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        }
        else if (this.type === 'potentialOwner') {
            this.participant.potentialOwnerList = this.participant.potentialOwnerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.type !== 'wf.OrganizationParticipantExpression'; }));
            /** @type {?} */
            var index = void 0;
            if (this.participant.potentialOwnerList.length > 0) {
                index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.order; })))) + 1;
            }
            else {
                index = 1;
            }
            organizationParticipant.order = index;
            this.participant.potentialOwnerList.push(organizationParticipant);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.editCancel = /**
     * @return {?}
     */
    function () {
        if (this.editDialog) {
            this.editDialog.close();
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.editPerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        this.editState = 'edit';
        this.type = type;
        /** @type {?} */
        var selectedRow;
        if (type === 'humanPerformer') {
            selectedRow = this.humanPerformerGrid.selectedRow;
        }
        else if (type === 'potentialOwner') {
            selectedRow = this.potentialOwnerGrid.selectedRow;
        }
        if (!selectedRow) {
            this.message.info(this.localePipe.transform('component.participant.selectPerformer'));
            return;
        }
        /** @type {?} */
        var curPerformer = selectedRow.data;
        if (curPerformer) {
            /** @type {?} */
            var boxsize = this.attributeBoxSize(curPerformer.type);
            /** @type {?} */
            var modalConfig_1 = {
                title: this.localePipe.transform('component.participant.participantSelection'),
                width: boxsize.width,
                height: boxsize.height,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            this.compRef.instance.performerType = curPerformer.type;
            this.compRef.instance.editState = this.editState;
            switch (curPerformer.type) {
                case 'wf.PositionParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.UserParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.VariableParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.VariableParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    var url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + ((/** @type {?} */ (curPerformer))).reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error(_this.localePipe.transform('component.participant.definitionDeleted'));
                            if (type === 'humanPerformer') {
                                _this.removeHumanPerformer();
                            }
                            else if (type === 'potentialOwner') {
                                _this.removePotentialOwner();
                            }
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    var urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + ((/** @type {?} */ (curPerformer))).matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error(_this.localePipe.transform('component.participant.matrixDeleted'));
                            if (type === 'humanPerformer') {
                                _this.removeHumanPerformer();
                            }
                            else if (type === 'potentialOwner') {
                                _this.removePotentialOwner();
                            }
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ActivityExecutorParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.OrganizationParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.OrganizationParticipantExpression',
                        value: curPerformer
                    };
                    break;
            }
            if (curPerformer.type !== 'wf.ReportingLineParticipantExpression' &&
                curPerformer.type !== 'wf.MatrixParticipantExpression') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig_1);
            }
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.removePerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        if (type === 'humanPerformer') {
            if (this.humanPerformerGrid.selectedRow) {
                this.humanPerformerGrid.endCellEdit();
                /** @type {?} */
                var index = this.participant.humanPerformerList.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === _this.humanPerformerGrid.selectedRow.data.id; }));
                this.participant.humanPerformerList.splice(index, 1);
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            }
            else {
                this.message.info(this.localePipe.transform('component.participant.selectParticipantInfo'));
            }
        }
        else if (type === 'potentialOwner') {
            if (this.potentialOwnerGrid.selectedRow) {
                this.potentialOwnerGrid.endCellEdit();
                /** @type {?} */
                var index = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
                this.participant.potentialOwnerList.splice(index, 1);
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
            else {
                this.message.info(this.localePipe.transform('component.participant.selectParticipantInfo'));
            }
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.clearPerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'humanPerformer') {
            this.participant.humanPerformerList = new Array();
        }
        else if (type === 'potentialOwner') {
            this.participant.potentialOwnerList = new Array();
        }
        this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        if (this.potentialOwnerGrid) {
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.moveUp = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'humanPerformer') {
            /** @type {?} */
            var selectedRow = this.humanPerformerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_1 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_1.id; }));
            if (i === 0) {
                return;
            }
            /** @type {?} */
            var index = this.participant.humanPerformerList[i].order;
            this.participant.humanPerformerList[i].order = this.participant.humanPerformerList[i - 1].order;
            this.participant.humanPerformerList[i - 1].order = index;
            this.swapArray(this.participant.humanPerformerList, i, i - 1);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            this.humanPerformerGrid.selectRow(performer_1.id, true);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_2 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_2.id; }));
            if (i === 0) {
                return;
            }
            /** @type {?} */
            var index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i - 1].order;
            this.participant.potentialOwnerList[i - 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i - 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer_2.id, true);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ParticipantComponent.prototype.moveDown = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'humanPerformer') {
            /** @type {?} */
            var selectedRow = this.humanPerformerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_3 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_3.id; }));
            if (i === this.participant.humanPerformerList.length - 1) {
                return;
            }
            /** @type {?} */
            var index = this.participant.humanPerformerList[i].order;
            this.participant.humanPerformerList[i].order = this.participant.humanPerformerList[i + 1].order;
            this.participant.humanPerformerList[i + 1].order = index;
            this.swapArray(this.participant.humanPerformerList, i, i + 1);
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            this.humanPerformerGrid.selectRow(performer_3.id, true);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_4 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_4.id; }));
            if (i === this.participant.potentialOwnerList.length - 1) {
                return;
            }
            /** @type {?} */
            var index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i + 1].order;
            this.participant.potentialOwnerList[i + 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i + 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer_4.id, true);
        }
    };
    /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    ParticipantComponent.prototype.swapArray = /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    function (arr, i1, i2) {
        arr[i1] = arr.splice(i2, 1, arr[i1])[0];
        return arr;
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.removeHumanPerformer = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.humanPerformerGrid.selectedRow) {
            this.humanPerformerGrid.endCellEdit();
            /** @type {?} */
            var i = this.participant.humanPerformerList.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.id === _this.humanPerformerGrid.selectedRow.data.id; }));
            this.participant.humanPerformerList.splice(i, 1);
        }
        else {
            this.message.info(this.localePipe.transform('component.participant.selectDefaultHandler'));
        }
    };
    /**
     * @return {?}
     */
    ParticipantComponent.prototype.removePotentialOwner = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.potentialOwnerGrid.selectedRow) {
            this.potentialOwnerGrid.endCellEdit();
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
            this.participant.potentialOwnerList.splice(i, 1);
        }
        else {
            this.message.info(this.localePipe.transform('component.participant.selectpotentialtHandler'));
        }
    };
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    ParticipantComponent.prototype.getUserPerformerDescription = /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    function (userPerformer) {
        if (userPerformer.tag === 'expression') {
            return userPerformer.performerId;
        }
        else {
            if (userPerformer.orgName) {
                return this.localePipe.transform('component.participant.org') + userPerformer.orgName;
            }
            else {
                return '';
            }
        }
    };
    /**
     * @private
     * @param {?} variablePerformer
     * @return {?}
     */
    ParticipantComponent.prototype.getVariablePerformerDescription = /**
     * @private
     * @param {?} variablePerformer
     * @return {?}
     */
    function (variablePerformer) {
        if (variablePerformer.tag === 'expression') {
            return variablePerformer.varValue;
        }
    };
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    ParticipantComponent.prototype.getPositionPerformerDescription = /**
     * @private
     * @param {?} position
     * @return {?}
     */
    function (position) {
        if (this.designerUIState.scene === 'inSuite') {
            return null;
        }
        if (position.positionType === '1') {
            if (position.orgId) {
                return this.localePipe.transform('component.participant.positionType1') + position.orgId;
            }
            else {
                return this.localePipe.transform('component.participant.positionType2');
            }
        }
        else if (position.positionType === '0') {
            return this.localePipe.transform('component.participant.positionType3');
        }
    };
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    ParticipantComponent.prototype.getComponentPerformerDescription = /**
     * @private
     * @param {?} position
     * @return {?}
     */
    function (position) {
        /** @type {?} */
        var des = this.localePipe.transform('component.participant.comp') + position.name
            + this.localePipe.transform('component.participant.parameters');
        if (position.actualParameters && position.actualParameters.length > 0) {
            position.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                des += p.code + "\uFF1A" + p.value + "\uFF0C";
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    ParticipantComponent.prototype.getReportingLinePerformerDescription = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        /** @type {?} */
        var description = '';
        if (reportingLine.refUserId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refUserId;
        }
        if (reportingLine.refEmployeeId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refEmployeeId;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += "\uFF0C";
            }
            if (reportingLine.refEmployeeId) {
                description += "\uFF0C";
            }
            description += this.localePipe.transform('component.participant.referenceOrganization') + reportingLine.refOrgId;
        }
        return description;
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    ParticipantComponent.prototype.getMatrixPerformerDescription = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        /** @type {?} */
        var description = '';
        if (matrix.conditionField1) {
            description += this.localePipe.transform('component.participant.condition1') + matrix.conditionFieldText1 + "\uFF0C";
        }
        if (matrix.conditionField2) {
            description += this.localePipe.transform('component.participant.condition2') + matrix.conditionFieldText2 + "\uFF0C";
        }
        if (matrix.conditionField3) {
            description += this.localePipe.transform('component.participant.condition3') + matrix.conditionFieldText3 + "\uFF0C";
        }
        if (matrix.dataFieldAlias) {
            description += this.localePipe.transform('component.participant.data') + matrix.dataFieldAlias + "\uFF0C";
        }
        return description.slice(0, description.length - 1);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    ParticipantComponent.prototype.editConditon = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // this.expr.clearContext();
        var _this = this;
        var e_10, _a, e_11, _b, e_12, _c, e_13, _d;
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.designerUIState.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_10) throw e_10.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _g = tslib_1.__values(this.designerUIState.subActivityContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    _loop_2(variable);
                }
            }
            catch (e_11_1) { e_11 = { error: e_11_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_11) throw e_11.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.designerUIState.activityComponentContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_3(variable);
                }
            }
            catch (e_12_1) { e_12 = { error: e_12_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_12) throw e_12.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_13_1) { e_13 = { error: e_13_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_d = context_1.return)) _d.call(context_1);
                }
                finally { if (e_13) throw e_13.error; }
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        function (cond) {
            if (_this.humanPerformerGrid && _this.humanPerformerGrid.selectedRow && _this.humanPerformerGrid.selectedRow.data) {
                /** @type {?} */
                var temp = _this.participant.humanPerformerList.find((/**
                 * @param {?} h
                 * @return {?}
                 */
                function (h) { return h.id === _this.humanPerformerGrid.selectedRow.data.id; }));
                temp.condition = cond;
            }
            if (_this.potentialOwnerGrid && _this.potentialOwnerGrid.selectedRow && _this.potentialOwnerGrid.selectedRow.data) {
                /** @type {?} */
                var temp = _this.participant.potentialOwnerList.find((/**
                 * @param {?} h
                 * @return {?}
                 */
                function (h) { return h.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
                temp.condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    ParticipantComponent.prototype.humanPerformerCopyToPotentialOwner = /**
     * @private
     * @return {?}
     */
    function () {
        var _a;
        if (this.participant.humanPerformerList && this.participant.humanPerformerList.length > 0) {
            if (!this.participant.potentialOwnerList) {
                this.participant.potentialOwnerList = new Array();
            }
            (_a = this.participant.potentialOwnerList).push.apply(_a, tslib_1.__spread(this.participant.humanPerformerList));
            this.participant.humanPerformerList = new Array();
            this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
            if (this.potentialOwnerGrid) {
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    ParticipantComponent.prototype.potentialOwnerCopyToHumanPerformer = /**
     * @private
     * @return {?}
     */
    function () {
        var _a;
        if (this.participant.potentialOwnerList && this.participant.potentialOwnerList.length > 0) {
            if (!this.participant.humanPerformerList) {
                this.participant.humanPerformerList = new Array();
            }
            /** @type {?} */
            var performers = this.participant.potentialOwnerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.type !== 'wf.OrganizationParticipantExpression'; }));
            if (performers && performers.length > 0) {
                // 此处直接push会导致order重复,需要重新排序
                (_a = this.participant.humanPerformerList).push.apply(_a, tslib_1.__spread(performers));
                this.participant.humanPerformerList.forEach((/**
                 * @param {?} human
                 * @param {?} index
                 * @return {?}
                 */
                function (human, index) {
                    human.order = index + 1;
                }));
                this.participant.potentialOwnerList = this.participant.potentialOwnerList.filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type === 'wf.OrganizationParticipantExpression'; }));
                this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
                if (this.potentialOwnerGrid) {
                    this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
                }
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    ParticipantComponent.prototype.GetOrganizationType = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return ({ value: d.id, text: d.name }); })); }));
    };
    // 构造不同参与者选择界面的尺寸 2023-7-5
    // 构造不同参与者选择界面的尺寸 2023-7-5
    /**
     * @private
     * @param {?} boxType
     * @return {?}
     */
    ParticipantComponent.prototype.attributeBoxSize = 
    // 构造不同参与者选择界面的尺寸 2023-7-5
    /**
     * @private
     * @param {?} boxType
     * @return {?}
     */
    function (boxType) {
        /** @type {?} */
        var boxsize = {
            width: 760,
            height: 512
        };
        switch (boxType) {
            case 'wf.PositionParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 455;
                return boxsize;
            case 'wf.UserParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
            case 'wf.VariableParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ReportingLineParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.MatrixParticipantExpression':
                boxsize.width = 780;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ComponentParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.ActivityExecutorParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
                ;
            case 'wf.OrganizationParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 360;
                return boxsize;
                ;
        }
    };
    ParticipantComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-participant',
                    template: "<div class=\"f-page f-utils-overflow-xhya\">\r\n  <div class=\"f-page-main d-flex flex-column farris-overflow-y-auto\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n  <section class=\"f-page-main d-flex flex-column\">\r\n    <farris-section *ngIf=\"nodeType === 'userActivity'\" class=\"pt-0 f-section-form f-section-in-mainsubcard mb-1\" [showHeader]=\"false\" >\r\n      <div class=\"f-form-layout farris-form f-form-lable-auto farris-form-controls-inline\">\r\n        <div class=\"col-12 farris-group-wrap\">\r\n          <div class=\"form-group\">\r\n            <label class=\"col-form-label\">\r\n              <span class=\"farris-label-text\">{{'component.participant.allocationPolicy'|wfLocale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <farris-radiogroup [(ngModel)]=\"participant.assignStrategy.assignStrategy\" [data]=\"assignStrategyList\" name=\"assignStrategy\"\r\n                [horizontal]=\"true\" (changeValue)=\"assignStrategyChange($event)\">\r\n              </farris-radiogroup>\r\n              <div class=\"farris-feedback valid-feedback\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n    <farris-section *ngIf=\"nodeType === 'userActivity' && participant.assignStrategy.assignStrategy==='ASSIGN'\" class=\"pt-0 f-section-form f-section-in-mainsubcard\" [showHeader]=\"false\">\r\n      <div class=\"f-form-layout farris-form f-form-lable-auto farris-form-controls-inline\">\r\n        <div class=\"col-12 px-0 d-flex\">\r\n          <div class=\"col-4 farris-group-wrap\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.operator'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-combo-list [(ngModel)]=\"participant.assignStrategy.assignConfig.operator\" name=\"operator\" [ngModelOptions]=\"{standalone: true}\"\r\n                  [idField]=\"'value'\" [textField]=\"'text'\" [valueField]=\"'value'\" [data]=\"operatorCollection\"\r\n                  [panelHeight]=\"60\">\r\n                </farris-combo-list>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-auto farris-group-wrap f-form-label-xl\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.multiSelect'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-switch size=\"small\" [(ngModel)]=\"participant.assignStrategy.assignConfig.multiSelect\" name=\"multiSelect\">\r\n                </farris-switch>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-auto farris-group-wrap f-form-label-el\">\r\n            <div class=\"form-group\">\r\n              <label class=\"col-form-label\">\r\n                <span class=\"farris-label-text\">{{'component.participant.necessary'|wfLocale}}</span>\r\n              </label>\r\n              <div class=\"farris-input-wrap\">\r\n                <farris-switch size=\"small\" [(ngModel)]=\"participant.assignStrategy.assignConfig.necessary\" name=\"necessary\">\r\n                </farris-switch>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n    <div class=\"d-flex flex-column\" [ngStyle]=\"{'height':nodeType === 'notifyActivity'? '470px': participant.assignStrategy.assignStrategy==='ASSIGN' ? '220px':'470px'}\">\r\n      <farris-section class=\"pt-0 f-section-grid\" [mainTitle]=\"nodeType === 'notifyActivity' ? ('component.participant.notifyRecipient' | wfLocale) : ('component.participant.defaultHandler' | wfLocale)\" [enableAccordion]=\"''\"\r\n      [enableMaximize]=\"false\" [fill]=\"true\" style=\"overflow: initial;\">\r\n      <ng-template farrisSectionToolbar>\r\n        <div class=\"btn-group mr-2\"  fDropdown #dropdownEl=\"fDropdown\" [autoRectify]=\"true\">\r\n          <farris-button class=\"dropdown-toggle\" fDropdownToggle [type]=\"'link'\">\r\n            {{'component.participant.new'|wfLocale}}\r\n          </farris-button>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression' ,'humanPerformer')\"><span>{{'component.participant.user'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression','humanPerformer')\"><span>{{'component.participant.variable'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression','humanPerformer')\"><span>{{designerUIState.scene==='inSuite'?(('component.participant.role'|wfLocale)):('component.participant.position'|wfLocale)}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression','humanPerformer')\"><span>{{'component.participant.reportingLine'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression','humanPerformer')\"><span>{{'component.participant.activityExecutor'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression','humanPerformer')\"><span>{{'component.participant.matrix'|wfLocale}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression','humanPerformer')\"><span>{{'component.participant.component'|wfLocale}}</span></li>\r\n          </div>\r\n        </div>\r\n        <farris-button  [type]=\"'link'\" (click)=\"editPerformer('humanPerformer')\">{{'component.participant.editPerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"removePerformer('humanPerformer')\">{{'component.participant.removePerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"clearPerformer('humanPerformer')\">{{'component.participant.clearPerformer'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"moveUp('humanPerformer')\">{{'component.participant.moveUp'|wfLocale}}</farris-button>\r\n        <farris-button  [type]=\"'link'\" (click)=\"moveDown('humanPerformer')\">{{'component.participant.moveDown'|wfLocale}}</farris-button>\r\n      </ng-template>\r\n      <div class=\"f-utils-fill\">\r\n        <farris-datagrid #humanPerformerGrid class=\"f-component-grid\" [columns]=\"columns\" [data]=\"participant.humanPerformerList\" #defaultPerformerGrid [idField]=\"'id'\" [showLineNumber]=\"false\"\r\n          [striped]=\"true\" [showCheckbox]=\"false\" [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\"\r\n          [multiSelect]=\"false\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </farris-section>\r\n    </div>\r\n    <div *ngIf=\"nodeType === 'userActivity' && participant.assignStrategy.assignStrategy==='ASSIGN'\" class=\"d-flex flex-column\" style=\"height: 220px;\">\r\n      <farris-section class=\"pt-0 f-section-grid\" mainTitle=\"{{'component.participant.alternativeHandler'|wfLocale}}\" [enableAccordion]=\"''\"\r\n        [enableMaximize]=\"false\" [fill]=\"true\" style=\"overflow: initial;\">\r\n      <ng-template farrisSectionHeader>\r\n        <div class=\"f-title\">\r\n          <h4 class=\"f-title-text\">{{'component.participant.alternativeHandler'|wfLocale}}</h4>\r\n        </div>\r\n        <label class=\"col-form-label mr-2 mb-0\">\r\n          <span class=\"farris-label-text\">{{'component.participant.isAllScope'|wfLocale}}</span>\r\n        </label>\r\n        <farris-switch size=\"small\" [(ngModel)]=\"participant.isAllScope\" name=\"isAllScope\" (valueChange)=\"switchChange($event)\">\r\n        </farris-switch>\r\n        <div class=\"f-toolbar\" [ngStyle]=\"{'visibility' : participant.isAllScope ? 'hidden' : 'visible'}\">\r\n          <div class=\"btn-group mr-2\"  fDropdown #dropdownE2=\"fDropdown\" [autoRectify]=\"true\">\r\n            <farris-button class=\"dropdown-toggle\" fDropdownToggle [type]=\"'link'\">\r\n              {{'component.participant.new'|wfLocale}}\r\n            </farris-button>\r\n            <div class=\"dropdown-menu\" fDropdownMenu>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression','potentialOwner')\"><span>{{'component.participant.user'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression','potentialOwner')\"><span>{{'component.participant.variable'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression','potentialOwner')\"><span>{{designerUIState.scene==='inSuite'?(('component.participant.role'|wfLocale)):('component.participant.position'|wfLocale)}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression','potentialOwner')\"><span>{{'component.participant.reportingLine'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression','potentialOwner')\"><span>{{'component.participant.activityExecutor'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression','potentialOwner')\"><span>{{'component.participant.matrix'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression','potentialOwner')\"><span>{{'component.participant.component'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.OrganizationParticipantExpression','potentialOwner')\"><span>{{'component.participant.organization'|wfLocale}}\r\n              </span></li>\r\n            </div>\r\n          </div>\r\n          <farris-button  [type]=\"'link'\" (click)=\"editPerformer('potentialOwner')\">{{'component.participant.editPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"removePerformer('potentialOwner')\">{{'component.participant.removePerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"clearPerformer('potentialOwner')\">{{'component.participant.clearPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveUp('potentialOwner')\">{{'component.participant.moveUp'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveDown('potentialOwner')\">{{'component.participant.moveDown'|wfLocale}}</farris-button>\r\n        </div>\r\n      </ng-template>\r\n      <div class=\"f-utils-fill\">\r\n        <farris-datagrid #potentialOwnerGrid class=\"f-component-grid\" [columns]=\"columns\" [data]=\"participant.potentialOwnerList\" #defaultPerformerGrid [idField]=\"'id'\" [showLineNumber]=\"false\"\r\n          [striped]=\"true\" [showCheckbox]=\"false\" [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\"\r\n          [multiSelect]=\"false\">\r\n        </farris-datagrid>\r\n      </div>\r\n    </farris-section>\r\n    </div>\r\n  </section>\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">{{'component.participant.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">{{'component.participant.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">{{'component.participant.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">{{'component.participant.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n",
                    providers: [
                        ParticipantUIState,
                        WfLocalePipe
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ParticipantComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: ParticipantUIState },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: MessagerService },
        { type: ExpressionService },
        { type: HttpService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    ParticipantComponent.propDecorators = {
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
        dropDownE2: [{ type: ViewChild, args: ['dropdownE2',] }],
        editFooter: [{ type: ViewChild, args: ['editFooter',] }],
        humanPerformerGrid: [{ type: ViewChild, args: ['humanPerformerGrid',] }],
        potentialOwnerGrid: [{ type: ViewChild, args: ['potentialOwnerGrid',] }],
        editorParams: [{ type: Input }],
        value: [{ type: Input }]
    };
    return ParticipantComponent;
}());
export { ParticipantComponent };
if (false) {
    /** @type {?} */
    ParticipantComponent.prototype.closeModal;
    /** @type {?} */
    ParticipantComponent.prototype.submitModal;
    /** @type {?} */
    ParticipantComponent.prototype.modalFooter;
    /** @type {?} */
    ParticipantComponent.prototype.dropDownEl;
    /** @type {?} */
    ParticipantComponent.prototype.dropDownE2;
    /** @type {?} */
    ParticipantComponent.prototype.editFooter;
    /** @type {?} */
    ParticipantComponent.prototype.humanPerformerGrid;
    /** @type {?} */
    ParticipantComponent.prototype.potentialOwnerGrid;
    /** @type {?} */
    ParticipantComponent.prototype.editorParams;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.preAssignStrategy;
    /** @type {?} */
    ParticipantComponent.prototype.nodeType;
    /** @type {?} */
    ParticipantComponent.prototype.editDialog;
    /** @type {?} */
    ParticipantComponent.prototype.compRef;
    /** @type {?} */
    ParticipantComponent.prototype.isClose;
    /** @type {?} */
    ParticipantComponent.prototype.participant;
    /** @type {?} */
    ParticipantComponent.prototype.editState;
    /** @type {?} */
    ParticipantComponent.prototype.type;
    /** @type {?} */
    ParticipantComponent.prototype.assignStrategyList;
    /** @type {?} */
    ParticipantComponent.prototype.operatorCollection;
    /** @type {?} */
    ParticipantComponent.prototype.modalConfig;
    /** @type {?} */
    ParticipantComponent.prototype.columns;
    /** @type {?} */
    ParticipantComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    ParticipantComponent.prototype.localePipe;
}
var ParticipantConverter = /** @class */ (function () {
    function ParticipantConverter(localePipe) {
        this.localePipe = localePipe;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    ParticipantConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data && data.humanPerformerList && data.humanPerformerList.length > 0) {
            return this.localePipe.transform("component.participant.set");
        }
        if (data && data.potentialOwnerList && data.potentialOwnerList.length > 0) {
            return this.localePipe.transform("component.participant.set");
        }
        if (data && data.isAllScope) {
            return this.localePipe.transform("component.participant.set");
        }
        return this.localePipe.transform("component.participant.notSet");
    };
    return ParticipantConverter;
}());
export { ParticipantConverter };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ParticipantConverter.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFydGljaXBhbnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wYXJ0aWNpcGFudC9wYXJ0aWNpcGFudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLHdCQUF3QixFQUFnQixZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFVLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6TSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDekQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBYyxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BGLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRTVFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUU3RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0REFBNEQsQ0FBQztBQUNwRyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUErQixvQkFBb0IsRUFBcUIsdUJBQXVCLEVBQUUsZUFBZSxFQUF1RixNQUFNLG9CQUFvQixDQUFDO0FBQ3pPLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzNELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFHaEc7SUFtS0UsOEJBQ1MsZUFBdUMsRUFDdEMsT0FBMkIsRUFDM0IsUUFBa0MsRUFDbEMsUUFBa0IsRUFDbEIsWUFBNEIsRUFDNUIsT0FBd0IsRUFDeEIsSUFBdUIsRUFDdkIsSUFBaUIsRUFDTCxHQUFzQixFQUNmLFFBQWdCLEVBQ1IsU0FBYyxFQUM3QixVQUF3QjtRQVo5QyxpQkFnQkM7UUFmUSxvQkFBZSxHQUFmLGVBQWUsQ0FBd0I7UUFDdEMsWUFBTyxHQUFQLE9BQU8sQ0FBb0I7UUFDM0IsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7UUFDNUIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFDeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUNMLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ2YsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNSLGNBQVMsR0FBVCxTQUFTLENBQUs7UUFDN0IsZUFBVSxHQUFWLFVBQVUsQ0FBYztRQXBLcEMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDckMsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBU3ZDLGlCQUFZLEdBQVEsRUFBRSxDQUFDO1FBbUNoQyxhQUFRLEdBQXVDLGdCQUFnQixDQUFDO1FBSWhFLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFFZixnQkFBVyxHQUFvQixJQUFJLGVBQWUsRUFBRSxDQUFDO1FBQ3JELGNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQywrQkFBK0I7O1FBRWxELFNBQUksR0FBRyxnQkFBZ0IsQ0FBQztRQUV4Qix1QkFBa0IsR0FBRztZQUNuQixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDJCQUEyQixDQUFDLEVBQUU7WUFDOUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQyxFQUFFO1lBQ3BGLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsNkJBQTZCLENBQUMsRUFBRTtTQUNuRixDQUFDO1FBR0YsdUJBQWtCLEdBQUc7WUFDbkIsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsbUNBQW1DLENBQUMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFO1lBQzlGLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHVDQUF1QyxDQUFDLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFO1NBQ3ZHLENBQUM7UUFFRixnQkFBVyxHQUFHO1lBQ1osS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHNDQUFzQyxDQUFDO1lBQ3hFLEtBQUssRUFBRSxHQUFHO1lBQ1YsTUFBTSxFQUFFLEdBQUc7WUFDWCxXQUFXLEVBQUUsSUFBSTtTQUNsQixDQUFDO1FBRUYsWUFBTyxHQUFHO1lBQ1I7Z0JBQ0UsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw2QkFBNkIsQ0FBQztnQkFDMUYsTUFBTSxFQUFFO29CQUNOLElBQUksRUFBRSxXQUFXLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxFQUNyQztpQkFDRjthQUNGLEVBQUU7Z0JBQ0gsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw0QkFBNEIsQ0FBQztnQkFDeEYsU0FBUyxFQUFFO29CQUNULElBQUksRUFBRSxNQUFNO29CQUNaLE9BQU8sRUFBRSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUU7aUJBQ3ZGO2FBQ0EsRUFBRTtnQkFDSCxLQUFLLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxTQUFTOzs7Ozs7Z0JBQUUsVUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7b0JBQzdJLFFBQVEsQ0FBQyxDQUFDLElBQUksRUFBRTt3QkFDZCxLQUFLLDhCQUE4Qjs0QkFDakMsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDO3dCQUN6QixLQUFLLGtDQUFrQzs0QkFDckMsT0FBTyxDQUFDLG1CQUFBLENBQUMsRUFBdUIsQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFDekMsS0FBSyxrQ0FBa0M7NEJBQ3JDLE9BQU8sQ0FBQyxtQkFBQSxDQUFDLEVBQXVCLENBQUMsQ0FBQyxhQUFhLENBQUM7d0JBQ2xELEtBQUssbUNBQW1DOzRCQUN0QyxPQUFPLENBQUMsbUJBQUEsQ0FBQyxFQUF3QixDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUMxQyxLQUFLLHVDQUF1Qzs0QkFDMUMsT0FBTyxDQUFDLG1CQUFBLENBQUMsRUFBNEIsQ0FBQyxDQUFDLG9CQUFvQixHQUFHLEdBQUcsR0FBRyxDQUFDLG1CQUFBLENBQUMsRUFBNEIsQ0FBQyxDQUFDLFNBQVMsQ0FBQzt3QkFDaEgsS0FBSyxnQ0FBZ0M7NEJBQ25DLE9BQU8sQ0FBQyxtQkFBQSxDQUFDLEVBQXFCLENBQUMsQ0FBQyxhQUFhLEdBQUcsR0FBRyxHQUFHLENBQUMsbUJBQUEsQ0FBQyxFQUFxQixDQUFDLENBQUMsY0FBYyxDQUFDO3dCQUNoRyxLQUFLLDBDQUEwQzs0QkFDN0MsT0FBTyxDQUFDLG1CQUFBLENBQUMsRUFBK0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQzt3QkFDMUQsS0FBSyxzQ0FBc0M7NEJBQ3pDLE9BQU8sQ0FBQyxtQkFBQSxDQUFDLEVBQTJCLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQzt3QkFDekQ7NEJBQ0UsT0FBTyxFQUFFLENBQUM7cUJBQ2I7Z0JBQ0gsQ0FBQyxDQUFBO2FBQ0Y7WUFDRDtnQkFDRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLG1DQUFtQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUk7Z0JBQ3ZILFNBQVM7Ozs7OztnQkFBRSxVQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztvQkFDakIsUUFBUSxDQUFDLENBQUMsSUFBSSxFQUFFO3dCQUNkLEtBQUssOEJBQThCOzRCQUNqQyxPQUFPLEtBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDN0MsS0FBSyxrQ0FBa0M7NEJBQ3JDLE9BQU8sS0FBSSxDQUFDLCtCQUErQixDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNqRCxLQUFLLGtDQUFrQzs0QkFDckMsT0FBTyxLQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ2pELEtBQUssbUNBQW1DOzRCQUN0QyxPQUFPLEtBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbEQsS0FBSyx1Q0FBdUM7NEJBQzFDLE9BQU8sS0FBSSxDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUN0RCxLQUFLLGdDQUFnQzs0QkFDbkMsT0FBTyxLQUFJLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQy9DLEtBQUssMENBQTBDOzRCQUM3QyxPQUFPLENBQUMsbUJBQUEsQ0FBQyxFQUErQixDQUFDLENBQUMsYUFBYSxDQUFDO3dCQUMxRCxLQUFLLHNDQUFzQzs0QkFDekMsT0FBTyxDQUFDLG1CQUFBLENBQUMsRUFBMkIsQ0FBQyxDQUFDLGdCQUFnQixHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsbUJBQUEsQ0FBQyxFQUEyQixDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUN0STs0QkFDRSxPQUFPLEVBQUUsQ0FBQztxQkFDYjtnQkFDSCxDQUFDLENBQUE7YUFDRjtZQUNEO2dCQUNFLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsaUNBQWlDLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSTtnQkFDbEgsTUFBTSxFQUFFO29CQUNOLElBQUksRUFBRSxhQUFhO29CQUNuQixPQUFPLEVBQUU7d0JBQ1AsU0FBUyxFQUFFLHNDQUFzQzt3QkFDakQsUUFBUSxFQUFFLEtBQUs7d0JBQ2YsV0FBVzs7Ozt3QkFBRSxVQUFDLENBQUM7NEJBQ2IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzs0QkFDakUsS0FBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDdkIsQ0FBQyxDQUFBO3FCQUNGO2lCQUNGO2FBQ0E7U0FBQyxDQUFDO1FBZ0JILElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLFlBQVksQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQztJQTVKRCxzQkFBYSx1Q0FBSzs7Ozs7UUFBbEIsVUFBbUIsV0FBNEI7O1lBQzdDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDM0QsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRTtnQkFDakQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsWUFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7YUFDbkU7WUFDRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsV0FBVyxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUM7WUFDbkUsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQjttQkFDbEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUNqRDtnQkFDQSxJQUFJLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxtQkFBUSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLEdBQUc7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxPQUFNLENBQUMsRUFBRTs7d0JBQ3hFLEtBQUssR0FBRyxDQUFDOzt3QkFDYixLQUE2QixJQUFBLEtBQUEsaUJBQUEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQSxnQkFBQSw0QkFBRTs0QkFBN0QsSUFBTSxjQUFjLFdBQUE7NEJBQ3ZCLGNBQWMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDOzRCQUM3QixLQUFLLEVBQUUsQ0FBQzt5QkFDVDs7Ozs7Ozs7O2lCQUNGO2dCQUNELElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJOzs7OztnQkFBQyxVQUFDLENBQUMsRUFBRSxDQUFDLElBQUssT0FBQSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQWpCLENBQWlCLEVBQUMsQ0FBQzthQUM3RztZQUNELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0I7bUJBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDbkQsSUFBSSxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsT0FBTSxDQUFDLEVBQUU7O3dCQUN4RSxLQUFLLEdBQUcsQ0FBQzs7d0JBQ2IsS0FBNkIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUEsZ0JBQUEsNEJBQUU7NEJBQTdELElBQU0sY0FBYyxXQUFBOzRCQUN2QixjQUFjLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQzs0QkFDN0IsS0FBSyxFQUFFLENBQUM7eUJBQ1Q7Ozs7Ozs7OztpQkFDRjtnQkFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSTs7Ozs7Z0JBQUMsVUFBQyxDQUFDLEVBQUUsQ0FBQyxJQUFLLE9BQUEsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFqQixDQUFpQixFQUFDLENBQUM7YUFDN0c7UUFDSCxDQUFDOzs7T0FBQTs7OztJQWlJRCx1Q0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO0lBQzdDLENBQUM7Ozs7SUFHRCxzQ0FBTzs7O0lBQVA7UUFDRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdEMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDM0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3ZDOztZQUNLLE1BQU0sR0FBRztZQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLFVBQVUsRUFBRSxJQUFJO1NBQzFDO1FBQ0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQzs7OztJQUVELDBDQUFXOzs7SUFBWDtRQUNFLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekIsQ0FBQzs7Ozs7SUFFRCxtREFBb0I7Ozs7SUFBcEIsVUFBcUIsSUFBSTtRQUF6QixpQkFjQztRQWJDLElBQUksSUFBSSxDQUFDLGlCQUFpQixLQUFLLFFBQVEsSUFBSSxJQUFJLEtBQUssUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUM5RyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFO2dCQUNqRCxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzthQUNuRTtZQUNELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDOzs7WUFBRTtnQkFDdEYsS0FBSSxDQUFDLGtDQUFrQyxFQUFFLENBQUM7WUFDNUMsQ0FBQyxFQUFDLENBQUM7U0FDSjthQUFNLElBQUksSUFBSSxDQUFDLGlCQUFpQixLQUFLLFFBQVEsSUFBSSxJQUFJLEtBQUssUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNySCxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxxQ0FBcUMsQ0FBQzs7O1lBQUU7Z0JBQ3RGLEtBQUksQ0FBQyxrQ0FBa0MsRUFBRSxDQUFDO1lBQzVDLENBQUMsRUFBQyxDQUFDO1NBQ0o7UUFDRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0lBQ2hDLENBQUM7Ozs7O0lBRUQsMkNBQVk7Ozs7SUFBWixVQUFhLElBQWE7UUFDeEIsSUFBSSxJQUFJLEVBQUU7WUFDUixJQUFJLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDdkM7SUFDSCxDQUFDOzs7Ozs7SUFFRCwyQ0FBWTs7Ozs7SUFBWixVQUFhLGFBQXFCLEVBQUUsSUFBWTtRQUM5QyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUN2QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQzs7WUFDWCxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxzQkFBc0IsQ0FBQztRQUNqRixJQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7O1lBQzlDLE9BQU8sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDOztZQUM5QyxXQUFXLEdBQUc7WUFDbEIsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDRDQUE0QyxDQUFDO1lBQzlFLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztZQUNwQixNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07WUFDdEIsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQ3hCLFdBQVcsRUFBRSxJQUFJO1NBQ2xCO1FBQ0QsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDeEIsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDekI7SUFDSCxDQUFDOzs7O0lBRUQscUNBQU07OztJQUFOOztRQUNFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTs7Z0JBQ1YsRUFBRSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRTtZQUNoRCxJQUFJLEVBQUUsQ0FBQyxjQUFjLElBQUksRUFBRSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOztvQkFDckQsS0FBZ0IsSUFBQSxLQUFBLGlCQUFBLEVBQUUsQ0FBQyxjQUFjLENBQUEsZ0JBQUEsNEJBQUU7d0JBQTlCLElBQU0sQ0FBQyxXQUFBO3dCQUNWLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztxQkFDMUI7Ozs7Ozs7OzthQUNGO1lBQ0QsSUFBSSxFQUFFLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFO2dCQUNsRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ3hDO1lBQ0Qsb0JBQW9CO1lBQ3BCLElBQUksRUFBRSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzNDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDekM7WUFDRCxJQUFJLEVBQUUsQ0FBQyxTQUFTLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUU7Z0JBQ3RFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDMUM7WUFDRCxJQUFJLEVBQUUsQ0FBQyxhQUFhLElBQUksRUFBRSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsSUFBSSxFQUFFLENBQUMsYUFBYSxDQUFDLFNBQVMsRUFBRTtnQkFDekYsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUNsRDtZQUNELElBQUksRUFBRSxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUNwQztZQUNELElBQUksRUFBRSxDQUFDLDBCQUEwQixJQUFJLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOztvQkFDN0UsS0FBZ0IsSUFBQSxLQUFBLGlCQUFBLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQSxnQkFBQSw0QkFBRTt3QkFBMUMsSUFBTSxDQUFDLFdBQUE7d0JBQ1YsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUN0Qzs7Ozs7Ozs7O2FBQ0Y7WUFDRCxJQUFJLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRTtnQkFDOUIsSUFBSSxDQUFDLDBCQUEwQixDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO2FBQzdEO1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNuQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3pCO1FBQ0QsY0FBYztRQUNkLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDcEMsQ0FBQzs7Ozs7O0lBRU8sK0NBQWdCOzs7OztJQUF4QixVQUF5QixhQUE4QjtRQUNyRCxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7O2dCQUM1QixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssYUFBYSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsbUJBQUEsQ0FBQyxFQUFtQixDQUFDLENBQUMsV0FBVyxJQUFJLENBQUMsbUJBQUEsQ0FBQyxFQUFtQixDQUFDLENBQUMsV0FBVyxLQUFLLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUF2SSxDQUF1SSxFQUFDO1lBQ3JNLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUNWLDBEQUEwRDthQUMzRDtpQkFBTTtnQkFDTCxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTSxFQUFFO29CQUM3QixJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztpQkFDN0I7O29CQUNHLEtBQUssU0FBQTtnQkFDVCxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDbEQsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxtQkFBUSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLEdBQUc7Ozs7b0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxLQUFFLENBQUMsQ0FBQztpQkFDOUU7cUJBQU07b0JBQ0wsS0FBSyxHQUFHLENBQUMsQ0FBQztpQkFDWDtnQkFDRCxhQUFhLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7YUFDekQ7WUFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztTQUN2RTthQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsRUFBRTs7Z0JBQ25DLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxhQUFhLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxtQkFBQSxDQUFDLEVBQW1CLENBQUMsQ0FBQyxXQUFXLElBQUksQ0FBQyxtQkFBQSxDQUFDLEVBQW1CLENBQUMsQ0FBQyxXQUFXLEtBQUssYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQXZJLENBQXVJLEVBQUM7WUFDck0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQ1YsMERBQTBEO2FBQzNEO2lCQUFNO2dCQUNMLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxNQUFNLEVBQUU7b0JBQzdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO2lCQUM3Qjs7b0JBQ0csS0FBSyxTQUFBO2dCQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7OztvQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO2lCQUM5RTtxQkFBTTtvQkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO2lCQUNYO2dCQUNELGFBQWEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2dCQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUN6RDtZQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZFO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sbURBQW9COzs7OztJQUE1QixVQUE2QixRQUE2Qjs7WUFDbEQsQ0FBQyxHQUFHLFFBQVE7UUFDbEIsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsOENBQThDLENBQUMsQ0FBQyxDQUFDO1lBQzdGLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1NBQ3RCO2FBQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUU7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsK0NBQStDLENBQUMsQ0FBQyxDQUFDO1lBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1NBQ3RCO2FBQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7WUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsc0NBQXNDLENBQUMsQ0FBQyxDQUFDO1lBQ3JGLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1NBQ3RCO2FBQU07WUFDTCxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7O29CQUM1QixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLG1CQUFBLENBQUMsRUFBdUIsQ0FBQyxDQUFDLFdBQVcsSUFBSSxDQUFDLG1CQUFBLENBQUMsRUFBdUIsQ0FBQyxDQUFDLFdBQVcsS0FBSyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBckksQ0FBcUksRUFBQztnQkFDbk0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7b0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7aUJBQ25EO3FCQUFNO29CQUNMLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxNQUFNLEVBQUU7d0JBQzdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO3FCQUM3Qjs7d0JBQ0csS0FBSyxTQUFBO29CQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7Ozt3QkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO3FCQUM5RTt5QkFBTTt3QkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO3FCQUNYO29CQUNELFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO29CQUN2QixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDcEQ7Z0JBQ0QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7YUFDdkU7aUJBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztvQkFDbkMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxtQkFBQSxDQUFDLEVBQXVCLENBQUMsQ0FBQyxXQUFXLElBQUksQ0FBQyxtQkFBQSxDQUFDLEVBQXVCLENBQUMsQ0FBQyxXQUFXLEtBQUssUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQXJJLENBQXFJLEVBQUM7Z0JBQ25NLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO29CQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO2lCQUNuRDtxQkFBTTtvQkFDTCxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTSxFQUFFO3dCQUM3QixJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztxQkFDN0I7O3dCQUNHLEtBQUssU0FBQTtvQkFDVCxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTt3QkFDbEQsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxtQkFBUSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLEdBQUc7Ozs7d0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxLQUFFLENBQUMsQ0FBQztxQkFDOUU7eUJBQU07d0JBQ0wsS0FBSyxHQUFHLENBQUMsQ0FBQztxQkFDWDtvQkFDRCxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztvQkFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3BEO2dCQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2FBQ3ZFO1NBQ0Y7SUFDSCxDQUFDOzs7Ozs7SUFFTyxtREFBb0I7Ozs7O0lBQTVCLFVBQTZCLFNBQWdDOztnQ0FDaEQsUUFBUTtZQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRTtnQkFDekIsT0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQUssVUFBVSxDQUFDLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JGLE9BQUssT0FBTyxHQUFHLEtBQUssQ0FBQzthQUN0QjtpQkFBTTtnQkFDTCxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxJQUFJLFFBQVEsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxJQUFJLFFBQVEsQ0FBQyxZQUFZLEtBQUssR0FBRyxDQUFDLEVBQUU7b0JBQzdHLE9BQUssT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFLLFVBQVUsQ0FBQyxTQUFTLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO29CQUNwRixPQUFLLE9BQU8sR0FBRyxLQUFLLENBQUM7aUJBQ3RCO3FCQUFNLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLElBQUksUUFBUSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLElBQUksUUFBUSxDQUFDLFlBQVksS0FBSyxHQUFHLENBQUMsRUFBRTtvQkFDaEgsT0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQUssVUFBVSxDQUFDLFNBQVMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUM7b0JBQzlFLE9BQUssT0FBTyxHQUFHLEtBQUssQ0FBQztpQkFDdEI7cUJBQU07b0JBQ0wsMkNBQTJDO29CQUMzQyxJQUFJLE9BQUssSUFBSSxLQUFLLGdCQUFnQixFQUFFOzs0QkFDNUIsQ0FBQyxHQUFHLE9BQUssV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7d0JBQUMsVUFBQSxDQUFDOzRCQUN2RCxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssa0NBQWtDLEVBQUU7Z0NBQ2pELE9BQU8sS0FBSyxDQUFDOzZCQUNkOztnQ0FDSyxDQUFDLEdBQUcsbUJBQUEsQ0FBQyxFQUF1Qjs0QkFDbEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUNoQyxDQUFDLEVBQUM7d0JBQ0YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7NEJBQ1YsT0FBSyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO3lCQUNuRDs2QkFBTTs7Z0NBQ0QsS0FBSyxTQUFBOzRCQUNULElBQUksT0FBSyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQ0FDbEQsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxtQkFBUSxPQUFLLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O2dDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsS0FBRSxDQUFDLENBQUM7NkJBQzlFO2lDQUFNO2dDQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7NkJBQ1g7NEJBQ0QsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7NEJBQ3ZCLE9BQUssV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzt5QkFDcEQ7d0JBQ0QsT0FBSyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsT0FBSyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztxQkFDdkU7eUJBQU0sSUFBSSxPQUFLLElBQUksS0FBSyxnQkFBZ0IsRUFBRTs7NEJBQ25DLENBQUMsR0FBRyxPQUFLLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O3dCQUFDLFVBQUEsQ0FBQzs0QkFDdkQsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLGtDQUFrQyxFQUFFO2dDQUNqRCxPQUFPLEtBQUssQ0FBQzs2QkFDZDs7Z0NBQ0ssQ0FBQyxHQUFHLG1CQUFBLENBQUMsRUFBdUI7NEJBQ2xDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQzt3QkFDaEMsQ0FBQyxFQUFDO3dCQUNGLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFOzRCQUNWLE9BQUssV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQzt5QkFDbkQ7NkJBQU07O2dDQUNELEtBQUssU0FBQTs0QkFDVCxJQUFJLE9BQUssV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0NBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsT0FBSyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7OztnQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDOzZCQUM5RTtpQ0FBTTtnQ0FDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDOzZCQUNYOzRCQUNELFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDOzRCQUN2QixPQUFLLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7eUJBQ3BEO3dCQUNELE9BQUssa0JBQWtCLENBQUMsUUFBUSxDQUFDLE9BQUssV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7cUJBQ3ZFO2lCQUNGO2FBQ0Y7Ozs7WUF6REgsS0FBdUIsSUFBQSxjQUFBLGlCQUFBLFNBQVMsQ0FBQSxvQ0FBQTtnQkFBM0IsSUFBTSxRQUFRLHNCQUFBO3dCQUFSLFFBQVE7YUEwRGxCOzs7Ozs7Ozs7SUFDSCxDQUFDOzs7Ozs7SUFFTyxvREFBcUI7Ozs7O0lBQTdCLFVBQThCLFNBQTZCOztZQUNuRCxHQUFHLEdBQUcsSUFBSSxvQkFBb0IsRUFBRTtRQUN0QyxHQUFHLENBQUMsRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUM7UUFDdEIsR0FBRyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsVUFBVSxDQUFDO1FBQ3RDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBQztRQUN0QyxHQUFHLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUM7UUFDdEMsR0FBRyxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDO1FBQzFCLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUM7UUFDbEQsR0FBRyxDQUFDLElBQUksR0FBRyxtQ0FBbUMsQ0FBQztRQUMvQyxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUM7UUFDcEMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDNUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxFQUFmLENBQWUsRUFBQztZQUM3RSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDVixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQzthQUM5QztpQkFBTTs7b0JBQ0QsS0FBSyxTQUFBO2dCQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7OztvQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO2lCQUM5RTtxQkFBTTtvQkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO2lCQUNYO2dCQUNELEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2dCQUNsQixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMvQztZQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZFO2FBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDbkMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxFQUFmLENBQWUsRUFBQztZQUM3RSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDVixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQzthQUM5QztpQkFBTTs7b0JBQ0QsS0FBSyxTQUFBO2dCQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7OztvQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO2lCQUM5RTtxQkFBTTtvQkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO2lCQUNYO2dCQUNELEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2dCQUNsQixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMvQztZQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZFO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sd0RBQXlCOzs7OztJQUFqQyxVQUFrQyxhQUF1Qzs7UUFDdkUsSUFBSSxhQUFhLENBQUMsb0JBQW9CLEtBQUssTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRTtZQUM1RSxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDLENBQUM7U0FDdkY7YUFBTSxJQUFJLGFBQWEsQ0FBQyxvQkFBb0IsS0FBSyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsRUFBRSxFQUFFLGdDQUFnQztZQUN0SixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDLENBQUM7U0FDeEY7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsRUFBRTs7b0JBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLGFBQWEsQ0FBQyxFQUFFLEVBQXpCLENBQXlCLEVBQUM7Z0JBQ3ZGLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO29CQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDO2lCQUN4RDtxQkFBTTs7d0JBQ0MsY0FBYyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTTs7OztvQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxJQUFJLEtBQUssdUNBQXVDLEVBQWxELENBQWtELEVBQUM7O3dCQUMxSCxLQUFnQixJQUFBLG1CQUFBLGlCQUFBLGNBQWMsQ0FBQSw4Q0FBQSwwRUFBRTs0QkFBM0IsSUFBTSxDQUFDLDJCQUFBOztnQ0FDSixpQkFBaUIsR0FBRyxtQkFBQSxDQUFDLEVBQTRCOzRCQUN2RCxJQUFJLGlCQUFpQixDQUFDLGtCQUFrQixLQUFLLGFBQWEsQ0FBQyxrQkFBa0I7Z0NBQzNFLGlCQUFpQixDQUFDLFNBQVMsS0FBSyxhQUFhLENBQUMsU0FBUztnQ0FDdkQsaUJBQWlCLENBQUMsU0FBUyxLQUFLLGFBQWEsQ0FBQyxTQUFTO2dDQUN2RCxpQkFBaUIsQ0FBQyxhQUFhLEtBQUssYUFBYSxDQUFDLGFBQWE7Z0NBQy9ELGlCQUFpQixDQUFDLFFBQVEsS0FBSyxhQUFhLENBQUMsUUFBUSxFQUNyRDtnQ0FDQSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hGLE9BQU87NkJBQ1I7eUJBQ0Y7Ozs7Ozs7Ozs7d0JBQ0csS0FBSyxTQUFBO29CQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7Ozt3QkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO3FCQUM5RTt5QkFBTTt3QkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO3FCQUNYO29CQUNELGFBQWEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO29CQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztpQkFDekQ7Z0JBQ0QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7YUFDdkU7aUJBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztvQkFDbkMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssYUFBYSxDQUFDLEVBQUUsRUFBekIsQ0FBeUIsRUFBQztnQkFDdkYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7b0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUM7aUJBQ3hEO3FCQUFNOzt3QkFDQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNOzs7O29CQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLElBQUksS0FBSyx1Q0FBdUMsRUFBbEQsQ0FBa0QsRUFBQzs7d0JBQzFILEtBQWdCLElBQUEsbUJBQUEsaUJBQUEsY0FBYyxDQUFBLDhDQUFBLDBFQUFFOzRCQUEzQixJQUFNLENBQUMsMkJBQUE7O2dDQUNKLGlCQUFpQixHQUFHLG1CQUFBLENBQUMsRUFBNEI7NEJBQ3ZELElBQUksaUJBQWlCLENBQUMsa0JBQWtCLEtBQUssYUFBYSxDQUFDLGtCQUFrQjtnQ0FDM0UsaUJBQWlCLENBQUMsU0FBUyxLQUFLLGFBQWEsQ0FBQyxTQUFTO2dDQUN2RCxpQkFBaUIsQ0FBQyxTQUFTLEtBQUssYUFBYSxDQUFDLFNBQVM7Z0NBQ3ZELGlCQUFpQixDQUFDLGFBQWEsS0FBSyxhQUFhLENBQUMsYUFBYTtnQ0FDL0QsaUJBQWlCLENBQUMsUUFBUSxLQUFLLGFBQWEsQ0FBQyxRQUFRLEVBQ3JEO2dDQUNBLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsQ0FBQztnQ0FDeEYsT0FBTzs2QkFDUjt5QkFDRjs7Ozs7Ozs7Ozt3QkFDRyxLQUFLLFNBQUE7b0JBQ1QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7d0JBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O3dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsS0FBRSxDQUFDLENBQUM7cUJBQzlFO3lCQUFNO3dCQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7cUJBQ1g7b0JBQ0QsYUFBYSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7b0JBQzVCLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2lCQUN6RDtnQkFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUN2RTtTQUNGO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8saURBQWtCOzs7OztJQUExQixVQUEyQixNQUF5Qjs7UUFDbEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRTtZQUNqRixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDLENBQUM7U0FDM0Y7YUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRTtZQUNqQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDLENBQUM7U0FDN0Y7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsRUFBRTs7b0JBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxFQUFFLEVBQWxCLENBQWtCLEVBQUM7Z0JBQ2hGLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO29CQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO2lCQUNqRDtxQkFBTTs7d0JBQ0Msa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNOzs7O29CQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLElBQUksS0FBSyxnQ0FBZ0MsRUFBM0MsQ0FBMkMsRUFBQzs7d0JBQ3ZILEtBQWdCLElBQUEsdUJBQUEsaUJBQUEsa0JBQWtCLENBQUEsc0RBQUEsc0ZBQUU7NEJBQS9CLElBQU0sQ0FBQywrQkFBQTs7Z0NBQ0osVUFBVSxHQUFHLG1CQUFBLENBQUMsRUFBcUI7NEJBQ3pDLElBQUksVUFBVSxDQUFDLFdBQVcsS0FBSyxNQUFNLENBQUMsV0FBVztnQ0FDL0MsVUFBVSxDQUFDLGVBQWUsS0FBSyxNQUFNLENBQUMsZUFBZTtnQ0FDckQsVUFBVSxDQUFDLGVBQWUsS0FBSyxNQUFNLENBQUMsZUFBZTtnQ0FDckQsVUFBVSxDQUFDLGVBQWUsS0FBSyxNQUFNLENBQUMsZUFBZTtnQ0FDckQsVUFBVSxDQUFDLGNBQWMsS0FBSyxNQUFNLENBQUMsY0FBYyxFQUNuRDtnQ0FDQSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDLENBQUM7Z0NBQ3hGLE9BQU87NkJBQ1I7eUJBQ0Y7Ozs7Ozs7Ozs7d0JBQ0csS0FBSyxTQUFBO29CQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7Ozt3QkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO3FCQUM5RTt5QkFBTTt3QkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO3FCQUNYO29CQUNELE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO29CQUNyQixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDbEQ7Z0JBQ0QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7YUFDdkU7aUJBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztvQkFDbkMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssTUFBTSxDQUFDLEVBQUUsRUFBbEIsQ0FBa0IsRUFBQztnQkFDaEYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7b0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7aUJBQ2pEO3FCQUFNOzt3QkFDQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU07Ozs7b0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxLQUFLLGdDQUFnQyxFQUEzQyxDQUEyQyxFQUFDOzt3QkFDdkgsS0FBZ0IsSUFBQSx1QkFBQSxpQkFBQSxrQkFBa0IsQ0FBQSxzREFBQSxzRkFBRTs0QkFBL0IsSUFBTSxDQUFDLCtCQUFBOztnQ0FDSixVQUFVLEdBQUcsbUJBQUEsQ0FBQyxFQUFxQjs0QkFDekMsSUFBSSxVQUFVLENBQUMsV0FBVyxLQUFLLE1BQU0sQ0FBQyxXQUFXO2dDQUMvQyxVQUFVLENBQUMsZUFBZSxLQUFLLE1BQU0sQ0FBQyxlQUFlO2dDQUNyRCxVQUFVLENBQUMsZUFBZSxLQUFLLE1BQU0sQ0FBQyxlQUFlO2dDQUNyRCxVQUFVLENBQUMsZUFBZSxLQUFLLE1BQU0sQ0FBQyxlQUFlO2dDQUNyRCxVQUFVLENBQUMsY0FBYyxLQUFLLE1BQU0sQ0FBQyxjQUFjLEVBQ25EO2dDQUNBLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsQ0FBQztnQ0FDeEYsT0FBTzs2QkFDUjt5QkFDRjs7Ozs7Ozs7Ozt3QkFDRyxLQUFLLFNBQUE7b0JBQ1QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7d0JBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O3dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsS0FBRSxDQUFDLENBQUM7cUJBQzlFO3lCQUFNO3dCQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7cUJBQ1g7b0JBQ0QsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNsRDtnQkFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUN2RTtTQUNGO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sMkRBQTRCOzs7OztJQUFwQyxVQUFxQyxnQkFBNkM7UUFDaEYsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDNUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLGdCQUFnQixDQUFDLEVBQUU7Z0JBQ3hGLENBQUMsQ0FBQyxtQkFBQSxDQUFDLEVBQStCLENBQUMsQ0FBQyxhQUFhLElBQUksQ0FBQyxtQkFBQSxDQUFDLEVBQStCLENBQUMsQ0FBQyxhQUFhLEtBQUssZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUMsRUFEL0UsQ0FDK0UsRUFBQztZQUM3SSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ1QsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU0sRUFBRTtvQkFDN0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyw0QkFBNEI7aUJBQzFEOztvQkFDRyxLQUFLLFNBQUE7Z0JBQ1QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O29CQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsS0FBRSxDQUFDLENBQUM7aUJBQzlFO3FCQUFNO29CQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7aUJBQ1g7Z0JBQ0QsZ0JBQWdCLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztnQkFDL0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzthQUM1RDtZQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZFO2FBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDbkMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLGdCQUFnQixDQUFDLEVBQUU7Z0JBQ3hGLENBQUMsQ0FBQyxtQkFBQSxDQUFDLEVBQStCLENBQUMsQ0FBQyxhQUFhLElBQUksQ0FBQyxtQkFBQSxDQUFDLEVBQStCLENBQUMsQ0FBQyxhQUFhLEtBQUssZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUMsRUFEL0UsQ0FDK0UsRUFBQztZQUM3SSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ1QsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU0sRUFBRTtvQkFDN0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyw0QkFBNEI7aUJBQzFEOztvQkFDRyxLQUFLLFNBQUE7Z0JBQ1QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ2xELEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxPQUFSLElBQUksbUJBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHOzs7O29CQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssRUFBUCxDQUFPLEVBQUMsS0FBRSxDQUFDLENBQUM7aUJBQzlFO3FCQUFNO29CQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7aUJBQ1g7Z0JBQ0QsZ0JBQWdCLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztnQkFDL0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzthQUM1RDtZQUNELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZFO0lBQ0gsQ0FBQzs7Ozs7O0lBR08seURBQTBCOzs7OztJQUFsQyxVQUFtQyxZQUErQzs7WUFDMUUsdUJBQXVCLEdBQUcsSUFBSSx1QkFBdUIsRUFBRTtRQUM3RCx1QkFBdUIsQ0FBQyxFQUFFLEdBQUcsWUFBWSxDQUFDLEVBQUUsSUFBSSxhQUFhLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNsRix1QkFBdUIsQ0FBQyxJQUFJLEdBQUcsc0NBQXNDLENBQUM7UUFDdEUsdUJBQXVCLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDM0QsdUJBQXVCLENBQUMsSUFBSSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUM7UUFDakQsdUJBQXVCLENBQUMsV0FBVyxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUM7UUFDL0QsdUJBQXVCLENBQUMsaUJBQWlCLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUFDO1FBQzNFLHVCQUF1QixDQUFDLGNBQWMsR0FBRyxZQUFZLENBQUMsY0FBYyxDQUFDO1FBQ3JFLHVCQUF1QixDQUFDLGdCQUFnQixHQUFHLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQztRQUN6RSx1QkFBdUIsQ0FBQyxnQkFBZ0IsR0FBRyxZQUFZLENBQUMsZ0JBQWdCLENBQUM7UUFDekUsdUJBQXVCLENBQUMsZUFBZSxHQUFHLFlBQVksQ0FBQyxlQUFlLENBQUM7UUFDdkUsdUJBQXVCLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxZQUFZLENBQUM7UUFDakUsdUJBQXVCLENBQUMsR0FBRyxHQUFHLFlBQVksQ0FBQyxHQUFHLENBQUM7UUFFL0MsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFO1lBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxLQUFLLHNDQUFzQyxFQUFqRCxDQUFpRCxFQUFDLENBQUM7O2dCQUNySSxLQUFLLFNBQUE7WUFDVCxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDbEQsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLE9BQVIsSUFBSSxtQkFBUSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLEdBQUc7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsS0FBSyxFQUFQLENBQU8sRUFBQyxLQUFFLENBQUMsQ0FBQzthQUM5RTtpQkFBTTtnQkFDTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO2FBQ1g7WUFDRCx1QkFBdUIsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDbEUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7U0FDdkU7YUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7WUFDekMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU07Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxJQUFJLEtBQUssc0NBQXNDLEVBQWpELENBQWlELEVBQUMsQ0FBQzs7Z0JBQ3JJLEtBQUssU0FBQTtZQUNULElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLG1CQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsR0FBRzs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEtBQUUsQ0FBQyxDQUFDO2FBQzlFO2lCQUFNO2dCQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7YUFDWDtZQUNELHVCQUF1QixDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUNsRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztTQUN2RTtJQUNILENBQUM7Ozs7SUFFRCx5Q0FBVTs7O0lBQVY7UUFDRSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUN6QjtJQUNILENBQUM7Ozs7O0lBRUQsNENBQWE7Ozs7SUFBYixVQUFjLElBQVk7UUFBMUIsaUJBNEdDO1FBM0dDLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDOztZQUNiLFdBQVc7UUFDZixJQUFJLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtZQUM3QixXQUFXLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQztTQUNuRDthQUFNLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFO1lBQ3BDLFdBQVcsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxDQUFDO1NBQ25EO1FBQ0QsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDLENBQUM7WUFDdEYsT0FBTztTQUNSOztZQUNLLFlBQVksR0FBRyxXQUFXLENBQUMsSUFBSTtRQUNyQyxJQUFJLFlBQVksRUFBRTs7Z0JBQ1YsT0FBTyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDOztnQkFDbEQsYUFBVyxHQUFHO2dCQUNsQixLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsNENBQTRDLENBQUM7Z0JBQzlFLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztnQkFDcEIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO2dCQUN0QixPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVU7Z0JBQ3hCLFdBQVcsRUFBRSxJQUFJO2FBQ2xCOztnQkFDSyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxzQkFBc0IsQ0FBQztZQUNqRixJQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDO1lBQ3hELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2xELFFBQVEsWUFBWSxDQUFDLElBQUksRUFBRTtnQkFDekIsS0FBSyxrQ0FBa0M7b0JBQ3JDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRzt3QkFDaEMsSUFBSSxFQUFFLGtDQUFrQzt3QkFDeEMsS0FBSyxFQUFFLFlBQVk7cUJBQ3BCLENBQUM7b0JBQ0YsTUFBTTtnQkFDUixLQUFLLDhCQUE4QjtvQkFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHO3dCQUNoQyxJQUFJLEVBQUUsOEJBQThCO3dCQUNwQyxLQUFLLEVBQUUsWUFBWTtxQkFDcEIsQ0FBQztvQkFDRixNQUFNO2dCQUNSLEtBQUssa0NBQWtDO29CQUNyQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSxrQ0FBa0M7d0JBQ3hDLEtBQUssRUFBRSxZQUFZO3FCQUNwQixDQUFDO29CQUNGLE1BQU07Z0JBQ1IsS0FBSyx1Q0FBdUM7b0JBQzFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRzt3QkFDaEMsSUFBSSxFQUFFLHVDQUF1Qzt3QkFDN0MsS0FBSyxFQUFFLFlBQVk7cUJBQ3BCLENBQUM7O3dCQUNJLEdBQUcsR0FBRyxnREFBZ0QsR0FBRyxDQUFDLG1CQUFBLFlBQVksRUFBNEIsQ0FBQyxDQUFDLGtCQUFrQjtvQkFDNUgsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUzs7OztvQkFBQyxVQUFDLEdBQVE7d0JBQ3BDLElBQUksQ0FBQyxHQUFHLEVBQUU7NEJBQ1IsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMseUNBQXlDLENBQUMsQ0FBQyxDQUFDOzRCQUN6RixJQUFJLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtnQ0FDN0IsS0FBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7NkJBQzdCO2lDQUFNLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFO2dDQUNwQyxLQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQzs2QkFDN0I7eUJBQ0Y7NkJBQU07NEJBQ0wsS0FBSSxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsT0FBTyxFQUFFLGFBQVcsQ0FBQyxDQUFDO3lCQUNyRTtvQkFDSCxDQUFDLEVBQUMsQ0FBQztvQkFDSCxNQUFNO2dCQUNSLEtBQUssZ0NBQWdDO29CQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSxnQ0FBZ0M7d0JBQ3RDLEtBQUssRUFBRSxZQUFZO3FCQUNwQixDQUFDOzt3QkFDSSxTQUFTLEdBQUcsd0NBQXdDLEdBQUcsQ0FBQyxtQkFBQSxZQUFZLEVBQXFCLENBQUMsQ0FBQyxXQUFXO29CQUM1RyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTOzs7O29CQUFDLFVBQUMsR0FBUTt3QkFDMUMsSUFBSSxDQUFDLEdBQUcsRUFBRTs0QkFDUixLQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDLENBQUM7NEJBQ3JGLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFO2dDQUM3QixLQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQzs2QkFDN0I7aUNBQU0sSUFBSSxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7Z0NBQ3BDLEtBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDOzZCQUM3Qjt5QkFDRjs2QkFBTTs0QkFDTCxLQUFJLENBQUMsVUFBVSxHQUFHLEtBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxPQUFPLEVBQUUsYUFBVyxDQUFDLENBQUM7eUJBQ3JFO29CQUNILENBQUMsRUFBQyxDQUFDO29CQUNILE1BQU07Z0JBQ1IsS0FBSyxtQ0FBbUM7b0JBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRzt3QkFDaEMsSUFBSSxFQUFFLG1DQUFtQzt3QkFDekMsS0FBSyxFQUFFLFlBQVk7cUJBQ3BCLENBQUM7b0JBQ0YsTUFBTTtnQkFDUixLQUFLLDBDQUEwQztvQkFDN0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHO3dCQUNoQyxJQUFJLEVBQUUsMENBQTBDO3dCQUNoRCxLQUFLLEVBQUUsWUFBWTtxQkFDcEIsQ0FBQztvQkFDRixNQUFNO2dCQUNSLEtBQUssc0NBQXNDO29CQUN6QyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUc7d0JBQ2hDLElBQUksRUFBRSxzQ0FBc0M7d0JBQzVDLEtBQUssRUFBRSxZQUFZO3FCQUNwQixDQUFDO29CQUNGLE1BQU07YUFDVDtZQUNELElBQUksWUFBWSxDQUFDLElBQUksS0FBSyx1Q0FBdUM7Z0JBQy9ELFlBQVksQ0FBQyxJQUFJLEtBQUssZ0NBQWdDLEVBQUUsRUFBRSxjQUFjO2dCQUN4RSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBVyxDQUFDLENBQUM7YUFDckU7U0FDRjtJQUNILENBQUM7Ozs7O0lBQ0QsOENBQWU7Ozs7SUFBZixVQUFnQixJQUFZO1FBQTVCLGlCQW9CQztRQW5CQyxJQUFJLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtZQUM3QixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUU7Z0JBQ3ZDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQzs7b0JBQ2hDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBcEQsQ0FBb0QsRUFBQztnQkFDdEgsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUN2RTtpQkFBTTtnQkFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDLENBQUM7YUFDN0Y7U0FDRjthQUFNLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFO1lBQ3BDLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRTtnQkFDdkMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDOztvQkFDaEMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssS0FBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFwRCxDQUFvRCxFQUFDO2dCQUN0SCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2FBQ3ZFO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDZDQUE2QyxDQUFDLENBQUMsQ0FBQzthQUM3RjtTQUNGO0lBQ0gsQ0FBQzs7Ozs7SUFFRCw2Q0FBYzs7OztJQUFkLFVBQWUsSUFBWTtRQUN6QixJQUFJLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtZQUM3QixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7U0FDbkQ7YUFBTSxJQUFJLElBQUksS0FBSyxnQkFBZ0IsRUFBRTtZQUNwQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7U0FDbkQ7UUFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUN0RSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztTQUN2RTtJQUNILENBQUM7Ozs7O0lBRUQscUNBQU07Ozs7SUFBTixVQUFPLElBQVk7UUFDakIsSUFBSSxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7O2dCQUN2QixXQUFXLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVc7WUFDdkQsSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwRixPQUFPO2FBQ1I7O2dCQUNLLFdBQVMsR0FBRyxXQUFXLENBQUMsSUFBSTs7Z0JBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssV0FBUyxDQUFDLEVBQUUsRUFBckIsQ0FBcUIsRUFBQztZQUNuRixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ1gsT0FBTzthQUNSOztnQkFDSyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLO1lBQzFELElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUNoRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3ZELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzlELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ3RFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsV0FBUyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUN2RDthQUFNLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDOUIsV0FBVyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXO1lBQ3ZELElBQUksQ0FBQyxXQUFXLEVBQUU7Z0JBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDLENBQUMsQ0FBQztnQkFDcEYsT0FBTzthQUNSOztnQkFDSyxXQUFTLEdBQUcsV0FBVyxDQUFDLElBQUk7O2dCQUM1QixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLFdBQVMsQ0FBQyxFQUFFLEVBQXJCLENBQXFCLEVBQUM7WUFDbkYsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNYLE9BQU87YUFDUjs7Z0JBQ0ssS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSztZQUMxRCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDaEcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUN2RCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5RCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN0RSxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLFdBQVMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdkQ7SUFFSCxDQUFDOzs7OztJQUVELHVDQUFROzs7O0lBQVIsVUFBUyxJQUFZO1FBQ25CLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFOztnQkFDdkIsV0FBVyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXO1lBQ3ZELElBQUksQ0FBQyxXQUFXLEVBQUU7Z0JBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDLENBQUMsQ0FBQztnQkFDcEYsT0FBTzthQUNSOztnQkFDSyxXQUFTLEdBQUcsV0FBVyxDQUFDLElBQUk7O2dCQUM1QixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxLQUFLLFdBQVMsQ0FBQyxFQUFFLEVBQXJCLENBQXFCLEVBQUM7WUFDbkYsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFFO2dCQUN0RCxPQUFPO2FBQ1I7O2dCQUNLLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUs7WUFDMUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQ2hHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDdkQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDOUQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDdEUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxXQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3ZEO2FBQU0sSUFBSSxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7O2dCQUM5QixXQUFXLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVc7WUFDdkQsSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwRixPQUFPO2FBQ1I7O2dCQUNLLFdBQVMsR0FBRyxXQUFXLENBQUMsSUFBSTs7Z0JBQzVCLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssV0FBUyxDQUFDLEVBQUUsRUFBckIsQ0FBcUIsRUFBQztZQUNuRixJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBQyxDQUFDLEVBQUU7Z0JBQ3RELE9BQU87YUFDUjs7Z0JBQ0ssS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSztZQUMxRCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDaEcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUN2RCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5RCxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN0RSxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLFdBQVMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdkQ7SUFDSCxDQUFDOzs7Ozs7OztJQUVPLHdDQUFTOzs7Ozs7O0lBQWpCLFVBQWtCLEdBQWUsRUFBRSxFQUFVLEVBQUUsRUFBVTtRQUN2RCxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7OztJQUVELG1EQUFvQjs7O0lBQXBCO1FBQUEsaUJBUUM7UUFQQyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUU7WUFDdkMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDOztnQkFDaEMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXZELENBQXVELEVBQUM7WUFDeEgsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2xEO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDLENBQUM7U0FDNUY7SUFDSCxDQUFDOzs7O0lBRUQsbURBQW9COzs7SUFBcEI7UUFBQSxpQkFRQztRQVBDLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRTtZQUN2QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxFQUFFLENBQUM7O2dCQUNoQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTOzs7O1lBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBdkQsQ0FBdUQsRUFBQztZQUN4SCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEQ7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLCtDQUErQyxDQUFDLENBQUMsQ0FBQztTQUMvRjtJQUNILENBQUM7Ozs7OztJQUVPLDBEQUEyQjs7Ozs7SUFBbkMsVUFBb0MsYUFBOEI7UUFDaEUsSUFBSSxhQUFhLENBQUMsR0FBRyxLQUFLLFlBQVksRUFBRTtZQUN0QyxPQUFPLGFBQWEsQ0FBQyxXQUFXLENBQUM7U0FDbEM7YUFBTTtZQUNMLElBQUksYUFBYSxDQUFDLE9BQU8sRUFBRTtnQkFDekIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUM7YUFDdkY7aUJBQU07Z0JBQ0wsT0FBTyxFQUFFLENBQUM7YUFDWDtTQUNGO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sOERBQStCOzs7OztJQUF2QyxVQUF3QyxpQkFBc0M7UUFDNUUsSUFBSSxpQkFBaUIsQ0FBQyxHQUFHLEtBQUssWUFBWSxFQUFFO1lBQzFDLE9BQU8saUJBQWlCLENBQUMsUUFBUSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sOERBQStCOzs7OztJQUF2QyxVQUF3QyxRQUE2QjtRQUNuRSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxLQUFLLFNBQVMsRUFBRTtZQUM1QyxPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsSUFBSSxRQUFRLENBQUMsWUFBWSxLQUFLLEdBQUcsRUFBRTtZQUNqQyxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUU7Z0JBQ2xCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMscUNBQXFDLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO2FBQzFGO2lCQUFNO2dCQUNMLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMscUNBQXFDLENBQUMsQ0FBQzthQUN6RTtTQUNGO2FBQU0sSUFBSSxRQUFRLENBQUMsWUFBWSxLQUFLLEdBQUcsRUFBRTtZQUN4QyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7U0FDekU7SUFDSCxDQUFDOzs7Ozs7SUFFTywrREFBZ0M7Ozs7O0lBQXhDLFVBQXlDLFFBQThCOztZQUNqRSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSTtjQUMvRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQztRQUMvRCxJQUFJLFFBQVEsQ0FBQyxnQkFBZ0IsSUFBSSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNyRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsQ0FBQztnQkFDakMsR0FBRyxJQUFPLENBQUMsQ0FBQyxJQUFJLGNBQUksQ0FBQyxDQUFDLEtBQUssV0FBRyxDQUFDO1lBQ2pDLENBQUMsRUFBQyxDQUFDO1lBQ0gsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDeEM7UUFDRCxHQUFHLElBQUksR0FBRyxDQUFDO1FBQ1gsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7Ozs7SUFFTyxtRUFBb0M7Ozs7O0lBQTVDLFVBQTZDLGFBQXVDOztZQUM5RSxXQUFXLEdBQUcsRUFBRTtRQUNwQixJQUFJLGFBQWEsQ0FBQyxTQUFTLEVBQUU7WUFDM0IsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLHVDQUF1QyxDQUFDLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQztTQUM3RztRQUNELElBQUksYUFBYSxDQUFDLGFBQWEsRUFBRTtZQUMvQixXQUFXLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsdUNBQXVDLENBQUMsR0FBRyxhQUFhLENBQUMsYUFBYSxDQUFDO1NBQ2pIO1FBQ0QsSUFBSSxhQUFhLENBQUMsUUFBUSxFQUFFO1lBQzFCLElBQUksYUFBYSxDQUFDLFNBQVMsRUFBRTtnQkFDM0IsV0FBVyxJQUFJLFFBQUcsQ0FBQzthQUNwQjtZQUNELElBQUksYUFBYSxDQUFDLGFBQWEsRUFBRTtnQkFDL0IsV0FBVyxJQUFJLFFBQUcsQ0FBQzthQUNwQjtZQUNELFdBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyw2Q0FBNkMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7U0FDbEg7UUFDRCxPQUFPLFdBQVcsQ0FBQztJQUNyQixDQUFDOzs7Ozs7SUFFTyw0REFBNkI7Ozs7O0lBQXJDLFVBQXNDLE1BQXlCOztZQUN6RCxXQUFXLEdBQUcsRUFBRTtRQUNwQixJQUFJLE1BQU0sQ0FBQyxlQUFlLEVBQUU7WUFDMUIsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLGtDQUFrQyxDQUFDLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixHQUFHLFFBQUcsQ0FBQztTQUNqSDtRQUNELElBQUksTUFBTSxDQUFDLGVBQWUsRUFBRTtZQUMxQixXQUFXLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsa0NBQWtDLENBQUMsR0FBRyxNQUFNLENBQUMsbUJBQW1CLEdBQUcsUUFBRyxDQUFDO1NBQ2pIO1FBQ0QsSUFBSSxNQUFNLENBQUMsZUFBZSxFQUFFO1lBQzFCLFdBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxrQ0FBa0MsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxRQUFHLENBQUM7U0FDakg7UUFDRCxJQUFJLE1BQU0sQ0FBQyxjQUFjLEVBQUU7WUFDekIsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLEdBQUcsTUFBTSxDQUFDLGNBQWMsR0FBRyxRQUFHLENBQUM7U0FDdEc7UUFDRCxPQUFPLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdEQsQ0FBQzs7Ozs7O0lBRU8sMkNBQVk7Ozs7O0lBQXBCLFVBQXFCLENBQU07UUFDekIsNEJBQTRCO1FBRDlCLGlCQXFEQzs7UUFsREMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOztnQkFDM0MsS0FBcUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFBLGdCQUFBLDRCQUFFO29CQUE5QyxJQUFNLE1BQU0sV0FBQTtvQkFDZixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7aUJBQ3ZDOzs7Ozs7Ozs7WUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTs7b0JBQ25HLFVBQVUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNqRSxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUNuRCxVQUFVLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUM3QztTQUNGOztZQUNHLE9BQU8sR0FBRyxJQUFJLEtBQUssRUFBRTtRQUN6QixPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkQsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0NBQzNDLFFBQVE7Z0JBQ2pCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxHQUFHLEtBQUssUUFBUSxDQUFDLEdBQUcsRUFBdEIsQ0FBc0IsRUFBQyxFQUFFO29CQUM5QyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUN4Qjs7O2dCQUhILEtBQXVCLElBQUEsS0FBQSxpQkFBQSxJQUFJLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFBLGdCQUFBO29CQUF6RCxJQUFNLFFBQVEsV0FBQTs0QkFBUixRQUFRO2lCQUlsQjs7Ozs7Ozs7O1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQ0FDakQsUUFBUTtnQkFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEdBQUcsS0FBSyxRQUFRLENBQUMsR0FBRyxFQUF0QixDQUFzQixFQUFDLEVBQUU7b0JBQzlDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3hCOzs7Z0JBSEgsS0FBdUIsSUFBQSxLQUFBLGlCQUFBLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUEsZ0JBQUE7b0JBQS9ELElBQU0sUUFBUSxXQUFBOzRCQUFSLFFBQVE7aUJBSWxCOzs7Ozs7Ozs7U0FDRjtRQUNELElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7O2dCQUN0QixLQUFnQixJQUFBLFlBQUEsaUJBQUEsT0FBTyxDQUFBLGdDQUFBLHFEQUFFO29CQUFwQixJQUFNLENBQUMsb0JBQUE7b0JBQ1YsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ3pCOzs7Ozs7Ozs7U0FDRjtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxlQUFlO1FBQ25FLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSTs7OztRQUFDLFVBQUMsSUFBWTtZQUM1QyxJQUFHLEtBQUksQ0FBQyxrQkFBa0IsSUFBSSxLQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxJQUFJLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFOztvQkFDekcsSUFBSSxHQUFHLEtBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUssS0FBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFwRCxDQUFvRCxFQUFDO2dCQUM5RyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUN2QjtZQUNELElBQUcsS0FBSSxDQUFDLGtCQUFrQixJQUFJLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLElBQUksS0FBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUU7O29CQUN6RyxJQUFJLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQXBELENBQW9ELEVBQUM7Z0JBQzlHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO2FBQ3ZCO1lBRUQsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDOUIsd0JBQXdCO1lBQ3hCLElBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3JCLEtBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsR0FBRyxLQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsTUFBTTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsT0FBTyxDQUFDLElBQUk7Ozs7Z0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQWYsQ0FBZSxFQUFDLEVBQW5DLENBQW1DLEVBQUMsQ0FBQzthQUM5SDtRQUNILENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUFFTyxpRUFBa0M7Ozs7SUFBMUM7O1FBQ0UsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN6RixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO2FBQ25EO1lBQ0QsQ0FBQSxLQUFBLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUEsQ0FBQyxJQUFJLDRCQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLEdBQUU7WUFDakYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBRWxELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ3RFLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO2dCQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQzthQUN2RTtTQUNGO0lBQ0gsQ0FBQzs7Ozs7SUFFTyxpRUFBa0M7Ozs7SUFBMUM7O1FBQ0UsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN6RixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO2FBQ25EOztnQkFDSyxVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxLQUFLLHNDQUFzQyxFQUFqRCxDQUFpRCxFQUFDO1lBQ3JILElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN2Qyw0QkFBNEI7Z0JBQzVCLENBQUEsS0FBQSxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFBLENBQUMsSUFBSSw0QkFBSSxVQUFVLEdBQUU7Z0JBQ3hELElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsT0FBTzs7Ozs7Z0JBQUMsVUFBQyxLQUFLLEVBQUUsS0FBSztvQkFDdkQsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQixDQUFDLEVBQUMsQ0FBQztnQkFDSCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsTUFBTTs7OztnQkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxJQUFJLEtBQUssc0NBQXNDLEVBQWpELENBQWlELEVBQUMsQ0FBQztnQkFDekksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7Z0JBQ3RFLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO29CQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztpQkFDdkU7YUFDRjtTQUNGO0lBQ0gsQ0FBQzs7Ozs7SUFFTyxrREFBbUI7Ozs7SUFBM0I7UUFBQSxpQkFJQzs7WUFITyxHQUFHLEdBQUcsbURBQW1EO1FBQy9ELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQzthQUNmLFNBQVM7Ozs7UUFBQyxVQUFDLElBQVMsSUFBSyxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLEdBQUc7Ozs7UUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQS9CLENBQStCLEVBQUMsRUFBdkYsQ0FBdUYsRUFBQyxDQUFDO0lBQ3ZILENBQUM7SUFFRCwwQkFBMEI7Ozs7Ozs7SUFDbEIsK0NBQWdCOzs7Ozs7O0lBQXhCLFVBQXlCLE9BQWU7O1lBQ2hDLE9BQU8sR0FBRztZQUNkLEtBQUssRUFBRSxHQUFHO1lBQ1YsTUFBTSxFQUFFLEdBQUc7U0FDWjtRQUNELFFBQVEsT0FBTyxFQUFFO1lBQ2YsS0FBSyxrQ0FBa0M7Z0JBQ3JDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNwQixPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztnQkFDckIsT0FBTyxPQUFPLENBQUM7WUFDakIsS0FBSyw4QkFBOEI7Z0JBQ2pDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNwQixPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztnQkFDckIsT0FBTyxPQUFPLENBQUM7WUFDakIsS0FBSyxrQ0FBa0M7Z0JBQ3JDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNwQixPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztnQkFDckIsT0FBTyxPQUFPLENBQUM7Z0JBQUEsQ0FBQztZQUNsQixLQUFLLHVDQUF1QztnQkFDMUMsT0FBTyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ3BCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO2dCQUNyQixPQUFPLE9BQU8sQ0FBQztnQkFBQSxDQUFDO1lBQ2xCLEtBQUssZ0NBQWdDO2dCQUNuQyxPQUFPLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztnQkFDcEIsT0FBTyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7Z0JBQ3JCLE9BQU8sT0FBTyxDQUFDO2dCQUFBLENBQUM7WUFDbEIsS0FBSyxtQ0FBbUM7Z0JBQ3RDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNwQixPQUFPLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztnQkFDckIsT0FBTyxPQUFPLENBQUM7Z0JBQUEsQ0FBQztZQUNsQixLQUFLLDBDQUEwQztnQkFDN0MsT0FBTyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ3BCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO2dCQUNyQixPQUFPLE9BQU8sQ0FBQztnQkFBQSxDQUFDO1lBQ2xCLEtBQUssc0NBQXNDO2dCQUN6QyxPQUFPLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztnQkFDcEIsT0FBTyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7Z0JBQ3JCLE9BQU8sT0FBTyxDQUFDO2dCQUFBLENBQUM7U0FDbkI7SUFDSCxDQUFDOztnQkFucENGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixxbFlBQTJDO29CQUUzQyxTQUFTLEVBQUU7d0JBQ1Qsa0JBQWtCO3dCQUNqQixZQUFZO3FCQUNkOztpQkFDRjs7OztnQkFwQlEsc0JBQXNCO2dCQU90QixrQkFBa0I7Z0JBZlksd0JBQXdCO2dCQUFzQyxRQUFRO2dCQUt4RixjQUFjO2dCQUQxQixlQUFlO2dCQUdELGlCQUFpQjtnQkFOL0IsV0FBVztnQkFEWCxpQkFBaUIsdUJBZ01yQixRQUFROzZDQUNSLE1BQU0sU0FBQyxTQUFTO2dEQUNoQixNQUFNLFNBQUMsaUJBQWlCO2dCQWpMRCxZQUFZLHVCQWtMbkMsUUFBUTs7OzZCQXBLVixNQUFNOzhCQUNOLE1BQU07OEJBRU4sU0FBUyxTQUFDLGtCQUFrQjs2QkFDNUIsU0FBUyxTQUFDLFlBQVk7NkJBQ3RCLFNBQVMsU0FBQyxZQUFZOzZCQUN0QixTQUFTLFNBQUMsWUFBWTtxQ0FDdEIsU0FBUyxTQUFDLG9CQUFvQjtxQ0FDOUIsU0FBUyxTQUFDLG9CQUFvQjsrQkFFOUIsS0FBSzt3QkFFTCxLQUFLOztJQTZuQ1IsMkJBQUM7Q0FBQSxBQXBwQ0QsSUFvcENDO1NBM29DWSxvQkFBb0I7OztJQUUvQiwwQ0FBK0M7O0lBQy9DLDJDQUFnRDs7SUFFaEQsMkNBQTZEOztJQUM3RCwwQ0FBd0Q7O0lBQ3hELDBDQUF3RDs7SUFDeEQsMENBQXNEOztJQUN0RCxrREFBdUU7O0lBQ3ZFLGtEQUF1RTs7SUFFdkUsNENBQWdDOzs7OztJQWlDaEMsaURBQTBCOztJQUUxQix3Q0FBZ0U7O0lBRWhFLDBDQUF1Qjs7SUFDdkIsdUNBQThDOztJQUM5Qyx1Q0FBZTs7SUFFZiwyQ0FBcUQ7O0lBQ3JELHlDQUFrQjs7SUFFbEIsb0NBQXdCOztJQUV4QixrREFJRTs7SUFHRixrREFHRTs7SUFFRiwyQ0FLRTs7SUFFRix1Q0EyRUs7O0lBR0gsK0NBQThDOzs7OztJQUM5Qyx1Q0FBbUM7Ozs7O0lBQ25DLHdDQUEwQzs7Ozs7SUFDMUMsd0NBQTBCOzs7OztJQUMxQiw0Q0FBb0M7Ozs7O0lBQ3BDLHVDQUFnQzs7Ozs7SUFDaEMsb0NBQStCOzs7OztJQUMvQixvQ0FBeUI7Ozs7O0lBQ3pCLG1DQUEwQzs7Ozs7SUFDMUMsd0NBQTJDOzs7OztJQUMzQyx5Q0FBaUQ7Ozs7O0lBQ2pELDBDQUE0Qzs7QUF1K0JoRDtJQUNFLDhCQUNVLFVBQXdCO1FBQXhCLGVBQVUsR0FBVixVQUFVLENBQWM7SUFDOUIsQ0FBQzs7Ozs7SUFFTCx3Q0FBUzs7OztJQUFULFVBQVUsSUFBcUI7UUFDN0IsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQztTQUMvRDtRQUNELElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN6RSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLDJCQUEyQixDQUFDLENBQUM7U0FDL0Q7UUFDRCxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzNCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQztTQUMvRDtRQUNELE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsOEJBQThCLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBQ0gsMkJBQUM7QUFBRCxDQUFDLEFBakJELElBaUJDOzs7Ozs7O0lBZkcsMENBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDb21wb25lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbmplY3RvciwgSW5wdXQsIExPQ0FMRV9JRCwgT25Jbml0LCBPcHRpb25hbCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IEZEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgQnNNb2RhbFJlZiwgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlLCBFeHByZXNzaW9uU2VydmljZSwgSW5qZWN0ZWRUeXBlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uIH0gZnJvbSAnLi4vLi4vZG9tYWluL2VudGl0aWVzL29yZ2FuaXphdGlvbi1wYXJ0aWNpcGFudC1leHByZXNzaW9uJztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXIgfSBmcm9tICcuLi9wZXJmb3JtZXIvdmlld3MvY29tcG9uZW50LXBlcmZvcm1lci9jb21wb25lbnQtcGVyZm9ybWVyLmVudGl0eSc7XHJcbmltcG9ydCB7IFBlcmZvcm1lckVkaXRDb21wb25lbnQgfSBmcm9tICcuLi9wZXJmb3JtZXIvdmlld3MvcGVyZm9ybWVyLWVkaXQvcGVyZm9ybWVyLWVkaXQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQXNzaWduQ29uZmlnIH0gZnJvbSAnLi9hc3NpZ24tY29uZmlnJztcclxuaW1wb3J0IHsgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LCBDb21wb25lbnRQYXJ0aWNpcGFudCwgTWF0cml4UGFydGljaXBhbnQsIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudEluZm8sIFBvc2l0aW9uUGFydGljaXBhbnQsIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCwgVXNlclBhcnRpY2lwYW50LCBWYXJpYWJsZVBhcnRpY2lwYW50IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5pbmZvJztcclxuaW1wb3J0IHsgUGFydGljaXBhbnRVSVN0YXRlIH0gZnJvbSAnLi9wYXJ0aWNpcGFudC51aXN0YXRlJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLXBhcnRpY2lwYW50JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcGFydGljaXBhbnQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3BhcnRpY2lwYW50LmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBQYXJ0aWNpcGFudFVJU3RhdGUsXHJcbiAgICAgV2ZMb2NhbGVQaXBlXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUGFydGljaXBhbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZHJvcGRvd25FbCcpIGRyb3BEb3duRWw6IEZEcm9wZG93bkRpcmVjdGl2ZTtcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkUyJykgZHJvcERvd25FMjogRkRyb3Bkb3duRGlyZWN0aXZlO1xyXG4gIEBWaWV3Q2hpbGQoJ2VkaXRGb290ZXInKSBlZGl0Rm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ2h1bWFuUGVyZm9ybWVyR3JpZCcpIGh1bWFuUGVyZm9ybWVyR3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgncG90ZW50aWFsT3duZXJHcmlkJykgcG90ZW50aWFsT3duZXJHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgQElucHV0KCkgZWRpdG9yUGFyYW1zOiBhbnkgPSB7fTtcclxuXHJcbiAgQElucHV0KCkgc2V0IHZhbHVlKHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudEluZm8pIHtcclxuICAgIHRoaXMucGFydGljaXBhbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcnRpY2lwYW50KSk7XHJcbiAgICBpZiAoIXRoaXMucGFydGljaXBhbnQuYXNzaWduU3RyYXRlZ3kuYXNzaWduQ29uZmlnKSB7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuYXNzaWduU3RyYXRlZ3kuYXNzaWduQ29uZmlnID0gbmV3IEFzc2lnbkNvbmZpZygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcmVBc3NpZ25TdHJhdGVneSA9IHBhcnRpY2lwYW50LmFzc2lnblN0cmF0ZWd5LmFzc2lnblN0cmF0ZWd5O1xyXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0XHJcbiAgICAgICYmIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDBcclxuICAgICkge1xyXG4gICAgICBpZiAoTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpID09PSAwKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMTtcclxuICAgICAgICBmb3IgKGNvbnN0IGh1bWFuUGVyZm9ybWVyIG9mIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KSB7XHJcbiAgICAgICAgICBodW1hblBlcmZvcm1lci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyIC0gYi5vcmRlcik7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RcclxuICAgICAgJiYgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpID09PSAwKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBvdGVudGlhbE93bmVyIG9mIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KSB7XHJcbiAgICAgICAgICBwb3RlbnRpYWxPd25lci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyIC0gYi5vcmRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZUFzc2lnblN0cmF0ZWd5O1xyXG5cclxuICBub2RlVHlwZTogJ3VzZXJBY3Rpdml0eScgfCAnbm90aWZ5QWN0aXZpdHknICA9ICdub3RpZnlBY3Rpdml0eSc7XHJcblxyXG4gIGVkaXREaWFsb2c6IEJzTW9kYWxSZWY7XHJcbiAgY29tcFJlZjogQ29tcG9uZW50UmVmPFBlcmZvcm1lckVkaXRDb21wb25lbnQ+O1xyXG4gIGlzQ2xvc2UgPSB0cnVlO1xyXG5cclxuICBwYXJ0aWNpcGFudDogUGFydGljaXBhbnRJbmZvID0gbmV3IFBhcnRpY2lwYW50SW5mbygpO1xyXG4gIGVkaXRTdGF0ZSA9ICduZXcnOyAvLyDnvJbovpHnirbmgIHvvIznlKjkuo7ljLrliIbmmK/mlrDlop7ov5jmmK/nvJbovpEgIG5ldyB8IGVkaXRcclxuXHJcbiAgdHlwZSA9ICdodW1hblBlcmZvcm1lcic7XHJcblxyXG4gIGFzc2lnblN0cmF0ZWd5TGlzdCA9IFtcclxuICAgIHsgdmFsdWU6ICdBTEwnLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuYWxsJykgfSxcclxuICAgIHsgdmFsdWU6ICdBU1NJR04nLCBuYW1lOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuYXNzaWduJykgfSxcclxuICAgIHsgdmFsdWU6ICdDTEFJTScsIG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jbGFpbScpIH1cclxuICBdO1xyXG5cclxuXHJcbiAgb3BlcmF0b3JDb2xsZWN0aW9uID0gW1xyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY3VycmVudFVzZXInKSwgdmFsdWU6ICdjdXJyZW50VXNlcicgfSxcclxuICAgIHsgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnByb2NJbnN0Q3JlYXRvcicpLCB2YWx1ZTogJ3Byb2NJbnN0Q3JlYXRvcicgfVxyXG4gIF07XHJcblxyXG4gIG1vZGFsQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wYXJ0aWNpcGFudFNldCcpLFxyXG4gICAgd2lkdGg6IDkwMCxcclxuICAgIGhlaWdodDogNjYyLFxyXG4gICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICB9O1xyXG5cclxuICBjb2x1bW5zID0gW1xyXG4gICAge1xyXG4gICAgICBmaWVsZDogJ29yZGVyJywgd2lkdGg6IDI1LCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm9yZGVyJyksXHJcbiAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgIHR5cGU6IEVkaXRvclR5cGVzLk5VTUJFUkJPWCwgb3B0aW9uczoge1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0sIHtcclxuICAgIGZpZWxkOiAndHlwZScsIHdpZHRoOiA1MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC50eXBlJyksXHJcbiAgICBmb3JtYXR0ZXI6IHtcclxuICAgICAgdHlwZTogJ2VudW0nLFxyXG4gICAgICBvcHRpb25zOiB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ3RleHQnLCBkYXRhOiB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb24gfVxyXG4gICAgfVxyXG4gICAgfSwge1xyXG4gICAgZmllbGQ6ICdwZXJmb3JtZXJOYW1lJywgd2lkdGg6IDUwLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBlcmZvcm1lck5hbWUnKSwgc2hvd1RpcHM6IHRydWUsIGZvcm1hdHRlcjogKHYsIGQsIGkpID0+IHtcclxuICAgICAgc3dpdGNoIChkLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiBkLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIFZhcmlhYmxlUGFydGljaXBhbnQpLm5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIChkIGFzIFBvc2l0aW9uUGFydGljaXBhbnQpLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBDb21wb25lbnRQYXJ0aWNpcGFudCkubmFtZTtcclxuICAgICAgICBjYXNlICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQpLnJlcG9ydGluZ0xpbmVEZWZOYW1lICsgJy0nICsgKGQgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50KS5kaW1lbnNpb247XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBNYXRyaXhQYXJ0aWNpcGFudCkubWF0cml4RGVmTmFtZSArICctJyArIChkIGFzIE1hdHJpeFBhcnRpY2lwYW50KS5kYXRhRmllbGRBbGlhcztcclxuICAgICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudCkub3JnYW5pemF0aW9uTmFtZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBmaWVsZDogJ2Rlc2NyaXB0aW9uJywgd2lkdGg6IDEwMCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kZXNjcmlwdGlvbicpLCBzaG93VGlwczogdHJ1ZSxcclxuICAgIGZvcm1hdHRlcjogKHYsIGQsIGkpID0+IHtcclxuICAgICAgc3dpdGNoIChkLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJQZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWYXJpYWJsZVBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uUGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbXBvbmVudFBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVwb3J0aW5nTGluZVBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRNYXRyaXhQZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudCkub3JnYW5pemF0aW9uTmFtZSArICfvvIzkuJQnICsgKChkIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50KS5pbmNsdWRlQ2hpbGRyZW4gPyAn5YyF5ZCr5LiL57qnJyA6ICfkuI3ljIXlkKvkuIvnuqcnKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBmaWVsZDogJ2NvbmRpdGlvbicsIHdpZHRoOiA2MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jb25kaXRpb24nKSwgc2hvd1RpcHM6IHRydWUsXHJcbiAgICBlZGl0b3I6IHtcclxuICAgICAgdHlwZTogJ2lucHV0LWdyb3VwJyxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIGdyb3VwVGV4dDogJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JyxcclxuICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICBlLmZvcm1Db250cm9sLnNldFZhbHVlKGUuaW5zdGFuY2UudmFsdWUgPyBlLmluc3RhbmNlLnZhbHVlIDogJycpO1xyXG4gICAgICAgICAgdGhpcy5lZGl0Q29uZGl0b24oZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgfV07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGRlc2lnbmVyVUlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgdWlzdGF0ZTogUGFydGljaXBhbnRVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgZXhwcjogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQEluamVjdChMT0NBTEVfSUQpIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZyxcclxuICAgIEBJbmplY3QoV0ZfTEFOR19SRVNPVVJDRVMpIHByaXZhdGUgcmVzb3VyY2VzOiBhbnksXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSxcclxuICApIHtcclxuICAgIHRoaXMubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZSB8fCBuZXcgV2ZMb2NhbGVQaXBlKGxvY2FsZUlkLCByZXNvdXJjZXMpO1xyXG4gICAgdGhpcy5HZXRPcmdhbml6YXRpb25UeXBlKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMubm9kZVR5cGUgPSB0aGlzLmVkaXRvclBhcmFtcy5ub2RlVHlwZTtcclxuICB9XHJcblxyXG5cclxuICBjbGlja09LKCkge1xyXG4gICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZCkge1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2JqZWN0ID0ge1xyXG4gICAgICB2YWx1ZTogdGhpcy5wYXJ0aWNpcGFudCwgcGFyYW1ldGVyczogbnVsbFxyXG4gICAgfTtcclxuICAgIHRoaXMuc3VibWl0TW9kYWwuZW1pdChvYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgYXNzaWduU3RyYXRlZ3lDaGFuZ2UoZGF0YSkge1xyXG4gICAgaWYgKHRoaXMucHJlQXNzaWduU3RyYXRlZ3kgIT09ICdBU1NJR04nICYmIGRhdGEgPT09ICdBU1NJR04nICYmIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50LmFzc2lnblN0cmF0ZWd5LmFzc2lnbkNvbmZpZykge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuYXNzaWduU3RyYXRlZ3kuYXNzaWduQ29uZmlnID0gbmV3IEFzc2lnbkNvbmZpZygpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMubWVzc2FnZS5xdWVzdGlvbih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGF0YU1vdmVtZW50MScpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5odW1hblBlcmZvcm1lckNvcHlUb1BvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnByZUFzc2lnblN0cmF0ZWd5ID09PSAnQVNTSUdOJyAmJiBkYXRhICE9PSAnQVNTSUdOJyAmJiB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5xdWVzdGlvbih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGF0YU1vdmVtZW50MicpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckNvcHlUb0h1bWFuUGVyZm9ybWVyKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcmVBc3NpZ25TdHJhdGVneSA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICBzd2l0Y2hDaGFuZ2UoZGF0YTogYm9vbGVhbikge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5jbGVhclBlcmZvcm1lcigncG90ZW50aWFsT3duZXInKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZFBlcmZvcm1lcihwZXJmb3JtZXJUeXBlOiBzdHJpbmcsIHR5cGU6IHN0cmluZykge1xyXG4gICAgdGhpcy5lZGl0U3RhdGUgPSAnbmV3JztcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUGVyZm9ybWVyRWRpdENvbXBvbmVudCk7XHJcbiAgICB0aGlzLmNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyVHlwZSA9IHBlcmZvcm1lclR5cGU7XHJcbiAgICBjb25zdCBib3hzaXplID0gdGhpcy5hdHRyaWJ1dGVCb3hTaXplKHBlcmZvcm1lclR5cGUpO1xyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucGFydGljaXBhbnRTZWxlY3Rpb24nKSxcclxuICAgICAgd2lkdGg6IGJveHNpemUud2lkdGgsXHJcbiAgICAgIGhlaWdodDogYm94c2l6ZS5oZWlnaHQsXHJcbiAgICAgIGJ1dHRvbnM6IHRoaXMuZWRpdEZvb3RlcixcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgIH07XHJcbiAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgdGhpcy5kcm9wRG93bkVsLmNsb3NlKCk7XHJcbiAgICBpZiAodGhpcy5kcm9wRG93bkUyKSB7XHJcbiAgICAgIHRoaXMuZHJvcERvd25FMi5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZWRpdE9LKCkge1xyXG4gICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLmNvbXBSZWYpIHtcclxuICAgICAgY29uc3QgcmUgPSB0aGlzLmNvbXBSZWYuaW5zdGFuY2UuZ2V0UGVyZm9ybWVycygpO1xyXG4gICAgICBpZiAocmUudXNlclBlcmZvcm1lcnMgJiYgcmUudXNlclBlcmZvcm1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgcCBvZiByZS51c2VyUGVyZm9ybWVycykge1xyXG4gICAgICAgICAgdGhpcy5hZGRVc2VyUGVyZm9ybWVyKHApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAocmUudmFyaWFibGUgJiYgcmUudmFyaWFibGUgIT09IG51bGwgJiYgcmUudmFyaWFibGUucGVyZm9ybWVySWQpIHtcclxuICAgICAgICB0aGlzLmFkZHZhcmlhYmxlUGVyZm9ybWVyKHJlLnZhcmlhYmxlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyAyMDIzLTctMjgg57uE57uH5bKX5pSv5oyB5aSa6YCJXHJcbiAgICAgIGlmIChyZS5wb3NpdGlvbnMgJiYgcmUucG9zaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmFkZFBvc2l0aW9uUGVyZm9ybWVyKHJlLnBvc2l0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLmNvbXBvbmVudCAmJiByZS5jb21wb25lbnQubWV0YWRhdGFJZCAmJiByZS5jb21wb25lbnQubWV0aG9kQ29kZSkge1xyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50UGVyZm9ybWVyKHJlLmNvbXBvbmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLnJlcG9ydGluZ0xpbmUgJiYgcmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQgJiYgcmUucmVwb3J0aW5nTGluZS5kaW1lbnNpb24pIHtcclxuICAgICAgICB0aGlzLmFkZFJlcG9ydGluZ0xpbmVQZXJmb3JtZXIocmUucmVwb3J0aW5nTGluZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm1hdHJpeCAmJiByZS5tYXRyaXgubWF0cml4RGVmSWQpIHtcclxuICAgICAgICB0aGlzLmFkZE1hdHJpeFBlcmZvcm1lcihyZS5tYXRyaXgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5hY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycyAmJiByZS5hY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhIG9mIHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZEFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXIoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudCkge1xyXG4gICAgICAgIHRoaXMuYWRkT3JnYW5pemF0aW9uUGFydGljaXBhbnQocmUub3JnYW5pemF0aW9uUGFydGljaXBhbnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lZGl0RGlhbG9nICYmIHRoaXMuaXNDbG9zZSkge1xyXG4gICAgICB0aGlzLmVkaXREaWFsb2cuY2xvc2UoKTtcclxuICAgIH0gICBcclxuICAgIC8vIOe8lui+keWujOaIkOWQjuWIt+aWsOS4pOS4que7hOS7tlxyXG4gICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQucmVmcmVzaCgpO1xyXG4gICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQucmVmcmVzaCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRVc2VyUGVyZm9ybWVyKHVzZXJQZXJmb3JtZXI6IFVzZXJQYXJ0aWNpcGFudCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IHVzZXJQZXJmb3JtZXIuaWQgfHwgKChhIGFzIFVzZXJQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgJiYgKGEgYXMgVXNlclBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCA9PT0gdXNlclBlcmZvcm1lci5wZXJmb3JtZXJJZCkpKTtcclxuICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIC8vIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldID0gdXNlclBlcmZvcm1lcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVIdW1hblBlcmZvcm1lcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKGggPT4gaC5vcmRlcikpKzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlclBlcmZvcm1lci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2godXNlclBlcmZvcm1lcik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IChhLmlkID09PSB1c2VyUGVyZm9ybWVyLmlkIHx8ICgoYSBhcyBVc2VyUGFydGljaXBhbnQpLnBlcmZvcm1lcklkICYmIChhIGFzIFVzZXJQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgPT09IHVzZXJQZXJmb3JtZXIucGVyZm9ybWVySWQpKSk7XHJcbiAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAvLyB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IHVzZXJQZXJmb3JtZXI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdFN0YXRlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVzZXJQZXJmb3JtZXIub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKHVzZXJQZXJmb3JtZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkdmFyaWFibGVQZXJmb3JtZXIodmFyaWFibGU6IFZhcmlhYmxlUGFydGljaXBhbnQpIHtcclxuICAgIGNvbnN0IHYgPSB2YXJpYWJsZTtcclxuICAgIGlmICghdiB8fCAhdi52YXJWYWx1ZSkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UHJvY2Vzc1ZhcmlhYmxlcycpKTtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKCF2LnZhclR5cGUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdFZhcmlhYmxlVmFsdWVUeXBlJykpO1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoIXYucmVsYXRpb24pIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdFJlbGF0aW9uJykpO1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IHZhcmlhYmxlLmlkIHx8ICgoYSBhcyBWYXJpYWJsZVBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCAmJiAoYSBhcyBWYXJpYWJsZVBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCA9PT0gdmFyaWFibGUucGVyZm9ybWVySWQpKSk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0gPSB2YXJpYWJsZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZWRpdFN0YXRlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVIdW1hblBlcmZvcm1lcigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhcmlhYmxlLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gdmFyaWFibGUuaWQgfHwgKChhIGFzIFZhcmlhYmxlUGFydGljaXBhbnQpLnBlcmZvcm1lcklkICYmIChhIGFzIFZhcmlhYmxlUGFydGljaXBhbnQpLnBlcmZvcm1lcklkID09PSB2YXJpYWJsZS5wZXJmb3JtZXJJZCkpKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IHZhcmlhYmxlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyaWFibGUub3JkZXIgPSBpbmRleDtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkUG9zaXRpb25QZXJmb3JtZXIocG9zaXRpb25zOiBQb3NpdGlvblBhcnRpY2lwYW50W10pIHtcclxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKSB7XHJcbiAgICAgIGlmICghcG9zaXRpb24ucGVyZm9ybWVySWQpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UG9zaXRpb24nKSk7XHJcbiAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCghcG9zaXRpb24ub3JnVHlwZSB8fCBwb3NpdGlvbi5vcmdUeXBlID09IG51bGwpICYmIChwb3NpdGlvbi5pc1JlcXVpcmVkICYmIHBvc2l0aW9uLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSkge1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdE9yZ1R5cGUnKSk7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKCghcG9zaXRpb24ub3JnSWQgfHwgcG9zaXRpb24ub3JnSWQgPT0gbnVsbCkgJiYgKHBvc2l0aW9uLmlzUmVxdWlyZWQgJiYgcG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMScpKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQub3JnRmlsbCcpKTtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyAoMSlpZOS4gOiHtO+8jOS4uue8lui+keWyl+S9je+8m++8iDLvvIlwZXJmb3JtaWTkuIDoh7TvvIzmlrDlop7nmoTnlKjmiLfvvIzlspfkvY3lt7LlrZjlnKhcclxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LmZpbmRJbmRleChhID0+IHtcclxuICAgICAgICAgICAgICBpZiAoYS50eXBlICE9PSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNvbnN0IHAgPSBhIGFzIFBvc2l0aW9uUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChwLmlkID09PSBwb3NpdGlvbi5pZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKGggPT4gaC5vcmRlcikpKzE7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcG9zaXRpb24ub3JkZXIgPSBpbmRleDtcclxuICAgICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChhLnR5cGUgIT09ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgcCA9IGEgYXMgUG9zaXRpb25QYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgICByZXR1cm4gKHAuaWQgPT09IHBvc2l0aW9uLmlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBwb3NpdGlvbi5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkQ29tcG9uZW50UGVyZm9ybWVyKGNvbXBvbmVudDogQ29tcG9uZW50UGVyZm9ybWVyKSB7XHJcbiAgICBjb25zdCBjbXAgPSBuZXcgQ29tcG9uZW50UGFydGljaXBhbnQoKTtcclxuICAgIGNtcC5pZCA9IGNvbXBvbmVudC5pZDtcclxuICAgIGNtcC5tZXRhZGF0YUlkID0gY29tcG9uZW50Lm1ldGFkYXRhSWQ7XHJcbiAgICBjbXAubWV0aG9kQ29kZSA9IGNvbXBvbmVudC5tZXRob2RDb2RlO1xyXG4gICAgY21wLm1ldGhvZE5hbWUgPSBjb21wb25lbnQubWV0aG9kTmFtZTtcclxuICAgIGNtcC5uYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBjbXAuYWN0dWFsUGFyYW1ldGVycyA9IGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzO1xyXG4gICAgY21wLnR5cGUgPSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJztcclxuICAgIGNtcC5jb25kaXRpb24gPSBjb21wb25lbnQuY29uZGl0aW9uO1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gY21wLmlkKTtcclxuICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldID0gY21wO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbXAub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKGNtcCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IGNtcC5pZCk7XHJcbiAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IGNtcDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY21wLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChjbXApO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkUmVwb3J0aW5nTGluZVBlcmZvcm1lcihyZXBvcnRpbmdMaW5lOiBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQpIHtcclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlcG9ydGluZ1JlZmVyT2JqZWN0ID09PSAnZGVwdCcgJiYgIXJlcG9ydGluZ0xpbmUucmVmT3JnSWQpIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5yZWZPcmdJZE5vdE51bGwnKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nUmVmZXJPYmplY3QgIT09ICdkZXB0JyAmJiAhcmVwb3J0aW5nTGluZS5yZWZVc2VySWQgJiYgIXJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCkgeyAvLyDnlKjmiLflj4rlhbbku5bkurrlkZjmsYfmiqXlr7nosaHnsbvlnovvvIzlj4LnhafnlKjmiLflkozlj4LnhaflkZjlt6XkuI3og73lhajpg6jkuLrnqbpcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5yZWZVc2VySWROb3ROdWxsJykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZXBvcnRpbmdMaW5lLmlkKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXSA9IHJlcG9ydGluZ0xpbmU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHJlcG9ydGluZ0xpbmVzID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmlsdGVyKGggPT4gaC50eXBlID09PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCByIG9mIHJlcG9ydGluZ0xpbmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydGluZ0xpbmVEYXRhID0gciBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChyZXBvcnRpbmdMaW5lRGF0YS5yZXBvcnRpbmdMaW5lRGVmSWQgPT09IHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkICYmXHJcbiAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEuZGltZW5zaW9uID09PSByZXBvcnRpbmdMaW5lLmRpbWVuc2lvbiAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZlVzZXJJZCA9PT0gcmVwb3J0aW5nTGluZS5yZWZVc2VySWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZFbXBsb3llZUlkID09PSByZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZPcmdJZCA9PT0gcmVwb3J0aW5nTGluZS5yZWZPcmdJZFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlcERlZkNvbmZpZ3VyZWQnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lm1hcChoID0+IGgub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmVwb3J0aW5nTGluZS5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QucHVzaChyZXBvcnRpbmdMaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZXBvcnRpbmdMaW5lLmlkKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IHJlcG9ydGluZ0xpbmU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHJlcG9ydGluZ0xpbmVzID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmlsdGVyKGggPT4gaC50eXBlID09PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCByIG9mIHJlcG9ydGluZ0xpbmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydGluZ0xpbmVEYXRhID0gciBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChyZXBvcnRpbmdMaW5lRGF0YS5yZXBvcnRpbmdMaW5lRGVmSWQgPT09IHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkICYmXHJcbiAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEuZGltZW5zaW9uID09PSByZXBvcnRpbmdMaW5lLmRpbWVuc2lvbiAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZlVzZXJJZCA9PT0gcmVwb3J0aW5nTGluZS5yZWZVc2VySWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZFbXBsb3llZUlkID09PSByZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZPcmdJZCA9PT0gcmVwb3J0aW5nTGluZS5yZWZPcmdJZFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlcERlZkNvbmZpZ3VyZWQnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmVwb3J0aW5nTGluZS5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChyZXBvcnRpbmdMaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZE1hdHJpeFBlcmZvcm1lcihtYXRyaXg6IE1hdHJpeFBhcnRpY2lwYW50KSB7XHJcbiAgICBpZiAoIW1hdHJpeC5jb25kaXRpb25GaWVsZDEgJiYgIW1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiYgIW1hdHJpeC5jb25kaXRpb25GaWVsZDMpIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5hdExlYXN0T25lQ29uZGl0aW9uJykpO1xyXG4gICAgfSBlbHNlIGlmICghbWF0cml4LmRhdGFGaWVsZEFsaWFzKSB7XHJcbiAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGF0YUZpZWxkQWxpYXNOb3ROdWxsJykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSBtYXRyaXguaWQpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldID0gbWF0cml4O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBtYXRyaXhQYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maWx0ZXIoaCA9PiBoLnR5cGUgPT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nKTtcclxuICAgICAgICAgIGZvciAoY29uc3QgbSBvZiBtYXRyaXhQYXJ0aWNpcGFudHMpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF0cml4RGF0YSA9IG0gYXMgTWF0cml4UGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChtYXRyaXhEYXRhLm1hdHJpeERlZklkID09PSBtYXRyaXgubWF0cml4RGVmSWQgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMSA9PT0gbWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQyID09PSBtYXRyaXguY29uZGl0aW9uRmllbGQyICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDMgPT09IG1hdHJpeC5jb25kaXRpb25GaWVsZDMgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmRhdGFGaWVsZEFsaWFzID09PSBtYXRyaXguZGF0YUZpZWxkQWxpYXNcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5tYXRyaXhDb25maWd1cmVkJykpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5tYXAoaCA9PiBoLm9yZGVyKSkrMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG1hdHJpeC5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QucHVzaChtYXRyaXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IG1hdHJpeC5pZCk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0gPSBtYXRyaXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG1hdHJpeFBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihoID0+IGgudHlwZSA9PT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBtIG9mIG1hdHJpeFBhcnRpY2lwYW50cykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRyaXhEYXRhID0gbSBhcyBNYXRyaXhQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKG1hdHJpeERhdGEubWF0cml4RGVmSWQgPT09IG1hdHJpeC5tYXRyaXhEZWZJZCAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQxID09PSBtYXRyaXguY29uZGl0aW9uRmllbGQxICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDIgPT09IG1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMyA9PT0gbWF0cml4LmNvbmRpdGlvbkZpZWxkMyAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuZGF0YUZpZWxkQWxpYXMgPT09IG1hdHJpeC5kYXRhRmllbGRBbGlhc1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm1hdHJpeENvbmZpZ3VyZWQnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbWF0cml4Lm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKG1hdHJpeCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRBY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVyKGFjdGl2aXR5RXhlY3V0b3I6IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IGFjdGl2aXR5RXhlY3V0b3IuaWQgfHxcclxuICAgICAgICAoKGEgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5hY3Rpdml0eURlZklkICYmIChhIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkuYWN0aXZpdHlEZWZJZCA9PT0gYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZklkKSkpO1xyXG4gICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVIdW1hblBlcmZvcm1lcigpOyAvLyDlnKjnvJbovpHnirbmgIHkuIvphY3nva7kuobmtLvliqjlip7nkIbkurrlj4LkuI7ogIXvvIzlhYjlsIbpgInkuK3nmoTliKDpmaRcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0Lm1hcChoID0+IGgub3JkZXIpKSsxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2aXR5RXhlY3V0b3Iub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5wdXNoKGFjdGl2aXR5RXhlY3V0b3IpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gYWN0aXZpdHlFeGVjdXRvci5pZCB8fFxyXG4gICAgICAgICgoYSBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpLmFjdGl2aXR5RGVmSWQgJiYgKGEgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5hY3Rpdml0eURlZklkID09PSBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQpKSk7XHJcbiAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZVBvdGVudGlhbE93bmVyKCk7IC8vIOWcqOe8lui+keeKtuaAgeS4i+mFjee9ruS6hua0u+WKqOWKnueQhuS6uuWPguS4juiAhe+8jOWFiOWwhumAieS4reeahOWIoOmZpFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGluZGV4ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2goYWN0aXZpdHlFeGVjdXRvcik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgYWRkT3JnYW5pemF0aW9uUGFydGljaXBhbnQob3JnYW5pemF0aW9uOiBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgIGNvbnN0IG9yZ2FuaXphdGlvblBhcnRpY2lwYW50ID0gbmV3IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50KCk7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pZCA9IG9yZ2FuaXphdGlvbi5pZCB8fCBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC50eXBlID0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5jb25kaXRpb24gPSBvcmdhbml6YXRpb24uY29uZGl0aW9uO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQubmFtZSA9IG9yZ2FuaXphdGlvbi5uYW1lO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQuYWN0aW9uU2NvcGUgPSBvcmdhbml6YXRpb24uYWN0aW9uU2NvcGU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25MZXZlbCA9IG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25MZXZlbDtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbklkID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbklkO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uQ29kZSA9IG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25Db2RlO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTmFtZSA9IG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25OYW1lO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQuaW5jbHVkZUNoaWxkcmVuID0gb3JnYW5pemF0aW9uLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LnBhcmVudHNVbnRpbCA9IG9yZ2FuaXphdGlvbi5wYXJlbnRzVW50aWw7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC50YWcgPSBvcmdhbml6YXRpb24udGFnO1xyXG5cclxuICAgIGlmICh0aGlzLnR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maWx0ZXIocCA9PiBwLnR5cGUgIT09ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKTtcclxuICAgICAgbGV0IGluZGV4O1xyXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubWFwKGggPT4gaC5vcmRlcikpKzE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZGVyID0gaW5kZXg7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2gob3JnYW5pemF0aW9uUGFydGljaXBhbnQpO1xyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihwID0+IHAudHlwZSAhPT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICBsZXQgaW5kZXg7XHJcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgIH1cclxuICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChvcmdhbml6YXRpb25QYXJ0aWNpcGFudCk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVkaXRDYW5jZWwoKSB7XHJcbiAgICBpZiAodGhpcy5lZGl0RGlhbG9nKSB7XHJcbiAgICAgIHRoaXMuZWRpdERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZWRpdFBlcmZvcm1lcih0eXBlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZWRpdFN0YXRlID0gJ2VkaXQnO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIGxldCBzZWxlY3RlZFJvdztcclxuICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIHNlbGVjdGVkUm93ID0gdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgc2VsZWN0ZWRSb3cgPSB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdztcclxuICAgIH1cclxuICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdFBlcmZvcm1lcicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY3VyUGVyZm9ybWVyID0gc2VsZWN0ZWRSb3cuZGF0YTtcclxuICAgIGlmIChjdXJQZXJmb3JtZXIpIHtcclxuICAgICAgY29uc3QgYm94c2l6ZSA9IHRoaXMuYXR0cmlidXRlQm94U2l6ZShjdXJQZXJmb3JtZXIudHlwZSk7XHJcbiAgICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucGFydGljaXBhbnRTZWxlY3Rpb24nKSxcclxuICAgICAgICB3aWR0aDogYm94c2l6ZS53aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IGJveHNpemUuaGVpZ2h0LFxyXG4gICAgICAgIGJ1dHRvbnM6IHRoaXMuZWRpdEZvb3RlcixcclxuICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUGVyZm9ybWVyRWRpdENvbXBvbmVudCk7XHJcbiAgICAgIHRoaXMuY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lclR5cGUgPSBjdXJQZXJmb3JtZXIudHlwZTtcclxuICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLmVkaXRTdGF0ZSA9ICB0aGlzLmVkaXRTdGF0ZTtcclxuICAgICAgc3dpdGNoIChjdXJQZXJmb3JtZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvd2YvdjEuMC9yZXBvcnRpbmdMaW5lRGVmaW5pdGlvbnMvJyArIChjdXJQZXJmb3JtZXIgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50KS5yZXBvcnRpbmdMaW5lRGVmSWQ7XHJcbiAgICAgICAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGVmaW5pdGlvbkRlbGV0ZWQnKSk7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSHVtYW5QZXJmb3JtZXIoKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh0aGlzLmNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCB1cmxNYXRyaXggPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvbWF0cml4RGVmaW5pdGlvbi8nICsgKGN1clBlcmZvcm1lciBhcyBNYXRyaXhQYXJ0aWNpcGFudCkubWF0cml4RGVmSWQ7XHJcbiAgICAgICAgICB0aGlzLmh0dHAuZ2V0KHVybE1hdHJpeCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubWF0cml4RGVsZXRlZCcpKTtcclxuICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIdW1hblBlcmZvcm1lcigpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQb3RlbnRpYWxPd25lcigpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLkFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1clBlcmZvcm1lci50eXBlICE9PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicgJiZcclxuICAgICAgICBjdXJQZXJmb3JtZXIudHlwZSAhPT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHsgLy8g5rGH5oql5YWz57O75ZKM55+p6Zi15Y2V54us5aSE55CGXHJcbiAgICAgICAgdGhpcy5lZGl0RGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh0aGlzLmNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZW1vdmVQZXJmb3JtZXIodHlwZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBpZiAodGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdFBhcnRpY2lwYW50SW5mbycpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgocCA9PiBwLmlkID09PSB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0UGFydGljaXBhbnRJbmZvJykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGVhclBlcmZvcm1lcih0eXBlOiBzdHJpbmcpIHtcclxuICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0ID0gbmV3IEFycmF5KCk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZCkge1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlVXAodHlwZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93O1xyXG4gICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm5vUm93U2VsZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lciA9IHNlbGVjdGVkUm93LmRhdGE7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBwZXJmb3JtZXIuaWQpO1xyXG4gICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2ldLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXS5vcmRlciA9IHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2kgLSAxXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaS0xXS5vcmRlciA9IGluZGV4O1xyXG4gICAgICB0aGlzLnN3YXBBcnJheSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCwgaSwgaSAtIDEpO1xyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCk7XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdFJvdyhwZXJmb3JtZXIuaWQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQubm9Sb3dTZWxlY3RlZCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGVyZm9ybWVyID0gc2VsZWN0ZWRSb3cuZGF0YTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChjID0+IGMuaWQgPT09IHBlcmZvcm1lci5pZCk7XHJcbiAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldLm9yZGVyID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaSAtIDFdLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpLTFdLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgIHRoaXMuc3dhcEFycmF5KHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LCBpLCBpIC0gMSk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0Um93KHBlcmZvcm1lci5pZCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgbW92ZURvd24odHlwZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93O1xyXG4gICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm5vUm93U2VsZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lciA9IHNlbGVjdGVkUm93LmRhdGE7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBwZXJmb3JtZXIuaWQpO1xyXG4gICAgICBpZiAoaSA9PT0gdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QubGVuZ3RoLTEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3RbaV0ub3JkZXIgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdFtpICsgMV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0W2krMV0ub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5zd2FwQXJyYXkodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QsIGksIGkgKyAxKTtcclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RSb3cocGVyZm9ybWVyLmlkLCB0cnVlKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93O1xyXG4gICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm5vUm93U2VsZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lciA9IHNlbGVjdGVkUm93LmRhdGE7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBwZXJmb3JtZXIuaWQpO1xyXG4gICAgICBpZiAoaSA9PT0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoLTEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0ub3JkZXIgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpICsgMV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2krMV0ub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5zd2FwQXJyYXkodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QsIGksIGkgKyAxKTtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RSb3cocGVyZm9ybWVyLmlkLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3dhcEFycmF5KGFycjogQXJyYXk8YW55PiwgaTE6IG51bWJlciwgaTI6IG51bWJlcik6IEFycmF5PGFueT4ge1xyXG4gICAgYXJyW2kxXSA9IGFyci5zcGxpY2UoaTIsIDEsIGFycltpMV0pWzBdO1xyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcblxyXG4gIHJlbW92ZUh1bWFuUGVyZm9ybWVyKCkge1xyXG4gICAgaWYgKHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3Quc3BsaWNlKGksIDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdERlZmF1bHRIYW5kbGVyJykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlUG90ZW50aWFsT3duZXIoKSB7XHJcbiAgICBpZiAodGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5zcGxpY2UoaSwgMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0cG90ZW50aWFsdEhhbmRsZXInKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFVzZXJQZXJmb3JtZXJEZXNjcmlwdGlvbih1c2VyUGVyZm9ybWVyOiBVc2VyUGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgaWYgKHVzZXJQZXJmb3JtZXIudGFnID09PSAnZXhwcmVzc2lvbicpIHtcclxuICAgICAgcmV0dXJuIHVzZXJQZXJmb3JtZXIucGVyZm9ybWVySWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodXNlclBlcmZvcm1lci5vcmdOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5vcmcnKSArIHVzZXJQZXJmb3JtZXIub3JnTmFtZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VmFyaWFibGVQZXJmb3JtZXJEZXNjcmlwdGlvbih2YXJpYWJsZVBlcmZvcm1lcjogVmFyaWFibGVQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBpZiAodmFyaWFibGVQZXJmb3JtZXIudGFnID09PSAnZXhwcmVzc2lvbicpIHtcclxuICAgICAgcmV0dXJuIHZhcmlhYmxlUGVyZm9ybWVyLnZhclZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQb3NpdGlvblBlcmZvcm1lckRlc2NyaXB0aW9uKHBvc2l0aW9uOiBQb3NpdGlvblBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2VuZSA9PT0gJ2luU3VpdGUnKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHBvc2l0aW9uLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSB7XHJcbiAgICAgIGlmIChwb3NpdGlvbi5vcmdJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucG9zaXRpb25UeXBlMScpICsgcG9zaXRpb24ub3JnSWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wb3NpdGlvblR5cGUyJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMCcpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wb3NpdGlvblR5cGUzJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENvbXBvbmVudFBlcmZvcm1lckRlc2NyaXB0aW9uKHBvc2l0aW9uOiBDb21wb25lbnRQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBsZXQgZGVzID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNvbXAnKSArIHBvc2l0aW9uLm5hbWVcclxuICAgICsgdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBhcmFtZXRlcnMnKTtcclxuICAgIGlmIChwb3NpdGlvbi5hY3R1YWxQYXJhbWV0ZXJzICYmIHBvc2l0aW9uLmFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBwb3NpdGlvbi5hY3R1YWxQYXJhbWV0ZXJzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgZGVzICs9IGAke3AuY29kZX3vvJoke3AudmFsdWV977yMYDtcclxuICAgICAgfSk7XHJcbiAgICAgIGRlcyA9IGRlcy5zdWJzdHJpbmcoMCwgZGVzLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG4gICAgZGVzICs9ICd9JztcclxuICAgIHJldHVybiBkZXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFJlcG9ydGluZ0xpbmVQZXJmb3JtZXJEZXNjcmlwdGlvbihyZXBvcnRpbmdMaW5lOiBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZiAocmVwb3J0aW5nTGluZS5yZWZVc2VySWQpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZmVyZW5jZVBlcnNvbicpICsgcmVwb3J0aW5nTGluZS5yZWZVc2VySWQ7XHJcbiAgICB9XHJcbiAgICBpZiAocmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5yZWZlcmVuY2VQZXJzb24nKSArIHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZDtcclxuICAgIH1cclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZk9yZ0lkKSB7XHJcbiAgICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCkge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGDvvIxgO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpIHtcclxuICAgICAgICBkZXNjcmlwdGlvbiArPSBg77yMYDtcclxuICAgICAgfVxyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVmZXJlbmNlT3JnYW5pemF0aW9uJykgKyByZXBvcnRpbmdMaW5lLnJlZk9yZ0lkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRNYXRyaXhQZXJmb3JtZXJEZXNjcmlwdGlvbihtYXRyaXg6IE1hdHJpeFBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xyXG4gICAgaWYgKG1hdHJpeC5jb25kaXRpb25GaWVsZDEpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNvbmRpdGlvbjEnKSArIG1hdHJpeC5jb25kaXRpb25GaWVsZFRleHQxICsgYO+8jGA7XHJcbiAgICB9XHJcbiAgICBpZiAobWF0cml4LmNvbmRpdGlvbkZpZWxkMikge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29uZGl0aW9uMicpICsgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDIgKyBg77yMYDtcclxuICAgIH1cclxuICAgIGlmIChtYXRyaXguY29uZGl0aW9uRmllbGQzKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jb25kaXRpb24zJykgKyBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MyArIGDvvIxgO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hdHJpeC5kYXRhRmllbGRBbGlhcykge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGF0YScpICsgbWF0cml4LmRhdGFGaWVsZEFsaWFzICsgYO+8jGA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVzY3JpcHRpb24uc2xpY2UoMCwgZGVzY3JpcHRpb24ubGVuZ3RoIC0gMSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVkaXRDb25kaXRvbihlOiBhbnkpIHtcclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgY29udGV4dCA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmFkZENvbnRleHQoY29udGV4dCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KGUuaW5zdGFuY2UudmFsdWUpO1xyXG4gICAgdGhpcy5leHByLnNldEVkaXRQYXR0ZXJuKEV4cHJFZGl0TW9kZS5Db25kaXRpb25hbCk7IC8vIOm7mOiupOaJk+W8gOeugOaYk+ihqOi+vuW8j+e8lui+keWZqFxyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGNvbmQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZih0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZCAmJiB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdyAmJiB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhKSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5maW5kKGggPT4gaC5pZCA9PT0gdGhpcy5odW1hblBlcmZvcm1lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGVtcC5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMucG90ZW50aWFsT3duZXJHcmlkICYmIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93ICYmIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmQoaCA9PiBoLmlkID09PSB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKTtcclxuICAgICAgICB0ZW1wLmNvbmRpdGlvbiA9IGNvbmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoY29uZCk7XHJcbiAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaHVtYW5QZXJmb3JtZXJDb3B5VG9Qb3RlbnRpYWxPd25lcigpIHtcclxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCAmJiB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpIHtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2goLi4udGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgICAgdGhpcy5odW1hblBlcmZvcm1lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpO1xyXG4gICAgICBpZiAodGhpcy5wb3RlbnRpYWxPd25lckdyaWQpIHtcclxuICAgICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcG90ZW50aWFsT3duZXJDb3B5VG9IdW1hblBlcmZvcm1lcigpIHtcclxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCAmJiB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QpIHtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lmh1bWFuUGVyZm9ybWVyTGlzdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lcnMgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maWx0ZXIocCA9PiBwLnR5cGUgIT09ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKTtcclxuICAgICAgaWYgKHBlcmZvcm1lcnMgJiYgcGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8g5q2k5aSE55u05o6lcHVzaOS8muWvvOiHtG9yZGVy6YeN5aSNLOmcgOimgemHjeaWsOaOkuW6j1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0LnB1c2goLi4ucGVyZm9ybWVycyk7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5odW1hblBlcmZvcm1lckxpc3QuZm9yRWFjaCgoaHVtYW4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICBodW1hbi5vcmRlciA9IGluZGV4ICsgMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihwID0+IHAudHlwZSA9PT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgICAgICBpZiAodGhpcy5wb3RlbnRpYWxPd25lckdyaWQpIHtcclxuICAgICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgR2V0T3JnYW5pemF0aW9uVHlwZSgpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYXV0aGZpZWxkcy9nbG9iYWxhdXRoZmllbGRzJztcclxuICAgIHRoaXMuaHR0cC5nZXQodXJsKVxyXG4gICAgICAuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHRoaXMuZGVzaWduZXJVSVN0YXRlLm9yZ1R5cGVDb2xsZWN0aW9uID0gZGF0YS5tYXAoZCA9PiAoeyB2YWx1ZTogZC5pZCwgdGV4dDogZC5uYW1lIH0pKSk7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDkuI3lkIzlj4LkuI7ogIXpgInmi6nnlYzpnaLnmoTlsLrlr7ggMjAyMy03LTVcclxuICBwcml2YXRlIGF0dHJpYnV0ZUJveFNpemUoYm94VHlwZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBib3hzaXplID0ge1xyXG4gICAgICB3aWR0aDogNzYwLFxyXG4gICAgICBoZWlnaHQ6IDUxMlxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChib3hUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gNDU1O1xyXG4gICAgICAgIHJldHVybiBib3hzaXplO1xyXG4gICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzIwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplO1xyXG4gICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgYm94c2l6ZS53aWR0aCA9IDc2MDtcclxuICAgICAgICBib3hzaXplLmhlaWdodCA9IDQyMDtcclxuICAgICAgICByZXR1cm4gYm94c2l6ZTs7XHJcbiAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA1MTI7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3ODA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA0MjA7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA1MTI7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzIwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplOztcclxuICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzYwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplOztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudENvbnZlcnRlciBpbXBsZW1lbnRzIFR5cGVDb252ZXJ0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBsb2NhbGVQaXBlOiBXZkxvY2FsZVBpcGVcclxuICApIHsgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YTogUGFydGljaXBhbnRJbmZvKTogc3RyaW5nIHtcclxuICAgIGlmIChkYXRhICYmIGRhdGEuaHVtYW5QZXJmb3JtZXJMaXN0ICYmIGRhdGEuaHVtYW5QZXJmb3JtZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQucGFydGljaXBhbnQuc2V0XCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGRhdGEgJiYgZGF0YS5wb3RlbnRpYWxPd25lckxpc3QgJiYgZGF0YS5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcImNvbXBvbmVudC5wYXJ0aWNpcGFudC5zZXRcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmlzQWxsU2NvcGUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQucGFydGljaXBhbnQuc2V0XCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJjb21wb25lbnQucGFydGljaXBhbnQubm90U2V0XCIpO1xyXG4gIH1cclxufVxyXG4iXX0=