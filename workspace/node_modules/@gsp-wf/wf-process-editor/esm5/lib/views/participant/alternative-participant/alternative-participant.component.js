/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, ComponentFactoryResolver, EventEmitter, Inject, Injector, Input, LOCALE_ID, Optional, Output, TemplateRef, ViewChild } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { DatagridComponent } from '@farris/ui-datagrid';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { MessagerService } from '@farris/ui-messager';
import { BsModalService } from '@farris/ui-modal';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { ProcessDesignerUIState } from '../../../app/process-designer.uistate';
import { ProcessDeUtil } from '../../../domain/process-de-util';
import { PerformerEditComponent } from '../../performer/views/performer-edit/performer-edit.component';
import { ComponentParticipant, OrganizationParticipant, ParticipantInfo } from '../participant.info';
import { ParticipantUIState } from '../participant.uistate';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../i18n/pipe/wf-process-editor-locale.pipe';
var AlternativeParticipantComponent = /** @class */ (function () {
    function AlternativeParticipantComponent(designerUIState, uistate, resolver, injector, modalService, message, expr, http, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.designerUIState = designerUIState;
        this.uistate = uistate;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.expr = expr;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.nodeType = 'notifyActivity';
        this.isClose = true;
        this.participant = new ParticipantInfo();
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        // 编辑状态，用于区分是新增还是编辑  new | edit
        this.type = 'potentialOwner';
        this.operatorCollection = [
            { text: this.localePipe.transform('component.participant.currentUser'), value: 'currentUser' },
            { text: this.localePipe.transform('component.participant.procInstCreator'), value: 'procInstCreator' }
        ];
        this.columns = [
            {
                field: 'order', width: 25, title: this.localePipe.transform('component.participant.order'),
                editor: {
                    type: EditorTypes.NUMBERBOX, options: {}
                },
            }, {
                field: 'type', width: 50, title: this.localePipe.transform('component.participant.type'),
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            }, {
                field: 'performerName', width: 50, title: this.localePipe.transform('component.participant.performerName'), showTips: true, formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                function (v, d, i) {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return d.performerName;
                        case 'wf.VariableParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.PositionParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.ComponentParticipantExpression':
                            return ((/** @type {?} */ (d))).name;
                        case 'wf.ReportingLineParticipantExpression':
                            return ((/** @type {?} */ (d))).reportingLineDefName + '-' + ((/** @type {?} */ (d))).dimension;
                        case 'wf.MatrixParticipantExpression':
                            return ((/** @type {?} */ (d))).matrixDefName + '-' + ((/** @type {?} */ (d))).dataFieldAlias;
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName;
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'description', width: 100, title: this.localePipe.transform('component.participant.description'), showTips: true,
                formatter: (/**
                 * @param {?} v
                 * @param {?} d
                 * @param {?} i
                 * @return {?}
                 */
                function (v, d, i) {
                    switch (d.type) {
                        case 'wf.UserParticipantExpression':
                            return _this.getUserPerformerDescription(d);
                        case 'wf.VariableParticipantExpression':
                            return _this.getVariablePerformerDescription(d);
                        case 'wf.PositionParticipantExpression':
                            return _this.getPositionPerformerDescription(d);
                        case 'wf.ComponentParticipantExpression':
                            return _this.getComponentPerformerDescription(d);
                        case 'wf.ReportingLineParticipantExpression':
                            return _this.getReportingLinePerformerDescription(d);
                        case 'wf.MatrixParticipantExpression':
                            return _this.getMatrixPerformerDescription(d);
                        case 'wf.ActivityExecutorParticipantExpression':
                            return ((/** @type {?} */ (d))).performerName;
                        case 'wf.OrganizationParticipantExpression':
                            return ((/** @type {?} */ (d))).organizationName + '，且' + (((/** @type {?} */ (d))).includeChildren ? '包含下级' : '不包含下级');
                        default:
                            return '';
                    }
                })
            },
            {
                field: 'condition', width: 60, title: this.localePipe.transform('component.participant.condition'), showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.editConditon(e);
                        }),
                    }
                }
            }
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.GetOrganizationType();
    }
    /**
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.nodeType = this.editorParams.nodeType;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.switchChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            this.clearPerformer('potentialOwner');
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.assignStrategyChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        // this.preAssignStrategy = data;
        if (data === 'ALL') {
            this.participant.isAllScope = true;
            this.clearPerformer('potentialOwner');
        }
        else {
            this.participant.isAllScope = false;
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.isEnable = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            this.participant.isAllScope = true;
            this.clearPerformer('potentialOwner');
        }
        else {
            this.participant.isAllScope = false;
        }
    };
    /**
     * @param {?} performerType
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addPerformer = /**
     * @param {?} performerType
     * @param {?} type
     * @return {?}
     */
    function (performerType, type) {
        this.editState = 'new';
        this.type = type;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.performerType = performerType;
        /** @type {?} */
        var boxsize = this.attributeBoxSize(performerType);
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform('component.participant.participantSelection'),
            width: boxsize.width,
            height: boxsize.height,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
        // this.dropDownEl.close();
        if (this.dropDownE2) {
            this.dropDownE2.close();
        }
    };
    /**
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.editOK = /**
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b;
        this.isClose = true;
        if (this.compRef) {
            /** @type {?} */
            var re = this.compRef.instance.getPerformers();
            if (re.userPerformers && re.userPerformers.length > 0) {
                try {
                    for (var _c = tslib_1.__values(re.userPerformers), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var p = _d.value;
                        this.addUserPerformer(p);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            if (re.variable && re.variable !== null && re.variable.performerId) {
                this.addvariablePerformer(re.variable);
            }
            // 2023-7-28 组织岗支持多选
            if (re.positions && re.positions.length > 0) {
                this.addPositionPerformer(re.positions);
            }
            if (re.component && re.component.metadataId && re.component.methodCode) {
                this.addComponentPerformer(re.component);
            }
            if (re.reportingLine && re.reportingLine.reportingLineDefId && re.reportingLine.dimension) {
                this.addReportingLinePerformer(re.reportingLine);
            }
            if (re.matrix && re.matrix.matrixDefId) {
                this.addMatrixPerformer(re.matrix);
            }
            if (re.activityExecutorPerformers && re.activityExecutorPerformers.length > 0) {
                try {
                    for (var _e = tslib_1.__values(re.activityExecutorPerformers), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var a = _f.value;
                        this.addActivityExecutorPerformer(a);
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
            if (re.organizationParticipant) {
                this.addOrganizationParticipant(re.organizationParticipant);
            }
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
        // 编辑完成后刷新两个组件
        // this.humanPerformerGrid.refresh();
        this.potentialOwnerGrid.refresh();
    };
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addUserPerformer = /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    function (userPerformer) {
        if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === userPerformer.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === userPerformer.performerId)); }));
            if (i > -1) {
                // this.participant.potentialOwnerList[i] = userPerformer;
            }
            else {
                if (this.editState === 'edit') {
                    this.removePotentialOwner();
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                userPerformer.order = index;
                this.participant.potentialOwnerList.push(userPerformer);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @private
     * @param {?} variable
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addvariablePerformer = /**
     * @private
     * @param {?} variable
     * @return {?}
     */
    function (variable) {
        /** @type {?} */
        var v = variable;
        if (!v || !v.varValue) {
            this.message.info(this.localePipe.transform('component.participant.selectProcessVariables'));
            this.isClose = false;
        }
        else if (!v.varType) {
            this.message.info(this.localePipe.transform('component.participant.selectVariableValueType'));
            this.isClose = false;
        }
        else if (!v.relation) {
            this.message.info(this.localePipe.transform('component.participant.selectRelation'));
            this.isClose = false;
        }
        else {
            if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return (a.id === variable.id || (((/** @type {?} */ (a))).performerId && ((/** @type {?} */ (a))).performerId === variable.performerId)); }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = variable;
                }
                else {
                    if (this.editState === 'edit') {
                        this.removePotentialOwner();
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    variable.order = index;
                    this.participant.potentialOwnerList.push(variable);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} positions
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addPositionPerformer = /**
     * @private
     * @param {?} positions
     * @return {?}
     */
    function (positions) {
        var e_3, _a;
        var _loop_1 = function (position) {
            if (!position.performerId) {
                this_1.message.info(this_1.localePipe.transform('component.participant.selectPosition'));
                this_1.isClose = false;
            }
            else {
                if ((!position.orgType || position.orgType == null) && (position.isRequired && position.positionType === '1')) {
                    this_1.message.info(this_1.localePipe.transform('component.participant.selectOrgType'));
                    this_1.isClose = false;
                }
                else if ((!position.orgId || position.orgId == null) && (position.isRequired && position.positionType === '1')) {
                    this_1.message.info(this_1.localePipe.transform('component.participant.orgFill'));
                    this_1.isClose = false;
                }
                else {
                    // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                    if (this_1.type === 'potentialOwner') {
                        /** @type {?} */
                        var i = this_1.participant.potentialOwnerList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) {
                            if (a.type !== 'wf.PositionParticipantExpression') {
                                return false;
                            }
                            /** @type {?} */
                            var p = (/** @type {?} */ (a));
                            return (p.id === position.id);
                        }));
                        if (i > -1) {
                            this_1.participant.potentialOwnerList[i] = position;
                        }
                        else {
                            /** @type {?} */
                            var index = void 0;
                            if (this_1.participant.potentialOwnerList.length > 0) {
                                index = Math.max.apply(Math, tslib_1.__spread(this_1.participant.potentialOwnerList.map((/**
                                 * @param {?} p
                                 * @return {?}
                                 */
                                function (p) { return p.order; })))) + 1;
                            }
                            else {
                                index = 1;
                            }
                            position.order = index;
                            this_1.participant.potentialOwnerList.push(position);
                        }
                        this_1.potentialOwnerGrid.loadData(this_1.participant.potentialOwnerList);
                    }
                }
            }
        };
        var this_1 = this;
        try {
            for (var positions_1 = tslib_1.__values(positions), positions_1_1 = positions_1.next(); !positions_1_1.done; positions_1_1 = positions_1.next()) {
                var position = positions_1_1.value;
                _loop_1(position);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (positions_1_1 && !positions_1_1.done && (_a = positions_1.return)) _a.call(positions_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
    };
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addComponentPerformer = /**
     * @private
     * @param {?} component
     * @return {?}
     */
    function (component) {
        /** @type {?} */
        var cmp = new ComponentParticipant();
        cmp.id = component.id;
        cmp.metadataId = component.metadataId;
        cmp.methodCode = component.methodCode;
        cmp.methodName = component.methodName;
        cmp.name = component.name;
        cmp.actualParameters = component.actualParameters;
        cmp.type = 'wf.ComponentParticipantExpression';
        cmp.condition = component.condition;
        if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === cmp.id; }));
            if (i > -1) {
                this.participant.potentialOwnerList[i] = cmp;
            }
            else {
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                cmp.order = index;
                this.participant.potentialOwnerList.push(cmp);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addReportingLinePerformer = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        var e_4, _a;
        if (reportingLine.reportingReferObject === 'dept' && !reportingLine.refOrgId) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refOrgIdNotNull'));
        }
        else if (reportingLine.reportingReferObject !== 'dept' && !reportingLine.refUserId && !reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.refUserIdNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === reportingLine.id; }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = reportingLine;
                }
                else {
                    /** @type {?} */
                    var reportingLines = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.ReportingLineParticipantExpression'; }));
                    try {
                        for (var reportingLines_1 = tslib_1.__values(reportingLines), reportingLines_1_1 = reportingLines_1.next(); !reportingLines_1_1.done; reportingLines_1_1 = reportingLines_1.next()) {
                            var r = reportingLines_1_1.value;
                            /** @type {?} */
                            var reportingLineData = (/** @type {?} */ (r));
                            if (reportingLineData.reportingLineDefId === reportingLine.reportingLineDefId &&
                                reportingLineData.dimension === reportingLine.dimension &&
                                reportingLineData.refUserId === reportingLine.refUserId &&
                                reportingLineData.refEmployeeId === reportingLine.refEmployeeId &&
                                reportingLineData.refOrgId === reportingLine.refOrgId) {
                                this.message.error(this.localePipe.transform('component.participant.repDefConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (reportingLines_1_1 && !reportingLines_1_1.done && (_a = reportingLines_1.return)) _a.call(reportingLines_1);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    reportingLine.order = index;
                    this.participant.potentialOwnerList.push(reportingLine);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addMatrixPerformer = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        var e_5, _a;
        if (!matrix.conditionField1 && !matrix.conditionField2 && !matrix.conditionField3) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.atLeastOneCondition'));
        }
        else if (!matrix.dataFieldAlias) {
            this.isClose = false;
            this.message.info(this.localePipe.transform('component.participant.dataFieldAliasNotNull'));
        }
        else {
            this.isClose = true;
            if (this.type === 'potentialOwner') {
                /** @type {?} */
                var i = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === matrix.id; }));
                if (i > -1) {
                    this.participant.potentialOwnerList[i] = matrix;
                }
                else {
                    /** @type {?} */
                    var matrixParticipants = this.participant.potentialOwnerList.filter((/**
                     * @param {?} h
                     * @return {?}
                     */
                    function (h) { return h.type === 'wf.MatrixParticipantExpression'; }));
                    try {
                        for (var matrixParticipants_1 = tslib_1.__values(matrixParticipants), matrixParticipants_1_1 = matrixParticipants_1.next(); !matrixParticipants_1_1.done; matrixParticipants_1_1 = matrixParticipants_1.next()) {
                            var m = matrixParticipants_1_1.value;
                            /** @type {?} */
                            var matrixData = (/** @type {?} */ (m));
                            if (matrixData.matrixDefId === matrix.matrixDefId &&
                                matrixData.conditionField1 === matrix.conditionField1 &&
                                matrixData.conditionField2 === matrix.conditionField2 &&
                                matrixData.conditionField3 === matrix.conditionField3 &&
                                matrixData.dataFieldAlias === matrix.dataFieldAlias) {
                                this.message.error(this.localePipe.transform('component.participant.matrixConfigured'));
                                return;
                            }
                        }
                    }
                    catch (e_5_1) { e_5 = { error: e_5_1 }; }
                    finally {
                        try {
                            if (matrixParticipants_1_1 && !matrixParticipants_1_1.done && (_a = matrixParticipants_1.return)) _a.call(matrixParticipants_1);
                        }
                        finally { if (e_5) throw e_5.error; }
                    }
                    /** @type {?} */
                    var index = void 0;
                    if (this.participant.potentialOwnerList.length > 0) {
                        index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.order; })))) + 1;
                    }
                    else {
                        index = 1;
                    }
                    matrix.order = index;
                    this.participant.potentialOwnerList.push(matrix);
                }
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
        }
    };
    /**
     * @private
     * @param {?} activityExecutor
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addActivityExecutorPerformer = /**
     * @private
     * @param {?} activityExecutor
     * @return {?}
     */
    function (activityExecutor) {
        if (this.type === 'potentialOwner') {
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return (a.id === activityExecutor.id ||
                (((/** @type {?} */ (a))).activityDefId && ((/** @type {?} */ (a))).activityDefId === activityExecutor.activityDefId)); }));
            if (i < 0) {
                if (this.editState === 'edit') {
                    this.removePotentialOwner(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                }
                /** @type {?} */
                var index = void 0;
                if (this.participant.potentialOwnerList.length > 0) {
                    index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.order; })))) + 1;
                }
                else {
                    index = 1;
                }
                activityExecutor.order = index;
                this.participant.potentialOwnerList.push(activityExecutor);
            }
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @param {?} organization
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.addOrganizationParticipant = /**
     * @param {?} organization
     * @return {?}
     */
    function (organization) {
        /** @type {?} */
        var organizationParticipant = new OrganizationParticipant();
        organizationParticipant.id = organization.id || ProcessDeUtil.GenerateElementId();
        organizationParticipant.type = 'wf.OrganizationParticipantExpression';
        organizationParticipant.condition = organization.condition;
        organizationParticipant.name = organization.name;
        organizationParticipant.actionScope = organization.actionScope;
        organizationParticipant.organizationLevel = organization.organizationLevel;
        organizationParticipant.organizationId = organization.organizationId;
        organizationParticipant.organizationCode = organization.organizationCode;
        organizationParticipant.organizationName = organization.organizationName;
        organizationParticipant.includeChildren = organization.includeChildren;
        organizationParticipant.parentsUntil = organization.parentsUntil;
        organizationParticipant.tag = organization.tag;
        if (this.type === 'potentialOwner') {
            this.participant.potentialOwnerList = this.participant.potentialOwnerList.filter((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.type !== 'wf.OrganizationParticipantExpression'; }));
            /** @type {?} */
            var index = void 0;
            if (this.participant.potentialOwnerList.length > 0) {
                index = Math.max.apply(Math, tslib_1.__spread(this.participant.potentialOwnerList.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.order; })))) + 1;
            }
            else {
                index = 1;
            }
            organizationParticipant.order = index;
            this.participant.potentialOwnerList.push(organizationParticipant);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.editCancel = /**
     * @return {?}
     */
    function () {
        if (this.editDialog) {
            this.editDialog.close();
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.editPerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        this.editState = 'edit';
        this.type = type;
        /** @type {?} */
        var selectedRow;
        if (type === 'potentialOwner') {
            selectedRow = this.potentialOwnerGrid.selectedRow;
        }
        if (!selectedRow) {
            this.message.info(this.localePipe.transform('component.participant.selectPerformer'));
            return;
        }
        /** @type {?} */
        var curPerformer = selectedRow.data;
        if (curPerformer) {
            /** @type {?} */
            var boxsize = this.attributeBoxSize(curPerformer.type);
            /** @type {?} */
            var modalConfig_1 = {
                title: this.localePipe.transform('component.participant.participantSelection'),
                width: boxsize.width,
                height: boxsize.height,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            this.compRef.instance.performerType = curPerformer.type;
            this.compRef.instance.editState = this.editState;
            switch (curPerformer.type) {
                case 'wf.PositionParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.UserParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.VariableParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.VariableParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    var url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + ((/** @type {?} */ (curPerformer))).reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error(_this.localePipe.transform('component.participant.definitionDeleted'));
                            if (type === 'potentialOwner') {
                                _this.removePotentialOwner();
                            }
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipantExpression',
                        value: curPerformer
                    };
                    /** @type {?} */
                    var urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + ((/** @type {?} */ (curPerformer))).matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error(_this.localePipe.transform('component.participant.matrixDeleted'));
                            if (type === 'potentialOwner') {
                                _this.removePotentialOwner();
                            }
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ActivityExecutorParticipantExpression',
                        value: curPerformer
                    };
                    break;
                case 'wf.OrganizationParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.OrganizationParticipantExpression',
                        value: curPerformer
                    };
                    break;
            }
            if (curPerformer.type !== 'wf.ReportingLineParticipantExpression' &&
                curPerformer.type !== 'wf.MatrixParticipantExpression') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig_1);
            }
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.removePerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        if (type === 'potentialOwner') {
            if (this.potentialOwnerGrid.selectedRow) {
                this.potentialOwnerGrid.endCellEdit();
                /** @type {?} */
                var index = this.participant.potentialOwnerList.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
                this.participant.potentialOwnerList.splice(index, 1);
                this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            }
            else {
                this.message.info(this.localePipe.transform('component.participant.selectParticipantInfo'));
            }
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.clearPerformer = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'potentialOwner') {
            this.participant.potentialOwnerList = new Array();
        }
        // this.humanPerformerGrid.loadData(this.participant.humanPerformerList);
        if (this.potentialOwnerGrid) {
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.moveUp = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'potentialOwner') {
            /** @type {?} */
            var selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_1 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_1.id; }));
            if (i === 0) {
                return;
            }
            /** @type {?} */
            var index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i - 1].order;
            this.participant.potentialOwnerList[i - 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i - 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer_1.id, true);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.moveDown = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        if (type === 'potentialOwner') {
            /** @type {?} */
            var selectedRow = this.potentialOwnerGrid.selectedRow;
            if (!selectedRow) {
                this.message.info(this.localePipe.transform('component.participant.noRowSelected'));
                return;
            }
            /** @type {?} */
            var performer_2 = selectedRow.data;
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.id === performer_2.id; }));
            if (i === this.participant.potentialOwnerList.length - 1) {
                return;
            }
            /** @type {?} */
            var index = this.participant.potentialOwnerList[i].order;
            this.participant.potentialOwnerList[i].order = this.participant.potentialOwnerList[i + 1].order;
            this.participant.potentialOwnerList[i + 1].order = index;
            this.swapArray(this.participant.potentialOwnerList, i, i + 1);
            this.potentialOwnerGrid.loadData(this.participant.potentialOwnerList);
            this.potentialOwnerGrid.selectRow(performer_2.id, true);
        }
    };
    /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.swapArray = /**
     * @private
     * @param {?} arr
     * @param {?} i1
     * @param {?} i2
     * @return {?}
     */
    function (arr, i1, i2) {
        arr[i1] = arr.splice(i2, 1, arr[i1])[0];
        return arr;
    };
    /**
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.removePotentialOwner = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.potentialOwnerGrid.selectedRow) {
            this.potentialOwnerGrid.endCellEdit();
            /** @type {?} */
            var i = this.participant.potentialOwnerList.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
            this.participant.potentialOwnerList.splice(i, 1);
        }
        else {
            this.message.info(this.localePipe.transform('component.participant.selectpotentialtHandler'));
        }
    };
    /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getUserPerformerDescription = /**
     * @private
     * @param {?} userPerformer
     * @return {?}
     */
    function (userPerformer) {
        if (userPerformer.tag === 'expression') {
            return userPerformer.performerId;
        }
        else {
            if (userPerformer.orgName) {
                return this.localePipe.transform('component.participant.org') + userPerformer.orgName;
            }
            else {
                return '';
            }
        }
    };
    /**
     * @private
     * @param {?} variablePerformer
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getVariablePerformerDescription = /**
     * @private
     * @param {?} variablePerformer
     * @return {?}
     */
    function (variablePerformer) {
        if (variablePerformer.tag === 'expression') {
            return variablePerformer.varValue;
        }
    };
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getPositionPerformerDescription = /**
     * @private
     * @param {?} position
     * @return {?}
     */
    function (position) {
        if (this.designerUIState.scene === 'inSuite') {
            return null;
        }
        if (position.positionType === '1') {
            if (position.orgId) {
                return this.localePipe.transform('component.participant.positionType1') + position.orgId;
            }
            else {
                return this.localePipe.transform('component.participant.positionType2');
            }
        }
        else if (position.positionType === '0') {
            return this.localePipe.transform('component.participant.positionType3');
        }
    };
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getComponentPerformerDescription = /**
     * @private
     * @param {?} position
     * @return {?}
     */
    function (position) {
        /** @type {?} */
        var des = this.localePipe.transform('component.participant.comp') + position.name
            + this.localePipe.transform('component.participant.parameters');
        if (position.actualParameters && position.actualParameters.length > 0) {
            position.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                des += p.code + "\uFF1A" + p.value + "\uFF0C";
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getReportingLinePerformerDescription = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        /** @type {?} */
        var description = '';
        if (reportingLine.refUserId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refUserId;
        }
        if (reportingLine.refEmployeeId) {
            description += this.localePipe.transform('component.participant.referencePerson') + reportingLine.refEmployeeId;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += "\uFF0C";
            }
            if (reportingLine.refEmployeeId) {
                description += "\uFF0C";
            }
            description += this.localePipe.transform('component.participant.referenceOrganization') + reportingLine.refOrgId;
        }
        return description;
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.getMatrixPerformerDescription = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        /** @type {?} */
        var description = '';
        if (matrix.conditionField1) {
            description += this.localePipe.transform('component.participant.condition1') + matrix.conditionFieldText1 + "\uFF0C";
        }
        if (matrix.conditionField2) {
            description += this.localePipe.transform('component.participant.condition2') + matrix.conditionFieldText2 + "\uFF0C";
        }
        if (matrix.conditionField3) {
            description += this.localePipe.transform('component.participant.condition3') + matrix.conditionFieldText3 + "\uFF0C";
        }
        if (matrix.dataFieldAlias) {
            description += this.localePipe.transform('component.participant.data') + matrix.dataFieldAlias + "\uFF0C";
        }
        return description.slice(0, description.length - 1);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.editConditon = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        var e_6, _a, e_7, _b, e_8, _c, e_9, _d;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.designerUIState.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_6) throw e_6.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _g = tslib_1.__values(this.designerUIState.subActivityContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    _loop_2(variable);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.designerUIState.activityComponentContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_3(variable);
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_d = context_1.return)) _d.call(context_1);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        function (cond) {
            if (_this.potentialOwnerGrid && _this.potentialOwnerGrid.selectedRow && _this.potentialOwnerGrid.selectedRow.data) {
                /** @type {?} */
                var temp = _this.participant.potentialOwnerList.find((/**
                 * @param {?} h
                 * @return {?}
                 */
                function (h) { return h.id === _this.potentialOwnerGrid.selectedRow.data.id; }));
                temp.condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.GetOrganizationType = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return ({ value: d.id, text: d.name }); })); }));
    };
    // 构造不同参与者选择界面的尺寸 2023-7-5
    // 构造不同参与者选择界面的尺寸 2023-7-5
    /**
     * @private
     * @param {?} boxType
     * @return {?}
     */
    AlternativeParticipantComponent.prototype.attributeBoxSize = 
    // 构造不同参与者选择界面的尺寸 2023-7-5
    /**
     * @private
     * @param {?} boxType
     * @return {?}
     */
    function (boxType) {
        /** @type {?} */
        var boxsize = {
            width: 760,
            height: 512
        };
        switch (boxType) {
            case 'wf.PositionParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 455;
                return boxsize;
            case 'wf.UserParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
            case 'wf.VariableParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ReportingLineParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.MatrixParticipantExpression':
                boxsize.width = 780;
                boxsize.height = 420;
                return boxsize;
                ;
            case 'wf.ComponentParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 512;
                return boxsize;
                ;
            case 'wf.ActivityExecutorParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 320;
                return boxsize;
                ;
            case 'wf.OrganizationParticipantExpression':
                boxsize.width = 760;
                boxsize.height = 360;
                return boxsize;
                ;
        }
    };
    AlternativeParticipantComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-alternative-participant',
                    template: "<div class=\"f-page-main d-flex flex-column farris-overflow-y-auto farris-overflow-x-auto\" style=\"height: 300px\">\r\n  <div class=\"f-page-header\">\r\n    <div class=\"farris-group-wrap\">\r\n      <div class=\"form-group farris-form-group\">\r\n        <label class=\"col-form-label\" style=\"width: 4.9rem\">\r\n          <span class=\"farris-label-text\">{{'component.orgPotentialOwner.limit'|wfLocale}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap ml-1\">\r\n          <farris-switch [(ngModel)]=\"participant.isAllScope\" name=\"enable\" (valueChange)=\"isEnable($event)\"></farris-switch>\r\n        </div>\r\n        <div class=\"f-toolbar last-div farris-form-controls-inline\" [ngStyle]=\"{'visibility' : participant.isAllScope ? 'visible' : 'hidden'}\">\r\n          <div class=\"btn-group mr-2\"  fDropdown #dropdownE2=\"fDropdown\" [autoRectify]=\"true\">\r\n            <farris-button class=\"dropdown-toggle\" fDropdownToggle [type]=\"'link'\">\r\n              {{'component.participant.new'|wfLocale}}\r\n            </farris-button>\r\n            <div class=\"dropdown-menu\" fDropdownMenu>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression','potentialOwner')\"><span>{{'component.participant.user'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression','potentialOwner')\"><span>{{'component.participant.variable'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression','potentialOwner')\"><span>{{designerUIState.scene==='inSuite'?(('component.participant.role'|wfLocale)):('component.participant.position'|wfLocale)}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression','potentialOwner')\"><span>{{'component.participant.reportingLine'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression','potentialOwner')\"><span>{{'component.participant.activityExecutor'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression','potentialOwner')\"><span>{{'component.participant.matrix'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression','potentialOwner')\"><span>{{'component.participant.component'|wfLocale}}</span></li>\r\n              <li class=\"dropdown-item\" (click)=\"addPerformer('wf.OrganizationParticipantExpression','potentialOwner')\"><span>{{'component.participant.organization'|wfLocale}}\r\n              </span></li>\r\n            </div>\r\n          </div>\r\n          <farris-button  [type]=\"'link'\" (click)=\"editPerformer('potentialOwner')\">{{'component.participant.editPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"removePerformer('potentialOwner')\">{{'component.participant.removePerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"clearPerformer('potentialOwner')\">{{'component.participant.clearPerformer'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveUp('potentialOwner')\">{{'component.participant.moveUp'|wfLocale}}</farris-button>\r\n          <farris-button  [type]=\"'link'\" (click)=\"moveDown('potentialOwner')\">{{'component.participant.moveDown'|wfLocale}}</farris-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"f-utils-fill farris-overflow-y-auto\">\r\n    <farris-datagrid #potentialOwnerGrid class=\"f-component-grid\" [columns]=\"columns\" [data]=\"participant.potentialOwnerList\" #defaultPerformerGrid [idField]=\"'id'\" [showLineNumber]=\"false\"\r\n      [striped]=\"true\" [showCheckbox]=\"false\" [pagination]=\"false\" [fit]=\"true\" [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\"\r\n      [multiSelect]=\"false\">\r\n    </farris-datagrid>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">{{'component.participant.clickCancel'|wfLocale}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">{{'component.participant.clickOK'|wfLocale}}</button>\r\n</ng-template>\r\n",
                    providers: [
                        ParticipantUIState,
                        WfLocalePipe
                    ],
                    styles: [".container{display:flex;justify-content:space-between}.last-div{margin-left:auto}"]
                }] }
    ];
    /** @nocollapse */
    AlternativeParticipantComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: ParticipantUIState },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: MessagerService },
        { type: ExpressionService },
        { type: HttpService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    AlternativeParticipantComponent.propDecorators = {
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        dropDownE2: [{ type: ViewChild, args: ['dropdownE2',] }],
        editFooter: [{ type: ViewChild, args: ['editFooter',] }],
        potentialOwnerGrid: [{ type: ViewChild, args: ['potentialOwnerGrid',] }],
        editorParams: [{ type: Input }]
    };
    return AlternativeParticipantComponent;
}());
export { AlternativeParticipantComponent };
if (false) {
    /** @type {?} */
    AlternativeParticipantComponent.prototype.closeModal;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.submitModal;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.modalFooter;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.dropDownE2;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.editFooter;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.potentialOwnerGrid;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.editorParams;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.nodeType;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.editDialog;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.compRef;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.isClose;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.participant;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.editState;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.type;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.operatorCollection;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.columns;
    /** @type {?} */
    AlternativeParticipantComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    AlternativeParticipantComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWx0ZXJuYXRpdmUtcGFydGljaXBhbnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wYXJ0aWNpcGFudC9hbHRlcm5hdGl2ZS1wYXJ0aWNpcGFudC9hbHRlcm5hdGl2ZS1wYXJ0aWNpcGFudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLHdCQUF3QixFQUFnQixZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFVLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6TSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDekQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBYyxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BGLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBRS9FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUVoRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwrREFBK0QsQ0FBQztBQUV2RyxPQUFPLEVBQStCLG9CQUFvQixFQUFxQix1QkFBdUIsRUFBRSxlQUFlLEVBQXVGLE1BQU0scUJBQXFCLENBQUM7QUFDMU8sT0FBTyxFQUFFLGtCQUFrQixFQUFF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Q0FBQSxBQXIxQkQsSUFxMUJDO1NBNTBCWSwrQkFBK0I7OztJQUUxQyxxREFBK0M7O0lBQy9DLHNEQUFnRDs7SUFFaEQsc0RBQTZEOztJQUU3RCxxREFBd0Q7O0lBQ3hELHFEQUFzRDs7SUFFdEQsNkRBQXVFOztJQUV2RSx1REFBZ0M7O0lBRWhDLG1EQUFnRTs7SUFFaEUscURBQXVCOztJQUN2QixrREFBOEM7O0lBQzlDLGtEQUFlOztJQUVmLHNEQUFxRDs7SUFDckQsb0RBQWtCOztJQUVsQiwrQ0FBd0I7O0lBRXhCLDZEQUdFOztJQUVGLGtEQTJFSzs7SUFHSCwwREFBOEM7Ozs7O0lBQzlDLGtEQUFtQzs7Ozs7SUFDbkMsbURBQTBDOzs7OztJQUMxQyxtREFBMEI7Ozs7O0lBQzFCLHVEQUFvQzs7Ozs7SUFDcEMsa0RBQWdDOzs7OztJQUNoQywrQ0FBK0I7Ozs7O0lBQy9CLCtDQUF5Qjs7Ozs7SUFDekIsOENBQTBDOzs7OztJQUMxQyxtREFBMkM7Ozs7O0lBQzNDLG9EQUFpRDs7Ozs7SUFDakQscURBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDb21wb25lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbmplY3RvciwgSW5wdXQsIExPQ0FMRV9JRCwgT25Jbml0LCBPcHRpb25hbCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IEZEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktZHJvcGRvd24nO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgQnNNb2RhbFJlZiwgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgVHlwZUNvbnZlcnRlciB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlLCBFeHByZXNzaW9uU2VydmljZSwgSW5qZWN0ZWRUeXBlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vZG9tYWluL2VudGl0aWVzL29yZ2FuaXphdGlvbi1wYXJ0aWNpcGFudC1leHByZXNzaW9uJztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXIgfSBmcm9tICcuLi8uLi9wZXJmb3JtZXIvdmlld3MvY29tcG9uZW50LXBlcmZvcm1lci9jb21wb25lbnQtcGVyZm9ybWVyLmVudGl0eSc7XHJcbmltcG9ydCB7IFBlcmZvcm1lckVkaXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9wZXJmb3JtZXIvdmlld3MvcGVyZm9ybWVyLWVkaXQvcGVyZm9ybWVyLWVkaXQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQXNzaWduQ29uZmlnIH0gZnJvbSAnLi4vYXNzaWduLWNvbmZpZyc7XHJcbmltcG9ydCB7IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCwgQ29tcG9uZW50UGFydGljaXBhbnQsIE1hdHJpeFBhcnRpY2lwYW50LCBPcmdhbml6YXRpb25QYXJ0aWNpcGFudCwgUGFydGljaXBhbnRJbmZvLCBQb3NpdGlvblBhcnRpY2lwYW50LCBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQsIFVzZXJQYXJ0aWNpcGFudCwgVmFyaWFibGVQYXJ0aWNpcGFudCB9IGZyb20gJy4uL3BhcnRpY2lwYW50LmluZm8nO1xyXG5pbXBvcnQgeyBQYXJ0aWNpcGFudFVJU3RhdGUgfSBmcm9tICcuLi9wYXJ0aWNpcGFudC51aXN0YXRlJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnd2YtYWx0ZXJuYXRpdmUtcGFydGljaXBhbnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hbHRlcm5hdGl2ZS1wYXJ0aWNpcGFudC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYWx0ZXJuYXRpdmUtcGFydGljaXBhbnQuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgUGFydGljaXBhbnRVSVN0YXRlLFxyXG4gICAgIFdmTG9jYWxlUGlwZVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEFsdGVybmF0aXZlUGFydGljaXBhbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgLy8gQFZpZXdDaGlsZCgnZHJvcGRvd25FbCcpIGRyb3BEb3duRWw6IEZEcm9wZG93bkRpcmVjdGl2ZTtcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkUyJykgZHJvcERvd25FMjogRkRyb3Bkb3duRGlyZWN0aXZlO1xyXG4gIEBWaWV3Q2hpbGQoJ2VkaXRGb290ZXInKSBlZGl0Rm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIC8vIEBWaWV3Q2hpbGQoJ2h1bWFuUGVyZm9ybWVyR3JpZCcpIGh1bWFuUGVyZm9ybWVyR3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgncG90ZW50aWFsT3duZXJHcmlkJykgcG90ZW50aWFsT3duZXJHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgQElucHV0KCkgZWRpdG9yUGFyYW1zOiBhbnkgPSB7fTtcclxuXHJcbiAgbm9kZVR5cGU6ICd1c2VyQWN0aXZpdHknIHwgJ25vdGlmeUFjdGl2aXR5JyAgPSAnbm90aWZ5QWN0aXZpdHknO1xyXG5cclxuICBlZGl0RGlhbG9nOiBCc01vZGFsUmVmO1xyXG4gIGNvbXBSZWY6IENvbXBvbmVudFJlZjxQZXJmb3JtZXJFZGl0Q29tcG9uZW50PjtcclxuICBpc0Nsb3NlID0gdHJ1ZTtcclxuXHJcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50SW5mbyA9IG5ldyBQYXJ0aWNpcGFudEluZm8oKTtcclxuICBlZGl0U3RhdGUgPSAnbmV3JzsgLy8g57yW6L6R54q25oCB77yM55So5LqO5Yy65YiG5piv5paw5aKe6L+Y5piv57yW6L6RICBuZXcgfCBlZGl0XHJcblxyXG4gIHR5cGUgPSAncG90ZW50aWFsT3duZXInO1xyXG5cclxuICBvcGVyYXRvckNvbGxlY3Rpb24gPSBbXHJcbiAgICB7IHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jdXJyZW50VXNlcicpLCB2YWx1ZTogJ2N1cnJlbnRVc2VyJyB9LFxyXG4gICAgeyB0ZXh0OiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucHJvY0luc3RDcmVhdG9yJyksIHZhbHVlOiAncHJvY0luc3RDcmVhdG9yJyB9XHJcbiAgXTtcclxuXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHtcclxuICAgICAgZmllbGQ6ICdvcmRlcicsIHdpZHRoOiAyNSwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5vcmRlcicpLFxyXG4gICAgICBlZGl0b3I6IHtcclxuICAgICAgICB0eXBlOiBFZGl0b3JUeXBlcy5OVU1CRVJCT1gsIG9wdGlvbnM6IHtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9LCB7XHJcbiAgICBmaWVsZDogJ3R5cGUnLCB3aWR0aDogNTAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQudHlwZScpLFxyXG4gICAgZm9ybWF0dGVyOiB7XHJcbiAgICAgIHR5cGU6ICdlbnVtJyxcclxuICAgICAgb3B0aW9uczogeyB2YWx1ZUZpZWxkOiAndmFsdWUnLCB0ZXh0RmllbGQ6ICd0ZXh0JywgZGF0YTogdGhpcy51aXN0YXRlLnR5cGVDb2xsZWN0aW9uIH1cclxuICAgIH1cclxuICAgIH0sIHtcclxuICAgIGZpZWxkOiAncGVyZm9ybWVyTmFtZScsIHdpZHRoOiA1MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wZXJmb3JtZXJOYW1lJyksIHNob3dUaXBzOiB0cnVlLCBmb3JtYXR0ZXI6ICh2LCBkLCBpKSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoZC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gZC5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBWYXJpYWJsZVBhcnRpY2lwYW50KS5uYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiAoZCBhcyBQb3NpdGlvblBhcnRpY2lwYW50KS5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgQ29tcG9uZW50UGFydGljaXBhbnQpLm5hbWU7XHJcbiAgICAgICAgY2FzZSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50KS5yZXBvcnRpbmdMaW5lRGVmTmFtZSArICctJyArIChkIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkuZGltZW5zaW9uO1xyXG4gICAgICAgIGNhc2UgJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgTWF0cml4UGFydGljaXBhbnQpLm1hdHJpeERlZk5hbWUgKyAnLScgKyAoZCBhcyBNYXRyaXhQYXJ0aWNpcGFudCkuZGF0YUZpZWxkQWxpYXM7XHJcbiAgICAgICAgY2FzZSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnQpLm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZmllbGQ6ICdkZXNjcmlwdGlvbicsIHdpZHRoOiAxMDAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuZGVzY3JpcHRpb24nKSwgc2hvd1RpcHM6IHRydWUsXHJcbiAgICBmb3JtYXR0ZXI6ICh2LCBkLCBpKSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoZC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyUGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFyaWFibGVQZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvblBlcmZvcm1lckRlc2NyaXB0aW9uKGQpO1xyXG4gICAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb21wb25lbnRQZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlcG9ydGluZ0xpbmVQZXJmb3JtZXJEZXNjcmlwdGlvbihkKTtcclxuICAgICAgICBjYXNlICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWF0cml4UGVyZm9ybWVyRGVzY3JpcHRpb24oZCk7XHJcbiAgICAgICAgY2FzZSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5wZXJmb3JtZXJOYW1lO1xyXG4gICAgICAgIGNhc2UgJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICByZXR1cm4gKGQgYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnQpLm9yZ2FuaXphdGlvbk5hbWUgKyAn77yM5LiUJyArICgoZCBhcyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudCkuaW5jbHVkZUNoaWxkcmVuID8gJ+WMheWQq+S4i+e6pycgOiAn5LiN5YyF5ZCr5LiL57qnJyk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgZmllbGQ6ICdjb25kaXRpb24nLCB3aWR0aDogNjAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29uZGl0aW9uJyksIHNob3dUaXBzOiB0cnVlLFxyXG4gICAgZWRpdG9yOiB7XHJcbiAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNsaWNrSGFuZGxlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgIHRoaXMuZWRpdENvbmRpdG9uKGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIH1dO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBkZXNpZ25lclVJU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIHVpc3RhdGU6IFBhcnRpY2lwYW50VUlTdGF0ZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGV4cHI6IEV4cHJlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwU2VydmljZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBJbmplY3QoTE9DQUxFX0lEKSBwcml2YXRlIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBASW5qZWN0KFdGX0xBTkdfUkVTT1VSQ0VTKSBwcml2YXRlIHJlc291cmNlczogYW55LFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBsb2NhbGVQaXBlOiBXZkxvY2FsZVBpcGUsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSB0aGlzLmxvY2FsZVBpcGUgfHwgbmV3IFdmTG9jYWxlUGlwZShsb2NhbGVJZCwgcmVzb3VyY2VzKTtcclxuICAgIHRoaXMuR2V0T3JnYW5pemF0aW9uVHlwZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLm5vZGVUeXBlID0gdGhpcy5lZGl0b3JQYXJhbXMubm9kZVR5cGU7XHJcbiAgfVxyXG5cclxuICBzd2l0Y2hDaGFuZ2UoZGF0YTogYm9vbGVhbikge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5jbGVhclBlcmZvcm1lcigncG90ZW50aWFsT3duZXInKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzc2lnblN0cmF0ZWd5Q2hhbmdlKGRhdGEpIHtcclxuICAgIC8vIHRoaXMucHJlQXNzaWduU3RyYXRlZ3kgPSBkYXRhO1xyXG4gICAgaWYoZGF0YSA9PT0gJ0FMTCcpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5pc0FsbFNjb3BlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jbGVhclBlcmZvcm1lcigncG90ZW50aWFsT3duZXInKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5pc0FsbFNjb3BlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0VuYWJsZShkYXRhKSB7XHJcbiAgICBpZihkYXRhKSB7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaXNBbGxTY29wZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuY2xlYXJQZXJmb3JtZXIoJ3BvdGVudGlhbE93bmVyJyk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQuaXNBbGxTY29wZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkUGVyZm9ybWVyKHBlcmZvcm1lclR5cGU6IHN0cmluZywgdHlwZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmVkaXRTdGF0ZSA9ICduZXcnO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQZXJmb3JtZXJFZGl0Q29tcG9uZW50KTtcclxuICAgIHRoaXMuY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXJUeXBlID0gcGVyZm9ybWVyVHlwZTtcclxuICAgIGNvbnN0IGJveHNpemUgPSB0aGlzLmF0dHJpYnV0ZUJveFNpemUocGVyZm9ybWVyVHlwZSk7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wYXJ0aWNpcGFudFNlbGVjdGlvbicpLFxyXG4gICAgICB3aWR0aDogYm94c2l6ZS53aWR0aCxcclxuICAgICAgaGVpZ2h0OiBib3hzaXplLmhlaWdodCxcclxuICAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAvLyB0aGlzLmRyb3BEb3duRWwuY2xvc2UoKTtcclxuICAgIGlmICh0aGlzLmRyb3BEb3duRTIpIHtcclxuICAgICAgdGhpcy5kcm9wRG93bkUyLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlZGl0T0soKSB7XHJcbiAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuY29tcFJlZikge1xyXG4gICAgICBjb25zdCByZSA9IHRoaXMuY29tcFJlZi5pbnN0YW5jZS5nZXRQZXJmb3JtZXJzKCk7XHJcbiAgICAgIGlmIChyZS51c2VyUGVyZm9ybWVycyAmJiByZS51c2VyUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBwIG9mIHJlLnVzZXJQZXJmb3JtZXJzKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFVzZXJQZXJmb3JtZXIocCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZS52YXJpYWJsZSAmJiByZS52YXJpYWJsZSAhPT0gbnVsbCAmJiByZS52YXJpYWJsZS5wZXJmb3JtZXJJZCkge1xyXG4gICAgICAgIHRoaXMuYWRkdmFyaWFibGVQZXJmb3JtZXIocmUudmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIDIwMjMtNy0yOCDnu4Tnu4flspfmlK/mjIHlpJrpgIlcclxuICAgICAgaWYgKHJlLnBvc2l0aW9ucyAmJiByZS5wb3NpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuYWRkUG9zaXRpb25QZXJmb3JtZXIocmUucG9zaXRpb25zKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUuY29tcG9uZW50ICYmIHJlLmNvbXBvbmVudC5tZXRhZGF0YUlkICYmIHJlLmNvbXBvbmVudC5tZXRob2RDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnRQZXJmb3JtZXIocmUuY29tcG9uZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUucmVwb3J0aW5nTGluZSAmJiByZS5yZXBvcnRpbmdMaW5lLnJlcG9ydGluZ0xpbmVEZWZJZCAmJiByZS5yZXBvcnRpbmdMaW5lLmRpbWVuc2lvbikge1xyXG4gICAgICAgIHRoaXMuYWRkUmVwb3J0aW5nTGluZVBlcmZvcm1lcihyZS5yZXBvcnRpbmdMaW5lKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmUubWF0cml4ICYmIHJlLm1hdHJpeC5tYXRyaXhEZWZJZCkge1xyXG4gICAgICAgIHRoaXMuYWRkTWF0cml4UGVyZm9ybWVyKHJlLm1hdHJpeCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzICYmIHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGEgb2YgcmUuYWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcnMpIHtcclxuICAgICAgICAgIHRoaXMuYWRkQWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcihhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgdGhpcy5hZGRPcmdhbml6YXRpb25QYXJ0aWNpcGFudChyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVkaXREaWFsb2cgJiYgdGhpcy5pc0Nsb3NlKSB7XHJcbiAgICAgIHRoaXMuZWRpdERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSAgIFxyXG4gICAgLy8g57yW6L6R5a6M5oiQ5ZCO5Yi35paw5Lik5Liq57uE5Lu2XHJcbiAgICAvLyB0aGlzLmh1bWFuUGVyZm9ybWVyR3JpZC5yZWZyZXNoKCk7XHJcbiAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5yZWZyZXNoKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFVzZXJQZXJmb3JtZXIodXNlclBlcmZvcm1lcjogVXNlclBhcnRpY2lwYW50KSB7XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gdXNlclBlcmZvcm1lci5pZCB8fCAoKGEgYXMgVXNlclBhcnRpY2lwYW50KS5wZXJmb3JtZXJJZCAmJiAoYSBhcyBVc2VyUGFydGljaXBhbnQpLnBlcmZvcm1lcklkID09PSB1c2VyUGVyZm9ybWVyLnBlcmZvcm1lcklkKSkpO1xyXG4gICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgLy8gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0gPSB1c2VyUGVyZm9ybWVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZVBvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaCh1c2VyUGVyZm9ybWVyKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZHZhcmlhYmxlUGVyZm9ybWVyKHZhcmlhYmxlOiBWYXJpYWJsZVBhcnRpY2lwYW50KSB7XHJcbiAgICBjb25zdCB2ID0gdmFyaWFibGU7XHJcbiAgICBpZiAoIXYgfHwgIXYudmFyVmFsdWUpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnNlbGVjdFByb2Nlc3NWYXJpYWJsZXMnKSk7XHJcbiAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICghdi52YXJUeXBlKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RWYXJpYWJsZVZhbHVlVHlwZScpKTtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKCF2LnJlbGF0aW9uKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RSZWxhdGlvbicpKTtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IChhLmlkID09PSB2YXJpYWJsZS5pZCB8fCAoKGEgYXMgVmFyaWFibGVQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgJiYgKGEgYXMgVmFyaWFibGVQYXJ0aWNpcGFudCkucGVyZm9ybWVySWQgPT09IHZhcmlhYmxlLnBlcmZvcm1lcklkKSkpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gdmFyaWFibGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXJpYWJsZS5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRQb3NpdGlvblBlcmZvcm1lcihwb3NpdGlvbnM6IFBvc2l0aW9uUGFydGljaXBhbnRbXSkge1xyXG4gICAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnMpIHtcclxuICAgICAgaWYgKCFwb3NpdGlvbi5wZXJmb3JtZXJJZCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQb3NpdGlvbicpKTtcclxuICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoKCFwb3NpdGlvbi5vcmdUeXBlIHx8IHBvc2l0aW9uLm9yZ1R5cGUgPT0gbnVsbCkgJiYgKHBvc2l0aW9uLmlzUmVxdWlyZWQgJiYgcG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMScpKSB7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuc2VsZWN0T3JnVHlwZScpKTtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKCFwb3NpdGlvbi5vcmdJZCB8fCBwb3NpdGlvbi5vcmdJZCA9PSBudWxsKSAmJiAocG9zaXRpb24uaXNSZXF1aXJlZCAmJiBwb3NpdGlvbi5wb3NpdGlvblR5cGUgPT09ICcxJykpIHtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5vcmdGaWxsJykpO1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vICgxKWlk5LiA6Ie077yM5Li657yW6L6R5bKX5L2N77yb77yIMu+8iXBlcmZvcm1pZOS4gOiHtO+8jOaWsOWinueahOeUqOaIt++8jOWyl+S9jeW3suWtmOWcqFxyXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChhLnR5cGUgIT09ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgcCA9IGEgYXMgUG9zaXRpb25QYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgICByZXR1cm4gKHAuaWQgPT09IHBvc2l0aW9uLmlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXSA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBwb3NpdGlvbi5vcmRlciA9IGluZGV4O1xyXG4gICAgICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkQ29tcG9uZW50UGVyZm9ybWVyKGNvbXBvbmVudDogQ29tcG9uZW50UGVyZm9ybWVyKSB7XHJcbiAgICBjb25zdCBjbXAgPSBuZXcgQ29tcG9uZW50UGFydGljaXBhbnQoKTtcclxuICAgIGNtcC5pZCA9IGNvbXBvbmVudC5pZDtcclxuICAgIGNtcC5tZXRhZGF0YUlkID0gY29tcG9uZW50Lm1ldGFkYXRhSWQ7XHJcbiAgICBjbXAubWV0aG9kQ29kZSA9IGNvbXBvbmVudC5tZXRob2RDb2RlO1xyXG4gICAgY21wLm1ldGhvZE5hbWUgPSBjb21wb25lbnQubWV0aG9kTmFtZTtcclxuICAgIGNtcC5uYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBjbXAuYWN0dWFsUGFyYW1ldGVycyA9IGNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzO1xyXG4gICAgY21wLnR5cGUgPSAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJztcclxuICAgIGNtcC5jb25kaXRpb24gPSBjb21wb25lbnQuY29uZGl0aW9uO1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gY21wLmlkKTtcclxuICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gY21wO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbXAub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKGNtcCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRSZXBvcnRpbmdMaW5lUGVyZm9ybWVyKHJlcG9ydGluZ0xpbmU6IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkge1xyXG4gICAgaWYgKHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nUmVmZXJPYmplY3QgPT09ICdkZXB0JyAmJiAhcmVwb3J0aW5nTGluZS5yZWZPcmdJZCkge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZk9yZ0lkTm90TnVsbCcpKTtcclxuICAgIH0gZWxzZSBpZiAocmVwb3J0aW5nTGluZS5yZXBvcnRpbmdSZWZlck9iamVjdCAhPT0gJ2RlcHQnICYmICFyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJiAhcmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKSB7IC8vIOeUqOaIt+WPiuWFtuS7luS6uuWRmOaxh+aKpeWvueixoeexu+Wei++8jOWPgueFp+eUqOaIt+WSjOWPgueFp+WRmOW3peS4jeiDveWFqOmDqOS4uuepulxyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZlVzZXJJZE5vdE51bGwnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlcG9ydGluZ0xpbmUuaWQpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldID0gcmVwb3J0aW5nTGluZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZXMgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maWx0ZXIoaCA9PiBoLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgcmVwb3J0aW5nTGluZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZURhdGEgPSByIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKHJlcG9ydGluZ0xpbmVEYXRhLnJlcG9ydGluZ0xpbmVEZWZJZCA9PT0gcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQgJiZcclxuICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5kaW1lbnNpb24gPT09IHJlcG9ydGluZ0xpbmUuZGltZW5zaW9uICYmXHJcbiAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmVXNlcklkID09PSByZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZkVtcGxveWVlSWQgPT09IHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCAmJlxyXG4gICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZk9yZ0lkID09PSByZXBvcnRpbmdMaW5lLnJlZk9yZ0lkXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVwRGVmQ29uZmlndXJlZCcpKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5tYXgoLi4udGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubWFwKHAgPT4gcC5vcmRlcikpKzE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKHJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkTWF0cml4UGVyZm9ybWVyKG1hdHJpeDogTWF0cml4UGFydGljaXBhbnQpIHtcclxuICAgIGlmICghbWF0cml4LmNvbmRpdGlvbkZpZWxkMSAmJiAhbWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJiAhbWF0cml4LmNvbmRpdGlvbkZpZWxkMykge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmF0TGVhc3RPbmVDb25kaXRpb24nKSk7XHJcbiAgICB9IGVsc2UgaWYgKCFtYXRyaXguZGF0YUZpZWxkQWxpYXMpIHtcclxuICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhRmllbGRBbGlhc05vdE51bGwnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy50eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IG1hdHJpeC5pZCk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0gPSBtYXRyaXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG1hdHJpeFBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihoID0+IGgudHlwZSA9PT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBtIG9mIG1hdHJpeFBhcnRpY2lwYW50cykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRyaXhEYXRhID0gbSBhcyBNYXRyaXhQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKG1hdHJpeERhdGEubWF0cml4RGVmSWQgPT09IG1hdHJpeC5tYXRyaXhEZWZJZCAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQxID09PSBtYXRyaXguY29uZGl0aW9uRmllbGQxICYmXHJcbiAgICAgICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDIgPT09IG1hdHJpeC5jb25kaXRpb25GaWVsZDIgJiZcclxuICAgICAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMyA9PT0gbWF0cml4LmNvbmRpdGlvbkZpZWxkMyAmJlxyXG4gICAgICAgICAgICAgIG1hdHJpeERhdGEuZGF0YUZpZWxkQWxpYXMgPT09IG1hdHJpeC5kYXRhRmllbGRBbGlhc1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm1hdHJpeENvbmZpZ3VyZWQnKSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsZXQgaW5kZXg7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kZXggPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbWF0cml4Lm9yZGVyID0gaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKG1hdHJpeCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRBY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVyKGFjdGl2aXR5RXhlY3V0b3I6IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGEgPT4gKGEuaWQgPT09IGFjdGl2aXR5RXhlY3V0b3IuaWQgfHxcclxuICAgICAgICAoKGEgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KS5hY3Rpdml0eURlZklkICYmIChhIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCkuYWN0aXZpdHlEZWZJZCA9PT0gYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZklkKSkpO1xyXG4gICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVQb3RlbnRpYWxPd25lcigpOyAvLyDlnKjnvJbovpHnirbmgIHkuIvphY3nva7kuobmtLvliqjlip7nkIbkurrlj4LkuI7ogIXvvIzlhYjlsIbpgInkuK3nmoTliKDpmaRcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBpbmRleCA9IE1hdGgubWF4KC4uLnRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lm1hcChwID0+IHAub3JkZXIpKSsxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2aXR5RXhlY3V0b3Iub3JkZXIgPSBpbmRleDtcclxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5wdXNoKGFjdGl2aXR5RXhlY3V0b3IpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhZGRPcmdhbml6YXRpb25QYXJ0aWNpcGFudChvcmdhbml6YXRpb246IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgY29uc3Qgb3JnYW5pemF0aW9uUGFydGljaXBhbnQgPSBuZXcgT3JnYW5pemF0aW9uUGFydGljaXBhbnQoKTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmlkID0gb3JnYW5pemF0aW9uLmlkIHx8IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LnR5cGUgPSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJztcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmNvbmRpdGlvbiA9IG9yZ2FuaXphdGlvbi5jb25kaXRpb247XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5uYW1lID0gb3JnYW5pemF0aW9uLm5hbWU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5hY3Rpb25TY29wZSA9IG9yZ2FuaXphdGlvbi5hY3Rpb25TY29wZTtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbkxldmVsID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb24ub3JnYW5pemF0aW9uSWQ7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25Db2RlID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkNvZGU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lID0gb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pbmNsdWRlQ2hpbGRyZW4gPSBvcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQucGFyZW50c1VudGlsID0gb3JnYW5pemF0aW9uLnBhcmVudHNVbnRpbDtcclxuICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50LnRhZyA9IG9yZ2FuaXphdGlvbi50YWc7XHJcblxyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbHRlcihwID0+IHAudHlwZSAhPT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICBsZXQgaW5kZXg7XHJcbiAgICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBNYXRoLm1heCguLi50aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5tYXAocCA9PiBwLm9yZGVyKSkrMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IDE7XHJcbiAgICAgIH1cclxuICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JkZXIgPSBpbmRleDtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QucHVzaChvcmdhbml6YXRpb25QYXJ0aWNpcGFudCk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVkaXRDYW5jZWwoKSB7XHJcbiAgICBpZiAodGhpcy5lZGl0RGlhbG9nKSB7XHJcbiAgICAgIHRoaXMuZWRpdERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZWRpdFBlcmZvcm1lcih0eXBlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZWRpdFN0YXRlID0gJ2VkaXQnO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIGxldCBzZWxlY3RlZFJvdztcclxuICAgIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgIHNlbGVjdGVkUm93ID0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3c7XHJcbiAgICB9XHJcbiAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQZXJmb3JtZXInKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGN1clBlcmZvcm1lciA9IHNlbGVjdGVkUm93LmRhdGE7XHJcbiAgICBpZiAoY3VyUGVyZm9ybWVyKSB7XHJcbiAgICAgIGNvbnN0IGJveHNpemUgPSB0aGlzLmF0dHJpYnV0ZUJveFNpemUoY3VyUGVyZm9ybWVyLnR5cGUpO1xyXG4gICAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBhcnRpY2lwYW50U2VsZWN0aW9uJyksXHJcbiAgICAgICAgd2lkdGg6IGJveHNpemUud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0OiBib3hzaXplLmhlaWdodCxcclxuICAgICAgICBidXR0b25zOiB0aGlzLmVkaXRGb290ZXIsXHJcbiAgICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFBlcmZvcm1lckVkaXRDb21wb25lbnQpO1xyXG4gICAgICB0aGlzLmNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXJUeXBlID0gY3VyUGVyZm9ybWVyLnR5cGU7XHJcbiAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5lZGl0U3RhdGUgPSAgdGhpcy5lZGl0U3RhdGU7XHJcbiAgICAgIHN3aXRjaCAoY3VyUGVyZm9ybWVyLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcmVwb3J0aW5nTGluZURlZmluaXRpb25zLycgKyAoY3VyUGVyZm9ybWVyIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkucmVwb3J0aW5nTGluZURlZklkO1xyXG4gICAgICAgICAgdGhpcy5odHRwLmdldCh1cmwpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmRlZmluaXRpb25EZWxldGVkJykpO1xyXG4gICAgICAgICAgICAgIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvdGVudGlhbE93bmVyKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogY3VyUGVyZm9ybWVyXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdXJsTWF0cml4ID0gJy9hcGkvcnVudGltZS93Zi92MS4wL21hdHJpeERlZmluaXRpb24vJyArIChjdXJQZXJmb3JtZXIgYXMgTWF0cml4UGFydGljaXBhbnQpLm1hdHJpeERlZklkO1xyXG4gICAgICAgICAgdGhpcy5odHRwLmdldCh1cmxNYXRyaXgpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm1hdHJpeERlbGV0ZWQnKSk7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh0aGlzLmNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjdXJQZXJmb3JtZXJcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IGN1clBlcmZvcm1lclxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjdXJQZXJmb3JtZXIudHlwZSAhPT0gJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nICYmXHJcbiAgICAgICAgY3VyUGVyZm9ybWVyLnR5cGUgIT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7IC8vIOaxh+aKpeWFs+ezu+WSjOefqemYteWNleeLrOWkhOeQhlxyXG4gICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVtb3ZlUGVyZm9ybWVyKHR5cGU6IHN0cmluZykge1xyXG4gICAgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgaWYgKHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LmZpbmRJbmRleChwID0+IHAuaWQgPT09IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQubG9hZERhdGEodGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3RQYXJ0aWNpcGFudEluZm8nKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyUGVyZm9ybWVyKHR5cGU6IHN0cmluZykge1xyXG4gICAgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIC8vIHRoaXMuaHVtYW5QZXJmb3JtZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQuaHVtYW5QZXJmb3JtZXJMaXN0KTtcclxuICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZCkge1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlVXAodHlwZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdGVkUm93O1xyXG4gICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm5vUm93U2VsZWN0ZWQnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1lciA9IHNlbGVjdGVkUm93LmRhdGE7XHJcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBwZXJmb3JtZXIuaWQpO1xyXG4gICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpXS5vcmRlciA9IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2kgLSAxXS5vcmRlcjtcclxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaS0xXS5vcmRlciA9IGluZGV4O1xyXG4gICAgICB0aGlzLnN3YXBBcnJheSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCwgaSwgaSAtIDEpO1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5sb2FkRGF0YSh0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdCk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLnNlbGVjdFJvdyhwZXJmb3JtZXIuaWQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIG1vdmVEb3duKHR5cGU6IHN0cmluZykge1xyXG4gICAgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgY29uc3Qgc2VsZWN0ZWRSb3cgPSB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdztcclxuICAgICAgaWYgKCFzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5ub1Jvd1NlbGVjdGVkJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwZXJmb3JtZXIgPSBzZWxlY3RlZFJvdy5kYXRhO1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gcGVyZm9ybWVyLmlkKTtcclxuICAgICAgaWYgKGkgPT09IHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aC0xKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaV0ub3JkZXI7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0W2ldLm9yZGVyID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3RbaSArIDFdLm9yZGVyO1xyXG4gICAgICB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdFtpKzFdLm9yZGVyID0gaW5kZXg7XHJcbiAgICAgIHRoaXMuc3dhcEFycmF5KHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LCBpLCBpICsgMSk7XHJcbiAgICAgIHRoaXMucG90ZW50aWFsT3duZXJHcmlkLmxvYWREYXRhKHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0KTtcclxuICAgICAgdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0Um93KHBlcmZvcm1lci5pZCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN3YXBBcnJheShhcnI6IEFycmF5PGFueT4sIGkxOiBudW1iZXIsIGkyOiBudW1iZXIpOiBBcnJheTxhbnk+IHtcclxuICAgIGFycltpMV0gPSBhcnIuc3BsaWNlKGkyLCAxLCBhcnJbaTFdKVswXTtcclxuICAgIHJldHVybiBhcnI7XHJcbiAgfVxyXG5cclxuICByZW1vdmVQb3RlbnRpYWxPd25lcigpIHtcclxuICAgIGlmICh0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5lbmRDZWxsRWRpdCgpO1xyXG4gICAgICBjb25zdCBpID0gdGhpcy5wYXJ0aWNpcGFudC5wb3RlbnRpYWxPd25lckxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgIHRoaXMucGFydGljaXBhbnQucG90ZW50aWFsT3duZXJMaXN0LnNwbGljZShpLCAxKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZS5pbmZvKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5zZWxlY3Rwb3RlbnRpYWx0SGFuZGxlcicpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VXNlclBlcmZvcm1lckRlc2NyaXB0aW9uKHVzZXJQZXJmb3JtZXI6IFVzZXJQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBpZiAodXNlclBlcmZvcm1lci50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gdXNlclBlcmZvcm1lci5wZXJmb3JtZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh1c2VyUGVyZm9ybWVyLm9yZ05hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50Lm9yZycpICsgdXNlclBlcmZvcm1lci5vcmdOYW1lO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRWYXJpYWJsZVBlcmZvcm1lckRlc2NyaXB0aW9uKHZhcmlhYmxlUGVyZm9ybWVyOiBWYXJpYWJsZVBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGlmICh2YXJpYWJsZVBlcmZvcm1lci50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gdmFyaWFibGVQZXJmb3JtZXIudmFyVmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFBvc2l0aW9uUGVyZm9ybWVyRGVzY3JpcHRpb24ocG9zaXRpb246IFBvc2l0aW9uUGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjZW5lID09PSAnaW5TdWl0ZScpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAocG9zaXRpb24ucG9zaXRpb25UeXBlID09PSAnMScpIHtcclxuICAgICAgaWYgKHBvc2l0aW9uLm9yZ0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5wb3NpdGlvblR5cGUxJykgKyBwb3NpdGlvbi5vcmdJZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBvc2l0aW9uVHlwZTInKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbi5wb3NpdGlvblR5cGUgPT09ICcwJykge1xyXG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnBvc2l0aW9uVHlwZTMnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q29tcG9uZW50UGVyZm9ybWVyRGVzY3JpcHRpb24ocG9zaXRpb246IENvbXBvbmVudFBhcnRpY2lwYW50KTogc3RyaW5nIHtcclxuICAgIGxldCBkZXMgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29tcCcpICsgcG9zaXRpb24ubmFtZVxyXG4gICAgKyB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucGFyYW1ldGVycycpO1xyXG4gICAgaWYgKHBvc2l0aW9uLmFjdHVhbFBhcmFtZXRlcnMgJiYgcG9zaXRpb24uYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHBvc2l0aW9uLmFjdHVhbFBhcmFtZXRlcnMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICBkZXMgKz0gYCR7cC5jb2Rlfe+8miR7cC52YWx1ZX3vvIxgO1xyXG4gICAgICB9KTtcclxuICAgICAgZGVzID0gZGVzLnN1YnN0cmluZygwLCBkZXMubGVuZ3RoIC0gMSk7XHJcbiAgICB9XHJcbiAgICBkZXMgKz0gJ30nO1xyXG4gICAgcmV0dXJuIGRlcztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UmVwb3J0aW5nTGluZVBlcmZvcm1lckRlc2NyaXB0aW9uKHJlcG9ydGluZ0xpbmU6IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCk6IHN0cmluZyB7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCkge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQucmVmZXJlbmNlUGVyc29uJykgKyByZXBvcnRpbmdMaW5lLnJlZlVzZXJJZDtcclxuICAgIH1cclxuICAgIGlmIChyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LnJlZmVyZW5jZVBlcnNvbicpICsgcmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmT3JnSWQpIHtcclxuICAgICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmVXNlcklkKSB7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYO+8jGA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlcG9ydGluZ0xpbmUucmVmRW1wbG95ZWVJZCkge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uICs9IGDvvIxgO1xyXG4gICAgICB9XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5yZWZlcmVuY2VPcmdhbml6YXRpb24nKSArIHJlcG9ydGluZ0xpbmUucmVmT3JnSWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE1hdHJpeFBlcmZvcm1lckRlc2NyaXB0aW9uKG1hdHJpeDogTWF0cml4UGFydGljaXBhbnQpOiBzdHJpbmcge1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZiAobWF0cml4LmNvbmRpdGlvbkZpZWxkMSkge1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQucGFydGljaXBhbnQuY29uZGl0aW9uMScpICsgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDEgKyBg77yMYDtcclxuICAgIH1cclxuICAgIGlmIChtYXRyaXguY29uZGl0aW9uRmllbGQyKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jb25kaXRpb24yJykgKyBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MiArIGDvvIxgO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hdHJpeC5jb25kaXRpb25GaWVsZDMpIHtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmNvbmRpdGlvbjMnKSArIG1hdHJpeC5jb25kaXRpb25GaWVsZFRleHQzICsgYO+8jGA7XHJcbiAgICB9XHJcbiAgICBpZiAobWF0cml4LmRhdGFGaWVsZEFsaWFzKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5kYXRhJykgKyBtYXRyaXguZGF0YUZpZWxkQWxpYXMgKyBg77yMYDtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXNjcmlwdGlvbi5zbGljZSgwLCBkZXNjcmlwdGlvbi5sZW5ndGggLSAxKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZWRpdENvbmRpdG9uKGU6IGFueSkge1xyXG4gICAgLy8gdGhpcy5leHByLmNsZWFyQ29udGV4dCgpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZFNjaGVtYSgnU2NoZW1hJywgc2NoZW1hKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcyAmJiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlc1swXTtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkSW5qZWN0ZWRFbnRpdHkoZW50aXR5VHlwZS5uYW1lLCAnU2NoZW1hJyxcclxuICAgICAgICAgIGVudGl0eVR5cGUubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgY29udGV4dCA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLmFkZENvbnRleHQoY29udGV4dCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KGUuaW5zdGFuY2UudmFsdWUpO1xyXG4gICAgdGhpcy5leHByLnNldEVkaXRQYXR0ZXJuKEV4cHJFZGl0TW9kZS5Db25kaXRpb25hbCk7IC8vIOm7mOiupOaJk+W8gOeugOaYk+ihqOi+vuW8j+e8lui+keWZqFxyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGNvbmQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZih0aGlzLnBvdGVudGlhbE93bmVyR3JpZCAmJiB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdyAmJiB0aGlzLnBvdGVudGlhbE93bmVyR3JpZC5zZWxlY3RlZFJvdy5kYXRhKSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnBhcnRpY2lwYW50LnBvdGVudGlhbE93bmVyTGlzdC5maW5kKGggPT4gaC5pZCA9PT0gdGhpcy5wb3RlbnRpYWxPd25lckdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGVtcC5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9XHJcbiAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoY29uZCk7XHJcbiAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgR2V0T3JnYW5pemF0aW9uVHlwZSgpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYXV0aGZpZWxkcy9nbG9iYWxhdXRoZmllbGRzJztcclxuICAgIHRoaXMuaHR0cC5nZXQodXJsKVxyXG4gICAgICAuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHRoaXMuZGVzaWduZXJVSVN0YXRlLm9yZ1R5cGVDb2xsZWN0aW9uID0gZGF0YS5tYXAoZCA9PiAoeyB2YWx1ZTogZC5pZCwgdGV4dDogZC5uYW1lIH0pKSk7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDkuI3lkIzlj4LkuI7ogIXpgInmi6nnlYzpnaLnmoTlsLrlr7ggMjAyMy03LTVcclxuICBwcml2YXRlIGF0dHJpYnV0ZUJveFNpemUoYm94VHlwZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBib3hzaXplID0ge1xyXG4gICAgICB3aWR0aDogNzYwLFxyXG4gICAgICBoZWlnaHQ6IDUxMlxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChib3hUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gNDU1O1xyXG4gICAgICAgIHJldHVybiBib3hzaXplO1xyXG4gICAgICBjYXNlICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzIwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplO1xyXG4gICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgYm94c2l6ZS53aWR0aCA9IDc2MDtcclxuICAgICAgICBib3hzaXplLmhlaWdodCA9IDQyMDtcclxuICAgICAgICByZXR1cm4gYm94c2l6ZTs7XHJcbiAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA1MTI7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3ODA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA0MjA7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgIGJveHNpemUud2lkdGggPSA3NjA7XHJcbiAgICAgICAgYm94c2l6ZS5oZWlnaHQgPSA1MTI7XHJcbiAgICAgICAgcmV0dXJuIGJveHNpemU7O1xyXG4gICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzIwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplOztcclxuICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICBib3hzaXplLndpZHRoID0gNzYwO1xyXG4gICAgICAgIGJveHNpemUuaGVpZ2h0ID0gMzYwO1xyXG4gICAgICAgIHJldHVybiBib3hzaXplOztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19