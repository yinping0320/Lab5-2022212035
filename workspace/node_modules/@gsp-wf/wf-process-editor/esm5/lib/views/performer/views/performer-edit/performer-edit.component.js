/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, HostBinding, ViewChild, Input, Optional, LOCALE_ID, Inject } from '@angular/core';
import { UserPerformerComponent } from '../user-performer/user-performer.component';
import { PositionPerformerComponent } from '../position-performer/position-performer.component';
import { ComponentPerformerComponent } from '../component-performer/component-performer.component';
import { ReportingLineComponent } from '../reporting-line/reporting-line.component';
import { MatrixPerformerComponent } from '../matrix-performer/matrix-performer.component';
import { HttpService } from '@ecp-caf/caf-common';
import { ActivityExecutorPerformerComponent } from '../activity-executor-performer/activity-executor-performer.component';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { OrganizationParticipantExpression, ActionScope, OrganizationLevel } from '../../../../domain/entities/organization-participant-expression';
import { VariablePerformerComponent } from '../variable-performer/variable-performer.component';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../../i18n/pipe/wf-process-editor-locale.pipe';
var PerformerEditComponent = /** @class */ (function () {
    function PerformerEditComponent(designerUIState, expr, http, localeId, resources, localePipe) {
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.http = http;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.tab = 'user';
        this.display = true;
        this.organizationLevelCollection = [
            {
                value: 'UNIT',
                text: this.localePipe.transform('component.participant.currentUnit'),
                orgId: 'currentUnit'
            }, {
                value: 'DEPARTMENT',
                text: this.localePipe.transform('component.participant.currentDepartment'),
                orgId: 'currentDepartment'
            }, {
                value: 'VARORGANIZATION',
                text: this.localePipe.transform('component.participant.variableOrganization'),
                orgId: ''
            }
        ];
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.organizationParticipant = new OrganizationParticipantExpression();
        this.organizationParticipant.actionScope = ActionScope.AssignUser;
        this.organizationParticipant.organizationLevel = OrganizationLevel.DEPARTMENT;
        this.organizationParticipant.organizationId = 'currentDepartment';
        this.organizationParticipant.organizationName = this.localePipe.transform('component.participant.currentDepartment');
        this.organizationParticipant.includeChildren = false;
        this.organizationParticipant.tag = 'variable';
    }
    /**
     * @return {?}
     */
    PerformerEditComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    PerformerEditComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.performer) {
            switch (this.performer.type) {
                case 'wf.UserParticipantExpression':
                    this.usersCmp.users = [];
                    this.usersCmp.users.push(this.performer.value);
                    // 2023-5-23 用户参与者支持编辑时单选+显示已选用户；
                    this.usersCmp.multiSelect = this.editState === 'edit' ? false : true;
                    // 考虑到兼容历史数据，暂时不使用用户参与者实体类中的userType属性
                    if (this.performer.value.performerId && this.performer.value.performerId.charAt(0) === '{') {
                        /** @type {?} */
                        var url = '/api/runtime/wf/v1.0/reportingOrgType/hasAdminOrg';
                        this.http.get(url).subscribe((/**
                         * @param {?} data
                         * @return {?}
                         */
                        function (data) {
                            _this.usersCmp.userTypeButtonNeedShow = data;
                            _this.usersCmp.userType = 'variable';
                            _this.usersCmp.curOrgType = _this.performer.value.orgType === 'Sys' ? 'Sys' : 'Administrative_organization';
                            _this.usersCmp.condition = _this.performer.value.condition;
                            // 根据表达式中的函数名判断是否使用的是上下文变量
                            /** @type {?} */
                            var isContextVariable = _this.performer.value.performerId.indexOf('GetContextParameter') >= 0;
                            _this.usersCmp.variableOrgTypes = isContextVariable ? [
                                { name: '系统用户', value: 'Sys' }
                            ] : [
                                { name: '系统用户', value: 'Sys' },
                                { name: '员工', value: 'Administrative_organization' }
                            ];
                        }));
                    }
                    else {
                        this.usersCmp.userType = 'user';
                        this.usersCmp.condition = this.performer.value.condition;
                    }
                    break;
                case 'wf.VariableParticipantExpression':
                    // TODO:参与者只保留一份最好
                    this.varCmp.users = [];
                    this.varCmp.users.push(this.performer.value);
                    this.varCmp.user = this.performer.value;
                    this.varCmp.editState = this.editState === 'edit' ? false : true;
                    // 判断是变量参与者
                    if (this.performer.value.varValue && this.performer.value.varValue.charAt(0) === '{') {
                        // 根据表达式中的函数名判断是否使用的是上下文变量
                        /** @type {?} */
                        var isContextVariable = this.performer.value.varValue.indexOf('GetContextParameter') >= 0;
                        // 上下文变量的变量值类型只有系统用户id
                        this.varCmp.variableOrgTypes = isContextVariable ? [
                            { name: '用户ID', value: 'Sys' }
                        ] : [
                            { name: '用户ID', value: 'Sys' },
                            { name: '员工ID', value: 'Administrative_staff' },
                        ];
                        // 如果是insuite场景还要增加行政组织id
                        this.varCmp.curOrgType = this.performer.value.varType;
                        this.varCmp.relationShipType = this.performer.value.relation;
                        this.varCmp.condition = this.performer.value.condition;
                    }
                    break;
                case 'wf.PositionParticipantExpression':
                    this.posiCmp.editState = this.editState === 'edit' ? false : true;
                    this.posiCmp.position = Object.assign({}, this.performer.value);
                    this.posiCmp.performerName = this.posiCmp.position.performerName;
                    if (this.posiCmp.position.positionType === '0') {
                        this.posiCmp.newFilter = { positionType: '0' };
                    }
                    else {
                        this.posiCmp.newFilter = { positionType: '1' };
                    }
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    // this.tab = 'report';
                    this.reportingLineCmp.setReportingLineDataEntity = this.performer.value;
                    break;
                case 'wf.ComponentParticipantExpression':
                    // this.tab = 'component';
                    this.cmpCmp.component = this.performer.value;
                    break;
                case 'wf.MatrixParticipantExpression':
                    // this.tab = 'matrix';
                    this.matrixCmp.setMatrixDataEntity = this.performer.value;
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    // this.tab = 'activityExecutor';
                    this.activityExecutorCmp.activityExecutors = [];
                    this.activityExecutorCmp.activityExecutors.push(this.performer.value);
                    this.activityExecutorCmp.condition = this.performer.value.condition;
                    break;
                case 'wf.OrganizationParticipantExpression':
                    if (this.performer.value.organizationLevel === OrganizationLevel.DEFAULT && this.performer.value.tag === 'expression') {
                        this.performer.value.organizationLevel = OrganizationLevel.VARORGANIZATION;
                    }
                    this.organizationParticipant = this.performer.value;
                    if (this.performer.value.OrganizationLevel === OrganizationLevel.DEPARTMENT && this.performer.value.tag === 'expression') {
                        this.performer.value.OrganizationLevel === OrganizationLevel.VARORGANIZATION;
                    }
                    break;
            }
        }
        if (this.performerType) {
            switch (this.performerType) {
                case 'wf.UserParticipantExpression':
                    this.usersCmp.userType = 'user';
                    break;
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PerformerEditComponent.prototype.valueChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        switch (event.value) {
            case this.organizationLevelCollection[0].value:
                this.organizationParticipant.organizationId = this.organizationLevelCollection[0].orgId;
                this.organizationParticipant.organizationName = this.organizationLevelCollection[0].text;
                this.organizationParticipant.includeChildren = true;
                break;
            case this.organizationLevelCollection[1].value:
                this.organizationParticipant.organizationId = this.organizationLevelCollection[1].orgId;
                this.organizationParticipant.organizationName = this.organizationLevelCollection[1].text;
                break;
            case this.organizationLevelCollection[2].value:
                this.organizationParticipant.organizationId = this.organizationLevelCollection[2].orgId;
                this.organizationParticipant.organizationName = this.organizationLevelCollection[2].text;
                this.organizationParticipant.includeChildren = true;
                this.organizationParticipant.tag = 'expression';
                break;
        }
    };
    /**
     * @return {?}
     */
    PerformerEditComponent.prototype.getPerformers = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var users = this.usersCmp ? this.usersCmp.getPerformers() : [];
        /** @type {?} */
        var variable = this.varCmp ? this.varCmp.getPerformers() : null;
        /** @type {?} */
        var positions = this.posiCmp ? this.posiCmp.getPerformers() : [];
        /** @type {?} */
        var component = this.cmpCmp ? this.cmpCmp.getPerformers() : null;
        /** @type {?} */
        var reportingLine = this.reportingLineCmp ? this.reportingLineCmp.getPerformers() : null;
        /** @type {?} */
        var matrix = this.matrixCmp ? this.matrixCmp.getPerformers() : null;
        /** @type {?} */
        var activityExecutors = this.activityExecutorCmp ? this.activityExecutorCmp.getPerformers() : [];
        /** @type {?} */
        var userPerformers = [];
        // 用户参与者
        /** @type {?} */
        var activityExecutorPerformers = [];
        if ((users && users.length > 0)) {
            userPerformers = userPerformers.concat(users);
        }
        if (activityExecutors && activityExecutors.length > 0) {
            activityExecutorPerformers = activityExecutorPerformers.concat(activityExecutors);
        }
        /** @type {?} */
        var organizationParticipant;
        if (this.performerType === 'wf.OrganizationParticipantExpression') {
            if (this.organizationParticipant.organizationLevel === OrganizationLevel.VARORGANIZATION && this.organizationParticipant.tag === 'expression') {
                this.organizationParticipant.organizationLevel = OrganizationLevel.DEFAULT;
            }
            organizationParticipant = this.organizationParticipant;
        }
        return { userPerformers: userPerformers, variable: variable, positions: positions, component: component, reportingLine: reportingLine, matrix: matrix, activityExecutorPerformers: activityExecutorPerformers, organizationParticipant: organizationParticipant };
    };
    /**
     * @return {?}
     */
    PerformerEditComponent.prototype.editConditon = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.designerUIState.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_1) throw e_1.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_1 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _g = tslib_1.__values(this.designerUIState.subActivityContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    _loop_1(variable);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.designerUIState.activityComponentContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_2(variable);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_d = context_1.return)) _d.call(context_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        this.expr.setEditPattern(ExprEditMode.Conditional); // 表达式展现模式：默认简易版
        this.expr.addExpressionText(this.organizationParticipant.condition);
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        function (expressioninfo) {
            _this.organizationParticipant.condition = expressioninfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @return {?}
     */
    PerformerEditComponent.prototype.editOrganizationId = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.designerUIState.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_5) throw e_5.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _g = tslib_1.__values(this.designerUIState.subActivityContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    _loop_3(variable);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_4 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.designerUIState.activityComponentContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_4(variable);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_2 = tslib_1.__values(context), context_2_1 = context_2.next(); !context_2_1.done; context_2_1 = context_2.next()) {
                    var v = context_2_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (context_2_1 && !context_2_1.done && (_d = context_2.return)) _d.call(context_2);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        this.expr.setEditPattern(ExprEditMode.Advanced);
        this.expr.addExpressionText(this.organizationParticipant.organizationId);
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        function (expressioninfo) {
            _this.organizationParticipant.organizationId = expressioninfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    PerformerEditComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-performer-edit',
                    template: "<app-user-performer *ngIf=\"performerType === 'wf.UserParticipantExpression'\"></app-user-performer>\r\n<app-variable-performer *ngIf=\"performerType === 'wf.VariableParticipantExpression'\"></app-variable-performer>\r\n<app-position-performer *ngIf=\"performerType === 'wf.PositionParticipantExpression'\"></app-position-performer>\r\n<app-reporting-line *ngIf=\"performerType === 'wf.ReportingLineParticipantExpression'\"></app-reporting-line>\r\n<app-matrix-performer *ngIf=\"performerType === 'wf.MatrixParticipantExpression'\"></app-matrix-performer>\r\n<app-activity-handler-performer\r\n  *ngIf=\"performerType === 'wf.ActivityExecutorParticipantExpression'\"></app-activity-handler-performer>\r\n<app-component-performer [component]=\"component\" style=\"background: #FFF;\"\r\n  *ngIf=\"performerType === 'wf.ComponentParticipantExpression'\"></app-component-performer>\r\n\r\n<div *ngIf=\"performerType === 'wf.OrganizationParticipantExpression'\" class=\"f-page\">\r\n  <div class=\"f-utils-fill-flex-column farris-split-section m-2 h-100\" style=\"background: #FFF;\">\r\n    <div class=\"f-utils-fill-flex-column farris-split-section mx-1 h-100\"\r\n      style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n      <form style=\"width: 100%; height: 100%;\">\r\n        <div class=\"d-flex m-2 flex-column w-100\">\r\n          <div class=\"d-flex flex-column\" style=\"height: 120px;\">\r\n            <div class=\"farris-form form-inline  farris-form-inline mr-5 my-2 pt-3\">\r\n              <div class=\"col-12 farris-group-auto\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">{{'component.participant.alternativeScope'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <farris-combo-list [panelHeight]=\"100\" [(ngModel)]=\"organizationParticipant.organizationLevel\"\r\n                        name=\"actionScope\" [idField]=\"'value'\" [enableClear]=\"false\" [textField]=\"'text'\"\r\n                        [valueField]=\"'value'\" [data]=\"organizationLevelCollection\" [readonly]=\"false\"\r\n                        (valueChange)=\"valueChange($event)\">\r\n                      </farris-combo-list>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <!-- \u5355\u4F4D/\u90E8\u95E8\u53C2\u4E0E\u8005\u652F\u6301\u5355\u4F4DID -->\r\n              <div *ngIf=\"organizationParticipant.organizationLevel===organizationLevelCollection[2].value\"\r\n                class=\"col-12 farris-group-auto my-3 pr-3\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">{{'component.participant.orgId'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <div class=\"input-group\">\r\n                        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"organizationParticipant.organizationId\"\r\n                          name=\"organizationId\" [readOnly]=\"true\" />\r\n                        <div class=\"input-group-append\">\r\n                          <span class=\"input-group-text\" (click)=\"editOrganizationId()\" style=\"background: #FFF;\">\r\n                            <i class=\"f-icon f-icon-lookup\"></i>\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div *ngIf=\"organizationParticipant.organizationLevel!=organizationLevelCollection[0].value\"\r\n                class=\"col-12 farris-group-auto my-3 pr-5\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">{{'component.participant.includeChildren'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap ml-1\">\r\n                      <farris-switch [(ngModel)]=\"organizationParticipant.includeChildren\"\r\n                        name=\"includeChildren\"></farris-switch>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex flex-column m-2 w-100\">\r\n            <div class=\"farris-form form-inline farris-form-inline mr-5\">\r\n              <div class=\"col-12 farris-group-auto my-4\" style=\"padding-left: 6px;padding-right: 21px;\">\r\n                <div class=\"farris-group-wrap\">\r\n                  <div class=\"form-group farris-form-group\">\r\n                    <label class=\"col-form-label\">\r\n                      <span class=\"farris-label-text\">{{'component.participant.conditon'|wfLocale}}</span>\r\n                    </label>\r\n                    <div class=\"farris-input-wrap\">\r\n                      <div class=\"input-group\">\r\n                        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"organizationParticipant.condition\"\r\n                          name=\"conditon\" [readOnly]=\"true\" />\r\n                        <div class=\"input-group-append\">\r\n                          <span class=\"input-group-text\" (click)=\"editConditon()\" style=\"background: #FFF;\">\r\n                            <i class=\"f-icon f-icon-lookup\"></i>\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"farris-feedback valid-feedback\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>",
                    providers: [
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    PerformerEditComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: HttpService },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    PerformerEditComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        display: [{ type: Input }],
        usersCmp: [{ type: ViewChild, args: [UserPerformerComponent,] }],
        varCmp: [{ type: ViewChild, args: [VariablePerformerComponent,] }],
        posiCmp: [{ type: ViewChild, args: [PositionPerformerComponent,] }],
        cmpCmp: [{ type: ViewChild, args: [ComponentPerformerComponent,] }],
        reportingLineCmp: [{ type: ViewChild, args: [ReportingLineComponent,] }],
        matrixCmp: [{ type: ViewChild, args: [MatrixPerformerComponent,] }],
        activityExecutorCmp: [{ type: ViewChild, args: [ActivityExecutorPerformerComponent,] }]
    };
    return PerformerEditComponent;
}());
export { PerformerEditComponent };
if (false) {
    /** @type {?} */
    PerformerEditComponent.prototype.cls;
    /** @type {?} */
    PerformerEditComponent.prototype.component;
    /** @type {?} */
    PerformerEditComponent.prototype.performer;
    /** @type {?} */
    PerformerEditComponent.prototype.performerType;
    /** @type {?} */
    PerformerEditComponent.prototype.userType;
    /** @type {?} */
    PerformerEditComponent.prototype.editState;
    /** @type {?} */
    PerformerEditComponent.prototype.tab;
    /** @type {?} */
    PerformerEditComponent.prototype.display;
    /** @type {?} */
    PerformerEditComponent.prototype.organizationLevelCollection;
    /** @type {?} */
    PerformerEditComponent.prototype.organizationParticipant;
    /** @type {?} */
    PerformerEditComponent.prototype.usersCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.varCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.posiCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.cmpCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.reportingLineCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.matrixCmp;
    /** @type {?} */
    PerformerEditComponent.prototype.activityExecutorCmp;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    PerformerEditComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybWVyLWVkaXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi92aWV3cy9wZXJmb3JtZXIvdmlld3MvcGVyZm9ybWVyLWVkaXQvcGVyZm9ybWVyLWVkaXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxXQUFXLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBaUIsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0gsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDcEYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFDaEcsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFFbkcsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDcEYsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDMUYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxrQ0FBa0MsRUFBRSxNQUFNLHNFQUFzRSxDQUFDO0FBQzFILE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlFQUFpRSxDQUFDO0FBQ3BKLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ2hHLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztB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QUFTLFNBQUMsc0JBQXNCO3lCQUNoQyxTQUFTLFNBQUMsMEJBQTBCOzBCQUNwQyxTQUFTLFNBQUMsMEJBQTBCO3lCQUNwQyxTQUFTLFNBQUMsMkJBQTJCO21DQUNyQyxTQUFTLFNBQUMsc0JBQXNCOzRCQUNoQyxTQUFTLFNBQUMsd0JBQXdCO3NDQUNsQyxTQUFTLFNBQUMsa0NBQWtDOztJQWlRL0MsNkJBQUM7Q0FBQSxBQTVTRCxJQTRTQztTQXBTWSxzQkFBc0I7OztJQUNqQyxxQ0FDcUM7O0lBQ3JDLDJDQUE4Qjs7SUFDOUIsMkNBQXdDOztJQUN4QywrQ0FBc0I7O0lBQ3RCLDBDQUFpQjs7SUFDakIsMkNBQWtCOztJQUNsQixxQ0FBYTs7SUFDYix5Q0FBd0I7O0lBRXhCLDZEQWNFOztJQUVGLHlEQUEyRDs7SUFFM0QsMENBQW9FOztJQUNwRSx3Q0FBMEU7O0lBQzFFLHlDQUEyRTs7SUFDM0Usd0NBQTRFOztJQUM1RSxrREFBNEU7O0lBQzVFLDJDQUF5RTs7SUFDekUscURBQXVHOzs7OztJQUdyRyxpREFBK0M7Ozs7O0lBQy9DLHNDQUErQjs7Ozs7SUFDL0Isc0NBQXlCOzs7OztJQUN6QiwwQ0FBMkM7Ozs7O0lBQzNDLDJDQUFpRDs7Ozs7SUFDakQsNENBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEhvc3RCaW5kaW5nLCBWaWV3Q2hpbGQsIElucHV0LCBBZnRlclZpZXdJbml0LCBPcHRpb25hbCwgTE9DQUxFX0lELCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVXNlclBlcmZvcm1lckNvbXBvbmVudCB9IGZyb20gJy4uL3VzZXItcGVyZm9ybWVyL3VzZXItcGVyZm9ybWVyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBvc2l0aW9uUGVyZm9ybWVyQ29tcG9uZW50IH0gZnJvbSAnLi4vcG9zaXRpb24tcGVyZm9ybWVyL3Bvc2l0aW9uLXBlcmZvcm1lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXJDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnQtcGVyZm9ybWVyL2NvbXBvbmVudC1wZXJmb3JtZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQml6Q29tcG9uZW50RW50aXR5IH0gZnJvbSAnLi4vLi4vLi4vLi4vZG9tYWluL2VudGl0aWVzL2Jpei1jb21wb25lbnQuZW50aXR5JztcclxuaW1wb3J0IHsgUmVwb3J0aW5nTGluZUNvbXBvbmVudCB9IGZyb20gJy4uL3JlcG9ydGluZy1saW5lL3JlcG9ydGluZy1saW5lLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1hdHJpeFBlcmZvcm1lckNvbXBvbmVudCB9IGZyb20gJy4uL21hdHJpeC1wZXJmb3JtZXIvbWF0cml4LXBlcmZvcm1lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBIdHRwU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVyQ29tcG9uZW50IH0gZnJvbSAnLi4vYWN0aXZpdHktZXhlY3V0b3ItcGVyZm9ybWVyL2FjdGl2aXR5LWV4ZWN1dG9yLXBlcmZvcm1lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudWlzdGF0ZSc7XHJcbmltcG9ydCB7IEV4cHJFZGl0TW9kZSwgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSB9IGZyb20gJ0Bnc3Atc3ZjL2V4cHJlc3Npb24nO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24sIEFjdGlvblNjb3BlLCBPcmdhbml6YXRpb25MZXZlbCB9IGZyb20gJy4uLy4uLy4uLy4uL2RvbWFpbi9lbnRpdGllcy9vcmdhbml6YXRpb24tcGFydGljaXBhbnQtZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFZhcmlhYmxlUGVyZm9ybWVyQ29tcG9uZW50IH0gZnJvbSAnLi4vdmFyaWFibGUtcGVyZm9ybWVyL3ZhcmlhYmxlLXBlcmZvcm1lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1wZXJmb3JtZXItZWRpdCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3BlcmZvcm1lci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9wZXJmb3JtZXItZWRpdC5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgV2ZMb2NhbGVQaXBlLFxyXG4gXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUGVyZm9ybWVyRWRpdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpXHJcbiAgY2xzID0gJ2ZhcnJpcy1tYWluLWFyZWEgZmxleC1jb2x1bW4nO1xyXG4gIGNvbXBvbmVudDogQml6Q29tcG9uZW50RW50aXR5O1xyXG4gIHBlcmZvcm1lcjogeyB0eXBlOiBzdHJpbmcsIHZhbHVlOiBhbnkgfTtcclxuICBwZXJmb3JtZXJUeXBlOiBzdHJpbmc7XHJcbiAgdXNlclR5cGU6IHN0cmluZztcclxuICBlZGl0U3RhdGU6IHN0cmluZztcclxuICB0YWIgPSAndXNlcic7XHJcbiAgQElucHV0KCkgZGlzcGxheSA9IHRydWU7XHJcblxyXG4gIG9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvbiA9IFtcclxuICAgIHtcclxuICAgICAgdmFsdWU6ICdVTklUJyxcclxuICAgICAgdGV4dDogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmN1cnJlbnRVbml0JyksXHJcbiAgICAgIG9yZ0lkOiAnY3VycmVudFVuaXQnXHJcbiAgICB9LCB7XHJcbiAgICAgIHZhbHVlOiAnREVQQVJUTUVOVCcsXHJcbiAgICAgIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC5jdXJyZW50RGVwYXJ0bWVudCcpLFxyXG4gICAgICBvcmdJZDogJ2N1cnJlbnREZXBhcnRtZW50J1xyXG4gICAgfSwge1xyXG4gICAgICB2YWx1ZTogJ1ZBUk9SR0FOSVpBVElPTicsXHJcbiAgICAgIHRleHQ6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5wYXJ0aWNpcGFudC52YXJpYWJsZU9yZ2FuaXphdGlvbicpLFxyXG4gICAgICBvcmdJZDogJydcclxuICAgIH1cclxuICBdO1xyXG5cclxuICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudDogT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG5cclxuICBAVmlld0NoaWxkKFVzZXJQZXJmb3JtZXJDb21wb25lbnQpIHVzZXJzQ21wOiBVc2VyUGVyZm9ybWVyQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoVmFyaWFibGVQZXJmb3JtZXJDb21wb25lbnQpIHZhckNtcDogVmFyaWFibGVQZXJmb3JtZXJDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChQb3NpdGlvblBlcmZvcm1lckNvbXBvbmVudCkgcG9zaUNtcDogUG9zaXRpb25QZXJmb3JtZXJDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChDb21wb25lbnRQZXJmb3JtZXJDb21wb25lbnQpIGNtcENtcDogQ29tcG9uZW50UGVyZm9ybWVyQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoUmVwb3J0aW5nTGluZUNvbXBvbmVudCkgcmVwb3J0aW5nTGluZUNtcDogUmVwb3J0aW5nTGluZUNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKE1hdHJpeFBlcmZvcm1lckNvbXBvbmVudCkgbWF0cml4Q21wOiBNYXRyaXhQZXJmb3JtZXJDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZChBY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVyQ29tcG9uZW50KSBhY3Rpdml0eUV4ZWN1dG9yQ21wOiBBY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVyQ29tcG9uZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZGVzaWduZXJVSVN0YXRlOiBQcm9jZXNzRGVzaWduZXJVSVN0YXRlLFxyXG4gICAgcHJpdmF0ZSBleHByOiBFeHByZXNzaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50ID0gbmV3IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbigpO1xyXG4gICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5hY3Rpb25TY29wZSA9IEFjdGlvblNjb3BlLkFzc2lnblVzZXI7XHJcbiAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbkxldmVsID0gT3JnYW5pemF0aW9uTGV2ZWwuREVQQVJUTUVOVDtcclxuICAgIHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uSWQgPSAnY3VycmVudERlcGFydG1lbnQnO1xyXG4gICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LnBhcnRpY2lwYW50LmN1cnJlbnREZXBhcnRtZW50Jyk7XHJcbiAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC50YWcgPSAndmFyaWFibGUnO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBpZiAodGhpcy5wZXJmb3JtZXIpIHtcclxuICAgICAgc3dpdGNoICh0aGlzLnBlcmZvcm1lci50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLnVzZXJzQ21wLnVzZXJzID0gW107XHJcbiAgICAgICAgICB0aGlzLnVzZXJzQ21wLnVzZXJzLnB1c2godGhpcy5wZXJmb3JtZXIudmFsdWUpO1xyXG4gICAgICAgICAgLy8gMjAyMy01LTIzIOeUqOaIt+WPguS4juiAheaUr+aMgee8lui+keaXtuWNlemAiSvmmL7npLrlt7LpgInnlKjmiLfvvJtcclxuICAgICAgICAgIHRoaXMudXNlcnNDbXAubXVsdGlTZWxlY3QgPSB0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgLy8g6ICD6JmR5Yiw5YW85a655Y6G5Y+y5pWw5o2u77yM5pqC5pe25LiN5L2/55So55So5oi35Y+C5LiO6ICF5a6e5L2T57G75Lit55qEdXNlclR5cGXlsZ7mgKdcclxuICAgICAgICAgIGlmICh0aGlzLnBlcmZvcm1lci52YWx1ZS5wZXJmb3JtZXJJZCAmJiB0aGlzLnBlcmZvcm1lci52YWx1ZS5wZXJmb3JtZXJJZC5jaGFyQXQoMCkgPT09ICd7Jykge1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcmVwb3J0aW5nT3JnVHlwZS9oYXNBZG1pbk9yZyc7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cC5nZXQodXJsKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMudXNlcnNDbXAudXNlclR5cGVCdXR0b25OZWVkU2hvdyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2Vyc0NtcC51c2VyVHlwZSA9ICd2YXJpYWJsZSc7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2Vyc0NtcC5jdXJPcmdUeXBlID0gdGhpcy5wZXJmb3JtZXIudmFsdWUub3JnVHlwZSA9PT0gJ1N5cycgPyAnU3lzJyA6ICdBZG1pbmlzdHJhdGl2ZV9vcmdhbml6YXRpb24nO1xyXG4gICAgICAgICAgICAgIHRoaXMudXNlcnNDbXAuY29uZGl0aW9uID0gdGhpcy5wZXJmb3JtZXIudmFsdWUuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgIC8vIOagueaNruihqOi+vuW8j+S4reeahOWHveaVsOWQjeWIpOaWreaYr+WQpuS9v+eUqOeahOaYr+S4iuS4i+aWh+WPmOmHj1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlzQ29udGV4dFZhcmlhYmxlID0gdGhpcy5wZXJmb3JtZXIudmFsdWUucGVyZm9ybWVySWQuaW5kZXhPZignR2V0Q29udGV4dFBhcmFtZXRlcicpID49IDA7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2Vyc0NtcC52YXJpYWJsZU9yZ1R5cGVzID0gaXNDb250ZXh0VmFyaWFibGUgPyBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICfns7vnu5/nlKjmiLcnLCB2YWx1ZTogJ1N5cycgfVxyXG4gICAgICAgICAgICAgIF0gOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICfns7vnu5/nlKjmiLcnLCB2YWx1ZTogJ1N5cycgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ+WRmOW3pScsIHZhbHVlOiAnQWRtaW5pc3RyYXRpdmVfb3JnYW5pemF0aW9uJyB9XHJcbiAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJzQ21wLnVzZXJUeXBlID0gJ3VzZXInO1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJzQ21wLmNvbmRpdGlvbiA9IHRoaXMucGVyZm9ybWVyLnZhbHVlLmNvbmRpdGlvbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIC8vIFRPRE865Y+C5LiO6ICF5Y+q5L+d55WZ5LiA5Lu95pyA5aW9XHJcbiAgICAgICAgICB0aGlzLnZhckNtcC51c2VycyA9IFtdO1xyXG4gICAgICAgICAgdGhpcy52YXJDbXAudXNlcnMucHVzaCh0aGlzLnBlcmZvcm1lci52YWx1ZSk7XHJcbiAgICAgICAgICB0aGlzLnZhckNtcC51c2VyID0gdGhpcy5wZXJmb3JtZXIudmFsdWU7XHJcbiAgICAgICAgICB0aGlzLnZhckNtcC5lZGl0U3RhdGUgPSB0aGlzLmVkaXRTdGF0ZSA9PT0gJ2VkaXQnID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgLy8g5Yik5pat5piv5Y+Y6YeP5Y+C5LiO6ICFXHJcbiAgICAgICAgICBpZiAodGhpcy5wZXJmb3JtZXIudmFsdWUudmFyVmFsdWUgJiYgdGhpcy5wZXJmb3JtZXIudmFsdWUudmFyVmFsdWUuY2hhckF0KDApID09PSAneycpIHtcclxuICAgICAgICAgICAgLy8g5qC55o2u6KGo6L6+5byP5Lit55qE5Ye95pWw5ZCN5Yik5pat5piv5ZCm5L2/55So55qE5piv5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQ29udGV4dFZhcmlhYmxlID0gdGhpcy5wZXJmb3JtZXIudmFsdWUudmFyVmFsdWUuaW5kZXhPZignR2V0Q29udGV4dFBhcmFtZXRlcicpID49IDA7XHJcbiAgICAgICAgICAgIC8vIOS4iuS4i+aWh+WPmOmHj+eahOWPmOmHj+WAvOexu+Wei+WPquacieezu+e7n+eUqOaIt2lkXHJcbiAgICAgICAgICAgIHRoaXMudmFyQ21wLnZhcmlhYmxlT3JnVHlwZXMgPSBpc0NvbnRleHRWYXJpYWJsZSA/IFtcclxuICAgICAgICAgICAgICB7IG5hbWU6ICfnlKjmiLdJRCcsIHZhbHVlOiAnU3lzJyB9XHJcbiAgICAgICAgICAgIF0gOiBbXHJcbiAgICAgICAgICAgICAgeyBuYW1lOiAn55So5oi3SUQnLCB2YWx1ZTogJ1N5cycgfSxcclxuICAgICAgICAgICAgICB7IG5hbWU6ICflkZjlt6VJRCcsIHZhbHVlOiAnQWRtaW5pc3RyYXRpdmVfc3RhZmYnIH0sXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr2luc3VpdGXlnLrmma/ov5jopoHlop7liqDooYzmlL/nu4Tnu4dpZFxyXG4gICAgICAgICAgICB0aGlzLnZhckNtcC5jdXJPcmdUeXBlID0gdGhpcy5wZXJmb3JtZXIudmFsdWUudmFyVHlwZTtcclxuICAgICAgICAgICAgdGhpcy52YXJDbXAucmVsYXRpb25TaGlwVHlwZSA9IHRoaXMucGVyZm9ybWVyLnZhbHVlLnJlbGF0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLnZhckNtcC5jb25kaXRpb24gPSB0aGlzLnBlcmZvcm1lci52YWx1ZS5jb25kaXRpb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLnBvc2lDbXAuZWRpdFN0YXRlID0gdGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0JyA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgIHRoaXMucG9zaUNtcC5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGVyZm9ybWVyLnZhbHVlKTtcclxuICAgICAgICAgIHRoaXMucG9zaUNtcC5wZXJmb3JtZXJOYW1lID0gdGhpcy5wb3NpQ21wLnBvc2l0aW9uLnBlcmZvcm1lck5hbWU7XHJcbiAgICAgICAgICBpZiAodGhpcy5wb3NpQ21wLnBvc2l0aW9uLnBvc2l0aW9uVHlwZSA9PT0gJzAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaUNtcC5uZXdGaWx0ZXIgPSB7IHBvc2l0aW9uVHlwZTogJzAnIH07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2lDbXAubmV3RmlsdGVyID0geyBwb3NpdGlvblR5cGU6ICcxJyB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICAvLyB0aGlzLnRhYiA9ICdyZXBvcnQnO1xyXG4gICAgICAgICAgdGhpcy5yZXBvcnRpbmdMaW5lQ21wLnNldFJlcG9ydGluZ0xpbmVEYXRhRW50aXR5ID0gdGhpcy5wZXJmb3JtZXIudmFsdWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgLy8gdGhpcy50YWIgPSAnY29tcG9uZW50JztcclxuICAgICAgICAgIHRoaXMuY21wQ21wLmNvbXBvbmVudCA9IHRoaXMucGVyZm9ybWVyLnZhbHVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIC8vIHRoaXMudGFiID0gJ21hdHJpeCc7XHJcbiAgICAgICAgICB0aGlzLm1hdHJpeENtcC5zZXRNYXRyaXhEYXRhRW50aXR5ID0gdGhpcy5wZXJmb3JtZXIudmFsdWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIC8vIHRoaXMudGFiID0gJ2FjdGl2aXR5RXhlY3V0b3InO1xyXG4gICAgICAgICAgdGhpcy5hY3Rpdml0eUV4ZWN1dG9yQ21wLmFjdGl2aXR5RXhlY3V0b3JzID0gW107XHJcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5RXhlY3V0b3JDbXAuYWN0aXZpdHlFeGVjdXRvcnMucHVzaCh0aGlzLnBlcmZvcm1lci52YWx1ZSk7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5RXhlY3V0b3JDbXAuY29uZGl0aW9uID0gdGhpcy5wZXJmb3JtZXIudmFsdWUuY29uZGl0aW9uO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIGlmICh0aGlzLnBlcmZvcm1lci52YWx1ZS5vcmdhbml6YXRpb25MZXZlbCA9PT0gT3JnYW5pemF0aW9uTGV2ZWwuREVGQVVMVCAmJiB0aGlzLnBlcmZvcm1lci52YWx1ZS50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1lci52YWx1ZS5vcmdhbml6YXRpb25MZXZlbCA9IE9yZ2FuaXphdGlvbkxldmVsLlZBUk9SR0FOSVpBVElPTjtcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50ID0gdGhpcy5wZXJmb3JtZXIudmFsdWU7XHJcbiAgICAgICAgICBpZiAodGhpcy5wZXJmb3JtZXIudmFsdWUuT3JnYW5pemF0aW9uTGV2ZWwgPT09IE9yZ2FuaXphdGlvbkxldmVsLkRFUEFSVE1FTlQgJiYgdGhpcy5wZXJmb3JtZXIudmFsdWUudGFnID09PSAnZXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtZXIudmFsdWUuT3JnYW5pemF0aW9uTGV2ZWwgPT09IE9yZ2FuaXphdGlvbkxldmVsLlZBUk9SR0FOSVpBVElPTjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wZXJmb3JtZXJUeXBlKSB7XHJcbiAgICAgIHN3aXRjaCAodGhpcy5wZXJmb3JtZXJUeXBlKSB7XHJcbiAgICAgICAgY2FzZSAnd2YuVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLnVzZXJzQ21wLnVzZXJUeXBlID0gJ3VzZXInO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhbHVlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudmFsdWUpIHtcclxuICAgICAgY2FzZSB0aGlzLm9yZ2FuaXphdGlvbkxldmVsQ29sbGVjdGlvblswXS52YWx1ZTpcclxuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbklkID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMF0ub3JnSWQ7XHJcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lID0gdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMF0udGV4dDtcclxuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmluY2x1ZGVDaGlsZHJlbiA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMV0udmFsdWU6XHJcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25JZCA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzFdLm9yZ0lkO1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTmFtZSA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzFdLnRleHQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgdGhpcy5vcmdhbml6YXRpb25MZXZlbENvbGxlY3Rpb25bMl0udmFsdWU6XHJcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25JZCA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzJdLm9yZ0lkO1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTmFtZSA9IHRoaXMub3JnYW5pemF0aW9uTGV2ZWxDb2xsZWN0aW9uWzJdLnRleHQ7XHJcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5pbmNsdWRlQ2hpbGRyZW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQudGFnID0gJ2V4cHJlc3Npb24nXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldFBlcmZvcm1lcnMoKSB7XHJcbiAgICBjb25zdCB1c2VycyA9IHRoaXMudXNlcnNDbXAgPyB0aGlzLnVzZXJzQ21wLmdldFBlcmZvcm1lcnMoKSA6IFtdO1xyXG4gICAgY29uc3QgdmFyaWFibGUgPSB0aGlzLnZhckNtcCA/IHRoaXMudmFyQ21wLmdldFBlcmZvcm1lcnMoKSA6IG51bGw7XHJcbiAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLnBvc2lDbXAgPyB0aGlzLnBvc2lDbXAuZ2V0UGVyZm9ybWVycygpIDogW107XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmNtcENtcCA/IHRoaXMuY21wQ21wLmdldFBlcmZvcm1lcnMoKSA6IG51bGw7XHJcbiAgICBjb25zdCByZXBvcnRpbmdMaW5lID0gdGhpcy5yZXBvcnRpbmdMaW5lQ21wID8gdGhpcy5yZXBvcnRpbmdMaW5lQ21wLmdldFBlcmZvcm1lcnMoKSA6IG51bGw7XHJcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLm1hdHJpeENtcCA/IHRoaXMubWF0cml4Q21wLmdldFBlcmZvcm1lcnMoKSA6IG51bGw7XHJcbiAgICBjb25zdCBhY3Rpdml0eUV4ZWN1dG9ycyA9IHRoaXMuYWN0aXZpdHlFeGVjdXRvckNtcCA/IHRoaXMuYWN0aXZpdHlFeGVjdXRvckNtcC5nZXRQZXJmb3JtZXJzKCkgOiBbXTtcclxuXHJcbiAgICBsZXQgdXNlclBlcmZvcm1lcnMgPSBbXTsgLy8g55So5oi35Y+C5LiO6ICFXHJcbiAgICBsZXQgYWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcnMgPSBbXTsgLy8g5bey5Yqe5rS75Yqo6IqC54K55Y+C5LiO6ICFXHJcblxyXG4gICAgaWYgKCh1c2VycyAmJiB1c2Vycy5sZW5ndGggPiAwKSkge1xyXG4gICAgICB1c2VyUGVyZm9ybWVycyA9IHVzZXJQZXJmb3JtZXJzLmNvbmNhdCh1c2Vycyk7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aXZpdHlFeGVjdXRvcnMgJiYgYWN0aXZpdHlFeGVjdXRvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBhY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycyA9IGFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzLmNvbmNhdChhY3Rpdml0eUV4ZWN1dG9ycyk7XHJcbiAgICB9XHJcbiAgICBsZXQgb3JnYW5pemF0aW9uUGFydGljaXBhbnQ6IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgIGlmICh0aGlzLnBlcmZvcm1lclR5cGUgPT09ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgIGlmICh0aGlzLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50Lm9yZ2FuaXphdGlvbkxldmVsID09PSBPcmdhbml6YXRpb25MZXZlbC5WQVJPUkdBTklaQVRJT04gJiYgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC50YWcgPT09ICdleHByZXNzaW9uJykge1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTGV2ZWwgPSBPcmdhbml6YXRpb25MZXZlbC5ERUZBVUxUO1xyXG4gICAgICB9XHJcbiAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50ID0gdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudDtcclxuICAgIH1cclxuICAgIHJldHVybiB7IHVzZXJQZXJmb3JtZXJzLCB2YXJpYWJsZSwgcG9zaXRpb25zLCBjb21wb25lbnQsIHJlcG9ydGluZ0xpbmUsIG1hdHJpeCwgYWN0aXZpdHlFeGVjdXRvclBlcmZvcm1lcnMsIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50IH07XHJcbiAgfVxyXG5cclxuICBlZGl0Q29uZGl0b24oKSB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzICYmIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBjb250ZXh0ID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYWRkQ29udGV4dChjb250ZXh0KTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuYWN0aXZpdHlDb21wb25lbnRDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hY3Rpdml0eUNvbXBvbmVudENvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRDb250ZXh0KHYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmV4cHIuc2V0RWRpdFBhdHRlcm4oRXhwckVkaXRNb2RlLkNvbmRpdGlvbmFsKTsgLy8g6KGo6L6+5byP5bGV546w5qih5byP77ya6buY6K6k566A5piT54mIXHJcbiAgICB0aGlzLmV4cHIuYWRkRXhwcmVzc2lvblRleHQodGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5jb25kaXRpb24pO1xyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGV4cHJlc3Npb25pbmZvOiBzdHJpbmcpID0+IHtcclxuICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5jb25kaXRpb24gPSBleHByZXNzaW9uaW5mbztcclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVkaXRPcmdhbml6YXRpb25JZCgpIHtcclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgQXJyYXkoKTtcclxuICAgIGNvbnRleHQgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hZGRDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hY3Rpdml0eUNvbXBvbmVudENvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQWR2YW5jZWQpO1xyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uSWQpO1xyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGV4cHJlc3Npb25pbmZvOiBzdHJpbmcpID0+IHtcclxuICAgICAgdGhpcy5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25JZCA9IGV4cHJlc3Npb25pbmZvO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl19