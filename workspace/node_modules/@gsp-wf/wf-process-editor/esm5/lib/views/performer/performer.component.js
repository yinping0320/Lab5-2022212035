/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Output, EventEmitter, Input, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';
import { PerformerUIState } from './performer.uistate';
import { PerformerRepository } from './performer.repository';
import { PerformerViewModel } from './performer.viewmodel';
import { FormBuilder } from '@angular/forms';
import { BsModalService } from '@farris/ui-modal';
import { PerformerEditComponent } from './views/performer-edit/performer-edit.component';
import { MessagerService } from '@farris/ui-messager';
import { PerformerOptionsComponent } from './views/performer-options/performer-options.component';
import { DialogComponent } from '@farris/ui-dialog';
import { ProcessDesignerUIState } from '../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { PerformerInfo } from './entities/performer-info.entity';
import { DatagridComponent } from '@farris/ui-datagrid';
import { of } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { FDropdownDirective } from "@farris/ui-dropdown";
import { ProcessDeUtil } from '../../domain/process-de-util';
var PerformerComponent = /** @class */ (function () {
    function PerformerComponent(viewModel, uistate, formBuilder, resolver, injector, modalService, message, designerUIState, expr, http) {
        var _this = this;
        this.viewModel = viewModel;
        this.uistate = uistate;
        this.formBuilder = formBuilder;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.message = message;
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.http = http;
        this.display = true; // 控制矩阵参与者是否显示
        // 控制矩阵参与者是否显示
        this.type = 'defaultPerformer';
        this.nodeType = 'userActivity';
        // 解决选择意见后，下拉菜单无法收折的问题
        this.closeModal = new EventEmitter();
        this.submitModal = new EventEmitter();
        this.editorParams = {};
        this.isClose = true;
        this.modalConfig = {
            title: '参与者',
            width: 700,
            height: 400,
            showButtons: true
        };
        this.columns = [
            {
                field: 'type', width: 50, title: '类型',
                formatter: {
                    type: 'enum',
                    options: { valueField: 'value', textField: 'text', data: this.uistate.typeCollection }
                }
            },
            { field: 'performerName', width: 50, title: '名称' },
            { field: 'description', width: 100, title: '描述', showTips: true },
            {
                field: 'condition', width: 60, title: '启用条件', showTips: true,
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.editConditon(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            if (e.rowData.type === 'wf.ComponentParticipantExpression') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.components.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.components[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.ReportingLineParticipantExpression') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.reportingLines.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.reportingLines[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.MatrixParticipantExpression') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.matrixParticipants.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.matrixParticipants[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.ActivityExecutorParticipantExpression') {
                                /** @type {?} */
                                var i = _this.uistate.performerInfo.activityExecutors.findIndex((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.id === e.rowData.id; }));
                                _this.uistate.performerInfo.activityExecutors[i].condition = '';
                            }
                            else if (e.rowData.type === 'wf.OrganizationParticipantExpression') {
                                _this.uistate.performerInfo.organizationParticipants[0].condition = '';
                            }
                        })
                    }
                }
            }
        ];
        this.editState = 'new'; // 编辑状态，用于区分是新增还是编辑  new | edit
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        function (rowIndex, rowData, column) {
            return of(true);
        });
        this.GetOrganizationType();
    }
    Object.defineProperty(PerformerComponent.prototype, "value", {
        set: /**
         * @param {?} partInfo
         * @return {?}
         */
        function (partInfo) {
            var _this = this;
            if (partInfo.performers && partInfo.performers.length > 0) {
                this.uistate.performerInfo.performers = partInfo.performers;
                this.uistate.performersList = this.uistate.performersList.concat((/** @type {?} */ (partInfo.performers)));
                this.uistate.performersList.map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description = _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (partInfo.variablePerformers && partInfo.variablePerformers.length > 0) {
                this.uistate.performerInfo.variablePerformers = partInfo.variablePerformers;
                this.uistate.performersList = this.uistate.performersList.concat((/** @type {?} */ (partInfo.variablePerformers)));
                this.uistate.performersList.map((/**
                 * @param {?} variablePerformers
                 * @return {?}
                 */
                function (variablePerformers) { return variablePerformers.description = _this.performerDescription((/** @type {?} */ (variablePerformers))); }));
            }
            if (partInfo.components && partInfo.components.length > 0) {
                this.uistate.performerInfo.components = partInfo.components;
                partInfo.components.forEach((/**
                 * @param {?} cmp
                 * @return {?}
                 */
                function (cmp) {
                    _this.uistate.performersList.push({
                        id: cmp.id,
                        type: 'wf.ComponentParticipantExpression',
                        performerName: cmp.name,
                        description: _this.componentDescription(cmp),
                        condition: cmp.condition
                    });
                }));
            }
            if (partInfo.reportingLines && partInfo.reportingLines.length > 0) {
                this.uistate.performerInfo.reportingLines = partInfo.reportingLines;
                partInfo.reportingLines.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.uistate.performersList.push({
                        id: r.id,
                        type: 'wf.ReportingLineParticipantExpression',
                        performerName: r.reportingLineDefName + '-' + r.dimension,
                        description: _this.reportingLineDescription(r),
                        condition: r.condition
                    });
                }));
            }
            if (partInfo.activityExecutors && partInfo.activityExecutors.length > 0) {
                this.uistate.performerInfo.activityExecutors = partInfo.activityExecutors;
                partInfo.activityExecutors.forEach((/**
                 * @param {?} handler
                 * @return {?}
                 */
                function (handler) {
                    _this.uistate.performersList.push({
                        id: handler.id,
                        type: 'wf.ActivityExecutorParticipantExpression',
                        performerName: '<' + handler.activityDefName + '>活动办理人',
                        description: '<' + handler.activityDefName + '>活动办理人',
                        condition: handler.condition
                    });
                }));
            }
            if (partInfo.matrixParticipants && partInfo.matrixParticipants.length > 0) {
                this.uistate.performerInfo.matrixParticipants = partInfo.matrixParticipants;
                partInfo.matrixParticipants.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.uistate.performersList.push({
                        id: r.id,
                        type: 'wf.MatrixParticipantExpression',
                        performerName: r.matrixDefName + '-' + r.dataFieldAlias,
                        description: _this.matrixDescription(r),
                        condition: r.condition
                    });
                }));
            }
            if (partInfo.organizationParticipants && partInfo.organizationParticipants.length > 0) {
                this.uistate.performerInfo.organizationParticipants = partInfo.organizationParticipants;
                partInfo.organizationParticipants.forEach((/**
                 * @param {?} o
                 * @return {?}
                 */
                function (o) {
                    _this.uistate.performersList.push({
                        id: o.id,
                        type: 'wf.OrganizationParticipantExpression',
                        performerName: o.organizationName,
                        description: o.organizationName + '，' + (o.includeChildren ? '包含下级' : '不包含下级'),
                        condition: o.condition
                    });
                }));
            }
            if (partInfo.options) {
                this.uistate.performerInfo.options = partInfo.options;
            }
            this.uistate.performerInfo.isAllScope = partInfo.isAllScope;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PerformerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.type = this.editorParams.type;
        this.nodeType = this.editorParams.nodeType;
        this.getMatrixConfig().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (re && re.currentValue === 'false') {
                _this.display = false;
            }
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PerformerComponent.prototype.switchChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            this.uistate.clearPerformer();
        }
    };
    // add() {
    //   this.editState = 'new';
    //   const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
    //   this.compRef = compFactory.create(this.injector);
    //   this.compRef.instance.display = this.display;
    //   const modalConfig = {
    //     title: '参与者选择',
    //     width: 700,
    //     height: 400,
    //     buttons: this.editFooter,
    //     showButtons: true
    //   };
    //   this.editDialog = this.modalService.show(this.compRef, modalConfig);
    // }
    // add() {
    //   this.editState = 'new';
    //   const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
    //   this.compRef = compFactory.create(this.injector);
    //   this.compRef.instance.display = this.display;
    //   const modalConfig = {
    //     title: '参与者选择',
    //     width: 700,
    //     height: 400,
    //     buttons: this.editFooter,
    //     showButtons: true
    //   };
    //   this.editDialog = this.modalService.show(this.compRef, modalConfig);
    // }
    /**
     * @param {?} performerType
     * @return {?}
     */
    PerformerComponent.prototype.addPerformer = 
    // add() {
    //   this.editState = 'new';
    //   const compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
    //   this.compRef = compFactory.create(this.injector);
    //   this.compRef.instance.display = this.display;
    //   const modalConfig = {
    //     title: '参与者选择',
    //     width: 700,
    //     height: 400,
    //     buttons: this.editFooter,
    //     showButtons: true
    //   };
    //   this.editDialog = this.modalService.show(this.compRef, modalConfig);
    // }
    /**
     * @param {?} performerType
     * @return {?}
     */
    function (performerType) {
        this.editState = 'new';
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
        this.compRef = compFactory.create(this.injector);
        this.compRef.instance.display = this.display;
        this.compRef.instance.performerType = performerType;
        /** @type {?} */
        var modalConfig = {
            title: '参与者选择',
            width: 700,
            height: 400,
            buttons: this.editFooter,
            showButtons: true
        };
        this.editDialog = this.modalService.show(this.compRef, modalConfig);
        this.dropDownEl.close();
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.edit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.editState = 'edit';
        if (this.uistate.curPerformer) {
            /** @type {?} */
            var modalConfig_1 = {
                title: '参与者选择',
                width: 700,
                height: 400,
                buttons: this.editFooter,
                showButtons: true
            };
            /** @type {?} */
            var compFactory = this.resolver.resolveComponentFactory(PerformerEditComponent);
            this.compRef = compFactory.create(this.injector);
            this.compRef.instance.performerType = this.uistate.curPerformer.type;
            switch (this.uistate.curPerformer.type) {
                case 'wf.PositionParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.PositionParticipantExpression',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id === _this.uistate.curPerformer.id; }))
                    };
                    break;
                case 'wf.UserParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.UserParticipantExpression',
                        value: this.uistate.performerInfo.performers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id === _this.uistate.curPerformer.id; }))
                    };
                    break;
                case 'wf.VariableParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.VariableParticipantExpression',
                        value: this.uistate.performerInfo.variablePerformers.find((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return p.id === _this.uistate.curPerformer.id; }))
                    };
                    break;
                case 'wf.ReportingLineParticipantExpression':
                    /** @type {?} */
                    var reportingLine = this.uistate.performerInfo.reportingLines.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return r.id === _this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.ReportingLineParticipantExpression',
                        value: reportingLine
                    };
                    /** @type {?} */
                    var url = '/api/runtime/wf/v1.0/reportingLineDefinitions/' + reportingLine.reportingLineDefId;
                    this.http.get(url).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error('该条汇报关系数据的定义已删除，该条数据将删除');
                            _this.remove();
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.MatrixParticipantExpression':
                    /** @type {?} */
                    var matrix = this.uistate.performerInfo.matrixParticipants.find((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) {
                        return r.id === _this.uistate.curPerformer.id;
                    }));
                    this.compRef.instance.performer = {
                        type: 'wf.MatrixParticipantExpression',
                        value: matrix
                    };
                    /** @type {?} */
                    var urlMatrix = '/api/runtime/wf/v1.0/matrixDefinition/' + matrix.matrixDefId;
                    this.http.get(urlMatrix).subscribe((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) {
                        if (!res) {
                            _this.message.error('该条矩阵数据的定义已删除，该条数据将删除');
                            _this.remove();
                        }
                        else {
                            _this.editDialog = _this.modalService.show(_this.compRef, modalConfig_1);
                        }
                    }));
                    break;
                case 'wf.ComponentParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ComponentParticipantExpression',
                        value: this.uistate.performerInfo.components.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            return c.id === _this.uistate.curPerformer.id;
                        }))
                    };
                    break;
                case 'wf.ActivityExecutorParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.ActivityExecutorParticipantExpression',
                        value: this.uistate.performerInfo.activityExecutors.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            return c.id === _this.uistate.curPerformer.id;
                        }))
                    };
                    break;
                case 'wf.OrganizationParticipantExpression':
                    this.compRef.instance.performer = {
                        type: 'wf.OrganizationParticipantExpression',
                        value: this.uistate.performerInfo.organizationParticipants[0]
                    };
                    break;
            }
            if (this.uistate.curPerformer.type !== 'wf.ReportingLineParticipantExpression' &&
                this.uistate.curPerformer.type !== 'wf.MatrixParticipantExpression') { // 汇报关系和矩阵单独处理
                this.editDialog = this.modalService.show(this.compRef, modalConfig_1);
            }
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.remove = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.grid.selectedRow) {
            this.grid.endCellEdit();
            if (this.grid.selectedRow.data.type === 'wf.ComponentParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.components.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.ReportingLineParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.reportingLines.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.reportingLines.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.MatrixParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.matrixParticipants.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.ActivityExecutorParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.activityExecutors.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.activityExecutors.splice(i, 1);
            }
            else if (this.grid.selectedRow.data.type === 'wf.OrganizationParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.organizationParticipants = new Array();
            }
            else if (this.grid.selectedRow.data.type === 'wf.VariableParticipantExpression') {
                /** @type {?} */
                var i = this.uistate.performerInfo.variablePerformers.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.variablePerformers.splice(i, 1);
            }
            else {
                /** @type {?} */
                var i = this.uistate.performerInfo.performers.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.id === _this.grid.selectedRow.data.id; }));
                this.uistate.performerInfo.performers.splice(i, 1);
            }
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.id === _this.grid.selectedRow.data.id; }));
            this.uistate.performersList.splice(index, 1);
            this.grid.loadData(this.uistate.performersList);
        }
        else {
            this.message.info('请先选中一条参与者信息！');
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.uistate.performerInfo.performers = [];
        this.uistate.performerInfo.variablePerformers = [];
        this.uistate.performerInfo.components = [];
        this.uistate.performerInfo.reportingLines = [];
        this.uistate.performerInfo.matrixParticipants = [];
        this.uistate.performerInfo.activityExecutors = [];
        this.uistate.performerInfo.organizationParticipants = new Array();
        this.uistate.performersList = [];
        this.grid.loadData(this.uistate.performersList);
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clickOK = /**
     * @return {?}
     */
    function () {
        this.grid.endCellEdit();
        /** @type {?} */
        var object = {
            value: this.uistate.performerInfo, parameters: null
        };
        this.submitModal.emit(object);
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.editOK = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var e_1, _a;
        this.isClose = true;
        if (this.compRef) {
            /** @type {?} */
            var re_1 = this.compRef.instance.getPerformers();
            if (re_1.userPerformers && re_1.userPerformers.length > 0) {
                re_1.userPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) {
                    /** @type {?} */
                    var i = _this.uistate.performerInfo.performers.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return (a.id === p.id || a.performerId === p.performerId); }));
                    if (i > -1) {
                        /** @type {?} */
                        var id_1 = _this.uistate.performerInfo.performers[i].id;
                        _this.uistate.performerInfo.performers[i] = p;
                        /** @type {?} */
                        var index = _this.uistate.performersList.findIndex((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) { return a.id === id_1; }));
                        _this.uistate.performersList[index] = p;
                    }
                    else {
                        if (_this.editState === 'edit') {
                            _this.remove();
                        }
                        _this.uistate.performerInfo.performers.push(p);
                        _this.uistate.performersList = _this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type === _this.uistate.typeCollection[0].value || p.type === _this.uistate.typeCollection[1].value; }))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description =
                    _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (re_1.positions && re_1.positions.length > 0) {
                var _loop_1 = function (position) {
                    if (position && position !== null && position.id) {
                        /** @type {?} */
                        var p_1 = position;
                        if (!p_1.performerId) {
                            this_1.message.info('尚未选择岗位！');
                            this_1.isClose = false;
                        }
                        else {
                            if ((!p_1.orgType || p_1.orgType == null) && (p_1.isRequired && p_1.positionType === '1')) {
                                this_1.message.info('尚未选择组织类型！');
                                this_1.isClose = false;
                            }
                            else if ((!p_1.orgId || p_1.orgId == null) && (p_1.isRequired && p_1.positionType === '1')) {
                                this_1.message.info('尚未填写组织！');
                                this_1.isClose = false;
                            }
                            else {
                                // (1)id一致，为编辑岗位；（2）performid一致，新增的用户，岗位已存在
                                /** @type {?} */
                                var i = this_1.uistate.performerInfo.performers.findIndex((/**
                                 * @param {?} a
                                 * @return {?}
                                 */
                                function (a) { return (a.id === p_1.id || (a.performerId === p_1.performerId && a.orgId === p_1.orgId)); }));
                                if (i > -1) {
                                    /** @type {?} */
                                    var id_2 = this_1.uistate.performerInfo.performers[i].id;
                                    this_1.uistate.performerInfo.performers[i] = p_1;
                                    /** @type {?} */
                                    var index = this_1.uistate.performersList.findIndex((/**
                                     * @param {?} a
                                     * @return {?}
                                     */
                                    function (a) { return a.id === id_2; }));
                                    this_1.uistate.performersList[index] = p_1;
                                }
                                else {
                                    this_1.uistate.performerInfo.performers.push(p_1);
                                    this_1.uistate.performersList = this_1.uistate.performersList.concat([p_1]);
                                }
                                this_1.uistate.performersList
                                    .filter((/**
                                 * @param {?} p
                                 * @return {?}
                                 */
                                function (p) { return p.type === _this.uistate.typeCollection[0].value || p.type === _this.uistate.typeCollection[1].value; }))
                                    .map((/**
                                 * @param {?} performer
                                 * @return {?}
                                 */
                                function (performer) { return performer.description =
                                    _this.performerDescription((/** @type {?} */ (performer))); }));
                            }
                        }
                    }
                };
                var this_1 = this;
                try {
                    for (var _b = tslib_1.__values(re_1.positions), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var position = _c.value;
                        _loop_1(position);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            if (re_1.component && re_1.component.metadataId && re_1.component.methodCode) {
                /** @type {?} */
                var i = this.uistate.performerInfo.components.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.id === re_1.component.id; }));
                if (i > -1) {
                    this.uistate.performerInfo.components[i] = re_1.component;
                    /** @type {?} */
                    var index = this.uistate.performersList.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return a.id === re_1.component.id; }));
                    this.uistate.performersList[index] = {
                        id: re_1.component.id,
                        type: 'wf.ComponentParticipantExpression',
                        performerName: re_1.component.name,
                        description: this.componentDescription(re_1.component),
                        condition: re_1.component.condition
                    };
                }
                else {
                    this.uistate.performerInfo.components.push(re_1.component);
                    this.uistate.performersList.push({
                        id: re_1.component.id,
                        type: 'wf.ComponentParticipantExpression',
                        performerName: re_1.component.name,
                        description: this.componentDescription(re_1.component),
                        condition: ''
                    });
                }
            }
            if (re_1.reportingLine && re_1.reportingLine.reportingLineDefId && re_1.reportingLine.dimension) {
                if (re_1.reportingLine.reportingReferObject === 'dept' && !re_1.reportingLine.refOrgId) {
                    this.isClose = false;
                    this.message.info('“部门”汇报关系类型下，参照人所在部门不能为空');
                }
                else if (re_1.reportingLine.reportingReferObject !== 'dept' && !re_1.reportingLine.refUserId && !re_1.reportingLine.refEmployeeId) { // 用户及其他人员汇报对象类型，参照用户和参照员工不能全部为空
                    this.isClose = false;
                    this.message.info('“用户”汇报关系类型下，参照人不能为空');
                }
                else {
                    this.isClose = true;
                    this.addReportingLineData(re_1);
                }
            }
            if (re_1.matrix && re_1.matrix.matrixDefId) {
                if (!re_1.matrix.conditionField1 && !re_1.matrix.conditionField2 && !re_1.matrix.conditionField3) {
                    this.isClose = false;
                    this.message.info('条件字段至少要存在一个');
                }
                else if (!re_1.matrix.dataFieldAlias) {
                    this.isClose = false;
                    this.message.info('数据字段不能为空');
                }
                else {
                    this.isClose = true;
                    this.addMatrixData(re_1);
                }
            }
            if (re_1.activityExecutorPerformers && re_1.activityExecutorPerformers.length > 0) {
                re_1.activityExecutorPerformers.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) {
                    /** @type {?} */
                    var i = _this.uistate.performerInfo.activityExecutors.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return (a.id === p.id || a.activityDefId === p.activityDefId); }));
                    if (i < 0) {
                        if (_this.editState === 'edit') {
                            _this.remove(); // 在编辑状态下配置了活动办理人参与者，先将选中的删除
                        }
                        _this.uistate.performerInfo.activityExecutors.push(p);
                        _this.uistate.performersList = _this.uistate.performersList.concat([p]);
                    }
                }));
                this.uistate.performersList
                    .filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type === _this.uistate.typeCollection[5].value; }))
                    .map((/**
                 * @param {?} performer
                 * @return {?}
                 */
                function (performer) { return performer.description =
                    _this.performerDescription((/** @type {?} */ (performer))); }));
            }
            if (re_1.organizationParticipant) {
                console.log(re_1.organizationParticipant);
                this.uistate.performerInfo.organizationParticipants = [re_1.organizationParticipant];
                this.uistate.performersList = this.uistate.performersList.filter((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.type !== 'wf.OrganizationParticipantExpression'; }));
                this.uistate.performersList = this.uistate.performersList.concat({
                    id: re_1.organizationParticipant.id || ProcessDeUtil.GenerateElementId(),
                    type: 'wf.OrganizationParticipantExpression',
                    performerName: re_1.organizationParticipant.organizationName,
                    description: re_1.organizationParticipant.organizationName + '，且' + (re_1.organizationParticipant.includeChildren ? '包含下级' : '不包含下级'),
                    condition: re_1.organizationParticipant.condition
                });
            }
            this.grid.loadData(this.uistate.performersList);
        }
        if (this.editDialog && this.isClose) {
            this.editDialog.close();
        }
    };
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    PerformerComponent.prototype.addReportingLineData = /**
     * @private
     * @param {?} re
     * @return {?}
     */
    function (re) {
        var e_2, _a;
        /** @type {?} */
        var i = this.uistate.performerInfo.reportingLines.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        function (a) { return a.id === re.reportingLine.id; }));
        if (i > -1) {
            this.uistate.performerInfo.reportingLines[i] = re.reportingLine;
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === re.reportingLine.id; }));
            this.uistate.performersList[index] = {
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipantExpression',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            };
        }
        else {
            try {
                for (var _b = tslib_1.__values(this.uistate.performerInfo.reportingLines), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var reportingLineData = _c.value;
                    if (reportingLineData.reportingLineDefId === re.reportingLine.definitionId &&
                        reportingLineData.dimension === re.reportingLine.dimension &&
                        reportingLineData.refUserId === re.reportingLine.referUserId &&
                        reportingLineData.refEmployeeId === re.reportingLine.refEmployeeId &&
                        reportingLineData.refOrgId === re.reportingLine.referDeptId) {
                        this.message.error('该汇报关系已经进行过配置');
                        return;
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            this.uistate.performerInfo.reportingLines.push(re.reportingLine);
            this.uistate.performersList.push({
                id: re.reportingLine.id,
                type: 'wf.ReportingLineParticipantExpression',
                performerName: re.reportingLine.reportingLineDefName + '-' + re.reportingLine.dimension,
                description: this.reportingLineDescription(re.reportingLine),
                condition: re.reportingLine.condition
            });
        }
    };
    /**
     * @private
     * @param {?} re
     * @return {?}
     */
    PerformerComponent.prototype.addMatrixData = /**
     * @private
     * @param {?} re
     * @return {?}
     */
    function (re) {
        var e_3, _a;
        /** @type {?} */
        var i = this.uistate.performerInfo.matrixParticipants.findIndex((/**
         * @param {?} a
         * @return {?}
         */
        function (a) { return a.id === re.matrix.id; }));
        if (i > -1) {
            this.uistate.performerInfo.matrixParticipants[i] = re.matrix;
            /** @type {?} */
            var index = this.uistate.performersList.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.id === re.matrix.id; }));
            this.uistate.performersList[index] = {
                id: re.matrix.id,
                type: 'wf.MatrixParticipantExpression',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            };
        }
        else {
            try {
                for (var _b = tslib_1.__values(this.uistate.performerInfo.matrixParticipants), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var matrixData = _c.value;
                    if (matrixData.matrixDefId === re.matrix.matrixDefId &&
                        matrixData.conditionField1 === re.matrix.conditionField1 &&
                        matrixData.conditionField2 === re.matrix.conditionField2 &&
                        matrixData.conditionField3 === re.matrix.conditionField3 &&
                        matrixData.dataFieldAlias === re.matrix.dataFieldAlias) {
                        this.message.error('该矩阵已经进行过配置');
                        return;
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
            this.uistate.performerInfo.matrixParticipants.push(re.matrix);
            this.uistate.performersList.push({
                id: re.matrix.id,
                type: 'wf.MatrixParticipantExpression',
                performerName: re.matrix.matrixDefName + '-' + re.matrix.dataFieldAlias,
                description: this.matrixDescription(re.matrix),
                condition: re.matrix.condition
            });
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.editCancel = /**
     * @return {?}
     */
    function () {
        if (this.editDialog) {
            this.editDialog.close();
        }
    };
    /**
     * @return {?}
     */
    PerformerComponent.prototype.participantOptionsSet = /**
     * @return {?}
     */
    function () {
        this.uistate.performerInfo.options = this.options.getPerformerOptions();
        this.optionsDialog.close();
    };
    /**
     * @private
     * @param {?} performer
     * @return {?}
     */
    PerformerComponent.prototype.performerDescription = /**
     * @private
     * @param {?} performer
     * @return {?}
     */
    function (performer) {
        if (performer.type === 'wf.UserParticipantExpression' || performer.type === 'wf.VariableParticipantExpression') {
            if (performer.tag === 'expression') {
                return performer.performerId;
            }
            else {
                if (performer.orgName) {
                    return "\u7EC4\u7EC7\uFF1A" + performer.orgName;
                }
                else {
                    return '';
                }
            }
        }
        else if (performer.type === 'wf.PositionParticipantExpression') {
            if (this.designerUIState.scene === 'inSuite') {
                return null;
            }
            if (((/** @type {?} */ (performer))).positionType === '1') {
                if (performer.orgId) {
                    return "\u5C97\u4F4D\u7C7B\u578B\uFF1A\u901A\u7528\u5C97\u4F4D\uFF0C\u7EC4\u7EC7\uFF1A" + performer.orgId;
                }
                else {
                    return "\u5C97\u4F4D\u7C7B\u578B\uFF1A\u901A\u7528\u5C97\u4F4D";
                }
            }
            else if (((/** @type {?} */ (performer))).positionType === '0') {
                return '岗位类型：组织岗位';
            }
        }
        else if (performer.type === 'wf.ActivityExecutorParticipantExpression') {
            return performer.performerName;
        }
    };
    /**
     * @private
     * @param {?} component
     * @return {?}
     */
    PerformerComponent.prototype.componentDescription = /**
     * @private
     * @param {?} component
     * @return {?}
     */
    function (component) {
        /** @type {?} */
        var des = "\u6784\u4EF6\uFF1A" + component.name + ",\u53C2\u6570\uFF1A{";
        if (component.actualParameters && component.actualParameters.length > 0) {
            component.actualParameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                des += p.code + "\uFF1A" + p.value + "\uFF0C";
            }));
            des = des.substring(0, des.length - 1);
        }
        des += '}';
        return des;
    };
    /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    PerformerComponent.prototype.reportingLineDescription = /**
     * @private
     * @param {?} reportingLine
     * @return {?}
     */
    function (reportingLine) {
        /** @type {?} */
        var description = '';
        if (reportingLine.refUserId) {
            description += "\u53C2\u7167\u4EBA\uFF1A" + reportingLine.refUserId;
        }
        if (reportingLine.refEmployeeId) {
            description += "\u53C2\u7167\u4EBA\uFF1A" + reportingLine.refEmployeeId;
        }
        if (reportingLine.refOrgId) {
            if (reportingLine.refUserId) {
                description += "\uFF0C";
            }
            if (reportingLine.refEmployeeId) {
                description += "\uFF0C";
            }
            description += "\u53C2\u7167\u7EC4\u7EC7\uFF1A" + reportingLine.refOrgId;
        }
        return description;
    };
    /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    PerformerComponent.prototype.matrixDescription = /**
     * @private
     * @param {?} matrix
     * @return {?}
     */
    function (matrix) {
        /** @type {?} */
        var description = '';
        if (matrix.conditionField1) {
            description += "\u6761\u4EF61\uFF1A" + matrix.conditionFieldText1 + "\uFF0C";
        }
        if (matrix.conditionField2) {
            description += "\u6761\u4EF62\uFF1A" + matrix.conditionFieldText2 + "\uFF0C";
        }
        if (matrix.conditionField3) {
            description += "\u6761\u4EF63\uFF1A" + matrix.conditionFieldText3 + "\uFF0C";
        }
        if (matrix.dataFieldAlias) {
            description += "\u6570\u636E\uFF1A" + matrix.dataFieldAlias + "\uFF0C";
        }
        return description.slice(0, description.length - 1);
    };
    /**
     * @param {?} e
     * @return {?}
     */
    PerformerComponent.prototype.editConditon = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        var e_4, _a, e_5, _b, e_6, _c, e_7, _d;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.designerUIState.schemas), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var schema = _f.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_4) throw e_4.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _g = tslib_1.__values(this.designerUIState.subActivityContext), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var variable = _h.value;
                    _loop_2(variable);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        if (this.designerUIState.activityComponentContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _j = tslib_1.__values(this.designerUIState.activityComponentContext), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var variable = _k.value;
                    _loop_3(variable);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_d = context_1.return)) _d.call(context_1);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        this.expr.addExpressionText(e.instance.value);
        this.expr.setEditPattern(ExprEditMode.Conditional); // 默认打开简易表达式编辑器
        this.expr.buildExpression().then((/**
         * @param {?} cond
         * @return {?}
         */
        function (cond) {
            if (_this.grid.selectedRow.data.type === 'wf.ComponentParticipantExpression') {
                _this.uistate.performerInfo.components.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else if (_this.grid.selectedRow.data.type === 'wf.ReportingLineParticipantExpression') {
                _this.uistate.performerInfo.reportingLines.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else if (_this.grid.selectedRow.data.type === 'wf.MatrixParticipantExpression') {
                _this.uistate.performerInfo.matrixParticipants.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else if (_this.grid.selectedRow.data.type === 'wf.ActivityExecutorParticipantExpression') {
                _this.uistate.performerInfo.activityExecutors.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            else {
                _this.uistate.performerInfo.performers.find((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === _this.grid.selectedRow.data.id; })).condition = cond;
            }
            e.formControl.setValue(cond);
            e.instance.cd.detectChanges();
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PerformerComponent.prototype.selectChanged = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.uistate.curPerformer = data.data;
    };
    /**
     * @private
     * @return {?}
     */
    PerformerComponent.prototype.GetOrganizationType = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/authfields/globalauthfields';
        this.http.get(url)
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.designerUIState.orgTypeCollection = data.map((/**
         * @param {?} d
         * @return {?}
         */
        function (d) { return ({ value: d.id, text: d.name }); })); }));
    };
    /**
     * @private
     * @return {?}
     */
    PerformerComponent.prototype.getMatrixConfig = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/generalConfig/Is_EnableMatrix";
        return this.http.get(url);
    };
    PerformerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-performer',
                    template: "<div class=\"f-page\">\r\n  <div class=\"f-page-header\">\r\n    <nav class=\"f-page-header-base\">\r\n      <div class=\"f-title\">\r\n        <span class=\"f-title-icon f-text-orna-bill\">\r\n          <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n        </span>\r\n        <h4 *ngIf=\"nodeType==='notifyActivity' || type==='defaultPerformer'\"  class=\"f-title-text\">\u529E\u7406\u4EBA\u5217\u8868</h4>\r\n        <h5 *ngIf=\"type==='assignPerformer'\" class=\"f-title-subtitle\">\u5168\u5458\u8303\u56F4</h5>\r\n        <farris-switch *ngIf=\"type==='assignPerformer'\" style=\"height: 22px;\"\r\n          [(ngModel)]=\"uistate.performerInfo.isAllScope\" name=\"isAllScope\"\r\n          [readonly]=\"false\" (valueChange)=\"switchChange($event)\"></farris-switch>\r\n      </div>\r\n      <div class=\"btn-toolbar btn-group-lg\">\r\n      <!--<button class=\"btn btn-primary mr-2\" (click)=\"add()\">\u65B0\u589E</button>-->\r\n        <div *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn-group mr-2\"  fDropdown #dropdownEl=\"fDropdown\">\r\n          <button class=\"btn btn-primary dropdown-toggle\" fDropdownToggle type=\"button\">\r\n            \u65B0\u589E\r\n          </button>\r\n          <div class=\"dropdown-menu\" fDropdownMenu>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.UserParticipantExpression')\"><span>\u7528\u6237</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.VariableParticipantExpression')\"><span>\u53D8\u91CF\u53C2\u4E0E\u8005</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.PositionParticipantExpression')\"><span>{{designerUIState.scene==='inSuite'?'\u89D2\u8272':'\u5C97\u4F4D'}}</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ReportingLineParticipantExpression')\"><span>\u6C47\u62A5\u5173\u7CFB</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ActivityExecutorParticipantExpression')\"><span>\u5386\u53F2\u6D3B\u52A8\u529E\u7406\u4EBA</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.MatrixParticipantExpression')\"><span>\u77E9\u9635\u5173\u7CFB</span></li>\r\n            <li class=\"dropdown-item\" (click)=\"addPerformer('wf.ComponentParticipantExpression')\"><span>\u53C2\u4E0E\u8005\u6784\u4EF6</span></li>\r\n            <li *ngIf=\"type==='assignPerformer'\" class=\"dropdown-item\" (click)=\"addPerformer('wf.OrganizationParticipantExpression')\"><span>\u5355\u4F4D/\u90E8\u95E8\r\n            </span></li>\r\n          </div>\r\n        </div>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" [disabled]=\"(!uistate.curPerformer)\"\r\n        (click)=\"edit()\">\u7F16\u8F91</button>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" (click)=\"remove()\">\u79FB\u9664</button>\r\n        <button *ngIf=\"type!=='assignPerformer' || !uistate.performerInfo.isAllScope\" class=\"btn btn-secondary mr-2\" (click)=\"clear()\">\u6E05\u7A7A</button>\r\n        <button *ngIf=\"nodeType==='userActivity' && type==='defaultPerformer'\" class=\"btn btn-secondary\" (click)=\"participantOptions.show()\">\u529E\u7406\u4EBA\u9009\u9879</button>\r\n      </div>\r\n    </nav>\r\n  </div>\r\n  <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <farris-datagrid #grid [data]=\"uistate.performersList\" [columns]=\"columns\" [idField]=\"'id'\" [fit]=\"true\"\r\n        [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n        [multiSelect]=\"false\" [afterEdit]=\"afterEdit\" (selectChanged)=\"selectChanged($event)\">\r\n      </farris-datagrid>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #iconSelectFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"clickCancel()\">\u53D6\u6D88</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"clickOK()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n\r\n<ng-template #editFooter>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-sm px-3 mx-2\" (click)=\"editCancel()\">\u53D6\u6D88</button>\r\n  <button type=\"button\" class=\"btn btn-primary btn-sm px-3 mx-2\" (click)=\"editOK()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n\r\n<farris-dialog #participantOptions [buttons]=\"buttonRef\" [width]=\"500\" [height]=\"530\" title=\"'\u53C2\u4E0E\u8005\u9009\u9879'\">\r\n  <app-performer-options [value]=\"uistate.performerInfo.options\"></app-performer-options>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n  <button class=\"btn btn-sm btn-default px-3\" (click)=\"participantOptions.close()\">\u53D6\u6D88</button>\r\n  <button class=\"btn btn-sm btn-primary px-3\" (click)=\"participantOptionsSet()\">\u786E\u5B9A</button>\r\n</ng-template>\r\n",
                    providers: [PerformerViewModel, PerformerRepository, PerformerUIState],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    PerformerComponent.ctorParameters = function () { return [
        { type: PerformerViewModel },
        { type: PerformerUIState },
        { type: FormBuilder },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: MessagerService },
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: HttpService }
    ]; };
    PerformerComponent.propDecorators = {
        modalFooter: [{ type: ViewChild, args: ['iconSelectFooter',] }],
        editFooter: [{ type: ViewChild, args: ['editFooter',] }],
        options: [{ type: ViewChild, args: [PerformerOptionsComponent,] }],
        optionsDialog: [{ type: ViewChild, args: ['participantOptions',] }],
        grid: [{ type: ViewChild, args: [DatagridComponent,] }],
        dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        editorParams: [{ type: Input }]
    };
    return PerformerComponent;
}());
export { PerformerComponent };
if (false) {
    /** @type {?} */
    PerformerComponent.prototype.display;
    /** @type {?} */
    PerformerComponent.prototype.type;
    /** @type {?} */
    PerformerComponent.prototype.nodeType;
    /** @type {?} */
    PerformerComponent.prototype.modalFooter;
    /** @type {?} */
    PerformerComponent.prototype.editFooter;
    /** @type {?} */
    PerformerComponent.prototype.options;
    /** @type {?} */
    PerformerComponent.prototype.optionsDialog;
    /** @type {?} */
    PerformerComponent.prototype.grid;
    /** @type {?} */
    PerformerComponent.prototype.dropDownEl;
    /** @type {?} */
    PerformerComponent.prototype.closeModal;
    /** @type {?} */
    PerformerComponent.prototype.submitModal;
    /** @type {?} */
    PerformerComponent.prototype.editorParams;
    /** @type {?} */
    PerformerComponent.prototype.editDialog;
    /** @type {?} */
    PerformerComponent.prototype.compRef;
    /** @type {?} */
    PerformerComponent.prototype.isClose;
    /** @type {?} */
    PerformerComponent.prototype.modalConfig;
    /** @type {?} */
    PerformerComponent.prototype.columns;
    /** @type {?} */
    PerformerComponent.prototype.curPerformer;
    /** @type {?} */
    PerformerComponent.prototype.editState;
    /** @type {?} */
    PerformerComponent.prototype.afterEdit;
    /** @type {?} */
    PerformerComponent.prototype.viewModel;
    /** @type {?} */
    PerformerComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.formBuilder;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.message;
    /** @type {?} */
    PerformerComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    PerformerComponent.prototype.http;
}
var PerformerConverter = /** @class */ (function () {
    function PerformerConverter() {
    }
    /**
     * @param {?} data
     * @return {?}
     */
    PerformerConverter.prototype.convertTo = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if ((data.performers && data.performers.length > 0)
            || (data.variablePerformers && data.variablePerformers.length > 0)
            || (data.components && data.components.length > 0)
            || (data.reportingLines && data.reportingLines.length > 0)
            || (data.matrixParticipants && data.matrixParticipants.length > 0)
            || (data.activityExecutors && data.activityExecutors.length > 0)
            || (data.organizationParticipants && data.organizationParticipants.length > 0)
            || data.isAllScope) {
            return '（已设置）';
        }
        else {
            return '（未设置）';
        }
    };
    return PerformerConverter;
}());
export { PerformerConverter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyZm9ybWVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvdmlld3MvcGVyZm9ybWVyL3BlcmZvcm1lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUF1QixNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLHdCQUF3QixFQUFFLFFBQVEsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFFdEssT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxjQUFjLEVBQWMsTUFBTSxrQkFBa0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUN6RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sdURBQXVELENBQUM7QUFDbEcsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFcEYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ2pFLE9BQU8sRUFBYyxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BFLE9BQU8sRUFB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QUM7SUFDSCx5QkFBQztBQUFELENBQUMsQUFsQkQsSUFrQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RvciwgQ29tcG9uZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFR5cGVDb252ZXJ0ZXIgfSBmcm9tICdAZmFycmlzL2lkZS1wcm9wZXJ0eS1wYW5lbCc7XHJcbmltcG9ydCB7IFBlcmZvcm1lclVJU3RhdGUgfSBmcm9tICcuL3BlcmZvcm1lci51aXN0YXRlJztcclxuaW1wb3J0IHsgUGVyZm9ybWVyUmVwb3NpdG9yeSB9IGZyb20gJy4vcGVyZm9ybWVyLnJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJWaWV3TW9kZWwgfSBmcm9tICcuL3BlcmZvcm1lci52aWV3bW9kZWwnO1xyXG5pbXBvcnQgeyBGb3JtQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UsIEJzTW9kYWxSZWYgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgUGVyZm9ybWVyRWRpdENvbXBvbmVudCB9IGZyb20gJy4vdmlld3MvcGVyZm9ybWVyLWVkaXQvcGVyZm9ybWVyLWVkaXQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IFBlcmZvcm1lck9wdGlvbnNDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdzL3BlcmZvcm1lci1vcHRpb25zL3BlcmZvcm1lci1vcHRpb25zLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgUGVyZm9ybWVyRW50aXR5IH0gZnJvbSAnLi9lbnRpdGllcy9wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4uLy4uL2FwcC9wcm9jZXNzLWRlc2lnbmVyLnVpc3RhdGUnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uU2VydmljZSwgSW5qZWN0ZWRUeXBlLCBFeHByRWRpdE1vZGUgfSBmcm9tICdAZ3NwLXN2Yy9leHByZXNzaW9uJztcclxuaW1wb3J0IHsgUmVwb3J0aW5nTGluZURhdGFFbnRpdHkgfSBmcm9tICcuL3ZpZXdzL3JlcG9ydGluZy1saW5lL3JlcG9ydGluZy1saW5lLWRhdGEuZW50aXR5JztcclxuaW1wb3J0IHsgUGVyZm9ybWVySW5mbyB9IGZyb20gJy4vZW50aXRpZXMvcGVyZm9ybWVyLWluZm8uZW50aXR5JztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiwgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2Z9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBQb3NpdGlvblBlcmZvcm1lckVudGl0eSB9IGZyb20gJy4vZW50aXRpZXMvcG9zaXRpb24tcGVyZm9ybWVyLmVudGl0eSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IENvbXBvbmVudFBlcmZvcm1lciB9IGZyb20gJy4vdmlld3MvY29tcG9uZW50LXBlcmZvcm1lci9jb21wb25lbnQtcGVyZm9ybWVyLmVudGl0eSc7XHJcbmltcG9ydCB7TWF0cml4RGF0YUluZm9FbnRpdHl9IGZyb20gJy4vdmlld3MvbWF0cml4LXBlcmZvcm1lci9lbnRpdGlzL21hdHJpeC1kYXRhLWluZm8uZW50aXR5JztcclxuaW1wb3J0IHtGRHJvcGRvd25EaXJlY3RpdmV9IGZyb20gXCJAZmFycmlzL3VpLWRyb3Bkb3duXCI7XHJcbmltcG9ydCB7IEFzc2lnblBlcmZvcm1lckNvbmZpZ0NvbXBvbmVudCB9IGZyb20gJy4uL2Fzc2lnbi1wZXJmb3JtZXItY29uZmlnL2Fzc2lnbi1wZXJmb3JtZXItY29uZmlnLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZVV0aWwgfSBmcm9tICcuLi8uLi9kb21haW4vcHJvY2Vzcy1kZS11dGlsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXBlcmZvcm1lcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3BlcmZvcm1lci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcGVyZm9ybWVyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbUGVyZm9ybWVyVmlld01vZGVsLCBQZXJmb3JtZXJSZXBvc2l0b3J5LCBQZXJmb3JtZXJVSVN0YXRlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUGVyZm9ybWVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgZGlzcGxheSA9IHRydWU7IC8vIOaOp+WItuefqemYteWPguS4juiAheaYr+WQpuaYvuekulxyXG5cclxuICB0eXBlOiAnZGVmYXVsdFBlcmZvcm1lcicgfCAnYXNzaWduUGVyZm9ybWVyJyA9ICdkZWZhdWx0UGVyZm9ybWVyJztcclxuICBub2RlVHlwZTogJ3VzZXJBY3Rpdml0eScgfCAnbm90aWZ5QWN0aXZpdHknICA9ICd1c2VyQWN0aXZpdHknO1xyXG5cclxuICBAVmlld0NoaWxkKCdpY29uU2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnZWRpdEZvb3RlcicpIGVkaXRGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZChQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50KSBvcHRpb25zOiBQZXJmb3JtZXJPcHRpb25zQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ3BhcnRpY2lwYW50T3B0aW9ucycpIG9wdGlvbnNEaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKERhdGFncmlkQ29tcG9uZW50KSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkVsJykgZHJvcERvd25FbDogRkRyb3Bkb3duRGlyZWN0aXZlOyAvLyDop6PlhrPpgInmi6nmhI/op4HlkI7vvIzkuIvmi4noj5zljZXml6Dms5XmlLbmipjnmoTpl67pophcclxuXHJcbiAgQE91dHB1dCgpIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgc3VibWl0TW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgdmFsdWUocGFydEluZm86IFBlcmZvcm1lckluZm8pIHtcclxuICAgIGlmIChwYXJ0SW5mby5wZXJmb3JtZXJzICYmIHBhcnRJbmZvLnBlcmZvcm1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzID0gcGFydEluZm8ucGVyZm9ybWVycztcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmNvbmNhdChwYXJ0SW5mby5wZXJmb3JtZXJzIGFzIGFueVtdKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0Lm1hcChwZXJmb3JtZXIgPT4gcGVyZm9ybWVyLmRlc2NyaXB0aW9uID0gdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXIgYXMgYW55KSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydEluZm8udmFyaWFibGVQZXJmb3JtZXJzICYmIHBhcnRJbmZvLnZhcmlhYmxlUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnZhcmlhYmxlUGVyZm9ybWVycyA9IHBhcnRJbmZvLnZhcmlhYmxlUGVyZm9ybWVycztcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmNvbmNhdChwYXJ0SW5mby52YXJpYWJsZVBlcmZvcm1lcnMgYXMgYW55W10pO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QubWFwKHZhcmlhYmxlUGVyZm9ybWVycyA9PiB2YXJpYWJsZVBlcmZvcm1lcnMuZGVzY3JpcHRpb24gPSB0aGlzLnBlcmZvcm1lckRlc2NyaXB0aW9uKHZhcmlhYmxlUGVyZm9ybWVycyBhcyBhbnkpKTtcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5jb21wb25lbnRzICYmIHBhcnRJbmZvLmNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzID0gcGFydEluZm8uY29tcG9uZW50cztcclxuICAgICAgcGFydEluZm8uY29tcG9uZW50cy5mb3JFYWNoKGNtcCA9PiB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgaWQ6IGNtcC5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogY21wLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb21wb25lbnREZXNjcmlwdGlvbihjbXApLFxyXG4gICAgICAgICAgY29uZGl0aW9uOiBjbXAuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcnRJbmZvLnJlcG9ydGluZ0xpbmVzICYmIHBhcnRJbmZvLnJlcG9ydGluZ0xpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMgPSBwYXJ0SW5mby5yZXBvcnRpbmdMaW5lcztcclxuICAgICAgcGFydEluZm8ucmVwb3J0aW5nTGluZXMuZm9yRWFjaChyID0+IHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpZDogci5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgIHBlcmZvcm1lck5hbWU6IHIucmVwb3J0aW5nTGluZURlZk5hbWUgKyAnLScgKyByLmRpbWVuc2lvbixcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnJlcG9ydGluZ0xpbmVEZXNjcmlwdGlvbihyKSxcclxuICAgICAgICAgIGNvbmRpdGlvbjogci5jb25kaXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZihwYXJ0SW5mby5hY3Rpdml0eUV4ZWN1dG9ycyAmJiBwYXJ0SW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzID0gcGFydEluZm8uYWN0aXZpdHlFeGVjdXRvcnM7XHJcbiAgICAgIHBhcnRJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZvckVhY2goaGFuZGxlciA9PiB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LnB1c2goe1xyXG4gICAgICAgICAgaWQ6IGhhbmRsZXIuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICBwZXJmb3JtZXJOYW1lOiAnPCcgKyBoYW5kbGVyLmFjdGl2aXR5RGVmTmFtZSArICc+5rS75Yqo5Yqe55CG5Lq6JyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnPCcgKyBoYW5kbGVyLmFjdGl2aXR5RGVmTmFtZSArICc+5rS75Yqo5Yqe55CG5Lq6JyxcclxuICAgICAgICAgIGNvbmRpdGlvbjogaGFuZGxlci5jb25kaXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5tYXRyaXhQYXJ0aWNpcGFudHMgJiYgcGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzID0gcGFydEluZm8ubWF0cml4UGFydGljaXBhbnRzO1xyXG4gICAgICBwYXJ0SW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZm9yRWFjaChyID0+IHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpZDogci5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogci5tYXRyaXhEZWZOYW1lICsgJy0nICsgci5kYXRhRmllbGRBbGlhcyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLm1hdHJpeERlc2NyaXB0aW9uKHIpLFxyXG4gICAgICAgICAgY29uZGl0aW9uOiByLmNvbmRpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMgJiYgcGFydEluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzID0gcGFydEluZm8ub3JnYW5pemF0aW9uUGFydGljaXBhbnRzO1xyXG4gICAgICBwYXJ0SW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMuZm9yRWFjaChvID0+IHtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpZDogby5pZCxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogby5vcmdhbml6YXRpb25OYW1lLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IG8ub3JnYW5pemF0aW9uTmFtZSArJ++8jCcgKyhvLmluY2x1ZGVDaGlsZHJlbiA/ICfljIXlkKvkuIvnuqcnOifkuI3ljIXlkKvkuIvnuqcnKSxcclxuICAgICAgICAgIGNvbmRpdGlvbjogby5jb25kaXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChwYXJ0SW5mby5vcHRpb25zKSB7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9wdGlvbnMgPSBwYXJ0SW5mby5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uaXNBbGxTY29wZSA9IHBhcnRJbmZvLmlzQWxsU2NvcGU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xyXG5cclxuICBlZGl0RGlhbG9nOiBCc01vZGFsUmVmO1xyXG4gIGNvbXBSZWY6IENvbXBvbmVudFJlZjxQZXJmb3JtZXJFZGl0Q29tcG9uZW50PjtcclxuICBpc0Nsb3NlID0gdHJ1ZTtcclxuXHJcbiAgbW9kYWxDb25maWcgPSB7XHJcbiAgICB0aXRsZTogJ+WPguS4juiAhScsXHJcbiAgICB3aWR0aDogNzAwLFxyXG4gICAgaGVpZ2h0OiA0MDAsXHJcbiAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIH07XHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHtcclxuICAgICAgZmllbGQ6ICd0eXBlJywgd2lkdGg6IDUwLCB0aXRsZTogJ+exu+WeiycsXHJcbiAgICAgIGZvcm1hdHRlcjoge1xyXG4gICAgICAgIHR5cGU6ICdlbnVtJyxcclxuICAgICAgICBvcHRpb25zOiB7IHZhbHVlRmllbGQ6ICd2YWx1ZScsIHRleHRGaWVsZDogJ3RleHQnLCBkYXRhOiB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb24gfVxyXG4gICAgICB9XHJcbiAgICAgfSxcclxuICAgIHsgZmllbGQ6ICdwZXJmb3JtZXJOYW1lJywgd2lkdGg6IDUwLCB0aXRsZTogJ+WQjeensCcgfSxcclxuICAgIHsgZmllbGQ6ICdkZXNjcmlwdGlvbicsIHdpZHRoOiAxMDAsIHRpdGxlOiAn5o+P6L+wJywgc2hvd1RpcHM6IHRydWUgfSxcclxuICAgIHtcclxuICAgICAgZmllbGQ6ICdjb25kaXRpb24nLCB3aWR0aDogNjAsIHRpdGxlOiAn5ZCv55So5p2h5Lu2Jywgc2hvd1RpcHM6IHRydWUsXHJcbiAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgZ3JvdXBUZXh0OiAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nLFxyXG4gICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZS5pbnN0YW5jZS52YWx1ZSA/IGUuaW5zdGFuY2UudmFsdWUgOiAnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdENvbmRpdG9uKGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNsZWFyOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5yb3dEYXRhLnR5cGUgPT09ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZS5yb3dEYXRhLmlkKTtcclxuICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzW2ldLmNvbmRpdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZS5yb3dEYXRhLmlkKTtcclxuICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lc1tpXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnJvd0RhdGEudHlwZSA9PT0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGUucm93RGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzW2ldLmNvbmRpdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUucm93RGF0YS50eXBlID09PSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gZS5yb3dEYXRhLmlkKTtcclxuICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9yc1tpXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnJvd0RhdGEudHlwZSA9PT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpe1xyXG4gICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50c1swXS5jb25kaXRpb24gPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIGN1clBlcmZvcm1lcjogYW55O1xyXG4gIGVkaXRTdGF0ZSA9ICduZXcnOyAvLyDnvJbovpHnirbmgIHvvIznlKjkuo7ljLrliIbmmK/mlrDlop7ov5jmmK/nvJbovpEgIG5ldyB8IGVkaXRcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgdmlld01vZGVsOiBQZXJmb3JtZXJWaWV3TW9kZWwsXHJcbiAgICBwdWJsaWMgdWlzdGF0ZTogUGVyZm9ybWVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHB1YmxpYyBkZXNpZ25lclVJU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGV4cHI6IEV4cHJlc3Npb25TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwU2VydmljZSxcclxuICApIHtcclxuICAgIHRoaXMuR2V0T3JnYW5pemF0aW9uVHlwZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmVkaXRvclBhcmFtcy50eXBlO1xyXG4gICAgdGhpcy5ub2RlVHlwZSA9IHRoaXMuZWRpdG9yUGFyYW1zLm5vZGVUeXBlO1xyXG4gICAgdGhpcy5nZXRNYXRyaXhDb25maWcoKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICBpZiAocmUgJiYgcmUuY3VycmVudFZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzd2l0Y2hDaGFuZ2UoZGF0YTogYm9vbGVhbikge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy51aXN0YXRlLmNsZWFyUGVyZm9ybWVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIGFkZCgpIHtcclxuICAvLyAgIHRoaXMuZWRpdFN0YXRlID0gJ25ldyc7XHJcbiAgLy8gICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUGVyZm9ybWVyRWRpdENvbXBvbmVudCk7XHJcbiAgLy8gICB0aGlzLmNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgLy8gICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UuZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcclxuXHJcbiAgLy8gICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAvLyAgICAgdGl0bGU6ICflj4LkuI7ogIXpgInmi6knLFxyXG4gIC8vICAgICB3aWR0aDogNzAwLFxyXG4gIC8vICAgICBoZWlnaHQ6IDQwMCxcclxuICAvLyAgICAgYnV0dG9uczogdGhpcy5lZGl0Rm9vdGVyLFxyXG4gIC8vICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gIC8vICAgfTtcclxuICAvLyAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgLy8gfVxyXG4gIGFkZFBlcmZvcm1lcihwZXJmb3JtZXJUeXBlOiBzdHJpbmcpe1xyXG4gICAgdGhpcy5lZGl0U3RhdGUgPSAnbmV3JztcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShQZXJmb3JtZXJFZGl0Q29tcG9uZW50KTtcclxuICAgIHRoaXMuY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5kaXNwbGF5ID0gdGhpcy5kaXNwbGF5O1xyXG4gICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lclR5cGUgPSBwZXJmb3JtZXJUeXBlO1xyXG5cclxuICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICB0aXRsZTogJ+WPguS4juiAhemAieaLqScsXHJcbiAgICAgIHdpZHRoOiA3MDAsXHJcbiAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICBidXR0b25zOiB0aGlzLmVkaXRGb290ZXIsXHJcbiAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgdGhpcy5lZGl0RGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh0aGlzLmNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIHRoaXMuZHJvcERvd25FbC5jbG9zZSgpO1xyXG4gIH1cclxuICBlZGl0KCkge1xyXG4gICAgdGhpcy5lZGl0U3RhdGUgPSAnZWRpdCc7XHJcbiAgICBpZiAodGhpcy51aXN0YXRlLmN1clBlcmZvcm1lcikge1xyXG4gICAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgICB0aXRsZTogJ+WPguS4juiAhemAieaLqScsXHJcbiAgICAgICAgd2lkdGg6IDcwMCxcclxuICAgICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgICBidXR0b25zOiB0aGlzLmVkaXRGb290ZXIsXHJcbiAgICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFBlcmZvcm1lckVkaXRDb21wb25lbnQpO1xyXG4gICAgICB0aGlzLmNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXJUeXBlID0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci50eXBlO1xyXG4gICAgICBzd2l0Y2ggKHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3dmLlBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Qb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLmlkKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLlVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5WYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8udmFyaWFibGVQZXJmb3JtZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLmlkKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nOlxyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnJlcG9ydGluZ0xpbmVzLmZpbmQociA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByLmlkID09PSB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLmlkO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiByZXBvcnRpbmdMaW5lXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL3JlcG9ydGluZ0xpbmVEZWZpbml0aW9ucy8nICsgcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQ7XHJcbiAgICAgICAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcign6K+l5p2h5rGH5oql5YWz57O75pWw5o2u55qE5a6a5LmJ5bey5Yig6Zmk77yM6K+l5p2h5pWw5o2u5bCG5Yig6ZmkJylcclxuICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kKHIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gci5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5jb21wUmVmLmluc3RhbmNlLnBlcmZvcm1lciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHZhbHVlOiBtYXRyaXhcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCB1cmxNYXRyaXggPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvbWF0cml4RGVmaW5pdGlvbi8nICsgbWF0cml4Lm1hdHJpeERlZklkO1xyXG4gICAgICAgICAgdGhpcy5odHRwLmdldCh1cmxNYXRyaXgpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeadoeefqemYteaVsOaNrueahOWumuS5ieW3suWIoOmZpO+8jOivpeadoeaVsOaNruWwhuWIoOmZpCcpXHJcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVkaXREaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZChjID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci5pZDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJzpcclxuICAgICAgICAgIHRoaXMuY29tcFJlZi5pbnN0YW5jZS5wZXJmb3JtZXIgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZpbmQoIGMgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiBjLmlkID09PSB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyLmlkO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbic6XHJcbiAgICAgICAgICB0aGlzLmNvbXBSZWYuaW5zdGFuY2UucGVyZm9ybWVyID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50c1swXVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMudWlzdGF0ZS5jdXJQZXJmb3JtZXIudHlwZSAhPT0gJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nICYmXHJcbiAgICAgICAgdGhpcy51aXN0YXRlLmN1clBlcmZvcm1lci50eXBlICE9PSAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyl7IC8vIOaxh+aKpeWFs+ezu+WSjOefqemYteWNleeLrOWkhOeQhlxyXG4gICAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3codGhpcy5jb21wUmVmLCBtb2RhbENvbmZpZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdykge1xyXG4gICAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbicpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS50eXBlID09PSAnd2YuVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnZhcmlhYmxlUGVyZm9ybWVycy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8udmFyaWFibGVQZXJmb3JtZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLmdyaWQuc2VsZWN0ZWRSb3cuZGF0YS5pZCk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIHRoaXMuZ3JpZC5sb2FkRGF0YSh0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+ivt+WFiOmAieS4reS4gOadoeWPguS4juiAheS/oeaBr++8gScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnZhcmlhYmxlUGVyZm9ybWVycyA9IFtdO1xyXG4gICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cyA9IFtdO1xyXG4gICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cyA9IFtdO1xyXG4gICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnMgPSBbXTtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gW107XHJcbiAgICB0aGlzLmdyaWQubG9hZERhdGEodGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0KTtcclxuICB9XHJcblxyXG4gIGNsaWNrT0soKSB7XHJcbiAgICB0aGlzLmdyaWQuZW5kQ2VsbEVkaXQoKTtcclxuICAgIGNvbnN0IG9iamVjdCA9IHtcclxuICAgICAgdmFsdWU6IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLCBwYXJhbWV0ZXJzOiBudWxsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KG9iamVjdCk7XHJcbiAgfVxyXG4gIGNsaWNrQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcclxuICB9XHJcbiAgZWRpdE9LKCkge1xyXG4gICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLmNvbXBSZWYpIHtcclxuICAgICAgY29uc3QgcmUgPSB0aGlzLmNvbXBSZWYuaW5zdGFuY2UuZ2V0UGVyZm9ybWVycygpO1xyXG4gICAgICBpZiAocmUudXNlclBlcmZvcm1lcnMgJiYgcmUudXNlclBlcmZvcm1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlLnVzZXJQZXJmb3JtZXJzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5maW5kSW5kZXgoYSA9PiAoYS5pZCA9PT0gcC5pZCB8fCBhLnBlcmZvcm1lcklkID09PSBwLnBlcmZvcm1lcklkKSk7XHJcbiAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXS5pZDtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXSA9IHA7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0W2luZGV4XSA9IHA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0U3RhdGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVycy5wdXNoKHApO1xyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuY29uY2F0KFtwXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0XHJcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gcC50eXBlID09PSB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb25bMF0udmFsdWUgfHwgcC50eXBlID09PSB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb25bMV0udmFsdWUgKVxyXG4gICAgICAgICAgLm1hcChwZXJmb3JtZXIgPT4gcGVyZm9ybWVyLmRlc2NyaXB0aW9uID1cclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXIgYXMgYW55KSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLnBvc2l0aW9ucyAmJiByZS5wb3NpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcmUucG9zaXRpb25zKSB7XHJcbiAgICAgICAgICBpZiAocG9zaXRpb24gJiYgcG9zaXRpb24gIT09IG51bGwgJiYgcG9zaXRpb24uaWQpIHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAoIXAucGVyZm9ybWVySWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5bCa5pyq6YCJ5oup5bKX5L2N77yBJyk7XHJcbiAgICAgICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKCghcC5vcmdUeXBlIHx8IHAub3JnVHlwZSA9PSBudWxsKSAmJiAocC5pc1JlcXVpcmVkICYmIHAucG9zaXRpb25UeXBlID09PSAnMScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn5bCa5pyq6YCJ5oup57uE57uH57G75Z6L77yBJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCghcC5vcmdJZCB8fCBwLm9yZ0lkID09IG51bGwpICYmIChwLmlzUmVxdWlyZWQgJiYgcC5wb3NpdGlvblR5cGUgPT09ICcxJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCflsJrmnKrloavlhpnnu4Tnu4fvvIEnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAoMSlpZOS4gOiHtO+8jOS4uue8lui+keWyl+S9je+8m++8iDLvvIlwZXJmb3JtaWTkuIDoh7TvvIzmlrDlop7nmoTnlKjmiLfvvIzlspfkvY3lt7LlrZjlnKhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLmZpbmRJbmRleChhID0+IChhLmlkID09PSBwLmlkIHx8IChhLnBlcmZvcm1lcklkID09PSBwLnBlcmZvcm1lcklkICYmIGEub3JnSWQgPT09IHAub3JnSWQpKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXS5pZDtcclxuICAgICAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucGVyZm9ybWVyc1tpXSA9IHA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0W2luZGV4XSA9IHA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5wZXJmb3JtZXJzLnB1c2gocCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQoW3BdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFxyXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC50eXBlID09PSB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb25bMF0udmFsdWUgfHwgcC50eXBlID09PSB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb25bMV0udmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgIC5tYXAocGVyZm9ybWVyID0+IHBlcmZvcm1lci5kZXNjcmlwdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXIgYXMgYW55KSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmUuY29tcG9uZW50ICYmIHJlLmNvbXBvbmVudC5tZXRhZGF0YUlkICYmIHJlLmNvbXBvbmVudC5tZXRob2RDb2RlKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmNvbXBvbmVudHMuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUuY29tcG9uZW50LmlkKTtcclxuICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzW2ldID0gcmUuY29tcG9uZW50O1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gcmUuY29tcG9uZW50LmlkKTtcclxuICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSB7XHJcbiAgICAgICAgICAgIGlkOiByZS5jb21wb25lbnQuaWQsXHJcbiAgICAgICAgICAgIHR5cGU6ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5jb21wb25lbnQubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY29tcG9uZW50RGVzY3JpcHRpb24ocmUuY29tcG9uZW50KSxcclxuICAgICAgICAgICAgY29uZGl0aW9uOiByZS5jb21wb25lbnQuY29uZGl0aW9uXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5jb21wb25lbnRzLnB1c2gocmUuY29tcG9uZW50KTtcclxuICAgICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgaWQ6IHJlLmNvbXBvbmVudC5pZCxcclxuICAgICAgICAgICAgdHlwZTogJ3dmLkNvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgICAgIHBlcmZvcm1lck5hbWU6IHJlLmNvbXBvbmVudC5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb21wb25lbnREZXNjcmlwdGlvbihyZS5jb21wb25lbnQpLFxyXG4gICAgICAgICAgICBjb25kaXRpb246ICcnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLnJlcG9ydGluZ0xpbmUgJiYgcmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmSWQgJiYgcmUucmVwb3J0aW5nTGluZS5kaW1lbnNpb24pIHtcclxuICAgICAgICBpZihyZS5yZXBvcnRpbmdMaW5lLnJlcG9ydGluZ1JlZmVyT2JqZWN0ID09PSAnZGVwdCcgJiYgIXJlLnJlcG9ydGluZ0xpbmUucmVmT3JnSWQpe1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbygn4oCc6YOo6Zeo4oCd5rGH5oql5YWz57O757G75Z6L5LiL77yM5Y+C54Wn5Lq65omA5Zyo6YOo6Zeo5LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZS5yZXBvcnRpbmdMaW5lLnJlcG9ydGluZ1JlZmVyT2JqZWN0ICE9PSAnZGVwdCcgJiYgIXJlLnJlcG9ydGluZ0xpbmUucmVmVXNlcklkICYmICFyZS5yZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpIHsgLy8g55So5oi35Y+K5YW25LuW5Lq65ZGY5rGH5oql5a+56LGh57G75Z6L77yM5Y+C54Wn55So5oi35ZKM5Y+C54Wn5ZGY5bel5LiN6IO95YWo6YOo5Li656m6XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfigJznlKjmiLfigJ3msYfmiqXlhbPns7vnsbvlnovkuIvvvIzlj4LnhafkurrkuI3og73kuLrnqbonKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5pc0Nsb3NlID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuYWRkUmVwb3J0aW5nTGluZURhdGEocmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAocmUubWF0cml4ICYmIHJlLm1hdHJpeC5tYXRyaXhEZWZJZCkge1xyXG4gICAgICAgIGlmKCFyZS5tYXRyaXguY29uZGl0aW9uRmllbGQxICYmICFyZS5tYXRyaXguY29uZGl0aW9uRmllbGQyICYmICFyZS5tYXRyaXguY29uZGl0aW9uRmllbGQzKXtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+adoeS7tuWtl+auteiHs+WwkeimgeWtmOWcqOS4gOS4qicpO1xyXG4gICAgICAgIH0gZWxzZSBpZighcmUubWF0cml4LmRhdGFGaWVsZEFsaWFzKXtcclxuICAgICAgICAgIHRoaXMuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLmluZm8oJ+aVsOaNruWtl+auteS4jeiDveS4uuepuicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmlzQ2xvc2UgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5hZGRNYXRyaXhEYXRhKHJlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzICYmIHJlLmFjdGl2aXR5RXhlY3V0b3JQZXJmb3JtZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZS5hY3Rpdml0eUV4ZWN1dG9yUGVyZm9ybWVycy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLmFjdGl2aXR5RXhlY3V0b3JzLmZpbmRJbmRleChhID0+IChhLmlkID09PSBwLmlkIHx8IGEuYWN0aXZpdHlEZWZJZCA9PT0gcC5hY3Rpdml0eURlZklkKSk7XHJcbiAgICAgICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFN0YXRlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOyAvLyDlnKjnvJbovpHnirbmgIHkuIvphY3nva7kuobmtLvliqjlip7nkIbkurrlj4LkuI7ogIXvvIzlhYjlsIbpgInkuK3nmoTliKDpmaRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5hY3Rpdml0eUV4ZWN1dG9ycy5wdXNoKHApO1xyXG4gICAgICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QuY29uY2F0KFtwXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0XHJcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gcC50eXBlID09PSB0aGlzLnVpc3RhdGUudHlwZUNvbGxlY3Rpb25bNV0udmFsdWUgKVxyXG4gICAgICAgICAgLm1hcChwZXJmb3JtZXIgPT4gcGVyZm9ybWVyLmRlc2NyaXB0aW9uID1cclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtZXJEZXNjcmlwdGlvbihwZXJmb3JtZXIgYXMgYW55KSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmUub3JnYW5pemF0aW9uUGFydGljaXBhbnQpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50cyA9IFtyZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudF07XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbHRlcihwID0+IHAudHlwZSAhPT0gJ3dmLk9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbicpO1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5jb25jYXQoe1xyXG4gICAgICAgICAgaWQ6IHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmlkIHx8IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKSxcclxuICAgICAgICAgIHR5cGU6ICd3Zi5Pcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUub3JnYW5pemF0aW9uUGFydGljaXBhbnQub3JnYW5pemF0aW9uTmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiByZS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lICsn77yM5LiUJyArKHJlLm9yZ2FuaXphdGlvblBhcnRpY2lwYW50LmluY2x1ZGVDaGlsZHJlbiA/ICfljIXlkKvkuIvnuqcnOifkuI3ljIXlkKvkuIvnuqcnKSxcclxuICAgICAgICAgIGNvbmRpdGlvbjogcmUub3JnYW5pemF0aW9uUGFydGljaXBhbnQuY29uZGl0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ncmlkLmxvYWREYXRhKHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lZGl0RGlhbG9nICYmIHRoaXMuaXNDbG9zZSkge1xyXG4gICAgICB0aGlzLmVkaXREaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBhZGRSZXBvcnRpbmdMaW5lRGF0YShyZTogYW55KXtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZS5yZXBvcnRpbmdMaW5lLmlkKTtcclxuICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXNbaV0gPSByZS5yZXBvcnRpbmdMaW5lO1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdC5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZS5yZXBvcnRpbmdMaW5lLmlkKTtcclxuICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0W2luZGV4XSA9IHtcclxuICAgICAgICBpZDogcmUucmVwb3J0aW5nTGluZS5pZCxcclxuICAgICAgICB0eXBlOiAnd2YuUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbicsXHJcbiAgICAgICAgcGVyZm9ybWVyTmFtZTogcmUucmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmTmFtZSArICctJyArIHJlLnJlcG9ydGluZ0xpbmUuZGltZW5zaW9uLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnJlcG9ydGluZ0xpbmVEZXNjcmlwdGlvbihyZS5yZXBvcnRpbmdMaW5lKSxcclxuICAgICAgICBjb25kaXRpb246IHJlLnJlcG9ydGluZ0xpbmUuY29uZGl0aW9uXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IoY29uc3QgcmVwb3J0aW5nTGluZURhdGEgb2YgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMpe1xyXG4gICAgICAgIGlmKHJlcG9ydGluZ0xpbmVEYXRhLnJlcG9ydGluZ0xpbmVEZWZJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5kZWZpbml0aW9uSWQgJiZcclxuICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLmRpbWVuc2lvbiA9PT0gcmUucmVwb3J0aW5nTGluZS5kaW1lbnNpb24gJiZcclxuICAgICAgICAgIHJlcG9ydGluZ0xpbmVEYXRhLnJlZlVzZXJJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZlclVzZXJJZCAmJlxyXG4gICAgICAgICAgcmVwb3J0aW5nTGluZURhdGEucmVmRW1wbG95ZWVJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkICYmXHJcbiAgICAgICAgICByZXBvcnRpbmdMaW5lRGF0YS5yZWZPcmdJZCA9PT0gcmUucmVwb3J0aW5nTGluZS5yZWZlckRlcHRJZFxyXG4gICAgICAgICl7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeaxh+aKpeWFs+ezu+W3sue7j+i/m+ihjOi/h+mFjee9ricpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5yZXBvcnRpbmdMaW5lcy5wdXNoKHJlLnJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgaWQ6IHJlLnJlcG9ydGluZ0xpbmUuaWQsXHJcbiAgICAgICAgdHlwZTogJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nLFxyXG4gICAgICAgIHBlcmZvcm1lck5hbWU6IHJlLnJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZk5hbWUgKyAnLScgKyByZS5yZXBvcnRpbmdMaW5lLmRpbWVuc2lvbixcclxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5yZXBvcnRpbmdMaW5lRGVzY3JpcHRpb24ocmUucmVwb3J0aW5nTGluZSksXHJcbiAgICAgICAgY29uZGl0aW9uOiByZS5yZXBvcnRpbmdMaW5lLmNvbmRpdGlvblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBhZGRNYXRyaXhEYXRhKHJlOiBhbnkpe1xyXG4gICAgY29uc3QgaSA9IHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm1hdHJpeFBhcnRpY2lwYW50cy5maW5kSW5kZXgoYSA9PiBhLmlkID09PSByZS5tYXRyaXguaWQpO1xyXG4gICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHNbaV0gPSByZS5tYXRyaXg7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51aXN0YXRlLnBlcmZvcm1lcnNMaXN0LmZpbmRJbmRleChhID0+IGEuaWQgPT09IHJlLm1hdHJpeC5pZCk7XHJcbiAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJzTGlzdFtpbmRleF0gPSB7XHJcbiAgICAgICAgaWQ6IHJlLm1hdHJpeC5pZCxcclxuICAgICAgICB0eXBlOiAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5tYXRyaXgubWF0cml4RGVmTmFtZSArICctJyArIHJlLm1hdHJpeC5kYXRhRmllbGRBbGlhcyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5tYXRyaXhEZXNjcmlwdGlvbihyZS5tYXRyaXgpLFxyXG4gICAgICAgIGNvbmRpdGlvbjogcmUubWF0cml4LmNvbmRpdGlvblxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yKGNvbnN0IG1hdHJpeERhdGEgb2YgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ubWF0cml4UGFydGljaXBhbnRzKXtcclxuICAgICAgICBpZihtYXRyaXhEYXRhLm1hdHJpeERlZklkID09PSByZS5tYXRyaXgubWF0cml4RGVmSWQgJiZcclxuICAgICAgICAgIG1hdHJpeERhdGEuY29uZGl0aW9uRmllbGQxID09PSByZS5tYXRyaXguY29uZGl0aW9uRmllbGQxICYmXHJcbiAgICAgICAgICBtYXRyaXhEYXRhLmNvbmRpdGlvbkZpZWxkMiA9PT0gcmUubWF0cml4LmNvbmRpdGlvbkZpZWxkMiAmJlxyXG4gICAgICAgICAgbWF0cml4RGF0YS5jb25kaXRpb25GaWVsZDMgPT09IHJlLm1hdHJpeC5jb25kaXRpb25GaWVsZDMgJiZcclxuICAgICAgICAgIG1hdHJpeERhdGEuZGF0YUZpZWxkQWxpYXMgPT09IHJlLm1hdHJpeC5kYXRhRmllbGRBbGlhc1xyXG4gICAgICAgICl7XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuZXJyb3IoJ+ivpeefqemYteW3sue7j+i/m+ihjOi/h+mFjee9ricpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMucHVzaChyZS5tYXRyaXgpO1xyXG4gICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVyc0xpc3QucHVzaCh7XHJcbiAgICAgICAgaWQ6IHJlLm1hdHJpeC5pZCxcclxuICAgICAgICB0eXBlOiAnd2YuTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uJyxcclxuICAgICAgICBwZXJmb3JtZXJOYW1lOiByZS5tYXRyaXgubWF0cml4RGVmTmFtZSArICctJyArIHJlLm1hdHJpeC5kYXRhRmllbGRBbGlhcyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5tYXRyaXhEZXNjcmlwdGlvbihyZS5tYXRyaXgpLFxyXG4gICAgICAgIGNvbmRpdGlvbjogcmUubWF0cml4LmNvbmRpdGlvblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgZWRpdENhbmNlbCgpIHtcclxuICAgIGlmICh0aGlzLmVkaXREaWFsb2cpIHtcclxuICAgICAgdGhpcy5lZGl0RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhcnRpY2lwYW50T3B0aW9uc1NldCgpIHtcclxuICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuZ2V0UGVyZm9ybWVyT3B0aW9ucygpO1xyXG4gICAgdGhpcy5vcHRpb25zRGlhbG9nLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBlcmZvcm1lckRlc2NyaXB0aW9uKHBlcmZvcm1lcjogUGVyZm9ybWVyRW50aXR5KSB7XHJcbiAgICBpZiAocGVyZm9ybWVyLnR5cGUgPT09ICd3Zi5Vc2VyUGFydGljaXBhbnRFeHByZXNzaW9uJyB8fCBwZXJmb3JtZXIudHlwZSA9PT0gJ3dmLlZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICBpZiAocGVyZm9ybWVyLnRhZyA9PT0gJ2V4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIHBlcmZvcm1lci5wZXJmb3JtZXJJZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAocGVyZm9ybWVyLm9yZ05hbWUpIHtcclxuICAgICAgICAgIHJldHVybiBg57uE57uH77yaJHtwZXJmb3JtZXIub3JnTmFtZX1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHBlcmZvcm1lci50eXBlID09PSAnd2YuUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2VuZSA9PT0gJ2luU3VpdGUnKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKChwZXJmb3JtZXIgYXMgUG9zaXRpb25QZXJmb3JtZXJFbnRpdHkpLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSB7XHJcbiAgICAgICAgaWYgKHBlcmZvcm1lci5vcmdJZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGDlspfkvY3nsbvlnovvvJrpgJrnlKjlspfkvY3vvIznu4Tnu4fvvJoke3BlcmZvcm1lci5vcmdJZH1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gYOWyl+S9jeexu+Wei++8mumAmueUqOWyl+S9jWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKChwZXJmb3JtZXIgYXMgUG9zaXRpb25QZXJmb3JtZXJFbnRpdHkpLnBvc2l0aW9uVHlwZSA9PT0gJzAnKSB7XHJcbiAgICAgICAgcmV0dXJuICflspfkvY3nsbvlnovvvJrnu4Tnu4flspfkvY0nO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYocGVyZm9ybWVyLnR5cGUgPT09ICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gcGVyZm9ybWVyLnBlcmZvcm1lck5hbWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgY29tcG9uZW50RGVzY3JpcHRpb24oY29tcG9uZW50OiBDb21wb25lbnRQZXJmb3JtZXIpIHtcclxuICAgIGxldCBkZXMgPSBg5p6E5Lu277yaJHtjb21wb25lbnQubmFtZX0s5Y+C5pWw77yae2A7XHJcbiAgICBpZiAoY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMgJiYgY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycy5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgIGRlcyArPSBgJHtwLmNvZGV977yaJHtwLnZhbHVlfe+8jGA7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkZXMgPSBkZXMuc3Vic3RyaW5nKDAsIGRlcy5sZW5ndGggLSAxKTtcclxuICAgIH1cclxuICAgIGRlcyArPSAnfSc7XHJcbiAgICByZXR1cm4gZGVzO1xyXG4gIH1cclxuICBwcml2YXRlIHJlcG9ydGluZ0xpbmVEZXNjcmlwdGlvbihyZXBvcnRpbmdMaW5lOiBSZXBvcnRpbmdMaW5lRGF0YUVudGl0eSkge1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZihyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCl7XHJcbiAgICAgIGRlc2NyaXB0aW9uICs9IGDlj4LnhafkurrvvJoke3JlcG9ydGluZ0xpbmUucmVmVXNlcklkfWA7XHJcbiAgICB9XHJcbiAgICBpZihyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5Y+C54Wn5Lq677yaJHtyZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWR9YDtcclxuICAgIH1cclxuICAgIGlmKHJlcG9ydGluZ0xpbmUucmVmT3JnSWQpe1xyXG4gICAgICBpZihyZXBvcnRpbmdMaW5lLnJlZlVzZXJJZCl7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gKz0gYO+8jGA7XHJcbiAgICAgIH1cclxuICAgICAgaWYocmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkKXtcclxuICAgICAgICBkZXNjcmlwdGlvbiArPSBg77yMYDtcclxuICAgICAgfVxyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5Y+C54Wn57uE57uH77yaJHtyZXBvcnRpbmdMaW5lLnJlZk9yZ0lkfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVzY3JpcHRpb247XHJcbiAgfVxyXG4gIHByaXZhdGUgbWF0cml4RGVzY3JpcHRpb24obWF0cml4OiBNYXRyaXhEYXRhSW5mb0VudGl0eSkge1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICBpZihtYXRyaXguY29uZGl0aW9uRmllbGQxKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOadoeS7tjHvvJoke21hdHJpeC5jb25kaXRpb25GaWVsZFRleHQxfe+8jGA7XHJcbiAgICB9XHJcbiAgICBpZihtYXRyaXguY29uZGl0aW9uRmllbGQyKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOadoeS7tjLvvJoke21hdHJpeC5jb25kaXRpb25GaWVsZFRleHQyfe+8jGA7XHJcbiAgICB9XHJcbiAgICBpZihtYXRyaXguY29uZGl0aW9uRmllbGQzKXtcclxuICAgICAgZGVzY3JpcHRpb24gKz0gYOadoeS7tjPvvJoke21hdHJpeC5jb25kaXRpb25GaWVsZFRleHQzfe+8jGA7XHJcbiAgICB9XHJcbiAgICBpZihtYXRyaXguZGF0YUZpZWxkQWxpYXMpe1xyXG4gICAgICBkZXNjcmlwdGlvbiArPSBg5pWw5o2u77yaJHttYXRyaXguZGF0YUZpZWxkQWxpYXN977yMYDtcclxuICAgIH1cclxuICAgIHJldHVybiBkZXNjcmlwdGlvbi5zbGljZSgwLCBkZXNjcmlwdGlvbi5sZW5ndGggLSAxKTtcclxuICB9XHJcblxyXG4gIGVkaXRDb25kaXRvbihlOiBhbnkpIHtcclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgQXJyYXkoKTtcclxuICAgIGNvbnRleHQgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hZGRDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5hY3Rpdml0eUNvbXBvbmVudENvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLmFjdGl2aXR5Q29tcG9uZW50Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dChlLmluc3RhbmNlLnZhbHVlKTtcclxuICAgIHRoaXMuZXhwci5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQ29uZGl0aW9uYWwpOyAvLyDpu5jorqTmiZPlvIDnroDmmJPooajovr7lvI/nvJbovpHlmahcclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChjb25kOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5Db21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uY29tcG9uZW50cy5maW5kKGMgPT4gYy5pZCA9PT0gdGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEuaWQpLmNvbmRpdGlvbiA9IGNvbmQ7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncmlkLnNlbGVjdGVkUm93LmRhdGEudHlwZSA9PT0gJ3dmLlJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24nKSB7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8ucmVwb3J0aW5nTGluZXMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5NYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24nKXtcclxuICAgICAgICB0aGlzLnVpc3RhdGUucGVyZm9ybWVySW5mby5tYXRyaXhQYXJ0aWNpcGFudHMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLnR5cGUgPT09ICd3Zi5BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uJyl7XHJcbiAgICAgICAgdGhpcy51aXN0YXRlLnBlcmZvcm1lckluZm8uYWN0aXZpdHlFeGVjdXRvcnMuZmluZChjID0+IGMuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudWlzdGF0ZS5wZXJmb3JtZXJJbmZvLnBlcmZvcm1lcnMuZmluZChwID0+IHAuaWQgPT09IHRoaXMuZ3JpZC5zZWxlY3RlZFJvdy5kYXRhLmlkKS5jb25kaXRpb24gPSBjb25kO1xyXG4gICAgICB9XHJcbiAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoY29uZCk7XHJcbiAgICAgIGUuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFmdGVyRWRpdCA9IChyb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnksIGNvbHVtbj86IERhdGFDb2x1bW4pID0+IHtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdENoYW5nZWQoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnVpc3RhdGUuY3VyUGVyZm9ybWVyID0gZGF0YS5kYXRhO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBHZXRPcmdhbml6YXRpb25UeXBlKCkge1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hdXRoZmllbGRzL2dsb2JhbGF1dGhmaWVsZHMnO1xyXG4gICAgdGhpcy5odHRwLmdldCh1cmwpXHJcbiAgICAgIC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4gdGhpcy5kZXNpZ25lclVJU3RhdGUub3JnVHlwZUNvbGxlY3Rpb24gPSBkYXRhLm1hcChkID0+ICh7IHZhbHVlOiBkLmlkLCB0ZXh0OiBkLm5hbWUgfSkpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0TWF0cml4Q29uZmlnKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvZ2VuZXJhbENvbmZpZy9Jc19FbmFibGVNYXRyaXhgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICB9XHJcblxyXG59XHJcbmV4cG9ydCBjbGFzcyBQZXJmb3JtZXJDb252ZXJ0ZXIgaW1wbGVtZW50cyBUeXBlQ29udmVydGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBjb252ZXJ0VG8oZGF0YTogYW55KTogc3RyaW5nIHtcclxuICAgIGlmICgoZGF0YS5wZXJmb3JtZXJzICYmIGRhdGEucGVyZm9ybWVycy5sZW5ndGggPiAwKVxyXG4gICAgICB8fCAoZGF0YS52YXJpYWJsZVBlcmZvcm1lcnMgJiYgZGF0YS52YXJpYWJsZVBlcmZvcm1lcnMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEuY29tcG9uZW50cyAmJiBkYXRhLmNvbXBvbmVudHMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEucmVwb3J0aW5nTGluZXMgJiYgZGF0YS5yZXBvcnRpbmdMaW5lcy5sZW5ndGggPiAwKVxyXG4gICAgICB8fCAoZGF0YS5tYXRyaXhQYXJ0aWNpcGFudHMgJiYgZGF0YS5tYXRyaXhQYXJ0aWNpcGFudHMubGVuZ3RoID4gMClcclxuICAgICAgfHwgKGRhdGEuYWN0aXZpdHlFeGVjdXRvcnMgJiYgZGF0YS5hY3Rpdml0eUV4ZWN1dG9ycy5sZW5ndGggPiAwKVxyXG4gICAgICB8fCAoZGF0YS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMgJiYgZGF0YS5vcmdhbml6YXRpb25QYXJ0aWNpcGFudHMubGVuZ3RoID4gMClcclxuICAgICAgfHwgZGF0YS5pc0FsbFNjb3BlXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuICfvvIjlt7Lorr7nva7vvIknO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICfvvIjmnKrorr7nva7vvIknO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=