/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, ComponentFactoryResolver, HostBinding, Inject, Injector, Input, LOCALE_ID, Optional, ViewChild } from '@angular/core';
import { MatrixDefInfoEntity } from './entitis/matrix-def-info.entity';
import { MatrixDataInfoEntity } from './entitis/matrix-data-info.entity';
import { HttpService } from '@ecp-caf/caf-common';
import { of } from 'rxjs';
import { ExprEditMode, ExpressionService, InjectedType } from '@gsp-svc/expression';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { LookupGridComponent, ServerSideToken } from '@farris/ui-lookup';
import { BsModalService } from '@farris/ui-modal';
import { EnumListComponent } from './enum-list/enum-list.component';
import { MatrixDefHelpService } from './service/matrix-performer.component.service';
import { LookupDataService } from '@farris/lookup-config';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../../i18n/pipe/wf-process-editor-locale.pipe';
var MatrixPerformerComponent = /** @class */ (function () {
    function MatrixPerformerComponent(http, designerUIState, expr, modalService, resolver, injector, matDefService, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.http = http;
        this.designerUIState = designerUIState;
        this.expr = expr;
        this.modalService = modalService;
        this.resolver = resolver;
        this.injector = injector;
        this.matDefService = matDefService;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'd-flex flex-fill h-100';
        this.display = 'none';
        this.typeReadOnly = false;
        this.items = [];
        this.pageIndex = 1;
        this.pageSize = 20;
        this.pageList = [10, 20, 30, 50, 100];
        this.total = 0;
        this.groupIcon2 = '<i class="f-icon f-icon-lookup"></i>';
        this.fieldId = '';
        /**
         * 矩阵定义显示列
         */
        this.columns = [
            { title: this.localePipe.transform('component.matrixPerformer.code'), field: 'code', width: 100 },
            { title: this.localePipe.transform('component.matrixPerformer.name'), field: 'name', width: 100 }
        ];
        this.users = [];
        this.dataFieldAndValues = []; // { text: '部门', value: 'department' },
        // { text: '部门', value: 'department' },
        this.curDataFieldValue = '';
        this.matrixDefEntityList = [];
        this.curMatrixDefEntity = new MatrixDefInfoEntity();
        this.curMatrixDataEntity = new MatrixDataInfoEntity();
        this.conditionFields = [];
        this.exprGroup = [
            { name: this.localePipe.transform('component.matrixPerformer.help'), value: 'help' }
        ];
        this.mulGroup = [
            { name: this.localePipe.transform('component.matrixPerformer.multivalue'), value: 'Multivalue' }
        ];
        this.condition1ExprAble = true;
        this.condition2ExprAble = true;
        this.condition3ExprAble = true;
        this.condition1Multivalue = false;
        this.condition2Multivalue = false;
        this.condition3Multivalue = false;
        /**
         * 编辑器页面显示文字，防范浅拷贝问题（对于条件字段的值和显示文字都不要在当前实体中进行修改只有点击确定时，才将其保存至当前实体并返回）
         */
        this.condition1Text = '';
        this.condition1Value = '';
        this.condition2Text = '';
        this.condition2Value = '';
        this.condition3Text = '';
        this.condition3Value = '';
        this.dictPicked = (/**
         * @param {?} rowData
         * @return {?}
         */
        function (rowData) {
            // 先将当前绑定的数据清空
            _this.curMatrixDataEntity = new MatrixDataInfoEntity();
            _this.curDataFieldValue = '';
            _this.curMatrixDefEntity = rowData;
            _this.curMatrixDataEntity.matrixDefId = rowData.id;
            _this.curMatrixDataEntity.matrixDefName = rowData.name;
            _this.setFields();
            return of(true);
        });
        this.dictHelpPicked = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.value = null;
            return of({ closeDialog: true });
        });
        this.onBeforeHelp = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            /** @type {?} */
            var lookupIns = e.instance;
            if (lookupIns) {
                /** @type {?} */
                var getDataFn_1 = lookupIns.http.getData;
                lookupIns.http.getData = _this.matDefService.getData;
                lookupIns.dialogClosed.subscribe((/**
                 * @return {?}
                 */
                function () {
                    lookupIns.http.getData = getDataFn_1;
                }));
            }
            return of(true);
        });
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        // this.getMatrixLineType();
    }
    Object.defineProperty(MatrixPerformerComponent.prototype, "setMatrixDataEntity", {
        set: /**
         * @param {?} dataEntity
         * @return {?}
         */
        function (dataEntity) {
            var _this = this;
            this.curMatrixDataEntity = dataEntity;
            /** @type {?} */
            var url = '/api/runtime/wf/v1.0/matrixDefinition/' + dataEntity.matrixDefId;
            this.http.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.curMatrixDefEntity = re;
                _this.setFields();
                _this.curDataFieldValue = dataEntity.dataFieldAlias;
            }));
            if (dataEntity.matrixDefId) {
                this.typeReadOnly = true;
            }
            if (!this.curMatrixDataEntity.conditionField1) {
                this.condition1 = 'expr';
                this.condition1ExprAble = true;
            }
            else if (this.curMatrixDataEntity.conditionField1.charAt(0) === '{') {
                this.condition1 = 'expr';
                this.condition1ExprAble = true;
            }
            else {
                this.condition1 = 'help';
                this.condition1ExprAble = false;
            }
            if (!this.curMatrixDataEntity.conditionField2) {
                this.condition2 = 'expr';
                this.condition2ExprAble = true;
            }
            else if (this.curMatrixDataEntity.conditionField2.charAt(0) === '{') {
                this.condition2 = 'expr';
                this.condition2ExprAble = true;
            }
            else {
                this.condition2 = 'help';
                this.condition2ExprAble = false;
            }
            if (!this.curMatrixDataEntity.conditionField3) {
                this.condition3 = 'expr';
                this.condition3ExprAble = true;
            }
            else if (this.curMatrixDataEntity.conditionField3.charAt(0) === '{') {
                this.condition3 = 'expr';
                this.condition3ExprAble = true;
            }
            else {
                this.condition3 = 'help';
                this.condition3ExprAble = false;
            }
            if (this.curMatrixDataEntity.multivaluedCondition === 'condition1') {
                this.MultivalueOption1 = 'Multivalue';
                this.condition1Multivalue = true;
            }
            else if (this.curMatrixDataEntity.multivaluedCondition === 'condition2') {
                this.MultivalueOption2 = 'Multivalue';
                this.condition2Multivalue = true;
            }
            else if (this.curMatrixDataEntity.multivaluedCondition === 'condition3') {
                this.MultivalueOption3 = 'Multivalue';
                this.condition3Multivalue = true;
            }
            this.condition1Text = this.curMatrixDataEntity.conditionFieldText1 ? this.curMatrixDataEntity.conditionFieldText1 : '';
            this.condition1Value = this.curMatrixDataEntity.conditionField1 ? this.curMatrixDataEntity.conditionField1 : '';
            this.condition2Text = this.curMatrixDataEntity.conditionFieldText2 ? this.curMatrixDataEntity.conditionFieldText2 : '';
            this.condition2Value = this.curMatrixDataEntity.conditionField2 ? this.curMatrixDataEntity.conditionField2 : '';
            this.condition3Text = this.curMatrixDataEntity.conditionFieldText3 ? this.curMatrixDataEntity.conditionFieldText3 : '';
            this.condition3Value = this.curMatrixDataEntity.conditionField3 ? this.curMatrixDataEntity.conditionField3 : '';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rootPath = '';
        try {
            rootPath = ((/** @type {?} */ (window))).gspframeworkService.common.getBasePath.get();
        }
        catch (error) {
        }
        this.dataUri = rootPath + '/api/runtime/wf/v1.0/matrixDefinition/getMatrixDef';
    };
    /**
     * 获取矩阵定义
     */
    /**
     * 获取矩阵定义
     * @return {?}
     */
    MatrixPerformerComponent.prototype.getMatrixLineType = /**
     * 获取矩阵定义
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/matrixDefinition';
        this.http.get(url).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.matrixDefEntityList = re;
            _this.items = _this.matrixDefEntityList.slice(0, _this.pageSize);
            _this.total = _this.matrixDefEntityList.length;
        }));
    };
    /**
     * @private
     * @return {?}
     */
    MatrixPerformerComponent.prototype.setFields = /**
     * @private
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b;
        this.conditionFields = [];
        this.dataFieldAndValues = [];
        // 先对条件字段按照排序号进行排序
        this.curMatrixDefEntity.conditionField.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            return a.sortOrder - b.sortOrder;
        }));
        try {
            // 将排序后的条件放入条件字段数组中
            for (var _c = tslib_1.__values(this.curMatrixDefEntity.conditionField), _d = _c.next(); !_d.done; _d = _c.next()) {
                var condition = _d.value;
                this.conditionFields.push(condition);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // 先对数据字段按照排序号进行排序
        this.curMatrixDefEntity.dataField.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            return a.sortOrder - b.sortOrder;
        }));
        try {
            // 填充数据字段的下拉列表
            for (var _e = tslib_1.__values(this.curMatrixDefEntity.dataField), _f = _e.next(); !_f.done; _f = _e.next()) {
                var data = _f.value;
                /** @type {?} */
                var temp = {
                    text: data.alias,
                    value: data.alias
                };
                this.dataFieldAndValues.push(temp);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.onClear = /**
     * @return {?}
     */
    function () {
        this.curMatrixDataEntity = new MatrixDataInfoEntity();
    };
    /**
     * 编辑条件
     */
    /**
     * 编辑条件
     * @return {?}
     */
    MatrixPerformerComponent.prototype.editCondition = /**
     * 编辑条件
     * @return {?}
     */
    function () {
        var _this = this;
        var e_3, _a, e_4, _b, e_5, _c;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _d = tslib_1.__values(this.designerUIState.schemas), _e = _d.next(); !_e.done; _e = _d.next()) {
                    var schema = _e.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                }
                finally { if (e_3) throw e_3.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerUIState.addContext(context);
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_1 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _f = tslib_1.__values(this.designerUIState.subActivityContext), _g = _f.next(); !_g.done; _g = _f.next()) {
                    var variable = _g.value;
                    _loop_1(variable);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_c = context_1.return)) _c.call(context_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        this.expr.setEditPattern(ExprEditMode.Conditional); // 表达式展现模式：默认简易版
        this.expr.addExpressionText(this.curMatrixDataEntity.condition); // this.reportingLineDataEntity.condition
        this.expr.buildExpression().then((/**
         * @param {?} expressioninfo
         * @return {?}
         */
        function (expressioninfo) {
            _this.curMatrixDataEntity.condition = expressioninfo;
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @param {?} data
     * @param {?} index
     * @param {?} id
     * @return {?}
     */
    MatrixPerformerComponent.prototype.onHelpSearch = /**
     * @param {?} data
     * @param {?} index
     * @param {?} id
     * @return {?}
     */
    function (data, index, id) {
        this.index = index;
        this.fieldId = id;
        this.helpId = this.curMatrixDefEntity.conditionField[this.index].smartHelp;
        this.lookUp.onClear();
        this.lookUp.showDialog();
    };
    /**
     * @param {?} index
     * @param {?} id
     * @return {?}
     */
    MatrixPerformerComponent.prototype.openEnumValue = /**
     * @param {?} index
     * @param {?} id
     * @return {?}
     */
    function (index, id) {
        this.index = index;
        this.fieldId = id;
        this.showEnumList(JSON.parse(this.curMatrixDefEntity.conditionField[this.index].enumList));
    };
    /**
     * @private
     * @param {?} enumList
     * @return {?}
     */
    MatrixPerformerComponent.prototype.showEnumList = /**
     * @private
     * @param {?} enumList
     * @return {?}
     */
    function (enumList) {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(EnumListComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform('component.matrixPerformer.enumSelection'),
            width: 650,
            height: 450,
            showButtons: true,
            buttons: compRef.instance.btnRef,
        };
        if (enumList && enumList.length > 0) {
            compRef.instance.load(enumList);
        }
        compRef.instance.confirm.subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (_this.index === 0) {
                _this.condition1Text = re[0].value;
                _this.condition1Value = re[0].value;
            }
            else if (_this.index === 1) {
                _this.condition2Text = re[0].value;
                _this.condition2Value = re[0].value;
            }
            else if (_this.index === 2) {
                _this.condition3Text = re[0].value;
                _this.condition3Value = re[0].value;
            }
        }));
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.closeModalEmitter.subscribe((/**
         * @return {?}
         */
        function () {
            dialog.close();
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MatrixPerformerComponent.prototype.dataFieldChange = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.curMatrixDataEntity.dataFieldAlias = data.data.value;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MatrixPerformerComponent.prototype.selectedDataHandler = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.index === 0) {
            this.condition1Text = data.name;
            this.condition1Value = data.id;
        }
        else if (this.index === 1) {
            this.condition2Text = data.name;
            this.condition2Value = data.id;
        }
        else if (this.index === 2) {
            this.condition3Text = data.name;
            this.condition3Value = data.id;
        }
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.getPerformers = /**
     * @return {?}
     */
    function () {
        this.curMatrixDataEntity.type = 'wf.MatrixParticipantExpression';
        this.curMatrixDataEntity.conditionFieldText1 = this.condition1Text;
        this.curMatrixDataEntity.conditionField1 = this.condition1Text === '' ? '' : this.condition1Value;
        this.curMatrixDataEntity.conditionFieldText2 = this.condition2Text;
        this.curMatrixDataEntity.conditionField2 = this.condition2Text === '' ? '' : this.condition2Value;
        this.curMatrixDataEntity.conditionFieldText3 = this.condition3Text;
        this.curMatrixDataEntity.conditionField3 = this.condition3Text === '' ? '' : this.condition3Value;
        if (this.condition1Multivalue) {
            this.curMatrixDataEntity.multivaluedCondition = 'condition1';
        }
        else if (this.condition2Multivalue) {
            this.curMatrixDataEntity.multivaluedCondition = 'condition2';
        }
        else if (this.condition3Multivalue) {
            this.curMatrixDataEntity.multivaluedCondition = 'condition3';
        }
        return this.curMatrixDataEntity;
    };
    /**
     * 打开表达式编辑器
     * @param data 编辑第几个条件字段，值为（condition1，condition2，condition3）
     */
    /**
     * 打开表达式编辑器
     * @param {?} data 编辑第几个条件字段，值为（condition1，condition2，condition3）
     * @return {?}
     */
    MatrixPerformerComponent.prototype.showExprHelp = /**
     * 打开表达式编辑器
     * @param {?} data 编辑第几个条件字段，值为（condition1，condition2，condition3）
     * @return {?}
     */
    function (data) {
        var _this = this;
        var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;
        // this.expr.clearContext();
        if (this.designerUIState.schemas.length > 0) {
            try {
                for (var _f = tslib_1.__values(this.designerUIState.schemas), _g = _f.next(); !_g.done; _g = _f.next()) {
                    var schema = _g.value;
                    // this.expr.addCommonObject(co);
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_g && !_g.done && (_a = _f.return)) _a.call(_f);
                }
                finally { if (e_6) throw e_6.error; }
            }
            if (this.designerUIState.schemas[0].entityTypes && this.designerUIState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerUIState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        if (this.designerUIState.participantContext.length > 0) {
            try {
                for (var _h = tslib_1.__values(this.designerUIState.participantContext), _j = _h.next(); !_j.done; _j = _h.next()) {
                    var variable = _j.value;
                    context.push(variable);
                    // this.expr.addContext(variable);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_j && !_j.done && (_b = _h.return)) _b.call(_h);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        if (this.designerUIState.processVariableContext.length > 0) {
            var _loop_2 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _k = tslib_1.__values(this.designerUIState.processVariableContext), _l = _k.next(); !_l.done; _l = _k.next()) {
                    var variable = _l.value;
                    _loop_2(variable);
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (_l && !_l.done && (_c = _k.return)) _c.call(_k);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        if (this.designerUIState.subActivityContext.length > 0) {
            var _loop_3 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _m = tslib_1.__values(this.designerUIState.subActivityContext), _o = _m.next(); !_o.done; _o = _m.next()) {
                    var variable = _o.value;
                    _loop_3(variable);
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_o && !_o.done && (_d = _m.return)) _d.call(_m);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_2 = tslib_1.__values(context), context_2_1 = context_2.next(); !context_2_1.done; context_2_1 = context_2.next()) {
                    var v = context_2_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (context_2_1 && !context_2_1.done && (_e = context_2.return)) _e.call(context_2);
                }
                finally { if (e_10) throw e_10.error; }
            }
        }
        if (data === 'condition1') {
            if (this.curMatrixDataEntity.conditionField1) {
                this.expr.addExpressionText(this.curMatrixDataEntity.conditionField1);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        else if (data === 'condition2') {
            if (this.curMatrixDataEntity.conditionField2) {
                this.expr.addExpressionText(this.curMatrixDataEntity.conditionField2);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        else if (data === 'condition3') {
            if (this.curMatrixDataEntity.conditionField3) {
                this.expr.addExpressionText(this.curMatrixDataEntity.conditionField3);
            }
            else {
                this.expr.addExpressionText('');
            }
        }
        this.expr.buildExpression().then((/**
         * @param {?} expressionInfo
         * @return {?}
         */
        function (expressionInfo) {
            if (data === 'condition1') {
                _this.condition1Text = expressionInfo;
                _this.condition1Value = expressionInfo;
            }
            else if (data === 'condition2') {
                _this.condition2Text = expressionInfo;
                _this.condition2Value = expressionInfo;
            }
            else {
                _this.condition3Text = expressionInfo;
                _this.condition3Value = expressionInfo;
            }
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition1Expr = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.showExprHelp(data);
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition1ExprClick = /**
     * @return {?}
     */
    function () {
        this.condition1ExprAble = !this.condition1ExprAble;
        this.condition1Multivalue = false;
        this.MultivalueOption1 = '';
        this.condition1Text = '';
        this.condition1Value = '';
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition1MulClick = /**
     * @return {?}
     */
    function () {
        this.MultivalueOption2 = '';
        this.MultivalueOption3 = '';
        this.condition2Multivalue = false;
        this.condition3Multivalue = false;
        this.condition1Multivalue = !this.condition1Multivalue;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition2Expr = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.showExprHelp(data);
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition2ExprClick = /**
     * @return {?}
     */
    function () {
        this.condition2ExprAble = !this.condition2ExprAble;
        this.condition2Multivalue = false;
        this.MultivalueOption2 = '';
        this.condition2Text = '';
        this.condition2Value = '';
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition2MulClick = /**
     * @return {?}
     */
    function () {
        this.MultivalueOption1 = '';
        this.MultivalueOption3 = '';
        this.condition1Multivalue = false;
        this.condition3Multivalue = false;
        this.condition2Multivalue = !this.condition2Multivalue;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition3Expr = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.showExprHelp(data);
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition3ExprClick = /**
     * @return {?}
     */
    function () {
        this.condition3ExprAble = !this.condition3ExprAble;
        this.condition3Multivalue = false;
        this.MultivalueOption3 = '';
        this.condition3Text = '';
        this.condition3Value = '';
    };
    /**
     * @return {?}
     */
    MatrixPerformerComponent.prototype.condition3MulClick = /**
     * @return {?}
     */
    function () {
        this.MultivalueOption1 = '';
        this.MultivalueOption2 = '';
        this.condition1Multivalue = false;
        this.condition2Multivalue = false;
        this.condition3Multivalue = !this.condition3Multivalue;
    };
    MatrixPerformerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-matrix-performer',
                    template: "<div class=\"d-flex flex-fill farris-overflow-y-auto p-md-2\" style=\"background: #FFF;\">\r\n  <div class=\"d-flex flex-fill farris-overflow-y-auto mx-3 my-2\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n  <form style=\"width: 100%;\">\r\n    <div class=\"d-flex m-2 flex-column w-100\">\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"farris-form form-inline  farris-form-inline\"><!--mr-5-->\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.matrixPerformer.refMatrixTable'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 77.5%\">\r\n                  <farris-lookup-grid [items]=\"items\" [columns]=\"columns\" [(ngModel)]=\"curMatrixDataEntity.matrixDefName\"\r\n                                      name=\"definitionId\" [resizable]=\"true\" [singleSelect]=\"true\" [idField]=\"'id'\" [pagination]=\"true\"\r\n                                      [pageIndex]=\"pageIndex\" [pageSize]=\"pageSize\" [pageList]=\"pageList\" [total]=\"total\" [textField]=\"'name'\"\r\n                                      [valueField]=\"'id'\" title=\"{{'component.matrixPerformer.matrixTable'|wfLocale}}\" [dictPicked]=\"dictPicked\" (clear)=\"onClear()\" [readonly]=\"typeReadOnly\"\r\n                                      [customDisplayType] = \"true\" [displayType]=\"'LIST'\" [uri]=\"dataUri\" [dictPicking]=\"onBeforeHelp\">\r\n                  </farris-lookup-grid>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n                <div style=\"width: 7.5%\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.matrixPerformer.curDataFieldValue'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 77.5%\">\r\n                  <!--\u4E0B\u62C9\u5217\u8868-->\r\n                  <farris-combo-list [(ngModel)]=\"curDataFieldValue\" name=\"referObject\" [panelHeight]=\"200\" [idField]=\"'value'\"\r\n                                     [textField]=\"'text'\" [data]=\"dataFieldAndValues\" (selectChange)='dataFieldChange($event)'>\r\n                  </farris-combo-list>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n                <div style=\"width: 7.5%\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\" *ngIf=\"conditionFields && conditionFields.length > 0\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\" style=\"margin-top: -17px; margin-bottom: -22px\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-text\" style=\"color: rgb(180,180,180)\">{{'component.matrixPerformer.conditionFields'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 77.5%\">\r\n                  <hr size=\"3px\">\r\n                </div>\r\n                <div style=\"width: 7.5%\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\" *ngIf=\"conditionFields && conditionFields.length > 0\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-text\">{{conditionFields[0].alias}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[0].inputType === 'help' && !condition1ExprAble\">\r\n                  <input-group name=\"condition1\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition1Text\" (clickHandle)=\"onHelpSearch($event,0,conditionFields[0].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[0].inputType === 'enum' && !condition1ExprAble\">\r\n                  <input-group name=\"condition1\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition1Text\" (clickHandle)=\"openEnumValue(0,conditionFields[0].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"condition1ExprAble\">\r\n                  <input-group name=\"condition1\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                               [(ngModel)]=\"condition1Text\" (clickHandle)=\"condition1Expr('condition1')\">\r\n                  </input-group>\r\n                </div>\r\n                <farris-checkboxgroup style=\"width: 10%; padding-left: 5px\" [(ngModel)]=\"condition1\" name=\"Expr1Able\" [horizontal]=\"true\"\r\n                                      [data]=\"exprGroup\" (changeValue)=\"condition1ExprClick()\">\r\n                </farris-checkboxgroup>\r\n                <farris-checkboxgroup style=\"width: 10%\" [(ngModel)]=\"MultivalueOption1\" name=\"Expr1Mul\" [horizontal]=\"true\" [disable]=\"!condition1ExprAble\"\r\n                [data]=\"mulGroup\" (changeValue)=\"condition1MulClick()\">\r\n                </farris-checkboxgroup>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\" *ngIf=\"conditionFields && conditionFields.length > 1\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-text\">{{conditionFields[1].alias}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[1].inputType === 'help' && !condition2ExprAble\">\r\n                  <input-group name=\"condition2\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition2Text\" (clickHandle)=\"onHelpSearch($event,1,conditionFields[1].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[1].inputType === 'enum' && !condition2ExprAble\">\r\n                  <input-group name=\"condition2\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition2Text\" (clickHandle)=\"openEnumValue(1,conditionFields[1].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"condition2ExprAble\">\r\n                  <input-group name=\"condition2\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                               [(ngModel)]=\"condition2Text\" (clickHandle)=\"condition2Expr('condition2')\">\r\n                  </input-group>\r\n                </div>\r\n                <farris-checkboxgroup style=\"width: 10%; padding-left: 5px\" [(ngModel)]=\"condition2\" name=\"Expr2Able\" [horizontal]=\"true\"\r\n                                      [data]=\"exprGroup\" (changeValue)=\"condition2ExprClick()\">\r\n                </farris-checkboxgroup>\r\n                <farris-checkboxgroup style=\"width: 10%\" [(ngModel)]=\"MultivalueOption2\" name=\"Expr2Mul\" [horizontal]=\"true\" [disable]=\"!condition2ExprAble\"\r\n                [data]=\"mulGroup\" (changeValue)=\"condition2MulClick()\">\r\n                </farris-checkboxgroup>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 farris-group-auto my-4\" *ngIf=\"conditionFields && conditionFields.length > 2\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\" style=\"width: 14%\">\r\n                  <span class=\"farris-label-text\">{{conditionFields[2].alias}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[2].inputType === 'help' && !condition3ExprAble\">\r\n                  <input-group name=\"condition3\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition3Text\" (clickHandle)=\"onHelpSearch($event,2,conditionFields[2].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"conditionFields[2].inputType === 'enum' && !condition3ExprAble\">\r\n                  <input-group name=\"condition3\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\" [(ngModel)]=\"condition3Text\" (clickHandle)=\"openEnumValue(2,conditionFields[2].id)\"></input-group>\r\n                </div>\r\n                <div class=\"farris-input-wrap\" style=\"width: 60%\" *ngIf=\"condition3ExprAble\">\r\n                  <input-group name=\"condition3\" [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon2\"\r\n                               [(ngModel)]=\"condition3Text\" (clickHandle)=\"condition3Expr('condition3')\">\r\n                  </input-group>\r\n                </div>\r\n                <farris-checkboxgroup style=\"width: 10%; padding-left: 5px\" [(ngModel)]=\"condition3\" name=\"Expr3Able\" [horizontal]=\"true\"\r\n                                      [data]=\"exprGroup\" (changeValue)=\"condition3ExprClick()\">\r\n                </farris-checkboxgroup>\r\n                <farris-checkboxgroup style=\"width: 10%\" [(ngModel)]=\"MultivalueOption3\" name=\"Expr3Mul\" [horizontal]=\"true\" [disable]=\"!condition3ExprAble\"\r\n                [data]=\"mulGroup\" (changeValue)=\"condition3MulClick()\">\r\n                </farris-checkboxgroup>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"d-flex flex-column\">\r\n        <div class=\"farris-form form-inline farris-form-inline mr-5\">\r\n          <div class=\"col-12 farris-group-auto my-4\">\r\n            <div class=\"farris-group-wrap\">\r\n              <div class=\"form-group farris-form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-text\">{{'component.matrixPerformer.condition'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap\">\r\n                  <div class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"curMatrixDataEntity.condition\" name=\"conditon\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span class=\"input-group-text\" (click)=\"editCondition()\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n</div>\r\n\r\n<farris-lookup-grid style=\"display: none;\" #lookup [(ngModel)]=\"value\" name=\"value\" [helpId]=\"helpId\"\r\n  [singleSelect]=\"true\" [uri]=\"'assets/data/tree-list-help.json'\" (selectedData)=\"selectedDataHandler($event)\"\r\n  [dictPicked]=\"dictHelpPicked\" [enableCascade]=\"false\">\r\n</farris-lookup-grid>\r\n",
                    providers: [
                        { provide: ServerSideToken, useClass: LookupDataService },
                        WfLocalePipe,
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    MatrixPerformerComponent.ctorParameters = function () { return [
        { type: HttpService },
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: BsModalService },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: MatrixDefHelpService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    MatrixPerformerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        setMatrixDataEntity: [{ type: Input }],
        lookUp: [{ type: ViewChild, args: ['lookup',] }]
    };
    return MatrixPerformerComponent;
}());
export { MatrixPerformerComponent };
if (false) {
    /** @type {?} */
    MatrixPerformerComponent.prototype.cls;
    /** @type {?} */
    MatrixPerformerComponent.prototype.display;
    /** @type {?} */
    MatrixPerformerComponent.prototype.typeReadOnly;
    /** @type {?} */
    MatrixPerformerComponent.prototype.items;
    /** @type {?} */
    MatrixPerformerComponent.prototype.pageIndex;
    /** @type {?} */
    MatrixPerformerComponent.prototype.pageSize;
    /** @type {?} */
    MatrixPerformerComponent.prototype.pageList;
    /** @type {?} */
    MatrixPerformerComponent.prototype.total;
    /** @type {?} */
    MatrixPerformerComponent.prototype.groupIcon2;
    /** @type {?} */
    MatrixPerformerComponent.prototype.index;
    /** @type {?} */
    MatrixPerformerComponent.prototype.fieldId;
    /** @type {?} */
    MatrixPerformerComponent.prototype.value;
    /** @type {?} */
    MatrixPerformerComponent.prototype.helpId;
    /** @type {?} */
    MatrixPerformerComponent.prototype.dataUri;
    /**
     * 矩阵定义显示列
     * @type {?}
     */
    MatrixPerformerComponent.prototype.columns;
    /** @type {?} */
    MatrixPerformerComponent.prototype.users;
    /** @type {?} */
    MatrixPerformerComponent.prototype.dataFieldAndValues;
    /** @type {?} */
    MatrixPerformerComponent.prototype.curDataFieldValue;
    /** @type {?} */
    MatrixPerformerComponent.prototype.matrixDefEntityList;
    /** @type {?} */
    MatrixPerformerComponent.prototype.curMatrixDefEntity;
    /** @type {?} */
    MatrixPerformerComponent.prototype.curMatrixDataEntity;
    /** @type {?} */
    MatrixPerformerComponent.prototype.conditionFields;
    /** @type {?} */
    MatrixPerformerComponent.prototype.exprGroup;
    /** @type {?} */
    MatrixPerformerComponent.prototype.mulGroup;
    /**
     * 条件字段是否启用表达式
     * @type {?}
     */
    MatrixPerformerComponent.prototype.condition1;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition1ExprAble;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition2;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition2ExprAble;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition3;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition3ExprAble;
    /**
     * 条件字段是否启用多值
     * @type {?}
     */
    MatrixPerformerComponent.prototype.MultivalueOption1;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition1Multivalue;
    /** @type {?} */
    MatrixPerformerComponent.prototype.MultivalueOption2;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition2Multivalue;
    /** @type {?} */
    MatrixPerformerComponent.prototype.MultivalueOption3;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition3Multivalue;
    /**
     * 编辑器页面显示文字，防范浅拷贝问题（对于条件字段的值和显示文字都不要在当前实体中进行修改只有点击确定时，才将其保存至当前实体并返回）
     * @type {?}
     */
    MatrixPerformerComponent.prototype.condition1Text;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition1Value;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition2Text;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition2Value;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition3Text;
    /** @type {?} */
    MatrixPerformerComponent.prototype.condition3Value;
    /** @type {?} */
    MatrixPerformerComponent.prototype.lookUp;
    /** @type {?} */
    MatrixPerformerComponent.prototype.dictPicked;
    /** @type {?} */
    MatrixPerformerComponent.prototype.dictHelpPicked;
    /** @type {?} */
    MatrixPerformerComponent.prototype.onBeforeHelp;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.http;
    /** @type {?} */
    MatrixPerformerComponent.prototype.designerUIState;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.matDefService;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    MatrixPerformerComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0cml4LXBlcmZvcm1lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL3BlcmZvcm1lci92aWV3cy9tYXRyaXgtcGVyZm9ybWVyL21hdHJpeC1wZXJmb3JtZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSx3QkFBd0IsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFVLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckssT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDdkUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDekUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEMsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNsRixPQUFPLEVBQUUsbUJBQW1CLEVBQWdCLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUdwRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUNwRixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxF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Qjs7SUFDMUIsd0RBQTZCOztJQUM3QixxREFBMEI7O0lBQzFCLHdEQUE2Qjs7Ozs7SUFJN0Isa0RBQW9COztJQUNwQixtREFBcUI7O0lBQ3JCLGtEQUFvQjs7SUFDcEIsbURBQXFCOztJQUNyQixrREFBb0I7O0lBQ3BCLG1EQUFxQjs7SUFvRXJCLDBDQUF3RDs7SUFpRXhELDhDQVNDOztJQThIRCxrREFHQzs7SUFzSUQsZ0RBWUM7Ozs7O0lBMVZDLHdDQUF5Qjs7SUFDekIsbURBQThDOzs7OztJQUM5Qyx3Q0FBK0I7Ozs7O0lBQy9CLGdEQUFvQzs7Ozs7SUFDcEMsNENBQTBDOzs7OztJQUMxQyw0Q0FBMEI7Ozs7O0lBQzFCLGlEQUEyQzs7Ozs7SUFDM0MsdUNBQTBDOzs7OztJQUMxQyw0Q0FBMkM7Ozs7O0lBQzNDLDZDQUFpRDs7Ozs7SUFDakQsOENBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBIb3N0QmluZGluZywgSW5qZWN0LCBJbmplY3RvciwgSW5wdXQsIExPQ0FMRV9JRCwgT25Jbml0LCBPcHRpb25hbCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1hdHJpeERlZkluZm9FbnRpdHkgfSBmcm9tICcuL2VudGl0aXMvbWF0cml4LWRlZi1pbmZvLmVudGl0eSc7XHJcbmltcG9ydCB7IE1hdHJpeERhdGFJbmZvRW50aXR5IH0gZnJvbSAnLi9lbnRpdGlzL21hdHJpeC1kYXRhLWluZm8uZW50aXR5JztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlLCBFeHByZXNzaW9uU2VydmljZSwgSW5qZWN0ZWRUeXBlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgTG9va3VwR3JpZENvbXBvbmVudCwgUGlja2VkUmVzdWx0LCBTZXJ2ZXJTaWRlVG9rZW4gfSBmcm9tICdAZmFycmlzL3VpLWxvb2t1cCc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IEVudW1MaXN0Q29tcG9uZW50IH0gZnJvbSAnLi9lbnVtLWxpc3QvZW51bS1saXN0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1hdHJpeEZpZWxkSW5mb0VudGl0eSB9IGZyb20gJy4vZW50aXRpcy9tYXRyaXgtZmllbGQtaW5mby5lbnRpdHknO1xyXG5pbXBvcnQgeyBQZXJmb3JtZXJFbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdGllcy9wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHsgTWF0cml4RGVmSGVscFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvbWF0cml4LXBlcmZvcm1lci5jb21wb25lbnQuc2VydmljZSc7XHJcbmltcG9ydCB7IExvb2t1cERhdGFTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy9sb29rdXAtY29uZmlnJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2kxOG4vcGlwZS93Zi1wcm9jZXNzLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IFdGX1BST0NFU1NfRURJVE9SX0xBTkdfUkVTT1VSQ0VTIH0gZnJvbSAnLi4vLi4vLi4vLi4vaTE4bi9hc3NldHMvbGFuZy5yZXNvdXJjZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1tYXRyaXgtcGVyZm9ybWVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vbWF0cml4LXBlcmZvcm1lci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vbWF0cml4LXBlcmZvcm1lci5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgeyBwcm92aWRlOiBTZXJ2ZXJTaWRlVG9rZW4sIHVzZUNsYXNzOiBMb29rdXBEYXRhU2VydmljZSB9LFxyXG4gICAgIFdmTG9jYWxlUGlwZSxcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNYXRyaXhQZXJmb3JtZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdkLWZsZXggZmxleC1maWxsIGgtMTAwJztcclxuICBkaXNwbGF5OiBzdHJpbmcgPSAnbm9uZSc7XHJcbiAgdHlwZVJlYWRPbmx5ID0gZmFsc2U7XHJcbiAgaXRlbXM6IE1hdHJpeERlZkluZm9FbnRpdHlbXSA9IFtdO1xyXG4gIHBhZ2VJbmRleCA9IDE7XHJcbiAgcGFnZVNpemUgPSAyMDtcclxuICBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICB0b3RhbCA9IDA7XHJcbiAgZ3JvdXBJY29uMiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcblxyXG4gIC8vIOW4ruWKqeebuOWFs1xyXG4gIGluZGV4OiBudW1iZXI7XHJcbiAgZmllbGRJZCA9ICcnO1xyXG4gIHZhbHVlOiBhbnk7XHJcbiAgaGVscElkO1xyXG4gIGRhdGFVcmk6IHN0cmluZztcclxuICAvKipcclxuICAgKiDnn6npmLXlrprkuYnmmL7npLrliJdcclxuICAgKi9cclxuICBjb2x1bW5zID0gW1xyXG4gICAgeyB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1hdHJpeFBlcmZvcm1lci5jb2RlJyksIGZpZWxkOiAnY29kZScsIHdpZHRoOiAxMDAgfSxcclxuICAgIHsgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tYXRyaXhQZXJmb3JtZXIubmFtZScpLCBmaWVsZDogJ25hbWUnLCB3aWR0aDogMTAwIH1cclxuICBdO1xyXG4gIHVzZXJzOiBQZXJmb3JtZXJFbnRpdHlbXSA9IFtdO1xyXG5cclxuICBkYXRhRmllbGRBbmRWYWx1ZXMgPSBbXTsgLy8geyB0ZXh0OiAn6YOo6ZeoJywgdmFsdWU6ICdkZXBhcnRtZW50JyB9LFxyXG4gIGN1ckRhdGFGaWVsZFZhbHVlID0gJyc7XHJcblxyXG4gIG1hdHJpeERlZkVudGl0eUxpc3Q6IE1hdHJpeERlZkluZm9FbnRpdHlbXSA9IFtdO1xyXG4gIGN1ck1hdHJpeERlZkVudGl0eTogTWF0cml4RGVmSW5mb0VudGl0eSA9IG5ldyBNYXRyaXhEZWZJbmZvRW50aXR5KCk7XHJcbiAgY3VyTWF0cml4RGF0YUVudGl0eTogTWF0cml4RGF0YUluZm9FbnRpdHkgPSBuZXcgTWF0cml4RGF0YUluZm9FbnRpdHkoKTtcclxuXHJcbiAgY29uZGl0aW9uRmllbGRzOiBNYXRyaXhGaWVsZEluZm9FbnRpdHlbXSA9IFtdO1xyXG4gIGV4cHJHcm91cCA9IFtcclxuICAgIHsgbmFtZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50Lm1hdHJpeFBlcmZvcm1lci5oZWxwJyksIHZhbHVlOiAnaGVscCcgfVxyXG4gIF07XHJcbiAgbXVsR3JvdXAgPSBbXHJcbiAgICB7IG5hbWU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tYXRyaXhQZXJmb3JtZXIubXVsdGl2YWx1ZScpLCB2YWx1ZTogJ011bHRpdmFsdWUnIH1cclxuICBdO1xyXG4gIC8qKlxyXG4gICAqIOadoeS7tuWtl+auteaYr+WQpuWQr+eUqOihqOi+vuW8j1xyXG4gICAqL1xyXG4gIGNvbmRpdGlvbjE6IHN0cmluZztcclxuICBjb25kaXRpb24xRXhwckFibGUgPSB0cnVlO1xyXG4gIGNvbmRpdGlvbjI6IHN0cmluZztcclxuICBjb25kaXRpb24yRXhwckFibGUgPSB0cnVlO1xyXG4gIGNvbmRpdGlvbjM6IHN0cmluZztcclxuICBjb25kaXRpb24zRXhwckFibGUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIOadoeS7tuWtl+auteaYr+WQpuWQr+eUqOWkmuWAvFxyXG4gICAqL1xyXG4gIE11bHRpdmFsdWVPcHRpb24xOiBzdHJpbmc7XHJcbiAgY29uZGl0aW9uMU11bHRpdmFsdWUgPSBmYWxzZTtcclxuICBNdWx0aXZhbHVlT3B0aW9uMjogc3RyaW5nO1xyXG4gIGNvbmRpdGlvbjJNdWx0aXZhbHVlID0gZmFsc2U7XHJcbiAgTXVsdGl2YWx1ZU9wdGlvbjM6IHN0cmluZztcclxuICBjb25kaXRpb24zTXVsdGl2YWx1ZSA9IGZhbHNlO1xyXG4gIC8qKlxyXG4gICAqIOe8lui+keWZqOmhtemdouaYvuekuuaWh+Wtl++8jOmYsuiMg+a1heaLt+i0nemXrumimO+8iOWvueS6juadoeS7tuWtl+auteeahOWAvOWSjOaYvuekuuaWh+Wtl+mDveS4jeimgeWcqOW9k+WJjeWunuS9k+S4rei/m+ihjOS/ruaUueWPquacieeCueWHu+ehruWumuaXtu+8jOaJjeWwhuWFtuS/neWtmOiHs+W9k+WJjeWunuS9k+W5tui/lOWbnu+8iVxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbjFUZXh0ID0gJyc7XHJcbiAgY29uZGl0aW9uMVZhbHVlID0gJyc7XHJcbiAgY29uZGl0aW9uMlRleHQgPSAnJztcclxuICBjb25kaXRpb24yVmFsdWUgPSAnJztcclxuICBjb25kaXRpb24zVGV4dCA9ICcnO1xyXG4gIGNvbmRpdGlvbjNWYWx1ZSA9ICcnO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzZXRNYXRyaXhEYXRhRW50aXR5KGRhdGFFbnRpdHk6IE1hdHJpeERhdGFJbmZvRW50aXR5KSB7XHJcbiAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkgPSBkYXRhRW50aXR5O1xyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS93Zi92MS4wL21hdHJpeERlZmluaXRpb24vJyArIGRhdGFFbnRpdHkubWF0cml4RGVmSWQ7XHJcbiAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMuY3VyTWF0cml4RGVmRW50aXR5ID0gcmU7XHJcbiAgICAgIHRoaXMuc2V0RmllbGRzKCk7XHJcbiAgICAgIHRoaXMuY3VyRGF0YUZpZWxkVmFsdWUgPSBkYXRhRW50aXR5LmRhdGFGaWVsZEFsaWFzO1xyXG4gICAgfSlcclxuICAgIGlmIChkYXRhRW50aXR5Lm1hdHJpeERlZklkKSB7XHJcbiAgICAgIHRoaXMudHlwZVJlYWRPbmx5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDEpIHtcclxuICAgICAgdGhpcy5jb25kaXRpb24xID0gJ2V4cHInO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjFFeHByQWJsZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDEuY2hhckF0KDApID09PSAneycpIHtcclxuICAgICAgdGhpcy5jb25kaXRpb24xID0gJ2V4cHInO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjFFeHByQWJsZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjEgPSAnaGVscCc7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMUV4cHJBYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQyKSB7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMiA9ICdleHByJztcclxuICAgICAgdGhpcy5jb25kaXRpb24yRXhwckFibGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQyLmNoYXJBdCgwKSA9PT0gJ3snKSB7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMiA9ICdleHByJztcclxuICAgICAgdGhpcy5jb25kaXRpb24yRXhwckFibGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jb25kaXRpb24yID0gJ2hlbHAnO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjJFeHByQWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkMykge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjMgPSAnZXhwcic7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uM0V4cHJBYmxlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkMy5jaGFyQXQoMCkgPT09ICd7Jykge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjMgPSAnZXhwcic7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uM0V4cHJBYmxlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMyA9ICdoZWxwJztcclxuICAgICAgdGhpcy5jb25kaXRpb24zRXhwckFibGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5Lm11bHRpdmFsdWVkQ29uZGl0aW9uID09PSAnY29uZGl0aW9uMScpIHtcclxuICAgICAgdGhpcy5NdWx0aXZhbHVlT3B0aW9uMSA9ICdNdWx0aXZhbHVlJztcclxuICAgICAgdGhpcy5jb25kaXRpb24xTXVsdGl2YWx1ZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5tdWx0aXZhbHVlZENvbmRpdGlvbiA9PT0gJ2NvbmRpdGlvbjInKSB7XHJcbiAgICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjIgPSAnTXVsdGl2YWx1ZSc7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkubXVsdGl2YWx1ZWRDb25kaXRpb24gPT09ICdjb25kaXRpb24zJykge1xyXG4gICAgICB0aGlzLk11bHRpdmFsdWVPcHRpb24zID0gJ011bHRpdmFsdWUnO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjNNdWx0aXZhbHVlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvbmRpdGlvbjFUZXh0ID0gdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkVGV4dDEgPyB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGRUZXh0MSA6ICcnO1xyXG4gICAgdGhpcy5jb25kaXRpb24xVmFsdWUgPSB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQxID8gdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkMSA6ICcnO1xyXG4gICAgdGhpcy5jb25kaXRpb24yVGV4dCA9IHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZFRleHQyID8gdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkVGV4dDIgOiAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMlZhbHVlID0gdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkMiA/IHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDIgOiAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uM1RleHQgPSB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGRUZXh0MyA/IHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZFRleHQzIDogJyc7XHJcbiAgICB0aGlzLmNvbmRpdGlvbjNWYWx1ZSA9IHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDMgPyB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQzIDogJyc7XHJcbiAgfVxyXG5cclxuXHJcbiAgQFZpZXdDaGlsZCgnbG9va3VwJykgcHVibGljIGxvb2tVcDogTG9va3VwR3JpZENvbXBvbmVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBTZXJ2aWNlLFxyXG4gICAgcHVibGljIGRlc2lnbmVyVUlTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgZXhwcjogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgbWF0RGVmU2VydmljZTogTWF0cml4RGVmSGVscFNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgICAvLyB0aGlzLmdldE1hdHJpeExpbmVUeXBlKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGxldCByb290UGF0aCA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgcm9vdFBhdGggPSAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5jb21tb24uZ2V0QmFzZVBhdGguZ2V0KCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgfVxyXG4gICAgdGhpcy5kYXRhVXJpID0gcm9vdFBhdGggKyAnL2FwaS9ydW50aW1lL3dmL3YxLjAvbWF0cml4RGVmaW5pdGlvbi9nZXRNYXRyaXhEZWYnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W55+p6Zi15a6a5LmJXHJcbiAgICovXHJcbiAgZ2V0TWF0cml4TGluZVR5cGUoKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvbWF0cml4RGVmaW5pdGlvbic7XHJcbiAgICB0aGlzLmh0dHAuZ2V0KHVybCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMubWF0cml4RGVmRW50aXR5TGlzdCA9IHJlO1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5tYXRyaXhEZWZFbnRpdHlMaXN0LnNsaWNlKDAsIHRoaXMucGFnZVNpemUpO1xyXG4gICAgICB0aGlzLnRvdGFsID0gdGhpcy5tYXRyaXhEZWZFbnRpdHlMaXN0Lmxlbmd0aDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRGaWVsZHMoKSB7XHJcbiAgICB0aGlzLmNvbmRpdGlvbkZpZWxkcyA9IFtdO1xyXG4gICAgdGhpcy5kYXRhRmllbGRBbmRWYWx1ZXMgPSBbXTtcclxuICAgIC8vIOWFiOWvueadoeS7tuWtl+auteaMieeFp+aOkuW6j+WPt+i/m+ihjOaOkuW6j1xyXG4gICAgdGhpcy5jdXJNYXRyaXhEZWZFbnRpdHkuY29uZGl0aW9uRmllbGQuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICByZXR1cm4gYS5zb3J0T3JkZXIgLSBiLnNvcnRPcmRlcjtcclxuICAgIH0pO1xyXG4gICAgLy8g5bCG5o6S5bqP5ZCO55qE5p2h5Lu25pS+5YWl5p2h5Lu25a2X5q615pWw57uE5LitXHJcbiAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBvZiB0aGlzLmN1ck1hdHJpeERlZkVudGl0eS5jb25kaXRpb25GaWVsZCkge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbkZpZWxkcy5wdXNoKGNvbmRpdGlvbik7XHJcbiAgICB9XHJcbiAgICAvLyDlhYjlr7nmlbDmja7lrZfmrrXmjInnhafmjpLluo/lj7fov5vooYzmjpLluo9cclxuICAgIHRoaXMuY3VyTWF0cml4RGVmRW50aXR5LmRhdGFGaWVsZC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIHJldHVybiBhLnNvcnRPcmRlciAtIGIuc29ydE9yZGVyO1xyXG4gICAgfSk7XHJcbiAgICAvLyDloavlhYXmlbDmja7lrZfmrrXnmoTkuIvmi4nliJfooahcclxuICAgIGZvciAoY29uc3QgZGF0YSBvZiB0aGlzLmN1ck1hdHJpeERlZkVudGl0eS5kYXRhRmllbGQpIHtcclxuICAgICAgY29uc3QgdGVtcCA9IHtcclxuICAgICAgICB0ZXh0OiBkYXRhLmFsaWFzLFxyXG4gICAgICAgIHZhbHVlOiBkYXRhLmFsaWFzXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuZGF0YUZpZWxkQW5kVmFsdWVzLnB1c2godGVtcCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaWN0UGlja2VkID0gKHJvd0RhdGEpID0+IHsgLy8g6YCJ5a6M55+p6Zi15a6a5LmJ5ZCO5omn6KGMXHJcbiAgICAvLyDlhYjlsIblvZPliY3nu5HlrprnmoTmlbDmja7muIXnqbpcclxuICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eSA9IG5ldyBNYXRyaXhEYXRhSW5mb0VudGl0eSgpO1xyXG4gICAgdGhpcy5jdXJEYXRhRmllbGRWYWx1ZSA9ICcnO1xyXG4gICAgdGhpcy5jdXJNYXRyaXhEZWZFbnRpdHkgPSByb3dEYXRhO1xyXG4gICAgdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5Lm1hdHJpeERlZklkID0gcm93RGF0YS5pZDtcclxuICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5tYXRyaXhEZWZOYW1lID0gcm93RGF0YS5uYW1lO1xyXG4gICAgdGhpcy5zZXRGaWVsZHMoKTtcclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIG9uQ2xlYXIoKSB7XHJcbiAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkgPSBuZXcgTWF0cml4RGF0YUluZm9FbnRpdHkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe8lui+keadoeS7tlxyXG4gICAqL1xyXG4gIGVkaXRDb25kaXRpb24oKSB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgc2NoZW1hIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXMpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkU2NoZW1hKCdTY2hlbWEnLCBzY2hlbWEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzICYmIHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRJbmplY3RlZEVudGl0eShlbnRpdHlUeXBlLm5hbWUsICdTY2hlbWEnLFxyXG4gICAgICAgICAgZW50aXR5VHlwZS5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjb250ZXh0ID0gbmV3IEFycmF5KCk7XHJcbiAgICBjb250ZXh0ID0gdGhpcy5kZXNpZ25lclVJU3RhdGUuYWRkQ29udGV4dChjb250ZXh0KTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHZhcmlhYmxlIG9mIHRoaXMuZGVzaWduZXJVSVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCkge1xyXG4gICAgICAgIGlmICghY29udGV4dC5zb21lKGMgPT4gYy5rZXkgPT09IHZhcmlhYmxlLmtleSkpIHtcclxuICAgICAgICAgIGNvbnRleHQucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdiBvZiBjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZENvbnRleHQodik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5zZXRFZGl0UGF0dGVybihFeHByRWRpdE1vZGUuQ29uZGl0aW9uYWwpOyAvLyDooajovr7lvI/lsZXnjrDmqKHlvI/vvJrpu5jorqTnroDmmJPniYhcclxuICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uKTsgLy8gdGhpcy5yZXBvcnRpbmdMaW5lRGF0YUVudGl0eS5jb25kaXRpb25cclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChleHByZXNzaW9uaW5mbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb24gPSBleHByZXNzaW9uaW5mbztcclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkhlbHBTZWFyY2goZGF0YSwgaW5kZXgsIGlkKSB7IC8vIOaJk+W8gOW4ruWKqVxyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5maWVsZElkID0gaWQ7XHJcbiAgICB0aGlzLmhlbHBJZCA9IHRoaXMuY3VyTWF0cml4RGVmRW50aXR5LmNvbmRpdGlvbkZpZWxkW3RoaXMuaW5kZXhdLnNtYXJ0SGVscDtcclxuICAgIHRoaXMubG9va1VwLm9uQ2xlYXIoKTtcclxuICAgIHRoaXMubG9va1VwLnNob3dEaWFsb2coKTtcclxuICB9XHJcblxyXG4gIG9wZW5FbnVtVmFsdWUoaW5kZXgsIGlkKSB7XHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLmZpZWxkSWQgPSBpZDtcclxuICAgIHRoaXMuc2hvd0VudW1MaXN0KEpTT04ucGFyc2UodGhpcy5jdXJNYXRyaXhEZWZFbnRpdHkuY29uZGl0aW9uRmllbGRbdGhpcy5pbmRleF0uZW51bUxpc3QpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2hvd0VudW1MaXN0KGVudW1MaXN0OiBhbnlbXSkge1xyXG4gICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KEVudW1MaXN0Q29tcG9uZW50KTtcclxuICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5tYXRyaXhQZXJmb3JtZXIuZW51bVNlbGVjdGlvbicpLFxyXG4gICAgICB3aWR0aDogNjUwLFxyXG4gICAgICBoZWlnaHQ6IDQ1MCxcclxuICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXHJcbiAgICAgIGJ1dHRvbnM6IGNvbXBSZWYuaW5zdGFuY2UuYnRuUmVmLFxyXG4gICAgfTtcclxuICAgIGlmIChlbnVtTGlzdCAmJiBlbnVtTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UubG9hZChlbnVtTGlzdCk7XHJcbiAgICB9XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLmNvbmZpcm0uc3Vic2NyaWJlKChyZTogYW55W10pID0+IHsgLy8g54K55Ye756Gu5a6aXHJcbiAgICAgIGlmICh0aGlzLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24xVGV4dCA9IHJlWzBdLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uMVZhbHVlID0gcmVbMF0udmFsdWU7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gMSkge1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uMlRleHQgPSByZVswXS52YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbjJWYWx1ZSA9IHJlWzBdLnZhbHVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaW5kZXggPT09IDIpIHtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbjNUZXh0ID0gcmVbMF0udmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24zVmFsdWUgPSByZVswXS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY2xvc2VNb2RhbEVtaXR0ZXIuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRhdGFGaWVsZENoYW5nZShkYXRhKSB7XHJcbiAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuZGF0YUZpZWxkQWxpYXMgPSBkYXRhLmRhdGEudmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RlZERhdGFIYW5kbGVyKGRhdGEpIHtcclxuICAgIGlmICh0aGlzLmluZGV4ID09PSAwKSB7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMVRleHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgIHRoaXMuY29uZGl0aW9uMVZhbHVlID0gZGF0YS5pZDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gMSkge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjJUZXh0ID0gZGF0YS5uYW1lO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbjJWYWx1ZSA9IGRhdGEuaWQ7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5kZXggPT09IDIpIHtcclxuICAgICAgdGhpcy5jb25kaXRpb24zVGV4dCA9IGRhdGEubmFtZTtcclxuICAgICAgdGhpcy5jb25kaXRpb24zVmFsdWUgPSBkYXRhLmlkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UGVyZm9ybWVycygpIHtcclxuICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS50eXBlID0gJ3dmLk1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbic7XHJcbiAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGRUZXh0MSA9IHRoaXMuY29uZGl0aW9uMVRleHQ7XHJcbiAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQxID0gdGhpcy5jb25kaXRpb24xVGV4dCA9PT0gJycgPyAnJyA6IHRoaXMuY29uZGl0aW9uMVZhbHVlO1xyXG4gICAgdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkVGV4dDIgPSB0aGlzLmNvbmRpdGlvbjJUZXh0O1xyXG4gICAgdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5LmNvbmRpdGlvbkZpZWxkMiA9IHRoaXMuY29uZGl0aW9uMlRleHQgPT09ICcnID8gJycgOiB0aGlzLmNvbmRpdGlvbjJWYWx1ZTtcclxuICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZFRleHQzID0gdGhpcy5jb25kaXRpb24zVGV4dDtcclxuICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDMgPSB0aGlzLmNvbmRpdGlvbjNUZXh0ID09PSAnJyA/ICcnIDogdGhpcy5jb25kaXRpb24zVmFsdWU7XHJcbiAgICBpZiAodGhpcy5jb25kaXRpb24xTXVsdGl2YWx1ZSkge1xyXG4gICAgICB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkubXVsdGl2YWx1ZWRDb25kaXRpb24gPSAnY29uZGl0aW9uMSc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUpIHtcclxuICAgICAgdGhpcy5jdXJNYXRyaXhEYXRhRW50aXR5Lm11bHRpdmFsdWVkQ29uZGl0aW9uID0gJ2NvbmRpdGlvbjInO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmRpdGlvbjNNdWx0aXZhbHVlKSB7XHJcbiAgICAgIHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5tdWx0aXZhbHVlZENvbmRpdGlvbiA9ICdjb25kaXRpb24zJztcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHk7XHJcbiAgfVxyXG5cclxuICBkaWN0SGVscFBpY2tlZCA9IChkYXRhOiBhbnkpOiBPYnNlcnZhYmxlPFBpY2tlZFJlc3VsdD4gPT4ge1xyXG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICByZXR1cm4gb2YoeyBjbG9zZURpYWxvZzogdHJ1ZSB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+W8gOihqOi+vuW8j+e8lui+keWZqFxyXG4gICAqIEBwYXJhbSBkYXRhIOe8lui+keesrOWHoOS4quadoeS7tuWtl+aute+8jOWAvOS4uu+8iGNvbmRpdGlvbjHvvIxjb25kaXRpb24y77yMY29uZGl0aW9uM++8iVxyXG4gICAqL1xyXG4gIHNob3dFeHBySGVscChkYXRhOiBzdHJpbmcpIHtcclxuICAgIC8vIHRoaXMuZXhwci5jbGVhckNvbnRleHQoKTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zY2hlbWFzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBzY2hlbWEgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIC8vIHRoaXMuZXhwci5hZGRDb21tb25PYmplY3QoY28pO1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXMgJiYgdGhpcy5kZXNpZ25lclVJU3RhdGUuc2NoZW1hc1swXS5lbnRpdHlUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZGVzaWduZXJVSVN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGV4dCA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuZGVzaWduZXJVSVN0YXRlLnBhcnRpY2lwYW50Q29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgdGhpcy5kZXNpZ25lclVJU3RhdGUucGFydGljaXBhbnRDb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAvLyB0aGlzLmV4cHIuYWRkQ29udGV4dCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5wcm9jZXNzVmFyaWFibGVDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5leHByLmFkZENvbnRleHQodmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclVJU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyVUlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIWNvbnRleHQuc29tZShjID0+IGMua2V5ID09PSB2YXJpYWJsZS5rZXkpKSB7XHJcbiAgICAgICAgICBjb250ZXh0LnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRDb250ZXh0KHYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YSA9PT0gJ2NvbmRpdGlvbjEnKSB7XHJcbiAgICAgIGlmICh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQxKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ2NvbmRpdGlvbjInKSB7XHJcbiAgICAgIGlmICh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQyKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ2NvbmRpdGlvbjMnKSB7XHJcbiAgICAgIGlmICh0aGlzLmN1ck1hdHJpeERhdGFFbnRpdHkuY29uZGl0aW9uRmllbGQzKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KHRoaXMuY3VyTWF0cml4RGF0YUVudGl0eS5jb25kaXRpb25GaWVsZDMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRFeHByZXNzaW9uVGV4dCgnJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZXhwci5idWlsZEV4cHJlc3Npb24oKS50aGVuKChleHByZXNzaW9uSW5mbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChkYXRhID09PSAnY29uZGl0aW9uMScpIHtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbjFUZXh0ID0gZXhwcmVzc2lvbkluZm87XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24xVmFsdWUgPSBleHByZXNzaW9uSW5mbztcclxuICAgICAgfSBlbHNlIGlmIChkYXRhID09PSAnY29uZGl0aW9uMicpIHtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbjJUZXh0ID0gZXhwcmVzc2lvbkluZm87XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24yVmFsdWUgPSBleHByZXNzaW9uSW5mbztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbjNUZXh0ID0gZXhwcmVzc2lvbkluZm87XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24zVmFsdWUgPSBleHByZXNzaW9uSW5mbztcclxuICAgICAgfVxyXG4gICAgICAvL+eCueWHu+ehruWumuWQju+8jOWOu+mZpOihqOi+vuW8j+mHjOmdoueahOaWsOWinueahOS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICBpZihjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHIuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMuZmlsdGVyKHggPT4gIWNvbnRleHQuc29tZSh5ID0+IHkua2V5ID09PSB4LmtleSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY29uZGl0aW9uMUV4cHIoZGF0YSkge1xyXG4gICAgdGhpcy5zaG93RXhwckhlbHAoZGF0YSk7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjFFeHByQ2xpY2soKSB7XHJcbiAgICB0aGlzLmNvbmRpdGlvbjFFeHByQWJsZSA9ICF0aGlzLmNvbmRpdGlvbjFFeHByQWJsZTtcclxuICAgIHRoaXMuY29uZGl0aW9uMU11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjEgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMVRleHQgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMVZhbHVlID0gJyc7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjFNdWxDbGljaygpIHtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjIgPSAnJztcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjMgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uM011bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uMU11bHRpdmFsdWUgPSAhdGhpcy5jb25kaXRpb24xTXVsdGl2YWx1ZTtcclxuICB9XHJcbiAgY29uZGl0aW9uMkV4cHIoZGF0YSkge1xyXG4gICAgdGhpcy5zaG93RXhwckhlbHAoZGF0YSk7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjJFeHByQ2xpY2soKSB7XHJcbiAgICB0aGlzLmNvbmRpdGlvbjJFeHByQWJsZSA9ICF0aGlzLmNvbmRpdGlvbjJFeHByQWJsZTtcclxuICAgIHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjIgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMlRleHQgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMlZhbHVlID0gJyc7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjJNdWxDbGljaygpIHtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjEgPSAnJztcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjMgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMU11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uM011bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUgPSAhdGhpcy5jb25kaXRpb24yTXVsdGl2YWx1ZTtcclxuICB9XHJcbiAgY29uZGl0aW9uM0V4cHIoZGF0YSkge1xyXG4gICAgdGhpcy5zaG93RXhwckhlbHAoZGF0YSk7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjNFeHByQ2xpY2soKSB7XHJcbiAgICB0aGlzLmNvbmRpdGlvbjNFeHByQWJsZSA9ICF0aGlzLmNvbmRpdGlvbjNFeHByQWJsZTtcclxuICAgIHRoaXMuY29uZGl0aW9uM011bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjMgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uM1RleHQgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uM1ZhbHVlID0gJyc7XHJcbiAgfVxyXG4gIGNvbmRpdGlvbjNNdWxDbGljaygpIHtcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjEgPSAnJztcclxuICAgIHRoaXMuTXVsdGl2YWx1ZU9wdGlvbjIgPSAnJztcclxuICAgIHRoaXMuY29uZGl0aW9uMU11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uMk11bHRpdmFsdWUgPSBmYWxzZTtcclxuICAgIHRoaXMuY29uZGl0aW9uM011bHRpdmFsdWUgPSAhdGhpcy5jb25kaXRpb24zTXVsdGl2YWx1ZTtcclxuICB9XHJcblxyXG4gIG9uQmVmb3JlSGVscCA9IChlKSA9PiB7XHJcbiAgICBjb25zdCBsb29rdXBJbnMgPSBlLmluc3RhbmNlO1xyXG4gICAgaWYgKGxvb2t1cElucykge1xyXG4gICAgICBjb25zdCBnZXREYXRhRm4gPSBsb29rdXBJbnMuaHR0cC5nZXREYXRhO1xyXG4gICAgICBsb29rdXBJbnMuaHR0cC5nZXREYXRhID0gdGhpcy5tYXREZWZTZXJ2aWNlLmdldERhdGE7XHJcblxyXG4gICAgICBsb29rdXBJbnMuZGlhbG9nQ2xvc2VkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgbG9va3VwSW5zLmh0dHAuZ2V0RGF0YSA9IGdldERhdGFGbjtcclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxufVxyXG4iXX0=