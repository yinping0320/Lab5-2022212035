/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ComponentFactoryResolver, Injector, Input, ViewChild, ElementRef, HostBinding, NgZone, Optional, ChangeDetectorRef, Inject, LOCALE_ID } from '@angular/core';
import { ProcessDesignerUIState } from '../../../../app/process-designer.uistate';
import { ExpressionService, InjectedType, ExprEditMode } from '@gsp-svc/expression';
import { HttpService, SessionService } from '@ecp-caf/caf-common';
import { BsModalService } from '@farris/ui-modal';
import { CommonComponentUiRTService } from '@gsp-cmp/ccmp-ui';
import { SelectMetadataRTComponent } from '@gsp-lcm/metadatart-selector';
import { DatagridComponent } from '@farris/ui-datagrid';
import { of, throwError } from 'rxjs';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { LookupGridComponent } from '@farris/ui-lookup';
import { ComponentPerformerService } from './component-performer.service';
import { ParameterFetchValueMode } from '@gsp-cmp/wscmp-models';
import { ComponentPerformer } from './component-performer.entity';
import { ProcessDeUtil } from '../../../../domain/process-de-util';
import { catchError } from 'rxjs/operators';
import { WF_LANG_RESOURCES, WfLocalePipe } from '../../../../i18n/pipe/wf-process-editor-locale.pipe';
var ComponentPerformerComponent = /** @class */ (function () {
    function ComponentPerformerComponent(designerState, expr, resolver, injector, sessionSrc, modalService, componentService, ngZone, service, util, http, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.designerState = designerState;
        this.expr = expr;
        this.resolver = resolver;
        this.injector = injector;
        this.sessionSrc = sessionSrc;
        this.modalService = modalService;
        this.componentService = componentService;
        this.ngZone = ngZone;
        this.service = service;
        this.util = util;
        this.http = http;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.cls = 'farris-main-area flex-column';
        this.showClearButton = false;
        this.helpId = '';
        this.lookupDisplayText = '';
        this.columns = [
            { field: 'code', width: 60, title: this.localePipe.transform('component.componentPerformer.code') },
            { field: 'name', width: 60, title: this.localePipe.transform('component.componentPerformer.name') },
            { field: 'description', width: 60, title: this.localePipe.transform('component.componentPerformer.description'), showTips: true },
            {
                field: 'valueText', width: 100, title: this.localePipe.transform('component.componentPerformer.valueText'),
                editor: {
                    type: 'input-group',
                    options: {
                        groupText: '<i class="f-icon f-icon-lookup"></i>',
                        editable: false,
                        clickHandle: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            e.formControl.setValue(e.instance.value ? e.instance.value : '');
                            _this.showExprHelp(e);
                        }),
                        clear: (/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            var e_1, _a;
                            // 清理valueText，也应该清理value
                            e.rowData.value = '';
                            try {
                                for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                                    var p = _c.value;
                                    if (p.code === e.rowId) {
                                        p.value = '';
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        })
                    }
                }
            }
        ];
        this.helpInfo = {
            helpId: '',
            su: '',
            columns: [],
            displayType: 'List',
            items: [],
            pageInfo: {
                pageIndex: 1,
                pageList: [10, 20, 30, 50],
                pageSize: 20
            },
            search: { category: 'all' },
            title: this.localePipe.transform('component.componentPerformer.help'),
            total: 100,
            fieldInfo: {
                idField: 'id',
                textField: 'name',
                valueField: 'id'
            }
        };
        this.beforeEdit = (/**
         * @param {?} param
         * @return {?}
         */
        function (param) {
            /** @type {?} */
            var rowData = (/** @type {?} */ (param.rowData));
            _this.curParameter = rowData;
            switch (rowData.fetchValueMode) {
                case ParameterFetchValueMode.express:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                e.formControl.setValue(e.instance.value ? e.instance.value : '');
                                _this.showExprHelp(e);
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                var e_2, _a;
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                try {
                                    for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                                        var p = _c.value;
                                        if (p.code === e.rowId) {
                                            p.value = '';
                                        }
                                    }
                                }
                                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                                finally {
                                    try {
                                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                    }
                                    finally { if (e_2) throw e_2.error; }
                                }
                            })
                        }
                    };
                    break;
                case ParameterFetchValueMode.none:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                e.formControl.setValue(e.instance.value ? e.instance.value : '');
                                _this.showExprHelp(e);
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                var e_3, _a;
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                try {
                                    for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                                        var p = _c.value;
                                        if (p.code === e.rowId) {
                                            p.value = '';
                                        }
                                    }
                                }
                                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                                finally {
                                    try {
                                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                    }
                                    finally { if (e_3) throw e_3.error; }
                                }
                            })
                        }
                    };
                    break;
                case ParameterFetchValueMode.const:
                    param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };
                    break;
                case ParameterFetchValueMode.enum:
                    param.column.editor = { type: EditorTypes.TEXTBOX, options: {} };
                    break;
                case ParameterFetchValueMode.help:
                    param.column.editor = {
                        type: 'input-group',
                        options: {
                            groupText: '<i class="f-icon f-icon-lookup"></i>',
                            editable: false,
                            clickHandle: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                _this.cell = e;
                                _this.helpInfo.helpId = ((/** @type {?} */ (rowData.fetchValueSetting))).helpId;
                                _this.helpInfo.su = ((/** @type {?} */ (rowData.fetchValueSetting))).serviceUnit;
                                _this.helpInfo.pageInfo = {
                                    pageIndex: 1,
                                    pageList: [10, 20, 30, 50],
                                    pageSize: 20
                                };
                                _this.helpInfo.search = { category: 'all' };
                                _this.getHelpInfo();
                            }),
                            clear: (/**
                             * @param {?} e
                             * @return {?}
                             */
                            function (e) {
                                var e_4, _a;
                                // 清理valueText，也应该清理value
                                e.rowData.value = '';
                                try {
                                    for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                                        var p = _c.value;
                                        if (p.code === e.rowId) {
                                            p.value = '';
                                        }
                                    }
                                }
                                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                                finally {
                                    try {
                                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                                    }
                                    finally { if (e_4) throw e_4.error; }
                                }
                            })
                        }
                    };
                    break;
            }
            return of(true);
        });
        this.afterEdit = (/**
         * @param {?} rowIndex
         * @param {?} rowData
         * @param {?=} column
         * @return {?}
         */
        function (rowIndex, rowData, column) {
            return of(true);
        });
        /**
         * 帮助前事件
         * @param e
         * @return
         */
        this.onDictPicking = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            e.instance.http = {
                getData: (/**
                 * @param {?} url
                 * @param {?} params
                 * @return {?}
                 */
                function (url, params) {
                    /** @type {?} */
                    var _url = "/api/runtime/bcc/v1.0/help/data/" + _this.helpInfo.helpId;
                    params = Object.assign(params || {}, { withSpecificField: true });
                    return _this.http.put(_url, params).pipe(catchError((/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        if (e.error && e.error.innerMessage && e.error.innerMessage.indexOf('Could not find metadata') > -1) {
                            e.error.Message = _this.localePipe.transform('component.componentPerformer.serverSideNotFound');
                        }
                        return throwError(e);
                    })));
                })
            };
            return of(true);
        });
        this.dictPicked = (/**
         * @param {?} rowData
         * @return {?}
         */
        function (rowData) {
            var e_5, _a;
            if (_this.cell) {
                _this.cell.formControl.setValue(_this.util.getValue(rowData, _this.helpInfo.fieldInfo.textField));
                _this.cell.instance.cd.detectChanges();
                _this.cell.rowData.value = _this.util.getValue(rowData, _this.helpInfo.fieldInfo.valueField);
                try {
                    for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var p = _c.value;
                        if (p.code === _this.cell.rowId) {
                            p.value = _this.util.getValue(rowData, _this.helpInfo.fieldInfo.valueField);
                        }
                    }
                }
                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_5) throw e_5.error; }
                }
                return of(true);
            }
        });
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
    }
    Object.defineProperty(ComponentPerformerComponent.prototype, "component", {
        get: /**
         * @return {?}
         */
        function () {
            return this.componentPerformer;
        },
        set: /**
         * @param {?} cmp
         * @return {?}
         */
        function (cmp) {
            var _this = this;
            if (cmp && cmp.methodCode) {
                this.service.getHelpMetaData(cmp.metadataId, '').subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    /** @type {?} */
                    var c = JSON.parse(re.content);
                    /** @type {?} */
                    var operation = c.operations.find((/**
                     * @param {?} o
                     * @return {?}
                     */
                    function (o) { return o.code === cmp.methodCode; }));
                    if (operation) {
                        cmp.actualParameters = cmp.actualParameters.map((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) {
                            /** @type {?} */
                            var p = operation.parameters.find((/**
                             * @param {?} i
                             * @return {?}
                             */
                            function (i) { return i.code === a.code; }));
                            if (p) {
                                return {
                                    code: a.code,
                                    name: p.name,
                                    value: a.value,
                                    valueText: a.valueText ? a.valueText : a.value,
                                    description: p.description,
                                    tag: a.tag,
                                    fetchValueMode: p.fetchValueMode,
                                    fetchValueSetting: p.fetchValueSetting
                                };
                            }
                            else {
                                throw new Error(_this.localePipe.transform('component.componentPerformer.componentMethod'));
                            }
                        }));
                        _this.componentPerformer = cmp;
                    }
                    else {
                        throw new Error(_this.localePipe.transform('component.componentPerformer.methodNotExist'));
                    }
                }));
            }
            else {
                this.componentPerformer = new ComponentPerformer();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ComponentPerformerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    ComponentPerformerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.inputGroup.nativeElement.addEventListener('mouseenter', _this.onMouseEnter.bind(_this));
            _this.inputGroup.nativeElement.addEventListener('mouseleave', _this.onMouseLeave.bind(_this));
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ComponentPerformerComponent.prototype.onMouseEnter = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.showClearButton = true;
        if (this.showClearButton) {
            this.toggleClearIcon(event, true);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ComponentPerformerComponent.prototype.onMouseLeave = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.showClearButton = false;
        this.toggleClearIcon(event, false);
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    ComponentPerformerComponent.prototype.toggleClearIcon = /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    function (event, isShow) {
        if (isShow === void 0) { isShow = false; }
        /** @type {?} */
        var str = isShow ? '' : 'none';
        /** @type {?} */
        var clearIcon = event.target.querySelector('.input-group-clear');
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ComponentPerformerComponent.prototype.selectChanged = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.curParameter = event.data;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    ComponentPerformerComponent.prototype.endEdit = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // 文本框编辑同时修改value
        if (e.rowData.fetchValueMode === ParameterFetchValueMode.const || e.rowData.fetchValueMode === ParameterFetchValueMode.enum) {
            this.component.actualParameters[e.rowIndex].value = this.component.actualParameters[e.rowIndex].valueText;
        }
    };
    /**
     * @return {?}
     */
    ComponentPerformerComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        this.componentPerformer.name = '';
        this.componentPerformer.metadataId = '';
        this.componentPerformer.methodCode = '';
        this.componentPerformer.methodName = '';
        this.componentPerformer.condition = '';
        this.componentPerformer.actualParameters = new Array();
    };
    /**
     * @return {?}
     */
    ComponentPerformerComponent.prototype.selectComponent = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(SelectMetadataRTComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        compRef.instance.typeList = 'WebServiceComponent'; // 目前只能根据元数据类型过滤，后续添加标签过滤
        compRef.instance.selectedMetadata.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) {
            try {
                /** @type {?} */
                var meta = $event.metadata;
                _this.openComponentSelectorNew(meta.id, _this.sessionSrc.getUserSessionId());
            }
            catch (_a) {
                console.log('$event', $event);
                throw new Error(_this.localePipe.transform('component.componentPerformer.errorObtaining') + $event);
            }
        }));
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform('component.componentPerformer.componentSelection'),
            width: 980,
            height: 548,
            showButtons: false
        };
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.closeModalEmitter.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) { return dialog.close(); }));
    };
    /**
     * @private
     * @param {?} metadataId
     * @param {?} sessionId
     * @return {?}
     */
    ComponentPerformerComponent.prototype.openComponentSelectorNew = /**
     * @private
     * @param {?} metadataId
     * @param {?} sessionId
     * @return {?}
     */
    function (metadataId, sessionId) {
        var _this = this;
        this.componentService.openSelector(metadataId, sessionId).subscribe((/**
         * @param {?} selectorResult
         * @return {?}
         */
        function (selectorResult) {
            selectorResult.confirmEvent.subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result) {
                    _this.component.name = result.name;
                    _this.component.metadataId = result.id;
                    _this.component.methodCode = result.operations[0].code;
                    _this.component.methodName = result.operations[0].name;
                    _this.component.actualParameters = [];
                    if (result.operations[0].parameters && result.operations[0].parameters.length > 0) {
                        _this.component.actualParameters = result.operations[0].parameters
                            .map((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return (/** @type {?} */ (({
                            code: p.code,
                            name: p.name,
                            value: '',
                            valueText: '',
                            description: p.description,
                            fetchValueMode: p.fetchValueMode,
                            fetchValueSetting: p.fetchValueSetting
                        }))); }));
                    }
                }
            }));
        }));
    };
    /**
     * @param {?} e
     * @return {?}
     */
    ComponentPerformerComponent.prototype.showExprHelp = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        var e_6, _a, e_7, _b, e_8, _c;
        // this.expr.clearContext();
        if (this.designerState.schemas.length > 0) {
            try {
                for (var _d = tslib_1.__values(this.designerState.schemas), _e = _d.next(); !_e.done; _e = _d.next()) {
                    var schema = _e.value;
                    this.expr.addSchema('Schema', schema);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                }
                finally { if (e_6) throw e_6.error; }
            }
            if (this.designerState.schemas[0].entityTypes && this.designerState.schemas[0].entityTypes.length > 0) {
                /** @type {?} */
                var entityType = this.designerState.schemas[0].entityTypes[0];
                this.expr.addInjectedEntity(entityType.name, 'Schema', entityType.name, InjectedType.EntityType);
            }
        }
        /** @type {?} */
        var context = new Array();
        context = this.designerState.addContext(context);
        if (this.designerState.subActivityContext.length > 0) {
            var _loop_1 = function (variable) {
                if (!context.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return c.key === variable.key; }))) {
                    context.push(variable);
                }
            };
            try {
                for (var _f = tslib_1.__values(this.designerState.subActivityContext), _g = _f.next(); !_g.done; _g = _f.next()) {
                    var variable = _g.value;
                    _loop_1(variable);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        if (context.length > 0) {
            try {
                for (var context_1 = tslib_1.__values(context), context_1_1 = context_1.next(); !context_1_1.done; context_1_1 = context_1.next()) {
                    var v = context_1_1.value;
                    this.expr.addContext(v);
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (context_1_1 && !context_1_1.done && (_c = context_1.return)) _c.call(context_1);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        this.expr.setEditPattern(ExprEditMode.Advanced); // 默认打开高级表达式编辑器
        this.expr.addExpressionText(e.instance.value);
        this.expr.buildExpression().then((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            var e_9, _a;
            if (d) {
                e.formControl.setValue(d);
                e.instance.cd.detectChanges();
                e.rowData.value = d;
                try {
                    for (var _b = tslib_1.__values(_this.component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var p = _c.value;
                        if (p.code === e.rowId) {
                            p.value = d;
                        }
                    }
                }
                catch (e_9_1) { e_9 = { error: e_9_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_9) throw e_9.error; }
                }
            }
            //点击确定后，去除表达式里面的新增的上下文变量
            if (context.length > 0) {
                _this.expr.exprEntity.contextEntities = _this.expr.exprEntity.contextEntities.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return !context.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key === x.key; })); }));
            }
        }));
    };
    /**
     * @return {?}
     */
    ComponentPerformerComponent.prototype.getPerformers = /**
     * @return {?}
     */
    function () {
        this.grid.endCellEdit();
        console.log(this.component);
        return this.component;
    };
    /**
     * @private
     * @return {?}
     */
    ComponentPerformerComponent.prototype.getHelpInfo = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 2023年6月29日 此处获取帮助的结构
        this.service.getHelpMetaData(this.helpInfo.helpId, this.helpInfo.su).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (re) {
                /** @type {?} */
                var meta = re;
                /** @type {?} */
                var help = (/** @type {?} */ (JSON.parse(meta.content)));
                _this.helpInfo.columns = help.dataSource.columns;
                _this.helpInfo.displayType = help.displayType;
                _this.helpInfo.fieldInfo = {
                    idField: help.idField,
                    valueField: help.valueField,
                    textField: help.textField
                };
            }
            else {
                throw new Error(_this.localePipe.transform('component.componentPerformer.metadataNotExist'));
            }
        }));
        // 打开帮助
        this.lookup.showDialog();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ComponentPerformerComponent.prototype.pagerChanged = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (data) {
            this.helpInfo.pageInfo.pageIndex = data.pageIndex;
            this.helpInfo.pageInfo.pageSize = data.pageSize;
            this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su, this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)
                .subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.helpInfo.items = re.items;
                _this.helpInfo.title = re.title;
                _this.helpInfo.total = re.total;
                _this.lookup.loadData(re);
            }));
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ComponentPerformerComponent.prototype.search = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        console.log(data);
        this.helpInfo.search = { category: 'search' };
        if (data) {
            /** @type {?} */
            var searchInfo = {
                searchField: data.field || data.search.field,
                searchValue: data.value || data.search.value
            };
            this.helpInfo.search = Object.assign(this.helpInfo.search, searchInfo);
            this.service.getLookUpData(this.helpInfo.helpId, this.helpInfo.su, this.helpInfo.pageInfo.pageIndex, this.helpInfo.pageInfo.pageSize, this.helpInfo.search)
                .subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.helpInfo.items = re.items;
                _this.helpInfo.title = re.title;
                _this.helpInfo.total = re.total;
                _this.lookup.loadData(re);
            }));
        }
    };
    ComponentPerformerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-component-performer',
                    template: "\r\n    <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n      <div class=\"f-utils-fill-flex-column h-100 mx-3\" style=\"border-radius:16px;border: 1.5px solid #F1F3F7;\">\r\n      <form class=\"farris-form farris-card-content-bg farris-card-section mx-2\">\r\n        <div class=\"d-flex flex-wrap flex-column mb-2 pr-4\">\r\n          <div class=\"farris-form-controls-inline farris-form-auto mb-2\">\r\n            <div class=\"farris-group-wrap mx-3\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.componentPerformer.componentName'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-2\">\r\n                  <input type=\"text\" class=\"k-textbox form-control\" name=\"name\"\r\n                    [(ngModel)]=\"component.name\" />\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"farris-form-controls-inline farris-form-auto\">\r\n            <div class=\"farris-group-wrap mx-3\">\r\n              <div class=\"form-group\">\r\n                <label class=\"col-form-label\">\r\n                  <span class=\"farris-label-info text-danger\">*</span>\r\n                  <span class=\"farris-label-text\">{{'component.componentPerformer.componentSelect'|wfLocale}}</span>\r\n                </label>\r\n                <div class=\"farris-input-wrap ml-2\">\r\n                  <div #inputGroup class=\"input-group\">\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"component.methodCode\" name=\"methodCode\" [readOnly]=\"true\" />\r\n                    <div class=\"input-group-append\">\r\n                      <span [style.display]=\"showClearButton ? '' : 'none'\" class=\"input-group-text input-group-clear\" (click)=\"clear()\">\r\n                        <i class=\"f-icon modal_close\"></i>\r\n                      </span>\r\n                      <span class=\"input-group-text\" (click)=\"selectComponent()\" style=\"background: #FFF;\">\r\n                        <i class=\"f-icon f-icon-lookup\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"farris-feedback valid-feedback\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <farris-tabs class=\"f-utils-fill mx-3\" #params [value]=\"'params'\" [contentFill]=\"true\">\r\n        <farris-tab title=\"{{'component.componentPerformer.parameterList' | wfLocale}}\" [id]=\"'params'\">\r\n          <ng-template #content>\r\n            <div class=\"f-utils-fill-flex-column h-100\">\r\n              <farris-datagrid #grid [data]=\"component.actualParameters\" [columns]=\"columns\" [idField]=\"'code'\" [fit]=\"true\"\r\n                [fitColumns]=\"true\" [editable]=\"true\" [editMode]=\"'cell'\" [pagination]=\"false\" [showCheckbox]=\"false\"\r\n                [multiSelect]=\"false\" [afterEdit]=\"afterEdit\" [beforeEdit]=\"beforeEdit\"\r\n                (selectChanged)=\"selectChanged($event)\" (endEdit)=\"endEdit($event)\"></farris-datagrid>\r\n            </div>\r\n          </ng-template>\r\n        </farris-tab>\r\n      </farris-tabs>\r\n    </div>\r\n    </div>\r\n\r\n<!-- <farris-lookup-grid style=\"display: none;\" [items]=\"helpInfo.items\" [columns]=\"helpInfo.columns\" [resizable]=\"true\"\r\n  [singleSelect]=\"true\" [idField]=\"helpInfo.fieldInfo.idField\" [textField]=\"helpInfo.fieldInfo.textField\"\r\n  [valueField]=\"helpInfo.fieldInfo.valueField\" [pagination]=\"true\" [pageIndex]=\"helpInfo.pageInfo.pageIndex\"\r\n  [pageSize]=\"helpInfo.pageInfo.pageSize\" [pageList]=\"helpInfo.pageInfo.pageList\" [total]=\"helpInfo.total\"\r\n  title=\"helpInfo.title\" [displayType]=\"helpInfo.displayType\" [dictPicked]=\"dictPicked\" [remoteSearch]='false'\r\n  (pagerChanged)=\"pagerChanged($event)\" (search)=\"search($event)\">\r\n</farris-lookup-grid> -->\r\n<!-- 2023-6-28 DD\u9700\u6C42\uFF0C\u76F4\u63A5\u7528\u5E2E\u52A9id\u6253\u5F00\u800C\u4E0D\u662F\u81EA\u5DF1\u7EC4\u7EC7\u6570\u636E\u6E90\uFF0C\u4EE5\u5B9E\u73B0\u5206\u5C42\u52A0\u8F7D -->\r\n<farris-lookup-grid\r\nstyle=\"display: none;\"\r\n[uri]=\"'testLookupUri'\"\r\n[displayType]=\"'List'\"\r\n[idField]=\"'id'\"\r\n[pagination]=\"true\"\r\n[editable]=\"false\"\r\n[singleSelect]=\"true\"\r\n[textField]=\"'name'\"\r\n[helpId]=\"helpId\"\r\n[dictPicking]=\"onDictPicking\"\r\n[dictPicked]=\"dictPicked\"\r\n>\r\n</farris-lookup-grid>\r\n",
                    providers: [
                        ComponentPerformerService,
                        WfLocalePipe
                    ],
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ComponentPerformerComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: ExpressionService },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: SessionService },
        { type: BsModalService },
        { type: CommonComponentUiRTService },
        { type: NgZone },
        { type: ComponentPerformerService },
        { type: ProcessDeUtil },
        { type: HttpService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    ComponentPerformerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        grid: [{ type: ViewChild, args: [DatagridComponent,] }],
        lookup: [{ type: ViewChild, args: [LookupGridComponent,] }],
        inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
        component: [{ type: Input }]
    };
    return ComponentPerformerComponent;
}());
export { ComponentPerformerComponent };
if (false) {
    /** @type {?} */
    ComponentPerformerComponent.prototype.cls;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.componentPerformer;
    /** @type {?} */
    ComponentPerformerComponent.prototype.grid;
    /** @type {?} */
    ComponentPerformerComponent.prototype.lookup;
    /** @type {?} */
    ComponentPerformerComponent.prototype.inputGroup;
    /** @type {?} */
    ComponentPerformerComponent.prototype.showClearButton;
    /** @type {?} */
    ComponentPerformerComponent.prototype.helpId;
    /** @type {?} */
    ComponentPerformerComponent.prototype.lookupDisplayText;
    /** @type {?} */
    ComponentPerformerComponent.prototype.curParameter;
    /** @type {?} */
    ComponentPerformerComponent.prototype.columns;
    /** @type {?} */
    ComponentPerformerComponent.prototype.helpInfo;
    /** @type {?} */
    ComponentPerformerComponent.prototype.cell;
    /** @type {?} */
    ComponentPerformerComponent.prototype.beforeEdit;
    /** @type {?} */
    ComponentPerformerComponent.prototype.afterEdit;
    /**
     * 帮助前事件
     * \@param e
     * \@return
     * @type {?}
     */
    ComponentPerformerComponent.prototype.onDictPicking;
    /** @type {?} */
    ComponentPerformerComponent.prototype.dictPicked;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.designerState;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.expr;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.sessionSrc;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.componentService;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.service;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.util;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    ComponentPerformerComponent.prototype.localePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LXBlcmZvcm1lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL3ZpZXdzL3BlcmZvcm1lci92aWV3cy9jb21wb25lbnQtcGVyZm9ybWVyL2NvbXBvbmVudC1wZXJmb3JtZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSx3QkFBd0IsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFpQixNQUFNLEVBQUUsUUFBUSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFeE0sT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDbEYsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsMEJBQTBCLEVBQWtCLE1BQU0sa0JBQWtCLENBQUM7QUFDOUUsT0FBTyxFQUFFLHlCQUF5QixFQUFnQyxNQUFNLDhCQUE4QixDQUFDO0FBRXZHLE9BQU8sRUFBYyxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxFQUFFLEVBQXdCLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU1RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDeEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sK0JBQStC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U0FBQyxTQUFTO2dEQUNoQixNQUFNLFNBQUMsaUJBQWlCO2dCQTFIRCxZQUFZLHVCQTJIbkMsUUFBUTs7O3NCQS9HVixXQUFXLFNBQUMsT0FBTzt1QkFHbkIsU0FBUyxTQUFDLGlCQUFpQjt5QkFDM0IsU0FBUyxTQUFDLG1CQUFtQjs2QkFDN0IsU0FBUyxTQUFDLFlBQVk7NEJBSXRCLEtBQUs7O0lBNGJSLGtDQUFDO0NBQUEsQUEvY0QsSUErY0M7U0F0Y1ksMkJBQTJCOzs7SUFDdEMsMENBQ3FDOzs7OztJQUNyQyx5REFBK0M7O0lBQy9DLDJDQUFzRDs7SUFDdEQsNkNBQTREOztJQUM1RCxpREFBZ0Q7O0lBQ2hELHNEQUF3Qjs7SUFDeEIsNkNBQVU7O0lBQ1Ysd0RBQXFCOztJQXNDckIsbURBQThCOztJQUM5Qiw4Q0EyQkU7O0lBQ0YsK0NBbUJFOztJQUNGLDJDQUFVOztJQXlEVixpREFzRkM7O0lBQ0QsZ0RBRUM7Ozs7Ozs7SUFvSkQsb0RBZ0JDOztJQUVELGlEQVlDOzs7OztJQWxVQyxvREFBNkM7Ozs7O0lBQzdDLDJDQUErQjs7Ozs7SUFDL0IsK0NBQTBDOzs7OztJQUMxQywrQ0FBMEI7Ozs7O0lBQzFCLGlEQUFrQzs7Ozs7SUFDbEMsbURBQW9DOzs7OztJQUNwQyx1REFBb0Q7Ozs7O0lBQ3BELDZDQUFzQjs7Ozs7SUFDdEIsOENBQTBDOzs7OztJQUMxQywyQ0FBMkI7Ozs7O0lBQzNCLDJDQUF5Qjs7Ozs7SUFDekIsMENBQTBDOzs7OztJQUMxQywrQ0FBMkM7Ozs7O0lBQzNDLGdEQUFpRDs7Ozs7SUFDakQsaURBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3IsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RCaW5kaW5nLCBBZnRlclZpZXdJbml0LCBOZ1pvbmUsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBMT0NBTEVfSUQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvblNlcnZpY2UsIEluamVjdGVkVHlwZSwgRXhwckVkaXRNb2RlIH0gZnJvbSAnQGdzcC1zdmMvZXhwcmVzc2lvbic7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlLCBTZXNzaW9uU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBDb21tb25Db21wb25lbnRVaVJUU2VydmljZSwgU2VsZWN0b3JSZXN1bHQgfSBmcm9tICdAZ3NwLWNtcC9jY21wLXVpJztcclxuaW1wb3J0IHsgU2VsZWN0TWV0YWRhdGFSVENvbXBvbmVudCwgTWV0YWRhdGE0UmVmRHRvLCBNZXRhZGF0YUR0byB9IGZyb20gJ0Bnc3AtbGNtL21ldGFkYXRhcnQtc2VsZWN0b3InO1xyXG5pbXBvcnQgeyBHc3BDb21wb25lbnQgfSBmcm9tICdAZ3NwLWNtcC9jb21tb24tY29tcG9uZW50JztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiwgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgb2YsIGZvcmtKb2luLCBPYnNlcnZhYmxlLCB0aHJvd0Vycm9yIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFJvd0VkaXRQYXJhbSB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQvbGliL3R5cGVzJztcclxuaW1wb3J0IHsgRWRpdG9yVHlwZXMgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkLWVkaXRvcnMnO1xyXG5pbXBvcnQgeyBMb29rdXBHcmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQZXJmb3JtZXJTZXJ2aWNlIH0gZnJvbSAnLi9jb21wb25lbnQtcGVyZm9ybWVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBXZWJTZXJ2aWNlUGFyYW1ldGVyLCBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZSwgSGVscEZldGNoVmFsdWVTZXR0aW5nIH0gZnJvbSAnQGdzcC1jbXAvd3NjbXAtbW9kZWxzJztcclxuaW1wb3J0IHsgQ29tcG9uZW50UGVyZm9ybWVyLCBBY3R1YWxQYXJhbWV0ZXIgfSBmcm9tICcuL2NvbXBvbmVudC1wZXJmb3JtZXIuZW50aXR5JztcclxuaW1wb3J0IHsgUHJvY2Vzc0RlVXRpbCB9IGZyb20gJy4uLy4uLy4uLy4uL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBXRl9MQU5HX1JFU09VUkNFUywgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuLi8uLi8uLi8uLi9pMThuL2Fzc2V0cy9sYW5nLnJlc291cmNlJztcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtY29tcG9uZW50LXBlcmZvcm1lcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbXBvbmVudC1wZXJmb3JtZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2NvbXBvbmVudC1wZXJmb3JtZXIuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIENvbXBvbmVudFBlcmZvcm1lclNlcnZpY2UsXHJcbiAgICAgV2ZMb2NhbGVQaXBlXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50UGVyZm9ybWVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcclxuICBjbHMgPSAnZmFycmlzLW1haW4tYXJlYSBmbGV4LWNvbHVtbic7XHJcbiAgcHJpdmF0ZSBjb21wb25lbnRQZXJmb3JtZXI6IENvbXBvbmVudFBlcmZvcm1lcjtcclxuICBAVmlld0NoaWxkKERhdGFncmlkQ29tcG9uZW50KSBncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKExvb2t1cEdyaWRDb21wb25lbnQpIGxvb2t1cDogTG9va3VwR3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdpbnB1dEdyb3VwJykgaW5wdXRHcm91cDogRWxlbWVudFJlZjtcclxuICBzaG93Q2xlYXJCdXR0b24gPSBmYWxzZTtcclxuICBoZWxwSWQ9Jyc7XHJcbiAgbG9va3VwRGlzcGxheVRleHQ9Jyc7XHJcbiAgQElucHV0KClcclxuICBzZXQgY29tcG9uZW50KGNtcDogQ29tcG9uZW50UGVyZm9ybWVyKSB7XHJcbiAgICBpZiAoY21wICYmIGNtcC5tZXRob2RDb2RlKSB7XHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRIZWxwTWV0YURhdGEoY21wLm1ldGFkYXRhSWQsICcnKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGMgPSBKU09OLnBhcnNlKHJlLmNvbnRlbnQpO1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGMub3BlcmF0aW9ucy5maW5kKG8gPT4gby5jb2RlID09PSBjbXAubWV0aG9kQ29kZSk7XHJcbiAgICAgICAgaWYgKG9wZXJhdGlvbikge1xyXG4gICAgICAgICAgY21wLmFjdHVhbFBhcmFtZXRlcnMgPSBjbXAuYWN0dWFsUGFyYW1ldGVycy5tYXAoYSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBvcGVyYXRpb24ucGFyYW1ldGVycy5maW5kKGkgPT4gaS5jb2RlID09PSBhLmNvZGUpO1xyXG4gICAgICAgICAgICBpZiAocCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiBhLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBwLm5hbWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlVGV4dDogYS52YWx1ZVRleHQgPyBhLnZhbHVlVGV4dCA6IGEudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIHRhZzogYS50YWcsXHJcbiAgICAgICAgICAgICAgICBmZXRjaFZhbHVlTW9kZTogcC5mZXRjaFZhbHVlTW9kZSxcclxuICAgICAgICAgICAgICAgIGZldGNoVmFsdWVTZXR0aW5nOiBwLmZldGNoVmFsdWVTZXR0aW5nXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybSgnY29tcG9uZW50LmNvbXBvbmVudFBlcmZvcm1lci5jb21wb25lbnRNZXRob2QnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5jb21wb25lbnRQZXJmb3JtZXIgPSBjbXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuY29tcG9uZW50UGVyZm9ybWVyLm1ldGhvZE5vdEV4aXN0JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lciA9IG5ldyBDb21wb25lbnRQZXJmb3JtZXIoKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGNvbXBvbmVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFBlcmZvcm1lcjtcclxuICB9XHJcblxyXG4gIGN1clBhcmFtZXRlcjogQWN0dWFsUGFyYW1ldGVyO1xyXG4gIGNvbHVtbnMgPSBbXHJcbiAgICB7IGZpZWxkOiAnY29kZScsIHdpZHRoOiA2MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5jb21wb25lbnRQZXJmb3JtZXIuY29kZScpIH0sXHJcbiAgICB7IGZpZWxkOiAnbmFtZScsIHdpZHRoOiA2MCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5jb21wb25lbnRQZXJmb3JtZXIubmFtZScpIH0sXHJcbiAgICB7IGZpZWxkOiAnZGVzY3JpcHRpb24nLCB3aWR0aDogNjAsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuY29tcG9uZW50UGVyZm9ybWVyLmRlc2NyaXB0aW9uJyksIHNob3dUaXBzOiB0cnVlIH0sXHJcbiAgICB7XHJcbiAgICAgIGZpZWxkOiAndmFsdWVUZXh0Jywgd2lkdGg6IDEwMCwgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5jb21wb25lbnRQZXJmb3JtZXIudmFsdWVUZXh0JyksXHJcbiAgICAgIGVkaXRvcjoge1xyXG4gICAgICAgIHR5cGU6ICdpbnB1dC1ncm91cCcsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgZ3JvdXBUZXh0OiAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLWxvb2t1cFwiPjwvaT4nLFxyXG4gICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZS5pbnN0YW5jZS52YWx1ZSA/IGUuaW5zdGFuY2UudmFsdWUgOiAnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0V4cHJIZWxwKGUpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNsZWFyOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyDmuIXnkIZ2YWx1ZVRleHTvvIzkuZ/lupTor6XmuIXnkIZ2YWx1ZVxyXG4gICAgICAgICAgICBlLnJvd0RhdGEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHRoaXMuY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICBpZiAocC5jb2RlID09PSBlLnJvd0lkKSB7XHJcbiAgICAgICAgICAgICAgICBwLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXTtcclxuICBoZWxwSW5mbyA9IHtcclxuICAgIGhlbHBJZDogJycsXHJcbiAgICBzdTogJycsXHJcbiAgICBjb2x1bW5zOiBbXSxcclxuICAgIGRpc3BsYXlUeXBlOiAnTGlzdCcsXHJcbiAgICBpdGVtczogW10sXHJcbiAgICBwYWdlSW5mbzoge1xyXG4gICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgIHBhZ2VMaXN0OiBbMTAsIDIwLCAzMCwgNTBdLFxyXG4gICAgICBwYWdlU2l6ZTogMjBcclxuICAgIH0sXHJcbiAgICBzZWFyY2g6IHsgY2F0ZWdvcnk6ICdhbGwnfSxcclxuICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuY29tcG9uZW50UGVyZm9ybWVyLmhlbHAnKSxcclxuICAgIHRvdGFsOiAxMDAsXHJcbiAgICBmaWVsZEluZm86IHtcclxuICAgICAgaWRGaWVsZDogJ2lkJyxcclxuICAgICAgdGV4dEZpZWxkOiAnbmFtZScsXHJcbiAgICAgIHZhbHVlRmllbGQ6ICdpZCdcclxuICAgIH1cclxuICB9O1xyXG4gIGNlbGw6IGFueTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZGVzaWduZXJTdGF0ZTogUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSxcclxuICAgIHByaXZhdGUgZXhwcjogRXhwcmVzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgc2Vzc2lvblNyYzogU2Vzc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGNvbXBvbmVudFNlcnZpY2U6IENvbW1vbkNvbXBvbmVudFVpUlRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgIHByaXZhdGUgc2VydmljZTogQ29tcG9uZW50UGVyZm9ybWVyU2VydmljZSxcclxuICAgIHByaXZhdGUgdXRpbDogUHJvY2Vzc0RlVXRpbCxcclxuICAgIHByaXZhdGUgaHR0cDogSHR0cFNlcnZpY2UsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBASW5qZWN0KExPQ0FMRV9JRCkgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nLFxyXG4gICAgQEluamVjdChXRl9MQU5HX1JFU09VUkNFUykgcHJpdmF0ZSByZXNvdXJjZXM6IGFueSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbG9jYWxlUGlwZTogV2ZMb2NhbGVQaXBlLFxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVQaXBlID0gdGhpcy5sb2NhbGVQaXBlIHx8IG5ldyBXZkxvY2FsZVBpcGUobG9jYWxlSWQsIHJlc291cmNlcyk7XHJcbiAgIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgdGhpcy5pbnB1dEdyb3VwLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbW91c2VlbnRlcicsXHJcbiAgICAgICAgdGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlucHV0R3JvdXAubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdtb3VzZWxlYXZlJyxcclxuICAgICAgICB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VFbnRlcihldmVudCkge1xyXG4gICAgdGhpcy5zaG93Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuc2hvd0NsZWFyQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMudG9nZ2xlQ2xlYXJJY29uKGV2ZW50LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25Nb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICB0aGlzLnNob3dDbGVhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQsIGZhbHNlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHN0ciA9IGlzU2hvdyA/ICcnIDogJ25vbmUnO1xyXG4gICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1jbGVhcicpO1xyXG4gICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdENoYW5nZWQoZXZlbnQpIHtcclxuICAgIHRoaXMuY3VyUGFyYW1ldGVyID0gZXZlbnQuZGF0YTtcclxuICB9XHJcbiAgYmVmb3JlRWRpdCA9IChwYXJhbTogUm93RWRpdFBhcmFtKSA9PiB7XHJcbiAgICBjb25zdCByb3dEYXRhID0gcGFyYW0ucm93RGF0YSBhcyBhbnk7XHJcbiAgICB0aGlzLmN1clBhcmFtZXRlciA9IHJvd0RhdGE7XHJcbiAgICBzd2l0Y2ggKHJvd0RhdGEuZmV0Y2hWYWx1ZU1vZGUpIHtcclxuICAgICAgY2FzZSBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZS5leHByZXNzOlxyXG4gICAgICAgIHBhcmFtLmNvbHVtbi5lZGl0b3IgPSB7XHJcbiAgICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgICAgICB0aGlzLnNob3dFeHBySGVscChlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8g5riF55CGdmFsdWVUZXh077yM5Lmf5bqU6K+l5riF55CGdmFsdWVcclxuICAgICAgICAgICAgICBlLnJvd0RhdGEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAuY29kZSA9PT0gZS5yb3dJZCkge1xyXG4gICAgICAgICAgICAgICAgICBwLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZS5ub25lOlxyXG4gICAgICAgIHBhcmFtLmNvbHVtbi5lZGl0b3IgPSB7XHJcbiAgICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgZS5mb3JtQ29udHJvbC5zZXRWYWx1ZShlLmluc3RhbmNlLnZhbHVlID8gZS5pbnN0YW5jZS52YWx1ZSA6ICcnKTtcclxuICAgICAgICAgICAgICB0aGlzLnNob3dFeHBySGVscChlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8g5riF55CGdmFsdWVUZXh077yM5Lmf5bqU6K+l5riF55CGdmFsdWVcclxuICAgICAgICAgICAgICBlLnJvd0RhdGEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAuY29kZSA9PT0gZS5yb3dJZCkge1xyXG4gICAgICAgICAgICAgICAgICBwLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZS5jb25zdDpcclxuICAgICAgICBwYXJhbS5jb2x1bW4uZWRpdG9yID0geyB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YLCBvcHRpb25zOiB7fSB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmVudW06XHJcbiAgICAgICAgcGFyYW0uY29sdW1uLmVkaXRvciA9IHsgdHlwZTogRWRpdG9yVHlwZXMuVEVYVEJPWCwgb3B0aW9uczoge30gfTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZS5oZWxwOlxyXG4gICAgICAgIHBhcmFtLmNvbHVtbi5lZGl0b3IgPSB7XHJcbiAgICAgICAgICB0eXBlOiAnaW5wdXQtZ3JvdXAnLFxyXG4gICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBncm91cFRleHQ6ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPicsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xpY2tIYW5kbGU6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jZWxsID0gZTtcclxuICAgICAgICAgICAgICB0aGlzLmhlbHBJbmZvLmhlbHBJZCA9IChyb3dEYXRhLmZldGNoVmFsdWVTZXR0aW5nIGFzIEhlbHBGZXRjaFZhbHVlU2V0dGluZykuaGVscElkO1xyXG4gICAgICAgICAgICAgIHRoaXMuaGVscEluZm8uc3UgPSAocm93RGF0YS5mZXRjaFZhbHVlU2V0dGluZyBhcyBIZWxwRmV0Y2hWYWx1ZVNldHRpbmcpLnNlcnZpY2VVbml0O1xyXG4gICAgICAgICAgICAgIHRoaXMuaGVscEluZm8ucGFnZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgICAgICBwYWdlTGlzdDogWzEwLCAyMCwgMzAsIDUwXSxcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAyMFxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgdGhpcy5oZWxwSW5mby5zZWFyY2ggPSB7IGNhdGVnb3J5OiAnYWxsJyB9O1xyXG4gICAgICAgICAgICAgIHRoaXMuZ2V0SGVscEluZm8oKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xlYXI6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8g5riF55CGdmFsdWVUZXh077yM5Lmf5bqU6K+l5riF55CGdmFsdWVcclxuICAgICAgICAgICAgICBlLnJvd0RhdGEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAuY29kZSA9PT0gZS5yb3dJZCkge1xyXG4gICAgICAgICAgICAgICAgICBwLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcbiAgYWZ0ZXJFZGl0ID0gKHJvd0luZGV4OiBudW1iZXIsIHJvd0RhdGE6IGFueSwgY29sdW1uPzogRGF0YUNvbHVtbikgPT4ge1xyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZW5kRWRpdChlOiBhbnkpIHtcclxuICAgIC8vIOaWh+acrOahhue8lui+keWQjOaXtuS/ruaUuXZhbHVlXHJcbiAgICBpZiAoZS5yb3dEYXRhLmZldGNoVmFsdWVNb2RlID09PSBQYXJhbWV0ZXJGZXRjaFZhbHVlTW9kZS5jb25zdCB8fCBlLnJvd0RhdGEuZmV0Y2hWYWx1ZU1vZGUgPT09IFBhcmFtZXRlckZldGNoVmFsdWVNb2RlLmVudW0pIHtcclxuICAgICAgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVyc1tlLnJvd0luZGV4XS52YWx1ZSA9IHRoaXMuY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnNbZS5yb3dJbmRleF0udmFsdWVUZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lci5uYW1lID0gJyc7XHJcbiAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lci5tZXRhZGF0YUlkID0gJyc7XHJcbiAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lci5tZXRob2RDb2RlID0gJyc7XHJcbiAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lci5tZXRob2ROYW1lID0gJyc7XHJcbiAgICB0aGlzLmNvbXBvbmVudFBlcmZvcm1lci5jb25kaXRpb24gPSAnJztcclxuICAgIHRoaXMuY29tcG9uZW50UGVyZm9ybWVyLmFjdHVhbFBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdENvbXBvbmVudCgpIHtcclxuICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShTZWxlY3RNZXRhZGF0YVJUQ29tcG9uZW50KTtcclxuICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLnR5cGVMaXN0ID0gJ1dlYlNlcnZpY2VDb21wb25lbnQnOyAvLyDnm67liY3lj6rog73moLnmja7lhYPmlbDmja7nsbvlnovov4fmu6TvvIzlkI7nu63mt7vliqDmoIfnrb7ov4fmu6RcclxuICAgIGNvbXBSZWYuaW5zdGFuY2Uuc2VsZWN0ZWRNZXRhZGF0YS5zdWJzY3JpYmUoKCRldmVudDogTWV0YWRhdGE0UmVmRHRvKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbWV0YTogTWV0YWRhdGFEdG8gPSAkZXZlbnQubWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5vcGVuQ29tcG9uZW50U2VsZWN0b3JOZXcobWV0YS5pZCwgdGhpcy5zZXNzaW9uU3JjLmdldFVzZXJTZXNzaW9uSWQoKSk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCckZXZlbnQnLCAkZXZlbnQpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuY29tcG9uZW50UGVyZm9ybWVyLmVycm9yT2J0YWluaW5nJykgKyAkZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBtb2RhbENvbmZpZyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5jb21wb25lbnRQZXJmb3JtZXIuY29tcG9uZW50U2VsZWN0aW9uJyksXHJcbiAgICAgIHdpZHRoOiA5ODAsXHJcbiAgICAgIGhlaWdodDogNTQ4LFxyXG4gICAgICBzaG93QnV0dG9uczogZmFsc2VcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY2xvc2VNb2RhbEVtaXR0ZXIuc3Vic2NyaWJlKCRldmVudCA9PiBkaWFsb2cuY2xvc2UoKSk7XHJcbiAgfVxyXG4gIHByaXZhdGUgb3BlbkNvbXBvbmVudFNlbGVjdG9yTmV3KG1ldGFkYXRhSWQ6IHN0cmluZywgc2Vzc2lvbklkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuY29tcG9uZW50U2VydmljZS5vcGVuU2VsZWN0b3IobWV0YWRhdGFJZCwgc2Vzc2lvbklkKS5zdWJzY3JpYmUoXHJcbiAgICAgIChzZWxlY3RvclJlc3VsdDogU2VsZWN0b3JSZXN1bHQpID0+IHtcclxuICAgICAgICBzZWxlY3RvclJlc3VsdC5jb25maXJtRXZlbnQuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgKHJlc3VsdDogR3NwQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5uYW1lID0gcmVzdWx0Lm5hbWU7XHJcbiAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQubWV0YWRhdGFJZCA9IHJlc3VsdC5pZDtcclxuICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5tZXRob2RDb2RlID0gcmVzdWx0Lm9wZXJhdGlvbnNbMF0uY29kZTtcclxuICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5tZXRob2ROYW1lID0gcmVzdWx0Lm9wZXJhdGlvbnNbMF0ubmFtZTtcclxuICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzID0gW107XHJcblxyXG4gICAgICAgICAgICAgIGlmIChyZXN1bHQub3BlcmF0aW9uc1swXS5wYXJhbWV0ZXJzICYmIHJlc3VsdC5vcGVyYXRpb25zWzBdLnBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycyA9IHJlc3VsdC5vcGVyYXRpb25zWzBdLnBhcmFtZXRlcnNcclxuICAgICAgICAgICAgICAgICAgLm1hcCgocDogV2ViU2VydmljZVBhcmFtZXRlcikgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IHAuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHAubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVGV4dDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgIGZldGNoVmFsdWVNb2RlOiBwLmZldGNoVmFsdWVNb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZmV0Y2hWYWx1ZVNldHRpbmc6IHAuZmV0Y2hWYWx1ZVNldHRpbmdcclxuICAgICAgICAgICAgICAgICAgICB9KSBhcyBhbnkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBzaG93RXhwckhlbHAoZTogYW55KSB7XHJcbiAgICAvLyB0aGlzLmV4cHIuY2xlYXJDb250ZXh0KCk7XHJcbiAgICBpZiAodGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiB0aGlzLmRlc2lnbmVyU3RhdGUuc2NoZW1hcykge1xyXG4gICAgICAgIHRoaXMuZXhwci5hZGRTY2hlbWEoJ1NjaGVtYScsIHNjaGVtYSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGVzaWduZXJTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzICYmIHRoaXMuZGVzaWduZXJTdGF0ZS5zY2hlbWFzWzBdLmVudGl0eVR5cGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5kZXNpZ25lclN0YXRlLnNjaGVtYXNbMF0uZW50aXR5VHlwZXNbMF07XHJcbiAgICAgICAgdGhpcy5leHByLmFkZEluamVjdGVkRW50aXR5KGVudGl0eVR5cGUubmFtZSwgJ1NjaGVtYScsXHJcbiAgICAgICAgICBlbnRpdHlUeXBlLm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgQXJyYXkoKTtcclxuICAgIGNvbnRleHQgPSB0aGlzLmRlc2lnbmVyU3RhdGUuYWRkQ29udGV4dChjb250ZXh0KTtcclxuICAgIGlmICh0aGlzLmRlc2lnbmVyU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2YXJpYWJsZSBvZiB0aGlzLmRlc2lnbmVyU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKCFjb250ZXh0LnNvbWUoYyA9PiBjLmtleSA9PT0gdmFyaWFibGUua2V5KSkge1xyXG4gICAgICAgICAgY29udGV4dC5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB2IG9mIGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmV4cHIuYWRkQ29udGV4dCh2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5leHByLnNldEVkaXRQYXR0ZXJuKEV4cHJFZGl0TW9kZS5BZHZhbmNlZCk7IC8vIOm7mOiupOaJk+W8gOmrmOe6p+ihqOi+vuW8j+e8lui+keWZqFxyXG4gICAgdGhpcy5leHByLmFkZEV4cHJlc3Npb25UZXh0KGUuaW5zdGFuY2UudmFsdWUpO1xyXG4gICAgdGhpcy5leHByLmJ1aWxkRXhwcmVzc2lvbigpLnRoZW4oKGQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZiAoZCkge1xyXG4gICAgICAgIGUuZm9ybUNvbnRyb2wuc2V0VmFsdWUoZCk7XHJcbiAgICAgICAgZS5pbnN0YW5jZS5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgZS5yb3dEYXRhLnZhbHVlID0gZDtcclxuICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5jb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgaWYgKHAuY29kZSA9PT0gZS5yb3dJZCkge1xyXG4gICAgICAgICAgICBwLnZhbHVlID0gZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/ngrnlh7vnoa7lrprlkI7vvIzljrvpmaTooajovr7lvI/ph4zpnaLnmoTmlrDlop7nmoTkuIrkuIvmloflj5jph49cclxuICAgICAgaWYoY29udGV4dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcih4ID0+ICFjb250ZXh0LnNvbWUoeSA9PiB5LmtleSA9PT0geC5rZXkpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRQZXJmb3JtZXJzKCkge1xyXG4gICAgdGhpcy5ncmlkLmVuZENlbGxFZGl0KCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmNvbXBvbmVudCk7XHJcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEhlbHBJbmZvKCkge1xyXG4gICAgLy8gMjAyM+W5tDbmnIgyOeaXpSDmraTlpITojrflj5bluK7liqnnmoTnu5PmnoRcclxuICAgIHRoaXMuc2VydmljZS5nZXRIZWxwTWV0YURhdGEodGhpcy5oZWxwSW5mby5oZWxwSWQsIHRoaXMuaGVscEluZm8uc3UpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgIGlmIChyZSkge1xyXG4gICAgICAgIGNvbnN0IG1ldGEgPSByZTtcclxuICAgICAgICBjb25zdCBoZWxwID0gSlNPTi5wYXJzZShtZXRhLmNvbnRlbnQpIGFzIGFueTtcclxuICAgICAgICB0aGlzLmhlbHBJbmZvLmNvbHVtbnMgPSBoZWxwLmRhdGFTb3VyY2UuY29sdW1ucztcclxuICAgICAgICB0aGlzLmhlbHBJbmZvLmRpc3BsYXlUeXBlID0gaGVscC5kaXNwbGF5VHlwZTtcclxuICAgICAgICB0aGlzLmhlbHBJbmZvLmZpZWxkSW5mbyA9IHtcclxuICAgICAgICAgIGlkRmllbGQ6IGhlbHAuaWRGaWVsZCxcclxuICAgICAgICAgIHZhbHVlRmllbGQ6IGhlbHAudmFsdWVGaWVsZCxcclxuICAgICAgICAgIHRleHRGaWVsZDogaGVscC50ZXh0RmllbGRcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKCdjb21wb25lbnQuY29tcG9uZW50UGVyZm9ybWVyLm1ldGFkYXRhTm90RXhpc3QnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAvLyDmiZPlvIDluK7liqlcclxuICAgIHRoaXMubG9va3VwLnNob3dEaWFsb2coKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW4ruWKqeWJjeS6i+S7tlxyXG4gICAqIEBwYXJhbSBlXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBvbkRpY3RQaWNraW5nID0gKGUpID0+IHtcclxuICAgIGUuaW5zdGFuY2UuaHR0cCA9IHtcclxuICAgICAgZ2V0RGF0YTogKHVybDpzdHJpbmcsIHBhcmFtczogYW55KTogT2JzZXJ2YWJsZTxhbnk+ICA9PiB7XHJcbiAgICAgICAgY29uc3QgX3VybCA9IGAvYXBpL3J1bnRpbWUvYmNjL3YxLjAvaGVscC9kYXRhLyR7dGhpcy5oZWxwSW5mby5oZWxwSWR9YDtcclxuICAgICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHBhcmFtcyB8fCB7fSwgeyB3aXRoU3BlY2lmaWNGaWVsZDogdHJ1ZSB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnB1dChfdXJsLCBwYXJhbXMpLnBpcGUoXHJcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmVycm9yICYmIGUuZXJyb3IuaW5uZXJNZXNzYWdlICYmIGUuZXJyb3IuaW5uZXJNZXNzYWdlLmluZGV4T2YoJ0NvdWxkIG5vdCBmaW5kIG1ldGFkYXRhJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuZXJyb3IuTWVzc2FnZSA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oJ2NvbXBvbmVudC5jb21wb25lbnRQZXJmb3JtZXIuc2VydmVyU2lkZU5vdEZvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhyb3dFcnJvcihlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvZih0cnVlKTtcclxuICB9XHJcblxyXG4gIGRpY3RQaWNrZWQgPSAocm93RGF0YSkgPT4ge1xyXG4gICAgaWYgKHRoaXMuY2VsbCkge1xyXG4gICAgICB0aGlzLmNlbGwuZm9ybUNvbnRyb2wuc2V0VmFsdWUodGhpcy51dGlsLmdldFZhbHVlKHJvd0RhdGEsIHRoaXMuaGVscEluZm8uZmllbGRJbmZvLnRleHRGaWVsZCkpO1xyXG4gICAgICB0aGlzLmNlbGwuaW5zdGFuY2UuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB0aGlzLmNlbGwucm93RGF0YS52YWx1ZSA9IHRoaXMudXRpbC5nZXRWYWx1ZShyb3dEYXRhLCB0aGlzLmhlbHBJbmZvLmZpZWxkSW5mby52YWx1ZUZpZWxkKTtcclxuICAgICAgZm9yIChjb25zdCBwIG9mIHRoaXMuY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICBpZiAocC5jb2RlID09PSB0aGlzLmNlbGwucm93SWQpIHtcclxuICAgICAgICAgIHAudmFsdWUgPSB0aGlzLnV0aWwuZ2V0VmFsdWUocm93RGF0YSwgdGhpcy5oZWxwSW5mby5maWVsZEluZm8udmFsdWVGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgcGFnZXJDaGFuZ2VkKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlSW5kZXggPSBkYXRhLnBhZ2VJbmRleDtcclxuICAgICAgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlU2l6ZSA9IGRhdGEucGFnZVNpemU7XHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRMb29rVXBEYXRhKHRoaXMuaGVscEluZm8uaGVscElkLCB0aGlzLmhlbHBJbmZvLnN1LFxyXG4gICAgICAgIHRoaXMuaGVscEluZm8ucGFnZUluZm8ucGFnZUluZGV4LCB0aGlzLmhlbHBJbmZvLnBhZ2VJbmZvLnBhZ2VTaXplLCB0aGlzLmhlbHBJbmZvLnNlYXJjaClcclxuICAgICAgICAuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgIHRoaXMuaGVscEluZm8uaXRlbXMgPSByZS5pdGVtcztcclxuICAgICAgICAgIHRoaXMuaGVscEluZm8udGl0bGUgPSByZS50aXRsZTtcclxuICAgICAgICAgIHRoaXMuaGVscEluZm8udG90YWwgPSByZS50b3RhbDtcclxuICAgICAgICAgIHRoaXMubG9va3VwLmxvYWREYXRhKHJlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgc2VhcmNoKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgdGhpcy5oZWxwSW5mby5zZWFyY2ggPSB7IGNhdGVnb3J5OiAnc2VhcmNoJyB9O1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgY29uc3Qgc2VhcmNoSW5mbyA9IHtcclxuICAgICAgICBzZWFyY2hGaWVsZDogZGF0YS5maWVsZCB8fCBkYXRhLnNlYXJjaC5maWVsZCxcclxuICAgICAgICBzZWFyY2hWYWx1ZTogZGF0YS52YWx1ZSB8fCBkYXRhLnNlYXJjaC52YWx1ZVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmhlbHBJbmZvLnNlYXJjaCA9IE9iamVjdC5hc3NpZ24odGhpcy5oZWxwSW5mby5zZWFyY2gsIHNlYXJjaEluZm8pO1xyXG4gICAgICB0aGlzLnNlcnZpY2UuZ2V0TG9va1VwRGF0YSh0aGlzLmhlbHBJbmZvLmhlbHBJZCwgdGhpcy5oZWxwSW5mby5zdSxcclxuICAgICAgICB0aGlzLmhlbHBJbmZvLnBhZ2VJbmZvLnBhZ2VJbmRleCwgdGhpcy5oZWxwSW5mby5wYWdlSW5mby5wYWdlU2l6ZSwgdGhpcy5oZWxwSW5mby5zZWFyY2gpXHJcbiAgICAgICAgLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLml0ZW1zID0gcmUuaXRlbXM7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLnRpdGxlID0gcmUudGl0bGU7XHJcbiAgICAgICAgICB0aGlzLmhlbHBJbmZvLnRvdGFsID0gcmUudG90YWw7XHJcbiAgICAgICAgICB0aGlzLmxvb2t1cC5sb2FkRGF0YShyZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==