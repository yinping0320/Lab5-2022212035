/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Injector, ComponentFactoryResolver, HostBinding, Output, EventEmitter, TemplateRef, ViewContainerRef, ChangeDetectorRef, Optional, LOCALE_ID, Inject } from '@angular/core';
import { ProcessTime } from './model/process-time';
import { ProcessDesignerUIState } from './app/process-designer.uistate';
import { ProcessDesignerViewModel } from './app/process-designer.viewmodel';
import { ExecuteFormModel, TerminalType } from './views/execute-forms/entities/execute-form.entity';
import { BsModalService } from '@farris/ui-modal';
import { ProcessDesignerDataService } from './domain/process-designer.dataservice';
import { LoadingService } from '@farris/ui-loading';
import { NotifyService } from '@farris/ui-notify';
import { MessagerService } from '@farris/ui-messager';
import { WFFlowElementsViewModel } from './app/wf-flowElements.viewModel';
import { PropertyPanelComponent, ShowMode } from '@farris/ide-property-panel';
import { SignRuleComponent } from './views/sign-rule/sign-rule.component';
import { ProcessInfo } from './model/process-info';
import { RTProcessInfo } from './model/rt-process-info';
import { forkJoin, of } from 'rxjs';
import { AuditEvent } from './domain/entities/audit-processDef-info';
import { NoteComponent } from './views/note/note.component';
import { ProcessDeUtil } from './domain/process-de-util';
import { EventBusService } from './views/shared/event-bus.service';
import { VerifyDetailService } from '@farris/ui-verify-detail';
import { AssignScopeComponent } from './views/assign-scope/assign-scope.component';
import { WfEditorUi } from './designer/WfEditorUi';
import { PmfEvents } from "@edp-pmf/grapheditor";
import { BpmnModel } from "@edp-pmf/bpmn-model";
import { mxEvent } from "@edp-pmf/mxgraph-ts";
import { WfValidatorAdapter } from "./designer/WfValidatorAdapter";
import { ProcessHeader, StartMode } from "@gsp-wf/wf-process-model";
import { EventBusKeys } from './model/event-bus-keys';
import { ProcessPropertyKeys } from './designer/wf-cell/property-keys/ProcessPropertyKeys';
import { UserActivityPropertyKeys } from './designer/wf-cell/property-keys/UserActivityPropertyKeys';
import { MessageActivityPropertyKeys } from './designer/wf-cell/property-keys/MessageActivityPropertyKeys';
import { NotifyActivityPropertyKeys } from './designer/wf-cell/property-keys/NotifyActivityPropertyKeys';
import { delay, switchMap } from 'rxjs/operators';
import { WF_LANG_RESOURCES, WfLocalePipe } from './i18n/pipe/wf-process-editor-locale.pipe';
import { WF_PROCESS_EDITOR_LANG_RESOURCES } from './i18n/assets/lang.resource';
import { BatchSetPropertiesComponent } from './views/batch-set-properties/batch-set-properties.component';
var ɵ0 = WF_PROCESS_EDITOR_LANG_RESOURCES;
var WfProcessEditorComponent = /** @class */ (function () {
    function WfProcessEditorComponent(uiState, viewModel, service, loadService, notify, message, activity, injector, modalService, resolver, eventBus, cdr, localeId, resources, localePipe) {
        var _this = this;
        this.uiState = uiState;
        this.viewModel = viewModel;
        this.service = service;
        this.loadService = loadService;
        this.notify = notify;
        this.message = message;
        this.activity = activity;
        this.injector = injector;
        this.modalService = modalService;
        this.resolver = resolver;
        this.eventBus = eventBus;
        this.cdr = cdr;
        this.localeId = localeId;
        this.resources = resources;
        this.localePipe = localePipe;
        this.flag = true;
        this.cls = 'farris-main-area flex-column';
        this.action = 'edit';
        this.mode = 'general';
        this.procType = "wf";
        this.close = new EventEmitter();
        this.errorList = [];
        this.tabTypeList = [
            {
                id: 'processWarning',
                type: 'processWarning',
                title: this.localePipe.instant("processEditor.tip"),
                iconCls: 'f-icon-default',
                iconStyle: 'color:#f49730;'
            }
        ];
        this.panelWidth = 330;
        this.propertyPanelResizable = true;
        this.rightPanelWidth = 330; // 右侧面板宽度
        // localeId: string = "zh-CHS";
        /**
         * 界面是否发生变化标志，修改属性、移动节点等均会将此值设为true
         */
        this.changedFlag = false;
        this.showModelButton = false;
        this.localePipe = this.localePipe || new WfLocalePipe(localeId, resources);
        this.cdr = this.cdr || this.injector.get(ChangeDetectorRef, null);
        this.verifySer = this.injector.get(VerifyDetailService);
        this.localeId = this.injector.get(LOCALE_ID, null) || this.localeId;
        WfValidatorAdapter.localePipe = this.localePipe;
        forkJoin(this.uiState.getEnableAdminOrgAut(), this.uiState.getEnableFlowFormAut()).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            _this.uiState.enableAdminOrgAut = re[0];
            _this.uiState.enableFlowFormAut = re[1];
            if (!_this.uiState.enableAdminOrgAut) {
                _this.uiState.getAdministratorInfo();
            }
        }));
    }
    Object.defineProperty(WfProcessEditorComponent.prototype, "time", {
        get: /**
         * @return {?}
         */
        function () {
            return this._time;
        },
        set: /**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            this._time = t;
            this.uiState.time = t;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WfProcessEditorComponent.prototype, "scene", {
        get: /**
         * @return {?}
         */
        function () {
            return this.uiState.scene;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this.uiState.scene = v;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.procNameTitle = this.processInfo ? this.processInfo.processName : this.rtProcessInfo.procName;
        if (this.rtProcessInfo && this.rtProcessInfo.rtProcDefId) {
            this.uiState.procDefId = this.rtProcessInfo.rtProcDefId;
        }
        this.addEventBusListener();
        this.uiState.initUIState();
        this.showLoading();
        this.addPropertyChangedHandler();
        // 获取消息列表
        this.uiState.getMessageChannels();
        focus();
        document.body.addEventListener('keydown', (/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (!_this.showModelButton && n.shiftKey && 'Slash' === n.code) {
                _this.showModelButton = true;
                _this.notify.success(_this.localePipe.transform("processEditor.showButton"));
                _this.viewProcModel();
            }
        }));
        this.cdr && this.cdr.detectChanges();
        this.createEditorUi();
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.createEditorUi = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.service.getGeneralConfig().subscribe((/**
         * @param {?} generalConfig
         * @return {?}
         */
        function (generalConfig) {
            /** @type {?} */
            var processCategoryId = _this._time === ProcessTime.rt ? _this.rtProcessInfo.flowFormId : _this.processInfo.flowFormId;
            _this.viewModel.getProcessCategory(processCategoryId).subscribe((/**
             * @param {?} procCategory
             * @return {?}
             */
            function (procCategory) {
                /** @type {?} */
                var bizCategoryId = _this._time === ProcessTime.dt ? procCategory.businessObjectId : undefined;
                _this.service.getFormFormat(bizCategoryId).pipe(switchMap((/**
                 * @param {?} formFormats
                 * @return {?}
                 */
                function (formFormats) {
                    _this.cdr && _this.cdr.detectChanges();
                    _this.editorUi = new WfEditorUi(_this._time, _this.action, _this.editorUiContainerER.nativeElement, _this.injector, _this.modalService, _this.resolver);
                    _this.editorUi.multiLangEnabled = true;
                    _this.editorUi.langCode = _this.localeId;
                    _this.editorUi.bizCategoryId = bizCategoryId;
                    _this.editorUi.mode = _this.mode;
                    _this.editorUi.scene = _this.uiState.scene;
                    _this.editorUi.procType = _this.procType;
                    _this.editorUi.generalConfig = generalConfig;
                    _this.editorUi.formFormats = formFormats;
                    return of({});
                })))
                    // 2023-5-30 为了解决网络较差场景下的加载问题修改了加载顺序
                    .pipe(delay(200))
                    .subscribe((/**
                 * @return {?}
                 */
                function () {
                    _this.openProcContent();
                }));
            }));
        }));
    };
    /**
     * @param {?} editorUi
     * @return {?}
     */
    WfProcessEditorComponent.prototype.addEditorUiListeners = /**
     * @param {?} editorUi
     * @return {?}
     */
    function (editorUi) {
        var _this = this;
        editorUi.addListener(PmfEvents.ShowProperty, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            /** @type {?} */
            var cells = evt.getProperty("cells");
            _this.viewModel.setProperty(_this.editorUi.getFarrisPropConfig(cells));
        }));
        // 工具箱节点拖动至画布后更新
        editorUi.graph.addListener(PmfEvents.CellsInserted, (/**
         * @param {?} sender
         * @param {?} evt
         * @return {?}
         */
        function (sender, evt) {
            _this.uiState.getUserActList(_this.editorUi.getActivities());
            _this.uiState.getNotifyEventList(_this.editorUi.getNotifyEvents());
            _this.uiState.getEndEventList(_this.editorUi.getEndEvents());
        }));
        // 删除节点时触发更新
        editorUi.graph.addListener(mxEvent.CELLS_REMOVED, (/**
         * @return {?}
         */
        function () {
            _this.uiState.getUserActList(_this.editorUi.getActivities());
            _this.uiState.getNotifyEventList(_this.editorUi.getNotifyEvents());
            _this.uiState.getEndEventList(_this.editorUi.getEndEvents());
        }));
    };
    /**
     * 添加事件总线监听
     */
    /**
     * 添加事件总线监听
     * @private
     * @return {?}
     */
    WfProcessEditorComponent.prototype.addEventBusListener = /**
     * 添加事件总线监听
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.eventBus.on(EventBusKeys.batchCopyProperty, (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.editorUi.batchCopyProperty(data);
            }
        }));
        this.eventBus.on(EventBusKeys.batchSetProperty, (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.editorUi.batchSetProperty(data);
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    WfProcessEditorComponent.prototype.addPropertyChangedHandler = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.propertyPanel.propertyChanged.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.updateChangeProperty(data);
        }));
        this.propertyPanel.submitModal.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.updateChangeProperty(data.changeObject, data.parameters);
        }));
        return false; // 防止冒泡
    };
    /**
     * 更新属性
     */
    /**
     * 更新属性
     * @private
     * @param {?} data
     * @param {?=} parameters
     * @return {?}
     */
    WfProcessEditorComponent.prototype.updateChangeProperty = /**
     * 更新属性
     * @private
     * @param {?} data
     * @param {?=} parameters
     * @return {?}
     */
    function (data, parameters) {
        var _this = this;
        if (parameters === void 0) { parameters = null; }
        // 更新界面变更状态
        this.changedFlag = false;
        data.Id = this.uiState.propertyData.Id;
        if (parameters) {
            data.parameters = parameters;
        }
        switch (data.propertyID) {
            case ProcessPropertyKeys.EntryForm:
                this.bindEntryFormInfo(data);
                break;
            case UserActivityPropertyKeys.ApprovalItems:
                this.editorUi.updateProperty(data);
                this.activity.buildCounterSignVariables(data.propertyValue);
                break;
            case UserActivityPropertyKeys.CompleteStrategy:
                this.beforeCompleteStrategyChange(data).subscribe((/**
                 * @param {?} b
                 * @return {?}
                 */
                function (b) {
                    if (b) {
                        _this.editorUi.updateProperty(data);
                        _this.completeStrategyChanged(data.propertyValue);
                    }
                    _this.viewModel.setProperty(_this.editorUi.refreshProperty(data));
                }));
                break;
            // todo：多个活动具有同名属性时，如何更合理定义PropertyKey？
            // case UserActivityPropertyKeys.otherAssignNodes:
            // case StartActivityPropertyKeys.otherAssignNodes:
            //   if (data.propertyValue) {
            //     this.editorUi.updateProperty(data);
            //     this.OtherAssignNodesChanged(data);
            //   } else {
            //     this.editorUi.updateProperty(data);
            //   }
            //   break;
            case UserActivityPropertyKeys.SignRule:
                this.editorUi.updateProperty(data);
                break;
            // todo：多个活动具有同名属性时，如何更合理定义PropertyKey？
            case ProcessPropertyKeys.messageNotice: // 消息通知
            case UserActivityPropertyKeys.messageNotice: // 消息通知
            case MessageActivityPropertyKeys.messageNotice: // 消息通知
            case NotifyActivityPropertyKeys.messageNotice: // 消息通知
                if (data.propertyValue.isBatchCopy) { // 是否是消息通知属性批量复制
                    this.editorUi.batchCopyProperty(data);
                    break;
                }
                this.editorUi.updateProperty(data);
                break;
            case ProcessPropertyKeys.startMode:
                this.updateStartMode(data);
                break;
            default:
                this.editorUi.updateProperty(data);
                break;
        }
        this.uiState.getUserActList(this.editorUi.getActivities());
        this.uiState.getEndEventList(this.editorUi.getEndEvents());
        this.uiState.getNotifyEventList(this.editorUi.getNotifyEvents());
        this.uiState.getStartMode(this.editorUi.getStartMode());
        if (this.editorUi.getStartMode() == StartMode.SUB_PROCESS) {
            this.uiState.subActivityContext = this.uiState.subActivityContext.concat(this.uiState.subProcessElementContext);
        }
        else {
            this.uiState.subActivityContext = this.uiState.subActivityContext.filter((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return _this.uiState.subProcessElementContext.some((/**
             * @param {?} y
             * @return {?}
             */
            function (y) { return y.key != x.key; })); }));
        }
        this.viewModel.setProperty(this.editorUi.refreshProperty(data));
    };
    /**
     * 绑定流程分类的参数列表，流程构件，表单赋值
     * @param data
     */
    /**
     * 绑定流程分类的参数列表，流程构件，表单赋值
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.bindEntryFormInfo = /**
     * 绑定流程分类的参数列表，流程构件，表单赋值
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var flowformId = data.propertyValue.id;
        if (flowformId) {
            this.viewModel.getFlowFormInfoById(flowformId).subscribe((/**
             * @param {?} info
             * @return {?}
             */
            function (info) {
                data.flowForm = info.flowForm;
                data.formalParameters = info.formalParameters;
                data.processBizComponnets = info.bizComponents;
                data.executeForms = [];
                info.excuteForms.forEach((/**
                 * @param {?} form
                 * @return {?}
                 */
                function (form) {
                    if (form.isDefault) {
                        // 流程绑定默认单据
                        /** @type {?} */
                        var executeForms = _this.ConvertExecuteForm(form);
                        data.executeForms = data.executeForms.concat(executeForms);
                    }
                }));
                data.customizeActions = info.customizeActions.filter((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.isAll === true; })).map((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return ({
                    id: a.id, code: a.code, name: a.name, terminalType: a.terminal,
                    actualParameters: a.actualParameters.map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return ({
                        Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'
                    }); }))
                }); }));
                // 加载业务活动面板
                _this.editorUi.loadBizActivities(info.bizActivities || []);
                _this.service.getBizCmp().subscribe((/**
                 * @param {?} cmps
                 * @return {?}
                 */
                function (cmps) {
                    data.bizCmps = cmps;
                    _this.editorUi.updateProperty(data);
                    _this.uiState.getUserActList(_this.editorUi.getActivities());
                    _this.uiState.getEndEventList(_this.editorUi.getEndEvents());
                    _this.uiState.getNotifyEventList(_this.editorUi.getNotifyEvents());
                    _this.uiState.getStartMode(_this.editorUi.getStartMode());
                    if (_this.editorUi.getStartMode() == StartMode.SUB_PROCESS) {
                        _this.uiState.subActivityContext = _this.uiState.subActivityContext.concat(_this.uiState.subProcessElementContext);
                    }
                    else {
                        _this.uiState.subActivityContext = _this.uiState.subActivityContext.filter((/**
                         * @param {?} x
                         * @return {?}
                         */
                        function (x) { return _this.uiState.subProcessElementContext.some((/**
                         * @param {?} y
                         * @return {?}
                         */
                        function (y) { return y.key != x.key; })); }));
                    }
                    _this.viewModel.setProperty(_this.editorUi.refreshProperty(data));
                }));
            }));
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.updateStartMode = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var bpmnModel = this.editorUi.graph.bpmnModel;
        /** @type {?} */
        var extendElements = bpmnModel.DefaultProcess.GetExtensionElements();
        if (extendElements !== null && extendElements.length > 0) {
            /** @type {?} */
            var procHeader = (/** @type {?} */ (extendElements.filter((/**
             * @param {?} e
             * @return {?}
             */
            function (e) { return e instanceof ProcessHeader; }))));
            /** @type {?} */
            var flowFormKey = procHeader[0].BizDefKey;
            this.service.getAllBizCmp(flowFormKey).subscribe((/**
             * @param {?} allBizCmps
             * @return {?}
             */
            function (allBizCmps) {
                _this.service.getBizCmp().subscribe((/**
                 * @param {?} bizCmps
                 * @return {?}
                 */
                function (bizCmps) {
                    data.allBizCmps = allBizCmps;
                    data.bizCmps = bizCmps;
                    _this.editorUi.updateProperty(data);
                    _this.uiState.getUserActList(_this.editorUi.getActivities());
                    _this.uiState.getEndEventList(_this.editorUi.getEndEvents());
                    _this.uiState.getStartMode(_this.editorUi.getStartMode());
                    if (_this.editorUi.getStartMode() == StartMode.SUB_PROCESS) {
                        _this.uiState.subActivityContext = _this.uiState.subActivityContext.concat(_this.uiState.subProcessElementContext);
                    }
                    else {
                        _this.uiState.subActivityContext = _this.uiState.subActivityContext.filter((/**
                         * @param {?} x
                         * @return {?}
                         */
                        function (x) { return _this.uiState.subProcessElementContext.some((/**
                         * @param {?} y
                         * @return {?}
                         */
                        function (y) { return y.key != x.key; })); }));
                    }
                    _this.viewModel.setProperty(_this.editorUi.refreshProperty(data));
                }));
            }));
        }
    };
    /**
     * @private
     * @param {?} record
     * @return {?}
     */
    WfProcessEditorComponent.prototype.note = /**
     * @private
     * @param {?} record
     * @return {?}
     */
    function (record) {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(NoteComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        compRef.instance.record = record;
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform("processEditor.changeRecord"),
            width: 800,
            height: 520,
            showButtons: true,
            buttons: compRef.instance.footer
        };
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.cancel.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) { return dialog.close(); }));
        compRef.instance.submit.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            // 更新流程记录
            _this.editorUi.graph.bpmnModel.DefaultProcess.Documentation = data;
            dialog.close();
        }));
    };
    /**
     * @private
     * @return {?}
     */
    WfProcessEditorComponent.prototype.openProcContent = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.time === ProcessTime.dt) {
            if (this.processInfo) {
                if (this.processInfo.processKey === EventBusKeys.new && this.processInfo.flowFormId) {
                    this.openNewProcess(this.processInfo.flowFormId);
                }
                else {
                    // TODO：首先获取流程分类信息，确保流程分类和流程构件获取到（会稍微影响设计器打开速度）
                    this.viewModel.getFlowFormInfoById(this.processInfo.flowFormId).subscribe((/**
                     * @param {?} info
                     * @return {?}
                     */
                    function (info) {
                        _this.editorUi.loadBizActivities(info.bizActivities || []);
                        _this.getProcContent(_this.processInfo.processKey).subscribe((/**
                         * @param {?} re
                         * @return {?}
                         */
                        function (re) {
                            _this.uiState.content = _this.checkModelContent(JSON.stringify(re));
                            _this.openProcess(_this.uiState.content);
                        }));
                    }));
                }
            }
            else {
                throw new Error(this.localePipe.transform("processEditor.noDtInfo"));
            }
        }
        else if (this.time === ProcessTime.rt) {
            if (this.rtProcessInfo) {
                this.viewModel.getFlowFormInfoById(this.rtProcessInfo.flowFormId).subscribe((/**
                 * @param {?} info
                 * @return {?}
                 */
                function (info) {
                    _this.editorUi.loadBizActivities(info.bizActivities || []);
                    _this.getProcContent(_this.rtProcessInfo.rtProcDefId).subscribe((/**
                     * @param {?} re
                     * @return {?}
                     */
                    function (re) {
                        _this.uiState.content = _this.checkModelContent(JSON.stringify(re));
                        _this.openProcess(_this.uiState.content);
                    }));
                }));
            }
            else {
                throw new Error(this.localePipe.transform("processEditor.noRtInfo"));
            }
        }
    };
    /**
     * 新增流程，基于流程分类获取参数列表，构件和表单
     * @param ffId 流程分类ID
     */
    /**
     * 新增流程，基于流程分类获取参数列表，构件和表单
     * @param {?} ffId 流程分类ID
     * @return {?}
     */
    WfProcessEditorComponent.prototype.openNewProcess = /**
     * 新增流程，基于流程分类获取参数列表，构件和表单
     * @param {?} ffId 流程分类ID
     * @return {?}
     */
    function (ffId) {
        var _this = this;
        this.viewModel.getFlowFormInfoById(ffId).subscribe((/**
         * @param {?} info
         * @return {?}
         */
        function (info) {
            /** @type {?} */
            var processBizComponnets = info.bizComponents;
            /** @type {?} */
            var customizeActions = info.customizeActions.filter((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.isAll === true; })).map((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return ({
                id: a.id, code: a.code, name: a.name, terminalType: a.terminal,
                actualParameters: a.actualParameters.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return ({
                    Name: p.code, Value: p.value, ValueText: p.name, Tag: 'expression'
                }); }))
            }); }));
            /** @type {?} */
            var executeForms = [];
            info.excuteForms.forEach((/**
             * @param {?} form
             * @return {?}
             */
            function (form) {
                if (form.isDefault) {
                    // 流程绑定默认单据
                    /** @type {?} */
                    var forms = _this.ConvertExecuteForm(form);
                    executeForms = executeForms.concat(forms);
                }
            }));
            // 如果不存在表单定义，需要去表单格式列表取一下
            if (executeForms.length === 0
                || executeForms.findIndex((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.TerminalType === TerminalType.PC; })) === -1
                || executeForms.findIndex((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.TerminalType === TerminalType.MOBILE; })) === -1) {
                _this.viewModel.getFormFormatsByBizCategory().subscribe((/**
                 * @param {?} formFormats
                 * @return {?}
                 */
                function (formFormats) {
                    if (formFormats && formFormats.length > 0) {
                        if (executeForms.findIndex((/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) { return e.TerminalType === TerminalType.PC; })) === -1) {
                            /** @type {?} */
                            var formFormat = formFormats.filter((/**
                             * @param {?} f
                             * @return {?}
                             */
                            function (f) { return f.terminal === 'PC' && f.status === 0; }))[0];
                            if (formFormat) {
                                executeForms.push(_this.formFormat2ExecuteForm(formFormat));
                            }
                        }
                        if (executeForms.findIndex((/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) { return e.TerminalType === TerminalType.MOBILE; })) === -1) {
                            /** @type {?} */
                            var formFormat = formFormats.filter((/**
                             * @param {?} f
                             * @return {?}
                             */
                            function (f) { return f.terminal === 'Mobile' && f.status === 0; }))[0];
                            if (formFormat) {
                                executeForms.push(_this.formFormat2ExecuteForm(formFormat));
                            }
                        }
                    }
                    /** @type {?} */
                    var newProcInfo = {
                        name: _this.processInfo.processName,
                        bizObjId: _this.processInfo.bizObjId,
                        ffId: ffId,
                        ffName: _this.processInfo.flowFormName,
                        startMode: _this.processInfo.startMode,
                        formalParameters: info.formalParameters,
                        processBizComponnets: processBizComponnets,
                        executeForms: executeForms,
                        customizeActions: customizeActions,
                        processDescription: info.flowForm.processDescription,
                    };
                    _this.createBpmnModel(info.bizActivities || [], newProcInfo);
                }));
            }
            else {
                /** @type {?} */
                var newProcInfo = {
                    name: _this.processInfo.processName,
                    bizObjId: _this.processInfo.bizObjId,
                    ffId: ffId,
                    ffName: _this.processInfo.flowFormName,
                    startMode: _this.processInfo.startMode,
                    formalParameters: info.formalParameters,
                    processBizComponnets: processBizComponnets,
                    executeForms: executeForms,
                    customizeActions: customizeActions,
                    processDescription: info.flowForm.processDescription,
                };
                _this.createBpmnModel(info.bizActivities || [], newProcInfo);
            }
        }));
    };
    /**
     * @param {?} bizActivities
     * @param {?} newProcInfo
     * @return {?}
     */
    WfProcessEditorComponent.prototype.createBpmnModel = /**
     * @param {?} bizActivities
     * @param {?} newProcInfo
     * @return {?}
     */
    function (bizActivities, newProcInfo) {
        var _this = this;
        this.service.getBizCmp().subscribe((/**
         * @param {?} cmps
         * @return {?}
         */
        function (cmps) {
            // 2023-5-30 为了解决网络较差场景下的加载问题修改了加载顺序 先加载数据再showeditorUi
            _this.editorUi.show();
            _this.addEditorUiListeners(_this.editorUi);
            _this.editorUi.loadBizActivities(bizActivities || []);
            _this.editorUi.createBpmnModel(newProcInfo, cmps);
            _this.service.getProcExtendProperty(newProcInfo.BizDefKey, newProcInfo.startMode, _this.editorUi.bizCategoryId).subscribe((/**
             * @param {?} property
             * @return {?}
             */
            function (property) {
                /** @type {?} */
                var props = [];
                property.forEach((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) {
                    if ((p.bizCategoryId || p.bizDefKey) && ((p.bizCategoryId.indexOf(_this.editorUi.bizCategoryId) != -1 || p.bizCategoryId === '*') ||
                        (p.bizDefKey.indexOf(newProcInfo.BizDefKey) != -1 || p.bizDefKey === '*')) &&
                        (p.startMode.indexOf(newProcInfo.startMode) != -1 || p.startMode === '*')) {
                        props.push(p);
                    }
                }));
                _this.editorUi.procExtProps = props;
                if (_this.flag) {
                    _this.flag = false;
                    _this.closeLoading();
                }
                // 显示流程属性
                _this.viewModel.initProcessProperty(_this.editorUi.getFarrisPropConfig());
                // 获取启动方式
                _this.uiState.getStartMode(_this.editorUi.getStartMode());
                if (_this.editorUi.getStartMode() == StartMode.SUB_PROCESS) {
                    _this.uiState.subActivityContext = _this.uiState.subActivityContext.concat(_this.uiState.subProcessElementContext);
                }
                else {
                    _this.uiState.subActivityContext = _this.uiState.subActivityContext.filter((/**
                     * @param {?} x
                     * @return {?}
                     */
                    function (x) { return _this.uiState.subProcessElementContext.some((/**
                     * @param {?} y
                     * @return {?}
                     */
                    function (y) { return y.key != x.key; })); }));
                }
                _this.uiState.bpmnModel = _this.editorUi.graph.bpmnModel;
                _this.addGraphModelChangedListener();
            }));
        }));
    };
    /**
     * @param {?} content
     * @return {?}
     */
    WfProcessEditorComponent.prototype.openProcess = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        var _this = this;
        // 取ProcessHeader
        /** @type {?} */
        var model = new BpmnModel();
        model.LoadFromJson(content);
        /** @type {?} */
        var processHeader = ((/** @type {?} */ (model.DefaultProcess.GetExtensionElements().filter((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e instanceof ProcessHeader; }))[0])));
        this.service.getProcExtendProperty(processHeader.BizDefKey, processHeader.startMode, this.editorUi.bizCategoryId).subscribe((/**
         * @param {?} property
         * @return {?}
         */
        function (property) {
            /** @type {?} */
            var props = [];
            property.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if ((p.bizCategoryId || p.bizDefKey) && ((p.bizCategoryId.indexOf(_this.editorUi.bizCategoryId) != -1 || p.bizCategoryId === '*') ||
                    (p.bizDefKey.indexOf(processHeader.BizDefKey) != -1 || p.bizDefKey === '*')) &&
                    (p.startMode.indexOf(processHeader.startMode) != -1 || p.startMode === '*')) {
                    props.push(p);
                }
            }));
            _this.editorUi.procExtProps = props;
            // 2023-5-30 为了解决网络较差场景下的加载问题修改了加载顺序 先加载数据再showeditorUi
            _this.editorUi.show();
            _this.addEditorUiListeners(_this.editorUi);
            _this.editorUi.openBpmnModel(content);
            if (_this.flag) {
                _this.flag = false;
                _this.closeLoading();
            }
            // 显示流程属性
            _this.viewModel.initProcessProperty(_this.editorUi.getFarrisPropConfig());
            // 打开时获取所有活动节点信息
            _this.uiState.getUserActList(_this.editorUi.getActivities());
            // 打开时获取所有结束节点信息
            _this.uiState.getEndEventList(_this.editorUi.getEndEvents());
            // 打开时获取所有知会节点信息
            _this.uiState.getNotifyEventList(_this.editorUi.getNotifyEvents());
            // 打开时获取所有消息节点信息
            _this.uiState.getMessageEventList(_this.editorUi.getMessageEvents());
            // 打开时获取所有子流程和信号捕获节点信息
            _this.uiState.getSubAndCatchEventsList(_this.editorUi.getSubAndCatchEvents());
            _this.uiState.bpmnModel = _this.editorUi.graph.bpmnModel;
            // 获取启动方式
            _this.uiState.getStartMode(_this.editorUi.getStartMode());
            if (_this.editorUi.getStartMode() == StartMode.SUB_PROCESS) {
                _this.uiState.subActivityContext = _this.uiState.subActivityContext.concat(_this.uiState.subProcessElementContext);
            }
            else {
                _this.uiState.subActivityContext = _this.uiState.subActivityContext.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return _this.uiState.subProcessElementContext.some((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y.key != x.key; })); }));
            }
            _this.addGraphModelChangedListener();
        }));
    };
    /**
     * 添加graph model监听器，有变化则将changedFlag
     */
    /**
     * 添加graph model监听器，有变化则将changedFlag
     * @return {?}
     */
    WfProcessEditorComponent.prototype.addGraphModelChangedListener = /**
     * 添加graph model监听器，有变化则将changedFlag
     * @return {?}
     */
    function () {
        var _this = this;
        // 监听画布变化，更新界面变更状态
        /** @type {?} */
        var changedListener = (/**
         * @return {?}
         */
        function () {
            _this.changedFlag = false;
        });
        this.editorUi.graph.model.addListener(mxEvent.CHANGE, changedListener);
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.showTip = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (data.type === 'message') {
            switch (data.level) {
                case 'warning':
                    this.message.warning(data.message);
                    break;
                case 'error':
                    this.message.error(data.message);
                    break;
                case 'question':
                    this.message.question(data.message, (/**
                     * @return {?}
                     */
                    function () {
                        _this.questionOKHandle(data);
                    }));
                    break;
                default:
                    this.message.info(data.message);
                    break;
            }
        }
        else if (data.type === 'notify') {
            switch (data.level) {
                case 'warning':
                    this.notify.warning(data.message);
                    break;
                case 'error':
                    this.notify.error(data.message);
                    break;
                default:
                    this.notify.info(data.message);
                    break;
            }
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.showVerify = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.errorList = data;
        this.createValidationTips();
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.questionOKHandle = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        switch (data.action) {
        }
    };
    /**
     * 获取流程上下文
     * @param id 流程定义ID（设计时使用流程定义Key，运行时使用流程定义ID）
     */
    /**
     * 获取流程上下文
     * @param {?} id 流程定义ID（设计时使用流程定义Key，运行时使用流程定义ID）
     * @return {?}
     */
    WfProcessEditorComponent.prototype.getProcContent = /**
     * 获取流程上下文
     * @param {?} id 流程定义ID（设计时使用流程定义Key，运行时使用流程定义ID）
     * @return {?}
     */
    function (id) {
        if (id) {
            if (this.time === ProcessTime.dt) {
                return this.service.getProcContentbyKey(id);
            }
            else if (this.time === ProcessTime.rt) {
                return this.service.getRTProcContentbyId(id);
            }
            else {
                throw new Error(this.localePipe.transform("processEditor.wrongMoment"));
            }
        }
    };
    /**
     * @private
     * @param {?} content
     * @return {?}
     */
    WfProcessEditorComponent.prototype.save = /**
     * @private
     * @param {?} content
     * @return {?}
     */
    function (content) {
        var _this = this;
        this.uiState.content = content;
        this.showLoading();
        /** @type {?} */
        var process = JSON.parse(this.uiState.content);
        this.saveHttp().subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.closeLoading();
            // 2023-6-13 保存后同步流程名称到标题栏
            _this.procNameTitle = process.DefaultProcess.Name;
            _this.notify.success((/** @type {?} */ ({
                title: _this.localePipe.transform("processEditor.prompted"),
                msg: _this.localePipe.transform("processEditor.saveSuccess"),
                timeout: 3000
            })));
            if (_this.time === ProcessTime.dt) {
                _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, true, process.DefaultProcess.Key);
            }
            else if (_this.time === ProcessTime.rt) {
                _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, true, process.DefaultProcess.Key);
            }
            // 重置界面变更状态
            _this.changedFlag = false;
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.closeLoading();
            _this.notify.error((/** @type {?} */ ({
                title: _this.localePipe.transform("processEditor.prompted"),
                msg: error.error.Message,
                timeout: 3000
            })));
            if (_this.time === ProcessTime.dt) {
                _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveDT, false, process.DefaultProcess.Key);
            }
            else if (_this.time === ProcessTime.rt) {
                _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_SaveRT, false, process.DefaultProcess.Key);
            }
        }));
    };
    /**
     * @private
     * @param {?} content
     * @return {?}
     */
    WfProcessEditorComponent.prototype.release = /**
     * @private
     * @param {?} content
     * @return {?}
     */
    function (content) {
        var _this = this;
        this.uiState.content = content;
        this.showLoading();
        this.uiState.getReleaseConfig().subscribe((/**
         * @param {?} config
         * @return {?}
         */
        function (config) {
            if (config.currentValue === 'true') {
                // 展示发布前审批页面，同时保存，记审计
                _this.viewModel.saveProcess(_this.uiState.content, _this.processInfo, 1).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    _this.viewModel.getProcDefsByKey(JSON.parse(content).DefaultProcess.Key).subscribe((/**
                     * @param {?} ProcDefs
                     * @return {?}
                     */
                    function (ProcDefs) {
                        /** @type {?} */
                        var maxVersion = Math.max.apply(Math, ProcDefs.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            return item.version << 0;
                        })));
                        // 展示发布前审批页面，同时保存，记审计
                        _this.viewModel.releaseProcess(content, maxVersion === -Infinity ? 1 : maxVersion);
                        _this.closeLoading();
                    }));
                }));
                _this.notify.success((/** @type {?} */ ({
                    title: _this.localePipe.transform("processEditor.prompted"),
                    msg: _this.localePipe.transform("processEditor.waitReview"),
                    timeout: 3000
                })));
                /** @type {?} */
                var process = JSON.parse(_this.uiState.content);
                _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, true, process.DefaultProcess.Key);
            }
            else {
                _this.viewModel.deployProcess(_this.uiState.content).subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    _this.closeLoading();
                    _this.viewModel.saveProcess(_this.uiState.content, _this.processInfo, 0).subscribe((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { }));
                    _this.notify.success((/** @type {?} */ ({
                        title: _this.localePipe.transform("processEditor.prompted"),
                        msg: _this.localePipe.transform("processEditor.successPublish"),
                        timeout: 3000
                    })));
                    /** @type {?} */
                    var process = JSON.parse(_this.uiState.content);
                    _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, true, process.DefaultProcess.Key);
                }), (/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    _this.closeLoading();
                    _this.notify.error((/** @type {?} */ ({
                        title: _this.localePipe.transform("processEditor.prompted"),
                        msg: _this.localePipe.transform("processEditor.publishFail") + ("" + e.error.Message),
                        timeout: 3000
                    })));
                    /** @type {?} */
                    var process = JSON.parse(_this.uiState.content);
                    _this.viewModel.auditProcessDef(AuditEvent.WF_ProcessDef_Deploy, false, process.DefaultProcess.Key);
                }));
            }
        }));
    };
    /**
     * 保存流程定义（设计时+运行时）
     */
    /**
     * 保存流程定义（设计时+运行时）
     * @private
     * @return {?}
     */
    WfProcessEditorComponent.prototype.saveHttp = /**
     * 保存流程定义（设计时+运行时）
     * @private
     * @return {?}
     */
    function () {
        if (this.uiState.content) {
            if (this.time === ProcessTime.dt) {
                return this.viewModel.saveProcess(this.uiState.content, this.processInfo, 1);
            }
            else if (this.time === ProcessTime.rt) {
                return this.viewModel.saveRTProcess(this.uiState.content, this.rtProcessInfo.rtProcDefId);
            }
            else {
                throw new Error(this.localePipe.transform("processEditor.wrongMoment"));
            }
        }
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.showLoading = /**
     * @return {?}
     */
    function () {
        this.loadService.show({ container: 'body', message: '', type: 1 });
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.closeLoading = /**
     * @return {?}
     */
    function () {
        this.loadService.close();
    };
    /**
     * @private
     * @param {?} form
     * @return {?}
     */
    WfProcessEditorComponent.prototype.ConvertExecuteForm = /**
     * @private
     * @param {?} form
     * @return {?}
     */
    function (form) {
        /** @type {?} */
        var executeForms = new Array();
        if (form.terminal === 'web,app') {
            /** @type {?} */
            var webForm = new ExecuteFormModel();
            webForm.ComponentId = form.appId;
            webForm.formFormatId = form.formFormatId;
            webForm.FormType = form.formType;
            webForm.Name = form.name;
            webForm.TerminalType = TerminalType.PC;
            if (form.actualParameters && form.actualParameters.length > 0) {
                webForm.ActualParameters = form.actualParameters.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return ({
                    Name: p.code,
                    Value: p.value
                }); }));
            }
            executeForms.push(webForm);
            /** @type {?} */
            var appForm = new ExecuteFormModel();
            appForm.ComponentId = form.appId;
            appForm.formFormatId = form.formFormatId;
            appForm.FormType = form.formType;
            appForm.Name = form.name;
            appForm.TerminalType = TerminalType.MOBILE;
            if (form.actualParameters && form.actualParameters.length > 0) {
                appForm.ActualParameters = form.actualParameters.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return ({
                    Name: p.code,
                    Tag: p.valueType ? p.valueType : ProcessDeUtil.initVariableType(p.value),
                    Value: p.value
                }); }));
            }
            executeForms.push(appForm);
        }
        else {
            /** @type {?} */
            var executeForm = new ExecuteFormModel();
            executeForm.ComponentId = form.appId;
            executeForm.formFormatId = form.formFormatId;
            executeForm.FormType = form.formType;
            executeForm.Name = form.name;
            switch (form.terminal) {
                case 'web':
                    executeForm.TerminalType = TerminalType.PC;
                    break;
                case 'app':
                    executeForm.TerminalType = TerminalType.MOBILE;
                    break;
            }
            if (form.actualParameters && form.actualParameters.length > 0) {
                executeForm.ActualParameters = form.actualParameters.map((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return ({
                    Name: p.code,
                    Tag: p.valueType ? p.valueType : ProcessDeUtil.initVariableType(p.value),
                    Value: p.value
                }); }));
            }
            executeForms.push(executeForm);
        }
        return executeForms;
    };
    /**
     * @private
     * @param {?} formformat
     * @return {?}
     */
    WfProcessEditorComponent.prototype.formFormat2ExecuteForm = /**
     * @private
     * @param {?} formformat
     * @return {?}
     */
    function (formformat) {
        /** @type {?} */
        var form = new ExecuteFormModel();
        form.Id = ProcessDeUtil.GenerateElementId();
        form.ComponentId = null;
        form.formFormatId = formformat.id;
        form.FormType = '0';
        form.Name = formformat.name;
        switch (formformat.terminal) {
            case 'PC':
                form.TerminalType = TerminalType.PC;
                break;
            case 'Mobile':
                form.TerminalType = TerminalType.MOBILE;
                break;
        }
        if (formformat.urlParameters && formformat.urlParameters.length > 0) {
            form.ActualParameters = formformat.urlParameters.map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return ({
                Name: p.code,
                Tag: p.valueType ? p.valueType : ProcessDeUtil.initVariableType(p.value),
                Value: p.value
            }); }));
        }
        return form;
    };
    /**
     * @private
     * @param {?} strategy
     * @return {?}
     */
    WfProcessEditorComponent.prototype.completeStrategyChanged = /**
     * @private
     * @param {?} strategy
     * @return {?}
     */
    function (strategy) {
        var _this = this;
        if (strategy !== this.uiState.completeIterator[0].key) {
            // 参与者存在自动审批的情况下，不允许修改完成策略为会签规则
            // if (this.uiState.propertyData.ParticipantSchemes
            //   && this.uiState.propertyData.ParticipantSchemes.options
            //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers
            //   && this.uiState.propertyData.ParticipantSchemes.options.automaticPerformers.length > 0) {
            //   return;
            // } else {
            // 会签规则不存在，即由抢占模式，变为会签时
            if (!this.uiState.propertyData.SignRule) {
                // 会签是自动弹出会签规则编辑
                /** @type {?} */
                var compFactory = this.resolver.resolveComponentFactory(SignRuleComponent);
                /** @type {?} */
                var compRef = compFactory.create(this.injector);
                compRef.instance.value = [];
                // compRef.instance.counterSignVariables = this.uiState.counterSignVariables || [];
                // compRef.instance.approvalItems = this.uiState.approvalItems || [];
                /** @type {?} */
                var modalConfig = Object.assign(compRef.instance.modalConfig, { buttons: compRef.instance.modalFooter });
                /** @type {?} */
                var dialog_1 = this.modalService.show(compRef, modalConfig);
                compRef.instance.closeModal.subscribe((/**
                 * @param {?} $event
                 * @return {?}
                 */
                function ($event) { return dialog_1.close(); }));
                compRef.instance.submitModal.subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    _this.updateChangeProperty({
                        categoryId: 'performerProperty',
                        propertyID: UserActivityPropertyKeys.SignRule,
                        propertyValue: data.value
                    });
                    dialog_1.close();
                }));
            }
            // 会签规则下，驳回规则约束
            if (((/** @type {?} */ (this.uiState.propertyData.BackWardRule))).SelectTargetAble === true) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.message.warning(_this.localePipe.transform("processEditor.policyConflict"));
                }), 500);
            }
            // }
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.OtherAssignNodesChanged = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(AssignScopeComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        /** @type {?} */
        var location;
        if (data.Id.indexOf('startActivity') > -1) {
            location = 'startActivity';
        }
        else {
            location = 'userActivity';
        }
        if (location === 'startActivity') {
            compRef.instance.value = [];
            /** @type {?} */
            var activities = this.uiState.userActList.filter((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.Id !== _this.uiState.propertyData.Id
                && a.AssignmentStrategy === 'ASSIGN'
                && a.AssignPerformerConfig
                && a.AssignPerformerConfig.Operator === 'procInstCreator'; }));
            if (activities && activities.length > 0) {
                compRef.instance.value = activities.map((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.Id; }));
            }
            else {
                compRef.instance.value = new Array();
            }
        }
        else {
            compRef.instance.value = [];
        }
        compRef.instance.location = location;
        /** @type {?} */
        var modalConfig = Object.assign(compRef.instance.modalConfig, { buttons: compRef.instance.modalFooter });
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.closeModal.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) { return dialog.close(); }));
        compRef.instance.submitModal.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.updateChangeProperty({
                categoryId: location = 'startActivity' ? 'activityConfig' : 'approvalProperty',
                // todo：多个活动具有同名属性时，如何更合理定义PropertyKey？
                propertyID: UserActivityPropertyKeys.otherAssignActivities,
                propertyValue: data.value
            });
            dialog.close();
        }));
    };
    /**
     * 完成策略调整校验
     */
    /**
     * 完成策略调整校验
     * @private
     * @param {?} data
     * @return {?}
     */
    WfProcessEditorComponent.prototype.beforeCompleteStrategyChange = /**
     * 完成策略调整校验
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.time === ProcessTime.rt) {
            return this.viewModel.beforeCompleteStrategyChange(data, this.rtProcessInfo);
        }
        else {
            return of(true);
        }
    };
    /**
     * 保存，发布，另存，同步操作时
     * 校验模型的流程分类ID与列表存储是否一致，不一致时，以列表为准
     */
    /**
     * 保存，发布，另存，同步操作时
     * 校验模型的流程分类ID与列表存储是否一致，不一致时，以列表为准
     * @private
     * @param {?} content
     * @return {?}
     */
    WfProcessEditorComponent.prototype.checkModelContent = /**
     * 保存，发布，另存，同步操作时
     * 校验模型的流程分类ID与列表存储是否一致，不一致时，以列表为准
     * @private
     * @param {?} content
     * @return {?}
     */
    function (content) {
        /** @type {?} */
        var process = JSON.parse(content);
        /** @type {?} */
        var modelBizDefKey = process.DefaultProcess.extensionElements.find((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e.ClrTypeID === 'wf.ProcessHeader'; })).BizDefKey;
        if (this.time === ProcessTime.dt) {
            if (modelBizDefKey === this.processInfo.flowFormId) {
                return content;
            }
            else {
                process.DefaultProcess.extensionElements.find((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.ClrTypeID === 'wf.ProcessHeader'; })).BizDefKey = this.processInfo.flowFormId;
                process.DefaultProcess.extensionElements.find((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.ClrTypeID === 'wf.ProcessHeader'; })).BizDefName = this.uiState.flowFormInfo.flowForm.name;
                return JSON.stringify(process);
            }
        }
        else if (this.time === ProcessTime.rt) {
            if (modelBizDefKey === this.rtProcessInfo.flowFormId) {
                return content;
            }
            else {
                process.DefaultProcess.extensionElements.find((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.ClrTypeID === 'wf.ProcessHeader'; })).BizDefKey = this.rtProcessInfo.flowFormId;
                process.DefaultProcess.extensionElements.find((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.ClrTypeID === 'wf.ProcessHeader'; })).BizDefName = this.uiState.flowFormInfo.flowForm.name;
                return JSON.stringify(process);
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    WfProcessEditorComponent.prototype.showModeChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _a = event || {}, _b = _a.mode, mode = _b === void 0 ? ShowMode.panel : _b, _c = _a.wideWidth, wideWidth = _c === void 0 ? 330 : _c, _d = _a.smallWidth, smallWidth = _d === void 0 ? 41 : _d;
        if (mode === ShowMode.panel) {
            this.panelWidth = wideWidth;
            this.rightPanelWidth = wideWidth;
        }
        else if (mode === ShowMode.sidebar) {
            this.panelWidth = smallWidth;
            this.rightPanelWidth = smallWidth;
        }
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.saveProc = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var model = this.editorUi.graph.bpmnModel;
        /** @type {?} */
        var res = WfValidatorAdapter.validator(model, this.scene);
        if (res.valid == false) {
            this.showTip(res);
            return;
        }
        if (res.warningList && res.warningList.length > 0) {
            this.showVerify(res.warningList);
        }
        else {
            this.clearValidationTips();
        }
        this.save(model.ConvertToJson());
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.saveAs = /**
     * @return {?}
     */
    function () {
        if (!(this.uiState.enableAdminOrgAut || ((this.uiState.isAdministratorConfig &&
            this.uiState.administrator !== null) || (!this.uiState.isAdministratorConfig)))) {
            this.message.info(this.localePipe.transform("processEditor.noPermissionToSave"));
            return;
        }
        /** @type {?} */
        var model = this.editorUi.graph.bpmnModel;
        /** @type {?} */
        var res = WfValidatorAdapter.validator(model, this.scene);
        if (res.valid == false) {
            this.showTip(res);
            return;
        }
        if (res.warningList && res.warningList.length > 0) {
            this.showVerify(res.warningList);
        }
        else {
            this.clearValidationTips();
        }
        /** @type {?} */
        var process = new BpmnModel();
        process.LoadFromJson(model.ConvertToJson());
        process.DefaultProcess.Key = ProcessDeUtil.GenerateElementId();
        process.DefaultProcess.Id = ProcessDeUtil.GenerateElementId();
        process.DefaultDiagram.BpmnPlane.BpmnElementId = process.DefaultProcess.Id;
        this.viewModel.saveAsProcess(process, this.processInfo);
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.releaseProc = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var model = this.editorUi.graph.bpmnModel;
        /** @type {?} */
        var res = WfValidatorAdapter.validator(model, this.scene);
        if (res.valid == false) {
            this.showTip(res);
            return;
        }
        if (res.warningList && res.warningList.length > 0) {
            this.showVerify(res.warningList);
        }
        else {
            this.clearValidationTips();
        }
        this.release(model.ConvertToJson());
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.sync = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var model = this.editorUi.graph.bpmnModel;
        /** @type {?} */
        var res = WfValidatorAdapter.validator(model, this.scene);
        if (res.valid == false) {
            this.showTip(res);
            return;
        }
        if (res.warningList && res.warningList.length > 0) {
            this.showVerify(res.warningList);
        }
        else {
            this.clearValidationTips();
        }
        this.viewModel.syncDtProcess(model.ConvertToJson(), this.rtProcessInfo);
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.procRecord = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var record = this.editorUi.graph.bpmnModel.DefaultProcess.Documentation;
        this.note(record);
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.batchSet = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var compFactory = this.resolver.resolveComponentFactory(BatchSetPropertiesComponent);
        /** @type {?} */
        var compRef = compFactory.create(this.injector);
        /** @type {?} */
        var modalConfig = {
            title: '批量设置',
            width: 512,
            height: 565,
            showButtons: true,
            buttons: compRef.instance.footer
        };
        /** @type {?} */
        var dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.cancel.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) { return dialog.close(); }));
        compRef.instance.submit.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            dialog.close();
        }));
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.closeProc = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 如果界面发生变化，增加确认框提示，无变化则直接关闭
        if (this.changedFlag) {
            this.message.confirm(this.localePipe.transform("processEditor.closeProc1"), this.localePipe.transform("processEditor.closeProc2")).subscribe((/**
             * @param {?} f
             * @return {?}
             */
            function (f) {
                if (f) {
                    _this.close.emit();
                }
            }));
        }
        else {
            this.close.emit();
        }
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.viewProcModel = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var modalConfig = {
            title: this.localePipe.transform("processEditor.viewModel"),
            width: 800,
            height: 520,
            showButtons: false
        };
        // 模型自动复制到剪贴板
        this.notify.success(this.localePipe.transform("processEditor.copied"));
        this.copy(this.editorUi.graph.bpmnModel.ConvertToJson());
        this.modalService.show(this.editorUi.graph.bpmnModel.ConvertToJson(), modalConfig);
    };
    /**
     * 左右拖动后事件，event.size.width是左侧面板的宽度
     */
    /**
     * 左右拖动后事件，event.size.width是左侧面板的宽度
     * @param {?} event
     * @return {?}
     */
    WfProcessEditorComponent.prototype.rzStop = /**
     * 左右拖动后事件，event.size.width是左侧面板的宽度
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.panelWidth = event.size.width;
        this.editorUi && this.editorUi.graph.refresh();
    };
    // 展示表单验证组件，用于构件校验
    // 展示表单验证组件，用于构件校验
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.createValidationTips = 
    // 展示表单验证组件，用于构件校验
    /**
     * @return {?}
     */
    function () {
        this.verifySer.clear();
        this.verifyContainer = this.verifySer.createVerify({
            parent: this.contentEl,
            verifyList: this.errorList,
            verifyType: this.tabTypeList,
            showList: true,
            showType: 'processWarning',
            verifyResultTipsTmpl: this.tipsTmpl // 提示模板
        });
        this.listclick = this.verifyContainer.validatorClick.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            console.log(e);
        }));
        this.showchange = this.verifyContainer.listshowChange.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            console.log(e);
        }));
    };
    /**
     * @return {?}
     */
    WfProcessEditorComponent.prototype.clearValidationTips = /**
     * @return {?}
     */
    function () {
        this.errorList = [];
        if (this.verifySer) {
            this.verifySer.clear();
        }
    };
    /**
     * @param {?} text
     * @return {?}
     */
    WfProcessEditorComponent.prototype.copy = /**
     * @param {?} text
     * @return {?}
     */
    function (text) {
        /** @type {?} */
        var el = document.createElement('input');
        el.setAttribute('value', text);
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
    };
    WfProcessEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-process-editor',
                    template: "<div class=\"f-page\">\r\n  <div class=\"f-page-header mt-1\">\r\n    <nav class=\"f-page-header-base py-0\">\r\n      <div class=\"f-title\">\r\n        <span class=\"f-title-icon f-text-orna-manage\">\r\n          <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n        </span>\r\n        <h4 class=\"f-title-text\">{{procNameTitle}}</h4>\r\n      </div>\r\n      <div class=\"btn-toolbar btn-group-lg\">\r\n        <ng-container *ngIf=\"action==='edit'&&time==='dt'\">\r\n          <button class=\"btn btn-primary btn-lg mr-2\" (click)=\"saveProc()\">{{ 'processEditor.button.saveProc' | wfLocale }}</button>\r\n          <button class=\"btn btn-secondary mr-2\" (click)=\"releaseProc()\">{{ 'processEditor.button.releaseProc' | wfLocale }}</button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"action==='edit'&&time==='rt'\">\r\n          <button class=\"btn btn-primary btn-lg mr-2\" (click)=\"saveProc()\">{{ 'processEditor.button.saveProc' | wfLocale }}</button>\r\n          <button class=\"btn btn-secondary mr-2\" (click)=\"sync()\">{{ 'processEditor.button.sync' | wfLocale }}</button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"time==='dt'&&action!='assignView'\">\r\n          <button class=\"btn btn-secondary btn-lg mr-2\" (click)=\"saveAs()\">{{ 'processEditor.button.saveAs' | wfLocale }}</button>\r\n        </ng-container>\r\n        <button class=\"btn btn-secondary mr-2\" (click)=\"procRecord()\">{{ 'processEditor.button.procRecord' | wfLocale }}</button>\r\n        <ng-container *ngIf=\"showModelButton\">\r\n          <button class=\"btn btn-secondary mr-2\" (click)=\"viewProcModel()\">{{ 'processEditor.button.viewProcModel' | wfLocale }}</button>\r\n          </ng-container>\r\n        <button class=\"btn btn-secondary mr-2\" (click)=\"closeProc()\">{{ 'processEditor.button.closeProc' | wfLocale }}</button>\r\n      </div>\r\n    </nav>\r\n  </div>\r\n  <div class=\"f-page-main\">\r\n    <div class=\"f-utils-flex-column h-100\">\r\n      <div class=\"flex-auto d-flex flex-fill flex-row\" style=\"position:relative; overflow: hidden\">\r\n        <farris-splitter style=\"display: flex; flex-grow: 1\">\r\n          <farris-splitter-pane style=\"display: flex; flex-grow: 1\" id=\"gspWfDesignerPane\">\r\n            <div class=\"flex-grow-1 h-100\">\r\n              <div style=\"position: relative; height: 100%; width: 100%;\">\r\n                <div id=\"editorUiContainer\" class=\"editorUiContainer geEditor\" #editorUiContainer>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </farris-splitter-pane>\r\n          <farris-splitter-pane class=\"f-page-content-main f-component-splitter-pane\" style=\"margin: 0 0 0 10px\"\r\n            ngResizable [rzHandles]=\"'w'\" [ngStyle]=\"{ width: rightPanelWidth + 'px' }\" (rzStop)=\"rzStop($event)\"\r\n            [relatedIframeParent]=\"'#gspWfDesignerPane'\">\r\n            <div class=\"h-100 d-flex flex-column\">\r\n              <div class=\"f-utils-fill-flex-column\">\r\n                <app-property-panel #propertyPanel [(propertyConfig)]=\"uiState.propertyConfig\"\r\n                  [(propertyData)]=\"uiState.propertyData\" [enableChangeMode]=\"true\" [showCloseBtn]=\"false\"\r\n                  isWhiteTheme=\"true\" (showModeChange)=\"showModeChange($event)\" style=\"height:100%;width:100%;\">\r\n                </app-property-panel>\r\n              </div>\r\n            </div>\r\n          </farris-splitter-pane>\r\n        </farris-splitter>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #tipsTmpl let-datas>\r\n  <span class=\"f-icon f-icon-question\" style=\"font-size:14px;\"></span>{{datas[0]['list'].length}}\r\n</ng-template>\r\n",
                    providers: [
                        { provide: WF_LANG_RESOURCES, useValue: ɵ0 },
                        WfLocalePipe,
                    ],
                    styles: ["\n    .bpmn-designer {\n      height: 100%;\n      min-height: 400px;\n      width: 100%;\n    }"]
                }] }
    ];
    /** @nocollapse */
    WfProcessEditorComponent.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: ProcessDesignerViewModel },
        { type: ProcessDesignerDataService },
        { type: LoadingService },
        { type: NotifyService },
        { type: MessagerService },
        { type: WFFlowElementsViewModel },
        { type: Injector },
        { type: BsModalService },
        { type: ComponentFactoryResolver },
        { type: EventBusService },
        { type: ChangeDetectorRef, decorators: [{ type: Optional }] },
        { type: String, decorators: [{ type: Inject, args: [LOCALE_ID,] }] },
        { type: undefined, decorators: [{ type: Inject, args: [WF_LANG_RESOURCES,] }] },
        { type: WfLocalePipe, decorators: [{ type: Optional }] }
    ]; };
    WfProcessEditorComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        time: [{ type: Input }],
        processInfo: [{ type: Input }],
        rtProcessInfo: [{ type: Input }],
        action: [{ type: Input }],
        mode: [{ type: Input }],
        scene: [{ type: Input }],
        procType: [{ type: Input }],
        close: [{ type: Output }],
        propertyPanel: [{ type: ViewChild, args: ['propertyPanel',] }],
        tipsTmpl: [{ type: ViewChild, args: ['tipsTmpl',] }],
        iframe: [{ type: ViewChild, args: ['iframe',] }],
        contentEl: [{ type: ViewChild, args: ['content',] }],
        editorUiContainerER: [{ type: ViewChild, args: ["editorUiContainer",] }],
        editorUiContainerVCR: [{ type: ViewChild, args: ["editorUiContainer", { read: ViewContainerRef },] }]
    };
    return WfProcessEditorComponent;
}());
export { WfProcessEditorComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.flag;
    /** @type {?} */
    WfProcessEditorComponent.prototype.cls;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype._time;
    /** @type {?} */
    WfProcessEditorComponent.prototype.processInfo;
    /** @type {?} */
    WfProcessEditorComponent.prototype.rtProcessInfo;
    /** @type {?} */
    WfProcessEditorComponent.prototype.action;
    /** @type {?} */
    WfProcessEditorComponent.prototype.mode;
    /** @type {?} */
    WfProcessEditorComponent.prototype.procType;
    /** @type {?} */
    WfProcessEditorComponent.prototype.close;
    /** @type {?} */
    WfProcessEditorComponent.prototype.propertyPanel;
    /** @type {?} */
    WfProcessEditorComponent.prototype.tipsTmpl;
    /** @type {?} */
    WfProcessEditorComponent.prototype.iframe;
    /** @type {?} */
    WfProcessEditorComponent.prototype.errorList;
    /** @type {?} */
    WfProcessEditorComponent.prototype.tabTypeList;
    /** @type {?} */
    WfProcessEditorComponent.prototype.contentEl;
    /** @type {?} */
    WfProcessEditorComponent.prototype.verifyContainer;
    /** @type {?} */
    WfProcessEditorComponent.prototype.listclick;
    /** @type {?} */
    WfProcessEditorComponent.prototype.showchange;
    /** @type {?} */
    WfProcessEditorComponent.prototype.panelWidth;
    /** @type {?} */
    WfProcessEditorComponent.prototype.propertyPanelResizable;
    /** @type {?} */
    WfProcessEditorComponent.prototype.rightPanelWidth;
    /** @type {?} */
    WfProcessEditorComponent.prototype.clientWidth;
    /** @type {?} */
    WfProcessEditorComponent.prototype.widthAfterResized;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.verifySer;
    /** @type {?} */
    WfProcessEditorComponent.prototype.procNameTitle;
    /** @type {?} */
    WfProcessEditorComponent.prototype.editorUiContainerER;
    /** @type {?} */
    WfProcessEditorComponent.prototype.editorUiContainerVCR;
    /** @type {?} */
    WfProcessEditorComponent.prototype.editorUi;
    /**
     * 界面是否发生变化标志，修改属性、移动节点等均会将此值设为true
     * @type {?}
     */
    WfProcessEditorComponent.prototype.changedFlag;
    /** @type {?} */
    WfProcessEditorComponent.prototype.showModelButton;
    /** @type {?} */
    WfProcessEditorComponent.prototype.uiState;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.viewModel;
    /** @type {?} */
    WfProcessEditorComponent.prototype.service;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.loadService;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.activity;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.eventBus;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.resources;
    /**
     * @type {?}
     * @private
     */
    WfProcessEditorComponent.prototype.localePipe;
}
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YtcHJvY2Vzcy1lZGl0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi93Zi1wcm9jZXNzLWVkaXRvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0TyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbkQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFeEUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFFNUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBRXBHLE9BQU8sRUFBZ0IsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFaEUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDbkYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxhQUFhLEVBQWlCLE1BQU0sbUJBQW1CLENBQUM7QUFDakUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRTFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM5RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFB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Q0YsNkNBQWdDOztJQUNoQyxtREFBZ0I7O0lBQ2hCLDZDQUFVOztJQUNWLDhDQUFXOztJQUNYLDhDQUFpQjs7SUFDakIsMERBQThCOztJQUM5QixtREFBc0I7O0lBQ3RCLCtDQUFvQjs7SUFDcEIscURBQTBCOzs7OztJQUMxQiw2Q0FBdUM7O0lBQ3ZDLGlEQUFzQjs7SUFDdEIsdURBQ2dEOztJQUNoRCx3REFDaUQ7O0lBQ2pELDRDQUFxQjs7Ozs7SUFNckIsK0NBQW9COztJQWdDcEIsbURBQXdCOztJQTdCdEIsMkNBQXNDOzs7OztJQUN0Qyw2Q0FBMkM7O0lBQzNDLDJDQUEwQzs7Ozs7SUFDMUMsK0NBQW1DOzs7OztJQUNuQywwQ0FBNkI7Ozs7O0lBQzdCLDJDQUFnQzs7Ozs7SUFDaEMsNENBQXlDOzs7OztJQUN6Qyw0Q0FBMEI7Ozs7O0lBQzFCLGdEQUFvQzs7Ozs7SUFDcEMsNENBQTBDOzs7OztJQUMxQyw0Q0FBaUM7Ozs7O0lBQ2pDLHVDQUEwQzs7Ozs7SUFDMUMsNENBQTJDOzs7OztJQUMzQyw2Q0FBaUQ7Ozs7O0lBQ2pELDhDQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmLCBWaWV3Q29udGFpbmVyUmVmLCBDaGFuZ2VEZXRlY3RvclJlZiwgT3B0aW9uYWwsIExPQ0FMRV9JRCwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFByb2Nlc3NUaW1lIH0gZnJvbSAnLi9tb2RlbC9wcm9jZXNzLXRpbWUnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRGVzaWduZXJVSVN0YXRlIH0gZnJvbSAnLi9hcHAvcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgRmxvd0Zvcm1JbmZvIH0gZnJvbSAnLi9kb21haW4vZW50aXRpZXMvZmxvd2Zvcm0taW5mbyc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lclZpZXdNb2RlbCB9IGZyb20gJy4vYXBwL3Byb2Nlc3MtZGVzaWduZXIudmlld21vZGVsJztcclxuaW1wb3J0IHsgQml6Q29tcG9uZW50RW50aXR5IH0gZnJvbSAnLi9kb21haW4vZW50aXRpZXMvYml6LWNvbXBvbmVudC5lbnRpdHknO1xyXG5pbXBvcnQgeyBFeGVjdXRlRm9ybU1vZGVsLCBUZXJtaW5hbFR5cGUgfSBmcm9tICcuL3ZpZXdzL2V4ZWN1dGUtZm9ybXMvZW50aXRpZXMvZXhlY3V0ZS1mb3JtLmVudGl0eSc7XHJcbmltcG9ydCB7IEV4Y3V0ZUZvcm1FbnRpdHkgfSBmcm9tICcuL2RvbWFpbi9lbnRpdGllcy9leGN1dGUtZm9ybS5lbnRpdHknO1xyXG5pbXBvcnQgeyBNb2RhbE9wdGlvbnMsIEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IEJhY2tXYXJkUnVsZSB9IGZyb20gJy4vdmlld3MvYmFja3dhcmQtcnVsZS9iYWNrd2FyZC1ydWxlLmVudGl0eSc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZXNpZ25lckRhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kb21haW4vcHJvY2Vzcy1kZXNpZ25lci5kYXRhc2VydmljZSc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSwgTm90aWZ5T3B0aW9ucyB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IFdGRmxvd0VsZW1lbnRzVmlld01vZGVsIH0gZnJvbSAnLi9hcHAvd2YtZmxvd0VsZW1lbnRzLnZpZXdNb2RlbCc7XHJcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVBhbmVsQ29tcG9uZW50LCBTaG93TW9kZSB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgU2lnblJ1bGVDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdzL3NpZ24tcnVsZS9zaWduLXJ1bGUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgUHJvY2Vzc0luZm8gfSBmcm9tICcuL21vZGVsL3Byb2Nlc3MtaW5mbyc7XHJcbmltcG9ydCB7IFJUUHJvY2Vzc0luZm8gfSBmcm9tICcuL21vZGVsL3J0LXByb2Nlc3MtaW5mbyc7XHJcbmltcG9ydCB7IGZvcmtKb2luLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBBdWRpdEV2ZW50IH0gZnJvbSAnLi9kb21haW4vZW50aXRpZXMvYXVkaXQtcHJvY2Vzc0RlZi1pbmZvJztcclxuaW1wb3J0IHsgTm90ZUNvbXBvbmVudCB9IGZyb20gJy4vdmlld3Mvbm90ZS9ub3RlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFByb2Nlc3NEZVV0aWwgfSBmcm9tICcuL2RvbWFpbi9wcm9jZXNzLWRlLXV0aWwnO1xyXG5pbXBvcnQgeyBGbG93Rm9ybUVudGl0eSB9IGZyb20gJy4vZG9tYWluL2VudGl0aWVzL2Zsb3dmb3JtLmVudGl0eSc7XHJcbmltcG9ydCB7IEV2ZW50QnVzU2VydmljZSB9IGZyb20gJy4vdmlld3Mvc2hhcmVkL2V2ZW50LWJ1cy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVmVyaWZ5RGV0YWlsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktdmVyaWZ5LWRldGFpbCc7XHJcbmltcG9ydCB7IEFzc2lnblNjb3BlQ29tcG9uZW50IH0gZnJvbSAnLi92aWV3cy9hc3NpZ24tc2NvcGUvYXNzaWduLXNjb3BlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFdmRWRpdG9yVWkgfSBmcm9tICcuL2Rlc2lnbmVyL1dmRWRpdG9yVWknO1xyXG5pbXBvcnQgeyBQbWZFdmVudHMsIENlbGwgfSBmcm9tIFwiQGVkcC1wbWYvZ3JhcGhlZGl0b3JcIjtcclxuaW1wb3J0IHsgQnBtbk1vZGVsIH0gZnJvbSBcIkBlZHAtcG1mL2JwbW4tbW9kZWxcIjtcclxuaW1wb3J0IHsgTXhHcmFwaE5TLCBteEV2ZW50IH0gZnJvbSBcIkBlZHAtcG1mL214Z3JhcGgtdHNcIjtcclxuaW1wb3J0IHsgV2ZWYWxpZGF0b3JBZGFwdGVyIH0gZnJvbSBcIi4vZGVzaWduZXIvV2ZWYWxpZGF0b3JBZGFwdGVyXCI7XHJcbmltcG9ydCB7IFByb2Nlc3NIZWFkZXIsIFN0YXJ0TW9kZSB9IGZyb20gXCJAZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWxcIjtcclxuaW1wb3J0IHsgRXZlbnRCdXNLZXlzIH0gZnJvbSAnLi9tb2RlbC9ldmVudC1idXMta2V5cyc7XHJcbmltcG9ydCB7IFByb2Nlc3NQcm9wZXJ0eUtleXMgfSBmcm9tICcuL2Rlc2lnbmVyL3dmLWNlbGwvcHJvcGVydHkta2V5cy9Qcm9jZXNzUHJvcGVydHlLZXlzJztcclxuaW1wb3J0IHsgVXNlckFjdGl2aXR5UHJvcGVydHlLZXlzIH0gZnJvbSAnLi9kZXNpZ25lci93Zi1jZWxsL3Byb3BlcnR5LWtleXMvVXNlckFjdGl2aXR5UHJvcGVydHlLZXlzJztcclxuaW1wb3J0IHsgTWVzc2FnZUFjdGl2aXR5UHJvcGVydHlLZXlzIH0gZnJvbSAnLi9kZXNpZ25lci93Zi1jZWxsL3Byb3BlcnR5LWtleXMvTWVzc2FnZUFjdGl2aXR5UHJvcGVydHlLZXlzJztcclxuaW1wb3J0IHsgU3RhcnRBY3Rpdml0eVByb3BlcnR5S2V5cyB9IGZyb20gJy4vZGVzaWduZXIvd2YtY2VsbC9wcm9wZXJ0eS1rZXlzL1N0YXJ0QWN0aXZpdHlQcm9wZXJ0eUtleXMnO1xyXG5pbXBvcnQgeyBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cyB9IGZyb20gJy4vZGVzaWduZXIvd2YtY2VsbC9wcm9wZXJ0eS1rZXlzL05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzJztcclxuaW1wb3J0IHsgZGVsYXksIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgV0ZfTEFOR19SRVNPVVJDRVMsIFdmTG9jYWxlUGlwZSB9IGZyb20gJy4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgV0ZfUFJPQ0VTU19FRElUT1JfTEFOR19SRVNPVVJDRVMgfSBmcm9tICcuL2kxOG4vYXNzZXRzL2xhbmcucmVzb3VyY2UnO1xyXG5pbXBvcnQgeyBCYXRjaFNldFByb3BlcnRpZXNDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdzL2JhdGNoLXNldC1wcm9wZXJ0aWVzL2JhdGNoLXNldC1wcm9wZXJ0aWVzLmNvbXBvbmVudCc7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnd2YtcHJvY2Vzcy1lZGl0b3InLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi93Zi1wcm9jZXNzLWVkaXRvci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVzOiBbYFxyXG4gICAgLmJwbW4tZGVzaWduZXIge1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIG1pbi1oZWlnaHQ6IDQwMHB4O1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgIH1gXHJcbiAgXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHsgcHJvdmlkZTogV0ZfTEFOR19SRVNPVVJDRVMsIHVzZVZhbHVlOiBXRl9QUk9DRVNTX0VESVRPUl9MQU5HX1JFU09VUkNFUyB9LFxyXG4gICAgV2ZMb2NhbGVQaXBlLFxyXG4gIF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBXZlByb2Nlc3NFZGl0b3JDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIHByaXZhdGUgZmxhZyA9IHRydWU7XHJcblxyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuXHJcbiAgcHJpdmF0ZSBfdGltZTogUHJvY2Vzc1RpbWU7XHJcbiAgQElucHV0KClcclxuICBzZXQgdGltZSh0OiBQcm9jZXNzVGltZSkge1xyXG4gICAgdGhpcy5fdGltZSA9IHQ7XHJcbiAgICB0aGlzLnVpU3RhdGUudGltZSA9IHQ7XHJcbiAgfVxyXG4gIGdldCB0aW1lKCk6IFByb2Nlc3NUaW1lIHtcclxuICAgIHJldHVybiB0aGlzLl90aW1lO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBwcm9jZXNzSW5mbzogUHJvY2Vzc0luZm87XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcnRQcm9jZXNzSW5mbzogUlRQcm9jZXNzSW5mbztcclxuXHJcbiAgQElucHV0KClcclxuICBhY3Rpb246ICd2aWV3JyB8ICdlZGl0JyB8ICdhc3NpZ25WaWV3JyA9ICdlZGl0JztcclxuXHJcbiAgQElucHV0KClcclxuICBtb2RlOiAnZ2VuZXJhbCcgfCAnc2ltcGxpZnknID0gJ2dlbmVyYWwnO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzY2VuZSh2OiBzdHJpbmcpIHtcclxuICAgIHRoaXMudWlTdGF0ZS5zY2VuZSA9IHY7XHJcbiAgfVxyXG4gIGdldCBzY2VuZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnVpU3RhdGUuc2NlbmU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHByb2NUeXBlOiBcIndmXCIgfCBcIndob2xlXCIgPSBcIndmXCI7XHJcblxyXG4gIEBPdXRwdXQoKSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdwcm9wZXJ0eVBhbmVsJylcclxuICBwcm9wZXJ0eVBhbmVsOiBQcm9wZXJ0eVBhbmVsQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ3RpcHNUbXBsJylcclxuICB0aXBzVG1wbDogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdpZnJhbWUnKVxyXG4gIGlmcmFtZTogRWxlbWVudFJlZjtcclxuICBlcnJvckxpc3QgPSBbXTtcclxuICB0YWJUeXBlTGlzdCA9IFtcclxuICAgIHtcclxuICAgICAgaWQ6ICdwcm9jZXNzV2FybmluZycsXHJcbiAgICAgIHR5cGU6ICdwcm9jZXNzV2FybmluZycsXHJcbiAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUuaW5zdGFudChcInByb2Nlc3NFZGl0b3IudGlwXCIpLFxyXG4gICAgICBpY29uQ2xzOiAnZi1pY29uLWRlZmF1bHQnLFxyXG4gICAgICBpY29uU3R5bGU6ICdjb2xvcjojZjQ5NzMwOydcclxuICAgIH1cclxuICBdO1xyXG4gIEBWaWV3Q2hpbGQoJ2NvbnRlbnQnKSBjb250ZW50RWw7XHJcbiAgdmVyaWZ5Q29udGFpbmVyO1xyXG4gIGxpc3RjbGljaztcclxuICBzaG93Y2hhbmdlO1xyXG4gIHBhbmVsV2lkdGggPSAzMzA7XHJcbiAgcHJvcGVydHlQYW5lbFJlc2l6YWJsZSA9IHRydWU7XHJcbiAgcmlnaHRQYW5lbFdpZHRoID0gMzMwOyAvLyDlj7PkvqfpnaLmnb/lrr3luqZcclxuICBjbGllbnRXaWR0aDogbnVtYmVyOyAvLyDnlYzpnaLmgLvlrr3luqZcclxuICB3aWR0aEFmdGVyUmVzaXplZDogbnVtYmVyOyAvLyDnlKjmiLfosIPmlbTlkI7nmoTlrr3luqbvvIjmr5TkvovvvIzlpoIwLjPvvIlcclxuICBwcml2YXRlIHZlcmlmeVNlcjogVmVyaWZ5RGV0YWlsU2VydmljZTtcclxuICBwcm9jTmFtZVRpdGxlOiBzdHJpbmc7XHJcbiAgQFZpZXdDaGlsZChcImVkaXRvclVpQ29udGFpbmVyXCIpXHJcbiAgZWRpdG9yVWlDb250YWluZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcbiAgQFZpZXdDaGlsZChcImVkaXRvclVpQ29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gIGVkaXRvclVpQ29udGFpbmVyVkNSOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcclxuICBlZGl0b3JVaTogV2ZFZGl0b3JVaTtcclxuICAvLyBsb2NhbGVJZDogc3RyaW5nID0gXCJ6aC1DSFNcIjtcclxuXHJcbiAgLyoqXHJcbiAgICog55WM6Z2i5piv5ZCm5Y+R55Sf5Y+Y5YyW5qCH5b+X77yM5L+u5pS55bGe5oCn44CB56e75Yqo6IqC54K5562J5Z2H5Lya5bCG5q2k5YC86K6+5Li6dHJ1ZVxyXG4gICAqL1xyXG4gIGNoYW5nZWRGbGFnID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHVpU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIHZpZXdNb2RlbDogUHJvY2Vzc0Rlc2lnbmVyVmlld01vZGVsLFxyXG4gICAgcHVibGljIHNlcnZpY2U6IFByb2Nlc3NEZXNpZ25lckRhdGFTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBsb2FkU2VydmljZTogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBhY3Rpdml0eTogV0ZGbG93RWxlbWVudHNWaWV3TW9kZWwsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzU2VydmljZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEBJbmplY3QoTE9DQUxFX0lEKSBwcml2YXRlIGxvY2FsZUlkOiBzdHJpbmcsXHJcbiAgICBASW5qZWN0KFdGX0xBTkdfUkVTT1VSQ0VTKSBwcml2YXRlIHJlc291cmNlczogYW55LFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBsb2NhbGVQaXBlOiBXZkxvY2FsZVBpcGUsXHJcbiAgKSB7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSB0aGlzLmxvY2FsZVBpcGUgfHwgbmV3IFdmTG9jYWxlUGlwZShsb2NhbGVJZCwgcmVzb3VyY2VzKTtcclxuICAgIHRoaXMuY2RyID0gdGhpcy5jZHIgfHwgdGhpcy5pbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYsIG51bGwpO1xyXG4gICAgdGhpcy52ZXJpZnlTZXIgPSB0aGlzLmluamVjdG9yLmdldChWZXJpZnlEZXRhaWxTZXJ2aWNlKTtcclxuICAgIHRoaXMubG9jYWxlSWQgPSB0aGlzLmluamVjdG9yLmdldChMT0NBTEVfSUQsIG51bGwpIHx8IHRoaXMubG9jYWxlSWQ7XHJcbiAgICBXZlZhbGlkYXRvckFkYXB0ZXIubG9jYWxlUGlwZSA9IHRoaXMubG9jYWxlUGlwZTtcclxuICAgIGZvcmtKb2luKHRoaXMudWlTdGF0ZS5nZXRFbmFibGVBZG1pbk9yZ0F1dCgpLCB0aGlzLnVpU3RhdGUuZ2V0RW5hYmxlRmxvd0Zvcm1BdXQoKSkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgdGhpcy51aVN0YXRlLmVuYWJsZUFkbWluT3JnQXV0ID0gcmVbMF07XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5lbmFibGVGbG93Rm9ybUF1dCA9IHJlWzFdO1xyXG4gICAgICBpZiAoIXRoaXMudWlTdGF0ZS5lbmFibGVBZG1pbk9yZ0F1dCkge1xyXG4gICAgICAgIHRoaXMudWlTdGF0ZS5nZXRBZG1pbmlzdHJhdG9ySW5mbygpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2hvd01vZGVsQnV0dG9uID0gZmFsc2U7XHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLnByb2NOYW1lVGl0bGUgPSB0aGlzLnByb2Nlc3NJbmZvP3RoaXMucHJvY2Vzc0luZm8ucHJvY2Vzc05hbWU6dGhpcy5ydFByb2Nlc3NJbmZvLnByb2NOYW1lO1xyXG4gICAgaWYodGhpcy5ydFByb2Nlc3NJbmZvICYmIHRoaXMucnRQcm9jZXNzSW5mby5ydFByb2NEZWZJZCkge1xyXG4gICAgICB0aGlzLnVpU3RhdGUucHJvY0RlZklkID0gdGhpcy5ydFByb2Nlc3NJbmZvLnJ0UHJvY0RlZklkO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hZGRFdmVudEJ1c0xpc3RlbmVyKCk7XHJcbiAgICB0aGlzLnVpU3RhdGUuaW5pdFVJU3RhdGUoKTtcclxuICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgIHRoaXMuYWRkUHJvcGVydHlDaGFuZ2VkSGFuZGxlcigpO1xyXG4gICAgLy8g6I635Y+W5raI5oGv5YiX6KGoXHJcbiAgICB0aGlzLnVpU3RhdGUuZ2V0TWVzc2FnZUNoYW5uZWxzKCk7XHJcbiAgICBmb2N1cygpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKG4pID0+IHtcclxuICAgICAgaWYgKCF0aGlzLnNob3dNb2RlbEJ1dHRvbiAmJiBuLnNoaWZ0S2V5ICYmICdTbGFzaCcgPT09IG4uY29kZSkge1xyXG4gICAgICAgIHRoaXMuc2hvd01vZGVsQnV0dG9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLnNob3dCdXR0b25cIikpO1xyXG4gICAgICAgIHRoaXMudmlld1Byb2NNb2RlbCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuY2RyICYmIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIHRoaXMuY3JlYXRlRWRpdG9yVWkoKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUVkaXRvclVpKCkge1xyXG4gICAgdGhpcy5zZXJ2aWNlLmdldEdlbmVyYWxDb25maWcoKS5zdWJzY3JpYmUoXHJcbiAgICAgIChnZW5lcmFsQ29uZmlnKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc0NhdGVnb3J5SWQ6IHN0cmluZyA9IHRoaXMuX3RpbWUgPT09IFByb2Nlc3NUaW1lLnJ0ID8gdGhpcy5ydFByb2Nlc3NJbmZvLmZsb3dGb3JtSWQgOiB0aGlzLnByb2Nlc3NJbmZvLmZsb3dGb3JtSWQ7XHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuZ2V0UHJvY2Vzc0NhdGVnb3J5KHByb2Nlc3NDYXRlZ29yeUlkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAocHJvY0NhdGVnb3J5OiBGbG93Rm9ybUVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiaXpDYXRlZ29yeUlkID0gdGhpcy5fdGltZSA9PT0gUHJvY2Vzc1RpbWUuZHQgPyBwcm9jQ2F0ZWdvcnkuYnVzaW5lc3NPYmplY3RJZCA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEZvcm1Gb3JtYXQoYml6Q2F0ZWdvcnlJZCkucGlwZShcclxuICAgICAgICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgICAgICAoZm9ybUZvcm1hdHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5jZHIgJiYgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpID0gbmV3IFdmRWRpdG9yVWkodGhpcy5fdGltZSwgdGhpcy5hY3Rpb24sIHRoaXMuZWRpdG9yVWlDb250YWluZXJFUi5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmluamVjdG9yLCB0aGlzLm1vZGFsU2VydmljZSwgdGhpcy5yZXNvbHZlcik7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkubXVsdGlMYW5nRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkubGFuZ0NvZGUgPSB0aGlzLmxvY2FsZUlkO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLmJpekNhdGVnb3J5SWQgPSBiaXpDYXRlZ29yeUlkO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLm1vZGUgPSB0aGlzLm1vZGU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkuc2NlbmUgPSB0aGlzLnVpU3RhdGUuc2NlbmU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkucHJvY1R5cGUgPSB0aGlzLnByb2NUeXBlO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLmdlbmVyYWxDb25maWcgPSBnZW5lcmFsQ29uZmlnO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvclVpLmZvcm1Gb3JtYXRzID0gZm9ybUZvcm1hdHM7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvZih7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgLy8gMjAyMy01LTMwIOS4uuS6huino+WGs+e9kee7nOi+g+W3ruWcuuaZr+S4i+eahOWKoOi9vemXrumimOS/ruaUueS6huWKoOi9vemhuuW6j1xyXG4gICAgICAgICAgICAgIC5waXBlKGRlbGF5KDIwMCkpXHJcbiAgICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qcm9jQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhZGRFZGl0b3JVaUxpc3RlbmVycyhlZGl0b3JVaTogV2ZFZGl0b3JVaSkge1xyXG4gICAgZWRpdG9yVWkuYWRkTGlzdGVuZXIoUG1mRXZlbnRzLlNob3dQcm9wZXJ0eSwgKHNlbmRlciwgZXZ0OiBNeEdyYXBoTlMubXhFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjZWxsczogQ2VsbFtdID0gZXZ0LmdldFByb3BlcnR5KFwiY2VsbHNcIik7XHJcbiAgICAgIHRoaXMudmlld01vZGVsLnNldFByb3BlcnR5KHRoaXMuZWRpdG9yVWkuZ2V0RmFycmlzUHJvcENvbmZpZyhjZWxscykpO1xyXG4gICAgfSk7XHJcbiAgICAvLyDlt6XlhbfnrrHoioLngrnmi5bliqjoh7PnlLvluIPlkI7mm7TmlrBcclxuICAgIGVkaXRvclVpLmdyYXBoLmFkZExpc3RlbmVyKFBtZkV2ZW50cy5DZWxsc0luc2VydGVkLCAoc2VuZGVyLCBldnQ6IE14R3JhcGhOUy5teEV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXRVc2VyQWN0TGlzdCh0aGlzLmVkaXRvclVpLmdldEFjdGl2aXRpZXMoKSk7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXROb3RpZnlFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXROb3RpZnlFdmVudHMoKSk7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXRFbmRFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXRFbmRFdmVudHMoKSk7XHJcbiAgICB9KTtcclxuICAgIC8vIOWIoOmZpOiKgueCueaXtuinpuWPkeabtOaWsFxyXG4gICAgZWRpdG9yVWkuZ3JhcGguYWRkTGlzdGVuZXIobXhFdmVudC5DRUxMU19SRU1PVkVELCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXRVc2VyQWN0TGlzdCh0aGlzLmVkaXRvclVpLmdldEFjdGl2aXRpZXMoKSk7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXROb3RpZnlFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXROb3RpZnlFdmVudHMoKSk7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5nZXRFbmRFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXRFbmRFdmVudHMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa3u+WKoOS6i+S7tuaAu+e6v+ebkeWQrFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRkRXZlbnRCdXNMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRCdXNLZXlzLmJhdGNoQ29weVByb3BlcnR5LCBkYXRhID0+IHtcclxuICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmVkaXRvclVpLmJhdGNoQ29weVByb3BlcnR5KGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRCdXNLZXlzLmJhdGNoU2V0UHJvcGVydHksIGRhdGEgPT4ge1xyXG4gICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkuYmF0Y2hTZXRQcm9wZXJ0eShkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFByb3BlcnR5Q2hhbmdlZEhhbmRsZXIoKTogYm9vbGVhbiB7XHJcbiAgICB0aGlzLnByb3BlcnR5UGFuZWwucHJvcGVydHlDaGFuZ2VkLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMudXBkYXRlQ2hhbmdlUHJvcGVydHkoZGF0YSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucHJvcGVydHlQYW5lbC5zdWJtaXRNb2RhbC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZUNoYW5nZVByb3BlcnR5KGRhdGEuY2hhbmdlT2JqZWN0LCBkYXRhLnBhcmFtZXRlcnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAvLyDpmLLmraLlhpLms6FcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOabtOaWsOWxnuaAp1xyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlQ2hhbmdlUHJvcGVydHkoZGF0YSwgcGFyYW1ldGVycyA9IG51bGwpOiBhbnkge1xyXG4gICAgLy8g5pu05paw55WM6Z2i5Y+Y5pu054q25oCBXHJcbiAgICB0aGlzLmNoYW5nZWRGbGFnID0gZmFsc2U7XHJcblxyXG4gICAgZGF0YS5JZCA9IHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuSWQ7XHJcbiAgICBpZiAocGFyYW1ldGVycykge1xyXG4gICAgICBkYXRhLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChkYXRhLnByb3BlcnR5SUQpIHtcclxuICAgICAgY2FzZSBQcm9jZXNzUHJvcGVydHlLZXlzLkVudHJ5Rm9ybTpcclxuICAgICAgICB0aGlzLmJpbmRFbnRyeUZvcm1JbmZvKGRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFVzZXJBY3Rpdml0eVByb3BlcnR5S2V5cy5BcHByb3ZhbEl0ZW1zOlxyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkudXBkYXRlUHJvcGVydHkoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5hY3Rpdml0eS5idWlsZENvdW50ZXJTaWduVmFyaWFibGVzKGRhdGEucHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVXNlckFjdGl2aXR5UHJvcGVydHlLZXlzLkNvbXBsZXRlU3RyYXRlZ3k6XHJcbiAgICAgICAgdGhpcy5iZWZvcmVDb21wbGV0ZVN0cmF0ZWd5Q2hhbmdlKGRhdGEpLnN1YnNjcmliZShiID0+IHtcclxuICAgICAgICAgIGlmIChiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yVWkudXBkYXRlUHJvcGVydHkoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVTdHJhdGVneUNoYW5nZWQoZGF0YS5wcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudmlld01vZGVsLnNldFByb3BlcnR5KHRoaXMuZWRpdG9yVWkucmVmcmVzaFByb3BlcnR5KGRhdGEpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8gdG9kb++8muWkmuS4qua0u+WKqOWFt+acieWQjOWQjeWxnuaAp+aXtu+8jOWmguS9leabtOWQiOeQhuWumuS5iVByb3BlcnR5S2V577yfXHJcbiAgICAgIC8vIGNhc2UgVXNlckFjdGl2aXR5UHJvcGVydHlLZXlzLm90aGVyQXNzaWduTm9kZXM6XHJcbiAgICAgIC8vIGNhc2UgU3RhcnRBY3Rpdml0eVByb3BlcnR5S2V5cy5vdGhlckFzc2lnbk5vZGVzOlxyXG4gICAgICAvLyAgIGlmIChkYXRhLnByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgLy8gICAgIHRoaXMuZWRpdG9yVWkudXBkYXRlUHJvcGVydHkoZGF0YSk7XHJcbiAgICAgIC8vICAgICB0aGlzLk90aGVyQXNzaWduTm9kZXNDaGFuZ2VkKGRhdGEpO1xyXG4gICAgICAvLyAgIH0gZWxzZSB7XHJcbiAgICAgIC8vICAgICB0aGlzLmVkaXRvclVpLnVwZGF0ZVByb3BlcnR5KGRhdGEpO1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gICBicmVhaztcclxuICAgICAgY2FzZSBVc2VyQWN0aXZpdHlQcm9wZXJ0eUtleXMuU2lnblJ1bGU6XHJcbiAgICAgICAgdGhpcy5lZGl0b3JVaS51cGRhdGVQcm9wZXJ0eShkYXRhKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgLy8gdG9kb++8muWkmuS4qua0u+WKqOWFt+acieWQjOWQjeWxnuaAp+aXtu+8jOWmguS9leabtOWQiOeQhuWumuS5iVByb3BlcnR5S2V577yfXHJcbiAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5tZXNzYWdlTm90aWNlOiAvLyDmtojmga/pgJrnn6VcclxuICAgICAgY2FzZSBVc2VyQWN0aXZpdHlQcm9wZXJ0eUtleXMubWVzc2FnZU5vdGljZTogLy8g5raI5oGv6YCa55+lXHJcbiAgICAgIGNhc2UgTWVzc2FnZUFjdGl2aXR5UHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2U6IC8vIOa2iOaBr+mAmuefpVxyXG4gICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2U6IC8vIOa2iOaBr+mAmuefpVxyXG4gICAgICAgIGlmIChkYXRhLnByb3BlcnR5VmFsdWUuaXNCYXRjaENvcHkpIHsgLy8g5piv5ZCm5piv5raI5oGv6YCa55+l5bGe5oCn5om56YeP5aSN5Yi2XHJcbiAgICAgICAgICB0aGlzLmVkaXRvclVpLmJhdGNoQ29weVByb3BlcnR5KGRhdGEpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkudXBkYXRlUHJvcGVydHkoZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5zdGFydE1vZGU6XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGFydE1vZGUoZGF0YSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5lZGl0b3JVaS51cGRhdGVQcm9wZXJ0eShkYXRhKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHRoaXMudWlTdGF0ZS5nZXRVc2VyQWN0TGlzdCh0aGlzLmVkaXRvclVpLmdldEFjdGl2aXRpZXMoKSk7XHJcbiAgICB0aGlzLnVpU3RhdGUuZ2V0RW5kRXZlbnRMaXN0KHRoaXMuZWRpdG9yVWkuZ2V0RW5kRXZlbnRzKCkpO1xyXG4gICAgdGhpcy51aVN0YXRlLmdldE5vdGlmeUV2ZW50TGlzdCh0aGlzLmVkaXRvclVpLmdldE5vdGlmeUV2ZW50cygpKTtcclxuICAgIHRoaXMudWlTdGF0ZS5nZXRTdGFydE1vZGUodGhpcy5lZGl0b3JVaS5nZXRTdGFydE1vZGUoKSk7XHJcbiAgICBpZih0aGlzLmVkaXRvclVpLmdldFN0YXJ0TW9kZSgpID09IFN0YXJ0TW9kZS5TVUJfUFJPQ0VTUykge1xyXG4gICAgICB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0ID0gdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5jb25jYXQodGhpcy51aVN0YXRlLnN1YlByb2Nlc3NFbGVtZW50Q29udGV4dCk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQgPSB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0LmZpbHRlcih4ID0+IHRoaXMudWlTdGF0ZS5zdWJQcm9jZXNzRWxlbWVudENvbnRleHQuc29tZSh5ID0+IHkua2V5ICE9IHgua2V5KSlcclxuICAgIH1cclxuICAgIHRoaXMudmlld01vZGVsLnNldFByb3BlcnR5KHRoaXMuZWRpdG9yVWkucmVmcmVzaFByb3BlcnR5KGRhdGEpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe7keWumua1geeoi+WIhuexu+eahOWPguaVsOWIl+ihqO+8jOa1geeoi+aehOS7tu+8jOihqOWNlei1i+WAvFxyXG4gICAqIEBwYXJhbSBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiaW5kRW50cnlGb3JtSW5mbyhkYXRhKSB7XHJcbiAgICBjb25zdCBmbG93Zm9ybUlkOiBzdHJpbmcgPSBkYXRhLnByb3BlcnR5VmFsdWUuaWQ7XHJcbiAgICBpZiAoZmxvd2Zvcm1JZCkge1xyXG4gICAgICB0aGlzLnZpZXdNb2RlbC5nZXRGbG93Rm9ybUluZm9CeUlkKGZsb3dmb3JtSWQpLnN1YnNjcmliZSgoaW5mbzogRmxvd0Zvcm1JbmZvKSA9PiB7XHJcbiAgICAgICAgZGF0YS5mbG93Rm9ybSA9IGluZm8uZmxvd0Zvcm07XHJcbiAgICAgICAgZGF0YS5mb3JtYWxQYXJhbWV0ZXJzID0gaW5mby5mb3JtYWxQYXJhbWV0ZXJzO1xyXG4gICAgICAgIGRhdGEucHJvY2Vzc0JpekNvbXBvbm5ldHMgPSBpbmZvLmJpekNvbXBvbmVudHM7XHJcbiAgICAgICAgZGF0YS5leGVjdXRlRm9ybXMgPSBbXTtcclxuICAgICAgICBpbmZvLmV4Y3V0ZUZvcm1zLmZvckVhY2goZm9ybSA9PiB7XHJcbiAgICAgICAgICBpZiAoZm9ybS5pc0RlZmF1bHQpIHtcclxuICAgICAgICAgICAgLy8g5rWB56iL57uR5a6a6buY6K6k5Y2V5o2uXHJcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVGb3JtcyA9IHRoaXMuQ29udmVydEV4ZWN1dGVGb3JtKGZvcm0pO1xyXG4gICAgICAgICAgICBkYXRhLmV4ZWN1dGVGb3JtcyA9IGRhdGEuZXhlY3V0ZUZvcm1zLmNvbmNhdChleGVjdXRlRm9ybXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGEuY3VzdG9taXplQWN0aW9ucyA9IGluZm8uY3VzdG9taXplQWN0aW9ucy5maWx0ZXIoYSA9PiBhLmlzQWxsID09PSB0cnVlKS5tYXAoYSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IGEuaWQsIGNvZGU6IGEuY29kZSwgbmFtZTogYS5uYW1lLCB0ZXJtaW5hbFR5cGU6IGEudGVybWluYWwsXHJcbiAgICAgICAgICBhY3R1YWxQYXJhbWV0ZXJzOiBhLmFjdHVhbFBhcmFtZXRlcnMubWFwKHAgPT4gKHtcclxuICAgICAgICAgICAgTmFtZTogcC5jb2RlLCBWYWx1ZTogcC52YWx1ZSwgVmFsdWVUZXh0OiBwLm5hbWUsIFRhZzogJ2V4cHJlc3Npb24nXHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8g5Yqg6L295Lia5Yqh5rS75Yqo6Z2i5p2/XHJcbiAgICAgICAgdGhpcy5lZGl0b3JVaS5sb2FkQml6QWN0aXZpdGllcyhpbmZvLmJpekFjdGl2aXRpZXMgfHwgW10pO1xyXG4gICAgICAgIHRoaXMuc2VydmljZS5nZXRCaXpDbXAoKS5zdWJzY3JpYmUoKGNtcHMpID0+IHtcclxuICAgICAgICAgIGRhdGEuYml6Q21wcyA9IGNtcHM7XHJcbiAgICAgICAgICB0aGlzLmVkaXRvclVpLnVwZGF0ZVByb3BlcnR5KGRhdGEpO1xyXG5cclxuICAgICAgICAgIHRoaXMudWlTdGF0ZS5nZXRVc2VyQWN0TGlzdCh0aGlzLmVkaXRvclVpLmdldEFjdGl2aXRpZXMoKSk7XHJcbiAgICAgICAgICB0aGlzLnVpU3RhdGUuZ2V0RW5kRXZlbnRMaXN0KHRoaXMuZWRpdG9yVWkuZ2V0RW5kRXZlbnRzKCkpO1xyXG4gICAgICAgICAgdGhpcy51aVN0YXRlLmdldE5vdGlmeUV2ZW50TGlzdCh0aGlzLmVkaXRvclVpLmdldE5vdGlmeUV2ZW50cygpKTtcclxuICAgICAgICAgIHRoaXMudWlTdGF0ZS5nZXRTdGFydE1vZGUodGhpcy5lZGl0b3JVaS5nZXRTdGFydE1vZGUoKSk7XHJcbiAgICAgICAgICBpZih0aGlzLmVkaXRvclVpLmdldFN0YXJ0TW9kZSgpID09IFN0YXJ0TW9kZS5TVUJfUFJPQ0VTUykge1xyXG4gICAgICAgICAgICB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0ID0gdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5jb25jYXQodGhpcy51aVN0YXRlLnN1YlByb2Nlc3NFbGVtZW50Q29udGV4dCk7XHJcbiAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQgPSB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0LmZpbHRlcih4ID0+IHRoaXMudWlTdGF0ZS5zdWJQcm9jZXNzRWxlbWVudENvbnRleHQuc29tZSh5ID0+IHkua2V5ICE9IHgua2V5KSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudmlld01vZGVsLnNldFByb3BlcnR5KHRoaXMuZWRpdG9yVWkucmVmcmVzaFByb3BlcnR5KGRhdGEpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTdGFydE1vZGUoZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBicG1uTW9kZWwgPSB0aGlzLmVkaXRvclVpLmdyYXBoLmJwbW5Nb2RlbDtcclxuICAgIGNvbnN0IGV4dGVuZEVsZW1lbnRzID0gYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLkdldEV4dGVuc2lvbkVsZW1lbnRzKCk7XHJcbiAgICBpZiAoZXh0ZW5kRWxlbWVudHMgIT09IG51bGwgJiYgZXh0ZW5kRWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBwcm9jSGVhZGVyID0gZXh0ZW5kRWxlbWVudHMuZmlsdGVyKGUgPT4gZSBpbnN0YW5jZW9mIFByb2Nlc3NIZWFkZXIpIGFzIFByb2Nlc3NIZWFkZXJbXTtcclxuICAgICAgbGV0IGZsb3dGb3JtS2V5ID0gcHJvY0hlYWRlclswXS5CaXpEZWZLZXk7XHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRBbGxCaXpDbXAoZmxvd0Zvcm1LZXkpLnN1YnNjcmliZSgoYWxsQml6Q21wcykgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VydmljZS5nZXRCaXpDbXAoKS5zdWJzY3JpYmUoKGJpekNtcHMpID0+IHtcclxuICAgICAgICAgIGRhdGEuYWxsQml6Q21wcyA9IGFsbEJpekNtcHM7XHJcbiAgICAgICAgICBkYXRhLmJpekNtcHMgPSBiaXpDbXBzO1xyXG5cclxuICAgICAgICAgIHRoaXMuZWRpdG9yVWkudXBkYXRlUHJvcGVydHkoZGF0YSk7XHJcblxyXG4gICAgICAgICAgdGhpcy51aVN0YXRlLmdldFVzZXJBY3RMaXN0KHRoaXMuZWRpdG9yVWkuZ2V0QWN0aXZpdGllcygpKTtcclxuICAgICAgICAgIHRoaXMudWlTdGF0ZS5nZXRFbmRFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXRFbmRFdmVudHMoKSk7XHJcbiAgICAgICAgICB0aGlzLnVpU3RhdGUuZ2V0U3RhcnRNb2RlKHRoaXMuZWRpdG9yVWkuZ2V0U3RhcnRNb2RlKCkpO1xyXG4gICAgICAgICAgaWYodGhpcy5lZGl0b3JVaS5nZXRTdGFydE1vZGUoKSA9PSBTdGFydE1vZGUuU1VCX1BST0NFU1MpIHtcclxuICAgICAgICAgICAgdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCA9IHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQuY29uY2F0KHRoaXMudWlTdGF0ZS5zdWJQcm9jZXNzRWxlbWVudENvbnRleHQpO1xyXG4gICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0ID0gdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5maWx0ZXIoeCA9PiB0aGlzLnVpU3RhdGUuc3ViUHJvY2Vzc0VsZW1lbnRDb250ZXh0LnNvbWUoeSA9PiB5LmtleSAhPSB4LmtleSkpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLmVkaXRvclVpLnJlZnJlc2hQcm9wZXJ0eShkYXRhKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3RlKHJlY29yZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoTm90ZUNvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG5cclxuICAgIGNvbXBSZWYuaW5zdGFuY2UucmVjb3JkID0gcmVjb3JkO1xyXG5cclxuICAgIGNvbnN0IG1vZGFsQ29uZmlnOiBNb2RhbE9wdGlvbnMgPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5jaGFuZ2VSZWNvcmRcIiksXHJcbiAgICAgIHdpZHRoOiA4MDAsXHJcbiAgICAgIGhlaWdodDogNTIwLFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZSxcclxuICAgICAgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5mb290ZXJcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY2FuY2VsLnN1YnNjcmliZSgkZXZlbnQgPT4gZGlhbG9nLmNsb3NlKCkpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zdWJtaXQuc3Vic2NyaWJlKChkYXRhOiBzdHJpbmcpID0+IHtcclxuICAgICAgLy8g5pu05paw5rWB56iL6K6w5b2VXHJcbiAgICAgIHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLkRvY3VtZW50YXRpb24gPSBkYXRhO1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvcGVuUHJvY0NvbnRlbnQoKSB7XHJcbiAgICBpZiAodGhpcy50aW1lID09PSBQcm9jZXNzVGltZS5kdCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9jZXNzSW5mbykge1xyXG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NJbmZvLnByb2Nlc3NLZXkgPT09IEV2ZW50QnVzS2V5cy5uZXcgJiYgdGhpcy5wcm9jZXNzSW5mby5mbG93Rm9ybUlkKSB7XHJcbiAgICAgICAgICB0aGlzLm9wZW5OZXdQcm9jZXNzKHRoaXMucHJvY2Vzc0luZm8uZmxvd0Zvcm1JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFRPRE/vvJrpppblhYjojrflj5bmtYHnqIvliIbnsbvkv6Hmga/vvIznoa7kv53mtYHnqIvliIbnsbvlkozmtYHnqIvmnoTku7bojrflj5bliLDvvIjkvJrnqI3lvq7lvbHlk43orr7orqHlmajmiZPlvIDpgJ/luqbvvIlcclxuICAgICAgICAgIHRoaXMudmlld01vZGVsLmdldEZsb3dGb3JtSW5mb0J5SWQodGhpcy5wcm9jZXNzSW5mby5mbG93Rm9ybUlkKS5zdWJzY3JpYmUoKGluZm86IEZsb3dGb3JtSW5mbykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRvclVpLmxvYWRCaXpBY3Rpdml0aWVzKGluZm8uYml6QWN0aXZpdGllcyB8fCBbXSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvY0NvbnRlbnQodGhpcy5wcm9jZXNzSW5mby5wcm9jZXNzS2V5KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMudWlTdGF0ZS5jb250ZW50ID0gdGhpcy5jaGVja01vZGVsQ29udGVudChKU09OLnN0cmluZ2lmeShyZSkpO1xyXG4gICAgICAgICAgICAgIHRoaXMub3BlblByb2Nlc3ModGhpcy51aVN0YXRlLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NFZGl0b3Iubm9EdEluZm9cIikpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudGltZSA9PT0gUHJvY2Vzc1RpbWUucnQpIHtcclxuICAgICAgaWYgKHRoaXMucnRQcm9jZXNzSW5mbykge1xyXG4gICAgICAgIHRoaXMudmlld01vZGVsLmdldEZsb3dGb3JtSW5mb0J5SWQodGhpcy5ydFByb2Nlc3NJbmZvLmZsb3dGb3JtSWQpLnN1YnNjcmliZSgoaW5mbzogRmxvd0Zvcm1JbmZvKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmVkaXRvclVpLmxvYWRCaXpBY3Rpdml0aWVzKGluZm8uYml6QWN0aXZpdGllcyB8fCBbXSk7XHJcbiAgICAgICAgICB0aGlzLmdldFByb2NDb250ZW50KHRoaXMucnRQcm9jZXNzSW5mby5ydFByb2NEZWZJZCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgdGhpcy51aVN0YXRlLmNvbnRlbnQgPSB0aGlzLmNoZWNrTW9kZWxDb250ZW50KEpTT04uc3RyaW5naWZ5KHJlKSk7XHJcbiAgICAgICAgICAgIHRoaXMub3BlblByb2Nlc3ModGhpcy51aVN0YXRlLmNvbnRlbnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLm5vUnRJbmZvXCIpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5paw5aKe5rWB56iL77yM5Z+65LqO5rWB56iL5YiG57G76I635Y+W5Y+C5pWw5YiX6KGo77yM5p6E5Lu25ZKM6KGo5Y2VXHJcbiAgICogQHBhcmFtIGZmSWQg5rWB56iL5YiG57G7SURcclxuICAgKi9cclxuICBvcGVuTmV3UHJvY2VzcyhmZklkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMudmlld01vZGVsLmdldEZsb3dGb3JtSW5mb0J5SWQoZmZJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAoaW5mbzogRmxvd0Zvcm1JbmZvKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc0JpekNvbXBvbm5ldHM6IEJpekNvbXBvbmVudEVudGl0eVtdID0gaW5mby5iaXpDb21wb25lbnRzO1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbWl6ZUFjdGlvbnMgPSBpbmZvLmN1c3RvbWl6ZUFjdGlvbnMuZmlsdGVyKGEgPT4gYS5pc0FsbCA9PT0gdHJ1ZSkubWFwKGEgPT4gKHtcclxuICAgICAgICAgIGlkOiBhLmlkLCBjb2RlOiBhLmNvZGUsIG5hbWU6IGEubmFtZSwgdGVybWluYWxUeXBlOiBhLnRlcm1pbmFsLFxyXG4gICAgICAgICAgYWN0dWFsUGFyYW1ldGVyczogYS5hY3R1YWxQYXJhbWV0ZXJzLm1hcChwID0+ICh7XHJcbiAgICAgICAgICAgIE5hbWU6IHAuY29kZSwgVmFsdWU6IHAudmFsdWUsIFZhbHVlVGV4dDogcC5uYW1lLCBUYWc6ICdleHByZXNzaW9uJ1xyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGxldCBleGVjdXRlRm9ybXM6IEV4ZWN1dGVGb3JtTW9kZWxbXSA9IFtdO1xyXG4gICAgICAgIGluZm8uZXhjdXRlRm9ybXMuZm9yRWFjaChmb3JtID0+IHtcclxuICAgICAgICAgIGlmIChmb3JtLmlzRGVmYXVsdCkge1xyXG4gICAgICAgICAgICAvLyDmtYHnqIvnu5Hlrprpu5jorqTljZXmja5cclxuICAgICAgICAgICAgY29uc3QgZm9ybXMgPSB0aGlzLkNvbnZlcnRFeGVjdXRlRm9ybShmb3JtKTtcclxuICAgICAgICAgICAgZXhlY3V0ZUZvcm1zID0gZXhlY3V0ZUZvcm1zLmNvbmNhdChmb3Jtcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5aaC5p6c5LiN5a2Y5Zyo6KGo5Y2V5a6a5LmJ77yM6ZyA6KaB5Y676KGo5Y2V5qC85byP5YiX6KGo5Y+W5LiA5LiLXHJcbiAgICAgICAgaWYgKGV4ZWN1dGVGb3Jtcy5sZW5ndGggPT09IDBcclxuICAgICAgICAgIHx8IGV4ZWN1dGVGb3Jtcy5maW5kSW5kZXgoZSA9PiBlLlRlcm1pbmFsVHlwZSA9PT0gVGVybWluYWxUeXBlLlBDKSA9PT0gLTFcclxuICAgICAgICAgIHx8IGV4ZWN1dGVGb3Jtcy5maW5kSW5kZXgoZSA9PiBlLlRlcm1pbmFsVHlwZSA9PT0gVGVybWluYWxUeXBlLk1PQklMRSkgPT09IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5nZXRGb3JtRm9ybWF0c0J5Qml6Q2F0ZWdvcnkoKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAgIChmb3JtRm9ybWF0czogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZm9ybUZvcm1hdHMgJiYgZm9ybUZvcm1hdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4ZWN1dGVGb3Jtcy5maW5kSW5kZXgoZSA9PiBlLlRlcm1pbmFsVHlwZSA9PT0gVGVybWluYWxUeXBlLlBDKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybUZvcm1hdCA9IGZvcm1Gb3JtYXRzLmZpbHRlcihmID0+IGYudGVybWluYWwgPT09ICdQQycgJiYgZi5zdGF0dXMgPT09IDApWzBdO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZm9ybUZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVGb3Jtcy5wdXNoKHRoaXMuZm9ybUZvcm1hdDJFeGVjdXRlRm9ybShmb3JtRm9ybWF0KSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleGVjdXRlRm9ybXMuZmluZEluZGV4KGUgPT4gZS5UZXJtaW5hbFR5cGUgPT09IFRlcm1pbmFsVHlwZS5NT0JJTEUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBmb3JtRm9ybWF0ID0gZm9ybUZvcm1hdHMuZmlsdGVyKGYgPT4gZi50ZXJtaW5hbCA9PT0gJ01vYmlsZScgJiYgZi5zdGF0dXMgPT09IDApWzBdO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZm9ybUZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVGb3Jtcy5wdXNoKHRoaXMuZm9ybUZvcm1hdDJFeGVjdXRlRm9ybShmb3JtRm9ybWF0KSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgbmV3UHJvY0luZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnByb2Nlc3NJbmZvLnByb2Nlc3NOYW1lLFxyXG4gICAgICAgICAgICAgICAgYml6T2JqSWQ6IHRoaXMucHJvY2Vzc0luZm8uYml6T2JqSWQsXHJcbiAgICAgICAgICAgICAgICBmZklkOiBmZklkLFxyXG4gICAgICAgICAgICAgICAgZmZOYW1lOiB0aGlzLnByb2Nlc3NJbmZvLmZsb3dGb3JtTmFtZSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0TW9kZTogdGhpcy5wcm9jZXNzSW5mby5zdGFydE1vZGUsXHJcbiAgICAgICAgICAgICAgICBmb3JtYWxQYXJhbWV0ZXJzOiBpbmZvLmZvcm1hbFBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzQml6Q29tcG9ubmV0czogcHJvY2Vzc0JpekNvbXBvbm5ldHMsXHJcbiAgICAgICAgICAgICAgICBleGVjdXRlRm9ybXM6IGV4ZWN1dGVGb3JtcyxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWl6ZUFjdGlvbnM6IGN1c3RvbWl6ZUFjdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRGVzY3JpcHRpb246IGluZm8uZmxvd0Zvcm0ucHJvY2Vzc0Rlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVCcG1uTW9kZWwoaW5mby5iaXpBY3Rpdml0aWVzIHx8IFtdLCBuZXdQcm9jSW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IG5ld1Byb2NJbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnByb2Nlc3NJbmZvLnByb2Nlc3NOYW1lLFxyXG4gICAgICAgICAgICBiaXpPYmpJZDogdGhpcy5wcm9jZXNzSW5mby5iaXpPYmpJZCxcclxuICAgICAgICAgICAgZmZJZDogZmZJZCxcclxuICAgICAgICAgICAgZmZOYW1lOiB0aGlzLnByb2Nlc3NJbmZvLmZsb3dGb3JtTmFtZSxcclxuICAgICAgICAgICAgc3RhcnRNb2RlOiB0aGlzLnByb2Nlc3NJbmZvLnN0YXJ0TW9kZSxcclxuICAgICAgICAgICAgZm9ybWFsUGFyYW1ldGVyczogaW5mby5mb3JtYWxQYXJhbWV0ZXJzLFxyXG4gICAgICAgICAgICBwcm9jZXNzQml6Q29tcG9ubmV0czogcHJvY2Vzc0JpekNvbXBvbm5ldHMsXHJcbiAgICAgICAgICAgIGV4ZWN1dGVGb3JtczogZXhlY3V0ZUZvcm1zLFxyXG4gICAgICAgICAgICBjdXN0b21pemVBY3Rpb25zOiBjdXN0b21pemVBY3Rpb25zLFxyXG4gICAgICAgICAgICBwcm9jZXNzRGVzY3JpcHRpb246IGluZm8uZmxvd0Zvcm0ucHJvY2Vzc0Rlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHRoaXMuY3JlYXRlQnBtbk1vZGVsKGluZm8uYml6QWN0aXZpdGllcyB8fCBbXSwgbmV3UHJvY0luZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUJwbW5Nb2RlbChiaXpBY3Rpdml0aWVzLCBuZXdQcm9jSW5mbykge1xyXG4gICAgdGhpcy5zZXJ2aWNlLmdldEJpekNtcCgpLnN1YnNjcmliZShcclxuICAgICAgKGNtcHM6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vIDIwMjMtNS0zMCDkuLrkuobop6PlhrPnvZHnu5zovoPlt67lnLrmma/kuIvnmoTliqDovb3pl67popjkv67mlLnkuobliqDovb3pobrluo8g5YWI5Yqg6L295pWw5o2u5YaNc2hvd2VkaXRvclVpXHJcbiAgICAgICAgdGhpcy5lZGl0b3JVaS5zaG93KCk7XHJcbiAgICAgICAgdGhpcy5hZGRFZGl0b3JVaUxpc3RlbmVycyh0aGlzLmVkaXRvclVpKTtcclxuICAgICAgICB0aGlzLmVkaXRvclVpLmxvYWRCaXpBY3Rpdml0aWVzKGJpekFjdGl2aXRpZXMgfHwgW10pO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkuY3JlYXRlQnBtbk1vZGVsKG5ld1Byb2NJbmZvLCBjbXBzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlLmdldFByb2NFeHRlbmRQcm9wZXJ0eShuZXdQcm9jSW5mby5CaXpEZWZLZXksIG5ld1Byb2NJbmZvLnN0YXJ0TW9kZSwgdGhpcy5lZGl0b3JVaS5iaXpDYXRlZ29yeUlkKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAocHJvcGVydHk6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IFtdO1xyXG4gICAgICAgICAgICBwcm9wZXJ0eS5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICgocC5iaXpDYXRlZ29yeUlkIHx8IHAuYml6RGVmS2V5KSAmJiAoKHAuYml6Q2F0ZWdvcnlJZC5pbmRleE9mKHRoaXMuZWRpdG9yVWkuYml6Q2F0ZWdvcnlJZCkgIT0gLTEgfHwgcC5iaXpDYXRlZ29yeUlkID09PSAnKicpIHx8XHJcbiAgICAgICAgICAgICAgICAocC5iaXpEZWZLZXkuaW5kZXhPZihuZXdQcm9jSW5mby5CaXpEZWZLZXkpICE9IC0xIHx8IHAuYml6RGVmS2V5ID09PSAnKicpKSAmJlxyXG4gICAgICAgICAgICAgICAgKHAuc3RhcnRNb2RlLmluZGV4T2YobmV3UHJvY0luZm8uc3RhcnRNb2RlKSAhPSAtMSB8fCBwLnN0YXJ0TW9kZSA9PT0gJyonKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMucHVzaChwKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRvclVpLnByb2NFeHRQcm9wcyA9IHByb3BzO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZsYWcpIHtcclxuICAgICAgICAgICAgICB0aGlzLmZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOaYvuekuua1geeoi+WxnuaAp1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5pbml0UHJvY2Vzc1Byb3BlcnR5KHRoaXMuZWRpdG9yVWkuZ2V0RmFycmlzUHJvcENvbmZpZygpKTtcclxuICAgICAgICAgICAgLy8g6I635Y+W5ZCv5Yqo5pa55byPXHJcbiAgICAgICAgICAgIHRoaXMudWlTdGF0ZS5nZXRTdGFydE1vZGUodGhpcy5lZGl0b3JVaS5nZXRTdGFydE1vZGUoKSk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuZWRpdG9yVWkuZ2V0U3RhcnRNb2RlKCkgPT0gU3RhcnRNb2RlLlNVQl9QUk9DRVNTKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCA9IHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQuY29uY2F0KHRoaXMudWlTdGF0ZS5zdWJQcm9jZXNzRWxlbWVudENvbnRleHQpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCA9IHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQuZmlsdGVyKHggPT4gdGhpcy51aVN0YXRlLnN1YlByb2Nlc3NFbGVtZW50Q29udGV4dC5zb21lKHkgPT4geS5rZXkgIT0geC5rZXkpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudWlTdGF0ZS5icG1uTW9kZWwgPSB0aGlzLmVkaXRvclVpLmdyYXBoLmJwbW5Nb2RlbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkR3JhcGhNb2RlbENoYW5nZWRMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuUHJvY2Vzcyhjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIC8vIOWPllByb2Nlc3NIZWFkZXJcclxuICAgIGNvbnN0IG1vZGVsID0gbmV3IEJwbW5Nb2RlbCgpO1xyXG4gICAgbW9kZWwuTG9hZEZyb21Kc29uKGNvbnRlbnQpO1xyXG4gICAgY29uc3QgcHJvY2Vzc0hlYWRlciA9IChtb2RlbC5EZWZhdWx0UHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpLmZpbHRlcihlID0+IGUgaW5zdGFuY2VvZiBQcm9jZXNzSGVhZGVyKVswXSBhcyBQcm9jZXNzSGVhZGVyKTtcclxuICAgIHRoaXMuc2VydmljZS5nZXRQcm9jRXh0ZW5kUHJvcGVydHkocHJvY2Vzc0hlYWRlci5CaXpEZWZLZXksIHByb2Nlc3NIZWFkZXIuc3RhcnRNb2RlLCB0aGlzLmVkaXRvclVpLmJpekNhdGVnb3J5SWQpLnN1YnNjcmliZShcclxuICAgICAgKHByb3BlcnR5OiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IFtdO1xyXG4gICAgICAgIHByb3BlcnR5LmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICBpZiAoKHAuYml6Q2F0ZWdvcnlJZCB8fCBwLmJpekRlZktleSkgJiYgKChwLmJpekNhdGVnb3J5SWQuaW5kZXhPZih0aGlzLmVkaXRvclVpLmJpekNhdGVnb3J5SWQpICE9IC0xIHx8IHAuYml6Q2F0ZWdvcnlJZCA9PT0gJyonKSB8fFxyXG4gICAgICAgICAgICAocC5iaXpEZWZLZXkuaW5kZXhPZihwcm9jZXNzSGVhZGVyLkJpekRlZktleSkgIT0gLTEgfHwgcC5iaXpEZWZLZXkgPT09ICcqJykpICYmXHJcbiAgICAgICAgICAgIChwLnN0YXJ0TW9kZS5pbmRleE9mKHByb2Nlc3NIZWFkZXIuc3RhcnRNb2RlKSAhPSAtMSB8fCBwLnN0YXJ0TW9kZSA9PT0gJyonKSkge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKHApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkucHJvY0V4dFByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgLy8gMjAyMy01LTMwIOS4uuS6huino+WGs+e9kee7nOi+g+W3ruWcuuaZr+S4i+eahOWKoOi9vemXrumimOS/ruaUueS6huWKoOi9vemhuuW6jyDlhYjliqDovb3mlbDmja7lho1zaG93ZWRpdG9yVWlcclxuICAgICAgICB0aGlzLmVkaXRvclVpLnNob3coKTtcclxuICAgICAgICB0aGlzLmFkZEVkaXRvclVpTGlzdGVuZXJzKHRoaXMuZWRpdG9yVWkpO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yVWkub3BlbkJwbW5Nb2RlbChjb250ZW50KTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZsYWcpIHtcclxuICAgICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5pi+56S65rWB56iL5bGe5oCnXHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuaW5pdFByb2Nlc3NQcm9wZXJ0eSh0aGlzLmVkaXRvclVpLmdldEZhcnJpc1Byb3BDb25maWcoKSk7XHJcbiAgICAgICAgLy8g5omT5byA5pe26I635Y+W5omA5pyJ5rS75Yqo6IqC54K55L+h5oGvXHJcbiAgICAgICAgdGhpcy51aVN0YXRlLmdldFVzZXJBY3RMaXN0KHRoaXMuZWRpdG9yVWkuZ2V0QWN0aXZpdGllcygpKTtcclxuICAgICAgICAvLyDmiZPlvIDml7bojrflj5bmiYDmnInnu5PmnZ/oioLngrnkv6Hmga9cclxuICAgICAgICB0aGlzLnVpU3RhdGUuZ2V0RW5kRXZlbnRMaXN0KHRoaXMuZWRpdG9yVWkuZ2V0RW5kRXZlbnRzKCkpO1xyXG4gICAgICAgIC8vIOaJk+W8gOaXtuiOt+WPluaJgOacieefpeS8muiKgueCueS/oeaBr1xyXG4gICAgICAgIHRoaXMudWlTdGF0ZS5nZXROb3RpZnlFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXROb3RpZnlFdmVudHMoKSk7XHJcbiAgICAgICAgLy8g5omT5byA5pe26I635Y+W5omA5pyJ5raI5oGv6IqC54K55L+h5oGvXHJcbiAgICAgICAgdGhpcy51aVN0YXRlLmdldE1lc3NhZ2VFdmVudExpc3QodGhpcy5lZGl0b3JVaS5nZXRNZXNzYWdlRXZlbnRzKCkpO1xyXG4gICAgICAgIC8vIOaJk+W8gOaXtuiOt+WPluaJgOacieWtkOa1geeoi+WSjOS/oeWPt+aNleiOt+iKgueCueS/oeaBr1xyXG4gICAgICAgIHRoaXMudWlTdGF0ZS5nZXRTdWJBbmRDYXRjaEV2ZW50c0xpc3QodGhpcy5lZGl0b3JVaS5nZXRTdWJBbmRDYXRjaEV2ZW50cygpKTtcclxuXHJcbiAgICAgICAgdGhpcy51aVN0YXRlLmJwbW5Nb2RlbCA9IHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsO1xyXG5cclxuICAgICAgICAvLyDojrflj5blkK/liqjmlrnlvI9cclxuICAgICAgICB0aGlzLnVpU3RhdGUuZ2V0U3RhcnRNb2RlKHRoaXMuZWRpdG9yVWkuZ2V0U3RhcnRNb2RlKCkpO1xyXG4gICAgICAgIGlmKHRoaXMuZWRpdG9yVWkuZ2V0U3RhcnRNb2RlKCkgPT0gU3RhcnRNb2RlLlNVQl9QUk9DRVNTKSB7XHJcbiAgICAgICAgICB0aGlzLnVpU3RhdGUuc3ViQWN0aXZpdHlDb250ZXh0ID0gdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dC5jb25jYXQodGhpcy51aVN0YXRlLnN1YlByb2Nlc3NFbGVtZW50Q29udGV4dCk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgdGhpcy51aVN0YXRlLnN1YkFjdGl2aXR5Q29udGV4dCA9IHRoaXMudWlTdGF0ZS5zdWJBY3Rpdml0eUNvbnRleHQuZmlsdGVyKHggPT4gdGhpcy51aVN0YXRlLnN1YlByb2Nlc3NFbGVtZW50Q29udGV4dC5zb21lKHkgPT4geS5rZXkgIT0geC5rZXkpKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hZGRHcmFwaE1vZGVsQ2hhbmdlZExpc3RlbmVyKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmt7vliqBncmFwaCBtb2RlbOebkeWQrOWZqO+8jOacieWPmOWMluWImeWwhmNoYW5nZWRGbGFnXHJcbiAgICovXHJcbiAgYWRkR3JhcGhNb2RlbENoYW5nZWRMaXN0ZW5lcigpIHtcclxuICAgIC8vIOebkeWQrOeUu+W4g+WPmOWMlu+8jOabtOaWsOeVjOmdouWPmOabtOeKtuaAgVxyXG4gICAgY29uc3QgY2hhbmdlZExpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmNoYW5nZWRGbGFnID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLmVkaXRvclVpLmdyYXBoLm1vZGVsLmFkZExpc3RlbmVyKG14RXZlbnQuQ0hBTkdFLCBjaGFuZ2VkTGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaG93VGlwKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XHJcbiAgICAgIHN3aXRjaCAoZGF0YS5sZXZlbCkge1xyXG4gICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLndhcm5pbmcoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncXVlc3Rpb24nOlxyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlLnF1ZXN0aW9uKGRhdGEubWVzc2FnZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uT0tIYW5kbGUoZGF0YSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UuaW5mbyhkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnbm90aWZ5Jykge1xyXG4gICAgICBzd2l0Y2ggKGRhdGEubGV2ZWwpIHtcclxuICAgICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgIHRoaXMubm90aWZ5LmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyhkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2hvd1ZlcmlmeShkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuZXJyb3JMaXN0ID0gZGF0YTtcclxuICAgIHRoaXMuY3JlYXRlVmFsaWRhdGlvblRpcHMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcXVlc3Rpb25PS0hhbmRsZShkYXRhOiBhbnkpIHtcclxuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlua1geeoi+S4iuS4i+aWh1xyXG4gICAqIEBwYXJhbSBpZCDmtYHnqIvlrprkuYlJRO+8iOiuvuiuoeaXtuS9v+eUqOa1geeoi+WumuS5iUtlee+8jOi/kOihjOaXtuS9v+eUqOa1geeoi+WumuS5iUlE77yJXHJcbiAgICovXHJcbiAgZ2V0UHJvY0NvbnRlbnQoaWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAoaWQpIHtcclxuICAgICAgaWYgKHRoaXMudGltZSA9PT0gUHJvY2Vzc1RpbWUuZHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldFByb2NDb250ZW50YnlLZXkoaWQpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGltZSA9PT0gUHJvY2Vzc1RpbWUucnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldFJUUHJvY0NvbnRlbnRieUlkKGlkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NFZGl0b3Iud3JvbmdNb21lbnRcIikpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNhdmUoY29udGVudDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnVpU3RhdGUuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICBjb25zdCBwcm9jZXNzID0gSlNPTi5wYXJzZSh0aGlzLnVpU3RhdGUuY29udGVudCk7XHJcbiAgICB0aGlzLnNhdmVIdHRwKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgIC8vIDIwMjMtNi0xMyDkv53lrZjlkI7lkIzmraXmtYHnqIvlkI3np7DliLDmoIfpopjmoI9cclxuICAgICAgdGhpcy5wcm9jTmFtZVRpdGxlID0gcHJvY2Vzcy5EZWZhdWx0UHJvY2Vzcy5OYW1lO1xyXG4gICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHtcclxuICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NFZGl0b3IucHJvbXB0ZWRcIiksXHJcbiAgICAgICAgbXNnOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5zYXZlU3VjY2Vzc1wiKSxcclxuICAgICAgICB0aW1lb3V0OiAzMDAwXHJcbiAgICAgIH0gYXMgTm90aWZ5T3B0aW9ucyk7XHJcbiAgICAgIGlmICh0aGlzLnRpbWUgPT09IFByb2Nlc3NUaW1lLmR0KSB7XHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuYXVkaXRQcm9jZXNzRGVmKEF1ZGl0RXZlbnQuV0ZfUHJvY2Vzc0RlZl9TYXZlRFQsIHRydWUsIHByb2Nlc3MuRGVmYXVsdFByb2Nlc3MuS2V5KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnRpbWUgPT09IFByb2Nlc3NUaW1lLnJ0KSB7XHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuYXVkaXRQcm9jZXNzRGVmKEF1ZGl0RXZlbnQuV0ZfUHJvY2Vzc0RlZl9TYXZlUlQsIHRydWUsIHByb2Nlc3MuRGVmYXVsdFByb2Nlc3MuS2V5KTtcclxuICAgICAgfVxyXG4gICAgICAvLyDph43nva7nlYzpnaLlj5jmm7TnirbmgIFcclxuICAgICAgdGhpcy5jaGFuZ2VkRmxhZyA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgICAgKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuZXJyb3Ioe1xyXG4gICAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLnByb21wdGVkXCIpLFxyXG4gICAgICAgICAgbXNnOiBlcnJvci5lcnJvci5NZXNzYWdlLFxyXG4gICAgICAgICAgdGltZW91dDogMzAwMFxyXG4gICAgICAgIH0gYXMgTm90aWZ5T3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZSA9PT0gUHJvY2Vzc1RpbWUuZHQpIHtcclxuICAgICAgICAgIHRoaXMudmlld01vZGVsLmF1ZGl0UHJvY2Vzc0RlZihBdWRpdEV2ZW50LldGX1Byb2Nlc3NEZWZfU2F2ZURULCBmYWxzZSwgcHJvY2Vzcy5EZWZhdWx0UHJvY2Vzcy5LZXkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50aW1lID09PSBQcm9jZXNzVGltZS5ydCkge1xyXG4gICAgICAgICAgdGhpcy52aWV3TW9kZWwuYXVkaXRQcm9jZXNzRGVmKEF1ZGl0RXZlbnQuV0ZfUHJvY2Vzc0RlZl9TYXZlUlQsIGZhbHNlLCBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLktleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVsZWFzZShjb250ZW50OiBzdHJpbmcpIHtcclxuICAgIHRoaXMudWlTdGF0ZS5jb250ZW50ID0gY29udGVudDtcclxuICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgIHRoaXMudWlTdGF0ZS5nZXRSZWxlYXNlQ29uZmlnKCkuc3Vic2NyaWJlKChjb25maWcpID0+IHtcclxuICAgICAgaWYgKGNvbmZpZy5jdXJyZW50VmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgIC8vIOWxleekuuWPkeW4g+WJjeWuoeaJuemhtemdou+8jOWQjOaXtuS/neWtmO+8jOiusOWuoeiuoVxyXG4gICAgICAgIHRoaXMudmlld01vZGVsLnNhdmVQcm9jZXNzKHRoaXMudWlTdGF0ZS5jb250ZW50LCB0aGlzLnByb2Nlc3NJbmZvLCAxKS5zdWJzY3JpYmUoKHJlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5nZXRQcm9jRGVmc0J5S2V5KEpTT04ucGFyc2UoY29udGVudCkuRGVmYXVsdFByb2Nlc3MuS2V5KS5zdWJzY3JpYmUoKFByb2NEZWZzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFZlcnNpb24gPSBNYXRoLm1heC5hcHBseShNYXRoLCBQcm9jRGVmcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICByZXR1cm4gaXRlbS52ZXJzaW9uIDw8IDBcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAvLyDlsZXnpLrlj5HluIPliY3lrqHmibnpobXpnaLvvIzlkIzml7bkv53lrZjvvIzorrDlrqHorqFcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwucmVsZWFzZVByb2Nlc3MoY29udGVudCwgbWF4VmVyc2lvbiA9PT0gLUluZmluaXR5ID8gMSA6IG1heFZlcnNpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlTG9hZGluZygpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh7XHJcbiAgICAgICAgICB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NFZGl0b3IucHJvbXB0ZWRcIiksXHJcbiAgICAgICAgICBtc2c6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLndhaXRSZXZpZXdcIiksXHJcbiAgICAgICAgICB0aW1lb3V0OiAzMDAwXHJcbiAgICAgICAgfSBhcyBOb3RpZnlPcHRpb25zKTtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gSlNPTi5wYXJzZSh0aGlzLnVpU3RhdGUuY29udGVudCk7XHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuYXVkaXRQcm9jZXNzRGVmKEF1ZGl0RXZlbnQuV0ZfUHJvY2Vzc0RlZl9EZXBsb3ksIHRydWUsIHByb2Nlc3MuRGVmYXVsdFByb2Nlc3MuS2V5KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnZpZXdNb2RlbC5kZXBsb3lQcm9jZXNzKHRoaXMudWlTdGF0ZS5jb250ZW50KS5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5zYXZlUHJvY2Vzcyh0aGlzLnVpU3RhdGUuY29udGVudCwgdGhpcy5wcm9jZXNzSW5mbywgMCkuc3Vic2NyaWJlKChyKSA9PiB7IH0pO1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh7XHJcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5wcm9tcHRlZFwiKSxcclxuICAgICAgICAgICAgbXNnOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5zdWNjZXNzUHVibGlzaFwiKSxcclxuICAgICAgICAgICAgdGltZW91dDogMzAwMFxyXG4gICAgICAgICAgfSBhcyBOb3RpZnlPcHRpb25zKTtcclxuICAgICAgICAgIGNvbnN0IHByb2Nlc3MgPSBKU09OLnBhcnNlKHRoaXMudWlTdGF0ZS5jb250ZW50KTtcclxuICAgICAgICAgIHRoaXMudmlld01vZGVsLmF1ZGl0UHJvY2Vzc0RlZihBdWRpdEV2ZW50LldGX1Byb2Nlc3NEZWZfRGVwbG95LCB0cnVlLCBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLktleSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnkuZXJyb3Ioe1xyXG4gICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5wcm9tcHRlZFwiKSxcclxuICAgICAgICAgICAgICBtc2c6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLnB1Ymxpc2hGYWlsXCIpICsgYCR7ZS5lcnJvci5NZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgdGltZW91dDogMzAwMFxyXG4gICAgICAgICAgICB9IGFzIE5vdGlmeU9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzID0gSlNPTi5wYXJzZSh0aGlzLnVpU3RhdGUuY29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsLmF1ZGl0UHJvY2Vzc0RlZihBdWRpdEV2ZW50LldGX1Byb2Nlc3NEZWZfRGVwbG95LCBmYWxzZSwgcHJvY2Vzcy5EZWZhdWx0UHJvY2Vzcy5LZXkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y5rWB56iL5a6a5LmJ77yI6K6+6K6h5pe2K+i/kOihjOaXtu+8iVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2F2ZUh0dHAoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLnVpU3RhdGUuY29udGVudCkge1xyXG4gICAgICBpZiAodGhpcy50aW1lID09PSBQcm9jZXNzVGltZS5kdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5zYXZlUHJvY2Vzcyh0aGlzLnVpU3RhdGUuY29udGVudCwgdGhpcy5wcm9jZXNzSW5mbywgMSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50aW1lID09PSBQcm9jZXNzVGltZS5ydCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5zYXZlUlRQcm9jZXNzKHRoaXMudWlTdGF0ZS5jb250ZW50LCB0aGlzLnJ0UHJvY2Vzc0luZm8ucnRQcm9jRGVmSWQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci53cm9uZ01vbWVudFwiKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3dMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5sb2FkU2VydmljZS5zaG93KHsgY29udGFpbmVyOiAnYm9keScsIG1lc3NhZ2U6ICcnLCB0eXBlOiAxIH0pO1xyXG4gIH1cclxuICBjbG9zZUxvYWRpbmcoKSB7XHJcbiAgICB0aGlzLmxvYWRTZXJ2aWNlLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIENvbnZlcnRFeGVjdXRlRm9ybShmb3JtOiBFeGN1dGVGb3JtRW50aXR5KTogRXhlY3V0ZUZvcm1Nb2RlbFtdIHtcclxuICAgIGNvbnN0IGV4ZWN1dGVGb3JtcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKGZvcm0udGVybWluYWwgPT09ICd3ZWIsYXBwJykge1xyXG4gICAgICBjb25zdCB3ZWJGb3JtID0gbmV3IEV4ZWN1dGVGb3JtTW9kZWwoKTtcclxuICAgICAgd2ViRm9ybS5Db21wb25lbnRJZCA9IGZvcm0uYXBwSWQ7XHJcbiAgICAgIHdlYkZvcm0uZm9ybUZvcm1hdElkID0gZm9ybS5mb3JtRm9ybWF0SWQ7XHJcbiAgICAgIHdlYkZvcm0uRm9ybVR5cGUgPSBmb3JtLmZvcm1UeXBlO1xyXG4gICAgICB3ZWJGb3JtLk5hbWUgPSBmb3JtLm5hbWU7XHJcbiAgICAgIHdlYkZvcm0uVGVybWluYWxUeXBlID0gVGVybWluYWxUeXBlLlBDO1xyXG4gICAgICBpZiAoZm9ybS5hY3R1YWxQYXJhbWV0ZXJzICYmIGZvcm0uYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgd2ViRm9ybS5BY3R1YWxQYXJhbWV0ZXJzID0gZm9ybS5hY3R1YWxQYXJhbWV0ZXJzLm1hcChwID0+ICh7XHJcbiAgICAgICAgICBOYW1lOiBwLmNvZGUsXHJcbiAgICAgICAgICBWYWx1ZTogcC52YWx1ZVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfVxyXG4gICAgICBleGVjdXRlRm9ybXMucHVzaCh3ZWJGb3JtKTtcclxuICAgICAgY29uc3QgYXBwRm9ybSA9IG5ldyBFeGVjdXRlRm9ybU1vZGVsKCk7XHJcbiAgICAgIGFwcEZvcm0uQ29tcG9uZW50SWQgPSBmb3JtLmFwcElkO1xyXG4gICAgICBhcHBGb3JtLmZvcm1Gb3JtYXRJZCA9IGZvcm0uZm9ybUZvcm1hdElkO1xyXG4gICAgICBhcHBGb3JtLkZvcm1UeXBlID0gZm9ybS5mb3JtVHlwZTtcclxuICAgICAgYXBwRm9ybS5OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgICBhcHBGb3JtLlRlcm1pbmFsVHlwZSA9IFRlcm1pbmFsVHlwZS5NT0JJTEU7XHJcbiAgICAgIGlmIChmb3JtLmFjdHVhbFBhcmFtZXRlcnMgJiYgZm9ybS5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBhcHBGb3JtLkFjdHVhbFBhcmFtZXRlcnMgPSBmb3JtLmFjdHVhbFBhcmFtZXRlcnMubWFwKChwOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICBOYW1lOiBwLmNvZGUsXHJcbiAgICAgICAgICBUYWc6IHAudmFsdWVUeXBlID8gcC52YWx1ZVR5cGUgOiBQcm9jZXNzRGVVdGlsLmluaXRWYXJpYWJsZVR5cGUocC52YWx1ZSksXHJcbiAgICAgICAgICBWYWx1ZTogcC52YWx1ZVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfVxyXG4gICAgICBleGVjdXRlRm9ybXMucHVzaChhcHBGb3JtKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGV4ZWN1dGVGb3JtID0gbmV3IEV4ZWN1dGVGb3JtTW9kZWwoKTtcclxuICAgICAgZXhlY3V0ZUZvcm0uQ29tcG9uZW50SWQgPSBmb3JtLmFwcElkO1xyXG4gICAgICBleGVjdXRlRm9ybS5mb3JtRm9ybWF0SWQgPSBmb3JtLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgZXhlY3V0ZUZvcm0uRm9ybVR5cGUgPSBmb3JtLmZvcm1UeXBlO1xyXG4gICAgICBleGVjdXRlRm9ybS5OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgICBzd2l0Y2ggKGZvcm0udGVybWluYWwpIHtcclxuICAgICAgICBjYXNlICd3ZWInOlxyXG4gICAgICAgICAgZXhlY3V0ZUZvcm0uVGVybWluYWxUeXBlID0gVGVybWluYWxUeXBlLlBDO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnYXBwJzpcclxuICAgICAgICAgIGV4ZWN1dGVGb3JtLlRlcm1pbmFsVHlwZSA9IFRlcm1pbmFsVHlwZS5NT0JJTEU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoZm9ybS5hY3R1YWxQYXJhbWV0ZXJzICYmIGZvcm0uYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZXhlY3V0ZUZvcm0uQWN0dWFsUGFyYW1ldGVycyA9IGZvcm0uYWN0dWFsUGFyYW1ldGVycy5tYXAoKHA6IGFueSkgPT4gKHtcclxuICAgICAgICAgIE5hbWU6IHAuY29kZSxcclxuICAgICAgICAgIFRhZzogcC52YWx1ZVR5cGUgPyBwLnZhbHVlVHlwZSA6IFByb2Nlc3NEZVV0aWwuaW5pdFZhcmlhYmxlVHlwZShwLnZhbHVlKSxcclxuICAgICAgICAgIFZhbHVlOiBwLnZhbHVlXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICAgIGV4ZWN1dGVGb3Jtcy5wdXNoKGV4ZWN1dGVGb3JtKTtcclxuICAgIH1cclxuICAgIHJldHVybiBleGVjdXRlRm9ybXM7XHJcbiAgfVxyXG4gIHByaXZhdGUgZm9ybUZvcm1hdDJFeGVjdXRlRm9ybShmb3JtZm9ybWF0KTogRXhlY3V0ZUZvcm1Nb2RlbCB7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEV4ZWN1dGVGb3JtTW9kZWwoKTtcclxuICAgIGZvcm0uSWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICBmb3JtLkNvbXBvbmVudElkID0gbnVsbDtcclxuICAgIGZvcm0uZm9ybUZvcm1hdElkID0gZm9ybWZvcm1hdC5pZDtcclxuICAgIGZvcm0uRm9ybVR5cGUgPSAnMCc7XHJcbiAgICBmb3JtLk5hbWUgPSBmb3JtZm9ybWF0Lm5hbWU7XHJcbiAgICBzd2l0Y2ggKGZvcm1mb3JtYXQudGVybWluYWwpIHtcclxuICAgICAgY2FzZSAnUEMnOlxyXG4gICAgICAgIGZvcm0uVGVybWluYWxUeXBlID0gVGVybWluYWxUeXBlLlBDO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdNb2JpbGUnOlxyXG4gICAgICAgIGZvcm0uVGVybWluYWxUeXBlID0gVGVybWluYWxUeXBlLk1PQklMRTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGlmIChmb3JtZm9ybWF0LnVybFBhcmFtZXRlcnMgJiYgZm9ybWZvcm1hdC51cmxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9ybS5BY3R1YWxQYXJhbWV0ZXJzID0gZm9ybWZvcm1hdC51cmxQYXJhbWV0ZXJzLm1hcChwID0+ICh7XHJcbiAgICAgICAgTmFtZTogcC5jb2RlLFxyXG4gICAgICAgIFRhZzogcC52YWx1ZVR5cGUgPyBwLnZhbHVlVHlwZSA6IFByb2Nlc3NEZVV0aWwuaW5pdFZhcmlhYmxlVHlwZShwLnZhbHVlKSxcclxuICAgICAgICBWYWx1ZTogcC52YWx1ZVxyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29tcGxldGVTdHJhdGVneUNoYW5nZWQoc3RyYXRlZ3k6IHN0cmluZykge1xyXG5cclxuICAgIGlmIChzdHJhdGVneSAhPT0gdGhpcy51aVN0YXRlLmNvbXBsZXRlSXRlcmF0b3JbMF0ua2V5KSB7XHJcblxyXG4gICAgICAvLyDlj4LkuI7ogIXlrZjlnKjoh6rliqjlrqHmibnnmoTmg4XlhrXkuIvvvIzkuI3lhYHorrjkv67mlLnlrozmiJDnrZbnlaXkuLrkvJrnrb7op4TliJlcclxuICAgICAgLy8gaWYgKHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuUGFydGljaXBhbnRTY2hlbWVzXHJcbiAgICAgIC8vICAgJiYgdGhpcy51aVN0YXRlLnByb3BlcnR5RGF0YS5QYXJ0aWNpcGFudFNjaGVtZXMub3B0aW9uc1xyXG4gICAgICAvLyAgICYmIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuUGFydGljaXBhbnRTY2hlbWVzLm9wdGlvbnMuYXV0b21hdGljUGVyZm9ybWVyc1xyXG4gICAgICAvLyAgICYmIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEuUGFydGljaXBhbnRTY2hlbWVzLm9wdGlvbnMuYXV0b21hdGljUGVyZm9ybWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vICAgcmV0dXJuO1xyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAvLyDkvJrnrb7op4TliJnkuI3lrZjlnKjvvIzljbPnlLHmiqLljaDmqKHlvI/vvIzlj5jkuLrkvJrnrb7ml7ZcclxuICAgICAgaWYgKCF0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhLlNpZ25SdWxlKSB7XHJcbiAgICAgICAgLy8g5Lya562+5piv6Ieq5Yqo5by55Ye65Lya562+6KeE5YiZ57yW6L6RXHJcbiAgICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFNpZ25SdWxlQ29tcG9uZW50KTtcclxuICAgICAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG5cclxuICAgICAgICBjb21wUmVmLmluc3RhbmNlLnZhbHVlID0gW107XHJcbiAgICAgICAgLy8gY29tcFJlZi5pbnN0YW5jZS5jb3VudGVyU2lnblZhcmlhYmxlcyA9IHRoaXMudWlTdGF0ZS5jb3VudGVyU2lnblZhcmlhYmxlcyB8fCBbXTtcclxuICAgICAgICAvLyBjb21wUmVmLmluc3RhbmNlLmFwcHJvdmFsSXRlbXMgPSB0aGlzLnVpU3RhdGUuYXBwcm92YWxJdGVtcyB8fCBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxDb25maWc6IE1vZGFsT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oY29tcFJlZi5pbnN0YW5jZS5tb2RhbENvbmZpZyxcclxuICAgICAgICAgIHsgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5tb2RhbEZvb3RlciB9KTtcclxuICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlTW9kYWwuc3Vic2NyaWJlKCRldmVudCA9PiBkaWFsb2cuY2xvc2UoKSk7XHJcbiAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5zdWJtaXRNb2RhbC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVDaGFuZ2VQcm9wZXJ0eSh7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5SWQ6ICdwZXJmb3JtZXJQcm9wZXJ0eScsXHJcbiAgICAgICAgICAgIHByb3BlcnR5SUQ6IFVzZXJBY3Rpdml0eVByb3BlcnR5S2V5cy5TaWduUnVsZSxcclxuICAgICAgICAgICAgcHJvcGVydHlWYWx1ZTogZGF0YS52YWx1ZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyDkvJrnrb7op4TliJnkuIvvvIzpqbPlm57op4TliJnnuqbmnZ9cclxuICAgICAgaWYgKCh0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhLkJhY2tXYXJkUnVsZSBhcyBCYWNrV2FyZFJ1bGUpLlNlbGVjdFRhcmdldEFibGUgPT09IHRydWUpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZS53YXJuaW5nKHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLnBvbGljeUNvbmZsaWN0XCIpKTtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgT3RoZXJBc3NpZ25Ob2Rlc0NoYW5nZWQoZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQXNzaWduU2NvcGVDb21wb25lbnQpO1xyXG4gICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIGxldCBsb2NhdGlvbjtcclxuICAgIGlmIChkYXRhLklkLmluZGV4T2YoJ3N0YXJ0QWN0aXZpdHknKSA+IC0xKSB7XHJcbiAgICAgIGxvY2F0aW9uID0gJ3N0YXJ0QWN0aXZpdHknO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbG9jYXRpb24gPSAndXNlckFjdGl2aXR5JztcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbiA9PT0gJ3N0YXJ0QWN0aXZpdHknKSB7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UudmFsdWUgPSBbXTtcclxuICAgICAgY29uc3QgYWN0aXZpdGllcyA9IHRoaXMudWlTdGF0ZS51c2VyQWN0TGlzdC5maWx0ZXIoYSA9PiBhLklkICE9PSB0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhLklkXHJcbiAgICAgICAgJiYgYS5Bc3NpZ25tZW50U3RyYXRlZ3kgPT09ICdBU1NJR04nXHJcbiAgICAgICAgJiYgYS5Bc3NpZ25QZXJmb3JtZXJDb25maWdcclxuICAgICAgICAmJiBhLkFzc2lnblBlcmZvcm1lckNvbmZpZy5PcGVyYXRvciA9PT0gJ3Byb2NJbnN0Q3JlYXRvcicpO1xyXG4gICAgICBpZiAoYWN0aXZpdGllcyAmJiBhY3Rpdml0aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb21wUmVmLmluc3RhbmNlLnZhbHVlID0gYWN0aXZpdGllcy5tYXAoYSA9PiBhLklkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb21wUmVmLmluc3RhbmNlLnZhbHVlID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UudmFsdWUgPSBbXTtcclxuICAgIH1cclxuICAgIGNvbXBSZWYuaW5zdGFuY2UubG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgIGNvbnN0IG1vZGFsQ29uZmlnOiBNb2RhbE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGNvbXBSZWYuaW5zdGFuY2UubW9kYWxDb25maWcsXHJcbiAgICAgIHsgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5tb2RhbEZvb3RlciB9KTtcclxuICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsLnN1YnNjcmliZSgkZXZlbnQgPT4gZGlhbG9nLmNsb3NlKCkpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zdWJtaXRNb2RhbC5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZUNoYW5nZVByb3BlcnR5KHtcclxuICAgICAgICBjYXRlZ29yeUlkOiBsb2NhdGlvbiA9ICdzdGFydEFjdGl2aXR5JyA/ICdhY3Rpdml0eUNvbmZpZycgOiAnYXBwcm92YWxQcm9wZXJ0eScsXHJcbiAgICAgICAgLy8gdG9kb++8muWkmuS4qua0u+WKqOWFt+acieWQjOWQjeWxnuaAp+aXtu+8jOWmguS9leabtOWQiOeQhuWumuS5iVByb3BlcnR5S2V577yfXHJcbiAgICAgICAgcHJvcGVydHlJRDogVXNlckFjdGl2aXR5UHJvcGVydHlLZXlzLm90aGVyQXNzaWduQWN0aXZpdGllcyxcclxuICAgICAgICBwcm9wZXJ0eVZhbHVlOiBkYXRhLnZhbHVlXHJcbiAgICAgIH0pO1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a6M5oiQ562W55Wl6LCD5pW05qCh6aqMXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiZWZvcmVDb21wbGV0ZVN0cmF0ZWd5Q2hhbmdlKGRhdGE6IGFueSk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKHRoaXMudGltZSA9PT0gUHJvY2Vzc1RpbWUucnQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmJlZm9yZUNvbXBsZXRlU3RyYXRlZ3lDaGFuZ2UoZGF0YSwgdGhpcy5ydFByb2Nlc3NJbmZvKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDkv53lrZjvvIzlj5HluIPvvIzlj6blrZjvvIzlkIzmraXmk43kvZzml7ZcclxuICAgKiDmoKHpqozmqKHlnovnmoTmtYHnqIvliIbnsbtJROS4juWIl+ihqOWtmOWCqOaYr+WQpuS4gOiHtO+8jOS4jeS4gOiHtOaXtu+8jOS7peWIl+ihqOS4uuWHhlxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2hlY2tNb2RlbENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHByb2Nlc3MgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgY29uc3QgbW9kZWxCaXpEZWZLZXkgPSBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLmV4dGVuc2lvbkVsZW1lbnRzLmZpbmQoZSA9PiBlLkNsclR5cGVJRCA9PT0gJ3dmLlByb2Nlc3NIZWFkZXInKS5CaXpEZWZLZXk7XHJcbiAgICBpZiAodGhpcy50aW1lID09PSBQcm9jZXNzVGltZS5kdCkge1xyXG4gICAgICBpZiAobW9kZWxCaXpEZWZLZXkgPT09IHRoaXMucHJvY2Vzc0luZm8uZmxvd0Zvcm1JZCkge1xyXG4gICAgICAgIHJldHVybiBjb250ZW50O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByb2Nlc3MuRGVmYXVsdFByb2Nlc3MuZXh0ZW5zaW9uRWxlbWVudHMuZmluZChlID0+IGUuQ2xyVHlwZUlEID09PSAnd2YuUHJvY2Vzc0hlYWRlcicpLkJpekRlZktleSA9IHRoaXMucHJvY2Vzc0luZm8uZmxvd0Zvcm1JZDtcclxuICAgICAgICBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLmV4dGVuc2lvbkVsZW1lbnRzLmZpbmQoZSA9PiBlLkNsclR5cGVJRCA9PT0gJ3dmLlByb2Nlc3NIZWFkZXInKS5CaXpEZWZOYW1lID0gdGhpcy51aVN0YXRlLmZsb3dGb3JtSW5mby5mbG93Rm9ybS5uYW1lO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwcm9jZXNzKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnRpbWUgPT09IFByb2Nlc3NUaW1lLnJ0KSB7XHJcbiAgICAgIGlmIChtb2RlbEJpekRlZktleSA9PT0gdGhpcy5ydFByb2Nlc3NJbmZvLmZsb3dGb3JtSWQpIHtcclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLmV4dGVuc2lvbkVsZW1lbnRzLmZpbmQoZSA9PiBlLkNsclR5cGVJRCA9PT0gJ3dmLlByb2Nlc3NIZWFkZXInKS5CaXpEZWZLZXkgPSB0aGlzLnJ0UHJvY2Vzc0luZm8uZmxvd0Zvcm1JZDtcclxuICAgICAgICBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLmV4dGVuc2lvbkVsZW1lbnRzLmZpbmQoZSA9PiBlLkNsclR5cGVJRCA9PT0gJ3dmLlByb2Nlc3NIZWFkZXInKS5CaXpEZWZOYW1lID0gdGhpcy51aVN0YXRlLmZsb3dGb3JtSW5mby5mbG93Rm9ybS5uYW1lO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwcm9jZXNzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNob3dNb2RlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IHsgbW9kZSA9IFNob3dNb2RlLnBhbmVsLCB3aWRlV2lkdGggPSAzMzAsIHNtYWxsV2lkdGggPSA0MSB9ID0gZXZlbnQgfHwge307XHJcbiAgICBpZiAobW9kZSA9PT0gU2hvd01vZGUucGFuZWwpIHtcclxuICAgICAgdGhpcy5wYW5lbFdpZHRoID0gd2lkZVdpZHRoO1xyXG4gICAgICB0aGlzLnJpZ2h0UGFuZWxXaWR0aCA9IHdpZGVXaWR0aDtcclxuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gU2hvd01vZGUuc2lkZWJhcikge1xyXG4gICAgICB0aGlzLnBhbmVsV2lkdGggPSBzbWFsbFdpZHRoO1xyXG4gICAgICB0aGlzLnJpZ2h0UGFuZWxXaWR0aCA9IHNtYWxsV2lkdGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzYXZlUHJvYygpIHtcclxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5lZGl0b3JVaS5ncmFwaC5icG1uTW9kZWw7XHJcbiAgICBjb25zdCByZXMgPSBXZlZhbGlkYXRvckFkYXB0ZXIudmFsaWRhdG9yKG1vZGVsLCB0aGlzLnNjZW5lKTtcclxuICAgIGlmIChyZXMudmFsaWQgPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5zaG93VGlwKHJlcyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChyZXMud2FybmluZ0xpc3QgJiYgcmVzLndhcm5pbmdMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5zaG93VmVyaWZ5KHJlcy53YXJuaW5nTGlzdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsZWFyVmFsaWRhdGlvblRpcHMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2F2ZShtb2RlbC5Db252ZXJ0VG9Kc29uKCkpO1xyXG4gIH1cclxuICBzYXZlQXMoKSB7XHJcbiAgICBpZiAoISh0aGlzLnVpU3RhdGUuZW5hYmxlQWRtaW5PcmdBdXQgfHwgKCh0aGlzLnVpU3RhdGUuaXNBZG1pbmlzdHJhdG9yQ29uZmlnICYmXHJcbiAgICAgIHRoaXMudWlTdGF0ZS5hZG1pbmlzdHJhdG9yICE9PSBudWxsKSB8fCAoIXRoaXMudWlTdGF0ZS5pc0FkbWluaXN0cmF0b3JDb25maWcpKSkpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlLmluZm8odGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcInByb2Nlc3NFZGl0b3Iubm9QZXJtaXNzaW9uVG9TYXZlXCIpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvclVpLmdyYXBoLmJwbW5Nb2RlbDtcclxuICAgIGNvbnN0IHJlcyA9IFdmVmFsaWRhdG9yQWRhcHRlci52YWxpZGF0b3IobW9kZWwsIHRoaXMuc2NlbmUpO1xyXG4gICAgaWYgKHJlcy52YWxpZCA9PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLnNob3dUaXAocmVzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcy53YXJuaW5nTGlzdCAmJiByZXMud2FybmluZ0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnNob3dWZXJpZnkocmVzLndhcm5pbmdMaXN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xlYXJWYWxpZGF0aW9uVGlwcygpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvY2VzcyA9IG5ldyBCcG1uTW9kZWwoKTtcclxuICAgIHByb2Nlc3MuTG9hZEZyb21Kc29uKG1vZGVsLkNvbnZlcnRUb0pzb24oKSk7XHJcbiAgICBwcm9jZXNzLkRlZmF1bHRQcm9jZXNzLktleSA9IFByb2Nlc3NEZVV0aWwuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgIHByb2Nlc3MuRGVmYXVsdFByb2Nlc3MuSWQgPSBQcm9jZXNzRGVVdGlsLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICBwcm9jZXNzLkRlZmF1bHREaWFncmFtLkJwbW5QbGFuZS5CcG1uRWxlbWVudElkID0gcHJvY2Vzcy5EZWZhdWx0UHJvY2Vzcy5JZDtcclxuICAgIHRoaXMudmlld01vZGVsLnNhdmVBc1Byb2Nlc3MocHJvY2VzcywgdGhpcy5wcm9jZXNzSW5mbyk7XHJcbiAgfVxyXG4gIHJlbGVhc2VQcm9jKCkge1xyXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLmVkaXRvclVpLmdyYXBoLmJwbW5Nb2RlbDtcclxuICAgIGNvbnN0IHJlcyA9IFdmVmFsaWRhdG9yQWRhcHRlci52YWxpZGF0b3IobW9kZWwsIHRoaXMuc2NlbmUpO1xyXG4gICAgaWYgKHJlcy52YWxpZCA9PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLnNob3dUaXAocmVzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcy53YXJuaW5nTGlzdCAmJiByZXMud2FybmluZ0xpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnNob3dWZXJpZnkocmVzLndhcm5pbmdMaXN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xlYXJWYWxpZGF0aW9uVGlwcygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWxlYXNlKG1vZGVsLkNvbnZlcnRUb0pzb24oKSk7XHJcbiAgfVxyXG4gIHN5bmMoKSB7XHJcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsO1xyXG4gICAgY29uc3QgcmVzID0gV2ZWYWxpZGF0b3JBZGFwdGVyLnZhbGlkYXRvcihtb2RlbCwgdGhpcy5zY2VuZSk7XHJcbiAgICBpZiAocmVzLnZhbGlkID09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuc2hvd1RpcChyZXMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAocmVzLndhcm5pbmdMaXN0ICYmIHJlcy53YXJuaW5nTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZlcmlmeShyZXMud2FybmluZ0xpc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbGVhclZhbGlkYXRpb25UaXBzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpZXdNb2RlbC5zeW5jRHRQcm9jZXNzKG1vZGVsLkNvbnZlcnRUb0pzb24oKSwgdGhpcy5ydFByb2Nlc3NJbmZvKTtcclxuICB9XHJcbiAgcHJvY1JlY29yZCgpIHtcclxuICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLkRvY3VtZW50YXRpb247XHJcbiAgICB0aGlzLm5vdGUocmVjb3JkKTtcclxuICB9XHJcbiAgYmF0Y2hTZXQoKSB7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQmF0Y2hTZXRQcm9wZXJ0aWVzQ29tcG9uZW50KTtcclxuICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICBjb25zdCBtb2RhbENvbmZpZzogTW9kYWxPcHRpb25zID0ge1xyXG4gICAgICB0aXRsZTogJ+aJuemHj+iuvue9ricsXHJcbiAgICAgIHdpZHRoOiA1MTIsXHJcbiAgICAgIGhlaWdodDogNTY1LFxyXG4gICAgICBzaG93QnV0dG9uczogdHJ1ZSxcclxuICAgICAgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5mb290ZXJcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY2FuY2VsLnN1YnNjcmliZSgkZXZlbnQgPT4gZGlhbG9nLmNsb3NlKCkpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zdWJtaXQuc3Vic2NyaWJlKChkYXRhOiBzdHJpbmcpID0+IHtcclxuICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2xvc2VQcm9jKCkge1xyXG4gICAgLy8g5aaC5p6c55WM6Z2i5Y+R55Sf5Y+Y5YyW77yM5aKe5Yqg56Gu6K6k5qGG5o+Q56S677yM5peg5Y+Y5YyW5YiZ55u05o6l5YWz6ZetXHJcbiAgICBpZiAodGhpcy5jaGFuZ2VkRmxhZykge1xyXG4gICAgICB0aGlzLm1lc3NhZ2UuY29uZmlybSh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5jbG9zZVByb2MxXCIpLFxyXG4gICAgICB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5jbG9zZVByb2MyXCIpKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgKGYpID0+IHtcclxuICAgICAgICAgIGlmIChmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICB2aWV3UHJvY01vZGVsKCkge1xyXG4gICAgY29uc3QgbW9kYWxDb25maWc6IE1vZGFsT3B0aW9ucyA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJwcm9jZXNzRWRpdG9yLnZpZXdNb2RlbFwiKSxcclxuICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgaGVpZ2h0OiA1MjAsXHJcbiAgICAgIHNob3dCdXR0b25zOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIC8vIOaooeWei+iHquWKqOWkjeWItuWIsOWJqui0tOadv1xyXG4gICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwicHJvY2Vzc0VkaXRvci5jb3BpZWRcIikpO1xyXG4gICAgdGhpcy5jb3B5KHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkNvbnZlcnRUb0pzb24oKSk7XHJcbiAgICB0aGlzLm1vZGFsU2VydmljZS5zaG93KHRoaXMuZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkNvbnZlcnRUb0pzb24oKSwgbW9kYWxDb25maWcpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDlt6blj7Pmi5bliqjlkI7kuovku7bvvIxldmVudC5zaXplLndpZHRo5piv5bem5L6n6Z2i5p2/55qE5a695bqmXHJcbiAgICovXHJcbiAgcnpTdG9wKGV2ZW50KSB7XHJcbiAgICB0aGlzLnBhbmVsV2lkdGggPSBldmVudC5zaXplLndpZHRoO1xyXG5cclxuICAgIHRoaXMuZWRpdG9yVWkgJiYgdGhpcy5lZGl0b3JVaS5ncmFwaC5yZWZyZXNoKCk7XHJcbiAgfVxyXG5cclxuICAvLyDlsZXnpLrooajljZXpqozor4Hnu4Tku7bvvIznlKjkuo7mnoTku7bmoKHpqoxcclxuICBjcmVhdGVWYWxpZGF0aW9uVGlwcygpIHtcclxuICAgIHRoaXMudmVyaWZ5U2VyLmNsZWFyKCk7XHJcbiAgICB0aGlzLnZlcmlmeUNvbnRhaW5lciA9IHRoaXMudmVyaWZ5U2VyLmNyZWF0ZVZlcmlmeSh7XHJcbiAgICAgIHBhcmVudDogdGhpcy5jb250ZW50RWwsXHJcbiAgICAgIHZlcmlmeUxpc3Q6IHRoaXMuZXJyb3JMaXN0LFxyXG4gICAgICB2ZXJpZnlUeXBlOiB0aGlzLnRhYlR5cGVMaXN0LFxyXG4gICAgICBzaG93TGlzdDogdHJ1ZSxcclxuICAgICAgc2hvd1R5cGU6ICdwcm9jZXNzV2FybmluZycsXHJcbiAgICAgIHZlcmlmeVJlc3VsdFRpcHNUbXBsOiB0aGlzLnRpcHNUbXBsIC8vIOaPkOekuuaooeadv1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmxpc3RjbGljayA9IHRoaXMudmVyaWZ5Q29udGFpbmVyLnZhbGlkYXRvckNsaWNrLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2hvd2NoYW5nZSA9IHRoaXMudmVyaWZ5Q29udGFpbmVyLmxpc3RzaG93Q2hhbmdlLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjbGVhclZhbGlkYXRpb25UaXBzKCkge1xyXG4gICAgdGhpcy5lcnJvckxpc3QgPSBbXTtcclxuICAgIGlmICh0aGlzLnZlcmlmeVNlcikge1xyXG4gICAgICB0aGlzLnZlcmlmeVNlci5jbGVhcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29weSh0ZXh0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcclxuICAgIGVsLnNldEF0dHJpYnV0ZSgndmFsdWUnLCB0ZXh0KVxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbClcclxuICAgIGVsLnNlbGVjdCgpXHJcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpXHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKVxyXG4gIH1cclxufVxyXG4iXX0=