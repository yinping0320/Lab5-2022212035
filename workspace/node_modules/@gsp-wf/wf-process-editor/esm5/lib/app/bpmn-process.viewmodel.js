/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { ProcessDesignerUIState } from './process-designer.uistate';
import { EntryFormEditorComponent, FlowFormConverter } from '../views/entryForm/entry-form-editor.component';
import { ActivityComponentComponent, ActivityComponentConverter } from '../views/activity-component/activity-component.component';
import { ExecuteFormsComponent, ExecuteFormsConverter } from '../views/execute-forms/execute-forms.component';
import { TitleExpressionComponent, TitleExpressionConverter } from '../views/title-expression/title-expression.component';
import { CustomizeActionComponent, CustomizeActionConverter } from '../views/customize-action/customize-action.component';
import { ProcessVariablesComponent, ProcessVariablesConverter } from '../views/process-variables/process-variables.component';
import { TimeLimitControlComponent, TimeLimitControlConverter } from '../views/time-limit-control/time-limit-control.component';
import { MessageNoticeComponent, MessageNoticeConverter } from '../views/message-notice/message-notice.component';
import { ExtendPropertyComponent, ExtendPropertyConverter } from '../views/extend-property/extend-property.component';
import { ImageSetComponent, ImageSetConverter } from '../views/image-set/image-set.component';
import { StartConditionComponent, StartConditionConverter } from '../views/start-condition/start-condition.component';
import { ProcessPropertyKeys } from '../designer/wf-cell/property-keys/ProcessPropertyKeys';
import { WfLocalePipe } from '../i18n/pipe/wf-process-editor-locale.pipe';
var BpmnProcessViewModel = /** @class */ (function () {
    function BpmnProcessViewModel(uiState, localPipe) {
        this.uiState = uiState;
        this.localPipe = localPipe;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessProperty = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        this.uiState.propertyData = obj.propertyData;
        this.uiState.ProcessVariables = this.uiState.propertyData[ProcessPropertyKeys.processVariables];
        this.uiState.propertyConfig = this.setProcessConfig(obj.propertyConfig);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessConfig = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        /** @type {?} */
        var propertyConfig = [];
        if (obj) {
            obj.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.setProcessEntity(element.properties);
                propertyConfig.push(element);
            }));
        }
        return propertyConfig;
    };
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    BpmnProcessViewModel.prototype.setProcessEntity = /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        if (obj.length > 0) {
            obj.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                switch (item.propertyID) {
                    case ProcessPropertyKeys.Key: // 标识
                        break;
                    case ProcessPropertyKeys.EntryForm: // 流程分类
                        item.editor = EntryFormEditorComponent;
                        item.converter = new FlowFormConverter();
                        // item.editorParams = {
                        //     flowForms: [this.uiState.flowFormInfo.flowForm]
                        // };
                        break;
                    case ProcessPropertyKeys.wf_Component:
                        item.editor = ActivityComponentComponent;
                        item.converter = new ActivityComponentConverter(_this.localPipe);
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    case ProcessPropertyKeys.wf_ExecuteForms_PC:
                        item.editor = ExecuteFormsComponent;
                        /** @type {?} */
                        var params = {
                            location: 'process',
                            tab: 'web'
                        };
                        item.converter = new ExecuteFormsConverter(params, _this.localPipe);
                        item.editorParams = params;
                        break;
                    case ProcessPropertyKeys.wf_ExecuteForms_Mobile:
                        item.editor = ExecuteFormsComponent;
                        /** @type {?} */
                        var editorParams = {
                            location: 'process',
                            tab: 'mobile'
                        };
                        item.converter = new ExecuteFormsConverter(editorParams, _this.localPipe);
                        item.editorParams = editorParams;
                        break;
                    case ProcessPropertyKeys.wf_TitleExpression:
                        item.editor = TitleExpressionComponent;
                        item.converter = new TitleExpressionConverter(_this.localPipe);
                        break;
                    case ProcessPropertyKeys.allowPreAssign:
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ProcessPropertyKeys.enablePriority:
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ProcessPropertyKeys.enableWholeOrderRetrieve:
                        item.iterator = _this.uiState.boolIterator;
                        break;
                    case ProcessPropertyKeys.startMode:
                        item.iterator = _this.uiState.startModeIterator;
                        break;
                    case ProcessPropertyKeys.DisplayTerminal:
                        item.iterator = _this.uiState.displayTerminal;
                        break;
                    case ProcessPropertyKeys.wf_CustomizeAction:
                        item.editor = CustomizeActionComponent;
                        item.converter = new CustomizeActionConverter(_this.localPipe);
                        break;
                    case ProcessPropertyKeys.processVariables:
                        item.editor = ProcessVariablesComponent;
                        item.converter = new ProcessVariablesConverter(_this.localPipe);
                        break;
                    case ProcessPropertyKeys.timeLimitControl:
                        item.editor = TimeLimitControlComponent;
                        item.converter = new TimeLimitControlConverter(_this.localPipe);
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    case ProcessPropertyKeys.messageNotice:
                        item.editor = MessageNoticeComponent;
                        item.converter = new MessageNoticeConverter(_this.localPipe);
                        item.editorParams = {
                            location: 'process'
                        };
                        break;
                    case ProcessPropertyKeys.imageSettings:
                        item.editor = ImageSetComponent;
                        item.converter = new ImageSetConverter(_this.localPipe);
                        break;
                    case ProcessPropertyKeys.StartCondition:
                        item.editor = StartConditionComponent;
                        item.editorParams = {};
                        item.converter = new StartConditionConverter();
                        break;
                    default:
                        item.editor = ExtendPropertyComponent;
                        item.converter = new ExtendPropertyConverter(_this.localPipe);
                        break;
                }
            }));
        }
    };
    BpmnProcessViewModel.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    BpmnProcessViewModel.ctorParameters = function () { return [
        { type: ProcessDesignerUIState },
        { type: WfLocalePipe }
    ]; };
    return BpmnProcessViewModel;
}());
export { BpmnProcessViewModel };
if (false) {
    /**
     * @type {?}
     * @private
     */
    BpmnProcessViewModel.prototype.uiState;
    /**
     * @type {?}
     * @private
     */
    BpmnProcessViewModel.prototype.localPipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnBtbi1wcm9jZXNzLnZpZXdtb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvYXBwL2JwbW4tcHJvY2Vzcy52aWV3bW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFcEUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDN0csT0FBTyxFQUNMLDBCQUEwQixFQUMxQiwwQkFBMEIsRUFDM0IsTUFBTSwwREFBMEQsQ0FBQztBQUNsRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUM5RyxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQUMxSCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQUMxSCxPQUFPLEVBQ0wseUJBQXlCLEVBQ3pCLHlCQUF5QixFQUMxQixNQUFNLHdEQUF3RCxDQUFDO0FBQ2hFLE9BQU8sRUFDTCx5QkFBeUIsRUFDekIseUJBQXlCLEVBQzFCLE1BQU0sMERBQTBELENBQUM7QUFDbEUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDbEgsT0FBTyxFQUFFLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFDdEgsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGlCQUFpQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDOUYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFDdEgsT0FBTyxF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U0FBUyxHQUFHLElBQUksdUJBQXVCLENBQUMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUM3RCxNQUFNO2lCQUNUO1lBQ0gsQ0FBQyxFQUFDLENBQUM7U0FDSjtJQUNILENBQUM7O2dCQXpIRixVQUFVOzs7O2dCQXpCRixzQkFBc0I7Z0JBdUJ0QixZQUFZOztJQTRIckIsMkJBQUM7Q0FBQSxBQTFIRCxJQTBIQztTQXhIWSxvQkFBb0I7Ozs7OztJQUU3Qix1Q0FBdUM7Ozs7O0lBQ3ZDLHlDQUErQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUHJvY2Vzc0Rlc2lnbmVyVUlTdGF0ZSB9IGZyb20gJy4vcHJvY2Vzcy1kZXNpZ25lci51aXN0YXRlJztcclxuaW1wb3J0IHsgUHJvcGVydHlFbnRpdHksIEVsZW1lbnRQcm9wZXJ0eUNvbmZpZyB9IGZyb20gJ0BmYXJyaXMvaWRlLXByb3BlcnR5LXBhbmVsJztcclxuaW1wb3J0IHsgRW50cnlGb3JtRWRpdG9yQ29tcG9uZW50LCBGbG93Rm9ybUNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL2VudHJ5Rm9ybS9lbnRyeS1mb3JtLWVkaXRvci5jb21wb25lbnQnO1xyXG5pbXBvcnQge1xyXG4gIEFjdGl2aXR5Q29tcG9uZW50Q29tcG9uZW50LFxyXG4gIEFjdGl2aXR5Q29tcG9uZW50Q29udmVydGVyXHJcbn0gZnJvbSAnLi4vdmlld3MvYWN0aXZpdHktY29tcG9uZW50L2FjdGl2aXR5LWNvbXBvbmVudC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFeGVjdXRlRm9ybXNDb21wb25lbnQsIEV4ZWN1dGVGb3Jtc0NvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL2V4ZWN1dGUtZm9ybXMvZXhlY3V0ZS1mb3Jtcy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBUaXRsZUV4cHJlc3Npb25Db21wb25lbnQsIFRpdGxlRXhwcmVzc2lvbkNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL3RpdGxlLWV4cHJlc3Npb24vdGl0bGUtZXhwcmVzc2lvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDdXN0b21pemVBY3Rpb25Db21wb25lbnQsIEN1c3RvbWl6ZUFjdGlvbkNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL2N1c3RvbWl6ZS1hY3Rpb24vY3VzdG9taXplLWFjdGlvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQge1xyXG4gIFByb2Nlc3NWYXJpYWJsZXNDb21wb25lbnQsXHJcbiAgUHJvY2Vzc1ZhcmlhYmxlc0NvbnZlcnRlclxyXG59IGZyb20gJy4uL3ZpZXdzL3Byb2Nlc3MtdmFyaWFibGVzL3Byb2Nlc3MtdmFyaWFibGVzLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7XHJcbiAgVGltZUxpbWl0Q29udHJvbENvbXBvbmVudCxcclxuICBUaW1lTGltaXRDb250cm9sQ29udmVydGVyXHJcbn0gZnJvbSAnLi4vdmlld3MvdGltZS1saW1pdC1jb250cm9sL3RpbWUtbGltaXQtY29udHJvbC5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlTm90aWNlQ29tcG9uZW50LCBNZXNzYWdlTm90aWNlQ29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvbWVzc2FnZS1ub3RpY2UvbWVzc2FnZS1ub3RpY2UuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXh0ZW5kUHJvcGVydHlDb21wb25lbnQsIEV4dGVuZFByb3BlcnR5Q29udmVydGVyIH0gZnJvbSAnLi4vdmlld3MvZXh0ZW5kLXByb3BlcnR5L2V4dGVuZC1wcm9wZXJ0eS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBJbWFnZVNldENvbXBvbmVudCwgSW1hZ2VTZXRDb252ZXJ0ZXIgfSBmcm9tICcuLi92aWV3cy9pbWFnZS1zZXQvaW1hZ2Utc2V0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFN0YXJ0Q29uZGl0aW9uQ29tcG9uZW50LCBTdGFydENvbmRpdGlvbkNvbnZlcnRlciB9IGZyb20gJy4uL3ZpZXdzL3N0YXJ0LWNvbmRpdGlvbi9zdGFydC1jb25kaXRpb24uY29tcG9uZW50JztcclxuaW1wb3J0IHsgUHJvY2Vzc1Byb3BlcnR5S2V5cyB9IGZyb20gJy4uL2Rlc2lnbmVyL3dmLWNlbGwvcHJvcGVydHkta2V5cy9Qcm9jZXNzUHJvcGVydHlLZXlzJztcclxuaW1wb3J0IHsgV2ZMb2NhbGVQaXBlIH0gZnJvbSAnLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuXHJcbmV4cG9ydCBjbGFzcyBCcG1uUHJvY2Vzc1ZpZXdNb2RlbCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHVpU3RhdGU6IFByb2Nlc3NEZXNpZ25lclVJU3RhdGUsXHJcbiAgICBwcml2YXRlIGxvY2FsUGlwZTogV2ZMb2NhbGVQaXBlXHJcbiAgKSB7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9jZXNzUHJvcGVydHkob2JqOiBhbnkpIHtcclxuICAgIHRoaXMudWlTdGF0ZS5wcm9wZXJ0eURhdGEgPSBvYmoucHJvcGVydHlEYXRhO1xyXG4gICAgdGhpcy51aVN0YXRlLlByb2Nlc3NWYXJpYWJsZXMgPSB0aGlzLnVpU3RhdGUucHJvcGVydHlEYXRhW1Byb2Nlc3NQcm9wZXJ0eUtleXMucHJvY2Vzc1ZhcmlhYmxlc107XHJcbiAgICB0aGlzLnVpU3RhdGUucHJvcGVydHlDb25maWcgPSB0aGlzLnNldFByb2Nlc3NDb25maWcob2JqLnByb3BlcnR5Q29uZmlnKTtcclxuICB9XHJcblxyXG4gIHNldFByb2Nlc3NDb25maWcob2JqOiBhbnlbXSk6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZ1tdIHtcclxuICAgIGNvbnN0IHByb3BlcnR5Q29uZmlnOiBFbGVtZW50UHJvcGVydHlDb25maWdbXSA9IFtdO1xyXG4gICAgaWYgKG9iaikge1xyXG4gICAgICBvYmouZm9yRWFjaCgoZWxlbWVudDogRWxlbWVudFByb3BlcnR5Q29uZmlnKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRQcm9jZXNzRW50aXR5KGVsZW1lbnQucHJvcGVydGllcyk7XHJcbiAgICAgICAgcHJvcGVydHlDb25maWcucHVzaChlbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvcGVydHlDb25maWc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFByb2Nlc3NFbnRpdHkob2JqOiBQcm9wZXJ0eUVudGl0eVtdKSB7XHJcbiAgICBpZiAob2JqLmxlbmd0aCA+IDApIHtcclxuICAgICAgb2JqLmZvckVhY2goKGl0ZW06IFByb3BlcnR5RW50aXR5KSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChpdGVtLnByb3BlcnR5SUQpIHtcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5LZXk6IC8vIOagh+ivhlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5FbnRyeUZvcm06IC8vIOa1geeoi+WIhuexu1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEVudHJ5Rm9ybUVkaXRvckNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRmxvd0Zvcm1Db252ZXJ0ZXIoKTtcclxuICAgICAgICAgICAgLy8gaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIC8vICAgICBmbG93Rm9ybXM6IFt0aGlzLnVpU3RhdGUuZmxvd0Zvcm1JbmZvLmZsb3dGb3JtXVxyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9Db21wb25lbnQ6XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gQWN0aXZpdHlDb21wb25lbnRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IEFjdGl2aXR5Q29tcG9uZW50Q29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdwcm9jZXNzJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfUEM6XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gRXhlY3V0ZUZvcm1zQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdwcm9jZXNzJyxcclxuICAgICAgICAgICAgICB0YWI6ICd3ZWInXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKHBhcmFtcywgdGhpcy5sb2NhbFBpcGUpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMud2ZfRXhlY3V0ZUZvcm1zX01vYmlsZTpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBFeGVjdXRlRm9ybXNDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvclBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ3Byb2Nlc3MnLFxyXG4gICAgICAgICAgICAgIHRhYjogJ21vYmlsZSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXhlY3V0ZUZvcm1zQ29udmVydGVyKGVkaXRvclBhcmFtcywgdGhpcy5sb2NhbFBpcGUpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IGVkaXRvclBhcmFtcztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMud2ZfVGl0bGVFeHByZXNzaW9uOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IFRpdGxlRXhwcmVzc2lvbkNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgVGl0bGVFeHByZXNzaW9uQ29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMuYWxsb3dQcmVBc3NpZ246XHJcbiAgICAgICAgICAgIGl0ZW0uaXRlcmF0b3IgPSB0aGlzLnVpU3RhdGUuYm9vbEl0ZXJhdG9yO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5lbmFibGVQcmlvcml0eTpcclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5ib29sSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBQcm9jZXNzUHJvcGVydHlLZXlzLmVuYWJsZVdob2xlT3JkZXJSZXRyaWV2ZTpcclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5ib29sSXRlcmF0b3I7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBQcm9jZXNzUHJvcGVydHlLZXlzLnN0YXJ0TW9kZTpcclxuICAgICAgICAgICAgaXRlbS5pdGVyYXRvciA9IHRoaXMudWlTdGF0ZS5zdGFydE1vZGVJdGVyYXRvcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMuRGlzcGxheVRlcm1pbmFsOlxyXG4gICAgICAgICAgICBpdGVtLml0ZXJhdG9yID0gdGhpcy51aVN0YXRlLmRpc3BsYXlUZXJtaW5hbDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMud2ZfQ3VzdG9taXplQWN0aW9uOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IEN1c3RvbWl6ZUFjdGlvbkNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgQ3VzdG9taXplQWN0aW9uQ29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMucHJvY2Vzc1ZhcmlhYmxlczpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBQcm9jZXNzVmFyaWFibGVzQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBQcm9jZXNzVmFyaWFibGVzQ29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMudGltZUxpbWl0Q29udHJvbDpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBUaW1lTGltaXRDb250cm9sQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpdGVtLmNvbnZlcnRlciA9IG5ldyBUaW1lTGltaXRDb250cm9sQ29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3JQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb246ICdwcm9jZXNzJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgUHJvY2Vzc1Byb3BlcnR5S2V5cy5tZXNzYWdlTm90aWNlOlxyXG4gICAgICAgICAgICBpdGVtLmVkaXRvciA9IE1lc3NhZ2VOb3RpY2VDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IE1lc3NhZ2VOb3RpY2VDb252ZXJ0ZXIodGhpcy5sb2NhbFBpcGUpO1xyXG4gICAgICAgICAgICBpdGVtLmVkaXRvclBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ3Byb2Nlc3MnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBQcm9jZXNzUHJvcGVydHlLZXlzLmltYWdlU2V0dGluZ3M6XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gSW1hZ2VTZXRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IEltYWdlU2V0Q29udmVydGVyKHRoaXMubG9jYWxQaXBlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFByb2Nlc3NQcm9wZXJ0eUtleXMuU3RhcnRDb25kaXRpb246XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yID0gU3RhcnRDb25kaXRpb25Db21wb25lbnQ7XHJcbiAgICAgICAgICAgIGl0ZW0uZWRpdG9yUGFyYW1zID0ge307XHJcbiAgICAgICAgICAgIGl0ZW0uY29udmVydGVyID0gbmV3IFN0YXJ0Q29uZGl0aW9uQ29udmVydGVyKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgaXRlbS5lZGl0b3IgPSBFeHRlbmRQcm9wZXJ0eUNvbXBvbmVudDtcclxuICAgICAgICAgICAgaXRlbS5jb252ZXJ0ZXIgPSBuZXcgRXh0ZW5kUHJvcGVydHlDb252ZXJ0ZXIodGhpcy5sb2NhbFBpcGUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=