/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Graph } from "@edp-pmf/grapheditor";
import { FlowNodeState } from "@edp-pmf/bpmn-model";
import { mxConstants, mxUtils } from "@edp-pmf/mxgraph-ts";
import { WfProcessCell } from "./wf-cell/WfProcessCell";
/**
 * 工作流画布类
 */
var /**
 * 工作流画布类
 */
WfGraph = /** @class */ (function (_super) {
    tslib_1.__extends(WfGraph, _super);
    function WfGraph(editorUi, container, model, renderHint, stylesheet, themes) {
        var _this = _super.call(this, editorUi, container, model, renderHint, stylesheet, themes) || this;
        _this.localePipe = null;
        /**
         * 流程元素实例
         */
        _this.processCell = new WfProcessCell();
        return _this;
    }
    /**
     * @param {?} cells
     * @param {?} sender
     * @param {?} eventObject
     * @return {?}
     */
    WfGraph.prototype.bpmnCellsSelectionChanged = /**
     * @param {?} cells
     * @param {?} sender
     * @param {?} eventObject
     * @return {?}
     */
    function (cells, sender, eventObject) {
        var _this = this;
        _super.prototype.bpmnCellsSelectionChanged.call(this, cells, sender, eventObject);
        // 修改选中节点样式
        /** @type {?} */
        var selected = (/** @type {?} */ (this.getSelectionCells()));
        /** @type {?} */
        var all = (/** @type {?} */ (this.getChildVertices(this.getDefaultParent())));
        all.forEach((/**
         * @param {?} c
         * @return {?}
         */
        function (c) {
            if (selected.includes(c) && c.imgUrls && c.imgUrls[FlowNodeState.Selected]) {
                c.setStyle(mxUtils.setStyle(c.getStyle(), mxConstants.STYLE_IMAGE, c.imgUrls[FlowNodeState.Selected]));
            }
            else {
                c.setStyle(mxUtils.setStyle(c.getStyle(), mxConstants.STYLE_IMAGE, c.imgUrls[FlowNodeState.Default]));
            }
            _this.refresh(c);
        }));
    };
    /**
     * 重写创建流程元素实例方法
     * @param bpmnModel
     * @returns
     */
    /**
     * 重写创建流程元素实例方法
     * @param {?} bpmnModel
     * @return {?}
     */
    WfGraph.prototype.createProcessCell = /**
     * 重写创建流程元素实例方法
     * @param {?} bpmnModel
     * @return {?}
     */
    function (bpmnModel) {
        /** @type {?} */
        var processCell = new WfProcessCell();
        processCell.process = bpmnModel.DefaultProcess;
        processCell.plane = bpmnModel.DefaultDiagram.BpmnPlane;
        processCell.editorUi = this.editorUi;
        return processCell;
    };
    /**
     * 给定新流程信息创建BpmnModel
     * @param newProcInfo
     * @param bizCmps
     */
    /**
     * 给定新流程信息创建BpmnModel
     * @param {?} newProcInfo
     * @param {?} bizCmps
     * @return {?}
     */
    WfGraph.prototype.createBpmnModelWithProcInfo = /**
     * 给定新流程信息创建BpmnModel
     * @param {?} newProcInfo
     * @param {?} bizCmps
     * @return {?}
     */
    function (newProcInfo, bizCmps) {
        var _a;
        /** @type {?} */
        var bpmnModel = this.createBpmnModel();
        this.bpmnModel = bpmnModel;
        this.processCell = this.createProcessCell(this.bpmnModel);
        if (this.editorUi.langCode === 'zh-CHS') {
            this.bpmnModel.DefaultProcess.Name = newProcInfo.name || bpmnModel.DefaultProcess.Name;
        }
        this.bpmnModel.DefaultProcess.NameLanguage = (_a = {},
            _a[this.editorUi.langCode] = newProcInfo.name || bpmnModel.DefaultProcess.Name,
            _a);
        //设置流程Header(业务对象ID、流程分类ID)
        this.processCell.setProcessHeader(newProcInfo.ffId, newProcInfo.bizObjId, newProcInfo.ffName, (/** @type {?} */ (newProcInfo.startMode)));
        // 基于流程分类绑定参数，流程构件，流程表单
        this.processCell.updateFlowFormInfo(newProcInfo.formalParameters, newProcInfo.processBizComponnets, newProcInfo.executeForms, newProcInfo.customizeActions, bizCmps);
        this.processCell.modifyProcessTitleExpression(newProcInfo.processDescription);
    };
    /**
     * @return {?}
     */
    WfGraph.prototype.setDefaultStyles = /**
     * @return {?}
     */
    function () {
        _super.prototype.setDefaultStyles.call(this);
        /** @type {?} */
        var styleSheet = this.getStylesheet();
        // 连线样式默认为正交
        /** @type {?} */
        var edgeStyle = styleSheet.getDefaultEdgeStyle();
        edgeStyle[mxConstants.STYLE_ROUNDED] = 1;
    };
    return WfGraph;
}(Graph));
/**
 * 工作流画布类
 */
export { WfGraph };
if (false) {
    /** @type {?} */
    WfGraph.prototype.localePipe;
    /** @type {?} */
    WfGraph.prototype.editorUi;
    /**
     * 流程元素实例
     * @type {?}
     */
    WfGraph.prototype.processCell;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2ZHcmFwaC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvIiwic291cmNlcyI6WyJsaWIvZGVzaWduZXIvV2ZHcmFwaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxLQUFLLEVBQWtCLE1BQU0sc0JBQXNCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBYSxNQUFNLHFCQUFxQixDQUFDO0FBRy9ELE9BQU8sRUFBYSxXQUFXLEVBQUUsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDOzs7O0FBTXhEOzs7O0lBQTZCLG1DQUFLO0lBTzlCLGlCQUFZLFFBQW9CLEVBQUUsU0FBMEIsRUFBRSxLQUE4QixFQUFFLFVBQW9DLEVBQUUsVUFBbUMsRUFBRSxNQUFnQjtRQUF6TCxZQUNJLGtCQUFNLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLFNBQ3BFO1FBUkQsZ0JBQVUsR0FBaUIsSUFBSSxDQUFDOzs7O1FBS2hDLGlCQUFXLEdBQWtCLElBQUksYUFBYSxFQUFFLENBQUM7O0lBR2pELENBQUM7Ozs7Ozs7SUFFRCwyQ0FBeUI7Ozs7OztJQUF6QixVQUEwQixLQUFhLEVBQUUsTUFBK0IsRUFBRSxXQUFvQztRQUE5RyxpQkFhRDtRQVpHLGlCQUFNLHlCQUF5QixZQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7OztZQUV0RCxRQUFRLEdBQUcsbUJBQUEsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEVBQWM7O1lBQ2pELEdBQUcsR0FBRyxtQkFBQSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBYztRQUN4RSxHQUFHLENBQUMsT0FBTzs7OztRQUFDLFVBQUEsQ0FBQztZQUNULElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUN4RSxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzFHO2lCQUFNO2dCQUNILENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDekc7WUFDRCxLQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BCLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQztJQUVDOzs7O09BSUc7Ozs7OztJQUNILG1DQUFpQjs7Ozs7SUFBakIsVUFBa0IsU0FBb0I7O1lBQzVCLFdBQVcsR0FBRyxJQUFJLGFBQWEsRUFBRTtRQUN2QyxXQUFXLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxjQUFjLENBQUM7UUFDL0MsV0FBVyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQztRQUN2RCxXQUFXLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDckMsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCw2Q0FBMkI7Ozs7OztJQUEzQixVQUE0QixXQUFnQixFQUFFLE9BQVk7OztZQUNoRCxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRTtRQUN4QyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUQsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQUU7WUFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQyxJQUFJLElBQUksU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUM7U0FDeEY7UUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxZQUFZO1lBQ3hDLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUcsV0FBVyxDQUFDLElBQUksSUFBSSxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUk7ZUFDNUUsQ0FBQTtRQUNELDJCQUEyQjtRQUMzQixJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsTUFBTSxFQUFFLG1CQUFBLFdBQVcsQ0FBQyxTQUFTLEVBQWEsQ0FBQyxDQUFDO1FBRWxJLHVCQUF1QjtRQUN2QixJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLENBQUMsb0JBQW9CLEVBQUUsV0FBVyxDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDckssSUFBSSxDQUFDLFdBQVcsQ0FBQyw0QkFBNEIsQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNsRixDQUFDOzs7O0lBQ0Qsa0NBQWdCOzs7SUFBaEI7UUFDRSxpQkFBTSxnQkFBZ0IsV0FBRSxDQUFDOztZQUVuQixVQUFVLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRTs7O1lBRWpDLFNBQVMsR0FBRyxVQUFVLENBQUMsbUJBQW1CLEVBQUU7UUFDbEQsU0FBUyxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUNILGNBQUM7QUFBRCxDQUFDLEFBckVELENBQTZCLEtBQUssR0FxRWpDOzs7Ozs7O0lBcEVHLDZCQUFnQzs7SUFDaEMsMkJBQXFCOzs7OztJQUlyQiw4QkFBaUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHcmFwaCwgQ2VsbCwgTm9kZUNlbGwgfSBmcm9tIFwiQGVkcC1wbWYvZ3JhcGhlZGl0b3JcIjtcclxuaW1wb3J0IHsgRmxvd05vZGVTdGF0ZSwgQnBtbk1vZGVsIH0gZnJvbSBcIkBlZHAtcG1mL2JwbW4tbW9kZWxcIjtcclxuaW1wb3J0IHsgU3RhcnRNb2RlIH0gZnJvbSBcIkBnc3Atd2Yvd2YtcHJvY2Vzcy1tb2RlbFwiO1xyXG5pbXBvcnQgeyBXZkVkaXRvclVpIH0gZnJvbSBcIi4vV2ZFZGl0b3JVaVwiO1xyXG5pbXBvcnQgeyBNeEdyYXBoTlMsIG14Q29uc3RhbnRzLCBteFV0aWxzIH0gZnJvbSBcIkBlZHAtcG1mL214Z3JhcGgtdHNcIjtcclxuaW1wb3J0IHsgV2ZQcm9jZXNzQ2VsbCB9IGZyb20gXCIuL3dmLWNlbGwvV2ZQcm9jZXNzQ2VsbFwiO1xyXG5pbXBvcnQgeyBXZkxvY2FsZVBpcGUgfSBmcm9tIFwiLi4vaTE4bi9waXBlL3dmLXByb2Nlc3MtZWRpdG9yLWxvY2FsZS5waXBlXCI7XHJcblxyXG4vKipcclxuICog5bel5L2c5rWB55S75biD57G7XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgV2ZHcmFwaCBleHRlbmRzIEdyYXBoIHtcclxuICAgIGxvY2FsZVBpcGU6IFdmTG9jYWxlUGlwZSA9IG51bGw7XHJcbiAgICBlZGl0b3JVaTogV2ZFZGl0b3JVaTtcclxuICAgIC8qKlxyXG4gICAgICog5rWB56iL5YWD57Sg5a6e5L6LXHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NDZWxsOiBXZlByb2Nlc3NDZWxsID0gbmV3IFdmUHJvY2Vzc0NlbGwoKTtcclxuICAgIGNvbnN0cnVjdG9yKGVkaXRvclVpOiBXZkVkaXRvclVpLCBjb250YWluZXI/OiBIVE1MRGl2RWxlbWVudCwgbW9kZWw/OiBNeEdyYXBoTlMubXhHcmFwaE1vZGVsLCByZW5kZXJIaW50PzogTXhHcmFwaE5TLnJlbmRlcmluZ0hpbnQsIHN0eWxlc2hlZXQ/OiBNeEdyYXBoTlMubXhTdHlsZXNoZWV0LCB0aGVtZXM/OiBFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoZWRpdG9yVWksIGNvbnRhaW5lciwgbW9kZWwsIHJlbmRlckhpbnQsIHN0eWxlc2hlZXQsIHRoZW1lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYnBtbkNlbGxzU2VsZWN0aW9uQ2hhbmdlZChjZWxsczogQ2VsbFtdLCBzZW5kZXI6IE14R3JhcGhOUy5teEV2ZW50U291cmNlLCBldmVudE9iamVjdDogTXhHcmFwaE5TLm14RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgc3VwZXIuYnBtbkNlbGxzU2VsZWN0aW9uQ2hhbmdlZChjZWxscywgc2VuZGVyLCBldmVudE9iamVjdCk7XHJcbiAgICAgIC8vIOS/ruaUuemAieS4reiKgueCueagt+W8j1xyXG4gICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0U2VsZWN0aW9uQ2VsbHMoKSBhcyBOb2RlQ2VsbFtdO1xyXG4gICAgICBjb25zdCBhbGwgPSB0aGlzLmdldENoaWxkVmVydGljZXModGhpcy5nZXREZWZhdWx0UGFyZW50KCkpIGFzIE5vZGVDZWxsW107XHJcbiAgICAgIGFsbC5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkLmluY2x1ZGVzKGMpICYmIGMuaW1nVXJscyAmJiBjLmltZ1VybHNbRmxvd05vZGVTdGF0ZS5TZWxlY3RlZF0pIHtcclxuICAgICAgICAgICAgICBjLnNldFN0eWxlKG14VXRpbHMuc2V0U3R5bGUoYy5nZXRTdHlsZSgpLCBteENvbnN0YW50cy5TVFlMRV9JTUFHRSwgYy5pbWdVcmxzW0Zsb3dOb2RlU3RhdGUuU2VsZWN0ZWRdKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGMuc2V0U3R5bGUobXhVdGlscy5zZXRTdHlsZShjLmdldFN0eWxlKCksIG14Q29uc3RhbnRzLlNUWUxFX0lNQUdFLCBjLmltZ1VybHNbRmxvd05vZGVTdGF0ZS5EZWZhdWx0XSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5yZWZyZXNoKGMpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDph43lhpnliJvlu7rmtYHnqIvlhYPntKDlrp7kvovmlrnms5VcclxuICAgICAqIEBwYXJhbSBicG1uTW9kZWxcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZVByb2Nlc3NDZWxsKGJwbW5Nb2RlbDogQnBtbk1vZGVsKSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc0NlbGwgPSBuZXcgV2ZQcm9jZXNzQ2VsbCgpO1xyXG4gICAgICAgIHByb2Nlc3NDZWxsLnByb2Nlc3MgPSBicG1uTW9kZWwuRGVmYXVsdFByb2Nlc3M7XHJcbiAgICAgICAgcHJvY2Vzc0NlbGwucGxhbmUgPSBicG1uTW9kZWwuRGVmYXVsdERpYWdyYW0uQnBtblBsYW5lO1xyXG4gICAgICAgIHByb2Nlc3NDZWxsLmVkaXRvclVpID0gdGhpcy5lZGl0b3JVaTtcclxuICAgICAgICByZXR1cm4gcHJvY2Vzc0NlbGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5nlrprmlrDmtYHnqIvkv6Hmga/liJvlu7pCcG1uTW9kZWxcclxuICAgICAqIEBwYXJhbSBuZXdQcm9jSW5mb1xyXG4gICAgICogQHBhcmFtIGJpekNtcHNcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQnBtbk1vZGVsV2l0aFByb2NJbmZvKG5ld1Byb2NJbmZvOiBhbnksIGJpekNtcHM6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGJwbW5Nb2RlbCA9IHRoaXMuY3JlYXRlQnBtbk1vZGVsKCk7XHJcbiAgICAgICAgdGhpcy5icG1uTW9kZWwgPSBicG1uTW9kZWw7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzQ2VsbCA9IHRoaXMuY3JlYXRlUHJvY2Vzc0NlbGwodGhpcy5icG1uTW9kZWwpO1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRvclVpLmxhbmdDb2RlID09PSAnemgtQ0hTJykge1xyXG4gICAgICAgICAgdGhpcy5icG1uTW9kZWwuRGVmYXVsdFByb2Nlc3MuTmFtZSA9IG5ld1Byb2NJbmZvLm5hbWUgfHwgYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLk5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLk5hbWVMYW5ndWFnZSA9IHtcclxuICAgICAgICAgIFt0aGlzLmVkaXRvclVpLmxhbmdDb2RlXTogbmV3UHJvY0luZm8ubmFtZSB8fCBicG1uTW9kZWwuRGVmYXVsdFByb2Nlc3MuTmFtZSxcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/orr7nva7mtYHnqItIZWFkZXIo5Lia5Yqh5a+56LGhSUTjgIHmtYHnqIvliIbnsbtJRClcclxuICAgICAgICB0aGlzLnByb2Nlc3NDZWxsLnNldFByb2Nlc3NIZWFkZXIobmV3UHJvY0luZm8uZmZJZCwgbmV3UHJvY0luZm8uYml6T2JqSWQsIG5ld1Byb2NJbmZvLmZmTmFtZSwgbmV3UHJvY0luZm8uc3RhcnRNb2RlIGFzIFN0YXJ0TW9kZSk7XHJcblxyXG4gICAgICAgIC8vIOWfuuS6jua1geeoi+WIhuexu+e7keWumuWPguaVsO+8jOa1geeoi+aehOS7tu+8jOa1geeoi+ihqOWNlVxyXG4gICAgICAgIHRoaXMucHJvY2Vzc0NlbGwudXBkYXRlRmxvd0Zvcm1JbmZvKG5ld1Byb2NJbmZvLmZvcm1hbFBhcmFtZXRlcnMsIG5ld1Byb2NJbmZvLnByb2Nlc3NCaXpDb21wb25uZXRzLCBuZXdQcm9jSW5mby5leGVjdXRlRm9ybXMsIG5ld1Byb2NJbmZvLmN1c3RvbWl6ZUFjdGlvbnMsIGJpekNtcHMpO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc0NlbGwubW9kaWZ5UHJvY2Vzc1RpdGxlRXhwcmVzc2lvbihuZXdQcm9jSW5mby5wcm9jZXNzRGVzY3JpcHRpb24pO1xyXG4gICAgfVxyXG4gICAgc2V0RGVmYXVsdFN0eWxlcygpOiB2b2lkIHtcclxuICAgICAgc3VwZXIuc2V0RGVmYXVsdFN0eWxlcygpO1xyXG5cclxuICAgICAgY29uc3Qgc3R5bGVTaGVldCA9IHRoaXMuZ2V0U3R5bGVzaGVldCgpO1xyXG4gICAgICAvLyDov57nur/moLflvI/pu5jorqTkuLrmraPkuqRcclxuICAgICAgY29uc3QgZWRnZVN0eWxlID0gc3R5bGVTaGVldC5nZXREZWZhdWx0RWRnZVN0eWxlKCk7XHJcbiAgICAgIGVkZ2VTdHlsZVtteENvbnN0YW50cy5TVFlMRV9ST1VOREVEXSA9IDE7XHJcbiAgfVxyXG59XHJcbiJdfQ==