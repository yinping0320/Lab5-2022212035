/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { DataType, DataTypes, DataObject } from "@edp-pmf/bpmn-model";
import { ValuedDataObject, VariableParticipantExpression, ComponentParticipantExpression, ReportingLineParticipantExpression, MatrixParticipantExpression, OrganizationParticipantExpression, VariableSetting, Component, ActivityExecutorParticipantExpression, UserParticipantExpression, PositionParticipantExpression } from "@gsp-wf/wf-process-model";
import { BizComponent } from "../entity/BizComponent";
import { BizParameter } from "../entity/BizParameter";
import { UserParticipant } from "../entity/UserParticipant";
import { VariablePerformer } from "../entity/VariablePerformer";
import { PositionParticipant } from "../entity/PositionParticipant";
import { ComponentParticipant } from "../entity/ComponentParticipant";
import { ReportingLineParticipant } from "../entity/ReportingLineParticipant";
import { ActivityExecutorParticipant } from "../entity/ActivityExecutorParticipant";
import { MatrixParticipant } from "../entity/MatrixParticipant";
import { OrganizationParticipant } from "../entity/OrganizationParticipant";
import { ActionScope } from "../entity/ActionScope";
import { MessageReceiver } from "../entity/MessageReceiver";
import { WfDesignerUtils } from "../WfDesignerUtils";
import { mxResources } from "@edp-pmf/mxgraph-ts";
import { ActionOrganizationScope, OrganizationPotentialOwner } from "../../views/organization-potential-owner/actionOrganizationScope";
import { ParticipantInfo } from "../../views/participant/participant.info";
/**
 * 属性工具
 */
var /**
 * 属性工具
 */
PropertyHelper = /** @class */ (function () {
    function PropertyHelper() {
    }
    /**
     * 获取变量赋值列表
     * @param bpmnModel
     * @param variablesSetting
     * @returns
     */
    /**
     * 获取变量赋值列表
     * @param {?} bpmnModel
     * @param {?} variablesSetting
     * @return {?}
     */
    PropertyHelper.getVariableSettings = /**
     * 获取变量赋值列表
     * @param {?} bpmnModel
     * @param {?} variablesSetting
     * @return {?}
     */
    function (bpmnModel, variablesSetting) {
        var e_1, _a, e_2, _b, e_3, _c;
        /** @type {?} */
        var variables = new Array();
        /** @type {?} */
        var extendElements = bpmnModel.DefaultProcess.GetExtensionElements();
        if (variablesSetting && variablesSetting.length > 0) {
            try {
                for (var variablesSetting_1 = tslib_1.__values(variablesSetting), variablesSetting_1_1 = variablesSetting_1.next(); !variablesSetting_1_1.done; variablesSetting_1_1 = variablesSetting_1.next()) {
                    var v = variablesSetting_1_1.value;
                    /** @type {?} */
                    var variable = {
                        variableCode: v.variableCode,
                        variableName: v.variableName,
                        tag: v.tag,
                        executionTime: v.executionTime,
                        value: v.value,
                        valueText: v.valueText
                    };
                    if (v.tag === 'component') {
                        if (extendElements.length > 0) {
                            try {
                                for (var extendElements_1 = tslib_1.__values(extendElements), extendElements_1_1 = extendElements_1.next(); !extendElements_1_1.done; extendElements_1_1 = extendElements_1.next()) {
                                    var e = extendElements_1_1.value;
                                    if (e instanceof Component && e.Id === v.value) {
                                        /** @type {?} */
                                        var component = {
                                            Id: e.Id,
                                            Name: e.Name,
                                            MetadataId: e.MetadataId,
                                            MethodCode: e.MethodCode,
                                            ActualParameters: []
                                        };
                                        if (e.ActualParameters && e.ActualParameters.length > 0) {
                                            try {
                                                for (var _d = tslib_1.__values(e.ActualParameters), _e = _d.next(); !_e.done; _e = _d.next()) {
                                                    var p = _e.value;
                                                    /** @type {?} */
                                                    var parameter = {
                                                        Name: p.Name,
                                                        Value: p.Value,
                                                        Tag: p.Tag,
                                                    };
                                                    component.ActualParameters.push(parameter);
                                                }
                                            }
                                            catch (e_3_1) { e_3 = { error: e_3_1 }; }
                                            finally {
                                                try {
                                                    if (_e && !_e.done && (_c = _d.return)) _c.call(_d);
                                                }
                                                finally { if (e_3) throw e_3.error; }
                                            }
                                        }
                                        variable.component = component;
                                    }
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (extendElements_1_1 && !extendElements_1_1.done && (_b = extendElements_1.return)) _b.call(extendElements_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                    }
                    variables.push(variable);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (variablesSetting_1_1 && !variablesSetting_1_1.done && (_a = variablesSetting_1.return)) _a.call(variablesSetting_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        return variables;
    };
    /**
     *
     * @param messageNotices
     * @returns
     */
    /**
     *
     * @param {?} messageNotices
     * @return {?}
     */
    PropertyHelper.getMessageNotices = /**
     *
     * @param {?} messageNotices
     * @return {?}
     */
    function (messageNotices) {
        if (!messageNotices || messageNotices.length == 0) {
            return null;
        }
        return messageNotices.map((/**
         * @param {?} m
         * @return {?}
         */
        function (m) {
            var e_4, _a, e_5, _b;
            /** @type {?} */
            var message = new Object;
            message.content = m.content;
            message.sendTime = m.sendTime;
            message.sendType = m.sendType;
            message.subject = m.subject;
            if (m.smsMessageTemplate) {
                /** @type {?} */
                var smsTemplate = new Object;
                smsTemplate.code = m.smsMessageTemplate.code;
                smsTemplate.content = m.smsMessageTemplate.content;
                smsTemplate.smsMessageVariables = new Array();
                if (m.smsMessageTemplate.smsMessageVariables && m.smsMessageTemplate.smsMessageVariables.length > 0) {
                    try {
                        for (var _c = tslib_1.__values(m.smsMessageTemplate.smsMessageVariables), _d = _c.next(); !_d.done; _d = _c.next()) {
                            var v = _d.value;
                            /** @type {?} */
                            var variable = new Object;
                            variable.id = WfDesignerUtils.createNM();
                            variable.code = v.code;
                            variable.value = v.value;
                            variable.tag = v.tag;
                            smsTemplate.smsMessageVariables.push(variable);
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
                message.smsMessageTemplate = smsTemplate;
            }
            /** @type {?} */
            var receiverExpressions = new Array();
            if (m.receiver) {
                /** @type {?} */
                var receivers = m.receiver.split(',');
                /** @type {?} */
                var receiverTexts = m.receiverText.split(',');
                /** @type {?} */
                var userReceiver = new MessageReceiver();
                userReceiver.type = 'userParticipant';
                userReceiver.userIds = '';
                userReceiver.userNames = '';
                for (var i in receivers) {
                    if (receivers[i] === 'procInstCreator') {
                        /** @type {?} */
                        var procInstCreator = new MessageReceiver();
                        procInstCreator.type = 'processParticipant';
                        procInstCreator.processParticipant = 'procInstCreator';
                        receiverExpressions.push(procInstCreator);
                    }
                    else if (receivers[i] === 'workItemParticipant') {
                        /** @type {?} */
                        var workItemParticipant = new MessageReceiver();
                        workItemParticipant.type = 'processParticipant';
                        workItemParticipant.processParticipant = 'workItemParticipant';
                        receiverExpressions.push(workItemParticipant);
                    }
                    else {
                        userReceiver.userIds += (receivers[i] + ',');
                        userReceiver.userNames += (receiverTexts[i] + ',');
                    }
                }
                if (userReceiver.userIds) {
                    userReceiver.userIds = userReceiver.userIds.substring(0, userReceiver.userIds.length - 1);
                    userReceiver.userNames = userReceiver.userNames.substring(0, userReceiver.userNames.length - 1);
                    receiverExpressions.push(userReceiver);
                }
            }
            if (m.receiverExpressions && m.receiverExpressions.length > 0) {
                try {
                    for (var _e = tslib_1.__values(m.receiverExpressions), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var e = _f.value;
                        if (e instanceof ActivityExecutorParticipantExpression) {
                            /** @type {?} */
                            var activityExecutorParticipant = new MessageReceiver();
                            activityExecutorParticipant.type = 'processParticipant';
                            activityExecutorParticipant.processParticipant = 'activityExecutorParticipant';
                            activityExecutorParticipant.activityDefId = e.activityDefId;
                            activityExecutorParticipant.activityDefName = e.activityDefName;
                            receiverExpressions.push(activityExecutorParticipant);
                        }
                        else if (e instanceof UserParticipantExpression) {
                            /** @type {?} */
                            var variableReceiver = new MessageReceiver();
                            variableReceiver.type = 'variableParticipant';
                            variableReceiver.variableParticipant = e.UserId;
                            variableReceiver.variableName = e.name;
                            variableReceiver.orgType = e.OrgType;
                            receiverExpressions.push(variableReceiver);
                        }
                        else if (e instanceof PositionParticipantExpression) {
                            /** @type {?} */
                            var positionReceiver = new MessageReceiver();
                            positionReceiver.type = 'positionParticipant';
                            positionReceiver.positionId = e.PositionId;
                            positionReceiver.positionName = e.PositionName;
                            positionReceiver.positionType = e.PositionType;
                            if (positionReceiver.positionType === '1') {
                                positionReceiver.orgId = e.OrgId;
                                positionReceiver.orgType = e.OrgType;
                            }
                            receiverExpressions.push(positionReceiver);
                        }
                    }
                }
                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_5) throw e_5.error; }
                }
            }
            if (receiverExpressions.length > 0) {
                message.receivers = receiverExpressions;
            }
            return message;
        }));
    };
    /**
     *
     * @param components
     * @returns
     */
    /**
     *
     * @param {?} components
     * @return {?}
     */
    PropertyHelper.getBizComponentList = /**
     *
     * @param {?} components
     * @return {?}
     */
    function (components) {
        var e_6, _a, e_7, _b;
        /** @type {?} */
        var bizComponentList = new Array();
        if (components && components.length > 0) {
            try {
                for (var components_1 = tslib_1.__values(components), components_1_1 = components_1.next(); !components_1_1.done; components_1_1 = components_1.next()) {
                    var component = components_1_1.value;
                    /** @type {?} */
                    var bizComponent = new BizComponent();
                    bizComponent.id = component.Id;
                    bizComponent.name = component.Name;
                    bizComponent.metadataId = component.MetadataId;
                    bizComponent.methodCode = component.MethodCode;
                    bizComponent.executionTime = component.Time;
                    bizComponent.isForCompensation = component.isForCompensation;
                    bizComponent.scopeType = component.ScopeType || null;
                    bizComponent.actualParameters = new Array();
                    if (component.ActualParameters && component.ActualParameters.length > 0) {
                        try {
                            for (var _c = tslib_1.__values(component.ActualParameters), _d = _c.next(); !_d.done; _d = _c.next()) {
                                var param = _d.value;
                                /** @type {?} */
                                var bizParam = new BizParameter();
                                bizParam.code = param.Name;
                                bizParam.name = param.Name;
                                bizParam.value = param.Value;
                                bizComponent.actualParameters.push(bizParam);
                            }
                        }
                        catch (e_7_1) { e_7 = { error: e_7_1 }; }
                        finally {
                            try {
                                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                            }
                            finally { if (e_7) throw e_7.error; }
                        }
                    }
                    bizComponentList.push(bizComponent);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (components_1_1 && !components_1_1.done && (_a = components_1.return)) _a.call(components_1);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
        return bizComponentList;
    };
    /**
     *
     * @param roles
     * @param type
     * @returns
     */
    /**
     *
     * @param {?} roles
     * @return {?}
     */
    PropertyHelper.getPerformerList = /**
     *
     * @param {?} roles
     * @return {?}
     */
    function (roles) {
        /** @type {?} */
        var performers = new Array();
        roles.forEach((/**
         * @param {?} role
         * @return {?}
         */
        function (role) {
            if (role == null) {
                return;
            }
            if (role.participantExpression instanceof UserParticipantExpression) {
                /** @type {?} */
                var user = (/** @type {?} */ (role.participantExpression));
                if (user) {
                    /** @type {?} */
                    var userPerformer = new UserParticipant();
                    userPerformer.id = user.id;
                    userPerformer.performerId = user.UserId;
                    userPerformer.performerName = user.name;
                    userPerformer.type = user.ClrTypeID;
                    userPerformer.orgId = user.OrgId;
                    userPerformer.orgName = user.OrgName;
                    userPerformer.orgType = user.OrgType;
                    userPerformer.condition = role.condition ? role.condition.Value : '';
                    userPerformer.tag = user.Tag;
                    userPerformer.order = role.order;
                    performers.push(userPerformer);
                }
            }
            else if (role.participantExpression instanceof VariableParticipantExpression) {
                /** @type {?} */
                var variable = (/** @type {?} */ (role.participantExpression));
                if (variable) {
                    /** @type {?} */
                    var variablePerformer = new VariablePerformer();
                    variablePerformer.id = variable.id,
                        variablePerformer.name = variable.Name,
                        variablePerformer.type = variable.ClrTypeID,
                        variablePerformer.condition = role.condition ? role.condition.Value : '',
                        variablePerformer.tag = variable.Tag;
                    variablePerformer.relation = variable.Relation;
                    variablePerformer.varType = variable.VarType;
                    variablePerformer.varValue = variable.VarValue;
                    variablePerformer.order = role.order;
                    performers.push(variablePerformer);
                }
            }
            else if (role.participantExpression instanceof PositionParticipantExpression) {
                /** @type {?} */
                var position = (/** @type {?} */ (role.participantExpression));
                if (position) {
                    /** @type {?} */
                    var positionPerformer = new PositionParticipant();
                    positionPerformer.id = position.id;
                    positionPerformer.performerId = position.PositionId;
                    positionPerformer.positionType = position.PositionType;
                    positionPerformer.performerName = position.PositionName;
                    positionPerformer.type = position.ClrTypeID;
                    positionPerformer.orgId = position.OrgId || '';
                    positionPerformer.orgName = position.OrgName || '';
                    positionPerformer.orgType = position.OrgType || '';
                    positionPerformer.condition = role.condition ? role.condition.Value : '';
                    positionPerformer.order = role.order;
                    performers.push(positionPerformer);
                }
            }
            else if (role.participantExpression instanceof ComponentParticipantExpression) {
                /** @type {?} */
                var cmp = (/** @type {?} */ (role.participantExpression));
                if (cmp) {
                    /** @type {?} */
                    var componentPerformer = new ComponentParticipant();
                    componentPerformer.id = cmp.id;
                    componentPerformer.name = cmp.componentName;
                    componentPerformer.metadataId = cmp.componentId;
                    componentPerformer.methodCode = cmp.methodCode;
                    componentPerformer.methodName = cmp.methodName;
                    componentPerformer.type = cmp.ClrTypeID;
                    componentPerformer.actualParameters = new Array();
                    if (cmp.actualParameters && cmp.actualParameters.length > 0) {
                        /** @type {?} */
                        var paramters_1 = [];
                        cmp.actualParameters.forEach((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return paramters_1.push({ code: p.Name, value: p.Value, valueText: p.ValueText, tag: p.Tag }); }));
                        componentPerformer.actualParameters = paramters_1;
                    }
                    if (role.condition) {
                        componentPerformer.condition = role.condition.Value;
                    }
                    componentPerformer.order = role.order;
                    performers.push(componentPerformer);
                }
            }
            else if (role.participantExpression instanceof ReportingLineParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role.participantExpression));
                if (r) {
                    /** @type {?} */
                    var reportingLine = new ReportingLineParticipant();
                    reportingLine.id = r.id;
                    reportingLine.reportingLineDefId = r.ReportingLineDefId;
                    reportingLine.reportingLineDefName = r.ReportingLineDefName;
                    reportingLine.refOrgId = r.RefOrgId;
                    reportingLine.refUserId = r.RefUserId;
                    reportingLine.refEmployeeId = r.RefEmployeeId;
                    reportingLine.dimension = r.Dimension;
                    reportingLine.performerName = r.RefUserId;
                    reportingLine.tag = r.Tag;
                    reportingLine.type = r.ClrTypeID;
                    if (role.condition) {
                        reportingLine.condition = role.condition.Value;
                    }
                    reportingLine.order = role.order;
                    performers.push(reportingLine);
                }
            }
            else if (role.participantExpression instanceof ActivityExecutorParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role.participantExpression));
                if (r) {
                    /** @type {?} */
                    var activityExecutor = new ActivityExecutorParticipant();
                    activityExecutor.id = r.id;
                    activityExecutor.type = r.ClrTypeID;
                    activityExecutor.activityDefId = r.activityDefId;
                    activityExecutor.activityDefName = r.activityDefName;
                    activityExecutor.performerName = '<' + r.activityDefName + mxResources.get('eventHandler');
                    if (role.condition) {
                        activityExecutor.condition = role.condition.Value;
                    }
                    activityExecutor.order = role.order;
                    performers.push(activityExecutor);
                }
            }
            else if (role.participantExpression instanceof MatrixParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role.participantExpression));
                if (r) {
                    /** @type {?} */
                    var matrix = new MatrixParticipant();
                    matrix.id = r.id;
                    matrix.matrixDefId = r.matrixDefId;
                    matrix.matrixDefName = r.matrixDefName;
                    matrix.conditionField1 = r.conditionField1;
                    matrix.conditionFieldText1 = r.conditionFieldText1;
                    matrix.conditionField2 = r.conditionField2;
                    matrix.conditionFieldText2 = r.conditionFieldText2;
                    matrix.conditionField3 = r.conditionField3;
                    matrix.conditionFieldText3 = r.conditionFieldText3;
                    matrix.multivaluedCondition = r.multivaluedCondition;
                    matrix.dataFieldAlias = r.dataFieldAlias;
                    matrix.type = r.ClrTypeID;
                    matrix.order = role.order;
                    if (role.condition) {
                        matrix.condition = role.condition.Value;
                    }
                    performers.push(matrix);
                }
            }
            else if (role.participantExpression instanceof OrganizationParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role.participantExpression));
                if (r) {
                    /** @type {?} */
                    var organization = new OrganizationParticipant;
                    organization.id = r.id;
                    organization.type = r.ClrTypeID;
                    organization.name = r.name;
                    organization.actionScope = (/** @type {?} */ (r.actionScope));
                    organization.organizationLevel = r.organizationLevel;
                    organization.organizationId = r.organizationId;
                    organization.organizationCode = r.organizationCode;
                    organization.organizationName = r.organizationName;
                    organization.includeChildren = r.includeChildren;
                    organization.parentsUntil = r.parentsUntil;
                    organization.tag = r.tag;
                    organization.order = role.order;
                    if (role.condition) {
                        organization.condition = role.condition.Value;
                    }
                    performers.push(organization);
                }
            }
        }));
        return performers;
    };
    /**
     * 移交等的范围，与上个方法比这里传入的是具体的参与者类型（用户参与者、岗位参与者，balbala）
     * @param roles
     * @param type
     * @returns
     */
    /**
     * 移交等的范围，与上个方法比这里传入的是具体的参与者类型（用户参与者、岗位参与者，balbala）
     * @param {?} roles
     * @return {?}
     */
    PropertyHelper.getPerformerListTest = /**
     * 移交等的范围，与上个方法比这里传入的是具体的参与者类型（用户参与者、岗位参与者，balbala）
     * @param {?} roles
     * @return {?}
     */
    function (roles) {
        /** @type {?} */
        var performers = new Array();
        roles.forEach((/**
         * @param {?} role
         * @return {?}
         */
        function (role) {
            if (role == null) {
                return;
            }
            if (role instanceof UserParticipantExpression) {
                /** @type {?} */
                var user = (/** @type {?} */ (role));
                if (user) {
                    /** @type {?} */
                    var userPerformer = new UserParticipant();
                    userPerformer.id = user.id;
                    userPerformer.performerId = user.UserId;
                    userPerformer.performerName = user.name;
                    userPerformer.type = user.ClrTypeID;
                    userPerformer.orgId = user.OrgId;
                    userPerformer.orgName = user.OrgName;
                    userPerformer.orgType = user.OrgType;
                    userPerformer.condition = role.condition ? role.condition.Value : '';
                    userPerformer.tag = user.Tag;
                    userPerformer.order = role.order;
                    performers.push(userPerformer);
                }
            }
            else if (role instanceof VariableParticipantExpression) {
                /** @type {?} */
                var variable = (/** @type {?} */ (role));
                if (variable) {
                    /** @type {?} */
                    var variablePerformer = new VariablePerformer();
                    variablePerformer.id = variable.id,
                        variablePerformer.name = variable.Name,
                        variablePerformer.type = variable.ClrTypeID,
                        variablePerformer.condition = role.condition ? role.condition.Value : '',
                        variablePerformer.tag = variable.Tag;
                    variablePerformer.relation = variable.Relation;
                    variablePerformer.varType = variable.VarType;
                    variablePerformer.varValue = variable.VarValue;
                    variablePerformer.order = role.order;
                    performers.push(variablePerformer);
                }
            }
            else if (role instanceof PositionParticipantExpression) {
                /** @type {?} */
                var position = (/** @type {?} */ (role));
                if (position) {
                    /** @type {?} */
                    var positionPerformer = new PositionParticipant();
                    positionPerformer.id = position.id;
                    positionPerformer.performerId = position.PositionId;
                    positionPerformer.positionType = position.PositionType;
                    positionPerformer.performerName = position.PositionName;
                    positionPerformer.type = position.ClrTypeID;
                    positionPerformer.orgId = position.OrgId || '';
                    positionPerformer.orgName = position.OrgName || '';
                    positionPerformer.orgType = position.OrgType || '';
                    positionPerformer.condition = role.condition ? role.condition.Value : '';
                    positionPerformer.order = role.order;
                    performers.push(positionPerformer);
                }
            }
            else if (role instanceof ComponentParticipantExpression) {
                /** @type {?} */
                var cmp = (/** @type {?} */ (role));
                if (cmp) {
                    /** @type {?} */
                    var componentPerformer = new ComponentParticipant();
                    componentPerformer.id = cmp.id;
                    componentPerformer.name = cmp.componentName;
                    componentPerformer.metadataId = cmp.componentId;
                    componentPerformer.methodCode = cmp.methodCode;
                    componentPerformer.methodName = cmp.methodName;
                    componentPerformer.type = cmp.ClrTypeID;
                    componentPerformer.actualParameters = new Array();
                    if (cmp.actualParameters && cmp.actualParameters.length > 0) {
                        /** @type {?} */
                        var paramters_2 = [];
                        cmp.actualParameters.forEach((/**
                         * @param {?} p
                         * @return {?}
                         */
                        function (p) { return paramters_2.push({ code: p.Name, value: p.Value, valueText: p.ValueText, tag: p.Tag }); }));
                        componentPerformer.actualParameters = paramters_2;
                    }
                    if (role.condition) {
                        componentPerformer.condition = role.condition.Value;
                    }
                    componentPerformer.order = role.order;
                    performers.push(componentPerformer);
                }
            }
            else if (role instanceof ReportingLineParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role));
                if (r) {
                    /** @type {?} */
                    var reportingLine = new ReportingLineParticipant();
                    reportingLine.id = r.id;
                    reportingLine.reportingLineDefId = r.ReportingLineDefId;
                    reportingLine.reportingLineDefName = r.ReportingLineDefName;
                    reportingLine.refOrgId = r.RefOrgId;
                    reportingLine.refUserId = r.RefUserId;
                    reportingLine.refEmployeeId = r.RefEmployeeId;
                    reportingLine.dimension = r.Dimension;
                    reportingLine.performerName = r.RefUserId;
                    reportingLine.tag = r.Tag;
                    reportingLine.type = r.ClrTypeID;
                    if (role.condition) {
                        reportingLine.condition = role.condition.Value;
                    }
                    reportingLine.order = role.order;
                    performers.push(reportingLine);
                }
            }
            else if (role instanceof ActivityExecutorParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role));
                if (r) {
                    /** @type {?} */
                    var activityExecutor = new ActivityExecutorParticipant();
                    activityExecutor.id = r.id;
                    activityExecutor.type = r.ClrTypeID;
                    activityExecutor.activityDefId = r.activityDefId;
                    activityExecutor.activityDefName = r.activityDefName;
                    activityExecutor.performerName = '<' + r.activityDefName + mxResources.get('eventHandler');
                    if (role.condition) {
                        activityExecutor.condition = role.condition.Value;
                    }
                    activityExecutor.order = role.order;
                    performers.push(activityExecutor);
                }
            }
            else if (role instanceof MatrixParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role));
                if (r) {
                    /** @type {?} */
                    var matrix = new MatrixParticipant();
                    matrix.id = r.id;
                    matrix.matrixDefId = r.matrixDefId;
                    matrix.matrixDefName = r.matrixDefName;
                    matrix.conditionField1 = r.conditionField1;
                    matrix.conditionFieldText1 = r.conditionFieldText1;
                    matrix.conditionField2 = r.conditionField2;
                    matrix.conditionFieldText2 = r.conditionFieldText2;
                    matrix.conditionField3 = r.conditionField3;
                    matrix.conditionFieldText3 = r.conditionFieldText3;
                    matrix.multivaluedCondition = r.multivaluedCondition;
                    matrix.dataFieldAlias = r.dataFieldAlias;
                    matrix.type = r.ClrTypeID;
                    matrix.order = role.order;
                    if (role.condition) {
                        matrix.condition = role.condition.Value;
                    }
                    performers.push(matrix);
                }
            }
            else if (role instanceof OrganizationParticipantExpression) {
                /** @type {?} */
                var r = (/** @type {?} */ (role));
                if (r) {
                    /** @type {?} */
                    var organization = new OrganizationParticipant;
                    organization.id = r.id;
                    organization.type = r.ClrTypeID;
                    organization.name = r.name;
                    organization.actionScope = (/** @type {?} */ (r.actionScope));
                    organization.organizationLevel = r.organizationLevel;
                    organization.organizationId = r.organizationId;
                    organization.organizationCode = r.organizationCode;
                    organization.organizationName = r.organizationName;
                    organization.includeChildren = r.includeChildren;
                    organization.parentsUntil = r.parentsUntil;
                    organization.tag = r.tag;
                    organization.order = role.order;
                    if (role.condition) {
                        organization.condition = role.condition.Value;
                    }
                    performers.push(organization);
                }
            }
        }));
        return performers;
    };
    /**
     *
     * @param act
     * @returns
     */
    /**
     *
     * @param {?} notifyAble
     * @param {?} dynamicParticipants
     * @return {?}
     */
    PropertyHelper.getNotifyAble = /**
     *
     * @param {?} notifyAble
     * @param {?} dynamicParticipants
     * @return {?}
     */
    function (notifyAble, dynamicParticipants) {
        /** @type {?} */
        var notifyScope = new ActionOrganizationScope();
        notifyScope.action = ActionScope.Notify;
        notifyScope.enable = notifyAble;
        if (notifyAble) {
            /** @type {?} */
            var roles = dynamicParticipants.filter((/**
             * @param {?} r
             * @return {?}
             */
            function (r) { return r.actionScope === ActionScope.Notify; }));
            /** @type {?} */
            var res = roles.find((/**
             * @param {?} r
             * @return {?}
             */
            function (r) { return ((/** @type {?} */ (r))).organizationLevel && !((/** @type {?} */ (r))).order; }));
            /** @type {?} */
            var list = [];
            if (res) {
                /** @type {?} */
                var organization = new OrganizationParticipant;
                organization.id = res.id;
                organization.type = res.ClrTypeID;
                organization.name = res.name;
                organization.actionScope = (/** @type {?} */ (res.actionScope));
                organization.organizationLevel = ((/** @type {?} */ (res))).organizationLevel;
                organization.organizationId = ((/** @type {?} */ (res))).organizationId;
                organization.organizationCode = ((/** @type {?} */ (res))).organizationCode;
                organization.organizationName = ((/** @type {?} */ (res))).organizationName;
                organization.includeChildren = ((/** @type {?} */ (res))).includeChildren;
                organization.parentsUntil = ((/** @type {?} */ (res))).parentsUntil;
                organization.tag = ((/** @type {?} */ (res))).tag;
                organization.order = 1;
                list.push(organization);
            }
            else {
                list = PropertyHelper.getPerformerListTest(roles);
            }
            notifyScope.scope = new OrganizationPotentialOwner();
            if (list && list.length > 0) {
                notifyScope.scope.participantInfo = new ParticipantInfo();
                notifyScope.scope.participantInfo.potentialOwnerList = list;
                notifyScope.scope.participantInfo.isAllScope = true;
            }
            else {
                notifyScope.scope.participantInfo = new ParticipantInfo();
                notifyScope.scope.participantInfo.isAllScope = false;
            }
        }
        return notifyScope;
    };
    /**
     * @param {?} process
     * @param {?} parameters
     * @return {?}
     */
    PropertyHelper.updateFormalParameters = /**
     * @param {?} process
     * @param {?} parameters
     * @return {?}
     */
    function (process, parameters) {
        var e_8, _a, e_9, _b;
        if (!parameters) {
            parameters = [];
        }
        /** @type {?} */
        var objects = process.GetDataObjects();
        if (parameters !== null && parameters.length > 0) {
            try {
                for (var parameters_1 = tslib_1.__values(parameters), parameters_1_1 = parameters_1.next(); !parameters_1_1.done; parameters_1_1 = parameters_1.next()) {
                    var p = parameters_1_1.value;
                    /** @type {?} */
                    var dataType = new DataType(process.Model);
                    try {
                        // 先移除code相同的dataObject
                        for (var objects_1 = tslib_1.__values(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                            var o = objects_1_1.value;
                            if (o instanceof DataObject && o.Name === p.code) {
                                process.RemoveDataObject(o.Id);
                            }
                        }
                    }
                    catch (e_9_1) { e_9 = { error: e_9_1 }; }
                    finally {
                        try {
                            if (objects_1_1 && !objects_1_1.done && (_b = objects_1.return)) _b.call(objects_1);
                        }
                        finally { if (e_9) throw e_9.error; }
                    }
                    dataType.Category = DataTypes.BasicType;
                    dataType.BasicType = p.dataType;
                    dataType.Description = p.description;
                    // dataType.InitialValue = p.initialValue;
                    if (p.parameterMode === 0) {
                        /** @type {?} */
                        var dataObject = new ValuedDataObject(process.Model);
                        dataObject.Name = p.code;
                        dataObject.Documentation = p.name;
                        dataObject.DataType = dataType;
                        dataObject.IsAllowNull = p.allowNull;
                        if (p.initialValue || p.initialValueType) {
                            /** @type {?} */
                            var variableSetting = new VariableSetting(process.Model);
                            variableSetting.variableCode = p.code;
                            variableSetting.variableName = p.name;
                            variableSetting.tag = p.initialValueType;
                            variableSetting.value = p.initialValue;
                            variableSetting.valueText = p.initialValue;
                            dataObject.variableSetting = variableSetting;
                        }
                        process.AddDataObject(dataObject);
                    }
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (parameters_1_1 && !parameters_1_1.done && (_a = parameters_1.return)) _a.call(parameters_1);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
    };
    return PropertyHelper;
}());
/**
 * 属性工具
 */
export { PropertyHelper };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvcGVydHlIZWxwZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL2Rlc2lnbmVyL3dmLWNlbGwvUHJvcGVydHlIZWxwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQStCLFFBQVEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFXLE1BQU0scUJBQXFCLENBQUM7QUFDNUcsT0FBTyxFQUFFLGdCQUFnQixFQUFnRiw2QkFBNkIsRUFBRSw4QkFBOEIsRUFBRSxrQ0FBa0MsRUFBRSwyQkFBMkIsRUFBRSxpQ0FBaUMsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFpQixxQ0FBcUMsRUFBRSx5QkFBeUIsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3piLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRTVELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFB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MENBQTBDO29CQUMxQyxJQUFJLENBQUMsQ0FBQyxhQUFhLEtBQUssQ0FBQyxFQUFFOzs0QkFDakIsVUFBVSxHQUFHLElBQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQzt3QkFDdEQsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO3dCQUN6QixVQUFVLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7d0JBQ2xDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO3dCQUMvQixVQUFVLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUM7d0JBQ3JDLElBQUksQ0FBQyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsZ0JBQWdCLEVBQUU7O2dDQUNoQyxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQzs0QkFDMUQsZUFBZSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDOzRCQUN0QyxlQUFlLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7NEJBQ3RDLGVBQWUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLGdCQUFnQixDQUFDOzRCQUN6QyxlQUFlLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUM7NEJBQ3ZDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQzs0QkFFM0MsVUFBVSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7eUJBQ2hEO3dCQUVELE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7cUJBQ3JDO2lCQUNKOzs7Ozs7Ozs7U0FDSjtJQUNMLENBQUM7SUFDTCxxQkFBQztBQUFELENBQUMsQUFobUJELElBZ21CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJwbW5Nb2RlbCwgRXh0ZW5zaW9uRWxlbWVudCwgRGF0YVR5cGUsIERhdGFUeXBlcywgRGF0YU9iamVjdCwgUHJvY2VzcyB9IGZyb20gXCJAZWRwLXBtZi9icG1uLW1vZGVsXCI7XHJcbmltcG9ydCB7IFZhbHVlZERhdGFPYmplY3QsIENEVFNjaGVtYVR5cGUsIEh1bWFuUGVyZm9ybWVySW1wbCwgUG90ZW50aWFsT3duZXJJbXBsLCBQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uLCBDb21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24sIE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbiwgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLCBWYXJpYWJsZVNldHRpbmcsIENvbXBvbmVudCwgTWVzc2FnZU5vdGljZSwgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbiwgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbiwgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24gfSBmcm9tIFwiQGdzcC13Zi93Zi1wcm9jZXNzLW1vZGVsXCI7XHJcbmltcG9ydCB7IEJpekNvbXBvbmVudCB9IGZyb20gXCIuLi9lbnRpdHkvQml6Q29tcG9uZW50XCI7XHJcbmltcG9ydCB7IEJpelBhcmFtZXRlciB9IGZyb20gXCIuLi9lbnRpdHkvQml6UGFyYW1ldGVyXCI7XHJcbmltcG9ydCB7IFVzZXJQYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvVXNlclBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IFBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9QYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBWYXJpYWJsZVBlcmZvcm1lciB9IGZyb20gXCIuLi9lbnRpdHkvVmFyaWFibGVQZXJmb3JtZXJcIjtcclxuaW1wb3J0IHsgUG9zaXRpb25QYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvUG9zaXRpb25QYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvQ29tcG9uZW50UGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgTWF0cml4UGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L01hdHJpeFBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9Pcmdhbml6YXRpb25QYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBBY3Rpb25TY29wZSB9IGZyb20gXCIuLi9lbnRpdHkvQWN0aW9uU2NvcGVcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVJlY2VpdmVyIH0gZnJvbSBcIi4uL2VudGl0eS9NZXNzYWdlUmVjZWl2ZXJcIjtcclxuaW1wb3J0IHsgV2ZEZXNpZ25lclV0aWxzIH0gZnJvbSBcIi4uL1dmRGVzaWduZXJVdGlsc1wiO1xyXG5pbXBvcnQgeyBteFJlc291cmNlcyB9IGZyb20gXCJAZWRwLXBtZi9teGdyYXBoLXRzXCI7XHJcbmltcG9ydCB7IEFjdGlvbk9yZ2FuaXphdGlvblNjb3BlLCBPcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lciB9IGZyb20gXCIuLi8uLi92aWV3cy9vcmdhbml6YXRpb24tcG90ZW50aWFsLW93bmVyL2FjdGlvbk9yZ2FuaXphdGlvblNjb3BlXCI7XHJcbmltcG9ydCB7IFBhcnRpY2lwYW50SW5mbyB9IGZyb20gXCIuLi8uLi92aWV3cy9wYXJ0aWNpcGFudC9wYXJ0aWNpcGFudC5pbmZvXCI7XHJcblxyXG4vKipcclxuICog5bGe5oCn5bel5YW3XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvcGVydHlIZWxwZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blj5jph4/otYvlgLzliJfooahcclxuICAgICAqIEBwYXJhbSBicG1uTW9kZWxcclxuICAgICAqIEBwYXJhbSB2YXJpYWJsZXNTZXR0aW5nXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZhcmlhYmxlU2V0dGluZ3MoYnBtbk1vZGVsOiBCcG1uTW9kZWwsIHZhcmlhYmxlc1NldHRpbmc6IFZhcmlhYmxlU2V0dGluZ1tdKSB7XHJcbiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5kRWxlbWVudHM6IEV4dGVuc2lvbkVsZW1lbnRbXSA9IGJwbW5Nb2RlbC5EZWZhdWx0UHJvY2Vzcy5HZXRFeHRlbnNpb25FbGVtZW50cygpO1xyXG4gICAgICAgIGlmICh2YXJpYWJsZXNTZXR0aW5nICYmIHZhcmlhYmxlc1NldHRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFyaWFibGVzU2V0dGluZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGU6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZUNvZGU6IHYudmFyaWFibGVDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlTmFtZTogdi52YXJpYWJsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFnOiB2LnRhZyxcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25UaW1lOiB2LmV4ZWN1dGlvblRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHYudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVUZXh0OiB2LnZhbHVlVGV4dFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHYudGFnID09PSAnY29tcG9uZW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRFbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBleHRlbmRFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb21wb25lbnQgJiYgZS5JZCA9PT0gdi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudDogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZDogZS5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZTogZS5OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXRhZGF0YUlkOiBlLk1ldGFkYXRhSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZENvZGU6IGUuTWV0aG9kQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsUGFyYW1ldGVyczogW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuQWN0dWFsUGFyYW1ldGVycyAmJiBlLkFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgZS5BY3R1YWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZTogcC5OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlOiBwLlZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhZzogcC5UYWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5wdXNoKHZhcmlhYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZU5vdGljZXNcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TWVzc2FnZU5vdGljZXMobWVzc2FnZU5vdGljZXM6IE1lc3NhZ2VOb3RpY2VbXSkge1xyXG4gICAgICAgIGlmICghbWVzc2FnZU5vdGljZXMgfHwgbWVzc2FnZU5vdGljZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlTm90aWNlcy5tYXAobSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IGFueSA9IG5ldyBPYmplY3Q7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9IG0uY29udGVudDtcclxuICAgICAgICAgICAgbWVzc2FnZS5zZW5kVGltZSA9IG0uc2VuZFRpbWU7XHJcbiAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZFR5cGUgPSBtLnNlbmRUeXBlO1xyXG4gICAgICAgICAgICBtZXNzYWdlLnN1YmplY3QgPSBtLnN1YmplY3Q7XHJcbiAgICAgICAgICAgIGlmIChtLnNtc01lc3NhZ2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc21zVGVtcGxhdGU6IGFueSA9IG5ldyBPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICBzbXNUZW1wbGF0ZS5jb2RlID0gbS5zbXNNZXNzYWdlVGVtcGxhdGUuY29kZTtcclxuICAgICAgICAgICAgICAgIHNtc1RlbXBsYXRlLmNvbnRlbnQgPSBtLnNtc01lc3NhZ2VUZW1wbGF0ZS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgc21zVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMgJiYgbS5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG0uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGU6IGFueSA9IG5ldyBPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLmlkID0gV2ZEZXNpZ25lclV0aWxzLmNyZWF0ZU5NKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLmNvZGUgPSB2LmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLnZhbHVlID0gdi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUudGFnID0gdi50YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtc1RlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zbXNNZXNzYWdlVGVtcGxhdGUgPSBzbXNUZW1wbGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZWNlaXZlckV4cHJlc3Npb25zID0gbmV3IEFycmF5PE1lc3NhZ2VSZWNlaXZlcj4oKTtcclxuICAgICAgICAgICAgaWYgKG0ucmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVycyA9IG0ucmVjZWl2ZXIuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVyVGV4dHMgPSBtLnJlY2VpdmVyVGV4dC5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJSZWNlaXZlciA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKTtcclxuICAgICAgICAgICAgICAgIHVzZXJSZWNlaXZlci50eXBlID0gJ3VzZXJQYXJ0aWNpcGFudCc7XHJcbiAgICAgICAgICAgICAgICB1c2VyUmVjZWl2ZXIudXNlcklkcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdXNlclJlY2VpdmVyLnVzZXJOYW1lcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIGluIHJlY2VpdmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlcnNbaV0gPT09ICdwcm9jSW5zdENyZWF0b3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9jSW5zdENyZWF0b3IgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY0luc3RDcmVhdG9yLnR5cGUgPSAncHJvY2Vzc1BhcnRpY2lwYW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY0luc3RDcmVhdG9yLnByb2Nlc3NQYXJ0aWNpcGFudCA9ICdwcm9jSW5zdENyZWF0b3InO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2gocHJvY0luc3RDcmVhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyc1tpXSA9PT0gJ3dvcmtJdGVtUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JrSXRlbVBhcnRpY2lwYW50ID0gbmV3IE1lc3NhZ2VSZWNlaXZlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtJdGVtUGFydGljaXBhbnQudHlwZSA9ICdwcm9jZXNzUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrSXRlbVBhcnRpY2lwYW50LnByb2Nlc3NQYXJ0aWNpcGFudCA9ICd3b3JrSXRlbVBhcnRpY2lwYW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJFeHByZXNzaW9ucy5wdXNoKHdvcmtJdGVtUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJSZWNlaXZlci51c2VySWRzICs9IChyZWNlaXZlcnNbaV0gKyAnLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyUmVjZWl2ZXIudXNlck5hbWVzICs9IChyZWNlaXZlclRleHRzW2ldICsgJywnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlclJlY2VpdmVyLnVzZXJJZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUmVjZWl2ZXIudXNlcklkcyA9IHVzZXJSZWNlaXZlci51c2VySWRzLnN1YnN0cmluZygwLCB1c2VyUmVjZWl2ZXIudXNlcklkcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUmVjZWl2ZXIudXNlck5hbWVzID0gdXNlclJlY2VpdmVyLnVzZXJOYW1lcy5zdWJzdHJpbmcoMCwgdXNlclJlY2VpdmVyLnVzZXJOYW1lcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2godXNlclJlY2VpdmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobS5yZWNlaXZlckV4cHJlc3Npb25zICYmIG0ucmVjZWl2ZXJFeHByZXNzaW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbS5yZWNlaXZlckV4cHJlc3Npb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudC50eXBlID0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudC5wcm9jZXNzUGFydGljaXBhbnQgPSAnYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LmFjdGl2aXR5RGVmSWQgPSBlLmFjdGl2aXR5RGVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudC5hY3Rpdml0eURlZk5hbWUgPSBlLmFjdGl2aXR5RGVmTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaChhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhcmlhYmxlUmVjZWl2ZXIgPSBuZXcgTWVzc2FnZVJlY2VpdmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUmVjZWl2ZXIudHlwZSA9ICd2YXJpYWJsZVBhcnRpY2lwYW50JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVSZWNlaXZlci52YXJpYWJsZVBhcnRpY2lwYW50ID0gZS5Vc2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUmVjZWl2ZXIudmFyaWFibGVOYW1lID0gZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVJlY2VpdmVyLm9yZ1R5cGUgPSBlLk9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRXhwcmVzc2lvbnMucHVzaCh2YXJpYWJsZVJlY2VpdmVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb25SZWNlaXZlciA9IG5ldyBNZXNzYWdlUmVjZWl2ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25SZWNlaXZlci50eXBlID0gJ3Bvc2l0aW9uUGFydGljaXBhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblJlY2VpdmVyLnBvc2l0aW9uSWQgPSBlLlBvc2l0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmVjZWl2ZXIucG9zaXRpb25OYW1lID0gZS5Qb3NpdGlvbk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmVjZWl2ZXIucG9zaXRpb25UeXBlID0gZS5Qb3NpdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvblJlY2VpdmVyLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblJlY2VpdmVyLm9yZ0lkID0gZS5PcmdJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUmVjZWl2ZXIub3JnVHlwZSA9IGUuT3JnVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJFeHByZXNzaW9ucy5wdXNoKHBvc2l0aW9uUmVjZWl2ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZXJFeHByZXNzaW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY2VpdmVycyA9IHJlY2VpdmVyRXhwcmVzc2lvbnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudHNcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Qml6Q29tcG9uZW50TGlzdChjb21wb25lbnRzOiBBcnJheTxDb21wb25lbnQ+KTogQXJyYXk8Qml6Q29tcG9uZW50PiB7XHJcbiAgICAgICAgY29uc3QgYml6Q29tcG9uZW50TGlzdCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRzICYmIGNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaXpDb21wb25lbnQgPSBuZXcgQml6Q29tcG9uZW50KCk7XHJcbiAgICAgICAgICAgICAgICBiaXpDb21wb25lbnQuaWQgPSBjb21wb25lbnQuSWQ7XHJcbiAgICAgICAgICAgICAgICBiaXpDb21wb25lbnQubmFtZSA9IGNvbXBvbmVudC5OYW1lO1xyXG4gICAgICAgICAgICAgICAgYml6Q29tcG9uZW50Lm1ldGFkYXRhSWQgPSBjb21wb25lbnQuTWV0YWRhdGFJZDtcclxuICAgICAgICAgICAgICAgIGJpekNvbXBvbmVudC5tZXRob2RDb2RlID0gY29tcG9uZW50Lk1ldGhvZENvZGU7XHJcbiAgICAgICAgICAgICAgICBiaXpDb21wb25lbnQuZXhlY3V0aW9uVGltZSA9IGNvbXBvbmVudC5UaW1lO1xyXG4gICAgICAgICAgICAgICAgYml6Q29tcG9uZW50LmlzRm9yQ29tcGVuc2F0aW9uID0gY29tcG9uZW50LmlzRm9yQ29tcGVuc2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgYml6Q29tcG9uZW50LnNjb3BlVHlwZSA9IGNvbXBvbmVudC5TY29wZVR5cGUgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIGJpekNvbXBvbmVudC5hY3R1YWxQYXJhbWV0ZXJzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LkFjdHVhbFBhcmFtZXRlcnMgJiYgY29tcG9uZW50LkFjdHVhbFBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW0gb2YgY29tcG9uZW50LkFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYml6UGFyYW0gPSBuZXcgQml6UGFyYW1ldGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpelBhcmFtLmNvZGUgPSBwYXJhbS5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXpQYXJhbS5uYW1lID0gcGFyYW0uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYml6UGFyYW0udmFsdWUgPSBwYXJhbS5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYml6Q29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMucHVzaChiaXpQYXJhbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYml6Q29tcG9uZW50TGlzdC5wdXNoKGJpekNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJpekNvbXBvbmVudExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJvbGVzXHJcbiAgICAgKiBAcGFyYW0gdHlwZVxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRQZXJmb3JtZXJMaXN0KHJvbGVzOiAoSHVtYW5QZXJmb3JtZXJJbXBsIHwgUG90ZW50aWFsT3duZXJJbXBsKVtdKTogUGFydGljaXBhbnRbXSB7XHJcbiAgICAgICAgY29uc3QgcGVyZm9ybWVycyA9IG5ldyBBcnJheTxQYXJ0aWNpcGFudD4oKTtcclxuXHJcbiAgICAgICAgcm9sZXMuZm9yRWFjaCgocm9sZTogSHVtYW5QZXJmb3JtZXJJbXBsIHwgUG90ZW50aWFsT3duZXJJbXBsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyb2xlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gaW5zdGFuY2VvZiBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gcm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gYXMgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlclBlcmZvcm1lciA9IG5ldyBVc2VyUGFydGljaXBhbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLmlkID0gdXNlci5pZDtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLnBlcmZvcm1lcklkID0gdXNlci5Vc2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci5wZXJmb3JtZXJOYW1lID0gdXNlci5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIudHlwZSA9IHVzZXIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIub3JnSWQgPSB1c2VyLk9yZ0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIub3JnTmFtZSA9IHVzZXIuT3JnTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZ1R5cGUgPSB1c2VyLk9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbiA/IHJvbGUuY29uZGl0aW9uLlZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci50YWcgPSB1c2VyLlRhZztcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2godXNlclBlcmZvcm1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gaW5zdGFuY2VvZiBWYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGUgPSByb2xlLnBhcnRpY2lwYW50RXhwcmVzc2lvbiBhcyBWYXJpYWJsZVBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlUGVyZm9ybWVyID0gbmV3IFZhcmlhYmxlUGVyZm9ybWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIuaWQgPSB2YXJpYWJsZS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIubmFtZSA9IHZhcmlhYmxlLk5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLnR5cGUgPSB2YXJpYWJsZS5DbHJUeXBlSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLmNvbmRpdGlvbiA9IHJvbGUuY29uZGl0aW9uID8gcm9sZS5jb25kaXRpb24uVmFsdWUgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIudGFnID0gdmFyaWFibGUuVGFnXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIucmVsYXRpb24gPSB2YXJpYWJsZS5SZWxhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci52YXJUeXBlID0gdmFyaWFibGUuVmFyVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci52YXJWYWx1ZSA9IHZhcmlhYmxlLlZhclZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2godmFyaWFibGVQZXJmb3JtZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUucGFydGljaXBhbnRFeHByZXNzaW9uIGluc3RhbmNlb2YgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gYXMgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvblBlcmZvcm1lciA9IG5ldyBQb3NpdGlvblBhcnRpY2lwYW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIuaWQgPSBwb3NpdGlvbi5pZDtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci5wZXJmb3JtZXJJZCA9IHBvc2l0aW9uLlBvc2l0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIucG9zaXRpb25UeXBlID0gcG9zaXRpb24uUG9zaXRpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLnBlcmZvcm1lck5hbWUgPSBwb3NpdGlvbi5Qb3NpdGlvbk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIudHlwZSA9IHBvc2l0aW9uLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci5vcmdJZCA9IHBvc2l0aW9uLk9yZ0lkIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLm9yZ05hbWUgPSBwb3NpdGlvbi5PcmdOYW1lIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLm9yZ1R5cGUgPSBwb3NpdGlvbi5PcmdUeXBlIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLmNvbmRpdGlvbiA9IHJvbGUuY29uZGl0aW9uID8gcm9sZS5jb25kaXRpb24uVmFsdWUgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWVycy5wdXNoKHBvc2l0aW9uUGVyZm9ybWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlLnBhcnRpY2lwYW50RXhwcmVzc2lvbiBpbnN0YW5jZW9mIENvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY21wID0gcm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gYXMgQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBlcmZvcm1lciA9IG5ldyBDb21wb25lbnRQYXJ0aWNpcGFudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5pZCA9IGNtcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIubmFtZSA9IGNtcC5jb21wb25lbnROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5tZXRhZGF0YUlkID0gY21wLmNvbXBvbmVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5tZXRob2RDb2RlID0gY21wLm1ldGhvZENvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLm1ldGhvZE5hbWUgPSBjbXAubWV0aG9kTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIudHlwZSA9IGNtcC5DbHJUeXBlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLmFjdHVhbFBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcC5hY3R1YWxQYXJhbWV0ZXJzICYmIGNtcC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtdGVyczogYW55ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtcC5hY3R1YWxQYXJhbWV0ZXJzLmZvckVhY2gocCA9PiBwYXJhbXRlcnMucHVzaCh7IGNvZGU6IHAuTmFtZSwgdmFsdWU6IHAuVmFsdWUsIHZhbHVlVGV4dDogcC5WYWx1ZVRleHQsIHRhZzogcC5UYWcgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIuYWN0dWFsUGFyYW1ldGVycyA9IHBhcmFtdGVycztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2goY29tcG9uZW50UGVyZm9ybWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlLnBhcnRpY2lwYW50RXhwcmVzc2lvbiBpbnN0YW5jZW9mIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSByb2xlLnBhcnRpY2lwYW50RXhwcmVzc2lvbiBhcyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBvcnRpbmdMaW5lID0gbmV3IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUuaWQgPSByLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZklkID0gci5SZXBvcnRpbmdMaW5lRGVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5yZXBvcnRpbmdMaW5lRGVmTmFtZSA9IHIuUmVwb3J0aW5nTGluZURlZk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5yZWZPcmdJZCA9IHIuUmVmT3JnSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5yZWZVc2VySWQgPSByLlJlZlVzZXJJZDtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLnJlZkVtcGxveWVlSWQgPSByLlJlZkVtcGxveWVlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5kaW1lbnNpb24gPSByLkRpbWVuc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLnBlcmZvcm1lck5hbWUgPSByLlJlZlVzZXJJZDtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLnRhZyA9IHIuVGFnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUudHlwZSA9IHIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb2xlLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLmNvbmRpdGlvbiA9IHJvbGUuY29uZGl0aW9uLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2gocmVwb3J0aW5nTGluZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gaW5zdGFuY2VvZiBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gcm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZpdHlFeGVjdXRvciA9IG5ldyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmlkID0gci5pZDtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLnR5cGUgPSByLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQgPSByLmFjdGl2aXR5RGVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZk5hbWUgPSByLmFjdGl2aXR5RGVmTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLnBlcmZvcm1lck5hbWUgPSAnPCcgKyByLmFjdGl2aXR5RGVmTmFtZSArIG14UmVzb3VyY2VzLmdldCgnZXZlbnRIYW5kbGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuY29uZGl0aW9uID0gcm9sZS5jb25kaXRpb24uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3Iub3JkZXIgPSByb2xlLm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1lcnMucHVzaChhY3Rpdml0eUV4ZWN1dG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlLnBhcnRpY2lwYW50RXhwcmVzc2lvbiBpbnN0YW5jZW9mIE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJvbGUucGFydGljaXBhbnRFeHByZXNzaW9uIGFzIE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gbmV3IE1hdHJpeFBhcnRpY2lwYW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmlkID0gci5pZDtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXgubWF0cml4RGVmSWQgPSByLm1hdHJpeERlZklkO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tYXRyaXhEZWZOYW1lID0gci5tYXRyaXhEZWZOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZDEgPSByLmNvbmRpdGlvbkZpZWxkMTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MSA9IHIuY29uZGl0aW9uRmllbGRUZXh0MTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGQyID0gci5jb25kaXRpb25GaWVsZDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDIgPSByLmNvbmRpdGlvbkZpZWxkVGV4dDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkMyA9IHIuY29uZGl0aW9uRmllbGQzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZFRleHQzID0gci5jb25kaXRpb25GaWVsZFRleHQzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXZhbHVlZENvbmRpdGlvbiA9IHIubXVsdGl2YWx1ZWRDb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmRhdGFGaWVsZEFsaWFzID0gci5kYXRhRmllbGRBbGlhcztcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXgudHlwZSA9IHIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1lcnMucHVzaChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUucGFydGljaXBhbnRFeHByZXNzaW9uIGluc3RhbmNlb2YgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gcm9sZS5wYXJ0aWNpcGFudEV4cHJlc3Npb24gYXMgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBuZXcgT3JnYW5pemF0aW9uUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLmlkID0gci5pZDtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24udHlwZSA9IHIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5uYW1lID0gci5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5hY3Rpb25TY29wZSA9IHIuYWN0aW9uU2NvcGUgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25MZXZlbCA9IHIub3JnYW5pemF0aW9uTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbklkID0gci5vcmdhbml6YXRpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ub3JnYW5pemF0aW9uQ29kZSA9IHIub3JnYW5pemF0aW9uQ29kZTtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ub3JnYW5pemF0aW9uTmFtZSA9IHIub3JnYW5pemF0aW9uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuID0gci5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLnBhcmVudHNVbnRpbCA9IHIucGFyZW50c1VudGlsO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi50YWcgPSByLnRhZztcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ub3JkZXIgPSByb2xlLm9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb2xlLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24uY29uZGl0aW9uID0gcm9sZS5jb25kaXRpb24uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2gob3JnYW5pemF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwZXJmb3JtZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog56e75Lqk562J55qE6IyD5Zu077yM5LiO5LiK5Liq5pa55rOV5q+U6L+Z6YeM5Lyg5YWl55qE5piv5YW35L2T55qE5Y+C5LiO6ICF57G75Z6L77yI55So5oi35Y+C5LiO6ICF44CB5bKX5L2N5Y+C5LiO6ICF77yMYmFsYmFsYe+8iVxyXG4gICAgICogQHBhcmFtIHJvbGVzXHJcbiAgICAgKiBAcGFyYW0gdHlwZVxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRQZXJmb3JtZXJMaXN0VGVzdChyb2xlczogUGFydGljaXBhbnRFeHByZXNzaW9uW10pOiBQYXJ0aWNpcGFudFtdIHtcclxuICAgICAgICBjb25zdCBwZXJmb3JtZXJzID0gbmV3IEFycmF5PFBhcnRpY2lwYW50PigpO1xyXG5cclxuICAgICAgICByb2xlcy5mb3JFYWNoKChyb2xlOiBQYXJ0aWNpcGFudEV4cHJlc3Npb24pID0+IHtcclxuICAgICAgICAgICAgaWYgKHJvbGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyb2xlIGluc3RhbmNlb2YgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHJvbGUgYXMgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlclBlcmZvcm1lciA9IG5ldyBVc2VyUGFydGljaXBhbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLmlkID0gdXNlci5pZDtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLnBlcmZvcm1lcklkID0gdXNlci5Vc2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci5wZXJmb3JtZXJOYW1lID0gdXNlci5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIudHlwZSA9IHVzZXIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIub3JnSWQgPSB1c2VyLk9yZ0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQZXJmb3JtZXIub3JnTmFtZSA9IHVzZXIuT3JnTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZ1R5cGUgPSB1c2VyLk9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbiA/IHJvbGUuY29uZGl0aW9uLlZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclBlcmZvcm1lci50YWcgPSB1c2VyLlRhZztcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2godXNlclBlcmZvcm1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm9sZSBpbnN0YW5jZW9mIFZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZSA9IHJvbGUgYXMgVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgICAgICBpZiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZVBlcmZvcm1lciA9IG5ldyBWYXJpYWJsZVBlcmZvcm1lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLmlkID0gdmFyaWFibGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLm5hbWUgPSB2YXJpYWJsZS5OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci50eXBlID0gdmFyaWFibGUuQ2xyVHlwZUlELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbiA/IHJvbGUuY29uZGl0aW9uLlZhbHVlIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLnRhZyA9IHZhcmlhYmxlLlRhZ1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLnJlbGF0aW9uID0gdmFyaWFibGUuUmVsYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIudmFyVHlwZSA9IHZhcmlhYmxlLlZhclR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIudmFyVmFsdWUgPSB2YXJpYWJsZS5WYXJWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWVycy5wdXNoKHZhcmlhYmxlUGVyZm9ybWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcm9sZSBhcyBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uUGVyZm9ybWVyID0gbmV3IFBvc2l0aW9uUGFydGljaXBhbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci5pZCA9IHBvc2l0aW9uLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLnBlcmZvcm1lcklkID0gcG9zaXRpb24uUG9zaXRpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci5wb3NpdGlvblR5cGUgPSBwb3NpdGlvbi5Qb3NpdGlvblR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIucGVyZm9ybWVyTmFtZSA9IHBvc2l0aW9uLlBvc2l0aW9uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblBlcmZvcm1lci50eXBlID0gcG9zaXRpb24uQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLm9yZ0lkID0gcG9zaXRpb24uT3JnSWQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIub3JnTmFtZSA9IHBvc2l0aW9uLk9yZ05hbWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIub3JnVHlwZSA9IHBvc2l0aW9uLk9yZ1R5cGUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25QZXJmb3JtZXIuY29uZGl0aW9uID0gcm9sZS5jb25kaXRpb24gPyByb2xlLmNvbmRpdGlvbi5WYWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uUGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2gocG9zaXRpb25QZXJmb3JtZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBDb21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNtcCA9IHJvbGUgYXMgQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBlcmZvcm1lciA9IG5ldyBDb21wb25lbnRQYXJ0aWNpcGFudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5pZCA9IGNtcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIubmFtZSA9IGNtcC5jb21wb25lbnROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5tZXRhZGF0YUlkID0gY21wLmNvbXBvbmVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5tZXRob2RDb2RlID0gY21wLm1ldGhvZENvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLm1ldGhvZE5hbWUgPSBjbXAubWV0aG9kTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIudHlwZSA9IGNtcC5DbHJUeXBlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLmFjdHVhbFBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcC5hY3R1YWxQYXJhbWV0ZXJzICYmIGNtcC5hY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtdGVyczogYW55ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtcC5hY3R1YWxQYXJhbWV0ZXJzLmZvckVhY2gocCA9PiBwYXJhbXRlcnMucHVzaCh7IGNvZGU6IHAuTmFtZSwgdmFsdWU6IHAuVmFsdWUsIHZhbHVlVGV4dDogcC5WYWx1ZVRleHQsIHRhZzogcC5UYWcgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQZXJmb3JtZXIuYWN0dWFsUGFyYW1ldGVycyA9IHBhcmFtdGVycztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFBlcmZvcm1lci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UGVyZm9ybWVyLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBwZXJmb3JtZXJzLnB1c2goY29tcG9uZW50UGVyZm9ybWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJvbGUgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZSA9IG5ldyBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLmlkID0gci5pZDtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLnJlcG9ydGluZ0xpbmVEZWZJZCA9IHIuUmVwb3J0aW5nTGluZURlZklkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUucmVwb3J0aW5nTGluZURlZk5hbWUgPSByLlJlcG9ydGluZ0xpbmVEZWZOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUucmVmT3JnSWQgPSByLlJlZk9yZ0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUucmVmVXNlcklkID0gci5SZWZVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5yZWZFbXBsb3llZUlkID0gci5SZWZFbXBsb3llZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUuZGltZW5zaW9uID0gci5EaW1lbnNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5wZXJmb3JtZXJOYW1lID0gci5SZWZVc2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS50YWcgPSByLlRhZztcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRpbmdMaW5lLnR5cGUgPSByLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9sZS5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0aW5nTGluZS5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWVycy5wdXNoKHJlcG9ydGluZ0xpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gcm9sZSBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3Rpdml0eUV4ZWN1dG9yID0gbmV3IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuaWQgPSByLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IudHlwZSA9IHIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuYWN0aXZpdHlEZWZJZCA9IHIuYWN0aXZpdHlEZWZJZDtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmTmFtZSA9IHIuYWN0aXZpdHlEZWZOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IucGVyZm9ybWVyTmFtZSA9ICc8JyArIHIuYWN0aXZpdHlEZWZOYW1lICsgbXhSZXNvdXJjZXMuZ2V0KCdldmVudEhhbmRsZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9sZS5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWVycy5wdXNoKGFjdGl2aXR5RXhlY3V0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBNYXRyaXhQYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSByb2xlIGFzIE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gbmV3IE1hdHJpeFBhcnRpY2lwYW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmlkID0gci5pZDtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXgubWF0cml4RGVmSWQgPSByLm1hdHJpeERlZklkO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tYXRyaXhEZWZOYW1lID0gci5tYXRyaXhEZWZOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZDEgPSByLmNvbmRpdGlvbkZpZWxkMTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGRUZXh0MSA9IHIuY29uZGl0aW9uRmllbGRUZXh0MTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXguY29uZGl0aW9uRmllbGQyID0gci5jb25kaXRpb25GaWVsZDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDIgPSByLmNvbmRpdGlvbkZpZWxkVGV4dDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkMyA9IHIuY29uZGl0aW9uRmllbGQzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZFRleHQzID0gci5jb25kaXRpb25GaWVsZFRleHQzO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXZhbHVlZENvbmRpdGlvbiA9IHIubXVsdGl2YWx1ZWRDb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LmRhdGFGaWVsZEFsaWFzID0gci5kYXRhRmllbGRBbGlhcztcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXgudHlwZSA9IHIuQ2xyVHlwZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5vcmRlciA9IHJvbGUub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5jb25kaXRpb24gPSByb2xlLmNvbmRpdGlvbi5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1lcnMucHVzaChtYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSByb2xlIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbjtcclxuICAgICAgICAgICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gbmV3IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5pZCA9IHIuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLnR5cGUgPSByLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ubmFtZSA9IHIubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24uYWN0aW9uU2NvcGUgPSByLmFjdGlvblNjb3BlIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ub3JnYW5pemF0aW9uTGV2ZWwgPSByLm9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25JZCA9IHIub3JnYW5pemF0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkNvZGUgPSByLm9yZ2FuaXphdGlvbkNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbk5hbWUgPSByLm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLmluY2x1ZGVDaGlsZHJlbiA9IHIuaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5wYXJlbnRzVW50aWwgPSByLnBhcmVudHNVbnRpbDtcclxuICAgICAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24udGFnID0gci50YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZGVyID0gcm9sZS5vcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9sZS5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLmNvbmRpdGlvbiA9IHJvbGUuY29uZGl0aW9uLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWVycy5wdXNoKG9yZ2FuaXphdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcGVyZm9ybWVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWN0XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldE5vdGlmeUFibGUobm90aWZ5QWJsZTogYm9vbGVhbiwgZHluYW1pY1BhcnRpY2lwYW50czogUGFydGljaXBhbnRFeHByZXNzaW9uW10pIHtcclxuICAgICAgICBjb25zdCBub3RpZnlTY29wZSA9IG5ldyBBY3Rpb25Pcmdhbml6YXRpb25TY29wZSgpO1xyXG4gICAgICAgIG5vdGlmeVNjb3BlLmFjdGlvbiA9IEFjdGlvblNjb3BlLk5vdGlmeTtcclxuICAgICAgICBub3RpZnlTY29wZS5lbmFibGUgPSBub3RpZnlBYmxlO1xyXG5cclxuICAgICAgICBpZiAobm90aWZ5QWJsZSkgeyAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgcm9sZXMgPSBkeW5hbWljUGFydGljaXBhbnRzLmZpbHRlcihyID0+IHIuYWN0aW9uU2NvcGUgPT09IEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgICAgIGxldCByZXMgPSByb2xlcy5maW5kKHIgPT4gKHIgYXMgYW55KS5vcmdhbml6YXRpb25MZXZlbCAmJiAhKHIgYXMgYW55KS5vcmRlcik7XHJcbiAgICAgICAgICAgIGxldCBsaXN0IDogUGFydGljaXBhbnRbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZihyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IG5ldyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5pZCA9IHJlcy5pZDtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi50eXBlID0gcmVzLkNsclR5cGVJRDtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5uYW1lID0gcmVzLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24uYWN0aW9uU2NvcGUgPSByZXMuYWN0aW9uU2NvcGUgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkxldmVsID0gKHJlcyBhcyBhbnkpLm9yZ2FuaXphdGlvbkxldmVsO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbklkID0gKHJlcyBhcyBhbnkpLm9yZ2FuaXphdGlvbklkO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLm9yZ2FuaXphdGlvbkNvZGUgPSAocmVzIGFzIGFueSkub3JnYW5pemF0aW9uQ29kZTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5vcmdhbml6YXRpb25OYW1lID0gKHJlcyBhcyBhbnkpLm9yZ2FuaXphdGlvbk5hbWU7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuID0gKHJlcyBhcyBhbnkpLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbi5wYXJlbnRzVW50aWwgPSAocmVzIGFzIGFueSkucGFyZW50c1VudGlsO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uLnRhZyA9IChyZXMgYXMgYW55KS50YWc7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24ub3JkZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKG9yZ2FuaXphdGlvbik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGxpc3QgPSBQcm9wZXJ0eUhlbHBlci5nZXRQZXJmb3JtZXJMaXN0VGVzdChyb2xlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm90aWZ5U2NvcGUuc2NvcGUgPSBuZXcgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXIoKTtcclxuICAgICAgICAgICAgaWYobGlzdCAmJiBsaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeVNjb3BlLnNjb3BlLnBhcnRpY2lwYW50SW5mbyA9IG5ldyBQYXJ0aWNpcGFudEluZm8oKTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeVNjb3BlLnNjb3BlLnBhcnRpY2lwYW50SW5mby5wb3RlbnRpYWxPd25lckxpc3QgPSBsaXN0O1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5U2NvcGUuc2NvcGUucGFydGljaXBhbnRJbmZvLmlzQWxsU2NvcGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlTY29wZS5zY29wZS5wYXJ0aWNpcGFudEluZm8gPSBuZXcgUGFydGljaXBhbnRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlTY29wZS5zY29wZS5wYXJ0aWNpcGFudEluZm8uaXNBbGxTY29wZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub3RpZnlTY29wZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHVwZGF0ZUZvcm1hbFBhcmFtZXRlcnMocHJvY2VzczogUHJvY2VzcywgcGFyYW1ldGVyczogYW55W10pIHtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgb2JqZWN0cyA9IHByb2Nlc3MuR2V0RGF0YU9iamVjdHMoKTtcclxuICAgICAgICBpZiAocGFyYW1ldGVycyAhPT0gbnVsbCAmJiBwYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFUeXBlID0gbmV3IERhdGFUeXBlKHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgLy8g5YWI56e76ZmkY29kZeebuOWQjOeahGRhdGFPYmplY3RcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBvYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRhT2JqZWN0ICYmIG8uTmFtZSA9PT0gcC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuUmVtb3ZlRGF0YU9iamVjdChvLklkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZS5DYXRlZ29yeSA9IERhdGFUeXBlcy5CYXNpY1R5cGU7XHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZS5CYXNpY1R5cGUgPSBwLmRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGUuRGVzY3JpcHRpb24gPSBwLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0YVR5cGUuSW5pdGlhbFZhbHVlID0gcC5pbml0aWFsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocC5wYXJhbWV0ZXJNb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YU9iamVjdCA9IG5ldyBWYWx1ZWREYXRhT2JqZWN0KHByb2Nlc3MuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QuTmFtZSA9IHAuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LkRvY3VtZW50YXRpb24gPSBwLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iamVjdC5EYXRhVHlwZSA9IGRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmplY3QuSXNBbGxvd051bGwgPSBwLmFsbG93TnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocC5pbml0aWFsVmFsdWUgfHwgcC5pbml0aWFsVmFsdWVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlU2V0dGluZyA9IG5ldyBWYXJpYWJsZVNldHRpbmcocHJvY2Vzcy5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YXJpYWJsZUNvZGUgPSBwLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YXJpYWJsZU5hbWUgPSBwLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy50YWcgPSBwLmluaXRpYWxWYWx1ZVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlU2V0dGluZy52YWx1ZSA9IHAuaW5pdGlhbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVNldHRpbmcudmFsdWVUZXh0ID0gcC5pbml0aWFsVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2JqZWN0LnZhcmlhYmxlU2V0dGluZyA9IHZhcmlhYmxlU2V0dGluZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuQWRkRGF0YU9iamVjdChkYXRhT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=