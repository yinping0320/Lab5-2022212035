/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { NodeCell, ElementPropertyConfig } from "@edp-pmf/grapheditor";
import { mxResources } from "@edp-pmf/mxgraph-ts";
import { BpmnModelHelper, FlowNodeState } from "@edp-pmf/bpmn-model";
import { NotifyActivity, ExtendProperty, MessageNotice, ActionScope, Condition, ExecuteForm, PotentialOwnerImpl, HumanPerformerImpl, OrganizationParticipantExpression, VariableParticipantExpression, ComponentParticipantExpression, ReportingLineParticipantExpression, MatrixParticipantExpression, ActivityExecutorParticipantExpression, UserParticipantExpression, PositionParticipantExpression, ActualParameter, SmsMessageTemplate, SmsMessageVariable, } from "@gsp-wf/wf-process-model";
import { PropertyHelper } from "./PropertyHelper";
import { WfConstants } from "../WfConstants";
import { NotifyActivityPropertyKeys } from "./property-keys/NotifyActivityPropertyKeys";
// import { ParticipantInfo } from "../../views/participant/participant.info";
import { ParticipantInfo } from "../entity";
/**
 * 知会活动节点
 */
var NotifyActivityCell = /** @class */ (function (_super) {
    tslib_1.__extends(NotifyActivityCell, _super);
    function NotifyActivityCell(value, geometry, style) {
        var _a;
        var _this = _super.call(this, value, geometry, style) || this;
        _this.clrTypeId = NotifyActivityCell.CLR_TYPE_ID;
        _this.name = "知会";
        _this.nameLanguage = {
            "zh-CHS": "知会",
            "zh-CHT": "知會",
            "en": "Notify",
        };
        _this.imgUrls = (_a = {},
            _a[FlowNodeState.Default] = WfConstants.IMAGE_PATH + "/notify.png",
            _a[FlowNodeState.Selected] = WfConstants.IMAGE_PATH + "/notify_backup.png",
            _a);
        return _this;
    }
    /**
     * @param {?=} flowElt
     * @return {?}
     */
    NotifyActivityCell.prototype.createFlowElement = /**
     * @param {?=} flowElt
     * @return {?}
     */
    function (flowElt) {
        /** @type {?} */
        var flowNode = (/** @type {?} */ (_super.prototype.createFlowElement.call(this, flowElt)));
        flowNode.Id = "NotifyActivity" + BpmnModelHelper.GenerateElementId();
        // 创建而非复制时执行
        if (flowElt == null) {
            flowNode.notifyAble = this.editorUi.generalConfig.enableNotify;
        }
        return flowNode;
    };
    /**
     * @return {?}
     */
    NotifyActivityCell.prototype.getFarrisPropConfig = /**
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b, e_3, _c;
        /** @type {?} */
        var editorUi = this.editorUi;
        // const graph = editorUi.graph;
        /** @type {?} */
        var act = this.flowElement;
        // 过滤配置位置为节点的扩展属性，分离一级和二级属性：知会节点
        // 一级节点List
        /** @type {?} */
        var generalExtendList = [];
        // 二级节点List
        /** @type {?} */
        var detailExtendList = [];
        if (editorUi.procExtProps && editorUi.procExtProps.length > 0) {
            JSON.parse(JSON.stringify(editorUi.procExtProps)).forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if (p.propertyLocation && p.propertyLocation.indexOf('activity') != -1 && !p.parentId) {
                    generalExtendList.push(p);
                }
                else if (p.propertyLocation && p.propertyLocation.indexOf('activity') != -1 && p.parentId) {
                    detailExtendList.push(p);
                }
            }));
        }
        generalExtendList = generalExtendList.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            return a.sortOrder - b.sortOrder;
        }));
        /** @type {?} */
        var extendList = [];
        if (editorUi.procExtProps && editorUi.procExtProps.length > 0) {
            extendList = JSON.parse(JSON.stringify(editorUi.procExtProps)).sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            function (a, b) {
                return a.sortOrder - b.sortOrder;
            }));
        }
        extendList = extendList.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            return a.sortOrder - b.sortOrder;
        }));
        /** @type {?} */
        var basicProperty = new ElementPropertyConfig();
        /** @type {?} */
        var activityProperty = new ElementPropertyConfig();
        /** @type {?} */
        var propertyData = {};
        basicProperty.categoryId = 'basicProperty';
        basicProperty.categoryName = mxResources.get('basicInformation');
        basicProperty.tabId = 'basic';
        basicProperty.tabName = mxResources.get('basicAttributes');
        basicProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.Name, propertyName: mxResources.get('name'), propertyType: 'string', visible: !this.editorUi.multiLangEnabled },
            { propertyID: NotifyActivityPropertyKeys.NameLanguage, propertyName: mxResources.get('nameLanguage'), propertyType: 'multiLanguage', visible: this.editorUi.multiLangEnabled },
            { propertyID: NotifyActivityPropertyKeys.Id, propertyName: mxResources.get('id'), propertyType: 'string', readonly: true }
        ];
        /** @type {?} */
        var performerProperty = new ElementPropertyConfig();
        performerProperty.categoryId = 'performerProperty';
        performerProperty.categoryName = mxResources.get('performerProperty');
        performerProperty.tabId = 'basic';
        performerProperty.tabName = mxResources.get('basicAttributes');
        performerProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.ParticipantSchemes, propertyName: mxResources.get('notifyRecipient'), propertyType: 'modal' }
        ];
        /** @type {?} */
        var formDef = new ElementPropertyConfig();
        formDef.categoryId = 'formDef';
        formDef.categoryName = mxResources.get('formDef');
        formDef.tabId = 'basic';
        formDef.tabName = mxResources.get('basicAttributes');
        formDef.properties = [
            { propertyID: NotifyActivityPropertyKeys.wf_ExecuteForms_PC, propertyName: mxResources.get('pcForm'), propertyType: 'modal' },
            { propertyID: NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile, propertyName: mxResources.get('webForm'), propertyType: 'modal' },
        ];
        /** @type {?} */
        var approvalProperty = new ElementPropertyConfig();
        approvalProperty.categoryId = 'activityProperty';
        approvalProperty.categoryName = mxResources.get('activityProperty');
        approvalProperty.tabId = 'basic';
        approvalProperty.tabName = mxResources.get('basicAttributes');
        approvalProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.NotifyAble, propertyName: mxResources.get('notifyAble'), propertyType: 'modal' },
        ];
        activityProperty.categoryId = 'advanced';
        activityProperty.categoryName = mxResources.get('otherConfigurations');
        activityProperty.tabId = 'advanced';
        activityProperty.tabName = mxResources.get('advancedAttributes');
        activityProperty.properties = [
            { propertyID: NotifyActivityPropertyKeys.messageNotice, propertyName: mxResources.get('messageNotice'), propertyType: 'modal' },
        ];
        // 扩展属性分group处理，每个group包含父级属性和属于它的子扩展属性
        /** @type {?} */
        var groupList = new Array();
        try {
            for (var extendList_1 = tslib_1.__values(extendList), extendList_1_1 = extendList_1.next(); !extendList_1_1.done; extendList_1_1 = extendList_1.next()) {
                var extend = extendList_1_1.value;
                if (!extend.parentId) {
                    /** @type {?} */
                    var group = { parent: extend, childs: new Array() };
                    try {
                        for (var extendList_2 = tslib_1.__values(extendList), extendList_2_1 = extendList_2.next(); !extendList_2_1.done; extendList_2_1 = extendList_2.next()) {
                            var e = extendList_2_1.value;
                            if (e.parentId === extend.id) {
                                group.childs.push(e);
                            }
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (extendList_2_1 && !extendList_2_1.done && (_b = extendList_2.return)) _b.call(extendList_2);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                    groupList.push(group);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (extendList_1_1 && !extendList_1_1.done && (_a = extendList_1.return)) _a.call(extendList_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // 没有扩展属性值的时候不显示扩展属性一栏
        if (groupList && groupList.length > 0) {
            /** @type {?} */
            var ExtendPropertyConfig = new ElementPropertyConfig();
            ExtendPropertyConfig.categoryId = 'extendPropertyConfig';
            ExtendPropertyConfig.categoryName = mxResources.get('extendPropertyConfig');
            ExtendPropertyConfig.tabId = 'advanced';
            ExtendPropertyConfig.tabName = mxResources.get('advancedAttributes');
            ExtendPropertyConfig.properties = new Array();
            try {
                for (var groupList_1 = tslib_1.__values(groupList), groupList_1_1 = groupList_1.next(); !groupList_1_1.done; groupList_1_1 = groupList_1.next()) {
                    var g = groupList_1_1.value;
                    ExtendPropertyConfig.properties.push({ propertyID: g.parent.id, propertyName: g.parent.propertyTitle, propertyType: 'modal' });
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (groupList_1_1 && !groupList_1_1.done && (_c = groupList_1.return)) _c.call(groupList_1);
                }
                finally { if (e_3) throw e_3.error; }
            }
            this.setPropertyData(act, propertyData, groupList);
            return {
                propertyConfig: [basicProperty, performerProperty, formDef, approvalProperty, activityProperty, ExtendPropertyConfig],
                propertyData: propertyData
            };
        }
        else {
            this.setPropertyData(act, propertyData, groupList);
            return {
                propertyConfig: [basicProperty, performerProperty, formDef, approvalProperty, activityProperty],
                propertyData: propertyData
            };
        }
    };
    /**
     * 组织UserActivity的属性值propertyData
     * @param act
     * @param propertyData
     */
    /**
     * 组织UserActivity的属性值propertyData
     * @param {?} act
     * @param {?} propertyData
     * @param {?=} groupList
     * @return {?}
     */
    NotifyActivityCell.prototype.setPropertyData = /**
     * 组织UserActivity的属性值propertyData
     * @param {?} act
     * @param {?} propertyData
     * @param {?=} groupList
     * @return {?}
     */
    function (act, propertyData, groupList) {
        var e_4, _a;
        propertyData[NotifyActivityPropertyKeys.Id] = act.Id;
        propertyData[NotifyActivityPropertyKeys.ClrTypeID] = act.ClrTypeID;
        propertyData[NotifyActivityPropertyKeys.Name] = act.Name;
        propertyData[NotifyActivityPropertyKeys.NameLanguage] = act.NameLanguage || {
            "zh-CHS": act.Name,
        };
        propertyData[NotifyActivityPropertyKeys.ParticipantSchemes] = this.getParticipantInfo(act);
        propertyData[NotifyActivityPropertyKeys.messageNotice] = PropertyHelper.getMessageNotices(act.messageNotices);
        ;
        propertyData[NotifyActivityPropertyKeys.wf_ExecuteForms_PC] =
            act.executeForms ? act.executeForms.find((/**
             * @param {?} e
             * @return {?}
             */
            function (e) { return e.TerminalType === 'PC'; })) : null;
        propertyData[NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile] =
            act.executeForms ? act.executeForms.find((/**
             * @param {?} e
             * @return {?}
             */
            function (e) { return e.TerminalType === 'MOBILE'; })) : null;
        propertyData[NotifyActivityPropertyKeys.NotifyAble] = PropertyHelper.getNotifyAble(act.notifyAble, act.dynamicParticipants);
        try {
            for (var groupList_2 = tslib_1.__values(groupList), groupList_2_1 = groupList_2.next(); !groupList_2_1.done; groupList_2_1 = groupList_2.next()) {
                var g = groupList_2_1.value;
                // 取回模型上的value值给到扩展属性组件里
                if (act.extendProperties && act.extendProperties.length > 0) {
                    g.childs.sort((/**
                     * @param {?} a
                     * @param {?} b
                     * @return {?}
                     */
                    function (a, b) {
                        return a.sortOrder - b.sortOrder;
                    })).forEach((/**
                     * @param {?} d
                     * @return {?}
                     */
                    function (d) {
                        act.extendProperties.forEach((/**
                         * @param {?} e
                         * @return {?}
                         */
                        function (e) {
                            if (e.key == d.code) {
                                d.value = e.value;
                            }
                        }));
                    }));
                }
                propertyData[g.parent.id] = g.childs;
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (groupList_2_1 && !groupList_2_1.done && (_a = groupList_2.return)) _a.call(groupList_2);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    /**
     * @param {?} notifyActivity
     * @return {?}
     */
    NotifyActivityCell.prototype.getParticipantInfo = /**
     * @param {?} notifyActivity
     * @return {?}
     */
    function (notifyActivity) {
        /** @type {?} */
        var partiInfo = new ParticipantInfo();
        /** @type {?} */
        var roles = (/** @type {?} */ (notifyActivity.GetResourceRoles().filter((/**
         * @param {?} role
         * @return {?}
         */
        function (role) { return role instanceof HumanPerformerImpl; }))));
        partiInfo.humanPerformerList = PropertyHelper.getPerformerList(roles);
        return partiInfo;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    NotifyActivityCell.prototype.updateProps = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var notifyActivity = this.flowElement;
        /** @type {?} */
        var editorUi = this.editorUi;
        /** @type {?} */
        var propertyId = obj.propertyID;
        switch (propertyId) {
            // 参与者属性
            case NotifyActivityPropertyKeys.ParticipantSchemes:
                this.updateParticipant(notifyActivity, obj);
                break;
            case NotifyActivityPropertyKeys.messageNotice:
                this.updateMessageNotices(notifyActivity, obj);
                break;
            case NotifyActivityPropertyKeys.wf_ExecuteForms_PC:
                this.updateStartActivityForm(notifyActivity, obj, 'PC');
                if (obj.parameters && obj.parameters.length > 0) {
                    PropertyHelper.updateFormalParameters(editorUi.graph.bpmnModel.DefaultProcess, obj.parameters);
                }
                break;
            case NotifyActivityPropertyKeys.wf_ExecuteForms_Mobile:
                this.updateStartActivityForm(notifyActivity, obj, 'MOBILE');
                if (obj.parameters && obj.parameters.length > 0) {
                    PropertyHelper.updateFormalParameters(editorUi.graph.bpmnModel.DefaultProcess, obj.parameters);
                }
                break;
            case NotifyActivityPropertyKeys.NotifyAble:
                this.updateNotifySet(notifyActivity, obj);
                break;
            default:
                // 判断ResourceKeys是不是groupid,是就走resetExtendProperty
                if (this.editorUi.procExtProps.findIndex((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.id === propertyId; })) > -1) {
                    this.resetExtendProperty(notifyActivity, obj);
                }
                else {
                    _super.prototype.updateProps.call(this, obj);
                }
                break;
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    NotifyActivityCell.prototype.updateParticipant = /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    function (notifyActivity, obj) {
        var e_5, _a;
        /** @type {?} */
        var performerInfo = obj.propertyValue;
        /** @type {?} */
        var resourceRoles = notifyActivity.GetResourceRoles();
        if (resourceRoles && resourceRoles.length > 0) {
            resourceRoles.forEach((/**
             * @param {?} r
             * @return {?}
             */
            function (r) {
                if (r instanceof HumanPerformerImpl) {
                    notifyActivity.RemoveResourceRole(r.Id);
                }
            }));
        }
        if (performerInfo.humanPerformerList && performerInfo.humanPerformerList.length > 0) {
            try {
                for (var _b = tslib_1.__values(performerInfo.humanPerformerList), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var humanPerformer = _c.value;
                    switch (humanPerformer.type) {
                        case UserParticipantExpression.Clr_Type_ID:
                            this.addUserParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case PositionParticipantExpression.Clr_Type_ID:
                            this.addPositionParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case VariableParticipantExpression.Clr_Type_ID:
                            this.addVariableParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case ComponentParticipantExpression.Clr_Type_ID:
                            this.addComponentParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case ReportingLineParticipantExpression.Clr_Type_ID:
                            this.addReportingLineParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case ActivityExecutorParticipantExpression.Clr_Type_ID:
                            this.addActivityExecutorParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                        case MatrixParticipantExpression.Clr_Type_ID:
                            this.addMatrixParticipant(notifyActivity, (/** @type {?} */ (humanPerformer)), 'humanPerformer', null);
                            break;
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addUserParticipant = /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, performer, type, scope) {
        /** @type {?} */
        var userParticipant = new UserParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName, performer.orgType);
        userParticipant.id = performer.id;
        userParticipant.OrgId = performer.orgId;
        userParticipant.OrgName = performer.orgName;
        userParticipant.Tag = performer.tag;
        userParticipant.OrgType = performer.orgType;
        userParticipant.order = performer.order;
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = userParticipant;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = userParticipant;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                userParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(userParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addVariableParticipant = /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, performer, type, scope) {
        /** @type {?} */
        var variablePerformer = new VariableParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName, performer.orgType);
        variablePerformer.id = performer.id;
        variablePerformer.Name = performer.performerName ? performer.performerName : performer.name;
        ;
        variablePerformer.Tag = performer.tag;
        variablePerformer.VarValue = performer.varValue;
        variablePerformer.VarType = performer.varType;
        variablePerformer.Relation = performer.relation;
        variablePerformer.order = performer.order;
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = variablePerformer;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = variablePerformer;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                variablePerformer.actionScope = scope;
                notifyActivity.dynamicParticipants.push(variablePerformer);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addPositionParticipant = /**
     * @param {?} notifyActivity
     * @param {?} performer
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, performer, type, scope) {
        /** @type {?} */
        var posiParticipant = new PositionParticipantExpression(notifyActivity.Model, performer.performerId, performer.performerName);
        posiParticipant.id = performer.id;
        posiParticipant.PositionType = performer.positionType;
        posiParticipant.order = performer.order;
        if (performer.positionType === '1') {
            posiParticipant.OrgId = performer.orgId;
            posiParticipant.OrgName = performer.orgName;
            posiParticipant.OrgType = performer.orgType;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = posiParticipant;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = performer.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = posiParticipant;
            if (performer.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = performer.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = performer.order;
            if (scope) {
                posiParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(posiParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} component
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addComponentParticipant = /**
     * @param {?} notifyActivity
     * @param {?} component
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, component, type, scope) {
        var e_6, _a;
        /** @type {?} */
        var componentParticipant = new ComponentParticipantExpression(notifyActivity.Model);
        componentParticipant.id = component.id;
        componentParticipant.componentId = component.metadataId;
        componentParticipant.componentName = component.name;
        componentParticipant.methodName = component.methodName;
        componentParticipant.methodCode = component.methodCode;
        componentParticipant.order = component.order;
        if (component.actualParameters && component.actualParameters.length > 0) {
            /** @type {?} */
            var actParas = new Array();
            try {
                for (var _b = tslib_1.__values(component.actualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var para = _c.value;
                    /** @type {?} */
                    var actPara = new ActualParameter(notifyActivity.Model, para.code, para.value, para.valueText);
                    // TODO:更新参与者会默认把构件参数属性改为contant，临时修复，后续代码优化
                    actPara.Tag = para.tag;
                    if (para.fetchValueMode) {
                        switch (para.fetchValueMode) {
                            case 'express':
                                actPara.Tag = 'expression';
                                break;
                            case 'none':
                                actPara.Tag = 'expression';
                                break;
                            default:
                                actPara.Tag = 'constant';
                                break;
                        }
                    }
                    actParas.push(actPara);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_6) throw e_6.error; }
            }
            componentParticipant.actualParameters = actParas;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = componentParticipant;
            if (component.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = component.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = component.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = componentParticipant;
            if (component.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = component.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = component.order;
            if (scope) {
                componentParticipant.actionScope = scope;
                notifyActivity.dynamicParticipants.push(componentParticipant);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addReportingLineParticipant = /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, participant, type, scope) {
        /** @type {?} */
        var reportingLine = new ReportingLineParticipantExpression(notifyActivity.Model);
        reportingLine.id = participant.id;
        reportingLine.ReportingLineDefId = participant.reportingLineDefId;
        reportingLine.ReportingLineDefName = participant.reportingLineDefName;
        reportingLine.RefOrgId = participant.refOrgId;
        reportingLine.RefUserId = participant.refUserId;
        reportingLine.RefEmployeeId = participant.refEmployeeId;
        reportingLine.order = participant.order;
        reportingLine.Dimension = participant.dimension;
        reportingLine.Tag = participant.tag;
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = reportingLine;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = reportingLine;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                reportingLine.actionScope = scope;
                notifyActivity.dynamicParticipants.push(reportingLine);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addActivityExecutorParticipant = /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, participant, type, scope) {
        /** @type {?} */
        var activityExecutor = new ActivityExecutorParticipantExpression(notifyActivity.Model);
        activityExecutor.id = participant.id;
        activityExecutor.activityDefId = participant.activityDefId;
        activityExecutor.order = participant.order;
        activityExecutor.activityDefName = participant.activityDefName;
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = activityExecutor;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = activityExecutor;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                activityExecutor.actionScope = scope;
                notifyActivity.dynamicParticipants.push(activityExecutor);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addMatrixParticipant = /**
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, participant, type, scope) {
        /** @type {?} */
        var matrix = new MatrixParticipantExpression(notifyActivity.Model);
        matrix.order = participant.order;
        matrix.id = participant.id;
        matrix.matrixDefId = participant.matrixDefId;
        matrix.matrixDefName = participant.matrixDefName;
        matrix.conditionField1 = participant.conditionField1;
        matrix.conditionFieldText1 = participant.conditionFieldText1;
        matrix.conditionField2 = participant.conditionField2;
        matrix.conditionFieldText2 = participant.conditionFieldText2;
        matrix.conditionField3 = participant.conditionField3;
        matrix.conditionFieldText3 = participant.conditionFieldText3;
        matrix.multivaluedCondition = participant.multivaluedCondition;
        matrix.dataFieldAlias = participant.dataFieldAlias;
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = matrix;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = matrix;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                matrix.actionScope = scope;
                notifyActivity.dynamicParticipants.push(matrix);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
 *
 * @param userActivity
 * @param participant
 * @param type
 */
    /**
     *
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    NotifyActivityCell.prototype.addOrganizationParticipant = /**
     *
     * @param {?} notifyActivity
     * @param {?} participant
     * @param {?} type
     * @param {?} scope
     * @return {?}
     */
    function (notifyActivity, participant, type, scope) {
        /** @type {?} */
        var potential = new OrganizationParticipantExpression(notifyActivity.Model);
        potential.id = participant.id;
        potential.order = participant.order;
        potential.actionScope = ActionScope.AssignUser;
        potential.organizationLevel = (/** @type {?} */ (participant.organizationLevel));
        potential.organizationId = participant.organizationId;
        potential.organizationName = participant.organizationName;
        potential.includeChildren = participant.includeChildren;
        potential.tag = participant.tag;
        if (participant.condition) {
            /** @type {?} */
            var condition = new Condition(notifyActivity.Model);
            condition.Value = participant.condition;
            potential.condition = condition;
        }
        if (type === 'humanPerformer') {
            /** @type {?} */
            var humanPerformerImpl = new HumanPerformerImpl(notifyActivity.Model);
            humanPerformerImpl.participantExpression = potential;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                humanPerformerImpl.condition = condition;
            }
            humanPerformerImpl.order = participant.order;
            notifyActivity.AddResourceRole(humanPerformerImpl);
        }
        else if (type === 'potentialOwner') {
            /** @type {?} */
            var otentialOwnerImpl = new PotentialOwnerImpl(notifyActivity.Model);
            otentialOwnerImpl.participantExpression = potential;
            if (participant.condition) {
                /** @type {?} */
                var condition = new Condition(notifyActivity.Model);
                condition.Value = participant.condition;
                otentialOwnerImpl.condition = condition;
            }
            otentialOwnerImpl.order = participant.order;
            if (scope) {
                potential.actionScope = scope;
                notifyActivity.dynamicParticipants.push(potential);
            }
            else {
                notifyActivity.AddResourceRole(otentialOwnerImpl);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @param {?} terminal
     * @return {?}
     */
    NotifyActivityCell.prototype.updateStartActivityForm = /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @param {?} terminal
     * @return {?}
     */
    function (notifyActivity, obj, terminal) {
        var e_7, _a;
        if (notifyActivity) {
            /** @type {?} */
            var form = (/** @type {?} */ (obj.propertyValue));
            if (!notifyActivity.executeForms) {
                notifyActivity.executeForms = new Array();
            }
            notifyActivity.executeForms = notifyActivity.executeForms.filter((/**
             * @param {?} e
             * @return {?}
             */
            function (e) { return e.TerminalType !== terminal; }));
            if (form) {
                /** @type {?} */
                var params = (/** @type {?} */ (form.ActualParameters));
                /** @type {?} */
                var actParas = new Array();
                if (params && params.length > 0) {
                    try {
                        for (var params_1 = tslib_1.__values(params), params_1_1 = params_1.next(); !params_1_1.done; params_1_1 = params_1.next()) {
                            var para = params_1_1.value;
                            /** @type {?} */
                            var actPara = new ActualParameter(notifyActivity.Model, para.Name, para.Value);
                            if (para.Tag) {
                                actPara.Tag = para.Tag;
                            }
                            else {
                                if (para.Value) {
                                    if (para.Value.length >= 8 && para.Value.slice(0, 8) === "{\"expr\":") {
                                        actPara.Tag = 'expression';
                                    }
                                    else {
                                        actPara.Tag = 'constant';
                                    }
                                }
                                else {
                                    actPara.Tag = 'variable';
                                }
                            }
                            actParas.push(actPara);
                        }
                    }
                    catch (e_7_1) { e_7 = { error: e_7_1 }; }
                    finally {
                        try {
                            if (params_1_1 && !params_1_1.done && (_a = params_1.return)) _a.call(params_1);
                        }
                        finally { if (e_7) throw e_7.error; }
                    }
                }
                /** @type {?} */
                var id = BpmnModelHelper.GenerateElementId();
                /** @type {?} */
                var item = new ExecuteForm(notifyActivity.Model, id, form.Name, actParas);
                item.ComponentId = form.ComponentId;
                item.FormType = form.FormType;
                item.formFormatId = form.formFormatId;
                item.formatConfigId = form.formatConfigId;
                item.TerminalType = form.TerminalType;
                notifyActivity.executeForms.push(item);
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    NotifyActivityCell.prototype.updateNotifySet = /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    function (notifyActivity, obj) {
        var e_8, _a;
        /** @type {?} */
        var scope = (/** @type {?} */ (obj.propertyValue));
        notifyActivity.dynamicParticipants = notifyActivity.dynamicParticipants.filter((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return ((/** @type {?} */ (p))).actionScope !== ActionScope.Notify; }));
        notifyActivity.notifyAble = scope.enable;
        if (scope.scope) {
            if (scope.scope.organizationLevel) {
                /** @type {?} */
                var organizationParticipantExpression = new OrganizationParticipantExpression(notifyActivity.Model);
                organizationParticipantExpression.id = BpmnModelHelper.GenerateElementId();
                organizationParticipantExpression.actionScope = ActionScope.Notify;
                organizationParticipantExpression.organizationLevel = (/** @type {?} */ (scope.scope.organizationLevel));
                organizationParticipantExpression.organizationId = scope.scope.organizationId;
                organizationParticipantExpression.organizationName = scope.scope.organizationName;
                organizationParticipantExpression.includeChildren = scope.scope.includeChildren;
                organizationParticipantExpression.tag = scope.scope.tag;
                notifyActivity.dynamicParticipants.push(organizationParticipantExpression);
            }
            else {
                /** @type {?} */
                var performerInfo = (/** @type {?} */ (scope.scope.participantInfo));
                if (performerInfo.isAllScope && performerInfo.potentialOwnerList && performerInfo.potentialOwnerList.length > 0) {
                    try {
                        for (var _b = tslib_1.__values(performerInfo.potentialOwnerList), _c = _b.next(); !_c.done; _c = _b.next()) {
                            var potentialOwner = _c.value;
                            switch (potentialOwner.type) {
                                case UserParticipantExpression.Clr_Type_ID:
                                    this.addUserParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case VariableParticipantExpression.Clr_Type_ID:
                                    this.addVariableParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case PositionParticipantExpression.Clr_Type_ID:
                                    this.addPositionParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case ComponentParticipantExpression.Clr_Type_ID:
                                    this.addComponentParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case ReportingLineParticipantExpression.Clr_Type_ID:
                                    this.addReportingLineParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case ActivityExecutorParticipantExpression.Clr_Type_ID:
                                    this.addActivityExecutorParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                    notifyActivity;
                                case MatrixParticipantExpression.Clr_Type_ID:
                                    this.addMatrixParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                                case OrganizationParticipantExpression.Clr_Type_ID:
                                    this.addOrganizationParticipant(notifyActivity, (/** @type {?} */ (potentialOwner)), 'potentialOwner', ActionScope.Notify);
                                    break;
                            }
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
            }
        }
    };
    /**
     * 更新知会活动扩展属性
     * @param notifyActivity
     * @param obj
     */
    /**
     * 更新知会活动扩展属性
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    NotifyActivityCell.prototype.resetExtendProperty = /**
     * 更新知会活动扩展属性
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    function (notifyActivity, obj) {
        var e_9, _a;
        if (notifyActivity) {
            /** @type {?} */
            var attributes = (/** @type {?} */ (obj.propertyValue));
            if (!notifyActivity.extendProperties) {
                notifyActivity.extendProperties = new Array();
            }
            var _loop_1 = function (o) {
                /** @type {?} */
                var index = notifyActivity.extendProperties.findIndex((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.key === o.code; }));
                if (index > -1) {
                    notifyActivity.extendProperties.splice(index, 1);
                }
            };
            try {
                for (var _b = tslib_1.__values(obj.propertyValue), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var o = _c.value;
                    _loop_1(o);
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_9) throw e_9.error; }
            }
            if (attributes) {
                attributes.forEach((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) {
                    /** @type {?} */
                    var item = new ExtendProperty(notifyActivity.Model);
                    item.key = a.code;
                    item.value = a.value;
                    notifyActivity.extendProperties.push(item);
                }));
            }
        }
    };
    /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    NotifyActivityCell.prototype.updateMessageNotices = /**
     * @param {?} notifyActivity
     * @param {?} obj
     * @return {?}
     */
    function (notifyActivity, obj) {
        var e_10, _a, e_11, _b, e_12, _c, e_13, _d;
        /** @type {?} */
        var bpmnModel = notifyActivity.Model;
        /** @type {?} */
        var notices = (/** @type {?} */ (obj.propertyValue));
        notifyActivity.messageNotices = new Array();
        if (notices && notices.length > 0) {
            try {
                for (var notices_1 = tslib_1.__values(notices), notices_1_1 = notices_1.next(); !notices_1_1.done; notices_1_1 = notices_1.next()) {
                    var n = notices_1_1.value;
                    /** @type {?} */
                    var messageNotice = new MessageNotice(bpmnModel);
                    messageNotice.sendType = n.sendType;
                    messageNotice.sendTime = n.sendTime;
                    messageNotice.subject = n.subject;
                    messageNotice.content = n.content;
                    if (n.smsMessageTemplate) {
                        /** @type {?} */
                        var smsMessageTemplate = new SmsMessageTemplate(bpmnModel);
                        smsMessageTemplate.code = n.smsMessageTemplate.code;
                        smsMessageTemplate.content = n.smsMessageTemplate.content;
                        smsMessageTemplate.smsMessageVariables = new Array();
                        if (n.smsMessageTemplate.smsMessageVariables && n.smsMessageTemplate.smsMessageVariables.length > 0) {
                            try {
                                for (var _e = tslib_1.__values(n.smsMessageTemplate.smsMessageVariables), _f = _e.next(); !_f.done; _f = _e.next()) {
                                    var v = _f.value;
                                    /** @type {?} */
                                    var variable = new SmsMessageVariable(bpmnModel);
                                    variable.code = v.code;
                                    variable.value = v.value;
                                    variable.tag = v.tag;
                                    smsMessageTemplate.smsMessageVariables.push(variable);
                                }
                            }
                            catch (e_11_1) { e_11 = { error: e_11_1 }; }
                            finally {
                                try {
                                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                                }
                                finally { if (e_11) throw e_11.error; }
                            }
                        }
                        messageNotice.smsMessageTemplate = smsMessageTemplate;
                    }
                    // messageNotice.receiver = n.receiver;
                    // messageNotice.receiverText = n.receiverText;
                    n.receivers = n.receivers.filter((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { return r.type; }));
                    if (n.receivers && n.receivers.length > 0) {
                        /** @type {?} */
                        var receivers = n.receivers.filter((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) { return r.type === 'userParticipant'
                            || (r.type === 'processParticipant' && r.processParticipant !== 'activityExecutorParticipant'); }));
                        /** @type {?} */
                        var participants = n.receivers.filter((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) { return r.type === 'variableParticipant' || r.type === 'positionParticipant'
                            || (r.type === 'processParticipant' && r.processParticipant === 'activityExecutorParticipant'); }));
                        if (receivers && receivers.length > 0) {
                            /** @type {?} */
                            var receiver = '';
                            /** @type {?} */
                            var receiverName = '';
                            try {
                                for (var receivers_1 = tslib_1.__values(receivers), receivers_1_1 = receivers_1.next(); !receivers_1_1.done; receivers_1_1 = receivers_1.next()) {
                                    var r = receivers_1_1.value;
                                    if (r.type === 'processParticipant') {
                                        receiver += (r.processParticipant + ',');
                                        if (r.processParticipant === 'procInstCreator') {
                                            receiverName += '流程发起人,';
                                        }
                                        else if (r.processParticipant === 'workItemParticipant') {
                                            receiverName += '任务接收人,';
                                        }
                                    }
                                    else if (r.type === 'userParticipant') {
                                        receiver += (r.userIds + ',');
                                        receiverName += (r.userNames + ',');
                                    }
                                }
                            }
                            catch (e_12_1) { e_12 = { error: e_12_1 }; }
                            finally {
                                try {
                                    if (receivers_1_1 && !receivers_1_1.done && (_c = receivers_1.return)) _c.call(receivers_1);
                                }
                                finally { if (e_12) throw e_12.error; }
                            }
                            if (receiver) {
                                receiver = receiver.substring(0, receiver.length - 1);
                            }
                            if (receiverName) {
                                receiverName = receiverName.substring(0, receiverName.length - 1);
                            }
                            messageNotice.receiver = receiver;
                            messageNotice.receiverText = receiverName;
                        }
                        if (participants && participants.length > 0) {
                            /** @type {?} */
                            var receiverExpressions = new Array();
                            try {
                                for (var participants_1 = tslib_1.__values(participants), participants_1_1 = participants_1.next(); !participants_1_1.done; participants_1_1 = participants_1.next()) {
                                    var p = participants_1_1.value;
                                    if (p.type === 'processParticipant') {
                                        /** @type {?} */
                                        var activityExecutor = new ActivityExecutorParticipantExpression(notifyActivity.Model);
                                        activityExecutor.id = BpmnModelHelper.GenerateElementId();
                                        activityExecutor.activityDefId = p.activityDefId;
                                        activityExecutor.activityDefName = p.activityDefName;
                                        receiverExpressions.push(activityExecutor);
                                    }
                                    if (p.type === 'variableParticipant') {
                                        /** @type {?} */
                                        var variableParticipant = new UserParticipantExpression(notifyActivity.Model, p.variableParticipant, p.variableName, p.orgType);
                                        variableParticipant.id = BpmnModelHelper.GenerateElementId();
                                        variableParticipant.Tag = 'expression';
                                        variableParticipant.OrgType = p.orgType;
                                        receiverExpressions.push(variableParticipant);
                                    }
                                    if (p.type === 'positionParticipant') {
                                        /** @type {?} */
                                        var posiParticipant = new PositionParticipantExpression(notifyActivity.Model, p.positionId, p.positionName);
                                        posiParticipant.id = BpmnModelHelper.GenerateElementId();
                                        posiParticipant.PositionType = p.positionType;
                                        if (p.positionType === '1') {
                                            posiParticipant.OrgId = p.orgId;
                                            posiParticipant.OrgType = p.orgType;
                                        }
                                        receiverExpressions.push(posiParticipant);
                                    }
                                }
                            }
                            catch (e_13_1) { e_13 = { error: e_13_1 }; }
                            finally {
                                try {
                                    if (participants_1_1 && !participants_1_1.done && (_d = participants_1.return)) _d.call(participants_1);
                                }
                                finally { if (e_13) throw e_13.error; }
                            }
                            messageNotice.receiverExpressions = receiverExpressions;
                        }
                    }
                    notifyActivity.messageNotices.push(messageNotice);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (notices_1_1 && !notices_1_1.done && (_a = notices_1.return)) _a.call(notices_1);
                }
                finally { if (e_10) throw e_10.error; }
            }
        }
    };
    NotifyActivityCell.CLR_TYPE_ID = NotifyActivity.Clr_Type_ID;
    return NotifyActivityCell;
}(NodeCell));
export { NotifyActivityCell };
if (false) {
    /** @type {?} */
    NotifyActivityCell.CLR_TYPE_ID;
    /** @type {?} */
    NotifyActivityCell.prototype.clrTypeId;
    /** @type {?} */
    NotifyActivityCell.prototype.name;
    /** @type {?} */
    NotifyActivityCell.prototype.nameLanguage;
    /** @type {?} */
    NotifyActivityCell.prototype.flowElement;
    /** @type {?} */
    NotifyActivityCell.prototype.editorUi;
    /** @type {?} */
    NotifyActivityCell.prototype.imgUrls;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm90aWZ5QWN0aXZpdHlDZWxsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLWVkaXRvci8iLCJzb3VyY2VzIjpbImxpYi9kZXNpZ25lci93Zi1jZWxsL05vdGlmeUFjdGl2aXR5Q2VsbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUscUJBQXFCLEVBQTRCLE1BQU0sc0JBQXNCLENBQUM7QUFDakcsT0FBTyxFQUFhLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzdELE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDckUsT0FBTyxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLGlDQUFpQyxFQUFFLDZCQUE2QixFQUFFLDhCQUE4QixFQUFFLGtDQUFrQyxFQUFFLDJCQUEyQixFQUF5QixxQ0FBcUMsRUFBRSx5QkFBeUIsRUFBRSw2QkFBNkIsRUFBRSxlQUFlLEVBQTJCLGtCQUFrQixFQUFFLGtCQUFrQixHQUFzQixNQUFNLDBCQUEwQixDQUFDO0FBQ3ZpQixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFTbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdDLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDRDQUE0QyxDQUFDOztBQUd4RixPQUFPLEVBQTJCLGVBQWUsRUFBRSxNQUFNLFdBQVcsQ0FBQzs7OztBQUtyRTtJQUF3Qyw4Q0FBUTtJQWlCNUMsNEJBQVksS0FBVyxFQUFFLFFBQStCLEVBQUUsS0FBYzs7UUFBeEUsWUFDSSxrQkFBTSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxTQUNoQztRQWxCRCxlQUFTLEdBQVcsa0JBQWtCLENBQUMsV0FBVyxD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QixFQUFFLENBQUM7d0NBQ3pELGVBQWUsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQzt3Q0FDOUMsSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLLEdBQUcsRUFBRTs0Q0FDeEIsZUFBZSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDOzRDQUNoQyxlQUFlLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7eUNBQ3ZDO3dDQUNELG1CQUFtQixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztxQ0FDN0M7aUNBQ0o7Ozs7Ozs7Ozs0QkFDRCxhQUFhLENBQUMsbUJBQW1CLEdBQUcsbUJBQW1CLENBQUM7eUJBQzNEO3FCQUNKO29CQUVELGNBQWMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2lCQUNyRDs7Ozs7Ozs7O1NBQ0o7SUFDTCxDQUFDO0lBL3pCTSw4QkFBVyxHQUFXLGNBQWMsQ0FBQyxXQUFXLENBQUM7SUFnMEI1RCx5QkFBQztDQUFBLEFBeDBCRCxDQUF3QyxRQUFRLEdBdzBCL0M7U0F4MEJZLGtCQUFrQjs7O0lBUTNCLCtCQUF3RDs7SUFQeEQsdUNBQW1EOztJQUNuRCxrQ0FBb0I7O0lBQ3BCLDBDQUlBOztJQUVBLHlDQUE0Qjs7SUFDNUIsc0NBQXFCOztJQUVyQixxQ0FHRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vZGVDZWxsLCBFbGVtZW50UHJvcGVydHlDb25maWcsIEZhcnJpc1Byb3BDb25maWdXaXRoRGF0YSB9IGZyb20gXCJAZWRwLXBtZi9ncmFwaGVkaXRvclwiO1xyXG5pbXBvcnQgeyBNeEdyYXBoTlMsIG14UmVzb3VyY2VzIH0gZnJvbSBcIkBlZHAtcG1mL214Z3JhcGgtdHNcIjtcclxuaW1wb3J0IHsgQnBtbk1vZGVsSGVscGVyLCBGbG93Tm9kZVN0YXRlIH0gZnJvbSBcIkBlZHAtcG1mL2JwbW4tbW9kZWxcIjtcclxuaW1wb3J0IHsgTm90aWZ5QWN0aXZpdHksIEV4dGVuZFByb3BlcnR5LCBNZXNzYWdlTm90aWNlLCBBY3Rpb25TY29wZSwgQ29uZGl0aW9uLCBFeGVjdXRlRm9ybSwgUG90ZW50aWFsT3duZXJJbXBsLCBIdW1hblBlcmZvcm1lckltcGwsIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbiwgVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24sIENvbXBvbmVudFBhcnRpY2lwYW50RXhwcmVzc2lvbiwgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbiwgTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uLCBQYXJ0aWNpcGFudEV4cHJlc3Npb24sIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFVzZXJQYXJ0aWNpcGFudEV4cHJlc3Npb24sIFBvc2l0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLCBBY3R1YWxQYXJhbWV0ZXIsIEFjdGlvbk9yZ2FuaXphdGlvblNjb3BlLCBTbXNNZXNzYWdlVGVtcGxhdGUsIFNtc01lc3NhZ2VWYXJpYWJsZSwgT3JnYW5pemF0aW9uTGV2ZWwsIH0gZnJvbSBcIkBnc3Atd2Yvd2YtcHJvY2Vzcy1tb2RlbFwiO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eUhlbHBlciB9IGZyb20gXCIuL1Byb3BlcnR5SGVscGVyXCI7XHJcbmltcG9ydCB7IFdmRWRpdG9yVWkgfSBmcm9tIFwiLi4vV2ZFZGl0b3JVaVwiO1xyXG5pbXBvcnQgeyBVc2VyUGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L1VzZXJQYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBQb3NpdGlvblBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9Qb3NpdGlvblBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IFZhcmlhYmxlUGVyZm9ybWVyIH0gZnJvbSBcIi4uL2VudGl0eS9WYXJpYWJsZVBlcmZvcm1lclwiO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQYXJ0aWNpcGFudCB9IGZyb20gXCIuLi9lbnRpdHkvQ29tcG9uZW50UGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50IH0gZnJvbSBcIi4uL2VudGl0eS9BY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgTWF0cml4UGFydGljaXBhbnQgfSBmcm9tIFwiLi4vZW50aXR5L01hdHJpeFBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IFdmQ29uc3RhbnRzIH0gZnJvbSBcIi4uL1dmQ29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzIH0gZnJvbSBcIi4vcHJvcGVydHkta2V5cy9Ob3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5c1wiO1xyXG5pbXBvcnQgeyBBY3Rpb25Pcmdhbml6YXRpb25TY29wZURlc2lnbiB9IGZyb20gXCIuLi8uLi92aWV3cy9vcmdhbml6YXRpb24tcG90ZW50aWFsLW93bmVyL2FjdGlvbk9yZ2FuaXphdGlvblNjb3BlXCI7XHJcbi8vIGltcG9ydCB7IFBhcnRpY2lwYW50SW5mbyB9IGZyb20gXCIuLi8uLi92aWV3cy9wYXJ0aWNpcGFudC9wYXJ0aWNpcGFudC5pbmZvXCI7XHJcbmltcG9ydCB7IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudEluZm8gfSBmcm9tIFwiLi4vZW50aXR5XCI7XHJcblxyXG4vKipcclxuICog55+l5Lya5rS75Yqo6IqC54K5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTm90aWZ5QWN0aXZpdHlDZWxsIGV4dGVuZHMgTm9kZUNlbGwge1xyXG4gICAgY2xyVHlwZUlkOiBzdHJpbmcgPSBOb3RpZnlBY3Rpdml0eUNlbGwuQ0xSX1RZUEVfSUQ7XHJcbiAgICBuYW1lOiBzdHJpbmcgPSBcIuefpeS8mlwiO1xyXG4gICAgbmFtZUxhbmd1YWdlOiB7IFtsYW5nOiBzdHJpbmddOiBzdHJpbmc7IH0gPSB7XHJcbiAgICAgIFwiemgtQ0hTXCI6IFwi55+l5LyaXCIsXHJcbiAgICAgIFwiemgtQ0hUXCI6IFwi55+l5pyDXCIsXHJcbiAgICAgIFwiZW5cIjogXCJOb3RpZnlcIixcclxuICB9O1xyXG4gICAgc3RhdGljIENMUl9UWVBFX0lEOiBzdHJpbmcgPSBOb3RpZnlBY3Rpdml0eS5DbHJfVHlwZV9JRDtcclxuICAgIGZsb3dFbGVtZW50OiBOb3RpZnlBY3Rpdml0eTtcclxuICAgIGVkaXRvclVpOiBXZkVkaXRvclVpO1xyXG5cclxuICAgIGltZ1VybHMgPSB7XHJcbiAgICAgICAgW0Zsb3dOb2RlU3RhdGUuRGVmYXVsdF06IFdmQ29uc3RhbnRzLklNQUdFX1BBVEggKyBcIi9ub3RpZnkucG5nXCIsXHJcbiAgICAgICAgW0Zsb3dOb2RlU3RhdGUuU2VsZWN0ZWRdOiBXZkNvbnN0YW50cy5JTUFHRV9QQVRIICsgXCIvbm90aWZ5X2JhY2t1cC5wbmdcIixcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IodmFsdWU/OiBhbnksIGdlb21ldHJ5PzogTXhHcmFwaE5TLm14R2VvbWV0cnksIHN0eWxlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIodmFsdWUsIGdlb21ldHJ5LCBzdHlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRmxvd0VsZW1lbnQoZmxvd0VsdD86IE5vdGlmeUFjdGl2aXR5KSB7XHJcbiAgICAgICAgY29uc3QgZmxvd05vZGUgPSBzdXBlci5jcmVhdGVGbG93RWxlbWVudChmbG93RWx0KSBhcyBOb3RpZnlBY3Rpdml0eTtcclxuICAgICAgICBmbG93Tm9kZS5JZCA9IFwiTm90aWZ5QWN0aXZpdHlcIiArIEJwbW5Nb2RlbEhlbHBlci5HZW5lcmF0ZUVsZW1lbnRJZCgpO1xyXG5cclxuICAgICAgICAvLyDliJvlu7rogIzpnZ7lpI3liLbml7bmiafooYxcclxuICAgICAgICBpZiAoZmxvd0VsdCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZsb3dOb2RlLm5vdGlmeUFibGUgPSB0aGlzLmVkaXRvclVpLmdlbmVyYWxDb25maWcuZW5hYmxlTm90aWZ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmxvd05vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmFycmlzUHJvcENvbmZpZygpOiBGYXJyaXNQcm9wQ29uZmlnV2l0aERhdGEge1xyXG4gICAgICAgIGNvbnN0IGVkaXRvclVpID0gdGhpcy5lZGl0b3JVaTtcclxuICAgICAgICAvLyBjb25zdCBncmFwaCA9IGVkaXRvclVpLmdyYXBoO1xyXG4gICAgICAgIGxldCBhY3QgPSB0aGlzLmZsb3dFbGVtZW50O1xyXG4gICAgICAgIC8vIOi/h+a7pOmFjee9ruS9jee9ruS4uuiKgueCueeahOaJqeWxleWxnuaAp++8jOWIhuemu+S4gOe6p+WSjOS6jOe6p+WxnuaAp++8muefpeS8muiKgueCuVxyXG4gICAgICAgIC8vIOS4gOe6p+iKgueCuUxpc3RcclxuICAgICAgICBsZXQgZ2VuZXJhbEV4dGVuZExpc3Q6IGFueSA9IFtdO1xyXG4gICAgICAgIC8vIOS6jOe6p+iKgueCuUxpc3RcclxuICAgICAgICBsZXQgZGV0YWlsRXh0ZW5kTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmIChlZGl0b3JVaS5wcm9jRXh0UHJvcHMgJiYgZWRpdG9yVWkucHJvY0V4dFByb3BzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlZGl0b3JVaS5wcm9jRXh0UHJvcHMpKS5mb3JFYWNoKChwOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLnByb3BlcnR5TG9jYXRpb24gJiYgcC5wcm9wZXJ0eUxvY2F0aW9uLmluZGV4T2YoJ2FjdGl2aXR5JykgIT0gLTEgJiYgIXAucGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZW5lcmFsRXh0ZW5kTGlzdC5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwLnByb3BlcnR5TG9jYXRpb24gJiYgcC5wcm9wZXJ0eUxvY2F0aW9uLmluZGV4T2YoJ2FjdGl2aXR5JykgIT0gLTEgJiYgcC5wYXJlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbEV4dGVuZExpc3QucHVzaChwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2VuZXJhbEV4dGVuZExpc3QgPSBnZW5lcmFsRXh0ZW5kTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLnNvcnRPcmRlciAtIGIuc29ydE9yZGVyO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZXh0ZW5kTGlzdCA9IFtdO1xyXG4gICAgICAgIGlmIChlZGl0b3JVaS5wcm9jRXh0UHJvcHMgJiYgZWRpdG9yVWkucHJvY0V4dFByb3BzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZXh0ZW5kTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWRpdG9yVWkucHJvY0V4dFByb3BzKSkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleHRlbmRMaXN0ID0gZXh0ZW5kTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLnNvcnRPcmRlciAtIGIuc29ydE9yZGVyO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBiYXNpY1Byb3BlcnR5OiBFbGVtZW50UHJvcGVydHlDb25maWcgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgbGV0IGFjdGl2aXR5UHJvcGVydHk6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZyA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBsZXQgcHJvcGVydHlEYXRhOiBhbnkgPSB7fTtcclxuXHJcbiAgICAgICAgYmFzaWNQcm9wZXJ0eS5jYXRlZ29yeUlkID0gJ2Jhc2ljUHJvcGVydHknO1xyXG4gICAgICAgIGJhc2ljUHJvcGVydHkuY2F0ZWdvcnlOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdiYXNpY0luZm9ybWF0aW9uJyk7XHJcbiAgICAgICAgYmFzaWNQcm9wZXJ0eS50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgYmFzaWNQcm9wZXJ0eS50YWJOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdiYXNpY0F0dHJpYnV0ZXMnKVxyXG4gICAgICAgIGJhc2ljUHJvcGVydHkucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5OYW1lLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnbmFtZScpLCBwcm9wZXJ0eVR5cGU6ICdzdHJpbmcnLCB2aXNpYmxlOiAhdGhpcy5lZGl0b3JVaS5tdWx0aUxhbmdFbmFibGVkIH0sXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuTmFtZUxhbmd1YWdlLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnbmFtZUxhbmd1YWdlJyksIHByb3BlcnR5VHlwZTogJ211bHRpTGFuZ3VhZ2UnLCB2aXNpYmxlOiB0aGlzLmVkaXRvclVpLm11bHRpTGFuZ0VuYWJsZWQgfSxcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5JZCwgcHJvcGVydHlOYW1lOiBteFJlc291cmNlcy5nZXQoJ2lkJyksIHByb3BlcnR5VHlwZTogJ3N0cmluZycsIHJlYWRvbmx5OiB0cnVlIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBsZXQgcGVyZm9ybWVyUHJvcGVydHk6IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZyA9IG5ldyBFbGVtZW50UHJvcGVydHlDb25maWcoKTtcclxuICAgICAgICBwZXJmb3JtZXJQcm9wZXJ0eS5jYXRlZ29yeUlkID0gJ3BlcmZvcm1lclByb3BlcnR5JztcclxuICAgICAgICBwZXJmb3JtZXJQcm9wZXJ0eS5jYXRlZ29yeU5hbWUgPSBteFJlc291cmNlcy5nZXQoJ3BlcmZvcm1lclByb3BlcnR5Jyk7XHJcbiAgICAgICAgcGVyZm9ybWVyUHJvcGVydHkudGFiSWQgPSAnYmFzaWMnO1xyXG4gICAgICAgIHBlcmZvcm1lclByb3BlcnR5LnRhYk5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2Jhc2ljQXR0cmlidXRlcycpO1xyXG4gICAgICAgIHBlcmZvcm1lclByb3BlcnR5LnByb3BlcnRpZXMgPSBbXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuUGFydGljaXBhbnRTY2hlbWVzLCBwcm9wZXJ0eU5hbWU6IG14UmVzb3VyY2VzLmdldCgnbm90aWZ5UmVjaXBpZW50JyksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IGZvcm1EZWYgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgZm9ybURlZi5jYXRlZ29yeUlkID0gJ2Zvcm1EZWYnO1xyXG4gICAgICAgIGZvcm1EZWYuY2F0ZWdvcnlOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdmb3JtRGVmJyk7XHJcbiAgICAgICAgZm9ybURlZi50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgZm9ybURlZi50YWJOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdiYXNpY0F0dHJpYnV0ZXMnKVxyXG4gICAgICAgIGZvcm1EZWYucHJvcGVydGllcyA9IFtcclxuICAgICAgICAgICAgeyBwcm9wZXJ0eUlEOiBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfUEMsIHByb3BlcnR5TmFtZTogbXhSZXNvdXJjZXMuZ2V0KCdwY0Zvcm0nKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMud2ZfRXhlY3V0ZUZvcm1zX01vYmlsZSwgcHJvcGVydHlOYW1lOiBteFJlc291cmNlcy5nZXQoJ3dlYkZvcm0nKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IGFwcHJvdmFsUHJvcGVydHkgPSBuZXcgRWxlbWVudFByb3BlcnR5Q29uZmlnKCk7XHJcbiAgICAgICAgYXBwcm92YWxQcm9wZXJ0eS5jYXRlZ29yeUlkID0gJ2FjdGl2aXR5UHJvcGVydHknO1xyXG4gICAgICAgIGFwcHJvdmFsUHJvcGVydHkuY2F0ZWdvcnlOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdhY3Rpdml0eVByb3BlcnR5Jyk7XHJcbiAgICAgICAgYXBwcm92YWxQcm9wZXJ0eS50YWJJZCA9ICdiYXNpYyc7XHJcbiAgICAgICAgYXBwcm92YWxQcm9wZXJ0eS50YWJOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdiYXNpY0F0dHJpYnV0ZXMnKTtcclxuICAgICAgICBhcHByb3ZhbFByb3BlcnR5LnByb3BlcnRpZXMgPSBbXHJcbiAgICAgICAgICAgIHsgcHJvcGVydHlJRDogTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMuTm90aWZ5QWJsZSwgcHJvcGVydHlOYW1lOiBteFJlc291cmNlcy5nZXQoJ25vdGlmeUFibGUnKSwgcHJvcGVydHlUeXBlOiAnbW9kYWwnIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgYWN0aXZpdHlQcm9wZXJ0eS5jYXRlZ29yeUlkID0gJ2FkdmFuY2VkJztcclxuICAgICAgICBhY3Rpdml0eVByb3BlcnR5LmNhdGVnb3J5TmFtZSA9IG14UmVzb3VyY2VzLmdldCgnb3RoZXJDb25maWd1cmF0aW9ucycpO1xyXG4gICAgICAgIGFjdGl2aXR5UHJvcGVydHkudGFiSWQgPSAnYWR2YW5jZWQnO1xyXG4gICAgICAgIGFjdGl2aXR5UHJvcGVydHkudGFiTmFtZSA9IG14UmVzb3VyY2VzLmdldCgnYWR2YW5jZWRBdHRyaWJ1dGVzJyk7XHJcbiAgICAgICAgYWN0aXZpdHlQcm9wZXJ0eS5wcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICAgICB7IHByb3BlcnR5SUQ6IE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2UsIHByb3BlcnR5TmFtZTogbXhSZXNvdXJjZXMuZ2V0KCdtZXNzYWdlTm90aWNlJyksIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIOaJqeWxleWxnuaAp+WIhmdyb3Vw5aSE55CG77yM5q+P5LiqZ3JvdXDljIXlkKvniLbnuqflsZ7mgKflkozlsZ7kuo7lroPnmoTlrZDmianlsZXlsZ7mgKdcclxuICAgICAgICBjb25zdCBncm91cExpc3QgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGV4dGVuZCBvZiBleHRlbmRMaXN0KSB7XHJcbiAgICAgICAgICAgIGlmICghZXh0ZW5kLnBhcmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IHsgcGFyZW50OiBleHRlbmQsIGNoaWxkczogbmV3IEFycmF5KCkgfTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBleHRlbmRMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucGFyZW50SWQgPT09IGV4dGVuZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cC5jaGlsZHMucHVzaChlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBncm91cExpc3QucHVzaChncm91cClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmsqHmnInmianlsZXlsZ7mgKflgLznmoTml7blgJnkuI3mmL7npLrmianlsZXlsZ7mgKfkuIDmoI9cclxuICAgICAgICBpZiAoZ3JvdXBMaXN0ICYmIGdyb3VwTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBFeHRlbmRQcm9wZXJ0eUNvbmZpZzogRWxlbWVudFByb3BlcnR5Q29uZmlnID0gbmV3IEVsZW1lbnRQcm9wZXJ0eUNvbmZpZygpO1xyXG4gICAgICAgICAgICBFeHRlbmRQcm9wZXJ0eUNvbmZpZy5jYXRlZ29yeUlkID0gJ2V4dGVuZFByb3BlcnR5Q29uZmlnJztcclxuICAgICAgICAgICAgRXh0ZW5kUHJvcGVydHlDb25maWcuY2F0ZWdvcnlOYW1lID0gbXhSZXNvdXJjZXMuZ2V0KCdleHRlbmRQcm9wZXJ0eUNvbmZpZycpO1xyXG4gICAgICAgICAgICBFeHRlbmRQcm9wZXJ0eUNvbmZpZy50YWJJZCA9ICdhZHZhbmNlZCc7XHJcbiAgICAgICAgICAgIEV4dGVuZFByb3BlcnR5Q29uZmlnLnRhYk5hbWUgPSBteFJlc291cmNlcy5nZXQoJ2FkdmFuY2VkQXR0cmlidXRlcycpO1xyXG4gICAgICAgICAgICBFeHRlbmRQcm9wZXJ0eUNvbmZpZy5wcm9wZXJ0aWVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZyBvZiBncm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgIEV4dGVuZFByb3BlcnR5Q29uZmlnLnByb3BlcnRpZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB7IHByb3BlcnR5SUQ6IGcucGFyZW50LmlkLCBwcm9wZXJ0eU5hbWU6IGcucGFyZW50LnByb3BlcnR5VGl0bGUsIHByb3BlcnR5VHlwZTogJ21vZGFsJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5RGF0YShhY3QsIHByb3BlcnR5RGF0YSwgZ3JvdXBMaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5Q29uZmlnOiBbYmFzaWNQcm9wZXJ0eSwgcGVyZm9ybWVyUHJvcGVydHksIGZvcm1EZWYsIGFwcHJvdmFsUHJvcGVydHksIGFjdGl2aXR5UHJvcGVydHksIEV4dGVuZFByb3BlcnR5Q29uZmlnXSxcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5RGF0YTogcHJvcGVydHlEYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5RGF0YShhY3QsIHByb3BlcnR5RGF0YSwgZ3JvdXBMaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5Q29uZmlnOiBbYmFzaWNQcm9wZXJ0eSwgcGVyZm9ybWVyUHJvcGVydHksIGZvcm1EZWYsIGFwcHJvdmFsUHJvcGVydHksIGFjdGl2aXR5UHJvcGVydHldLFxyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlEYXRhOiBwcm9wZXJ0eURhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe7hOe7h1VzZXJBY3Rpdml0eeeahOWxnuaAp+WAvHByb3BlcnR5RGF0YVxyXG4gICAgICogQHBhcmFtIGFjdFxyXG4gICAgICogQHBhcmFtIHByb3BlcnR5RGF0YVxyXG4gICAgICovXHJcbiAgICBzZXRQcm9wZXJ0eURhdGEoYWN0OiBOb3RpZnlBY3Rpdml0eSwgcHJvcGVydHlEYXRhOiBhbnksIGdyb3VwTGlzdD86IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHByb3BlcnR5RGF0YVtOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5JZF0gPSBhY3QuSWQ7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLkNsclR5cGVJRF0gPSBhY3QuQ2xyVHlwZUlEO1xyXG4gICAgICAgIHByb3BlcnR5RGF0YVtOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5OYW1lXSA9IGFjdC5OYW1lO1xyXG4gICAgICAgIHByb3BlcnR5RGF0YVtOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5OYW1lTGFuZ3VhZ2VdID0gYWN0Lk5hbWVMYW5ndWFnZSB8fCB7XHJcbiAgICAgICAgICAgIFwiemgtQ0hTXCI6IGFjdC5OYW1lLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHByb3BlcnR5RGF0YVtOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5QYXJ0aWNpcGFudFNjaGVtZXNdID0gdGhpcy5nZXRQYXJ0aWNpcGFudEluZm8oYWN0KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLm1lc3NhZ2VOb3RpY2VdID0gUHJvcGVydHlIZWxwZXIuZ2V0TWVzc2FnZU5vdGljZXMoYWN0Lm1lc3NhZ2VOb3RpY2VzKTs7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQ10gPVxyXG4gICAgICAgICAgICBhY3QuZXhlY3V0ZUZvcm1zID8gYWN0LmV4ZWN1dGVGb3Jtcy5maW5kKGUgPT4gZS5UZXJtaW5hbFR5cGUgPT09ICdQQycpIDogbnVsbDtcclxuICAgICAgICBwcm9wZXJ0eURhdGFbTm90aWZ5QWN0aXZpdHlQcm9wZXJ0eUtleXMud2ZfRXhlY3V0ZUZvcm1zX01vYmlsZV0gPVxyXG4gICAgICAgICAgICBhY3QuZXhlY3V0ZUZvcm1zID8gYWN0LmV4ZWN1dGVGb3Jtcy5maW5kKGUgPT4gZS5UZXJtaW5hbFR5cGUgPT09ICdNT0JJTEUnKSA6IG51bGw7XHJcbiAgICAgICAgcHJvcGVydHlEYXRhW05vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLk5vdGlmeUFibGVdID0gUHJvcGVydHlIZWxwZXIuZ2V0Tm90aWZ5QWJsZShhY3Qubm90aWZ5QWJsZSwgYWN0LmR5bmFtaWNQYXJ0aWNpcGFudHMpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGcgb2YgZ3JvdXBMaXN0KSB7XHJcbiAgICAgICAgICAgIC8vIOWPluWbnuaooeWei+S4iueahHZhbHVl5YC857uZ5Yiw5omp5bGV5bGe5oCn57uE5Lu26YeMXHJcbiAgICAgICAgICAgIGlmIChhY3QuZXh0ZW5kUHJvcGVydGllcyAmJiBhY3QuZXh0ZW5kUHJvcGVydGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBnLmNoaWxkcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydE9yZGVyIC0gYi5zb3J0T3JkZXI7XHJcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKChkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3QuZXh0ZW5kUHJvcGVydGllcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT0gZC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlID0gZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvcGVydHlEYXRhW2cucGFyZW50LmlkXSA9IGcuY2hpbGRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXJ0aWNpcGFudEluZm8obm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5KTogUGFydGljaXBhbnRJbmZvIHtcclxuICAgICAgICBjb25zdCBwYXJ0aUluZm8gPSBuZXcgUGFydGljaXBhbnRJbmZvKCk7XHJcbiAgICAgICAgY29uc3Qgcm9sZXMgPSBub3RpZnlBY3Rpdml0eS5HZXRSZXNvdXJjZVJvbGVzKCkuZmlsdGVyKHJvbGUgPT4gcm9sZSBpbnN0YW5jZW9mIEh1bWFuUGVyZm9ybWVySW1wbCkgYXMgQXJyYXk8SHVtYW5QZXJmb3JtZXJJbXBsPjtcclxuICAgICAgICBwYXJ0aUluZm8uaHVtYW5QZXJmb3JtZXJMaXN0ID0gUHJvcGVydHlIZWxwZXIuZ2V0UGVyZm9ybWVyTGlzdChyb2xlcyk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnRpSW5mbztcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9wcyhvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vdGlmeUFjdGl2aXR5ID0gdGhpcy5mbG93RWxlbWVudDtcclxuICAgICAgICBjb25zdCBlZGl0b3JVaSA9IHRoaXMuZWRpdG9yVWk7XHJcbiAgICAgICAgY29uc3QgcHJvcGVydHlJZDogc3RyaW5nID0gb2JqLnByb3BlcnR5SUQ7XHJcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eUlkKSB7XHJcbiAgICAgICAgICAgIC8vIOWPguS4juiAheWxnuaAp1xyXG4gICAgICAgICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLlBhcnRpY2lwYW50U2NoZW1lczpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIG9iaik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5tZXNzYWdlTm90aWNlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlTm90aWNlcyhub3RpZnlBY3Rpdml0eSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5vdGlmeUFjdGl2aXR5UHJvcGVydHlLZXlzLndmX0V4ZWN1dGVGb3Jtc19QQzpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhcnRBY3Rpdml0eUZvcm0obm90aWZ5QWN0aXZpdHksIG9iaiwgJ1BDJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnBhcmFtZXRlcnMgJiYgb2JqLnBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SGVscGVyLnVwZGF0ZUZvcm1hbFBhcmFtZXRlcnMoZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLCBvYmoucGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy53Zl9FeGVjdXRlRm9ybXNfTW9iaWxlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGFydEFjdGl2aXR5Rm9ybShub3RpZnlBY3Rpdml0eSwgb2JqLCAnTU9CSUxFJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnBhcmFtZXRlcnMgJiYgb2JqLnBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SGVscGVyLnVwZGF0ZUZvcm1hbFBhcmFtZXRlcnMoZWRpdG9yVWkuZ3JhcGguYnBtbk1vZGVsLkRlZmF1bHRQcm9jZXNzLCBvYmoucGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBOb3RpZnlBY3Rpdml0eVByb3BlcnR5S2V5cy5Ob3RpZnlBYmxlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOb3RpZnlTZXQobm90aWZ5QWN0aXZpdHksIG9iaik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIOWIpOaWrVJlc291cmNlS2V5c+aYr+S4jeaYr2dyb3VwaWQs5piv5bCx6LWwcmVzZXRFeHRlbmRQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdG9yVWkucHJvY0V4dFByb3BzLmZpbmRJbmRleChwID0+IHAuaWQgPT09IHByb3BlcnR5SWQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0RXh0ZW5kUHJvcGVydHkobm90aWZ5QWN0aXZpdHksIG9iaik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLnVwZGF0ZVByb3BzKG9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHBlcmZvcm1lckluZm86IFBhcnRpY2lwYW50SW5mbyA9IG9iai5wcm9wZXJ0eVZhbHVlO1xyXG5cclxuICAgICAgICBjb25zdCByZXNvdXJjZVJvbGVzID0gbm90aWZ5QWN0aXZpdHkuR2V0UmVzb3VyY2VSb2xlcygpO1xyXG4gICAgICAgIGlmIChyZXNvdXJjZVJvbGVzICYmIHJlc291cmNlUm9sZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXNvdXJjZVJvbGVzLmZvckVhY2gociA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIEh1bWFuUGVyZm9ybWVySW1wbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LlJlbW92ZVJlc291cmNlUm9sZShyLklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwZXJmb3JtZXJJbmZvLmh1bWFuUGVyZm9ybWVyTGlzdCAmJiBwZXJmb3JtZXJJbmZvLmh1bWFuUGVyZm9ybWVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaHVtYW5QZXJmb3JtZXIgb2YgcGVyZm9ybWVySW5mby5odW1hblBlcmZvcm1lckxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoaHVtYW5QZXJmb3JtZXIudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVXNlclBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVc2VyUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIGh1bWFuUGVyZm9ybWVyIGFzIFVzZXJQYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9zaXRpb25QYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgaHVtYW5QZXJmb3JtZXIgYXMgUG9zaXRpb25QYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmFyaWFibGVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgaHVtYW5QZXJmb3JtZXIgYXMgVmFyaWFibGVQZXJmb3JtZXIsICdodW1hblBlcmZvcm1lcicsIG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29tcG9uZW50UGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENvbXBvbmVudFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBodW1hblBlcmZvcm1lciBhcyBDb21wb25lbnRQYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIGh1bWFuUGVyZm9ybWVyIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIGh1bWFuUGVyZm9ybWVyIGFzIEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWF0cml4UGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdHJpeFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBodW1hblBlcmZvcm1lciBhcyBNYXRyaXhQYXJ0aWNpcGFudCwgJ2h1bWFuUGVyZm9ybWVyJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBhZGRVc2VyUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBwZXJmb3JtZXI6IFVzZXJQYXJ0aWNpcGFudCwgdHlwZTogc3RyaW5nLCAgc2NvcGU6IEFjdGlvblNjb3BlKSB7XHJcbiAgICAgICAgbGV0IHVzZXJQYXJ0aWNpcGFudCA9IG5ldyBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwZXJmb3JtZXIucGVyZm9ybWVySWQsIHBlcmZvcm1lci5wZXJmb3JtZXJOYW1lLCBwZXJmb3JtZXIub3JnVHlwZSk7XHJcbiAgICAgICAgdXNlclBhcnRpY2lwYW50LmlkID0gcGVyZm9ybWVyLmlkO1xyXG4gICAgICAgIHVzZXJQYXJ0aWNpcGFudC5PcmdJZCA9IHBlcmZvcm1lci5vcmdJZDtcclxuICAgICAgICB1c2VyUGFydGljaXBhbnQuT3JnTmFtZSA9IHBlcmZvcm1lci5vcmdOYW1lO1xyXG4gICAgICAgIHVzZXJQYXJ0aWNpcGFudC5UYWcgPSBwZXJmb3JtZXIudGFnO1xyXG4gICAgICAgIHVzZXJQYXJ0aWNpcGFudC5PcmdUeXBlID0gcGVyZm9ybWVyLm9yZ1R5cGU7XHJcbiAgICAgICAgdXNlclBhcnRpY2lwYW50Lm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IHVzZXJQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKHBlcmZvcm1lci5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGVyZm9ybWVyLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBsZXQgb3RlbnRpYWxPd25lckltcGwgPSBuZXcgUG90ZW50aWFsT3duZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gdXNlclBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgdXNlclBhcnRpY2lwYW50LmFjdGlvblNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2godXNlclBhcnRpY2lwYW50KTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRWYXJpYWJsZVBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgcGVyZm9ybWVyOiBWYXJpYWJsZVBlcmZvcm1lciwgdHlwZTogc3RyaW5nLCBzY29wZTogQWN0aW9uU2NvcGUpIHtcclxuICAgICAgICBsZXQgdmFyaWFibGVQZXJmb3JtZXIgPSBuZXcgVmFyaWFibGVQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwsIHBlcmZvcm1lci5wZXJmb3JtZXJJZCwgcGVyZm9ybWVyLnBlcmZvcm1lck5hbWUsIHBlcmZvcm1lci5vcmdUeXBlKTtcclxuICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5pZCA9IHBlcmZvcm1lci5pZDtcclxuICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5OYW1lID0gcGVyZm9ybWVyLnBlcmZvcm1lck5hbWUgPyBwZXJmb3JtZXIucGVyZm9ybWVyTmFtZSA6IHBlcmZvcm1lci5uYW1lOztcclxuICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5UYWcgPSBwZXJmb3JtZXIudGFnO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLlZhclZhbHVlID0gcGVyZm9ybWVyLnZhclZhbHVlO1xyXG4gICAgICAgIHZhcmlhYmxlUGVyZm9ybWVyLlZhclR5cGUgPSBwZXJmb3JtZXIudmFyVHlwZTtcclxuICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5SZWxhdGlvbiA9IHBlcmZvcm1lci5yZWxhdGlvbjtcclxuICAgICAgICB2YXJpYWJsZVBlcmZvcm1lci5vcmRlciA9IHBlcmZvcm1lci5vcmRlcjtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSB2YXJpYWJsZVBlcmZvcm1lcjtcclxuICAgICAgICAgICAgaWYgKHBlcmZvcm1lci5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGVyZm9ybWVyLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb3RlbnRpYWxPd25lcicpIHtcclxuICAgICAgICAgICAgbGV0IG90ZW50aWFsT3duZXJJbXBsID0gbmV3IFBvdGVudGlhbE93bmVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IHZhcmlhYmxlUGVyZm9ybWVyO1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFibGVQZXJmb3JtZXIuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaCh2YXJpYWJsZVBlcmZvcm1lcik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShvdGVudGlhbE93bmVySW1wbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUG9zaXRpb25QYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIHBlcmZvcm1lcjogUG9zaXRpb25QYXJ0aWNpcGFudCwgdHlwZTogc3RyaW5nICwgc2NvcGU6IEFjdGlvblNjb3BlKSB7XHJcbiAgICAgICAgbGV0IHBvc2lQYXJ0aWNpcGFudCA9IG5ldyBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCwgcGVyZm9ybWVyLnBlcmZvcm1lcklkLCBwZXJmb3JtZXIucGVyZm9ybWVyTmFtZSk7XHJcbiAgICAgICAgcG9zaVBhcnRpY2lwYW50LmlkID0gcGVyZm9ybWVyLmlkO1xyXG4gICAgICAgIHBvc2lQYXJ0aWNpcGFudC5Qb3NpdGlvblR5cGUgPSBwZXJmb3JtZXIucG9zaXRpb25UeXBlO1xyXG4gICAgICAgIHBvc2lQYXJ0aWNpcGFudC5vcmRlciA9IHBlcmZvcm1lci5vcmRlcjtcclxuICAgICAgICBpZiAocGVyZm9ybWVyLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgIHBvc2lQYXJ0aWNpcGFudC5PcmdJZCA9IHBlcmZvcm1lci5vcmdJZDtcclxuICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50Lk9yZ05hbWUgPSBwZXJmb3JtZXIub3JnTmFtZTtcclxuICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50Lk9yZ1R5cGUgPSBwZXJmb3JtZXIub3JnVHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgbGV0IGh1bWFuUGVyZm9ybWVySW1wbCA9IG5ldyBIdW1hblBlcmZvcm1lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gcG9zaVBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwZXJmb3JtZXIub3JkZXI7XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShodW1hblBlcmZvcm1lckltcGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBsZXQgb3RlbnRpYWxPd25lckltcGwgPSBuZXcgUG90ZW50aWFsT3duZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gcG9zaVBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgICBpZiAocGVyZm9ybWVyLmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwZXJmb3JtZXIuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gcGVyZm9ybWVyLm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50LmFjdGlvblNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2gocG9zaVBhcnRpY2lwYW50KTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRDb21wb25lbnRQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIGNvbXBvbmVudDogQ29tcG9uZW50UGFydGljaXBhbnQsIHR5cGU6IHN0cmluZyAsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgIGxldCBjb21wb25lbnRQYXJ0aWNpcGFudCA9IG5ldyBDb21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50LmlkID0gY29tcG9uZW50LmlkO1xyXG4gICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50LmNvbXBvbmVudElkID0gY29tcG9uZW50Lm1ldGFkYXRhSWQ7XHJcbiAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQuY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50Lm1ldGhvZE5hbWUgPSBjb21wb25lbnQubWV0aG9kTmFtZTtcclxuICAgICAgICBjb21wb25lbnRQYXJ0aWNpcGFudC5tZXRob2RDb2RlID0gY29tcG9uZW50Lm1ldGhvZENvZGU7XHJcbiAgICAgICAgY29tcG9uZW50UGFydGljaXBhbnQub3JkZXIgPSBjb21wb25lbnQub3JkZXI7XHJcblxyXG4gICAgICAgIGlmIChjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycyAmJiBjb21wb25lbnQuYWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBhY3RQYXJhcyA9IG5ldyBBcnJheTxBY3R1YWxQYXJhbWV0ZXI+KCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHBhcmEgb2YgY29tcG9uZW50LmFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhY3RQYXJhID0gbmV3IEFjdHVhbFBhcmFtZXRlcihub3RpZnlBY3Rpdml0eS5Nb2RlbCwgcGFyYS5jb2RlLCBwYXJhLnZhbHVlLCBwYXJhLnZhbHVlVGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzrmm7TmlrDlj4LkuI7ogIXkvJrpu5jorqTmiormnoTku7blj4LmlbDlsZ7mgKfmlLnkuLpjb250YW5077yM5Li05pe25L+u5aSN77yM5ZCO57ut5Luj56CB5LyY5YyWXHJcbiAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9IHBhcmEudGFnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmEuZmV0Y2hWYWx1ZU1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcmEuZmV0Y2hWYWx1ZU1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhwcmVzcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9ICdleHByZXNzaW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFBhcmEuVGFnID0gJ2V4cHJlc3Npb24nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9ICdjb25zdGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhY3RQYXJhcy5wdXNoKGFjdFBhcmEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50LmFjdHVhbFBhcmFtZXRlcnMgPSBhY3RQYXJhcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdodW1hblBlcmZvcm1lcicpIHtcclxuICAgICAgICAgICAgbGV0IGh1bWFuUGVyZm9ybWVySW1wbCA9IG5ldyBIdW1hblBlcmZvcm1lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gY29tcG9uZW50UGFydGljaXBhbnQ7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IGNvbXBvbmVudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5vcmRlciA9IGNvbXBvbmVudC5vcmRlcjtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBjb21wb25lbnRQYXJ0aWNpcGFudDtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gY29tcG9uZW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5vcmRlciA9IGNvbXBvbmVudC5vcmRlcjtcclxuICAgICAgICAgICAgaWYoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFBhcnRpY2lwYW50LmFjdGlvblNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLnB1c2goY29tcG9uZW50UGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eTogTm90aWZ5QWN0aXZpdHksIHBhcnRpY2lwYW50OiBSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQsIHR5cGU6IHN0cmluZyAsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgIGxldCByZXBvcnRpbmdMaW5lID0gbmV3IFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuaWQgPSBwYXJ0aWNpcGFudC5pZDtcclxuICAgICAgICByZXBvcnRpbmdMaW5lLlJlcG9ydGluZ0xpbmVEZWZJZCA9IHBhcnRpY2lwYW50LnJlcG9ydGluZ0xpbmVEZWZJZDtcclxuICAgICAgICByZXBvcnRpbmdMaW5lLlJlcG9ydGluZ0xpbmVEZWZOYW1lID0gcGFydGljaXBhbnQucmVwb3J0aW5nTGluZURlZk5hbWU7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5SZWZPcmdJZCA9IHBhcnRpY2lwYW50LnJlZk9yZ0lkO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuUmVmVXNlcklkID0gcGFydGljaXBhbnQucmVmVXNlcklkO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuUmVmRW1wbG95ZWVJZCA9IHBhcnRpY2lwYW50LnJlZkVtcGxveWVlSWQ7XHJcbiAgICAgICAgcmVwb3J0aW5nTGluZS5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuRGltZW5zaW9uID0gcGFydGljaXBhbnQuZGltZW5zaW9uO1xyXG4gICAgICAgIHJlcG9ydGluZ0xpbmUuVGFnID0gcGFydGljaXBhbnQudGFnO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSByZXBvcnRpbmdMaW5lO1xyXG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShodW1hblBlcmZvcm1lckltcGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3BvdGVudGlhbE93bmVyJykge1xyXG4gICAgICAgICAgICBsZXQgb3RlbnRpYWxPd25lckltcGwgPSBuZXcgUG90ZW50aWFsT3duZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gcmVwb3J0aW5nTGluZTtcclxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gbmV3IENvbmRpdGlvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgaWYoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydGluZ0xpbmUuYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaChyZXBvcnRpbmdMaW5lKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBwYXJ0aWNpcGFudDogQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LCB0eXBlOiBzdHJpbmcgLCBzY29wZTogQWN0aW9uU2NvcGUpIHtcclxuICAgICAgICBsZXQgYWN0aXZpdHlFeGVjdXRvciA9IG5ldyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmlkID0gcGFydGljaXBhbnQuaWQ7XHJcbiAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZklkID0gcGFydGljaXBhbnQuYWN0aXZpdHlEZWZJZDtcclxuICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZk5hbWUgPSBwYXJ0aWNpcGFudC5hY3Rpdml0eURlZk5hbWU7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBodW1hblBlcmZvcm1lckltcGwgPSBuZXcgSHVtYW5QZXJmb3JtZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IGFjdGl2aXR5RXhlY3V0b3I7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBhY3Rpdml0eUV4ZWN1dG9yO1xyXG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5vcmRlciA9IHBhcnRpY2lwYW50Lm9yZGVyO1xyXG4gICAgICAgICAgICBpZihzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpb25TY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKGFjdGl2aXR5RXhlY3V0b3IpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUob3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZE1hdHJpeFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgcGFydGljaXBhbnQ6IE1hdHJpeFBhcnRpY2lwYW50LCB0eXBlOiBzdHJpbmcgLCBzY29wZTogQWN0aW9uU2NvcGUpIHtcclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgbWF0cml4Lm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgbWF0cml4LmlkID0gcGFydGljaXBhbnQuaWQ7XHJcbiAgICAgICAgbWF0cml4Lm1hdHJpeERlZklkID0gcGFydGljaXBhbnQubWF0cml4RGVmSWQ7XHJcbiAgICAgICAgbWF0cml4Lm1hdHJpeERlZk5hbWUgPSBwYXJ0aWNpcGFudC5tYXRyaXhEZWZOYW1lO1xyXG4gICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZDEgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZDE7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDEgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZFRleHQxO1xyXG4gICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZDIgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZDI7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDIgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZFRleHQyO1xyXG4gICAgICAgIG1hdHJpeC5jb25kaXRpb25GaWVsZDMgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZDM7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbkZpZWxkVGV4dDMgPSBwYXJ0aWNpcGFudC5jb25kaXRpb25GaWVsZFRleHQzO1xyXG4gICAgICAgIG1hdHJpeC5tdWx0aXZhbHVlZENvbmRpdGlvbiA9IHBhcnRpY2lwYW50Lm11bHRpdmFsdWVkQ29uZGl0aW9uO1xyXG4gICAgICAgIG1hdHJpeC5kYXRhRmllbGRBbGlhcyA9IHBhcnRpY2lwYW50LmRhdGFGaWVsZEFsaWFzO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2h1bWFuUGVyZm9ybWVyJykge1xyXG4gICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIGh1bWFuUGVyZm9ybWVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBtYXRyaXg7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBvdGVudGlhbE93bmVySW1wbCA9IG5ldyBQb3RlbnRpYWxPd25lckltcGwobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICBvdGVudGlhbE93bmVySW1wbC5wYXJ0aWNpcGFudEV4cHJlc3Npb24gPSBtYXRyaXg7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRyaXguYWN0aW9uU2NvcGUgPSBzY29wZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMucHVzaChtYXRyaXgpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShvdGVudGlhbE93bmVySW1wbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQWN0aXZpdHlcclxuICAgICAqIEBwYXJhbSBwYXJ0aWNpcGFudFxyXG4gICAgICogQHBhcmFtIHR5cGVcclxuICAgICAqL1xyXG4gICAgICAgIGFkZE9yZ2FuaXphdGlvblBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgcGFydGljaXBhbnQ6IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50LCB0eXBlOiBzdHJpbmcsIHNjb3BlOiBBY3Rpb25TY29wZSkge1xyXG4gICAgICAgICAgICBsZXQgcG90ZW50aWFsID0gbmV3IE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbC5pZCA9IHBhcnRpY2lwYW50LmlkO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgcG90ZW50aWFsLmFjdGlvblNjb3BlID0gQWN0aW9uU2NvcGUuQXNzaWduVXNlcjtcclxuICAgICAgICAgICAgcG90ZW50aWFsLm9yZ2FuaXphdGlvbkxldmVsID0gcGFydGljaXBhbnQub3JnYW5pemF0aW9uTGV2ZWwgYXMgYW55O1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwub3JnYW5pemF0aW9uSWQgPSBwYXJ0aWNpcGFudC5vcmdhbml6YXRpb25JZDtcclxuICAgICAgICAgICAgcG90ZW50aWFsLm9yZ2FuaXphdGlvbk5hbWUgPSBwYXJ0aWNpcGFudC5vcmdhbml6YXRpb25OYW1lO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwuaW5jbHVkZUNoaWxkcmVuID0gcGFydGljaXBhbnQuaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICAgICAgICBwb3RlbnRpYWwudGFnID0gcGFydGljaXBhbnQudGFnO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uLlZhbHVlID0gcGFydGljaXBhbnQuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgcG90ZW50aWFsLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnaHVtYW5QZXJmb3JtZXInKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaHVtYW5QZXJmb3JtZXJJbXBsID0gbmV3IEh1bWFuUGVyZm9ybWVySW1wbChub3RpZnlBY3Rpdml0eS5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwucGFydGljaXBhbnRFeHByZXNzaW9uID0gcG90ZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5ldyBDb25kaXRpb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbi5WYWx1ZSA9IHBhcnRpY2lwYW50LmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBodW1hblBlcmZvcm1lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaHVtYW5QZXJmb3JtZXJJbXBsLm9yZGVyID0gcGFydGljaXBhbnQub3JkZXI7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoaHVtYW5QZXJmb3JtZXJJbXBsKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncG90ZW50aWFsT3duZXInKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3RlbnRpYWxPd25lckltcGwgPSBuZXcgUG90ZW50aWFsT3duZXJJbXBsKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgIG90ZW50aWFsT3duZXJJbXBsLnBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IHBvdGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5jb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb24gPSBuZXcgQ29uZGl0aW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb24uVmFsdWUgPSBwYXJ0aWNpcGFudC5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwuY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3RlbnRpYWxPd25lckltcGwub3JkZXIgPSBwYXJ0aWNpcGFudC5vcmRlcjtcclxuICAgICAgICAgICAgICAgIGlmKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsLmFjdGlvblNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKHBvdGVudGlhbCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG90ZW50aWFsT3duZXJJbXBsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgdXBkYXRlU3RhcnRBY3Rpdml0eUZvcm0obm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBvYmo6IGFueSwgdGVybWluYWw6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChub3RpZnlBY3Rpdml0eSkge1xyXG4gICAgICAgICAgICBsZXQgZm9ybSA9IG9iai5wcm9wZXJ0eVZhbHVlIGFzIGFueTtcclxuICAgICAgICAgICAgaWYgKCFub3RpZnlBY3Rpdml0eS5leGVjdXRlRm9ybXMpIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4ZWN1dGVGb3JtcyA9IG5ldyBBcnJheTxFeGVjdXRlRm9ybT4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5leGVjdXRlRm9ybXMgPSBub3RpZnlBY3Rpdml0eS5leGVjdXRlRm9ybXMuZmlsdGVyKGUgPT4gZS5UZXJtaW5hbFR5cGUgIT09IHRlcm1pbmFsKTtcclxuICAgICAgICAgICAgaWYgKGZvcm0pIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJhbXMgPSBmb3JtLkFjdHVhbFBhcmFtZXRlcnMgYXMgYW55W107XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0UGFyYXMgPSBuZXcgQXJyYXk8QWN0dWFsUGFyYW1ldGVyPigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHBhcmEgb2YgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3RQYXJhID0gbmV3IEFjdHVhbFBhcmFtZXRlcihub3RpZnlBY3Rpdml0eS5Nb2RlbCwgcGFyYS5OYW1lLCBwYXJhLlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmEuVGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhLlRhZyA9IHBhcmEuVGFnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmEuVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYS5WYWx1ZS5sZW5ndGggPj0gOCAmJiBwYXJhLlZhbHVlLnNsaWNlKDAsIDgpID09PSBge1wiZXhwclwiOmApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSAnZXhwcmVzc2lvbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSAnY29uc3RhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0UGFyYS5UYWcgPSAndmFyaWFibGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RQYXJhcy5wdXNoKGFjdFBhcmEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBFeGVjdXRlRm9ybShub3RpZnlBY3Rpdml0eS5Nb2RlbCwgaWQsIGZvcm0uTmFtZSwgYWN0UGFyYXMpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5Db21wb25lbnRJZCA9IGZvcm0uQ29tcG9uZW50SWQ7XHJcbiAgICAgICAgICAgICAgICBpdGVtLkZvcm1UeXBlID0gZm9ybS5Gb3JtVHlwZTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZm9ybUZvcm1hdElkID0gZm9ybS5mb3JtRm9ybWF0SWQ7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmZvcm1hdENvbmZpZ0lkID0gZm9ybS5mb3JtYXRDb25maWdJZDtcclxuICAgICAgICAgICAgICAgIGl0ZW0uVGVybWluYWxUeXBlID0gZm9ybS5UZXJtaW5hbFR5cGU7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5leGVjdXRlRm9ybXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVOb3RpZnlTZXQobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlID0gb2JqLnByb3BlcnR5VmFsdWUgYXMgQWN0aW9uT3JnYW5pemF0aW9uU2NvcGVEZXNpZ247XHJcblxyXG4gICAgICAgIG5vdGlmeUFjdGl2aXR5LmR5bmFtaWNQYXJ0aWNpcGFudHMgPSBub3RpZnlBY3Rpdml0eS5keW5hbWljUGFydGljaXBhbnRzLmZpbHRlcihwID0+IChwIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbikuYWN0aW9uU2NvcGUgIT09IEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgbm90aWZ5QWN0aXZpdHkubm90aWZ5QWJsZSA9IHNjb3BlLmVuYWJsZTtcclxuICAgICAgICBpZiAoc2NvcGUuc2NvcGUpIHtcclxuICAgICAgICAgICAgaWYoc2NvcGUuc2NvcGUub3JnYW5pemF0aW9uTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbiA9IG5ldyBPcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24uYWN0aW9uU2NvcGUgPSBBY3Rpb25TY29wZS5Ob3RpZnk7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24ub3JnYW5pemF0aW9uTGV2ZWwgPSBzY29wZS5zY29wZS5vcmdhbml6YXRpb25MZXZlbCBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24ub3JnYW5pemF0aW9uSWQgPSBzY29wZS5zY29wZS5vcmdhbml6YXRpb25JZDtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5vcmdhbml6YXRpb25OYW1lID0gc2NvcGUuc2NvcGUub3JnYW5pemF0aW9uTmFtZTtcclxuICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbi5pbmNsdWRlQ2hpbGRyZW4gPSBzY29wZS5zY29wZS5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24udGFnID0gc2NvcGUuc2NvcGUudGFnO1xyXG4gICAgICAgICAgICAgICAgbm90aWZ5QWN0aXZpdHkuZHluYW1pY1BhcnRpY2lwYW50cy5wdXNoKG9yZ2FuaXphdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcmZvcm1lckluZm86IFBhcnRpY2lwYW50SW5mbyA9IHNjb3BlLnNjb3BlLnBhcnRpY2lwYW50SW5mbyBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGVyZm9ybWVySW5mby5pc0FsbFNjb3BlICYmIHBlcmZvcm1lckluZm8ucG90ZW50aWFsT3duZXJMaXN0ICYmIHBlcmZvcm1lckluZm8ucG90ZW50aWFsT3duZXJMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBvdGVudGlhbE93bmVyIG9mIHBlcmZvcm1lckluZm8ucG90ZW50aWFsT3duZXJMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG90ZW50aWFsT3duZXIudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVXNlclBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBVc2VyUGFydGljaXBhbnQsICdwb3RlbnRpYWxPd25lcicsIEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZhcmlhYmxlUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmFyaWFibGVQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgcG90ZW50aWFsT3duZXIgYXMgVmFyaWFibGVQZXJmb3JtZXIsICdwb3RlbnRpYWxPd25lcicsIEFjdGlvblNjb3BlLk5vdGlmeSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUG9zaXRpb25QYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQb3NpdGlvblBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBQb3NpdGlvblBhcnRpY2lwYW50LCAncG90ZW50aWFsT3duZXInLCBBY3Rpb25TY29wZS5Ob3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb21wb25lbnRQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDb21wb25lbnRQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgcG90ZW50aWFsT3duZXIgYXMgQ29tcG9uZW50UGFydGljaXBhbnQsICdwb3RlbnRpYWxPd25lcicsIEFjdGlvblNjb3BlLk5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudEV4cHJlc3Npb24uQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSZXBvcnRpbmdMaW5lUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIHBvdGVudGlhbE93bmVyIGFzIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCwgJ3BvdGVudGlhbE93bmVyJywgQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudChub3RpZnlBY3Rpdml0eSwgcG90ZW50aWFsT3duZXIgYXMgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50LCAncG90ZW50aWFsT3duZXInLCBBY3Rpb25TY29wZS5Ob3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO25vdGlmeUFjdGl2aXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1hdHJpeFBhcnRpY2lwYW50RXhwcmVzc2lvbi5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdHJpeFBhcnRpY2lwYW50KG5vdGlmeUFjdGl2aXR5LCBwb3RlbnRpYWxPd25lciBhcyBNYXRyaXhQYXJ0aWNpcGFudCwgJ3BvdGVudGlhbE93bmVyJywgQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgT3JnYW5pemF0aW9uUGFydGljaXBhbnRFeHByZXNzaW9uLkNscl9UeXBlX0lEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkT3JnYW5pemF0aW9uUGFydGljaXBhbnQobm90aWZ5QWN0aXZpdHksIHBvdGVudGlhbE93bmVyIGFzIE9yZ2FuaXphdGlvblBhcnRpY2lwYW50LCAncG90ZW50aWFsT3duZXInICwgQWN0aW9uU2NvcGUuTm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOefpeS8mua0u+WKqOaJqeWxleWxnuaAp1xyXG4gICAgICogQHBhcmFtIG5vdGlmeUFjdGl2aXR5XHJcbiAgICAgKiBAcGFyYW0gb2JqXHJcbiAgICAgKi9cclxuICAgIHJlc2V0RXh0ZW5kUHJvcGVydHkobm90aWZ5QWN0aXZpdHk6IE5vdGlmeUFjdGl2aXR5LCBvYmo6IGFueSkge1xyXG4gICAgICAgIGlmIChub3RpZnlBY3Rpdml0eSkge1xyXG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IG9iai5wcm9wZXJ0eVZhbHVlIGFzIGFueTtcclxuICAgICAgICAgICAgaWYgKCFub3RpZnlBY3Rpdml0eS5leHRlbmRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5leHRlbmRQcm9wZXJ0aWVzID0gbmV3IEFycmF5PEV4dGVuZFByb3BlcnR5PigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBvYmoucHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBub3RpZnlBY3Rpdml0eS5leHRlbmRQcm9wZXJ0aWVzLmZpbmRJbmRleChlID0+IGUua2V5ID09PSBvLmNvZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5leHRlbmRQcm9wZXJ0aWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaCgoYTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBuZXcgRXh0ZW5kUHJvcGVydHkobm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ua2V5ID0gYS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmeUFjdGl2aXR5LmV4dGVuZFByb3BlcnRpZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1lc3NhZ2VOb3RpY2VzKG5vdGlmeUFjdGl2aXR5OiBOb3RpZnlBY3Rpdml0eSwgb2JqOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBicG1uTW9kZWwgPSBub3RpZnlBY3Rpdml0eS5Nb2RlbDtcclxuICAgICAgICBsZXQgbm90aWNlcyA9IG9iai5wcm9wZXJ0eVZhbHVlIGFzIGFueVtdO1xyXG4gICAgICAgIG5vdGlmeUFjdGl2aXR5Lm1lc3NhZ2VOb3RpY2VzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgaWYgKG5vdGljZXMgJiYgbm90aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IG4gb2Ygbm90aWNlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZU5vdGljZSA9IG5ldyBNZXNzYWdlTm90aWNlKGJwbW5Nb2RlbCk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnNlbmRUeXBlID0gbi5zZW5kVHlwZTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2Uuc2VuZFRpbWUgPSBuLnNlbmRUaW1lO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5zdWJqZWN0ID0gbi5zdWJqZWN0O1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU5vdGljZS5jb250ZW50ID0gbi5jb250ZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuLnNtc01lc3NhZ2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtc01lc3NhZ2VUZW1wbGF0ZSA9IG5ldyBTbXNNZXNzYWdlVGVtcGxhdGUoYnBtbk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBzbXNNZXNzYWdlVGVtcGxhdGUuY29kZSA9IG4uc21zTWVzc2FnZVRlbXBsYXRlLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgc21zTWVzc2FnZVRlbXBsYXRlLmNvbnRlbnQgPSBuLnNtc01lc3NhZ2VUZW1wbGF0ZS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uc21zTWVzc2FnZVRlbXBsYXRlLnNtc01lc3NhZ2VWYXJpYWJsZXMgJiYgbi5zbXNNZXNzYWdlVGVtcGxhdGUuc21zTWVzc2FnZVZhcmlhYmxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBuLnNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYWJsZSA9IG5ldyBTbXNNZXNzYWdlVmFyaWFibGUoYnBtbk1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlLmNvZGUgPSB2LmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS52YWx1ZSA9IHYudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZS50YWcgPSB2LnRhZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtc01lc3NhZ2VUZW1wbGF0ZS5zbXNNZXNzYWdlVmFyaWFibGVzLnB1c2godmFyaWFibGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2Uuc21zTWVzc2FnZVRlbXBsYXRlID0gc21zTWVzc2FnZVRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gbWVzc2FnZU5vdGljZS5yZWNlaXZlciA9IG4ucmVjZWl2ZXI7XHJcbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlTm90aWNlLnJlY2VpdmVyVGV4dCA9IG4ucmVjZWl2ZXJUZXh0O1xyXG4gICAgICAgICAgICAgICAgbi5yZWNlaXZlcnMgPSBuLnJlY2VpdmVycy5maWx0ZXIoKHI6IGFueSkgPT4gci50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmIChuLnJlY2VpdmVycyAmJiBuLnJlY2VpdmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWl2ZXJzID0gbi5yZWNlaXZlcnMuZmlsdGVyKChyOiBhbnkpID0+IHIudHlwZSA9PT0gJ3VzZXJQYXJ0aWNpcGFudCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHIudHlwZSA9PT0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCcgJiYgci5wcm9jZXNzUGFydGljaXBhbnQgIT09ICdhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gbi5yZWNlaXZlcnMuZmlsdGVyKChyOiBhbnkpID0+IHIudHlwZSA9PT0gJ3ZhcmlhYmxlUGFydGljaXBhbnQnIHx8IHIudHlwZSA9PT0gJ3Bvc2l0aW9uUGFydGljaXBhbnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IChyLnR5cGUgPT09ICdwcm9jZXNzUGFydGljaXBhbnQnICYmIHIucHJvY2Vzc1BhcnRpY2lwYW50ID09PSAnYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50JykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlcnMgJiYgcmVjZWl2ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY2VpdmVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWNlaXZlck5hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHJlY2VpdmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIudHlwZSA9PT0gJ3Byb2Nlc3NQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlciArPSAoci5wcm9jZXNzUGFydGljaXBhbnQgKyAnLCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnByb2Nlc3NQYXJ0aWNpcGFudCA9PT0gJ3Byb2NJbnN0Q3JlYXRvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJOYW1lICs9ICfmtYHnqIvlj5HotbfkurosJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoci5wcm9jZXNzUGFydGljaXBhbnQgPT09ICd3b3JrSXRlbVBhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWUgKz0gJ+S7u+WKoeaOpeaUtuS6uiwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLnR5cGUgPT09ICd1c2VyUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIgKz0gKHIudXNlcklkcyArICcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJOYW1lICs9IChyLnVzZXJOYW1lcyArICcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpdmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlciA9IHJlY2VpdmVyLnN1YnN0cmluZygwLCByZWNlaXZlci5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWUgPSByZWNlaXZlck5hbWUuc3Vic3RyaW5nKDAsIHJlY2VpdmVyTmFtZS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnJlY2VpdmVyID0gcmVjZWl2ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VOb3RpY2UucmVjZWl2ZXJUZXh0ID0gcmVjZWl2ZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydGljaXBhbnRzICYmIHBhcnRpY2lwYW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVyRXhwcmVzc2lvbnMgPSBuZXcgQXJyYXk8UGFydGljaXBhbnRFeHByZXNzaW9uPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcGFydGljaXBhbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAncHJvY2Vzc1BhcnRpY2lwYW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpdml0eUV4ZWN1dG9yID0gbmV3IEFjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudEV4cHJlc3Npb24obm90aWZ5QWN0aXZpdHkuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5RXhlY3V0b3IuaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUV4ZWN1dG9yLmFjdGl2aXR5RGVmSWQgPSBwLmFjdGl2aXR5RGVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlFeGVjdXRvci5hY3Rpdml0eURlZk5hbWUgPSBwLmFjdGl2aXR5RGVmTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2goYWN0aXZpdHlFeGVjdXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAndmFyaWFibGVQYXJ0aWNpcGFudCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFyaWFibGVQYXJ0aWNpcGFudCA9IG5ldyBVc2VyUGFydGljaXBhbnRFeHByZXNzaW9uKG5vdGlmeUFjdGl2aXR5Lk1vZGVsLCBwLnZhcmlhYmxlUGFydGljaXBhbnQsIHAudmFyaWFibGVOYW1lLCBwLm9yZ1R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlUGFydGljaXBhbnQuaWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBhcnRpY2lwYW50LlRhZyA9ICdleHByZXNzaW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVBhcnRpY2lwYW50Lk9yZ1R5cGUgPSBwLm9yZ1R5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJFeHByZXNzaW9ucy5wdXNoKHZhcmlhYmxlUGFydGljaXBhbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAudHlwZSA9PT0gJ3Bvc2l0aW9uUGFydGljaXBhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2lQYXJ0aWNpcGFudCA9IG5ldyBQb3NpdGlvblBhcnRpY2lwYW50RXhwcmVzc2lvbihub3RpZnlBY3Rpdml0eS5Nb2RlbCwgcC5wb3NpdGlvbklkLCBwLnBvc2l0aW9uTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50LmlkID0gQnBtbk1vZGVsSGVscGVyLkdlbmVyYXRlRWxlbWVudElkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaVBhcnRpY2lwYW50LlBvc2l0aW9uVHlwZSA9IHAucG9zaXRpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnBvc2l0aW9uVHlwZSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2lQYXJ0aWNpcGFudC5PcmdJZCA9IHAub3JnSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2lQYXJ0aWNpcGFudC5PcmdUeXBlID0gcC5vcmdUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckV4cHJlc3Npb25zLnB1c2gocG9zaVBhcnRpY2lwYW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWNlLnJlY2VpdmVyRXhwcmVzc2lvbnMgPSByZWNlaXZlckV4cHJlc3Npb25zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBub3RpZnlBY3Rpdml0eS5tZXNzYWdlTm90aWNlcy5wdXNoKG1lc3NhZ2VOb3RpY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==