/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { forkJoin, Subject } from 'rxjs';
import { MessagerService } from '@farris/ui-messager';
var TaskService = /** @class */ (function () {
    function TaskService(httpSvc, message) {
        this.httpSvc = httpSvc;
        this.message = message;
    }
    /**
     * @param {?} ids
     * @return {?}
     */
    TaskService.prototype.getUsersByIds = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        /** @type {?} */
        var pathUrl = '/api/runtime/sys/v1.0/users';
        return forkJoin(ids.map((/**
         * @param {?} id
         * @return {?}
         */
        function (id) { return _this.httpSvc.get(pathUrl + ("/" + id) + "?mode=0002"); })));
    };
    /**
     * 获取工作项操作列表
     */
    /**
     * 获取工作项操作列表
     * @param {?} workItemId
     * @return {?}
     */
    TaskService.prototype.getWorkItemActions = /**
     * 获取工作项操作列表
     * @param {?} workItemId
     * @return {?}
     */
    function (workItemId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/actions";
        return this.httpSvc.get(url);
    };
    /**
     * 执行审批操作
     * @param context 执行审批上下文
     */
    /**
     * 执行审批操作
     * @param {?} context 执行审批上下文
     * @return {?}
     */
    TaskService.prototype.complete = /**
     * 执行审批操作
     * @param {?} context 执行审批上下文
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/complete";
        return this.httpSvc.post(url, context);
    };
    /**
     * 执行审批预解析
     * @param context 执行审批上下文
     */
    /**
     * 执行审批预解析
     * @param {?} context 执行审批上下文
     * @return {?}
     */
    TaskService.prototype.completeSimulate = /**
     * 执行审批预解析
     * @param {?} context 执行审批上下文
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/complete-simulation";
        return this.httpSvc.post(url, context);
    };
    /**
     * 获取跳转活动信息
     * @param workItemId 工作项Id
     * @param action 动作编号
     */
    /**
     * 获取跳转活动信息
     * @param {?} workItemId 工作项Id
     * @param {?} action 动作编号
     * @return {?}
     */
    TaskService.prototype.getDestinationScope = /**
     * 获取跳转活动信息
     * @param {?} workItemId 工作项Id
     * @param {?} action 动作编号
     * @return {?}
     */
    function (workItemId, action) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/nextNodes/" + action;
        return this.httpSvc.get(url);
    };
    /**
     * 根据节点ID获取指定参与者的结果
     * @param workItemId
     * @param nodeId 说明：nodeIds=["node1","node2",···]
     * @returns 指派信息的数组 re: FlowNodeInfo[]
     */
    /**
     * 根据节点ID获取指定参与者的结果
     * @param {?} workItemId
     * @param {?} nodeId 说明：nodeIds=["node1","node2",···]
     * @return {?} 指派信息的数组 re: FlowNodeInfo[]
     */
    TaskService.prototype.getSimulationAssigneeInfo = /**
     * 根据节点ID获取指定参与者的结果
     * @param {?} workItemId
     * @param {?} nodeId 说明：nodeIds=["node1","node2",···]
     * @return {?} 指派信息的数组 re: FlowNodeInfo[]
     */
    function (workItemId, nodeId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/simulation-assigneeInfo?nodeIds=[" + nodeId + "]";
        return this.httpSvc.get(url);
    };
    /**
     * 执行征询、知会
     * @param context 上下文
     */
    /**
     * 执行征询、知会
     * @param {?} context 上下文
     * @return {?}
     */
    TaskService.prototype.addSign = /**
     * 执行征询、知会
     * @param {?} context 上下文
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/counterSignAdd";
        return this.httpSvc.post(url, context);
    };
    /**
     * 已阅
     * @param context 参数
     */
    /**
     * 已阅
     * @param {?} context 参数
     * @return {?}
     */
    TaskService.prototype.readTask = /**
     * 已阅
     * @param {?} context 参数
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/read";
        return this.httpSvc.post(url, context);
    };
    /**
     * 查询单据信息（方法名不要动，其他地方有引用）
     * @param workItemId 工作项Id
     */
    /**
     * 查询单据信息（方法名不要动，其他地方有引用）
     * @param {?} workItemId 工作项Id
     * @return {?}
     */
    TaskService.prototype.getTaskFormInfo = /**
     * 查询单据信息（方法名不要动，其他地方有引用）
     * @param {?} workItemId 工作项Id
     * @return {?}
     */
    function (workItemId) {
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var cacheCode = "gspWfTaskFormInfo" + workItemId;
        /** @type {?} */
        var taskForm = localStorage.getItem(cacheCode);
        if (taskForm) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(JSON.parse(taskForm));
            }), 10);
        }
        else {
            /** @type {?} */
            var formParUrl = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/formInfo";
            this.httpSvc.get(formParUrl).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                subject.next(re);
                localStorage.setItem(cacheCode, JSON.stringify(re));
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                subject.error(error);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 获取指派信息
     * @param taskId 工作项Id
     * 此接口只返回一个AssignInfo类序列化后的信息，不是多个
     */
    /**
     * 获取指派信息
     * @param {?} taskId 工作项Id
     * 此接口只返回一个AssignInfo类序列化后的信息，不是多个
     * @return {?}
     */
    TaskService.prototype.getAssigneeInfo = /**
     * 获取指派信息
     * @param {?} taskId 工作项Id
     * 此接口只返回一个AssignInfo类序列化后的信息，不是多个
     * @return {?}
     */
    function (taskId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + taskId + "/assigneeInfo";
        return this.httpSvc.get(url);
    };
    /**
     * 获取加签移交范围设置
     * @param workItemId
     * @param actionCode
     */
    /**
     * 获取加签移交范围设置
     * @param {?} workItemId
     * @param {?} actionCode
     * @return {?}
     */
    TaskService.prototype.getOrganizationScope = /**
     * 获取加签移交范围设置
     * @param {?} workItemId
     * @param {?} actionCode
     * @return {?}
     */
    function (workItemId, actionCode) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/organizationScope/" + actionCode;
        return this.httpSvc.get(url);
    };
    /**
     * 根据流程实例ID和任务状态办理任务
     * @param procInstId 流程实例id
     * @param state 任务状态 2或5
     */
    /**
     * 根据流程实例ID和任务状态办理任务
     * @param {?} procInstId 流程实例id
     * @param {?} state 任务状态 2或5
     * @return {?}
     */
    TaskService.prototype.getTaskByProcInstId = /**
     * 根据流程实例ID和任务状态办理任务
     * @param {?} procInstId 流程实例id
     * @param {?} state 任务状态 2或5
     * @return {?}
     */
    function (procInstId, state) {
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/tasks/processInstanceId?procInstId=" + procInstId + "&state=" + state;
        return this.httpSvc.get(url);
    };
    /**
     * 根据workitemID获取任务实体
     * @param workItemId
     */
    /**
     * 根据workitemID获取任务实体
     * @param {?} workItemId
     * @return {?}
     */
    TaskService.prototype.getTaskByWorkItemId = /**
     * 根据workitemID获取任务实体
     * @param {?} workItemId
     * @return {?}
     */
    function (workItemId) {
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/tasks/sourceId/" + workItemId;
        return this.httpSvc.get(url);
    };
    /**
     * 根据工作项ID指派任务
     * @param assigneesPa 指派参数
     */
    /**
     * 根据工作项ID指派任务
     * @param {?} assigneesPa 指派参数
     * @return {?}
     */
    TaskService.prototype.assignNextUsersByWorkItemId = /**
     * 根据工作项ID指派任务
     * @param {?} assigneesPa 指派参数
     * @return {?}
     */
    function (assigneesPa) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/assignUser";
        return this.httpSvc.post(url, assigneesPa);
    };
    /**
     * 取回
     * @param workItemId task id
     * @param comment comment
     */
    /**
     * 取回
     * @param {?} context
     * @return {?}
     */
    TaskService.prototype.retrieve = /**
     * 取回
     * @param {?} context
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/retrieve";
        return this.httpSvc.post(url, context);
    };
    /**
     * 任务移交
     * @param taskId 工作项Id
     * @param targetUId 目标用户Id
     */
    /**
     * 任务移交
     * @param {?} transferContext
     * @return {?}
     */
    TaskService.prototype.transfer = /**
     * 任务移交
     * @param {?} transferContext
     * @return {?}
     */
    function (transferContext) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/transfer";
        return this.httpSvc.post(url, transferContext);
    };
    /**
     * 任务评论
     * @param taskId 工作项Id
     * @param targetUId 目标用户Id
     */
    /**
     * 任务评论
     * @param {?} commentContext
     * @return {?}
     */
    TaskService.prototype.comment = /**
     * 任务评论
     * @param {?} commentContext
     * @return {?}
     */
    function (commentContext) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/comment";
        return this.httpSvc.post(url, commentContext);
    };
    /**
     * 领用任务
     * @param taskId 工作项Id
     */
    /**
     * 领用任务
     * @param {?} taskId 工作项Id
     * @param {?} comment
     * @return {?}
     */
    TaskService.prototype.claim = /**
     * 领用任务
     * @param {?} taskId 工作项Id
     * @param {?} comment
     * @return {?}
     */
    function (taskId, comment) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/claim";
        /** @type {?} */
        var options = {
            workItemId: taskId,
            comment: comment
        };
        return this.httpSvc.post(url, options);
    };
    /**
     * 取消领用
     * @param taskId 任务Id
     */
    /**
     * 取消领用
     * @param {?} taskId 任务Id
     * @param {?} comment
     * @return {?}
     */
    TaskService.prototype.unClaim = /**
     * 取消领用
     * @param {?} taskId 任务Id
     * @param {?} comment
     * @return {?}
     */
    function (taskId, comment) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/unclaim";
        /** @type {?} */
        var options = {
            workItemId: taskId,
            comment: comment
        };
        return this.httpSvc.post(url, options);
    };
    /**
     * 报错提示
     * @param error
     */
    /**
     * 报错提示
     * @param {?} error
     * @return {?}
     */
    TaskService.prototype.error = /**
     * 报错提示
     * @param {?} error
     * @return {?}
     */
    function (error) {
        if (error && error.error && error.error.Message) {
            /** @type {?} */
            var message = error.error.Message;
            this.message.show('warning', message, { safeHtml: false });
        }
    };
    /**
     * 启动流程接口
     * @param payload API所需的上下文参数
     */
    /**
     * 启动流程接口
     * @param {?} payload API所需的上下文参数
     * @return {?}
     */
    TaskService.prototype.startProcess = /**
     * 启动流程接口
     * @param {?} payload API所需的上下文参数
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/startProcess";
        return this.httpSvc.post(url, payload);
    };
    /**
     * 启动流程预解析
     * @param payload API所需的上下文参数
     */
    /**
     * 启动流程预解析
     * @param {?} payload API所需的上下文参数
     * @return {?}
     */
    TaskService.prototype.startProcessSimulate = /**
     * 启动流程预解析
     * @param {?} payload API所需的上下文参数
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/startProcess-simulation";
        return this.httpSvc.post(url, payload);
    };
    /**
     * 取消提交
     * @param param 参数
     */
    /**
     * 取消提交
     * @param {?} param 参数
     * @return {?}
     */
    TaskService.prototype.cancelSubmit = /**
     * 取消提交
     * @param {?} param 参数
     * @return {?}
     */
    function (param) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/cancelSubmit";
        return this.httpSvc.post(url, param);
    };
    /**
     * @return {?}
     */
    TaskService.newId = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var S4 = (/**
         * @return {?}
         */
        function () { return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1); });
        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());
    };
    /**
     * 获取用户常用意见列表
     * @returns
     */
    /**
     * 获取用户常用意见列表
     * @param {?=} filter
     * @return {?}
     */
    TaskService.prototype.getCommentList = /**
     * 获取用户常用意见列表
     * @param {?=} filter
     * @return {?}
     */
    function (filter) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/commonComments";
        filter && filter.type && (url += "?type=" + filter.type);
        return this.httpSvc.get(url);
    };
    /**
     * 添加常用意见
     * @returns
     */
    /**
     * 添加常用意见
     * @param {?} comment
     * @return {?}
     */
    TaskService.prototype.addComment = /**
     * 添加常用意见
     * @param {?} comment
     * @return {?}
     */
    function (comment) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/commonComments";
        return this.httpSvc.post(url, comment);
    };
    /**
     * 删除一条常用意见
     * @param id 常用意见id
     * @returns
     */
    /**
     * 删除一条常用意见
     * @param {?} id 常用意见id
     * @return {?}
     */
    TaskService.prototype.deleteComment = /**
     * 删除一条常用意见
     * @param {?} id 常用意见id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/commonComments/" + id;
        return this.httpSvc.delete(url, null);
    };
    /**
     * 获取任务中心配置项
     * @param code 配置项的Code
     */
    /**
     * 获取任务中心配置项
     * @param {?} code 配置项的Code
     * @param {?=} ownerType
     * @param {?=} ownerId
     * @return {?}
     */
    TaskService.prototype.getTaskCenterConfigByCode = /**
     * 获取任务中心配置项
     * @param {?} code 配置项的Code
     * @param {?=} ownerType
     * @param {?=} ownerId
     * @return {?}
     */
    function (code, ownerType, ownerId) {
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/task-center-setting/code?code=" + code;
        ownerType && (url += "&ownerType=" + ownerType);
        ownerId && (url += "&ownerId=" + ownerId);
        return this.httpSvc.get(url);
    };
    /**
     * 获取系统级别配置（缓存为一天）
     */
    /**
     * 获取系统级别配置（缓存为一天）
     * @return {?}
     */
    TaskService.prototype.getAllTaskCenterConfig = /**
     * 获取系统级别配置（缓存为一天）
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var code = "gspWfTaskAllConfig";
        /** @type {?} */
        var todayCode = code + this.getCurrentDateString();
        /** @type {?} */
        var configStr = localStorage.getItem(todayCode);
        if (configStr) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(JSON.parse(configStr));
            }), 10);
        }
        else {
            /** @type {?} */
            var url = "/api/runtime/task/v1.0/task-center-setting/all?ownerType=all&ownerId=*";
            this.httpSvc.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                localStorage.setItem(todayCode, JSON.stringify(re));
                subject.next(re);
                _this.removeConfig(code);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                subject.error(error);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 获取任务分类级别配置
     */
    /**
     * 获取任务分类级别配置
     * @param {?} categoryId
     * @return {?}
     */
    TaskService.prototype.getTaskCategoryCenterConfig = /**
     * 获取任务分类级别配置
     * @param {?} categoryId
     * @return {?}
     */
    function (categoryId) {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var code = "gspWfTaskCategoryConfig" + categoryId;
        /** @type {?} */
        var todayCode = code + this.getCurrentDateString();
        /** @type {?} */
        var configStr = localStorage.getItem(todayCode);
        if (configStr) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(JSON.parse(configStr));
            }), 10);
        }
        else {
            /** @type {?} */
            var url = "/api/runtime/task/v1.0/task-center-setting/all";
            url += "?ownerType=category&ownerId=" + categoryId;
            this.httpSvc.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                localStorage.setItem(todayCode, JSON.stringify(re));
                subject.next(re);
                _this.removeConfig(code);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                subject.error(error);
            }));
        }
        return subject.asObservable();
    };
    /**
    * 获取任务中心个人用户配置（缓存为一天）
    */
    /**
     * 获取任务中心个人用户配置（缓存为一天）
     * @return {?}
     */
    TaskService.prototype.getAllUserConfig = /**
     * 获取任务中心个人用户配置（缓存为一天）
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var code = "gspWfTaskUserConfig";
        /** @type {?} */
        var todayCode = code + this.getCurrentDateString();
        /** @type {?} */
        var configStr = localStorage.getItem(todayCode);
        if (configStr) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(JSON.parse(configStr));
            }), 10);
        }
        else {
            /** @type {?} */
            var url = "/api/runtime/task/v1.0/task-center-setting/all";
            this.httpSvc.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                localStorage.setItem(todayCode, JSON.stringify(re));
                _this.removeConfig(code);
                subject.next(re);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                subject.error(error);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 添加用户级别自定义配置
     * @param code 配置项编号
     */
    /**
     * 添加用户级别自定义配置
     * @param {?} code 配置项编号
     * @param {?} currentValue
     * @return {?}
     */
    TaskService.prototype.addUserConfig = /**
     * 添加用户级别自定义配置
     * @param {?} code 配置项编号
     * @param {?} currentValue
     * @return {?}
     */
    function (code, currentValue) {
        /** @type {?} */
        var configCode = "gspWfTaskUserConfig";
        /** @type {?} */
        var todayCode = configCode + this.getCurrentDateString();
        /** @type {?} */
        var configStr = localStorage.getItem(todayCode);
        if (configStr) {
            /** @type {?} */
            var list = JSON.parse(configStr);
            if (list && list.length) {
                /** @type {?} */
                var item = ((/** @type {?} */ (list))).find((/**
                 * @param {?} l
                 * @return {?}
                 */
                function (l) { return l.configCode == code; }));
                if (item) {
                    item.currentValue = currentValue;
                    localStorage.setItem(todayCode, JSON.stringify(list));
                }
            }
        }
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/task-center-setting/add?configCode=" + code + "&currentValue=" + currentValue;
        return this.httpSvc.post(url, null);
    };
    /**
     * 获取用户头像（已被任务中心调用）
     * @param userId 用户ID
     */
    /**
     * 获取用户头像（已被任务中心调用）
     * @param {?} userId 用户ID
     * @return {?}
     */
    TaskService.prototype.getUserAvatar = /**
     * 获取用户头像（已被任务中心调用）
     * @param {?} userId 用户ID
     * @return {?}
     */
    function (userId) {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var code = "gspWfTaskUserAvatar";
        /** @type {?} */
        var todayCode = code + this.getCurrentDateString();
        /** @type {?} */
        var todayUserCode = todayCode + userId;
        /** @type {?} */
        var avatarStr = localStorage.getItem(todayUserCode);
        if (avatarStr) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(JSON.parse(avatarStr));
            }), 100);
        }
        else {
            /** @type {?} */
            var url = "/api/runtime/sys/v1.0/userinfos/setting/users?userId=" + userId;
            this.httpSvc.get(url).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                subject.next(re);
                localStorage.setItem(todayUserCode, JSON.stringify(re));
                _this.removeConfig(code);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 获取当前日期
     */
    /**
     * 获取当前日期
     * @return {?}
     */
    TaskService.prototype.getCurrentDateString = /**
     * 获取当前日期
     * @return {?}
     */
    function () {
        /** @type {?} */
        var date = new Date();
        /** @type {?} */
        var year = date.getFullYear().toString();
        /** @type {?} */
        var month = (date.getMonth() + 1).toString();
        /** @type {?} */
        var day = date.getDate().toString();
        return year + month + day;
    };
    /**
     * 移除localStorage缓存
     * @param key
     */
    /**
     * 移除localStorage缓存
     * @private
     * @param {?} key
     * @return {?}
     */
    TaskService.prototype.removeConfig = /**
     * 移除localStorage缓存
     * @private
     * @param {?} key
     * @return {?}
     */
    function (key) {
        /** @type {?} */
        var todayKey = key + this.getCurrentDateString();
        for (var item in localStorage) {
            if (item.indexOf(key) > -1 && item.indexOf(todayKey) < 0) {
                localStorage.removeItem(item);
            }
        }
    };
    /**
     * 真正上传附件
     * @param files
     */
    /**
     * 真正上传附件
     * @param {?} files
     * @return {?}
     */
    TaskService.prototype.uploadAttachment = /**
     * 真正上传附件
     * @param {?} files
     * @return {?}
     */
    function (files) {
        /** @type {?} */
        var url = "/api/runtime/dfs/v1.0/doc/commit";
        return this.httpSvc.put(url, files);
    };
    /**
     * 删除附件
     * @param fileDeleteEntity
     */
    /**
     * 删除附件
     * @param {?} fileDeleteEntity
     * @return {?}
     */
    TaskService.prototype.deleteAttachment = /**
     * 删除附件
     * @param {?} fileDeleteEntity
     * @return {?}
     */
    function (fileDeleteEntity) {
        /** @type {?} */
        var url = "/api/runtime/dfs/v1.0/doc";
        return this.httpSvc.delete(url, fileDeleteEntity);
    };
    /**
     * 创建内码
     */
    /**
     * 创建内码
     * @return {?}
     */
    TaskService.prototype.createNM = /**
     * 创建内码
     * @return {?}
     */
    function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (/**
         * @param {?} c
         * @return {?}
         */
        function (c) {
            /** @type {?} */
            var r = Math.random() * 16 | 0;
            /** @type {?} */
            var v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        }));
    };
    /**
     * 获取当前用户信息
     */
    /**
     * 获取当前用户信息
     * @return {?}
     */
    TaskService.prototype.getUserInfo = /**
     * 获取当前用户信息
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/userinfos?infoType=user";
        return this.httpSvc.get(url);
    };
    /**
     * 获取用户所有签名
     */
    /**
     * 获取用户所有签名
     * @param {?} userId
     * @return {?}
     */
    TaskService.prototype.getUserSignId = /**
     * 获取用户所有签名
     * @param {?} userId
     * @return {?}
     */
    function (userId) {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var code = 'gspWfTaskUserSign' + userId;
        /** @type {?} */
        var todayCode = code + this.getCurrentDateString();
        /** @type {?} */
        var signId = localStorage.getItem(todayCode);
        if (signId) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                subject.next(signId);
            }), 100);
        }
        else {
            /** @type {?} */
            var url = "/api/runtime/dfs/v1.0/formdoc/fileinfo/form?formid=" + userId + "&rootid=taskcentersignature";
            this.httpSvc.get(url).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result && result.length) {
                    /** @type {?} */
                    var sign;
                    if (result.length == 1) {
                        sign = result[0];
                    }
                    else {
                        /** @type {?} */
                        var list = result.filter((/**
                         * @param {?} a
                         * @return {?}
                         */
                        function (a) { return a && a.lastModifiedTime; }));
                        sign = list.reduce((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) {
                            return a.lastModifiedTime > b.lastModifiedTime ? a : b;
                        }));
                    }
                    subject.next(sign.id);
                    localStorage.setItem(todayCode, sign.id);
                    _this.removeConfig(code);
                }
                else {
                    subject.next('');
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                subject.error(error);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 上传签名，返回长传后的签名id
     */
    /**
     * 上传签名，返回长传后的签名id
     * @param {?} gspDocUploadEntity
     * @return {?}
     */
    TaskService.prototype.uploadSignature = /**
     * 上传签名，返回长传后的签名id
     * @param {?} gspDocUploadEntity
     * @return {?}
     */
    function (gspDocUploadEntity) {
        /** @type {?} */
        var url = "/api/runtime/dfs/v1.0/doc";
        /** @type {?} */
        var header = this.httpSvc.setHeader({
            body: gspDocUploadEntity,
            responseType: 'text'
        });
        return this.httpSvc.request('Post', url, header);
    };
    /**
     * 解析文件类型，给出缩略图
     * @param attachmentInfo
     */
    /**
     * 解析文件类型，给出缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    TaskService.prototype.createItem = /**
     * 解析文件类型，给出缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    function (attachmentInfo) {
        /** @type {?} */
        var pos = attachmentInfo.fileName.lastIndexOf(".");
        /** @type {?} */
        var type = attachmentInfo.fileName.substring(pos + 1);
        type = (type == '' ? 'Default' : type.toLowerCase());
        /** @type {?} */
        var docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';
        /** @type {?} */
        var videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';
        /** @type {?} */
        var audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';
        /** @type {?} */
        var imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';
        if (docLib.indexOf(type) >= 0) {
            type = type.toLowerCase();
        }
        else if (videoLib.indexOf(type) >= 0) {
            type = 'video';
        }
        else if (audioLib.indexOf(type) >= 0) {
            type = 'audio';
        }
        else if (imgLib.indexOf(type) >= 0) {
            type = 'picture';
        }
        else {
            type = 'default';
        }
        return type;
    };
    /**
     * 注册主题，并获取当前主题唯一标识token
     * @param subjectCode 主题编码，非唯一标识，token为唯一标识
     * @param token 主题唯一标识。
     * @returns 主题的唯一标识。
     */
    /**
     * 注册主题，并获取当前主题唯一标识token
     * @param {?} subjectCode 主题编码，非唯一标识，token为唯一标识
     * @param {?} token 主题唯一标识。
     * @return {?} 主题的唯一标识。
     */
    TaskService.prototype.subjectRegister = /**
     * 注册主题，并获取当前主题唯一标识token
     * @param {?} subjectCode 主题编码，非唯一标识，token为唯一标识
     * @param {?} token 主题唯一标识。
     * @return {?} 主题的唯一标识。
     */
    function (subjectCode, token) {
        return ((/** @type {?} */ (window))).gspframeworkService.rtf.broadcast.subjectRegister(subjectCode, { funcId: token });
    };
    /**
     * 监听移除
     * @param token
     */
    /**
     * 监听移除
     * @param {?} token
     * @return {?}
     */
    TaskService.prototype.subjectRemove = /**
     * 监听移除
     * @param {?} token
     * @return {?}
     */
    function (token) {
        ((/** @type {?} */ (window))).gspframeworkService.rtf.broadcast.subjectRemove(token);
    };
    /**
     * 通过某个token发送消息
     * @param subjectToken 主题唯一的token标识
     * @param message 要发送的消息
     */
    /**
     * 通过某个token发送消息
     * @param {?} subjectToken 主题唯一的token标识
     * @param {?} message 要发送的消息
     * @return {?}
     */
    TaskService.prototype.subjectNotify = /**
     * 通过某个token发送消息
     * @param {?} subjectToken 主题唯一的token标识
     * @param {?} message 要发送的消息
     * @return {?}
     */
    function (subjectToken, message) {
        ((/** @type {?} */ (window))).gspframeworkService.rtf.broadcast.notify(subjectToken, message);
    };
    /**
     * 添加观察者，并监听消息
     * @param subjectToken 主题token
     * @param observerToken 当前监听主题的观察者唯一标识token。此处固定
     * @param handler 监听到消息后执行的动作
     */
    /**
     * 添加观察者，并监听消息
     * @param {?} subjectToken 主题token
     * @param {?} observerToken 当前监听主题的观察者唯一标识token。此处固定
     * @param {?} handler 监听到消息后执行的动作
     * @return {?}
     */
    TaskService.prototype.subjectResponse = /**
     * 添加观察者，并监听消息
     * @param {?} subjectToken 主题token
     * @param {?} observerToken 当前监听主题的观察者唯一标识token。此处固定
     * @param {?} handler 监听到消息后执行的动作
     * @return {?}
     */
    function (subjectToken, observerToken, handler) {
        ((/** @type {?} */ (window))).gspframeworkService.rtf.broadcast.response(subjectToken, observerToken, handler);
    };
    /**
     * 获取催办模拟结果
     * @param context 参数
     * @returns
     */
    /**
     * 获取催办模拟结果
     * @param {?} context 参数
     * @return {?}
     */
    TaskService.prototype.urgeHandleSimulate = /**
     * 获取催办模拟结果
     * @param {?} context 参数
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/getUrgeHandleInfo";
        return this.httpSvc.post(url, context);
    };
    /**
     * 执行催办
     * @param context 参数
     * @returns
     */
    /**
     * 执行催办
     * @param {?} context 参数
     * @return {?}
     */
    TaskService.prototype.urgeHandle = /**
     * 执行催办
     * @param {?} context 参数
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/urgeHandle";
        return this.httpSvc.post(url, context);
    };
    /**批量数字签名
     * @param context 参数
     */
    /**
     * 批量数字签名
     * @param {?} context 参数
     * @return {?}
     */
    TaskService.prototype.batchVerifySigned = /**
     * 批量数字签名
     * @param {?} context 参数
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/batchVerifySigned";
        return this.httpSvc.post(url, context);
    };
    /**
     * 获取用户帮助前端配置
     * @returns
     */
    /**
     * 获取用户帮助前端配置
     * @return {?}
     */
    TaskService.prototype.getWfUserHelpConfig = /**
     * 获取用户帮助前端配置
     * @return {?}
     */
    function () {
        /** @type {?} */
        var date = new Date();
        /** @type {?} */
        var year = date.getFullYear();
        /** @type {?} */
        var month = date.getMonth() + 1;
        /** @type {?} */
        var day = date.getDate();
        /** @type {?} */
        var url = "/platform/runtime/wf/web/wf-user-help/config.json?v=" + year + month + day;
        return this.httpSvc.get(url);
    };
    /**
     * 获取加签配置
     */
    /**
     * 获取加签配置
     * @param {?} workItemId
     * @return {?}
     */
    TaskService.prototype.getAdhocConfig = /**
     * 获取加签配置
     * @param {?} workItemId
     * @return {?}
     */
    function (workItemId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/" + workItemId + "/adhocConfig/AddSignBehind";
        return this.httpSvc.get(url);
    };
    /**
     * 加签提交
     */
    /**
     * 加签提交
     * @param {?} payload
     * @return {?}
     */
    TaskService.prototype.adhocAssignee = /**
     * 加签提交
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/adhocAssignee";
        return this.httpSvc.post(url, payload);
    };
    /**
     * 取消征询
     */
    /**
     * 取消征询
     * @param {?} payload
     * @return {?}
     */
    TaskService.prototype.cancelConsult = /**
     * 取消征询
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/workItems/cancelConsult";
        return this.httpSvc.post(url, payload);
    };
    /**
     * 判断是否inSuite环境
     */
    /**
     * 判断是否inSuite环境
     * @return {?}
     */
    TaskService.prototype.isInSuite = /**
     * 判断是否inSuite环境
     * @return {?}
     */
    function () {
        /** @type {?} */
        var frameWorkService = ((/** @type {?} */ (window))).gspframeworkService;
        if (frameWorkService && frameWorkService.rtf) {
            /** @type {?} */
            var extendMethod = frameWorkService.rtf.extendMethod;
            if (extendMethod && extendMethod.getExtObj()) {
                /** @type {?} */
                var extObj = extendMethod.getExtObj();
                /** @type {?} */
                var mode = extObj.iGIX4inSuiteMode();
                if (mode) {
                    return true;
                }
            }
        }
        return false;
    };
    /**
     * 获取字符串字节长度
     */
    /**
     * 获取字符串字节长度
     * @param {?} str
     * @return {?}
     */
    TaskService.prototype.getBytesLength = /**
     * 获取字符串字节长度
     * @param {?} str
     * @return {?}
     */
    function (str) {
        // 在GBK编码里，除了ASCII字符，其它都占两个字符宽
        return str.replace(/[^\x00-\xff]/g, 'xx').length;
    };
    /**
     * 获取top window
     * @returns
     */
    /**
     * 获取top window
     * @return {?}
     */
    TaskService.prototype.getTopWindow = /**
     * 获取top window
     * @return {?}
     */
    function () {
        /** @type {?} */
        var curWin = window.self;
        try {
            while (curWin.location.origin === curWin.parent.location.origin) {
                if (curWin !== curWin.parent && !((/** @type {?} */ (curWin))).isRTFTopWin) {
                    curWin = curWin.parent;
                }
                else {
                    break;
                }
            }
        }
        catch (e) { }
        return curWin;
    };
    /**
     * 弹出错误提示
     * @param error
     */
    /**
     * 弹出错误提示
     * @param {?} errorMessage
     * @return {?}
     */
    TaskService.prototype.handleErrorLevel = /**
     * 弹出错误提示
     * @param {?} errorMessage
     * @return {?}
     */
    function (errorMessage) {
        var _this = this;
        if (errorMessage && errorMessage.status < 500) {
            return;
        }
        /** @type {?} */
        var error = (/** @type {?} */ (errorMessage.error));
        /** @type {?} */
        var exceptionMsg = error.Message || '';
        /** @type {?} */
        var date = error.date || new Date();
        /** @type {?} */
        var localDate = date;
        /** @type {?} */
        var detail = error.Detail || error.Message + "\r\n\u53D1\u751F\u65F6\u95F4\uFF1A" + localDate + "\r\n\u8BE6\u7EC6\u4FE1\u606F\uFF1A" + error.innerMessage || '';
        /** @type {?} */
        var innerMessage = error.innerMessage || null;
        /** @type {?} */
        var bsModalRef;
        /** @type {?} */
        var options = {
            showMaxButton: false,
            buttons: [
                {
                    text: '知道了',
                    cls: 'btn btn-primary btn-lg',
                    handle: (/**
                     * @return {?}
                     */
                    function () {
                        bsModalRef.close();
                    })
                }
            ],
            width: 440,
            height: 200,
            safeHtml: false,
            exception: {
                date: localDate,
                message: innerMessage,
                copyButton: {
                    text: '复制详细信息',
                    onClick: (/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        /** @type {?} */
                        var result = _this.copyToClipboard(detail);
                        bsModalRef.content.showMiniNotify(result, 1500);
                    })
                }
            }
        };
        bsModalRef = this.message.show('exception', exceptionMsg, options);
    };
    /**
     * 赋值到粘贴板
     * @param text
     * @returns
     */
    /**
     * 赋值到粘贴板
     * @private
     * @param {?} text
     * @return {?}
     */
    TaskService.prototype.copyToClipboard = /**
     * 赋值到粘贴板
     * @private
     * @param {?} text
     * @return {?}
     */
    function (text) {
        /** @type {?} */
        var windowRef = window;
        if (windowRef.clipboardData && windowRef.clipboardData.setData) {
            return windowRef.clipboardData.setData("Text", text);
        }
        else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
            /** @type {?} */
            var textarea = document.createElement("textarea");
            textarea.textContent = text;
            textarea.style.position = "fixed";
            document.body.appendChild(textarea);
            textarea.select();
            try {
                return document.execCommand("copy");
            }
            catch (ex) {
                console.warn("Copy to clipboard failed.", ex);
            }
            finally {
                document.body.removeChild(textarea);
            }
        }
        return false;
    };
    TaskService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    TaskService.ctorParameters = function () { return [
        { type: HttpService },
        { type: MessagerService }
    ]; };
    return TaskService;
}());
export { TaskService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    TaskService.prototype.httpSvc;
    /**
     * @type {?}
     * @private
     */
    TaskService.prototype.message;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi10YXNrLWhhbmRsZXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZS90YXNrLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBYyxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSXJELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQVl0RDtJQUdJLHFCQUNZLE9BQW9CLEVBQ3BCLE9BQXdCO1FBRHhCLFlBQU8sR0FBUCxPQUFPLENBQWE7UUFDcEIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7SUFDaEMsQ0FBQzs7Ozs7SUFFTCxtQ0FBYTs7OztJQUFiLFVBQWMsR0FBYTtRQUEzQixpQkFHQzs7WUFGTyxPQUFPLEdBQUcsNkJBQTZCO1FBQzNDLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxFQUFFLElBQUksT0FBQSxLQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLElBQUcsTUFBSSxFQUFJLENBQUEsR0FBRyxZQUFZLENBQUMsRUFBbkQsQ0FBbUQsRUFBQyxDQUFDLENBQUM7SUFDeEYsQ0FBQztJQUNEOztPQUVHOzs7Ozs7SUFDSCx3Q0FBa0I7Ozs7O0lBQWxCLFVBQW1CLFVBQWtCOztZQUMzQixHQUFHLEdBQUcsb0NBQWtDLFVBQVUsYUFBVTtRQUNsRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILDhCQUFROzs7OztJQUFSLFVBQVMsT0FBd0I7O1lBQ3ZCLEdBQUcsR0FBRyx5Q0FBeUM7UUFDckQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsc0NBQWdCOzs7OztJQUFoQixVQUFpQixPQUF3Qjs7WUFDL0IsR0FBRyxHQUFHLG9EQUFvRDtRQUNoRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7OztJQUNILHlDQUFtQjs7Ozs7O0lBQW5CLFVBQW9CLFVBQWtCLEVBQUUsTUFBYzs7WUFDNUMsR0FBRyxHQUFHLG9DQUFrQyxVQUFVLG1CQUFjLE1BQVE7UUFDOUUsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7Ozs7O09BS0c7Ozs7Ozs7SUFDSCwrQ0FBeUI7Ozs7OztJQUF6QixVQUEwQixVQUFrQixFQUFFLE1BQWM7O1lBQ2xELEdBQUcsR0FBRyxvQ0FBa0MsVUFBVSwwQ0FBcUMsTUFBTSxNQUFHO1FBQ3RHLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsNkJBQU87Ozs7O0lBQVAsVUFBUSxPQUFZOztZQUNWLEdBQUcsR0FBRywrQ0FBK0M7UUFDM0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsOEJBQVE7Ozs7O0lBQVIsVUFBUyxPQUE2Qjs7WUFDNUIsR0FBRyxHQUFHLHFDQUFxQztRQUNqRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCxxQ0FBZTs7Ozs7SUFBZixVQUFnQixVQUFrQjs7WUFDMUIsT0FBTyxHQUFHLElBQUksT0FBTyxFQUFFOztZQUN2QixTQUFTLEdBQUcsbUJBQW1CLEdBQUcsVUFBVTs7WUFDMUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ2hELElBQUksUUFBUSxFQUFFO1lBQ1YsVUFBVTs7O1lBQUM7Z0JBQ1AsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdkMsQ0FBQyxHQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ1Y7YUFBTTs7Z0JBQ0csVUFBVSxHQUFHLG9DQUFrQyxVQUFVLGNBQVc7WUFDMUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsRUFBRTtnQkFDckMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDakIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3hELENBQUM7Ozs7WUFBRSxVQUFBLEtBQUs7Z0JBQ0osT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixDQUFDLEVBQUMsQ0FBQTtTQUNMO1FBQ0QsT0FBTyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCxxQ0FBZTs7Ozs7O0lBQWYsVUFBZ0IsTUFBYzs7WUFDcEIsR0FBRyxHQUFHLG9DQUFrQyxNQUFNLGtCQUFlO1FBQ25FLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCwwQ0FBb0I7Ozs7OztJQUFwQixVQUFxQixVQUFrQixFQUFFLFVBQWtCOztZQUNqRCxHQUFHLEdBQUcsb0NBQWtDLFVBQVUsMkJBQXNCLFVBQVk7UUFDMUYsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7OztJQUNILHlDQUFtQjs7Ozs7O0lBQW5CLFVBQW9CLFVBQWtCLEVBQUUsS0FBYTs7WUFDM0MsR0FBRyxHQUFHLCtEQUE2RCxVQUFVLGVBQVUsS0FBTztRQUNwRyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILHlDQUFtQjs7Ozs7SUFBbkIsVUFBb0IsVUFBa0I7O1lBQzVCLEdBQUcsR0FBRywyQ0FBeUMsVUFBWTtRQUNqRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILGlEQUEyQjs7Ozs7SUFBM0IsVUFBNEIsV0FBNEI7O1lBQzlDLEdBQUcsR0FBRywyQ0FBMkM7UUFDdkQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7O09BSUc7Ozs7OztJQUNILDhCQUFROzs7OztJQUFSLFVBQVMsT0FBaUQ7O1lBQ2hELEdBQUcsR0FBRyx5Q0FBeUM7UUFDckQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7O09BSUc7Ozs7OztJQUNILDhCQUFROzs7OztJQUFSLFVBQVMsZUFBb0I7O1lBQ25CLEdBQUcsR0FBRyx5Q0FBeUM7UUFDckQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVEOzs7O09BSUc7Ozs7OztJQUNILDZCQUFPOzs7OztJQUFQLFVBQVEsY0FBbUI7O1lBQ2pCLEdBQUcsR0FBRyx3Q0FBd0M7UUFDcEQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7OztJQUNILDJCQUFLOzs7Ozs7SUFBTCxVQUFNLE1BQWMsRUFBRSxPQUFlOztZQUMzQixHQUFHLEdBQUcsc0NBQXNDOztZQUM1QyxPQUFPLEdBQUc7WUFDWixVQUFVLEVBQUUsTUFBTTtZQUNsQixPQUFPLEVBQUUsT0FBTztTQUNuQjtRQUNELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7O09BR0c7Ozs7Ozs7SUFDSCw2QkFBTzs7Ozs7O0lBQVAsVUFBUSxNQUFjLEVBQUUsT0FBZTs7WUFDN0IsR0FBRyxHQUFHLHdDQUF3Qzs7WUFDOUMsT0FBTyxHQUFHO1lBQ1osVUFBVSxFQUFFLE1BQU07WUFDbEIsT0FBTyxFQUFFLE9BQU87U0FDbkI7UUFDRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCwyQkFBSzs7Ozs7SUFBTCxVQUFNLEtBQVU7UUFDWixJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFOztnQkFDekMsT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTztZQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7U0FDOUQ7SUFDTCxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCxrQ0FBWTs7Ozs7SUFBWixVQUFhLE9BQTRCOztZQUMvQixHQUFHLEdBQUcsb0RBQW9EO1FBQ2hFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILDBDQUFvQjs7Ozs7SUFBcEIsVUFBcUIsT0FBNEI7O1lBQ3ZDLEdBQUcsR0FBRywrREFBK0Q7UUFDM0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsa0NBQVk7Ozs7O0lBQVosVUFBYSxLQUEwQjs7WUFDN0IsR0FBRyxHQUFHLG9EQUFvRDtRQUNoRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN6QyxDQUFDOzs7O0lBRU0saUJBQUs7OztJQUFaOztZQUNVLEVBQUU7OztRQUFHLGNBQU0sT0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBL0QsQ0FBK0QsQ0FBQTtRQUNoRixPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDM0YsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsb0NBQWM7Ozs7O0lBQWQsVUFBZSxNQUE0Qjs7WUFDbkMsR0FBRyxHQUFHLHFDQUFxQztRQUMvQyxNQUFNLElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxXQUFTLE1BQU0sQ0FBQyxJQUFNLENBQUMsQ0FBQTtRQUN4RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILGdDQUFVOzs7OztJQUFWLFVBQVcsT0FBc0I7O1lBQ3ZCLEdBQUcsR0FBRyxxQ0FBcUM7UUFDakQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7O09BSUc7Ozs7OztJQUNILG1DQUFhOzs7OztJQUFiLFVBQWMsRUFBVTs7WUFDZCxHQUFHLEdBQUcseUNBQXVDLEVBQUk7UUFDdkQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7Ozs7SUFDSCwrQ0FBeUI7Ozs7Ozs7SUFBekIsVUFBMEIsSUFBWSxFQUFFLFNBQWtCLEVBQUUsT0FBZ0I7O1lBQ3BFLEdBQUcsR0FBRywwREFBd0QsSUFBTTtRQUN4RSxTQUFTLElBQUksQ0FBQyxHQUFHLElBQUksZ0JBQWMsU0FBVyxDQUFDLENBQUM7UUFDaEQsT0FBTyxJQUFJLENBQUMsR0FBRyxJQUFJLGNBQVksT0FBUyxDQUFDLENBQUM7UUFDMUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7Ozs7O0lBQ0gsNENBQXNCOzs7O0lBQXRCO1FBQUEsaUJBb0JDOztZQW5CTyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUU7O1lBQ3ZCLElBQUksR0FBRyxvQkFBb0I7O1lBQzNCLFNBQVMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFOztZQUM5QyxTQUFTLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDL0MsSUFBSSxTQUFTLEVBQUU7WUFDWCxVQUFVOzs7WUFBQztnQkFDUCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN4QyxDQUFDLEdBQUUsRUFBRSxDQUFDLENBQUM7U0FDVjthQUFNOztnQkFDQyxHQUFHLEdBQUcsd0VBQXdFO1lBQ2xGLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLEVBQUU7Z0JBQzlCLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDcEQsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDakIsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM1QixDQUFDOzs7O1lBQUUsVUFBQSxLQUFLO2dCQUNKLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekIsQ0FBQyxFQUFDLENBQUE7U0FDTDtRQUNELE9BQU8sT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0gsaURBQTJCOzs7OztJQUEzQixVQUE0QixVQUFrQjtRQUE5QyxpQkFxQkM7O1lBcEJPLE9BQU8sR0FBRyxJQUFJLE9BQU8sRUFBRTs7WUFDdkIsSUFBSSxHQUFHLHlCQUF5QixHQUFHLFVBQVU7O1lBQzdDLFNBQVMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixFQUFFOztZQUM5QyxTQUFTLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDL0MsSUFBSSxTQUFTLEVBQUU7WUFDWCxVQUFVOzs7WUFBQztnQkFDUCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN4QyxDQUFDLEdBQUUsRUFBRSxDQUFDLENBQUM7U0FDVjthQUFNOztnQkFDQyxHQUFHLEdBQUcsZ0RBQWdEO1lBQzFELEdBQUcsSUFBSSxpQ0FBK0IsVUFBWSxDQUFDO1lBQ25ELElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFBLEVBQUU7Z0JBQzlCLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDcEQsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDakIsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM1QixDQUFDOzs7O1lBQUUsVUFBQSxLQUFLO2dCQUNKLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekIsQ0FBQyxFQUFDLENBQUE7U0FDTDtRQUNELE9BQU8sT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ2xDLENBQUM7SUFFRDs7TUFFRTs7Ozs7SUFDRixzQ0FBZ0I7Ozs7SUFBaEI7UUFBQSxpQkFvQkM7O1lBbkJPLE9BQU8sR0FBRyxJQUFJLE9BQU8sRUFBRTs7WUFDdkIsSUFBSSxHQUFHLHFCQUFxQjs7WUFDNUIsU0FBUyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7O1lBQzlDLFNBQVMsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUMvQyxJQUFJLFNBQVMsRUFBRTtZQUNYLFVBQVU7OztZQUFDO2dCQUNQLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsR0FBRSxFQUFFLENBQUMsQ0FBQztTQUNWO2FBQU07O2dCQUNDLEdBQUcsR0FBRyxnREFBZ0Q7WUFDMUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsRUFBRTtnQkFDOUIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNwRCxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3JCLENBQUM7Ozs7WUFBRSxVQUFBLEtBQUs7Z0JBQ0osT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsT0FBTyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7OztJQUNILG1DQUFhOzs7Ozs7SUFBYixVQUFjLElBQVksRUFBRSxZQUFvQjs7WUFDeEMsVUFBVSxHQUFHLHFCQUFxQjs7WUFDbEMsU0FBUyxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7O1lBQ3BELFNBQVMsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUMvQyxJQUFJLFNBQVMsRUFBRTs7Z0JBQ1AsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQ2hDLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7O29CQUNqQixJQUFJLEdBQUcsQ0FBQyxtQkFBQSxJQUFJLEVBQXNCLENBQUMsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLFVBQVUsSUFBSSxJQUFJLEVBQXBCLENBQW9CLEVBQUM7Z0JBQ3ZFLElBQUksSUFBSSxFQUFFO29CQUNOLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO29CQUNqQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQ3pEO2FBQ0o7U0FDSjs7WUFDRyxHQUFHLEdBQUcsK0RBQTZELElBQUksc0JBQWlCLFlBQWM7UUFDMUcsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsbUNBQWE7Ozs7O0lBQWIsVUFBYyxNQUFjO1FBQTVCLGlCQW1CQzs7WUFsQk8sT0FBTyxHQUFHLElBQUksT0FBTyxFQUFFOztZQUN2QixJQUFJLEdBQUcscUJBQXFCOztZQUM1QixTQUFTLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsRUFBRTs7WUFDOUMsYUFBYSxHQUFHLFNBQVMsR0FBRyxNQUFNOztZQUNsQyxTQUFTLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7UUFDbkQsSUFBSSxTQUFTLEVBQUU7WUFDWCxVQUFVOzs7WUFBQztnQkFDUCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUN4QyxDQUFDLEdBQUUsR0FBRyxDQUFDLENBQUM7U0FDWDthQUFNOztnQkFDRyxHQUFHLEdBQUcsMERBQXdELE1BQVE7WUFDNUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsRUFBRTtnQkFDOUIsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDakIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUN4RCxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVCLENBQUMsRUFBQyxDQUFBO1NBQ0w7UUFDRCxPQUFPLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRUQ7O09BRUc7Ozs7O0lBQ0gsMENBQW9COzs7O0lBQXBCOztZQUNRLElBQUksR0FBRyxJQUFJLElBQUksRUFBRTs7WUFDakIsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQUU7O1lBQ3BDLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7O1lBQ3hDLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFO1FBQ25DLE9BQU8sSUFBSSxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7SUFDOUIsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7OztJQUNLLGtDQUFZOzs7Ozs7SUFBcEIsVUFBcUIsR0FBVzs7WUFDeEIsUUFBUSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7UUFDaEQsS0FBSyxJQUFJLElBQUksSUFBSSxZQUFZLEVBQUU7WUFDM0IsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN0RCxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2pDO1NBQ0o7SUFDTCxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCxzQ0FBZ0I7Ozs7O0lBQWhCLFVBQWlCLEtBQXVCOztZQUNoQyxHQUFHLEdBQUcsa0NBQWtDO1FBQzVDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILHNDQUFnQjs7Ozs7SUFBaEIsVUFBaUIsZ0JBQWtDOztZQUMzQyxHQUFHLEdBQUcsMkJBQTJCO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNILDhCQUFROzs7O0lBQVI7UUFDSSxPQUFPLHNDQUFzQyxDQUFDLE9BQU8sQ0FBQyxPQUFPOzs7O1FBQUUsVUFBVSxDQUFDOztnQkFDaEUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQzs7Z0JBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNyRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDMUIsQ0FBQyxFQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7O09BRUc7Ozs7O0lBQ0gsaUNBQVc7Ozs7SUFBWDs7WUFDUSxHQUFHLEdBQUcsK0NBQStDO1FBQ3pELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSCxtQ0FBYTs7Ozs7SUFBYixVQUFjLE1BQWM7UUFBNUIsaUJBaUNDOztZQWhDTyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUU7O1lBQ3ZCLElBQUksR0FBRyxtQkFBbUIsR0FBRyxNQUFNOztZQUNuQyxTQUFTLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsRUFBRTs7WUFDOUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQzVDLElBQUksTUFBTSxFQUFFO1lBQ1IsVUFBVTs7O1lBQUM7Z0JBQ1AsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN6QixDQUFDLEdBQUUsR0FBRyxDQUFDLENBQUM7U0FDWDthQUFNOztnQkFDQyxHQUFHLEdBQUcsd0RBQXNELE1BQU0sZ0NBQTZCO1lBQ25HLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFDLE1BQVc7Z0JBQ3hDLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7O3dCQUNyQixJQUFJO29CQUNSLElBQUksTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7d0JBQ3BCLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ3BCO3lCQUFNOzs0QkFDRyxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU07Ozs7d0JBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLElBQUksQ0FBQyxDQUFDLGdCQUFnQixFQUF2QixDQUF1QixFQUFDO3dCQUN4RCxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU07Ozs7O3dCQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUM7NEJBQzdCLE9BQU8sQ0FBQyxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzNELENBQUMsRUFBQyxDQUFBO3FCQUNMO29CQUNELE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN0QixZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ3pDLEtBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQzNCO3FCQUFNO29CQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7aUJBQ3BCO1lBQ0wsQ0FBQzs7OztZQUFFLFVBQUEsS0FBSztnQkFDSixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLENBQUMsRUFBQyxDQUFBO1NBQ0w7UUFDRCxPQUFPLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNILHFDQUFlOzs7OztJQUFmLFVBQWdCLGtCQUFzQzs7WUFDOUMsR0FBRyxHQUFHLDJCQUEyQjs7WUFDakMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1lBQ2hDLElBQUksRUFBRSxrQkFBa0I7WUFDeEIsWUFBWSxFQUFFLE1BQU07U0FDdkIsQ0FBQztRQUNGLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBR0Q7OztPQUdHOzs7Ozs7SUFDSCxnQ0FBVTs7Ozs7SUFBVixVQUFXLGNBQW1COztZQUN0QixHQUFHLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDOztZQUM5QyxJQUFJLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNyRCxJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDOztZQUNqRCxNQUFNLEdBQUcsd0RBQXdEOztZQUNqRSxRQUFRLEdBQUcsK0NBQStDOztZQUMxRCxRQUFRLEdBQUcsNENBQTRDOztZQUN2RCxNQUFNLEdBQUcsOEdBQThHO1FBQzNILElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDM0IsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUM3QjthQUFNLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDcEMsSUFBSSxHQUFHLE9BQU8sQ0FBQztTQUNsQjthQUFNLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDcEMsSUFBSSxHQUFHLE9BQU8sQ0FBQztTQUNsQjthQUFNLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDbEMsSUFBSSxHQUFHLFNBQVMsQ0FBQztTQUNwQjthQUFNO1lBQ0gsSUFBSSxHQUFHLFNBQVMsQ0FBQztTQUNwQjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7Ozs7T0FLRzs7Ozs7OztJQUNILHFDQUFlOzs7Ozs7SUFBZixVQUFnQixXQUFtQixFQUFFLEtBQWE7UUFDOUMsT0FBTyxDQUFDLG1CQUFBLE1BQU0sRUFBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDN0csQ0FBQztJQUVEOzs7T0FHRzs7Ozs7O0lBQ0gsbUNBQWE7Ozs7O0lBQWIsVUFBYyxLQUFhO1FBQ3ZCLENBQUMsbUJBQUEsTUFBTSxFQUFPLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzRSxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7OztJQUNILG1DQUFhOzs7Ozs7SUFBYixVQUFjLFlBQW9CLEVBQUUsT0FBWTtRQUM1QyxDQUFDLG1CQUFBLE1BQU0sRUFBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3BGLENBQUM7SUFFRDs7Ozs7T0FLRzs7Ozs7Ozs7SUFDSCxxQ0FBZTs7Ozs7OztJQUFmLFVBQWdCLFlBQW9CLEVBQUUsYUFBcUIsRUFBRSxPQUE2QjtRQUN0RixDQUFDLG1CQUFBLE1BQU0sRUFBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNyRyxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7O0lBQ0gsd0NBQWtCOzs7OztJQUFsQixVQUFtQixPQUFrQzs7WUFDN0MsR0FBRyxHQUFHLHlEQUF5RDtRQUNuRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7O0lBQ0gsZ0NBQVU7Ozs7O0lBQVYsVUFBVyxPQUEwQjs7WUFDN0IsR0FBRyxHQUFHLGtEQUFrRDtRQUM1RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNILHVDQUFpQjs7Ozs7SUFBakIsVUFBa0IsT0FBaUM7O1lBQ3pDLEdBQUcsR0FBRyxrREFBa0Q7UUFDOUQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7SUFDSCx5Q0FBbUI7Ozs7SUFBbkI7O1lBQ1EsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFOztZQUNqQixJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRTs7WUFDekIsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDOztZQUMzQixHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRTs7WUFDbEIsR0FBRyxHQUFHLHNEQUFzRCxHQUFHLElBQUksR0FBRyxLQUFLLEdBQUcsR0FBRztRQUN2RixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0gsb0NBQWM7Ozs7O0lBQWQsVUFBZSxVQUFrQjs7WUFDekIsR0FBRyxHQUFHLG9DQUFrQyxVQUFVLCtCQUE0QjtRQUNsRixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFDRDs7T0FFRzs7Ozs7O0lBQ0gsbUNBQWE7Ozs7O0lBQWIsVUFBYyxPQUF1Qjs7WUFDN0IsR0FBRyxHQUFHLDhDQUE4QztRQUN4RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBQ0Q7O09BRUc7Ozs7OztJQUNILG1DQUFhOzs7OztJQUFiLFVBQWMsT0FBNkI7O1lBQ25DLEdBQUcsR0FBRyw4Q0FBOEM7UUFDeEQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNILCtCQUFTOzs7O0lBQVQ7O1lBQ1UsZ0JBQWdCLEdBQUcsQ0FBQyxtQkFBQSxNQUFNLEVBQU8sQ0FBQyxDQUFDLG1CQUFtQjtRQUM1RCxJQUFJLGdCQUFnQixJQUFJLGdCQUFnQixDQUFDLEdBQUcsRUFBRTs7Z0JBQ3BDLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsWUFBWTtZQUN0RCxJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsU0FBUyxFQUFFLEVBQUU7O29CQUN0QyxNQUFNLEdBQUcsWUFBWSxDQUFDLFNBQVMsRUFBRTs7b0JBQy9CLElBQUksR0FBRyxNQUFNLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ3RDLElBQUksSUFBSSxFQUFFO29CQUNOLE9BQU8sSUFBSSxDQUFDO2lCQUNmO2FBQ0o7U0FDSjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0gsb0NBQWM7Ozs7O0lBQWQsVUFBZSxHQUFHO1FBQ2QsOEJBQThCO1FBQzlCLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3JELENBQUM7SUFFRDs7O09BR0c7Ozs7O0lBQ0gsa0NBQVk7Ozs7SUFBWjs7WUFDUSxNQUFNLEdBQVcsTUFBTSxDQUFDLElBQUk7UUFDaEMsSUFBSTtZQUNBLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO2dCQUM3RCxJQUFJLE1BQU0sS0FBSyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxtQkFBQSxNQUFNLEVBQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRTtvQkFDMUQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7aUJBQzFCO3FCQUFNO29CQUNILE1BQU07aUJBQ1Q7YUFDSjtTQUNKO1FBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRztRQUNmLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNILHNDQUFnQjs7Ozs7SUFBaEIsVUFBaUIsWUFBaUI7UUFBbEMsaUJBdUNDO1FBdENHLElBQUksWUFBWSxJQUFJLFlBQVksQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQzNDLE9BQU87U0FDVjs7WUFDRyxLQUFLLEdBQUcsbUJBQUEsWUFBWSxDQUFDLEtBQUssRUFBeUI7O1lBQ2pELFlBQVksR0FBRyxLQUFLLENBQUMsT0FBTyxJQUFJLEVBQUU7O1lBQ2xDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFOztZQUMvQixTQUFTLEdBQUcsSUFBSTs7WUFDaEIsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLElBQU8sS0FBSyxDQUFDLE9BQU8sMENBQVksU0FBUywwQ0FBWSxLQUFLLENBQUMsWUFBYyxJQUFJLEVBQUU7O1lBRXBHLFlBQVksR0FBRyxLQUFLLENBQUMsWUFBWSxJQUFJLElBQUk7O1lBQzNDLFVBQXNCOztZQUNwQixPQUFPLEdBQUc7WUFDWixhQUFhLEVBQUUsS0FBSztZQUNwQixPQUFPLEVBQUU7Z0JBQ0w7b0JBQ0ksSUFBSSxFQUFFLEtBQUs7b0JBQ1gsR0FBRyxFQUFFLHdCQUF3QjtvQkFDN0IsTUFBTTs7O29CQUFFO3dCQUNKLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztvQkFDdkIsQ0FBQyxDQUFBO2lCQUNKO2FBQ0o7WUFDRCxLQUFLLEVBQUUsR0FBRztZQUNWLE1BQU0sRUFBRSxHQUFHO1lBQ1gsUUFBUSxFQUFFLEtBQUs7WUFDZixTQUFTLEVBQUU7Z0JBQ1AsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsT0FBTyxFQUFFLFlBQVk7Z0JBQ3JCLFVBQVUsRUFBRTtvQkFDUixJQUFJLEVBQUUsUUFBUTtvQkFDZCxPQUFPOzs7O29CQUFFLFVBQUMsQ0FBQzs7NEJBQ0QsTUFBTSxHQUFHLEtBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDO3dCQUMzQyxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ3BELENBQUMsQ0FBQTtpQkFDSjthQUNKO1NBQ0o7UUFDRCxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7OztJQUNLLHFDQUFlOzs7Ozs7SUFBdkIsVUFBd0IsSUFBSTs7WUFDbEIsU0FBUyxHQUFRLE1BQU07UUFDN0IsSUFBSSxTQUFTLENBQUMsYUFBYSxJQUFJLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFO1lBQzVELE9BQU8sU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3hEO2FBQU0sSUFBSSxRQUFRLENBQUMscUJBQXFCLElBQUksUUFBUSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxFQUFFOztnQkFDN0UsUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO1lBQ2pELFFBQVEsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1lBQzVCLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztZQUNsQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNwQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDbEIsSUFBSTtnQkFDQSxPQUFPLFFBQVEsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDdkM7WUFBQyxPQUFPLEVBQUUsRUFBRTtnQkFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQ2pEO29CQUFTO2dCQUNOLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ3ZDO1NBQ0o7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDOztnQkF6dkJKLFVBQVU7Ozs7Z0JBakJGLFdBQVc7Z0JBS1gsZUFBZTs7SUF1d0J4QixrQkFBQztDQUFBLEFBM3ZCRCxJQTJ2QkM7U0ExdkJZLFdBQVc7Ozs7OztJQUdoQiw4QkFBNEI7Ozs7O0lBQzVCLDhCQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZm9ya0pvaW4sIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQXNzaWduUGFyYW1ldGVyIH0gZnJvbSAnLi4vZW50aXR5L2NvbXBsZXRlLXJlc3BvbnNlJztcclxuaW1wb3J0IHsgQ29tcGxldGVDb250ZXh0IH0gZnJvbSAnLi4vZW50aXR5L2NvbXBsZXRlLWNvbnRleHQnO1xyXG5pbXBvcnQgeyBCYXRjaFZlcmlmeVNpZ25lZENvbnRleHQgfSBmcm9tICcuLi9lbnRpdHkvYmF0Y2hWZXJpZnlzaWduZWQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgQ2FuY2VsU3VibWl0UGF5bG9hZCwgU3RhcnRQcm9jZXNzUGF5bG9hZCB9IGZyb20gJy4uL2VudGl0eS9zdGFydC1wcm9jZXNzLXBheWxvYWQnO1xyXG5pbXBvcnQgeyBGaWxlRGVsZXRlRW50aXR5LCBGaWxlVXBsb2FkRW50aXR5LCBHc3BEb2NVcGxvYWRFbnRpdHkgfSBmcm9tICcuLi9lbnRpdHkvYXR0YWNobWVudCc7XHJcbmltcG9ydCB7IFdvcmtJdGVtRXhlY3V0ZVBhcmFtIH0gZnJvbSAnLi4vZW50aXR5L3dvcmtpdGVtLWV4ZWN1dGUtcGFyYW0nO1xyXG5pbXBvcnQgeyBVcmdlSGFuZGxlQ29udGV4dCwgVXJnZUhhbmRsZVNpbXVsYXRlQ29udGV4dCB9IGZyb20gJy4uL2VudGl0eS91cmdlLWhhbmRsZSc7XHJcbmltcG9ydCB7IEFkZFNpZ25QYXlsb2FkIH0gZnJvbSAnLi4vZW50aXR5L2FkZC1zaWduJztcclxuaW1wb3J0IHsgU2VydmVyRXhjZXB0aW9uRW50aXR5IH0gZnJvbSAnLi4vZW50aXR5L2V4Y2VwdGlvbi1lbnRpdHknO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IFRhc2tDZW50ZXJDb25maWcgfSBmcm9tICcuLi9lbnRpdHkvdGFzay1jZW50ZXItY29uZmlnJztcclxuaW1wb3J0IHsgQ29tbW9uQ29tbWVudCB9IGZyb20gJy4uL2VudGl0eS9jb21tZW50JztcclxuaW1wb3J0IHsgQ29tbW9uQ29tbWVudEZpbHRlciB9IGZyb20gJy4uL2VudGl0eS9jb21tb25Db21tZW50RmlsdGVyJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFRhc2tTZXJ2aWNlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGh0dHBTdmM6IEh0dHBTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBnZXRVc2Vyc0J5SWRzKGlkczogc3RyaW5nW10pOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIHZhciBwYXRoVXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC91c2Vycyc7XHJcbiAgICAgICAgcmV0dXJuIGZvcmtKb2luKGlkcy5tYXAoaWQgPT4gdGhpcy5odHRwU3ZjLmdldChwYXRoVXJsICsgYC8ke2lkfWAgKyBgP21vZGU9MDAwMmApKSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluW3peS9nOmhueaTjeS9nOWIl+ihqFxyXG4gICAgICovXHJcbiAgICBnZXRXb3JrSXRlbUFjdGlvbnMod29ya0l0ZW1JZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7d29ya0l0ZW1JZH0vYWN0aW9uc2A7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJp+ihjOWuoeaJueaTjeS9nFxyXG4gICAgICogQHBhcmFtIGNvbnRleHQg5omn6KGM5a6h5om55LiK5LiL5paHXHJcbiAgICAgKi9cclxuICAgIGNvbXBsZXRlKGNvbnRleHQ6IENvbXBsZXRlQ29udGV4dCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jb21wbGV0ZWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzlrqHmibnpooTop6PmnpBcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOaJp+ihjOWuoeaJueS4iuS4i+aWh1xyXG4gICAgICovXHJcbiAgICBjb21wbGV0ZVNpbXVsYXRlKGNvbnRleHQ6IENvbXBsZXRlQ29udGV4dCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jb21wbGV0ZS1zaW11bGF0aW9uYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlui3s+i9rOa0u+WKqOS/oeaBr1xyXG4gICAgICogQHBhcmFtIHdvcmtJdGVtSWQg5bel5L2c6aG5SWRcclxuICAgICAqIEBwYXJhbSBhY3Rpb24g5Yqo5L2c57yW5Y+3XHJcbiAgICAgKi9cclxuICAgIGdldERlc3RpbmF0aW9uU2NvcGUod29ya0l0ZW1JZDogc3RyaW5nLCBhY3Rpb246IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy8ke3dvcmtJdGVtSWR9L25leHROb2Rlcy8ke2FjdGlvbn1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7oioLngrlJROiOt+WPluaMh+WumuWPguS4juiAheeahOe7k+aenFxyXG4gICAgICogQHBhcmFtIHdvcmtJdGVtSWRcclxuICAgICAqIEBwYXJhbSBub2RlSWQg6K+05piO77yabm9kZUlkcz1bXCJub2RlMVwiLFwibm9kZTJcIizCt8K3wrddXHJcbiAgICAgKiBAcmV0dXJucyDmjIfmtL7kv6Hmga/nmoTmlbDnu4QgcmU6IEZsb3dOb2RlSW5mb1tdXHJcbiAgICAgKi9cclxuICAgIGdldFNpbXVsYXRpb25Bc3NpZ25lZUluZm8od29ya0l0ZW1JZDogc3RyaW5nLCBub2RlSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy8ke3dvcmtJdGVtSWR9L3NpbXVsYXRpb24tYXNzaWduZWVJbmZvP25vZGVJZHM9WyR7bm9kZUlkfV1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzlvoHor6LjgIHnn6XkvJpcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOS4iuS4i+aWh1xyXG4gICAgICovXHJcbiAgICBhZGRTaWduKGNvbnRleHQ6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jb3VudGVyU2lnbkFkZGA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlt7LpmIVcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOWPguaVsFxyXG4gICAgICovXHJcbiAgICByZWFkVGFzayhjb250ZXh0OiBXb3JrSXRlbUV4ZWN1dGVQYXJhbSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9yZWFkYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOafpeivouWNleaNruS/oeaBr++8iOaWueazleWQjeS4jeimgeWKqO+8jOWFtuS7luWcsOaWueacieW8leeUqO+8iVxyXG4gICAgICogQHBhcmFtIHdvcmtJdGVtSWQg5bel5L2c6aG5SWRcclxuICAgICAqL1xyXG4gICAgZ2V0VGFza0Zvcm1JbmZvKHdvcmtJdGVtSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgICAgIGxldCBjYWNoZUNvZGUgPSBcImdzcFdmVGFza0Zvcm1JbmZvXCIgKyB3b3JrSXRlbUlkO1xyXG4gICAgICAgIGNvbnN0IHRhc2tGb3JtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVDb2RlKTtcclxuICAgICAgICBpZiAodGFza0Zvcm0pIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoSlNPTi5wYXJzZSh0YXNrRm9ybSkpO1xyXG4gICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZm9ybVBhclVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvJHt3b3JrSXRlbUlkfS9mb3JtSW5mb2A7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cFN2Yy5nZXQoZm9ybVBhclVybCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUNvZGUsIEpTT04uc3RyaW5naWZ5KHJlKSk7XHJcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaMh+a0vuS/oeaBr1xyXG4gICAgICogQHBhcmFtIHRhc2tJZCDlt6XkvZzpoblJZFxyXG4gICAgICog5q2k5o6l5Y+j5Y+q6L+U5Zue5LiA5LiqQXNzaWduSW5mb+exu+W6j+WIl+WMluWQjueahOS/oeaBr++8jOS4jeaYr+WkmuS4qlxyXG4gICAgICovXHJcbiAgICBnZXRBc3NpZ25lZUluZm8odGFza0lkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvJHt0YXNrSWR9L2Fzc2lnbmVlSW5mb2A7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWKoOetvuenu+S6pOiMg+WbtOiuvue9rlxyXG4gICAgICogQHBhcmFtIHdvcmtJdGVtSWRcclxuICAgICAqIEBwYXJhbSBhY3Rpb25Db2RlXHJcbiAgICAgKi9cclxuICAgIGdldE9yZ2FuaXphdGlvblNjb3BlKHdvcmtJdGVtSWQ6IHN0cmluZywgYWN0aW9uQ29kZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7d29ya0l0ZW1JZH0vb3JnYW5pemF0aW9uU2NvcGUvJHthY3Rpb25Db2RlfWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNrua1geeoi+WunuS+i0lE5ZKM5Lu75Yqh54q25oCB5Yqe55CG5Lu75YqhXHJcbiAgICAgKiBAcGFyYW0gcHJvY0luc3RJZCDmtYHnqIvlrp7kvotpZFxyXG4gICAgICogQHBhcmFtIHN0YXRlIOS7u+WKoeeKtuaAgSAy5oiWNVxyXG4gICAgICovXHJcbiAgICBnZXRUYXNrQnlQcm9jSW5zdElkKHByb2NJbnN0SWQ6IHN0cmluZywgc3RhdGU6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS90YXNrL3YxLjAvdGFza3MvcHJvY2Vzc0luc3RhbmNlSWQ/cHJvY0luc3RJZD0ke3Byb2NJbnN0SWR9JnN0YXRlPSR7c3RhdGV9YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2ud29ya2l0ZW1JROiOt+WPluS7u+WKoeWunuS9k1xyXG4gICAgICogQHBhcmFtIHdvcmtJdGVtSWRcclxuICAgICAqL1xyXG4gICAgZ2V0VGFza0J5V29ya0l0ZW1JZCh3b3JrSXRlbUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL3Rhc2tzL3NvdXJjZUlkLyR7d29ya0l0ZW1JZH1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lt6XkvZzpoblJROaMh+a0vuS7u+WKoVxyXG4gICAgICogQHBhcmFtIGFzc2lnbmVlc1BhIOaMh+a0vuWPguaVsFxyXG4gICAgICovXHJcbiAgICBhc3NpZ25OZXh0VXNlcnNCeVdvcmtJdGVtSWQoYXNzaWduZWVzUGE6IEFzc2lnblBhcmFtZXRlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9hc3NpZ25Vc2VyYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBhc3NpZ25lZXNQYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5blm55cclxuICAgICAqIEBwYXJhbSB3b3JrSXRlbUlkIHRhc2sgaWRcclxuICAgICAqIEBwYXJhbSBjb21tZW50IGNvbW1lbnRcclxuICAgICAqL1xyXG4gICAgcmV0cmlldmUoY29udGV4dDogeyB3b3JrSXRlbUlkOiBzdHJpbmcsIGNvbW1lbnQ/OiBzdHJpbmcgfSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9yZXRyaWV2ZWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDku7vliqHnp7vkuqRcclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5bel5L2c6aG5SWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXRVSWQg55uu5qCH55So5oi3SWRcclxuICAgICAqL1xyXG4gICAgdHJhbnNmZXIodHJhbnNmZXJDb250ZXh0OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvdHJhbnNmZXJgO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIHRyYW5zZmVyQ29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDku7vliqHor4TorrpcclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5bel5L2c6aG5SWRcclxuICAgICAqIEBwYXJhbSB0YXJnZXRVSWQg55uu5qCH55So5oi3SWRcclxuICAgICAqL1xyXG4gICAgY29tbWVudChjb21tZW50Q29udGV4dDogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zL2NvbW1lbnRgO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGNvbW1lbnRDb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmihueUqOS7u+WKoVxyXG4gICAgICogQHBhcmFtIHRhc2tJZCDlt6XkvZzpoblJZFxyXG4gICAgICovXHJcbiAgICBjbGFpbSh0YXNrSWQ6IHN0cmluZywgY29tbWVudDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zL2NsYWltYDtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICB3b3JrSXRlbUlkOiB0YXNrSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI6aKG55SoXHJcbiAgICAgKiBAcGFyYW0gdGFza0lkIOS7u+WKoUlkXHJcbiAgICAgKi9cclxuICAgIHVuQ2xhaW0odGFza0lkOiBzdHJpbmcsIGNvbW1lbnQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy91bmNsYWltYDtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICB3b3JrSXRlbUlkOiB0YXNrSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oql6ZSZ5o+Q56S6XHJcbiAgICAgKiBAcGFyYW0gZXJyb3JcclxuICAgICAqL1xyXG4gICAgZXJyb3IoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5lcnJvciAmJiBlcnJvci5lcnJvci5NZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3IuZXJyb3IuTWVzc2FnZTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlLnNob3coJ3dhcm5pbmcnLCBtZXNzYWdlLCB7IHNhZmVIdG1sOiBmYWxzZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkK/liqjmtYHnqIvmjqXlj6NcclxuICAgICAqIEBwYXJhbSBwYXlsb2FkIEFQSeaJgOmcgOeahOS4iuS4i+aWh+WPguaVsFxyXG4gICAgICovXHJcbiAgICBzdGFydFByb2Nlc3MocGF5bG9hZDogU3RhcnRQcm9jZXNzUGF5bG9hZCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvc3RhcnRQcm9jZXNzYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBwYXlsb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWQr+WKqOa1geeoi+mihOino+aekFxyXG4gICAgICogQHBhcmFtIHBheWxvYWQgQVBJ5omA6ZyA55qE5LiK5LiL5paH5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0UHJvY2Vzc1NpbXVsYXRlKHBheWxvYWQ6IFN0YXJ0UHJvY2Vzc1BheWxvYWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL3N0YXJ0UHJvY2Vzcy1zaW11bGF0aW9uYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBwYXlsb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iOaPkOS6pFxyXG4gICAgICogQHBhcmFtIHBhcmFtIOWPguaVsFxyXG4gICAgICovXHJcbiAgICBjYW5jZWxTdWJtaXQocGFyYW06IENhbmNlbFN1Ym1pdFBheWxvYWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL2NhbmNlbFN1Ym1pdGA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgcGFyYW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBuZXdJZCgpIHtcclxuICAgICAgICBjb25zdCBTNCA9ICgpID0+ICgoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcclxuICAgICAgICByZXR1cm4gKFM0KCkgKyBTNCgpICsgJy0nICsgUzQoKSArICctJyArIFM0KCkgKyAnLScgKyBTNCgpICsgJy0nICsgUzQoKSArIFM0KCkgKyBTNCgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlueUqOaIt+W4uOeUqOaEj+ingeWIl+ihqFxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIGdldENvbW1lbnRMaXN0KGZpbHRlcj86IENvbW1vbkNvbW1lbnRGaWx0ZXIpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvY29tbW9uQ29tbWVudHNgO1xyXG4gICAgICAgIGZpbHRlciAmJiBmaWx0ZXIudHlwZSAmJiAodXJsICs9IGA/dHlwZT0ke2ZpbHRlci50eXBlfWApXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOW4uOeUqOaEj+ingVxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIGFkZENvbW1lbnQoY29tbWVudDogQ29tbW9uQ29tbWVudCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL2NvbW1vbkNvbW1lbnRzYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBjb21tZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIoOmZpOS4gOadoeW4uOeUqOaEj+ingVxyXG4gICAgICogQHBhcmFtIGlkIOW4uOeUqOaEj+ingWlkXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgZGVsZXRlQ29tbWVudChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvY29tbW9uQ29tbWVudHMvJHtpZH1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZGVsZXRlKHVybCwgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bku7vliqHkuK3lv4PphY3nva7poblcclxuICAgICAqIEBwYXJhbSBjb2RlIOmFjee9rumhueeahENvZGVcclxuICAgICAqL1xyXG4gICAgZ2V0VGFza0NlbnRlckNvbmZpZ0J5Q29kZShjb2RlOiBzdHJpbmcsIG93bmVyVHlwZT86IHN0cmluZywgb3duZXJJZD86IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL3Rhc2stY2VudGVyLXNldHRpbmcvY29kZT9jb2RlPSR7Y29kZX1gO1xyXG4gICAgICAgIG93bmVyVHlwZSAmJiAodXJsICs9IGAmb3duZXJUeXBlPSR7b3duZXJUeXBlfWApO1xyXG4gICAgICAgIG93bmVySWQgJiYgKHVybCArPSBgJm93bmVySWQ9JHtvd25lcklkfWApO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bns7vnu5/nuqfliKvphY3nva7vvIjnvJPlrZjkuLrkuIDlpKnvvIlcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsVGFza0NlbnRlckNvbmZpZygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgICAgICBsZXQgY29kZSA9IFwiZ3NwV2ZUYXNrQWxsQ29uZmlnXCI7XHJcbiAgICAgICAgbGV0IHRvZGF5Q29kZSA9IGNvZGUgKyB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IGNvbmZpZ1N0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRvZGF5Q29kZSk7XHJcbiAgICAgICAgaWYgKGNvbmZpZ1N0cikge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChKU09OLnBhcnNlKGNvbmZpZ1N0cikpO1xyXG4gICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL3Rhc2stY2VudGVyLXNldHRpbmcvYWxsP293bmVyVHlwZT1hbGwmb3duZXJJZD0qYDtcclxuICAgICAgICAgICAgdGhpcy5odHRwU3ZjLmdldCh1cmwpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0b2RheUNvZGUsIEpTT04uc3RyaW5naWZ5KHJlKSk7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQocmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDb25maWcoY29kZSk7XHJcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS7u+WKoeWIhuexu+e6p+WIq+mFjee9rlxyXG4gICAgICovXHJcbiAgICBnZXRUYXNrQ2F0ZWdvcnlDZW50ZXJDb25maWcoY2F0ZWdvcnlJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgc3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBcImdzcFdmVGFza0NhdGVnb3J5Q29uZmlnXCIgKyBjYXRlZ29yeUlkO1xyXG4gICAgICAgIGxldCB0b2RheUNvZGUgPSBjb2RlICsgdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGxldCBjb25maWdTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0b2RheUNvZGUpO1xyXG4gICAgICAgIGlmIChjb25maWdTdHIpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoSlNPTi5wYXJzZShjb25maWdTdHIpKTtcclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3Rhc2svdjEuMC90YXNrLWNlbnRlci1zZXR0aW5nL2FsbGA7XHJcbiAgICAgICAgICAgIHVybCArPSBgP293bmVyVHlwZT1jYXRlZ29yeSZvd25lcklkPSR7Y2F0ZWdvcnlJZH1gO1xyXG4gICAgICAgICAgICB0aGlzLmh0dHBTdmMuZ2V0KHVybCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRvZGF5Q29kZSwgSlNPTi5zdHJpbmdpZnkocmUpKTtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbmZpZyhjb2RlKTtcclxuICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiDojrflj5bku7vliqHkuK3lv4PkuKrkurrnlKjmiLfphY3nva7vvIjnvJPlrZjkuLrkuIDlpKnvvIlcclxuICAgICovXHJcbiAgICBnZXRBbGxVc2VyQ29uZmlnKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgICAgIGxldCBjb2RlID0gXCJnc3BXZlRhc2tVc2VyQ29uZmlnXCI7XHJcbiAgICAgICAgbGV0IHRvZGF5Q29kZSA9IGNvZGUgKyB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IGNvbmZpZ1N0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRvZGF5Q29kZSk7XHJcbiAgICAgICAgaWYgKGNvbmZpZ1N0cikge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChKU09OLnBhcnNlKGNvbmZpZ1N0cikpO1xyXG4gICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL3Rhc2stY2VudGVyLXNldHRpbmcvYWxsYDtcclxuICAgICAgICAgICAgdGhpcy5odHRwU3ZjLmdldCh1cmwpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0b2RheUNvZGUsIEpTT04uc3RyaW5naWZ5KHJlKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbmZpZyhjb2RlKTtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDnlKjmiLfnuqfliKvoh6rlrprkuYnphY3nva5cclxuICAgICAqIEBwYXJhbSBjb2RlIOmFjee9rumhuee8luWPt1xyXG4gICAgICovXHJcbiAgICBhZGRVc2VyQ29uZmlnKGNvZGU6IHN0cmluZywgY3VycmVudFZhbHVlOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCBjb25maWdDb2RlID0gXCJnc3BXZlRhc2tVc2VyQ29uZmlnXCI7XHJcbiAgICAgICAgbGV0IHRvZGF5Q29kZSA9IGNvbmZpZ0NvZGUgKyB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IGNvbmZpZ1N0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRvZGF5Q29kZSk7XHJcbiAgICAgICAgaWYgKGNvbmZpZ1N0cikge1xyXG4gICAgICAgICAgICBsZXQgbGlzdCA9IEpTT04ucGFyc2UoY29uZmlnU3RyKTtcclxuICAgICAgICAgICAgaWYgKGxpc3QgJiYgbGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gKGxpc3QgYXMgVGFza0NlbnRlckNvbmZpZ1tdKS5maW5kKGwgPT4gbC5jb25maWdDb2RlID09IGNvZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0b2RheUNvZGUsIEpTT04uc3RyaW5naWZ5KGxpc3QpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS90YXNrL3YxLjAvdGFzay1jZW50ZXItc2V0dGluZy9hZGQ/Y29uZmlnQ29kZT0ke2NvZGV9JmN1cnJlbnRWYWx1ZT0ke2N1cnJlbnRWYWx1ZX1gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W55So5oi35aS05YOP77yI5bey6KKr5Lu75Yqh5Lit5b+D6LCD55So77yJXHJcbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXHJcbiAgICAgKi9cclxuICAgIGdldFVzZXJBdmF0YXIodXNlcklkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgICAgICBsZXQgY29kZSA9IFwiZ3NwV2ZUYXNrVXNlckF2YXRhclwiO1xyXG4gICAgICAgIGxldCB0b2RheUNvZGUgPSBjb2RlICsgdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGxldCB0b2RheVVzZXJDb2RlID0gdG9kYXlDb2RlICsgdXNlcklkO1xyXG4gICAgICAgIGxldCBhdmF0YXJTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0b2RheVVzZXJDb2RlKTtcclxuICAgICAgICBpZiAoYXZhdGFyU3RyKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KEpTT04ucGFyc2UoYXZhdGFyU3RyKSk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC91c2VyaW5mb3Mvc2V0dGluZy91c2Vycz91c2VySWQ9JHt1c2VySWR9YDtcclxuICAgICAgICAgICAgdGhpcy5odHRwU3ZjLmdldCh1cmwpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQocmUpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odG9kYXlVc2VyQ29kZSwgSlNPTi5zdHJpbmdpZnkocmUpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29uZmlnKGNvZGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluW9k+WJjeaXpeacn1xyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50RGF0ZVN0cmluZygpIHtcclxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbGV0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgbW9udGggPSAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgZGF5ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcclxuICAgICAgICByZXR1cm4geWVhciArIG1vbnRoICsgZGF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog56e76ZmkbG9jYWxTdG9yYWdl57yT5a2YXHJcbiAgICAgKiBAcGFyYW0ga2V5IFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbW92ZUNvbmZpZyhrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGxldCB0b2RheUtleSA9IGtleSArIHRoaXMuZ2V0Q3VycmVudERhdGVTdHJpbmcoKTtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIGluIGxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5pbmRleE9mKGtleSkgPiAtMSAmJiBpdGVtLmluZGV4T2YodG9kYXlLZXkpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnnJ/mraPkuIrkvKDpmYTku7ZcclxuICAgICAqIEBwYXJhbSBmaWxlc1xyXG4gICAgICovXHJcbiAgICB1cGxvYWRBdHRhY2htZW50KGZpbGVzOiBGaWxlVXBsb2FkRW50aXR5KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2MvY29tbWl0YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnB1dCh1cmwsIGZpbGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIoOmZpOmZhOS7tlxyXG4gICAgICogQHBhcmFtIGZpbGVEZWxldGVFbnRpdHlcclxuICAgICAqL1xyXG4gICAgZGVsZXRlQXR0YWNobWVudChmaWxlRGVsZXRlRW50aXR5OiBGaWxlRGVsZXRlRW50aXR5KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2NgO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZGVsZXRlKHVybCwgZmlsZURlbGV0ZUVudGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7rlhoXnoIFcclxuICAgICAqL1xyXG4gICAgY3JlYXRlTk0oKSB7XHJcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blvZPliY3nlKjmiLfkv6Hmga9cclxuICAgICAqL1xyXG4gICAgZ2V0VXNlckluZm8oKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC91c2VyaW5mb3M/aW5mb1R5cGU9dXNlcmA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlueUqOaIt+aJgOacieetvuWQjVxyXG4gICAgICovXHJcbiAgICBnZXRVc2VyU2lnbklkKHVzZXJJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgc3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgbGV0IGNvZGUgPSAnZ3NwV2ZUYXNrVXNlclNpZ24nICsgdXNlcklkO1xyXG4gICAgICAgIGxldCB0b2RheUNvZGUgPSBjb2RlICsgdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGxldCBzaWduSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0b2RheUNvZGUpO1xyXG4gICAgICAgIGlmIChzaWduSWQpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoc2lnbklkKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9mb3JtZG9jL2ZpbGVpbmZvL2Zvcm0/Zm9ybWlkPSR7dXNlcklkfSZyb290aWQ9dGFza2NlbnRlcnNpZ25hdHVyZWA7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cFN2Yy5nZXQodXJsKS5zdWJzY3JpYmUoKHJlc3VsdDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2lnbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSByZXN1bHRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdCA9IHJlc3VsdC5maWx0ZXIoYSA9PiBhICYmIGEubGFzdE1vZGlmaWVkVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSBsaXN0LnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubGFzdE1vZGlmaWVkVGltZSA+IGIubGFzdE1vZGlmaWVkVGltZSA/IGEgOiBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoc2lnbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odG9kYXlDb2RlLCBzaWduLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbmZpZyhjb2RlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KCcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiK5Lyg562+5ZCN77yM6L+U5Zue6ZW/5Lyg5ZCO55qE562+5ZCNaWRcclxuICAgICAqL1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlKGdzcERvY1VwbG9hZEVudGl0eTogR3NwRG9jVXBsb2FkRW50aXR5KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2NgO1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSB0aGlzLmh0dHBTdmMuc2V0SGVhZGVyKHtcclxuICAgICAgICAgICAgYm9keTogZ3NwRG9jVXBsb2FkRW50aXR5LFxyXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0J1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5yZXF1ZXN0KCdQb3N0JywgdXJsLCBoZWFkZXIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOino+aekOaWh+S7tuexu+Wei++8jOe7meWHuue8qeeVpeWbvlxyXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRJbmZvXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUl0ZW0oYXR0YWNobWVudEluZm86IGFueSkge1xyXG4gICAgICAgIHZhciBwb3MgPSBhdHRhY2htZW50SW5mby5maWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7XHJcbiAgICAgICAgdmFyIHR5cGUgPSBhdHRhY2htZW50SW5mby5maWxlTmFtZS5zdWJzdHJpbmcocG9zICsgMSk7XHJcbiAgICAgICAgdHlwZSA9ICh0eXBlID09ICcnID8gJ0RlZmF1bHQnIDogdHlwZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB2YXIgZG9jTGliID0gJ2RvYy1kb2N4LWh0bS1odG1sLWpzLXBkZi1wcHQtcHB0eC1yYXItemlwLXR4dC14bHMteGxzeCc7XHJcbiAgICAgICAgdmFyIHZpZGVvTGliID0gJ3dhdi1haWYtYWlmZi1hdS1tcDEtbXAyLW1wMy1yYS1ybS1yYW0tbWlkLXJtaSc7XHJcbiAgICAgICAgdmFyIGF1ZGlvTGliID0gJ2F2aS1ybS1ybXZiLW1wZWctbXBnLWRhdC1tb3YtcXQtYXNmLXdtLW1wNCc7XHJcbiAgICAgICAgdmFyIGltZ0xpYiA9ICd3ZWJwLWJhaWJtcC1kdXBjeC10aWYtZ2lmLWpwZWctdGdhLWV4aWYtZnB4LXN2Zy1wc2QtY2RyLXBjZC1keGYtdWZvLWVwcy1haS1wbmctaGRyaS1yYXctd21mLWZsaWMtZW1mLWljby1qcGcnO1xyXG4gICAgICAgIGlmIChkb2NMaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2aWRlb0xpYi5pbmRleE9mKHR5cGUpID49IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9ICd2aWRlbyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhdWRpb0xpYi5pbmRleE9mKHR5cGUpID49IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdhdWRpbyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbWdMaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAncGljdHVyZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdkZWZhdWx0JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDms6jlhozkuLvpopjvvIzlubbojrflj5blvZPliY3kuLvpopjllK/kuIDmoIfor4Z0b2tlblxyXG4gICAgICogQHBhcmFtIHN1YmplY3RDb2RlIOS4u+mimOe8luegge+8jOmdnuWUr+S4gOagh+ivhu+8jHRva2Vu5Li65ZSv5LiA5qCH6K+GXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4g5Li76aKY5ZSv5LiA5qCH6K+G44CCXHJcbiAgICAgKiBAcmV0dXJucyDkuLvpopjnmoTllK/kuIDmoIfor4bjgIJcclxuICAgICAqL1xyXG4gICAgc3ViamVjdFJlZ2lzdGVyKHN1YmplY3RDb2RlOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmJyb2FkY2FzdC5zdWJqZWN0UmVnaXN0ZXIoc3ViamVjdENvZGUsIHsgZnVuY0lkOiB0b2tlbiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOebkeWQrOenu+mZpFxyXG4gICAgICogQHBhcmFtIHRva2VuXHJcbiAgICAgKi9cclxuICAgIHN1YmplY3RSZW1vdmUodG9rZW46IHN0cmluZykge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5icm9hZGNhc3Quc3ViamVjdFJlbW92ZSh0b2tlbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4fmn5DkuKp0b2tlbuWPkemAgea2iOaBr1xyXG4gICAgICogQHBhcmFtIHN1YmplY3RUb2tlbiDkuLvpopjllK/kuIDnmoR0b2tlbuagh+ivhlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2Ug6KaB5Y+R6YCB55qE5raI5oGvXHJcbiAgICAgKi9cclxuICAgIHN1YmplY3ROb3RpZnkoc3ViamVjdFRva2VuOiBzdHJpbmcsIG1lc3NhZ2U6IGFueSkge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5icm9hZGNhc3Qubm90aWZ5KHN1YmplY3RUb2tlbiwgbWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDop4Llr5/ogIXvvIzlubbnm5HlkKzmtojmga9cclxuICAgICAqIEBwYXJhbSBzdWJqZWN0VG9rZW4g5Li76aKYdG9rZW5cclxuICAgICAqIEBwYXJhbSBvYnNlcnZlclRva2VuIOW9k+WJjeebkeWQrOS4u+mimOeahOinguWvn+iAheWUr+S4gOagh+ivhnRva2Vu44CC5q2k5aSE5Zu65a6aXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlciDnm5HlkKzliLDmtojmga/lkI7miafooYznmoTliqjkvZxcclxuICAgICAqL1xyXG4gICAgc3ViamVjdFJlc3BvbnNlKHN1YmplY3RUb2tlbjogc3RyaW5nLCBvYnNlcnZlclRva2VuOiBzdHJpbmcsIGhhbmRsZXI6ICh2YWx1ZTogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmJyb2FkY2FzdC5yZXNwb25zZShzdWJqZWN0VG9rZW4sIG9ic2VydmVyVG9rZW4sIGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5YKs5Yqe5qih5ouf57uT5p6cXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCDlj4LmlbBcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHVyZ2VIYW5kbGVTaW11bGF0ZShjb250ZXh0OiBVcmdlSGFuZGxlU2ltdWxhdGVDb250ZXh0KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvZ2V0VXJnZUhhbmRsZUluZm9gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omn6KGM5YKs5YqeXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCDlj4LmlbBcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHVyZ2VIYW5kbGUoY29udGV4dDogVXJnZUhhbmRsZUNvbnRleHQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy91cmdlSGFuZGxlYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKirmibnph4/mlbDlrZfnrb7lkI1cclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOWPguaVsFxyXG4gICAgICovXHJcbiAgICBiYXRjaFZlcmlmeVNpZ25lZChjb250ZXh0OiBCYXRjaFZlcmlmeVNpZ25lZENvbnRleHQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvYmF0Y2hWZXJpZnlTaWduZWRgO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W55So5oi35biu5Yqp5YmN56uv6YWN572uXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgZ2V0V2ZVc2VySGVscENvbmZpZygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBsZXQgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIGxldCBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL3BsYXRmb3JtL3J1bnRpbWUvd2Yvd2ViL3dmLXVzZXItaGVscC9jb25maWcuanNvbj92PWAgKyB5ZWFyICsgbW9udGggKyBkYXk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWKoOetvumFjee9rlxyXG4gICAgICovXHJcbiAgICBnZXRBZGhvY0NvbmZpZyh3b3JrSXRlbUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7d29ya0l0ZW1JZH0vYWRob2NDb25maWcvQWRkU2lnbkJlaGluZGA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yqg562+5o+Q5LqkXHJcbiAgICAgKi9cclxuICAgIGFkaG9jQXNzaWduZWUocGF5bG9hZDogQWRkU2lnblBheWxvYWQpIHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9hZGhvY0Fzc2lnbmVlYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBwYXlsb2FkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI5b6B6K+iXHJcbiAgICAgKi9cclxuICAgIGNhbmNlbENvbnN1bHQocGF5bG9hZDogV29ya0l0ZW1FeGVjdXRlUGFyYW0pIHtcclxuICAgICAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jYW5jZWxDb25zdWx0YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBwYXlsb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpmluU3VpdGXnjq/looNcclxuICAgICAqL1xyXG4gICAgaXNJblN1aXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGZyYW1lV29ya1NlcnZpY2UgPSAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZTtcclxuICAgICAgICBpZiAoZnJhbWVXb3JrU2VydmljZSAmJiBmcmFtZVdvcmtTZXJ2aWNlLnJ0Zikge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbmRNZXRob2QgPSBmcmFtZVdvcmtTZXJ2aWNlLnJ0Zi5leHRlbmRNZXRob2Q7XHJcbiAgICAgICAgICAgIGlmIChleHRlbmRNZXRob2QgJiYgZXh0ZW5kTWV0aG9kLmdldEV4dE9iaigpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXh0T2JqID0gZXh0ZW5kTWV0aG9kLmdldEV4dE9iaigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IGV4dE9iai5pR0lYNGluU3VpdGVNb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWtl+espuS4suWtl+iKgumVv+W6plxyXG4gICAgICovXHJcbiAgICBnZXRCeXRlc0xlbmd0aChzdHIpIHtcclxuICAgICAgICAvLyDlnKhHQkvnvJbnoIHph4zvvIzpmaTkuoZBU0NJSeWtl+espu+8jOWFtuWug+mDveWNoOS4pOS4quWtl+espuWuvVxyXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW15cXHgwMC1cXHhmZl0vZywgJ3h4JykubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+WdG9wIHdpbmRvd1xyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIGdldFRvcFdpbmRvdygpOiBXaW5kb3cge1xyXG4gICAgICAgIGxldCBjdXJXaW46IFdpbmRvdyA9IHdpbmRvdy5zZWxmO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJXaW4ubG9jYXRpb24ub3JpZ2luID09PSBjdXJXaW4ucGFyZW50LmxvY2F0aW9uLm9yaWdpbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cldpbiAhPT0gY3VyV2luLnBhcmVudCAmJiAhKGN1cldpbiBhcyBhbnkpLmlzUlRGVG9wV2luKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyV2luID0gY3VyV2luLnBhcmVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICByZXR1cm4gY3VyV2luO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5by55Ye66ZSZ6K+v5o+Q56S6XHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUVycm9yTGV2ZWwoZXJyb3JNZXNzYWdlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlICYmIGVycm9yTWVzc2FnZS5zdGF0dXMgPCA1MDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZXJyb3IgPSBlcnJvck1lc3NhZ2UuZXJyb3IgYXMgU2VydmVyRXhjZXB0aW9uRW50aXR5O1xyXG4gICAgICAgIGNvbnN0IGV4Y2VwdGlvbk1zZyA9IGVycm9yLk1lc3NhZ2UgfHwgJyc7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGVycm9yLmRhdGUgfHwgbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBsb2NhbERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGNvbnN0IGRldGFpbCA9IGVycm9yLkRldGFpbCB8fCBgJHtlcnJvci5NZXNzYWdlfVxcclxcbuWPkeeUn+aXtumXtO+8miR7bG9jYWxEYXRlfVxcclxcbuivpue7huS/oeaBr++8miR7ZXJyb3IuaW5uZXJNZXNzYWdlfWAgfHwgJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IGlubmVyTWVzc2FnZSA9IGVycm9yLmlubmVyTWVzc2FnZSB8fCBudWxsO1xyXG4gICAgICAgIGxldCBic01vZGFsUmVmOiBCc01vZGFsUmVmO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHNob3dNYXhCdXR0b246IGZhbHNlLFxyXG4gICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+efpemBk+S6hicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZycsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzTW9kYWxSZWYuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHdpZHRoOiA0NDAsXHJcbiAgICAgICAgICAgIGhlaWdodDogMjAwLFxyXG4gICAgICAgICAgICBzYWZlSHRtbDogZmFsc2UsXHJcbiAgICAgICAgICAgIGV4Y2VwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogbG9jYWxEYXRlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogaW5uZXJNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgY29weUJ1dHRvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICflpI3liLbor6bnu4bkv6Hmga8nLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weVRvQ2xpcGJvYXJkKGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJzTW9kYWxSZWYuY29udGVudC5zaG93TWluaU5vdGlmeShyZXN1bHQsIDE1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnNNb2RhbFJlZiA9IHRoaXMubWVzc2FnZS5zaG93KCdleGNlcHRpb24nLCBleGNlcHRpb25Nc2csIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6LWL5YC85Yiw57KY6LS05p2/XHJcbiAgICAgKiBAcGFyYW0gdGV4dCBcclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvcHlUb0NsaXBib2FyZCh0ZXh0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgd2luZG93UmVmOiBhbnkgPSB3aW5kb3c7XHJcbiAgICAgICAgaWYgKHdpbmRvd1JlZi5jbGlwYm9hcmREYXRhICYmIHdpbmRvd1JlZi5jbGlwYm9hcmREYXRhLnNldERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1JlZi5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJUZXh0XCIsIHRleHQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkICYmIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChcImNvcHlcIikpIHtcclxuICAgICAgICAgICAgdmFyIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ29weSB0byBjbGlwYm9hcmQgZmFpbGVkLlwiLCBleCk7XHJcbiAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==