/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, TemplateRef, HostBinding, Injector, } from '@angular/core';
import { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';
import { TaskService } from '../../service/task.service';
import { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';
import { NotifyService } from '@farris/ui-notify';
import { I18nService } from '../../service/i18n/i18n.service';
import { AssigneeInfo } from '../../entity/complete-response';
import { BehaviorSubject, Subject } from 'rxjs';
import { TaskAction } from '../../entity/task-action';
import { WfTaskHandlerService } from '../../wf-task-handler.service';
import { TaskEntity } from '../../entity/task-entity';
import { ActionBaseImplComponent, ActionOrigin } from '@gsp-wf/task-impl-api';
import { LoadingService } from '@farris/ui-loading';
import { MessagerService } from '@farris/ui-messager';
import { ConfigCode } from '../../entity/task-center-config';
import { WorkItemExecuteParam } from '../../entity/workitem-execute-param';
import { UrgeHandleContext, UrgeHandleSimulateContext } from '../../entity/urge-handle';
import { BatchVerifySignedContext } from '../../entity/batchVerifysigned';
import { WfContext } from '../../entity/wfContext';
import { UrgeHandleComponent } from "../urge-handle/urge-handle.component";
import { MultiInstanceType } from '../../entity/add-sign';
import { SimulateSubject } from '../../entity/simulaite-subject';
var TaskExecuteComponent = /** @class */ (function (_super) {
    tslib_1.__extends(TaskExecuteComponent, _super);
    function TaskExecuteComponent(taskService, notify, i18nService, handlerService, loadingService, message, injector) {
        var _this = _super.call(this) || this;
        _this.taskService = taskService;
        _this.notify = notify;
        _this.i18nService = i18nService;
        _this.handlerService = handlerService;
        _this.loadingService = loadingService;
        _this.message = message;
        _this.injector = injector;
        // 流程实例ID
        _this.actionEntity = new TaskAction(); // 动作实体
        // 动作实体
        _this.comment = ''; // 审批意见
        // 审批意见
        _this.MAX_COMMENT_LENGTH = 4000; //审批意见最大长度
        //当前动作的默认意见
        _this.taskList = []; //批量审批接收到的任务list
        //批量审批接收到的任务list
        _this.batchSecond = 0; //批量操作的时间
        //批量操作的时间
        _this.ifSelectNode = false; // 是否显示选择下一环节
        // 是否显示选择下一环节
        _this.ifSelectUser = false; // 是否显示下一环节处理人
        // 是否显示下一环节处理人
        _this.ifAssignUser = false; // 是否显示办理人员框
        // 是否显示办理人员框
        _this.ifUrgeType = false; // 是否显示接收人框（催办消息接收人）
        // 是否显示接收人框（催办消息接收人）
        _this.ifShowCommentToMySelf = false; // 是否显示审批记录仅自己可见
        // 是否显示审批记录仅自己可见
        _this.singleSelect = false; // 用户帮助是否单选，默认多选
        // 用户帮助是否单选，默认多选
        _this.selectTargetAble = false; // 是否允许选择下一环节
        // 是否允许选择下一环节
        _this.hideComment = false; //审批记录仅自己可见
        //审批记录仅自己可见
        _this.filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // 系统用户帮助是否过滤当前人
        // 系统用户帮助是否过滤当前人
        _this.selectedUsers = []; // 用户帮助选择后的Id数组
        _this.subject = new BehaviorSubject(null);
        _this.submitResult = { result: true, isClose: true }; // 动作执行完成后返回的实体结果
        // 动作执行完成后返回的实体结果
        _this.bindingData = {}; // 系统帮助多选时用到
        // 系统帮助多选时用到
        _this.selectNodeText = _this.i18nService.getValue('task.nextNodeText'); // 下一环节显示的文字,"下一环节"
        // 处理人员显示文字
        _this.commentPlaceHolder = _this.i18nService.getValue('static.inputHolder'); //审批意见框placeholder
        //审批意见框placeholder
        _this.showAttachment = true; //是否显示附件上传
        //是否显示附件上传
        _this.showSign = true; //是否显示签名
        //是否显示签名
        _this.showCommonComment = true; //是否显示常用意见
        //是否显示常用意见
        _this.textAreaHeight = 84; //文字框的高度
        //文字框的高度
        _this.billMethodConfigs = []; // 表单动作配置列表
        // 选择的下一环节ID，并行分支是，逗号隔开的
        _this.destNodes = []; // 候选下一环节
        // 候选下一环节
        _this.dialogHeight = 270; // 弹框的高度
        // 弹框的高度
        _this.dialogHeightBase = 70;
        _this.addendum = new Addendum(); // 附件、签名信息
        // 附件、签名信息
        _this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        _this.assignInfos = [{
                // 节点返回的指派信息（多个）
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: null,
                resolved: false,
            }];
        _this.otherAssignInfos = []; //其他节点指派信息
        //其他节点指派信息
        _this.originOtherAssignInfos = []; //缓存一开始的其他节点指派信息
        // 表单对象
        _this.ifRegistered = false; // 表单是否注册
        // 表单是否注册
        _this.configList = []; //任务中心配置项
        //任务中心配置项
        _this.verifySigned = new VerifySigned(); // 数字验签参数
        // 数字验签参数
        _this.submitDisable = false; // 提交按钮是否禁用
        // 提交按钮是否禁用
        //加签使用
        _this.addSign = {
            showSignToSign: false,
            allowSignToSIgn: true,
            showMultiInstanceType: false,
            multiInstanceType: [
                { value: 'Parallel', name: _this.i18nService.getValue('addSign.parallel') },
                { value: 'Sequential', name: _this.i18nService.getValue('addSign.sequential') },
                { value: 'Preempt', name: _this.i18nService.getValue('addSign.preempt') },
            ],
            originMultiInstType: '',
            curMultiInstType: MultiInstanceType.Parallel.toString()
        };
        //动态驳回配置
        _this.showBackWardConfig = {
            title: _this.i18nService.getValue('backWardConfig.title'),
            dynamicBackWardRuleAble: false,
            displayPlaceholder: '',
            showTips: false,
            enable: false,
            backWardRules: [{
                    name: _this.i18nService.getValue('backWardConfig.sequence'),
                    value: 'sequence'
                }, {
                    name: _this.i18nService.getValue('backWardConfig.backToMe'),
                    value: 'backToMe'
                }, {
                    name: _this.i18nService.getValue('backWardConfig.backToCurrentNode'),
                    value: 'backToCurrentNode'
                }]
        };
        /**
         * 任务催办时使用
         */
        _this.showUrgeMessageSubject = false; // 是否显示催办消息主题（催办时使用）
        // 内容可编辑
        _this.wfContext = new WfContext(); //工作流上下文
        //工作流上下文
        _this.enablePriority = false; //是否显示密级（动作级别）
        //是否显示密级（动作级别）
        _this.cls = '';
        _this.POST_MESSAGE_TARGET = window.document.location.origin;
        _this.language = localStorage.getItem('languageCode') || 'zh-CHS'; //中英文
        /**
         * 监听事件处理
         */
        _this.eventHandler = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.messageSubject.next(event);
        });
        // 如果存在消息监听，先删掉
        if (TaskExecuteComponent.func) {
            window.removeEventListener('message', TaskExecuteComponent.func, false);
        }
        _this.addMessageListener();
        return _this;
    }
    /**
     * 组件销毁时，去掉subject注册
     */
    /**
     * 组件销毁时，去掉subject注册
     * @return {?}
     */
    TaskExecuteComponent.prototype.ngOnDestroy = /**
     * 组件销毁时，去掉subject注册
     * @return {?}
     */
    function () {
        if (this.actionToken) {
            this.taskService.subjectRemove(this.actionToken);
        }
        if (this.simulateToken) {
            this.taskService.subjectRemove(this.simulateToken);
        }
    };
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.getAllUserConfig().subscribe((/**
         * @param {?} configList
         * @return {?}
         */
        function (configList) {
            load.close();
            _this.configList = configList;
            /** @type {?} */
            var comment = configList.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.configCode === ConfigCode.Default_Approval_Comment; }));
            /** @type {?} */
            var if_store_comment = configList.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.configCode === ConfigCode.If_Store_Comment; }));
            /** @type {?} */
            var passComment;
            /** @type {?} */
            var backComment;
            if (comment && comment.currentValue) {
                if (_this.language == 'zh-CHS') {
                    passComment = JSON.parse(comment.currentValue).pass;
                    backComment = JSON.parse(comment.currentValue).back;
                }
                else {
                    passComment = JSON.parse(comment.currentValue)['pass_' + _this.language];
                    backComment = JSON.parse(comment.currentValue)['back_' + _this.language];
                }
                if (_this.actionEntity.code === 'Pass') {
                    _this.comment = passComment;
                    _this.defaultComment = passComment;
                }
                if (_this.actionEntity.code === 'Back') {
                    _this.comment = backComment;
                    _this.defaultComment = backComment;
                }
            }
            if (if_store_comment && if_store_comment.currentValue === 'true') {
                if (_this.wfCacheComment) { //开启暂存意见，当切换到驳回并且
                    if (_this.actionEntity.code == 'Back' && _this.wfCacheComment == passComment) {
                    }
                    else {
                        _this.comment = _this.wfCacheComment;
                    }
                }
            }
        }), (/**
         * @return {?}
         */
        function () {
            load.close();
        }));
        // 从任务办理界面打开时，才注册服务
        if (this.origin === ActionOrigin.TaskForm) {
            this.initFormEvent();
            // 获取表单操作配置
            this.taskService.getTaskFormInfo(this.workItemId).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                if (re && re.billMethodConfigs && re.billMethodConfigs.length) {
                    _this.billMethodConfigs = re.billMethodConfigs;
                }
            }));
        }
        /** @type {?} */
        var context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.addMessageListener = /**
     * @private
     * @return {?}
     */
    function () {
        window.addEventListener('message', this.eventHandler, false);
        TaskExecuteComponent.func = this.eventHandler;
    };
    /**
     * 重写父类方法
     * @param task
     */
    /**
     * 重写父类方法
     * @param {?} task
     * @return {?}
     */
    TaskExecuteComponent.prototype.setTask = /**
     * 重写父类方法
     * @param {?} task
     * @return {?}
     */
    function (task) {
        if (task) {
            this.task = task;
            this.workItemId = task.sourceId;
            this.processInstanceId = task.processInstanceId;
            this.wfContext.processCategoryId = task.categoryId;
            this.selectedPriority = task.priority;
        }
    };
    /**
     * 批量办理 设置任务列表
     * @param taskList
     */
    /**
     * 批量办理 设置任务列表
     * @param {?} taskList
     * @return {?}
     */
    TaskExecuteComponent.prototype.setTaskList = /**
     * 批量办理 设置任务列表
     * @param {?} taskList
     * @return {?}
     */
    function (taskList) {
        if (taskList.length > 20) {
            this.dialogHeight = 290;
        }
        this.taskList = taskList;
        this.batchSecond = Math.ceil(this.taskList.length / 6);
    };
    /**
     * 重写父类方法
     * @param action
     */
    /**
     * 重写父类方法
     * @param {?} action
     * @return {?}
     */
    TaskExecuteComponent.prototype.setAction = /**
     * 重写父类方法
     * @param {?} action
     * @return {?}
     */
    function (action) {
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var result = new SimulateSubject();
        if (action) {
            this.actionEntity = action;
            if (this.task) { // 单个、批量都setAction，单个才执行模拟
                return this.simulate(this.actionEntity);
            }
            if (this.taskList && this.taskList.length) {
                return this.batchSimulate();
            }
        }
        //批量时，也要返回
        setTimeout((/**
         * @return {?}
         */
        function () {
            subject.next(result);
        }), 100);
        return subject.asObservable();
    };
    /**
     * 前事件初始化，将服务注册到window上，供表单调用
     * 任务办理界面的window，表单的window.parent
     */
    /**
     * 前事件初始化，将服务注册到window上，供表单调用
     * 任务办理界面的window，表单的window.parent
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.initFormEvent = /**
     * 前事件初始化，将服务注册到window上，供表单调用
     * 任务办理界面的window，表单的window.parent
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 审批前事件
        this.actionToken = this.workItemId + 'action';
        /** @type {?} */
        var actionToken = this.actionToken;
        /** @type {?} */
        var subjectCode = 'FormSubjectCode';
        ((/** @type {?} */ (window))).gspWfEventService = ((/** @type {?} */ (window))).gspWfEventService || {};
        ((/** @type {?} */ (window))).gspWfEventService.register = (/**
         * @param {?} formObject
         * @return {?}
         */
        function (formObject) {
            _this.taskService.subjectRegister(subjectCode, actionToken);
            _this.ifRegistered = true;
            _this.formObject = formObject;
        });
        ((/** @type {?} */ (window))).gspWfEventService.notify = (/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (_this.ifRegistered) {
                _this.taskService.subjectNotify(actionToken, value);
            }
            else { // 表单不注册，也可直接调用notify
                _this.simulateToken = _this.workItemId + 'simulate';
                /** @type {?} */
                var simulateToken = _this.simulateToken;
                _this.taskService.subjectRegister(subjectCode, simulateToken);
                _this.taskService.subjectResponse(simulateToken, '', (/**
                 * @param {?} value
                 * @return {?}
                 */
                function (value) {
                    value && value.dataChanged && _this.completeSimulate();
                }));
                _this.taskService.subjectNotify(simulateToken, value);
            }
        });
    };
    /**
     * 点击提交的时候，执行表单的前事件
     */
    /**
     * 点击提交的时候，执行表单的前事件
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.beforeCompleteSubmit = /**
     * 点击提交的时候，执行表单的前事件
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.origin == ActionOrigin.TaskForm) {
            // 获取表单操作配置
            /** @type {?} */
            var passPreActions = this.billMethodConfigs.filter((/**
             * @param {?} action
             * @return {?}
             */
            function (action) { return action.action === _this.actionEntity.code && action.executionTime === 'Pre'; })).sort((/**
             * @param {?} x
             * @param {?} y
             * @return {?}
             */
            function (x, y) { return x.sortOrder - y.sortOrder; }));
            // 如果表单注册了事件
            if (passPreActions && passPreActions.length) {
                this.executeFormActions(tslib_1.__spread(passPreActions));
            }
            else { // 没有定义前后事件，直接提交
                this.completeSubmit();
            }
        }
        else {
            this.completeSubmit();
        }
    };
    /**
     * @param formActions 表单中要执行的动作
     */
    /**
     * @private
     * @param {?} formActions 表单中要执行的动作
     * @return {?}
     */
    TaskExecuteComponent.prototype.executeFormActions = /**
     * @private
     * @param {?} formActions 表单中要执行的动作
     * @return {?}
     */
    function (formActions) {
        var _this = this;
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                /** @type {?} */
                var data = re.data.data;
                if (data.result === true) {
                    if (data.dataChanged === true) { // 如果需要预解析，先预解析再继续执行
                        _this.completeSimulate().subscribe((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) {
                            if (r.result) { // 预解析正确
                                _this.executeFormActions(formActions);
                            }
                            else { // 预解析错误
                                _this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                            }
                        }));
                    }
                    else { // 不需要预解析，继续执行
                        _this.executeFormActions(formActions);
                    }
                }
                else {
                    _this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批前表单操作执行失败！');
                }
            }));
            // 执行表单动作
            /** @type {?} */
            var formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            this.completeSubmit();
        }
    };
    /**
     * 单个任务预解析
     * @param action
     */
    /**
     * 单个任务预解析
     * @private
     * @param {?} action
     * @return {?}
     */
    TaskExecuteComponent.prototype.simulate = /**
     * 单个任务预解析
     * @private
     * @param {?} action
     * @return {?}
     */
    function (action) {
        switch (action.code) {
            case 'AssignUser': // 指派 单独参数
                return this.assignSimulate();
            case 'Claim': // 领用
                return this.defaultSubjectNext();
            case 'Unclaim': // 取消领用
                return this.defaultSubjectNext();
            case 'Retrieve': // 取回
                return this.defaultSubjectNext();
            case 'Transfer': // 移交 单独参数
                return this.transferSimulate();
            case 'AddSign': // 加签
                return this.addSignSimulate();
            case 'AddSignFront': // 征询
                return this.addSignFrontSimulate();
            case 'Notify': //知会
                return this.notifySimulate();
            case 'Refuse': // 否决
                return this.defaultSubjectNext();
            case 'Obsolete': // 作废
                return this.defaultSubjectNext();
            case 'Comment': // 评论
                return this.defaultSubjectNext();
            case 'ReadTask': // 已阅
                this.ifShowCommentToMySelf = true;
                return this.defaultSubjectNext(295);
            case 'UrgeHandle': //催办
                return this.urgeHandleSimulate();
            case 'CancelConsult': //取消征询
                return this.defaultSubjectNext();
            default: // 通过 驳回 重新提交 其他自定义的动作
                return this.completeSimulate();
        }
    };
    /**
     * 批量审批预解析
     * @returns
     */
    /**
     * 批量审批预解析
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchSimulate = /**
     * 批量审批预解析
     * @private
     * @return {?}
     */
    function () {
        switch (this.actionEntity.code) {
            case "ReadTask": //批量已阅
                this.ifShowCommentToMySelf = true;
                return this.defaultSubjectNext(295);
            case "Retrieve": //批量取回
                return this.defaultSubjectNext();
            case "Transfer": //批量移交
                this.ifSelectUser = true;
                this.selectUserText = this.i18nService.getValue('task.receiver'); //接收人员
                this.singleSelect = true;
                return this.defaultSubjectNext(this.dialogHeight + this.dialogHeightBase);
            default:
                return this.defaultSubjectNext();
        }
    };
    /**
     * 默认的预解析返回结果，可控制弹框高度
     * @param dialogHeight
     * @returns
     */
    /**
     * 默认的预解析返回结果，可控制弹框高度
     * @private
     * @param {?=} dialogHeight
     * @return {?}
     */
    TaskExecuteComponent.prototype.defaultSubjectNext = /**
     * 默认的预解析返回结果，可控制弹框高度
     * @private
     * @param {?=} dialogHeight
     * @return {?}
     */
    function (dialogHeight) {
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var s = new SimulateSubject();
        s.showDialog = true;
        s.dialogHeight = dialogHeight ? dialogHeight : this.dialogHeight;
        s.result = true;
        setTimeout((/**
         * @return {?}
         */
        function () {
            subject.next(s);
        }), 100);
        return subject.asObservable();
    };
    /**
     * 真正地提交
     * 重写父类方法
     */
    /**
     * 真正地提交
     * 重写父类方法
     * @return {?}
     */
    TaskExecuteComponent.prototype.submit = /**
     * 真正地提交
     * 重写父类方法
     * @return {?}
     */
    function () {
        switch (this.actionEntity.code) {
            case 'AssignUser': // 指派 单独参数
                this.assignSubmit();
                break;
            case 'Claim': // 领用
                this.claimSubmit();
                break;
            case 'Unclaim': // 取消领用
                this.unClaimSubmit();
                break;
            case 'Retrieve': // 取回
                this.retrieveSubmit();
                break;
            case 'Transfer': // 移交 单独参数
                this.transferSubmit();
                break;
            case 'AddSign': // 加签
                this.addSignSubmit();
                break;
            case 'AddSignFront': // 征询
                this.addSignFrontSubmit();
                break;
            case 'Comment': // 评论
                this.commentSubmit();
                break;
            case 'Notify': //知会
                this.notifySubmit();
                break;
            case 'ReadTask': // 已阅
                this.readSubmit();
                break;
            case 'UrgeHandle': //催办
                this.urgeHandleSubmit();
                break;
            case 'CancelConsult': //取消征询
                this.cancelConsultSubmit();
                break;
            default: // 通过 驳回 否决 作废 重新提交 其他自定义动作
                this.beforeCompleteSubmit();
        }
        return this.subject.asObservable();
    };
    /**
     * 批量办理点击提交
     * @param tasks
     * @returns
     */
    /**
     * 批量办理点击提交
     * @param {?} tasks
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchSubmit = /**
     * 批量办理点击提交
     * @param {?} tasks
     * @return {?}
     */
    function (tasks) {
        switch (this.actionEntity.code) {
            case "ReadTask": //批量已阅
                return this.batchReadTaskSubmit(tasks);
            case "Retrieve": //批量取回
                return this.batchRetrieveSubmit(tasks);
            case "Claim": //批量领用
                return this.batchClaimSubmit(tasks);
            case "Unclaim": //批量取消领用
                return this.batchUnclaimSubmit(tasks);
            case "Transfer": //批量移交
                return this.batchTransferSubmit(tasks);
            default:
                return this.batchCompleteSubmit(tasks);
        }
    };
    /**
     * 执行批量前事件
     * @param tasks 批量任务列表
     */
    /**
     * 执行批量前事件
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchCompleteSubmit = /**
     * 执行批量前事件
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        var e_1, _a;
        /** @type {?} */
        var filterNum = 0;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        /** @type {?} */
        var successSubmit = { result: true, isClose: true };
        if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) { // 批量意见是否必填不支持根据审批项配置操作，批量驳回意见必填
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var noActionTasks = tasks.filter((/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return t.actions.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.code === _this.actionEntity.code; })) === -1; }));
            if (noActionTasks && noActionTasks.length > 0) {
                try {
                    for (var noActionTasks_1 = tslib_1.__values(noActionTasks), noActionTasks_1_1 = noActionTasks_1.next(); !noActionTasks_1_1.done; noActionTasks_1_1 = noActionTasks_1.next()) {
                        var a = noActionTasks_1_1.value;
                        filterNum++;
                        if (filterNum === tasks.length) {
                            subject.next(successSubmit);
                            this.showBatchSubmitInfo(0, filterNum, 0, 0);
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (noActionTasks_1_1 && !noActionTasks_1_1.done && (_a = noActionTasks_1.return)) _a.call(noActionTasks_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            /** @type {?} */
            var actTasks_1 = tasks.filter((/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return t.actions.some((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.code === _this.actionEntity.code; })); }));
            if (actTasks_1 && actTasks_1.length > 0) {
                this.executeBatchEvent(tslib_1.__spread(this.actionEntity.preEvents.filter((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) { return e.batch; }))), actTasks_1, this.actionEntity, (/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    var e_2, _a;
                    if (re && re.result) {
                        if (re.passTasks) {
                            /** @type {?} */
                            var backTasks = actTasks_1.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            function (t) { return re.passTasks.findIndex((/**
                             * @param {?} id
                             * @return {?}
                             */
                            function (id) { return id === t.id; })) === -1; }));
                            if (backTasks && backTasks.length > 0) {
                                try {
                                    for (var backTasks_1 = tslib_1.__values(backTasks), backTasks_1_1 = backTasks_1.next(); !backTasks_1_1.done; backTasks_1_1 = backTasks_1.next()) {
                                        var t = backTasks_1_1.value;
                                        filterNum++;
                                        if (filterNum === tasks.length) {
                                            subject.next(successSubmit);
                                            _this.showBatchSubmitInfo(0, filterNum, 0, 0);
                                        }
                                    }
                                }
                                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                                finally {
                                    try {
                                        if (backTasks_1_1 && !backTasks_1_1.done && (_a = backTasks_1.return)) _a.call(backTasks_1);
                                    }
                                    finally { if (e_2) throw e_2.error; }
                                }
                            }
                            actTasks_1 = actTasks_1.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            function (t) { return re.passTasks.findIndex((/**
                             * @param {?} id
                             * @return {?}
                             */
                            function (id) { return id === t.id; })) > -1; }));
                        }
                        if (actTasks_1.length > 0) {
                            /** @type {?} */
                            var batchVerifySignedContext = new BatchVerifySignedContext();
                            _this.batchVerifySubmit(actTasks_1, filterNum, batchVerifySignedContext).subscribe((/**
                             * @param {?} r
                             * @return {?}
                             */
                            function (r) {
                                if (r && r.successSubmit && r.successSubmit.result) {
                                    _this.executeBatchEvent(tslib_1.__spread(_this.actionEntity.postEvents.filter((/**
                                     * @param {?} e
                                     * @return {?}
                                     */
                                    function (e) { return e.batch; }))), r.successHandleTasks, _this.actionEntity, (/**
                                     * @return {?}
                                     */
                                    function () {
                                        subject.next(r.successSubmit);
                                    }), { result: true, passTasks: r.successHandleTasks.map((/**
                                         * @param {?} t
                                         * @return {?}
                                         */
                                        function (t) { return t.id; })) });
                                }
                            }));
                        }
                    }
                    else {
                        subject.next({ result: false, isClose: false });
                    }
                }), { result: true, passTasks: actTasks_1.map((/**
                     * @param {?} t
                     * @return {?}
                     */
                    function (t) { return t.id; })) });
            }
        }
        return subject.asObservable();
    };
    /**
     * 批量数字签名
     * @param tasks
     * @param filterNum
     * @param batchVerifySignedContext
     * @returns
     */
    /**
     * 批量数字签名
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} batchVerifySignedContext
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchVerifySubmit = /**
     * 批量数字签名
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} batchVerifySignedContext
     * @return {?}
     */
    function (tasks, filterNum, batchVerifySignedContext) {
        var _this = this;
        if (filterNum === void 0) { filterNum = 0; }
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var verifyTasks = tasks.filter((/**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            /** @type {?} */
            var action = t.actions.find((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.code === _this.actionEntity.code; }));
            if (!action) {
                return false;
            }
            else {
                if (action.parameters.some((/**
                 * @param {?} p
                 * @return {?}
                 */
                function (p) { return p.code === 'CertificationNecessary' && p.value === 'true'; }))) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }));
        /** @type {?} */
        var verifyTasksNum = verifyTasks.length;
        if (verifyTasks.length > 0) {
            /** @type {?} */
            var that_1 = this;
            if (((/** @type {?} */ (window))).gspframeworkService &&
                ((/** @type {?} */ (window))).gspframeworkService.rtf) {
                ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', (/**
                 * @param {?} signedData
                 * @return {?}
                 */
                function signMsgOver(signedData) {
                    if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                        // 证书对象
                        /** @type {?} */
                        var cert = gspCA.getCurCert();
                        // 验签参数
                        that_1.verifySigned = {
                            // 要验证的证书base64编码的字符流(certkey)
                            certBase64Info: gspCA.getCertBase64(cert),
                            // 签名原信息
                            msg: ['BatchDigitalSignature'],
                            // 要签名后信息
                            signedmsg: signedData[1][0],
                            // 用户使用场景，目前未使用，可以为空
                            useCase: null,
                        };
                        batchVerifySignedContext.verifySigned = that_1.verifySigned;
                        that_1.taskService.batchVerifySigned(batchVerifySignedContext).subscribe((/**
                         * @return {?}
                         */
                        function () {
                            /** @type {?} */
                            var verifyTasksNum = 0;
                            that_1.batchComplete(tasks, filterNum, verifyTasksNum).subscribe((/**
                             * @param {?} re
                             * @return {?}
                             */
                            function (re) {
                                subject.next(re);
                            }));
                        }), (/**
                         * @param {?} error
                         * @return {?}
                         */
                        function (error) {
                            /** @type {?} */
                            var otherTasks = tasks.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            function (t) { return verifyTasks.findIndex((/**
                             * @param {?} task
                             * @return {?}
                             */
                            function (task) { return task.id === t.id; })) === -1; }));
                            that_1.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe((/**
                             * @param {?} re
                             * @return {?}
                             */
                            function (re) {
                                subject.next(re);
                            }));
                        }));
                    }
                    else {
                        that_1.notify.error(signedData[1]);
                        subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });
                    }
                }));
            }
            /** @type {?} */
            var msg = ['BatchDigitalSignature'];
            gspCA.getSignedMsg(msg);
        }
        else {
            this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                subject.next(re);
            }));
        }
        return subject.asObservable();
    };
    /**
     * 真正的批量提交任务
     * @param tasks
     * @param filterNum
     * @param verifyTasksNum
     * @returns
     */
    /**
     * 真正的批量提交任务
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} verifyTasksNum
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchComplete = /**
     * 真正的批量提交任务
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} verifyTasksNum
     * @return {?}
     */
    function (tasks, filterNum, verifyTasksNum) {
        var _this = this;
        if (filterNum === void 0) { filterNum = 0; }
        var e_3, _a;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var successNum = 0;
        /** @type {?} */
        var failedNum = 0;
        /** @type {?} */
        var errorNum = 0;
        /** @type {?} */
        var successSubmit = { result: true, isClose: true };
        /** @type {?} */
        var successHandleTasks = new Array();
        /** @type {?} */
        var load = this.loadingService.show();
        var _loop_1 = function (task) {
            /** @type {?} */
            var context = new CompleteContext();
            context.workItemId = task.sourceId;
            context.conclusionValue = this_1.actionEntity.code;
            context.comment = this_1.comment;
            context.addendum = this_1.addendum;
            this_1.taskService.completeSimulate(context).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                if (response && response.needInteraction === true) { // 需要交互
                    failedNum++;
                    if (successNum + failedNum + errorNum === tasks.length) {
                        load.close();
                        subject.next({ successSubmit: successSubmit, successHandleTasks: successHandleTasks });
                        _this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                    }
                }
                else { // 不需要交互
                    _this.taskService.complete(context).subscribe((/**
                     * @return {?}
                     */
                    function () {
                        successNum++;
                        successHandleTasks.push(task);
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit: successSubmit, successHandleTasks: successHandleTasks });
                            _this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    }), (/**
                     * @return {?}
                     */
                    function () {
                        errorNum++;
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit: successSubmit, successHandleTasks: successHandleTasks });
                            _this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    }));
                }
            }), (/**
             * @return {?}
             */
            function () {
                errorNum++;
                if (successNum + failedNum + errorNum === tasks.length) {
                    load.close();
                    subject.next({ successSubmit: successSubmit, successHandleTasks: successHandleTasks });
                    _this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                }
            }));
        };
        var this_1 = this;
        try {
            for (var tasks_1 = tslib_1.__values(tasks), tasks_1_1 = tasks_1.next(); !tasks_1_1.done; tasks_1_1 = tasks_1.next()) {
                var task = tasks_1_1.value;
                _loop_1(task);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (tasks_1_1 && !tasks_1_1.done && (_a = tasks_1.return)) _a.call(tasks_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return subject.asObservable();
    };
    /**
     * 批量已阅
     * @param tasks
     */
    /**
     * 批量已阅
     * @private
     * @param {?} tasks
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchReadTaskSubmit = /**
     * 批量已阅
     * @private
     * @param {?} tasks
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var successNum_1 = 0;
            /** @type {?} */
            var errorNum_1 = 0;
            /** @type {?} */
            var load_1 = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            function (task) {
                /** @type {?} */
                var context = {
                    workItemId: task.sourceId,
                    comment: _this.comment,
                    addendum: _this.addendum,
                };
                _this.taskService.readTask(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    successNum_1++;
                    if (successNum_1 + errorNum_1 == tasks.length) {
                        load_1.close();
                        subject.next({ result: true, isClose: true });
                        _this.showBatchSubmitInfo(successNum_1, 0, errorNum_1, 0);
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    errorNum_1++;
                    if (successNum_1 + errorNum_1 == tasks.length) {
                        load_1.close();
                        subject.next({ result: false, isClose: false });
                        _this.showBatchSubmitInfo(successNum_1, 0, errorNum_1, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    };
    /**
     * 批量取回
     * @param tasks
     */
    /**
     * 批量取回
     * @private
     * @param {?} tasks
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchRetrieveSubmit = /**
     * 批量取回
     * @private
     * @param {?} tasks
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var successNum_2 = 0;
            /** @type {?} */
            var errorNum_2 = 0;
            /** @type {?} */
            var load_2 = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            function (task) {
                /** @type {?} */
                var context = {
                    workItemId: task.sourceId,
                    comment: _this.comment,
                    addendum: _this.addendum,
                };
                _this.taskService.retrieve(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    successNum_2++;
                    if (successNum_2 + errorNum_2 == tasks.length) {
                        load_2.close();
                        _this.showBatchSubmitInfo(successNum_2, 0, errorNum_2, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    errorNum_2++;
                    if (successNum_2 + errorNum_2 == tasks.length) {
                        load_2.close();
                        subject.next({ result: false, isClose: false });
                        _this.showBatchSubmitInfo(successNum_2, 0, errorNum_2, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    };
    /**
     * 批量领用
     */
    /**
     * 批量领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchClaimSubmit = /**
     * 批量领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var successNum_3 = 0;
            /** @type {?} */
            var errorNum_3 = 0;
            /** @type {?} */
            var load_3 = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            function (task) {
                _this.taskService.claim(task.sourceId, _this.comment).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    successNum_3++;
                    if (successNum_3 + errorNum_3 == tasks.length) {
                        load_3.close();
                        _this.showBatchSubmitInfo(successNum_3, 0, errorNum_3, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    errorNum_3++;
                    if (successNum_3 + errorNum_3 == tasks.length) {
                        load_3.close();
                        subject.next({ result: false, isClose: false });
                        _this.showBatchSubmitInfo(successNum_3, 0, errorNum_3, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    };
    /**
     * 批量取消领用
     */
    /**
     * 批量取消领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchUnclaimSubmit = /**
     * 批量取消领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var successNum_4 = 0;
            /** @type {?} */
            var errorNum_4 = 0;
            /** @type {?} */
            var load_4 = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            function (task) {
                _this.taskService.unClaim(task.sourceId, _this.comment).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    successNum_4++;
                    if (successNum_4 + errorNum_4 == tasks.length) {
                        load_4.close();
                        _this.showBatchSubmitInfo(successNum_4, 0, errorNum_4, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    errorNum_4++;
                    if (successNum_4 + errorNum_4 == tasks.length) {
                        load_4.close();
                        subject.next({ result: false, isClose: false });
                        _this.showBatchSubmitInfo(successNum_4, 0, errorNum_4, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    };
    /**
     * 批量移交
     * @param tasks 批量任务列表
     */
    /**
     * 批量移交
     * @private
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    TaskExecuteComponent.prototype.batchTransferSubmit = /**
     * 批量移交
     * @private
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    function (tasks) {
        var _this = this;
        /** @type {?} */
        var subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var successNum_5 = 0;
            /** @type {?} */
            var errorNum_5 = 0;
            /** @type {?} */
            var load_5 = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            function (task) {
                /** @type {?} */
                var context = {
                    workItemId: task.sourceId,
                    assignee: _this.selectedUsers[0],
                    comment: _this.comment,
                    addendum: _this.addendum,
                };
                _this.taskService.transfer(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                function (re) {
                    successNum_5++;
                    if (successNum_5 + errorNum_5 == tasks.length) {
                        load_5.close();
                        _this.showBatchSubmitInfo(successNum_5, 0, errorNum_5, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    errorNum_5++;
                    if (successNum_5 + errorNum_5 == tasks.length) {
                        load_5.close();
                        subject.next({ result: false, isClose: false });
                        _this.showBatchSubmitInfo(successNum_5, 0, errorNum_5, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    };
    /**
     * 批量提交提示信息
     * @param successNum 成功条数
     * @param failedNum 需要交互的条数
     * @param errorNum 执行报错的条数
     * @param verifyTasksNum 需要数字签名的条数
     */
    /**
     * 批量提交提示信息
     * @private
     * @param {?} successNum 成功条数
     * @param {?} failedNum 需要交互的条数
     * @param {?} errorNum 执行报错的条数
     * @param {?} verifyTasksNum 需要数字签名的条数
     * @return {?}
     */
    TaskExecuteComponent.prototype.showBatchSubmitInfo = /**
     * 批量提交提示信息
     * @private
     * @param {?} successNum 成功条数
     * @param {?} failedNum 需要交互的条数
     * @param {?} errorNum 执行报错的条数
     * @param {?} verifyTasksNum 需要数字签名的条数
     * @return {?}
     */
    function (successNum, failedNum, errorNum, verifyTasksNum) {
        /** @type {?} */
        var message = '';
        if (successNum && !failedNum && !errorNum && !verifyTasksNum) { // 批量全部成功
            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
        }
        else { // 非全部成功
            successNum && (message += this.i18nService.getValue('batchSubmit.success') + ("\u3010" + successNum + "\u3011") + this.i18nService.getValue('batchSubmit.row'));
            errorNum && (message += this.i18nService.getValue('batchSubmit.error') + ("\u3010" + errorNum + "\u3011") + this.i18nService.getValue('batchSubmit.row'));
            failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + ("\u3010" + failedNum + "\u3011") + this.i18nService.getValue('batchSubmit.row'));
            verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + ("\u3010" + verifyTasksNum + "\u3011") + this.i18nService.getValue('batchSubmit.row'));
            message += this.i18nService.getValue('batchSubmit.single');
            this.message.show('warning', message, { safeHtml: false });
        }
    };
    /**
     * @private
     * @param {?} events
     * @param {?} entities
     * @param {?} action
     * @param {?} handler
     * @param {?=} result
     * @return {?}
     */
    TaskExecuteComponent.prototype.executeBatchEvent = /**
     * @private
     * @param {?} events
     * @param {?} entities
     * @param {?} action
     * @param {?} handler
     * @param {?=} result
     * @return {?}
     */
    function (events, entities, action, handler, result) {
        var _this = this;
        if (this.injector) {
            if (events && events.length > 0 && entities && entities.length > 0) {
                /** @type {?} */
                var event_1 = events.shift();
                /** @type {?} */
                var url = event_1.eventImpl.split('#')[0];
                /** @type {?} */
                var func_1 = event_1.eventImpl.split('#')[1];
                System.import(url + '?v=' + new Date().getTime().toString())
                    .then((/**
                 * @param {?} moduleFactories
                 * @return {?}
                 */
                function (moduleFactories) {
                    /** @type {?} */
                    var moduleFactory = Object.values(moduleFactories)[0];
                    /** @type {?} */
                    var moduleRef = moduleFactory.create(_this.injector);
                    /** @type {?} */
                    var context = {
                        action: action,
                        taskList: entities,
                        origin: 'TaskCenter',
                        preEventResult: result
                    };
                    moduleRef.instance[func_1].apply(moduleRef.instance, [context]).subscribe((/**
                     * @param {?} re
                     * @return {?}
                     */
                    function (re) {
                        if (re && re.result) {
                            _this.executeBatchEvent(events, entities, action, handler, re);
                        }
                        else {
                            handler(re);
                        }
                    }));
                }));
            }
            else {
                handler(result);
            }
        }
        else {
            handler(result);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.assignSimulate = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var simulateSubject = new SimulateSubject();
        this.ifAssignUser = true;
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        this.taskService.getAssigneeInfo(this.workItemId).subscribe((/**
         * @param {?} info
         * @return {?}
         */
        function (info) {
            _this.assignInfos = [{
                    selectedAssignees: info.selectedAssignees,
                    assigneeInfo: info.assigneeInfo,
                    assignees: info.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    function (user) { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: info.activityDefinitionName,
                    activityDefinitionId: info.activityDefinitionId,
                    dependency: info.dependency,
                    anonymous: info.anonymous,
                    anonymousText: info.anonymousText,
                    resolved: info.resolved,
                }];
            simulateSubject.dialogHeight = _this.dialogHeight;
            simulateSubject.result = true;
            simulateSubject.showDialog = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            simulateSubject.result = false;
            simulateSubject.showDialog = false;
            subject.next(simulateSubject);
            _this.taskService.error(error);
        }));
        return subject.asObservable();
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.transferSimulate = /**
     * @private
     * @return {?}
     */
    function () {
        this.ifSelectUser = true;
        this.selectUserText = this.i18nService.getValue('task.receiver'); //接收人员
        this.singleSelect = true;
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.addSignFrontSimulate = /**
     * @private
     * @return {?}
     */
    function () {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.addSignSimulate = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 加签
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var simulateSubject = new SimulateSubject();
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase * 2;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.getAdhocConfig(this.workItemId).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            load.close();
            _this.addSign.showSignToSign = response.showSignToSign;
            _this.addSign.originMultiInstType = response.multiInstanceType;
            if (response.organization) {
                _this.filter.orgId = response.organization.id;
                _this.filter.withAllOrg = response.organization.includeChildren;
            }
            simulateSubject.dialogHeight = _this.dialogHeight;
            simulateSubject.showDialog = true;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            load.close();
            _this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.notifySimulate = /**
     * @private
     * @return {?}
     */
    function () {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.singleSelect = false;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    };
    //预解析组织、候选人范围
    //预解析组织、候选人范围
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.getOrganizationScope = 
    //预解析组织、候选人范围
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var simulateSubject = new SimulateSubject();
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((/**
         * @param {?} orgList
         * @return {?}
         */
        function (orgList) {
            load.close();
            if (orgList.length) { // 全员会返回空数组
                _this.filter.orgId = orgList[0].id;
                _this.filter.withAllOrg = orgList[0].includeChildren;
            }
            simulateSubject.dialogHeight = _this.dialogHeight;
            simulateSubject.showDialog = true;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            load.close();
            _this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    };
    /**
     * 催办模拟
     */
    /**
     * 催办模拟
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.urgeHandleSimulate = /**
     * 催办模拟
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var simulateSubject = new SimulateSubject();
        this.ifSelectNode = false;
        this.ifSelectUser = false;
        this.ifAssignUser = false;
        this.ifUrgeType = true;
        this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');
        this.showCommonComment = false;
        this.showAttachment = false;
        this.showUrgeMessageSubject = true;
        this.showSign = false;
        this.dialogHeight += this.dialogHeightBase * 2;
        /** @type {?} */
        var load = this.loadingService.show();
        /** @type {?} */
        var context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
        this.taskService.urgeHandleSimulate(context).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            load.close();
            _this.urgeHandleResponse = re;
            if (re && re.urgeUsers && re.urgeUsers.length) {
                _this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;
                _this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;
                _this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;
                _this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;
                _this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;
                /** @type {?} */
                var urgeUsers = re.urgeUsers;
                /** @type {?} */
                var assignInfo = new AssigneeInfo();
                urgeUsers.forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    if (user.anonymousText) {
                        user.name = user.anonymousText;
                        user.code = '';
                        user.orgName = '';
                    }
                }));
                assignInfo.assigneeUsers = urgeUsers;
                assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;
                assignInfo.multiSelect = true;
                _this.assignInfos[0].assigneeInfo = assignInfo;
                _this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];
                simulateSubject.showDialog = true;
            }
            else {
                _this.notify.warning(_this.i18nService.getValue('task.noUrgeUsers'));
                simulateSubject.showDialog = false;
            }
            simulateSubject.dialogHeight = _this.dialogHeight;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            load.close();
            _this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    };
    /**
     * 预解析
     * 通过、驳回、重新提交、其他自定义动作
     */
    /**
     * 预解析
     * 通过、驳回、重新提交、其他自定义动作
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.completeSimulate = /**
     * 预解析
     * 通过、驳回、重新提交、其他自定义动作
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var simulateSubject = new SimulateSubject();
        if (this.actionEntity.parameters && this.actionEntity.parameters.length) { // 是否允许加签
            this.actionEntity.parameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if (p.code === 'AddSignBehindAble' && p.value === 'true') {
                    _this.ifSelectUser = true;
                    _this.selectUserText = _this.i18nService.getValue('task.addSign') + _this.i18nService.getValue('task.person');
                    _this.dialogHeight += _this.dialogHeightBase;
                    /** @type {?} */
                    var load_6 = _this.loadingService.show();
                    //获取加签范围
                    _this.taskService.getOrganizationScope(_this.workItemId, 'AddSignBehind').subscribe((/**
                     * @param {?} orgList
                     * @return {?}
                     */
                    function (orgList) {
                        load_6.close();
                        if (orgList.length) { // 全员会返回空数组
                            _this.filter.orgId = orgList[0].id;
                            _this.filter.withAllOrg = orgList[0].includeChildren;
                        }
                    }), (/**
                     * @param {?} error
                     * @return {?}
                     */
                    function (error) {
                        load_6.close();
                        _this.taskService.error(error);
                    }));
                }
            }));
        }
        //驳回节点标签名称
        if (this.actionEntity.code === 'Back') {
            this.selectNodeText = this.actionEntity.name + this.i18nService.getValue('task.backNodeText');
        }
        /** @type {?} */
        var context = new CompleteContext();
        context.workItemId = this.workItemId;
        context.conclusionValue = this.actionEntity.code;
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.completeSimulate(context).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            load.close();
            _this.clearSimulateResult();
            _this.response = response;
            if (_this.task.priority) {
                _this.enablePriority = true;
                _this.dialogHeight += _this.dialogHeightBase;
            }
            _this.selectTargetAble = response.selectTargetAble;
            if (response.dynamicBackWardRuleConfig) {
                _this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleConfig.dynamicBackWardRuleAble;
                _this.showBackWardConfig.displayPlaceholder = response.dynamicBackWardRuleConfig.resubmitEffect;
            }
            if (!response.simulationPaths.length) { // 模拟返回路径为空时
                _this.ifSelectNode = false;
                _this.ifAssignUser = false;
            }
            else { // 模拟返回了路径
                _this.ifSelectNode = true;
                _this.ifAssignUser = true;
                _this.dialogHeight += _this.dialogHeightBase * 2;
                _this.destNodes = response.simulationPaths && response.simulationPaths.map((/**
                 * @param {?} path
                 * @return {?}
                 */
                function (path) { return ({
                    id: path.nodeInfoList.map((/**
                     * @param {?} node
                     * @return {?}
                     */
                    function (node) { return node.activityDefinitionId; })).join('，'),
                    name: path.nodeInfoList.map((/**
                     * @param {?} node
                     * @return {?}
                     */
                    function (node) { return node.activityDefinitionName; })).join('，')
                }); }));
                // 处理默认分支，无默认分支返回-1
                /** @type {?} */
                var defaultIndex = response.simulationPaths.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return a.default; }));
                //没有默认分支，且不允许选择目标节点时，取其中一个node展示（子流程参与者为空情况等）
                if (defaultIndex < 0 && !response.selectTargetAble) {
                    defaultIndex = response.simulationPaths.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    function (a) { return a.nodeInfoList && a.nodeInfoList.length > 0; }));
                }
                if (defaultIndex > -1) {
                    _this.selectedNodeId = _this.destNodes[defaultIndex].id;
                    _this.nodeDefaultValue = _this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : _this.destNodes[defaultIndex].name;
                    _this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);
                    if (response.simulationPaths[defaultIndex].id.startsWith('EndEvent')) { //下一环节为结束时，不显示办理人员，弹框高度缩小
                        _this.dialogHeight = 340;
                    }
                }
            }
            //设置其他节点选人
            _this.setOtherAssignInfo(response);
            _this.dialogHeight = _this.showBackWardConfig.dynamicBackWardRuleAble ? _this.dialogHeight + _this.dialogHeightBase : _this.dialogHeight;
            simulateSubject.result = true;
            simulateSubject.showDialog = true;
            simulateSubject.dialogHeight = _this.dialogHeight;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            load.close();
            simulateSubject.result = false;
            simulateSubject.showDialog = false;
            subject.next(simulateSubject);
            _this.taskService.error(error);
        }));
        return subject.asObservable();
    };
    /**
     * 清空预解析结果
     */
    /**
     * 清空预解析结果
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.clearSimulateResult = /**
     * 清空预解析结果
     * @private
     * @return {?}
     */
    function () {
        this.assignInfos = [{
                // 重新预解析时清空
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
        this.destNodes = []; // 重新预解析时清空
        this.selectedNodeId = '';
    };
    /**
     * 设置当前指派信息帮助参数
     */
    /**
     * 设置当前指派信息帮助参数
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    TaskExecuteComponent.prototype.setAssignInfo = /**
     * 设置当前指派信息帮助参数
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    function (nodeInfoList) {
        var _this = this;
        this.assignInfos = [];
        this.selectedNodeId.split('，').forEach((/**
         * @param {?} nodeId
         * @return {?}
         */
        function (nodeId) {
            /** @type {?} */
            var node = nodeInfoList.find((/**
             * @param {?} node
             * @return {?}
             */
            function (node) { return node.activityDefinitionId === nodeId; }));
            if (node) {
                _this.assignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    function (user) { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: node.activityDefinitionName,
                    activityDefinitionId: node.activityDefinitionId,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved,
                });
            }
            else {
                _this.assignInfos.push({
                    selectedAssignees: [],
                    assigneeInfo: null,
                    assignees: [],
                    activityDefinitionName: '',
                    activityDefinitionId: '',
                    dependency: '',
                    anonymous: false,
                    anonymousText: '',
                    resolved: false,
                });
            }
        }));
    };
    /**
     * 设置其他节点指派
     * @param response
     */
    /**
     * 设置其他节点指派
     * @private
     * @param {?} response
     * @return {?}
     */
    TaskExecuteComponent.prototype.setOtherAssignInfo = /**
     * 设置其他节点指派
     * @private
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        this.otherAssignInfos = [];
        /** @type {?} */
        var tmpOtherAssignInfos = [];
        /** @type {?} */
        var otherAssignNodes = response.otherAssignNodes;
        if (otherAssignNodes && otherAssignNodes.length) {
            otherAssignNodes.forEach((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                tmpOtherAssignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    function (user) { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: node.activityDefinitionName,
                    activityDefinitionId: node.activityDefinitionId,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved
                });
            }));
            //保存最初的其他节点选人
            this.originOtherAssignInfos = tslib_1.__spread(tmpOtherAssignInfos);
            //其他节点与下一节点去重
            if (this.assignInfos && this.assignInfos.length) {
                tmpOtherAssignInfos = tmpOtherAssignInfos.filter((/**
                 * @param {?} a
                 * @return {?}
                 */
                function (a) { return _this.assignInfos.findIndex((/**
                 * @param {?} b
                 * @return {?}
                 */
                function (b) { return b.activityDefinitionId == a.activityDefinitionId; })) < 0; }));
            }
            this.otherAssignInfos = tmpOtherAssignInfos;
        }
    };
    /**
     * 选完节点后，重新设置其他节点指派
     * @param response
     */
    /**
     * 选完节点后，重新设置其他节点指派
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    TaskExecuteComponent.prototype.setOtherAssignInfoAgain = /**
     * 选完节点后，重新设置其他节点指派
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    function (nodeInfoList) {
        if (nodeInfoList && nodeInfoList.length) {
            this.otherAssignInfos = this.originOtherAssignInfos.filter((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return nodeInfoList.findIndex((/**
             * @param {?} b
             * @return {?}
             */
            function (b) { return b.activityDefinitionId == a.activityDefinitionId; })) < 0; }));
        }
    };
    /**
     * 点击确定后方法
     */
    /**
     * 点击确定后方法
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.assignSubmit = /**
     * 点击确定后方法
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) {
            this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                assigneeIds: this.assignInfos[0].assignees.map((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) { return user.id; })),
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.taskService.assignNextUsersByWorkItemId(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.i18nService.getValue('cueWords.operateSuccess'));
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.claimSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.claim(this.workItemId, this.comment).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.unClaimSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.unClaim(this.workItemId, this.comment).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success')),
                    _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.retrieveSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var retrieveContext = {
                workItemId: this.workItemId,
                comment: this.comment
            };
            this.taskService.retrieve(retrieveContext).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.transferSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                assignee: this.selectedUsers[0],
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.transfer(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.commentSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.comment || this.comment.length === 0) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum
            };
            this.taskService.comment(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.submitResult.isClose = false;
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
            this.comment = '';
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.addSignFrontSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.addSign(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next(_this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.addSignSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var payload = {
                workItemId: this.workItemId,
                comment: this.comment,
                conclusionValue: "Pass",
                signAssignees: this.selectedUsers,
                actionCode: "AddSignBehind",
                multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,
                counterSignRule: 'allPass',
                completedRule: 'all',
                allowSignToSign: this.addSign.allowSignToSIgn,
                activityName: '',
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            /** @type {?} */
            var load_7 = this.loadingService.show();
            this.taskService.adhocAssignee(payload).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next({ result: true, isClose: true });
                load_7.close();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                load_7.close();
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.readSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                hideComment: this.hideComment
            };
            this.taskService.readTask(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next({ result: true, isClose: true });
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.taskService.error(error);
                _this.subject.next({ result: false, isClose: false });
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.notifySubmit = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
                priority: this.selectedPriority
            };
            this.taskService.addSign(context).subscribe((/**
             * @return {?}
             */
            function () {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next({ result: true, isClose: false });
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * 催办提交
     */
    /**
     * 催办提交
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.urgeHandleSubmit = /**
     * 催办提交
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) { //没有符合条件的催办用户
            this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) { //没有选人
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageSubject) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageContent) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            var context = new UrgeHandleContext();
            context.procInstId = this.processInstanceId;
            context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return _this.assignInfos[0].assignees.some((/**
             * @param {?} b
             * @return {?}
             */
            function (b) { return b.id == a.id; })); }));
            context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;
            context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;
            context.addReminder = this.addReminder;
            /** @type {?} */
            var load_8 = this.loadingService.show();
            this.taskService.urgeHandle(context).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                _this.subject.next({ result: true, isClose: true });
                load_8.close();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                load_8.close();
                _this.subject.next({ result: false, isClose: false });
                _this.taskService.error(error);
            }));
        }
    };
    /**
     * 取消征询提交
     */
    /**
     * 取消征询提交
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.cancelConsultSubmit = /**
     * 取消征询提交
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var context = new WorkItemExecuteParam();
        context.workItemId = this.workItemId;
        context.comment = this.comment;
        context.addendum = this.addendum;
        /** @type {?} */
        var load = this.loadingService.show();
        this.taskService.cancelConsult(context).subscribe((/**
         * @return {?}
         */
        function () {
            load.close();
            _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
            _this.subject.next({ result: true, isClose: true });
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            load.close();
            _this.subject.next({ result: false, isClose: false });
            _this.taskService.error(error);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TaskExecuteComponent.prototype.completeSubmit = /**
     * @private
     * @return {?}
     */
    function () {
        // 通过、驳回、其他第三方动作
        /** @type {?} */
        var context = {
            workItemId: this.workItemId,
            conclusionValue: this.actionEntity.code,
            comment: this.comment,
            signAssignees: this.selectedUsers,
            nextFlowNodes: [],
            otherAssignNodes: [],
            addendum: this.addendum,
            //动态驳回规则
            dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? this.showBackWardConfig.displayPlaceholder : '',
            priority: this.selectedPriority
        };
        if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) { // 加签 or 仿真返回为空，直接往下走
            this.completeTask(context);
        }
        else {
            if (this.selectedNodeId) { // 加签时，选择下一环节被禁用，destNodeId为undefined
                // 加签时，选择下一环节被禁用，destNodeId为undefined
                /** @type {?} */
                var nextFlowNodes = [];
                /** @type {?} */
                var nodes = this.selectedNodeId.split('，');
                for (var i = 0; i < nodes.length; i++) {
                    /** @type {?} */
                    var nextFlowNode = {
                        activityDefinitionId: nodes[i],
                        activityDefinitionName: this.assignInfos[i].activityDefinitionName,
                        dependency: this.assignInfos[i].dependency,
                        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],
                        assigneeInfo: null,
                        resolved: false,
                        anonymous: this.assignInfos[i].anonymous,
                        anonymousText: this.assignInfos[i].anonymousText
                    };
                    //节点找不到人，且异常提示时，并行网关暂不处理
                    if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {
                        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {
                            /** @type {?} */
                            var str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');
                            this.notify.warning(str);
                            this.subject.next({ result: false, isClose: false });
                            return;
                        }
                    }
                    nextFlowNodes.push(nextFlowNode);
                }
                context.nextFlowNodes = nextFlowNodes;
            }
            //其他节点指派信息
            if (this.otherAssignInfos && this.otherAssignInfos.length) {
                for (var i = 0; i < this.otherAssignInfos.length; i++) {
                    /** @type {?} */
                    var nextFlowNode = {
                        activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,
                        activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,
                        dependency: this.otherAssignInfos[i].dependency,
                        selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],
                        assigneeInfo: null,
                        resolved: false,
                        anonymous: false,
                        anonymousText: ''
                    };
                    context.otherAssignNodes.push(nextFlowNode);
                }
            }
            if (this.response.selectTargetAble && this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) { // 用户没选择跳转节点，不允许提交
                this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));
                this.subject.next({ result: false, isClose: false });
            }
            else if (this.assignInfos.filter((/**
             * @param {?} info
             * @return {?}
             */
            function (info) { return info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length; })).length) {
                this.notify.warning(this.i18nService.getValue('task.selectProcessor'));
                this.subject.next({ result: false, isClose: false });
            }
            else {
                this.completeTask(context);
            }
        }
    };
    /**
     * @private
     * @param {?} completeContext
     * @return {?}
     */
    TaskExecuteComponent.prototype.completeTask = /**
     * @private
     * @param {?} completeContext
     * @return {?}
     */
    function (completeContext) {
        var _this = this;
        /** @type {?} */
        var attachmentNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return entity.code === 'AttachmentNecessary'; }));
        /** @type {?} */
        var certificationNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return entity.code === 'CertificationNecessary'; }));
        /** @type {?} */
        var commentNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        function (entity) { return entity.code === 'CommentNecessary'; }));
        if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {
            this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            if (certificationNecessary && certificationNecessary.value === 'true') {
                this.verifySignature((/**
                 * @return {?}
                 */
                function () {
                    completeContext.verifySigned = _this.verifySigned;
                    _this.taskComplete(completeContext);
                }));
                /** @type {?} */
                var msg = [this.workItemId];
                gspCA.getSignedMsg(msg);
            }
            else {
                this.taskComplete(completeContext);
            }
        }
    };
    /**
     * @private
     * @param {?} handler
     * @return {?}
     */
    TaskExecuteComponent.prototype.executeFormActionsAfterCompleteTask = /**
     * @private
     * @param {?} handler
     * @return {?}
     */
    function (handler) {
        var _this = this;
        // 如果表单注册了事件
        if (this.origin == ActionOrigin.TaskForm && this.ifRegistered && this.formObject) {
            /** @type {?} */
            var postActions = this.billMethodConfigs.filter((/**
             * @param {?} action
             * @return {?}
             */
            function (action) { return action.action === _this.actionEntity.code && action.executionTime === 'Post'; })).sort((/**
             * @param {?} x
             * @param {?} y
             * @return {?}
             */
            function (x, y) { return x.sortOrder - y.sortOrder; }));
            if (postActions && postActions.length) {
                this.executePostFormActions(postActions, handler);
            }
        }
        else {
            handler();
        }
    };
    /**
     * @private
     * @param {?} formActions
     * @param {?} hander
     * @return {?}
     */
    TaskExecuteComponent.prototype.executePostFormActions = /**
     * @private
     * @param {?} formActions
     * @param {?} hander
     * @return {?}
     */
    function (formActions, hander) {
        var _this = this;
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                /** @type {?} */
                var data = re.data.data;
                if (data.result === true) {
                    _this.executePostFormActions(formActions, hander);
                }
                else {
                    _this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批后表单操作执行失败！');
                }
            }));
            // 执行表单动作
            /** @type {?} */
            var formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            hander();
        }
    };
    //帮助选人后
    //帮助选人后
    /**
     * @param {?} data
     * @return {?}
     */
    TaskExecuteComponent.prototype.afterConfirmForTransfer = 
    //帮助选人后
    /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data && data.length) {
            this.selectedUsers = data.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.id; }));
            this.selectedUserNgModule = data.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.name; })).join();
        }
        else {
            this.selectedUsers = [];
        }
        if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {
            this.addSign.showMultiInstanceType = true;
        }
        else {
            this.addSign.showMultiInstanceType = false;
        }
    };
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.cancel = /**
     * @return {?}
     */
    function () {
        this.submitResult.isClose = false;
        this.subject.next(this.submitResult);
        return this.subject.asObservable();
    };
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.getSubject = /**
     * @return {?}
     */
    function () {
        return this.subject.asObservable();
    };
    // 下一环节选择后事件
    // 下一环节选择后事件
    /**
     * @param {?} data
     * @return {?}
     */
    TaskExecuteComponent.prototype.selectNodeChange = 
    // 下一环节选择后事件
    /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.selectedNodeId = data && data.data && data.data.id;
        if (this.response.simulationPaths[data.index].nodeInfoList.every((/**
         * @param {?} node
         * @return {?}
         */
        function (node) { return node.resolved === true; }))) { // 已预解析参与者
            this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);
            this.setOtherAssignInfoAgain(this.response.simulationPaths[data.index].nodeInfoList);
        }
        else {
            /** @type {?} */
            var nodeIds = this.selectedNodeId.split('，').map((/**
             * @param {?} node
             * @return {?}
             */
            function (node) { return "\"" + node + "\""; })).join();
            // 注意一个中文逗号一个英文逗号
            /** @type {?} */
            var load_9 = this.loadingService.show();
            this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((/**
             * @param {?} nodeInfoList
             * @return {?}
             */
            function (nodeInfoList) {
                load_9.close();
                _this.setAssignInfo(nodeInfoList);
                _this.setOtherAssignInfoAgain(nodeInfoList);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                load_9.close();
                _this.taskService.error(error);
            }));
        }
    };
    // 下一环节清空后事件
    // 下一环节清空后事件
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.selectNodeClear = 
    // 下一环节清空后事件
    /**
     * @return {?}
     */
    function () {
        this.selectedNodeId = null;
        this.assignInfos = [{
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
    };
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    TaskExecuteComponent.prototype.afterConfirmForAssign = /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    function (data, index) {
        this.assignInfos[index].assignees = data;
    };
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    TaskExecuteComponent.prototype.afterConfirmForOtherAssign = /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    function (data, index) {
        this.otherAssignInfos[index].assignees = data;
    };
    /**
     * 上传附件后事件
     */
    /**
     * 上传附件后事件
     * @param {?} data
     * @return {?}
     */
    TaskExecuteComponent.prototype.addAttachment = /**
     * 上传附件后事件
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.addendum.attachment = JSON.stringify(data);
    };
    /**
     * 手写签名后事件
     */
    /**
     * 手写签名后事件
     * @param {?} data
     * @return {?}
     */
    TaskExecuteComponent.prototype.addSignature = /**
     * 手写签名后事件
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data) {
            /** @type {?} */
            var signInfo = {
                id: data,
                waterMarking: null
            };
            this.addendum.signature = JSON.stringify(signInfo);
        }
        else {
            this.addendum.signature = '';
        }
    };
    // 以服务方式打开组件时，左右加上padding
    // 以服务方式打开组件时，左右加上padding
    /**
     * @return {?}
     */
    TaskExecuteComponent.prototype.addPadding = 
    // 以服务方式打开组件时，左右加上padding
    /**
     * @return {?}
     */
    function () {
        this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';
    };
    /**
     * @private
     * @param {?} workItemId
     * @param {?} action
     * @return {?}
     */
    TaskExecuteComponent.prototype.sendMessage = /**
     * @private
     * @param {?} workItemId
     * @param {?} action
     * @return {?}
     */
    function (workItemId, action) {
        if (this.iframe) {
            /** @type {?} */
            var iframeWindow = this.iframe.nativeElement.contentWindow;
            /** @type {?} */
            var message = {
                target: workItemId,
                data: {
                    command: action.method,
                    arguments: action.methodParameters
                }
            };
            iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);
        }
        else {
            this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
            this.notify.warning('请等待表单加载完成后再试');
        }
    };
    // 提交审批前的数字签名及验签
    // 提交审批前的数字签名及验签
    /**
     * @param {?} handler
     * @return {?}
     */
    TaskExecuteComponent.prototype.verifySignature = 
    // 提交审批前的数字签名及验签
    /**
     * @param {?} handler
     * @return {?}
     */
    function (handler) {
        /** @type {?} */
        var that = this;
        if (((/** @type {?} */ (window))).gspframeworkService &&
            ((/** @type {?} */ (window))).gspframeworkService.rtf) {
            ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', (/**
             * @param {?} signedData
             * @return {?}
             */
            function signMsgOver(signedData) {
                if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                    // 证书对象
                    /** @type {?} */
                    var cert = gspCA.getCurCert();
                    // 验签参数
                    that.verifySigned = {
                        // 要验证的证书base64编码的字符流(certkey)
                        certBase64Info: gspCA.getCertBase64(cert),
                        // 签名原信息
                        msg: [that.workItemId],
                        // 要签名后信息
                        signedmsg: signedData[1][0],
                        // 用户使用场景，目前未使用，可以为空
                        useCase: null,
                    };
                    handler();
                }
                else {
                    that.loadingService.close();
                    that.subject.next({ result: false, isClose: false });
                    that.notify.error(signedData[1]);
                    throw new Error(signedData[1]);
                }
            }));
        }
    };
    // 通过、驳回、其他第三方动作
    // 通过、驳回、其他第三方动作
    /**
     * @param {?} completeContext
     * @return {?}
     */
    TaskExecuteComponent.prototype.taskComplete = 
    // 通过、驳回、其他第三方动作
    /**
     * @param {?} completeContext
     * @return {?}
     */
    function (completeContext) {
        var _this = this;
        this.taskService.complete(completeContext).subscribe((/**
         * @param {?} cr
         * @return {?}
         */
        function (cr) {
            _this.executeFormActionsAfterCompleteTask((/**
             * @return {?}
             */
            function () {
                if (cr.needInteraction) { // 通过后指派场景
                    if (_this.origin == ActionOrigin.TaskCenter) {
                        _this.subject.next({ result: true, isClose: false });
                    }
                    else {
                        _this.subject.next({ result: false, isClose: false }); //关掉loading
                    }
                    _this.notify.info(_this.i18nService.getValue('cueWords.select')
                        + '【' + cr.nextFlowNodes[0].activityDefinitionName + '】'
                        + _this.i18nService.getValue('cueWords.processor'));
                    /** @type {?} */
                    var task = new TaskEntity();
                    /** @type {?} */
                    var action = new TaskAction();
                    task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;
                    action.code = 'AssignUser';
                    action.name = _this.i18nService.getValue('cueWords.assignUser');
                    _this.handlerService.execute(task, action).subscribe((/**
                     * @param {?} re
                     * @return {?}
                     */
                    function (re) {
                        if (re) {
                            _this.subject.next({ result: true, isClose: true });
                        }
                    }));
                }
                else {
                    if (completeContext.conclusionValue === 'Pass') {
                        _this.notify.success(_this.i18nService.getValue('cueWords.successPass'));
                    }
                    else if (completeContext.conclusionValue === 'Back') {
                        _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                    }
                    else {
                        _this.notify.success(_this.actionEntity.name + _this.i18nService.getValue('static.success'));
                    }
                    _this.subject.next({ result: true, isClose: true });
                }
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.subject.next({ result: false, isClose: false });
            _this.taskService.error(error);
        }));
    };
    /**
     * 消息监听处理方法
     */
    TaskExecuteComponent.func = null;
    TaskExecuteComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-task-execute',
                    template: "<!-- \u6279\u91CF\u5BA1\u6279\u65F6\u63D0\u793A -->\r\n<div *ngIf=\"taskList?.length > 20\" class=\"wf-task-batch-message\">\r\n  <span class=\"f-icon f-icon-info\"></span>\r\n  <span class=\"wf-task-batch-selected\">{{\r\n    \"batchSubmit.selected\" | translate\r\n  }}</span>\r\n  <span class=\"wf-task-batch-rows\">{{ taskList.length }}</span>\r\n  <span>{{ \"batchSubmit.item\" | translate }}</span>\r\n  <span>{{ \"batchSubmit.time\" | translate }}</span>\r\n  <span class=\"wf-task-batch-time\">{{ batchSecond }}</span>\r\n  <span>{{ \"batchSubmit.second\" | translate }}</span>\r\n</div>\r\n\r\n<!-- \u610F\u89C1\u8F93\u5165 -->\r\n<wf-comment\r\n  *ngIf=\"!showUrgeMessageSubject\"\r\n  class=\"w-100\"\r\n  name=\"comment\"\r\n  [(ngModel)]=\"comment\"\r\n  [defaultComment]=\"defaultComment\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [processInstanceId]=\"processInstanceId\"\r\n  [showAttachment]=\"showAttachment\"\r\n  [showCommonComment]=\"showCommonComment\"\r\n  [showSign]=\"showSign\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n  [TaskCenterConfig]=\"configList\"\r\n  [curUserId]=\"\r\n    task ? task.owner : taskList && taskList.length ? taskList[0].owner : ''\r\n  \"\r\n  [taskOrigin]=\"origin\"\r\n  (attachment)=\"addAttachment($event)\"\r\n  (signature)=\"addSignature($event)\"\r\n>\r\n</wf-comment>\r\n\r\n<!--\u50AC\u529E\u6D88\u606F-->\r\n<urge-handle\r\n  *ngIf=\"showUrgeMessageSubject\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [showMessageSubject]=\"showUrgeMessageSubject\"\r\n  [urgeMessageSubject]=\"urgeMessageSubject\"\r\n  [urgeMessageContent]=\"urgeMessageContent\"\r\n  [subjectEditable]=\"subjectEditable\"\r\n  [contentEditable]=\"contentEditable\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n>\r\n</urge-handle>\r\n\r\n<!-- \u5BA1\u6279\u8BB0\u5F55\u9690\u85CF\uFF08\u4EC5\u5BF9\u81EA\u5DF1\u53EF\u89C1\uFF09 -->\r\n<div\r\n  *ngIf=\"ifShowCommentToMySelf\"\r\n  class=\"custom-control custom-checkbox custom-control-inline\"\r\n  style=\"margin-bottom: 10px\"\r\n>\r\n  <input\r\n    type=\"checkbox\"\r\n    class=\"custom-control-input\"\r\n    [(ngModel)]=\"hideComment\"\r\n    id=\"taskcenterhidecomment\"\r\n    name=\"taskcenterhidecomment\"\r\n  />\r\n  <label class=\"custom-control-label\" for=\"taskcenterhidecomment\">{{\r\n    \"static.hideComment\" | translate\r\n  }}</label>\r\n</div>\r\n\r\n<!-- \u4E0B\u4E00\u73AF\u8282 -->\r\n<div *ngIf=\"ifSelectNode\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">{{ selectNodeText }}</div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-combo-list\r\n      style=\"flex: 1\"\r\n      [(ngModel)]=\"nodeDefaultValue\"\r\n      [data]=\"destNodes\"\r\n      [editable]=\"false\"\r\n      [textField]=\"'name'\"\r\n      [valueField]=\"'id'\"\r\n      [idField]=\"'id'\"\r\n      [readonly]=\"selectTargetAble && destNodes.length > 1 ? false : true\"\r\n      (selectChange)=\"selectNodeChange($event)\"\r\n      (clear)=\"selectNodeClear()\"\r\n      [placeholder]=\"'task.selectPlaceholder' | translate\"\r\n    >\r\n    </farris-combo-list>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u4E0B\u4E00\u73AF\u8282\u529E\u7406\u4EBA\u5458\uFF08\u6307\u6D3E\uFF09 -->\r\n<div *ngIf=\"ifAssignUser || ifUrgeType\">\r\n  <lib-assignee-info\r\n    *ngFor=\"let assignInfo of assignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"\r\n      assignInfos.length > 1\r\n        ? assignInfo.activityDefinitionName\r\n        : ifUrgeType\r\n        ? ('task.urgeText' | translate)\r\n        : ''\r\n    \"\r\n    [ifShowBlank]=\"false\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirmForAssign($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n<!-- \u79FB\u4EA4\u3001\u52A0\u7B7E\u3001\u5F81\u8BE2\u3001\u77E5\u4F1A \u4EBA\u5458\u5E2E\u52A9-->\r\n<lib-assignee-info\r\n  *ngIf=\"ifSelectUser\"\r\n  [activityName]=\"selectUserText\"\r\n  [singleSelect]=\"singleSelect\"\r\n  [filter]=\"filter\"\r\n  [disabled]=\"false\"\r\n  [placeholder]=\"'task.selectPlaceholder' | translate\"\r\n  [allowGlobalAssign]=\"true\"\r\n  [wfContext]=\"wfContext\"\r\n  (afterConfirm)=\"afterConfirmForTransfer($event)\"\r\n>\r\n</lib-assignee-info>\r\n\r\n<!-- \u52A0\u7B7E -->\r\n<!-- \u5BA1\u6279\u7B56\u7565 -->\r\n<div *ngIf=\"addSign.showMultiInstanceType\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.multiInstanceType\" | translate }}\r\n  </div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-radiogroup\r\n      [(ngModel)]=\"addSign.curMultiInstType\"\r\n      [data]=\"addSign.multiInstanceType\"\r\n      [horizontal]=\"true\"\r\n    >\r\n    </farris-radiogroup>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5141\u8BB8\u518D\u52A0\u7B7E -->\r\n<div *ngIf=\"addSign.showSignToSign\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.allowSignToSign\" | translate }}{{ actionEntity.name }}\r\n  </div>\r\n  <farris-switch [(ngModel)]=\"addSign.allowSignToSIgn\" [size]=\"'small'\">\r\n  </farris-switch>\r\n</div>\r\n\r\n<!-- \u9A73\u56DE\u540E\u518D\u6B21\u63D0\u4EA4\u65F6\u76F4\u63A5\u56DE\u5230\u672C\u8282\u70B9 -->\r\n<div\r\n  *ngIf=\"showBackWardConfig.dynamicBackWardRuleAble\"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\">{{ showBackWardConfig.title }}</div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-combo-list\r\n      style=\"flex: 1\"\r\n      [(ngModel)]=\"showBackWardConfig.displayPlaceholder\"\r\n      [data]=\"showBackWardConfig.backWardRules\"\r\n      [editable]=\"false\"\r\n      [textField]=\"'name'\"\r\n      [valueField]=\"'value'\"\r\n      [idField]=\"'value'\"\r\n      [readonly]=\"false\"\r\n      [enableClear]=\"false\"\r\n      [placeholder]=\"showBackWardConfig.displayPlaceholder\"\r\n    >\r\n    </farris-combo-list>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u7D27\u6025\u7A0B\u5EA6\uFF0C\u4E0B\u4E00\u73AF\u8282\u4E3A\u7ED3\u675F\u65F6\u4E0D\u5C55\u793A -->\r\n<div\r\n  *ngIf=\"\r\n    task?.priority &&\r\n    enablePriority &&\r\n    task.priorityItemList &&\r\n    !selectedNodeId?.startsWith('EndEvent')\r\n  \"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"task.priority\" | translate }}\r\n  </div>\r\n  <farris-radiogroup\r\n    [(ngModel)]=\"selectedPriority\"\r\n    [data]=\"task.priorityItemList\"\r\n    [horizontal]=\"true\"\r\n  >\r\n  </farris-radiogroup>\r\n</div>\r\n\r\n<!-- \u5176\u4ED6\u8282\u70B9\u529E\u7406\u4EBA\u5458\uFF08\u6307\u6D3E\uFF09 -->\r\n<div *ngIf=\"otherAssignInfos?.length\">\r\n  <div class=\"wf-task-splitter\">\r\n    {{ \"startProcess.otherNodesAssign\" | translate\r\n    }}<span class=\"wf-task-splitter-line\"></span>\r\n  </div>\r\n  <lib-assignee-info\r\n    *ngFor=\"let assignInfo of otherAssignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"assignInfo.activityDefinitionName\"\r\n    [ifShowBlank]=\"true\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirmForOtherAssign($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n<!-- \u6309\u94AE -->\r\n<ng-template #taskExecuteButtons>\r\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">\r\n    {{ \"static.footCancel\" | translate }}\r\n  </button>\r\n  <button\r\n    type=\"button\"\r\n    class=\"btn btn-primary\"\r\n    (click)=\"submit()\"\r\n    [disabled]=\"submitDisable\"\r\n  >\r\n    {{ \"static.footOk\" | translate }}\r\n  </button>\r\n</ng-template>\r\n",
                    styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:14px}.wf-task-handler-help-div-submit{margin-bottom:14px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wf-task-batch-selected{padding-left:8px}.wf-task-batch-rows{font-size:13px;font-weight:500;padding:0 4px;color:#2a87ff}.wf-task-batch-time{font-size:13px;font-weight:500;padding:0 4px;color:#424347}.wf-task-batch-message{display:flex;background:#edf9ff;border:1px solid rgba(196,235,255,1);border-radius:8px;margin-bottom:6px;align-items:center;font-size:12px;padding:4px 10px}.wf-submit-section{padding:4px 24px 0}.wf-submit-item{display:flex;align-items:baseline}.wf-submit-item-label{padding-right:10px;width:88px;text-align:right}.wf-task-splitter{display:flex;align-items:center;color:rgba(0,0,0,.4);font-size:12px;margin-bottom:10px}.wf-task-splitter-line{border-bottom:1px dashed rgba(0,0,0,.1);flex-grow:1}"]
                }] }
    ];
    /** @nocollapse */
    TaskExecuteComponent.ctorParameters = function () { return [
        { type: TaskService },
        { type: NotifyService },
        { type: I18nService },
        { type: WfTaskHandlerService },
        { type: LoadingService },
        { type: MessagerService },
        { type: Injector }
    ]; };
    TaskExecuteComponent.propDecorators = {
        buttons: [{ type: ViewChild, args: ['taskExecuteButtons',] }],
        sysUserHelp: [{ type: ViewChild, args: [SysFarrisLookupComponent,] }],
        urgeHandleComponent: [{ type: ViewChild, args: [UrgeHandleComponent,] }],
        cls: [{ type: HostBinding, args: ['class',] }]
    };
    return TaskExecuteComponent;
}(ActionBaseImplComponent));
export { TaskExecuteComponent };
if (false) {
    /**
     * 消息监听处理方法
     * @type {?}
     * @private
     */
    TaskExecuteComponent.func;
    /** @type {?} */
    TaskExecuteComponent.prototype.task;
    /** @type {?} */
    TaskExecuteComponent.prototype.workItemId;
    /** @type {?} */
    TaskExecuteComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskExecuteComponent.prototype.actionEntity;
    /** @type {?} */
    TaskExecuteComponent.prototype.comment;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.MAX_COMMENT_LENGTH;
    /** @type {?} */
    TaskExecuteComponent.prototype.defaultComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfCacheComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.currentDefaultValue;
    /** @type {?} */
    TaskExecuteComponent.prototype.taskList;
    /** @type {?} */
    TaskExecuteComponent.prototype.batchSecond;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectNode;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifAssignUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifUrgeType;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifShowCommentToMySelf;
    /** @type {?} */
    TaskExecuteComponent.prototype.singleSelect;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectTargetAble;
    /** @type {?} */
    TaskExecuteComponent.prototype.hideComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.filter;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUsers;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUserNgModule;
    /** @type {?} */
    TaskExecuteComponent.prototype.buttons;
    /** @type {?} */
    TaskExecuteComponent.prototype.sysUserHelp;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleComponent;
    /** @type {?} */
    TaskExecuteComponent.prototype.subject;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitResult;
    /** @type {?} */
    TaskExecuteComponent.prototype.bindingData;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectNodeText;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectUserText;
    /** @type {?} */
    TaskExecuteComponent.prototype.commentPlaceHolder;
    /** @type {?} */
    TaskExecuteComponent.prototype.showAttachment;
    /** @type {?} */
    TaskExecuteComponent.prototype.showSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.billMethodConfigs;
    /** @type {?} */
    TaskExecuteComponent.prototype.nodeDefaultValue;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedNodeId;
    /** @type {?} */
    TaskExecuteComponent.prototype.destNodes;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeightBase;
    /** @type {?} */
    TaskExecuteComponent.prototype.addendum;
    /** @type {?} */
    TaskExecuteComponent.prototype.groupIcon;
    /** @type {?} */
    TaskExecuteComponent.prototype.assignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.otherAssignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.originOtherAssignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.response;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleResponse;
    /** @type {?} */
    TaskExecuteComponent.prototype.formObject;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifRegistered;
    /** @type {?} */
    TaskExecuteComponent.prototype.configList;
    /** @type {?} */
    TaskExecuteComponent.prototype.verifySigned;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitDisable;
    /** @type {?} */
    TaskExecuteComponent.prototype.addSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showBackWardConfig;
    /**
     * 任务催办时使用
     * @type {?}
     */
    TaskExecuteComponent.prototype.showUrgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageContent;
    /** @type {?} */
    TaskExecuteComponent.prototype.addReminder;
    /** @type {?} */
    TaskExecuteComponent.prototype.subjectEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.contentEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfContext;
    /** @type {?} */
    TaskExecuteComponent.prototype.enablePriority;
    /** @type {?} */
    TaskExecuteComponent.prototype.cls;
    /** @type {?} */
    TaskExecuteComponent.prototype.POST_MESSAGE_TARGET;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.messageSubject;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.language;
    /** @type {?} */
    TaskExecuteComponent.prototype.actionToken;
    /** @type {?} */
    TaskExecuteComponent.prototype.simulateToken;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedPriority;
    /**
     * 监听事件处理
     * @type {?}
     */
    TaskExecuteComponent.prototype.eventHandler;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.handlerService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1leGVjdXRlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1leGVjdXRlL3Rhc2stZXhlY3V0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUVULFNBQVMsRUFDVCxXQUFXLEVBQ1gsV0FBVyxFQUNYLFFBQVEsR0FHVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN4RixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUM5RCxPQUFPLEVBQXFDLFlBQVksRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2pHLE9BQU8sRUFBYyxlQUFlLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzVELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNyRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFnQix1QkFBdUIsRUFBa0QsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUksT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUl0RCxPQUFPLEVBQUUsVUFBVSxFQUFv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b0U7O0lBRXBFLDJDQUFvQjs7SUFDcEIsNkNBQXNCOztJQUN0QixnREFBeUI7Ozs7O0lBOEZ6Qiw0Q0FFQzs7Ozs7SUE3RkMsMkNBQWdDOzs7OztJQUNoQyxzQ0FBNkI7Ozs7O0lBQzdCLDJDQUFnQzs7Ozs7SUFDaEMsOENBQTRDOzs7OztJQUM1Qyw4Q0FBc0M7Ozs7O0lBQ3RDLHVDQUFnQzs7Ozs7SUFDaEMsd0NBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgT25Jbml0LFxyXG4gIFZpZXdDaGlsZCxcclxuICBUZW1wbGF0ZVJlZixcclxuICBIb3N0QmluZGluZyxcclxuICBJbmplY3RvcixcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIE9uRGVzdHJveSxcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQWRkZW5kdW0sIFZlcmlmeVNpZ25lZCwgQ29tcGxldGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vZW50aXR5L2NvbXBsZXRlLWNvbnRleHQnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3lzRmFycmlzTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1zeXMvc3lzbWdyLXVpJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgSTE4blNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2kxOG4vaTE4bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tcGxldGVSZXNwb25zZSwgQXNzaWduUGFyYW1ldGVyLCBBc3NpZ25lZUluZm8gfSBmcm9tICcuLi8uLi9lbnRpdHkvY29tcGxldGUtcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBCZWhhdmlvclN1YmplY3QsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgVGFza0FjdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWFjdGlvbic7XHJcbmltcG9ydCB7IFdmVGFza0hhbmRsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vd2YtdGFzay1oYW5kbGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUYXNrRW50aXR5IH0gZnJvbSAnLi4vLi4vZW50aXR5L3Rhc2stZW50aXR5JztcclxuaW1wb3J0IHsgU3VibWl0UmVzdWx0LCBBY3Rpb25CYXNlSW1wbENvbXBvbmVudCwgQWN0aW9uRXZlbnQsIFRhc2tFdmVudFJlc3VsdCwgVGFza0V2ZW50Q29udGV4dCwgQWN0aW9uT3JpZ2luIH0gZnJvbSAnQGdzcC13Zi90YXNrLWltcGwtYXBpJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBPcmdhbml6YXRpb25TY29wZSB9IGZyb20gJy4uLy4uL2VudGl0eS9vcmdhbml6YXRpb24tc2NvcGUnO1xyXG5pbXBvcnQgeyBGbG93Tm9kZUluZm8sIEFzc2lnbmVlIH0gZnJvbSAnLi4vLi4vZW50aXR5L3N0YXJ0LXByb2Nlc3MtcGF5bG9hZCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBBc3NpZ25JbmZvSGVscEVudGl0eSB9IGZyb20gJy4uLy4uL2VudGl0eS9hc3NpZ25JbmZvSGVscCc7XHJcbmltcG9ydCB7IFNpbXVsYXRlUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9lbnRpdHkvc2ltdWxhdGUtcmVzcG9uc2UnO1xyXG5pbXBvcnQgeyBCaWxsTWV0aG9kQ29uZmlnLCBGb3JtRXZlbnRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZW50aXR5L2Zvcm1BY3Rpb24nO1xyXG5pbXBvcnQgeyBDb25maWdDb2RlLCBUYXNrQ2VudGVyQ29uZmlnIH0gZnJvbSAnLi4vLi4vZW50aXR5L3Rhc2stY2VudGVyLWNvbmZpZyc7XHJcbmltcG9ydCB7IENvdW50ZXJTaWduUGFyYW0sIFdvcmtJdGVtRXhlY3V0ZVBhcmFtIH0gZnJvbSAnLi4vLi4vZW50aXR5L3dvcmtpdGVtLWV4ZWN1dGUtcGFyYW0nO1xyXG5pbXBvcnQgeyBVcmdlSGFuZGxlQ29udGV4dCwgVXJnZUhhbmRsZVJlc3BvbnNlLCBVcmdlSGFuZGxlU2ltdWxhdGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vZW50aXR5L3VyZ2UtaGFuZGxlJztcclxuaW1wb3J0IHsgQmF0Y2hWZXJpZnlTaWduZWRDb250ZXh0IH0gZnJvbSAnLi4vLi4vZW50aXR5L2JhdGNoVmVyaWZ5c2lnbmVkJztcclxuaW1wb3J0IHsgV2ZDb250ZXh0IH0gZnJvbSAnLi4vLi4vZW50aXR5L3dmQ29udGV4dCc7XHJcbmltcG9ydCB7IFVyZ2VIYW5kbGVDb21wb25lbnQgfSBmcm9tIFwiLi4vdXJnZS1oYW5kbGUvdXJnZS1oYW5kbGUuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IEFkZFNpZ25QYXlsb2FkLCBBZGRTaWduU2ltdWxhdGVSZXNwb25zZSwgTXVsdGlJbnN0YW5jZVR5cGUgfSBmcm9tICcuLi8uLi9lbnRpdHkvYWRkLXNpZ24nO1xyXG5pbXBvcnQgeyBTaW11bGF0ZVN1YmplY3QgfSBmcm9tICcuLi8uLi9lbnRpdHkvc2ltdWxhaXRlLXN1YmplY3QnO1xyXG5cclxuZGVjbGFyZSB2YXIgU3lzdGVtOiBhbnk7XHJcbmRlY2xhcmUgY29uc3QgZ3NwQ0E6IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLXRhc2stZXhlY3V0ZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3Rhc2stZXhlY3V0ZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFzay1leGVjdXRlLmNvbXBvbmVudC5jc3MnXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIFRhc2tFeGVjdXRlQ29tcG9uZW50IGV4dGVuZHMgQWN0aW9uQmFzZUltcGxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOa2iOaBr+ebkeWQrOWkhOeQhuaWueazlVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGZ1bmMgPSBudWxsO1xyXG4gIHRhc2s6IFRhc2tFbnRpdHk7Ly/lvZPliY3ku7vliqFcclxuICB3b3JrSXRlbUlkOiBzdHJpbmc7IC8vIOW3peS9nOmhuUlEXHJcbiAgcHJvY2Vzc0luc3RhbmNlSWQ6IHN0cmluZzsgLy8g5rWB56iL5a6e5L6LSURcclxuICBhY3Rpb25FbnRpdHkgPSBuZXcgVGFza0FjdGlvbigpOyAvLyDliqjkvZzlrp7kvZNcclxuICBjb21tZW50ID0gJyc7IC8vIOWuoeaJueaEj+ingVxyXG4gIHByaXZhdGUgTUFYX0NPTU1FTlRfTEVOR1RIID0gNDAwMDsvL+WuoeaJueaEj+ingeacgOWkp+mVv+W6plxyXG4gIGRlZmF1bHRDb21tZW50OiBzdHJpbmc7Ly/pu5jorqTlrqHmibnmhI/op4FcclxuICB3ZkNhY2hlQ29tbWVudDogc3RyaW5nOy8v57yT5a2Y55qE5oSP6KeBXHJcbiAgY3VycmVudERlZmF1bHRWYWx1ZTogc3RyaW5nOy8v5b2T5YmN5Yqo5L2c55qE6buY6K6k5oSP6KeBXHJcbiAgdGFza0xpc3Q6IFRhc2tFbnRpdHlbXSA9IFtdOy8v5om56YeP5a6h5om55o6l5pS25Yiw55qE5Lu75YqhbGlzdFxyXG4gIGJhdGNoU2Vjb25kOiBudW1iZXIgPSAwOy8v5om56YeP5pON5L2c55qE5pe26Ze0XHJcblxyXG4gIGlmU2VsZWN0Tm9kZSA9IGZhbHNlOyAvLyDmmK/lkKbmmL7npLrpgInmi6nkuIvkuIDnjq/oioJcclxuICBpZlNlbGVjdFVzZXIgPSBmYWxzZTsgLy8g5piv5ZCm5pi+56S65LiL5LiA546v6IqC5aSE55CG5Lq6XHJcbiAgaWZBc3NpZ25Vc2VyID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuWKnueQhuS6uuWRmOahhlxyXG4gIGlmVXJnZVR5cGUgPSBmYWxzZTsgLy8g5piv5ZCm5pi+56S65o6l5pS25Lq65qGG77yI5YKs5Yqe5raI5oGv5o6l5pS25Lq677yJXHJcbiAgaWZTaG93Q29tbWVudFRvTXlTZWxmID0gZmFsc2U7Ly8g5piv5ZCm5pi+56S65a6h5om56K6w5b2V5LuF6Ieq5bex5Y+v6KeBXHJcblxyXG4gIHNpbmdsZVNlbGVjdCA9IGZhbHNlOyAvLyDnlKjmiLfluK7liqnmmK/lkKbljZXpgInvvIzpu5jorqTlpJrpgIlcclxuICBzZWxlY3RUYXJnZXRBYmxlID0gZmFsc2U7IC8vIOaYr+WQpuWFgeiuuOmAieaLqeS4i+S4gOeOr+iKglxyXG4gIGhpZGVDb21tZW50ID0gZmFsc2U7Ly/lrqHmibnorrDlvZXku4Xoh6rlt7Hlj6/op4FcclxuXHJcbiAgZmlsdGVyID0geyBub3RHZXRDdXJyZW50VXNlcjogdHJ1ZSwgbm90R2V0U3RvcFVzZXI6IHRydWUsIG9yZGVyRmllbGQ6ICdvcmRlcicsIHdpdGhBbGxPcmc6IHRydWUsIG9yZ0lkOiAnJyB9OyAvLyDns7vnu5/nlKjmiLfluK7liqnmmK/lkKbov4fmu6TlvZPliY3kurpcclxuICBzZWxlY3RlZFVzZXJzOiBzdHJpbmdbXSA9IFtdOyAvLyDnlKjmiLfluK7liqnpgInmi6nlkI7nmoRJZOaVsOe7hFxyXG5cclxuICBzZWxlY3RlZFVzZXJOZ01vZHVsZTogc3RyaW5nOyAvLyDpgInmi6nlpITnkIbkurrnmoRwbGFjZWhvbGRlclxyXG5cclxuICBAVmlld0NoaWxkKCd0YXNrRXhlY3V0ZUJ1dHRvbnMnKSBidXR0b25zOiBUZW1wbGF0ZVJlZjxhbnk+OyAvLyDnoa7orqTlj5bmtojmjInpkq5cclxuICBAVmlld0NoaWxkKFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudCkgc3lzVXNlckhlbHA6IFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudDsgLy8g57O757uf55So5oi35biu5YqpXHJcbiAgQFZpZXdDaGlsZChVcmdlSGFuZGxlQ29tcG9uZW50KSB1cmdlSGFuZGxlQ29tcG9uZW50OiBVcmdlSGFuZGxlQ29tcG9uZW50O1xyXG5cclxuICBzdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxTdWJtaXRSZXN1bHQ+KG51bGwpO1xyXG4gIHN1Ym1pdFJlc3VsdDogU3VibWl0UmVzdWx0ID0geyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfTsgLy8g5Yqo5L2c5omn6KGM5a6M5oiQ5ZCO6L+U5Zue55qE5a6e5L2T57uT5p6cXHJcbiAgYmluZGluZ0RhdGE6IHsgaWQ/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcgfSA9IHt9OyAvLyDns7vnu5/luK7liqnlpJrpgInml7bnlKjliLBcclxuXHJcbiAgc2VsZWN0Tm9kZVRleHQ6IHN0cmluZyA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2submV4dE5vZGVUZXh0Jyk7IC8vIOS4i+S4gOeOr+iKguaYvuekuueahOaWh+WtlyxcIuS4i+S4gOeOr+iKglwiXHJcbiAgc2VsZWN0VXNlclRleHQ6IHN0cmluZzsgLy8g5aSE55CG5Lq65ZGY5pi+56S65paH5a2XXHJcbiAgY29tbWVudFBsYWNlSG9sZGVyOiBzdHJpbmcgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuaW5wdXRIb2xkZXInKTsvL+WuoeaJueaEj+ingeahhnBsYWNlaG9sZGVyXHJcbiAgc2hvd0F0dGFjaG1lbnQ6IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5pi+56S66ZmE5Lu25LiK5LygXHJcbiAgc2hvd1NpZ246IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5pi+56S6562+5ZCNXHJcbiAgc2hvd0NvbW1vbkNvbW1lbnQ6IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5pi+56S65bi455So5oSP6KeBXHJcbiAgdGV4dEFyZWFIZWlnaHQ6IG51bWJlciA9IDg0Oy8v5paH5a2X5qGG55qE6auY5bqmXHJcblxyXG4gIGJpbGxNZXRob2RDb25maWdzOiBCaWxsTWV0aG9kQ29uZmlnW10gPSBbXTsgLy8g6KGo5Y2V5Yqo5L2c6YWN572u5YiX6KGoXHJcblxyXG4gIG5vZGVEZWZhdWx0VmFsdWU6IHN0cmluZzsvL+m7mOiupOS4i+S4gOeOr+iKgu+8iOaPkOekuueUqO+8iVxyXG5cclxuICBzZWxlY3RlZE5vZGVJZDogc3RyaW5nOyAvLyDpgInmi6nnmoTkuIvkuIDnjq/oioJJRO+8jOW5tuihjOWIhuaUr+aYr++8jOmAl+WPt+malOW8gOeahFxyXG4gIGRlc3ROb2RlczogeyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdID0gW107IC8vIOWAmemAieS4i+S4gOeOr+iKglxyXG5cclxuICBkaWFsb2dIZWlnaHQgPSAyNzA7IC8vIOW8ueahhueahOmrmOW6plxyXG4gIGRpYWxvZ0hlaWdodEJhc2UgPSA3MDtcclxuXHJcbiAgYWRkZW5kdW0gPSBuZXcgQWRkZW5kdW0oKTsgLy8g6ZmE5Lu244CB562+5ZCN5L+h5oGvXHJcbiAgZ3JvdXBJY29uID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1sb29rdXBcIj48L2k+JztcclxuXHJcbiAgYXNzaWduSW5mb3M6IEFzc2lnbkluZm9IZWxwRW50aXR5W10gPSBbeyAvLyDoioLngrnov5Tlm57nmoTmjIfmtL7kv6Hmga/vvIjlpJrkuKrvvIlcclxuICAgIHNlbGVjdGVkQXNzaWduZWVzOiBbXSxcclxuICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgIGFzc2lnbmVlczogW10sXHJcbiAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiAnJyxcclxuICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiAnJyxcclxuICAgIGRlcGVuZGVuY3k6ICcnLFxyXG4gICAgYW5vbnltb3VzOiBmYWxzZSxcclxuICAgIGFub255bW91c1RleHQ6IG51bGwsXHJcbiAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgfV07XHJcblxyXG4gIG90aGVyQXNzaWduSW5mb3M6IEFzc2lnbkluZm9IZWxwRW50aXR5W10gPSBbXTsvL+WFtuS7luiKgueCueaMh+a0vuS/oeaBr1xyXG5cclxuICBvcmlnaW5PdGhlckFzc2lnbkluZm9zOiBBc3NpZ25JbmZvSGVscEVudGl0eVtdID0gW107Ly/nvJPlrZjkuIDlvIDlp4vnmoTlhbbku5boioLngrnmjIfmtL7kv6Hmga9cclxuXHJcbiAgcmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2U7IC8vIOS/neWtmOaooeaLn+WuoeaJueWQjui/lOWbnueahOWGheWuue+8jOmAieaLqeiKgueCueaXtuS9v+eUqFxyXG4gIHVyZ2VIYW5kbGVSZXNwb25zZTogVXJnZUhhbmRsZVJlc3BvbnNlOy8v5L+d5a2Y5YKs5Yqe5qih5ouf5ZCO6L+U5Zue55qE5YaF5a65XHJcblxyXG4gIGZvcm1PYmplY3Q6IGFueTsgLy8g6KGo5Y2V5a+56LGhXHJcbiAgaWZSZWdpc3RlcmVkID0gZmFsc2U7IC8vIOihqOWNleaYr+WQpuazqOWGjFxyXG4gIGNvbmZpZ0xpc3Q6IFRhc2tDZW50ZXJDb25maWdbXSA9IFtdOyAvL+S7u+WKoeS4reW/g+mFjee9rumhuVxyXG5cclxuICB2ZXJpZnlTaWduZWQ6IFZlcmlmeVNpZ25lZCA9IG5ldyBWZXJpZnlTaWduZWQoKTsgLy8g5pWw5a2X6aqM562+5Y+C5pWwXHJcbiAgc3VibWl0RGlzYWJsZTogYm9vbGVhbiA9IGZhbHNlOyAvLyDmj5DkuqTmjInpkq7mmK/lkKbnpoHnlKhcclxuXHJcbiAgLy/liqDnrb7kvb/nlKhcclxuICBhZGRTaWduID0ge1xyXG4gICAgc2hvd1NpZ25Ub1NpZ246IGZhbHNlLFxyXG4gICAgYWxsb3dTaWduVG9TSWduOiB0cnVlLFxyXG4gICAgc2hvd011bHRpSW5zdGFuY2VUeXBlOiBmYWxzZSxcclxuICAgIG11bHRpSW5zdGFuY2VUeXBlOiBbXHJcbiAgICAgIHsgdmFsdWU6ICdQYXJhbGxlbCcsIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2FkZFNpZ24ucGFyYWxsZWwnKSB9LFxyXG4gICAgICB7IHZhbHVlOiAnU2VxdWVudGlhbCcsIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2FkZFNpZ24uc2VxdWVudGlhbCcpIH0sXHJcbiAgICAgIHsgdmFsdWU6ICdQcmVlbXB0JywgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYWRkU2lnbi5wcmVlbXB0JykgfSxcclxuICAgIF0sXHJcbiAgICBvcmlnaW5NdWx0aUluc3RUeXBlOiAnJyxcclxuICAgIGN1ck11bHRpSW5zdFR5cGU6IE11bHRpSW5zdGFuY2VUeXBlLlBhcmFsbGVsLnRvU3RyaW5nKClcclxuICB9XHJcbiAgLy/liqjmgIHpqbPlm57phY3nva5cclxuICBzaG93QmFja1dhcmRDb25maWcgPSB7XHJcbiAgICB0aXRsZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmFja1dhcmRDb25maWcudGl0bGUnKSxcclxuICAgIGR5bmFtaWNCYWNrV2FyZFJ1bGVBYmxlOiBmYWxzZSxcclxuICAgIGRpc3BsYXlQbGFjZWhvbGRlcjogJycsXHJcbiAgICBzaG93VGlwczogZmFsc2UsXHJcbiAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgYmFja1dhcmRSdWxlczogW3tcclxuICAgICAgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmFja1dhcmRDb25maWcuc2VxdWVuY2UnKSxcclxuICAgICAgdmFsdWU6ICdzZXF1ZW5jZSdcclxuICAgIH0sIHtcclxuICAgICAgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmFja1dhcmRDb25maWcuYmFja1RvTWUnKSxcclxuICAgICAgdmFsdWU6ICdiYWNrVG9NZSdcclxuICAgIH0sIHtcclxuICAgICAgbmFtZTogdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmFja1dhcmRDb25maWcuYmFja1RvQ3VycmVudE5vZGUnKSxcclxuICAgICAgdmFsdWU6ICdiYWNrVG9DdXJyZW50Tm9kZSdcclxuICAgIH1dXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku7vliqHlgqzlip7ml7bkvb/nlKhcclxuICAgKi9cclxuICBzaG93VXJnZU1lc3NhZ2VTdWJqZWN0OiBib29sZWFuID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuWCrOWKnua2iOaBr+S4u+mimO+8iOWCrOWKnuaXtuS9v+eUqO+8iVxyXG4gIHVyZ2VNZXNzYWdlU3ViamVjdDogc3RyaW5nOyAvLyDlgqzlip7mtojmga/kuLvpopjmlofmnKxcclxuICB1cmdlTWVzc2FnZUNvbnRlbnQ6IHN0cmluZzsgLy8g5YKs5Yqe5raI5oGv5YaF5a655paH5pysXHJcbiAgYWRkUmVtaW5kZXI6IGJvb2xlYW47IC8vIOaYr+WQpuaYvuekuuWCrOWKnuS6uua2iOaBr1xyXG4gIHN1YmplY3RFZGl0YWJsZTogYm9vbGVhbjsgLy8g5Li76aKY5Y+v57yW6L6RXHJcbiAgY29udGVudEVkaXRhYmxlOiBib29sZWFuOyAvLyDlhoXlrrnlj6/nvJbovpFcclxuXHJcbiAgd2ZDb250ZXh0ID0gbmV3IFdmQ29udGV4dCgpOy8v5bel5L2c5rWB5LiK5LiL5paHXHJcbiAgZW5hYmxlUHJpb3JpdHk6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuaYvuekuuWvhue6p++8iOWKqOS9nOe6p+WIq++8iVxyXG5cclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgY2xzID0gJyc7XHJcblxyXG4gIFBPU1RfTUVTU0FHRV9UQVJHRVQgPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luO1xyXG4gIHByaXZhdGUgbWVzc2FnZVN1YmplY3Q7XHJcbiAgcHJpdmF0ZSBsYW5ndWFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZUNvZGUnKSB8fCAnemgtQ0hTJzsvL+S4reiLseaWh1xyXG5cclxuICBhY3Rpb25Ub2tlbjogc3RyaW5nOy8vc3ViamVjdOWKqOS9nOazqOWGjHRva2VuXHJcbiAgc2ltdWxhdGVUb2tlbjogc3RyaW5nOy8v6aKE6Kej5p6Q5rOo5YaMdG9rZW5cclxuICBzZWxlY3RlZFByaW9yaXR5OiBudW1iZXI7Ly/ku7vliqHlip7nkIbpgInkuK3lkI7nmoTntKfmgKXnqIvluqZcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBpMThuU2VydmljZTogSTE4blNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGhhbmRsZXJTZXJ2aWNlOiBXZlRhc2tIYW5kbGVyU2VydmljZSxcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLyDlpoLmnpzlrZjlnKjmtojmga/nm5HlkKzvvIzlhYjliKDmjolcclxuICAgIGlmIChUYXNrRXhlY3V0ZUNvbXBvbmVudC5mdW5jKSB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgVGFza0V4ZWN1dGVDb21wb25lbnQuZnVuYywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hZGRNZXNzYWdlTGlzdGVuZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOe7hOS7tumUgOavgeaXtu+8jOWOu+aOiXN1YmplY3Tms6jlhoxcclxuICAgKi9cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmFjdGlvblRva2VuKSB7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdFJlbW92ZSh0aGlzLmFjdGlvblRva2VuKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnNpbXVsYXRlVG9rZW4pIHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0UmVtb3ZlKHRoaXMuc2ltdWxhdGVUb2tlbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0QWxsVXNlckNvbmZpZygpLnN1YnNjcmliZSgoY29uZmlnTGlzdDogVGFza0NlbnRlckNvbmZpZ1tdKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5jb25maWdMaXN0ID0gY29uZmlnTGlzdDtcclxuICAgICAgY29uc3QgY29tbWVudCA9IGNvbmZpZ0xpc3QuZmluZChjID0+IGMuY29uZmlnQ29kZSA9PT0gQ29uZmlnQ29kZS5EZWZhdWx0X0FwcHJvdmFsX0NvbW1lbnQpO1xyXG4gICAgICBjb25zdCBpZl9zdG9yZV9jb21tZW50ID0gY29uZmlnTGlzdC5maW5kKGMgPT4gYy5jb25maWdDb2RlID09PSBDb25maWdDb2RlLklmX1N0b3JlX0NvbW1lbnQpO1xyXG4gICAgICBsZXQgcGFzc0NvbW1lbnQ6IHN0cmluZztcclxuICAgICAgbGV0IGJhY2tDb21tZW50OiBzdHJpbmc7XHJcbiAgICAgIGlmIChjb21tZW50ICYmIGNvbW1lbnQuY3VycmVudFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGFuZ3VhZ2UgPT0gJ3poLUNIUycpIHtcclxuICAgICAgICAgIHBhc3NDb21tZW50ID0gSlNPTi5wYXJzZShjb21tZW50LmN1cnJlbnRWYWx1ZSkucGFzcztcclxuICAgICAgICAgIGJhY2tDb21tZW50ID0gSlNPTi5wYXJzZShjb21tZW50LmN1cnJlbnRWYWx1ZSkuYmFjaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGFzc0NvbW1lbnQgPSBKU09OLnBhcnNlKGNvbW1lbnQuY3VycmVudFZhbHVlKVsncGFzc18nICsgdGhpcy5sYW5ndWFnZV07XHJcbiAgICAgICAgICBiYWNrQ29tbWVudCA9IEpTT04ucGFyc2UoY29tbWVudC5jdXJyZW50VmFsdWUpWydiYWNrXycgKyB0aGlzLmxhbmd1YWdlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgPT09ICdQYXNzJykge1xyXG4gICAgICAgICAgdGhpcy5jb21tZW50ID0gcGFzc0NvbW1lbnQ7XHJcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb21tZW50ID0gcGFzc0NvbW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnQmFjaycpIHtcclxuICAgICAgICAgIHRoaXMuY29tbWVudCA9IGJhY2tDb21tZW50O1xyXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29tbWVudCA9IGJhY2tDb21tZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaWZfc3RvcmVfY29tbWVudCAmJiBpZl9zdG9yZV9jb21tZW50LmN1cnJlbnRWYWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2ZDYWNoZUNvbW1lbnQpIHsvL+W8gOWQr+aaguWtmOaEj+inge+8jOW9k+WIh+aNouWIsOmps+WbnuW5tuS4lFxyXG4gICAgICAgICAgaWYgKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgPT0gJ0JhY2snICYmIHRoaXMud2ZDYWNoZUNvbW1lbnQgPT0gcGFzc0NvbW1lbnQpIHtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWVudCA9IHRoaXMud2ZDYWNoZUNvbW1lbnQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCAoKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAvLyDku47ku7vliqHlip7nkIbnlYzpnaLmiZPlvIDml7bvvIzmiY3ms6jlhozmnI3liqFcclxuICAgIGlmICh0aGlzLm9yaWdpbiA9PT0gQWN0aW9uT3JpZ2luLlRhc2tGb3JtKSB7XHJcbiAgICAgIHRoaXMuaW5pdEZvcm1FdmVudCgpO1xyXG4gICAgICAvLyDojrflj5booajljZXmk43kvZzphY3nva5cclxuICAgICAgdGhpcy50YXNrU2VydmljZS5nZXRUYXNrRm9ybUluZm8odGhpcy53b3JrSXRlbUlkKS5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocmUgJiYgcmUuYmlsbE1ldGhvZENvbmZpZ3MgJiYgcmUuYmlsbE1ldGhvZENvbmZpZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLmJpbGxNZXRob2RDb25maWdzID0gcmUuYmlsbE1ldGhvZENvbmZpZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBVcmdlSGFuZGxlU2ltdWxhdGVDb250ZXh0KCk7XHJcbiAgICBjb250ZXh0LnByb2NJbnN0SWQgPSB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRNZXNzYWdlTGlzdGVuZXIoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZXZlbnRIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICBUYXNrRXhlY3V0ZUNvbXBvbmVudC5mdW5jID0gdGhpcy5ldmVudEhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnm5HlkKzkuovku7blpITnkIZcclxuICAgKi9cclxuICBldmVudEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgIHRoaXMubWVzc2FnZVN1YmplY3QubmV4dChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43lhpnniLbnsbvmlrnms5VcclxuICAgKiBAcGFyYW0gdGFza1xyXG4gICAqL1xyXG4gIHNldFRhc2sodGFzazogVGFza0VudGl0eSkge1xyXG4gICAgaWYgKHRhc2spIHtcclxuICAgICAgdGhpcy50YXNrID0gdGFzaztcclxuICAgICAgdGhpcy53b3JrSXRlbUlkID0gdGFzay5zb3VyY2VJZDtcclxuICAgICAgdGhpcy5wcm9jZXNzSW5zdGFuY2VJZCA9IHRhc2sucHJvY2Vzc0luc3RhbmNlSWQ7XHJcbiAgICAgIHRoaXMud2ZDb250ZXh0LnByb2Nlc3NDYXRlZ29yeUlkID0gdGFzay5jYXRlZ29yeUlkO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkUHJpb3JpdHkgPSB0YXNrLnByaW9yaXR5O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5Yqe55CGIOiuvue9ruS7u+WKoeWIl+ihqFxyXG4gICAqIEBwYXJhbSB0YXNrTGlzdCBcclxuICAgKi9cclxuICBzZXRUYXNrTGlzdCh0YXNrTGlzdDogVGFza0VudGl0eVtdKSB7XHJcbiAgICBpZiAodGFza0xpc3QubGVuZ3RoID4gMjApIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSAyOTA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRhc2tMaXN0ID0gdGFza0xpc3Q7XHJcbiAgICB0aGlzLmJhdGNoU2Vjb25kID0gTWF0aC5jZWlsKHRoaXMudGFza0xpc3QubGVuZ3RoIC8gNik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDph43lhpnniLbnsbvmlrnms5VcclxuICAgKiBAcGFyYW0gYWN0aW9uXHJcbiAgICovXHJcbiAgc2V0QWN0aW9uKGFjdGlvbjogVGFza0FjdGlvbik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBsZXQgc3ViamVjdCA9IG5ldyBTdWJqZWN0PFNpbXVsYXRlU3ViamVjdD4oKTtcclxuICAgIGxldCByZXN1bHQgPSBuZXcgU2ltdWxhdGVTdWJqZWN0KCk7XHJcbiAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuYWN0aW9uRW50aXR5ID0gYWN0aW9uO1xyXG4gICAgICBpZiAodGhpcy50YXNrKSB7Ly8g5Y2V5Liq44CB5om56YeP6YO9c2V0QWN0aW9u77yM5Y2V5Liq5omN5omn6KGM5qih5oufXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltdWxhdGUodGhpcy5hY3Rpb25FbnRpdHkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnRhc2tMaXN0ICYmIHRoaXMudGFza0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hTaW11bGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL+aJuemHj+aXtu+8jOS5n+imgei/lOWbnlxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHN1YmplY3QubmV4dChyZXN1bHQpO1xyXG4gICAgfSwgMTAwKTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YmN5LqL5Lu25Yid5aeL5YyW77yM5bCG5pyN5Yqh5rOo5YaM5Yiwd2luZG935LiK77yM5L6b6KGo5Y2V6LCD55SoXHJcbiAgICog5Lu75Yqh5Yqe55CG55WM6Z2i55qEd2luZG9377yM6KGo5Y2V55qEd2luZG93LnBhcmVudFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdEZvcm1FdmVudCgpIHtcclxuICAgIC8vIOWuoeaJueWJjeS6i+S7tlxyXG4gICAgdGhpcy5hY3Rpb25Ub2tlbiA9IHRoaXMud29ya0l0ZW1JZCArICdhY3Rpb24nO1xyXG4gICAgY29uc3QgYWN0aW9uVG9rZW4gPSB0aGlzLmFjdGlvblRva2VuO1xyXG4gICAgY29uc3Qgc3ViamVjdENvZGUgPSAnRm9ybVN1YmplY3RDb2RlJztcclxuICAgICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZSA9ICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZSB8fCB7fTtcclxuICAgICh3aW5kb3cgYXMgYW55KS5nc3BXZkV2ZW50U2VydmljZS5yZWdpc3RlciA9IChmb3JtT2JqZWN0OiBhbnkpID0+IHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0UmVnaXN0ZXIoc3ViamVjdENvZGUsIGFjdGlvblRva2VuKTtcclxuICAgICAgdGhpcy5pZlJlZ2lzdGVyZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmZvcm1PYmplY3QgPSBmb3JtT2JqZWN0O1xyXG4gICAgfTtcclxuXHJcbiAgICAod2luZG93IGFzIGFueSkuZ3NwV2ZFdmVudFNlcnZpY2Uubm90aWZ5ID0gKHZhbHVlOiBGb3JtRXZlbnRNZXNzYWdlKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmlmUmVnaXN0ZXJlZCkge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdE5vdGlmeShhY3Rpb25Ub2tlbiwgdmFsdWUpO1xyXG4gICAgICB9IGVsc2Ugey8vIOihqOWNleS4jeazqOWGjO+8jOS5n+WPr+ebtOaOpeiwg+eUqG5vdGlmeVxyXG4gICAgICAgIHRoaXMuc2ltdWxhdGVUb2tlbiA9IHRoaXMud29ya0l0ZW1JZCArICdzaW11bGF0ZSc7XHJcbiAgICAgICAgY29uc3Qgc2ltdWxhdGVUb2tlbiA9IHRoaXMuc2ltdWxhdGVUb2tlbjtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN1YmplY3RSZWdpc3RlcihzdWJqZWN0Q29kZSwgc2ltdWxhdGVUb2tlbik7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0UmVzcG9uc2Uoc2ltdWxhdGVUb2tlbiwgJycsICh2YWx1ZTogRm9ybUV2ZW50TWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgdmFsdWUgJiYgdmFsdWUuZGF0YUNoYW5nZWQgJiYgdGhpcy5jb21wbGV0ZVNpbXVsYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0Tm90aWZ5KHNpbXVsYXRlVG9rZW4sIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeCueWHu+aPkOS6pOeahOaXtuWAme+8jOaJp+ihjOihqOWNleeahOWJjeS6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmVmb3JlQ29tcGxldGVTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy5vcmlnaW4gPT0gQWN0aW9uT3JpZ2luLlRhc2tGb3JtKSB7XHJcbiAgICAgIC8vIOiOt+WPluihqOWNleaTjeS9nOmFjee9rlxyXG4gICAgICBjb25zdCBwYXNzUHJlQWN0aW9ucyA9IHRoaXMuYmlsbE1ldGhvZENvbmZpZ3MuZmlsdGVyKGFjdGlvbiA9PiBhY3Rpb24uYWN0aW9uID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlICYmIGFjdGlvbi5leGVjdXRpb25UaW1lID09PSAnUHJlJykuc29ydCgoeCwgeSkgPT4geC5zb3J0T3JkZXIgLSB5LnNvcnRPcmRlcik7XHJcbiAgICAgIC8vIOWmguaenOihqOWNleazqOWGjOS6huS6i+S7tlxyXG4gICAgICBpZiAocGFzc1ByZUFjdGlvbnMgJiYgcGFzc1ByZUFjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnMoWy4uLnBhc3NQcmVBY3Rpb25zXSk7XHJcbiAgICAgIH0gZWxzZSB7Ly8g5rKh5pyJ5a6a5LmJ5YmN5ZCO5LqL5Lu277yM55u05o6l5o+Q5LqkXHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZVN1Ym1pdCgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbXBsZXRlU3VibWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybUFjdGlvbnMg6KGo5Y2V5Lit6KaB5omn6KGM55qE5Yqo5L2cXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBleGVjdXRlRm9ybUFjdGlvbnMoZm9ybUFjdGlvbnM6IEJpbGxNZXRob2RDb25maWdbXSkge1xyXG4gICAgaWYgKGZvcm1BY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdC5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gcmUuZGF0YS5kYXRhO1xyXG4gICAgICAgIGlmIChkYXRhLnJlc3VsdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YUNoYW5nZWQgPT09IHRydWUpIHsvLyDlpoLmnpzpnIDopoHpooTop6PmnpDvvIzlhYjpooTop6PmnpDlho3nu6fnu63miafooYxcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVNpbXVsYXRlKCkuc3Vic2NyaWJlKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHIucmVzdWx0KSB7Ly8g6aKE6Kej5p6Q5q2j56GuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVGb3JtQWN0aW9ucyhmb3JtQWN0aW9ucyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHsvLyDpooTop6PmnpDplJnor69cclxuICAgICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7IC8vIOS7u+WKoeWKnueQhueVjOmdouS4jeWFs+mXrVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Ugey8vIOS4jemcgOimgemihOino+aekO+8jOe7p+e7reaJp+ihjFxyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVGb3JtQWN0aW9ucyhmb3JtQWN0aW9ucyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7IC8vIOS7u+WKoeWKnueQhueVjOmdouS4jeWFs+mXrVxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflrqHmibnliY3ooajljZXmk43kvZzmiafooYzlpLHotKXvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyDmiafooYzooajljZXliqjkvZxcclxuICAgICAgY29uc3QgZm9ybUFjdGlvbiA9IGZvcm1BY3Rpb25zLnNoaWZ0KCk7XHJcbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2UodGhpcy53b3JrSXRlbUlkLCBmb3JtQWN0aW9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29tcGxldGVTdWJtaXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWNleS4quS7u+WKoemihOino+aekFxyXG4gICAqIEBwYXJhbSBhY3Rpb25cclxuICAgKi9cclxuICBwcml2YXRlIHNpbXVsYXRlKGFjdGlvbjogVGFza0FjdGlvbik6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7XHJcbiAgICBzd2l0Y2ggKGFjdGlvbi5jb2RlKSB7XHJcbiAgICAgIGNhc2UgJ0Fzc2lnblVzZXInOiAvLyDmjIfmtL4g5Y2V54us5Y+C5pWwXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzaWduU2ltdWxhdGUoKTtcclxuICAgICAgY2FzZSAnQ2xhaW0nOiAvLyDpoobnlKhcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnVW5jbGFpbSc6IC8vIOWPlua2iOmihueUqFxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgpO1xyXG4gICAgICBjYXNlICdSZXRyaWV2ZSc6IC8vIOWPluWbnlxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgpO1xyXG4gICAgICBjYXNlICdUcmFuc2Zlcic6IC8vIOenu+S6pCDljZXni6zlj4LmlbBcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2ZlclNpbXVsYXRlKCk7XHJcbiAgICAgIGNhc2UgJ0FkZFNpZ24nOiAvLyDliqDnrb5cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRTaWduU2ltdWxhdGUoKTtcclxuICAgICAgY2FzZSAnQWRkU2lnbkZyb250JzogLy8g5b6B6K+iXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkU2lnbkZyb250U2ltdWxhdGUoKTtcclxuICAgICAgY2FzZSAnTm90aWZ5JzogLy/nn6XkvJpcclxuICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTaW11bGF0ZSgpO1xyXG4gICAgICBjYXNlICdSZWZ1c2UnOiAvLyDlkKblhrNcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnT2Jzb2xldGUnOiAvLyDkvZzlup9cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnQ29tbWVudCc6IC8vIOivhOiuulxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgpO1xyXG4gICAgICBjYXNlICdSZWFkVGFzayc6IC8vIOW3sumYhVxyXG4gICAgICAgIHRoaXMuaWZTaG93Q29tbWVudFRvTXlTZWxmID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoMjk1KTtcclxuICAgICAgY2FzZSAnVXJnZUhhbmRsZSc6Ly/lgqzlip5cclxuICAgICAgICByZXR1cm4gdGhpcy51cmdlSGFuZGxlU2ltdWxhdGUoKTtcclxuICAgICAgY2FzZSAnQ2FuY2VsQ29uc3VsdCc6Ly/lj5bmtojlvoHor6JcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgZGVmYXVsdDogLy8g6YCa6L+HIOmps+WbniDph43mlrDmj5DkuqQg5YW25LuW6Ieq5a6a5LmJ55qE5Yqo5L2cXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVTaW11bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WuoeaJuemihOino+aekFxyXG4gICAqIEByZXR1cm5zIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgc3dpdGNoICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlKSB7XHJcbiAgICAgIGNhc2UgXCJSZWFkVGFza1wiOi8v5om56YeP5bey6ZiFXHJcbiAgICAgICAgdGhpcy5pZlNob3dDb21tZW50VG9NeVNlbGYgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgyOTUpO1xyXG4gICAgICBjYXNlIFwiUmV0cmlldmVcIjovL+aJuemHj+WPluWbnlxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgpO1xyXG4gICAgICBjYXNlIFwiVHJhbnNmZXJcIjovL+aJuemHj+enu+S6pFxyXG4gICAgICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdFVzZXJUZXh0ID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5yZWNlaXZlcicpOy8v5o6l5pS25Lq65ZGYXHJcbiAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCh0aGlzLmRpYWxvZ0hlaWdodCArIHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpu5jorqTnmoTpooTop6PmnpDov5Tlm57nu5PmnpzvvIzlj6/mjqfliLblvLnmoYbpq5jluqZcclxuICAgKiBAcGFyYW0gZGlhbG9nSGVpZ2h0IFxyXG4gICAqIEByZXR1cm5zIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZGVmYXVsdFN1YmplY3ROZXh0KGRpYWxvZ0hlaWdodD86IG51bWJlcik6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7XHJcbiAgICBsZXQgc3ViamVjdCA9IG5ldyBTdWJqZWN0PFNpbXVsYXRlU3ViamVjdD4oKTtcclxuICAgIGxldCBzID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgcy5zaG93RGlhbG9nID0gdHJ1ZTtcclxuICAgIHMuZGlhbG9nSGVpZ2h0ID0gZGlhbG9nSGVpZ2h0ID8gZGlhbG9nSGVpZ2h0IDogdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICBzLnJlc3VsdCA9IHRydWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc3ViamVjdC5uZXh0KHMpO1xyXG4gICAgfSwgMTAwKTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog55yf5q2j5Zyw5o+Q5LqkXHJcbiAgICog6YeN5YaZ54i257G75pa55rOVXHJcbiAgICovXHJcbiAgc3VibWl0KCk6IE9ic2VydmFibGU8U3VibWl0UmVzdWx0PiB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUpIHtcclxuICAgICAgY2FzZSAnQXNzaWduVXNlcic6IC8vIOaMh+a0viDljZXni6zlj4LmlbBcclxuICAgICAgICB0aGlzLmFzc2lnblN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdDbGFpbSc6IC8vIOmihueUqFxyXG4gICAgICAgIHRoaXMuY2xhaW1TdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnVW5jbGFpbSc6IC8vIOWPlua2iOmihueUqFxyXG4gICAgICAgIHRoaXMudW5DbGFpbVN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdSZXRyaWV2ZSc6IC8vIOWPluWbnlxyXG4gICAgICAgIHRoaXMucmV0cmlldmVTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnVHJhbnNmZXInOiAvLyDnp7vkuqQg5Y2V54us5Y+C5pWwXHJcbiAgICAgICAgdGhpcy50cmFuc2ZlclN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdBZGRTaWduJzogLy8g5Yqg562+XHJcbiAgICAgICAgdGhpcy5hZGRTaWduU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0FkZFNpZ25Gcm9udCc6IC8vIOW+geivolxyXG4gICAgICAgIHRoaXMuYWRkU2lnbkZyb250U3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0NvbW1lbnQnOiAvLyDor4TorrpcclxuICAgICAgICB0aGlzLmNvbW1lbnRTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnTm90aWZ5JzogLy/nn6XkvJpcclxuICAgICAgICB0aGlzLm5vdGlmeVN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdSZWFkVGFzayc6IC8vIOW3sumYhVxyXG4gICAgICAgIHRoaXMucmVhZFN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdVcmdlSGFuZGxlJzovL+WCrOWKnlxyXG4gICAgICAgIHRoaXMudXJnZUhhbmRsZVN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdDYW5jZWxDb25zdWx0JzovL+WPlua2iOW+geivolxyXG4gICAgICAgIHRoaXMuY2FuY2VsQ29uc3VsdFN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OiAvLyDpgJrov4cg6amz5ZueIOWQpuWGsyDkvZzlup8g6YeN5paw5o+Q5LqkIOWFtuS7luiHquWumuS5ieWKqOS9nFxyXG4gICAgICAgIHRoaXMuYmVmb3JlQ29tcGxldGVTdWJtaXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/lip7nkIbngrnlh7vmj5DkuqRcclxuICAgKiBAcGFyYW0gdGFza3MgXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgYmF0Y2hTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSk6IE9ic2VydmFibGU8U3VibWl0UmVzdWx0PiB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUpIHtcclxuICAgICAgY2FzZSBcIlJlYWRUYXNrXCI6Ly/mibnph4/lt7LpmIVcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFJlYWRUYXNrU3VibWl0KHRhc2tzKTtcclxuICAgICAgY2FzZSBcIlJldHJpZXZlXCI6Ly/mibnph4/lj5blm55cclxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFJldHJpZXZlU3VibWl0KHRhc2tzKTtcclxuICAgICAgY2FzZSBcIkNsYWltXCI6Ly/mibnph4/poobnlKhcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaENsYWltU3VibWl0KHRhc2tzKTtcclxuICAgICAgY2FzZSBcIlVuY2xhaW1cIjovL+aJuemHj+WPlua2iOmihueUqFxyXG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoVW5jbGFpbVN1Ym1pdCh0YXNrcyk7XHJcbiAgICAgIGNhc2UgXCJUcmFuc2ZlclwiOi8v5om56YeP56e75LqkXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hUcmFuc2ZlclN1Ym1pdCh0YXNrcyk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hDb21wbGV0ZVN1Ym1pdCh0YXNrcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiafooYzmibnph4/liY3kuovku7ZcclxuICAgKiBAcGFyYW0gdGFza3Mg5om56YeP5Lu75Yqh5YiX6KGoXHJcbiAgICovXHJcbiAgYmF0Y2hDb21wbGV0ZVN1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIGxldCBmaWx0ZXJOdW0gPSAwO1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICAgIGNvbnN0IHN1Y2Nlc3NTdWJtaXQ6IFN1Ym1pdFJlc3VsdCA9IHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH07XHJcbiAgICBpZiAoKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgPT09ICdCYWNrJyB8fCB0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnUmVmdXNlJykgJiYgIXRoaXMuY29tbWVudCkgey8vIOaJuemHj+aEj+ingeaYr+WQpuW/heWhq+S4jeaUr+aMgeagueaNruWuoeaJuemhuemFjee9ruaTjeS9nO+8jOaJuemHj+mps+WbnuaEj+ingeW/heWhq1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmlucHV0T3BpbmlvbicpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBub0FjdGlvblRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gdC5hY3Rpb25zLmZpbmRJbmRleChhID0+IGEuY29kZSA9PT0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZSkgPT09IC0xKTtcclxuICAgICAgaWYgKG5vQWN0aW9uVGFza3MgJiYgbm9BY3Rpb25UYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhIG9mIG5vQWN0aW9uVGFza3MpIHtcclxuICAgICAgICAgIGZpbHRlck51bSsrO1xyXG4gICAgICAgICAgaWYgKGZpbHRlck51bSA9PT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dChzdWNjZXNzU3VibWl0KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKDAsIGZpbHRlck51bSwgMCwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGxldCBhY3RUYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+IHQuYWN0aW9ucy5zb21lKGEgPT4gYS5jb2RlID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlKSk7XHJcbiAgICAgIGlmIChhY3RUYXNrcyAmJiBhY3RUYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlQmF0Y2hFdmVudChbLi4udGhpcy5hY3Rpb25FbnRpdHkucHJlRXZlbnRzLmZpbHRlcihlID0+IGUuYmF0Y2gpXSwgYWN0VGFza3MsIHRoaXMuYWN0aW9uRW50aXR5LCAocmU6IFRhc2tFdmVudFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlICYmIHJlLnJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmUucGFzc1Rhc2tzKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmFja1Rhc2tzID0gYWN0VGFza3MuZmlsdGVyKHQgPT4gcmUucGFzc1Rhc2tzLmZpbmRJbmRleChpZCA9PiBpZCA9PT0gdC5pZCkgPT09IC0xKTtcclxuICAgICAgICAgICAgICBpZiAoYmFja1Rhc2tzICYmIGJhY2tUYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgYmFja1Rhc2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZpbHRlck51bSsrO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoc3VjY2Vzc1N1Ym1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKDAsIGZpbHRlck51bSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYWN0VGFza3MgPSBhY3RUYXNrcy5maWx0ZXIodCA9PiByZS5wYXNzVGFza3MuZmluZEluZGV4KGlkID0+IGlkID09PSB0LmlkKSA+IC0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWN0VGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCA9IG5ldyBCYXRjaFZlcmlmeVNpZ25lZENvbnRleHQoKTtcclxuICAgICAgICAgICAgICB0aGlzLmJhdGNoVmVyaWZ5U3VibWl0KGFjdFRhc2tzLCBmaWx0ZXJOdW0sIGJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCkuc3Vic2NyaWJlKChyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyICYmIHIuc3VjY2Vzc1N1Ym1pdCAmJiByLnN1Y2Nlc3NTdWJtaXQucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUJhdGNoRXZlbnQoWy4uLnRoaXMuYWN0aW9uRW50aXR5LnBvc3RFdmVudHMuZmlsdGVyKGUgPT4gZS5iYXRjaCldLCByLnN1Y2Nlc3NIYW5kbGVUYXNrcywgdGhpcy5hY3Rpb25FbnRpdHksICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoci5zdWNjZXNzU3VibWl0KTtcclxuICAgICAgICAgICAgICAgICAgfSwgeyByZXN1bHQ6IHRydWUsIHBhc3NUYXNrczogci5zdWNjZXNzSGFuZGxlVGFza3MubWFwKHQgPT4gdC5pZCkgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHsgcmVzdWx0OiB0cnVlLCBwYXNzVGFza3M6IGFjdFRhc2tzLm1hcCh0ID0+IHQuaWQpIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+aVsOWtl+etvuWQjVxyXG4gICAqIEBwYXJhbSB0YXNrcyBcclxuICAgKiBAcGFyYW0gZmlsdGVyTnVtIFxyXG4gICAqIEBwYXJhbSBiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQgXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaFZlcmlmeVN1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdLCBmaWx0ZXJOdW06IG51bWJlciA9IDAsIGJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dDogQmF0Y2hWZXJpZnlTaWduZWRDb250ZXh0KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgY29uc3QgdmVyaWZ5VGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB7XHJcbiAgICAgIGNvbnN0IGFjdGlvbiA9IHQuYWN0aW9ucy5maW5kKGEgPT4gYS5jb2RlID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlKTtcclxuICAgICAgaWYgKCFhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGFjdGlvbi5wYXJhbWV0ZXJzLnNvbWUocCA9PiBwLmNvZGUgPT09ICdDZXJ0aWZpY2F0aW9uTmVjZXNzYXJ5JyAmJiBwLnZhbHVlID09PSAndHJ1ZScpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB2ZXJpZnlUYXNrc051bSA9IHZlcmlmeVRhc2tzLmxlbmd0aDtcclxuICAgIGlmICh2ZXJpZnlUYXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UgJiZcclxuICAgICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGZcclxuICAgICAgKSB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmNhRXZlbnQub24oXHJcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuY2FFdmVudC5zaWduZWRNc2dPdmVyVG9rZW4oKSxcclxuICAgICAgICAgICdzaWduZWRNc2dPdmVyJyxcclxuICAgICAgICAgIGZ1bmN0aW9uIHNpZ25Nc2dPdmVyKHNpZ25lZERhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHNpZ25lZERhdGEgJiYgc2lnbmVkRGF0YVswXSA9PT0gJ3RydWUnICYmIHNpZ25lZERhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIC8vIOivgeS5puWvueixoVxyXG4gICAgICAgICAgICAgIGNvbnN0IGNlcnQgPSBnc3BDQS5nZXRDdXJDZXJ0KCk7XHJcbiAgICAgICAgICAgICAgLy8g6aqM562+5Y+C5pWwXHJcbiAgICAgICAgICAgICAgdGhhdC52ZXJpZnlTaWduZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAvLyDopoHpqozor4HnmoTor4HkuaZiYXNlNjTnvJbnoIHnmoTlrZfnrKbmtYEoY2VydGtleSlcclxuICAgICAgICAgICAgICAgIGNlcnRCYXNlNjRJbmZvOiBnc3BDQS5nZXRDZXJ0QmFzZTY0KGNlcnQpLFxyXG4gICAgICAgICAgICAgICAgLy8g562+5ZCN5Y6f5L+h5oGvXHJcbiAgICAgICAgICAgICAgICBtc2c6IFsnQmF0Y2hEaWdpdGFsU2lnbmF0dXJlJ10sXHJcbiAgICAgICAgICAgICAgICAvLyDopoHnrb7lkI3lkI7kv6Hmga9cclxuICAgICAgICAgICAgICAgIHNpZ25lZG1zZzogc2lnbmVkRGF0YVsxXVswXSxcclxuICAgICAgICAgICAgICAgIC8vIOeUqOaIt+S9v+eUqOWcuuaZr++8jOebruWJjeacquS9v+eUqO+8jOWPr+S7peS4uuepulxyXG4gICAgICAgICAgICAgICAgdXNlQ2FzZTogbnVsbCxcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dC52ZXJpZnlTaWduZWQgPSB0aGF0LnZlcmlmeVNpZ25lZDtcclxuICAgICAgICAgICAgICB0aGF0LnRhc2tTZXJ2aWNlLmJhdGNoVmVyaWZ5U2lnbmVkKGJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmeVRhc2tzTnVtID0gMDtcclxuICAgICAgICAgICAgICAgIHRoYXQuYmF0Y2hDb21wbGV0ZSh0YXNrcywgZmlsdGVyTnVtLCB2ZXJpZnlUYXNrc051bSkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJUYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+IHZlcmlmeVRhc2tzLmZpbmRJbmRleCh0YXNrID0+IHRhc2suaWQgPT09IHQuaWQpID09PSAtMSk7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmJhdGNoQ29tcGxldGUob3RoZXJUYXNrcywgZmlsdGVyTnVtLCB2ZXJpZnlUYXNrc051bSkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoYXQubm90aWZ5LmVycm9yKHNpZ25lZERhdGFbMV0pO1xyXG4gICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQ6IHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSwgc3VjY2Vzc0hhbmRsZVRhc2tzOiBuZXcgQXJyYXkoKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbXNnID0gWydCYXRjaERpZ2l0YWxTaWduYXR1cmUnXTtcclxuICAgICAgZ3NwQ0EuZ2V0U2lnbmVkTXNnKG1zZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJhdGNoQ29tcGxldGUodGFza3MsIGZpbHRlck51bSwgdmVyaWZ5VGFza3NOdW0pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgc3ViamVjdC5uZXh0KHJlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOecn+ato+eahOaJuemHj+aPkOS6pOS7u+WKoVxyXG4gICAqIEBwYXJhbSB0YXNrcyBcclxuICAgKiBAcGFyYW0gZmlsdGVyTnVtIFxyXG4gICAqIEBwYXJhbSB2ZXJpZnlUYXNrc051bSBcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwcml2YXRlIGJhdGNoQ29tcGxldGUodGFza3M6IFRhc2tFbnRpdHlbXSwgZmlsdGVyTnVtOiBudW1iZXIgPSAwLCB2ZXJpZnlUYXNrc051bTogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICBsZXQgc3VjY2Vzc051bSA9IDA7XHJcbiAgICBsZXQgZmFpbGVkTnVtID0gMDtcclxuICAgIGxldCBlcnJvck51bSA9IDA7XHJcbiAgICBjb25zdCBzdWNjZXNzU3VibWl0OiBTdWJtaXRSZXN1bHQgPSB7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9O1xyXG4gICAgY29uc3Qgc3VjY2Vzc0hhbmRsZVRhc2tzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQ29tcGxldGVDb250ZXh0KCk7XHJcbiAgICAgIGNvbnRleHQud29ya0l0ZW1JZCA9IHRhc2suc291cmNlSWQ7XHJcbiAgICAgIGNvbnRleHQuY29uY2x1c2lvblZhbHVlID0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZTtcclxuICAgICAgY29udGV4dC5jb21tZW50ID0gdGhpcy5jb21tZW50O1xyXG4gICAgICBjb250ZXh0LmFkZGVuZHVtID0gdGhpcy5hZGRlbmR1bTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZVNpbXVsYXRlKGNvbnRleHQpLnN1YnNjcmliZSgocmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubmVlZEludGVyYWN0aW9uID09PSB0cnVlKSB7Ly8g6ZyA6KaB5Lqk5LqSXHJcbiAgICAgICAgICBmYWlsZWROdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZmFpbGVkTnVtICsgZXJyb3JOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIGZhaWxlZE51bSArIGZpbHRlck51bSwgZXJyb3JOdW0sIHZlcmlmeVRhc2tzTnVtKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Ugey8vIOS4jemcgOimgeS6pOS6klxyXG4gICAgICAgICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZShjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4gey8vIOaJp+ihjOaIkOWKn1xyXG4gICAgICAgICAgICBzdWNjZXNzTnVtKys7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVUYXNrcy5wdXNoKHRhc2spO1xyXG4gICAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGZhaWxlZE51bSArIGVycm9yTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgc3VjY2Vzc1N1Ym1pdCwgc3VjY2Vzc0hhbmRsZVRhc2tzIH0pO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCBmYWlsZWROdW0gKyBmaWx0ZXJOdW0sIGVycm9yTnVtLCB2ZXJpZnlUYXNrc051bSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sICgpID0+IHsvLyDmiafooYzmiqXplJlcclxuICAgICAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBmYWlsZWROdW0gKyBlcnJvck51bSA9PT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgZmFpbGVkTnVtICsgZmlsdGVyTnVtLCBlcnJvck51bSwgdmVyaWZ5VGFza3NOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sICgpID0+IHsvLyDku7vliqHmqKHmi5/or7fmsYLmiqXplJlcclxuICAgICAgICBlcnJvck51bSsrO1xyXG4gICAgICAgIGlmIChzdWNjZXNzTnVtICsgZmFpbGVkTnVtICsgZXJyb3JOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgc3ViamVjdC5uZXh0KHsgc3VjY2Vzc1N1Ym1pdCwgc3VjY2Vzc0hhbmRsZVRhc2tzIH0pO1xyXG4gICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIGZhaWxlZE51bSArIGZpbHRlck51bSwgZXJyb3JOdW0sIHZlcmlmeVRhc2tzTnVtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/lt7LpmIVcclxuICAgKiBAcGFyYW0gdGFza3MgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaFJlYWRUYXNrU3VibWl0KHRhc2tzOiBUYXNrRW50aXR5W10pOiBPYnNlcnZhYmxlPFN1Ym1pdFJlc3VsdD4ge1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHN1Y2Nlc3NOdW0gPSAwO1xyXG4gICAgICBsZXQgZXJyb3JOdW0gPSAwO1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgbGV0IGNvbnRleHQ6IFdvcmtJdGVtRXhlY3V0ZVBhcmFtID0ge1xyXG4gICAgICAgICAgd29ya0l0ZW1JZDogdGFzay5zb3VyY2VJZCxcclxuICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnJlYWRUYXNrKGNvbnRleHQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICBzdWNjZXNzTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICBlcnJvck51bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5Y+W5ZueXHJcbiAgICogQHBhcmFtIHRhc2tzIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hSZXRyaWV2ZVN1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBzdWNjZXNzTnVtID0gMDtcclxuICAgICAgbGV0IGVycm9yTnVtID0gMDtcclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgIGxldCBjb250ZXh0OiBXb3JrSXRlbUV4ZWN1dGVQYXJhbSA9IHtcclxuICAgICAgICAgIHdvcmtJdGVtSWQ6IHRhc2suc291cmNlSWQsXHJcbiAgICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5yZXRyaWV2ZShjb250ZXh0KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgc3VjY2Vzc051bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP6aKG55SoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaENsYWltU3VibWl0KHRhc2tzOiBUYXNrRW50aXR5W10pIHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBzdWNjZXNzTnVtID0gMDtcclxuICAgICAgbGV0IGVycm9yTnVtID0gMDtcclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuY2xhaW0odGFzay5zb3VyY2VJZCwgdGhpcy5jb21tZW50KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgc3VjY2Vzc051bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5Y+W5raI6aKG55SoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaFVuY2xhaW1TdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSkge1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHN1Y2Nlc3NOdW0gPSAwO1xyXG4gICAgICBsZXQgZXJyb3JOdW0gPSAwO1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS51bkNsYWltKHRhc2suc291cmNlSWQsIHRoaXMuY29tbWVudCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgIHN1Y2Nlc3NOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgIGVycm9yTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+enu+S6pFxyXG4gICAqIEBwYXJhbSB0YXNrcyDmibnph4/ku7vliqHliJfooahcclxuICAgKi9cclxuICBwcml2YXRlIGJhdGNoVHJhbnNmZXJTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxTdWJtaXRSZXN1bHQ+KG51bGwpO1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRVc2Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJykgKyB0aGlzLnNlbGVjdFVzZXJUZXh0KTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgc3VjY2Vzc051bSA9IDA7XHJcbiAgICAgIGxldCBlcnJvck51bSA9IDA7XHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgd29ya0l0ZW1JZDogdGFzay5zb3VyY2VJZCxcclxuICAgICAgICAgIGFzc2lnbmVlOiB0aGlzLnNlbGVjdGVkVXNlcnNbMF0sXHJcbiAgICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UudHJhbnNmZXIoY29udGV4dCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgIHN1Y2Nlc3NOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgIGVycm9yTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/mj5DkuqTmj5DnpLrkv6Hmga9cclxuICAgKiBAcGFyYW0gc3VjY2Vzc051bSDmiJDlip/mnaHmlbBcclxuICAgKiBAcGFyYW0gZmFpbGVkTnVtIOmcgOimgeS6pOS6kueahOadoeaVsFxyXG4gICAqIEBwYXJhbSBlcnJvck51bSDmiafooYzmiqXplJnnmoTmnaHmlbBcclxuICAgKiBAcGFyYW0gdmVyaWZ5VGFza3NOdW0g6ZyA6KaB5pWw5a2X562+5ZCN55qE5p2h5pWwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW06IG51bWJlciwgZmFpbGVkTnVtOiBudW1iZXIsIGVycm9yTnVtOiBudW1iZXIsIHZlcmlmeVRhc2tzTnVtOiBudW1iZXIpIHtcclxuICAgIGxldCBtZXNzYWdlID0gJyc7XHJcbiAgICBpZiAoc3VjY2Vzc051bSAmJiAhZmFpbGVkTnVtICYmICFlcnJvck51bSAmJiAhdmVyaWZ5VGFza3NOdW0pIHsvLyDmibnph4/lhajpg6jmiJDlip9cclxuICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICB9IGVsc2Ugey8vIOmdnuWFqOmDqOaIkOWKn1xyXG4gICAgICBzdWNjZXNzTnVtICYmIChtZXNzYWdlICs9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnN1Y2Nlc3MnKSArIGDjgJAke3N1Y2Nlc3NOdW1944CRYCArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnJvdycpKTtcclxuICAgICAgZXJyb3JOdW0gJiYgKG1lc3NhZ2UgKz0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQuZXJyb3InKSArIGDjgJAke2Vycm9yTnVtfeOAkWAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5yb3cnKSk7XHJcbiAgICAgIGZhaWxlZE51bSAmJiAobWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5mYWlsZWQnKSArIGDjgJAke2ZhaWxlZE51bX3jgJFgICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQucm93JykpO1xyXG4gICAgICB2ZXJpZnlUYXNrc051bSAmJiAobWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC52YWxpZGF0aW9uRmFpbGVkJykgKyBg44CQJHt2ZXJpZnlUYXNrc051bX3jgJFgICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQucm93JykpO1xyXG4gICAgICBtZXNzYWdlICs9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnNpbmdsZScpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2Uuc2hvdygnd2FybmluZycsIG1lc3NhZ2UsIHsgc2FmZUh0bWw6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleGVjdXRlQmF0Y2hFdmVudChldmVudHM6IEFjdGlvbkV2ZW50W10sIGVudGl0aWVzOiBBcnJheTxUYXNrRW50aXR5PiwgYWN0aW9uOiBUYXNrQWN0aW9uLCBoYW5kbGVyOiBhbnksIHJlc3VsdD86IFRhc2tFdmVudFJlc3VsdCkge1xyXG4gICAgaWYgKHRoaXMuaW5qZWN0b3IpIHtcclxuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMubGVuZ3RoID4gMCAmJiBlbnRpdGllcyAmJiBlbnRpdGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudHMuc2hpZnQoKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBldmVudC5ldmVudEltcGwuc3BsaXQoJyMnKVswXTtcclxuICAgICAgICBjb25zdCBmdW5jID0gZXZlbnQuZXZlbnRJbXBsLnNwbGl0KCcjJylbMV07XHJcbiAgICAgICAgU3lzdGVtLmltcG9ydCh1cmwgKyAnP3Y9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAudGhlbigobW9kdWxlRmFjdG9yaWVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlRmFjdG9yeTogYW55ID0gT2JqZWN0LnZhbHVlcyhtb2R1bGVGYWN0b3JpZXMpWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGVSZWYgPSBtb2R1bGVGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dDogVGFza0V2ZW50Q29udGV4dCA9IHtcclxuICAgICAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgdGFza0xpc3Q6IGVudGl0aWVzLFxyXG4gICAgICAgICAgICAgIG9yaWdpbjogJ1Rhc2tDZW50ZXInLFxyXG4gICAgICAgICAgICAgIHByZUV2ZW50UmVzdWx0OiByZXN1bHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbW9kdWxlUmVmLmluc3RhbmNlW2Z1bmNdLmFwcGx5KG1vZHVsZVJlZi5pbnN0YW5jZSwgW2NvbnRleHRdKS5zdWJzY3JpYmUoKHJlOiBUYXNrRXZlbnRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICBpZiAocmUgJiYgcmUucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVCYXRjaEV2ZW50KGV2ZW50cywgZW50aXRpZXMsIGFjdGlvbiwgaGFuZGxlciwgcmUpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyKHJlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGFuZGxlcihyZXN1bHQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kbGVyKHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzc2lnblNpbXVsYXRlKCk6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7XHJcbiAgICBsZXQgc3ViamVjdCA9IG5ldyBTdWJqZWN0PFNpbXVsYXRlU3ViamVjdD4oKTtcclxuICAgIGxldCBzaW11bGF0ZVN1YmplY3QgPSBuZXcgU2ltdWxhdGVTdWJqZWN0KCk7XHJcbiAgICB0aGlzLmlmQXNzaWduVXNlciA9IHRydWU7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLmVuYWJsZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRhc2sucHJpb3JpdHkpIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRBc3NpZ25lZUluZm8odGhpcy53b3JrSXRlbUlkKS5zdWJzY3JpYmUoKGluZm86IEZsb3dOb2RlSW5mbykgPT4ge1xyXG4gICAgICB0aGlzLmFzc2lnbkluZm9zID0gW3tcclxuICAgICAgICBzZWxlY3RlZEFzc2lnbmVlczogaW5mby5zZWxlY3RlZEFzc2lnbmVlcyxcclxuICAgICAgICBhc3NpZ25lZUluZm86IGluZm8uYXNzaWduZWVJbmZvLFxyXG4gICAgICAgIGFzc2lnbmVlczogaW5mby5zZWxlY3RlZEFzc2lnbmVlcy5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfTsgfSksXHJcbiAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogaW5mby5hY3Rpdml0eURlZmluaXRpb25OYW1lLFxyXG4gICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiBpbmZvLmFjdGl2aXR5RGVmaW5pdGlvbklkLFxyXG4gICAgICAgIGRlcGVuZGVuY3k6IGluZm8uZGVwZW5kZW5jeSxcclxuICAgICAgICBhbm9ueW1vdXM6IGluZm8uYW5vbnltb3VzLFxyXG4gICAgICAgIGFub255bW91c1RleHQ6IGluZm8uYW5vbnltb3VzVGV4dCxcclxuICAgICAgICByZXNvbHZlZDogaW5mby5yZXNvbHZlZCxcclxuICAgICAgfV07XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5kaWFsb2dIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodDtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IHRydWU7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5zaG93RGlhbG9nID0gdHJ1ZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IGZhbHNlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmFuc2ZlclNpbXVsYXRlKCk6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7Ly8g56e75LqkXHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IHRydWU7XHJcbiAgICB0aGlzLnNlbGVjdFVzZXJUZXh0ID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5yZWNlaXZlcicpOy8v5o6l5pS25Lq65ZGYXHJcbiAgICB0aGlzLnNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLmVuYWJsZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRhc2sucHJpb3JpdHkpIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTtcclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNpZ25Gcm9udFNpbXVsYXRlKCk6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7Ly8g5b6B6K+iXHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IHRydWU7XHJcbiAgICB0aGlzLnNlbGVjdFVzZXJUZXh0ID0gdGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucGVyc29uJyk7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLmVuYWJsZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRhc2sucHJpb3JpdHkpIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTtcclxuXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNpZ25TaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4gey8vIOWKoOetvlxyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgc2ltdWxhdGVTdWJqZWN0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnBlcnNvbicpO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlICogMjtcclxuICAgIHRoaXMuZW5hYmxlUHJpb3JpdHkgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMudGFzay5wcmlvcml0eSkge1xyXG4gICAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldEFkaG9jQ29uZmlnKHRoaXMud29ya0l0ZW1JZCkuc3Vic2NyaWJlKChyZXNwb25zZTogQWRkU2lnblNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLmFkZFNpZ24uc2hvd1NpZ25Ub1NpZ24gPSByZXNwb25zZS5zaG93U2lnblRvU2lnbjtcclxuICAgICAgdGhpcy5hZGRTaWduLm9yaWdpbk11bHRpSW5zdFR5cGUgPSByZXNwb25zZS5tdWx0aUluc3RhbmNlVHlwZTtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9yZ2FuaXphdGlvbikge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLm9yZ0lkID0gcmVzcG9uc2Uub3JnYW5pemF0aW9uLmlkO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSByZXNwb25zZS5vcmdhbml6YXRpb24uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICB9XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5kaWFsb2dIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodDtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSB0cnVlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QucmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5zaG93RGlhbG9nID0gZmFsc2U7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vdGlmeVNpbXVsYXRlKCk6IE9ic2VydmFibGU8U2ltdWxhdGVTdWJqZWN0PiB7Ly/nn6XkvJpcclxuICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgIHRoaXMuc2VsZWN0VXNlclRleHQgPSB0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gZmFsc2U7XHJcbiAgICB0aGlzLmVuYWJsZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRhc2sucHJpb3JpdHkpIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTtcclxuICB9XHJcblxyXG4gIC8v6aKE6Kej5p6Q57uE57uH44CB5YCZ6YCJ5Lq66IyD5Zu0XHJcbiAgcHJpdmF0ZSBnZXRPcmdhbml6YXRpb25TY29wZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgc2ltdWxhdGVTdWJqZWN0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRPcmdhbml6YXRpb25TY29wZSh0aGlzLndvcmtJdGVtSWQsIHRoaXMuYWN0aW9uRW50aXR5LmNvZGUpLnN1YnNjcmliZSgob3JnTGlzdDogT3JnYW5pemF0aW9uU2NvcGVbXSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIGlmIChvcmdMaXN0Lmxlbmd0aCkgey8vIOWFqOWRmOS8mui/lOWbnuepuuaVsOe7hFxyXG4gICAgICAgIHRoaXMuZmlsdGVyLm9yZ0lkID0gb3JnTGlzdFswXS5pZDtcclxuICAgICAgICB0aGlzLmZpbHRlci53aXRoQWxsT3JnID0gb3JnTGlzdFswXS5pbmNsdWRlQ2hpbGRyZW47XHJcbiAgICAgIH1cclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LmRpYWxvZ0hlaWdodCA9IHRoaXMuZGlhbG9nSGVpZ2h0O1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IHRydWU7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSB0cnVlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgqzlip7mqKHmi59cclxuICAgKi9cclxuICBwcml2YXRlIHVyZ2VIYW5kbGVTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgc2ltdWxhdGVTdWJqZWN0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5pZlNlbGVjdE5vZGUgPSBmYWxzZTtcclxuICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmQXNzaWduVXNlciA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZlVyZ2VUeXBlID0gdHJ1ZTtcclxuICAgIHRoaXMuY29tbWVudFBsYWNlSG9sZGVyID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay51cmdlQ29tbWVudCcpO1xyXG4gICAgdGhpcy5zaG93Q29tbW9uQ29tbWVudCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93QXR0YWNobWVudCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93VXJnZU1lc3NhZ2VTdWJqZWN0ID0gdHJ1ZTtcclxuICAgIHRoaXMuc2hvd1NpZ24gPSBmYWxzZTtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSAqIDI7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBVcmdlSGFuZGxlU2ltdWxhdGVDb250ZXh0KCk7XHJcbiAgICBjb250ZXh0LnByb2NJbnN0SWQgPSB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS51cmdlSGFuZGxlU2ltdWxhdGUoY29udGV4dCkuc3Vic2NyaWJlKChyZTogVXJnZUhhbmRsZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy51cmdlSGFuZGxlUmVzcG9uc2UgPSByZTtcclxuICAgICAgaWYgKHJlICYmIHJlLnVyZ2VVc2VycyAmJiByZS51cmdlVXNlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy51cmdlTWVzc2FnZVN1YmplY3QgPSByZS51cmdlVXNlcnNbMF0udXJnZUluZm9zWzBdLnVyZ2VNZXNzYWdlU3ViamVjdDtcclxuICAgICAgICB0aGlzLnVyZ2VNZXNzYWdlQ29udGVudCA9IHJlLnVyZ2VVc2Vyc1swXS51cmdlSW5mb3NbMF0udXJnZU1lc3NhZ2VDb250ZW50O1xyXG4gICAgICAgIHRoaXMuc3ViamVjdEVkaXRhYmxlID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS5zdWJqZWN0RWRpdGFibGU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWRpdGFibGUgPSByZS51cmdlVXNlcnNbMF0udXJnZUluZm9zWzBdLmNvbnRlbnRFZGl0YWJsZTtcclxuICAgICAgICB0aGlzLmFkZFJlbWluZGVyID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS5hZGRSZW1pbmRlcjtcclxuICAgICAgICBsZXQgdXJnZVVzZXJzID0gcmUudXJnZVVzZXJzO1xyXG4gICAgICAgIGxldCBhc3NpZ25JbmZvID0gbmV3IEFzc2lnbmVlSW5mbygpO1xyXG4gICAgICAgIHVyZ2VVc2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgaWYgKHVzZXIuYW5vbnltb3VzVGV4dCkge1xyXG4gICAgICAgICAgICB1c2VyLm5hbWUgPSB1c2VyLmFub255bW91c1RleHQ7XHJcbiAgICAgICAgICAgIHVzZXIuY29kZSA9ICcnO1xyXG4gICAgICAgICAgICB1c2VyLm9yZ05hbWUgPSAnJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGFzc2lnbkluZm8uYXNzaWduZWVVc2VycyA9IHVyZ2VVc2VycztcclxuICAgICAgICBhc3NpZ25JbmZvLnNlbGVjdEFzc2lnbmVlID0gdXJnZVVzZXJzLmxlbmd0aCA+IDEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgYXNzaWduSW5mby5tdWx0aVNlbGVjdCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25JbmZvc1swXS5hc3NpZ25lZUluZm8gPSBhc3NpZ25JbmZvO1xyXG4gICAgICAgIHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVzID0gdXJnZVVzZXJzLmxlbmd0aCA9PSAxID8gdXJnZVVzZXJzIDogW107XHJcbiAgICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VyZ2VVc2VycycpKTtcclxuICAgICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5kaWFsb2dIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodDtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IHRydWU7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IGZhbHNlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QucmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSlcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmihOino+aekFxyXG4gICAqIOmAmui/h+OAgemps+WbnuOAgemHjeaWsOaPkOS6pOOAgeWFtuS7luiHquWumuS5ieWKqOS9nFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY29tcGxldGVTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PFNpbXVsYXRlU3ViamVjdD4oKTtcclxuICAgIGxldCBzaW11bGF0ZVN1YmplY3QgPSBuZXcgU2ltdWxhdGVTdWJqZWN0KCk7XHJcbiAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycyAmJiB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmxlbmd0aCkgey8vIOaYr+WQpuWFgeiuuOWKoOetvlxyXG4gICAgICB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmZvckVhY2goKHApID0+IHtcclxuICAgICAgICBpZiAocC5jb2RlID09PSAnQWRkU2lnbkJlaGluZEFibGUnICYmIHAudmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suYWRkU2lnbicpICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgICAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgICAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgICAgIC8v6I635Y+W5Yqg562+6IyD5Zu0XHJcbiAgICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldE9yZ2FuaXphdGlvblNjb3BlKHRoaXMud29ya0l0ZW1JZCwgJ0FkZFNpZ25CZWhpbmQnKS5zdWJzY3JpYmUoKG9yZ0xpc3Q6IE9yZ2FuaXphdGlvblNjb3BlW10pID0+IHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBpZiAob3JnTGlzdC5sZW5ndGgpIHsvLyDlhajlkZjkvJrov5Tlm57nqbrmlbDnu4RcclxuICAgICAgICAgICAgICB0aGlzLmZpbHRlci5vcmdJZCA9IG9yZ0xpc3RbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXIud2l0aEFsbE9yZyA9IG9yZ0xpc3RbMF0uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy/pqbPlm57oioLngrnmoIfnrb7lkI3np7BcclxuICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnQmFjaycpIHtcclxuICAgICAgdGhpcy5zZWxlY3ROb2RlVGV4dCA9IHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmJhY2tOb2RlVGV4dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQ29tcGxldGVDb250ZXh0KCk7XHJcbiAgICBjb250ZXh0LndvcmtJdGVtSWQgPSB0aGlzLndvcmtJdGVtSWQ7XHJcbiAgICBjb250ZXh0LmNvbmNsdXNpb25WYWx1ZSA9IHRoaXMuYWN0aW9uRW50aXR5LmNvZGU7XHJcblxyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZVNpbXVsYXRlKGNvbnRleHQpLnN1YnNjcmliZSgocmVzcG9uc2U6IFNpbXVsYXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLmNsZWFyU2ltdWxhdGVSZXN1bHQoKTtcclxuICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgICBpZiAodGhpcy50YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVQcmlvcml0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2VsZWN0VGFyZ2V0QWJsZSA9IHJlc3BvbnNlLnNlbGVjdFRhcmdldEFibGU7XHJcbiAgICAgIGlmIChyZXNwb25zZS5keW5hbWljQmFja1dhcmRSdWxlQ29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5zaG93QmFja1dhcmRDb25maWcuZHluYW1pY0JhY2tXYXJkUnVsZUFibGUgPSByZXNwb25zZS5keW5hbWljQmFja1dhcmRSdWxlQ29uZmlnLmR5bmFtaWNCYWNrV2FyZFJ1bGVBYmxlO1xyXG4gICAgICAgIHRoaXMuc2hvd0JhY2tXYXJkQ29uZmlnLmRpc3BsYXlQbGFjZWhvbGRlciA9IHJlc3BvbnNlLmR5bmFtaWNCYWNrV2FyZFJ1bGVDb25maWcucmVzdWJtaXRFZmZlY3Q7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFyZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubGVuZ3RoKSB7Ly8g5qih5ouf6L+U5Zue6Lev5b6E5Li656m65pe2XHJcbiAgICAgICAgdGhpcy5pZlNlbGVjdE5vZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlmQXNzaWduVXNlciA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2Ugey8vIOaooeaLn+i/lOWbnuS6hui3r+W+hFxyXG4gICAgICAgIHRoaXMuaWZTZWxlY3ROb2RlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlmQXNzaWduVXNlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlICogMjtcclxuICAgICAgICB0aGlzLmRlc3ROb2RlcyA9IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRocyAmJiByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubWFwKHBhdGggPT4gKHtcclxuICAgICAgICAgIGlkOiBwYXRoLm5vZGVJbmZvTGlzdC5tYXAobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbklkKS5qb2luKCfvvIwnKSxcclxuICAgICAgICAgIG5hbWU6IHBhdGgubm9kZUluZm9MaXN0Lm1hcChub2RlID0+IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uTmFtZSkuam9pbign77yMJylcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8g5aSE55CG6buY6K6k5YiG5pSv77yM5peg6buY6K6k5YiG5pSv6L+U5ZueLTFcclxuICAgICAgICBsZXQgZGVmYXVsdEluZGV4ID0gcmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzLmZpbmRJbmRleChhID0+IGEuZGVmYXVsdCk7XHJcbiAgICAgICAgLy/msqHmnInpu5jorqTliIbmlK/vvIzkuJTkuI3lhYHorrjpgInmi6nnm67moIfoioLngrnml7bvvIzlj5blhbbkuK3kuIDkuKpub2Rl5bGV56S677yI5a2Q5rWB56iL5Y+C5LiO6ICF5Li656m65oOF5Ya1562J77yJXHJcbiAgICAgICAgaWYgKGRlZmF1bHRJbmRleCA8IDAgJiYgIXJlc3BvbnNlLnNlbGVjdFRhcmdldEFibGUpIHtcclxuICAgICAgICAgIGRlZmF1bHRJbmRleCA9IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5maW5kSW5kZXgoYSA9PiBhLm5vZGVJbmZvTGlzdCAmJiBhLm5vZGVJbmZvTGlzdC5sZW5ndGggPiAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlZmF1bHRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gdGhpcy5kZXN0Tm9kZXNbZGVmYXVsdEluZGV4XS5pZDtcclxuICAgICAgICAgIHRoaXMubm9kZURlZmF1bHRWYWx1ZSA9IHRoaXMuZGVzdE5vZGVzW2RlZmF1bHRJbmRleF0ubmFtZS5pbmRleE9mKCfvvIwnKSA+IC0xID8gcmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzW2RlZmF1bHRJbmRleF0ubmFtZSA6IHRoaXMuZGVzdE5vZGVzW2RlZmF1bHRJbmRleF0ubmFtZTtcclxuICAgICAgICAgIHRoaXMuc2V0QXNzaWduSW5mbyhyZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGVmYXVsdEluZGV4XS5ub2RlSW5mb0xpc3QpO1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkZWZhdWx0SW5kZXhdLmlkLnN0YXJ0c1dpdGgoJ0VuZEV2ZW50JykpIHsvL+S4i+S4gOeOr+iKguS4uue7k+adn+aXtu+8jOS4jeaYvuekuuWKnueQhuS6uuWRmO+8jOW8ueahhumrmOW6pue8qeWwj1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IDM0MDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/orr7nva7lhbbku5boioLngrnpgInkurpcclxuICAgICAgdGhpcy5zZXRPdGhlckFzc2lnbkluZm8ocmVzcG9uc2UpO1xyXG5cclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSB0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5keW5hbWljQmFja1dhcmRSdWxlQWJsZSA/IHRoaXMuZGlhbG9nSGVpZ2h0ICsgdGhpcy5kaWFsb2dIZWlnaHRCYXNlIDogdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSB0cnVlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IHRydWU7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5kaWFsb2dIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodDtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IGZhbHNlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF56m66aKE6Kej5p6Q57uT5p6cXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjbGVhclNpbXVsYXRlUmVzdWx0KCkge1xyXG4gICAgdGhpcy5hc3NpZ25JbmZvcyA9IFt7Ly8g6YeN5paw6aKE6Kej5p6Q5pe25riF56m6XHJcbiAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBbXSxcclxuICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICBhc3NpZ25lZXM6IFtdLFxyXG4gICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiAnJyxcclxuICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6ICcnLFxyXG4gICAgICBkZXBlbmRlbmN5OiAnJyxcclxuICAgICAgYW5vbnltb3VzOiBmYWxzZSxcclxuICAgICAgYW5vbnltb3VzVGV4dDogJycsXHJcbiAgICAgIHJlc29sdmVkOiBmYWxzZSxcclxuICAgIH1dO1xyXG4gICAgdGhpcy5kZXN0Tm9kZXMgPSBbXTsgLy8g6YeN5paw6aKE6Kej5p6Q5pe25riF56m6XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gJyc7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruW9k+WJjeaMh+a0vuS/oeaBr+W4ruWKqeWPguaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0QXNzaWduSW5mbyhub2RlSW5mb0xpc3Q6IEZsb3dOb2RlSW5mb1tdKSB7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKS5mb3JFYWNoKG5vZGVJZCA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBub2RlSW5mb0xpc3QuZmluZChub2RlID0+IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uSWQgPT09IG5vZGVJZCk7XHJcbiAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25JbmZvcy5wdXNoKHtcclxuICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBub2RlLnNlbGVjdGVkQXNzaWduZWVzLFxyXG4gICAgICAgICAgYXNzaWduZWVJbmZvOiBub2RlLmFzc2lnbmVlSW5mbyxcclxuICAgICAgICAgIGFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcy5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfTsgfSksXHJcbiAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUsXHJcbiAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25JZDogbm9kZS5hY3Rpdml0eURlZmluaXRpb25JZCxcclxuICAgICAgICAgIGRlcGVuZGVuY3k6IG5vZGUuZGVwZW5kZW5jeSxcclxuICAgICAgICAgIGFub255bW91czogbm9kZS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICBhbm9ueW1vdXNUZXh0OiBub2RlLmFub255bW91c1RleHQsXHJcbiAgICAgICAgICByZXNvbHZlZDogbm9kZS5yZXNvbHZlZCxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmFzc2lnbkluZm9zLnB1c2goe1xyXG4gICAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IFtdLFxyXG4gICAgICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbk5hbWU6ICcnLFxyXG4gICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6ICcnLFxyXG4gICAgICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxyXG4gICAgICAgICAgYW5vbnltb3VzVGV4dDogJycsXHJcbiAgICAgICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u5YW25LuW6IqC54K55oyH5rS+XHJcbiAgICogQHBhcmFtIHJlc3BvbnNlIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0T3RoZXJBc3NpZ25JbmZvKHJlc3BvbnNlOiBTaW11bGF0ZVJlc3BvbnNlKSB7XHJcbiAgICB0aGlzLm90aGVyQXNzaWduSW5mb3MgPSBbXTtcclxuICAgIGxldCB0bXBPdGhlckFzc2lnbkluZm9zID0gW107XHJcbiAgICBsZXQgb3RoZXJBc3NpZ25Ob2RlcyA9IHJlc3BvbnNlLm90aGVyQXNzaWduTm9kZXM7XHJcbiAgICBpZiAob3RoZXJBc3NpZ25Ob2RlcyAmJiBvdGhlckFzc2lnbk5vZGVzLmxlbmd0aCkge1xyXG4gICAgICBvdGhlckFzc2lnbk5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgdG1wT3RoZXJBc3NpZ25JbmZvcy5wdXNoKHtcclxuICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBub2RlLnNlbGVjdGVkQXNzaWduZWVzLFxyXG4gICAgICAgICAgYXNzaWduZWVJbmZvOiBub2RlLmFzc2lnbmVlSW5mbyxcclxuICAgICAgICAgIGFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcy5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfSB9KSxcclxuICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbk5hbWU6IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uTmFtZSxcclxuICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbklkLFxyXG4gICAgICAgICAgZGVwZW5kZW5jeTogbm9kZS5kZXBlbmRlbmN5LFxyXG4gICAgICAgICAgYW5vbnltb3VzOiBub2RlLmFub255bW91cyxcclxuICAgICAgICAgIGFub255bW91c1RleHQ6IG5vZGUuYW5vbnltb3VzVGV4dCxcclxuICAgICAgICAgIHJlc29sdmVkOiBub2RlLnJlc29sdmVkXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLy/kv53lrZjmnIDliJ3nmoTlhbbku5boioLngrnpgInkurpcclxuICAgICAgdGhpcy5vcmlnaW5PdGhlckFzc2lnbkluZm9zID0gWy4uLnRtcE90aGVyQXNzaWduSW5mb3NdO1xyXG4gICAgICAvL+WFtuS7luiKgueCueS4juS4i+S4gOiKgueCueWOu+mHjVxyXG4gICAgICBpZiAodGhpcy5hc3NpZ25JbmZvcyAmJiB0aGlzLmFzc2lnbkluZm9zLmxlbmd0aCkge1xyXG4gICAgICAgIHRtcE90aGVyQXNzaWduSW5mb3MgPSB0bXBPdGhlckFzc2lnbkluZm9zLmZpbHRlcihhID0+IHRoaXMuYXNzaWduSW5mb3MuZmluZEluZGV4KGIgPT4gYi5hY3Rpdml0eURlZmluaXRpb25JZCA9PSBhLmFjdGl2aXR5RGVmaW5pdGlvbklkKSA8IDApO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3RoZXJBc3NpZ25JbmZvcyA9IHRtcE90aGVyQXNzaWduSW5mb3M7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgInlrozoioLngrnlkI7vvIzph43mlrDorr7nva7lhbbku5boioLngrnmjIfmtL5cclxuICAgKiBAcGFyYW0gcmVzcG9uc2UgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzZXRPdGhlckFzc2lnbkluZm9BZ2Fpbihub2RlSW5mb0xpc3Q6IEZsb3dOb2RlSW5mb1tdKSB7XHJcbiAgICBpZiAobm9kZUluZm9MaXN0ICYmIG5vZGVJbmZvTGlzdC5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5vdGhlckFzc2lnbkluZm9zID0gdGhpcy5vcmlnaW5PdGhlckFzc2lnbkluZm9zLmZpbHRlcihhID0+IG5vZGVJbmZvTGlzdC5maW5kSW5kZXgoYiA9PiBiLmFjdGl2aXR5RGVmaW5pdGlvbklkID09IGEuYWN0aXZpdHlEZWZpbml0aW9uSWQpIDwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDngrnlh7vnoa7lrprlkI7mlrnms5VcclxuICAgKi9cclxuICBwcml2YXRlIGFzc2lnblN1Ym1pdCgpIHtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuYXNzaWduZWUubm9Bc3NpZ25lZScpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQ6IEFzc2lnblBhcmFtZXRlciA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgYXNzaWduZWVJZHM6IHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVzLm1hcCh1c2VyID0+IHVzZXIuaWQpLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICBwcmlvcml0eTogdGhpcy5zZWxlY3RlZFByaW9yaXR5XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuYXNzaWduTmV4dFVzZXJzQnlXb3JrSXRlbUlkKGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5vcGVyYXRlU3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjbGFpbVN1Ym1pdCgpIHtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmNsYWltKHRoaXMud29ya0l0ZW1JZCwgdGhpcy5jb21tZW50KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVuQ2xhaW1TdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS51bkNsYWltKHRoaXMud29ya0l0ZW1JZCwgdGhpcy5jb21tZW50KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpLFxyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5zdWJtaXRSZXN1bHQpO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmV0cmlldmVTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmV0cmlldmVDb250ZXh0ID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnRcclxuICAgICAgfTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5yZXRyaWV2ZShyZXRyaWV2ZUNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5zdWJtaXRSZXN1bHQpO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmZXJTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBhc3NpZ25lZTogdGhpcy5zZWxlY3RlZFVzZXJzWzBdLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICBwcmlvcml0eTogdGhpcy5zZWxlY3RlZFByaW9yaXR5XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuc3VibWl0RGlzYWJsZSA9IHRydWU7IC8vIOemgeeUqOaPkOS6pOaMiemSrlxyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnRyYW5zZmVyKGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5zdWJtaXRSZXN1bHQpO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29tbWVudFN1Ym1pdCgpIHsgLy8g6K+E6K66XHJcbiAgICBpZiAoIXRoaXMuY29tbWVudCB8fCB0aGlzLmNvbW1lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuaW5wdXRPcGluaW9uJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW1cclxuICAgICAgfTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5jb21tZW50KGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRSZXN1bHQuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY29tbWVudCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduRnJvbnRTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBhY3Rpb246IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUsXHJcbiAgICAgICAgYXNzaWduZWVzOiB0aGlzLnNlbGVjdGVkVXNlcnMsXHJcbiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxyXG4gICAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtLFxyXG4gICAgICAgIHByaW9yaXR5OiB0aGlzLnNlbGVjdGVkUHJpb3JpdHlcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5zdWJtaXREaXNhYmxlID0gdHJ1ZTsgLy8g56aB55So5o+Q5Lqk5oyJ6ZKuXHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuYWRkU2lnbihjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNpZ25TdWJtaXQoKSB7Ly8g5Yqg562+5o+Q5LqkXHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgcGF5bG9hZDogQWRkU2lnblBheWxvYWQgPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBjb25jbHVzaW9uVmFsdWU6IFwiUGFzc1wiLFxyXG4gICAgICAgIHNpZ25Bc3NpZ25lZXM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgICBhY3Rpb25Db2RlOiBcIkFkZFNpZ25CZWhpbmRcIixcclxuICAgICAgICBtdWx0aUluc3RhbmNlVHlwZTogdGhpcy5hZGRTaWduLnNob3dNdWx0aUluc3RhbmNlVHlwZSA/IHRoaXMuYWRkU2lnbi5jdXJNdWx0aUluc3RUeXBlIDogdGhpcy5hZGRTaWduLm9yaWdpbk11bHRpSW5zdFR5cGUsXHJcbiAgICAgICAgY291bnRlclNpZ25SdWxlOiAnYWxsUGFzcycsXHJcbiAgICAgICAgY29tcGxldGVkUnVsZTogJ2FsbCcsXHJcbiAgICAgICAgYWxsb3dTaWduVG9TaWduOiB0aGlzLmFkZFNpZ24uYWxsb3dTaWduVG9TSWduLFxyXG4gICAgICAgIGFjdGl2aXR5TmFtZTogJycsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgcHJpb3JpdHk6IHRoaXMuc2VsZWN0ZWRQcmlvcml0eVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmFkaG9jQXNzaWduZWUocGF5bG9hZCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFkU3VibWl0KCkgey8v5bey6ZiF5o+Q5LqkXHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY29udGV4dDogV29ya0l0ZW1FeGVjdXRlUGFyYW0gPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICBoaWRlQ29tbWVudDogdGhpcy5oaWRlQ29tbWVudFxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UucmVhZFRhc2soY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3RpZnlTdWJtaXQoKSB7Ly/nn6XkvJrmj5DkuqRcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRVc2Vycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJykgKyB0aGlzLnNlbGVjdFVzZXJUZXh0KTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENvdW50ZXJTaWduUGFyYW0gPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICBhY3Rpb246IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUsXHJcbiAgICAgICAgYXNzaWduZWVzOiB0aGlzLnNlbGVjdGVkVXNlcnMsXHJcbiAgICAgICAgcHJpb3JpdHk6IHRoaXMuc2VsZWN0ZWRQcmlvcml0eVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmFkZFNpZ24oY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWCrOWKnuaPkOS6pFxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXJnZUhhbmRsZVN1Ym1pdCgpIHtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnVyZ2VIYW5kbGVSZXNwb25zZS51cmdlVXNlcnMgfHwgIXRoaXMudXJnZUhhbmRsZVJlc3BvbnNlLnVyZ2VVc2Vycy5sZW5ndGgpIHsvL+ayoeacieespuWQiOadoeS7tueahOWCrOWKnueUqOaIt1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlVXNlcnMnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5sZW5ndGgpIHsvL+ayoeaciemAieS6ulxyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucmVjZWl2ZXInKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnVyZ2VIYW5kbGVDb21wb25lbnQudXJnZU1lc3NhZ2VTdWJqZWN0KSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VyZ2VTdWJqZWN0JykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy51cmdlSGFuZGxlQ29tcG9uZW50LnVyZ2VNZXNzYWdlQ29udGVudCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlQ29udGVudCcpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBjb250ZXh0ID0gbmV3IFVyZ2VIYW5kbGVDb250ZXh0KCk7XHJcbiAgICAgIGNvbnRleHQucHJvY0luc3RJZCA9IHRoaXMucHJvY2Vzc0luc3RhbmNlSWQ7XHJcbiAgICAgIGNvbnRleHQudXJnZVVzZXJzID0gdGhpcy51cmdlSGFuZGxlUmVzcG9uc2UudXJnZVVzZXJzLmZpbHRlcihhID0+IHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVzLnNvbWUoYiA9PiBiLmlkID09IGEuaWQpKTtcclxuICAgICAgY29udGV4dC51cmdlTWVzc2FnZVN1YmplY3QgPSB0aGlzLnVyZ2VIYW5kbGVDb21wb25lbnQudXJnZU1lc3NhZ2VTdWJqZWN0O1xyXG4gICAgICBjb250ZXh0LnVyZ2VNZXNzYWdlQ29udGVudCA9IHRoaXMudXJnZUhhbmRsZUNvbXBvbmVudC51cmdlTWVzc2FnZUNvbnRlbnQ7XHJcbiAgICAgIGNvbnRleHQuYWRkUmVtaW5kZXIgPSB0aGlzLmFkZFJlbWluZGVyO1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UudXJnZUhhbmRsZShjb250ZXh0KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPlua2iOW+geivouaPkOS6pFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2FuY2VsQ29uc3VsdFN1Ym1pdCgpIHtcclxuICAgIGxldCBjb250ZXh0ID0gbmV3IFdvcmtJdGVtRXhlY3V0ZVBhcmFtKCk7XHJcbiAgICBjb250ZXh0LndvcmtJdGVtSWQgPSB0aGlzLndvcmtJdGVtSWQ7XHJcbiAgICBjb250ZXh0LmNvbW1lbnQgPSB0aGlzLmNvbW1lbnQ7XHJcbiAgICBjb250ZXh0LmFkZGVuZHVtID0gdGhpcy5hZGRlbmR1bTtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuY2FuY2VsQ29uc3VsdChjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgIH0pXHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb21wbGV0ZVN1Ym1pdCgpIHsvLyDpgJrov4fjgIHpqbPlm57jgIHlhbbku5bnrKzkuInmlrnliqjkvZxcclxuICAgIGNvbnN0IGNvbnRleHQ6IENvbXBsZXRlQ29udGV4dCA9IHtcclxuICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICBjb25jbHVzaW9uVmFsdWU6IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUsXHJcbiAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgc2lnbkFzc2lnbmVlczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICBuZXh0Rmxvd05vZGVzOiBbXSxcclxuICAgICAgb3RoZXJBc3NpZ25Ob2RlczogW10sXHJcbiAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtLFxyXG4gICAgICAvL+WKqOaAgemps+WbnuinhOWImVxyXG4gICAgICBkeW5hbWljQmFja1dhcmRSdWxlOiB0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5keW5hbWljQmFja1dhcmRSdWxlQWJsZSA/IHRoaXMuc2hvd0JhY2tXYXJkQ29uZmlnLmRpc3BsYXlQbGFjZWhvbGRlciA6ICcnLFxyXG4gICAgICBwcmlvcml0eTogdGhpcy5zZWxlY3RlZFByaW9yaXR5XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChjb250ZXh0LnNpZ25Bc3NpZ25lZXMubGVuZ3RoIHx8ICF0aGlzLnJlc3BvbnNlIHx8ICF0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5sZW5ndGgpIHsvLyDliqDnrb4gb3Ig5Lu/55yf6L+U5Zue5Li656m677yM55u05o6l5b6A5LiL6LWwXHJcbiAgICAgIHRoaXMuY29tcGxldGVUYXNrKGNvbnRleHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWROb2RlSWQpIHsvLyDliqDnrb7ml7bvvIzpgInmi6nkuIvkuIDnjq/oioLooqvnpoHnlKjvvIxkZXN0Tm9kZUlk5Li6dW5kZWZpbmVkXHJcbiAgICAgICAgY29uc3QgbmV4dEZsb3dOb2RlczogRmxvd05vZGVJbmZvW10gPSBbXTtcclxuICAgICAgICBjb25zdCBub2Rlczogc3RyaW5nW10gPSB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXh0Rmxvd05vZGU6IEZsb3dOb2RlSW5mbyA9IHtcclxuICAgICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6IG5vZGVzW2ldLFxyXG4gICAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiB0aGlzLmFzc2lnbkluZm9zW2ldLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUsXHJcbiAgICAgICAgICAgIGRlcGVuZGVuY3k6IHRoaXMuYXNzaWduSW5mb3NbaV0uZGVwZW5kZW5jeSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IHRoaXMuYXNzaWduSW5mb3NbaV0uYXNzaWduZWVJbmZvID8gdGhpcy5hc3NpZ25JbmZvc1tpXS5hc3NpZ25lZXMgOiBbXSxcclxuICAgICAgICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICAgICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGFub255bW91czogdGhpcy5hc3NpZ25JbmZvc1tpXS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIGFub255bW91c1RleHQ6IHRoaXMuYXNzaWduSW5mb3NbaV0uYW5vbnltb3VzVGV4dFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIC8v6IqC54K55om+5LiN5Yiw5Lq677yM5LiU5byC5bi45o+Q56S65pe277yM5bm26KGM572R5YWz5pqC5LiN5aSE55CGXHJcbiAgICAgICAgICBpZiAodGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5sZW5ndGggJiYgIXRoaXMucmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzWzBdLmlkLnN0YXJ0c1dpdGgoJ1BhcmFsbGVsR2F0ZXdheScpKSB7XHJcbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSAmJiBub2Rlc1tpXS5zdGFydHNXaXRoKCdVc2VyQWN0aXZpdHknKSAmJiB0aGlzLmFzc2lnbkluZm9zW2ldLnJlc29sdmVkICYmICF0aGlzLmFzc2lnbkluZm9zW2ldLmFzc2lnbmVlSW5mbyAmJiAhdGhpcy5hc3NpZ25JbmZvc1tpXS5zZWxlY3RlZEFzc2lnbmVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBjb25zdCBzdHIgPSB0aGlzLmFzc2lnbkluZm9zW2ldLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGFydFByb2Nlc3Mubm9kZScpICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLm5vVXNlcicpO1xyXG4gICAgICAgICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcoc3RyKTtcclxuICAgICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbmV4dEZsb3dOb2Rlcy5wdXNoKG5leHRGbG93Tm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRleHQubmV4dEZsb3dOb2RlcyA9IG5leHRGbG93Tm9kZXM7XHJcbiAgICAgIH1cclxuICAgICAgLy/lhbbku5boioLngrnmjIfmtL7kv6Hmga9cclxuICAgICAgaWYgKHRoaXMub3RoZXJBc3NpZ25JbmZvcyAmJiB0aGlzLm90aGVyQXNzaWduSW5mb3MubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm90aGVyQXNzaWduSW5mb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBuZXh0Rmxvd05vZGU6IEZsb3dOb2RlSW5mbyA9IHtcclxuICAgICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6IHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpXS5hY3Rpdml0eURlZmluaXRpb25JZCxcclxuICAgICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogdGhpcy5vdGhlckFzc2lnbkluZm9zW2ldLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUsXHJcbiAgICAgICAgICAgIGRlcGVuZGVuY3k6IHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpXS5kZXBlbmRlbmN5LFxyXG4gICAgICAgICAgICBzZWxlY3RlZEFzc2lnbmVlczogdGhpcy5vdGhlckFzc2lnbkluZm9zW2ldLmFzc2lnbmVlSW5mbyA/IHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpXS5hc3NpZ25lZXMgOiBbXSxcclxuICAgICAgICAgICAgYXNzaWduZWVJbmZvOiBudWxsLFxyXG4gICAgICAgICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgICAgICAgIGFub255bW91c1RleHQ6ICcnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb250ZXh0Lm90aGVyQXNzaWduTm9kZXMucHVzaChuZXh0Rmxvd05vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucmVzcG9uc2Uuc2VsZWN0VGFyZ2V0QWJsZSAmJiB0aGlzLmRlc3ROb2Rlcy5sZW5ndGggPiAxICYmIGNvbnRleHQubmV4dEZsb3dOb2Rlcy5sZW5ndGggPD0gMCkgey8vIOeUqOaIt+ayoemAieaLqei3s+i9rOiKgueCue+8jOS4jeWFgeiuuOaPkOS6pFxyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc2VsZWN0Tm9kZScpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXNzaWduSW5mb3MuZmlsdGVyKGluZm8gPT4gaW5mby5hc3NpZ25lZUluZm8gJiYgaW5mby5hc3NpZ25lZUluZm8uc2VsZWN0QXNzaWduZWUgJiYgIWluZm8uYXNzaWduZWVzLmxlbmd0aCkubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFByb2Nlc3NvcicpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY29tcGxldGVUYXNrKGNvbnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbXBsZXRlVGFzayhjb21wbGV0ZUNvbnRleHQ6IENvbXBsZXRlQ29udGV4dCkge1xyXG4gICAgY29uc3QgYXR0YWNobWVudE5lY2Vzc2FyeSA9IHRoaXMuYWN0aW9uRW50aXR5LnBhcmFtZXRlcnMuZmluZChlbnRpdHkgPT4gZW50aXR5LmNvZGUgPT09ICdBdHRhY2htZW50TmVjZXNzYXJ5Jyk7XHJcbiAgICBjb25zdCBjZXJ0aWZpY2F0aW9uTmVjZXNzYXJ5ID0gdGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycy5maW5kKGVudGl0eSA9PiBlbnRpdHkuY29kZSA9PT0gJ0NlcnRpZmljYXRpb25OZWNlc3NhcnknKTtcclxuICAgIGNvbnN0IGNvbW1lbnROZWNlc3NhcnkgPSB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmZpbmQoZW50aXR5ID0+IGVudGl0eS5jb2RlID09PSAnQ29tbWVudE5lY2Vzc2FyeScpO1xyXG4gICAgaWYgKGF0dGFjaG1lbnROZWNlc3NhcnkgJiYgYXR0YWNobWVudE5lY2Vzc2FyeS52YWx1ZSA9PT0gJ3RydWUnICYmICghY29tcGxldGVDb250ZXh0LmFkZGVuZHVtLmF0dGFjaG1lbnQgfHwgY29tcGxldGVDb250ZXh0LmFkZGVuZHVtLmF0dGFjaG1lbnQgPT09ICdbXScpKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuYXR0YWNobWVudHNSZXF1aXJlZCcpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAoY29tbWVudE5lY2Vzc2FyeSAmJiBjb21tZW50TmVjZXNzYXJ5LnZhbHVlID09PSAndHJ1ZScgJiYgIWNvbXBsZXRlQ29udGV4dC5jb21tZW50KSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuaW5wdXRPcGluaW9uJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoY2VydGlmaWNhdGlvbk5lY2Vzc2FyeSAmJiBjZXJ0aWZpY2F0aW9uTmVjZXNzYXJ5LnZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeVNpZ25hdHVyZSgoKSA9PiB7XHJcbiAgICAgICAgICBjb21wbGV0ZUNvbnRleHQudmVyaWZ5U2lnbmVkID0gdGhpcy52ZXJpZnlTaWduZWQ7XHJcbiAgICAgICAgICB0aGlzLnRhc2tDb21wbGV0ZShjb21wbGV0ZUNvbnRleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG1zZyA9IFt0aGlzLndvcmtJdGVtSWRdO1xyXG4gICAgICAgIGdzcENBLmdldFNpZ25lZE1zZyhtc2cpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGFza0NvbXBsZXRlKGNvbXBsZXRlQ29udGV4dCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhlY3V0ZUZvcm1BY3Rpb25zQWZ0ZXJDb21wbGV0ZVRhc2soaGFuZGxlcjogYW55KSB7XHJcbiAgICAvLyDlpoLmnpzooajljZXms6jlhozkuobkuovku7ZcclxuICAgIGlmICh0aGlzLm9yaWdpbiA9PSBBY3Rpb25PcmlnaW4uVGFza0Zvcm0gJiYgdGhpcy5pZlJlZ2lzdGVyZWQgJiYgdGhpcy5mb3JtT2JqZWN0KSB7XHJcbiAgICAgIGNvbnN0IHBvc3RBY3Rpb25zID0gdGhpcy5iaWxsTWV0aG9kQ29uZmlncy5maWx0ZXIoYWN0aW9uID0+IGFjdGlvbi5hY3Rpb24gPT09IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgJiYgYWN0aW9uLmV4ZWN1dGlvblRpbWUgPT09ICdQb3N0Jykuc29ydCgoeCwgeSkgPT4geC5zb3J0T3JkZXIgLSB5LnNvcnRPcmRlcik7XHJcbiAgICAgIGlmIChwb3N0QWN0aW9ucyAmJiBwb3N0QWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmV4ZWN1dGVQb3N0Rm9ybUFjdGlvbnMocG9zdEFjdGlvbnMsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kbGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV4ZWN1dGVQb3N0Rm9ybUFjdGlvbnMoZm9ybUFjdGlvbnM6IEJpbGxNZXRob2RDb25maWdbXSwgaGFuZGVyOiBhbnkpIHtcclxuICAgIGlmIChmb3JtQWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZVN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZVN1YmplY3Quc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHJlLmRhdGEuZGF0YTtcclxuICAgICAgICBpZiAoZGF0YS5yZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgICAgIHRoaXMuZXhlY3V0ZVBvc3RGb3JtQWN0aW9ucyhmb3JtQWN0aW9ucywgaGFuZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTsgLy8g5Lu75Yqh5Yqe55CG55WM6Z2i5LiN5YWz6ZetXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WuoeaJueWQjuihqOWNleaTjeS9nOaJp+ihjOWksei0pe+8gScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIC8vIOaJp+ihjOihqOWNleWKqOS9nFxyXG4gICAgICBjb25zdCBmb3JtQWN0aW9uID0gZm9ybUFjdGlvbnMuc2hpZnQoKTtcclxuICAgICAgdGhpcy5zZW5kTWVzc2FnZSh0aGlzLndvcmtJdGVtSWQsIGZvcm1BY3Rpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGFuZGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL+W4ruWKqemAieS6uuWQjlxyXG4gIGFmdGVyQ29uZmlybUZvclRyYW5zZmVyKGRhdGE6IEFzc2lnbmVlW10pIHtcclxuICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRVc2VycyA9IGRhdGEubWFwKHVzZXIgPT4gdXNlci5pZCk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRVc2VyTmdNb2R1bGUgPSBkYXRhLm1hcCh1c2VyID0+IHVzZXIubmFtZSkuam9pbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PSAnQWRkU2lnbicgJiYgdGhpcy5hZGRTaWduLm9yaWdpbk11bHRpSW5zdFR5cGUgPT0gTXVsdGlJbnN0YW5jZVR5cGUuUHJlZW1wdC50b1N0cmluZygpICYmIHRoaXMuc2VsZWN0ZWRVc2Vycy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRoaXMuYWRkU2lnbi5zaG93TXVsdGlJbnN0YW5jZVR5cGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hZGRTaWduLnNob3dNdWx0aUluc3RhbmNlVHlwZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FuY2VsKCk6IE9ic2VydmFibGU8U3VibWl0UmVzdWx0PiB7XHJcbiAgICB0aGlzLnN1Ym1pdFJlc3VsdC5pc0Nsb3NlID0gZmFsc2U7XHJcbiAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3ViamVjdCgpIHtcclxuICAgIHJldHVybiB0aGlzLnN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvLyDkuIvkuIDnjq/oioLpgInmi6nlkI7kuovku7ZcclxuICBzZWxlY3ROb2RlQ2hhbmdlKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9IGRhdGEgJiYgZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5pZDtcclxuICAgIGlmICh0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkYXRhLmluZGV4XS5ub2RlSW5mb0xpc3QuZXZlcnkobm9kZSA9PiBub2RlLnJlc29sdmVkID09PSB0cnVlKSkgey8vIOW3sumihOino+aekOWPguS4juiAhVxyXG4gICAgICB0aGlzLnNldEFzc2lnbkluZm8odGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGF0YS5pbmRleF0ubm9kZUluZm9MaXN0KTtcclxuICAgICAgdGhpcy5zZXRPdGhlckFzc2lnbkluZm9BZ2Fpbih0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkYXRhLmluZGV4XS5ub2RlSW5mb0xpc3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgbm9kZUlkcyA9IHRoaXMuc2VsZWN0ZWROb2RlSWQuc3BsaXQoJ++8jCcpLm1hcChub2RlID0+IGBcIiR7bm9kZX1cImApLmpvaW4oKTsgLy8g5rOo5oSP5LiA5Liq5Lit5paH6YCX5Y+35LiA5Liq6Iux5paH6YCX5Y+3XHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5nZXRTaW11bGF0aW9uQXNzaWduZWVJbmZvKHRoaXMud29ya0l0ZW1JZCwgbm9kZUlkcykuc3Vic2NyaWJlKChub2RlSW5mb0xpc3Q6IEZsb3dOb2RlSW5mb1tdKSA9PiB7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0QXNzaWduSW5mbyhub2RlSW5mb0xpc3QpO1xyXG4gICAgICAgIHRoaXMuc2V0T3RoZXJBc3NpZ25JbmZvQWdhaW4obm9kZUluZm9MaXN0KTtcclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDkuIvkuIDnjq/oioLmuIXnqbrlkI7kuovku7ZcclxuICBzZWxlY3ROb2RlQ2xlYXIoKSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkTm9kZUlkID0gbnVsbDtcclxuICAgIHRoaXMuYXNzaWduSW5mb3MgPSBbe1xyXG4gICAgICBzZWxlY3RlZEFzc2lnbmVlczogW10sXHJcbiAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogJycsXHJcbiAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiAnJyxcclxuICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgIGFub255bW91c1RleHQ6ICcnLFxyXG4gICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICB9XTtcclxuICB9XHJcblxyXG4gIGFmdGVyQ29uZmlybUZvckFzc2lnbihkYXRhOiBBc3NpZ25lZVtdLCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zW2luZGV4XS5hc3NpZ25lZXMgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgYWZ0ZXJDb25maXJtRm9yT3RoZXJBc3NpZ24oZGF0YTogQXNzaWduZWVbXSwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgdGhpcy5vdGhlckFzc2lnbkluZm9zW2luZGV4XS5hc3NpZ25lZXMgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LiK5Lyg6ZmE5Lu25ZCO5LqL5Lu2XHJcbiAgICovXHJcbiAgYWRkQXR0YWNobWVudChkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuYWRkZW5kdW0uYXR0YWNobWVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5omL5YaZ562+5ZCN5ZCO5LqL5Lu2XHJcbiAgICovXHJcbiAgYWRkU2lnbmF0dXJlKGRhdGE6IGFueSkge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgY29uc3Qgc2lnbkluZm8gPSB7XHJcbiAgICAgICAgaWQ6IGRhdGEsXHJcbiAgICAgICAgd2F0ZXJNYXJraW5nOiBudWxsXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYWRkZW5kdW0uc2lnbmF0dXJlID0gSlNPTi5zdHJpbmdpZnkoc2lnbkluZm8pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hZGRlbmR1bS5zaWduYXR1cmUgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOS7peacjeWKoeaWueW8j+aJk+W8gOe7hOS7tuaXtu+8jOW3puWPs+WKoOS4inBhZGRpbmdcclxuICBhZGRQYWRkaW5nKCkge1xyXG4gICAgdGhpcy5jbHMgPSAnZi11dGlscy1maWxsLWZsZXgtY29sdW1uIGgtMTAwIHB4LTQgcHktMic7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSBzZW5kTWVzc2FnZSh3b3JrSXRlbUlkOiBzdHJpbmcsIGFjdGlvbjogQmlsbE1ldGhvZENvbmZpZykge1xyXG4gICAgaWYgKHRoaXMuaWZyYW1lKSB7XHJcbiAgICAgIGNvbnN0IGlmcmFtZVdpbmRvdyA9IHRoaXMuaWZyYW1lLm5hdGl2ZUVsZW1lbnQuY29udGVudFdpbmRvdztcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IHtcclxuICAgICAgICB0YXJnZXQ6IHdvcmtJdGVtSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgY29tbWFuZDogYWN0aW9uLm1ldGhvZCxcclxuICAgICAgICAgIGFyZ3VtZW50czogYWN0aW9uLm1ldGhvZFBhcmFtZXRlcnNcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGlmcmFtZVdpbmRvdy5wb3N0TWVzc2FnZShtZXNzYWdlLCB0aGlzLlBPU1RfTUVTU0FHRV9UQVJHRVQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTsgLy8g5Lu75Yqh5Yqe55CG55WM6Z2i5LiN5YWz6ZetXHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcoJ+ivt+etieW+heihqOWNleWKoOi9veWujOaIkOWQjuWGjeivlScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5o+Q5Lqk5a6h5om55YmN55qE5pWw5a2X562+5ZCN5Y+K6aqM562+XHJcbiAgdmVyaWZ5U2lnbmF0dXJlKGhhbmRsZXI6IGFueSkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICBpZiAoXHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlICYmXHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0ZlxyXG4gICAgKSB7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5jYUV2ZW50Lm9uKFxyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5jYUV2ZW50LnNpZ25lZE1zZ092ZXJUb2tlbigpLFxyXG4gICAgICAgICdzaWduZWRNc2dPdmVyJyxcclxuICAgICAgICBmdW5jdGlvbiBzaWduTXNnT3ZlcihzaWduZWREYXRhKSB7XHJcbiAgICAgICAgICBpZiAoc2lnbmVkRGF0YSAmJiBzaWduZWREYXRhWzBdID09PSAndHJ1ZScgJiYgc2lnbmVkRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIOivgeS5puWvueixoVxyXG4gICAgICAgICAgICBjb25zdCBjZXJ0ID0gZ3NwQ0EuZ2V0Q3VyQ2VydCgpO1xyXG4gICAgICAgICAgICAvLyDpqoznrb7lj4LmlbBcclxuICAgICAgICAgICAgdGhhdC52ZXJpZnlTaWduZWQgPSB7XHJcbiAgICAgICAgICAgICAgLy8g6KaB6aqM6K+B55qE6K+B5LmmYmFzZTY057yW56CB55qE5a2X56ym5rWBKGNlcnRrZXkpXHJcbiAgICAgICAgICAgICAgY2VydEJhc2U2NEluZm86IGdzcENBLmdldENlcnRCYXNlNjQoY2VydCksXHJcbiAgICAgICAgICAgICAgLy8g562+5ZCN5Y6f5L+h5oGvXHJcbiAgICAgICAgICAgICAgbXNnOiBbdGhhdC53b3JrSXRlbUlkXSxcclxuICAgICAgICAgICAgICAvLyDopoHnrb7lkI3lkI7kv6Hmga9cclxuICAgICAgICAgICAgICBzaWduZWRtc2c6IHNpZ25lZERhdGFbMV1bMF0sXHJcbiAgICAgICAgICAgICAgLy8g55So5oi35L2/55So5Zy65pmv77yM55uu5YmN5pyq5L2/55So77yM5Y+v5Lul5Li656m6XHJcbiAgICAgICAgICAgICAgdXNlQ2FzZTogbnVsbCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaGFuZGxlcigpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhhdC5sb2FkaW5nU2VydmljZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGF0LnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB0aGF0Lm5vdGlmeS5lcnJvcihzaWduZWREYXRhWzFdKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHNpZ25lZERhdGFbMV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOmAmui/h+OAgemps+WbnuOAgeWFtuS7luesrOS4ieaWueWKqOS9nFxyXG4gIHRhc2tDb21wbGV0ZShjb21wbGV0ZUNvbnRleHQ6IENvbXBsZXRlQ29udGV4dCkge1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5jb21wbGV0ZShjb21wbGV0ZUNvbnRleHQpLnN1YnNjcmliZSgoY3I6IENvbXBsZXRlUmVzcG9uc2UpID0+IHtcclxuICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnNBZnRlckNvbXBsZXRlVGFzaygoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNyLm5lZWRJbnRlcmFjdGlvbikgey8vIOmAmui/h+WQjuaMh+a0vuWcuuaZr1xyXG4gICAgICAgICAgaWYgKHRoaXMub3JpZ2luID09IEFjdGlvbk9yaWdpbi5UYXNrQ2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7Ly/lhbPmjolsb2FkaW5nXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnNlbGVjdCcpXHJcbiAgICAgICAgICAgICsgJ+OAkCcgKyBjci5uZXh0Rmxvd05vZGVzWzBdLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUgKyAn44CRJ1xyXG4gICAgICAgICAgICArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnByb2Nlc3NvcicpKTtcclxuICAgICAgICAgIGxldCB0YXNrID0gbmV3IFRhc2tFbnRpdHkoKTtcclxuICAgICAgICAgIGxldCBhY3Rpb24gPSBuZXcgVGFza0FjdGlvbigpO1xyXG4gICAgICAgICAgdGFzay5zb3VyY2VJZCA9IGNyLm5leHRGbG93Tm9kZXNbMF0uYXNzaWduZWVJbmZvLndvcmtJdGVtSWQ7XHJcbiAgICAgICAgICBhY3Rpb24uY29kZSA9ICdBc3NpZ25Vc2VyJztcclxuICAgICAgICAgIGFjdGlvbi5uYW1lID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuYXNzaWduVXNlcicpO1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVyU2VydmljZS5leGVjdXRlKHRhc2ssIGFjdGlvbikuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY29tcGxldGVDb250ZXh0LmNvbmNsdXNpb25WYWx1ZSA9PT0gJ1Bhc3MnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMuc3VjY2Vzc1Bhc3MnKSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBsZXRlQ29udGV4dC5jb25jbHVzaW9uVmFsdWUgPT09ICdCYWNrJykge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxufSJdfQ==