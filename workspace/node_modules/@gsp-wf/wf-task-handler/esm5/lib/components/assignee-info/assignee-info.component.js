/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { AssigneeInfo } from '../../entity/complete-response';
import { I18nService } from '../../service/i18n/i18n.service';
import { NotifyService } from '@farris/ui-notify';
import { TaskService } from '../../service/task.service';
import { WfContext } from '../../entity/wfContext';
import { UserHelpParam } from '../../entity/farris-user-help-param';
var AssigneeInfoComponent = /** @class */ (function () {
    function AssigneeInfoComponent(i18nService, notify, cd, taskService, injector) {
        var _this = this;
        this.i18nService = i18nService;
        this.notify = notify;
        this.cd = cd;
        this.taskService = taskService;
        this.injector = injector;
        //已经选中的指派人
        this.assignees = []; //返回选中人的ID数组
        //返回选中人的ID数组
        this.anonymous = false; // 是否匿名
        // 是否匿名
        this.anonymousText = ''; // 匿名显示文本
        //默认办理人（界面提示用）
        this.pscChange = null; //farris用户帮助
        //farris用户帮助
        this.disabled = false; //办理人员输入框是否禁用
        this.filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: "order", withAllOrg: true, orgId: '' };
        this.ifShowBlank = true; //办理人为空时，是否显示选人框
        //办理人为空时，是否显示选人框
        this.openFromIframe = false; //是否从iframe打开，应用IDP提交审批集成
        //区分是哪个组件
        this.isUseNewSelectUserHelp = false; //是否直接启用新版选人组件
        //是否直接启用新版选人组件
        this.ifHorizontal = false; //是否水平排列
        //是否水平排列
        this.afterConfirm = new EventEmitter();
        this.groupIcon = '<i class="f-icon f-icon-plus-circle text-primary"></i>';
        this.extendUserHelp = false; //用户帮助是否扩展
        //是否使用farris用户帮助
        this.taskService.getWfUserHelpConfig().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {
                _this.extendUserHelp = true;
                _this.extendUserHelpUrl = re.userHelpConfig.url + '?v=20221114';
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            console.error(error);
        }));
    }
    /**
     * @return {?}
     */
    AssigneeInfoComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        //引入farris用户帮助脚本
        if (this.openFromIframe) {
            ((/** @type {?} */ (top))).System.import("/platform/common/web/@farris/common-personnel-select/psc.js" + '?v=' + new Date().getTime().toString()).then((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                console.error(error);
            }));
        }
    };
    Object.defineProperty(AssigneeInfoComponent.prototype, "assigneeInfo", {
        set: /**
         * @param {?} info
         * @return {?}
         */
        function (info) {
            this.disabled = false;
            this.placeholder = null; //清空
            this.assignUserNgModule = null; //清空
            this._assigneeInfo = info; //可以传null
            if (!this._assigneeInfo) {
                this.disabled = true;
            }
            else {
                if (this._assigneeInfo.selectAssignee) {
                    this.disabled = false;
                    this.placeholder = this.i18nService.getValue('task.selectPlaceholder'); //请选择
                }
                else {
                    this.disabled = true;
                    if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {
                        this.defaultParticipant = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) { return user.name; })).join(); //解析人名
                    }
                    else {
                        this.defaultParticipant = this.i18nService.getValue('task.noUser'); //无
                    }
                }
                this.singleSelect = !this._assigneeInfo.multiSelect;
                this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;
                if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {
                    /** @type {?} */
                    var orgList = this._assigneeInfo.organizationScope[0];
                    this.filter.orgId = orgList.id;
                    this.filter.withAllOrg = orgList.includeChildren;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AssigneeInfoComponent.prototype, "setAnonymous", {
        set: /**
         * @param {?} anonymous
         * @return {?}
         */
        function (anonymous) {
            this.anonymous = anonymous;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AssigneeInfoComponent.prototype, "setAnonymousText", {
        set: /**
         * @param {?} anonymousText
         * @return {?}
         */
        function (anonymousText) {
            this.anonymousText = anonymousText;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AssigneeInfoComponent.prototype, "selectedAssignees", {
        /**
         * 已选中的人（帮助不可用）
         */
        set: /**
         * 已选中的人（帮助不可用）
         * @param {?} selectedAssignees
         * @return {?}
         */
        function (selectedAssignees) {
            !this._assigneeInfo && (this.placeholder = null);
            this._selectedAssignees = selectedAssignees;
            selectedAssignees.length && (this.defaultParticipant = this.anonymous ? this.anonymousText : selectedAssignees.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.name; })).join());
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 选择参与者
     */
    /**
     * 选择参与者
     * @return {?}
     */
    AssigneeInfoComponent.prototype.clickAssignUser = /**
     * 选择参与者
     * @return {?}
     */
    function () {
        if (this.isUseNewSelectUserHelp) {
            this.extendUserHelp = true;
            this.extendUserHelpUrl = '/platform/runtime/wf/web/wf-user-help/wf-user-help-farris/wf-user-help-farris.js' + '?v=' + new Date().getTime().toString();
        }
        /** @type {?} */
        var context = {
            singleSelect: this.singleSelect,
            allowGlobalAssign: this.allowGlobalAssign,
            assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],
            filter: this.filter,
            selectedUsers: this.assignees && this.assignees.length ? this.assignees : this._selectedAssignees,
            wfContext: this.wfContext
        };
        if (this.extendUserHelp) {
            if (this.openFromIframe) {
                this.showFarrisUserHelpFromWindow(context);
            }
            else {
                this.showExtendUserHelp(context);
            }
        }
        else {
            this.showExtendUserHelp(context);
        }
    };
    /**
     * 加载扩展帮助
     */
    /**
     * 加载扩展帮助
     * @private
     * @param {?} context
     * @return {?}
     */
    AssigneeInfoComponent.prototype.showExtendUserHelp = /**
     * 加载扩展帮助
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        System.import(this.extendUserHelpUrl).then((/**
         * @param {?} moduleFactories
         * @return {?}
         */
        function (moduleFactories) {
            /** @type {?} */
            var moduleFactory = Object.values(moduleFactories)[0];
            /** @type {?} */
            var moduleRef = moduleFactory.create(_this.injector);
            moduleRef.instance.showHelp(context).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                /** @type {?} */
                var userList = re.userList;
                if (userList && userList.length) {
                    _this.assignees = userList.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    function (user) { return { id: user.id, name: user.name }; }));
                    _this.assignUserNgModule = _this.assignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    function (user) { return user.name; })).join();
                }
                else {
                    _this.assignees = [];
                    _this.assignUserNgModule = '';
                }
                _this.afterConfirm.emit(_this.assignees);
                _this.cd.detectChanges();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                console.error(error);
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            console.error(error);
        }));
    };
    //从window上弹出用户帮助
    //从window上弹出用户帮助
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    AssigneeInfoComponent.prototype.showFarrisUserHelpFromWindow = 
    //从window上弹出用户帮助
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    function (context) {
        var _this = this;
        /** @type {?} */
        var param = new UserHelpParam();
        if (context.wfContext) {
            param.filterId = context.wfContext.processCategoryId;
        }
        param.multiSelect = !context.singleSelect;
        /** @type {?} */
        var showOrgTab = false;
        if (context.allowGlobalAssign || (context.filter && context.filter.orgId)) {
            showOrgTab = true;
        }
        /** @type {?} */
        var farrisUnSelectedUserIds = '';
        if (context.assigneeUsers && context.assigneeUsers.length) {
            farrisUnSelectedUserIds = context.assigneeUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.id; })).join();
            param.unSelectedUserIds = farrisUnSelectedUserIds;
        }
        //有参与者 + 允许全员
        if (showOrgTab && farrisUnSelectedUserIds) {
            param.showTabIds = 'candidate,recent,organization,favorites,group';
            param.activeTabId = 'candidate';
        }
        //允许全员
        if (showOrgTab && !farrisUnSelectedUserIds) {
            param.showTabIds = 'recent,organization,favorites,group';
            param.activeTabId = 'recent';
        }
        //仅有参与者
        if (!showOrgTab && farrisUnSelectedUserIds) {
            param.showTabIds = 'candidate';
            param.activeTabId = 'candidate';
        }
        if (context.filter) {
            /** @type {?} */
            var filter = context.filter;
            param.includeCurrentUser = !filter.notGetCurrentUser;
            param.orgId = filter.orgId ? filter.orgId : '*';
            param.enableChildHierarchy = filter.withAllOrg;
        }
        if (context.selectedUsers && context.selectedUsers.length) {
            param.userIds = context.selectedUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.id; })).join();
        }
        /** @type {?} */
        var token = 'gspWfTask' + this.index;
        ((/** @type {?} */ (top.window))).CommonPersonnelSelect.component.farrisDialogShowInWf(param, token);
        if (!this.pscChange) {
            this.pscChange = ((/** @type {?} */ (top.window))).FARRIS_PSC.selectionsChange.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            function (re) {
                if (re.token == token) {
                    /** @type {?} */
                    var userList = re.data;
                    if (userList && userList.length) {
                        _this.assignees = userList.map((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) { return { id: user.userId, name: user.name }; }));
                        _this.assignUserNgModule = _this.assignees.map((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) { return user.name; })).join();
                    }
                    else {
                        _this.assignees = [];
                        _this.assignUserNgModule = '';
                    }
                    _this.afterConfirm.emit(_this.assignees);
                    _this.cd.detectChanges();
                }
            }));
        }
    };
    //清除
    //清除
    /**
     * @return {?}
     */
    AssigneeInfoComponent.prototype.assignUserClear = 
    //清除
    /**
     * @return {?}
     */
    function () {
        this.assignees = [];
        this.assignUserNgModule = null;
        this.afterConfirm.emit([]);
    };
    AssigneeInfoComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-assignee-info',
                    template: "<!-- \u6307\u5B9A\u53C2\u4E0E\u8005\uFF08\u6307\u6D3E\uFF09 -->\r\n<div\r\n  *ngIf=\"\r\n    ifShowBlank ||\r\n    _assigneeInfo ||\r\n    (_selectedAssignees && _selectedAssignees.length)\r\n  \"\r\n  [ngClass]=\"\r\n    ifHorizontal\r\n      ? 'wf-task-handler-help-div wf-submit-item'\r\n      : 'wf-task-handler-help-div'\r\n  \"\r\n>\r\n  <div\r\n    [ngClass]=\"\r\n      ifHorizontal\r\n        ? 'wf-task-handler-help-text wf-submit-item-label'\r\n        : 'wf-task-handler-help-text'\r\n    \"\r\n    title=\"{{ activityName }}\"\r\n  >\r\n    {{ activityName ? activityName : (\"task.assignText\" | translate) }}\r\n  </div>\r\n  <div\r\n    style=\"flex: 1\"\r\n    title=\"{{ assignUserNgModule ? assignUserNgModule : placeholder }}\"\r\n  >\r\n    <input-group\r\n      [(ngModel)]=\"defaultParticipant\"\r\n      [editable]=\"false\"\r\n      [readonly]=\"disabled\"\r\n      [customCls]=\"'custom-cls'\"\r\n      [groupText]=\"groupIcon\"\r\n      [placeholder]=\"placeholder\"\r\n      [(value)]=\"assignUserNgModule\"\r\n      (clickHandle)=\"clickAssignUser()\"\r\n      (clear)=\"assignUserClear()\"\r\n    ></input-group>\r\n  </div>\r\n</div>\r\n",
                    styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:14px}.wf-task-handler-help-div-submit{margin-bottom:14px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wf-task-batch-selected{padding-left:8px}.wf-task-batch-rows{font-size:13px;font-weight:500;padding:0 4px;color:#2a87ff}.wf-task-batch-time{font-size:13px;font-weight:500;padding:0 4px;color:#424347}.wf-task-batch-message{display:flex;background:#edf9ff;border:1px solid rgba(196,235,255,1);border-radius:8px;margin-bottom:6px;align-items:center;font-size:12px;padding:4px 10px}.wf-submit-section{padding:4px 24px 0}.wf-submit-item{display:flex;align-items:baseline}.wf-submit-item-label{padding-right:10px;width:88px;text-align:right}.wf-task-splitter{display:flex;align-items:center;color:rgba(0,0,0,.4);font-size:12px;margin-bottom:10px}.wf-task-splitter-line{border-bottom:1px dashed rgba(0,0,0,.1);flex-grow:1}"]
                }] }
    ];
    /** @nocollapse */
    AssigneeInfoComponent.ctorParameters = function () { return [
        { type: I18nService },
        { type: NotifyService },
        { type: ChangeDetectorRef },
        { type: TaskService },
        { type: Injector }
    ]; };
    AssigneeInfoComponent.propDecorators = {
        disabled: [{ type: Input }],
        placeholder: [{ type: Input }],
        singleSelect: [{ type: Input }],
        filter: [{ type: Input }],
        ifShowBlank: [{ type: Input }],
        openFromIframe: [{ type: Input }],
        activityName: [{ type: Input }],
        allowGlobalAssign: [{ type: Input }],
        wfContext: [{ type: Input }],
        index: [{ type: Input }],
        isUseNewSelectUserHelp: [{ type: Input }],
        ifHorizontal: [{ type: Input }],
        afterConfirm: [{ type: Output }],
        assigneeInfo: [{ type: Input }],
        setAnonymous: [{ type: Input }],
        setAnonymousText: [{ type: Input }],
        selectedAssignees: [{ type: Input }]
    };
    return AssigneeInfoComponent;
}());
export { AssigneeInfoComponent };
if (false) {
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignUserNgModule;
    /** @type {?} */
    AssigneeInfoComponent.prototype._assigneeInfo;
    /** @type {?} */
    AssigneeInfoComponent.prototype._selectedAssignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymous;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymousText;
    /** @type {?} */
    AssigneeInfoComponent.prototype.defaultParticipant;
    /** @type {?} */
    AssigneeInfoComponent.prototype.pscChange;
    /** @type {?} */
    AssigneeInfoComponent.prototype.disabled;
    /** @type {?} */
    AssigneeInfoComponent.prototype.placeholder;
    /** @type {?} */
    AssigneeInfoComponent.prototype.singleSelect;
    /** @type {?} */
    AssigneeInfoComponent.prototype.filter;
    /** @type {?} */
    AssigneeInfoComponent.prototype.ifShowBlank;
    /** @type {?} */
    AssigneeInfoComponent.prototype.openFromIframe;
    /** @type {?} */
    AssigneeInfoComponent.prototype.activityName;
    /** @type {?} */
    AssigneeInfoComponent.prototype.allowGlobalAssign;
    /** @type {?} */
    AssigneeInfoComponent.prototype.wfContext;
    /** @type {?} */
    AssigneeInfoComponent.prototype.index;
    /** @type {?} */
    AssigneeInfoComponent.prototype.isUseNewSelectUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.ifHorizontal;
    /** @type {?} */
    AssigneeInfoComponent.prototype.afterConfirm;
    /** @type {?} */
    AssigneeInfoComponent.prototype.groupIcon;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelpUrl;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduZWUtaW5mby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXRhc2staGFuZGxlci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Fzc2lnbmVlLWluZm8vYXNzaWduZWUtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM5RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDOUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBSXBFO0lBa0NFLCtCQUNVLFdBQXdCLEVBQ3hCLE1BQXFCLEVBQ3JCLEVBQXFCLEVBQ3JCLFdBQXdCLEVBQ3hCLFFBQWtCO1FBTDVCLGlCQWdCQztRQWZTLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQWU7UUFDckIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTs7UUE3QjVCLGNBQVMsR0FBZSxFQUFFLENBQUMsQ0FBQSxZQUFZOztRQUN2QyxjQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsT0FBTzs7UUFDMUIsa0JBQWEsR0FBRyxFQUFFLENBQUMsQ0FBQyxTQUFTOztRQUU3QixjQUFTLEdBQUcsSUFBSSxDQUFDLENB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QTZCOztJQUM3Qiw2Q0FBK0I7O0lBQy9CLHVDQUFzSDs7SUFDdEgsNENBQXFDOztJQUNyQywrQ0FBeUM7O0lBQ3pDLDZDQUE4Qjs7SUFDOUIsa0RBQW9DOztJQUNwQywwQ0FBOEI7O0lBQzlCLHNDQUFvQjs7SUFDcEIsdURBQWlEOztJQUNqRCw2Q0FBdUM7O0lBRXZDLDZDQUF3RDs7SUFDeEQsMENBQXFFOztJQUNyRSwrQ0FBZ0M7O0lBQ2hDLGtEQUEwQjs7Ozs7SUFHeEIsNENBQWdDOzs7OztJQUNoQyx1Q0FBNkI7Ozs7O0lBQzdCLG1DQUE2Qjs7Ozs7SUFDN0IsNENBQWdDOzs7OztJQUNoQyx5Q0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQXNzaWduZWVJbmZvIH0gZnJvbSAnLi4vLi4vZW50aXR5L2NvbXBsZXRlLXJlc3BvbnNlJztcclxuaW1wb3J0IHsgSTE4blNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2kxOG4vaTE4bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2VudGl0eS91c2VyJztcclxuaW1wb3J0IHsgQXNzaWduZWUgfSBmcm9tICcuLi8uLi9lbnRpdHkvc3RhcnQtcHJvY2Vzcy1wYXlsb2FkJztcclxuaW1wb3J0IHsgVGFza1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL3Rhc2suc2VydmljZSc7XHJcbmltcG9ydCB7IFdmQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS93ZkNvbnRleHQnO1xyXG5pbXBvcnQgeyBVc2VySGVscFBhcmFtIH0gZnJvbSAnLi4vLi4vZW50aXR5L2ZhcnJpcy11c2VyLWhlbHAtcGFyYW0nO1xyXG5cclxuZGVjbGFyZSBsZXQgU3lzdGVtOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1hc3NpZ25lZS1pbmZvJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYXNzaWduZWUtaW5mby5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4uL3Rhc2stZXhlY3V0ZS90YXNrLWV4ZWN1dGUuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXNzaWduZWVJbmZvQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgYXNzaWduVXNlck5nTW9kdWxlOiBzdHJpbmc7XHJcbiAgX2Fzc2lnbmVlSW5mbzogQXNzaWduZWVJbmZvO1xyXG4gIF9zZWxlY3RlZEFzc2lnbmVlczogVXNlcltdOy8v5bey57uP6YCJ5Lit55qE5oyH5rS+5Lq6XHJcbiAgYXNzaWduZWVzOiBBc3NpZ25lZVtdID0gW107Ly/ov5Tlm57pgInkuK3kurrnmoRJROaVsOe7hFxyXG4gIGFub255bW91cyA9IGZhbHNlOyAvLyDmmK/lkKbljL/lkI1cclxuICBhbm9ueW1vdXNUZXh0ID0gJyc7IC8vIOWMv+WQjeaYvuekuuaWh+acrFxyXG4gIGRlZmF1bHRQYXJ0aWNpcGFudDogc3RyaW5nOy8v6buY6K6k5Yqe55CG5Lq677yI55WM6Z2i5o+Q56S655So77yJXHJcbiAgcHNjQ2hhbmdlID0gbnVsbDsvL2ZhcnJpc+eUqOaIt+W4ruWKqVxyXG5cclxuICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlOy8v5Yqe55CG5Lq65ZGY6L6T5YWl5qGG5piv5ZCm56aB55SoXHJcbiAgQElucHV0KCkgcGxhY2Vob2xkZXI6IHN0cmluZztcclxuICBASW5wdXQoKSBzaW5nbGVTZWxlY3Q6IGJvb2xlYW47XHJcbiAgQElucHV0KCkgZmlsdGVyID0geyBub3RHZXRDdXJyZW50VXNlcjogZmFsc2UsIG5vdEdldFN0b3BVc2VyOiB0cnVlLCBvcmRlckZpZWxkOiBcIm9yZGVyXCIsIHdpdGhBbGxPcmc6IHRydWUsIG9yZ0lkOiAnJyB9XHJcbiAgQElucHV0KCkgaWZTaG93Qmxhbms6IGJvb2xlYW4gPSB0cnVlOy8v5Yqe55CG5Lq65Li656m65pe277yM5piv5ZCm5pi+56S66YCJ5Lq65qGGXHJcbiAgQElucHV0KCkgb3BlbkZyb21JZnJhbWU6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS7jmlmcmFtZeaJk+W8gO+8jOW6lOeUqElEUOaPkOS6pOWuoeaJuembhuaIkFxyXG4gIEBJbnB1dCgpIGFjdGl2aXR5TmFtZTogc3RyaW5nOy8v6IqC54K55ZCN56ewXHJcbiAgQElucHV0KCkgYWxsb3dHbG9iYWxBc3NpZ246IGJvb2xlYW47Ly/mmK/lkKblhajlkZjmjIfmtL5cclxuICBASW5wdXQoKSB3ZkNvbnRleHQ6IFdmQ29udGV4dDsvL+W3peS9nOa1geS4iuS4i+aWh1xyXG4gIEBJbnB1dCgpIGluZGV4OiBhbnk7Ly/ljLrliIbmmK/lk6rkuKrnu4Tku7ZcclxuICBASW5wdXQoKSBpc1VzZU5ld1NlbGVjdFVzZXJIZWxwOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbnm7TmjqXlkK/nlKjmlrDniYjpgInkurrnu4Tku7ZcclxuICBASW5wdXQoKSBpZkhvcml6b250YWw6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuawtOW5s+aOkuWIl1xyXG5cclxuICBAT3V0cHV0KCkgYWZ0ZXJDb25maXJtID0gbmV3IEV2ZW50RW1pdHRlcjxBc3NpZ25lZVtdPigpO1xyXG4gIGdyb3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tcGx1cy1jaXJjbGUgdGV4dC1wcmltYXJ5XCI+PC9pPic7XHJcbiAgZXh0ZW5kVXNlckhlbHA6IGJvb2xlYW4gPSBmYWxzZTsvL+eUqOaIt+W4ruWKqeaYr+WQpuaJqeWxlVxyXG4gIGV4dGVuZFVzZXJIZWxwVXJsOiBzdHJpbmc7Ly/mianlsZXluK7liqnnmoR1cmxcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGkxOG5TZXJ2aWNlOiBJMThuU2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIHRhc2tTZXJ2aWNlOiBUYXNrU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgKSB7XHJcbiAgICAvL+aYr+WQpuS9v+eUqGZhcnJpc+eUqOaIt+W4ruWKqVxyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRXZlVzZXJIZWxwQ29uZmlnKCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZSAmJiByZS51c2VySGVscENvbmZpZyAmJiByZS51c2VySGVscENvbmZpZy5pc0V4dGVuZCA9PSAndHJ1ZScpIHtcclxuICAgICAgICB0aGlzLmV4dGVuZFVzZXJIZWxwID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmV4dGVuZFVzZXJIZWxwVXJsID0gcmUudXNlckhlbHBDb25maWcudXJsICsgJz92PTIwMjIxMTE0JztcclxuICAgICAgfVxyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvL+W8leWFpWZhcnJpc+eUqOaIt+W4ruWKqeiEmuacrFxyXG4gICAgaWYgKHRoaXMub3BlbkZyb21JZnJhbWUpIHtcclxuICAgICAgKHRvcCBhcyBhbnkpLlN5c3RlbS5pbXBvcnQoXCIvcGxhdGZvcm0vY29tbW9uL3dlYi9AZmFycmlzL2NvbW1vbi1wZXJzb25uZWwtc2VsZWN0L3BzYy5qc1wiICsgJz92PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpKS50aGVuKChlKSA9PiB7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBhc3NpZ25lZUluZm8oaW5mbzogQXNzaWduZWVJbmZvKSB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gbnVsbDsvL+a4heepulxyXG4gICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSBudWxsOy8v5riF56m6XHJcbiAgICB0aGlzLl9hc3NpZ25lZUluZm8gPSBpbmZvOy8v5Y+v5Lul5LygbnVsbFxyXG4gICAgaWYgKCF0aGlzLl9hc3NpZ25lZUluZm8pIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5fYXNzaWduZWVJbmZvLnNlbGVjdEFzc2lnbmVlKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJyk7Ly/or7fpgInmi6lcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMgJiYgdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmF1bHRQYXJ0aWNpcGFudCA9IHRoaXMuYW5vbnltb3VzID8gdGhpcy5hbm9ueW1vdXNUZXh0IDogdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMubWFwKHVzZXIgPT4gdXNlci5uYW1lKS5qb2luKCk7Ly/op6PmnpDkurrlkI1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5kZWZhdWx0UGFydGljaXBhbnQgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLm5vVXNlcicpOy8v5pegXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gIXRoaXMuX2Fzc2lnbmVlSW5mby5tdWx0aVNlbGVjdDtcclxuICAgICAgdGhpcy5hbGxvd0dsb2JhbEFzc2lnbiA9IHRoaXMuX2Fzc2lnbmVlSW5mby5hbGxvd0dsb2JhbEFzc2lnbjtcclxuICAgICAgaWYgKHRoaXMuX2Fzc2lnbmVlSW5mby5vcmdhbml6YXRpb25TY29wZSAmJiB0aGlzLl9hc3NpZ25lZUluZm8ub3JnYW5pemF0aW9uU2NvcGUubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3Qgb3JnTGlzdCA9IHRoaXMuX2Fzc2lnbmVlSW5mby5vcmdhbml6YXRpb25TY29wZVswXTtcclxuICAgICAgICB0aGlzLmZpbHRlci5vcmdJZCA9IG9yZ0xpc3QuaWQ7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIud2l0aEFsbE9yZyA9IG9yZ0xpc3QuaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzZXRBbm9ueW1vdXMoYW5vbnltb3VzOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmFub255bW91cyA9IGFub255bW91cztcclxuICB9XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHNldEFub255bW91c1RleHQoYW5vbnltb3VzVGV4dDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmFub255bW91c1RleHQgPSBhbm9ueW1vdXNUZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5bey6YCJ5Lit55qE5Lq677yI5biu5Yqp5LiN5Y+v55So77yJXHJcbiAgICovXHJcbiAgQElucHV0KClcclxuICBzZXQgc2VsZWN0ZWRBc3NpZ25lZXMoc2VsZWN0ZWRBc3NpZ25lZXM6IFVzZXJbXSkge1xyXG4gICAgIXRoaXMuX2Fzc2lnbmVlSW5mbyAmJiAodGhpcy5wbGFjZWhvbGRlciA9IG51bGwpO1xyXG4gICAgdGhpcy5fc2VsZWN0ZWRBc3NpZ25lZXMgPSBzZWxlY3RlZEFzc2lnbmVlcztcclxuICAgIHNlbGVjdGVkQXNzaWduZWVzLmxlbmd0aCAmJiAodGhpcy5kZWZhdWx0UGFydGljaXBhbnQgPSB0aGlzLmFub255bW91cyA/IHRoaXMuYW5vbnltb3VzVGV4dCA6IHNlbGVjdGVkQXNzaWduZWVzLm1hcCh1c2VyID0+IHVzZXIubmFtZSkuam9pbigpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieaLqeWPguS4juiAhVxyXG4gICAqL1xyXG4gIGNsaWNrQXNzaWduVXNlcigpIHtcclxuICAgIGlmICh0aGlzLmlzVXNlTmV3U2VsZWN0VXNlckhlbHApIHtcclxuICAgICAgdGhpcy5leHRlbmRVc2VySGVscCA9IHRydWU7XHJcbiAgICAgIHRoaXMuZXh0ZW5kVXNlckhlbHBVcmwgPSAnL3BsYXRmb3JtL3J1bnRpbWUvd2Yvd2ViL3dmLXVzZXItaGVscC93Zi11c2VyLWhlbHAtZmFycmlzL3dmLXVzZXItaGVscC1mYXJyaXMuanMnICsgJz92PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgbGV0IGNvbnRleHQgPSB7XHJcbiAgICAgIHNpbmdsZVNlbGVjdDogdGhpcy5zaW5nbGVTZWxlY3QsXHJcbiAgICAgIGFsbG93R2xvYmFsQXNzaWduOiB0aGlzLmFsbG93R2xvYmFsQXNzaWduLFxyXG4gICAgICBhc3NpZ25lZVVzZXJzOiB0aGlzLl9hc3NpZ25lZUluZm8gJiYgdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMgJiYgdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMubGVuZ3RoID8gdGhpcy5fYXNzaWduZWVJbmZvLmFzc2lnbmVlVXNlcnMgOiBbXSxcclxuICAgICAgZmlsdGVyOiB0aGlzLmZpbHRlcixcclxuICAgICAgc2VsZWN0ZWRVc2VyczogdGhpcy5hc3NpZ25lZXMgJiYgdGhpcy5hc3NpZ25lZXMubGVuZ3RoID8gdGhpcy5hc3NpZ25lZXMgOiB0aGlzLl9zZWxlY3RlZEFzc2lnbmVlcyxcclxuICAgICAgd2ZDb250ZXh0OiB0aGlzLndmQ29udGV4dFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZXh0ZW5kVXNlckhlbHApIHtcclxuICAgICAgaWYgKHRoaXMub3BlbkZyb21JZnJhbWUpIHtcclxuICAgICAgICB0aGlzLnNob3dGYXJyaXNVc2VySGVscEZyb21XaW5kb3coY29udGV4dCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zaG93RXh0ZW5kVXNlckhlbHAoY29udGV4dCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd0V4dGVuZFVzZXJIZWxwKGNvbnRleHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOWKoOi9veaJqeWxleW4ruWKqVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd0V4dGVuZFVzZXJIZWxwKGNvbnRleHQ6IGFueSkge1xyXG4gICAgU3lzdGVtLmltcG9ydCh0aGlzLmV4dGVuZFVzZXJIZWxwVXJsKS50aGVuKChtb2R1bGVGYWN0b3JpZXM6IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBtb2R1bGVGYWN0b3J5OiBhbnkgPSBPYmplY3QudmFsdWVzKG1vZHVsZUZhY3RvcmllcylbMF07XHJcbiAgICAgIGNvbnN0IG1vZHVsZVJlZiA9IG1vZHVsZUZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICBtb2R1bGVSZWYuaW5zdGFuY2Uuc2hvd0hlbHAoY29udGV4dCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICBsZXQgdXNlckxpc3QgPSByZS51c2VyTGlzdDtcclxuICAgICAgICBpZiAodXNlckxpc3QgJiYgdXNlckxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLmFzc2lnbmVlcyA9IHVzZXJMaXN0Lm1hcCh1c2VyID0+IHsgcmV0dXJuIHsgaWQ6IHVzZXIuaWQsIG5hbWU6IHVzZXIubmFtZSB9IH0pO1xyXG4gICAgICAgICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSB0aGlzLmFzc2lnbmVlcy5tYXAodXNlciA9PiB1c2VyLm5hbWUpLmpvaW4oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5hc3NpZ25lZXMgPSBbXTtcclxuICAgICAgICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWZ0ZXJDb25maXJtLmVtaXQodGhpcy5hc3NpZ25lZXMpO1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/ku453aW5kb3fkuIrlvLnlh7rnlKjmiLfluK7liqlcclxuICBwcml2YXRlIHNob3dGYXJyaXNVc2VySGVscEZyb21XaW5kb3coY29udGV4dDogYW55KSB7XHJcbiAgICBsZXQgcGFyYW0gPSBuZXcgVXNlckhlbHBQYXJhbSgpO1xyXG4gICAgaWYgKGNvbnRleHQud2ZDb250ZXh0KSB7XHJcbiAgICAgIHBhcmFtLmZpbHRlcklkID0gY29udGV4dC53ZkNvbnRleHQucHJvY2Vzc0NhdGVnb3J5SWQ7XHJcbiAgICB9XHJcbiAgICBwYXJhbS5tdWx0aVNlbGVjdCA9ICFjb250ZXh0LnNpbmdsZVNlbGVjdDtcclxuICAgIGxldCBzaG93T3JnVGFiID0gZmFsc2U7XHJcbiAgICBpZiAoY29udGV4dC5hbGxvd0dsb2JhbEFzc2lnbiB8fCAoY29udGV4dC5maWx0ZXIgJiYgY29udGV4dC5maWx0ZXIub3JnSWQpKSB7XHJcbiAgICAgIHNob3dPcmdUYWIgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgbGV0IGZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzID0gJyc7XHJcbiAgICBpZiAoY29udGV4dC5hc3NpZ25lZVVzZXJzICYmIGNvbnRleHQuYXNzaWduZWVVc2Vycy5sZW5ndGgpIHtcclxuICAgICAgZmFycmlzVW5TZWxlY3RlZFVzZXJJZHMgPSBjb250ZXh0LmFzc2lnbmVlVXNlcnMubWFwKHVzZXIgPT4gdXNlci5pZCkuam9pbigpO1xyXG4gICAgICBwYXJhbS51blNlbGVjdGVkVXNlcklkcyA9IGZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzO1xyXG4gICAgfVxyXG4gICAgLy/mnInlj4LkuI7ogIUgKyDlhYHorrjlhajlkZhcclxuICAgIGlmIChzaG93T3JnVGFiICYmIGZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzKSB7XHJcbiAgICAgIHBhcmFtLnNob3dUYWJJZHMgPSAnY2FuZGlkYXRlLHJlY2VudCxvcmdhbml6YXRpb24sZmF2b3JpdGVzLGdyb3VwJztcclxuICAgICAgcGFyYW0uYWN0aXZlVGFiSWQgPSAnY2FuZGlkYXRlJztcclxuICAgIH1cclxuICAgIC8v5YWB6K645YWo5ZGYXHJcbiAgICBpZiAoc2hvd09yZ1RhYiAmJiAhZmFycmlzVW5TZWxlY3RlZFVzZXJJZHMpIHtcclxuICAgICAgcGFyYW0uc2hvd1RhYklkcyA9ICdyZWNlbnQsb3JnYW5pemF0aW9uLGZhdm9yaXRlcyxncm91cCc7XHJcbiAgICAgIHBhcmFtLmFjdGl2ZVRhYklkID0gJ3JlY2VudCc7XHJcbiAgICB9XHJcbiAgICAvL+S7heacieWPguS4juiAhVxyXG4gICAgaWYgKCFzaG93T3JnVGFiICYmIGZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzKSB7XHJcbiAgICAgIHBhcmFtLnNob3dUYWJJZHMgPSAnY2FuZGlkYXRlJztcclxuICAgICAgcGFyYW0uYWN0aXZlVGFiSWQgPSAnY2FuZGlkYXRlJztcclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0LmZpbHRlcikge1xyXG4gICAgICBsZXQgZmlsdGVyID0gY29udGV4dC5maWx0ZXI7XHJcbiAgICAgIHBhcmFtLmluY2x1ZGVDdXJyZW50VXNlciA9ICFmaWx0ZXIubm90R2V0Q3VycmVudFVzZXI7XHJcbiAgICAgIHBhcmFtLm9yZ0lkID0gZmlsdGVyLm9yZ0lkID8gZmlsdGVyLm9yZ0lkIDogJyonO1xyXG4gICAgICBwYXJhbS5lbmFibGVDaGlsZEhpZXJhcmNoeSA9IGZpbHRlci53aXRoQWxsT3JnO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQuc2VsZWN0ZWRVc2VycyAmJiBjb250ZXh0LnNlbGVjdGVkVXNlcnMubGVuZ3RoKSB7XHJcbiAgICAgIHBhcmFtLnVzZXJJZHMgPSBjb250ZXh0LnNlbGVjdGVkVXNlcnMubWFwKHVzZXIgPT4gdXNlci5pZCkuam9pbigpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdG9rZW4gPSAnZ3NwV2ZUYXNrJyArIHRoaXMuaW5kZXg7XHJcbiAgICAodG9wLndpbmRvdyBhcyBhbnkpLkNvbW1vblBlcnNvbm5lbFNlbGVjdC5jb21wb25lbnQuZmFycmlzRGlhbG9nU2hvd0luV2YocGFyYW0sIHRva2VuKTtcclxuICAgIGlmICghdGhpcy5wc2NDaGFuZ2UpIHtcclxuICAgICAgdGhpcy5wc2NDaGFuZ2UgPSAodG9wLndpbmRvdyBhcyBhbnkpLkZBUlJJU19QU0Muc2VsZWN0aW9uc0NoYW5nZS5zdWJzY3JpYmUoKHJlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlLnRva2VuID09IHRva2VuKSB7XHJcbiAgICAgICAgICBsZXQgdXNlckxpc3QgPSByZS5kYXRhO1xyXG4gICAgICAgICAgaWYgKHVzZXJMaXN0ICYmIHVzZXJMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnbmVlcyA9IHVzZXJMaXN0Lm1hcCh1c2VyID0+IHsgcmV0dXJuIHsgaWQ6IHVzZXIudXNlcklkLCBuYW1lOiB1c2VyLm5hbWUgfSB9KTtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSB0aGlzLmFzc2lnbmVlcy5tYXAodXNlciA9PiB1c2VyLm5hbWUpLmpvaW4oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduZWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gJyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmFmdGVyQ29uZmlybS5lbWl0KHRoaXMuYXNzaWduZWVzKTtcclxuICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/muIXpmaRcclxuICBhc3NpZ25Vc2VyQ2xlYXIoKSB7XHJcbiAgICB0aGlzLmFzc2lnbmVlcyA9IFtdO1xyXG4gICAgdGhpcy5hc3NpZ25Vc2VyTmdNb2R1bGUgPSBudWxsO1xyXG4gICAgdGhpcy5hZnRlckNvbmZpcm0uZW1pdChbXSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=