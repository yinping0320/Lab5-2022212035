{"version":3,"file":"gsp-wf-wf-task-handler.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@gsp-wf/wf-task-handler/lib/service/task.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-action.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/en.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-cht.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-chs.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/index.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/i18n.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-entity.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-context.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-response.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-center-config.ts","ng://@gsp-wf/wf-task-handler/lib/entity/workitem-execute-param.ts","ng://@gsp-wf/wf-task-handler/lib/entity/user.ts","ng://@gsp-wf/wf-task-handler/lib/entity/urge-handle.ts","ng://@gsp-wf/wf-task-handler/lib/entity/batchVerifysigned.ts","ng://@gsp-wf/wf-task-handler/lib/entity/wfContext.ts","ng://@gsp-wf/wf-task-handler/lib/components/urge-handle/urge-handle.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/base-payload.ts","ng://@gsp-wf/wf-task-handler/lib/entity/add-sign.ts","ng://@gsp-wf/wf-task-handler/lib/entity/simulaite-subject.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-execute/task-execute.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/start-process-payload.ts","ng://@gsp-wf/wf-task-handler/lib/entity/postMessage.ts","ng://@gsp-wf/wf-task-handler/lib/entity/process-cache.ts","ng://@gsp-wf/wf-task-handler/lib/submit/process-selector/process-selector.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/comment.ts","ng://@gsp-wf/wf-task-handler/lib/components/comment-manage/comment-manage.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.service.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/translate.pipe.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-assigninfo/task-assigninfo.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/farris-user-help-param.ts","ng://@gsp-wf/wf-task-handler/lib/components/assignee-info/assignee-info.component.ts","ng://@gsp-wf/wf-task-handler/lib/throttleTime/throttleClickDirective.ts","ng://@gsp-wf/wf-task-handler/lib/entity/attachment.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-comment/task-comment.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.module.ts","ng://@gsp-wf/wf-task-handler/lib/entity/commonCommentFilter.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, forkJoin, Subject } from 'rxjs';\r\nimport { AssignParameter } from '../entity/complete-response';\r\nimport { CompleteContext } from '../entity/complete-context';\r\nimport { BatchVerifySignedContext } from '../entity/batchVerifysigned';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { CancelSubmitPayload, StartProcessPayload } from '../entity/start-process-payload';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocUploadEntity } from '../entity/attachment';\r\nimport { WorkItemExecuteParam } from '../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleSimulateContext } from '../entity/urge-handle';\r\nimport { AddSignPayload } from '../entity/add-sign';\r\nimport { ServerExceptionEntity } from '../entity/exception-entity';\r\nimport { BsModalRef } from '@farris/ui-modal';\r\nimport { TaskCenterConfig } from '../entity/task-center-config';\r\nimport { CommonComment } from '../entity/comment';\r\nimport { CommonCommentFilter } from '../entity/commonCommentFilter';\r\n\r\n@Injectable()\r\nexport class TaskService {\r\n\r\n    constructor(\r\n        private httpSvc: HttpService,\r\n        private message: MessagerService,\r\n    ) { }\r\n\r\n    getUsersByIds(ids: string[]): Observable<any> {\r\n        var pathUrl = '/api/runtime/sys/v1.0/users';\r\n        return forkJoin(ids.map(id => this.httpSvc.get(pathUrl + `/${id}` + `?mode=0002`)));\r\n    }\r\n    /**\r\n     * 获取工作项操作列表\r\n     */\r\n    getWorkItemActions(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/actions`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 执行审批操作\r\n     * @param context 执行审批上下文\r\n     */\r\n    complete(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 执行审批预解析\r\n     * @param context 执行审批上下文\r\n     */\r\n    completeSimulate(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete-simulation`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 获取跳转活动信息\r\n     * @param workItemId 工作项Id\r\n     * @param action 动作编号\r\n     */\r\n    getDestinationScope(workItemId: string, action: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/nextNodes/${action}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据节点ID获取指定参与者的结果\r\n     * @param workItemId\r\n     * @param nodeId 说明：nodeIds=[\"node1\",\"node2\",···]\r\n     * @returns 指派信息的数组 re: FlowNodeInfo[]\r\n     */\r\n    getSimulationAssigneeInfo(workItemId: string, nodeId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/simulation-assigneeInfo?nodeIds=[${nodeId}]`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 执行征询、知会\r\n     * @param context 上下文\r\n     */\r\n    addSign(context: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/counterSignAdd`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 已阅\r\n     * @param context 参数\r\n     */\r\n    readTask(context: WorkItemExecuteParam): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/read`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 查询单据信息（方法名不要动，其他地方有引用）\r\n     * @param workItemId 工作项Id\r\n     */\r\n    getTaskFormInfo(workItemId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let cacheCode = \"gspWfTaskFormInfo\" + workItemId;\r\n        const taskForm = localStorage.getItem(cacheCode);\r\n        if (taskForm) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(taskForm));\r\n            }, 10);\r\n        } else {\r\n            const formParUrl = `/api/runtime/wf/v1.0/workItems/${workItemId}/formInfo`;\r\n            this.httpSvc.get(formParUrl).subscribe(re => {\r\n                subject.next(re);\r\n                localStorage.setItem(cacheCode, JSON.stringify(re));\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取指派信息\r\n     * @param taskId 工作项Id\r\n     * 此接口只返回一个AssignInfo类序列化后的信息，不是多个\r\n     */\r\n    getAssigneeInfo(taskId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${taskId}/assigneeInfo`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取加签移交范围设置\r\n     * @param workItemId\r\n     * @param actionCode\r\n     */\r\n    getOrganizationScope(workItemId: string, actionCode: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/organizationScope/${actionCode}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据流程实例ID和任务状态办理任务\r\n     * @param procInstId 流程实例id\r\n     * @param state 任务状态 2或5\r\n     */\r\n    getTaskByProcInstId(procInstId: string, state: number): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/processInstanceId?procInstId=${procInstId}&state=${state}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据workitemID获取任务实体\r\n     * @param workItemId\r\n     */\r\n    getTaskByWorkItemId(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/sourceId/${workItemId}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据工作项ID指派任务\r\n     * @param assigneesPa 指派参数\r\n     */\r\n    assignNextUsersByWorkItemId(assigneesPa: AssignParameter): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/assignUser`;\r\n        return this.httpSvc.post(url, assigneesPa);\r\n    }\r\n\r\n    /**\r\n     * 取回\r\n     * @param workItemId task id\r\n     * @param comment comment\r\n     */\r\n    retrieve(context: { workItemId: string, comment?: string }): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/retrieve`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 任务移交\r\n     * @param taskId 工作项Id\r\n     * @param targetUId 目标用户Id\r\n     */\r\n    transfer(transferContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/transfer`;\r\n        return this.httpSvc.post(url, transferContext);\r\n    }\r\n\r\n    /**\r\n     * 任务评论\r\n     * @param taskId 工作项Id\r\n     * @param targetUId 目标用户Id\r\n     */\r\n    comment(commentContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/comment`;\r\n        return this.httpSvc.post(url, commentContext);\r\n    }\r\n\r\n    /**\r\n     * 领用任务\r\n     * @param taskId 工作项Id\r\n     */\r\n    claim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/claim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * 取消领用\r\n     * @param taskId 任务Id\r\n     */\r\n    unClaim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/unclaim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * 报错提示\r\n     * @param error\r\n     */\r\n    error(error: any) {\r\n        if (error && error.error && error.error.Message) {\r\n            var message = error.error.Message;\r\n            this.message.show('warning', message, { safeHtml: false });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 启动流程接口\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcess(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 启动流程预解析\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcessSimulate(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess-simulation`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 取消提交\r\n     * @param param 参数\r\n     */\r\n    cancelSubmit(param: CancelSubmitPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/cancelSubmit`;\r\n        return this.httpSvc.post(url, param);\r\n    }\r\n\r\n    static newId() {\r\n        const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n\r\n    /**\r\n     * 获取用户常用意见列表\r\n     * @returns \r\n     */\r\n    getCommentList(filter?: CommonCommentFilter): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/commonComments`;\r\n        filter && filter.type && (url += `?type=${filter.type}`)\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 添加常用意见\r\n     * @returns \r\n     */\r\n    addComment(comment: CommonComment): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments`;\r\n        return this.httpSvc.post(url, comment);\r\n    }\r\n\r\n    /**\r\n     * 删除一条常用意见\r\n     * @param id 常用意见id\r\n     * @returns \r\n     */\r\n    deleteComment(id: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments/${id}`;\r\n        return this.httpSvc.delete(url, null);\r\n    }\r\n\r\n    /**\r\n     * 获取任务中心配置项\r\n     * @param code 配置项的Code\r\n     */\r\n    getTaskCenterConfigByCode(code: string, ownerType?: string, ownerId?: string): Observable<any> {\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/code?code=${code}`;\r\n        ownerType && (url += `&ownerType=${ownerType}`);\r\n        ownerId && (url += `&ownerId=${ownerId}`);\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取系统级别配置（缓存为一天）\r\n     */\r\n    getAllTaskCenterConfig(): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskAllConfig\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all?ownerType=all&ownerId=*`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                subject.next(re);\r\n                this.removeConfig(code);\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取任务分类级别配置\r\n     */\r\n    getTaskCategoryCenterConfig(categoryId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskCategoryConfig\" + categoryId;\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all`;\r\n            url += `?ownerType=category&ownerId=${categoryId}`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                subject.next(re);\r\n                this.removeConfig(code);\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n    * 获取任务中心个人用户配置（缓存为一天）\r\n    */\r\n    getAllUserConfig(): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskUserConfig\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                this.removeConfig(code);\r\n                subject.next(re);\r\n            }, error => {\r\n                subject.error(error);\r\n            });\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 添加用户级别自定义配置\r\n     * @param code 配置项编号\r\n     */\r\n    addUserConfig(code: string, currentValue: string): Observable<any> {\r\n        let configCode = \"gspWfTaskUserConfig\";\r\n        let todayCode = configCode + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            let list = JSON.parse(configStr);\r\n            if (list && list.length) {\r\n                let item = (list as TaskCenterConfig[]).find(l => l.configCode == code);\r\n                if (item) {\r\n                    item.currentValue = currentValue;\r\n                    localStorage.setItem(todayCode, JSON.stringify(list));\r\n                }\r\n            }\r\n        }\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/add?configCode=${code}&currentValue=${currentValue}`;\r\n        return this.httpSvc.post(url, null);\r\n    }\r\n\r\n    /**\r\n     * 获取用户头像（已被任务中心调用）\r\n     * @param userId 用户ID\r\n     */\r\n    getUserAvatar(userId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskUserAvatar\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let todayUserCode = todayCode + userId;\r\n        let avatarStr = localStorage.getItem(todayUserCode);\r\n        if (avatarStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(avatarStr));\r\n            }, 100);\r\n        } else {\r\n            const url = `/api/runtime/sys/v1.0/userinfos/setting/users?userId=${userId}`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                subject.next(re);\r\n                localStorage.setItem(todayUserCode, JSON.stringify(re));\r\n                this.removeConfig(code);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取当前日期\r\n     */\r\n    getCurrentDateString() {\r\n        let date = new Date();\r\n        let year = date.getFullYear().toString();\r\n        let month = (date.getMonth() + 1).toString();\r\n        let day = date.getDate().toString();\r\n        return year + month + day;\r\n    }\r\n\r\n    /**\r\n     * 移除localStorage缓存\r\n     * @param key \r\n     */\r\n    private removeConfig(key: string) {\r\n        let todayKey = key + this.getCurrentDateString();\r\n        for (let item in localStorage) {\r\n            if (item.indexOf(key) > -1 && item.indexOf(todayKey) < 0) {\r\n                localStorage.removeItem(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 真正上传附件\r\n     * @param files\r\n     */\r\n    uploadAttachment(files: FileUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc/commit`;\r\n        return this.httpSvc.put(url, files);\r\n    }\r\n\r\n    /**\r\n     * 删除附件\r\n     * @param fileDeleteEntity\r\n     */\r\n    deleteAttachment(fileDeleteEntity: FileDeleteEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        return this.httpSvc.delete(url, fileDeleteEntity);\r\n    }\r\n\r\n    /**\r\n     * 创建内码\r\n     */\r\n    createNM() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取当前用户信息\r\n     */\r\n    getUserInfo(): Observable<any> {\r\n        let url = `/api/runtime/sys/v1.0/userinfos?infoType=user`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取用户所有签名\r\n     */\r\n    getUserSignId(userId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = 'gspWfTaskUserSign' + userId;\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let signId = localStorage.getItem(todayCode);\r\n        if (signId) {\r\n            setTimeout(() => {\r\n                subject.next(signId);\r\n            }, 100);\r\n        } else {\r\n            let url = `/api/runtime/dfs/v1.0/formdoc/fileinfo/form?formid=${userId}&rootid=taskcentersignature`;\r\n            this.httpSvc.get(url).subscribe((result: any) => {\r\n                if (result && result.length) {\r\n                    var sign;\r\n                    if (result.length == 1) {\r\n                        sign = result[0];\r\n                    } else {\r\n                        const list = result.filter(a => a && a.lastModifiedTime);\r\n                        sign = list.reduce(function (a, b) {\r\n                            return a.lastModifiedTime > b.lastModifiedTime ? a : b;\r\n                        })\r\n                    }\r\n                    subject.next(sign.id);\r\n                    localStorage.setItem(todayCode, sign.id);\r\n                    this.removeConfig(code);\r\n                } else {\r\n                    subject.next('');\r\n                }\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 上传签名，返回长传后的签名id\r\n     */\r\n    uploadSignature(gspDocUploadEntity: GspDocUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        let header = this.httpSvc.setHeader({\r\n            body: gspDocUploadEntity,\r\n            responseType: 'text'\r\n        })\r\n        return this.httpSvc.request('Post', url, header);\r\n    }\r\n\r\n\r\n    /**\r\n     * 解析文件类型，给出缩略图\r\n     * @param attachmentInfo\r\n     */\r\n    createItem(attachmentInfo: any) {\r\n        var pos = attachmentInfo.fileName.lastIndexOf(\".\");\r\n        var type = attachmentInfo.fileName.substring(pos + 1);\r\n        type = (type == '' ? 'Default' : type.toLowerCase());\r\n        var docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';\r\n        var videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';\r\n        var audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';\r\n        var imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';\r\n        if (docLib.indexOf(type) >= 0) {\r\n            type = type.toLowerCase();\r\n        } else if (videoLib.indexOf(type) >= 0) {\r\n            type = 'video';\r\n        } else if (audioLib.indexOf(type) >= 0) {\r\n            type = 'audio';\r\n        } else if (imgLib.indexOf(type) >= 0) {\r\n            type = 'picture';\r\n        } else {\r\n            type = 'default';\r\n        }\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * 注册主题，并获取当前主题唯一标识token\r\n     * @param subjectCode 主题编码，非唯一标识，token为唯一标识\r\n     * @param token 主题唯一标识。\r\n     * @returns 主题的唯一标识。\r\n     */\r\n    subjectRegister(subjectCode: string, token: string) {\r\n        return (window as any).gspframeworkService.rtf.broadcast.subjectRegister(subjectCode, { funcId: token });\r\n    }\r\n\r\n    /**\r\n     * 监听移除\r\n     * @param token\r\n     */\r\n    subjectRemove(token: string) {\r\n        (window as any).gspframeworkService.rtf.broadcast.subjectRemove(token);\r\n    }\r\n\r\n    /**\r\n     * 通过某个token发送消息\r\n     * @param subjectToken 主题唯一的token标识\r\n     * @param message 要发送的消息\r\n     */\r\n    subjectNotify(subjectToken: string, message: any) {\r\n        (window as any).gspframeworkService.rtf.broadcast.notify(subjectToken, message);\r\n    }\r\n\r\n    /**\r\n     * 添加观察者，并监听消息\r\n     * @param subjectToken 主题token\r\n     * @param observerToken 当前监听主题的观察者唯一标识token。此处固定\r\n     * @param handler 监听到消息后执行的动作\r\n     */\r\n    subjectResponse(subjectToken: string, observerToken: string, handler: (value: any) => void) {\r\n        (window as any).gspframeworkService.rtf.broadcast.response(subjectToken, observerToken, handler);\r\n    }\r\n\r\n    /**\r\n     * 获取催办模拟结果\r\n     * @param context 参数\r\n     * @returns\r\n     */\r\n    urgeHandleSimulate(context: UrgeHandleSimulateContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/getUrgeHandleInfo`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 执行催办\r\n     * @param context 参数\r\n     * @returns\r\n     */\r\n    urgeHandle(context: UrgeHandleContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/urgeHandle`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**批量数字签名\r\n     * @param context 参数\r\n     */\r\n    batchVerifySigned(context: BatchVerifySignedContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/batchVerifySigned`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 获取用户帮助前端配置\r\n     * @returns \r\n     */\r\n    getWfUserHelpConfig(): Observable<any> {\r\n        let date = new Date();\r\n        let year = date.getFullYear();\r\n        let month = date.getMonth() + 1;\r\n        let day = date.getDate();\r\n        const url = `/platform/runtime/wf/web/wf-user-help/config.json?v=` + year + month + day;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取加签配置\r\n     */\r\n    getAdhocConfig(workItemId: string): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/workItems/${workItemId}/adhocConfig/AddSignBehind`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n    /**\r\n     * 加签提交\r\n     */\r\n    adhocAssignee(payload: AddSignPayload) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/adhocAssignee`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n    /**\r\n     * 取消征询\r\n     */\r\n    cancelConsult(payload: WorkItemExecuteParam) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/cancelConsult`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 判断是否inSuite环境\r\n     */\r\n    isInSuite(): boolean {\r\n        const frameWorkService = (window as any).gspframeworkService;\r\n        if (frameWorkService && frameWorkService.rtf) {\r\n            const extendMethod = frameWorkService.rtf.extendMethod;\r\n            if (extendMethod && extendMethod.getExtObj()) {\r\n                var extObj = extendMethod.getExtObj();\r\n                const mode = extObj.iGIX4inSuiteMode();\r\n                if (mode) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取字符串字节长度\r\n     */\r\n    getBytesLength(str) {\r\n        // 在GBK编码里，除了ASCII字符，其它都占两个字符宽\r\n        return str.replace(/[^\\x00-\\xff]/g, 'xx').length;\r\n    }\r\n\r\n    /**\r\n     * 获取top window\r\n     * @returns \r\n     */\r\n    getTopWindow(): Window {\r\n        let curWin: Window = window.self;\r\n        try {\r\n            while (curWin.location.origin === curWin.parent.location.origin) {\r\n                if (curWin !== curWin.parent && !(curWin as any).isRTFTopWin) {\r\n                    curWin = curWin.parent;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        } catch (e) { }\r\n        return curWin;\r\n    }\r\n\r\n    /**\r\n     * 弹出错误提示\r\n     * @param error \r\n     */\r\n    handleErrorLevel(errorMessage: any): void {\r\n        if (errorMessage && errorMessage.status < 500) {\r\n            return;\r\n        }\r\n        let error = errorMessage.error as ServerExceptionEntity;\r\n        const exceptionMsg = error.Message || '';\r\n        const date = error.date || new Date();\r\n        const localDate = date;\r\n        const detail = error.Detail || `${error.Message}\\r\\n发生时间：${localDate}\\r\\n详细信息：${error.innerMessage}` || '';\r\n\r\n        const innerMessage = error.innerMessage || null;\r\n        let bsModalRef: BsModalRef;\r\n        const options = {\r\n            showMaxButton: false,\r\n            buttons: [\r\n                {\r\n                    text: '知道了',\r\n                    cls: 'btn btn-primary btn-lg',\r\n                    handle: () => {\r\n                        bsModalRef.close();\r\n                    }\r\n                }\r\n            ],\r\n            width: 440,\r\n            height: 200,\r\n            safeHtml: false,\r\n            exception: {\r\n                date: localDate,\r\n                message: innerMessage,\r\n                copyButton: {\r\n                    text: '复制详细信息',\r\n                    onClick: (e) => {\r\n                        const result = this.copyToClipboard(detail);\r\n                        bsModalRef.content.showMiniNotify(result, 1500);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        bsModalRef = this.message.show('exception', exceptionMsg, options);\r\n    }\r\n\r\n    /**\r\n     * 赋值到粘贴板\r\n     * @param text \r\n     * @returns \r\n     */\r\n    private copyToClipboard(text): boolean {\r\n        const windowRef: any = window;\r\n        if (windowRef.clipboardData && windowRef.clipboardData.setData) {\r\n            return windowRef.clipboardData.setData(\"Text\", text);\r\n        } else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\r\n            var textarea = document.createElement(\"textarea\");\r\n            textarea.textContent = text;\r\n            textarea.style.position = \"fixed\";\r\n            document.body.appendChild(textarea);\r\n            textarea.select();\r\n            try {\r\n                return document.execCommand(\"copy\");\r\n            } catch (ex) {\r\n                console.warn(\"Copy to clipboard failed.\", ex);\r\n            } finally {\r\n                document.body.removeChild(textarea);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n","/**\r\n * 业务动作参数\r\n */\r\nexport class ActionParameter {\r\n    /**\r\n     * 参数编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 参数值\r\n     */\r\n    value: string;\r\n}\r\n/**\r\n * 任务动作定义\r\n */\r\nexport class TaskActionDef {\r\n    /**\r\n     * id\r\n     */\r\n    id: string;\r\n    /**\r\n     * 动作编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 动作显示名称\r\n     */\r\n    name: string;\r\n    /**\r\n     * 动作实现\r\n     */\r\n    impl: string;\r\n    /**\r\n     * 是否批量操作\r\n     */\r\n    isBatchAction: boolean;\r\n    /**\r\n     * 是否是联查操作\r\n     */\r\n    isHyperlinkAction: boolean;\r\n    /**\r\n     * 是否主操作\r\n     */\r\n    isPrimaryAction: boolean;\r\n    /**\r\n     * 动作排序号\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * 类型id\r\n     */\r\n    typeId: string;\r\n    /**\r\n     * 前事件\r\n     */\r\n    preEvents?: ActionEvent[];\r\n    /**\r\n     * 后事件\r\n     */\r\n    postEvents?: ActionEvent[];\r\n}\r\n/**\r\n * 任务动作定义\r\n */\r\nexport class TaskAction extends TaskActionDef {\r\n    /**\r\n     * 任务动作定义编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 参数列表\r\n     */\r\n    parameters: ActionParameter[];\r\n}\r\n\r\nexport class ActionEvent {\r\n    /**\r\n     * ID\r\n     */\r\n    id: string;\r\n    /**\r\n     * 任务分类\r\n     */\r\n    taskCategoryId: string;\r\n    /**\r\n     * 动作编号\r\n     */\r\n    actionCode: string;\r\n    /**\r\n     * 实现\r\n     */\r\n    eventImpl: string;\r\n    /**\r\n     * 排序\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * 终端，web，app\r\n     */\r\n    terminal: string;\r\n    /**\r\n     * 类型，Pre,Post\r\n     */\r\n    type: string;\r\n    /**\r\n     * 是否为批量扩展\r\n     */\r\n    batch: boolean;\r\n}\r\n","export const en = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: 'Please select at least one approver.',\r\n    },\r\n    columnName: {\r\n      name: 'Name',\r\n      code: 'Code',\r\n      department: 'Department',\r\n    },\r\n    title: 'Approval confirmation',\r\n    inputLabel: 'Approval comments',\r\n    inputHolder: 'comments',\r\n    footOk: 'OK',\r\n    footCancel: 'Cancel',\r\n    selectUser: 'Select User',\r\n    hideComment: 'Hide comment',\r\n    taskForm: 'Task Handle',\r\n    success: ' success'\r\n  },\r\n  cueWords: {\r\n    successPass: 'Approved successfully.',\r\n    inputOpinion: 'Please input your opinion',\r\n    selectNode: 'Please select target nodes',\r\n    select: 'Please select',\r\n    processor: 'processor',\r\n    attachmentsRequired: 'Please upload the attachment',\r\n    signatureRequired: 'Please upload the signature',\r\n    assignUser: 'Assign user',\r\n    operateSuccess: 'Operate successfully',\r\n    commonCommentTooLong: 'Comment is too long',\r\n  },\r\n  task: {\r\n    selectPlaceholder: 'Please select',\r\n    passComment: 'Pass',\r\n    processAlone: 'Please handle it separately',\r\n    urgeText: 'Receiver',\r\n    backNodeText: ' node',\r\n    selectProcessor: 'Please select the user',\r\n    notFoundBill: 'This document cannot be processed on the computer. Please try to process it on the mobile terminal',\r\n    nextNodeText: 'Next node',\r\n    assignText: 'Assign to',\r\n    noUser: 'No one',\r\n    title: 'Handle Task',\r\n    noTask: 'There is no task.',\r\n    commentTooLong: 'Comments exceed the 4000 English character limit, it is recommended to submit comments by uploading attachments',\r\n    activityName: 'processor',\r\n    receiver: 'receiver',\r\n    urgeComment: \"Please input your comment\",\r\n    noUrgeUsers: \"There is no user to urge handle\",\r\n    noUrgeSubject: \"no urge subject\",\r\n    noUrgeContent: \"no urge content\",\r\n    person: \" people\",\r\n    addSign: \"Add sign\",\r\n    priority: \"Priority\",\r\n    selectPriority: \"Please select the priority\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: 'Please select process',\r\n    title: 'Select process',\r\n    selectNode: 'Please select next node',\r\n    submitSuccess: 'Start process successfully',\r\n    submitFailed: 'Start process failed',\r\n    cancelSubmitSuccess: 'Cancel submit successfully',\r\n    cancelSubmitFailed: 'Cancel submit failed',\r\n    dataIdIsNull: 'Please select a data',\r\n    dataIdIsEmpty: 'Please select a data',\r\n    bizDefKeyIsNull: 'Biz definition key is null',\r\n    success: 'Success',\r\n    row: '',\r\n    failed: ', failed',\r\n    node: 'node, ',\r\n    noUser: 'no suitable handler was found',\r\n    cancelSubmitInfo: 'Please resubmit',\r\n    procDef: 'Process',\r\n    processTowards: 'Process towards',\r\n    otherNodesAssign: 'Assign other nodes'\r\n  },\r\n  batchSubmit: {\r\n    row: '',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    validationFailed: 'Signature verification failed',\r\n    single: 'Failed tasks please process it singly',\r\n    selected: 'Selected',\r\n    item: 'items,',\r\n    time: 'time more than',\r\n    second: 'seconds'\r\n  },\r\n  batchStartProcess: {\r\n    row: '<br/>',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    single: 'Failed tasks please process it singly'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: 'Approval comments',\r\n      add: 'Add',\r\n      delete: 'Delete',\r\n      save: 'Save',\r\n      cancel: 'Cancel',\r\n      content: 'Content',\r\n      order: 'Order',\r\n      inputLabel: 'Comments',\r\n      manage: 'Comments management',\r\n      attachmentUpload: 'Attachment',\r\n      repeatFile: 'Contains repeat files:',\r\n      type: 'Type',\r\n      operate: 'Operate',\r\n      confirm: 'Confirm',\r\n      clickToAdd: 'Click to add',\r\n      public: 'public',\r\n      private: 'private',\r\n      messageSubject: 'message subject',\r\n      messageContent: 'message content',\r\n      comment: 'Comments',\r\n      tooLongTips: 'exceed the 4000 English character limit, it is recommended to submit comments by uploading attachments'\r\n    },\r\n    attachment: {\r\n      tips: 'click to upload attachments'\r\n    },\r\n    signature: {\r\n      title: 'Signature',\r\n      reset: 'Reset',\r\n      ok: 'OK',\r\n      sign: 'Sign, ',\r\n      upload: 'Upload',\r\n      tips: 'click to sign or upload a picture',\r\n      dialogTitle: 'Signature',\r\n      note1: '',\r\n      note2: 'or',\r\n      note3: '',\r\n      disable: 'disable signature',\r\n      download: \"download\",\r\n      view: \"view\",\r\n      delete: \"delete\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: 'Allow',\r\n    multiInstanceType: 'Multi instance type',\r\n    parallel: 'parallel',\r\n    preempt: 'preempt',\r\n    sequential: 'sequential'\r\n  },\r\n  backWardConfig: {\r\n    sequence: 'Sequence',\r\n    backToMe: 'Back to me',\r\n    backToCurrentNode: 'Back to current node',\r\n    allowResubmitToThisNode: ',resubmit to this node'\r\n  }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: '請選擇辦理人員',\r\n    },\r\n    columnName: {\r\n      name: '名稱',\r\n      code: '編號',\r\n      department: '組織信息',\r\n    },\r\n    title: '審批確認',\r\n    inputLabel: '審批意見',\r\n    inputHolder: '請輸入審批意見',\r\n    footOk: '確定',\r\n    footCancel: '取消',\r\n    selectUser: '選擇用戶',\r\n    hideComment: '意見隱藏',\r\n    taskForm: '任务办理',\r\n    success: '成功'\r\n  },\r\n  cueWords: {\r\n    successPass: '審批通過',\r\n    inputOpinion: '請輸入審批意見',\r\n    selectNode: '請選擇下一環節',\r\n    select: '請選擇',\r\n    processor: '辦理人',\r\n    attachmentsRequired: '請上傳附件',\r\n    signatureRequired: '請設置簽名',\r\n    assignUser: '指派',\r\n    operateSuccess: '操作成功',\r\n    commonCommentTooLong: '意見超長（最長255字符），請重新編輯',\r\n  },\r\n  task: {\r\n    selectPlaceholder: '請選擇',\r\n    passComment: '通過',\r\n    processAlone: '請單獨處理',\r\n    urgeText: '接收人员',\r\n    backNodeText: '節點',\r\n    selectProcessor: '請選擇辦理人員',\r\n    notFoundBill: '該單據不支持在電腦端辦理，請嘗試去移動端進行辦理',\r\n    nextNodeText: '下一環節',\r\n    assignText: '辦理人員',\r\n    noUser: '無',\r\n    title: '任務辦理',\r\n    noTask: '未找到對應的任務',\r\n    commentTooLong: '處理意見超出 4000 個英文字符限制，建議以附件方式提交意見',\r\n    activityName: '辦理人員',\r\n    receiver: \"接收人員\",\r\n    urgeComment: \"請輸入催辦信息\",\r\n    noUrgeUsers: \"沒有符合條件的催辦用戶\",\r\n    noUrgeSubject: \"消息主題未配置\",\r\n    noUrgeContent: \"消息內容未配置\",\r\n    person: \"人员\",\r\n    addSign: \"加签\",\r\n    priority: \"紧急程度\",\r\n    selectPriority: \"请选择紧急程度\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: '請選擇流程',\r\n    title: '提交確認',\r\n    selectNode: '請選擇下一環節',\r\n    submitSuccess: '提交審批成功',\r\n    submitFailed: '提交審批失敗',\r\n    cancelSubmitSuccess: '取消提交成功',\r\n    cancelSubmitFailed: '取消提交失敗',\r\n    dataIdIsNull: '請選擇一條數據',\r\n    dataIdIsEmpty: '請選擇一條數據',\r\n    bizDefKeyIsNull: '流程分類ID不能為空',\r\n    success: '取消成功',\r\n    row: '條<br/>',\r\n    failed: '取消失敗',\r\n    node: '節點，',\r\n    noUser: '沒有找到合適的辦理人',\r\n    cancelSubmitInfo: '已撤回至流程的開始節點，請修改後重新提交',\r\n    procDef: '流程定义',\r\n    processTowards: '即將流向',\r\n    otherNodesAssign: '指定其他節點辦理人'\r\n  },\r\n  batchSubmit: {\r\n    row: '條，<br/>',\r\n    success: '辦理成功',\r\n    error: '辦理失敗',\r\n    failed: '需要交互',\r\n    single: '失敗的任務請單獨處理',\r\n    selected: '已選中',\r\n    item: '項，',\r\n    time: '預計處理時間較長（大於',\r\n    second: '秒）'\r\n  },\r\n  batchStartProcess: {\r\n    row: '條，<br/>',\r\n    success: '提交成功',\r\n    error: '提交失敗',\r\n    failed: '需要交互',\r\n    validationFailed: '驗簽失敗',\r\n    single: '失敗的單據請單獨處理'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: '常用意見管理',\r\n      add: '新增',\r\n      delete: '刪除',\r\n      save: '保存',\r\n      cancel: '取消',\r\n      content: '常用意見',\r\n      order: '順序',\r\n      inputLabel: '常用意見',\r\n      manage: '意見管理',\r\n      attachmentUpload: '附件',\r\n      repeatFile: '包含重復文件：',\r\n      type: '類別',\r\n      operate: '操作',\r\n      confirm: '確認',\r\n      clickToAdd: '新增常用意見',\r\n      public: '公有',\r\n      private: '個人',\r\n      messageSubject: '消息主題',\r\n      messageContent: '消息內容',\r\n      comment: '處理意見',\r\n      tooLongTips: '超出 4000 個英文字符限制，建議以附件方式提交意見'\r\n    },\r\n    attachment: {\r\n      tips: '點擊上傳附件'\r\n    },\r\n    signature: {\r\n      title: '簽名',\r\n      reset: '清空',\r\n      ok: '確定',\r\n      sign: '手寫簽名，',\r\n      upload: '上傳圖片',\r\n      tips: '點擊設置簽名',\r\n      dialogTitle: '電子簽名',\r\n      note1: '電子簽名可',\r\n      note2: '也可通過',\r\n      note3: '進行設置',\r\n      disable: '不啟用簽名',\r\n      download: \"下載\",\r\n      view: \"查看\",\r\n      delete: \"删除\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: '允許再',\r\n    multiInstanceType: '多人審批方式',\r\n    parallel: '並行會簽',\r\n    preempt: '任意人處理',\r\n    sequential: '按順序依次處理'\r\n  },\r\n  backWardConfig: {\r\n    sequence: '按順序流轉',\r\n    backToMe: '返回我',\r\n    backToCurrentNode: '返回本節點',\r\n    allowResubmitToThisNode: '后再次提交时直接回到本节点'\r\n  }\r\n};\r\n","export const zh_CHS = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: '请选择办理人员',\r\n    },\r\n    columnName: {\r\n      name: '名称',\r\n      code: '编号',\r\n      department: '组织信息',\r\n    },\r\n    title: '审批确认',\r\n    inputLabel: '审批意见',\r\n    inputHolder: '请输入审批意见',\r\n    footOk: '确定',\r\n    footCancel: '取消',\r\n    selectUser: '选择用户',\r\n    hideComment: '意见隐藏',\r\n    taskForm: '任务办理',\r\n    success: '成功'\r\n  },\r\n  cueWords: {\r\n    successPass: '审批通过',\r\n    inputOpinion: '请输入审批意见',\r\n    selectNode: '请选择下一环节',\r\n    select: '请选择',\r\n    processor: '办理人',\r\n    attachmentsRequired: '请上传附件',\r\n    signatureRequired: '请设置签名',\r\n    assignUser: '指派',\r\n    operateSuccess: '操作成功',\r\n    commonCommentTooLong: '意见超长（最长255字符），请重新编辑',\r\n  },\r\n  task: {\r\n    selectPlaceholder: '请选择',\r\n    passComment: '通过',\r\n    processAlone: '请单独处理',\r\n    urgeText: '接收人员',\r\n    backNodeText: '节点',\r\n    selectProcessor: '请选择办理人员',\r\n    notFoundBill: '该单据不支持在电脑端办理，请尝试去移动端进行办理',\r\n    nextNodeText: '下一环节',\r\n    assignText: '办理人员',\r\n    noUser: '无',\r\n    title: '任务办理',\r\n    noTask: '未找到对应的任务',\r\n    commentTooLong: '处理意见超出 4000 个英文字符限制，建议以附件方式提交意见',\r\n    activityName: '办理人员',\r\n    receiver: \"接收人员\",\r\n    urgeComment: \"请输入催办信息\",\r\n    noUrgeUsers: \"没有符合条件的催办用户\",\r\n    noUrgeSubject: \"消息主题未配置\",\r\n    noUrgeContent: \"消息内容未配置\",\r\n    person: \"人员\",\r\n    addSign: \"加签\",\r\n    priority: \"紧急程度\",\r\n    selectPriority: \"请选择紧急程度\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: '请选择流程',\r\n    title: '提交确认',\r\n    selectNode: '请选择下一环节',\r\n    submitSuccess: '提交审批成功',\r\n    submitFailed: '提交审批失败',\r\n    cancelSubmitSuccess: '取消提交成功',\r\n    cancelSubmitFailed: '取消提交失败',\r\n    dataIdIsNull: '请选择一条数据',\r\n    dataIdIsEmpty: '请选择一条数据',\r\n    bizDefKeyIsNull: '流程分类ID不能为空',\r\n    success: '取消成功',\r\n    row: '条<br/>',\r\n    failed: '取消失败',\r\n    node: '节点，',\r\n    noUser: '没有找到合适的办理人',\r\n    cancelSubmitInfo: '已撤回至流程的开始节点，请修改后重新提交',\r\n    procDef: '流程定义',\r\n    processTowards: '即将流向',\r\n    otherNodesAssign: '指定其他节点办理人'\r\n  },\r\n  batchSubmit: {\r\n    row: '条，<br/>',\r\n    success: '办理成功',\r\n    error: '办理失败',\r\n    failed: '需要交互',\r\n    single: '失败的任务请单独处理',\r\n    selected: '已选择',\r\n    item: '项，',\r\n    time: '预计处理时间较长（大于',\r\n    second: '秒）'\r\n  },\r\n  batchStartProcess: {\r\n    row: '条，<br/>',\r\n    success: '提交成功',\r\n    error: '提交失败',\r\n    failed: '需要交互',\r\n    validationFailed: '验签失败',\r\n    single: '失败的单据请单独处理'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: '常用意见管理',\r\n      add: '新增',\r\n      delete: '删除',\r\n      save: '保存',\r\n      cancel: '取消',\r\n      content: '常用意见',\r\n      order: '顺序',\r\n      inputLabel: '常用意见',\r\n      manage: '意见管理',\r\n      attachmentUpload: '附件',\r\n      repeatFile: '包含重复文件：',\r\n      type: '类别',\r\n      operate: '操作',\r\n      confirm: '确认',\r\n      clickToAdd: '新增常用意见',\r\n      public: '公有',\r\n      private: '个人',\r\n      messageSubject: '消息主题',\r\n      messageContent: '消息内容',\r\n      comment: '处理意见',\r\n      tooLongTips: '超出 4000 个英文字符限制，建议以附件方式提交意见'\r\n    },\r\n    attachment: {\r\n      tips: '点击上传附件'\r\n    },\r\n    signature: {\r\n      title: '签名',\r\n      reset: '清空',\r\n      ok: '确定',\r\n      sign: '手写签名，',\r\n      upload: '上传图片',\r\n      tips: '点击设置签名',\r\n      dialogTitle: '电子签名',\r\n      note1: '电子签名可',\r\n      note2: '也可通过',\r\n      note3: '进行设置',\r\n      disable: '不启用签名',\r\n      download: \"下载\",\r\n      view: \"查看\",\r\n      delete: \"删除\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: '允许再',\r\n    multiInstanceType: '多人审批方式',\r\n    parallel: '并行会签',\r\n    preempt: '任意人处理',\r\n    sequential: '按顺序依次处理'\r\n  },\r\n  backWardConfig: {\r\n    sequence: '按顺序流转',\r\n    backToMe: '返回我',\r\n    backToCurrentNode: '返回本节点',\r\n    title: '驳回的节点通过后',\r\n    allowResubmitToThisNode: '后再次提交时直接回到本节点'\r\n  }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { translate } from './index';\r\n\r\n@Injectable()\r\nexport class I18nService {\r\n    defaultLang: string;\r\n    langData: any;\r\n    constructor() {\r\n        this.defaultLang = localStorage.getItem('languageCode');\r\n        if (!this.defaultLang) {\r\n            this.langData = translate['zh-CHS'];\r\n        } else {\r\n            this.langData = translate[this.defaultLang];\r\n        }\r\n    }\r\n\r\n    getValue(name: string): any {\r\n        if (!name) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (name.indexOf('.') === -1) {\r\n            resultVal = this.langData[name];\r\n        } else {\r\n            resultVal = name.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, this.langData);\r\n        }\r\n        return resultVal;\r\n    }\r\n}\r\n","import { PriorityItem } from './simulate-response';\r\nimport { TaskAction, ActionParameter } from './task-action';\r\n\r\n/**\r\n * 任务状态\r\n */\r\nexport enum TaskState {\r\n    /**\r\n     * 待办\r\n     */\r\n    todo = 2,\r\n    /**\r\n     * 已办\r\n     */\r\n    done = 5,\r\n}\r\n/**\r\n * 任务实体定义\r\n */\r\nexport class TaskEntity {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n    categoryId: string;\r\n\r\n    state: TaskState;\r\n\r\n    startTime: Date;\r\n\r\n    endTime?: Date;\r\n\r\n    dueDate?: string;\r\n\r\n    targetDate?: string;\r\n\r\n    owner: string;\r\n\r\n    executor: string;\r\n\r\n    sourceId: string;\r\n\r\n    description: string;\r\n\r\n    taskType: number;\r\n\r\n    priority: number;\r\n\r\n    priorityName: string;\r\n\r\n    priorityItemList?: PriorityItem[];\r\n\r\n    submitter: string;\r\n\r\n    processInstanceId: string;\r\n\r\n    fStr1: string;\r\n    fStr2: string;\r\n    fStr3: string;\r\n    fStr4: string;\r\n    fStr5: string;\r\n    fStr6: string;\r\n    fStr7: string;\r\n    fStr8: string;\r\n\r\n    fTime1?: Date;\r\n    fTime2?: Date;\r\n    fTime3?: Date;\r\n    fTime4?: Date;\r\n\r\n    fDec1: number;\r\n    fDec2: number;\r\n    fDec3: number;\r\n    fDec4: number;\r\n\r\n    fText1: string;\r\n    fText2: string;\r\n    fText3: string;\r\n    fText4: string;\r\n\r\n    actions: TaskAction[];\r\n    refBizId: string;\r\n    conclusionValue: string;\r\n}\r\n","import { FlowNodeInfo } from './start-process-payload';\r\n\r\nexport class CompleteContext {\r\n\r\n    workItemId: string;\r\n\r\n    conclusionValue: string;\r\n\r\n    comment: string;\r\n\r\n    signAssignees: string[];\r\n\r\n    nextFlowNodes: FlowNodeInfo[];\r\n\r\n    addendum: Addendum;\r\n\r\n    verifySigned?: VerifySigned;\r\n\r\n    dynamicBackWardRule: string;\r\n\r\n    priority: number;\r\n\r\n    otherAssignNodes: FlowNodeInfo[];\r\n\r\n\r\n}\r\n\r\nexport class Addendum {\r\n\r\n    signature: string;\r\n\r\n    attachment: string;\r\n}\r\n\r\nexport class VerifySigned {\r\n\r\n    certBase64Info: string;\r\n\r\n    msg: string[];\r\n\r\n    signedmsg: string;\r\n\r\n    useCase: string;\r\n}\r\n","import { OrganizationScope } from './organization-scope';\r\nimport { User } from './user';\r\nimport { FlowNodeInfo } from './start-process-payload';\r\nimport { ProcessDefinition } from './execution-response';\r\nimport { Addendum } from './complete-context';\r\n\r\n/**\r\n * 指定参与者信息：需要指定参与者的活动、待指定用户列表\r\n */\r\nexport class AssigneeInfo {\r\n\r\n    /**\r\n     * 工作项ID\r\n     */\r\n    workItemId: string;\r\n\r\n    /**\r\n     * 参与者列表\r\n     */\r\n    assigneeIds: string[];\r\n\r\n    /**\r\n     * 参与者用户列表\r\n     */\r\n    assigneeUsers: User[];\r\n\r\n    /**\r\n     * 是否允许指派\r\n     */\r\n    selectAssignee: boolean;\r\n\r\n    /**\r\n     * 是否多选\r\n     */\r\n    multiSelect: boolean;\r\n\r\n    /**\r\n     * 是否允许全员指派\r\n     */\r\n    allowGlobalAssign: boolean;\r\n\r\n    /**\r\n     * 指派范围\r\n     */\r\n    organizationScope: OrganizationScope[];\r\n}\r\n\r\n/**\r\n * 根据流程指定下一步参与者参数\r\n */\r\nexport class AssignParameter {\r\n\r\n    workItemId: string;\r\n\r\n    assigneeIds: string[];\r\n\r\n    comment: string;\r\n\r\n    addendum?: Addendum;\r\n\r\n    priority: number;\r\n}\r\n\r\n\r\n/**\r\n * 完成工作项返回结果\r\n */\r\nexport class CompleteResponse {\r\n\r\n    dataId: string;\r\n\r\n    needInteraction: boolean;\r\n\r\n    nextAssigneeInfos: AssigneeInfo[];\r\n\r\n    procInstId: string;\r\n\r\n    nextFlowNodes: FlowNodeInfo[];//提交后并行的情况\r\n\r\n    procDefs: ProcessDefinition[];\r\n}\r\n\r\n","/**\r\n * 任务中心配置\r\n */\r\nexport class TaskCenterConfig {\r\n\r\n    id: string;\r\n\r\n    configCode: string;\r\n\r\n    configName: string;\r\n\r\n    configNote: string;\r\n\r\n    defaultValue: string;\r\n\r\n    currentValue: string;\r\n\r\n    displayText: string;\r\n\r\n    ownerId: string;\r\n\r\n    ownerType: string;\r\n\r\n    creator: string;\r\n\r\n    createTime: string;\r\n\r\n    lastModifier: string;\r\n\r\n    lastModifiedTime: string;\r\n\r\n}\r\n\r\n/**\r\n * 任务中心自定义配置项Code\r\n */\r\nexport enum ConfigCode {\r\n\r\n    If_Show_Submit_Dialog = 'If_Show_Submit_Dialog',\r\n\r\n    Info_After_Submit = 'Info_After_Submit',\r\n\r\n    Info_After_Cancel_Submit = 'Info_After_Cancel_Submit',\r\n\r\n    If_Use_Sign_By_Default = 'If_Use_Sign_By_Default',\r\n\r\n    If_Show_Attachment = 'If_Show_Attachment',\r\n\r\n    If_Show_Signature = 'If_Show_Signature',\r\n\r\n    Default_Approval_Comment = 'Default_Approval_Comment',\r\n\r\n    If_Store_Comment = 'If_Store_Comment',\r\n\r\n    User_Help_Type = 'User_Help_Type',\r\n\r\n    If_Can_Edit_Signature = 'If_Can_Edit_Signature'\r\n}\r\n\r\n/**\r\n * 配置项生效级别\r\n */\r\nexport enum OwnerType {\r\n\r\n    User = 'user',//用户级\r\n\r\n    Category = 'category',//任务分类级别\r\n\r\n    BizDefKey = 'bizdefkey',//流程分类级别\r\n\r\n    All = 'all',//全局级别\r\n}","import { Addendum } from \"./complete-context\";\r\n\r\n/**\r\n * 任务办理参数\r\n */\r\nexport class WorkItemExecuteParam {\r\n\r\n    workItemId: string;\r\n\r\n    comment: string;\r\n\r\n    addendum: Addendum;\r\n\r\n    hideComment?: boolean;\r\n\r\n    priority?: number;\r\n}\r\n\r\n/**\r\n * 加签、征询、知会参数\r\n */\r\nexport class CounterSignParam extends WorkItemExecuteParam {\r\n\r\n    action: string;//AddSignFront、AddSignBehind、Notify\r\n\r\n    assignees: string[];\r\n\r\n}","export class User {\r\n\r\n    id: string;\r\n\r\n    code?: string;\r\n\r\n    name: string;\r\n\r\n    note?: string;\r\n\r\n    orgId?: string;\r\n\r\n    orgCode?: string;\r\n\r\n    orgName?: string;\r\n\r\n    orgNamePath?: string;//组织全路径\r\n\r\n    orderNum?: number\r\n}","import {User} from \"./user\";\r\n\r\n/**\r\n * 催办模拟接口请求body\r\n */\r\nexport class UrgeHandleSimulateContext {\r\n\r\n  procInstId: string;\r\n\r\n}\r\n\r\n/**\r\n * 催办模拟返回实体\r\n */\r\nexport class UrgeHandleResponse {\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n}\r\n\r\n/**\r\n * 催办用户返回实体\r\n */\r\nexport class UrgeUser extends User {\r\n\r\n  urgeInfos: UrgeInfo[];\r\n\r\n  anonymousText: string;\r\n\r\n  sendTypes: string;\r\n\r\n}\r\n\r\n/**\r\n * 执行催办请求body\r\n */\r\nexport class UrgeHandleContext {\r\n\r\n  procInstId: string;\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n}\r\n\r\nexport class UrgeInfo {\r\n\r\n  workItemId: string;\r\n\r\n  activityInstanceId: string;\r\n\r\n  sendTypes: string;\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n  subjectEditable: boolean;\r\n\r\n  contentEditable: boolean;\r\n}\r\n","export class BatchVerifySignedContext {\r\n\r\n  verifySigned: VerifySigned;\r\n\r\n}\r\nexport class VerifySigned {\r\n\r\n  certBase64Info: string;\r\n\r\n  msg: string[];\r\n\r\n  signedmsg: string;\r\n\r\n  useCase: string;\r\n\r\n}\r\n","/**\r\n * 工作流上下文\r\n */\r\nexport class WfContext {\r\n\r\n    processCategoryId: string;\r\n    \r\n}","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'urge-handle',\r\n  templateUrl: './urge-handle.component.html',\r\n  styleUrls: ['./urge-handle.component.css', '../task-execute/task-execute.component.css']\r\n})\r\nexport class UrgeHandleComponent implements OnInit {\r\n\r\n  @Input() placeholder = '';\r\n  @Input() showMessageSubject = false;// 是否显示消息主题\r\n  @Input() textAreaHeight: number;//文字框的高度\r\n  @Input() urgeMessageSubject: string; // 消息主题文本\r\n  @Input() urgeMessageContent: string; // 消息内容文本\r\n  @Input() subjectEditable: boolean = false; // 消息主题是否可编辑\r\n  @Input() contentEditable: boolean = false; // 消息内容是否可编辑\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Addendum } from \"./complete-context\";\r\n\r\n/**\r\n * 执行办理的基础payload\r\n */\r\nexport class BasePayload {\r\n\r\n    id?: string;\r\n    /**\r\n     工作项Id\r\n     */\r\n    workItemId: string;\r\n    /**\r\n     备注留言\r\n     */\r\n    comment: string;\r\n    /**\r\n     * 附录信息（含签名、附件）\r\n     */\r\n    addendum: Addendum;\r\n    /**\r\n     审批结论值\r\n     */\r\n    conclusionValue: string;\r\n\r\n}","import { BasePayload } from \"./base-payload\";\r\nimport { OrganizationScope } from \"./organization-scope\";\r\n\r\n/**\r\n * 加签模拟接口返回\r\n */\r\nexport class AddSignSimulateResponse {\r\n    /**\r\n     * 组织\r\n     */\r\n    organization: OrganizationScope;\r\n    /**\r\n     * 多人会签方式\r\n     */\r\n    multiInstanceType: MultiInstanceType;\r\n    /**\r\n     * 是否允许再加签\r\n     */\r\n    showSignToSign: boolean;\r\n}\r\n\r\n/**\r\n *  多人会签方式\r\n */\r\nexport enum MultiInstanceType {\r\n    /**\r\n     * 抢占\r\n     */\r\n    Preempt = 'Preempt',\r\n    /**\r\n     * 并行\r\n     */\r\n    Parallel = 'Parallel',\r\n    /**\r\n     * 串行\r\n     */\r\n    Sequential = 'Sequential'\r\n\r\n}\r\n\r\n/**\r\n * 加签提交的payload\r\n */\r\nexport class AddSignPayload extends BasePayload {\r\n\r\n    /**\r\n     * 加签方式：前加签、后加签、并加签（当前会签）、征询/协办\r\n     */\r\n    actionCode: string;\r\n\r\n    /**\r\n     * 多人会签方式：抢占 Preempt、并行会签 Parallel、串行会签Sequential\r\n     */\r\n    multiInstanceType: string;\r\n\r\n    /**\r\n     * 会签策略：全员通过allPass、一人通过onePass\r\n     */\r\n    counterSignRule: string;\r\n\r\n    /**\r\n     * 办理规则\r\n     * all所有用户都办理\r\n     * compliance符合规则往下流转\r\n     */\r\n    completedRule: string;\r\n\r\n    /**\r\n     * 加签人员\r\n     */\r\n    signAssignees: string[];\r\n\r\n    /**\r\n     * 加签节点名称\r\n     */\r\n    activityName: string;\r\n\r\n    /**\r\n     * 允许再加签\r\n     */\r\n    allowSignToSign: boolean;\r\n\r\n    /**\r\n     * 紧急程度\r\n     */\r\n    priority: number;\r\n\r\n\r\n}","/**\r\n * 预解析返回的subject\r\n */\r\nexport class SimulateSubject {\r\n\r\n    showDialog: boolean = true;//任务列表是否弹框\r\n\r\n    dialogHeight: number;//弹框高度\r\n\r\n    result: boolean;//结果\r\n\r\n}","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  TemplateRef,\r\n  HostBinding,\r\n  Injector,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { CompleteResponse, AssignParameter, AssigneeInfo } from '../../entity/complete-response';\r\nimport { Observable, BehaviorSubject, Subject } from 'rxjs';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { SubmitResult, ActionBaseImplComponent, ActionEvent, TaskEventResult, TaskEventContext, ActionOrigin } from '@gsp-wf/task-impl-api';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { OrganizationScope } from '../../entity/organization-scope';\r\nimport { FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { SimulateResponse } from '../../entity/simulate-response';\r\nimport { BillMethodConfig, FormEventMessage } from '../../entity/formAction';\r\nimport { ConfigCode, TaskCenterConfig } from '../../entity/task-center-config';\r\nimport { CounterSignParam, WorkItemExecuteParam } from '../../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleResponse, UrgeHandleSimulateContext } from '../../entity/urge-handle';\r\nimport { BatchVerifySignedContext } from '../../entity/batchVerifysigned';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { UrgeHandleComponent } from \"../urge-handle/urge-handle.component\";\r\nimport { AddSignPayload, AddSignSimulateResponse, MultiInstanceType } from '../../entity/add-sign';\r\nimport { SimulateSubject } from '../../entity/simulaite-subject';\r\n\r\ndeclare var System: any;\r\ndeclare const gspCA: any;\r\n\r\n@Component({\r\n  selector: 'lib-task-execute',\r\n  templateUrl: './task-execute.component.html',\r\n  styleUrls: ['./task-execute.component.css'],\r\n})\r\nexport class TaskExecuteComponent extends ActionBaseImplComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  /**\r\n   * 消息监听处理方法\r\n   */\r\n  private static func = null;\r\n  task: TaskEntity;//当前任务\r\n  workItemId: string; // 工作项ID\r\n  processInstanceId: string; // 流程实例ID\r\n  actionEntity = new TaskAction(); // 动作实体\r\n  comment = ''; // 审批意见\r\n  private MAX_COMMENT_LENGTH = 4000;//审批意见最大长度\r\n  defaultComment: string;//默认审批意见\r\n  wfCacheComment: string;//缓存的意见\r\n  currentDefaultValue: string;//当前动作的默认意见\r\n  taskList: TaskEntity[] = [];//批量审批接收到的任务list\r\n  batchSecond: number = 0;//批量操作的时间\r\n\r\n  ifSelectNode = false; // 是否显示选择下一环节\r\n  ifSelectUser = false; // 是否显示下一环节处理人\r\n  ifAssignUser = false; // 是否显示办理人员框\r\n  ifUrgeType = false; // 是否显示接收人框（催办消息接收人）\r\n  ifShowCommentToMySelf = false;// 是否显示审批记录仅自己可见\r\n\r\n  singleSelect = false; // 用户帮助是否单选，默认多选\r\n  selectTargetAble = false; // 是否允许选择下一环节\r\n  hideComment = false;//审批记录仅自己可见\r\n\r\n  filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // 系统用户帮助是否过滤当前人\r\n  selectedUsers: string[] = []; // 用户帮助选择后的Id数组\r\n\r\n  selectedUserNgModule: string; // 选择处理人的placeholder\r\n\r\n  @ViewChild('taskExecuteButtons') buttons: TemplateRef<any>; // 确认取消按钮\r\n  @ViewChild(SysFarrisLookupComponent) sysUserHelp: SysFarrisLookupComponent; // 系统用户帮助\r\n  @ViewChild(UrgeHandleComponent) urgeHandleComponent: UrgeHandleComponent;\r\n\r\n  subject = new BehaviorSubject<SubmitResult>(null);\r\n  submitResult: SubmitResult = { result: true, isClose: true }; // 动作执行完成后返回的实体结果\r\n  bindingData: { id?: string, name?: string } = {}; // 系统帮助多选时用到\r\n\r\n  selectNodeText: string = this.i18nService.getValue('task.nextNodeText'); // 下一环节显示的文字,\"下一环节\"\r\n  selectUserText: string; // 处理人员显示文字\r\n  commentPlaceHolder: string = this.i18nService.getValue('static.inputHolder');//审批意见框placeholder\r\n  showAttachment: boolean = true;//是否显示附件上传\r\n  showSign: boolean = true;//是否显示签名\r\n  showCommonComment: boolean = true;//是否显示常用意见\r\n  textAreaHeight: number = 84;//文字框的高度\r\n\r\n  billMethodConfigs: BillMethodConfig[] = []; // 表单动作配置列表\r\n\r\n  nodeDefaultValue: string;//默认下一环节（提示用）\r\n\r\n  selectedNodeId: string; // 选择的下一环节ID，并行分支是，逗号隔开的\r\n  destNodes: { id: string, name: string }[] = []; // 候选下一环节\r\n\r\n  dialogHeight = 270; // 弹框的高度\r\n  dialogHeightBase = 70;\r\n\r\n  addendum = new Addendum(); // 附件、签名信息\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  assignInfos: AssignInfoHelpEntity[] = [{ // 节点返回的指派信息（多个）\r\n    selectedAssignees: [],\r\n    assigneeInfo: null,\r\n    assignees: [],\r\n    activityDefinitionName: '',\r\n    activityDefinitionId: '',\r\n    dependency: '',\r\n    anonymous: false,\r\n    anonymousText: null,\r\n    resolved: false,\r\n  }];\r\n\r\n  otherAssignInfos: AssignInfoHelpEntity[] = [];//其他节点指派信息\r\n\r\n  originOtherAssignInfos: AssignInfoHelpEntity[] = [];//缓存一开始的其他节点指派信息\r\n\r\n  response: SimulateResponse; // 保存模拟审批后返回的内容，选择节点时使用\r\n  urgeHandleResponse: UrgeHandleResponse;//保存催办模拟后返回的内容\r\n\r\n  formObject: any; // 表单对象\r\n  ifRegistered = false; // 表单是否注册\r\n  configList: TaskCenterConfig[] = []; //任务中心配置项\r\n\r\n  verifySigned: VerifySigned = new VerifySigned(); // 数字验签参数\r\n  submitDisable: boolean = false; // 提交按钮是否禁用\r\n\r\n  //加签使用\r\n  addSign = {\r\n    showSignToSign: false,\r\n    allowSignToSIgn: true,\r\n    showMultiInstanceType: false,\r\n    multiInstanceType: [\r\n      { value: 'Parallel', name: this.i18nService.getValue('addSign.parallel') },\r\n      { value: 'Sequential', name: this.i18nService.getValue('addSign.sequential') },\r\n      { value: 'Preempt', name: this.i18nService.getValue('addSign.preempt') },\r\n    ],\r\n    originMultiInstType: '',\r\n    curMultiInstType: MultiInstanceType.Parallel.toString()\r\n  }\r\n  //动态驳回配置\r\n  showBackWardConfig = {\r\n    title: this.i18nService.getValue('backWardConfig.title'),\r\n    dynamicBackWardRuleAble: false,\r\n    displayPlaceholder: '',\r\n    showTips: false,\r\n    enable: false,\r\n    backWardRules: [{\r\n      name: this.i18nService.getValue('backWardConfig.sequence'),\r\n      value: 'sequence'\r\n    }, {\r\n      name: this.i18nService.getValue('backWardConfig.backToMe'),\r\n      value: 'backToMe'\r\n    }, {\r\n      name: this.i18nService.getValue('backWardConfig.backToCurrentNode'),\r\n      value: 'backToCurrentNode'\r\n    }]\r\n  }\r\n\r\n  /**\r\n   * 任务催办时使用\r\n   */\r\n  showUrgeMessageSubject: boolean = false; // 是否显示催办消息主题（催办时使用）\r\n  urgeMessageSubject: string; // 催办消息主题文本\r\n  urgeMessageContent: string; // 催办消息内容文本\r\n  addReminder: boolean; // 是否显示催办人消息\r\n  subjectEditable: boolean; // 主题可编辑\r\n  contentEditable: boolean; // 内容可编辑\r\n\r\n  wfContext = new WfContext();//工作流上下文\r\n  enablePriority: boolean = false;//是否显示密级（动作级别）\r\n\r\n  @HostBinding('class') cls = '';\r\n\r\n  POST_MESSAGE_TARGET = window.document.location.origin;\r\n  private messageSubject;\r\n  private language = localStorage.getItem('languageCode') || 'zh-CHS';//中英文\r\n\r\n  actionToken: string;//subject动作注册token\r\n  simulateToken: string;//预解析注册token\r\n  selectedPriority: number;//任务办理选中后的紧急程度\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private handlerService: WfTaskHandlerService,\r\n    private loadingService: LoadingService,\r\n    private message: MessagerService,\r\n    private injector: Injector,\r\n  ) {\r\n    super();\r\n    // 如果存在消息监听，先删掉\r\n    if (TaskExecuteComponent.func) {\r\n      window.removeEventListener('message', TaskExecuteComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n  }\r\n\r\n  /**\r\n   * 组件销毁时，去掉subject注册\r\n   */\r\n  ngOnDestroy(): void {\r\n    if (this.actionToken) {\r\n      this.taskService.subjectRemove(this.actionToken);\r\n    }\r\n    if (this.simulateToken) {\r\n      this.taskService.subjectRemove(this.simulateToken);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAllUserConfig().subscribe((configList: TaskCenterConfig[]) => {\r\n      load.close();\r\n      this.configList = configList;\r\n      const comment = configList.find(c => c.configCode === ConfigCode.Default_Approval_Comment);\r\n      const if_store_comment = configList.find(c => c.configCode === ConfigCode.If_Store_Comment);\r\n      let passComment: string;\r\n      let backComment: string;\r\n      if (comment && comment.currentValue) {\r\n        if (this.language == 'zh-CHS') {\r\n          passComment = JSON.parse(comment.currentValue).pass;\r\n          backComment = JSON.parse(comment.currentValue).back;\r\n        } else {\r\n          passComment = JSON.parse(comment.currentValue)['pass_' + this.language];\r\n          backComment = JSON.parse(comment.currentValue)['back_' + this.language];\r\n        }\r\n        if (this.actionEntity.code === 'Pass') {\r\n          this.comment = passComment;\r\n          this.defaultComment = passComment;\r\n        }\r\n        if (this.actionEntity.code === 'Back') {\r\n          this.comment = backComment;\r\n          this.defaultComment = backComment;\r\n        }\r\n      }\r\n      if (if_store_comment && if_store_comment.currentValue === 'true') {\r\n        if (this.wfCacheComment) {//开启暂存意见，当切换到驳回并且\r\n          if (this.actionEntity.code == 'Back' && this.wfCacheComment == passComment) {\r\n          } else {\r\n            this.comment = this.wfCacheComment;\r\n          }\r\n        }\r\n      }\r\n    }, () => {\r\n      load.close();\r\n    })\r\n    // 从任务办理界面打开时，才注册服务\r\n    if (this.origin === ActionOrigin.TaskForm) {\r\n      this.initFormEvent();\r\n      // 获取表单操作配置\r\n      this.taskService.getTaskFormInfo(this.workItemId).subscribe((re: any) => {\r\n        if (re && re.billMethodConfigs && re.billMethodConfigs.length) {\r\n          this.billMethodConfigs = re.billMethodConfigs;\r\n        }\r\n      });\r\n\r\n    }\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n  }\r\n\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    TaskExecuteComponent.func = this.eventHandler;\r\n  }\r\n\r\n  /**\r\n   * 监听事件处理\r\n   */\r\n  eventHandler = (event) => {\r\n    this.messageSubject.next(event);\r\n  }\r\n\r\n  /**\r\n   * 重写父类方法\r\n   * @param task\r\n   */\r\n  setTask(task: TaskEntity) {\r\n    if (task) {\r\n      this.task = task;\r\n      this.workItemId = task.sourceId;\r\n      this.processInstanceId = task.processInstanceId;\r\n      this.wfContext.processCategoryId = task.categoryId;\r\n      this.selectedPriority = task.priority;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 批量办理 设置任务列表\r\n   * @param taskList \r\n   */\r\n  setTaskList(taskList: TaskEntity[]) {\r\n    if (taskList.length > 20) {\r\n      this.dialogHeight = 290;\r\n    }\r\n    this.taskList = taskList;\r\n    this.batchSecond = Math.ceil(this.taskList.length / 6);\r\n  }\r\n\r\n  /**\r\n   * 重写父类方法\r\n   * @param action\r\n   */\r\n  setAction(action: TaskAction): Observable<any> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let result = new SimulateSubject();\r\n    if (action) {\r\n      this.actionEntity = action;\r\n      if (this.task) {// 单个、批量都setAction，单个才执行模拟\r\n        return this.simulate(this.actionEntity);\r\n      }\r\n      if (this.taskList && this.taskList.length) {\r\n        return this.batchSimulate();\r\n      }\r\n    }\r\n    //批量时，也要返回\r\n    setTimeout(() => {\r\n      subject.next(result);\r\n    }, 100);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 前事件初始化，将服务注册到window上，供表单调用\r\n   * 任务办理界面的window，表单的window.parent\r\n   */\r\n  private initFormEvent() {\r\n    // 审批前事件\r\n    this.actionToken = this.workItemId + 'action';\r\n    const actionToken = this.actionToken;\r\n    const subjectCode = 'FormSubjectCode';\r\n    (window as any).gspWfEventService = (window as any).gspWfEventService || {};\r\n    (window as any).gspWfEventService.register = (formObject: any) => {\r\n      this.taskService.subjectRegister(subjectCode, actionToken);\r\n      this.ifRegistered = true;\r\n      this.formObject = formObject;\r\n    };\r\n\r\n    (window as any).gspWfEventService.notify = (value: FormEventMessage) => {\r\n      if (this.ifRegistered) {\r\n        this.taskService.subjectNotify(actionToken, value);\r\n      } else {// 表单不注册，也可直接调用notify\r\n        this.simulateToken = this.workItemId + 'simulate';\r\n        const simulateToken = this.simulateToken;\r\n        this.taskService.subjectRegister(subjectCode, simulateToken);\r\n        this.taskService.subjectResponse(simulateToken, '', (value: FormEventMessage) => {\r\n          value && value.dataChanged && this.completeSimulate();\r\n        });\r\n        this.taskService.subjectNotify(simulateToken, value);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 点击提交的时候，执行表单的前事件\r\n   */\r\n  private beforeCompleteSubmit() {\r\n    if (this.origin == ActionOrigin.TaskForm) {\r\n      // 获取表单操作配置\r\n      const passPreActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Pre').sort((x, y) => x.sortOrder - y.sortOrder);\r\n      // 如果表单注册了事件\r\n      if (passPreActions && passPreActions.length) {\r\n        this.executeFormActions([...passPreActions]);\r\n      } else {// 没有定义前后事件，直接提交\r\n        this.completeSubmit();\r\n      }\r\n    } else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param formActions 表单中要执行的动作\r\n   */\r\n  private executeFormActions(formActions: BillMethodConfig[]) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          if (data.dataChanged === true) {// 如果需要预解析，先预解析再继续执行\r\n            this.completeSimulate().subscribe((r) => {\r\n              if (r.result) {// 预解析正确\r\n                this.executeFormActions(formActions);\r\n              } else {// 预解析错误\r\n                this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n              }\r\n            });\r\n          } else {// 不需要预解析，继续执行\r\n            this.executeFormActions(formActions);\r\n          }\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n          throw new Error('审批前表单操作执行失败！');\r\n        }\r\n      });\r\n      // 执行表单动作\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 单个任务预解析\r\n   * @param action\r\n   */\r\n  private simulate(action: TaskAction): Observable<SimulateSubject> {\r\n    switch (action.code) {\r\n      case 'AssignUser': // 指派 单独参数\r\n        return this.assignSimulate();\r\n      case 'Claim': // 领用\r\n        return this.defaultSubjectNext();\r\n      case 'Unclaim': // 取消领用\r\n        return this.defaultSubjectNext();\r\n      case 'Retrieve': // 取回\r\n        return this.defaultSubjectNext();\r\n      case 'Transfer': // 移交 单独参数\r\n        return this.transferSimulate();\r\n      case 'AddSign': // 加签\r\n        return this.addSignSimulate();\r\n      case 'AddSignFront': // 征询\r\n        return this.addSignFrontSimulate();\r\n      case 'Notify': //知会\r\n        return this.notifySimulate();\r\n      case 'Refuse': // 否决\r\n        return this.defaultSubjectNext();\r\n      case 'Obsolete': // 作废\r\n        return this.defaultSubjectNext();\r\n      case 'Comment': // 评论\r\n        return this.defaultSubjectNext();\r\n      case 'ReadTask': // 已阅\r\n        this.ifShowCommentToMySelf = true;\r\n        return this.defaultSubjectNext(295);\r\n      case 'UrgeHandle'://催办\r\n        return this.urgeHandleSimulate();\r\n      case 'CancelConsult'://取消征询\r\n        return this.defaultSubjectNext();\r\n      default: // 通过 驳回 重新提交 其他自定义的动作\r\n        return this.completeSimulate();\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量审批预解析\r\n   * @returns \r\n   */\r\n  private batchSimulate(): Observable<SimulateSubject> {\r\n    switch (this.actionEntity.code) {\r\n      case \"ReadTask\"://批量已阅\r\n        this.ifShowCommentToMySelf = true;\r\n        return this.defaultSubjectNext(295);\r\n      case \"Retrieve\"://批量取回\r\n        return this.defaultSubjectNext();\r\n      case \"Transfer\"://批量移交\r\n        this.ifSelectUser = true;\r\n        this.selectUserText = this.i18nService.getValue('task.receiver');//接收人员\r\n        this.singleSelect = true;\r\n        return this.defaultSubjectNext(this.dialogHeight + this.dialogHeightBase);\r\n      default:\r\n        return this.defaultSubjectNext();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 默认的预解析返回结果，可控制弹框高度\r\n   * @param dialogHeight \r\n   * @returns \r\n   */\r\n  private defaultSubjectNext(dialogHeight?: number): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let s = new SimulateSubject();\r\n    s.showDialog = true;\r\n    s.dialogHeight = dialogHeight ? dialogHeight : this.dialogHeight;\r\n    s.result = true;\r\n    setTimeout(() => {\r\n      subject.next(s);\r\n    }, 100);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 真正地提交\r\n   * 重写父类方法\r\n   */\r\n  submit(): Observable<SubmitResult> {\r\n    switch (this.actionEntity.code) {\r\n      case 'AssignUser': // 指派 单独参数\r\n        this.assignSubmit();\r\n        break;\r\n      case 'Claim': // 领用\r\n        this.claimSubmit();\r\n        break;\r\n      case 'Unclaim': // 取消领用\r\n        this.unClaimSubmit();\r\n        break;\r\n      case 'Retrieve': // 取回\r\n        this.retrieveSubmit();\r\n        break;\r\n      case 'Transfer': // 移交 单独参数\r\n        this.transferSubmit();\r\n        break;\r\n      case 'AddSign': // 加签\r\n        this.addSignSubmit();\r\n        break;\r\n      case 'AddSignFront': // 征询\r\n        this.addSignFrontSubmit();\r\n        break;\r\n      case 'Comment': // 评论\r\n        this.commentSubmit();\r\n        break;\r\n      case 'Notify': //知会\r\n        this.notifySubmit();\r\n        break;\r\n      case 'ReadTask': // 已阅\r\n        this.readSubmit();\r\n        break;\r\n      case 'UrgeHandle'://催办\r\n        this.urgeHandleSubmit();\r\n        break;\r\n      case 'CancelConsult'://取消征询\r\n        this.cancelConsultSubmit();\r\n        break;\r\n      default: // 通过 驳回 否决 作废 重新提交 其他自定义动作\r\n        this.beforeCompleteSubmit();\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量办理点击提交\r\n   * @param tasks \r\n   * @returns \r\n   */\r\n  batchSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    switch (this.actionEntity.code) {\r\n      case \"ReadTask\"://批量已阅\r\n        return this.batchReadTaskSubmit(tasks);\r\n      case \"Retrieve\"://批量取回\r\n        return this.batchRetrieveSubmit(tasks);\r\n      case \"Claim\"://批量领用\r\n        return this.batchClaimSubmit(tasks);\r\n      case \"Unclaim\"://批量取消领用\r\n        return this.batchUnclaimSubmit(tasks);\r\n      case \"Transfer\"://批量移交\r\n        return this.batchTransferSubmit(tasks);\r\n      default:\r\n        return this.batchCompleteSubmit(tasks);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行批量前事件\r\n   * @param tasks 批量任务列表\r\n   */\r\n  batchCompleteSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    let filterNum = 0;\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) {// 批量意见是否必填不支持根据审批项配置操作，批量驳回意见必填\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const noActionTasks = tasks.filter(t => t.actions.findIndex(a => a.code === this.actionEntity.code) === -1);\r\n      if (noActionTasks && noActionTasks.length > 0) {\r\n        for (const a of noActionTasks) {\r\n          filterNum++;\r\n          if (filterNum === tasks.length) {\r\n            subject.next(successSubmit);\r\n            this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n          }\r\n        }\r\n      }\r\n      let actTasks = tasks.filter(t => t.actions.some(a => a.code === this.actionEntity.code));\r\n      if (actTasks && actTasks.length > 0) {\r\n        this.executeBatchEvent([...this.actionEntity.preEvents.filter(e => e.batch)], actTasks, this.actionEntity, (re: TaskEventResult) => {\r\n          if (re && re.result) {\r\n            if (re.passTasks) {\r\n              const backTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) === -1);\r\n              if (backTasks && backTasks.length > 0) {\r\n                for (const t of backTasks) {\r\n                  filterNum++;\r\n                  if (filterNum === tasks.length) {\r\n                    subject.next(successSubmit);\r\n                    this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n                  }\r\n                }\r\n              }\r\n              actTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) > -1);\r\n            }\r\n            if (actTasks.length > 0) {\r\n              const batchVerifySignedContext = new BatchVerifySignedContext();\r\n              this.batchVerifySubmit(actTasks, filterNum, batchVerifySignedContext).subscribe((r: any) => {\r\n                if (r && r.successSubmit && r.successSubmit.result) {\r\n                  this.executeBatchEvent([...this.actionEntity.postEvents.filter(e => e.batch)], r.successHandleTasks, this.actionEntity, () => {\r\n                    subject.next(r.successSubmit);\r\n                  }, { result: true, passTasks: r.successHandleTasks.map(t => t.id) });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            subject.next({ result: false, isClose: false });\r\n          }\r\n        }, { result: true, passTasks: actTasks.map(t => t.id) });\r\n      }\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量数字签名\r\n   * @param tasks \r\n   * @param filterNum \r\n   * @param batchVerifySignedContext \r\n   * @returns \r\n   */\r\n  private batchVerifySubmit(tasks: TaskEntity[], filterNum: number = 0, batchVerifySignedContext: BatchVerifySignedContext): Observable<any> {\r\n    const subject = new Subject();\r\n    const verifyTasks = tasks.filter(t => {\r\n      const action = t.actions.find(a => a.code === this.actionEntity.code);\r\n      if (!action) {\r\n        return false;\r\n      } else {\r\n        if (action.parameters.some(p => p.code === 'CertificationNecessary' && p.value === 'true')) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n    const verifyTasksNum = verifyTasks.length;\r\n    if (verifyTasks.length > 0) {\r\n      const that = this;\r\n      if (\r\n        (window as any).gspframeworkService &&\r\n        (window as any).gspframeworkService.rtf\r\n      ) {\r\n        (window as any).gspframeworkService.rtf.caEvent.on(\r\n          (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n          'signedMsgOver',\r\n          function signMsgOver(signedData) {\r\n            if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n              // 证书对象\r\n              const cert = gspCA.getCurCert();\r\n              // 验签参数\r\n              that.verifySigned = {\r\n                // 要验证的证书base64编码的字符流(certkey)\r\n                certBase64Info: gspCA.getCertBase64(cert),\r\n                // 签名原信息\r\n                msg: ['BatchDigitalSignature'],\r\n                // 要签名后信息\r\n                signedmsg: signedData[1][0],\r\n                // 用户使用场景，目前未使用，可以为空\r\n                useCase: null,\r\n              };\r\n              batchVerifySignedContext.verifySigned = that.verifySigned;\r\n              that.taskService.batchVerifySigned(batchVerifySignedContext).subscribe(() => {\r\n                const verifyTasksNum = 0;\r\n                that.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              }, (error) => {\r\n                const otherTasks = tasks.filter(t => verifyTasks.findIndex(task => task.id === t.id) === -1);\r\n                that.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              });\r\n            } else {\r\n              that.notify.error(signedData[1]);\r\n              subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });\r\n            }\r\n          }\r\n        );\r\n      }\r\n      const msg = ['BatchDigitalSignature'];\r\n      gspCA.getSignedMsg(msg);\r\n    } else {\r\n      this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n        subject.next(re);\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 真正的批量提交任务\r\n   * @param tasks \r\n   * @param filterNum \r\n   * @param verifyTasksNum \r\n   * @returns \r\n   */\r\n  private batchComplete(tasks: TaskEntity[], filterNum: number = 0, verifyTasksNum: number): Observable<any> {\r\n    const subject = new Subject<any>();\r\n    let successNum = 0;\r\n    let failedNum = 0;\r\n    let errorNum = 0;\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    const successHandleTasks = new Array();\r\n\r\n    const load = this.loadingService.show();\r\n    for (const task of tasks) {\r\n      const context = new CompleteContext();\r\n      context.workItemId = task.sourceId;\r\n      context.conclusionValue = this.actionEntity.code;\r\n      context.comment = this.comment;\r\n      context.addendum = this.addendum;\r\n      this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n        if (response && response.needInteraction === true) {// 需要交互\r\n          failedNum++;\r\n          if (successNum + failedNum + errorNum === tasks.length) {\r\n            load.close();\r\n            subject.next({ successSubmit, successHandleTasks });\r\n            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n          }\r\n        } else {// 不需要交互\r\n          this.taskService.complete(context).subscribe(() => {// 执行成功\r\n            successNum++;\r\n            successHandleTasks.push(task);\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          }, () => {// 执行报错\r\n            errorNum++;\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          });\r\n        }\r\n      }, () => {// 任务模拟请求报错\r\n        errorNum++;\r\n        if (successNum + failedNum + errorNum === tasks.length) {\r\n          load.close();\r\n          subject.next({ successSubmit, successHandleTasks });\r\n          this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n        }\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量已阅\r\n   * @param tasks \r\n   */\r\n  private batchReadTaskSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        let context: WorkItemExecuteParam = {\r\n          workItemId: task.sourceId,\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        }\r\n        this.taskService.readTask(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: true, isClose: true });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量取回\r\n   * @param tasks \r\n   */\r\n  private batchRetrieveSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        let context: WorkItemExecuteParam = {\r\n          workItemId: task.sourceId,\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        }\r\n        this.taskService.retrieve(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量领用\r\n   */\r\n  private batchClaimSubmit(tasks: TaskEntity[]) {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        this.taskService.claim(task.sourceId, this.comment).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量取消领用\r\n   */\r\n  private batchUnclaimSubmit(tasks: TaskEntity[]) {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        this.taskService.unClaim(task.sourceId, this.comment).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量移交\r\n   * @param tasks 批量任务列表\r\n   */\r\n  private batchTransferSubmit(tasks: TaskEntity[]): Observable<any> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        const context = {\r\n          workItemId: task.sourceId,\r\n          assignee: this.selectedUsers[0],\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        };\r\n        this.taskService.transfer(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量提交提示信息\r\n   * @param successNum 成功条数\r\n   * @param failedNum 需要交互的条数\r\n   * @param errorNum 执行报错的条数\r\n   * @param verifyTasksNum 需要数字签名的条数\r\n   */\r\n  private showBatchSubmitInfo(successNum: number, failedNum: number, errorNum: number, verifyTasksNum: number) {\r\n    let message = '';\r\n    if (successNum && !failedNum && !errorNum && !verifyTasksNum) {// 批量全部成功\r\n      this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n    } else {// 非全部成功\r\n      successNum && (message += this.i18nService.getValue('batchSubmit.success') + `【${successNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      errorNum && (message += this.i18nService.getValue('batchSubmit.error') + `【${errorNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + `【${failedNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + `【${verifyTasksNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      message += this.i18nService.getValue('batchSubmit.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  private executeBatchEvent(events: ActionEvent[], entities: Array<TaskEntity>, action: TaskAction, handler: any, result?: TaskEventResult) {\r\n    if (this.injector) {\r\n      if (events && events.length > 0 && entities && entities.length > 0) {\r\n        const event = events.shift();\r\n        const url = event.eventImpl.split('#')[0];\r\n        const func = event.eventImpl.split('#')[1];\r\n        System.import(url + '?v=' + new Date().getTime().toString())\r\n          .then((moduleFactories: any) => {\r\n            const moduleFactory: any = Object.values(moduleFactories)[0];\r\n            const moduleRef = moduleFactory.create(this.injector);\r\n            const context: TaskEventContext = {\r\n              action,\r\n              taskList: entities,\r\n              origin: 'TaskCenter',\r\n              preEventResult: result\r\n            };\r\n            moduleRef.instance[func].apply(moduleRef.instance, [context]).subscribe((re: TaskEventResult) => {\r\n              if (re && re.result) {\r\n                this.executeBatchEvent(events, entities, action, handler, re);\r\n              } else {\r\n                handler(re);\r\n              }\r\n            });\r\n          });\r\n      } else {\r\n        handler(result);\r\n      }\r\n    } else {\r\n      handler(result);\r\n    }\r\n  }\r\n\r\n  private assignSimulate(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifAssignUser = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    this.taskService.getAssigneeInfo(this.workItemId).subscribe((info: FlowNodeInfo) => {\r\n      this.assignInfos = [{\r\n        selectedAssignees: info.selectedAssignees,\r\n        assigneeInfo: info.assigneeInfo,\r\n        assignees: info.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n        activityDefinitionName: info.activityDefinitionName,\r\n        activityDefinitionId: info.activityDefinitionId,\r\n        dependency: info.dependency,\r\n        anonymous: info.anonymous,\r\n        anonymousText: info.anonymousText,\r\n        resolved: info.resolved,\r\n      }];\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      simulateSubject.showDialog = true;\r\n      subject.next(simulateSubject);\r\n    }, (error) => {\r\n      simulateSubject.result = false;\r\n      simulateSubject.showDialog = false;\r\n      subject.next(simulateSubject);\r\n      this.taskService.error(error);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  private transferSimulate(): Observable<SimulateSubject> {// 移交\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.i18nService.getValue('task.receiver');//接收人员\r\n    this.singleSelect = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignFrontSimulate(): Observable<SimulateSubject> {// 征询\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignSimulate(): Observable<SimulateSubject> {// 加签\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAdhocConfig(this.workItemId).subscribe((response: AddSignSimulateResponse) => {\r\n      load.close();\r\n      this.addSign.showSignToSign = response.showSignToSign;\r\n      this.addSign.originMultiInstType = response.multiInstanceType;\r\n      if (response.organization) {\r\n        this.filter.orgId = response.organization.id;\r\n        this.filter.withAllOrg = response.organization.includeChildren;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  private notifySimulate(): Observable<SimulateSubject> {//知会\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.singleSelect = false;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n  }\r\n\r\n  //预解析组织、候选人范围\r\n  private getOrganizationScope(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    const load = this.loadingService.show();\r\n    this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((orgList: OrganizationScope[]) => {\r\n      load.close();\r\n      if (orgList.length) {// 全员会返回空数组\r\n        this.filter.orgId = orgList[0].id;\r\n        this.filter.withAllOrg = orgList[0].includeChildren;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 催办模拟\r\n   */\r\n  private urgeHandleSimulate(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifSelectNode = false;\r\n    this.ifSelectUser = false;\r\n    this.ifAssignUser = false;\r\n    this.ifUrgeType = true;\r\n    this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');\r\n    this.showCommonComment = false;\r\n    this.showAttachment = false;\r\n    this.showUrgeMessageSubject = true;\r\n    this.showSign = false;\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    const load = this.loadingService.show();\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n    this.taskService.urgeHandleSimulate(context).subscribe((re: UrgeHandleResponse) => {\r\n      load.close();\r\n      this.urgeHandleResponse = re;\r\n      if (re && re.urgeUsers && re.urgeUsers.length) {\r\n        this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;\r\n        this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;\r\n        this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;\r\n        this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;\r\n        this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;\r\n        let urgeUsers = re.urgeUsers;\r\n        let assignInfo = new AssigneeInfo();\r\n        urgeUsers.forEach(user => {\r\n          if (user.anonymousText) {\r\n            user.name = user.anonymousText;\r\n            user.code = '';\r\n            user.orgName = '';\r\n          }\r\n        })\r\n        assignInfo.assigneeUsers = urgeUsers;\r\n        assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;\r\n        assignInfo.multiSelect = true;\r\n        this.assignInfos[0].assigneeInfo = assignInfo;\r\n        this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];\r\n        simulateSubject.showDialog = true;\r\n      } else {\r\n        this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n        simulateSubject.showDialog = false;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    })\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 预解析\r\n   * 通过、驳回、重新提交、其他自定义动作\r\n   */\r\n  private completeSimulate(): Observable<any> {\r\n    const subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    if (this.actionEntity.parameters && this.actionEntity.parameters.length) {// 是否允许加签\r\n      this.actionEntity.parameters.forEach((p) => {\r\n        if (p.code === 'AddSignBehindAble' && p.value === 'true') {\r\n          this.ifSelectUser = true;\r\n          this.selectUserText = this.i18nService.getValue('task.addSign') + this.i18nService.getValue('task.person');\r\n          this.dialogHeight += this.dialogHeightBase;\r\n          const load = this.loadingService.show();\r\n          //获取加签范围\r\n          this.taskService.getOrganizationScope(this.workItemId, 'AddSignBehind').subscribe((orgList: OrganizationScope[]) => {\r\n            load.close();\r\n            if (orgList.length) {// 全员会返回空数组\r\n              this.filter.orgId = orgList[0].id;\r\n              this.filter.withAllOrg = orgList[0].includeChildren;\r\n            }\r\n          }, error => {\r\n            load.close();\r\n            this.taskService.error(error);\r\n          });\r\n        }\r\n      });\r\n    }\r\n    //驳回节点标签名称\r\n    if (this.actionEntity.code === 'Back') {\r\n      this.selectNodeText = this.actionEntity.name + this.i18nService.getValue('task.backNodeText');\r\n    }\r\n\r\n    const context = new CompleteContext();\r\n    context.workItemId = this.workItemId;\r\n    context.conclusionValue = this.actionEntity.code;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.clearSimulateResult();\r\n      this.response = response;\r\n      if (this.task.priority) {\r\n        this.enablePriority = true;\r\n        this.dialogHeight += this.dialogHeightBase;\r\n      }\r\n      this.selectTargetAble = response.selectTargetAble;\r\n      if (response.dynamicBackWardRuleConfig) {\r\n        this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleConfig.dynamicBackWardRuleAble;\r\n        this.showBackWardConfig.displayPlaceholder = response.dynamicBackWardRuleConfig.resubmitEffect;\r\n      }\r\n      if (!response.simulationPaths.length) {// 模拟返回路径为空时\r\n        this.ifSelectNode = false;\r\n        this.ifAssignUser = false;\r\n      } else {// 模拟返回了路径\r\n        this.ifSelectNode = true;\r\n        this.ifAssignUser = true;\r\n        this.dialogHeight += this.dialogHeightBase * 2;\r\n        this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n          id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),\r\n          name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')\r\n        }));\r\n        // 处理默认分支，无默认分支返回-1\r\n        let defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n        //没有默认分支，且不允许选择目标节点时，取其中一个node展示（子流程参与者为空情况等）\r\n        if (defaultIndex < 0 && !response.selectTargetAble) {\r\n          defaultIndex = response.simulationPaths.findIndex(a => a.nodeInfoList && a.nodeInfoList.length > 0);\r\n        }\r\n        if (defaultIndex > -1) {\r\n          this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n          this.nodeDefaultValue = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n          this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);\r\n          if (response.simulationPaths[defaultIndex].id.startsWith('EndEvent')) {//下一环节为结束时，不显示办理人员，弹框高度缩小\r\n            this.dialogHeight = 340;\r\n          }\r\n        }\r\n      }\r\n      //设置其他节点选人\r\n      this.setOtherAssignInfo(response);\r\n\r\n      this.dialogHeight = this.showBackWardConfig.dynamicBackWardRuleAble ? this.dialogHeight + this.dialogHeightBase : this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      simulateSubject.result = false;\r\n      simulateSubject.showDialog = false;\r\n      subject.next(simulateSubject);\r\n      this.taskService.error(error);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 清空预解析结果\r\n   */\r\n  private clearSimulateResult() {\r\n    this.assignInfos = [{// 重新预解析时清空\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n    this.destNodes = []; // 重新预解析时清空\r\n    this.selectedNodeId = '';\r\n  }\r\n  /**\r\n   * 设置当前指派信息帮助参数\r\n   */\r\n  private setAssignInfo(nodeInfoList: FlowNodeInfo[]) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('，').forEach(nodeId => {\r\n      const node = nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved,\r\n        });\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityDefinitionName: '',\r\n          activityDefinitionId: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfo(response: SimulateResponse) {\r\n    this.otherAssignInfos = [];\r\n    let tmpOtherAssignInfos = [];\r\n    let otherAssignNodes = response.otherAssignNodes;\r\n    if (otherAssignNodes && otherAssignNodes.length) {\r\n      otherAssignNodes.forEach(node => {\r\n        tmpOtherAssignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      })\r\n      //保存最初的其他节点选人\r\n      this.originOtherAssignInfos = [...tmpOtherAssignInfos];\r\n      //其他节点与下一节点去重\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        tmpOtherAssignInfos = tmpOtherAssignInfos.filter(a => this.assignInfos.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n      }\r\n      this.otherAssignInfos = tmpOtherAssignInfos;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 选完节点后，重新设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfoAgain(nodeInfoList: FlowNodeInfo[]) {\r\n    if (nodeInfoList && nodeInfoList.length) {\r\n      this.otherAssignInfos = this.originOtherAssignInfos.filter(a => nodeInfoList.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击确定后方法\r\n   */\r\n  private assignSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {\r\n      this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: AssignParameter = {\r\n        workItemId: this.workItemId,\r\n        assigneeIds: this.assignInfos[0].assignees.map(user => user.id),\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.taskService.assignNextUsersByWorkItemId(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.operateSuccess'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private claimSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.claim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private unClaimSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.unClaim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success')),\r\n          this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private retrieveSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const retrieveContext = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment\r\n      };\r\n      this.taskService.retrieve(retrieveContext).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private transferSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        assignee: this.selectedUsers[0],\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.submitDisable = true; // 禁用提交按钮\r\n      this.taskService.transfer(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private commentSubmit() { // 评论\r\n    if (!this.comment || this.comment.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.taskService.comment(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.submitResult.isClose = false;\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n      this.comment = '';\r\n    }\r\n  }\r\n\r\n  private addSignFrontSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.submitDisable = true; // 禁用提交按钮\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private addSignSubmit() {// 加签提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let payload: AddSignPayload = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        conclusionValue: \"Pass\",\r\n        signAssignees: this.selectedUsers,\r\n        actionCode: \"AddSignBehind\",\r\n        multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,\r\n        counterSignRule: 'allPass',\r\n        completedRule: 'all',\r\n        allowSignToSign: this.addSign.allowSignToSIgn,\r\n        activityName: '',\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.adhocAssignee(payload).subscribe(re => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private readSubmit() {//已阅提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: WorkItemExecuteParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        hideComment: this.hideComment\r\n      }\r\n      this.taskService.readTask(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n      }, error => {\r\n        this.taskService.error(error);\r\n        this.subject.next({ result: false, isClose: false });\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  private notifySubmit() {//知会提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: CounterSignParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: false });\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 催办提交\r\n   */\r\n  private urgeHandleSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) {//没有符合条件的催办用户\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {//没有选人\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageSubject) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageContent) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let context = new UrgeHandleContext();\r\n      context.procInstId = this.processInstanceId;\r\n      context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter(a => this.assignInfos[0].assignees.some(b => b.id == a.id));\r\n      context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;\r\n      context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;\r\n      context.addReminder = this.addReminder;\r\n      const load = this.loadingService.show();\r\n      this.taskService.urgeHandle(context).subscribe(re => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 取消征询提交\r\n   */\r\n  private cancelConsultSubmit() {\r\n    let context = new WorkItemExecuteParam();\r\n    context.workItemId = this.workItemId;\r\n    context.comment = this.comment;\r\n    context.addendum = this.addendum;\r\n    const load = this.loadingService.show();\r\n    this.taskService.cancelConsult(context).subscribe(() => {\r\n      load.close();\r\n      this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n      this.subject.next({ result: true, isClose: true });\r\n    }, error => {\r\n      load.close();\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    })\r\n\r\n  }\r\n\r\n  private completeSubmit() {// 通过、驳回、其他第三方动作\r\n    const context: CompleteContext = {\r\n      workItemId: this.workItemId,\r\n      conclusionValue: this.actionEntity.code,\r\n      comment: this.comment,\r\n      signAssignees: this.selectedUsers,\r\n      nextFlowNodes: [],\r\n      otherAssignNodes: [],\r\n      addendum: this.addendum,\r\n      //动态驳回规则\r\n      dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? this.showBackWardConfig.displayPlaceholder : '',\r\n      priority: this.selectedPriority\r\n    };\r\n\r\n    if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) {// 加签 or 仿真返回为空，直接往下走\r\n      this.completeTask(context);\r\n    } else {\r\n      if (this.selectedNodeId) {// 加签时，选择下一环节被禁用，destNodeId为undefined\r\n        const nextFlowNodes: FlowNodeInfo[] = [];\r\n        const nodes: string[] = this.selectedNodeId.split('，');\r\n        for (let i = 0; i < nodes.length; i++) {\r\n          const nextFlowNode: FlowNodeInfo = {\r\n            activityDefinitionId: nodes[i],\r\n            activityDefinitionName: this.assignInfos[i].activityDefinitionName,\r\n            dependency: this.assignInfos[i].dependency,\r\n            selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n            assigneeInfo: null,\r\n            resolved: false,\r\n            anonymous: this.assignInfos[i].anonymous,\r\n            anonymousText: this.assignInfos[i].anonymousText\r\n          };\r\n          //节点找不到人，且异常提示时，并行网关暂不处理\r\n          if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n            if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n              const str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n              this.notify.warning(str);\r\n              this.subject.next({ result: false, isClose: false });\r\n              return;\r\n            }\r\n          }\r\n          nextFlowNodes.push(nextFlowNode);\r\n        }\r\n        context.nextFlowNodes = nextFlowNodes;\r\n      }\r\n      //其他节点指派信息\r\n      if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n        for (let i = 0; i < this.otherAssignInfos.length; i++) {\r\n          let nextFlowNode: FlowNodeInfo = {\r\n            activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,\r\n            activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,\r\n            dependency: this.otherAssignInfos[i].dependency,\r\n            selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],\r\n            assigneeInfo: null,\r\n            resolved: false,\r\n            anonymous: false,\r\n            anonymousText: ''\r\n          }\r\n          context.otherAssignNodes.push(nextFlowNode);\r\n        }\r\n      }\r\n\r\n      if (this.response.selectTargetAble && this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) {// 用户没选择跳转节点，不允许提交\r\n        this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else if (this.assignInfos.filter(info => info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length).length) {\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else {\r\n        this.completeTask(context);\r\n      }\r\n    }\r\n  }\r\n\r\n  private completeTask(completeContext: CompleteContext) {\r\n    const attachmentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'AttachmentNecessary');\r\n    const certificationNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CertificationNecessary');\r\n    const commentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CommentNecessary');\r\n    if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      if (certificationNecessary && certificationNecessary.value === 'true') {\r\n        this.verifySignature(() => {\r\n          completeContext.verifySigned = this.verifySigned;\r\n          this.taskComplete(completeContext);\r\n        });\r\n        const msg = [this.workItemId];\r\n        gspCA.getSignedMsg(msg);\r\n      } else {\r\n        this.taskComplete(completeContext);\r\n      }\r\n    }\r\n  }\r\n\r\n  private executeFormActionsAfterCompleteTask(handler: any) {\r\n    // 如果表单注册了事件\r\n    if (this.origin == ActionOrigin.TaskForm && this.ifRegistered && this.formObject) {\r\n      const postActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Post').sort((x, y) => x.sortOrder - y.sortOrder);\r\n      if (postActions && postActions.length) {\r\n        this.executePostFormActions(postActions, handler);\r\n      }\r\n    } else {\r\n      handler();\r\n    }\r\n  }\r\n\r\n  private executePostFormActions(formActions: BillMethodConfig[], hander: any) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          this.executePostFormActions(formActions, hander);\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n          throw new Error('审批后表单操作执行失败！');\r\n        }\r\n      });\r\n      // 执行表单动作\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      hander();\r\n    }\r\n  }\r\n\r\n  //帮助选人后\r\n  afterConfirmForTransfer(data: Assignee[]) {\r\n    if (data && data.length) {\r\n      this.selectedUsers = data.map(user => user.id);\r\n      this.selectedUserNgModule = data.map(user => user.name).join();\r\n    } else {\r\n      this.selectedUsers = [];\r\n    }\r\n    if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {\r\n      this.addSign.showMultiInstanceType = true;\r\n    } else {\r\n      this.addSign.showMultiInstanceType = false;\r\n    }\r\n  }\r\n\r\n  cancel(): Observable<SubmitResult> {\r\n    this.submitResult.isClose = false;\r\n    this.subject.next(this.submitResult);\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  // 下一环节选择后事件\r\n  selectNodeChange(data: any) {\r\n    this.selectedNodeId = data && data.data && data.data.id;\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {// 已预解析参与者\r\n      this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);\r\n      this.setOtherAssignInfoAgain(this.response.simulationPaths[data.index].nodeInfoList);\r\n    } else {\r\n      const nodeIds = this.selectedNodeId.split('，').map(node => `\"${node}\"`).join(); // 注意一个中文逗号一个英文逗号\r\n      const load = this.loadingService.show();\r\n      this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((nodeInfoList: FlowNodeInfo[]) => {\r\n        load.close();\r\n        this.setAssignInfo(nodeInfoList);\r\n        this.setOtherAssignInfoAgain(nodeInfoList);\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  // 下一环节清空后事件\r\n  selectNodeClear() {\r\n    this.selectedNodeId = null;\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n  }\r\n\r\n  afterConfirmForAssign(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  afterConfirmForOtherAssign(data: Assignee[], index: number) {\r\n    this.otherAssignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 上传附件后事件\r\n   */\r\n  addAttachment(data: any) {\r\n    this.addendum.attachment = JSON.stringify(data);\r\n  }\r\n\r\n  /**\r\n   * 手写签名后事件\r\n   */\r\n  addSignature(data: any) {\r\n    if (data) {\r\n      const signInfo = {\r\n        id: data,\r\n        waterMarking: null\r\n      };\r\n      this.addendum.signature = JSON.stringify(signInfo);\r\n    } else {\r\n      this.addendum.signature = '';\r\n    }\r\n  }\r\n\r\n  // 以服务方式打开组件时，左右加上padding\r\n  addPadding() {\r\n    this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';\r\n  }\r\n\r\n\r\n  private sendMessage(workItemId: string, action: BillMethodConfig) {\r\n    if (this.iframe) {\r\n      const iframeWindow = this.iframe.nativeElement.contentWindow;\r\n      const message = {\r\n        target: workItemId,\r\n        data: {\r\n          command: action.method,\r\n          arguments: action.methodParameters\r\n        }\r\n      };\r\n      iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);\r\n    } else {\r\n      this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n      this.notify.warning('请等待表单加载完成后再试');\r\n    }\r\n  }\r\n\r\n  // 提交审批前的数字签名及验签\r\n  verifySignature(handler: any) {\r\n    const that = this;\r\n    if (\r\n      (window as any).gspframeworkService &&\r\n      (window as any).gspframeworkService.rtf\r\n    ) {\r\n      (window as any).gspframeworkService.rtf.caEvent.on(\r\n        (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n        'signedMsgOver',\r\n        function signMsgOver(signedData) {\r\n          if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n            // 证书对象\r\n            const cert = gspCA.getCurCert();\r\n            // 验签参数\r\n            that.verifySigned = {\r\n              // 要验证的证书base64编码的字符流(certkey)\r\n              certBase64Info: gspCA.getCertBase64(cert),\r\n              // 签名原信息\r\n              msg: [that.workItemId],\r\n              // 要签名后信息\r\n              signedmsg: signedData[1][0],\r\n              // 用户使用场景，目前未使用，可以为空\r\n              useCase: null,\r\n            };\r\n            handler();\r\n          } else {\r\n            that.loadingService.close();\r\n            that.subject.next({ result: false, isClose: false });\r\n            that.notify.error(signedData[1]);\r\n            throw new Error(signedData[1]);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // 通过、驳回、其他第三方动作\r\n  taskComplete(completeContext: CompleteContext) {\r\n    this.taskService.complete(completeContext).subscribe((cr: CompleteResponse) => {\r\n      this.executeFormActionsAfterCompleteTask(() => {\r\n        if (cr.needInteraction) {// 通过后指派场景\r\n          if (this.origin == ActionOrigin.TaskCenter) {\r\n            this.subject.next({ result: true, isClose: false });\r\n          } else {\r\n            this.subject.next({ result: false, isClose: false });//关掉loading\r\n          }\r\n          this.notify.info(this.i18nService.getValue('cueWords.select')\r\n            + '【' + cr.nextFlowNodes[0].activityDefinitionName + '】'\r\n            + this.i18nService.getValue('cueWords.processor'));\r\n          let task = new TaskEntity();\r\n          let action = new TaskAction();\r\n          task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;\r\n          action.code = 'AssignUser';\r\n          action.name = this.i18nService.getValue('cueWords.assignUser');\r\n          this.handlerService.execute(task, action).subscribe(re => {\r\n            if (re) {\r\n              this.subject.next({ result: true, isClose: true });\r\n            }\r\n          });\r\n        } else {\r\n          if (completeContext.conclusionValue === 'Pass') {\r\n            this.notify.success(this.i18nService.getValue('cueWords.successPass'));\r\n          } else if (completeContext.conclusionValue === 'Back') {\r\n            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n          } else {\r\n            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n          }\r\n          this.subject.next({ result: true, isClose: true });\r\n        }\r\n      });\r\n    }, (error) => {\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    }\r\n    );\r\n  }\r\n\r\n}","import { AssigneeInfo } from './complete-response';\r\nimport { User } from './user';\r\n\r\n/**\r\n * 提交审批上下文参数\r\n */\r\nexport class StartProcessPayload {\r\n\r\n    /**\r\n     * 随机生成的ID 无意义\r\n     */\r\n    id?: string;\r\n\r\n    /**\r\n     * 流程定义ID\r\n     */\r\n    processDefinitionId?: string;\r\n\r\n    /**\r\n     * 流程定义Key\r\n     */\r\n    processDefinitionKey?: string;\r\n\r\n    /**\r\n     * 流程分类ID\r\n     */\r\n    bizDefKey?: string;\r\n\r\n    /**\r\n     * 数据模型ID（BE上的节点ID）\r\n     */\r\n    dataModelId?: string;\r\n\r\n    /**\r\n     * 单据内码\r\n     */\r\n    dataId?: string;\r\n\r\n    /**\r\n     * 流程实例名称，可空\r\n     */\r\n    name?: string;\r\n\r\n    /**\r\n     * 流程发起人\r\n     */\r\n    startUserId?: string;\r\n\r\n    /**\r\n     * 下一环节\r\n     */\r\n    nextFlowNodes?: FlowNodeInfo[];\r\n\r\n    /**\r\n     * 参数\r\n     */\r\n    variables?: any;\r\n\r\n    /**\r\n     * 是否带返回值\r\n     */\r\n    withResponse?: boolean;\r\n\r\n    /**\r\n     * 紧急程度\r\n     */\r\n    priority?: number;\r\n\r\n    /**\r\n     * 其他需要指派的节点\r\n     */\r\n    otherAssignNodes: FlowNodeInfo[];\r\n\r\n}\r\n\r\nexport class FlowNodeInfo {\r\n\r\n    activityDefinitionId: string;\r\n\r\n    activityDefinitionName: string;\r\n\r\n    dependency: string;//前置依赖，执行提交时传给后端\r\n\r\n    selectedAssignees: User[];\r\n\r\n    assigneeInfo: AssigneeInfo;\r\n\r\n    resolved: boolean;//参与者是否解析\r\n\r\n    anonymous: boolean;\r\n\r\n    anonymousText: string;\r\n\r\n}\r\n\r\nexport class Assignee {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n}\r\n\r\nexport class CancelSubmitPayload {\r\n\r\n    procInstId: string;//可以单独根据流程实例ID取消\r\n\r\n    dataId: string;//也可以根据dataId+bizDefKey取消\r\n\r\n    bizDefKey: string;\r\n}\r\n","/**\r\n * 跨iframe通信，消息类型枚举类\r\n */\r\nexport enum MessageType {\r\n\r\n    SubmitSuccess = 'SubmitSuccess',//提交成功，要求iframe外弹出提示\r\n\r\n    SubmitFailed = 'SubmitFailed',//提交失败，失败信息\r\n\r\n    InfoSelectProcess = 'InfoSelectProcess',//提示选择流程\r\n\r\n    InfoSelectNode = 'InfoSelectNode',//提示选择节点\r\n\r\n    InfoSelectParticipant = 'InfoSelectParticipant',//提示选择办理人\r\n\r\n    Cancel = 'Cancel',//点击取消，iframe外关闭弹窗\r\n}\r\n\r\n/**\r\n * 跨iframe通信，消息类\r\n */\r\nexport class PostMessage {\r\n\r\n    type: MessageType;\r\n\r\n    message: any;\r\n}","/**\r\n * 提交审批时，记下选择的流程\r\n */\r\nexport class StartProcessCache {\r\n\r\n    selectedProcessList: SelectedProcessItem[];\r\n\r\n}\r\n\r\n/**\r\n * 提交审批时，记下选择的流程\r\n */\r\nexport class SelectedProcessItem {\r\n\r\n    /**\r\n     * 流程分类id\r\n     */\r\n    processCategory: string;\r\n\r\n    /**\r\n     * 流程定义id\r\n     */\r\n    processDefinitionId: string;\r\n\r\n    /**\r\n     * 流程定义名称\r\n     */\r\n    processDefinitionName: string;\r\n\r\n    /**\r\n     * 记录时间\r\n     */\r\n    logTime: Date = new Date();\r\n\r\n    constructor(processCategoryId: string, processDefinitionId: string, processDefinitionName: string) {\r\n        this.processCategory = processCategoryId;\r\n        this.processDefinitionId = processDefinitionId;\r\n        this.processDefinitionName = processDefinitionName;\r\n        this.logTime = new Date();\r\n\r\n    }\r\n\r\n}","import { Component, OnInit, ViewChild, TemplateRef, Input, Injector } from '@angular/core';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { StartProcessPayload, FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { ExecutionResponse } from '../../entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading'\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { MessageType } from '../../entity/postMessage';\r\nimport { MessagerService } from '@farris/ui-messager'\r\nimport { PriorityInfo, SimulateResponse, SimulationPath } from '../../entity/simulate-response';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { ConfigCode } from '../../entity/task-center-config';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { SelectedProcessItem, StartProcessCache } from '../../entity/process-cache';\r\n\r\n@Component({\r\n  selector: 'lib-process-selector',\r\n  templateUrl: './process-selector.component.html',\r\n  styleUrls: ['../../components/task-execute/task-execute.component.css'],\r\n})\r\nexport class ProcessSelectorComponent implements OnInit {\r\n\r\n  // task center-ui中start-process-menu使用了此选择器，构造方法改动时，需重新编译\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private loadingService: LoadingService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private messager: MessagerService,\r\n    private injector: Injector,\r\n    private handlerService: WfTaskHandlerService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  destProcesses: { id: string, name: string }[] = [];//候选流程\r\n  destNodes: { id: string, name: string }[] = [];//候选下一环节\r\n  response: SimulateResponse;//保存模拟流程后返回的内容，选择节点时使用\r\n  assignInfos: AssignInfoHelpEntity[] =\r\n    [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: null,\r\n      resolved: false,\r\n    }];//节点返回的指派信息（多个）\r\n\r\n  otherAssignInfos: AssignInfoHelpEntity[] = [];//节点返回的指派信息（多个）\r\n\r\n  selectedProcessId: string;//选择的流程定义ID\r\n  selectedNodeId: string; //选择的下一环节ID，后续环节id的拼接\r\n  payload = new StartProcessPayload;//保存表单上传来的payload\r\n  subject = new Subject();//返回bool\r\n  subjectWithResponse = new Subject<any>();//返回流程上下文\r\n  subjectCancel = new Subject();//点击取消后的subject\r\n  submitDisable: boolean = false;//提交按钮是否禁用\r\n  showButtons: boolean = false;\r\n  curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//系统当前语言\r\n  nodePlaceholder: string;//下一环节的placeholder\r\n  processPlaceholder: string;//选择流程的placeholder\r\n  wfContext = new WfContext();//工作流上下文\r\n  processDefaultValue: string;//默认流程（提示用）\r\n  nodeDefaultValue: string;//默认下一环节（提示用）\r\n  dialogHeight: number = 240;//弹框基本高度\r\n\r\n  @ViewChild('nodeCombo') nodeCombo: ComboListComponent\r\n  @ViewChild('buttons') buttons: TemplateRef<any>;//确认取消按钮\r\n  @Input() openFromIframe: boolean = false;//是否从iframe打开，应用IDP提交审批集成\r\n\r\n  @Input()//原生JS提交审批使用\r\n  set parameter(parameter: any) {\r\n    if (parameter) {\r\n      this.showButtons = true;\r\n      this.setParam(parameter);\r\n    }\r\n  }\r\n\r\n  setParam(param: StartProcessPayload): Observable<any> {\r\n    let subject = new Subject<any>();\r\n    if (!param) { return; }\r\n    this.payload.id = param.id;\r\n    this.payload.processDefinitionId = param.processDefinitionId;\r\n    this.payload.processDefinitionKey = param.processDefinitionKey;\r\n    this.payload.bizDefKey = param.bizDefKey;\r\n    this.payload.dataModelId = param.dataModelId;\r\n    this.payload.dataId = param.dataId;\r\n    this.payload.name = param.name;\r\n    this.payload.startUserId = param.startUserId;\r\n    this.payload.nextFlowNodes = [];\r\n    this.payload.otherAssignNodes = [];\r\n    this.wfContext.processCategoryId = param.bizDefKey;\r\n    this.startProcessSimulate(this.payload, subject);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  startProcessSimulate(payload: StartProcessPayload, subject: Subject<any>) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.response = response;\r\n      response.priorityInfo && response.priorityInfo.enable && (this.dialogHeight += 40);\r\n      this.destProcesses = response.procDefs.map(process => ({ id: process.procDefId, name: process.procDefName + `(v${process.version}.0)` }));//增加流程的版本信息\r\n      if (this.destProcesses.length === 1) {//只有一个候选流程时\r\n        this.selectedProcessId = this.destProcesses[0].id;\r\n        this.setNextNode(response);\r\n        this.processDefaultValue = this.destProcesses[0].name;\r\n        \r\n      } else {//多个流程时，取上一次选择的\r\n        const selectedProcessId = this.getSelectedProcessCache(this.payload.bizDefKey);\r\n        if (selectedProcessId && this.destProcesses.findIndex(p => p.id === selectedProcessId.processDefinitionId) > -1) {\r\n          this.getDestNodes(selectedProcessId.processDefinitionId);\r\n          this.processDefaultValue = selectedProcessId.processDefinitionName;\r\n        } else {\r\n          this.processPlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n        }\r\n        this.dialogHeight = 330;\r\n      }\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        this.dialogHeight += (this.assignInfos.length) * 40;\r\n      }\r\n      if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n        this.dialogHeight += (this.otherAssignInfos.length + 1) * 40;\r\n      }\r\n      this.dialogHeight = this.dialogHeight > 440 ? 440 : this.dialogHeight;\r\n      subject.next({ result: true, dialogHeight: this.dialogHeight });\r\n    }, error => {\r\n      load.close();\r\n      subject.error(error);\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择某个流程后\r\n   * @param data\r\n   */\r\n  selectProcessChange(data: any) {\r\n    this.nodeCombo.onClear();\r\n    this.getDestNodes(data.data.id);\r\n  }\r\n\r\n  /**\r\n   * 根据选择的流程定义id获取下一环节信息\r\n   * @param selectedProcessId \r\n   */\r\n  private getDestNodes(selectedProcessId: string) {\r\n    this.selectedProcessId = selectedProcessId;\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.clearAssignInfos();\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.processDefinitionId = this.selectedProcessId;\r\n    payload.dataId = this.payload.dataId;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.response = response;\r\n      this.setNextNode(response);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择节点后事件\r\n   */\r\n  selectNodeChange(data: any) {\r\n    this.clearAssignInfos();\r\n    this.selectedNodeId = data.data.id;\r\n    const nodeNames = data.data.name.split('，');\r\n\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {//已预解析参与者\r\n      this.setAssignInfo(this.response.simulationPaths[data.index]);\r\n      this.setOtherAssignInfo(this.response);//切换节点后，其他节点指派需要更新，重新去重\r\n    } else {//未预解析参与者\r\n      let payload = new StartProcessPayload();\r\n      payload.processDefinitionId = this.selectedProcessId;\r\n      payload.dataId = this.payload.dataId;\r\n      payload.nextFlowNodes = [];\r\n\r\n      this.selectedNodeId.split('，').forEach((nodeId, index) => {\r\n        let nextFlowNode = new FlowNodeInfo();\r\n        nextFlowNode.activityDefinitionId = nodeId;\r\n        nextFlowNode.activityDefinitionName = nodeNames[index];\r\n        payload.nextFlowNodes.push(nextFlowNode);\r\n      });\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n        load.close();\r\n        this.setAssignInfo(response.simulationPaths[0]);//选择的下一环节应该在同一条路径上，故取simulationPaths[0]\r\n        this.setOtherAssignInfo(response);//切换节点后，其他节点指派需要更新，重新去重\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n * 实现真正的提交\r\n */\r\n  startProcessSubmit() {\r\n    if (!this.selectedProcessId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectProcess')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectProcess'));\r\n      return;\r\n    }\r\n    if (!this.selectedNodeId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectNode')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectNode'));\r\n      return;\r\n    }\r\n    if (this.assignInfos.filter(info => (info.assigneeInfo || info.selectedAssignees.length) && !info.assignees.length).length) {//空参与者策略时，不提示选人\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectProcessor')) :\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n      return;\r\n    }\r\n    if (this.response.priorityInfo && this.response.priorityInfo.enable && !this.response.priorityInfo.priority) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectPriority')) :\r\n        this.notify.warning(this.i18nService.getValue('task.selectPriority'));\r\n      return;\r\n    }\r\n\r\n    const nodes: string[] = this.selectedNodeId.split('，');\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      let nextFlowNode: FlowNodeInfo = {\r\n        activityDefinitionId: nodes[i],\r\n        activityDefinitionName: this.assignInfos[i].activityDefinitionName,\r\n        dependency: this.assignInfos[i].dependency,\r\n        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n        assigneeInfo: null,\r\n        resolved: false,\r\n        anonymous: false,\r\n        anonymousText: ''\r\n      }\r\n      //节点找不到人，且异常提示，前端控制住，不允许走提交请求（构件事务问题）。并行场景下暂不处理\r\n      if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n          const str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n          this.openFromIframe ? this.messager.warning(str) : this.notify.warning(str);\r\n          return;\r\n        }\r\n      }\r\n      this.payload.nextFlowNodes.push(nextFlowNode);\r\n    }\r\n    //拼接其他节点选人结果\r\n    if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n      for (let i = 0; i < this.otherAssignInfos.length; i++) {\r\n        let nextFlowNode: FlowNodeInfo = {\r\n          activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,\r\n          activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,\r\n          dependency: this.otherAssignInfos[i].dependency,\r\n          selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],\r\n          assigneeInfo: null,\r\n          resolved: false,\r\n          anonymous: false,\r\n          anonymousText: ''\r\n        }\r\n        this.payload.otherAssignNodes.push(nextFlowNode);\r\n      }\r\n    }\r\n    this.payload.processDefinitionId = this.selectedProcessId;\r\n    this.submitDisable = true;\r\n    //紧急程度\r\n    if (this.response.priorityInfo && this.response.priorityInfo.enable) {\r\n      this.payload.priority = this.response.priorityInfo.priority;\r\n    }\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcess(this.payload).subscribe((response: ExecutionResponse) => {\r\n      load.close();\r\n      this.submitDisable = false;\r\n      this.subject.next(true);\r\n      this.subjectWithResponse.next(response);\r\n      let messageAfterSubmit = this.i18nService.getValue('startProcess.submitSuccess');\r\n      if (this.openFromIframe) {\r\n        (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.SubmitSuccess, message: messageAfterSubmit } });\r\n      } else {\r\n        this.handlerService.handleSubmitMessage(ConfigCode.Info_After_Submit, this.payload.bizDefKey);\r\n      }\r\n      if (!this.openFromIframe && response.needInteraction) {//提交审批后需要指派场景\r\n        this.notify.info(this.i18nService.getValue('cueWords.select')\r\n          + response.nextFlowNodes[0].activityDefinitionName\r\n          + this.i18nService.getValue('cueWords.processor'));\r\n        let task = new TaskEntity();\r\n        let action = new TaskAction();\r\n        task.sourceId = response.nextFlowNodes[0].assigneeInfo.workItemId;\r\n        action.code = 'AssignUser';\r\n        action.name = this.i18nService.getValue('cueWords.assignUser');\r\n        this.handlerService.execute(task, action).subscribe(re => { });\r\n      }\r\n      this.setSelectedProcessCache();\r\n    }, (error) => {\r\n      load.close();\r\n      this.payload.nextFlowNodes = [];\r\n      this.submitDisable = false;\r\n      this.subject.next(false);//已经有人用了这个subject，提交失败的话返回false by fangpengfei@20210324\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择流程清空\r\n   */\r\n  selectProcessClear() {\r\n    this.selectedProcessId = '';\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n    this.response = null;\r\n  }\r\n\r\n  /**\r\n   * 选择节点清空\r\n   */\r\n  selectNodeClear() {\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n  }\r\n\r\n  /**\r\n   * 用户帮助选人\r\n   */\r\n  afterConfirm(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 其他节点用户帮助选人\r\n   * @param data \r\n   * @param index \r\n   */\r\n  otherAssignInfosAfterConfirm(data: Assignee[], index: number) {\r\n    this.otherAssignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 弹框点击取消\r\n   */\r\n  cancel() {\r\n    if (this.openFromIframe) {\r\n      (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.Cancel, message: '' } });\r\n    } else {\r\n      this.subjectCancel.next(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取提交审批后返回值（bool型，兼容历史）\r\n   */\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n  /**\r\n   * 获取提交审批后返回值（实体型，带流程上下文）\r\n   */\r\n  getSubjectWithResponse() {\r\n    return this.subjectWithResponse.asObservable();\r\n  }\r\n  /**\r\n   * 点击取消后的subject，关闭窗口使用\r\n   * @returns\r\n   */\r\n  getSubjectCancel() {\r\n    return this.subjectCancel.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 设置下一环节\r\n   */\r\n  private setNextNode(response: SimulateResponse) {\r\n    this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n      id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),\r\n      name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')\r\n    }));\r\n    //处理默认分支，无默认分支返回-1\r\n    const defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n    if (defaultIndex > -1) {\r\n      this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n      this.nodeDefaultValue = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n      this.setAssignInfo(response.simulationPaths[defaultIndex]);\r\n      this.setOtherAssignInfo(response);\r\n    } else {\r\n      this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置当前指派信息帮助参数\r\n   */\r\n  private setAssignInfo(simulationPaths: SimulationPath) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('，').forEach(nodeId => {\r\n      const node = simulationPaths.nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityDefinitionName: '',\r\n          activityDefinitionId: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfo(response: SimulateResponse) {\r\n    this.otherAssignInfos = [];\r\n    let tmpOtherAssignInfos = [];\r\n    let otherAssignNodes = response.otherAssignNodes;\r\n    if (otherAssignNodes && otherAssignNodes.length) {\r\n      otherAssignNodes.forEach(node => {\r\n        tmpOtherAssignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      })\r\n      //其他节点与下一节点去重\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        tmpOtherAssignInfos = tmpOtherAssignInfos.filter(a => this.assignInfos.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n      }\r\n      this.otherAssignInfos = tmpOtherAssignInfos;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空当前指派信息帮助参数\r\n   */\r\n  private clearAssignInfos() {\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n    this.otherAssignInfos = [];\r\n  }\r\n\r\n  /**\r\n   * 获取浏览器缓存，上次流程选择的结果\r\n   */\r\n  private getSelectedProcessCache(processCategoryId: string) {\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      return browserCache.selectedProcessList.find(a => a.processCategory == processCategoryId);\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 浏览器缓存记下流程选择的结果\r\n   */\r\n  private setSelectedProcessCache() {\r\n    const processCategoryId = this.payload.bizDefKey;\r\n    const processDefinitionId = this.payload.processDefinitionId;\r\n    let process = this.destProcesses.find(a => a.id == processDefinitionId);\r\n    const processDefinitionName = process && process.name;\r\n\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      let selectedProcessList = browserCache.selectedProcessList;\r\n      if (selectedProcessList.findIndex(a => a.processCategory == processCategoryId) > -1) {\r\n        selectedProcessList.map(item => {\r\n          if (item.processCategory == processCategoryId) {\r\n            item.processDefinitionId = processDefinitionId;\r\n            item.processDefinitionName = processDefinitionName;\r\n            item.logTime = new Date();\r\n          }\r\n        });\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      } else {\r\n        let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n        selectedProcessList.push(item);\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      }\r\n    } else {\r\n      let browserCache = new StartProcessCache();\r\n      let selectedProcessList = [];\r\n      let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n      selectedProcessList.push(item);\r\n      browserCache.selectedProcessList = selectedProcessList;\r\n      localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { TaskService } from \"../service/task.service\";\r\n\r\nexport class CommonComment {\r\n    id: string;\r\n    userId?: string;\r\n    message: string;\r\n    sortOrder?: number;\r\n    type?: string;\r\n    static newEntity(): CommonComment {\r\n        return {\r\n            id: TaskService.newId(),\r\n            message: ''\r\n        };\r\n    }\r\n}\r\n","import { Component, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { forkJoin, Observable, of, Subject } from 'rxjs';\r\nimport { CommonComment } from '../../entity/comment';\r\nimport { CommonCommentFilter } from '../../entity/commonCommentFilter';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { TaskService } from '../../service/task.service';\r\n\r\n@Component({\r\n  selector: 'lib-comment-manage',\r\n  templateUrl: './comment-manage.component.html',\r\n  styleUrls: ['./comment-manage.component.scss']\r\n})\r\nexport class CommentManageComponent implements OnInit {\r\n\r\n  commentList: CommonComment[] = [];\r\n  originCommentList: CommonComment[] = [];\r\n  commentColumns: DataColumn[] = [];\r\n  confirmSubject = new Subject();//点击确定\r\n  cancelSubject = new Subject();//点击取消\r\n\r\n  @Input() filter: CommonCommentFilter;//意见类型\r\n\r\n  @ViewChild('dataGrid') dataGrid: DatagridComponent;\r\n  @ViewChild('commentTypeCell') commentTypeCell: TemplateRef<any>;//常用意见类别模板\r\n  @ViewChild('commentOperateCell') commentOperateCell: TemplateRef<any>;//常用意见删除\r\n  @ViewChild('formButtonRef') buttons: TemplateRef<any>;//取消确认按钮\r\n\r\n  constructor(\r\n    private i18nService: I18nService,\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private loadingService: LoadingService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commentColumns = [{\r\n      field: 'message',\r\n      width: 100,\r\n      title: this.i18nService.getValue('comment.static.content'),\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n    }, {\r\n      field: 'userId',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.type'),\r\n      template: this.commentTypeCell\r\n    }, {\r\n      field: 'operate',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.operate'),\r\n      template: this.commentOperateCell\r\n    }];\r\n    //加载意见列表\r\n    this.loadComments();\r\n  }\r\n\r\n  /**\r\n * 点击常用意见，获取用户常用意见列表\r\n */\r\n  loadComments() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getCommentList(this.filter).subscribe((data: any[]) => {\r\n      load.close();\r\n      this.commentList = data;\r\n      this.originCommentList = JSON.parse(JSON.stringify(data));\r\n    }, () => {\r\n      load.close();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 新增一条常用意见\r\n   */\r\n  addCommonComment() {\r\n    const newEntity = CommonComment.newEntity();\r\n    newEntity.sortOrder = this.commentList.length + 1;\r\n    if (this.filter && this.filter.type) {\r\n      newEntity.type = this.filter.type;\r\n    }\r\n    this.commentList = this.commentList.concat(newEntity);\r\n    //新增后直接编辑单元格\r\n    setTimeout(() => {\r\n      this.dataGrid.editCell(newEntity.id, 'message');\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * 删除一条意见 data.rowData\r\n   */\r\n  deleteComment(data: any) {\r\n    if (data.rowData.userId !== '*') {\r\n      this.commentList = this.commentList.filter(c => c.id != data.rowData.id);\r\n      this.originCommentList = this.originCommentList.filter(c => c.id != data.rowData.id);\r\n      this.dataGrid.loadData(this.commentList);\r\n      this.taskService.deleteComment(data.rowData.id).subscribe(() => { });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 常用意见点击保存\r\n   */\r\n  saveCommonComment() {\r\n    this.dataGrid.endCellEdit();\r\n    this.commentList = this.commentList.filter(c => c.message);\r\n    this.commentList.forEach(comment => {\r\n      if (this.taskService.getBytesLength(comment.message) > 255) {\r\n        this.notify.warning(this.i18nService.getValue('cueWords.commonCommentTooLong'));\r\n        this.dataGrid.editCell(comment.id, 'message');\r\n        throw new Error(\"\");\r\n      }\r\n    })\r\n    this.commentList.forEach(comment => {\r\n      let origin = this.originCommentList.find(c => c.id == comment.id);\r\n      if (!origin || comment.message !== origin.message || comment.sortOrder != origin.sortOrder) {\r\n        this.taskService.addComment(comment).subscribe(() => { });\r\n      }\r\n    })\r\n    //此处已返回给farris\r\n    this.confirmSubject.next({ action: 'submit', data: this.commentList });\r\n  }\r\n\r\n  /**\r\n   * 点击取消（此处已返回给farris）\r\n   */\r\n  clickCancel() {\r\n    this.commentList = this.commentList.filter(c => c.message);\r\n    this.cancelSubject.next({ action: 'cancel', data: this.originCommentList });\r\n  }\r\n\r\n  /**\r\n   * 系统预置的不允许编辑删除\r\n   * @param data data.rowData为实体数据\r\n   * @returns\r\n   */\r\n  beforeEdit = (data: any) => {\r\n    if (data.rowData.userId == '*') {\r\n      return of(false);\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  getConfirmSUbject(): Observable<any> {\r\n    return this.confirmSubject.asObservable();\r\n  }\r\n\r\n  getCancelSubject(): Observable<any> {\r\n    return this.cancelSubject.asObservable();\r\n  }\r\n\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver, ApplicationRef } from '@angular/core';\r\nimport { WfApprovalLogsService } from '@gsp-wf/wf-approval-logs'\r\nimport { ForecastProcessPayload, WFFlowchartService } from '@gsp-wf/ui-flowchart';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { TaskService } from './service/task.service';\r\nimport { TaskAction } from './entity/task-action';\r\nimport { AssigneeInfo } from './entity/complete-response';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { FrameworkService, AppOptions } from '@gsp-sys/rtf-common';\r\nimport { BizFormResult, FormParameter } from './entity/bizform';\r\nimport { TaskEntity } from './entity/task-entity';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { StartProcessPayload, CancelSubmitPayload } from './entity/start-process-payload';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { ExecutionResponse } from './entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BatchCancelNumber, BatchSubmitNumber } from './entity/batchNumber';\r\nimport { SimulateResponse } from './entity/simulate-response';\r\nimport { ConfigCode, OwnerType } from './entity/task-center-config';\r\nimport { TaskCommentComponent } from '../public-api';\r\nimport { CommentManageComponent } from './components/comment-manage/comment-manage.component';\r\nimport { CommonCommentFilter } from './entity/commonCommentFilter';\r\n\r\n@Injectable()\r\nexport class WfTaskHandlerService {\r\n\r\n  subject = new Subject<any>();\r\n  private loading: LoadingService;\r\n  private message: MessagerService;\r\n  private curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//系统当前语言\r\n\r\n  private batchSubmitNum: BatchSubmitNumber = {//批量提交数量\r\n    successNum: 0,\r\n    failedNum: 0,\r\n    errorNum: 0,\r\n  };\r\n  private batchCancelNum: BatchCancelNumber = {//批量取消提交数量\r\n    successNum: 0,\r\n    errorNum: 0\r\n  }\r\n\r\n  constructor(\r\n    private logService: WfApprovalLogsService,\r\n    private flowchartService: WFFlowchartService,\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver,\r\n    private modalService: BsModalService,\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private frameworkService: FrameworkService,\r\n    private appRef: ApplicationRef,\r\n  ) {\r\n    this.loading = this.injector.get(LoadingService);\r\n    this.message = this.injector.get(MessagerService);\r\n  }\r\n\r\n  /**\r\n   * 处理单条任务\r\n   * @param entity 任务实体\r\n   * @param action 任务动作\r\n   */\r\n  execute(task: TaskEntity, action: TaskAction, otherParams?: any): Observable<any> {\r\n    switch (action.code) {\r\n      case 'ViewBizLog'://审批日志。如果是inSuite，根据流程实例打开\r\n        this.logService.showByProcInstId(task.processInstanceId);\r\n        break;\r\n      case 'ViewFlowChart'://查看流程\r\n        this.flowchartService.viewFlowchartByProcInstIdAndDataId(task.processInstanceId, task.refBizId);\r\n        break;\r\n      case 'ViewExecuteForm':// 联查单据\r\n        this.openApp(task, action, otherParams);\r\n        break;\r\n      default: //办理类任务\r\n        this.complete(task, action);\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  assignByInfo(assigneeInfo: AssigneeInfo, openFromIframe: boolean): Observable<any> {\r\n    const assignSubject = new Subject<any>();\r\n    return assignSubject.asObservable();\r\n  }\r\n\r\n  private complete(task: TaskEntity, action: TaskAction) {\r\n    const compFactory = this.resolver.resolveComponentFactory(TaskExecuteComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setTask(task);\r\n    compRef.instance.setAction(action);\r\n    compRef.instance.addPadding();\r\n    const modalConfig: ModalOptions = {\r\n      title: action.name ? action.name : this.i18nService.getValue('task.title'),\r\n      width: 550,\r\n      height: compRef.instance.dialogHeight,\r\n      showButtons: true,\r\n      buttons: compRef.instance.buttons\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.getSubject().subscribe(re => {\r\n      re && re.result && this.subject.next(true);\r\n      re && re.result && dialog.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 打开审批联查界面\r\n   * @param entity 任务实体\r\n   * @param action 动作实体\r\n   */\r\n  openApp(entity: TaskEntity, action: TaskAction, otherParams?: any) {\r\n    const sourceId = entity.sourceId;\r\n    const formInfoLoading = this.loading.show();\r\n    this.taskService.getTaskFormInfo(sourceId).subscribe((formInfo: BizFormResult) => {\r\n      formInfoLoading.close();\r\n      if (!formInfo) {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      const options: AppOptions = {\r\n        appType: 'menu',\r\n        funcId: '',\r\n        appId: '',\r\n        appEntrance: '',\r\n        tabId: sourceId,\r\n        isNewTab: true\r\n      };\r\n      // 传工作流上下文参数\r\n      const parameters = new Map<string, any>();\r\n      // 功能菜单情况\r\n      if (formInfo.appId) {\r\n        // 默认联查审批界面\r\n        if (formInfo.formType === '1') {//表单嵌流程\r\n          parameters.set('workItemId', sourceId);\r\n          parameters.set('procInstId', action.parameters[0].value);\r\n          parameters.set('taskState', entity.state);\r\n          parameters.set('isAssign', entity.actions.some(action => action.code === 'AssignUser'));\r\n          formInfo.parameters.forEach((item: FormParameter) =>\r\n            parameters.set(item.code, item.value)\r\n          );\r\n          options.funcId = formInfo.appId;\r\n        } else {//流程嵌表单\r\n          options.funcId = 'WF0120';\r\n          parameters.set('task', entity);\r\n          parameters.set('formInfo', formInfo);\r\n          otherParams && parameters.set('taskFilter', otherParams.taskFilter);\r\n        }\r\n      } else if (formInfo.url) {//表单格式\r\n        options.funcId = 'WF0120';\r\n        parameters.set('task', entity);\r\n        parameters.set('formInfo', formInfo);\r\n        otherParams && parameters.set('taskFilter', otherParams.taskFilter);\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      options.entityParams = parameters;\r\n      options.queryStringParams = parameters;//兼容IDP表单\r\n      this.openMenu(options, this.i18nService.getValue('static.taskForm'));\r\n    }, error => {\r\n      formInfoLoading.close();\r\n      this.taskService.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 打开菜单，区分是否inSuite环境，用不同方式打开菜单\r\n   * @param options 打开参数\r\n   * @param menuTitle 菜单名称\r\n   */\r\n  private openMenu(options: any, menuTitle: string) {\r\n    if (this.taskService.isInSuite()) {\r\n      options.menuTitle = menuTitle;\r\n      var extObj = (window as any).gspframeworkService.rtf.extendMethod.getExtObj();\r\n      extObj.iGIXMenuOpen(options);\r\n    } else {\r\n      const openMenuLoading = this.loading.show();\r\n      this.frameworkService.openMenu$(options).subscribe(re => {\r\n        openMenuLoading.close();\r\n\r\n      }, error => {\r\n        openMenuLoading.close();\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 返回动作列表，表单嵌流程用到\r\n   * @param workItemId \r\n   */\r\n  refreshActions(workItemId: string): Observable<any> {\r\n    return this.taskService.getWorkItemActions(workItemId).pipe(\r\n      switchMap((actionList: any[]) => {\r\n        return of(actionList.filter(action =>\r\n          action.code !== 'ViewBizLog' &&\r\n          action.code !== 'ViewFlowChart' &&\r\n          action.code !== 'ViewExecuteForm'\r\n        ));\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 根据流程实例ID和动作Code办理任务（暂未用到 by fangpengfei@2020.06.22）\r\n   * @param procInstId 流程实例ID\r\n   * @param state 任务状态\r\n   * @param actionCode 动作Code\r\n   */\r\n  executeByProcInstId(procInstId: string, state: number, actionCode: string): Observable<any> {\r\n    var action = new TaskAction();\r\n    action.code = actionCode;\r\n    const subject = new Subject();\r\n    this.taskService.getTaskByProcInstId(procInstId, state).subscribe((task: TaskEntity) => {\r\n      if (task) {\r\n        this.execute(task, action).subscribe(re => {\r\n          subject.next(re);\r\n        })\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.noTask'));\r\n      }\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 根据workItemId 办理任务\r\n   * @param workItemId 工作项ID\r\n   * @param action 动作实体\r\n   */\r\n  executeByWorkItemId(workItemId: string, action: TaskAction): Observable<any> {\r\n    let task = new TaskEntity();\r\n    task.sourceId = workItemId;\r\n    return this.execute(task, action);\r\n  }\r\n\r\n  /**\r\n   * 提交审批\r\n   * @param payload 上下文参数\r\n   * @returns subject true：提交成功，false：提交失败 \r\n   */\r\n  startProcess(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const configLoad = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(ConfigCode.If_Show_Submit_Dialog, OwnerType.BizDefKey, payload.bizDefKey).subscribe(re => {\r\n      configLoad.close();\r\n      if (re && re.currentValue === 'false') {//自定义无需弹框\r\n        const simulateLoad = this.loading.show();\r\n        this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {//预解析\r\n          simulateLoad.close();\r\n          if (!response || response.needInteraction === false) {//预解析无需交互\r\n            const executeLoad = this.loading.show();\r\n            this.taskService.startProcess(payload).subscribe((response: ExecutionResponse) => {//执行\r\n              executeLoad.close();\r\n              if (payload.withResponse) {\r\n                subject.next(response);\r\n              } else {\r\n                subject.next(true);\r\n              }\r\n              this.handleSubmitMessage(ConfigCode.Info_After_Submit, payload.bizDefKey);\r\n            }, error => {//执行报错\r\n              executeLoad.close();\r\n              if (payload.withResponse) {\r\n                subject.next(null);\r\n              } else {\r\n                subject.next(false);\r\n              }\r\n              this.taskService.error(error);\r\n            });\r\n          } else {//预解析需要交互\r\n            this.showStartProcessDialog(payload).subscribe(re => {\r\n              subject.next(re);\r\n            });\r\n          }\r\n        }, error => {//预解析报错\r\n          simulateLoad.close();\r\n          subject.next(null);\r\n          this.taskService.error(error);\r\n        })\r\n      } else {//无是否弹框配置\r\n        this.showStartProcessDialog(payload).subscribe(re => {\r\n          subject.next(re);\r\n        });\r\n      }\r\n    }, error => {//获取配置出错\r\n      configLoad.close();\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 提交审批弹框\r\n   * @param payload 参数\r\n   * @param withResponse 是否带返回值\r\n   */\r\n  private showStartProcessDialog(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const compFactory = this.resolver.resolveComponentFactory(ProcessSelectorComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setParam(payload).subscribe((re) => {\r\n      const modalConfig: ModalOptions = {\r\n        title: this.i18nService.getValue('startProcess.title'),\r\n        width: 520,\r\n        height: re && re.dialogHeight,\r\n        showButtons: true,\r\n        buttons: compRef.instance.buttons,\r\n        opened: () => {\r\n          setTimeout(() => {\r\n            compRef.changeDetectorRef && compRef.changeDetectorRef.detectChanges();\r\n          }, 100);\r\n        }\r\n      };\r\n      const dialog = this.modalService.show(compRef, modalConfig);\r\n      if (payload.withResponse === true) {//内部使用\r\n        compRef.instance.getSubjectWithResponse().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(() => {\r\n          dialog.close();\r\n        });\r\n      } else {//已有业务组调用\r\n        compRef.instance.getSubject().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n      }\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 取消提交\r\n   * @payload payload 参数\r\n   */\r\n  cancelSubmit(payload: CancelSubmitPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.taskService.cancelSubmit(payload).subscribe((re) => {\r\n      load.close();\r\n      subject.next(true);\r\n      if (re && re.needInteraction) {\r\n        this.notify.info(this.i18nService.getValue('startProcess.cancelSubmitInfo'));\r\n      } else {\r\n        this.handleSubmitMessage(ConfigCode.Info_After_Cancel_Submit, payload.bizDefKey);\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      subject.error(false);\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 提交审批\r\n   * @param dataId 表单id\r\n   * @param bizDefKey 入口单据id\r\n   * @param options 自定义配置\r\n   */\r\n  submitWithBizDefKey(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.dataId = dataId;\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.withResponse = true;\r\n\r\n    return this.startProcess(payload);\r\n  }\r\n\r\n  /**\r\n   * 取消提交审批\r\n   * @param dataId 表单id\r\n   * @param bizDefKey 入口单据id\r\n   * @param options 自定义配置\r\n   */\r\n  cancelSubmitWithDataId(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = dataId;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * 批量提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchSubmitWithBizDefKey(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      var startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataIds[0];\r\n      return this.startProcess(startPayload);\r\n    }\r\n\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchSubmitNum.successNum = 0;\r\n    this.batchSubmitNum.failedNum = 0;\r\n    this.batchSubmitNum.errorNum = 0;\r\n    this.batchSubmitHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量提交审批辅助函数\r\n   */\r\n  private batchSubmitHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length > 0) {\r\n      const dataId = dataIds.shift();//引用类型转换\r\n      let startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataId;\r\n      startPayload.variables = { simulate: true };\r\n      this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n        if (response.needInteraction) {//需要交互\r\n          this.batchSubmitNum.failedNum++;\r\n          this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n        } else {//不需要交互\r\n          startPayload.variables = { simulate: false };\r\n          this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n            this.batchSubmitNum.successNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          }, () => {//实际提交报错\r\n            this.batchSubmitNum.errorNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          })\r\n        }\r\n      }, () => {//模拟提交报错\r\n        this.batchSubmitNum.errorNum++;\r\n        this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {//批量执行完毕\r\n      this.showBatchSubmitInfo(this.batchSubmitNum, bizDefKey);\r\n      handler();//执行回调函数\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量取消提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchCancelSubmitWithDataId(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      return this.cancelSubmitWithDataId(dataIds[0], bizDefKey);\r\n    }\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchCancelNum.successNum = 0;\r\n    this.batchCancelNum.errorNum = 0;\r\n    this.batchCancelHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量取消辅助函数\r\n   */\r\n  private batchCancelHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length) {\r\n      const dataId = dataIds.shift();//引用类型转换\r\n      let cancelPayload = new CancelSubmitPayload();\r\n      cancelPayload.dataId = dataId;\r\n      cancelPayload.bizDefKey = bizDefKey;\r\n      this.taskService.cancelSubmit(cancelPayload).subscribe(() => {//取消成功\r\n        this.batchCancelNum.successNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      }, () => {//取消失败\r\n        this.batchCancelNum.errorNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {\r\n      this.showBatchCancelSubmitInfo(this.batchCancelNum, bizDefKey);\r\n      handler();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 子表提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataId 子表id\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var startProcessPayload = new StartProcessPayload();\r\n    startProcessPayload.dataId = `${parentDataId},${childDataId}`;\r\n    startProcessPayload.bizDefKey = bizDefKey;\r\n    return this.startProcess(startProcessPayload);\r\n  }\r\n\r\n  /**\r\n   * 子表取消提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataId 子表id\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childCancelSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = `${parentDataId},${childDataId}`;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * 子表批量提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataIds 子表id集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childBatchSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchSubmitWithBizDefKey(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n   * 子表批量取消提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataIds 子表id集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childBatchCancelSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchCancelSubmitWithDataId(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n * 批量提交提示信息\r\n * @param successNum 成功条数\r\n * @param failedNum 需要交互的条数\r\n * @param errorNum 执行报错的条数\r\n */\r\n  private showBatchSubmitInfo(num: BatchSubmitNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.failedNum && !num.errorNum) {//批量全部成功\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {//非全部成功\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('batchStartProcess.success') + `【${num.successNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('batchStartProcess.error') + `【${num.errorNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.failedNum && (message += this.i18nService.getValue('batchStartProcess.failed') + `【${num.failedNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      message += this.i18nService.getValue('batchStartProcess.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 批量取消提交提示信息\r\n   */\r\n  private showBatchCancelSubmitInfo(num: BatchCancelNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.errorNum) {//批量全部成功\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Cancel_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('startProcess.success') + `【${num.successNum}】` + this.i18nService.getValue('startProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('startProcess.failed') + `【${num.errorNum}】` + this.i18nService.getValue('startProcess.row'));\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  handleSubmitMessage(code: string, ownerId: string) {\r\n    const load = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(code, OwnerType.BizDefKey, ownerId).subscribe(re => {\r\n      load.close();\r\n      if (re && re.currentValue) {\r\n        let message = '';\r\n        const currentValue = JSON.parse(re.currentValue);\r\n        this.curLanguage === 'zh-CHS' && (message = currentValue.zh_CHS);\r\n        this.curLanguage === 'en' && (message = currentValue.en);\r\n        this.curLanguage === 'zh-CHT' && (message = currentValue.zh_CHT);\r\n        this.notify.success(message);\r\n      } else {\r\n        code === ConfigCode.Info_After_Submit && this.notify.success(this.i18nService.getValue('startProcess.submitSuccess'));\r\n        code === ConfigCode.Info_After_Cancel_Submit && this.notify.success(this.i18nService.getValue('startProcess.cancelSubmitSuccess'));\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 表单上触发流程预解析操作\r\n   * 已封装为表单的命令操作\r\n   */\r\n  processSimulate(): Observable<any> {\r\n    const subject = new Subject();\r\n    const gspWfEventService = (window as any).parent.gspWfEventService;\r\n    gspWfEventService.simulate(() => {\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 根据单据id查看流程图\r\n   * 已封装为表单命令和操作\r\n   */\r\n  viewFlowChartByDataId(dataId: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    this.flowchartService.viewFlowChartByDataId(dataId);\r\n  }\r\n\r\n  /**\r\n   * 查看流程图（新，支持预览）\r\n   * 已封装为表单命令和操作\r\n   * @param bizDefKey 流程分类id\r\n   * @param dataId 表单数据id\r\n   */\r\n  viewFlowChartWithForecast(bizDefKey: string, dataId: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    let payload = new ForecastProcessPayload();\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.dataId = dataId;\r\n    this.flowchartService.viewProcess(payload);\r\n  }\r\n\r\n  /**\r\n   * 查看审批记录（弹框）\r\n   * 已封装为表单命令\r\n   * @param dataId 表单数据id\r\n   * @param style 其他参数\r\n   */\r\n  viewApprovalLog(dataId: string, style: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    const parameters = {\r\n      dataId: dataId,\r\n      style: style,\r\n    }\r\n    this.logService.showApprovalLog(parameters);\r\n  }\r\n\r\n  /**\r\n   * 获取用户的常用意见（已暴露给farris）\r\n   * @returns 用户常用意见list\r\n   */\r\n  getCommonComments(filter: CommonCommentFilter): Observable<any> {\r\n    return this.taskService.getCommentList(filter);\r\n  }\r\n\r\n  /**\r\n   * 展示常用意见管理dialog（已暴露给farris）\r\n   */\r\n  showCommentManageDialog(filter: CommonCommentFilter): Observable<any> {\r\n    let subject = new Subject();\r\n    const compFactory = this.resolver.resolveComponentFactory(CommentManageComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const options: ModalOptions = {\r\n      title: this.i18nService.getValue('comment.static.title'),\r\n      width: 740,\r\n      height: 440,\r\n      showButtons: true,\r\n      buttons: compRef.instance.buttons\r\n    }\r\n    compRef.instance.filter = filter;\r\n    const dialog = this.modalService.show(compRef, options);\r\n    compRef.instance.getConfirmSUbject().subscribe(re => {\r\n      dialog.close();\r\n      subject.next(re);\r\n    });\r\n    compRef.instance.getCancelSubject().subscribe(re => {\r\n      dialog.close();\r\n      subject.next(re);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform, Optional } from '@angular/core';\r\nimport { I18nService } from './i18n.service';\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n    constructor(@Optional() public i18nService: I18nService) { }\r\n    transform(name: any, defaultVal = ''): any {\r\n        if (this.i18nService) {\r\n            const r = this.i18nService.getValue(name);\r\n            return r ? r : defaultVal;\r\n        } else {\r\n            return defaultVal;\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lib-task-assigninfo',\r\n  templateUrl: './task-assigninfo.component.html',\r\n  styleUrls: ['./task-assigninfo.component.css']\r\n})\r\n\r\n/**\r\n * 组件已弃用\r\n */\r\nexport class TaskAssigninfoComponent implements OnInit {\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","/**\r\n * farris用户帮助参数\r\n */\r\nexport class UserHelpParam {\r\n\r\n    readonly: boolean = false;\r\n\r\n    multiSelect: boolean;\r\n\r\n    includeJobLeavers: boolean = false;\r\n\r\n    includeCurrentUser: boolean;\r\n\r\n    includeStopUser: boolean = false;\r\n\r\n    unSelectedUserIds: string;\r\n\r\n    orgId: string;\r\n\r\n    enableChildHierarchy: boolean;\r\n\r\n    showTabIds: string;\r\n\r\n    activeTabId: string;\r\n\r\n    userIds: string;\r\n\r\n    personnelOrderField: string = \"orderby_ordernum\";\r\n\r\n    userTypeMode: string = \"WfMode\";\r\n\r\n    filterId: string;\r\n\r\n}","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport { AssigneeInfo } from '../../entity/complete-response';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { User } from '../../entity/user';\r\nimport { Assignee } from '../../entity/start-process-payload';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { UserHelpParam } from '../../entity/farris-user-help-param';\r\n\r\ndeclare let System: any;\r\n\r\n@Component({\r\n  selector: 'lib-assignee-info',\r\n  templateUrl: './assignee-info.component.html',\r\n  styleUrls: ['../task-execute/task-execute.component.css'],\r\n})\r\nexport class AssigneeInfoComponent implements OnInit {\r\n\r\n  assignUserNgModule: string;\r\n  _assigneeInfo: AssigneeInfo;\r\n  _selectedAssignees: User[];//已经选中的指派人\r\n  assignees: Assignee[] = [];//返回选中人的ID数组\r\n  anonymous = false; // 是否匿名\r\n  anonymousText = ''; // 匿名显示文本\r\n  defaultParticipant: string;//默认办理人（界面提示用）\r\n  pscChange = null;//farris用户帮助\r\n\r\n  @Input() disabled: boolean = false;//办理人员输入框是否禁用\r\n  @Input() placeholder: string;\r\n  @Input() singleSelect: boolean;\r\n  @Input() filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: \"order\", withAllOrg: true, orgId: '' }\r\n  @Input() ifShowBlank: boolean = true;//办理人为空时，是否显示选人框\r\n  @Input() openFromIframe: boolean = false;//是否从iframe打开，应用IDP提交审批集成\r\n  @Input() activityName: string;//节点名称\r\n  @Input() allowGlobalAssign: boolean;//是否全员指派\r\n  @Input() wfContext: WfContext;//工作流上下文\r\n  @Input() index: any;//区分是哪个组件\r\n  @Input() isUseNewSelectUserHelp: boolean = false;//是否直接启用新版选人组件\r\n  @Input() ifHorizontal: boolean = false;//是否水平排列\r\n\r\n  @Output() afterConfirm = new EventEmitter<Assignee[]>();\r\n  groupIcon = '<i class=\"f-icon f-icon-plus-circle text-primary\"></i>';\r\n  extendUserHelp: boolean = false;//用户帮助是否扩展\r\n  extendUserHelpUrl: string;//扩展帮助的url\r\n\r\n  constructor(\r\n    private i18nService: I18nService,\r\n    private notify: NotifyService,\r\n    private cd: ChangeDetectorRef,\r\n    private taskService: TaskService,\r\n    private injector: Injector\r\n  ) {\r\n    //是否使用farris用户帮助\r\n    this.taskService.getWfUserHelpConfig().subscribe((re: any) => {\r\n      if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {\r\n        this.extendUserHelp = true;\r\n        this.extendUserHelpUrl = re.userHelpConfig.url + '?v=20221114';\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    //引入farris用户帮助脚本\r\n    if (this.openFromIframe) {\r\n      (top as any).System.import(\"/platform/common/web/@farris/common-personnel-select/psc.js\" + '?v=' + new Date().getTime().toString()).then((e) => {\r\n      }, error => {\r\n        console.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set assigneeInfo(info: AssigneeInfo) {\r\n    this.disabled = false;\r\n    this.placeholder = null;//清空\r\n    this.assignUserNgModule = null;//清空\r\n    this._assigneeInfo = info;//可以传null\r\n    if (!this._assigneeInfo) {\r\n      this.disabled = true;\r\n    } else {\r\n      if (this._assigneeInfo.selectAssignee) {\r\n        this.disabled = false;\r\n        this.placeholder = this.i18nService.getValue('task.selectPlaceholder');//请选择\r\n      } else {\r\n        this.disabled = true;\r\n        if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {\r\n          this.defaultParticipant = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map(user => user.name).join();//解析人名\r\n        } else {\r\n          this.defaultParticipant = this.i18nService.getValue('task.noUser');//无\r\n        }\r\n      }\r\n      this.singleSelect = !this._assigneeInfo.multiSelect;\r\n      this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;\r\n      if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {\r\n        const orgList = this._assigneeInfo.organizationScope[0];\r\n        this.filter.orgId = orgList.id;\r\n        this.filter.withAllOrg = orgList.includeChildren;\r\n      }\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymous(anonymous: boolean) {\r\n    this.anonymous = anonymous;\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymousText(anonymousText: string) {\r\n    this.anonymousText = anonymousText;\r\n  }\r\n\r\n  /**\r\n   * 已选中的人（帮助不可用）\r\n   */\r\n  @Input()\r\n  set selectedAssignees(selectedAssignees: User[]) {\r\n    !this._assigneeInfo && (this.placeholder = null);\r\n    this._selectedAssignees = selectedAssignees;\r\n    selectedAssignees.length && (this.defaultParticipant = this.anonymous ? this.anonymousText : selectedAssignees.map(user => user.name).join());\r\n  }\r\n\r\n  /**\r\n   * 选择参与者\r\n   */\r\n  clickAssignUser() {\r\n    if (this.isUseNewSelectUserHelp) {\r\n      this.extendUserHelp = true;\r\n      this.extendUserHelpUrl = '/platform/runtime/wf/web/wf-user-help/wf-user-help-farris/wf-user-help-farris.js' + '?v=' + new Date().getTime().toString();\r\n    }\r\n    let context = {\r\n      singleSelect: this.singleSelect,\r\n      allowGlobalAssign: this.allowGlobalAssign,\r\n      assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],\r\n      filter: this.filter,\r\n      selectedUsers: this.assignees && this.assignees.length ? this.assignees : this._selectedAssignees,\r\n      wfContext: this.wfContext\r\n    }\r\n    if (this.extendUserHelp) {\r\n      if (this.openFromIframe) {\r\n        this.showFarrisUserHelpFromWindow(context);\r\n      } else {\r\n        this.showExtendUserHelp(context);\r\n      }\r\n    } else {\r\n      this.showExtendUserHelp(context);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * 加载扩展帮助\r\n   */\r\n  private showExtendUserHelp(context: any) {\r\n    System.import(this.extendUserHelpUrl).then((moduleFactories: any) => {\r\n      const moduleFactory: any = Object.values(moduleFactories)[0];\r\n      const moduleRef = moduleFactory.create(this.injector);\r\n      moduleRef.instance.showHelp(context).subscribe(re => {\r\n        let userList = re.userList;\r\n        if (userList && userList.length) {\r\n          this.assignees = userList.map(user => { return { id: user.id, name: user.name } });\r\n          this.assignUserNgModule = this.assignees.map(user => user.name).join();\r\n        } else {\r\n          this.assignees = [];\r\n          this.assignUserNgModule = '';\r\n        }\r\n        this.afterConfirm.emit(this.assignees);\r\n        this.cd.detectChanges();\r\n      }, error => {\r\n        console.error(error);\r\n      });\r\n    }, error => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  //从window上弹出用户帮助\r\n  private showFarrisUserHelpFromWindow(context: any) {\r\n    let param = new UserHelpParam();\r\n    if (context.wfContext) {\r\n      param.filterId = context.wfContext.processCategoryId;\r\n    }\r\n    param.multiSelect = !context.singleSelect;\r\n    let showOrgTab = false;\r\n    if (context.allowGlobalAssign || (context.filter && context.filter.orgId)) {\r\n      showOrgTab = true;\r\n    }\r\n    let farrisUnSelectedUserIds = '';\r\n    if (context.assigneeUsers && context.assigneeUsers.length) {\r\n      farrisUnSelectedUserIds = context.assigneeUsers.map(user => user.id).join();\r\n      param.unSelectedUserIds = farrisUnSelectedUserIds;\r\n    }\r\n    //有参与者 + 允许全员\r\n    if (showOrgTab && farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'candidate,recent,organization,favorites,group';\r\n      param.activeTabId = 'candidate';\r\n    }\r\n    //允许全员\r\n    if (showOrgTab && !farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'recent,organization,favorites,group';\r\n      param.activeTabId = 'recent';\r\n    }\r\n    //仅有参与者\r\n    if (!showOrgTab && farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'candidate';\r\n      param.activeTabId = 'candidate';\r\n    }\r\n    if (context.filter) {\r\n      let filter = context.filter;\r\n      param.includeCurrentUser = !filter.notGetCurrentUser;\r\n      param.orgId = filter.orgId ? filter.orgId : '*';\r\n      param.enableChildHierarchy = filter.withAllOrg;\r\n    }\r\n    if (context.selectedUsers && context.selectedUsers.length) {\r\n      param.userIds = context.selectedUsers.map(user => user.id).join();\r\n    }\r\n    const token = 'gspWfTask' + this.index;\r\n    (top.window as any).CommonPersonnelSelect.component.farrisDialogShowInWf(param, token);\r\n    if (!this.pscChange) {\r\n      this.pscChange = (top.window as any).FARRIS_PSC.selectionsChange.subscribe((re) => {\r\n        if (re.token == token) {\r\n          let userList = re.data;\r\n          if (userList && userList.length) {\r\n            this.assignees = userList.map(user => { return { id: user.userId, name: user.name } });\r\n            this.assignUserNgModule = this.assignees.map(user => user.name).join();\r\n          } else {\r\n            this.assignees = [];\r\n            this.assignUserNgModule = '';\r\n          }\r\n          this.afterConfirm.emit(this.assignees);\r\n          this.cd.detectChanges();\r\n        }\r\n      }\r\n      );\r\n    }\r\n  }\r\n\r\n  //清除\r\n  assignUserClear() {\r\n    this.assignees = [];\r\n    this.assignUserNgModule = null;\r\n    this.afterConfirm.emit([]);\r\n  }\r\n\r\n}\r\n","import { Directive, EventEmitter, HostListener, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\n/**\r\n * 点击节流器：避免连续点击\r\n */\r\n@Directive({\r\n  selector: '[directive-throttle]'\r\n})\r\nexport class ThrottleClickDirective implements OnInit, OnDestroy {\r\n  // 一定的时间内只执行第一个事件\r\n  private THROTTLE_TIME: number = 2000;\r\n  private subject = new Subject<MouseEvent>();\r\n  private click: Subscription;\r\n  // 事件方法\r\n  @Output() throttleClick = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    const result = this.subject.pipe(\r\n      throttleTime(this.THROTTLE_TIME)\r\n    );\r\n    this.click = result.subscribe(e => {\r\n      this.throttleClick.emit(e)\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.click.unsubscribe();\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(evt: MouseEvent) {\r\n    this.subject.next(evt);\r\n  }\r\n}","\r\n/**\r\n * 执行上传附件实体\r\n */\r\nexport class FileUploadEntity {\r\n\r\n    rootId: string;\r\n\r\n    metadataIdList: string[];\r\n}\r\n\r\n/**\r\n * 执行删除附件所需实体\r\n */\r\nexport class FileDeleteEntity {\r\n\r\n    rootId: String;\r\n\r\n    metadataId: String;\r\n\r\n    mode: String;\r\n}\r\n\r\nexport class GspDocUploadEntity {\r\n\r\n    filePath: string;\r\n\r\n    metadata: GspDocMetadata;\r\n\r\n    fileContent: string;\r\n\r\n    mode: string;\r\n}\r\n\r\nexport class GspDocMetadata {\r\n\r\n    id: string;\r\n\r\n    fileName: string;\r\n\r\n    rootId: string;\r\n\r\n    docType: string;\r\n}","import { Component, OnInit, Input, ViewChild, forwardRef, Output, EventEmitter } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { FDropdownDirective } from '@farris/ui-dropdown';\r\nimport { UploadDialogService } from '@gsp-svc/formdoc-upload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';\r\nimport { SignHereComponent } from '@gsp-wf/wf-sign';\r\nimport { AvatarComponent } from '@farris/ui-avatar';\r\nimport { DownloadService } from '@gsp-svc/file-load';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { CommonComment } from '../../entity/comment';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { ConfigCode, TaskCenterConfig } from '../../entity/task-center-config';\r\nimport { CommentManageComponent } from '../comment-manage/comment-manage.component';\r\n\r\n@Component({\r\n  selector: 'wf-comment',\r\n  templateUrl: './task-comment.component.html',\r\n  styleUrls: ['./task-comment.component.scss'],\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => TaskCommentComponent),\r\n    multi: true\r\n  },]\r\n})\r\nexport class TaskCommentComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Input() showAttachment: boolean = true;//是否显示附件上传，组件控制\r\n  @Input() showSign: boolean = true;//是否显示签名，组件控制（不同动作可能会不显示）\r\n  @Input() showCommonComment = true;//是否显示常用意见\r\n  @Input() comment: string;\r\n  @Input() placeholder = '';\r\n  @Input() processInstanceId: string;\r\n  @Input() textAreaHeight: number = 120;//文字框的高度\r\n  @Input() defaultComment: string;//默认的意见\r\n  @Input() curUserId: string;//当前用户id\r\n  @Input() taskOrigin: string;//当前是任务列表打开还是任务办理界面打开\r\n\r\n  @Input()\r\n  set TaskCenterConfig(configList: TaskCenterConfig[]) {\r\n    if (configList && configList.length) {\r\n      const attachment = configList.find(a => a.configCode == ConfigCode.If_Show_Attachment);\r\n      const sign = configList.find(a => a.configCode == ConfigCode.If_Show_Signature);\r\n      const enableSign = configList.find(a => a.configCode == ConfigCode.If_Use_Sign_By_Default);\r\n      const editSign = configList.find(a => a.configCode === ConfigCode.If_Can_Edit_Signature);\r\n      attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);\r\n      sign && sign.currentValue === 'true' && (this.ifShowSign = true);\r\n      enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);\r\n      editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);\r\n      if (this.ifShowSign && this.ifEnableSign) {\r\n        this.getUserSign(this.curUserId);\r\n      }\r\n    }\r\n  }\r\n\r\n  @Output() attachment = new EventEmitter();//附件\r\n  @Output() signature = new EventEmitter();//上传签名之后，发送签名id\r\n  @ViewChild('commentDialog') commentDialog: DialogComponent;//常用意见管理\r\n  @ViewChild('signDialog') signDialog: DialogComponent;//手写签名弹框\r\n  @ViewChild('dropdownEl') dropDownEl: FDropdownDirective;//解决选择意见后，下拉菜单无法收折的问题\r\n  @ViewChild('wfSignHere') signaturePad: SignHereComponent;//手写签名组件\r\n  @ViewChild('farrisAvatar') farrisAvatar: AvatarComponent;//头像组件，用作签名图片上传\r\n  @ViewChild('commentManageComp') commentManageComp: CommentManageComponent;//意见维护组件\r\n\r\n\r\n  private _value = '';\r\n  attachmentList: any[] = [];\r\n  ifShowAttachment: boolean = false;//任务中心配置，是否显示附件上传\r\n  ifShowSign: boolean = false;//任务中心配置，是否显示手写签名\r\n  signatureImage: string;//签名图片的base64值\r\n  tmpSignatureImage: string;//临时保存上传的图片\r\n  downloadService = new DownloadService();\r\n  ifUseSign: boolean = false;//是否使用手写\r\n  ifUseImg: boolean = true;//是否使用上传图片\r\n  ifEnableSign: boolean = true;//是否默认启用签名\r\n  ifUploadImg: boolean = false;//是否上传过图片\r\n  ifCanEditSign: boolean = true;//是否允许编辑签名\r\n  originSignId: string;//原始的签名id\r\n  isShowCommonTips: boolean = false;//是否展示提示\r\n  commentList: CommonComment[] = [];\r\n\r\n\r\n  btnHover = {//按钮hover样式变化\r\n    commentHover: false,\r\n    attachmentHover: false,\r\n    signHover: false\r\n  }\r\n\r\n  set value(v) {\r\n    if (this._value !== v) {\r\n      this._value = v;\r\n      this.onModelChange(v);\r\n    }\r\n\r\n  }\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  onModelChange = (obj: any) => { };\r\n  onModelTouched = (obj: any) => { };\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private uploadDialog: UploadDialogService,\r\n    private messageService: MessagerService,\r\n    private loadingService: LoadingService,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commentManageComp.getConfirmSUbject().subscribe(re => {\r\n      this.commentDialog && this.commentDialog.close();\r\n    })\r\n    this.commentManageComp.getCancelSubject().subscribe(() => {\r\n      this.commentDialog && this.commentDialog.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 弹出常用意见管理框\r\n   */\r\n  showCommentDialog() {\r\n    this.dropDownEl && this.dropDownEl.close();\r\n    this.commentDialog.show();\r\n  }\r\n\r\n  /**\r\n   * 点击常用意见，获取用户常用意见列表\r\n   */\r\n  loadComments() {\r\n    this.taskService.getCommentList().subscribe((data: any[]) => {\r\n      this.commentList = data;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ControlValueAccessor必须实现的方法\r\n   */\r\n  writeValue(value: string) {\r\n    if (value !== this.value) {\r\n      this.value = value;\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn) {\r\n    this.onModelTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * 选择一条常用意见后事件\r\n   */\r\n  buttonClick(data: any) {\r\n    this.dropDownEl.close();\r\n    this.value = this.value == this.defaultComment ? data : this.value + data;\r\n  }\r\n\r\n  /**\r\n   * 上传附件\r\n   */\r\n  uploadAttachment() {\r\n    let isRepeat = false;\r\n    this.uploadDialog.uploadFile(this.processInstanceId ? this.processInstanceId : 'gspwftaskattachment', 'wf_attachment').then(re => {\r\n      for (let i of (re as any[])) {\r\n        isRepeat = false;\r\n        for (let attach of this.attachmentList) {\r\n          if (attach.fileName === i.fileName) {\r\n            this.messageService.info('包含重复文件' + i.fileName);\r\n            isRepeat = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!isRepeat) {\r\n          this.attachmentList.push(i);\r\n        }\r\n      }\r\n      this.attachment.emit(this.attachmentList);\r\n      //执行上传附件\r\n      let files = new FileUploadEntity();\r\n      files.rootId = \"wf_attachment\";\r\n      files.metadataIdList = [];\r\n      this.attachmentList.forEach(a => {\r\n        files.metadataIdList.push(a.metadataId);\r\n      })\r\n      files.metadataIdList.length && this.taskService.uploadAttachment(files).subscribe(() => { });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 删除附件\r\n   */\r\n  attachmentDelete(attachment) {\r\n    var gspDocDeleteEntity: FileDeleteEntity = {\r\n      rootId: \"wf_attachment\",\r\n      metadataId: attachment.metadataId,\r\n      mode: \"Formal\"\r\n    }\r\n    let index = this.attachmentList.indexOf(attachment);\r\n    if (index > -1) {\r\n      this.attachmentList.splice(index, 1);\r\n    }\r\n    this.attachment.emit(this.attachmentList);\r\n    this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe(() => { });\r\n  }\r\n\r\n  /**\r\n  * web端打开附件预览\r\n  */\r\n  attachmentPreview(metadataId) {\r\n    const options = {\r\n      appType: \"app\",\r\n      funcId: \"\",\r\n      tabName: \"文档在线预览\",\r\n      appId: \"6ccb476b-f2ba-df8f-6f47-d37d100c56e2\",\r\n      appEntrance: \"docviewertab\",\r\n      tabId: new Date().getTime(),\r\n      entityParams: {\r\n        metadataIdList: [metadataId],\r\n        rootId: \"wf_attachment\",\r\n        metadataId: null,\r\n        viewOptions: {\r\n          showHeader: true,\r\n          showPaging: true,\r\n          showThumbnails: true,\r\n          showDownload: true,\r\n          showSearch: true,\r\n          showZoom: true,\r\n          showPrint: true,\r\n          showSecondaryToolBar: true,\r\n        },\r\n      },\r\n    };\r\n    (window as any).gspframeworkService.rtf.func.openMenu(options);\r\n  }\r\n\r\n  /**\r\n   * 获取不同格式附件的缩略图\r\n   */\r\n  imageUrl(attachmentInfo) {\r\n    const url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';\r\n    return url + this.taskService.createItem(attachmentInfo) + '.svg?v=20220303';\r\n  }\r\n\r\n  /**\r\n   * 展示手写签名dialog\r\n   */\r\n  showSignDialog() {\r\n    this.signDialog.show();\r\n    if (!this.ifEnableSign) {\r\n      this.getUserSign(this.curUserId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击删除签名\r\n   */\r\n  clickToDeleteImage() {\r\n    this.signatureImage = '';\r\n    this.signature.emit(null);\r\n    const load = this.loadingService.show();\r\n    this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe(re => {\r\n      load.close();\r\n    }, () => {\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  clickToUseSign() {\r\n    this.ifUseImg = false;\r\n    this.ifUseSign = true;\r\n    const canvas: any = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');\r\n    canvas.height = 252;\r\n    canvas.width = 665;\r\n  }\r\n\r\n  clickToUploadImg() {\r\n    this.farrisAvatar.onClick();\r\n  }\r\n\r\n  /**\r\n   * 手写签名点确定\r\n   */\r\n  clickToConfirm() {\r\n    let image: any;\r\n    if (this.signaturePad && this.signaturePad.isDraw) {//如果签过名\r\n      image = this.signaturePad.confirm();\r\n    } else if (this.ifUploadImg) {//如果上传过图片\r\n      image = this.tmpSignatureImage;\r\n    }\r\n    if (image) {\r\n      this.uploadSignatureImg(image);\r\n    } else {\r\n      this.signatureImage = this.tmpSignatureImage;\r\n      this.signature.emit(this.originSignId);\r\n      this.signDialog.close();\r\n    }\r\n    //添加启用签名配置\r\n    const load = this.loadingService.show();\r\n    this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe(re => {\r\n      load.close();\r\n    }, () => {\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 点击清空\r\n   */\r\n  clickToReset() {\r\n    this.ifUseSign = false;\r\n    this.ifUseImg = true;\r\n    this.signatureImage = '';\r\n    this.tmpSignatureImage = '';\r\n    this.signature.emit('');\r\n    this.signaturePad && (this.signaturePad.isDraw = false);\r\n    this.ifUploadImg = false;\r\n  }\r\n\r\n  /**\r\n   * 点击取消\r\n   */\r\n  clickToCancel() {\r\n    this.signDialog.close();\r\n  }\r\n\r\n  /**\r\n   * 上传图片后事件\r\n   * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg\r\n   */\r\n  imgChange(event: any) {\r\n    this.ifUseImg = true;\r\n    this.ifUseSign = false;\r\n    this.ifUploadImg = true;\r\n    const image = event.base64;\r\n    this.tmpSignatureImage = image;\r\n    this.signatureImage = image;\r\n  }\r\n\r\n  /**\r\n   * 上传签名\r\n   * @param image \r\n   */\r\n  private uploadSignatureImg(image: any) {\r\n    var uploadSignature = new GspDocUploadEntity();\r\n    uploadSignature.fileContent = image.split(',')[1];\r\n    uploadSignature.filePath = this.curUserId;\r\n    uploadSignature.mode = \"Formal\";\r\n    uploadSignature.metadata = new GspDocMetadata();\r\n    uploadSignature.metadata.id = this.taskService.createNM();\r\n    uploadSignature.metadata.fileName = this.taskService.createNM() + \".png\";\r\n    uploadSignature.metadata.rootId = \"taskcentersignature\";\r\n    uploadSignature.metadata.docType = \"png\";\r\n    const load = this.loadingService.show();\r\n    this.taskService.uploadSignature(uploadSignature).subscribe(signId => {\r\n      load.close();\r\n      this.originSignId = signId;\r\n      this.signature.emit(signId);\r\n      this.signatureImage = image;\r\n      this.signDialog.close();\r\n      localStorage.setItem('gspWfTaskUserSign' + this.curUserId + this.taskService.getCurrentDateString(), signId);\r\n    }, error => {\r\n      load.close();\r\n      this.messageService.error('上传签名失败');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 获取用户的最近一次签名\r\n   */\r\n  private getUserSign(userId: string) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getUserSignId(userId).subscribe(signId => {\r\n      load.close();\r\n      if (signId) {\r\n        this.signature.emit(signId);\r\n        this.originSignId = signId;\r\n        this.signatureImage = this.downloadService.getDownloadUrl(signId, 'taskcentersignature');\r\n        this.tmpSignatureImage = this.signatureImage;\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  //文本框值变动监听事件\r\n  valueChange(e) {\r\n    if (this.taskService.getBytesLength(this.value) > 4000) {\r\n      this.isShowCommonTips = true;\r\n    } else {\r\n      this.isShowCommonTips = false;\r\n    };\r\n  }\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { DataTableModule } from '@farris/ui-datatable';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\n\r\nimport { WfApprovalLogsModule } from '@gsp-wf/wf-approval-logs';\r\nimport { UiFlowchartModule } from '@gsp-wf/ui-flowchart'\r\nimport { TaskImplApiModule } from '@gsp-wf/task-impl-api';\r\nimport { AvatarModule } from '@farris/ui-avatar';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { WfSignModule } from '@gsp-wf/wf-sign';\r\n\r\nimport { CommonSharedModule } from '@gsp-sys/rtf-common';\r\nimport { SessionService, HttpService, CacheService } from '@ecp-caf/caf-common';\r\nimport { FrameworkService, FrmEventBus, FuncsService } from '@gsp-sys/rtf-common';\r\n\r\nimport { TaskService } from './service/task.service';\r\nimport { TranslatePipe } from './service/i18n/translate.pipe';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { WfTaskHandlerService } from './wf-task-handler.service';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component'\r\nimport { TaskAssigninfoComponent } from './components/task-assigninfo/task-assigninfo.component';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { AssigneeInfoComponent } from './components/assignee-info/assignee-info.component';\r\nimport { ThrottleClickDirective } from './throttleTime/throttleClickDirective';\r\nimport { TaskCommentComponent } from './components/task-comment/task-comment.component';\r\nimport { UrgeHandleComponent } from './components/urge-handle/urge-handle.component';\r\nimport { CommentManageComponent } from './components/comment-manage/comment-manage.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TranslatePipe,\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    ThrottleClickDirective,\r\n    TaskCommentComponent,\r\n    UrgeHandleComponent,\r\n    CommentManageComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    DataTableModule,\r\n    FarrisDialogModule,\r\n    PaginationModule,\r\n    NotifyModule,\r\n    ComboListModule,\r\n    WfApprovalLogsModule,\r\n    UiFlowchartModule,\r\n    CommonSharedModule,\r\n    LoadingModule,\r\n    TaskImplApiModule,\r\n    MessagerModule,\r\n    InputGroupModule,\r\n    WfSignModule,//手写签名\r\n    AvatarModule,//签名上传图片\r\n    FDropdownDirectiveTypeModule,//下拉菜单\r\n    DatagridModule,//常用意见管理farris表格\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n      ...EditorProviders\r\n    ]),\r\n    FarrisFormsModule,\r\n    SwitchModule,\r\n    FarrisSectionModule\r\n  ],\r\n  providers: [\r\n    TaskService,\r\n    I18nService,\r\n    WfTaskHandlerService,\r\n    FrameworkService,//框架没提供module\r\n    SessionService,\r\n    HttpService,\r\n    CacheService,\r\n    FrmEventBus,\r\n    FuncsService,\r\n  ],\r\n  exports: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    TaskCommentComponent,\r\n    CommentManageComponent\r\n  ],\r\n  entryComponents: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    TaskCommentComponent,\r\n    CommentManageComponent\r\n  ]\r\n})\r\nexport class WfTaskHandlerModule { }\r\n","/**\r\n * 常用意见过滤\r\n */\r\nexport class CommonCommentFilter {\r\n    /**\r\n     * 类型\r\n     */\r\n    type?: string;\r\n\r\n}"],"names":["forkJoin","Subject","Injectable","HttpService","MessagerService","tslib_1.__extends","Component","Input","BehaviorSubject","ActionOrigin","tslib_1.__values","NotifyService","LoadingService","Injector","ViewChild","SysFarrisLookupComponent","HostBinding","ActionBaseImplComponent","of","EditorTypes","switchMap","ForecastProcessPayload","WfApprovalLogsService","WFFlowchartService","ComponentFactoryResolver","BsModalService","FrameworkService","ApplicationRef","Pipe","Optional","EventEmitter","ChangeDetectorRef","Output","throttleTime","Directive","HostListener","DownloadService","NG_VALUE_ACCESSOR","forwardRef","UploadDialogService","NgModule","CommonModule","FormsModule","DataTableModule","FarrisDialogModule","PaginationModule","NotifyModule","ComboListModule","WfApprovalLogsModule","UiFlowchartModule","CommonSharedModule","LoadingModule","TaskImplApiModule","MessagerModule","InputGroupModule","WfSignModule","AvatarModule","FDropdownDirectiveTypeModule","DatagridModule","DatagridEditorsModule","EditorProviders","FarrisFormsModule","SwitchModule","FarrisSectionModule","SessionService","CacheService","FrmEventBus","FuncsService"],"mappings":"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"}
