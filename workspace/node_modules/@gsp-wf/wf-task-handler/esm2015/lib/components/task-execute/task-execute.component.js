/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, HostBinding, Injector, } from '@angular/core';
import { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';
import { TaskService } from '../../service/task.service';
import { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';
import { NotifyService } from '@farris/ui-notify';
import { I18nService } from '../../service/i18n/i18n.service';
import { AssigneeInfo } from '../../entity/complete-response';
import { BehaviorSubject, Subject } from 'rxjs';
import { TaskAction } from '../../entity/task-action';
import { WfTaskHandlerService } from '../../wf-task-handler.service';
import { TaskEntity } from '../../entity/task-entity';
import { ActionBaseImplComponent, ActionOrigin } from '@gsp-wf/task-impl-api';
import { LoadingService } from '@farris/ui-loading';
import { MessagerService } from '@farris/ui-messager';
import { ConfigCode } from '../../entity/task-center-config';
import { WorkItemExecuteParam } from '../../entity/workitem-execute-param';
import { UrgeHandleContext, UrgeHandleSimulateContext } from '../../entity/urge-handle';
import { BatchVerifySignedContext } from '../../entity/batchVerifysigned';
import { WfContext } from '../../entity/wfContext';
import { UrgeHandleComponent } from "../urge-handle/urge-handle.component";
import { MultiInstanceType } from '../../entity/add-sign';
import { SimulateSubject } from '../../entity/simulaite-subject';
export class TaskExecuteComponent extends ActionBaseImplComponent {
    //任务办理选中后的紧急程度
    /**
     * @param {?} taskService
     * @param {?} notify
     * @param {?} i18nService
     * @param {?} handlerService
     * @param {?} loadingService
     * @param {?} message
     * @param {?} injector
     */
    constructor(taskService, notify, i18nService, handlerService, loadingService, message, injector) {
        super();
        this.taskService = taskService;
        this.notify = notify;
        this.i18nService = i18nService;
        this.handlerService = handlerService;
        this.loadingService = loadingService;
        this.message = message;
        this.injector = injector;
        // 流程实例ID
        this.actionEntity = new TaskAction(); // 动作实体
        // 动作实体
        this.comment = ''; // 审批意见
        // 审批意见
        this.MAX_COMMENT_LENGTH = 4000; //审批意见最大长度
        //当前动作的默认意见
        this.taskList = []; //批量审批接收到的任务list
        //批量审批接收到的任务list
        this.batchSecond = 0; //批量操作的时间
        //批量操作的时间
        this.ifSelectNode = false; // 是否显示选择下一环节
        // 是否显示选择下一环节
        this.ifSelectUser = false; // 是否显示下一环节处理人
        // 是否显示下一环节处理人
        this.ifAssignUser = false; // 是否显示办理人员框
        // 是否显示办理人员框
        this.ifUrgeType = false; // 是否显示接收人框（催办消息接收人）
        // 是否显示接收人框（催办消息接收人）
        this.ifShowCommentToMySelf = false; // 是否显示审批记录仅自己可见
        // 是否显示审批记录仅自己可见
        this.singleSelect = false; // 用户帮助是否单选，默认多选
        // 用户帮助是否单选，默认多选
        this.selectTargetAble = false; // 是否允许选择下一环节
        // 是否允许选择下一环节
        this.hideComment = false; //审批记录仅自己可见
        //审批记录仅自己可见
        this.filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // 系统用户帮助是否过滤当前人
        // 系统用户帮助是否过滤当前人
        this.selectedUsers = []; // 用户帮助选择后的Id数组
        this.subject = new BehaviorSubject(null);
        this.submitResult = { result: true, isClose: true }; // 动作执行完成后返回的实体结果
        // 动作执行完成后返回的实体结果
        this.bindingData = {}; // 系统帮助多选时用到
        // 系统帮助多选时用到
        this.selectNodeText = this.i18nService.getValue('task.nextNodeText'); // 下一环节显示的文字,"下一环节"
        // 处理人员显示文字
        this.commentPlaceHolder = this.i18nService.getValue('static.inputHolder'); //审批意见框placeholder
        //审批意见框placeholder
        this.showAttachment = true; //是否显示附件上传
        //是否显示附件上传
        this.showSign = true; //是否显示签名
        //是否显示签名
        this.showCommonComment = true; //是否显示常用意见
        //是否显示常用意见
        this.textAreaHeight = 84; //文字框的高度
        //文字框的高度
        this.billMethodConfigs = []; // 表单动作配置列表
        // 选择的下一环节ID，并行分支是，逗号隔开的
        this.destNodes = []; // 候选下一环节
        // 候选下一环节
        this.dialogHeight = 270; // 弹框的高度
        // 弹框的高度
        this.dialogHeightBase = 70;
        this.addendum = new Addendum(); // 附件、签名信息
        // 附件、签名信息
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.assignInfos = [{
                // 节点返回的指派信息（多个）
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: null,
                resolved: false,
            }];
        this.otherAssignInfos = []; //其他节点指派信息
        //其他节点指派信息
        this.originOtherAssignInfos = []; //缓存一开始的其他节点指派信息
        // 表单对象
        this.ifRegistered = false; // 表单是否注册
        // 表单是否注册
        this.configList = []; //任务中心配置项
        //任务中心配置项
        this.verifySigned = new VerifySigned(); // 数字验签参数
        // 数字验签参数
        this.submitDisable = false; // 提交按钮是否禁用
        // 提交按钮是否禁用
        //加签使用
        this.addSign = {
            showSignToSign: false,
            allowSignToSIgn: true,
            showMultiInstanceType: false,
            multiInstanceType: [
                { value: 'Parallel', name: this.i18nService.getValue('addSign.parallel') },
                { value: 'Sequential', name: this.i18nService.getValue('addSign.sequential') },
                { value: 'Preempt', name: this.i18nService.getValue('addSign.preempt') },
            ],
            originMultiInstType: '',
            curMultiInstType: MultiInstanceType.Parallel.toString()
        };
        //动态驳回配置
        this.showBackWardConfig = {
            title: this.i18nService.getValue('backWardConfig.title'),
            dynamicBackWardRuleAble: false,
            displayPlaceholder: '',
            showTips: false,
            enable: false,
            backWardRules: [{
                    name: this.i18nService.getValue('backWardConfig.sequence'),
                    value: 'sequence'
                }, {
                    name: this.i18nService.getValue('backWardConfig.backToMe'),
                    value: 'backToMe'
                }, {
                    name: this.i18nService.getValue('backWardConfig.backToCurrentNode'),
                    value: 'backToCurrentNode'
                }]
        };
        /**
         * 任务催办时使用
         */
        this.showUrgeMessageSubject = false; // 是否显示催办消息主题（催办时使用）
        // 内容可编辑
        this.wfContext = new WfContext(); //工作流上下文
        //工作流上下文
        this.enablePriority = false; //是否显示密级（动作级别）
        //是否显示密级（动作级别）
        this.cls = '';
        this.POST_MESSAGE_TARGET = window.document.location.origin;
        this.language = localStorage.getItem('languageCode') || 'zh-CHS'; //中英文
        /**
         * 监听事件处理
         */
        this.eventHandler = (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            this.messageSubject.next(event);
        });
        // 如果存在消息监听，先删掉
        if (TaskExecuteComponent.func) {
            window.removeEventListener('message', TaskExecuteComponent.func, false);
        }
        this.addMessageListener();
    }
    /**
     * 组件销毁时，去掉subject注册
     * @return {?}
     */
    ngOnDestroy() {
        if (this.actionToken) {
            this.taskService.subjectRemove(this.actionToken);
        }
        if (this.simulateToken) {
            this.taskService.subjectRemove(this.simulateToken);
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getAllUserConfig().subscribe((/**
         * @param {?} configList
         * @return {?}
         */
        (configList) => {
            load.close();
            this.configList = configList;
            /** @type {?} */
            const comment = configList.find((/**
             * @param {?} c
             * @return {?}
             */
            c => c.configCode === ConfigCode.Default_Approval_Comment));
            /** @type {?} */
            const if_store_comment = configList.find((/**
             * @param {?} c
             * @return {?}
             */
            c => c.configCode === ConfigCode.If_Store_Comment));
            /** @type {?} */
            let passComment;
            /** @type {?} */
            let backComment;
            if (comment && comment.currentValue) {
                if (this.language == 'zh-CHS') {
                    passComment = JSON.parse(comment.currentValue).pass;
                    backComment = JSON.parse(comment.currentValue).back;
                }
                else {
                    passComment = JSON.parse(comment.currentValue)['pass_' + this.language];
                    backComment = JSON.parse(comment.currentValue)['back_' + this.language];
                }
                if (this.actionEntity.code === 'Pass') {
                    this.comment = passComment;
                    this.defaultComment = passComment;
                }
                if (this.actionEntity.code === 'Back') {
                    this.comment = backComment;
                    this.defaultComment = backComment;
                }
            }
            if (if_store_comment && if_store_comment.currentValue === 'true') {
                if (this.wfCacheComment) { //开启暂存意见，当切换到驳回并且
                    if (this.actionEntity.code == 'Back' && this.wfCacheComment == passComment) {
                    }
                    else {
                        this.comment = this.wfCacheComment;
                    }
                }
            }
        }), (/**
         * @return {?}
         */
        () => {
            load.close();
        }));
        // 从任务办理界面打开时，才注册服务
        if (this.origin === ActionOrigin.TaskForm) {
            this.initFormEvent();
            // 获取表单操作配置
            this.taskService.getTaskFormInfo(this.workItemId).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                if (re && re.billMethodConfigs && re.billMethodConfigs.length) {
                    this.billMethodConfigs = re.billMethodConfigs;
                }
            }));
        }
        /** @type {?} */
        let context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
    }
    /**
     * @private
     * @return {?}
     */
    addMessageListener() {
        window.addEventListener('message', this.eventHandler, false);
        TaskExecuteComponent.func = this.eventHandler;
    }
    /**
     * 重写父类方法
     * @param {?} task
     * @return {?}
     */
    setTask(task) {
        if (task) {
            this.task = task;
            this.workItemId = task.sourceId;
            this.processInstanceId = task.processInstanceId;
            this.wfContext.processCategoryId = task.categoryId;
            this.selectedPriority = task.priority;
        }
    }
    /**
     * 批量办理 设置任务列表
     * @param {?} taskList
     * @return {?}
     */
    setTaskList(taskList) {
        if (taskList.length > 20) {
            this.dialogHeight = 290;
        }
        this.taskList = taskList;
        this.batchSecond = Math.ceil(this.taskList.length / 6);
    }
    /**
     * 重写父类方法
     * @param {?} action
     * @return {?}
     */
    setAction(action) {
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let result = new SimulateSubject();
        if (action) {
            this.actionEntity = action;
            if (this.task) { // 单个、批量都setAction，单个才执行模拟
                return this.simulate(this.actionEntity);
            }
            if (this.taskList && this.taskList.length) {
                return this.batchSimulate();
            }
        }
        //批量时，也要返回
        setTimeout((/**
         * @return {?}
         */
        () => {
            subject.next(result);
        }), 100);
        return subject.asObservable();
    }
    /**
     * 前事件初始化，将服务注册到window上，供表单调用
     * 任务办理界面的window，表单的window.parent
     * @private
     * @return {?}
     */
    initFormEvent() {
        // 审批前事件
        this.actionToken = this.workItemId + 'action';
        /** @type {?} */
        const actionToken = this.actionToken;
        /** @type {?} */
        const subjectCode = 'FormSubjectCode';
        ((/** @type {?} */ (window))).gspWfEventService = ((/** @type {?} */ (window))).gspWfEventService || {};
        ((/** @type {?} */ (window))).gspWfEventService.register = (/**
         * @param {?} formObject
         * @return {?}
         */
        (formObject) => {
            this.taskService.subjectRegister(subjectCode, actionToken);
            this.ifRegistered = true;
            this.formObject = formObject;
        });
        ((/** @type {?} */ (window))).gspWfEventService.notify = (/**
         * @param {?} value
         * @return {?}
         */
        (value) => {
            if (this.ifRegistered) {
                this.taskService.subjectNotify(actionToken, value);
            }
            else { // 表单不注册，也可直接调用notify
                this.simulateToken = this.workItemId + 'simulate';
                /** @type {?} */
                const simulateToken = this.simulateToken;
                this.taskService.subjectRegister(subjectCode, simulateToken);
                this.taskService.subjectResponse(simulateToken, '', (/**
                 * @param {?} value
                 * @return {?}
                 */
                (value) => {
                    value && value.dataChanged && this.completeSimulate();
                }));
                this.taskService.subjectNotify(simulateToken, value);
            }
        });
    }
    /**
     * 点击提交的时候，执行表单的前事件
     * @private
     * @return {?}
     */
    beforeCompleteSubmit() {
        if (this.origin == ActionOrigin.TaskForm) {
            // 获取表单操作配置
            /** @type {?} */
            const passPreActions = this.billMethodConfigs.filter((/**
             * @param {?} action
             * @return {?}
             */
            action => action.action === this.actionEntity.code && action.executionTime === 'Pre')).sort((/**
             * @param {?} x
             * @param {?} y
             * @return {?}
             */
            (x, y) => x.sortOrder - y.sortOrder));
            // 如果表单注册了事件
            if (passPreActions && passPreActions.length) {
                this.executeFormActions([...passPreActions]);
            }
            else { // 没有定义前后事件，直接提交
                this.completeSubmit();
            }
        }
        else {
            this.completeSubmit();
        }
    }
    /**
     * @private
     * @param {?} formActions 表单中要执行的动作
     * @return {?}
     */
    executeFormActions(formActions) {
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                /** @type {?} */
                const data = re.data.data;
                if (data.result === true) {
                    if (data.dataChanged === true) { // 如果需要预解析，先预解析再继续执行
                        this.completeSimulate().subscribe((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            if (r.result) { // 预解析正确
                                this.executeFormActions(formActions);
                            }
                            else { // 预解析错误
                                this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                            }
                        }));
                    }
                    else { // 不需要预解析，继续执行
                        this.executeFormActions(formActions);
                    }
                }
                else {
                    this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批前表单操作执行失败！');
                }
            }));
            // 执行表单动作
            /** @type {?} */
            const formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            this.completeSubmit();
        }
    }
    /**
     * 单个任务预解析
     * @private
     * @param {?} action
     * @return {?}
     */
    simulate(action) {
        switch (action.code) {
            case 'AssignUser': // 指派 单独参数
                return this.assignSimulate();
            case 'Claim': // 领用
                return this.defaultSubjectNext();
            case 'Unclaim': // 取消领用
                return this.defaultSubjectNext();
            case 'Retrieve': // 取回
                return this.defaultSubjectNext();
            case 'Transfer': // 移交 单独参数
                return this.transferSimulate();
            case 'AddSign': // 加签
                return this.addSignSimulate();
            case 'AddSignFront': // 征询
                return this.addSignFrontSimulate();
            case 'Notify': //知会
                return this.notifySimulate();
            case 'Refuse': // 否决
                return this.defaultSubjectNext();
            case 'Obsolete': // 作废
                return this.defaultSubjectNext();
            case 'Comment': // 评论
                return this.defaultSubjectNext();
            case 'ReadTask': // 已阅
                this.ifShowCommentToMySelf = true;
                return this.defaultSubjectNext(295);
            case 'UrgeHandle': //催办
                return this.urgeHandleSimulate();
            case 'CancelConsult': //取消征询
                return this.defaultSubjectNext();
            default: // 通过 驳回 重新提交 其他自定义的动作
                return this.completeSimulate();
        }
    }
    /**
     * 批量审批预解析
     * @private
     * @return {?}
     */
    batchSimulate() {
        switch (this.actionEntity.code) {
            case "ReadTask": //批量已阅
                this.ifShowCommentToMySelf = true;
                return this.defaultSubjectNext(295);
            case "Retrieve": //批量取回
                return this.defaultSubjectNext();
            case "Transfer": //批量移交
                this.ifSelectUser = true;
                this.selectUserText = this.i18nService.getValue('task.receiver'); //接收人员
                this.singleSelect = true;
                return this.defaultSubjectNext(this.dialogHeight + this.dialogHeightBase);
            default:
                return this.defaultSubjectNext();
        }
    }
    /**
     * 默认的预解析返回结果，可控制弹框高度
     * @private
     * @param {?=} dialogHeight
     * @return {?}
     */
    defaultSubjectNext(dialogHeight) {
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let s = new SimulateSubject();
        s.showDialog = true;
        s.dialogHeight = dialogHeight ? dialogHeight : this.dialogHeight;
        s.result = true;
        setTimeout((/**
         * @return {?}
         */
        () => {
            subject.next(s);
        }), 100);
        return subject.asObservable();
    }
    /**
     * 真正地提交
     * 重写父类方法
     * @return {?}
     */
    submit() {
        switch (this.actionEntity.code) {
            case 'AssignUser': // 指派 单独参数
                this.assignSubmit();
                break;
            case 'Claim': // 领用
                this.claimSubmit();
                break;
            case 'Unclaim': // 取消领用
                this.unClaimSubmit();
                break;
            case 'Retrieve': // 取回
                this.retrieveSubmit();
                break;
            case 'Transfer': // 移交 单独参数
                this.transferSubmit();
                break;
            case 'AddSign': // 加签
                this.addSignSubmit();
                break;
            case 'AddSignFront': // 征询
                this.addSignFrontSubmit();
                break;
            case 'Comment': // 评论
                this.commentSubmit();
                break;
            case 'Notify': //知会
                this.notifySubmit();
                break;
            case 'ReadTask': // 已阅
                this.readSubmit();
                break;
            case 'UrgeHandle': //催办
                this.urgeHandleSubmit();
                break;
            case 'CancelConsult': //取消征询
                this.cancelConsultSubmit();
                break;
            default: // 通过 驳回 否决 作废 重新提交 其他自定义动作
                this.beforeCompleteSubmit();
        }
        return this.subject.asObservable();
    }
    /**
     * 批量办理点击提交
     * @param {?} tasks
     * @return {?}
     */
    batchSubmit(tasks) {
        switch (this.actionEntity.code) {
            case "ReadTask": //批量已阅
                return this.batchReadTaskSubmit(tasks);
            case "Retrieve": //批量取回
                return this.batchRetrieveSubmit(tasks);
            case "Claim": //批量领用
                return this.batchClaimSubmit(tasks);
            case "Unclaim": //批量取消领用
                return this.batchUnclaimSubmit(tasks);
            case "Transfer": //批量移交
                return this.batchTransferSubmit(tasks);
            default:
                return this.batchCompleteSubmit(tasks);
        }
    }
    /**
     * 执行批量前事件
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    batchCompleteSubmit(tasks) {
        /** @type {?} */
        let filterNum = 0;
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        /** @type {?} */
        const successSubmit = { result: true, isClose: true };
        if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) { // 批量意见是否必填不支持根据审批项配置操作，批量驳回意见必填
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const noActionTasks = tasks.filter((/**
             * @param {?} t
             * @return {?}
             */
            t => t.actions.findIndex((/**
             * @param {?} a
             * @return {?}
             */
            a => a.code === this.actionEntity.code)) === -1));
            if (noActionTasks && noActionTasks.length > 0) {
                for (const a of noActionTasks) {
                    filterNum++;
                    if (filterNum === tasks.length) {
                        subject.next(successSubmit);
                        this.showBatchSubmitInfo(0, filterNum, 0, 0);
                    }
                }
            }
            /** @type {?} */
            let actTasks = tasks.filter((/**
             * @param {?} t
             * @return {?}
             */
            t => t.actions.some((/**
             * @param {?} a
             * @return {?}
             */
            a => a.code === this.actionEntity.code))));
            if (actTasks && actTasks.length > 0) {
                this.executeBatchEvent([...this.actionEntity.preEvents.filter((/**
                     * @param {?} e
                     * @return {?}
                     */
                    e => e.batch))], actTasks, this.actionEntity, (/**
                 * @param {?} re
                 * @return {?}
                 */
                (re) => {
                    if (re && re.result) {
                        if (re.passTasks) {
                            /** @type {?} */
                            const backTasks = actTasks.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            t => re.passTasks.findIndex((/**
                             * @param {?} id
                             * @return {?}
                             */
                            id => id === t.id)) === -1));
                            if (backTasks && backTasks.length > 0) {
                                for (const t of backTasks) {
                                    filterNum++;
                                    if (filterNum === tasks.length) {
                                        subject.next(successSubmit);
                                        this.showBatchSubmitInfo(0, filterNum, 0, 0);
                                    }
                                }
                            }
                            actTasks = actTasks.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            t => re.passTasks.findIndex((/**
                             * @param {?} id
                             * @return {?}
                             */
                            id => id === t.id)) > -1));
                        }
                        if (actTasks.length > 0) {
                            /** @type {?} */
                            const batchVerifySignedContext = new BatchVerifySignedContext();
                            this.batchVerifySubmit(actTasks, filterNum, batchVerifySignedContext).subscribe((/**
                             * @param {?} r
                             * @return {?}
                             */
                            (r) => {
                                if (r && r.successSubmit && r.successSubmit.result) {
                                    this.executeBatchEvent([...this.actionEntity.postEvents.filter((/**
                                         * @param {?} e
                                         * @return {?}
                                         */
                                        e => e.batch))], r.successHandleTasks, this.actionEntity, (/**
                                     * @return {?}
                                     */
                                    () => {
                                        subject.next(r.successSubmit);
                                    }), { result: true, passTasks: r.successHandleTasks.map((/**
                                         * @param {?} t
                                         * @return {?}
                                         */
                                        t => t.id)) });
                                }
                            }));
                        }
                    }
                    else {
                        subject.next({ result: false, isClose: false });
                    }
                }), { result: true, passTasks: actTasks.map((/**
                     * @param {?} t
                     * @return {?}
                     */
                    t => t.id)) });
            }
        }
        return subject.asObservable();
    }
    /**
     * 批量数字签名
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} batchVerifySignedContext
     * @return {?}
     */
    batchVerifySubmit(tasks, filterNum = 0, batchVerifySignedContext) {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        const verifyTasks = tasks.filter((/**
         * @param {?} t
         * @return {?}
         */
        t => {
            /** @type {?} */
            const action = t.actions.find((/**
             * @param {?} a
             * @return {?}
             */
            a => a.code === this.actionEntity.code));
            if (!action) {
                return false;
            }
            else {
                if (action.parameters.some((/**
                 * @param {?} p
                 * @return {?}
                 */
                p => p.code === 'CertificationNecessary' && p.value === 'true'))) {
                    return true;
                }
                else {
                    return false;
                }
            }
        }));
        /** @type {?} */
        const verifyTasksNum = verifyTasks.length;
        if (verifyTasks.length > 0) {
            /** @type {?} */
            const that = this;
            if (((/** @type {?} */ (window))).gspframeworkService &&
                ((/** @type {?} */ (window))).gspframeworkService.rtf) {
                ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', (/**
                 * @param {?} signedData
                 * @return {?}
                 */
                function signMsgOver(signedData) {
                    if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                        // 证书对象
                        /** @type {?} */
                        const cert = gspCA.getCurCert();
                        // 验签参数
                        that.verifySigned = {
                            // 要验证的证书base64编码的字符流(certkey)
                            certBase64Info: gspCA.getCertBase64(cert),
                            // 签名原信息
                            msg: ['BatchDigitalSignature'],
                            // 要签名后信息
                            signedmsg: signedData[1][0],
                            // 用户使用场景，目前未使用，可以为空
                            useCase: null,
                        };
                        batchVerifySignedContext.verifySigned = that.verifySigned;
                        that.taskService.batchVerifySigned(batchVerifySignedContext).subscribe((/**
                         * @return {?}
                         */
                        () => {
                            /** @type {?} */
                            const verifyTasksNum = 0;
                            that.batchComplete(tasks, filterNum, verifyTasksNum).subscribe((/**
                             * @param {?} re
                             * @return {?}
                             */
                            re => {
                                subject.next(re);
                            }));
                        }), (/**
                         * @param {?} error
                         * @return {?}
                         */
                        (error) => {
                            /** @type {?} */
                            const otherTasks = tasks.filter((/**
                             * @param {?} t
                             * @return {?}
                             */
                            t => verifyTasks.findIndex((/**
                             * @param {?} task
                             * @return {?}
                             */
                            task => task.id === t.id)) === -1));
                            that.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe((/**
                             * @param {?} re
                             * @return {?}
                             */
                            re => {
                                subject.next(re);
                            }));
                        }));
                    }
                    else {
                        that.notify.error(signedData[1]);
                        subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });
                    }
                }));
            }
            /** @type {?} */
            const msg = ['BatchDigitalSignature'];
            gspCA.getSignedMsg(msg);
        }
        else {
            this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                subject.next(re);
            }));
        }
        return subject.asObservable();
    }
    /**
     * 真正的批量提交任务
     * @private
     * @param {?} tasks
     * @param {?=} filterNum
     * @param {?=} verifyTasksNum
     * @return {?}
     */
    batchComplete(tasks, filterNum = 0, verifyTasksNum) {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        let successNum = 0;
        /** @type {?} */
        let failedNum = 0;
        /** @type {?} */
        let errorNum = 0;
        /** @type {?} */
        const successSubmit = { result: true, isClose: true };
        /** @type {?} */
        const successHandleTasks = new Array();
        /** @type {?} */
        const load = this.loadingService.show();
        for (const task of tasks) {
            /** @type {?} */
            const context = new CompleteContext();
            context.workItemId = task.sourceId;
            context.conclusionValue = this.actionEntity.code;
            context.comment = this.comment;
            context.addendum = this.addendum;
            this.taskService.completeSimulate(context).subscribe((/**
             * @param {?} response
             * @return {?}
             */
            (response) => {
                if (response && response.needInteraction === true) { // 需要交互
                    failedNum++;
                    if (successNum + failedNum + errorNum === tasks.length) {
                        load.close();
                        subject.next({ successSubmit, successHandleTasks });
                        this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                    }
                }
                else { // 不需要交互
                    this.taskService.complete(context).subscribe((/**
                     * @return {?}
                     */
                    () => {
                        successNum++;
                        successHandleTasks.push(task);
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit, successHandleTasks });
                            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    }), (/**
                     * @return {?}
                     */
                    () => {
                        errorNum++;
                        if (successNum + failedNum + errorNum === tasks.length) {
                            load.close();
                            subject.next({ successSubmit, successHandleTasks });
                            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                        }
                    }));
                }
            }), (/**
             * @return {?}
             */
            () => {
                errorNum++;
                if (successNum + failedNum + errorNum === tasks.length) {
                    load.close();
                    subject.next({ successSubmit, successHandleTasks });
                    this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);
                }
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量已阅
     * @private
     * @param {?} tasks
     * @return {?}
     */
    batchReadTaskSubmit(tasks) {
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let successNum = 0;
            /** @type {?} */
            let errorNum = 0;
            /** @type {?} */
            const load = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            task => {
                /** @type {?} */
                let context = {
                    workItemId: task.sourceId,
                    comment: this.comment,
                    addendum: this.addendum,
                };
                this.taskService.readTask(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                re => {
                    successNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: true, isClose: true });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    errorNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: false, isClose: false });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量取回
     * @private
     * @param {?} tasks
     * @return {?}
     */
    batchRetrieveSubmit(tasks) {
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let successNum = 0;
            /** @type {?} */
            let errorNum = 0;
            /** @type {?} */
            const load = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            task => {
                /** @type {?} */
                let context = {
                    workItemId: task.sourceId,
                    comment: this.comment,
                    addendum: this.addendum,
                };
                this.taskService.retrieve(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                re => {
                    successNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    errorNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: false, isClose: false });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    batchClaimSubmit(tasks) {
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let successNum = 0;
            /** @type {?} */
            let errorNum = 0;
            /** @type {?} */
            const load = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            task => {
                this.taskService.claim(task.sourceId, this.comment).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                re => {
                    successNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    errorNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: false, isClose: false });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量取消领用
     * @private
     * @param {?} tasks
     * @return {?}
     */
    batchUnclaimSubmit(tasks) {
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let successNum = 0;
            /** @type {?} */
            let errorNum = 0;
            /** @type {?} */
            const load = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            task => {
                this.taskService.unClaim(task.sourceId, this.comment).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                re => {
                    successNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    errorNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: false, isClose: false });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量移交
     * @private
     * @param {?} tasks 批量任务列表
     * @return {?}
     */
    batchTransferSubmit(tasks) {
        /** @type {?} */
        const subject = new BehaviorSubject(null);
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let successNum = 0;
            /** @type {?} */
            let errorNum = 0;
            /** @type {?} */
            const load = this.loadingService.show();
            tasks.forEach((/**
             * @param {?} task
             * @return {?}
             */
            task => {
                /** @type {?} */
                const context = {
                    workItemId: task.sourceId,
                    assignee: this.selectedUsers[0],
                    comment: this.comment,
                    addendum: this.addendum,
                };
                this.taskService.transfer(context).subscribe((/**
                 * @param {?} re
                 * @return {?}
                 */
                re => {
                    successNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                        subject.next({ result: true, isClose: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                error => {
                    errorNum++;
                    if (successNum + errorNum == tasks.length) {
                        load.close();
                        subject.next({ result: false, isClose: false });
                        this.showBatchSubmitInfo(successNum, 0, errorNum, 0);
                    }
                }));
            }));
        }
        return subject.asObservable();
    }
    /**
     * 批量提交提示信息
     * @private
     * @param {?} successNum 成功条数
     * @param {?} failedNum 需要交互的条数
     * @param {?} errorNum 执行报错的条数
     * @param {?} verifyTasksNum 需要数字签名的条数
     * @return {?}
     */
    showBatchSubmitInfo(successNum, failedNum, errorNum, verifyTasksNum) {
        /** @type {?} */
        let message = '';
        if (successNum && !failedNum && !errorNum && !verifyTasksNum) { // 批量全部成功
            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
        }
        else { // 非全部成功
            successNum && (message += this.i18nService.getValue('batchSubmit.success') + `【${successNum}】` + this.i18nService.getValue('batchSubmit.row'));
            errorNum && (message += this.i18nService.getValue('batchSubmit.error') + `【${errorNum}】` + this.i18nService.getValue('batchSubmit.row'));
            failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + `【${failedNum}】` + this.i18nService.getValue('batchSubmit.row'));
            verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + `【${verifyTasksNum}】` + this.i18nService.getValue('batchSubmit.row'));
            message += this.i18nService.getValue('batchSubmit.single');
            this.message.show('warning', message, { safeHtml: false });
        }
    }
    /**
     * @private
     * @param {?} events
     * @param {?} entities
     * @param {?} action
     * @param {?} handler
     * @param {?=} result
     * @return {?}
     */
    executeBatchEvent(events, entities, action, handler, result) {
        if (this.injector) {
            if (events && events.length > 0 && entities && entities.length > 0) {
                /** @type {?} */
                const event = events.shift();
                /** @type {?} */
                const url = event.eventImpl.split('#')[0];
                /** @type {?} */
                const func = event.eventImpl.split('#')[1];
                System.import(url + '?v=' + new Date().getTime().toString())
                    .then((/**
                 * @param {?} moduleFactories
                 * @return {?}
                 */
                (moduleFactories) => {
                    /** @type {?} */
                    const moduleFactory = Object.values(moduleFactories)[0];
                    /** @type {?} */
                    const moduleRef = moduleFactory.create(this.injector);
                    /** @type {?} */
                    const context = {
                        action,
                        taskList: entities,
                        origin: 'TaskCenter',
                        preEventResult: result
                    };
                    moduleRef.instance[func].apply(moduleRef.instance, [context]).subscribe((/**
                     * @param {?} re
                     * @return {?}
                     */
                    (re) => {
                        if (re && re.result) {
                            this.executeBatchEvent(events, entities, action, handler, re);
                        }
                        else {
                            handler(re);
                        }
                    }));
                }));
            }
            else {
                handler(result);
            }
        }
        else {
            handler(result);
        }
    }
    /**
     * @private
     * @return {?}
     */
    assignSimulate() {
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let simulateSubject = new SimulateSubject();
        this.ifAssignUser = true;
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        this.taskService.getAssigneeInfo(this.workItemId).subscribe((/**
         * @param {?} info
         * @return {?}
         */
        (info) => {
            this.assignInfos = [{
                    selectedAssignees: info.selectedAssignees,
                    assigneeInfo: info.assigneeInfo,
                    assignees: info.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: info.activityDefinitionName,
                    activityDefinitionId: info.activityDefinitionId,
                    dependency: info.dependency,
                    anonymous: info.anonymous,
                    anonymousText: info.anonymousText,
                    resolved: info.resolved,
                }];
            simulateSubject.dialogHeight = this.dialogHeight;
            simulateSubject.result = true;
            simulateSubject.showDialog = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            simulateSubject.result = false;
            simulateSubject.showDialog = false;
            subject.next(simulateSubject);
            this.taskService.error(error);
        }));
        return subject.asObservable();
    }
    /**
     * @private
     * @return {?}
     */
    transferSimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.i18nService.getValue('task.receiver'); //接收人员
        this.singleSelect = true;
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    }
    /**
     * @private
     * @return {?}
     */
    addSignFrontSimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    }
    /**
     * @private
     * @return {?}
     */
    addSignSimulate() {
        // 加签
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let simulateSubject = new SimulateSubject();
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase * 2;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getAdhocConfig(this.workItemId).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        (response) => {
            load.close();
            this.addSign.showSignToSign = response.showSignToSign;
            this.addSign.originMultiInstType = response.multiInstanceType;
            if (response.organization) {
                this.filter.orgId = response.organization.id;
                this.filter.withAllOrg = response.organization.includeChildren;
            }
            simulateSubject.dialogHeight = this.dialogHeight;
            simulateSubject.showDialog = true;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    }
    /**
     * @private
     * @return {?}
     */
    notifySimulate() {
        this.ifSelectUser = true;
        this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');
        this.dialogHeight += this.dialogHeightBase;
        this.singleSelect = false;
        this.enablePriority = true;
        if (this.task.priority) {
            this.dialogHeight += this.dialogHeightBase;
        }
        return this.getOrganizationScope();
    }
    //预解析组织、候选人范围
    /**
     * @private
     * @return {?}
     */
    getOrganizationScope() {
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let simulateSubject = new SimulateSubject();
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((/**
         * @param {?} orgList
         * @return {?}
         */
        (orgList) => {
            load.close();
            if (orgList.length) { // 全员会返回空数组
                this.filter.orgId = orgList[0].id;
                this.filter.withAllOrg = orgList[0].includeChildren;
            }
            simulateSubject.dialogHeight = this.dialogHeight;
            simulateSubject.showDialog = true;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    }
    /**
     * 催办模拟
     * @private
     * @return {?}
     */
    urgeHandleSimulate() {
        /** @type {?} */
        let subject = new Subject();
        /** @type {?} */
        let simulateSubject = new SimulateSubject();
        this.ifSelectNode = false;
        this.ifSelectUser = false;
        this.ifAssignUser = false;
        this.ifUrgeType = true;
        this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');
        this.showCommonComment = false;
        this.showAttachment = false;
        this.showUrgeMessageSubject = true;
        this.showSign = false;
        this.dialogHeight += this.dialogHeightBase * 2;
        /** @type {?} */
        const load = this.loadingService.show();
        /** @type {?} */
        let context = new UrgeHandleSimulateContext();
        context.procInstId = this.processInstanceId;
        this.taskService.urgeHandleSimulate(context).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            load.close();
            this.urgeHandleResponse = re;
            if (re && re.urgeUsers && re.urgeUsers.length) {
                this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;
                this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;
                this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;
                this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;
                this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;
                /** @type {?} */
                let urgeUsers = re.urgeUsers;
                /** @type {?} */
                let assignInfo = new AssigneeInfo();
                urgeUsers.forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                user => {
                    if (user.anonymousText) {
                        user.name = user.anonymousText;
                        user.code = '';
                        user.orgName = '';
                    }
                }));
                assignInfo.assigneeUsers = urgeUsers;
                assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;
                assignInfo.multiSelect = true;
                this.assignInfos[0].assigneeInfo = assignInfo;
                this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];
                simulateSubject.showDialog = true;
            }
            else {
                this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));
                simulateSubject.showDialog = false;
            }
            simulateSubject.dialogHeight = this.dialogHeight;
            simulateSubject.result = true;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            this.taskService.error(error);
            simulateSubject.showDialog = false;
            simulateSubject.result = false;
            subject.next(simulateSubject);
        }));
        return subject.asObservable();
    }
    /**
     * 预解析
     * 通过、驳回、重新提交、其他自定义动作
     * @private
     * @return {?}
     */
    completeSimulate() {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        let simulateSubject = new SimulateSubject();
        if (this.actionEntity.parameters && this.actionEntity.parameters.length) { // 是否允许加签
            this.actionEntity.parameters.forEach((/**
             * @param {?} p
             * @return {?}
             */
            (p) => {
                if (p.code === 'AddSignBehindAble' && p.value === 'true') {
                    this.ifSelectUser = true;
                    this.selectUserText = this.i18nService.getValue('task.addSign') + this.i18nService.getValue('task.person');
                    this.dialogHeight += this.dialogHeightBase;
                    /** @type {?} */
                    const load = this.loadingService.show();
                    //获取加签范围
                    this.taskService.getOrganizationScope(this.workItemId, 'AddSignBehind').subscribe((/**
                     * @param {?} orgList
                     * @return {?}
                     */
                    (orgList) => {
                        load.close();
                        if (orgList.length) { // 全员会返回空数组
                            this.filter.orgId = orgList[0].id;
                            this.filter.withAllOrg = orgList[0].includeChildren;
                        }
                    }), (/**
                     * @param {?} error
                     * @return {?}
                     */
                    error => {
                        load.close();
                        this.taskService.error(error);
                    }));
                }
            }));
        }
        //驳回节点标签名称
        if (this.actionEntity.code === 'Back') {
            this.selectNodeText = this.actionEntity.name + this.i18nService.getValue('task.backNodeText');
        }
        /** @type {?} */
        const context = new CompleteContext();
        context.workItemId = this.workItemId;
        context.conclusionValue = this.actionEntity.code;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.completeSimulate(context).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        (response) => {
            load.close();
            this.clearSimulateResult();
            this.response = response;
            if (this.task.priority) {
                this.enablePriority = true;
                this.dialogHeight += this.dialogHeightBase;
            }
            this.selectTargetAble = response.selectTargetAble;
            if (response.dynamicBackWardRuleConfig) {
                this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleConfig.dynamicBackWardRuleAble;
                this.showBackWardConfig.displayPlaceholder = response.dynamicBackWardRuleConfig.resubmitEffect;
            }
            if (!response.simulationPaths.length) { // 模拟返回路径为空时
                this.ifSelectNode = false;
                this.ifAssignUser = false;
            }
            else { // 模拟返回了路径
                this.ifSelectNode = true;
                this.ifAssignUser = true;
                this.dialogHeight += this.dialogHeightBase * 2;
                this.destNodes = response.simulationPaths && response.simulationPaths.map((/**
                 * @param {?} path
                 * @return {?}
                 */
                path => ({
                    id: path.nodeInfoList.map((/**
                     * @param {?} node
                     * @return {?}
                     */
                    node => node.activityDefinitionId)).join('，'),
                    name: path.nodeInfoList.map((/**
                     * @param {?} node
                     * @return {?}
                     */
                    node => node.activityDefinitionName)).join('，')
                })));
                // 处理默认分支，无默认分支返回-1
                /** @type {?} */
                let defaultIndex = response.simulationPaths.findIndex((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => a.default));
                //没有默认分支，且不允许选择目标节点时，取其中一个node展示（子流程参与者为空情况等）
                if (defaultIndex < 0 && !response.selectTargetAble) {
                    defaultIndex = response.simulationPaths.findIndex((/**
                     * @param {?} a
                     * @return {?}
                     */
                    a => a.nodeInfoList && a.nodeInfoList.length > 0));
                }
                if (defaultIndex > -1) {
                    this.selectedNodeId = this.destNodes[defaultIndex].id;
                    this.nodeDefaultValue = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;
                    this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);
                    if (response.simulationPaths[defaultIndex].id.startsWith('EndEvent')) { //下一环节为结束时，不显示办理人员，弹框高度缩小
                        this.dialogHeight = 340;
                    }
                }
            }
            //设置其他节点选人
            this.setOtherAssignInfo(response);
            this.dialogHeight = this.showBackWardConfig.dynamicBackWardRuleAble ? this.dialogHeight + this.dialogHeightBase : this.dialogHeight;
            simulateSubject.result = true;
            simulateSubject.showDialog = true;
            simulateSubject.dialogHeight = this.dialogHeight;
            subject.next(simulateSubject);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            simulateSubject.result = false;
            simulateSubject.showDialog = false;
            subject.next(simulateSubject);
            this.taskService.error(error);
        }));
        return subject.asObservable();
    }
    /**
     * 清空预解析结果
     * @private
     * @return {?}
     */
    clearSimulateResult() {
        this.assignInfos = [{
                // 重新预解析时清空
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
        this.destNodes = []; // 重新预解析时清空
        this.selectedNodeId = '';
    }
    /**
     * 设置当前指派信息帮助参数
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    setAssignInfo(nodeInfoList) {
        this.assignInfos = [];
        this.selectedNodeId.split('，').forEach((/**
         * @param {?} nodeId
         * @return {?}
         */
        nodeId => {
            /** @type {?} */
            const node = nodeInfoList.find((/**
             * @param {?} node
             * @return {?}
             */
            node => node.activityDefinitionId === nodeId));
            if (node) {
                this.assignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: node.activityDefinitionName,
                    activityDefinitionId: node.activityDefinitionId,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved,
                });
            }
            else {
                this.assignInfos.push({
                    selectedAssignees: [],
                    assigneeInfo: null,
                    assignees: [],
                    activityDefinitionName: '',
                    activityDefinitionId: '',
                    dependency: '',
                    anonymous: false,
                    anonymousText: '',
                    resolved: false,
                });
            }
        }));
    }
    /**
     * 设置其他节点指派
     * @private
     * @param {?} response
     * @return {?}
     */
    setOtherAssignInfo(response) {
        this.otherAssignInfos = [];
        /** @type {?} */
        let tmpOtherAssignInfos = [];
        /** @type {?} */
        let otherAssignNodes = response.otherAssignNodes;
        if (otherAssignNodes && otherAssignNodes.length) {
            otherAssignNodes.forEach((/**
             * @param {?} node
             * @return {?}
             */
            node => {
                tmpOtherAssignInfos.push({
                    selectedAssignees: node.selectedAssignees,
                    assigneeInfo: node.assigneeInfo,
                    assignees: node.selectedAssignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => { return { id: user.id, name: user.name }; })),
                    activityDefinitionName: node.activityDefinitionName,
                    activityDefinitionId: node.activityDefinitionId,
                    dependency: node.dependency,
                    anonymous: node.anonymous,
                    anonymousText: node.anonymousText,
                    resolved: node.resolved
                });
            }));
            //保存最初的其他节点选人
            this.originOtherAssignInfos = [...tmpOtherAssignInfos];
            //其他节点与下一节点去重
            if (this.assignInfos && this.assignInfos.length) {
                tmpOtherAssignInfos = tmpOtherAssignInfos.filter((/**
                 * @param {?} a
                 * @return {?}
                 */
                a => this.assignInfos.findIndex((/**
                 * @param {?} b
                 * @return {?}
                 */
                b => b.activityDefinitionId == a.activityDefinitionId)) < 0));
            }
            this.otherAssignInfos = tmpOtherAssignInfos;
        }
    }
    /**
     * 选完节点后，重新设置其他节点指派
     * @private
     * @param {?} nodeInfoList
     * @return {?}
     */
    setOtherAssignInfoAgain(nodeInfoList) {
        if (nodeInfoList && nodeInfoList.length) {
            this.otherAssignInfos = this.originOtherAssignInfos.filter((/**
             * @param {?} a
             * @return {?}
             */
            a => nodeInfoList.findIndex((/**
             * @param {?} b
             * @return {?}
             */
            b => b.activityDefinitionId == a.activityDefinitionId)) < 0));
        }
    }
    /**
     * 点击确定后方法
     * @private
     * @return {?}
     */
    assignSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) {
            this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                assigneeIds: this.assignInfos[0].assignees.map((/**
                 * @param {?} user
                 * @return {?}
                 */
                user => user.id)),
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.taskService.assignNextUsersByWorkItemId(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.i18nService.getValue('cueWords.operateSuccess'));
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    claimSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.claim(this.workItemId, this.comment).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    unClaimSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            this.taskService.unClaim(this.workItemId, this.comment).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success')),
                    this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    retrieveSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const retrieveContext = {
                workItemId: this.workItemId,
                comment: this.comment
            };
            this.taskService.retrieve(retrieveContext).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    transferSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                assignee: this.selectedUsers[0],
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.transfer(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    commentSubmit() {
        if (!this.comment || this.comment.length === 0) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum
            };
            this.taskService.comment(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.submitResult.isClose = false;
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
            this.comment = '';
        }
    }
    /**
     * @private
     * @return {?}
     */
    addSignFrontSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
                comment: this.comment,
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            this.submitDisable = true; // 禁用提交按钮
            this.taskService.addSign(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next(this.submitResult);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    addSignSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let payload = {
                workItemId: this.workItemId,
                comment: this.comment,
                conclusionValue: "Pass",
                signAssignees: this.selectedUsers,
                actionCode: "AddSignBehind",
                multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,
                counterSignRule: 'allPass',
                completedRule: 'all',
                allowSignToSign: this.addSign.allowSignToSIgn,
                activityName: '',
                addendum: this.addendum,
                priority: this.selectedPriority
            };
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.adhocAssignee(payload).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next({ result: true, isClose: true });
                load.close();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                load.close();
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    readSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                hideComment: this.hideComment
            };
            this.taskService.readTask(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next({ result: true, isClose: true });
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                this.taskService.error(error);
                this.subject.next({ result: false, isClose: false });
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    notifySubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.selectedUsers.length === 0) {
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            const context = {
                workItemId: this.workItemId,
                comment: this.comment,
                addendum: this.addendum,
                action: this.actionEntity.code,
                assignees: this.selectedUsers,
                priority: this.selectedPriority
            };
            this.taskService.addSign(context).subscribe((/**
             * @return {?}
             */
            () => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next({ result: true, isClose: false });
            }), (/**
             * @param {?} error
             * @return {?}
             */
            (error) => {
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * 催办提交
     * @private
     * @return {?}
     */
    urgeHandleSubmit() {
        if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) { //没有符合条件的催办用户
            this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.assignInfos[0].assignees.length) { //没有选人
            this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageSubject) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (!this.urgeHandleComponent.urgeMessageContent) {
            this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            /** @type {?} */
            let context = new UrgeHandleContext();
            context.procInstId = this.processInstanceId;
            context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter((/**
             * @param {?} a
             * @return {?}
             */
            a => this.assignInfos[0].assignees.some((/**
             * @param {?} b
             * @return {?}
             */
            b => b.id == a.id))));
            context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;
            context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;
            context.addReminder = this.addReminder;
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.urgeHandle(context).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                this.subject.next({ result: true, isClose: true });
                load.close();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                load.close();
                this.subject.next({ result: false, isClose: false });
                this.taskService.error(error);
            }));
        }
    }
    /**
     * 取消征询提交
     * @private
     * @return {?}
     */
    cancelConsultSubmit() {
        /** @type {?} */
        let context = new WorkItemExecuteParam();
        context.workItemId = this.workItemId;
        context.comment = this.comment;
        context.addendum = this.addendum;
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.cancelConsult(context).subscribe((/**
         * @return {?}
         */
        () => {
            load.close();
            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
            this.subject.next({ result: true, isClose: true });
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            this.subject.next({ result: false, isClose: false });
            this.taskService.error(error);
        }));
    }
    /**
     * @private
     * @return {?}
     */
    completeSubmit() {
        // 通过、驳回、其他第三方动作
        /** @type {?} */
        const context = {
            workItemId: this.workItemId,
            conclusionValue: this.actionEntity.code,
            comment: this.comment,
            signAssignees: this.selectedUsers,
            nextFlowNodes: [],
            otherAssignNodes: [],
            addendum: this.addendum,
            //动态驳回规则
            dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? this.showBackWardConfig.displayPlaceholder : '',
            priority: this.selectedPriority
        };
        if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) { // 加签 or 仿真返回为空，直接往下走
            this.completeTask(context);
        }
        else {
            if (this.selectedNodeId) { // 加签时，选择下一环节被禁用，destNodeId为undefined
                // 加签时，选择下一环节被禁用，destNodeId为undefined
                /** @type {?} */
                const nextFlowNodes = [];
                /** @type {?} */
                const nodes = this.selectedNodeId.split('，');
                for (let i = 0; i < nodes.length; i++) {
                    /** @type {?} */
                    const nextFlowNode = {
                        activityDefinitionId: nodes[i],
                        activityDefinitionName: this.assignInfos[i].activityDefinitionName,
                        dependency: this.assignInfos[i].dependency,
                        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],
                        assigneeInfo: null,
                        resolved: false,
                        anonymous: this.assignInfos[i].anonymous,
                        anonymousText: this.assignInfos[i].anonymousText
                    };
                    //节点找不到人，且异常提示时，并行网关暂不处理
                    if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {
                        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {
                            /** @type {?} */
                            const str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');
                            this.notify.warning(str);
                            this.subject.next({ result: false, isClose: false });
                            return;
                        }
                    }
                    nextFlowNodes.push(nextFlowNode);
                }
                context.nextFlowNodes = nextFlowNodes;
            }
            //其他节点指派信息
            if (this.otherAssignInfos && this.otherAssignInfos.length) {
                for (let i = 0; i < this.otherAssignInfos.length; i++) {
                    /** @type {?} */
                    let nextFlowNode = {
                        activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,
                        activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,
                        dependency: this.otherAssignInfos[i].dependency,
                        selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],
                        assigneeInfo: null,
                        resolved: false,
                        anonymous: false,
                        anonymousText: ''
                    };
                    context.otherAssignNodes.push(nextFlowNode);
                }
            }
            if (this.response.selectTargetAble && this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) { // 用户没选择跳转节点，不允许提交
                this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));
                this.subject.next({ result: false, isClose: false });
            }
            else if (this.assignInfos.filter((/**
             * @param {?} info
             * @return {?}
             */
            info => info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length)).length) {
                this.notify.warning(this.i18nService.getValue('task.selectProcessor'));
                this.subject.next({ result: false, isClose: false });
            }
            else {
                this.completeTask(context);
            }
        }
    }
    /**
     * @private
     * @param {?} completeContext
     * @return {?}
     */
    completeTask(completeContext) {
        /** @type {?} */
        const attachmentNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        entity => entity.code === 'AttachmentNecessary'));
        /** @type {?} */
        const certificationNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        entity => entity.code === 'CertificationNecessary'));
        /** @type {?} */
        const commentNecessary = this.actionEntity.parameters.find((/**
         * @param {?} entity
         * @return {?}
         */
        entity => entity.code === 'CommentNecessary'));
        if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {
            this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {
            this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));
            this.subject.next({ result: false, isClose: false });
        }
        else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {
            this.notify.warning(this.i18nService.getValue('task.commentTooLong'));
            this.subject.next({ result: false, isClose: false });
        }
        else {
            if (certificationNecessary && certificationNecessary.value === 'true') {
                this.verifySignature((/**
                 * @return {?}
                 */
                () => {
                    completeContext.verifySigned = this.verifySigned;
                    this.taskComplete(completeContext);
                }));
                /** @type {?} */
                const msg = [this.workItemId];
                gspCA.getSignedMsg(msg);
            }
            else {
                this.taskComplete(completeContext);
            }
        }
    }
    /**
     * @private
     * @param {?} handler
     * @return {?}
     */
    executeFormActionsAfterCompleteTask(handler) {
        // 如果表单注册了事件
        if (this.origin == ActionOrigin.TaskForm && this.ifRegistered && this.formObject) {
            /** @type {?} */
            const postActions = this.billMethodConfigs.filter((/**
             * @param {?} action
             * @return {?}
             */
            action => action.action === this.actionEntity.code && action.executionTime === 'Post')).sort((/**
             * @param {?} x
             * @param {?} y
             * @return {?}
             */
            (x, y) => x.sortOrder - y.sortOrder));
            if (postActions && postActions.length) {
                this.executePostFormActions(postActions, handler);
            }
        }
        else {
            handler();
        }
    }
    /**
     * @private
     * @param {?} formActions
     * @param {?} hander
     * @return {?}
     */
    executePostFormActions(formActions, hander) {
        if (formActions.length > 0) {
            this.messageSubject = new Subject();
            this.messageSubject.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                /** @type {?} */
                const data = re.data.data;
                if (data.result === true) {
                    this.executePostFormActions(formActions, hander);
                }
                else {
                    this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
                    throw new Error('审批后表单操作执行失败！');
                }
            }));
            // 执行表单动作
            /** @type {?} */
            const formAction = formActions.shift();
            this.sendMessage(this.workItemId, formAction);
        }
        else {
            hander();
        }
    }
    //帮助选人后
    /**
     * @param {?} data
     * @return {?}
     */
    afterConfirmForTransfer(data) {
        if (data && data.length) {
            this.selectedUsers = data.map((/**
             * @param {?} user
             * @return {?}
             */
            user => user.id));
            this.selectedUserNgModule = data.map((/**
             * @param {?} user
             * @return {?}
             */
            user => user.name)).join();
        }
        else {
            this.selectedUsers = [];
        }
        if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {
            this.addSign.showMultiInstanceType = true;
        }
        else {
            this.addSign.showMultiInstanceType = false;
        }
    }
    /**
     * @return {?}
     */
    cancel() {
        this.submitResult.isClose = false;
        this.subject.next(this.submitResult);
        return this.subject.asObservable();
    }
    /**
     * @return {?}
     */
    getSubject() {
        return this.subject.asObservable();
    }
    // 下一环节选择后事件
    /**
     * @param {?} data
     * @return {?}
     */
    selectNodeChange(data) {
        this.selectedNodeId = data && data.data && data.data.id;
        if (this.response.simulationPaths[data.index].nodeInfoList.every((/**
         * @param {?} node
         * @return {?}
         */
        node => node.resolved === true))) { // 已预解析参与者
            this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);
            this.setOtherAssignInfoAgain(this.response.simulationPaths[data.index].nodeInfoList);
        }
        else {
            /** @type {?} */
            const nodeIds = this.selectedNodeId.split('，').map((/**
             * @param {?} node
             * @return {?}
             */
            node => `"${node}"`)).join();
            // 注意一个中文逗号一个英文逗号
            /** @type {?} */
            const load = this.loadingService.show();
            this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((/**
             * @param {?} nodeInfoList
             * @return {?}
             */
            (nodeInfoList) => {
                load.close();
                this.setAssignInfo(nodeInfoList);
                this.setOtherAssignInfoAgain(nodeInfoList);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                load.close();
                this.taskService.error(error);
            }));
        }
    }
    // 下一环节清空后事件
    /**
     * @return {?}
     */
    selectNodeClear() {
        this.selectedNodeId = null;
        this.assignInfos = [{
                selectedAssignees: [],
                assigneeInfo: null,
                assignees: [],
                activityDefinitionName: '',
                activityDefinitionId: '',
                dependency: '',
                anonymous: false,
                anonymousText: '',
                resolved: false,
            }];
    }
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    afterConfirmForAssign(data, index) {
        this.assignInfos[index].assignees = data;
    }
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    afterConfirmForOtherAssign(data, index) {
        this.otherAssignInfos[index].assignees = data;
    }
    /**
     * 上传附件后事件
     * @param {?} data
     * @return {?}
     */
    addAttachment(data) {
        this.addendum.attachment = JSON.stringify(data);
    }
    /**
     * 手写签名后事件
     * @param {?} data
     * @return {?}
     */
    addSignature(data) {
        if (data) {
            /** @type {?} */
            const signInfo = {
                id: data,
                waterMarking: null
            };
            this.addendum.signature = JSON.stringify(signInfo);
        }
        else {
            this.addendum.signature = '';
        }
    }
    // 以服务方式打开组件时，左右加上padding
    /**
     * @return {?}
     */
    addPadding() {
        this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';
    }
    /**
     * @private
     * @param {?} workItemId
     * @param {?} action
     * @return {?}
     */
    sendMessage(workItemId, action) {
        if (this.iframe) {
            /** @type {?} */
            const iframeWindow = this.iframe.nativeElement.contentWindow;
            /** @type {?} */
            const message = {
                target: workItemId,
                data: {
                    command: action.method,
                    arguments: action.methodParameters
                }
            };
            iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);
        }
        else {
            this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭
            this.notify.warning('请等待表单加载完成后再试');
        }
    }
    // 提交审批前的数字签名及验签
    /**
     * @param {?} handler
     * @return {?}
     */
    verifySignature(handler) {
        /** @type {?} */
        const that = this;
        if (((/** @type {?} */ (window))).gspframeworkService &&
            ((/** @type {?} */ (window))).gspframeworkService.rtf) {
            ((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.on(((/** @type {?} */ (window))).gspframeworkService.rtf.caEvent.signedMsgOverToken(), 'signedMsgOver', (/**
             * @param {?} signedData
             * @return {?}
             */
            function signMsgOver(signedData) {
                if (signedData && signedData[0] === 'true' && signedData.length > 0) {
                    // 证书对象
                    /** @type {?} */
                    const cert = gspCA.getCurCert();
                    // 验签参数
                    that.verifySigned = {
                        // 要验证的证书base64编码的字符流(certkey)
                        certBase64Info: gspCA.getCertBase64(cert),
                        // 签名原信息
                        msg: [that.workItemId],
                        // 要签名后信息
                        signedmsg: signedData[1][0],
                        // 用户使用场景，目前未使用，可以为空
                        useCase: null,
                    };
                    handler();
                }
                else {
                    that.loadingService.close();
                    that.subject.next({ result: false, isClose: false });
                    that.notify.error(signedData[1]);
                    throw new Error(signedData[1]);
                }
            }));
        }
    }
    // 通过、驳回、其他第三方动作
    /**
     * @param {?} completeContext
     * @return {?}
     */
    taskComplete(completeContext) {
        this.taskService.complete(completeContext).subscribe((/**
         * @param {?} cr
         * @return {?}
         */
        (cr) => {
            this.executeFormActionsAfterCompleteTask((/**
             * @return {?}
             */
            () => {
                if (cr.needInteraction) { // 通过后指派场景
                    if (this.origin == ActionOrigin.TaskCenter) {
                        this.subject.next({ result: true, isClose: false });
                    }
                    else {
                        this.subject.next({ result: false, isClose: false }); //关掉loading
                    }
                    this.notify.info(this.i18nService.getValue('cueWords.select')
                        + '【' + cr.nextFlowNodes[0].activityDefinitionName + '】'
                        + this.i18nService.getValue('cueWords.processor'));
                    /** @type {?} */
                    let task = new TaskEntity();
                    /** @type {?} */
                    let action = new TaskAction();
                    task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;
                    action.code = 'AssignUser';
                    action.name = this.i18nService.getValue('cueWords.assignUser');
                    this.handlerService.execute(task, action).subscribe((/**
                     * @param {?} re
                     * @return {?}
                     */
                    re => {
                        if (re) {
                            this.subject.next({ result: true, isClose: true });
                        }
                    }));
                }
                else {
                    if (completeContext.conclusionValue === 'Pass') {
                        this.notify.success(this.i18nService.getValue('cueWords.successPass'));
                    }
                    else if (completeContext.conclusionValue === 'Back') {
                        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                    }
                    else {
                        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));
                    }
                    this.subject.next({ result: true, isClose: true });
                }
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            this.subject.next({ result: false, isClose: false });
            this.taskService.error(error);
        }));
    }
}
/**
 * 消息监听处理方法
 */
TaskExecuteComponent.func = null;
TaskExecuteComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-task-execute',
                template: "<!-- \u6279\u91CF\u5BA1\u6279\u65F6\u63D0\u793A -->\r\n<div *ngIf=\"taskList?.length > 20\" class=\"wf-task-batch-message\">\r\n  <span class=\"f-icon f-icon-info\"></span>\r\n  <span class=\"wf-task-batch-selected\">{{\r\n    \"batchSubmit.selected\" | translate\r\n  }}</span>\r\n  <span class=\"wf-task-batch-rows\">{{ taskList.length }}</span>\r\n  <span>{{ \"batchSubmit.item\" | translate }}</span>\r\n  <span>{{ \"batchSubmit.time\" | translate }}</span>\r\n  <span class=\"wf-task-batch-time\">{{ batchSecond }}</span>\r\n  <span>{{ \"batchSubmit.second\" | translate }}</span>\r\n</div>\r\n\r\n<!-- \u610F\u89C1\u8F93\u5165 -->\r\n<wf-comment\r\n  *ngIf=\"!showUrgeMessageSubject\"\r\n  class=\"w-100\"\r\n  name=\"comment\"\r\n  [(ngModel)]=\"comment\"\r\n  [defaultComment]=\"defaultComment\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [processInstanceId]=\"processInstanceId\"\r\n  [showAttachment]=\"showAttachment\"\r\n  [showCommonComment]=\"showCommonComment\"\r\n  [showSign]=\"showSign\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n  [TaskCenterConfig]=\"configList\"\r\n  [curUserId]=\"\r\n    task ? task.owner : taskList && taskList.length ? taskList[0].owner : ''\r\n  \"\r\n  [taskOrigin]=\"origin\"\r\n  (attachment)=\"addAttachment($event)\"\r\n  (signature)=\"addSignature($event)\"\r\n>\r\n</wf-comment>\r\n\r\n<!--\u50AC\u529E\u6D88\u606F-->\r\n<urge-handle\r\n  *ngIf=\"showUrgeMessageSubject\"\r\n  [placeholder]=\"commentPlaceHolder\"\r\n  [showMessageSubject]=\"showUrgeMessageSubject\"\r\n  [urgeMessageSubject]=\"urgeMessageSubject\"\r\n  [urgeMessageContent]=\"urgeMessageContent\"\r\n  [subjectEditable]=\"subjectEditable\"\r\n  [contentEditable]=\"contentEditable\"\r\n  [textAreaHeight]=\"textAreaHeight\"\r\n>\r\n</urge-handle>\r\n\r\n<!-- \u5BA1\u6279\u8BB0\u5F55\u9690\u85CF\uFF08\u4EC5\u5BF9\u81EA\u5DF1\u53EF\u89C1\uFF09 -->\r\n<div\r\n  *ngIf=\"ifShowCommentToMySelf\"\r\n  class=\"custom-control custom-checkbox custom-control-inline\"\r\n  style=\"margin-bottom: 10px\"\r\n>\r\n  <input\r\n    type=\"checkbox\"\r\n    class=\"custom-control-input\"\r\n    [(ngModel)]=\"hideComment\"\r\n    id=\"taskcenterhidecomment\"\r\n    name=\"taskcenterhidecomment\"\r\n  />\r\n  <label class=\"custom-control-label\" for=\"taskcenterhidecomment\">{{\r\n    \"static.hideComment\" | translate\r\n  }}</label>\r\n</div>\r\n\r\n<!-- \u4E0B\u4E00\u73AF\u8282 -->\r\n<div *ngIf=\"ifSelectNode\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">{{ selectNodeText }}</div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-combo-list\r\n      style=\"flex: 1\"\r\n      [(ngModel)]=\"nodeDefaultValue\"\r\n      [data]=\"destNodes\"\r\n      [editable]=\"false\"\r\n      [textField]=\"'name'\"\r\n      [valueField]=\"'id'\"\r\n      [idField]=\"'id'\"\r\n      [readonly]=\"selectTargetAble && destNodes.length > 1 ? false : true\"\r\n      (selectChange)=\"selectNodeChange($event)\"\r\n      (clear)=\"selectNodeClear()\"\r\n      [placeholder]=\"'task.selectPlaceholder' | translate\"\r\n    >\r\n    </farris-combo-list>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u4E0B\u4E00\u73AF\u8282\u529E\u7406\u4EBA\u5458\uFF08\u6307\u6D3E\uFF09 -->\r\n<div *ngIf=\"ifAssignUser || ifUrgeType\">\r\n  <lib-assignee-info\r\n    *ngFor=\"let assignInfo of assignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"\r\n      assignInfos.length > 1\r\n        ? assignInfo.activityDefinitionName\r\n        : ifUrgeType\r\n        ? ('task.urgeText' | translate)\r\n        : ''\r\n    \"\r\n    [ifShowBlank]=\"false\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirmForAssign($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n<!-- \u79FB\u4EA4\u3001\u52A0\u7B7E\u3001\u5F81\u8BE2\u3001\u77E5\u4F1A \u4EBA\u5458\u5E2E\u52A9-->\r\n<lib-assignee-info\r\n  *ngIf=\"ifSelectUser\"\r\n  [activityName]=\"selectUserText\"\r\n  [singleSelect]=\"singleSelect\"\r\n  [filter]=\"filter\"\r\n  [disabled]=\"false\"\r\n  [placeholder]=\"'task.selectPlaceholder' | translate\"\r\n  [allowGlobalAssign]=\"true\"\r\n  [wfContext]=\"wfContext\"\r\n  (afterConfirm)=\"afterConfirmForTransfer($event)\"\r\n>\r\n</lib-assignee-info>\r\n\r\n<!-- \u52A0\u7B7E -->\r\n<!-- \u5BA1\u6279\u7B56\u7565 -->\r\n<div *ngIf=\"addSign.showMultiInstanceType\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.multiInstanceType\" | translate }}\r\n  </div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-radiogroup\r\n      [(ngModel)]=\"addSign.curMultiInstType\"\r\n      [data]=\"addSign.multiInstanceType\"\r\n      [horizontal]=\"true\"\r\n    >\r\n    </farris-radiogroup>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5141\u8BB8\u518D\u52A0\u7B7E -->\r\n<div *ngIf=\"addSign.showSignToSign\" class=\"wf-task-handler-help-div\">\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"addSign.allowSignToSign\" | translate }}{{ actionEntity.name }}\r\n  </div>\r\n  <farris-switch [(ngModel)]=\"addSign.allowSignToSIgn\" [size]=\"'small'\">\r\n  </farris-switch>\r\n</div>\r\n\r\n<!-- \u9A73\u56DE\u540E\u518D\u6B21\u63D0\u4EA4\u65F6\u76F4\u63A5\u56DE\u5230\u672C\u8282\u70B9 -->\r\n<div\r\n  *ngIf=\"showBackWardConfig.dynamicBackWardRuleAble\"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\">{{ showBackWardConfig.title }}</div>\r\n  <div class=\"d-flex\" style=\"flex: 1\">\r\n    <farris-combo-list\r\n      style=\"flex: 1\"\r\n      [(ngModel)]=\"showBackWardConfig.displayPlaceholder\"\r\n      [data]=\"showBackWardConfig.backWardRules\"\r\n      [editable]=\"false\"\r\n      [textField]=\"'name'\"\r\n      [valueField]=\"'value'\"\r\n      [idField]=\"'value'\"\r\n      [readonly]=\"false\"\r\n      [enableClear]=\"false\"\r\n      [placeholder]=\"showBackWardConfig.displayPlaceholder\"\r\n    >\r\n    </farris-combo-list>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u7D27\u6025\u7A0B\u5EA6\uFF0C\u4E0B\u4E00\u73AF\u8282\u4E3A\u7ED3\u675F\u65F6\u4E0D\u5C55\u793A -->\r\n<div\r\n  *ngIf=\"\r\n    task?.priority &&\r\n    enablePriority &&\r\n    task.priorityItemList &&\r\n    !selectedNodeId?.startsWith('EndEvent')\r\n  \"\r\n  class=\"wf-task-handler-help-div\"\r\n>\r\n  <div class=\"wf-task-handler-help-text\">\r\n    {{ \"task.priority\" | translate }}\r\n  </div>\r\n  <farris-radiogroup\r\n    [(ngModel)]=\"selectedPriority\"\r\n    [data]=\"task.priorityItemList\"\r\n    [horizontal]=\"true\"\r\n  >\r\n  </farris-radiogroup>\r\n</div>\r\n\r\n<!-- \u5176\u4ED6\u8282\u70B9\u529E\u7406\u4EBA\u5458\uFF08\u6307\u6D3E\uFF09 -->\r\n<div *ngIf=\"otherAssignInfos?.length\">\r\n  <div class=\"wf-task-splitter\">\r\n    {{ \"startProcess.otherNodesAssign\" | translate\r\n    }}<span class=\"wf-task-splitter-line\"></span>\r\n  </div>\r\n  <lib-assignee-info\r\n    *ngFor=\"let assignInfo of otherAssignInfos; let i = index\"\r\n    [assigneeInfo]=\"assignInfo.assigneeInfo\"\r\n    [setAnonymous]=\"assignInfo.anonymous\"\r\n    [setAnonymousText]=\"assignInfo.anonymousText\"\r\n    [selectedAssignees]=\"assignInfo.selectedAssignees\"\r\n    [activityName]=\"assignInfo.activityDefinitionName\"\r\n    [ifShowBlank]=\"true\"\r\n    [wfContext]=\"wfContext\"\r\n    (afterConfirm)=\"afterConfirmForOtherAssign($event, i)\"\r\n  ></lib-assignee-info>\r\n</div>\r\n\r\n<!-- \u6309\u94AE -->\r\n<ng-template #taskExecuteButtons>\r\n  <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">\r\n    {{ \"static.footCancel\" | translate }}\r\n  </button>\r\n  <button\r\n    type=\"button\"\r\n    class=\"btn btn-primary\"\r\n    (click)=\"submit()\"\r\n    [disabled]=\"submitDisable\"\r\n  >\r\n    {{ \"static.footOk\" | translate }}\r\n  </button>\r\n</ng-template>\r\n",
                styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:14px}.wf-task-handler-help-div-submit{margin-bottom:14px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wf-task-batch-selected{padding-left:8px}.wf-task-batch-rows{font-size:13px;font-weight:500;padding:0 4px;color:#2a87ff}.wf-task-batch-time{font-size:13px;font-weight:500;padding:0 4px;color:#424347}.wf-task-batch-message{display:flex;background:#edf9ff;border:1px solid rgba(196,235,255,1);border-radius:8px;margin-bottom:6px;align-items:center;font-size:12px;padding:4px 10px}.wf-submit-section{padding:4px 24px 0}.wf-submit-item{display:flex;align-items:baseline}.wf-submit-item-label{padding-right:10px;width:88px;text-align:right}.wf-task-splitter{display:flex;align-items:center;color:rgba(0,0,0,.4);font-size:12px;margin-bottom:10px}.wf-task-splitter-line{border-bottom:1px dashed rgba(0,0,0,.1);flex-grow:1}"]
            }] }
];
/** @nocollapse */
TaskExecuteComponent.ctorParameters = () => [
    { type: TaskService },
    { type: NotifyService },
    { type: I18nService },
    { type: WfTaskHandlerService },
    { type: LoadingService },
    { type: MessagerService },
    { type: Injector }
];
TaskExecuteComponent.propDecorators = {
    buttons: [{ type: ViewChild, args: ['taskExecuteButtons',] }],
    sysUserHelp: [{ type: ViewChild, args: [SysFarrisLookupComponent,] }],
    urgeHandleComponent: [{ type: ViewChild, args: [UrgeHandleComponent,] }],
    cls: [{ type: HostBinding, args: ['class',] }]
};
if (false) {
    /**
     * 消息监听处理方法
     * @type {?}
     * @private
     */
    TaskExecuteComponent.func;
    /** @type {?} */
    TaskExecuteComponent.prototype.task;
    /** @type {?} */
    TaskExecuteComponent.prototype.workItemId;
    /** @type {?} */
    TaskExecuteComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskExecuteComponent.prototype.actionEntity;
    /** @type {?} */
    TaskExecuteComponent.prototype.comment;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.MAX_COMMENT_LENGTH;
    /** @type {?} */
    TaskExecuteComponent.prototype.defaultComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfCacheComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.currentDefaultValue;
    /** @type {?} */
    TaskExecuteComponent.prototype.taskList;
    /** @type {?} */
    TaskExecuteComponent.prototype.batchSecond;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectNode;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifSelectUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifAssignUser;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifUrgeType;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifShowCommentToMySelf;
    /** @type {?} */
    TaskExecuteComponent.prototype.singleSelect;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectTargetAble;
    /** @type {?} */
    TaskExecuteComponent.prototype.hideComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.filter;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUsers;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedUserNgModule;
    /** @type {?} */
    TaskExecuteComponent.prototype.buttons;
    /** @type {?} */
    TaskExecuteComponent.prototype.sysUserHelp;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleComponent;
    /** @type {?} */
    TaskExecuteComponent.prototype.subject;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitResult;
    /** @type {?} */
    TaskExecuteComponent.prototype.bindingData;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectNodeText;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectUserText;
    /** @type {?} */
    TaskExecuteComponent.prototype.commentPlaceHolder;
    /** @type {?} */
    TaskExecuteComponent.prototype.showAttachment;
    /** @type {?} */
    TaskExecuteComponent.prototype.showSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskExecuteComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.billMethodConfigs;
    /** @type {?} */
    TaskExecuteComponent.prototype.nodeDefaultValue;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedNodeId;
    /** @type {?} */
    TaskExecuteComponent.prototype.destNodes;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeight;
    /** @type {?} */
    TaskExecuteComponent.prototype.dialogHeightBase;
    /** @type {?} */
    TaskExecuteComponent.prototype.addendum;
    /** @type {?} */
    TaskExecuteComponent.prototype.groupIcon;
    /** @type {?} */
    TaskExecuteComponent.prototype.assignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.otherAssignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.originOtherAssignInfos;
    /** @type {?} */
    TaskExecuteComponent.prototype.response;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeHandleResponse;
    /** @type {?} */
    TaskExecuteComponent.prototype.formObject;
    /** @type {?} */
    TaskExecuteComponent.prototype.ifRegistered;
    /** @type {?} */
    TaskExecuteComponent.prototype.configList;
    /** @type {?} */
    TaskExecuteComponent.prototype.verifySigned;
    /** @type {?} */
    TaskExecuteComponent.prototype.submitDisable;
    /** @type {?} */
    TaskExecuteComponent.prototype.addSign;
    /** @type {?} */
    TaskExecuteComponent.prototype.showBackWardConfig;
    /**
     * 任务催办时使用
     * @type {?}
     */
    TaskExecuteComponent.prototype.showUrgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageSubject;
    /** @type {?} */
    TaskExecuteComponent.prototype.urgeMessageContent;
    /** @type {?} */
    TaskExecuteComponent.prototype.addReminder;
    /** @type {?} */
    TaskExecuteComponent.prototype.subjectEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.contentEditable;
    /** @type {?} */
    TaskExecuteComponent.prototype.wfContext;
    /** @type {?} */
    TaskExecuteComponent.prototype.enablePriority;
    /** @type {?} */
    TaskExecuteComponent.prototype.cls;
    /** @type {?} */
    TaskExecuteComponent.prototype.POST_MESSAGE_TARGET;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.messageSubject;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.language;
    /** @type {?} */
    TaskExecuteComponent.prototype.actionToken;
    /** @type {?} */
    TaskExecuteComponent.prototype.simulateToken;
    /** @type {?} */
    TaskExecuteComponent.prototype.selectedPriority;
    /**
     * 监听事件处理
     * @type {?}
     */
    TaskExecuteComponent.prototype.eventHandler;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.handlerService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    TaskExecuteComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1leGVjdXRlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1leGVjdXRlL3Rhc2stZXhlY3V0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBRVQsU0FBUyxFQUNULFdBQVcsRUFDWCxXQUFXLEVBQ1gsUUFBUSxHQUdULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3hGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlELE9BQU8sRUFBcUMsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDakcsT0FBTyxFQUFjLGVBQWUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDNUQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQWdCLHVCQUF1QixFQUFrRCxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM1SSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFHcEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBSXRELE9BQU8sRUFBRSxVQUFVLEVBQW9C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QUVELGtEQWdCQzs7Ozs7SUFLRCxzREFBd0M7O0lBQ3hDLGtEQUEyQjs7SUFDM0Isa0RBQTJCOztJQUMzQiwyQ0FBcUI7O0lBQ3JCLCtDQUF5Qjs7SUFDekIsK0NBQXlCOztJQUV6Qix5Q0FBNEI7O0lBQzVCLDhDQUFnQzs7SUFFaEMsbUNBQStCOztJQUUvQixtREFBc0Q7Ozs7O0lBQ3RELDhDQUF1Qjs7Ozs7SUFDdkIsd0NBQW9FOztJQUVwRSwyQ0FBb0I7O0lBQ3BCLDZDQUFzQjs7SUFDdEIsZ0RBQXlCOzs7OztJQThGekIsNENBRUM7Ozs7O0lBN0ZDLDJDQUFnQzs7Ozs7SUFDaEMsc0NBQTZCOzs7OztJQUM3QiwyQ0FBZ0M7Ozs7O0lBQ2hDLDhDQUE0Qzs7Ozs7SUFDNUMsOENBQXNDOzs7OztJQUN0Qyx1Q0FBZ0M7Ozs7O0lBQ2hDLHdDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIE9uSW5pdCxcclxuICBWaWV3Q2hpbGQsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgSG9zdEJpbmRpbmcsXHJcbiAgSW5qZWN0b3IsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBPbkRlc3Ryb3ksXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFkZGVuZHVtLCBWZXJpZnlTaWduZWQsIENvbXBsZXRlQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS9jb21wbGV0ZS1jb250ZXh0JztcclxuaW1wb3J0IHsgVGFza1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL3Rhc2suc2VydmljZSc7XHJcbmltcG9ydCB7IFN5c0ZhcnJpc0xvb2t1cENvbXBvbmVudCB9IGZyb20gJ0Bnc3Atc3lzL3N5c21nci11aSc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IEkxOG5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9pMThuL2kxOG4uc2VydmljZSc7XHJcbmltcG9ydCB7IENvbXBsZXRlUmVzcG9uc2UsIEFzc2lnblBhcmFtZXRlciwgQXNzaWduZWVJbmZvIH0gZnJvbSAnLi4vLi4vZW50aXR5L2NvbXBsZXRlLXJlc3BvbnNlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFRhc2tBY3Rpb24gfSBmcm9tICcuLi8uLi9lbnRpdHkvdGFzay1hY3Rpb24nO1xyXG5pbXBvcnQgeyBXZlRhc2tIYW5kbGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3dmLXRhc2staGFuZGxlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVGFza0VudGl0eSB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWVudGl0eSc7XHJcbmltcG9ydCB7IFN1Ym1pdFJlc3VsdCwgQWN0aW9uQmFzZUltcGxDb21wb25lbnQsIEFjdGlvbkV2ZW50LCBUYXNrRXZlbnRSZXN1bHQsIFRhc2tFdmVudENvbnRleHQsIEFjdGlvbk9yaWdpbiB9IGZyb20gJ0Bnc3Atd2YvdGFzay1pbXBsLWFwaSc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uU2NvcGUgfSBmcm9tICcuLi8uLi9lbnRpdHkvb3JnYW5pemF0aW9uLXNjb3BlJztcclxuaW1wb3J0IHsgRmxvd05vZGVJbmZvLCBBc3NpZ25lZSB9IGZyb20gJy4uLy4uL2VudGl0eS9zdGFydC1wcm9jZXNzLXBheWxvYWQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgQXNzaWduSW5mb0hlbHBFbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdHkvYXNzaWduSW5mb0hlbHAnO1xyXG5pbXBvcnQgeyBTaW11bGF0ZVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vZW50aXR5L3NpbXVsYXRlLXJlc3BvbnNlJztcclxuaW1wb3J0IHsgQmlsbE1ldGhvZENvbmZpZywgRm9ybUV2ZW50TWVzc2FnZSB9IGZyb20gJy4uLy4uL2VudGl0eS9mb3JtQWN0aW9uJztcclxuaW1wb3J0IHsgQ29uZmlnQ29kZSwgVGFza0NlbnRlckNvbmZpZyB9IGZyb20gJy4uLy4uL2VudGl0eS90YXNrLWNlbnRlci1jb25maWcnO1xyXG5pbXBvcnQgeyBDb3VudGVyU2lnblBhcmFtLCBXb3JrSXRlbUV4ZWN1dGVQYXJhbSB9IGZyb20gJy4uLy4uL2VudGl0eS93b3JraXRlbS1leGVjdXRlLXBhcmFtJztcclxuaW1wb3J0IHsgVXJnZUhhbmRsZUNvbnRleHQsIFVyZ2VIYW5kbGVSZXNwb25zZSwgVXJnZUhhbmRsZVNpbXVsYXRlQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS91cmdlLWhhbmRsZSc7XHJcbmltcG9ydCB7IEJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS9iYXRjaFZlcmlmeXNpZ25lZCc7XHJcbmltcG9ydCB7IFdmQ29udGV4dCB9IGZyb20gJy4uLy4uL2VudGl0eS93ZkNvbnRleHQnO1xyXG5pbXBvcnQgeyBVcmdlSGFuZGxlQ29tcG9uZW50IH0gZnJvbSBcIi4uL3VyZ2UtaGFuZGxlL3VyZ2UtaGFuZGxlLmNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBBZGRTaWduUGF5bG9hZCwgQWRkU2lnblNpbXVsYXRlUmVzcG9uc2UsIE11bHRpSW5zdGFuY2VUeXBlIH0gZnJvbSAnLi4vLi4vZW50aXR5L2FkZC1zaWduJztcclxuaW1wb3J0IHsgU2ltdWxhdGVTdWJqZWN0IH0gZnJvbSAnLi4vLi4vZW50aXR5L3NpbXVsYWl0ZS1zdWJqZWN0JztcclxuXHJcbmRlY2xhcmUgdmFyIFN5c3RlbTogYW55O1xyXG5kZWNsYXJlIGNvbnN0IGdzcENBOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi10YXNrLWV4ZWN1dGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90YXNrLWV4ZWN1dGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3Rhc2stZXhlY3V0ZS5jb21wb25lbnQuY3NzJ10sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYXNrRXhlY3V0ZUNvbXBvbmVudCBleHRlbmRzIEFjdGlvbkJhc2VJbXBsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAvKipcclxuICAgKiDmtojmga/nm5HlkKzlpITnkIbmlrnms5VcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBmdW5jID0gbnVsbDtcclxuICB0YXNrOiBUYXNrRW50aXR5Oy8v5b2T5YmN5Lu75YqhXHJcbiAgd29ya0l0ZW1JZDogc3RyaW5nOyAvLyDlt6XkvZzpoblJRFxyXG4gIHByb2Nlc3NJbnN0YW5jZUlkOiBzdHJpbmc7IC8vIOa1geeoi+WunuS+i0lEXHJcbiAgYWN0aW9uRW50aXR5ID0gbmV3IFRhc2tBY3Rpb24oKTsgLy8g5Yqo5L2c5a6e5L2TXHJcbiAgY29tbWVudCA9ICcnOyAvLyDlrqHmibnmhI/op4FcclxuICBwcml2YXRlIE1BWF9DT01NRU5UX0xFTkdUSCA9IDQwMDA7Ly/lrqHmibnmhI/op4HmnIDlpKfplb/luqZcclxuICBkZWZhdWx0Q29tbWVudDogc3RyaW5nOy8v6buY6K6k5a6h5om55oSP6KeBXHJcbiAgd2ZDYWNoZUNvbW1lbnQ6IHN0cmluZzsvL+e8k+WtmOeahOaEj+ingVxyXG4gIGN1cnJlbnREZWZhdWx0VmFsdWU6IHN0cmluZzsvL+W9k+WJjeWKqOS9nOeahOm7mOiupOaEj+ingVxyXG4gIHRhc2tMaXN0OiBUYXNrRW50aXR5W10gPSBbXTsvL+aJuemHj+WuoeaJueaOpeaUtuWIsOeahOS7u+WKoWxpc3RcclxuICBiYXRjaFNlY29uZDogbnVtYmVyID0gMDsvL+aJuemHj+aTjeS9nOeahOaXtumXtFxyXG5cclxuICBpZlNlbGVjdE5vZGUgPSBmYWxzZTsgLy8g5piv5ZCm5pi+56S66YCJ5oup5LiL5LiA546v6IqCXHJcbiAgaWZTZWxlY3RVc2VyID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuS4i+S4gOeOr+iKguWkhOeQhuS6ulxyXG4gIGlmQXNzaWduVXNlciA9IGZhbHNlOyAvLyDmmK/lkKbmmL7npLrlip7nkIbkurrlkZjmoYZcclxuICBpZlVyZ2VUeXBlID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuaOpeaUtuS6uuahhu+8iOWCrOWKnua2iOaBr+aOpeaUtuS6uu+8iVxyXG4gIGlmU2hvd0NvbW1lbnRUb015U2VsZiA9IGZhbHNlOy8vIOaYr+WQpuaYvuekuuWuoeaJueiusOW9leS7heiHquW3seWPr+ingVxyXG5cclxuICBzaW5nbGVTZWxlY3QgPSBmYWxzZTsgLy8g55So5oi35biu5Yqp5piv5ZCm5Y2V6YCJ77yM6buY6K6k5aSa6YCJXHJcbiAgc2VsZWN0VGFyZ2V0QWJsZSA9IGZhbHNlOyAvLyDmmK/lkKblhYHorrjpgInmi6nkuIvkuIDnjq/oioJcclxuICBoaWRlQ29tbWVudCA9IGZhbHNlOy8v5a6h5om56K6w5b2V5LuF6Ieq5bex5Y+v6KeBXHJcblxyXG4gIGZpbHRlciA9IHsgbm90R2V0Q3VycmVudFVzZXI6IHRydWUsIG5vdEdldFN0b3BVc2VyOiB0cnVlLCBvcmRlckZpZWxkOiAnb3JkZXInLCB3aXRoQWxsT3JnOiB0cnVlLCBvcmdJZDogJycgfTsgLy8g57O757uf55So5oi35biu5Yqp5piv5ZCm6L+H5ruk5b2T5YmN5Lq6XHJcbiAgc2VsZWN0ZWRVc2Vyczogc3RyaW5nW10gPSBbXTsgLy8g55So5oi35biu5Yqp6YCJ5oup5ZCO55qESWTmlbDnu4RcclxuXHJcbiAgc2VsZWN0ZWRVc2VyTmdNb2R1bGU6IHN0cmluZzsgLy8g6YCJ5oup5aSE55CG5Lq655qEcGxhY2Vob2xkZXJcclxuXHJcbiAgQFZpZXdDaGlsZCgndGFza0V4ZWN1dGVCdXR0b25zJykgYnV0dG9uczogVGVtcGxhdGVSZWY8YW55PjsgLy8g56Gu6K6k5Y+W5raI5oyJ6ZKuXHJcbiAgQFZpZXdDaGlsZChTeXNGYXJyaXNMb29rdXBDb21wb25lbnQpIHN5c1VzZXJIZWxwOiBTeXNGYXJyaXNMb29rdXBDb21wb25lbnQ7IC8vIOezu+e7n+eUqOaIt+W4ruWKqVxyXG4gIEBWaWV3Q2hpbGQoVXJnZUhhbmRsZUNvbXBvbmVudCkgdXJnZUhhbmRsZUNvbXBvbmVudDogVXJnZUhhbmRsZUNvbXBvbmVudDtcclxuXHJcbiAgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICBzdWJtaXRSZXN1bHQ6IFN1Ym1pdFJlc3VsdCA9IHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH07IC8vIOWKqOS9nOaJp+ihjOWujOaIkOWQjui/lOWbnueahOWunuS9k+e7k+aenFxyXG4gIGJpbmRpbmdEYXRhOiB7IGlkPzogc3RyaW5nLCBuYW1lPzogc3RyaW5nIH0gPSB7fTsgLy8g57O757uf5biu5Yqp5aSa6YCJ5pe255So5YiwXHJcblxyXG4gIHNlbGVjdE5vZGVUZXh0OiBzdHJpbmcgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLm5leHROb2RlVGV4dCcpOyAvLyDkuIvkuIDnjq/oioLmmL7npLrnmoTmloflrZcsXCLkuIvkuIDnjq/oioJcIlxyXG4gIHNlbGVjdFVzZXJUZXh0OiBzdHJpbmc7IC8vIOWkhOeQhuS6uuWRmOaYvuekuuaWh+Wtl1xyXG4gIGNvbW1lbnRQbGFjZUhvbGRlcjogc3RyaW5nID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmlucHV0SG9sZGVyJyk7Ly/lrqHmibnmhI/op4HmoYZwbGFjZWhvbGRlclxyXG4gIHNob3dBdHRhY2htZW50OiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaYvuekuumZhOS7tuS4iuS8oFxyXG4gIHNob3dTaWduOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaYvuekuuetvuWQjVxyXG4gIHNob3dDb21tb25Db21tZW50OiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaYvuekuuW4uOeUqOaEj+ingVxyXG4gIHRleHRBcmVhSGVpZ2h0OiBudW1iZXIgPSA4NDsvL+aWh+Wtl+ahhueahOmrmOW6plxyXG5cclxuICBiaWxsTWV0aG9kQ29uZmlnczogQmlsbE1ldGhvZENvbmZpZ1tdID0gW107IC8vIOihqOWNleWKqOS9nOmFjee9ruWIl+ihqFxyXG5cclxuICBub2RlRGVmYXVsdFZhbHVlOiBzdHJpbmc7Ly/pu5jorqTkuIvkuIDnjq/oioLvvIjmj5DnpLrnlKjvvIlcclxuXHJcbiAgc2VsZWN0ZWROb2RlSWQ6IHN0cmluZzsgLy8g6YCJ5oup55qE5LiL5LiA546v6IqCSUTvvIzlubbooYzliIbmlK/mmK/vvIzpgJflj7fpmpTlvIDnmoRcclxuICBkZXN0Tm9kZXM6IHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXSA9IFtdOyAvLyDlgJnpgInkuIvkuIDnjq/oioJcclxuXHJcbiAgZGlhbG9nSGVpZ2h0ID0gMjcwOyAvLyDlvLnmoYbnmoTpq5jluqZcclxuICBkaWFsb2dIZWlnaHRCYXNlID0gNzA7XHJcblxyXG4gIGFkZGVuZHVtID0gbmV3IEFkZGVuZHVtKCk7IC8vIOmZhOS7tuOAgeetvuWQjeS/oeaBr1xyXG4gIGdyb3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcblxyXG4gIGFzc2lnbkluZm9zOiBBc3NpZ25JbmZvSGVscEVudGl0eVtdID0gW3sgLy8g6IqC54K56L+U5Zue55qE5oyH5rS+5L+h5oGv77yI5aSa5Liq77yJXHJcbiAgICBzZWxlY3RlZEFzc2lnbmVlczogW10sXHJcbiAgICBhc3NpZ25lZUluZm86IG51bGwsXHJcbiAgICBhc3NpZ25lZXM6IFtdLFxyXG4gICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogJycsXHJcbiAgICBhY3Rpdml0eURlZmluaXRpb25JZDogJycsXHJcbiAgICBkZXBlbmRlbmN5OiAnJyxcclxuICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICBhbm9ueW1vdXNUZXh0OiBudWxsLFxyXG4gICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gIH1dO1xyXG5cclxuICBvdGhlckFzc2lnbkluZm9zOiBBc3NpZ25JbmZvSGVscEVudGl0eVtdID0gW107Ly/lhbbku5boioLngrnmjIfmtL7kv6Hmga9cclxuXHJcbiAgb3JpZ2luT3RoZXJBc3NpZ25JbmZvczogQXNzaWduSW5mb0hlbHBFbnRpdHlbXSA9IFtdOy8v57yT5a2Y5LiA5byA5aeL55qE5YW25LuW6IqC54K55oyH5rS+5L+h5oGvXHJcblxyXG4gIHJlc3BvbnNlOiBTaW11bGF0ZVJlc3BvbnNlOyAvLyDkv53lrZjmqKHmi5/lrqHmibnlkI7ov5Tlm57nmoTlhoXlrrnvvIzpgInmi6noioLngrnml7bkvb/nlKhcclxuICB1cmdlSGFuZGxlUmVzcG9uc2U6IFVyZ2VIYW5kbGVSZXNwb25zZTsvL+S/neWtmOWCrOWKnuaooeaLn+WQjui/lOWbnueahOWGheWuuVxyXG5cclxuICBmb3JtT2JqZWN0OiBhbnk7IC8vIOihqOWNleWvueixoVxyXG4gIGlmUmVnaXN0ZXJlZCA9IGZhbHNlOyAvLyDooajljZXmmK/lkKbms6jlhoxcclxuICBjb25maWdMaXN0OiBUYXNrQ2VudGVyQ29uZmlnW10gPSBbXTsgLy/ku7vliqHkuK3lv4PphY3nva7poblcclxuXHJcbiAgdmVyaWZ5U2lnbmVkOiBWZXJpZnlTaWduZWQgPSBuZXcgVmVyaWZ5U2lnbmVkKCk7IC8vIOaVsOWtl+mqjOetvuWPguaVsFxyXG4gIHN1Ym1pdERpc2FibGU6IGJvb2xlYW4gPSBmYWxzZTsgLy8g5o+Q5Lqk5oyJ6ZKu5piv5ZCm56aB55SoXHJcblxyXG4gIC8v5Yqg562+5L2/55SoXHJcbiAgYWRkU2lnbiA9IHtcclxuICAgIHNob3dTaWduVG9TaWduOiBmYWxzZSxcclxuICAgIGFsbG93U2lnblRvU0lnbjogdHJ1ZSxcclxuICAgIHNob3dNdWx0aUluc3RhbmNlVHlwZTogZmFsc2UsXHJcbiAgICBtdWx0aUluc3RhbmNlVHlwZTogW1xyXG4gICAgICB7IHZhbHVlOiAnUGFyYWxsZWwnLCBuYW1lOiB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdhZGRTaWduLnBhcmFsbGVsJykgfSxcclxuICAgICAgeyB2YWx1ZTogJ1NlcXVlbnRpYWwnLCBuYW1lOiB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdhZGRTaWduLnNlcXVlbnRpYWwnKSB9LFxyXG4gICAgICB7IHZhbHVlOiAnUHJlZW1wdCcsIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2FkZFNpZ24ucHJlZW1wdCcpIH0sXHJcbiAgICBdLFxyXG4gICAgb3JpZ2luTXVsdGlJbnN0VHlwZTogJycsXHJcbiAgICBjdXJNdWx0aUluc3RUeXBlOiBNdWx0aUluc3RhbmNlVHlwZS5QYXJhbGxlbC50b1N0cmluZygpXHJcbiAgfVxyXG4gIC8v5Yqo5oCB6amz5Zue6YWN572uXHJcbiAgc2hvd0JhY2tXYXJkQ29uZmlnID0ge1xyXG4gICAgdGl0bGU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhY2tXYXJkQ29uZmlnLnRpdGxlJyksXHJcbiAgICBkeW5hbWljQmFja1dhcmRSdWxlQWJsZTogZmFsc2UsXHJcbiAgICBkaXNwbGF5UGxhY2Vob2xkZXI6ICcnLFxyXG4gICAgc2hvd1RpcHM6IGZhbHNlLFxyXG4gICAgZW5hYmxlOiBmYWxzZSxcclxuICAgIGJhY2tXYXJkUnVsZXM6IFt7XHJcbiAgICAgIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhY2tXYXJkQ29uZmlnLnNlcXVlbmNlJyksXHJcbiAgICAgIHZhbHVlOiAnc2VxdWVuY2UnXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhY2tXYXJkQ29uZmlnLmJhY2tUb01lJyksXHJcbiAgICAgIHZhbHVlOiAnYmFja1RvTWUnXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhY2tXYXJkQ29uZmlnLmJhY2tUb0N1cnJlbnROb2RlJyksXHJcbiAgICAgIHZhbHVlOiAnYmFja1RvQ3VycmVudE5vZGUnXHJcbiAgICB9XVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Lu75Yqh5YKs5Yqe5pe25L2/55SoXHJcbiAgICovXHJcbiAgc2hvd1VyZ2VNZXNzYWdlU3ViamVjdDogYm9vbGVhbiA9IGZhbHNlOyAvLyDmmK/lkKbmmL7npLrlgqzlip7mtojmga/kuLvpopjvvIjlgqzlip7ml7bkvb/nlKjvvIlcclxuICB1cmdlTWVzc2FnZVN1YmplY3Q6IHN0cmluZzsgLy8g5YKs5Yqe5raI5oGv5Li76aKY5paH5pysXHJcbiAgdXJnZU1lc3NhZ2VDb250ZW50OiBzdHJpbmc7IC8vIOWCrOWKnua2iOaBr+WGheWuueaWh+acrFxyXG4gIGFkZFJlbWluZGVyOiBib29sZWFuOyAvLyDmmK/lkKbmmL7npLrlgqzlip7kurrmtojmga9cclxuICBzdWJqZWN0RWRpdGFibGU6IGJvb2xlYW47IC8vIOS4u+mimOWPr+e8lui+kVxyXG4gIGNvbnRlbnRFZGl0YWJsZTogYm9vbGVhbjsgLy8g5YaF5a655Y+v57yW6L6RXHJcblxyXG4gIHdmQ29udGV4dCA9IG5ldyBXZkNvbnRleHQoKTsvL+W3peS9nOa1geS4iuS4i+aWh1xyXG4gIGVuYWJsZVByaW9yaXR5OiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbmmL7npLrlr4bnuqfvvIjliqjkvZznuqfliKvvvIlcclxuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGNscyA9ICcnO1xyXG5cclxuICBQT1NUX01FU1NBR0VfVEFSR0VUID0gd2luZG93LmRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbjtcclxuICBwcml2YXRlIG1lc3NhZ2VTdWJqZWN0O1xyXG4gIHByaXZhdGUgbGFuZ3VhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJykgfHwgJ3poLUNIUyc7Ly/kuK3oi7HmlodcclxuXHJcbiAgYWN0aW9uVG9rZW46IHN0cmluZzsvL3N1YmplY3TliqjkvZzms6jlhox0b2tlblxyXG4gIHNpbXVsYXRlVG9rZW46IHN0cmluZzsvL+mihOino+aekOazqOWGjHRva2VuXHJcbiAgc2VsZWN0ZWRQcmlvcml0eTogbnVtYmVyOy8v5Lu75Yqh5Yqe55CG6YCJ5Lit5ZCO55qE57Sn5oCl56iL5bqmXHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgaTE4blNlcnZpY2U6IEkxOG5TZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBoYW5kbGVyU2VydmljZTogV2ZUYXNrSGFuZGxlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxvYWRpbmdTZXJ2aWNlOiBMb2FkaW5nU2VydmljZSxcclxuICAgIHByaXZhdGUgbWVzc2FnZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgLy8g5aaC5p6c5a2Y5Zyo5raI5oGv55uR5ZCs77yM5YWI5Yig5o6JXHJcbiAgICBpZiAoVGFza0V4ZWN1dGVDb21wb25lbnQuZnVuYykge1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIFRhc2tFeGVjdXRlQ29tcG9uZW50LmZ1bmMsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIHRoaXMuYWRkTWVzc2FnZUxpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu4Tku7bplIDmr4Hml7bvvIzljrvmjolzdWJqZWN05rOo5YaMXHJcbiAgICovXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5hY3Rpb25Ub2tlbikge1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN1YmplY3RSZW1vdmUodGhpcy5hY3Rpb25Ub2tlbik7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zaW11bGF0ZVRva2VuKSB7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdFJlbW92ZSh0aGlzLnNpbXVsYXRlVG9rZW4pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldEFsbFVzZXJDb25maWcoKS5zdWJzY3JpYmUoKGNvbmZpZ0xpc3Q6IFRhc2tDZW50ZXJDb25maWdbXSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuY29uZmlnTGlzdCA9IGNvbmZpZ0xpc3Q7XHJcbiAgICAgIGNvbnN0IGNvbW1lbnQgPSBjb25maWdMaXN0LmZpbmQoYyA9PiBjLmNvbmZpZ0NvZGUgPT09IENvbmZpZ0NvZGUuRGVmYXVsdF9BcHByb3ZhbF9Db21tZW50KTtcclxuICAgICAgY29uc3QgaWZfc3RvcmVfY29tbWVudCA9IGNvbmZpZ0xpc3QuZmluZChjID0+IGMuY29uZmlnQ29kZSA9PT0gQ29uZmlnQ29kZS5JZl9TdG9yZV9Db21tZW50KTtcclxuICAgICAgbGV0IHBhc3NDb21tZW50OiBzdHJpbmc7XHJcbiAgICAgIGxldCBiYWNrQ29tbWVudDogc3RyaW5nO1xyXG4gICAgICBpZiAoY29tbWVudCAmJiBjb21tZW50LmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmxhbmd1YWdlID09ICd6aC1DSFMnKSB7XHJcbiAgICAgICAgICBwYXNzQ29tbWVudCA9IEpTT04ucGFyc2UoY29tbWVudC5jdXJyZW50VmFsdWUpLnBhc3M7XHJcbiAgICAgICAgICBiYWNrQ29tbWVudCA9IEpTT04ucGFyc2UoY29tbWVudC5jdXJyZW50VmFsdWUpLmJhY2s7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHBhc3NDb21tZW50ID0gSlNPTi5wYXJzZShjb21tZW50LmN1cnJlbnRWYWx1ZSlbJ3Bhc3NfJyArIHRoaXMubGFuZ3VhZ2VdO1xyXG4gICAgICAgICAgYmFja0NvbW1lbnQgPSBKU09OLnBhcnNlKGNvbW1lbnQuY3VycmVudFZhbHVlKVsnYmFja18nICsgdGhpcy5sYW5ndWFnZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnUGFzcycpIHtcclxuICAgICAgICAgIHRoaXMuY29tbWVudCA9IHBhc3NDb21tZW50O1xyXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29tbWVudCA9IHBhc3NDb21tZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PT0gJ0JhY2snKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbW1lbnQgPSBiYWNrQ29tbWVudDtcclxuICAgICAgICAgIHRoaXMuZGVmYXVsdENvbW1lbnQgPSBiYWNrQ29tbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGlmX3N0b3JlX2NvbW1lbnQgJiYgaWZfc3RvcmVfY29tbWVudC5jdXJyZW50VmFsdWUgPT09ICd0cnVlJykge1xyXG4gICAgICAgIGlmICh0aGlzLndmQ2FjaGVDb21tZW50KSB7Ly/lvIDlkK/mmoLlrZjmhI/op4HvvIzlvZPliIfmjaLliLDpqbPlm57lubbkuJRcclxuICAgICAgICAgIGlmICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09ICdCYWNrJyAmJiB0aGlzLndmQ2FjaGVDb21tZW50ID09IHBhc3NDb21tZW50KSB7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbW1lbnQgPSB0aGlzLndmQ2FjaGVDb21tZW50O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgKCkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLy8g5LuO5Lu75Yqh5Yqe55CG55WM6Z2i5omT5byA5pe277yM5omN5rOo5YaM5pyN5YqhXHJcbiAgICBpZiAodGhpcy5vcmlnaW4gPT09IEFjdGlvbk9yaWdpbi5UYXNrRm9ybSkge1xyXG4gICAgICB0aGlzLmluaXRGb3JtRXZlbnQoKTtcclxuICAgICAgLy8g6I635Y+W6KGo5Y2V5pON5L2c6YWN572uXHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0VGFza0Zvcm1JbmZvKHRoaXMud29ya0l0ZW1JZCkuc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKHJlICYmIHJlLmJpbGxNZXRob2RDb25maWdzICYmIHJlLmJpbGxNZXRob2RDb25maWdzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5iaWxsTWV0aG9kQ29uZmlncyA9IHJlLmJpbGxNZXRob2RDb25maWdzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgVXJnZUhhbmRsZVNpbXVsYXRlQ29udGV4dCgpO1xyXG4gICAgY29udGV4dC5wcm9jSW5zdElkID0gdGhpcy5wcm9jZXNzSW5zdGFuY2VJZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkTWVzc2FnZUxpc3RlbmVyKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmV2ZW50SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgVGFza0V4ZWN1dGVDb21wb25lbnQuZnVuYyA9IHRoaXMuZXZlbnRIYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog55uR5ZCs5LqL5Lu25aSE55CGXHJcbiAgICovXHJcbiAgZXZlbnRIYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICB0aGlzLm1lc3NhZ2VTdWJqZWN0Lm5leHQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YeN5YaZ54i257G75pa55rOVXHJcbiAgICogQHBhcmFtIHRhc2tcclxuICAgKi9cclxuICBzZXRUYXNrKHRhc2s6IFRhc2tFbnRpdHkpIHtcclxuICAgIGlmICh0YXNrKSB7XHJcbiAgICAgIHRoaXMudGFzayA9IHRhc2s7XHJcbiAgICAgIHRoaXMud29ya0l0ZW1JZCA9IHRhc2suc291cmNlSWQ7XHJcbiAgICAgIHRoaXMucHJvY2Vzc0luc3RhbmNlSWQgPSB0YXNrLnByb2Nlc3NJbnN0YW5jZUlkO1xyXG4gICAgICB0aGlzLndmQ29udGV4dC5wcm9jZXNzQ2F0ZWdvcnlJZCA9IHRhc2suY2F0ZWdvcnlJZDtcclxuICAgICAgdGhpcy5zZWxlY3RlZFByaW9yaXR5ID0gdGFzay5wcmlvcml0eTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WKnueQhiDorr7nva7ku7vliqHliJfooahcclxuICAgKiBAcGFyYW0gdGFza0xpc3QgXHJcbiAgICovXHJcbiAgc2V0VGFza0xpc3QodGFza0xpc3Q6IFRhc2tFbnRpdHlbXSkge1xyXG4gICAgaWYgKHRhc2tMaXN0Lmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gMjkwO1xyXG4gICAgfVxyXG4gICAgdGhpcy50YXNrTGlzdCA9IHRhc2tMaXN0O1xyXG4gICAgdGhpcy5iYXRjaFNlY29uZCA9IE1hdGguY2VpbCh0aGlzLnRhc2tMaXN0Lmxlbmd0aCAvIDYpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YeN5YaZ54i257G75pa55rOVXHJcbiAgICogQHBhcmFtIGFjdGlvblxyXG4gICAqL1xyXG4gIHNldEFjdGlvbihhY3Rpb246IFRhc2tBY3Rpb24pOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgcmVzdWx0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgaWYgKGFjdGlvbikge1xyXG4gICAgICB0aGlzLmFjdGlvbkVudGl0eSA9IGFjdGlvbjtcclxuICAgICAgaWYgKHRoaXMudGFzaykgey8vIOWNleS4quOAgeaJuemHj+mDvXNldEFjdGlvbu+8jOWNleS4quaJjeaJp+ihjOaooeaLn1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXVsYXRlKHRoaXMuYWN0aW9uRW50aXR5KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy50YXNrTGlzdCAmJiB0aGlzLnRhc2tMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoU2ltdWxhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/mibnph4/ml7bvvIzkuZ/opoHov5Tlm55cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzdWJqZWN0Lm5leHQocmVzdWx0KTtcclxuICAgIH0sIDEwMCk7XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWJjeS6i+S7tuWIneWni+WMlu+8jOWwhuacjeWKoeazqOWGjOWIsHdpbmRvd+S4iu+8jOS+m+ihqOWNleiwg+eUqFxyXG4gICAqIOS7u+WKoeWKnueQhueVjOmdoueahHdpbmRvd++8jOihqOWNleeahHdpbmRvdy5wYXJlbnRcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRGb3JtRXZlbnQoKSB7XHJcbiAgICAvLyDlrqHmibnliY3kuovku7ZcclxuICAgIHRoaXMuYWN0aW9uVG9rZW4gPSB0aGlzLndvcmtJdGVtSWQgKyAnYWN0aW9uJztcclxuICAgIGNvbnN0IGFjdGlvblRva2VuID0gdGhpcy5hY3Rpb25Ub2tlbjtcclxuICAgIGNvbnN0IHN1YmplY3RDb2RlID0gJ0Zvcm1TdWJqZWN0Q29kZSc7XHJcbiAgICAod2luZG93IGFzIGFueSkuZ3NwV2ZFdmVudFNlcnZpY2UgPSAod2luZG93IGFzIGFueSkuZ3NwV2ZFdmVudFNlcnZpY2UgfHwge307XHJcbiAgICAod2luZG93IGFzIGFueSkuZ3NwV2ZFdmVudFNlcnZpY2UucmVnaXN0ZXIgPSAoZm9ybU9iamVjdDogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdFJlZ2lzdGVyKHN1YmplY3RDb2RlLCBhY3Rpb25Ub2tlbik7XHJcbiAgICAgIHRoaXMuaWZSZWdpc3RlcmVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5mb3JtT2JqZWN0ID0gZm9ybU9iamVjdDtcclxuICAgIH07XHJcblxyXG4gICAgKHdpbmRvdyBhcyBhbnkpLmdzcFdmRXZlbnRTZXJ2aWNlLm5vdGlmeSA9ICh2YWx1ZTogRm9ybUV2ZW50TWVzc2FnZSkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5pZlJlZ2lzdGVyZWQpIHtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnN1YmplY3ROb3RpZnkoYWN0aW9uVG9rZW4sIHZhbHVlKTtcclxuICAgICAgfSBlbHNlIHsvLyDooajljZXkuI3ms6jlhozvvIzkuZ/lj6/nm7TmjqXosIPnlKhub3RpZnlcclxuICAgICAgICB0aGlzLnNpbXVsYXRlVG9rZW4gPSB0aGlzLndvcmtJdGVtSWQgKyAnc2ltdWxhdGUnO1xyXG4gICAgICAgIGNvbnN0IHNpbXVsYXRlVG9rZW4gPSB0aGlzLnNpbXVsYXRlVG9rZW47XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5zdWJqZWN0UmVnaXN0ZXIoc3ViamVjdENvZGUsIHNpbXVsYXRlVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdFJlc3BvbnNlKHNpbXVsYXRlVG9rZW4sICcnLCAodmFsdWU6IEZvcm1FdmVudE1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgIHZhbHVlICYmIHZhbHVlLmRhdGFDaGFuZ2VkICYmIHRoaXMuY29tcGxldGVTaW11bGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2Uuc3ViamVjdE5vdGlmeShzaW11bGF0ZVRva2VuLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDngrnlh7vmj5DkuqTnmoTml7blgJnvvIzmiafooYzooajljZXnmoTliY3kuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGJlZm9yZUNvbXBsZXRlU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMub3JpZ2luID09IEFjdGlvbk9yaWdpbi5UYXNrRm9ybSkge1xyXG4gICAgICAvLyDojrflj5booajljZXmk43kvZzphY3nva5cclxuICAgICAgY29uc3QgcGFzc1ByZUFjdGlvbnMgPSB0aGlzLmJpbGxNZXRob2RDb25maWdzLmZpbHRlcihhY3Rpb24gPT4gYWN0aW9uLmFjdGlvbiA9PT0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZSAmJiBhY3Rpb24uZXhlY3V0aW9uVGltZSA9PT0gJ1ByZScpLnNvcnQoKHgsIHkpID0+IHguc29ydE9yZGVyIC0geS5zb3J0T3JkZXIpO1xyXG4gICAgICAvLyDlpoLmnpzooajljZXms6jlhozkuobkuovku7ZcclxuICAgICAgaWYgKHBhc3NQcmVBY3Rpb25zICYmIHBhc3NQcmVBY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuZXhlY3V0ZUZvcm1BY3Rpb25zKFsuLi5wYXNzUHJlQWN0aW9uc10pO1xyXG4gICAgICB9IGVsc2Ugey8vIOayoeacieWumuS5ieWJjeWQjuS6i+S7tu+8jOebtOaOpeaPkOS6pFxyXG4gICAgICAgIHRoaXMuY29tcGxldGVTdWJtaXQoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jb21wbGV0ZVN1Ym1pdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGZvcm1BY3Rpb25zIOihqOWNleS4reimgeaJp+ihjOeahOWKqOS9nFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZXhlY3V0ZUZvcm1BY3Rpb25zKGZvcm1BY3Rpb25zOiBCaWxsTWV0aG9kQ29uZmlnW10pIHtcclxuICAgIGlmIChmb3JtQWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZVN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZVN1YmplY3Quc3Vic2NyaWJlKChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHJlLmRhdGEuZGF0YTtcclxuICAgICAgICBpZiAoZGF0YS5yZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGFDaGFuZ2VkID09PSB0cnVlKSB7Ly8g5aaC5p6c6ZyA6KaB6aKE6Kej5p6Q77yM5YWI6aKE6Kej5p6Q5YaN57un57ut5omn6KGMXHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVTaW11bGF0ZSgpLnN1YnNjcmliZSgocikgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChyLnJlc3VsdCkgey8vIOmihOino+aekOato+ehrlxyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnMoZm9ybUFjdGlvbnMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7Ly8g6aKE6Kej5p6Q6ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOyAvLyDku7vliqHlip7nkIbnlYzpnaLkuI3lhbPpl61cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHsvLyDkuI3pnIDopoHpooTop6PmnpDvvIznu6fnu63miafooYxcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlRm9ybUFjdGlvbnMoZm9ybUFjdGlvbnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOyAvLyDku7vliqHlip7nkIbnlYzpnaLkuI3lhbPpl61cclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5a6h5om55YmN6KGo5Y2V5pON5L2c5omn6KGM5aSx6LSl77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8g5omn6KGM6KGo5Y2V5Yqo5L2cXHJcbiAgICAgIGNvbnN0IGZvcm1BY3Rpb24gPSBmb3JtQWN0aW9ucy5zaGlmdCgpO1xyXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHRoaXMud29ya0l0ZW1JZCwgZm9ybUFjdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbXBsZXRlU3VibWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDljZXkuKrku7vliqHpooTop6PmnpBcclxuICAgKiBAcGFyYW0gYWN0aW9uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaW11bGF0ZShhY3Rpb246IFRhc2tBY3Rpb24pOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgc3dpdGNoIChhY3Rpb24uY29kZSkge1xyXG4gICAgICBjYXNlICdBc3NpZ25Vc2VyJzogLy8g5oyH5rS+IOWNleeLrOWPguaVsFxyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2lnblNpbXVsYXRlKCk7XHJcbiAgICAgIGNhc2UgJ0NsYWltJzogLy8g6aKG55SoXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KCk7XHJcbiAgICAgIGNhc2UgJ1VuY2xhaW0nOiAvLyDlj5bmtojpoobnlKhcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnUmV0cmlldmUnOiAvLyDlj5blm55cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnVHJhbnNmZXInOiAvLyDnp7vkuqQg5Y2V54us5Y+C5pWwXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmZXJTaW11bGF0ZSgpO1xyXG4gICAgICBjYXNlICdBZGRTaWduJzogLy8g5Yqg562+XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkU2lnblNpbXVsYXRlKCk7XHJcbiAgICAgIGNhc2UgJ0FkZFNpZ25Gcm9udCc6IC8vIOW+geivolxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZFNpZ25Gcm9udFNpbXVsYXRlKCk7XHJcbiAgICAgIGNhc2UgJ05vdGlmeSc6IC8v55+l5LyaXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm90aWZ5U2ltdWxhdGUoKTtcclxuICAgICAgY2FzZSAnUmVmdXNlJzogLy8g5ZCm5YazXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KCk7XHJcbiAgICAgIGNhc2UgJ09ic29sZXRlJzogLy8g5L2c5bqfXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KCk7XHJcbiAgICAgIGNhc2UgJ0NvbW1lbnQnOiAvLyDor4TorrpcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSAnUmVhZFRhc2snOiAvLyDlt7LpmIVcclxuICAgICAgICB0aGlzLmlmU2hvd0NvbW1lbnRUb015U2VsZiA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KDI5NSk7XHJcbiAgICAgIGNhc2UgJ1VyZ2VIYW5kbGUnOi8v5YKs5YqeXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXJnZUhhbmRsZVNpbXVsYXRlKCk7XHJcbiAgICAgIGNhc2UgJ0NhbmNlbENvbnN1bHQnOi8v5Y+W5raI5b6B6K+iXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFN1YmplY3ROZXh0KCk7XHJcbiAgICAgIGRlZmF1bHQ6IC8vIOmAmui/hyDpqbPlm54g6YeN5paw5o+Q5LqkIOWFtuS7luiHquWumuS5ieeahOWKqOS9nFxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlU2ltdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/lrqHmibnpooTop6PmnpBcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwcml2YXRlIGJhdGNoU2ltdWxhdGUoKTogT2JzZXJ2YWJsZTxTaW11bGF0ZVN1YmplY3Q+IHtcclxuICAgIHN3aXRjaCAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSkge1xyXG4gICAgICBjYXNlIFwiUmVhZFRhc2tcIjovL+aJuemHj+W3sumYhVxyXG4gICAgICAgIHRoaXMuaWZTaG93Q29tbWVudFRvTXlTZWxmID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoMjk1KTtcclxuICAgICAgY2FzZSBcIlJldHJpZXZlXCI6Ly/mibnph4/lj5blm55cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQoKTtcclxuICAgICAgY2FzZSBcIlRyYW5zZmVyXCI6Ly/mibnph4/np7vkuqRcclxuICAgICAgICB0aGlzLmlmU2VsZWN0VXNlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucmVjZWl2ZXInKTsvL+aOpeaUtuS6uuWRmFxyXG4gICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0U3ViamVjdE5leHQodGhpcy5kaWFsb2dIZWlnaHQgKyB0aGlzLmRpYWxvZ0hlaWdodEJhc2UpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdWJqZWN0TmV4dCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6buY6K6k55qE6aKE6Kej5p6Q6L+U5Zue57uT5p6c77yM5Y+v5o6n5Yi25by55qGG6auY5bqmXHJcbiAgICogQHBhcmFtIGRpYWxvZ0hlaWdodCBcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwcml2YXRlIGRlZmF1bHRTdWJqZWN0TmV4dChkaWFsb2dIZWlnaHQ/OiBudW1iZXIpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgcyA9IG5ldyBTaW11bGF0ZVN1YmplY3QoKTtcclxuICAgIHMuc2hvd0RpYWxvZyA9IHRydWU7XHJcbiAgICBzLmRpYWxvZ0hlaWdodCA9IGRpYWxvZ0hlaWdodCA/IGRpYWxvZ0hlaWdodCA6IHRoaXMuZGlhbG9nSGVpZ2h0O1xyXG4gICAgcy5yZXN1bHQgPSB0cnVlO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHN1YmplY3QubmV4dChzKTtcclxuICAgIH0sIDEwMCk7XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOecn+ato+WcsOaPkOS6pFxyXG4gICAqIOmHjeWGmeeItuexu+aWueazlVxyXG4gICAqL1xyXG4gIHN1Ym1pdCgpOiBPYnNlcnZhYmxlPFN1Ym1pdFJlc3VsdD4ge1xyXG4gICAgc3dpdGNoICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlKSB7XHJcbiAgICAgIGNhc2UgJ0Fzc2lnblVzZXInOiAvLyDmjIfmtL4g5Y2V54us5Y+C5pWwXHJcbiAgICAgICAgdGhpcy5hc3NpZ25TdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQ2xhaW0nOiAvLyDpoobnlKhcclxuICAgICAgICB0aGlzLmNsYWltU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1VuY2xhaW0nOiAvLyDlj5bmtojpoobnlKhcclxuICAgICAgICB0aGlzLnVuQ2xhaW1TdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUmV0cmlldmUnOiAvLyDlj5blm55cclxuICAgICAgICB0aGlzLnJldHJpZXZlU3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1RyYW5zZmVyJzogLy8g56e75LqkIOWNleeLrOWPguaVsFxyXG4gICAgICAgIHRoaXMudHJhbnNmZXJTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQWRkU2lnbic6IC8vIOWKoOetvlxyXG4gICAgICAgIHRoaXMuYWRkU2lnblN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdBZGRTaWduRnJvbnQnOiAvLyDlvoHor6JcclxuICAgICAgICB0aGlzLmFkZFNpZ25Gcm9udFN1Ym1pdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdDb21tZW50JzogLy8g6K+E6K66XHJcbiAgICAgICAgdGhpcy5jb21tZW50U3VibWl0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ05vdGlmeSc6IC8v55+l5LyaXHJcbiAgICAgICAgdGhpcy5ub3RpZnlTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUmVhZFRhc2snOiAvLyDlt7LpmIVcclxuICAgICAgICB0aGlzLnJlYWRTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnVXJnZUhhbmRsZSc6Ly/lgqzlip5cclxuICAgICAgICB0aGlzLnVyZ2VIYW5kbGVTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQ2FuY2VsQ29uc3VsdCc6Ly/lj5bmtojlvoHor6JcclxuICAgICAgICB0aGlzLmNhbmNlbENvbnN1bHRTdWJtaXQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDogLy8g6YCa6L+HIOmps+WbniDlkKblhrMg5L2c5bqfIOmHjeaWsOaPkOS6pCDlhbbku5boh6rlrprkuYnliqjkvZxcclxuICAgICAgICB0aGlzLmJlZm9yZUNvbXBsZXRlU3VibWl0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5Yqe55CG54K55Ye75o+Q5LqkXHJcbiAgICogQHBhcmFtIHRhc2tzIFxyXG4gICAqIEByZXR1cm5zIFxyXG4gICAqL1xyXG4gIGJhdGNoU3VibWl0KHRhc2tzOiBUYXNrRW50aXR5W10pOiBPYnNlcnZhYmxlPFN1Ym1pdFJlc3VsdD4ge1xyXG4gICAgc3dpdGNoICh0aGlzLmFjdGlvbkVudGl0eS5jb2RlKSB7XHJcbiAgICAgIGNhc2UgXCJSZWFkVGFza1wiOi8v5om56YeP5bey6ZiFXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hSZWFkVGFza1N1Ym1pdCh0YXNrcyk7XHJcbiAgICAgIGNhc2UgXCJSZXRyaWV2ZVwiOi8v5om56YeP5Y+W5ZueXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hSZXRyaWV2ZVN1Ym1pdCh0YXNrcyk7XHJcbiAgICAgIGNhc2UgXCJDbGFpbVwiOi8v5om56YeP6aKG55SoXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hDbGFpbVN1Ym1pdCh0YXNrcyk7XHJcbiAgICAgIGNhc2UgXCJVbmNsYWltXCI6Ly/mibnph4/lj5bmtojpoobnlKhcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaFVuY2xhaW1TdWJtaXQodGFza3MpO1xyXG4gICAgICBjYXNlIFwiVHJhbnNmZXJcIjovL+aJuemHj+enu+S6pFxyXG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoVHJhbnNmZXJTdWJtaXQodGFza3MpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoQ29tcGxldGVTdWJtaXQodGFza3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5omn6KGM5om56YeP5YmN5LqL5Lu2XHJcbiAgICogQHBhcmFtIHRhc2tzIOaJuemHj+S7u+WKoeWIl+ihqFxyXG4gICAqL1xyXG4gIGJhdGNoQ29tcGxldGVTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSk6IE9ic2VydmFibGU8U3VibWl0UmVzdWx0PiB7XHJcbiAgICBsZXQgZmlsdGVyTnVtID0gMDtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgICBjb25zdCBzdWNjZXNzU3VibWl0OiBTdWJtaXRSZXN1bHQgPSB7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9O1xyXG4gICAgaWYgKCh0aGlzLmFjdGlvbkVudGl0eS5jb2RlID09PSAnQmFjaycgfHwgdGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PT0gJ1JlZnVzZScpICYmICF0aGlzLmNvbW1lbnQpIHsvLyDmibnph4/mhI/op4HmmK/lkKblv4XloavkuI3mlK/mjIHmoLnmja7lrqHmibnpobnphY3nva7mk43kvZzvvIzmibnph4/pqbPlm57mhI/op4Hlv4XloatcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5pbnB1dE9waW5pb24nKSk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgbm9BY3Rpb25UYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+IHQuYWN0aW9ucy5maW5kSW5kZXgoYSA9PiBhLmNvZGUgPT09IHRoaXMuYWN0aW9uRW50aXR5LmNvZGUpID09PSAtMSk7XHJcbiAgICAgIGlmIChub0FjdGlvblRhc2tzICYmIG5vQWN0aW9uVGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgYSBvZiBub0FjdGlvblRhc2tzKSB7XHJcbiAgICAgICAgICBmaWx0ZXJOdW0rKztcclxuICAgICAgICAgIGlmIChmaWx0ZXJOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoc3VjY2Vzc1N1Ym1pdCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbygwLCBmaWx0ZXJOdW0sIDAsIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsZXQgYWN0VGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmFjdGlvbnMuc29tZShhID0+IGEuY29kZSA9PT0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZSkpO1xyXG4gICAgICBpZiAoYWN0VGFza3MgJiYgYWN0VGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZXhlY3V0ZUJhdGNoRXZlbnQoWy4uLnRoaXMuYWN0aW9uRW50aXR5LnByZUV2ZW50cy5maWx0ZXIoZSA9PiBlLmJhdGNoKV0sIGFjdFRhc2tzLCB0aGlzLmFjdGlvbkVudGl0eSwgKHJlOiBUYXNrRXZlbnRSZXN1bHQpID0+IHtcclxuICAgICAgICAgIGlmIChyZSAmJiByZS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlLnBhc3NUYXNrcykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGJhY2tUYXNrcyA9IGFjdFRhc2tzLmZpbHRlcih0ID0+IHJlLnBhc3NUYXNrcy5maW5kSW5kZXgoaWQgPT4gaWQgPT09IHQuaWQpID09PSAtMSk7XHJcbiAgICAgICAgICAgICAgaWYgKGJhY2tUYXNrcyAmJiBiYWNrVGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGJhY2tUYXNrcykge1xyXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJOdW0rKztcclxuICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlck51bSA9PT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHN1Y2Nlc3NTdWJtaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbygwLCBmaWx0ZXJOdW0sIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGFjdFRhc2tzID0gYWN0VGFza3MuZmlsdGVyKHQgPT4gcmUucGFzc1Rhc2tzLmZpbmRJbmRleChpZCA9PiBpZCA9PT0gdC5pZCkgPiAtMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFjdFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICBjb25zdCBiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQgPSBuZXcgQmF0Y2hWZXJpZnlTaWduZWRDb250ZXh0KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5iYXRjaFZlcmlmeVN1Ym1pdChhY3RUYXNrcywgZmlsdGVyTnVtLCBiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQpLnN1YnNjcmliZSgocjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAociAmJiByLnN1Y2Nlc3NTdWJtaXQgJiYgci5zdWNjZXNzU3VibWl0LnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVCYXRjaEV2ZW50KFsuLi50aGlzLmFjdGlvbkVudGl0eS5wb3N0RXZlbnRzLmZpbHRlcihlID0+IGUuYmF0Y2gpXSwgci5zdWNjZXNzSGFuZGxlVGFza3MsIHRoaXMuYWN0aW9uRW50aXR5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHIuc3VjY2Vzc1N1Ym1pdCk7XHJcbiAgICAgICAgICAgICAgICAgIH0sIHsgcmVzdWx0OiB0cnVlLCBwYXNzVGFza3M6IHIuc3VjY2Vzc0hhbmRsZVRhc2tzLm1hcCh0ID0+IHQuaWQpIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCB7IHJlc3VsdDogdHJ1ZSwgcGFzc1Rhc2tzOiBhY3RUYXNrcy5tYXAodCA9PiB0LmlkKSB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/mlbDlrZfnrb7lkI1cclxuICAgKiBAcGFyYW0gdGFza3MgXHJcbiAgICogQHBhcmFtIGZpbHRlck51bSBcclxuICAgKiBAcGFyYW0gYmF0Y2hWZXJpZnlTaWduZWRDb250ZXh0IFxyXG4gICAqIEByZXR1cm5zIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hWZXJpZnlTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSwgZmlsdGVyTnVtOiBudW1iZXIgPSAwLCBiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQ6IEJhdGNoVmVyaWZ5U2lnbmVkQ29udGV4dCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIGNvbnN0IHZlcmlmeVRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4ge1xyXG4gICAgICBjb25zdCBhY3Rpb24gPSB0LmFjdGlvbnMuZmluZChhID0+IGEuY29kZSA9PT0gdGhpcy5hY3Rpb25FbnRpdHkuY29kZSk7XHJcbiAgICAgIGlmICghYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChhY3Rpb24ucGFyYW1ldGVycy5zb21lKHAgPT4gcC5jb2RlID09PSAnQ2VydGlmaWNhdGlvbk5lY2Vzc2FyeScgJiYgcC52YWx1ZSA9PT0gJ3RydWUnKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgdmVyaWZ5VGFza3NOdW0gPSB2ZXJpZnlUYXNrcy5sZW5ndGg7XHJcbiAgICBpZiAodmVyaWZ5VGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgaWYgKFxyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlICYmXHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmXHJcbiAgICAgICkge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5jYUV2ZW50Lm9uKFxyXG4gICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmNhRXZlbnQuc2lnbmVkTXNnT3ZlclRva2VuKCksXHJcbiAgICAgICAgICAnc2lnbmVkTXNnT3ZlcicsXHJcbiAgICAgICAgICBmdW5jdGlvbiBzaWduTXNnT3ZlcihzaWduZWREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChzaWduZWREYXRhICYmIHNpZ25lZERhdGFbMF0gPT09ICd0cnVlJyAmJiBzaWduZWREYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAvLyDor4Hkuablr7nosaFcclxuICAgICAgICAgICAgICBjb25zdCBjZXJ0ID0gZ3NwQ0EuZ2V0Q3VyQ2VydCgpO1xyXG4gICAgICAgICAgICAgIC8vIOmqjOetvuWPguaVsFxyXG4gICAgICAgICAgICAgIHRoYXQudmVyaWZ5U2lnbmVkID0ge1xyXG4gICAgICAgICAgICAgICAgLy8g6KaB6aqM6K+B55qE6K+B5LmmYmFzZTY057yW56CB55qE5a2X56ym5rWBKGNlcnRrZXkpXHJcbiAgICAgICAgICAgICAgICBjZXJ0QmFzZTY0SW5mbzogZ3NwQ0EuZ2V0Q2VydEJhc2U2NChjZXJ0KSxcclxuICAgICAgICAgICAgICAgIC8vIOetvuWQjeWOn+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgbXNnOiBbJ0JhdGNoRGlnaXRhbFNpZ25hdHVyZSddLFxyXG4gICAgICAgICAgICAgICAgLy8g6KaB562+5ZCN5ZCO5L+h5oGvXHJcbiAgICAgICAgICAgICAgICBzaWduZWRtc2c6IHNpZ25lZERhdGFbMV1bMF0sXHJcbiAgICAgICAgICAgICAgICAvLyDnlKjmiLfkvb/nlKjlnLrmma/vvIznm67liY3mnKrkvb/nlKjvvIzlj6/ku6XkuLrnqbpcclxuICAgICAgICAgICAgICAgIHVzZUNhc2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQudmVyaWZ5U2lnbmVkID0gdGhhdC52ZXJpZnlTaWduZWQ7XHJcbiAgICAgICAgICAgICAgdGhhdC50YXNrU2VydmljZS5iYXRjaFZlcmlmeVNpZ25lZChiYXRjaFZlcmlmeVNpZ25lZENvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZnlUYXNrc051bSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmJhdGNoQ29tcGxldGUodGFza3MsIGZpbHRlck51bSwgdmVyaWZ5VGFza3NOdW0pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyVGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB2ZXJpZnlUYXNrcy5maW5kSW5kZXgodGFzayA9PiB0YXNrLmlkID09PSB0LmlkKSA9PT0gLTEpO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5iYXRjaENvbXBsZXRlKG90aGVyVGFza3MsIGZpbHRlck51bSwgdmVyaWZ5VGFza3NOdW0pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGF0Lm5vdGlmeS5lcnJvcihzaWduZWREYXRhWzFdKTtcclxuICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyBzdWNjZXNzU3VibWl0OiB7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0sIHN1Y2Nlc3NIYW5kbGVUYXNrczogbmV3IEFycmF5KCkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG1zZyA9IFsnQmF0Y2hEaWdpdGFsU2lnbmF0dXJlJ107XHJcbiAgICAgIGdzcENBLmdldFNpZ25lZE1zZyhtc2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5iYXRjaENvbXBsZXRlKHRhc2tzLCBmaWx0ZXJOdW0sIHZlcmlmeVRhc2tzTnVtKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgIHN1YmplY3QubmV4dChyZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnnJ/mraPnmoTmibnph4/mj5DkuqTku7vliqFcclxuICAgKiBAcGFyYW0gdGFza3MgXHJcbiAgICogQHBhcmFtIGZpbHRlck51bSBcclxuICAgKiBAcGFyYW0gdmVyaWZ5VGFza3NOdW0gXHJcbiAgICogQHJldHVybnMgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaENvbXBsZXRlKHRhc2tzOiBUYXNrRW50aXR5W10sIGZpbHRlck51bTogbnVtYmVyID0gMCwgdmVyaWZ5VGFza3NOdW06IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgbGV0IHN1Y2Nlc3NOdW0gPSAwO1xyXG4gICAgbGV0IGZhaWxlZE51bSA9IDA7XHJcbiAgICBsZXQgZXJyb3JOdW0gPSAwO1xyXG4gICAgY29uc3Qgc3VjY2Vzc1N1Ym1pdDogU3VibWl0UmVzdWx0ID0geyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfTtcclxuICAgIGNvbnN0IHN1Y2Nlc3NIYW5kbGVUYXNrcyA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0gbmV3IENvbXBsZXRlQ29udGV4dCgpO1xyXG4gICAgICBjb250ZXh0LndvcmtJdGVtSWQgPSB0YXNrLnNvdXJjZUlkO1xyXG4gICAgICBjb250ZXh0LmNvbmNsdXNpb25WYWx1ZSA9IHRoaXMuYWN0aW9uRW50aXR5LmNvZGU7XHJcbiAgICAgIGNvbnRleHQuY29tbWVudCA9IHRoaXMuY29tbWVudDtcclxuICAgICAgY29udGV4dC5hZGRlbmR1bSA9IHRoaXMuYWRkZW5kdW07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuY29tcGxldGVTaW11bGF0ZShjb250ZXh0KS5zdWJzY3JpYmUoKHJlc3BvbnNlOiBTaW11bGF0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLm5lZWRJbnRlcmFjdGlvbiA9PT0gdHJ1ZSkgey8vIOmcgOimgeS6pOS6klxyXG4gICAgICAgICAgZmFpbGVkTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGZhaWxlZE51bSArIGVycm9yTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyBzdWNjZXNzU3VibWl0LCBzdWNjZXNzSGFuZGxlVGFza3MgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCBmYWlsZWROdW0gKyBmaWx0ZXJOdW0sIGVycm9yTnVtLCB2ZXJpZnlUYXNrc051bSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHsvLyDkuI3pnIDopoHkuqTkupJcclxuICAgICAgICAgIHRoaXMudGFza1NlcnZpY2UuY29tcGxldGUoY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHsvLyDmiafooYzmiJDlip9cclxuICAgICAgICAgICAgc3VjY2Vzc051bSsrO1xyXG4gICAgICAgICAgICBzdWNjZXNzSGFuZGxlVGFza3MucHVzaCh0YXNrKTtcclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBmYWlsZWROdW0gKyBlcnJvck51bSA9PT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgZmFpbGVkTnVtICsgZmlsdGVyTnVtLCBlcnJvck51bSwgdmVyaWZ5VGFza3NOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAoKSA9PiB7Ly8g5omn6KGM5oql6ZSZXHJcbiAgICAgICAgICAgIGVycm9yTnVtKys7XHJcbiAgICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZmFpbGVkTnVtICsgZXJyb3JOdW0gPT09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyBzdWNjZXNzU3VibWl0LCBzdWNjZXNzSGFuZGxlVGFza3MgfSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIGZhaWxlZE51bSArIGZpbHRlck51bSwgZXJyb3JOdW0sIHZlcmlmeVRhc2tzTnVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAoKSA9PiB7Ly8g5Lu75Yqh5qih5ouf6K+35rGC5oql6ZSZXHJcbiAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICBpZiAoc3VjY2Vzc051bSArIGZhaWxlZE51bSArIGVycm9yTnVtID09PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgIHN1YmplY3QubmV4dCh7IHN1Y2Nlc3NTdWJtaXQsIHN1Y2Nlc3NIYW5kbGVUYXNrcyB9KTtcclxuICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCBmYWlsZWROdW0gKyBmaWx0ZXJOdW0sIGVycm9yTnVtLCB2ZXJpZnlUYXNrc051bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5bey6ZiFXHJcbiAgICogQHBhcmFtIHRhc2tzIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hSZWFkVGFza1N1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdKTogT2JzZXJ2YWJsZTxTdWJtaXRSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBzdWNjZXNzTnVtID0gMDtcclxuICAgICAgbGV0IGVycm9yTnVtID0gMDtcclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgIGxldCBjb250ZXh0OiBXb3JrSXRlbUV4ZWN1dGVQYXJhbSA9IHtcclxuICAgICAgICAgIHdvcmtJdGVtSWQ6IHRhc2suc291cmNlSWQsXHJcbiAgICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5yZWFkVGFzayhjb250ZXh0KS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICAgICAgc3VjY2Vzc051bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgZXJyb3JOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WPluWbnlxyXG4gICAqIEBwYXJhbSB0YXNrcyBcclxuICAgKi9cclxuICBwcml2YXRlIGJhdGNoUmV0cmlldmVTdWJtaXQodGFza3M6IFRhc2tFbnRpdHlbXSk6IE9ic2VydmFibGU8U3VibWl0UmVzdWx0PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxTdWJtaXRSZXN1bHQ+KG51bGwpO1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgc3VjY2Vzc051bSA9IDA7XHJcbiAgICAgIGxldCBlcnJvck51bSA9IDA7XHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICBsZXQgY29udGV4dDogV29ya0l0ZW1FeGVjdXRlUGFyYW0gPSB7XHJcbiAgICAgICAgICB3b3JrSXRlbUlkOiB0YXNrLnNvdXJjZUlkLFxyXG4gICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxyXG4gICAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UucmV0cmlldmUoY29udGV4dCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgIHN1Y2Nlc3NOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgIGVycm9yTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+mihueUqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hDbGFpbVN1Ym1pdCh0YXNrczogVGFza0VudGl0eVtdKSB7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxTdWJtaXRSZXN1bHQ+KG51bGwpO1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgc3VjY2Vzc051bSA9IDA7XHJcbiAgICAgIGxldCBlcnJvck51bSA9IDA7XHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmNsYWltKHRhc2suc291cmNlSWQsIHRoaXMuY29tbWVudCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICAgIHN1Y2Nlc3NOdW0rKztcclxuICAgICAgICAgIGlmIChzdWNjZXNzTnVtICsgZXJyb3JOdW0gPT0gdGFza3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgICAgc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgIGVycm9yTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCYXRjaFN1Ym1pdEluZm8oc3VjY2Vzc051bSwgMCwgZXJyb3JOdW0sIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJuemHj+WPlua2iOmihueUqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmF0Y2hVbmNsYWltU3VibWl0KHRhc2tzOiBUYXNrRW50aXR5W10pIHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN1Ym1pdFJlc3VsdD4obnVsbCk7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBzdWNjZXNzTnVtID0gMDtcclxuICAgICAgbGV0IGVycm9yTnVtID0gMDtcclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UudW5DbGFpbSh0YXNrLnNvdXJjZUlkLCB0aGlzLmNvbW1lbnQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICBzdWNjZXNzTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICBlcnJvck51bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmibnph4/np7vkuqRcclxuICAgKiBAcGFyYW0gdGFza3Mg5om56YeP5Lu75Yqh5YiX6KGoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiYXRjaFRyYW5zZmVyU3VibWl0KHRhc2tzOiBUYXNrRW50aXR5W10pOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3VibWl0UmVzdWx0PihudWxsKTtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMuY29tbWVudCkgPiB0aGlzLk1BWF9DT01NRU5UX0xFTkdUSCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suY29tbWVudFRvb0xvbmcnKSk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHN1Y2Nlc3NOdW0gPSAwO1xyXG4gICAgICBsZXQgZXJyb3JOdW0gPSAwO1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICAgIHdvcmtJdGVtSWQ6IHRhc2suc291cmNlSWQsXHJcbiAgICAgICAgICBhc3NpZ25lZTogdGhpcy5zZWxlY3RlZFVzZXJzWzBdLFxyXG4gICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxyXG4gICAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLnRyYW5zZmVyKGNvbnRleHQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICBzdWNjZXNzTnVtKys7XHJcbiAgICAgICAgICBpZiAoc3VjY2Vzc051bSArIGVycm9yTnVtID09IHRhc2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtLCAwLCBlcnJvck51bSwgMCk7XHJcbiAgICAgICAgICAgIHN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICBlcnJvck51bSsrO1xyXG4gICAgICAgICAgaWYgKHN1Y2Nlc3NOdW0gKyBlcnJvck51bSA9PSB0YXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93QmF0Y2hTdWJtaXRJbmZvKHN1Y2Nlc3NOdW0sIDAsIGVycm9yTnVtLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5om56YeP5o+Q5Lqk5o+Q56S65L+h5oGvXHJcbiAgICogQHBhcmFtIHN1Y2Nlc3NOdW0g5oiQ5Yqf5p2h5pWwXHJcbiAgICogQHBhcmFtIGZhaWxlZE51bSDpnIDopoHkuqTkupLnmoTmnaHmlbBcclxuICAgKiBAcGFyYW0gZXJyb3JOdW0g5omn6KGM5oql6ZSZ55qE5p2h5pWwXHJcbiAgICogQHBhcmFtIHZlcmlmeVRhc2tzTnVtIOmcgOimgeaVsOWtl+etvuWQjeeahOadoeaVsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd0JhdGNoU3VibWl0SW5mbyhzdWNjZXNzTnVtOiBudW1iZXIsIGZhaWxlZE51bTogbnVtYmVyLCBlcnJvck51bTogbnVtYmVyLCB2ZXJpZnlUYXNrc051bTogbnVtYmVyKSB7XHJcbiAgICBsZXQgbWVzc2FnZSA9ICcnO1xyXG4gICAgaWYgKHN1Y2Nlc3NOdW0gJiYgIWZhaWxlZE51bSAmJiAhZXJyb3JOdW0gJiYgIXZlcmlmeVRhc2tzTnVtKSB7Ly8g5om56YeP5YWo6YOo5oiQ5YqfXHJcbiAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgfSBlbHNlIHsvLyDpnZ7lhajpg6jmiJDlip9cclxuICAgICAgc3VjY2Vzc051bSAmJiAobWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5zdWNjZXNzJykgKyBg44CQJHtzdWNjZXNzTnVtfeOAkWAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5yb3cnKSk7XHJcbiAgICAgIGVycm9yTnVtICYmIChtZXNzYWdlICs9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LmVycm9yJykgKyBg44CQJHtlcnJvck51bX3jgJFgICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQucm93JykpO1xyXG4gICAgICBmYWlsZWROdW0gJiYgKG1lc3NhZ2UgKz0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQuZmFpbGVkJykgKyBg44CQJHtmYWlsZWROdW1944CRYCArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnJvdycpKTtcclxuICAgICAgdmVyaWZ5VGFza3NOdW0gJiYgKG1lc3NhZ2UgKz0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnYmF0Y2hTdWJtaXQudmFsaWRhdGlvbkZhaWxlZCcpICsgYOOAkCR7dmVyaWZ5VGFza3NOdW1944CRYCArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2JhdGNoU3VibWl0LnJvdycpKTtcclxuICAgICAgbWVzc2FnZSArPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdiYXRjaFN1Ym1pdC5zaW5nbGUnKTtcclxuICAgICAgdGhpcy5tZXNzYWdlLnNob3coJ3dhcm5pbmcnLCBtZXNzYWdlLCB7IHNhZmVIdG1sOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhlY3V0ZUJhdGNoRXZlbnQoZXZlbnRzOiBBY3Rpb25FdmVudFtdLCBlbnRpdGllczogQXJyYXk8VGFza0VudGl0eT4sIGFjdGlvbjogVGFza0FjdGlvbiwgaGFuZGxlcjogYW55LCByZXN1bHQ/OiBUYXNrRXZlbnRSZXN1bHQpIHtcclxuICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzLmxlbmd0aCA+IDAgJiYgZW50aXRpZXMgJiYgZW50aXRpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZXZlbnQuZXZlbnRJbXBsLnNwbGl0KCcjJylbMF07XHJcbiAgICAgICAgY29uc3QgZnVuYyA9IGV2ZW50LmV2ZW50SW1wbC5zcGxpdCgnIycpWzFdO1xyXG4gICAgICAgIFN5c3RlbS5pbXBvcnQodXJsICsgJz92PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLnRoZW4oKG1vZHVsZUZhY3RvcmllczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZUZhY3Rvcnk6IGFueSA9IE9iamVjdC52YWx1ZXMobW9kdWxlRmFjdG9yaWVzKVswXTtcclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlUmVmID0gbW9kdWxlRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQ6IFRhc2tFdmVudENvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICAgIHRhc2tMaXN0OiBlbnRpdGllcyxcclxuICAgICAgICAgICAgICBvcmlnaW46ICdUYXNrQ2VudGVyJyxcclxuICAgICAgICAgICAgICBwcmVFdmVudFJlc3VsdDogcmVzdWx0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vZHVsZVJlZi5pbnN0YW5jZVtmdW5jXS5hcHBseShtb2R1bGVSZWYuaW5zdGFuY2UsIFtjb250ZXh0XSkuc3Vic2NyaWJlKChyZTogVGFza0V2ZW50UmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlICYmIHJlLnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQmF0Y2hFdmVudChldmVudHMsIGVudGl0aWVzLCBhY3Rpb24sIGhhbmRsZXIsIHJlKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcihyZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhhbmRsZXIocmVzdWx0KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGFuZGxlcihyZXN1bHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3NpZ25TaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4ge1xyXG4gICAgbGV0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgc2ltdWxhdGVTdWJqZWN0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgdGhpcy5pZkFzc2lnblVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgdGhpcy5lbmFibGVQcmlvcml0eSA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIH1cclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0QXNzaWduZWVJbmZvKHRoaXMud29ya0l0ZW1JZCkuc3Vic2NyaWJlKChpbmZvOiBGbG93Tm9kZUluZm8pID0+IHtcclxuICAgICAgdGhpcy5hc3NpZ25JbmZvcyA9IFt7XHJcbiAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IGluZm8uc2VsZWN0ZWRBc3NpZ25lZXMsXHJcbiAgICAgICAgYXNzaWduZWVJbmZvOiBpbmZvLmFzc2lnbmVlSW5mbyxcclxuICAgICAgICBhc3NpZ25lZXM6IGluZm8uc2VsZWN0ZWRBc3NpZ25lZXMubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH07IH0pLFxyXG4gICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbk5hbWU6IGluZm8uYWN0aXZpdHlEZWZpbml0aW9uTmFtZSxcclxuICAgICAgICBhY3Rpdml0eURlZmluaXRpb25JZDogaW5mby5hY3Rpdml0eURlZmluaXRpb25JZCxcclxuICAgICAgICBkZXBlbmRlbmN5OiBpbmZvLmRlcGVuZGVuY3ksXHJcbiAgICAgICAgYW5vbnltb3VzOiBpbmZvLmFub255bW91cyxcclxuICAgICAgICBhbm9ueW1vdXNUZXh0OiBpbmZvLmFub255bW91c1RleHQsXHJcbiAgICAgICAgcmVzb2x2ZWQ6IGluZm8ucmVzb2x2ZWQsXHJcbiAgICAgIH1dO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QuZGlhbG9nSGVpZ2h0ID0gdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSB0cnVlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IHRydWU7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmZXJTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4gey8vIOenu+S6pFxyXG4gICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucmVjZWl2ZXInKTsvL+aOpeaUtuS6uuWRmFxyXG4gICAgdGhpcy5zaW5nbGVTZWxlY3QgPSB0cnVlO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgdGhpcy5lbmFibGVQcmlvcml0eSA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmdldE9yZ2FuaXphdGlvblNjb3BlKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduRnJvbnRTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4gey8vIOW+geivolxyXG4gICAgdGhpcy5pZlNlbGVjdFVzZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxlY3RVc2VyVGV4dCA9IHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnBlcnNvbicpO1xyXG4gICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgdGhpcy5lbmFibGVQcmlvcml0eSA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmdldE9yZ2FuaXphdGlvblNjb3BlKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduU2ltdWxhdGUoKTogT2JzZXJ2YWJsZTxTaW11bGF0ZVN1YmplY3Q+IHsvLyDliqDnrb5cclxuICAgIGxldCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGVTdWJqZWN0PigpO1xyXG4gICAgbGV0IHNpbXVsYXRlU3ViamVjdCA9IG5ldyBTaW11bGF0ZVN1YmplY3QoKTtcclxuICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgIHRoaXMuc2VsZWN0VXNlclRleHQgPSB0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5wZXJzb24nKTtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSAqIDI7XHJcbiAgICB0aGlzLmVuYWJsZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRhc2sucHJpb3JpdHkpIHtcclxuICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgKz0gdGhpcy5kaWFsb2dIZWlnaHRCYXNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy50YXNrU2VydmljZS5nZXRBZGhvY0NvbmZpZyh0aGlzLndvcmtJdGVtSWQpLnN1YnNjcmliZSgocmVzcG9uc2U6IEFkZFNpZ25TaW11bGF0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5hZGRTaWduLnNob3dTaWduVG9TaWduID0gcmVzcG9uc2Uuc2hvd1NpZ25Ub1NpZ247XHJcbiAgICAgIHRoaXMuYWRkU2lnbi5vcmlnaW5NdWx0aUluc3RUeXBlID0gcmVzcG9uc2UubXVsdGlJbnN0YW5jZVR5cGU7XHJcbiAgICAgIGlmIChyZXNwb25zZS5vcmdhbml6YXRpb24pIHtcclxuICAgICAgICB0aGlzLmZpbHRlci5vcmdJZCA9IHJlc3BvbnNlLm9yZ2FuaXphdGlvbi5pZDtcclxuICAgICAgICB0aGlzLmZpbHRlci53aXRoQWxsT3JnID0gcmVzcG9uc2Uub3JnYW5pemF0aW9uLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgfVxyXG4gICAgICBzaW11bGF0ZVN1YmplY3QuZGlhbG9nSGVpZ2h0ID0gdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5zaG93RGlhbG9nID0gdHJ1ZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IHRydWU7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3Quc2hvd0RpYWxvZyA9IGZhbHNlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QucmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSlcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3RpZnlTaW11bGF0ZSgpOiBPYnNlcnZhYmxlPFNpbXVsYXRlU3ViamVjdD4gey8v55+l5LyaXHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IHRydWU7XHJcbiAgICB0aGlzLnNlbGVjdFVzZXJUZXh0ID0gdGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucGVyc29uJyk7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICB0aGlzLnNpbmdsZVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5lbmFibGVQcmlvcml0eSA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50YXNrLnByaW9yaXR5KSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmdldE9yZ2FuaXphdGlvblNjb3BlKCk7XHJcbiAgfVxyXG5cclxuICAvL+mihOino+aekOe7hOe7h+OAgeWAmemAieS6uuiMg+WbtFxyXG4gIHByaXZhdGUgZ2V0T3JnYW5pemF0aW9uU2NvcGUoKTogT2JzZXJ2YWJsZTxTaW11bGF0ZVN1YmplY3Q+IHtcclxuICAgIGxldCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGVTdWJqZWN0PigpO1xyXG4gICAgbGV0IHNpbXVsYXRlU3ViamVjdCA9IG5ldyBTaW11bGF0ZVN1YmplY3QoKTtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0T3JnYW5pemF0aW9uU2NvcGUodGhpcy53b3JrSXRlbUlkLCB0aGlzLmFjdGlvbkVudGl0eS5jb2RlKS5zdWJzY3JpYmUoKG9yZ0xpc3Q6IE9yZ2FuaXphdGlvblNjb3BlW10pID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICBpZiAob3JnTGlzdC5sZW5ndGgpIHsvLyDlhajlkZjkvJrov5Tlm57nqbrmlbDnu4RcclxuICAgICAgICB0aGlzLmZpbHRlci5vcmdJZCA9IG9yZ0xpc3RbMF0uaWQ7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIud2l0aEFsbE9yZyA9IG9yZ0xpc3RbMF0uaW5jbHVkZUNoaWxkcmVuO1xyXG4gICAgICB9XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5kaWFsb2dIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodDtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSB0cnVlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QucmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5zaG93RGlhbG9nID0gZmFsc2U7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YKs5Yqe5qih5oufXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cmdlSGFuZGxlU2ltdWxhdGUoKTogT2JzZXJ2YWJsZTxTaW11bGF0ZVN1YmplY3Q+IHtcclxuICAgIGxldCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGVTdWJqZWN0PigpO1xyXG4gICAgbGV0IHNpbXVsYXRlU3ViamVjdCA9IG5ldyBTaW11bGF0ZVN1YmplY3QoKTtcclxuICAgIHRoaXMuaWZTZWxlY3ROb2RlID0gZmFsc2U7XHJcbiAgICB0aGlzLmlmU2VsZWN0VXNlciA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZkFzc2lnblVzZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuaWZVcmdlVHlwZSA9IHRydWU7XHJcbiAgICB0aGlzLmNvbW1lbnRQbGFjZUhvbGRlciA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sudXJnZUNvbW1lbnQnKTtcclxuICAgIHRoaXMuc2hvd0NvbW1vbkNvbW1lbnQgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd0F0dGFjaG1lbnQgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd1VyZ2VNZXNzYWdlU3ViamVjdCA9IHRydWU7XHJcbiAgICB0aGlzLnNob3dTaWduID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2UgKiAyO1xyXG4gICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgbGV0IGNvbnRleHQgPSBuZXcgVXJnZUhhbmRsZVNpbXVsYXRlQ29udGV4dCgpO1xyXG4gICAgY29udGV4dC5wcm9jSW5zdElkID0gdGhpcy5wcm9jZXNzSW5zdGFuY2VJZDtcclxuICAgIHRoaXMudGFza1NlcnZpY2UudXJnZUhhbmRsZVNpbXVsYXRlKGNvbnRleHQpLnN1YnNjcmliZSgocmU6IFVyZ2VIYW5kbGVSZXNwb25zZSkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMudXJnZUhhbmRsZVJlc3BvbnNlID0gcmU7XHJcbiAgICAgIGlmIChyZSAmJiByZS51cmdlVXNlcnMgJiYgcmUudXJnZVVzZXJzLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMudXJnZU1lc3NhZ2VTdWJqZWN0ID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS51cmdlTWVzc2FnZVN1YmplY3Q7XHJcbiAgICAgICAgdGhpcy51cmdlTWVzc2FnZUNvbnRlbnQgPSByZS51cmdlVXNlcnNbMF0udXJnZUluZm9zWzBdLnVyZ2VNZXNzYWdlQ29udGVudDtcclxuICAgICAgICB0aGlzLnN1YmplY3RFZGl0YWJsZSA9IHJlLnVyZ2VVc2Vyc1swXS51cmdlSW5mb3NbMF0uc3ViamVjdEVkaXRhYmxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVkaXRhYmxlID0gcmUudXJnZVVzZXJzWzBdLnVyZ2VJbmZvc1swXS5jb250ZW50RWRpdGFibGU7XHJcbiAgICAgICAgdGhpcy5hZGRSZW1pbmRlciA9IHJlLnVyZ2VVc2Vyc1swXS51cmdlSW5mb3NbMF0uYWRkUmVtaW5kZXI7XHJcbiAgICAgICAgbGV0IHVyZ2VVc2VycyA9IHJlLnVyZ2VVc2VycztcclxuICAgICAgICBsZXQgYXNzaWduSW5mbyA9IG5ldyBBc3NpZ25lZUluZm8oKTtcclxuICAgICAgICB1cmdlVXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgIGlmICh1c2VyLmFub255bW91c1RleHQpIHtcclxuICAgICAgICAgICAgdXNlci5uYW1lID0gdXNlci5hbm9ueW1vdXNUZXh0O1xyXG4gICAgICAgICAgICB1c2VyLmNvZGUgPSAnJztcclxuICAgICAgICAgICAgdXNlci5vcmdOYW1lID0gJyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBhc3NpZ25JbmZvLmFzc2lnbmVlVXNlcnMgPSB1cmdlVXNlcnM7XHJcbiAgICAgICAgYXNzaWduSW5mby5zZWxlY3RBc3NpZ25lZSA9IHVyZ2VVc2Vycy5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIGFzc2lnbkluZm8ubXVsdGlTZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYXNzaWduSW5mb3NbMF0uYXNzaWduZWVJbmZvID0gYXNzaWduSW5mbztcclxuICAgICAgICB0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcyA9IHVyZ2VVc2Vycy5sZW5ndGggPT0gMSA/IHVyZ2VVc2VycyA6IFtdO1xyXG4gICAgICAgIHNpbXVsYXRlU3ViamVjdC5zaG93RGlhbG9nID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlVXNlcnMnKSk7XHJcbiAgICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBzaW11bGF0ZVN1YmplY3QuZGlhbG9nSGVpZ2h0ID0gdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSB0cnVlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoc2ltdWxhdGVTdWJqZWN0KTtcclxuICAgIH0pXHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpooTop6PmnpBcclxuICAgKiDpgJrov4fjgIHpqbPlm57jgIHph43mlrDmj5DkuqTjgIHlhbbku5boh6rlrprkuYnliqjkvZxcclxuICAgKi9cclxuICBwcml2YXRlIGNvbXBsZXRlU2ltdWxhdGUoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxTaW11bGF0ZVN1YmplY3Q+KCk7XHJcbiAgICBsZXQgc2ltdWxhdGVTdWJqZWN0ID0gbmV3IFNpbXVsYXRlU3ViamVjdCgpO1xyXG4gICAgaWYgKHRoaXMuYWN0aW9uRW50aXR5LnBhcmFtZXRlcnMgJiYgdGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycy5sZW5ndGgpIHsvLyDmmK/lkKblhYHorrjliqDnrb5cclxuICAgICAgdGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycy5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgaWYgKHAuY29kZSA9PT0gJ0FkZFNpZ25CZWhpbmRBYmxlJyAmJiBwLnZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgIHRoaXMuaWZTZWxlY3RVc2VyID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0VXNlclRleHQgPSB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmFkZFNpZ24nKSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2sucGVyc29uJyk7XHJcbiAgICAgICAgICB0aGlzLmRpYWxvZ0hlaWdodCArPSB0aGlzLmRpYWxvZ0hlaWdodEJhc2U7XHJcbiAgICAgICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgICAgICAvL+iOt+WPluWKoOetvuiMg+WbtFxyXG4gICAgICAgICAgdGhpcy50YXNrU2VydmljZS5nZXRPcmdhbml6YXRpb25TY29wZSh0aGlzLndvcmtJdGVtSWQsICdBZGRTaWduQmVoaW5kJykuc3Vic2NyaWJlKChvcmdMaXN0OiBPcmdhbml6YXRpb25TY29wZVtdKSA9PiB7XHJcbiAgICAgICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYgKG9yZ0xpc3QubGVuZ3RoKSB7Ly8g5YWo5ZGY5Lya6L+U5Zue56m65pWw57uEXHJcbiAgICAgICAgICAgICAgdGhpcy5maWx0ZXIub3JnSWQgPSBvcmdMaXN0WzBdLmlkO1xyXG4gICAgICAgICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSBvcmdMaXN0WzBdLmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8v6amz5Zue6IqC54K55qCH562+5ZCN56ewXHJcbiAgICBpZiAodGhpcy5hY3Rpb25FbnRpdHkuY29kZSA9PT0gJ0JhY2snKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0Tm9kZVRleHQgPSB0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5iYWNrTm9kZVRleHQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IENvbXBsZXRlQ29udGV4dCgpO1xyXG4gICAgY29udGV4dC53b3JrSXRlbUlkID0gdGhpcy53b3JrSXRlbUlkO1xyXG4gICAgY29udGV4dC5jb25jbHVzaW9uVmFsdWUgPSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlO1xyXG5cclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuY29tcGxldGVTaW11bGF0ZShjb250ZXh0KS5zdWJzY3JpYmUoKHJlc3BvbnNlOiBTaW11bGF0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5jbGVhclNpbXVsYXRlUmVzdWx0KCk7XHJcbiAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgICAgaWYgKHRoaXMudGFzay5wcmlvcml0eSkge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlUHJpb3JpdHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbGVjdFRhcmdldEFibGUgPSByZXNwb25zZS5zZWxlY3RUYXJnZXRBYmxlO1xyXG4gICAgICBpZiAocmVzcG9uc2UuZHluYW1pY0JhY2tXYXJkUnVsZUNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuc2hvd0JhY2tXYXJkQ29uZmlnLmR5bmFtaWNCYWNrV2FyZFJ1bGVBYmxlID0gcmVzcG9uc2UuZHluYW1pY0JhY2tXYXJkUnVsZUNvbmZpZy5keW5hbWljQmFja1dhcmRSdWxlQWJsZTtcclxuICAgICAgICB0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5kaXNwbGF5UGxhY2Vob2xkZXIgPSByZXNwb25zZS5keW5hbWljQmFja1dhcmRSdWxlQ29uZmlnLnJlc3VibWl0RWZmZWN0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghcmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzLmxlbmd0aCkgey8vIOaooeaLn+i/lOWbnui3r+W+hOS4uuepuuaXtlxyXG4gICAgICAgIHRoaXMuaWZTZWxlY3ROb2RlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pZkFzc2lnblVzZXIgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHsvLyDmqKHmi5/ov5Tlm57kuobot6/lvoRcclxuICAgICAgICB0aGlzLmlmU2VsZWN0Tm9kZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pZkFzc2lnblVzZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ICs9IHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSAqIDI7XHJcbiAgICAgICAgdGhpcy5kZXN0Tm9kZXMgPSByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMgJiYgcmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzLm1hcChwYXRoID0+ICh7XHJcbiAgICAgICAgICBpZDogcGF0aC5ub2RlSW5mb0xpc3QubWFwKG5vZGUgPT4gbm9kZS5hY3Rpdml0eURlZmluaXRpb25JZCkuam9pbign77yMJyksXHJcbiAgICAgICAgICBuYW1lOiBwYXRoLm5vZGVJbmZvTGlzdC5tYXAobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUpLmpvaW4oJ++8jCcpXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIOWkhOeQhum7mOiupOWIhuaUr++8jOaXoOm7mOiupOWIhuaUr+i/lOWbni0xXHJcbiAgICAgICAgbGV0IGRlZmF1bHRJbmRleCA9IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRocy5maW5kSW5kZXgoYSA9PiBhLmRlZmF1bHQpO1xyXG4gICAgICAgIC8v5rKh5pyJ6buY6K6k5YiG5pSv77yM5LiU5LiN5YWB6K646YCJ5oup55uu5qCH6IqC54K55pe277yM5Y+W5YW25Lit5LiA5Liqbm9kZeWxleekuu+8iOWtkOa1geeoi+WPguS4juiAheS4uuepuuaDheWGteetie+8iVxyXG4gICAgICAgIGlmIChkZWZhdWx0SW5kZXggPCAwICYmICFyZXNwb25zZS5zZWxlY3RUYXJnZXRBYmxlKSB7XHJcbiAgICAgICAgICBkZWZhdWx0SW5kZXggPSByZXNwb25zZS5zaW11bGF0aW9uUGF0aHMuZmluZEluZGV4KGEgPT4gYS5ub2RlSW5mb0xpc3QgJiYgYS5ub2RlSW5mb0xpc3QubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWZhdWx0SW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9IHRoaXMuZGVzdE5vZGVzW2RlZmF1bHRJbmRleF0uaWQ7XHJcbiAgICAgICAgICB0aGlzLm5vZGVEZWZhdWx0VmFsdWUgPSB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWUuaW5kZXhPZign77yMJykgPiAtMSA/IHJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1tkZWZhdWx0SW5kZXhdLm5hbWUgOiB0aGlzLmRlc3ROb2Rlc1tkZWZhdWx0SW5kZXhdLm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnNldEFzc2lnbkluZm8ocmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzW2RlZmF1bHRJbmRleF0ubm9kZUluZm9MaXN0KTtcclxuICAgICAgICAgIGlmIChyZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGVmYXVsdEluZGV4XS5pZC5zdGFydHNXaXRoKCdFbmRFdmVudCcpKSB7Ly/kuIvkuIDnjq/oioLkuLrnu5PmnZ/ml7bvvIzkuI3mmL7npLrlip7nkIbkurrlkZjvvIzlvLnmoYbpq5jluqbnvKnlsI9cclxuICAgICAgICAgICAgdGhpcy5kaWFsb2dIZWlnaHQgPSAzNDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v6K6+572u5YW25LuW6IqC54K56YCJ5Lq6XHJcbiAgICAgIHRoaXMuc2V0T3RoZXJBc3NpZ25JbmZvKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gdGhpcy5zaG93QmFja1dhcmRDb25maWcuZHluYW1pY0JhY2tXYXJkUnVsZUFibGUgPyB0aGlzLmRpYWxvZ0hlaWdodCArIHRoaXMuZGlhbG9nSGVpZ2h0QmFzZSA6IHRoaXMuZGlhbG9nSGVpZ2h0O1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QucmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSB0cnVlO1xyXG4gICAgICBzaW11bGF0ZVN1YmplY3QuZGlhbG9nSGVpZ2h0ID0gdGhpcy5kaWFsb2dIZWlnaHQ7XHJcbiAgICAgIHN1YmplY3QubmV4dChzaW11bGF0ZVN1YmplY3QpO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHNpbXVsYXRlU3ViamVjdC5yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgc2ltdWxhdGVTdWJqZWN0LnNob3dEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgc3ViamVjdC5uZXh0KHNpbXVsYXRlU3ViamVjdCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4heepuumihOino+aekOe7k+aenFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2xlYXJTaW11bGF0ZVJlc3VsdCgpIHtcclxuICAgIHRoaXMuYXNzaWduSW5mb3MgPSBbey8vIOmHjeaWsOmihOino+aekOaXtua4heepulxyXG4gICAgICBzZWxlY3RlZEFzc2lnbmVlczogW10sXHJcbiAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgYXNzaWduZWVzOiBbXSxcclxuICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogJycsXHJcbiAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiAnJyxcclxuICAgICAgZGVwZW5kZW5jeTogJycsXHJcbiAgICAgIGFub255bW91czogZmFsc2UsXHJcbiAgICAgIGFub255bW91c1RleHQ6ICcnLFxyXG4gICAgICByZXNvbHZlZDogZmFsc2UsXHJcbiAgICB9XTtcclxuICAgIHRoaXMuZGVzdE5vZGVzID0gW107IC8vIOmHjeaWsOmihOino+aekOaXtua4heepulxyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9ICcnO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDorr7nva7lvZPliY3mjIfmtL7kv6Hmga/luK7liqnlj4LmlbBcclxuICAgKi9cclxuICBwcml2YXRlIHNldEFzc2lnbkluZm8obm9kZUluZm9MaXN0OiBGbG93Tm9kZUluZm9bXSkge1xyXG4gICAgdGhpcy5hc3NpZ25JbmZvcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZC5zcGxpdCgn77yMJykuZm9yRWFjaChub2RlSWQgPT4ge1xyXG4gICAgICBjb25zdCBub2RlID0gbm9kZUluZm9MaXN0LmZpbmQobm9kZSA9PiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbklkID09PSBub2RlSWQpO1xyXG4gICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgIHRoaXMuYXNzaWduSW5mb3MucHVzaCh7XHJcbiAgICAgICAgICBzZWxlY3RlZEFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcyxcclxuICAgICAgICAgIGFzc2lnbmVlSW5mbzogbm9kZS5hc3NpZ25lZUluZm8sXHJcbiAgICAgICAgICBhc3NpZ25lZXM6IG5vZGUuc2VsZWN0ZWRBc3NpZ25lZXMubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH07IH0pLFxyXG4gICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogbm9kZS5hY3Rpdml0eURlZmluaXRpb25OYW1lLFxyXG4gICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uSWQ6IG5vZGUuYWN0aXZpdHlEZWZpbml0aW9uSWQsXHJcbiAgICAgICAgICBkZXBlbmRlbmN5OiBub2RlLmRlcGVuZGVuY3ksXHJcbiAgICAgICAgICBhbm9ueW1vdXM6IG5vZGUuYW5vbnltb3VzLFxyXG4gICAgICAgICAgYW5vbnltb3VzVGV4dDogbm9kZS5hbm9ueW1vdXNUZXh0LFxyXG4gICAgICAgICAgcmVzb2x2ZWQ6IG5vZGUucmVzb2x2ZWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25JbmZvcy5wdXNoKHtcclxuICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiBbXSxcclxuICAgICAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgICAgIGFzc2lnbmVlczogW10sXHJcbiAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiAnJyxcclxuICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiAnJyxcclxuICAgICAgICAgIGRlcGVuZGVuY3k6ICcnLFxyXG4gICAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcclxuICAgICAgICAgIGFub255bW91c1RleHQ6ICcnLFxyXG4gICAgICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWFtuS7luiKgueCueaMh+a0vlxyXG4gICAqIEBwYXJhbSByZXNwb25zZSBcclxuICAgKi9cclxuICBwcml2YXRlIHNldE90aGVyQXNzaWduSW5mbyhyZXNwb25zZTogU2ltdWxhdGVSZXNwb25zZSkge1xyXG4gICAgdGhpcy5vdGhlckFzc2lnbkluZm9zID0gW107XHJcbiAgICBsZXQgdG1wT3RoZXJBc3NpZ25JbmZvcyA9IFtdO1xyXG4gICAgbGV0IG90aGVyQXNzaWduTm9kZXMgPSByZXNwb25zZS5vdGhlckFzc2lnbk5vZGVzO1xyXG4gICAgaWYgKG90aGVyQXNzaWduTm9kZXMgJiYgb3RoZXJBc3NpZ25Ob2Rlcy5sZW5ndGgpIHtcclxuICAgICAgb3RoZXJBc3NpZ25Ob2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgIHRtcE90aGVyQXNzaWduSW5mb3MucHVzaCh7XHJcbiAgICAgICAgICBzZWxlY3RlZEFzc2lnbmVlczogbm9kZS5zZWxlY3RlZEFzc2lnbmVlcyxcclxuICAgICAgICAgIGFzc2lnbmVlSW5mbzogbm9kZS5hc3NpZ25lZUluZm8sXHJcbiAgICAgICAgICBhc3NpZ25lZXM6IG5vZGUuc2VsZWN0ZWRBc3NpZ25lZXMubWFwKHVzZXIgPT4geyByZXR1cm4geyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lIH0gfSksXHJcbiAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25OYW1lOiBub2RlLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWUsXHJcbiAgICAgICAgICBhY3Rpdml0eURlZmluaXRpb25JZDogbm9kZS5hY3Rpdml0eURlZmluaXRpb25JZCxcclxuICAgICAgICAgIGRlcGVuZGVuY3k6IG5vZGUuZGVwZW5kZW5jeSxcclxuICAgICAgICAgIGFub255bW91czogbm9kZS5hbm9ueW1vdXMsXHJcbiAgICAgICAgICBhbm9ueW1vdXNUZXh0OiBub2RlLmFub255bW91c1RleHQsXHJcbiAgICAgICAgICByZXNvbHZlZDogbm9kZS5yZXNvbHZlZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5L+d5a2Y5pyA5Yid55qE5YW25LuW6IqC54K56YCJ5Lq6XHJcbiAgICAgIHRoaXMub3JpZ2luT3RoZXJBc3NpZ25JbmZvcyA9IFsuLi50bXBPdGhlckFzc2lnbkluZm9zXTtcclxuICAgICAgLy/lhbbku5boioLngrnkuI7kuIvkuIDoioLngrnljrvph41cclxuICAgICAgaWYgKHRoaXMuYXNzaWduSW5mb3MgJiYgdGhpcy5hc3NpZ25JbmZvcy5sZW5ndGgpIHtcclxuICAgICAgICB0bXBPdGhlckFzc2lnbkluZm9zID0gdG1wT3RoZXJBc3NpZ25JbmZvcy5maWx0ZXIoYSA9PiB0aGlzLmFzc2lnbkluZm9zLmZpbmRJbmRleChiID0+IGIuYWN0aXZpdHlEZWZpbml0aW9uSWQgPT0gYS5hY3Rpdml0eURlZmluaXRpb25JZCkgPCAwKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm90aGVyQXNzaWduSW5mb3MgPSB0bXBPdGhlckFzc2lnbkluZm9zO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6YCJ5a6M6IqC54K55ZCO77yM6YeN5paw6K6+572u5YW25LuW6IqC54K55oyH5rS+XHJcbiAgICogQHBhcmFtIHJlc3BvbnNlIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0T3RoZXJBc3NpZ25JbmZvQWdhaW4obm9kZUluZm9MaXN0OiBGbG93Tm9kZUluZm9bXSkge1xyXG4gICAgaWYgKG5vZGVJbmZvTGlzdCAmJiBub2RlSW5mb0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMub3RoZXJBc3NpZ25JbmZvcyA9IHRoaXMub3JpZ2luT3RoZXJBc3NpZ25JbmZvcy5maWx0ZXIoYSA9PiBub2RlSW5mb0xpc3QuZmluZEluZGV4KGIgPT4gYi5hY3Rpdml0eURlZmluaXRpb25JZCA9PSBhLmFjdGl2aXR5RGVmaW5pdGlvbklkKSA8IDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog54K55Ye756Gu5a6a5ZCO5pa55rOVXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3NpZ25TdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5hc3NpZ25JbmZvc1swXS5hc3NpZ25lZXMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLmFzc2lnbmVlLm5vQXNzaWduZWUnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0OiBBc3NpZ25QYXJhbWV0ZXIgPSB7XHJcbiAgICAgICAgd29ya0l0ZW1JZDogdGhpcy53b3JrSXRlbUlkLFxyXG4gICAgICAgIGFzc2lnbmVlSWRzOiB0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5tYXAodXNlciA9PiB1c2VyLmlkKSxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgcHJpb3JpdHk6IHRoaXMuc2VsZWN0ZWRQcmlvcml0eVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmFzc2lnbk5leHRVc2Vyc0J5V29ya0l0ZW1JZChjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnY3VlV29yZHMub3BlcmF0ZVN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5zdWJtaXRSZXN1bHQpO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xhaW1TdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5jbGFpbSh0aGlzLndvcmtJdGVtSWQsIHRoaXMuY29tbWVudCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1bkNsYWltU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UudW5DbGFpbSh0aGlzLndvcmtJdGVtSWQsIHRoaXMuY29tbWVudCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKSxcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJldHJpZXZlU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJldHJpZXZlQ29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UucmV0cmlldmUocmV0cmlldmVDb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyYW5zZmVyU3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFVzZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKSArIHRoaXMuc2VsZWN0VXNlclRleHQpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgYXNzaWduZWU6IHRoaXMuc2VsZWN0ZWRVc2Vyc1swXSxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgcHJpb3JpdHk6IHRoaXMuc2VsZWN0ZWRQcmlvcml0eVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnN1Ym1pdERpc2FibGUgPSB0cnVlOyAvLyDnpoHnlKjmj5DkuqTmjInpkq5cclxuICAgICAgdGhpcy50YXNrU2VydmljZS50cmFuc2Zlcihjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRoaXMuc3VibWl0UmVzdWx0KTtcclxuICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbW1lbnRTdWJtaXQoKSB7IC8vIOivhOiuulxyXG4gICAgaWYgKCF0aGlzLmNvbW1lbnQgfHwgdGhpcy5jb21tZW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmlucHV0T3BpbmlvbicpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LFxyXG4gICAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuY29tbWVudChjb250ZXh0KS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5hY3Rpb25FbnRpdHkubmFtZSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXRpYy5zdWNjZXNzJykpO1xyXG4gICAgICAgIHRoaXMuc3VibWl0UmVzdWx0LmlzQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmNvbW1lbnQgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkU2lnbkZyb250U3VibWl0KCkge1xyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFVzZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKSArIHRoaXMuc2VsZWN0VXNlclRleHQpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHtcclxuICAgICAgICB3b3JrSXRlbUlkOiB0aGlzLndvcmtJdGVtSWQsXHJcbiAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbkVudGl0eS5jb2RlLFxyXG4gICAgICAgIGFzc2lnbmVlczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcclxuICAgICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgICBwcmlvcml0eTogdGhpcy5zZWxlY3RlZFByaW9yaXR5XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuc3VibWl0RGlzYWJsZSA9IHRydWU7IC8vIOemgeeUqOaPkOS6pOaMiemSrlxyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLmFkZFNpZ24oY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0aGlzLnN1Ym1pdFJlc3VsdCk7XHJcbiAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTaWduU3VibWl0KCkgey8vIOWKoOetvuaPkOS6pFxyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFVzZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2suc2VsZWN0UGxhY2Vob2xkZXInKSArIHRoaXMuc2VsZWN0VXNlclRleHQpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHBheWxvYWQ6IEFkZFNpZ25QYXlsb2FkID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgY29uY2x1c2lvblZhbHVlOiBcIlBhc3NcIixcclxuICAgICAgICBzaWduQXNzaWduZWVzOiB0aGlzLnNlbGVjdGVkVXNlcnMsXHJcbiAgICAgICAgYWN0aW9uQ29kZTogXCJBZGRTaWduQmVoaW5kXCIsXHJcbiAgICAgICAgbXVsdGlJbnN0YW5jZVR5cGU6IHRoaXMuYWRkU2lnbi5zaG93TXVsdGlJbnN0YW5jZVR5cGUgPyB0aGlzLmFkZFNpZ24uY3VyTXVsdGlJbnN0VHlwZSA6IHRoaXMuYWRkU2lnbi5vcmlnaW5NdWx0aUluc3RUeXBlLFxyXG4gICAgICAgIGNvdW50ZXJTaWduUnVsZTogJ2FsbFBhc3MnLFxyXG4gICAgICAgIGNvbXBsZXRlZFJ1bGU6ICdhbGwnLFxyXG4gICAgICAgIGFsbG93U2lnblRvU2lnbjogdGhpcy5hZGRTaWduLmFsbG93U2lnblRvU0lnbixcclxuICAgICAgICBhY3Rpdml0eU5hbWU6ICcnLFxyXG4gICAgICAgIGFkZGVuZHVtOiB0aGlzLmFkZGVuZHVtLFxyXG4gICAgICAgIHByaW9yaXR5OiB0aGlzLnNlbGVjdGVkUHJpb3JpdHlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5hZGhvY0Fzc2lnbmVlKHBheWxvYWQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVhZFN1Ym1pdCgpIHsvL+W3sumYheaPkOS6pFxyXG4gICAgaWYgKHRoaXMudGFza1NlcnZpY2UuZ2V0Qnl0ZXNMZW5ndGgodGhpcy5jb21tZW50KSA+IHRoaXMuTUFYX0NPTU1FTlRfTEVOR1RIKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5jb21tZW50VG9vTG9uZycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQ6IFdvcmtJdGVtRXhlY3V0ZVBhcmFtID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgaGlkZUNvbW1lbnQ6IHRoaXMuaGlkZUNvbW1lbnRcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnJlYWRUYXNrKGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm90aWZ5U3VibWl0KCkgey8v55+l5Lya5o+Q5LqkXHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpICsgdGhpcy5zZWxlY3RVc2VyVGV4dCk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjb250ZXh0OiBDb3VudGVyU2lnblBhcmFtID0ge1xyXG4gICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgICAgYWRkZW5kdW06IHRoaXMuYWRkZW5kdW0sXHJcbiAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbkVudGl0eS5jb2RlLFxyXG4gICAgICAgIGFzc2lnbmVlczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICAgIHByaW9yaXR5OiB0aGlzLnNlbGVjdGVkUHJpb3JpdHlcclxuICAgICAgfTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5hZGRTaWduKGNvbnRleHQpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMudGFza1NlcnZpY2UuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgqzlip7mj5DkuqRcclxuICAgKi9cclxuICBwcml2YXRlIHVyZ2VIYW5kbGVTdWJtaXQoKSB7XHJcbiAgICBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy51cmdlSGFuZGxlUmVzcG9uc2UudXJnZVVzZXJzIHx8ICF0aGlzLnVyZ2VIYW5kbGVSZXNwb25zZS51cmdlVXNlcnMubGVuZ3RoKSB7Ly/msqHmnInnrKblkIjmnaHku7bnmoTlgqzlip7nlKjmiLdcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLm5vVXJnZVVzZXJzJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5hc3NpZ25JbmZvc1swXS5hc3NpZ25lZXMubGVuZ3RoKSB7Ly/msqHmnInpgInkurpcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnNlbGVjdFBsYWNlaG9sZGVyJykgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLnJlY2VpdmVyJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy51cmdlSGFuZGxlQ29tcG9uZW50LnVyZ2VNZXNzYWdlU3ViamVjdCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3Rhc2subm9VcmdlU3ViamVjdCcpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMudXJnZUhhbmRsZUNvbXBvbmVudC51cmdlTWVzc2FnZUNvbnRlbnQpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLm5vVXJnZUNvbnRlbnQnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgY29udGV4dCA9IG5ldyBVcmdlSGFuZGxlQ29udGV4dCgpO1xyXG4gICAgICBjb250ZXh0LnByb2NJbnN0SWQgPSB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkO1xyXG4gICAgICBjb250ZXh0LnVyZ2VVc2VycyA9IHRoaXMudXJnZUhhbmRsZVJlc3BvbnNlLnVyZ2VVc2Vycy5maWx0ZXIoYSA9PiB0aGlzLmFzc2lnbkluZm9zWzBdLmFzc2lnbmVlcy5zb21lKGIgPT4gYi5pZCA9PSBhLmlkKSk7XHJcbiAgICAgIGNvbnRleHQudXJnZU1lc3NhZ2VTdWJqZWN0ID0gdGhpcy51cmdlSGFuZGxlQ29tcG9uZW50LnVyZ2VNZXNzYWdlU3ViamVjdDtcclxuICAgICAgY29udGV4dC51cmdlTWVzc2FnZUNvbnRlbnQgPSB0aGlzLnVyZ2VIYW5kbGVDb21wb25lbnQudXJnZU1lc3NhZ2VDb250ZW50O1xyXG4gICAgICBjb250ZXh0LmFkZFJlbWluZGVyID0gdGhpcy5hZGRSZW1pbmRlcjtcclxuICAgICAgY29uc3QgbG9hZCA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICB0aGlzLnRhc2tTZXJ2aWNlLnVyZ2VIYW5kbGUoY29udGV4dCkuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogdHJ1ZSB9KTtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICB0aGlzLnRhc2tTZXJ2aWNlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlj5bmtojlvoHor6Lmj5DkuqRcclxuICAgKi9cclxuICBwcml2YXRlIGNhbmNlbENvbnN1bHRTdWJtaXQoKSB7XHJcbiAgICBsZXQgY29udGV4dCA9IG5ldyBXb3JrSXRlbUV4ZWN1dGVQYXJhbSgpO1xyXG4gICAgY29udGV4dC53b3JrSXRlbUlkID0gdGhpcy53b3JrSXRlbUlkO1xyXG4gICAgY29udGV4dC5jb21tZW50ID0gdGhpcy5jb21tZW50O1xyXG4gICAgY29udGV4dC5hZGRlbmR1bSA9IHRoaXMuYWRkZW5kdW07XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmNhbmNlbENvbnN1bHQoY29udGV4dCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IHRydWUsIGlzQ2xvc2U6IHRydWUgfSk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29tcGxldGVTdWJtaXQoKSB7Ly8g6YCa6L+H44CB6amz5Zue44CB5YW25LuW56ys5LiJ5pa55Yqo5L2cXHJcbiAgICBjb25zdCBjb250ZXh0OiBDb21wbGV0ZUNvbnRleHQgPSB7XHJcbiAgICAgIHdvcmtJdGVtSWQ6IHRoaXMud29ya0l0ZW1JZCxcclxuICAgICAgY29uY2x1c2lvblZhbHVlOiB0aGlzLmFjdGlvbkVudGl0eS5jb2RlLFxyXG4gICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsXHJcbiAgICAgIHNpZ25Bc3NpZ25lZXM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgbmV4dEZsb3dOb2RlczogW10sXHJcbiAgICAgIG90aGVyQXNzaWduTm9kZXM6IFtdLFxyXG4gICAgICBhZGRlbmR1bTogdGhpcy5hZGRlbmR1bSxcclxuICAgICAgLy/liqjmgIHpqbPlm57op4TliJlcclxuICAgICAgZHluYW1pY0JhY2tXYXJkUnVsZTogdGhpcy5zaG93QmFja1dhcmRDb25maWcuZHluYW1pY0JhY2tXYXJkUnVsZUFibGUgPyB0aGlzLnNob3dCYWNrV2FyZENvbmZpZy5kaXNwbGF5UGxhY2Vob2xkZXIgOiAnJyxcclxuICAgICAgcHJpb3JpdHk6IHRoaXMuc2VsZWN0ZWRQcmlvcml0eVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoY29udGV4dC5zaWduQXNzaWduZWVzLmxlbmd0aCB8fCAhdGhpcy5yZXNwb25zZSB8fCAhdGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubGVuZ3RoKSB7Ly8g5Yqg562+IG9yIOS7v+ecn+i/lOWbnuS4uuepuu+8jOebtOaOpeW+gOS4i+i1sFxyXG4gICAgICB0aGlzLmNvbXBsZXRlVGFzayhjb250ZXh0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm9kZUlkKSB7Ly8g5Yqg562+5pe277yM6YCJ5oup5LiL5LiA546v6IqC6KKr56aB55So77yMZGVzdE5vZGVJZOS4unVuZGVmaW5lZFxyXG4gICAgICAgIGNvbnN0IG5leHRGbG93Tm9kZXM6IEZsb3dOb2RlSW5mb1tdID0gW107XHJcbiAgICAgICAgY29uc3Qgbm9kZXM6IHN0cmluZ1tdID0gdGhpcy5zZWxlY3RlZE5vZGVJZC5zcGxpdCgn77yMJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgbmV4dEZsb3dOb2RlOiBGbG93Tm9kZUluZm8gPSB7XHJcbiAgICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiBub2Rlc1tpXSxcclxuICAgICAgICAgICAgYWN0aXZpdHlEZWZpbml0aW9uTmFtZTogdGhpcy5hc3NpZ25JbmZvc1tpXS5hY3Rpdml0eURlZmluaXRpb25OYW1lLFxyXG4gICAgICAgICAgICBkZXBlbmRlbmN5OiB0aGlzLmFzc2lnbkluZm9zW2ldLmRlcGVuZGVuY3ksXHJcbiAgICAgICAgICAgIHNlbGVjdGVkQXNzaWduZWVzOiB0aGlzLmFzc2lnbkluZm9zW2ldLmFzc2lnbmVlSW5mbyA/IHRoaXMuYXNzaWduSW5mb3NbaV0uYXNzaWduZWVzIDogW10sXHJcbiAgICAgICAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBhbm9ueW1vdXM6IHRoaXMuYXNzaWduSW5mb3NbaV0uYW5vbnltb3VzLFxyXG4gICAgICAgICAgICBhbm9ueW1vdXNUZXh0OiB0aGlzLmFzc2lnbkluZm9zW2ldLmFub255bW91c1RleHRcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICAvL+iKgueCueaJvuS4jeWIsOS6uu+8jOS4lOW8guW4uOaPkOekuuaXtu+8jOW5tuihjOe9keWFs+aaguS4jeWkhOeQhlxyXG4gICAgICAgICAgaWYgKHRoaXMucmVzcG9uc2UgJiYgdGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHMubGVuZ3RoICYmICF0aGlzLnJlc3BvbnNlLnNpbXVsYXRpb25QYXRoc1swXS5pZC5zdGFydHNXaXRoKCdQYXJhbGxlbEdhdGV3YXknKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09IDEgJiYgbm9kZXNbaV0uc3RhcnRzV2l0aCgnVXNlckFjdGl2aXR5JykgJiYgdGhpcy5hc3NpZ25JbmZvc1tpXS5yZXNvbHZlZCAmJiAhdGhpcy5hc3NpZ25JbmZvc1tpXS5hc3NpZ25lZUluZm8gJiYgIXRoaXMuYXNzaWduSW5mb3NbaV0uc2VsZWN0ZWRBc3NpZ25lZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc3RyID0gdGhpcy5hc3NpZ25JbmZvc1tpXS5hY3Rpdml0eURlZmluaXRpb25OYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhcnRQcm9jZXNzLm5vZGUnKSArIHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ3N0YXJ0UHJvY2Vzcy5ub1VzZXInKTtcclxuICAgICAgICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHN0cik7XHJcbiAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5leHRGbG93Tm9kZXMucHVzaChuZXh0Rmxvd05vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0Lm5leHRGbG93Tm9kZXMgPSBuZXh0Rmxvd05vZGVzO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5YW25LuW6IqC54K55oyH5rS+5L+h5oGvXHJcbiAgICAgIGlmICh0aGlzLm90aGVyQXNzaWduSW5mb3MgJiYgdGhpcy5vdGhlckFzc2lnbkluZm9zLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vdGhlckFzc2lnbkluZm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgbmV4dEZsb3dOb2RlOiBGbG93Tm9kZUluZm8gPSB7XHJcbiAgICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbklkOiB0aGlzLm90aGVyQXNzaWduSW5mb3NbaV0uYWN0aXZpdHlEZWZpbml0aW9uSWQsXHJcbiAgICAgICAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbk5hbWU6IHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpXS5hY3Rpdml0eURlZmluaXRpb25OYW1lLFxyXG4gICAgICAgICAgICBkZXBlbmRlbmN5OiB0aGlzLm90aGVyQXNzaWduSW5mb3NbaV0uZGVwZW5kZW5jeSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpXS5hc3NpZ25lZUluZm8gPyB0aGlzLm90aGVyQXNzaWduSW5mb3NbaV0uYXNzaWduZWVzIDogW10sXHJcbiAgICAgICAgICAgIGFzc2lnbmVlSW5mbzogbnVsbCxcclxuICAgICAgICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxyXG4gICAgICAgICAgICBhbm9ueW1vdXNUZXh0OiAnJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udGV4dC5vdGhlckFzc2lnbk5vZGVzLnB1c2gobmV4dEZsb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnJlc3BvbnNlLnNlbGVjdFRhcmdldEFibGUgJiYgdGhpcy5kZXN0Tm9kZXMubGVuZ3RoID4gMSAmJiBjb250ZXh0Lm5leHRGbG93Tm9kZXMubGVuZ3RoIDw9IDApIHsvLyDnlKjmiLfmsqHpgInmi6not7PovazoioLngrnvvIzkuI3lhYHorrjmj5DkuqRcclxuICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnNlbGVjdE5vZGUnKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFzc2lnbkluZm9zLmZpbHRlcihpbmZvID0+IGluZm8uYXNzaWduZWVJbmZvICYmIGluZm8uYXNzaWduZWVJbmZvLnNlbGVjdEFzc2lnbmVlICYmICFpbmZvLmFzc2lnbmVlcy5sZW5ndGgpLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQcm9jZXNzb3InKSk7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbXBsZXRlVGFzayhjb250ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb21wbGV0ZVRhc2soY29tcGxldGVDb250ZXh0OiBDb21wbGV0ZUNvbnRleHQpIHtcclxuICAgIGNvbnN0IGF0dGFjaG1lbnROZWNlc3NhcnkgPSB0aGlzLmFjdGlvbkVudGl0eS5wYXJhbWV0ZXJzLmZpbmQoZW50aXR5ID0+IGVudGl0eS5jb2RlID09PSAnQXR0YWNobWVudE5lY2Vzc2FyeScpO1xyXG4gICAgY29uc3QgY2VydGlmaWNhdGlvbk5lY2Vzc2FyeSA9IHRoaXMuYWN0aW9uRW50aXR5LnBhcmFtZXRlcnMuZmluZChlbnRpdHkgPT4gZW50aXR5LmNvZGUgPT09ICdDZXJ0aWZpY2F0aW9uTmVjZXNzYXJ5Jyk7XHJcbiAgICBjb25zdCBjb21tZW50TmVjZXNzYXJ5ID0gdGhpcy5hY3Rpb25FbnRpdHkucGFyYW1ldGVycy5maW5kKGVudGl0eSA9PiBlbnRpdHkuY29kZSA9PT0gJ0NvbW1lbnROZWNlc3NhcnknKTtcclxuICAgIGlmIChhdHRhY2htZW50TmVjZXNzYXJ5ICYmIGF0dGFjaG1lbnROZWNlc3NhcnkudmFsdWUgPT09ICd0cnVlJyAmJiAoIWNvbXBsZXRlQ29udGV4dC5hZGRlbmR1bS5hdHRhY2htZW50IHx8IGNvbXBsZXRlQ29udGV4dC5hZGRlbmR1bS5hdHRhY2htZW50ID09PSAnW10nKSkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmF0dGFjaG1lbnRzUmVxdWlyZWQnKSk7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbW1lbnROZWNlc3NhcnkgJiYgY29tbWVudE5lY2Vzc2FyeS52YWx1ZSA9PT0gJ3RydWUnICYmICFjb21wbGV0ZUNvbnRleHQuY29tbWVudCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmlucHV0T3BpbmlvbicpKTtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy50YXNrU2VydmljZS5nZXRCeXRlc0xlbmd0aCh0aGlzLmNvbW1lbnQpID4gdGhpcy5NQVhfQ09NTUVOVF9MRU5HVEgpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCd0YXNrLmNvbW1lbnRUb29Mb25nJykpO1xyXG4gICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGNlcnRpZmljYXRpb25OZWNlc3NhcnkgJiYgY2VydGlmaWNhdGlvbk5lY2Vzc2FyeS52YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlTaWduYXR1cmUoKCkgPT4ge1xyXG4gICAgICAgICAgY29tcGxldGVDb250ZXh0LnZlcmlmeVNpZ25lZCA9IHRoaXMudmVyaWZ5U2lnbmVkO1xyXG4gICAgICAgICAgdGhpcy50YXNrQ29tcGxldGUoY29tcGxldGVDb250ZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBtc2cgPSBbdGhpcy53b3JrSXRlbUlkXTtcclxuICAgICAgICBnc3BDQS5nZXRTaWduZWRNc2cobXNnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRhc2tDb21wbGV0ZShjb21wbGV0ZUNvbnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV4ZWN1dGVGb3JtQWN0aW9uc0FmdGVyQ29tcGxldGVUYXNrKGhhbmRsZXI6IGFueSkge1xyXG4gICAgLy8g5aaC5p6c6KGo5Y2V5rOo5YaM5LqG5LqL5Lu2XHJcbiAgICBpZiAodGhpcy5vcmlnaW4gPT0gQWN0aW9uT3JpZ2luLlRhc2tGb3JtICYmIHRoaXMuaWZSZWdpc3RlcmVkICYmIHRoaXMuZm9ybU9iamVjdCkge1xyXG4gICAgICBjb25zdCBwb3N0QWN0aW9ucyA9IHRoaXMuYmlsbE1ldGhvZENvbmZpZ3MuZmlsdGVyKGFjdGlvbiA9PiBhY3Rpb24uYWN0aW9uID09PSB0aGlzLmFjdGlvbkVudGl0eS5jb2RlICYmIGFjdGlvbi5leGVjdXRpb25UaW1lID09PSAnUG9zdCcpLnNvcnQoKHgsIHkpID0+IHguc29ydE9yZGVyIC0geS5zb3J0T3JkZXIpO1xyXG4gICAgICBpZiAocG9zdEFjdGlvbnMgJiYgcG9zdEFjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlUG9zdEZvcm1BY3Rpb25zKHBvc3RBY3Rpb25zLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGFuZGxlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleGVjdXRlUG9zdEZvcm1BY3Rpb25zKGZvcm1BY3Rpb25zOiBCaWxsTWV0aG9kQ29uZmlnW10sIGhhbmRlcjogYW55KSB7XHJcbiAgICBpZiAoZm9ybUFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VTdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgICB0aGlzLm1lc3NhZ2VTdWJqZWN0LnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZS5kYXRhLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVQb3N0Rm9ybUFjdGlvbnMoZm9ybUFjdGlvbnMsIGhhbmRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7IC8vIOS7u+WKoeWKnueQhueVjOmdouS4jeWFs+mXrVxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflrqHmibnlkI7ooajljZXmk43kvZzmiafooYzlpLHotKXvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyDmiafooYzooajljZXliqjkvZxcclxuICAgICAgY29uc3QgZm9ybUFjdGlvbiA9IGZvcm1BY3Rpb25zLnNoaWZ0KCk7XHJcbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2UodGhpcy53b3JrSXRlbUlkLCBmb3JtQWN0aW9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhhbmRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/luK7liqnpgInkurrlkI5cclxuICBhZnRlckNvbmZpcm1Gb3JUcmFuc2ZlcihkYXRhOiBBc3NpZ25lZVtdKSB7XHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVXNlcnMgPSBkYXRhLm1hcCh1c2VyID0+IHVzZXIuaWQpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVXNlck5nTW9kdWxlID0gZGF0YS5tYXAodXNlciA9PiB1c2VyLm5hbWUpLmpvaW4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRVc2VycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYWN0aW9uRW50aXR5LmNvZGUgPT0gJ0FkZFNpZ24nICYmIHRoaXMuYWRkU2lnbi5vcmlnaW5NdWx0aUluc3RUeXBlID09IE11bHRpSW5zdGFuY2VUeXBlLlByZWVtcHQudG9TdHJpbmcoKSAmJiB0aGlzLnNlbGVjdGVkVXNlcnMubGVuZ3RoID4gMSkge1xyXG4gICAgICB0aGlzLmFkZFNpZ24uc2hvd011bHRpSW5zdGFuY2VUeXBlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWRkU2lnbi5zaG93TXVsdGlJbnN0YW5jZVR5cGUgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhbmNlbCgpOiBPYnNlcnZhYmxlPFN1Ym1pdFJlc3VsdD4ge1xyXG4gICAgdGhpcy5zdWJtaXRSZXN1bHQuaXNDbG9zZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdWJqZWN0Lm5leHQodGhpcy5zdWJtaXRSZXN1bHQpO1xyXG4gICAgcmV0dXJuIHRoaXMuc3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIGdldFN1YmplY3QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8g5LiL5LiA546v6IqC6YCJ5oup5ZCO5LqL5Lu2XHJcbiAgc2VsZWN0Tm9kZUNoYW5nZShkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWROb2RlSWQgPSBkYXRhICYmIGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEuaWQ7XHJcbiAgICBpZiAodGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGF0YS5pbmRleF0ubm9kZUluZm9MaXN0LmV2ZXJ5KG5vZGUgPT4gbm9kZS5yZXNvbHZlZCA9PT0gdHJ1ZSkpIHsvLyDlt7LpooTop6PmnpDlj4LkuI7ogIVcclxuICAgICAgdGhpcy5zZXRBc3NpZ25JbmZvKHRoaXMucmVzcG9uc2Uuc2ltdWxhdGlvblBhdGhzW2RhdGEuaW5kZXhdLm5vZGVJbmZvTGlzdCk7XHJcbiAgICAgIHRoaXMuc2V0T3RoZXJBc3NpZ25JbmZvQWdhaW4odGhpcy5yZXNwb25zZS5zaW11bGF0aW9uUGF0aHNbZGF0YS5pbmRleF0ubm9kZUluZm9MaXN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG5vZGVJZHMgPSB0aGlzLnNlbGVjdGVkTm9kZUlkLnNwbGl0KCfvvIwnKS5tYXAobm9kZSA9PiBgXCIke25vZGV9XCJgKS5qb2luKCk7IC8vIOazqOaEj+S4gOS4quS4reaWh+mAl+WPt+S4gOS4quiLseaWh+mAl+WPt1xyXG4gICAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0U2ltdWxhdGlvbkFzc2lnbmVlSW5mbyh0aGlzLndvcmtJdGVtSWQsIG5vZGVJZHMpLnN1YnNjcmliZSgobm9kZUluZm9MaXN0OiBGbG93Tm9kZUluZm9bXSkgPT4ge1xyXG4gICAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLnNldEFzc2lnbkluZm8obm9kZUluZm9MaXN0KTtcclxuICAgICAgICB0aGlzLnNldE90aGVyQXNzaWduSW5mb0FnYWluKG5vZGVJbmZvTGlzdCk7XHJcbiAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5LiL5LiA546v6IqC5riF56m65ZCO5LqL5Lu2XHJcbiAgc2VsZWN0Tm9kZUNsZWFyKCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZE5vZGVJZCA9IG51bGw7XHJcbiAgICB0aGlzLmFzc2lnbkluZm9zID0gW3tcclxuICAgICAgc2VsZWN0ZWRBc3NpZ25lZXM6IFtdLFxyXG4gICAgICBhc3NpZ25lZUluZm86IG51bGwsXHJcbiAgICAgIGFzc2lnbmVlczogW10sXHJcbiAgICAgIGFjdGl2aXR5RGVmaW5pdGlvbk5hbWU6ICcnLFxyXG4gICAgICBhY3Rpdml0eURlZmluaXRpb25JZDogJycsXHJcbiAgICAgIGRlcGVuZGVuY3k6ICcnLFxyXG4gICAgICBhbm9ueW1vdXM6IGZhbHNlLFxyXG4gICAgICBhbm9ueW1vdXNUZXh0OiAnJyxcclxuICAgICAgcmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgfV07XHJcbiAgfVxyXG5cclxuICBhZnRlckNvbmZpcm1Gb3JBc3NpZ24oZGF0YTogQXNzaWduZWVbXSwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgdGhpcy5hc3NpZ25JbmZvc1tpbmRleF0uYXNzaWduZWVzID0gZGF0YTtcclxuICB9XHJcblxyXG4gIGFmdGVyQ29uZmlybUZvck90aGVyQXNzaWduKGRhdGE6IEFzc2lnbmVlW10sIGluZGV4OiBudW1iZXIpIHtcclxuICAgIHRoaXMub3RoZXJBc3NpZ25JbmZvc1tpbmRleF0uYXNzaWduZWVzID0gZGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4iuS8oOmZhOS7tuWQjuS6i+S7tlxyXG4gICAqL1xyXG4gIGFkZEF0dGFjaG1lbnQoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLmFkZGVuZHVtLmF0dGFjaG1lbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJi+WGmeetvuWQjeWQjuS6i+S7tlxyXG4gICAqL1xyXG4gIGFkZFNpZ25hdHVyZShkYXRhOiBhbnkpIHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIGNvbnN0IHNpZ25JbmZvID0ge1xyXG4gICAgICAgIGlkOiBkYXRhLFxyXG4gICAgICAgIHdhdGVyTWFya2luZzogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmFkZGVuZHVtLnNpZ25hdHVyZSA9IEpTT04uc3RyaW5naWZ5KHNpZ25JbmZvKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWRkZW5kdW0uc2lnbmF0dXJlID0gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDku6XmnI3liqHmlrnlvI/miZPlvIDnu4Tku7bml7bvvIzlt6blj7PliqDkuIpwYWRkaW5nXHJcbiAgYWRkUGFkZGluZygpIHtcclxuICAgIHRoaXMuY2xzID0gJ2YtdXRpbHMtZmlsbC1mbGV4LWNvbHVtbiBoLTEwMCBweC00IHB5LTInO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgc2VuZE1lc3NhZ2Uod29ya0l0ZW1JZDogc3RyaW5nLCBhY3Rpb246IEJpbGxNZXRob2RDb25maWcpIHtcclxuICAgIGlmICh0aGlzLmlmcmFtZSkge1xyXG4gICAgICBjb25zdCBpZnJhbWVXaW5kb3cgPSB0aGlzLmlmcmFtZS5uYXRpdmVFbGVtZW50LmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgdGFyZ2V0OiB3b3JrSXRlbUlkLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGNvbW1hbmQ6IGFjdGlvbi5tZXRob2QsXHJcbiAgICAgICAgICBhcmd1bWVudHM6IGFjdGlvbi5tZXRob2RQYXJhbWV0ZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBpZnJhbWVXaW5kb3cucG9zdE1lc3NhZ2UobWVzc2FnZSwgdGhpcy5QT1NUX01FU1NBR0VfVEFSR0VUKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiBmYWxzZSwgaXNDbG9zZTogZmFsc2UgfSk7IC8vIOS7u+WKoeWKnueQhueVjOmdouS4jeWFs+mXrVxyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKCfor7fnrYnlvoXooajljZXliqDovb3lrozmiJDlkI7lho3or5UnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOaPkOS6pOWuoeaJueWJjeeahOaVsOWtl+etvuWQjeWPiumqjOetvlxyXG4gIHZlcmlmeVNpZ25hdHVyZShoYW5kbGVyOiBhbnkpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgaWYgKFxyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZSAmJlxyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGZcclxuICAgICkge1xyXG4gICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuY2FFdmVudC5vbihcclxuICAgICAgICAod2luZG93IGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuY2FFdmVudC5zaWduZWRNc2dPdmVyVG9rZW4oKSxcclxuICAgICAgICAnc2lnbmVkTXNnT3ZlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gc2lnbk1zZ092ZXIoc2lnbmVkRGF0YSkge1xyXG4gICAgICAgICAgaWYgKHNpZ25lZERhdGEgJiYgc2lnbmVkRGF0YVswXSA9PT0gJ3RydWUnICYmIHNpZ25lZERhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyDor4Hkuablr7nosaFcclxuICAgICAgICAgICAgY29uc3QgY2VydCA9IGdzcENBLmdldEN1ckNlcnQoKTtcclxuICAgICAgICAgICAgLy8g6aqM562+5Y+C5pWwXHJcbiAgICAgICAgICAgIHRoYXQudmVyaWZ5U2lnbmVkID0ge1xyXG4gICAgICAgICAgICAgIC8vIOimgemqjOivgeeahOivgeS5pmJhc2U2NOe8lueggeeahOWtl+espua1gShjZXJ0a2V5KVxyXG4gICAgICAgICAgICAgIGNlcnRCYXNlNjRJbmZvOiBnc3BDQS5nZXRDZXJ0QmFzZTY0KGNlcnQpLFxyXG4gICAgICAgICAgICAgIC8vIOetvuWQjeWOn+S/oeaBr1xyXG4gICAgICAgICAgICAgIG1zZzogW3RoYXQud29ya0l0ZW1JZF0sXHJcbiAgICAgICAgICAgICAgLy8g6KaB562+5ZCN5ZCO5L+h5oGvXHJcbiAgICAgICAgICAgICAgc2lnbmVkbXNnOiBzaWduZWREYXRhWzFdWzBdLFxyXG4gICAgICAgICAgICAgIC8vIOeUqOaIt+S9v+eUqOWcuuaZr++8jOebruWJjeacquS9v+eUqO+8jOWPr+S7peS4uuepulxyXG4gICAgICAgICAgICAgIHVzZUNhc2U6IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoYXQubG9hZGluZ1NlcnZpY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhhdC5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgdGhhdC5ub3RpZnkuZXJyb3Ioc2lnbmVkRGF0YVsxXSk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzaWduZWREYXRhWzFdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDpgJrov4fjgIHpqbPlm57jgIHlhbbku5bnrKzkuInmlrnliqjkvZxcclxuICB0YXNrQ29tcGxldGUoY29tcGxldGVDb250ZXh0OiBDb21wbGV0ZUNvbnRleHQpIHtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuY29tcGxldGUoY29tcGxldGVDb250ZXh0KS5zdWJzY3JpYmUoKGNyOiBDb21wbGV0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHRoaXMuZXhlY3V0ZUZvcm1BY3Rpb25zQWZ0ZXJDb21wbGV0ZVRhc2soKCkgPT4ge1xyXG4gICAgICAgIGlmIChjci5uZWVkSW50ZXJhY3Rpb24pIHsvLyDpgJrov4flkI7mjIfmtL7lnLrmma9cclxuICAgICAgICAgIGlmICh0aGlzLm9yaWdpbiA9PSBBY3Rpb25PcmlnaW4uVGFza0NlbnRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogdHJ1ZSwgaXNDbG9zZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh7IHJlc3VsdDogZmFsc2UsIGlzQ2xvc2U6IGZhbHNlIH0pOy8v5YWz5o6JbG9hZGluZ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zZWxlY3QnKVxyXG4gICAgICAgICAgICArICfjgJAnICsgY3IubmV4dEZsb3dOb2Rlc1swXS5hY3Rpdml0eURlZmluaXRpb25OYW1lICsgJ+OAkSdcclxuICAgICAgICAgICAgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5wcm9jZXNzb3InKSk7XHJcbiAgICAgICAgICBsZXQgdGFzayA9IG5ldyBUYXNrRW50aXR5KCk7XHJcbiAgICAgICAgICBsZXQgYWN0aW9uID0gbmV3IFRhc2tBY3Rpb24oKTtcclxuICAgICAgICAgIHRhc2suc291cmNlSWQgPSBjci5uZXh0Rmxvd05vZGVzWzBdLmFzc2lnbmVlSW5mby53b3JrSXRlbUlkO1xyXG4gICAgICAgICAgYWN0aW9uLmNvZGUgPSAnQXNzaWduVXNlcic7XHJcbiAgICAgICAgICBhY3Rpb24ubmFtZSA9IHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLmFzc2lnblVzZXInKTtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlclNlcnZpY2UuZXhlY3V0ZSh0YXNrLCBhY3Rpb24pLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGNvbXBsZXRlQ29udGV4dC5jb25jbHVzaW9uVmFsdWUgPT09ICdQYXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3NQYXNzJykpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChjb21wbGV0ZUNvbnRleHQuY29uY2x1c2lvblZhbHVlID09PSAnQmFjaycpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmFjdGlvbkVudGl0eS5uYW1lICsgdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuYWN0aW9uRW50aXR5Lm5hbWUgKyB0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdzdGF0aWMuc3VjY2VzcycpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHsgcmVzdWx0OiB0cnVlLCBpc0Nsb3NlOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoeyByZXN1bHQ6IGZhbHNlLCBpc0Nsb3NlOiBmYWxzZSB9KTtcclxuICAgICAgdGhpcy50YXNrU2VydmljZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbn0iXX0=