/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { AssigneeInfo } from '../../entity/complete-response';
import { I18nService } from '../../service/i18n/i18n.service';
import { NotifyService } from '@farris/ui-notify';
import { TaskService } from '../../service/task.service';
import { WfContext } from '../../entity/wfContext';
import { UserHelpParam } from '../../entity/farris-user-help-param';
export class AssigneeInfoComponent {
    //扩展帮助的url
    /**
     * @param {?} i18nService
     * @param {?} notify
     * @param {?} cd
     * @param {?} taskService
     * @param {?} injector
     */
    constructor(i18nService, notify, cd, taskService, injector) {
        this.i18nService = i18nService;
        this.notify = notify;
        this.cd = cd;
        this.taskService = taskService;
        this.injector = injector;
        //已经选中的指派人
        this.assignees = []; //返回选中人的ID数组
        //返回选中人的ID数组
        this.anonymous = false; // 是否匿名
        // 是否匿名
        this.anonymousText = ''; // 匿名显示文本
        //默认办理人（界面提示用）
        this.pscChange = null; //farris用户帮助
        //farris用户帮助
        this.disabled = false; //办理人员输入框是否禁用
        this.filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: "order", withAllOrg: true, orgId: '' };
        this.ifShowBlank = true; //办理人为空时，是否显示选人框
        //办理人为空时，是否显示选人框
        this.openFromIframe = false; //是否从iframe打开，应用IDP提交审批集成
        //区分是哪个组件
        this.isUseNewSelectUserHelp = false; //是否直接启用新版选人组件
        //是否直接启用新版选人组件
        this.ifHorizontal = false; //是否水平排列
        //是否水平排列
        this.afterConfirm = new EventEmitter();
        this.groupIcon = '<i class="f-icon f-icon-plus-circle text-primary"></i>';
        this.extendUserHelp = false; //用户帮助是否扩展
        //是否使用farris用户帮助
        this.taskService.getWfUserHelpConfig().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {
                this.extendUserHelp = true;
                this.extendUserHelpUrl = re.userHelpConfig.url + '?v=20221114';
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            console.error(error);
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        //引入farris用户帮助脚本
        if (this.openFromIframe) {
            ((/** @type {?} */ (top))).System.import("/platform/common/web/@farris/common-personnel-select/psc.js" + '?v=' + new Date().getTime().toString()).then((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                console.error(error);
            }));
        }
    }
    /**
     * @param {?} info
     * @return {?}
     */
    set assigneeInfo(info) {
        this.disabled = false;
        this.placeholder = null; //清空
        this.assignUserNgModule = null; //清空
        this._assigneeInfo = info; //可以传null
        if (!this._assigneeInfo) {
            this.disabled = true;
        }
        else {
            if (this._assigneeInfo.selectAssignee) {
                this.disabled = false;
                this.placeholder = this.i18nService.getValue('task.selectPlaceholder'); //请选择
            }
            else {
                this.disabled = true;
                if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {
                    this.defaultParticipant = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => user.name)).join(); //解析人名
                }
                else {
                    this.defaultParticipant = this.i18nService.getValue('task.noUser'); //无
                }
            }
            this.singleSelect = !this._assigneeInfo.multiSelect;
            this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;
            if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {
                /** @type {?} */
                const orgList = this._assigneeInfo.organizationScope[0];
                this.filter.orgId = orgList.id;
                this.filter.withAllOrg = orgList.includeChildren;
            }
        }
    }
    /**
     * @param {?} anonymous
     * @return {?}
     */
    set setAnonymous(anonymous) {
        this.anonymous = anonymous;
    }
    /**
     * @param {?} anonymousText
     * @return {?}
     */
    set setAnonymousText(anonymousText) {
        this.anonymousText = anonymousText;
    }
    /**
     * 已选中的人（帮助不可用）
     * @param {?} selectedAssignees
     * @return {?}
     */
    set selectedAssignees(selectedAssignees) {
        !this._assigneeInfo && (this.placeholder = null);
        this._selectedAssignees = selectedAssignees;
        selectedAssignees.length && (this.defaultParticipant = this.anonymous ? this.anonymousText : selectedAssignees.map((/**
         * @param {?} user
         * @return {?}
         */
        user => user.name)).join());
    }
    /**
     * 选择参与者
     * @return {?}
     */
    clickAssignUser() {
        if (this.isUseNewSelectUserHelp) {
            this.extendUserHelp = true;
            this.extendUserHelpUrl = '/platform/runtime/wf/web/wf-user-help/wf-user-help-farris/wf-user-help-farris.js' + '?v=' + new Date().getTime().toString();
        }
        /** @type {?} */
        let context = {
            singleSelect: this.singleSelect,
            allowGlobalAssign: this.allowGlobalAssign,
            assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],
            filter: this.filter,
            selectedUsers: this.assignees && this.assignees.length ? this.assignees : this._selectedAssignees,
            wfContext: this.wfContext
        };
        if (this.extendUserHelp) {
            if (this.openFromIframe) {
                this.showFarrisUserHelpFromWindow(context);
            }
            else {
                this.showExtendUserHelp(context);
            }
        }
        else {
            this.showExtendUserHelp(context);
        }
    }
    /**
     * 加载扩展帮助
     * @private
     * @param {?} context
     * @return {?}
     */
    showExtendUserHelp(context) {
        System.import(this.extendUserHelpUrl).then((/**
         * @param {?} moduleFactories
         * @return {?}
         */
        (moduleFactories) => {
            /** @type {?} */
            const moduleFactory = Object.values(moduleFactories)[0];
            /** @type {?} */
            const moduleRef = moduleFactory.create(this.injector);
            moduleRef.instance.showHelp(context).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            re => {
                /** @type {?} */
                let userList = re.userList;
                if (userList && userList.length) {
                    this.assignees = userList.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => { return { id: user.id, name: user.name }; }));
                    this.assignUserNgModule = this.assignees.map((/**
                     * @param {?} user
                     * @return {?}
                     */
                    user => user.name)).join();
                }
                else {
                    this.assignees = [];
                    this.assignUserNgModule = '';
                }
                this.afterConfirm.emit(this.assignees);
                this.cd.detectChanges();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                console.error(error);
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            console.error(error);
        }));
    }
    //从window上弹出用户帮助
    /**
     * @private
     * @param {?} context
     * @return {?}
     */
    showFarrisUserHelpFromWindow(context) {
        /** @type {?} */
        let param = new UserHelpParam();
        if (context.wfContext) {
            param.filterId = context.wfContext.processCategoryId;
        }
        param.multiSelect = !context.singleSelect;
        /** @type {?} */
        let showOrgTab = false;
        if (context.allowGlobalAssign || (context.filter && context.filter.orgId)) {
            showOrgTab = true;
        }
        /** @type {?} */
        let farrisUnSelectedUserIds = '';
        if (context.assigneeUsers && context.assigneeUsers.length) {
            farrisUnSelectedUserIds = context.assigneeUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            user => user.id)).join();
            param.unSelectedUserIds = farrisUnSelectedUserIds;
        }
        //有参与者 + 允许全员
        if (showOrgTab && farrisUnSelectedUserIds) {
            param.showTabIds = 'candidate,recent,organization,favorites,group';
            param.activeTabId = 'candidate';
        }
        //允许全员
        if (showOrgTab && !farrisUnSelectedUserIds) {
            param.showTabIds = 'recent,organization,favorites,group';
            param.activeTabId = 'recent';
        }
        //仅有参与者
        if (!showOrgTab && farrisUnSelectedUserIds) {
            param.showTabIds = 'candidate';
            param.activeTabId = 'candidate';
        }
        if (context.filter) {
            /** @type {?} */
            let filter = context.filter;
            param.includeCurrentUser = !filter.notGetCurrentUser;
            param.orgId = filter.orgId ? filter.orgId : '*';
            param.enableChildHierarchy = filter.withAllOrg;
        }
        if (context.selectedUsers && context.selectedUsers.length) {
            param.userIds = context.selectedUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            user => user.id)).join();
        }
        /** @type {?} */
        const token = 'gspWfTask' + this.index;
        ((/** @type {?} */ (top.window))).CommonPersonnelSelect.component.farrisDialogShowInWf(param, token);
        if (!this.pscChange) {
            this.pscChange = ((/** @type {?} */ (top.window))).FARRIS_PSC.selectionsChange.subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                if (re.token == token) {
                    /** @type {?} */
                    let userList = re.data;
                    if (userList && userList.length) {
                        this.assignees = userList.map((/**
                         * @param {?} user
                         * @return {?}
                         */
                        user => { return { id: user.userId, name: user.name }; }));
                        this.assignUserNgModule = this.assignees.map((/**
                         * @param {?} user
                         * @return {?}
                         */
                        user => user.name)).join();
                    }
                    else {
                        this.assignees = [];
                        this.assignUserNgModule = '';
                    }
                    this.afterConfirm.emit(this.assignees);
                    this.cd.detectChanges();
                }
            }));
        }
    }
    //清除
    /**
     * @return {?}
     */
    assignUserClear() {
        this.assignees = [];
        this.assignUserNgModule = null;
        this.afterConfirm.emit([]);
    }
}
AssigneeInfoComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-assignee-info',
                template: "<!-- \u6307\u5B9A\u53C2\u4E0E\u8005\uFF08\u6307\u6D3E\uFF09 -->\r\n<div\r\n  *ngIf=\"\r\n    ifShowBlank ||\r\n    _assigneeInfo ||\r\n    (_selectedAssignees && _selectedAssignees.length)\r\n  \"\r\n  [ngClass]=\"\r\n    ifHorizontal\r\n      ? 'wf-task-handler-help-div wf-submit-item'\r\n      : 'wf-task-handler-help-div'\r\n  \"\r\n>\r\n  <div\r\n    [ngClass]=\"\r\n      ifHorizontal\r\n        ? 'wf-task-handler-help-text wf-submit-item-label'\r\n        : 'wf-task-handler-help-text'\r\n    \"\r\n    title=\"{{ activityName }}\"\r\n  >\r\n    {{ activityName ? activityName : (\"task.assignText\" | translate) }}\r\n  </div>\r\n  <div\r\n    style=\"flex: 1\"\r\n    title=\"{{ assignUserNgModule ? assignUserNgModule : placeholder }}\"\r\n  >\r\n    <input-group\r\n      [(ngModel)]=\"defaultParticipant\"\r\n      [editable]=\"false\"\r\n      [readonly]=\"disabled\"\r\n      [customCls]=\"'custom-cls'\"\r\n      [groupText]=\"groupIcon\"\r\n      [placeholder]=\"placeholder\"\r\n      [(value)]=\"assignUserNgModule\"\r\n      (clickHandle)=\"clickAssignUser()\"\r\n      (clear)=\"assignUserClear()\"\r\n    ></input-group>\r\n  </div>\r\n</div>\r\n",
                styles: [".wf-task-handler-help-div{font-size:13px;color:#2d2f33;margin-bottom:14px}.wf-task-handler-help-div-submit{margin-bottom:14px}.wf-task-handler-help-text{padding-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wf-task-batch-selected{padding-left:8px}.wf-task-batch-rows{font-size:13px;font-weight:500;padding:0 4px;color:#2a87ff}.wf-task-batch-time{font-size:13px;font-weight:500;padding:0 4px;color:#424347}.wf-task-batch-message{display:flex;background:#edf9ff;border:1px solid rgba(196,235,255,1);border-radius:8px;margin-bottom:6px;align-items:center;font-size:12px;padding:4px 10px}.wf-submit-section{padding:4px 24px 0}.wf-submit-item{display:flex;align-items:baseline}.wf-submit-item-label{padding-right:10px;width:88px;text-align:right}.wf-task-splitter{display:flex;align-items:center;color:rgba(0,0,0,.4);font-size:12px;margin-bottom:10px}.wf-task-splitter-line{border-bottom:1px dashed rgba(0,0,0,.1);flex-grow:1}"]
            }] }
];
/** @nocollapse */
AssigneeInfoComponent.ctorParameters = () => [
    { type: I18nService },
    { type: NotifyService },
    { type: ChangeDetectorRef },
    { type: TaskService },
    { type: Injector }
];
AssigneeInfoComponent.propDecorators = {
    disabled: [{ type: Input }],
    placeholder: [{ type: Input }],
    singleSelect: [{ type: Input }],
    filter: [{ type: Input }],
    ifShowBlank: [{ type: Input }],
    openFromIframe: [{ type: Input }],
    activityName: [{ type: Input }],
    allowGlobalAssign: [{ type: Input }],
    wfContext: [{ type: Input }],
    index: [{ type: Input }],
    isUseNewSelectUserHelp: [{ type: Input }],
    ifHorizontal: [{ type: Input }],
    afterConfirm: [{ type: Output }],
    assigneeInfo: [{ type: Input }],
    setAnonymous: [{ type: Input }],
    setAnonymousText: [{ type: Input }],
    selectedAssignees: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignUserNgModule;
    /** @type {?} */
    AssigneeInfoComponent.prototype._assigneeInfo;
    /** @type {?} */
    AssigneeInfoComponent.prototype._selectedAssignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.assignees;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymous;
    /** @type {?} */
    AssigneeInfoComponent.prototype.anonymousText;
    /** @type {?} */
    AssigneeInfoComponent.prototype.defaultParticipant;
    /** @type {?} */
    AssigneeInfoComponent.prototype.pscChange;
    /** @type {?} */
    AssigneeInfoComponent.prototype.disabled;
    /** @type {?} */
    AssigneeInfoComponent.prototype.placeholder;
    /** @type {?} */
    AssigneeInfoComponent.prototype.singleSelect;
    /** @type {?} */
    AssigneeInfoComponent.prototype.filter;
    /** @type {?} */
    AssigneeInfoComponent.prototype.ifShowBlank;
    /** @type {?} */
    AssigneeInfoComponent.prototype.openFromIframe;
    /** @type {?} */
    AssigneeInfoComponent.prototype.activityName;
    /** @type {?} */
    AssigneeInfoComponent.prototype.allowGlobalAssign;
    /** @type {?} */
    AssigneeInfoComponent.prototype.wfContext;
    /** @type {?} */
    AssigneeInfoComponent.prototype.index;
    /** @type {?} */
    AssigneeInfoComponent.prototype.isUseNewSelectUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.ifHorizontal;
    /** @type {?} */
    AssigneeInfoComponent.prototype.afterConfirm;
    /** @type {?} */
    AssigneeInfoComponent.prototype.groupIcon;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelp;
    /** @type {?} */
    AssigneeInfoComponent.prototype.extendUserHelpUrl;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.i18nService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    AssigneeInfoComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduZWUtaW5mby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXRhc2staGFuZGxlci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Fzc2lnbmVlLWluZm8vYXNzaWduZWUtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM5RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDOUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBU3BFLE1BQU0sT0FBTyxxQkFBcUI7Ozs7Ozs7OztJQTZCaEMsWUFDVSxXQUF3QixFQUN4QixNQUFxQixFQUNyQixFQUFxQixFQUNyQixXQUF3QixFQUN4QixRQUFrQjtRQUpsQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQ3JCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQ3hCLGFBQVEsR0FBUixRQUFRLENBQVU7O1FBN0I1QixjQUFTLEdBQWUsRUFBRSxDQUFDLENBQUEsWUFBWTs7UUFDdkMsY0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLE9BQU87O1FBQzFCLGtCQUFhLEdBQUcsRUFBRSxDQUFDLENBQUMsU0FBUzs7UUFFN0IsY0FBUyxHQUFH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aEMsdUNBQTZCOzs7OztJQUM3QixtQ0FBNkI7Ozs7O0lBQzdCLDRDQUFnQzs7Ozs7SUFDaEMseUNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFzc2lnbmVlSW5mbyB9IGZyb20gJy4uLy4uL2VudGl0eS9jb21wbGV0ZS1yZXNwb25zZSc7XHJcbmltcG9ydCB7IEkxOG5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9pMThuL2kxOG4uc2VydmljZSc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9lbnRpdHkvdXNlcic7XHJcbmltcG9ydCB7IEFzc2lnbmVlIH0gZnJvbSAnLi4vLi4vZW50aXR5L3N0YXJ0LXByb2Nlc3MtcGF5bG9hZCc7XHJcbmltcG9ydCB7IFRhc2tTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS90YXNrLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBXZkNvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHkvd2ZDb250ZXh0JztcclxuaW1wb3J0IHsgVXNlckhlbHBQYXJhbSB9IGZyb20gJy4uLy4uL2VudGl0eS9mYXJyaXMtdXNlci1oZWxwLXBhcmFtJztcclxuXHJcbmRlY2xhcmUgbGV0IFN5c3RlbTogYW55O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItYXNzaWduZWUtaW5mbycsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Fzc2lnbmVlLWluZm8uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuLi90YXNrLWV4ZWN1dGUvdGFzay1leGVjdXRlLmNvbXBvbmVudC5jc3MnXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIEFzc2lnbmVlSW5mb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIGFzc2lnblVzZXJOZ01vZHVsZTogc3RyaW5nO1xyXG4gIF9hc3NpZ25lZUluZm86IEFzc2lnbmVlSW5mbztcclxuICBfc2VsZWN0ZWRBc3NpZ25lZXM6IFVzZXJbXTsvL+W3sue7j+mAieS4reeahOaMh+a0vuS6ulxyXG4gIGFzc2lnbmVlczogQXNzaWduZWVbXSA9IFtdOy8v6L+U5Zue6YCJ5Lit5Lq655qESUTmlbDnu4RcclxuICBhbm9ueW1vdXMgPSBmYWxzZTsgLy8g5piv5ZCm5Yy/5ZCNXHJcbiAgYW5vbnltb3VzVGV4dCA9ICcnOyAvLyDljL/lkI3mmL7npLrmlofmnKxcclxuICBkZWZhdWx0UGFydGljaXBhbnQ6IHN0cmluZzsvL+m7mOiupOWKnueQhuS6uu+8iOeVjOmdouaPkOekuueUqO+8iVxyXG4gIHBzY0NoYW5nZSA9IG51bGw7Ly9mYXJyaXPnlKjmiLfluK7liqlcclxuXHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTsvL+WKnueQhuS6uuWRmOi+k+WFpeahhuaYr+WQpuemgeeUqFxyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgc2luZ2xlU2VsZWN0OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGZpbHRlciA9IHsgbm90R2V0Q3VycmVudFVzZXI6IGZhbHNlLCBub3RHZXRTdG9wVXNlcjogdHJ1ZSwgb3JkZXJGaWVsZDogXCJvcmRlclwiLCB3aXRoQWxsT3JnOiB0cnVlLCBvcmdJZDogJycgfVxyXG4gIEBJbnB1dCgpIGlmU2hvd0JsYW5rOiBib29sZWFuID0gdHJ1ZTsvL+WKnueQhuS6uuS4uuepuuaXtu+8jOaYr+WQpuaYvuekuumAieS6uuahhlxyXG4gIEBJbnB1dCgpIG9wZW5Gcm9tSWZyYW1lOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbku45pZnJhbWXmiZPlvIDvvIzlupTnlKhJRFDmj5DkuqTlrqHmibnpm4bmiJBcclxuICBASW5wdXQoKSBhY3Rpdml0eU5hbWU6IHN0cmluZzsvL+iKgueCueWQjeensFxyXG4gIEBJbnB1dCgpIGFsbG93R2xvYmFsQXNzaWduOiBib29sZWFuOy8v5piv5ZCm5YWo5ZGY5oyH5rS+XHJcbiAgQElucHV0KCkgd2ZDb250ZXh0OiBXZkNvbnRleHQ7Ly/lt6XkvZzmtYHkuIrkuIvmlodcclxuICBASW5wdXQoKSBpbmRleDogYW55Oy8v5Yy65YiG5piv5ZOq5Liq57uE5Lu2XHJcbiAgQElucHV0KCkgaXNVc2VOZXdTZWxlY3RVc2VySGVscDogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm55u05o6l5ZCv55So5paw54mI6YCJ5Lq657uE5Lu2XHJcbiAgQElucHV0KCkgaWZIb3Jpem9udGFsOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbmsLTlubPmjpLliJdcclxuXHJcbiAgQE91dHB1dCgpIGFmdGVyQ29uZmlybSA9IG5ldyBFdmVudEVtaXR0ZXI8QXNzaWduZWVbXT4oKTtcclxuICBncm91cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXBsdXMtY2lyY2xlIHRleHQtcHJpbWFyeVwiPjwvaT4nO1xyXG4gIGV4dGVuZFVzZXJIZWxwOiBib29sZWFuID0gZmFsc2U7Ly/nlKjmiLfluK7liqnmmK/lkKbmianlsZVcclxuICBleHRlbmRVc2VySGVscFVybDogc3RyaW5nOy8v5omp5bGV5biu5Yqp55qEdXJsXHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBpMThuU2VydmljZTogSTE4blNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSB0YXNrU2VydmljZTogVGFza1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxyXG4gICkge1xyXG4gICAgLy/mmK/lkKbkvb/nlKhmYXJyaXPnlKjmiLfluK7liqlcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0V2ZVc2VySGVscENvbmZpZygpLnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAocmUgJiYgcmUudXNlckhlbHBDb25maWcgJiYgcmUudXNlckhlbHBDb25maWcuaXNFeHRlbmQgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy5leHRlbmRVc2VySGVscCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5leHRlbmRVc2VySGVscFVybCA9IHJlLnVzZXJIZWxwQ29uZmlnLnVybCArICc/dj0yMDIyMTExNCc7XHJcbiAgICAgIH1cclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy/lvJXlhaVmYXJyaXPnlKjmiLfluK7liqnohJrmnKxcclxuICAgIGlmICh0aGlzLm9wZW5Gcm9tSWZyYW1lKSB7XHJcbiAgICAgICh0b3AgYXMgYW55KS5TeXN0ZW0uaW1wb3J0KFwiL3BsYXRmb3JtL2NvbW1vbi93ZWIvQGZhcnJpcy9jb21tb24tcGVyc29ubmVsLXNlbGVjdC9wc2MuanNcIiArICc/dj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSkudGhlbigoZSkgPT4ge1xyXG4gICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgYXNzaWduZWVJbmZvKGluZm86IEFzc2lnbmVlSW5mbykge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IG51bGw7Ly/muIXnqbpcclxuICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gbnVsbDsvL+a4heepulxyXG4gICAgdGhpcy5fYXNzaWduZWVJbmZvID0gaW5mbzsvL+WPr+S7peS8oG51bGxcclxuICAgIGlmICghdGhpcy5fYXNzaWduZWVJbmZvKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuX2Fzc2lnbmVlSW5mby5zZWxlY3RBc3NpZ25lZSkge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5zZWxlY3RQbGFjZWhvbGRlcicpOy8v6K+36YCJ5oupXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzICYmIHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5kZWZhdWx0UGFydGljaXBhbnQgPSB0aGlzLmFub255bW91cyA/IHRoaXMuYW5vbnltb3VzVGV4dCA6IHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzLm1hcCh1c2VyID0+IHVzZXIubmFtZSkuam9pbigpOy8v6Kej5p6Q5Lq65ZCNXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZGVmYXVsdFBhcnRpY2lwYW50ID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgndGFzay5ub1VzZXInKTsvL+aXoFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNpbmdsZVNlbGVjdCA9ICF0aGlzLl9hc3NpZ25lZUluZm8ubXVsdGlTZWxlY3Q7XHJcbiAgICAgIHRoaXMuYWxsb3dHbG9iYWxBc3NpZ24gPSB0aGlzLl9hc3NpZ25lZUluZm8uYWxsb3dHbG9iYWxBc3NpZ247XHJcbiAgICAgIGlmICh0aGlzLl9hc3NpZ25lZUluZm8ub3JnYW5pemF0aW9uU2NvcGUgJiYgdGhpcy5fYXNzaWduZWVJbmZvLm9yZ2FuaXphdGlvblNjb3BlLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IG9yZ0xpc3QgPSB0aGlzLl9hc3NpZ25lZUluZm8ub3JnYW5pemF0aW9uU2NvcGVbMF07XHJcbiAgICAgICAgdGhpcy5maWx0ZXIub3JnSWQgPSBvcmdMaXN0LmlkO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyLndpdGhBbGxPcmcgPSBvcmdMaXN0LmluY2x1ZGVDaGlsZHJlbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgc2V0QW5vbnltb3VzKGFub255bW91czogYm9vbGVhbikge1xyXG4gICAgdGhpcy5hbm9ueW1vdXMgPSBhbm9ueW1vdXM7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBzZXRBbm9ueW1vdXNUZXh0KGFub255bW91c1RleHQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5hbm9ueW1vdXNUZXh0ID0gYW5vbnltb3VzVGV4dDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW3sumAieS4reeahOS6uu+8iOW4ruWKqeS4jeWPr+eUqO+8iVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHNlbGVjdGVkQXNzaWduZWVzKHNlbGVjdGVkQXNzaWduZWVzOiBVc2VyW10pIHtcclxuICAgICF0aGlzLl9hc3NpZ25lZUluZm8gJiYgKHRoaXMucGxhY2Vob2xkZXIgPSBudWxsKTtcclxuICAgIHRoaXMuX3NlbGVjdGVkQXNzaWduZWVzID0gc2VsZWN0ZWRBc3NpZ25lZXM7XHJcbiAgICBzZWxlY3RlZEFzc2lnbmVlcy5sZW5ndGggJiYgKHRoaXMuZGVmYXVsdFBhcnRpY2lwYW50ID0gdGhpcy5hbm9ueW1vdXMgPyB0aGlzLmFub255bW91c1RleHQgOiBzZWxlY3RlZEFzc2lnbmVlcy5tYXAodXNlciA9PiB1c2VyLm5hbWUpLmpvaW4oKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgInmi6nlj4LkuI7ogIVcclxuICAgKi9cclxuICBjbGlja0Fzc2lnblVzZXIoKSB7XHJcbiAgICBpZiAodGhpcy5pc1VzZU5ld1NlbGVjdFVzZXJIZWxwKSB7XHJcbiAgICAgIHRoaXMuZXh0ZW5kVXNlckhlbHAgPSB0cnVlO1xyXG4gICAgICB0aGlzLmV4dGVuZFVzZXJIZWxwVXJsID0gJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYi93Zi11c2VyLWhlbHAvd2YtdXNlci1oZWxwLWZhcnJpcy93Zi11c2VyLWhlbHAtZmFycmlzLmpzJyArICc/dj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIGxldCBjb250ZXh0ID0ge1xyXG4gICAgICBzaW5nbGVTZWxlY3Q6IHRoaXMuc2luZ2xlU2VsZWN0LFxyXG4gICAgICBhbGxvd0dsb2JhbEFzc2lnbjogdGhpcy5hbGxvd0dsb2JhbEFzc2lnbixcclxuICAgICAgYXNzaWduZWVVc2VyczogdGhpcy5fYXNzaWduZWVJbmZvICYmIHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzICYmIHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzLmxlbmd0aCA/IHRoaXMuX2Fzc2lnbmVlSW5mby5hc3NpZ25lZVVzZXJzIDogW10sXHJcbiAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIsXHJcbiAgICAgIHNlbGVjdGVkVXNlcnM6IHRoaXMuYXNzaWduZWVzICYmIHRoaXMuYXNzaWduZWVzLmxlbmd0aCA/IHRoaXMuYXNzaWduZWVzIDogdGhpcy5fc2VsZWN0ZWRBc3NpZ25lZXMsXHJcbiAgICAgIHdmQ29udGV4dDogdGhpcy53ZkNvbnRleHRcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmV4dGVuZFVzZXJIZWxwKSB7XHJcbiAgICAgIGlmICh0aGlzLm9wZW5Gcm9tSWZyYW1lKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RmFycmlzVXNlckhlbHBGcm9tV2luZG93KGNvbnRleHQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2hvd0V4dGVuZFVzZXJIZWxwKGNvbnRleHQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNob3dFeHRlbmRVc2VySGVscChjb250ZXh0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3mianlsZXluK7liqlcclxuICAgKi9cclxuICBwcml2YXRlIHNob3dFeHRlbmRVc2VySGVscChjb250ZXh0OiBhbnkpIHtcclxuICAgIFN5c3RlbS5pbXBvcnQodGhpcy5leHRlbmRVc2VySGVscFVybCkudGhlbigobW9kdWxlRmFjdG9yaWVzOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgbW9kdWxlRmFjdG9yeTogYW55ID0gT2JqZWN0LnZhbHVlcyhtb2R1bGVGYWN0b3JpZXMpWzBdO1xyXG4gICAgICBjb25zdCBtb2R1bGVSZWYgPSBtb2R1bGVGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgbW9kdWxlUmVmLmluc3RhbmNlLnNob3dIZWxwKGNvbnRleHQpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgICAgbGV0IHVzZXJMaXN0ID0gcmUudXNlckxpc3Q7XHJcbiAgICAgICAgaWYgKHVzZXJMaXN0ICYmIHVzZXJMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5hc3NpZ25lZXMgPSB1c2VyTGlzdC5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfSB9KTtcclxuICAgICAgICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gdGhpcy5hc3NpZ25lZXMubWFwKHVzZXIgPT4gdXNlci5uYW1lKS5qb2luKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuYXNzaWduZWVzID0gW107XHJcbiAgICAgICAgICB0aGlzLmFzc2lnblVzZXJOZ01vZHVsZSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFmdGVyQ29uZmlybS5lbWl0KHRoaXMuYXNzaWduZWVzKTtcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v5LuOd2luZG935LiK5by55Ye655So5oi35biu5YqpXHJcbiAgcHJpdmF0ZSBzaG93RmFycmlzVXNlckhlbHBGcm9tV2luZG93KGNvbnRleHQ6IGFueSkge1xyXG4gICAgbGV0IHBhcmFtID0gbmV3IFVzZXJIZWxwUGFyYW0oKTtcclxuICAgIGlmIChjb250ZXh0LndmQ29udGV4dCkge1xyXG4gICAgICBwYXJhbS5maWx0ZXJJZCA9IGNvbnRleHQud2ZDb250ZXh0LnByb2Nlc3NDYXRlZ29yeUlkO1xyXG4gICAgfVxyXG4gICAgcGFyYW0ubXVsdGlTZWxlY3QgPSAhY29udGV4dC5zaW5nbGVTZWxlY3Q7XHJcbiAgICBsZXQgc2hvd09yZ1RhYiA9IGZhbHNlO1xyXG4gICAgaWYgKGNvbnRleHQuYWxsb3dHbG9iYWxBc3NpZ24gfHwgKGNvbnRleHQuZmlsdGVyICYmIGNvbnRleHQuZmlsdGVyLm9yZ0lkKSkge1xyXG4gICAgICBzaG93T3JnVGFiID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxldCBmYXJyaXNVblNlbGVjdGVkVXNlcklkcyA9ICcnO1xyXG4gICAgaWYgKGNvbnRleHQuYXNzaWduZWVVc2VycyAmJiBjb250ZXh0LmFzc2lnbmVlVXNlcnMubGVuZ3RoKSB7XHJcbiAgICAgIGZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzID0gY29udGV4dC5hc3NpZ25lZVVzZXJzLm1hcCh1c2VyID0+IHVzZXIuaWQpLmpvaW4oKTtcclxuICAgICAgcGFyYW0udW5TZWxlY3RlZFVzZXJJZHMgPSBmYXJyaXNVblNlbGVjdGVkVXNlcklkcztcclxuICAgIH1cclxuICAgIC8v5pyJ5Y+C5LiO6ICFICsg5YWB6K645YWo5ZGYXHJcbiAgICBpZiAoc2hvd09yZ1RhYiAmJiBmYXJyaXNVblNlbGVjdGVkVXNlcklkcykge1xyXG4gICAgICBwYXJhbS5zaG93VGFiSWRzID0gJ2NhbmRpZGF0ZSxyZWNlbnQsb3JnYW5pemF0aW9uLGZhdm9yaXRlcyxncm91cCc7XHJcbiAgICAgIHBhcmFtLmFjdGl2ZVRhYklkID0gJ2NhbmRpZGF0ZSc7XHJcbiAgICB9XHJcbiAgICAvL+WFgeiuuOWFqOWRmFxyXG4gICAgaWYgKHNob3dPcmdUYWIgJiYgIWZhcnJpc1VuU2VsZWN0ZWRVc2VySWRzKSB7XHJcbiAgICAgIHBhcmFtLnNob3dUYWJJZHMgPSAncmVjZW50LG9yZ2FuaXphdGlvbixmYXZvcml0ZXMsZ3JvdXAnO1xyXG4gICAgICBwYXJhbS5hY3RpdmVUYWJJZCA9ICdyZWNlbnQnO1xyXG4gICAgfVxyXG4gICAgLy/ku4XmnInlj4LkuI7ogIVcclxuICAgIGlmICghc2hvd09yZ1RhYiAmJiBmYXJyaXNVblNlbGVjdGVkVXNlcklkcykge1xyXG4gICAgICBwYXJhbS5zaG93VGFiSWRzID0gJ2NhbmRpZGF0ZSc7XHJcbiAgICAgIHBhcmFtLmFjdGl2ZVRhYklkID0gJ2NhbmRpZGF0ZSc7XHJcbiAgICB9XHJcbiAgICBpZiAoY29udGV4dC5maWx0ZXIpIHtcclxuICAgICAgbGV0IGZpbHRlciA9IGNvbnRleHQuZmlsdGVyO1xyXG4gICAgICBwYXJhbS5pbmNsdWRlQ3VycmVudFVzZXIgPSAhZmlsdGVyLm5vdEdldEN1cnJlbnRVc2VyO1xyXG4gICAgICBwYXJhbS5vcmdJZCA9IGZpbHRlci5vcmdJZCA/IGZpbHRlci5vcmdJZCA6ICcqJztcclxuICAgICAgcGFyYW0uZW5hYmxlQ2hpbGRIaWVyYXJjaHkgPSBmaWx0ZXIud2l0aEFsbE9yZztcclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0LnNlbGVjdGVkVXNlcnMgJiYgY29udGV4dC5zZWxlY3RlZFVzZXJzLmxlbmd0aCkge1xyXG4gICAgICBwYXJhbS51c2VySWRzID0gY29udGV4dC5zZWxlY3RlZFVzZXJzLm1hcCh1c2VyID0+IHVzZXIuaWQpLmpvaW4oKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRva2VuID0gJ2dzcFdmVGFzaycgKyB0aGlzLmluZGV4O1xyXG4gICAgKHRvcC53aW5kb3cgYXMgYW55KS5Db21tb25QZXJzb25uZWxTZWxlY3QuY29tcG9uZW50LmZhcnJpc0RpYWxvZ1Nob3dJbldmKHBhcmFtLCB0b2tlbik7XHJcbiAgICBpZiAoIXRoaXMucHNjQ2hhbmdlKSB7XHJcbiAgICAgIHRoaXMucHNjQ2hhbmdlID0gKHRvcC53aW5kb3cgYXMgYW55KS5GQVJSSVNfUFNDLnNlbGVjdGlvbnNDaGFuZ2Uuc3Vic2NyaWJlKChyZSkgPT4ge1xyXG4gICAgICAgIGlmIChyZS50b2tlbiA9PSB0b2tlbikge1xyXG4gICAgICAgICAgbGV0IHVzZXJMaXN0ID0gcmUuZGF0YTtcclxuICAgICAgICAgIGlmICh1c2VyTGlzdCAmJiB1c2VyTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25lZXMgPSB1c2VyTGlzdC5tYXAodXNlciA9PiB7IHJldHVybiB7IGlkOiB1c2VyLnVzZXJJZCwgbmFtZTogdXNlci5uYW1lIH0gfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gdGhpcy5hc3NpZ25lZXMubWFwKHVzZXIgPT4gdXNlci5uYW1lKS5qb2luKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnbmVlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnblVzZXJOZ01vZHVsZSA9ICcnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5hZnRlckNvbmZpcm0uZW1pdCh0aGlzLmFzc2lnbmVlcyk7XHJcbiAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v5riF6ZmkXHJcbiAgYXNzaWduVXNlckNsZWFyKCkge1xyXG4gICAgdGhpcy5hc3NpZ25lZXMgPSBbXTtcclxuICAgIHRoaXMuYXNzaWduVXNlck5nTW9kdWxlID0gbnVsbDtcclxuICAgIHRoaXMuYWZ0ZXJDb25maXJtLmVtaXQoW10pO1xyXG4gIH1cclxuXHJcbn1cclxuIl19