/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, forwardRef, Output, EventEmitter } from '@angular/core';
import { DialogComponent } from '@farris/ui-dialog';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { FDropdownDirective } from '@farris/ui-dropdown';
import { UploadDialogService } from '@gsp-svc/formdoc-upload';
import { MessagerService } from '@farris/ui-messager';
import { FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';
import { SignHereComponent } from '@gsp-wf/wf-sign';
import { AvatarComponent } from '@farris/ui-avatar';
import { DownloadService } from '@gsp-svc/file-load';
import { TaskService } from '../../service/task.service';
import { LoadingService } from '@farris/ui-loading';
import { ConfigCode } from '../../entity/task-center-config';
import { CommentManageComponent } from '../comment-manage/comment-manage.component';
export class TaskCommentComponent {
    /**
     * @param {?} taskService
     * @param {?} uploadDialog
     * @param {?} messageService
     * @param {?} loadingService
     */
    constructor(taskService, uploadDialog, messageService, loadingService) {
        this.taskService = taskService;
        this.uploadDialog = uploadDialog;
        this.messageService = messageService;
        this.loadingService = loadingService;
        this.showAttachment = true; //是否显示附件上传，组件控制
        //是否显示附件上传，组件控制
        this.showSign = true; //是否显示签名，组件控制（不同动作可能会不显示）
        //是否显示签名，组件控制（不同动作可能会不显示）
        this.showCommonComment = true; //是否显示常用意见
        this.placeholder = '';
        this.textAreaHeight = 120; //文字框的高度
        this.attachment = new EventEmitter(); //附件
        //附件
        this.signature = new EventEmitter(); //上传签名之后，发送签名id
        //意见维护组件
        this._value = '';
        this.attachmentList = [];
        this.ifShowAttachment = false; //任务中心配置，是否显示附件上传
        //任务中心配置，是否显示附件上传
        this.ifShowSign = false; //任务中心配置，是否显示手写签名
        //临时保存上传的图片
        this.downloadService = new DownloadService();
        this.ifUseSign = false; //是否使用手写
        //是否使用手写
        this.ifUseImg = true; //是否使用上传图片
        //是否使用上传图片
        this.ifEnableSign = true; //是否默认启用签名
        //是否默认启用签名
        this.ifUploadImg = false; //是否上传过图片
        //是否上传过图片
        this.ifCanEditSign = true; //是否允许编辑签名
        //原始的签名id
        this.isShowCommonTips = false; //是否展示提示
        //是否展示提示
        this.commentList = [];
        this.btnHover = {
            //按钮hover样式变化
            commentHover: false,
            attachmentHover: false,
            signHover: false
        };
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
        this.onModelTouched = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
    }
    //当前是任务列表打开还是任务办理界面打开
    /**
     * @param {?} configList
     * @return {?}
     */
    set TaskCenterConfig(configList) {
        if (configList && configList.length) {
            /** @type {?} */
            const attachment = configList.find((/**
             * @param {?} a
             * @return {?}
             */
            a => a.configCode == ConfigCode.If_Show_Attachment));
            /** @type {?} */
            const sign = configList.find((/**
             * @param {?} a
             * @return {?}
             */
            a => a.configCode == ConfigCode.If_Show_Signature));
            /** @type {?} */
            const enableSign = configList.find((/**
             * @param {?} a
             * @return {?}
             */
            a => a.configCode == ConfigCode.If_Use_Sign_By_Default));
            /** @type {?} */
            const editSign = configList.find((/**
             * @param {?} a
             * @return {?}
             */
            a => a.configCode === ConfigCode.If_Can_Edit_Signature));
            attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);
            sign && sign.currentValue === 'true' && (this.ifShowSign = true);
            enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);
            editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);
            if (this.ifShowSign && this.ifEnableSign) {
                this.getUserSign(this.curUserId);
            }
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        if (this._value !== v) {
            this._value = v;
            this.onModelChange(v);
        }
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.commentManageComp.getConfirmSUbject().subscribe((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            this.commentDialog && this.commentDialog.close();
        }));
        this.commentManageComp.getCancelSubject().subscribe((/**
         * @return {?}
         */
        () => {
            this.commentDialog && this.commentDialog.close();
        }));
    }
    /**
     * 弹出常用意见管理框
     * @return {?}
     */
    showCommentDialog() {
        this.dropDownEl && this.dropDownEl.close();
        this.commentDialog.show();
    }
    /**
     * 点击常用意见，获取用户常用意见列表
     * @return {?}
     */
    loadComments() {
        this.taskService.getCommentList().subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            this.commentList = data;
        }));
    }
    /**
     * ControlValueAccessor必须实现的方法
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        if (value !== this.value) {
            this.value = value;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * 选择一条常用意见后事件
     * @param {?} data
     * @return {?}
     */
    buttonClick(data) {
        this.dropDownEl.close();
        this.value = this.value == this.defaultComment ? data : this.value + data;
    }
    /**
     * 上传附件
     * @return {?}
     */
    uploadAttachment() {
        /** @type {?} */
        let isRepeat = false;
        this.uploadDialog.uploadFile(this.processInstanceId ? this.processInstanceId : 'gspwftaskattachment', 'wf_attachment').then((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            for (let i of ((/** @type {?} */ (re)))) {
                isRepeat = false;
                for (let attach of this.attachmentList) {
                    if (attach.fileName === i.fileName) {
                        this.messageService.info('包含重复文件' + i.fileName);
                        isRepeat = true;
                        break;
                    }
                }
                if (!isRepeat) {
                    this.attachmentList.push(i);
                }
            }
            this.attachment.emit(this.attachmentList);
            //执行上传附件
            /** @type {?} */
            let files = new FileUploadEntity();
            files.rootId = "wf_attachment";
            files.metadataIdList = [];
            this.attachmentList.forEach((/**
             * @param {?} a
             * @return {?}
             */
            a => {
                files.metadataIdList.push(a.metadataId);
            }));
            files.metadataIdList.length && this.taskService.uploadAttachment(files).subscribe((/**
             * @return {?}
             */
            () => { }));
        }));
    }
    /**
     * 删除附件
     * @param {?} attachment
     * @return {?}
     */
    attachmentDelete(attachment) {
        /** @type {?} */
        var gspDocDeleteEntity = {
            rootId: "wf_attachment",
            metadataId: attachment.metadataId,
            mode: "Formal"
        };
        /** @type {?} */
        let index = this.attachmentList.indexOf(attachment);
        if (index > -1) {
            this.attachmentList.splice(index, 1);
        }
        this.attachment.emit(this.attachmentList);
        this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe((/**
         * @return {?}
         */
        () => { }));
    }
    /**
     * web端打开附件预览
     * @param {?} metadataId
     * @return {?}
     */
    attachmentPreview(metadataId) {
        /** @type {?} */
        const options = {
            appType: "app",
            funcId: "",
            tabName: "文档在线预览",
            appId: "6ccb476b-f2ba-df8f-6f47-d37d100c56e2",
            appEntrance: "docviewertab",
            tabId: new Date().getTime(),
            entityParams: {
                metadataIdList: [metadataId],
                rootId: "wf_attachment",
                metadataId: null,
                viewOptions: {
                    showHeader: true,
                    showPaging: true,
                    showThumbnails: true,
                    showDownload: true,
                    showSearch: true,
                    showZoom: true,
                    showPrint: true,
                    showSecondaryToolBar: true,
                },
            },
        };
        ((/** @type {?} */ (window))).gspframeworkService.rtf.func.openMenu(options);
    }
    /**
     * 获取不同格式附件的缩略图
     * @param {?} attachmentInfo
     * @return {?}
     */
    imageUrl(attachmentInfo) {
        /** @type {?} */
        const url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';
        return url + this.taskService.createItem(attachmentInfo) + '.svg?v=20220303';
    }
    /**
     * 展示手写签名dialog
     * @return {?}
     */
    showSignDialog() {
        this.signDialog.show();
        if (!this.ifEnableSign) {
            this.getUserSign(this.curUserId);
        }
    }
    /**
     * 点击删除签名
     * @return {?}
     */
    clickToDeleteImage() {
        this.signatureImage = '';
        this.signature.emit(null);
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            load.close();
        }), (/**
         * @return {?}
         */
        () => {
            load.close();
        }));
    }
    /**
     * @return {?}
     */
    clickToUseSign() {
        this.ifUseImg = false;
        this.ifUseSign = true;
        /** @type {?} */
        const canvas = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');
        canvas.height = 252;
        canvas.width = 665;
    }
    /**
     * @return {?}
     */
    clickToUploadImg() {
        this.farrisAvatar.onClick();
    }
    /**
     * 手写签名点确定
     * @return {?}
     */
    clickToConfirm() {
        /** @type {?} */
        let image;
        if (this.signaturePad && this.signaturePad.isDraw) { //如果签过名
            image = this.signaturePad.confirm();
        }
        else if (this.ifUploadImg) { //如果上传过图片
            image = this.tmpSignatureImage;
        }
        if (image) {
            this.uploadSignatureImg(image);
        }
        else {
            this.signatureImage = this.tmpSignatureImage;
            this.signature.emit(this.originSignId);
            this.signDialog.close();
        }
        //添加启用签名配置
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe((/**
         * @param {?} re
         * @return {?}
         */
        re => {
            load.close();
        }), (/**
         * @return {?}
         */
        () => {
            load.close();
        }));
    }
    /**
     * 点击清空
     * @return {?}
     */
    clickToReset() {
        this.ifUseSign = false;
        this.ifUseImg = true;
        this.signatureImage = '';
        this.tmpSignatureImage = '';
        this.signature.emit('');
        this.signaturePad && (this.signaturePad.isDraw = false);
        this.ifUploadImg = false;
    }
    /**
     * 点击取消
     * @return {?}
     */
    clickToCancel() {
        this.signDialog.close();
    }
    /**
     * 上传图片后事件
     * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg
     * @param {?} event
     * @return {?}
     */
    imgChange(event) {
        this.ifUseImg = true;
        this.ifUseSign = false;
        this.ifUploadImg = true;
        /** @type {?} */
        const image = event.base64;
        this.tmpSignatureImage = image;
        this.signatureImage = image;
    }
    /**
     * 上传签名
     * @private
     * @param {?} image
     * @return {?}
     */
    uploadSignatureImg(image) {
        /** @type {?} */
        var uploadSignature = new GspDocUploadEntity();
        uploadSignature.fileContent = image.split(',')[1];
        uploadSignature.filePath = this.curUserId;
        uploadSignature.mode = "Formal";
        uploadSignature.metadata = new GspDocMetadata();
        uploadSignature.metadata.id = this.taskService.createNM();
        uploadSignature.metadata.fileName = this.taskService.createNM() + ".png";
        uploadSignature.metadata.rootId = "taskcentersignature";
        uploadSignature.metadata.docType = "png";
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.uploadSignature(uploadSignature).subscribe((/**
         * @param {?} signId
         * @return {?}
         */
        signId => {
            load.close();
            this.originSignId = signId;
            this.signature.emit(signId);
            this.signatureImage = image;
            this.signDialog.close();
            localStorage.setItem('gspWfTaskUserSign' + this.curUserId + this.taskService.getCurrentDateString(), signId);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            load.close();
            this.messageService.error('上传签名失败');
        }));
    }
    /**
     * 获取用户的最近一次签名
     * @private
     * @param {?} userId
     * @return {?}
     */
    getUserSign(userId) {
        /** @type {?} */
        const load = this.loadingService.show();
        this.taskService.getUserSignId(userId).subscribe((/**
         * @param {?} signId
         * @return {?}
         */
        signId => {
            load.close();
            if (signId) {
                this.signature.emit(signId);
                this.originSignId = signId;
                this.signatureImage = this.downloadService.getDownloadUrl(signId, 'taskcentersignature');
                this.tmpSignatureImage = this.signatureImage;
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            console.error(error);
            load.close();
        }));
    }
    //文本框值变动监听事件
    /**
     * @param {?} e
     * @return {?}
     */
    valueChange(e) {
        if (this.taskService.getBytesLength(this.value) > 4000) {
            this.isShowCommonTips = true;
        }
        else {
            this.isShowCommonTips = false;
        }
        ;
    }
}
TaskCommentComponent.decorators = [
    { type: Component, args: [{
                selector: 'wf-comment',
                template: "<div\r\n  class=\"fa-approve-comment fa-approve-common-gutter\"\r\n  style=\"margin-bottom: 14px\"\r\n>\r\n  <!-- \u8F93\u5165\u6846 -->\r\n  <div class=\"fa-approve-comment--content\">\r\n    <textarea\r\n      class=\"form-control content-textarea\"\r\n      style=\"font-size: 13px\"\r\n      [(ngModel)]=\"value\"\r\n      (ngModelChange)=\"valueChange($event)\"\r\n      [attr.placeholder]=\"placeholder\"\r\n      [style.height.px]=\"textAreaHeight\"\r\n    ></textarea>\r\n  </div>\r\n  <div\r\n    class=\"fa-approve-comment--footer wf-approve-comment--footer\"\r\n    *ngIf=\"isShowCommonTips\"\r\n  >\r\n    <div class=\"wf-feature-warning\"></div>\r\n    <span\r\n      ><span class=\"wf-feature-span\">{{\r\n        \"comment.static.comment\" | translate\r\n      }}</span\r\n      >{{ \"comment.static.tooLongTips\" | translate }}</span\r\n    >\r\n  </div>\r\n  <!-- \u8F93\u5165\u6846\u4E0B\u65B9\u4E00\u6392\u6309\u94AE -->\r\n  <div class=\"fa-approve-comment--footer\">\r\n    <div\r\n      *ngIf=\"showAttachment || showSign || showCommonComment\"\r\n      class=\"approve-comment--text-btns\"\r\n    >\r\n      <!-- \u5E38\u7528\u610F\u89C1 -->\r\n      <div\r\n        *ngIf=\"showCommonComment\"\r\n        class=\"text-btns-item\"\r\n        (click)=\"loadComments()\"\r\n        (mouseover)=\"btnHover.commentHover = true\"\r\n        (mouseleave)=\"btnHover.commentHover = false\"\r\n        [ngClass]=\"btnHover.commentHover && 'text-primary'\"\r\n      >\r\n        <div fDropdown #dropdownEl=\"fDropdown\">\r\n          <div fDropdownToggle>\r\n            <span class=\"f-icon f-icon-message\"></span>\r\n            <span>\r\n              {{ \"comment.static.inputLabel\" | translate }}\r\n            </span>\r\n          </div>\r\n          <div class=\"dropdown-menu task-drop-down-menu\" fDropdownMenu>\r\n            <li\r\n              class=\"dropdown-item\"\r\n              *ngFor=\"let comment of commentList\"\r\n              (click)=\"buttonClick(comment.message)\"\r\n            >\r\n              <span>{{ comment.message }}</span>\r\n            </li>\r\n            <div class=\"dropdown-divider\"></div>\r\n            <!-- \u610F\u89C1\u7BA1\u7406 -->\r\n            <div\r\n              class=\"dropdown-item\"\r\n              style=\"display: flex; align-items: center\"\r\n              (click)=\"showCommentDialog()\"\r\n            >\r\n              <span class=\"f-icon f-icon-home-setup\"></span>\r\n              <span style=\"padding-left: 6px\">{{\r\n                \"comment.static.manage\" | translate\r\n              }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- \u4E0A\u4F20\u9644\u4EF6 -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"ifShowAttachment && showAttachment\"\r\n        (click)=\"uploadAttachment()\"\r\n        (mouseover)=\"btnHover.attachmentHover = true\"\r\n        (mouseleave)=\"btnHover.attachmentHover = false\"\r\n        [ngClass]=\"btnHover.attachmentHover && 'text-primary'\"\r\n        title=\"{{ 'comment.attachment.tips' | translate }}\"\r\n      >\r\n        <span class=\"f-icon f-icon-attachment\"></span>\r\n        <span class=\"text-btns-item--text\">\r\n          {{ \"comment.static.attachmentUpload\" | translate }}\r\n        </span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D -->\r\n      <div\r\n        class=\"text-btns-item\"\r\n        *ngIf=\"showSign && ifShowSign && ifCanEditSign && curUserId\"\r\n        title=\"{{ 'comment.signature.tips' | translate }}\"\r\n        (click)=\"showSignDialog()\"\r\n        (mouseover)=\"btnHover.signHover = true\"\r\n        (mouseleave)=\"btnHover.signHover = false\"\r\n        [ngClass]=\"btnHover.signHover && 'text-primary'\"\r\n      >\r\n        <span class=\"f-icon f-icon-edit\"></span>\r\n        <span>{{ \"comment.signature.title\" | translate }}</span>\r\n      </div>\r\n      <!-- \u624B\u5199\u7B7E\u540D\u9884\u89C8 -->\r\n      <div\r\n        *ngIf=\"showSign && ifShowSign && signatureImage\"\r\n        class=\"signatureImage\"\r\n      >\r\n        <img [src]=\"signatureImage\" style=\"width: 70px; height: 26px\" />\r\n        <div\r\n          *ngIf=\"ifCanEditSign\"\r\n          class=\"attachment-delete\"\r\n          (click)=\"clickToDeleteImage()\"\r\n          title=\"{{ 'comment.signature.disable' | translate }}\"\r\n        >\r\n          <span class=\"f-icon f-icon-x\"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u4E0A\u4F20\u540E\u7684\u9644\u4EF6\u9884\u89C8 -->\r\n<div *ngIf=\"attachmentList?.length > 0\" style=\"margin-bottom: 20px\">\r\n  <div\r\n    class=\"task-comment-attachment\"\r\n    *ngFor=\"let attachment of attachmentList\"\r\n  >\r\n    <!-- \u9644\u4EF6\u540D\u79F0 -->\r\n    <div class=\"task-comment-attachment-title\">\r\n      <img class=\"task-comment-attachment-img\" [src]=\"imageUrl(attachment)\" />\r\n      <span>{{ attachment.fileName }}</span>\r\n    </div>\r\n    <div style=\"display: flex; align-items: center\">\r\n      <!-- \u9644\u4EF6\u5927\u5C0F -->\r\n      <div *ngIf=\"attachment.fileSize\" class=\"task-comment-attachment-size\">\r\n        {{ attachment.fileSize }}\r\n      </div>\r\n      <!-- \u67E5\u770B -->\r\n      <div\r\n        *ngIf=\"taskOrigin == 'TaskForm'\"\r\n        class=\"task-comment-attach-icon\"\r\n        (click)=\"attachmentPreview(attachment.metadataId)\"\r\n        title=\"{{ 'comment.signature.view' | translate }}\"\r\n      >\r\n        <span class=\"f-icon f-icon-enclosure_browse\"></span>\r\n      </div>\r\n      <!-- \u5220\u9664 -->\r\n      <div\r\n        class=\"task-comment-attach-icon\"\r\n        (click)=\"attachmentDelete(attachment)\"\r\n        title=\"{{ 'comment.signature.delete' | translate }}\"\r\n      >\r\n        <span class=\"f-icon f-icon-enclosure_delete\"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- \u5E38\u7528\u610F\u89C1\u7EF4\u62A4 -->\r\n<farris-dialog\r\n  #commentDialog\r\n  [width]=\"740\"\r\n  [height]=\"440\"\r\n  [buttons]=\"commentManageComp.buttons\"\r\n  [title]=\"'comment.static.title' | translate\"\r\n>\r\n  <lib-comment-manage #commentManageComp></lib-comment-manage>\r\n</farris-dialog>\r\n\r\n<!-- \u7B7E\u540D\u5F39\u6846 -->\r\n<farris-dialog\r\n  #signDialog\r\n  [buttons]=\"signButtons\"\r\n  [width]=\"710\"\r\n  [height]=\"420\"\r\n  [title]=\"'comment.signature.dialogTitle' | translate\"\r\n  [resizable]=\"false\"\r\n  [showMaxButton]=\"false\"\r\n>\r\n  <wf-sign-here\r\n    #wfSignHere\r\n    [title]=\"''\"\r\n    [ngStyle]=\"!ifUseSign ? { display: 'none' } : null\"\r\n  ></wf-sign-here>\r\n  <div *ngIf=\"ifUseImg && tmpSignatureImage\" class=\"signature-img-default\">\r\n    <img [src]=\"tmpSignatureImage\" style=\"height: 252px\" />\r\n  </div>\r\n  <div *ngIf=\"ifUseImg && !tmpSignatureImage\" class=\"signature-img-div\">\r\n    <div class=\"signature-img-main\">\r\n      <div style=\"margin-bottom: 28px\">\r\n        <img\r\n          src=\"/platform/runtime/common/web/@gsp-wf/wf-task-handler/assets/img/signIcon.svg?v=20210623\"\r\n        />\r\n      </div>\r\n      <div class=\"signature-img-text\">\r\n        <span>{{ \"comment.signature.note1\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUseSign()\">{{\r\n          \"comment.signature.sign\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note2\" | translate }}</span>\r\n        <span class=\"signature-text-action\" (click)=\"clickToUploadImg()\">{{\r\n          \"comment.signature.upload\" | translate\r\n        }}</span>\r\n        <span>{{ \"comment.signature.note3\" | translate }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<!-- \u624B\u5199\u7B7E\u540D\u6309\u94AE -->\r\n<ng-template #signButtons>\r\n  <button class=\"btn btn-secondary\" (click)=\"clickToCancel()\">\r\n    {{ \"comment.static.cancel\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-secondary mr-2\" (click)=\"clickToReset()\">\r\n    {{ \"comment.signature.reset\" | translate }}\r\n  </button>\r\n  <button class=\"btn btn-primary mr-2\" (click)=\"clickToConfirm()\">\r\n    {{ \"comment.signature.ok\" | translate }}\r\n  </button>\r\n</ng-template>\r\n\r\n<!-- \u4F7F\u7528\u5934\u50CF\u7EC4\u4EF6\u505A\u56FE\u7247\u4E0A\u4F20 -->\r\n<farris-avatar\r\n  #farrisAvatar\r\n  (imgChange)=\"imgChange($event)\"\r\n  style=\"display: none\"\r\n></farris-avatar>\r\n",
                providers: [{
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => TaskCommentComponent)),
                        multi: true
                    },],
                styles: [":host ::ng-deep .dropdown .btn{padding:0}:host ::ng-deep .dropdown .btn-secondary{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:focus{box-shadow:none}:host ::ng-deep .dropdown .btn-secondary:hover{color:#388fff}.signatureImage:hover .attachment-delete{display:block}.fa-approve-common-gutter{margin:0 0 12px}.fa-approve-comment .approve-comment--title{display:inline-block;color:#667580;border-radius:4px 4px 0 0;height:26px;padding:0 9px;position:relative;background:#f7f7f7;cursor:pointer}.fa-approve-comment .approve-comment--title:after{content:\"\";height:100%;position:absolute;right:-10px;top:0;bottom:0;border-right:5px solid transparent;border-left:5px solid #f7f7f7;border-bottom:13px solid #f7f7f7;border-top:13px solid transparent}.fa-approve-comment .approve-comment--title .fa-btn-like-dropdown{font-size:12px;padding:2px 0}.fa-approve-comment .fa-approve-comment--content .content-textarea{border-color:#dcdcdc;border-radius:0 0 2px 2px}.fa-approve-comment .fa-approve-comment--footer{font-size:13px;color:#667580;background:#f7f7f7;align-items:center;padding:5px 0}.fa-approve-comment .approve-comment--text-btns{display:flex;flex-direction:row;padding:0 5px}.fa-approve-comment .approve-comment--text-btns .text-btns-item{display:flex;flex-direction:row;align-items:center;font-size:12px;line-height:18px;color:#667580;margin-right:12px;cursor:pointer}.fa-approve-comment .approve-comment--text-btns .text-btns-item .f-icon{margin-right:4px}li{list-style:none}.attachment-delete{float:right;cursor:pointer;display:none;text-align:right;padding-right:10px}.attachment-delete:hover{color:#4297fa}.signature-img-div{display:flex;justify-content:center;align-items:center;height:100%;background:#fafcfd;border:1px solid #d8dfed;border-radius:8px;margin:0 10px}.signature-img-main{display:flex;flex-direction:column;justify-content:center;align-items:center}.signature-img-text{font-size:13px;color:rgba(106,111,121,.85)}.signature-text-action{color:#529efe;padding:0 2px;cursor:pointer}.signature-img-default{display:flex;justify-content:center;align-items:center;height:inherit}.wf-feature-warning{display:inline-block;width:16px;height:16px;line-height:1px;vertical-align:text-bottom;background:url(/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/icon_validator.png)}.wf-approve-comment--footer{font-weight:700;align-items:center;font-family:\"PingFang SC\",\"Lantinghei SC\",\"Helvetica Neue\",Arial,\"Microsoft YaHei\",\"WenQuanYi Micro Hei\",\"Heiti SC\",\"Segoe UI\",sans-serif}.wf-feature-span{color:#f60;padding:0 2px}.task-comment-attachment{display:flex;justify-content:space-between;align-items:center;background:rgba(249,252,255,.87);border:0 solid rgba(229,232,237,.71);border-radius:3px;margin-top:10px;padding:4px;cursor:pointer;font-size:13px}.task-comment-attachment-title{display:flex;align-items:center;font-size:12px}.task-comment-attachment-img{width:20px;margin-right:10px}.task-comment-attachment-size{font-size:12px;padding:0 10px;color:rgba(45,47,51,.45)}.task-comment-attach-icon{margin-left:10px;height:16px;width:16px;color:var(--primary);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;background:#e8f2ff;cursor:pointer}.task-drop-down-menu{max-height:200px;overflow:auto}"]
            }] }
];
/** @nocollapse */
TaskCommentComponent.ctorParameters = () => [
    { type: TaskService },
    { type: UploadDialogService },
    { type: MessagerService },
    { type: LoadingService }
];
TaskCommentComponent.propDecorators = {
    showAttachment: [{ type: Input }],
    showSign: [{ type: Input }],
    showCommonComment: [{ type: Input }],
    comment: [{ type: Input }],
    placeholder: [{ type: Input }],
    processInstanceId: [{ type: Input }],
    textAreaHeight: [{ type: Input }],
    defaultComment: [{ type: Input }],
    curUserId: [{ type: Input }],
    taskOrigin: [{ type: Input }],
    TaskCenterConfig: [{ type: Input }],
    attachment: [{ type: Output }],
    signature: [{ type: Output }],
    commentDialog: [{ type: ViewChild, args: ['commentDialog',] }],
    signDialog: [{ type: ViewChild, args: ['signDialog',] }],
    dropDownEl: [{ type: ViewChild, args: ['dropdownEl',] }],
    signaturePad: [{ type: ViewChild, args: ['wfSignHere',] }],
    farrisAvatar: [{ type: ViewChild, args: ['farrisAvatar',] }],
    commentManageComp: [{ type: ViewChild, args: ['commentManageComp',] }]
};
if (false) {
    /** @type {?} */
    TaskCommentComponent.prototype.showAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.showSign;
    /** @type {?} */
    TaskCommentComponent.prototype.showCommonComment;
    /** @type {?} */
    TaskCommentComponent.prototype.comment;
    /** @type {?} */
    TaskCommentComponent.prototype.placeholder;
    /** @type {?} */
    TaskCommentComponent.prototype.processInstanceId;
    /** @type {?} */
    TaskCommentComponent.prototype.textAreaHeight;
    /** @type {?} */
    TaskCommentComponent.prototype.defaultComment;
    /** @type {?} */
    TaskCommentComponent.prototype.curUserId;
    /** @type {?} */
    TaskCommentComponent.prototype.taskOrigin;
    /** @type {?} */
    TaskCommentComponent.prototype.attachment;
    /** @type {?} */
    TaskCommentComponent.prototype.signature;
    /** @type {?} */
    TaskCommentComponent.prototype.commentDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.signDialog;
    /** @type {?} */
    TaskCommentComponent.prototype.dropDownEl;
    /** @type {?} */
    TaskCommentComponent.prototype.signaturePad;
    /** @type {?} */
    TaskCommentComponent.prototype.farrisAvatar;
    /** @type {?} */
    TaskCommentComponent.prototype.commentManageComp;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype._value;
    /** @type {?} */
    TaskCommentComponent.prototype.attachmentList;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowAttachment;
    /** @type {?} */
    TaskCommentComponent.prototype.ifShowSign;
    /** @type {?} */
    TaskCommentComponent.prototype.signatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.tmpSignatureImage;
    /** @type {?} */
    TaskCommentComponent.prototype.downloadService;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUseImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifEnableSign;
    /** @type {?} */
    TaskCommentComponent.prototype.ifUploadImg;
    /** @type {?} */
    TaskCommentComponent.prototype.ifCanEditSign;
    /** @type {?} */
    TaskCommentComponent.prototype.originSignId;
    /** @type {?} */
    TaskCommentComponent.prototype.isShowCommonTips;
    /** @type {?} */
    TaskCommentComponent.prototype.commentList;
    /** @type {?} */
    TaskCommentComponent.prototype.btnHover;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelChange;
    /** @type {?} */
    TaskCommentComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.taskService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.uploadDialog;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    TaskCommentComponent.prototype.loadingService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1jb21tZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtdGFzay1oYW5kbGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFzay1jb21tZW50L3Rhc2stY29tbWVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzlELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQW9CLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2pILE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRXpELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsVUFBVSxFQUFvQixNQUFNLGlDQUFpQyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBWXBGLE1BQU0sT0FBTyxvQkFBb0I7Ozs7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Q2hpbGQsIGZvcndhcmRSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBGRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICdAZmFycmlzL3VpLWRyb3Bkb3duJztcclxuaW1wb3J0IHsgVXBsb2FkRGlhbG9nU2VydmljZSB9IGZyb20gJ0Bnc3Atc3ZjL2Zvcm1kb2MtdXBsb2FkJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IEZpbGVEZWxldGVFbnRpdHksIEZpbGVVcGxvYWRFbnRpdHksIEdzcERvY01ldGFkYXRhLCBHc3BEb2NVcGxvYWRFbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdHkvYXR0YWNobWVudCc7XHJcbmltcG9ydCB7IFNpZ25IZXJlQ29tcG9uZW50IH0gZnJvbSAnQGdzcC13Zi93Zi1zaWduJztcclxuaW1wb3J0IHsgQXZhdGFyQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1hdmF0YXInO1xyXG5pbXBvcnQgeyBEb3dubG9hZFNlcnZpY2UgfSBmcm9tICdAZ3NwLXN2Yy9maWxlLWxvYWQnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvdGFzay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tbW9uQ29tbWVudCB9IGZyb20gJy4uLy4uL2VudGl0eS9jb21tZW50JztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBDb25maWdDb2RlLCBUYXNrQ2VudGVyQ29uZmlnIH0gZnJvbSAnLi4vLi4vZW50aXR5L3Rhc2stY2VudGVyLWNvbmZpZyc7XHJcbmltcG9ydCB7IENvbW1lbnRNYW5hZ2VDb21wb25lbnQgfSBmcm9tICcuLi9jb21tZW50LW1hbmFnZS9jb21tZW50LW1hbmFnZS5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICd3Zi1jb21tZW50JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFzay1jb21tZW50LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi90YXNrLWNvbW1lbnQuY29tcG9uZW50LnNjc3MnXSxcclxuICBwcm92aWRlcnM6IFt7XHJcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRhc2tDb21tZW50Q29tcG9uZW50KSxcclxuICAgIG11bHRpOiB0cnVlXHJcbiAgfSxdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYXNrQ29tbWVudENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xyXG5cclxuICBASW5wdXQoKSBzaG93QXR0YWNobWVudDogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbmmL7npLrpmYTku7bkuIrkvKDvvIznu4Tku7bmjqfliLZcclxuICBASW5wdXQoKSBzaG93U2lnbjogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbmmL7npLrnrb7lkI3vvIznu4Tku7bmjqfliLbvvIjkuI3lkIzliqjkvZzlj6/og73kvJrkuI3mmL7npLrvvIlcclxuICBASW5wdXQoKSBzaG93Q29tbW9uQ29tbWVudCA9IHRydWU7Ly/mmK/lkKbmmL7npLrluLjnlKjmhI/op4FcclxuICBASW5wdXQoKSBjb21tZW50OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnJztcclxuICBASW5wdXQoKSBwcm9jZXNzSW5zdGFuY2VJZDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIHRleHRBcmVhSGVpZ2h0OiBudW1iZXIgPSAxMjA7Ly/mloflrZfmoYbnmoTpq5jluqZcclxuICBASW5wdXQoKSBkZWZhdWx0Q29tbWVudDogc3RyaW5nOy8v6buY6K6k55qE5oSP6KeBXHJcbiAgQElucHV0KCkgY3VyVXNlcklkOiBzdHJpbmc7Ly/lvZPliY3nlKjmiLdpZFxyXG4gIEBJbnB1dCgpIHRhc2tPcmlnaW46IHN0cmluZzsvL+W9k+WJjeaYr+S7u+WKoeWIl+ihqOaJk+W8gOi/mOaYr+S7u+WKoeWKnueQhueVjOmdouaJk+W8gFxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBUYXNrQ2VudGVyQ29uZmlnKGNvbmZpZ0xpc3Q6IFRhc2tDZW50ZXJDb25maWdbXSkge1xyXG4gICAgaWYgKGNvbmZpZ0xpc3QgJiYgY29uZmlnTGlzdC5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgYXR0YWNobWVudCA9IGNvbmZpZ0xpc3QuZmluZChhID0+IGEuY29uZmlnQ29kZSA9PSBDb25maWdDb2RlLklmX1Nob3dfQXR0YWNobWVudCk7XHJcbiAgICAgIGNvbnN0IHNpZ24gPSBjb25maWdMaXN0LmZpbmQoYSA9PiBhLmNvbmZpZ0NvZGUgPT0gQ29uZmlnQ29kZS5JZl9TaG93X1NpZ25hdHVyZSk7XHJcbiAgICAgIGNvbnN0IGVuYWJsZVNpZ24gPSBjb25maWdMaXN0LmZpbmQoYSA9PiBhLmNvbmZpZ0NvZGUgPT0gQ29uZmlnQ29kZS5JZl9Vc2VfU2lnbl9CeV9EZWZhdWx0KTtcclxuICAgICAgY29uc3QgZWRpdFNpZ24gPSBjb25maWdMaXN0LmZpbmQoYSA9PiBhLmNvbmZpZ0NvZGUgPT09IENvbmZpZ0NvZGUuSWZfQ2FuX0VkaXRfU2lnbmF0dXJlKTtcclxuICAgICAgYXR0YWNobWVudCAmJiBhdHRhY2htZW50LmN1cnJlbnRWYWx1ZSA9PT0gJ3RydWUnICYmICh0aGlzLmlmU2hvd0F0dGFjaG1lbnQgPSB0cnVlKTtcclxuICAgICAgc2lnbiAmJiBzaWduLmN1cnJlbnRWYWx1ZSA9PT0gJ3RydWUnICYmICh0aGlzLmlmU2hvd1NpZ24gPSB0cnVlKTtcclxuICAgICAgZW5hYmxlU2lnbiAmJiBlbmFibGVTaWduLmN1cnJlbnRWYWx1ZSA9PT0gJ2ZhbHNlJyAmJiAodGhpcy5pZkVuYWJsZVNpZ24gPSBmYWxzZSk7XHJcbiAgICAgIGVkaXRTaWduICYmIGVkaXRTaWduLmN1cnJlbnRWYWx1ZSA9PT0gJ2ZhbHNlJyAmJiAodGhpcy5pZkNhbkVkaXRTaWduID0gZmFsc2UpO1xyXG4gICAgICBpZiAodGhpcy5pZlNob3dTaWduICYmIHRoaXMuaWZFbmFibGVTaWduKSB7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyU2lnbih0aGlzLmN1clVzZXJJZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBPdXRwdXQoKSBhdHRhY2htZW50ID0gbmV3IEV2ZW50RW1pdHRlcigpOy8v6ZmE5Lu2XHJcbiAgQE91dHB1dCgpIHNpZ25hdHVyZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTsvL+S4iuS8oOetvuWQjeS5i+WQju+8jOWPkemAgeetvuWQjWlkXHJcbiAgQFZpZXdDaGlsZCgnY29tbWVudERpYWxvZycpIGNvbW1lbnREaWFsb2c6IERpYWxvZ0NvbXBvbmVudDsvL+W4uOeUqOaEj+ingeeuoeeQhlxyXG4gIEBWaWV3Q2hpbGQoJ3NpZ25EaWFsb2cnKSBzaWduRGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7Ly/miYvlhpnnrb7lkI3lvLnmoYZcclxuICBAVmlld0NoaWxkKCdkcm9wZG93bkVsJykgZHJvcERvd25FbDogRkRyb3Bkb3duRGlyZWN0aXZlOy8v6Kej5Yaz6YCJ5oup5oSP6KeB5ZCO77yM5LiL5ouJ6I+c5Y2V5peg5rOV5pS25oqY55qE6Zeu6aKYXHJcbiAgQFZpZXdDaGlsZCgnd2ZTaWduSGVyZScpIHNpZ25hdHVyZVBhZDogU2lnbkhlcmVDb21wb25lbnQ7Ly/miYvlhpnnrb7lkI3nu4Tku7ZcclxuICBAVmlld0NoaWxkKCdmYXJyaXNBdmF0YXInKSBmYXJyaXNBdmF0YXI6IEF2YXRhckNvbXBvbmVudDsvL+WktOWDj+e7hOS7tu+8jOeUqOS9nOetvuWQjeWbvueJh+S4iuS8oFxyXG4gIEBWaWV3Q2hpbGQoJ2NvbW1lbnRNYW5hZ2VDb21wJykgY29tbWVudE1hbmFnZUNvbXA6IENvbW1lbnRNYW5hZ2VDb21wb25lbnQ7Ly/mhI/op4Hnu7TmiqTnu4Tku7ZcclxuXHJcblxyXG4gIHByaXZhdGUgX3ZhbHVlID0gJyc7XHJcbiAgYXR0YWNobWVudExpc3Q6IGFueVtdID0gW107XHJcbiAgaWZTaG93QXR0YWNobWVudDogYm9vbGVhbiA9IGZhbHNlOy8v5Lu75Yqh5Lit5b+D6YWN572u77yM5piv5ZCm5pi+56S66ZmE5Lu25LiK5LygXHJcbiAgaWZTaG93U2lnbjogYm9vbGVhbiA9IGZhbHNlOy8v5Lu75Yqh5Lit5b+D6YWN572u77yM5piv5ZCm5pi+56S65omL5YaZ562+5ZCNXHJcbiAgc2lnbmF0dXJlSW1hZ2U6IHN0cmluZzsvL+etvuWQjeWbvueJh+eahGJhc2U2NOWAvFxyXG4gIHRtcFNpZ25hdHVyZUltYWdlOiBzdHJpbmc7Ly/kuLTml7bkv53lrZjkuIrkvKDnmoTlm77niYdcclxuICBkb3dubG9hZFNlcnZpY2UgPSBuZXcgRG93bmxvYWRTZXJ2aWNlKCk7XHJcbiAgaWZVc2VTaWduOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbkvb/nlKjmiYvlhplcclxuICBpZlVzZUltZzogYm9vbGVhbiA9IHRydWU7Ly/mmK/lkKbkvb/nlKjkuIrkvKDlm77niYdcclxuICBpZkVuYWJsZVNpZ246IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm6buY6K6k5ZCv55So562+5ZCNXHJcbiAgaWZVcGxvYWRJbWc6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS4iuS8oOi/h+WbvueJh1xyXG4gIGlmQ2FuRWRpdFNpZ246IGJvb2xlYW4gPSB0cnVlOy8v5piv5ZCm5YWB6K6457yW6L6R562+5ZCNXHJcbiAgb3JpZ2luU2lnbklkOiBzdHJpbmc7Ly/ljp/lp4vnmoTnrb7lkI1pZFxyXG4gIGlzU2hvd0NvbW1vblRpcHM6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuWxleekuuaPkOekulxyXG4gIGNvbW1lbnRMaXN0OiBDb21tb25Db21tZW50W10gPSBbXTtcclxuXHJcblxyXG4gIGJ0bkhvdmVyID0gey8v5oyJ6ZKuaG92ZXLmoLflvI/lj5jljJZcclxuICAgIGNvbW1lbnRIb3ZlcjogZmFsc2UsXHJcbiAgICBhdHRhY2htZW50SG92ZXI6IGZhbHNlLFxyXG4gICAgc2lnbkhvdmVyOiBmYWxzZVxyXG4gIH1cclxuXHJcbiAgc2V0IHZhbHVlKHYpIHtcclxuICAgIGlmICh0aGlzLl92YWx1ZSAhPT0gdikge1xyXG4gICAgICB0aGlzLl92YWx1ZSA9IHY7XHJcbiAgICAgIHRoaXMub25Nb2RlbENoYW5nZSh2KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIGdldCB2YWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIG9uTW9kZWxDaGFuZ2UgPSAob2JqOiBhbnkpID0+IHsgfTtcclxuICBvbk1vZGVsVG91Y2hlZCA9IChvYmo6IGFueSkgPT4geyB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdGFza1NlcnZpY2U6IFRhc2tTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB1cGxvYWREaWFsb2c6IFVwbG9hZERpYWxvZ1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxvYWRpbmdTZXJ2aWNlOiBMb2FkaW5nU2VydmljZSxcclxuICApIHtcclxuXHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuY29tbWVudE1hbmFnZUNvbXAuZ2V0Q29uZmlybVNVYmplY3QoKS5zdWJzY3JpYmUocmUgPT4ge1xyXG4gICAgICB0aGlzLmNvbW1lbnREaWFsb2cgJiYgdGhpcy5jb21tZW50RGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5jb21tZW50TWFuYWdlQ29tcC5nZXRDYW5jZWxTdWJqZWN0KCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy5jb21tZW50RGlhbG9nICYmIHRoaXMuY29tbWVudERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8ueWHuuW4uOeUqOaEj+ingeeuoeeQhuahhlxyXG4gICAqL1xyXG4gIHNob3dDb21tZW50RGlhbG9nKCkge1xyXG4gICAgdGhpcy5kcm9wRG93bkVsICYmIHRoaXMuZHJvcERvd25FbC5jbG9zZSgpO1xyXG4gICAgdGhpcy5jb21tZW50RGlhbG9nLnNob3coKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOeCueWHu+W4uOeUqOaEj+inge+8jOiOt+WPlueUqOaIt+W4uOeUqOaEj+ingeWIl+ihqFxyXG4gICAqL1xyXG4gIGxvYWRDb21tZW50cygpIHtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuZ2V0Q29tbWVudExpc3QoKS5zdWJzY3JpYmUoKGRhdGE6IGFueVtdKSA9PiB7XHJcbiAgICAgIHRoaXMuY29tbWVudExpc3QgPSBkYXRhO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb250cm9sVmFsdWVBY2Nlc3NvcuW/hemhu+WunueOsOeahOaWueazlVxyXG4gICAqL1xyXG4gIHdyaXRlVmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XHJcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcclxuICAgIHRoaXMub25Nb2RlbENoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcclxuICAgIHRoaXMub25Nb2RlbFRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieaLqeS4gOadoeW4uOeUqOaEj+ingeWQjuS6i+S7tlxyXG4gICAqL1xyXG4gIGJ1dHRvbkNsaWNrKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5kcm9wRG93bkVsLmNsb3NlKCk7XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSA9PSB0aGlzLmRlZmF1bHRDb21tZW50ID8gZGF0YSA6IHRoaXMudmFsdWUgKyBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LiK5Lyg6ZmE5Lu2XHJcbiAgICovXHJcbiAgdXBsb2FkQXR0YWNobWVudCgpIHtcclxuICAgIGxldCBpc1JlcGVhdCA9IGZhbHNlO1xyXG4gICAgdGhpcy51cGxvYWREaWFsb2cudXBsb2FkRmlsZSh0aGlzLnByb2Nlc3NJbnN0YW5jZUlkID8gdGhpcy5wcm9jZXNzSW5zdGFuY2VJZCA6ICdnc3B3ZnRhc2thdHRhY2htZW50JywgJ3dmX2F0dGFjaG1lbnQnKS50aGVuKHJlID0+IHtcclxuICAgICAgZm9yIChsZXQgaSBvZiAocmUgYXMgYW55W10pKSB7XHJcbiAgICAgICAgaXNSZXBlYXQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBhdHRhY2ggb2YgdGhpcy5hdHRhY2htZW50TGlzdCkge1xyXG4gICAgICAgICAgaWYgKGF0dGFjaC5maWxlTmFtZSA9PT0gaS5maWxlTmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLmluZm8oJ+WMheWQq+mHjeWkjeaWh+S7ticgKyBpLmZpbGVOYW1lKTtcclxuICAgICAgICAgICAgaXNSZXBlYXQgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1JlcGVhdCkge1xyXG4gICAgICAgICAgdGhpcy5hdHRhY2htZW50TGlzdC5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmF0dGFjaG1lbnQuZW1pdCh0aGlzLmF0dGFjaG1lbnRMaXN0KTtcclxuICAgICAgLy/miafooYzkuIrkvKDpmYTku7ZcclxuICAgICAgbGV0IGZpbGVzID0gbmV3IEZpbGVVcGxvYWRFbnRpdHkoKTtcclxuICAgICAgZmlsZXMucm9vdElkID0gXCJ3Zl9hdHRhY2htZW50XCI7XHJcbiAgICAgIGZpbGVzLm1ldGFkYXRhSWRMaXN0ID0gW107XHJcbiAgICAgIHRoaXMuYXR0YWNobWVudExpc3QuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBmaWxlcy5tZXRhZGF0YUlkTGlzdC5wdXNoKGEubWV0YWRhdGFJZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIGZpbGVzLm1ldGFkYXRhSWRMaXN0Lmxlbmd0aCAmJiB0aGlzLnRhc2tTZXJ2aWNlLnVwbG9hZEF0dGFjaG1lbnQoZmlsZXMpLnN1YnNjcmliZSgoKSA9PiB7IH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliKDpmaTpmYTku7ZcclxuICAgKi9cclxuICBhdHRhY2htZW50RGVsZXRlKGF0dGFjaG1lbnQpIHtcclxuICAgIHZhciBnc3BEb2NEZWxldGVFbnRpdHk6IEZpbGVEZWxldGVFbnRpdHkgPSB7XHJcbiAgICAgIHJvb3RJZDogXCJ3Zl9hdHRhY2htZW50XCIsXHJcbiAgICAgIG1ldGFkYXRhSWQ6IGF0dGFjaG1lbnQubWV0YWRhdGFJZCxcclxuICAgICAgbW9kZTogXCJGb3JtYWxcIlxyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gdGhpcy5hdHRhY2htZW50TGlzdC5pbmRleE9mKGF0dGFjaG1lbnQpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5hdHRhY2htZW50TGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hdHRhY2htZW50LmVtaXQodGhpcy5hdHRhY2htZW50TGlzdCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmRlbGV0ZUF0dGFjaG1lbnQoZ3NwRG9jRGVsZXRlRW50aXR5KS5zdWJzY3JpYmUoKCkgPT4geyB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogd2Vi56uv5omT5byA6ZmE5Lu26aKE6KeIXHJcbiAgKi9cclxuICBhdHRhY2htZW50UHJldmlldyhtZXRhZGF0YUlkKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBhcHBUeXBlOiBcImFwcFwiLFxyXG4gICAgICBmdW5jSWQ6IFwiXCIsXHJcbiAgICAgIHRhYk5hbWU6IFwi5paH5qGj5Zyo57q/6aKE6KeIXCIsXHJcbiAgICAgIGFwcElkOiBcIjZjY2I0NzZiLWYyYmEtZGY4Zi02ZjQ3LWQzN2QxMDBjNTZlMlwiLFxyXG4gICAgICBhcHBFbnRyYW5jZTogXCJkb2N2aWV3ZXJ0YWJcIixcclxuICAgICAgdGFiSWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgICBlbnRpdHlQYXJhbXM6IHtcclxuICAgICAgICBtZXRhZGF0YUlkTGlzdDogW21ldGFkYXRhSWRdLFxyXG4gICAgICAgIHJvb3RJZDogXCJ3Zl9hdHRhY2htZW50XCIsXHJcbiAgICAgICAgbWV0YWRhdGFJZDogbnVsbCxcclxuICAgICAgICB2aWV3T3B0aW9uczoge1xyXG4gICAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZSxcclxuICAgICAgICAgIHNob3dQYWdpbmc6IHRydWUsXHJcbiAgICAgICAgICBzaG93VGh1bWJuYWlsczogdHJ1ZSxcclxuICAgICAgICAgIHNob3dEb3dubG9hZDogdHJ1ZSxcclxuICAgICAgICAgIHNob3dTZWFyY2g6IHRydWUsXHJcbiAgICAgICAgICBzaG93Wm9vbTogdHJ1ZSxcclxuICAgICAgICAgIHNob3dQcmludDogdHJ1ZSxcclxuICAgICAgICAgIHNob3dTZWNvbmRhcnlUb29sQmFyOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgKHdpbmRvdyBhcyBhbnkpLmdzcGZyYW1ld29ya1NlcnZpY2UucnRmLmZ1bmMub3Blbk1lbnUob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bkuI3lkIzmoLzlvI/pmYTku7bnmoTnvKnnlaXlm75cclxuICAgKi9cclxuICBpbWFnZVVybChhdHRhY2htZW50SW5mbykge1xyXG4gICAgY29uc3QgdXJsID0gJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYmFwcC9tb2JpbGV0YXNrY2VudGVyL2Fzc2V0cy9hY2Nlc3NvcnkvJztcclxuICAgIHJldHVybiB1cmwgKyB0aGlzLnRhc2tTZXJ2aWNlLmNyZWF0ZUl0ZW0oYXR0YWNobWVudEluZm8pICsgJy5zdmc/dj0yMDIyMDMwMyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlsZXnpLrmiYvlhpnnrb7lkI1kaWFsb2dcclxuICAgKi9cclxuICBzaG93U2lnbkRpYWxvZygpIHtcclxuICAgIHRoaXMuc2lnbkRpYWxvZy5zaG93KCk7XHJcbiAgICBpZiAoIXRoaXMuaWZFbmFibGVTaWduKSB7XHJcbiAgICAgIHRoaXMuZ2V0VXNlclNpZ24odGhpcy5jdXJVc2VySWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog54K55Ye75Yig6Zmk562+5ZCNXHJcbiAgICovXHJcbiAgY2xpY2tUb0RlbGV0ZUltYWdlKCkge1xyXG4gICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy5zaWduYXR1cmUuZW1pdChudWxsKTtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuYWRkVXNlckNvbmZpZyhDb25maWdDb2RlLklmX1VzZV9TaWduX0J5X0RlZmF1bHQsICdmYWxzZScpLnN1YnNjcmliZShyZSA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgIH0sICgpID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNsaWNrVG9Vc2VTaWduKCkge1xyXG4gICAgdGhpcy5pZlVzZUltZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZlVzZVNpZ24gPSB0cnVlO1xyXG4gICAgY29uc3QgY2FudmFzOiBhbnkgPSB0aGlzLnNpZ25hdHVyZVBhZC5jYW52YXNEaXYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSAyNTI7XHJcbiAgICBjYW52YXMud2lkdGggPSA2NjU7XHJcbiAgfVxyXG5cclxuICBjbGlja1RvVXBsb2FkSW1nKCkge1xyXG4gICAgdGhpcy5mYXJyaXNBdmF0YXIub25DbGljaygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5omL5YaZ562+5ZCN54K556Gu5a6aXHJcbiAgICovXHJcbiAgY2xpY2tUb0NvbmZpcm0oKSB7XHJcbiAgICBsZXQgaW1hZ2U6IGFueTtcclxuICAgIGlmICh0aGlzLnNpZ25hdHVyZVBhZCAmJiB0aGlzLnNpZ25hdHVyZVBhZC5pc0RyYXcpIHsvL+WmguaenOetvui/h+WQjVxyXG4gICAgICBpbWFnZSA9IHRoaXMuc2lnbmF0dXJlUGFkLmNvbmZpcm0oKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pZlVwbG9hZEltZykgey8v5aaC5p6c5LiK5Lyg6L+H5Zu+54mHXHJcbiAgICAgIGltYWdlID0gdGhpcy50bXBTaWduYXR1cmVJbWFnZTtcclxuICAgIH1cclxuICAgIGlmIChpbWFnZSkge1xyXG4gICAgICB0aGlzLnVwbG9hZFNpZ25hdHVyZUltZyhpbWFnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNpZ25hdHVyZUltYWdlID0gdGhpcy50bXBTaWduYXR1cmVJbWFnZTtcclxuICAgICAgdGhpcy5zaWduYXR1cmUuZW1pdCh0aGlzLm9yaWdpblNpZ25JZCk7XHJcbiAgICAgIHRoaXMuc2lnbkRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLy/mt7vliqDlkK/nlKjnrb7lkI3phY3nva5cclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UuYWRkVXNlckNvbmZpZyhDb25maWdDb2RlLklmX1VzZV9TaWduX0J5X0RlZmF1bHQsICd0cnVlJykuc3Vic2NyaWJlKHJlID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgfSwgKCkgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog54K55Ye75riF56m6XHJcbiAgICovXHJcbiAgY2xpY2tUb1Jlc2V0KCkge1xyXG4gICAgdGhpcy5pZlVzZVNpZ24gPSBmYWxzZTtcclxuICAgIHRoaXMuaWZVc2VJbWcgPSB0cnVlO1xyXG4gICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy50bXBTaWduYXR1cmVJbWFnZSA9ICcnO1xyXG4gICAgdGhpcy5zaWduYXR1cmUuZW1pdCgnJyk7XHJcbiAgICB0aGlzLnNpZ25hdHVyZVBhZCAmJiAodGhpcy5zaWduYXR1cmVQYWQuaXNEcmF3ID0gZmFsc2UpO1xyXG4gICAgdGhpcy5pZlVwbG9hZEltZyA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog54K55Ye75Y+W5raIXHJcbiAgICovXHJcbiAgY2xpY2tUb0NhbmNlbCgpIHtcclxuICAgIHRoaXMuc2lnbkRpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LiK5Lyg5Zu+54mH5ZCO5LqL5Lu2XHJcbiAgICogZXZlbnQuYmFzZTY0IOaYr+WbvueJh+S/oeaBryxldmVudC5uYW1l5piv5bim5ZCO57yA55qE5Zu+54mH5ZCN77yMZXZlbnQudHlwZeWmgmltYWdlL2pwZWdcclxuICAgKi9cclxuICBpbWdDaGFuZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5pZlVzZUltZyA9IHRydWU7XHJcbiAgICB0aGlzLmlmVXNlU2lnbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5pZlVwbG9hZEltZyA9IHRydWU7XHJcbiAgICBjb25zdCBpbWFnZSA9IGV2ZW50LmJhc2U2NDtcclxuICAgIHRoaXMudG1wU2lnbmF0dXJlSW1hZ2UgPSBpbWFnZTtcclxuICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSBpbWFnZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4iuS8oOetvuWQjVxyXG4gICAqIEBwYXJhbSBpbWFnZSBcclxuICAgKi9cclxuICBwcml2YXRlIHVwbG9hZFNpZ25hdHVyZUltZyhpbWFnZTogYW55KSB7XHJcbiAgICB2YXIgdXBsb2FkU2lnbmF0dXJlID0gbmV3IEdzcERvY1VwbG9hZEVudGl0eSgpO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLmZpbGVDb250ZW50ID0gaW1hZ2Uuc3BsaXQoJywnKVsxXTtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5maWxlUGF0aCA9IHRoaXMuY3VyVXNlcklkO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1vZGUgPSBcIkZvcm1hbFwiO1xyXG4gICAgdXBsb2FkU2lnbmF0dXJlLm1ldGFkYXRhID0gbmV3IEdzcERvY01ldGFkYXRhKCk7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubWV0YWRhdGEuaWQgPSB0aGlzLnRhc2tTZXJ2aWNlLmNyZWF0ZU5NKCk7XHJcbiAgICB1cGxvYWRTaWduYXR1cmUubWV0YWRhdGEuZmlsZU5hbWUgPSB0aGlzLnRhc2tTZXJ2aWNlLmNyZWF0ZU5NKCkgKyBcIi5wbmdcIjtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tZXRhZGF0YS5yb290SWQgPSBcInRhc2tjZW50ZXJzaWduYXR1cmVcIjtcclxuICAgIHVwbG9hZFNpZ25hdHVyZS5tZXRhZGF0YS5kb2NUeXBlID0gXCJwbmdcIjtcclxuICAgIGNvbnN0IGxvYWQgPSB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIHRoaXMudGFza1NlcnZpY2UudXBsb2FkU2lnbmF0dXJlKHVwbG9hZFNpZ25hdHVyZSkuc3Vic2NyaWJlKHNpZ25JZCA9PiB7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgICAgdGhpcy5vcmlnaW5TaWduSWQgPSBzaWduSWQ7XHJcbiAgICAgIHRoaXMuc2lnbmF0dXJlLmVtaXQoc2lnbklkKTtcclxuICAgICAgdGhpcy5zaWduYXR1cmVJbWFnZSA9IGltYWdlO1xyXG4gICAgICB0aGlzLnNpZ25EaWFsb2cuY2xvc2UoKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dzcFdmVGFza1VzZXJTaWduJyArIHRoaXMuY3VyVXNlcklkICsgdGhpcy50YXNrU2VydmljZS5nZXRDdXJyZW50RGF0ZVN0cmluZygpLCBzaWduSWQpO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICBsb2FkLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuZXJyb3IoJ+S4iuS8oOetvuWQjeWksei0pScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnlKjmiLfnmoTmnIDov5HkuIDmrKHnrb7lkI1cclxuICAgKi9cclxuICBwcml2YXRlIGdldFVzZXJTaWduKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBsb2FkID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICB0aGlzLnRhc2tTZXJ2aWNlLmdldFVzZXJTaWduSWQodXNlcklkKS5zdWJzY3JpYmUoc2lnbklkID0+IHtcclxuICAgICAgbG9hZC5jbG9zZSgpO1xyXG4gICAgICBpZiAoc2lnbklkKSB7XHJcbiAgICAgICAgdGhpcy5zaWduYXR1cmUuZW1pdChzaWduSWQpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luU2lnbklkID0gc2lnbklkO1xyXG4gICAgICAgIHRoaXMuc2lnbmF0dXJlSW1hZ2UgPSB0aGlzLmRvd25sb2FkU2VydmljZS5nZXREb3dubG9hZFVybChzaWduSWQsICd0YXNrY2VudGVyc2lnbmF0dXJlJyk7XHJcbiAgICAgICAgdGhpcy50bXBTaWduYXR1cmVJbWFnZSA9IHRoaXMuc2lnbmF0dXJlSW1hZ2U7XHJcbiAgICAgIH1cclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIGxvYWQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvL+aWh+acrOahhuWAvOWPmOWKqOebkeWQrOS6i+S7tlxyXG4gIHZhbHVlQ2hhbmdlKGUpIHtcclxuICAgIGlmICh0aGlzLnRhc2tTZXJ2aWNlLmdldEJ5dGVzTGVuZ3RoKHRoaXMudmFsdWUpID4gNDAwMCkge1xyXG4gICAgICB0aGlzLmlzU2hvd0NvbW1vblRpcHMgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc1Nob3dDb21tb25UaXBzID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcblxyXG59XHJcbiJdfQ==