{"version":3,"file":"gsp-wf-wf-task-handler.js.map","sources":["ng://@gsp-wf/wf-task-handler/lib/service/task.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-action.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/en.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-cht.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/zh-chs.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/index.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/i18n.service.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-entity.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-context.ts","ng://@gsp-wf/wf-task-handler/lib/entity/complete-response.ts","ng://@gsp-wf/wf-task-handler/lib/entity/task-center-config.ts","ng://@gsp-wf/wf-task-handler/lib/entity/workitem-execute-param.ts","ng://@gsp-wf/wf-task-handler/lib/entity/urge-handle.ts","ng://@gsp-wf/wf-task-handler/lib/entity/batchVerifysigned.ts","ng://@gsp-wf/wf-task-handler/lib/entity/wfContext.ts","ng://@gsp-wf/wf-task-handler/lib/components/urge-handle/urge-handle.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/add-sign.ts","ng://@gsp-wf/wf-task-handler/lib/entity/simulaite-subject.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-execute/task-execute.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/start-process-payload.ts","ng://@gsp-wf/wf-task-handler/lib/entity/postMessage.ts","ng://@gsp-wf/wf-task-handler/lib/entity/process-cache.ts","ng://@gsp-wf/wf-task-handler/lib/submit/process-selector/process-selector.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/comment.ts","ng://@gsp-wf/wf-task-handler/lib/entity/commonCommentFilter.ts","ng://@gsp-wf/wf-task-handler/lib/components/comment-manage/comment-manage.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.service.ts","ng://@gsp-wf/wf-task-handler/lib/service/i18n/translate.pipe.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-assigninfo/task-assigninfo.component.ts","ng://@gsp-wf/wf-task-handler/lib/entity/farris-user-help-param.ts","ng://@gsp-wf/wf-task-handler/lib/components/assignee-info/assignee-info.component.ts","ng://@gsp-wf/wf-task-handler/lib/throttleTime/throttleClickDirective.ts","ng://@gsp-wf/wf-task-handler/lib/entity/attachment.ts","ng://@gsp-wf/wf-task-handler/lib/components/task-comment/task-comment.component.ts","ng://@gsp-wf/wf-task-handler/lib/wf-task-handler.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@ecp-caf/caf-common';\r\nimport { Observable, forkJoin, Subject } from 'rxjs';\r\nimport { AssignParameter } from '../entity/complete-response';\r\nimport { CompleteContext } from '../entity/complete-context';\r\nimport { BatchVerifySignedContext } from '../entity/batchVerifysigned';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { CancelSubmitPayload, StartProcessPayload } from '../entity/start-process-payload';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocUploadEntity } from '../entity/attachment';\r\nimport { WorkItemExecuteParam } from '../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleSimulateContext } from '../entity/urge-handle';\r\nimport { AddSignPayload } from '../entity/add-sign';\r\nimport { ServerExceptionEntity } from '../entity/exception-entity';\r\nimport { BsModalRef } from '@farris/ui-modal';\r\nimport { TaskCenterConfig } from '../entity/task-center-config';\r\nimport { CommonComment } from '../entity/comment';\r\nimport { CommonCommentFilter } from '../entity/commonCommentFilter';\r\n\r\n@Injectable()\r\nexport class TaskService {\r\n\r\n    constructor(\r\n        private httpSvc: HttpService,\r\n        private message: MessagerService,\r\n    ) { }\r\n\r\n    getUsersByIds(ids: string[]): Observable<any> {\r\n        var pathUrl = '/api/runtime/sys/v1.0/users';\r\n        return forkJoin(ids.map(id => this.httpSvc.get(pathUrl + `/${id}` + `?mode=0002`)));\r\n    }\r\n    /**\r\n     * 获取工作项操作列表\r\n     */\r\n    getWorkItemActions(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/actions`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 执行审批操作\r\n     * @param context 执行审批上下文\r\n     */\r\n    complete(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 执行审批预解析\r\n     * @param context 执行审批上下文\r\n     */\r\n    completeSimulate(context: CompleteContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/complete-simulation`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 获取跳转活动信息\r\n     * @param workItemId 工作项Id\r\n     * @param action 动作编号\r\n     */\r\n    getDestinationScope(workItemId: string, action: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/nextNodes/${action}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据节点ID获取指定参与者的结果\r\n     * @param workItemId\r\n     * @param nodeId 说明：nodeIds=[\"node1\",\"node2\",···]\r\n     * @returns 指派信息的数组 re: FlowNodeInfo[]\r\n     */\r\n    getSimulationAssigneeInfo(workItemId: string, nodeId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/simulation-assigneeInfo?nodeIds=[${nodeId}]`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 执行征询、知会\r\n     * @param context 上下文\r\n     */\r\n    addSign(context: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/counterSignAdd`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 已阅\r\n     * @param context 参数\r\n     */\r\n    readTask(context: WorkItemExecuteParam): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/read`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 查询单据信息（方法名不要动，其他地方有引用）\r\n     * @param workItemId 工作项Id\r\n     */\r\n    getTaskFormInfo(workItemId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let cacheCode = \"gspWfTaskFormInfo\" + workItemId;\r\n        const taskForm = localStorage.getItem(cacheCode);\r\n        if (taskForm) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(taskForm));\r\n            }, 10);\r\n        } else {\r\n            const formParUrl = `/api/runtime/wf/v1.0/workItems/${workItemId}/formInfo`;\r\n            this.httpSvc.get(formParUrl).subscribe(re => {\r\n                subject.next(re);\r\n                localStorage.setItem(cacheCode, JSON.stringify(re));\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取指派信息\r\n     * @param taskId 工作项Id\r\n     * 此接口只返回一个AssignInfo类序列化后的信息，不是多个\r\n     */\r\n    getAssigneeInfo(taskId: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${taskId}/assigneeInfo`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取加签移交范围设置\r\n     * @param workItemId\r\n     * @param actionCode\r\n     */\r\n    getOrganizationScope(workItemId: string, actionCode: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/organizationScope/${actionCode}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据流程实例ID和任务状态办理任务\r\n     * @param procInstId 流程实例id\r\n     * @param state 任务状态 2或5\r\n     */\r\n    getTaskByProcInstId(procInstId: string, state: number): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/processInstanceId?procInstId=${procInstId}&state=${state}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据workitemID获取任务实体\r\n     * @param workItemId\r\n     */\r\n    getTaskByWorkItemId(workItemId: string): Observable<any> {\r\n        const url = `/api/runtime/task/v1.0/tasks/sourceId/${workItemId}`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 根据工作项ID指派任务\r\n     * @param assigneesPa 指派参数\r\n     */\r\n    assignNextUsersByWorkItemId(assigneesPa: AssignParameter): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/assignUser`;\r\n        return this.httpSvc.post(url, assigneesPa);\r\n    }\r\n\r\n    /**\r\n     * 取回\r\n     * @param workItemId task id\r\n     * @param comment comment\r\n     */\r\n    retrieve(context: { workItemId: string, comment?: string }): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/retrieve`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 任务移交\r\n     * @param taskId 工作项Id\r\n     * @param targetUId 目标用户Id\r\n     */\r\n    transfer(transferContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/transfer`;\r\n        return this.httpSvc.post(url, transferContext);\r\n    }\r\n\r\n    /**\r\n     * 任务评论\r\n     * @param taskId 工作项Id\r\n     * @param targetUId 目标用户Id\r\n     */\r\n    comment(commentContext: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/comment`;\r\n        return this.httpSvc.post(url, commentContext);\r\n    }\r\n\r\n    /**\r\n     * 领用任务\r\n     * @param taskId 工作项Id\r\n     */\r\n    claim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/claim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * 取消领用\r\n     * @param taskId 任务Id\r\n     */\r\n    unClaim(taskId: string, comment: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/unclaim`;\r\n        const options = {\r\n            workItemId: taskId,\r\n            comment: comment\r\n        };\r\n        return this.httpSvc.post(url, options);\r\n    }\r\n\r\n    /**\r\n     * 报错提示\r\n     * @param error\r\n     */\r\n    error(error: any) {\r\n        if (error && error.error && error.error.Message) {\r\n            var message = error.error.Message;\r\n            this.message.show('warning', message, { safeHtml: false });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 启动流程接口\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcess(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 启动流程预解析\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcessSimulate(payload: StartProcessPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess-simulation`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 取消提交\r\n     * @param param 参数\r\n     */\r\n    cancelSubmit(param: CancelSubmitPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/cancelSubmit`;\r\n        return this.httpSvc.post(url, param);\r\n    }\r\n\r\n    static newId() {\r\n        const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n\r\n    /**\r\n     * 获取用户常用意见列表\r\n     * @returns \r\n     */\r\n    getCommentList(filter?: CommonCommentFilter): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/commonComments`;\r\n        filter && filter.type && (url += `?type=${filter.type}`)\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 添加常用意见\r\n     * @returns \r\n     */\r\n    addComment(comment: CommonComment): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments`;\r\n        return this.httpSvc.post(url, comment);\r\n    }\r\n\r\n    /**\r\n     * 删除一条常用意见\r\n     * @param id 常用意见id\r\n     * @returns \r\n     */\r\n    deleteComment(id: string): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/commonComments/${id}`;\r\n        return this.httpSvc.delete(url, null);\r\n    }\r\n\r\n    /**\r\n     * 获取任务中心配置项\r\n     * @param code 配置项的Code\r\n     */\r\n    getTaskCenterConfigByCode(code: string, ownerType?: string, ownerId?: string): Observable<any> {\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/code?code=${code}`;\r\n        ownerType && (url += `&ownerType=${ownerType}`);\r\n        ownerId && (url += `&ownerId=${ownerId}`);\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取系统级别配置（缓存为一天）\r\n     */\r\n    getAllTaskCenterConfig(): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskAllConfig\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all?ownerType=all&ownerId=*`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                subject.next(re);\r\n                this.removeConfig(code);\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取任务分类级别配置\r\n     */\r\n    getTaskCategoryCenterConfig(categoryId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskCategoryConfig\" + categoryId;\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all`;\r\n            url += `?ownerType=category&ownerId=${categoryId}`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                subject.next(re);\r\n                this.removeConfig(code);\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n    * 获取任务中心个人用户配置（缓存为一天）\r\n    */\r\n    getAllUserConfig(): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskUserConfig\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(configStr));\r\n            }, 10);\r\n        } else {\r\n            let url = `/api/runtime/task/v1.0/task-center-setting/all`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                localStorage.setItem(todayCode, JSON.stringify(re));\r\n                this.removeConfig(code);\r\n                subject.next(re);\r\n            }, error => {\r\n                subject.error(error);\r\n            });\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 添加用户级别自定义配置\r\n     * @param code 配置项编号\r\n     */\r\n    addUserConfig(code: string, currentValue: string): Observable<any> {\r\n        let configCode = \"gspWfTaskUserConfig\";\r\n        let todayCode = configCode + this.getCurrentDateString();\r\n        let configStr = localStorage.getItem(todayCode);\r\n        if (configStr) {\r\n            let list = JSON.parse(configStr);\r\n            if (list && list.length) {\r\n                let item = (list as TaskCenterConfig[]).find(l => l.configCode == code);\r\n                if (item) {\r\n                    item.currentValue = currentValue;\r\n                    localStorage.setItem(todayCode, JSON.stringify(list));\r\n                }\r\n            }\r\n        }\r\n        let url = `/api/runtime/task/v1.0/task-center-setting/add?configCode=${code}&currentValue=${currentValue}`;\r\n        return this.httpSvc.post(url, null);\r\n    }\r\n\r\n    /**\r\n     * 获取用户头像（已被任务中心调用）\r\n     * @param userId 用户ID\r\n     */\r\n    getUserAvatar(userId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = \"gspWfTaskUserAvatar\";\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let todayUserCode = todayCode + userId;\r\n        let avatarStr = localStorage.getItem(todayUserCode);\r\n        if (avatarStr) {\r\n            setTimeout(() => {\r\n                subject.next(JSON.parse(avatarStr));\r\n            }, 100);\r\n        } else {\r\n            const url = `/api/runtime/sys/v1.0/userinfos/setting/users?userId=${userId}`;\r\n            this.httpSvc.get(url).subscribe(re => {\r\n                subject.next(re);\r\n                localStorage.setItem(todayUserCode, JSON.stringify(re));\r\n                this.removeConfig(code);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 获取当前日期\r\n     */\r\n    getCurrentDateString() {\r\n        let date = new Date();\r\n        let year = date.getFullYear().toString();\r\n        let month = (date.getMonth() + 1).toString();\r\n        let day = date.getDate().toString();\r\n        return year + month + day;\r\n    }\r\n\r\n    /**\r\n     * 移除localStorage缓存\r\n     * @param key \r\n     */\r\n    private removeConfig(key: string) {\r\n        let todayKey = key + this.getCurrentDateString();\r\n        for (let item in localStorage) {\r\n            if (item.indexOf(key) > -1 && item.indexOf(todayKey) < 0) {\r\n                localStorage.removeItem(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 真正上传附件\r\n     * @param files\r\n     */\r\n    uploadAttachment(files: FileUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc/commit`;\r\n        return this.httpSvc.put(url, files);\r\n    }\r\n\r\n    /**\r\n     * 删除附件\r\n     * @param fileDeleteEntity\r\n     */\r\n    deleteAttachment(fileDeleteEntity: FileDeleteEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        return this.httpSvc.delete(url, fileDeleteEntity);\r\n    }\r\n\r\n    /**\r\n     * 创建内码\r\n     */\r\n    createNM() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取当前用户信息\r\n     */\r\n    getUserInfo(): Observable<any> {\r\n        let url = `/api/runtime/sys/v1.0/userinfos?infoType=user`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取用户所有签名\r\n     */\r\n    getUserSignId(userId: string): Observable<any> {\r\n        let subject = new Subject();\r\n        let code = 'gspWfTaskUserSign' + userId;\r\n        let todayCode = code + this.getCurrentDateString();\r\n        let signId = localStorage.getItem(todayCode);\r\n        if (signId) {\r\n            setTimeout(() => {\r\n                subject.next(signId);\r\n            }, 100);\r\n        } else {\r\n            let url = `/api/runtime/dfs/v1.0/formdoc/fileinfo/form?formid=${userId}&rootid=taskcentersignature`;\r\n            this.httpSvc.get(url).subscribe((result: any) => {\r\n                if (result && result.length) {\r\n                    var sign;\r\n                    if (result.length == 1) {\r\n                        sign = result[0];\r\n                    } else {\r\n                        const list = result.filter(a => a && a.lastModifiedTime);\r\n                        sign = list.reduce(function (a, b) {\r\n                            return a.lastModifiedTime > b.lastModifiedTime ? a : b;\r\n                        })\r\n                    }\r\n                    subject.next(sign.id);\r\n                    localStorage.setItem(todayCode, sign.id);\r\n                    this.removeConfig(code);\r\n                } else {\r\n                    subject.next('');\r\n                }\r\n            }, error => {\r\n                subject.error(error);\r\n            })\r\n        }\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * 上传签名，返回长传后的签名id\r\n     */\r\n    uploadSignature(gspDocUploadEntity: GspDocUploadEntity): Observable<any> {\r\n        let url = `/api/runtime/dfs/v1.0/doc`;\r\n        let header = this.httpSvc.setHeader({\r\n            body: gspDocUploadEntity,\r\n            responseType: 'text'\r\n        })\r\n        return this.httpSvc.request('Post', url, header);\r\n    }\r\n\r\n\r\n    /**\r\n     * 解析文件类型，给出缩略图\r\n     * @param attachmentInfo\r\n     */\r\n    createItem(attachmentInfo: any) {\r\n        var pos = attachmentInfo.fileName.lastIndexOf(\".\");\r\n        var type = attachmentInfo.fileName.substring(pos + 1);\r\n        type = (type == '' ? 'Default' : type.toLowerCase());\r\n        var docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';\r\n        var videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';\r\n        var audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';\r\n        var imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';\r\n        if (docLib.indexOf(type) >= 0) {\r\n            type = type.toLowerCase();\r\n        } else if (videoLib.indexOf(type) >= 0) {\r\n            type = 'video';\r\n        } else if (audioLib.indexOf(type) >= 0) {\r\n            type = 'audio';\r\n        } else if (imgLib.indexOf(type) >= 0) {\r\n            type = 'picture';\r\n        } else {\r\n            type = 'default';\r\n        }\r\n        return type;\r\n    }\r\n\r\n    /**\r\n     * 注册主题，并获取当前主题唯一标识token\r\n     * @param subjectCode 主题编码，非唯一标识，token为唯一标识\r\n     * @param token 主题唯一标识。\r\n     * @returns 主题的唯一标识。\r\n     */\r\n    subjectRegister(subjectCode: string, token: string) {\r\n        return (window as any).gspframeworkService.rtf.broadcast.subjectRegister(subjectCode, { funcId: token });\r\n    }\r\n\r\n    /**\r\n     * 监听移除\r\n     * @param token\r\n     */\r\n    subjectRemove(token: string) {\r\n        (window as any).gspframeworkService.rtf.broadcast.subjectRemove(token);\r\n    }\r\n\r\n    /**\r\n     * 通过某个token发送消息\r\n     * @param subjectToken 主题唯一的token标识\r\n     * @param message 要发送的消息\r\n     */\r\n    subjectNotify(subjectToken: string, message: any) {\r\n        (window as any).gspframeworkService.rtf.broadcast.notify(subjectToken, message);\r\n    }\r\n\r\n    /**\r\n     * 添加观察者，并监听消息\r\n     * @param subjectToken 主题token\r\n     * @param observerToken 当前监听主题的观察者唯一标识token。此处固定\r\n     * @param handler 监听到消息后执行的动作\r\n     */\r\n    subjectResponse(subjectToken: string, observerToken: string, handler: (value: any) => void) {\r\n        (window as any).gspframeworkService.rtf.broadcast.response(subjectToken, observerToken, handler);\r\n    }\r\n\r\n    /**\r\n     * 获取催办模拟结果\r\n     * @param context 参数\r\n     * @returns\r\n     */\r\n    urgeHandleSimulate(context: UrgeHandleSimulateContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/getUrgeHandleInfo`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 执行催办\r\n     * @param context 参数\r\n     * @returns\r\n     */\r\n    urgeHandle(context: UrgeHandleContext): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/processInstances/urgeHandle`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**批量数字签名\r\n     * @param context 参数\r\n     */\r\n    batchVerifySigned(context: BatchVerifySignedContext): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/workItems/batchVerifySigned`;\r\n        return this.httpSvc.post(url, context);\r\n    }\r\n\r\n    /**\r\n     * 获取用户帮助前端配置\r\n     * @returns \r\n     */\r\n    getWfUserHelpConfig(): Observable<any> {\r\n        let date = new Date();\r\n        let year = date.getFullYear();\r\n        let month = date.getMonth() + 1;\r\n        let day = date.getDate();\r\n        const url = `/platform/runtime/wf/web/wf-user-help/config.json?v=` + year + month + day;\r\n        return this.httpSvc.get(url);\r\n    }\r\n\r\n    /**\r\n     * 获取加签配置\r\n     */\r\n    getAdhocConfig(workItemId: string): Observable<any> {\r\n        let url = `/api/runtime/wf/v1.0/workItems/${workItemId}/adhocConfig/AddSignBehind`;\r\n        return this.httpSvc.get(url);\r\n    }\r\n    /**\r\n     * 加签提交\r\n     */\r\n    adhocAssignee(payload: AddSignPayload) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/adhocAssignee`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n    /**\r\n     * 取消征询\r\n     */\r\n    cancelConsult(payload: WorkItemExecuteParam) {\r\n        let url = `/api/runtime/wf/v1.0/workItems/cancelConsult`;\r\n        return this.httpSvc.post(url, payload);\r\n    }\r\n\r\n    /**\r\n     * 判断是否inSuite环境\r\n     */\r\n    isInSuite(): boolean {\r\n        const frameWorkService = (window as any).gspframeworkService;\r\n        if (frameWorkService && frameWorkService.rtf) {\r\n            const extendMethod = frameWorkService.rtf.extendMethod;\r\n            if (extendMethod && extendMethod.getExtObj()) {\r\n                var extObj = extendMethod.getExtObj();\r\n                const mode = extObj.iGIX4inSuiteMode();\r\n                if (mode) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取字符串字节长度\r\n     */\r\n    getBytesLength(str) {\r\n        // 在GBK编码里，除了ASCII字符，其它都占两个字符宽\r\n        return str.replace(/[^\\x00-\\xff]/g, 'xx').length;\r\n    }\r\n\r\n    /**\r\n     * 获取top window\r\n     * @returns \r\n     */\r\n    getTopWindow(): Window {\r\n        let curWin: Window = window.self;\r\n        try {\r\n            while (curWin.location.origin === curWin.parent.location.origin) {\r\n                if (curWin !== curWin.parent && !(curWin as any).isRTFTopWin) {\r\n                    curWin = curWin.parent;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        } catch (e) { }\r\n        return curWin;\r\n    }\r\n\r\n    /**\r\n     * 弹出错误提示\r\n     * @param error \r\n     */\r\n    handleErrorLevel(errorMessage: any): void {\r\n        if (errorMessage && errorMessage.status < 500) {\r\n            return;\r\n        }\r\n        let error = errorMessage.error as ServerExceptionEntity;\r\n        const exceptionMsg = error.Message || '';\r\n        const date = error.date || new Date();\r\n        const localDate = date;\r\n        const detail = error.Detail || `${error.Message}\\r\\n发生时间：${localDate}\\r\\n详细信息：${error.innerMessage}` || '';\r\n\r\n        const innerMessage = error.innerMessage || null;\r\n        let bsModalRef: BsModalRef;\r\n        const options = {\r\n            showMaxButton: false,\r\n            buttons: [\r\n                {\r\n                    text: '知道了',\r\n                    cls: 'btn btn-primary btn-lg',\r\n                    handle: () => {\r\n                        bsModalRef.close();\r\n                    }\r\n                }\r\n            ],\r\n            width: 440,\r\n            height: 200,\r\n            safeHtml: false,\r\n            exception: {\r\n                date: localDate,\r\n                message: innerMessage,\r\n                copyButton: {\r\n                    text: '复制详细信息',\r\n                    onClick: (e) => {\r\n                        const result = this.copyToClipboard(detail);\r\n                        bsModalRef.content.showMiniNotify(result, 1500);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        bsModalRef = this.message.show('exception', exceptionMsg, options);\r\n    }\r\n\r\n    /**\r\n     * 赋值到粘贴板\r\n     * @param text \r\n     * @returns \r\n     */\r\n    private copyToClipboard(text): boolean {\r\n        const windowRef: any = window;\r\n        if (windowRef.clipboardData && windowRef.clipboardData.setData) {\r\n            return windowRef.clipboardData.setData(\"Text\", text);\r\n        } else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\r\n            var textarea = document.createElement(\"textarea\");\r\n            textarea.textContent = text;\r\n            textarea.style.position = \"fixed\";\r\n            document.body.appendChild(textarea);\r\n            textarea.select();\r\n            try {\r\n                return document.execCommand(\"copy\");\r\n            } catch (ex) {\r\n                console.warn(\"Copy to clipboard failed.\", ex);\r\n            } finally {\r\n                document.body.removeChild(textarea);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n","/**\r\n * 业务动作参数\r\n */\r\nexport class ActionParameter {\r\n    /**\r\n     * 参数编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 参数值\r\n     */\r\n    value: string;\r\n}\r\n/**\r\n * 任务动作定义\r\n */\r\nexport class TaskActionDef {\r\n    /**\r\n     * id\r\n     */\r\n    id: string;\r\n    /**\r\n     * 动作编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 动作显示名称\r\n     */\r\n    name: string;\r\n    /**\r\n     * 动作实现\r\n     */\r\n    impl: string;\r\n    /**\r\n     * 是否批量操作\r\n     */\r\n    isBatchAction: boolean;\r\n    /**\r\n     * 是否是联查操作\r\n     */\r\n    isHyperlinkAction: boolean;\r\n    /**\r\n     * 是否主操作\r\n     */\r\n    isPrimaryAction: boolean;\r\n    /**\r\n     * 动作排序号\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * 类型id\r\n     */\r\n    typeId: string;\r\n    /**\r\n     * 前事件\r\n     */\r\n    preEvents?: ActionEvent[];\r\n    /**\r\n     * 后事件\r\n     */\r\n    postEvents?: ActionEvent[];\r\n}\r\n/**\r\n * 任务动作定义\r\n */\r\nexport class TaskAction extends TaskActionDef {\r\n    /**\r\n     * 任务动作定义编号\r\n     */\r\n    code: string;\r\n    /**\r\n     * 参数列表\r\n     */\r\n    parameters: ActionParameter[];\r\n}\r\n\r\nexport class ActionEvent {\r\n    /**\r\n     * ID\r\n     */\r\n    id: string;\r\n    /**\r\n     * 任务分类\r\n     */\r\n    taskCategoryId: string;\r\n    /**\r\n     * 动作编号\r\n     */\r\n    actionCode: string;\r\n    /**\r\n     * 实现\r\n     */\r\n    eventImpl: string;\r\n    /**\r\n     * 排序\r\n     */\r\n    sortOrder: number;\r\n    /**\r\n     * 终端，web，app\r\n     */\r\n    terminal: string;\r\n    /**\r\n     * 类型，Pre,Post\r\n     */\r\n    type: string;\r\n    /**\r\n     * 是否为批量扩展\r\n     */\r\n    batch: boolean;\r\n}\r\n","export const en = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: 'Please select at least one approver.',\r\n    },\r\n    columnName: {\r\n      name: 'Name',\r\n      code: 'Code',\r\n      department: 'Department',\r\n    },\r\n    title: 'Approval confirmation',\r\n    inputLabel: 'Approval comments',\r\n    inputHolder: 'comments',\r\n    footOk: 'OK',\r\n    footCancel: 'Cancel',\r\n    selectUser: 'Select User',\r\n    hideComment: 'Hide comment',\r\n    taskForm: 'Task Handle',\r\n    success: ' success'\r\n  },\r\n  cueWords: {\r\n    successPass: 'Approved successfully.',\r\n    inputOpinion: 'Please input your opinion',\r\n    selectNode: 'Please select target nodes',\r\n    select: 'Please select',\r\n    processor: 'processor',\r\n    attachmentsRequired: 'Please upload the attachment',\r\n    signatureRequired: 'Please upload the signature',\r\n    assignUser: 'Assign user',\r\n    operateSuccess: 'Operate successfully',\r\n    commonCommentTooLong: 'Comment is too long',\r\n  },\r\n  task: {\r\n    selectPlaceholder: 'Please select',\r\n    passComment: 'Pass',\r\n    processAlone: 'Please handle it separately',\r\n    urgeText: 'Receiver',\r\n    backNodeText: ' node',\r\n    selectProcessor: 'Please select the user',\r\n    notFoundBill: 'This document cannot be processed on the computer. Please try to process it on the mobile terminal',\r\n    nextNodeText: 'Next node',\r\n    assignText: 'Assign to',\r\n    noUser: 'No one',\r\n    title: 'Handle Task',\r\n    noTask: 'There is no task.',\r\n    commentTooLong: 'Comments exceed the 4000 English character limit, it is recommended to submit comments by uploading attachments',\r\n    activityName: 'processor',\r\n    receiver: 'receiver',\r\n    urgeComment: \"Please input your comment\",\r\n    noUrgeUsers: \"There is no user to urge handle\",\r\n    noUrgeSubject: \"no urge subject\",\r\n    noUrgeContent: \"no urge content\",\r\n    person: \" people\",\r\n    addSign: \"Add sign\",\r\n    priority: \"Priority\",\r\n    selectPriority: \"Please select the priority\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: 'Please select process',\r\n    title: 'Select process',\r\n    selectNode: 'Please select next node',\r\n    submitSuccess: 'Start process successfully',\r\n    submitFailed: 'Start process failed',\r\n    cancelSubmitSuccess: 'Cancel submit successfully',\r\n    cancelSubmitFailed: 'Cancel submit failed',\r\n    dataIdIsNull: 'Please select a data',\r\n    dataIdIsEmpty: 'Please select a data',\r\n    bizDefKeyIsNull: 'Biz definition key is null',\r\n    success: 'Success',\r\n    row: '',\r\n    failed: ', failed',\r\n    node: 'node, ',\r\n    noUser: 'no suitable handler was found',\r\n    cancelSubmitInfo: 'Please resubmit',\r\n    procDef: 'Process',\r\n    processTowards: 'Process towards',\r\n    otherNodesAssign: 'Assign other nodes'\r\n  },\r\n  batchSubmit: {\r\n    row: '',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    validationFailed: 'Signature verification failed',\r\n    single: 'Failed tasks please process it singly',\r\n    selected: 'Selected',\r\n    item: 'items,',\r\n    time: 'time more than',\r\n    second: 'seconds'\r\n  },\r\n  batchStartProcess: {\r\n    row: '<br/>',\r\n    success: 'Success',\r\n    error: 'Error',\r\n    failed: 'Failed',\r\n    single: 'Failed tasks please process it singly'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: 'Approval comments',\r\n      add: 'Add',\r\n      delete: 'Delete',\r\n      save: 'Save',\r\n      cancel: 'Cancel',\r\n      content: 'Content',\r\n      order: 'Order',\r\n      inputLabel: 'Comments',\r\n      manage: 'Comments management',\r\n      attachmentUpload: 'Attachment',\r\n      repeatFile: 'Contains repeat files:',\r\n      type: 'Type',\r\n      operate: 'Operate',\r\n      confirm: 'Confirm',\r\n      clickToAdd: 'Click to add',\r\n      public: 'public',\r\n      private: 'private',\r\n      messageSubject: 'message subject',\r\n      messageContent: 'message content',\r\n      comment: 'Comments',\r\n      tooLongTips: 'exceed the 4000 English character limit, it is recommended to submit comments by uploading attachments'\r\n    },\r\n    attachment: {\r\n      tips: 'click to upload attachments'\r\n    },\r\n    signature: {\r\n      title: 'Signature',\r\n      reset: 'Reset',\r\n      ok: 'OK',\r\n      sign: 'Sign, ',\r\n      upload: 'Upload',\r\n      tips: 'click to sign or upload a picture',\r\n      dialogTitle: 'Signature',\r\n      note1: '',\r\n      note2: 'or',\r\n      note3: '',\r\n      disable: 'disable signature',\r\n      download: \"download\",\r\n      view: \"view\",\r\n      delete: \"delete\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: 'Allow',\r\n    multiInstanceType: 'Multi instance type',\r\n    parallel: 'parallel',\r\n    preempt: 'preempt',\r\n    sequential: 'sequential'\r\n  },\r\n  backWardConfig: {\r\n    sequence: 'Sequence',\r\n    backToMe: 'Back to me',\r\n    backToCurrentNode: 'Back to current node',\r\n    allowResubmitToThisNode: ',resubmit to this node'\r\n  }\r\n};\r\n","export const zh_CHT = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: '請選擇辦理人員',\r\n    },\r\n    columnName: {\r\n      name: '名稱',\r\n      code: '編號',\r\n      department: '組織信息',\r\n    },\r\n    title: '審批確認',\r\n    inputLabel: '審批意見',\r\n    inputHolder: '請輸入審批意見',\r\n    footOk: '確定',\r\n    footCancel: '取消',\r\n    selectUser: '選擇用戶',\r\n    hideComment: '意見隱藏',\r\n    taskForm: '任务办理',\r\n    success: '成功'\r\n  },\r\n  cueWords: {\r\n    successPass: '審批通過',\r\n    inputOpinion: '請輸入審批意見',\r\n    selectNode: '請選擇下一環節',\r\n    select: '請選擇',\r\n    processor: '辦理人',\r\n    attachmentsRequired: '請上傳附件',\r\n    signatureRequired: '請設置簽名',\r\n    assignUser: '指派',\r\n    operateSuccess: '操作成功',\r\n    commonCommentTooLong: '意見超長（最長255字符），請重新編輯',\r\n  },\r\n  task: {\r\n    selectPlaceholder: '請選擇',\r\n    passComment: '通過',\r\n    processAlone: '請單獨處理',\r\n    urgeText: '接收人员',\r\n    backNodeText: '節點',\r\n    selectProcessor: '請選擇辦理人員',\r\n    notFoundBill: '該單據不支持在電腦端辦理，請嘗試去移動端進行辦理',\r\n    nextNodeText: '下一環節',\r\n    assignText: '辦理人員',\r\n    noUser: '無',\r\n    title: '任務辦理',\r\n    noTask: '未找到對應的任務',\r\n    commentTooLong: '處理意見超出 4000 個英文字符限制，建議以附件方式提交意見',\r\n    activityName: '辦理人員',\r\n    receiver: \"接收人員\",\r\n    urgeComment: \"請輸入催辦信息\",\r\n    noUrgeUsers: \"沒有符合條件的催辦用戶\",\r\n    noUrgeSubject: \"消息主題未配置\",\r\n    noUrgeContent: \"消息內容未配置\",\r\n    person: \"人员\",\r\n    addSign: \"加签\",\r\n    priority: \"紧急程度\",\r\n    selectPriority: \"请选择紧急程度\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: '請選擇流程',\r\n    title: '提交確認',\r\n    selectNode: '請選擇下一環節',\r\n    submitSuccess: '提交審批成功',\r\n    submitFailed: '提交審批失敗',\r\n    cancelSubmitSuccess: '取消提交成功',\r\n    cancelSubmitFailed: '取消提交失敗',\r\n    dataIdIsNull: '請選擇一條數據',\r\n    dataIdIsEmpty: '請選擇一條數據',\r\n    bizDefKeyIsNull: '流程分類ID不能為空',\r\n    success: '取消成功',\r\n    row: '條<br/>',\r\n    failed: '取消失敗',\r\n    node: '節點，',\r\n    noUser: '沒有找到合適的辦理人',\r\n    cancelSubmitInfo: '已撤回至流程的開始節點，請修改後重新提交',\r\n    procDef: '流程定义',\r\n    processTowards: '即將流向',\r\n    otherNodesAssign: '指定其他節點辦理人'\r\n  },\r\n  batchSubmit: {\r\n    row: '條，<br/>',\r\n    success: '辦理成功',\r\n    error: '辦理失敗',\r\n    failed: '需要交互',\r\n    single: '失敗的任務請單獨處理',\r\n    selected: '已選中',\r\n    item: '項，',\r\n    time: '預計處理時間較長（大於',\r\n    second: '秒）'\r\n  },\r\n  batchStartProcess: {\r\n    row: '條，<br/>',\r\n    success: '提交成功',\r\n    error: '提交失敗',\r\n    failed: '需要交互',\r\n    validationFailed: '驗簽失敗',\r\n    single: '失敗的單據請單獨處理'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: '常用意見管理',\r\n      add: '新增',\r\n      delete: '刪除',\r\n      save: '保存',\r\n      cancel: '取消',\r\n      content: '常用意見',\r\n      order: '順序',\r\n      inputLabel: '常用意見',\r\n      manage: '意見管理',\r\n      attachmentUpload: '附件',\r\n      repeatFile: '包含重復文件：',\r\n      type: '類別',\r\n      operate: '操作',\r\n      confirm: '確認',\r\n      clickToAdd: '新增常用意見',\r\n      public: '公有',\r\n      private: '個人',\r\n      messageSubject: '消息主題',\r\n      messageContent: '消息內容',\r\n      comment: '處理意見',\r\n      tooLongTips: '超出 4000 個英文字符限制，建議以附件方式提交意見'\r\n    },\r\n    attachment: {\r\n      tips: '點擊上傳附件'\r\n    },\r\n    signature: {\r\n      title: '簽名',\r\n      reset: '清空',\r\n      ok: '確定',\r\n      sign: '手寫簽名，',\r\n      upload: '上傳圖片',\r\n      tips: '點擊設置簽名',\r\n      dialogTitle: '電子簽名',\r\n      note1: '電子簽名可',\r\n      note2: '也可通過',\r\n      note3: '進行設置',\r\n      disable: '不啟用簽名',\r\n      download: \"下載\",\r\n      view: \"查看\",\r\n      delete: \"删除\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: '允許再',\r\n    multiInstanceType: '多人審批方式',\r\n    parallel: '並行會簽',\r\n    preempt: '任意人處理',\r\n    sequential: '按順序依次處理'\r\n  },\r\n  backWardConfig: {\r\n    sequence: '按順序流轉',\r\n    backToMe: '返回我',\r\n    backToCurrentNode: '返回本節點',\r\n    allowResubmitToThisNode: '后再次提交时直接回到本节点'\r\n  }\r\n};\r\n","export const zh_CHS = {\r\n  static: {\r\n    assignee: {\r\n      noAssignee: '请选择办理人员',\r\n    },\r\n    columnName: {\r\n      name: '名称',\r\n      code: '编号',\r\n      department: '组织信息',\r\n    },\r\n    title: '审批确认',\r\n    inputLabel: '审批意见',\r\n    inputHolder: '请输入审批意见',\r\n    footOk: '确定',\r\n    footCancel: '取消',\r\n    selectUser: '选择用户',\r\n    hideComment: '意见隐藏',\r\n    taskForm: '任务办理',\r\n    success: '成功'\r\n  },\r\n  cueWords: {\r\n    successPass: '审批通过',\r\n    inputOpinion: '请输入审批意见',\r\n    selectNode: '请选择下一环节',\r\n    select: '请选择',\r\n    processor: '办理人',\r\n    attachmentsRequired: '请上传附件',\r\n    signatureRequired: '请设置签名',\r\n    assignUser: '指派',\r\n    operateSuccess: '操作成功',\r\n    commonCommentTooLong: '意见超长（最长255字符），请重新编辑',\r\n  },\r\n  task: {\r\n    selectPlaceholder: '请选择',\r\n    passComment: '通过',\r\n    processAlone: '请单独处理',\r\n    urgeText: '接收人员',\r\n    backNodeText: '节点',\r\n    selectProcessor: '请选择办理人员',\r\n    notFoundBill: '该单据不支持在电脑端办理，请尝试去移动端进行办理',\r\n    nextNodeText: '下一环节',\r\n    assignText: '办理人员',\r\n    noUser: '无',\r\n    title: '任务办理',\r\n    noTask: '未找到对应的任务',\r\n    commentTooLong: '处理意见超出 4000 个英文字符限制，建议以附件方式提交意见',\r\n    activityName: '办理人员',\r\n    receiver: \"接收人员\",\r\n    urgeComment: \"请输入催办信息\",\r\n    noUrgeUsers: \"没有符合条件的催办用户\",\r\n    noUrgeSubject: \"消息主题未配置\",\r\n    noUrgeContent: \"消息内容未配置\",\r\n    person: \"人员\",\r\n    addSign: \"加签\",\r\n    priority: \"紧急程度\",\r\n    selectPriority: \"请选择紧急程度\"\r\n  },\r\n  startProcess: {\r\n    selectProcess: '请选择流程',\r\n    title: '提交确认',\r\n    selectNode: '请选择下一环节',\r\n    submitSuccess: '提交审批成功',\r\n    submitFailed: '提交审批失败',\r\n    cancelSubmitSuccess: '取消提交成功',\r\n    cancelSubmitFailed: '取消提交失败',\r\n    dataIdIsNull: '请选择一条数据',\r\n    dataIdIsEmpty: '请选择一条数据',\r\n    bizDefKeyIsNull: '流程分类ID不能为空',\r\n    success: '取消成功',\r\n    row: '条<br/>',\r\n    failed: '取消失败',\r\n    node: '节点，',\r\n    noUser: '没有找到合适的办理人',\r\n    cancelSubmitInfo: '已撤回至流程的开始节点，请修改后重新提交',\r\n    procDef: '流程定义',\r\n    processTowards: '即将流向',\r\n    otherNodesAssign: '指定其他节点办理人'\r\n  },\r\n  batchSubmit: {\r\n    row: '条，<br/>',\r\n    success: '办理成功',\r\n    error: '办理失败',\r\n    failed: '需要交互',\r\n    single: '失败的任务请单独处理',\r\n    selected: '已选择',\r\n    item: '项，',\r\n    time: '预计处理时间较长（大于',\r\n    second: '秒）'\r\n  },\r\n  batchStartProcess: {\r\n    row: '条，<br/>',\r\n    success: '提交成功',\r\n    error: '提交失败',\r\n    failed: '需要交互',\r\n    validationFailed: '验签失败',\r\n    single: '失败的单据请单独处理'\r\n  },\r\n  comment: {\r\n    static: {\r\n      title: '常用意见管理',\r\n      add: '新增',\r\n      delete: '删除',\r\n      save: '保存',\r\n      cancel: '取消',\r\n      content: '常用意见',\r\n      order: '顺序',\r\n      inputLabel: '常用意见',\r\n      manage: '意见管理',\r\n      attachmentUpload: '附件',\r\n      repeatFile: '包含重复文件：',\r\n      type: '类别',\r\n      operate: '操作',\r\n      confirm: '确认',\r\n      clickToAdd: '新增常用意见',\r\n      public: '公有',\r\n      private: '个人',\r\n      messageSubject: '消息主题',\r\n      messageContent: '消息内容',\r\n      comment: '处理意见',\r\n      tooLongTips: '超出 4000 个英文字符限制，建议以附件方式提交意见'\r\n    },\r\n    attachment: {\r\n      tips: '点击上传附件'\r\n    },\r\n    signature: {\r\n      title: '签名',\r\n      reset: '清空',\r\n      ok: '确定',\r\n      sign: '手写签名，',\r\n      upload: '上传图片',\r\n      tips: '点击设置签名',\r\n      dialogTitle: '电子签名',\r\n      note1: '电子签名可',\r\n      note2: '也可通过',\r\n      note3: '进行设置',\r\n      disable: '不启用签名',\r\n      download: \"下载\",\r\n      view: \"查看\",\r\n      delete: \"删除\"\r\n    }\r\n  },\r\n  addSign: {\r\n    allowSignToSign: '允许再',\r\n    multiInstanceType: '多人审批方式',\r\n    parallel: '并行会签',\r\n    preempt: '任意人处理',\r\n    sequential: '按顺序依次处理'\r\n  },\r\n  backWardConfig: {\r\n    sequence: '按顺序流转',\r\n    backToMe: '返回我',\r\n    backToCurrentNode: '返回本节点',\r\n    title: '驳回的节点通过后',\r\n    allowResubmitToThisNode: '后再次提交时直接回到本节点'\r\n  }\r\n};\r\n","import { en } from './en';\r\nimport { zh_CHT } from './zh-cht';\r\nimport { zh_CHS } from './zh-chs';\r\n\r\nexport const translate = {\r\n    'zh-CHS': zh_CHS,\r\n    'en': en,\r\n    'zh-CHT': zh_CHT\r\n};\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { translate } from './index';\r\n\r\n@Injectable()\r\nexport class I18nService {\r\n    defaultLang: string;\r\n    langData: any;\r\n    constructor() {\r\n        this.defaultLang = localStorage.getItem('languageCode');\r\n        if (!this.defaultLang) {\r\n            this.langData = translate['zh-CHS'];\r\n        } else {\r\n            this.langData = translate[this.defaultLang];\r\n        }\r\n    }\r\n\r\n    getValue(name: string): any {\r\n        if (!name) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (name.indexOf('.') === -1) {\r\n            resultVal = this.langData[name];\r\n        } else {\r\n            resultVal = name.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, this.langData);\r\n        }\r\n        return resultVal;\r\n    }\r\n}\r\n","import { PriorityItem } from './simulate-response';\r\nimport { TaskAction, ActionParameter } from './task-action';\r\n\r\n/**\r\n * 任务状态\r\n */\r\nexport enum TaskState {\r\n    /**\r\n     * 待办\r\n     */\r\n    todo = 2,\r\n    /**\r\n     * 已办\r\n     */\r\n    done = 5,\r\n}\r\n/**\r\n * 任务实体定义\r\n */\r\nexport class TaskEntity {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n    categoryId: string;\r\n\r\n    state: TaskState;\r\n\r\n    startTime: Date;\r\n\r\n    endTime?: Date;\r\n\r\n    dueDate?: string;\r\n\r\n    targetDate?: string;\r\n\r\n    owner: string;\r\n\r\n    executor: string;\r\n\r\n    sourceId: string;\r\n\r\n    description: string;\r\n\r\n    taskType: number;\r\n\r\n    priority: number;\r\n\r\n    priorityName: string;\r\n\r\n    priorityItemList?: PriorityItem[];\r\n\r\n    submitter: string;\r\n\r\n    processInstanceId: string;\r\n\r\n    fStr1: string;\r\n    fStr2: string;\r\n    fStr3: string;\r\n    fStr4: string;\r\n    fStr5: string;\r\n    fStr6: string;\r\n    fStr7: string;\r\n    fStr8: string;\r\n\r\n    fTime1?: Date;\r\n    fTime2?: Date;\r\n    fTime3?: Date;\r\n    fTime4?: Date;\r\n\r\n    fDec1: number;\r\n    fDec2: number;\r\n    fDec3: number;\r\n    fDec4: number;\r\n\r\n    fText1: string;\r\n    fText2: string;\r\n    fText3: string;\r\n    fText4: string;\r\n\r\n    actions: TaskAction[];\r\n    refBizId: string;\r\n    conclusionValue: string;\r\n}\r\n","import { FlowNodeInfo } from './start-process-payload';\r\n\r\nexport class CompleteContext {\r\n\r\n    workItemId: string;\r\n\r\n    conclusionValue: string;\r\n\r\n    comment: string;\r\n\r\n    signAssignees: string[];\r\n\r\n    nextFlowNodes: FlowNodeInfo[];\r\n\r\n    addendum: Addendum;\r\n\r\n    verifySigned?: VerifySigned;\r\n\r\n    dynamicBackWardRule: string;\r\n\r\n    priority: number;\r\n\r\n    otherAssignNodes: FlowNodeInfo[];\r\n\r\n\r\n}\r\n\r\nexport class Addendum {\r\n\r\n    signature: string;\r\n\r\n    attachment: string;\r\n}\r\n\r\nexport class VerifySigned {\r\n\r\n    certBase64Info: string;\r\n\r\n    msg: string[];\r\n\r\n    signedmsg: string;\r\n\r\n    useCase: string;\r\n}\r\n","import { OrganizationScope } from './organization-scope';\r\nimport { User } from './user';\r\nimport { FlowNodeInfo } from './start-process-payload';\r\nimport { ProcessDefinition } from './execution-response';\r\nimport { Addendum } from './complete-context';\r\n\r\n/**\r\n * 指定参与者信息：需要指定参与者的活动、待指定用户列表\r\n */\r\nexport class AssigneeInfo {\r\n\r\n    /**\r\n     * 工作项ID\r\n     */\r\n    workItemId: string;\r\n\r\n    /**\r\n     * 参与者列表\r\n     */\r\n    assigneeIds: string[];\r\n\r\n    /**\r\n     * 参与者用户列表\r\n     */\r\n    assigneeUsers: User[];\r\n\r\n    /**\r\n     * 是否允许指派\r\n     */\r\n    selectAssignee: boolean;\r\n\r\n    /**\r\n     * 是否多选\r\n     */\r\n    multiSelect: boolean;\r\n\r\n    /**\r\n     * 是否允许全员指派\r\n     */\r\n    allowGlobalAssign: boolean;\r\n\r\n    /**\r\n     * 指派范围\r\n     */\r\n    organizationScope: OrganizationScope[];\r\n}\r\n\r\n/**\r\n * 根据流程指定下一步参与者参数\r\n */\r\nexport class AssignParameter {\r\n\r\n    workItemId: string;\r\n\r\n    assigneeIds: string[];\r\n\r\n    comment: string;\r\n\r\n    addendum?: Addendum;\r\n\r\n    priority: number;\r\n}\r\n\r\n\r\n/**\r\n * 完成工作项返回结果\r\n */\r\nexport class CompleteResponse {\r\n\r\n    dataId: string;\r\n\r\n    needInteraction: boolean;\r\n\r\n    nextAssigneeInfos: AssigneeInfo[];\r\n\r\n    procInstId: string;\r\n\r\n    nextFlowNodes: FlowNodeInfo[];//提交后并行的情况\r\n\r\n    procDefs: ProcessDefinition[];\r\n}\r\n\r\n","/**\r\n * 任务中心配置\r\n */\r\nexport class TaskCenterConfig {\r\n\r\n    id: string;\r\n\r\n    configCode: string;\r\n\r\n    configName: string;\r\n\r\n    configNote: string;\r\n\r\n    defaultValue: string;\r\n\r\n    currentValue: string;\r\n\r\n    displayText: string;\r\n\r\n    ownerId: string;\r\n\r\n    ownerType: string;\r\n\r\n    creator: string;\r\n\r\n    createTime: string;\r\n\r\n    lastModifier: string;\r\n\r\n    lastModifiedTime: string;\r\n\r\n}\r\n\r\n/**\r\n * 任务中心自定义配置项Code\r\n */\r\nexport enum ConfigCode {\r\n\r\n    If_Show_Submit_Dialog = 'If_Show_Submit_Dialog',\r\n\r\n    Info_After_Submit = 'Info_After_Submit',\r\n\r\n    Info_After_Cancel_Submit = 'Info_After_Cancel_Submit',\r\n\r\n    If_Use_Sign_By_Default = 'If_Use_Sign_By_Default',\r\n\r\n    If_Show_Attachment = 'If_Show_Attachment',\r\n\r\n    If_Show_Signature = 'If_Show_Signature',\r\n\r\n    Default_Approval_Comment = 'Default_Approval_Comment',\r\n\r\n    If_Store_Comment = 'If_Store_Comment',\r\n\r\n    User_Help_Type = 'User_Help_Type',\r\n\r\n    If_Can_Edit_Signature = 'If_Can_Edit_Signature'\r\n}\r\n\r\n/**\r\n * 配置项生效级别\r\n */\r\nexport enum OwnerType {\r\n\r\n    User = 'user',//用户级\r\n\r\n    Category = 'category',//任务分类级别\r\n\r\n    BizDefKey = 'bizdefkey',//流程分类级别\r\n\r\n    All = 'all',//全局级别\r\n}","import { Addendum } from \"./complete-context\";\r\n\r\n/**\r\n * 任务办理参数\r\n */\r\nexport class WorkItemExecuteParam {\r\n\r\n    workItemId: string;\r\n\r\n    comment: string;\r\n\r\n    addendum: Addendum;\r\n\r\n    hideComment?: boolean;\r\n\r\n    priority?: number;\r\n}\r\n\r\n/**\r\n * 加签、征询、知会参数\r\n */\r\nexport class CounterSignParam extends WorkItemExecuteParam {\r\n\r\n    action: string;//AddSignFront、AddSignBehind、Notify\r\n\r\n    assignees: string[];\r\n\r\n}","import {User} from \"./user\";\r\n\r\n/**\r\n * 催办模拟接口请求body\r\n */\r\nexport class UrgeHandleSimulateContext {\r\n\r\n  procInstId: string;\r\n\r\n}\r\n\r\n/**\r\n * 催办模拟返回实体\r\n */\r\nexport class UrgeHandleResponse {\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n}\r\n\r\n/**\r\n * 催办用户返回实体\r\n */\r\nexport class UrgeUser extends User {\r\n\r\n  urgeInfos: UrgeInfo[];\r\n\r\n  anonymousText: string;\r\n\r\n  sendTypes: string;\r\n\r\n}\r\n\r\n/**\r\n * 执行催办请求body\r\n */\r\nexport class UrgeHandleContext {\r\n\r\n  procInstId: string;\r\n\r\n  urgeUsers: UrgeUser[];\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n}\r\n\r\nexport class UrgeInfo {\r\n\r\n  workItemId: string;\r\n\r\n  activityInstanceId: string;\r\n\r\n  sendTypes: string;\r\n\r\n  urgeMessageSubject: string;\r\n\r\n  urgeMessageContent: string;\r\n\r\n  addReminder: boolean;\r\n\r\n  subjectEditable: boolean;\r\n\r\n  contentEditable: boolean;\r\n}\r\n","export class BatchVerifySignedContext {\r\n\r\n  verifySigned: VerifySigned;\r\n\r\n}\r\nexport class VerifySigned {\r\n\r\n  certBase64Info: string;\r\n\r\n  msg: string[];\r\n\r\n  signedmsg: string;\r\n\r\n  useCase: string;\r\n\r\n}\r\n","/**\r\n * 工作流上下文\r\n */\r\nexport class WfContext {\r\n\r\n    processCategoryId: string;\r\n    \r\n}","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'urge-handle',\r\n  templateUrl: './urge-handle.component.html',\r\n  styleUrls: ['./urge-handle.component.css', '../task-execute/task-execute.component.css']\r\n})\r\nexport class UrgeHandleComponent implements OnInit {\r\n\r\n  @Input() placeholder = '';\r\n  @Input() showMessageSubject = false;// 是否显示消息主题\r\n  @Input() textAreaHeight: number;//文字框的高度\r\n  @Input() urgeMessageSubject: string; // 消息主题文本\r\n  @Input() urgeMessageContent: string; // 消息内容文本\r\n  @Input() subjectEditable: boolean = false; // 消息主题是否可编辑\r\n  @Input() contentEditable: boolean = false; // 消息内容是否可编辑\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { BasePayload } from \"./base-payload\";\r\nimport { OrganizationScope } from \"./organization-scope\";\r\n\r\n/**\r\n * 加签模拟接口返回\r\n */\r\nexport class AddSignSimulateResponse {\r\n    /**\r\n     * 组织\r\n     */\r\n    organization: OrganizationScope;\r\n    /**\r\n     * 多人会签方式\r\n     */\r\n    multiInstanceType: MultiInstanceType;\r\n    /**\r\n     * 是否允许再加签\r\n     */\r\n    showSignToSign: boolean;\r\n}\r\n\r\n/**\r\n *  多人会签方式\r\n */\r\nexport enum MultiInstanceType {\r\n    /**\r\n     * 抢占\r\n     */\r\n    Preempt = 'Preempt',\r\n    /**\r\n     * 并行\r\n     */\r\n    Parallel = 'Parallel',\r\n    /**\r\n     * 串行\r\n     */\r\n    Sequential = 'Sequential'\r\n\r\n}\r\n\r\n/**\r\n * 加签提交的payload\r\n */\r\nexport class AddSignPayload extends BasePayload {\r\n\r\n    /**\r\n     * 加签方式：前加签、后加签、并加签（当前会签）、征询/协办\r\n     */\r\n    actionCode: string;\r\n\r\n    /**\r\n     * 多人会签方式：抢占 Preempt、并行会签 Parallel、串行会签Sequential\r\n     */\r\n    multiInstanceType: string;\r\n\r\n    /**\r\n     * 会签策略：全员通过allPass、一人通过onePass\r\n     */\r\n    counterSignRule: string;\r\n\r\n    /**\r\n     * 办理规则\r\n     * all所有用户都办理\r\n     * compliance符合规则往下流转\r\n     */\r\n    completedRule: string;\r\n\r\n    /**\r\n     * 加签人员\r\n     */\r\n    signAssignees: string[];\r\n\r\n    /**\r\n     * 加签节点名称\r\n     */\r\n    activityName: string;\r\n\r\n    /**\r\n     * 允许再加签\r\n     */\r\n    allowSignToSign: boolean;\r\n\r\n    /**\r\n     * 紧急程度\r\n     */\r\n    priority: number;\r\n\r\n\r\n}","/**\r\n * 预解析返回的subject\r\n */\r\nexport class SimulateSubject {\r\n\r\n    showDialog: boolean = true;//任务列表是否弹框\r\n\r\n    dialogHeight: number;//弹框高度\r\n\r\n    result: boolean;//结果\r\n\r\n}","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  TemplateRef,\r\n  HostBinding,\r\n  Injector,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { Addendum, VerifySigned, CompleteContext } from '../../entity/complete-context';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { SysFarrisLookupComponent } from '@gsp-sys/sysmgr-ui';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { CompleteResponse, AssignParameter, AssigneeInfo } from '../../entity/complete-response';\r\nimport { Observable, BehaviorSubject, Subject } from 'rxjs';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { SubmitResult, ActionBaseImplComponent, ActionEvent, TaskEventResult, TaskEventContext, ActionOrigin } from '@gsp-wf/task-impl-api';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { OrganizationScope } from '../../entity/organization-scope';\r\nimport { FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { SimulateResponse } from '../../entity/simulate-response';\r\nimport { BillMethodConfig, FormEventMessage } from '../../entity/formAction';\r\nimport { ConfigCode, TaskCenterConfig } from '../../entity/task-center-config';\r\nimport { CounterSignParam, WorkItemExecuteParam } from '../../entity/workitem-execute-param';\r\nimport { UrgeHandleContext, UrgeHandleResponse, UrgeHandleSimulateContext } from '../../entity/urge-handle';\r\nimport { BatchVerifySignedContext } from '../../entity/batchVerifysigned';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { UrgeHandleComponent } from \"../urge-handle/urge-handle.component\";\r\nimport { AddSignPayload, AddSignSimulateResponse, MultiInstanceType } from '../../entity/add-sign';\r\nimport { SimulateSubject } from '../../entity/simulaite-subject';\r\n\r\ndeclare var System: any;\r\ndeclare const gspCA: any;\r\n\r\n@Component({\r\n  selector: 'lib-task-execute',\r\n  templateUrl: './task-execute.component.html',\r\n  styleUrls: ['./task-execute.component.css'],\r\n})\r\nexport class TaskExecuteComponent extends ActionBaseImplComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  /**\r\n   * 消息监听处理方法\r\n   */\r\n  private static func = null;\r\n  task: TaskEntity;//当前任务\r\n  workItemId: string; // 工作项ID\r\n  processInstanceId: string; // 流程实例ID\r\n  actionEntity = new TaskAction(); // 动作实体\r\n  comment = ''; // 审批意见\r\n  private MAX_COMMENT_LENGTH = 4000;//审批意见最大长度\r\n  defaultComment: string;//默认审批意见\r\n  wfCacheComment: string;//缓存的意见\r\n  currentDefaultValue: string;//当前动作的默认意见\r\n  taskList: TaskEntity[] = [];//批量审批接收到的任务list\r\n  batchSecond: number = 0;//批量操作的时间\r\n\r\n  ifSelectNode = false; // 是否显示选择下一环节\r\n  ifSelectUser = false; // 是否显示下一环节处理人\r\n  ifAssignUser = false; // 是否显示办理人员框\r\n  ifUrgeType = false; // 是否显示接收人框（催办消息接收人）\r\n  ifShowCommentToMySelf = false;// 是否显示审批记录仅自己可见\r\n\r\n  singleSelect = false; // 用户帮助是否单选，默认多选\r\n  selectTargetAble = false; // 是否允许选择下一环节\r\n  hideComment = false;//审批记录仅自己可见\r\n\r\n  filter = { notGetCurrentUser: true, notGetStopUser: true, orderField: 'order', withAllOrg: true, orgId: '' }; // 系统用户帮助是否过滤当前人\r\n  selectedUsers: string[] = []; // 用户帮助选择后的Id数组\r\n\r\n  selectedUserNgModule: string; // 选择处理人的placeholder\r\n\r\n  @ViewChild('taskExecuteButtons') buttons: TemplateRef<any>; // 确认取消按钮\r\n  @ViewChild(SysFarrisLookupComponent) sysUserHelp: SysFarrisLookupComponent; // 系统用户帮助\r\n  @ViewChild(UrgeHandleComponent) urgeHandleComponent: UrgeHandleComponent;\r\n\r\n  subject = new BehaviorSubject<SubmitResult>(null);\r\n  submitResult: SubmitResult = { result: true, isClose: true }; // 动作执行完成后返回的实体结果\r\n  bindingData: { id?: string, name?: string } = {}; // 系统帮助多选时用到\r\n\r\n  selectNodeText: string = this.i18nService.getValue('task.nextNodeText'); // 下一环节显示的文字,\"下一环节\"\r\n  selectUserText: string; // 处理人员显示文字\r\n  commentPlaceHolder: string = this.i18nService.getValue('static.inputHolder');//审批意见框placeholder\r\n  showAttachment: boolean = true;//是否显示附件上传\r\n  showSign: boolean = true;//是否显示签名\r\n  showCommonComment: boolean = true;//是否显示常用意见\r\n  textAreaHeight: number = 84;//文字框的高度\r\n\r\n  billMethodConfigs: BillMethodConfig[] = []; // 表单动作配置列表\r\n\r\n  nodeDefaultValue: string;//默认下一环节（提示用）\r\n\r\n  selectedNodeId: string; // 选择的下一环节ID，并行分支是，逗号隔开的\r\n  destNodes: { id: string, name: string }[] = []; // 候选下一环节\r\n\r\n  dialogHeight = 270; // 弹框的高度\r\n  dialogHeightBase = 70;\r\n\r\n  addendum = new Addendum(); // 附件、签名信息\r\n  groupIcon = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n  assignInfos: AssignInfoHelpEntity[] = [{ // 节点返回的指派信息（多个）\r\n    selectedAssignees: [],\r\n    assigneeInfo: null,\r\n    assignees: [],\r\n    activityDefinitionName: '',\r\n    activityDefinitionId: '',\r\n    dependency: '',\r\n    anonymous: false,\r\n    anonymousText: null,\r\n    resolved: false,\r\n  }];\r\n\r\n  otherAssignInfos: AssignInfoHelpEntity[] = [];//其他节点指派信息\r\n\r\n  originOtherAssignInfos: AssignInfoHelpEntity[] = [];//缓存一开始的其他节点指派信息\r\n\r\n  response: SimulateResponse; // 保存模拟审批后返回的内容，选择节点时使用\r\n  urgeHandleResponse: UrgeHandleResponse;//保存催办模拟后返回的内容\r\n\r\n  formObject: any; // 表单对象\r\n  ifRegistered = false; // 表单是否注册\r\n  configList: TaskCenterConfig[] = []; //任务中心配置项\r\n\r\n  verifySigned: VerifySigned = new VerifySigned(); // 数字验签参数\r\n  submitDisable: boolean = false; // 提交按钮是否禁用\r\n\r\n  //加签使用\r\n  addSign = {\r\n    showSignToSign: false,\r\n    allowSignToSIgn: true,\r\n    showMultiInstanceType: false,\r\n    multiInstanceType: [\r\n      { value: 'Parallel', name: this.i18nService.getValue('addSign.parallel') },\r\n      { value: 'Sequential', name: this.i18nService.getValue('addSign.sequential') },\r\n      { value: 'Preempt', name: this.i18nService.getValue('addSign.preempt') },\r\n    ],\r\n    originMultiInstType: '',\r\n    curMultiInstType: MultiInstanceType.Parallel.toString()\r\n  }\r\n  //动态驳回配置\r\n  showBackWardConfig = {\r\n    title: this.i18nService.getValue('backWardConfig.title'),\r\n    dynamicBackWardRuleAble: false,\r\n    displayPlaceholder: '',\r\n    showTips: false,\r\n    enable: false,\r\n    backWardRules: [{\r\n      name: this.i18nService.getValue('backWardConfig.sequence'),\r\n      value: 'sequence'\r\n    }, {\r\n      name: this.i18nService.getValue('backWardConfig.backToMe'),\r\n      value: 'backToMe'\r\n    }, {\r\n      name: this.i18nService.getValue('backWardConfig.backToCurrentNode'),\r\n      value: 'backToCurrentNode'\r\n    }]\r\n  }\r\n\r\n  /**\r\n   * 任务催办时使用\r\n   */\r\n  showUrgeMessageSubject: boolean = false; // 是否显示催办消息主题（催办时使用）\r\n  urgeMessageSubject: string; // 催办消息主题文本\r\n  urgeMessageContent: string; // 催办消息内容文本\r\n  addReminder: boolean; // 是否显示催办人消息\r\n  subjectEditable: boolean; // 主题可编辑\r\n  contentEditable: boolean; // 内容可编辑\r\n\r\n  wfContext = new WfContext();//工作流上下文\r\n  enablePriority: boolean = false;//是否显示密级（动作级别）\r\n\r\n  @HostBinding('class') cls = '';\r\n\r\n  POST_MESSAGE_TARGET = window.document.location.origin;\r\n  private messageSubject;\r\n  private language = localStorage.getItem('languageCode') || 'zh-CHS';//中英文\r\n\r\n  actionToken: string;//subject动作注册token\r\n  simulateToken: string;//预解析注册token\r\n  selectedPriority: number;//任务办理选中后的紧急程度\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private handlerService: WfTaskHandlerService,\r\n    private loadingService: LoadingService,\r\n    private message: MessagerService,\r\n    private injector: Injector,\r\n  ) {\r\n    super();\r\n    // 如果存在消息监听，先删掉\r\n    if (TaskExecuteComponent.func) {\r\n      window.removeEventListener('message', TaskExecuteComponent.func, false);\r\n    }\r\n    this.addMessageListener();\r\n  }\r\n\r\n  /**\r\n   * 组件销毁时，去掉subject注册\r\n   */\r\n  ngOnDestroy(): void {\r\n    if (this.actionToken) {\r\n      this.taskService.subjectRemove(this.actionToken);\r\n    }\r\n    if (this.simulateToken) {\r\n      this.taskService.subjectRemove(this.simulateToken);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAllUserConfig().subscribe((configList: TaskCenterConfig[]) => {\r\n      load.close();\r\n      this.configList = configList;\r\n      const comment = configList.find(c => c.configCode === ConfigCode.Default_Approval_Comment);\r\n      const if_store_comment = configList.find(c => c.configCode === ConfigCode.If_Store_Comment);\r\n      let passComment: string;\r\n      let backComment: string;\r\n      if (comment && comment.currentValue) {\r\n        if (this.language == 'zh-CHS') {\r\n          passComment = JSON.parse(comment.currentValue).pass;\r\n          backComment = JSON.parse(comment.currentValue).back;\r\n        } else {\r\n          passComment = JSON.parse(comment.currentValue)['pass_' + this.language];\r\n          backComment = JSON.parse(comment.currentValue)['back_' + this.language];\r\n        }\r\n        if (this.actionEntity.code === 'Pass') {\r\n          this.comment = passComment;\r\n          this.defaultComment = passComment;\r\n        }\r\n        if (this.actionEntity.code === 'Back') {\r\n          this.comment = backComment;\r\n          this.defaultComment = backComment;\r\n        }\r\n      }\r\n      if (if_store_comment && if_store_comment.currentValue === 'true') {\r\n        if (this.wfCacheComment) {//开启暂存意见，当切换到驳回并且\r\n          if (this.actionEntity.code == 'Back' && this.wfCacheComment == passComment) {\r\n          } else {\r\n            this.comment = this.wfCacheComment;\r\n          }\r\n        }\r\n      }\r\n    }, () => {\r\n      load.close();\r\n    })\r\n    // 从任务办理界面打开时，才注册服务\r\n    if (this.origin === ActionOrigin.TaskForm) {\r\n      this.initFormEvent();\r\n      // 获取表单操作配置\r\n      this.taskService.getTaskFormInfo(this.workItemId).subscribe((re: any) => {\r\n        if (re && re.billMethodConfigs && re.billMethodConfigs.length) {\r\n          this.billMethodConfigs = re.billMethodConfigs;\r\n        }\r\n      });\r\n\r\n    }\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n  }\r\n\r\n  private addMessageListener() {\r\n    window.addEventListener('message', this.eventHandler, false);\r\n    TaskExecuteComponent.func = this.eventHandler;\r\n  }\r\n\r\n  /**\r\n   * 监听事件处理\r\n   */\r\n  eventHandler = (event) => {\r\n    this.messageSubject.next(event);\r\n  }\r\n\r\n  /**\r\n   * 重写父类方法\r\n   * @param task\r\n   */\r\n  setTask(task: TaskEntity) {\r\n    if (task) {\r\n      this.task = task;\r\n      this.workItemId = task.sourceId;\r\n      this.processInstanceId = task.processInstanceId;\r\n      this.wfContext.processCategoryId = task.categoryId;\r\n      this.selectedPriority = task.priority;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 批量办理 设置任务列表\r\n   * @param taskList \r\n   */\r\n  setTaskList(taskList: TaskEntity[]) {\r\n    if (taskList.length > 20) {\r\n      this.dialogHeight = 290;\r\n    }\r\n    this.taskList = taskList;\r\n    this.batchSecond = Math.ceil(this.taskList.length / 6);\r\n  }\r\n\r\n  /**\r\n   * 重写父类方法\r\n   * @param action\r\n   */\r\n  setAction(action: TaskAction): Observable<any> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let result = new SimulateSubject();\r\n    if (action) {\r\n      this.actionEntity = action;\r\n      if (this.task) {// 单个、批量都setAction，单个才执行模拟\r\n        return this.simulate(this.actionEntity);\r\n      }\r\n      if (this.taskList && this.taskList.length) {\r\n        return this.batchSimulate();\r\n      }\r\n    }\r\n    //批量时，也要返回\r\n    setTimeout(() => {\r\n      subject.next(result);\r\n    }, 100);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 前事件初始化，将服务注册到window上，供表单调用\r\n   * 任务办理界面的window，表单的window.parent\r\n   */\r\n  private initFormEvent() {\r\n    // 审批前事件\r\n    this.actionToken = this.workItemId + 'action';\r\n    const actionToken = this.actionToken;\r\n    const subjectCode = 'FormSubjectCode';\r\n    (window as any).gspWfEventService = (window as any).gspWfEventService || {};\r\n    (window as any).gspWfEventService.register = (formObject: any) => {\r\n      this.taskService.subjectRegister(subjectCode, actionToken);\r\n      this.ifRegistered = true;\r\n      this.formObject = formObject;\r\n    };\r\n\r\n    (window as any).gspWfEventService.notify = (value: FormEventMessage) => {\r\n      if (this.ifRegistered) {\r\n        this.taskService.subjectNotify(actionToken, value);\r\n      } else {// 表单不注册，也可直接调用notify\r\n        this.simulateToken = this.workItemId + 'simulate';\r\n        const simulateToken = this.simulateToken;\r\n        this.taskService.subjectRegister(subjectCode, simulateToken);\r\n        this.taskService.subjectResponse(simulateToken, '', (value: FormEventMessage) => {\r\n          value && value.dataChanged && this.completeSimulate();\r\n        });\r\n        this.taskService.subjectNotify(simulateToken, value);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 点击提交的时候，执行表单的前事件\r\n   */\r\n  private beforeCompleteSubmit() {\r\n    if (this.origin == ActionOrigin.TaskForm) {\r\n      // 获取表单操作配置\r\n      const passPreActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Pre').sort((x, y) => x.sortOrder - y.sortOrder);\r\n      // 如果表单注册了事件\r\n      if (passPreActions && passPreActions.length) {\r\n        this.executeFormActions([...passPreActions]);\r\n      } else {// 没有定义前后事件，直接提交\r\n        this.completeSubmit();\r\n      }\r\n    } else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param formActions 表单中要执行的动作\r\n   */\r\n  private executeFormActions(formActions: BillMethodConfig[]) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          if (data.dataChanged === true) {// 如果需要预解析，先预解析再继续执行\r\n            this.completeSimulate().subscribe((r) => {\r\n              if (r.result) {// 预解析正确\r\n                this.executeFormActions(formActions);\r\n              } else {// 预解析错误\r\n                this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n              }\r\n            });\r\n          } else {// 不需要预解析，继续执行\r\n            this.executeFormActions(formActions);\r\n          }\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n          throw new Error('审批前表单操作执行失败！');\r\n        }\r\n      });\r\n      // 执行表单动作\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      this.completeSubmit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 单个任务预解析\r\n   * @param action\r\n   */\r\n  private simulate(action: TaskAction): Observable<SimulateSubject> {\r\n    switch (action.code) {\r\n      case 'AssignUser': // 指派 单独参数\r\n        return this.assignSimulate();\r\n      case 'Claim': // 领用\r\n        return this.defaultSubjectNext();\r\n      case 'Unclaim': // 取消领用\r\n        return this.defaultSubjectNext();\r\n      case 'Retrieve': // 取回\r\n        return this.defaultSubjectNext();\r\n      case 'Transfer': // 移交 单独参数\r\n        return this.transferSimulate();\r\n      case 'AddSign': // 加签\r\n        return this.addSignSimulate();\r\n      case 'AddSignFront': // 征询\r\n        return this.addSignFrontSimulate();\r\n      case 'Notify': //知会\r\n        return this.notifySimulate();\r\n      case 'Refuse': // 否决\r\n        return this.defaultSubjectNext();\r\n      case 'Obsolete': // 作废\r\n        return this.defaultSubjectNext();\r\n      case 'Comment': // 评论\r\n        return this.defaultSubjectNext();\r\n      case 'ReadTask': // 已阅\r\n        this.ifShowCommentToMySelf = true;\r\n        return this.defaultSubjectNext(295);\r\n      case 'UrgeHandle'://催办\r\n        return this.urgeHandleSimulate();\r\n      case 'CancelConsult'://取消征询\r\n        return this.defaultSubjectNext();\r\n      default: // 通过 驳回 重新提交 其他自定义的动作\r\n        return this.completeSimulate();\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量审批预解析\r\n   * @returns \r\n   */\r\n  private batchSimulate(): Observable<SimulateSubject> {\r\n    switch (this.actionEntity.code) {\r\n      case \"ReadTask\"://批量已阅\r\n        this.ifShowCommentToMySelf = true;\r\n        return this.defaultSubjectNext(295);\r\n      case \"Retrieve\"://批量取回\r\n        return this.defaultSubjectNext();\r\n      case \"Transfer\"://批量移交\r\n        this.ifSelectUser = true;\r\n        this.selectUserText = this.i18nService.getValue('task.receiver');//接收人员\r\n        this.singleSelect = true;\r\n        return this.defaultSubjectNext(this.dialogHeight + this.dialogHeightBase);\r\n      default:\r\n        return this.defaultSubjectNext();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 默认的预解析返回结果，可控制弹框高度\r\n   * @param dialogHeight \r\n   * @returns \r\n   */\r\n  private defaultSubjectNext(dialogHeight?: number): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let s = new SimulateSubject();\r\n    s.showDialog = true;\r\n    s.dialogHeight = dialogHeight ? dialogHeight : this.dialogHeight;\r\n    s.result = true;\r\n    setTimeout(() => {\r\n      subject.next(s);\r\n    }, 100);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 真正地提交\r\n   * 重写父类方法\r\n   */\r\n  submit(): Observable<SubmitResult> {\r\n    switch (this.actionEntity.code) {\r\n      case 'AssignUser': // 指派 单独参数\r\n        this.assignSubmit();\r\n        break;\r\n      case 'Claim': // 领用\r\n        this.claimSubmit();\r\n        break;\r\n      case 'Unclaim': // 取消领用\r\n        this.unClaimSubmit();\r\n        break;\r\n      case 'Retrieve': // 取回\r\n        this.retrieveSubmit();\r\n        break;\r\n      case 'Transfer': // 移交 单独参数\r\n        this.transferSubmit();\r\n        break;\r\n      case 'AddSign': // 加签\r\n        this.addSignSubmit();\r\n        break;\r\n      case 'AddSignFront': // 征询\r\n        this.addSignFrontSubmit();\r\n        break;\r\n      case 'Comment': // 评论\r\n        this.commentSubmit();\r\n        break;\r\n      case 'Notify': //知会\r\n        this.notifySubmit();\r\n        break;\r\n      case 'ReadTask': // 已阅\r\n        this.readSubmit();\r\n        break;\r\n      case 'UrgeHandle'://催办\r\n        this.urgeHandleSubmit();\r\n        break;\r\n      case 'CancelConsult'://取消征询\r\n        this.cancelConsultSubmit();\r\n        break;\r\n      default: // 通过 驳回 否决 作废 重新提交 其他自定义动作\r\n        this.beforeCompleteSubmit();\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量办理点击提交\r\n   * @param tasks \r\n   * @returns \r\n   */\r\n  batchSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    switch (this.actionEntity.code) {\r\n      case \"ReadTask\"://批量已阅\r\n        return this.batchReadTaskSubmit(tasks);\r\n      case \"Retrieve\"://批量取回\r\n        return this.batchRetrieveSubmit(tasks);\r\n      case \"Claim\"://批量领用\r\n        return this.batchClaimSubmit(tasks);\r\n      case \"Unclaim\"://批量取消领用\r\n        return this.batchUnclaimSubmit(tasks);\r\n      case \"Transfer\"://批量移交\r\n        return this.batchTransferSubmit(tasks);\r\n      default:\r\n        return this.batchCompleteSubmit(tasks);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行批量前事件\r\n   * @param tasks 批量任务列表\r\n   */\r\n  batchCompleteSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    let filterNum = 0;\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    if ((this.actionEntity.code === 'Back' || this.actionEntity.code === 'Refuse') && !this.comment) {// 批量意见是否必填不支持根据审批项配置操作，批量驳回意见必填\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const noActionTasks = tasks.filter(t => t.actions.findIndex(a => a.code === this.actionEntity.code) === -1);\r\n      if (noActionTasks && noActionTasks.length > 0) {\r\n        for (const a of noActionTasks) {\r\n          filterNum++;\r\n          if (filterNum === tasks.length) {\r\n            subject.next(successSubmit);\r\n            this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n          }\r\n        }\r\n      }\r\n      let actTasks = tasks.filter(t => t.actions.some(a => a.code === this.actionEntity.code));\r\n      if (actTasks && actTasks.length > 0) {\r\n        this.executeBatchEvent([...this.actionEntity.preEvents.filter(e => e.batch)], actTasks, this.actionEntity, (re: TaskEventResult) => {\r\n          if (re && re.result) {\r\n            if (re.passTasks) {\r\n              const backTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) === -1);\r\n              if (backTasks && backTasks.length > 0) {\r\n                for (const t of backTasks) {\r\n                  filterNum++;\r\n                  if (filterNum === tasks.length) {\r\n                    subject.next(successSubmit);\r\n                    this.showBatchSubmitInfo(0, filterNum, 0, 0);\r\n                  }\r\n                }\r\n              }\r\n              actTasks = actTasks.filter(t => re.passTasks.findIndex(id => id === t.id) > -1);\r\n            }\r\n            if (actTasks.length > 0) {\r\n              const batchVerifySignedContext = new BatchVerifySignedContext();\r\n              this.batchVerifySubmit(actTasks, filterNum, batchVerifySignedContext).subscribe((r: any) => {\r\n                if (r && r.successSubmit && r.successSubmit.result) {\r\n                  this.executeBatchEvent([...this.actionEntity.postEvents.filter(e => e.batch)], r.successHandleTasks, this.actionEntity, () => {\r\n                    subject.next(r.successSubmit);\r\n                  }, { result: true, passTasks: r.successHandleTasks.map(t => t.id) });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            subject.next({ result: false, isClose: false });\r\n          }\r\n        }, { result: true, passTasks: actTasks.map(t => t.id) });\r\n      }\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量数字签名\r\n   * @param tasks \r\n   * @param filterNum \r\n   * @param batchVerifySignedContext \r\n   * @returns \r\n   */\r\n  private batchVerifySubmit(tasks: TaskEntity[], filterNum: number = 0, batchVerifySignedContext: BatchVerifySignedContext): Observable<any> {\r\n    const subject = new Subject();\r\n    const verifyTasks = tasks.filter(t => {\r\n      const action = t.actions.find(a => a.code === this.actionEntity.code);\r\n      if (!action) {\r\n        return false;\r\n      } else {\r\n        if (action.parameters.some(p => p.code === 'CertificationNecessary' && p.value === 'true')) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n    const verifyTasksNum = verifyTasks.length;\r\n    if (verifyTasks.length > 0) {\r\n      const that = this;\r\n      if (\r\n        (window as any).gspframeworkService &&\r\n        (window as any).gspframeworkService.rtf\r\n      ) {\r\n        (window as any).gspframeworkService.rtf.caEvent.on(\r\n          (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n          'signedMsgOver',\r\n          function signMsgOver(signedData) {\r\n            if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n              // 证书对象\r\n              const cert = gspCA.getCurCert();\r\n              // 验签参数\r\n              that.verifySigned = {\r\n                // 要验证的证书base64编码的字符流(certkey)\r\n                certBase64Info: gspCA.getCertBase64(cert),\r\n                // 签名原信息\r\n                msg: ['BatchDigitalSignature'],\r\n                // 要签名后信息\r\n                signedmsg: signedData[1][0],\r\n                // 用户使用场景，目前未使用，可以为空\r\n                useCase: null,\r\n              };\r\n              batchVerifySignedContext.verifySigned = that.verifySigned;\r\n              that.taskService.batchVerifySigned(batchVerifySignedContext).subscribe(() => {\r\n                const verifyTasksNum = 0;\r\n                that.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              }, (error) => {\r\n                const otherTasks = tasks.filter(t => verifyTasks.findIndex(task => task.id === t.id) === -1);\r\n                that.batchComplete(otherTasks, filterNum, verifyTasksNum).subscribe(re => {\r\n                  subject.next(re);\r\n                });\r\n              });\r\n            } else {\r\n              that.notify.error(signedData[1]);\r\n              subject.next({ successSubmit: { result: false, isClose: false }, successHandleTasks: new Array() });\r\n            }\r\n          }\r\n        );\r\n      }\r\n      const msg = ['BatchDigitalSignature'];\r\n      gspCA.getSignedMsg(msg);\r\n    } else {\r\n      this.batchComplete(tasks, filterNum, verifyTasksNum).subscribe(re => {\r\n        subject.next(re);\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 真正的批量提交任务\r\n   * @param tasks \r\n   * @param filterNum \r\n   * @param verifyTasksNum \r\n   * @returns \r\n   */\r\n  private batchComplete(tasks: TaskEntity[], filterNum: number = 0, verifyTasksNum: number): Observable<any> {\r\n    const subject = new Subject<any>();\r\n    let successNum = 0;\r\n    let failedNum = 0;\r\n    let errorNum = 0;\r\n    const successSubmit: SubmitResult = { result: true, isClose: true };\r\n    const successHandleTasks = new Array();\r\n\r\n    const load = this.loadingService.show();\r\n    for (const task of tasks) {\r\n      const context = new CompleteContext();\r\n      context.workItemId = task.sourceId;\r\n      context.conclusionValue = this.actionEntity.code;\r\n      context.comment = this.comment;\r\n      context.addendum = this.addendum;\r\n      this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n        if (response && response.needInteraction === true) {// 需要交互\r\n          failedNum++;\r\n          if (successNum + failedNum + errorNum === tasks.length) {\r\n            load.close();\r\n            subject.next({ successSubmit, successHandleTasks });\r\n            this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n          }\r\n        } else {// 不需要交互\r\n          this.taskService.complete(context).subscribe(() => {// 执行成功\r\n            successNum++;\r\n            successHandleTasks.push(task);\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          }, () => {// 执行报错\r\n            errorNum++;\r\n            if (successNum + failedNum + errorNum === tasks.length) {\r\n              load.close();\r\n              subject.next({ successSubmit, successHandleTasks });\r\n              this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n            }\r\n          });\r\n        }\r\n      }, () => {// 任务模拟请求报错\r\n        errorNum++;\r\n        if (successNum + failedNum + errorNum === tasks.length) {\r\n          load.close();\r\n          subject.next({ successSubmit, successHandleTasks });\r\n          this.showBatchSubmitInfo(successNum, failedNum + filterNum, errorNum, verifyTasksNum);\r\n        }\r\n      });\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量已阅\r\n   * @param tasks \r\n   */\r\n  private batchReadTaskSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        let context: WorkItemExecuteParam = {\r\n          workItemId: task.sourceId,\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        }\r\n        this.taskService.readTask(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: true, isClose: true });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量取回\r\n   * @param tasks \r\n   */\r\n  private batchRetrieveSubmit(tasks: TaskEntity[]): Observable<SubmitResult> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        let context: WorkItemExecuteParam = {\r\n          workItemId: task.sourceId,\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        }\r\n        this.taskService.retrieve(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量领用\r\n   */\r\n  private batchClaimSubmit(tasks: TaskEntity[]) {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        this.taskService.claim(task.sourceId, this.comment).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量取消领用\r\n   */\r\n  private batchUnclaimSubmit(tasks: TaskEntity[]) {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        this.taskService.unClaim(task.sourceId, this.comment).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量移交\r\n   * @param tasks 批量任务列表\r\n   */\r\n  private batchTransferSubmit(tasks: TaskEntity[]): Observable<any> {\r\n    const subject = new BehaviorSubject<SubmitResult>(null);\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let successNum = 0;\r\n      let errorNum = 0;\r\n      const load = this.loadingService.show();\r\n      tasks.forEach(task => {\r\n        const context = {\r\n          workItemId: task.sourceId,\r\n          assignee: this.selectedUsers[0],\r\n          comment: this.comment,\r\n          addendum: this.addendum,\r\n        };\r\n        this.taskService.transfer(context).subscribe(re => {\r\n          successNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n            subject.next({ result: true, isClose: true });\r\n          }\r\n        }, error => {\r\n          errorNum++;\r\n          if (successNum + errorNum == tasks.length) {\r\n            load.close();\r\n            subject.next({ result: false, isClose: false });\r\n            this.showBatchSubmitInfo(successNum, 0, errorNum, 0);\r\n          }\r\n        })\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量提交提示信息\r\n   * @param successNum 成功条数\r\n   * @param failedNum 需要交互的条数\r\n   * @param errorNum 执行报错的条数\r\n   * @param verifyTasksNum 需要数字签名的条数\r\n   */\r\n  private showBatchSubmitInfo(successNum: number, failedNum: number, errorNum: number, verifyTasksNum: number) {\r\n    let message = '';\r\n    if (successNum && !failedNum && !errorNum && !verifyTasksNum) {// 批量全部成功\r\n      this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n    } else {// 非全部成功\r\n      successNum && (message += this.i18nService.getValue('batchSubmit.success') + `【${successNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      errorNum && (message += this.i18nService.getValue('batchSubmit.error') + `【${errorNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      failedNum && (message += this.i18nService.getValue('batchSubmit.failed') + `【${failedNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      verifyTasksNum && (message += this.i18nService.getValue('batchSubmit.validationFailed') + `【${verifyTasksNum}】` + this.i18nService.getValue('batchSubmit.row'));\r\n      message += this.i18nService.getValue('batchSubmit.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  private executeBatchEvent(events: ActionEvent[], entities: Array<TaskEntity>, action: TaskAction, handler: any, result?: TaskEventResult) {\r\n    if (this.injector) {\r\n      if (events && events.length > 0 && entities && entities.length > 0) {\r\n        const event = events.shift();\r\n        const url = event.eventImpl.split('#')[0];\r\n        const func = event.eventImpl.split('#')[1];\r\n        System.import(url + '?v=' + new Date().getTime().toString())\r\n          .then((moduleFactories: any) => {\r\n            const moduleFactory: any = Object.values(moduleFactories)[0];\r\n            const moduleRef = moduleFactory.create(this.injector);\r\n            const context: TaskEventContext = {\r\n              action,\r\n              taskList: entities,\r\n              origin: 'TaskCenter',\r\n              preEventResult: result\r\n            };\r\n            moduleRef.instance[func].apply(moduleRef.instance, [context]).subscribe((re: TaskEventResult) => {\r\n              if (re && re.result) {\r\n                this.executeBatchEvent(events, entities, action, handler, re);\r\n              } else {\r\n                handler(re);\r\n              }\r\n            });\r\n          });\r\n      } else {\r\n        handler(result);\r\n      }\r\n    } else {\r\n      handler(result);\r\n    }\r\n  }\r\n\r\n  private assignSimulate(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifAssignUser = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    this.taskService.getAssigneeInfo(this.workItemId).subscribe((info: FlowNodeInfo) => {\r\n      this.assignInfos = [{\r\n        selectedAssignees: info.selectedAssignees,\r\n        assigneeInfo: info.assigneeInfo,\r\n        assignees: info.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n        activityDefinitionName: info.activityDefinitionName,\r\n        activityDefinitionId: info.activityDefinitionId,\r\n        dependency: info.dependency,\r\n        anonymous: info.anonymous,\r\n        anonymousText: info.anonymousText,\r\n        resolved: info.resolved,\r\n      }];\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      simulateSubject.showDialog = true;\r\n      subject.next(simulateSubject);\r\n    }, (error) => {\r\n      simulateSubject.result = false;\r\n      simulateSubject.showDialog = false;\r\n      subject.next(simulateSubject);\r\n      this.taskService.error(error);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  private transferSimulate(): Observable<SimulateSubject> {// 移交\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.i18nService.getValue('task.receiver');//接收人员\r\n    this.singleSelect = true;\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignFrontSimulate(): Observable<SimulateSubject> {// 征询\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n\r\n  }\r\n\r\n  private addSignSimulate(): Observable<SimulateSubject> {// 加签\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    const load = this.loadingService.show();\r\n    this.taskService.getAdhocConfig(this.workItemId).subscribe((response: AddSignSimulateResponse) => {\r\n      load.close();\r\n      this.addSign.showSignToSign = response.showSignToSign;\r\n      this.addSign.originMultiInstType = response.multiInstanceType;\r\n      if (response.organization) {\r\n        this.filter.orgId = response.organization.id;\r\n        this.filter.withAllOrg = response.organization.includeChildren;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  private notifySimulate(): Observable<SimulateSubject> {//知会\r\n    this.ifSelectUser = true;\r\n    this.selectUserText = this.actionEntity.name + this.i18nService.getValue('task.person');\r\n    this.dialogHeight += this.dialogHeightBase;\r\n    this.singleSelect = false;\r\n    this.enablePriority = true;\r\n    if (this.task.priority) {\r\n      this.dialogHeight += this.dialogHeightBase;\r\n    }\r\n    return this.getOrganizationScope();\r\n  }\r\n\r\n  //预解析组织、候选人范围\r\n  private getOrganizationScope(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    const load = this.loadingService.show();\r\n    this.taskService.getOrganizationScope(this.workItemId, this.actionEntity.code).subscribe((orgList: OrganizationScope[]) => {\r\n      load.close();\r\n      if (orgList.length) {// 全员会返回空数组\r\n        this.filter.orgId = orgList[0].id;\r\n        this.filter.withAllOrg = orgList[0].includeChildren;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 催办模拟\r\n   */\r\n  private urgeHandleSimulate(): Observable<SimulateSubject> {\r\n    let subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    this.ifSelectNode = false;\r\n    this.ifSelectUser = false;\r\n    this.ifAssignUser = false;\r\n    this.ifUrgeType = true;\r\n    this.commentPlaceHolder = this.i18nService.getValue('task.urgeComment');\r\n    this.showCommonComment = false;\r\n    this.showAttachment = false;\r\n    this.showUrgeMessageSubject = true;\r\n    this.showSign = false;\r\n    this.dialogHeight += this.dialogHeightBase * 2;\r\n    const load = this.loadingService.show();\r\n    let context = new UrgeHandleSimulateContext();\r\n    context.procInstId = this.processInstanceId;\r\n    this.taskService.urgeHandleSimulate(context).subscribe((re: UrgeHandleResponse) => {\r\n      load.close();\r\n      this.urgeHandleResponse = re;\r\n      if (re && re.urgeUsers && re.urgeUsers.length) {\r\n        this.urgeMessageSubject = re.urgeUsers[0].urgeInfos[0].urgeMessageSubject;\r\n        this.urgeMessageContent = re.urgeUsers[0].urgeInfos[0].urgeMessageContent;\r\n        this.subjectEditable = re.urgeUsers[0].urgeInfos[0].subjectEditable;\r\n        this.contentEditable = re.urgeUsers[0].urgeInfos[0].contentEditable;\r\n        this.addReminder = re.urgeUsers[0].urgeInfos[0].addReminder;\r\n        let urgeUsers = re.urgeUsers;\r\n        let assignInfo = new AssigneeInfo();\r\n        urgeUsers.forEach(user => {\r\n          if (user.anonymousText) {\r\n            user.name = user.anonymousText;\r\n            user.code = '';\r\n            user.orgName = '';\r\n          }\r\n        })\r\n        assignInfo.assigneeUsers = urgeUsers;\r\n        assignInfo.selectAssignee = urgeUsers.length > 1 ? true : false;\r\n        assignInfo.multiSelect = true;\r\n        this.assignInfos[0].assigneeInfo = assignInfo;\r\n        this.assignInfos[0].assignees = urgeUsers.length == 1 ? urgeUsers : [];\r\n        simulateSubject.showDialog = true;\r\n      } else {\r\n        this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n        simulateSubject.showDialog = false;\r\n      }\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n      simulateSubject.showDialog = false;\r\n      simulateSubject.result = false;\r\n      subject.next(simulateSubject);\r\n    })\r\n    return subject.asObservable();\r\n\r\n  }\r\n\r\n  /**\r\n   * 预解析\r\n   * 通过、驳回、重新提交、其他自定义动作\r\n   */\r\n  private completeSimulate(): Observable<any> {\r\n    const subject = new Subject<SimulateSubject>();\r\n    let simulateSubject = new SimulateSubject();\r\n    if (this.actionEntity.parameters && this.actionEntity.parameters.length) {// 是否允许加签\r\n      this.actionEntity.parameters.forEach((p) => {\r\n        if (p.code === 'AddSignBehindAble' && p.value === 'true') {\r\n          this.ifSelectUser = true;\r\n          this.selectUserText = this.i18nService.getValue('task.addSign') + this.i18nService.getValue('task.person');\r\n          this.dialogHeight += this.dialogHeightBase;\r\n          const load = this.loadingService.show();\r\n          //获取加签范围\r\n          this.taskService.getOrganizationScope(this.workItemId, 'AddSignBehind').subscribe((orgList: OrganizationScope[]) => {\r\n            load.close();\r\n            if (orgList.length) {// 全员会返回空数组\r\n              this.filter.orgId = orgList[0].id;\r\n              this.filter.withAllOrg = orgList[0].includeChildren;\r\n            }\r\n          }, error => {\r\n            load.close();\r\n            this.taskService.error(error);\r\n          });\r\n        }\r\n      });\r\n    }\r\n    //驳回节点标签名称\r\n    if (this.actionEntity.code === 'Back') {\r\n      this.selectNodeText = this.actionEntity.name + this.i18nService.getValue('task.backNodeText');\r\n    }\r\n\r\n    const context = new CompleteContext();\r\n    context.workItemId = this.workItemId;\r\n    context.conclusionValue = this.actionEntity.code;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.completeSimulate(context).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.clearSimulateResult();\r\n      this.response = response;\r\n      if (this.task.priority) {\r\n        this.enablePriority = true;\r\n        this.dialogHeight += this.dialogHeightBase;\r\n      }\r\n      this.selectTargetAble = response.selectTargetAble;\r\n      if (response.dynamicBackWardRuleConfig) {\r\n        this.showBackWardConfig.dynamicBackWardRuleAble = response.dynamicBackWardRuleConfig.dynamicBackWardRuleAble;\r\n        this.showBackWardConfig.displayPlaceholder = response.dynamicBackWardRuleConfig.resubmitEffect;\r\n      }\r\n      if (!response.simulationPaths.length) {// 模拟返回路径为空时\r\n        this.ifSelectNode = false;\r\n        this.ifAssignUser = false;\r\n      } else {// 模拟返回了路径\r\n        this.ifSelectNode = true;\r\n        this.ifAssignUser = true;\r\n        this.dialogHeight += this.dialogHeightBase * 2;\r\n        this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n          id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),\r\n          name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')\r\n        }));\r\n        // 处理默认分支，无默认分支返回-1\r\n        let defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n        //没有默认分支，且不允许选择目标节点时，取其中一个node展示（子流程参与者为空情况等）\r\n        if (defaultIndex < 0 && !response.selectTargetAble) {\r\n          defaultIndex = response.simulationPaths.findIndex(a => a.nodeInfoList && a.nodeInfoList.length > 0);\r\n        }\r\n        if (defaultIndex > -1) {\r\n          this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n          this.nodeDefaultValue = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n          this.setAssignInfo(response.simulationPaths[defaultIndex].nodeInfoList);\r\n          if (response.simulationPaths[defaultIndex].id.startsWith('EndEvent')) {//下一环节为结束时，不显示办理人员，弹框高度缩小\r\n            this.dialogHeight = 340;\r\n          }\r\n        }\r\n      }\r\n      //设置其他节点选人\r\n      this.setOtherAssignInfo(response);\r\n\r\n      this.dialogHeight = this.showBackWardConfig.dynamicBackWardRuleAble ? this.dialogHeight + this.dialogHeightBase : this.dialogHeight;\r\n      simulateSubject.result = true;\r\n      simulateSubject.showDialog = true;\r\n      simulateSubject.dialogHeight = this.dialogHeight;\r\n      subject.next(simulateSubject);\r\n    }, error => {\r\n      load.close();\r\n      simulateSubject.result = false;\r\n      simulateSubject.showDialog = false;\r\n      subject.next(simulateSubject);\r\n      this.taskService.error(error);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 清空预解析结果\r\n   */\r\n  private clearSimulateResult() {\r\n    this.assignInfos = [{// 重新预解析时清空\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n    this.destNodes = []; // 重新预解析时清空\r\n    this.selectedNodeId = '';\r\n  }\r\n  /**\r\n   * 设置当前指派信息帮助参数\r\n   */\r\n  private setAssignInfo(nodeInfoList: FlowNodeInfo[]) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('，').forEach(nodeId => {\r\n      const node = nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name }; }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved,\r\n        });\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityDefinitionName: '',\r\n          activityDefinitionId: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfo(response: SimulateResponse) {\r\n    this.otherAssignInfos = [];\r\n    let tmpOtherAssignInfos = [];\r\n    let otherAssignNodes = response.otherAssignNodes;\r\n    if (otherAssignNodes && otherAssignNodes.length) {\r\n      otherAssignNodes.forEach(node => {\r\n        tmpOtherAssignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      })\r\n      //保存最初的其他节点选人\r\n      this.originOtherAssignInfos = [...tmpOtherAssignInfos];\r\n      //其他节点与下一节点去重\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        tmpOtherAssignInfos = tmpOtherAssignInfos.filter(a => this.assignInfos.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n      }\r\n      this.otherAssignInfos = tmpOtherAssignInfos;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 选完节点后，重新设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfoAgain(nodeInfoList: FlowNodeInfo[]) {\r\n    if (nodeInfoList && nodeInfoList.length) {\r\n      this.otherAssignInfos = this.originOtherAssignInfos.filter(a => nodeInfoList.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击确定后方法\r\n   */\r\n  private assignSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {\r\n      this.notify.warning(this.i18nService.getValue('static.assignee.noAssignee'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: AssignParameter = {\r\n        workItemId: this.workItemId,\r\n        assigneeIds: this.assignInfos[0].assignees.map(user => user.id),\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.taskService.assignNextUsersByWorkItemId(context).subscribe(() => {\r\n        this.notify.success(this.i18nService.getValue('cueWords.operateSuccess'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private claimSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.claim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private unClaimSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      this.taskService.unClaim(this.workItemId, this.comment).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success')),\r\n          this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private retrieveSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const retrieveContext = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment\r\n      };\r\n      this.taskService.retrieve(retrieveContext).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private transferSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        assignee: this.selectedUsers[0],\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.submitDisable = true; // 禁用提交按钮\r\n      this.taskService.transfer(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private commentSubmit() { // 评论\r\n    if (!this.comment || this.comment.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum\r\n      };\r\n      this.taskService.comment(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.submitResult.isClose = false;\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n      this.comment = '';\r\n    }\r\n  }\r\n\r\n  private addSignFrontSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context = {\r\n        workItemId: this.workItemId,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.submitDisable = true; // 禁用提交按钮\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next(this.submitResult);\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private addSignSubmit() {// 加签提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let payload: AddSignPayload = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        conclusionValue: \"Pass\",\r\n        signAssignees: this.selectedUsers,\r\n        actionCode: \"AddSignBehind\",\r\n        multiInstanceType: this.addSign.showMultiInstanceType ? this.addSign.curMultiInstType : this.addSign.originMultiInstType,\r\n        counterSignRule: 'allPass',\r\n        completedRule: 'all',\r\n        allowSignToSign: this.addSign.allowSignToSIgn,\r\n        activityName: '',\r\n        addendum: this.addendum,\r\n        priority: this.selectedPriority\r\n      };\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.adhocAssignee(payload).subscribe(re => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private readSubmit() {//已阅提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: WorkItemExecuteParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        hideComment: this.hideComment\r\n      }\r\n      this.taskService.readTask(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n      }, error => {\r\n        this.taskService.error(error);\r\n        this.subject.next({ result: false, isClose: false });\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  private notifySubmit() {//知会提交\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.selectedUsers.length === 0) {\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.selectUserText);\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      const context: CounterSignParam = {\r\n        workItemId: this.workItemId,\r\n        comment: this.comment,\r\n        addendum: this.addendum,\r\n        action: this.actionEntity.code,\r\n        assignees: this.selectedUsers,\r\n        priority: this.selectedPriority\r\n      };\r\n      this.taskService.addSign(context).subscribe(() => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: false });\r\n      }, (error) => {\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 催办提交\r\n   */\r\n  private urgeHandleSubmit() {\r\n    if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleResponse.urgeUsers || !this.urgeHandleResponse.urgeUsers.length) {//没有符合条件的催办用户\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeUsers'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.assignInfos[0].assignees.length) {//没有选人\r\n      this.notify.warning(this.i18nService.getValue('task.selectPlaceholder') + this.i18nService.getValue('task.receiver'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageSubject) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeSubject'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (!this.urgeHandleComponent.urgeMessageContent) {\r\n      this.notify.warning(this.i18nService.getValue('task.noUrgeContent'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      let context = new UrgeHandleContext();\r\n      context.procInstId = this.processInstanceId;\r\n      context.urgeUsers = this.urgeHandleResponse.urgeUsers.filter(a => this.assignInfos[0].assignees.some(b => b.id == a.id));\r\n      context.urgeMessageSubject = this.urgeHandleComponent.urgeMessageSubject;\r\n      context.urgeMessageContent = this.urgeHandleComponent.urgeMessageContent;\r\n      context.addReminder = this.addReminder;\r\n      const load = this.loadingService.show();\r\n      this.taskService.urgeHandle(context).subscribe(re => {\r\n        this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n        this.subject.next({ result: true, isClose: true });\r\n        load.close();\r\n      }, error => {\r\n        load.close();\r\n        this.subject.next({ result: false, isClose: false });\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 取消征询提交\r\n   */\r\n  private cancelConsultSubmit() {\r\n    let context = new WorkItemExecuteParam();\r\n    context.workItemId = this.workItemId;\r\n    context.comment = this.comment;\r\n    context.addendum = this.addendum;\r\n    const load = this.loadingService.show();\r\n    this.taskService.cancelConsult(context).subscribe(() => {\r\n      load.close();\r\n      this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n      this.subject.next({ result: true, isClose: true });\r\n    }, error => {\r\n      load.close();\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    })\r\n\r\n  }\r\n\r\n  private completeSubmit() {// 通过、驳回、其他第三方动作\r\n    const context: CompleteContext = {\r\n      workItemId: this.workItemId,\r\n      conclusionValue: this.actionEntity.code,\r\n      comment: this.comment,\r\n      signAssignees: this.selectedUsers,\r\n      nextFlowNodes: [],\r\n      otherAssignNodes: [],\r\n      addendum: this.addendum,\r\n      //动态驳回规则\r\n      dynamicBackWardRule: this.showBackWardConfig.dynamicBackWardRuleAble ? this.showBackWardConfig.displayPlaceholder : '',\r\n      priority: this.selectedPriority\r\n    };\r\n\r\n    if (context.signAssignees.length || !this.response || !this.response.simulationPaths.length) {// 加签 or 仿真返回为空，直接往下走\r\n      this.completeTask(context);\r\n    } else {\r\n      if (this.selectedNodeId) {// 加签时，选择下一环节被禁用，destNodeId为undefined\r\n        const nextFlowNodes: FlowNodeInfo[] = [];\r\n        const nodes: string[] = this.selectedNodeId.split('，');\r\n        for (let i = 0; i < nodes.length; i++) {\r\n          const nextFlowNode: FlowNodeInfo = {\r\n            activityDefinitionId: nodes[i],\r\n            activityDefinitionName: this.assignInfos[i].activityDefinitionName,\r\n            dependency: this.assignInfos[i].dependency,\r\n            selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n            assigneeInfo: null,\r\n            resolved: false,\r\n            anonymous: this.assignInfos[i].anonymous,\r\n            anonymousText: this.assignInfos[i].anonymousText\r\n          };\r\n          //节点找不到人，且异常提示时，并行网关暂不处理\r\n          if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n            if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n              const str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n              this.notify.warning(str);\r\n              this.subject.next({ result: false, isClose: false });\r\n              return;\r\n            }\r\n          }\r\n          nextFlowNodes.push(nextFlowNode);\r\n        }\r\n        context.nextFlowNodes = nextFlowNodes;\r\n      }\r\n      //其他节点指派信息\r\n      if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n        for (let i = 0; i < this.otherAssignInfos.length; i++) {\r\n          let nextFlowNode: FlowNodeInfo = {\r\n            activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,\r\n            activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,\r\n            dependency: this.otherAssignInfos[i].dependency,\r\n            selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],\r\n            assigneeInfo: null,\r\n            resolved: false,\r\n            anonymous: false,\r\n            anonymousText: ''\r\n          }\r\n          context.otherAssignNodes.push(nextFlowNode);\r\n        }\r\n      }\r\n\r\n      if (this.response.selectTargetAble && this.destNodes.length > 1 && context.nextFlowNodes.length <= 0) {// 用户没选择跳转节点，不允许提交\r\n        this.notify.warning(this.i18nService.getValue('cueWords.selectNode'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else if (this.assignInfos.filter(info => info.assigneeInfo && info.assigneeInfo.selectAssignee && !info.assignees.length).length) {\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n        this.subject.next({ result: false, isClose: false });\r\n      } else {\r\n        this.completeTask(context);\r\n      }\r\n    }\r\n  }\r\n\r\n  private completeTask(completeContext: CompleteContext) {\r\n    const attachmentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'AttachmentNecessary');\r\n    const certificationNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CertificationNecessary');\r\n    const commentNecessary = this.actionEntity.parameters.find(entity => entity.code === 'CommentNecessary');\r\n    if (attachmentNecessary && attachmentNecessary.value === 'true' && (!completeContext.addendum.attachment || completeContext.addendum.attachment === '[]')) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.attachmentsRequired'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (commentNecessary && commentNecessary.value === 'true' && !completeContext.comment) {\r\n      this.notify.warning(this.i18nService.getValue('cueWords.inputOpinion'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else if (this.taskService.getBytesLength(this.comment) > this.MAX_COMMENT_LENGTH) {\r\n      this.notify.warning(this.i18nService.getValue('task.commentTooLong'));\r\n      this.subject.next({ result: false, isClose: false });\r\n    } else {\r\n      if (certificationNecessary && certificationNecessary.value === 'true') {\r\n        this.verifySignature(() => {\r\n          completeContext.verifySigned = this.verifySigned;\r\n          this.taskComplete(completeContext);\r\n        });\r\n        const msg = [this.workItemId];\r\n        gspCA.getSignedMsg(msg);\r\n      } else {\r\n        this.taskComplete(completeContext);\r\n      }\r\n    }\r\n  }\r\n\r\n  private executeFormActionsAfterCompleteTask(handler: any) {\r\n    // 如果表单注册了事件\r\n    if (this.origin == ActionOrigin.TaskForm && this.ifRegistered && this.formObject) {\r\n      const postActions = this.billMethodConfigs.filter(action => action.action === this.actionEntity.code && action.executionTime === 'Post').sort((x, y) => x.sortOrder - y.sortOrder);\r\n      if (postActions && postActions.length) {\r\n        this.executePostFormActions(postActions, handler);\r\n      }\r\n    } else {\r\n      handler();\r\n    }\r\n  }\r\n\r\n  private executePostFormActions(formActions: BillMethodConfig[], hander: any) {\r\n    if (formActions.length > 0) {\r\n      this.messageSubject = new Subject<any>();\r\n      this.messageSubject.subscribe((re: any) => {\r\n        const data = re.data.data;\r\n        if (data.result === true) {\r\n          this.executePostFormActions(formActions, hander);\r\n        } else {\r\n          this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n          throw new Error('审批后表单操作执行失败！');\r\n        }\r\n      });\r\n      // 执行表单动作\r\n      const formAction = formActions.shift();\r\n      this.sendMessage(this.workItemId, formAction);\r\n    } else {\r\n      hander();\r\n    }\r\n  }\r\n\r\n  //帮助选人后\r\n  afterConfirmForTransfer(data: Assignee[]) {\r\n    if (data && data.length) {\r\n      this.selectedUsers = data.map(user => user.id);\r\n      this.selectedUserNgModule = data.map(user => user.name).join();\r\n    } else {\r\n      this.selectedUsers = [];\r\n    }\r\n    if (this.actionEntity.code == 'AddSign' && this.addSign.originMultiInstType == MultiInstanceType.Preempt.toString() && this.selectedUsers.length > 1) {\r\n      this.addSign.showMultiInstanceType = true;\r\n    } else {\r\n      this.addSign.showMultiInstanceType = false;\r\n    }\r\n  }\r\n\r\n  cancel(): Observable<SubmitResult> {\r\n    this.submitResult.isClose = false;\r\n    this.subject.next(this.submitResult);\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  // 下一环节选择后事件\r\n  selectNodeChange(data: any) {\r\n    this.selectedNodeId = data && data.data && data.data.id;\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {// 已预解析参与者\r\n      this.setAssignInfo(this.response.simulationPaths[data.index].nodeInfoList);\r\n      this.setOtherAssignInfoAgain(this.response.simulationPaths[data.index].nodeInfoList);\r\n    } else {\r\n      const nodeIds = this.selectedNodeId.split('，').map(node => `\"${node}\"`).join(); // 注意一个中文逗号一个英文逗号\r\n      const load = this.loadingService.show();\r\n      this.taskService.getSimulationAssigneeInfo(this.workItemId, nodeIds).subscribe((nodeInfoList: FlowNodeInfo[]) => {\r\n        load.close();\r\n        this.setAssignInfo(nodeInfoList);\r\n        this.setOtherAssignInfoAgain(nodeInfoList);\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  // 下一环节清空后事件\r\n  selectNodeClear() {\r\n    this.selectedNodeId = null;\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n  }\r\n\r\n  afterConfirmForAssign(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  afterConfirmForOtherAssign(data: Assignee[], index: number) {\r\n    this.otherAssignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 上传附件后事件\r\n   */\r\n  addAttachment(data: any) {\r\n    this.addendum.attachment = JSON.stringify(data);\r\n  }\r\n\r\n  /**\r\n   * 手写签名后事件\r\n   */\r\n  addSignature(data: any) {\r\n    if (data) {\r\n      const signInfo = {\r\n        id: data,\r\n        waterMarking: null\r\n      };\r\n      this.addendum.signature = JSON.stringify(signInfo);\r\n    } else {\r\n      this.addendum.signature = '';\r\n    }\r\n  }\r\n\r\n  // 以服务方式打开组件时，左右加上padding\r\n  addPadding() {\r\n    this.cls = 'f-utils-fill-flex-column h-100 px-4 py-2';\r\n  }\r\n\r\n\r\n  private sendMessage(workItemId: string, action: BillMethodConfig) {\r\n    if (this.iframe) {\r\n      const iframeWindow = this.iframe.nativeElement.contentWindow;\r\n      const message = {\r\n        target: workItemId,\r\n        data: {\r\n          command: action.method,\r\n          arguments: action.methodParameters\r\n        }\r\n      };\r\n      iframeWindow.postMessage(message, this.POST_MESSAGE_TARGET);\r\n    } else {\r\n      this.subject.next({ result: false, isClose: false }); // 任务办理界面不关闭\r\n      this.notify.warning('请等待表单加载完成后再试');\r\n    }\r\n  }\r\n\r\n  // 提交审批前的数字签名及验签\r\n  verifySignature(handler: any) {\r\n    const that = this;\r\n    if (\r\n      (window as any).gspframeworkService &&\r\n      (window as any).gspframeworkService.rtf\r\n    ) {\r\n      (window as any).gspframeworkService.rtf.caEvent.on(\r\n        (window as any).gspframeworkService.rtf.caEvent.signedMsgOverToken(),\r\n        'signedMsgOver',\r\n        function signMsgOver(signedData) {\r\n          if (signedData && signedData[0] === 'true' && signedData.length > 0) {\r\n            // 证书对象\r\n            const cert = gspCA.getCurCert();\r\n            // 验签参数\r\n            that.verifySigned = {\r\n              // 要验证的证书base64编码的字符流(certkey)\r\n              certBase64Info: gspCA.getCertBase64(cert),\r\n              // 签名原信息\r\n              msg: [that.workItemId],\r\n              // 要签名后信息\r\n              signedmsg: signedData[1][0],\r\n              // 用户使用场景，目前未使用，可以为空\r\n              useCase: null,\r\n            };\r\n            handler();\r\n          } else {\r\n            that.loadingService.close();\r\n            that.subject.next({ result: false, isClose: false });\r\n            that.notify.error(signedData[1]);\r\n            throw new Error(signedData[1]);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // 通过、驳回、其他第三方动作\r\n  taskComplete(completeContext: CompleteContext) {\r\n    this.taskService.complete(completeContext).subscribe((cr: CompleteResponse) => {\r\n      this.executeFormActionsAfterCompleteTask(() => {\r\n        if (cr.needInteraction) {// 通过后指派场景\r\n          if (this.origin == ActionOrigin.TaskCenter) {\r\n            this.subject.next({ result: true, isClose: false });\r\n          } else {\r\n            this.subject.next({ result: false, isClose: false });//关掉loading\r\n          }\r\n          this.notify.info(this.i18nService.getValue('cueWords.select')\r\n            + '【' + cr.nextFlowNodes[0].activityDefinitionName + '】'\r\n            + this.i18nService.getValue('cueWords.processor'));\r\n          let task = new TaskEntity();\r\n          let action = new TaskAction();\r\n          task.sourceId = cr.nextFlowNodes[0].assigneeInfo.workItemId;\r\n          action.code = 'AssignUser';\r\n          action.name = this.i18nService.getValue('cueWords.assignUser');\r\n          this.handlerService.execute(task, action).subscribe(re => {\r\n            if (re) {\r\n              this.subject.next({ result: true, isClose: true });\r\n            }\r\n          });\r\n        } else {\r\n          if (completeContext.conclusionValue === 'Pass') {\r\n            this.notify.success(this.i18nService.getValue('cueWords.successPass'));\r\n          } else if (completeContext.conclusionValue === 'Back') {\r\n            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n          } else {\r\n            this.notify.success(this.actionEntity.name + this.i18nService.getValue('static.success'));\r\n          }\r\n          this.subject.next({ result: true, isClose: true });\r\n        }\r\n      });\r\n    }, (error) => {\r\n      this.subject.next({ result: false, isClose: false });\r\n      this.taskService.error(error);\r\n    }\r\n    );\r\n  }\r\n\r\n}","import { AssigneeInfo } from './complete-response';\r\nimport { User } from './user';\r\n\r\n/**\r\n * 提交审批上下文参数\r\n */\r\nexport class StartProcessPayload {\r\n\r\n    /**\r\n     * 随机生成的ID 无意义\r\n     */\r\n    id?: string;\r\n\r\n    /**\r\n     * 流程定义ID\r\n     */\r\n    processDefinitionId?: string;\r\n\r\n    /**\r\n     * 流程定义Key\r\n     */\r\n    processDefinitionKey?: string;\r\n\r\n    /**\r\n     * 流程分类ID\r\n     */\r\n    bizDefKey?: string;\r\n\r\n    /**\r\n     * 数据模型ID（BE上的节点ID）\r\n     */\r\n    dataModelId?: string;\r\n\r\n    /**\r\n     * 单据内码\r\n     */\r\n    dataId?: string;\r\n\r\n    /**\r\n     * 流程实例名称，可空\r\n     */\r\n    name?: string;\r\n\r\n    /**\r\n     * 流程发起人\r\n     */\r\n    startUserId?: string;\r\n\r\n    /**\r\n     * 下一环节\r\n     */\r\n    nextFlowNodes?: FlowNodeInfo[];\r\n\r\n    /**\r\n     * 参数\r\n     */\r\n    variables?: any;\r\n\r\n    /**\r\n     * 是否带返回值\r\n     */\r\n    withResponse?: boolean;\r\n\r\n    /**\r\n     * 紧急程度\r\n     */\r\n    priority?: number;\r\n\r\n    /**\r\n     * 其他需要指派的节点\r\n     */\r\n    otherAssignNodes: FlowNodeInfo[];\r\n\r\n}\r\n\r\nexport class FlowNodeInfo {\r\n\r\n    activityDefinitionId: string;\r\n\r\n    activityDefinitionName: string;\r\n\r\n    dependency: string;//前置依赖，执行提交时传给后端\r\n\r\n    selectedAssignees: User[];\r\n\r\n    assigneeInfo: AssigneeInfo;\r\n\r\n    resolved: boolean;//参与者是否解析\r\n\r\n    anonymous: boolean;\r\n\r\n    anonymousText: string;\r\n\r\n}\r\n\r\nexport class Assignee {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n\r\n}\r\n\r\nexport class CancelSubmitPayload {\r\n\r\n    procInstId: string;//可以单独根据流程实例ID取消\r\n\r\n    dataId: string;//也可以根据dataId+bizDefKey取消\r\n\r\n    bizDefKey: string;\r\n}\r\n","/**\r\n * 跨iframe通信，消息类型枚举类\r\n */\r\nexport enum MessageType {\r\n\r\n    SubmitSuccess = 'SubmitSuccess',//提交成功，要求iframe外弹出提示\r\n\r\n    SubmitFailed = 'SubmitFailed',//提交失败，失败信息\r\n\r\n    InfoSelectProcess = 'InfoSelectProcess',//提示选择流程\r\n\r\n    InfoSelectNode = 'InfoSelectNode',//提示选择节点\r\n\r\n    InfoSelectParticipant = 'InfoSelectParticipant',//提示选择办理人\r\n\r\n    Cancel = 'Cancel',//点击取消，iframe外关闭弹窗\r\n}\r\n\r\n/**\r\n * 跨iframe通信，消息类\r\n */\r\nexport class PostMessage {\r\n\r\n    type: MessageType;\r\n\r\n    message: any;\r\n}","/**\r\n * 提交审批时，记下选择的流程\r\n */\r\nexport class StartProcessCache {\r\n\r\n    selectedProcessList: SelectedProcessItem[];\r\n\r\n}\r\n\r\n/**\r\n * 提交审批时，记下选择的流程\r\n */\r\nexport class SelectedProcessItem {\r\n\r\n    /**\r\n     * 流程分类id\r\n     */\r\n    processCategory: string;\r\n\r\n    /**\r\n     * 流程定义id\r\n     */\r\n    processDefinitionId: string;\r\n\r\n    /**\r\n     * 流程定义名称\r\n     */\r\n    processDefinitionName: string;\r\n\r\n    /**\r\n     * 记录时间\r\n     */\r\n    logTime: Date = new Date();\r\n\r\n    constructor(processCategoryId: string, processDefinitionId: string, processDefinitionName: string) {\r\n        this.processCategory = processCategoryId;\r\n        this.processDefinitionId = processDefinitionId;\r\n        this.processDefinitionName = processDefinitionName;\r\n        this.logTime = new Date();\r\n\r\n    }\r\n\r\n}","import { Component, OnInit, ViewChild, TemplateRef, Input, Injector } from '@angular/core';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { StartProcessPayload, FlowNodeInfo, Assignee } from '../../entity/start-process-payload';\r\nimport { ExecutionResponse } from '../../entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading'\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { MessageType } from '../../entity/postMessage';\r\nimport { MessagerService } from '@farris/ui-messager'\r\nimport { PriorityInfo, SimulateResponse, SimulationPath } from '../../entity/simulate-response';\r\nimport { AssignInfoHelpEntity } from '../../entity/assignInfoHelp';\r\nimport { WfTaskHandlerService } from '../../wf-task-handler.service';\r\nimport { ConfigCode } from '../../entity/task-center-config';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { TaskEntity } from '../../entity/task-entity';\r\nimport { TaskAction } from '../../entity/task-action';\r\nimport { SelectedProcessItem, StartProcessCache } from '../../entity/process-cache';\r\n\r\n@Component({\r\n  selector: 'lib-process-selector',\r\n  templateUrl: './process-selector.component.html',\r\n  styleUrls: ['../../components/task-execute/task-execute.component.css'],\r\n})\r\nexport class ProcessSelectorComponent implements OnInit {\r\n\r\n  // task center-ui中start-process-menu使用了此选择器，构造方法改动时，需重新编译\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private loadingService: LoadingService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private messager: MessagerService,\r\n    private injector: Injector,\r\n    private handlerService: WfTaskHandlerService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  destProcesses: { id: string, name: string }[] = [];//候选流程\r\n  destNodes: { id: string, name: string }[] = [];//候选下一环节\r\n  response: SimulateResponse;//保存模拟流程后返回的内容，选择节点时使用\r\n  assignInfos: AssignInfoHelpEntity[] =\r\n    [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: null,\r\n      resolved: false,\r\n    }];//节点返回的指派信息（多个）\r\n\r\n  otherAssignInfos: AssignInfoHelpEntity[] = [];//节点返回的指派信息（多个）\r\n\r\n  selectedProcessId: string;//选择的流程定义ID\r\n  selectedNodeId: string; //选择的下一环节ID，后续环节id的拼接\r\n  payload = new StartProcessPayload;//保存表单上传来的payload\r\n  subject = new Subject();//返回bool\r\n  subjectWithResponse = new Subject<any>();//返回流程上下文\r\n  subjectCancel = new Subject();//点击取消后的subject\r\n  submitDisable: boolean = false;//提交按钮是否禁用\r\n  showButtons: boolean = false;\r\n  curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//系统当前语言\r\n  nodePlaceholder: string;//下一环节的placeholder\r\n  processPlaceholder: string;//选择流程的placeholder\r\n  wfContext = new WfContext();//工作流上下文\r\n  processDefaultValue: string;//默认流程（提示用）\r\n  nodeDefaultValue: string;//默认下一环节（提示用）\r\n  dialogHeight: number = 240;//弹框基本高度\r\n\r\n  @ViewChild('nodeCombo') nodeCombo: ComboListComponent\r\n  @ViewChild('buttons') buttons: TemplateRef<any>;//确认取消按钮\r\n  @Input() openFromIframe: boolean = false;//是否从iframe打开，应用IDP提交审批集成\r\n\r\n  @Input()//原生JS提交审批使用\r\n  set parameter(parameter: any) {\r\n    if (parameter) {\r\n      this.showButtons = true;\r\n      this.setParam(parameter);\r\n    }\r\n  }\r\n\r\n  setParam(param: StartProcessPayload): Observable<any> {\r\n    let subject = new Subject<any>();\r\n    if (!param) { return; }\r\n    this.payload.id = param.id;\r\n    this.payload.processDefinitionId = param.processDefinitionId;\r\n    this.payload.processDefinitionKey = param.processDefinitionKey;\r\n    this.payload.bizDefKey = param.bizDefKey;\r\n    this.payload.dataModelId = param.dataModelId;\r\n    this.payload.dataId = param.dataId;\r\n    this.payload.name = param.name;\r\n    this.payload.startUserId = param.startUserId;\r\n    this.payload.nextFlowNodes = [];\r\n    this.payload.otherAssignNodes = [];\r\n    this.wfContext.processCategoryId = param.bizDefKey;\r\n    this.startProcessSimulate(this.payload, subject);\r\n    return subject.asObservable();\r\n  }\r\n\r\n  startProcessSimulate(payload: StartProcessPayload, subject: Subject<any>) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.response = response;\r\n      response.priorityInfo && response.priorityInfo.enable && (this.dialogHeight += 40);\r\n      this.destProcesses = response.procDefs.map(process => ({ id: process.procDefId, name: process.procDefName + `(v${process.version}.0)` }));//增加流程的版本信息\r\n      if (this.destProcesses.length === 1) {//只有一个候选流程时\r\n        this.selectedProcessId = this.destProcesses[0].id;\r\n        this.setNextNode(response);\r\n        this.processDefaultValue = this.destProcesses[0].name;\r\n        \r\n      } else {//多个流程时，取上一次选择的\r\n        const selectedProcessId = this.getSelectedProcessCache(this.payload.bizDefKey);\r\n        if (selectedProcessId && this.destProcesses.findIndex(p => p.id === selectedProcessId.processDefinitionId) > -1) {\r\n          this.getDestNodes(selectedProcessId.processDefinitionId);\r\n          this.processDefaultValue = selectedProcessId.processDefinitionName;\r\n        } else {\r\n          this.processPlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n        }\r\n        this.dialogHeight = 330;\r\n      }\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        this.dialogHeight += (this.assignInfos.length) * 40;\r\n      }\r\n      if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n        this.dialogHeight += (this.otherAssignInfos.length + 1) * 40;\r\n      }\r\n      this.dialogHeight = this.dialogHeight > 440 ? 440 : this.dialogHeight;\r\n      subject.next({ result: true, dialogHeight: this.dialogHeight });\r\n    }, error => {\r\n      load.close();\r\n      subject.error(error);\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择某个流程后\r\n   * @param data\r\n   */\r\n  selectProcessChange(data: any) {\r\n    this.nodeCombo.onClear();\r\n    this.getDestNodes(data.data.id);\r\n  }\r\n\r\n  /**\r\n   * 根据选择的流程定义id获取下一环节信息\r\n   * @param selectedProcessId \r\n   */\r\n  private getDestNodes(selectedProcessId: string) {\r\n    this.selectedProcessId = selectedProcessId;\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.clearAssignInfos();\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.processDefinitionId = this.selectedProcessId;\r\n    payload.dataId = this.payload.dataId;\r\n\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      load.close();\r\n      this.response = response;\r\n      this.setNextNode(response);\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择节点后事件\r\n   */\r\n  selectNodeChange(data: any) {\r\n    this.clearAssignInfos();\r\n    this.selectedNodeId = data.data.id;\r\n    const nodeNames = data.data.name.split('，');\r\n\r\n    if (this.response.simulationPaths[data.index].nodeInfoList.every(node => node.resolved === true)) {//已预解析参与者\r\n      this.setAssignInfo(this.response.simulationPaths[data.index]);\r\n      this.setOtherAssignInfo(this.response);//切换节点后，其他节点指派需要更新，重新去重\r\n    } else {//未预解析参与者\r\n      let payload = new StartProcessPayload();\r\n      payload.processDefinitionId = this.selectedProcessId;\r\n      payload.dataId = this.payload.dataId;\r\n      payload.nextFlowNodes = [];\r\n\r\n      this.selectedNodeId.split('，').forEach((nodeId, index) => {\r\n        let nextFlowNode = new FlowNodeInfo();\r\n        nextFlowNode.activityDefinitionId = nodeId;\r\n        nextFlowNode.activityDefinitionName = nodeNames[index];\r\n        payload.nextFlowNodes.push(nextFlowNode);\r\n      });\r\n\r\n      const load = this.loadingService.show();\r\n      this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n        load.close();\r\n        this.setAssignInfo(response.simulationPaths[0]);//选择的下一环节应该在同一条路径上，故取simulationPaths[0]\r\n        this.setOtherAssignInfo(response);//切换节点后，其他节点指派需要更新，重新去重\r\n      }, error => {\r\n        load.close();\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n * 实现真正的提交\r\n */\r\n  startProcessSubmit() {\r\n    if (!this.selectedProcessId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectProcess')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectProcess'));\r\n      return;\r\n    }\r\n    if (!this.selectedNodeId) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('startProcess.selectNode')) :\r\n        this.notify.warning(this.i18nService.getValue('startProcess.selectNode'));\r\n      return;\r\n    }\r\n    if (this.assignInfos.filter(info => (info.assigneeInfo || info.selectedAssignees.length) && !info.assignees.length).length) {//空参与者策略时，不提示选人\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectProcessor')) :\r\n        this.notify.warning(this.i18nService.getValue('task.selectProcessor'));\r\n      return;\r\n    }\r\n    if (this.response.priorityInfo && this.response.priorityInfo.enable && !this.response.priorityInfo.priority) {\r\n      this.openFromIframe ? this.messager.warning(this.i18nService.getValue('task.selectPriority')) :\r\n        this.notify.warning(this.i18nService.getValue('task.selectPriority'));\r\n      return;\r\n    }\r\n\r\n    const nodes: string[] = this.selectedNodeId.split('，');\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      let nextFlowNode: FlowNodeInfo = {\r\n        activityDefinitionId: nodes[i],\r\n        activityDefinitionName: this.assignInfos[i].activityDefinitionName,\r\n        dependency: this.assignInfos[i].dependency,\r\n        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n        assigneeInfo: null,\r\n        resolved: false,\r\n        anonymous: false,\r\n        anonymousText: ''\r\n      }\r\n      //节点找不到人，且异常提示，前端控制住，不允许走提交请求（构件事务问题）。并行场景下暂不处理\r\n      if (this.response && this.response.simulationPaths.length && !this.response.simulationPaths[0].id.startsWith('ParallelGateway')) {\r\n        if (nodes.length == 1 && nodes[i].startsWith('UserActivity') && this.assignInfos[i].resolved && !this.assignInfos[i].assigneeInfo && !this.assignInfos[i].selectedAssignees.length) {\r\n          const str = this.assignInfos[i].activityDefinitionName + this.i18nService.getValue('startProcess.node') + this.i18nService.getValue('startProcess.noUser');\r\n          this.openFromIframe ? this.messager.warning(str) : this.notify.warning(str);\r\n          return;\r\n        }\r\n      }\r\n      this.payload.nextFlowNodes.push(nextFlowNode);\r\n    }\r\n    //拼接其他节点选人结果\r\n    if (this.otherAssignInfos && this.otherAssignInfos.length) {\r\n      for (let i = 0; i < this.otherAssignInfos.length; i++) {\r\n        let nextFlowNode: FlowNodeInfo = {\r\n          activityDefinitionId: this.otherAssignInfos[i].activityDefinitionId,\r\n          activityDefinitionName: this.otherAssignInfos[i].activityDefinitionName,\r\n          dependency: this.otherAssignInfos[i].dependency,\r\n          selectedAssignees: this.otherAssignInfos[i].assigneeInfo ? this.otherAssignInfos[i].assignees : [],\r\n          assigneeInfo: null,\r\n          resolved: false,\r\n          anonymous: false,\r\n          anonymousText: ''\r\n        }\r\n        this.payload.otherAssignNodes.push(nextFlowNode);\r\n      }\r\n    }\r\n    this.payload.processDefinitionId = this.selectedProcessId;\r\n    this.submitDisable = true;\r\n    //紧急程度\r\n    if (this.response.priorityInfo && this.response.priorityInfo.enable) {\r\n      this.payload.priority = this.response.priorityInfo.priority;\r\n    }\r\n    const load = this.loadingService.show();\r\n    this.taskService.startProcess(this.payload).subscribe((response: ExecutionResponse) => {\r\n      load.close();\r\n      this.submitDisable = false;\r\n      this.subject.next(true);\r\n      this.subjectWithResponse.next(response);\r\n      let messageAfterSubmit = this.i18nService.getValue('startProcess.submitSuccess');\r\n      if (this.openFromIframe) {\r\n        (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.SubmitSuccess, message: messageAfterSubmit } });\r\n      } else {\r\n        this.handlerService.handleSubmitMessage(ConfigCode.Info_After_Submit, this.payload.bizDefKey);\r\n      }\r\n      if (!this.openFromIframe && response.needInteraction) {//提交审批后需要指派场景\r\n        this.notify.info(this.i18nService.getValue('cueWords.select')\r\n          + response.nextFlowNodes[0].activityDefinitionName\r\n          + this.i18nService.getValue('cueWords.processor'));\r\n        let task = new TaskEntity();\r\n        let action = new TaskAction();\r\n        task.sourceId = response.nextFlowNodes[0].assigneeInfo.workItemId;\r\n        action.code = 'AssignUser';\r\n        action.name = this.i18nService.getValue('cueWords.assignUser');\r\n        this.handlerService.execute(task, action).subscribe(re => { });\r\n      }\r\n      this.setSelectedProcessCache();\r\n    }, (error) => {\r\n      load.close();\r\n      this.payload.nextFlowNodes = [];\r\n      this.submitDisable = false;\r\n      this.subject.next(false);//已经有人用了这个subject，提交失败的话返回false by fangpengfei@20210324\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 选择流程清空\r\n   */\r\n  selectProcessClear() {\r\n    this.selectedProcessId = '';\r\n    this.destNodes = [];\r\n    this.nodePlaceholder = '';\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n    this.response = null;\r\n  }\r\n\r\n  /**\r\n   * 选择节点清空\r\n   */\r\n  selectNodeClear() {\r\n    this.selectedNodeId = '';\r\n    this.clearAssignInfos();\r\n  }\r\n\r\n  /**\r\n   * 用户帮助选人\r\n   */\r\n  afterConfirm(data: Assignee[], index: number) {\r\n    this.assignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 其他节点用户帮助选人\r\n   * @param data \r\n   * @param index \r\n   */\r\n  otherAssignInfosAfterConfirm(data: Assignee[], index: number) {\r\n    this.otherAssignInfos[index].assignees = data;\r\n  }\r\n\r\n  /**\r\n   * 弹框点击取消\r\n   */\r\n  cancel() {\r\n    if (this.openFromIframe) {\r\n      (window.parent as any).gspWfService.eventHandler({ data: { type: MessageType.Cancel, message: '' } });\r\n    } else {\r\n      this.subjectCancel.next(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取提交审批后返回值（bool型，兼容历史）\r\n   */\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n  /**\r\n   * 获取提交审批后返回值（实体型，带流程上下文）\r\n   */\r\n  getSubjectWithResponse() {\r\n    return this.subjectWithResponse.asObservable();\r\n  }\r\n  /**\r\n   * 点击取消后的subject，关闭窗口使用\r\n   * @returns\r\n   */\r\n  getSubjectCancel() {\r\n    return this.subjectCancel.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 设置下一环节\r\n   */\r\n  private setNextNode(response: SimulateResponse) {\r\n    this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n      id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),\r\n      name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')\r\n    }));\r\n    //处理默认分支，无默认分支返回-1\r\n    const defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n    if (defaultIndex > -1) {\r\n      this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n      this.nodeDefaultValue = this.destNodes[defaultIndex].name.indexOf('，') > -1 ? response.simulationPaths[defaultIndex].name : this.destNodes[defaultIndex].name;\r\n      this.setAssignInfo(response.simulationPaths[defaultIndex]);\r\n      this.setOtherAssignInfo(response);\r\n    } else {\r\n      this.nodePlaceholder = this.i18nService.getValue('task.selectPlaceholder');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置当前指派信息帮助参数\r\n   */\r\n  private setAssignInfo(simulationPaths: SimulationPath) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('，').forEach(nodeId => {\r\n      const node = simulationPaths.nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        this.assignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityDefinitionName: '',\r\n          activityDefinitionId: '',\r\n          dependency: '',\r\n          anonymous: false,\r\n          anonymousText: '',\r\n          resolved: false,\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置其他节点指派\r\n   * @param response \r\n   */\r\n  private setOtherAssignInfo(response: SimulateResponse) {\r\n    this.otherAssignInfos = [];\r\n    let tmpOtherAssignInfos = [];\r\n    let otherAssignNodes = response.otherAssignNodes;\r\n    if (otherAssignNodes && otherAssignNodes.length) {\r\n      otherAssignNodes.forEach(node => {\r\n        tmpOtherAssignInfos.push({\r\n          selectedAssignees: node.selectedAssignees,\r\n          assigneeInfo: node.assigneeInfo,\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityDefinitionName: node.activityDefinitionName,\r\n          activityDefinitionId: node.activityDefinitionId,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText,\r\n          resolved: node.resolved\r\n        })\r\n      })\r\n      //其他节点与下一节点去重\r\n      if (this.assignInfos && this.assignInfos.length) {\r\n        tmpOtherAssignInfos = tmpOtherAssignInfos.filter(a => this.assignInfos.findIndex(b => b.activityDefinitionId == a.activityDefinitionId) < 0);\r\n      }\r\n      this.otherAssignInfos = tmpOtherAssignInfos;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 清空当前指派信息帮助参数\r\n   */\r\n  private clearAssignInfos() {\r\n    this.assignInfos = [{\r\n      selectedAssignees: [],\r\n      assigneeInfo: null,\r\n      assignees: [],\r\n      activityDefinitionName: '',\r\n      activityDefinitionId: '',\r\n      dependency: '',\r\n      anonymous: false,\r\n      anonymousText: '',\r\n      resolved: false,\r\n    }];\r\n    this.otherAssignInfos = [];\r\n  }\r\n\r\n  /**\r\n   * 获取浏览器缓存，上次流程选择的结果\r\n   */\r\n  private getSelectedProcessCache(processCategoryId: string) {\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      return browserCache.selectedProcessList.find(a => a.processCategory == processCategoryId);\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 浏览器缓存记下流程选择的结果\r\n   */\r\n  private setSelectedProcessCache() {\r\n    const processCategoryId = this.payload.bizDefKey;\r\n    const processDefinitionId = this.payload.processDefinitionId;\r\n    let process = this.destProcesses.find(a => a.id == processDefinitionId);\r\n    const processDefinitionName = process && process.name;\r\n\r\n    let browserCache = JSON.parse(localStorage.getItem(\"gspWfStartProcess\")) as StartProcessCache;\r\n    if (browserCache && browserCache.selectedProcessList) {\r\n      let selectedProcessList = browserCache.selectedProcessList;\r\n      if (selectedProcessList.findIndex(a => a.processCategory == processCategoryId) > -1) {\r\n        selectedProcessList.map(item => {\r\n          if (item.processCategory == processCategoryId) {\r\n            item.processDefinitionId = processDefinitionId;\r\n            item.processDefinitionName = processDefinitionName;\r\n            item.logTime = new Date();\r\n          }\r\n        });\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      } else {\r\n        let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n        selectedProcessList.push(item);\r\n        browserCache.selectedProcessList = selectedProcessList;\r\n        localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n      }\r\n    } else {\r\n      let browserCache = new StartProcessCache();\r\n      let selectedProcessList = [];\r\n      let item = new SelectedProcessItem(processCategoryId, processDefinitionId, processDefinitionName);\r\n      selectedProcessList.push(item);\r\n      browserCache.selectedProcessList = selectedProcessList;\r\n      localStorage.setItem(\"gspWfStartProcess\", JSON.stringify(browserCache));\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { TaskService } from \"../service/task.service\";\r\n\r\nexport class CommonComment {\r\n    id: string;\r\n    userId?: string;\r\n    message: string;\r\n    sortOrder?: number;\r\n    type?: string;\r\n    static newEntity(): CommonComment {\r\n        return {\r\n            id: TaskService.newId(),\r\n            message: ''\r\n        };\r\n    }\r\n}\r\n","/**\r\n * 常用意见过滤\r\n */\r\nexport class CommonCommentFilter {\r\n    /**\r\n     * 类型\r\n     */\r\n    type?: string;\r\n\r\n}","import { Component, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { EditorTypes } from '@farris/ui-datagrid-editors';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { forkJoin, Observable, of, Subject } from 'rxjs';\r\nimport { CommonComment } from '../../entity/comment';\r\nimport { CommonCommentFilter } from '../../entity/commonCommentFilter';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { TaskService } from '../../service/task.service';\r\n\r\n@Component({\r\n  selector: 'lib-comment-manage',\r\n  templateUrl: './comment-manage.component.html',\r\n  styleUrls: ['./comment-manage.component.scss']\r\n})\r\nexport class CommentManageComponent implements OnInit {\r\n\r\n  commentList: CommonComment[] = [];\r\n  originCommentList: CommonComment[] = [];\r\n  commentColumns: DataColumn[] = [];\r\n  confirmSubject = new Subject();//点击确定\r\n  cancelSubject = new Subject();//点击取消\r\n\r\n  @Input() filter: CommonCommentFilter;//意见类型\r\n\r\n  @ViewChild('dataGrid') dataGrid: DatagridComponent;\r\n  @ViewChild('commentTypeCell') commentTypeCell: TemplateRef<any>;//常用意见类别模板\r\n  @ViewChild('commentOperateCell') commentOperateCell: TemplateRef<any>;//常用意见删除\r\n  @ViewChild('formButtonRef') buttons: TemplateRef<any>;//取消确认按钮\r\n\r\n  constructor(\r\n    private i18nService: I18nService,\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private loadingService: LoadingService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commentColumns = [{\r\n      field: 'message',\r\n      width: 100,\r\n      title: this.i18nService.getValue('comment.static.content'),\r\n      editor: { type: EditorTypes.TEXTBOX, options: {} },\r\n    }, {\r\n      field: 'userId',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.type'),\r\n      template: this.commentTypeCell\r\n    }, {\r\n      field: 'operate',\r\n      width: 20,\r\n      title: this.i18nService.getValue('comment.static.operate'),\r\n      template: this.commentOperateCell\r\n    }];\r\n    //加载意见列表\r\n    this.loadComments();\r\n  }\r\n\r\n  /**\r\n * 点击常用意见，获取用户常用意见列表\r\n */\r\n  loadComments() {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getCommentList(this.filter).subscribe((data: any[]) => {\r\n      load.close();\r\n      this.commentList = data;\r\n      this.originCommentList = JSON.parse(JSON.stringify(data));\r\n    }, () => {\r\n      load.close();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 新增一条常用意见\r\n   */\r\n  addCommonComment() {\r\n    const newEntity = CommonComment.newEntity();\r\n    newEntity.sortOrder = this.commentList.length + 1;\r\n    if (this.filter && this.filter.type) {\r\n      newEntity.type = this.filter.type;\r\n    }\r\n    this.commentList = this.commentList.concat(newEntity);\r\n    //新增后直接编辑单元格\r\n    setTimeout(() => {\r\n      this.dataGrid.editCell(newEntity.id, 'message');\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * 删除一条意见 data.rowData\r\n   */\r\n  deleteComment(data: any) {\r\n    if (data.rowData.userId !== '*') {\r\n      this.commentList = this.commentList.filter(c => c.id != data.rowData.id);\r\n      this.originCommentList = this.originCommentList.filter(c => c.id != data.rowData.id);\r\n      this.dataGrid.loadData(this.commentList);\r\n      this.taskService.deleteComment(data.rowData.id).subscribe(() => { });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 常用意见点击保存\r\n   */\r\n  saveCommonComment() {\r\n    this.dataGrid.endCellEdit();\r\n    this.commentList = this.commentList.filter(c => c.message);\r\n    this.commentList.forEach(comment => {\r\n      if (this.taskService.getBytesLength(comment.message) > 255) {\r\n        this.notify.warning(this.i18nService.getValue('cueWords.commonCommentTooLong'));\r\n        this.dataGrid.editCell(comment.id, 'message');\r\n        throw new Error(\"\");\r\n      }\r\n    })\r\n    this.commentList.forEach(comment => {\r\n      let origin = this.originCommentList.find(c => c.id == comment.id);\r\n      if (!origin || comment.message !== origin.message || comment.sortOrder != origin.sortOrder) {\r\n        this.taskService.addComment(comment).subscribe(() => { });\r\n      }\r\n    })\r\n    //此处已返回给farris\r\n    this.confirmSubject.next({ action: 'submit', data: this.commentList });\r\n  }\r\n\r\n  /**\r\n   * 点击取消（此处已返回给farris）\r\n   */\r\n  clickCancel() {\r\n    this.commentList = this.commentList.filter(c => c.message);\r\n    this.cancelSubject.next({ action: 'cancel', data: this.originCommentList });\r\n  }\r\n\r\n  /**\r\n   * 系统预置的不允许编辑删除\r\n   * @param data data.rowData为实体数据\r\n   * @returns\r\n   */\r\n  beforeEdit = (data: any) => {\r\n    if (data.rowData.userId == '*') {\r\n      return of(false);\r\n    }\r\n    return of(true);\r\n  }\r\n\r\n  getConfirmSUbject(): Observable<any> {\r\n    return this.confirmSubject.asObservable();\r\n  }\r\n\r\n  getCancelSubject(): Observable<any> {\r\n    return this.cancelSubject.asObservable();\r\n  }\r\n\r\n}\r\n","import { Injectable, Injector, ComponentFactoryResolver, ApplicationRef } from '@angular/core';\r\nimport { WfApprovalLogsService } from '@gsp-wf/wf-approval-logs'\r\nimport { ForecastProcessPayload, WFFlowchartService } from '@gsp-wf/ui-flowchart';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { Observable, Subject, of } from 'rxjs';\r\nimport { TaskService } from './service/task.service';\r\nimport { TaskAction } from './entity/task-action';\r\nimport { AssigneeInfo } from './entity/complete-response';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { FrameworkService, AppOptions } from '@gsp-sys/rtf-common';\r\nimport { BizFormResult, FormParameter } from './entity/bizform';\r\nimport { TaskEntity } from './entity/task-entity';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { StartProcessPayload, CancelSubmitPayload } from './entity/start-process-payload';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { ExecutionResponse } from './entity/execution-response';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BatchCancelNumber, BatchSubmitNumber } from './entity/batchNumber';\r\nimport { SimulateResponse } from './entity/simulate-response';\r\nimport { ConfigCode, OwnerType } from './entity/task-center-config';\r\nimport { TaskCommentComponent } from '../public-api';\r\nimport { CommentManageComponent } from './components/comment-manage/comment-manage.component';\r\nimport { CommonCommentFilter } from './entity/commonCommentFilter';\r\n\r\n@Injectable()\r\nexport class WfTaskHandlerService {\r\n\r\n  subject = new Subject<any>();\r\n  private loading: LoadingService;\r\n  private message: MessagerService;\r\n  private curLanguage: string = localStorage.getItem('languageCode') || 'zh-CHS';//系统当前语言\r\n\r\n  private batchSubmitNum: BatchSubmitNumber = {//批量提交数量\r\n    successNum: 0,\r\n    failedNum: 0,\r\n    errorNum: 0,\r\n  };\r\n  private batchCancelNum: BatchCancelNumber = {//批量取消提交数量\r\n    successNum: 0,\r\n    errorNum: 0\r\n  }\r\n\r\n  constructor(\r\n    private logService: WfApprovalLogsService,\r\n    private flowchartService: WFFlowchartService,\r\n    private injector: Injector,\r\n    private resolver: ComponentFactoryResolver,\r\n    private modalService: BsModalService,\r\n    private taskService: TaskService,\r\n    private notify: NotifyService,\r\n    private i18nService: I18nService,\r\n    private frameworkService: FrameworkService,\r\n    private appRef: ApplicationRef,\r\n  ) {\r\n    this.loading = this.injector.get(LoadingService);\r\n    this.message = this.injector.get(MessagerService);\r\n  }\r\n\r\n  /**\r\n   * 处理单条任务\r\n   * @param entity 任务实体\r\n   * @param action 任务动作\r\n   */\r\n  execute(task: TaskEntity, action: TaskAction, otherParams?: any): Observable<any> {\r\n    switch (action.code) {\r\n      case 'ViewBizLog'://审批日志。如果是inSuite，根据流程实例打开\r\n        this.logService.showByProcInstId(task.processInstanceId);\r\n        break;\r\n      case 'ViewFlowChart'://查看流程\r\n        this.flowchartService.viewFlowchartByProcInstIdAndDataId(task.processInstanceId, task.refBizId);\r\n        break;\r\n      case 'ViewExecuteForm':// 联查单据\r\n        this.openApp(task, action, otherParams);\r\n        break;\r\n      default: //办理类任务\r\n        this.complete(task, action);\r\n    }\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  assignByInfo(assigneeInfo: AssigneeInfo, openFromIframe: boolean): Observable<any> {\r\n    const assignSubject = new Subject<any>();\r\n    return assignSubject.asObservable();\r\n  }\r\n\r\n  private complete(task: TaskEntity, action: TaskAction) {\r\n    const compFactory = this.resolver.resolveComponentFactory(TaskExecuteComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setTask(task);\r\n    compRef.instance.setAction(action);\r\n    compRef.instance.addPadding();\r\n    const modalConfig: ModalOptions = {\r\n      title: action.name ? action.name : this.i18nService.getValue('task.title'),\r\n      width: 550,\r\n      height: compRef.instance.dialogHeight,\r\n      showButtons: true,\r\n      buttons: compRef.instance.buttons\r\n    };\r\n    const dialog = this.modalService.show(compRef, modalConfig);\r\n    compRef.instance.getSubject().subscribe(re => {\r\n      re && re.result && this.subject.next(true);\r\n      re && re.result && dialog.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 打开审批联查界面\r\n   * @param entity 任务实体\r\n   * @param action 动作实体\r\n   */\r\n  openApp(entity: TaskEntity, action: TaskAction, otherParams?: any) {\r\n    const sourceId = entity.sourceId;\r\n    const formInfoLoading = this.loading.show();\r\n    this.taskService.getTaskFormInfo(sourceId).subscribe((formInfo: BizFormResult) => {\r\n      formInfoLoading.close();\r\n      if (!formInfo) {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      const options: AppOptions = {\r\n        appType: 'menu',\r\n        funcId: '',\r\n        appId: '',\r\n        appEntrance: '',\r\n        tabId: sourceId,\r\n        isNewTab: true\r\n      };\r\n      // 传工作流上下文参数\r\n      const parameters = new Map<string, any>();\r\n      // 功能菜单情况\r\n      if (formInfo.appId) {\r\n        // 默认联查审批界面\r\n        if (formInfo.formType === '1') {//表单嵌流程\r\n          parameters.set('workItemId', sourceId);\r\n          parameters.set('procInstId', action.parameters[0].value);\r\n          parameters.set('taskState', entity.state);\r\n          parameters.set('isAssign', entity.actions.some(action => action.code === 'AssignUser'));\r\n          formInfo.parameters.forEach((item: FormParameter) =>\r\n            parameters.set(item.code, item.value)\r\n          );\r\n          options.funcId = formInfo.appId;\r\n        } else {//流程嵌表单\r\n          options.funcId = 'WF0120';\r\n          parameters.set('task', entity);\r\n          parameters.set('formInfo', formInfo);\r\n          otherParams && parameters.set('taskFilter', otherParams.taskFilter);\r\n        }\r\n      } else if (formInfo.url) {//表单格式\r\n        options.funcId = 'WF0120';\r\n        parameters.set('task', entity);\r\n        parameters.set('formInfo', formInfo);\r\n        otherParams && parameters.set('taskFilter', otherParams.taskFilter);\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.notFoundBill'));\r\n        return;\r\n      }\r\n      options.entityParams = parameters;\r\n      options.queryStringParams = parameters;//兼容IDP表单\r\n      this.openMenu(options, this.i18nService.getValue('static.taskForm'));\r\n    }, error => {\r\n      formInfoLoading.close();\r\n      this.taskService.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 打开菜单，区分是否inSuite环境，用不同方式打开菜单\r\n   * @param options 打开参数\r\n   * @param menuTitle 菜单名称\r\n   */\r\n  private openMenu(options: any, menuTitle: string) {\r\n    if (this.taskService.isInSuite()) {\r\n      options.menuTitle = menuTitle;\r\n      var extObj = (window as any).gspframeworkService.rtf.extendMethod.getExtObj();\r\n      extObj.iGIXMenuOpen(options);\r\n    } else {\r\n      const openMenuLoading = this.loading.show();\r\n      this.frameworkService.openMenu$(options).subscribe(re => {\r\n        openMenuLoading.close();\r\n\r\n      }, error => {\r\n        openMenuLoading.close();\r\n        this.taskService.error(error);\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 返回动作列表，表单嵌流程用到\r\n   * @param workItemId \r\n   */\r\n  refreshActions(workItemId: string): Observable<any> {\r\n    return this.taskService.getWorkItemActions(workItemId).pipe(\r\n      switchMap((actionList: any[]) => {\r\n        return of(actionList.filter(action =>\r\n          action.code !== 'ViewBizLog' &&\r\n          action.code !== 'ViewFlowChart' &&\r\n          action.code !== 'ViewExecuteForm'\r\n        ));\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 根据流程实例ID和动作Code办理任务（暂未用到 by fangpengfei@2020.06.22）\r\n   * @param procInstId 流程实例ID\r\n   * @param state 任务状态\r\n   * @param actionCode 动作Code\r\n   */\r\n  executeByProcInstId(procInstId: string, state: number, actionCode: string): Observable<any> {\r\n    var action = new TaskAction();\r\n    action.code = actionCode;\r\n    const subject = new Subject();\r\n    this.taskService.getTaskByProcInstId(procInstId, state).subscribe((task: TaskEntity) => {\r\n      if (task) {\r\n        this.execute(task, action).subscribe(re => {\r\n          subject.next(re);\r\n        })\r\n      } else {\r\n        this.notify.info(this.i18nService.getValue('task.noTask'));\r\n      }\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 根据workItemId 办理任务\r\n   * @param workItemId 工作项ID\r\n   * @param action 动作实体\r\n   */\r\n  executeByWorkItemId(workItemId: string, action: TaskAction): Observable<any> {\r\n    let task = new TaskEntity();\r\n    task.sourceId = workItemId;\r\n    return this.execute(task, action);\r\n  }\r\n\r\n  /**\r\n   * 提交审批\r\n   * @param payload 上下文参数\r\n   * @returns subject true：提交成功，false：提交失败 \r\n   */\r\n  startProcess(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const configLoad = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(ConfigCode.If_Show_Submit_Dialog, OwnerType.BizDefKey, payload.bizDefKey).subscribe(re => {\r\n      configLoad.close();\r\n      if (re && re.currentValue === 'false') {//自定义无需弹框\r\n        const simulateLoad = this.loading.show();\r\n        this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {//预解析\r\n          simulateLoad.close();\r\n          if (!response || response.needInteraction === false) {//预解析无需交互\r\n            const executeLoad = this.loading.show();\r\n            this.taskService.startProcess(payload).subscribe((response: ExecutionResponse) => {//执行\r\n              executeLoad.close();\r\n              if (payload.withResponse) {\r\n                subject.next(response);\r\n              } else {\r\n                subject.next(true);\r\n              }\r\n              this.handleSubmitMessage(ConfigCode.Info_After_Submit, payload.bizDefKey);\r\n            }, error => {//执行报错\r\n              executeLoad.close();\r\n              if (payload.withResponse) {\r\n                subject.next(null);\r\n              } else {\r\n                subject.next(false);\r\n              }\r\n              this.taskService.error(error);\r\n            });\r\n          } else {//预解析需要交互\r\n            this.showStartProcessDialog(payload).subscribe(re => {\r\n              subject.next(re);\r\n            });\r\n          }\r\n        }, error => {//预解析报错\r\n          simulateLoad.close();\r\n          subject.next(null);\r\n          this.taskService.error(error);\r\n        })\r\n      } else {//无是否弹框配置\r\n        this.showStartProcessDialog(payload).subscribe(re => {\r\n          subject.next(re);\r\n        });\r\n      }\r\n    }, error => {//获取配置出错\r\n      configLoad.close();\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 提交审批弹框\r\n   * @param payload 参数\r\n   * @param withResponse 是否带返回值\r\n   */\r\n  private showStartProcessDialog(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const compFactory = this.resolver.resolveComponentFactory(ProcessSelectorComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    compRef.instance.setParam(payload).subscribe((re) => {\r\n      const modalConfig: ModalOptions = {\r\n        title: this.i18nService.getValue('startProcess.title'),\r\n        width: 520,\r\n        height: re && re.dialogHeight,\r\n        showButtons: true,\r\n        buttons: compRef.instance.buttons,\r\n        opened: () => {\r\n          setTimeout(() => {\r\n            compRef.changeDetectorRef && compRef.changeDetectorRef.detectChanges();\r\n          }, 100);\r\n        }\r\n      };\r\n      const dialog = this.modalService.show(compRef, modalConfig);\r\n      if (payload.withResponse === true) {//内部使用\r\n        compRef.instance.getSubjectWithResponse().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(() => {\r\n          dialog.close();\r\n        });\r\n      } else {//已有业务组调用\r\n        compRef.instance.getSubject().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n        compRef.instance.getSubjectCancel().subscribe(re => {\r\n          subject.next(re);\r\n          dialog.close();\r\n        });\r\n      }\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 取消提交\r\n   * @payload payload 参数\r\n   */\r\n  cancelSubmit(payload: CancelSubmitPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.taskService.cancelSubmit(payload).subscribe((re) => {\r\n      load.close();\r\n      subject.next(true);\r\n      if (re && re.needInteraction) {\r\n        this.notify.info(this.i18nService.getValue('startProcess.cancelSubmitInfo'));\r\n      } else {\r\n        this.handleSubmitMessage(ConfigCode.Info_After_Cancel_Submit, payload.bizDefKey);\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      subject.error(false);\r\n      this.taskService.error(error);\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 提交审批\r\n   * @param dataId 表单id\r\n   * @param bizDefKey 入口单据id\r\n   * @param options 自定义配置\r\n   */\r\n  submitWithBizDefKey(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.dataId = dataId;\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.withResponse = true;\r\n\r\n    return this.startProcess(payload);\r\n  }\r\n\r\n  /**\r\n   * 取消提交审批\r\n   * @param dataId 表单id\r\n   * @param bizDefKey 入口单据id\r\n   * @param options 自定义配置\r\n   */\r\n  cancelSubmitWithDataId(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = dataId;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * 批量提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchSubmitWithBizDefKey(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      var startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataIds[0];\r\n      return this.startProcess(startPayload);\r\n    }\r\n\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchSubmitNum.successNum = 0;\r\n    this.batchSubmitNum.failedNum = 0;\r\n    this.batchSubmitNum.errorNum = 0;\r\n    this.batchSubmitHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量提交审批辅助函数\r\n   */\r\n  private batchSubmitHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length > 0) {\r\n      const dataId = dataIds.shift();//引用类型转换\r\n      let startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataId;\r\n      startPayload.variables = { simulate: true };\r\n      this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n        if (response.needInteraction) {//需要交互\r\n          this.batchSubmitNum.failedNum++;\r\n          this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n        } else {//不需要交互\r\n          startPayload.variables = { simulate: false };\r\n          this.taskService.startProcess(startPayload).subscribe((response: ExecutionResponse) => {\r\n            this.batchSubmitNum.successNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          }, () => {//实际提交报错\r\n            this.batchSubmitNum.errorNum++;\r\n            this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n          })\r\n        }\r\n      }, () => {//模拟提交报错\r\n        this.batchSubmitNum.errorNum++;\r\n        this.batchSubmitHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {//批量执行完毕\r\n      this.showBatchSubmitInfo(this.batchSubmitNum, bizDefKey);\r\n      handler();//执行回调函数\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 批量取消提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchCancelSubmitWithDataId(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds || !dataIds.length) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsEmpty'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      return this.cancelSubmitWithDataId(dataIds[0], bizDefKey);\r\n    }\r\n    const subject = new Subject();\r\n    const load = this.loading.show();\r\n    this.batchCancelNum.successNum = 0;\r\n    this.batchCancelNum.errorNum = 0;\r\n    this.batchCancelHelpFunction([...dataIds], bizDefKey, () => {\r\n      load.close();\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 批量取消辅助函数\r\n   */\r\n  private batchCancelHelpFunction(dataIds: string[], bizDefKey: string, handler: Function) {\r\n    if (dataIds && dataIds.length) {\r\n      const dataId = dataIds.shift();//引用类型转换\r\n      let cancelPayload = new CancelSubmitPayload();\r\n      cancelPayload.dataId = dataId;\r\n      cancelPayload.bizDefKey = bizDefKey;\r\n      this.taskService.cancelSubmit(cancelPayload).subscribe(() => {//取消成功\r\n        this.batchCancelNum.successNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      }, () => {//取消失败\r\n        this.batchCancelNum.errorNum++;\r\n        this.batchCancelHelpFunction(dataIds, bizDefKey, handler);\r\n      })\r\n    } else {\r\n      this.showBatchCancelSubmitInfo(this.batchCancelNum, bizDefKey);\r\n      handler();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 子表提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataId 子表id\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var startProcessPayload = new StartProcessPayload();\r\n    startProcessPayload.dataId = `${parentDataId},${childDataId}`;\r\n    startProcessPayload.bizDefKey = bizDefKey;\r\n    return this.startProcess(startProcessPayload);\r\n  }\r\n\r\n  /**\r\n   * 子表取消提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataId 子表id\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childCancelSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = `${parentDataId},${childDataId}`;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * 子表批量提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataIds 子表id集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childBatchSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchSubmitWithBizDefKey(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n   * 子表批量取消提交审批\r\n   * @param parentDataId 主表id\r\n   * @param childDataIds 子表id集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  childBatchCancelSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchCancelSubmitWithDataId(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n * 批量提交提示信息\r\n * @param successNum 成功条数\r\n * @param failedNum 需要交互的条数\r\n * @param errorNum 执行报错的条数\r\n */\r\n  private showBatchSubmitInfo(num: BatchSubmitNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.failedNum && !num.errorNum) {//批量全部成功\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {//非全部成功\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('batchStartProcess.success') + `【${num.successNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('batchStartProcess.error') + `【${num.errorNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      num.failedNum && (message += this.i18nService.getValue('batchStartProcess.failed') + `【${num.failedNum}】` + this.i18nService.getValue('batchStartProcess.row'));\r\n      message += this.i18nService.getValue('batchStartProcess.single');\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 批量取消提交提示信息\r\n   */\r\n  private showBatchCancelSubmitInfo(num: BatchCancelNumber, bizDefKey: string) {\r\n    if (num.successNum && !num.errorNum) {//批量全部成功\r\n      this.taskService.getTaskCenterConfigByCode(ConfigCode.Info_After_Cancel_Submit, OwnerType.BizDefKey, bizDefKey).subscribe((config: any) => {\r\n        if (this.curLanguage === 'en') {\r\n          this.notify.success(JSON.parse(config.currentValue).en);\r\n        }\r\n        if (this.curLanguage === 'zh-CHS') {\r\n          this.notify.success(JSON.parse(config.currentValue).zh_CHS);\r\n        }\r\n      })\r\n    } else {\r\n      let message = '';\r\n      num.successNum && (message += this.i18nService.getValue('startProcess.success') + `【${num.successNum}】` + this.i18nService.getValue('startProcess.row'));\r\n      num.errorNum && (message += this.i18nService.getValue('startProcess.failed') + `【${num.errorNum}】` + this.i18nService.getValue('startProcess.row'));\r\n      this.message.show('warning', message, { safeHtml: false });\r\n    }\r\n  }\r\n\r\n  handleSubmitMessage(code: string, ownerId: string) {\r\n    const load = this.loading.show();\r\n    this.taskService.getTaskCenterConfigByCode(code, OwnerType.BizDefKey, ownerId).subscribe(re => {\r\n      load.close();\r\n      if (re && re.currentValue) {\r\n        let message = '';\r\n        const currentValue = JSON.parse(re.currentValue);\r\n        this.curLanguage === 'zh-CHS' && (message = currentValue.zh_CHS);\r\n        this.curLanguage === 'en' && (message = currentValue.en);\r\n        this.curLanguage === 'zh-CHT' && (message = currentValue.zh_CHT);\r\n        this.notify.success(message);\r\n      } else {\r\n        code === ConfigCode.Info_After_Submit && this.notify.success(this.i18nService.getValue('startProcess.submitSuccess'));\r\n        code === ConfigCode.Info_After_Cancel_Submit && this.notify.success(this.i18nService.getValue('startProcess.cancelSubmitSuccess'));\r\n      }\r\n    }, error => {\r\n      load.close();\r\n      this.taskService.error(error);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 表单上触发流程预解析操作\r\n   * 已封装为表单的命令操作\r\n   */\r\n  processSimulate(): Observable<any> {\r\n    const subject = new Subject();\r\n    const gspWfEventService = (window as any).parent.gspWfEventService;\r\n    gspWfEventService.simulate(() => {\r\n      subject.next(true);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 根据单据id查看流程图\r\n   * 已封装为表单命令和操作\r\n   */\r\n  viewFlowChartByDataId(dataId: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    this.flowchartService.viewFlowChartByDataId(dataId);\r\n  }\r\n\r\n  /**\r\n   * 查看流程图（新，支持预览）\r\n   * 已封装为表单命令和操作\r\n   * @param bizDefKey 流程分类id\r\n   * @param dataId 表单数据id\r\n   */\r\n  viewFlowChartWithForecast(bizDefKey: string, dataId: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.message.error(this.i18nService.getValue('startProcess.bizDefKeyIsNull'));\r\n      return;\r\n    }\r\n    let payload = new ForecastProcessPayload();\r\n    payload.bizDefKey = bizDefKey;\r\n    payload.dataId = dataId;\r\n    this.flowchartService.viewProcess(payload);\r\n  }\r\n\r\n  /**\r\n   * 查看审批记录（弹框）\r\n   * 已封装为表单命令\r\n   * @param dataId 表单数据id\r\n   * @param style 其他参数\r\n   */\r\n  viewApprovalLog(dataId: string, style: string) {\r\n    if (!dataId) {\r\n      this.notify.warning(this.i18nService.getValue('startProcess.dataIdIsNull'));\r\n      return;\r\n    }\r\n    const parameters = {\r\n      dataId: dataId,\r\n      style: style,\r\n    }\r\n    this.logService.showApprovalLog(parameters);\r\n  }\r\n\r\n  /**\r\n   * 获取用户的常用意见（已暴露给farris）\r\n   * @returns 用户常用意见list\r\n   */\r\n  getCommonComments(filter: CommonCommentFilter): Observable<any> {\r\n    return this.taskService.getCommentList(filter);\r\n  }\r\n\r\n  /**\r\n   * 展示常用意见管理dialog（已暴露给farris）\r\n   */\r\n  showCommentManageDialog(filter: CommonCommentFilter): Observable<any> {\r\n    let subject = new Subject();\r\n    const compFactory = this.resolver.resolveComponentFactory(CommentManageComponent);\r\n    const compRef = compFactory.create(this.injector);\r\n    const options: ModalOptions = {\r\n      title: this.i18nService.getValue('comment.static.title'),\r\n      width: 740,\r\n      height: 440,\r\n      showButtons: true,\r\n      buttons: compRef.instance.buttons\r\n    }\r\n    compRef.instance.filter = filter;\r\n    const dialog = this.modalService.show(compRef, options);\r\n    compRef.instance.getConfirmSUbject().subscribe(re => {\r\n      dialog.close();\r\n      subject.next(re);\r\n    });\r\n    compRef.instance.getCancelSubject().subscribe(re => {\r\n      dialog.close();\r\n      subject.next(re);\r\n    });\r\n    return subject.asObservable();\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform, Optional } from '@angular/core';\r\nimport { I18nService } from './i18n.service';\r\n\r\n@Pipe({ name: 'translate' })\r\nexport class TranslatePipe implements PipeTransform {\r\n    constructor(@Optional() public i18nService: I18nService) { }\r\n    transform(name: any, defaultVal = ''): any {\r\n        if (this.i18nService) {\r\n            const r = this.i18nService.getValue(name);\r\n            return r ? r : defaultVal;\r\n        } else {\r\n            return defaultVal;\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lib-task-assigninfo',\r\n  templateUrl: './task-assigninfo.component.html',\r\n  styleUrls: ['./task-assigninfo.component.css']\r\n})\r\n\r\n/**\r\n * 组件已弃用\r\n */\r\nexport class TaskAssigninfoComponent implements OnInit {\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","/**\r\n * farris用户帮助参数\r\n */\r\nexport class UserHelpParam {\r\n\r\n    readonly: boolean = false;\r\n\r\n    multiSelect: boolean;\r\n\r\n    includeJobLeavers: boolean = false;\r\n\r\n    includeCurrentUser: boolean;\r\n\r\n    includeStopUser: boolean = false;\r\n\r\n    unSelectedUserIds: string;\r\n\r\n    orgId: string;\r\n\r\n    enableChildHierarchy: boolean;\r\n\r\n    showTabIds: string;\r\n\r\n    activeTabId: string;\r\n\r\n    userIds: string;\r\n\r\n    personnelOrderField: string = \"orderby_ordernum\";\r\n\r\n    userTypeMode: string = \"WfMode\";\r\n\r\n    filterId: string;\r\n\r\n}","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport { AssigneeInfo } from '../../entity/complete-response';\r\nimport { I18nService } from '../../service/i18n/i18n.service';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { User } from '../../entity/user';\r\nimport { Assignee } from '../../entity/start-process-payload';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { WfContext } from '../../entity/wfContext';\r\nimport { UserHelpParam } from '../../entity/farris-user-help-param';\r\n\r\ndeclare let System: any;\r\n\r\n@Component({\r\n  selector: 'lib-assignee-info',\r\n  templateUrl: './assignee-info.component.html',\r\n  styleUrls: ['../task-execute/task-execute.component.css'],\r\n})\r\nexport class AssigneeInfoComponent implements OnInit {\r\n\r\n  assignUserNgModule: string;\r\n  _assigneeInfo: AssigneeInfo;\r\n  _selectedAssignees: User[];//已经选中的指派人\r\n  assignees: Assignee[] = [];//返回选中人的ID数组\r\n  anonymous = false; // 是否匿名\r\n  anonymousText = ''; // 匿名显示文本\r\n  defaultParticipant: string;//默认办理人（界面提示用）\r\n  pscChange = null;//farris用户帮助\r\n\r\n  @Input() disabled: boolean = false;//办理人员输入框是否禁用\r\n  @Input() placeholder: string;\r\n  @Input() singleSelect: boolean;\r\n  @Input() filter = { notGetCurrentUser: false, notGetStopUser: true, orderField: \"order\", withAllOrg: true, orgId: '' }\r\n  @Input() ifShowBlank: boolean = true;//办理人为空时，是否显示选人框\r\n  @Input() openFromIframe: boolean = false;//是否从iframe打开，应用IDP提交审批集成\r\n  @Input() activityName: string;//节点名称\r\n  @Input() allowGlobalAssign: boolean;//是否全员指派\r\n  @Input() wfContext: WfContext;//工作流上下文\r\n  @Input() index: any;//区分是哪个组件\r\n  @Input() isUseNewSelectUserHelp: boolean = false;//是否直接启用新版选人组件\r\n  @Input() ifHorizontal: boolean = false;//是否水平排列\r\n\r\n  @Output() afterConfirm = new EventEmitter<Assignee[]>();\r\n  groupIcon = '<i class=\"f-icon f-icon-plus-circle text-primary\"></i>';\r\n  extendUserHelp: boolean = false;//用户帮助是否扩展\r\n  extendUserHelpUrl: string;//扩展帮助的url\r\n\r\n  constructor(\r\n    private i18nService: I18nService,\r\n    private notify: NotifyService,\r\n    private cd: ChangeDetectorRef,\r\n    private taskService: TaskService,\r\n    private injector: Injector\r\n  ) {\r\n    //是否使用farris用户帮助\r\n    this.taskService.getWfUserHelpConfig().subscribe((re: any) => {\r\n      if (re && re.userHelpConfig && re.userHelpConfig.isExtend == 'true') {\r\n        this.extendUserHelp = true;\r\n        this.extendUserHelpUrl = re.userHelpConfig.url + '?v=20221114';\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    //引入farris用户帮助脚本\r\n    if (this.openFromIframe) {\r\n      (top as any).System.import(\"/platform/common/web/@farris/common-personnel-select/psc.js\" + '?v=' + new Date().getTime().toString()).then((e) => {\r\n      }, error => {\r\n        console.error(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set assigneeInfo(info: AssigneeInfo) {\r\n    this.disabled = false;\r\n    this.placeholder = null;//清空\r\n    this.assignUserNgModule = null;//清空\r\n    this._assigneeInfo = info;//可以传null\r\n    if (!this._assigneeInfo) {\r\n      this.disabled = true;\r\n    } else {\r\n      if (this._assigneeInfo.selectAssignee) {\r\n        this.disabled = false;\r\n        this.placeholder = this.i18nService.getValue('task.selectPlaceholder');//请选择\r\n      } else {\r\n        this.disabled = true;\r\n        if (this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length) {\r\n          this.defaultParticipant = this.anonymous ? this.anonymousText : this._assigneeInfo.assigneeUsers.map(user => user.name).join();//解析人名\r\n        } else {\r\n          this.defaultParticipant = this.i18nService.getValue('task.noUser');//无\r\n        }\r\n      }\r\n      this.singleSelect = !this._assigneeInfo.multiSelect;\r\n      this.allowGlobalAssign = this._assigneeInfo.allowGlobalAssign;\r\n      if (this._assigneeInfo.organizationScope && this._assigneeInfo.organizationScope.length) {\r\n        const orgList = this._assigneeInfo.organizationScope[0];\r\n        this.filter.orgId = orgList.id;\r\n        this.filter.withAllOrg = orgList.includeChildren;\r\n      }\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymous(anonymous: boolean) {\r\n    this.anonymous = anonymous;\r\n  }\r\n\r\n  @Input()\r\n  set setAnonymousText(anonymousText: string) {\r\n    this.anonymousText = anonymousText;\r\n  }\r\n\r\n  /**\r\n   * 已选中的人（帮助不可用）\r\n   */\r\n  @Input()\r\n  set selectedAssignees(selectedAssignees: User[]) {\r\n    !this._assigneeInfo && (this.placeholder = null);\r\n    this._selectedAssignees = selectedAssignees;\r\n    selectedAssignees.length && (this.defaultParticipant = this.anonymous ? this.anonymousText : selectedAssignees.map(user => user.name).join());\r\n  }\r\n\r\n  /**\r\n   * 选择参与者\r\n   */\r\n  clickAssignUser() {\r\n    if (this.isUseNewSelectUserHelp) {\r\n      this.extendUserHelp = true;\r\n      this.extendUserHelpUrl = '/platform/runtime/wf/web/wf-user-help/wf-user-help-farris/wf-user-help-farris.js' + '?v=' + new Date().getTime().toString();\r\n    }\r\n    let context = {\r\n      singleSelect: this.singleSelect,\r\n      allowGlobalAssign: this.allowGlobalAssign,\r\n      assigneeUsers: this._assigneeInfo && this._assigneeInfo.assigneeUsers && this._assigneeInfo.assigneeUsers.length ? this._assigneeInfo.assigneeUsers : [],\r\n      filter: this.filter,\r\n      selectedUsers: this.assignees && this.assignees.length ? this.assignees : this._selectedAssignees,\r\n      wfContext: this.wfContext\r\n    }\r\n    if (this.extendUserHelp) {\r\n      if (this.openFromIframe) {\r\n        this.showFarrisUserHelpFromWindow(context);\r\n      } else {\r\n        this.showExtendUserHelp(context);\r\n      }\r\n    } else {\r\n      this.showExtendUserHelp(context);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * 加载扩展帮助\r\n   */\r\n  private showExtendUserHelp(context: any) {\r\n    System.import(this.extendUserHelpUrl).then((moduleFactories: any) => {\r\n      const moduleFactory: any = Object.values(moduleFactories)[0];\r\n      const moduleRef = moduleFactory.create(this.injector);\r\n      moduleRef.instance.showHelp(context).subscribe(re => {\r\n        let userList = re.userList;\r\n        if (userList && userList.length) {\r\n          this.assignees = userList.map(user => { return { id: user.id, name: user.name } });\r\n          this.assignUserNgModule = this.assignees.map(user => user.name).join();\r\n        } else {\r\n          this.assignees = [];\r\n          this.assignUserNgModule = '';\r\n        }\r\n        this.afterConfirm.emit(this.assignees);\r\n        this.cd.detectChanges();\r\n      }, error => {\r\n        console.error(error);\r\n      });\r\n    }, error => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  //从window上弹出用户帮助\r\n  private showFarrisUserHelpFromWindow(context: any) {\r\n    let param = new UserHelpParam();\r\n    if (context.wfContext) {\r\n      param.filterId = context.wfContext.processCategoryId;\r\n    }\r\n    param.multiSelect = !context.singleSelect;\r\n    let showOrgTab = false;\r\n    if (context.allowGlobalAssign || (context.filter && context.filter.orgId)) {\r\n      showOrgTab = true;\r\n    }\r\n    let farrisUnSelectedUserIds = '';\r\n    if (context.assigneeUsers && context.assigneeUsers.length) {\r\n      farrisUnSelectedUserIds = context.assigneeUsers.map(user => user.id).join();\r\n      param.unSelectedUserIds = farrisUnSelectedUserIds;\r\n    }\r\n    //有参与者 + 允许全员\r\n    if (showOrgTab && farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'candidate,recent,organization,favorites,group';\r\n      param.activeTabId = 'candidate';\r\n    }\r\n    //允许全员\r\n    if (showOrgTab && !farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'recent,organization,favorites,group';\r\n      param.activeTabId = 'recent';\r\n    }\r\n    //仅有参与者\r\n    if (!showOrgTab && farrisUnSelectedUserIds) {\r\n      param.showTabIds = 'candidate';\r\n      param.activeTabId = 'candidate';\r\n    }\r\n    if (context.filter) {\r\n      let filter = context.filter;\r\n      param.includeCurrentUser = !filter.notGetCurrentUser;\r\n      param.orgId = filter.orgId ? filter.orgId : '*';\r\n      param.enableChildHierarchy = filter.withAllOrg;\r\n    }\r\n    if (context.selectedUsers && context.selectedUsers.length) {\r\n      param.userIds = context.selectedUsers.map(user => user.id).join();\r\n    }\r\n    const token = 'gspWfTask' + this.index;\r\n    (top.window as any).CommonPersonnelSelect.component.farrisDialogShowInWf(param, token);\r\n    if (!this.pscChange) {\r\n      this.pscChange = (top.window as any).FARRIS_PSC.selectionsChange.subscribe((re) => {\r\n        if (re.token == token) {\r\n          let userList = re.data;\r\n          if (userList && userList.length) {\r\n            this.assignees = userList.map(user => { return { id: user.userId, name: user.name } });\r\n            this.assignUserNgModule = this.assignees.map(user => user.name).join();\r\n          } else {\r\n            this.assignees = [];\r\n            this.assignUserNgModule = '';\r\n          }\r\n          this.afterConfirm.emit(this.assignees);\r\n          this.cd.detectChanges();\r\n        }\r\n      }\r\n      );\r\n    }\r\n  }\r\n\r\n  //清除\r\n  assignUserClear() {\r\n    this.assignees = [];\r\n    this.assignUserNgModule = null;\r\n    this.afterConfirm.emit([]);\r\n  }\r\n\r\n}\r\n","import { Directive, EventEmitter, HostListener, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\n/**\r\n * 点击节流器：避免连续点击\r\n */\r\n@Directive({\r\n  selector: '[directive-throttle]'\r\n})\r\nexport class ThrottleClickDirective implements OnInit, OnDestroy {\r\n  // 一定的时间内只执行第一个事件\r\n  private THROTTLE_TIME: number = 2000;\r\n  private subject = new Subject<MouseEvent>();\r\n  private click: Subscription;\r\n  // 事件方法\r\n  @Output() throttleClick = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    const result = this.subject.pipe(\r\n      throttleTime(this.THROTTLE_TIME)\r\n    );\r\n    this.click = result.subscribe(e => {\r\n      this.throttleClick.emit(e)\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.click.unsubscribe();\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(evt: MouseEvent) {\r\n    this.subject.next(evt);\r\n  }\r\n}","\r\n/**\r\n * 执行上传附件实体\r\n */\r\nexport class FileUploadEntity {\r\n\r\n    rootId: string;\r\n\r\n    metadataIdList: string[];\r\n}\r\n\r\n/**\r\n * 执行删除附件所需实体\r\n */\r\nexport class FileDeleteEntity {\r\n\r\n    rootId: String;\r\n\r\n    metadataId: String;\r\n\r\n    mode: String;\r\n}\r\n\r\nexport class GspDocUploadEntity {\r\n\r\n    filePath: string;\r\n\r\n    metadata: GspDocMetadata;\r\n\r\n    fileContent: string;\r\n\r\n    mode: string;\r\n}\r\n\r\nexport class GspDocMetadata {\r\n\r\n    id: string;\r\n\r\n    fileName: string;\r\n\r\n    rootId: string;\r\n\r\n    docType: string;\r\n}","import { Component, OnInit, Input, ViewChild, forwardRef, Output, EventEmitter } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { FDropdownDirective } from '@farris/ui-dropdown';\r\nimport { UploadDialogService } from '@gsp-svc/formdoc-upload';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { FileDeleteEntity, FileUploadEntity, GspDocMetadata, GspDocUploadEntity } from '../../entity/attachment';\r\nimport { SignHereComponent } from '@gsp-wf/wf-sign';\r\nimport { AvatarComponent } from '@farris/ui-avatar';\r\nimport { DownloadService } from '@gsp-svc/file-load';\r\nimport { TaskService } from '../../service/task.service';\r\nimport { CommonComment } from '../../entity/comment';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { ConfigCode, TaskCenterConfig } from '../../entity/task-center-config';\r\nimport { CommentManageComponent } from '../comment-manage/comment-manage.component';\r\n\r\n@Component({\r\n  selector: 'wf-comment',\r\n  templateUrl: './task-comment.component.html',\r\n  styleUrls: ['./task-comment.component.scss'],\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => TaskCommentComponent),\r\n    multi: true\r\n  },]\r\n})\r\nexport class TaskCommentComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Input() showAttachment: boolean = true;//是否显示附件上传，组件控制\r\n  @Input() showSign: boolean = true;//是否显示签名，组件控制（不同动作可能会不显示）\r\n  @Input() showCommonComment = true;//是否显示常用意见\r\n  @Input() comment: string;\r\n  @Input() placeholder = '';\r\n  @Input() processInstanceId: string;\r\n  @Input() textAreaHeight: number = 120;//文字框的高度\r\n  @Input() defaultComment: string;//默认的意见\r\n  @Input() curUserId: string;//当前用户id\r\n  @Input() taskOrigin: string;//当前是任务列表打开还是任务办理界面打开\r\n\r\n  @Input()\r\n  set TaskCenterConfig(configList: TaskCenterConfig[]) {\r\n    if (configList && configList.length) {\r\n      const attachment = configList.find(a => a.configCode == ConfigCode.If_Show_Attachment);\r\n      const sign = configList.find(a => a.configCode == ConfigCode.If_Show_Signature);\r\n      const enableSign = configList.find(a => a.configCode == ConfigCode.If_Use_Sign_By_Default);\r\n      const editSign = configList.find(a => a.configCode === ConfigCode.If_Can_Edit_Signature);\r\n      attachment && attachment.currentValue === 'true' && (this.ifShowAttachment = true);\r\n      sign && sign.currentValue === 'true' && (this.ifShowSign = true);\r\n      enableSign && enableSign.currentValue === 'false' && (this.ifEnableSign = false);\r\n      editSign && editSign.currentValue === 'false' && (this.ifCanEditSign = false);\r\n      if (this.ifShowSign && this.ifEnableSign) {\r\n        this.getUserSign(this.curUserId);\r\n      }\r\n    }\r\n  }\r\n\r\n  @Output() attachment = new EventEmitter();//附件\r\n  @Output() signature = new EventEmitter();//上传签名之后，发送签名id\r\n  @ViewChild('commentDialog') commentDialog: DialogComponent;//常用意见管理\r\n  @ViewChild('signDialog') signDialog: DialogComponent;//手写签名弹框\r\n  @ViewChild('dropdownEl') dropDownEl: FDropdownDirective;//解决选择意见后，下拉菜单无法收折的问题\r\n  @ViewChild('wfSignHere') signaturePad: SignHereComponent;//手写签名组件\r\n  @ViewChild('farrisAvatar') farrisAvatar: AvatarComponent;//头像组件，用作签名图片上传\r\n  @ViewChild('commentManageComp') commentManageComp: CommentManageComponent;//意见维护组件\r\n\r\n\r\n  private _value = '';\r\n  attachmentList: any[] = [];\r\n  ifShowAttachment: boolean = false;//任务中心配置，是否显示附件上传\r\n  ifShowSign: boolean = false;//任务中心配置，是否显示手写签名\r\n  signatureImage: string;//签名图片的base64值\r\n  tmpSignatureImage: string;//临时保存上传的图片\r\n  downloadService = new DownloadService();\r\n  ifUseSign: boolean = false;//是否使用手写\r\n  ifUseImg: boolean = true;//是否使用上传图片\r\n  ifEnableSign: boolean = true;//是否默认启用签名\r\n  ifUploadImg: boolean = false;//是否上传过图片\r\n  ifCanEditSign: boolean = true;//是否允许编辑签名\r\n  originSignId: string;//原始的签名id\r\n  isShowCommonTips: boolean = false;//是否展示提示\r\n  commentList: CommonComment[] = [];\r\n\r\n\r\n  btnHover = {//按钮hover样式变化\r\n    commentHover: false,\r\n    attachmentHover: false,\r\n    signHover: false\r\n  }\r\n\r\n  set value(v) {\r\n    if (this._value !== v) {\r\n      this._value = v;\r\n      this.onModelChange(v);\r\n    }\r\n\r\n  }\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  onModelChange = (obj: any) => { };\r\n  onModelTouched = (obj: any) => { };\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n    private uploadDialog: UploadDialogService,\r\n    private messageService: MessagerService,\r\n    private loadingService: LoadingService,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commentManageComp.getConfirmSUbject().subscribe(re => {\r\n      this.commentDialog && this.commentDialog.close();\r\n    })\r\n    this.commentManageComp.getCancelSubject().subscribe(() => {\r\n      this.commentDialog && this.commentDialog.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 弹出常用意见管理框\r\n   */\r\n  showCommentDialog() {\r\n    this.dropDownEl && this.dropDownEl.close();\r\n    this.commentDialog.show();\r\n  }\r\n\r\n  /**\r\n   * 点击常用意见，获取用户常用意见列表\r\n   */\r\n  loadComments() {\r\n    this.taskService.getCommentList().subscribe((data: any[]) => {\r\n      this.commentList = data;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ControlValueAccessor必须实现的方法\r\n   */\r\n  writeValue(value: string) {\r\n    if (value !== this.value) {\r\n      this.value = value;\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn) {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn) {\r\n    this.onModelTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * 选择一条常用意见后事件\r\n   */\r\n  buttonClick(data: any) {\r\n    this.dropDownEl.close();\r\n    this.value = this.value == this.defaultComment ? data : this.value + data;\r\n  }\r\n\r\n  /**\r\n   * 上传附件\r\n   */\r\n  uploadAttachment() {\r\n    let isRepeat = false;\r\n    this.uploadDialog.uploadFile(this.processInstanceId ? this.processInstanceId : 'gspwftaskattachment', 'wf_attachment').then(re => {\r\n      for (let i of (re as any[])) {\r\n        isRepeat = false;\r\n        for (let attach of this.attachmentList) {\r\n          if (attach.fileName === i.fileName) {\r\n            this.messageService.info('包含重复文件' + i.fileName);\r\n            isRepeat = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!isRepeat) {\r\n          this.attachmentList.push(i);\r\n        }\r\n      }\r\n      this.attachment.emit(this.attachmentList);\r\n      //执行上传附件\r\n      let files = new FileUploadEntity();\r\n      files.rootId = \"wf_attachment\";\r\n      files.metadataIdList = [];\r\n      this.attachmentList.forEach(a => {\r\n        files.metadataIdList.push(a.metadataId);\r\n      })\r\n      files.metadataIdList.length && this.taskService.uploadAttachment(files).subscribe(() => { });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 删除附件\r\n   */\r\n  attachmentDelete(attachment) {\r\n    var gspDocDeleteEntity: FileDeleteEntity = {\r\n      rootId: \"wf_attachment\",\r\n      metadataId: attachment.metadataId,\r\n      mode: \"Formal\"\r\n    }\r\n    let index = this.attachmentList.indexOf(attachment);\r\n    if (index > -1) {\r\n      this.attachmentList.splice(index, 1);\r\n    }\r\n    this.attachment.emit(this.attachmentList);\r\n    this.taskService.deleteAttachment(gspDocDeleteEntity).subscribe(() => { });\r\n  }\r\n\r\n  /**\r\n  * web端打开附件预览\r\n  */\r\n  attachmentPreview(metadataId) {\r\n    const options = {\r\n      appType: \"app\",\r\n      funcId: \"\",\r\n      tabName: \"文档在线预览\",\r\n      appId: \"6ccb476b-f2ba-df8f-6f47-d37d100c56e2\",\r\n      appEntrance: \"docviewertab\",\r\n      tabId: new Date().getTime(),\r\n      entityParams: {\r\n        metadataIdList: [metadataId],\r\n        rootId: \"wf_attachment\",\r\n        metadataId: null,\r\n        viewOptions: {\r\n          showHeader: true,\r\n          showPaging: true,\r\n          showThumbnails: true,\r\n          showDownload: true,\r\n          showSearch: true,\r\n          showZoom: true,\r\n          showPrint: true,\r\n          showSecondaryToolBar: true,\r\n        },\r\n      },\r\n    };\r\n    (window as any).gspframeworkService.rtf.func.openMenu(options);\r\n  }\r\n\r\n  /**\r\n   * 获取不同格式附件的缩略图\r\n   */\r\n  imageUrl(attachmentInfo) {\r\n    const url = '/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/';\r\n    return url + this.taskService.createItem(attachmentInfo) + '.svg?v=20220303';\r\n  }\r\n\r\n  /**\r\n   * 展示手写签名dialog\r\n   */\r\n  showSignDialog() {\r\n    this.signDialog.show();\r\n    if (!this.ifEnableSign) {\r\n      this.getUserSign(this.curUserId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击删除签名\r\n   */\r\n  clickToDeleteImage() {\r\n    this.signatureImage = '';\r\n    this.signature.emit(null);\r\n    const load = this.loadingService.show();\r\n    this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'false').subscribe(re => {\r\n      load.close();\r\n    }, () => {\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  clickToUseSign() {\r\n    this.ifUseImg = false;\r\n    this.ifUseSign = true;\r\n    const canvas: any = this.signaturePad.canvasDiv.nativeElement.querySelector('canvas');\r\n    canvas.height = 252;\r\n    canvas.width = 665;\r\n  }\r\n\r\n  clickToUploadImg() {\r\n    this.farrisAvatar.onClick();\r\n  }\r\n\r\n  /**\r\n   * 手写签名点确定\r\n   */\r\n  clickToConfirm() {\r\n    let image: any;\r\n    if (this.signaturePad && this.signaturePad.isDraw) {//如果签过名\r\n      image = this.signaturePad.confirm();\r\n    } else if (this.ifUploadImg) {//如果上传过图片\r\n      image = this.tmpSignatureImage;\r\n    }\r\n    if (image) {\r\n      this.uploadSignatureImg(image);\r\n    } else {\r\n      this.signatureImage = this.tmpSignatureImage;\r\n      this.signature.emit(this.originSignId);\r\n      this.signDialog.close();\r\n    }\r\n    //添加启用签名配置\r\n    const load = this.loadingService.show();\r\n    this.taskService.addUserConfig(ConfigCode.If_Use_Sign_By_Default, 'true').subscribe(re => {\r\n      load.close();\r\n    }, () => {\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 点击清空\r\n   */\r\n  clickToReset() {\r\n    this.ifUseSign = false;\r\n    this.ifUseImg = true;\r\n    this.signatureImage = '';\r\n    this.tmpSignatureImage = '';\r\n    this.signature.emit('');\r\n    this.signaturePad && (this.signaturePad.isDraw = false);\r\n    this.ifUploadImg = false;\r\n  }\r\n\r\n  /**\r\n   * 点击取消\r\n   */\r\n  clickToCancel() {\r\n    this.signDialog.close();\r\n  }\r\n\r\n  /**\r\n   * 上传图片后事件\r\n   * event.base64 是图片信息,event.name是带后缀的图片名，event.type如image/jpeg\r\n   */\r\n  imgChange(event: any) {\r\n    this.ifUseImg = true;\r\n    this.ifUseSign = false;\r\n    this.ifUploadImg = true;\r\n    const image = event.base64;\r\n    this.tmpSignatureImage = image;\r\n    this.signatureImage = image;\r\n  }\r\n\r\n  /**\r\n   * 上传签名\r\n   * @param image \r\n   */\r\n  private uploadSignatureImg(image: any) {\r\n    var uploadSignature = new GspDocUploadEntity();\r\n    uploadSignature.fileContent = image.split(',')[1];\r\n    uploadSignature.filePath = this.curUserId;\r\n    uploadSignature.mode = \"Formal\";\r\n    uploadSignature.metadata = new GspDocMetadata();\r\n    uploadSignature.metadata.id = this.taskService.createNM();\r\n    uploadSignature.metadata.fileName = this.taskService.createNM() + \".png\";\r\n    uploadSignature.metadata.rootId = \"taskcentersignature\";\r\n    uploadSignature.metadata.docType = \"png\";\r\n    const load = this.loadingService.show();\r\n    this.taskService.uploadSignature(uploadSignature).subscribe(signId => {\r\n      load.close();\r\n      this.originSignId = signId;\r\n      this.signature.emit(signId);\r\n      this.signatureImage = image;\r\n      this.signDialog.close();\r\n      localStorage.setItem('gspWfTaskUserSign' + this.curUserId + this.taskService.getCurrentDateString(), signId);\r\n    }, error => {\r\n      load.close();\r\n      this.messageService.error('上传签名失败');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 获取用户的最近一次签名\r\n   */\r\n  private getUserSign(userId: string) {\r\n    const load = this.loadingService.show();\r\n    this.taskService.getUserSignId(userId).subscribe(signId => {\r\n      load.close();\r\n      if (signId) {\r\n        this.signature.emit(signId);\r\n        this.originSignId = signId;\r\n        this.signatureImage = this.downloadService.getDownloadUrl(signId, 'taskcentersignature');\r\n        this.tmpSignatureImage = this.signatureImage;\r\n      }\r\n    }, error => {\r\n      console.error(error);\r\n      load.close();\r\n    })\r\n  }\r\n\r\n  //文本框值变动监听事件\r\n  valueChange(e) {\r\n    if (this.taskService.getBytesLength(this.value) > 4000) {\r\n      this.isShowCommonTips = true;\r\n    } else {\r\n      this.isShowCommonTips = false;\r\n    };\r\n  }\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { DataTableModule } from '@farris/ui-datatable';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule, EditorProviders } from '@farris/ui-datagrid-editors';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisSectionModule } from '@farris/ui-section';\r\n\r\nimport { WfApprovalLogsModule } from '@gsp-wf/wf-approval-logs';\r\nimport { UiFlowchartModule } from '@gsp-wf/ui-flowchart'\r\nimport { TaskImplApiModule } from '@gsp-wf/task-impl-api';\r\nimport { AvatarModule } from '@farris/ui-avatar';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { WfSignModule } from '@gsp-wf/wf-sign';\r\n\r\nimport { CommonSharedModule } from '@gsp-sys/rtf-common';\r\nimport { SessionService, HttpService, CacheService } from '@ecp-caf/caf-common';\r\nimport { FrameworkService, FrmEventBus, FuncsService } from '@gsp-sys/rtf-common';\r\n\r\nimport { TaskService } from './service/task.service';\r\nimport { TranslatePipe } from './service/i18n/translate.pipe';\r\nimport { I18nService } from './service/i18n/i18n.service';\r\nimport { WfTaskHandlerService } from './wf-task-handler.service';\r\nimport { TaskExecuteComponent } from './components/task-execute/task-execute.component'\r\nimport { TaskAssigninfoComponent } from './components/task-assigninfo/task-assigninfo.component';\r\nimport { ProcessSelectorComponent } from './submit/process-selector/process-selector.component';\r\nimport { AssigneeInfoComponent } from './components/assignee-info/assignee-info.component';\r\nimport { ThrottleClickDirective } from './throttleTime/throttleClickDirective';\r\nimport { TaskCommentComponent } from './components/task-comment/task-comment.component';\r\nimport { UrgeHandleComponent } from './components/urge-handle/urge-handle.component';\r\nimport { CommentManageComponent } from './components/comment-manage/comment-manage.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TranslatePipe,\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    ThrottleClickDirective,\r\n    TaskCommentComponent,\r\n    UrgeHandleComponent,\r\n    CommentManageComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    DataTableModule,\r\n    FarrisDialogModule,\r\n    PaginationModule,\r\n    NotifyModule,\r\n    ComboListModule,\r\n    WfApprovalLogsModule,\r\n    UiFlowchartModule,\r\n    CommonSharedModule,\r\n    LoadingModule,\r\n    TaskImplApiModule,\r\n    MessagerModule,\r\n    InputGroupModule,\r\n    WfSignModule,//手写签名\r\n    AvatarModule,//签名上传图片\r\n    FDropdownDirectiveTypeModule,//下拉菜单\r\n    DatagridModule,//常用意见管理farris表格\r\n    DatagridEditorsModule,\r\n    DatagridModule.forRoot([\r\n      ...EditorProviders\r\n    ]),\r\n    FarrisFormsModule,\r\n    SwitchModule,\r\n    FarrisSectionModule\r\n  ],\r\n  providers: [\r\n    TaskService,\r\n    I18nService,\r\n    WfTaskHandlerService,\r\n    FrameworkService,//框架没提供module\r\n    SessionService,\r\n    HttpService,\r\n    CacheService,\r\n    FrmEventBus,\r\n    FuncsService,\r\n  ],\r\n  exports: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    TaskCommentComponent,\r\n    CommentManageComponent\r\n  ],\r\n  entryComponents: [\r\n    TaskExecuteComponent,\r\n    TaskAssigninfoComponent,\r\n    ProcessSelectorComponent,\r\n    AssigneeInfoComponent,\r\n    TaskCommentComponent,\r\n    CommentManageComponent\r\n  ]\r\n})\r\nexport class WfTaskHandlerModule { }\r\n"],"names":[],"mappings":"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"}
