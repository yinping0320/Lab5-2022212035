/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, HostBinding, ComponentFactoryResolver, Injector } from '@angular/core';
import { Subject } from 'rxjs';
import { MessagerService } from '@farris/ui-messager';
import { EditorTypes } from '@farris/ui-datagrid-editors';
import { DatagridComponent } from '@farris/ui-datagrid';
import { EnumItem } from '../entity/dimensiondef.entity';
import { WFDimensionDefUIState } from '../service/wf-dimension-def.uistate';
import { GSPElementObjectType } from '@gsp-bef/gsp-cm-metadata';
import { SelectElementComponent } from '../refModule/select-element/select-element.component';
import { BsModalService } from '@farris/ui-modal';
export class EnumEditComponent {
    /**
     * @param {?} messageService
     * @param {?} uistate
     * @param {?} modalService
     * @param {?} resolver
     * @param {?} injector
     */
    constructor(messageService, uistate, modalService, resolver, injector) {
        this.messageService = messageService;
        this.uistate = uistate;
        this.modalService = modalService;
        this.resolver = resolver;
        this.injector = injector;
        this.cls = 'farris-main-area flex-column';
        this.columns = [
            { field: 'key', width: 100, title: '键', editor: { type: EditorTypes.TEXTBOX, options: {} } },
            { field: 'value', width: 100, title: '值', editor: { type: EditorTypes.TEXTBOX, options: {} } }
        ];
        this.confirm = new Subject();
        this.closeModalEmitter = new Subject();
        /**
         * 显示值
         */
        this.editData = new Array();
        this.maxNum = 0;
    }
    /**
     * 实际值
     * @return {?}
     */
    get enumValues() {
        /** @type {?} */
        const arr = [];
        if (this.editData && this.editData.length >= 0) {
            this.editData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                /** @type {?} */
                const enumItem = new EnumItem();
                enumItem.key = item.key;
                enumItem.value = item.value;
                arr.push(enumItem);
            }));
        }
        return arr;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * 加载显示数据
     * @param {?} enumValues
     * @return {?}
     */
    load(enumValues) {
        this.editData = [...this.createData(enumValues)];
    }
    /**
     * 确认
     * @return {?}
     */
    onConfirm() {
        this.closeCell();
        if (this.checkBeforeSave()) {
            this.confirm.next(this.enumValues);
            this.closeModalEmitter.next();
        }
    }
    /**
     * 取消
     * @return {?}
     */
    cancel() {
        this.closeModalEmitter.next();
    }
    /**
     * 保存前检查
     * @return {?}
     */
    checkBeforeSave() {
        // ① 空，则通过；
        if (!(this.enumValues) || this.enumValues.length === 0) {
            this.messageService.warning('请添加枚举值。');
            return false;
        }
        // ② 非空，则校验每个的键值是否为空；
        for (const item of this.enumValues) {
            if (!item.key || !item.value) {
                this.messageService.warning('枚举的[键][值]均不允许为空。');
                return false;
            }
        }
        // ③ 多于一个，索引不允许重复；
        if (this.enumValues.length > 1) {
            for (let i = 0; i < this.enumValues.length; i++) {
                /** @type {?} */
                const code1 = this.enumValues[i].value;
                /** @type {?} */
                const name1 = this.enumValues[i].key;
                for (let j = i + 1; j < this.enumValues.length; j++) {
                    /** @type {?} */
                    const code2 = this.enumValues[j].value;
                    /** @type {?} */
                    const name2 = this.enumValues[j].key;
                    if (code1 === code2) {
                        this.messageService.warning(`枚举的[编号]不允许重复，重复编号为[${code1}]。`);
                        return false;
                    }
                    if (name1 === name2) {
                        this.messageService.warning(`枚举的[名称]不允许重复，重复名称为[${name1}]。`);
                        return false;
                    }
                }
            }
        }
        return true;
    }
    /**
     * 取消编辑
     * @return {?}
     */
    closeCell() {
        this.dg.endCellEdit();
    }
    /**
     * 引入
     * @return {?}
     */
    import() {
        if (!this.uistate.beMetaData) {
            this.messageService.error('未获取到BE元数据，请联系管理员查看原因！');
            return;
        }
        /** @type {?} */
        const model = this.uistate.beMetaData.content;
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(SelectElementComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.injector);
        compRef.instance.selectEleInfo.be = model;
        compRef.instance.selectEleInfo.singleElement = true;
        compRef.instance.selectEleInfo.assoRefElement = false;
        compRef.instance.confirm.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            /** @type {?} */
            const selectedElement = (/** @type {?} */ (data.selectedBeFields[0]));
            if (selectedElement.ObjectType === GSPElementObjectType.Enum) {
                this.editData = new Array();
                /** @type {?} */
                let k = 0;
                for (const enumValue of selectedElement.ContainEnumValues) {
                    this.editData.push({
                        id: k,
                        key: enumValue.Value,
                        value: enumValue.Name,
                    });
                    k++;
                }
                this.maxNum = k;
            }
            else {
                this.messageService.info('选中字段并非枚举字段，请了解！');
            }
        }));
        /** @type {?} */
        const modalConfig = {
            title: '枚举字段选择',
            width: 1000,
            height: 550,
            showButtons: false
        };
        /** @type {?} */
        const dialog = this.modalService.show(compRef, modalConfig);
        compRef.instance.closeModal.subscribe((/**
         * @return {?}
         */
        () => {
            dialog.close();
        }));
    }
    /**
     * 新增
     * @return {?}
     */
    add() {
        this.closeCell();
        /** @type {?} */
        const newId = this.maxNum;
        this.editData = this.editData.concat([{
                id: newId
            }]);
        this.maxNum++;
    }
    /**
     * 删除
     * @return {?}
     */
    remove() {
        this.closeCell();
        if (this.dg.selectedRow) {
            /** @type {?} */
            const id = this.dg.selectedRow.id;
            this.dg.selectPrevRow();
            this.editData = this.editData.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id !== id));
        }
    }
    /**
     * @param {?} enumValues
     * @return {?}
     */
    createData(enumValues) {
        /** @type {?} */
        const arr = [];
        /** @type {?} */
        let k = 0;
        for (const enumValue of enumValues) {
            arr.push({
                id: k,
                key: enumValue.key,
                value: enumValue.value,
            });
            k++;
        }
        this.maxNum = k;
        return arr;
    }
}
EnumEditComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-enum-edit',
                template: "<ng-template #buttons>\r\n    <button class=\"btn btn-primary\" (click)=\"onConfirm()\">\u786E\u5B9A</button>\r\n    <button class=\"btn btn-secondary\" (click)=\"cancel()\">\u53D6\u6D88</button>\r\n</ng-template>\r\n\r\n<div class=\"f-page\">\r\n    <div class=\"f-page-header\">\r\n        <nav class=\"f-page-header-base\">\r\n            <div class=\"f-title\">\r\n                <span class=\"f-title-icon f-text-orna-bill\">\r\n                    <i class=\"f-icon f-icon-page-title-administer\"></i>\r\n                </span>\r\n                <h4 class=\"f-title-text\">\u5217\u8868</h4>\r\n            </div>\r\n            <div class=\"btn-toolbar btn-group-lg\">\r\n                <button class=\"btn btn-primary mr-2\" (click)=\"import()\">\u5F15\u5165</button>\r\n                <button class=\"btn btn-secondary mr-2\" (click)=\"add()\">\u65B0\u589E</button>\r\n                <button class=\"btn btn-secondary\" (click)=\"remove()\">\u5220\u9664</button>\r\n            </div>\r\n        </nav>\r\n    </div>\r\n    <div class=\"f-page-main f-utils-fill-flex-column h-100\">\r\n        <div class=\"f-utils-fill-flex-column farris-overflow-y-auto h-100\">\r\n            <farris-datagrid [data]=\"editData\" [columns]=\"columns\" #dg=\"datagrid\" [fit]=\"true\" \r\n                [editable]=\"true\" [editMode]=\"'cell'\" [idField]=\"'id'\"\r\n                [showCheckbox]=\"false\" [fitColumns]=\"true\" [showLineNumber]=\"true\" [lineNumberTitle]=\"'\u5E8F\u53F7'\" [lineNumberWidth]=\"50\" \r\n                [striped]=\"true\" [virtualized]=\"true\" [pagination]=\"false\">\r\n            </farris-datagrid>\r\n        </div>\r\n    </div>\r\n</div>",
                styles: [":host{position:absolute;top:0;bottom:0;right:0;left:0}"]
            }] }
];
/** @nocollapse */
EnumEditComponent.ctorParameters = () => [
    { type: MessagerService },
    { type: WFDimensionDefUIState },
    { type: BsModalService },
    { type: ComponentFactoryResolver },
    { type: Injector }
];
EnumEditComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    dg: [{ type: ViewChild, args: ['dg',] }],
    btnRef: [{ type: ViewChild, args: ['buttons',] }]
};
if (false) {
    /** @type {?} */
    EnumEditComponent.prototype.cls;
    /** @type {?} */
    EnumEditComponent.prototype.columns;
    /** @type {?} */
    EnumEditComponent.prototype.dg;
    /** @type {?} */
    EnumEditComponent.prototype.btnRef;
    /** @type {?} */
    EnumEditComponent.prototype.confirm;
    /** @type {?} */
    EnumEditComponent.prototype.closeModalEmitter;
    /**
     * 显示值
     * @type {?}
     */
    EnumEditComponent.prototype.editData;
    /** @type {?} */
    EnumEditComponent.prototype.maxNum;
    /**
     * @type {?}
     * @private
     */
    EnumEditComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    EnumEditComponent.prototype.uistate;
    /**
     * @type {?}
     * @private
     */
    EnumEditComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    EnumEditComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    EnumEditComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bS1lZGl0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2Yvd2YtZGltZW5zaW9uLWRlZi8iLCJzb3VyY2VzIjpbImxpYi9lbnVtLWVkaXQvZW51bS1lZGl0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSx3QkFBd0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0gsT0FBTyxFQUFFLE9BQU8sRUFBTSxNQUFNLE1BQU0sQ0FBQztBQUVuQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN6RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM1RSxPQUFPLEVBQW9DLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbEcsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDOUYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBT2xELE1BQU0sT0FBTyxpQkFBaUI7Ozs7Ozs7O0lBb0M1QixZQUNVLGNBQStCLEVBQy9CLE9BQThCLEVBQzlCLFlBQTRCLEVBQzVCLFFBQWtDLEVBQ2xDLFFBQWtCO1FBSmxCLG1CQUFjLEdBQWQsY0FBYyxDQUFpQjtRQUMvQixZQUFPLEdBQVAsT0FBTyxDQUF1QjtRQUM5QixpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7UUFDNUIsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQXZDNUIsUUFBRyxHQUFHLDhCQUE4QixDQUFDO1FBRXJDLFlBQU8sR0FBRztZQUNSLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQzVGLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFO1NBQUMsQ0FBQztRQUlsRyxZQUFPLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUM3QixzQkFBaUIsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDOzs7O1FBS3ZDLGFBQVEsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBRXZCLFdBQU0sR0FBRyxDQUFDLENBQUM7SUF3QlAsQ0FBQzs7Ozs7SUFuQkwsSUFBSSxVQUFVOztjQUNOLEdBQUcsR0FBRyxFQUFFO1FBQ2QsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtZQUM5QyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU87Ozs7WUFBQyxJQUFJLENBQUMsRUFBRTs7c0JBQ3JCLFFBQVEsR0FBRyxJQUFJLFFBQVEsRUFBRTtnQkFDL0IsUUFBUSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUN4QixRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQzVCLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDckIsQ0FBQyxFQUFDLENBQUM7U0FDSjtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7OztJQVVELFFBQVE7SUFFUixDQUFDOzs7Ozs7SUFLRCxJQUFJLENBQUMsVUFBVTtRQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUNuRCxDQUFDOzs7OztJQUtELFNBQVM7UUFDUCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDakIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUU7WUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUMvQjtJQUNILENBQUM7Ozs7O0lBS0QsTUFBTTtRQUNKLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQyxDQUFDOzs7OztJQUtELGVBQWU7UUFDYixXQUFXO1FBQ1gsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN0RCxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN2QyxPQUFPLEtBQUssQ0FBQztTQUNkO1FBQ0QscUJBQXFCO1FBQ3JCLEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQzVCLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7Z0JBQ2hELE9BQU8sS0FBSyxDQUFDO2FBQ2Q7U0FDRjtRQUNELGtCQUFrQjtRQUNsQixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUM5QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7O3NCQUN6QyxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLOztzQkFDaEMsS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRztnQkFDcEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs7MEJBQzdDLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUs7OzBCQUNoQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHO29CQUVwQyxJQUFJLEtBQUssS0FBSyxLQUFLLEVBQUU7d0JBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLHNCQUFzQixLQUFLLElBQUksQ0FBQyxDQUFDO3dCQUM3RCxPQUFPLEtBQUssQ0FBQztxQkFDZDtvQkFDRCxJQUFJLEtBQUssS0FBSyxLQUFLLEVBQUU7d0JBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLHNCQUFzQixLQUFLLElBQUksQ0FBQyxDQUFDO3dCQUM3RCxPQUFPLEtBQUssQ0FBQztxQkFDZDtpQkFDRjthQUNGO1NBQ0Y7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7Ozs7O0lBS0QsU0FBUztRQUNQLElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDeEIsQ0FBQzs7Ozs7SUFJRCxNQUFNO1FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFO1lBQzVCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDbkQsT0FBTztTQUNSOztjQUNLLEtBQUssR0FBbUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTzs7Y0FDdkQsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsc0JBQXNCLENBQUM7O2NBQzNFLE9BQU8sR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDakQsT0FBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLEtBQUssQ0FBQztRQUMxQyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3BELE9BQU8sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDdEQsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsU0FBUzs7OztRQUFDLElBQUksQ0FBQyxFQUFFOztrQkFDbEMsZUFBZSxHQUFHLG1CQUFBLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBb0I7WUFDcEUsSUFBSSxlQUFlLENBQUMsVUFBVSxLQUFLLG9CQUFvQixDQUFDLElBQUksRUFBRTtnQkFDNUQsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDOztvQkFDeEIsQ0FBQyxHQUFHLENBQUM7Z0JBQ1QsS0FBSyxNQUFNLFNBQVMsSUFBSSxlQUFlLENBQUMsaUJBQWlCLEVBQUU7b0JBQ3pELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO3dCQUNqQixFQUFFLEVBQUUsQ0FBQzt3QkFDTCxHQUFHLEVBQUUsU0FBUyxDQUFDLEtBQUs7d0JBQ3BCLEtBQUssRUFBRSxTQUFTLENBQUMsSUFBSTtxQkFDdEIsQ0FBQyxDQUFDO29CQUNILENBQUMsRUFBRSxDQUFDO2lCQUNMO2dCQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2FBQ2pCO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7YUFDN0M7UUFDSCxDQUFDLEVBQUMsQ0FBQzs7Y0FDRyxXQUFXLEdBQUc7WUFDbEIsS0FBSyxFQUFFLFFBQVE7WUFDZixLQUFLLEVBQUUsSUFBSTtZQUNYLE1BQU0sRUFBRSxHQUFHO1lBQ1gsV0FBVyxFQUFFLEtBQUs7U0FDbkI7O2NBQ0ssTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7UUFDM0QsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsU0FBUzs7O1FBQUMsR0FBRyxFQUFFO1lBQ3pDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNqQixDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7O0lBS0QsR0FBRztRQUNELElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7Y0FDWCxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU07UUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNwQyxFQUFFLEVBQUUsS0FBSzthQUNWLENBQUMsQ0FBQyxDQUFDO1FBQ0osSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBS0QsTUFBTTtRQUNKLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNqQixJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFOztrQkFDakIsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDakMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTTs7OztZQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUMsQ0FBQztTQUN4RDtJQUNILENBQUM7Ozs7O0lBRUQsVUFBVSxDQUFDLFVBQXNCOztjQUN6QixHQUFHLEdBQUcsRUFBRTs7WUFDVixDQUFDLEdBQUcsQ0FBQztRQUNULEtBQUssTUFBTSxTQUFTLElBQUksVUFBVSxFQUFFO1lBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUM7Z0JBQ1AsRUFBRSxFQUFFLENBQUM7Z0JBQ0wsR0FBRyxFQUFFLFNBQVMsQ0FBQyxHQUFHO2dCQUNsQixLQUFLLEVBQUUsU0FBUyxDQUFDLEtBQUs7YUFDdkIsQ0FBQyxDQUFDO1lBQ0gsQ0FBQyxFQUFFLENBQUM7U0FDTDtRQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7O1lBNU1GLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsZUFBZTtnQkFDekIsNHBEQUF5Qzs7YUFFMUM7Ozs7WUFiUSxlQUFlO1lBSWYscUJBQXFCO1lBR3JCLGNBQWM7WUFWMEMsd0JBQXdCO1lBQUUsUUFBUTs7O2tCQWtCaEcsV0FBVyxTQUFDLE9BQU87aUJBTW5CLFNBQVMsU0FBQyxJQUFJO3FCQUNkLFNBQVMsU0FBQyxTQUFTOzs7O0lBUHBCLGdDQUNxQzs7SUFFckMsb0NBRWtHOztJQUNsRywrQkFBdUM7O0lBQ3ZDLG1DQUErQzs7SUFFL0Msb0NBQTZCOztJQUM3Qiw4Q0FBdUM7Ozs7O0lBS3ZDLHFDQUF1Qjs7SUFFdkIsbUNBQVc7Ozs7O0lBbUJULDJDQUF1Qzs7Ozs7SUFDdkMsb0NBQXNDOzs7OztJQUN0Qyx5Q0FBb0M7Ozs7O0lBQ3BDLHFDQUEwQzs7Ozs7SUFDMUMscUNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIEhvc3RCaW5kaW5nLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFN1YmplY3QsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFZhbGlkYXRvcnMsIEZvcm1CdWlsZGVyLCBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBFZGl0b3JUeXBlcyB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IEVudW1JdGVtIH0gZnJvbSAnLi4vZW50aXR5L2RpbWVuc2lvbmRlZi5lbnRpdHknO1xyXG5pbXBvcnQgeyBXRkRpbWVuc2lvbkRlZlVJU3RhdGUgfSBmcm9tICcuLi9zZXJ2aWNlL3dmLWRpbWVuc2lvbi1kZWYudWlzdGF0ZSc7XHJcbmltcG9ydCB7IEdTUENvbW1vbk1vZGVsLCBHU1BDb21tb25FbGVtZW50LCBHU1BFbGVtZW50T2JqZWN0VHlwZSB9IGZyb20gJ0Bnc3AtYmVmL2dzcC1jbS1tZXRhZGF0YSc7XHJcbmltcG9ydCB7IFNlbGVjdEVsZW1lbnRDb21wb25lbnQgfSBmcm9tICcuLi9yZWZNb2R1bGUvc2VsZWN0LWVsZW1lbnQvc2VsZWN0LWVsZW1lbnQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLWVudW0tZWRpdCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2VudW0tZWRpdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vZW51bS1lZGl0LmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRW51bUVkaXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxyXG4gIGNscyA9ICdmYXJyaXMtbWFpbi1hcmVhIGZsZXgtY29sdW1uJztcclxuXHJcbiAgY29sdW1ucyA9IFtcclxuICAgIHsgZmllbGQ6ICdrZXknLCB3aWR0aDogMTAwLCB0aXRsZTogJ+mUricsIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YLCBvcHRpb25zOiB7fSB9IH0sXHJcbiAgICB7IGZpZWxkOiAndmFsdWUnLCB3aWR0aDogMTAwLCB0aXRsZTogJ+WAvCcsIGVkaXRvcjogeyB0eXBlOiBFZGl0b3JUeXBlcy5URVhUQk9YLCBvcHRpb25zOiB7fSB9IH1dO1xyXG4gIEBWaWV3Q2hpbGQoJ2RnJykgZGc6IERhdGFncmlkQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2J1dHRvbnMnKSBidG5SZWY6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gIGNvbmZpcm0gPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgY2xvc2VNb2RhbEVtaXR0ZXIgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaYvuekuuWAvFxyXG4gICAqL1xyXG4gIGVkaXREYXRhID0gbmV3IEFycmF5KCk7XHJcblxyXG4gIG1heE51bSA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWunumZheWAvFxyXG4gICAqL1xyXG4gIGdldCBlbnVtVmFsdWVzKCk6IEVudW1JdGVtW10ge1xyXG4gICAgY29uc3QgYXJyID0gW107XHJcbiAgICBpZiAodGhpcy5lZGl0RGF0YSAmJiB0aGlzLmVkaXREYXRhLmxlbmd0aCA+PSAwKSB7XHJcbiAgICAgIHRoaXMuZWRpdERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBlbnVtSXRlbSA9IG5ldyBFbnVtSXRlbSgpO1xyXG4gICAgICAgIGVudW1JdGVtLmtleSA9IGl0ZW0ua2V5O1xyXG4gICAgICAgIGVudW1JdGVtLnZhbHVlID0gaXRlbS52YWx1ZTtcclxuICAgICAgICBhcnIucHVzaChlbnVtSXRlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBtZXNzYWdlU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB1aXN0YXRlOiBXRkRpbWVuc2lvbkRlZlVJU3RhdGUsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICApIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliqDovb3mmL7npLrmlbDmja5cclxuICAgKi9cclxuICBsb2FkKGVudW1WYWx1ZXMpIHtcclxuICAgIHRoaXMuZWRpdERhdGEgPSBbLi4udGhpcy5jcmVhdGVEYXRhKGVudW1WYWx1ZXMpXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOehruiupFxyXG4gICAqL1xyXG4gIG9uQ29uZmlybSgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xvc2VDZWxsKCk7XHJcbiAgICBpZiAodGhpcy5jaGVja0JlZm9yZVNhdmUoKSkge1xyXG4gICAgICB0aGlzLmNvbmZpcm0ubmV4dCh0aGlzLmVudW1WYWx1ZXMpO1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxFbWl0dGVyLm5leHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPlua2iFxyXG4gICAqL1xyXG4gIGNhbmNlbCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbEVtaXR0ZXIubmV4dCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5L+d5a2Y5YmN5qOA5p+lXHJcbiAgICovXHJcbiAgY2hlY2tCZWZvcmVTYXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgLy8g4pGgIOepuu+8jOWImemAmui/h++8m1xyXG4gICAgaWYgKCEodGhpcy5lbnVtVmFsdWVzKSB8fCB0aGlzLmVudW1WYWx1ZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2Uud2FybmluZygn6K+35re75Yqg5p6a5Li+5YC844CCJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIOKRoSDpnZ7nqbrvvIzliJnmoKHpqozmr4/kuKrnmoTplK7lgLzmmK/lkKbkuLrnqbrvvJtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmVudW1WYWx1ZXMpIHtcclxuICAgICAgaWYgKCFpdGVtLmtleSB8fCAhaXRlbS52YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2Uud2FybmluZygn5p6a5Li+55qEW+mUrl1b5YC8XeWdh+S4jeWFgeiuuOS4uuepuuOAgicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g4pGiIOWkmuS6juS4gOS4qu+8jOe0ouW8leS4jeWFgeiuuOmHjeWkje+8m1xyXG4gICAgaWYgKHRoaXMuZW51bVZhbHVlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnVtVmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY29kZTEgPSB0aGlzLmVudW1WYWx1ZXNbaV0udmFsdWU7XHJcbiAgICAgICAgY29uc3QgbmFtZTEgPSB0aGlzLmVudW1WYWx1ZXNbaV0ua2V5O1xyXG4gICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IHRoaXMuZW51bVZhbHVlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgY29uc3QgY29kZTIgPSB0aGlzLmVudW1WYWx1ZXNbal0udmFsdWU7XHJcbiAgICAgICAgICBjb25zdCBuYW1lMiA9IHRoaXMuZW51bVZhbHVlc1tqXS5rZXk7XHJcblxyXG4gICAgICAgICAgaWYgKGNvZGUxID09PSBjb2RlMikge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZXJ2aWNlLndhcm5pbmcoYOaemuS4vueahFvnvJblj7dd5LiN5YWB6K646YeN5aSN77yM6YeN5aSN57yW5Y+35Li6WyR7Y29kZTF9XeOAgmApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobmFtZTEgPT09IG5hbWUyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2Uud2FybmluZyhg5p6a5Li+55qEW+WQjeensF3kuI3lhYHorrjph43lpI3vvIzph43lpI3lkI3np7DkuLpbJHtuYW1lMX1d44CCYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y+W5raI57yW6L6RXHJcbiAgICovXHJcbiAgY2xvc2VDZWxsKCkge1xyXG4gICAgdGhpcy5kZy5lbmRDZWxsRWRpdCgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDlvJXlhaVcclxuICAgKi9cclxuICBpbXBvcnQoKSB7XHJcbiAgICBpZiAoIXRoaXMudWlzdGF0ZS5iZU1ldGFEYXRhKSB7XHJcbiAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuZXJyb3IoJ+acquiOt+WPluWIsEJF5YWD5pWw5o2u77yM6K+36IGU57O7566h55CG5ZGY5p+l55yL5Y6f5Zug77yBJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG1vZGVsOiBHU1BDb21tb25Nb2RlbCA9IHRoaXMudWlzdGF0ZS5iZU1ldGFEYXRhLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoU2VsZWN0RWxlbWVudENvbXBvbmVudCk7XHJcbiAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgY29tcFJlZi5pbnN0YW5jZS5zZWxlY3RFbGVJbmZvLmJlID0gbW9kZWw7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLnNlbGVjdEVsZUluZm8uc2luZ2xlRWxlbWVudCA9IHRydWU7XHJcbiAgICBjb21wUmVmLmluc3RhbmNlLnNlbGVjdEVsZUluZm8uYXNzb1JlZkVsZW1lbnQgPSBmYWxzZTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY29uZmlybS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudCA9IGRhdGEuc2VsZWN0ZWRCZUZpZWxkc1swXSBhcyBHU1BDb21tb25FbGVtZW50O1xyXG4gICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50Lk9iamVjdFR5cGUgPT09IEdTUEVsZW1lbnRPYmplY3RUeXBlLkVudW0pIHtcclxuICAgICAgICB0aGlzLmVkaXREYXRhID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbGV0IGsgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgZW51bVZhbHVlIG9mIHNlbGVjdGVkRWxlbWVudC5Db250YWluRW51bVZhbHVlcykge1xyXG4gICAgICAgICAgdGhpcy5lZGl0RGF0YS5wdXNoKHtcclxuICAgICAgICAgICAgaWQ6IGssXHJcbiAgICAgICAgICAgIGtleTogZW51bVZhbHVlLlZhbHVlLFxyXG4gICAgICAgICAgICB2YWx1ZTogZW51bVZhbHVlLk5hbWUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGsrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhOdW0gPSBrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2UuaW5mbygn6YCJ5Lit5a2X5q615bm26Z2e5p6a5Li+5a2X5q6177yM6K+35LqG6Kej77yBJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHRpdGxlOiAn5p6a5Li+5a2X5q616YCJ5oupJyxcclxuICAgICAgd2lkdGg6IDEwMDAsXHJcbiAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgICBzaG93QnV0dG9uczogZmFsc2VcclxuICAgIH07XHJcbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuY2xvc2VNb2RhbC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5paw5aKeXHJcbiAgICovXHJcbiAgYWRkKCkge1xyXG4gICAgdGhpcy5jbG9zZUNlbGwoKTtcclxuICAgIGNvbnN0IG5ld0lkID0gdGhpcy5tYXhOdW07XHJcbiAgICB0aGlzLmVkaXREYXRhID0gdGhpcy5lZGl0RGF0YS5jb25jYXQoW3tcclxuICAgICAgaWQ6IG5ld0lkXHJcbiAgICB9XSk7XHJcbiAgICB0aGlzLm1heE51bSsrO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yig6ZmkXHJcbiAgICovXHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5jbG9zZUNlbGwoKTtcclxuICAgIGlmICh0aGlzLmRnLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5kZy5zZWxlY3RlZFJvdy5pZDtcclxuICAgICAgdGhpcy5kZy5zZWxlY3RQcmV2Um93KCk7XHJcbiAgICAgIHRoaXMuZWRpdERhdGEgPSB0aGlzLmVkaXREYXRhLmZpbHRlcihuID0+IG4uaWQgIT09IGlkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZURhdGEoZW51bVZhbHVlczogRW51bUl0ZW1bXSkge1xyXG4gICAgY29uc3QgYXJyID0gW107XHJcbiAgICBsZXQgayA9IDA7XHJcbiAgICBmb3IgKGNvbnN0IGVudW1WYWx1ZSBvZiBlbnVtVmFsdWVzKSB7XHJcbiAgICAgIGFyci5wdXNoKHtcclxuICAgICAgICBpZDogayxcclxuICAgICAgICBrZXk6IGVudW1WYWx1ZS5rZXksXHJcbiAgICAgICAgdmFsdWU6IGVudW1WYWx1ZS52YWx1ZSxcclxuICAgICAgfSk7XHJcbiAgICAgIGsrKztcclxuICAgIH1cclxuICAgIHRoaXMubWF4TnVtID0gaztcclxuICAgIHJldHVybiBhcnI7XHJcbiAgfVxyXG59XHJcbiJdfQ==