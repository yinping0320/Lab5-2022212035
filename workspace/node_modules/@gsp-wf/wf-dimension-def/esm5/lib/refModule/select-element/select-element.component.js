/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter } from '@angular/core';
var SelectElementComponent = /** @class */ (function () {
    function SelectElementComponent() {
        /**
         * 关闭窗口事件
         */
        this.closeModal = new EventEmitter();
        /**
         * 确认选择字段
         */
        this.confirm = new EventEmitter();
        this.progressData = {
            activeIndex: 0,
            stepMessages: [
                {
                    id: 'selectobject',
                    title: '选择节点',
                    icon: ''
                },
                {
                    id: 'selectelement',
                    title: '选择字段',
                    icon: ''
                }
            ]
        };
        this.changeObj = true;
        /**
         * 字段选择信息
         */
        this.selectEleInfo = {
            be: null,
            // be实体
            selectedObj: null,
            // be节点
            BeFields: [],
            // Be字段列表
            selectedBeFields: [],
            // Be字段ID列表
            singleElement: false,
            // 是否单选
            assoRefElement: false // 是否包含关联带出字段
        };
        this.result = {
            be: null,
            // be实体
            selectedObj: null,
            // be节点
            selectedBeFields: [],
        };
    }
    /**
     * @return {?}
     */
    SelectElementComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * 页面状态变化时触发事件 {state:'', fromPageId:'', toPageId:''}
     * 其中state分别对应0：Finish:1：Cancel:2：Prev:3：Next:4：StepChange
     * @param value
     */
    /**
     * 页面状态变化时触发事件 {state:'', fromPageId:'', toPageId:''}
     * 其中state分别对应0：Finish:1：Cancel:2：Prev:3：Next:4：StepChange
     * @param {?} value
     * @return {?}
     */
    SelectElementComponent.prototype.stateChange = /**
     * 页面状态变化时触发事件 {state:'', fromPageId:'', toPageId:''}
     * 其中state分别对应0：Finish:1：Cancel:2：Prev:3：Next:4：StepChange
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        switch (value.state) {
            case 0:
                // 返回选择结果
                this.result.be = this.selectEleInfo.be;
                this.result.selectedObj = this.selectEleInfo.selectedObj;
                this.result.selectedBeFields = this.selectEleInfo.BeFields.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    /** @type {?} */
                    var ele = (/** @type {?} */ (item));
                    // 此处使用==判断值相等，若为===，则无法找到id相同的字段
                    // tslint:disable-next-line:triple-equals
                    return _this.selectEleInfo.selectedBeFields.findIndex((/**
                     * @param {?} fieldId
                     * @return {?}
                     */
                    function (fieldId) { return fieldId == ele.ID; })) >= 0;
                }));
                this.confirm.next(this.result);
                this.close();
                break;
            case 1:
                this.close();
                break;
            case 3:
                this.changeObj = !this.changeObj;
                break;
        }
    };
    /**
     * 关闭弹窗
     */
    /**
     * 关闭弹窗
     * @return {?}
     */
    SelectElementComponent.prototype.close = /**
     * 关闭弹窗
     * @return {?}
     */
    function () {
        this.closeModal.next();
    };
    SelectElementComponent.decorators = [
        { type: Component, args: [{
                    selector: 'select-element',
                    template: "<farris-wizard style=\"display:flex;flex:1\" [progressData]=\"progressData\" [stepClickable]=\"false\" [fill]=\"true\" [stepDirection]=\"'vertical'\" [stepPosition]=\"'PageLeft'\" (stateChange)=\"stateChange($event)\">\r\n    <wizard-page [pageId]=\"progressData.stepMessages[0].id\">\r\n        <select-object [data]=\"selectEleInfo\"></select-object>\r\n    </wizard-page>\r\n    <wizard-page [pageId]=\"progressData.stepMessages[1].id\">\r\n        <select-obj-element [data]=\"selectEleInfo\" [changeObj]=\"changeObj\"></select-obj-element>\r\n    </wizard-page>\r\n</farris-wizard>",
                    styles: [":host{display:flex;position:absolute;top:0;bottom:0;left:0;right:0}"]
                }] }
    ];
    /** @nocollapse */
    SelectElementComponent.ctorParameters = function () { return []; };
    return SelectElementComponent;
}());
export { SelectElementComponent };
if (false) {
    /**
     * 关闭窗口事件
     * @type {?}
     */
    SelectElementComponent.prototype.closeModal;
    /**
     * 确认选择字段
     * @type {?}
     */
    SelectElementComponent.prototype.confirm;
    /** @type {?} */
    SelectElementComponent.prototype.progressData;
    /** @type {?} */
    SelectElementComponent.prototype.changeObj;
    /**
     * 字段选择信息
     * @type {?}
     */
    SelectElementComponent.prototype.selectEleInfo;
    /** @type {?} */
    SelectElementComponent.prototype.result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LWVsZW1lbnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1kaW1lbnNpb24tZGVmLyIsInNvdXJjZXMiOlsibGliL3JlZk1vZHVsZS9zZWxlY3QtZWxlbWVudC9zZWxlY3QtZWxlbWVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR2hFO0lBbURFOzs7O1FBMUNBLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOzs7O1FBSXJDLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRWxDLGlCQUFZLEdBQUc7WUFDYixXQUFXLEVBQUUsQ0FBQztZQUNkLFlBQVksRUFBRTtnQkFDWjtvQkFDRSxFQUFFLEVBQUUsY0FBYztvQkFDbEIsS0FBSyxFQUFFLE1BQU07b0JBQ2IsSUFBSSxFQUFFLEVBQUU7aUJBQ1Q7Z0JBQ0Q7b0JBQ0UsRUFBRSxFQUFFLGVBQWU7b0JBQ25CLEtBQUssRUFBRSxNQUFNO29CQUNiLElBQUksRUFBRSxFQUFFO2lCQUNUO2FBQ0Y7U0FDRixDQUFDO1FBRUYsY0FBUyxHQUFHLElBQUksQ0FBQzs7OztRQUtqQixrQkFBYSxHQUFHO1lBQ2QsRUFBRSxFQUFFLElBQUk7O1lBQ1IsV0FBVyxFQUFFLElBQUk7O1lBQ2pCLFFBQVEsRUFBRSxFQUFFOztZQUNaLGdCQUFnQixFQUFFLEVBQUU7O1lBQ3BCLGFBQWEsRUFBRSxLQUFLOztZQUNwQixjQUFjLEVBQUUsS0FBSyxDQUFFLGFBQWE7U0FDckMsQ0FBQztRQUVGLFdBQU0sR0FBRztZQUNQLEVBQUUsRUFBRSxJQUFJOztZQUNSLFdBQVcsRUFBRSxJQUFJOztZQUNqQixnQkFBZ0IsRUFBRSxFQUFFO1NBQ3JCLENBQUE7SUFFZSxDQUFDOzs7O0lBRWpCLHlDQUFROzs7SUFBUjtJQUNBLENBQUM7SUFFRDs7OztPQUlHOzs7Ozs7O0lBQ0gsNENBQVc7Ozs7OztJQUFYLFVBQVksS0FBSztRQUFqQixpQkFzQkM7UUFyQkMsUUFBUSxLQUFLLENBQUMsS0FBSyxFQUFFO1lBQ25CLEtBQUssQ0FBQztnQkFDSixTQUFTO2dCQUNULElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDO2dCQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztnQkFDekQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxNQUFNOzs7O2dCQUFDLFVBQUMsSUFBSTs7d0JBQy9ELEdBQUcsR0FBRyxtQkFBQSxJQUFJLEVBQW9CO29CQUNwQyxpQ0FBaUM7b0JBQ2pDLHlDQUF5QztvQkFDekMsT0FBTyxLQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFNBQVM7Ozs7b0JBQUMsVUFBQSxPQUFPLElBQUksT0FBQSxPQUFPLElBQUksR0FBRyxDQUFDLEVBQUUsRUFBakIsQ0FBaUIsRUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUYsQ0FBQyxFQUFDLENBQUM7Z0JBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUMvQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2IsTUFBTTtZQUNSLEtBQUssQ0FBQztnQkFDSixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2IsTUFBTTtZQUNSLEtBQUssQ0FBQztnQkFDSixJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDakMsTUFBTTtTQUNUO0lBQ0gsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNILHNDQUFLOzs7O0lBQUw7UUFDRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLENBQUM7O2dCQTFGRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGdCQUFnQjtvQkFDMUIsc2xCQUE4Qzs7aUJBRS9DOzs7O0lBdUZELDZCQUFDO0NBQUEsQUEzRkQsSUEyRkM7U0F0Rlksc0JBQXNCOzs7Ozs7SUFJakMsNENBQXFDOzs7OztJQUlyQyx5Q0FBa0M7O0lBRWxDLDhDQWNFOztJQUVGLDJDQUFpQjs7Ozs7SUFLakIsK0NBT0U7O0lBRUYsd0NBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEdTUENvbW1vbkVsZW1lbnQgfSBmcm9tICdAZ3NwLWJlZi9nc3AtY20tbWV0YWRhdGEnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzZWxlY3QtZWxlbWVudCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3NlbGVjdC1lbGVtZW50LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9zZWxlY3QtZWxlbWVudC5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFNlbGVjdEVsZW1lbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIC8qKlxyXG4gICAqIOWFs+mXreeql+WPo+S6i+S7tlxyXG4gICAqL1xyXG4gIGNsb3NlTW9kYWwgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAvKipcclxuICAgKiDnoa7orqTpgInmi6nlrZfmrrVcclxuICAgKi9cclxuICBjb25maXJtID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIHByb2dyZXNzRGF0YSA9IHtcclxuICAgIGFjdGl2ZUluZGV4OiAwLFxyXG4gICAgc3RlcE1lc3NhZ2VzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJ3NlbGVjdG9iamVjdCcsXHJcbiAgICAgICAgdGl0bGU6ICfpgInmi6noioLngrknLFxyXG4gICAgICAgIGljb246ICcnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJ3NlbGVjdGVsZW1lbnQnLFxyXG4gICAgICAgIHRpdGxlOiAn6YCJ5oup5a2X5q61JyxcclxuICAgICAgICBpY29uOiAnJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfTtcclxuXHJcbiAgY2hhbmdlT2JqID0gdHJ1ZTtcclxuXHJcbiAgLyoqXHJcbiAgICog5a2X5q616YCJ5oup5L+h5oGvXHJcbiAgICovXHJcbiAgc2VsZWN0RWxlSW5mbyA9IHtcclxuICAgIGJlOiBudWxsLCAgICAgICAgICAgICAgLy8gYmXlrp7kvZNcclxuICAgIHNlbGVjdGVkT2JqOiBudWxsLCAgICAgLy8gYmXoioLngrlcclxuICAgIEJlRmllbGRzOiBbXSwgICAgICAgICAgLy8gQmXlrZfmrrXliJfooahcclxuICAgIHNlbGVjdGVkQmVGaWVsZHM6IFtdLCAgLy8gQmXlrZfmrrVJROWIl+ihqFxyXG4gICAgc2luZ2xlRWxlbWVudDogZmFsc2UsICAvLyDmmK/lkKbljZXpgIlcclxuICAgIGFzc29SZWZFbGVtZW50OiBmYWxzZSAgLy8g5piv5ZCm5YyF5ZCr5YWz6IGU5bim5Ye65a2X5q61XHJcbiAgfTtcclxuXHJcbiAgcmVzdWx0ID0ge1xyXG4gICAgYmU6IG51bGwsICAgICAgICAgICAgICAvLyBiZeWunuS9k1xyXG4gICAgc2VsZWN0ZWRPYmo6IG51bGwsICAgICAvLyBiZeiKgueCuVxyXG4gICAgc2VsZWN0ZWRCZUZpZWxkczogW10sICAvLyBCZeWtl+auteWIl+ihqFxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpobXpnaLnirbmgIHlj5jljJbml7bop6blj5Hkuovku7Yge3N0YXRlOicnLCBmcm9tUGFnZUlkOicnLCB0b1BhZ2VJZDonJ31cclxuICAgKiDlhbbkuK1zdGF0ZeWIhuWIq+WvueW6lDDvvJpGaW5pc2g6Me+8mkNhbmNlbDoy77yaUHJldjoz77yaTmV4dDo077yaU3RlcENoYW5nZVxyXG4gICAqIEBwYXJhbSB2YWx1ZSBcclxuICAgKi9cclxuICBzdGF0ZUNoYW5nZSh2YWx1ZSkge1xyXG4gICAgc3dpdGNoICh2YWx1ZS5zdGF0ZSkge1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgLy8g6L+U5Zue6YCJ5oup57uT5p6cXHJcbiAgICAgICAgdGhpcy5yZXN1bHQuYmUgPSB0aGlzLnNlbGVjdEVsZUluZm8uYmU7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQuc2VsZWN0ZWRPYmogPSB0aGlzLnNlbGVjdEVsZUluZm8uc2VsZWN0ZWRPYmo7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQuc2VsZWN0ZWRCZUZpZWxkcyA9IHRoaXMuc2VsZWN0RWxlSW5mby5CZUZpZWxkcy5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGVsZSA9IGl0ZW0gYXMgR1NQQ29tbW9uRWxlbWVudDtcclxuICAgICAgICAgIC8vIOatpOWkhOS9v+eUqD095Yik5pat5YC855u4562J77yM6Iul5Li6PT0977yM5YiZ5peg5rOV5om+5YiwaWTnm7jlkIznmoTlrZfmrrVcclxuICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RFbGVJbmZvLnNlbGVjdGVkQmVGaWVsZHMuZmluZEluZGV4KGZpZWxkSWQgPT4gZmllbGRJZCA9PSBlbGUuSUQpID49IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb25maXJtLm5leHQodGhpcy5yZXN1bHQpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAzOlxyXG4gICAgICAgIHRoaXMuY2hhbmdlT2JqID0gIXRoaXMuY2hhbmdlT2JqO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YWz6Zet5by556qXXHJcbiAgICovXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwubmV4dCgpO1xyXG4gIH1cclxufVxyXG4iXX0=