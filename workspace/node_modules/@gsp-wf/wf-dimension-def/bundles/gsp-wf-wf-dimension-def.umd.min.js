!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/observable/forkJoin"),require("rxjs/operators"),require("@farris/ui-button"),require("@farris/ui-datagrid"),require("@farris/ui-input-group"),require("@farris/ui-notify"),require("@farris/ui-dialog"),require("@farris/ui-combo-list"),require("@gsp-lcm/metadatart-selector"),require("rxjs"),require("@farris/ui-messager"),require("@farris/ui-datagrid-editors"),require("@gsp-bef/gsp-cm-metadata"),require("@farris/ui-modal"),require("@ecp-caf/caf-common"),require("@gsp-svc/expression"),require("@angular/animations"),require("@angular/common"),require("@farris/ui-treetable"),require("@angular/core"),require("@farris/ui-wizard"),require("@angular/forms"),require("@farris/lookup-config")):"function"==typeof define&&define.amd?define("@gsp-wf/wf-dimension-def",["exports","rxjs/observable/forkJoin","rxjs/operators","@farris/ui-button","@farris/ui-datagrid","@farris/ui-input-group","@farris/ui-notify","@farris/ui-dialog","@farris/ui-combo-list","@gsp-lcm/metadatart-selector","rxjs","@farris/ui-messager","@farris/ui-datagrid-editors","@gsp-bef/gsp-cm-metadata","@farris/ui-modal","@ecp-caf/caf-common","@gsp-svc/expression","@angular/animations","@angular/common","@farris/ui-treetable","@angular/core","@farris/ui-wizard","@angular/forms","@farris/lookup-config"],t):t((e["gsp-wf"]=e["gsp-wf"]||{},e["gsp-wf"]["wf-dimension-def"]={}),e.rxjs["observable/forkJoin"],e.rxjs.operators,e.uiButton,e.uiDatagrid,e.uiInputGroup,e.uiNotify,e.uiDialog,e.uiComboList,e.metadatartSelector,e.rxjs,e.uiMessager,e.uiDatagridEditors,e.gspCmMetadata,e.uiModal,e.cafCommon,e.expression,e.ng.animations,e.ng.common,e.uiTreetable,e.ng.core,e.uiWizard,e.ng.forms,e.lookupConfig)}(this,function(e,r,a,t,n,i,s,o,l,d,c,p,u,f,h,m,g,y,b,v,x,D,w,I){"use strict";var C=(E.decorators=[{type:x.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[]},E.ngInjectableDef=x.defineInjectable({factory:function(){return new E},token:E,providedIn:"root"}),E);function E(){}function T(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function S(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=a.next()).done;)s.push(i.value)}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}return s}function O(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e}var j={Help:0,Enum:1};j[j.Help]="Help",j[j.Enum]="Enum";var M={BusinessField:0,EnvironmentalVariable:1};M[M.BusinessField]="BusinessField",M[M.EnvironmentalVariable]="EnvironmentalVariable";var F=[{index:0,text:"模型字段",value:M.BusinessField}],P=[{index:0,text:"帮助",value:j.Help},{index:1,text:"枚举",value:j.Enum}],N=function fe(){this.canEdit=!1},B=function he(){},V=(R.newGuid=function(){var t=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return t.convert(e)})},R.convert=function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)},R);function R(){}var _=(z.newDimendefEntity=function(e){var t={id:"",code:"",entryFormID:"",dimensionType:M.BusinessField,dimensionCode:"",dimensionName:"",inputType:j.Help,enumList:null,smartHelp:"",multiSelect:!0,helpFilter:"",isUse:!0,devLayer:"",contentInfo:null,sortOrder:0,sysInit:0,remarks:""};return t.id=V.newGuid(),t.entryFormID=e,t},z);function z(){}var H=(K.prototype.loadDimensionDefs=function(e){if(e){var t=this.url+"?entryFormID="+e;return this.http.get(t)}},K.prototype.removeDimensionDef=function(e){if(e){var t=this.url+"/"+e;return this.http["delete"](t,{})}},K.prototype.addDimensionDef=function(e){return this.http.post(this.url,e)},K.prototype.updateDimensionDef=function(e){return this.http.patch(this.url,e)},K.prototype.getDimensionDefSet=function(e){var t="/api/runtime/wf/v1.0/dimensionDef/customSetting?entryFormId="+e;return this.http.get(t)},K.decorators=[{type:x.Injectable}],K.ctorParameters=function(){return[{type:m.HttpService}]},K);function K(e){this.http=e,this.url="/api/runtime/wf/v1.0/dimensionDef"}var q=(A.decorators=[{type:x.Injectable}],A);function A(){}var L=(Object.defineProperty(W.prototype,"flowFormId",{get:function(){return this._flowFormId},set:function(e){this._flowFormId=e,this.load(),this.getDimensionDefSet(this._flowFormId)},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"schema",{get:function(){return this.uistate.schema},set:function(e){this.uistate.schema=e},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"beMetaData",{get:function(){return this.uistate.beMetaData},set:function(e){this.uistate.beMetaData=e},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"editable",{get:function(){return this._editable},set:function(e){var t,n;this._editable=e;try{for(var i=S(this.editData),r=i.next();!r.done;r=i.next())r.value.canEdit=this._editable}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}},enumerable:!0,configurable:!0}),W.prototype.ngOnInit=function(){},W.prototype.ngOnChanges=function(e){},W.prototype.load=function(){var t=this;this.flowFormId&&this.viewmodel.loadDimensionDefs(this.flowFormId).subscribe(function(e){t.data=e,t.editData=[],t.data&&0<t.data.length&&t.data.forEach(function(e){t.addItem(e,t.editable)})})},W.prototype.getDimensionDefSet=function(e){var t=this;e&&this.viewmodel.getDimensionDefSet(e).subscribe(function(e){t.dimensionDefSet=e})},W.prototype.hasItem=function(t){return this.editData.find(function(e){return e.index===t})},W.prototype.getItem=function(t){return this.hasItem(t)?this.editData.find(function(e){return e.index===t}).itemData:null},W.prototype.setItem=function(t,e){this.editData.find(function(e){return e.index===t}).itemData=e},W.prototype.addItem=function(e,t){var n=new N;n.canEdit=t,n.index=this.editData.length,n.itemData=Object.assign({},e),n.id=e.id,this.editData.push(n)},W.prototype.getTitle=function(e){var t="";switch(e){case 0:t="一";break;case 1:t="二"}return"维度"+t},W.prototype.getState=function(t){return!!this.hasItem(t)&&1===this.editData.find(function(e){return e.index===t}).itemData.sysInit},W.prototype.isEditState=function(t){return!!this.hasItem(t)&&this.editData.find(function(e){return e.index===t}).canEdit},W.prototype.edit=function(t){this.editData.find(function(e){return e.id===t.id}).canEdit=!0},W.prototype.remove=function(n){var i=this;!this.dimensionDefSet||n.id!==this.dimensionDefSet.dimension1&&n.id!==this.dimensionDefSet.dimension2?"flowForm"===this.entry?this.removeDimensionDef(n):this.messageService.question("确认删除'"+this.getTitle(n.index)+"'吗？",function(){if(-1===i.data.findIndex(function(e){return e.id===n.id}))return i.removeDimensionDef(n),void i.notifyService.success("删除成功");i.viewmodel.removeDimensionDef(n.id).subscribe(function(e){i.removeDimensionDef(n);var t=i.data.findIndex(function(e){return e.id===n.id});-1<t&&i.data.splice(t,1),i.notifyService.success("删除成功")},function(e){i.notifyService.error("删除失败，请联系管理员查看原因！")})}):this.messageService.info("当前维度定义已在流程分配维度配置中启用")},W.prototype.getDimensionDefs=function(){return this.editData.map(function(e){return e.itemData})},W.prototype.removeDimensionDef=function(t){var e=this.editData.findIndex(function(e){return e.id===t.id});if(-1<e&&this.editData.splice(e,1),e<this.editData.length)for(var n=0;n<this.editData.length;n++)this.editData[n].index=n},W.prototype.save=function(n){var i=this,e=this.validate(n.itemData);e.result?-1===this.data.findIndex(function(e){return e.id===n.id})?this.viewmodel.addDimensionDef(n.itemData).subscribe(function(e){i.endEdit(n),i.data.push(Object.assign({},n.itemData)),i.notifyService.success("保存成功")},function(e){i.notifyService.error("保存失败，请联系管理员查看原因！")}):this.viewmodel.updateDimensionDef(n.itemData).subscribe(function(e){i.endEdit(n);var t=i.data.find(function(e){return e.id===n.id});Object.assign(t,n.itemData),i.notifyService.success("保存成功")},function(e){i.notifyService.error("保存失败，请联系管理员查看原因！")}):this.messageService.info(e.message)},W.prototype.saveAll=function(){var n=this,e=this.data.filter(function(t){return-1===n.editData.findIndex(function(e){return e.id===t.id})}),t=this.editData.filter(function(t){return-1===n.data.findIndex(function(e){return e.id===t.id})}).map(function(e){return e.itemData}),i=this.editData.filter(function(t){return-1<n.data.findIndex(function(e){return e.id===t.id})}).map(function(e){return e.itemData}).filter(function(e){return 0===e.sysInit});return r.forkJoin(e.map(function(e){return n.viewmodel.removeDimensionDef(e.id)}).concat(i.map(function(e){return n.viewmodel.updateDimensionDef(e)}).concat(t.map(function(e){return n.viewmodel.addDimensionDef(e)})))).pipe(a.switchMap(function(e){return n.data=n.editData.map(function(e){return e.itemData}),c.of(!0)}),a.catchError(function(e){return console.error(e),c.of(!1)}))},W.prototype.cancel=function(t){this.endEdit(t),-1!==this.data.findIndex(function(e){return e.id===t.id})?Object.assign(this.editData.find(function(e){return e.id===t.id}).itemData,this.data.find(function(e){return e.id===t.id})):this.removeDimensionDef(t)},W.prototype.addHandler=function(){if("flowForm"!==this.entry||this.editable){var e=_.newDimendefEntity(this.flowFormId);this.addItem(e,!0)}},W.prototype.isOtherItemEditting=function(t){var n=this,i=!1;return this.editData.forEach(function(e){!0===e.canEdit&&e.index!==t&&(i=!0,n.messageService.info("请先保存对于'"+n.getTitle(e.index)+"'的修改。"))}),i},W.prototype.endEdit=function(e){var t,n;try{for(var i=S(this.editData),r=i.next();!r.done;r=i.next()){var a=r.value;a.id===e.id&&(a.canEdit=!1)}}catch(s){t={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}},W.prototype.validate=function(e){return e.code?e.dimensionName?e.dimensionCode?e.inputType!==j.Help||e.smartHelp?e.inputType!==j.Enum||e.enumList?{result:!0,message:""}:{result:!1,message:"维度定义数据类型为枚举，但枚举值为空，请修改！"}:{result:!1,message:"维度定义数据类型为帮助，但帮助值为空，请修改！"}:{result:!1,message:"维度定义不允许分配维度为空，请修改！"}:{result:!1,message:"维度定义不允许维度名称为空，请修改！"}:{result:!1,message:"维度定义不允许编号为空，请修改！"}},W.decorators=[{type:x.Component,args:[{selector:"wf-dimension-def",template:'<wf-dimension-panel [model]="[\'b\']" [width]="\'700px\'" [defaultExpand]="true">\r\n    <div *ngFor="let item of editData; index as index;"\r\n        style="width: 100%;border: 1px solid rgba(0, 0, 0, .125);margin-bottom: 25px;">\r\n        <wf-dimension-panel-item [title]="getTitle(index)" [sysInit]="getState(index)" [value]="index" [editState]="entry===\'billCategory\'?isEditState(index):false">\r\n            <ng-template #contentTempl>\r\n                <wf-dimension-item-card [data]="getItem(index)" [canCardEdit]="isEditState(index)" [sysInit]="getState(index)">\r\n                </wf-dimension-item-card>\r\n            </ng-template>\r\n            <ng-template #toolTempl>\r\n                <farris-button *ngIf="entry===\'billCategory\'" [type]="\'link\'" (click)="edit(item)"><span class="f-icon text-info k-i-edit"></span>修改\r\n                </farris-button>\r\n                <farris-button *ngIf="editable && !getState(index)" [type]="\'link\'" (click)="remove(item)"><span\r\n                        class="f-icon text-info k-i-delete"></span> 删除\r\n                </farris-button>\r\n            </ng-template>\r\n            <ng-template #bottomRef>\r\n                <farris-button (click)="save(item)">保存</farris-button>\r\n                <farris-button style="margin-left:10px" [type]="\'secondary\'" (click)="cancel(item)">取消</farris-button>\r\n            </ng-template>\r\n        </wf-dimension-panel-item>\r\n    </div>\r\n</wf-dimension-panel>\r\n<div *ngIf="hasItem(1)" class="panel-ony-two">\r\n    <div style="width: 250px;margin:0 auto">\r\n        <p style="color:rgba(217,217,217)">Tips:目前仅支持添加两个维度</p>\r\n    </div>\r\n</div>\r\n<div *ngIf="!hasItem(1)" class="panel-add">\r\n    <div style="width: 100px;margin:0 auto">\r\n        <farris-button style="margin:25px" [type]="\'link\'" [disabled]="entry===\'flowForm\'&&!editable" (click)="addHandler()">\r\n            <span *ngIf="!(entry===\'flowForm\'&&!editable)" class="f-icon text-info k-i-plus"></span>添加维度</farris-button>\r\n    </div>\r\n</div>',styles:[".panel-add{margin:25px;padding:10px;border:1px dashed rgba(0,0,0,.125)}.panel-ony-two{margin:20px}"]}]}],W.ctorParameters=function(){return[{type:p.MessagerService},{type:H},{type:s.NotifyService},{type:q}]},W.propDecorators={flowFormId:[{type:x.Input}],schema:[{type:x.Input}],beMetaData:[{type:x.Input}],entry:[{type:x.Input}],editable:[{type:x.Input}]},W);function W(e,t,n,i){this.messageService=e,this.viewmodel=t,this.notifyService=n,this.uistate=i,this.entry="flowForm",this._editable=!1,this.data=new Array,this.editData=new Array}var G=(J.prototype.ngOnInit=function(){},J.prototype.stateChange=function(e){var n=this;switch(e.state){case 0:this.result.be=this.selectEleInfo.be,this.result.selectedObj=this.selectEleInfo.selectedObj,this.result.selectedBeFields=this.selectEleInfo.BeFields.filter(function(e){var t=e;return 0<=n.selectEleInfo.selectedBeFields.findIndex(function(e){return e==t.ID})}),this.confirm.next(this.result),this.close();break;case 1:this.close();break;case 3:this.changeObj=!this.changeObj}},J.prototype.close=function(){this.closeModal.next()},J.decorators=[{type:x.Component,args:[{selector:"select-element",template:'<farris-wizard style="display:flex;flex:1" [progressData]="progressData" [stepClickable]="false" [fill]="true" [stepDirection]="\'vertical\'" [stepPosition]="\'PageLeft\'" (stateChange)="stateChange($event)">\r\n    <wizard-page [pageId]="progressData.stepMessages[0].id">\r\n        <select-object [data]="selectEleInfo"></select-object>\r\n    </wizard-page>\r\n    <wizard-page [pageId]="progressData.stepMessages[1].id">\r\n        <select-obj-element [data]="selectEleInfo" [changeObj]="changeObj"></select-obj-element>\r\n    </wizard-page>\r\n</farris-wizard>',styles:[":host{display:flex;position:absolute;top:0;bottom:0;left:0;right:0}"]}]}],J.ctorParameters=function(){return[]},J);function J(){this.closeModal=new x.EventEmitter,this.confirm=new x.EventEmitter,this.progressData={activeIndex:0,stepMessages:[{id:"selectobject",title:"选择节点",icon:""},{id:"selectelement",title:"选择字段",icon:""}]},this.changeObj=!0,this.selectEleInfo={be:null,selectedObj:null,BeFields:[],selectedBeFields:[],singleElement:!1,assoRefElement:!1},this.result={be:null,selectedObj:null,selectedBeFields:[]}}var $=(Object.defineProperty(U.prototype,"enumValues",{get:function(){var n=[];return this.editData&&0<=this.editData.length&&this.editData.forEach(function(e){var t=new B;t.key=e.key,t.value=e.value,n.push(t)}),n},enumerable:!0,configurable:!0}),U.prototype.ngOnInit=function(){},U.prototype.load=function(e){this.editData=O(this.createData(e))},U.prototype.onConfirm=function(){this.closeCell(),this.checkBeforeSave()&&(this.confirm.next(this.enumValues),this.closeModalEmitter.next())},U.prototype.cancel=function(){this.closeModalEmitter.next()},U.prototype.checkBeforeSave=function(){var e,t;if(!this.enumValues||0===this.enumValues.length)return this.messageService.warning("请添加枚举值。"),!1;try{for(var n=S(this.enumValues),i=n.next();!i.done;i=n.next()){var r=i.value;if(!r.key||!r.value)return this.messageService.warning("枚举的[键][值]均不允许为空。"),!1}}catch(p){e={error:p}}finally{try{i&&!i.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}if(1<this.enumValues.length)for(var a=0;a<this.enumValues.length;a++)for(var s=this.enumValues[a].value,o=this.enumValues[a].key,l=a+1;l<this.enumValues.length;l++){var d=this.enumValues[l].value,c=this.enumValues[l].key;if(s===d)return this.messageService.warning("枚举的[编号]不允许重复，重复编号为["+s+"]。"),!1;if(o===c)return this.messageService.warning("枚举的[名称]不允许重复，重复名称为["+o+"]。"),!1}return!0},U.prototype.closeCell=function(){this.dg.endCellEdit()},U.prototype["import"]=function(){var d=this;if(this.uistate.beMetaData){var e=this.uistate.beMetaData.content,t=this.resolver.resolveComponentFactory(G).create(this.injector);t.instance.selectEleInfo.be=e,t.instance.selectEleInfo.singleElement=!0,t.instance.selectEleInfo.assoRefElement=!1,t.instance.confirm.subscribe(function(e){var t,n,i=e.selectedBeFields[0];if(i.ObjectType===f.GSPElementObjectType.Enum){d.editData=new Array;var r=0;try{for(var a=S(i.ContainEnumValues),s=a.next();!s.done;s=a.next()){var o=s.value;d.editData.push({id:r,key:o.Value,value:o.Name}),r++}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(t)throw t.error}}d.maxNum=r}else d.messageService.info("选中字段并非枚举字段，请了解！")});var n=this.modalService.show(t,{title:"枚举字段选择",width:1e3,height:550,showButtons:!1});t.instance.closeModal.subscribe(function(){n.close()})}else this.messageService.error("未获取到BE元数据，请联系管理员查看原因！")},U.prototype.add=function(){this.closeCell();var e=this.maxNum;this.editData=this.editData.concat([{id:e}]),this.maxNum++},U.prototype.remove=function(){if(this.closeCell(),this.dg.selectedRow){var t=this.dg.selectedRow.id;this.dg.selectPrevRow(),this.editData=this.editData.filter(function(e){return e.id!==t})}},U.prototype.createData=function(e){var t,n,i=[],r=0;try{for(var a=S(e),s=a.next();!s.done;s=a.next()){var o=s.value;i.push({id:r,key:o.key,value:o.value}),r++}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(t)throw t.error}}return this.maxNum=r,i},U.decorators=[{type:x.Component,args:[{selector:"app-enum-edit",template:'<ng-template #buttons>\r\n    <button class="btn btn-primary" (click)="onConfirm()">确定</button>\r\n    <button class="btn btn-secondary" (click)="cancel()">取消</button>\r\n</ng-template>\r\n\r\n<div class="f-page">\r\n    <div class="f-page-header">\r\n        <nav class="f-page-header-base">\r\n            <div class="f-title">\r\n                <span class="f-title-icon f-text-orna-bill">\r\n                    <i class="f-icon f-icon-page-title-administer"></i>\r\n                </span>\r\n                <h4 class="f-title-text">列表</h4>\r\n            </div>\r\n            <div class="btn-toolbar btn-group-lg">\r\n                <button class="btn btn-primary mr-2" (click)="import()">引入</button>\r\n                <button class="btn btn-secondary mr-2" (click)="add()">新增</button>\r\n                <button class="btn btn-secondary" (click)="remove()">删除</button>\r\n            </div>\r\n        </nav>\r\n    </div>\r\n    <div class="f-page-main f-utils-fill-flex-column h-100">\r\n        <div class="f-utils-fill-flex-column farris-overflow-y-auto h-100">\r\n            <farris-datagrid [data]="editData" [columns]="columns" #dg="datagrid" [fit]="true" \r\n                [editable]="true" [editMode]="\'cell\'" [idField]="\'id\'"\r\n                [showCheckbox]="false" [fitColumns]="true" [showLineNumber]="true" [lineNumberTitle]="\'序号\'" [lineNumberWidth]="50" \r\n                [striped]="true" [virtualized]="true" [pagination]="false">\r\n            </farris-datagrid>\r\n        </div>\r\n    </div>\r\n</div>',styles:[":host{position:absolute;top:0;bottom:0;right:0;left:0}"]}]}],U.ctorParameters=function(){return[{type:p.MessagerService},{type:q},{type:h.BsModalService},{type:x.ComponentFactoryResolver},{type:x.Injector}]},U.propDecorators={cls:[{type:x.HostBinding,args:["class"]}],dg:[{type:x.ViewChild,args:["dg"]}],btnRef:[{type:x.ViewChild,args:["buttons"]}]},U);function U(e,t,n,i,r){this.messageService=e,this.uistate=t,this.modalService=n,this.resolver=i,this.injector=r,this.cls="farris-main-area flex-column",this.columns=[{field:"key",width:100,title:"键",editor:{type:u.EditorTypes.TEXTBOX,options:{}}},{field:"value",width:100,title:"值",editor:{type:u.EditorTypes.TEXTBOX,options:{}}}],this.confirm=new c.Subject,this.closeModalEmitter=new c.Subject,this.editData=new Array,this.maxNum=0}var X=(Object.defineProperty(Q.prototype,"dimensionItemCode",{get:function(){return this.data?this.data.code:""},set:function(e){this.data.code=e},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"dimensionItemName",{get:function(){return this.data?this.data.dimensionName:""},set:function(e){this.data.dimensionName=e},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"dimensionCode",{get:function(){return this.data?this.data.dimensionCode:""},set:function(e){this.data.dimensionCode=e},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"inputType",{get:function(){return this.data?this.data.inputType:null},set:function(e){this.data.inputType=e},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"dimensionType",{get:function(){return this.data?this.data.dimensionType:null},set:function(e){this.data.dimensionType=e},enumerable:!0,configurable:!0}),Q.prototype.ngOnInit=function(){this.canEdit=this.canCardEdit},Q.prototype.ngOnChanges=function(e){e.canCardEdit&&(this.canEdit=this.canCardEdit)},Q.prototype.selectDimensionType=function(e){},Q.prototype.selectBEMeta=function(){var t=this;if(this.uistate.schema&&(this.exprService.clearInjectedEntity(),this.exprService.addSchema("Schema",this.uistate.schema),this.uistate.schema.entityTypes&&0<this.uistate.schema.entityTypes.length)){var e=this.uistate.schema.entityTypes[0];this.exprService.addInjectedEntity(e.name,"Schema",e.name,g.InjectedType.EntityType)}this.exprService.addExpressionText(this.dimensionCode),this.exprService.buildExpression().then(function(e){e&&(t.dimensionCode=e)})},Q.prototype.selectInputType=function(e){this.data.inputType=e.data.value},Q.prototype.getIsEnumInput=function(){return this.data&&this.data.inputType===j.Enum},Q.prototype.getIsSmartHelpInput=function(){return this.data&&this.data.inputType===j.Help},Q.prototype.getEnumInputDisplay=function(){},Object.defineProperty(Q.prototype,"helperName",{get:function(){return this.getIsSmartHelpInput()?this.data.smartHelp:""},enumerable:!0,configurable:!0}),Q.prototype.selectHelpMeta=function(){this.lookupConfig=this.configService.showConfig({configId:this.data.smartHelp})},Q.prototype.editEnumValues=function(){var t=this,e=this.resolver.resolveComponentFactory($).create(this.injector),n={title:"枚举设置",width:650,height:450,showButtons:!0,buttons:e.instance.btnRef};this.data.enumList&&e.instance.load(JSON.parse(this.data.enumList)),e.instance.confirm.subscribe(function(e){t.data.enumList=JSON.stringify(e)?JSON.stringify(e):null});var i=this.modalService.show(e,n);e.instance.closeModalEmitter.subscribe(function(){i.close()})},Q.decorators=[{type:x.Component,args:[{selector:"wf-dimension-item-card",template:'<div class="farris-form farris-form-controls-inline mt-3">\r\n    <form class="f-section-formgroup">\r\n        <div class="f-section-formgroup-inputs">\r\n            <div class="col-12 row">\r\n                <div class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">维度编号</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <input-group [(ngModel)]="dimensionItemCode" name="code" \r\n                            [disabled]="!canEdit" [readonly]="sysInit" [enableClear]="false"></input-group>\r\n                            \x3c!-- <input type="text" class="form-control" [(ngModel)]="dimensionItemCode" name="code"\r\n                                [disabled]="!canEdit" [readOnly]="canEdit && sysInit"> --\x3e\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">维度类型</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <farris-combo-list [ngModel]="dimensionType" [idField]="\'value\'" [textField]="\'text\'" \r\n                                [disabled]="!canEdit" [enableClear]="false" [readonly]="sysInit"\r\n                                [data]="dimensionTypes" name="dimensionType" (selectChange)="selectDimensionType($event)"></farris-combo-list>\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">分配维度</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <input-group class="form-control" style="width: 100%;padding:0;border:0;" [enableClear]="false" \r\n                                [showButtonWhenDisabled]="false" [disabled]="!canEdit" [readonly]="sysInit"\r\n                                [ngModel]="dimensionCode" name="dimensionCode"\r\n                                [editable]="false" (clickHandle)="selectBEMeta()" [groupText]="groupIcon"></input-group>\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">维度名称</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <input-group [(ngModel)]="dimensionItemName" name="name" \r\n                            [disabled]="!canEdit" [readonly]="sysInit" [enableClear]="false"></input-group>\r\n                            \x3c!-- <input type="text" class="form-control" [(ngModel)]="dimensionItemName" name="name" \r\n                            [disabled]="!canEdit" [readOnly]="canEdit && sysInit"> --\x3e\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">数据类型</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <farris-combo-list [ngModel]="inputType" [idField]="\'value\'" [textField]="\'text\'" [disabled]="!canEdit" \r\n                                [data]="inputTypes" [enableClear]="false" [readonly]="sysInit"\r\n                                (selectChange)="selectInputType($event)" name="inputType"></farris-combo-list>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf="getIsEnumInput()" class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">枚举列表</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <input-group class="form-control" style="width: 100%;padding:0;border:0;" [enableClear]="false"\r\n                                [showButtonWhenDisabled]="false" [disabled]="!canEdit" [value]="enumListText()" [editable]="false"\r\n                                (clickHandle)="editEnumValues()" [groupText]="groupIcon" [readonly]="sysInit"></input-group>\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div *ngIf="getIsSmartHelpInput()" class="farris-group-wrap col-4">\r\n                    <div class="form-group farris-form-group">\r\n                        <label class="col-form-label">\r\n                            <span class="farris-label-info text-danger">*</span>\r\n                            <span class="farris-label-text">帮助选择</span>\r\n                        </label>\r\n                        <div class="farris-input-wrap">\r\n                            <input-group class="form-control" style="width: 100%;padding:0;border:0;" [enableClear]="false" \r\n                                [showButtonWhenDisabled]="false" [disabled]="!canEdit"\r\n                                [value]="helperName" [editable]="false" (clickHandle)="selectHelpMeta()"\r\n                                [groupText]="groupIcon"></input-group>\r\n                            <div class="farris-feedback valid-feedback"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>',providers:[I.LookupConfigService],styles:[""]}]}],Q.ctorParameters=function(){return[{type:h.BsModalService},{type:x.ComponentFactoryResolver},{type:x.Injector},{type:p.MessagerService},{type:q},{type:g.ExpressionService},{type:I.LookupConfigService}]},Q.propDecorators={data:[{type:x.Input}],canCardEdit:[{type:x.Input}],sysInit:[{type:x.Input}]},Q);function Q(e,t,n,i,r,a,s){var o=this;this.modalService=e,this.resolver=t,this.injector=n,this.messageService=i,this.uistate=r,this.exprService=a,this.configService=s,this.sysInit=!1,this.canEdit=!1,this.dimensionTypes=F,this.inputTypes=P,this.selectedBEMetadata=new x.EventEmitter,this.selectedHelpMetadata=new x.EventEmitter,this.groupIcon='<i class="f-icon f-icon-lookup"></i>',this.enumListText=function(){if(!o.getIsEnumInput())return"";var t="";if(o.data.enumList){var e=JSON.parse(o.data.enumList);0<e.length&&e.forEach(function(e){t=t.concat(e.key+":"+e.value+"; ")})}return t},this.configService.getLookupData().subscribe(function(e){console.log(e),o.data.smartHelp=e})}var Y=(Object.defineProperty(Z.prototype,"model",{get:function(){return this.modelValue},set:function(e){this.modelValue=e,this.updateSubscriber()},enumerable:!0,configurable:!0}),Z.prototype.ngOnInit=function(){},Z.prototype.ngAfterViewInit=function(){var t=this;this.className.length&&this.className.forEach(function(e){t.render.addClass(t.farrisPanel.nativeElement,e)}),this.updateSubscriber()},Z.prototype.updateModel=function(t){var e=this.modelValue.findIndex(function(e){return e===t});if(e<0)return this.accordion&&(this.model=[]),this.modelValue.push(t),this.updateSubscriber(),this.modelChange.emit(this.modelValue);this.accordion?this.model=[]:this.modelValue.splice(e,1),this.updateSubscriber(),this.modelChange.emit(this.modelValue)},Z.prototype.updateSubscriber=function(){this.subscriber.forEach(function(e){return e()})},Z.decorators=[{type:x.Component,args:[{selector:"wf-dimension-panel",template:'<div #farrisPanel class="farris-panel" [class.accordion]="accordion" [style.width]="width+\'px\'" [style.height]="height+\'px\'">\r\n    <ng-content>\r\n    </ng-content>\r\n</div>',encapsulation:x.ViewEncapsulation.None,styles:[".farris-panel{margin:25px}"]}]}],Z.ctorParameters=function(){return[{type:x.Renderer2}]},Z.propDecorators={farrisPanel:[{type:x.ViewChild,args:["farrisPanel"]}],width:[{type:x.Input}],height:[{type:x.Input}],className:[{type:x.Input}],foldable:[{type:x.Input}],defaultExpand:[{type:x.Input}],accordion:[{type:x.Input}],model:[{type:x.Input}],modelChange:[{type:x.Output}]},Z);function Z(e){this.render=e,this.className=[],this.foldable=!0,this.accordion=!1,this.modelChange=new x.EventEmitter,this.modelValue=[],this.subscriber=[]}var ee=y.trigger("dropAnimation",[y.state("active",y.style({height:"*"})),y.state("inactive",y.style({height:"0",overflow:"hidden"})),y.transition("active<=>inactive",y.animate(".35s ease"))]),te=(ne.prototype.ngOnInit=function(){},ne.prototype.ngOnChanges=function(e){e.editState&&(this.editState?this.active=!0:this.active=!1)},ne.decorators=[{type:x.Component,args:[{selector:"wf-dimension-panel-item",template:'\x3c!-- 标题  是否有模板 --\x3e\r\n\r\n<div id="cardheader" class="card-header" style="height: 45px; background-color: white;border-bottom: 1px solid rgba(0, 0, 0, .125);">\r\n    \x3c!-- 标题  是否有模板 --\x3e\r\n    <div class="panel-item-title">\r\n        <span class="f-icon f-icon-new-dimension"></span>\r\n        <span *ngIf="!headRef;else head">\r\n            {{tabTitle}}\r\n        </span>\r\n        <span [class]="sysInit?\'sysInit-flow-form\':\'customize-flow-form\'">{{sysInit?\'系统预置\':\'自定义\'}}</span>\r\n        <ng-template #head [ngTemplateOutlet]="headRef"></ng-template>\r\n    </div>\r\n    <div class="panel-item-tool">\r\n        <ng-template [ngTemplateOutlet]="toolTempl"></ng-template>\r\n    </div>\r\n    <div class="panel-item-clear">\r\n    </div>\r\n\r\n</div>\r\n\x3c!-- panel内容模板 --\x3e\r\n<div class=" card-body ">\r\n    <ng-template [ngTemplateOutlet]="contentRef">\r\n    </ng-template>\r\n</div>\r\n\x3c!-- 底部  是否有模板 --\x3e\r\n<div class="card-bottom " style="border-top: 1px solid rgba(0, 0, 0, .125);" [@dropAnimation]="active? \'active\': \'inactive\' ">\r\n    <div style="float: right; margin: 9px;">\r\n        <ng-template [ngTemplateOutlet]="bottomRef ">\r\n        </ng-template>\r\n    </div>\r\n</div>',animations:[ee],encapsulation:x.ViewEncapsulation.None,styles:[":host{width:100%}#cardheader .card-header{cursor:pointer;border-width:1px;background-color:#fff}.panel-item-title{float:left}.card-bottom{background-color:rgba(242,242,242);height:45px}.panel-item-tool{float:right}.panel-item-clear{clear:both}.f-state-disable{pointer-events:none}.customize-flow-form{font-size:12px;color:#fff;margin-left:10px;border-radius:20px;padding:2px 8px;background:#59a1ff}.sysInit-flow-form{font-size:12px;color:#fff;margin-left:10px;border-radius:20px;padding:2px 8px;background:#ff8e59}"]}]}],ne.ctorParameters=function(){return[{type:Y,decorators:[{type:x.Optional}]},{type:x.ChangeDetectorRef},{type:x.Renderer2},{type:x.ElementRef}]},ne.propDecorators={editState:[{type:x.Input}],width:[{type:x.Input}],height:[{type:x.Input}],value:[{type:x.Input}],tabTitle:[{type:x.Input,args:["title"]}],sysInit:[{type:x.Input}],disable:[{type:x.Input},{type:x.HostBinding,args:["class.f-state-disable"]}],headRef:[{type:x.ContentChild,args:["headTempl"]}],bottomRef:[{type:x.ContentChild,args:["bottomRef"]}],toolTempl:[{type:x.ContentChild,args:["toolTempl"]}],contentRef:[{type:x.ContentChild,args:["contentTempl"]}]},ne);function ne(e,t,n,i){this.panel=e,this.changeRef=t,this.render=n,this.el=i,this.sysInit=!1,this.active=!1}var ie=(re.decorators=[{type:x.NgModule,args:[{imports:[b.CommonModule],declarations:[Y,te],exports:[Y,te]}]}],re);function re(){}var ae=(Object.defineProperty(se.prototype,"cmpPageDetail",{set:function(e){this.detailPage=e},enumerable:!0,configurable:!0}),se.prototype.ngOnInit=function(){this.load()},se.prototype.ngOnChanges=function(e){this.load()},se.prototype.load=function(){if(this.data&&this.data.be){var e=this.data.be.MainObject;this.treeData=this.getTablesTree(e),this.farrisTreeData=this.getFarrisTreeData(this.treeData)}},se.prototype.getFarrisTreeData=function(e){var n=this,i=[];return e&&e.length&&e.forEach(function(e){var t=[];e&&e.Children&&e.Children.length&&(t=n.getFarrisTreeData(e.Children)),i.push({data:e,children:t,expanded:!0})}),i},se.prototype.getTablesTree=function(e){var n=this,t=e.ContainChildObjects,i=e.ColumnGenerateID,r=e.Keys,a=T(e,["ContainChildObjects","ColumnGenerateID","Keys"]);return this.treeTables.push(a.Code),t&&0<t.length&&(a.Children=[],t.forEach(function(e){var t=n.getTablesTree(e);a.Children=a.Children.concat(t)})),i&&this.readonlyFields.push(i.ElementID),r&&0<r.length&&r.forEach(function(e){n.readonlyFields.push(e.SourceElement)}),[a]},se.prototype.handleTreeSelection=function(e){this.data.selectedObj=e.node.data},se.prototype.nextStep=function(){this.data.BeFields=this.data.selectedObj.ContainElements,this.detailPage.setPageData(this.data.selectedObj),this.detailPage.nextStep()},se.prototype.cancel=function(){this.detailPage.cancelWizard()},se.prototype.pagedetailSelected=function(e){},se.decorators=[{type:x.Component,args:[{selector:"select-object",template:'<wizard-page-detail #detailpage1 (pagedetailSelected)="pagedetailSelected($event)">\r\n    <ng-template wizardPageContent>\r\n        <div class="f-template-wizard-page-content" style="margin-left:2px">\r\n            <farris-treetable #treetable [columns]="treeConfig.columns" [showBorder]="false" [showHeader]="false" [data]="farrisTreeData" [fit]="true" [idField]="treeConfig.idField" [singleSelect]="true" [showCheckbox]="false" [showIcon]="true" [disabled]="false"\r\n                [checkOnSelect]="true" (nodeSelected)="handleTreeSelection($event)" [leafIcon]="treeConfig.leafIcon" [expandIcon]="treeConfig.expandIcon" [collapseIcon]="treeConfig.collapseIcon">\r\n            </farris-treetable>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template wizardPageFooter>\r\n        <div class="f-template-wizard-page-footer">\r\n            <button class="btn btn-secondary" (click)="cancel()">\r\n              取消\r\n          </button>\r\n            <button class="btn btn-primary" [disabled]="!enableNextStep" (click)="nextStep()">\r\n              下一步\r\n          </button>\r\n        </div>\r\n    </ng-template>\r\n</wizard-page-detail>',styles:[":host{display:flex;flex:1}button{margin:10px}"]}]}],se.ctorParameters=function(){return[]},se.propDecorators={data:[{type:x.Input}],cmpPageDetail:[{type:x.ViewChild,args:[D.FarrisPageDetailComponent]}]},se);function se(){this.enableNextStep=!0,this.detailPage=null,this.treeTables=[],this.grid_selected={},this.readonlyFields=[],this.treeData=[],this.farrisTreeData=[],this.treeConfig={idField:"ID",columns:[{field:"Name",title:"Name",width:200}],leafIcon:"f-icon f-icon-folder text-info",expandIcon:"f-icon f-icon-folder-open text-info",collapseIcon:"f-icon f-icon-folder text-info",expandLevel:2}}var oe=(Object.defineProperty(le.prototype,"cmpPageDetail",{set:function(e){this.detailPage=e},enumerable:!0,configurable:!0}),le.prototype.ngOnInit=function(){this.load()},le.prototype.ngOnChanges=function(e){this.load()},le.prototype.load=function(){if(this.detailPage.getPageData("selectobject"),this.data&&this.data.selectedObj){var e=this.data.selectedObj;this.selectedTreeKey=this.data.selectedObj.Code,this.selectedTreeKeys=[this.selectedTreeKey],this.grid_selected[this.selectedTreeKey]=this.data.selectedBeFields,this.gridData[e.Code]=this.getGridFields(e.ContainElements,e.Code,!1)}},le.prototype.getGridFields=function(e,t,n){var r=this,a=[],s=[];return e&&0!==e.length?(e.forEach(function(e){var t=e.ChildAssociations,n=T(e,["ChildAssociations"]),i=[];r.data.assoRefElement&&t&&0<t.length&&t.forEach(function(e){e.RefElementCollection.forEach(function(e){i.push({data:e,children:[],expanded:!0,layer:2}),s.push(e.ID)})}),a.push({data:n,children:i,expanded:!0,layer:1}),s.push(n.ID)}),n&&(this.grid_selected[t]=s,this.grid_selected.selectedAll[t]=!0),a):[]},le.prototype.changeCheckbox=function(e,t){var n=this,i=e.ID,r=this.grid_selected[this.selectedTreeKey].indexOf(i);if(0<=r?(this.grid_selected[this.selectedTreeKey].splice(r,1),this.grid_selected.selectedAll[this.selectedTreeKey]=!1):(this.data.singleElement&&(this.grid_selected[this.selectedTreeKey]=[]),this.grid_selected[this.selectedTreeKey].push(i)),0<t.children.length&&t.children.forEach(function(t){var e=n.grid_selected[n.selectedTreeKey].findIndex(function(e){return e===t.data.ID});0<=r&&0<=e&&n.grid_selected[n.selectedTreeKey].splice(e,1),r<0&&e<0&&n.grid_selected[n.selectedTreeKey].push(t.data.ID)}),t.parent){var a=t.parent;if(!a)return;var s=this.grid_selected[this.selectedTreeKey].indexOf(a.data.ID);r<0&&s<0&&this.grid_selected[this.selectedTreeKey].push(a.data.ID)}},le.prototype.clickSelectAllCheckbox=function(){this.selectAllChange(this.gridData[this.selectedTreeKey],this.grid_selected.selectedAll[this.selectedTreeKey])},le.prototype.selectAllChange=function(e,i){var r=this;0!==e.length&&e.forEach(function(e){var t=e.data.ID;e.children&&0<e.children.length&&r.selectAllChange(e.children,i);var n=r.grid_selected[r.selectedTreeKey].indexOf(t);i&&n<0?r.grid_selected[r.selectedTreeKey].push(t):!i&&r.readonlyFields.indexOf(t)<0&&r.grid_selected[r.selectedTreeKey].splice(n,1)})},le.prototype.prevStep=function(){this.detailPage.prevStep()},le.prototype.finish=function(){0!==this.grid_selected[this.selectedTreeKey].length?(this.data.selectedBeFields=[this.grid_selected[this.selectedTreeKey]],this.detailPage.setPageData(this.data.selectedBeFields),this.detailPage.finishWizard()):alert("请勾选字段。")},le.prototype.cancel=function(){this.detailPage.cancelWizard()},le.prototype.pagedetailSelected=function(e){},le.decorators=[{type:x.Component,args:[{selector:"select-obj-element",template:'<wizard-page-detail #detailpage2 (pagedetailSelected)="pagedetailSelected($event)">\r\n    <ng-template wizardPageContent>\r\n        <div class="f-template-wizard-page-content" style="margin-left:2px">\r\n            <farris-treetable #treeTable [data]="gridData[selectedTreeKey]" [columns]="gridCols" [idField]="\'ID\'" [fixedHeader]="true" [width]="\'100%\'" [height]="330" [showFilterBar]="false" [showIcon]="false" [resizableColumns]="true" [cascadeCheck]="true" [showBorder]="false"\r\n                class="f-selectbe-treetable">\r\n                <ng-template farrisTemplate="header" let-columns>\r\n                    <tr>\r\n                        <ng-container *ngFor="let col of columns; let i = index">\r\n\r\n                            <th *ngIf="col.field!==\'show\'">\r\n                                <ng-container> {{col.title}} </ng-container>\r\n                            </th>\r\n                            <th *ngIf="col.field===\'show\'" [width]="col.width">\r\n                                <ng-container>\r\n                                    <div class="custom-control custom-checkbox f-checkradio-single">\r\n                                        \x3c!-- <input class="custom-control-input" id="CheckAll" type="checkbox" [(ngModel)]="grid_selected.selectedAll[selectedTreeKey]" (ngModelChange)="clickSelectAllCheckbox()" />\r\n                                        <label class="custom-control-label" for="CheckAll"></label> --\x3e\r\n                                    </div>\r\n                                </ng-container>\r\n                            </th>\r\n                            <th *ngIf="col.field===\'toggler\'" [width]="col.width">\r\n                            </th>\r\n                        </ng-container>\r\n\r\n                    </tr>\r\n                </ng-template>\r\n                <ng-template farrisTemplate="body" let-rowNode let-rowIndex="index" let-rowData="rowData" let-columns="columns">\r\n                    <tr [selectRow]="rowNode" [rowIndex]="rowIndex" [dblclick]="true" [selectRowDisabled]="true">\r\n                        <ng-container *ngFor="let col of columns; let i = index">\r\n                            <td *ngIf="col.field===\'show\'" [width]="col.width">\r\n                                <ng-container *ngIf="!rowNode.node.tableNode  && readonlyFields.indexOf(rowData.ID)<0">\r\n                                    <div class="custom-control custom-checkbox f-checkradio-single">\r\n                                        <input type="checkbox" [id]="rowData.ID" class="custom-control-input" [checked]="grid_selected[selectedTreeKey] && grid_selected[selectedTreeKey].indexOf(rowData.ID)>=0" (click)="changeCheckbox(rowData,rowNode.node)">\r\n                                        <label class="custom-control-label" [for]="rowData.ID"></label>\r\n                                    </div>\r\n                                </ng-container>\r\n\r\n                                <ng-container *ngIf="!rowNode.node.tableNode && readonlyFields.indexOf(rowData.ID)>=0">\r\n                                    <div class="custom-control custom-checkbox f-checkradio-single">\r\n                                        <input type="checkbox" [id]="rowData.ID" class="custom-control-input" checked="checked" disabled>\r\n                                        <label class="custom-control-label" [for]="rowData.ID"></label>\r\n                                    </div>\r\n                                </ng-container>\r\n                            </td>\r\n                            <td *ngIf="col.field!==\'show\'">\r\n                                <farris-treeTableToggler [rowNode]="rowNode" *ngIf="i == 1"></farris-treeTableToggler>\r\n                                <ng-container *ngIf="col.field!==\'MDataType\'">\r\n                                    <span [title]="rowData[col.field]">{{rowData[col.field]}}</span>\r\n                                </ng-container>\r\n                                <ng-container *ngIf="col.field ===\'MDataType\' && rowData.IsUdt">\r\n                                    <span [title]="rowData[col.field]">{{rowData.UdtName}}</span>\r\n                                </ng-container>\r\n                                <ng-container *ngIf="col.field ===\'MDataType\' && !rowData.IsUdt">\r\n                                    <span [title]="rowData[col.field]">{{rowData.MDataType}}</span>\r\n                                </ng-container>\r\n                            </td>\r\n                        </ng-container>\r\n                    </tr>\r\n                </ng-template>\r\n\r\n            </farris-treetable>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template wizardPageFooter>\r\n        <div class="f-template-wizard-page-footer">\r\n            <button class="btn btn-secondary" (click)="prevStep()">上一步</button>\r\n            <button class="btn btn-secondary" (click)="cancel()">取消</button>\r\n            <button class="btn btn-primary" [disabled]="!enableNextStep" (click)="finish()">完成</button>\r\n        </div>\r\n    </ng-template>\r\n</wizard-page-detail>',styles:[":host{display:flex;flex:1}button{margin:10px}"]}]}],le.ctorParameters=function(){return[]},le.propDecorators={data:[{type:x.Input}],changeObj:[{type:x.Input}],treeTable:[{type:x.ViewChild,args:["treeTable"]}],cmpPageDetail:[{type:x.ViewChild,args:[D.FarrisPageDetailComponent]}]},le);function le(){this.gridData={},this.gridCols=[{field:"show",title:"显示",width:40},{field:"Name",title:"字段名称"},{field:"Code",title:"字段编号",width:200},{field:"LabelID",title:"字段标签"},{field:"MDataType",title:"字段类型"}],this.grid_selected={selectedAll:{}},this.readonlyFields=[],this.selectedAll={},this.selectedTreeKeys=[],this.selectedTreeKey="",this.enableNextStep=!0,this.detailPage=null}var de=(ce.decorators=[{type:x.NgModule,args:[{imports:[b.CommonModule,D.WizardModule,v.TreeTableModule,w.FormsModule,w.ReactiveFormsModule],declarations:[G,ae,oe],entryComponents:[G,ae,oe]}]}],ce);function ce(){}var pe=(ue.decorators=[{type:x.NgModule,args:[{declarations:[L,X,$],imports:[b.CommonModule,w.FormsModule,w.ReactiveFormsModule,t.FarrisButtonModule,p.MessagerModule.forRoot(),o.FarrisDialogModule,s.NotifyModule,d.GSPMetadataRTServiceModule.forRoot(""),d.MetadataRTSelectModule,i.InputGroupModule,ie,u.DatagridEditorsModule,n.DatagridModule.forRoot(O(u.EditorProviders)),l.ComboListModule,g.ExpressionModule,de,I.LookupConfigModule],providers:[d.GSPMetadataRTService,H,q,g.ExpressionService,m.HttpService],entryComponents:[$],exports:[L,X]}]}],ue);function ue(){}e.WfDimensionDefService=C,e.WfDimensionDefComponent=L,e.WfDimensionDefModule=pe,e.ɵc=X,e.ɵd=$,e.ɵg=te,e.ɵe=ie,e.ɵf=Y,e.ɵh=ee,e.ɵj=G,e.ɵi=de,e.ɵl=oe,e.ɵk=ae,e.ɵb=q,e.ɵa=H,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-wf-wf-dimension-def.umd.min.js.map