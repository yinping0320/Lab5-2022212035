/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, ElementRef, Input, Output, EventEmitter, HostBinding, ChangeDetectorRef, Optional, Injector, ViewContainerRef, ViewEncapsulation, LOCALE_ID, ReflectiveInjector } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { forkJoin } from 'rxjs';
import { FrameworkService } from '@gsp-sys/rtf-common';
import { MessagerService } from '@farris/ui-messager';
import { LoadingService } from "@farris/ui-loading";
import { NotifyService } from '@farris/ui-notify';
import { FlowChart } from '../flow-chart/FlowChart';
import { UiFlowchartService } from '../services/ui-flowchart.service';
import { WFFlowchartService } from '../wf-flowchart.service';
export class UIFlowchartComponent {
    /**
     * @param {?} sanitizer
     * @param {?} service
     * @param {?} changeDetector
     * @param {?} injector
     * @param {?} chartService
     */
    constructor(sanitizer, service, changeDetector, injector, chartService) {
        this.sanitizer = sanitizer;
        this.service = service;
        this.changeDetector = changeDetector;
        this.injector = injector;
        this.chartService = chartService;
        // 消息监听处理方法
        this.cls = 'd-flex flex-fill h-100';
        this.modalHide = new EventEmitter();
        this.fcHtml = window.document.location.origin + '/platform/runtime/wf/web/designer/flowchart.html?v=20221111';
        this.theme = 'viewFlowChart';
        this._mode = 'complete';
        this.modeButton = this.service.getI18nValue('static.flowchart.simulation');
        this.typeList = [
            {
                value: 'complete', text: this.service.getI18nValue('static.flowchart.complete')
            },
            {
                value: 'simulation', text: this.service.getI18nValue('static.flowchart.simulation')
            }
        ];
        this.localeId = "zh-CHS";
        this.procInstList = []; //流程实例list，多实例子流程使用
        //当前选中的流程
        this.flowChartContainerClientSize = {};
        this.sequenceColorList = [
            {
                colorClass: 'color-gey',
                label: 'completed'
            }, {
                colorClass: 'color-yellow',
                label: 'calculate'
            }, {
                colorClass: 'color-blue',
                label: 'default'
            }, {
                colorClass: 'color-red',
                label: 'suspend'
            }
        ];
        this.message = this.injector.get(MessagerService);
        this.frameworkSvc = this.injector.get(FrameworkService);
        this.localeId = this.injector.get(LOCALE_ID, null) || this.localeId;
        this.loading = this.injector.get(LoadingService, null);
        if (this.loading == null) {
            /** @type {?} */
            const inject = ReflectiveInjector.resolveAndCreate([
                LoadingService
            ], this.injector);
            this.loading = inject.get(LoadingService, null);
        }
        this.notify = this.injector.get(NotifyService, null);
        if (this.notify == null) {
            /** @type {?} */
            const inject = ReflectiveInjector.resolveAndCreate([
                NotifyService
            ], this.injector);
            this.notify = inject.get(NotifyService, null);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set mode(v) {
        this._mode = v;
        if (this._mode === 'simulation') {
            this.ifForecast = 'true';
            this.modeButton = this.service.getI18nValue('static.flowchart.complete');
        }
        else if (this._mode === 'complete') {
            this.modeButton = this.service.getI18nValue('static.flowchart.simulation');
        }
    }
    /**
     * @return {?}
     */
    get mode() {
        return this._mode;
    }
    /**
     * @param {?} procInstId
     * @return {?}
     */
    set ProcInstId(procInstId) {
        if (procInstId) {
            this.procInstId = procInstId;
        }
    }
    /**
     * @param {?} dataId
     * @return {?}
     */
    set DataId(dataId) {
        if (dataId) {
            this.dataId = dataId;
        }
    }
    /**
     * @param {?} procInstList
     * @return {?}
     */
    set ProcInstList(procInstList) {
        if (procInstList && procInstList.length) {
            this.procInstId = procInstList[0].id;
            this.procInstList = procInstList;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.service.getFlowChartStyleConfig().subscribe((/**
         * @param {?} config
         * @return {?}
         */
        (config) => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.createFlowChart(config);
                this.viewFlowChart();
            }), 300);
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        // 监听画布容器高度和宽度属性变化，发生变化时刷新画布
        if (this.flowChartContainerER == null || this.flowChartContainerER.nativeElement == null || this.flowChart == null) {
            return;
        }
        if (this.flowChartContainerClientSize.clientHeight != this.flowChartContainerER.nativeElement.clientHeight
            || this.flowChartContainerClientSize.clientWidth != this.flowChartContainerER.nativeElement.clientWidth) {
            this.flowChartContainerClientSize = {
                clientHeight: this.flowChartContainerER.nativeElement.clientHeight,
                clientWidth: this.flowChartContainerER.nativeElement.clientWidth,
            };
            this.flowChart.refresh();
            this.flowChart.graph.sizeDidChange();
        }
    }
    /**
     * @param {?} config
     * @return {?}
     */
    createFlowChart(config) {
        this.flowChart = new FlowChart(this.flowChartContainerER.nativeElement, config);
        this.flowChart.ngComp = this;
        this.flowChart.setLanguage(this.localeId);
    }
    /**
     * @return {?}
     */
    viewFlowChart() {
        if (this.theme === 'viewFlowChart') {
            this.viewFlowChartByProcInstId();
        }
        else {
            this.processForecast();
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    tabChange(event) {
        this.procInstId = event.nextId;
        this.viewFlowChart();
        this.flowChart.reloadBpmnModel();
    }
    /**
     * @return {?}
     */
    closeDialog() {
        this.dialog.close();
    }
    /**
     * 查看子流程图
     * @param {?} actInst 活动实例
     * @param {?} superProcess 父流程
     * @return {?}
     */
    viewChild(actInst, superProcess) {
        this.service.getMutiChildInstance(actInst, superProcess.id).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        (re) => {
            if (this.chartService && re && re.length) {
                if (re.length == 1) { //单个子流程
                    this.chartService.viewFlowChartByDialog(re[0].id, this.mode);
                }
                else { //多实例子流程
                    this.chartService.viewMutiInstanceFlowChartByDialog(re, this.mode);
                }
            }
            else {
                throw Error('请升级查看流程公共包实现联查子流程图功能');
            }
        }));
    }
    /**
     * @return {?}
     */
    modeSwitch() {
        if (this.mode === 'complete') {
            this.mode = 'simulation';
            this.ifForecast = 'true';
            this.modeButton = this.service.getI18nValue('static.flowchart.complete');
            this.service.getForecastProcessByProcInstId(this.procInstId).subscribe((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                this.actInstList = r.activityInstanceSlims;
                this.transInsList = r.transitionInstanceSlims;
                this.flowChart.switchMode({
                    mode: 'simulation',
                    actiInstList: r.activityInstanceSlims,
                    transInsList: r.transitionInstanceSlims
                });
            }));
        }
        else {
            this.mode = 'complete';
            this.ifForecast = 'false';
            this.modeButton = this.service.getI18nValue('static.flowchart.simulation');
            this.service.getCompleteProcessInfoByProcInstId(this.procInstId).subscribe((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                this.actInstList = r.activityInstanceSlims;
                this.transInsList = r.transitionInstanceSlims;
                this.flowChart.switchMode({
                    mode: 'complete',
                    actiInstList: r.activityInstanceSlims,
                    transInsList: r.transitionInstanceSlims
                });
            }));
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    viewLogs(data) {
        this.type = data.type;
        this.actDefId = data.actiDefId;
    }
    /**
     * @return {?}
     */
    viewFlowChartByProcInstId() {
        this.content = '';
        if (this.procInstId) {
            if (this.mode === 'complete') {
                forkJoin(this.service.getProcInstanceById(this.procInstId), this.service.getBpmnModelbyProcInstId(this.procInstId), this.service.getCompleteProcessInfoByProcInstId(this.procInstId))
                    .subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    this.processInstance = data[0];
                    this.content = JSON.stringify(data[1]);
                    this.actInstList = data[2].activityInstanceSlims;
                    this.transInsList = data[2].transitionInstanceSlims;
                    this.loadFlowChart();
                }));
            }
            else {
                forkJoin(this.service.getProcInstanceById(this.procInstId), this.service.getBpmnModelbyProcInstId(this.procInstId), this.service.getForecastProcessByProcInstId(this.procInstId))
                    .subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    this.processInstance = data[0];
                    this.content = JSON.stringify(data[1]);
                    this.actInstList = data[2].activityInstanceSlims;
                    this.transInsList = data[2].transitionInstanceSlims;
                    this.loadFlowChart();
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    processForecast() {
        this.content = '';
        this.mode = 'simulation';
        if (this.processForecastPayload.processDefinitionId && this.processForecastPayload.dataId) {
            forkJoin(this.service.getBpmnModelbyProcDefId(this.processForecastPayload.processDefinitionId), this.service.getForecastProcessByPayload(this.processForecastPayload))
                .subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                this.content = JSON.stringify(data[0]);
                this.actInstList = data[1].activityInstanceSlims;
                this.transInsList = data[1].transitionInstanceSlims;
                this.loadFlowChart();
            }));
        }
    }
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    viewForm(procInstId, actInstId, bizInstId) {
        if (procInstId) {
            this.service.getFormInfoByActInstId(procInstId, actInstId).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                /** @type {?} */
                const formInfo = re;
                if (!formInfo || !formInfo.appId) {
                    if (this.message) {
                        this.message.info('找不到单据，请联系管理员查看原因！');
                    }
                    return;
                }
                /** @type {?} */
                const options = {
                    appType: 'menu',
                    funcId: formInfo.appId,
                    appId: '',
                    appEntrance: '',
                    tabId: bizInstId,
                    isNewTab: true
                };
                // 传工作流上下文参数
                /** @type {?} */
                const parameters = new Map();
                parameters.set('procInstId', procInstId);
                parameters.set('actInstId', actInstId);
                formInfo.parameters.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                (item) => parameters.set(item.code, item.value)));
                options.queryStringParams = parameters;
                if (this.frameworkSvc) {
                    this.frameworkSvc.openMenu(options);
                }
                else {
                    throw Error('框架服务不存在！无法联查！');
                }
            }));
        }
    }
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    retryAifCreation(procInstId, actInstId, bizInstId) {
        if (procInstId) {
            /** @type {?} */
            const l = this.loading.show();
            this.service.retryAifCreation(procInstId, actInstId, bizInstId).subscribe((/**
             * @param {?} re
             * @return {?}
             */
            (re) => {
                l.close();
                this.notify.success("重试成功");
                this.viewFlowChart();
            }), (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                l.close();
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    //todo 确定异常结构, 目前采用兼容取值方式
                    this.message.error(err.error == null ? err.message : (err.error.Message || err.error.message || err.message));
                }), 300);
                throw err;
            }));
        }
    }
    /**
     * @return {?}
     */
    loadFlowChart() {
        if (this.content) {
            this.flowChart.load({
                processInstance: this.processInstance,
                content: this.content,
                actiInstList: this.actInstList,
                transInsList: this.transInsList,
                mode: this.mode
            });
        }
    }
    /**
     * @return {?}
     */
    fill() {
        this.cls = 'd-flex flex-fill h-100 f-utils-absolute-all';
    }
}
UIFlowchartComponent.func = null; // 消息监听处理方法
UIFlowchartComponent.decorators = [
    { type: Component, args: [{
                selector: 'wf-flowchart',
                template: "<div class=\"f-page f-page-navigate f-page-is-listnav\">\r\n    <!-- \u591A\u5B9E\u4F8B\u5B50\u6D41\u7A0B\u5934 -->\r\n    <div *ngIf=\"procInstList?.length\" class=\"flowChart-muti-header\">\r\n        <farris-tabs [value]=\"curChildProcInst?.id\" [contentFill]=\"true\" [autoTitleWidth]=\"true\" [titleWidth]=\"90\"\r\n            (tabChange)=\"tabChange($event)\" class=\"w-100\">\r\n            <farris-tab *ngFor=\"let process of procInstList\" [id]=\"process.id\"\r\n                [title]=\"process.name + '-v' + process.version + '.0'\" style=\"overflow: hidden\">\r\n                <ng-template farrisTabsExtend>\r\n                    <li class=\"f-btn-icon f-bare\" (click)=\"closeDialog()\"><span\r\n                            class=\"f-icon modal_close flowchart-header-button\"></span></li>\r\n                </ng-template>\r\n            </farris-tab>\r\n        </farris-tabs>\r\n    </div>\r\n    <!-- \u6B63\u5E38\u60C5\u51B5\u67E5\u770B\u6D41\u7A0B -->\r\n    <div class=\"f-page-main\" style=\"margin: 0;\">\r\n        <farris-splitter class=\"f-page-content f-component-splitter\">\r\n            <!-- \u5DE6\u4FA7\u6D41\u7A0B\u56FE -->\r\n            <farris-splitter-pane class=\"f-page-content-main f-component-splitter-pane\">\r\n                <div class=\"f-utils-flex-column h-100\">\r\n                    <div *ngIf=\"dataId || procInstId || processForecastPayload\" class=\"f-utils-fill\">\r\n                        <div style=\"position: relative; height: 100%; width: 100%;\">\r\n                            <div id=\"flowChartContainer\" class=\"geEditor flowchart-container\" #flowChartContainer></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flowchart-buttons-padding \">\r\n                        <!-- \u663E\u793A\u9884\u6D4B\u8DEF\u7EBF -->\r\n                        <button *ngIf=\"theme==='viewFlowChart'\" class=\"btn btn-secondary mr-2\"\r\n                            (click)=\"modeSwitch()\">{{modeButton}}\r\n                        </button>\r\n                        <!-- \u5206\u652F\u7EBF\u989C\u8272\u8BF4\u660E -->\r\n                        <div class=\"btn-group\" fDropdown [placement]=\"'top'\">\r\n                            <button class=\"btn btn-secondary dropdown-toggle\" fDropdownToggle type=\"button\">\r\n                                {{'static.flowchart.sequenceColor' | translate}}\r\n                            </button>\r\n                            <div class=\"dropdown-menu\" fDropdownMenu>\r\n                                <div *ngFor=\"let s of sequenceColorList\" class=\"flowchart-sequence-color\">\r\n                                    <span class=\"flowchart-color-div\" [ngClass]=\"s.colorClass\"></span>\r\n                                    {{'static.flowchart.' + s.label | translate}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </farris-splitter-pane>\r\n            <!-- \u53F3\u4FA7\u5BA1\u6279\u65E5\u5FD7 -->\r\n            <farris-splitter-pane class=\"f-page-content-nav f-component-splitter-pane flowchart-right-pane\" ngResizable\r\n                [rzHandles]=\"'w'\" [collapsePosition]=\"'left'\" [enableCollapse]=\"true\" [rzMinWidth]=\"200\"\r\n                [rzMaxWidth]=\"600\">\r\n                <farris-section [enableMaximize]=\"false\" [enableAccordion]=\"false\" [showHeader]=\"false\"\r\n                    class=\"f-overflow-y-auto px-0\">\r\n                    <wf-approval-logs [ProcInstId]=\"procInstId\" [DataId]=\"dataId\" [IfForecast]=\"ifForecast\"\r\n                        [ActivityDefinitionId]=\"actDefId\" [Type]=\"type\"\r\n                        [processForecastPayload]=\"processForecastPayload\" [ShowHeader]=\"true\" [ShowViewProcess]=\"false\"\r\n                        [OnlyIncludeCurrentProcInst]=\"true\">\r\n                    </wf-approval-logs>\r\n                </farris-section>\r\n            </farris-splitter-pane>\r\n        </farris-splitter>\r\n    </div>\r\n</div>",
                encapsulation: ViewEncapsulation.None,
                styles: ["@charset \"UTF-8\";::ng-deep .chartModal .ant-modal{height:100%}::ng-deep .chartModal .ant-modal-content{height:100%}::ng-deep .chartModal .ant-modal-body{height:90%}.flowChart{height:100%;min-height:300px;width:100%}.flowChartContainer{overflow:auto;position:absolute;top:0;left:0;width:100%;height:100%;cursor:default;outline:0;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)}.flowChartContainer.active::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.2)}.flowChartContainer::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0)}.geEditor{font-family:Microsoft YaHei,Source Han Sans,sans-serif;font-size:10pt;border:none;margin:0}.geEditor input[type=text]::-ms-clear{display:none}body div.mxPopupMenu{box-shadow:3px 3px 6px silver;background:#fff;position:absolute;border:3px solid #e7e7e7;padding:3px}body table.mxPopupMenu{border-collapse:collapse;margin:0}body tr.mxPopupMenuItem{color:#000;cursor:default}body td.mxPopupMenuItem{padding:6px 0 6px 30px;font-family:Arial;font-size:10pt}body td.mxPopupMenuIcon{background-color:#fff;padding:0}body tr.mxPopupMenuItemHover{background-color:#eee;color:#000}table.mxPopupMenu hr{border-top:1px solid #ccc}table.mxPopupMenu tr{font-size:4pt}.flowchart-container{position:relative;width:100%;height:100%;overflow:auto}.flowChart-muti-header{display:flex;align-items:center;padding:0 16px}.flowchart-header-button{cursor:pointer;color:#848c9a}.flowchart-header-button:hover{color:#529dff}.flowchart-right-pane{margin:0 10px;width:30%}.flowchart-buttons-padding{padding:0 0 10px 10px}.flowchart-sequence-color{display:flex;align-items:center;padding-left:8px}.flowchart-color-div{color:#fff;border-radius:0;display:block;width:15px;height:15px;margin-right:8px}.color-gey{background:#595959}.color-yellow{background:#f59c24}.color-blue{background:#59a1ff}.color-red{background:#ff4040}"]
            }] }
];
/** @nocollapse */
UIFlowchartComponent.ctorParameters = () => [
    { type: DomSanitizer },
    { type: UiFlowchartService },
    { type: ChangeDetectorRef },
    { type: Injector },
    { type: WFFlowchartService, decorators: [{ type: Optional }] }
];
UIFlowchartComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    iframe: [{ type: ViewChild, args: ['iframe',] }],
    modalHide: [{ type: Output }],
    theme: [{ type: Input }],
    processForecastPayload: [{ type: Input }],
    mode: [{ type: Input }],
    ProcInstId: [{ type: Input }],
    DataId: [{ type: Input }],
    ProcInstList: [{ type: Input }],
    flowChartContainerER: [{ type: ViewChild, args: ["flowChartContainer",] }],
    flowChartContainerVCR: [{ type: ViewChild, args: ["flowChartContainer", { read: ViewContainerRef },] }]
};
if (false) {
    /** @type {?} */
    UIFlowchartComponent.func;
    /** @type {?} */
    UIFlowchartComponent.prototype.cls;
    /** @type {?} */
    UIFlowchartComponent.prototype.iframe;
    /** @type {?} */
    UIFlowchartComponent.prototype.modalHide;
    /** @type {?} */
    UIFlowchartComponent.prototype.procInstId;
    /** @type {?} */
    UIFlowchartComponent.prototype.dataId;
    /** @type {?} */
    UIFlowchartComponent.prototype.actDefId;
    /** @type {?} */
    UIFlowchartComponent.prototype.ifForecast;
    /** @type {?} */
    UIFlowchartComponent.prototype.type;
    /** @type {?} */
    UIFlowchartComponent.prototype.content;
    /** @type {?} */
    UIFlowchartComponent.prototype.actInstList;
    /** @type {?} */
    UIFlowchartComponent.prototype.transInsList;
    /** @type {?} */
    UIFlowchartComponent.prototype.processInstance;
    /** @type {?} */
    UIFlowchartComponent.prototype.fcHtml;
    /** @type {?} */
    UIFlowchartComponent.prototype.theme;
    /** @type {?} */
    UIFlowchartComponent.prototype.processForecastPayload;
    /** @type {?} */
    UIFlowchartComponent.prototype.dialog;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype._mode;
    /** @type {?} */
    UIFlowchartComponent.prototype.modeButton;
    /** @type {?} */
    UIFlowchartComponent.prototype.typeList;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.message;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.frameworkSvc;
    /** @type {?} */
    UIFlowchartComponent.prototype.flowChartContainerER;
    /** @type {?} */
    UIFlowchartComponent.prototype.flowChartContainerVCR;
    /** @type {?} */
    UIFlowchartComponent.prototype.flowChart;
    /** @type {?} */
    UIFlowchartComponent.prototype.localeId;
    /** @type {?} */
    UIFlowchartComponent.prototype.loading;
    /** @type {?} */
    UIFlowchartComponent.prototype.notify;
    /** @type {?} */
    UIFlowchartComponent.prototype.procInstList;
    /** @type {?} */
    UIFlowchartComponent.prototype.curChildProcInst;
    /** @type {?} */
    UIFlowchartComponent.prototype.flowChartContainerClientSize;
    /** @type {?} */
    UIFlowchartComponent.prototype.sequenceColorList;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.sanitizer;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.service;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.changeDetector;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    UIFlowchartComponent.prototype.chartService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1mbG93Y2hhcnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi91aS1mbG93Y2hhcnQvIiwic291cmNlcyI6WyJsaWIvdGFzay1mbG93Y2hhcnQvdGFzay1mbG93Y2hhcnQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUFVLFNBQVMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFDdkQsWUFBWSxFQUFFLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxrQkFBa0IsRUFDckksTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFaEMsT0FBTyxFQUFjLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3BELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBWTdELE1BQU0sT0FBTyxvQkFBb0I7Ozs7Ozs7O0lBdUcvQixZQUNVLFNBQXVCLEVBQ3ZCLE9BQTJCLEVBQzNCLGNBQWlDLEVBQ2pDLFFBQWtCLEVBQ04sWUFBZ0M7UUFKNUMsY0FBUyxHQUFULFNBQVMsQ0FBYztRQUN2QixZQUFPLEdBQVAsT0FBTyxDQUFvQjtR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MkJBT0wsS0FBSzttQ0FRTCxTQUFTLFNBQUMsb0JBQW9CO29DQUM5QixTQUFTLFNBQUMsb0JBQW9CLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUU7Ozs7SUF2RTNELDBCQUF3Qjs7SUFDeEIsbUNBQXFEOztJQUNyRCxzQ0FBd0M7O0lBQ3hDLHlDQUFrRDs7SUFDbEQsMENBQW1COztJQUNuQixzQ0FBZTs7SUFDZix3Q0FBaUI7O0lBQ2pCLDBDQUFtQjs7SUFDbkIsb0NBQVU7O0lBQ1YsdUNBQWdCOztJQUNoQiwyQ0FBbUI7O0lBQ25CLDRDQUFvQjs7SUFDcEIsK0NBQXFCOztJQUNyQixzQ0FBeUc7O0lBRXpHLHFDQUFpQzs7SUFDakMsc0RBQXFDOztJQUNyQyxzQ0FBbUI7Ozs7O0lBRW5CLHFDQUEyQjs7SUFnQjNCLDBDQUFzRTs7SUFDdEUsd0NBT0U7Ozs7O0lBRUYsdUNBQWlDOzs7OztJQUNqQyw0Q0FBdUM7O0lBd0J2QyxvREFBa0Y7O0lBQ2xGLHFEQUN3Qzs7SUFDeEMseUNBQXFCOztJQUNyQix3Q0FBNEI7O0lBQzVCLHVDQUF3Qjs7SUFDeEIsc0NBQXNCOztJQUN0Qiw0Q0FBcUM7O0lBQ3JDLGdEQUFrQzs7SUFFbEMsNERBR087O0lBRVAsaURBY0M7Ozs7O0lBR0MseUNBQStCOzs7OztJQUMvQix1Q0FBbUM7Ozs7O0lBQ25DLDhDQUF5Qzs7Ozs7SUFDekMsd0NBQTBCOzs7OztJQUMxQiw0Q0FBb0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIElucHV0LCBPdXRwdXQsXHJcbiAgRXZlbnRFbWl0dGVyLCBIb3N0QmluZGluZywgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsLCBJbmplY3RvciwgVmlld0NvbnRhaW5lclJlZiwgVmlld0VuY2Fwc3VsYXRpb24sIExPQ0FMRV9JRCwgUmVmbGVjdGl2ZUluamVjdG9yLCBBZnRlclZpZXdDaGVja2VkXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERvbVNhbml0aXplciB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xyXG5pbXBvcnQgeyBmb3JrSm9pbiB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgQXBwT3B0aW9ucywgRnJhbWV3b3JrU2VydmljZSB9IGZyb20gJ0Bnc3Atc3lzL3J0Zi1jb21tb24nO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1sb2FkaW5nXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcblxyXG5pbXBvcnQgeyBGbG93Q2hhcnQgfSBmcm9tICcuLi9mbG93LWNoYXJ0L0Zsb3dDaGFydCc7XHJcbmltcG9ydCB7IFVpRmxvd2NoYXJ0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3VpLWZsb3djaGFydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgV0ZGbG93Y2hhcnRTZXJ2aWNlIH0gZnJvbSAnLi4vd2YtZmxvd2NoYXJ0LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDZWxsU3R5bGVDb25maWcgfSBmcm9tICcuLi9lbnRpdHkvY2VsbC1zdHlsZS9DZWxsU3R5bGVDb25maWcnO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUluc3RhbmNlU2xpbSwgUHJvY2Vzc0luc3RhbmNlIH0gZnJvbSAnLi4vZmxvdy1jaGFydC9lbnRpdHknO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3dmLWZsb3djaGFydCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3Rhc2stZmxvd2NoYXJ0LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi90YXNrLWZsb3djaGFydC5jb21wb25lbnQuc2NzcyddLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBVSUZsb3djaGFydENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCB7XHJcblxyXG4gIHN0YXRpYyBmdW5jOiBhbnkgPSBudWxsOyAvLyDmtojmga/nm5HlkKzlpITnkIbmlrnms5VcclxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgY2xzID0gJ2QtZmxleCBmbGV4LWZpbGwgaC0xMDAnO1xyXG4gIEBWaWV3Q2hpbGQoJ2lmcmFtZScpIGlmcmFtZTogRWxlbWVudFJlZjtcclxuICBAT3V0cHV0KCkgbW9kYWxIaWRlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG4gIHByb2NJbnN0SWQ6IHN0cmluZzsvL+a1geeoi+WunuS+i2lkXHJcbiAgZGF0YUlkOiBzdHJpbmc7Ly/ooajljZVpZFxyXG4gIGFjdERlZklkOiBzdHJpbmc7Ly/oioLngrnlrprkuYlpZFxyXG4gIGlmRm9yZWNhc3Q6IHN0cmluZzsvL+aYr+WQpumihOa1i1xyXG4gIHR5cGU6IGFueTsgLy90eXBlID0gJ3Byb2Nlc3Mn5p+l55yL5rWB56iL5pel5b+X77ybdHlwZSA9ICdhY3Rpdml0eSfvvIzmn6XnnIvoioLngrnml6Xlv5dcclxuICBjb250ZW50OiBzdHJpbmc7IC8vIGJwbW5Nb2RlbFxyXG4gIGFjdEluc3RMaXN0OiBhbnlbXTsgLy8g5rS75Yqo5a6e5L6LTGlzdFxyXG4gIHRyYW5zSW5zTGlzdDogYW55W107ICAvLyDmtYHovazlrp7kvotcclxuICBwcm9jZXNzSW5zdGFuY2U6IGFueTtcclxuICBmY0h0bWwgPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luICsgJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYi9kZXNpZ25lci9mbG93Y2hhcnQuaHRtbD92PTIwMjIxMTExJztcclxuXHJcbiAgQElucHV0KCkgdGhlbWUgPSAndmlld0Zsb3dDaGFydCc7XHJcbiAgQElucHV0KCkgcHJvY2Vzc0ZvcmVjYXN0UGF5bG9hZDogYW55O1xyXG4gIGRpYWxvZzogQnNNb2RhbFJlZjtcclxuXHJcbiAgcHJpdmF0ZSBfbW9kZSA9ICdjb21wbGV0ZSc7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IG1vZGUodjogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9tb2RlID0gdjtcclxuICAgIGlmICh0aGlzLl9tb2RlID09PSAnc2ltdWxhdGlvbicpIHtcclxuICAgICAgdGhpcy5pZkZvcmVjYXN0ID0gJ3RydWUnO1xyXG4gICAgICB0aGlzLm1vZGVCdXR0b24gPSB0aGlzLnNlcnZpY2UuZ2V0STE4blZhbHVlKCdzdGF0aWMuZmxvd2NoYXJ0LmNvbXBsZXRlJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX21vZGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgdGhpcy5tb2RlQnV0dG9uID0gdGhpcy5zZXJ2aWNlLmdldEkxOG5WYWx1ZSgnc3RhdGljLmZsb3djaGFydC5zaW11bGF0aW9uJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBtb2RlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21vZGU7XHJcbiAgfVxyXG5cclxuICBtb2RlQnV0dG9uID0gdGhpcy5zZXJ2aWNlLmdldEkxOG5WYWx1ZSgnc3RhdGljLmZsb3djaGFydC5zaW11bGF0aW9uJyk7XHJcbiAgdHlwZUxpc3QgPSBbXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlOiAnY29tcGxldGUnLCB0ZXh0OiB0aGlzLnNlcnZpY2UuZ2V0STE4blZhbHVlKCdzdGF0aWMuZmxvd2NoYXJ0LmNvbXBsZXRlJylcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlOiAnc2ltdWxhdGlvbicsIHRleHQ6IHRoaXMuc2VydmljZS5nZXRJMThuVmFsdWUoJ3N0YXRpYy5mbG93Y2hhcnQuc2ltdWxhdGlvbicpXHJcbiAgICB9XHJcbiAgXTtcclxuXHJcbiAgcHJpdmF0ZSBtZXNzYWdlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBmcmFtZXdvcmtTdmM6IEZyYW1ld29ya1NlcnZpY2U7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IFByb2NJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nKSB7XHJcbiAgICBpZiAocHJvY0luc3RJZCkge1xyXG4gICAgICB0aGlzLnByb2NJbnN0SWQgPSBwcm9jSW5zdElkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgRGF0YUlkKGRhdGFJZDogc3RyaW5nKSB7XHJcbiAgICBpZiAoZGF0YUlkKSB7XHJcbiAgICAgIHRoaXMuZGF0YUlkID0gZGF0YUlkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgUHJvY0luc3RMaXN0KHByb2NJbnN0TGlzdDogUHJvY2Vzc0luc3RhbmNlW10pIHtcclxuICAgIGlmIChwcm9jSW5zdExpc3QgJiYgcHJvY0luc3RMaXN0Lmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnByb2NJbnN0SWQgPSBwcm9jSW5zdExpc3RbMF0uaWQ7XHJcbiAgICAgIHRoaXMucHJvY0luc3RMaXN0ID0gcHJvY0luc3RMaXN0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZChcImZsb3dDaGFydENvbnRhaW5lclwiKSBmbG93Q2hhcnRDb250YWluZXJFUjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XHJcbiAgQFZpZXdDaGlsZChcImZsb3dDaGFydENvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICBmbG93Q2hhcnRDb250YWluZXJWQ1I6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgZmxvd0NoYXJ0OiBGbG93Q2hhcnQ7XHJcbiAgbG9jYWxlSWQ6IHN0cmluZyA9IFwiemgtQ0hTXCI7XHJcbiAgbG9hZGluZzogTG9hZGluZ1NlcnZpY2U7XHJcbiAgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlO1xyXG4gIHByb2NJbnN0TGlzdDogUHJvY2Vzc0luc3RhbmNlW10gPSBbXTsvL+a1geeoi+WunuS+i2xpc3TvvIzlpJrlrp7kvovlrZDmtYHnqIvkvb/nlKhcclxuICBjdXJDaGlsZFByb2NJbnN0OiBQcm9jZXNzSW5zdGFuY2U7Ly/lvZPliY3pgInkuK3nmoTmtYHnqItcclxuXHJcbiAgZmxvd0NoYXJ0Q29udGFpbmVyQ2xpZW50U2l6ZToge1xyXG4gICAgY2xpZW50SGVpZ2h0PzogbnVtYmVyO1xyXG4gICAgY2xpZW50V2lkdGg/OiBudW1iZXI7XHJcbiAgfSA9IHt9O1xyXG5cclxuICBzZXF1ZW5jZUNvbG9yTGlzdCA9IFsvL+minOiJsuWIhuaUr+e6v+ivtOaYjlxyXG4gICAge1xyXG4gICAgICBjb2xvckNsYXNzOiAnY29sb3ItZ2V5JyxcclxuICAgICAgbGFiZWw6ICdjb21wbGV0ZWQnXHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbG9yQ2xhc3M6ICdjb2xvci15ZWxsb3cnLFxyXG4gICAgICBsYWJlbDogJ2NhbGN1bGF0ZSdcclxuICAgIH0sIHtcclxuICAgICAgY29sb3JDbGFzczogJ2NvbG9yLWJsdWUnLFxyXG4gICAgICBsYWJlbDogJ2RlZmF1bHQnXHJcbiAgICB9LCB7XHJcbiAgICAgIGNvbG9yQ2xhc3M6ICdjb2xvci1yZWQnLFxyXG4gICAgICBsYWJlbDogJ3N1c3BlbmQnXHJcbiAgICB9XHJcbiAgXVxyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgc2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsXHJcbiAgICBwcml2YXRlIHNlcnZpY2U6IFVpRmxvd2NoYXJ0U2VydmljZSxcclxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNoYXJ0U2VydmljZTogV0ZGbG93Y2hhcnRTZXJ2aWNlLFxyXG4gICkge1xyXG4gICAgdGhpcy5tZXNzYWdlID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgIHRoaXMuZnJhbWV3b3JrU3ZjID0gdGhpcy5pbmplY3Rvci5nZXQoRnJhbWV3b3JrU2VydmljZSk7XHJcbiAgICB0aGlzLmxvY2FsZUlkID0gdGhpcy5pbmplY3Rvci5nZXQoTE9DQUxFX0lELCBudWxsKSB8fCB0aGlzLmxvY2FsZUlkO1xyXG4gICAgdGhpcy5sb2FkaW5nID0gdGhpcy5pbmplY3Rvci5nZXQoTG9hZGluZ1NlcnZpY2UsIG51bGwpO1xyXG4gICAgaWYgKHRoaXMubG9hZGluZyA9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IGluamVjdCA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtcclxuICAgICAgICBMb2FkaW5nU2VydmljZVxyXG4gICAgICBdLCB0aGlzLmluamVjdG9yKTtcclxuICAgICAgdGhpcy5sb2FkaW5nID0gaW5qZWN0LmdldChMb2FkaW5nU2VydmljZSwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5vdGlmeSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5vdGlmeVNlcnZpY2UsIG51bGwpO1xyXG4gICAgaWYgKHRoaXMubm90aWZ5ID09IG51bGwpIHtcclxuICAgICAgY29uc3QgaW5qZWN0ID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmVBbmRDcmVhdGUoW1xyXG4gICAgICAgIE5vdGlmeVNlcnZpY2VcclxuICAgICAgXSwgdGhpcy5pbmplY3Rvcik7XHJcbiAgICAgIHRoaXMubm90aWZ5ID0gaW5qZWN0LmdldChOb3RpZnlTZXJ2aWNlLCBudWxsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5zZXJ2aWNlLmdldEZsb3dDaGFydFN0eWxlQ29uZmlnKCkuc3Vic2NyaWJlKChjb25maWc6IENlbGxTdHlsZUNvbmZpZykgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUZsb3dDaGFydChjb25maWcpO1xyXG4gICAgICAgIHRoaXMudmlld0Zsb3dDaGFydCgpO1xyXG4gICAgICB9LCAzMDApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAvLyDnm5HlkKznlLvluIPlrrnlmajpq5jluqblkozlrr3luqblsZ7mgKflj5jljJbvvIzlj5HnlJ/lj5jljJbml7bliLfmlrDnlLvluINcclxuICAgIGlmICh0aGlzLmZsb3dDaGFydENvbnRhaW5lckVSID09IG51bGwgfHwgdGhpcy5mbG93Q2hhcnRDb250YWluZXJFUi5uYXRpdmVFbGVtZW50ID09IG51bGwgfHwgdGhpcy5mbG93Q2hhcnQgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5mbG93Q2hhcnRDb250YWluZXJDbGllbnRTaXplLmNsaWVudEhlaWdodCAhPSB0aGlzLmZsb3dDaGFydENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0XHJcbiAgICAgIHx8IHRoaXMuZmxvd0NoYXJ0Q29udGFpbmVyQ2xpZW50U2l6ZS5jbGllbnRXaWR0aCAhPSB0aGlzLmZsb3dDaGFydENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGhcclxuICAgICkge1xyXG4gICAgICB0aGlzLmZsb3dDaGFydENvbnRhaW5lckNsaWVudFNpemUgPSB7XHJcbiAgICAgICAgY2xpZW50SGVpZ2h0OiB0aGlzLmZsb3dDaGFydENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgIGNsaWVudFdpZHRoOiB0aGlzLmZsb3dDaGFydENvbnRhaW5lckVSLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmZsb3dDaGFydC5yZWZyZXNoKCk7XHJcbiAgICAgIHRoaXMuZmxvd0NoYXJ0LmdyYXBoLnNpemVEaWRDaGFuZ2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZUZsb3dDaGFydChjb25maWc6IENlbGxTdHlsZUNvbmZpZykge1xyXG4gICAgdGhpcy5mbG93Q2hhcnQgPSBuZXcgRmxvd0NoYXJ0KHRoaXMuZmxvd0NoYXJ0Q29udGFpbmVyRVIubmF0aXZlRWxlbWVudCwgY29uZmlnKTtcclxuICAgIHRoaXMuZmxvd0NoYXJ0Lm5nQ29tcCA9IHRoaXM7XHJcbiAgICB0aGlzLmZsb3dDaGFydC5zZXRMYW5ndWFnZSh0aGlzLmxvY2FsZUlkKTtcclxuICB9XHJcblxyXG4gIHZpZXdGbG93Q2hhcnQoKSB7XHJcbiAgICBpZiAodGhpcy50aGVtZSA9PT0gJ3ZpZXdGbG93Q2hhcnQnKSB7XHJcbiAgICAgIHRoaXMudmlld0Zsb3dDaGFydEJ5UHJvY0luc3RJZCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wcm9jZXNzRm9yZWNhc3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRhYkNoYW5nZShldmVudDogYW55KSB7XHJcbiAgICB0aGlzLnByb2NJbnN0SWQgPSBldmVudC5uZXh0SWQ7XHJcbiAgICB0aGlzLnZpZXdGbG93Q2hhcnQoKTtcclxuICAgIHRoaXMuZmxvd0NoYXJ0LnJlbG9hZEJwbW5Nb2RlbCgpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l55yL5a2Q5rWB56iL5Zu+XHJcbiAgICogQHBhcmFtIGFjdEluc3Qg5rS75Yqo5a6e5L6LIFxyXG4gICAqIEBwYXJhbSBzdXBlclByb2Nlc3Mg54i25rWB56iLIFxyXG4gICAqL1xyXG4gIHZpZXdDaGlsZChhY3RJbnN0OiBBY3Rpdml0eUluc3RhbmNlU2xpbSwgc3VwZXJQcm9jZXNzOiBQcm9jZXNzSW5zdGFuY2UpIHtcclxuICAgIHRoaXMuc2VydmljZS5nZXRNdXRpQ2hpbGRJbnN0YW5jZShhY3RJbnN0LCBzdXBlclByb2Nlc3MuaWQpLnN1YnNjcmliZSgocmU6IFByb2Nlc3NJbnN0YW5jZVtdKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmNoYXJ0U2VydmljZSAmJiByZSAmJiByZS5sZW5ndGgpIHtcclxuICAgICAgICBpZiAocmUubGVuZ3RoID09IDEpIHsvL+WNleS4quWtkOa1geeoi1xyXG4gICAgICAgICAgdGhpcy5jaGFydFNlcnZpY2Uudmlld0Zsb3dDaGFydEJ5RGlhbG9nKHJlWzBdLmlkLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7Ly/lpJrlrp7kvovlrZDmtYHnqItcclxuICAgICAgICAgIHRoaXMuY2hhcnRTZXJ2aWNlLnZpZXdNdXRpSW5zdGFuY2VGbG93Q2hhcnRCeURpYWxvZyhyZSwgdGhpcy5tb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ+ivt+WNh+e6p+afpeeci+a1geeoi+WFrOWFseWMheWunueOsOiBlOafpeWtkOa1geeoi+WbvuWKn+iDvScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG1vZGVTd2l0Y2goKSB7XHJcbiAgICBpZiAodGhpcy5tb2RlID09PSAnY29tcGxldGUnKSB7XHJcbiAgICAgIHRoaXMubW9kZSA9ICdzaW11bGF0aW9uJztcclxuICAgICAgdGhpcy5pZkZvcmVjYXN0ID0gJ3RydWUnO1xyXG4gICAgICB0aGlzLm1vZGVCdXR0b24gPSB0aGlzLnNlcnZpY2UuZ2V0STE4blZhbHVlKCdzdGF0aWMuZmxvd2NoYXJ0LmNvbXBsZXRlJyk7XHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRGb3JlY2FzdFByb2Nlc3NCeVByb2NJbnN0SWQodGhpcy5wcm9jSW5zdElkKS5zdWJzY3JpYmUociA9PiB7XHJcbiAgICAgICAgdGhpcy5hY3RJbnN0TGlzdCA9IHIuYWN0aXZpdHlJbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgIHRoaXMudHJhbnNJbnNMaXN0ID0gci50cmFuc2l0aW9uSW5zdGFuY2VTbGltcztcclxuICAgICAgICB0aGlzLmZsb3dDaGFydC5zd2l0Y2hNb2RlKHtcclxuICAgICAgICAgIG1vZGU6ICdzaW11bGF0aW9uJyxcclxuICAgICAgICAgIGFjdGlJbnN0TGlzdDogci5hY3Rpdml0eUluc3RhbmNlU2xpbXMsXHJcbiAgICAgICAgICB0cmFuc0luc0xpc3Q6IHIudHJhbnNpdGlvbkluc3RhbmNlU2xpbXNcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1vZGUgPSAnY29tcGxldGUnO1xyXG4gICAgICB0aGlzLmlmRm9yZWNhc3QgPSAnZmFsc2UnO1xyXG4gICAgICB0aGlzLm1vZGVCdXR0b24gPSB0aGlzLnNlcnZpY2UuZ2V0STE4blZhbHVlKCdzdGF0aWMuZmxvd2NoYXJ0LnNpbXVsYXRpb24nKTtcclxuICAgICAgdGhpcy5zZXJ2aWNlLmdldENvbXBsZXRlUHJvY2Vzc0luZm9CeVByb2NJbnN0SWQodGhpcy5wcm9jSW5zdElkKS5zdWJzY3JpYmUociA9PiB7XHJcbiAgICAgICAgdGhpcy5hY3RJbnN0TGlzdCA9IHIuYWN0aXZpdHlJbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgIHRoaXMudHJhbnNJbnNMaXN0ID0gci50cmFuc2l0aW9uSW5zdGFuY2VTbGltcztcclxuICAgICAgICB0aGlzLmZsb3dDaGFydC5zd2l0Y2hNb2RlKHtcclxuICAgICAgICAgIG1vZGU6ICdjb21wbGV0ZScsXHJcbiAgICAgICAgICBhY3RpSW5zdExpc3Q6IHIuYWN0aXZpdHlJbnN0YW5jZVNsaW1zLFxyXG4gICAgICAgICAgdHJhbnNJbnNMaXN0OiByLnRyYW5zaXRpb25JbnN0YW5jZVNsaW1zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmlld0xvZ3MoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGU7XHJcbiAgICB0aGlzLmFjdERlZklkID0gZGF0YS5hY3RpRGVmSWQ7XHJcbiAgfVxyXG5cclxuICB2aWV3Rmxvd0NoYXJ0QnlQcm9jSW5zdElkKCkge1xyXG4gICAgdGhpcy5jb250ZW50ID0gJyc7XHJcbiAgICBpZiAodGhpcy5wcm9jSW5zdElkKSB7XHJcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgICBmb3JrSm9pbihcclxuICAgICAgICAgIHRoaXMuc2VydmljZS5nZXRQcm9jSW5zdGFuY2VCeUlkKHRoaXMucHJvY0luc3RJZCksXHJcbiAgICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0QnBtbk1vZGVsYnlQcm9jSW5zdElkKHRoaXMucHJvY0luc3RJZCksXHJcbiAgICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0Q29tcGxldGVQcm9jZXNzSW5mb0J5UHJvY0luc3RJZCh0aGlzLnByb2NJbnN0SWQpKVxyXG4gICAgICAgICAgLnN1YnNjcmliZSgoZGF0YTogYW55W10pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSW5zdGFuY2UgPSBkYXRhWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhWzFdKTtcclxuICAgICAgICAgICAgdGhpcy5hY3RJbnN0TGlzdCA9IGRhdGFbMl0uYWN0aXZpdHlJbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zSW5zTGlzdCA9IGRhdGFbMl0udHJhbnNpdGlvbkluc3RhbmNlU2xpbXM7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZsb3dDaGFydCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9ya0pvaW4oXHJcbiAgICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0UHJvY0luc3RhbmNlQnlJZCh0aGlzLnByb2NJbnN0SWQpLFxyXG4gICAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEJwbW5Nb2RlbGJ5UHJvY0luc3RJZCh0aGlzLnByb2NJbnN0SWQpLFxyXG4gICAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEZvcmVjYXN0UHJvY2Vzc0J5UHJvY0luc3RJZCh0aGlzLnByb2NJbnN0SWQpKVxyXG4gICAgICAgICAgLnN1YnNjcmliZSgoZGF0YTogYW55W10pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSW5zdGFuY2UgPSBkYXRhWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhWzFdKTtcclxuICAgICAgICAgICAgdGhpcy5hY3RJbnN0TGlzdCA9IGRhdGFbMl0uYWN0aXZpdHlJbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zSW5zTGlzdCA9IGRhdGFbMl0udHJhbnNpdGlvbkluc3RhbmNlU2xpbXM7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZsb3dDaGFydCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb2Nlc3NGb3JlY2FzdCgpIHtcclxuICAgIHRoaXMuY29udGVudCA9ICcnO1xyXG4gICAgdGhpcy5tb2RlID0gJ3NpbXVsYXRpb24nO1xyXG4gICAgaWYgKHRoaXMucHJvY2Vzc0ZvcmVjYXN0UGF5bG9hZC5wcm9jZXNzRGVmaW5pdGlvbklkICYmIHRoaXMucHJvY2Vzc0ZvcmVjYXN0UGF5bG9hZC5kYXRhSWQpIHtcclxuICAgICAgZm9ya0pvaW4oXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEJwbW5Nb2RlbGJ5UHJvY0RlZklkKHRoaXMucHJvY2Vzc0ZvcmVjYXN0UGF5bG9hZC5wcm9jZXNzRGVmaW5pdGlvbklkKSxcclxuICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0Rm9yZWNhc3RQcm9jZXNzQnlQYXlsb2FkKHRoaXMucHJvY2Vzc0ZvcmVjYXN0UGF5bG9hZCkpXHJcbiAgICAgICAgLnN1YnNjcmliZSgoZGF0YTogYW55W10pID0+IHtcclxuICAgICAgICAgIHRoaXMuY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGFbMF0pO1xyXG4gICAgICAgICAgdGhpcy5hY3RJbnN0TGlzdCA9IGRhdGFbMV0uYWN0aXZpdHlJbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgICAgdGhpcy50cmFuc0luc0xpc3QgPSBkYXRhWzFdLnRyYW5zaXRpb25JbnN0YW5jZVNsaW1zO1xyXG4gICAgICAgICAgdGhpcy5sb2FkRmxvd0NoYXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2aWV3Rm9ybShwcm9jSW5zdElkOiBzdHJpbmcsIGFjdEluc3RJZDogc3RyaW5nLCBiaXpJbnN0SWQ6IHN0cmluZykge1xyXG4gICAgaWYgKHByb2NJbnN0SWQpIHtcclxuICAgICAgdGhpcy5zZXJ2aWNlLmdldEZvcm1JbmZvQnlBY3RJbnN0SWQocHJvY0luc3RJZCwgYWN0SW5zdElkKS5zdWJzY3JpYmUoKHJlOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBmb3JtSW5mbyA9IHJlO1xyXG4gICAgICAgIGlmICghZm9ybUluZm8gfHwgIWZvcm1JbmZvLmFwcElkKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZS5pbmZvKCfmib7kuI3liLDljZXmja7vvIzor7fogZTns7vnrqHnkIblkZjmn6XnnIvljp/lm6DvvIEnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uczogQXBwT3B0aW9ucyA9IHtcclxuICAgICAgICAgIGFwcFR5cGU6ICdtZW51JyxcclxuICAgICAgICAgIGZ1bmNJZDogZm9ybUluZm8uYXBwSWQsXHJcbiAgICAgICAgICBhcHBJZDogJycsXHJcbiAgICAgICAgICBhcHBFbnRyYW5jZTogJycsXHJcbiAgICAgICAgICB0YWJJZDogYml6SW5zdElkLFxyXG4gICAgICAgICAgaXNOZXdUYWI6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIOS8oOW3peS9nOa1geS4iuS4i+aWh+WPguaVsFxyXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xyXG4gICAgICAgIHBhcmFtZXRlcnMuc2V0KCdwcm9jSW5zdElkJywgcHJvY0luc3RJZCk7XHJcbiAgICAgICAgcGFyYW1ldGVycy5zZXQoJ2FjdEluc3RJZCcsIGFjdEluc3RJZCk7XHJcbiAgICAgICAgZm9ybUluZm8ucGFyYW1ldGVycy5mb3JFYWNoKChpdGVtOiBhbnkpID0+XHJcbiAgICAgICAgICBwYXJhbWV0ZXJzLnNldChpdGVtLmNvZGUsIGl0ZW0udmFsdWUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBvcHRpb25zLnF1ZXJ5U3RyaW5nUGFyYW1zID0gcGFyYW1ldGVycztcclxuICAgICAgICBpZiAodGhpcy5mcmFtZXdvcmtTdmMpIHtcclxuICAgICAgICAgIHRoaXMuZnJhbWV3b3JrU3ZjLm9wZW5NZW51KG9wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBFcnJvcign5qGG5p625pyN5Yqh5LiN5a2Y5Zyo77yB5peg5rOV6IGU5p+l77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHJ5QWlmQ3JlYXRpb24ocHJvY0luc3RJZDogc3RyaW5nLCBhY3RJbnN0SWQ6IHN0cmluZywgYml6SW5zdElkOiBzdHJpbmcpIHtcclxuICAgIGlmIChwcm9jSW5zdElkKSB7XHJcbiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvYWRpbmcuc2hvdygpO1xyXG4gICAgICB0aGlzLnNlcnZpY2UucmV0cnlBaWZDcmVhdGlvbihwcm9jSW5zdElkLCBhY3RJbnN0SWQsIGJpekluc3RJZCkuc3Vic2NyaWJlKFxyXG4gICAgICAgIChyZTogYW55KSA9PiB7XHJcbiAgICAgICAgICBsLmNsb3NlKCk7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKFwi6YeN6K+V5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgdGhpcy52aWV3Rmxvd0NoYXJ0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBsLmNsb3NlKCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy90b2RvIOehruWumuW8guW4uOe7k+aehCwg55uu5YmN6YeH55So5YW85a655Y+W5YC85pa55byPXHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcihlcnIuZXJyb3IgPT0gbnVsbCA/IGVyci5tZXNzYWdlIDogKGVyci5lcnJvci5NZXNzYWdlIHx8IGVyci5lcnJvci5tZXNzYWdlIHx8IGVyci5tZXNzYWdlKSk7XHJcbiAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvYWRGbG93Q2hhcnQoKSB7XHJcbiAgICBpZiAodGhpcy5jb250ZW50KSB7XHJcbiAgICAgIHRoaXMuZmxvd0NoYXJ0LmxvYWQoe1xyXG4gICAgICAgIHByb2Nlc3NJbnN0YW5jZTogdGhpcy5wcm9jZXNzSW5zdGFuY2UsXHJcbiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LFxyXG4gICAgICAgIGFjdGlJbnN0TGlzdDogdGhpcy5hY3RJbnN0TGlzdCxcclxuICAgICAgICB0cmFuc0luc0xpc3Q6IHRoaXMudHJhbnNJbnNMaXN0LFxyXG4gICAgICAgIG1vZGU6IHRoaXMubW9kZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbGwoKSB7XHJcbiAgICB0aGlzLmNscyA9ICdkLWZsZXggZmxleC1maWxsIGgtMTAwIGYtdXRpbHMtYWJzb2x1dGUtYWxsJztcclxuICB9XHJcblxyXG59XHJcbiJdfQ==