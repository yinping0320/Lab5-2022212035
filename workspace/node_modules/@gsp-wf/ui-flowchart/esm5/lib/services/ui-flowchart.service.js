/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { from } from 'rxjs';
import { HttpService } from '@ecp-caf/caf-common';
import { translate } from './i18n/index';
import { map } from 'rxjs/operators';
var UiFlowchartService = /** @class */ (function () {
    function UiFlowchartService(httpSvc) {
        this.httpSvc = httpSvc;
    }
    /**
     * @param {?} payload
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessListByPayload = /**
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/processInstances/startProcess-simulation';
        return this.httpSvc.post(url, payload).pipe(map((/**
         * @param {?} re
         * @return {?}
         */
        function (re) { return re.procDefs; })));
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getRuntimeProcInstsByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        if (dataId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/runtimeProcInstList?dataId=" + dataId;
            return this.httpSvc.get(url);
        }
        else {
            return from(new Array());
        }
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getHistoricProcInstsByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        if (dataId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/historicProcInstList?dataId=" + dataId;
            return this.httpSvc.get(url);
        }
        else {
            return from(new Array());
        }
    };
    /**
     * 基于流程实例ID获取流程实例
     * @param procInstId 流程实例id
     */
    /**
     * 基于流程实例ID获取流程实例
     * @param {?} procInstId 流程实例id
     * @return {?}
     */
    UiFlowchartService.prototype.getProcInstanceById = /**
     * 基于流程实例ID获取流程实例
     * @param {?} procInstId 流程实例id
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId;
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例ID获取bpmnModel
     */
    /**
     * 基于流程实例ID获取bpmnModel
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getBpmnModelbyProcInstId = /**
     * 基于流程实例ID获取bpmnModel
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/bpmnModel";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程定义ID获取bpmnModel
     */
    /**
     * 基于流程定义ID获取bpmnModel
     * @param {?} procDefId
     * @return {?}
     */
    UiFlowchartService.prototype.getBpmnModelbyProcDefId = /**
     * 基于流程定义ID获取bpmnModel
     * @param {?} procDefId
     * @return {?}
     */
    function (procDefId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/procDefs/" + procDefId + "/bpmnModel";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} superActInstId
     * @param {?} superProcInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getSubProcessInstance = /**
     * @param {?} superActInstId
     * @param {?} superProcInstId
     * @return {?}
     */
    function (superActInstId, superProcInstId) {
        if (superActInstId) {
            /** @type {?} */
            var url = "/api/runtime/wf/v1.0/processInstances/subProcInst?superActInstId=" + superActInstId + "&superProcInstId=" + superProcInstId;
            return this.httpSvc.get(url);
        }
    };
    /**
     * 获取所有包含预解析的流程实例信息
     */
    /**
     * 获取所有包含预解析的流程实例信息
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessByProcInstId = /**
     * 获取所有包含预解析的流程实例信息
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/forecastProcess";
        return this.httpSvc.get(url);
    };
    /**
     * 获取流程预测数据
     */
    /**
     * 获取流程预测数据
     * @param {?} payload
     * @return {?}
     */
    UiFlowchartService.prototype.getForecastProcessByPayload = /**
     * 获取流程预测数据
     * @param {?} payload
     * @return {?}
     */
    function (payload) {
        /** @type {?} */
        var url = '/api/runtime/wf/v1.0/processInstances/forecastProcess';
        return this.httpSvc.post(url, payload);
    };
    /**
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getCompleteProcessInfoByProcInstId = /**
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/flowChartInfo";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例Id获取所有活动实例
     * @param procInstId procInstId
     */
    /**
     * 基于流程实例Id获取所有活动实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getAllActiInstsbyProcInstId = /**
     * 基于流程实例Id获取所有活动实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/activityInstanceSlims";
        return this.httpSvc.get(url);
    };
    /**
     * 基于流程实例ID获取所有的流转实例
     * @param procInstId procInstId
     */
    /**
     * 基于流程实例ID获取所有的流转实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getTransitionInstanceSlimsByProcInstId = /**
     * 基于流程实例ID获取所有的流转实例
     * @param {?} procInstId procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/transitionInstanceSlims";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getFormInfoByProcInstId = /**
     * @param {?} procInstId
     * @return {?}
     */
    function (procInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/formInfo";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @return {?}
     */
    UiFlowchartService.prototype.getFormInfoByActInstId = /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @return {?}
     */
    function (procInstId, actInstId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/formInfo";
        if (actInstId) {
            url += "?actInstId=" + actInstId;
        }
        return this.httpSvc.get(url);
    };
    /**
     * 获取审批日志信息
     * @param ProcInstId ProcInstId
     * 新改造的接口
     */
    /**
     * 获取审批日志信息
     * @param {?} procInstId
     * @param {?=} activityDefinitionId
     * @return {?}
     */
    UiFlowchartService.prototype.getWorkItemLogs = /**
     * 获取审批日志信息
     * @param {?} procInstId
     * @param {?=} activityDefinitionId
     * @return {?}
     */
    function (procInstId, activityDefinitionId) {
        /** @type {?} */
        var logUrl = activityDefinitionId ?
            "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/logs?activityDefinitionId=" + activityDefinitionId :
            "/api/runtime/wf/v1.0/processInstances/" + procInstId + "/logs";
        return this.httpSvc.get(logUrl);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    UiFlowchartService.prototype.getI18nValue = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!name) {
            return '';
        }
        /** @type {?} */
        var defaultLang = localStorage.getItem('languageCode');
        /** @type {?} */
        var langData = defaultLang ? translate[defaultLang] : translate['zh-CHS'];
        /** @type {?} */
        var resultVal = '';
        if (name.indexOf('.') === -1) {
            resultVal = langData[name];
        }
        else {
            resultVal = name.split('.').reduce((/**
             * @param {?} obj
             * @param {?} key
             * @return {?}
             */
            function (obj, key) {
                if (obj) {
                    return obj[key];
                }
                else {
                    return null;
                }
            }), langData);
        }
        return resultVal;
    };
    /**
     * @param {?} processId
     * @return {?}
     */
    UiFlowchartService.prototype.getProcessInstanceById = /**
     * @param {?} processId
     * @return {?}
     */
    function (processId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/" + processId;
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} dataId
     * @return {?}
     */
    UiFlowchartService.prototype.getProcInstIdByDataId = /**
     * @param {?} dataId
     * @return {?}
     */
    function (dataId) {
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/procInstId?bizInstId=" + dataId;
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    UiFlowchartService.prototype.retryAifCreation = /**
     * @param {?} procInstId
     * @param {?} actInstId
     * @param {?} bizInstId
     * @return {?}
     */
    function (procInstId, actInstId, bizInstId) {
        return this.httpSvc.post("/api/runtime/wf/v1.0/aifactivityinstance/retry", actInstId);
    };
    /**
     * 是否是外部流程第三方的任务
     * @param processInstanceId 流程实例ID
     */
    /**
     * 是否是外部流程第三方的任务
     * @param {?} processInstanceId 流程实例ID
     * @return {?}
     */
    UiFlowchartService.prototype.ifThirdTask = /**
     * 是否是外部流程第三方的任务
     * @param {?} processInstanceId 流程实例ID
     * @return {?}
     */
    function (processInstanceId) {
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/instances/wfExternalProcess?processInstanceId=" + processInstanceId;
        return this.httpSvc.get(url);
    };
    /**
     * 获取查看共享流程图的相关参数
     * @param bizId 单据内码
     */
    /**
     * 获取查看共享流程图的相关参数
     * @param {?} bizId 单据内码
     * @return {?}
     */
    UiFlowchartService.prototype.getFsParamsByBizId = /**
     * 获取查看共享流程图的相关参数
     * @param {?} bizId 单据内码
     * @return {?}
     */
    function (bizId) {
        /** @type {?} */
        var url = "/api/runtime/task/v1.0/tasks/third/bizId?bizId=" + bizId;
        return this.httpSvc.get(url);
    };
    /**
     * 获取共享查看流程图的URL
     * @param params 参数
     */
    /**
     * 获取共享查看流程图的URL
     * @param {?} params 参数
     * @return {?}
     */
    UiFlowchartService.prototype.viewFsProcessNew = /**
     * 获取共享查看流程图的URL
     * @param {?} params 参数
     * @return {?}
     */
    function (params) {
        /** @type {?} */
        var url = "/api/fssp/ssp/v1.0/mybill/fswybz/viewprocess";
        return this.httpSvc.post(url, params);
    };
    /**
     * @return {?}
     */
    UiFlowchartService.prototype.getFlowChartStyleConfig = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var url = "/platform/runtime/common/web/@gsp-wf/wf-process-editor/config/cell-style-config.json";
        return this.httpSvc.get(url);
    };
    /**
     * 获取多实例子流程
     * @param actInst 活动实例
     * @param superProcInstId 父流程实例id
     * @returns
     */
    /**
     * 获取多实例子流程
     * @param {?} actInst 活动实例
     * @param {?} superProcInstId 父流程实例id
     * @return {?}
     */
    UiFlowchartService.prototype.getMutiChildInstance = /**
     * 获取多实例子流程
     * @param {?} actInst 活动实例
     * @param {?} superProcInstId 父流程实例id
     * @return {?}
     */
    function (actInst, superProcInstId) {
        /** @type {?} */
        var actInstId = actInst.activityInstanceId;
        /** @type {?} */
        var isMultiInstanceRoot = actInst.multiInstanceRoot || false;
        /** @type {?} */
        var url = "/api/runtime/wf/v1.0/processInstances/subProcInstList?actInstId=" + actInstId + "&isMultiInstanceRoot=" + isMultiInstanceRoot + "&superProcInstId=" + superProcInstId;
        return this.httpSvc.get(url);
    };
    UiFlowchartService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    UiFlowchartService.ctorParameters = function () { return [
        { type: HttpService }
    ]; };
    return UiFlowchartService;
}());
export { UiFlowchartService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    UiFlowchartService.prototype.httpSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWktZmxvd2NoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3VpLWZsb3djaGFydC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91aS1mbG93Y2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQWMsSUFBSSxFQUFNLE1BQU0sTUFBTSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXpDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUdyQztJQUVFLDRCQUFvQixPQUFvQjtRQUFwQixZQUFPLEdBQVAsT0FBTyxDQUFhO0lBQUksQ0FBQzs7Ozs7SUFFN0MsNERBQStCOzs7O0lBQS9CLFVBQWdDLE9BQStCOztZQUN2RCxHQUFHLEdBQUcsK0RBQStEO1FBQzNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FDekMsR0FBRzs7OztRQUFDLFVBQUMsRUFBTyxJQUFLLE9BQUEsRUFBRSxDQUFDLFFBQVEsRUFBWCxDQUFXLEVBQUMsQ0FDOUIsQ0FBQztJQUNKLENBQUM7Ozs7O0lBRUQsd0RBQTJCOzs7O0lBQTNCLFVBQTRCLE1BQWM7UUFDeEMsSUFBSSxNQUFNLEVBQUU7O2dCQUNKLEdBQUcsR0FBRyxzRUFBb0UsTUFBUTtZQUN4RixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzlCO2FBQU07WUFDTCxPQUFPLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUM7U0FDMUI7SUFDSCxDQUFDOzs7OztJQUVELHlEQUE0Qjs7OztJQUE1QixVQUE2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QUM7Ozs7SUFHRCxvREFBdUI7OztJQUF2Qjs7WUFDUSxHQUFHLEdBQUcsc0ZBQXNGO1FBQ2xHLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7OztPQUtHOzs7Ozs7O0lBQ0gsaURBQW9COzs7Ozs7SUFBcEIsVUFBcUIsT0FBNkIsRUFBRSxlQUF1Qjs7WUFDbkUsU0FBUyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0I7O1lBQ3RDLG1CQUFtQixHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxLQUFLOztZQUMxRCxHQUFHLEdBQUcscUVBQW1FLFNBQVMsNkJBQXdCLG1CQUFtQix5QkFBb0IsZUFBaUI7UUFDdEssT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDOztnQkF6TUYsVUFBVTs7OztnQkFORixXQUFXOztJQWlOcEIseUJBQUM7Q0FBQSxBQTNNRCxJQTJNQztTQTFNWSxrQkFBa0I7Ozs7OztJQUNqQixxQ0FBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20sIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IHRyYW5zbGF0ZSB9IGZyb20gJy4vaTE4bi9pbmRleCc7XHJcbmltcG9ydCB7IEZvcmVjYXN0UHJvY2Vzc1BheWxvYWQgfSBmcm9tICcuLi9lbnRpdHkvZm9yZWNhc3QtcHJvY2Vzcy1wYXlsb2FkJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUluc3RhbmNlU2xpbSB9IGZyb20gJy4uL2Zsb3ctY2hhcnQvZW50aXR5JztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFVpRmxvd2NoYXJ0U2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwU3ZjOiBIdHRwU2VydmljZSkgeyB9XHJcblxyXG4gIGdldEZvcmVjYXN0UHJvY2Vzc0xpc3RCeVBheWxvYWQocGF5bG9hZDogRm9yZWNhc3RQcm9jZXNzUGF5bG9hZCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy9zdGFydFByb2Nlc3Mtc2ltdWxhdGlvbic7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBwYXlsb2FkKS5waXBlKFxyXG4gICAgICBtYXAoKHJlOiBhbnkpID0+IHJlLnByb2NEZWZzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFJ1bnRpbWVQcm9jSW5zdHNCeURhdGFJZChkYXRhSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAoZGF0YUlkKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzL3J1bnRpbWVQcm9jSW5zdExpc3Q/ZGF0YUlkPSR7ZGF0YUlkfWA7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZnJvbShuZXcgQXJyYXkoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRIaXN0b3JpY1Byb2NJbnN0c0J5RGF0YUlkKGRhdGFJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmIChkYXRhSWQpIHtcclxuICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvaGlzdG9yaWNQcm9jSW5zdExpc3Q/ZGF0YUlkPSR7ZGF0YUlkfWA7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZnJvbShuZXcgQXJyYXkoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDln7rkuo7mtYHnqIvlrp7kvotJROiOt+WPlua1geeoi+WunuS+i1xyXG4gICAqIEBwYXJhbSBwcm9jSW5zdElkIOa1geeoi+WunuS+i2lkXHJcbiAgICovXHJcbiAgZ2V0UHJvY0luc3RhbmNlQnlJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfWA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDln7rkuo7mtYHnqIvlrp7kvotJROiOt+WPlmJwbW5Nb2RlbFxyXG4gICAqL1xyXG4gIGdldEJwbW5Nb2RlbGJ5UHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9icG1uTW9kZWxgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWfuuS6jua1geeoi+WumuS5iUlE6I635Y+WYnBtbk1vZGVsXHJcbiAgICovXHJcbiAgZ2V0QnBtbk1vZGVsYnlQcm9jRGVmSWQocHJvY0RlZklkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2NEZWZzLyR7cHJvY0RlZklkfS9icG1uTW9kZWxgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIGdldFN1YlByb2Nlc3NJbnN0YW5jZShzdXBlckFjdEluc3RJZDogc3RyaW5nLCBzdXBlclByb2NJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAoc3VwZXJBY3RJbnN0SWQpIHtcclxuICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvc3ViUHJvY0luc3Q/c3VwZXJBY3RJbnN0SWQ9JHtzdXBlckFjdEluc3RJZH0mc3VwZXJQcm9jSW5zdElkPSR7c3VwZXJQcm9jSW5zdElkfWA7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmiYDmnInljIXlkKvpooTop6PmnpDnmoTmtYHnqIvlrp7kvovkv6Hmga9cclxuICAgKi9cclxuICBnZXRGb3JlY2FzdFByb2Nlc3NCeVByb2NJbnN0SWQocHJvY0luc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vZm9yZWNhc3RQcm9jZXNzYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmtYHnqIvpooTmtYvmlbDmja5cclxuICAgKi9cclxuICBnZXRGb3JlY2FzdFByb2Nlc3NCeVBheWxvYWQocGF5bG9hZDogYW55KSB7XHJcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy9mb3JlY2FzdFByb2Nlc3MnO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICBnZXRDb21wbGV0ZVByb2Nlc3NJbmZvQnlQcm9jSW5zdElkKHByb2NJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy8ke3Byb2NJbnN0SWR9L2Zsb3dDaGFydEluZm9gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWfuuS6jua1geeoi+WunuS+i0lk6I635Y+W5omA5pyJ5rS75Yqo5a6e5L6LXHJcbiAgICogQHBhcmFtIHByb2NJbnN0SWQgcHJvY0luc3RJZFxyXG4gICAqL1xyXG4gIGdldEFsbEFjdGlJbnN0c2J5UHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9hY3Rpdml0eUluc3RhbmNlU2xpbXNgO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWfuuS6jua1geeoi+WunuS+i0lE6I635Y+W5omA5pyJ55qE5rWB6L2s5a6e5L6LXHJcbiAgICogQHBhcmFtIHByb2NJbnN0SWQgcHJvY0luc3RJZFxyXG4gICAqL1xyXG4gIGdldFRyYW5zaXRpb25JbnN0YW5jZVNsaW1zQnlQcm9jSW5zdElkKHByb2NJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy8ke3Byb2NJbnN0SWR9L3RyYW5zaXRpb25JbnN0YW5jZVNsaW1zYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtSW5mb0J5UHJvY0luc3RJZChwcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9mb3JtSW5mb2A7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rm9ybUluZm9CeUFjdEluc3RJZChwcm9jSW5zdElkOiBzdHJpbmcsIGFjdEluc3RJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGxldCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy8ke3Byb2NJbnN0SWR9L2Zvcm1JbmZvYDtcclxuICAgIGlmIChhY3RJbnN0SWQpIHtcclxuICAgICAgdXJsICs9IGA/YWN0SW5zdElkPSR7YWN0SW5zdElkfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5a6h5om55pel5b+X5L+h5oGvXHJcbiAgICogQHBhcmFtIFByb2NJbnN0SWQgUHJvY0luc3RJZFxyXG4gICAqIOaWsOaUuemAoOeahOaOpeWPo1xyXG4gICAqL1xyXG4gIGdldFdvcmtJdGVtTG9ncyhwcm9jSW5zdElkOiBzdHJpbmcsIGFjdGl2aXR5RGVmaW5pdGlvbklkPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IGxvZ1VybCA9IGFjdGl2aXR5RGVmaW5pdGlvbklkID9cclxuICAgICAgYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jSW5zdElkfS9sb2dzP2FjdGl2aXR5RGVmaW5pdGlvbklkPSR7YWN0aXZpdHlEZWZpbml0aW9uSWR9YCA6XHJcbiAgICAgIGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9wcm9jZXNzSW5zdGFuY2VzLyR7cHJvY0luc3RJZH0vbG9nc2A7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldChsb2dVcmwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0STE4blZhbHVlKG5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKCFuYW1lKSB7IHJldHVybiAnJzsgfVxyXG4gICAgY29uc3QgZGVmYXVsdExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJyk7XHJcbiAgICBjb25zdCBsYW5nRGF0YSA9IGRlZmF1bHRMYW5nID8gdHJhbnNsYXRlW2RlZmF1bHRMYW5nXSA6IHRyYW5zbGF0ZVsnemgtQ0hTJ107XHJcbiAgICBsZXQgcmVzdWx0VmFsID0gJyc7XHJcbiAgICBpZiAobmFtZS5pbmRleE9mKCcuJykgPT09IC0xKSB7XHJcbiAgICAgIHJlc3VsdFZhbCA9IGxhbmdEYXRhW25hbWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0VmFsID0gbmFtZS5zcGxpdCgnLicpLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgbGFuZ0RhdGEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFZhbDtcclxuICB9XHJcblxyXG4gIGdldFByb2Nlc3NJbnN0YW5jZUJ5SWQocHJvY2Vzc0lkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvJHtwcm9jZXNzSWR9YDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9jSW5zdElkQnlEYXRhSWQoZGF0YUlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvcHJvY0luc3RJZD9iaXpJbnN0SWQ9JHtkYXRhSWR9YDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICByZXRyeUFpZkNyZWF0aW9uKHByb2NJbnN0SWQ6IHN0cmluZywgYWN0SW5zdElkOiBzdHJpbmcsIGJpekluc3RJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QoXCIvYXBpL3J1bnRpbWUvd2YvdjEuMC9haWZhY3Rpdml0eWluc3RhbmNlL3JldHJ5XCIsIGFjdEluc3RJZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKbmmK/lpJbpg6jmtYHnqIvnrKzkuInmlrnnmoTku7vliqFcclxuICAgKiBAcGFyYW0gcHJvY2Vzc0luc3RhbmNlSWQg5rWB56iL5a6e5L6LSURcclxuICAgKi9cclxuICBpZlRoaXJkVGFzayhwcm9jZXNzSW5zdGFuY2VJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL2luc3RhbmNlcy93ZkV4dGVybmFsUHJvY2Vzcz9wcm9jZXNzSW5zdGFuY2VJZD0ke3Byb2Nlc3NJbnN0YW5jZUlkfWA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5p+l55yL5YWx5Lqr5rWB56iL5Zu+55qE55u45YWz5Y+C5pWwXHJcbiAgICogQHBhcmFtIGJpeklkIOWNleaNruWGheeggVxyXG4gICAqL1xyXG4gIGdldEZzUGFyYW1zQnlCaXpJZChiaXpJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvdGFzay92MS4wL3Rhc2tzL3RoaXJkL2JpeklkP2JpeklkPSR7Yml6SWR9YDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blhbHkuqvmn6XnnIvmtYHnqIvlm77nmoRVUkxcclxuICAgKiBAcGFyYW0gcGFyYW1zIOWPguaVsFxyXG4gICAqL1xyXG4gIHZpZXdGc1Byb2Nlc3NOZXcocGFyYW1zOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgdXJsID0gYC9hcGkvZnNzcC9zc3AvdjEuMC9teWJpbGwvZnN3eWJ6L3ZpZXdwcm9jZXNzYDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIHBhcmFtcyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0Rmxvd0NoYXJ0U3R5bGVDb25maWcoKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGNvbnN0IHVybCA9IGAvcGxhdGZvcm0vcnVudGltZS9jb21tb24vd2ViL0Bnc3Atd2Yvd2YtcHJvY2Vzcy1lZGl0b3IvY29uZmlnL2NlbGwtc3R5bGUtY29uZmlnLmpzb25gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWkmuWunuS+i+WtkOa1geeoi1xyXG4gICAqIEBwYXJhbSBhY3RJbnN0IOa0u+WKqOWunuS+i1xyXG4gICAqIEBwYXJhbSBzdXBlclByb2NJbnN0SWQg54i25rWB56iL5a6e5L6LaWRcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBnZXRNdXRpQ2hpbGRJbnN0YW5jZShhY3RJbnN0OiBBY3Rpdml0eUluc3RhbmNlU2xpbSwgc3VwZXJQcm9jSW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgYWN0SW5zdElkID0gYWN0SW5zdC5hY3Rpdml0eUluc3RhbmNlSWQ7XHJcbiAgICBjb25zdCBpc011bHRpSW5zdGFuY2VSb290ID0gYWN0SW5zdC5tdWx0aUluc3RhbmNlUm9vdCB8fCBmYWxzZTsgXHJcbiAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3Byb2Nlc3NJbnN0YW5jZXMvc3ViUHJvY0luc3RMaXN0P2FjdEluc3RJZD0ke2FjdEluc3RJZH0maXNNdWx0aUluc3RhbmNlUm9vdD0ke2lzTXVsdGlJbnN0YW5jZVJvb3R9JnN1cGVyUHJvY0luc3RJZD0ke3N1cGVyUHJvY0luc3RJZH1gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==