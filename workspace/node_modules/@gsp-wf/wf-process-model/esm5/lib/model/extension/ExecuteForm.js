/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { BpmnModel, BpmnModelHelper, ExtensionElement, ExtensionMethod } from "@edp-pmf/bpmn-model";
import { ActualParameter } from "../parameter/WFActualParameter";
var ExecuteForm = /** @class */ (function (_super) {
    tslib_1.__extends(ExecuteForm, _super);
    function ExecuteForm(model, id, name, actualParameters) {
        var _this = _super.call(this, model) || this;
        _this.ClrTypeID = ExecuteForm.Clr_Type_ID;
        _this.Id = id || '';
        _this.Name = name || '';
        _this.ActualParameters = actualParameters || [];
        return _this;
    }
    /**
     * @return {?}
     */
    ExecuteForm.prototype.NewInstance = /**
     * @return {?}
     */
    function () {
        return new ExecuteForm(this.Model);
    };
    /**
     * @protected
     * @return {?}
     */
    ExecuteForm.prototype.ResetBeforeLoadFrom = /**
     * @protected
     * @return {?}
     */
    function () {
        _super.prototype.ResetBeforeLoadFrom.call(this);
        this.FormType = null;
        this.Id = null;
        this.Name = null;
        this.ActualParameters = [];
        this.ComponentId = null;
        this.formFormatId = null;
        this.formatConfigId = null;
        this.TerminalType = TerminalType.PC;
    };
    /**
     * @return {?}
     */
    ExecuteForm.prototype.ConvertToJsonObject = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var obj = _super.prototype.ConvertToJsonObject.call(this);
        BpmnModelHelper.SetAttributeValue(obj, "FormType", this.FormType);
        BpmnModelHelper.SetAttributeValue(obj, "Id", this.Id);
        BpmnModelHelper.SetAttributeValue(obj, "Name", this.Name);
        BpmnModelHelper.SetAttributeValue(obj, "ComponentId", this.ComponentId);
        BpmnModelHelper.SetAttributeValue(obj, "TerminalType", this.TerminalType);
        BpmnModelHelper.SetAttributeValue(obj, "FormFormatId", this.formFormatId);
        BpmnModelHelper.SetAttributeValue(obj, "FormatConfigId", this.formatConfigId);
        /** @type {?} */
        var actualParametersElements = [];
        if (this.ActualParameters !== null && this.ActualParameters.length > 0) {
            this.ActualParameters.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                actualParametersElements.push(item.ConvertToJsonObject());
            }));
        }
        BpmnModelHelper.SetAttributeValue(obj, "ActualParameters", actualParametersElements);
        return obj;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    ExecuteForm.prototype.LoadFromJsonObject = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var _this = this;
        _super.prototype.LoadFromJsonObject.call(this, obj);
        this.FormType = obj.FormType;
        this.Id = obj.Id;
        this.Name = obj.Name;
        this.ComponentId = obj.ComponentId;
        this.TerminalType = (/** @type {?} */ (obj.TerminalType));
        this.formFormatId = ExtensionMethod.GetAttributeValue4String(obj, "FormFormatId");
        this.formatConfigId = ExtensionMethod.GetAttributeValue4String(obj, "FormatConfigId");
        /** @type {?} */
        var actualParameters = (/** @type {?} */ (obj.ActualParameters));
        if (actualParameters !== null && actualParameters.length > 0) {
            actualParameters.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var actualParameter = new ActualParameter(_this.Model);
                actualParameter.LoadFromJsonObject(item);
                _this.ActualParameters.push(actualParameter);
            }));
        }
    };
    /**
     * @return {?}
     */
    ExecuteForm.prototype.clone = /**
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var executeForm = new ExecuteForm(this.Model);
        executeForm.Id = BpmnModelHelper.GenerateElementId();
        executeForm.Name = this.Name;
        executeForm.FormType = this.FormType;
        executeForm.formFormatId = this.formFormatId;
        executeForm.formatConfigId = this.formatConfigId;
        executeForm.TerminalType = this.TerminalType;
        executeForm.ComponentId = this.ComponentId;
        executeForm.ActualParameters = new Array();
        if (this.ActualParameters && this.ActualParameters.length > 0) {
            try {
                for (var _b = tslib_1.__values(this.ActualParameters), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var p = _c.value;
                    /** @type {?} */
                    var parameter = p.clone();
                    executeForm.ActualParameters.push(parameter);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        return executeForm;
    };
    ExecuteForm.Clr_Type_ID = "wf.ExecuteForm";
    return ExecuteForm;
}(ExtensionElement));
export { ExecuteForm };
if (false) {
    /** @type {?} */
    ExecuteForm.Clr_Type_ID;
    /** @type {?} */
    ExecuteForm.prototype.ClrTypeID;
    /** @type {?} */
    ExecuteForm.prototype.FormType;
    /** @type {?} */
    ExecuteForm.prototype.Id;
    /** @type {?} */
    ExecuteForm.prototype.Name;
    /** @type {?} */
    ExecuteForm.prototype.ComponentId;
    /** @type {?} */
    ExecuteForm.prototype.TerminalType;
    /** @type {?} */
    ExecuteForm.prototype.ActualParameters;
    /** @type {?} */
    ExecuteForm.prototype.formFormatId;
    /** @type {?} */
    ExecuteForm.prototype.formatConfigId;
}
BpmnModelHelper.RegisterElementType(new ExecuteForm(new BpmnModel()));
/** @enum {string} */
var TerminalType = {
    PC: 'PC',
    MOBILE: 'MOBILE',
};
export { TerminalType };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhlY3V0ZUZvcm0uanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWwvIiwic291cmNlcyI6WyJsaWIvbW9kZWwvZXh0ZW5zaW9uL0V4ZWN1dGVGb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDcEcsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRWpFO0lBQWlDLHVDQUFnQjtJQVE3QyxxQkFBWSxLQUFnQixFQUFFLEVBQVcsRUFBRSxJQUFhLEVBQUUsZ0JBQW9DO1FBQTlGLFlBQ0ksa0JBQU0sS0FBSyxDQUFDLFNBSWY7UUFYUSxlQUFTLEdBQVcsV0FBVyxDQUFDLFdBQVcsQ0FBQztRQVFqRCxLQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDbkIsS0FBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLEtBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsSUFBSSxFQUFFLENBQUM7O0lBQ25ELENBQUM7Ozs7SUFURCxpQ0FBVzs7O0lBQVg7UUFDSSxPQUFPLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QyxDQUFDOzs7OztJQXFCUyx5Q0FBbUI7Ozs7SUFBN0I7UUFDSSxpQkFBTSxtQkFBbUIsV0FBRSxDQUFDO1FBRTVCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2YsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMs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QUM5QyxnQ0FBcUQ7O0lBYXJELCtCQUFpQjs7SUFDakIseUJBQVc7O0lBQ1gsMkJBQWE7O0lBRWIsa0NBQW9COztJQUNwQixtQ0FBMkI7O0lBRTNCLHVDQUFvQzs7SUFFcEMsbUNBQXFCOztJQUNyQixxQ0FBdUI7O0FBK0UzQixlQUFlLENBQUMsbUJBQW1CLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7OztJQUdsRSxJQUFLLElBQUk7SUFDVCxRQUFTLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCcG1uTW9kZWwsIEJwbW5Nb2RlbEhlbHBlciwgRXh0ZW5zaW9uRWxlbWVudCwgRXh0ZW5zaW9uTWV0aG9kIH0gZnJvbSBcIkBlZHAtcG1mL2JwbW4tbW9kZWxcIjtcclxuaW1wb3J0IHsgQWN0dWFsUGFyYW1ldGVyIH0gZnJvbSBcIi4uL3BhcmFtZXRlci9XRkFjdHVhbFBhcmFtZXRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV4ZWN1dGVGb3JtIGV4dGVuZHMgRXh0ZW5zaW9uRWxlbWVudCB7XHJcbiAgICBzdGF0aWMgQ2xyX1R5cGVfSUQ6IHN0cmluZyA9IFwid2YuRXhlY3V0ZUZvcm1cIjtcclxuICAgIHJlYWRvbmx5IENsclR5cGVJRDogc3RyaW5nID0gRXhlY3V0ZUZvcm0uQ2xyX1R5cGVfSUQ7XHJcblxyXG4gICAgTmV3SW5zdGFuY2UoKTogRXhlY3V0ZUZvcm0ge1xyXG4gICAgICAgIHJldHVybiBuZXcgRXhlY3V0ZUZvcm0odGhpcy5Nb2RlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9kZWw6IEJwbW5Nb2RlbCwgaWQ/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcsIGFjdHVhbFBhcmFtZXRlcnM/OiBBY3R1YWxQYXJhbWV0ZXJbXSkge1xyXG4gICAgICAgIHN1cGVyKG1vZGVsKTtcclxuICAgICAgICB0aGlzLklkID0gaWQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy5OYW1lID0gbmFtZSB8fCAnJztcclxuICAgICAgICB0aGlzLkFjdHVhbFBhcmFtZXRlcnMgPSBhY3R1YWxQYXJhbWV0ZXJzIHx8IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIEZvcm1UeXBlOiBzdHJpbmc7XHJcbiAgICBJZDogc3RyaW5nO1xyXG4gICAgTmFtZTogc3RyaW5nO1xyXG5cclxuICAgIENvbXBvbmVudElkOiBzdHJpbmc7XHJcbiAgICBUZXJtaW5hbFR5cGU6IFRlcm1pbmFsVHlwZTtcclxuXHJcbiAgICBBY3R1YWxQYXJhbWV0ZXJzOiBBY3R1YWxQYXJhbWV0ZXJbXTtcclxuXHJcbiAgICBmb3JtRm9ybWF0SWQ6IHN0cmluZztcclxuICAgIGZvcm1hdENvbmZpZ0lkOiBzdHJpbmc7XHJcblxyXG4gICAgcHJvdGVjdGVkIFJlc2V0QmVmb3JlTG9hZEZyb20oKSB7XHJcbiAgICAgICAgc3VwZXIuUmVzZXRCZWZvcmVMb2FkRnJvbSgpO1xyXG5cclxuICAgICAgICB0aGlzLkZvcm1UeXBlID0gbnVsbDtcclxuICAgICAgICB0aGlzLklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLk5hbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuQWN0dWFsUGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuQ29tcG9uZW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZm9ybUZvcm1hdElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZvcm1hdENvbmZpZ0lkID0gbnVsbDtcclxuICAgICAgICB0aGlzLlRlcm1pbmFsVHlwZSA9IFRlcm1pbmFsVHlwZS5QQztcclxuICAgIH1cclxuXHJcbiAgICBDb252ZXJ0VG9Kc29uT2JqZWN0KCk6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IHN1cGVyLkNvbnZlcnRUb0pzb25PYmplY3QoKTtcclxuXHJcbiAgICAgICAgQnBtbk1vZGVsSGVscGVyLlNldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJGb3JtVHlwZVwiLCB0aGlzLkZvcm1UeXBlKTtcclxuICAgICAgICBCcG1uTW9kZWxIZWxwZXIuU2V0QXR0cmlidXRlVmFsdWUob2JqLCBcIklkXCIsIHRoaXMuSWQpO1xyXG4gICAgICAgIEJwbW5Nb2RlbEhlbHBlci5TZXRBdHRyaWJ1dGVWYWx1ZShvYmosIFwiTmFtZVwiLCB0aGlzLk5hbWUpO1xyXG4gICAgICAgIEJwbW5Nb2RlbEhlbHBlci5TZXRBdHRyaWJ1dGVWYWx1ZShvYmosIFwiQ29tcG9uZW50SWRcIiwgdGhpcy5Db21wb25lbnRJZCk7XHJcbiAgICAgICAgQnBtbk1vZGVsSGVscGVyLlNldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJUZXJtaW5hbFR5cGVcIiwgdGhpcy5UZXJtaW5hbFR5cGUpO1xyXG5cclxuICAgICAgICBCcG1uTW9kZWxIZWxwZXIuU2V0QXR0cmlidXRlVmFsdWUob2JqLCBcIkZvcm1Gb3JtYXRJZFwiLCB0aGlzLmZvcm1Gb3JtYXRJZCk7XHJcbiAgICAgICAgQnBtbk1vZGVsSGVscGVyLlNldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJGb3JtYXRDb25maWdJZFwiLCB0aGlzLmZvcm1hdENvbmZpZ0lkKTtcclxuXHJcbiAgICAgICAgbGV0IGFjdHVhbFBhcmFtZXRlcnNFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLkFjdHVhbFBhcmFtZXRlcnMgIT09IG51bGwgJiYgdGhpcy5BY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5BY3R1YWxQYXJhbWV0ZXJzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGFjdHVhbFBhcmFtZXRlcnNFbGVtZW50cy5wdXNoKGl0ZW0uQ29udmVydFRvSnNvbk9iamVjdCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEJwbW5Nb2RlbEhlbHBlci5TZXRBdHRyaWJ1dGVWYWx1ZShvYmosIFwiQWN0dWFsUGFyYW1ldGVyc1wiLCBhY3R1YWxQYXJhbWV0ZXJzRWxlbWVudHMpO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIExvYWRGcm9tSnNvbk9iamVjdChvYmo6IGFueSkge1xyXG4gICAgICAgIHN1cGVyLkxvYWRGcm9tSnNvbk9iamVjdChvYmopO1xyXG5cclxuICAgICAgICB0aGlzLkZvcm1UeXBlID0gb2JqLkZvcm1UeXBlO1xyXG4gICAgICAgIHRoaXMuSWQgPSBvYmouSWQ7XHJcbiAgICAgICAgdGhpcy5OYW1lID0gb2JqLk5hbWU7XHJcbiAgICAgICAgdGhpcy5Db21wb25lbnRJZCA9IG9iai5Db21wb25lbnRJZDtcclxuICAgICAgICB0aGlzLlRlcm1pbmFsVHlwZSA9IG9iai5UZXJtaW5hbFR5cGUgYXMgVGVybWluYWxUeXBlO1xyXG5cclxuICAgICAgICB0aGlzLmZvcm1Gb3JtYXRJZCA9IEV4dGVuc2lvbk1ldGhvZC5HZXRBdHRyaWJ1dGVWYWx1ZTRTdHJpbmcob2JqLCBcIkZvcm1Gb3JtYXRJZFwiKTtcclxuICAgICAgICB0aGlzLmZvcm1hdENvbmZpZ0lkID0gRXh0ZW5zaW9uTWV0aG9kLkdldEF0dHJpYnV0ZVZhbHVlNFN0cmluZyhvYmosIFwiRm9ybWF0Q29uZmlnSWRcIik7XHJcblxyXG4gICAgICAgIGxldCBhY3R1YWxQYXJhbWV0ZXJzID0gb2JqLkFjdHVhbFBhcmFtZXRlcnMgYXMgQXJyYXk8YW55PjtcclxuICAgICAgICBpZiAoYWN0dWFsUGFyYW1ldGVycyAhPT0gbnVsbCAmJiBhY3R1YWxQYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYWN0dWFsUGFyYW1ldGVycy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0dWFsUGFyYW1ldGVyOiBBY3R1YWxQYXJhbWV0ZXIgPSBuZXcgQWN0dWFsUGFyYW1ldGVyKHRoaXMuTW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgYWN0dWFsUGFyYW1ldGVyLkxvYWRGcm9tSnNvbk9iamVjdChpdGVtKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuQWN0dWFsUGFyYW1ldGVycy5wdXNoKGFjdHVhbFBhcmFtZXRlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9uZSgpOiBFeGVjdXRlRm9ybSB7XHJcbiAgICAgICAgY29uc3QgZXhlY3V0ZUZvcm0gPSBuZXcgRXhlY3V0ZUZvcm0odGhpcy5Nb2RlbCk7XHJcbiAgICAgICAgZXhlY3V0ZUZvcm0uSWQgPSBCcG1uTW9kZWxIZWxwZXIuR2VuZXJhdGVFbGVtZW50SWQoKTtcclxuICAgICAgICBleGVjdXRlRm9ybS5OYW1lID0gdGhpcy5OYW1lO1xyXG4gICAgICAgIGV4ZWN1dGVGb3JtLkZvcm1UeXBlID0gdGhpcy5Gb3JtVHlwZTtcclxuICAgICAgICBleGVjdXRlRm9ybS5mb3JtRm9ybWF0SWQgPSB0aGlzLmZvcm1Gb3JtYXRJZDtcclxuICAgICAgICBleGVjdXRlRm9ybS5mb3JtYXRDb25maWdJZCA9IHRoaXMuZm9ybWF0Q29uZmlnSWQ7XHJcbiAgICAgICAgZXhlY3V0ZUZvcm0uVGVybWluYWxUeXBlID0gdGhpcy5UZXJtaW5hbFR5cGU7XHJcbiAgICAgICAgZXhlY3V0ZUZvcm0uQ29tcG9uZW50SWQgPSB0aGlzLkNvbXBvbmVudElkO1xyXG4gICAgICAgIGV4ZWN1dGVGb3JtLkFjdHVhbFBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBpZiAodGhpcy5BY3R1YWxQYXJhbWV0ZXJzICYmIHRoaXMuQWN0dWFsUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiB0aGlzLkFjdHVhbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlciA9IHAuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgIGV4ZWN1dGVGb3JtLkFjdHVhbFBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleGVjdXRlRm9ybTtcclxuICAgIH1cclxufVxyXG5CcG1uTW9kZWxIZWxwZXIuUmVnaXN0ZXJFbGVtZW50VHlwZShuZXcgRXhlY3V0ZUZvcm0obmV3IEJwbW5Nb2RlbCgpKSk7XHJcblxyXG5leHBvcnQgZW51bSBUZXJtaW5hbFR5cGUge1xyXG4gICAgUEMgPSAnUEMnLFxyXG4gICAgTU9CSUxFID0gJ01PQklMRSdcclxufSJdfQ==