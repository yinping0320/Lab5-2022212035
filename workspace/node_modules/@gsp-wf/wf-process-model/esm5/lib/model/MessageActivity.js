/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { BpmnModel, BpmnModelHelper, ServiceTask } from "@edp-pmf/bpmn-model";
import { MessageNotice } from "./MessageNotice";
import { VariableSetting } from "./VariableSetting";
var MessageActivity = /** @class */ (function (_super) {
    tslib_1.__extends(MessageActivity, _super);
    function MessageActivity(model) {
        var _this = _super.call(this, model) || this;
        _this.ClrTypeID = MessageActivity.Clr_Type_ID;
        return _this;
    }
    /**
     * @return {?}
     */
    MessageActivity.prototype.ResetBeforeLoadFrom = /**
     * @return {?}
     */
    function () {
        _super.prototype.ResetBeforeLoadFrom.call(this);
        this.messageNotices = new Array();
        this.variableSettings = new Array();
    };
    /**
     * @return {?}
     */
    MessageActivity.prototype.ConvertToJsonObject = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var obj = _super.prototype.ConvertToJsonObject.call(this);
        return obj;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    MessageActivity.prototype.LoadFromJsonObject = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        _super.prototype.LoadFromJsonObject.call(this, obj);
    };
    /**
     * @protected
     * @return {?}
     */
    MessageActivity.prototype.GetExtensionElements4ConvertTo = /**
     * @protected
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b;
        /** @type {?} */
        var list = _super.prototype.GetExtensionElements4ConvertTo.call(this);
        if (this.messageNotices != null) {
            try {
                for (var _c = tslib_1.__values(this.messageNotices), _d = _c.next(); !_d.done; _d = _c.next()) {
                    var item = _d.value;
                    item.MexTag = MessageActivity.MEXTAG;
                    list.push(item);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        if (this.variableSettings != null && this.variableSettings.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.variableSettings), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    item.MexTag = MessageActivity.MEXTAG;
                    list.push(item);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        return list;
    };
    /**
     * @protected
     * @param {?} extensionElements
     * @return {?}
     */
    MessageActivity.prototype.SetExtensionElements4LoadFrom = /**
     * @protected
     * @param {?} extensionElements
     * @return {?}
     */
    function (extensionElements) {
        var e_3, _a;
        _super.prototype.SetExtensionElements4LoadFrom.call(this, extensionElements);
        try {
            for (var extensionElements_1 = tslib_1.__values(extensionElements), extensionElements_1_1 = extensionElements_1.next(); !extensionElements_1_1.done; extensionElements_1_1 = extensionElements_1.next()) {
                var extensionElement = extensionElements_1_1.value;
                if (extensionElement.MexTag !== MessageActivity.MEXTAG)
                    continue;
                switch (extensionElement.ClrTypeID) {
                    case VariableSetting.Clr_Type_ID:
                        this.variableSettings.push((/** @type {?} */ (extensionElement)));
                        ;
                        break;
                    default:
                        if (extensionElement instanceof MessageNotice) {
                            this.messageNotices.push((/** @type {?} */ (extensionElement)));
                        }
                        break;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (extensionElements_1_1 && !extensionElements_1_1.done && (_a = extensionElements_1.return)) _a.call(extensionElements_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
    };
    /**
     * @return {?}
     */
    MessageActivity.prototype.NewInstance = /**
     * @return {?}
     */
    function () {
        return new MessageActivity(this.Model);
    };
    /**
     * @return {?}
     */
    MessageActivity.prototype.clone = /**
     * @return {?}
     */
    function () {
        var e_4, _a, e_5, _b;
        /** @type {?} */
        var messageActivity = new MessageActivity(this.Model);
        messageActivity.Name = this.Name;
        messageActivity.variableSettings = new Array();
        if (this.variableSettings && this.variableSettings.length > 0) {
            try {
                for (var _c = tslib_1.__values(this.variableSettings), _d = _c.next(); !_d.done; _d = _c.next()) {
                    var v = _d.value;
                    /** @type {?} */
                    var variableSetting = v.clone();
                    messageActivity.variableSettings.push(variableSetting);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        messageActivity.messageNotices = new Array();
        if (this.messageNotices && this.messageNotices.length > 0) {
            try {
                for (var _e = tslib_1.__values(this.messageNotices), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var m = _f.value;
                    /** @type {?} */
                    var messageNotice = m.clone();
                    messageActivity.messageNotices.push(messageNotice);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        return messageActivity;
    };
    MessageActivity.Clr_Type_ID = "wf.MessageActivity";
    MessageActivity.MEXTAG = 'wf.MessageActivity';
    return MessageActivity;
}(ServiceTask));
export { MessageActivity };
if (false) {
    /** @type {?} */
    MessageActivity.Clr_Type_ID;
    /**
     * @type {?}
     * @private
     */
    MessageActivity.MEXTAG;
    /** @type {?} */
    MessageActivity.prototype.ClrTypeID;
    /** @type {?} */
    MessageActivity.prototype.messageNotices;
    /** @type {?} */
    MessageActivity.prototype.variableSettings;
}
BpmnModelHelper.RegisterElementType(new MessageActivity(new BpmnModel()));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUFjdGl2aXR5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi93Zi1wcm9jZXNzLW1vZGVsLyIsInNvdXJjZXMiOlsibGliL21vZGVsL01lc3NhZ2VBY3Rpdml0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFvQixXQUFXLEVBQW9DLE1BQU0scUJBQXFCLENBQUM7QUFDbEksT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVwRDtJQUFxQywyQ0FBVztJQVE1Qyx5QkFBWSxLQUFnQjtRQUE1QixZQUNJLGtCQUFNLEtBQUssQ0FBQyxTQUNmO1FBUkQsZUFBUyxHQUFXLGVBQWUsQ0FBQyxXQUFXLENBQUM7O0lBUWhELENBQUM7Ozs7SUFFRCw2Q0FBbUI7OztJQUFuQjtRQUNJLGlCQUFNLG1CQUFtQixXQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLEtBQUssRUFBaUIsQ0FBQztRQUNqRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztJQUN4QyxDQUFDOzs7O0lBRUQsNkNBQW1COzs7SUFBbkI7O1lBQ1EsR0FBRyxHQUFHLGlCQUFNLG1CQUFtQixXQUFFO1FBRXJDLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQzs7Ozs7SUFFRCw0Q0FBa0I7Ozs7SUFBbEIsVUFBbUIsR0FBUTtRQUN2QixpQkFBTSxrQkFBa0IsWUFBQyxHQUFHLENBQUMsQ0FBQztJQUVsQyxDQUFDOzs7OztJQUVTLHdEQUE4Qjs7OztJQUF4Qzs7O1lBQ1EsSUFBSSxHQUFHLGlCQUFNLDhCQUE4QixXQUFFO1FBRWpELElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLEVBQUU7O2dCQUM3QixLQUFtQixJQUFBLEtBQUEsaUJBQUEsSUFBSSxDQUFDLGNBQWMs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Ozs7Ozs7U0FDSjtRQUVELE9BQU8sZUFBZSxDQUFDO0lBQzNCLENBQUM7SUF0Rk0sMkJBQVcsR0FBVyxvQkFBb0IsQ0FBQztJQUVuQyxzQkFBTSxHQUFXLG9CQUFvQixDQUFDO0lBcUZ6RCxzQkFBQztDQUFBLEFBeEZELENBQXFDLFdBQVcsR0F3Ri9DO1NBeEZZLGVBQWU7OztJQUN4Qiw0QkFBa0Q7Ozs7O0lBRWxELHVCQUFxRDs7SUFEckQsb0NBQWdEOztJQUdoRCx5Q0FBcUM7O0lBQ3JDLDJDQUF5Qzs7QUFtRjdDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJwbW5Nb2RlbCwgQnBtbk1vZGVsSGVscGVyLCBFeHRlbnNpb25FbGVtZW50LCBTZXJ2aWNlVGFzaywgRXh0ZW5zaW9uTWV0aG9kLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQGVkcC1wbWYvYnBtbi1tb2RlbFwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlTm90aWNlIH0gZnJvbSBcIi4vTWVzc2FnZU5vdGljZVwiO1xyXG5pbXBvcnQgeyBWYXJpYWJsZVNldHRpbmcgfSBmcm9tIFwiLi9WYXJpYWJsZVNldHRpbmdcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQWN0aXZpdHkgZXh0ZW5kcyBTZXJ2aWNlVGFzayB7XHJcbiAgICBzdGF0aWMgQ2xyX1R5cGVfSUQ6IHN0cmluZyA9IFwid2YuTWVzc2FnZUFjdGl2aXR5XCI7XHJcbiAgICBDbHJUeXBlSUQ6IHN0cmluZyA9IE1lc3NhZ2VBY3Rpdml0eS5DbHJfVHlwZV9JRDtcclxuICAgIHByaXZhdGUgc3RhdGljIE1FWFRBRzogc3RyaW5nID0gJ3dmLk1lc3NhZ2VBY3Rpdml0eSc7XHJcblxyXG4gICAgbWVzc2FnZU5vdGljZXM6IEFycmF5PE1lc3NhZ2VOb3RpY2U+O1xyXG4gICAgdmFyaWFibGVTZXR0aW5nczogQXJyYXk8VmFyaWFibGVTZXR0aW5nPjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbDogQnBtbk1vZGVsKSB7XHJcbiAgICAgICAgc3VwZXIobW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIFJlc2V0QmVmb3JlTG9hZEZyb20oKSB7XHJcbiAgICAgICAgc3VwZXIuUmVzZXRCZWZvcmVMb2FkRnJvbSgpO1xyXG5cclxuICAgICAgICB0aGlzLm1lc3NhZ2VOb3RpY2VzID0gbmV3IEFycmF5PE1lc3NhZ2VOb3RpY2U+KCk7XHJcbiAgICAgICAgdGhpcy52YXJpYWJsZVNldHRpbmdzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgQ29udmVydFRvSnNvbk9iamVjdCgpOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBzdXBlci5Db252ZXJ0VG9Kc29uT2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgTG9hZEZyb21Kc29uT2JqZWN0KG9iajogYW55KSB7XHJcbiAgICAgICAgc3VwZXIuTG9hZEZyb21Kc29uT2JqZWN0KG9iaik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBHZXRFeHRlbnNpb25FbGVtZW50czRDb252ZXJ0VG8oKTogRXh0ZW5zaW9uRWxlbWVudFtdIHtcclxuICAgICAgICBsZXQgbGlzdCA9IHN1cGVyLkdldEV4dGVuc2lvbkVsZW1lbnRzNENvbnZlcnRUbygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZXNzYWdlTm90aWNlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1lc3NhZ2VOb3RpY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLk1leFRhZyA9IE1lc3NhZ2VBY3Rpdml0eS5NRVhUQUc7XHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGVTZXR0aW5ncyAhPSBudWxsICYmIHRoaXMudmFyaWFibGVTZXR0aW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnZhcmlhYmxlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uTWV4VGFnID0gTWVzc2FnZUFjdGl2aXR5Lk1FWFRBRztcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBTZXRFeHRlbnNpb25FbGVtZW50czRMb2FkRnJvbShleHRlbnNpb25FbGVtZW50czogRXh0ZW5zaW9uRWxlbWVudFtdKSB7XHJcbiAgICAgICAgc3VwZXIuU2V0RXh0ZW5zaW9uRWxlbWVudHM0TG9hZEZyb20oZXh0ZW5zaW9uRWxlbWVudHMpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBleHRlbnNpb25FbGVtZW50IG9mIGV4dGVuc2lvbkVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb25FbGVtZW50Lk1leFRhZyAhPT0gTWVzc2FnZUFjdGl2aXR5Lk1FWFRBRylcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGV4dGVuc2lvbkVsZW1lbnQuQ2xyVHlwZUlEKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFZhcmlhYmxlU2V0dGluZy5DbHJfVHlwZV9JRDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlU2V0dGluZ3MucHVzaChleHRlbnNpb25FbGVtZW50IGFzIFZhcmlhYmxlU2V0dGluZyk7O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uRWxlbWVudCBpbnN0YW5jZW9mIE1lc3NhZ2VOb3RpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTm90aWNlcy5wdXNoKGV4dGVuc2lvbkVsZW1lbnQgYXMgTWVzc2FnZU5vdGljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgTmV3SW5zdGFuY2UoKTogTWVzc2FnZUFjdGl2aXR5IHtcclxuICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VBY3Rpdml0eSh0aGlzLk1vZGVsKTtcclxuICAgIH1cclxuICAgIGNsb25lKCk6IE1lc3NhZ2VBY3Rpdml0eSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUFjdGl2aXR5ID0gbmV3IE1lc3NhZ2VBY3Rpdml0eSh0aGlzLk1vZGVsKTtcclxuICAgICAgICBtZXNzYWdlQWN0aXZpdHkuTmFtZSA9IHRoaXMuTmFtZTtcclxuICAgICAgICBtZXNzYWdlQWN0aXZpdHkudmFyaWFibGVTZXR0aW5ncyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlU2V0dGluZ3MgJiYgdGhpcy52YXJpYWJsZVNldHRpbmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHRoaXMudmFyaWFibGVTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGVTZXR0aW5nID0gdi5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUFjdGl2aXR5LnZhcmlhYmxlU2V0dGluZ3MucHVzaCh2YXJpYWJsZVNldHRpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VBY3Rpdml0eS5tZXNzYWdlTm90aWNlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VOb3RpY2VzICYmIHRoaXMubWVzc2FnZU5vdGljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG0gb2YgdGhpcy5tZXNzYWdlTm90aWNlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZU5vdGljZSA9IG0uY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VBY3Rpdml0eS5tZXNzYWdlTm90aWNlcy5wdXNoKG1lc3NhZ2VOb3RpY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUFjdGl2aXR5O1xyXG4gICAgfVxyXG59XHJcbkJwbW5Nb2RlbEhlbHBlci5SZWdpc3RlckVsZW1lbnRUeXBlKG5ldyBNZXNzYWdlQWN0aXZpdHkobmV3IEJwbW5Nb2RlbCgpKSk7Il19