/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { BpmnModel, BpmnModelHelper } from "@edp-pmf/bpmn-model";
import { BackWardRule } from "./extension/completion-strategy/BackWardRule";
import { ConclusionItem } from "./extension/completion-strategy/ConclusionItem";
import { WorkFlowAction } from "./extension/completion-strategy/WorkFlowAction";
import { Component } from "./extension/tool/Component";
import { UserActivity } from "./flow-node/UserActivity";
import { OrganizationPotentialOwner } from "./OrganizationPotentialOwner";
import { ActivityExecutorParticipant } from "./participants/old/ActivityExecutorParticipant";
import { ComponentParticipant } from "./participants/old/ComponentParticipant";
import { MatrixParticipant } from "./participants/old/MatrixParticipant";
import { PositionParticipant } from "./participants/old/PositionParticipant";
import { ReportingLineParticipant } from "./participants/old/ReportingLineParticipant";
import { UserParticipant } from "./participants/old/UserParticipant";
import { PotentialOwnerImpl } from "./PotentialOwnerImpl";
import { HumanPerformerImpl } from "./HumanPerformerImpl";
var OperationActivity = /** @class */ (function (_super) {
    tslib_1.__extends(OperationActivity, _super);
    function OperationActivity(model) {
        var _this = _super.call(this, model) || this;
        _this.ClrTypeID = OperationActivity.Clr_Type_ID;
        return _this;
    }
    /**
     * @param {?} model
     * @return {?}
     */
    OperationActivity.prototype.initConclusions = /**
     * @param {?} model
     * @return {?}
     */
    function (model) {
        /** @type {?} */
        var submit = new ConclusionItem(model);
        submit.Value = 'Send';
        submit.Text = '发送';
        submit.WorkFlowAction = WorkFlowAction.Forward;
        submit.IsDefault = true;
        submit.commentNecessary = false;
        this.Conclusions.push(submit);
        /** @type {?} */
        var back = new ConclusionItem(model);
        back.Value = 'Back';
        back.Text = '驳回';
        back.WorkFlowAction = WorkFlowAction.Backward;
        back.IsDefault = false;
        back.commentNecessary = true;
        this.Conclusions.push(back);
        // 审批项存在反向时，初始化驳回规则
        this.BackWardRule = new BackWardRule(model);
    };
    /**
     * @return {?}
     */
    OperationActivity.prototype.NewInstance = /**
     * @return {?}
     */
    function () {
        return new OperationActivity(this.Model);
    };
    /**
     * @return {?}
     */
    OperationActivity.prototype.clone = /**
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b, e_3, _c, e_4, _d, e_5, _e, e_6, _f, e_7, _g, e_8, _h, e_9, _j, e_10, _k;
        /** @type {?} */
        var operationActivity = new OperationActivity(this.Model);
        operationActivity.Name = this.Name;
        if (this.taskTitle) {
            operationActivity.taskTitle = this.taskTitle.clone();
        }
        /** @type {?} */
        var resourceRoles = this.GetResourceRoles();
        if (resourceRoles && resourceRoles.length > 0) {
            try {
                for (var resourceRoles_1 = tslib_1.__values(resourceRoles), resourceRoles_1_1 = resourceRoles_1.next(); !resourceRoles_1_1.done; resourceRoles_1_1 = resourceRoles_1.next()) {
                    var role = resourceRoles_1_1.value;
                    if (role instanceof UserParticipant) {
                        /** @type {?} */
                        var user = (/** @type {?} */ (role));
                        /** @type {?} */
                        var userParticipant = user.clone();
                        operationActivity.AddResourceRole(userParticipant);
                    }
                    else if (role instanceof PositionParticipant) {
                        /** @type {?} */
                        var position = (/** @type {?} */ (role));
                        /** @type {?} */
                        var positionParticipant = position.clone();
                        operationActivity.AddResourceRole(positionParticipant);
                    }
                    else if (role instanceof ReportingLineParticipant) {
                        /** @type {?} */
                        var reportingLine = (/** @type {?} */ (role));
                        /** @type {?} */
                        var reportingLineParticipant = reportingLine.clone();
                        operationActivity.AddResourceRole(reportingLineParticipant);
                    }
                    else if (role instanceof ActivityExecutorParticipant) {
                        /** @type {?} */
                        var activityExecutor = (/** @type {?} */ (role));
                        /** @type {?} */
                        var activityExecutorParticipant = activityExecutor.clone();
                        operationActivity.AddResourceRole(activityExecutorParticipant);
                    }
                    else if (role instanceof ComponentParticipant) {
                        /** @type {?} */
                        var component = (/** @type {?} */ (role));
                        /** @type {?} */
                        var componentParticipant = component.clone();
                        operationActivity.AddResourceRole(componentParticipant);
                    }
                    else if (role instanceof MatrixParticipant) {
                        /** @type {?} */
                        var matrix = (/** @type {?} */ (role));
                        /** @type {?} */
                        var matrixParticipant = matrix.clone();
                        operationActivity.AddResourceRole(matrixParticipant);
                    }
                    else if (role instanceof OrganizationPotentialOwner) {
                        /** @type {?} */
                        var org = (/** @type {?} */ (role));
                        /** @type {?} */
                        var organizationPotentialOwner = org.clone();
                        operationActivity.AddResourceRole(organizationPotentialOwner);
                        // 2023-5-31 复制人工操作节点没带上参与者 发现是缺少HumanPerformerImpl和PotentialOwnerImpl
                    }
                    else if (role instanceof HumanPerformerImpl) {
                        /** @type {?} */
                        var performer = (/** @type {?} */ (role));
                        /** @type {?} */
                        var humanPerformerImpl = performer.clone();
                        operationActivity.AddResourceRole(humanPerformerImpl);
                    }
                    else if (role instanceof PotentialOwnerImpl) {
                        /** @type {?} */
                        var owner = (/** @type {?} */ (role));
                        /** @type {?} */
                        var potentialOwnerImpl = owner.clone();
                        operationActivity.AddResourceRole(potentialOwnerImpl);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (resourceRoles_1_1 && !resourceRoles_1_1.done && (_a = resourceRoles_1.return)) _a.call(resourceRoles_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        operationActivity.ParticipantSchemes = new Array();
        if (this.ParticipantSchemes && this.ParticipantSchemes.length > 0) {
            try {
                for (var _l = tslib_1.__values(this.ParticipantSchemes), _m = _l.next(); !_m.done; _m = _l.next()) {
                    var s = _m.value;
                    /** @type {?} */
                    var scheme = s.clone();
                    operationActivity.ParticipantSchemes.push(scheme);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_m && !_m.done && (_b = _l.return)) _b.call(_l);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        if (this.ParticipantSetting) {
            operationActivity.ParticipantSetting = this.ParticipantSetting.clone();
        }
        operationActivity.AssignmentStrategy = this.AssignmentStrategy;
        if (this.AssignPerformerConfig) {
            operationActivity.AssignPerformerConfig = this.AssignPerformerConfig.clone();
        }
        operationActivity.PerformerNotFundExecption = this.PerformerNotFundExecption;
        operationActivity.Retrievable = this.Retrievable;
        operationActivity.IsRollback = this.IsRollback;
        operationActivity.SelectBranch = this.SelectBranch;
        operationActivity.NotifyAble = this.NotifyAble;
        operationActivity.AddSignFrontAble = this.AddSignFrontAble;
        operationActivity.AddSignBehindAble = this.AddSignBehindAble;
        operationActivity.Priority = this.Priority;
        operationActivity.ExecuteWorkItemMode = this.ExecuteWorkItemMode;
        operationActivity.DisplayTerminal = this.DisplayTerminal;
        operationActivity.SelectTargetAble = this.SelectTargetAble;
        if (this.JumpScope) {
            operationActivity.JumpScope = this.JumpScope.clone();
        }
        if (this.BackWardRule) {
            operationActivity.BackWardRule = this.BackWardRule.clone();
        }
        operationActivity.transferAble = this.transferAble;
        operationActivity.ExecuteForms = new Array();
        if (this.ExecuteForms && this.ExecuteForms.length > 0) {
            try {
                for (var _o = tslib_1.__values(this.ExecuteForms), _p = _o.next(); !_p.done; _p = _o.next()) {
                    var f = _p.value;
                    /** @type {?} */
                    var executeForm = f.clone();
                    operationActivity.ExecuteForms.push(executeForm);
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_p && !_p.done && (_c = _o.return)) _c.call(_o);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
        operationActivity.customizeActions = new Array();
        if (this.customizeActions && this.customizeActions.length > 0) {
            try {
                for (var _q = tslib_1.__values(this.customizeActions), _r = _q.next(); !_r.done; _r = _q.next()) {
                    var a = _r.value;
                    /** @type {?} */
                    var customizeAction = a.clone();
                    operationActivity.customizeActions.push(customizeAction);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_r && !_r.done && (_d = _q.return)) _d.call(_q);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        operationActivity.CounterSignRules = new Array();
        if (this.CounterSignRules && this.CounterSignRules.length > 0) {
            try {
                for (var _s = tslib_1.__values(this.CounterSignRules), _t = _s.next(); !_t.done; _t = _s.next()) {
                    var r = _t.value;
                    /** @type {?} */
                    var counterSignRule = r.clone();
                    operationActivity.CounterSignRules.push(counterSignRule);
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_t && !_t.done && (_e = _s.return)) _e.call(_s);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        operationActivity.AdhocActivitySecurities = new Array();
        if (this.AdhocActivitySecurities && this.AdhocActivitySecurities.length > 0) {
            try {
                for (var _u = tslib_1.__values(this.AdhocActivitySecurities), _v = _u.next(); !_v.done; _v = _u.next()) {
                    var s = _v.value;
                    operationActivity.AdhocActivitySecurities.push(s);
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (_v && !_v.done && (_f = _u.return)) _f.call(_u);
                }
                finally { if (e_6) throw e_6.error; }
            }
        }
        // TODO: 这个好像暂时还没启用，赋空值
        operationActivity.NotificationList = new Array();
        operationActivity.anonymous = this.anonymous;
        operationActivity.anonymousText = this.anonymousText;
        operationActivity.BizActivityID = this.BizActivityID;
        operationActivity.BizActivityName = this.BizActivityName;
        operationActivity.Conclusions = new Array();
        if (this.Conclusions && this.Conclusions.length > 0) {
            try {
                for (var _w = tslib_1.__values(this.Conclusions), _x = _w.next(); !_x.done; _x = _w.next()) {
                    var c = _x.value;
                    /** @type {?} */
                    var conclusion = c.clone();
                    operationActivity.Conclusions.push(conclusion);
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_x && !_x.done && (_g = _w.return)) _g.call(_w);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
        operationActivity.Tools = new Array();
        if (this.Tools && this.Tools.length > 0) {
            try {
                for (var _y = tslib_1.__values(this.Tools), _z = _y.next(); !_z.done; _z = _y.next()) {
                    var t = _z.value;
                    if (t instanceof Component) {
                        /** @type {?} */
                        var c = (/** @type {?} */ (t));
                        /** @type {?} */
                        var tool = c.clone();
                        operationActivity.Tools.push(tool);
                    }
                }
            }
            catch (e_8_1) { e_8 = { error: e_8_1 }; }
            finally {
                try {
                    if (_z && !_z.done && (_h = _y.return)) _h.call(_y);
                }
                finally { if (e_8) throw e_8.error; }
            }
        }
        // TODO: 这个好像暂时还没启用，赋空值
        operationActivity.BizParameters = new Array();
        if (this.timeLimitControl) {
            operationActivity.timeLimitControl = this.timeLimitControl.clone();
        }
        operationActivity.variableSettings = new Array();
        if (this.variableSettings && this.variableSettings.length > 0) {
            try {
                for (var _0 = tslib_1.__values(this.variableSettings), _1 = _0.next(); !_1.done; _1 = _0.next()) {
                    var v = _1.value;
                    /** @type {?} */
                    var variableSetting = v.clone();
                    operationActivity.variableSettings.push(variableSetting);
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_1 && !_1.done && (_j = _0.return)) _j.call(_0);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        operationActivity.messageNotices = new Array();
        if (this.messageNotices && this.messageNotices.length > 0) {
            try {
                for (var _2 = tslib_1.__values(this.messageNotices), _3 = _2.next(); !_3.done; _3 = _2.next()) {
                    var m = _3.value;
                    /** @type {?} */
                    var messageNotice = m.clone();
                    operationActivity.messageNotices.push(messageNotice);
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (_3 && !_3.done && (_k = _2.return)) _k.call(_2);
                }
                finally { if (e_10) throw e_10.error; }
            }
        }
        if (this.approvalPivotConfig) {
            operationActivity.approvalPivotConfig = this.approvalPivotConfig.clone();
        }
        if (this.urgeHandleRule) {
            operationActivity.urgeHandleRule = this.urgeHandleRule.clone();
        }
        return operationActivity;
    };
    OperationActivity.Clr_Type_ID = "wf.OperationActivity";
    OperationActivity.MEXTAG = 'wf.OperationActivity';
    return OperationActivity;
}(UserActivity));
export { OperationActivity };
if (false) {
    /** @type {?} */
    OperationActivity.Clr_Type_ID;
    /**
     * @type {?}
     * @protected
     */
    OperationActivity.MEXTAG;
    /** @type {?} */
    OperationActivity.prototype.ClrTypeID;
}
BpmnModelHelper.RegisterElementType(new OperationActivity(new BpmnModel()));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3BlcmF0aW9uQWN0aXZpdHkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWwvIiwic291cmNlcyI6WyJsaWIvbW9kZWwvT3BlcmF0aW9uQWN0aXZpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBZ0UsTUFBTSxxQkFBcUIsQ0FBQztBQUMvSCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDNUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQ2hGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUNoRixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3hELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzFFLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQzdGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3pFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQzdFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNyRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUUxRDtJQUF1Qyw2Q0FBWTtJQUtqRCwyQkFBWSxLQUFnQjtRQUE1QixZQUNFLGtCQUFNLEtBQUssQ0FBQyxTQUNi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RTtZQUN2QixpQkFBaUIsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNoRTtRQUNELE9BQU8saUJBQWlCLENBQUM7SUFDM0IsQ0FBQztJQW5NTSw2QkFBVyxHQUFXLHNCQUFzQixDQUFDO0lBRW5DLHdCQUFNLEdBQVcsc0JBQXNCLENBQUM7SUFrTTNELHdCQUFDO0NBQUEsQUFyTUQsQ0FBdUMsWUFBWSxHQXFNbEQ7U0FyTVksaUJBQWlCOzs7SUFDNUIsOEJBQW9EOzs7OztJQUVwRCx5QkFBeUQ7O0lBRHpELHNDQUFrRDs7QUFvTXBELGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLElBQUksU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnBtbk1vZGVsLCBCcG1uTW9kZWxIZWxwZXIsIEV4dGVuc2lvbkVsZW1lbnQsIEV4dGVuc2lvbk1ldGhvZCwgVmFsaWRhdGlvbkVycm9yLCBVc2VyVGFzayB9IGZyb20gXCJAZWRwLXBtZi9icG1uLW1vZGVsXCI7XHJcbmltcG9ydCB7IEJhY2tXYXJkUnVsZSB9IGZyb20gXCIuL2V4dGVuc2lvbi9jb21wbGV0aW9uLXN0cmF0ZWd5L0JhY2tXYXJkUnVsZVwiO1xyXG5pbXBvcnQgeyBDb25jbHVzaW9uSXRlbSB9IGZyb20gXCIuL2V4dGVuc2lvbi9jb21wbGV0aW9uLXN0cmF0ZWd5L0NvbmNsdXNpb25JdGVtXCI7XHJcbmltcG9ydCB7IFdvcmtGbG93QWN0aW9uIH0gZnJvbSBcIi4vZXh0ZW5zaW9uL2NvbXBsZXRpb24tc3RyYXRlZ3kvV29ya0Zsb3dBY3Rpb25cIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vZXh0ZW5zaW9uL3Rvb2wvQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7IFVzZXJBY3Rpdml0eSB9IGZyb20gXCIuL2Zsb3ctbm9kZS9Vc2VyQWN0aXZpdHlcIjtcclxuaW1wb3J0IHsgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXIgfSBmcm9tIFwiLi9Pcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lclwiO1xyXG5pbXBvcnQgeyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQgfSBmcm9tIFwiLi9wYXJ0aWNpcGFudHMvb2xkL0FjdGl2aXR5RXhlY3V0b3JQYXJ0aWNpcGFudFwiO1xyXG5pbXBvcnQgeyBDb21wb25lbnRQYXJ0aWNpcGFudCB9IGZyb20gXCIuL3BhcnRpY2lwYW50cy9vbGQvQ29tcG9uZW50UGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgTWF0cml4UGFydGljaXBhbnQgfSBmcm9tIFwiLi9wYXJ0aWNpcGFudHMvb2xkL01hdHJpeFBhcnRpY2lwYW50XCI7XHJcbmltcG9ydCB7IFBvc2l0aW9uUGFydGljaXBhbnQgfSBmcm9tIFwiLi9wYXJ0aWNpcGFudHMvb2xkL1Bvc2l0aW9uUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50IH0gZnJvbSBcIi4vcGFydGljaXBhbnRzL29sZC9SZXBvcnRpbmdMaW5lUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgVXNlclBhcnRpY2lwYW50IH0gZnJvbSBcIi4vcGFydGljaXBhbnRzL29sZC9Vc2VyUGFydGljaXBhbnRcIjtcclxuaW1wb3J0IHsgUG90ZW50aWFsT3duZXJJbXBsIH0gZnJvbSBcIi4vUG90ZW50aWFsT3duZXJJbXBsXCI7XHJcbmltcG9ydCB7IEh1bWFuUGVyZm9ybWVySW1wbCB9IGZyb20gXCIuL0h1bWFuUGVyZm9ybWVySW1wbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE9wZXJhdGlvbkFjdGl2aXR5IGV4dGVuZHMgVXNlckFjdGl2aXR5IHtcclxuICBzdGF0aWMgQ2xyX1R5cGVfSUQ6IHN0cmluZyA9IFwid2YuT3BlcmF0aW9uQWN0aXZpdHlcIjtcclxuICBDbHJUeXBlSUQ6IHN0cmluZyA9IE9wZXJhdGlvbkFjdGl2aXR5LkNscl9UeXBlX0lEO1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgTUVYVEFHOiBzdHJpbmcgPSAnd2YuT3BlcmF0aW9uQWN0aXZpdHknO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihtb2RlbDogQnBtbk1vZGVsKSB7XHJcbiAgICBzdXBlcihtb2RlbCk7XHJcbiAgfVxyXG5cclxuICBpbml0Q29uY2x1c2lvbnMobW9kZWw6IEJwbW5Nb2RlbCkge1xyXG4gICAgbGV0IHN1Ym1pdCA9IG5ldyBDb25jbHVzaW9uSXRlbShtb2RlbCk7XHJcbiAgICBzdWJtaXQuVmFsdWUgPSAnU2VuZCc7XHJcbiAgICBzdWJtaXQuVGV4dCA9ICflj5HpgIEnO1xyXG4gICAgc3VibWl0LldvcmtGbG93QWN0aW9uID0gV29ya0Zsb3dBY3Rpb24uRm9yd2FyZDtcclxuICAgIHN1Ym1pdC5Jc0RlZmF1bHQgPSB0cnVlO1xyXG4gICAgc3VibWl0LmNvbW1lbnROZWNlc3NhcnkgPSBmYWxzZTtcclxuICAgIHRoaXMuQ29uY2x1c2lvbnMucHVzaChzdWJtaXQpO1xyXG5cclxuICAgIGxldCBiYWNrID0gbmV3IENvbmNsdXNpb25JdGVtKG1vZGVsKTtcclxuICAgIGJhY2suVmFsdWUgPSAnQmFjayc7XHJcbiAgICBiYWNrLlRleHQgPSAn6amz5ZueJztcclxuICAgIGJhY2suV29ya0Zsb3dBY3Rpb24gPSBXb3JrRmxvd0FjdGlvbi5CYWNrd2FyZDtcclxuICAgIGJhY2suSXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICBiYWNrLmNvbW1lbnROZWNlc3NhcnkgPSB0cnVlO1xyXG4gICAgdGhpcy5Db25jbHVzaW9ucy5wdXNoKGJhY2spO1xyXG5cclxuICAgIC8vIOWuoeaJuemhueWtmOWcqOWPjeWQkeaXtu+8jOWIneWni+WMlumps+WbnuinhOWImVxyXG4gICAgdGhpcy5CYWNrV2FyZFJ1bGUgPSBuZXcgQmFja1dhcmRSdWxlKG1vZGVsKTtcclxuICB9XHJcblxyXG4gIE5ld0luc3RhbmNlKCk6IE9wZXJhdGlvbkFjdGl2aXR5IHtcclxuICAgIHJldHVybiBuZXcgT3BlcmF0aW9uQWN0aXZpdHkodGhpcy5Nb2RlbCk7XHJcbiAgfVxyXG5cclxuICBjbG9uZSgpOiBPcGVyYXRpb25BY3Rpdml0eSB7XHJcbiAgICBjb25zdCBvcGVyYXRpb25BY3Rpdml0eSA9IG5ldyBPcGVyYXRpb25BY3Rpdml0eSh0aGlzLk1vZGVsKTtcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5Lk5hbWUgPSB0aGlzLk5hbWU7XHJcbiAgICBpZiAodGhpcy50YXNrVGl0bGUpIHtcclxuICAgICAgb3BlcmF0aW9uQWN0aXZpdHkudGFza1RpdGxlID0gdGhpcy50YXNrVGl0bGUuY2xvbmUoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc291cmNlUm9sZXMgPSB0aGlzLkdldFJlc291cmNlUm9sZXMoKTtcclxuICAgIGlmIChyZXNvdXJjZVJvbGVzICYmIHJlc291cmNlUm9sZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHJvbGUgb2YgcmVzb3VyY2VSb2xlcykge1xyXG4gICAgICAgIGlmIChyb2xlIGluc3RhbmNlb2YgVXNlclBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICBjb25zdCB1c2VyID0gcm9sZSBhcyBVc2VyUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICBjb25zdCB1c2VyUGFydGljaXBhbnQgPSB1c2VyLmNsb25lKCk7XHJcbiAgICAgICAgICBvcGVyYXRpb25BY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUodXNlclBhcnRpY2lwYW50KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBQb3NpdGlvblBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHJvbGUgYXMgUG9zaXRpb25QYXJ0aWNpcGFudDtcclxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uUGFydGljaXBhbnQgPSBwb3NpdGlvbi5jbG9uZSgpO1xyXG4gICAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKHBvc2l0aW9uUGFydGljaXBhbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSBpbnN0YW5jZW9mIFJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCkge1xyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZSA9IHJvbGUgYXMgUmVwb3J0aW5nTGluZVBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgY29uc3QgcmVwb3J0aW5nTGluZVBhcnRpY2lwYW50ID0gcmVwb3J0aW5nTGluZS5jbG9uZSgpO1xyXG4gICAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKHJlcG9ydGluZ0xpbmVQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgQWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICBjb25zdCBhY3Rpdml0eUV4ZWN1dG9yID0gcm9sZSBhcyBBY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQ7XHJcbiAgICAgICAgICBjb25zdCBhY3Rpdml0eUV4ZWN1dG9yUGFydGljaXBhbnQgPSBhY3Rpdml0eUV4ZWN1dG9yLmNsb25lKCk7XHJcbiAgICAgICAgICBvcGVyYXRpb25BY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoYWN0aXZpdHlFeGVjdXRvclBhcnRpY2lwYW50KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgaW5zdGFuY2VvZiBDb21wb25lbnRQYXJ0aWNpcGFudCkge1xyXG4gICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gcm9sZSBhcyBDb21wb25lbnRQYXJ0aWNpcGFudDtcclxuICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBhcnRpY2lwYW50ID0gY29tcG9uZW50LmNsb25lKCk7XHJcbiAgICAgICAgICBvcGVyYXRpb25BY3Rpdml0eS5BZGRSZXNvdXJjZVJvbGUoY29tcG9uZW50UGFydGljaXBhbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSBpbnN0YW5jZW9mIE1hdHJpeFBhcnRpY2lwYW50KSB7XHJcbiAgICAgICAgICBjb25zdCBtYXRyaXggPSByb2xlIGFzIE1hdHJpeFBhcnRpY2lwYW50O1xyXG4gICAgICAgICAgY29uc3QgbWF0cml4UGFydGljaXBhbnQgPSBtYXRyaXguY2xvbmUoKTtcclxuICAgICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShtYXRyaXhQYXJ0aWNpcGFudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXIpIHtcclxuICAgICAgICAgIGNvbnN0IG9yZyA9IHJvbGUgYXMgT3JnYW5pemF0aW9uUG90ZW50aWFsT3duZXI7XHJcbiAgICAgICAgICBjb25zdCBvcmdhbml6YXRpb25Qb3RlbnRpYWxPd25lciA9IG9yZy5jbG9uZSgpO1xyXG4gICAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKG9yZ2FuaXphdGlvblBvdGVudGlhbE93bmVyKTtcclxuICAgICAgICAgIC8vIDIwMjMtNS0zMSDlpI3liLbkurrlt6Xmk43kvZzoioLngrnmsqHluKbkuIrlj4LkuI7ogIUg5Y+R546w5piv57y65bCRSHVtYW5QZXJmb3JtZXJJbXBs5ZKMUG90ZW50aWFsT3duZXJJbXBsXHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgSHVtYW5QZXJmb3JtZXJJbXBsKSB7XHJcbiAgICAgICAgICBjb25zdCBwZXJmb3JtZXIgPSByb2xlIGFzIEh1bWFuUGVyZm9ybWVySW1wbDtcclxuICAgICAgICAgIGNvbnN0IGh1bWFuUGVyZm9ybWVySW1wbCA9IHBlcmZvcm1lci5jbG9uZSgpO1xyXG4gICAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRkUmVzb3VyY2VSb2xlKGh1bWFuUGVyZm9ybWVySW1wbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlIGluc3RhbmNlb2YgUG90ZW50aWFsT3duZXJJbXBsKSB7XHJcbiAgICAgICAgICBjb25zdCBvd25lciA9IHJvbGUgYXMgUG90ZW50aWFsT3duZXJJbXBsO1xyXG4gICAgICAgICAgY29uc3QgcG90ZW50aWFsT3duZXJJbXBsID0gb3duZXIuY2xvbmUoKTtcclxuICAgICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LkFkZFJlc291cmNlUm9sZShwb3RlbnRpYWxPd25lckltcGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuUGFydGljaXBhbnRTY2hlbWVzID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5QYXJ0aWNpcGFudFNjaGVtZXMgJiYgdGhpcy5QYXJ0aWNpcGFudFNjaGVtZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5QYXJ0aWNpcGFudFNjaGVtZXMpIHtcclxuICAgICAgICBjb25zdCBzY2hlbWUgPSBzLmNsb25lKCk7XHJcbiAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuUGFydGljaXBhbnRTY2hlbWVzLnB1c2goc2NoZW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuUGFydGljaXBhbnRTZXR0aW5nKSB7XHJcbiAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LlBhcnRpY2lwYW50U2V0dGluZyA9IHRoaXMuUGFydGljaXBhbnRTZXR0aW5nLmNsb25lKCk7XHJcbiAgICB9XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5Bc3NpZ25tZW50U3RyYXRlZ3kgPSB0aGlzLkFzc2lnbm1lbnRTdHJhdGVneTtcclxuICAgIGlmICh0aGlzLkFzc2lnblBlcmZvcm1lckNvbmZpZykge1xyXG4gICAgICBvcGVyYXRpb25BY3Rpdml0eS5Bc3NpZ25QZXJmb3JtZXJDb25maWcgPSB0aGlzLkFzc2lnblBlcmZvcm1lckNvbmZpZy5jbG9uZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LlBlcmZvcm1lck5vdEZ1bmRFeGVjcHRpb24gPSB0aGlzLlBlcmZvcm1lck5vdEZ1bmRFeGVjcHRpb247XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5SZXRyaWV2YWJsZSA9IHRoaXMuUmV0cmlldmFibGU7XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5Jc1JvbGxiYWNrID0gdGhpcy5Jc1JvbGxiYWNrO1xyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuU2VsZWN0QnJhbmNoID0gdGhpcy5TZWxlY3RCcmFuY2g7XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5Ob3RpZnlBYmxlID0gdGhpcy5Ob3RpZnlBYmxlO1xyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRkU2lnbkZyb250QWJsZSA9IHRoaXMuQWRkU2lnbkZyb250QWJsZTtcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LkFkZFNpZ25CZWhpbmRBYmxlID0gdGhpcy5BZGRTaWduQmVoaW5kQWJsZTtcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LlByaW9yaXR5ID0gdGhpcy5Qcmlvcml0eTtcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LkV4ZWN1dGVXb3JrSXRlbU1vZGUgPSB0aGlzLkV4ZWN1dGVXb3JrSXRlbU1vZGU7XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5EaXNwbGF5VGVybWluYWwgPSB0aGlzLkRpc3BsYXlUZXJtaW5hbDtcclxuXHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5TZWxlY3RUYXJnZXRBYmxlID0gdGhpcy5TZWxlY3RUYXJnZXRBYmxlO1xyXG4gICAgaWYgKHRoaXMuSnVtcFNjb3BlKSB7XHJcbiAgICAgIG9wZXJhdGlvbkFjdGl2aXR5Lkp1bXBTY29wZSA9IHRoaXMuSnVtcFNjb3BlLmNsb25lKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5CYWNrV2FyZFJ1bGUpIHtcclxuICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQmFja1dhcmRSdWxlID0gdGhpcy5CYWNrV2FyZFJ1bGUuY2xvbmUoKTtcclxuICAgIH1cclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LnRyYW5zZmVyQWJsZSA9IHRoaXMudHJhbnNmZXJBYmxlO1xyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuRXhlY3V0ZUZvcm1zID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5FeGVjdXRlRm9ybXMgJiYgdGhpcy5FeGVjdXRlRm9ybXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5FeGVjdXRlRm9ybXMpIHtcclxuICAgICAgICBjb25zdCBleGVjdXRlRm9ybSA9IGYuY2xvbmUoKTtcclxuICAgICAgICBvcGVyYXRpb25BY3Rpdml0eS5FeGVjdXRlRm9ybXMucHVzaChleGVjdXRlRm9ybSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LmN1c3RvbWl6ZUFjdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmICh0aGlzLmN1c3RvbWl6ZUFjdGlvbnMgJiYgdGhpcy5jdXN0b21pemVBY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBhIG9mIHRoaXMuY3VzdG9taXplQWN0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbWl6ZUFjdGlvbiA9IGEuY2xvbmUoKTtcclxuICAgICAgICBvcGVyYXRpb25BY3Rpdml0eS5jdXN0b21pemVBY3Rpb25zLnB1c2goY3VzdG9taXplQWN0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuQ291bnRlclNpZ25SdWxlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuQ291bnRlclNpZ25SdWxlcyAmJiB0aGlzLkNvdW50ZXJTaWduUnVsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5Db3VudGVyU2lnblJ1bGVzKSB7XHJcbiAgICAgICAgY29uc3QgY291bnRlclNpZ25SdWxlID0gci5jbG9uZSgpO1xyXG4gICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LkNvdW50ZXJTaWduUnVsZXMucHVzaChjb3VudGVyU2lnblJ1bGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5BZGhvY0FjdGl2aXR5U2VjdXJpdGllcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMuQWRob2NBY3Rpdml0eVNlY3VyaXRpZXMgJiYgdGhpcy5BZGhvY0FjdGl2aXR5U2VjdXJpdGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLkFkaG9jQWN0aXZpdHlTZWN1cml0aWVzKSB7XHJcbiAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkuQWRob2NBY3Rpdml0eVNlY3VyaXRpZXMucHVzaChzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVE9ETzog6L+Z5Liq5aW95YOP5pqC5pe26L+Y5rKh5ZCv55So77yM6LWL56m65YC8XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5Ob3RpZmljYXRpb25MaXN0ID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuYW5vbnltb3VzID0gdGhpcy5hbm9ueW1vdXM7XHJcbiAgICBvcGVyYXRpb25BY3Rpdml0eS5hbm9ueW1vdXNUZXh0ID0gdGhpcy5hbm9ueW1vdXNUZXh0O1xyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkuQml6QWN0aXZpdHlJRCA9IHRoaXMuQml6QWN0aXZpdHlJRDtcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LkJpekFjdGl2aXR5TmFtZSA9IHRoaXMuQml6QWN0aXZpdHlOYW1lO1xyXG5cclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LkNvbmNsdXNpb25zID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5Db25jbHVzaW9ucyAmJiB0aGlzLkNvbmNsdXNpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBjIG9mIHRoaXMuQ29uY2x1c2lvbnMpIHtcclxuICAgICAgICBjb25zdCBjb25jbHVzaW9uID0gYy5jbG9uZSgpO1xyXG4gICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LkNvbmNsdXNpb25zLnB1c2goY29uY2x1c2lvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LlRvb2xzID0gbmV3IEFycmF5KCk7XHJcbiAgICBpZiAodGhpcy5Ub29scyAmJiB0aGlzLlRvb2xzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuVG9vbHMpIHtcclxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENvbXBvbmVudCkge1xyXG4gICAgICAgICAgY29uc3QgYyA9IHQgYXMgQ29tcG9uZW50O1xyXG4gICAgICAgICAgY29uc3QgdG9vbCA9IGMuY2xvbmUoKTtcclxuICAgICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LlRvb2xzLnB1c2godG9vbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiDov5nkuKrlpb3lg4/mmoLml7bov5jmsqHlkK/nlKjvvIzotYvnqbrlgLxcclxuICAgIG9wZXJhdGlvbkFjdGl2aXR5LkJpelBhcmFtZXRlcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmICh0aGlzLnRpbWVMaW1pdENvbnRyb2wpIHtcclxuICAgICAgb3BlcmF0aW9uQWN0aXZpdHkudGltZUxpbWl0Q29udHJvbCA9IHRoaXMudGltZUxpbWl0Q29udHJvbC5jbG9uZSgpO1xyXG4gICAgfVxyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkudmFyaWFibGVTZXR0aW5ncyA9IG5ldyBBcnJheSgpO1xyXG4gICAgaWYgKHRoaXMudmFyaWFibGVTZXR0aW5ncyAmJiB0aGlzLnZhcmlhYmxlU2V0dGluZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy52YXJpYWJsZVNldHRpbmdzKSB7XHJcbiAgICAgICAgY29uc3QgdmFyaWFibGVTZXR0aW5nID0gdi5jbG9uZSgpO1xyXG4gICAgICAgIG9wZXJhdGlvbkFjdGl2aXR5LnZhcmlhYmxlU2V0dGluZ3MucHVzaCh2YXJpYWJsZVNldHRpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlcmF0aW9uQWN0aXZpdHkubWVzc2FnZU5vdGljZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGlmICh0aGlzLm1lc3NhZ2VOb3RpY2VzICYmIHRoaXMubWVzc2FnZU5vdGljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IG0gb2YgdGhpcy5tZXNzYWdlTm90aWNlcykge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VOb3RpY2UgPSBtLmNsb25lKCk7XHJcbiAgICAgICAgb3BlcmF0aW9uQWN0aXZpdHkubWVzc2FnZU5vdGljZXMucHVzaChtZXNzYWdlTm90aWNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYXBwcm92YWxQaXZvdENvbmZpZykge1xyXG4gICAgICBvcGVyYXRpb25BY3Rpdml0eS5hcHByb3ZhbFBpdm90Q29uZmlnID0gdGhpcy5hcHByb3ZhbFBpdm90Q29uZmlnLmNsb25lKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51cmdlSGFuZGxlUnVsZSkge1xyXG4gICAgICBvcGVyYXRpb25BY3Rpdml0eS51cmdlSGFuZGxlUnVsZSA9IHRoaXMudXJnZUhhbmRsZVJ1bGUuY2xvbmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvcGVyYXRpb25BY3Rpdml0eTtcclxuICB9XHJcbn1cclxuQnBtbk1vZGVsSGVscGVyLlJlZ2lzdGVyRWxlbWVudFR5cGUobmV3IE9wZXJhdGlvbkFjdGl2aXR5KG5ldyBCcG1uTW9kZWwoKSkpO1xyXG4iXX0=