/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { BpmnModel, BpmnModelHelper, IntermediateCatchEvent } from "@edp-pmf/bpmn-model";
import { BackWardRule } from "./extension/completion-strategy/BackWardRule";
import { SignalEventDefinitionImpl } from "./SignalEventDefinitionImpl";
import { VariableSetting } from "./VariableSetting";
export class IntermediateCatchEventImpl extends IntermediateCatchEvent {
    /**
     * @param {?} model
     */
    constructor(model) {
        super(model);
        this.ClrTypeID = IntermediateCatchEventImpl.Clr_Type_ID;
    }
    /**
     * @return {?}
     */
    ResetBeforeLoadFrom() {
        super.ResetBeforeLoadFrom();
        this.variableSettings = new Array();
    }
    /**
     * @protected
     * @return {?}
     */
    GetExtensionElements4ConvertTo() {
        /** @type {?} */
        let list = super.GetExtensionElements4ConvertTo();
        if (this.backWardRule != null) {
            this.backWardRule.MexTag = IntermediateCatchEventImpl.MEXTAG;
            list.push(this.backWardRule);
        }
        if (this.variableSettings != null && this.variableSettings.length > 0) {
            for (const item of this.variableSettings) {
                item.MexTag = IntermediateCatchEventImpl.MEXTAG;
                list.push(item);
            }
        }
        return list;
    }
    /**
     * @protected
     * @param {?} extensionElements
     * @return {?}
     */
    SetExtensionElements4LoadFrom(extensionElements) {
        super.SetExtensionElements4LoadFrom(extensionElements);
        for (let extensionElement of extensionElements) {
            if (extensionElement.MexTag !== IntermediateCatchEventImpl.MEXTAG)
                continue;
            switch (extensionElement.ClrTypeID) {
                case BackWardRule.Clr_Type_ID:
                    this.backWardRule = ((/** @type {?} */ (extensionElement)));
                    break;
                case VariableSetting.Clr_Type_ID:
                    this.variableSettings.push((/** @type {?} */ (extensionElement)));
                    ;
                    break;
                default:
                    break;
            }
        }
    }
    /**
     * @return {?}
     */
    initEventDefinitions() {
        /** @type {?} */
        const passEvent = new SignalEventDefinitionImpl(this.Model);
        passEvent.name = '通过';
        passEvent.triggerAction = 'Pass';
        passEvent.Async = false;
        passEvent.SignalRef = 'Pass';
        this.EventDefinitions.push(passEvent);
        /** @type {?} */
        const backEvent = new SignalEventDefinitionImpl(this.Model);
        backEvent.name = '驳回';
        backEvent.triggerAction = 'Back';
        backEvent.Async = false;
        backEvent.SignalRef = 'Back';
        this.EventDefinitions.push(backEvent);
        /** @type {?} */
        const abortEvent = new SignalEventDefinitionImpl(this.Model);
        abortEvent.name = '终止';
        abortEvent.triggerAction = 'Abort';
        abortEvent.Async = false;
        abortEvent.SignalRef = 'Abort';
        this.EventDefinitions.push(abortEvent);
        // 初始化驳回规则
        this.backWardRule = new BackWardRule(this.Model);
    }
    /**
     * @return {?}
     */
    NewInstance() {
        return new IntermediateCatchEventImpl(this.Model);
    }
    /**
     * @return {?}
     */
    clone() {
        /** @type {?} */
        const intermediateCatchEventImpl = new IntermediateCatchEventImpl(this.Model);
        intermediateCatchEventImpl.Name = this.Name;
        intermediateCatchEventImpl.variableSettings = new Array();
        if (this.variableSettings && this.variableSettings.length > 0) {
            for (const v of this.variableSettings) {
                /** @type {?} */
                const variableSetting = v.clone();
                intermediateCatchEventImpl.variableSettings.push(variableSetting);
            }
        }
        if (this.backWardRule) {
            intermediateCatchEventImpl.backWardRule = this.backWardRule.clone();
        }
        intermediateCatchEventImpl.EventDefinitions = new Array();
        if (this.EventDefinitions && this.EventDefinitions.length > 0) {
            for (const e of this.EventDefinitions) {
                /** @type {?} */
                const signalEventDefinitionImpl = (/** @type {?} */ (e));
                /** @type {?} */
                const eventDefinition = signalEventDefinitionImpl.clone();
                intermediateCatchEventImpl.EventDefinitions.push(eventDefinition);
            }
        }
        return intermediateCatchEventImpl;
    }
}
IntermediateCatchEventImpl.Clr_Type_ID = "wf.IntermediateCatchEventImpl";
IntermediateCatchEventImpl.MEXTAG = "wf.IntermediateCatchEventImpl";
if (false) {
    /** @type {?} */
    IntermediateCatchEventImpl.Clr_Type_ID;
    /**
     * @type {?}
     * @private
     */
    IntermediateCatchEventImpl.MEXTAG;
    /** @type {?} */
    IntermediateCatchEventImpl.prototype.ClrTypeID;
    /** @type {?} */
    IntermediateCatchEventImpl.prototype.backWardRule;
    /** @type {?} */
    IntermediateCatchEventImpl.prototype.variableSettings;
}
BpmnModelHelper.RegisterElementType(new IntermediateCatchEventImpl(new BpmnModel()));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXdmL3dmLXByb2Nlc3MtbW9kZWwvIiwic291cmNlcyI6WyJsaWIvbW9kZWwvSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFvQixzQkFBc0IsRUFBb0MsTUFBTSxxQkFBcUIsQ0FBQztBQUM3SSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDNUUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDeEUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBELE1BQU0sT0FBTywwQkFBMkIsU0FBUSxzQkFBc0I7Ozs7SUFTbEUsWUFBWSxLQUFnQjtRQUN4QixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFSakIsY0FBUyxHQUFXLDBCQUEwQixDQUFDLFdBQVcsQ0FBQztJQVMzRCxDQUFDOzs7O0lBRUQsbUJBQW1CO1FBQ2YsS0FBSyxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7SUFDeEMsQ0FBQzs7Ozs7SUFFUyw4QkFBOEI7O1lBQ2hDLElBQUksR0FBRyxLQUFLLENBQUMsOEJBQThCLEVBQUU7UUFFakQsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksRUFBRTtZQUMzQixJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRywwQkFBMEIsQ0FBQyxNQUFNLENBQUM7WUFDN0QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDaEM7UUFDRCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sR0FB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aW9uRWxlbWVudCwgSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudCwgRXh0ZW5zaW9uTWV0aG9kLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQGVkcC1wbWYvYnBtbi1tb2RlbFwiO1xyXG5pbXBvcnQgeyBCYWNrV2FyZFJ1bGUgfSBmcm9tIFwiLi9leHRlbnNpb24vY29tcGxldGlvbi1zdHJhdGVneS9CYWNrV2FyZFJ1bGVcIjtcclxuaW1wb3J0IHsgU2lnbmFsRXZlbnREZWZpbml0aW9uSW1wbCB9IGZyb20gXCIuL1NpZ25hbEV2ZW50RGVmaW5pdGlvbkltcGxcIjtcclxuaW1wb3J0IHsgVmFyaWFibGVTZXR0aW5nIH0gZnJvbSBcIi4vVmFyaWFibGVTZXR0aW5nXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwgZXh0ZW5kcyBJbnRlcm1lZGlhdGVDYXRjaEV2ZW50IHtcclxuICAgIHN0YXRpYyBDbHJfVHlwZV9JRDogc3RyaW5nID0gXCJ3Zi5JbnRlcm1lZGlhdGVDYXRjaEV2ZW50SW1wbFwiO1xyXG4gICAgQ2xyVHlwZUlEOiBzdHJpbmcgPSBJbnRlcm1lZGlhdGVDYXRjaEV2ZW50SW1wbC5DbHJfVHlwZV9JRDtcclxuICAgIHByaXZhdGUgc3RhdGljIE1FWFRBRzogc3RyaW5nID0gXCJ3Zi5JbnRlcm1lZGlhdGVDYXRjaEV2ZW50SW1wbFwiO1xyXG5cclxuICAgIGJhY2tXYXJkUnVsZTogQmFja1dhcmRSdWxlO1xyXG4gICAgdmFyaWFibGVTZXR0aW5nczogQXJyYXk8VmFyaWFibGVTZXR0aW5nPjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IobW9kZWw6IEJwbW5Nb2RlbCkge1xyXG4gICAgICAgIHN1cGVyKG1vZGVsKTtcclxuICAgIH1cclxuXHJcbiAgICBSZXNldEJlZm9yZUxvYWRGcm9tKCkge1xyXG4gICAgICAgIHN1cGVyLlJlc2V0QmVmb3JlTG9hZEZyb20oKTtcclxuXHJcbiAgICAgICAgdGhpcy52YXJpYWJsZVNldHRpbmdzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIEdldEV4dGVuc2lvbkVsZW1lbnRzNENvbnZlcnRUbygpOiBFeHRlbnNpb25FbGVtZW50W10ge1xyXG4gICAgICAgIGxldCBsaXN0ID0gc3VwZXIuR2V0RXh0ZW5zaW9uRWxlbWVudHM0Q29udmVydFRvKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJhY2tXYXJkUnVsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja1dhcmRSdWxlLk1leFRhZyA9IEludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsLk1FWFRBRztcclxuICAgICAgICAgICAgbGlzdC5wdXNoKHRoaXMuYmFja1dhcmRSdWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGVTZXR0aW5ncyAhPSBudWxsICYmIHRoaXMudmFyaWFibGVTZXR0aW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnZhcmlhYmxlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uTWV4VGFnID0gSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwuTUVYVEFHO1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIFNldEV4dGVuc2lvbkVsZW1lbnRzNExvYWRGcm9tKGV4dGVuc2lvbkVsZW1lbnRzOiBFeHRlbnNpb25FbGVtZW50W10pIHtcclxuICAgICAgICBzdXBlci5TZXRFeHRlbnNpb25FbGVtZW50czRMb2FkRnJvbShleHRlbnNpb25FbGVtZW50cyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGV4dGVuc2lvbkVsZW1lbnQgb2YgZXh0ZW5zaW9uRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbkVsZW1lbnQuTWV4VGFnICE9PSBJbnRlcm1lZGlhdGVDYXRjaEV2ZW50SW1wbC5NRVhUQUcpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgc3dpdGNoIChleHRlbnNpb25FbGVtZW50LkNsclR5cGVJRCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBCYWNrV2FyZFJ1bGUuQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrV2FyZFJ1bGUgPSAoZXh0ZW5zaW9uRWxlbWVudCBhcyBCYWNrV2FyZFJ1bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBWYXJpYWJsZVNldHRpbmcuQ2xyX1R5cGVfSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YXJpYWJsZVNldHRpbmdzLnB1c2goZXh0ZW5zaW9uRWxlbWVudCBhcyBWYXJpYWJsZVNldHRpbmcpOztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEV2ZW50RGVmaW5pdGlvbnMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhc3NFdmVudCA9IG5ldyBTaWduYWxFdmVudERlZmluaXRpb25JbXBsKHRoaXMuTW9kZWwpO1xyXG4gICAgICAgIHBhc3NFdmVudC5uYW1lID0gJ+mAmui/hyc7XHJcbiAgICAgICAgcGFzc0V2ZW50LnRyaWdnZXJBY3Rpb24gPSAnUGFzcydcclxuICAgICAgICBwYXNzRXZlbnQuQXN5bmMgPSBmYWxzZTtcclxuICAgICAgICBwYXNzRXZlbnQuU2lnbmFsUmVmID0gJ1Bhc3MnO1xyXG4gICAgICAgIHRoaXMuRXZlbnREZWZpbml0aW9ucy5wdXNoKHBhc3NFdmVudCk7XHJcbiAgICAgICAgY29uc3QgYmFja0V2ZW50ID0gbmV3IFNpZ25hbEV2ZW50RGVmaW5pdGlvbkltcGwodGhpcy5Nb2RlbCk7XHJcbiAgICAgICAgYmFja0V2ZW50Lm5hbWUgPSAn6amz5ZueJztcclxuICAgICAgICBiYWNrRXZlbnQudHJpZ2dlckFjdGlvbiA9ICdCYWNrJ1xyXG4gICAgICAgIGJhY2tFdmVudC5Bc3luYyA9IGZhbHNlO1xyXG4gICAgICAgIGJhY2tFdmVudC5TaWduYWxSZWYgPSAnQmFjayc7XHJcbiAgICAgICAgdGhpcy5FdmVudERlZmluaXRpb25zLnB1c2goYmFja0V2ZW50KTtcclxuICAgICAgICBjb25zdCBhYm9ydEV2ZW50ID0gbmV3IFNpZ25hbEV2ZW50RGVmaW5pdGlvbkltcGwodGhpcy5Nb2RlbCk7XHJcbiAgICAgICAgYWJvcnRFdmVudC5uYW1lID0gJ+e7iOatoic7XHJcbiAgICAgICAgYWJvcnRFdmVudC50cmlnZ2VyQWN0aW9uID0gJ0Fib3J0J1xyXG4gICAgICAgIGFib3J0RXZlbnQuQXN5bmMgPSBmYWxzZTtcclxuICAgICAgICBhYm9ydEV2ZW50LlNpZ25hbFJlZiA9ICdBYm9ydCc7XHJcbiAgICAgICAgdGhpcy5FdmVudERlZmluaXRpb25zLnB1c2goYWJvcnRFdmVudCk7XHJcblxyXG4gICAgICAgIC8vIOWIneWni+WMlumps+WbnuinhOWImVxyXG4gICAgICAgIHRoaXMuYmFja1dhcmRSdWxlID0gbmV3IEJhY2tXYXJkUnVsZSh0aGlzLk1vZGVsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgTmV3SW5zdGFuY2UoKTogSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwodGhpcy5Nb2RlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKTogSW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwge1xyXG4gICAgICAgIGNvbnN0IGludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsID0gbmV3IEludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsKHRoaXMuTW9kZWwpO1xyXG4gICAgICAgIGludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsLk5hbWUgPSB0aGlzLk5hbWU7XHJcblxyXG4gICAgICAgIGludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsLnZhcmlhYmxlU2V0dGluZ3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBpZiAodGhpcy52YXJpYWJsZVNldHRpbmdzICYmIHRoaXMudmFyaWFibGVTZXR0aW5ncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB0aGlzLnZhcmlhYmxlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlU2V0dGluZyA9IHYuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgIGludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsLnZhcmlhYmxlU2V0dGluZ3MucHVzaCh2YXJpYWJsZVNldHRpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5iYWNrV2FyZFJ1bGUpIHtcclxuICAgICAgICAgICAgaW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwuYmFja1dhcmRSdWxlID0gdGhpcy5iYWNrV2FyZFJ1bGUuY2xvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsLkV2ZW50RGVmaW5pdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBpZiAodGhpcy5FdmVudERlZmluaXRpb25zICYmIHRoaXMuRXZlbnREZWZpbml0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLkV2ZW50RGVmaW5pdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hbEV2ZW50RGVmaW5pdGlvbkltcGwgPSBlIGFzIFNpZ25hbEV2ZW50RGVmaW5pdGlvbkltcGw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudERlZmluaXRpb24gPSBzaWduYWxFdmVudERlZmluaXRpb25JbXBsLmNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGwuRXZlbnREZWZpbml0aW9ucy5wdXNoKGV2ZW50RGVmaW5pdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gaW50ZXJtZWRpYXRlQ2F0Y2hFdmVudEltcGw7XHJcbiAgICB9XHJcbn1cclxuQnBtbk1vZGVsSGVscGVyLlJlZ2lzdGVyRWxlbWVudFR5cGUobmV3IEludGVybWVkaWF0ZUNhdGNoRXZlbnRJbXBsKG5ldyBCcG1uTW9kZWwoKSkpOyJdfQ==