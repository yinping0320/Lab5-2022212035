/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { SessionService, HttpService } from '@ecp-caf/caf-common';
import { forkJoin } from 'rxjs';
var UserService = /** @class */ (function () {
    function UserService(http, httpSvc, sessionSvc) {
        this.http = http;
        this.httpSvc = httpSvc;
        this.sessionSvc = sessionSvc;
    }
    /**
     * @param {?} ids
     * @return {?}
     */
    UserService.prototype.getUsersByIds = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        /** @type {?} */
        var pathUrl = '/api/runtime/sys/v1.0/users';
        return forkJoin(ids.map((/**
         * @param {?} id
         * @return {?}
         */
        function (id) { return _this.http.get(pathUrl + ("/" + id) + "?mode=0002"); }))); //mode用于获取组织全路径
    };
    /**
     * @param {?} searchValue
     * @param {?} index
     * @param {?} size
     * @return {?}
     */
    UserService.prototype.getUserList = /**
     * @param {?} searchValue
     * @param {?} index
     * @param {?} size
     * @return {?}
     */
    function (searchValue, index, size) {
        if (searchValue) {
            return this.getUser('codeorname', searchValue, index, size);
        }
        else {
            return this.getUser('', '', index, size);
        }
    };
    /**
     * @private
     * @param {?} field
     * @param {?} value
     * @param {?} index
     * @param {?} size
     * @return {?}
     */
    UserService.prototype.getUser = /**
     * @private
     * @param {?} field
     * @param {?} value
     * @param {?} index
     * @param {?} size
     * @return {?}
     */
    function (field, value, index, size) {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/users";
        url += field ?
            "?param={\"notGetCurrentUser\":false,\"pageIndex\":" + index + ",\"pageSize\":" + size + ",\"" + field + "\":'" + value + "',\"orderField\":\"order\", \"withAllOrg\": \"true\", \"queryMode\":\"0002\"}" :
            "?param={\"notGetCurrentUser\":false,\"pageIndex\":" + index + ",\"pageSize\":" + size + ",\"orderField\":\"order\", \"withAllOrg\": \"true\", \"queryMode\":\"0002\"}";
        return this.httpSvc.get(url);
    };
    /**
     * @param {?} searchValue
     * @param {?} index
     * @param {?} size
     * @param {?=} withAllOrg
     * @param {?=} orgId
     * @return {?}
     */
    UserService.prototype.getUserList_Assign = /**
     * @param {?} searchValue
     * @param {?} index
     * @param {?} size
     * @param {?=} withAllOrg
     * @param {?=} orgId
     * @return {?}
     */
    function (searchValue, index, size, withAllOrg, orgId) {
        if (searchValue) {
            return this.getUser_Assign('codeorname', searchValue, index, size, withAllOrg, orgId);
        }
        else {
            return this.getUser_Assign('', '', index, size, withAllOrg, orgId);
        }
    };
    /**
     * @private
     * @param {?} field
     * @param {?} value
     * @param {?} index
     * @param {?} size
     * @param {?} withAllOrg
     * @param {?} orgId
     * @return {?}
     */
    UserService.prototype.getUser_Assign = /**
     * @private
     * @param {?} field
     * @param {?} value
     * @param {?} index
     * @param {?} size
     * @param {?} withAllOrg
     * @param {?} orgId
     * @return {?}
     */
    function (field, value, index, size, withAllOrg, orgId) {
        /** @type {?} */
        var url = "/api/runtime/sys/v1.0/users";
        url += field ?
            "?param={\"notGetCurrentUser\":false,\"pageIndex\":" + index + ",\"pageSize\":" + size + ",\"" + field + "\":'" + value + "',\"orderField\":\"order\", \"withAllOrg\": \"true\", \"queryMode\":\"0002\"}" :
            "?param={\"notGetCurrentUser\":false,\"pageIndex\":" + index + ",\"pageSize\":" + size + ",\"orderField\":\"order\", \"withAllOrg\":'" + withAllOrg + "',\"orgId\":'" + orgId + "', \"queryMode\":\"0002\"}";
        return this.httpSvc.get(url);
    };
    /**
     * 构造Header
     */
    /**
     * 构造Header
     * @private
     * @return {?}
     */
    UserService.prototype.getBatchHeader = /**
     * 构造Header
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var sessionId = this.sessionSvc.getCurrentSeesionId();
        /** @type {?} */
        var headers = new HttpHeaders().set('SessionId', sessionId).set('Accept', 'application/json');
        // 此处key必须是headers
        return headers;
    };
    /**
     * 转换配置大小写
     * @param jsonObj Object
     */
    /**
     * 转换配置大小写
     * @param {?} jsonObj Object
     * @return {?}
     */
    UserService.prototype.toUpperCase = /**
     * 转换配置大小写
     * @param {?} jsonObj Object
     * @return {?}
     */
    function (jsonObj) {
        var e_1, _a;
        if (typeof (jsonObj) === 'object') {
            try {
                for (var _b = tslib_1.__values(Object.keys(jsonObj)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var key = _c.value;
                    jsonObj[key.substring(0, 1).toUpperCase() + key.substring(1)] = jsonObj[key];
                    delete (jsonObj[key]);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        return jsonObj;
    };
    UserService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    UserService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: HttpService },
        { type: SessionService }
    ]; };
    return UserService;
}());
export { UserService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    UserService.prototype.http;
    /**
     * @type {?}
     * @private
     */
    UserService.prototype.httpSvc;
    /**
     * @type {?}
     * @private
     */
    UserService.prototype.sessionSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi9ydGRldmtpdC8iLCJzb3VyY2VzIjpbImxpYi9ydW50aW1lL3NlcnZpY2VzL3VzZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMvRCxPQUFPLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFaEM7SUFHRSxxQkFDVSxJQUFnQixFQUNoQixPQUFvQixFQUNwQixVQUEwQjtRQUYxQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLFlBQU8sR0FBUCxPQUFPLENBQWE7UUFDcEIsZUFBVSxHQUFWLFVBQVUsQ0FBZ0I7SUFDaEMsQ0FBQzs7Ozs7SUFFTCxtQ0FBYTs7OztJQUFiLFVBQWMsR0FBYTtRQUEzQixpQkFHQzs7WUFGSyxPQUFPLEdBQUcsNkJBQTZCO1FBQzNDLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxFQUFFLElBQUksT0FBQSxLQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLElBQUcsTUFBSSxFQUFJLENBQUEsR0FBRyxZQUFZLENBQUMsRUFBaEQsQ0FBZ0QsRUFBQyxDQUFDLENBQUMsQ0FBQSxlQUFlO0lBQ2xHLENBQUM7Ozs7Ozs7SUFFRCxpQ0FBVzs7Ozs7O0lBQVgsVUFBWSxXQUFtQixFQUFFLEtBQWEsRUFBRSxJQUFZO1FBQzFELElBQUksV0FBVyxFQUFFO1lBQ2YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzdEO2FBQU07WUFDTCxP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QXFFQztTQXBFWSxXQUFXOzs7Ozs7SUFHcEIsMkJBQXdCOzs7OztJQUN4Qiw4QkFBNEI7Ozs7O0lBQzVCLGlDQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UsIEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IGZvcmtKb2luIH0gZnJvbSAncnhqcyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBVc2VyU2VydmljZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgcHJpdmF0ZSBodHRwU3ZjOiBIdHRwU2VydmljZSxcclxuICAgIHByaXZhdGUgc2Vzc2lvblN2YzogU2Vzc2lvblNlcnZpY2UsXHJcbiAgKSB7IH1cclxuXHJcbiAgZ2V0VXNlcnNCeUlkcyhpZHM6IHN0cmluZ1tdKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIHZhciBwYXRoVXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC91c2Vycyc7XHJcbiAgICByZXR1cm4gZm9ya0pvaW4oaWRzLm1hcChpZCA9PiB0aGlzLmh0dHAuZ2V0KHBhdGhVcmwgKyBgLyR7aWR9YCArIGA/bW9kZT0wMDAyYCkpKTsvL21vZGXnlKjkuo7ojrflj5bnu4Tnu4flhajot6/lvoRcclxuICB9XHJcblxyXG4gIGdldFVzZXJMaXN0KHNlYXJjaFZhbHVlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIHNpemU6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBpZiAoc2VhcmNoVmFsdWUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlcignY29kZW9ybmFtZScsIHNlYXJjaFZhbHVlLCBpbmRleCwgc2l6ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRVc2VyKCcnLCAnJywgaW5kZXgsIHNpemUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRVc2VyKGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIHNpemU6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBsZXQgdXJsID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC91c2Vyc2A7XHJcbiAgICB1cmwgKz0gZmllbGQgPyBcclxuICAgICAgYD9wYXJhbT17XCJub3RHZXRDdXJyZW50VXNlclwiOmZhbHNlLFwicGFnZUluZGV4XCI6JHtpbmRleH0sXCJwYWdlU2l6ZVwiOiR7c2l6ZX0sXCIke2ZpZWxkfVwiOicke3ZhbHVlfScsXCJvcmRlckZpZWxkXCI6XCJvcmRlclwiLCBcIndpdGhBbGxPcmdcIjogXCJ0cnVlXCIsIFwicXVlcnlNb2RlXCI6XCIwMDAyXCJ9YCA6XHJcbiAgICAgIGA/cGFyYW09e1wibm90R2V0Q3VycmVudFVzZXJcIjpmYWxzZSxcInBhZ2VJbmRleFwiOiR7aW5kZXh9LFwicGFnZVNpemVcIjoke3NpemV9LFwib3JkZXJGaWVsZFwiOlwib3JkZXJcIiwgXCJ3aXRoQWxsT3JnXCI6IFwidHJ1ZVwiLCBcInF1ZXJ5TW9kZVwiOlwiMDAwMlwifWA7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckxpc3RfQXNzaWduKHNlYXJjaFZhbHVlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIHNpemU6IG51bWJlciwgd2l0aEFsbE9yZz86IGJvb2xlYW4sIG9yZ0lkPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGlmIChzZWFyY2hWYWx1ZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRVc2VyX0Fzc2lnbignY29kZW9ybmFtZScsIHNlYXJjaFZhbHVlLCBpbmRleCwgc2l6ZSwgd2l0aEFsbE9yZywgb3JnSWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlcl9Bc3NpZ24oJycsICcnLCBpbmRleCwgc2l6ZSwgd2l0aEFsbE9yZywgb3JnSWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRVc2VyX0Fzc2lnbihmaWVsZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBzaXplOiBudW1iZXIsIHdpdGhBbGxPcmc6IGJvb2xlYW4sIG9yZ0lkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgbGV0IHVybCA9IGAvYXBpL3J1bnRpbWUvc3lzL3YxLjAvdXNlcnNgO1xyXG4gICAgdXJsICs9IGZpZWxkID8gXHJcbiAgICAgIGA/cGFyYW09e1wibm90R2V0Q3VycmVudFVzZXJcIjpmYWxzZSxcInBhZ2VJbmRleFwiOiR7aW5kZXh9LFwicGFnZVNpemVcIjoke3NpemV9LFwiJHtmaWVsZH1cIjonJHt2YWx1ZX0nLFwib3JkZXJGaWVsZFwiOlwib3JkZXJcIiwgXCJ3aXRoQWxsT3JnXCI6IFwidHJ1ZVwiLCBcInF1ZXJ5TW9kZVwiOlwiMDAwMlwifWAgOlxyXG4gICAgICBgP3BhcmFtPXtcIm5vdEdldEN1cnJlbnRVc2VyXCI6ZmFsc2UsXCJwYWdlSW5kZXhcIjoke2luZGV4fSxcInBhZ2VTaXplXCI6JHtzaXplfSxcIm9yZGVyRmllbGRcIjpcIm9yZGVyXCIsIFwid2l0aEFsbE9yZ1wiOicke3dpdGhBbGxPcmd9JyxcIm9yZ0lkXCI6JyR7b3JnSWR9JywgXCJxdWVyeU1vZGVcIjpcIjAwMDJcIn1gO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOmAoEhlYWRlclxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0QmF0Y2hIZWFkZXIoKTogYW55IHtcclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMuc2Vzc2lvblN2Yy5nZXRDdXJyZW50U2Vlc2lvbklkKCk7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCkuc2V0KCdTZXNzaW9uSWQnLCBzZXNzaW9uSWQpLnNldCgnQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuICAgIC8vIOatpOWkhGtleeW/hemhu+aYr2hlYWRlcnNcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L2s5o2i6YWN572u5aSn5bCP5YaZXHJcbiAgICogQHBhcmFtIGpzb25PYmogT2JqZWN0XHJcbiAgICovXHJcbiAgdG9VcHBlckNhc2UoanNvbk9iajogb2JqZWN0KTogYW55IHtcclxuICAgIGlmICh0eXBlb2YgKGpzb25PYmopID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhqc29uT2JqKSkge1xyXG4gICAgICAgIGpzb25PYmpba2V5LnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKV0gPSBqc29uT2JqW2tleV07XHJcbiAgICAgICAgZGVsZXRlIChqc29uT2JqW2tleV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ganNvbk9iajtcclxuICB9XHJcbn1cclxuIl19