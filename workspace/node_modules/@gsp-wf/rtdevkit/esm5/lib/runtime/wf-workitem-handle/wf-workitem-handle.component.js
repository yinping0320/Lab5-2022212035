/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { TaskService } from '../services/task.service';
import { CompleteContext } from '../../entity';
import { NotifyService } from '@farris/ui-notify';
import { TaskSignaddComponent } from '../components/task-signadd/task-signadd.component';
import { DialogComponent } from '@farris/ui-dialog';
import { from } from 'rxjs';
import { I18nService } from '../services/i18n.service';
var WfWorkitemHandleComponent = /** @class */ (function () {
    function WfWorkitemHandleComponent(taskSvc, notify, i18nService) {
        var _this = this;
        this.taskSvc = taskSvc;
        this.notify = notify;
        this.i18nService = i18nService;
        this.completeContext = new CompleteContext();
        // 加签选中人
        this.displayPlaceholder = "请选择"; //跳转的默认显示节点
        //跳转的默认显示节点
        this.hasDefaultBranch = true;
        /**
         * 任务办理动作列表
         */
        this.actions = new EventEmitter();
        /**
         * 任务办理完成事件
         */
        this.completed = new EventEmitter();
        // 当前选中动作和动作实现
        this.preFuncList = [];
        this.postFuncList = [];
        // 弹框高度设置
        this.height = 420;
        this.actionsTitle = {
            pass: '',
            back: '',
            refuse: '',
            more: '',
            viewLog: '',
            viewFlowChart: '',
            viewBizlog: ''
        };
        /** @type {?} */
        var titles = this.i18nService.getValue('static.taskActions');
        Object.keys(this.actionsTitle).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            _this.actionsTitle[key] = titles[key];
        }));
    }
    Object.defineProperty(WfWorkitemHandleComponent.prototype, "workitemId", {
        get: /**
         * @return {?}
         */
        function () {
            return this.inWorkitemId;
        },
        /**
         * 任务Id
         */
        set: /**
         * 任务Id
         * @param {?} workitemId
         * @return {?}
         */
        function (workitemId) {
            this.inWorkitemId = (workitemId && workitemId.trim());
            if (this.inWorkitemId) {
                this.refreshActions();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * 刷新动作列表
     */
    /**
     * 刷新动作列表
     * @private
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.refreshActions = /**
     * 刷新动作列表
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.taskSvc.getWorkItemActions(this.inWorkitemId).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            // 临时方案：oData不支持自定义function $expand展开，临时序列化处理
            _this.taskActions = re.map((/**
             * @param {?} action
             * @return {?}
             */
            function (action) {
                action.parameters = JSON.parse(action.parameters);
                return action;
            }));
            _this.taskActions = _this.taskActions.filter((/**
             * @param {?} a
             * @return {?}
             */
            function (a) {
                return a.code !== 'ViewBizLog'
                    && a.code !== 'ViewFlowChart'
                    && a.code !== 'ViewExecuteForm';
            }));
            _this.actions.emit(_this.taskActions);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.showError(error);
        }));
    };
    /**
     * 动作完成后事件
     * @param result 事件结果
     */
    /**
     * 动作完成后事件
     * @private
     * @param {?=} result 事件结果
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.completedEvt = /**
     * 动作完成后事件
     * @private
     * @param {?=} result 事件结果
     * @return {?}
     */
    function (result) {
        if (result === void 0) { result = true; }
        if (result) {
            this.refreshActions();
        }
        this.completed.emit(result);
    };
    /**
     * 完成审批任务
     * @param actionCode 任务办理动作编号
     * @param comment? 办理意见
     */
    /**
     * 完成审批任务
     * @param {?} actionCode 任务办理动作编号
     * @param {?=} comment
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.complete = /**
     * 完成审批任务
     * @param {?} actionCode 任务办理动作编号
     * @param {?=} comment
     * @return {?}
     */
    function (actionCode, comment) {
        var _this = this;
        switch (actionCode) {
            case 'AssignUser': { // 指派
                this.assignee(this.inWorkitemId);
                break;
            }
            case 'Claim': // 领用
                this.taskSvc.claim(this.inWorkitemId).subscribe((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.notify.success(_this.i18nService.getValue('cueWords.successClaim'));
                    _this.refreshActions();
                    _this.completed.emit(false);
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.showError(error);
                }));
                break;
            case 'Unclaim': // 取消领用
                this.taskSvc.unClaim(this.inWorkitemId).subscribe((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.notify.success(_this.i18nService.getValue('cueWords.successUnClaim'));
                    _this.refreshActions();
                    _this.completed.emit(false);
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.showError(error);
                }));
                break;
            case 'Retrieve': // 取回
                this.taskSvc.retrieve({ workItemId: this.inWorkitemId, comment: comment }).subscribe((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    _this.notify.success(_this.i18nService.getValue('cueWords.successRetrieve'));
                    _this.completedEvt();
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.showError(error);
                }));
                break;
            case 'Transfer': { // 移交
                this.transferContext = {
                    workItemId: this.inWorkitemId,
                    comment: comment
                };
                break;
            }
            case 'AddSignFront': // 征询
                this.addSignContext = {
                    workItemId: this.inWorkitemId,
                    action: 'AddSignFront'
                };
                break;
            default:
                this.executeTask(actionCode, comment);
        }
    };
    /**
     * @param {?} sucess
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.refreshList = /**
     * @param {?} sucess
     * @return {?}
     */
    function (sucess) {
        this.completedEvt(sucess);
    };
    // 弹出加签帮助
    // 弹出加签帮助
    /**
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.runAddSign = 
    // 弹出加签帮助
    /**
     * @return {?}
     */
    function () {
        this.addSignContext = {
            workItemId: this.inWorkitemId,
            action: 'AddSignBehind'
        };
    };
    // 加签完成
    // 加签完成
    /**
     * @param {?} sucess
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.addSignComplete = 
    // 加签完成
    /**
     * @param {?} sucess
     * @return {?}
     */
    function (sucess) {
        if (this.addSignContext.action === 'AddSignFront') {
            this.refreshList(sucess);
        }
        else {
            this.completeContext.signAssignees = this.addSignCmp.selectedUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.ID; }));
            this.selectAddSignees = this.addSignCmp.selectedUsers.map((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return user.Name; })).join(',');
        }
    };
    // 审批确认
    // 审批确认
    /**
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.handleOk = 
    // 审批确认
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.completeContext.comment) {
            this.notify.info("请输入审批意见");
            return;
        }
        if (!this.hasDefaultBranch && this.completeContext.destinationActivityId.length <= 0) { //没有默认分支并且用户没选择跳转节点，不允许提交
            this.notify.info("请选择目标节点");
            return;
        }
        this.taskSvc.excuteTask(this.inWorkitemId, this.completeContext).subscribe((/**
         * @param {?} cr
         * @return {?}
         */
        function (cr) {
            _this.commentModal.close();
            // 完成工作项后，检查是否需要执行后事件
            _this.excutePostEvent();
            if (_this.completeContext.conclusionValue === 'Pass') {
                _this.notify.success(_this.i18nService.getValue('cueWords.successPass'));
            }
            else if (_this.completeContext.conclusionValue === 'Back') {
                _this.notify.success(_this.i18nService.getValue('cueWords.successBack'));
            }
            else if (_this.completeContext.conclusionValue === 'Refuse') {
                _this.notify.success(_this.i18nService.getValue('cueWords.successRefuse'));
            }
            else {
                _this.notify.success(_this.i18nService.getValue('cueWords.success'));
            }
            if (cr.needInteraction) {
                _this.refreshActions(); //通过后弹出指派 add by fpf
                _this.assigneeInfos = [cr.nextFlowNodes[0].assigneeInfo];
            }
            else {
                _this.completedEvt();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.showError(error);
        }));
    };
    // 取消操作
    // 取消操作
    /**
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.handleCancel = 
    // 取消操作
    /**
     * @return {?}
     */
    function () {
        this.completeContext = new CompleteContext();
        this.commentModal.close();
    };
    // 指派操作
    // 指派操作
    /**
     * @private
     * @param {?} workItemId
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.assignee = 
    // 指派操作
    /**
     * @private
     * @param {?} workItemId
     * @return {?}
     */
    function (workItemId) {
        var _this = this;
        this.taskSvc.getAssigneeInfo(workItemId).subscribe((/**
         * @param {?} info
         * @return {?}
         */
        function (info) {
            info.assigneeInfo.workItemId = workItemId; //兼容处理，此处返回的workitemid为null
            _this.assigneeInfos = [info.assigneeInfo];
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.showError(error);
        }));
    };
    // 重新初始化当前参数
    // 重新初始化当前参数
    /**
     * @private
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.initState = 
    // 重新初始化当前参数
    /**
     * @private
     * @return {?}
     */
    function () {
        this.selectAddSignees = '';
        this.destActivities = null;
        this.needAddSign = false;
    };
    /**
     * @private
     * @param {?} actionCode
     * @param {?=} opinion
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.executeTask = /**
     * @private
     * @param {?} actionCode
     * @param {?=} opinion
     * @return {?}
     */
    function (actionCode, opinion) {
        var _this = this;
        this.initState();
        this.completeContext = {
            workItemId: this.inWorkitemId,
            conclusionValue: actionCode,
            comment: '',
            signAssignees: [],
            // 加签人员
            destinationActivityId: '' // 目标节点
        };
        this.completeContext.comment = actionCode === 'Pass' ? this.actionsTitle.pass : '';
        if (opinion) {
            this.completeContext.comment = opinion;
        }
        /** @type {?} */
        var action = this.taskActions.find((/**
         * @param {?} a
         * @return {?}
         */
        function (a) { return a.code === actionCode; }));
        this.taskSvc.getActionEntity(this.workitemId, actionCode).subscribe((/**
         * @param {?} act
         * @return {?}
         */
        function (act) {
            if (!act) { // 审批动作已删除，走完成工作项  TODO: 非完成工作项动作如何处理？
                _this.showExcuteModal(action);
            }
            else {
                from(_this.excuteAction(act)).subscribe((/**
                 * @return {?}
                 */
                function () {
                    if (!act.webComponent) {
                        _this.showExcuteModal(action);
                    }
                }));
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.showError(error);
        }));
    };
    /**
     * 加签，跳转情况
     * @param action 动作
     */
    /**
     * 加签，跳转情况
     * @private
     * @param {?} action 动作
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.showExcuteModal = /**
     * 加签，跳转情况
     * @private
     * @param {?} action 动作
     * @return {?}
     */
    function (action) {
        // 动作参数按照
        if (action && action.parameters) {
            // 跳转、驳回场景
            if (action.parameters.SelectTargetAble === 'True' || action.parameters.SelectTargetAble === 'true') {
                // this.taskSvc.getDestinationScope(this.inWorkitemId, action.code).subscribe((re: { id: string, name: string }[]) => {
                //   this.destActivities = re;
                // });
                this.getDestinationNodes(this.inWorkitemId, action.code);
            }
            // 需要加签
            if (action.parameters.AddSignBehindAble === 'True' || action.parameters.AddSignBehindAble === 'true') {
                this.needAddSign = true;
            }
        }
        this.commentModal.show();
    };
    /**
     * @private
     * @param {?} workItemId
     * @param {?} actionCode
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.getDestinationNodes = /**
     * @private
     * @param {?} workItemId
     * @param {?} actionCode
     * @return {?}
     */
    function (workItemId, actionCode) {
        var _this = this;
        /** @type {?} */
        var nextNodes = [];
        this.taskSvc.getDestinationScope(workItemId, actionCode).subscribe((/**
         * @param {?} re
         * @return {?}
         */
        function (re) {
            nextNodes = re;
            /** @type {?} */
            var des = re.map((/**
             * @param {?} a
             * @return {?}
             */
            function (a) { return a.nodeInfoList; }));
            /** @type {?} */
            var list = [];
            des.forEach((/**
             * @param {?} i
             * @return {?}
             */
            function (i) {
                list = list.concat(i);
            }));
            _this.destActivities = list.map((/**
             * @param {?} i
             * @return {?}
             */
            function (i) { return ({ id: i.activityDefinitionId, name: i.activityDefinitionName }); }));
            _this.hasDefaultBranch = _this.hasDefaultBranchFunc(nextNodes);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.showError(error);
        }));
    };
    /**
     * 跳转，返回的数据是否有默认分支
     * 如果返回的没有默认节点，跳转节点又没选的话，不允许提交
     * @param nextNodes
     */
    /**
     * 跳转，返回的数据是否有默认分支
     * 如果返回的没有默认节点，跳转节点又没选的话，不允许提交
     * @private
     * @param {?} nextNodes
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.hasDefaultBranchFunc = /**
     * 跳转，返回的数据是否有默认分支
     * 如果返回的没有默认节点，跳转节点又没选的话，不允许提交
     * @private
     * @param {?} nextNodes
     * @return {?}
     */
    function (nextNodes) {
        for (var i = 0; i < nextNodes.length; i++) {
            if (nextNodes[i].defaultBranch) {
                this.displayPlaceholder = nextNodes[i].nodeInfoList[0].activityDefinitionName;
                return true;
            }
        }
        return false;
    };
    /**
     * @private
     * @param {?} act
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.excuteAction = /**
     * @private
     * @param {?} act
     * @return {?}
     */
    function (act) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _loop_1, this_1, i;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getActionWebEventsFunc(act)];
                    case 1:
                        _a.sent();
                        if (this.preFuncList && this.preFuncList.length > 0) {
                            _loop_1 = function (i) {
                                this_1.preFuncList.filter((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.index === i; }))[0].func();
                            };
                            this_1 = this;
                            for (i = 0; i < this.preFuncList.length; i++) {
                                _loop_1(i);
                            }
                        }
                        if (this.webCptFunc) {
                            this.webCptFunc();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * @private
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.excutePostEvent = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.postFuncList && this.postFuncList.length > 0) {
            var _loop_2 = function (i) {
                this_2.postFuncList.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.index === i; }))[0].func();
            };
            var this_2 = this;
            for (var i = 0; i < this.postFuncList.length; i++) {
                _loop_2(i);
            }
        }
    };
    /**
     * 获取动作的前后事件和实现方法
     * @param act 动作
     */
    /**
     * 获取动作的前后事件和实现方法
     * @private
     * @param {?} act 动作
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.getActionWebEventsFunc = /**
     * 获取动作的前后事件和实现方法
     * @private
     * @param {?} act 动作
     * @return {?}
     */
    function (act) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var e_1, _a, e_2, _b, e_3, _c, reqMap, preIndex, postIndex, _d, _e, e, pre, cpt, _f, _g, a, post, reqMap_1, reqMap_1_1, r, m, e_3_1;
            return tslib_1.__generator(this, function (_h) {
                switch (_h.label) {
                    case 0:
                        this.preFuncList = [];
                        this.webCptFunc = null;
                        this.postFuncList = [];
                        reqMap = [];
                        preIndex = 0;
                        postIndex = 0;
                        if (act.preEvent && act.preEvent.length > 0) {
                            try {
                                for (_d = tslib_1.__values(act.preEvent), _e = _d.next(); !_e.done; _e = _d.next()) {
                                    e = _e.value;
                                    pre = {
                                        event: 'pre',
                                        index: preIndex++,
                                        funcName: e.component.split('#')[1],
                                        req: System.import(e.component.split('#')[0])
                                    };
                                    reqMap.push(pre);
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                        if (act.webComponent) {
                            cpt = {
                                event: 'cpt',
                                index: 0,
                                funcName: act.webComponent.split('#')[1],
                                req: System.import(act.webComponent.split('#')[0])
                            };
                            reqMap.push(cpt);
                        }
                        if (act.postEvent && act.postEvent.length > 0) {
                            try {
                                for (_f = tslib_1.__values(act.postEvent), _g = _f.next(); !_g.done; _g = _f.next()) {
                                    a = _g.value;
                                    post = {
                                        event: 'post',
                                        index: postIndex++,
                                        funcName: a.component.split('#')[1],
                                        req: System.import(a.component.split('#')[0])
                                    };
                                    reqMap.push(post);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                        _h.label = 1;
                    case 1:
                        _h.trys.push([1, 6, 7, 8]);
                        reqMap_1 = tslib_1.__values(reqMap), reqMap_1_1 = reqMap_1.next();
                        _h.label = 2;
                    case 2:
                        if (!!reqMap_1_1.done) return [3 /*break*/, 5];
                        r = reqMap_1_1.value;
                        return [4 /*yield*/, r.req];
                    case 3:
                        m = _h.sent();
                        if (r.event === 'pre') {
                            this.preFuncList.push({
                                index: r.index,
                                func: m.default[r.funcName]
                            });
                        }
                        else if (r.event === 'post') {
                            this.postFuncList.push({
                                index: r.index,
                                func: m.default[r.funcName]
                            });
                        }
                        else {
                            this.webCptFunc = m.default[r.funcName];
                        }
                        _h.label = 4;
                    case 4:
                        reqMap_1_1 = reqMap_1.next();
                        return [3 /*break*/, 2];
                    case 5: return [3 /*break*/, 8];
                    case 6:
                        e_3_1 = _h.sent();
                        e_3 = { error: e_3_1 };
                        return [3 /*break*/, 8];
                    case 7:
                        try {
                            if (reqMap_1_1 && !reqMap_1_1.done && (_c = reqMap_1.return)) _c.call(reqMap_1);
                        }
                        finally { if (e_3) throw e_3.error; }
                        return [7 /*endfinally*/];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 显示报错信息
     */
    /**
     * 显示报错信息
     * @private
     * @param {?} error
     * @return {?}
     */
    WfWorkitemHandleComponent.prototype.showError = /**
     * 显示报错信息
     * @private
     * @param {?} error
     * @return {?}
     */
    function (error) {
        if (error && error.error && error.error.Message) {
            this.notify.error(error.error.Message);
        }
        else {
            this.notify.error(error);
        }
    };
    WfWorkitemHandleComponent.decorators = [
        { type: Component, args: [{
                    selector: 'wf-workitem-handle',
                    template: "<farris-dialog #commentModal [enableScroll]= \"false\" [buttons]=\"buttonRef\" [width]=\"550\" [height]=\"360\" [title]=\"'static.title' | translate\">\r\n    <div style=\"padding: 20px;\">\r\n        <div>\r\n            <wf-comment class=\"w-100\" [(ngModel)]=\"completeContext.comment\" name=\"comment\"\r\n                [placeholder]=\"'static.inputHolder' | translate\"></wf-comment>\r\n        </div>\r\n        <div class=\"d-flex\" style=\"height:28px;overflow: hidden;\">\r\n            <div *ngIf=\"needAddSign\" style=\"flex:1;display: flex;height:28px;overflow: hidden;\" [ngStyle]=\"{'padding-right': destActivities ? '20px' : '0px'}\">\r\n                <label style=\"padding-right: 10px;line-height: 24px;\">{{ 'static.addSignee' | translate }}</label>\r\n                <div class=\"d-flex\" style=\"flex: 1\">\r\n                    <div class=\"input-group\">\r\n                        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"selectAddSignees\" [readOnly]=\"true\" placeholder=\"\u8BF7\u9009\u62E9\"/>\r\n                        <button class=\"k-button k-bare\" type=\"button\" (click)=\"runAddSign()\">\r\n                            <i class=\"f-icon f-icon-lookup\" style=\"color: #bfbfbf; margin: 0 -8px 0 0;\"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"destActivities\" style=\"flex:1;display: flex;height:28px;overflow: hidden;\">\r\n                <label style=\"padding-right: 10px;line-height: 24px;\">{{ 'static.selectActivity' | translate }}</label>\r\n                <div class=\"d-flex\" style=\"flex:1\">\r\n                    <farris-combo-list  [data]=\"destActivities\" [textField]=\"'name'\" [valueField]=\"'id'\" [idField]=\"'id'\"\r\n                        [(ngModel)]=\"completeContext.destinationActivityId\" style=\"flex: 1;\" [placeholder] = \"displayPlaceholder\">\r\n                    </farris-combo-list >\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</farris-dialog>\r\n<ng-template #buttonRef>\r\n    <button class=\"btn btn-sm btn-primary px-3\" (click)=\"handleOk()\">{{\r\n            'static.footOk' | translate }}</button>\r\n    <button class=\"btn btn-sm btn-default px-3\" (click)=\"handleCancel()\">{{\r\n            'static.footCancel' | translate }}</button>\r\n</ng-template>\r\n\r\n<!-- \u6307\u6D3E -->\r\n<wf-task-assign [assigneeInfo]=\"assigneeInfos\" (completed)=\"refreshList($event)\"></wf-task-assign>\r\n<!-- \u79FB\u4EA4 -->\r\n<wf-task-transfer [transfer_context]=\"transferContext\" (completed)=\"refreshList($event)\"></wf-task-transfer>\r\n<!-- \u52A0\u7B7E\u3001\u5F81\u8BE2 -->\r\n<wf-task-signadd [addsign_context]=\"addSignContext\" (completed)=\"addSignComplete($event)\"></wf-task-signadd>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    WfWorkitemHandleComponent.ctorParameters = function () { return [
        { type: TaskService },
        { type: NotifyService },
        { type: I18nService }
    ]; };
    WfWorkitemHandleComponent.propDecorators = {
        addSignCmp: [{ type: ViewChild, args: [TaskSignaddComponent,] }],
        commentModal: [{ type: ViewChild, args: ['commentModal',] }],
        workitemId: [{ type: Input }],
        actions: [{ type: Output }],
        completed: [{ type: Output }]
    };
    return WfWorkitemHandleComponent;
}());
export { WfWorkitemHandleComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    WfWorkitemHandleComponent.prototype.inWorkitemId;
    /**
     * @type {?}
     * @private
     */
    WfWorkitemHandleComponent.prototype.taskActions;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.completeContext;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.assigneeInfos;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.transferContext;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.destActivities;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.addSignContext;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.needAddSign;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.selectAddSignees;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.displayPlaceholder;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.hasDefaultBranch;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.addSignCmp;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.commentModal;
    /**
     * 任务办理动作列表
     * @type {?}
     */
    WfWorkitemHandleComponent.prototype.actions;
    /**
     * 任务办理完成事件
     * @type {?}
     */
    WfWorkitemHandleComponent.prototype.completed;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.preFuncList;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.webCptFunc;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.postFuncList;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.height;
    /** @type {?} */
    WfWorkitemHandleComponent.prototype.actionsTitle;
    /**
     * @type {?}
     * @private
     */
    WfWorkitemHandleComponent.prototype.taskSvc;
    /**
     * @type {?}
     * @private
     */
    WfWorkitemHandleComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    WfWorkitemHandleComponent.prototype.i18nService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Ytd29ya2l0ZW0taGFuZGxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atd2YvcnRkZXZraXQvIiwic291cmNlcyI6WyJsaWIvcnVudGltZS93Zi13b3JraXRlbS1oYW5kbGUvd2Ytd29ya2l0ZW0taGFuZGxlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUV2RCxPQUFPLEVBQUUsZUFBZSxFQUFrQyxNQUFNLGNBQWMsQ0FBQztBQUMvRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUFDekYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXBELE9BQU8sRUFBRSxJQUFJLEVBQWtCLE1BQU0sTUFBTSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUt2RDtJQXdFRSxtQ0FDVSxPQUFvQixFQUNwQixNQUFxQixFQUNyQixXQUF3QjtRQUhsQyxpQkFTQztRQVJTLFlBQU8sR0FBUCxPQUFPLENBQWE7UUFDcEIsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUNyQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQW5FbEMsb0JBQWUsR0FBRyxJQUFJLGVBQWUsRUFBRSxDQUFDOztRQWN4Qyx1QkFBa0IsR0FBVyxLQUFLLENBQUMsQ0FBQSxXQUFXOztRQUM5QyxxQkFBZ0IsR0FBRyxJQUFJLENBQUM7Ozs7UUF1QnhCLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBb0IsQ0FBQzs7OztRQU0vQyxjQUFTLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FB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U0FDeEM7YUFBTTtZQUNMLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzFCO0lBQ0gsQ0FBQzs7Z0JBbGFGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsb0JBQW9CO29CQUM5QiwyeUZBQWtEOztpQkFFbkQ7Ozs7Z0JBakJRLFdBQVc7Z0JBR1gsYUFBYTtnQkFLYixXQUFXOzs7NkJBNkJqQixTQUFTLFNBQUMsb0JBQW9COytCQUU5QixTQUFTLFNBQUMsY0FBYzs2QkFLeEIsS0FBSzswQkFjTCxNQUFNOzRCQU1OLE1BQU07O0lBZ1hULGdDQUFDO0NBQUEsQUFuYUQsSUFtYUM7U0E5WlkseUJBQXlCOzs7Ozs7SUFDcEMsaURBQTZCOzs7OztJQUM3QixnREFBc0M7O0lBQ3RDLG9EQUF3Qzs7SUFDeEMsa0RBQThCOztJQUM5QixvREFHRTs7SUFDRixtREFBK0M7O0lBRS9DLG1EQUdFOztJQUNGLGdEQUFxQjs7SUFDckIscURBQXlCOztJQUN6Qix1REFBbUM7O0lBQ25DLHFEQUF3Qjs7SUFDeEIsK0NBQ2lDOztJQUNqQyxpREFDOEI7Ozs7O0lBa0I5Qiw0Q0FDK0M7Ozs7O0lBSy9DLDhDQUN3Qzs7SUFHeEMsZ0RBQXdCOztJQUN4QiwrQ0FBZ0I7O0lBQ2hCLGlEQUF5Qjs7SUFHekIsMkNBQWE7O0lBRWIsaURBUUU7Ozs7O0lBR0EsNENBQTRCOzs7OztJQUM1QiwyQ0FBNkI7Ozs7O0lBQzdCLGdEQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUYXNrU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3Rhc2suc2VydmljZSc7XHJcbmltcG9ydCB7IFdvcmtpdGVtQWN0aW9uIH0gZnJvbSAnLi4vLi4vZW50aXR5L3dvcmtpdGVtLWFjdGlvbic7XHJcbmltcG9ydCB7IENvbXBsZXRlQ29udGV4dCwgQXNzaWduZWVJbmZvLCBDb21wbGV0ZVJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vZW50aXR5JztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgVGFza1NpZ25hZGRDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL3Rhc2stc2lnbmFkZC90YXNrLXNpZ25hZGQuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBBY3Rpb25FbnRpdHkgfSBmcm9tICcuLi8uLi9lbnRpdHkvYWN0aW9uLWVudGl0eSc7XHJcbmltcG9ydCB7IGZyb20sIG9mLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEkxOG5TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaTE4bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTmV4dE5vZGUgfSBmcm9tICcuLi8uLi9lbnRpdHkvZGVzdGluYXRpb24tbm9kZXMnO1xyXG5pbXBvcnQgeyBGbG93Tm9kZUluZm8gfSBmcm9tICcuLi8uLi9lbnRpdHkvZXhjdXRpb24tcmVzcG9uc2UnO1xyXG5cclxuZGVjbGFyZSBjb25zdCBTeXN0ZW06IGFueTtcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICd3Zi13b3JraXRlbS1oYW5kbGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi93Zi13b3JraXRlbS1oYW5kbGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3dmLXdvcmtpdGVtLWhhbmRsZS5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFdmV29ya2l0ZW1IYW5kbGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIHByaXZhdGUgaW5Xb3JraXRlbUlkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSB0YXNrQWN0aW9uczogV29ya2l0ZW1BY3Rpb25bXTtcclxuICBjb21wbGV0ZUNvbnRleHQgPSBuZXcgQ29tcGxldGVDb250ZXh0KCk7XHJcbiAgYXNzaWduZWVJbmZvczogQXNzaWduZWVJbmZvW107XHJcbiAgdHJhbnNmZXJDb250ZXh0OiB7XHJcbiAgICB3b3JrSXRlbUlkOiBzdHJpbmcsXHJcbiAgICBjb21tZW50OiBzdHJpbmdcclxuICB9O1xyXG4gIGRlc3RBY3Rpdml0aWVzOiB7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9W107XHJcbiAgLy8g5Yqg562+5b6B6K+i5LiK5LiL5paH5Y+C5pWwXHJcbiAgYWRkU2lnbkNvbnRleHQ6IHtcclxuICAgIHdvcmtJdGVtSWQ6IHN0cmluZyxcclxuICAgIGFjdGlvbjogJ0FkZFNpZ25Gcm9udCcgfCAnQWRkU2lnbkJlaGluZCdcclxuICB9O1xyXG4gIG5lZWRBZGRTaWduOiBib29sZWFuOyAvLyDmmK/lkKbpnIDopoHliqDnrb5cclxuICBzZWxlY3RBZGRTaWduZWVzOiBzdHJpbmc7IC8vIOWKoOetvumAieS4reS6ulxyXG4gIGRpc3BsYXlQbGFjZWhvbGRlcjogc3RyaW5nID0gXCLor7fpgInmi6lcIjsvL+i3s+i9rOeahOm7mOiupOaYvuekuuiKgueCuVxyXG4gIGhhc0RlZmF1bHRCcmFuY2ggPSB0cnVlO1xyXG4gIEBWaWV3Q2hpbGQoVGFza1NpZ25hZGRDb21wb25lbnQpXHJcbiAgYWRkU2lnbkNtcDogVGFza1NpZ25hZGRDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnY29tbWVudE1vZGFsJylcclxuICBjb21tZW50TW9kYWw6IERpYWxvZ0NvbXBvbmVudDtcclxuICAvKipcclxuICAgKiDku7vliqFJZFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHdvcmtpdGVtSWQod29ya2l0ZW1JZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmluV29ya2l0ZW1JZCA9ICh3b3JraXRlbUlkICYmIHdvcmtpdGVtSWQudHJpbSgpKTtcclxuICAgIGlmICh0aGlzLmluV29ya2l0ZW1JZCkge1xyXG4gICAgICB0aGlzLnJlZnJlc2hBY3Rpb25zKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCB3b3JraXRlbUlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW5Xb3JraXRlbUlkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Lu75Yqh5Yqe55CG5Yqo5L2c5YiX6KGoXHJcbiAgICovXHJcbiAgQE91dHB1dCgpXHJcbiAgYWN0aW9ucyA9IG5ldyBFdmVudEVtaXR0ZXI8V29ya2l0ZW1BY3Rpb25bXT4oKTtcclxuXHJcbiAgLyoqXHJcbiAgICog5Lu75Yqh5Yqe55CG5a6M5oiQ5LqL5Lu2XHJcbiAgICovXHJcbiAgQE91dHB1dCgpXHJcbiAgY29tcGxldGVkID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICAvLyDlvZPliY3pgInkuK3liqjkvZzlkozliqjkvZzlrp7njrBcclxuICBwcmVGdW5jTGlzdDogYW55W10gPSBbXTtcclxuICB3ZWJDcHRGdW5jOiBhbnk7XHJcbiAgcG9zdEZ1bmNMaXN0OiBhbnlbXSA9IFtdO1xyXG5cclxuICAvLyDlvLnmoYbpq5jluqborr7nva5cclxuICBoZWlnaHQgPSA0MjA7XHJcblxyXG4gIGFjdGlvbnNUaXRsZSA9IHtcclxuICAgIHBhc3M6ICcnLFxyXG4gICAgYmFjazogJycsXHJcbiAgICByZWZ1c2U6ICcnLFxyXG4gICAgbW9yZTogJycsXHJcbiAgICB2aWV3TG9nOiAnJyxcclxuICAgIHZpZXdGbG93Q2hhcnQ6ICcnLFxyXG4gICAgdmlld0JpemxvZzogJydcclxuICB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgdGFza1N2YzogVGFza1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgaTE4blNlcnZpY2U6IEkxOG5TZXJ2aWNlLFxyXG4gICkge1xyXG4gICAgY29uc3QgdGl0bGVzID0gdGhpcy5pMThuU2VydmljZS5nZXRWYWx1ZSgnc3RhdGljLnRhc2tBY3Rpb25zJyk7XHJcbiAgICBPYmplY3Qua2V5cyh0aGlzLmFjdGlvbnNUaXRsZSkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICB0aGlzLmFjdGlvbnNUaXRsZVtrZXldID0gdGl0bGVzW2tleV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yi35paw5Yqo5L2c5YiX6KGoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZWZyZXNoQWN0aW9ucygpIHtcclxuICAgIHRoaXMudGFza1N2Yy5nZXRXb3JrSXRlbUFjdGlvbnModGhpcy5pbldvcmtpdGVtSWQpLnN1YnNjcmliZSgocmU6IGFueSkgPT4ge1xyXG4gICAgICAvLyDkuLTml7bmlrnmoYjvvJpvRGF0YeS4jeaUr+aMgeiHquWumuS5iWZ1bmN0aW9uICRleHBhbmTlsZXlvIDvvIzkuLTml7bluo/liJfljJblpITnkIZcclxuICAgICAgdGhpcy50YXNrQWN0aW9ucyA9IHJlLm1hcChhY3Rpb24gPT4ge1xyXG4gICAgICAgIGFjdGlvbi5wYXJhbWV0ZXJzID0gSlNPTi5wYXJzZShhY3Rpb24ucGFyYW1ldGVycyk7XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbjtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudGFza0FjdGlvbnMgPSB0aGlzLnRhc2tBY3Rpb25zLmZpbHRlcihhID0+XHJcbiAgICAgICAgYS5jb2RlICE9PSAnVmlld0JpekxvZydcclxuICAgICAgICAmJiBhLmNvZGUgIT09ICdWaWV3Rmxvd0NoYXJ0J1xyXG4gICAgICAgICYmIGEuY29kZSAhPT0gJ1ZpZXdFeGVjdXRlRm9ybScpO1xyXG5cclxuICAgICAgdGhpcy5hY3Rpb25zLmVtaXQodGhpcy50YXNrQWN0aW9ucyk7XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yqo5L2c5a6M5oiQ5ZCO5LqL5Lu2XHJcbiAgICogQHBhcmFtIHJlc3VsdCDkuovku7bnu5PmnpxcclxuICAgKi9cclxuICBwcml2YXRlIGNvbXBsZXRlZEV2dChyZXN1bHQ6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIHRoaXMucmVmcmVzaEFjdGlvbnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29tcGxldGVkLmVtaXQocmVzdWx0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWujOaIkOWuoeaJueS7u+WKoVxyXG4gICAqIEBwYXJhbSBhY3Rpb25Db2RlIOS7u+WKoeWKnueQhuWKqOS9nOe8luWPt1xyXG4gICAqIEBwYXJhbSBjb21tZW50PyDlip7nkIbmhI/op4FcclxuICAgKi9cclxuICBjb21wbGV0ZShhY3Rpb25Db2RlOiBzdHJpbmcsIGNvbW1lbnQ/OiBzdHJpbmcpIHtcclxuICAgIHN3aXRjaCAoYWN0aW9uQ29kZSkge1xyXG4gICAgICBjYXNlICdBc3NpZ25Vc2VyJzogeyAvLyDmjIfmtL5cclxuICAgICAgICB0aGlzLmFzc2lnbmVlKHRoaXMuaW5Xb3JraXRlbUlkKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdDbGFpbSc6IC8vIOmihueUqFxyXG4gICAgICAgIHRoaXMudGFza1N2Yy5jbGFpbSh0aGlzLmluV29ya2l0ZW1JZCkuc3Vic2NyaWJlKHIgPT4ge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzQ2xhaW0nKSk7XHJcbiAgICAgICAgICB0aGlzLnJlZnJlc2hBY3Rpb25zKCk7XHJcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlZC5lbWl0KGZhbHNlKTtcclxuICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1VuY2xhaW0nOiAvLyDlj5bmtojpoobnlKhcclxuICAgICAgICB0aGlzLnRhc2tTdmMudW5DbGFpbSh0aGlzLmluV29ya2l0ZW1JZCkuc3Vic2NyaWJlKHIgPT4ge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzVW5DbGFpbScpKTtcclxuICAgICAgICAgIHRoaXMucmVmcmVzaEFjdGlvbnMoKTtcclxuICAgICAgICAgIHRoaXMuY29tcGxldGVkLmVtaXQoZmFsc2UpO1xyXG4gICAgICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUmV0cmlldmUnOiAvLyDlj5blm55cclxuICAgICAgICB0aGlzLnRhc2tTdmMucmV0cmlldmUoeyB3b3JrSXRlbUlkOiB0aGlzLmluV29ya2l0ZW1JZCwgY29tbWVudCB9KS5zdWJzY3JpYmUociA9PiB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3NSZXRyaWV2ZScpKTtcclxuICAgICAgICAgIHRoaXMuY29tcGxldGVkRXZ0KCk7XHJcbiAgICAgICAgfSxlcnJvciA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNob3dFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1RyYW5zZmVyJzogeyAvLyDnp7vkuqRcclxuICAgICAgICB0aGlzLnRyYW5zZmVyQ29udGV4dCA9IHtcclxuICAgICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMuaW5Xb3JraXRlbUlkLFxyXG4gICAgICAgICAgY29tbWVudFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnQWRkU2lnbkZyb250JzogLy8g5b6B6K+iXHJcbiAgICAgICAgdGhpcy5hZGRTaWduQ29udGV4dCA9IHtcclxuICAgICAgICAgIHdvcmtJdGVtSWQ6IHRoaXMuaW5Xb3JraXRlbUlkLFxyXG4gICAgICAgICAgYWN0aW9uOiAnQWRkU2lnbkZyb250J1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5leGVjdXRlVGFzayhhY3Rpb25Db2RlLCBjb21tZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZnJlc2hMaXN0KHN1Y2VzczogYm9vbGVhbikge1xyXG4gICAgdGhpcy5jb21wbGV0ZWRFdnQoc3VjZXNzKTtcclxuICB9XHJcbiAgLy8g5by55Ye65Yqg562+5biu5YqpXHJcbiAgcnVuQWRkU2lnbigpIHtcclxuICAgIHRoaXMuYWRkU2lnbkNvbnRleHQgPSB7XHJcbiAgICAgIHdvcmtJdGVtSWQ6IHRoaXMuaW5Xb3JraXRlbUlkLFxyXG4gICAgICBhY3Rpb246ICdBZGRTaWduQmVoaW5kJ1xyXG4gICAgfTtcclxuICB9XHJcbiAgLy8g5Yqg562+5a6M5oiQXHJcbiAgYWRkU2lnbkNvbXBsZXRlKHN1Y2VzczogYm9vbGVhbikge1xyXG5cclxuICAgIGlmICh0aGlzLmFkZFNpZ25Db250ZXh0LmFjdGlvbiA9PT0gJ0FkZFNpZ25Gcm9udCcpIHtcclxuICAgICAgdGhpcy5yZWZyZXNoTGlzdChzdWNlc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jb21wbGV0ZUNvbnRleHQuc2lnbkFzc2lnbmVlcyA9IHRoaXMuYWRkU2lnbkNtcC5zZWxlY3RlZFVzZXJzLm1hcCh1c2VyID0+IHVzZXIuSUQpO1xyXG4gICAgICB0aGlzLnNlbGVjdEFkZFNpZ25lZXMgPSB0aGlzLmFkZFNpZ25DbXAuc2VsZWN0ZWRVc2Vycy5tYXAodXNlciA9PiB1c2VyLk5hbWUpLmpvaW4oJywnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOWuoeaJueehruiupFxyXG4gIGhhbmRsZU9rKCkge1xyXG4gICAgaWYoIXRoaXMuY29tcGxldGVDb250ZXh0LmNvbW1lbnQpIHtcclxuICAgICAgdGhpcy5ub3RpZnkuaW5mbyhcIuivt+i+k+WFpeWuoeaJueaEj+ingVwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYoIXRoaXMuaGFzRGVmYXVsdEJyYW5jaCAmJiB0aGlzLmNvbXBsZXRlQ29udGV4dC5kZXN0aW5hdGlvbkFjdGl2aXR5SWQubGVuZ3RoIDw9IDApIHsvL+ayoeaciem7mOiupOWIhuaUr+W5tuS4lOeUqOaIt+ayoemAieaLqei3s+i9rOiKgueCue+8jOS4jeWFgeiuuOaPkOS6pFxyXG4gICAgICB0aGlzLm5vdGlmeS5pbmZvKFwi6K+36YCJ5oup55uu5qCH6IqC54K5XCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnRhc2tTdmMuZXhjdXRlVGFzayh0aGlzLmluV29ya2l0ZW1JZCwgdGhpcy5jb21wbGV0ZUNvbnRleHQpLnN1YnNjcmliZShcclxuICAgICAgKGNyOiBDb21wbGV0ZVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb21tZW50TW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAvLyDlrozmiJDlt6XkvZzpobnlkI7vvIzmo4Dmn6XmmK/lkKbpnIDopoHmiafooYzlkI7kuovku7ZcclxuICAgICAgICB0aGlzLmV4Y3V0ZVBvc3RFdmVudCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlQ29udGV4dC5jb25jbHVzaW9uVmFsdWUgPT09ICdQYXNzJykge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzUGFzcycpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29tcGxldGVDb250ZXh0LmNvbmNsdXNpb25WYWx1ZSA9PT0gJ0JhY2snKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3NCYWNrJykpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb21wbGV0ZUNvbnRleHQuY29uY2x1c2lvblZhbHVlID09PSAnUmVmdXNlJykge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmkxOG5TZXJ2aWNlLmdldFZhbHVlKCdjdWVXb3Jkcy5zdWNjZXNzUmVmdXNlJykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blNlcnZpY2UuZ2V0VmFsdWUoJ2N1ZVdvcmRzLnN1Y2Nlc3MnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjci5uZWVkSW50ZXJhY3Rpb24pIHtcclxuICAgICAgICAgIHRoaXMucmVmcmVzaEFjdGlvbnMoKTsvL+mAmui/h+WQjuW8ueWHuuaMh+a0viBhZGQgYnkgZnBmXHJcbiAgICAgICAgICB0aGlzLmFzc2lnbmVlSW5mb3MgPSBbY3IubmV4dEZsb3dOb2Rlc1swXS5hc3NpZ25lZUluZm9dO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlZEV2dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKGVycm9yKTtcclxuICAgICAgfSk7IFxyXG4gIH1cclxuICAvLyDlj5bmtojmk43kvZxcclxuICBoYW5kbGVDYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNvbXBsZXRlQ29udGV4dCA9IG5ldyBDb21wbGV0ZUNvbnRleHQoKTtcclxuICAgIHRoaXMuY29tbWVudE1vZGFsLmNsb3NlKCk7XHJcbiAgfVxyXG4gIC8vIOaMh+a0vuaTjeS9nFxyXG4gIHByaXZhdGUgYXNzaWduZWUod29ya0l0ZW1JZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnRhc2tTdmMuZ2V0QXNzaWduZWVJbmZvKHdvcmtJdGVtSWQpLnN1YnNjcmliZSgoaW5mbzogRmxvd05vZGVJbmZvKSA9PiB7XHJcbiAgICAgIGluZm8uYXNzaWduZWVJbmZvLndvcmtJdGVtSWQgPSB3b3JrSXRlbUlkOy8v5YW85a655aSE55CG77yM5q2k5aSE6L+U5Zue55qEd29ya2l0ZW1pZOS4um51bGxcclxuICAgICAgdGhpcy5hc3NpZ25lZUluZm9zID0gW2luZm8uYXNzaWduZWVJbmZvXTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5zaG93RXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vIOmHjeaWsOWIneWni+WMluW9k+WJjeWPguaVsFxyXG4gIHByaXZhdGUgaW5pdFN0YXRlKCkge1xyXG4gICAgdGhpcy5zZWxlY3RBZGRTaWduZWVzID0gJyc7XHJcbiAgICB0aGlzLmRlc3RBY3Rpdml0aWVzID0gbnVsbDtcclxuICAgIHRoaXMubmVlZEFkZFNpZ24gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhlY3V0ZVRhc2soYWN0aW9uQ29kZTogc3RyaW5nLCBvcGluaW9uPzogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmluaXRTdGF0ZSgpO1xyXG4gICAgdGhpcy5jb21wbGV0ZUNvbnRleHQgPSB7XHJcbiAgICAgIHdvcmtJdGVtSWQ6IHRoaXMuaW5Xb3JraXRlbUlkLFxyXG4gICAgICBjb25jbHVzaW9uVmFsdWU6IGFjdGlvbkNvZGUsXHJcbiAgICAgIGNvbW1lbnQ6ICcnLFxyXG4gICAgICBzaWduQXNzaWduZWVzOiBbXSwgLy8g5Yqg562+5Lq65ZGYXHJcbiAgICAgIGRlc3RpbmF0aW9uQWN0aXZpdHlJZDogJycvLyDnm67moIfoioLngrlcclxuICAgIH07XHJcbiAgICB0aGlzLmNvbXBsZXRlQ29udGV4dC5jb21tZW50ID0gYWN0aW9uQ29kZSA9PT0gJ1Bhc3MnID8gdGhpcy5hY3Rpb25zVGl0bGUucGFzcyA6ICcnO1xyXG4gICAgaWYgKG9waW5pb24pIHtcclxuICAgICAgdGhpcy5jb21wbGV0ZUNvbnRleHQuY29tbWVudCA9IG9waW5pb247XHJcbiAgICB9XHJcbiAgICBjb25zdCBhY3Rpb24gPSB0aGlzLnRhc2tBY3Rpb25zLmZpbmQoYSA9PiBhLmNvZGUgPT09IGFjdGlvbkNvZGUpO1xyXG4gICAgdGhpcy50YXNrU3ZjLmdldEFjdGlvbkVudGl0eSh0aGlzLndvcmtpdGVtSWQsIGFjdGlvbkNvZGUpLnN1YnNjcmliZSgoYWN0OiBBY3Rpb25FbnRpdHkpID0+IHtcclxuXHJcbiAgICAgIGlmICghYWN0KSB7Ly8g5a6h5om55Yqo5L2c5bey5Yig6Zmk77yM6LWw5a6M5oiQ5bel5L2c6aG5ICBUT0RPOiDpnZ7lrozmiJDlt6XkvZzpobnliqjkvZzlpoLkvZXlpITnkIbvvJ9cclxuICAgICAgICB0aGlzLnNob3dFeGN1dGVNb2RhbChhY3Rpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZyb20odGhpcy5leGN1dGVBY3Rpb24oYWN0KSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgIGlmICghYWN0LndlYkNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dFeGN1dGVNb2RhbChhY3Rpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiDliqDnrb7vvIzot7Povazmg4XlhrVcclxuICAgKiBAcGFyYW0gYWN0aW9uIOWKqOS9nFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd0V4Y3V0ZU1vZGFsKGFjdGlvbjogV29ya2l0ZW1BY3Rpb24pIHtcclxuICAgIC8vIOWKqOS9nOWPguaVsOaMieeFp1xyXG4gICAgaWYgKGFjdGlvbiAmJiBhY3Rpb24ucGFyYW1ldGVycykge1xyXG4gICAgICAvLyDot7PovazjgIHpqbPlm57lnLrmma9cclxuICAgICAgaWYgKGFjdGlvbi5wYXJhbWV0ZXJzLlNlbGVjdFRhcmdldEFibGUgPT09ICdUcnVlJyB8fCBhY3Rpb24ucGFyYW1ldGVycy5TZWxlY3RUYXJnZXRBYmxlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAvLyB0aGlzLnRhc2tTdmMuZ2V0RGVzdGluYXRpb25TY29wZSh0aGlzLmluV29ya2l0ZW1JZCwgYWN0aW9uLmNvZGUpLnN1YnNjcmliZSgocmU6IHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXSkgPT4ge1xyXG4gICAgICAgIC8vICAgdGhpcy5kZXN0QWN0aXZpdGllcyA9IHJlO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIHRoaXMuZ2V0RGVzdGluYXRpb25Ob2Rlcyh0aGlzLmluV29ya2l0ZW1JZCwgYWN0aW9uLmNvZGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIOmcgOimgeWKoOetvlxyXG4gICAgICBpZiAoYWN0aW9uLnBhcmFtZXRlcnMuQWRkU2lnbkJlaGluZEFibGUgPT09ICdUcnVlJyB8fCBhY3Rpb24ucGFyYW1ldGVycy5BZGRTaWduQmVoaW5kQWJsZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy5uZWVkQWRkU2lnbiA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY29tbWVudE1vZGFsLnNob3coKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RGVzdGluYXRpb25Ob2Rlcyh3b3JrSXRlbUlkOiBzdHJpbmcsIGFjdGlvbkNvZGU6IHN0cmluZykge1xyXG4gICAgdmFyIG5leHROb2RlczogTmV4dE5vZGVbXSA9IFtdO1xyXG4gICAgdGhpcy50YXNrU3ZjLmdldERlc3RpbmF0aW9uU2NvcGUod29ya0l0ZW1JZCwgYWN0aW9uQ29kZSkuc3Vic2NyaWJlKChyZTogTmV4dE5vZGVbXSkgPT4ge1xyXG4gICAgICBuZXh0Tm9kZXMgPSByZTtcclxuICAgICAgY29uc3QgZGVzID0gcmUubWFwKGEgPT4gYS5ub2RlSW5mb0xpc3QpO1xyXG4gICAgICBsZXQgbGlzdCA9W107XHJcbiAgICAgIGRlcy5mb3JFYWNoKGkgPT4ge1xyXG4gICAgICAgIGxpc3QgPSBsaXN0LmNvbmNhdChpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZGVzdEFjdGl2aXRpZXMgPSBsaXN0Lm1hcChpID0+ICh7aWQ6aS5hY3Rpdml0eURlZmluaXRpb25JZCwgbmFtZTppLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWV9KSk7XHJcbiAgICAgIHRoaXMuaGFzRGVmYXVsdEJyYW5jaCA9IHRoaXMuaGFzRGVmYXVsdEJyYW5jaEZ1bmMobmV4dE5vZGVzKTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5zaG93RXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDot7PovazvvIzov5Tlm57nmoTmlbDmja7mmK/lkKbmnInpu5jorqTliIbmlK9cclxuICAgKiDlpoLmnpzov5Tlm57nmoTmsqHmnInpu5jorqToioLngrnvvIzot7PovazoioLngrnlj4jmsqHpgInnmoTor53vvIzkuI3lhYHorrjmj5DkuqRcclxuICAgKiBAcGFyYW0gbmV4dE5vZGVzIFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFzRGVmYXVsdEJyYW5jaEZ1bmMobmV4dE5vZGVzOiBOZXh0Tm9kZVtdKSB7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbmV4dE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKG5leHROb2Rlc1tpXS5kZWZhdWx0QnJhbmNoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5UGxhY2Vob2xkZXIgPSBuZXh0Tm9kZXNbaV0ubm9kZUluZm9MaXN0WzBdLmFjdGl2aXR5RGVmaW5pdGlvbk5hbWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgcHJpdmF0ZSBhc3luYyBleGN1dGVBY3Rpb24oYWN0OiBBY3Rpb25FbnRpdHkpIHtcclxuICAgIGF3YWl0IHRoaXMuZ2V0QWN0aW9uV2ViRXZlbnRzRnVuYyhhY3QpO1xyXG4gICAgaWYgKHRoaXMucHJlRnVuY0xpc3QgJiYgdGhpcy5wcmVGdW5jTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wcmVGdW5jTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMucHJlRnVuY0xpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pbmRleCA9PT0gaSlbMF0uZnVuYygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy53ZWJDcHRGdW5jKSB7XHJcbiAgICAgIHRoaXMud2ViQ3B0RnVuYygpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcml2YXRlIGV4Y3V0ZVBvc3RFdmVudCgpIHtcclxuICAgIGlmICh0aGlzLnBvc3RGdW5jTGlzdCAmJiB0aGlzLnBvc3RGdW5jTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3N0RnVuY0xpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLnBvc3RGdW5jTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmluZGV4ID09PSBpKVswXS5mdW5jKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Yqo5L2c55qE5YmN5ZCO5LqL5Lu25ZKM5a6e546w5pa55rOVXHJcbiAgICogQHBhcmFtIGFjdCDliqjkvZxcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldEFjdGlvbldlYkV2ZW50c0Z1bmMoYWN0OiBBY3Rpb25FbnRpdHkpIHtcclxuICAgIHRoaXMucHJlRnVuY0xpc3QgPSBbXTtcclxuICAgIHRoaXMud2ViQ3B0RnVuYyA9IG51bGw7XHJcbiAgICB0aGlzLnBvc3RGdW5jTGlzdCA9IFtdO1xyXG4gICAgY29uc3QgcmVxTWFwID0gW107XHJcbiAgICBsZXQgcHJlSW5kZXggPSAwO1xyXG4gICAgbGV0IHBvc3RJbmRleCA9IDA7XHJcbiAgICBpZiAoYWN0LnByZUV2ZW50ICYmIGFjdC5wcmVFdmVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAoY29uc3QgZSBvZiBhY3QucHJlRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBwcmUgPSB7XHJcbiAgICAgICAgICBldmVudDogJ3ByZScsXHJcbiAgICAgICAgICBpbmRleDogcHJlSW5kZXgrKyxcclxuICAgICAgICAgIGZ1bmNOYW1lOiBlLmNvbXBvbmVudC5zcGxpdCgnIycpWzFdLFxyXG4gICAgICAgICAgcmVxOiBTeXN0ZW0uaW1wb3J0KGUuY29tcG9uZW50LnNwbGl0KCcjJylbMF0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXFNYXAucHVzaChwcmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0LndlYkNvbXBvbmVudCkge1xyXG4gICAgICBjb25zdCBjcHQgPSB7XHJcbiAgICAgICAgZXZlbnQ6ICdjcHQnLFxyXG4gICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgIGZ1bmNOYW1lOiBhY3Qud2ViQ29tcG9uZW50LnNwbGl0KCcjJylbMV0sXHJcbiAgICAgICAgcmVxOiBTeXN0ZW0uaW1wb3J0KGFjdC53ZWJDb21wb25lbnQuc3BsaXQoJyMnKVswXSlcclxuICAgICAgfTtcclxuICAgICAgcmVxTWFwLnB1c2goY3B0KTtcclxuICAgIH1cclxuICAgIGlmIChhY3QucG9zdEV2ZW50ICYmIGFjdC5wb3N0RXZlbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYWN0LnBvc3RFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHBvc3QgPSB7XHJcbiAgICAgICAgICBldmVudDogJ3Bvc3QnLFxyXG4gICAgICAgICAgaW5kZXg6IHBvc3RJbmRleCsrLFxyXG4gICAgICAgICAgZnVuY05hbWU6IGEuY29tcG9uZW50LnNwbGl0KCcjJylbMV0sXHJcbiAgICAgICAgICByZXE6IFN5c3RlbS5pbXBvcnQoYS5jb21wb25lbnQuc3BsaXQoJyMnKVswXSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcU1hcC5wdXNoKHBvc3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHIgb2YgcmVxTWFwKSB7XHJcbiAgICAgIGNvbnN0IG0gPSBhd2FpdCByLnJlcTtcclxuICAgICAgaWYgKHIuZXZlbnQgPT09ICdwcmUnKSB7XHJcbiAgICAgICAgdGhpcy5wcmVGdW5jTGlzdC5wdXNoKHtcclxuICAgICAgICAgIGluZGV4OiByLmluZGV4LFxyXG4gICAgICAgICAgZnVuYzogbS5kZWZhdWx0W3IuZnVuY05hbWVdXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoci5ldmVudCA9PT0gJ3Bvc3QnKSB7XHJcbiAgICAgICAgdGhpcy5wb3N0RnVuY0xpc3QucHVzaCh7XHJcbiAgICAgICAgICBpbmRleDogci5pbmRleCxcclxuICAgICAgICAgIGZ1bmM6IG0uZGVmYXVsdFtyLmZ1bmNOYW1lXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMud2ViQ3B0RnVuYyA9IG0uZGVmYXVsdFtyLmZ1bmNOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pi+56S65oql6ZSZ5L+h5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzaG93RXJyb3IoZXJyb3I6IGFueSkge1xyXG4gICAgaWYoZXJyb3IgJiYgZXJyb3IuZXJyb3IgJiYgZXJyb3IuZXJyb3IuTWVzc2FnZSkge1xyXG4gICAgICB0aGlzLm5vdGlmeS5lcnJvcihlcnJvci5lcnJvci5NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubm90aWZ5LmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19