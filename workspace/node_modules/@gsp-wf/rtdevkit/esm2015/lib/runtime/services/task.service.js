/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
export class TaskService {
    /**
     * @param {?} httpSvc
     */
    constructor(httpSvc) {
        this.httpSvc = httpSvc;
    }
    /**
     * 获取工作项操作列表
     * @param {?} workItemId
     * @return {?}
     */
    getWorkItemActions(workItemId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/actions`;
        return this.httpSvc.get(url);
    }
    /**
     * 执行审批操作
     * @param {?} taskId 任务Id
     * @param {?} context 执行审批上下文
     * @return {?}
     */
    excuteTask(taskId, context) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/complete`;
        context.workItemId = taskId;
        /** @type {?} */
        const options = {
            excuteParam: context
        };
        return this.httpSvc.post(url, context);
    }
    /**
     * 获取跳转活动信息
     * @param {?} workItemId 工作项Id
     * @param {?} action 动作编号
     * @return {?}
     */
    getDestinationScope(workItemId, action) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/${workItemId}/nextNodes/${action}`;
        return this.httpSvc.get(url);
    }
    /**
     * 获取动作实体进而获取web实现和前后事件
     * @param {?} taskId 任务ID
     * @param {?} action 动作编号
     * @return {?}
     */
    getActionEntity(taskId, action) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/approvalAction?code=${action}`;
        return this.httpSvc.get(url);
    }
    /**
     * 执行加签操作
     * @param {?} context 加签上下文
     * @return {?}
     */
    addSign(context) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/counterSignAdd`;
        /** @type {?} */
        const body = {
            excuteParam: context
        };
        return this.httpSvc.post(url, context);
    }
    /**
     * 查询单据信息
     * @param {?} workItemId 工作项Id
     * @return {?}
     */
    getAppInfo(workItemId) {
        /** @type {?} */
        const formParUrl = `/api/runtime/wf/v1.0/workItems/${workItemId}/formInfo`;
        return this.httpSvc.get(formParUrl);
    }
    //#region 查看流程
    /**
     * 基于工作项ID获取bpmnModel
     * @param {?} workitemId 工作项id
     * @return {?}
     */
    getBpmnModelbyWorkItemId(workitemId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/${workitemId}/bpmnModel`;
        return this.httpSvc.get(url);
    }
    /**
     * 基于工作项Id获取所有活动实例
     * @param {?} id taskId
     * @return {?}
     */
    getAllActiInstsbyTaskId(id) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/activityInstanceSlims?workItemId=${id}`;
        return this.httpSvc.get(url);
    }
    /**
     * 基于活动实例Id获取日志
     * @param {?} actInstId 活动实例Id
     * @return {?}
     */
    getActivityInstanceLogs(actInstId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/activityInstanceLogs?activityInstanceId=${actInstId}`;
        return this.httpSvc.get(url);
    }
    /**
     * 获取审批日志信息
     * @param {?} taskId 工作项Id
     * @return {?}
     */
    getBizlogByTaskId(taskId) {
        /** @type {?} */
        const logUrl = `/api/runtime/wf/v1.0/workItems/${taskId}/fullComments`;
        // if (false === environment.production) {
        //     logUrl = '/assets/mock/taskbizlog.json';
        // }
        return this.httpSvc.get(logUrl);
    }
    //#endregion
    /**
     * 获取指派信息
     * @param {?} taskId 工作项Id
     * @return {?}
     */
    getAssigneeInfo(taskId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/${taskId}/assigneeInfo`;
        return this.httpSvc.get(url);
    }
    /**
     * 根据流程实例Id批量指派（提交审批或执行审批后指派弹框调用，_后续调整与工作项的一致_）
     * @param {?} assigneesPa 指派参数
     * @return {?}
     */
    assignNextUsersByProcInstId(assigneesPa) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/processInstances/assignNextUsers`;
        /** @type {?} */
        const body = {
            assigneeInfoParameter: assigneesPa
        };
        return this.httpSvc.post(url, assigneesPa);
    }
    /**
     * 根据工作项ID指派任务
     * @param {?} assigneesPa 指派参数
     * @return {?}
     */
    assignNextUsersByWorkItemId(assigneesPa) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/assignUser`;
        /** @type {?} */
        const body = {
            assigneeInfoParameter: assigneesPa
        };
        return this.httpSvc.post(url, assigneesPa);
    }
    /**
     * 取回
     * @param {?} context
     * @return {?}
     */
    retrieve(context) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/retrieve`;
        /** @type {?} */
        const body = {
            excuteParam: context
        };
        return this.httpSvc.post(url, context);
    }
    /**
     * 任务移交
     * @param {?} transferContext
     * @return {?}
     */
    transfer(transferContext) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/transfer`;
        /** @type {?} */
        const body = {
            excuteParam: transferContext
        };
        return this.httpSvc.post(url, transferContext);
    }
    //#region  任务领用
    /**
     * 领用任务
     * @param {?} taskId 工作项Id
     * @return {?}
     */
    claim(taskId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/claim`;
        /** @type {?} */
        const options = {
            workItemId: taskId
        };
        return this.httpSvc.post(url, options);
    }
    /**
     * 取消领用
     * @param {?} taskId 任务Id
     * @return {?}
     */
    unClaim(taskId) {
        /** @type {?} */
        const url = `/api/runtime/wf/v1.0/workItems/unclaim`;
        /** @type {?} */
        const options = {
            workItemId: taskId
        };
        return this.httpSvc.post(url, options);
    }
}
TaskService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
TaskService.ctorParameters = () => [
    { type: HttpService }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    TaskService.prototype.httpSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC13Zi9ydGRldmtpdC8iLCJzb3VyY2VzIjpbImxpYi9ydW50aW1lL3NlcnZpY2VzL3Rhc2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFNbEQsTUFBTSxPQUFPLFdBQVc7Ozs7SUFFcEIsWUFDWSxPQUFvQjtRQUFwQixZQUFPLEdBQVAsT0FBTyxDQUFhO0lBQzVCLENBQUM7Ozs7OztJQUlMLGtCQUFrQixDQUFDLFVBQWtCOztjQUMzQixHQUFHLEdBQUcsa0NBQWtDLFVBQVUsVUFBVTtRQUVsRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7Ozs7Ozs7SUFPRCxVQUFVLENBQUMsTUFBYyxFQUFFLE9BQXdCOztjQUN6QyxHQUFHLEdBQUcseUNBQXlDO1FBQ3JELE9BQU8sQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDOztjQUN0QixPQUFPLEdBQUc7WUFDWixXQUFXLEVBQUUsT0FBTztTQUN2QjtRQUNELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzNDLENBQUM7Ozs7Ozs7SUFPRCxtQkFBbUIsQ0FBQyxVQUFrQixFQUFFLE1BQWM7O2NBQzVDLEdBQUcsR0FBRyxrQ0FBa0MsVUFBVSxjQUFjLE1BQU0sRUFBRTtRQUM5RSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7Ozs7Ozs7SUFNRCxlQUFlLENBQUMsTUFBYyxFQUFFLE1BQWM7O2NBQ3BDLEdBQUcsR0FBRyw0Q0FBNEMsTUFBTSxFQUFFO1FBRWhFLE9BQU8sSUFBSSxDQUFD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T0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQzs7Ozs7O0lBTUQsT0FBTyxDQUFDLE1BQWM7O2NBQ1osR0FBRyxHQUFHLHdDQUF3Qzs7Y0FDOUMsT0FBTyxHQUFHO1lBQ1osVUFBVSxFQUFFLE1BQU07U0FDckI7UUFDRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDOzs7WUE3TEosVUFBVTs7OztZQUxGLFdBQVc7Ozs7Ozs7SUFTWiw4QkFBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBTZXJ2aWNlIH0gZnJvbSAnQGVjcC1jYWYvY2FmLWNvbW1vbic7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQXNzaWduZWVJbmZvQnlQcm9jSW5zdElkUGFyYW1ldGVyLCBDb21wbGV0ZUNvbnRleHQgfSBmcm9tICcuLi8uLi9lbnRpdHknO1xyXG5pbXBvcnQgeyBBc3NpZ25lZUluZm9CeVdvcmtJdGVtSWRQYXJhbWV0ZXIgfSBmcm9tICcuLi8uLi9lbnRpdHkvY29tcGxldGUtcmVzcG9uc2UnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgVGFza1NlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgaHR0cFN2YzogSHR0cFNlcnZpY2VcclxuICAgICkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluW3peS9nOmhueaTjeS9nOWIl+ihqFxyXG4gICAgICovXHJcbiAgICBnZXRXb3JrSXRlbUFjdGlvbnMod29ya0l0ZW1JZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7d29ya0l0ZW1JZH0vYWN0aW9uc2A7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzlrqHmibnmk43kvZxcclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5Lu75YqhSWRcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOaJp+ihjOWuoeaJueS4iuS4i+aWh1xyXG4gICAgICovXHJcbiAgICBleGN1dGVUYXNrKHRhc2tJZDogc3RyaW5nLCBjb250ZXh0OiBDb21wbGV0ZUNvbnRleHQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvY29tcGxldGVgO1xyXG4gICAgICAgIGNvbnRleHQud29ya0l0ZW1JZCA9IHRhc2tJZDtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBleGN1dGVQYXJhbTogY29udGV4dFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bot7PovazmtLvliqjkv6Hmga9cclxuICAgICAqIEBwYXJhbSB3b3JrSXRlbUlkIOW3peS9nOmhuUlkXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uIOWKqOS9nOe8luWPt1xyXG4gICAgICovXHJcbiAgICBnZXREZXN0aW5hdGlvblNjb3BlKHdvcmtJdGVtSWQ6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvJHt3b3JrSXRlbUlkfS9uZXh0Tm9kZXMvJHthY3Rpb259YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bliqjkvZzlrp7kvZPov5vogIzojrflj5Z3ZWLlrp7njrDlkozliY3lkI7kuovku7ZcclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5Lu75YqhSURcclxuICAgICAqIEBwYXJhbSBhY3Rpb24g5Yqo5L2c57yW5Y+3XHJcbiAgICAgKi9cclxuICAgIGdldEFjdGlvbkVudGl0eSh0YXNrSWQ6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC9hcHByb3ZhbEFjdGlvbj9jb2RlPSR7YWN0aW9ufWA7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiafooYzliqDnrb7mk43kvZxcclxuICAgICAqIEBwYXJhbSBjb250ZXh0IOWKoOetvuS4iuS4i+aWh1xyXG4gICAgICovXHJcbiAgICBhZGRTaWduKGNvbnRleHQ6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jb3VudGVyU2lnbkFkZGA7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgZXhjdXRlUGFyYW06IGNvbnRleHRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l6K+i5Y2V5o2u5L+h5oGvXHJcbiAgICAgKiBAcGFyYW0gd29ya0l0ZW1JZCDlt6XkvZzpoblJZFxyXG4gICAgICovXHJcbiAgICBnZXRBcHBJbmZvKHdvcmtJdGVtSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgZm9ybVBhclVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvJHt3b3JrSXRlbUlkfS9mb3JtSW5mb2A7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQoZm9ybVBhclVybCk7XHJcbiAgICB9XHJcbiAgICAvLyNyZWdpb24g5p+l55yL5rWB56iLXHJcbiAgICAvKipcclxuICAgICAqIOWfuuS6juW3peS9nOmhuUlE6I635Y+WYnBtbk1vZGVsXHJcbiAgICAgKiBAcGFyYW0gd29ya2l0ZW1JZCDlt6XkvZzpoblpZFxyXG4gICAgICovXHJcbiAgICBnZXRCcG1uTW9kZWxieVdvcmtJdGVtSWQod29ya2l0ZW1JZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7d29ya2l0ZW1JZH0vYnBtbk1vZGVsYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLmdldCh1cmwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDln7rkuo7lt6XkvZzpoblJZOiOt+WPluaJgOaciea0u+WKqOWunuS+i1xyXG4gICAgICogQHBhcmFtIGlkIHRhc2tJZFxyXG4gICAgICovXHJcbiAgICBnZXRBbGxBY3RpSW5zdHNieVRhc2tJZChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zL2FjdGl2aXR5SW5zdGFuY2VTbGltcz93b3JrSXRlbUlkPSR7aWR9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQodXJsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Z+65LqO5rS75Yqo5a6e5L6LSWTojrflj5bml6Xlv5dcclxuICAgICAqIEBwYXJhbSBhY3RJbnN0SWQg5rS75Yqo5a6e5L6LSWRcclxuICAgICAqL1xyXG4gICAgZ2V0QWN0aXZpdHlJbnN0YW5jZUxvZ3MoYWN0SW5zdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvYWN0aXZpdHlJbnN0YW5jZUxvZ3M/YWN0aXZpdHlJbnN0YW5jZUlkPSR7YWN0SW5zdElkfWA7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blrqHmibnml6Xlv5fkv6Hmga9cclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5bel5L2c6aG5SWRcclxuICAgICAqL1xyXG4gICAgZ2V0Qml6bG9nQnlUYXNrSWQodGFza0lkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IGxvZ1VybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvJHt0YXNrSWR9L2Z1bGxDb21tZW50c2A7XHJcbiAgICAgICAgLy8gaWYgKGZhbHNlID09PSBlbnZpcm9ubWVudC5wcm9kdWN0aW9uKSB7XHJcbiAgICAgICAgLy8gICAgIGxvZ1VybCA9ICcvYXNzZXRzL21vY2svdGFza2JpemxvZy5qc29uJztcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5nZXQobG9nVXJsKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmjIfmtL7kv6Hmga9cclxuICAgICAqIEBwYXJhbSB0YXNrSWQg5bel5L2c6aG5SWRcclxuICAgICAqL1xyXG4gICAgZ2V0QXNzaWduZWVJbmZvKHRhc2tJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zLyR7dGFza0lkfS9hc3NpZ25lZUluZm9gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMuZ2V0KHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7mtYHnqIvlrp7kvotJZOaJuemHj+aMh+a0vu+8iOaPkOS6pOWuoeaJueaIluaJp+ihjOWuoeaJueWQjuaMh+a0vuW8ueahhuiwg+eUqO+8jF/lkI7nu63osIPmlbTkuI7lt6XkvZzpobnnmoTkuIDoh7Rf77yJXHJcbiAgICAgKiBAcGFyYW0gYXNzaWduZWVzUGEg5oyH5rS+5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIGFzc2lnbk5leHRVc2Vyc0J5UHJvY0luc3RJZChhc3NpZ25lZXNQYTogQXNzaWduZWVJbmZvQnlQcm9jSW5zdElkUGFyYW1ldGVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvcHJvY2Vzc0luc3RhbmNlcy9hc3NpZ25OZXh0VXNlcnNgO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIGFzc2lnbmVlSW5mb1BhcmFtZXRlcjogYXNzaWduZWVzUGFcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBTdmMucG9zdCh1cmwsIGFzc2lnbmVlc1BhKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5bel5L2c6aG5SUTmjIfmtL7ku7vliqFcclxuICAgICAqIEBwYXJhbSBhc3NpZ25lZXNQYSDmjIfmtL7lj4LmlbBcclxuICAgICAqL1xyXG4gICAgYXNzaWduTmV4dFVzZXJzQnlXb3JrSXRlbUlkKGFzc2lnbmVlc1BhOiBBc3NpZ25lZUluZm9CeVdvcmtJdGVtSWRQYXJhbWV0ZXIpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvYXNzaWduVXNlcmA7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYXNzaWduZWVJbmZvUGFyYW1ldGVyOiBhc3NpZ25lZXNQYVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgYXNzaWduZWVzUGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5ZueXHJcbiAgICAgKiBAcGFyYW0gd29ya0l0ZW1JZCB0YXNrIGlkXHJcbiAgICAgKiBAcGFyYW0gY29tbWVudCBjb21tZW50XHJcbiAgICAgKi9cclxuICAgIHJldHJpZXZlKGNvbnRleHQ6IHsgd29ya0l0ZW1JZDogc3RyaW5nLCBjb21tZW50Pzogc3RyaW5nIH0pOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3J1bnRpbWUvd2YvdjEuMC93b3JrSXRlbXMvcmV0cmlldmVgO1xyXG5cclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBleGN1dGVQYXJhbTogY29udGV4dFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOS7u+WKoeenu+S6pFxyXG4gICAgICogQHBhcmFtIHRhc2tJZCDlt6XkvZzpoblJZFxyXG4gICAgICogQHBhcmFtIHRhcmdldFVJZCDnm67moIfnlKjmiLdJZFxyXG4gICAgICovXHJcbiAgICB0cmFuc2Zlcih0cmFuc2ZlckNvbnRleHQ6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy90cmFuc2ZlcmA7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgZXhjdXRlUGFyYW06IHRyYW5zZmVyQ29udGV4dFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgdHJhbnNmZXJDb250ZXh0KTtcclxuICAgIH1cclxuICAgIC8vI3JlZ2lvbiAg5Lu75Yqh6aKG55SoXHJcbiAgICAvKipcclxuICAgICAqIOmihueUqOS7u+WKoVxyXG4gICAgICogQHBhcmFtIHRhc2tJZCDlt6XkvZzpoblJZFxyXG4gICAgICovXHJcbiAgICBjbGFpbSh0YXNrSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS93Zi92MS4wL3dvcmtJdGVtcy9jbGFpbWA7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgd29ya0l0ZW1JZDogdGFza0lkXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwU3ZjLnBvc3QodXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iOmihueUqFxyXG4gICAgICogQHBhcmFtIHRhc2tJZCDku7vliqFJZFxyXG4gICAgICovXHJcbiAgICB1bkNsYWltKHRhc2tJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL3dmL3YxLjAvd29ya0l0ZW1zL3VuY2xhaW1gO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHdvcmtJdGVtSWQ6IHRhc2tJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFN2Yy5wb3N0KHVybCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxufVxyXG4iXX0=