/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, Input, Output, EventEmitter, ViewEncapsulation } from '@angular/core';
import { GridComponent } from '@progress/kendo-angular-grid';
import { AifDocumentsPropertyTextMap } from '../config/aif-documents-property-text.map';
import { TrackDirectionTypeMap } from '../config/track-direction-type.map';
import { process } from '@progress/kendo-data-query';
import { AifDocumentsTrackService } from '../service/aif-documents-track.service';
import { TrackType } from '../config/track-type.map';
/**
 * 单据追踪查询结果组件
 */
var AifDocumentsTreeComponent = /** @class */ (function () {
    function AifDocumentsTreeComponent(trackService) {
        this.trackService = trackService;
        /**
         * 单据记录Grid
         */
        this.stateOfDocuments = {
            skip: 0,
            take: 30,
        };
        this.checkboxOnly = false;
        this.disabledState = true;
        this.selectedByFieldOfDocuments = "";
        this.selectableSettings = {
            checkboxOnly: this.checkboxOnly,
            mode: "single"
        };
        this.documentProperties = [];
        this.gridDataOfDocuments = null;
        this.selectedKeysOfDocuments = new Array();
        /**
         * 单据分类导航
         */
        this.treeDataOfBeTypeCodes = [];
        this.selectedKeysOfTreeView = ['0'];
        this.gridDataOfBeTypes = [];
        this.selectedKeysOfBeTypes = new Array();
        this.disabledStateOfBeTypes = true;
        this.selectedByFieldOfBeTypes = "BeTypeCode";
        this.selectableSettingsOfBeTypes = {
            checkboxOnly: this.checkboxOnly,
            mode: "single"
        };
        this.selectBeType = "";
        /**
         * 常量映射
         */
        this.documentsPropertyTextMap = AifDocumentsPropertyTextMap;
        this.trackDirectionTypeMap = TrackDirectionTypeMap;
        this.trackDirectionType = TrackDirectionTypeMap.UnKnown;
        /**
         * 父子组件通信传值
         */
        this.trackClick = new EventEmitter();
        this._documents = {};
        this._beTypeCodes = [];
        this.beTypeNames = {};
    }
    Object.defineProperty(AifDocumentsTreeComponent.prototype, "documents", {
        get: /**
         * @return {?}
         */
        function () {
            return this._documents;
        },
        set: /**
         * @param {?} documents
         * @return {?}
         */
        function (documents) {
            this._documents = documents;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AifDocumentsTreeComponent.prototype, "beTypeCodes", {
        get: /**
         * @return {?}
         */
        function () {
            return this._beTypeCodes;
        },
        set: /**
         * @param {?} beTypeCodes
         * @return {?}
         */
        function (beTypeCodes) {
            var e_1, _a;
            this._beTypeCodes = beTypeCodes;
            /**重置数据源 */
            this.treeDataOfBeTypeCodes = [];
            this.documentProperties = [];
            this.gridDataOfBeTypes = [];
            this.selectedKeysOfBeTypes = [];
            this.gridDataOfDocuments = process([], this.stateOfDocuments);
            if (this.isNullOrUndefined(beTypeCodes) == false && beTypeCodes.length > 0) {
                this.selectBeType = beTypeCodes[0];
                this.selectedKeysOfBeTypes.push(beTypeCodes[0]);
            }
            try {
                for (var beTypeCodes_1 = tslib_1.__values(beTypeCodes), beTypeCodes_1_1 = beTypeCodes_1.next(); !beTypeCodes_1_1.done; beTypeCodes_1_1 = beTypeCodes_1.next()) {
                    var item = beTypeCodes_1_1.value;
                    // this.data[0].items.push({text:item});
                    this.gridDataOfBeTypes.push({ BeTypeCode: item, BeTypeName: this.beTypeNames[item], Number: this.documents[item].length });
                    this.treeDataOfBeTypeCodes.push({ text: this.beTypeNames[item], value: item });
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (beTypeCodes_1_1 && !beTypeCodes_1_1.done && (_a = beTypeCodes_1.return)) _a.call(beTypeCodes_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            if (this.isNullOrUndefined(this.documents) == false && this.isNullOrUndefined(this.documents[this.selectBeType]) == false && this.documents[this.selectBeType].length > 0) {
                this.loadItems();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AifDocumentsTreeComponent.prototype, "trackType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._trackType;
        },
        set: /**
         * @param {?} trackType
         * @return {?}
         */
        function (trackType) {
            this._trackType = trackType;
            this.trackDirectionType = this.trackDirectionTypeMap[this._trackType];
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        console.log(changes);
        if (this.isNullOrUndefined(changes.beTypeCodes) == false) {
            this.beTypeCodes = changes.beTypeCodes.currentValue;
        }
        if (this.isNullOrUndefined(changes.documents) == false) {
            this.documents = changes.documents.currentValue;
            // this.gridDataOfDocuments=process(this.documents,this.stateOfDocuments);
        }
        if (this.isNullOrUndefined(changes.trackType) == false) {
            this.trackType = changes.trackType.currentValue;
        }
        if (this.isNullOrUndefined(changes.beTypeNames) == false) {
            this.beTypeNames = changes.beTypeNames.currentValue;
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.clickNode = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        /** @type {?} */
        var item = obj.item.dataItem;
        if (this.isNullOrUndefined(item.items) == false) {
            return;
        }
        console.log(item.text);
        this.selectBeType = item.value;
        this.loadItems();
        this.selectedKeysOfDocuments.splice(0, this.selectedKeysOfDocuments.length);
    };
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.selectedKeysChangeOfDocuments = /**
     * @return {?}
     */
    function () {
        if (this.selectedKeysOfDocuments.length > 0) {
            this.disabledState = false;
        }
        else {
            this.disabledState = true;
        }
    };
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.selectedKeysChangeOfBeTypes = /**
     * @return {?}
     */
    function () {
        console.log(this.selectedKeysOfBeTypes);
        if (this.selectedKeysOfBeTypes.length > 0) {
            this.disabledStateOfBeTypes = false;
            this.selectBeType = this.selectedKeysOfBeTypes[0];
            //页数置为初始值0
            this.stateOfDocuments.skip = 0;
            this.loadItems();
            //清空已选中的行
            this.selectedKeysOfDocuments.splice(0, this.selectedKeysOfDocuments.length);
        }
        else {
            this.disabledStateOfBeTypes = true;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.pageChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.stateOfDocuments.skip = event.skip;
        this.loadItems();
    };
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.loadItems = /**
     * @return {?}
     */
    function () {
        // let temp = this.documents[this.selectBeType].slice(this.stateOfDocuments.skip, this.stateOfDocuments.skip + this.stateOfDocuments.take);
        this.documentProperties.splice(0, this.documentProperties.length);
        for (var index in this.documents[this.selectBeType][0]) {
            this.documentProperties.push(index);
        }
        this.selectedByFieldOfDocuments = this.documentProperties[0];
        this.gridDataOfDocuments = process(this.documents[this.selectBeType], this.stateOfDocuments);
        // this.fitColumns();
        // this.gridDataOfDocuments = {
        //   data: temp,
        //   total: this.documents[this.selectBeType].length
        // };
    };
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.getDocumentDetailInfo = /**
     * @return {?}
     */
    function () {
        if (this.selectedKeysOfDocuments.length == 0) {
            alert("请选择一行数据");
            return;
        }
        console.log(this.selectedKeysOfDocuments);
        alert("详细信息窗口");
    };
    /**
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.track = /**
     * @return {?}
     */
    function () {
        if (this.selectedKeysOfDocuments.length == 0) {
            alert("请选择一行数据");
            return;
        }
        this.trackService.showResultDialog(this.selectedKeysOfDocuments[0], this.selectBeType, this.trackType);
    };
    /**
     * @param {?} context
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.rowCallback = /**
     * @param {?} context
     * @return {?}
     */
    function (context) {
        /** @type {?} */
        var isEven = context.index % 2 == 0;
        return {
            even: isEven,
            odd: !isEven
        };
    };
    /**
     * @param {?} state
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.dataStateChangeOfDocuments = /**
     * @param {?} state
     * @return {?}
     */
    function (state) {
        this.stateOfDocuments = state;
        this.gridDataOfDocuments = process(this.documents[this.selectBeType], this.stateOfDocuments);
    };
    // 自动调整列宽
    // fitColumns(): void {
    //   this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(() => {
    //     this.gridOfDocuments.autoFitColumns();
    //     // console.log("this.gridOfDocuments.autoFitColumns()");
    //   });
    // }
    // 自动调整列宽
    // fitColumns(): void {
    //   this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(() => {
    //     this.gridOfDocuments.autoFitColumns();
    //     // console.log("this.gridOfDocuments.autoFitColumns()");
    //   });
    // }
    /**
     * @private
     * @param {?} arg
     * @return {?}
     */
    AifDocumentsTreeComponent.prototype.isNullOrUndefined = 
    // 自动调整列宽
    // fitColumns(): void {
    //   this.ngZone.onStable.asObservable().pipe(take(1)).subscribe(() => {
    //     this.gridOfDocuments.autoFitColumns();
    //     // console.log("this.gridOfDocuments.autoFitColumns()");
    //   });
    // }
    /**
     * @private
     * @param {?} arg
     * @return {?}
     */
    function (arg) {
        return arg == null;
    };
    AifDocumentsTreeComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-aif-documents-tree',
                    encapsulation: ViewEncapsulation.None,
                    template: "<!-- <div class=\"d-flex\" style=\"padding: 5px;\"> -->\r\n<!-- <div class=\"row\"> -->\r\n<kendo-splitter orientation=\"horizontal\" style=\"height:100%;\">\r\n  <kendo-splitter-pane [collapsible]=\"true\" size=\"16%\" style=\"padding:0 1rem 1rem 1rem;\">\r\n    <div class=\"k-button-group\" style=\"height:2.5rem;\">\r\n      <label for=\"\" style=\"margin:auto 0 auto 0;\">{{trackDirectionType}}</label>\r\n    </div>\r\n    <kendo-grid [data]=\"gridDataOfBeTypes\" [resizable]=\"true\" [selectable]=\"selectableSettingsOfBeTypes\"\r\n      [kendoGridSelectBy]=\"selectedByFieldOfBeTypes\" [selectedKeys]=\"selectedKeysOfBeTypes\" (selectedKeysChange)=\"selectedKeysChangeOfBeTypes()\">\r\n      <kendo-grid-column field=\"BeTypeName\" title=\"\u540D\u79F0\"></kendo-grid-column>\r\n      <!-- <kendo-grid-column field=\"BeTypeCode\" title=\"\u7F16\u53F7\"></kendo-grid-column> -->\r\n      <kendo-grid-column field=\"Number\" title=\"\u6570\u91CF\"></kendo-grid-column>\r\n    </kendo-grid>\r\n  </kendo-splitter-pane>\r\n  <kendo-splitter-pane style=\"padding:0 1rem 2rem 1rem;\">\r\n    <div class=\"k-button-group\" style=\"height:2.5rem;padding: 0.5rem 0 0.5rem 0;\">\r\n      <button hidden class=\"k-button btn btn-sm btn-default\" (click)=\"getDocumentDetailInfo()\">\u8BE6\u60C5</button>\r\n      <button class=\"k-button btn btn-sm ml-2 btn-default\" (click)=\"track()\">\u8FFD\u8E2A</button>\r\n    </div>\r\n\r\n    <kendo-grid class=\"\" #gridOfDocuments [data]=\"gridDataOfDocuments\" [pageable]=\"true\" [resizable]=\"true\" [pageSize]=\"stateOfDocuments.take\"\r\n      (pageChange)=\"pageChange($event)\" [skip]=\"stateOfDocuments.skip\" [selectable]=\"selectableSettings\"\r\n      [kendoGridSelectBy]=\"selectedByFieldOfDocuments\" [selectedKeys]=\"selectedKeysOfDocuments\" (selectedKeysChange)=\"selectedKeysChangeOfDocuments()\"\r\n      [sortable]=\"true\" [filterable]=\"true\" [sort]=\"stateOfDocuments.sort\" [filter]=\"stateOfDocuments.filter\"\r\n      (dataStateChange)=\"dataStateChangeOfDocuments($event)\">\r\n      <!-- <ng-template kendoGridToolbarTemplate>\r\n        <button type=\"button\" class=\"k-button btn btn-sm ml-2 btn-default\" kendoGridExcelCommand icon=\"file-excel\">Export\r\n          to Excel</button>\r\n      </ng-template> -->\r\n      <!-- <ng-template ngFor let-item [ngForOf]=\"documentProperties\" let-i=\"index\">\r\n        <kendo-grid-checkbox-column *ngIf=\"beTypeCodes&&beTypeCodes.length>0\" [width]=\"40\" [headerClass]=\"{'aif-grid-header': true}\"></kendo-grid-checkbox-column>\r\n        <kendo-grid-column [headerClass]=\"{'aif-grid-header': true}\" [field]=\"item\" [title]=\"documentsPropertyTextMap[item]||item\"></kendo-grid-column>\r\n      </ng-template> -->\r\n\r\n      <kendo-grid-checkbox-column [width]=\"40\" [headerClass]=\"{'aif-grid-header': true,'aif-grid-cell-border':true}\"></kendo-grid-checkbox-column>\r\n      <kendo-grid-column *ngFor=\"let item of documentProperties\" [headerClass]=\"{'aif-grid-header': true,'aif-grid-cell-border':true}\"\r\n        [field]=\"item\" [title]=\"documentsPropertyTextMap[item]||item\"></kendo-grid-column>\r\n      <!--<kendo-grid-excel fileName=\"Products.xlsx\"></kendo-grid-excel> -->\r\n    </kendo-grid>\r\n  </kendo-splitter-pane>\r\n</kendo-splitter>\r\n\r\n<!-- </div> -->\r\n<!-- </div> -->",
                    styles: [".aif-border-green{border:1px solid green;border-radius:1rem}.aif-border-black{border:1px solid #000;border-radius:1rem}.aif-border-blue{border:1px solid #00f;border-radius:1rem}.aif-border{border:1px solid #919399;border-radius:1rem}.aif-background{background-color:#fafafa}.aif-document-tree-group{margin-top:10px;padding:1rem}.aif-margin-left{margin-left:1rem}.k-grid tr.even{background-color:#fafafa}.k-grid tr.odd{background-color:#9dc2f1}.k-grid .aif-grid-cell-border{border-right-width:1px}.aif-grid-header{background-color:#c9d7ea}.aif-min-height{height:-webkit-fill-available;height:-moz-available;height:fill-available}"]
                }] }
    ];
    /** @nocollapse */
    AifDocumentsTreeComponent.ctorParameters = function () { return [
        { type: AifDocumentsTrackService }
    ]; };
    AifDocumentsTreeComponent.propDecorators = {
        trackClick: [{ type: Output }],
        documents: [{ type: Input }],
        beTypeCodes: [{ type: Input }],
        beTypeNames: [{ type: Input }],
        trackType: [{ type: Input }],
        gridOfDocuments: [{ type: ViewChild, args: ["gridOfDocuments",] }]
    };
    return AifDocumentsTreeComponent;
}());
export { AifDocumentsTreeComponent };
if (false) {
    /**
     * 单据记录Grid
     * @type {?}
     */
    AifDocumentsTreeComponent.prototype.stateOfDocuments;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.checkboxOnly;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.disabledState;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectedByFieldOfDocuments;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectableSettings;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.documentProperties;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.gridDataOfDocuments;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectedKeysOfDocuments;
    /**
     * 单据分类导航
     * @type {?}
     */
    AifDocumentsTreeComponent.prototype.treeDataOfBeTypeCodes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectedKeysOfTreeView;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.gridDataOfBeTypes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectedKeysOfBeTypes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.disabledStateOfBeTypes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectedByFieldOfBeTypes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectableSettingsOfBeTypes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.selectBeType;
    /**
     * 常量映射
     * @type {?}
     */
    AifDocumentsTreeComponent.prototype.documentsPropertyTextMap;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.trackDirectionTypeMap;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.trackDirectionType;
    /**
     * 父子组件通信传值
     * @type {?}
     */
    AifDocumentsTreeComponent.prototype.trackClick;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype._documents;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype._beTypeCodes;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.beTypeNames;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype._trackType;
    /** @type {?} */
    AifDocumentsTreeComponent.prototype.gridOfDocuments;
    /**
     * @type {?}
     * @private
     */
    AifDocumentsTreeComponent.prototype.trackService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWlmLWRvY3VtZW50cy10cmVlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3AtYWlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2FpZi1kb2N1bWVudHMtdHJhY2svYWlmLWRvY3VtZW50cy10cmVlL2FpZi1kb2N1bWVudHMtdHJlZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBNEIsaUJBQWlCLEVBQThDLE1BQU0sZUFBZSxDQUFDO0FBQ25MLE9BQU8sRUFBcUQsYUFBYSxFQUF3QyxNQUFNLDhCQUE4QixDQUFDO0FBQ3RKLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ3hGLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxPQUFPLEVBQVMsTUFBTSw0QkFBNEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUNsRixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7Ozs7QUFNckQ7SUF1R0UsbUNBQW9CLFlBQXNDO1FBQXRDLGlCQUFZLEdBQVosWUFBWSxDQUEwQjs7OztRQTlGMUQscUJBQWdCLEdBQVU7WUFDeEIsSUFBSSxFQUFFLENBQUM7WUFDUCxJQUFJLEVBQUUsRUFBRTtTQUNULENBQUM7UUFFRixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUM5QixrQkFBYSxHQUFZLElBQUksQ0FBQztRQUM5QiwrQkFBMEIsR0FBVyxFQUFFLENBQUM7UUFDeEMsdUJBQWtCLEdBQXVCO1lBQ3ZDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWTtZQUMvQixJQUFJLEVBQUUsUUFBUTtTQUNmLENBQUM7UUFDRix1QkFBa0IsR0FBYSxFQUFFLENBQUM7UUFDbEMsd0JB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RCxRQUFRO0lBQ1IsSUFBSTs7Ozs7Ozs7Ozs7OztJQUVJLHFEQUFpQjs7Ozs7Ozs7Ozs7OztJQUF6QixVQUEwQixHQUFPO1FBQy9CLE9BQU8sR0FBRyxJQUFFLElBQUksQ0FBQztJQUNuQixDQUFDOztnQkFwT0YsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSx3QkFBd0I7b0JBQ2xDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO29CQUNyQyw4d0dBQWtEOztpQkFFbkQ7Ozs7Z0JBWlEsd0JBQXdCOzs7NkJBc0Q5QixNQUFNOzRCQUlOLEtBQUs7OEJBU0wsS0FBSzs4QkE0QkwsS0FBSzs0QkFLTCxLQUFLO2tDQTBITCxTQUFTLFNBQUMsaUJBQWlCOztJQWU5QixnQ0FBQztDQUFBLEFBdE9ELElBc09DO1NBaE9ZLHlCQUF5Qjs7Ozs7O0lBR3BDLHFEQUdFOztJQUVGLGlEQUE4Qjs7SUFDOUIsa0RBQThCOztJQUM5QiwrREFBd0M7O0lBQ3hDLHVEQUdFOztJQUNGLHVEQUFrQzs7SUFDbEMsd0RBQTJDOztJQUMzQyw0REFBd0Q7Ozs7O0lBR3hELDBEQUFrQzs7SUFDbEMsMkRBQXNDOztJQUN0QyxzREFBNEI7O0lBQzVCLDBEQUFzRDs7SUFDdEQsMkRBQXVDOztJQUN2Qyw2REFBd0M7O0lBQ3hDLGdFQUdFOztJQUVGLGlEQUEwQjs7Ozs7SUFJMUIsNkRBQXVEOztJQUN2RCwwREFBOEM7O0lBQzlDLHVEQUEyRDs7Ozs7SUFJM0QsK0NBQ3FDOztJQUVyQywrQ0FBNkM7O0lBUzdDLGlEQUE0Qjs7SUE2QjVCLGdEQUNtRDs7SUFFbkQsK0NBQXNCOztJQTRIdEIsb0RBQytCOzs7OztJQWpIbkIsaURBQThDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIFZpZXdFbmNhcHN1bGF0aW9uLCBOZ1pvbmUsIEluamVjdG9yLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU2VsZWN0YWJsZVNldHRpbmdzLCBQYWdlQ2hhbmdlRXZlbnQsIFJvd0NsYXNzQXJncywgR3JpZENvbXBvbmVudCwgR3JpZERhdGFSZXN1bHQsIERhdGFTdGF0ZUNoYW5nZUV2ZW50IH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZ3JpZCc7XHJcbmltcG9ydCB7IEFpZkRvY3VtZW50c1Byb3BlcnR5VGV4dE1hcCB9IGZyb20gJy4uL2NvbmZpZy9haWYtZG9jdW1lbnRzLXByb3BlcnR5LXRleHQubWFwJztcclxuaW1wb3J0IHsgVHJhY2tEaXJlY3Rpb25UeXBlTWFwIH0gZnJvbSAnLi4vY29uZmlnL3RyYWNrLWRpcmVjdGlvbi10eXBlLm1hcCc7XHJcbmltcG9ydCB7IHByb2Nlc3MsIFN0YXRlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWRhdGEtcXVlcnknO1xyXG5pbXBvcnQgeyBBaWZEb2N1bWVudHNUcmFja1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2FpZi1kb2N1bWVudHMtdHJhY2suc2VydmljZSc7XHJcbmltcG9ydCB7IFRyYWNrVHlwZSB9IGZyb20gJy4uL2NvbmZpZy90cmFjay10eXBlLm1hcCc7XHJcblxyXG5cclxuLyoqXHJcbiAqIOWNleaNrui/vei4quafpeivoue7k+aenOe7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtYWlmLWRvY3VtZW50cy10cmVlJyxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9haWYtZG9jdW1lbnRzLXRyZWUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2FpZi1kb2N1bWVudHMtdHJlZS5jb21wb25lbnQuY3NzJ10sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBaWZEb2N1bWVudHNUcmVlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG5cclxuICAvKirljZXmja7orrDlvZVHcmlkICovXHJcbiAgc3RhdGVPZkRvY3VtZW50czogU3RhdGUgPSB7XHJcbiAgICBza2lwOiAwLFxyXG4gICAgdGFrZTogMzAsXHJcbiAgfTtcclxuXHJcbiAgY2hlY2tib3hPbmx5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgZGlzYWJsZWRTdGF0ZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgc2VsZWN0ZWRCeUZpZWxkT2ZEb2N1bWVudHM6IHN0cmluZyA9IFwiXCI7XHJcbiAgc2VsZWN0YWJsZVNldHRpbmdzOiBTZWxlY3RhYmxlU2V0dGluZ3MgPSB7XHJcbiAgICBjaGVja2JveE9ubHk6IHRoaXMuY2hlY2tib3hPbmx5LFxyXG4gICAgbW9kZTogXCJzaW5nbGVcIlxyXG4gIH07XHJcbiAgZG9jdW1lbnRQcm9wZXJ0aWVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGdyaWREYXRhT2ZEb2N1bWVudHM6IEdyaWREYXRhUmVzdWx0ID0gbnVsbDtcclxuICBzZWxlY3RlZEtleXNPZkRvY3VtZW50czogc3RyaW5nW10gPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG5cclxuICAvKirljZXmja7liIbnsbvlr7zoiKogKi9cclxuICB0cmVlRGF0YU9mQmVUeXBlQ29kZXM6IGFueVtdID0gW107XHJcbiAgc2VsZWN0ZWRLZXlzT2ZUcmVlVmlldzogYW55W10gPSBbJzAnXTtcclxuICBncmlkRGF0YU9mQmVUeXBlczogYW55ID0gW107XHJcbiAgc2VsZWN0ZWRLZXlzT2ZCZVR5cGVzOiBzdHJpbmdbXSA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgZGlzYWJsZWRTdGF0ZU9mQmVUeXBlczogYm9vbGVhbiA9IHRydWU7XHJcbiAgc2VsZWN0ZWRCeUZpZWxkT2ZCZVR5cGVzID0gXCJCZVR5cGVDb2RlXCI7XHJcbiAgc2VsZWN0YWJsZVNldHRpbmdzT2ZCZVR5cGVzOiBTZWxlY3RhYmxlU2V0dGluZ3MgPSB7XHJcbiAgICBjaGVja2JveE9ubHk6IHRoaXMuY2hlY2tib3hPbmx5LFxyXG4gICAgbW9kZTogXCJzaW5nbGVcIlxyXG4gIH07XHJcblxyXG4gIHNlbGVjdEJlVHlwZTogc3RyaW5nID0gXCJcIjtcclxuXHJcblxyXG4gIC8qKuW4uOmHj+aYoOWwhCAqL1xyXG4gIGRvY3VtZW50c1Byb3BlcnR5VGV4dE1hcCA9IEFpZkRvY3VtZW50c1Byb3BlcnR5VGV4dE1hcDtcclxuICB0cmFja0RpcmVjdGlvblR5cGVNYXAgPSBUcmFja0RpcmVjdGlvblR5cGVNYXA7XHJcbiAgdHJhY2tEaXJlY3Rpb25UeXBlOiBzdHJpbmcgPSBUcmFja0RpcmVjdGlvblR5cGVNYXAuVW5Lbm93bjtcclxuXHJcblxyXG4gIC8qKueItuWtkOe7hOS7tumAmuS/oeS8oOWAvCAqL1xyXG4gIEBPdXRwdXQoKVxyXG4gIHRyYWNrQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgX2RvY3VtZW50czogeyBbYmVUeXBlOiBzdHJpbmddOiBhbnlbXSB9ID0ge307XHJcbiAgQElucHV0KClcclxuICBzZXQgZG9jdW1lbnRzKGRvY3VtZW50czogYW55KSB7XHJcbiAgICB0aGlzLl9kb2N1bWVudHMgPSBkb2N1bWVudHM7XHJcbiAgfVxyXG4gIGdldCBkb2N1bWVudHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZG9jdW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgX2JlVHlwZUNvZGVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGJlVHlwZUNvZGVzKGJlVHlwZUNvZGVzOiBhbnlbXSkge1xyXG4gICAgdGhpcy5fYmVUeXBlQ29kZXMgPSBiZVR5cGVDb2RlcztcclxuXHJcbiAgICAvKirph43nva7mlbDmja7mupAgKi9cclxuICAgIHRoaXMudHJlZURhdGFPZkJlVHlwZUNvZGVzID0gW107XHJcbiAgICB0aGlzLmRvY3VtZW50UHJvcGVydGllcyA9IFtdO1xyXG4gICAgdGhpcy5ncmlkRGF0YU9mQmVUeXBlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZEtleXNPZkJlVHlwZXMgPSBbXTtcclxuICAgIHRoaXMuZ3JpZERhdGFPZkRvY3VtZW50cyA9IHByb2Nlc3MoW10sIHRoaXMuc3RhdGVPZkRvY3VtZW50cyk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoYmVUeXBlQ29kZXMpID09IGZhbHNlICYmIGJlVHlwZUNvZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5zZWxlY3RCZVR5cGUgPSBiZVR5cGVDb2Rlc1swXTtcclxuICAgICAgdGhpcy5zZWxlY3RlZEtleXNPZkJlVHlwZXMucHVzaChiZVR5cGVDb2Rlc1swXSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpdGVtIG9mIGJlVHlwZUNvZGVzKSB7XHJcbiAgICAgIC8vIHRoaXMuZGF0YVswXS5pdGVtcy5wdXNoKHt0ZXh0Oml0ZW19KTtcclxuICAgICAgdGhpcy5ncmlkRGF0YU9mQmVUeXBlcy5wdXNoKHsgQmVUeXBlQ29kZTogaXRlbSwgQmVUeXBlTmFtZTogdGhpcy5iZVR5cGVOYW1lc1tpdGVtXSwgTnVtYmVyOiB0aGlzLmRvY3VtZW50c1tpdGVtXS5sZW5ndGggfSk7XHJcbiAgICAgIHRoaXMudHJlZURhdGFPZkJlVHlwZUNvZGVzLnB1c2goeyB0ZXh0OiB0aGlzLmJlVHlwZU5hbWVzW2l0ZW1dLCB2YWx1ZTogaXRlbSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZG9jdW1lbnRzKSA9PSBmYWxzZSAmJiB0aGlzLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZG9jdW1lbnRzW3RoaXMuc2VsZWN0QmVUeXBlXSkgPT0gZmFsc2UgJiYgdGhpcy5kb2N1bWVudHNbdGhpcy5zZWxlY3RCZVR5cGVdLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5sb2FkSXRlbXMoKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGJlVHlwZUNvZGVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2JlVHlwZUNvZGVzO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBiZVR5cGVOYW1lczogeyBbYmVUeXBlQ29kZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcclxuXHJcbiAgX3RyYWNrVHlwZTogVHJhY2tUeXBlO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCB0cmFja1R5cGUodHJhY2tUeXBlOiBUcmFja1R5cGUpIHtcclxuICAgIHRoaXMuX3RyYWNrVHlwZSA9IHRyYWNrVHlwZTtcclxuICAgIHRoaXMudHJhY2tEaXJlY3Rpb25UeXBlID0gdGhpcy50cmFja0RpcmVjdGlvblR5cGVNYXBbdGhpcy5fdHJhY2tUeXBlXTtcclxuICB9XHJcblxyXG4gIGdldCB0cmFja1R5cGUoKTogVHJhY2tUeXBlIHtcclxuICAgIHJldHVybiB0aGlzLl90cmFja1R5cGU7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYWNrU2VydmljZTogQWlmRG9jdW1lbnRzVHJhY2tTZXJ2aWNlKSB7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKGNoYW5nZXMpO1xyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoY2hhbmdlcy5iZVR5cGVDb2RlcykgPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5iZVR5cGVDb2RlcyA9IGNoYW5nZXMuYmVUeXBlQ29kZXMuY3VycmVudFZhbHVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoY2hhbmdlcy5kb2N1bWVudHMpID09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuZG9jdW1lbnRzID0gY2hhbmdlcy5kb2N1bWVudHMuY3VycmVudFZhbHVlO1xyXG4gICAgICAvLyB0aGlzLmdyaWREYXRhT2ZEb2N1bWVudHM9cHJvY2Vzcyh0aGlzLmRvY3VtZW50cyx0aGlzLnN0YXRlT2ZEb2N1bWVudHMpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoY2hhbmdlcy50cmFja1R5cGUpID09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMudHJhY2tUeXBlID0gY2hhbmdlcy50cmFja1R5cGUuY3VycmVudFZhbHVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoY2hhbmdlcy5iZVR5cGVOYW1lcykgPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5iZVR5cGVOYW1lcyA9IGNoYW5nZXMuYmVUeXBlTmFtZXMuY3VycmVudFZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2tOb2RlKG9iajogYW55KTogdm9pZCB7XHJcbiAgICBsZXQgaXRlbSA9IG9iai5pdGVtLmRhdGFJdGVtO1xyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JVbmRlZmluZWQoaXRlbS5pdGVtcykgPT0gZmFsc2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coaXRlbS50ZXh0KTtcclxuICAgIHRoaXMuc2VsZWN0QmVUeXBlID0gaXRlbS52YWx1ZTtcclxuICAgIHRoaXMubG9hZEl0ZW1zKCk7XHJcbiAgICB0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLnNwbGljZSgwLCB0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLmxlbmd0aCk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RlZEtleXNDaGFuZ2VPZkRvY3VtZW50cygpIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZFN0YXRlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZFN0YXRlID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdGVkS2V5c0NoYW5nZU9mQmVUeXBlcygpIHtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRLZXlzT2ZCZVR5cGVzKTtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkS2V5c09mQmVUeXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWRTdGF0ZU9mQmVUeXBlcyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNlbGVjdEJlVHlwZSA9IHRoaXMuc2VsZWN0ZWRLZXlzT2ZCZVR5cGVzWzBdO1xyXG4gICAgICAvL+mhteaVsOe9ruS4uuWIneWni+WAvDBcclxuICAgICAgdGhpcy5zdGF0ZU9mRG9jdW1lbnRzLnNraXAgPSAwO1xyXG4gICAgICB0aGlzLmxvYWRJdGVtcygpO1xyXG4gICAgICAvL+a4heepuuW3sumAieS4reeahOihjFxyXG4gICAgICB0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLnNwbGljZSgwLCB0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5kaXNhYmxlZFN0YXRlT2ZCZVR5cGVzID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhZ2VDaGFuZ2UoZXZlbnQ6IFBhZ2VDaGFuZ2VFdmVudCk6IHZvaWQge1xyXG4gICAgdGhpcy5zdGF0ZU9mRG9jdW1lbnRzLnNraXAgPSBldmVudC5za2lwO1xyXG4gICAgdGhpcy5sb2FkSXRlbXMoKTtcclxuICB9XHJcblxyXG4gIGxvYWRJdGVtcygpOiBhbnkge1xyXG4gICAgLy8gbGV0IHRlbXAgPSB0aGlzLmRvY3VtZW50c1t0aGlzLnNlbGVjdEJlVHlwZV0uc2xpY2UodGhpcy5zdGF0ZU9mRG9jdW1lbnRzLnNraXAsIHRoaXMuc3RhdGVPZkRvY3VtZW50cy5za2lwICsgdGhpcy5zdGF0ZU9mRG9jdW1lbnRzLnRha2UpO1xyXG5cclxuICAgIHRoaXMuZG9jdW1lbnRQcm9wZXJ0aWVzLnNwbGljZSgwLCB0aGlzLmRvY3VtZW50UHJvcGVydGllcy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaW5kZXggaW4gdGhpcy5kb2N1bWVudHNbdGhpcy5zZWxlY3RCZVR5cGVdWzBdKSB7XHJcbiAgICAgIHRoaXMuZG9jdW1lbnRQcm9wZXJ0aWVzLnB1c2goaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZWxlY3RlZEJ5RmllbGRPZkRvY3VtZW50cyA9IHRoaXMuZG9jdW1lbnRQcm9wZXJ0aWVzWzBdO1xyXG5cclxuICAgIHRoaXMuZ3JpZERhdGFPZkRvY3VtZW50cyA9IHByb2Nlc3ModGhpcy5kb2N1bWVudHNbdGhpcy5zZWxlY3RCZVR5cGVdLCB0aGlzLnN0YXRlT2ZEb2N1bWVudHMpO1xyXG4gICAgLy8gdGhpcy5maXRDb2x1bW5zKCk7XHJcbiAgICAvLyB0aGlzLmdyaWREYXRhT2ZEb2N1bWVudHMgPSB7XHJcbiAgICAvLyAgIGRhdGE6IHRlbXAsXHJcbiAgICAvLyAgIHRvdGFsOiB0aGlzLmRvY3VtZW50c1t0aGlzLnNlbGVjdEJlVHlwZV0ubGVuZ3RoXHJcbiAgICAvLyB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0RG9jdW1lbnREZXRhaWxJbmZvKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRLZXlzT2ZEb2N1bWVudHMubGVuZ3RoID09IDApIHtcclxuICAgICAgYWxlcnQoXCLor7fpgInmi6nkuIDooYzmlbDmja5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRLZXlzT2ZEb2N1bWVudHMpO1xyXG4gICAgYWxlcnQoXCLor6bnu4bkv6Hmga/nqpflj6NcIik7XHJcbiAgfVxyXG5cclxuICB0cmFjaygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgIGFsZXJ0KFwi6K+36YCJ5oup5LiA6KGM5pWw5o2uXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50cmFja1NlcnZpY2Uuc2hvd1Jlc3VsdERpYWxvZyh0aGlzLnNlbGVjdGVkS2V5c09mRG9jdW1lbnRzWzBdLCB0aGlzLnNlbGVjdEJlVHlwZSwgdGhpcy50cmFja1R5cGUpO1xyXG4gIH1cclxuXHJcbiAgcm93Q2FsbGJhY2soY29udGV4dDogUm93Q2xhc3NBcmdzKSB7XHJcbiAgICBjb25zdCBpc0V2ZW4gPSBjb250ZXh0LmluZGV4ICUgMiA9PSAwO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXZlbjogaXNFdmVuLFxyXG4gICAgICBvZGQ6ICFpc0V2ZW5cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBkYXRhU3RhdGVDaGFuZ2VPZkRvY3VtZW50cyhzdGF0ZTogRGF0YVN0YXRlQ2hhbmdlRXZlbnQpIHtcclxuICAgIHRoaXMuc3RhdGVPZkRvY3VtZW50cyA9IHN0YXRlO1xyXG4gICAgdGhpcy5ncmlkRGF0YU9mRG9jdW1lbnRzID0gcHJvY2Vzcyh0aGlzLmRvY3VtZW50c1t0aGlzLnNlbGVjdEJlVHlwZV0sIHRoaXMuc3RhdGVPZkRvY3VtZW50cyk7XHJcbiAgfVxyXG5cclxuICBAVmlld0NoaWxkKFwiZ3JpZE9mRG9jdW1lbnRzXCIpXHJcbiAgZ3JpZE9mRG9jdW1lbnRzOiBHcmlkQ29tcG9uZW50O1xyXG5cclxuICAvLyDoh6rliqjosIPmlbTliJflrr1cclxuICAvLyBmaXRDb2x1bW5zKCk6IHZvaWQge1xyXG4gIC8vICAgdGhpcy5uZ1pvbmUub25TdGFibGUuYXNPYnNlcnZhYmxlKCkucGlwZSh0YWtlKDEpKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gIC8vICAgICB0aGlzLmdyaWRPZkRvY3VtZW50cy5hdXRvRml0Q29sdW1ucygpO1xyXG4gIC8vICAgICAvLyBjb25zb2xlLmxvZyhcInRoaXMuZ3JpZE9mRG9jdW1lbnRzLmF1dG9GaXRDb2x1bW5zKClcIik7XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcblxyXG4gIHByaXZhdGUgaXNOdWxsT3JVbmRlZmluZWQoYXJnOmFueSk6Ym9vbGVhbntcclxuICAgIHJldHVybiBhcmc9PW51bGw7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=