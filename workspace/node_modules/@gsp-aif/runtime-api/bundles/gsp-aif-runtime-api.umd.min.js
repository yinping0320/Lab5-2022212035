!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@progress/kendo-angular-grid"),require("@progress/kendo-angular-dialog"),require("@progress/kendo-angular-treeview"),require("@progress/kendo-data-query"),require("rxjs"),require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@progress/kendo-angular-buttons"),require("@progress/kendo-angular-dropdowns"),require("@progress/kendo-angular-layout"),require("@angular/forms"),require("@ecp-caf/caf-common"),require("@farris/ui-modal"),require("@farris/ui-dialog")):"function"==typeof define&&define.amd?define("@gsp-aif/runtime-api",["exports","@progress/kendo-angular-grid","@progress/kendo-angular-dialog","@progress/kendo-angular-treeview","@progress/kendo-data-query","rxjs","@angular/core","@angular/common","@angular/common/http","@progress/kendo-angular-buttons","@progress/kendo-angular-dropdowns","@progress/kendo-angular-layout","@angular/forms","@ecp-caf/caf-common","@farris/ui-modal","@farris/ui-dialog"],t):t((e["gsp-aif"]=e["gsp-aif"]||{},e["gsp-aif"]["runtime-api"]={}),e.kendoAngularGrid,e.kendoAngularDialog,e.kendoAngularTreeview,e.kendoDataQuery,e.rxjs,e.ng.core,e.ng.common,e.ng.common.http,e.kendoAngularButtons,e.kendoAngularDropdowns,e.kendoAngularLayout,e.ng.forms,e.cafCommon,e.uiModal,e.uiDialog)}(this,function(e,r,n,o,l,t,s,i,a,d,c,u,p,h,y,f){"use strict";function m(){}function g(){}function b(){}function v(){}function T(){}function k(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var C={UpSearch:"UpSearch",DownSearch:"DownSearch"},O=function(){function e(e,t,r,n,o){this.http=e,this.modalService=t,this.injector=r,this.cfr=n,this.serverIP="",this.baseUrl="/api/runtime/aif/v1.0/associationcontroller/",this.serverIP=null==o||null==o.serverIP?"":o.serverIP}return e.prototype.showResultDialog=function(e,t,r){var n=this.cfr.resolveComponentFactory(D).create(this.injector);return r!=C.DownSearch&&r!=C.UpSearch&&(r=C.DownSearch),n.instance.searchFromOut(e,t,r),this.modalService.show(n,{title:"追踪",width:1100,height:600,buttons:null,showButtons:!1})},e.prototype.getTrackedDocumentData=function(e,t,r){return r==C.DownSearch?this.getTargetData(t,e):this.getSourceData(t,e)},e.prototype.getTargetData=function(e,t){var r=this.serverIP+this.baseUrl+"GetTargetData/"+e+"&"+t;return this.http.get(r)},e.prototype.getSourceData=function(e,t){var r=this.serverIP+this.baseUrl+"GetSourceData/"+e+"&"+t;return this.http.get(r)},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:h.HttpService},{type:y.BsModalService},{type:s.Injector},{type:s.ComponentFactoryResolver},{type:b}]},e}(),R={UpSearch:"上查",DownSearch:"下查"},D=function(){function e(e){for(var t in this.trackService=e,this.isHidden=!0,this.isShowable=!1,this.isResultEmpty=null,this.documentId=null,this.beTypeCode=null,this.selectedTrackType=null,this.trackTypes=[],this.selectedTrackTypeToChildren="",this.beTypeCodes=[],this.documents={},this.beTypeNames={},C)this.trackTypes.push({value:t,text:R[t]});this.selectedTrackType=this.trackTypes[1].value,this.selectedTrackTypeToChildren=this.selectedTrackType}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){},e.prototype.search=function(){var c=this;this.selectedTrackTypeToChildren=this.selectedTrackType,this.trackService.getTrackedDocumentData(this.documentId,this.beTypeCode,this.selectedTrackType).subscribe(function(e){var t,r,n={},o={},s=[];if(0==c.isNullOrUndefined(e)&&0<e.length){c.isResultEmpty=!1,c.isShowable=!0,c.isHidden=!1;try{for(var i=k(e),l=i.next();!l.done;l=i.next()){var a=l.value;0==c.isNullOrUndefined(n[a.BeTypeCode])?n[a.BeTypeCode].push(a):(s.push(a.BeTypeCode),o[a.BeTypeCode]=a.BeTypeName,n[a.BeTypeCode]=[a])}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}}else c.isResultEmpty=!0,c.isShowable=!1,c.isHidden=!0;c.documents=n,c.beTypeCodes=s,c.beTypeNames=o})},e.prototype.searchFromOut=function(e,t,r){this.documentId=e,this.beTypeCode=t,this.selectedTrackType=r,this.search()},e.prototype.trackGoingOn=function(e){this.documentId=e.documentId,this.beTypeCode=e.beTypeCode,this.selectedTrackType=e.trackType,this.search()},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Component,args:[{selector:"app-aif-documents-track-manager",template:'<div class="d-flex g-main">\r\n  <div class="col">\r\n    <div class="g-main d-flex flex-column px-2">\r\n      \x3c!--主内容区--\x3e\r\n      <div class="mb-1 pr-2 position-relative clearfix">\r\n        \x3c!-- <div class="" style=""> --\x3e\r\n        <div class="position-relative" [style.display]="\'inherit\'">\r\n          <div class="form-inline row py-1">\r\n            <div class="form-group col-sm-12 col-md-4 mb-1">\r\n              <div class="input-group w-100">\r\n                <div class="input-group-prepend"><span class="input-group-text">单据ID</span></div>\r\n                <input class="form-control" placeholder="" name="documentId" [(ngModel)]="documentId" type="text" />\r\n              </div>\r\n            </div>\r\n\r\n            <div class="form-group col-sm-12 col-md-4 mb-1">\r\n                <div class="input-group w-100">\r\n                  <div class="input-group-prepend"><span class="input-group-text">BE类型编号</span></div>\r\n                  <input class="form-control" placeholder="" name="beTypeCode" [(ngModel)]="beTypeCode" type="text" />\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group col-sm-12 col-md-2 mb-1">\r\n                <div class="input-group w-100">\r\n                  <div class="input-group-prepend"><span class="input-group-text">追踪方式</span></div>\r\n                  <select [(ngModel)]="selectedTrackType" class="form-control">\r\n                      <option *ngFor="let tt of trackTypes" value="{{tt.value}}">{{tt.text}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=" col-sm-12 col-md-1 mb-1">\r\n              <div class="w-100">\r\n                <button class="k-button btn btn-sm btn-default" type="button" (click)="search()">查询</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class="k-form-field" style="color:red; font-size: unset;" *ngIf="isResultEmpty==true">查询结果为空</div>\r\n      </div>\r\n\r\n      <div class="flex-auto k-form-field pb-1">\r\n        <app-aif-documents-tree [documents]="documents" [beTypeNames]="beTypeNames" [beTypeCodes]="beTypeCodes"\r\n          [trackType]="selectedTrackTypeToChildren" (trackClick)="trackGoingOn($event)">\r\n        </app-aif-documents-tree>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>',styles:[""]}]}],e.ctorParameters=function(){return[{type:O}]},e.propDecorators={documentId:[{type:s.Input}],beTypeCode:[{type:s.Input}],selectedTrackType:[{type:s.Input}],trackTypes:[{type:s.Output}]},e}(),x={DataId:"ID",PrimaryValue:"ID",BeTypeCode:"单据类型编号",BeTypeName:"单据类型名称",TotalValue:"总价",TotalNumber:"总数量"},S={UnKnown:"单据类型",UpSearch:"上游单据",DownSearch:"下游单据"},M=function(){function e(e){this.trackService=e,this.stateOfDocuments={skip:0,take:30},this.checkboxOnly=!1,this.disabledState=!0,this.selectedByFieldOfDocuments="",this.selectableSettings={checkboxOnly:this.checkboxOnly,mode:"single"},this.documentProperties=[],this.gridDataOfDocuments=null,this.selectedKeysOfDocuments=new Array,this.treeDataOfBeTypeCodes=[],this.selectedKeysOfTreeView=["0"],this.gridDataOfBeTypes=[],this.selectedKeysOfBeTypes=new Array,this.disabledStateOfBeTypes=!0,this.selectedByFieldOfBeTypes="BeTypeCode",this.selectableSettingsOfBeTypes={checkboxOnly:this.checkboxOnly,mode:"single"},this.selectBeType="",this.documentsPropertyTextMap=x,this.trackDirectionTypeMap=S,this.trackDirectionType=S.UnKnown,this.trackClick=new s.EventEmitter,this._documents={},this._beTypeCodes=[],this.beTypeNames={}}return Object.defineProperty(e.prototype,"documents",{get:function(){return this._documents},set:function(e){this._documents=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beTypeCodes",{get:function(){return this._beTypeCodes},set:function(e){var t,r;this._beTypeCodes=e,this.treeDataOfBeTypeCodes=[],this.documentProperties=[],this.gridDataOfBeTypes=[],this.selectedKeysOfBeTypes=[],this.gridDataOfDocuments=l.process([],this.stateOfDocuments),0==this.isNullOrUndefined(e)&&0<e.length&&(this.selectBeType=e[0],this.selectedKeysOfBeTypes.push(e[0]));try{for(var n=k(e),o=n.next();!o.done;o=n.next()){var s=o.value;this.gridDataOfBeTypes.push({BeTypeCode:s,BeTypeName:this.beTypeNames[s],Number:this.documents[s].length}),this.treeDataOfBeTypeCodes.push({text:this.beTypeNames[s],value:s})}}catch(i){t={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}0==this.isNullOrUndefined(this.documents)&&0==this.isNullOrUndefined(this.documents[this.selectBeType])&&0<this.documents[this.selectBeType].length&&this.loadItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackType",{get:function(){return this._trackType},set:function(e){this._trackType=e,this.trackDirectionType=this.trackDirectionTypeMap[this._trackType]},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){console.log(e),0==this.isNullOrUndefined(e.beTypeCodes)&&(this.beTypeCodes=e.beTypeCodes.currentValue),0==this.isNullOrUndefined(e.documents)&&(this.documents=e.documents.currentValue),0==this.isNullOrUndefined(e.trackType)&&(this.trackType=e.trackType.currentValue),0==this.isNullOrUndefined(e.beTypeNames)&&(this.beTypeNames=e.beTypeNames.currentValue)},e.prototype.clickNode=function(e){var t=e.item.dataItem;0!=this.isNullOrUndefined(t.items)&&(console.log(t.text),this.selectBeType=t.value,this.loadItems(),this.selectedKeysOfDocuments.splice(0,this.selectedKeysOfDocuments.length))},e.prototype.selectedKeysChangeOfDocuments=function(){0<this.selectedKeysOfDocuments.length?this.disabledState=!1:this.disabledState=!0},e.prototype.selectedKeysChangeOfBeTypes=function(){console.log(this.selectedKeysOfBeTypes),0<this.selectedKeysOfBeTypes.length?(this.disabledStateOfBeTypes=!1,this.selectBeType=this.selectedKeysOfBeTypes[0],this.stateOfDocuments.skip=0,this.loadItems(),this.selectedKeysOfDocuments.splice(0,this.selectedKeysOfDocuments.length)):this.disabledStateOfBeTypes=!0},e.prototype.pageChange=function(e){this.stateOfDocuments.skip=e.skip,this.loadItems()},e.prototype.loadItems=function(){for(var e in this.documentProperties.splice(0,this.documentProperties.length),this.documents[this.selectBeType][0])this.documentProperties.push(e);this.selectedByFieldOfDocuments=this.documentProperties[0],this.gridDataOfDocuments=l.process(this.documents[this.selectBeType],this.stateOfDocuments)},e.prototype.getDocumentDetailInfo=function(){0!=this.selectedKeysOfDocuments.length?(console.log(this.selectedKeysOfDocuments),alert("详细信息窗口")):alert("请选择一行数据")},e.prototype.track=function(){0!=this.selectedKeysOfDocuments.length?this.trackService.showResultDialog(this.selectedKeysOfDocuments[0],this.selectBeType,this.trackType):alert("请选择一行数据")},e.prototype.rowCallback=function(e){var t=e.index%2==0;return{even:t,odd:!t}},e.prototype.dataStateChangeOfDocuments=function(e){this.stateOfDocuments=e,this.gridDataOfDocuments=l.process(this.documents[this.selectBeType],this.stateOfDocuments)},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Component,args:[{selector:"app-aif-documents-tree",encapsulation:s.ViewEncapsulation.None,template:'\x3c!-- <div class="d-flex" style="padding: 5px;"> --\x3e\r\n\x3c!-- <div class="row"> --\x3e\r\n<kendo-splitter orientation="horizontal" style="height:100%;">\r\n  <kendo-splitter-pane [collapsible]="true" size="16%" style="padding:0 1rem 1rem 1rem;">\r\n    <div class="k-button-group" style="height:2.5rem;">\r\n      <label for="" style="margin:auto 0 auto 0;">{{trackDirectionType}}</label>\r\n    </div>\r\n    <kendo-grid [data]="gridDataOfBeTypes" [resizable]="true" [selectable]="selectableSettingsOfBeTypes"\r\n      [kendoGridSelectBy]="selectedByFieldOfBeTypes" [selectedKeys]="selectedKeysOfBeTypes" (selectedKeysChange)="selectedKeysChangeOfBeTypes()">\r\n      <kendo-grid-column field="BeTypeName" title="名称"></kendo-grid-column>\r\n      \x3c!-- <kendo-grid-column field="BeTypeCode" title="编号"></kendo-grid-column> --\x3e\r\n      <kendo-grid-column field="Number" title="数量"></kendo-grid-column>\r\n    </kendo-grid>\r\n  </kendo-splitter-pane>\r\n  <kendo-splitter-pane style="padding:0 1rem 2rem 1rem;">\r\n    <div class="k-button-group" style="height:2.5rem;padding: 0.5rem 0 0.5rem 0;">\r\n      <button hidden class="k-button btn btn-sm btn-default" (click)="getDocumentDetailInfo()">详情</button>\r\n      <button class="k-button btn btn-sm ml-2 btn-default" (click)="track()">追踪</button>\r\n    </div>\r\n\r\n    <kendo-grid class="" #gridOfDocuments [data]="gridDataOfDocuments" [pageable]="true" [resizable]="true" [pageSize]="stateOfDocuments.take"\r\n      (pageChange)="pageChange($event)" [skip]="stateOfDocuments.skip" [selectable]="selectableSettings"\r\n      [kendoGridSelectBy]="selectedByFieldOfDocuments" [selectedKeys]="selectedKeysOfDocuments" (selectedKeysChange)="selectedKeysChangeOfDocuments()"\r\n      [sortable]="true" [filterable]="true" [sort]="stateOfDocuments.sort" [filter]="stateOfDocuments.filter"\r\n      (dataStateChange)="dataStateChangeOfDocuments($event)">\r\n      \x3c!-- <ng-template kendoGridToolbarTemplate>\r\n        <button type="button" class="k-button btn btn-sm ml-2 btn-default" kendoGridExcelCommand icon="file-excel">Export\r\n          to Excel</button>\r\n      </ng-template> --\x3e\r\n      \x3c!-- <ng-template ngFor let-item [ngForOf]="documentProperties" let-i="index">\r\n        <kendo-grid-checkbox-column *ngIf="beTypeCodes&&beTypeCodes.length>0" [width]="40" [headerClass]="{\'aif-grid-header\': true}"></kendo-grid-checkbox-column>\r\n        <kendo-grid-column [headerClass]="{\'aif-grid-header\': true}" [field]="item" [title]="documentsPropertyTextMap[item]||item"></kendo-grid-column>\r\n      </ng-template> --\x3e\r\n\r\n      <kendo-grid-checkbox-column [width]="40" [headerClass]="{\'aif-grid-header\': true,\'aif-grid-cell-border\':true}"></kendo-grid-checkbox-column>\r\n      <kendo-grid-column *ngFor="let item of documentProperties" [headerClass]="{\'aif-grid-header\': true,\'aif-grid-cell-border\':true}"\r\n        [field]="item" [title]="documentsPropertyTextMap[item]||item"></kendo-grid-column>\r\n      \x3c!--<kendo-grid-excel fileName="Products.xlsx"></kendo-grid-excel> --\x3e\r\n    </kendo-grid>\r\n  </kendo-splitter-pane>\r\n</kendo-splitter>\r\n\r\n\x3c!-- </div> --\x3e\r\n\x3c!-- </div> --\x3e',styles:[".aif-border-green{border:1px solid green;border-radius:1rem}.aif-border-black{border:1px solid #000;border-radius:1rem}.aif-border-blue{border:1px solid #00f;border-radius:1rem}.aif-border{border:1px solid #919399;border-radius:1rem}.aif-background{background-color:#fafafa}.aif-document-tree-group{margin-top:10px;padding:1rem}.aif-margin-left{margin-left:1rem}.k-grid tr.even{background-color:#fafafa}.k-grid tr.odd{background-color:#9dc2f1}.k-grid .aif-grid-cell-border{border-right-width:1px}.aif-grid-header{background-color:#c9d7ea}.aif-min-height{height:-webkit-fill-available;height:-moz-available;height:fill-available}"]}]}],e.ctorParameters=function(){return[{type:O}]},e.propDecorators={trackClick:[{type:s.Output}],documents:[{type:s.Input}],beTypeCodes:[{type:s.Input}],beTypeNames:[{type:s.Input}],trackType:[{type:s.Input}],gridOfDocuments:[{type:s.ViewChild,args:["gridOfDocuments"]}]},e}(),w={},B=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:b,useValue:e||{}}]}},t.decorators=[{type:s.NgModule,args:[{imports:[i.CommonModule,a.HttpClientModule,p.FormsModule,p.ReactiveFormsModule,d.ButtonsModule,r.GridModule,n.WindowModule,c.DropDownsModule,n.DialogModule,o.TreeViewModule,u.SplitterModule,r.GridModule,y.ModalModule.forRoot(),f.FarrisDialogModule],providers:[h.SessionService,h.HttpService,{provide:b,useValue:w},O],declarations:[D,M],bootstrap:[D],entryComponents:[D],exports:[D]}]}],t}(),I=function(){function e(e,t){this.http=e,this.serverIP=null,this.getCreationRuleUrl="/api/runtime/aif/v1.0/creationrulecontroller/getcreationrule",this.serverIP=null==t||null==t.serverIP?"":t.serverIP}return e.prototype.getCreationRule=function(e){return this.http.post(this.serverIP+this.getCreationRuleUrl,e)},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:h.HttpService},{type:v}]},e}(),V=function(){function e(e){this.crService=e,this.voTypeCodes=[],this.voTypeObjs={},this.getCreationRuleResultEntities={},this.selectedVoTypeCode=null,this.selectedGetCreationRuleResultEntity=null,this.bsModalRef=null,this.subject=new t.Subject}return e.prototype.getCreationRule=function(e){var l=this;this.crService.getCreationRule(e).subscribe(function(e){var t,r;try{for(var n=k(e),o=n.next();!o.done;o=n.next()){var s=o.value;l.voTypeCodes.includes(s.SourceVoType)||(l.voTypeCodes.push(s.SourceVoType),l.getCreationRuleResultEntities[s.SourceVoType]=[],l.voTypeObjs[s.SourceVoType]={VoType:s.SourceVoType,VoName:s.SourceVoName}),l.getCreationRuleResultEntities[s.SourceVoType].push(s)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}0<e.length&&(l.selectedVoTypeCode=l.voTypeCodes[0],l.selectedGetCreationRuleResultEntity=e[0])})},e.prototype.ngOnInit=function(){},e.prototype.changeVoTypeRadio=function(e){this.selectedVoTypeCode=e,this.selectedGetCreationRuleResultEntity=!this.isNullOrUndefined(this.getCreationRuleResultEntities[this.selectedVoTypeCode])&&0<this.getCreationRuleResultEntities[this.selectedVoTypeCode].length?this.getCreationRuleResultEntities[this.selectedVoTypeCode][0]:null},e.prototype.clickOk=function(){this.subject.next(this.selectedGetCreationRuleResultEntity),this.subject.complete(),this.bsModalRef.close()},e.prototype.clickClose=function(){this.bsModalRef.close()},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Component,args:[{selector:"app-aif-pull-select-creation-rule",template:'<div style="height:100%;">\r\n    <kendo-splitter orientation="vertical">\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="40%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>选择来源单据类型</div>\r\n                <div style="height:8rem;overflow-y: auto;">\r\n                    <label *ngFor="let voTypeCode of voTypeCodes;let i=index" class="col-sm-12 col-md-5"\r\n                        style="padding:0 0;">\r\n                        <input type="radio" name="voTypeCode" class="" [checked]="i==0"\r\n                            [value]="voTypeObjs[voTypeCode].VoType"\r\n                            (click)="changeVoTypeRadio(voTypeCode)">{{voTypeObjs[voTypeCode].VoName}}\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="40%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>选择生单规则</div>\r\n                <kendo-dropdownlist class="form-control" [data]="getCreationRuleResultEntities[selectedVoTypeCode]"\r\n                    textField="Name" valueField="Id" [(ngModel)]="selectedGetCreationRuleResultEntity">\r\n                </kendo-dropdownlist>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="20%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>描述</div>\r\n                <textarea kendoTextArea readonly class="form-control" name="description" id="" rows="3"\r\n                    [ngModel]="selectedGetCreationRuleResultEntity&&selectedGetCreationRuleResultEntity.Description"></textarea>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false"\r\n            class="aif-splitter-pane-padding">\r\n            <div style="float:right;">\r\n                <button class="btn-primary btn btn-sm ml-2" (click)="clickOk()"\r\n                    [disabled]="!selectedGetCreationRuleResultEntity">确定</button>\r\n                <button class="btn btn-sm ml-2 btn-default" (click)="clickClose()">取消</button>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n    </kendo-splitter>\r\n</div>',styles:[".aif-splitter-pane-padding{padding:.5rem 1rem}"]}]}],e.ctorParameters=function(){return[{type:I}]},e}(),P=function(){function e(e,t,r){this.injector=e,this.cfr=t,this.modalService=r,this.innerModalOptions={title:"生单规则选择",width:650,height:415,buttons:null,showButtons:!1}}return e.prototype.showCrRuleSelectModal=function(e,t){var r=this.cfr.resolveComponentFactory(V).create(this.injector);return r.instance.getCreationRule(e),r.instance.bsModalRef=this.modalService.show(r,this.isNullOrUndefined(t)?this.innerModalOptions:t),r.instance.subject.asObservable()},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:s.Injector},{type:s.ComponentFactoryResolver},{type:y.BsModalService}]},e}(),N={},E=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:v,useValue:e||{}}]}},t.decorators=[{type:s.NgModule,args:[{imports:[i.CommonModule,p.FormsModule,p.ReactiveFormsModule,a.HttpClientModule,d.ButtonsModule,c.DropDownsModule,u.SplitterModule,y.ModalModule,f.FarrisDialogModule],providers:[h.HttpService,y.BsModalService,{provide:v,useValue:N},I,P],declarations:[V],bootstrap:[V],entryComponents:[V],exports:[]}]}],t}(),j=function(){function e(e,t){this.http=e,this.serverIP="",this.getCreationRuleUrl="/api/runtime/aif/v1.0/creationrulecontroller/getcreationrule",this.serverIP=null==t||null==t.serverIP?"":t.serverIP}return e.prototype.getCreationRule=function(e){return this.http.post(this.serverIP+this.getCreationRuleUrl,e)},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:h.HttpService},{type:T}]},e}(),U=function(){function e(e){this.crService=e,this.voTypeCodes=[],this.voTypeObjs={},this.getCreationRuleResultEntities={},this.selectedVoTypeCode=null,this.selectedGetCreationRuleResultEntity=null,this.bsModalRef=null,this.subject=new t.Subject}return e.prototype.ngOnInit=function(){},e.prototype.getCreationRule=function(e){var l=this;this.crService.getCreationRule(e).subscribe(function(e){var t,r;console.log(e);try{for(var n=k(e),o=n.next();!o.done;o=n.next()){var s=o.value;l.voTypeCodes.includes(s.TargetVoType)||(l.voTypeCodes.push(s.TargetVoType),l.getCreationRuleResultEntities[s.TargetVoType]=[],l.voTypeObjs[s.TargetVoType]={VoType:s.TargetVoType,VoName:s.TargetVoProxyName}),l.getCreationRuleResultEntities[s.TargetVoType].push(s)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}0<e.length&&(l.selectedVoTypeCode=l.voTypeCodes[0],l.selectedGetCreationRuleResultEntity=e[0])})},e.prototype.changeVoTypeRadio=function(e){this.selectedVoTypeCode=e,this.selectedGetCreationRuleResultEntity=!this.isNullOrUndefined(this.getCreationRuleResultEntities[this.selectedVoTypeCode])&&0<this.getCreationRuleResultEntities[this.selectedVoTypeCode].length?this.getCreationRuleResultEntities[this.selectedVoTypeCode][0]:null},e.prototype.clickOk=function(){this.subject.next(this.selectedGetCreationRuleResultEntity),this.subject.complete(),this.bsModalRef.close()},e.prototype.clickClose=function(){this.bsModalRef.close()},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Component,args:[{selector:"app-aif-push-select-creation-rule",template:'<div style="height:100%;">\r\n    <kendo-splitter orientation="vertical">\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="40%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>选择目标单据类型</div>\r\n                <div style="height:8rem;overflow-y: auto;">\r\n                    <label *ngFor="let voTypeCode of voTypeCodes;let i=index" class="col-sm-12 col-md-5"\r\n                        style="padding:0 0;">\r\n                        <input type="radio" name="voTypeCode" class="" [checked]="i==0"\r\n                            [value]="voTypeObjs[voTypeCode].VoType"\r\n                            (click)="changeVoTypeRadio(voTypeCode)">{{voTypeObjs[voTypeCode].VoName}}\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="40%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>选择生单规则</div>\r\n                <kendo-dropdownlist class="form-control" [data]="getCreationRuleResultEntities[selectedVoTypeCode]"\r\n                    textField="Name" valueField="Id" [(ngModel)]="selectedGetCreationRuleResultEntity">\r\n                </kendo-dropdownlist>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false" size="20%"\r\n            class="aif-splitter-pane-padding">\r\n            <div>\r\n                <div>描述</div>\r\n                <textarea kendoTextArea readonly class="form-control" name="description" id="" rows="3"\r\n                    [ngModel]="selectedGetCreationRuleResultEntity&&selectedGetCreationRuleResultEntity.Description"></textarea>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n        <kendo-splitter-pane [resizable]="false" [scrollable]="false" [collapsible]="false"\r\n            class="aif-splitter-pane-padding">\r\n            <div style="float:right;">\r\n                <button class="btn-primary btn btn-sm ml-2" (click)="clickOk()"\r\n                    [disabled]="!selectedGetCreationRuleResultEntity">确定</button>\r\n                <button class="btn btn-sm ml-2 btn-default" (click)="clickClose()">取消</button>\r\n            </div>\r\n        </kendo-splitter-pane>\r\n\r\n    </kendo-splitter>\r\n</div>',styles:[".aif-splitter-pane-padding{padding:.5rem 1rem}"]}]}],e.ctorParameters=function(){return[{type:j}]},e}(),F=function(){function e(e,t,r){this.injector=e,this.cfr=t,this.modalService=r,this.innerModalOptions={title:"生单规则选择",width:650,height:415,buttons:null,showButtons:!1}}return e.prototype.showCrRuleSelectModal=function(e,t){var r=this.cfr.resolveComponentFactory(U).create(this.injector);return r.instance.getCreationRule(e),r.instance.bsModalRef=this.modalService.show(r,this.isNullOrUndefined(t)?this.innerModalOptions:t),r.instance.subject.asObservable()},e.prototype.isNullOrUndefined=function(e){return null==e},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:s.Injector},{type:s.ComponentFactoryResolver},{type:y.BsModalService}]},e}(),K={},A=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:T,useValue:e||{}}]}},t.decorators=[{type:s.NgModule,args:[{imports:[i.CommonModule,p.FormsModule,p.ReactiveFormsModule,a.HttpClientModule,d.ButtonsModule,c.DropDownsModule,u.SplitterModule,y.ModalModule,f.FarrisDialogModule],providers:[h.HttpService,y.BsModalService,{provide:T,useValue:K},j,F],declarations:[U],bootstrap:[U],entryComponents:[U],exports:[]}]}],t}();e.AifAssociationEntity=m,e.GetCreationRuleArgs=g,e.AifDocumentsTrackManagerModuleConfig=b,e.AifPullSelectCreationRuleModuleConfig=v,e.AifPushSelectCreationRuleModuleConfig=T,e.AifDocumentsTrackManagerComponent=D,e.AifDocumentsTrackService=O,e.AifDocumentsTrackManagerModule=B,e.AifDocumentsPropertyTextMap=x,e.TrackDirectionTypeMap=S,e.TrackTypeTextMap=R,e.TrackType=C,e.AifPullSelectCreationRuleComponent=V,e.AifPullSelectCreationRuleInternalService=I,e.AifPullSelectCreationRuleService=P,e.AifPullSelectCreationRuleModule=E,e.AifPushSelectCreationRuleComponent=U,e.AifPushSelectCreationRuleInternalService=j,e.AifPushSelectCreationRuleService=F,e.AifPushSelectCreationRuleModule=A,e.ɵa=M,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=gsp-aif-runtime-api.umd.min.js.map