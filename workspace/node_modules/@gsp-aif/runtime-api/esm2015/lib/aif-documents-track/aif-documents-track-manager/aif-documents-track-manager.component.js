/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output } from '@angular/core';
import { TrackType } from '../config/track-type.map';
import { AifDocumentsTrackService } from '../service/aif-documents-track.service';
import { TrackTypeTextMap } from '../config/track-type-text.map';
/**
 * 单据追踪主组件
 */
export class AifDocumentsTrackManagerComponent {
    /**
     * @param {?} trackService
     */
    constructor(trackService) {
        this.trackService = trackService;
        /**
         * 子组件显示控制
         */
        this.isHidden = true;
        this.isShowable = false;
        this.isResultEmpty = null;
        this.documentId = null;
        this.beTypeCode = null;
        this.selectedTrackType = null;
        this.trackTypes = [];
        /**
         * 传递给子组件的所选择的追踪方式
         */
        this.selectedTrackTypeToChildren = "";
        /**
         * 响应结果转化为组件内传输格式
         */
        this.beTypeCodes = [];
        this.documents = {};
        this.beTypeNames = {};
        //初始化追踪方式下拉框
        for (let item in TrackType) {
            this.trackTypes.push({ value: item, text: TrackTypeTextMap[item] });
        }
        //默认选择“下查”方式
        this.selectedTrackType = this.trackTypes[1].value;
        this.selectedTrackTypeToChildren = this.selectedTrackType;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
    }
    /**
     * @return {?}
     */
    search() {
        this.selectedTrackTypeToChildren = this.selectedTrackType;
        this.trackService.getTrackedDocumentData(this.documentId, this.beTypeCode, this.selectedTrackType).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            /** @type {?} */
            let tempDocuments = {};
            /** @type {?} */
            let tempBeTypeNames = {};
            /** @type {?} */
            let tempBeTypeCodes = [];
            if (this.isNullOrUndefined(data) == false && data.length > 0) {
                this.isResultEmpty = false;
                this.isShowable = true;
                this.isHidden = false;
                for (let item of data) {
                    //查询结果不为空时
                    if (this.isNullOrUndefined(tempDocuments[item.BeTypeCode]) == false) {
                        tempDocuments[item.BeTypeCode].push(item);
                    }
                    else {
                        tempBeTypeCodes.push(item.BeTypeCode);
                        tempBeTypeNames[item.BeTypeCode] = item.BeTypeName;
                        tempDocuments[item.BeTypeCode] = [item];
                    }
                }
            }
            else {
                //查询结果为空时
                this.isResultEmpty = true;
                this.isShowable = false;
                this.isHidden = true;
            }
            this.documents = tempDocuments;
            this.beTypeCodes = tempBeTypeCodes;
            this.beTypeNames = tempBeTypeNames;
        }));
    }
    /**
     * 为外部提供的方便递归调用的查询接口
     * @param {?} documentId
     * @param {?} beType
     * @param {?} trackType
     * @return {?}
     */
    searchFromOut(documentId, beType, trackType) {
        this.documentId = documentId;
        this.beTypeCode = beType;
        this.selectedTrackType = trackType;
        this.search();
    }
    /**
     * 从查询结果中选择单据继续追踪时，父组件接收到子组件传来的
     * 对象，并自动调用查询方法
     * @param {?} $event
     * @return {?}
     */
    trackGoingOn($event) {
        this.documentId = $event.documentId;
        this.beTypeCode = $event.beTypeCode;
        this.selectedTrackType = $event.trackType;
        this.search();
    }
    /**
     * @private
     * @param {?} arg
     * @return {?}
     */
    isNullOrUndefined(arg) {
        return arg == null;
    }
}
AifDocumentsTrackManagerComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-aif-documents-track-manager',
                template: "<div class=\"d-flex g-main\">\r\n  <div class=\"col\">\r\n    <div class=\"g-main d-flex flex-column px-2\">\r\n      <!--\u4E3B\u5185\u5BB9\u533A-->\r\n      <div class=\"mb-1 pr-2 position-relative clearfix\">\r\n        <!-- <div class=\"\" style=\"\"> -->\r\n        <div class=\"position-relative\" [style.display]=\"'inherit'\">\r\n          <div class=\"form-inline row py-1\">\r\n            <div class=\"form-group col-sm-12 col-md-4 mb-1\">\r\n              <div class=\"input-group w-100\">\r\n                <div class=\"input-group-prepend\"><span class=\"input-group-text\">\u5355\u636EID</span></div>\r\n                <input class=\"form-control\" placeholder=\"\" name=\"documentId\" [(ngModel)]=\"documentId\" type=\"text\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"form-group col-sm-12 col-md-4 mb-1\">\r\n                <div class=\"input-group w-100\">\r\n                  <div class=\"input-group-prepend\"><span class=\"input-group-text\">BE\u7C7B\u578B\u7F16\u53F7</span></div>\r\n                  <input class=\"form-control\" placeholder=\"\" name=\"beTypeCode\" [(ngModel)]=\"beTypeCode\" type=\"text\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group col-sm-12 col-md-2 mb-1\">\r\n                <div class=\"input-group w-100\">\r\n                  <div class=\"input-group-prepend\"><span class=\"input-group-text\">\u8FFD\u8E2A\u65B9\u5F0F</span></div>\r\n                  <select [(ngModel)]=\"selectedTrackType\" class=\"form-control\">\r\n                      <option *ngFor=\"let tt of trackTypes\" value=\"{{tt.value}}\">{{tt.text}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\" col-sm-12 col-md-1 mb-1\">\r\n              <div class=\"w-100\">\r\n                <button class=\"k-button btn btn-sm btn-default\" type=\"button\" (click)=\"search()\">\u67E5\u8BE2</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        <div class=\"k-form-field\" style=\"color:red; font-size: unset;\" *ngIf=\"isResultEmpty==true\">\u67E5\u8BE2\u7ED3\u679C\u4E3A\u7A7A</div>\r\n      </div>\r\n\r\n      <div class=\"flex-auto k-form-field pb-1\">\r\n        <app-aif-documents-tree [documents]=\"documents\" [beTypeNames]=\"beTypeNames\" [beTypeCodes]=\"beTypeCodes\"\r\n          [trackType]=\"selectedTrackTypeToChildren\" (trackClick)=\"trackGoingOn($event)\">\r\n        </app-aif-documents-tree>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>",
                styles: [""]
            }] }
];
/** @nocollapse */
AifDocumentsTrackManagerComponent.ctorParameters = () => [
    { type: AifDocumentsTrackService }
];
AifDocumentsTrackManagerComponent.propDecorators = {
    documentId: [{ type: Input }],
    beTypeCode: [{ type: Input }],
    selectedTrackType: [{ type: Input }],
    trackTypes: [{ type: Output }]
};
if (false) {
    /**
     * 子组件显示控制
     * @type {?}
     */
    AifDocumentsTrackManagerComponent.prototype.isHidden;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.isShowable;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.isResultEmpty;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.documentId;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.beTypeCode;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.selectedTrackType;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.trackTypes;
    /**
     * 传递给子组件的所选择的追踪方式
     * @type {?}
     */
    AifDocumentsTrackManagerComponent.prototype.selectedTrackTypeToChildren;
    /**
     * 响应结果转化为组件内传输格式
     * @type {?}
     */
    AifDocumentsTrackManagerComponent.prototype.beTypeCodes;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.documents;
    /** @type {?} */
    AifDocumentsTrackManagerComponent.prototype.beTypeNames;
    /**
     * @type {?}
     * @private
     */
    AifDocumentsTrackManagerComponent.prototype.trackService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWlmLWRvY3VtZW50cy10cmFjay1tYW5hZ2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3AtYWlmL3J1bnRpbWUtYXBpLyIsInNvdXJjZXMiOlsibGliL2FpZi1kb2N1bWVudHMtdHJhY2svYWlmLWRvY3VtZW50cy10cmFjay1tYW5hZ2VyL2FpZi1kb2N1bWVudHMtdHJhY2stbWFuYWdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBNEIsTUFBTSxlQUFlLENBQUM7QUFDM0YsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3JELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLCtCQUErQixDQUFDOzs7O0FBV2pFLE1BQU0sT0FBTyxpQ0FBaUM7Ozs7SUF3QjVDLFlBQW9CLFlBQXNDO1FBQXRDLGlCQUFZLEdBQVosWUFBWSxDQUEwQjs7OztRQXJCMUQsYUFBUSxHQUFZLElBQUksQ0FBQztRQUN6QixlQUFVLEdBQVksS0FBSyxDQUFDO1FBQzVCLGtCQUFhLEdBQVksSUFBSSxDQUFDO1FBRzlCLGVBQVUsR0FBVyxJQUFJLENBQUM7UUFFMUIsZUFBVSxHQUFXLElBQUksQ0FBQztRQUUxQixzQkFBaUIsR0FBYyxJQUFJLENBQUM7UUFFcEMsZUFBVSxHQUFHLEVBQUUsQ0FBQzs7OztRQUdoQixnQ0FBMkIsR0FBVyxFQUFFLENBQUM7Ozs7UUFHekMsZ0JBQVcsR0FBVSxFQUFFLENBQUM7UUFDeEIsY0FBUyxHQUFvQyxFQUFFLENBQUM7UUFDaEQsZ0JBQVcsR0FBcUMsRUFBRSxDQUFDO1FBR2pELFlBQVk7UUFDWixLQUFLLElBQUksSUFBSSxJQUFJLFNBQVMsRUFBRTtZQUMxQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGdCQUFnQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNyRTtRQUNELFlBQVk7UUFDWixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDbEQsSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztJQUM1RCxDQUFDOzs7O0lBRUQsUUFBUTtJQUNSLENBQUM7Ozs7O0lBRUQsV0FBVyxDQUFDLE9BQXNCO0lBQ2xDLENBQUM7Ozs7SUFFRCxNQUFNO1FBQ0osSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUUxRCxJQUFJLENBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxTQUFTOzs7O1FBQUMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7O2dCQUM3SCxhQUFhLEdBQW9DLEVBQUU7O2dCQUNuRCxlQUFlLEdBQXFDLEVBQUU7O2dCQUN0RCxlQUFlLEdBQUcsRUFBRTtZQUV4QixJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzVELElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO2dCQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7Z0JBQ3RCLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFO29CQUNyQixVQUFVO29CQUNWLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxLQUFLLEVBQUU7d0JBQ25FLGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO3FCQUMzQzt5QkFBTTt3QkFDTCxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDdEMsZUFBZSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO3dCQUNuRCxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ3pDO2lCQUNGO2FBQ0Y7aUJBQU07Z0JBQ0wsU0FBUztnQkFDVCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztnQkFDMUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2FBQ3RCO1lBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLENBQUM7WUFDL0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxlQUFlLENBQUM7WUFDbkMsSUFBSSxDQUFDLFdBQVcsR0FBRyxlQUFlLENBQUM7UUFDckMsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7Ozs7OztJQVFNLGFBQWEsQ0FBQyxVQUFrQixFQUFFLE1BQWMsRUFBRSxTQUFvQjtRQUMzRSxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUN6QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsU0FBUyxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDOzs7Ozs7O0lBT0QsWUFBWSxDQUFDLE1BQVc7UUFDdEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUNwQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUMxQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQzs7Ozs7O0lBRU8saUJBQWlCLENBQUMsR0FBUTtRQUNoQyxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUM7SUFDckIsQ0FBQzs7O1lBMUdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsaUNBQWlDO2dCQUMzQyxvakZBQTJEOzthQUU1RDs7OztZQVhRLHdCQUF3Qjs7O3lCQW1COUIsS0FBSzt5QkFFTCxLQUFLO2dDQUVMLEtBQUs7eUJBRUwsTUFBTTs7Ozs7OztJQVZQLHFEQUF5Qjs7SUFDekIsdURBQTRCOztJQUM1QiwwREFBOEI7O0lBRTlCLHVEQUMwQjs7SUFDMUIsdURBQzBCOztJQUMxQiw4REFDb0M7O0lBQ3BDLHVEQUNnQjs7Ozs7SUFHaEIsd0VBQXlDOzs7OztJQUd6Qyx3REFBd0I7O0lBQ3hCLHNEQUFnRDs7SUFDaEQsd0RBQW1EOzs7OztJQUV2Qyx5REFBOEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRyYWNrVHlwZSB9IGZyb20gJy4uL2NvbmZpZy90cmFjay10eXBlLm1hcCc7XHJcbmltcG9ydCB7IEFpZkRvY3VtZW50c1RyYWNrU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2UvYWlmLWRvY3VtZW50cy10cmFjay5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVHJhY2tUeXBlVGV4dE1hcCB9IGZyb20gJy4uL2NvbmZpZy90cmFjay10eXBlLXRleHQubWFwJztcclxuaW1wb3J0IHsgT3JkZXJJbmZvIH0gZnJvbSAnLi4vLi4vZW50aXR5L29yZGVyLWluZm8nO1xyXG5cclxuLyoqXHJcbiAqIOWNleaNrui/vei4quS4u+e7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtYWlmLWRvY3VtZW50cy10cmFjay1tYW5hZ2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYWlmLWRvY3VtZW50cy10cmFjay1tYW5hZ2VyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9haWYtZG9jdW1lbnRzLXRyYWNrLW1hbmFnZXIuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQWlmRG9jdW1lbnRzVHJhY2tNYW5hZ2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG5cclxuICAvKirlrZDnu4Tku7bmmL7npLrmjqfliLYgKi9cclxuICBpc0hpZGRlbjogYm9vbGVhbiA9IHRydWU7XHJcbiAgaXNTaG93YWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGlzUmVzdWx0RW1wdHk6IGJvb2xlYW4gPSBudWxsO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIGRvY3VtZW50SWQ6IHN0cmluZyA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBiZVR5cGVDb2RlOiBzdHJpbmcgPSBudWxsO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2VsZWN0ZWRUcmFja1R5cGU6IFRyYWNrVHlwZSA9IG51bGw7XHJcbiAgQE91dHB1dCgpXHJcbiAgdHJhY2tUeXBlcyA9IFtdO1xyXG5cclxuICAvKirkvKDpgJLnu5nlrZDnu4Tku7bnmoTmiYDpgInmi6nnmoTov73ouKrmlrnlvI8gKi9cclxuICBzZWxlY3RlZFRyYWNrVHlwZVRvQ2hpbGRyZW46IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIC8qKuWTjeW6lOe7k+aenOi9rOWMluS4uue7hOS7tuWGheS8oOi+k+agvOW8jyAqL1xyXG4gIGJlVHlwZUNvZGVzOiBhbnlbXSA9IFtdO1xyXG4gIGRvY3VtZW50czogeyBbYmVUeXBlQ29kZTogc3RyaW5nXTogYW55W10gfSA9IHt9O1xyXG4gIGJlVHlwZU5hbWVzOiB7IFtiZVR5cGVDb2RlOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYWNrU2VydmljZTogQWlmRG9jdW1lbnRzVHJhY2tTZXJ2aWNlKSB7XHJcbiAgICAvL+WIneWni+WMlui/vei4quaWueW8j+S4i+aLieahhlxyXG4gICAgZm9yIChsZXQgaXRlbSBpbiBUcmFja1R5cGUpIHtcclxuICAgICAgdGhpcy50cmFja1R5cGVzLnB1c2goeyB2YWx1ZTogaXRlbSwgdGV4dDogVHJhY2tUeXBlVGV4dE1hcFtpdGVtXSB9KTtcclxuICAgIH1cclxuICAgIC8v6buY6K6k6YCJ5oup4oCc5LiL5p+l4oCd5pa55byPXHJcbiAgICB0aGlzLnNlbGVjdGVkVHJhY2tUeXBlID0gdGhpcy50cmFja1R5cGVzWzFdLnZhbHVlO1xyXG4gICAgdGhpcy5zZWxlY3RlZFRyYWNrVHlwZVRvQ2hpbGRyZW4gPSB0aGlzLnNlbGVjdGVkVHJhY2tUeXBlO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgfVxyXG5cclxuICBzZWFyY2goKTogdm9pZCB7XHJcbiAgICB0aGlzLnNlbGVjdGVkVHJhY2tUeXBlVG9DaGlsZHJlbiA9IHRoaXMuc2VsZWN0ZWRUcmFja1R5cGU7XHJcblxyXG4gICAgdGhpcy50cmFja1NlcnZpY2UuZ2V0VHJhY2tlZERvY3VtZW50RGF0YSh0aGlzLmRvY3VtZW50SWQsIHRoaXMuYmVUeXBlQ29kZSwgdGhpcy5zZWxlY3RlZFRyYWNrVHlwZSkuc3Vic2NyaWJlKChkYXRhOiBPcmRlckluZm9bXSkgPT4ge1xyXG4gICAgICBsZXQgdGVtcERvY3VtZW50czogeyBbYmVUeXBlQ29kZTogc3RyaW5nXTogYW55W10gfSA9IHt9O1xyXG4gICAgICBsZXQgdGVtcEJlVHlwZU5hbWVzOiB7IFtiZVR5cGVDb2RlOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xyXG4gICAgICBsZXQgdGVtcEJlVHlwZUNvZGVzID0gW107XHJcblxyXG4gICAgICBpZiAodGhpcy5pc051bGxPclVuZGVmaW5lZChkYXRhKSA9PSBmYWxzZSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmlzUmVzdWx0RW1wdHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzU2hvd2FibGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGRhdGEpIHtcclxuICAgICAgICAgIC8v5p+l6K+i57uT5p6c5LiN5Li656m65pe2XHJcbiAgICAgICAgICBpZiAodGhpcy5pc051bGxPclVuZGVmaW5lZCh0ZW1wRG9jdW1lbnRzW2l0ZW0uQmVUeXBlQ29kZV0pID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRlbXBEb2N1bWVudHNbaXRlbS5CZVR5cGVDb2RlXS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGVtcEJlVHlwZUNvZGVzLnB1c2goaXRlbS5CZVR5cGVDb2RlKTtcclxuICAgICAgICAgICAgdGVtcEJlVHlwZU5hbWVzW2l0ZW0uQmVUeXBlQ29kZV0gPSBpdGVtLkJlVHlwZU5hbWU7XHJcbiAgICAgICAgICAgIHRlbXBEb2N1bWVudHNbaXRlbS5CZVR5cGVDb2RlXSA9IFtpdGVtXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy/mn6Xor6Lnu5PmnpzkuLrnqbrml7ZcclxuICAgICAgICB0aGlzLmlzUmVzdWx0RW1wdHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNTaG93YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZG9jdW1lbnRzID0gdGVtcERvY3VtZW50cztcclxuICAgICAgdGhpcy5iZVR5cGVDb2RlcyA9IHRlbXBCZVR5cGVDb2RlcztcclxuICAgICAgdGhpcy5iZVR5cGVOYW1lcyA9IHRlbXBCZVR5cGVOYW1lcztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Li65aSW6YOo5o+Q5L6b55qE5pa55L6/6YCS5b2S6LCD55So55qE5p+l6K+i5o6l5Y+jXHJcbiAgICogQHBhcmFtIGRvY3VtZW50SWQgXHJcbiAgICogQHBhcmFtIGJlVHlwZSBcclxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZWFyY2hGcm9tT3V0KGRvY3VtZW50SWQ6IHN0cmluZywgYmVUeXBlOiBzdHJpbmcsIHRyYWNrVHlwZTogVHJhY2tUeXBlKTogdm9pZCB7XHJcbiAgICB0aGlzLmRvY3VtZW50SWQgPSBkb2N1bWVudElkO1xyXG4gICAgdGhpcy5iZVR5cGVDb2RlID0gYmVUeXBlO1xyXG4gICAgdGhpcy5zZWxlY3RlZFRyYWNrVHlwZSA9IHRyYWNrVHlwZTtcclxuICAgIHRoaXMuc2VhcmNoKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDku47mn6Xor6Lnu5PmnpzkuK3pgInmi6nljZXmja7nu6fnu63ov73ouKrml7bvvIzniLbnu4Tku7bmjqXmlLbliLDlrZDnu4Tku7bkvKDmnaXnmoRcclxuICAgKiDlr7nosaHvvIzlubboh6rliqjosIPnlKjmn6Xor6Lmlrnms5VcclxuICAgKiBAcGFyYW0gJGV2ZW50IFxyXG4gICAqL1xyXG4gIHRyYWNrR29pbmdPbigkZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5kb2N1bWVudElkID0gJGV2ZW50LmRvY3VtZW50SWQ7XHJcbiAgICB0aGlzLmJlVHlwZUNvZGUgPSAkZXZlbnQuYmVUeXBlQ29kZTtcclxuICAgIHRoaXMuc2VsZWN0ZWRUcmFja1R5cGUgPSAkZXZlbnQudHJhY2tUeXBlO1xyXG4gICAgdGhpcy5zZWFyY2goKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNOdWxsT3JVbmRlZmluZWQoYXJnOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBhcmcgPT0gbnVsbDtcclxuICB9XHJcbn1cclxuIl19