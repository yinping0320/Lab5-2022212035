{"version":3,"file":"gsp-sys-rtf-common.umd.js.map","sources":["ng://@gsp-sys/rtf-common/lib/common-shared.module.ts","ng://@gsp-sys/rtf-common/lib/services/frmVariableService/framework-variable.service.ts","ng://@gsp-sys/rtf-common/lib/services/funcsservice/funcs.service.ts","node_modules/tslib/tslib.es6.js","ng://@gsp-sys/rtf-common/lib/eventbus/frm-eventpipe.ts","ng://@gsp-sys/rtf-common/lib/eventbus/frm-evenbus.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.component.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.config.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.service.ts","ng://@gsp-sys/rtf-common/lib/models/iframe.model.ts","ng://@gsp-sys/rtf-common/lib/shared/frm-util.ts","ng://@gsp-sys/rtf-common/lib/services/i18nService/i18n-setting.service.ts","ng://@gsp-sys/rtf-common/lib/services/appservice/app.service.ts","ng://@gsp-sys/rtf-common/lib/services/frmservice/frameworkservice.ts","ng://@gsp-sys/rtf-common/lib/services/frmEventService/framework-event.service.ts","ng://@gsp-sys/rtf-common/lib/services/communication/broadcasting-station.service.ts","ng://@gsp-sys/rtf-common/lib/resolve/function-resolver.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n  ],\r\n  declarations: [\r\n  ],\r\n  exports: [],\r\n  providers: [],\r\n  entryComponents: []\r\n})\r\nexport class CommonSharedModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { WindowVariableService } from '@ecp-caf/caf-common';\r\n\r\n@Injectable()\r\nexport class FrameworkVariableService {\r\n\r\n    private frameworkVariable = 'frameworkVariable';\r\n    private nameSpace = 'variables';\r\n    private frmVariableName = 'rtfFrmVariable';\r\n    private windowService: WindowVariableService;\r\n\r\n    constructor() {\r\n        this.windowService = new WindowVariableService();\r\n        this.frmVariableInitial();\r\n    }\r\n\r\n    public getFrameworkVariable(): any {\r\n        return this.windowService.getTopWindow()[this.frameworkVariable];\r\n    }\r\n\r\n    /**\r\n     * å¨æ¡æ¶é¡¶çº§windowæ³¨ååé\r\n     */\r\n    public frameworkVariableReg(key: string, value: any) {\r\n        const frmVariable = this.getFrameworkVariable();\r\n        if (frmVariable && frmVariable.name && frmVariable.name === this.frmVariableName) {\r\n            frmVariable[this.nameSpace] = frmVariable[this.nameSpace] || {};\r\n            frmVariable[this.nameSpace][key] = value;\r\n            return;\r\n        }\r\n        this.frmVariableInitial();\r\n        this.getFrameworkVariable()[this.nameSpace][key] = value;\r\n    }\r\n\r\n    public getFrmVariableByKey(key: string): any {\r\n        const frmVariable = this.getFrameworkVariable();\r\n        if (frmVariable && frmVariable[this.nameSpace] && frmVariable[this.nameSpace][key]) {\r\n            return frmVariable[this.nameSpace][key];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * å¨æ¡æ¶çé¡¶çº§windowä¸\r\n     * å®ä¹ä¸ä¸ªå¬å±åéã\r\n     * ç¨äºå­æ¾èåãåºç¨ç¼å­æ°æ®ï¼eventbusé½å¬å±å¯¹è±¡\r\n     * å¯¹ééå±æä¾æå¡\r\n     */\r\n    private frmVariableInitial() {\r\n        const topWin = this.windowService.getTopWindow();\r\n        const name = 'name';\r\n        topWin[this.frameworkVariable] = topWin[this.frameworkVariable] || {};\r\n        topWin[this.frameworkVariable][name] = this.frmVariableName;\r\n        topWin[this.frameworkVariable][this.nameSpace] = topWin[this.frameworkVariable][this.nameSpace] || {};\r\n    }\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\n@Injectable()\r\nexport class FuncsService {\r\n\r\n    private allgspfuncs = 'allgspfuncs';\r\n    private allfuncinvoks = 'allfuncinvoks';\r\n\r\n    constructor(@Optional() private frmVariableService: FrameworkVariableService) {\r\n        if (!this.frmVariableService) {\r\n            this.frmVariableService = new FrameworkVariableService();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ç¼å­ææåè½\r\n     */\r\n    public cacheAllFuncs(funcs: any[]) {\r\n        this.frmVariableService.frameworkVariableReg(this.allgspfuncs, funcs);\r\n    }\r\n\r\n    /**\r\n     * è·åææç¼å­çåè½\r\n     */\r\n    public getAllCachedFuncs(): any {\r\n        const funcsCache = this.frmVariableService.getFrmVariableByKey(this.allgspfuncs);\r\n        return funcsCache as any[] || [];\r\n    }\r\n\r\n    /**\r\n     * è·åæåè½\r\n     */\r\n    public getCachedFunc(funcId: string): any {\r\n        const allfuncs = this.getAllCachedFuncs();\r\n        if (allfuncs) {\r\n            return allfuncs.find(f => f.id === funcId);\r\n        }\r\n    }\r\n\r\n    public cacheAllFuncInvoks(invoks: any[]) {\r\n        this.frmVariableService.frameworkVariableReg(this.allfuncinvoks, invoks);\r\n    }\r\n\r\n    public getAllCachedFuncInvoks(): any {\r\n        const invokCache = this.frmVariableService.getFrmVariableByKey(this.allfuncinvoks);\r\n        return invokCache as any[] || [];\r\n    }\r\n\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// tslint:disable-next-line:import-blacklist\r\nimport { BehaviorSubject, Subscription, Subject } from 'rxjs';\r\nimport { Injectable, Type } from '@angular/core';\r\nimport { IDisposable } from './types';\r\n\r\n@Injectable()\r\nexport class EventBusPipe implements IDisposable {\r\n\r\n    public eventSubject: Subject<any>;\r\n    public observers: Map<string, Subscription>;\r\n    public pipeCode: string;\r\n    private subscription: Subscription;\r\n    private onceSubscription: Subscription;\r\n\r\n    constructor(private tokenValue: string, private parentEventPipeList: Array<EventBusPipe>, sub: Subject<any>) {\r\n        this.eventSubject = sub || new BehaviorSubject<any>(null);\r\n        this.subscription = new Subscription();\r\n        this.onceSubscription = new Subscription();\r\n        this.observers = new Map<string, Subscription>();\r\n\r\n        if (this.parentEventPipeList) {\r\n            this.parentEventPipeList.push(this);\r\n        }\r\n    }\r\n\r\n    post(bizPara: any) {\r\n        this.eventSubject.next(bizPara);\r\n    }\r\n\r\n    subscribe(eventHandler: (value: any) => void): IDisposable {\r\n        this.subscription = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    subscribeWithObkey(observerKey: string, eventHandler: (value: any) => void): IDisposable {\r\n        const observer = this.observers.get(observerKey);\r\n        if (observer) {\r\n            observer.unsubscribe();\r\n        }\r\n        const sub = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n        });\r\n        this.observers.set(observerKey, sub);\r\n        return this;\r\n    }\r\n\r\n    subscribeOnce(eventHandler: (value: any) => void): IDisposable {\r\n        const self = this;\r\n        const scription = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n            if (scription) {\r\n                scription.unsubscribe();\r\n            }\r\n            self.parentEventPipeList = new Array<EventBusPipe>();\r\n        });\r\n        return this;\r\n    }\r\n\r\n    unSubscribe() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n            this.subscription = null;\r\n        }\r\n    }\r\n    // æ³¨éä½¿ç¨onceæ¹æ³æ³¨åçè®¢éã\r\n    unSubscribeForOnce() {\r\n        this.onceSubscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n     * åæ¶æè§å¯èçè®¢é\r\n     * @param observerKey è§å¯èå¯ä¸æ è¯\r\n     */\r\n    unSubscribeWithObkey(observerKey: string) {\r\n        const scription = this.observers.get(observerKey);\r\n        if (scription) {\r\n            scription.unsubscribe();\r\n        }\r\n    }\r\n\r\n\r\n    matchEmitterToken(tokenValue: string): boolean {\r\n        if (this.tokenValue && tokenValue && this.tokenValue !== tokenValue) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    examByTargetToken(tokenValue: string): boolean {\r\n        if (this.tokenValue !== tokenValue) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    dispose(subscriber: Subscription): void {\r\n    }\r\n}\r\n","import { Injectable, Type } from '@angular/core';\r\nimport { IDisposable, IEmitable } from './types';\r\nimport { EventBusPipe } from './frm-eventpipe';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class FrmEventBus implements IEmitable {\r\n\r\n    public eventMap: Map<string, Array<EventBusPipe>>;\r\n\r\n    constructor() {\r\n        this.eventMap = new Map<string, Array<EventBusPipe>>();\r\n    }\r\n\r\n\r\n    // åéäºä»¶ï¼éç¥è®¢éèæ¥æ¶æ¶æ¯ã\r\n    post(tokenValue: string, eventArgs: any): void {\r\n        let eventPipeList = this.eventMap.get(tokenValue);\r\n        if (!eventPipeList) {\r\n            eventPipeList = new Array<EventBusPipe>();\r\n            this.eventMap.set(tokenValue, eventPipeList);\r\n        }\r\n        let eventPipe = eventPipeList.find(item => item.examByTargetToken(tokenValue));\r\n        if (!eventPipe) {\r\n            eventPipe = new EventBusPipe(tokenValue, eventPipeList, null);\r\n        }\r\n        for (const eventPipeDetail of eventPipeList) {\r\n            if (eventPipeDetail.matchEmitterToken(tokenValue)) {\r\n                eventPipeDetail.post(eventArgs);\r\n            }\r\n        }\r\n    }\r\n\r\n    initialPipe(token: string, sub: Subject<any>) {\r\n        let pipes = this.eventMap.get(token);\r\n        if (!pipes) {\r\n            pipes = new Array<EventBusPipe>();\r\n            this.eventMap.set(token, pipes);\r\n        }\r\n        let eventPipe = pipes.find(item => item.examByTargetToken(token));\r\n        if (!eventPipe) {\r\n            eventPipe = new EventBusPipe(token, pipes, sub);\r\n        }\r\n    }\r\n\r\n    // è®¢éäºä»¶\r\n    on(tokenValue: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            return pipe.subscribe(handler);\r\n        }\r\n    }\r\n\r\n    /** è®¢éäºä»¶ï¼å¹¶è®°å½è®¢éèå¯ä¸æ è¯ */\r\n    onWithObkey(tokenValue: string, observerKey: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            return pipe.subscribeWithObkey(observerKey, handler);\r\n        }\r\n    }\r\n\r\n    // è®¢éä¸æ¬¡ãæ¥æ¶å°ä¸æ¬¡æ¶æ¯ä¹åèªå¨åæ¶è®¢é\r\n    once(tokenValue: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            const res = pipe.subscribeOnce(handler);\r\n            this.eventMap.delete(tokenValue);\r\n            return res;\r\n        }\r\n    }\r\n\r\n    unSubscribe(tokenValue: string) {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            pipe.unSubscribe();\r\n        }\r\n    }\r\n\r\n    private getEventPipe(tokenValue: string) {\r\n        const eventPipeList = this.eventMap.get(tokenValue);\r\n        if (!eventPipeList) {\r\n            return null;\r\n        }\r\n        const eventPipe = eventPipeList.find(item => item.examByTargetToken(tokenValue));\r\n        return eventPipe;\r\n    }\r\n}\r\n","import { Component, OnInit, ElementRef, ViewChild, Renderer2, AfterViewInit, Output, EventEmitter } from '@angular/core';\r\n\r\n// tslint:disable\r\n@Component({\r\n    selector: 'farris-loading',\r\n    template: `\r\n        <div #loadingBackdrop class=\"farris-loading-backdrop\" *ngIf=\"isActive\"></div>\r\n        <div #loadingContainerEl class=\"farris-loading\" *ngIf=\"isActive\">\r\n            <div class=\"ng-busy-default-wrapper\">\r\n                <div class=\"ng-busy-default-sign\">\r\n                    <div class=\"ng-busy-default-spinner\">\r\n                        <svg class=\"circular\" viewBox=\"25 25 50 50\">\r\n                            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"></circle>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        .circular {\r\n            -webkit-animation: rotate 2s linear infinite;\r\n            animation: rotate 2s linear infinite;\r\n            height: 100%;\r\n            -webkit-transform-origin: center center;\r\n            transform-origin: center center;\r\n            width: 100%;\r\n            position: absolute;\r\n            top: 0;\r\n            bottom: 0;\r\n            left: 0;\r\n            right: 0;\r\n            margin: auto;\r\n        }\r\n        .circular .path {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\r\n            animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\r\n            stroke-linecap: round;\r\n        }\r\n\r\n        @-webkit-keyframes rotate {\r\n            100% {\r\n            -webkit-transform: rotate(360deg);\r\n                    transform: rotate(360deg);\r\n            }\r\n        }\r\n        @keyframes rotate {\r\n            100% {\r\n            -webkit-transform: rotate(360deg);\r\n                    transform: rotate(360deg);\r\n            }\r\n        }\r\n        @-webkit-keyframes dash {\r\n            0% {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            }\r\n            50% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -35px;\r\n            }\r\n            100% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -124px;\r\n            }\r\n        }\r\n        @keyframes dash {\r\n            0% {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            }\r\n            50% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -35px;\r\n            }\r\n            100% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -124px;\r\n            }\r\n        }\r\n        @-webkit-keyframes color {\r\n            100%,\r\n            0% {\r\n            stroke: #48a7ff;\r\n            }\r\n            40% {\r\n            stroke: #48a7ff;\r\n            }\r\n            66% {\r\n            stroke: #48a7ff;\r\n            }\r\n            80%,\r\n            90% {\r\n            stroke: #48a7ff;\r\n            }\r\n        }\r\n        @keyframes color {\r\n            100%,\r\n            0% {\r\n            stroke: #48a7ff;\r\n            }\r\n            40% {\r\n            stroke: #48a7ff;\r\n            }\r\n            66% {\r\n            stroke: #48a7ff;\r\n            }\r\n            80%,\r\n            90% {\r\n            stroke: #48a7ff;\r\n            }\r\n        }\r\n        .ng-busy-default-spinner {\r\n            width: 126px;height: 126px;\r\n        }\r\n        .ng-busy-default-sign{\r\n            background: transparent;\r\n            box-shadow: none;\r\n        }\r\n        .farris-loading-backdrop {\r\n            background-color: #ffffff;\r\n            opacity: .0;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class LoadingComponent implements OnInit, AfterViewInit {\r\n\r\n    id: number;\r\n\r\n    private _isActive = false;\r\n    message = 'æ­£å¨å è½½ï¼è¯·ç¨å...';\r\n\r\n    get isActive() {\r\n        return this._isActive;\r\n    }\r\n\r\n    set isActive(val: boolean) {\r\n        this._isActive = val;\r\n        if (val) {\r\n            this.animate('fadeIn');\r\n        } else {\r\n            this.el.nativeElement && this.el.nativeElement.remove();\r\n        }\r\n\r\n    }\r\n\r\n    @ViewChild('loadingContainerEl') loadingContainerEl: ElementRef;\r\n    @ViewChild('loadingBackdrop') loadingBackdrop: ElementRef;\r\n    @Output() closed = new EventEmitter();\r\n\r\n\r\n    constructor(private render: Renderer2, private el: ElementRef) { }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // setTimeout(() => this.setPosition(), 0 );\r\n        this.setPosition();\r\n    }\r\n\r\n    close() {\r\n        this.isActive = false;\r\n    }\r\n\r\n    private setPosition() {\r\n        const containerWidth = this.loadingContainerEl.nativeElement.clientWidth;\r\n        const containerHeight = this.loadingContainerEl.nativeElement.clientHeight;\r\n\r\n        this.render.setStyle(this.loadingContainerEl.nativeElement, 'marginTop', -containerHeight / 2 + 'px');\r\n        this.render.setStyle(this.loadingContainerEl.nativeElement, 'marginLeft', -containerWidth / 2 + 'px');\r\n    }\r\n\r\n    private animate(animateCls: string) {\r\n        this.render.setAttribute(this.el.nativeElement, 'class', animateCls);\r\n        this.addAnimationEndEvent('webkitAnimationEnd', 'mozAnimationEnd', 'MSAnimationEnd', 'oanimationend', 'animationend');\r\n    }\r\n\r\n    private addAnimationEndEvent(...events: string[]) {\r\n        const _this = this;\r\n\r\n        events.forEach(e => {\r\n            _this.el.nativeElement.addEventListener(e, function handler() {\r\n                _this.render.removeAttribute(_this.el.nativeElement, 'class');\r\n                _this.el.nativeElement.removeEventListener(e, handler);\r\n\r\n                _this.closed.emit(_this.isActive);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport interface LoadingConfig {\r\n    container?: any;\r\n    message?: string;\r\n    position?: string;\r\n    template?: string;\r\n}\r\n\r\nexport const loaddingDefaultConfig = {\r\n    container: 'body',\r\n    message: 'æ­£å¨å è½½ä¸­ï¼è¯·ç¨å...',\r\n    posion: 'center'\r\n};\r\n\r\nexport const LOADING_DEFAULT_CONFIG = new InjectionToken<LoadingConfig>('loading default options.');\r\n","import { LoadingComponent } from './loading.component';\r\nimport { Injectable, ApplicationRef, ComponentFactoryResolver, Injector, ComponentRef, ElementRef } from '@angular/core';\r\nimport { LoadingConfig, LOADING_DEFAULT_CONFIG, loaddingDefaultConfig } from './loading.config';\r\n\r\n@Injectable()\r\nexport class LoadingService {\r\n\r\n    config: LoadingConfig;\r\n    private loadingCmpRef: ComponentRef<LoadingComponent>;\r\n\r\n    constructor(\r\n        private appRef: ApplicationRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        private injecotr: Injector\r\n    ) {\r\n    }\r\n\r\n    show(config?: LoadingConfig): LoadingComponent {\r\n        this.removeDomCheck();\r\n        this.config = this.injecotr.get(LOADING_DEFAULT_CONFIG) || {};\r\n        this.config = Object.assign(loaddingDefaultConfig, this.config);\r\n\r\n        const loadingFactory = this.cfr.resolveComponentFactory(LoadingComponent);\r\n        this.loadingCmpRef = loadingFactory.create(this.injecotr);\r\n\r\n        if (config) {\r\n            this.config = Object.assign({}, this.config, config);\r\n        }\r\n\r\n        const languageCode = localStorage.getItem('languageCode');\r\n        if (languageCode === 'en') {\r\n            this.config.message = 'Loading...';\r\n        }\r\n\r\n        const container = this.config.container;\r\n        if (container === 'body') {\r\n            document.querySelector(container as string).appendChild(this.loadingCmpRef.location.nativeElement);\r\n        } else {\r\n            if (container instanceof ElementRef) {\r\n                container.nativeElement.appendChild(\r\n                    this.loadingCmpRef.location.nativeElement\r\n                );\r\n            }\r\n        }\r\n        this.loadingCmpRef.instance.isActive = true;\r\n        Object.assign(this.loadingCmpRef.instance, this.config);\r\n\r\n        this.loadingCmpRef.instance.closed.subscribe(state => {\r\n            if (!state) {\r\n                this.clearDom(this.loadingCmpRef);\r\n            }\r\n        });\r\n\r\n        this.loadingCmpRef.changeDetectorRef.markForCheck();\r\n        this.loadingCmpRef.changeDetectorRef.detectChanges();\r\n\r\n        return this.loadingCmpRef.instance;\r\n    }\r\n\r\n    close() {\r\n        if (!!this.loadingCmpRef) {\r\n            this.clearDom(this.loadingCmpRef);\r\n        }\r\n    }\r\n\r\n    private clearDom(cmpRef: ComponentRef<LoadingComponent>) {\r\n        try {\r\n            const loadingEl = cmpRef.location.nativeElement;\r\n\r\n            if (!!loadingEl && loadingEl.parentNode) {\r\n                loadingEl.parentNode.removeChild(loadingEl);\r\n            }\r\n\r\n            this.config = this.injecotr.get(LOADING_DEFAULT_CONFIG);\r\n            cmpRef.destroy();\r\n            cmpRef = null;\r\n            setTimeout(() => {\r\n                // 1.5s åæ£æ¥æ¯å¦ç§»é¤æå\r\n                this.removeDomCheck();\r\n            }, 1500);\r\n        } catch (e) {\r\n            console.log(e);\r\n            this.removeDomCheck();\r\n        }\r\n    }\r\n\r\n    private removeDomCheck(): void {\r\n        try {\r\n            const el = document.getElementsByTagName('farris-loading')[0];\r\n            if (!!el && !!el.parentNode) {\r\n                el.parentNode.removeChild(el);\r\n            }\r\n        } catch (ex) {\r\n            console.log(ex);\r\n        }\r\n    }\r\n}\r\n\r\n","export class IframeLink {\r\n    /** å¯ä¸æ è¯ tabId */\r\n    id: string;\r\n\r\n    code: string; // ç¼å·\r\n    FuncName: string; // åç§°\r\n    appType: string; // åºç¨ç±»å menu app\r\n    funcId: string;\r\n    appId: string;\r\n    appEntrance: string;\r\n    /** iframeæå è½½åè½çurlåquerystringåæ°è¿è¡æ¶æ¼æ¥ */\r\n    src: string;\r\n    /** iframeæå è½½åè½çurl */\r\n    url: string;\r\n\r\n    active = false;\r\n    /** å½åiframeå¯¹åºçåè½session */\r\n    sessionid: string;\r\n\r\n    reload: boolean;\r\n    /** æ¯å¦ä¸ºjQueryåçå¼å */\r\n    isjquery: boolean;\r\n\r\n    /**\r\n     * spaæ¨¡å¼ä¸éå¤æå¼åè½\r\n     * trueï¼æé æ°çé¡µé¢å®ä¾\r\n     * false || null || undefinedï¼å¤ç¨å·²æå¼çé¡µé¢å®ä¾\r\n     */\r\n    isNewTab: boolean;\r\n\r\n    /** æ ç­¾é¡µæå¼æ¹å¼: spa mdi */\r\n    mode: string;\r\n    /** èåé¨ç½²suä¿¡æ¯ */\r\n    su: string;\r\n\r\n    /**\r\n     * å½åè¡¨åçå¬å±åétoken\r\n     */\r\n    formToken: string;\r\n\r\n    constructor(code: string, sessionid: string, src = '', active = false) {\r\n        this.code = code;\r\n        this.src = src;\r\n        this.active = active;\r\n        this.sessionid = sessionid;\r\n    }\r\n}\r\n","import { FrmEventBus } from '../eventbus/frm-evenbus';\r\nimport { IframeLink } from '../models/iframe.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { EventBusPipe } from '../eventbus/frm-eventpipe';\r\nimport { FrameworkVariableService } from '../services/frmVariableService/framework-variable.service';\r\n\r\nexport class FrmUtil {\r\n\r\n    public static setHeader(bizContextId: string, options: any) {\r\n        options.headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n        if (bizContextId) {\r\n            const contextKey = 'X-CAF-Runtime-Context';\r\n            options.headers[contextKey] = bizContextId;\r\n        }\r\n        return options;\r\n    }\r\n\r\n    public static getTabArray(): IframeLink[] {\r\n        const iframeTabArr = 'iframeTabarray';\r\n        const topWin = this.getTopWindow();\r\n        let frmWin: Window = window;\r\n        while ((!frmWin[iframeTabArr] || frmWin[iframeTabArr].length === 0) && frmWin !== topWin) {\r\n            frmWin = frmWin.parent;\r\n        }\r\n        return frmWin[iframeTabArr] as IframeLink[] || [];\r\n    }\r\n\r\n    public static getTopWindow(): Window {\r\n        let curWin: Window = window.self;\r\n        try {\r\n            while (curWin.location.origin === curWin.parent.location.origin) {\r\n                if (curWin !== curWin.parent) {\r\n                    curWin = curWin.parent;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        } catch (e) { }\r\n        return curWin;\r\n    }\r\n\r\n    public static removeTab(index: number) {\r\n        const iframeArr = this.getTabArray();\r\n        iframeArr.splice(index, 1);\r\n    }\r\n}\r\n\r\nexport class EventUtil {\r\n\r\n    /** eventToken str */\r\n    public static FARRIS_APPS = 'all-gsp-farrisapps';\r\n    public static FARRIS_APP_CLICK = 'farrisapp-click';\r\n    public static ALL_GSP_FUNCS = 'all-gsp-functions';\r\n    public static BEFORE_FUNC_CLOSE = 'beforeFuncCloseEvent';\r\n    public static FUNC_CLOSED = 'FuncClosed';\r\n    public static FUNC_SWITCH = 'funcSwitchEvent';\r\n    public static AFTER_FRAME_LOAD = \"after-iframe-load-event\";\r\n    private static eventBusKey = 'frmEventBus';\r\n\r\n    private static frmVariable = new FrameworkVariableService();\r\n\r\n    /** è·åæ¡æ¶event */\r\n    public static getFrmEvent(): FrmEventBus {\r\n        const eventBus = this.frmVariable.getFrmVariableByKey(this.eventBusKey);\r\n        return eventBus as FrmEventBus;\r\n    }\r\n\r\n    public static setFrmEvent(feb: FrmEventBus) {\r\n        this.frmVariable.frameworkVariableReg(this.eventBusKey, feb);\r\n    }\r\n\r\n    /**\r\n     * è·åappå¯ä¸çè§å¯èæ è¯\r\n     */\r\n    public static appObsToken(appId: string, appEntrance: string, tabId?: string): string {\r\n        return tabId || `${appId}#${appEntrance}`;\r\n    }\r\n\r\n    /**\r\n     * è·åfuncå¯ä¸çè§å¯èæ è¯\r\n     */\r\n    public static funcObsToken(funcId: string, tabId?: string): string {\r\n        return tabId || funcId;\r\n    }\r\n\r\n    /**\r\n     * è·åæäºä»¶ççå¬è\r\n     */\r\n    public static getObserver(eventToken: string): Map<string, Subscription> {\r\n        const feb = this.getFrmEvent();\r\n        const eventMap = feb.eventMap.get(eventToken);\r\n        if (!eventMap) {\r\n            return null;\r\n        }\r\n\r\n        let eventPipe: EventBusPipe;\r\n        for (const eventPipeDetail of eventMap) {\r\n            if (eventPipeDetail.matchEmitterToken(eventToken)) {\r\n                eventPipe = eventPipeDetail;\r\n                break;\r\n            }\r\n        }\r\n        if (!eventPipe) {\r\n            return null;\r\n        }\r\n        const obs = eventPipe.observers;\r\n        return obs;\r\n    }\r\n\r\n    /**\r\n     * æ¸ç©ºçå¬è\r\n     */\r\n    public static clearObserver(obKey: string) {\r\n        const switchObsMap = this.getObserver(this.FUNC_SWITCH);\r\n        const switchObs = switchObsMap.get(obKey);\r\n        if (switchObs) {\r\n            switchObs.unsubscribe();\r\n            switchObsMap.delete(obKey);\r\n        }\r\n        const closeObsMap = this.getObserver(this.FUNC_CLOSED);\r\n        const closeObs = closeObsMap.get(obKey);\r\n        if (closeObs) {\r\n            closeObs.unsubscribe();\r\n            closeObsMap.delete(obKey);\r\n        }\r\n        const beforeCloseMap = this.getObserver(this.BEFORE_FUNC_CLOSE);\r\n        const beforeClose = beforeCloseMap.get(obKey);\r\n        if (beforeClose) {\r\n            beforeClose.unsubscribe();\r\n            beforeCloseMap.delete(obKey);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¸ç©ºæä¸ªç®¡é\r\n     */\r\n    public static clearEventPipe(pipeToken: string) {\r\n        const feb = this.getFrmEvent();\r\n        const eventPipes = feb.eventMap.get(pipeToken);\r\n        if (!eventPipes) {\r\n            return;\r\n        }\r\n        const eventPipe = eventPipes.find(item => item.examByTargetToken(pipeToken));\r\n        if (eventPipe) {\r\n            eventPipe.unSubscribe();\r\n            feb.eventMap.delete(pipeToken);\r\n        }\r\n    }\r\n}\r\n\r\nexport const AppType = {\r\n    App: 'app',\r\n    Menu: 'menu',\r\n    Other: 'other'\r\n};\r\n\r\nexport interface FuncEventArgs {\r\n    /** å½åtabé¡µçå¯ä¸æ è¯ */\r\n    tabId: string;\r\n    /** å½åtabæå¼çåè½ç±»å app or menu */\r\n    appType: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n    tabName?: string;\r\n    beforeCloseHandle?: (arg: any) => void;\r\n}\r\n\r\nexport interface FuncStateParam {\r\n    /**\r\n     * formToken (ç®ç§° cvft)\r\n     */\r\n    token?: string;\r\n    /** å½åtabé¡µçå¯ä¸æ è¯ */\r\n    tabId: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n    /**\r\n     * å½é¡µé¢nameèªå®ä¹æ¶ä¸ºèªå®ä¹\r\n     * å¦åï¼funcä¸ºfuncNameï¼appä¸ºentryName\r\n     */\r\n    menuName: string;\r\n    /**\r\n     * å¨ä½\r\n     */\r\n    action: string;\r\n}\r\n\r\nexport interface AppOptions {\r\n    /**\r\n     * æå®å½åæå¼çæ¯èåï¼menuï¼è¿æ¯åºç¨ï¼appï¼\r\n     */\r\n    appType: string;\r\n\r\n    /*** å¦ææå¼èåï¼funcIdéè¦æå®ï¼appIdãappEntranceå¯ä»¥ä¸ºç©º */\r\n    funcId: string;\r\n\r\n    /*** å¦ææå¼åºç¨ï¼appIdåappEntranceéè¦æå®ï¼funcIdå¯ä»¥ä¸ºç©º */\r\n    appId: string;\r\n    appEntrance: string;\r\n\r\n    /** å¦æéè¦éå¤æå¼åè½ï¼åèªè¡æå®å¯ä¸tabId */\r\n    tabId?: string;\r\n    tabName?: string;\r\n\r\n    /**\r\n     * è¡¨åå¬å±åétoken/formToken\r\n     */\r\n    token?: string;\r\n    /**\r\n     * è¡¨åæå±SU\r\n     */\r\n    su?: string;\r\n    routeUrl?: string;\r\n    entityParams?: any;\r\n    queryStringParams?: Map<string, string>;\r\n    isReload?: boolean;\r\n    isJquery?: boolean;\r\n    /**\r\n     * spaæ¨¡å¼ä¸éå¤æå¼åè½\r\n     * trueï¼æé æ°çé¡µé¢å®ä¾\r\n     * false || null || undefinedï¼å¤ç¨å·²æå¼çé¡µé¢å®ä¾\r\n     * ç®åæ°çtabIdå°±æ¯æ°çé¡µé¢å®ä¾\r\n     */\r\n    isNewTab?: boolean;\r\n\r\n    /**\r\n     * åªè·åè¢«æå¼è¡¨åçlinkå®ä½ï¼\r\n     * ä¸è§¦åæ¡æ¶å è½½è¡¨åå®è·µ\r\n     */\r\n    onlyGetIframeLink?: boolean;\r\n\r\n    /**\r\n     * å³é­ååè°å¤ç\r\n     */\r\n    beforeCloseHandle?: (arg: any) => void;\r\n}\r\n\r\nexport interface FrmSubjectOptions {\r\n    customToken?: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n}\r\n\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService, LanguageService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\nexport interface I18nSettingEntity {\r\n    i18nSetting?: any;\r\n    languages?: any;\r\n    currentLanCode?: string;\r\n}\r\n\r\n@Injectable()\r\nexport class FrmI18nSettingService {\r\n\r\n    private variableKey = 'frm-i18nSetting';\r\n    constructor(\r\n        private frmVariable: FrameworkVariableService,\r\n        private lanService: LanguageService,\r\n        private http: HttpService\r\n    ) {\r\n    }\r\n\r\n    public getSetting(): any {\r\n        const temp = this.frmVariable.getFrmVariableByKey(this.variableKey);\r\n        return this.deepClone(temp);\r\n    }\r\n\r\n    public getSetting$(): Observable<any> {\r\n        const temp = this.frmVariable.getFrmVariableByKey(this.variableKey);\r\n        return !temp ? this.loadSetting$() : of(this.deepClone(temp));\r\n    }\r\n\r\n    public loadSetting$(): Observable<any> {\r\n        const rtfService = (window as any).gspframeworkService && (window as any).gspframeworkService.rtf;\r\n        const entity: I18nSettingEntity = {};\r\n        if (!!rtfService && !!rtfService.language) {\r\n            try {\r\n                const lanService = rtfService.language;\r\n                lanService.i18nSetting(\r\n                    res => {\r\n                        entity.i18nSetting = res;\r\n                    },\r\n                    err => {\r\n                        console.log(err);\r\n                    }\r\n                );\r\n                lanService.allLanguages(\r\n                    res => {\r\n                        entity.languages = res;\r\n                    },\r\n                    err => {\r\n                        console.log(err);\r\n                    }\r\n                );\r\n                entity.currentLanCode = lanService.getLanguageCode();\r\n                this.frmVariable.frameworkVariableReg(this.variableKey, entity);\r\n                return of(entity);\r\n            } catch (e) {\r\n                console.log(e);\r\n                return of(null);\r\n            }\r\n        } else {\r\n            const languagesUrl = '/api/runtime/sys/v1.0/i18n/languageservice/getalllanguages';\r\n            const settingUrl = '/api/runtime/sys/v1.0/i18n/i18nusersetting/setting';\r\n            entity.currentLanCode = this.lanService.getLanguageCode();\r\n            return this.http.get(languagesUrl).pipe(\r\n                map(\r\n                    (res) => entity.languages = res\r\n                ),\r\n                switchMap(\r\n                    () => this.http.get(settingUrl)\r\n                ),\r\n                map(\r\n                    (res) => {\r\n                        entity.i18nSetting = res;\r\n                        this.frmVariable.frameworkVariableReg(this.variableKey, entity);\r\n                        return entity;\r\n                    }\r\n                ),\r\n                catchError(\r\n                    (err: HttpErrorResponse) => {\r\n                        console.log(err);\r\n                        return of(null);\r\n                    }\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    private deepClone(target: any): any {\r\n        let result;\r\n        if (typeof target === 'object') {\r\n            if (Array.isArray(target)) {\r\n                result = [];\r\n                for (let i in target) {\r\n                    result.push(this.deepClone(target[i]))\r\n                }\r\n            } else if (target === null) {\r\n                result = null;\r\n            } else if (target.constructor === RegExp) {\r\n                result = target;\r\n            } else {\r\n                result = {};\r\n                for (let i in target) {\r\n                    result[i] = this.deepClone(target[i]);\r\n                }\r\n            }\r\n        } else {\r\n            result = target;\r\n        }\r\n        return result;\r\n    }\r\n\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { Observable, of, zip } from 'rxjs';\r\nimport { HttpService, LanguageService, SessionService } from '@ecp-caf/caf-common';\r\nimport { IframeLink } from '../../models/iframe.model';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { EventUtil, FrmUtil, AppType, FuncEventArgs, AppOptions, FuncStateParam } from '../../shared/frm-util';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\nimport { FrmI18nSettingService } from '../i18nService/i18n-setting.service';\r\n\r\n\r\n@Injectable()\r\nexport class AppService {\r\n    private FUNCSTATUS_PATH = '/api/runtime/sys/v1.0/function-states';\r\n    private APPINVOKE_CAHCE_KEY = 'allappinvoks';\r\n    private frmVariableService: FrameworkVariableService;\r\n\r\n    constructor(\r\n        private http: HttpService,\r\n        private sessionSvc: SessionService,\r\n        @Optional() private i18nSetting: FrmI18nSettingService\r\n    ) {\r\n        this.frmVariableService = new FrameworkVariableService();\r\n        if (!this.i18nSetting) {\r\n            const variables = new FrameworkVariableService();\r\n            const language = new LanguageService(null);\r\n            this.i18nSetting = new FrmI18nSettingService(variables, language, http);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Appè·³è½¬æå¼\r\n     */\r\n    public openApp(appId: string, appEntrance: string, params: Map<string, string>, reload?: boolean) {\r\n        const appOpts: AppOptions = {\r\n            funcId: '',\r\n            appId,\r\n            appEntrance,\r\n            appType: AppType.App,\r\n            entityParams: params,\r\n            queryStringParams: params,\r\n            isReload: reload\r\n        };\r\n        this.openAppByOptions(appOpts);\r\n    }\r\n\r\n    /**\r\n     * Appè·³è½¬æå¼æå¡\r\n     */\r\n    public openAppByOptions(options: AppOptions) {\r\n\r\n        const linkobj = this.checkingRepeatOpen(options);\r\n        if (linkobj) {\r\n            return;\r\n        }\r\n        this.getInvokeAndEnterApp$(options).subscribe(\r\n            link => {\r\n                this.getFeb().post(EventUtil.FARRIS_APP_CLICK, link);\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * æµæ¹å¼ï¼Appè·³è½¬æå¼æå¡\r\n     */\r\n    public openAppByOptions$(options: AppOptions): Observable<any> {\r\n        const linkobj = this.checkingRepeatOpen(options);\r\n        if (linkobj) {\r\n            return of(true);\r\n        }\r\n        return this.getInvokeAndEnterApp$(options).pipe(\r\n            map(\r\n                link => {\r\n                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, link);\r\n                    return true;\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åappè°ç¨ä¿¡æ¯\r\n     */\r\n    public getAppInvok(appId: string): Observable<any> {\r\n        const invoks = this.getInvokCache();\r\n        const funcInvok = invoks.find(f => f.id === appId);\r\n        if (!funcInvok) {\r\n            return this.getInvokConfig(appId).pipe(\r\n                map(v => {\r\n                    if (!v) {\r\n                        return null;\r\n                    }\r\n                    this.refreshInvokCache(invoks, v);\r\n                    return v;\r\n                })\r\n            );\r\n        }\r\n        return of(funcInvok);\r\n    }\r\n\r\n    public beforeCloseAppByOptions(options: AppOptions) {\r\n        const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(appObkey);\r\n        if (!obs) {\r\n            this.closeAppByOptions(options).subscribe();\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: this.getPageId(options.appId, options.appEntrance, options.tabId),\r\n            appType: AppType.App,\r\n            appId: options.appId,\r\n            appEntrance: options.appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * Appå³é­åæ¥å£\r\n     */\r\n    public beforeCloseApp(appId: string, appEntrance: string, tabId?: string) {\r\n        const self = this;\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance, tabId);\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(appObkey);\r\n        if (!obs) {\r\n            this.closeApp(appId, appEntrance, tabId).subscribe();\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: self.getPageId(appId, appEntrance, tabId),\r\n            appType: AppType.App,\r\n            appId,\r\n            appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    public closeAppByOptions(options: AppOptions): Observable<any> {\r\n        const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n        const pageToken = this.getPageId(options.appId, options.appEntrance, options.tabId);\r\n        EventUtil.clearObserver(appObkey);\r\n        EventUtil.clearEventPipe(pageToken);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageToken && i.appType === AppType.App);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n\r\n        options.token = options.token || obj.formToken;\r\n        FrmUtil.removeTab(objIndex);\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageToken,\r\n            appType: AppType.App,\r\n            appId: options.tabId,\r\n            appEntrance: options.appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        return this.quitApp(options, obj.su);\r\n    }\r\n\r\n    /**\r\n     * å³é­app\r\n     */\r\n    public closeApp(appId: string, appEntrance: string, tabId?: string): Observable<any> {\r\n        const self = this;\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance, tabId);\r\n        const pageId = this.getPageId(appId, appEntrance, tabId);\r\n        EventUtil.clearObserver(appObkey);\r\n        EventUtil.clearEventPipe(pageId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.App);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        const formToken = obj.formToken;\r\n        FrmUtil.removeTab(objIndex);\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageId,\r\n            appType: AppType.App,\r\n            appId,\r\n            appEntrance,\r\n        };\r\n        self.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n\r\n        const options: AppOptions = {\r\n            tabId,\r\n            funcId: '',\r\n            appId,\r\n            appEntrance,\r\n            appType: AppType.App,\r\n            token: formToken\r\n        };\r\n        return this.quitApp(options, obj.su).pipe(\r\n            map(v => { })\r\n        );\r\n    }\r\n\r\n    private getInvokeAndEnterApp$(options: AppOptions): Observable<IframeLink> {\r\n        const newPageId = this.newPageId(options.appId, options.appEntrance, options.tabId);\r\n        options.tabId = newPageId;\r\n        return this.getAppInvok(options.appId).pipe(\r\n            switchMap(\r\n                value => {\r\n                    let invokEntry = value.appInvoks.find(invok => invok.appEntrance === options.appEntrance);\r\n                    if (!options.appEntrance && !invokEntry) {\r\n                        invokEntry = value.appInvoks.find(invok => !invok.appEntrance);\r\n                    }\r\n                    if (!invokEntry) {\r\n                        window.alert(`è¯·æ£æ¥å½ååºç¨(ID:${options.appId})éç½®çåºç¨å¥å£(appEntrance:${options.appEntrance})æ¯å¦å­å¨`);\r\n                        return;\r\n                    }\r\n                    let entityParam: any;\r\n                    try {\r\n                        entityParam = invokEntry.entityParams ? JSON.parse(invokEntry.entityParams) : null;\r\n                    } catch (e) {\r\n                        entityParam = null;\r\n                        console.log(e);\r\n                    }\r\n                    const su = this.getSu(value.url);\r\n\r\n                    return this.enterApp({\r\n                        tabId: newPageId,\r\n                        appId: options.appId,\r\n                        appEntrance: options.appEntrance,\r\n                        menuName: options.tabName || invokEntry.name,\r\n                        action: 'enterapp'\r\n                    }, su).pipe(\r\n                        map(\r\n                            token => {\r\n                                const routurl = value.url + (options.appEntrance ? `#/${options.appEntrance}` : '');\r\n                                const linkobj = new IframeLink(\r\n                                    value.code,\r\n                                    null,\r\n                                    this.buildQueryString(routurl, options.appId, options.appEntrance,\r\n                                        options.tabId, token, options.queryStringParams),\r\n                                );\r\n                                // idå å¥å£åºå,tabIdé¡µç­¾å¯ä¸æ è¯\r\n                                linkobj.id = newPageId;\r\n                                linkobj.appType = AppType.App;\r\n                                linkobj.appId = options.appId;\r\n                                linkobj.appEntrance = options.appEntrance;\r\n                                // æ¾ç¤ºappåå­åå¥å£åå­\r\n                                linkobj.FuncName = options.tabName || invokEntry.name;\r\n                                linkobj.url = value.url;\r\n                                linkobj.reload = options.isReload;\r\n                                linkobj.su = su;\r\n                                linkobj.formToken = token;\r\n                                if (entityParam) {\r\n                                    entityParam.forEach(\r\n                                        item => {\r\n                                            if (item.name === 'mode') {\r\n                                                linkobj.mode = item.value;\r\n                                                linkobj.src += (item.value ? `&appMode=${item.value}&` : '');\r\n                                            }\r\n                                        }\r\n                                    );\r\n                                }\r\n\r\n                                this.getFeb().post(newPageId, options.entityParams);\r\n                                return linkobj;\r\n                            }\r\n                        ),\r\n                        switchMap(\r\n                            formLink => {\r\n                                return this.i18nSetting.getSetting$().pipe(\r\n                                    map(\r\n                                        () => formLink\r\n                                    )\r\n                                )\r\n                            }\r\n                        )\r\n                    );\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    private getInvokConfig(appId: string) {\r\n        const url = `/api/runtime/sys/v1.0/gspapp/${appId}`;\r\n        return this.http.request('Get', url, FrmUtil.setHeader(null, {}));\r\n    }\r\n\r\n    /**\r\n     * è¿å¥åºç¨ï¼è§¦åç¸å³æå¡\r\n     */\r\n    private enterApp(enterParam: FuncStateParam, su: string): Observable<any> {\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body: enterParam })).pipe(\r\n            map((v: any) => {\r\n                return v.token || v.sessionId;\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * éåºåºç¨ï¼è§¦åç¸å³æå¡\r\n     */\r\n    private quitApp(options: AppOptions, su?: string): Observable<any> {\r\n        const body = {\r\n            tabId: options.tabId,\r\n            token: options.token,\r\n            appId: options.appId,\r\n            appEntrance: options.appEntrance,\r\n            action: 'quitapp'\r\n        };\r\n\r\n        const invokObs = this.getAppInvok(options.appId);\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        const funcState$ = this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body }));\r\n        // tslint:disable-next-line: deprecation\r\n        const $r = zip(invokObs, funcState$, (res1, res2) => ({ res1, res2 }));\r\n        return $r;\r\n    }\r\n\r\n    private getSu(url: string): string {\r\n        const uriArr = url.split('/');\r\n        return uriArr.length > 3 ? uriArr[3] : '';\r\n    }\r\n\r\n    private getInvokCache() {\r\n        const appInvokesCache = this.frmVariableService.getFrmVariableByKey(this.APPINVOKE_CAHCE_KEY);\r\n        return appInvokesCache as any[] || [];\r\n    }\r\n\r\n    private refreshInvokCache(invoks: any[], funcInvok: any) {\r\n        if (!funcInvok) {\r\n            return;\r\n        }\r\n        invoks.push(funcInvok);\r\n        this.frmVariableService.frameworkVariableReg(this.APPINVOKE_CAHCE_KEY, invoks);\r\n    }\r\n\r\n    // tslint:disable-next-line: max-line-length\r\n    private buildQueryString(routurl: string, appId: string, appEntrance: string, tabId: string, token: string, params: Map<string, string>): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?appId=${appId}&appEntrance=${appEntrance}`;\r\n        } else {\r\n            routurl += `&appId=${appId}&appEntrance=${appEntrance}`;\r\n        }\r\n\r\n        routurl += `&appType=${AppType.App}`;\r\n        routurl += `&tabId=${this.getPageId(appId, appEntrance, tabId)}`;\r\n        routurl += !token ? '' : `&cvft=${token}`;\r\n        if (params) {\r\n            params.forEach((value, key) => {\r\n                routurl += !key ? '' : `&${key}=${value}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n\r\n    private getFeb(): FrmEventBus {\r\n        return EventUtil.getFrmEvent();\r\n    }\r\n\r\n    private mergeAppId(appId: string, appEntrance): string {\r\n        return `${appId}_${appEntrance}`;\r\n    }\r\n\r\n    /**\r\n     * è·åå½åèåé¡µé¢çå¯ä¸æ è¯\r\n     */\r\n    private getPageId(appId: string, appEntrance: string, tabId: string): string {\r\n        return tabId || this.mergeAppId(appId, appEntrance);\r\n    }\r\n\r\n    /**\r\n     * çæé¡µé¢å¯ä¸æ è¯\r\n     */\r\n    private newPageId(appId: string, appEntrance: string, tabId: string): string {\r\n        return tabId ? `${this.mergeAppId(appId, appEntrance)}_${tabId}` : this.mergeAppId(appId, appEntrance);\r\n    }\r\n\r\n    private checkingRepeatOpen(options: AppOptions): IframeLink {\r\n        const appId = options.appId;\r\n        const appEntrance = options.appEntrance;\r\n        const tabId = options.tabId;\r\n        const entityParams = options.entityParams;\r\n\r\n        let linkobj: IframeLink;\r\n        const pageId = this.getPageId(appId, appEntrance, tabId);\r\n        linkobj = FrmUtil.getTabArray().find(i => i.id === pageId && i.appType === AppType.App);\r\n        if (linkobj) {\r\n            linkobj.FuncName = options.tabName || linkobj.FuncName;\r\n            linkobj.src = this.buildQueryString(linkobj.url, appId, appEntrance, options.tabId,\r\n                linkobj.sessionid, options.queryStringParams);\r\n            linkobj.reload = options.isReload;\r\n            this.getFeb().post(pageId, entityParams);\r\n            this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n        }\r\n        return linkobj;\r\n    }\r\n\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { OpenfuncOptions } from '../../models/function.model';\r\nimport { of, Observable } from 'rxjs';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { LoadingService } from '../loading/loading.service';\r\nimport { FuncsService } from '../funcsservice/funcs.service';\r\nimport { IframeLink } from '../../models/iframe.model';\r\nimport { map, switchMap, catchError } from 'rxjs/operators';\r\nimport { CacheService, HttpService, LanguageService, SessionService } from '@ecp-caf/caf-common';\r\nimport { EventUtil, FrmUtil, AppType, FuncEventArgs, AppOptions, FuncStateParam } from '../../shared/frm-util';\r\nimport { AppService } from '../appservice/app.service';\r\nimport { FrmI18nSettingService } from '../i18nService/i18n-setting.service';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\n@Injectable()\r\nexport class FrameworkService {\r\n\r\n    private FUNCSTATUS_PATH = '/api/runtime/sys/v1.0/function-states';\r\n    public BeforeFuncClose = EventUtil.BEFORE_FUNC_CLOSE;\r\n    public FuncClosed = EventUtil.FUNC_CLOSED;\r\n    public FuncSwitch = EventUtil.FUNC_SWITCH;\r\n\r\n    constructor(\r\n        private http: HttpService,\r\n        private router: Router,\r\n        private cache: CacheService,\r\n        private sessionSvc: SessionService,\r\n        private feb: FrmEventBus,\r\n        private funcService: FuncsService,\r\n        private loadService: LoadingService,\r\n        @Optional() private appService: AppService,\r\n        @Optional() private i18nSetting: FrmI18nSettingService\r\n    ) {\r\n        if (!this.i18nSetting) {\r\n            const variables = new FrameworkVariableService();\r\n            const language = new LanguageService(null);\r\n            this.i18nSetting = new FrmI18nSettingService(variables, language, http);\r\n        }\r\n        if (!this.appService) {\r\n            this.appService = new AppService(this.http, this.sessionSvc, this.i18nSetting);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®funcidæå¼åè½èå\r\n     * (éç¨äºåé¡µç­¾è·¯ç±ï¼ä¸æ¯æNG7åçº§åèåä¹é´è·³è½¬)\r\n     */\r\n    openFunc(funcid: string, routepath: string, parentsessionid: string, newsession: boolean = true, simpleparam: string = ''): any {\r\n\r\n        const appOps: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId: funcid,\r\n            appId: '',\r\n            appEntrance: ''\r\n        };\r\n\r\n        this.internalOpen(appOps);\r\n        return of(true);\r\n        // return this.internalOpen$(appOps);\r\n    }\r\n\r\n    /**\r\n     * ç´æ¥æå¼åè½\r\n     */\r\n    public openMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                if (!options.appId) {\r\n                    window.alert('åæ°appIdä¸è½ä¸ºç©ºï¼');\r\n                    return;\r\n                }\r\n                this.appService.openAppByOptions(options);\r\n                break;\r\n            case AppType.Menu:\r\n                this.internalOpen(options);\r\n                break;\r\n            case AppType.Other: break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éè¿æµæ¹å¼æå¼åè½\r\n     */\r\n    public openMenu$(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                if (!options.appId) {\r\n                    window.alert('åæ°appIdä¸è½ä¸ºç©ºï¼');\r\n                    return;\r\n                }\r\n                return this.appService.openAppByOptions$(options);\r\n            case AppType.Menu:\r\n                if (options.onlyGetIframeLink === true) {\r\n                    return this.internalOpenByIframeLink$(options);\r\n                }\r\n                return this.internalOpen$(options);\r\n            case AppType.Other: break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æå¼èæ¥èå\r\n     */\r\n    openConnectedFunc(funcId: string, options: OpenfuncOptions) {\r\n        const appOps: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            entityParams: options.EntityParam,\r\n        };\r\n\r\n        this.internalOpen(appOps);\r\n    }\r\n\r\n    /**\r\n     * æå¼èæ¥èåï¼å¹¶ä¼ å\r\n     */\r\n    public openFuncWithParam(funcId: string, params: Map<string, string>, reload?: boolean) {\r\n        const options: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            entityParams: params,\r\n            queryStringParams: params,\r\n            isReload: reload\r\n        };\r\n        this.internalOpen(options);\r\n    }\r\n\r\n    /**\r\n     * æå¼åè½ï¼ä¸è¿åæµ\r\n     */\r\n    private internalOpen(options: AppOptions) {\r\n        this.checkingBeforeOpen$(options)\r\n            .subscribe(\r\n                res => {\r\n                    if (!res || !res.func || res.linkobj) {\r\n                        return;\r\n                    }\r\n                    const func = res.func;\r\n                    this.getInvokeAndEnterFunc$(options, func).subscribe(\r\n                        (lobj: IframeLink) => this.getFeb().post(EventUtil.FARRIS_APP_CLICK, lobj),\r\n                        err => {\r\n                            const info = {\r\n                                isErr: true,\r\n                                errInfo: err\r\n                            };\r\n                            this.getFeb().post(EventUtil.FARRIS_APP_CLICK, info);\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éè¿ä¸²æµæ§å¶ï¼æå¼èå\r\n     */\r\n    private internalOpen$(options: AppOptions): Observable<any> {\r\n        return this.checkingBeforeOpen$(options)\r\n            .pipe(\r\n                switchMap(\r\n                    res => {\r\n                        if (!res || !res.func || res.linkobj) {\r\n                            return of(null);\r\n                        }\r\n                        const func = res.func;\r\n                        return this.getInvokeAndEnterFunc$(options, func).pipe(\r\n                            map(\r\n                                (lobj: IframeLink) => {\r\n                                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, lobj);\r\n                                    return true;\r\n                                }\r\n                            )\r\n                        );\r\n                    }\r\n                )\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éè¿ä¸²æµè·åè¢«æå¼èåçiframeLinkå¯¹è±¡ä¿¡æ¯\r\n     */\r\n    private internalOpenByIframeLink$(options: AppOptions): Observable<IframeLink> {\r\n\r\n        if (!options.funcId) {\r\n            window.alert('åæ°funcIdä¸è½ä¸ºç©ºï¼');\r\n            return of(null);\r\n        }\r\n\r\n        return this.getFuncEntity(options.funcId).pipe(\r\n            switchMap(\r\n                func => {\r\n                    if (!func) {\r\n                        window.alert(`è¯·ç¡®è®¤æ¨æ¯å¦å·å¤æå¼èå(ID:${options.funcId})çæé`);\r\n                        return null;\r\n                    }\r\n                    return this.getInvokeAndEnterFunc$(options, func);\r\n                }\r\n            ));\r\n    }\r\n\r\n    private getInvokeAndEnterFunc$(options: AppOptions, func: any): Observable<IframeLink> {\r\n        const newPageId = this.newPageId(options.funcId, options.tabId);\r\n        options.tabId = newPageId;\r\n        let linkobj: IframeLink;\r\n        return this.getFuncInvok(options.funcId).pipe(\r\n            switchMap(\r\n                funcInvok => {\r\n\r\n                    const routurl = funcInvok.invokingConfig.url;\r\n                    const paramInfo = funcInvok.invokingConfig.staticParams;\r\n                    const entityParamInfo = funcInvok.invokingConfig.entityParams;\r\n                    const staticParam = paramInfo ? JSON.parse(paramInfo) : '';\r\n                    const entityParam = entityParamInfo ? JSON.parse(entityParamInfo) : '';\r\n\r\n                    const su = this.getSu(routurl);\r\n                    return this.enterFunc({\r\n                        tabId: newPageId,\r\n                        funcId: options.funcId,\r\n                        menuName: options.tabName || func.name,\r\n                        action: 'enter'\r\n                    }, su).pipe(\r\n                        map(\r\n                            formToken => {\r\n                                linkobj = new IframeLink(\r\n                                    func.code,\r\n                                    null,\r\n                                    this.buildQueryStringByMap(routurl, options.funcId, options.tabId,\r\n                                        formToken, options.queryStringParams),\r\n                                );\r\n                                linkobj.id = newPageId; // é¡µé¢å¯ä¸æ è¯ åè®¸é¡µé¢éå¤æå¼\r\n                                linkobj.appType = AppType.Menu;\r\n                                linkobj.funcId = options.funcId;\r\n                                linkobj.FuncName = options.tabName || func.name;\r\n                                linkobj.url = funcInvok.invokingConfig.url;\r\n                                linkobj.reload = options.isReload;\r\n                                linkobj.su = su;\r\n                                linkobj.isNewTab = options.isNewTab;\r\n                                linkobj.formToken = formToken;\r\n\r\n                                if (staticParam) {\r\n                                    // dkyç¹æ®åºæ¯ï¼æå¼jqueryåçåè½\r\n                                    staticParam.forEach(\r\n                                        item => {\r\n                                            if (item.name === 'jquery') {\r\n                                                linkobj.isjquery = true;\r\n                                            }\r\n                                            if (item.name === 'mode') {\r\n                                                linkobj.mode = item.value;\r\n                                                linkobj.src += (item.value ? `&appMode=${item.value}&` : '');\r\n                                            }\r\n                                        }\r\n                                    );\r\n                                }\r\n                                // å¤§å¯¹è±¡å®ä½ä¼ åï¼éå¯¹è¢«æå¼é¡µé¢å»ºç«å¯ä¸ç®¡é\r\n                                this.getFeb().post(newPageId, options.entityParams);\r\n                                // this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n                                return linkobj;\r\n                            }\r\n                        ),\r\n                        switchMap(\r\n                            formLink => {\r\n                                return this.i18nSetting.getSetting$().pipe(\r\n                                    map(\r\n                                        () => formLink\r\n                                    )\r\n                                )\r\n                            }\r\n                        )\r\n                    );\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n\r\n    /**\r\n     * æµæ¹å¼æ£æ¥èåæå¼ç¶æ\r\n     */\r\n    private checkingBeforeOpen$(options: AppOptions): Observable<any> {\r\n        if (!options.funcId) {\r\n            window.alert('åæ°funcIdä¸è½ä¸ºç©ºï¼');\r\n            return of(null);\r\n        }\r\n\r\n        return this.getFuncEntity(options.funcId).pipe(map(\r\n            func => {\r\n                if (!func) {\r\n                    window.alert(`è¯·ç¡®è®¤æ¨æ¯å¦å·å¤æå¼èå(ID:${options.funcId})çæé`);\r\n                    return null;\r\n                }\r\n\r\n                const funcId = options.funcId;\r\n                const tabId = options.tabId;\r\n                const pageId = this.getPageId(funcId, tabId);\r\n                const linkobj = FrmUtil.getTabArray().find(i => i.id === pageId && i.appType === AppType.Menu);\r\n\r\n                if (linkobj) {\r\n                    linkobj.FuncName = options.tabName || linkobj.FuncName;\r\n                    linkobj.src = this.buildQueryStringByMap(linkobj.url, funcId, options.tabId, '', options.queryStringParams);\r\n                    linkobj.reload = options.isReload; // çé¢å·æ°ä¸æ¹session\r\n                    this.getFeb().post(pageId, options.entityParams);\r\n                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n                }\r\n                return { func, linkobj };\r\n            }\r\n        ));\r\n    }\r\n\r\n    /**\r\n     * å³é­å\r\n     */\r\n    beforeCloseMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                this.appService.beforeCloseAppByOptions(options);\r\n                break;\r\n            case AppType.Menu:\r\n                this.beforeCloseFuncByOptions(options);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private beforeCloseFuncByOptions(options: AppOptions) {\r\n        const func = this.funcService.getCachedFunc(options.funcId);\r\n        const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n        const pageId = this.getPageId(options.funcId, options.tabId);\r\n\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(funcObkey);\r\n        if (!obs) {\r\n            this.closeFuncByOptions(options);\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageId,\r\n            appType: AppType.Menu,\r\n            funcId: options.funcId,\r\n            tabName: func && func.Name,\r\n            beforeCloseHandle: options.beforeCloseHandle\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * èåå³é­åäºä»¶è§¦å(æ  token)\r\n     */\r\n    beforeCloseFunc(funcId: string, tabId?: string) {\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        const funcObkey = EventUtil.funcObsToken(funcId, tabId);\r\n\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(funcObkey);\r\n        if (!obs) {\r\n            this.closeFunc(funcId, tabId);\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: this.getPageId(funcId, tabId),\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            tabName: func && func.Name\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * ç´æ¥å³é­\r\n     *\r\n     */\r\n    closeMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                this.appService.closeAppByOptions(options).subscribe();\r\n                break;\r\n            case AppType.Menu:\r\n                this.closeFuncByOptions(options);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private closeFuncByOptions(options: AppOptions) {\r\n        const pageId = this.getPageId(options.funcId, options.tabId);\r\n        EventUtil.clearObserver(EventUtil.funcObsToken(options.funcId, options.tabId));\r\n        EventUtil.clearEventPipe(pageId); // å½åé¡µé¢å¤§å¯¹è±¡ä¼ åä¼æå¯ä¸çç®¡é\r\n        const func = this.funcService.getCachedFunc(options.funcId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.Menu);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        options.token = options.token || obj.formToken;\r\n        let su = options.su;\r\n        if (obj) {\r\n            su = obj.su;\r\n            FrmUtil.removeTab(objIndex);\r\n            const eventArgs: FuncEventArgs = {\r\n                tabId: pageId,\r\n                appType: AppType.Menu,\r\n                funcId: options.funcId,\r\n                tabName: func && func.name\r\n            };\r\n            this.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        }\r\n        this.quitFunc(options, su)\r\n            .subscribe(() => { });\r\n    }\r\n\r\n    /**\r\n     * å³é­èåtabé¡µç­¾ï¼tabIdå¯ä»¥æå®ï¼é»è®¤ä¸ºfuncId\r\n     */\r\n    closeFunc(funcId: string, tabId?: string): any {\r\n        const self = this;\r\n        const pageId = this.getPageId(funcId, tabId);\r\n        EventUtil.clearObserver(EventUtil.funcObsToken(funcId, tabId));\r\n        EventUtil.clearEventPipe(pageId); // å½åé¡µé¢å¤§å¯¹è±¡ä¼ åä¼æå¯ä¸çç®¡é\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.Menu);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        const formToken = obj.formToken;\r\n        if (obj) {\r\n            FrmUtil.removeTab(objIndex);\r\n            const eventArgs: FuncEventArgs = {\r\n                tabId: pageId,\r\n                appType: AppType.Menu,\r\n                funcId,\r\n                tabName: func && func.name\r\n            };\r\n            self.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        }\r\n\r\n        const options: AppOptions = {\r\n            tabId,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            appType: AppType.Menu,\r\n            token: formToken,\r\n        };\r\n        this.quitFunc(options, obj.su)\r\n            .subscribe(() => { }\r\n            );\r\n        return of(true);\r\n    }\r\n\r\n\r\n    /**\r\n     * è·åèåçè°ç¨ä¿¡æ¯\r\n     */\r\n    getFuncInvok(funcId: string): Observable<any> {\r\n        const invoks = this.getInvokCache();\r\n        const funcInvok = invoks.find(f => f.id === funcId);\r\n        if (!funcInvok) {\r\n            return this.getInvokConfig(funcId).pipe(\r\n                map(v => {\r\n                    if (!v) {\r\n                        return null;\r\n                    }\r\n                    invoks.push(v);\r\n                    this.funcService.cacheAllFuncInvoks(invoks);\r\n                    return v;\r\n                })\r\n            );\r\n        }\r\n        return of(funcInvok);\r\n    }\r\n\r\n    /**\r\n     * è·åèåå®ä½\r\n     */\r\n    getFuncEntity(funcId: string): Observable<any> {\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        if (!func) {\r\n            const url = `/api/runtime/sys/v1.0/functions/${funcId}`;\r\n            return this.http.request('Get', url, FrmUtil.setHeader(null, {}))\r\n                .pipe(\r\n                    map(v => {\r\n                        if (!v || !v[0]) {\r\n                            return null;\r\n                        }\r\n                        const allFuncs = this.funcService.getAllCachedFuncs() as any[];\r\n                        allFuncs.push(v[0]);\r\n                        this.funcService.cacheAllFuncs(allFuncs);\r\n                        return v[0];\r\n                    })\r\n                );\r\n        }\r\n        return of(func);\r\n    }\r\n\r\n    /**\r\n     * è·åèåé¢ç½®åæ°\r\n     */\r\n    getPresetParams(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(funcInvok => {\r\n                const paramInfo = funcInvok.invokingConfig.staticParams;\r\n                const entityParamInfo = funcInvok.invokingConfig.entityParams;\r\n                const staticParam = paramInfo ? JSON.parse(paramInfo) : [];\r\n                const entityParam = entityParamInfo ? JSON.parse(entityParamInfo) : [];\r\n                return this.mergeParams(staticParam, entityParam);\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åèåçéæåæ°\r\n     */\r\n    getStaticParam(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(v => {\r\n                if (v.invokingConfig.staticParams) {\r\n                    return JSON.parse(v.invokingConfig.staticParams);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åè¡¨åçå®ä½åæ°\r\n     */\r\n    getEntityParam(tabId: string, handler: (value: any) => void, isSubonce: boolean = true): any {\r\n        if (isSubonce) {\r\n            this.getFeb().once(tabId, handler);\r\n        }\r\n        this.getFeb().on(tabId, handler);\r\n    }\r\n\r\n    entityParamUnsub(funcId: string) {\r\n        this.getFeb().unSubscribe(funcId);\r\n    }\r\n\r\n    /**\r\n     * è·åæèåçå®ä½åæ°ç»æ\r\n     */\r\n    getEntityParamStructure(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(v => {\r\n                if (v.invokingConfig.entityParams) {\r\n                    return JSON.parse(v.invokingConfig.entityParams);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private mergeParams(staticParam: any[], entityParam: any[]): Map<any, any> {\r\n        const paraMap = new Map<any, any>();\r\n        if (entityParam) {\r\n            entityParam.forEach((item: any) => {\r\n                paraMap.set(item.name, item.value);\r\n            });\r\n        }\r\n        if (staticParam) {\r\n            // funcä¸å¯¹appåæ°å¤ç¨\r\n            staticParam.forEach((item: any) => {\r\n                paraMap.set(item.name, item.value);\r\n            });\r\n        }\r\n        return paraMap;\r\n    }\r\n\r\n\r\n    private getInvokConfig(funcId: string) {\r\n        const url = `/api/runtime/sys/v1.0/functions/funcInvok/${funcId}`;\r\n        return this.http.request('Get', url, FrmUtil.setHeader(null, {}));\r\n    }\r\n\r\n\r\n    private getInvokCache() {\r\n        return this.funcService.getAllCachedFuncInvoks();\r\n    }\r\n\r\n    /**\r\n     * è·åæ¡æ¶eventbus\r\n     */\r\n    private getFeb(): FrmEventBus {\r\n        return EventUtil.getFrmEvent();\r\n    }\r\n\r\n    /**\r\n     * æé åè½åsession\r\n     * (1912 funcSessionç§»é¤åï¼æ¥å£ä¸åæä¾)\r\n     */\r\n    public buildFuncSession(funcId: string, su?: string): Observable<any> {\r\n        const self = this;\r\n        const userSession = this.sessionSvc.getUserSessionId();\r\n        const body = {\r\n            token: userSession,\r\n            funcId,\r\n            action: 'enter'\r\n        };\r\n\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(userSession, { body })).pipe(\r\n            map((v: any) => {\r\n                const ss: string = v.sessionId;\r\n                if (ss !== undefined && ss !== null && ss.length > 0) {\r\n                    self.sessionSvc.setFuncSessionId(funcId, ss);\r\n                }\r\n                return ss;\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è¿å¥åè½ï¼è§¦åæå¡ç«¯é»è¾\r\n     * ç§»é¤funcSession\r\n     * è¿åå¬å±åétoken\r\n     */\r\n    private enterFunc(enterParam: FuncStateParam, su: string): Observable<any> {\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body: enterParam }))\r\n            .pipe(\r\n                map((v: any) => {\r\n                    return v.token || v.sessionId;\r\n                })\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éåºåè½ï¼å¦æå­å¨bizContextï¼åç§»é¤\r\n     */\r\n    private quitFunc(options: AppOptions, su: string): Observable<any> {\r\n        const body = {\r\n            token: options.token,\r\n            tabId: options.tabId,\r\n            funcId: options.funcId,\r\n            action: 'quit'\r\n        };\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body }));\r\n    }\r\n\r\n    /**\r\n     * è·åå½ååºç¨æå±su\r\n     */\r\n    private getSu(url: string): string {\r\n        const uriArr = url.split('/');\r\n        return uriArr.length > 3 ? uriArr[3] : '';\r\n    }\r\n\r\n    /**\r\n     * iframe urlæ¼æ¥ querystring åæ°\r\n     */\r\n    private buildQueryString(routurl: string, funcId: string, params): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?funcId=${funcId}`;\r\n        } else {\r\n            routurl += `&funcId=${funcId}`;\r\n        }\r\n        if (params) {\r\n            Object.keys(params).forEach((propName: string, index) => {\r\n                routurl += `${index === 0 ? '' : '&'}${propName}=${params[propName]}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n    /**\r\n     * url æ¼æ¥mapæ ¼å¼çåæ°\r\n     */\r\n    private buildQueryStringByMap(routurl: string, funcId: string, tabId: string, token: string, params: Map<string, string>): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?funcId=${funcId}`;\r\n        } else {\r\n            routurl += `&funcId=${funcId}`;\r\n        }\r\n\r\n        routurl += `&appType=${AppType.Menu}`;\r\n        routurl += `&tabId=${this.getPageId(funcId, tabId)}`;\r\n        routurl += !token ? '' : `&cvft=${token}`;\r\n        if (params) {\r\n            params.forEach((value, key) => {\r\n                routurl += !key ? '' : `&${key}=${value}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n    /**\r\n     * è·åå½åèåé¡µé¢çå¯ä¸æ è¯\r\n     */\r\n    private getPageId(funcId: string, tabId: string): string {\r\n        return tabId || funcId;\r\n    }\r\n\r\n    /**\r\n     * é¡µé¢ç¬¬ä¸æ¬¡è¢«æå¼æ¶ï¼çæå¯ä¸æ è¯\r\n     */\r\n    private newPageId(funcId: string, tabId: string): string {\r\n        return tabId ? `${funcId}_${tabId}` : funcId;\r\n    }\r\n\r\n    public eventFire(token: string, args: any) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(token, args);\r\n    }\r\n\r\n    public eventListner(token: string, handler: (value: any) => void, options?: AppOptions) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        // èåçå¬èå¿é¡»è¦å£°æèªå·±çèº«ä»½ï¼æ¹ä¾¿æ¡æ¶ç®¡ç\r\n        if (options && options.appType) {\r\n            switch (options.appType.toLowerCase()) {\r\n                case AppType.App:\r\n                    const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n                    feb.onWithObkey(token, appObkey, handler);\r\n                    return;\r\n                case AppType.Menu:\r\n                    const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n                    feb.onWithObkey(token, funcObkey, handler);\r\n                    return;\r\n                default: break;\r\n            }\r\n        }\r\n        feb.on(token, handler);\r\n    }\r\n\r\n    /** åå»ºçå¬è®¢é, ç»´æ¤ä¸ä¸ªçå¬èåè¡¨ï¼éå¯¹èåè§¦åäºä»¶ */\r\n    public eventListner4Func(token: string, funcId: string, handler: (value: any) => void) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        feb.onWithObkey(token, funcId, handler);\r\n    }\r\n\r\n    /** åå»ºçå¬è®¢é, ç»´æ¤ä¸ä¸ªçå¬èåè¡¨ï¼éå¯¹åºç¨è§¦åäºä»¶ */\r\n    public eventListner4App(token: string, appId: string, appEntrance: string, handler: (value: any) => void) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance);\r\n        feb.onWithObkey(token, appObkey, handler);\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EventUtil, AppType, AppOptions } from '../../shared/frm-util';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@Injectable()\r\nexport class FrameworkEventService {\r\n\r\n    public FarrisApps = EventUtil.FARRIS_APPS;\r\n    public FarrisAppClick = EventUtil.FARRIS_APP_CLICK;\r\n    public AllGspFuncs = EventUtil.ALL_GSP_FUNCS;\r\n    public BeforeFuncClose = EventUtil.BEFORE_FUNC_CLOSE;\r\n    public FuncClosed = EventUtil.FUNC_CLOSED;\r\n    public FuncSwitch = EventUtil.FUNC_SWITCH;\r\n    public AfterFrameLoad = EventUtil.AFTER_FRAME_LOAD;\r\n\r\n    constructor(private feb: FrmEventBus) {\r\n        const eventBusEntity = EventUtil.getFrmEvent();\r\n        if (!eventBusEntity) {\r\n            EventUtil.setFrmEvent(this.feb || new FrmEventBus());\r\n            this.eventInitial();\r\n        }\r\n    }\r\n\r\n\r\n    public eventFire(token: string, args: any) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(token, args);\r\n    }\r\n\r\n    public eventListner(token: string, handler: (value: any) => void, options?: AppOptions) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        // èåçå¬èå¿é¡»è¦å£°æèªå·±çèº«ä»½ï¼æ¹ä¾¿æ¡æ¶ç®¡ç\r\n        if (options && options.appType) {\r\n            switch (options.appType.toLowerCase()) {\r\n                case AppType.App:\r\n                    const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n                    feb.onWithObkey(token, appObkey, handler);\r\n                    return;\r\n                case AppType.Menu:\r\n                    const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n                    feb.onWithObkey(token, funcObkey, handler);\r\n                    return;\r\n                default: break;\r\n            }\r\n        }\r\n        feb.on(token, handler);\r\n    }\r\n\r\n    private eventInitial() {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(this.FarrisApps, null);\r\n        feb.post(this.FarrisAppClick, null);\r\n        feb.post(this.AllGspFuncs, null);\r\n        feb.initialPipe(this.FuncClosed, new Subject<any>());\r\n        feb.initialPipe(this.FuncSwitch, new Subject<any>());\r\n        feb.initialPipe(this.BeforeFuncClose, new Subject<any>());\r\n        feb.initialPipe(this.AfterFrameLoad, new Subject<any>());\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\nimport { EventBusPipe } from '../../eventbus/frm-eventpipe';\r\nimport { Subject } from 'rxjs';\r\nimport { FrmSubjectOptions } from '../../shared/frm-util';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class BroadcastingStationService {\r\n\r\n    private subjectMaps: Map<string, EventBusPipe>;\r\n    private frmVariableService: FrameworkVariableService;\r\n    private frmSubject = 'frmBroadcast-subjects';\r\n\r\n    constructor() {\r\n        this.frmVariableService = new FrameworkVariableService();\r\n        this.subjectMaps = this.frmVariableService.getFrmVariableByKey(this.frmSubject) || new Map<string, EventBusPipe>();\r\n    }\r\n\r\n    /**\r\n     * æ³¨åä¸»é¢ï¼å¹¶è·åå½åä¸»é¢å¯ä¸æ è¯token\r\n     * @param subjectCode ä¸»é¢ç¼ç ï¼å»ºè®®ææç¡®å«ä¹ï¼æ¹ä¾¿ç¡®è®¤å½åä¸»é¢çèè´£\r\n     * codeä¸æ¯å¯ä¸æ è¯ï¼å³ä½¿ç¸åcodeæ¯æ¬¡æ³¨åé½ä¼çæä¸ä¸ªæ°çä¸»é¢ï¼è¿åå¼tokenæ¯å¯ä¸æ è¯\r\n     * @param options ä¸»é¢æ³¨åæä½ï¼å¯ä»¥ç´æ¥å¯¹äºèå æ åºç¨æ³¨åä¸»é¢\r\n     * @param customSub èªå®ä¹ä¸»é¢ï¼å¦æä¸ºnullæèä¸ä¼ ï¼é»è®¤ä¸ºSubject\r\n     */\r\n    public subjectRegister(subjectCode: string, options: FrmSubjectOptions, customSub?: Subject<any>): string {\r\n        if (!customSub) {\r\n            customSub = new Subject<any>();\r\n        }\r\n        let token: string;\r\n        if (options && options.funcId) {\r\n            token = options.funcId;\r\n        } else if (options && options.appId && options.appEntrance) {\r\n            token = `${options.appId}-${options.appEntrance}`;\r\n        } else {\r\n            token = this.createToken();\r\n        }\r\n        const pipe = new EventBusPipe(token, null, customSub);\r\n        pipe.pipeCode = subjectCode;\r\n        this.subjectMaps.set(token, pipe);\r\n        this.frmVariableService.frameworkVariableReg(this.frmSubject, this.subjectMaps);\r\n        return token;\r\n    }\r\n\r\n    /**\r\n     * æ³¨åä¸»é¢ï¼å¯ç´æ¥è·åä¸»é¢å®ä½ï¼\r\n     * æ¡æ¶ä¸æç®¡ç»´æ¤ï¼å¸¸ç¨äºééå±ä¸äºä»¶æ©å±æºå¶\r\n     * @param options æ³¨ååæ°\r\n     * @param customSub æ¯å¦èªå®ä¹ä¸»é¢\r\n     */\r\n    public customSubjectRegister(options: FrmSubjectOptions, customSub?: Subject<any>): Map<string, EventBusPipe> {\r\n        const subMap = new Map<string, EventBusPipe>();\r\n        if (!customSub) {\r\n            customSub = new Subject<any>();\r\n        }\r\n        let token: string;\r\n        if (options && options.customToken) {\r\n            token = options.customToken;\r\n        } else if (options && options.funcId) {\r\n            token = options.funcId;\r\n        } else if (options && options.appId && options.appEntrance) {\r\n            token = `${options.appId}-${options.appEntrance}`;\r\n        } else {\r\n            token = this.createToken();\r\n        }\r\n        const pipe = new EventBusPipe(token, null, customSub);\r\n        subMap.set(token, pipe);\r\n        return subMap;\r\n    }\r\n\r\n    /**\r\n     * å é¤ä¸»é¢\r\n     * @param subjectToken ä¸»é¢å¯ä¸æ è¯\r\n     */\r\n    public subjectRemove(subjectToken: string) {\r\n        this.subjectMaps.delete(subjectToken);\r\n        this.frmVariableService.frameworkVariableReg(this.frmSubject, this.subjectMaps);\r\n    }\r\n\r\n    /**\r\n     * éè¿æä¸ªä¸»é¢åéæ¶æ¯\r\n     * @param subjectToken ä¸»é¢å¯ä¸çtokenæ è¯\r\n     * @param info è¦åéçæ¶æ¯\r\n     */\r\n    public notify(subjectToken: string, info: any) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.post(info);\r\n    }\r\n\r\n    /**\r\n     * ä¸ºä¸»é¢æ·»å è§å¯èï¼å¹¶çå¬ä¸»é¢æ¶æ¯\r\n     * @param subjectToken ä¸»é¢token\r\n     * @param observerToken å½åçå¬ä¸»é¢çè§å¯èå¯ä¸æ è¯token\r\n     * @param handler è§å¯èçå¬å°ä¸»é¢æ¶æ¯æ¶è¦æ§è¡çå¨ä½\r\n     */\r\n    public response(subjectToken: string, observerToken: string, handler: (value: any) => void) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.subscribeWithObkey(observerToken, handler);\r\n    }\r\n\r\n    /**\r\n     * è§å¯èåæ¶å¯¹ä¸»é¢çè®¢é\r\n     * @param subjectToken ä¸»é¢å¯ä¸æ è¯\r\n     * @param observerToken è§å¯èå¯ä¸æ è¯\r\n     */\r\n    public responseUnSubscribe(subjectToken: string, observerToken: string) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.unSubscribeWithObkey(observerToken);\r\n    }\r\n\r\n    private getSubject(subjectToken: string): EventBusPipe {\r\n        return this.subjectMaps.get(subjectToken);\r\n    }\r\n\r\n    /**\r\n     * åå»ºå¯ä¸token\r\n     */\r\n    private createToken() {\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        const S4 = function () {\r\n            // tslint:disable-next-line:no-bitwise\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        };\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot,\r\n         ActivatedRouteSnapshot , ParamMap} from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\nimport { FrmEventBus } from '../eventbus/frm-evenbus';\r\n\r\n\r\n@Injectable()\r\nexport class FunctionResolver implements Resolve<any> {\r\n\r\n  constructor( private router: Router, private feb: FrmEventBus) {}\r\n\r\n  editvalue: any;\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any> {\r\n    const id = route.paramMap.get('funcid');\r\n    this.editvalue = null;\r\n    this.feb.on('frmopenfunc', (value: any) => {\r\n          this.editvalue = value;\r\n    });\r\n    return of(this.editvalue);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { LoadingComponent } from './loading.component';\r\nimport { LoadingService } from './loading.service';\r\nimport { LoadingConfig, LOADING_DEFAULT_CONFIG, loaddingDefaultConfig } from './loading.config';\r\n\r\n// export function loadingFactory(app: ApplicationRef, cfr: ComponentFactoryResolver, injector: Injector) {\r\n//     return new LoadingService(app, cfr, injector);\r\n// }\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        LoadingComponent\r\n    ],\r\n    entryComponents: [\r\n        LoadingComponent\r\n    ]\r\n})\r\nexport class LoadingModule {\r\n    static forRoot(config?: LoadingConfig): ModuleWithProviders {\r\n        // const _config = config ? Object.assign({}, loaddingDefaultConfig, config) : loaddingDefaultConfig;\r\n\r\n        return {\r\n            ngModule: LoadingModule,\r\n            providers: [\r\n                { provide: LOADING_DEFAULT_CONFIG, useValue: config || loaddingDefaultConfig},\r\n                LoadingService\r\n                // { provide: LoadingService, useFactory: loadingFactory, deps: [ApplicationRef, ComponentFactoryResolver, Injector] }\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["NgModule","CommonModule","RouterModule","WindowVariableService","Injectable","Optional","BehaviorSubject","Subscription","Subject","tslib_1.__values","EventEmitter","Component","Renderer2","ElementRef","ViewChild","Output","InjectionToken","ApplicationRef","ComponentFactoryResolver","Injector","of","map","switchMap","catchError","LanguageService","HttpService","zip","SessionService","router","Router","CacheService"],"mappings":"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"}
