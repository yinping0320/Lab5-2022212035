{"version":3,"file":"gsp-sys-rtf-common.js.map","sources":["ng://@gsp-sys/rtf-common/lib/common-shared.module.ts","ng://@gsp-sys/rtf-common/lib/services/frmVariableService/framework-variable.service.ts","ng://@gsp-sys/rtf-common/lib/services/funcsservice/funcs.service.ts","ng://@gsp-sys/rtf-common/lib/eventbus/frm-eventpipe.ts","ng://@gsp-sys/rtf-common/lib/eventbus/frm-evenbus.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.component.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.config.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.service.ts","ng://@gsp-sys/rtf-common/lib/models/iframe.model.ts","ng://@gsp-sys/rtf-common/lib/shared/frm-util.ts","ng://@gsp-sys/rtf-common/lib/services/i18nService/i18n-setting.service.ts","ng://@gsp-sys/rtf-common/lib/services/appservice/app.service.ts","ng://@gsp-sys/rtf-common/lib/services/frmservice/frameworkservice.ts","ng://@gsp-sys/rtf-common/lib/services/frmEventService/framework-event.service.ts","ng://@gsp-sys/rtf-common/lib/services/communication/broadcasting-station.service.ts","ng://@gsp-sys/rtf-common/lib/resolve/function-resolver.ts","ng://@gsp-sys/rtf-common/lib/services/loading/loading.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n  ],\r\n  declarations: [\r\n  ],\r\n  exports: [],\r\n  providers: [],\r\n  entryComponents: []\r\n})\r\nexport class CommonSharedModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { WindowVariableService } from '@ecp-caf/caf-common';\r\n\r\n@Injectable()\r\nexport class FrameworkVariableService {\r\n\r\n    private frameworkVariable = 'frameworkVariable';\r\n    private nameSpace = 'variables';\r\n    private frmVariableName = 'rtfFrmVariable';\r\n    private windowService: WindowVariableService;\r\n\r\n    constructor() {\r\n        this.windowService = new WindowVariableService();\r\n        this.frmVariableInitial();\r\n    }\r\n\r\n    public getFrameworkVariable(): any {\r\n        return this.windowService.getTopWindow()[this.frameworkVariable];\r\n    }\r\n\r\n    /**\r\n     * å¨æ¡æ¶é¡¶çº§windowæ³¨ååé\r\n     */\r\n    public frameworkVariableReg(key: string, value: any) {\r\n        const frmVariable = this.getFrameworkVariable();\r\n        if (frmVariable && frmVariable.name && frmVariable.name === this.frmVariableName) {\r\n            frmVariable[this.nameSpace] = frmVariable[this.nameSpace] || {};\r\n            frmVariable[this.nameSpace][key] = value;\r\n            return;\r\n        }\r\n        this.frmVariableInitial();\r\n        this.getFrameworkVariable()[this.nameSpace][key] = value;\r\n    }\r\n\r\n    public getFrmVariableByKey(key: string): any {\r\n        const frmVariable = this.getFrameworkVariable();\r\n        if (frmVariable && frmVariable[this.nameSpace] && frmVariable[this.nameSpace][key]) {\r\n            return frmVariable[this.nameSpace][key];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * å¨æ¡æ¶çé¡¶çº§windowä¸\r\n     * å®ä¹ä¸ä¸ªå¬å±åéã\r\n     * ç¨äºå­æ¾èåãåºç¨ç¼å­æ°æ®ï¼eventbusé½å¬å±å¯¹è±¡\r\n     * å¯¹ééå±æä¾æå¡\r\n     */\r\n    private frmVariableInitial() {\r\n        const topWin = this.windowService.getTopWindow();\r\n        const name = 'name';\r\n        topWin[this.frameworkVariable] = topWin[this.frameworkVariable] || {};\r\n        topWin[this.frameworkVariable][name] = this.frmVariableName;\r\n        topWin[this.frameworkVariable][this.nameSpace] = topWin[this.frameworkVariable][this.nameSpace] || {};\r\n    }\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\n@Injectable()\r\nexport class FuncsService {\r\n\r\n    private allgspfuncs = 'allgspfuncs';\r\n    private allfuncinvoks = 'allfuncinvoks';\r\n\r\n    constructor(@Optional() private frmVariableService: FrameworkVariableService) {\r\n        if (!this.frmVariableService) {\r\n            this.frmVariableService = new FrameworkVariableService();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ç¼å­ææåè½\r\n     */\r\n    public cacheAllFuncs(funcs: any[]) {\r\n        this.frmVariableService.frameworkVariableReg(this.allgspfuncs, funcs);\r\n    }\r\n\r\n    /**\r\n     * è·åææç¼å­çåè½\r\n     */\r\n    public getAllCachedFuncs(): any {\r\n        const funcsCache = this.frmVariableService.getFrmVariableByKey(this.allgspfuncs);\r\n        return funcsCache as any[] || [];\r\n    }\r\n\r\n    /**\r\n     * è·åæåè½\r\n     */\r\n    public getCachedFunc(funcId: string): any {\r\n        const allfuncs = this.getAllCachedFuncs();\r\n        if (allfuncs) {\r\n            return allfuncs.find(f => f.id === funcId);\r\n        }\r\n    }\r\n\r\n    public cacheAllFuncInvoks(invoks: any[]) {\r\n        this.frmVariableService.frameworkVariableReg(this.allfuncinvoks, invoks);\r\n    }\r\n\r\n    public getAllCachedFuncInvoks(): any {\r\n        const invokCache = this.frmVariableService.getFrmVariableByKey(this.allfuncinvoks);\r\n        return invokCache as any[] || [];\r\n    }\r\n\r\n}\r\n","// tslint:disable-next-line:import-blacklist\r\nimport { BehaviorSubject, Subscription, Subject } from 'rxjs';\r\nimport { Injectable, Type } from '@angular/core';\r\nimport { IDisposable } from './types';\r\n\r\n@Injectable()\r\nexport class EventBusPipe implements IDisposable {\r\n\r\n    public eventSubject: Subject<any>;\r\n    public observers: Map<string, Subscription>;\r\n    public pipeCode: string;\r\n    private subscription: Subscription;\r\n    private onceSubscription: Subscription;\r\n\r\n    constructor(private tokenValue: string, private parentEventPipeList: Array<EventBusPipe>, sub: Subject<any>) {\r\n        this.eventSubject = sub || new BehaviorSubject<any>(null);\r\n        this.subscription = new Subscription();\r\n        this.onceSubscription = new Subscription();\r\n        this.observers = new Map<string, Subscription>();\r\n\r\n        if (this.parentEventPipeList) {\r\n            this.parentEventPipeList.push(this);\r\n        }\r\n    }\r\n\r\n    post(bizPara: any) {\r\n        this.eventSubject.next(bizPara);\r\n    }\r\n\r\n    subscribe(eventHandler: (value: any) => void): IDisposable {\r\n        this.subscription = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    subscribeWithObkey(observerKey: string, eventHandler: (value: any) => void): IDisposable {\r\n        const observer = this.observers.get(observerKey);\r\n        if (observer) {\r\n            observer.unsubscribe();\r\n        }\r\n        const sub = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n        });\r\n        this.observers.set(observerKey, sub);\r\n        return this;\r\n    }\r\n\r\n    subscribeOnce(eventHandler: (value: any) => void): IDisposable {\r\n        const self = this;\r\n        const scription = this.eventSubject.subscribe((value) => {\r\n            eventHandler(value);\r\n            if (scription) {\r\n                scription.unsubscribe();\r\n            }\r\n            self.parentEventPipeList = new Array<EventBusPipe>();\r\n        });\r\n        return this;\r\n    }\r\n\r\n    unSubscribe() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n            this.subscription = null;\r\n        }\r\n    }\r\n    // æ³¨éä½¿ç¨onceæ¹æ³æ³¨åçè®¢éã\r\n    unSubscribeForOnce() {\r\n        this.onceSubscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n     * åæ¶æè§å¯èçè®¢é\r\n     * @param observerKey è§å¯èå¯ä¸æ è¯\r\n     */\r\n    unSubscribeWithObkey(observerKey: string) {\r\n        const scription = this.observers.get(observerKey);\r\n        if (scription) {\r\n            scription.unsubscribe();\r\n        }\r\n    }\r\n\r\n\r\n    matchEmitterToken(tokenValue: string): boolean {\r\n        if (this.tokenValue && tokenValue && this.tokenValue !== tokenValue) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    examByTargetToken(tokenValue: string): boolean {\r\n        if (this.tokenValue !== tokenValue) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    dispose(subscriber: Subscription): void {\r\n    }\r\n}\r\n","import { Injectable, Type } from '@angular/core';\r\nimport { IDisposable, IEmitable } from './types';\r\nimport { EventBusPipe } from './frm-eventpipe';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class FrmEventBus implements IEmitable {\r\n\r\n    public eventMap: Map<string, Array<EventBusPipe>>;\r\n\r\n    constructor() {\r\n        this.eventMap = new Map<string, Array<EventBusPipe>>();\r\n    }\r\n\r\n\r\n    // åéäºä»¶ï¼éç¥è®¢éèæ¥æ¶æ¶æ¯ã\r\n    post(tokenValue: string, eventArgs: any): void {\r\n        let eventPipeList = this.eventMap.get(tokenValue);\r\n        if (!eventPipeList) {\r\n            eventPipeList = new Array<EventBusPipe>();\r\n            this.eventMap.set(tokenValue, eventPipeList);\r\n        }\r\n        let eventPipe = eventPipeList.find(item => item.examByTargetToken(tokenValue));\r\n        if (!eventPipe) {\r\n            eventPipe = new EventBusPipe(tokenValue, eventPipeList, null);\r\n        }\r\n        for (const eventPipeDetail of eventPipeList) {\r\n            if (eventPipeDetail.matchEmitterToken(tokenValue)) {\r\n                eventPipeDetail.post(eventArgs);\r\n            }\r\n        }\r\n    }\r\n\r\n    initialPipe(token: string, sub: Subject<any>) {\r\n        let pipes = this.eventMap.get(token);\r\n        if (!pipes) {\r\n            pipes = new Array<EventBusPipe>();\r\n            this.eventMap.set(token, pipes);\r\n        }\r\n        let eventPipe = pipes.find(item => item.examByTargetToken(token));\r\n        if (!eventPipe) {\r\n            eventPipe = new EventBusPipe(token, pipes, sub);\r\n        }\r\n    }\r\n\r\n    // è®¢éäºä»¶\r\n    on(tokenValue: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            return pipe.subscribe(handler);\r\n        }\r\n    }\r\n\r\n    /** è®¢éäºä»¶ï¼å¹¶è®°å½è®¢éèå¯ä¸æ è¯ */\r\n    onWithObkey(tokenValue: string, observerKey: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            return pipe.subscribeWithObkey(observerKey, handler);\r\n        }\r\n    }\r\n\r\n    // è®¢éä¸æ¬¡ãæ¥æ¶å°ä¸æ¬¡æ¶æ¯ä¹åèªå¨åæ¶è®¢é\r\n    once(tokenValue: string, handler: (value: any) => void): IDisposable {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            const res = pipe.subscribeOnce(handler);\r\n            this.eventMap.delete(tokenValue);\r\n            return res;\r\n        }\r\n    }\r\n\r\n    unSubscribe(tokenValue: string) {\r\n        const pipe = this.getEventPipe(tokenValue);\r\n        if (pipe) {\r\n            pipe.unSubscribe();\r\n        }\r\n    }\r\n\r\n    private getEventPipe(tokenValue: string) {\r\n        const eventPipeList = this.eventMap.get(tokenValue);\r\n        if (!eventPipeList) {\r\n            return null;\r\n        }\r\n        const eventPipe = eventPipeList.find(item => item.examByTargetToken(tokenValue));\r\n        return eventPipe;\r\n    }\r\n}\r\n","import { Component, OnInit, ElementRef, ViewChild, Renderer2, AfterViewInit, Output, EventEmitter } from '@angular/core';\r\n\r\n// tslint:disable\r\n@Component({\r\n    selector: 'farris-loading',\r\n    template: `\r\n        <div #loadingBackdrop class=\"farris-loading-backdrop\" *ngIf=\"isActive\"></div>\r\n        <div #loadingContainerEl class=\"farris-loading\" *ngIf=\"isActive\">\r\n            <div class=\"ng-busy-default-wrapper\">\r\n                <div class=\"ng-busy-default-sign\">\r\n                    <div class=\"ng-busy-default-spinner\">\r\n                        <svg class=\"circular\" viewBox=\"25 25 50 50\">\r\n                            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"></circle>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        .circular {\r\n            -webkit-animation: rotate 2s linear infinite;\r\n            animation: rotate 2s linear infinite;\r\n            height: 100%;\r\n            -webkit-transform-origin: center center;\r\n            transform-origin: center center;\r\n            width: 100%;\r\n            position: absolute;\r\n            top: 0;\r\n            bottom: 0;\r\n            left: 0;\r\n            right: 0;\r\n            margin: auto;\r\n        }\r\n        .circular .path {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\r\n            animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\r\n            stroke-linecap: round;\r\n        }\r\n\r\n        @-webkit-keyframes rotate {\r\n            100% {\r\n            -webkit-transform: rotate(360deg);\r\n                    transform: rotate(360deg);\r\n            }\r\n        }\r\n        @keyframes rotate {\r\n            100% {\r\n            -webkit-transform: rotate(360deg);\r\n                    transform: rotate(360deg);\r\n            }\r\n        }\r\n        @-webkit-keyframes dash {\r\n            0% {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            }\r\n            50% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -35px;\r\n            }\r\n            100% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -124px;\r\n            }\r\n        }\r\n        @keyframes dash {\r\n            0% {\r\n            stroke-dasharray: 1, 200;\r\n            stroke-dashoffset: 0;\r\n            }\r\n            50% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -35px;\r\n            }\r\n            100% {\r\n            stroke-dasharray: 89, 200;\r\n            stroke-dashoffset: -124px;\r\n            }\r\n        }\r\n        @-webkit-keyframes color {\r\n            100%,\r\n            0% {\r\n            stroke: #48a7ff;\r\n            }\r\n            40% {\r\n            stroke: #48a7ff;\r\n            }\r\n            66% {\r\n            stroke: #48a7ff;\r\n            }\r\n            80%,\r\n            90% {\r\n            stroke: #48a7ff;\r\n            }\r\n        }\r\n        @keyframes color {\r\n            100%,\r\n            0% {\r\n            stroke: #48a7ff;\r\n            }\r\n            40% {\r\n            stroke: #48a7ff;\r\n            }\r\n            66% {\r\n            stroke: #48a7ff;\r\n            }\r\n            80%,\r\n            90% {\r\n            stroke: #48a7ff;\r\n            }\r\n        }\r\n        .ng-busy-default-spinner {\r\n            width: 126px;height: 126px;\r\n        }\r\n        .ng-busy-default-sign{\r\n            background: transparent;\r\n            box-shadow: none;\r\n        }\r\n        .farris-loading-backdrop {\r\n            background-color: #ffffff;\r\n            opacity: .0;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class LoadingComponent implements OnInit, AfterViewInit {\r\n\r\n    id: number;\r\n\r\n    private _isActive = false;\r\n    message = 'æ­£å¨å è½½ï¼è¯·ç¨å...';\r\n\r\n    get isActive() {\r\n        return this._isActive;\r\n    }\r\n\r\n    set isActive(val: boolean) {\r\n        this._isActive = val;\r\n        if (val) {\r\n            this.animate('fadeIn');\r\n        } else {\r\n            this.el.nativeElement && this.el.nativeElement.remove();\r\n        }\r\n\r\n    }\r\n\r\n    @ViewChild('loadingContainerEl') loadingContainerEl: ElementRef;\r\n    @ViewChild('loadingBackdrop') loadingBackdrop: ElementRef;\r\n    @Output() closed = new EventEmitter();\r\n\r\n\r\n    constructor(private render: Renderer2, private el: ElementRef) { }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // setTimeout(() => this.setPosition(), 0 );\r\n        this.setPosition();\r\n    }\r\n\r\n    close() {\r\n        this.isActive = false;\r\n    }\r\n\r\n    private setPosition() {\r\n        const containerWidth = this.loadingContainerEl.nativeElement.clientWidth;\r\n        const containerHeight = this.loadingContainerEl.nativeElement.clientHeight;\r\n\r\n        this.render.setStyle(this.loadingContainerEl.nativeElement, 'marginTop', -containerHeight / 2 + 'px');\r\n        this.render.setStyle(this.loadingContainerEl.nativeElement, 'marginLeft', -containerWidth / 2 + 'px');\r\n    }\r\n\r\n    private animate(animateCls: string) {\r\n        this.render.setAttribute(this.el.nativeElement, 'class', animateCls);\r\n        this.addAnimationEndEvent('webkitAnimationEnd', 'mozAnimationEnd', 'MSAnimationEnd', 'oanimationend', 'animationend');\r\n    }\r\n\r\n    private addAnimationEndEvent(...events: string[]) {\r\n        const _this = this;\r\n\r\n        events.forEach(e => {\r\n            _this.el.nativeElement.addEventListener(e, function handler() {\r\n                _this.render.removeAttribute(_this.el.nativeElement, 'class');\r\n                _this.el.nativeElement.removeEventListener(e, handler);\r\n\r\n                _this.closed.emit(_this.isActive);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport interface LoadingConfig {\r\n    container?: any;\r\n    message?: string;\r\n    position?: string;\r\n    template?: string;\r\n}\r\n\r\nexport const loaddingDefaultConfig = {\r\n    container: 'body',\r\n    message: 'æ­£å¨å è½½ä¸­ï¼è¯·ç¨å...',\r\n    posion: 'center'\r\n};\r\n\r\nexport const LOADING_DEFAULT_CONFIG = new InjectionToken<LoadingConfig>('loading default options.');\r\n","import { LoadingComponent } from './loading.component';\r\nimport { Injectable, ApplicationRef, ComponentFactoryResolver, Injector, ComponentRef, ElementRef } from '@angular/core';\r\nimport { LoadingConfig, LOADING_DEFAULT_CONFIG, loaddingDefaultConfig } from './loading.config';\r\n\r\n@Injectable()\r\nexport class LoadingService {\r\n\r\n    config: LoadingConfig;\r\n    private loadingCmpRef: ComponentRef<LoadingComponent>;\r\n\r\n    constructor(\r\n        private appRef: ApplicationRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        private injecotr: Injector\r\n    ) {\r\n    }\r\n\r\n    show(config?: LoadingConfig): LoadingComponent {\r\n        this.removeDomCheck();\r\n        this.config = this.injecotr.get(LOADING_DEFAULT_CONFIG) || {};\r\n        this.config = Object.assign(loaddingDefaultConfig, this.config);\r\n\r\n        const loadingFactory = this.cfr.resolveComponentFactory(LoadingComponent);\r\n        this.loadingCmpRef = loadingFactory.create(this.injecotr);\r\n\r\n        if (config) {\r\n            this.config = Object.assign({}, this.config, config);\r\n        }\r\n\r\n        const languageCode = localStorage.getItem('languageCode');\r\n        if (languageCode === 'en') {\r\n            this.config.message = 'Loading...';\r\n        }\r\n\r\n        const container = this.config.container;\r\n        if (container === 'body') {\r\n            document.querySelector(container as string).appendChild(this.loadingCmpRef.location.nativeElement);\r\n        } else {\r\n            if (container instanceof ElementRef) {\r\n                container.nativeElement.appendChild(\r\n                    this.loadingCmpRef.location.nativeElement\r\n                );\r\n            }\r\n        }\r\n        this.loadingCmpRef.instance.isActive = true;\r\n        Object.assign(this.loadingCmpRef.instance, this.config);\r\n\r\n        this.loadingCmpRef.instance.closed.subscribe(state => {\r\n            if (!state) {\r\n                this.clearDom(this.loadingCmpRef);\r\n            }\r\n        });\r\n\r\n        this.loadingCmpRef.changeDetectorRef.markForCheck();\r\n        this.loadingCmpRef.changeDetectorRef.detectChanges();\r\n\r\n        return this.loadingCmpRef.instance;\r\n    }\r\n\r\n    close() {\r\n        if (!!this.loadingCmpRef) {\r\n            this.clearDom(this.loadingCmpRef);\r\n        }\r\n    }\r\n\r\n    private clearDom(cmpRef: ComponentRef<LoadingComponent>) {\r\n        try {\r\n            const loadingEl = cmpRef.location.nativeElement;\r\n\r\n            if (!!loadingEl && loadingEl.parentNode) {\r\n                loadingEl.parentNode.removeChild(loadingEl);\r\n            }\r\n\r\n            this.config = this.injecotr.get(LOADING_DEFAULT_CONFIG);\r\n            cmpRef.destroy();\r\n            cmpRef = null;\r\n            setTimeout(() => {\r\n                // 1.5s åæ£æ¥æ¯å¦ç§»é¤æå\r\n                this.removeDomCheck();\r\n            }, 1500);\r\n        } catch (e) {\r\n            console.log(e);\r\n            this.removeDomCheck();\r\n        }\r\n    }\r\n\r\n    private removeDomCheck(): void {\r\n        try {\r\n            const el = document.getElementsByTagName('farris-loading')[0];\r\n            if (!!el && !!el.parentNode) {\r\n                el.parentNode.removeChild(el);\r\n            }\r\n        } catch (ex) {\r\n            console.log(ex);\r\n        }\r\n    }\r\n}\r\n\r\n","export class IframeLink {\r\n    /** å¯ä¸æ è¯ tabId */\r\n    id: string;\r\n\r\n    code: string; // ç¼å·\r\n    FuncName: string; // åç§°\r\n    appType: string; // åºç¨ç±»å menu app\r\n    funcId: string;\r\n    appId: string;\r\n    appEntrance: string;\r\n    /** iframeæå è½½åè½çurlåquerystringåæ°è¿è¡æ¶æ¼æ¥ */\r\n    src: string;\r\n    /** iframeæå è½½åè½çurl */\r\n    url: string;\r\n\r\n    active = false;\r\n    /** å½åiframeå¯¹åºçåè½session */\r\n    sessionid: string;\r\n\r\n    reload: boolean;\r\n    /** æ¯å¦ä¸ºjQueryåçå¼å */\r\n    isjquery: boolean;\r\n\r\n    /**\r\n     * spaæ¨¡å¼ä¸éå¤æå¼åè½\r\n     * trueï¼æé æ°çé¡µé¢å®ä¾\r\n     * false || null || undefinedï¼å¤ç¨å·²æå¼çé¡µé¢å®ä¾\r\n     */\r\n    isNewTab: boolean;\r\n\r\n    /** æ ç­¾é¡µæå¼æ¹å¼: spa mdi */\r\n    mode: string;\r\n    /** èåé¨ç½²suä¿¡æ¯ */\r\n    su: string;\r\n\r\n    /**\r\n     * å½åè¡¨åçå¬å±åétoken\r\n     */\r\n    formToken: string;\r\n\r\n    constructor(code: string, sessionid: string, src = '', active = false) {\r\n        this.code = code;\r\n        this.src = src;\r\n        this.active = active;\r\n        this.sessionid = sessionid;\r\n    }\r\n}\r\n","import { FrmEventBus } from '../eventbus/frm-evenbus';\r\nimport { IframeLink } from '../models/iframe.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { EventBusPipe } from '../eventbus/frm-eventpipe';\r\nimport { FrameworkVariableService } from '../services/frmVariableService/framework-variable.service';\r\n\r\nexport class FrmUtil {\r\n\r\n    public static setHeader(bizContextId: string, options: any) {\r\n        options.headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n        if (bizContextId) {\r\n            const contextKey = 'X-CAF-Runtime-Context';\r\n            options.headers[contextKey] = bizContextId;\r\n        }\r\n        return options;\r\n    }\r\n\r\n    public static getTabArray(): IframeLink[] {\r\n        const iframeTabArr = 'iframeTabarray';\r\n        const topWin = this.getTopWindow();\r\n        let frmWin: Window = window;\r\n        while ((!frmWin[iframeTabArr] || frmWin[iframeTabArr].length === 0) && frmWin !== topWin) {\r\n            frmWin = frmWin.parent;\r\n        }\r\n        return frmWin[iframeTabArr] as IframeLink[] || [];\r\n    }\r\n\r\n    public static getTopWindow(): Window {\r\n        let curWin: Window = window.self;\r\n        try {\r\n            while (curWin.location.origin === curWin.parent.location.origin) {\r\n                if (curWin !== curWin.parent) {\r\n                    curWin = curWin.parent;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        } catch (e) { }\r\n        return curWin;\r\n    }\r\n\r\n    public static removeTab(index: number) {\r\n        const iframeArr = this.getTabArray();\r\n        iframeArr.splice(index, 1);\r\n    }\r\n}\r\n\r\nexport class EventUtil {\r\n\r\n    /** eventToken str */\r\n    public static FARRIS_APPS = 'all-gsp-farrisapps';\r\n    public static FARRIS_APP_CLICK = 'farrisapp-click';\r\n    public static ALL_GSP_FUNCS = 'all-gsp-functions';\r\n    public static BEFORE_FUNC_CLOSE = 'beforeFuncCloseEvent';\r\n    public static FUNC_CLOSED = 'FuncClosed';\r\n    public static FUNC_SWITCH = 'funcSwitchEvent';\r\n    public static AFTER_FRAME_LOAD = \"after-iframe-load-event\";\r\n    private static eventBusKey = 'frmEventBus';\r\n\r\n    private static frmVariable = new FrameworkVariableService();\r\n\r\n    /** è·åæ¡æ¶event */\r\n    public static getFrmEvent(): FrmEventBus {\r\n        const eventBus = this.frmVariable.getFrmVariableByKey(this.eventBusKey);\r\n        return eventBus as FrmEventBus;\r\n    }\r\n\r\n    public static setFrmEvent(feb: FrmEventBus) {\r\n        this.frmVariable.frameworkVariableReg(this.eventBusKey, feb);\r\n    }\r\n\r\n    /**\r\n     * è·åappå¯ä¸çè§å¯èæ è¯\r\n     */\r\n    public static appObsToken(appId: string, appEntrance: string, tabId?: string): string {\r\n        return tabId || `${appId}#${appEntrance}`;\r\n    }\r\n\r\n    /**\r\n     * è·åfuncå¯ä¸çè§å¯èæ è¯\r\n     */\r\n    public static funcObsToken(funcId: string, tabId?: string): string {\r\n        return tabId || funcId;\r\n    }\r\n\r\n    /**\r\n     * è·åæäºä»¶ççå¬è\r\n     */\r\n    public static getObserver(eventToken: string): Map<string, Subscription> {\r\n        const feb = this.getFrmEvent();\r\n        const eventMap = feb.eventMap.get(eventToken);\r\n        if (!eventMap) {\r\n            return null;\r\n        }\r\n\r\n        let eventPipe: EventBusPipe;\r\n        for (const eventPipeDetail of eventMap) {\r\n            if (eventPipeDetail.matchEmitterToken(eventToken)) {\r\n                eventPipe = eventPipeDetail;\r\n                break;\r\n            }\r\n        }\r\n        if (!eventPipe) {\r\n            return null;\r\n        }\r\n        const obs = eventPipe.observers;\r\n        return obs;\r\n    }\r\n\r\n    /**\r\n     * æ¸ç©ºçå¬è\r\n     */\r\n    public static clearObserver(obKey: string) {\r\n        const switchObsMap = this.getObserver(this.FUNC_SWITCH);\r\n        const switchObs = switchObsMap.get(obKey);\r\n        if (switchObs) {\r\n            switchObs.unsubscribe();\r\n            switchObsMap.delete(obKey);\r\n        }\r\n        const closeObsMap = this.getObserver(this.FUNC_CLOSED);\r\n        const closeObs = closeObsMap.get(obKey);\r\n        if (closeObs) {\r\n            closeObs.unsubscribe();\r\n            closeObsMap.delete(obKey);\r\n        }\r\n        const beforeCloseMap = this.getObserver(this.BEFORE_FUNC_CLOSE);\r\n        const beforeClose = beforeCloseMap.get(obKey);\r\n        if (beforeClose) {\r\n            beforeClose.unsubscribe();\r\n            beforeCloseMap.delete(obKey);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¸ç©ºæä¸ªç®¡é\r\n     */\r\n    public static clearEventPipe(pipeToken: string) {\r\n        const feb = this.getFrmEvent();\r\n        const eventPipes = feb.eventMap.get(pipeToken);\r\n        if (!eventPipes) {\r\n            return;\r\n        }\r\n        const eventPipe = eventPipes.find(item => item.examByTargetToken(pipeToken));\r\n        if (eventPipe) {\r\n            eventPipe.unSubscribe();\r\n            feb.eventMap.delete(pipeToken);\r\n        }\r\n    }\r\n}\r\n\r\nexport const AppType = {\r\n    App: 'app',\r\n    Menu: 'menu',\r\n    Other: 'other'\r\n};\r\n\r\nexport interface FuncEventArgs {\r\n    /** å½åtabé¡µçå¯ä¸æ è¯ */\r\n    tabId: string;\r\n    /** å½åtabæå¼çåè½ç±»å app or menu */\r\n    appType: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n    tabName?: string;\r\n    beforeCloseHandle?: (arg: any) => void;\r\n}\r\n\r\nexport interface FuncStateParam {\r\n    /**\r\n     * formToken (ç®ç§° cvft)\r\n     */\r\n    token?: string;\r\n    /** å½åtabé¡µçå¯ä¸æ è¯ */\r\n    tabId: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n    /**\r\n     * å½é¡µé¢nameèªå®ä¹æ¶ä¸ºèªå®ä¹\r\n     * å¦åï¼funcä¸ºfuncNameï¼appä¸ºentryName\r\n     */\r\n    menuName: string;\r\n    /**\r\n     * å¨ä½\r\n     */\r\n    action: string;\r\n}\r\n\r\nexport interface AppOptions {\r\n    /**\r\n     * æå®å½åæå¼çæ¯èåï¼menuï¼è¿æ¯åºç¨ï¼appï¼\r\n     */\r\n    appType: string;\r\n\r\n    /*** å¦ææå¼èåï¼funcIdéè¦æå®ï¼appIdãappEntranceå¯ä»¥ä¸ºç©º */\r\n    funcId: string;\r\n\r\n    /*** å¦ææå¼åºç¨ï¼appIdåappEntranceéè¦æå®ï¼funcIdå¯ä»¥ä¸ºç©º */\r\n    appId: string;\r\n    appEntrance: string;\r\n\r\n    /** å¦æéè¦éå¤æå¼åè½ï¼åèªè¡æå®å¯ä¸tabId */\r\n    tabId?: string;\r\n    tabName?: string;\r\n\r\n    /**\r\n     * è¡¨åå¬å±åétoken/formToken\r\n     */\r\n    token?: string;\r\n    /**\r\n     * è¡¨åæå±SU\r\n     */\r\n    su?: string;\r\n    routeUrl?: string;\r\n    entityParams?: any;\r\n    queryStringParams?: Map<string, string>;\r\n    isReload?: boolean;\r\n    isJquery?: boolean;\r\n    /**\r\n     * spaæ¨¡å¼ä¸éå¤æå¼åè½\r\n     * trueï¼æé æ°çé¡µé¢å®ä¾\r\n     * false || null || undefinedï¼å¤ç¨å·²æå¼çé¡µé¢å®ä¾\r\n     * ç®åæ°çtabIdå°±æ¯æ°çé¡µé¢å®ä¾\r\n     */\r\n    isNewTab?: boolean;\r\n\r\n    /**\r\n     * åªè·åè¢«æå¼è¡¨åçlinkå®ä½ï¼\r\n     * ä¸è§¦åæ¡æ¶å è½½è¡¨åå®è·µ\r\n     */\r\n    onlyGetIframeLink?: boolean;\r\n\r\n    /**\r\n     * å³é­ååè°å¤ç\r\n     */\r\n    beforeCloseHandle?: (arg: any) => void;\r\n}\r\n\r\nexport interface FrmSubjectOptions {\r\n    customToken?: string;\r\n    funcId?: string;\r\n    appId?: string;\r\n    appEntrance?: string;\r\n}\r\n\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpService, LanguageService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\nexport interface I18nSettingEntity {\r\n    i18nSetting?: any;\r\n    languages?: any;\r\n    currentLanCode?: string;\r\n}\r\n\r\n@Injectable()\r\nexport class FrmI18nSettingService {\r\n\r\n    private variableKey = 'frm-i18nSetting';\r\n    constructor(\r\n        private frmVariable: FrameworkVariableService,\r\n        private lanService: LanguageService,\r\n        private http: HttpService\r\n    ) {\r\n    }\r\n\r\n    public getSetting(): any {\r\n        const temp = this.frmVariable.getFrmVariableByKey(this.variableKey);\r\n        return this.deepClone(temp);\r\n    }\r\n\r\n    public getSetting$(): Observable<any> {\r\n        const temp = this.frmVariable.getFrmVariableByKey(this.variableKey);\r\n        return !temp ? this.loadSetting$() : of(this.deepClone(temp));\r\n    }\r\n\r\n    public loadSetting$(): Observable<any> {\r\n        const rtfService = (window as any).gspframeworkService && (window as any).gspframeworkService.rtf;\r\n        const entity: I18nSettingEntity = {};\r\n        if (!!rtfService && !!rtfService.language) {\r\n            try {\r\n                const lanService = rtfService.language;\r\n                lanService.i18nSetting(\r\n                    res => {\r\n                        entity.i18nSetting = res;\r\n                    },\r\n                    err => {\r\n                        console.log(err);\r\n                    }\r\n                );\r\n                lanService.allLanguages(\r\n                    res => {\r\n                        entity.languages = res;\r\n                    },\r\n                    err => {\r\n                        console.log(err);\r\n                    }\r\n                );\r\n                entity.currentLanCode = lanService.getLanguageCode();\r\n                this.frmVariable.frameworkVariableReg(this.variableKey, entity);\r\n                return of(entity);\r\n            } catch (e) {\r\n                console.log(e);\r\n                return of(null);\r\n            }\r\n        } else {\r\n            const languagesUrl = '/api/runtime/sys/v1.0/i18n/languageservice/getalllanguages';\r\n            const settingUrl = '/api/runtime/sys/v1.0/i18n/i18nusersetting/setting';\r\n            entity.currentLanCode = this.lanService.getLanguageCode();\r\n            return this.http.get(languagesUrl).pipe(\r\n                map(\r\n                    (res) => entity.languages = res\r\n                ),\r\n                switchMap(\r\n                    () => this.http.get(settingUrl)\r\n                ),\r\n                map(\r\n                    (res) => {\r\n                        entity.i18nSetting = res;\r\n                        this.frmVariable.frameworkVariableReg(this.variableKey, entity);\r\n                        return entity;\r\n                    }\r\n                ),\r\n                catchError(\r\n                    (err: HttpErrorResponse) => {\r\n                        console.log(err);\r\n                        return of(null);\r\n                    }\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    private deepClone(target: any): any {\r\n        let result;\r\n        if (typeof target === 'object') {\r\n            if (Array.isArray(target)) {\r\n                result = [];\r\n                for (let i in target) {\r\n                    result.push(this.deepClone(target[i]))\r\n                }\r\n            } else if (target === null) {\r\n                result = null;\r\n            } else if (target.constructor === RegExp) {\r\n                result = target;\r\n            } else {\r\n                result = {};\r\n                for (let i in target) {\r\n                    result[i] = this.deepClone(target[i]);\r\n                }\r\n            }\r\n        } else {\r\n            result = target;\r\n        }\r\n        return result;\r\n    }\r\n\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { Observable, of, zip } from 'rxjs';\r\nimport { HttpService, LanguageService, SessionService } from '@ecp-caf/caf-common';\r\nimport { IframeLink } from '../../models/iframe.model';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { EventUtil, FrmUtil, AppType, FuncEventArgs, AppOptions, FuncStateParam } from '../../shared/frm-util';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\nimport { FrmI18nSettingService } from '../i18nService/i18n-setting.service';\r\n\r\n\r\n@Injectable()\r\nexport class AppService {\r\n    private FUNCSTATUS_PATH = '/api/runtime/sys/v1.0/function-states';\r\n    private APPINVOKE_CAHCE_KEY = 'allappinvoks';\r\n    private frmVariableService: FrameworkVariableService;\r\n\r\n    constructor(\r\n        private http: HttpService,\r\n        private sessionSvc: SessionService,\r\n        @Optional() private i18nSetting: FrmI18nSettingService\r\n    ) {\r\n        this.frmVariableService = new FrameworkVariableService();\r\n        if (!this.i18nSetting) {\r\n            const variables = new FrameworkVariableService();\r\n            const language = new LanguageService(null);\r\n            this.i18nSetting = new FrmI18nSettingService(variables, language, http);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Appè·³è½¬æå¼\r\n     */\r\n    public openApp(appId: string, appEntrance: string, params: Map<string, string>, reload?: boolean) {\r\n        const appOpts: AppOptions = {\r\n            funcId: '',\r\n            appId,\r\n            appEntrance,\r\n            appType: AppType.App,\r\n            entityParams: params,\r\n            queryStringParams: params,\r\n            isReload: reload\r\n        };\r\n        this.openAppByOptions(appOpts);\r\n    }\r\n\r\n    /**\r\n     * Appè·³è½¬æå¼æå¡\r\n     */\r\n    public openAppByOptions(options: AppOptions) {\r\n\r\n        const linkobj = this.checkingRepeatOpen(options);\r\n        if (linkobj) {\r\n            return;\r\n        }\r\n        this.getInvokeAndEnterApp$(options).subscribe(\r\n            link => {\r\n                this.getFeb().post(EventUtil.FARRIS_APP_CLICK, link);\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * æµæ¹å¼ï¼Appè·³è½¬æå¼æå¡\r\n     */\r\n    public openAppByOptions$(options: AppOptions): Observable<any> {\r\n        const linkobj = this.checkingRepeatOpen(options);\r\n        if (linkobj) {\r\n            return of(true);\r\n        }\r\n        return this.getInvokeAndEnterApp$(options).pipe(\r\n            map(\r\n                link => {\r\n                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, link);\r\n                    return true;\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åappè°ç¨ä¿¡æ¯\r\n     */\r\n    public getAppInvok(appId: string): Observable<any> {\r\n        const invoks = this.getInvokCache();\r\n        const funcInvok = invoks.find(f => f.id === appId);\r\n        if (!funcInvok) {\r\n            return this.getInvokConfig(appId).pipe(\r\n                map(v => {\r\n                    if (!v) {\r\n                        return null;\r\n                    }\r\n                    this.refreshInvokCache(invoks, v);\r\n                    return v;\r\n                })\r\n            );\r\n        }\r\n        return of(funcInvok);\r\n    }\r\n\r\n    public beforeCloseAppByOptions(options: AppOptions) {\r\n        const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(appObkey);\r\n        if (!obs) {\r\n            this.closeAppByOptions(options).subscribe();\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: this.getPageId(options.appId, options.appEntrance, options.tabId),\r\n            appType: AppType.App,\r\n            appId: options.appId,\r\n            appEntrance: options.appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * Appå³é­åæ¥å£\r\n     */\r\n    public beforeCloseApp(appId: string, appEntrance: string, tabId?: string) {\r\n        const self = this;\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance, tabId);\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(appObkey);\r\n        if (!obs) {\r\n            this.closeApp(appId, appEntrance, tabId).subscribe();\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: self.getPageId(appId, appEntrance, tabId),\r\n            appType: AppType.App,\r\n            appId,\r\n            appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    public closeAppByOptions(options: AppOptions): Observable<any> {\r\n        const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n        const pageToken = this.getPageId(options.appId, options.appEntrance, options.tabId);\r\n        EventUtil.clearObserver(appObkey);\r\n        EventUtil.clearEventPipe(pageToken);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageToken && i.appType === AppType.App);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n\r\n        options.token = options.token || obj.formToken;\r\n        FrmUtil.removeTab(objIndex);\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageToken,\r\n            appType: AppType.App,\r\n            appId: options.tabId,\r\n            appEntrance: options.appEntrance\r\n        };\r\n        this.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        return this.quitApp(options, obj.su);\r\n    }\r\n\r\n    /**\r\n     * å³é­app\r\n     */\r\n    public closeApp(appId: string, appEntrance: string, tabId?: string): Observable<any> {\r\n        const self = this;\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance, tabId);\r\n        const pageId = this.getPageId(appId, appEntrance, tabId);\r\n        EventUtil.clearObserver(appObkey);\r\n        EventUtil.clearEventPipe(pageId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.App);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        const formToken = obj.formToken;\r\n        FrmUtil.removeTab(objIndex);\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageId,\r\n            appType: AppType.App,\r\n            appId,\r\n            appEntrance,\r\n        };\r\n        self.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n\r\n        const options: AppOptions = {\r\n            tabId,\r\n            funcId: '',\r\n            appId,\r\n            appEntrance,\r\n            appType: AppType.App,\r\n            token: formToken\r\n        };\r\n        return this.quitApp(options, obj.su).pipe(\r\n            map(v => { })\r\n        );\r\n    }\r\n\r\n    private getInvokeAndEnterApp$(options: AppOptions): Observable<IframeLink> {\r\n        const newPageId = this.newPageId(options.appId, options.appEntrance, options.tabId);\r\n        options.tabId = newPageId;\r\n        return this.getAppInvok(options.appId).pipe(\r\n            switchMap(\r\n                value => {\r\n                    let invokEntry = value.appInvoks.find(invok => invok.appEntrance === options.appEntrance);\r\n                    if (!options.appEntrance && !invokEntry) {\r\n                        invokEntry = value.appInvoks.find(invok => !invok.appEntrance);\r\n                    }\r\n                    if (!invokEntry) {\r\n                        window.alert(`è¯·æ£æ¥å½ååºç¨(ID:${options.appId})éç½®çåºç¨å¥å£(appEntrance:${options.appEntrance})æ¯å¦å­å¨`);\r\n                        return;\r\n                    }\r\n                    let entityParam: any;\r\n                    try {\r\n                        entityParam = invokEntry.entityParams ? JSON.parse(invokEntry.entityParams) : null;\r\n                    } catch (e) {\r\n                        entityParam = null;\r\n                        console.log(e);\r\n                    }\r\n                    const su = this.getSu(value.url);\r\n\r\n                    return this.enterApp({\r\n                        tabId: newPageId,\r\n                        appId: options.appId,\r\n                        appEntrance: options.appEntrance,\r\n                        menuName: options.tabName || invokEntry.name,\r\n                        action: 'enterapp'\r\n                    }, su).pipe(\r\n                        map(\r\n                            token => {\r\n                                const routurl = value.url + (options.appEntrance ? `#/${options.appEntrance}` : '');\r\n                                const linkobj = new IframeLink(\r\n                                    value.code,\r\n                                    null,\r\n                                    this.buildQueryString(routurl, options.appId, options.appEntrance,\r\n                                        options.tabId, token, options.queryStringParams),\r\n                                );\r\n                                // idå å¥å£åºå,tabIdé¡µç­¾å¯ä¸æ è¯\r\n                                linkobj.id = newPageId;\r\n                                linkobj.appType = AppType.App;\r\n                                linkobj.appId = options.appId;\r\n                                linkobj.appEntrance = options.appEntrance;\r\n                                // æ¾ç¤ºappåå­åå¥å£åå­\r\n                                linkobj.FuncName = options.tabName || invokEntry.name;\r\n                                linkobj.url = value.url;\r\n                                linkobj.reload = options.isReload;\r\n                                linkobj.su = su;\r\n                                linkobj.formToken = token;\r\n                                if (entityParam) {\r\n                                    entityParam.forEach(\r\n                                        item => {\r\n                                            if (item.name === 'mode') {\r\n                                                linkobj.mode = item.value;\r\n                                                linkobj.src += (item.value ? `&appMode=${item.value}&` : '');\r\n                                            }\r\n                                        }\r\n                                    );\r\n                                }\r\n\r\n                                this.getFeb().post(newPageId, options.entityParams);\r\n                                return linkobj;\r\n                            }\r\n                        ),\r\n                        switchMap(\r\n                            formLink => {\r\n                                return this.i18nSetting.getSetting$().pipe(\r\n                                    map(\r\n                                        () => formLink\r\n                                    )\r\n                                )\r\n                            }\r\n                        )\r\n                    );\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    private getInvokConfig(appId: string) {\r\n        const url = `/api/runtime/sys/v1.0/gspapp/${appId}`;\r\n        return this.http.request('Get', url, FrmUtil.setHeader(null, {}));\r\n    }\r\n\r\n    /**\r\n     * è¿å¥åºç¨ï¼è§¦åç¸å³æå¡\r\n     */\r\n    private enterApp(enterParam: FuncStateParam, su: string): Observable<any> {\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body: enterParam })).pipe(\r\n            map((v: any) => {\r\n                return v.token || v.sessionId;\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * éåºåºç¨ï¼è§¦åç¸å³æå¡\r\n     */\r\n    private quitApp(options: AppOptions, su?: string): Observable<any> {\r\n        const body = {\r\n            tabId: options.tabId,\r\n            token: options.token,\r\n            appId: options.appId,\r\n            appEntrance: options.appEntrance,\r\n            action: 'quitapp'\r\n        };\r\n\r\n        const invokObs = this.getAppInvok(options.appId);\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        const funcState$ = this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body }));\r\n        // tslint:disable-next-line: deprecation\r\n        const $r = zip(invokObs, funcState$, (res1, res2) => ({ res1, res2 }));\r\n        return $r;\r\n    }\r\n\r\n    private getSu(url: string): string {\r\n        const uriArr = url.split('/');\r\n        return uriArr.length > 3 ? uriArr[3] : '';\r\n    }\r\n\r\n    private getInvokCache() {\r\n        const appInvokesCache = this.frmVariableService.getFrmVariableByKey(this.APPINVOKE_CAHCE_KEY);\r\n        return appInvokesCache as any[] || [];\r\n    }\r\n\r\n    private refreshInvokCache(invoks: any[], funcInvok: any) {\r\n        if (!funcInvok) {\r\n            return;\r\n        }\r\n        invoks.push(funcInvok);\r\n        this.frmVariableService.frameworkVariableReg(this.APPINVOKE_CAHCE_KEY, invoks);\r\n    }\r\n\r\n    // tslint:disable-next-line: max-line-length\r\n    private buildQueryString(routurl: string, appId: string, appEntrance: string, tabId: string, token: string, params: Map<string, string>): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?appId=${appId}&appEntrance=${appEntrance}`;\r\n        } else {\r\n            routurl += `&appId=${appId}&appEntrance=${appEntrance}`;\r\n        }\r\n\r\n        routurl += `&appType=${AppType.App}`;\r\n        routurl += `&tabId=${this.getPageId(appId, appEntrance, tabId)}`;\r\n        routurl += !token ? '' : `&cvft=${token}`;\r\n        if (params) {\r\n            params.forEach((value, key) => {\r\n                routurl += !key ? '' : `&${key}=${value}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n\r\n    private getFeb(): FrmEventBus {\r\n        return EventUtil.getFrmEvent();\r\n    }\r\n\r\n    private mergeAppId(appId: string, appEntrance): string {\r\n        return `${appId}_${appEntrance}`;\r\n    }\r\n\r\n    /**\r\n     * è·åå½åèåé¡µé¢çå¯ä¸æ è¯\r\n     */\r\n    private getPageId(appId: string, appEntrance: string, tabId: string): string {\r\n        return tabId || this.mergeAppId(appId, appEntrance);\r\n    }\r\n\r\n    /**\r\n     * çæé¡µé¢å¯ä¸æ è¯\r\n     */\r\n    private newPageId(appId: string, appEntrance: string, tabId: string): string {\r\n        return tabId ? `${this.mergeAppId(appId, appEntrance)}_${tabId}` : this.mergeAppId(appId, appEntrance);\r\n    }\r\n\r\n    private checkingRepeatOpen(options: AppOptions): IframeLink {\r\n        const appId = options.appId;\r\n        const appEntrance = options.appEntrance;\r\n        const tabId = options.tabId;\r\n        const entityParams = options.entityParams;\r\n\r\n        let linkobj: IframeLink;\r\n        const pageId = this.getPageId(appId, appEntrance, tabId);\r\n        linkobj = FrmUtil.getTabArray().find(i => i.id === pageId && i.appType === AppType.App);\r\n        if (linkobj) {\r\n            linkobj.FuncName = options.tabName || linkobj.FuncName;\r\n            linkobj.src = this.buildQueryString(linkobj.url, appId, appEntrance, options.tabId,\r\n                linkobj.sessionid, options.queryStringParams);\r\n            linkobj.reload = options.isReload;\r\n            this.getFeb().post(pageId, entityParams);\r\n            this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n        }\r\n        return linkobj;\r\n    }\r\n\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { OpenfuncOptions } from '../../models/function.model';\r\nimport { of, Observable } from 'rxjs';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { LoadingService } from '../loading/loading.service';\r\nimport { FuncsService } from '../funcsservice/funcs.service';\r\nimport { IframeLink } from '../../models/iframe.model';\r\nimport { map, switchMap, catchError } from 'rxjs/operators';\r\nimport { CacheService, HttpService, LanguageService, SessionService } from '@ecp-caf/caf-common';\r\nimport { EventUtil, FrmUtil, AppType, FuncEventArgs, AppOptions, FuncStateParam } from '../../shared/frm-util';\r\nimport { AppService } from '../appservice/app.service';\r\nimport { FrmI18nSettingService } from '../i18nService/i18n-setting.service';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\n\r\n@Injectable()\r\nexport class FrameworkService {\r\n\r\n    private FUNCSTATUS_PATH = '/api/runtime/sys/v1.0/function-states';\r\n    public BeforeFuncClose = EventUtil.BEFORE_FUNC_CLOSE;\r\n    public FuncClosed = EventUtil.FUNC_CLOSED;\r\n    public FuncSwitch = EventUtil.FUNC_SWITCH;\r\n\r\n    constructor(\r\n        private http: HttpService,\r\n        private router: Router,\r\n        private cache: CacheService,\r\n        private sessionSvc: SessionService,\r\n        private feb: FrmEventBus,\r\n        private funcService: FuncsService,\r\n        private loadService: LoadingService,\r\n        @Optional() private appService: AppService,\r\n        @Optional() private i18nSetting: FrmI18nSettingService\r\n    ) {\r\n        if (!this.i18nSetting) {\r\n            const variables = new FrameworkVariableService();\r\n            const language = new LanguageService(null);\r\n            this.i18nSetting = new FrmI18nSettingService(variables, language, http);\r\n        }\r\n        if (!this.appService) {\r\n            this.appService = new AppService(this.http, this.sessionSvc, this.i18nSetting);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®funcidæå¼åè½èå\r\n     * (éç¨äºåé¡µç­¾è·¯ç±ï¼ä¸æ¯æNG7åçº§åèåä¹é´è·³è½¬)\r\n     */\r\n    openFunc(funcid: string, routepath: string, parentsessionid: string, newsession: boolean = true, simpleparam: string = ''): any {\r\n\r\n        const appOps: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId: funcid,\r\n            appId: '',\r\n            appEntrance: ''\r\n        };\r\n\r\n        this.internalOpen(appOps);\r\n        return of(true);\r\n        // return this.internalOpen$(appOps);\r\n    }\r\n\r\n    /**\r\n     * ç´æ¥æå¼åè½\r\n     */\r\n    public openMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                if (!options.appId) {\r\n                    window.alert('åæ°appIdä¸è½ä¸ºç©ºï¼');\r\n                    return;\r\n                }\r\n                this.appService.openAppByOptions(options);\r\n                break;\r\n            case AppType.Menu:\r\n                this.internalOpen(options);\r\n                break;\r\n            case AppType.Other: break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éè¿æµæ¹å¼æå¼åè½\r\n     */\r\n    public openMenu$(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                if (!options.appId) {\r\n                    window.alert('åæ°appIdä¸è½ä¸ºç©ºï¼');\r\n                    return;\r\n                }\r\n                return this.appService.openAppByOptions$(options);\r\n            case AppType.Menu:\r\n                if (options.onlyGetIframeLink === true) {\r\n                    return this.internalOpenByIframeLink$(options);\r\n                }\r\n                return this.internalOpen$(options);\r\n            case AppType.Other: break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æå¼èæ¥èå\r\n     */\r\n    openConnectedFunc(funcId: string, options: OpenfuncOptions) {\r\n        const appOps: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            entityParams: options.EntityParam,\r\n        };\r\n\r\n        this.internalOpen(appOps);\r\n    }\r\n\r\n    /**\r\n     * æå¼èæ¥èåï¼å¹¶ä¼ å\r\n     */\r\n    public openFuncWithParam(funcId: string, params: Map<string, string>, reload?: boolean) {\r\n        const options: AppOptions = {\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            entityParams: params,\r\n            queryStringParams: params,\r\n            isReload: reload\r\n        };\r\n        this.internalOpen(options);\r\n    }\r\n\r\n    /**\r\n     * æå¼åè½ï¼ä¸è¿åæµ\r\n     */\r\n    private internalOpen(options: AppOptions) {\r\n        this.checkingBeforeOpen$(options)\r\n            .subscribe(\r\n                res => {\r\n                    if (!res || !res.func || res.linkobj) {\r\n                        return;\r\n                    }\r\n                    const func = res.func;\r\n                    this.getInvokeAndEnterFunc$(options, func).subscribe(\r\n                        (lobj: IframeLink) => this.getFeb().post(EventUtil.FARRIS_APP_CLICK, lobj),\r\n                        err => {\r\n                            const info = {\r\n                                isErr: true,\r\n                                errInfo: err\r\n                            };\r\n                            this.getFeb().post(EventUtil.FARRIS_APP_CLICK, info);\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éè¿ä¸²æµæ§å¶ï¼æå¼èå\r\n     */\r\n    private internalOpen$(options: AppOptions): Observable<any> {\r\n        return this.checkingBeforeOpen$(options)\r\n            .pipe(\r\n                switchMap(\r\n                    res => {\r\n                        if (!res || !res.func || res.linkobj) {\r\n                            return of(null);\r\n                        }\r\n                        const func = res.func;\r\n                        return this.getInvokeAndEnterFunc$(options, func).pipe(\r\n                            map(\r\n                                (lobj: IframeLink) => {\r\n                                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, lobj);\r\n                                    return true;\r\n                                }\r\n                            )\r\n                        );\r\n                    }\r\n                )\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éè¿ä¸²æµè·åè¢«æå¼èåçiframeLinkå¯¹è±¡ä¿¡æ¯\r\n     */\r\n    private internalOpenByIframeLink$(options: AppOptions): Observable<IframeLink> {\r\n\r\n        if (!options.funcId) {\r\n            window.alert('åæ°funcIdä¸è½ä¸ºç©ºï¼');\r\n            return of(null);\r\n        }\r\n\r\n        return this.getFuncEntity(options.funcId).pipe(\r\n            switchMap(\r\n                func => {\r\n                    if (!func) {\r\n                        window.alert(`è¯·ç¡®è®¤æ¨æ¯å¦å·å¤æå¼èå(ID:${options.funcId})çæé`);\r\n                        return null;\r\n                    }\r\n                    return this.getInvokeAndEnterFunc$(options, func);\r\n                }\r\n            ));\r\n    }\r\n\r\n    private getInvokeAndEnterFunc$(options: AppOptions, func: any): Observable<IframeLink> {\r\n        const newPageId = this.newPageId(options.funcId, options.tabId);\r\n        options.tabId = newPageId;\r\n        let linkobj: IframeLink;\r\n        return this.getFuncInvok(options.funcId).pipe(\r\n            switchMap(\r\n                funcInvok => {\r\n\r\n                    const routurl = funcInvok.invokingConfig.url;\r\n                    const paramInfo = funcInvok.invokingConfig.staticParams;\r\n                    const entityParamInfo = funcInvok.invokingConfig.entityParams;\r\n                    const staticParam = paramInfo ? JSON.parse(paramInfo) : '';\r\n                    const entityParam = entityParamInfo ? JSON.parse(entityParamInfo) : '';\r\n\r\n                    const su = this.getSu(routurl);\r\n                    return this.enterFunc({\r\n                        tabId: newPageId,\r\n                        funcId: options.funcId,\r\n                        menuName: options.tabName || func.name,\r\n                        action: 'enter'\r\n                    }, su).pipe(\r\n                        map(\r\n                            formToken => {\r\n                                linkobj = new IframeLink(\r\n                                    func.code,\r\n                                    null,\r\n                                    this.buildQueryStringByMap(routurl, options.funcId, options.tabId,\r\n                                        formToken, options.queryStringParams),\r\n                                );\r\n                                linkobj.id = newPageId; // é¡µé¢å¯ä¸æ è¯ åè®¸é¡µé¢éå¤æå¼\r\n                                linkobj.appType = AppType.Menu;\r\n                                linkobj.funcId = options.funcId;\r\n                                linkobj.FuncName = options.tabName || func.name;\r\n                                linkobj.url = funcInvok.invokingConfig.url;\r\n                                linkobj.reload = options.isReload;\r\n                                linkobj.su = su;\r\n                                linkobj.isNewTab = options.isNewTab;\r\n                                linkobj.formToken = formToken;\r\n\r\n                                if (staticParam) {\r\n                                    // dkyç¹æ®åºæ¯ï¼æå¼jqueryåçåè½\r\n                                    staticParam.forEach(\r\n                                        item => {\r\n                                            if (item.name === 'jquery') {\r\n                                                linkobj.isjquery = true;\r\n                                            }\r\n                                            if (item.name === 'mode') {\r\n                                                linkobj.mode = item.value;\r\n                                                linkobj.src += (item.value ? `&appMode=${item.value}&` : '');\r\n                                            }\r\n                                        }\r\n                                    );\r\n                                }\r\n                                // å¤§å¯¹è±¡å®ä½ä¼ åï¼éå¯¹è¢«æå¼é¡µé¢å»ºç«å¯ä¸ç®¡é\r\n                                this.getFeb().post(newPageId, options.entityParams);\r\n                                // this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n                                return linkobj;\r\n                            }\r\n                        ),\r\n                        switchMap(\r\n                            formLink => {\r\n                                return this.i18nSetting.getSetting$().pipe(\r\n                                    map(\r\n                                        () => formLink\r\n                                    )\r\n                                )\r\n                            }\r\n                        )\r\n                    );\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n\r\n    /**\r\n     * æµæ¹å¼æ£æ¥èåæå¼ç¶æ\r\n     */\r\n    private checkingBeforeOpen$(options: AppOptions): Observable<any> {\r\n        if (!options.funcId) {\r\n            window.alert('åæ°funcIdä¸è½ä¸ºç©ºï¼');\r\n            return of(null);\r\n        }\r\n\r\n        return this.getFuncEntity(options.funcId).pipe(map(\r\n            func => {\r\n                if (!func) {\r\n                    window.alert(`è¯·ç¡®è®¤æ¨æ¯å¦å·å¤æå¼èå(ID:${options.funcId})çæé`);\r\n                    return null;\r\n                }\r\n\r\n                const funcId = options.funcId;\r\n                const tabId = options.tabId;\r\n                const pageId = this.getPageId(funcId, tabId);\r\n                const linkobj = FrmUtil.getTabArray().find(i => i.id === pageId && i.appType === AppType.Menu);\r\n\r\n                if (linkobj) {\r\n                    linkobj.FuncName = options.tabName || linkobj.FuncName;\r\n                    linkobj.src = this.buildQueryStringByMap(linkobj.url, funcId, options.tabId, '', options.queryStringParams);\r\n                    linkobj.reload = options.isReload; // çé¢å·æ°ä¸æ¹session\r\n                    this.getFeb().post(pageId, options.entityParams);\r\n                    this.getFeb().post(EventUtil.FARRIS_APP_CLICK, linkobj);\r\n                }\r\n                return { func, linkobj };\r\n            }\r\n        ));\r\n    }\r\n\r\n    /**\r\n     * å³é­å\r\n     */\r\n    beforeCloseMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                this.appService.beforeCloseAppByOptions(options);\r\n                break;\r\n            case AppType.Menu:\r\n                this.beforeCloseFuncByOptions(options);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private beforeCloseFuncByOptions(options: AppOptions) {\r\n        const func = this.funcService.getCachedFunc(options.funcId);\r\n        const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n        const pageId = this.getPageId(options.funcId, options.tabId);\r\n\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(funcObkey);\r\n        if (!obs) {\r\n            this.closeFuncByOptions(options);\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: pageId,\r\n            appType: AppType.Menu,\r\n            funcId: options.funcId,\r\n            tabName: func && func.Name,\r\n            beforeCloseHandle: options.beforeCloseHandle\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * èåå³é­åäºä»¶è§¦å(æ  token)\r\n     */\r\n    beforeCloseFunc(funcId: string, tabId?: string) {\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        const funcObkey = EventUtil.funcObsToken(funcId, tabId);\r\n\r\n        const obs = EventUtil.getObserver(EventUtil.BEFORE_FUNC_CLOSE).get(funcObkey);\r\n        if (!obs) {\r\n            this.closeFunc(funcId, tabId);\r\n            return;\r\n        }\r\n\r\n        const eventArgs: FuncEventArgs = {\r\n            tabId: this.getPageId(funcId, tabId),\r\n            appType: AppType.Menu,\r\n            funcId,\r\n            tabName: func && func.Name\r\n        };\r\n        this.getFeb().post(EventUtil.BEFORE_FUNC_CLOSE, eventArgs);\r\n    }\r\n\r\n    /**\r\n     * ç´æ¥å³é­\r\n     *\r\n     */\r\n    closeMenu(options: AppOptions) {\r\n        switch (options.appType && options.appType.toLowerCase()) {\r\n            case AppType.App:\r\n                this.appService.closeAppByOptions(options).subscribe();\r\n                break;\r\n            case AppType.Menu:\r\n                this.closeFuncByOptions(options);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private closeFuncByOptions(options: AppOptions) {\r\n        const pageId = this.getPageId(options.funcId, options.tabId);\r\n        EventUtil.clearObserver(EventUtil.funcObsToken(options.funcId, options.tabId));\r\n        EventUtil.clearEventPipe(pageId); // å½åé¡µé¢å¤§å¯¹è±¡ä¼ åä¼æå¯ä¸çç®¡é\r\n        const func = this.funcService.getCachedFunc(options.funcId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.Menu);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        options.token = options.token || obj.formToken;\r\n        let su = options.su;\r\n        if (obj) {\r\n            su = obj.su;\r\n            FrmUtil.removeTab(objIndex);\r\n            const eventArgs: FuncEventArgs = {\r\n                tabId: pageId,\r\n                appType: AppType.Menu,\r\n                funcId: options.funcId,\r\n                tabName: func && func.name\r\n            };\r\n            this.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        }\r\n        this.quitFunc(options, su)\r\n            .subscribe(() => { });\r\n    }\r\n\r\n    /**\r\n     * å³é­èåtabé¡µç­¾ï¼tabIdå¯ä»¥æå®ï¼é»è®¤ä¸ºfuncId\r\n     */\r\n    closeFunc(funcId: string, tabId?: string): any {\r\n        const self = this;\r\n        const pageId = this.getPageId(funcId, tabId);\r\n        EventUtil.clearObserver(EventUtil.funcObsToken(funcId, tabId));\r\n        EventUtil.clearEventPipe(pageId); // å½åé¡µé¢å¤§å¯¹è±¡ä¼ åä¼æå¯ä¸çç®¡é\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        const objIndex = FrmUtil.getTabArray().findIndex(i => i.id === pageId && i.appType === AppType.Menu);\r\n        const obj = FrmUtil.getTabArray()[objIndex];\r\n        const formToken = obj.formToken;\r\n        if (obj) {\r\n            FrmUtil.removeTab(objIndex);\r\n            const eventArgs: FuncEventArgs = {\r\n                tabId: pageId,\r\n                appType: AppType.Menu,\r\n                funcId,\r\n                tabName: func && func.name\r\n            };\r\n            self.getFeb().post(EventUtil.FUNC_CLOSED, eventArgs);\r\n        }\r\n\r\n        const options: AppOptions = {\r\n            tabId,\r\n            funcId,\r\n            appId: '',\r\n            appEntrance: '',\r\n            appType: AppType.Menu,\r\n            token: formToken,\r\n        };\r\n        this.quitFunc(options, obj.su)\r\n            .subscribe(() => { }\r\n            );\r\n        return of(true);\r\n    }\r\n\r\n\r\n    /**\r\n     * è·åèåçè°ç¨ä¿¡æ¯\r\n     */\r\n    getFuncInvok(funcId: string): Observable<any> {\r\n        const invoks = this.getInvokCache();\r\n        const funcInvok = invoks.find(f => f.id === funcId);\r\n        if (!funcInvok) {\r\n            return this.getInvokConfig(funcId).pipe(\r\n                map(v => {\r\n                    if (!v) {\r\n                        return null;\r\n                    }\r\n                    invoks.push(v);\r\n                    this.funcService.cacheAllFuncInvoks(invoks);\r\n                    return v;\r\n                })\r\n            );\r\n        }\r\n        return of(funcInvok);\r\n    }\r\n\r\n    /**\r\n     * è·åèåå®ä½\r\n     */\r\n    getFuncEntity(funcId: string): Observable<any> {\r\n        const func = this.funcService.getCachedFunc(funcId);\r\n        if (!func) {\r\n            const url = `/api/runtime/sys/v1.0/functions/${funcId}`;\r\n            return this.http.request('Get', url, FrmUtil.setHeader(null, {}))\r\n                .pipe(\r\n                    map(v => {\r\n                        if (!v || !v[0]) {\r\n                            return null;\r\n                        }\r\n                        const allFuncs = this.funcService.getAllCachedFuncs() as any[];\r\n                        allFuncs.push(v[0]);\r\n                        this.funcService.cacheAllFuncs(allFuncs);\r\n                        return v[0];\r\n                    })\r\n                );\r\n        }\r\n        return of(func);\r\n    }\r\n\r\n    /**\r\n     * è·åèåé¢ç½®åæ°\r\n     */\r\n    getPresetParams(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(funcInvok => {\r\n                const paramInfo = funcInvok.invokingConfig.staticParams;\r\n                const entityParamInfo = funcInvok.invokingConfig.entityParams;\r\n                const staticParam = paramInfo ? JSON.parse(paramInfo) : [];\r\n                const entityParam = entityParamInfo ? JSON.parse(entityParamInfo) : [];\r\n                return this.mergeParams(staticParam, entityParam);\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åèåçéæåæ°\r\n     */\r\n    getStaticParam(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(v => {\r\n                if (v.invokingConfig.staticParams) {\r\n                    return JSON.parse(v.invokingConfig.staticParams);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è·åè¡¨åçå®ä½åæ°\r\n     */\r\n    getEntityParam(tabId: string, handler: (value: any) => void, isSubonce: boolean = true): any {\r\n        if (isSubonce) {\r\n            this.getFeb().once(tabId, handler);\r\n        }\r\n        this.getFeb().on(tabId, handler);\r\n    }\r\n\r\n    entityParamUnsub(funcId: string) {\r\n        this.getFeb().unSubscribe(funcId);\r\n    }\r\n\r\n    /**\r\n     * è·åæèåçå®ä½åæ°ç»æ\r\n     */\r\n    getEntityParamStructure(funcId: string): Observable<any> {\r\n        return this.getFuncInvok(funcId).pipe(\r\n            map(v => {\r\n                if (v.invokingConfig.entityParams) {\r\n                    return JSON.parse(v.invokingConfig.entityParams);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private mergeParams(staticParam: any[], entityParam: any[]): Map<any, any> {\r\n        const paraMap = new Map<any, any>();\r\n        if (entityParam) {\r\n            entityParam.forEach((item: any) => {\r\n                paraMap.set(item.name, item.value);\r\n            });\r\n        }\r\n        if (staticParam) {\r\n            // funcä¸å¯¹appåæ°å¤ç¨\r\n            staticParam.forEach((item: any) => {\r\n                paraMap.set(item.name, item.value);\r\n            });\r\n        }\r\n        return paraMap;\r\n    }\r\n\r\n\r\n    private getInvokConfig(funcId: string) {\r\n        const url = `/api/runtime/sys/v1.0/functions/funcInvok/${funcId}`;\r\n        return this.http.request('Get', url, FrmUtil.setHeader(null, {}));\r\n    }\r\n\r\n\r\n    private getInvokCache() {\r\n        return this.funcService.getAllCachedFuncInvoks();\r\n    }\r\n\r\n    /**\r\n     * è·åæ¡æ¶eventbus\r\n     */\r\n    private getFeb(): FrmEventBus {\r\n        return EventUtil.getFrmEvent();\r\n    }\r\n\r\n    /**\r\n     * æé åè½åsession\r\n     * (1912 funcSessionç§»é¤åï¼æ¥å£ä¸åæä¾)\r\n     */\r\n    public buildFuncSession(funcId: string, su?: string): Observable<any> {\r\n        const self = this;\r\n        const userSession = this.sessionSvc.getUserSessionId();\r\n        const body = {\r\n            token: userSession,\r\n            funcId,\r\n            action: 'enter'\r\n        };\r\n\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(userSession, { body })).pipe(\r\n            map((v: any) => {\r\n                const ss: string = v.sessionId;\r\n                if (ss !== undefined && ss !== null && ss.length > 0) {\r\n                    self.sessionSvc.setFuncSessionId(funcId, ss);\r\n                }\r\n                return ss;\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * è¿å¥åè½ï¼è§¦åæå¡ç«¯é»è¾\r\n     * ç§»é¤funcSession\r\n     * è¿åå¬å±åétoken\r\n     */\r\n    private enterFunc(enterParam: FuncStateParam, su: string): Observable<any> {\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body: enterParam }))\r\n            .pipe(\r\n                map((v: any) => {\r\n                    return v.token || v.sessionId;\r\n                })\r\n            );\r\n    }\r\n\r\n    /**\r\n     * éåºåè½ï¼å¦æå­å¨bizContextï¼åç§»é¤\r\n     */\r\n    private quitFunc(options: AppOptions, su: string): Observable<any> {\r\n        const body = {\r\n            token: options.token,\r\n            tabId: options.tabId,\r\n            funcId: options.funcId,\r\n            action: 'quit'\r\n        };\r\n        const bizContextUrl = this.FUNCSTATUS_PATH + (!su ? '' : `?su=${su}`);\r\n        return this.http.request('Post', bizContextUrl, FrmUtil.setHeader(null, { body }));\r\n    }\r\n\r\n    /**\r\n     * è·åå½ååºç¨æå±su\r\n     */\r\n    private getSu(url: string): string {\r\n        const uriArr = url.split('/');\r\n        return uriArr.length > 3 ? uriArr[3] : '';\r\n    }\r\n\r\n    /**\r\n     * iframe urlæ¼æ¥ querystring åæ°\r\n     */\r\n    private buildQueryString(routurl: string, funcId: string, params): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?funcId=${funcId}`;\r\n        } else {\r\n            routurl += `&funcId=${funcId}`;\r\n        }\r\n        if (params) {\r\n            Object.keys(params).forEach((propName: string, index) => {\r\n                routurl += `${index === 0 ? '' : '&'}${propName}=${params[propName]}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n    /**\r\n     * url æ¼æ¥mapæ ¼å¼çåæ°\r\n     */\r\n    private buildQueryStringByMap(routurl: string, funcId: string, tabId: string, token: string, params: Map<string, string>): string {\r\n        if (routurl.indexOf('?') < 0) {\r\n            routurl += `?funcId=${funcId}`;\r\n        } else {\r\n            routurl += `&funcId=${funcId}`;\r\n        }\r\n\r\n        routurl += `&appType=${AppType.Menu}`;\r\n        routurl += `&tabId=${this.getPageId(funcId, tabId)}`;\r\n        routurl += !token ? '' : `&cvft=${token}`;\r\n        if (params) {\r\n            params.forEach((value, key) => {\r\n                routurl += !key ? '' : `&${key}=${value}`;\r\n            });\r\n        }\r\n        return routurl;\r\n    }\r\n\r\n    /**\r\n     * è·åå½åèåé¡µé¢çå¯ä¸æ è¯\r\n     */\r\n    private getPageId(funcId: string, tabId: string): string {\r\n        return tabId || funcId;\r\n    }\r\n\r\n    /**\r\n     * é¡µé¢ç¬¬ä¸æ¬¡è¢«æå¼æ¶ï¼çæå¯ä¸æ è¯\r\n     */\r\n    private newPageId(funcId: string, tabId: string): string {\r\n        return tabId ? `${funcId}_${tabId}` : funcId;\r\n    }\r\n\r\n    public eventFire(token: string, args: any) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(token, args);\r\n    }\r\n\r\n    public eventListner(token: string, handler: (value: any) => void, options?: AppOptions) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        // èåçå¬èå¿é¡»è¦å£°æèªå·±çèº«ä»½ï¼æ¹ä¾¿æ¡æ¶ç®¡ç\r\n        if (options && options.appType) {\r\n            switch (options.appType.toLowerCase()) {\r\n                case AppType.App:\r\n                    const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n                    feb.onWithObkey(token, appObkey, handler);\r\n                    return;\r\n                case AppType.Menu:\r\n                    const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n                    feb.onWithObkey(token, funcObkey, handler);\r\n                    return;\r\n                default: break;\r\n            }\r\n        }\r\n        feb.on(token, handler);\r\n    }\r\n\r\n    /** åå»ºçå¬è®¢é, ç»´æ¤ä¸ä¸ªçå¬èåè¡¨ï¼éå¯¹èåè§¦åäºä»¶ */\r\n    public eventListner4Func(token: string, funcId: string, handler: (value: any) => void) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        feb.onWithObkey(token, funcId, handler);\r\n    }\r\n\r\n    /** åå»ºçå¬è®¢é, ç»´æ¤ä¸ä¸ªçå¬èåè¡¨ï¼éå¯¹åºç¨è§¦åäºä»¶ */\r\n    public eventListner4App(token: string, appId: string, appEntrance: string, handler: (value: any) => void) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        const appObkey = EventUtil.appObsToken(appId, appEntrance);\r\n        feb.onWithObkey(token, appObkey, handler);\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EventUtil, AppType, AppOptions } from '../../shared/frm-util';\r\nimport { FrmEventBus } from '../../eventbus/frm-evenbus';\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@Injectable()\r\nexport class FrameworkEventService {\r\n\r\n    public FarrisApps = EventUtil.FARRIS_APPS;\r\n    public FarrisAppClick = EventUtil.FARRIS_APP_CLICK;\r\n    public AllGspFuncs = EventUtil.ALL_GSP_FUNCS;\r\n    public BeforeFuncClose = EventUtil.BEFORE_FUNC_CLOSE;\r\n    public FuncClosed = EventUtil.FUNC_CLOSED;\r\n    public FuncSwitch = EventUtil.FUNC_SWITCH;\r\n    public AfterFrameLoad = EventUtil.AFTER_FRAME_LOAD;\r\n\r\n    constructor(private feb: FrmEventBus) {\r\n        const eventBusEntity = EventUtil.getFrmEvent();\r\n        if (!eventBusEntity) {\r\n            EventUtil.setFrmEvent(this.feb || new FrmEventBus());\r\n            this.eventInitial();\r\n        }\r\n    }\r\n\r\n\r\n    public eventFire(token: string, args: any) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(token, args);\r\n    }\r\n\r\n    public eventListner(token: string, handler: (value: any) => void, options?: AppOptions) {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.on !== 'function') {\r\n            return;\r\n        }\r\n        // èåçå¬èå¿é¡»è¦å£°æèªå·±çèº«ä»½ï¼æ¹ä¾¿æ¡æ¶ç®¡ç\r\n        if (options && options.appType) {\r\n            switch (options.appType.toLowerCase()) {\r\n                case AppType.App:\r\n                    const appObkey = EventUtil.appObsToken(options.appId, options.appEntrance, options.tabId);\r\n                    feb.onWithObkey(token, appObkey, handler);\r\n                    return;\r\n                case AppType.Menu:\r\n                    const funcObkey = EventUtil.funcObsToken(options.funcId, options.tabId);\r\n                    feb.onWithObkey(token, funcObkey, handler);\r\n                    return;\r\n                default: break;\r\n            }\r\n        }\r\n        feb.on(token, handler);\r\n    }\r\n\r\n    private eventInitial() {\r\n        const feb = EventUtil.getFrmEvent();\r\n        if (!feb || typeof feb.post !== 'function') {\r\n            return;\r\n        }\r\n        feb.post(this.FarrisApps, null);\r\n        feb.post(this.FarrisAppClick, null);\r\n        feb.post(this.AllGspFuncs, null);\r\n        feb.initialPipe(this.FuncClosed, new Subject<any>());\r\n        feb.initialPipe(this.FuncSwitch, new Subject<any>());\r\n        feb.initialPipe(this.BeforeFuncClose, new Subject<any>());\r\n        feb.initialPipe(this.AfterFrameLoad, new Subject<any>());\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { FrameworkVariableService } from '../frmVariableService/framework-variable.service';\r\nimport { EventBusPipe } from '../../eventbus/frm-eventpipe';\r\nimport { Subject } from 'rxjs';\r\nimport { FrmSubjectOptions } from '../../shared/frm-util';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class BroadcastingStationService {\r\n\r\n    private subjectMaps: Map<string, EventBusPipe>;\r\n    private frmVariableService: FrameworkVariableService;\r\n    private frmSubject = 'frmBroadcast-subjects';\r\n\r\n    constructor() {\r\n        this.frmVariableService = new FrameworkVariableService();\r\n        this.subjectMaps = this.frmVariableService.getFrmVariableByKey(this.frmSubject) || new Map<string, EventBusPipe>();\r\n    }\r\n\r\n    /**\r\n     * æ³¨åä¸»é¢ï¼å¹¶è·åå½åä¸»é¢å¯ä¸æ è¯token\r\n     * @param subjectCode ä¸»é¢ç¼ç ï¼å»ºè®®ææç¡®å«ä¹ï¼æ¹ä¾¿ç¡®è®¤å½åä¸»é¢çèè´£\r\n     * codeä¸æ¯å¯ä¸æ è¯ï¼å³ä½¿ç¸åcodeæ¯æ¬¡æ³¨åé½ä¼çæä¸ä¸ªæ°çä¸»é¢ï¼è¿åå¼tokenæ¯å¯ä¸æ è¯\r\n     * @param options ä¸»é¢æ³¨åæä½ï¼å¯ä»¥ç´æ¥å¯¹äºèå æ åºç¨æ³¨åä¸»é¢\r\n     * @param customSub èªå®ä¹ä¸»é¢ï¼å¦æä¸ºnullæèä¸ä¼ ï¼é»è®¤ä¸ºSubject\r\n     */\r\n    public subjectRegister(subjectCode: string, options: FrmSubjectOptions, customSub?: Subject<any>): string {\r\n        if (!customSub) {\r\n            customSub = new Subject<any>();\r\n        }\r\n        let token: string;\r\n        if (options && options.funcId) {\r\n            token = options.funcId;\r\n        } else if (options && options.appId && options.appEntrance) {\r\n            token = `${options.appId}-${options.appEntrance}`;\r\n        } else {\r\n            token = this.createToken();\r\n        }\r\n        const pipe = new EventBusPipe(token, null, customSub);\r\n        pipe.pipeCode = subjectCode;\r\n        this.subjectMaps.set(token, pipe);\r\n        this.frmVariableService.frameworkVariableReg(this.frmSubject, this.subjectMaps);\r\n        return token;\r\n    }\r\n\r\n    /**\r\n     * æ³¨åä¸»é¢ï¼å¯ç´æ¥è·åä¸»é¢å®ä½ï¼\r\n     * æ¡æ¶ä¸æç®¡ç»´æ¤ï¼å¸¸ç¨äºééå±ä¸äºä»¶æ©å±æºå¶\r\n     * @param options æ³¨ååæ°\r\n     * @param customSub æ¯å¦èªå®ä¹ä¸»é¢\r\n     */\r\n    public customSubjectRegister(options: FrmSubjectOptions, customSub?: Subject<any>): Map<string, EventBusPipe> {\r\n        const subMap = new Map<string, EventBusPipe>();\r\n        if (!customSub) {\r\n            customSub = new Subject<any>();\r\n        }\r\n        let token: string;\r\n        if (options && options.customToken) {\r\n            token = options.customToken;\r\n        } else if (options && options.funcId) {\r\n            token = options.funcId;\r\n        } else if (options && options.appId && options.appEntrance) {\r\n            token = `${options.appId}-${options.appEntrance}`;\r\n        } else {\r\n            token = this.createToken();\r\n        }\r\n        const pipe = new EventBusPipe(token, null, customSub);\r\n        subMap.set(token, pipe);\r\n        return subMap;\r\n    }\r\n\r\n    /**\r\n     * å é¤ä¸»é¢\r\n     * @param subjectToken ä¸»é¢å¯ä¸æ è¯\r\n     */\r\n    public subjectRemove(subjectToken: string) {\r\n        this.subjectMaps.delete(subjectToken);\r\n        this.frmVariableService.frameworkVariableReg(this.frmSubject, this.subjectMaps);\r\n    }\r\n\r\n    /**\r\n     * éè¿æä¸ªä¸»é¢åéæ¶æ¯\r\n     * @param subjectToken ä¸»é¢å¯ä¸çtokenæ è¯\r\n     * @param info è¦åéçæ¶æ¯\r\n     */\r\n    public notify(subjectToken: string, info: any) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.post(info);\r\n    }\r\n\r\n    /**\r\n     * ä¸ºä¸»é¢æ·»å è§å¯èï¼å¹¶çå¬ä¸»é¢æ¶æ¯\r\n     * @param subjectToken ä¸»é¢token\r\n     * @param observerToken å½åçå¬ä¸»é¢çè§å¯èå¯ä¸æ è¯token\r\n     * @param handler è§å¯èçå¬å°ä¸»é¢æ¶æ¯æ¶è¦æ§è¡çå¨ä½\r\n     */\r\n    public response(subjectToken: string, observerToken: string, handler: (value: any) => void) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.subscribeWithObkey(observerToken, handler);\r\n    }\r\n\r\n    /**\r\n     * è§å¯èåæ¶å¯¹ä¸»é¢çè®¢é\r\n     * @param subjectToken ä¸»é¢å¯ä¸æ è¯\r\n     * @param observerToken è§å¯èå¯ä¸æ è¯\r\n     */\r\n    public responseUnSubscribe(subjectToken: string, observerToken: string) {\r\n        const sub = this.getSubject(subjectToken);\r\n        if (!sub) {\r\n            return;\r\n        }\r\n        sub.unSubscribeWithObkey(observerToken);\r\n    }\r\n\r\n    private getSubject(subjectToken: string): EventBusPipe {\r\n        return this.subjectMaps.get(subjectToken);\r\n    }\r\n\r\n    /**\r\n     * åå»ºå¯ä¸token\r\n     */\r\n    private createToken() {\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        const S4 = function () {\r\n            // tslint:disable-next-line:no-bitwise\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        };\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, Resolve, RouterStateSnapshot,\r\n         ActivatedRouteSnapshot , ParamMap} from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\nimport { FrmEventBus } from '../eventbus/frm-evenbus';\r\n\r\n\r\n@Injectable()\r\nexport class FunctionResolver implements Resolve<any> {\r\n\r\n  constructor( private router: Router, private feb: FrmEventBus) {}\r\n\r\n  editvalue: any;\r\n\r\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<any> {\r\n    const id = route.paramMap.get('funcid');\r\n    this.editvalue = null;\r\n    this.feb.on('frmopenfunc', (value: any) => {\r\n          this.editvalue = value;\r\n    });\r\n    return of(this.editvalue);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { LoadingComponent } from './loading.component';\r\nimport { LoadingService } from './loading.service';\r\nimport { LoadingConfig, LOADING_DEFAULT_CONFIG, loaddingDefaultConfig } from './loading.config';\r\n\r\n// export function loadingFactory(app: ApplicationRef, cfr: ComponentFactoryResolver, injector: Injector) {\r\n//     return new LoadingService(app, cfr, injector);\r\n// }\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        LoadingComponent\r\n    ],\r\n    entryComponents: [\r\n        LoadingComponent\r\n    ]\r\n})\r\nexport class LoadingModule {\r\n    static forRoot(config?: LoadingConfig): ModuleWithProviders {\r\n        // const _config = config ? Object.assign({}, loaddingDefaultConfig, config) : loaddingDefaultConfig;\r\n\r\n        return {\r\n            ngModule: LoadingModule,\r\n            providers: [\r\n                { provide: LOADING_DEFAULT_CONFIG, useValue: config || loaddingDefaultConfig},\r\n                LoadingService\r\n                // { provide: LoadingService, useFactory: loadingFactory, deps: [ApplicationRef, ComponentFactoryResolver, Injector] }\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}
