{"version":3,"file":"gsp-sys-sysmgr-ui.js.map","sources":["ng://@gsp-sys/sysmgr-ui/lib/sys-common/sys-front.util.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/service/sys-func-operation.service.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/sys-func-operation/sys-func-operation.component.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/service/biz-object.service.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/en-us/navigation.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/en-us/help.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/en-us/index.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-cn/navigiation.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-cn/help.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-cn/index.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-ct/navigiation.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-ct/help.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/zh-ct/index.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/locales/index.ts","ng://@gsp-sys/sysmgr-ui/lib/locale/sys-locale.service.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/sys-farris-func-operation/sys-farris-func-operation.component.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/sys-func-op-help/sys-func-op-help.component.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/biz-object/biz-object.component.ts","ng://@gsp-sys/sysmgr-ui/lib/func-op-help/func-op.help.module.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/service/sys-help.service.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/service/sys-exception.service.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/group-nav/group.service.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/group-nav/group-nav.component.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/help-meta/sys-help-meta.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/service/sys-farris-lookup.service.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/sys-farris-lookup/sys-farris-lookup.component.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/service/help-filter-map.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/sys-farris-tree-help/sys-farris-tree-help.component.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/sys-manager-ui.module.ts","ng://@gsp-sys/sysmgr-ui/lib/sys-manager-ui/filter/auth-op.ts"],"sourcesContent":["export class SysFrontUtil {\r\n    /**\r\n     * sessionId,è°ç¨èä¼ éè¿æ¥\r\n     */\r\n    sessionId: string;\r\n    /** åè½æä½ */\r\n    get operationApi (): string {\r\n        return '/api/runtime/sys/v1.0/funcOperations';\r\n    }\r\n    /** ä¸å¡å¯¹è±¡ */\r\n    get bizObjectApi (): string {\r\n        return '/api/runtime/sys/v1.0/business-objects';\r\n    }\r\n    /**\r\n     * Httpå¤´ä¿¡æ¯\r\n     */\r\n    get httpHeader (): any {\r\n        const options: any = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n//                SessionId: this.sessionId\r\n            },\r\n            responseType: 'json'\r\n        };\r\n        return options;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { SysFrontUtil } from '../../sys-common/sys-front.util';\r\n\r\n@Injectable()\r\nexport class SysFuncOperationService {\r\n    constructor(\r\n        private sysUtil: SysFrontUtil,\r\n        private rest: HttpClient) {\r\n    }\r\n\r\n    /**\r\n     * è·ååè½æä½åè¡¨\r\n     */\r\n    getFuncOperations(): Observable<any> {\r\n        const url = this.sysUtil.operationApi + '/all';\r\n        return this.rest.get(url, this.sysUtil.httpHeader);\r\n    }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, ViewChild, TemplateRef, Input } from '@angular/core';\r\nimport { SelectableSettings } from '@progress/kendo-angular-grid';\r\nimport { SysFuncOperationService } from '../service/sys-func-operation.service';\r\n\r\n/**\r\n * ç³»ç»ç®¡çï¼åè½æä½å·¦æ æãå³åè¡¨å±ç¤º\r\n */\r\n@Component({\r\n    selector: 'app-sys-func-operation',\r\n    templateUrl: './sys-func-operation.component.html',\r\n    styleUrls: ['./sys-func-operation.component.css']\r\n})\r\nexport class SysFuncOperationComponent implements OnInit {\r\n\r\n    /**ä¸å¡å¯¹è±¡,è´è´£ä¼ é */\r\n    @Input() bizObjectId: string;\r\n    /**éæ©æ¨¡å¼ */\r\n    @Input()\r\n    gridSelectMode: 'single' | 'multiple';\r\n    /**sessionId */\r\n    @Input()\r\n    sessionId: string;\r\n    /**æ¯å¦åªæ¾ç¤ºåç» */\r\n    @Input()\r\n    onlyShowGroup: boolean = false;\r\n    /**åç»è½å¦è¢«éæ© */\r\n    @Input()\r\n    isGroupCanSelected: boolean;\r\n    /**\r\n     * ç¡®è®¤äºä»¶\r\n     */\r\n    @Output()\r\n    afterConfirm = new EventEmitter<object[]>();\r\n    /**\r\n     * å³é­äºä»¶\r\n     */\r\n    @Output()\r\n    afterCancle = new EventEmitter<any>();\r\n    // æ³¨å¥å°å¸®å©çç¡®è®¤ååæ¶æé®\r\n    @ViewChild('btnOkAndCancle')\r\n    btnOkAndCancleRef: TemplateRef<any>;\r\n    /**\r\n     * åè½æä½å¨éæ°æ®\r\n     */\r\n    data: object[];\r\n    /**\r\n     * å½åUIæ¾ç¤ºå¨è½æä½åè¡¨æ°æ®\r\n     */\r\n    gridData: object[];\r\n    /**\r\n     * å½åéä¸­æ°æ®\r\n     */\r\n    curSelectedKeys: string[] = [];\r\n    selectableSettings: SelectableSettings;\r\n    title = 'åè½æä½å¸®å©';\r\n    constructor (\r\n        private funcOpService: SysFuncOperationService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit () {}\r\n\r\n   loadData () {\r\n        this.selectableSettings = {\r\n            checkboxOnly: true,\r\n            // é»è®¤åé\r\n            mode: !this.gridSelectMode ? 'single' : this.gridSelectMode,\r\n            enabled: true\r\n        };\r\n        this.funcOpService.getFuncOperations().subscribe(res => {\r\n            this.data = [];\r\n            const funcList: any[] = res;\r\n            if (this.onlyShowGroup) {\r\n                this.data = funcList.filter(item => item.type == 0);\r\n            } else {\r\n                this.data = funcList;\r\n            }\r\n            // funcList.forEach(item => {\r\n            //     this.data.push(item);\r\n            //     // å¦æææç»èç¹\r\n            //     if (this.onlyShowGroup === false && item['children'] !== null && item['children'].length > 0) {\r\n            //         item['children'].forEach(child => this.data.push(child));\r\n            //     }\r\n            // });\r\n            this.gridData = [];\r\n            // å¤å¶ä¸ä»½\r\n            this.gridData = this.data.concat();\r\n        },\r\n            error => {\r\n                console.log('è·ååè½æä½å¯¹è±¡åè¡¨å¤±è´¥');\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * æç´¢\r\n     * @param filterValue æ¥è¯¢æ¡ä»¶\r\n     */\r\n    searchData (filterValue: string) {\r\n        // æµè¯\r\n        if (filterValue === null || filterValue === '') {\r\n            // å¨éçæ°æ®\r\n            this.gridData = this.data.concat();\r\n            return;\r\n        }\r\n        const filter = filterValue.toLowerCase();\r\n        // æç´¢å°ä¸çº§æ¶\r\n        this.gridData = this.data.filter(item =>\r\n            item['code'].toLowerCase().includes(filter) ||\r\n            item['name'].toLowerCase().includes(filter) ||\r\n            this.getFuncGroup(item).toLowerCase().includes(filter));\r\n    }\r\n\r\n    /**\r\n     * ä¸å¡å¯¹è±¡ååå\r\n     * @param arg ä¸å¡å¯¹è±¡åæ°\r\n     */\r\n    bizObjectChanged (arg: any) {\r\n        if (!this.data || this.data.length === 0) {\r\n            return;\r\n        }\r\n        const busId = arg;\r\n        // æ ¹æ®ä¸å¡å¯¹è±¡è¿æ»¤\r\n        this.gridData = this.data.filter(item =>\r\n            item['businessId'] === busId);\r\n    }\r\n\r\n\r\n    /**\r\n     * è·ååè½åç»\r\n     */\r\n    getFuncGroup (funcOpObj: any): string {\r\n        // è·åç¶èç¹\r\n        const parentId = funcOpObj['parentId'];\r\n        if (parentId !== null && parentId !== undefined && parentId !== '') {\r\n            const parentObj = this.data.filter(item => item['id'] === parentId);\r\n            if (parentObj !== null && parentObj.length > 0) {\r\n                return parentObj[0]['name'];\r\n            }\r\n        } else {\r\n            return 'æ ';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è·åéä¸­æ°æ®\r\n     */\r\n    getSelectedObject (): any {\r\n        const result = this.data.filter(item =>\r\n            this.curSelectedKeys.findIndex(select => select === item['id']) >= 0);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * ç¡®è®¤\r\n     */\r\n    confirm () {\r\n        const result = this.getSelectedObject();\r\n        this.afterConfirm.next(result);\r\n        // åæ¶-ç®çæ¯å¨è¿éè®©æ¨¡ææ¡æ¶å¤±\r\n        this.cancle();\r\n    }\r\n    /**\r\n     * åæ¶\r\n     */\r\n    cancle () {\r\n        this.afterCancle.next();\r\n    }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { SysFrontUtil } from '../../sys-common/sys-front.util';\r\n\r\n@Injectable()\r\nexport class BizObjectService {\r\n\r\n    constructor (\r\n        private rest: HttpClient,\r\n        private sysUtil: SysFrontUtil) {\r\n    }\r\n\r\n    /**\r\n     * è·åä¸å¡å¯¹è±¡åè¡¨\r\n     */\r\n    getBizObjects(): Observable<any> {\r\n        const url = this.sysUtil.bizObjectApi;\r\n        return this.rest.get(url, this.sysUtil.httpHeader);\r\n    }\r\n}\r\n","export const NAVI_LOCALE_EN_US = {\r\n    rootNodeCode: 'ALL',\r\n    rootNodeTitle: 'all data',\r\n    codeField: 'Code',\r\n    nameField: 'Name',\r\n    allColumnsTitle:'All columns',\r\n    searchNullData: 'No data to find!'\r\n};\r\n","export const HELP_LOCALE_EN_US = {\r\n    userTitle: 'Users',\r\n    positionTitle: 'Positions',\r\n    roleTitle: 'Roles',\r\n    userOrgTitle: 'Organizations',\r\n    userGroupTitle: 'User Groups',\r\n    positionGroupTitle: 'Position Groups',\r\n    roleGroupTitle: 'Role Groups',\r\n    codeField: 'Code',\r\n    nameField: 'Name',\r\n    orderField: 'Order',\r\n    orgName: 'Org Info',\r\n    orgNamePathField: 'Company Info',\r\n    operationTitle: 'Function Operation',\r\n    busTitle: 'Business Object',\r\n    opGroupField: 'Operation Group'\r\n};\r\n","import { NAVI_LOCALE_EN_US } from './navigation';\r\nimport { HELP_LOCALE_EN_US } from './help';\r\n\r\nexport const EN_US = {\r\n    navi: NAVI_LOCALE_EN_US,\r\n    help: HELP_LOCALE_EN_US\r\n};\r\n","export const NAVI_LOCALE_ZHCHS = {\r\n    rootNodeCode: 'ALL',\r\n    rootNodeTitle: 'ææ',\r\n    codeField: 'ç¼å·',\r\n    nameField: 'åç§°',\r\n    allColumnsTitle:'ææå',\r\n    searchNullData: 'æ²¡æè¦æ¥æ¾çæ°æ®ï¼'\r\n};\r\n","export const HELP_LOCALE_ZHCHS = {\r\n    userTitle: 'ç¨æ·',\r\n    positionTitle: 'å²ä½',\r\n    roleTitle: 'åè½ç»',\r\n    userOrgTitle: 'ç»ç»',\r\n    userGroupTitle: 'ç¨æ·åç»',\r\n    positionGroupTitle: 'å²ä½åç»',\r\n    roleGroupTitle: 'åè½ç»åç»',\r\n    codeField: 'ç¼å·',\r\n    nameField: 'åç§°',\r\n    orderField: 'æåºå·',\r\n    orgName: 'é¶å±ç»ç»',\r\n    orgNamePathField: 'é¶å±åä½',\r\n    operationTitle: 'åè½æä½',\r\n    busTitle: 'ä¸å¡å¯¹è±¡',\r\n    opGroupField: 'åè½åç»'\r\n\r\n};\r\n","import { NAVI_LOCALE_ZHCHS } from './navigiation';\r\nimport { HELP_LOCALE_ZHCHS } from './help';\r\n\r\nexport const ZH_CHS = {\r\n    navi: NAVI_LOCALE_ZHCHS,\r\n    help: HELP_LOCALE_ZHCHS\r\n};\r\n","export const NAVI_LOCALE_ZHCHT = {\r\n    rootNodeCode: 'ALL',\r\n    rootNodeTitle: 'ææ',\r\n    codeField: 'ç·¨è',\r\n    nameField: 'åç¨±',\r\n    allColumnsTitle:'ææå',\r\n    searchNullData: 'æ²æè¦æ¥æ¾çæ¸æï¼'\r\n};\r\n","export const HELP_LOCALE_ZHCHT = {\r\n    userTitle: 'ç¨æ¶',\r\n    positionTitle: 'å´ä½',\r\n    roleTitle: 'åè½çµ',\r\n    userOrgTitle: 'çµç¹',\r\n    userGroupTitle: 'ç¨æ¶åçµ',\r\n    positionGroupTitle: 'å´ä½åçµ',\r\n    roleGroupTitle: 'åè½çµåçµ',\r\n    codeField: 'ç·¨è',\r\n    nameField: 'åç¨±',\r\n    orderField: 'æåºè',\r\n    orgName: 'é¸å±¬çµç¹',\r\n    orgNamePathField: 'é¸å±¬å®ä½',\r\n    operationTitle: 'åè½æä½',\r\n    busTitle: 'æ¥­åå°è±¡',\r\n    opGroupField: 'åè½åçµ'\r\n\r\n\r\n};\r\n","import { NAVI_LOCALE_ZHCHT } from './navigiation';\r\nimport { HELP_LOCALE_ZHCHT } from './help';\r\n\r\nexport const ZH_CHT = {\r\n    navi: NAVI_LOCALE_ZHCHT,\r\n    help: HELP_LOCALE_ZHCHT\r\n};\r\n","import { EN_US } from './en-us';\r\nimport { ZH_CHS } from './zh-cn';\r\nimport { ZH_CHT } from './zh-ct';\r\n\r\n\r\nexport const SYS_LOCALES = {\r\n    'zh-CHS': ZH_CHS,\r\n    'zh-cn': ZH_CHS,\r\n    en: EN_US,\r\n    'zh-CHT':ZH_CHT\r\n};\r\n","import { Injectable, Inject, LOCALE_ID } from '@angular/core';\r\nimport { SYS_LOCALES } from './locales';\r\nimport { LanguageService } from '@ecp-caf/caf-common';\r\n\r\n@Injectable()\r\nexport class SysLocaleService {\r\n    langData: any;\r\n    constructor(\r\n        private lang:LanguageService\r\n    ) {\r\n        let localeId = 'zh-CHS';\r\n        if (lang) {\r\n            localeId = lang.getLanguageCode();\r\n        }\r\n        this.langData = SYS_LOCALES[localeId];\r\n        if (!this.langData) {\r\n            this.langData = SYS_LOCALES['zh-CHS'];\r\n        }\r\n        console.log(localeId);\r\n        console.log(this.langData);\r\n    }\r\n\r\n    getComponentOpt(comp: string): any {\r\n        return this.langData[comp];\r\n    }\r\n\r\n}\r\n","import { element } from 'protractor';\r\nimport { Component, OnInit, Output, EventEmitter, ViewChild, TemplateRef, Input, AfterContentInit, ElementRef, HostListener } from '@angular/core';\r\nimport { SysFuncOperationService } from '../service/sys-func-operation.service';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { BizObjectService } from '../service/biz-object.service';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { HELP_LOCALE_ZHCHS } from '../../locale/locales/zh-cn/help';\r\n\r\n/**\r\n * ç³»ç»ç®¡çï¼åè½æä½å·¦æ æãå³åè¡¨å±ç¤º\r\n */\r\n@Component({\r\n    selector: 'app-sys-farris-func-operation',\r\n    templateUrl: './sys-farris-func-operation.component.html',\r\n    styleUrls: ['./sys-farris-func-operation.component.css']\r\n})\r\nexport class SysFarrisFuncOperationComponent implements OnInit,AfterContentInit {\r\n\r\n    /** ä¸å¡å¯¹è±¡,è´è´£ä¼ é */\r\n    @Input() bizObjectId: string;\r\n    /** éæ©æ¨¡å¼ */\r\n    @Input()\r\n    gridSelectMode: 'single' | 'multiple';\r\n    multiSelect = false;\r\n    /** å·²ç»åºå¼ */\r\n    @Input()\r\n    sessionId: string;\r\n    /** æ¯å¦åªæ¾ç¤ºåç» */\r\n    @Input()\r\n    onlyShowGroup = false;\r\n    /** åç»è½å¦è¢«éæ© */\r\n    @Input()\r\n    isGroupCanSelected: boolean;\r\n    /**\r\n     * ç¡®è®¤äºä»¶\r\n     */\r\n    @Output()\r\n    afterConfirm = new EventEmitter<any[]>();\r\n    /**\r\n     * å³é­äºä»¶\r\n     */\r\n    @Output()\r\n    afterCancle = new EventEmitter<any>();\r\n    // æ³¨å¥å°å¸®å©çç¡®è®¤ååæ¶æé®\r\n    @ViewChild('btnOkAndCancle')\r\n    btnOkAndCancleRef: TemplateRef<any>;\r\n    /**\r\n     * åè½æä½å¨éæ°æ®\r\n     */\r\n    gridDataSrc: any[];\r\n    treeDataSrc: any[];\r\n    /**\r\n     * å½åUIæ¾ç¤ºå¨è½æä½åè¡¨æ°æ®\r\n     */\r\n    gridData: any[];\r\n    treeData: any[];\r\n    /**\r\n     * å½åéä¸­æ°æ®\r\n     */\r\n    curSelected:any[]=[];\r\n    curSelectedKeys: string[] = [];\r\n    gridColumns: any[] = [];\r\n    treeColumns: any[];\r\n    opSearchTxt = null;\r\n    i18nRes: any;\r\n    @ViewChild('operationGrid') operationGrid: DatagridComponent;\r\n    @ViewChild('farrisTreeParent') farrisTreeParent: ElementRef;\r\n    @ViewChild('tt') farrisTt: TreeTableComponent;\r\n    /**\r\n     * çæ§ææ½äºä»¶ï¼éç»ç»ç»TreeTable\r\n     * @param event äºä»¶åæ°\r\n     */\r\n     @HostListener('window:resize', [])\r\n     winResize() {\r\n         this.reSizeTreeTable();\r\n     }\r\n    constructor(\r\n        private funcOpService: SysFuncOperationService,\r\n        private bizObjectService: BizObjectService,\r\n        private localService: SysLocaleService\r\n    ) {\r\n    }\r\n    /** éç»Farris-TreeTableçå¤§å° */\r\n    public reSizeTreeTable (height: number = 0, width: number = 0) {\r\n        if (height === 0) {\r\n            height = this.farrisTreeParent.nativeElement.clientHeight;\r\n        }\r\n        if (width === 0) {\r\n            width = this.farrisTreeParent.nativeElement.clientWidth;\r\n        }\r\n        this.farrisTt.resize({ height, width });\r\n    }\r\n    ngOnInit() {\r\n        this.operationGrid.restService = null;\r\n        this.operationGrid.virtualized = true;\r\n        this.operationGrid.fitColumns = true;\r\n        this.operationGrid.fit = true;\r\n        if (this.localService) {\r\n            this.i18nRes = this.localService.getComponentOpt('help');\r\n        } else {\r\n            this.i18nRes = HELP_LOCALE_ZHCHS;\r\n        }\r\n        // åªæ¾ç¤ºåç»ï¼åè½èåä½¿ç¨\r\n        if (this.onlyShowGroup) {\r\n            this.gridColumns = [\r\n                { field: 'code', title: this.i18nRes.codeField, width: 120 },\r\n                { field: 'name', title: this.i18nRes.nameField, width: 150 }\r\n            ];\r\n            // ç§ææ¹æ³ï¼æ´æ°å\r\n            // this.operationGrid['columnsChanged']();\r\n        } else {\r\n            this.gridColumns = [\r\n                { field: 'code', title: this.i18nRes.codeField, width: 120 },\r\n                { field: 'name', title: this.i18nRes.nameField, width: 150 },\r\n                { field: 'parentId', title: this.i18nRes.opGroupField, formatter: this.funcGroupFormatter }\r\n            ];\r\n        }\r\n        this.treeColumns = [\r\n            { field: 'name', title: this.i18nRes.busTitle, width: 100 }\r\n        ];\r\n        // å¤é\r\n        if (this.gridSelectMode === 'multiple') {\r\n            this.multiSelect = true;\r\n        }\r\n        this.loadData();\r\n    }\r\n\r\n    /** é¡µé¢æ¸²æå®æå */\r\n    ngAfterContentInit (): void {\r\n        this.reSizeTreeTable();\r\n    }\r\n    \r\n    /**\r\n     * å è½½æ°æ®,TODO å è½½æ°æ®\r\n     */\r\n    loadData () {\r\n        // å è½½ä¸å¡å¯¹è±¡æ°æ®\r\n        this.bizObjectService.getBizObjects().subscribe((result: any) => {\r\n            this.treeDataSrc = result;\r\n            this.treeData = this.makeTree(result);\r\n        });\r\n        // å è½½åè½æä½æ°æ®\r\n        this.funcOpService.getFuncOperations().subscribe(lists => {\r\n            // åªæ¾ç¤ºåç»\r\n            if (this.onlyShowGroup) {\r\n                this.gridDataSrc = lists.filter(item => item.type == 0);\r\n            } else {\r\n                this.gridDataSrc = lists;\r\n            }\r\n            // ä¸å®è¦å»¶è¿ä¸æ®µæ¶é´\r\n            this.freshGridAndSelect(this.gridDataSrc.concat());\r\n        },\r\n            error => {\r\n                console.log('è·ååè½æä½å¯¹è±¡åè¡¨å¤±è´¥');\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * å·æ°åè¡¨æ¾ç¤º\r\n     */\r\n    private freshGridAndSelect (list: any[]) {\r\n        this.operationGrid.clearAll();\r\n        this.operationGrid.loadData(list);\r\n        list.forEach(item => {\r\n            if(this.curSelectedKeys.indexOf(item.id)>-1){\r\n                this.operationGrid.checkRow(item.id,false);\r\n                if(this.curSelected.indexOf(item)===-1){\r\n                    this.curSelected.push(item);\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * æé æ \r\n     */\r\n    private makeTree (data: any[]): TreeNode[] {\r\n        const root = data.filter(t => t.layer === 1).map(t => {\r\n            return {\r\n                data: t,\r\n                children: [],\r\n                expanded: false,\r\n                selectable: true\r\n            };\r\n        });\r\n        root.forEach(e => {\r\n            // æé ä¸çº§ï¼childrenï¼ç¶çº§çidä¿¡æ¯\r\n            e.children = this.makeChildrenByParentId(data, e.data.id);\r\n        });\r\n        // é»è®¤å±å¼ç¬¬ä¸ä¸ªèç¹\r\n        root[0].expanded = true;\r\n        return root;\r\n    }\r\n\r\n    /**\r\n     * ç¶èç¹æé æ \r\n     */\r\n    private makeChildrenByParentId (datas: any[], parentId: string): any[] {\r\n        const x = datas.filter(c => c.parentID === parentId).map(d => {\r\n            return {\r\n                data: d,\r\n                children: this.makeChildrenByParentId(datas, d.id),\r\n                expanded: false,\r\n                selectable: true\r\n            };\r\n        });\r\n        return x;\r\n    }\r\n    /**\r\n     * æç´¢æ¶çæµåè½¦\r\n     */\r\n    onKeyUp (arg: any) {\r\n        if (arg && arg.which === 13) {\r\n            this.searchData();\r\n        }\r\n    }\r\n    /**\r\n     * æç´¢\r\n     */\r\n    searchData () {\r\n        // æµè¯\r\n        if (!this.opSearchTxt) {\r\n            // å¨éçæ°æ®\r\n            this.gridData = this.gridDataSrc;\r\n            this.freshGridAndSelect(this.gridData);\r\n            return;\r\n        }\r\n        const content = this.opSearchTxt.trim();\r\n        if (!content) {\r\n            // å¨éçæ°æ®\r\n            this.gridData = this.gridDataSrc;\r\n            this.freshGridAndSelect(this.gridData);\r\n            return;\r\n        }\r\n        const filter = content.toLowerCase();\r\n        // å¦æåªæ¾ç¤ºåç»\r\n        if (this.onlyShowGroup) {\r\n            this.gridData = this.gridDataSrc.filter(item =>\r\n                item.code.toLowerCase().includes(filter) ||\r\n                item.name.toLowerCase().includes(filter));\r\n        } else {\r\n            // éè¦æ¾ç¤ºæä½çæ¶åï¼æç´¢å°ä¸çº§æ¶\r\n            this.gridData = this.gridDataSrc.filter(item =>\r\n                item.code.toLowerCase().includes(filter) ||\r\n                item.name.toLowerCase().includes(filter) ||\r\n                this.getFuncGroup(item).toLowerCase().includes(filter));\r\n        }\r\n        this.freshGridAndSelect(this.gridData);\r\n    }\r\n\r\n    /**\r\n     * æ ¼å¼å\r\n     */\r\n    funcGroupFormatter = (val, data) => {\r\n        return this.getFuncGroup(data);\r\n    }\r\n\r\n    /**\r\n     * è·ååè½åç»\r\n     */\r\n    getFuncGroup (funcOpObj: any): string {\r\n        // è·åç¶èç¹\r\n        const parentId = funcOpObj.parentId;\r\n        if (parentId) {\r\n            const parentObj = this.gridDataSrc.filter(item => item.id === parentId);\r\n            if (parentObj !== null && parentObj.length > 0) {\r\n                return parentObj[0].name;\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ä¸å¡å¯¹è±¡ååå\r\n     * @param arg ä¸å¡å¯¹è±¡åæ°\r\n     */\r\n    bizObjectChanged (arg: any) {\r\n        if (!this.gridDataSrc || this.gridDataSrc.length === 0) {\r\n            return;\r\n        }\r\n        const busId = arg.node.data.id;\r\n        // æ ¹æ®ä¸å¡å¯¹è±¡è¿æ»¤\r\n        const lists = this.gridDataSrc.filter(item =>\r\n            item.businessId === busId);\r\n        this.freshGridAndSelect(lists);\r\n    }\r\n    /**\r\n     * è·åéä¸­æ°æ®\r\n     */\r\n    getSelectedObject(): any[] {\r\n        const rows = this.operationGrid.checkeds.map(item => item.data);\r\n        return rows;\r\n    }\r\n    /**\r\n     * éä¸­å\r\n     */\r\n    checked(row) {\r\n        console.log(row);\r\n        if (row && row.id) {\r\n            // æ¯å¦å¤é\r\n            if (this.multiSelect) {\r\n                if(this.curSelectedKeys.indexOf(row.id)<0){\r\n                    this.curSelected.push(row.data);\r\n                    this.curSelectedKeys.push(row.id);\r\n                }\r\n\r\n            } else {\r\n                this.curSelected=[row.data];\r\n                this.curSelectedKeys = [row.id];\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * åæ¶éä¸­åè¡¨\r\n     */\r\n    unchecked(row) {\r\n        console.log(row);\r\n        if (row && row.id) {\r\n            if (this.multiSelect) {\r\n                const x = this.curSelectedKeys.findIndex(item => item === row.id);\r\n                if (x >= 0) {\r\n                    this.curSelectedKeys.splice(x, 1);\r\n                    this.curSelected.splice(x, 1)\r\n                }\r\n            } else {\r\n                this.curSelectedKeys = [];\r\n                this.curSelected = [];\r\n\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * ç¡®è®¤\r\n     */\r\n    confirm () {\r\n        // const result = this.getSelectedObject();\r\n        const result = this.curSelected;\r\n        console.log(result);\r\n        this.afterConfirm.next(result);\r\n        // åæ¶-ç®çæ¯å¨è¿éè®©æ¨¡ææ¡æ¶å¤±\r\n        this.cancle();\r\n    }\r\n    /**\r\n     * åæ¶\r\n     */\r\n    cancle () {\r\n        this.afterCancle.next();\r\n    }\r\n}\r\n\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    EventEmitter,\r\n    Input,\r\n    ComponentRef,\r\n    Output,\r\n    Injector,\r\n    ComponentFactoryResolver\r\n} from '@angular/core';\r\nimport { SysFuncOperationComponent } from '../sys-func-operation/sys-func-operation.component';\r\nimport { SysFrontUtil } from '../../sys-common/sys-front.util';\r\nimport { BsModalRef, BsModalService } from '@farris/ui-modal';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { SysFarrisFuncOperationComponent } from '../sys-farris-func-operation/sys-farris-func-operation.component';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { HELP_LOCALE_ZHCHS } from '../../locale/locales/zh-cn/help';\r\n\r\n@Component({\r\n    selector: 'app-sys-func-op-help',\r\n    templateUrl: './sys-func-op-help.component.html',\r\n    styleUrls: ['./sys-func-op-help.component.css']\r\n})\r\nexport class SysFuncOpHelpComponent implements OnInit {\r\n\r\n    /** æå±çä¸å¡å¯¹è±¡åç  */\r\n    @Input() bizObjectId: string;\r\n\r\n    /** æ¯å¦å¯ç¨æ°UI,å¯ç¨åæ§è½æå */\r\n    @Input() useNewUI = false;\r\n    /**\r\n     * åå§éä¸­çæéå¯¹è±¡åç \r\n     */\r\n    @Input()\r\n    initSelectKeys: string[] = [];\r\n    /** æ¯å¦åªæ¾ç¤ºåç» */\r\n    @Input()\r\n    onlyShowGroup = false;\r\n\r\n    @Input()\r\n    gridSelectMode: 'single' | 'multiple';\r\n\r\n    /** åç»è½å¦è¢«éæ© */\r\n    @Input()\r\n    isGroupCanSelected: boolean;\r\n    /**\r\n     * è¾åºäºä»¶\r\n     */\r\n    @Output()\r\n    afterHelpConfirm = new EventEmitter<object[]>();\r\n    // å¸®å©ä¸å¨æåå»ºçæ¾ç¤ºæ¨¡æ¿\r\n    private funcOpComp: ComponentRef<SysFuncOperationComponent>;\r\n    // æ¨¡ææ¡æå¡\r\n    private funcOpDialog: BsModalRef;\r\n    i18nRes: any;\r\n    constructor (\r\n        private modalService: BsModalService,\r\n        private injector: Injector,\r\n        private cfr: ComponentFactoryResolver,\r\n        private sysUtil: SysFrontUtil,\r\n        private localService: SysLocaleService\r\n    ) {\r\n        if (this.localService) {\r\n            this.i18nRes = this.localService.getComponentOpt('help');\r\n        } else {\r\n            this.i18nRes = HELP_LOCALE_ZHCHS;\r\n        }\r\n    }\r\n\r\n    ngOnInit () {\r\n    }\r\n\r\n    /**\r\n     * æ°UI\r\n     */\r\n    showNewHelp (sessionId) {\r\n        // è°ç¨å¸®å©æ¶å¿é¡»ä¼ ésessionId\r\n        this.sysUtil.sessionId = sessionId;\r\n        const compFactory = this.cfr.resolveComponentFactory(SysFarrisFuncOperationComponent);\r\n        const funcOpCompNew: ComponentRef<SysFarrisFuncOperationComponent> = compFactory.create(this.injector);\r\n        // è·ååè½æä½çå®ä¾ç»ä»¶\r\n        if (this.initSelectKeys != null && this.initSelectKeys.length > 0) {\r\n            this.initSelectKeys.forEach(key => funcOpCompNew.instance.curSelectedKeys.push(key));\r\n        }\r\n        // åå§åéæ©çä¸å¡æä½\r\n        if (this.bizObjectId && this.bizObjectId !== '') {\r\n            funcOpCompNew.instance.bizObjectId = this.bizObjectId;\r\n        }\r\n        if (this.gridSelectMode) {\r\n            funcOpCompNew.instance.gridSelectMode = this.gridSelectMode;\r\n        }\r\n        funcOpCompNew.instance.onlyShowGroup = this.onlyShowGroup;\r\n        funcOpCompNew.instance.isGroupCanSelected = this.isGroupCanSelected;\r\n        const modalConfig = {\r\n            title: this.i18nRes.operationTitle,\r\n            width: 850,\r\n            height: 550,\r\n            buttons: funcOpCompNew.instance.btnOkAndCancleRef,\r\n            showButtons: true,\r\n            showMaxButton: true,\r\n            resizable: true\r\n        };\r\n        // å¼¹åºå¸®å©æ¡\r\n        this.funcOpDialog = this.modalService.show(funcOpCompNew, modalConfig);\r\n        // åæ¶å\r\n        funcOpCompNew.instance.afterCancle.subscribe(\r\n            res => {\r\n                // æ¶å¤±æ¨¡ææ¡\r\n                this.funcOpDialog.close();\r\n            }\r\n        );\r\n        // ç¡®è®¤å\r\n        funcOpCompNew.instance.afterConfirm.subscribe(res => {\r\n            this.afterHelpConfirm.next(res);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * å¼¹åºFarrisæ¨¡ææ¡å¸®å©\r\n     */\r\n    showHelp (sessionId: string) {\r\n        if (this.useNewUI) {\r\n            this.showNewHelp(sessionId);\r\n            return;\r\n        }\r\n        // è°ç¨å¸®å©æ¶å¿é¡»ä¼ ésessionId\r\n        this.sysUtil.sessionId = sessionId;\r\n        const compFactory = this.cfr.resolveComponentFactory(SysFuncOperationComponent);\r\n        this.funcOpComp = compFactory.create(this.injector);\r\n        // è·ååè½æä½çå®ä¾ç»ä»¶\r\n        if (this.initSelectKeys != null && this.initSelectKeys.length > 0) {\r\n            this.initSelectKeys\r\n                .forEach(key => this.funcOpComp.instance.curSelectedKeys.push(key));\r\n        }\r\n        // åå§åéæ©çä¸å¡æä½\r\n        if (this.bizObjectId && this.bizObjectId !== '') {\r\n            this.funcOpComp.instance.bizObjectId = this.bizObjectId;\r\n        }\r\n        if (this.gridSelectMode) {\r\n            this.funcOpComp.instance.gridSelectMode = this.gridSelectMode;\r\n        }\r\n        this.funcOpComp.instance.onlyShowGroup = this.onlyShowGroup;\r\n        this.funcOpComp.instance.isGroupCanSelected = this.isGroupCanSelected;\r\n        // æ§çæ¬çéè¦å¨è¿éloaddata\r\n        this.funcOpComp.instance.loadData();\r\n        const modalConfig = {\r\n            title: 'åè½æä½å¸®å©',\r\n            width: 800,\r\n            height: 550,\r\n            buttons: this.funcOpComp.instance.btnOkAndCancleRef,\r\n            showButtons: true,\r\n            showMaxButton: false,\r\n            resizable: false\r\n        };\r\n        // å¼¹åºå¸®å©æ¡\r\n        this.funcOpDialog = this.modalService.show(this.funcOpComp, modalConfig);\r\n        // åæ¶å\r\n        this.funcOpComp.instance.afterCancle.subscribe(\r\n            res => {\r\n                // æ¶å¤±æ¨¡ææ¡\r\n                this.funcOpDialog.close();\r\n            }\r\n        );\r\n        // ç¡®è®¤å\r\n        this.funcOpComp.instance.afterConfirm.subscribe(res => {\r\n            this.afterHelpConfirm.next(res);\r\n        });\r\n    }\r\n}\r\n","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { BizObjectService } from '../service/biz-object.service';\r\n\r\n@Component({\r\n    selector: 'app-biz-object',\r\n    templateUrl: './biz-object.component.html',\r\n    styleUrls: ['./biz-object.component.css']\r\n})\r\nexport class BizObjectComponent implements OnInit {\r\n\r\n    @Input() bizObjectId: string;\r\n    public data: any[];\r\n    public selectKeys: string[] = [];\r\n    currentid: string;\r\n    /** ä¸å¡å¯¹è±¡ååå */\r\n    @Output()\r\n    bizObjectChanged: EventEmitter<string> = new EventEmitter<string>();\r\n    /** æ æ§ä»¶å±å¼çèç¹å¼ */\r\n    expandedKeys = [];\r\n\r\n    constructor (private bizObjectService: BizObjectService) {\r\n    }\r\n\r\n    ngOnInit () {\r\n        this.bizObjectService.getBizObjects().subscribe((result: any) => {\r\n            result.forEach(element => {\r\n                if (!element.parentID) {\r\n                    element.parentID = undefined;\r\n                    // å±å¼ç¬¬ä¸çº§\r\n                    if (element.layer === 1) {\r\n                        this.expandedKeys.push(element.id);\r\n                    }\r\n                }\r\n            });\r\n            this.data = result;\r\n            // é»è®¤ä¸å¡å¯¹è±¡çå¤ç\r\n            if (this.bizObjectId && this.bizObjectId !== '') {\r\n                // æ ç¦ç¹è¡\r\n                let curBizObjectId = this.bizObjectId;\r\n                while (curBizObjectId) {\r\n                    this.expandedKeys.push(curBizObjectId);\r\n                    // æ¾å°å½åèç¹çç¶èç¹\r\n                    curBizObjectId = this.data.find(item => item.id === curBizObjectId).parentID;\r\n                }\r\n                // å³ä¾§æä½åå\r\n                this.selectKeys = [this.bizObjectId];\r\n                setTimeout(() => {\r\n                    this.bizObjectChanged.emit(this.bizObjectId);\r\n                }, 80);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /** éä¸­è¡æ¹ååè§¦åäºä»¶ */\r\n    selectChange (args: any) {\r\n        const curBusId = args.dataItem.id;\r\n        // é¦æ¬¡è§¦å\r\n        if (this.selectKeys == null || this.selectKeys.length === 0) {\r\n            this.bizObjectChanged.emit(curBusId);\r\n        } else {\r\n            // è¿ä¸ªäºä»¶éè¿ä¸ä¼å¯¹selectedkeysæ°ç»èµå¼ï¼æ¯ä¸ä¸ä¸ªç¶æç\r\n            const lastBusId = this.selectKeys[0];\r\n            // ååçæåµä¸è§¦å\r\n            if (lastBusId !== curBusId) {\r\n                this.bizObjectChanged.emit(curBusId);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { SysFuncOperationComponent } from './sys-func-operation/sys-func-operation.component';\r\nimport { SysFuncOpHelpComponent } from './sys-func-op-help/sys-func-op-help.component';\r\nimport { BizObjectComponent } from './biz-object/biz-object.component';\r\nimport { BizObjectService } from './service/biz-object.service';\r\nimport { SysFuncOperationService } from './service/sys-func-operation.service';\r\nimport { SysFrontUtil } from '../sys-common/sys-front.util';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { LayoutModule } from '@farris/ui-layout';\r\nimport { SysFarrisFuncOperationComponent } from './sys-farris-func-operation/sys-farris-func-operation.component';\r\nimport { TreeViewModule } from '@progress/kendo-angular-treeview';\r\nimport { GridModule } from '@progress/kendo-angular-grid';\r\nimport { LayoutModule as KendoLayoutModule } from '@progress/kendo-angular-layout';\r\nimport { SysLocaleService } from '../locale/sys-locale.service';\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        HttpClientModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        DatagridModule,\r\n        TreeTableModule,\r\n        LayoutModule,\r\n        TreeViewModule,\r\n        KendoLayoutModule,\r\n        LayoutModule,\r\n        GridModule,\r\n        ModalModule.forRoot(),\r\n        MessagerModule.forRoot()\r\n    ],\r\n\r\n    declarations: [\r\n        SysFuncOperationComponent,\r\n        SysFuncOpHelpComponent,\r\n        BizObjectComponent,\r\n        SysFarrisFuncOperationComponent\r\n    ],\r\n    providers: [\r\n        SysFrontUtil,\r\n        SysLocaleService,\r\n        SysFuncOperationService,\r\n        BizObjectService\r\n    ],\r\n    entryComponents: [\r\n        SysFuncOperationComponent,\r\n        SysFarrisFuncOperationComponent\r\n    ],\r\n    exports: [\r\n        SysFuncOperationComponent,\r\n        SysFuncOpHelpComponent,\r\n        BizObjectComponent,\r\n        SysFarrisFuncOperationComponent\r\n    ]\r\n})\r\nexport class SysFuncOpHelpModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, from } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { SysCommonUtilService, SysDataUtil } from '@gsp-sys/sysmgr-common';\r\nimport { map } from 'rxjs/operators';\r\nimport { GspUserFilter } from '../filter/gsp-user-filter';\r\nimport { GspPositionFilter } from '../filter/gsp-position-filter';\r\nimport { GspRoleFilter } from '../filter/gsp-role-filter';\r\nimport { TreeFilter } from '../filter/tree-filter';\r\n\r\n@Injectable()\r\nexport class SysHelpService {\r\n\r\n    constructor (\r\n        private http: HttpClient,\r\n        private sysUtil: SysCommonUtilService\r\n    ) {\r\n    }\r\n\r\n    private getHttpOption (filter: any): { headers: any, params: any } {\r\n        SysDataUtil.deleteEmpty(filter);\r\n        const paramStr = JSON.stringify(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader()['headers'],\r\n            params: { param: paramStr }\r\n        };\r\n        return opt;\r\n    }\r\n\r\n    getUsers (filter: GspUserFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        // ç¨æ·ç®åçæåé¡µä¿¡æ¯\r\n        return this.http.get(this.sysUtil.userWebApi, opt).pipe(map((val: any) => {\r\n            return val.data;\r\n        }));\r\n    }\r\n\r\n    getPositions (filter: GspPositionFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        return this.http.get(this.sysUtil.positionWebApi, opt).pipe(map((val: any) => {\r\n            return val.data;\r\n        }));\r\n    }\r\n    getRoles (filter: GspRoleFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        return this.http.get(this.sysUtil.roleWebApi, opt).pipe(map((val: any) => {\r\n            return val.data;\r\n        }));\r\n    }\r\n    getOrgs (filter: TreeFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        // è§å¾\r\n        opt.params.useView = true;\r\n        return this.handerTreeData(this.http.get(this.sysUtil.sysOrgWebApi + '/all', opt));\r\n    }\r\n    getUserGroups (filter: TreeFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        return this.handerTreeData(this.http.get(this.sysUtil.userGroupWebApi + '/all', opt));\r\n    }\r\n    getPositionGroups (filter: TreeFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        return this.handerTreeData(this.http.get(this.sysUtil.posGroupWebApi + '/all', opt));\r\n    }\r\n    getRoleGroups (filter: TreeFilter): Observable<any> {\r\n        const opt = this.getHttpOption(filter);\r\n        return this.handerTreeData(this.http.get(this.sysUtil.roleGroupWebApi + '/all', opt));\r\n    }\r\n\r\n    convert2Json(item: any): any {\r\n        const result: any = {\r\n            id: item.id,\r\n            code: item.code,\r\n            name: item.name,\r\n            parentId: item.parentId || '',\r\n            path: item.path,\r\n            layer: item.layer,\r\n            isDetail: item.isDetail,\r\n\r\n        };\r\n        if (item.nodeType != null && item.nodeType !== undefined) {\r\n            result.nodeType = item.nodeType;\r\n        }\r\n        return result;\r\n    }\r\n    getParentOrg (org: any): Observable<any> {\r\n        const paramStr = JSON.stringify(this.convert2Json(org));\r\n\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader()['headers'],\r\n            params: { param: paramStr }\r\n        };\r\n        return this.http.get(this.sysUtil.sysOrgWebApi+'/getparentorg/0002', opt).pipe(map((val: any) => {\r\n            return val;\r\n        }));\r\n    }\r\n\r\n    /** ééKendo-treeViewç»æ */\r\n    private handerTreeData (src: Observable<any>): Observable<any> {\r\n        return src.pipe(map((val: any[]) => {\r\n            from(val).subscribe(item => {\r\n                if (item.layer == 1 || item.parentId == null || item.parentId === '') {\r\n                    item.parentId = undefined;\r\n                }\r\n            });\r\n            return val;\r\n        }));\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class SysExceptionService {\r\n    getErrorInfo(error: any): string {\r\n        return error.Message;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { SysCommonUtilService, SysDataUtil } from '@gsp-sys/sysmgr-common';\r\nimport { Observable } from 'rxjs';\r\nimport { TreeFilter } from '../filter/tree-filter';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GroupService {\r\n\r\nconstructor(\r\n    private http: HttpClient,\r\n    private sysUtil: SysCommonUtilService\r\n) {\r\n}\r\n    private getUrlByGroupType(type: string): string {\r\n        let url = '';\r\n        switch (type) {\r\n            case 'user':\r\n                url = this.sysUtil.userGroupWebApi;\r\n                break;\r\n            case 'position':\r\n                url = this.sysUtil.posGroupWebApi;\r\n                break;\r\n            case 'role':\r\n                url = this.sysUtil.roleGroupWebApi;\r\n                break;\r\n            case 'org':\r\n                url = this.sysUtil.sysOrgWebApi;\r\n                break;\r\n            // é»è®¤ç¨æ·åç»\r\n            default:\r\n                url = this.sysUtil.userGroupWebApi;\r\n                break;\r\n        }\r\n        return url;\r\n     }\r\n    /**\r\n     * æ ¹æ®çº§æ°è·åç»ç»\r\n     * @param layer çº§æ°\r\n     */\r\n    getByLayer(layer: number, type: string, filter: TreeFilter): Observable<any> {\r\n        const url = this.getUrlByGroupType(type);\r\n        if (!filter) {\r\n            filter = {};\r\n        }\r\n        filter.layer = layer;\r\n        filter.parentId = null;\r\n        SysDataUtil.deleteEmpty(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader().headers,\r\n            params: { param: JSON.stringify(filter) }\r\n        };\r\n        return this.http.get(url, opt);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®çº§æ°è·åç»ç»\r\n     * @param parentId ç¶èç¹\r\n     */\r\n    getByParentId(parentId: string, type: string, filter: TreeFilter): Observable<any> {\r\n        const url = this.getUrlByGroupType(type);\r\n        if (!filter) {\r\n            filter = {};\r\n        }\r\n        filter.layer = null;\r\n        filter.parentId = parentId;\r\n        SysDataUtil.deleteEmpty(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader().headers,\r\n            params: { param: JSON.stringify(filter) }\r\n        };\r\n        return this.http.get(url, opt);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®çº§æ°è·åç»ç»\r\n     * @param parentId ç¶èç¹\r\n     */\r\n    searchData( type: string, filter: TreeFilter): Observable<any> {\r\n        const url = this.getUrlByGroupType(type);\r\n        if (!filter) {\r\n            filter = {};\r\n        }\r\n        filter.layer = null;\r\n        filter.parentId = null;\r\n        SysDataUtil.deleteEmpty(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader().headers,\r\n            params: { param: JSON.stringify(filter) }\r\n        };\r\n        return this.http.get(url, opt);\r\n    }\r\n\r\n}\r\n","import { Component, OnInit, ViewChild, Input, EventEmitter, Output, HostListener, ElementRef, AfterContentInit } from '@angular/core';\r\nimport { TreeTableComponent, TreeNode } from '@farris/ui-treetable';\r\nimport { from } from 'rxjs';\r\nimport { GroupService } from './group.service';\r\nimport { filter } from 'rxjs/operators';\r\nimport { TreeFilter } from '../filter/tree-filter';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { NAVI_LOCALE_ZHCHS } from '../../locale/locales/zh-cn/navigiation';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\n\r\n@Component({\r\n    selector: 'lib-group-nav',\r\n    templateUrl: './group-nav.component.html',\r\n    styleUrls: ['./group-nav.component.css']\r\n})\r\nexport class GroupNavComponent implements OnInit, AfterContentInit {\r\n\r\n    @ViewChild('farrisTreeParent') farrisTreeParent: ElementRef;\r\n    @ViewChild('farrisTt') farrisTt: TreeTableComponent;\r\n    @Input() title: string;\r\n    @Input() showHeader = true;\r\n    @Input() fixedHeader = true;\r\n    @Input() withCodeColumn = true;\r\n    // æ¯å¦æ·»å æææ ¹èç¹\r\n    @Input() allRoot = false;\r\n    @Input() groupType: 'user' | 'position' | 'role' | 'org';\r\n    // é»è®¤ä¸å¼å¯æ°æ®æéè¿æ»¤\r\n    @Input() filter: TreeFilter;\r\n    @Input() selectKeys: string[] = [];\r\n    @Input() needRemote = true;\r\n    /** æ¾ç¤ºç»ç»ç±»åå */\r\n    @Input() showNodeTypeColumn = false;\r\n    @Input() treeData: TreeNode[];\r\n    @Input() showFilterBar:boolean = false;\r\n    searchFields:any = [{label: \"ç¼å·\",value: \"code\"},{label: \"åç§°\",value: \"name\"}];\r\n    allColumnsTitle='ææå'\r\n    @Output() search: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() selectRowChanged: EventEmitter<any> = new EventEmitter<any>();\r\n    // æ¾ç¤ºå\r\n    cols: any[];\r\n    i18nRes: any;\r\n\r\n    /** æ¥è¯¢åå®¹ */\r\n    searchInfo = '';\r\n    /** ä¸æ¬¡æ¥è¯¢åå®¹ */\r\n    oldSearchInfo = '';\r\n\r\n    field = '';\r\n    /** ä¸æ¬¡æ¥è¯¢åå®¹ */\r\n    oldField = '';\r\n\r\n    //ä¸æ¬¡æç´¢ç»æ\r\n    searchResult = [];\r\n    //ä¸æ¬¡æç´¢çä½ç½®\r\n    searchIndex = 0;\r\n\r\n    /**\r\n     * çæ§ææ½äºä»¶ï¼éç»ç»ç»TreeTable\r\n     * @param event äºä»¶åæ°\r\n     */\r\n    temp = true;\r\n\r\n    @HostListener('window:resize', [])\r\n    winResize() {\r\n        this.reSizeTreeTable();\r\n    }\r\n    constructor(\r\n        public groupService: GroupService,\r\n        public localService: SysLocaleService,\r\n        private notifyService: NotifyService,\r\n        public msg: MessagerService,\r\n\r\n    ) {\r\n    }\r\n\r\n\r\n    /** éç»Farris-TreeTableçå¤§å° */\r\n    public reSizeTreeTable (height: number = 0, width: number = 0) {\r\n        if (height === 0) {\r\n            height = this.farrisTreeParent.nativeElement.clientHeight;\r\n        }\r\n        if (width === 0) {\r\n            width = this.farrisTreeParent.nativeElement.clientWidth;\r\n        }\r\n        this.farrisTt.resize({ height, width });\r\n    }\r\n\r\n    ngOnInit () {\r\n        if (this.localService) {\r\n            this.i18nRes = this.localService.getComponentOpt('navi');\r\n        } else {\r\n            this.i18nRes = NAVI_LOCALE_ZHCHS;\r\n        }\r\n        this.searchFields = [{label: this.i18nRes.codeField,value: \"code\"},{label: this.i18nRes.nameField,value: \"name\"}];\r\n        this.allColumnsTitle=this.i18nRes.allColumnsTitle;\r\n\r\n        // å¯ç¨ç¼å·å\r\n        if (this.withCodeColumn) {\r\n            this.fixedHeader = true;\r\n            this.showHeader = true;\r\n            this.cols = [\r\n                { field: 'code', title: this.i18nRes.codeField, width: 100 },\r\n                { field: 'name', title: this.i18nRes.nameField, width: 100 }\r\n            ];\r\n        } else {\r\n            this.fixedHeader = false;\r\n            this.showHeader = false;\r\n            this.cols = [\r\n                { field: 'name', title: this.i18nRes.nameField, width: 100 }\r\n            ];\r\n\r\n        }\r\n        // éè¦è·åæ°æ®ï¼å¦åç´æ¥æ ¹æ®treeDataåå§æ°æ®\r\n        if (this.needRemote) {\r\n            // æææ è¯\r\n            if (this.allRoot) {\r\n                this.treeData = [];\r\n                const rootNode: TreeNode = {};\r\n                rootNode.children = [];\r\n                rootNode.data = {\r\n                    id: 'all',\r\n                    code: this.i18nRes.rootNodeCode,\r\n                    name: this.i18nRes.rootNodeTitle\r\n                };\r\n                rootNode.expanded = true;\r\n                rootNode.leaf = false;\r\n                rootNode.selectable = true;\r\n                this.treeData.push(rootNode);\r\n            } else {\r\n                this.treeData = [];\r\n            }\r\n\r\n            this.groupService.getByLayer(1, this.groupType, this.filter).subscribe(val => {\r\n                this.initTreeNodeList(val);\r\n            });\r\n        } else { // ä¸éè¦ä»æå¡å¨ç«¯è·å\r\n            this.farrisTt.updateSerializedValue();\r\n        }\r\n\r\n        // å¼æ­¥å è½½ï¼éè¿childrenä¸º0æ¥å¤æ­ä»æªå±å¼è¿èç¹\r\n        this.farrisTt.expand.pipe(filter((node: TreeNode) => node.children.length === 0)).subscribe((node: TreeNode) => {\r\n            node['showLoading'] = true;\r\n            const id = node.data.id;\r\n            // è·åç³»ç»ç»ç»\r\n            this.groupService.getByParentId(id, this.groupType, this.filter).subscribe((list: any[]) => {\r\n                node['showLoading'] = false;\r\n                const childNode: TreeNode[] = [];\r\n                // è½¬æ¢ä¸çº§ç»ç»\r\n                from(list).subscribe(item => {\r\n                    childNode.push(this.convertToTreeNode(item));\r\n                });\r\n                // é²æ­¢åºç°ä¸çº§èç¹æ²¡ææ°æ®\r\n                if (childNode.length > 0) {\r\n                    this.farrisTt.appendChildren(childNode, node);\r\n                } else {// åºè¯¥æ¯æ ä¸çº§æéæèµ°è¿é\r\n                    node.leaf = true;\r\n                    this.farrisTt.updateSerializedValue();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * å·æ°å½åé¡µé¢ä¿¡æ¯\r\n     */\r\n    refreshThisNav(){\r\n        this.treeData=[];\r\n        const rootNode: TreeNode = {};\r\n        rootNode.children = [];\r\n        rootNode.data = {\r\n            id: 'all',\r\n            code: this.i18nRes.rootNodeCode,\r\n            name: this.i18nRes.rootNodeTitle\r\n        };\r\n        rootNode.expanded = true;\r\n        rootNode.leaf = false;\r\n        rootNode.selectable = true;\r\n        this.treeData.push(rootNode);\r\n        this.groupService.getByLayer(1, this.groupType, this.filter).subscribe(val => {\r\n            this.initTreeNodeList(val);\r\n        });\r\n    }\r\n\r\n    /** é¡µé¢æ¸²æå®æå */\r\n    ngAfterContentInit (): void {\r\n        this.reSizeTreeTable();\r\n    }\r\n\r\n    /** æç´¢ï¼ æ­¤å¤æ¯åå±å è½½ï¼æç´¢æ¶éè¦æ ¹æ®åæ°æ®è¿è¡æç´¢ï¼æç´¢åï¼éè¦å°å¯¹åºç¶èç¹å±ç¤º \r\n     *   @param args  æ ¼å¼ searchData = { field: '*', value: '' };\r\n     */\r\n     searchData(args: any) {\r\n        this.search.next(args);\r\n        if (!this.filter) {\r\n            this.filter = {};\r\n        }\r\n        if(!args){\r\n            return;\r\n        }\r\n        this.searchInfo = args.value;\r\n        this.field = args.field;\r\n\r\n        // æç´¢åå®¹ä¸ºç©º\r\n        if (!this.searchInfo || this.searchInfo.length <= 0 ) {\r\n            this.clearSearchValue();\r\n            return;\r\n        }\r\n        \r\n        // æç´¢åå®¹ä¸ä¸æ¬¡ä¸åï¼éæ°æç´¢\r\n        if (this.oldSearchInfo !== this.searchInfo || this.oldField !== this.field) {\r\n            this.filter.isSearchTree = true;\r\n            if(this.field === '*'){\r\n                this.filter.codeOrName = this.searchInfo;\r\n                this.filter.code = '';\r\n                this.filter.name = '';\r\n                    \r\n            }else if(this.field === 'code'){\r\n                this.filter.code = this.searchInfo;\r\n                this.filter.name = '';\r\n                this.filter.codeOrName = '';\r\n\r\n            }else if(this.field === 'name'){\r\n                this.filter.name = this.searchInfo;\r\n                this.filter.code = '';\r\n                this.filter.codeOrName = '';\r\n\r\n            }\r\n\r\n            this.groupService.searchData( this.groupType, this.filter).subscribe(list => {\r\n                this.treeData = [];\r\n                this.searchResult = [];\r\n                this.searchIndex = 0;\r\n\r\n                if (list && list.length > 0) {\r\n                    this.treeData = this.makeTree(list);\r\n                    list.forEach(item=>{\r\n                        if(item.search_data){\r\n                            this.searchResult.push(item.id);\r\n                        }\r\n                    })\r\n                    // æå¨æ´æ°TreeTableçå¼\r\n                    this.farrisTt.updateSerializedValue();\r\n                    setTimeout(()=>{\r\n                        this.farrisTt.selectNode(this.searchResult[0]);\r\n                        this.farrisTt.collapseAll();\r\n                        this.expandParent(this.searchResult[0]);\r\n                        this.farrisTt.scrollToCurrentNode();\r\n                    })\r\n\r\n                }else{\r\n                    // æå¨æ´æ°TreeTableçå¼\r\n                    this.farrisTt.updateSerializedValue();\r\n                    this.notifyService.info(this.i18nRes.searchNullData);\r\n                }\r\n\r\n            });\r\n\r\n        }else{\r\n            if(this.searchResult && this.searchResult.length > 0){\r\n                this.searchIndex = this.searchIndex + 1;\r\n                // å·²ç»æç´¢å°æåï¼éè¦éå¤´æç´¢\r\n                if ( this.searchIndex === this.searchResult.length) {\r\n                    this.searchIndex = 0;\r\n                }\r\n    \r\n                setTimeout(()=>{\r\n                    this.farrisTt.selectNode(this.searchResult[this.searchIndex]);\r\n                    this.farrisTt.collapseAll();\r\n                    this.expandParent(this.searchResult[this.searchIndex]);\r\n                    this.farrisTt.scrollToCurrentNode();\r\n                })\r\n            }else{\r\n                this.notifyService.info(this.i18nRes.searchNullData);\r\n\r\n            }\r\n\r\n        }\r\n        this.oldSearchInfo = this.searchInfo;\r\n        this.oldField = this.field;\r\n\r\n    }\r\n\r\n    clearSearchValue(){\r\n        //ç¹å»æ¸é¤æ¶ï¼é²æ­¢äºä»¶æ§è¡ä¸¤æ¬¡\r\n        if(!this.temp){\r\n            return;\r\n        }\r\n        this.temp = false;\r\n\r\n        // æææ è¯\r\n        if (this.allRoot) {\r\n            this.treeData = [];\r\n            const rootNode: TreeNode = {};\r\n            rootNode.children = [];\r\n            rootNode.data = {\r\n                id: 'all',\r\n                code: this.i18nRes.rootNodeCode,\r\n                name: this.i18nRes.rootNodeTitle\r\n            };\r\n            rootNode.expanded = true;\r\n            rootNode.leaf = false;\r\n            rootNode.selectable = true;\r\n            this.treeData.push(rootNode);\r\n        } else {\r\n            this.treeData = [];\r\n        }\r\n        this.filter.isSearchTree = false;\r\n        this.filter.codeOrName = null;\r\n        this.filter.code = null;\r\n        this.filter.name = null;\r\n\r\n        this.groupService.getByLayer(1, this.groupType, this.filter).subscribe(val => {\r\n            this.initTreeNodeList(val);\r\n            if(this.treeData.length>0){\r\n                this.farrisTt.selectNode(this.treeData[0].data.id);\r\n\r\n            }\r\n            this.temp = true;\r\n        });\r\n        this.oldSearchInfo = '';\r\n        this.oldField = '';\r\n    }\r\n\r\n    /**\r\n     * æé æ \r\n    */\r\n    private makeTree(data: any[]): TreeNode[] {\r\n        const root = data.filter(t => t.layer === 1).map(t => {\r\n            const node: TreeNode = { \r\n                data: t ,\r\n                children: [],\r\n                expanded: false,\r\n                selectable: t.farris_selectable};\r\n\r\n            if (!t.isDetail) {\r\n                node.leaf = false;\r\n                node.children = [];\r\n            }\r\n            return node;\r\n        });\r\n        root.forEach(e => {\r\n            // æé ä¸çº§ï¼childrenï¼ç¶çº§çidä¿¡æ¯\r\n            e.children = this.makeChildrenByParentId(data, e.data.id);\r\n        });\r\n        return root;\r\n    }\r\n\r\n    /**\r\n     * ç¶èç¹æé æ \r\n     */\r\n    private makeChildrenByParentId(datas: any[], parentId: string): any[] {\r\n        const x = datas.filter(c => c.parentId === parentId).map(d => {\r\n            return {\r\n                data: d,\r\n                children: this.makeChildrenByParentId(datas, d.id),\r\n                expanded: false,\r\n                selectable: d.farris_selectable\r\n            };\r\n        });\r\n        return x;\r\n    }\r\n\r\n\r\n    /**\r\n     * å°ç»ç»å®ä½è½¬æ¢ä¸ºFarris-TreeNode\r\n     */\r\n    private convertToTreeNode (src: any): TreeNode {\r\n        const node: TreeNode = { data: src };\r\n        // éæç»èç¹\r\n        if (!src.isDetail) {\r\n            node.leaf = false;\r\n            node.children = [];\r\n        }\r\n        // TODO: åªæææéçç»ç»æè½è¢«éä¸­,è¿æ¯è¿éä¸åå¤çï¼åéäºä»¶æ¶å»å¤ç\r\n        node.selectable = src.farris_selectable;\r\n        return node;\r\n    }\r\n\r\n    /**\r\n     * åå§é¡¶çº§åç»ï¼é»è®¤layer=1çæåµ\r\n     * @param sysOrgList ç³»ç»ç»ç»åè¡¨\r\n     */\r\n    private initTreeNodeList (list: any[]) {\r\n        if (!list || list.length === 0) {\r\n            return;\r\n        }\r\n        from(list).subscribe(firstLayer => {\r\n            const node = this.convertToTreeNode(firstLayer);\r\n            // éæç»ï¼å¸¦å¾ä¸å¤æé ä¸çº§ï¼åè®¾ææ°æ®\r\n            if (node.leaf) {\r\n                const curId = firstLayer.id;\r\n                const childern = list.filter(item => item.parentId === curId);\r\n                from(childern).subscribe(secondLayer => {\r\n                    node.children.push(this.convertToTreeNode(secondLayer));\r\n                });\r\n            }\r\n            // å¦ææ·»å æææ ¹èç¹\r\n            if (this.allRoot) {\r\n                this.treeData[0].children.push(node);\r\n            } else {\r\n                this.treeData.push(node);\r\n            }\r\n        });\r\n        // æå¨æ´æ°TreeTableçå¼\r\n        this.farrisTt.updateSerializedValue();\r\n    }\r\n\r\n    /**\r\n     * éæ©çç»ç»è¡\r\n     * @param arg åæ°\r\n     */\r\n    onNodeSelect (event: any) {\r\n        console.log(event.node.data);\r\n        this.selectRowChanged.next(event.node.data);\r\n    }\r\n\r\n    /**\r\n     * è·åå½åTreeTableçç»å®æ°æ®\r\n     */\r\n    public getTreeData (): TreeNode[] {\r\n        return this.treeData;\r\n    }\r\n\r\n    /**\r\n     * è·åå½åTreeTableçç»ä»¶å®ä¾\r\n     */\r\n    public getTreeTableComp (): TreeTableComponent {\r\n        return this.farrisTt;\r\n    }\r\n    /**\r\n     * éä¸­æä¸ªèç¹\r\n     */\r\n    public selectNode (id: string, isCheck?: boolean) {\r\n        this.farrisTt.selectNode(id, isCheck);\r\n    }\r\n\r\n    /**\r\n     * æ¸é¤ææéä¸­å¼\r\n     */\r\n    public unCheckAllNodes () {\r\n        this.farrisTt.unCheckAllNodes();\r\n    }\r\n\r\n    /**\r\n     * æ¸é¤ææéä¸­å¼\r\n     */\r\n    scrollToCurrentNode(key:any){\r\n        if(key){\r\n            this.farrisTt.selectNode(key);\r\n            this.expandParent(key);\r\n            this.farrisTt.scrollToCurrentNode();\r\n        }\r\n\r\n    } \r\n    \r\n    /** éä¸æ¾å°éè¦å±å¼çç¶èç¹ï¼å¨é¨å±å¼ */\r\n    expandParent(key: string) {\r\n        const parent = this.farrisTt.findRowNode(key);\r\n        let parentNode = parent.parent;\r\n        if (parentNode) {\r\n            while (parentNode) {\r\n                this.farrisTt.expandNode(parentNode.id);\r\n                parentNode = parentNode.parent;\r\n            }\r\n        } else {\r\n            // this.farrisTt.expandNode(key);\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport const userHelp = 'user';\r\nexport const posHelp = 'position';\r\nexport const roleHelp = 'role';\r\nexport const userGroupHelp = 'userGroup';\r\nexport const posGroupHelp = 'posGroup';\r\nexport const roleGroupHelp = 'roleGroupHelp';\r\nexport const sysOrgHelp = 'sysOrg';\r\n","import { Observable, of, from } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { ILookupHttpService, RemoteParams, LookupGridResult } from '@farris/ui-lookup';\r\nimport { SysCommonUtilService, SysDataUtil } from '@gsp-sys/sysmgr-common';\r\nimport { map } from 'rxjs/operators';\r\nimport { userHelp, posHelp, roleHelp, userGroupHelp, posGroupHelp, roleGroupHelp, sysOrgHelp } from '../help-meta/sys-help-meta';\r\nimport { TreeNode } from '@farris/ui-treetable';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { TreeFilter } from '../filter/tree-filter';\r\n\r\n\r\n/**\r\n * å¸®å©æå¡\r\n */\r\n@Injectable()\r\nexport class SysFarrisLookupService implements ILookupHttpService {\r\n\r\n    private filterData: any;\r\n    private i18nRes: any;\r\n    constructor (\r\n        private http: HttpClient,\r\n        private sysUtil: SysCommonUtilService,\r\n        private localService: SysLocaleService\r\n    ) {\r\n    }\r\n\r\n    /** åå§è¿æ»¤æ¡ä»¶ */\r\n    private setFilterData (filter: any) {\r\n        // æè¿æ»¤æ¡ä»¶\r\n        if (filter) {\r\n            const str = JSON.stringify(filter);\r\n            if (str !== '{}') {\r\n                // ä¸å®è¦å¤å¶\r\n                this.filterData = JSON.parse(str);\r\n            } else {\r\n                this.filterData = null;\r\n            }\r\n        } else {\r\n            this.filterData = null;\r\n        }\r\n    }\r\n    /**\r\n     * æ·»å æ°æ®\r\n     */\r\n    private setListData (src: any[], data: any[]) {\r\n        if (src) {\r\n            src.push.apply(src, data);\r\n        }\r\n    }\r\n    /** è·åè¿æ»¤æ°æ® */\r\n    private getFilterData (): any {\r\n        return this.filterData;\r\n    }\r\n    /**\r\n     * å¼æ­¥è·åçæ¬\r\n     */\r\n    getTreeDataAsync(url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        this.i18nRes = this.localService.getComponentOpt('help');\r\n        // è§£ææ¥è¯¢jsonå¯¹è±¡\r\n        const treeParam = JSON.parse(params.searchValue);\r\n        let farrisSelectedData = params['customData'].farrisSelectedData;\r\n\r\n        let filter: TreeFilter = {};\r\n        // filter.withPermission = true;\r\n        const category = treeParam.category;\r\n        // 1.é¦æ¬¡å è½½\r\n        if (category === 'all') {\r\n            filter.layer = 1;\r\n        }\r\n        // 2.å¼æ­¥å±å¼ä¸çº§\r\n        if (category === 'children') {\r\n            if (treeParam.hasOwnProperty('parentPath')) {\r\n                filter.path = treeParam.parentPath;\r\n            }\r\n            if (treeParam.hasOwnProperty('parentLayer')) {\r\n                // åç«¯æç´¢ä»¥ä¸çº§èç¹ä¸ºçº§æ°çèç¹\r\n                filter.layer = treeParam.parentLayer + 1;\r\n            }\r\n            if (treeParam.hasOwnProperty('parentId')) {\r\n                filter.parentId = treeParam.parentId;\r\n            }\r\n        }\r\n        // 3.æç´¢\r\n        if (category === 'search') {\r\n            const searchField = treeParam.searchField;\r\n            const searchValue: string = treeParam.searchValue.trim();\r\n            if (searchValue) {\r\n                filter.isSearchTree = true;\r\n                switch (searchField) {\r\n                    case 'code':\r\n                        filter.code = searchValue;\r\n                        break;\r\n                    case 'name':\r\n                        filter.name = searchValue;\r\n                        break;\r\n                    // å¨é¨åæç´¢ï¼ä¹åæ¯'*'\r\n                    case '*':\r\n                    default:\r\n                        filter.codeOrName = searchValue;\r\n                        break;\r\n                }\r\n            } else {\r\n                // æç´¢ä¸ºç©ºï¼éæ°å è½½ï¼é»è®¤ä»1çº§å¼å§\r\n                filter.layer = 1;\r\n            }\r\n        }\r\n\r\n        //å¦ææ¯ç»ç»ï¼è¯·æ±éä¸­æ°æ®æ¶\r\n        if (url === '/api/runtime/sys/v1.0/sysOrgs' && category === 'fav') {\r\n\r\n            let newUrl = url+'/nullorg' \r\n            const newOpt = {\r\n                headers: this.sysUtil.getHeader()['headers'],\r\n                params: { useView : 'true'}\r\n            }\r\n            return this.http.get(newUrl, newOpt).pipe(map((val: any[]) => {\r\n                const gridResult: LookupGridResult = {};\r\n                return gridResult;\r\n            }));\r\n        }\r\n\r\n        // è¯´ææè¿æ»¤æ¡ä»¶\r\n        if (this.getFilterData()) {\r\n            filter = Object.assign(this.getFilterData(), filter);\r\n            SysDataUtil.deleteEmpty(filter);\r\n        }\r\n        const paramStr = JSON.stringify(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader()['headers'],\r\n            params: { param: paramStr }\r\n        };\r\n        return this.http.get(url, opt).pipe(map((val: any[]) => {\r\n            const gridResult: any = {};\r\n            gridResult.selectedData = farrisSelectedData;\r\n\r\n            gridResult.items = [];\r\n            gridResult.treeInfo = {\r\n                loadDataType: 'async',\r\n                layerType: 'parentId',\r\n                dataField: 'treeInfo',\r\n                pathField: 'path',\r\n                layerField: 'layer',\r\n                parentField: 'parentId',\r\n                isDetailField: 'isDetail'\r\n            };\r\n            gridResult.treeInfo['treeDataIsInit'] = true;\r\n            gridResult.columns = [\r\n                { field: 'code', title: this.i18nRes.codeField },\r\n                { field: 'name', title: this.i18nRes.nameField }];\r\n            gridResult.searchFields = [\r\n                { label: this.i18nRes.codeField, value: 'code' },\r\n                { label: this.i18nRes.nameField, value: 'name' }\r\n            ];\r\n            // å¿é¡»è¦èµå¼\r\n            from(val).subscribe(item => {\r\n                if (item.layer === 1 || !item.parentId) {\r\n                    item.parentId = null;\r\n                }\r\n                item.treeInfo = {\r\n                    parentId: item.parentId,\r\n                    path: item.path,\r\n                    layer: item.layer,\r\n                    isDetail: item.isDetail\r\n                };\r\n            });\r\n            // å¦ææ¯æç´¢çè¯ï¼éè¦èªå·±æé æ \r\n            if (filter.isSearchTree) {\r\n                gridResult.items = this.makeTreeByParent(val, 'parentId', 'id');\r\n                console.log(gridResult.items);\r\n            } else {\r\n                // æç»æï¼æ®éåå±å è½½\r\n                if (val && val.length > 0) {\r\n                    from(val).subscribe(item => {\r\n                        gridResult.items.push(this.convertToTreeNode(item));\r\n                    });\r\n                }\r\n            }\r\n            return gridResult;\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * å°æ èç¹è½¬æ¢ä¸ºFarris TreeNode\r\n     */\r\n    private convertToTreeNode (src: any): TreeNode {\r\n        const node: TreeNode = {};\r\n        node.data = src;\r\n        node.children = [];\r\n        node.selectable = src.farris_selectable;\r\n        node.leaf = src.isDetail;\r\n        node.parent = src.parentId;\r\n        // è¿ä¸æ¡å¿é¡»å¾å ï¼å¦åä¸è¡\r\n        node.id = node.data.id;\r\n        // æç´¢çæ¶åææ«çº§æ·»å äºè¿ä¸ªå±æ§ï¼ä¸éè¦å±å¼\r\n        if (src.hasOwnProperty('expanded')) {\r\n            node.expanded = src.expanded;\r\n        }\r\n        return node;\r\n    }\r\n\r\n    /** æç§parentç æé æ  */\r\n    makeTreeByParent (datas: any[], parentField: string, keyField: string): TreeNode[] {\r\n        // ä¸ç´ç²ç©ºï¼æèæ²æä¸ç´ç\r\n        const pathLayerOnes = datas.filter(x => {\r\n            if (!x[parentField]) {\r\n                return true;\r\n            }\r\n            // æ­å±çè¿ç§ï¼åºè¯¥ä¹å±äºä¸çº§\r\n            const p = datas.find(parent => parent[keyField] === x[parentField]);\r\n            if (!p) {\r\n                return true;\r\n            }\r\n        });\r\n        const treedata: TreeNode[] = [];\r\n        pathLayerOnes.forEach(x => {\r\n            const node = this.convertToTreeNode(x);\r\n            treedata.push(node);\r\n        });\r\n        treedata.forEach(item => {\r\n            this.findChildrenByParent(item, datas, parentField, keyField);\r\n        });\r\n        return treedata;\r\n    }\r\n\r\n    /** æ¾å°å­èç¹ */\r\n    findChildrenByParent (parent: TreeNode, datas: any[], parentField: string, keyField: string) {\r\n        const childList = datas.filter(childitem => {\r\n            if (childitem[parentField] === parent.data[keyField]) {\r\n                return true;\r\n            }\r\n        });\r\n        if (childList && childList.length > 0) {\r\n            childList.forEach(child => {\r\n                const node = this.convertToTreeNode(child);\r\n                parent.children.push(node);\r\n                this.findChildrenByParent(node, datas, parentField, keyField);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¨é¨è·åçæ¬çæ¬\r\n     */\r\n    getTreeData (url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        let filter: any = {};\r\n        // è¯´ææè¿æ»¤æ¡ä»¶\r\n        if (this.getFilterData()) {\r\n            filter = Object.assign(this.getFilterData(), filter);\r\n            SysDataUtil.deleteEmpty(filter);\r\n        }\r\n        const paramStr = JSON.stringify(filter);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader()['headers'],\r\n            params: { param: paramStr }\r\n        };\r\n        return this.http.get(url, opt).pipe(map((val: any[]) => {\r\n            if (val && val.length > 0) {\r\n                val.forEach(item => {\r\n                    if (item.layer == 1 || item.parentId == null) {\r\n                        item.parentId = '';\r\n                    }\r\n                    // æ»¡è¶³åç«¯ç»æ\r\n                    item.treeInfo = {\r\n                        parentId: item.parentId,\r\n                        path: item.path,\r\n                        layer: item.layer,\r\n                        isDetail: item.isDetail\r\n                    };\r\n                    item.selectable = false;\r\n                });\r\n            } else {\r\n                val = [];\r\n            }\r\n            return { items: val };\r\n        }));\r\n    }\r\n\r\n    /** è·ååè¡¨æ°æ® */\r\n    getGridData (url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        let index = params.pageIndex;\r\n        let size = params.pageSize;\r\n        let farrisSelectedData = params['customData'].farrisSelectedData;\r\n\r\n        // ç®åè¿ä¸ªå°æ¹æé®é¢ï¼ç¬¬ä¸æ¬¡çæ¶åä¼ éä¸è¿æ¥\r\n        if (!index) {\r\n            const customData = params['customData'];\r\n            index = customData.filter.pageIndex;\r\n            size = customData.filter.pageSize;\r\n        }\r\n        let param: any = {\r\n            pageIndex: index,\r\n            pageSize: size,\r\n        };\r\n        // æ¯å¦ææç´¢\r\n        const filterStr = params.searchValue;\r\n        const filterObj = JSON.parse(filterStr);\r\n        const searchField = filterObj.searchField;\r\n        const searchValue = filterObj.searchValue;\r\n        // æè¿æ»¤æ¥è¯¢,æå¯è½æç´¢å¼ä¸ºç©ºï¼è¿æ¶åæ¯ä¸éè¦æç´¢ç\r\n        if (searchField && searchValue) {\r\n            switch (searchField) {\r\n                case 'code':\r\n                    param.code = searchValue;\r\n                    break;\r\n                case 'name':\r\n                    param.name = searchValue;\r\n                    break;\r\n                // å¨é¨åæç´¢ï¼ä¹åæ¯'*'\r\n                case '*':\r\n                default:\r\n                    param.codeOrName = searchValue;\r\n                    break;\r\n            }\r\n        }\r\n        // è¯´ææè¿æ»¤æ¡ä»¶\r\n        if (this.getFilterData()) {\r\n            param = Object.assign(this.getFilterData(), param);\r\n            SysDataUtil.deleteEmpty(param);\r\n        }\r\n        console.log(param);\r\n        const paramStr = JSON.stringify(param);\r\n        const opt = {\r\n            headers: this.sysUtil.getHeader()['headers'],\r\n            params: { param: paramStr }\r\n        };\r\n        return this.http.get(url, opt).pipe(map((val: any) => {\r\n            if (val && val.data) {\r\n                // å°æ¬æ¬¡åé¡µçæ°æ®éå å°å½åå¸®å©çåè¡¨ä¸­\r\n                this.setListData(params['customData'].allData, val.data);\r\n            }\r\n            return {\r\n                items: val.data,\r\n                total: val.totalCount,\r\n                pageInfo: {\r\n                    pageIndex: index,\r\n                    pageSize: size,\r\n                    pageList: [20, 40, 60, 80, 100],\r\n                    enablePager: true\r\n                },\r\n                selectedData:farrisSelectedData\r\n            };\r\n        }));\r\n    }\r\n    /** åæ° */\r\n    getData (url: string, params?: RemoteParams): Observable<LookupGridResult> {\r\n        console.log(params);\r\n        console.log(url);\r\n        const filter = params['customData'].filter;\r\n        this.setFilterData(filter);\r\n        const typeIndex = url.indexOf('\\/');\r\n        const httpUrl = url.substring(typeIndex, url.length);\r\n        const helpType = url.substring(0, typeIndex);\r\n        switch (helpType) {\r\n            case userHelp:\r\n            case posHelp:\r\n            case roleHelp:\r\n                return this.getGridData(httpUrl, params);\r\n            case userGroupHelp:\r\n            case posGroupHelp:\r\n            case roleGroupHelp:\r\n            case sysOrgHelp:\r\n                return this.getTreeDataAsync(httpUrl, params);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import { forEach } from '@angular/router/src/utils/collection';\r\nimport { Component, OnInit, Input, Output, EventEmitter, ViewChild, Optional } from '@angular/core';\r\nimport { userHelp, posHelp, roleHelp } from '../help-meta/sys-help-meta';\r\nimport { SysCommonUtilService } from '@gsp-sys/sysmgr-common';\r\nimport { ServerSideToken, LookupGridComponent, PickingResult, PickedResult } from '@farris/ui-lookup';\r\nimport { SysFarrisLookupService } from '../service/sys-farris-lookup.service';\r\nimport { GspUserFilter } from '../filter/gsp-user-filter';\r\nimport { GspPositionFilter } from '../filter/gsp-position-filter';\r\nimport { GspRoleFilter } from '../filter/gsp-role-filter';\r\nimport { Observable, of } from 'rxjs';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { HELP_LOCALE_ZHCHS } from '../../locale/locales/zh-cn/help';\r\nimport { map, filter } from 'rxjs/operators';\r\nimport { element } from 'protractor';\r\n\r\n@Component({\r\n    selector: 'sys-farris-grid-lookup',\r\n    templateUrl: './sys-farris-lookup.component.html',\r\n    styleUrls: ['./sys-farris-lookup.component.css'],\r\n    providers: [\r\n        { provide: ServerSideToken, useClass: SysFarrisLookupService }\r\n    ]\r\n})\r\nexport class SysFarrisLookupComponent implements OnInit {\r\n\r\n    /** æ é¢ */\r\n    @Input() title: string;\r\n    /**å®½åº¦ */\r\n    @Input() width = 550;\r\n    /** æ¯å¦æ¾ç¤ºç¨æ·æåºå­æ®µï¼WFä½¿ç¨ */\r\n    @Input() showUserOrderField = false;\r\n    /** æ¾ç¤ºç¨æ·çåä½ä¿¡æ¯ï¼WFä½¿ç¨ */\r\n    @Input() showUserUnitInfo = false;\r\n    /** åæ°æº */\r\n    @Input() sourceType: 'user' | 'position' | 'role';\r\n    /** åªè¯» */\r\n    @Input() disabled = false;\r\n    /**\r\n     * å¿å¡«\r\n     */\r\n    @Input() required=true;\r\n    /**\r\n     * æå¼å¸®å©åæ¯å¦æéä¸­æ°æ®\r\n     */\r\n    @Input() enableToSelect=true;\r\n    /** æ¯å¦åé */\r\n    @Input() singleSelect: boolean;\r\n    /** æ¯å¦åé¡µï¼é»è®¤true */\r\n    @Input() pagination = true;\r\n    /** é¦æ¬¡å è½½ç¬¬å é¡µï¼é»è®¤1 */\r\n    @Input() pageIndex = 1;\r\n    /** æ¯é¡µå è½½æ°ï¼é»è®¤20 */\r\n    @Input() pageSize = 20;\r\n    /** ç»å®å°å¸®å©ä¸çæ°æ®ï¼åå§æ¾ç¤ºå¼ç¨ */\r\n    @Input() displayTxt: string;\r\n    /** å­å¨å¸®å©éæ©çå¯¹è±¡ */\r\n    @Input() bindingData: { id: string, name: string };\r\n    /** è¿æ»¤æ¡ä»¶ */\r\n    @Input() filter: GspUserFilter | GspPositionFilter | GspRoleFilter | any;\r\n    /** æ¯å¦å¼å§æ°æ®æéè¿æ»¤ */\r\n    @Input() withPermission = false;\r\n    /** å¯ç¨å³é­åäºä»¶ */\r\n    @Input() useBeforeCloseEvent = false;\r\n    @Input() beforeClose: (selectData: any) => Observable<PickedResult>;\r\n    @Input() typeMode=0;\r\n    /** å¸®å©éæ©åäºä»¶ */\r\n    @Output() afterConfirm: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    /** å¸®å©éæ©åäºä»¶ï¼ä¼è¿åéä¸­åå é¤çid */\r\n    @Output() afterConfirmData: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    /** æ¸ç©ºåäºä»¶-ææ¶ä¸ç¨ */\r\n    @Output() clear: EventEmitter<any> = new EventEmitter<any>();\r\n    /** å³é­å-ææ¶ä¸ç¨ */\r\n    @Output() loadSuccessEvent: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() valueChangedEvent: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() selectDataEvent: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() dialogClosed: EventEmitter<any> = new EventEmitter<any>();\r\n    dataUri: string;\r\n    columns: any[];\r\n    selectedData :any[]=[];\r\n    farrisSelectedData:any[]=[];\r\n    @ViewChild('farrislookup') public farrisLookUp: LookupGridComponent;\r\n    mapFields = { id: 'id', name: 'name' };\r\n    /** æ¯æ¬¡å³é­åæ°æ® */\r\n    public allData: any[];\r\n    public i18nRes: any;\r\n    constructor(\r\n        public sysUtil: SysCommonUtilService,\r\n        public localService: SysLocaleService\r\n    ) {\r\n        this.selectedData = [];\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.localService) {\r\n            this.i18nRes = this.localService.getComponentOpt('help');\r\n        } else {\r\n            this.i18nRes = HELP_LOCALE_ZHCHS;\r\n        }\r\n        this.columns = [\r\n            { title: this.i18nRes.codeField, field: 'code', searchField: 'code', width: '160' },\r\n            { title: this.i18nRes.nameField, field: 'name', searchField: 'name', width: '200' },\r\n        ];\r\n        // æ¾ç¤ºç¨æ·çåä½è·¯å¾ä¿¡æ¯ï¼WFä½¿ç¨\r\n        if (this.showUserUnitInfo) {\r\n            this.width = 850;\r\n            this.columns.push({ title: this.i18nRes.orgNamePathField, field: 'orgNamePath' });\r\n            this.width = 850;\r\n            this.columns.push({ title: this.i18nRes.orgName, field: 'sysOrgName' });\r\n        }\r\n        // æ¾ç¤ºæåºå­æ®µï¼WFä½¿ç¨\r\n        if (this.showUserOrderField) {\r\n            this.columns.push({ title: this.i18nRes.orderField, field: 'orderNum' });\r\n        }\r\n        // åå§å\r\n        this.allData = [];\r\n        // webapiåå§\r\n        switch (this.sourceType) {\r\n            case 'position':\r\n                this.dataUri = posHelp + this.sysUtil.positionWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.positionTitle;\r\n                }\r\n                break;\r\n            case 'role':\r\n                this.dataUri = roleHelp + this.sysUtil.roleWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.roleTitle;\r\n                }\r\n                break;\r\n            case 'user':\r\n            default:\r\n                this.dataUri = userHelp + this.sysUtil.userWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.userTitle;\r\n                }\r\n                break;\r\n        }\r\n        // å¿é¡»è¦æï¼å¦ååå§éä¸­ä¸èµ·ä½ç¨\r\n        this.farrisLookUp.mapFields = { id: 'id', name: 'name' };\r\n        // å¸®å©å³é­åäºä»¶\r\n        this.farrisLookUp.dialogClosed.subscribe(val => {\r\n            console.log(val);\r\n            this.dialogClosed.next(val);\r\n        });\r\n    }\r\n\r\n    /** å¸®å©åäºä»¶,å¼ºè¡ä¼ éè¿æ»¤æ¡ä»¶ */\r\n    beforeOpen = (arg) => {\r\n        if (!this.filter) {\r\n            // å¯è½è°ç¨æ¹ä¸ä¼ éï¼è¯å«ä¸ºéç©º\r\n            this.filter = {};\r\n        }\r\n        /**\r\n         * WFä½¿ç¨ï¼å¦ææ¾ç¤ºç¨æ·çåä½ä¿¡æ¯ï¼éè¦æ¥è¯¢æ¡ä»¶ä¸­å¢å å¦ä¸æ è¯ï¼\r\n         * æå¡å¨ç«¯è§£æ\r\n         */\r\n        if (this.showUserUnitInfo) {\r\n            this.filter.queryMode = '0002';\r\n        }\r\n        this.filter.pageIndex = this.pageIndex;\r\n        this.filter.pageSize = this.pageSize;\r\n        this.allData.length = 0;\r\n        this.farrisSelectedData = [];\r\n        this.selectedData = [];\r\n\r\n        if(this.bindingData!=null&&this.bindingData.id!=null&&this.bindingData.id!=\"\"){\r\n            this.selectedData = this.bindingData.id.split(',');\r\n            this.selectedData.forEach(item=>{\r\n                this.farrisSelectedData.push({\"id\":item});\r\n\r\n            });\r\n        }\r\n\r\n        // æè¿æ»¤æ°æ®åå½åçæ°æ®ä¼ éå°serviceå±\r\n        return of({\r\n            showDialog: true, data: {\r\n                filter: this.filter,\r\n                allData: this.allData,\r\n                farrisSelectedData:this.farrisSelectedData\r\n            }\r\n        });\r\n    }\r\n\r\n    /** å¸®å©å³é­åäºä»¶,ç®åæ è®ºæ¯å¦é½ä¼ç»§ç»­èµ°afterOkæ å°äºä»¶ */\r\n    dictPicked = (arg: any): Observable<PickedResult> => {\r\n        if (this.useBeforeCloseEvent && this.beforeClose) {\r\n            return this.beforeClose(arg).pipe(map(val => {\r\n                // å¦æè½å³é­ï¼è°ç¨åäºä»¶\r\n                if (val.closeDialog) {\r\n                    this.afterConfirm.next(arg);\r\n                }\r\n                return val;\r\n            }));\r\n        } else {\r\n            return of({ closeDialog: true });\r\n        }\r\n    }\r\n\r\n    /** å¸®å©æ å°åäºä»¶ */\r\n    afterOk = (helpdata, mapfields) => {\r\n        if (this.useBeforeCloseEvent) {\r\n            return;\r\n        }\r\n        if(this.typeMode&&this.typeMode===1){\r\n            if(!this.singleSelect){\r\n                this.selectedData = this.selectedData.filter(item=>{\r\n                    if(this.allData.findIndex(element=>{\r\n                        if(item.hasOwnProperty(\"id\")){\r\n                            return element.id===item.id;\r\n                        }else{\r\n                            return element.id===item;\r\n                        }\r\n                    })>-1){\r\n                        return true;\r\n                    }else{\r\n                        return false;\r\n                    }\r\n                });\r\n        \r\n                this.selectedData.forEach((item,index)=>{\r\n                    if(!item.hasOwnProperty(\"id\")){\r\n                        this.allData.forEach(element=>{\r\n                            if(element.id===item){\r\n                                this.selectedData[index] = element;\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n                helpdata = this.selectedData;\r\n            }\r\n        }\r\n\r\n        if (helpdata) {\r\n            // å¤éçè¯éè¦å¤ç,å¸®å©å·²éå·ä¸ºé´é\r\n            if (!this.singleSelect) {\r\n                const idList: string[] = helpdata.map(item => item.id);\r\n                const nameList: string[] = helpdata.map(item => item.name);\r\n                const nameStr = nameList.join();\r\n                const idStr = idList.join();\r\n                this.displayTxt = nameStr;\r\n                this.bindingData.id = idStr;\r\n                this.bindingData.name = nameStr;\r\n            } else {\r\n                this.displayTxt = helpdata.name;\r\n            }\r\n        } else {// ç®åæ¸ç©ºä¼èµ°è¿éï¼èä¸ä¸¤æ¬¡\r\n        }\r\n        // è§¦åäºä»¶\r\n        this.afterConfirm.next(helpdata);\r\n        // this.afterConfirmData.next(this.selctedData);\r\n    }\r\n\r\n    /** æ¸ç©ºå */\r\n    afterClear (arg: any) {\r\n        this.clear.next(arg);\r\n    }\r\n\r\n    /** æå¨æ¾ç¤ºå¸®å© */\r\n    public showHelp() {\r\n        this.farrisLookUp.showDialog();\r\n    }\r\n\r\n    oncheckedChange(arg:any){ \r\n        if(this.singleSelect){\r\n            this.selectedData=[];\r\n        }       \r\n        if(arg.isCheck){\r\n            arg.data.forEach(item=>{\r\n                if(this.selectedData.indexOf(item.id)===-1){\r\n                    this.selectedData.push(item);\r\n                }\r\n            });\r\n        }else{\r\n            this.selectedData = this.selectedData.filter(item=>{\r\n                if(arg.data.findIndex(element=>{return item.hasOwnProperty(\"id\")?item.id===element.id:item===element.id})>-1){\r\n                    return false;\r\n                }else{\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    onOkClick=()=>{\r\n        if (this.useBeforeCloseEvent) {\r\n            return;\r\n        }\r\n        let helpdata :any;\r\n        if(!this.selectedData||this.selectedData.length===0){\r\n            if(this.singleSelect){\r\n                this.afterConfirm.next(helpdata);\r\n            }else{\r\n                this.afterConfirm.next([]);\r\n            }\r\n            this.farrisLookUp.closeDialog();\r\n            return;\r\n        }\r\n\r\n        this.selectedData = this.selectedData.filter(item=>{\r\n            if(this.allData.findIndex(element=>{\r\n                if(item.hasOwnProperty(\"id\")){\r\n                    return element.id===item.id;\r\n                }else{\r\n                    return element.id===item;\r\n                }\r\n            })>-1){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        });\r\n\r\n        this.selectedData.forEach((item,index)=>{\r\n            if(!item.hasOwnProperty(\"id\")){\r\n                this.allData.forEach(element=>{\r\n                    if(element.id===item){\r\n                        this.selectedData[index] = element;\r\n                    }\r\n                })\r\n            }\r\n        });\r\n        helpdata = this.selectedData;\r\n\r\n        if (helpdata&&helpdata.length>0) {\r\n            // å¤éçè¯éè¦å¤ç,å¸®å©å·²éå·ä¸ºé´é\r\n            if (!this.singleSelect) {\r\n                const idList: string[] = helpdata.map(item => item.id);\r\n                const nameList: string[] = helpdata.map(item => item.name);\r\n                const nameStr = nameList.join();\r\n                const idStr = idList.join();\r\n                this.displayTxt = nameStr;\r\n                this.bindingData.id = idStr;\r\n                this.bindingData.name = nameStr;\r\n                this.afterConfirm.next(helpdata);\r\n\r\n            } else {\r\n                let nameStr = helpdata[0].name;\r\n                this.displayTxt = nameStr;\r\n                this.afterConfirm.next(helpdata[0]);\r\n            }\r\n        } else {// ç®åæ¸ç©ºä¼èµ°è¿éï¼èä¸ä¸¤æ¬¡\r\n            this.afterConfirm.next(helpdata);\r\n        }\r\n        // è§¦åäºä»¶\r\n        this.farrisLookUp.closeDialog();\r\n    }\r\n\r\n}\r\n\r\n","export class HelpFilterMap {\r\n    /** å¸®å©åæ°æ®çè¿æ»¤æ¡ä»¶ */\r\n    helpMeta: Map<string, any> = new Map<string, any>();\r\n}\r\n","import { forEach } from '@angular/router/src/utils/collection';\r\nimport { SysHelpService } from './../service/sys-help.service';\r\nimport { Component, OnInit, Input, EventEmitter, Output, ViewChild } from '@angular/core';\r\nimport { TreeFilter } from '../filter/tree-filter';\r\nimport { LookupGridComponent, ServerSideToken, PickedResult } from '@farris/ui-lookup';\r\nimport { SysCommonUtilService } from '@gsp-sys/sysmgr-common';\r\nimport { sysOrgHelp, posGroupHelp, roleGroupHelp, userGroupHelp } from '../help-meta/sys-help-meta';\r\nimport { SysFarrisLookupService } from '../service/sys-farris-lookup.service';\r\nimport { of, Observable } from 'rxjs';\r\nimport { SysLocaleService } from '../../locale/sys-locale.service';\r\nimport { LanguageService } from '@ecp-caf/caf-common';\r\nimport { HELP_LOCALE_ZHCHS } from '../../locale/locales/zh-cn/help';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'sys-farris-tree-help',\r\n    templateUrl: './sys-farris-tree-help.component.html',\r\n    styleUrls: ['./sys-farris-tree-help.component.css'],\r\n    providers: [\r\n        { provide: ServerSideToken, useClass: SysFarrisLookupService }\r\n    ]\r\n})\r\nexport class SysFarrisTreeHelpComponent implements OnInit {\r\n    /** æ¯å¦åªè¯» */\r\n    @Input() disabled = false;\r\n    /** æ é¢ */\r\n    @Input() title: string;\r\n    /** æ¯å¦åå±å è½½ç»ç» */\r\n    @Input() async = false;\r\n    /** åæ°æº */\r\n    @Input() sourceType: 'org' | 'usergroup' | 'positiongroup' | 'rolegroup';\r\n    /** æ¯å¦åé */\r\n    @Input() singleSelect = true;\r\n    /** ç»å®å°å¸®å©ä¸çæ°æ®ï¼åå§æ¾ç¤ºå¼ç¨ */\r\n    @Input() displayTxt: string;\r\n    /** å­å¨å¸®å©éæ©çå¯¹è±¡ */\r\n    @Input() bindingData: { id: string, name: string };\r\n    /** è¿æ»¤æ¡ä»¶ */\r\n    @Input() filter: TreeFilter;\r\n    /**\r\n     * æå¼å¸®å©åæ¯å¦æéä¸­æ°æ®\r\n     */\r\n    @Input() enableToSelect=true;\r\n    /** å¯ç¨å³é­åäºä»¶ */\r\n    @Input() useBeforeCloseEvent = false;\r\n    @Input() beforeClose: (selectData: any) => Observable<PickedResult>;\r\n    /** æ¯å¦å¼å§æ°æ®æéè¿æ»¤ */\r\n    @Input() withPermission = false;\r\n    /** å¸®å©éæ©åäºä»¶ */\r\n    @Output() afterConfirm: EventEmitter<any> = new EventEmitter<any>();\r\n    /** æ¸ç©ºåäºä»¶-ææ¶ä¸ç¨ */\r\n    @Output() clear: EventEmitter<any> = new EventEmitter<any>();\r\n    @Input() showAllPathOrg:boolean = false;\r\n    @ViewChild('farristreelookup') public farrisLookUp: LookupGridComponent;\r\n    mapFields = { id: 'id', name: 'name' };\r\n\r\n    dataUri: string;\r\n    columns: any;\r\n    treeInfo: any;\r\n    public allData = [];\r\n    public i18nRes: any;\r\n    constructor (\r\n        public sysUtil: SysCommonUtilService,\r\n        public localService: SysLocaleService,\r\n        public sysHelpService: SysHelpService,\r\n    ) {\r\n    }\r\n\r\n    ngOnInit () {\r\n        if (this.localService) {\r\n            this.i18nRes = this.localService.getComponentOpt('help');\r\n        } else {\r\n            this.i18nRes = HELP_LOCALE_ZHCHS;\r\n        }\r\n        // é»è®¤ä¸åå±å è½½\r\n        this.treeInfo = {\r\n            loadDataType: 'all',\r\n            layerType: 'parentId',\r\n            dataField: 'treeInfo',\r\n            pathField: 'path',\r\n            layerField: 'layer',\r\n            parentField: 'parentId',\r\n            isDetailField: 'isDetail',\r\n            treeDataIsInit: false\r\n        };\r\n        this.columns = [\r\n            { title: this.i18nRes.codeField, field: 'code', searchField: 'code' },\r\n            { title: this.i18nRes.nameField, field: 'name', searchField: 'name' },\r\n        ];\r\n        // å¼æ­¥å è½½çè¯éè¦å¼å¯è¿ä¸¤ä¸ªå¼å³\r\n        if (this.async) {\r\n            this.treeInfo.loadDataType = 'async';\r\n            this.treeInfo.treeDataIsInit = true;\r\n        }\r\n        // webapiåå§\r\n        switch (this.sourceType) {\r\n            case 'org':\r\n                this.dataUri = sysOrgHelp + this.sysUtil.sysOrgWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.userOrgTitle;\r\n                }\r\n                break;\r\n            case 'usergroup':\r\n                this.dataUri = userGroupHelp + this.sysUtil.userGroupWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.userGroupTitle;\r\n                }\r\n                break;\r\n            case 'positiongroup':\r\n                this.dataUri = posGroupHelp + this.sysUtil.posGroupWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.positionGroupTitle;\r\n                }\r\n                break;\r\n            case 'rolegroup':\r\n            default:\r\n                this.dataUri = roleGroupHelp + this.sysUtil.roleGroupWebApi;\r\n                if (!this.title) {\r\n                    this.title = this.i18nRes.roleGroupTitle;\r\n                }\r\n                break;\r\n        }\r\n        // å¿é¡»è¦æï¼å¦ååå§éä¸­ä¸èµ·ä½ç¨\r\n        this.farrisLookUp.mapFields = { id: 'id', name: 'name' };\r\n    }\r\n\r\n    /** å¸®å©åäºä»¶,å¼ºè¡ä¼ éè¿æ»¤æ¡ä»¶ */\r\n    beforeOpen = (arg) => {\r\n        //å¦ææè¿æ»¤æ¡ä»¶ï¼éå å°urlè·¯å¾\r\n        let farrisSelectedData = [];\r\n        let selectedData = [];\r\n        let temp = 0;\r\n\r\n        if(this.bindingData!=null&&this.bindingData.id!=null&&this.bindingData.id!=\"\"){\r\n            selectedData = this.bindingData.id.split(',');\r\n            let selectedDataName = this.bindingData.name.split(',');\r\n\r\n            selectedData.forEach(item=>{\r\n                farrisSelectedData.push({\"id\":item,\"name\":selectedDataName[temp]});\r\n                temp = temp+1;\r\n\r\n            });\r\n        }\r\n        return of({\r\n            showDialog: true,\r\n            data: {\r\n                filter: this.filter,\r\n                allData: this.allData,\r\n                farrisSelectedData:farrisSelectedData\r\n            }\r\n        });\r\n    }\r\n\r\n    /** å¸®å©å³é­åäºä»¶,ç®åæ è®ºæ¯å¦é½ä¼ç»§ç»­èµ°afterOkæ å°äºä»¶ */\r\n    dictPicked = (arg: any): Observable<PickedResult> => {\r\n        if (this.useBeforeCloseEvent && this.beforeClose) {\r\n            return this.beforeClose(arg).pipe(map(val => {\r\n                // å¦æè½å³é­ï¼è°ç¨åäºä»¶\r\n                if (val.closeDialog) {\r\n                    this.afterConfirm.next(arg);\r\n                }\r\n                return val;\r\n            }));\r\n        } else {\r\n            return of({ closeDialog: true });\r\n        }\r\n    }\r\n    /** å¸®å©æ å°åäºä»¶ */\r\n    afterOk = (helpdata, mapfields) => {\r\n        // å¦æå¯ç¨äºå³é­åæ ¡éªäºä»¶ï¼ä¸èµ°è¿é\r\n        if (this.useBeforeCloseEvent) {\r\n            return;\r\n        }\r\n        if (helpdata) {\r\n            // å¤éçè¯éè¦å¤ç,å¸®å©å·²éå·ä¸ºé´é\r\n            if (!this.singleSelect) {\r\n                const idList: string[] = helpdata.map(item => item.id);\r\n                const nameList: string[] = helpdata.map(item => item.name);\r\n                this.bindingData.id = idList.join();\r\n                this.bindingData.name = nameList.join();\r\n                this.displayTxt = this.bindingData.name;\r\n                this.afterConfirm.next(helpdata);\r\n\r\n            } else {\r\n                // å¸®å©æ¾ç¤º\r\n                this.displayTxt = helpdata.name;\r\n                if(this.showAllPathOrg){\r\n                    this.sysHelpService.getParentOrg(helpdata).subscribe(items=>{\r\n                        if(items&&items.length>0){\r\n                            helpdata.allPathOrg=items;\r\n                        }\r\n                        this.afterConfirm.next(helpdata);\r\n                        console.log(helpdata);\r\n                    });\r\n                }else{\r\n                    this.afterConfirm.next(helpdata);\r\n\r\n                }\r\n            }\r\n        } else {// ç®åæ¸ç©ºä¼èµ°è¿éï¼èä¸ä¸¤æ¬¡\r\n            // è§¦åäºä»¶\r\n            this.afterConfirm.next(helpdata);\r\n            console.log(helpdata);\r\n        }\r\n\r\n    }\r\n\r\n    /** æ¸ç©ºå */\r\n    afterClear(arg: any) {\r\n        this.clear.next(arg);\r\n    }\r\n\r\n    /** æå¨æ¾ç¤ºå¸®å© */\r\n    public showHelp() {\r\n        this.farrisLookUp.showDialog();\r\n    }\r\n    search($event){\r\n        console.log($event);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SysHelpService } from './service/sys-help.service';\r\nimport { SysCommonUtilService, SysCommonModule } from '@gsp-sys/sysmgr-common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { SysExceptionService } from './service/sys-exception.service';\r\nimport { GroupNavComponent } from './group-nav/group-nav.component';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { GroupService } from './group-nav/group.service';\r\nimport { LookupModule } from '@farris/ui-lookup';\r\nimport { SysFarrisLookupComponent } from './sys-farris-lookup/sys-farris-lookup.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HelpFilterMap } from './service/help-filter-map';\r\nimport { SysFarrisTreeHelpComponent } from './sys-farris-tree-help/sys-farris-tree-help.component';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { SysLocaleService } from '../locale/sys-locale.service';\r\nimport { LanguageService } from '@ecp-caf/caf-common';\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        HttpClientModule,\r\n        LookupModule,\r\n        ModalModule.forRoot(),\r\n        MessagerModule.forRoot(),\r\n        DatagridModule,\r\n        TreeTableModule,\r\n        SysCommonModule\r\n    ],\r\n    declarations: [\r\n        GroupNavComponent,\r\n        SysFarrisLookupComponent,\r\n        SysFarrisTreeHelpComponent\r\n    ],\r\n    exports: [\r\n        GroupNavComponent,\r\n        SysFarrisLookupComponent,\r\n        SysFarrisTreeHelpComponent\r\n    ],\r\n    providers: [\r\n        HelpFilterMap,\r\n        SysHelpService,\r\n        SysExceptionService,\r\n        SysCommonUtilService,\r\n        GroupService,\r\n        LanguageService,\r\n        CookieService,\r\n        SysLocaleService]\r\n})\r\nexport class SysManagerUIModule { }\r\n","/**\r\n * æ°æ®æéæä½\r\n */\r\nexport class AuthOp {\r\n    public static userManage = 'UserManage';\r\n    public static userView = 'UserView';\r\n    public static  userAssPosition = 'UserAssPosition';\r\n\r\n    public static positionManage = 'PositionManage';\r\n    public static positionView = 'PositionView';\r\n    public static positionAssRole = 'PositionAssRole';\r\n    /** å·²ç»åºå¼ */\r\n    public static  positionAssUser = 'PositionAssUser';\r\n\r\n    public static roleManage = 'RoleManage';\r\n    /** å·²ç»åºå¼ */\r\n    public static  roleAssPosition = 'RoleAssPosition';\r\n}\r\n"],"names":["filter","KendoLayoutModule"],"mappings":"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"}
