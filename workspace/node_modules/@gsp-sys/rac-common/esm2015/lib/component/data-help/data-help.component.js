/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, Input, Output, EventEmitter } from '@angular/core';
import { NotifyService } from '@farris/ui-notify';
import { TreeTableComponent } from '@farris/ui-treetable';
import { MessagerService } from '@farris/ui-messager';
import { AuthDataSource } from '../../common/entity/auth-data-source.entity';
import { RacCommonUtil } from '../../common/util/rac-util';
import { INIT_SKIP, BUTTONCOUNT, PAGESIZES, INIT_PAGEINDEX, INIT_PAGESIZE } from '../../common/util/page';
import { HierarchicalType } from '../../common/entity/hierarchical-type.enum';
import { TreeService } from '../../common/service/tree.service';
/**
 * 用户授权业务组织组件
 */
export class DataHelpComponent {
    /**
     * @param {?} session
     * @param {?} msgService
     * @param {?} notifyService
     * @param {?} treeService
     */
    constructor(session, msgService, notifyService, treeService) {
        this.session = session;
        this.msgService = msgService;
        this.notifyService = notifyService;
        this.treeService = treeService;
        this.closeModalEmitter = new EventEmitter();
        /**
         * 弹出框中用到的最终选中的数据
         */
        this.selectEmitter = new EventEmitter();
        this.selectedModels = [];
        this.hasSelectKeys = []; // 输入 修改前，已经选中
        // 输入 修改前，已经选中
        this.isHasSelectAll = false; // 输入 之前是否全选
        // 输入 之前是否全选
        this.authField = ''; // 全局业务组织内码
        // 全局业务组织内码
        this.ownerId = ''; // 用户内码
        // 用户内码
        this.canAssignDatas = []; // 可分配的数据源
        // 数据是否完整；完整表示可以分*
        this.isDisplayTree = false; // 输入
        // 输入
        this.isShowSearch = false; // 是否展示搜索
        // 是否展示搜索
        this.isSelectAll = false;
        this.selectKeys = [];
        /**
         * 是否单选
         */
        this.singleSelect = false;
        this.treeHeight = '342px';
        /**
         * 是否受维度分组
         */
        this.isAuGroup = true;
        /**
         * 弹出框中用到的最终选中的数据
         */
        this.selectByGroupEmitter = new EventEmitter();
        // 业务数据源相关信息
        this.dataKey = ''; // 取数主键列
        // 取数主键列
        this.helpFields = []; // 字段显示名
        // 字段显示名
        this.showFields = []; // 显示的字段
        // 显示的字段
        this.codeOrNameFields = []; // 搜索的字段；
        // 搜索的字段；
        this.authDataSource = new AuthDataSource();
        /**
         * 是否可用
         */
        this.isEnable = true;
        /**
         * 是否全部权限
         */
        this.isAllAuth = false;
        // 组件上用skip
        this.skip = INIT_SKIP;
        this.pageSize = INIT_PAGESIZE;
        this.pageIndex = INIT_PAGEINDEX;
        // 树控件
        // 树控件绑定的数据
        this.treedata = [];
        // 绑定树的平铺数据
        this.flatData = [];
        /**
         * root根节点，用于默认展开
         */
        this.root = '';
        this.saveSelections = [];
        // TreeTable上要显示的列
        this.treeCols = [];
        // [
        //   { field: 'name', title: '名称', width: 100 },
        //   { field: 'code', title: '编号', width: 100 },
        // ];
        // 树节点加载方式，async异步，all 同步
        this.loadDataType = 'all'; // 'all' | 'async'
        // 'all' | 'async'
        // 树节点选中动作
        this.cascadeCheck = false;
        this.cascadeUp = false;
        this.cascadeDown = true;
        // 是否已经加载过
        this.isTreeLoaded = false;
        /**
         * 要搜索的信息
         */
        this.searchInfo = '';
        /**
         * 要搜索的信息
         */
        this.searchDatas = [];
        // searchTitle = this.translate.instant('auresult_search_label');
        this.searchTitle = '查找';
        // 上次搜索文本
        this.oldTreeSearch = '';
        this.treeSearchIndex = 0;
        // 分页模式
        this.pageSetting = {
            buttonCount: BUTTONCOUNT,
            info: true,
            pageSizes: PAGESIZES,
            previousNext: true
        };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * 获取可分配的业务数据
     * @return {?}
     */
    getAuthDataSource() {
        this.isSelectAll = false;
        this.session.ownerId = this.ownerId;
        this.session.ownerType = 2;
        this.selectKeys = [];
        this.treeCols = [];
        this.treedata = [];
        this.cascadeCheck = false; // load数据时，级联先关闭，否则会导致下级选中，自动选中上级
        if (this.session.isNullOrEmptyString(this.authField)) {
            this.canAssignDatas = [];
            this.isSelectAll = false;
            return;
        }
    }
    /**
     * 根据获取到的权限结果数据，加载界面
     * @return {?}
     */
    displayData() {
        this.selectKeys = [];
        this.treeCols = [];
        this.treedata = [];
        this.cascadeCheck = false; // load数据时，级联先关闭，否则会导致下级选中，自动选中上级
        if (this.session.isNullOrEmptyString(this.authField)) {
            this.canAssignDatas = [];
            this.isSelectAll = false;
            return;
        }
        this.showElement('checkall');
        this.isSelectAll = false;
        this.authDataSource.data = this.data.data;
        this.authDataSource.showFields = this.data.showFields;
        this.authDataSource.keyField = this.data.keyField;
        this.authDataSource.helpFields = this.data.helpFields;
        this.authDataSource.hierarchicalType = this.data.hierarchicalType;
        this.authDataSource.hierarchicalInfo = this.data.hierarchicalInfo;
        this.canAssignDatas = this.authDataSource.data;
        this.searchDatas = this.canAssignDatas;
        this.dataKey = this.authDataSource.keyField;
        this.helpFields = this.authDataSource.helpFields;
        this.showFields = this.authDataSource.showFields;
        this.codeOrNameFields = this.getCodeOrNameFields();
        if (this.hasSelectKeys.find((/**
         * @param {?} x
         * @return {?}
         */
        x => x === '*'))) {
            this.isSelectAll = this.isHasSelectAll = true;
        }
        if (this.isAllAuth) {
            this.isSelectAll = this.isHasSelectAll = true;
        }
        if (this.isSelectAll) {
            // TODO  如何搞成 直接选中全部
            this.canAssignDatas.forEach((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                this.selectKeys.push(item[this.dataKey]);
            }));
        }
        else if (this.hasSelectKeys) {
            this.hasSelectKeys.forEach((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                this.selectKeys.push(item);
            }));
        }
        // 显示列表
        if (this.isDisplayTree === false) {
            this.queryByPage();
            return;
        }
        // 显示树信息
        this.showTreeInfo();
    }
    /**
     * 展示树形相关数据
     * @return {?}
     */
    showTreeInfo() {
        this.hideElement('checkall');
        // if (this.farrisTree === undefined) {
        //     return;
        // }
        // 处理树形相关逻辑
        this.authDataSource.showFields.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            this.treeCols.push({ field: item.field, title: item.title, width: 100 });
        }));
        /** @type {?} */
        const hierarchicalType = this.authDataSource.hierarchicalType;
        /** @type {?} */
        const hierarchicalInfo = this.authDataSource.hierarchicalInfo;
        if (hierarchicalType === HierarchicalType.Parent) {
            /** @type {?} */
            let parentKey = this.dataKey;
            if (hierarchicalInfo.parentKeyField && hierarchicalInfo.parentKeyField.length > 0) {
                parentKey = hierarchicalInfo.parentKeyField;
            }
            this.treedata = this.treeService.makeTreeByParent(this.canAssignDatas, hierarchicalInfo.parentField, parentKey);
        }
        else {
            this.treedata = this.treeService.makeTreeByPath(this.canAssignDatas, hierarchicalInfo.pathField);
        }
        // 找到第一层   直接展开
        // 初始加载不级联，否则会导致下级选中，自动选中上级
        this.farrisTree.cascadeCheck = false;
        this.isTreeLoaded = false;
        this.farrisTree.loadedData.subscribe((/**
         * @param {?} d
         * @return {?}
         */
        d => {
            // 加载过，之后不需要再次加载
            if (this.isTreeLoaded === true) {
                return;
            }
            // 初始加载不级联，否则会导致下级选中，自动选中上级
            this.farrisTree.cascadeCheck = false;
            // 根节点默认展开
            if ((this.root) && this.root !== '') {
                this.farrisTree.expandNode(this.root);
            }
            if (this.isSelectAll) {
                this.farrisTree.checkAllNodes();
            }
            else if (this.hasSelectKeys.length > 0) {
                this.farrisTree.checkedNodes(this.hasSelectKeys);
            }
            // load完数据时，级联打开，可以选中上级自动选中下级
            this.farrisTree.cascadeCheck = true;
            // 加载过，之后不需要再次加载
            this.isTreeLoaded = true;
        }));
    }
    /**
     * 报错处理
     * @param {?} error
     * @return {?}
     */
    handleError(error) {
        this.authDataSource.data = [];
        console.log(error);
        console.log(error.error.Message);
        this.msgService.error(error.error.Message);
    }
    // 选择属性：单选、多选
    /**
     * @return {?}
     */
    get selectableSettings() {
        return {
            checkboxOnly: true,
            mode: this.singleSelect ? 'single' : 'multiple',
            enabled: true
        };
    }
    // 图标
    /**
     * @param {?} __0
     * @return {?}
     */
    iconClass({ type }) {
        return {
            'k-i-folder': true,
            'k-icon': true
        };
    }
    /**
     * 获取选择信息
     * @return {?}
     */
    getSelectInfo() {
        this.selectedModels = [];
        /** @type {?} */
        const result = {
            data: [],
            selectedKey: []
        };
        // 全选
        if (this.isSelectAll && this.isIntegrityData && this.data.length === this.selectKeys) {
            /** @type {?} */
            const obj = {
                data: '*'
            };
            this.selectedModels.push(obj);
            result.data = ['*'];
            result.selectedKey = ['*'];
            return result;
        }
        // 树显示，需要先根据选中的数据构造selectKeys
        if (this.isDisplayTree) {
            // 选中的行，过滤掉业务对象，只保留功能操作
            if (this.farrisTree.checkeds) {
                /** @type {?} */
                const checkedRows = this.farrisTree.checkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.data));
                // 过滤功能操作分组的行
                // let checkedOpRows = this.checkedRows.filter(x => x.type === '1');
                this.selectKeys = checkedRows.map((/**
                 * @param {?} m
                 * @return {?}
                 */
                m => m[this.dataKey]));
            }
            else {
                this.selectKeys = [];
            }
        }
        if (this.selectKeys.length > 0) {
            this.selectKeys.map((/**
             * @param {?} x
             * @return {?}
             */
            x => {
                /** @type {?} */
                const findObj = this.canAssignDatas.find((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y[this.dataKey] === x));
                this.selectedModels.push(findObj);
            }));
        }
        result.data = this.selectedModels;
        result.selectedKey = this.selectKeys;
        return result;
    }
    /**
     * 判断是否分了全部权限*，首先必须全选，其次必须是数据完整的，然后选中的数据必须与数据源长度一致（如果仅搜索后的全选，不是*）
     * @return {?}
     */
    getIsAllAuth() {
        return this.isSelectAll && this.isIntegrityData && this.data.length === this.selectKeys;
    }
    /**
     * 确定发射选中数据以及选中内码
     * @return {?}
     */
    confirm() {
        this.closeModalEmitter.next();
        this.selectedModels = [];
        if (this.getIsAllAuth()) {
            /** @type {?} */
            const obj = {
                data: '*'
            };
            this.selectedModels.push(obj);
            this.selectEmitter.next({
                data: ['*'],
                selectedKey: ['*']
            });
            return;
        }
        // 树显示，需要先根据选中的数据构造selectKeys
        if (this.isDisplayTree) {
            // 选中的行，过滤掉业务对象，只保留功能操作
            if (this.farrisTree.checkeds) {
                /** @type {?} */
                const checkedRows = this.farrisTree.checkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.data));
                // 过滤功能操作分组的行
                // let checkedOpRows = this.checkedRows.filter(x => x.type === '1');
                this.selectKeys = checkedRows.map((/**
                 * @param {?} m
                 * @return {?}
                 */
                m => m[this.dataKey]));
            }
            else {
                this.selectKeys = [];
            }
        }
        if (this.selectKeys.length > 0) {
            this.selectKeys.map((/**
             * @param {?} x
             * @return {?}
             */
            x => {
                /** @type {?} */
                const findObj = this.canAssignDatas.find((/**
                 * @param {?} y
                 * @return {?}
                 */
                y => y[this.dataKey] === x));
                this.selectedModels.push(findObj);
            }));
        }
        this.selectEmitter.next({
            data: this.selectedModels,
            selectedKey: this.selectKeys
        });
    }
    /**
     * @return {?}
     */
    cancle() {
        this.closeModalEmitter.next();
    }
    /**
     * 全选，这里全选可能是过滤后数据的全选
     * @return {?}
     */
    checkAllClick() {
        this.isSelectAll = !this.isSelectAll;
        /** @type {?} */
        let key = '';
        if (this.isSelectAll) {
            // 如果已经选中，则不处理，没有选中，则选中
            this.searchDatas.forEach((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                key = data[this.dataKey];
                /** @type {?} */
                const index = this.selectKeys.findIndex((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x === key));
                if (index < 0) {
                    this.selectKeys.push(key);
                }
            }));
            if (this.isDisplayTree) {
                if (this.farrisTree) {
                    this.farrisTree.checkAllNodes();
                }
            }
        }
        else {
            if (this.isDisplayTree) {
                if (this.farrisTree) {
                    this.farrisTree.unCheckAllNodes();
                }
            }
            else {
                this.searchDatas.forEach((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    key = data[this.dataKey];
                    /** @type {?} */
                    const index = this.selectKeys.findIndex((/**
                     * @param {?} x
                     * @return {?}
                     */
                    x => x === key));
                    if (index > -1) {
                        // 如果已经选中，就删除
                        this.selectKeys.splice(index, 1);
                    }
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    checkClick() {
        this.isSelectAll = !this.isSelectAll;
        if (this.isSelectAll) {
            // TODO  如何搞成 直接选中全部
            this.canAssignDatas.forEach((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                this.selectKeys.push(data[this.dataKey]);
            }));
            this.farrisTree.checkAllNodes();
            this.selectByGroupEmitter.next(['*']);
        }
        else {
            //  this.farrisTree.unCheckAllNodes();
            this.selectKeys = [];
            this.selectByGroupEmitter.next([]);
        }
    }
    /**
     * 选择事件
     * @param {?} e
     * @return {?}
     */
    onSelectedKeysChange(e) {
        /** @type {?} */
        const len = this.selectKeys.length;
        if (len !== this.canAssignDatas.length) {
            // 如果全部选中了，isSelectAll 也不需要设置为true；isSelectAll的含义是*的意思，新增数据也被选中
            this.isSelectAll = false;
        }
        if (this.isSelectAll) {
            this.selectByGroupEmitter.next(['*']);
        }
        else {
            this.selectByGroupEmitter.next(this.selectKeys);
        }
    }
    /**
     * 点击分页查询或者分页参数变化后查询
     * @param {?} event 分页参数
     * @return {?}
     */
    pageChange(event) {
        // skip和pageSize必须得重新赋值，因为可能用户重新选择了分页大小或者分页索引
        // 刷新界面按钮数量和焦点
        this.skip = event.skip;
        this.pageSize = event.take;
        this.pageIndex = this.skip / this.pageSize + 1;
        // 查询
        this.queryByPage();
    }
    /**
     * 列表的查询
     * @return {?}
     */
    queryByPage() {
        this.gridView = {
            data: this.searchDatas.slice(this.skip, this.skip + this.pageSize),
            total: this.searchDatas.length
        };
    }
    /**
     * @return {?}
     */
    searchClick() {
        this.search(this.searchInfo);
    }
    /**
     * 搜索树状
     * @param {?} txt
     * @return {?}
     */
    search(txt) {
        if (this.isDisplayTree) {
            this.searchTree(txt);
            return;
        }
        this.searchInfo = txt;
        if (this.session.isNullOrEmptyString(this.searchInfo)) {
            this.searchDatas = this.canAssignDatas;
            this.queryByPage();
            return;
        }
        this.searchDatas = [];
        this.canAssignDatas.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < this.showFields.length; i++) {
                if (item[this.showFields[i].field].toString().indexOf(this.searchInfo) > -1) {
                    this.searchDatas.push(item);
                    break;
                }
            }
        }));
        this.queryByPage();
    }
    /**
     * 获取编号或者名称字段
     * @return {?}
     */
    getCodeOrNameFields() {
        /** @type {?} */
        const result = [];
        this.showFields.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (item.field.toLocaleLowerCase().indexOf('code') > -1 ||
                item.field.toLocaleLowerCase().indexOf('name') > -1) {
                result.push(item);
            }
        }));
        if (result.length === 0) {
            result.push(this.showFields[0]);
        }
        return result;
    }
    /**
     * @param {?} arg
     * @return {?}
     */
    searchTreeSelf(arg) {
        this.searchTree(arg.value);
    }
    /**
     * 搜索， 此处是分层加载，搜索时需要根据原数据进行搜索，搜索后，需要将对应父节点展示
     * @param {?} txt
     * @return {?}
     */
    searchTree(txt) {
        // 搜索内容为空，不处理
        if (!txt) {
            this.treeSearchIndex = 0;
            return;
        }
        this.farrisTree.clearSelections();
        // 搜索内容与上次不同，重新搜索
        if (this.oldTreeSearch !== txt) {
            // 置空重新搜索
            this.searchDatas = [];
            this.canAssignDatas.forEach((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                // 遍历搜索字段
                // tslint:disable-next-line:prefer-for-of
                for (let i = 0; i < this.codeOrNameFields.length; i++) {
                    /** @type {?} */
                    const field = this.codeOrNameFields[i].field;
                    if (item[field].indexOf(txt) > -1) {
                        this.searchDatas.push(item);
                        break;
                    }
                }
            }));
            // 首次搜索，从第一个开始搜索
            this.treeSearchIndex = 0;
        }
        if (this.searchDatas.length === 0) {
            this.msgService.warning('没有满足条件的数据!');
            return;
        }
        // 搜到指定对象，需要设置父节点全部展开,其他节点全部收起
        /** @type {?} */
        const key = this.searchDatas[this.treeSearchIndex][this.dataKey];
        this.farrisTree.selectNode(key);
        this.farrisTree.collapseAll();
        // 展开父级
        this.expandParent(key);
        this.oldTreeSearch = txt;
        this.treeSearchIndex = this.treeSearchIndex + 1;
        // 已经搜索到最后，需要重头搜索
        if (this.treeSearchIndex === this.searchDatas.length) {
            this.oldTreeSearch = '';
            this.treeSearchIndex = 0;
        }
    }
    /**
     * 逐一找到需要展开的父节点，全部展开
     * @param {?} key
     * @return {?}
     */
    expandParent(key) {
        /** @type {?} */
        const parent = this.farrisTree.findRowNode(key);
        /** @type {?} */
        let parentNode = parent.parent;
        if (parentNode) {
            while (parentNode) {
                this.farrisTree.expandNode(parentNode.id);
                parentNode = parentNode.parent;
            }
        }
        else {
            this.farrisTree.expandNode(key);
        }
    }
    /**
     * 树形选中全部
     * @return {?}
     */
    treeCheckAll() {
        this.isSelectAll = true;
    }
    /**
     * 树形取消全部
     * @return {?}
     */
    treeUnCheckAll() {
        this.isSelectAll = false;
    }
    /**
     * 取消勾选
     * @return {?}
     */
    nodeUnChecked() {
        if (this.isSelectAll) {
            this.isSelectAll = false;
        }
    }
    /**
     * @param {?} elementName
     * @return {?}
     */
    showElement(elementName) {
        if (document.getElementById(elementName)) {
            document.getElementById(elementName).style.display = '';
        }
    }
    /**
     * @param {?} elementName
     * @return {?}
     */
    hideElement(elementName) {
        if (document.getElementById(elementName)) {
            document.getElementById(elementName).style.display = 'none';
        }
    }
}
DataHelpComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'rac-data-help',
                template: "\r\n\r\n<div *ngIf=\"!isDisplayTree\" class=\"f-page flex-column\" style=\"background-color:#ffffff;\">\r\n    <!-- \u6761\u4EF6\u641C\u7D22(click)=\"\" -->\r\n    <div *ngIf=\"isShowSearch\" class=\"mt-1 form-group row ml-1\">\r\n            <div pr-2 text-left class=\"col-xs-3\">\r\n                        <input id=\"checkAllData\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n                            [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkAllClick()\" />\r\n                        <label class=\"ml-2 k-checkbox-label\" for=\"checkAllData\">\u5168\u9009</label>\r\n             </div>\r\n            <label class=\"ml-2\">\u67E5\u627E\uFF1A</label>\r\n            <input type=\"text\" name=\"searchInfo\" [(ngModel)]=\"searchInfo\" style=\"width: 200px;\" />\r\n            <button kendoButton [icon]=\"'search'\" (click)=\"searchClick()\"></button>\r\n    </div>\r\n    <div class=\"f-utils-fill-auto\">\r\n        <kendo-grid #dataGrid [class]=\"'flex-fill'\" [selectable]=\"selectableSettings\"\r\n            [kendoGridSelectBy]=\"authDataSource.keyField\" [selectedKeys]=\"selectKeys\" [data]=\"gridView\" [height]=\"360\"\r\n            (selectedKeysChange)=\"onSelectedKeysChange($event)\" [skip]=\"skip\" [pageable]=\"pageSetting\"\r\n            [pageSize]=\"pageSize\" (pageChange)=\"pageChange($event)\">\r\n            <kendo-grid-checkbox-column title=\"\u9009\u62E9\" width=\"60px\"\r\n          ></kendo-grid-checkbox-column>\r\n            <ng-template ngFor [ngForOf]=\"showFields\" let-column>\r\n                <kendo-grid-column field=\"{{column.field}}\" title=\"{{column.title}}\">\r\n                </kendo-grid-column>\r\n            </ng-template>\r\n        </kendo-grid>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"isDisplayTree\" class=\"f-page flex-column\" style=\"background-color:#ffffff;\">\r\n    <div *ngIf=\"isShowSearch\" class=\"mt-1 form-group row ml-1\">\r\n        <div *ngIf=\"!singleSelect\" id=\"treehead\" class=\"k-form-field\">\r\n            <input id=\"cascadeDown\" class=\"k-checkbox\" type=\"checkbox\" name=\"cascadeDown\" [checked]=\"cascadeDown\"\r\n                [(ngModel)]=\"cascadeDown\" />\r\n            <label class=\"k-checkbox-label\" for=\"cascadeDown\">\u540C\u6B65\u4E0B\u7EA7</label>\r\n        </div>\r\n        <div pr-2 text-left class=\"col-xs-3\">\r\n                <input id=\"checkAllDataTree\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n                    [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkAllClick()\" />\r\n                <label class=\"ml-2 k-checkbox-label\" for=\"checkAllDataTree\">\u5168\u9009</label>\r\n        </div>\r\n    </div>\r\n    <div id=\"treebody\" class=\"f-struct-wrapper f-utils-fill-flex-column\"  [style.height]=\"treeHeight\">\r\n    <farris-treetable #farrisTree class=\"f-utils-fill-flex-column\" [data]=\"this.treedata\" [columns]=\"treeCols\" [idField]=\"dataKey\"\r\n    [showCheckAll]=\"true\"\r\n    [fit]=\"true\"\r\n    [fixedHeader]=\"true\"\r\n    [enableFindText]=\"true\"\r\n    [singleSelect]=\"singleSelect\" \r\n    [resizableColumns]=\"true\" \r\n    [showIcon]=\"true\"\r\n    [selectOnCheck]=\"false\"\r\n    (onlySelectSelf)=\"true\" \r\n    [(cascadeDown)]=\"this.cascadeDown\"\r\n    [(cascadeUp)]=\"this.cascadeUp\"\r\n    [keepSelect]=\"false\" \r\n    [showCheckbox]=\"true\" \r\n    [(loadDataType)]=\"this.loadDataType\" \r\n    (checkAll)=\"treeCheckAll()\" \r\n    (unCheckAll)=\"treeUnCheckAll()\"\r\n    (nodeUnChecked)=\"nodeUnChecked()\"\r\n    [(showFilterBar)] = \"isShowSearch\"\r\n    (search) = \"searchTreeSelf($event)\"\r\n    [allColumnsTitle] = \"searchTitle\">\r\n     </farris-treetable>\r\n    </div>\r\n</div>\r\n<!--\u5168\u9009\u4E0D\u5728\u8FD9\u91CC\r\n  <div id=\"checkall\" >\r\n    <div pr-2 text-left class=\"col-xs-3\">\r\n      <input id=\"checkAllData\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n        [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkClick()\" />\r\n      <label class=\"k-checkbox-label\" for=\"checkAllData\">{{ 'chkCheckAll' | translate }}</label>\r\n    </div>\r\n  </div>\r\n-->",
                styles: [""]
            }] }
];
/** @nocollapse */
DataHelpComponent.ctorParameters = () => [
    { type: RacCommonUtil },
    { type: MessagerService },
    { type: NotifyService },
    { type: TreeService }
];
DataHelpComponent.propDecorators = {
    btnOkAndCancleRef: [{ type: ViewChild, args: ['btnOkAndCancle',] }],
    farrisTree: [{ type: ViewChild, args: ['farrisTree',] }],
    selectEmitter: [{ type: Output }],
    hasSelectKeys: [{ type: Input }],
    isHasSelectAll: [{ type: Input }],
    authField: [{ type: Input }],
    ownerId: [{ type: Input }],
    canAssignDatas: [{ type: Input }],
    data: [{ type: Input }],
    isIntegrityData: [{ type: Input }],
    isDisplayTree: [{ type: Input }],
    isShowSearch: [{ type: Input }],
    singleSelect: [{ type: Input }],
    treeHeight: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    DataHelpComponent.prototype.btnOkAndCancleRef;
    /** @type {?} */
    DataHelpComponent.prototype.farrisTree;
    /** @type {?} */
    DataHelpComponent.prototype.closeModalEmitter;
    /**
     * 弹出框中用到的最终选中的数据
     * @type {?}
     */
    DataHelpComponent.prototype.selectEmitter;
    /** @type {?} */
    DataHelpComponent.prototype.selectedModels;
    /** @type {?} */
    DataHelpComponent.prototype.hasSelectKeys;
    /** @type {?} */
    DataHelpComponent.prototype.isHasSelectAll;
    /** @type {?} */
    DataHelpComponent.prototype.authField;
    /** @type {?} */
    DataHelpComponent.prototype.ownerId;
    /** @type {?} */
    DataHelpComponent.prototype.canAssignDatas;
    /** @type {?} */
    DataHelpComponent.prototype.data;
    /** @type {?} */
    DataHelpComponent.prototype.isIntegrityData;
    /** @type {?} */
    DataHelpComponent.prototype.isDisplayTree;
    /** @type {?} */
    DataHelpComponent.prototype.isShowSearch;
    /** @type {?} */
    DataHelpComponent.prototype.isSelectAll;
    /** @type {?} */
    DataHelpComponent.prototype.selectKeys;
    /**
     * 是否单选
     * @type {?}
     */
    DataHelpComponent.prototype.singleSelect;
    /** @type {?} */
    DataHelpComponent.prototype.treeHeight;
    /**
     * 是否受维度分组
     * @type {?}
     */
    DataHelpComponent.prototype.isAuGroup;
    /**
     * 弹出框中用到的最终选中的数据
     * @type {?}
     */
    DataHelpComponent.prototype.selectByGroupEmitter;
    /** @type {?} */
    DataHelpComponent.prototype.dataKey;
    /** @type {?} */
    DataHelpComponent.prototype.helpFields;
    /** @type {?} */
    DataHelpComponent.prototype.showFields;
    /** @type {?} */
    DataHelpComponent.prototype.codeOrNameFields;
    /** @type {?} */
    DataHelpComponent.prototype.authDataSource;
    /**
     * 是否可用
     * @type {?}
     */
    DataHelpComponent.prototype.isEnable;
    /**
     * 是否全部权限
     * @type {?}
     */
    DataHelpComponent.prototype.isAllAuth;
    /**
     * 分页参数：默认展示200条,可修改
     * @type {?}
     */
    DataHelpComponent.prototype.gridView;
    /** @type {?} */
    DataHelpComponent.prototype.pageSetting;
    /** @type {?} */
    DataHelpComponent.prototype.skip;
    /** @type {?} */
    DataHelpComponent.prototype.pageSize;
    /** @type {?} */
    DataHelpComponent.prototype.pageIndex;
    /** @type {?} */
    DataHelpComponent.prototype.treedata;
    /** @type {?} */
    DataHelpComponent.prototype.flatData;
    /**
     * root根节点，用于默认展开
     * @type {?}
     */
    DataHelpComponent.prototype.root;
    /** @type {?} */
    DataHelpComponent.prototype.saveSelections;
    /** @type {?} */
    DataHelpComponent.prototype.treeCols;
    /** @type {?} */
    DataHelpComponent.prototype.loadDataType;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeCheck;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeUp;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeDown;
    /** @type {?} */
    DataHelpComponent.prototype.isTreeLoaded;
    /**
     * 要搜索的信息
     * @type {?}
     */
    DataHelpComponent.prototype.searchInfo;
    /**
     * 要搜索的信息
     * @type {?}
     */
    DataHelpComponent.prototype.searchDatas;
    /** @type {?} */
    DataHelpComponent.prototype.searchTitle;
    /** @type {?} */
    DataHelpComponent.prototype.oldTreeSearch;
    /** @type {?} */
    DataHelpComponent.prototype.treeSearchIndex;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.session;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.treeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1oZWxwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3lzL3JhYy1jb21tb24vIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L2RhdGEtaGVscC9kYXRhLWhlbHAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFVLFNBQVMsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFDMUMsWUFBWSxFQUM3QixNQUFNLGVBQWUsQ0FBQztBQU12QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBR3RELE9BQU8sRUFBaUIsY0FBYyxFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFFNUYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDMUcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDOUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1DQUFtQyxDQUFDOzs7O0FBV2hFLE1BQU0sT0FBTyxpQkFBaUI7Ozs7Ozs7SUEyRTFCLFlBQ1ksT0FBc0IsRUFDdEIsVUFBMkIsRUFDM0IsYUFBNEIsRUFDNUIsV0FBd0I7UUFIeEIsWUFBTyxHQUFQLE9BQU8sQ0FBZTtRQUN0QixlQUFVLEdBQVYsVUFBVSxDQUFpQjtRQUMzQixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQXpFcEMsc0JBQWlCLEdBQXNCLElBQUksWUFBWSxFQUFnQixDQUFDOzs7O1FBRTlELGtC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Ozs7O0lBRXJCLGlDQUFVOztJQUNWLDJDQUF5Qjs7SUFFekIscUNBQW1COztJQU1uQix5Q0FBcUI7O0lBRXJCLHlDQUFxQjs7SUFDckIsc0NBQWtCOztJQUNsQix3Q0FBbUI7O0lBRW5CLHlDQUFxQjs7Ozs7SUFrQnJCLHVDQUFnQjs7Ozs7SUFFaEIsd0NBQXdCOztJQUV4Qix3Q0FBbUI7O0lBNlhuQiwwQ0FBbUI7O0lBQ25CLDRDQUFvQjs7Ozs7SUFsWmhCLG9DQUE4Qjs7Ozs7SUFDOUIsdUNBQW1DOzs7OztJQUNuQywwQ0FBb0M7Ozs7O0lBQ3BDLHdDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgSW5wdXQsIE91dHB1dCwgT25DaGFuZ2VzLFxyXG4gICAgU2ltcGxlQ2hhbmdlLCBFdmVudEVtaXR0ZXIsIFNpbXBsZUNoYW5nZXMsIEluamVjdG9yLCBMT0NBTEVfSUQsIEluamVjdFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmcm9tIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgSHR0cEVycm9yUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbi8vIGltcG9ydCB7IGlzTnVsbE9yRW1wdHlTdHJpbmcgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1ncmlkL2Rpc3QvZXMyMDE1L3V0aWxzJztcclxuaW1wb3J0IHsgU2VsZWN0YWJsZVNldHRpbmdzLCBQYWdlclNldHRpbmdzLCBQYWdlQ2hhbmdlRXZlbnQsIEdyaWREYXRhUmVzdWx0IH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZ3JpZCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IEVudGl0eUZhY3RvcnkgfSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbi8vIGltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcclxuaW1wb3J0IHsgQml6RGF0YURUTyB9IGZyb20gJy4uLy4uL2NvbW1vbi9lbnRpdHkvYXVyZXN1bHQuZW50aXR5JztcclxuaW1wb3J0IHsgQXV0aERhdGFGaWVsZCwgQXV0aERhdGFTb3VyY2UgfSBmcm9tICcuLi8uLi9jb21tb24vZW50aXR5L2F1dGgtZGF0YS1zb3VyY2UuZW50aXR5JztcclxuaW1wb3J0IHsgQXVyZXN1bHRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2UvYXVyZXN1bHQtc2VydmljZSc7XHJcbmltcG9ydCB7IFJhY0NvbW1vblV0aWwgfSBmcm9tICcuLi8uLi9jb21tb24vdXRpbC9yYWMtdXRpbCc7XHJcbmltcG9ydCB7IElOSVRfU0tJUCwgQlVUVE9OQ09VTlQsIFBBR0VTSVpFUywgSU5JVF9QQUdFSU5ERVgsIElOSVRfUEFHRVNJWkUgfSBmcm9tICcuLi8uLi9jb21tb24vdXRpbC9wYWdlJztcclxuaW1wb3J0IHsgSGllcmFyY2hpY2FsVHlwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9lbnRpdHkvaGllcmFyY2hpY2FsLXR5cGUuZW51bSc7XHJcbmltcG9ydCB7IFRyZWVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2UvdHJlZS5zZXJ2aWNlJztcclxuXHJcbi8qKlxyXG4gKiDnlKjmiLfmjojmnYPkuJrliqHnu4Tnu4fnu4Tku7ZcclxuICovXHJcbkBDb21wb25lbnQoe1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxyXG4gICAgc2VsZWN0b3I6ICdyYWMtZGF0YS1oZWxwJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kYXRhLWhlbHAuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vZGF0YS1oZWxwLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0YUhlbHBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICAgIC8vIOazqOWFpeWIsOW4ruWKqeeahOehruiupOWSjOWPlua2iOaMiemSrlxyXG4gICAgQFZpZXdDaGlsZCgnYnRuT2tBbmRDYW5jbGUnKSBidG5Pa0FuZENhbmNsZVJlZjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBWaWV3Q2hpbGQoJ2ZhcnJpc1RyZWUnKSBmYXJyaXNUcmVlOiBUcmVlVGFibGVDb21wb25lbnQ7XHJcblxyXG4gICAgY2xvc2VNb2RhbEVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxCaXpEYXRhRFRPW10+KCk7XHJcbiAgICAvKiog5by55Ye65qGG5Lit55So5Yiw55qE5pyA57uI6YCJ5Lit55qE5pWw5o2uICovXHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0RW1pdHRlcjogRXZlbnRFbWl0dGVyPHtcclxuICAgICAgICBkYXRhOiBhbnlbXSxcclxuICAgICAgICBzZWxlY3RlZEtleTogc3RyaW5nW11cclxuICAgIH0+ID0gbmV3IEV2ZW50RW1pdHRlcjx7XHJcbiAgICAgICAgZGF0YTogYW55W10sXHJcbiAgICAgICAgc2VsZWN0ZWRLZXk6IHN0cmluZ1tdXHJcbiAgICB9PigpO1xyXG4gICAgc2VsZWN0ZWRNb2RlbHM6IGFueVtdID0gW107XHJcbiAgICBASW5wdXQoKSBoYXNTZWxlY3RLZXlzOiBzdHJpbmdbXSA9IFtdOyAgICAvLyDovpPlhaUg5L+u5pS55YmN77yM5bey57uP6YCJ5LitXHJcbiAgICBASW5wdXQoKSBpc0hhc1NlbGVjdEFsbCA9IGZhbHNlOyAvLyDovpPlhaUg5LmL5YmN5piv5ZCm5YWo6YCJXHJcbiAgICBASW5wdXQoKSBhdXRoRmllbGQgPSAnJzsgLy8g5YWo5bGA5Lia5Yqh57uE57uH5YaF56CBXHJcbiAgICBASW5wdXQoKSBvd25lcklkID0gJyc7IC8vIOeUqOaIt+WGheeggVxyXG4gICAgQElucHV0KCkgY2FuQXNzaWduRGF0YXM6IGFueVtdID0gW107IC8vIOWPr+WIhumFjeeahOaVsOaNrua6kFxyXG4gICAgQElucHV0KCkgZGF0YTogYW55OyAvLyDov5DooYzml7bmlbDmja5cclxuICAgIEBJbnB1dCgpIGlzSW50ZWdyaXR5RGF0YTogYm9vbGVhbjsgLy8g5pWw5o2u5piv5ZCm5a6M5pW077yb5a6M5pW06KGo56S65Y+v5Lul5YiGKlxyXG4gICAgQElucHV0KCkgaXNEaXNwbGF5VHJlZSA9IGZhbHNlOyAvLyDovpPlhaVcclxuICAgIEBJbnB1dCgpIGlzU2hvd1NlYXJjaCA9IGZhbHNlOyAvLyDmmK/lkKblsZXnpLrmkJzntKJcclxuICAgIGlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICBzZWxlY3RLZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgLyoqIOaYr+WQpuWNlemAiSAqL1xyXG4gICAgQElucHV0KCkgc2luZ2xlU2VsZWN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSB0cmVlSGVpZ2h0ID0gJzM0MnB4JztcclxuICAgIC8qKiDmmK/lkKblj5fnu7TluqbliIbnu4QgKi9cclxuICAgIGlzQXVHcm91cCA9IHRydWU7XHJcbiAgICAvKiog5by55Ye65qGG5Lit55So5Yiw55qE5pyA57uI6YCJ5Lit55qE5pWw5o2uICovXHJcbiAgICBzZWxlY3RCeUdyb3VwRW1pdHRlcjogRXZlbnRFbWl0dGVyPHN0cmluZ1tdPiA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nW10+KCk7XHJcbiAgICAvLyDkuJrliqHmlbDmja7mupDnm7jlhbPkv6Hmga9cclxuICAgIGRhdGFLZXkgPSAnJzsgLy8g5Y+W5pWw5Li76ZSu5YiXXHJcbiAgICBoZWxwRmllbGRzOiBzdHJpbmdbXSA9IFtdOyAvLyDlrZfmrrXmmL7npLrlkI1cclxuICAgIHNob3dGaWVsZHM6IEF1dGhEYXRhRmllbGRbXSA9IFtdOyAvLyDmmL7npLrnmoTlrZfmrrVcclxuICAgIGNvZGVPck5hbWVGaWVsZHM6IEF1dGhEYXRhRmllbGRbXSA9IFtdOyAvLyDmkJzntKLnmoTlrZfmrrXvvJtcclxuICAgIGF1dGhEYXRhU291cmNlOiBBdXRoRGF0YVNvdXJjZSA9IG5ldyBBdXRoRGF0YVNvdXJjZSgpO1xyXG4gICAgLyoqIOaYr+WQpuWPr+eUqCAqL1xyXG4gICAgaXNFbmFibGUgPSB0cnVlO1xyXG4gICAgLyoqIOaYr+WQpuWFqOmDqOadg+mZkCAqL1xyXG4gICAgaXNBbGxBdXRoID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOWIhumhteWPguaVsO+8mum7mOiupOWxleekujIwMOadoSzlj6/kv67mlLlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdyaWRWaWV3OiBHcmlkRGF0YVJlc3VsdDtcclxuICAgIHB1YmxpYyBwYWdlU2V0dGluZzogUGFnZXJTZXR0aW5ncyB8IGJvb2xlYW47XHJcbiAgICAvLyDnu4Tku7bkuIrnlKhza2lwXHJcbiAgICBza2lwID0gSU5JVF9TS0lQO1xyXG4gICAgcGFnZVNpemUgPSBJTklUX1BBR0VTSVpFO1xyXG4gICAgcGFnZUluZGV4ID0gSU5JVF9QQUdFSU5ERVg7XHJcbiAgICAvLyDmoJHmjqfku7ZcclxuICAgIC8vIOagkeaOp+S7tue7keWumueahOaVsOaNrlxyXG4gICAgdHJlZWRhdGE6IGFueVtdID0gW107XHJcbiAgICAvLyDnu5HlrprmoJHnmoTlubPpk7rmlbDmja5cclxuICAgIGZsYXREYXRhOiBhbnlbXSA9IFtdO1xyXG4gICAgLyoqIHJvb3TmoLnoioLngrnvvIznlKjkuo7pu5jorqTlsZXlvIAgKi9cclxuICAgIHJvb3QgPSAnJztcclxuICAgIHNhdmVTZWxlY3Rpb25zOiBhbnkgPSBbXTtcclxuICAgIC8vIFRyZWVUYWJsZeS4iuimgeaYvuekuueahOWIl1xyXG4gICAgdHJlZUNvbHM6IGFueSA9IFtdO1xyXG4gICAgLy8gW1xyXG4gICAgLy8gICB7IGZpZWxkOiAnbmFtZScsIHRpdGxlOiAn5ZCN56ewJywgd2lkdGg6IDEwMCB9LFxyXG4gICAgLy8gICB7IGZpZWxkOiAnY29kZScsIHRpdGxlOiAn57yW5Y+3Jywgd2lkdGg6IDEwMCB9LFxyXG4gICAgLy8gXTtcclxuICAgIC8vIOagkeiKgueCueWKoOi9veaWueW8j++8jGFzeW5j5byC5q2l77yMYWxsIOWQjOatpVxyXG4gICAgbG9hZERhdGFUeXBlID0gJ2FsbCc7IC8vICdhbGwnIHwgJ2FzeW5jJ1xyXG4gICAgLy8g5qCR6IqC54K56YCJ5Lit5Yqo5L2cXHJcbiAgICBjYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgIGNhc2NhZGVVcCA9IGZhbHNlO1xyXG4gICAgY2FzY2FkZURvd24gPSB0cnVlO1xyXG4gICAgLy8g5piv5ZCm5bey57uP5Yqg6L296L+HXHJcbiAgICBpc1RyZWVMb2FkZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0cnVjdG9yIChcclxuICAgICAgICBwcml2YXRlIHNlc3Npb246IFJhY0NvbW1vblV0aWwsXHJcbiAgICAgICAgcHJpdmF0ZSBtc2dTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgdHJlZVNlcnZpY2U6IFRyZWVTZXJ2aWNlLFxyXG4gICAgICAgIC8vICxwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZVxyXG4gICAgKSB7XHJcbiAgICAgICAgLy8g5YiG6aG15qih5byPXHJcbiAgICAgICAgdGhpcy5wYWdlU2V0dGluZyA9IHtcclxuICAgICAgICAgICAgYnV0dG9uQ291bnQ6IEJVVFRPTkNPVU5ULFxyXG4gICAgICAgICAgICBpbmZvOiB0cnVlLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZXM6IFBBR0VTSVpFUyxcclxuICAgICAgICAgICAgcHJldmlvdXNOZXh0OiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6KaB5pCc57Si55qE5L+h5oGvICovXHJcbiAgICBzZWFyY2hJbmZvID0gJyc7XHJcbiAgICAvKiog6KaB5pCc57Si55qE5L+h5oGvICovXHJcbiAgICBzZWFyY2hEYXRhczogYW55W10gPSBbXTtcclxuICAgLy8gc2VhcmNoVGl0bGUgPSB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdhdXJlc3VsdF9zZWFyY2hfbGFiZWwnKTtcclxuICAgIHNlYXJjaFRpdGxlID0gJ+afpeaJvic7XHJcblxyXG4gICAgbmdPbkluaXQgKCkge1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDojrflj5blj6/liIbphY3nmoTkuJrliqHmlbDmja4gKi9cclxuICAgIGdldEF1dGhEYXRhU291cmNlICgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uLm93bmVySWQgPSB0aGlzLm93bmVySWQ7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uLm93bmVyVHlwZSA9IDI7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gW107XHJcbiAgICAgICAgdGhpcy50cmVlQ29scyA9IFtdO1xyXG4gICAgICAgIHRoaXMudHJlZWRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IGZhbHNlOyAvLyBsb2Fk5pWw5o2u5pe277yM57qn6IGU5YWI5YWz6Zet77yM5ZCm5YiZ5Lya5a+86Ie05LiL57qn6YCJ5Lit77yM6Ieq5Yqo6YCJ5Lit5LiK57qnXHJcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi5pc051bGxPckVtcHR5U3RyaW5nKHRoaXMuYXV0aEZpZWxkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmoLnmja7ojrflj5bliLDnmoTmnYPpmZDnu5PmnpzmlbDmja7vvIzliqDovb3nlYzpnaIgKi9cclxuICAgIGRpc3BsYXlEYXRhKCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0S2V5cyA9IFtdO1xyXG4gICAgICAgIHRoaXMudHJlZUNvbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnRyZWVkYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSBmYWxzZTsgLy8gbG9hZOaVsOaNruaXtu+8jOe6p+iBlOWFiOWFs+mXre+8jOWQpuWImeS8muWvvOiHtOS4i+e6p+mAieS4re+8jOiHquWKqOmAieS4reS4iue6p1xyXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uaXNOdWxsT3JFbXB0eVN0cmluZyh0aGlzLmF1dGhGaWVsZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5Bc3NpZ25EYXRhcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93RWxlbWVudCgnY2hlY2thbGwnKTtcclxuICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hdXRoRGF0YVNvdXJjZS5kYXRhID0gdGhpcy5kYXRhLmRhdGE7XHJcbiAgICAgICAgdGhpcy5hdXRoRGF0YVNvdXJjZS5zaG93RmllbGRzID0gdGhpcy5kYXRhLnNob3dGaWVsZHM7XHJcbiAgICAgICAgdGhpcy5hdXRoRGF0YVNvdXJjZS5rZXlGaWVsZCA9IHRoaXMuZGF0YS5rZXlGaWVsZDtcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmhlbHBGaWVsZHMgPSB0aGlzLmRhdGEuaGVscEZpZWxkcztcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmhpZXJhcmNoaWNhbFR5cGUgPSB0aGlzLmRhdGEuaGllcmFyY2hpY2FsVHlwZTtcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmhpZXJhcmNoaWNhbEluZm8gPSB0aGlzLmRhdGEuaGllcmFyY2hpY2FsSW5mbztcclxuICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzID0gdGhpcy5hdXRoRGF0YVNvdXJjZS5kYXRhO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoRGF0YXMgPSB0aGlzLmNhbkFzc2lnbkRhdGFzO1xyXG4gICAgICAgIHRoaXMuZGF0YUtleSA9IHRoaXMuYXV0aERhdGFTb3VyY2Uua2V5RmllbGQ7XHJcbiAgICAgICAgdGhpcy5oZWxwRmllbGRzID0gdGhpcy5hdXRoRGF0YVNvdXJjZS5oZWxwRmllbGRzO1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpZWxkcyA9IHRoaXMuYXV0aERhdGFTb3VyY2Uuc2hvd0ZpZWxkcztcclxuICAgICAgICB0aGlzLmNvZGVPck5hbWVGaWVsZHMgPSB0aGlzLmdldENvZGVPck5hbWVGaWVsZHMoKTtcclxuICAgICAgICBpZiAodGhpcy5oYXNTZWxlY3RLZXlzLmZpbmQoeCA9PiB4ID09PSAnKicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSB0aGlzLmlzSGFzU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBbGxBdXRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSB0aGlzLmlzSGFzU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyAg5aaC5L2V5pCe5oiQIOebtOaOpemAieS4reWFqOmDqFxyXG4gICAgICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cy5wdXNoKGl0ZW1bdGhpcy5kYXRhS2V5XSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNTZWxlY3RLZXlzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzU2VsZWN0S2V5cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaYvuekuuWIl+ihqFxyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcGxheVRyZWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlCeVBhZ2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmmL7npLrmoJHkv6Hmga9cclxuICAgICAgICB0aGlzLnNob3dUcmVlSW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsZXnpLrmoJHlvaLnm7jlhbPmlbDmja4gKi9cclxuICAgIHNob3dUcmVlSW5mbygpIHtcclxuICAgICAgICB0aGlzLmhpZGVFbGVtZW50KCdjaGVja2FsbCcpO1xyXG4gICAgICAgIC8vIGlmICh0aGlzLmZhcnJpc1RyZWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIOWkhOeQhuagkeW9ouebuOWFs+mAu+i+kVxyXG4gICAgICAgIHRoaXMuYXV0aERhdGFTb3VyY2Uuc2hvd0ZpZWxkcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZUNvbHMucHVzaCh7IGZpZWxkOiBpdGVtLmZpZWxkLCB0aXRsZTogaXRlbS50aXRsZSwgd2lkdGg6IDEwMCB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBoaWVyYXJjaGljYWxUeXBlID0gdGhpcy5hdXRoRGF0YVNvdXJjZS5oaWVyYXJjaGljYWxUeXBlO1xyXG4gICAgICAgIGNvbnN0IGhpZXJhcmNoaWNhbEluZm8gPSB0aGlzLmF1dGhEYXRhU291cmNlLmhpZXJhcmNoaWNhbEluZm87XHJcbiAgICAgICAgaWYgKGhpZXJhcmNoaWNhbFR5cGUgPT09IEhpZXJhcmNoaWNhbFR5cGUuUGFyZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRLZXkgPSB0aGlzLmRhdGFLZXk7IC8vIHBhcmVudOWvueW6lOS4u+mUruWIlyzlpoLmnpzmsqHmnInljZXni6zorr7nva7lsLHkvb/nlKjlj5bmlbDliJdcclxuICAgICAgICAgICAgaWYgKCBoaWVyYXJjaGljYWxJbmZvLnBhcmVudEtleUZpZWxkICYmIGhpZXJhcmNoaWNhbEluZm8ucGFyZW50S2V5RmllbGQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50S2V5ID0gaGllcmFyY2hpY2FsSW5mby5wYXJlbnRLZXlGaWVsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRyZWVkYXRhID0gdGhpcy50cmVlU2VydmljZS5tYWtlVHJlZUJ5UGFyZW50KHRoaXMuY2FuQXNzaWduRGF0YXMsIGhpZXJhcmNoaWNhbEluZm8ucGFyZW50RmllbGQsIHBhcmVudEtleSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmVlZGF0YSA9IHRoaXMudHJlZVNlcnZpY2UubWFrZVRyZWVCeVBhdGgodGhpcy5jYW5Bc3NpZ25EYXRhcywgaGllcmFyY2hpY2FsSW5mby5wYXRoRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmib7liLDnrKzkuIDlsYIgICDnm7TmjqXlsZXlvIBcclxuICAgICAgICAvLyDliJ3lp4vliqDovb3kuI3nuqfogZTvvIzlkKbliJnkvJrlr7zoh7TkuIvnuqfpgInkuK3vvIzoh6rliqjpgInkuK3kuIrnuqdcclxuICAgICAgICB0aGlzLmZhcnJpc1RyZWUuY2FzY2FkZUNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1RyZWVMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZhcnJpc1RyZWUubG9hZGVkRGF0YS5zdWJzY3JpYmUoZCA9PiB7XHJcbiAgICAgICAgICAgIC8vIOWKoOi9vei/h++8jOS5i+WQjuS4jemcgOimgeWGjeasoeWKoOi9vVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWVMb2FkZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDliJ3lp4vliqDovb3kuI3nuqfogZTvvIzlkKbliJnkvJrlr7zoh7TkuIvnuqfpgInkuK3vvIzoh6rliqjpgInkuK3kuIrnuqdcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNhc2NhZGVDaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyDmoLnoioLngrnpu5jorqTlsZXlvIBcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnJvb3QpICYmIHRoaXMucm9vdCAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5leHBhbmROb2RlKHRoaXMucm9vdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5jaGVja0FsbE5vZGVzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNTZWxlY3RLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5jaGVja2VkTm9kZXModGhpcy5oYXNTZWxlY3RLZXlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsb2Fk5a6M5pWw5o2u5pe277yM57qn6IGU5omT5byA77yM5Y+v5Lul6YCJ5Lit5LiK57qn6Ieq5Yqo6YCJ5Lit5LiL57qnXHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5jYXNjYWRlQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyDliqDovb3ov4fvvIzkuYvlkI7kuI3pnIDopoHlho3mrKHliqDovb1cclxuICAgICAgICAgICAgdGhpcy5pc1RyZWVMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmiqXplJnlpITnkIYgKi9cclxuICAgIGhhbmRsZUVycm9yIChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmRhdGEgPSBbXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IuZXJyb3IuTWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmVycm9yKGVycm9yLmVycm9yLk1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDpgInmi6nlsZ7mgKfvvJrljZXpgInjgIHlpJrpgIlcclxuICAgIHB1YmxpYyBnZXQgc2VsZWN0YWJsZVNldHRpbmdzICgpOiBTZWxlY3RhYmxlU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNoZWNrYm94T25seTogdHJ1ZSxcclxuICAgICAgICAgICAgbW9kZTogdGhpcy5zaW5nbGVTZWxlY3QgPyAnc2luZ2xlJyA6ICdtdWx0aXBsZScsXHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWbvuagh1xyXG4gICAgaWNvbkNsYXNzICh7IHR5cGUgfTogYW55KTogYW55IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnay1pLWZvbGRlcic6IHRydWUsXHJcbiAgICAgICAgICAgICdrLWljb24nOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlumAieaLqeS/oeaBr1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2VsZWN0SW5mbygpOiB7IGRhdGE6IGFueVtdLCBzZWxlY3RlZEtleTogc3RyaW5nW10gfSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE1vZGVscyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5OiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g5YWo6YCJXHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RBbGwgJiYgdGhpcy5pc0ludGVncml0eURhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCA9PT0gdGhpcy5zZWxlY3RLZXlzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGE6ICcqJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBbJyonXTtcclxuICAgICAgICAgICAgcmVzdWx0LnNlbGVjdGVkS2V5ID0gWycqJ107XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmoJHmmL7npLrvvIzpnIDopoHlhYjmoLnmja7pgInkuK3nmoTmlbDmja7mnoTpgKBzZWxlY3RLZXlzXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwbGF5VHJlZSkge1xyXG4gICAgICAgICAgICAvLyDpgInkuK3nmoTooYzvvIzov4fmu6TmjonkuJrliqHlr7nosaHvvIzlj6rkv53nlZnlip/og73mk43kvZxcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFycmlzVHJlZS5jaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZFJvd3MgPSB0aGlzLmZhcnJpc1RyZWUuY2hlY2tlZHMubWFwKG4gPT4gbi5kYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIOi/h+a7pOWKn+iDveaTjeS9nOWIhue7hOeahOihjFxyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGNoZWNrZWRPcFJvd3MgPSB0aGlzLmNoZWNrZWRSb3dzLmZpbHRlcih4ID0+IHgudHlwZSA9PT0gJzEnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cyA9IGNoZWNrZWRSb3dzLm1hcChtID0+IG1bdGhpcy5kYXRhS2V5XSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzLm1hcCh4ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRPYmogPSB0aGlzLmNhbkFzc2lnbkRhdGFzLmZpbmQoeSA9PiB5W3RoaXMuZGF0YUtleV0gPT09IHgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vZGVscy5wdXNoKGZpbmRPYmopO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0LmRhdGEgPSB0aGlzLnNlbGVjdGVkTW9kZWxzO1xyXG4gICAgICAgIHJlc3VsdC5zZWxlY3RlZEtleSA9IHRoaXMuc2VsZWN0S2V5cztcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDliKTmlq3mmK/lkKbliIbkuoblhajpg6jmnYPpmZAq77yM6aaW5YWI5b+F6aG75YWo6YCJ77yM5YW25qyh5b+F6aG75piv5pWw5o2u5a6M5pW055qE77yM54S25ZCO6YCJ5Lit55qE5pWw5o2u5b+F6aG75LiO5pWw5o2u5rqQ6ZW/5bqm5LiA6Ie077yI5aaC5p6c5LuF5pCc57Si5ZCO55qE5YWo6YCJ77yM5LiN5pivKu+8iSAqL1xyXG4gICAgZ2V0SXNBbGxBdXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzU2VsZWN0QWxsICYmIHRoaXMuaXNJbnRlZ3JpdHlEYXRhICYmIHRoaXMuZGF0YS5sZW5ndGggPT09IHRoaXMuc2VsZWN0S2V5cztcclxuICAgIH1cclxuXHJcbiAgICAvKiog56Gu5a6a5Y+R5bCE6YCJ5Lit5pWw5o2u5Lul5Y+K6YCJ5Lit5YaF56CBICovXHJcbiAgICBjb25maXJtICgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxFbWl0dGVyLm5leHQoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0SXNBbGxBdXRoKCkgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGE6ICcqJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbWl0dGVyLm5leHQoe1xyXG4gICAgICAgICAgICAgICAgZGF0YTogWycqJ10sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEtleTogWycqJ11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOagkeaYvuekuu+8jOmcgOimgeWFiOagueaNrumAieS4reeahOaVsOaNruaehOmAoHNlbGVjdEtleXNcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3BsYXlUcmVlKSB7XHJcbiAgICAgICAgICAgIC8vIOmAieS4reeahOihjO+8jOi/h+a7pOaOieS4muWKoeWvueixoe+8jOWPquS/neeVmeWKn+iDveaTjeS9nFxyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXJyaXNUcmVlLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkUm93cyA9IHRoaXMuZmFycmlzVHJlZS5jaGVja2Vkcy5tYXAobiA9PiBuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8g6L+H5ruk5Yqf6IO95pON5L2c5YiG57uE55qE6KGMXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY2hlY2tlZE9wUm93cyA9IHRoaXMuY2hlY2tlZFJvd3MuZmlsdGVyKHggPT4geC50eXBlID09PSAnMScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gY2hlY2tlZFJvd3MubWFwKG0gPT4gbVt0aGlzLmRhdGFLZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdEtleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMubWFwKHggPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZE9iaiA9IHRoaXMuY2FuQXNzaWduRGF0YXMuZmluZCh5ID0+IHlbdGhpcy5kYXRhS2V5XSA9PT0geCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzLnB1c2goZmluZE9iaik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdEVtaXR0ZXIubmV4dCh7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuc2VsZWN0ZWRNb2RlbHMsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5OiB0aGlzLnNlbGVjdEtleXNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jbGUgKCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbEVtaXR0ZXIubmV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlhajpgInvvIzov5nph4zlhajpgInlj6/og73mmK/ov4fmu6TlkI7mlbDmja7nmoTlhajpgIkgKi9cclxuICAgIGNoZWNrQWxsQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9ICF0aGlzLmlzU2VsZWN0QWxsO1xyXG4gICAgICAgIGxldCBrZXkgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/pgInkuK3vvIzliJnkuI3lpITnkIbvvIzmsqHmnInpgInkuK3vvIzliJnpgInkuK1cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhcy5mb3JFYWNoKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSBkYXRhW3RoaXMuZGF0YUtleV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0S2V5cy5maW5kSW5kZXgoIHggPT4geCA9PT0ga2V5ICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pc0Rpc3BsYXlUcmVlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmZhcnJpc1RyZWUpIHtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5jaGVja0FsbE5vZGVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pc0Rpc3BsYXlUcmVlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmZhcnJpc1RyZWUpIHtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS51bkNoZWNrQWxsTm9kZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaERhdGFzLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBkYXRhW3RoaXMuZGF0YUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNlbGVjdEtleXMuZmluZEluZGV4KCB4ID0+IHggPT09IGtleSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/pgInkuK3vvIzlsLHliKDpmaRcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja0NsaWNrICgpIHtcclxuICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gIXRoaXMuaXNTZWxlY3RBbGw7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyAg5aaC5L2V5pCe5oiQIOebtOaOpemAieS4reWFqOmDqFxyXG4gICAgICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cy5wdXNoKGRhdGFbdGhpcy5kYXRhS2V5XSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc1RyZWUuY2hlY2tBbGxOb2RlcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEJ5R3JvdXBFbWl0dGVyLm5leHQoWycqJ10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICB0aGlzLmZhcnJpc1RyZWUudW5DaGVja0FsbE5vZGVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEJ5R3JvdXBFbWl0dGVyLm5leHQoW10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5oup5LqL5Lu2ICovXHJcbiAgICBwdWJsaWMgb25TZWxlY3RlZEtleXNDaGFuZ2UgKGUpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnNlbGVjdEtleXMubGVuZ3RoO1xyXG4gICAgICAgIGlmIChsZW4gIT09IHRoaXMuY2FuQXNzaWduRGF0YXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOWFqOmDqOmAieS4reS6hu+8jGlzU2VsZWN0QWxsIOS5n+S4jemcgOimgeiuvue9ruS4unRydWXvvJtpc1NlbGVjdEFsbOeahOWQq+S5ieaYryrnmoTmhI/mgJ3vvIzmlrDlop7mlbDmja7kuZ/ooqvpgInkuK1cclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RCeUdyb3VwRW1pdHRlci5uZXh0KFsnKiddKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEJ5R3JvdXBFbWl0dGVyLm5leHQodGhpcy5zZWxlY3RLZXlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75YiG6aG15p+l6K+i5oiW6ICF5YiG6aG15Y+C5pWw5Y+Y5YyW5ZCO5p+l6K+iXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQg5YiG6aG15Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwYWdlQ2hhbmdlIChldmVudDogUGFnZUNoYW5nZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gc2tpcOWSjHBhZ2VTaXpl5b+F6aG75b6X6YeN5paw6LWL5YC877yM5Zug5Li65Y+v6IO955So5oi36YeN5paw6YCJ5oup5LqG5YiG6aG15aSn5bCP5oiW6ICF5YiG6aG157Si5byVXHJcbiAgICAgICAgLy8g5Yi35paw55WM6Z2i5oyJ6ZKu5pWw6YeP5ZKM54Sm54K5XHJcbiAgICAgICAgdGhpcy5za2lwID0gZXZlbnQuc2tpcDtcclxuICAgICAgICB0aGlzLnBhZ2VTaXplID0gZXZlbnQudGFrZTtcclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHRoaXMuc2tpcCAvIHRoaXMucGFnZVNpemUgKyAxO1xyXG4gICAgICAgIC8vIOafpeivolxyXG4gICAgICAgIHRoaXMucXVlcnlCeVBhZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIl+ihqOeahOafpeivolxyXG4gICAgICovXHJcbiAgICBxdWVyeUJ5UGFnZSgpIHtcclxuICAgICAgICB0aGlzLmdyaWRWaWV3ID0ge1xyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNlYXJjaERhdGFzLnNsaWNlKHRoaXMuc2tpcCwgdGhpcy5za2lwICsgdGhpcy5wYWdlU2l6ZSksXHJcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLnNlYXJjaERhdGFzLmxlbmd0aFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2VhcmNoQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2godGhpcy5zZWFyY2hJbmZvKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLmoJHnirZcclxuICAgICAqL1xyXG4gICAgc2VhcmNoKHR4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwbGF5VHJlZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFRyZWUodHh0KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlYXJjaEluZm8gPSB0eHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi5pc051bGxPckVtcHR5U3RyaW5nKHRoaXMuc2VhcmNoSW5mbykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhcyA9IHRoaXMuY2FuQXNzaWduRGF0YXM7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlCeVBhZ2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlYXJjaERhdGFzID0gW107XHJcbiAgICAgICAgdGhpcy5jYW5Bc3NpZ25EYXRhcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNob3dGaWVsZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtW3RoaXMuc2hvd0ZpZWxkc1tpXS5maWVsZF0udG9TdHJpbmcoKS5pbmRleE9mKHRoaXMuc2VhcmNoSW5mbykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucXVlcnlCeVBhZ2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W57yW5Y+35oiW6ICF5ZCN56ew5a2X5q61XHJcbiAgICAgKi9cclxuICAgIGdldENvZGVPck5hbWVGaWVsZHMoKTogQXV0aERhdGFGaWVsZFtdIHtcclxuICAgICAgICBjb25zdCByZXN1bHQ6IEF1dGhEYXRhRmllbGRbXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpZWxkcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5maWVsZC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2NvZGUnKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICBpdGVtLmZpZWxkLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZignbmFtZScpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5zaG93RmllbGRzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBzZWFyY2hUcmVlU2VsZihhcmc6IGFueSkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVHJlZShhcmcudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8g5LiK5qyh5pCc57Si5paH5pysXHJcbiAgICBvbGRUcmVlU2VhcmNoID0gJyc7XHJcbiAgICB0cmVlU2VhcmNoSW5kZXggPSAwO1xyXG4gICAgLyoqIOaQnOe0ou+8jCDmraTlpITmmK/liIblsYLliqDovb3vvIzmkJzntKLml7bpnIDopoHmoLnmja7ljp/mlbDmja7ov5vooYzmkJzntKLvvIzmkJzntKLlkI7vvIzpnIDopoHlsIblr7nlupTniLboioLngrnlsZXnpLpcclxuICAgICAqICAgQHBhcmFtIGFyZ3MgIOagvOW8jyBzZWFyY2hEYXRhID0geyBmaWVsZDogJyonLCB2YWx1ZTogJycgfTtcclxuICAgICAqL1xyXG4gICAgc2VhcmNoVHJlZSh0eHQ6IGFueSkge1xyXG4gICAgICAgIC8vIOaQnOe0ouWGheWuueS4uuepuu+8jOS4jeWkhOeQhlxyXG4gICAgICAgIGlmICghdHh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZVNlYXJjaEluZGV4ID0gMDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZhcnJpc1RyZWUuY2xlYXJTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgLy8g5pCc57Si5YaF5a655LiO5LiK5qyh5LiN5ZCM77yM6YeN5paw5pCc57SiXHJcbiAgICAgICAgaWYgKHRoaXMub2xkVHJlZVNlYXJjaCAhPT0gdHh0KSB7XHJcbiAgICAgICAgICAgIC8vIOe9ruepuumHjeaWsOaQnOe0olxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaERhdGFzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2FuQXNzaWduRGF0YXMuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDpgY3ljobmkJzntKLlrZfmrrVcclxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29kZU9yTmFtZUZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5jb2RlT3JOYW1lRmllbGRzW2ldLmZpZWxkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2ZpZWxkXS5pbmRleE9mKHR4dCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaERhdGFzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOmmluasoeaQnOe0ou+8jOS7juesrOS4gOS4quW8gOWni+aQnOe0olxyXG4gICAgICAgICAgICB0aGlzLnRyZWVTZWFyY2hJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaERhdGFzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2Uud2FybmluZygn5rKh5pyJ5ruh6Laz5p2h5Lu255qE5pWw5o2uIScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaQnOWIsOaMh+WumuWvueixoe+8jOmcgOimgeiuvue9rueItuiKgueCueWFqOmDqOWxleW8gCzlhbbku5boioLngrnlhajpg6jmlLbotbdcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLnNlYXJjaERhdGFzW3RoaXMudHJlZVNlYXJjaEluZGV4XVt0aGlzLmRhdGFLZXldO1xyXG4gICAgICAgIHRoaXMuZmFycmlzVHJlZS5zZWxlY3ROb2RlKGtleSk7XHJcbiAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNvbGxhcHNlQWxsKCk7XHJcbiAgICAgICAgLy8g5bGV5byA54i257qnXHJcbiAgICAgICAgdGhpcy5leHBhbmRQYXJlbnQoa2V5KTtcclxuICAgICAgICB0aGlzLm9sZFRyZWVTZWFyY2ggPSB0eHQ7XHJcbiAgICAgICAgdGhpcy50cmVlU2VhcmNoSW5kZXggPSB0aGlzLnRyZWVTZWFyY2hJbmRleCArIDE7XHJcbiAgICAgICAgLy8g5bey57uP5pCc57Si5Yiw5pyA5ZCO77yM6ZyA6KaB6YeN5aS05pCc57SiXHJcbiAgICAgICAgaWYgKHRoaXMudHJlZVNlYXJjaEluZGV4ID09PSB0aGlzLnNlYXJjaERhdGFzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFRyZWVTZWFyY2ggPSAnJztcclxuICAgICAgICAgICAgdGhpcy50cmVlU2VhcmNoSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDpgJDkuIDmib7liLDpnIDopoHlsZXlvIDnmoTniLboioLngrnvvIzlhajpg6jlsZXlvIAgKi9cclxuICAgIGV4cGFuZFBhcmVudChrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZmFycmlzVHJlZS5maW5kUm93Tm9kZShrZXkpO1xyXG4gICAgICAgIGxldCBwYXJlbnROb2RlID0gcGFyZW50LnBhcmVudDtcclxuICAgICAgICBpZiAocGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICB3aGlsZSAocGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmV4cGFuZE5vZGUocGFyZW50Tm9kZS5pZCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc1RyZWUuZXhwYW5kTm9kZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5qCR5b2i6YCJ5Lit5YWo6YOoICovXHJcbiAgICB0cmVlQ2hlY2tBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOagkeW9ouWPlua2iOWFqOmDqCAqL1xyXG4gICAgdHJlZVVuQ2hlY2tBbGwgKCkge1xyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+W5raI5Yu+6YCJICovXHJcbiAgICBub2RlVW5DaGVja2VkICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dFbGVtZW50IChlbGVtZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnROYW1lKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50TmFtZSkuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGhpZGVFbGVtZW50IChlbGVtZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnROYW1lKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50TmFtZSkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuIl19