/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Output, Input, EventEmitter } from '@angular/core';
import { from } from 'rxjs';
import { LookupComponent } from '@farris/ui-lookup';
import { AuthobjEntity } from '../../../common/entity/authobj.entity';
export class AuobjHelpComponent {
    constructor() {
        this.displayText = '';
        this.selectedKeyOld = '';
        /**
         * 导航事件
         */
        this.selectedChanged = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.curKeyIdList = [];
        this.curKeyIdList.push(this.curKeyId);
    }
    // 取数列
    /**
     * @param {?} args
     * @return {?}
     */
    afterKeySelected(args) {
        this.curAuthObj = new AuthobjEntity();
        this.curKeyIdList = [];
        // 更新值
        from(args).subscribe((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.curAuthObj.id = item['id'];
            this.curAuthObj.name = item['name'];
            this.curKeyId = item['id'];
            this.curKeyIdList.push(item['id']);
            this.displayText = item['name'];
            this.selectedChanged.emit(this.curAuthObj);
        }));
        this.auobjLookup.closeDialog();
    }
    /**
     * 选中行改变后触发事件
     * @param {?} args
     * @return {?}
     */
    handleSelection(args) {
        this.curKeyId = args.node.data.id;
        this.curAuthObj = args.node.data;
        // 首次触发
        if (this.curKeyId === '') {
            this.selectedKeyOld = this.curKeyId;
            this.selectedChanged.emit(this.curAuthObj);
        }
        else {
            // 变化的情况下触发
            if (this.selectedKeyOld !== this.curKeyId) {
                this.selectedKeyOld = this.curKeyId;
                this.selectedChanged.emit(this.curAuthObj);
            }
        }
    }
}
AuobjHelpComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'rac-auobj-help',
                template: "<farris-lookup #auobjLookup [displayText]=\"displayText\"  name=\"auobjLookup\"\r\n[showButtons]=\"true\" [title]=\"'\u8BF7\u9009\u62E9\u6743\u9650\u5BF9\u8C61'\" [buttonsRef]=\"this.auobjHelp.btnOkAndCancleRef\">\r\n  <div style=\"padding: 10px\">\r\n    <rac-auobj-tree #auobjHelp [initSelectedKeys]=\"this.curKeyIdList\" [dataMode] = 'dataMode'\r\n      (selectedAfterOk)=\"afterKeySelected($event)\" (closeModalEmitter)=\"this.auobjLookup.closeDialog()\">\r\n    </rac-auobj-tree>\r\n  </div>\r\n</farris-lookup>\r\n",
                styles: [""]
            }] }
];
/** @nocollapse */
AuobjHelpComponent.ctorParameters = () => [];
AuobjHelpComponent.propDecorators = {
    dataMode: [{ type: Input }],
    displayText: [{ type: Input }],
    curKeyId: [{ type: Input }],
    auobjLookup: [{ type: ViewChild, args: ['auobjLookup',] }],
    selectedChanged: [{ type: Output }]
};
if (false) {
    /**
     * 要加载的数据类型
     * all代表全部权限对象
     * reassign代表允许在用户上重新授权的权限对象
     * @type {?}
     */
    AuobjHelpComponent.prototype.dataMode;
    /** @type {?} */
    AuobjHelpComponent.prototype.displayText;
    /** @type {?} */
    AuobjHelpComponent.prototype.curKeyId;
    /** @type {?} */
    AuobjHelpComponent.prototype.curKeyIdList;
    /** @type {?} */
    AuobjHelpComponent.prototype.curAuthObj;
    /** @type {?} */
    AuobjHelpComponent.prototype.selectedKeyOld;
    /** @type {?} */
    AuobjHelpComponent.prototype.auobjLookup;
    /**
     * 导航事件
     * @type {?}
     */
    AuobjHelpComponent.prototype.selectedChanged;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVvYmotaGVscC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN5cy9yYWMtY29tbW9uLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC9hdW9iai9hdW9iai1oZWxwL2F1b2JqLWhlbHAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUFVLFNBQVMsRUFDZ0IsTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQ3hFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBYyxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDeEMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQVF0RSxNQUFNLE9BQU8sa0JBQWtCO0lBMEI3QjtRQWxCUyxnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQUkxQixtQkFBYyxHQUFHLEVBQUUsQ0FBQzs7OztRQUtWLG9CQUFlLEdBQWdDLElBQUksWUFBWSxFQUFpQixDQUFDO0lBUzNFLENBQUM7Ozs7SUFOakIsUUFBUTtRQUNOLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN4QyxDQUFDOzs7Ozs7SUFNRCxnQkFBZ0IsQ0FBQyxJQUFTO1FBQ3RCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN2QixNQUFNO1FBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVM7Ozs7UUFDaEIsSUFBSSxDQUFDLEVBQUU7WUFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRCxDQUFDLEVBQ0osQ0FBQztRQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FBQzs7Ozs7O0lBTUQsZUFBZSxDQUFDLElBQVM7UUFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNqQyxPQUFPO1FBQ1AsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLEVBQUUsRUFBRTtZQUN4QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDcEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQzVDO2FBQU07WUFDTCxXQUFXO1lBQ1gsSUFBSSxJQUFJLENBQUMsY0FBYyxLQUFLLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ3pDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFDcEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQzVDO1NBQ0Y7SUFDSCxDQUFDOzs7WUF0RUYsU0FBUyxTQUFDOztnQkFFVCxRQUFRLEVBQUUsZ0JBQWdCO2dCQUMxQixvaEJBQTBDOzthQUUzQzs7Ozs7dUJBUUUsS0FBSzswQkFDTCxLQUFLO3VCQUNMLEtBQUs7MEJBS0wsU0FBUyxTQUFDLGFBQWE7OEJBR3ZCLE1BQU07Ozs7Ozs7OztJQVZQLHNDQUFzQzs7SUFDdEMseUNBQTBCOztJQUMxQixzQ0FBMEI7O0lBQzFCLDBDQUF1Qjs7SUFDdkIsd0NBQTBCOztJQUMxQiw0Q0FBb0I7O0lBRXBCLHlDQUF1RDs7Ozs7SUFHdkQsNkNBQTJGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yLFxyXG4gIFRlbXBsYXRlUmVmLCBIb3N0QmluZGluZywgQWZ0ZXJWaWV3Q2hlY2tlZCwgT3V0cHV0LCBJbnB1dCwgRXZlbnRFbWl0dGVyXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTG9va3VwQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb29rdXAnO1xyXG5pbXBvcnQgeyBBdXRob2JqRW50aXR5IH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2VudGl0eS9hdXRob2JqLmVudGl0eSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXHJcbiAgc2VsZWN0b3I6ICdyYWMtYXVvYmotaGVscCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2F1b2JqLWhlbHAuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2F1b2JqLWhlbHAuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBdW9iakhlbHBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuXHJcbiAgICAvKiog6KaB5Yqg6L2955qE5pWw5o2u57G75Z6LXHJcbiAgICAgKiBhbGzku6Pooajlhajpg6jmnYPpmZDlr7nosaFcclxuICAgICAqIHJlYXNzaWdu5Luj6KGo5YWB6K645Zyo55So5oi35LiK6YeN5paw5o6I5p2D55qE5p2D6ZmQ5a+56LGhXHJcbiAgICAgKi9cclxuICBASW5wdXQoKSBkYXRhTW9kZTogJ2FsbCcgfCAncmVhc3NpZ24nO1xyXG4gIEBJbnB1dCgpIGRpc3BsYXlUZXh0ID0gJyc7XHJcbiAgQElucHV0KCkgY3VyS2V5SWQ6IHN0cmluZztcclxuICBjdXJLZXlJZExpc3Q6IHN0cmluZ1tdO1xyXG4gIGN1ckF1dGhPYmo6IEF1dGhvYmpFbnRpdHk7XHJcbiAgc2VsZWN0ZWRLZXlPbGQgPSAnJztcclxuXHJcbiAgQFZpZXdDaGlsZCgnYXVvYmpMb29rdXAnKSBhdW9iakxvb2t1cDogTG9va3VwQ29tcG9uZW50O1xyXG5cclxuICAvKiog5a+86Iiq5LqL5Lu2ICovXHJcbiAgQE91dHB1dCgpIHNlbGVjdGVkQ2hhbmdlZDogRXZlbnRFbWl0dGVyPEF1dGhvYmpFbnRpdHk+ID0gbmV3IEV2ZW50RW1pdHRlcjxBdXRob2JqRW50aXR5PigpO1xyXG5cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmN1cktleUlkTGlzdCA9IFtdO1xyXG4gICAgdGhpcy5jdXJLZXlJZExpc3QucHVzaCh0aGlzLmN1cktleUlkKTtcclxuICB9XHJcblxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAvLyDlj5bmlbDliJdcclxuICBhZnRlcktleVNlbGVjdGVkKGFyZ3M6IGFueSkge1xyXG4gICAgICB0aGlzLmN1ckF1dGhPYmogPSBuZXcgQXV0aG9iakVudGl0eSgpO1xyXG4gICAgICB0aGlzLmN1cktleUlkTGlzdCA9IFtdO1xyXG4gICAgICAvLyDmm7TmlrDlgLxcclxuICAgICAgZnJvbShhcmdzKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyQXV0aE9iai5pZCA9IGl0ZW1bJ2lkJ107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1ckF1dGhPYmoubmFtZSA9IGl0ZW1bJ25hbWUnXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyS2V5SWQgPSBpdGVtWydpZCddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJLZXlJZExpc3QucHVzaChpdGVtWydpZCddKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBpdGVtWyduYW1lJ107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlZC5lbWl0KHRoaXMuY3VyQXV0aE9iaik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuYXVvYmpMb29rdXAuY2xvc2VEaWFsb2coKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiDpgInkuK3ooYzmlLnlj5jlkI7op6blj5Hkuovku7ZcclxuICAgKi9cclxuICBoYW5kbGVTZWxlY3Rpb24oYXJnczogYW55KSB7XHJcbiAgICB0aGlzLmN1cktleUlkID0gYXJncy5ub2RlLmRhdGEuaWQ7XHJcbiAgICB0aGlzLmN1ckF1dGhPYmogPSBhcmdzLm5vZGUuZGF0YTtcclxuICAgIC8vIOmmluasoeinpuWPkVxyXG4gICAgaWYgKHRoaXMuY3VyS2V5SWQgPT09ICcnKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRLZXlPbGQgPSB0aGlzLmN1cktleUlkO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlZC5lbWl0KHRoaXMuY3VyQXV0aE9iaik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDlj5jljJbnmoTmg4XlhrXkuIvop6blj5FcclxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRLZXlPbGQgIT09IHRoaXMuY3VyS2V5SWQpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkS2V5T2xkID0gdGhpcy5jdXJLZXlJZDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlZC5lbWl0KHRoaXMuY3VyQXV0aE9iaik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iXX0=