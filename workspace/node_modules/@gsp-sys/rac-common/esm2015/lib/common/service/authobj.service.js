/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { RestfulService } from '@farris/devkit';
import { RacCommonUtil } from '../util/rac-util';
import { of } from 'rxjs/observable/of';
import { MessagerService } from '@farris/ui-messager';
/**
 * 取数服务
 */
export class AuthObjService {
    /**
     * @param {?} rest
     * @param {?} util
     * @param {?} msgService
     */
    constructor(rest, util, msgService) {
        this.rest = rest;
        this.util = util;
        this.msgService = msgService;
    }
    /**
     * 获取指定权限对象、数据操作下关联的权限字段
     * @param {?} authObjId
     * @param {?} authOpId
     * @return {?}
     */
    getAuthEntryByOp(authObjId, authOpId) {
        /** @type {?} */
        const url = this.util.getAuthorizationPath() + `/` + authObjId + `/` + authOpId;
        /** @type {?} */
        const headers = this.util.getHeader();
        return this.rest.get(url, null, headers);
    }
    /**
     * @return {?}
     */
    getAll() {
        /** @type {?} */
        const headers = this.util.getHeader();
        /** @type {?} */
        const url = this.util.getAuthorizationPath() + '/designtime';
        return this.rest.get(url, null, headers);
    }
    /**
     * @return {?}
     */
    getAllReAssign() {
        /** @type {?} */
        const headers = this.util.getHeader();
        /** @type {?} */
        const url = this.util.getAuthorizationPath() + '/reassign';
        return this.rest.get(url, null, headers);
    }
    /**
     * 异常处理
     * @param {?} error
     * @return {?}
     */
    handlerError(error) {
        console.log(error);
        this.msgService.error(error.error.Message);
    }
    /**
     * @private
     * @template T
     * @param {?=} operation
     * @param {?=} result
     * @return {?}
     */
    handleError(operation = 'operation', result) {
        return (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            console.error(error); // log to console instead
            return of((/** @type {?} */ (result)));
        });
    }
}
AuthObjService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
AuthObjService.ctorParameters = () => [
    { type: RestfulService },
    { type: RacCommonUtil },
    { type: MessagerService }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    AuthObjService.prototype.rest;
    /**
     * @type {?}
     * @private
     */
    AuthObjService.prototype.util;
    /**
     * @type {?}
     * @private
     */
    AuthObjService.prototype.msgService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0aG9iai5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1zeXMvcmFjLWNvbW1vbi8iLCJzb3VyY2VzIjpbImxpYi9jb21tb24vc2VydmljZS9hdXRob2JqLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUdBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDeEMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7O0FBSXRELE1BQU0sT0FBTyxjQUFjOzs7Ozs7SUFDdkIsWUFDWSxJQUFvQixFQUNwQixJQUFtQixFQUNuQixVQUEyQjtRQUYzQixTQUFJLEdBQUosSUFBSSxDQUFnQjtRQUNwQixTQUFJLEdBQUosSUFBSSxDQUFlO1FBQ25CLGVBQVUsR0FBVixVQUFVLENBQWlCO0lBRXZDLENBQUM7Ozs7Ozs7SUFLRCxnQkFBZ0IsQ0FBQyxTQUFpQixFQUFFLFFBQWdCOztjQUMxQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEdBQUcsR0FBRyxTQUFTLEdBQUcsR0FBRyxHQUFHLFFBQVE7O2NBQ3pFLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtRQUNyQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDN0MsQ0FBQzs7OztJQUdELE1BQU07O2NBQ0ksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFOztjQUMvQixHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLGFBQWE7UUFDNUQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzdDLENBQUM7Ozs7SUFFRCxjQUFjOztjQUNKLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTs7Y0FDL0IsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxXQUFXO1FBQzFELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM3QyxDQUFDOzs7Ozs7SUFPRCxZQUFZLENBQUMsS0FBd0I7UUFDakMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7Ozs7Ozs7O0lBRU8sV0FBVyxDQUFJLFNBQVMsR0FBRyxXQUFXLEVBQUUsTUFBVTtRQUN0RDs7OztRQUFPLENBQUMsS0FBVSxFQUFpQixFQUFFO1lBQ2pDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyx5QkFBeUI7WUFDL0MsT0FBTyxFQUFFLENBQUMsbUJBQUEsTUFBTSxFQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDLEVBQUM7SUFDTixDQUFDOzs7WUE5Q0osVUFBVTs7OztZQU5GLGNBQWM7WUFDZCxhQUFhO1lBRWIsZUFBZTs7Ozs7OztJQU1oQiw4QkFBNEI7Ozs7O0lBQzVCLDhCQUEyQjs7Ozs7SUFDM0Isb0NBQW1DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cEVycm9yUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJlc3RmdWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQgeyBSYWNDb21tb25VdGlsIH0gZnJvbSAnLi4vdXRpbC9yYWMtdXRpbCc7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcy9vYnNlcnZhYmxlL29mJztcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcblxyXG4vKiog5Y+W5pWw5pyN5YqhICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEF1dGhPYmpTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgcmVzdDogUmVzdGZ1bFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSB1dGlsOiBSYWNDb21tb25VdGlsLFxyXG4gICAgICAgIHByaXZhdGUgbXNnU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmjIflrprmnYPpmZDlr7nosaHjgIHmlbDmja7mk43kvZzkuIvlhbPogZTnmoTmnYPpmZDlrZfmrrVcclxuICAgICAqL1xyXG4gICAgZ2V0QXV0aEVudHJ5QnlPcChhdXRoT2JqSWQ6IHN0cmluZywgYXV0aE9wSWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy51dGlsLmdldEF1dGhvcml6YXRpb25QYXRoKCkgKyBgL2AgKyBhdXRoT2JqSWQgKyBgL2AgKyBhdXRoT3BJZDtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy51dGlsLmdldEhlYWRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KHVybCwgbnVsbCwgaGVhZGVycyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldEFsbCgpOiBPYnNlcnZhYmxlPGFueVtdPiB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMudXRpbC5nZXRIZWFkZXIoKTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnV0aWwuZ2V0QXV0aG9yaXphdGlvblBhdGgoKSArICcvZGVzaWdudGltZSc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdC5nZXQodXJsLCBudWxsLCBoZWFkZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxSZUFzc2lnbigpOiBPYnNlcnZhYmxlPGFueVtdPiB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMudXRpbC5nZXRIZWFkZXIoKTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnV0aWwuZ2V0QXV0aG9yaXphdGlvblBhdGgoKSArICcvcmVhc3NpZ24nO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KHVybCwgbnVsbCwgaGVhZGVycyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5byC5bi45aSE55CGXHJcbiAgICAgKiBAcGFyYW0gYXVvYmog5p2D6ZmQ5a+56LGh5a6e5L2TXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZXJFcnJvcihlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmVycm9yKGVycm9yLmVycm9yLk1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3I8VD4ob3BlcmF0aW9uID0gJ29wZXJhdGlvbicsIHJlc3VsdD86IFQpIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yOiBhbnkpOiBPYnNlcnZhYmxlPFQ+ID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGxvZyB0byBjb25zb2xlIGluc3RlYWRcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHJlc3VsdCBhcyBUKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==