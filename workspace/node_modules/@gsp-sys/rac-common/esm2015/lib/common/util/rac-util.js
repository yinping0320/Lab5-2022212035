/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpHeaders } from '@angular/common/http';
import { SessionService } from '@ecp-caf/caf-common';
import { BizDataDTO } from '../entity/auresult.entity';
export class RacCommonUtil {
    /**
     * @param {?} sessionSv
     */
    constructor(sessionSv) {
        this.sessionSv = sessionSv;
        /**
         * 维度1的值
         */
        this.assid1 = '';
        /**
         * 维度2的值
         */
        this.assid2 = '';
        this.AUDATACONTROL = 'AuDataControl';
        this.expandIcon = 'f-icon f-icon-file-folder-open text-warning';
        this.collapseIcon = 'f-icon f-icon-file-folder-close text-warning';
        this.leafIcon = 'f-icon f-icon-file-txt text-warning';
    }
    /**
     * 构造Header
     * @return {?}
     */
    getHeader() {
        /** @type {?} */
        const sessionId = this.sessionSv.getCurrentSeesionId();
        /** @type {?} */
        const headers = new HttpHeaders().set('SessionId', sessionId);
        return { headers };
    }
    /**
     * 获取上下文中的用户
     * @return {?}
     */
    getCurrentUserId() {
        // 测试用写死
        return 'admin';
    }
    /**
     * Guid生成
     * @return {?}
     */
    getGuid36() {
        /**
         * @return {?}
         */
        function S4() {
            // tslint:disable-next-line:no-bitwise
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());
    }
    /**
     * 权限分配结果路径
     * @return {?}
     */
    getResultPath() {
        /** @type {?} */
        const path = `/api/runtime/sys/v1.0/assignresults`;
        return path;
    }
    /**
     * 权限对象路径
     * @return {?}
     */
    getAuthorizationPath() {
        /** @type {?} */
        const path = `/api/runtime/sys/v1.0/authorizations`;
        return path;
    }
    /**
     * 权限字段路径
     * @return {?}
     */
    getAuthfieldPath() {
        /** @type {?} */
        const path = `/api/runtime/sys/v1.0/authfields`;
        return path;
    }
    /**
     * 重授权对象路径
     * @return {?}
     */
    getReAssignPath() {
        /** @type {?} */
        const path = `/api/runtime/sys/v1.0/reassigns`;
        return path;
    }
    /**
     * 获取新增的内容
     * @param {?} newarr
     * @param {?} oldarr
     * @return {?}
     */
    getAddIds(newarr, oldarr) {
        /** @type {?} */
        const addIds = [];
        newarr.forEach((/**
         * @param {?} x
         * @return {?}
         */
        x => {
            if (!oldarr.includes(x)) {
                addIds.push(x);
            }
        }));
        return addIds;
    }
    /**
     * 获取删除的内容
     * @param {?} newarr
     * @param {?} oldarr
     * @return {?}
     */
    getRemoveIds(newarr, oldarr) {
        return this.getAddIds(oldarr, newarr);
    }
    /**
     * @param {?} arrs
     * @return {?}
     */
    convertToBizDataDTO(arrs) {
        return arrs.map((/**
         * @param {?} x
         * @return {?}
         */
        x => {
            /** @type {?} */
            const dataDto = new BizDataDTO();
            dataDto.data = x;
            return dataDto;
        }));
    }
    /**
     * 有效的字符串
     * @param {?} value
     * @return {?}
     */
    isNullOrEmptyString(value) {
        return this.isBlank(value) || value.toString().trim().length === 0;
    }
    /**
     * 不为空
     * @param {?} value
     * @return {?}
     */
    isBlank(value) {
        return value === null || value === undefined;
    }
    /**
     * 字符串不为空
     * @param {?} value
     * @return {?}
     */
    isNotNullOrEmptyString(value) {
        return !(this.isNullOrEmptyString(value));
    }
    /**
     * 找到树形Parent分级方式的加载的第一层
     * @param {?} datas
     * @param {?} key
     * @param {?} parentKey
     * @return {?}
     */
    findLayer1ByParentId(datas, key, parentKey) {
        /** @type {?} */
        const rtn = [];
        datas.forEach((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            /** @type {?} */
            const findParent = datas.find((/**
             * @param {?} parent
             * @return {?}
             */
            parent => parent[key] === data[parentKey]));
            if (!findParent && data.type !== undefined && data.type !== null && data.type.toString() === '99') {
                data.parentId = undefined;
                rtn.push(data);
            }
        }));
        return rtn;
    }
    /**
     * 类型是否为导航
     * @param {?} type
     * @return {?}
     */
    isNav(type) {
        return type === '99' || type === '0';
    }
    /**
     * @param {?} farrisTt
     * @return {?}
     */
    setTreeIcon(farrisTt) {
        farrisTt.expandIcon = this.expandIcon;
        farrisTt.collapseIcon = this.collapseIcon;
        farrisTt.leafIcon = this.leafIcon;
        farrisTt.detectChanges();
    }
}
RacCommonUtil.decorators = [
    { type: Injectable }
];
/** @nocollapse */
RacCommonUtil.ctorParameters = () => [
    { type: SessionService }
];
if (false) {
    /** @type {?} */
    RacCommonUtil.prototype.sessionId;
    /** @type {?} */
    RacCommonUtil.prototype.ownerId;
    /** @type {?} */
    RacCommonUtil.prototype.ownerCode;
    /** @type {?} */
    RacCommonUtil.prototype.ownerName;
    /**
     * 权限所有者类型 岗位1，用户2
     * @type {?}
     */
    RacCommonUtil.prototype.ownerType;
    /**
     * 岗位类型 组织岗0，通用岗1，用户2 TODO 命令不支持传参数，暂时这么处理
     * @type {?}
     */
    RacCommonUtil.prototype.posType;
    /** @type {?} */
    RacCommonUtil.prototype.packageId;
    /** @type {?} */
    RacCommonUtil.prototype.year;
    /**
     * 维度1的值
     * @type {?}
     */
    RacCommonUtil.prototype.assid1;
    /**
     * 维度2的值
     * @type {?}
     */
    RacCommonUtil.prototype.assid2;
    /** @type {?} */
    RacCommonUtil.prototype.funcId;
    /** @type {?} */
    RacCommonUtil.prototype.AUDATACONTROL;
    /** @type {?} */
    RacCommonUtil.prototype.expandIcon;
    /** @type {?} */
    RacCommonUtil.prototype.collapseIcon;
    /** @type {?} */
    RacCommonUtil.prototype.leafIcon;
    /**
     * @type {?}
     * @private
     */
    RacCommonUtil.prototype.sessionSv;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFjLXV0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN5cy9yYWMtY29tbW9uLyIsInNvdXJjZXMiOlsibGliL2NvbW1vbi91dGlsL3JhYy11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDckQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBSXZELE1BQU0sT0FBTyxhQUFhOzs7O0lBRXRCLFlBQW9CLFNBQXlCO1FBQXpCLGNBQVMsR0FBVCxTQUFTLENBQWdCOzs7O1FBNEJ0QyxXQUFNLEdBQUcsRUFBRSxDQUFDOzs7O1FBRVosV0FBTSxHQUFHLEVBQUUsQ0FBQztRQU1aLGtCQUFhLEdBQUcsZUFBZSxDQUFDO1FBMEkvQixlQUFVLEdBQUcsNkNBQTZDLENBQUM7UUFDM0QsaUJBQVksR0FBRyw4Q0FBOEMsQ0FBQztRQUM5RCxhQUFRLEdBQUcscUNBQXFDLENBQUM7SUEvS3pELENBQUM7Ozs7O0lBd0NELFNBQVM7O2NBRUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUU7O2NBQ2hELE9BQU8sR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDO1FBQzdELE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQztJQUN2QixDQUFDOzs7OztJQUtELGdCQUFnQjtRQUVaLFFBQVE7UUFDUixPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDOzs7OztJQUdELFNBQVM7Ozs7UUFDTCxTQUFTLEVBQUU7WUFDUCxzQ0FBc0M7WUFDdEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdB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LEVBQUU7Z0JBQ2hHLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO2dCQUMxQixHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2xCO1FBQ0wsQ0FBQyxFQUFDLENBQUM7UUFDSCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7Ozs7OztJQUdDLEtBQUssQ0FBQyxJQUFZO1FBQ2hCLE9BQU8sSUFBSSxLQUFLLElBQUksSUFBSyxJQUFJLEtBQUssR0FBRyxDQUFDO0lBQ3pDLENBQUM7Ozs7O0lBS0QsV0FBVyxDQUFDLFFBQTRCO1FBQ3BDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN0QyxRQUFRLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDMUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2xDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7WUF6TEwsVUFBVTs7OztZQUpGLGNBQWM7Ozs7SUFVbkIsa0NBQXlCOztJQUt6QixnQ0FBdUI7O0lBR3ZCLGtDQUF5Qjs7SUFHekIsa0NBQXlCOzs7OztJQUd6QixrQ0FBeUI7Ozs7O0lBR3hCLGdDQUF1Qjs7SUFHeEIsa0NBQXlCOztJQUd6Qiw2QkFBaUI7Ozs7O0lBRWpCLCtCQUFtQjs7Ozs7SUFFbkIsK0JBQW1COztJQUluQiwrQkFBc0I7O0lBRXRCLHNDQUF1Qzs7SUEwSXRDLG1DQUFrRTs7SUFDbEUscUNBQXFFOztJQUNyRSxpQ0FBd0Q7Ozs7O0lBaEw3QyxrQ0FBaUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBIZWFkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJ0BlY3AtY2FmL2NhZi1jb21tb24nO1xyXG5pbXBvcnQgeyBCaXpEYXRhRFRPIH0gZnJvbSAnLi4vZW50aXR5L2F1cmVzdWx0LmVudGl0eSc7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFJhY0NvbW1vblV0aWwge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2Vzc2lvblN2OiBTZXNzaW9uU2VydmljZSkge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXNzaW9uSWQ6IHN0cmluZztcclxuICAgIC8vIHB1YmxpYyBjdXJyZW50VXJsID0gJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMCc7XHJcbiAgICAvLyBwdWJsaWMgY3VycmVudFVybCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXAnKTtcclxuXHJcbiAgICAvLyDmnYPpmZDmiYDmnInogIXmoIfor4YgIFRPRE8g5ZG95Luk5LiN5pSv5oyB5Lyg5Y+C5pWw77yM5pqC5pe26L+Z5LmI5aSE55CGXHJcbiAgICBwdWJsaWMgb3duZXJJZDogc3RyaW5nO1xyXG5cclxuICAgIC8vIOadg+mZkOaJgOacieiAhee8luWPtyAgVE9ETyDlkb3ku6TkuI3mlK/mjIHkvKDlj4LmlbDvvIzmmoLml7bov5nkuYjlpITnkIZcclxuICAgIHB1YmxpYyBvd25lckNvZGU6IHN0cmluZztcclxuXHJcbiAgICAvLyDmnYPpmZDmiYDmnInogIXnvJblj7cgIFRPRE8g5ZG95Luk5LiN5pSv5oyB5Lyg5Y+C5pWw77yM5pqC5pe26L+Z5LmI5aSE55CGXHJcbiAgICBwdWJsaWMgb3duZXJOYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOadg+mZkOaJgOacieiAheexu+WeiyDlspfkvY0x77yM55So5oi3MiAqL1xyXG4gICAgcHVibGljIG93bmVyVHlwZTogbnVtYmVyO1xyXG5cclxuICAgIC8qKiAg5bKX5L2N57G75Z6LIOe7hOe7h+WylzDvvIzpgJrnlKjlspcx77yM55So5oi3MiBUT0RPIOWRveS7pOS4jeaUr+aMgeS8oOWPguaVsO+8jOaaguaXtui/meS5iOWkhOeQhiAqL1xyXG4gICAgIHB1YmxpYyBwb3NUeXBlOiBudW1iZXI7XHJcblxyXG4gICAgLy8gIFRPRE8g5ZG95Luk5LiN5pSv5oyB5Lyg5Y+C5pWw77yM5pqC5pe26L+Z5LmI5aSE55CGXHJcbiAgICBwdWJsaWMgcGFja2FnZUlkOiBzdHJpbmc7XHJcblxyXG4gICAgLy8g5bm05bqmICBUT0RPIOWRveS7pOS4jeaUr+aMgeS8oOWPguaVsO+8jOaaguaXtui/meS5iOWkhOeQhlxyXG4gICAgcHVibGljIHllYXI6IGFueTtcclxuICAgIC8qKiDnu7TluqYx55qE5YC8ICovXHJcbiAgICBwdWJsaWMgYXNzaWQxID0gJyc7XHJcbiAgICAvKiog57u05bqmMueahOWAvCAqL1xyXG4gICAgcHVibGljIGFzc2lkMiA9ICcnO1xyXG5cclxuXHJcbiAgICAvLyDot6/nlLHov4fmnaXnmoToj5zljZVJRFxyXG4gICAgcHVibGljIGZ1bmNJZDogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBBVURBVEFDT05UUk9MID0gJ0F1RGF0YUNvbnRyb2wnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCgSGVhZGVyXHJcbiAgICAgKi9cclxuICAgIGdldEhlYWRlcigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdGhpcy5zZXNzaW9uU3YuZ2V0Q3VycmVudFNlZXNpb25JZCgpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKS5zZXQoJ1Nlc3Npb25JZCcsIHNlc3Npb25JZCk7XHJcbiAgICAgICAgcmV0dXJuIHsgaGVhZGVycyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiK5LiL5paH5Lit55qE55So5oi3XHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRVc2VySWQoKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgLy8g5rWL6K+V55So5YaZ5q27XHJcbiAgICAgICAgcmV0dXJuICdhZG1pbic7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEd1aWTnlJ/miJAgKi9cclxuICAgIGdldEd1aWQzNigpOiBzdHJpbmcge1xyXG4gICAgICAgIGZ1bmN0aW9uIFM0KCkge1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYml0d2lzZVxyXG4gICAgICAgICAgICByZXR1cm4gKCgoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkgfCAwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKFM0KCkgKyBTNCgpICsgJy0nICsgUzQoKSArICctJyArIFM0KCkgKyAnLScgKyBTNCgpICsgJy0nICsgUzQoKSArIFM0KCkgKyBTNCgpKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p2D6ZmQ5YiG6YWN57uT5p6c6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIGdldFJlc3VsdFBhdGgoKTogYW55IHtcclxuICAgICAgICBjb25zdCBwYXRoID0gYC9hcGkvcnVudGltZS9zeXMvdjEuMC9hc3NpZ25yZXN1bHRzYDtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOadg+mZkOWvueixoei3r+W+hFxyXG4gICAgICovXHJcbiAgICBnZXRBdXRob3JpemF0aW9uUGF0aCgpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2FwaS9ydW50aW1lL3N5cy92MS4wL2F1dGhvcml6YXRpb25zYDtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmnYPpmZDlrZfmrrXot6/lvoRcclxuICAgICAqL1xyXG4gICAgZ2V0QXV0aGZpZWxkUGF0aCgpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2FwaS9ydW50aW1lL3N5cy92MS4wL2F1dGhmaWVsZHNgO1xyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6YeN5o6I5p2D5a+56LGh6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIGdldFJlQXNzaWduUGF0aCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBgL2FwaS9ydW50aW1lL3N5cy92MS4wL3JlYXNzaWduc2A7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmlrDlop7nmoTlhoXlrrlcclxuICAgICAqIEBwYXJhbSBuZXdhcnI6IOacgOaWsOeahOWGheWuuVxyXG4gICAgICogQHBhcmFtIG9sZGFycu+8muWOhuWPsuWGheWuuVxyXG4gICAgICovXHJcbiAgICBnZXRBZGRJZHMobmV3YXJyOiBzdHJpbmdbXSwgb2xkYXJyOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCBhZGRJZHM6IHN0cmluZ1tdICA9IFtdO1xyXG4gICAgICAgIG5ld2Fyci5mb3JFYWNoKHggPT4ge1xyXG4gICAgICAgICAgaWYgKCFvbGRhcnIuaW5jbHVkZXMoeCkpIHtcclxuICAgICAgICAgICAgICBhZGRJZHMucHVzaCh4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhZGRJZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bliKDpmaTnmoTlhoXlrrlcclxuICAgICAqIEBwYXJhbSBuZXdhcnI6IOacgOaWsOeahOWGheWuuVxyXG4gICAgICogQHBhcmFtIG9sZGFycu+8muWOhuWPsuWGheWuuVxyXG4gICAgICovXHJcbiAgICBnZXRSZW1vdmVJZHMobmV3YXJyOiBzdHJpbmdbXSwgb2xkYXJyOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcclxuICAgICAgIHJldHVybiB0aGlzLmdldEFkZElkcyhvbGRhcnIsIG5ld2Fycik7XHJcbiAgICB9XHJcblxyXG4gICAgY29udmVydFRvQml6RGF0YURUTyhhcnJzOiBzdHJpbmdbXSk6IEJpekRhdGFEVE9bXSB7XHJcbiAgICAgICByZXR1cm4gYXJycy5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFEdG8gPSBuZXcgQml6RGF0YURUTygpO1xyXG4gICAgICAgICAgICBkYXRhRHRvLmRhdGEgPSB4O1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YUR0bztcclxuICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICog5pyJ5pWI55qE5a2X56ym5LiyXHJcbiAgICAgICovXHJcbiAgICAgaXNOdWxsT3JFbXB0eVN0cmluZyh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICB0aGlzLmlzQmxhbmsodmFsdWUpIHx8IHZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICog5LiN5Li656m6XHJcbiAgICAgICovXHJcbiAgICBpc0JsYW5rKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICog5a2X56ym5Liy5LiN5Li656m6XHJcbiAgICAgICovXHJcbiAgICAgaXNOb3ROdWxsT3JFbXB0eVN0cmluZyh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICAhKHRoaXMuaXNOdWxsT3JFbXB0eVN0cmluZyh2YWx1ZSkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKiog5om+5Yiw5qCR5b2iUGFyZW505YiG57qn5pa55byP55qE5Yqg6L2955qE56ys5LiA5bGCICovXHJcbiAgICBmaW5kTGF5ZXIxQnlQYXJlbnRJZChkYXRhczogYW55W10sIGtleTogc3RyaW5nLCBwYXJlbnRLZXk6IHN0cmluZyk6IGFueVtdIHtcclxuICAgICAgICBjb25zdCBydG4gPSBbXTtcclxuICAgICAgICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaW5kUGFyZW50ID0gZGF0YXMuZmluZChwYXJlbnQgPT4gcGFyZW50W2tleV0gPT09IGRhdGFbcGFyZW50S2V5XSk7XHJcbiAgICAgICAgICAgIGlmICghZmluZFBhcmVudCAmJiBkYXRhLnR5cGUgIT09IHVuZGVmaW5lZCAmJiBkYXRhLnR5cGUgIT09IG51bGwgICYmIGRhdGEudHlwZS50b1N0cmluZygpID09PSAnOTknKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnBhcmVudElkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgcnRuLnB1c2goZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcnRuO1xyXG4gICAgfVxyXG5cclxuICAgICAgLyoqIOexu+Wei+aYr+WQpuS4uuWvvOiIqiAqL1xyXG4gICAgICBpc05hdih0eXBlOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gJzk5JyB8fCAgdHlwZSA9PT0gJzAnO1xyXG4gICAgIH1cclxuXHJcbiAgICAgcHVibGljIGV4cGFuZEljb24gPSAnZi1pY29uIGYtaWNvbi1maWxlLWZvbGRlci1vcGVuIHRleHQtd2FybmluZyc7XHJcbiAgICAgcHVibGljIGNvbGxhcHNlSWNvbiA9ICdmLWljb24gZi1pY29uLWZpbGUtZm9sZGVyLWNsb3NlIHRleHQtd2FybmluZyc7XHJcbiAgICAgcHVibGljIGxlYWZJY29uID0gJ2YtaWNvbiBmLWljb24tZmlsZS10eHQgdGV4dC13YXJuaW5nJztcclxuICAgICBzZXRUcmVlSWNvbihmYXJyaXNUdDogVHJlZVRhYmxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgIGZhcnJpc1R0LmV4cGFuZEljb24gPSB0aGlzLmV4cGFuZEljb247XHJcbiAgICAgICAgIGZhcnJpc1R0LmNvbGxhcHNlSWNvbiA9IHRoaXMuY29sbGFwc2VJY29uO1xyXG4gICAgICAgICBmYXJyaXNUdC5sZWFmSWNvbiA9IHRoaXMubGVhZkljb247XHJcbiAgICAgICAgIGZhcnJpc1R0LmRldGVjdENoYW5nZXMoKTtcclxuICAgICB9XHJcblxyXG59XHJcbiJdfQ==