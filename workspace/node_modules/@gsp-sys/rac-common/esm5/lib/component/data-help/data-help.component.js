/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, TemplateRef, Input, Output, EventEmitter } from '@angular/core';
import { NotifyService } from '@farris/ui-notify';
import { TreeTableComponent } from '@farris/ui-treetable';
import { MessagerService } from '@farris/ui-messager';
import { AuthDataSource } from '../../common/entity/auth-data-source.entity';
import { RacCommonUtil } from '../../common/util/rac-util';
import { INIT_SKIP, BUTTONCOUNT, PAGESIZES, INIT_PAGEINDEX, INIT_PAGESIZE } from '../../common/util/page';
import { HierarchicalType } from '../../common/entity/hierarchical-type.enum';
import { TreeService } from '../../common/service/tree.service';
/**
 * 用户授权业务组织组件
 */
var DataHelpComponent = /** @class */ (function () {
    function DataHelpComponent(session, msgService, notifyService, treeService) {
        this.session = session;
        this.msgService = msgService;
        this.notifyService = notifyService;
        this.treeService = treeService;
        this.closeModalEmitter = new EventEmitter();
        /**
         * 弹出框中用到的最终选中的数据
         */
        this.selectEmitter = new EventEmitter();
        this.selectedModels = [];
        this.hasSelectKeys = []; // 输入 修改前，已经选中
        // 输入 修改前，已经选中
        this.isHasSelectAll = false; // 输入 之前是否全选
        // 输入 之前是否全选
        this.authField = ''; // 全局业务组织内码
        // 全局业务组织内码
        this.ownerId = ''; // 用户内码
        // 用户内码
        this.canAssignDatas = []; // 可分配的数据源
        // 数据是否完整；完整表示可以分*
        this.isDisplayTree = false; // 输入
        // 输入
        this.isShowSearch = false; // 是否展示搜索
        // 是否展示搜索
        this.isSelectAll = false;
        this.selectKeys = [];
        /**
         * 是否单选
         */
        this.singleSelect = false;
        this.treeHeight = '342px';
        /**
         * 是否受维度分组
         */
        this.isAuGroup = true;
        /**
         * 弹出框中用到的最终选中的数据
         */
        this.selectByGroupEmitter = new EventEmitter();
        // 业务数据源相关信息
        this.dataKey = ''; // 取数主键列
        // 取数主键列
        this.helpFields = []; // 字段显示名
        // 字段显示名
        this.showFields = []; // 显示的字段
        // 显示的字段
        this.codeOrNameFields = []; // 搜索的字段；
        // 搜索的字段；
        this.authDataSource = new AuthDataSource();
        /**
         * 是否可用
         */
        this.isEnable = true;
        /**
         * 是否全部权限
         */
        this.isAllAuth = false;
        // 组件上用skip
        this.skip = INIT_SKIP;
        this.pageSize = INIT_PAGESIZE;
        this.pageIndex = INIT_PAGEINDEX;
        // 树控件
        // 树控件绑定的数据
        this.treedata = [];
        // 绑定树的平铺数据
        this.flatData = [];
        /**
         * root根节点，用于默认展开
         */
        this.root = '';
        this.saveSelections = [];
        // TreeTable上要显示的列
        this.treeCols = [];
        // [
        //   { field: 'name', title: '名称', width: 100 },
        //   { field: 'code', title: '编号', width: 100 },
        // ];
        // 树节点加载方式，async异步，all 同步
        this.loadDataType = 'all'; // 'all' | 'async'
        // 'all' | 'async'
        // 树节点选中动作
        this.cascadeCheck = false;
        this.cascadeUp = false;
        this.cascadeDown = true;
        // 是否已经加载过
        this.isTreeLoaded = false;
        /**
         * 要搜索的信息
         */
        this.searchInfo = '';
        /**
         * 要搜索的信息
         */
        this.searchDatas = [];
        // searchTitle = this.translate.instant('auresult_search_label');
        this.searchTitle = '查找';
        // 上次搜索文本
        this.oldTreeSearch = '';
        this.treeSearchIndex = 0;
        // 分页模式
        this.pageSetting = {
            buttonCount: BUTTONCOUNT,
            info: true,
            pageSizes: PAGESIZES,
            previousNext: true
        };
    }
    /**
     * @return {?}
     */
    DataHelpComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /** 获取可分配的业务数据 */
    /**
     * 获取可分配的业务数据
     * @return {?}
     */
    DataHelpComponent.prototype.getAuthDataSource = /**
     * 获取可分配的业务数据
     * @return {?}
     */
    function () {
        this.isSelectAll = false;
        this.session.ownerId = this.ownerId;
        this.session.ownerType = 2;
        this.selectKeys = [];
        this.treeCols = [];
        this.treedata = [];
        this.cascadeCheck = false; // load数据时，级联先关闭，否则会导致下级选中，自动选中上级
        if (this.session.isNullOrEmptyString(this.authField)) {
            this.canAssignDatas = [];
            this.isSelectAll = false;
            return;
        }
    };
    /** 根据获取到的权限结果数据，加载界面 */
    /**
     * 根据获取到的权限结果数据，加载界面
     * @return {?}
     */
    DataHelpComponent.prototype.displayData = /**
     * 根据获取到的权限结果数据，加载界面
     * @return {?}
     */
    function () {
        var _this = this;
        this.selectKeys = [];
        this.treeCols = [];
        this.treedata = [];
        this.cascadeCheck = false; // load数据时，级联先关闭，否则会导致下级选中，自动选中上级
        if (this.session.isNullOrEmptyString(this.authField)) {
            this.canAssignDatas = [];
            this.isSelectAll = false;
            return;
        }
        this.showElement('checkall');
        this.isSelectAll = false;
        this.authDataSource.data = this.data.data;
        this.authDataSource.showFields = this.data.showFields;
        this.authDataSource.keyField = this.data.keyField;
        this.authDataSource.helpFields = this.data.helpFields;
        this.authDataSource.hierarchicalType = this.data.hierarchicalType;
        this.authDataSource.hierarchicalInfo = this.data.hierarchicalInfo;
        this.canAssignDatas = this.authDataSource.data;
        this.searchDatas = this.canAssignDatas;
        this.dataKey = this.authDataSource.keyField;
        this.helpFields = this.authDataSource.helpFields;
        this.showFields = this.authDataSource.showFields;
        this.codeOrNameFields = this.getCodeOrNameFields();
        if (this.hasSelectKeys.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x === '*'; }))) {
            this.isSelectAll = this.isHasSelectAll = true;
        }
        if (this.isAllAuth) {
            this.isSelectAll = this.isHasSelectAll = true;
        }
        if (this.isSelectAll) {
            // TODO  如何搞成 直接选中全部
            this.canAssignDatas.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                _this.selectKeys.push(item[_this.dataKey]);
            }));
        }
        else if (this.hasSelectKeys) {
            this.hasSelectKeys.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                _this.selectKeys.push(item);
            }));
        }
        // 显示列表
        if (this.isDisplayTree === false) {
            this.queryByPage();
            return;
        }
        // 显示树信息
        this.showTreeInfo();
    };
    /** 展示树形相关数据 */
    /**
     * 展示树形相关数据
     * @return {?}
     */
    DataHelpComponent.prototype.showTreeInfo = /**
     * 展示树形相关数据
     * @return {?}
     */
    function () {
        var _this = this;
        this.hideElement('checkall');
        // if (this.farrisTree === undefined) {
        //     return;
        // }
        // 处理树形相关逻辑
        this.authDataSource.showFields.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.treeCols.push({ field: item.field, title: item.title, width: 100 });
        }));
        /** @type {?} */
        var hierarchicalType = this.authDataSource.hierarchicalType;
        /** @type {?} */
        var hierarchicalInfo = this.authDataSource.hierarchicalInfo;
        if (hierarchicalType === HierarchicalType.Parent) {
            /** @type {?} */
            var parentKey = this.dataKey;
            if (hierarchicalInfo.parentKeyField && hierarchicalInfo.parentKeyField.length > 0) {
                parentKey = hierarchicalInfo.parentKeyField;
            }
            this.treedata = this.treeService.makeTreeByParent(this.canAssignDatas, hierarchicalInfo.parentField, parentKey);
        }
        else {
            this.treedata = this.treeService.makeTreeByPath(this.canAssignDatas, hierarchicalInfo.pathField);
        }
        // 找到第一层   直接展开
        // 初始加载不级联，否则会导致下级选中，自动选中上级
        this.farrisTree.cascadeCheck = false;
        this.isTreeLoaded = false;
        this.farrisTree.loadedData.subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            // 加载过，之后不需要再次加载
            if (_this.isTreeLoaded === true) {
                return;
            }
            // 初始加载不级联，否则会导致下级选中，自动选中上级
            _this.farrisTree.cascadeCheck = false;
            // 根节点默认展开
            if ((_this.root) && _this.root !== '') {
                _this.farrisTree.expandNode(_this.root);
            }
            if (_this.isSelectAll) {
                _this.farrisTree.checkAllNodes();
            }
            else if (_this.hasSelectKeys.length > 0) {
                _this.farrisTree.checkedNodes(_this.hasSelectKeys);
            }
            // load完数据时，级联打开，可以选中上级自动选中下级
            _this.farrisTree.cascadeCheck = true;
            // 加载过，之后不需要再次加载
            _this.isTreeLoaded = true;
        }));
    };
    /** 报错处理 */
    /**
     * 报错处理
     * @param {?} error
     * @return {?}
     */
    DataHelpComponent.prototype.handleError = /**
     * 报错处理
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this.authDataSource.data = [];
        console.log(error);
        console.log(error.error.Message);
        this.msgService.error(error.error.Message);
    };
    Object.defineProperty(DataHelpComponent.prototype, "selectableSettings", {
        // 选择属性：单选、多选
        get: 
        // 选择属性：单选、多选
        /**
         * @return {?}
         */
        function () {
            return {
                checkboxOnly: true,
                mode: this.singleSelect ? 'single' : 'multiple',
                enabled: true
            };
        },
        enumerable: true,
        configurable: true
    });
    // 图标
    // 图标
    /**
     * @param {?} __0
     * @return {?}
     */
    DataHelpComponent.prototype.iconClass = 
    // 图标
    /**
     * @param {?} __0
     * @return {?}
     */
    function (_a) {
        var type = _a.type;
        return {
            'k-i-folder': true,
            'k-icon': true
        };
    };
    /**
     * 获取选择信息
     */
    /**
     * 获取选择信息
     * @return {?}
     */
    DataHelpComponent.prototype.getSelectInfo = /**
     * 获取选择信息
     * @return {?}
     */
    function () {
        var _this = this;
        this.selectedModels = [];
        /** @type {?} */
        var result = {
            data: [],
            selectedKey: []
        };
        // 全选
        if (this.isSelectAll && this.isIntegrityData && this.data.length === this.selectKeys) {
            /** @type {?} */
            var obj = {
                data: '*'
            };
            this.selectedModels.push(obj);
            result.data = ['*'];
            result.selectedKey = ['*'];
            return result;
        }
        // 树显示，需要先根据选中的数据构造selectKeys
        if (this.isDisplayTree) {
            // 选中的行，过滤掉业务对象，只保留功能操作
            if (this.farrisTree.checkeds) {
                /** @type {?} */
                var checkedRows = this.farrisTree.checkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data; }));
                // 过滤功能操作分组的行
                // let checkedOpRows = this.checkedRows.filter(x => x.type === '1');
                this.selectKeys = checkedRows.map((/**
                 * @param {?} m
                 * @return {?}
                 */
                function (m) { return m[_this.dataKey]; }));
            }
            else {
                this.selectKeys = [];
            }
        }
        if (this.selectKeys.length > 0) {
            this.selectKeys.map((/**
             * @param {?} x
             * @return {?}
             */
            function (x) {
                /** @type {?} */
                var findObj = _this.canAssignDatas.find((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y[_this.dataKey] === x; }));
                _this.selectedModels.push(findObj);
            }));
        }
        result.data = this.selectedModels;
        result.selectedKey = this.selectKeys;
        return result;
    };
    /** 判断是否分了全部权限*，首先必须全选，其次必须是数据完整的，然后选中的数据必须与数据源长度一致（如果仅搜索后的全选，不是*） */
    /**
     * 判断是否分了全部权限*，首先必须全选，其次必须是数据完整的，然后选中的数据必须与数据源长度一致（如果仅搜索后的全选，不是*）
     * @return {?}
     */
    DataHelpComponent.prototype.getIsAllAuth = /**
     * 判断是否分了全部权限*，首先必须全选，其次必须是数据完整的，然后选中的数据必须与数据源长度一致（如果仅搜索后的全选，不是*）
     * @return {?}
     */
    function () {
        return this.isSelectAll && this.isIntegrityData && this.data.length === this.selectKeys;
    };
    /** 确定发射选中数据以及选中内码 */
    /**
     * 确定发射选中数据以及选中内码
     * @return {?}
     */
    DataHelpComponent.prototype.confirm = /**
     * 确定发射选中数据以及选中内码
     * @return {?}
     */
    function () {
        var _this = this;
        this.closeModalEmitter.next();
        this.selectedModels = [];
        if (this.getIsAllAuth()) {
            /** @type {?} */
            var obj = {
                data: '*'
            };
            this.selectedModels.push(obj);
            this.selectEmitter.next({
                data: ['*'],
                selectedKey: ['*']
            });
            return;
        }
        // 树显示，需要先根据选中的数据构造selectKeys
        if (this.isDisplayTree) {
            // 选中的行，过滤掉业务对象，只保留功能操作
            if (this.farrisTree.checkeds) {
                /** @type {?} */
                var checkedRows = this.farrisTree.checkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data; }));
                // 过滤功能操作分组的行
                // let checkedOpRows = this.checkedRows.filter(x => x.type === '1');
                this.selectKeys = checkedRows.map((/**
                 * @param {?} m
                 * @return {?}
                 */
                function (m) { return m[_this.dataKey]; }));
            }
            else {
                this.selectKeys = [];
            }
        }
        if (this.selectKeys.length > 0) {
            this.selectKeys.map((/**
             * @param {?} x
             * @return {?}
             */
            function (x) {
                /** @type {?} */
                var findObj = _this.canAssignDatas.find((/**
                 * @param {?} y
                 * @return {?}
                 */
                function (y) { return y[_this.dataKey] === x; }));
                _this.selectedModels.push(findObj);
            }));
        }
        this.selectEmitter.next({
            data: this.selectedModels,
            selectedKey: this.selectKeys
        });
    };
    /**
     * @return {?}
     */
    DataHelpComponent.prototype.cancle = /**
     * @return {?}
     */
    function () {
        this.closeModalEmitter.next();
    };
    /** 全选，这里全选可能是过滤后数据的全选 */
    /**
     * 全选，这里全选可能是过滤后数据的全选
     * @return {?}
     */
    DataHelpComponent.prototype.checkAllClick = /**
     * 全选，这里全选可能是过滤后数据的全选
     * @return {?}
     */
    function () {
        var _this = this;
        this.isSelectAll = !this.isSelectAll;
        /** @type {?} */
        var key = '';
        if (this.isSelectAll) {
            // 如果已经选中，则不处理，没有选中，则选中
            this.searchDatas.forEach((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                key = data[_this.dataKey];
                /** @type {?} */
                var index = _this.selectKeys.findIndex((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return x === key; }));
                if (index < 0) {
                    _this.selectKeys.push(key);
                }
            }));
            if (this.isDisplayTree) {
                if (this.farrisTree) {
                    this.farrisTree.checkAllNodes();
                }
            }
        }
        else {
            if (this.isDisplayTree) {
                if (this.farrisTree) {
                    this.farrisTree.unCheckAllNodes();
                }
            }
            else {
                this.searchDatas.forEach((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    key = data[_this.dataKey];
                    /** @type {?} */
                    var index = _this.selectKeys.findIndex((/**
                     * @param {?} x
                     * @return {?}
                     */
                    function (x) { return x === key; }));
                    if (index > -1) {
                        // 如果已经选中，就删除
                        _this.selectKeys.splice(index, 1);
                    }
                }));
            }
        }
    };
    /**
     * @return {?}
     */
    DataHelpComponent.prototype.checkClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.isSelectAll = !this.isSelectAll;
        if (this.isSelectAll) {
            // TODO  如何搞成 直接选中全部
            this.canAssignDatas.forEach((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                _this.selectKeys.push(data[_this.dataKey]);
            }));
            this.farrisTree.checkAllNodes();
            this.selectByGroupEmitter.next(['*']);
        }
        else {
            //  this.farrisTree.unCheckAllNodes();
            this.selectKeys = [];
            this.selectByGroupEmitter.next([]);
        }
    };
    /** 选择事件 */
    /**
     * 选择事件
     * @param {?} e
     * @return {?}
     */
    DataHelpComponent.prototype.onSelectedKeysChange = /**
     * 选择事件
     * @param {?} e
     * @return {?}
     */
    function (e) {
        /** @type {?} */
        var len = this.selectKeys.length;
        if (len !== this.canAssignDatas.length) {
            // 如果全部选中了，isSelectAll 也不需要设置为true；isSelectAll的含义是*的意思，新增数据也被选中
            this.isSelectAll = false;
        }
        if (this.isSelectAll) {
            this.selectByGroupEmitter.next(['*']);
        }
        else {
            this.selectByGroupEmitter.next(this.selectKeys);
        }
    };
    /**
     * 点击分页查询或者分页参数变化后查询
     * @param event 分页参数
     */
    /**
     * 点击分页查询或者分页参数变化后查询
     * @param {?} event 分页参数
     * @return {?}
     */
    DataHelpComponent.prototype.pageChange = /**
     * 点击分页查询或者分页参数变化后查询
     * @param {?} event 分页参数
     * @return {?}
     */
    function (event) {
        // skip和pageSize必须得重新赋值，因为可能用户重新选择了分页大小或者分页索引
        // 刷新界面按钮数量和焦点
        this.skip = event.skip;
        this.pageSize = event.take;
        this.pageIndex = this.skip / this.pageSize + 1;
        // 查询
        this.queryByPage();
    };
    /**
     * 列表的查询
     */
    /**
     * 列表的查询
     * @return {?}
     */
    DataHelpComponent.prototype.queryByPage = /**
     * 列表的查询
     * @return {?}
     */
    function () {
        this.gridView = {
            data: this.searchDatas.slice(this.skip, this.skip + this.pageSize),
            total: this.searchDatas.length
        };
    };
    /**
     * @return {?}
     */
    DataHelpComponent.prototype.searchClick = /**
     * @return {?}
     */
    function () {
        this.search(this.searchInfo);
    };
    /**
     * 搜索树状
     */
    /**
     * 搜索树状
     * @param {?} txt
     * @return {?}
     */
    DataHelpComponent.prototype.search = /**
     * 搜索树状
     * @param {?} txt
     * @return {?}
     */
    function (txt) {
        var _this = this;
        if (this.isDisplayTree) {
            this.searchTree(txt);
            return;
        }
        this.searchInfo = txt;
        if (this.session.isNullOrEmptyString(this.searchInfo)) {
            this.searchDatas = this.canAssignDatas;
            this.queryByPage();
            return;
        }
        this.searchDatas = [];
        this.canAssignDatas.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < _this.showFields.length; i++) {
                if (item[_this.showFields[i].field].toString().indexOf(_this.searchInfo) > -1) {
                    _this.searchDatas.push(item);
                    break;
                }
            }
        }));
        this.queryByPage();
    };
    /**
     * 获取编号或者名称字段
     */
    /**
     * 获取编号或者名称字段
     * @return {?}
     */
    DataHelpComponent.prototype.getCodeOrNameFields = /**
     * 获取编号或者名称字段
     * @return {?}
     */
    function () {
        /** @type {?} */
        var result = [];
        this.showFields.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item.field.toLocaleLowerCase().indexOf('code') > -1 ||
                item.field.toLocaleLowerCase().indexOf('name') > -1) {
                result.push(item);
            }
        }));
        if (result.length === 0) {
            result.push(this.showFields[0]);
        }
        return result;
    };
    /**
     * @param {?} arg
     * @return {?}
     */
    DataHelpComponent.prototype.searchTreeSelf = /**
     * @param {?} arg
     * @return {?}
     */
    function (arg) {
        this.searchTree(arg.value);
    };
    /** 搜索， 此处是分层加载，搜索时需要根据原数据进行搜索，搜索后，需要将对应父节点展示
     *   @param args  格式 searchData = { field: '*', value: '' };
     */
    /**
     * 搜索， 此处是分层加载，搜索时需要根据原数据进行搜索，搜索后，需要将对应父节点展示
     * @param {?} txt
     * @return {?}
     */
    DataHelpComponent.prototype.searchTree = /**
     * 搜索， 此处是分层加载，搜索时需要根据原数据进行搜索，搜索后，需要将对应父节点展示
     * @param {?} txt
     * @return {?}
     */
    function (txt) {
        var _this = this;
        // 搜索内容为空，不处理
        if (!txt) {
            this.treeSearchIndex = 0;
            return;
        }
        this.farrisTree.clearSelections();
        // 搜索内容与上次不同，重新搜索
        if (this.oldTreeSearch !== txt) {
            // 置空重新搜索
            this.searchDatas = [];
            this.canAssignDatas.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                // 遍历搜索字段
                // tslint:disable-next-line:prefer-for-of
                for (var i = 0; i < _this.codeOrNameFields.length; i++) {
                    /** @type {?} */
                    var field = _this.codeOrNameFields[i].field;
                    if (item[field].indexOf(txt) > -1) {
                        _this.searchDatas.push(item);
                        break;
                    }
                }
            }));
            // 首次搜索，从第一个开始搜索
            this.treeSearchIndex = 0;
        }
        if (this.searchDatas.length === 0) {
            this.msgService.warning('没有满足条件的数据!');
            return;
        }
        // 搜到指定对象，需要设置父节点全部展开,其他节点全部收起
        /** @type {?} */
        var key = this.searchDatas[this.treeSearchIndex][this.dataKey];
        this.farrisTree.selectNode(key);
        this.farrisTree.collapseAll();
        // 展开父级
        this.expandParent(key);
        this.oldTreeSearch = txt;
        this.treeSearchIndex = this.treeSearchIndex + 1;
        // 已经搜索到最后，需要重头搜索
        if (this.treeSearchIndex === this.searchDatas.length) {
            this.oldTreeSearch = '';
            this.treeSearchIndex = 0;
        }
    };
    /** 逐一找到需要展开的父节点，全部展开 */
    /**
     * 逐一找到需要展开的父节点，全部展开
     * @param {?} key
     * @return {?}
     */
    DataHelpComponent.prototype.expandParent = /**
     * 逐一找到需要展开的父节点，全部展开
     * @param {?} key
     * @return {?}
     */
    function (key) {
        /** @type {?} */
        var parent = this.farrisTree.findRowNode(key);
        /** @type {?} */
        var parentNode = parent.parent;
        if (parentNode) {
            while (parentNode) {
                this.farrisTree.expandNode(parentNode.id);
                parentNode = parentNode.parent;
            }
        }
        else {
            this.farrisTree.expandNode(key);
        }
    };
    /** 树形选中全部 */
    /**
     * 树形选中全部
     * @return {?}
     */
    DataHelpComponent.prototype.treeCheckAll = /**
     * 树形选中全部
     * @return {?}
     */
    function () {
        this.isSelectAll = true;
    };
    /** 树形取消全部 */
    /**
     * 树形取消全部
     * @return {?}
     */
    DataHelpComponent.prototype.treeUnCheckAll = /**
     * 树形取消全部
     * @return {?}
     */
    function () {
        this.isSelectAll = false;
    };
    /** 取消勾选 */
    /**
     * 取消勾选
     * @return {?}
     */
    DataHelpComponent.prototype.nodeUnChecked = /**
     * 取消勾选
     * @return {?}
     */
    function () {
        if (this.isSelectAll) {
            this.isSelectAll = false;
        }
    };
    /**
     * @param {?} elementName
     * @return {?}
     */
    DataHelpComponent.prototype.showElement = /**
     * @param {?} elementName
     * @return {?}
     */
    function (elementName) {
        if (document.getElementById(elementName)) {
            document.getElementById(elementName).style.display = '';
        }
    };
    /**
     * @param {?} elementName
     * @return {?}
     */
    DataHelpComponent.prototype.hideElement = /**
     * @param {?} elementName
     * @return {?}
     */
    function (elementName) {
        if (document.getElementById(elementName)) {
            document.getElementById(elementName).style.display = 'none';
        }
    };
    DataHelpComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'rac-data-help',
                    template: "\r\n\r\n<div *ngIf=\"!isDisplayTree\" class=\"f-page flex-column\" style=\"background-color:#ffffff;\">\r\n    <!-- \u6761\u4EF6\u641C\u7D22(click)=\"\" -->\r\n    <div *ngIf=\"isShowSearch\" class=\"mt-1 form-group row ml-1\">\r\n            <div pr-2 text-left class=\"col-xs-3\">\r\n                        <input id=\"checkAllData\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n                            [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkAllClick()\" />\r\n                        <label class=\"ml-2 k-checkbox-label\" for=\"checkAllData\">\u5168\u9009</label>\r\n             </div>\r\n            <label class=\"ml-2\">\u67E5\u627E\uFF1A</label>\r\n            <input type=\"text\" name=\"searchInfo\" [(ngModel)]=\"searchInfo\" style=\"width: 200px;\" />\r\n            <button kendoButton [icon]=\"'search'\" (click)=\"searchClick()\"></button>\r\n    </div>\r\n    <div class=\"f-utils-fill-auto\">\r\n        <kendo-grid #dataGrid [class]=\"'flex-fill'\" [selectable]=\"selectableSettings\"\r\n            [kendoGridSelectBy]=\"authDataSource.keyField\" [selectedKeys]=\"selectKeys\" [data]=\"gridView\" [height]=\"360\"\r\n            (selectedKeysChange)=\"onSelectedKeysChange($event)\" [skip]=\"skip\" [pageable]=\"pageSetting\"\r\n            [pageSize]=\"pageSize\" (pageChange)=\"pageChange($event)\">\r\n            <kendo-grid-checkbox-column title=\"\u9009\u62E9\" width=\"60px\"\r\n          ></kendo-grid-checkbox-column>\r\n            <ng-template ngFor [ngForOf]=\"showFields\" let-column>\r\n                <kendo-grid-column field=\"{{column.field}}\" title=\"{{column.title}}\">\r\n                </kendo-grid-column>\r\n            </ng-template>\r\n        </kendo-grid>\r\n    </div>\r\n</div>\r\n\r\n<div *ngIf=\"isDisplayTree\" class=\"f-page flex-column\" style=\"background-color:#ffffff;\">\r\n    <div *ngIf=\"isShowSearch\" class=\"mt-1 form-group row ml-1\">\r\n        <div *ngIf=\"!singleSelect\" id=\"treehead\" class=\"k-form-field\">\r\n            <input id=\"cascadeDown\" class=\"k-checkbox\" type=\"checkbox\" name=\"cascadeDown\" [checked]=\"cascadeDown\"\r\n                [(ngModel)]=\"cascadeDown\" />\r\n            <label class=\"k-checkbox-label\" for=\"cascadeDown\">\u540C\u6B65\u4E0B\u7EA7</label>\r\n        </div>\r\n        <div pr-2 text-left class=\"col-xs-3\">\r\n                <input id=\"checkAllDataTree\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n                    [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkAllClick()\" />\r\n                <label class=\"ml-2 k-checkbox-label\" for=\"checkAllDataTree\">\u5168\u9009</label>\r\n        </div>\r\n    </div>\r\n    <div id=\"treebody\" class=\"f-struct-wrapper f-utils-fill-flex-column\"  [style.height]=\"treeHeight\">\r\n    <farris-treetable #farrisTree class=\"f-utils-fill-flex-column\" [data]=\"this.treedata\" [columns]=\"treeCols\" [idField]=\"dataKey\"\r\n    [showCheckAll]=\"true\"\r\n    [fit]=\"true\"\r\n    [fixedHeader]=\"true\"\r\n    [enableFindText]=\"true\"\r\n    [singleSelect]=\"singleSelect\" \r\n    [resizableColumns]=\"true\" \r\n    [showIcon]=\"true\"\r\n    [selectOnCheck]=\"false\"\r\n    (onlySelectSelf)=\"true\" \r\n    [(cascadeDown)]=\"this.cascadeDown\"\r\n    [(cascadeUp)]=\"this.cascadeUp\"\r\n    [keepSelect]=\"false\" \r\n    [showCheckbox]=\"true\" \r\n    [(loadDataType)]=\"this.loadDataType\" \r\n    (checkAll)=\"treeCheckAll()\" \r\n    (unCheckAll)=\"treeUnCheckAll()\"\r\n    (nodeUnChecked)=\"nodeUnChecked()\"\r\n    [(showFilterBar)] = \"isShowSearch\"\r\n    (search) = \"searchTreeSelf($event)\"\r\n    [allColumnsTitle] = \"searchTitle\">\r\n     </farris-treetable>\r\n    </div>\r\n</div>\r\n<!--\u5168\u9009\u4E0D\u5728\u8FD9\u91CC\r\n  <div id=\"checkall\" >\r\n    <div pr-2 text-left class=\"col-xs-3\">\r\n      <input id=\"checkAllData\" class=\"k-checkbox\" type=\"checkbox\" name=\"sysinit\" [checked]=\"isSelectAll\"\r\n        [readOnly]=\"!isEnable\" [disabled]=\"!isEnable\" (click)=\"checkClick()\" />\r\n      <label class=\"k-checkbox-label\" for=\"checkAllData\">{{ 'chkCheckAll' | translate }}</label>\r\n    </div>\r\n  </div>\r\n-->",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DataHelpComponent.ctorParameters = function () { return [
        { type: RacCommonUtil },
        { type: MessagerService },
        { type: NotifyService },
        { type: TreeService }
    ]; };
    DataHelpComponent.propDecorators = {
        btnOkAndCancleRef: [{ type: ViewChild, args: ['btnOkAndCancle',] }],
        farrisTree: [{ type: ViewChild, args: ['farrisTree',] }],
        selectEmitter: [{ type: Output }],
        hasSelectKeys: [{ type: Input }],
        isHasSelectAll: [{ type: Input }],
        authField: [{ type: Input }],
        ownerId: [{ type: Input }],
        canAssignDatas: [{ type: Input }],
        data: [{ type: Input }],
        isIntegrityData: [{ type: Input }],
        isDisplayTree: [{ type: Input }],
        isShowSearch: [{ type: Input }],
        singleSelect: [{ type: Input }],
        treeHeight: [{ type: Input }]
    };
    return DataHelpComponent;
}());
export { DataHelpComponent };
if (false) {
    /** @type {?} */
    DataHelpComponent.prototype.btnOkAndCancleRef;
    /** @type {?} */
    DataHelpComponent.prototype.farrisTree;
    /** @type {?} */
    DataHelpComponent.prototype.closeModalEmitter;
    /**
     * 弹出框中用到的最终选中的数据
     * @type {?}
     */
    DataHelpComponent.prototype.selectEmitter;
    /** @type {?} */
    DataHelpComponent.prototype.selectedModels;
    /** @type {?} */
    DataHelpComponent.prototype.hasSelectKeys;
    /** @type {?} */
    DataHelpComponent.prototype.isHasSelectAll;
    /** @type {?} */
    DataHelpComponent.prototype.authField;
    /** @type {?} */
    DataHelpComponent.prototype.ownerId;
    /** @type {?} */
    DataHelpComponent.prototype.canAssignDatas;
    /** @type {?} */
    DataHelpComponent.prototype.data;
    /** @type {?} */
    DataHelpComponent.prototype.isIntegrityData;
    /** @type {?} */
    DataHelpComponent.prototype.isDisplayTree;
    /** @type {?} */
    DataHelpComponent.prototype.isShowSearch;
    /** @type {?} */
    DataHelpComponent.prototype.isSelectAll;
    /** @type {?} */
    DataHelpComponent.prototype.selectKeys;
    /**
     * 是否单选
     * @type {?}
     */
    DataHelpComponent.prototype.singleSelect;
    /** @type {?} */
    DataHelpComponent.prototype.treeHeight;
    /**
     * 是否受维度分组
     * @type {?}
     */
    DataHelpComponent.prototype.isAuGroup;
    /**
     * 弹出框中用到的最终选中的数据
     * @type {?}
     */
    DataHelpComponent.prototype.selectByGroupEmitter;
    /** @type {?} */
    DataHelpComponent.prototype.dataKey;
    /** @type {?} */
    DataHelpComponent.prototype.helpFields;
    /** @type {?} */
    DataHelpComponent.prototype.showFields;
    /** @type {?} */
    DataHelpComponent.prototype.codeOrNameFields;
    /** @type {?} */
    DataHelpComponent.prototype.authDataSource;
    /**
     * 是否可用
     * @type {?}
     */
    DataHelpComponent.prototype.isEnable;
    /**
     * 是否全部权限
     * @type {?}
     */
    DataHelpComponent.prototype.isAllAuth;
    /**
     * 分页参数：默认展示200条,可修改
     * @type {?}
     */
    DataHelpComponent.prototype.gridView;
    /** @type {?} */
    DataHelpComponent.prototype.pageSetting;
    /** @type {?} */
    DataHelpComponent.prototype.skip;
    /** @type {?} */
    DataHelpComponent.prototype.pageSize;
    /** @type {?} */
    DataHelpComponent.prototype.pageIndex;
    /** @type {?} */
    DataHelpComponent.prototype.treedata;
    /** @type {?} */
    DataHelpComponent.prototype.flatData;
    /**
     * root根节点，用于默认展开
     * @type {?}
     */
    DataHelpComponent.prototype.root;
    /** @type {?} */
    DataHelpComponent.prototype.saveSelections;
    /** @type {?} */
    DataHelpComponent.prototype.treeCols;
    /** @type {?} */
    DataHelpComponent.prototype.loadDataType;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeCheck;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeUp;
    /** @type {?} */
    DataHelpComponent.prototype.cascadeDown;
    /** @type {?} */
    DataHelpComponent.prototype.isTreeLoaded;
    /**
     * 要搜索的信息
     * @type {?}
     */
    DataHelpComponent.prototype.searchInfo;
    /**
     * 要搜索的信息
     * @type {?}
     */
    DataHelpComponent.prototype.searchDatas;
    /** @type {?} */
    DataHelpComponent.prototype.searchTitle;
    /** @type {?} */
    DataHelpComponent.prototype.oldTreeSearch;
    /** @type {?} */
    DataHelpComponent.prototype.treeSearchIndex;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.session;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    DataHelpComponent.prototype.treeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1oZWxwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3lzL3JhYy1jb21tb24vIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L2RhdGEtaGVscC9kYXRhLWhlbHAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFVLFNBQVMsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFDMUMsWUFBWSxFQUM3QixNQUFNLGVBQWUsQ0FBQztBQU12QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBR3RELE9BQU8sRUFBaUIsY0FBYyxFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFFNUYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDMUcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDOUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1DQUFtQyxDQUFDOzs7O0FBS2hFO0lBaUZJLDJCQUNZLE9BQXNCLEVBQ3RCLFVBQTJCLEVBQzNCLGFBQTRCLEVBQzVCLFdBQXdCO1FBSHhCLFlBQU8sR0FBUCxPQUFPLENBQWU7UUFDdEIsZUFBVSxHQUFWLFVBQVUsQ0FBaUI7UUFDM0Isa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUF6RXBDLHNCQUFpQixHQUFzQixJQUFJLFlBQVksRUFBZ0IsQ0FBQzs7OztRQUU5RCxrQkFBYSxHQUdsQixJQUFJLFlBQVksRUFH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ICAgIENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBJbnB1dCwgT3V0cHV0LCBPbkNoYW5nZXMsXHJcbiAgICBTaW1wbGVDaGFuZ2UsIEV2ZW50RW1pdHRlciwgU2ltcGxlQ2hhbmdlcywgSW5qZWN0b3IsIExPQ0FMRV9JRCwgSW5qZWN0XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3JSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuLy8gaW1wb3J0IHsgaXNOdWxsT3JFbXB0eVN0cmluZyB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWdyaWQvZGlzdC9lczIwMTUvdXRpbHMnO1xyXG5pbXBvcnQgeyBTZWxlY3RhYmxlU2V0dGluZ3MsIFBhZ2VyU2V0dGluZ3MsIFBhZ2VDaGFuZ2VFdmVudCwgR3JpZERhdGFSZXN1bHQgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1ncmlkJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgRW50aXR5RmFjdG9yeSB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuaW1wb3J0IHsgVHJlZVRhYmxlQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS10cmVldGFibGUnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuLy8gaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xyXG5pbXBvcnQgeyBCaXpEYXRhRFRPIH0gZnJvbSAnLi4vLi4vY29tbW9uL2VudGl0eS9hdXJlc3VsdC5lbnRpdHknO1xyXG5pbXBvcnQgeyBBdXRoRGF0YUZpZWxkLCBBdXRoRGF0YVNvdXJjZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9lbnRpdHkvYXV0aC1kYXRhLXNvdXJjZS5lbnRpdHknO1xyXG5pbXBvcnQgeyBBdXJlc3VsdFNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZS9hdXJlc3VsdC1zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmFjQ29tbW9uVXRpbCB9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlsL3JhYy11dGlsJztcclxuaW1wb3J0IHsgSU5JVF9TS0lQLCBCVVRUT05DT1VOVCwgUEFHRVNJWkVTLCBJTklUX1BBR0VJTkRFWCwgSU5JVF9QQUdFU0laRSB9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlsL3BhZ2UnO1xyXG5pbXBvcnQgeyBIaWVyYXJjaGljYWxUeXBlIH0gZnJvbSAnLi4vLi4vY29tbW9uL2VudGl0eS9oaWVyYXJjaGljYWwtdHlwZS5lbnVtJztcclxuaW1wb3J0IHsgVHJlZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZS90cmVlLnNlcnZpY2UnO1xyXG5cclxuLyoqXHJcbiAqIOeUqOaIt+aOiOadg+S4muWKoee7hOe7h+e7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXHJcbiAgICBzZWxlY3RvcjogJ3JhYy1kYXRhLWhlbHAnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2RhdGEtaGVscC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9kYXRhLWhlbHAuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRhSGVscENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgLy8g5rOo5YWl5Yiw5biu5Yqp55qE56Gu6K6k5ZKM5Y+W5raI5oyJ6ZKuXHJcbiAgICBAVmlld0NoaWxkKCdidG5Pa0FuZENhbmNsZScpIGJ0bk9rQW5kQ2FuY2xlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgQFZpZXdDaGlsZCgnZmFycmlzVHJlZScpIGZhcnJpc1RyZWU6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxuXHJcbiAgICBjbG9zZU1vZGFsRW1pdHRlcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPEJpekRhdGFEVE9bXT4oKTtcclxuICAgIC8qKiDlvLnlh7rmoYbkuK3nlKjliLDnmoTmnIDnu4jpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIEBPdXRwdXQoKSBzZWxlY3RFbWl0dGVyOiBFdmVudEVtaXR0ZXI8e1xyXG4gICAgICAgIGRhdGE6IGFueVtdLFxyXG4gICAgICAgIHNlbGVjdGVkS2V5OiBzdHJpbmdbXVxyXG4gICAgfT4gPSBuZXcgRXZlbnRFbWl0dGVyPHtcclxuICAgICAgICBkYXRhOiBhbnlbXSxcclxuICAgICAgICBzZWxlY3RlZEtleTogc3RyaW5nW11cclxuICAgIH0+KCk7XHJcbiAgICBzZWxlY3RlZE1vZGVsczogYW55W10gPSBbXTtcclxuICAgIEBJbnB1dCgpIGhhc1NlbGVjdEtleXM6IHN0cmluZ1tdID0gW107ICAgIC8vIOi+k+WFpSDkv67mlLnliY3vvIzlt7Lnu4/pgInkuK1cclxuICAgIEBJbnB1dCgpIGlzSGFzU2VsZWN0QWxsID0gZmFsc2U7IC8vIOi+k+WFpSDkuYvliY3mmK/lkKblhajpgIlcclxuICAgIEBJbnB1dCgpIGF1dGhGaWVsZCA9ICcnOyAvLyDlhajlsYDkuJrliqHnu4Tnu4flhoXnoIFcclxuICAgIEBJbnB1dCgpIG93bmVySWQgPSAnJzsgLy8g55So5oi35YaF56CBXHJcbiAgICBASW5wdXQoKSBjYW5Bc3NpZ25EYXRhczogYW55W10gPSBbXTsgLy8g5Y+v5YiG6YWN55qE5pWw5o2u5rqQXHJcbiAgICBASW5wdXQoKSBkYXRhOiBhbnk7IC8vIOi/kOihjOaXtuaVsOaNrlxyXG4gICAgQElucHV0KCkgaXNJbnRlZ3JpdHlEYXRhOiBib29sZWFuOyAvLyDmlbDmja7mmK/lkKblrozmlbTvvJvlrozmlbTooajnpLrlj6/ku6XliIYqXHJcbiAgICBASW5wdXQoKSBpc0Rpc3BsYXlUcmVlID0gZmFsc2U7IC8vIOi+k+WFpVxyXG4gICAgQElucHV0KCkgaXNTaG93U2VhcmNoID0gZmFsc2U7IC8vIOaYr+WQpuWxleekuuaQnOe0olxyXG4gICAgaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgIHNlbGVjdEtleXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAvKiog5piv5ZCm5Y2V6YCJICovXHJcbiAgICBASW5wdXQoKSBzaW5nbGVTZWxlY3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHRyZWVIZWlnaHQgPSAnMzQycHgnO1xyXG4gICAgLyoqIOaYr+WQpuWPl+e7tOW6puWIhue7hCAqL1xyXG4gICAgaXNBdUdyb3VwID0gdHJ1ZTtcclxuICAgIC8qKiDlvLnlh7rmoYbkuK3nlKjliLDnmoTmnIDnu4jpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIHNlbGVjdEJ5R3JvdXBFbWl0dGVyOiBFdmVudEVtaXR0ZXI8c3RyaW5nW10+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmdbXT4oKTtcclxuICAgIC8vIOS4muWKoeaVsOaNrua6kOebuOWFs+S/oeaBr1xyXG4gICAgZGF0YUtleSA9ICcnOyAvLyDlj5bmlbDkuLvplK7liJdcclxuICAgIGhlbHBGaWVsZHM6IHN0cmluZ1tdID0gW107IC8vIOWtl+auteaYvuekuuWQjVxyXG4gICAgc2hvd0ZpZWxkczogQXV0aERhdGFGaWVsZFtdID0gW107IC8vIOaYvuekuueahOWtl+autVxyXG4gICAgY29kZU9yTmFtZUZpZWxkczogQXV0aERhdGFGaWVsZFtdID0gW107IC8vIOaQnOe0oueahOWtl+aute+8m1xyXG4gICAgYXV0aERhdGFTb3VyY2U6IEF1dGhEYXRhU291cmNlID0gbmV3IEF1dGhEYXRhU291cmNlKCk7XHJcbiAgICAvKiog5piv5ZCm5Y+v55SoICovXHJcbiAgICBpc0VuYWJsZSA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5YWo6YOo5p2D6ZmQICovXHJcbiAgICBpc0FsbEF1dGggPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICog5YiG6aG15Y+C5pWw77ya6buY6K6k5bGV56S6MjAw5p2hLOWPr+S/ruaUuVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ3JpZFZpZXc6IEdyaWREYXRhUmVzdWx0O1xyXG4gICAgcHVibGljIHBhZ2VTZXR0aW5nOiBQYWdlclNldHRpbmdzIHwgYm9vbGVhbjtcclxuICAgIC8vIOe7hOS7tuS4iueUqHNraXBcclxuICAgIHNraXAgPSBJTklUX1NLSVA7XHJcbiAgICBwYWdlU2l6ZSA9IElOSVRfUEFHRVNJWkU7XHJcbiAgICBwYWdlSW5kZXggPSBJTklUX1BBR0VJTkRFWDtcclxuICAgIC8vIOagkeaOp+S7tlxyXG4gICAgLy8g5qCR5o6n5Lu257uR5a6a55qE5pWw5o2uXHJcbiAgICB0cmVlZGF0YTogYW55W10gPSBbXTtcclxuICAgIC8vIOe7keWumuagkeeahOW5s+mTuuaVsOaNrlxyXG4gICAgZmxhdERhdGE6IGFueVtdID0gW107XHJcbiAgICAvKiogcm9vdOagueiKgueCue+8jOeUqOS6jum7mOiupOWxleW8gCAqL1xyXG4gICAgcm9vdCA9ICcnO1xyXG4gICAgc2F2ZVNlbGVjdGlvbnM6IGFueSA9IFtdO1xyXG4gICAgLy8gVHJlZVRhYmxl5LiK6KaB5pi+56S655qE5YiXXHJcbiAgICB0cmVlQ29sczogYW55ID0gW107XHJcbiAgICAvLyBbXHJcbiAgICAvLyAgIHsgZmllbGQ6ICduYW1lJywgdGl0bGU6ICflkI3np7AnLCB3aWR0aDogMTAwIH0sXHJcbiAgICAvLyAgIHsgZmllbGQ6ICdjb2RlJywgdGl0bGU6ICfnvJblj7cnLCB3aWR0aDogMTAwIH0sXHJcbiAgICAvLyBdO1xyXG4gICAgLy8g5qCR6IqC54K55Yqg6L295pa55byP77yMYXN5bmPlvILmraXvvIxhbGwg5ZCM5q2lXHJcbiAgICBsb2FkRGF0YVR5cGUgPSAnYWxsJzsgLy8gJ2FsbCcgfCAnYXN5bmMnXHJcbiAgICAvLyDmoJHoioLngrnpgInkuK3liqjkvZxcclxuICAgIGNhc2NhZGVDaGVjayA9IGZhbHNlO1xyXG4gICAgY2FzY2FkZVVwID0gZmFsc2U7XHJcbiAgICBjYXNjYWRlRG93biA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKblt7Lnu4/liqDovb3ov4dcclxuICAgIGlzVHJlZUxvYWRlZCA9IGZhbHNlO1xyXG4gICAgY29uc3RydWN0b3IgKFxyXG4gICAgICAgIHByaXZhdGUgc2Vzc2lvbjogUmFjQ29tbW9uVXRpbCxcclxuICAgICAgICBwcml2YXRlIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSB0cmVlU2VydmljZTogVHJlZVNlcnZpY2UsXHJcbiAgICAgICAgLy8gLHByaXZhdGUgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgICAgICAvLyDliIbpobXmqKHlvI9cclxuICAgICAgICB0aGlzLnBhZ2VTZXR0aW5nID0ge1xyXG4gICAgICAgICAgICBidXR0b25Db3VudDogQlVUVE9OQ09VTlQsXHJcbiAgICAgICAgICAgIGluZm86IHRydWUsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplczogUEFHRVNJWkVTLFxyXG4gICAgICAgICAgICBwcmV2aW91c05leHQ6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDopoHmkJzntKLnmoTkv6Hmga8gKi9cclxuICAgIHNlYXJjaEluZm8gPSAnJztcclxuICAgIC8qKiDopoHmkJzntKLnmoTkv6Hmga8gKi9cclxuICAgIHNlYXJjaERhdGFzOiBhbnlbXSA9IFtdO1xyXG4gICAvLyBzZWFyY2hUaXRsZSA9IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ2F1cmVzdWx0X3NlYXJjaF9sYWJlbCcpO1xyXG4gICAgc2VhcmNoVGl0bGUgPSAn5p+l5om+JztcclxuXHJcbiAgICBuZ09uSW5pdCAoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOiOt+WPluWPr+WIhumFjeeahOS4muWKoeaVsOaNriAqL1xyXG4gICAgZ2V0QXV0aERhdGFTb3VyY2UgKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlc3Npb24ub3duZXJJZCA9IHRoaXMub3duZXJJZDtcclxuICAgICAgICB0aGlzLnNlc3Npb24ub3duZXJUeXBlID0gMjtcclxuICAgICAgICB0aGlzLnNlbGVjdEtleXMgPSBbXTtcclxuICAgICAgICB0aGlzLnRyZWVDb2xzID0gW107XHJcbiAgICAgICAgdGhpcy50cmVlZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2FzY2FkZUNoZWNrID0gZmFsc2U7IC8vIGxvYWTmlbDmja7ml7bvvIznuqfogZTlhYjlhbPpl63vvIzlkKbliJnkvJrlr7zoh7TkuIvnuqfpgInkuK3vvIzoh6rliqjpgInkuK3kuIrnuqdcclxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLmlzTnVsbE9yRW1wdHlTdHJpbmcodGhpcy5hdXRoRmllbGQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuQXNzaWduRGF0YXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOagueaNruiOt+WPluWIsOeahOadg+mZkOe7k+aenOaVsOaNru+8jOWKoOi9veeVjOmdoiAqL1xyXG4gICAgZGlzcGxheURhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gW107XHJcbiAgICAgICAgdGhpcy50cmVlQ29scyA9IFtdO1xyXG4gICAgICAgIHRoaXMudHJlZWRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IGZhbHNlOyAvLyBsb2Fk5pWw5o2u5pe277yM57qn6IGU5YWI5YWz6Zet77yM5ZCm5YiZ5Lya5a+86Ie05LiL57qn6YCJ5Lit77yM6Ieq5Yqo6YCJ5Lit5LiK57qnXHJcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi5pc051bGxPckVtcHR5U3RyaW5nKHRoaXMuYXV0aEZpZWxkKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dFbGVtZW50KCdjaGVja2FsbCcpO1xyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmRhdGEgPSB0aGlzLmRhdGEuZGF0YTtcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLnNob3dGaWVsZHMgPSB0aGlzLmRhdGEuc2hvd0ZpZWxkcztcclxuICAgICAgICB0aGlzLmF1dGhEYXRhU291cmNlLmtleUZpZWxkID0gdGhpcy5kYXRhLmtleUZpZWxkO1xyXG4gICAgICAgIHRoaXMuYXV0aERhdGFTb3VyY2UuaGVscEZpZWxkcyA9IHRoaXMuZGF0YS5oZWxwRmllbGRzO1xyXG4gICAgICAgIHRoaXMuYXV0aERhdGFTb3VyY2UuaGllcmFyY2hpY2FsVHlwZSA9IHRoaXMuZGF0YS5oaWVyYXJjaGljYWxUeXBlO1xyXG4gICAgICAgIHRoaXMuYXV0aERhdGFTb3VyY2UuaGllcmFyY2hpY2FsSW5mbyA9IHRoaXMuZGF0YS5oaWVyYXJjaGljYWxJbmZvO1xyXG4gICAgICAgIHRoaXMuY2FuQXNzaWduRGF0YXMgPSB0aGlzLmF1dGhEYXRhU291cmNlLmRhdGE7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hEYXRhcyA9IHRoaXMuY2FuQXNzaWduRGF0YXM7XHJcbiAgICAgICAgdGhpcy5kYXRhS2V5ID0gdGhpcy5hdXRoRGF0YVNvdXJjZS5rZXlGaWVsZDtcclxuICAgICAgICB0aGlzLmhlbHBGaWVsZHMgPSB0aGlzLmF1dGhEYXRhU291cmNlLmhlbHBGaWVsZHM7XHJcbiAgICAgICAgdGhpcy5zaG93RmllbGRzID0gdGhpcy5hdXRoRGF0YVNvdXJjZS5zaG93RmllbGRzO1xyXG4gICAgICAgIHRoaXMuY29kZU9yTmFtZUZpZWxkcyA9IHRoaXMuZ2V0Q29kZU9yTmFtZUZpZWxkcygpO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc1NlbGVjdEtleXMuZmluZCh4ID0+IHggPT09ICcqJykpIHtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IHRoaXMuaXNIYXNTZWxlY3RBbGwgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0FsbEF1dGgpIHtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IHRoaXMuaXNIYXNTZWxlY3RBbGwgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICAvLyBUT0RPICDlpoLkvZXmkJ7miJAg55u05o6l6YCJ5Lit5YWo6YOoXHJcbiAgICAgICAgICAgIHRoaXMuY2FuQXNzaWduRGF0YXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzLnB1c2goaXRlbVt0aGlzLmRhdGFLZXldKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc1NlbGVjdEtleXMpIHtcclxuICAgICAgICAgICAgdGhpcy5oYXNTZWxlY3RLZXlzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5pi+56S65YiX6KGoXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwbGF5VHJlZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeUJ5UGFnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaYvuekuuagkeS/oeaBr1xyXG4gICAgICAgIHRoaXMuc2hvd1RyZWVJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWxleekuuagkeW9ouebuOWFs+aVsOaNriAqL1xyXG4gICAgc2hvd1RyZWVJbmZvKCkge1xyXG4gICAgICAgIHRoaXMuaGlkZUVsZW1lbnQoJ2NoZWNrYWxsJyk7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuZmFycmlzVHJlZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8g5aSE55CG5qCR5b2i55u45YWz6YC76L6RXHJcbiAgICAgICAgdGhpcy5hdXRoRGF0YVNvdXJjZS5zaG93RmllbGRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy50cmVlQ29scy5wdXNoKHsgZmllbGQ6IGl0ZW0uZmllbGQsIHRpdGxlOiBpdGVtLnRpdGxlLCB3aWR0aDogMTAwIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhpZXJhcmNoaWNhbFR5cGUgPSB0aGlzLmF1dGhEYXRhU291cmNlLmhpZXJhcmNoaWNhbFR5cGU7XHJcbiAgICAgICAgY29uc3QgaGllcmFyY2hpY2FsSW5mbyA9IHRoaXMuYXV0aERhdGFTb3VyY2UuaGllcmFyY2hpY2FsSW5mbztcclxuICAgICAgICBpZiAoaGllcmFyY2hpY2FsVHlwZSA9PT0gSGllcmFyY2hpY2FsVHlwZS5QYXJlbnQpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudEtleSA9IHRoaXMuZGF0YUtleTsgLy8gcGFyZW505a+55bqU5Li76ZSu5YiXLOWmguaenOayoeacieWNleeLrOiuvue9ruWwseS9v+eUqOWPluaVsOWIl1xyXG4gICAgICAgICAgICBpZiAoIGhpZXJhcmNoaWNhbEluZm8ucGFyZW50S2V5RmllbGQgJiYgaGllcmFyY2hpY2FsSW5mby5wYXJlbnRLZXlGaWVsZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRLZXkgPSBoaWVyYXJjaGljYWxJbmZvLnBhcmVudEtleUZpZWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJlZWRhdGEgPSB0aGlzLnRyZWVTZXJ2aWNlLm1ha2VUcmVlQnlQYXJlbnQodGhpcy5jYW5Bc3NpZ25EYXRhcywgaGllcmFyY2hpY2FsSW5mby5wYXJlbnRGaWVsZCwgcGFyZW50S2V5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRyZWVkYXRhID0gdGhpcy50cmVlU2VydmljZS5tYWtlVHJlZUJ5UGF0aCh0aGlzLmNhbkFzc2lnbkRhdGFzLCBoaWVyYXJjaGljYWxJbmZvLnBhdGhGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaJvuWIsOesrOS4gOWxgiAgIOebtOaOpeWxleW8gFxyXG4gICAgICAgIC8vIOWIneWni+WKoOi9veS4jee6p+iBlO+8jOWQpuWImeS8muWvvOiHtOS4i+e6p+mAieS4re+8jOiHquWKqOmAieS4reS4iue6p1xyXG4gICAgICAgIHRoaXMuZmFycmlzVHJlZS5jYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzVHJlZUxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmFycmlzVHJlZS5sb2FkZWREYXRhLnN1YnNjcmliZShkID0+IHtcclxuICAgICAgICAgICAgLy8g5Yqg6L296L+H77yM5LmL5ZCO5LiN6ZyA6KaB5YaN5qyh5Yqg6L29XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZUxvYWRlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWIneWni+WKoOi9veS4jee6p+iBlO+8jOWQpuWImeS8muWvvOiHtOS4i+e6p+mAieS4re+8jOiHquWKqOmAieS4reS4iue6p1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc1RyZWUuY2FzY2FkZUNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIOagueiKgueCuem7mOiupOWxleW8gFxyXG4gICAgICAgICAgICBpZiAoKHRoaXMucm9vdCkgJiYgdGhpcy5yb290ICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmV4cGFuZE5vZGUodGhpcy5yb290KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNoZWNrQWxsTm9kZXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc1NlbGVjdEtleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNoZWNrZWROb2Rlcyh0aGlzLmhhc1NlbGVjdEtleXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGxvYWTlrozmlbDmja7ml7bvvIznuqfogZTmiZPlvIDvvIzlj6/ku6XpgInkuK3kuIrnuqfoh6rliqjpgInkuK3kuIvnuqdcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIOWKoOi9vei/h++8jOS5i+WQjuS4jemcgOimgeWGjeasoeWKoOi9vVxyXG4gICAgICAgICAgICB0aGlzLmlzVHJlZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOaKpemUmeWkhOeQhiAqL1xyXG4gICAgaGFuZGxlRXJyb3IgKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuYXV0aERhdGFTb3VyY2UuZGF0YSA9IFtdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5lcnJvci5NZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IoZXJyb3IuZXJyb3IuTWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOmAieaLqeWxnuaAp++8muWNlemAieOAgeWkmumAiVxyXG4gICAgcHVibGljIGdldCBzZWxlY3RhYmxlU2V0dGluZ3MgKCk6IFNlbGVjdGFibGVTZXR0aW5ncyB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2hlY2tib3hPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICBtb2RlOiB0aGlzLnNpbmdsZVNlbGVjdCA/ICdzaW5nbGUnIDogJ211bHRpcGxlJyxcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Zu+5qCHXHJcbiAgICBpY29uQ2xhc3MgKHsgdHlwZSB9OiBhbnkpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdrLWktZm9sZGVyJzogdHJ1ZSxcclxuICAgICAgICAgICAgJ2staWNvbic6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6YCJ5oup5L+h5oGvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTZWxlY3RJbmZvKCk6IHsgZGF0YTogYW55W10sIHNlbGVjdGVkS2V5OiBzdHJpbmdbXSB9IHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzID0gW107XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBkYXRhOiBbXSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRLZXk6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDlhajpgIlcclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCAmJiB0aGlzLmlzSW50ZWdyaXR5RGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoID09PSB0aGlzLnNlbGVjdEtleXMpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogJyonXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb2RlbHMucHVzaChvYmopO1xyXG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IFsnKiddO1xyXG4gICAgICAgICAgICByZXN1bHQuc2VsZWN0ZWRLZXkgPSBbJyonXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOagkeaYvuekuu+8jOmcgOimgeWFiOagueaNrumAieS4reeahOaVsOaNruaehOmAoHNlbGVjdEtleXNcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3BsYXlUcmVlKSB7XHJcbiAgICAgICAgICAgIC8vIOmAieS4reeahOihjO+8jOi/h+a7pOaOieS4muWKoeWvueixoe+8jOWPquS/neeVmeWKn+iDveaTjeS9nFxyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXJyaXNUcmVlLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkUm93cyA9IHRoaXMuZmFycmlzVHJlZS5jaGVja2Vkcy5tYXAobiA9PiBuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8g6L+H5ruk5Yqf6IO95pON5L2c5YiG57uE55qE6KGMXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY2hlY2tlZE9wUm93cyA9IHRoaXMuY2hlY2tlZFJvd3MuZmlsdGVyKHggPT4geC50eXBlID09PSAnMScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gY2hlY2tlZFJvd3MubWFwKG0gPT4gbVt0aGlzLmRhdGFLZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdEtleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMubWFwKHggPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZE9iaiA9IHRoaXMuY2FuQXNzaWduRGF0YXMuZmluZCh5ID0+IHlbdGhpcy5kYXRhS2V5XSA9PT0geCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9kZWxzLnB1c2goZmluZE9iaik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQuZGF0YSA9IHRoaXMuc2VsZWN0ZWRNb2RlbHM7XHJcbiAgICAgICAgcmVzdWx0LnNlbGVjdGVkS2V5ID0gdGhpcy5zZWxlY3RLZXlzO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuWIhuS6huWFqOmDqOadg+mZkCrvvIzpppblhYjlv4XpobvlhajpgInvvIzlhbbmrKHlv4XpobvmmK/mlbDmja7lrozmlbTnmoTvvIznhLblkI7pgInkuK3nmoTmlbDmja7lv4XpobvkuI7mlbDmja7mupDplb/luqbkuIDoh7TvvIjlpoLmnpzku4XmkJzntKLlkI7nmoTlhajpgInvvIzkuI3mmK8q77yJICovXHJcbiAgICBnZXRJc0FsbEF1dGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTZWxlY3RBbGwgJiYgdGhpcy5pc0ludGVncml0eURhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCA9PT0gdGhpcy5zZWxlY3RLZXlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDnoa7lrprlj5HlsITpgInkuK3mlbDmja7ku6Xlj4rpgInkuK3lhoXnoIEgKi9cclxuICAgIGNvbmZpcm0gKCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbEVtaXR0ZXIubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRNb2RlbHMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5nZXRJc0FsbEF1dGgoKSApIHtcclxuICAgICAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogJyonXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb2RlbHMucHVzaChvYmopO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEVtaXR0ZXIubmV4dCh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBbJyonXSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkS2V5OiBbJyonXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5qCR5pi+56S677yM6ZyA6KaB5YWI5qC55o2u6YCJ5Lit55qE5pWw5o2u5p6E6YCgc2VsZWN0S2V5c1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcGxheVRyZWUpIHtcclxuICAgICAgICAgICAgLy8g6YCJ5Lit55qE6KGM77yM6L+H5ruk5o6J5Lia5Yqh5a+56LGh77yM5Y+q5L+d55WZ5Yqf6IO95pON5L2cXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhcnJpc1RyZWUuY2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRSb3dzID0gdGhpcy5mYXJyaXNUcmVlLmNoZWNrZWRzLm1hcChuID0+IG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyDov4fmu6Tlip/og73mk43kvZzliIbnu4TnmoTooYxcclxuICAgICAgICAgICAgICAgIC8vIGxldCBjaGVja2VkT3BSb3dzID0gdGhpcy5jaGVja2VkUm93cy5maWx0ZXIoeCA9PiB4LnR5cGUgPT09ICcxJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMgPSBjaGVja2VkUm93cy5tYXAobSA9PiBtW3RoaXMuZGF0YUtleV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0S2V5cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0S2V5cy5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5kT2JqID0gdGhpcy5jYW5Bc3NpZ25EYXRhcy5maW5kKHkgPT4geVt0aGlzLmRhdGFLZXldID09PSB4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb2RlbHMucHVzaChmaW5kT2JqKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0RW1pdHRlci5uZXh0KHtcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5zZWxlY3RlZE1vZGVscyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRLZXk6IHRoaXMuc2VsZWN0S2V5c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNsZSAoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsRW1pdHRlci5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWFqOmAie+8jOi/memHjOWFqOmAieWPr+iDveaYr+i/h+a7pOWQjuaVsOaNrueahOWFqOmAiSAqL1xyXG4gICAgY2hlY2tBbGxDbGljaygpIHtcclxuICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gIXRoaXMuaXNTZWxlY3RBbGw7XHJcbiAgICAgICAgbGV0IGtleSA9ICcnO1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+mAieS4re+8jOWImeS4jeWkhOeQhu+8jOayoeaciemAieS4re+8jOWImemAieS4rVxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaERhdGFzLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGtleSA9IGRhdGFbdGhpcy5kYXRhS2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZWxlY3RLZXlzLmZpbmRJbmRleCggeCA9PiB4ID09PSBrZXkgKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzRGlzcGxheVRyZWUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZmFycmlzVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLmNoZWNrQWxsTm9kZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzRGlzcGxheVRyZWUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZmFycmlzVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5mYXJyaXNUcmVlLnVuQ2hlY2tBbGxOb2RlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGRhdGFbdGhpcy5kYXRhS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0S2V5cy5maW5kSW5kZXgoIHggPT4geCA9PT0ga2V5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+mAieS4re+8jOWwseWIoOmZpFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQ2xpY2sgKCkge1xyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSAhdGhpcy5pc1NlbGVjdEFsbDtcclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICAvLyBUT0RPICDlpoLkvZXmkJ7miJAg55u05o6l6YCJ5Lit5YWo6YOoXHJcbiAgICAgICAgICAgIHRoaXMuY2FuQXNzaWduRGF0YXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzLnB1c2goZGF0YVt0aGlzLmRhdGFLZXldKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5jaGVja0FsbE5vZGVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QnlHcm91cEVtaXR0ZXIubmV4dChbJyonXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gIHRoaXMuZmFycmlzVHJlZS51bkNoZWNrQWxsTm9kZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RLZXlzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QnlHcm91cEVtaXR0ZXIubmV4dChbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDpgInmi6nkuovku7YgKi9cclxuICAgIHB1YmxpYyBvblNlbGVjdGVkS2V5c0NoYW5nZSAoZSkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuc2VsZWN0S2V5cy5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGxlbiAhPT0gdGhpcy5jYW5Bc3NpZ25EYXRhcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5YWo6YOo6YCJ5Lit5LqG77yMaXNTZWxlY3RBbGwg5Lmf5LiN6ZyA6KaB6K6+572u5Li6dHJ1Ze+8m2lzU2VsZWN0QWxs55qE5ZCr5LmJ5pivKueahOaEj+aAne+8jOaWsOWinuaVsOaNruS5n+iiq+mAieS4rVxyXG4gICAgICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1NlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEJ5R3JvdXBFbWl0dGVyLm5leHQoWycqJ10pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QnlHcm91cEVtaXR0ZXIubmV4dCh0aGlzLnNlbGVjdEtleXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vliIbpobXmn6Xor6LmiJbogIXliIbpobXlj4LmlbDlj5jljJblkI7mn6Xor6JcclxuICAgICAqIEBwYXJhbSBldmVudCDliIbpobXlj4LmlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBhZ2VDaGFuZ2UgKGV2ZW50OiBQYWdlQ2hhbmdlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBza2lw5ZKMcGFnZVNpemXlv4Xpobvlvpfph43mlrDotYvlgLzvvIzlm6DkuLrlj6/og73nlKjmiLfph43mlrDpgInmi6nkuobliIbpobXlpKflsI/miJbogIXliIbpobXntKLlvJVcclxuICAgICAgICAvLyDliLfmlrDnlYzpnaLmjInpkq7mlbDph4/lkoznhKbngrlcclxuICAgICAgICB0aGlzLnNraXAgPSBldmVudC5za2lwO1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBldmVudC50YWtlO1xyXG4gICAgICAgIHRoaXMucGFnZUluZGV4ID0gdGhpcy5za2lwIC8gdGhpcy5wYWdlU2l6ZSArIDE7XHJcbiAgICAgICAgLy8g5p+l6K+iXHJcbiAgICAgICAgdGhpcy5xdWVyeUJ5UGFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YiX6KGo55qE5p+l6K+iXHJcbiAgICAgKi9cclxuICAgIHF1ZXJ5QnlQYWdlKCkge1xyXG4gICAgICAgIHRoaXMuZ3JpZFZpZXcgPSB7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuc2VhcmNoRGF0YXMuc2xpY2UodGhpcy5za2lwLCB0aGlzLnNraXAgKyB0aGlzLnBhZ2VTaXplKSxcclxuICAgICAgICAgICAgdG90YWw6IHRoaXMuc2VhcmNoRGF0YXMubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZWFyY2hDbGljaygpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaCh0aGlzLnNlYXJjaEluZm8pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouagkeeKtlxyXG4gICAgICovXHJcbiAgICBzZWFyY2godHh0OiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3BsYXlUcmVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVHJlZSh0eHQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5mbyA9IHR4dDtcclxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLmlzTnVsbE9yRW1wdHlTdHJpbmcodGhpcy5zZWFyY2hJbmZvKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaERhdGFzID0gdGhpcy5jYW5Bc3NpZ25EYXRhcztcclxuICAgICAgICAgICAgdGhpcy5xdWVyeUJ5UGFnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VhcmNoRGF0YXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNhbkFzc2lnbkRhdGFzLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hvd0ZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1bdGhpcy5zaG93RmllbGRzW2ldLmZpZWxkXS50b1N0cmluZygpLmluZGV4T2YodGhpcy5zZWFyY2hJbmZvKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5xdWVyeUJ5UGFnZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bnvJblj7fmiJbogIXlkI3np7DlrZfmrrVcclxuICAgICAqL1xyXG4gICAgZ2V0Q29kZU9yTmFtZUZpZWxkcygpOiBBdXRoRGF0YUZpZWxkW10ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdDogQXV0aERhdGFGaWVsZFtdID0gW107XHJcbiAgICAgICAgdGhpcy5zaG93RmllbGRzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZignY29kZScpID4gLTEgfHxcclxuICAgICAgICAgICAgICAgIGl0ZW0uZmllbGQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCduYW1lJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLnNob3dGaWVsZHNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHNlYXJjaFRyZWVTZWxmKGFyZzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUcmVlKGFyZy52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyDkuIrmrKHmkJzntKLmlofmnKxcclxuICAgIG9sZFRyZWVTZWFyY2ggPSAnJztcclxuICAgIHRyZWVTZWFyY2hJbmRleCA9IDA7XHJcbiAgICAvKiog5pCc57Si77yMIOatpOWkhOaYr+WIhuWxguWKoOi9ve+8jOaQnOe0ouaXtumcgOimgeagueaNruWOn+aVsOaNrui/m+ihjOaQnOe0ou+8jOaQnOe0ouWQju+8jOmcgOimgeWwhuWvueW6lOeItuiKgueCueWxleekulxyXG4gICAgICogICBAcGFyYW0gYXJncyAg5qC85byPIHNlYXJjaERhdGEgPSB7IGZpZWxkOiAnKicsIHZhbHVlOiAnJyB9O1xyXG4gICAgICovXHJcbiAgICBzZWFyY2hUcmVlKHR4dDogYW55KSB7XHJcbiAgICAgICAgLy8g5pCc57Si5YaF5a655Li656m677yM5LiN5aSE55CGXHJcbiAgICAgICAgaWYgKCF0eHQpIHtcclxuICAgICAgICAgICAgdGhpcy50cmVlU2VhcmNoSW5kZXggPSAwO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmFycmlzVHJlZS5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAvLyDmkJzntKLlhoXlrrnkuI7kuIrmrKHkuI3lkIzvvIzph43mlrDmkJzntKJcclxuICAgICAgICBpZiAodGhpcy5vbGRUcmVlU2VhcmNoICE9PSB0eHQpIHtcclxuICAgICAgICAgICAgLy8g572u56m66YeN5paw5pCc57SiXHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jYW5Bc3NpZ25EYXRhcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOmBjeWOhuaQnOe0ouWtl+autVxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2RlT3JOYW1lRmllbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmNvZGVPck5hbWVGaWVsZHNbaV0uZmllbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bZmllbGRdLmluZGV4T2YodHh0KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0YXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8g6aaW5qyh5pCc57Si77yM5LuO56ys5LiA5Liq5byA5aeL5pCc57SiXHJcbiAgICAgICAgICAgIHRoaXMudHJlZVNlYXJjaEluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRGF0YXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKCfmsqHmnInmu6HotrPmnaHku7bnmoTmlbDmja4hJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5pCc5Yiw5oyH5a6a5a+56LGh77yM6ZyA6KaB6K6+572u54i26IqC54K55YWo6YOo5bGV5byALOWFtuS7luiKgueCueWFqOmDqOaUtui1t1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuc2VhcmNoRGF0YXNbdGhpcy50cmVlU2VhcmNoSW5kZXhdW3RoaXMuZGF0YUtleV07XHJcbiAgICAgICAgdGhpcy5mYXJyaXNUcmVlLnNlbGVjdE5vZGUoa2V5KTtcclxuICAgICAgICB0aGlzLmZhcnJpc1RyZWUuY29sbGFwc2VBbGwoKTtcclxuICAgICAgICAvLyDlsZXlvIDniLbnuqdcclxuICAgICAgICB0aGlzLmV4cGFuZFBhcmVudChrZXkpO1xyXG4gICAgICAgIHRoaXMub2xkVHJlZVNlYXJjaCA9IHR4dDtcclxuICAgICAgICB0aGlzLnRyZWVTZWFyY2hJbmRleCA9IHRoaXMudHJlZVNlYXJjaEluZGV4ICsgMTtcclxuICAgICAgICAvLyDlt7Lnu4/mkJzntKLliLDmnIDlkI7vvIzpnIDopoHph43lpLTmkJzntKJcclxuICAgICAgICBpZiAodGhpcy50cmVlU2VhcmNoSW5kZXggPT09IHRoaXMuc2VhcmNoRGF0YXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2xkVHJlZVNlYXJjaCA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnRyZWVTZWFyY2hJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOmAkOS4gOaJvuWIsOmcgOimgeWxleW8gOeahOeItuiKgueCue+8jOWFqOmDqOWxleW8gCAqL1xyXG4gICAgZXhwYW5kUGFyZW50KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5mYXJyaXNUcmVlLmZpbmRSb3dOb2RlKGtleSk7XHJcbiAgICAgICAgbGV0IHBhcmVudE5vZGUgPSBwYXJlbnQucGFyZW50O1xyXG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhcnJpc1RyZWUuZXhwYW5kTm9kZShwYXJlbnROb2RlLmlkKTtcclxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzVHJlZS5leHBhbmROb2RlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmoJHlvaLpgInkuK3lhajpg6ggKi9cclxuICAgIHRyZWVDaGVja0FsbCgpIHtcclxuICAgICAgICB0aGlzLmlzU2VsZWN0QWxsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5qCR5b2i5Y+W5raI5YWo6YOoICovXHJcbiAgICB0cmVlVW5DaGVja0FsbCAoKSB7XHJcbiAgICAgICAgdGhpcy5pc1NlbGVjdEFsbCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlj5bmtojli77pgIkgKi9cclxuICAgIG5vZGVVbkNoZWNrZWQgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3RBbGwgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0VsZW1lbnQgKGVsZW1lbnROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnROYW1lKS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlkZUVsZW1lbnQgKGVsZW1lbnROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnROYW1lKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG4iXX0=