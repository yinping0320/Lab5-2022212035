{"version":3,"file":"farris-ui-datagrid-settings.js","sources":["ng://@farris/ui-datagrid-settings/lib/multi-headers/new-header.component.ts","ng://@farris/ui-datagrid-settings/lib/multi-headers/setcolumns.component.ts","ng://@farris/ui-datagrid-settings/lib/mutli-headers.helper.ts","ng://@farris/ui-datagrid-settings/lib/multi-headers/column-tree.component.ts","ng://@farris/ui-datagrid-settings/lib/column-format-setting/column-format-setting.component.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-settings.component.ts","ng://@farris/ui-datagrid-settings/lib/getValueWithLocaleId.ts","ng://@farris/ui-datagrid-settings/lib/simple-mode/simple-columns.component.ts","ng://@farris/ui-datagrid-settings/lib/setting.model.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-scheme.service.ts","ng://@farris/ui-datagrid-settings/lib/scheme/newscheme.component.ts","ng://@farris/ui-datagrid-settings/lib/scheme/scheme-list.component.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-settings-locale.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-settings.service.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-sort-setting.component.ts","ng://@farris/ui-datagrid-settings/lib/column-group/column-group.component.ts","ng://@farris/ui-datagrid-settings/lib/column-format-setting/column-visible-drag.directive.ts","ng://@farris/ui-datagrid-settings/lib/column-group/column-group-drag.directive.ts","ng://@farris/ui-datagrid-settings/lib/dbl-click.directive.ts","ng://@farris/ui-datagrid-settings/lib/multi-headers/preview/preview-multi-headers.component.ts","ng://@farris/ui-datagrid-settings/lib/multi-headers/preview/show-preview.directive.ts","ng://@farris/ui-datagrid-settings/lib/datagrid-settings.module.ts"],"sourcesContent":["import { Component, OnInit, Input, ViewChild, ElementRef } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'group-header-form',\r\n    template: `\r\n    <div class=\"d-flex flex-row\" style=\"align-items: center;height: 100%;\">\r\n        <span style=\"width: 90px;text-align: right;\">{{label}}</span>\r\n        <input #txt placeholder=\"{{placeholder}}\" type=\"text\" [(ngModel)]=\"title\" class=\"form-control ml-2\" style=\"width: 210px\">\r\n    </div>\r\n    `,\r\n})\r\nexport class NewHeaderFormComponent implements OnInit {\r\n    @Input() label = 'è¡¨å¤´åç§°'\r\n    @Input() title: string;\r\n    @Input() placeholder = \"è¾å¥è¡¨å¤´åç§°\"\r\n\r\n    @ViewChild('txt') input: ElementRef<any>\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n}\r\n","import { Component, Input, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'set-columns',\r\n    templateUrl: './setcolumns.component.html'\r\n})\r\nexport class SetColumnsComponent implements OnInit {\r\n\r\n    @Input() data = [];\r\n    @Input() checkedItems = [];\r\n\r\n    selectedIds: string[] = []\r\n    constructor() {}\r\n\r\n    ngOnInit() {\r\n        this.selectedIds = (this.checkedItems || []).map(n => n.id);\r\n        if (this.data) {\r\n            this.data.forEach(item => {\r\n                if (!item.id) {\r\n                    item.id = item.field;\r\n                }\r\n            })\r\n        }\r\n    }\r\n}","import { cloneDeep, flatten } from \"lodash-es\";\r\n\r\n\r\nfunction _setColumnId(c) {\r\n    c.id = c.id || c.field;\r\n    if (c.colspan && c.colspan > 1) {\r\n        c.groupHeader = true;\r\n        c.id = 'groupHeader_'+ c.id;\r\n    }\r\n}\r\n\r\n\r\nfunction _columnsToTreeNodes2(node, cols) {\r\n\tif (node.data.colspan) {\r\n        if (cols[node.level + 1] && cols[node.level + 1].length) {\r\n            var i = 0;\r\n            do {\r\n                let col = cols[node.level + 1].splice(0, 1)[0];\r\n                i += col.colspan || 1;\r\n                _setColumnId(col);\r\n                const child = { data: col, children: [], level: node.level + 1, expanded: true, visible: true };\r\n                node.children.push(child);\r\n\r\n                if (col.colspan && col.colspan > 1) {\r\n                    _columnsToTreeNodes2(child, cols);\r\n                }\r\n\r\n            } while(i< node.data.colspan && cols[node.level + 1].length)\r\n        }\r\n    }\r\n}\r\n\r\n/** å°å¤è¡¨å¤´åä¿¡æ¯ï¼è½¬æ¢ä¸ºæ ç»æ */\r\nexport function columnsToTreeNodes(cols) {\r\n\tvar nodes = [];\r\n\tcols[0].filter(n => n.field !== '_datagrid-setting-control_').forEach(c => {\r\n        _setColumnId(c);\r\n\t    var node = { data: c, children: [], level: 0, expanded: true, visible: true };\r\n\t    nodes.push(node);\r\n\t});\r\n    nodes.forEach(n => {\r\n    \t_columnsToTreeNodes2(n, cols);\r\n    });\r\n\r\n    return nodes;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// å¤è¡¨å¤´åè®¾ç½®æ¢å¤é»è®¤\r\nexport const reset2DefaultForMultiHeaders = (gridInstance) => {\r\n    const options = gridInstance.dfs['_state'].initialOptions;\r\n    const settings: any = {\r\n        viewColumns: [],\r\n        columnFormat: []\r\n    };\r\n\r\n    if (options.sort) {\r\n        const sortOrders = options.sort.sortOrder? options.sort.sortOrder.split(',') : [];\r\n        const sortNames = options.sort.sortName ? options.sort.sortName.split(',') : [];\r\n        settings.sortInfo = { sortName: sortNames, sortOrder:  sortOrders };\r\n    } else {\r\n        settings.sortInfo = {};\r\n    }\r\n    settings.groupField =  options.groupField ? options.groupField.split(',') : [];\r\n    settings.expandGroupRows = !!options.expandGroupRows;\r\n\r\n    settings.multiHeaders = {\r\n        treeData: null,\r\n        viewCols: []\r\n    };\r\n\r\n    return {\r\n        settings,\r\n        multiHeaderOptions: {\r\n            columns: options.groupHeaderFields,\r\n            treeData: null\r\n        }\r\n    }\r\n}\r\n\r\n/** ä¸ºæ°çå±ç¤ºååå¹¶ååä¸­çè®¾ç½®ï¼å¦ æ ¼å¼åï¼ååæ ¼æ ·å¼ãæ¨¡æ¿ */\r\nexport function mergetColumnOptions(viewCols: any, gridInitOptions: any) {\r\n    if (viewCols && gridInitOptions) {\r\n        const dataFields = flatten(gridInitOptions['designerColumns']);\r\n        const _cols = cloneDeep(viewCols).map((cols: any) => {\r\n            return cols.map((col: any) => {\r\n\r\n                if (!col.field || col.field.indexOf('farris-datagrid-column_') > -1) {\r\n                    col.filter = false;\r\n                }\r\n\r\n                if (!col.colspan || col.colspan === 1) { // æ°æ®å­æ®µ\r\n                    const old = dataFields.find((n: any) => n.field === col.field || n.field === col.id);\r\n                    if (old) {\r\n                        const _col = Object.assign({},old, col);\r\n                        if (!col.colspan) {\r\n                            delete _col.colspan;\r\n                        }\r\n                        if (!_col.rowspan) {\r\n                            delete _col.rowspan;\r\n                        }\r\n\r\n                        return _col;\r\n                    }\r\n                }\r\n                return col;\r\n            }).filter(n => n)\r\n        });\r\n\r\n        return _cols;\r\n    }\r\n}\r\n\r\n\r\nexport function refreshGridColumns(gridInstance: any, newColumns: any) {\r\n    if(!gridInstance) {\r\n        return;\r\n    }\r\n    const gridInitOptions = gridInstance.dfs['_state'].initialOptions;\r\n    if (newColumns && gridInitOptions) {\r\n        gridInstance.columns = mergetColumnOptions(newColumns, gridInitOptions)\r\n    }\r\n}\r\n\r\n/** å°æåºä¿¡æ¯åå¹¶å°åä¸ */\r\nexport function  mergeSortInfo(newColumns: any, sortInfo: any) {\r\n    if (sortInfo && Object.keys(sortInfo).length) {\r\n        const { sortName, sortOrder } = sortInfo;\r\n        if (sortName && sortName.length) {\r\n            newColumns.forEach((cols: any) => {\r\n                cols.forEach((col: any) => {\r\n                    const i = sortName.indexOf(col.field);\r\n                    if (i > -1) {\r\n                        col.sortable = true;\r\n                        col.order = sortOrder[i] || 'asc';\r\n                    } else {\r\n                        col.order = '';\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function multiHeadersHasDataFields(multiHeaderColumns: any) {\r\n    if (multiHeaderColumns && multiHeaderColumns.length) {\r\n        return flatten(multiHeaderColumns).filter((n: any) => n.field &&( !n.colspan || n.colspan === 1) ).length;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nexport function getDataFieldsForMultiHeaders(groupHeaderCols) {\r\n    return flatten(groupHeaderCols).filter((n: any) => n.field && ( !n.colspan || n.colspan === 1));\r\n}\r\n\r\n\r\nexport function cleanGroupFields(viewCols: any, groupFields: any) {\r\n    const cols: any = getDataFieldsForMultiHeaders(viewCols);\r\n    const groupColumns = groupFields.map( f => {\r\n        const col = cols.find(col => col.field === f);\r\n        return col;\r\n    }).filter(n => n);\r\n\r\n    return groupColumns.map(n => n.field);\r\n}\r\n\r\n\r\nexport function cleanSortFields(viewCols: any, sortInfo: { sortName: [], sortOrder: [] }) {\r\n    const cols: any = getDataFieldsForMultiHeaders(viewCols);\r\n    const sortNames = sortInfo.sortName.map( (f, i) => {\r\n        const col = cols.find(col => col.field === f);\r\n        if (!col) {\r\n            sortInfo.sortOrder.splice(i, 1);\r\n        }\r\n        return col;\r\n    }).filter(n => n);\r\n\r\n    return {\r\n        sortName: sortNames.map(n => n.field),\r\n        sortOrder: sortInfo.sortOrder\r\n    };\r\n}","import { AfterViewInit, ChangeDetectorRef,EventEmitter, Component, ElementRef, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation } from \"@angular/core\";\r\n\r\nimport { of } from \"rxjs\";\r\n\r\nimport { BsModalService } from \"@farris/ui-modal\";\r\nimport { RowNode, TreeNode, TreeTableComponent } from \"@farris/ui-treetable\";\r\nimport { OverLayHiddenService } from '@farris/ui-common';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { DatagridComponent, DataColumn } from '@farris/ui-datagrid';\r\n\r\nimport { NewHeaderFormComponent } from \"./new-header.component\";\r\nimport { SetColumnsComponent } from \"./setcolumns.component\";\r\nimport { columnsToTreeNodes } from \"../mutli-headers.helper\";\r\nimport { cloneDeep, flatten } from \"lodash-es\";\r\nimport { ColumnTreeOptions } from \"../setting.model\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\n\r\n\r\n@Component({\r\n    selector: 'column-tree',\r\n    styleUrls: ['./column-tree.scss'],\r\n    templateUrl: './column-tree.component.html',\r\n    exportAs: 'groupHeaderTree',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ColumnTreeComponent implements OnInit, OnDestroy, AfterViewInit, OnChanges {\r\n\r\n    @Input() dg: DatagridComponent;\r\n    @Input() options: Partial<ColumnTreeOptions> = {};\r\n\r\n    @Input() inModal = false;\r\n\r\n    @Output() nodeSelected = new EventEmitter<any>();\r\n    \r\n    @ViewChild('nodeTemplate') cellTemp: TemplateRef<any>\r\n    @ViewChild('tt') tt: TreeTableComponent;\r\n    \r\n    fields = [];\r\n    treecols = [];\r\n    treeData = [];\r\n    contextMenus = [];\r\n\r\n    /** å¼ __HOU_XUAN_LIE_ID__ */\r\n    HOU_XUAN_LIE_ID = '__HOU_XUAN_LIE_ID__';\r\n\r\n\r\n    GROUP_HEADER_ICON = 'f-icon f-icon-file-folder-close';\r\n\r\n    Hou_Xuan_Qu = { id: this.HOU_XUAN_LIE_ID, title: '(åéå)', houxuanquNode: true };\r\n\r\n\r\n    languageRes = {\r\n        title: 'å¤è¡¨å¤´',\r\n        preview: 'é¢è§ææ',\r\n        tips: 'å¨ï¼åéåï¼ä¸­çå­æ®µï¼å°ä¸å¨åè¡¨ä¸­æ¾ç¤º; ç¹å»å­æ®µåç§°ï¼å¨å³ä¾§æ¾ç¤ºç¸å³æä½æé®ã',\r\n        contextMenus: {\r\n            new: 'æ°å»ºè¡¨å¤´',\r\n            newChild: 'æ°å»ºå­çº§è¡¨å¤´',\r\n            setDataField: 'åéæ°æ®å',\r\n            rename: 'éå½å',\r\n            top: 'ç½®é¡¶',\r\n            up: 'ä¸ç§»',\r\n            down: 'ä¸ç§»',\r\n            bottom: 'ç½®åº',\r\n            cancelGroup: 'åæ¶åç»',\r\n            remove: 'å¨åç»åç§»é¤'\r\n        },\r\n        candidate: '(åéå)',\r\n        setHeader: 'è®¾ä¸ºè¡¨å¤´',\r\n        ok: 'ç¡®å®',\r\n        cancel: 'åæ¶',\r\n        required: 'è¯·è¾å¥è¡¨å¤´åç§°ï¼',\r\n        defaultGroupHeaderName: 'åç»è¡¨å¤´1',\r\n        newHeaderPlaceholder: 'è¯·è¾å¥åç§°',\r\n        newHeaderLabel: 'è¡¨å¤´åç§°'\r\n    }\r\n\r\n    private localeSer: LocaleService = null;\r\n    constructor(private injector: Injector, private ngzone: NgZone, private cd: ChangeDetectorRef, private render: Renderer2,\r\n        private modalService: BsModalService, private el: ElementRef,\r\n        private notitySer: NotifyService) {\r\n            this.localeSer = this.injector.get(LocaleService, null);\r\n        }\r\n\r\n    ngOnInit(): void {\r\n        const groupHeaders = this.dg.dfs['_state'].initialOptions.groupHeaderFields;\r\n        const allDataFields = flatten<DataColumn>(groupHeaders).filter((col: DataColumn) => !col.colspan || col.colspan == 1);\r\n        this.fields = allDataFields.filter(n => n.field && n.field !== this.dg.ControlPanelFeild);\r\n\r\n        // æ ç»ä»¶åä¿¡æ¯\r\n        this.treecols = [\r\n            { field: 'title', title: 'åç§°', template: this.cellTemp }\r\n        ];\r\n\r\n        this.languageRes = this.localeSer.getValue('headerGroup');\r\n        this.Hou_Xuan_Qu.title = this.languageRes.candidate;\r\n\r\n        this.initTreeData();\r\n\r\n        this.initTreenodeContextMenus();\r\n        this.listenTreeTableEvent();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.options && !changes.options.isFirstChange()) {\r\n            this.initTreeData();\r\n            this.tt.clearSelections();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n    }\r\n\r\n    private listenTreeTableEvent() {\r\n        this.tt.removed.subscribe(rowNode => {\r\n\r\n            if (rowNode && rowNode.parent) {\r\n                rowNode.parent.leaf = !(rowNode.parent.children && rowNode.parent.children.length);\r\n                if (rowNode.parent.leaf) {\r\n                    rowNode.parent.icon = this.GROUP_HEADER_ICON;\r\n                }\r\n            }\r\n\r\n            if (!rowNode.node.data.groupHeader) {\r\n                const hxl = this.getHouXuanNode();\r\n\r\n                if (!rowNode.parent) {\r\n                    this.treeData = this.treeData.filter(n => n.data.id !== rowNode.id);\r\n                }\r\n\r\n                this.tt.append(rowNode.node.data, hxl.node);\r\n            }\r\n\r\n          \r\n        });\r\n    }\r\n\r\n    private initTreenodeContextMenus() {\r\n        this.contextMenus = [\r\n            { id: 1, title: this.languageRes.contextMenus.new, icon: 'f-icon f-icon-add', \r\n                handle: (t) => {\r\n                    // console.log(t);\r\n                    this.addNewGroup(t.data, false);\r\n                }\r\n            },\r\n            { id: 2, title: this.languageRes.contextMenus.newChild, visible: (t: any) => {\r\n                    return this.isGroupHeader(t.data) && t.data.level + 1 < this.dg.maxMultiHeaders - 1;\r\n                },\r\n                handle: (t) => {\r\n                    this.addNewGroup(t.data, true);\r\n                }\r\n            },\r\n            { id: 3, title: this.languageRes.contextMenus.setDataField, visible: (t: any) => {return this.isGroupHeader(t.data) },\r\n                handle: (t) => {\r\n                    this.setColumnsForGroupHeader(null, t.data);\r\n                }\r\n            },\r\n            { id: 31, title: this.languageRes.contextMenus.rename, icon: 'f-icon f-icon-edit', \r\n                handle: (t) => {\r\n                    this.resetHeaderName(null, t.data);\r\n                }\r\n            },\r\n            '-',\r\n            {\r\n                id: 4, title: this.languageRes.contextMenus.top, icon: 'f-icon f-icon-roofing', \r\n                visible: (t: any) => {\r\n                    return this.moveMenuItemVisiblily(t.data);\r\n                },\r\n                handle: (t) => {\r\n                    this.moveTop(null, t.data);\r\n                }\r\n            },\r\n            {\r\n                id: 5, title: this.languageRes.contextMenus.up, icon: 'f-icon f-icon-arrow-chevron-up',\r\n                visible: (t: any) => {return this.moveMenuItemVisiblily(t.data)},\r\n                handle: (t) => {\r\n                    this.moveUp(null, t.data);\r\n                }\r\n            },\r\n            {\r\n                id: 6, title: this.languageRes.contextMenus.down, icon: 'f-icon f-icon-arrow-chevron-down',\r\n                visible: (t: any) => {return this.moveMenuItemVisiblily(t.data)},\r\n                handle: (t) => {\r\n                    this.moveDown(null, t.data);\r\n                }\r\n            },\r\n            {\r\n                id: 7, title: this.languageRes.contextMenus.bottom, icon: 'f-icon f-icon-bottomsetting',\r\n                visible: (t: any) => {return this.moveMenuItemVisiblily(t.data)},\r\n                handle: (t) => {\r\n                    this.moveBottom(null, t.data);\r\n                }\r\n            },\r\n            '-',\r\n            {\r\n                id: 8, title: this.languageRes.contextMenus.remove, icon: 'f-icon f-icon-minus',\r\n                visible: (t) => {\r\n                    return !t.data.node.data.houxuanquNode && !t.data.node.data.groupHeader;\r\n                },\r\n                handle: (t) => {\r\n                    this.tt.remove(t.data.id);\r\n                }\r\n            },\r\n            {\r\n                id: 9, title: this.languageRes.contextMenus.cancelGroup, icon: 'f-icon f-icon-x',\r\n                visible: (t) => {\r\n                    return t.data.node.data.groupHeader;\r\n                },\r\n                handle: (t) => {\r\n                    this.removeGroup(null, t.data);\r\n                }\r\n            }\r\n        ];\r\n    }\r\n\r\n    /** ç§»å¨å½ä»¤é¡¹æ¯å¦æ¾ç¤º */\r\n    moveMenuItemVisiblily = (t: RowNode) => {\r\n        if (t) {\r\n            const rowData = t.node.data;\r\n            if (rowData) {\r\n                return rowData['id'] != this.HOU_XUAN_LIE_ID;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isGroupHeader = (t: RowNode) => {\r\n        if (t) {\r\n            const rowData = t.node.data;\r\n            if (rowData) {\r\n                return !!rowData['groupHeader'];\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    initTreeData() {\r\n\r\n        if (this.options) {\r\n            const { treeData } = this.options;\r\n\r\n            if (treeData) {\r\n                this.treeData = treeData;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this.options.columns && this.options.columns.length > 1) {\r\n            const _treeData = columnsToTreeNodes(cloneDeep(this.options.columns));\r\n            const houXuanLie = this.fields.filter(f => !flatten(this.options.columns).find(col => col.field === f.field)).map((a:any) => {\r\n                return {\r\n                    data: a,\r\n                    children: [],\r\n                    visible: true\r\n                }\r\n            });\r\n            _treeData.push({\r\n                data: this.Hou_Xuan_Qu,\r\n                children: houXuanLie,\r\n                expanded: true\r\n            });\r\n            this.treeData = _treeData;\r\n        } else {\r\n            this.treeData = [{\r\n                data: { id: 'groupHeader_1', title: this.languageRes.defaultGroupHeaderName, halign: 'left', groupHeader: true },\r\n                children: this.fields.map((n, i) => {\r\n                    n['index'] = i;\r\n                    n['id'] = n['field'];\r\n                    return {\r\n                        data: n,\r\n                        children: [],\r\n                        visible: true\r\n                    };\r\n                }),\r\n                icon: this.GROUP_HEADER_ICON,\r\n                expanded: true, visible: true\r\n            }, {\r\n                data: this.Hou_Xuan_Qu,\r\n                children: [],\r\n                expanded: true,\r\n                icon: this.GROUP_HEADER_ICON\r\n            }];\r\n        }\r\n    }\r\n\r\n    private getHouXuanNode() {\r\n        return this.tt.findRowNode(this.HOU_XUAN_LIE_ID);\r\n    }\r\n\r\n    onTreeSelected($event) {\r\n        this.nodeSelected.emit($event);\r\n    }\r\n\r\n    private showNewHeaderDialog(okCallback, dlgTitle) {\r\n        const modalRef = this.modalService.show(NewHeaderFormComponent, {\r\n            title: dlgTitle,\r\n            width: 340,\r\n            height: 190,\r\n            showMaxButton: false,\r\n            resizable: false,\r\n            initialState: {\r\n                title: '',\r\n                placeholder: this.languageRes.newHeaderPlaceholder,\r\n                label: this.languageRes.newHeaderLabel\r\n            },\r\n            buttons: [\r\n                {\r\n                    text: this.languageRes.cancel,\r\n                    cls: 'btn btn-secondary',\r\n                    handle: () => {\r\n                        modalRef.close();\r\n                    }\r\n                },\r\n                {\r\n                    text: this.languageRes.ok,\r\n                    cls: 'btn btn-primary',\r\n                    handle: okCallback\r\n                }\r\n            ]\r\n        });\r\n\r\n        return modalRef;\r\n    }\r\n\r\n    private generateGroupHeaderId() {\r\n        return `groupHeader_${new Date().getTime()}`;\r\n    }\r\n\r\n    private createNewGroupHeader(rn: RowNode, title: string, child = false) {\r\n        const ghid = this.generateGroupHeaderId();\r\n        const data = { id: ghid, title, groupHeader: true, halign: 'left', fixed: 'UNFIXED' };\r\n        const gh = {\r\n            data,\r\n            children: [],\r\n            expanded: true,\r\n            visible: true,\r\n            icon: this.GROUP_HEADER_ICON,\r\n        };\r\n        if (!child) {\r\n            if (!rn.parent) {\r\n                const i = this.treeData.findIndex(n => n.data.id === rn.id) + 1;\r\n                this.treeData.splice(i, 0, gh);\r\n                this.treeData = this.treeData.slice();\r\n            } else {\r\n                gh.data.fixed = rn.parent.data.fixed;\r\n                this.tt.appendChildren([gh], rn.parent);\r\n            }\r\n        } else {\r\n            gh.data.fixed = rn.node.data.fixed;\r\n            this.tt.appendChildren([gh], rn.node);\r\n        }\r\n    }\r\n\r\n    // å é¤åç»\r\n    removeGroup(event: MouseEvent, rowNode) {\r\n        if (this.tt.selectedRow && rowNode.id === this.tt.selectedRow.id) {\r\n            this.nodeSelected.emit(null);\r\n        }\r\n        const childs = this.tt.serializedValue.filter(n => n.parents.indexOf(rowNode.id) > -1 && !n.node.data.groupHeader).map(n => n.node);\r\n        this.treeData = this.treeData.filter(n => n.data.id !== rowNode.id);\r\n\r\n        this.tt.remove(rowNode.id);\r\n        this.tt.appendChildren(childs, this.getHouXuanNode().node);\r\n    }\r\n\r\n    // æ°å¢åç»\r\n    addNewGroup(rn: RowNode, child = false) {\r\n        const modalRef = this.showNewHeaderDialog(() => {\r\n            const ghfRef = modalRef.content as NewHeaderFormComponent;\r\n            if (ghfRef.title) {\r\n                if (!rn || rn.id === this.HOU_XUAN_LIE_ID) {\r\n                    this.treeData.splice(0, 0, {\r\n                        data: {\r\n                            id: this.generateGroupHeaderId(), halign: 'left',\r\n                            title: ghfRef.title, groupHeader: true, fixed: 'UNFIXED'\r\n                        },\r\n                        icon: this.GROUP_HEADER_ICON,\r\n                        children: []\r\n                    });\r\n                    this.tt.updateSerializedValue();\r\n                } else {\r\n                    this.createNewGroupHeader(rn, ghfRef.title, child);\r\n                }\r\n\r\n                modalRef.close();\r\n            } else {\r\n                this.notitySer.info(this.languageRes.required);\r\n                ghfRef.input.nativeElement.focus();\r\n            }\r\n       }, child? this.languageRes.contextMenus.newChild: this.languageRes.contextMenus.new);\r\n\r\n    }\r\n\r\n    // æ¾ç¤ºæ´æ°æé®\r\n    onMoreBtnClick($event: MouseEvent, nodeData) {\r\n        if (nodeData && nodeData.id) {\r\n            this.tt.selectNode(nodeData.id);\r\n        }\r\n        this.tt.ctxMenu.onContextMenu($event);\r\n    }\r\n\r\n    private getCanSelectColumns(rowNode: RowNode) {\r\n        // å¯åéå\r\n        // åéåºæ°æ® + å­èç¹\r\n\r\n        const hxl = this.getHouXuanNode();\r\n        let fields = rowNode ? rowNode.node.children : [];\r\n        fields = fields.filter((n: TreeNode) => !n.data.groupHeader)\r\n        return hxl.node.children.concat(fields).map(n => n.data);\r\n    }\r\n\r\n    private showSetColumnsDialog(okCallback, selectedItems, rowNode: RowNode) {\r\n        const modalRef = this.modalService.show(SetColumnsComponent, {\r\n            title: this.languageRes.contextMenus.setDataField,\r\n            width: 600,\r\n            height: 500,\r\n            showMaxButton: false,\r\n            resizable: false,\r\n            initialState: {\r\n                data: this.getCanSelectColumns(rowNode),\r\n                checkedItems: selectedItems,\r\n                groupEditorRef: this\r\n            },\r\n            buttons: [\r\n                {\r\n                    text: this.languageRes.cancel,\r\n                    cls: 'btn btn-secondary',\r\n                    handle: () => {\r\n                        modalRef.close();\r\n                    }\r\n                },\r\n                {\r\n                    text: this.languageRes.ok,\r\n                    cls: 'btn btn-primary',\r\n                    handle: () => {\r\n                        okCallback(modalRef.content.selectedIds)\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n\r\n        return modalRef;\r\n    }\r\n\r\n    /** ä¸ºåç»è¡¨å¤´åéæ°æ®å */\r\n    setColumnsForGroupHeader($event, rowNode: RowNode) {\r\n        const childs = rowNode ? rowNode.node.children ? rowNode.node.children.map(n => n.data) : [] : [];\r\n        const modalRef = this.showSetColumnsDialog((selectedIds: string[]) => {\r\n            // åç»ä¸çå\r\n            const cols = selectedIds.map(n => {\r\n                return this.fields.find(f => f.field == n);\r\n            }).filter(n => n);\r\n            // åéåº\r\n            const hxl = this.getHouXuanNode();\r\n            // æ¸çåéæ°æ®ï¼å°å·²åéçåå¨åéåºç§»é¤\r\n            hxl.node.children = (hxl.node.children || []).filter(n => cols.findIndex(c => c.field == n.id) === -1);\r\n\r\n            // æ¥æ¾éè¦ç§»é¤ç\r\n            const needRemoveNodes = (rowNode.node.children || []).filter( (n) => {\r\n                return !n.data.groupHeader && cols.findIndex((c) => c.field === n.id) == -1\r\n            }).filter(n => n);\r\n\r\n            if (needRemoveNodes && needRemoveNodes.length) {\r\n                needRemoveNodes.forEach(n => {\r\n                    this.tt.remove(n.id);\r\n                });\r\n            }\r\n\r\n            // æ¥æ¾éè¦æ°å¢ç\r\n            const needAppendNodes = cols.filter(n =>  (rowNode.node.children || []).findIndex(c => c.id === n.field) === -1).map(n => {\r\n                if (!n.id) {\r\n                    n.id = n.field;\r\n                }\r\n                return n;\r\n            });\r\n            if (needAppendNodes && needAppendNodes.length) {\r\n                needAppendNodes.forEach(n => {\r\n                    const col = this.fields.find(f => f.field == n.field);\r\n                    if (col) {\r\n                        col.fixed =  rowNode.node.data.fixed;\r\n                    }\r\n                });\r\n\r\n                this.tt.appendChildren(needAppendNodes.map(n => {\r\n                    return {\r\n                        data: n,\r\n                        children: [],\r\n                        expanded: true\r\n                    };\r\n                }), rowNode.node);\r\n    \r\n                this.tt.expandNode(rowNode.id);\r\n            }\r\n\r\n            // æ´æ°å¾éåº\r\n            const hxlCols = needRemoveNodes.map(n => {\r\n                return {\r\n                    data: n.data,\r\n                    children: []\r\n                };\r\n            });\r\n            this.tt.appendChildren(hxlCols, hxl.node);\r\n\r\n            modalRef.close();\r\n        }, childs, rowNode);\r\n    }\r\n\r\n    // å°å¾éåºä¸­çæ°æ®åç´æ¥è®¾ä¸ºè¡¨å¤´\r\n    setColumnHeader(event: MouseEvent, col) {\r\n        const i = this.treeData.length - 1;\r\n        this.treeData.splice(i, 0, {  data: col, children: [] });\r\n\r\n        const hxl = this.getHouXuanNode();\r\n        if (hxl) {\r\n            hxl.node.children = hxl.node.children.filter(n => n.data.id !== col.id);\r\n            hxl.node.leaf = !(hxl.node.children && hxl.node.children.length);\r\n            if (hxl.node.leaf) {\r\n                hxl.node.icon = this.GROUP_HEADER_ICON;\r\n            }\r\n            this.tt.clearSelections();\r\n            this.tt.updateSerializedValue();\r\n            this.tt.selectNode(col.id, true);\r\n        }\r\n        \r\n    }\r\n    \r\n    moveUp(event: MouseEvent, rowNode) {\r\n        let data = this.treeData;\r\n        if (rowNode.parent) {\r\n            data = rowNode.parent.children;\r\n        }\r\n\r\n        const index = data.findIndex(n => n.data.id === rowNode.id);\r\n        if (index !== 0) {\r\n            const tempArr = data.splice(index, 1);\r\n            data.splice(index - 1, 0, ...tempArr);\r\n\r\n            this.tt.updateSerializedValue();\r\n        }\r\n    }\r\n\r\n    moveDown(event: MouseEvent, rowNode) {\r\n        let data = this.treeData;\r\n        if (rowNode.parent) {\r\n            data = rowNode.parent.children;\r\n        }\r\n        const index = data.findIndex(n => n.data.id === rowNode.id);\r\n        const len = data.length;\r\n\r\n        if (index !== len - 2) {\r\n            const tempArr = data.splice(index, 1);\r\n            data.splice(index + 1, 0, ...tempArr);\r\n            this.tt.updateSerializedValue();\r\n        } else {\r\n            this.moveBottom(event, rowNode);\r\n        }\r\n    }\r\n\r\n    moveTop(event: MouseEvent, rowNode) {\r\n        let data = this.treeData;\r\n        if (rowNode.parent) {\r\n            data = rowNode.parent.children;\r\n        }\r\n        const index = data.findIndex(n => n.data.id === rowNode.id);\r\n        data.unshift(rowNode.node);\r\n        data.splice(index + 1, 1);\r\n        this.tt.updateSerializedValue();\r\n    }\r\n\r\n    moveBottom(event: MouseEvent, rowNode) {\r\n        let data = this.treeData;\r\n        if (rowNode.parent) {\r\n            data = rowNode.parent.children;\r\n        }\r\n\r\n        const index = data.findIndex(n => n.data.id === rowNode.id);\r\n        data.push(rowNode.node);\r\n        data.splice(index, 1);\r\n\r\n        if (!rowNode.parent) {\r\n            this.moveUp(event, rowNode);\r\n        } else {\r\n            this.tt.updateSerializedValue();\r\n        }\r\n    }\r\n\r\n    /** è·åå¤è¡¨å¤´æ°æ® */\r\n    getPreviewGroupColumns() {\r\n        const treeNodes = this.getAllNodes();\r\n        return this.convert2Array(treeNodes); \r\n    }\r\n\r\n     /** è·ååéå */\r\n     getHouXuanFields() {\r\n        const hxl = this.treeData.find(n => n.data.houxuanquNode);\r\n        if (hxl) {\r\n            return hxl.children;\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    private getAllNodes() {\r\n        const hxl = this.getHouXuanFields();\r\n        return this.tt.serializedValue.filter(n => {\r\n            return !n.node.data.houxuanquNode && hxl.findIndex(k => k.data.id === n.id) === -1;\r\n        });\r\n    }\r\n\r\n    /** å°æ èç¹æ°æ®è½¬æ¢ä¸º å¤è¡¨å¤´ç»æ */\r\n    convert2Array(rowNodes: RowNode[]) {\r\n        const r = [];\r\n        const maxBy = (arr, fn) => Math.max(...arr.map(typeof fn === 'function' ? fn : val => val[fn]));\r\n        const maxlevel = maxBy(rowNodes, (n) => n.level) ;\r\n        // æé¤æ²¡ææ°æ®å­æ®µçè¡¨å¤´\r\n        rowNodes = rowNodes.filter(n => (n.node.children&& n.node.children.length && n.node.data.groupHeader) || !n.node.data.groupHeader);\r\n\r\n        /**\r\n         * 1ãåªæä¸ç»è¡¨å¤´ï¼ä¸åºå®å¨å·¦ä¾§æå³ä¾§æ¶ï¼ææ åºå®åæ¹å¼å¤ç\r\n         * 2ãåªæå·¦ä¾§ãå³ä¾§åºå®åèæ²¡æå¶ä»æ­£å¸¸åæ¶ï¼åæ¶å³ä¾§åºå®å\r\n         * 3ãåªæå·¦ä¾§æå³ä¾§åºå®æ¶ï¼ææ åºå®åå¤ç\r\n         */\r\n        const parents = rowNodes.filter(e => !e.parent);\r\n        if (!parents.filter(n => !n.node.data.fixed || n.node.data.fixed === 'UNFIXED').length) {\r\n            const leftCols = parents.filter(n => n.node.data.fixed === 'left');\r\n            const rightCols = parents.filter(n => n.node.data.fixed === 'right');\r\n            if (leftCols.length == parents.length || rightCols.length == parents.length) {\r\n                rowNodes.forEach(n => {\r\n                    if (parents.find(p => p.id === n.id)) {\r\n                        n.node.data.fixed = ''\r\n                    }\r\n                });\r\n            } else {\r\n                if (rightCols.length === 1) {\r\n                    leftCols.forEach(t =>{\r\n                        rowNodes.forEach(n => {\r\n                            if (t.id === n.id) {\r\n                                n.node.data.fixed = ''\r\n                            }\r\n                        });\r\n                    });\r\n                } else {\r\n                    rightCols.forEach(t =>{\r\n                        rowNodes.forEach(n => {\r\n                            if (t.id === n.id) {\r\n                                n.node.data.fixed = ''\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        for (let i = 0; i <= maxlevel; i++ ) {\r\n            r.push(rowNodes.filter(n => n.level === i).map(n => {\r\n                const data = n.node.data;\r\n                const _fixed = n.parent ? this.tt.getRoot(n.id).node.data.fixed :  (data.fixed || '');\r\n\r\n\r\n                const _colspan = (n.node.children ? rowNodes.filter(k => k.parents.indexOf(n.id) > -1 && k.id.indexOf('groupHeader_') == -1).length : 1) || 1;\r\n                const _rowspan = (n.node.children && n.node.children.length > 0) ? 1 : (maxlevel - n.level + 1);\r\n\r\n                const newCol: any = {\r\n                    field: data.field,\r\n                    title: data.title,\r\n                    sortable: data.sortable,\r\n                    order: data.order,\r\n                    halign: data.halign || 'left',\r\n                    align: data.align || 'left',\r\n                    visible: true,\r\n                    allowGrouping: data.allowGrouping,\r\n                    groupFooter: data.groupFooter,\r\n                    footer: data.footer,\r\n                    width: (data.size ? data.size.width : 100),\r\n                    dataType: data.dataType || 'string',\r\n                    fixed: _fixed === 'UNFIXED'? '': _fixed,\r\n                    id: n.id,\r\n                    parentId: n.node.parent ? n.node.parent.id : null,\r\n                    rowspan: _rowspan,\r\n                    colspan: _colspan\r\n                };\r\n\r\n                const newCol2: any = {\r\n                    field: data.field,\r\n                    title: data.title,\r\n                    halign: data.halign || 'left',\r\n                    align: data.align || 'left',\r\n                    visible: true,\r\n                    groupFooter: {},\r\n                    footer: {},\r\n                    width: (data.size ? data.size.width : 100),\r\n                    dataType: data.dataType || 'string',\r\n                    fixed: _fixed === 'UNFIXED'? '': _fixed,\r\n                    id: n.id,\r\n                    parentId: n.node.parent ? n.node.parent.id : null,\r\n                    rowspan: _rowspan,\r\n                    colspan: _colspan\r\n                };\r\n\r\n                return n.node.data.groupHeader ?  newCol2: newCol;\r\n            }));\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    onBeforeShowContextMenu = (t) => {\r\n        if (t && t.data.parents.indexOf(this.HOU_XUAN_LIE_ID) > -1) {\r\n            // å¾éåºä¸­çæ°æ®åç¦ç¨å³é®èå\r\n            return of({show: false});\r\n        }\r\n        return of({show: true});\r\n    }\r\n\r\n\r\n    private clearTreeNodesData(nodes: TreeNode[]) {\r\n        nodes.forEach((n: any) =>{\r\n            delete n.parent;\r\n            delete n.elementRef;\r\n            if (n.children && n.children.length) {\r\n                this.clearTreeNodesData(n.children);\r\n            }\r\n        })\r\n    }\r\n\r\n    getSettings() {\r\n        this.clearTreeNodesData(this.treeData);\r\n        return {\r\n            viewCols: this.getPreviewGroupColumns(),\r\n            treeData: this.treeData\r\n        };\r\n    }\r\n\r\n    hiddenCol($event: MouseEvent, id) {\r\n        $event.stopPropagation();\r\n        \r\n        if (this.tt.selectedRow && id === this.tt.selectedRow.id) {\r\n            this.tt.clearSelections();\r\n            this.nodeSelected.emit(null);\r\n        }\r\n\r\n        this.tt.remove(id);\r\n\r\n    }\r\n\r\n    resetHeaderName($event: MouseEvent, rowNode: RowNode) {\r\n        const modalRef = this.showNewHeaderDialog(() => {\r\n            const ghfRef = modalRef.content as NewHeaderFormComponent;\r\n            if (ghfRef.title) {\r\n                rowNode.node.data.title = ghfRef.title;\r\n                modalRef.close();\r\n            } else {\r\n                this.notitySer.info(this.languageRes.required);\r\n                ghfRef.input.nativeElement.focus();\r\n            }\r\n       }, this.languageRes.contextMenus.rename);\r\n\r\n       const ghfRef = modalRef.content as NewHeaderFormComponent;\r\n       ghfRef.title = rowNode.node.data.title;\r\n    }\r\n    \r\n}","import { LocaleService } from '@farris/ui-locale';\r\nimport { Component, Input, OnInit, Injector, ViewChild, Output, EventEmitter, ChangeDetectorRef, OnChanges, SimpleChanges, ViewEncapsulation, ElementRef, AfterViewInit } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { DatagridSettingsComponent } from '../datagrid-settings.component';\r\nimport { ColumnTreeOptions } from '../setting.model';\r\nimport { RowNode, TreeNode } from '@farris/ui-treetable';\r\nimport { ColumnTreeComponent } from '../multi-headers/column-tree.component';\r\n\r\n\r\n@Component({\r\n    selector: 'column-format-setting',\r\n    templateUrl: './column-format-setting.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ColumnFormatSettingComponent implements OnInit, OnChanges, AfterViewInit {\r\n    @Input() columns = [];\r\n    @Input() fields = [];\r\n\r\n    @ViewChild('colformatform') colForm: NgForm;\r\n    @ViewChild('gh') groupHeadersRef: ColumnTreeComponent;\r\n\r\n    @Output() formatChange = new EventEmitter();\r\n    @Output() fieldsChange = new EventEmitter();\r\n\r\n    allCols = [];\r\n\r\n    /** format Data */\r\n    formatData = [];\r\n    columnType = 'all';\r\n    activeField = null;\r\n    showGridFooter = false;\r\n\r\n    searchItems = [];\r\n    alignItems = [];\r\n    summaryItems = [];\r\n    summaryItems2 = [];\r\n    fixedItems = [];\r\n    localeSer: LocaleService;\r\n    isEn = false;\r\n\r\n    switchValue = false;\r\n\r\n    _searchResult = { checkAll: false, unCheckAll: false };\r\n\r\n\r\n    /** éç½®å¤è¡¨å¤´ç¸å³è®¾ç½® */\r\n    @Input() multiHeaderOptions: Partial<ColumnTreeOptions> = {};\r\n    // å¯ç¨å¤è¡¨å¤´\r\n    @Input() enableMultipleHeaders = false;\r\n\r\n    selectTreeNode = null;\r\n\r\n    get isShowfixed() {\r\n        if (this.groupHeadersRef && this.selectTreeNode && this.selectTreeNode.id !== '__HOU_XUAN_LIE_ID__' ) { // å¤è¡¨å¤´\r\n            const rn = this.groupHeadersRef.tt.findRowNode(this.selectTreeNode.id);\r\n            return rn && !rn.level;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    constructor(private injector: Injector, public gridSettingComponentRef: DatagridSettingsComponent, private cd: ChangeDetectorRef) {\r\n        this.showGridFooter = this.gridSettingComponentRef.gridInstance.showFooter &&\r\n                                !this.gridSettingComponentRef.gridInstance.footerTemplate;\r\n        this.localeSer = this.injector.get(LocaleService, null);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.columns && !changes.columns.isFirstChange()) {\r\n            this.setFormatData();\r\n            this.allCols = this.columns[0];\r\n            this.setActiveField();\r\n            this.checkColumnOptions();\r\n            this._searchResult = this.seachResultIsCheckAll();\r\n        }\r\n\r\n        if (changes.multiHeaderOptions && !changes.multiHeaderOptions.isFirstChange()) {\r\n            this.setActiveField();\r\n        }\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.isEn = this.localeSer.localeId === 'en';\r\n        this.initData();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.setActiveField();\r\n        \r\n        setTimeout(() => {\r\n            if (this.colForm) {\r\n                this.colForm.valueChanges.subscribe(v => {\r\n                    this.formatChange.emit(this.formatData);\r\n                });\r\n            }\r\n        }, 50);\r\n    }\r\n\r\n    private setActiveField() {\r\n        setTimeout(() => {\r\n            if (this.enableMultipleHeaders && this.multiHeaderOptions) {\r\n                const {columns} = this.multiHeaderOptions;\r\n                if (columns && columns.length) {\r\n                    this.groupHeadersRef.tt.selectFirstNode();\r\n                } else {\r\n                    this.activeField = null;\r\n                }\r\n            } else {\r\n                this.activeField = this.columns[0][0];\r\n            }\r\n        });\r\n    }\r\n\r\n    private setFormatData() {\r\n        // this.formatData = this.fields.map(n => {\r\n        //     return this.columns[0].find(col => col.field === n);\r\n        // });\r\n        this.formatData =  this.columns[0];\r\n    }\r\n\r\n    private initData() {\r\n\r\n        this.alignItems = this.gridSettingComponentRef.alignItems;\r\n        this.searchItems = this.gridSettingComponentRef.searchItems;\r\n        this.summaryItems = this.gridSettingComponentRef.summaryItems;\r\n        this.summaryItems2 = this.gridSettingComponentRef.summaryItems2;\r\n        this.fixedItems = this.gridSettingComponentRef.fixedItems;\r\n\r\n\r\n        this.setFormatData();\r\n        this.allCols = this.columns[0];\r\n        this.checkColumnOptions();\r\n\r\n        this.filterColumns();\r\n    }\r\n\r\n    private checkColumnOptions() {\r\n        if (this.activeField) {\r\n            if (this.activeField.allowGrouping === undefined) {\r\n                this.activeField.allowGrouping = true;\r\n            }\r\n\r\n            if (this.activeField.groupFooter === undefined) {\r\n                this.activeField.groupFooter = { options: {calculationType: -1} };\r\n            } else {\r\n                this.activeField.groupFooter.options = this.activeField.groupFooter.options || {calculationType: -1};\r\n                if (this.activeField.groupFooter.options.calculationType === undefined) {\r\n                    this.activeField.groupFooter.options.calculationType = -1;\r\n                }\r\n            }\r\n\r\n            if (this.activeField.footer === undefined) {\r\n                this.activeField.footer =  { options: {calculationType: -1} };\r\n            } else {\r\n                this.activeField.footer.options = this.activeField.footer.options || {calculationType: -1};\r\n                if (this.activeField.footer.options.calculationType === undefined) {\r\n                    this.activeField.footer.options.calculationType = -1;\r\n                }\r\n            }\r\n\r\n            if (!this.activeField.fixed || (this.activeField.fixed !== 'left' && this.activeField.fixed !== 'right')) {\r\n                this.activeField.fixed = 'UNFIXED';\r\n            }\r\n        }\r\n    }\r\n\r\n    // æ ¹æ®åçç±»åè¿è¡ç­éè¿æ»¤ï¼\r\n    // all ææå\r\n    // visible å¯è§å\r\n    // hidden éèå\r\n    // group åç»å\r\n    filterColumns( searchWords = '') {\r\n        let cols = [];\r\n     \r\n        if (this.switchValue) {\r\n            cols = this.columns[0].filter(n => this.fields.indexOf(n.field) > -1);\r\n        } else {\r\n            cols = this.columns[0];\r\n        }\r\n\r\n\r\n        if (searchWords) {\r\n            cols = cols.filter(c => c.title.toLowerCase().indexOf(searchWords) > -1);\r\n        }\r\n\r\n        this.allCols = cols;\r\n        this._searchResult = this.seachResultIsCheckAll(this.allCols.filter(n => n.visible));\r\n    }\r\n\r\n    private seachResultIsCheckAll(searchFields?: any) {\r\n        const allColsLength = this.allCols.filter(n => n.field != '_datagrid-setting-control_').length;\r\n        let fieldsLength = this.fields.filter(n => n !=  '_datagrid-setting-control_').length;\r\n\r\n        if (searchFields) {\r\n            fieldsLength = searchFields.length;\r\n        }\r\n\r\n\r\n        return {\r\n            checkAll: allColsLength && allColsLength === fieldsLength,\r\n            unCheckAll:!searchFields ? !this.fields.length : !fieldsLength\r\n        };\r\n    }\r\n\r\n    onFieldClick(col, $event) {\r\n        this.activeField = col;\r\n        this.checkColumnOptions();\r\n    }\r\n\r\n\r\n    private onFieldsChanged() {\r\n        this.setFormatData();\r\n        this.fieldsChange.emit(this.fields);\r\n    }\r\n\r\n    onDblClick($event, col) {\r\n        $event.target.style.userSelect = 'none';\r\n        this.onCheckboxClick($event, col);\r\n        $event.target.style.userSelect = '';\r\n    }\r\n\r\n    onCheckboxClick($event, col) {\r\n        $event.stopPropagation();\r\n        const index = this.fields.indexOf(col.field);\r\n        if (index === -1) {\r\n            this.fields.push(col.field);\r\n        } else {\r\n            this.fields.splice(index, 1);\r\n        }\r\n\r\n        this.columns[0].forEach(f => {\r\n            f.visible = this.fields.indexOf(f.field) > -1;\r\n        });\r\n\r\n        this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n\r\n        const _fields = this.allCols.filter(n => n.visible).map(n => n.field);\r\n        this._searchResult = this.seachResultIsCheckAll(_fields);\r\n      \r\n        this.onFieldsChanged();\r\n    }\r\n\r\n    searchColumn($event) {\r\n        this.switchValue = false;\r\n        const txt = $event.target.value;\r\n        this.filterColumns(txt);\r\n    }\r\n\r\n    onFieldDrop(fieldInfo, txt, ulElRef: any) {\r\n        const { removedIndex, addedIndex } = fieldInfo;\r\n\r\n        const moveItem = this.allCols[removedIndex];\r\n        const targetItem = this.allCols[addedIndex];\r\n\r\n        const moveItemIndex = this.columns[0].findIndex(n => n.field === moveItem.field);\r\n        const targetItemIndex = this.columns[0].findIndex(n => n.field === targetItem.field);\r\n\r\n        const removedItem = this.columns[0].splice(moveItemIndex, 1);\r\n        this.columns[0].splice(targetItemIndex, 0, ...removedItem);\r\n\r\n        this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n        this.onFieldsChanged();\r\n\r\n        this.filterColumns(txt);\r\n\r\n    }\r\n\r\n    /**\r\n     * 0: 1ä¸ªä¹æ²¡æéä¸­ï¼ 1: å¨é¨éä¸­ï¼ 2: æéä¸­çä¹ææ²¡éä¸­ç\r\n     */\r\n    private getCheckAllState(search = false) {\r\n        if (this.fields.length === 0) {\r\n            return 0;\r\n        } else {\r\n            if (search) {\r\n                if (this._searchResult.checkAll) {\r\n                    return 1;\r\n                }\r\n            } else {\r\n                if (this.fields.length === this.columns[0].length) {\r\n                    return 1;\r\n                }\r\n            }\r\n            return 2;\r\n        }\r\n    }\r\n\r\n    onCheckAllClick($event, txt) {\r\n        if (!this.allCols || !this.allCols.length) {\r\n            return;\r\n        }\r\n        const state = this.getCheckAllState(txt);\r\n        const isVisible = state === 0 || state === 2;\r\n        let _fields = null;\r\n        if (txt == '') {\r\n            if (isVisible) {\r\n                // æ§è¡å¨é\r\n                this.columns[0].forEach(n => n.visible = true);\r\n                this.fields = this.columns[0].map(n => n.field);\r\n            } else {\r\n                // åæ¶å¨é\r\n                this.columns[0].forEach(n => n.visible = false);\r\n                this.fields = [];\r\n            }\r\n        } else {\r\n            this.allCols.forEach(c => {\r\n                const col = this.columns[0].find(n => c.field === n.field);\r\n                col.visible = isVisible;\r\n                c.visible = isVisible;\r\n            });\r\n            _fields = this.allCols.filter(n => n.visible).map(n => n.field);\r\n            this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n        }\r\n        this._searchResult = this.seachResultIsCheckAll(!txt ? null: _fields);\r\n        this.cd.detectChanges();\r\n        this.onFieldsChanged();\r\n        // this.filterColumns(txt);\r\n    }\r\n\r\n     // ä»æ¾ç¤ºå¯è§å\r\n     onlySeeVisibleColumns($event, txt) {\r\n        this.switchValue = $event;\r\n        this.filterColumns(txt);\r\n    }\r\n\r\n    clearSearch($event, searchInput) {\r\n        if (searchInput && searchInput.value) {\r\n            this.filterColumns('');\r\n            searchInput.value = '';\r\n        }\r\n    }\r\n\r\n    onNodeSelected($event: RowNode) {\r\n        if ($event && $event.node.id !== \"__HOU_XUAN_LIE_ID__\") {\r\n            this.activeField = $event.node.data;\r\n            this.selectTreeNode = $event.node;\r\n            this.checkColumnOptions();\r\n        } else {\r\n            this.activeField = null;\r\n            this.selectTreeNode = null;\r\n        }\r\n    }\r\n\r\n    getMultiHeaders(): {\r\n        viewCols: any[];\r\n        treeData: any[];\r\n    } {\r\n        return this.groupHeadersRef? this.groupHeadersRef.getSettings() : null;\r\n    }\r\n}\r\n","import {\r\n    Component, ViewEncapsulation, ViewChild, ElementRef, Input, EventEmitter,\r\n    OnInit, OnChanges, SimpleChanges, ChangeDetectorRef, Injector, Output, Renderer2\r\n} from '@angular/core';\r\nimport { BsModalRef } from '@farris/ui-modal';\r\nimport { DataColumn, DatagridComponent } from '@farris/ui-datagrid';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { ColumnTreeOptions, SettingModel } from './setting.model';\r\nimport { ColumnFormatSettingComponent } from './column-format-setting/column-format-setting.component';\r\nimport { getDataFieldsForMultiHeaders, mergeSortInfo, multiHeadersHasDataFields, reset2DefaultForMultiHeaders } from './mutli-headers.helper';\r\nimport { NotifyService } from '@farris/ui-notify';\r\n\r\n@Component({\r\n    selector: 'datagrid-settings',\r\n    templateUrl: './datagrid-settings.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DatagridSettingsComponent implements OnInit, OnChanges {\r\n    modalRef: BsModalRef;\r\n    gridInstance: DatagridComponent;\r\n    activeTabIndex = 1;\r\n\r\n    /** æåºåæ°æ® */\r\n    sortTreeData = [];\r\n    sortNames = [];\r\n    sortInfo: any = {};\r\n\r\n    /** æ¾ç¤ºåæ°æ® */\r\n    // viewTreeData = [];\r\n    viewColumns = [];\r\n\r\n    columnFormat = [];\r\n\r\n    groupField = [];\r\n    expandGroupRows = true;\r\n\r\n    canSetColumnSort = true;\r\n    canSetColumnVisible = true;\r\n    @Input() enableReset = false;\r\n    @Input() columns: DataColumn[][];\r\n\r\n    @Output() cancelHandle = new EventEmitter();\r\n    @Output() submitHandle = new EventEmitter();\r\n    @Output() reset = new EventEmitter();\r\n    @Output() concise = new EventEmitter();\r\n    @Input() schemeInfo: SettingModel = null;\r\n\r\n    @ViewChild('header') header: ElementRef;\r\n    @ViewChild('activeTab') activeTab: ElementRef;\r\n    @ViewChild('colFormatSettings') colFormatSettings: ColumnFormatSettingComponent\r\n\r\n    searchItems = [];\r\n    alignItems = [];\r\n    summaryItems = [];\r\n    summaryItems2 = [];\r\n\r\n    enableGroupFooter = false;\r\n\r\n    fixedItems = [];\r\n\r\n    private localeSer: LocaleService;\r\n    private messager: MessagerService;\r\n    private render2: Renderer2;\r\n\r\n    /** éç½®å¤è¡¨å¤´ç¸å³è®¾ç½® */\r\n    multiHeaders: Partial<ColumnTreeOptions> = {};\r\n    // å¯ç¨å¤è¡¨å¤´\r\n    enableMultipleHeaders = false;\r\n    notifySer: NotifyService;\r\n\r\n    schemeName = '';\r\n\r\n    tabWidth = 70;\r\n\r\n    constructor(private cd: ChangeDetectorRef, private inject: Injector) {\r\n        this.messager = this.inject.get(MessagerService, null);\r\n        this.localeSer = this.inject.get(LocaleService);\r\n        this.render2 = this.inject.get(Renderer2, null);\r\n        this.notifySer = this.inject.get(NotifyService, null);\r\n        this.searchItems = [\r\n            { value: 'all', title: this.localeSer.getValue('datagrid.settings.allColumns') },\r\n            { value: 'visible', title: this.localeSer.getValue('datagrid.settings.visibleColumns') },\r\n            { value: 'hidden', title: this.localeSer.getValue('datagrid.settings.hiddenColumns') }\r\n        ];\r\n\r\n        this.alignItems = [\r\n            { value: 'left', title: this.localeSer.getValue('datagrid.settings.alignLeft')},\r\n            { value: 'center', title: this.localeSer.getValue('datagrid.settings.alignCenter')},\r\n            { value: 'right', title: this.localeSer.getValue('datagrid.settings.alignRight')},\r\n        ];\r\n\r\n        this.summaryItems = [\r\n            { value: -1, title: this.localeSer.getValue('datagrid.settings.summaryNone') },\r\n            { value: 2, title: this.localeSer.getValue('datagrid.settings.summarySum') },\r\n            { value: 0, title: this.localeSer.getValue('datagrid.settings.summaryMax') },\r\n            { value: 1, title: this.localeSer.getValue('datagrid.settings.summaryMin') },\r\n            { value: 3, title: this.localeSer.getValue('datagrid.settings.summaryAverage') },\r\n            { value: 4, title: this.localeSer.getValue('datagrid.settings.summarCount') },\r\n        ];\r\n\r\n        this.summaryItems2 = [\r\n            { value: -1, title: this.localeSer.getValue('datagrid.settings.summaryNone') },\r\n            { value: 4, title: this.localeSer.getValue('datagrid.settings.summarCount') },\r\n        ];\r\n\r\n        this.fixedItems = [\r\n            { value: 'UNFIXED', title: this.localeSer.getValue('datagrid-settings.column.unFixed') },\r\n            { value: 'left', title: this.localeSer.getValue('datagrid-settings.column.leftFixed') },\r\n            { value: 'right', title: this.localeSer.getValue('datagrid-settings.column.rightFixed') },\r\n        ]\r\n\r\n        if (this.localeSer.localeId === 'en') {\r\n            this.tabWidth = 80;\r\n        }\r\n\r\n    }\r\n\r\n    private initData() {\r\n        this.sortNames = this.gridInstance.sortName ? this.gridInstance.sortName.split(',') : [];\r\n        const sortOrders = this.gridInstance.sortOrder ? this.gridInstance.sortOrder.split(',') : [];\r\n\r\n        this.viewColumns = this.getViewColumns();\r\n        this.sortInfo = {sortName: this.sortNames, sortOrder: sortOrders};\r\n        this.columnFormat = [...this.columns[0]];\r\n        this.groupField = this.gridInstance.groupField ? this.gridInstance.groupField.split(',') : [];\r\n        this.expandGroupRows = this.gridInstance['expandGroupRows'];\r\n\r\n        this.enableGroupFooter = this.gridInstance.groupFooter;\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.gridInstance.enableScheme) {\r\n            this.initData();\r\n        } else {\r\n            if (this.schemeInfo) {\r\n                this.sortInfo = this.schemeInfo.sortInfo || {};\r\n                if (this.sortInfo) {\r\n                    this.sortNames = this.sortInfo.sortName || '';\r\n                }\r\n                this.viewColumns = this.schemeInfo.viewColumns;\r\n                this.columnFormat = this.schemeInfo.columnFormat;\r\n                if (!this.columnFormat) {\r\n                    this.columnFormat = [...this.columns[0]];\r\n                }\r\n\r\n                if (this.schemeInfo.groupField) {\r\n                    if (typeof this.schemeInfo.groupField === 'string') {\r\n                        this.groupField = (this.schemeInfo.groupField as any).split(',');\r\n                    } else {\r\n                        this.groupField = this.schemeInfo.groupField || [];\r\n                    }\r\n                } else {\r\n                    this.groupField = [];\r\n                }\r\n                this.expandGroupRows = !!this.schemeInfo.expandGroupRows;\r\n            } else {\r\n                // ç³»ç»é¢å¶\r\n                this.reset2Default();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    close($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        if (this.modalRef) {\r\n            this.modalRef.close();\r\n        }\r\n    }\r\n\r\n    private setCurrentTab(tab: HTMLElement = null) {\r\n        if (this.render2) {\r\n\r\n            let left = 0;\r\n\r\n            const tabs = Array.from(this.header.nativeElement.querySelectorAll('.navitem'));\r\n            let index = this.activeTabIndex;\r\n            if (tabs.length !== 3) {\r\n                index = tabs.findIndex(n => n === tab) + 1;\r\n            }\r\n            switch(index) {\r\n                case 2:\r\n                    left = this.localeSer.localeId === 'en'? 78: 68;\r\n                    break;\r\n                case 3:\r\n                    left = this.localeSer.localeId === 'en' ?158: 138;\r\n                    break;\r\n                default:\r\n                    left = 0;\r\n                    break;\r\n            }\r\n\r\n            this.render2.setStyle(this.activeTab.nativeElement, 'transform', `translate3d(${left}px, 0px, 0px)`);\r\n        }\r\n    }\r\n\r\n    changeTabs($event: MouseEvent, idx) {\r\n        $event.stopPropagation();\r\n\r\n        const treeNodes = this.getCurrentGroupHeaders();\r\n        if(this.activeTabIndex === 1 && this.enableMultipleHeaders) {\r\n            this.setCurrentGroupHeaders(treeNodes);\r\n        } else {\r\n            this.multiHeaders.treeData = treeNodes? treeNodes.treeData: [];\r\n        }\r\n\r\n\r\n        if (idx === 2 && this.enableMultipleHeaders) {\r\n            this.sortTreeData = getDataFieldsForMultiHeaders(treeNodes.viewCols).filter( (n: any) => n.field.indexOf('farris-datagrid-column_') == -1 && n.sortable );\r\n        }\r\n\r\n        if (idx === 3) {\r\n            if (this.enableMultipleHeaders) {\r\n                this.columnFormat = treeNodes && treeNodes.viewCols ? getDataFieldsForMultiHeaders(treeNodes.viewCols).filter( (n: any) => n.field.indexOf('farris-datagrid-column_') == -1 ) : [];\r\n            } else {\r\n                this.columnFormat = getDataFieldsForMultiHeaders(this.columns);\r\n            }\r\n        }\r\n\r\n        this.activeTabIndex = idx;\r\n\r\n\r\n        let tabEl: any = $event.target;\r\n        if (!tabEl.classList.contains('navitem') && tabEl.closest('.navitem')) {\r\n            tabEl = tabEl.closest('.navitem');\r\n        }\r\n\r\n        this.setCurrentTab(tabEl);\r\n    }\r\n\r\n    onSortInfoChange(sortInfo: any) {\r\n        this.sortInfo = sortInfo;\r\n    }\r\n\r\n    private getViewColumns() {\r\n        // å¤è¡¨å¤´\r\n        let visibleCls = [];\r\n        if (this.columns.length > 1 ) {\r\n            this.columns.forEach(cols => {\r\n                visibleCls = visibleCls.concat(this._getViewColumns(cols));\r\n            });\r\n        } else {\r\n            visibleCls = this.columns[0].filter(n => (n.visible || n.visible === undefined));\r\n        }\r\n\r\n        return visibleCls.map(n => n.field);\r\n    }\r\n\r\n    private _getViewColumns(cols: any[]) {\r\n        return cols.filter(c => !c.colspan && (c.visible || c.visible === undefined));\r\n    }\r\n\r\n\r\n    private mergeColumnFormats() {\r\n        if (this.sortInfo && Object.keys(this.sortInfo).length && this.columnFormat && this.columnFormat.length) {\r\n            const { sortName, sortOrder } = this.sortInfo;\r\n            if (sortName && sortName.length) {\r\n                sortName.forEach((n, i) => {\r\n                    const col = this.columnFormat.find((col: any) => {\r\n                        return col.field === n;\r\n                    });\r\n                    if (col) {\r\n                        col.sortable = true;\r\n                        col.order = sortOrder[i] || 'asc';\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 1ãåªæä¸ç»è¡¨å¤´ï¼ä¸åºå®å¨å·¦ä¾§æå³ä¾§æ¶ï¼ææ åºå®åæ¹å¼å¤ç\r\n         * 2ãåªæå·¦ä¾§ãå³ä¾§åºå®åèæ²¡æå¶ä»æ­£å¸¸åæ¶ï¼åæ¶å³ä¾§åºå®å\r\n         * 3ãåªæå·¦ä¾§æå³ä¾§åºå®æ¶ï¼ææ åºå®åå¤ç\r\n         */\r\n        const _columnsFormat = this.columnFormat;\r\n        if (!_columnsFormat.filter(n => (!n.fixed || n.fixed === 'UNFIXED') && n.visible).length) {\r\n            const colsCount = _columnsFormat.length;\r\n            const rightCols = _columnsFormat.filter(n => n.fixed === 'right');\r\n            const leftCols = _columnsFormat.filter(n => n.fixed === 'left');\r\n            if ( leftCols.length == colsCount || rightCols.length == colsCount) {\r\n                _columnsFormat.forEach(n => {\r\n                    n.fixed = ''\r\n                });\r\n            } else {\r\n                if (rightCols.length === 1) {\r\n                    leftCols.forEach(t =>{\r\n                        t.fixed = '';\r\n                    });\r\n                } else {\r\n                    rightCols.forEach(t =>{\r\n                        t.fixed = '';\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onColumnFormatChange(colFormatData) {\r\n        this.columnFormat = colFormatData;\r\n    }\r\n\r\n    private _showMessager(msg: string) {\r\n        if (this.notifySer) {\r\n            this.notifySer.info(msg);\r\n        } else {\r\n            this.messager.info(msg);\r\n        }\r\n    }\r\n\r\n    onSubmitClick($event) {\r\n        if (this.enableMultipleHeaders) {\r\n            const _multiHeaders = this.getCurrentGroupHeaders();\r\n            if (_multiHeaders && !multiHeadersHasDataFields(_multiHeaders.viewCols)) {\r\n                this._showMessager('è¯·è®¾ç½®è¡¨å¤´ã');\r\n                return;\r\n            }\r\n\r\n            mergeSortInfo(_multiHeaders.viewCols, this.sortInfo);\r\n            this.multiHeaders = _multiHeaders;\r\n        } else {\r\n            this.multiHeaders = null;\r\n            this.mergeColumnFormats();\r\n        }\r\n        this.submitHandle.emit($event);\r\n    }\r\n\r\n    onCancelClick($event) {\r\n        this.cancelHandle.emit($event);\r\n    }\r\n\r\n    onSettingReset($event) {\r\n        const restorDefaultText = this.localeSer.getValue('datagrid.settings.restoreDefaultSettingsText') || 'ç¡®è®¤è¦æ¢å¤é»è®¤è®¾ç½®åï¼';\r\n        this.messager.confirm(restorDefaultText).subscribe((t: boolean) => {\r\n            if (t) {\r\n                if (this.enableMultipleHeaders) {\r\n                    const { settings, multiHeaderOptions } = reset2DefaultForMultiHeaders(this.gridInstance);\r\n                    const {viewColumns, columnFormat, sortInfo,groupField, expandGroupRows, multiHeaders} = settings;\r\n                    this.viewColumns = viewColumns;\r\n                    \r\n                    this.sortInfo = sortInfo;\r\n                    this.sortNames = sortInfo.sortName || [];\r\n                    this.groupField = groupField;\r\n                    this.expandGroupRows = expandGroupRows;\r\n                    this.multiHeaders = {\r\n                        columns: multiHeaderOptions.columns,\r\n                        treeData: multiHeaders.treeData\r\n                    };\r\n\r\n                    this.columnFormat = getDataFieldsForMultiHeaders( multiHeaderOptions.columns);\r\n                    this.setCurrentGroupHeaders({ viewCols: multiHeaderOptions.columns, treeData: null });\r\n\r\n                } else {\r\n                    this.reset2Default();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private reset2Default() {\r\n        const options = this.gridInstance.dfs['_state'].initialOptions;\r\n        if (options.columnFields && options.columnFields.length) {\r\n\r\n            const newColumns = [];\r\n            options.columnFields.forEach(c => {\r\n                if (c.field !== '_datagrid-setting-control_') {\r\n                    const col = this.gridInstance.columns[0].find((n: any) => n.field === c.field);\r\n                    if (col) {\r\n                        col.visible = c.visible;\r\n                        col.halign = c.halign;\r\n                        col.align = c.align;\r\n                        col.width = c.width;\r\n                        col.footer = {...c.footer || {}};\r\n                        col.groupFooter = {...c.groupFooter || {}};\r\n                        col.title = c.title;\r\n                        col.fixed = c.fixed || '';\r\n                        newColumns.push(col);\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.columns = [newColumns];\r\n        }\r\n\r\n        this.viewColumns = this.getViewColumns();\r\n\r\n        if (options.sort) {\r\n            const sortOrders = options.sort.sortOrder? options.sort.sortOrder.split(',') : [];\r\n            this.sortNames = options.sort.sortName ? options.sort.sortName.split(',') : [];\r\n            this.sortInfo = { sortName: this.sortNames, sortOrder:  sortOrders };\r\n        } else {\r\n            this.sortNames = [];\r\n            this.sortInfo = {};\r\n        }\r\n        this.columnFormat = [...this.columns[0]];\r\n        this.groupField =  options.groupField ? options.groupField.split(',') : [];\r\n        this.expandGroupRows = !!options.expandGroupRows;\r\n        this.enableGroupFooter = !!options.enableGroupFooter;\r\n\r\n    }\r\n    /** æ¾ç¤ºç®æ´æ¨¡å¼çªå£ */\r\n    showConcise($event) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        if (this.enableMultipleHeaders) {\r\n            this.multiHeaders = this.getCurrentGroupHeaders();\r\n        }\r\n\r\n        this.mergeColumnFormats();\r\n        this.concise.emit();\r\n    }\r\n\r\n    \r\n    private setCurrentGroupHeaders(p: {viewCols:any, treeData: any}) {\r\n        this['GROUP_HEADERS'] = p;\r\n    }\r\n\r\n    getCurrentGroupHeaders() {\r\n        if (this.colFormatSettings) {\r\n            return this.colFormatSettings.getMultiHeaders();\r\n        } else {\r\n            return this['GROUP_HEADERS'];\r\n        }\r\n    }\r\n\r\n}\r\n","export function getMultilingualValue(valObj, localeId) {\r\n    if (valObj && typeof valObj === 'object' && Object.keys(valObj).length > 0) {\r\n        localeId = localeId || 'zh-CHS';\r\n        const val = valObj[localeId];\r\n        if (val !== undefined) {\r\n            return val;\r\n        } else {\r\n            return '';\r\n        }\r\n    } else {\r\n        return '';\r\n    }\r\n}","\r\nimport { ChangeDetectorRef, Component, EventEmitter, HostBinding, Injector, Input, OnInit,\r\n        Output, ViewEncapsulation, HostListener, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ColumnTreeOptions, SettingModel } from '../setting.model';\r\nimport { getMultilingualValue } from '../getValueWithLocaleId';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { ColumnTreeComponent } from '../multi-headers/column-tree.component';\r\nimport { mergeSortInfo, multiHeadersHasDataFields, reset2DefaultForMultiHeaders } from '../mutli-headers.helper';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { DatagridSchemeService } from '../datagrid-scheme.service';\r\n\r\n@Component({\r\n    selector: 'datagrid-settings-simple',\r\n    templateUrl: './simple-columns.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SimpleColumnsComponent implements OnInit, AfterViewInit {\r\n    @Input() enableScheme = false;\r\n    @Input() seartTypes: any = [];\r\n    /** ææå */\r\n    @Input() columns = [];\r\n    /** æ¾ç¤ºçå */\r\n    @Input() fields = [];\r\n    /** ç¹å»ä¾§è¾¹æ ·å¼ä»¥å¤çåºåéèé¢æ¿ãé»è®¤ä¸º true */\r\n    @Input() clickToHidden = true;\r\n\r\n    @Input() top = 0;\r\n    private _schemeList = [];\r\n    @Input()\r\n    get schemeList() {\r\n        return this._schemeList;\r\n    }\r\n    set schemeList(val) {\r\n        if (val && val.length) {\r\n            val = val.filter(n => {\r\n                return JSON.parse(n.name)[this.localeSer.localeId]\r\n            }); // ä»è·åå½åè¯­è¨çæ¹æ¡\r\n            val.forEach(n => {\r\n                n['_title_'] = getMultilingualValue(JSON.parse(n.name), this.localeSer.localeId);\r\n                if (this.currentSchemeItem && n.id === this.currentSchemeItem.id) {\r\n                    this.currentSchemeItem['_title_'] = n['_title_'];\r\n                }\r\n            });\r\n        }\r\n        this._schemeList = val || [];\r\n    }\r\n\r\n    @HostBinding('class') cls = 'f-datagrid-settings-simple-host';\r\n\r\n    @ViewChild('colcontainer') container: ElementRef;\r\n    @ViewChild('okbtn') btnOk: ElementRef;\r\n    @ViewChild('inputWord') searchInput: ElementRef;\r\n\r\n    @ViewChild('schemeitems') schemeitemsEleRef: ElementRef;\r\n    @ViewChild('btnSchemeName') btnRef: ElementRef;\r\n\r\n    @ViewChild('gh') multiHeaderRef: ColumnTreeComponent;\r\n\r\n    @Output() formatChange = new EventEmitter();\r\n    @Output() fieldsChange = new EventEmitter();\r\n    @Output() submit = new EventEmitter();\r\n    /** åç»è¡¨å¤´ç¡®å®äºä»¶ */\r\n    @Output() submitForGroupHeader = new EventEmitter();\r\n    @Output() closed = new EventEmitter();\r\n    @Output() advanced = new EventEmitter();\r\n    @Output() canceld = new EventEmitter();\r\n\r\n    @Output() addNewScheme = new EventEmitter();\r\n    @Output() showSchemeList = new EventEmitter();\r\n    @Output() activeItemChange = new EventEmitter();\r\n\r\n    @Output() schemeChanged = new EventEmitter();\r\n\r\n    allCols = [];\r\n    columnType = 'all';\r\n\r\n    gridInstance: DatagridComponent;\r\n    localeSer: LocaleService;\r\n    isEn = false;\r\n\r\n    showSchemePanel = false;\r\n\r\n    switchValue = false;\r\n    // å½åæ¹æ¡\r\n    currentSchemeItem = null;\r\n\r\n    searchResultIsVisibleAll = { checkAll: false, unCheckAll: false };\r\n    defaultSchemeName = 'ç³»ç»é¢å¶';\r\n\r\n    \r\n    /** éç½®å¤è¡¨å¤´ç¸å³è®¾ç½® */\r\n    multiHeaderOptions: Partial<ColumnTreeOptions> = {};\r\n    // å¯ç¨å¤è¡¨å¤´\r\n    enableMultipleHeaders = false;\r\n\r\n    private messager: MessagerService;\r\n    private notify: NotifyService;\r\n\r\n    private prevSchemeItem = null;\r\n    \r\n    settings: SettingModel = {};\r\n\r\n    schemeSer: DatagridSchemeService = null;\r\n\r\n    noDisplyColumnTip = '';\r\n\r\n\r\n    constructor(private injector: Injector, public cd: ChangeDetectorRef) {\r\n        this.localeSer = this.injector.get(LocaleService, null);\r\n        this.messager = this.injector.get(MessagerService, null);\r\n        this.notify = this.injector.get(NotifyService, null);\r\n\r\n        this.noDisplyColumnTip = this.localeSer.getValue('datagrid-scheme.noDisplyColumnTip');\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const clsname = $event.target['className'] || '';\r\n        if (clsname.indexOf('f-datagrid-settings-simple-host') > -1) {\r\n            // éèä¾§è¾¹æ ï¼\r\n            if (this.clickToHidden) {\r\n                this.cancel();\r\n            }\r\n        }\r\n\r\n        this.showSchemePanel = false;\r\n    }\r\n\r\n    @HostListener('window:keydown.esc', ['$event'])\r\n    onEscKeydown($event) {\r\n        $event.stopPropagation();\r\n        if (!document.querySelector('modal-container')) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    @HostListener('window:keydown.enter', ['$event'])\r\n    onEnterKeydown($event) {\r\n        $event.stopPropagation();\r\n        if (!document.querySelector('modal-container')) {\r\n            this.onSubmitClick();\r\n        }\r\n    }\r\n\r\n    @HostListener('keydown', ['$event'])\r\n    onControlGKeydown($event: KeyboardEvent) {\r\n        if ($event.ctrlKey && !document.querySelector('modal-container')) {\r\n            const _key = $event.key.toLowerCase();\r\n            if (['g', 'r', 's'].includes(_key)) {\r\n                $event.preventDefault();\r\n                $event.stopPropagation();\r\n            }\r\n            if (_key === 'g') {\r\n                this.showAdvanced($event);\r\n            } else if (_key === 'r') {\r\n                this.onSettingReset();\r\n            } else if (_key === 's') {\r\n                this.searchInput.nativeElement.focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    private getCurrentSchemeSettings() {\r\n        if (this.currentSchemeItem && this.currentSchemeItem.queryConditionString) {\r\n            const schemeSettings = JSON.parse(this.currentSchemeItem.queryConditionString);\r\n            return schemeSettings[this.localeSer.localeId] as SettingModel;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // å¤æ­æ¯å¦å¯ç¨å¤è¡¨å¤´åè®¾ç½®\r\n        this.enableMultipleHeaders = this.gridInstance.enableSetMultiHeaders;\r\n        \r\n        // const options = this.gridInstance.dfs['_state'].initialOptions;\r\n        // if (options.columnFields && options.columnFields.length) {\r\n        //     this.allCols = options.columnFields.filter((f: any) => f.field !== '_datagrid-setting-control_');\r\n        // } else {\r\n        //     this.allCols = this.columns[0];\r\n        // }\r\n        this.allCols = this.columns[0];\r\n        \r\n        if (this.gridInstance.enableScheme) {\r\n            if (!this.prevSchemeItem) {\r\n                this.prevSchemeItem = cloneDeep(this.currentSchemeItem);\r\n            }\r\n            if ( this.currentSchemeItem) {\r\n                this.settings = this.getCurrentSchemeSettings() || {};\r\n            } else {\r\n                if (!this.settings || !Object.keys(this.settings).length) {\r\n                    this._reset2Default();\r\n                }\r\n            }\r\n        }\r\n        \r\n        const { multiHeaders } = this.settings;\r\n\r\n        this.multiHeaderOptions = { columns: this.columns, treeData: multiHeaders?multiHeaders.treeData: null };\r\n        if (!this.enableMultipleHeaders) {\r\n            if (this.settings && this.settings.viewColumns) {\r\n                this.fields = this.settings.viewColumns.filter(n => n != '_datagrid-setting-control_');\r\n                this.dirtySettings(true);\r\n            } else {\r\n                this.fields = this.getViewColumns();\r\n            }\r\n        }\r\n\r\n        this.container.nativeElement.focus();\r\n        this.searchResultIsVisibleAll = this.seachResultIsCheckAll();\r\n        this.defaultSchemeName = this.localeSer.getValue('datagrid-scheme.syspreset') || this.gridInstance.defaultSchemeName;\r\n\r\n        if (this.schemeSer) {\r\n\r\n            if (this.settings && !Object.keys(this.settings).length) {\r\n                if (this.gridInstance.enableScheme) {\r\n                    this.resetToDefault();\r\n                } else {\r\n                    this.settings = this.getCurrentSettings();\r\n                }\r\n            }\r\n            this.schemeSer.setSettings(this.settings);\r\n\r\n            this.defaultSettings();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // console.log(this.fields);\r\n    }\r\n\r\n    private getViewColumns() {\r\n        // å¤è¡¨å¤´\r\n        let visibleCls = [];\r\n        if (this.columns.length > 1 ) {\r\n            this.columns.forEach(cols => {\r\n                visibleCls = visibleCls.concat(this._getViewColumns(cols));\r\n            });\r\n        } else {\r\n            visibleCls = this.columns[0].filter(n => (n.visible || n.visible === undefined));\r\n        }\r\n\r\n        return visibleCls.map(n => n.field);\r\n    }\r\n\r\n    private _getViewColumns(cols: any[]) {\r\n        return cols.filter(c => !c.colspan && (c.visible || c.visible === undefined));\r\n    }\r\n    \r\n    // æ ¹æ®åçç±»åè¿è¡ç­éè¿æ»¤ï¼\r\n    // all ææå\r\n    // visible å¯è§å\r\n    // hidden éèå\r\n    // group åç»å\r\n    filterColumns(searchWords = '') {\r\n        let cols = [];\r\n\r\n        if (this.switchValue) {\r\n            cols = this.columns[0].filter(n => this.fields.indexOf(n.field) > -1);\r\n        } else {\r\n            cols = this.columns[0];\r\n        }\r\n\r\n        if (searchWords) {\r\n            cols = cols.filter(c => c.title.toLowerCase().indexOf(searchWords.toLowerCase()) > -1);\r\n        }\r\n\r\n        this.allCols = cols;\r\n        this.searchResultIsVisibleAll = this.seachResultIsCheckAll(this.allCols.filter(n => n.visible));\r\n    }\r\n\r\n    private seachResultIsCheckAll(searchFields?: any) {\r\n        const allColsLength = this.allCols.filter(n => n.field != '_datagrid-setting-control_').length;\r\n        let fieldsLength = this.fields.filter(n => n !=  '_datagrid-setting-control_').length;\r\n\r\n        if (searchFields) {\r\n            fieldsLength = searchFields.length;\r\n        }\r\n\r\n        return {\r\n            checkAll: allColsLength && allColsLength === fieldsLength,\r\n            unCheckAll:!searchFields ? !this.fields.length : !fieldsLength\r\n        };\r\n    }\r\n\r\n\r\n    private onFieldsChanged() {\r\n        if (!this.gridInstance.enableScheme) {\r\n            this.fieldsChange.emit(this.fields);\r\n        }\r\n    }\r\n\r\n    onDblClick($event, col) {\r\n        this.onCheckboxClick($event, col);\r\n    }\r\n\r\n    onCheckboxClick($event, col) {\r\n        $event.stopPropagation();\r\n        this.showSchemePanel = false;\r\n        let checked = false;\r\n        const index = this.fields.indexOf(col.field);\r\n        if (index === -1) {\r\n            this.fields.push(col.field);\r\n            checked = true;\r\n        } else {\r\n            this.fields.splice(index, 1);\r\n            checked = false;\r\n        }\r\n\r\n        this.columns[0].forEach(f => {\r\n            f.visible = this.fields.indexOf(f.field) > -1;\r\n        });\r\n\r\n        this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n        \r\n        const _fields = this.allCols.filter(n => n.visible).map(n => n.field);\r\n        this.searchResultIsVisibleAll = this.seachResultIsCheckAll(_fields);\r\n      \r\n        this.dirtySettings(true);\r\n        this.onFieldsChanged();\r\n    }\r\n\r\n    searchColumn($event) {\r\n        this.switchValue = false;\r\n        const txt = $event.target.value;\r\n        this.filterColumns(txt);\r\n    }\r\n\r\n    onFieldDrop(fieldInfo, txt, ulElRef: any) {\r\n        this.showSchemePanel = false;\r\n        const { removedIndex, addedIndex } = fieldInfo;\r\n\r\n        const moveItem = this.allCols[removedIndex];\r\n        const targetItem = this.allCols[addedIndex];\r\n\r\n        const moveItemIndex = this.columns[0].findIndex(n => n.field === moveItem.field);\r\n        const targetItemIndex = this.columns[0].findIndex(n => n.field === targetItem.field);\r\n\r\n        const removedItem = this.columns[0].splice(moveItemIndex, 1);\r\n        this.columns[0].splice(targetItemIndex, 0, ...removedItem);\r\n\r\n        this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n\r\n        this.onFieldsChanged();\r\n        this.filterColumns(txt);\r\n    }\r\n\r\n    /**\r\n     * 0: 1ä¸ªä¹æ²¡æéä¸­ï¼ 1: å¨é¨éä¸­ï¼ 2: æéä¸­çä¹ææ²¡éä¸­ç\r\n     */\r\n    private getCheckAllState() {\r\n        if (!this.searchInput.nativeElement.value) {\r\n            if (this.fields.length === 0) {\r\n                return 0;\r\n            } else {\r\n                if (this.fields.length === this.columns[0].length) {\r\n                    return 1;\r\n                }\r\n                return 2;\r\n            }\r\n        } else {\r\n            const visibleLen = this.allCols.filter(n => n.visible).length;\r\n            if (visibleLen === this.allCols.length) {\r\n                return 1;\r\n            } else {\r\n                if (visibleLen < this.allCols.length) {\r\n                    if (visibleLen === 0) {\r\n                        return 0\r\n                    }\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // å¨é\r\n    onCheckAllClick($event: MouseEvent, txt) {\r\n        $event.stopPropagation();\r\n        if (!this.allCols || !this.allCols.length) {\r\n            return;\r\n        }\r\n        this.showSchemePanel = false;\r\n        const state = this.getCheckAllState();\r\n\r\n        const isCheckAll = state === 0 || state === 2;\r\n\r\n        let _fields = null;\r\n        if (!txt) {\r\n            this.columns[0].forEach(n => n.visible = isCheckAll);\r\n        } else {\r\n            this.columns[0].forEach(n => {\r\n                const item = this.allCols.find(a => n.field == a.field);\r\n                if (item) {\r\n                    n.visible = isCheckAll;\r\n                    item.visible = isCheckAll;\r\n                }\r\n            });\r\n            _fields = this.allCols.filter(n => n.visible).map(n => n.field);\r\n        }\r\n        this.fields = this.columns[0].filter(n => n.visible).map(n => n.field);\r\n        \r\n        this.searchResultIsVisibleAll = this.seachResultIsCheckAll(!txt ? null: _fields);\r\n\r\n        this.dirtySettings(true);\r\n        this.cd.detectChanges();\r\n        this.onFieldsChanged();\r\n        // this.filterColumns(txt);\r\n    }\r\n\r\n    close($event?: MouseEvent) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.closed.emit();\r\n    }\r\n\r\n    cancel($event?: MouseEvent) {\r\n        this.currentSchemeItem = this.prevSchemeItem;\r\n        // this.schemeChanged.emit(this.prevSchemeItem);\r\n        this.close($event);\r\n        this.canceld.emit();\r\n    }\r\n\r\n    // æå¼é«çº§è®¾ç½®çªå£\r\n    showAdvanced($event) {\r\n        this.close($event);\r\n        \r\n        this.settings = this.getCurrentSettings();\r\n\r\n        if (this.enableMultipleHeaders) {\r\n            if (this.multiHeaderRef) {\r\n                this.settings.multiHeaders = this.multiHeaderRef.getSettings();\r\n            }\r\n        }    \r\n        this.advanced.emit({ viewFields: this.fields, settings: this.settings, columns: this.columns });\r\n    }\r\n\r\n    // æ¢å¤é»è®¤\r\n    onSettingReset($event?: any) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this.showSchemePanel = false;\r\n        const restorDefaultText = this.localeSer.getValue('datagrid.settings.restoreDefaultSettingsText') || 'æ¨ç¡®å®è¦æ¢å¤é»è®¤è®¾ç½®åï¼';\r\n        this.messager.confirm(restorDefaultText, 2035).subscribe((t: boolean) => {\r\n            if (t) {\r\n                this.resetToDefault();\r\n                this.dirtySettings(true);\r\n\r\n                this.searchResultIsVisibleAll = this.seachResultIsCheckAll();\r\n            }\r\n        });\r\n    }\r\n\r\n    resetToDefault() {\r\n        if (this.enableMultipleHeaders) {\r\n            this._reset2DefalutFormMultiHeaders()\r\n        } else {\r\n            this._reset2Default();\r\n        }\r\n    }\r\n\r\n\r\n    private _reset2DefalutFormMultiHeaders() {\r\n        const { settings, multiHeaderOptions } = reset2DefaultForMultiHeaders(this.gridInstance);\r\n        this.settings = settings,\r\n        this.multiHeaderOptions = multiHeaderOptions;\r\n    }\r\n\r\n\r\n    private _reset2Default() {\r\n        const options = this.gridInstance.dfs['_state'].initialOptions;\r\n        if (options.columnFields && options.columnFields.length) {\r\n\r\n            const newColumns = [];\r\n            options.columnFields.forEach(c => {\r\n                if (c.field !== '_datagrid-setting-control_') {\r\n                    const col = this.columns[0].find((n: any) => n.field === c.field);\r\n                    if (col) {\r\n                        col.visible = c.visible;\r\n                        col.halign = c.halign;\r\n                        col.align = c.align;\r\n                        col.width = c.width;\r\n                        col.footer = {...c.footer || {}};\r\n                        col.groupFooter = {...c.groupFooter || {}};\r\n                        col.title = c.title;\r\n                        col.fixed = c.fixed || '';\r\n                        newColumns.push(col);\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.columns = [newColumns];\r\n        }\r\n\r\n        this.allCols = this.columns[0];\r\n        this.settings = {};\r\n        this.fields = this.getViewColumns();\r\n        this.settings.viewColumns = this.fields;\r\n        this.settings.columnFormat = [...this.columns[0]];\r\n        if (options.sort) {\r\n            const sortOrders = options.sort.sortOrder? options.sort.sortOrder.split(',') : [];\r\n            const sortNames = options.sort.sortName ? options.sort.sortName.split(',') : [];\r\n            this.settings.sortInfo = { sortName: sortNames, sortOrder:  sortOrders };\r\n        } else {\r\n            this.settings.sortInfo = {};\r\n        }\r\n        this.settings.groupField =  options.groupField ? options.groupField.split(',') : [];\r\n        this.settings.expandGroupRows = !!options.expandGroupRows;\r\n    }\r\n\r\n    private getCurrentSettings() {\r\n        let _settings: any = {};\r\n        _settings.viewColumns = this.fields;\r\n\r\n        if (!this.enableScheme) {\r\n            if (!_settings.columnFormat) {\r\n                _settings.columnFormat = [...this.columns[0]];\r\n            }\r\n\r\n            if (!_settings.sortInfo) {\r\n                _settings.sortInfo = {\r\n                    sortName: this.gridInstance.sortName ? this.gridInstance.sortName.split(',') : [],\r\n                    sortOrder:  this.gridInstance.sortOrder ? this.gridInstance.sortOrder.split(',') : []\r\n                };\r\n            }\r\n\r\n            if (_settings.groupField === undefined) {\r\n                _settings.groupField = this.gridInstance.groupField ? this.gridInstance.groupField.split(',') : [];\r\n            }\r\n        } else {\r\n            _settings = Object.assign(this.settings|| {},  _settings);\r\n        }\r\n\r\n        if (_settings.expandGroupRows == undefined) {\r\n            _settings.expandGroupRows = this.gridInstance['expandGroupRows'];\r\n        }\r\n\r\n        return _settings;\r\n    }\r\n\r\n\r\n    // ç¡®å®æé®ç¹å»äºä»¶\r\n    onSubmitClick($event?: any) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        if (!this.enableMultipleHeaders) {\r\n            if (!this.fields || !this.fields.length) {\r\n                this.notify.warning(this.noDisplyColumnTip);\r\n                return;\r\n            }\r\n        } \r\n\r\n        this.prevSchemeItem = this.currentSchemeItem;\r\n\r\n        this.showSchemePanel = false;\r\n\r\n        this.settings = this.getCurrentSettings();\r\n\r\n        // å¯ç¨å¤è¡¨å¤´æ¶ï¼è§¦åæ°çäºä»¶\r\n        if (this.enableMultipleHeaders) {\r\n            if (this.multiHeaderRef) {\r\n                const _multiHeaders = this.multiHeaderRef.getSettings();\r\n                if (!multiHeadersHasDataFields(_multiHeaders.viewCols)) {\r\n                    this.notify.info(this.noDisplyColumnTip);\r\n                    return;\r\n                }\r\n\r\n                mergeSortInfo(_multiHeaders.viewCols, this.settings.sortInfo);\r\n                this.settings.multiHeaders = _multiHeaders;\r\n            }\r\n\r\n\r\n            this.submitForGroupHeader.emit({\r\n                content: this.settings,\r\n                close: this.close.bind(this),\r\n                target: this.btnOk.nativeElement,\r\n                currentScheme: this.currentSchemeItem\r\n            });\r\n        } else {\r\n            this.submit.emit({\r\n                content: this.settings,\r\n                close: this.close.bind(this),\r\n                target: this.btnOk.nativeElement,\r\n                currentScheme: this.currentSchemeItem\r\n            });\r\n        }\r\n    }\r\n\r\n    collectSettings() {\r\n       \r\n        this.settings = this.getCurrentSettings();\r\n\r\n        // å¯ç¨å¤è¡¨å¤´æ¶ï¼è§¦åæ°çäºä»¶\r\n        if (this.enableMultipleHeaders) {\r\n            if (this.multiHeaderRef) {\r\n                const _multiHeaders = this.multiHeaderRef.getSettings();\r\n                if (!multiHeadersHasDataFields(_multiHeaders.viewCols)) {\r\n                    this.notify.info(this.noDisplyColumnTip);\r\n                    return;\r\n                }\r\n\r\n                mergeSortInfo(_multiHeaders.viewCols, this.settings.sortInfo);\r\n                this.settings.multiHeaders = _multiHeaders;\r\n            }\r\n        }\r\n\r\n        \r\n        return { ...this.settings };\r\n    }\r\n\r\n    // æ¾ç¤ºä¸ææ¹æ¡åè¡¨\r\n    onChooseScheme($event) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this.showSchemePanel = !this.showSchemePanel;\r\n\r\n        setTimeout(() => {\r\n            if (this.schemeitemsEleRef && this.currentSchemeItem) {\r\n                const itemEl = this.schemeitemsEleRef.nativeElement.querySelector(`#schemeitem_${this.currentSchemeItem.id}`);\r\n                if (itemEl) {\r\n                    if (itemEl.scrollIntoViewIfNeeded) {\r\n                        itemEl.scrollIntoViewIfNeeded();\r\n                    } else {\r\n                        itemEl.scrollIntoView();\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // ä»æ¾ç¤ºå¯è§å\r\n    onlySeeVisibleColumns($event, searchWords) {\r\n        this.switchValue = $event;\r\n        this.filterColumns(searchWords);\r\n    }\r\n\r\n    refresh() {\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    hidePanel() {\r\n        this.showSchemePanel = false;\r\n        this.refresh();\r\n    }\r\n\r\n    // æ°å¢æ¹æ¡\r\n    onNewSchemeClick($event, saveas = 'new') {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.hidePanel();\r\n        this.addNewScheme.emit({ type: saveas || 'new' });\r\n\r\n        \r\n    }\r\n\r\n    // æ¾ç¤ºæ¹æ¡åè¡¨ç®¡ççªå£\r\n    onShowSchemeList($event) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.hidePanel();\r\n        this.showSchemeList.emit();\r\n    }\r\n\r\n\r\n    private schemeChangedForSingleHeader(schemeSettings) {\r\n        if (!schemeSettings) {\r\n            this._reset2Default();\r\n        } else {\r\n            this.settings = schemeSettings;\r\n            this.fields = schemeSettings.viewColumns;\r\n            this.columns[0].forEach(f => {\r\n                f.visible = this.fields.indexOf(f.field) > -1;\r\n            });\r\n        }\r\n\r\n        this.searchResultIsVisibleAll = this.seachResultIsCheckAll();\r\n    }\r\n\r\n    private schemeChangedForMultiHeaders(schemeSettings) {\r\n        if (schemeSettings) {\r\n            this.settings = schemeSettings;\r\n            const options = this.gridInstance.dfs['_state'].initialOptions;\r\n            this.multiHeaderOptions = {\r\n                treeData: this.settings.multiHeaders? this.settings.multiHeaders.treeData: null,\r\n                columns: options.groupHeaderFields\r\n            }\r\n        } else {\r\n            this._reset2DefalutFormMultiHeaders();\r\n        }\r\n    }\r\n\r\n    // æ¹æ¡ç¹å»\r\n    onSchemeItemClick($event, item) {\r\n        setTimeout(() => {\r\n            this.currentSchemeItem = item;\r\n            this.showSchemePanel = false;\r\n\r\n            let schemeSettings = null;\r\n            if (item && item.queryConditionString) {\r\n                schemeSettings = JSON.parse(item.queryConditionString);\r\n                schemeSettings = schemeSettings[this.localeSer.localeId];\r\n            }\r\n\r\n            if (this.enableMultipleHeaders) {\r\n                this.schemeChangedForMultiHeaders(schemeSettings);\r\n            } else {\r\n                this.schemeChangedForSingleHeader(schemeSettings);\r\n            }\r\n\r\n            this.schemeSer.setSettings(this.settings);\r\n\r\n            this.defaultSettings(item);\r\n\r\n            this.schemeChanged.emit(item);\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    /** å¤è¡¨å¤´é»è®¤è®¾ç½® */\r\n    private defaultSettings(item?: any) {\r\n        if (this.enableMultipleHeaders) {\r\n            if (!item || (this.settings && this.settings.multiHeaders && !this.settings.multiHeaders.treeData)) { // ç³»ç»é¢ç½®\r\n                setTimeout(() => {\r\n                    this.settings.multiHeaders = this.multiHeaderRef.getSettings();\r\n                    this.schemeSer.setSettings(this.settings);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    dirtySettings(flag) {\r\n        // this.isChanged = flag;\r\n    }\r\n\r\n    clearSearch($event, input) {\r\n        if (input && input.value) {\r\n            this.filterColumns('');\r\n            input.value = '';\r\n        }\r\n    }\r\n}\r\n","import { DataColumn } from '@farris/ui-datagrid';\r\nimport { TreeNode } from '@farris/ui-treetable';\r\n\r\nexport interface SettingModel {\r\n    columnFormat?: DataColumn[];\r\n    viewColumns?: string[];\r\n    groupField?: Array<string> | string;\r\n    sortInfo?: {\r\n        sortName?: string[];\r\n        sortOrder?: string[];\r\n    }\r\n    expandGroupRows?: boolean;\r\n    // å¤è¡¨å¤´è®¾ç½®\r\n    multiHeaders?: {\r\n        viewCols: Array<Array<Partial<DataColumn>>>,\r\n        treeData: Array<TreeNode>\r\n    };\r\n};\r\n\r\n\r\n\r\nexport interface DatagridSchemeModel {\r\n    id?: string;\r\n     /** è¡¨åä¸­è®°å½Datagridæ¹æ¡åè¡¨çIDï¼çè§£ä¸ºç±»å«ï¼è·åDatagrid æ¹æ¡åè¡¨æ¶æ ¹æ®æ­¤IDè¿è¡æ¥è¯¢ */\r\n    belongId: string;\r\n    code?: string;\r\n    /** æ¯å¦ä¸ºé»è®¤ï¼ 1 é»è®¤ï¼0 éé»è®¤ */\r\n    isDefault?: boolean;\r\n    /** æ¯å¦ä¸ºç³»ç»é¢å¶ */\r\n    isSystem?: boolean;\r\n    type?: 'private'|'public'|'org'\r\n    /** æ¹æ¡åç§° */\r\n    name: string;\r\n    /** æ¹æ¡åå®¹JSONä¸² */\r\n    queryConditionString?: string;\r\n    /** åå»ºäºº */\r\n    userId?: string;\r\n    userName?: string;\r\n    userCode?: string;\r\n    /* å¯åºåéç½®å±äºåè¡¨è¿æ¯ç­éæ¹æ¡, ç­éæ¹æ¡ä¸ºé»è®¤å¼query-scheme-1; åè¡¨ä¸ºå¶ä» */\r\n    extendId?: string;\r\n    /** ç¨äºå­æ¾ç»ç»å¬å±éç½®å±äºåªäºç»ç»ï¼ä»¥ç»ç»éæ©ç»ä»¶çè¿åå¼ä¸ºå */\r\n    extendInfo?: any[];\r\n}\r\n\r\n\r\nexport interface SetPublicSchemeModel {\r\n    id: string;\r\n    businessId: string;\r\n    code: string;\r\n    name: string;\r\n}\r\n\r\nexport interface SetOrgAuthSchemeModel {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n}\r\n\r\nexport interface SchemeAuthModel {\r\n    success: boolean;\r\n    errorMessage?: any;\r\n    authOperationData: SetPublicSchemeModel[];\r\n    authOrganizationData: SetOrgAuthSchemeModel[];\r\n    currentUserId?: string;\r\n}\r\n\r\nexport interface BatchScheme {\r\n    belongId: string;\r\n    defaultId: string;\r\n    deletedIds: string[];\r\n}\r\n\r\nexport interface SchemeState {\r\n    list?: DatagridSchemeModel[];\r\n    current?: null;\r\n}\r\n\r\nexport interface DgSchemeState {\r\n    [gridId: string]: SchemeState;\r\n}\r\n\r\n\r\nexport interface ColumnTreeOptions {\r\n    columns?: Array<Array<Partial<DataColumn>>>,\r\n    treeData?: Array<TreeNode>\r\n}\r\n\r\nexport const IS_MULTI_HEADER_STRING = '-$MULTIHEADER$';","import { Injector } from \"@angular/core\";\r\nimport { appendPerfixForUri, IdService } from \"@farris/ui-common\";\r\nimport { Observable, of, Subject } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { BatchScheme, DatagridSchemeModel, DgSchemeState, IS_MULTI_HEADER_STRING, SchemeAuthModel, SchemeState, SettingModel } from \"./setting.model\";\r\nimport { cloneDeep } from \"lodash-es\";\r\n\r\n\r\n/** ä¿å­æ¹æ¡API */\r\nconst SCHEME_WEBAPI = '/api/runtime/sys/v1.0/querysolution';\r\n/** è·åæ¹æ¡åè¡¨API */\r\nconst SCHEME_WEBAPI_QUERY = `${SCHEME_WEBAPI}/belongId/`;\r\n/** æ¹æ¡åè¡¨ç®¡ç- è®¾é»è®¤ãå é¤ API */\r\nconst SCHEME_WEBAPI_UPDATE = `${SCHEME_WEBAPI}/batch`;\r\n/** æééªè¯ */\r\nconst SCHEME_WEBAPI_Auth = '/api/runtime/sys/v1.0/querysolution/componentType/Datagrid';\r\n\r\nconst LANGUAGE_WEBAPI = '/api/runtime/sys/v1.0/loginInfo?infoType=supportedLanguage';\r\n\r\n\r\nexport class DatagridSchemeService {\r\n    private restService = null;\r\n    private state: DgSchemeState = {};\r\n    private perfixStr = '';\r\n    schemeList$ = new Subject();\r\n\r\n    private schemeApi = {\r\n        SCHEME_WEBAPI,\r\n        /** è·åæ¹æ¡åè¡¨API */\r\n        SCHEME_WEBAPI_QUERY,\r\n        /** æ¹æ¡åè¡¨ç®¡ç- è®¾é»è®¤ãå é¤ API */\r\n        SCHEME_WEBAPI_UPDATE,\r\n        /** æééªè¯ */\r\n        SCHEME_WEBAPI_Auth,\r\n\r\n        LANGUAGE_WEBAPI\r\n    };\r\n\r\n    private schemeKey: any = {};\r\n\r\n    private currentSchemeSettings = null;\r\n\r\n    constructor(private inject: Injector) {\r\n    }\r\n\r\n    setUriPerfix(perfixStr: string) {\r\n        this.perfixStr = perfixStr || '';\r\n    }\r\n\r\n    update(d: SchemeState, gridId: string) {\r\n        if (!this.state[gridId]) {\r\n            this.state[gridId] = {};\r\n        }\r\n        this.state[gridId] = Object.assign(this.state[gridId], d);\r\n    }\r\n\r\n    setRestService(httpSer: any) {\r\n        if (httpSer && httpSer['befRepository']) {\r\n            this.restService = httpSer['befRepository']['restService'];\r\n        }\r\n    }\r\n\r\n    private mergeUri(uri, perfix) {\r\n        return appendPerfixForUri ? appendPerfixForUri(uri, perfix): uri;\r\n    }\r\n\r\n    private getWebFormKey() {\r\n        const webformHash = window.location.hash.split('?')[0];\r\n        return webformHash.substring(webformHash.lastIndexOf('/') + 1);\r\n    }\r\n\r\n    destory(gridId: string) {\r\n        delete this.schemeKey[gridId];\r\n    }\r\n\r\n    getSchemeKey(gridId: string) {\r\n        if (!this.schemeKey[gridId]) {\r\n            const formKey = this.getWebFormKey();\r\n            this.schemeKey[gridId] = `${formKey}_DatagridScheme_${gridId}`;\r\n        }\r\n        return this.schemeKey[gridId];\r\n    }\r\n\r\n    getSchemeList(gridID: string, isMultiHeader = false): Observable<DatagridSchemeModel[]> {\r\n        let uri = this.schemeApi.SCHEME_WEBAPI_QUERY + this.getBelongId(gridID, isMultiHeader);\r\n        uri = this.mergeUri(uri, this.perfixStr);\r\n        if (this.restService) {\r\n            return this.restService.invoke(uri, 'GET', null, null, false);\r\n        }\r\n    }\r\n\r\n    updateSchemeData(gridID: string, schemeData) {\r\n        let schemeList = this.getStateValue(gridID, 'list');\r\n        schemeList = schemeList.filter(n => n.id !== schemeData.id);\r\n        schemeList.push(schemeData);\r\n        this.setSchemeList(gridID, schemeList);\r\n    }\r\n\r\n    private getBelongId(gridID: string, isMultiHeader = false) {\r\n        let id = this.getSchemeKey(gridID);\r\n        if (isMultiHeader) {\r\n            id = id + IS_MULTI_HEADER_STRING;\r\n        }\r\n\r\n        return id;\r\n    }\r\n\r\n    saveScheme(scheme: DatagridSchemeModel, gridID: string, isUpdate = false, isMultiHeader = false) {\r\n        if (this.restService) {\r\n            const httpMethod = isUpdate ? 'PUT': 'POST';\r\n            scheme.belongId = this.getBelongId(gridID, isMultiHeader);\r\n\r\n            const uri = this.mergeUri(this.schemeApi.SCHEME_WEBAPI, this.perfixStr);\r\n            return this.restService.invoke(uri, httpMethod, null, { body: scheme}, false);\r\n        }\r\n    }\r\n\r\n    updateScheme(param: BatchScheme, gridID: string, isMultiHeader = false): Observable<any> {\r\n        if (!param) {\r\n            return of(false);\r\n        }\r\n        const belongId = this.getBelongId(gridID, isMultiHeader);\r\n        param.belongId = belongId\r\n\r\n        if (param.belongId) {\r\n            const uri = this.mergeUri(this.schemeApi.SCHEME_WEBAPI_UPDATE, this.perfixStr);\r\n            return this.restService.invoke(uri, 'PUT', null, {body: param}, false);\r\n        }\r\n    }\r\n\r\n    getStateValue(gridId, ...statePro) {\r\n        const dgState = this.state[gridId];\r\n        if (dgState) {\r\n            if (statePro && statePro.length) {\r\n                return statePro.reduce((r, c) => {\r\n                    return r[c];\r\n                }, dgState)\r\n            }\r\n\r\n            return dgState;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private updateStateValue(gridId, propertyName, value) {\r\n        this.update({[propertyName]: value}, gridId);\r\n    }\r\n\r\n    setSchemeList(gridId, newSchemeList) {\r\n        this.updateStateValue(gridId, 'list', newSchemeList);\r\n        this.schemeList$.next(newSchemeList);\r\n    }\r\n\r\n    hasSchemeName(gridId, schemeName: any) {\r\n        const schemeList = this.getStateValue(gridId, 'list');\r\n        if (!schemeList || !schemeList.length) {\r\n            return false;\r\n        }\r\n\r\n        if (typeof schemeName === 'string') {\r\n            return !!schemeList.find(n => n.name === schemeName.trim());\r\n        } else {\r\n            if (typeof schemeName === 'object') {\r\n                const replayNames = [];\r\n                schemeList.forEach(n => {\r\n                    if (n.name) {\r\n                        const nameObj = JSON.parse(n.name);\r\n                        // const currentNames = Object.values(nameObj);\r\n                        for(let k in schemeName) {\r\n                            if (nameObj[k] === schemeName[k]) {\r\n                                replayNames.push(k);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return replayNames;\r\n            }\r\n        }\r\n    }\r\n\r\n    checkAuthority(): Observable<SchemeAuthModel> {\r\n        const uri = this.mergeUri(this.schemeApi.SCHEME_WEBAPI_Auth, this.perfixStr);\r\n        return this.restService.invoke(uri, 'GET', null, null, false);\r\n    }\r\n\r\n    getLanguages() {\r\n        if (this.restService) {\r\n            const uri = this.mergeUri(this.schemeApi.LANGUAGE_WEBAPI, this.perfixStr);\r\n            return this.restService.invoke(uri, 'GET', null, null, false);\r\n        } else {\r\n            return of([]);\r\n        }\r\n    }\r\n\r\n    createSchemeTaskID() {\r\n        const idService: IdService = new IdService();\r\n        this['SCHEME_TASK_ID'] = idService.guid();\r\n        this.currentSchemeSettings = null;\r\n    }\r\n\r\n\r\n    setSettings(configs: any) {\r\n        this.currentSchemeSettings = {\r\n            taskid: this['SCHEME_TASK_ID'],\r\n            values: cloneDeep(configs)\r\n        }\r\n    }\r\n\r\n    getSettings() {\r\n        return this.currentSchemeSettings;\r\n    }\r\n\r\n    isSchemeChanged(nowSettings: SettingModel, isMultiHeader: boolean) : boolean {\r\n        let { sortInfo, viewColumns, groupField, columnFormat, expandGroupRows, multiHeaders } = nowSettings;\r\n        let { sortInfo: sortInfo1, viewColumns: viewColumns1, groupField: groupField1, columnFormat: columnFormat1, expandGroupRows: expandGroupRows1, multiHeaders: multiHeaders1 } = this.getSettings().values;\r\n\r\n        const checkSortInfo = (_sortInfo) => {\r\n            if (!_sortInfo || !Object.keys(_sortInfo).length) {\r\n                _sortInfo = {\r\n                    sortName: [],\r\n                    sortOrder: []\r\n                };\r\n            }\r\n\r\n            return _sortInfo;\r\n        }\r\n        sortInfo = checkSortInfo(sortInfo);\r\n        sortInfo1 = checkSortInfo(sortInfo1);\r\n\r\n        const checkGroupField = (_groupField) => {\r\n            if (!_groupField) {\r\n                _groupField = [];\r\n            }\r\n            return _groupField;\r\n        }\r\n        groupField = checkGroupField(groupField);\r\n        groupField1 = checkGroupField(groupField1);\r\n\r\n\r\n        let nowconfig, initConfig;\r\n        if (isMultiHeader) {\r\n            nowconfig =  { sortInfo, expandGroupRows, groupField, multiHeaders };\r\n            initConfig  =  { sortInfo: sortInfo1, expandGroupRows: expandGroupRows1, groupField:groupField1, multiHeaders: multiHeaders1 };\r\n        } else {\r\n            nowconfig =  { columnFormat,expandGroupRows,groupField, sortInfo, viewColumns };\r\n            initConfig  =  { \r\n                columnFormat: columnFormat1,\r\n                expandGroupRows: expandGroupRows1, \r\n                groupField:groupField1,\r\n                sortInfo: sortInfo1,\r\n                viewColumns: viewColumns1\r\n            };\r\n        }\r\n\r\n        const _clearData = (data) => {\r\n            return JSON.stringify(data).replace(/UNFIXED/g, '').replace(/\"calculationType\":-1,/g, '').replace(/\"calculationType\":-1/g, '');\r\n        }\r\n\r\n        return _clearData(nowconfig) != _clearData(initConfig);\r\n    }\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'new-scheme',\r\n    templateUrl: './newscheme.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NewSchemeComponent implements OnInit {\r\n\r\n    @ViewChild('header') header: ElementRef<any>;\r\n\r\n    @Input() dataPermissionIds = [];\r\n\r\n    @Output() closeModal = new EventEmitter();\r\n    @Output() submitModal = new EventEmitter();\r\n    @Output() checkAuthority = new EventEmitter();\r\n\r\n    schemeInfo = {\r\n        name: '',\r\n        isDefault: false,\r\n        type: 'private',\r\n        orgids: ''\r\n    }\r\n\r\n    schemeType = 'private';\r\n\r\n    noPublicAuthority = false;\r\n    noOrgAuthority = false;\r\n\r\n    languages = [{ code: 'zh-CHS', name: 'ä¸­æç®ä½', default: true },{ code: 'en', name: 'English' },{ code: 'zh-CHT', name: 'ä¸­æç¹ä½'}];\r\n    nameMaxLength = { 'zh-CHS': 9, 'zh-CHT': 9, en: 20 };\r\n    \r\n    constructor(private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    close($event) {\r\n        this.closeModal.emit();\r\n    }\r\n\r\n    submit($event) {\r\n        this.submitModal.emit(this.schemeInfo);\r\n    }\r\n\r\n    onCancelClick($event) {\r\n        this.close($event);\r\n    }\r\n\r\n    onSelectedOrg($event) {\r\n        if ($event.selections && $event.selections.length ) {\r\n            let orgids = $event.selections.map(n => n.orgId);\r\n            this.schemeInfo.orgids = orgids;\r\n        }\r\n    }\r\n\r\n    onSetRangeType($event: MouseEvent, val) {\r\n        $event.stopPropagation();\r\n        this.schemeType = val;\r\n        if (val === 'public' || val === 'org') {\r\n            this.checkAuthority.emit({ value: val, schemeInfo: this.schemeInfo });\r\n        } else {\r\n            this.schemeInfo.type = val;\r\n        }\r\n    }\r\n\r\n    refresh(hasAuthority = { public: true, org: true }) {\r\n        this.schemeInfo = {...this.schemeInfo};\r\n        this.schemeType = this.schemeInfo.type;\r\n        this.noPublicAuthority = !hasAuthority.public;\r\n        this.noOrgAuthority = !hasAuthority.org;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    getSelectedId($event) {\r\n        if ($event.selections &&$event.selections.length) {\r\n            this.schemeInfo.orgids = $event.selections.map(n => n.orgId);\r\n        } else {\r\n            this.schemeInfo.orgids = '';\r\n        }\r\n    }\r\n\r\n    clearAllOrgs() {\r\n        this.schemeInfo.orgids = '';\r\n    }\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { getMultilingualValue } from '../getValueWithLocaleId';\r\n\r\n@Component({\r\n    selector: 'scheme-list',\r\n    templateUrl: 'scheme-list.component.html'\r\n})\r\n\r\nexport class SchemeListComponent implements OnInit {\r\n\r\n    @Input() items = [];\r\n    \r\n    @Output() closeModal = new EventEmitter();\r\n    @Output() submitModal = new EventEmitter();\r\n\r\n    @Input() removeItem = true;\r\n\r\n    @Input() currentSchemeId = '';\r\n    \r\n    @ViewChild('header') header: ElementRef<any>;\r\n    @ViewChild('schemeName') schemeName: TemplateRef<any>;\r\n    @ViewChild('schemeIsDefault') schemeIsDefault: TemplateRef<any>;\r\n    @ViewChild('btnDel') btnDel: TemplateRef<any>;\r\n    @ViewChild('dg') dg: DatagridComponent;\r\n\r\n    columns = [];\r\n\r\n    currentUserId = '';\r\n   \r\n    changes: {\r\n        defaultId?: string,\r\n        deletedIds?: any[]\r\n    } = null;\r\n    constructor(private cd: ChangeDetectorRef, private localeSer: LocaleService, private injector: Injector) { }\r\n\r\n    ngOnInit(): void {\r\n\r\n        const colName = this.localeSer.getValue('datagrid-scheme.columns.name') || 'åç§°';\r\n        const colType = this.localeSer.getValue('datagrid-scheme.columns.type') || 'å±æ§';\r\n        const colDefault = this.localeSer.getValue('datagrid-scheme.columns.isDefault') || 'é»è®¤';\r\n        const colCreator = this.localeSer.getValue('datagrid-scheme.columns.username') || 'åå»ºäºº';\r\n        const colMgr = this.localeSer.getValue('datagrid-scheme.columns.mgr') || 'ç®¡ç';\r\n\r\n        const publicTxt = this.localeSer.getValue('datagrid-scheme.isPublic') || 'å¬å±';\r\n        const privateTxt = this.localeSer.getValue('datagrid-scheme.isPrivate') || 'ä¸ªäºº';\r\n        const orgTxt = this.localeSer.getValue('datagrid-scheme.isOrg') || 'ç»ç»';\r\n\r\n\r\n        this.columns = [\r\n            // {field: 'name', title: 'åç§°', width: 150, template: this.schemeName},\r\n            {field: 'name', title: colName, width: 150, formatter: (v) => {\r\n                return getMultilingualValue(JSON.parse(v), this.localeSer.localeId);\r\n            }},\r\n            {field: 'type', title: colType, width: 50, halign: 'center', align: 'center', formatter: (v, d) => {\r\n                switch(v) {\r\n                    case 'public':\r\n                        return '<span class=\"scheme-manager__label px-1 public\">'+ publicTxt +'</span>';\r\n                    case 'org':\r\n                        return '<span class=\"scheme-manager__label px-1 org\">'+ orgTxt +'</span>';\r\n                    case 'private':\r\n                    default:\r\n                        return '<span class=\"scheme-manager__label px-1 private\">'+ privateTxt +'</span>';\r\n                }\r\n            }},\r\n            {field: 'isDefault', title: colDefault, width: 50, halign: 'center', align: 'center', template: this.schemeIsDefault },\r\n            {field: 'userName', title: colCreator, width: 80},\r\n            {title: colMgr, width: 50, template: this.btnDel, halign: 'center', align: 'center',}\r\n        ];\r\n    \r\n    }\r\n\r\n    onClose($event) {\r\n        this.closeModal.emit();\r\n    }\r\n\r\n    onSubmitClick($event) {\r\n        this.submitModal.emit( this.changes);\r\n    }\r\n\r\n    onCancelClick($event) {\r\n        this.closeModal.emit();\r\n    }\r\n\r\n    setDefault($event: any, ctx) {\r\n        const r = $event == '1';\r\n        // $event.stopPropagation();\r\n        this.items.forEach(n => {\r\n            n.isDefault = false;\r\n            if (n.id === ctx.rowData.id && r) {\r\n                n.isDefault = r;\r\n            }\r\n        });\r\n\r\n        this.items = [...this.items];\r\n\r\n        const defaultItem = this.items.find(n => n.isDefault);\r\n        if (defaultItem) {\r\n            this.changes = this.changes || {};\r\n            this.changes.defaultId = defaultItem.id;\r\n        }\r\n        // this.cd.detectChanges();\r\n    }\r\n\r\n    onSchemeDel($event, ctx) {\r\n        if ((this.currentUserId === ctx.rowData[\"userId\"] &&  ctx.rowData['type']=='private') || this.removeItem) {\r\n            $event.stopPropagation();\r\n            const id = ctx.rowData.id;\r\n            this.items = this.items.filter(n => n.id !== id);\r\n            this.changes = this.changes || {};\r\n            this.changes.deletedIds = [...(this.changes.deletedIds || []), id];\r\n            if (id === this.changes.defaultId) {\r\n                this.changes.defaultId = '';\r\n                delete this.changes.defaultId;\r\n            }\r\n        }\r\n    }\r\n}","/** åè®¾ç½®ç¸å³å¤è¯­èµæº */\r\nexport const DATAGRID_SETTINGS_LOCALEDATA = {\r\n    en: {\r\n        'datagrid-settings': {\r\n            noAuth: {\r\n                public: 'You do not have permission to set the usage scope of the scheme as public.',\r\n                org: 'You do not have permission to set the usage range of the scheme as organization.'\r\n            },\r\n            has: {\r\n                exist: 'The scheme name already exists, please modify it.',\r\n                chs: 'Simplified Chinese name already exists.',\r\n                cht: 'Traditional Chinese name already exists.',\r\n                en: 'English name already exists.'\r\n            },\r\n            required: {\r\n                schemeName: 'Please enter a scheme name.',\r\n                chs: 'Please enter a simplified Chinese name.',\r\n                cht: 'Please enter a name in Traditional Chinese.',\r\n                en: 'Please enter an English name.',\r\n                org: 'Please select an organization.'\r\n            },\r\n            groupRowStatus: {\r\n                label: 'Group Row Status',\r\n                expand: 'open',\r\n                collapse: 'fold'\r\n            },\r\n            column: {\r\n                title: 'Column title',\r\n                fixed: 'Fixed type',\r\n                unFixed: 'Unfixed',\r\n                leftFixed: 'Left fixed',\r\n                rightFixed: 'Right fixed'\r\n            }\r\n        },\r\n        'datagrid-scheme': {\r\n            saveTitle: 'Save Scheme',\r\n            namePlaceholder: 'Please enter a scheme name (no more than 9 characters)',\r\n            setPrivate: 'Private',\r\n            privateTip: 'When set as private, you can only view and use the scheme yourself',\r\n            setPublic: 'Public',\r\n            publicTip: 'When public, all users can view and use the scheme',\r\n            setOrg: 'Organization',\r\n            orgTip: 'When it is set to organization, users in the organization can view and use the scheme',\r\n            setDefault: 'Default',\r\n            defaultTip: 'The next time you enter this function, the scheme will be loaded by default',\r\n            syspreset: 'System preset',\r\n            isDefault: 'Default',\r\n            isPublic: 'Public',\r\n            isOrg: 'Org',\r\n            isPrivate: 'Private',\r\n            newScheme: 'Add New Scheme',\r\n            mgrScheme: 'Manage',\r\n            saveas: 'Save as',\r\n            onlyshowcolumns: 'only the display column',\r\n            schemeList: 'Scheme list',\r\n            delete: 'Delete this shceme',\r\n            columns:  {\r\n                name: 'Name',\r\n                type: 'Type',\r\n                isDefault: 'IsDefault',\r\n                username: 'Creator',\r\n                mgr: 'Manage'\r\n            },\r\n            currentSheme: 'Current schemeï¼',\r\n            schemeChanged: {\r\n                title: 'The scheme has been changed. Do you want to save it as a new scheme?',\r\n                tips: 'cancel: discard modifications; No: save the current scheme; Yes: save as a new scheme.',\r\n                yes: 'Yes',\r\n                no: 'No',\r\n                cancel: 'Cancel'\r\n            },\r\n            noDisplyColumnTip: 'Please set the fields to be displayed.'\r\n        },\r\n        'headerGroup': {\r\n            title: 'Multiple meter heads',\r\n            preview: 'Preview effect',\r\n            tips: 'The fields in the (candidate column) will not be displayed in the list; Click on the field name and display the relevant operation buttons on the right.',\r\n            contextMenus: {\r\n                new: 'New Header',\r\n                newChild: 'New Child Header',\r\n                setDataField: 'Assign Data Columns',\r\n                rename: 'Rename',\r\n                top: 'Top',\r\n                up: 'Up',\r\n                down: 'Down',\r\n                bottom: 'Bottom',\r\n                cancelGroup: 'Cancel',\r\n                remove: 'Remove'\r\n            },\r\n            candidate: 'Candidate columns',\r\n            setHeader: 'Set as header',\r\n            ok: 'Ok',\r\n            cancel: 'Cancel',\r\n            required: 'Please enter a header name!',\r\n            defaultGroupHeaderName: 'NewHeader',\r\n            newHeaderPlaceholder: 'Please enter a header name.',\r\n            newHeaderLabel: 'Header Name'\r\n        }\r\n    },\r\n    'zh-CHS': {\r\n        'datagrid-settings': {\r\n            noAuth: {\r\n                public: 'æ¨æ²¡æå°æ¹æ¡çä½¿ç¨èå´è®¾ç½®ä¸ºå¬å±çæéã',\r\n                org: 'æ¨æ²¡æå°æ¹æ¡çä½¿ç¨èå´è®¾ç½®ä¸ºç»ç»çæéã'\r\n            },\r\n            has: {\r\n                exist: 'æ¹æ¡åç§°å·²å­å¨ï¼è¯·ä¿®æ¹ã',\r\n                chs: 'ç®ä½ä¸­æåç§°å·²å­å¨ã',\r\n                cht: 'ç¹ä½ä¸­æåç§°å·²å­å¨ã',\r\n                en: 'è±æåç§°å·²å­å¨ã'\r\n            },\r\n            required: {\r\n                schemeName: 'è¯·è¾å¥æ¹æ¡åç§°ã',\r\n                chs: 'è¯·è¾å¥ç®ä½ä¸­æåç§°ã',\r\n                cht: 'è¯·è¾å¥ç¹ä½ä¸­æåç§°ã',\r\n                en: 'è¯·è¾å¥è±æåç§°ã',\r\n                org: 'è¯·éæ©ç»ç»ã'\r\n            },\r\n            groupRowStatus: {\r\n                label: 'åç»è¡ç¶æ',\r\n                expand: 'å±å¼',\r\n                collapse: 'æå '\r\n            },\r\n            column: {\r\n                title: 'åæ é¢',\r\n                fixed: 'åºå®å',\r\n                unFixed: 'ä¸åºå®',\r\n                leftFixed: 'åºå®å¨å·¦ä¾§',\r\n                rightFixed: 'åºå®å¨å³ä¾§'\r\n            }\r\n        },\r\n        'datagrid-scheme': {\r\n            saveTitle: 'ä¿å­æ¹æ¡',\r\n            namePlaceholder: 'è¯·è¾å¥æ¹æ¡åç§°ï¼æå¤ä¸è¶è¿9ä¸ªå­ç¬¦ï¼',\r\n            setPrivate: 'è®¾ä¸ºä¸ªäºº',\r\n            privateTip: 'è®¾ä¸ºä¸ªäººæ¶ï¼åªè½èªå·±æ¥çãä½¿ç¨è¯¥æ¹æ¡',\r\n            setPublic: 'è®¾ä¸ºå¬å±',\r\n            publicTip: 'è®¾ä¸ºå¬å±æ¶ï¼ææç¨æ·é½å¯æ¥çãä½¿ç¨è¯¥æ¹æ¡',\r\n            setOrg: 'è®¾ä¸ºç»ç»',\r\n            orgTip: 'è®¾ä¸ºç»ç»æ¶ï¼ç»ç»åçç¨æ·åè½æ¥çãä½¿ç¨è¯¥æ¹æ¡',\r\n            setDefault: 'è®¾ä¸ºé»è®¤',\r\n            defaultTip: 'ä¸æ¬¡è¿å¥æ­¤åè½æ¶ï¼é»è®¤å è½½è¯¥æ¹æ¡',\r\n            syspreset: 'ç³»ç»é¢å¶',\r\n            isDefault: 'é»è®¤',\r\n            isPublic: 'å¬å±',\r\n            isOrg: 'ç»ç»',\r\n            isPrivate: 'ä¸ªäºº',\r\n            newScheme: 'æ°å¢æ¹æ¡',\r\n            mgrScheme: 'ç®¡ç',\r\n            saveas: 'å¦å­ä¸º',\r\n            onlyshowcolumns: 'ä»çå±ç¤ºå',\r\n            schemeList: 'æ¹æ¡åè¡¨',\r\n            delete: 'å é¤',\r\n            columns:  {\r\n                name: 'åç§°',\r\n                type: 'å±æ§',\r\n                isDefault: 'é»è®¤',\r\n                username: 'åå»ºäºº',\r\n                mgr: 'ç®¡ç'\r\n            },\r\n            currentSheme: 'å½åæ¹æ¡ï¼',\r\n            schemeChanged: {\r\n                title: 'æ¹æ¡å·²æ´æ¹ï¼æ¯å¦å¦å­ä¸ºæ°æ¹æ¡ï¼',\r\n                tips: 'åæ¶ï¼æ¾å¼ä¿®æ¹ï¼å¦ï¼ä¿å­å½åæ¹æ¡ï¼æ¯ï¼æ¹æ¡å¦å­ä¸º',\r\n                yes: 'æ¯',\r\n                no: 'å¦',\r\n                cancel: 'åæ¶'\r\n            },\r\n            noDisplyColumnTip: 'è¯·è®¾ç½®è¦æ¾ç¤ºçå­æ®µ'\r\n\r\n        },\r\n        'headerGroup': {\r\n            title: 'å¤è¡¨å¤´',\r\n            preview: 'é¢è§ææ',\r\n            tips: 'å¨ï¼åéåï¼ä¸­çå­æ®µï¼å°ä¸å¨åè¡¨ä¸­æ¾ç¤º; ç¹å»å­æ®µåç§°ï¼å¨å³ä¾§æ¾ç¤ºç¸å³æä½æé®ã',\r\n            contextMenus: {\r\n                new: 'æ°å»ºè¡¨å¤´',\r\n                newChild: 'æ°å»ºå­çº§è¡¨å¤´',\r\n                setDataField: 'åéæ°æ®å',\r\n                rename: 'éå½å',\r\n                top: 'ç½®é¡¶',\r\n                up: 'ä¸ç§»',\r\n                down: 'ä¸ç§»',\r\n                bottom: 'ç½®åº',\r\n                cancelGroup: 'åæ¶åç»',\r\n                remove: 'ç§»é¤'\r\n            },\r\n            candidate: '(åéå)',\r\n            setHeader: 'è®¾ä¸ºè¡¨å¤´',\r\n            ok: 'ç¡®å®',\r\n            cancel: 'åæ¶',\r\n            required: 'è¯·è¾å¥è¡¨å¤´åç§°ï¼',\r\n            defaultGroupHeaderName: 'åç»è¡¨å¤´1',\r\n            newHeaderPlaceholder: 'è¯·è¾å¥åç§°',\r\n            newHeaderLabel: 'è¡¨å¤´åç§°'\r\n        }\r\n    },\r\n    'zh-CHT': {\r\n        'datagrid-settings': {\r\n            noAuth: {\r\n                public: 'æ¨æ²æå°æ¹æ¡çä½¿ç¨ç¯åè¨­ç½®ç²å¬å±çæ¬éã',\r\n                org: 'æ¨æ²æå°æ¹æ¡çä½¿ç¨ç¯åè¨­ç½®ç²çµç¹çæ¬éã'\r\n            },\r\n            has: {\r\n                exist: 'æ¹æ¡åç¨±å·²å­å¨ï¼è«ä¿®æ¹ã',\r\n                chs: 'ç°¡é«ä¸­æåç¨±å·²å­å¨ã',\r\n                cht: 'ç¹é«ä¸­æåç¨±å·²å­å¨ã',\r\n                en: 'è±æåç¨±å·²å­å¨ã'\r\n            },\r\n            required: {\r\n                schemeName: 'è«è¼¸å¥æ¹æ¡åç¨±.',\r\n                chs: 'è«è¼¸å¥ç°¡é«ä¸­æåç¨±ã',\r\n                cht: 'è«è¼¸å¥ç¹é«ä¸­æåç¨±ã',\r\n                en: 'è«è¼¸å¥è±æåç¨±ã',\r\n                org: 'è«é¸æçµç¹ã'\r\n            },\r\n            groupRowStatus: {\r\n                label: 'åçµè¡çæ',\r\n                expand: 'å±é',\r\n                collapse: 'æç'\r\n            },\r\n            column: {\r\n                title: 'åæ¨é¡',\r\n                fixed: 'åºå®å',\r\n                unFixed: 'ä¸åºå®',\r\n                leftFixed: 'åºå®å¨å·¦å´',\r\n                rightFixed: 'åºå®å¨å³å´'\r\n            }\r\n        },\r\n        'datagrid-scheme': {\r\n            saveTitle: 'ä¿å­æ¹æ¡',\r\n            namePlaceholder: 'è«è¼¸å¥æ¹æ¡åç¨±ï¼æå¤ä¸è¶é9åå­ç¬¦ï¼',\r\n            setPrivate: 'è¨­ç²åäºº',\r\n            privateTip: 'è¨­ç²åäººæï¼åªè½èªå·±æ¥çãä½¿ç¨è©²æ¹æ¡',\r\n            setPublic: 'è¨­ç²å¬å±',\r\n            publicTip: 'è¨­ç²å¬å±æ¶ï¼ææç¨æ¶é½å¯æ¥çãä½¿ç¨è©²æ¹æ¡',\r\n            setOrg: 'è¨­ç²çµç¹',\r\n            orgTip: 'è¨­ç²çµç¹æï¼çµç¹å§çç¨æ¶åè½æ¥çãä½¿ç¨è©²æ¹æ¡',\r\n            setDefault: 'è¨­ç²é»èª',\r\n            defaultTip: 'ä¸æ¬¡é²å¥æ­¤åè½æï¼é»èªå è¼è©²æ¹æ¡',\r\n            syspreset: 'ç³»çµ±é å¶',\r\n            isDefault: 'é»èª',\r\n            isPublic: 'å¬å±',\r\n            isOrg: 'çµç¹',\r\n            isPrivate: 'åäºº',\r\n            newScheme: 'æ°å¢æ¹æ¡',\r\n            mgrScheme: 'ç®¡ç',\r\n            saveas: 'å¦å­ç²',\r\n            onlyshowcolumns: 'åçå±ç¤ºå',\r\n            schemeList: 'æ¹æ¡åè¡¨',\r\n            delete: 'åªé¤',\r\n            columns:  {\r\n                name: 'åç¨±',\r\n                type: 'å±¬æ§',\r\n                isDefault: 'é»èª',\r\n                username: 'åµå»ºäºº',\r\n                mgr: 'ç®¡ç'\r\n            },\r\n            currentSheme: 'ç¶åæ¹æ¡ï¼',\r\n            schemeChanged: {\r\n                title: 'æ¹æ¡å·²æ´æ¹ï¼æ¯å¦å¦å­ç²æ°æ¹æ¡ï¼',\r\n                tips: 'åæ¶ï¼æ¾æ£ä¿®æ¹ï¼å¦ï¼ä¿å­ç¶åæ¹æ¡ï¼æ¯ï¼æ¹æ¡å¦å­ç²',\r\n                yes: 'æ¯',\r\n                no: 'å¦',\r\n                cancel: 'åæ¶'\r\n            },\r\n            noDisplyColumnTip: 'è«è¨­ç½®è¦é¡¯ç¤ºçå­æ®µ'\r\n        },\r\n        'headerGroup': {\r\n            title: 'å¤è¡¨é ­',\r\n            preview: 'é è¦½ææ',\r\n            tips: 'å¨ï¼åé¸åï¼ä¸­çå­æ®µï¼å°ä¸å¨åè¡¨ä¸­é¡¯ç¤º; é»æå­æ®µåç¨±ï¼å¨å³å´é¡¯ç¤ºç¸éæä½æéã',\r\n            contextMenus: {\r\n                new: 'æ°å»ºè¡¨é ­',\r\n                newChild: 'æ°å»ºå­ç´è¡¨é ­',\r\n                setDataField: 'åéæ¸æå',\r\n                rename: 'éå½å',\r\n                top: 'ç½®é ',\r\n                up: 'ä¸ç§»',\r\n                down: 'ä¸ç§»',\r\n                bottom: 'ç½®åº',\r\n                cancelGroup: 'åæ¶åçµ',\r\n                remove: 'ç§»é¤'\r\n            },\r\n            candidate: '(åé¸å)',\r\n            setHeader: 'è¨­ç²è¡¨é ­',\r\n            ok: 'ç¢ºå®',\r\n            cancel: 'åæ¶',\r\n            newHeaderPlaceholder: 'è«è¼¸å¥åç¨±',\r\n            newHeaderLabel: 'è¡¨é ­åç¨±',\r\n            \r\n        }\r\n    }\r\n}","import { debounceTime, filter, map, switchMap, tap } from 'rxjs/operators';\r\nimport { forkJoin, Observable, of, Subscription, timer } from 'rxjs';\r\nimport { Injectable, Injector, InjectionToken, ComponentFactoryResolver, ApplicationRef } from '@angular/core';\r\nimport { DatagridComponent, DataColumn } from '@farris/ui-datagrid';\r\nimport { BsModalService, ModalOptions, ModalContainerComponent } from '@farris/ui-modal';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { DatagridSettingsComponent } from './datagrid-settings.component';\r\nimport { cloneDeep, debounce, flatten } from 'lodash-es';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { TreeNode } from '@farris/ui-treetable';\r\nimport { CommonUtils, DebugService, IdService, WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';\r\nimport { SimpleColumnsComponent } from './simple-mode/simple-columns.component';\r\nimport { DatagridSchemeService } from './datagrid-scheme.service';\r\nimport { NewSchemeComponent } from './scheme/newscheme.component';\r\nimport { SchemeListComponent } from './scheme/scheme-list.component';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { DatagridSchemeModel, IS_MULTI_HEADER_STRING, SchemeAuthModel, SettingModel } from './setting.model';\r\n\r\nimport { DATAGRID_SETTINGS_LOCALEDATA }  from './datagrid-settings-locale';\r\nimport { cleanGroupFields, cleanSortFields, columnsToTreeNodes, getDataFieldsForMultiHeaders, mergetColumnOptions, refreshGridColumns } from './mutli-headers.helper';\r\n\r\n\r\nexport const GRID_SETTINGS_WEBAPI =  new InjectionToken(' Farris DataGrid User Setting WebApi URI.');\r\n\r\nexport type NewSchemeCallBack = {\r\n    cancel?: (p?: any) => void,\r\n    ok: (p: any) => void\r\n};\r\n\r\n@Injectable()\r\nexport class DatagridSettingsService {\r\n\r\n    private multiSortMsg = 'åè¡¨ä¸­æªå¼å¯å¤åæåºçåè½ã è¯·æ£æ¥ï¼';\r\n    private columnsSortableMsg = 'æªå¼å¯åçæåºåè½ãè¯·æ£æ¥ï¼';\r\n    private notShowDialog = 'å¤è¡¨å¤´æä¸æ¯æåæ¾ç¤ºè®¾ç½®ï¼åæ¶æªå¯ç¨åæåºåè½ã';\r\n\r\n    private _httpRestService = null;\r\n\r\n    private languages: any = [];\r\n\r\n    get httpRestService() {\r\n        return this._httpRestService;\r\n    };\r\n\r\n    set httpRestService(httpSer) {\r\n        this._httpRestService = httpSer;\r\n\r\n        if (this.schemeService) {\r\n            this.schemeService.setRestService(httpSer);\r\n        }\r\n    }\r\n\r\n    private gridRefs: {[key: string]: DatagridComponent} = null;\r\n    private activeSchemeItem: {[schemeid: string]: any} = null;\r\n\r\n    private saving = false;\r\n    private cfr: ComponentFactoryResolver = null;\r\n    private app: ApplicationRef = null;\r\n    private schemeListSubscription: Subscription = null;\r\n\r\n    private schemeService: DatagridSchemeService;\r\n    private notifyService: NotifyService;\r\n\r\n    private commonUtils: CommonUtils;\r\n\r\n    private currentSchemeitem = null;\r\n    private prevSchemeItem = null;\r\n    private debugSer: DebugService = null;\r\n\r\n    constructor(private injector: Injector, private modalSer: BsModalService,\r\n                private messager: MessagerService, private idService: IdService,\r\n                private localeSer: LocaleService) {\r\n\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n        this.app = this.injector.get(ApplicationRef);\r\n        this.notifyService = this.injector.get(NotifyService, null);\r\n        this.debugSer = this.injector.get(DebugService, null);\r\n        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());\r\n        this.schemeService = new DatagridSchemeService(this.injector);\r\n\r\n \r\n        this.localeSer.setLocaleData(DATAGRID_SETTINGS_LOCALEDATA);\r\n    }\r\n\r\n    setUriPerfixStr(perfixStr: string) {\r\n\r\n        if (perfixStr == '') {\r\n            if (window['gspframeworkService'] && window['gspframeworkService'].common) {\r\n                const basePath = window['gspframeworkService'].common.getBasePath;\r\n                if (basePath && basePath.get) {\r\n                    perfixStr = basePath.get();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (perfixStr != '' && perfixStr !== null) {\r\n            this.schemeService.setUriPerfix(perfixStr);\r\n        }\r\n\r\n    }\r\n\r\n    destroy(id?: string) {\r\n        if (this.gridRefs) {\r\n            if (id && this.gridRefs[id]) {\r\n                this.gridRefs[id] = null;\r\n                delete this.gridRefs[id];\r\n            } else {\r\n                if (!Object.keys(this.gridRefs).length) {\r\n                    this.gridRefs = null;\r\n                }\r\n            }\r\n        }\r\n        this.saving = false;\r\n        this.setActiveSchemeItem(id, null);\r\n        this.schemeService.destory(id);\r\n    }\r\n\r\n    private writeDebugMsg(msg, type = 'warn') {\r\n        if (this.debugSer) {\r\n            if (this.debugSer[type]) {\r\n                this.debugSer[type](msg);\r\n            } else {\r\n                console[type](msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    registerGridInstance(dg: DatagridComponent) {\r\n        if (!dg) {\r\n            this.writeDebugMsg('DatagridSettingService: grid instance is null.')\r\n            return;\r\n        }\r\n        const id = dg.id;\r\n        this.gridRefs = this.gridRefs || {};\r\n        if (!this.gridRefs[id]) {\r\n            this.gridRefs[id] = dg;\r\n        }\r\n    }\r\n\r\n    getGridInstance(dgID: string) {\r\n        return this.gridRefs ? this.gridRefs[dgID] : null;\r\n    }\r\n\r\n    /** æ´æ°æ¹æ¡ä¸­çéç½®æ°æ® */\r\n    private updateSchemeSettings(schemeItem: DatagridSchemeModel, settings: Partial<SettingModel>) {\r\n        if (schemeItem && settings) {\r\n            const schemeContentObj = schemeItem.queryConditionString ? JSON.parse(schemeItem.queryConditionString) : {};\r\n            if (schemeContentObj) {\r\n                if ( schemeContentObj[this.localeSer.localeId]) {\r\n                    const schemeSettings = schemeContentObj[this.localeSer.localeId] || {};\r\n                    schemeContentObj[this.localeSer.localeId] = Object.assign(schemeSettings, settings);\r\n                } else {\r\n                    schemeContentObj[this.localeSer.localeId] =  settings;\r\n                }\r\n                schemeItem.queryConditionString = JSON.stringify(schemeContentObj);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** æ´æ°å½åæ¹æ¡éç½®æ°æ® */\r\n    updateActiveSchemeItemSettings(dgId: string, settings: Partial<SettingModel>) {\r\n        const schemeItem = this.getActiveSchemeItem(dgId);\r\n        this.updateSchemeSettings(schemeItem, settings);\r\n        if (schemeItem) {\r\n            this.schemeService.updateSchemeData(dgId, schemeItem);\r\n        }\r\n    }\r\n\r\n    /** è®¾ç½®æ´»å¨çæ¹æ¡ */\r\n    setActiveSchemeItem(dgId: string, activeItem: any) {\r\n        const schemekey = this.schemeService.getSchemeKey(dgId);\r\n        this.activeSchemeItem = this.activeSchemeItem || {};\r\n        if (activeItem) {\r\n            this.activeSchemeItem[schemekey] = cloneDeep(activeItem);\r\n        } else {\r\n            delete this.activeSchemeItem[schemekey];\r\n        }\r\n    }\r\n    /** è·åå½åæ´»å¨çæ¹æ¡ */\r\n    getActiveSchemeItem(dgId: string): DatagridSchemeModel {\r\n        const schemekey = this.schemeService.getSchemeKey(dgId);\r\n        return this.activeSchemeItem ? this.activeSchemeItem[schemekey] : null;\r\n    }\r\n\r\n    getSearchTypes() {\r\n        return [\r\n            { value: 'all', title: this.localeSer.getValue('datagrid.settings.allColumns') },\r\n            { value: 'visible', title: this.localeSer.getValue('datagrid.settings.visibleColumns') },\r\n            { value: 'hidden', title: this.localeSer.getValue('datagrid.settings.hiddenColumns') }\r\n        ];\r\n    }\r\n\r\n    showSimple(gridInstance: DatagridComponent, settings?: Partial<SettingModel>, selectedSchemeItem?: DatagridSchemeModel) {\r\n        let _columns = this.getCurrentConfigs().columns || gridInstance.columns;\r\n\r\n        const columns = this.convertColumnsToSimple(_columns);\r\n        columns[0] = [...columns[0].filter(n => n.field && n.field !== gridInstance.ControlPanelFeild)];\r\n\r\n        const searchTypes = this.getSearchTypes();\r\n\r\n        if (this.cfr) {\r\n            const cmpFactory = this.cfr.resolveComponentFactory(SimpleColumnsComponent);\r\n            let simpleRef = cmpFactory.create(this.injector);\r\n            this.app.attachView(simpleRef.hostView);\r\n            simpleRef.instance.columns = columns;\r\n            simpleRef.instance.seartTypes = searchTypes;\r\n            simpleRef.instance.gridInstance = gridInstance;\r\n\r\n            simpleRef.instance.schemeSer = this.schemeService;\r\n\r\n            if (document.querySelector('#page-wrapper')) {\r\n                simpleRef.instance.top = 76;\r\n            }\r\n\r\n            simpleRef.instance.enableScheme = gridInstance.enableScheme;\r\n\r\n            if (!settings) {\r\n                settings = this.getCurrentConfigs();\r\n            }\r\n            \r\n            if (gridInstance.enableScheme) {\r\n                const _currentSchemtItem = this.getActiveSchemeItem(gridInstance.id);\r\n                if (settings) {\r\n                    //  ä»é«çº§æ¨¡å¼ è½¬å° ç®æ´æ¨¡å¼æ¶ï¼ä¿å­åå§å¼\r\n                    if (!simpleRef.instance['prevSchemeItem'] && this.prevSchemeItem) {\r\n                        simpleRef.instance['prevSchemeItem'] = cloneDeep(this.prevSchemeItem);\r\n                    }\r\n\r\n                    if (selectedSchemeItem) {\r\n                        this.updateSchemeSettings(selectedSchemeItem, settings);\r\n                        simpleRef.instance.currentSchemeItem = selectedSchemeItem;\r\n                    } else {\r\n                        if (_currentSchemtItem) {\r\n                            this.currentSchemeitem = _currentSchemtItem;\r\n                            this.prevSchemeItem = cloneDeep(_currentSchemtItem);\r\n                            simpleRef.instance.currentSchemeItem = _currentSchemtItem;\r\n                        } else {\r\n\r\n                            if (!Object.keys(settings).length) {\r\n                                settings = this.getLocalSettings(this.createConfigKey(gridInstance.id));\r\n                            }\r\n\r\n                            simpleRef.instance.currentSchemeItem = null;\r\n                            simpleRef.instance.settings = settings;\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.currentSchemeitem = _currentSchemtItem;\r\n                    this.prevSchemeItem = cloneDeep(_currentSchemtItem);\r\n                    simpleRef.instance.currentSchemeItem = _currentSchemtItem;\r\n                }\r\n            } else {\r\n                if (gridInstance.enableSetMultiHeaders) {\r\n                    simpleRef.instance.settings = this.getCurrentConfigs();\r\n                } else {\r\n                    simpleRef.instance.settings = settings;\r\n                }\r\n            }\r\n\r\n\r\n            const zIndex = this.commonUtils.getFloatingLayerIndex();\r\n            simpleRef.location.nativeElement.style.zIndex = '' + zIndex;\r\n\r\n            document.body.appendChild(simpleRef.location.nativeElement);\r\n\r\n            simpleRef.instance.canceld.subscribe( () =>{\r\n                this.restoreScheme(gridInstance);\r\n            });\r\n\r\n            simpleRef.instance.closed.pipe(\r\n                switchMap( () => {\r\n                    if (simpleRef) {\r\n                        simpleRef.instance.container.nativeElement.style.right = '-500px';\r\n                        return timer(500);\r\n                    }\r\n                })\r\n            ).subscribe(() => {\r\n                simpleRef.location.nativeElement.remove();\r\n                simpleRef.destroy();\r\n                simpleRef = null;\r\n                if (this.schemeListSubscription) {\r\n                    this.schemeListSubscription.unsubscribe();\r\n                }\r\n\r\n                const _activeSchemtItem = this.getActiveSchemeItem(gridInstance.id);\r\n                if ((!this.currentSchemeitem || (_activeSchemtItem && _activeSchemtItem.id !== this.currentSchemeitem.id)) && (_activeSchemtItem &&_activeSchemtItem.queryConditionString)) {\r\n                    const _currentSettings = JSON.parse(_activeSchemtItem.queryConditionString)[this.localeSer.localeId];\r\n                    if (_currentSettings) {\r\n                        columns[0].forEach(f => {\r\n                            f.visible = _currentSettings.viewColumns.indexOf(f.field) > -1;\r\n                        });\r\n                    }\r\n                }      \r\n            });\r\n\r\n            // æå¼é«çº§è®¾ç½®çªå£\r\n            simpleRef.instance.advanced.subscribe(({ viewFields, settings, columns }) => {\r\n                // if (viewFields && viewFields.length){\r\n                //     this.updateSchemeSettings(simpleRef.instance.currentSchemeItem, {viewColumns: viewFields});\r\n                // }\r\n                this.setCurrentConfigs({...settings, columns});\r\n                this.prevSchemeItem = simpleRef.instance['prevSchemeItem'];\r\n                this['SCHEME_DEFAULT_TITLE'] = simpleRef.instance.defaultSchemeName;\r\n                this.showAdvanced(gridInstance, null, simpleRef.instance.currentSchemeItem);\r\n            });\r\n\r\n            simpleRef.instance.submit.subscribe( (e: any) => {\r\n                this.applySettings(e, gridInstance);\r\n            });\r\n\r\n            // å¤è¡¨åè®¾ç½®\r\n            simpleRef.instance.submitForGroupHeader.subscribe((e: any) => {\r\n                this.applySettings(e, gridInstance);\r\n            });\r\n\r\n            // simpleRef.instance.fieldsChange.subscribe((visibleFields: string[]) => {\r\n            //     this.updateActiveSchemeItemSettings(gridInstance.id, {viewColumns: visibleFields})\r\n            // });\r\n\r\n            // æå¼æ°å¢æ¹æ¡çªå£\r\n            simpleRef.instance.addNewScheme.subscribe((e: { type: 'new' | 'saveas'}) => {\r\n                this.showNewSchemeDialog(gridInstance, e, simpleRef.instance.collectSettings(), {\r\n                    ok: (t: any) => {\r\n                        // æ´æ¢ä¸ºæ°çæ¹æ¡\r\n                        simpleRef.instance.onSchemeItemClick(null, t);\r\n\r\n                        this.saveUserConfig\r\n                    }\r\n                });\r\n            });\r\n\r\n            simpleRef.instance.schemeList = this.schemeService.getStateValue(gridInstance.id, 'list') || [];\r\n\r\n            // æå¼æ¹æ¡ç®¡çåè¡¨çªå£\r\n            simpleRef.instance.showSchemeList.subscribe(() => {\r\n                this.getSchemeList(gridInstance.id).pipe(\r\n                    switchMap((t) => {\r\n                        return this.schemeService.checkAuthority().pipe(\r\n                            map((auth: SchemeAuthModel) => {\r\n                                return {\r\n                                    list: t,\r\n                                    ...auth\r\n                                }\r\n                            })\r\n                        )\r\n                    })\r\n                ).subscribe((t: any) => {\r\n                    this.schemeService.setSchemeList(gridInstance.id, t.list || []);\r\n                    this.showSchemeListDialog(gridInstance, cloneDeep(t.list || []), t, simpleRef);\r\n                });\r\n            });\r\n\r\n            this.schemeListSubscription = this.schemeService.schemeList$.subscribe((list: any) => {\r\n                simpleRef.instance.schemeList = list;\r\n\r\n                if (!list || !list.length) {\r\n                    this.setActiveSchemeItem(gridInstance.id, null);\r\n                    return;\r\n                }\r\n\r\n                const _activeSchemeItem = this.getActiveSchemeItem(gridInstance.id);\r\n                if (_activeSchemeItem) {\r\n                    let hasActiveItem = list.find(n => n.id === _activeSchemeItem.id);\r\n                    if (!hasActiveItem) {\r\n                        hasActiveItem = this.getDefaultScheme(list); // è·åè®¾ç½®ä¸ºå½åæ¹æ¡çé¡¹\r\n                        this.setActiveSchemeItem(gridInstance.id, hasActiveItem || null);\r\n                    }\r\n\r\n                    simpleRef.instance.currentSchemeItem = hasActiveItem;\r\n                }\r\n            });\r\n\r\n            // åæ¢æ¹æ¡\r\n            simpleRef.instance.schemeChanged.subscribe((t: any) => {\r\n                this.currentSchemeitem = t;\r\n                this.setActiveSchemeItem(gridInstance.id, cloneDeep(t));\r\n            })\r\n\r\n            simpleRef.hostView.detectChanges();\r\n            simpleRef.instance.cd.detectChanges();\r\n            simpleRef.instance.container.nativeElement.style.right = '0px';\r\n\r\n            return simpleRef;\r\n        }\r\n    }\r\n\r\n\r\n    show(gridInstance: DatagridComponent, opts?: ModalOptions) {\r\n        this.registerGridInstance(gridInstance);\r\n\r\n        if (gridInstance.enableSimpleMode) {\r\n            this.schemeService.createSchemeTaskID();\r\n            return this.showSimple(gridInstance);\r\n        } else {\r\n            return this.showAdvanced(gridInstance, opts);\r\n        }\r\n    }\r\n\r\n    private restoreScheme(gridInstance) {\r\n        if (gridInstance.enableScheme) {\r\n            this.setActiveSchemeItem(gridInstance.id, this.prevSchemeItem);\r\n            if (!this.prevSchemeItem) {\r\n                this.setCurrentConfigs(null);    \r\n            }\r\n        } else {\r\n            this.setCurrentConfigs(null);\r\n        }\r\n    }\r\n\r\n    private showAdvanced(gridInstance: DatagridComponent, opts?: ModalOptions, selectedSchemeItem?: DatagridSchemeModel) {\r\n        let _editColSortInfo = true;\r\n        const editColSortInfo = this.canSetColumnSort(gridInstance);\r\n        if (editColSortInfo !== true) {\r\n            _editColSortInfo = false;\r\n        }\r\n\r\n        // å¤æ­æ¯å¦ä¸ºå¤è¡¨å¤´\r\n        const showSetColumnsTab = !gridInstance.isMultiHeader() || (gridInstance.isMultiHeader() && gridInstance.enableSetMultiHeaders);\r\n        const getActiveTabIndex = () => {\r\n            if (showSetColumnsTab) {\r\n                return 1;\r\n            } else {\r\n                if (_editColSortInfo) {\r\n                    return 2;\r\n                } else {\r\n                    return -1;\r\n                }\r\n            }\r\n        };\r\n        const activeTabIndex = getActiveTabIndex();\r\n\r\n        if (activeTabIndex === -1) {\r\n            this.messager.warning(this.notShowDialog);\r\n            return;\r\n        }\r\n\r\n        const columns = this.convertColumnsToSimple(this.getCurrentConfigs().columns || gridInstance.columns);\r\n\r\n        // è·åå½åæ¹æ¡ä¸­å½åè¯­è¨çéç½®æ°æ®\r\n        let currentSettings: SettingModel = this.getCurrentConfigs();\r\n        const multiHeaderTree = currentSettings && currentSettings.multiHeaders? currentSettings.multiHeaders.treeData : null;\r\n        if (selectedSchemeItem && selectedSchemeItem.queryConditionString) {\r\n            const _currentSettings = JSON.parse(selectedSchemeItem.queryConditionString)[this.localeSer.localeId];\r\n            currentSettings = Object.assign(_currentSettings || {}, currentSettings || {});\r\n            \r\n            if (currentSettings.columnFormat && currentSettings.columnFormat.length) {\r\n                columns[0] = columns[0].map((col) => {\r\n                    const fcol = currentSettings.columnFormat.find(n => n.field === col.field);\r\n                    if (fcol) {\r\n                        col = Object.assign(col, fcol);\r\n                    }\r\n                    return col;\r\n                });\r\n            }\r\n        }\r\n        \r\n        \r\n        if (!gridInstance.enableSetMultiHeaders && currentSettings.viewColumns && currentSettings.viewColumns.length) {\r\n            columns[0].forEach(f => {\r\n                f.visible = currentSettings.viewColumns.indexOf(f.field) > -1;\r\n            });\r\n        }\r\n        \r\n        columns[0] = columns[0].filter(n => n.field && n.field !== gridInstance.ControlPanelFeild);\r\n        \r\n        let sortFields = getDataFieldsForMultiHeaders(cloneDeep(columns)).filter( (n: any) => n.field.indexOf('farris-datagrid-column_') == -1 && n.sortable);\r\n        \r\n        if (gridInstance.enableSetMultiHeaders && currentSettings && currentSettings.multiHeaders ) {\r\n            sortFields = getDataFieldsForMultiHeaders(currentSettings.multiHeaders.viewCols).filter( (n: any) => n.field.indexOf('farris-datagrid-column_') == -1 && n.sortable);\r\n        }\r\n\r\n        // const treeData = this.convertColumns2TreeData(cloneDeep(columns), true);\r\n        // const viewColumnsTreeData = this.convertColumns2TreeData(cloneDeep(columns), false);\r\n        // this.checkViewTreeNodes(viewColumnsTreeData);\r\n\r\n        let modalRef = null;\r\n\r\n        // const okText = this.localeSer.getValue('datagrid.settings.ok') || 'ç¡®å®';\r\n        // const cancelText = this.localeSer.getValue('datagrid.settings.cancel') || 'åæ¶';\r\n        // const resetText =  this.localeSer.getValue('datagrid.settings.reset') || 'éç½®';\r\n\r\n        const defaultOpts = {\r\n            width: 760, height: 560, showHeader: false, title: 'æ§å¶é¢æ¿',\r\n            initialState: {\r\n                columns,\r\n                sortTreeData: sortFields,\r\n                // viewTreeData: viewColumnsTreeData,\r\n                gridInstance,\r\n                canSetColumnSort: _editColSortInfo,\r\n                canSetColumnVisible: showSetColumnsTab,\r\n                activeTabIndex,\r\n                schemeInfo: currentSettings,\r\n                enableMultipleHeaders: gridInstance.enableSetMultiHeaders,\r\n                multiHeaders: {\r\n                    columns,\r\n                    treeData: multiHeaderTree\r\n                },\r\n                schemeName: selectedSchemeItem? selectedSchemeItem['_title_'] : this['SCHEME_DEFAULT_TITLE']\r\n            },\r\n            showButtons: false,\r\n            closed: (isCloseBtn, opts) => {\r\n                const {event} = opts;\r\n                if (event && event.code === 'Escape') {\r\n                    this.restoreScheme(gridInstance);\r\n                }\r\n            }\r\n        };\r\n        const modalOpts = Object.assign(defaultOpts, opts || {});\r\n\r\n        modalRef = this.modalSer.show(DatagridSettingsComponent, modalOpts);\r\n        const instance = modalRef.content as DatagridSettingsComponent;\r\n        instance.enableReset = true;\r\n        instance.modalRef = modalRef;\r\n        instance.canSetColumnSort = _editColSortInfo;\r\n        instance.canSetColumnVisible = showSetColumnsTab;\r\n\r\n        instance.submitHandle.subscribe((e) => {\r\n            this.applySettings(e, gridInstance, {modalRef, currentScheme: selectedSchemeItem});\r\n        });\r\n\r\n        instance.cancelHandle.subscribe((e) => {\r\n            modalRef.close();\r\n            this.restoreScheme(gridInstance);\r\n        });\r\n\r\n        // åæ¢å°ä¾§è¾¹æ ç®æ´æ¨¡å¼\r\n        instance.concise.subscribe((e) => {\r\n            modalRef.close();\r\n            const settings = modalRef.content;\r\n            const { sortInfo, viewColumns, columnFormat, groupField, multiHeaders } = settings;\r\n            this.setCurrentConfigs({ sortInfo, viewColumns, columnFormat, groupField, multiHeaders });\r\n            this.showSimple(gridInstance, \r\n                { sortInfo, viewColumns, columnFormat, groupField, multiHeaders }, \r\n                cloneDeep(selectedSchemeItem));\r\n        });\r\n\r\n        const modalContainer = modalRef.dialog.instance as ModalContainerComponent;\r\n        modalContainer.draggbar.handle = instance.header.nativeElement;\r\n\r\n        return modalRef;\r\n    }\r\n\r\n\r\n\r\n    private canSetColumnSort(gridInstance: DatagridComponent) {\r\n        if (gridInstance.multiSort && this.hasEnableSortColumns(gridInstance)) {\r\n            return true;\r\n        } else {\r\n            if (!this.hasEnableSortColumns(gridInstance)) {\r\n                return this.columnsSortableMsg;\r\n            } else if (!gridInstance.multiSort) {\r\n                return this.multiSortMsg;\r\n            }\r\n        }\r\n    }\r\n\r\n    private hasEnableSortColumns(gridInstance: DatagridComponent) {\r\n        const sortColumnsCount = gridInstance.flatColumns.reduce((c, r) => {\r\n            if (r.sortable) {\r\n                return c + 1;\r\n            }\r\n            return c;\r\n        }, 0);\r\n\r\n        return sortColumnsCount > 0;\r\n    }\r\n\r\n\r\n    // private getChilds(cols, rowIndex, colStartIndex, colCount, forSort = false) {\r\n    //     const childCols = [];\r\n    //     let _count = colStartIndex;\r\n    //     if (!cols[rowIndex]) {\r\n    //         return  [];\r\n    //     }\r\n\r\n    //     cols[rowIndex].slice().forEach(element => {\r\n    //         _count = _count + element.colspan;\r\n    //         if ( _count <= colCount ) {\r\n    //             childCols.push(element);\r\n    //         }\r\n    //     });\r\n\r\n    //     cols[rowIndex].splice(0, childCols.length);\r\n\r\n    //     return childCols.map((c, i) => {\r\n    //         let n: any = {\r\n    //             data: c,\r\n    //             selectable: forSort ? !!c.sortable : true\r\n    //         };\r\n\r\n    //         if (c.colspan && c.colspan > 1) {\r\n    //             n = {\r\n    //                 data: c,\r\n    //                 selectable: false,\r\n    //                 expanded: true,\r\n    //                 children: this.getChilds(cols, rowIndex + 1, 0 , c.colspan)\r\n    //             };\r\n    //         }\r\n    //         return n;\r\n    //     });\r\n    // }\r\n    // convertColumns2TreeData(cols: DataColumn[][], forSort = false) {\r\n\r\n\r\n\r\n    //     const columns = cols.map((c: any) => {\r\n    //         const aa = c.map((_) => {\r\n    //             if (_.field.indexOf('farris-datagrid-column_') == -1) {\r\n    //                 _.colspan = _.colspan || 1;\r\n    //                 return _;\r\n    //             }\r\n    //             return null;\r\n    //         });\r\n    //         return aa.filter(n => n);\r\n    //     });\r\n    //     if (columns.length === 1) {\r\n    //         return columns[0].map(c => {\r\n    //             return {\r\n    //                 data: c,\r\n    //                 selectable: forSort ? !!c.sortable : true\r\n    //             };\r\n    //         });\r\n    //     } else {\r\n    //         return columns[0].map((c, i) => {\r\n    //             if (c.colspan && c.colspan > 1) {\r\n    //                 return {\r\n    //                     data: c,\r\n    //                     selectable: false,\r\n    //                     expanded: true,\r\n    //                     children: this.getChilds(columns, 1, 0, c.colspan, forSort)\r\n    //                 };\r\n    //             } else {\r\n    //                 return {\r\n    //                     data: c,\r\n    //                     selectable: forSort ? !!c.sortable : true\r\n    //                 };\r\n    //             }\r\n    //         });\r\n    //     }\r\n    // }\r\n\r\n    // private checkViewTreeNodes(treeNodes: TreeNode[]) {\r\n    //     treeNodes.forEach((tn: TreeNode) => {\r\n    //         if (!tn.children || !tn.children.length) {\r\n    //             tn.selectable = true;\r\n    //         } else {\r\n    //             tn.selectable = false;\r\n    //             this.checkViewTreeNodes(tn.children);\r\n    //         }\r\n    //     });\r\n    // }\r\n\r\n    private _convertColumnsToSimple(gridInstance: any) {\r\n\r\n        let cols = gridInstance.columns;\r\n        // éç½®åé¡ºåºä¸ºæåè®¾è®¡æ¶çé¡ºåº\r\n        const gridOpts = gridInstance.dfs._state.initialOptions;\r\n        if (gridOpts.columnFields) {\r\n            let desginCols = gridOpts.columnFields;\r\n            const newColumns = [];\r\n\r\n            desginCols.forEach(c => {\r\n                if (c.field !== '_datagrid-setting-control_') {\r\n                    const col = gridInstance.columns[0].find((n: any) => n.field === c.field);\r\n                    if (col) {\r\n                        newColumns.push(col);\r\n                    }\r\n                }\r\n            });\r\n\r\n            cols = [newColumns];\r\n        }\r\n\r\n        return cols;\r\n    }\r\n\r\n    convertColumnsToSimple(cols: any) {\r\n        if (!Array.isArray(cols[0])) {\r\n            cols = [cols];\r\n        }\r\n\r\n        return cols.map( (_cols: DataColumn[]) => {\r\n            return _cols.map( (c: DataColumn) => {\r\n                if (c.field !== '_datagrid-setting-control_') {\r\n                    return {\r\n                        field: c.field,\r\n                        title: c.title,\r\n                        colspan: c.colspan,\r\n                        rowspan: c.rowspan,\r\n                        sortable: c.sortable,\r\n                        order: c.order,\r\n                        halign: c.halign || 'left',\r\n                        align: c.align || 'left',\r\n                        visible: c.visible,\r\n                        allowGrouping: c.allowGrouping,\r\n                        groupFooter: c.groupFooter,\r\n                        footer: c.footer,\r\n                        width: c.width || 100,\r\n                        dataType: c.dataType || 'string',\r\n                        fixed: c.fixed || 'UNFIXED'\r\n                    };\r\n                }\r\n            }).filter(n => n);\r\n        });\r\n    }\r\n\r\n    private resetGridView(gridInstance: any) {\r\n        if (!gridInstance) {\r\n            return;\r\n        }\r\n        const dfs = gridInstance.dfs;\r\n        if (dfs) {\r\n            const options = dfs['_state'].initialOptions;\r\n\r\n            if (options.sort) {\r\n                if (options.sort.sortName) {\r\n                    gridInstance.sortName = options.sort.sortName;\r\n                }\r\n                if (options.sort.sortOrder) {\r\n                    gridInstance.sortOrder = options.sort.sortOrder;\r\n                }\r\n            }\r\n\r\n            gridInstance.groupField = options.groupField || '';\r\n            // TODO: è¿éè¦ä¿®æ­£é»è®¤åçæ¾ç¤ºé¡ºåº\r\n            if (options.columnFields && options.columnFields.length) {\r\n\r\n                const newColumns = [];\r\n                options.columnFields.forEach(c => {\r\n                    const col = gridInstance.columns[0].find((n: any) => n.field === c.field);\r\n                    if (col) {\r\n                        col.visible = c.visible;\r\n                        col.halign = c.halign;\r\n                        col.align = c.align;\r\n                        col.width = c.width;\r\n                        col.footer = c.footer;\r\n                        col.groupFooter = c.groupFooter;\r\n                        newColumns.push(col);\r\n                    }\r\n                });\r\n\r\n                gridInstance.columns[0] = newColumns;\r\n            }\r\n\r\n            // gridInstance['checkOptions']();\r\n            gridInstance['columnsChanged']();\r\n        }\r\n    }\r\n\r\n \r\n\r\n    private updateGridView(modalRef, gridInstance, btn = null, _scheme = null) {\r\n        const settings = modalRef.content;\r\n\r\n        if (settings) {\r\n            const { sortInfo, viewColumns, columnFormat, groupField, expandGroupRows, multiHeaders } = settings;\r\n            const _colformats = columnFormat ? this.convertColumnsToSimple(columnFormat)[0] : [];\r\n            \r\n            this.saving = true;\r\n            \r\n            let _groupField = '';\r\n            if (gridInstance.groupRows && groupField && groupField.length) {\r\n                if (typeof groupField === 'string') {\r\n                    _groupField = groupField;\r\n                } else if(Array.isArray(groupField)) {\r\n                    _groupField = groupField.join(',');\r\n                }\r\n\r\n            }\r\n\r\n            let _sortInfo = sortInfo;\r\n            // å½å¤è¡¨å¤´éè¦æ¸çæåºå­æ®µä¸åç»å­æ®µï¼ä¿è¯è¿äºå­æ®µå¿é¡»å¨è¡¨å¤´ä¸­\r\n            if (gridInstance.enableSetMultiHeaders && multiHeaders) {\r\n                if (_groupField) {\r\n                    _groupField = cleanGroupFields(multiHeaders.viewCols, _groupField.split(','));\r\n                }\r\n\r\n                if (sortInfo && sortInfo.sortName && sortInfo.sortName.length) {\r\n                    _sortInfo = cleanSortFields(multiHeaders.viewCols, sortInfo);\r\n                }\r\n            }\r\n\r\n            \r\n            const saveData = { sortInfo: _sortInfo, viewColumns, groupField: _groupField, columnFormat: _colformats, expandGroupRows: expandGroupRows, multiHeaders };\r\n            \r\n            \r\n            const refreshGrid = () => {\r\n                if (gridInstance.groupRows) {\r\n                    gridInstance.expandGroupRows = expandGroupRows;\r\n                    gridInstance.groupField = _groupField;\r\n                }\r\n\r\n                if (gridInstance.enableSetMultiHeaders) {\r\n                    // è®¾ç½®è¡¨å¤´\r\n                    refreshGridColumns(gridInstance, multiHeaders.viewCols || []);\r\n                } else {\r\n                    if (viewColumns && viewColumns.length) {\r\n                        gridInstance.columns = gridInstance.columns.map(cols => {\r\n                            this.updateColumnFormat(cols, columnFormat, gridInstance);\r\n                            return this.newVisibleOrderColumns(cols, viewColumns, columnFormat, gridInstance);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                gridInstance.columnsChanged(true);\r\n                if (sortInfo && Object.keys(sortInfo).length) {\r\n                    const { sortName, sortOrder } = sortInfo;\r\n                    if (sortName && sortName.length) {\r\n                        gridInstance.sort(sortName.join(','), sortOrder.join(','));\r\n                    } else {\r\n                        gridInstance.clearSort();\r\n                    }\r\n                } else {\r\n                    gridInstance.clearSort();\r\n                }\r\n            }\r\n\r\n            const saveCurrent = () => {\r\n                this.setUserConfig(gridInstance.id, saveData).subscribe( () => {\r\n                    if (btn) {\r\n                        btn.disabled = false;\r\n                    }\r\n                    this.saving = false;\r\n                    refreshGrid();\r\n\r\n                    this.setActiveSchemeItem(gridInstance.id, _scheme);\r\n                    this.prevSchemeItem = _scheme;\r\n                    this.updateActiveSchemeItemSettings(gridInstance.id, saveData);\r\n                    this.setCurrentConfigs(saveData);\r\n                    modalRef.close();\r\n                });\r\n            }\r\n\r\n\r\n            if (gridInstance.showConfirmWhenSchemeChanged && gridInstance.enableScheme) {\r\n                const languageRes = this.localeSer.getValue('datagrid-scheme.schemeChanged')\r\n                const _changed = this.schemeService.isSchemeChanged(saveData, gridInstance.enableSetMultiHeaders);\r\n                if (_changed) {\r\n                    const msgDlg = this.messager.question2(languageRes.title, [\r\n                        {\r\n                            text: languageRes.cancel,\r\n                            cls: 'btn btn-light',\r\n                            handle: () => {\r\n                                this.saving = false;\r\n                                modalRef.close();\r\n                                msgDlg.close();\r\n                                this.restoreScheme(gridInstance);\r\n                            }\r\n                        },\r\n                        {\r\n                            text: languageRes.no,\r\n                            cls: 'btn btn-secondary',\r\n                            handle: () => {\r\n                                // ä¿å­å°å½åæ¹æ¡\r\n                                msgDlg.close();\r\n                                saveCurrent();\r\n                            }\r\n                        },\r\n                        {\r\n                            text: languageRes.yes,\r\n                            cls: 'btn btn-primary',\r\n                            handle: () => {\r\n                                // å¦å­æ°æ¹æ¡\r\n                                this.showNewSchemeDialog(gridInstance, {type: 'saveas'}, saveData, {\r\n                                    ok: (t) => {\r\n                                        this.saving = false;\r\n                                        modalRef.close();\r\n                                        this.currentSchemeitem = t;\r\n                                        this.setActiveSchemeItem(gridInstance.id, cloneDeep(t));\r\n                                        refreshGrid();\r\n                                    },\r\n                                    cancel: () => {\r\n                                        this.saving = false;\r\n                                        if (btn) {\r\n                                            btn.disabled = false;\r\n                                        }\r\n                                    }\r\n                                });\r\n                                msgDlg.close();\r\n                            }\r\n                        },\r\n                    ]);  // , languageRes.tips å­æ é¢\r\n                } else {\r\n                    if (this.currentSchemeitem && this.prevSchemeItem && this.currentSchemeitem.id === this.prevSchemeItem.id) {\r\n                        this.saving = false;\r\n                        modalRef.close();        \r\n                        refreshGrid();\r\n                    } else {\r\n                        saveCurrent();\r\n                    }\r\n                }\r\n            } else {\r\n                saveCurrent();\r\n            }\r\n            \r\n        } else {\r\n            modalRef.close();\r\n        }\r\n    }\r\n\r\n\r\n    newVisibleOrderColumns(cols: any, viewColumns: any, columnFormat: any, gridInstance: any) {\r\n        const hideColumns = [];\r\n        cols.forEach((element, index) => {\r\n            if (this.isNewAddColumn(element.field, columnFormat) && element.field !== '_datagrid-setting-control_' && !gridInstance.enableScheme) {\r\n                viewColumns.push(element.field);\r\n            } else {\r\n                element.visible = viewColumns.includes(element.field);\r\n                if (!element.visible) {\r\n                    hideColumns.push(element);\r\n                }\r\n            }\r\n        });\r\n\r\n        // æ¸çä¸å­å¨çå\r\n        let newCols = viewColumns.map( field => {\r\n            return cols.find(c => c.field === field);\r\n        }).filter(n => n);\r\n\r\n        if (hideColumns.length) {\r\n            newCols = newCols.concat(hideColumns);\r\n        }\r\n\r\n        return newCols.filter(c => c && c.field && c.field !== '_datagrid-setting-control_' );\r\n    }\r\n\r\n    /**\r\n     * æ¯å¦ä¸ºæ°å¢å çå­æ®µ\r\n     * æ°å¢çå­æ®µï¼éè¦å¨åè¡¨ä¸­å±ç¤ºåºæ¥ï¼å¹¶ä¿å­å°ä¸ªæ§åè®¾ç½®ä¸­\r\n     */\r\n    private isNewAddColumn(field: any, columns: any) {\r\n        columns = columns || [];\r\n        return !columns.find(c => c.field === field);\r\n    }\r\n\r\n\r\n    updateColumnFormat(cols: any[], columnFormat: any[], gridInstance) {\r\n        if (columnFormat && columnFormat.length) {\r\n            cols.forEach(col => {\r\n                const formatCol = columnFormat.find(f=> f.field === col.field);\r\n                if (formatCol) {\r\n                    col.width = formatCol.width;\r\n                    col.halign = formatCol.halign || 'left';\r\n                    col.align = formatCol.align || 'left';\r\n                    col.fixed = formatCol.fixed === 'UNFIXED'? '': formatCol.fixed;\r\n                    col.title = formatCol.title;\r\n\r\n                    if (gridInstance.groupRows && (col.allowGrouping || col.allowGrouping === undefined)) {\r\n                        if (!col.groupFooter) {\r\n                            col.groupFooter = formatCol.groupFooter;\r\n                        }\r\n\r\n                        if (col.groupFooter && col.groupFooter.options) {\r\n                            if (!formatCol.groupFooter.options) {\r\n                                formatCol.groupFooter.options = {};\r\n                            }\r\n                            col.groupFooter.options.text = formatCol.groupFooter.options.text || '';\r\n                            col.groupFooter.options.calculationType =\r\n                                formatCol.groupFooter.options.calculationType !== undefined &&\r\n                                formatCol.groupFooter.options.calculationType !== null ?\r\n                                parseInt(formatCol.groupFooter.options.calculationType, 10) : -1;\r\n                        }\r\n                    }\r\n\r\n                    if (gridInstance.showFooter && !gridInstance.footerTemplate) {\r\n\r\n                        if (!col.footer) {\r\n                            col.footer = formatCol.footer;\r\n                        }\r\n\r\n                        if (col.footer && col.footer.options) {\r\n                            if (!formatCol.footer.options) {\r\n                                formatCol.footer.options = {};\r\n                            }\r\n                            col.footer.options.text = formatCol.footer.options.text || '';\r\n                            col.footer.options.calculationType =\r\n                                formatCol.footer.options.calculationType !== undefined &&\r\n                                formatCol.footer.options.calculationType !== null ?\r\n                                parseInt(formatCol.footer.options.calculationType, 10) : -1;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // åå»ºå¯ä¸key, ç±uri + gridId ç»æï¼å¹¶æ··æ·\r\n    private createConfigKey(gridId: string) {\r\n        const grid = this.getGridInstance(gridId);\r\n        if (grid) {\r\n            return grid.dgs.createConfigKey(gridId);\r\n        } else {\r\n            this.writeDebugMsg('DatagridSettingService: Can not find the grid instance.');\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private getCurrentUserSettings(gridId: string) {\r\n        const gridInstance = this.getGridInstance(gridId);\r\n        const config = {sortInfo: {}, viewColumns: [], groupField: '', columnFormat: []};\r\n\r\n        if (gridInstance) {\r\n            const { sortName, sortOrder, columns} = gridInstance;\r\n            if (sortName) {\r\n                const sortInfo = {\r\n                    sortName: sortName.split(','),\r\n                    sortOrder: sortOrder.split(',')\r\n                };\r\n\r\n                config.sortInfo = sortInfo;\r\n            }\r\n\r\n            const viewColumns = columns[0].filter(n => n.visible || n.visible === undefined).map(n => n.field);\r\n            config.viewColumns = viewColumns;\r\n            config.columnFormat = this.convertColumnsToSimple(this._convertColumnsToSimple(gridInstance))[0];\r\n\r\n            if (gridInstance.groupRows) {\r\n                config.groupField = gridInstance.groupField;\r\n            }\r\n        }\r\n        return config;\r\n    }\r\n\r\n\r\n    saveUserConfig(gridId: string) {\r\n        const config = this.getCurrentUserSettings(gridId);\r\n        return this.setUserConfig(gridId, config);\r\n    }\r\n\r\n    setUserConfig(gridId: string, config: any ): Observable<any> {\r\n        const gridIns = this.getGridInstance(gridId);\r\n        const key = this.createConfigKey(gridId);\r\n        const LOCALEID = this.localeSer.localeId;\r\n        const currentConfig = localStorage.getItem(key);\r\n        const _config = (currentConfig ? JSON.parse(currentConfig) : { }) || {};\r\n        if (config) {\r\n            if (_config) {\r\n                _config[LOCALEID] = config;\r\n            }\r\n\r\n            if (gridIns && gridIns.enableSetMultiHeaders) {\r\n                _config['isMultiHeader'] = true;\r\n            }\r\n\r\n            localStorage.setItem(key, JSON.stringify(_config));\r\n        } else {\r\n            localStorage.removeItem(key);\r\n        }\r\n\r\n\r\n        if (this.httpRestService) {\r\n            if (gridIns && gridIns.enableScheme) {\r\n                const activeScheme = this.getActiveSchemeItem(gridId);\r\n                if (activeScheme) {\r\n                    this.updateSchemeSettings(activeScheme, config);\r\n                    if (activeScheme.type === 'private') {\r\n                        return this.schemeService.saveScheme(activeScheme, gridId, true, gridIns.enableSetMultiHeaders);\r\n                    } else {\r\n                        return this.schemeService.checkAuthority().pipe(\r\n                            switchMap((t: SchemeAuthModel) => {\r\n                                if (t.success) {\r\n                                    const hasOrgAuthority = t.authOrganizationData && t.authOrganizationData.length;\r\n                                    if (activeScheme.type === 'public' || (activeScheme.type === 'org' && hasOrgAuthority)) {\r\n                                        return this.schemeService.saveScheme(activeScheme, gridId, true, gridIns.enableSetMultiHeaders);\r\n                                    }\r\n                                }\r\n\r\n                                return of(true);\r\n                            }),\r\n                        )\r\n                    }\r\n                } else {\r\n                    // å¦ä¸ºç³»ç»é¢å¶æ¶ï¼ææ æ¹æ¡å¤ç\r\n                    return this._saveUserConfig(key,  config ? _config :  '');\r\n                    // return of(true);\r\n                }\r\n            }\r\n\r\n            // ä¿å­è³æ°æ®åº\r\n            return this._saveUserConfig(key,  config ? _config :  '');\r\n        }\r\n\r\n        return of(true);\r\n    }\r\n\r\n    getUserConfig(key, isMultiHeader = false): Observable<any> {\r\n        if (this.httpRestService) {\r\n            return this._getUserConfig(key, isMultiHeader);\r\n        } else {\r\n            return of(this.getLocalSettings(key, isMultiHeader));\r\n        }\r\n    }\r\n\r\n\r\n    getLocalSettings(key: string, isMultiHeader = false) {\r\n        const config = localStorage.getItem(key);\r\n        if (config) {\r\n            const con = JSON.parse(config);\r\n\r\n            if (isMultiHeader && !con['isMultiHeader']) {\r\n                return null;\r\n            } else {\r\n                if (con['isMultiHeader']) {\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            if (con[this.localeSer.localeId]) {\r\n                return con[this.localeSer.localeId];\r\n            } else {\r\n                if (Object.keys(con).indexOf('viewColumns') > -1) {\r\n                    return con;\r\n                }\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    private getDefaultScheme(schemeList: Array<DatagridSchemeModel>) {\r\n        // 0ãè¿æ»¤åºå½åè¯­è¨çæ¹æ¡åè¡¨\r\n        // 1ãæä¸ªäººé»è®¤çè¿åä¸ªäººé»è®¤æ¹æ¡\r\n        // 2ãæ²¡æä¸ªäººé»è®¤æ¹æ¡çï¼è¿åå¬å±æ¹æ¡ç¬¬1ä¸ª\r\n        // 3ãæ²¡æå¬å±æ¹æ¡ï¼è¿åç»ç»æ¹æ¡ç¬¬1ä¸ª\r\n        // 4ãæ²¡æç»ç»æ¹æ¡ç, è¿åä¸ªäººæ¹æ¡ç¬¬1ä¸ª\r\n        // 5ãæ²¡æä¸ªäººæ¹æ¡çï¼è¿åç³»ç»é¢å¶ï¼å³è¡¨åè®¾è®¡æ¶çæ ¼å¼\r\n        schemeList = schemeList.filter(n => {\r\n            return JSON.parse(n.name)[this.localeSer.localeId]\r\n        });\r\n        \r\n        let defaultScheme = null;\r\n        if (!schemeList || !schemeList.length) {\r\n            return defaultScheme;\r\n        } else {\r\n            defaultScheme = schemeList.find(n => n.isDefault);\r\n            if (!defaultScheme) {\r\n                let publicSchemes = schemeList.filter(n => n.type === 'public');\r\n\r\n                if (!publicSchemes.length) {\r\n                    publicSchemes = schemeList.filter(n => n.type === 'org');\r\n                }\r\n\r\n                if (publicSchemes.length) {\r\n                    defaultScheme = publicSchemes[0];\r\n                } else {\r\n                    defaultScheme = schemeList[0];\r\n                }\r\n            }\r\n        }\r\n\r\n        return defaultScheme;\r\n    }\r\n\r\n\r\n    getSettings(gridId: string) {\r\n        const key = this.createConfigKey(gridId);\r\n        const gridIns = this.getGridInstance(gridId);\r\n\r\n        let schemeList$ = of([]);\r\n        if (gridIns && gridIns.enableScheme) {\r\n            schemeList$ = this.getSchemeList(gridId);\r\n        }\r\n\r\n        return forkJoin(schemeList$, this.getUserConfig(key), this.schemeService.getLanguages()).pipe(\r\n            map(([schemeList, userSetting, supportedLanguages]) => {\r\n                schemeList = schemeList || [];\r\n                this.languages = supportedLanguages;\r\n                if (!schemeList.length) {\r\n                    return userSetting;\r\n                } else {\r\n                    // ç¼å­æ¹æ¡åè¡¨\r\n                    this.setSchemeList(schemeList, gridId);\r\n                    // æ¥æ¾é»è®¤æ¹æ¡\r\n                    const defaultScheme: DatagridSchemeModel = this.getDefaultScheme(schemeList);\r\n                    if (!defaultScheme) {\r\n                        return userSetting;\r\n                    } else {\r\n                        this.setActiveSchemeItem(gridId, defaultScheme);\r\n                        let userSettings = null;\r\n                        if (defaultScheme.queryConditionString) {\r\n                            userSettings = JSON.parse(defaultScheme.queryConditionString);\r\n                        }\r\n                        if (userSettings) {\r\n                            const localeId = this.localeSer.localeId;\r\n                            if (userSettings[localeId]) {\r\n                                localStorage.setItem(key, JSON.stringify(userSettings));\r\n                                return userSettings[localeId];\r\n                            } else {\r\n                                userSettings[localeId] = null;\r\n                                localStorage.setItem(key, JSON.stringify(userSettings));\r\n                                return null;\r\n                            }\r\n                        } else {\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n\r\n    private _saveUserConfig(key, config) {\r\n        try {\r\n            const userConfigSetting = {\r\n                configkey1: key,\r\n                configkey2: '',\r\n                configkey3: '',\r\n                textvalue: config ? JSON.stringify(config) :  ''\r\n            };\r\n\r\n            return this.httpRestService.saveUserSettings(userConfigSetting);\r\n        } catch (e) {\r\n            this.writeDebugMsg(e, 'error');\r\n        }\r\n    }\r\n\r\n    resetUserConfig(gridInstance, modalRef) {\r\n        const restorDefaultText = this.localeSer.getValue('datagrid.settings.restoreDefaultSettingsText') || 'ç¡®è®¤è¦æ¢å¤é»è®¤è®¾ç½®åï¼';\r\n        this.messager.confirm(restorDefaultText).pipe(\r\n            switchMap( (t: boolean) => {\r\n                if (t) {\r\n                    return this.setUserConfig(gridInstance.id, '');\r\n                }\r\n                return of(t);\r\n            })\r\n        ).subscribe((t: boolean) => {\r\n            if (t) {\r\n                this.resetGridView(gridInstance);\r\n                modalRef.close();\r\n            }\r\n        });\r\n    }\r\n\r\n    private _getUserConfig(key, isMultiHeader = false) {\r\n        try {\r\n            return this.httpRestService.getUserSettings(key).pipe(\r\n                map((ucs: any) => {\r\n                    if (ucs && ucs.textValue) {\r\n                        let c = JSON.parse(ucs.textValue);\r\n                        if (c) {\r\n                            if (isMultiHeader && !c['isMultiHeader']) {\r\n                                return null;\r\n                            } else {\r\n                                if (c['isMultiHeader']) {\r\n                                    return null;\r\n                                }\r\n                            }\r\n\r\n                            if (c[this.localeSer.localeId]) {\r\n                                localStorage.setItem(key, ucs.textValue);\r\n                                return c[this.localeSer.localeId];\r\n                            } else {\r\n                                c[this.localeSer.localeId] = null;\r\n                                localStorage.setItem(key, JSON.stringify(c));\r\n                                return null;\r\n                            }\r\n\r\n                        }\r\n                        return null;\r\n                    }\r\n                    return null;\r\n                })\r\n            );\r\n        } catch (e) {\r\n            if (this.debugSer) {\r\n                this.debugSer.error(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    private buildSubmitData(gridId: string, settings = null) {\r\n        const LOCALEID = this.localeSer.localeId;\r\n        if (!settings) {\r\n            settings = this.getCurrentUserSettings(gridId);\r\n        }\r\n        const localeKey = this.createConfigKey(gridId);\r\n        const currentConfig = localStorage.getItem(localeKey);\r\n        const _config = (currentConfig ? JSON.parse(currentConfig) : { }) || {};\r\n        if (_config) {\r\n            _config[LOCALEID] = settings;\r\n        }\r\n\r\n        return _config;\r\n    }\r\n\r\n// ----------------------------------------------------------------------------------------------- \\\\\r\n\r\n    private showSchemeListDialog(gridInstance: any, schemeList: any, authInfo: SchemeAuthModel, simpleRef: any) {\r\n        const modalOpts = {\r\n            width: 760, height: 577, showHeader: false, title: 'æ§å¶é¢æ¿',\r\n            initialState: {\r\n                items: (schemeList || []).filter(n => {\r\n                    return JSON.parse(n.name)[this.localeSer.localeId]\r\n                }),\r\n                removeItem: authInfo.success,\r\n                currentUserId: authInfo.currentUserId,\r\n                currentSchemeId: this.currentSchemeitem ? this.currentSchemeitem.id: ''\r\n            },\r\n            showButtons: false\r\n        };\r\n\r\n        const schemeListDlg = this.modalSer.show(SchemeListComponent, modalOpts);\r\n        // schemeListDlg.dialog.location.nativeElement.style.zIndex = 2031;\r\n\r\n        const instance = schemeListDlg.content as SchemeListComponent;\r\n        instance.closeModal.subscribe( () => {\r\n            schemeListDlg.close();\r\n        });\r\n\r\n        instance.submitModal.subscribe((t: any) => {\r\n            this.schemeService.updateScheme(t, gridInstance.id, gridInstance.enableSetMultiHeaders).subscribe((e: any) => {\r\n                if(e === false) {\r\n                    schemeListDlg.close();\r\n                    return;\r\n                }\r\n                const msg = 'åè®¾ç½®æ¹æ¡ä¿å­æåã';\r\n                if (this.notifyService) {\r\n                    this.notifyService.success(msg);\r\n                } else {\r\n                    this.messager.success(msg);\r\n                }\r\n\r\n                if(t.defaultId) {\r\n                    schemeList.forEach(n => {\r\n                        n.isDefault = false;\r\n                        if (n.id === t.defaultId) {\r\n                            n.isDefault = true;\r\n                            // this.setActiveSchemeItem(gridInstance.id, n);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                let newSchemeList = schemeList;\r\n                if (t.deletedIds && t.deletedIds.length) {\r\n                    newSchemeList = schemeList.filter(n => {\r\n                        return !t.deletedIds.includes(n.id)\r\n                    });\r\n                }\r\n\r\n                this.schemeService.setSchemeList(gridInstance.id, newSchemeList);\r\n                schemeListDlg.close();\r\n\r\n                const currentScheme = this.getActiveSchemeItem(gridInstance.id);\r\n                if (!currentScheme) {\r\n                    this.setActiveSchemeItem(gridInstance.id, null);\r\n                    simpleRef.instance.currentSchemeItem = null;\r\n                    simpleRef.instance.resetToDefault();\r\n                    this.prevSchemeItem = null;\r\n                    simpleRef.instance.onSubmitClick();\r\n                }\r\n\r\n            });\r\n        });\r\n\r\n        const modalContainer = schemeListDlg.dialog.instance as ModalContainerComponent;\r\n        modalContainer.draggbar.handle = instance.header.nativeElement;\r\n    }\r\n\r\n    // æ°å¢æå¦å­æ¹æ¡\r\n    private showNewSchemeDialog(gridInstance, e: { type: 'new' | 'saveas'}, settings, callback: NewSchemeCallBack) {\r\n        const modalOpts = {\r\n            width: 480, height: 269, showHeader: false, title: 'æ§å¶é¢æ¿',\r\n            initialState: {\r\n                languages: this.languages\r\n            },\r\n            showButtons: false,\r\n            resizable: false\r\n        };\r\n\r\n        const newSchemeDlg = this.modalSer.show(NewSchemeComponent, modalOpts);\r\n        // newSchemeDlg.dialog.location.nativeElement.style.zIndex = 2031;\r\n        const instance = newSchemeDlg.content as NewSchemeComponent;\r\n        instance.closeModal.subscribe( () => {\r\n            newSchemeDlg.close();\r\n            if (callback && callback.cancel) {\r\n                callback.cancel();\r\n            }\r\n        });\r\n\r\n        instance.submitModal.pipe(\r\n            switchMap((t: any) => {\r\n                return this.createNewScheme(gridInstance.id, t, e.type === 'new', settings);\r\n            })\r\n        ).subscribe((t: any) => {\r\n            if (t.flag === false) {\r\n                const msg = t.msg;\r\n                let _msg = msg;\r\n                if (msg) {\r\n                    if (msg.indexOf('|') > -1) {\r\n                        _msg = msg.split('|').map((langcode) => {\r\n                            return this.localeSer.getValue('datagrid-settings.'+ langcode)\r\n                        }).join('');\r\n                    } else {\r\n                        _msg = this.localeSer.getValue('datagrid-settings.'+ msg );\r\n                    }\r\n                    if (this.notifyService) {\r\n                        this.notifyService.info(_msg);\r\n                    } else {\r\n                        this.messager.info(_msg);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            // æ´æ°æ¹æ¡åè¡¨\r\n            const schemeList = this.schemeService.getStateValue(gridInstance.id, 'list') || [];\r\n            if (t.isDefault) {\r\n                schemeList.forEach(n => {\r\n                    n.isDefault = false;\r\n                });\r\n            }\r\n            schemeList.push(t);\r\n            this.schemeService.setSchemeList(gridInstance.id, schemeList);\r\n            if (callback && callback.ok) {\r\n                callback.ok(t);\r\n            }\r\n            newSchemeDlg.close();\r\n        });\r\n\r\n        instance.checkAuthority.pipe(\r\n            switchMap((t: any) => {\r\n                return this.schemeService.checkAuthority().pipe(\r\n                    map((auth: SchemeAuthModel) => {\r\n                        return {\r\n                            type: t,\r\n                            ...auth\r\n                        }\r\n                    })\r\n                )\r\n            })\r\n        ).subscribe((t: any) => {\r\n            let hasAuthority = { public: true, org: true };\r\n            // æ¨æ²¡æå°æ¹æ¡çä½¿ç¨èå´è®¾ç½®ä¸ºå¬å±çæéã\r\n            let _msg = 'noAuth.public';\r\n            if (t.type.value === 'org') {\r\n                // æ¨æ²¡æå°æ¹æ¡çä½¿ç¨èå´è®¾ç½®ä¸ºç»ç»çæéã\r\n                _msg = 'noAuth.org';\r\n            }\r\n\r\n            const msg = this.localeSer.getValue('datagrid-settings.'+ _msg );\r\n            if (t.success) {\r\n                const hasPublicAuthority = t.authOperationData && t.authOperationData.length;\r\n                hasAuthority.public = hasPublicAuthority;\r\n                const hasOrgAuthority = t.authOrganizationData && t.authOrganizationData.length;\r\n                hasAuthority.org = hasOrgAuthority;\r\n                if (t.type.value === 'public') {\r\n                    instance.schemeInfo.type = t.type.value;\r\n                } else if (t.type.value === 'org') {\r\n                    if (!hasOrgAuthority) {\r\n                        this.notifyService.warning(msg);\r\n                    }else {\r\n                        instance.schemeInfo.type = t.type.value;\r\n                        instance.schemeInfo.orgids = t.authOrganizationData.join(',')\r\n                        instance.dataPermissionIds = t.authOrganizationData;\r\n                    }\r\n                }\r\n            } else {\r\n                this.notifyService.warning(msg);\r\n                hasAuthority = { public: false, org: false };;\r\n            }\r\n            instance.refresh(hasAuthority);\r\n        })\r\n\r\n        const modalContainer = newSchemeDlg.dialog.instance as ModalContainerComponent;\r\n        modalContainer.draggbar.handle = instance.header.nativeElement;\r\n    }\r\n\r\n    getSchemeList(gridId: string) {\r\n        const gridIns = this.getGridInstance(gridId);\r\n        return this.schemeService.getSchemeList(gridId, gridIns.enableSetMultiHeaders);\r\n    }\r\n\r\n    /** æ°å¢æ¹æ¡\r\n     *  isNewSchemeï¼æ¯å¦æ°å æ¹æ¡ï¼å¦åä¸ºå¦å­ä¸º\r\n     *  currentSettingsï¼ å½åéç½®ä¿¡æ¯\r\n     *  data: æ°å»ºæ¹æ¡çªå£ä¼ éæ°æ®\r\n     */\r\n    createNewScheme(gridId: string, data: any, isNewScheme = true, currentSettings: any) {\r\n        if(!data.name) {\r\n            // msg è¯·è¾å¥æ¹æ¡åç§°\r\n            return of({flag: false, msg: 'required.schemeName'});\r\n        } else {\r\n            const hasName = this.schemeService.hasSchemeName(gridId, data.name);\r\n\r\n            if (typeof hasName === 'boolean' && hasName) {\r\n                // msg 'æ¹æ¡åç§°å·²å­å¨ï¼è¯·ä¿®æ¹ã'\r\n                return of({flag: false, msg: 'has.exist'});\r\n            } else if (Array.isArray(hasName) && hasName.length) {\r\n                \r\n                const getMessageCode = (langCode) => {\r\n                    if (langCode === 'zh-CHS') {\r\n                        return 'has.chs'; // ç®ä½ä¸­æåç§°å·²å­å¨ã\r\n                    } else if(langCode === 'zh-CHT') {\r\n                        return 'has.cht'; // ç¹é«ä¸­æåç¨±å·²å­å¨ã\r\n                    } else {\r\n                        return 'has.en'; // è±æåç§°å·²å­å¨\r\n                    }\r\n                }\r\n\r\n                if (hasName.includes(this.localeSer.localeId)) {\r\n                    const msg = getMessageCode(this.localeSer.localeId);\r\n                    return of({flag: false, msg});\r\n                } else {\r\n                    const msgs = hasName.map(n => {\r\n                        return getMessageCode(n);\r\n                    });\r\n\r\n                    return of({flag: false, msg: msgs.join('|')});\r\n                }\r\n            }\r\n        }\r\n\r\n        const requiredName = [];\r\n\r\n        if (!data.name[this.localeSer.localeId]) {\r\n            requiredName.push(this.localeSer.localeId);\r\n        }\r\n\r\n        // this.languages.forEach(n => {\r\n        //     if (data.name[n.code] === '' || data.name[n.code] === undefined) {\r\n        //         requiredName.push(n.code);\r\n        //     }\r\n        // });\r\n\r\n        if (requiredName.length) {\r\n            const msgs = requiredName.map(n => {\r\n                if (n === 'zh-CHS') {\r\n                    return 'required.chs'; //'è¯·è¾å¥ç®ä½ä¸­æåç§°ã';\r\n                } else if(n === 'zh-CHT') {\r\n                    return 'required.cht'; //'è¯·è¾å¥ç¹ä½ä¸­æåç§°ã';\r\n                } else {\r\n                    return 'required.en'; // 'è¯·è¾å¥è±æåç§°ã';\r\n                }\r\n            });\r\n            return of({flag: false, msg: msgs.join('|')});\r\n        }\r\n\r\n        if (data.type && data.type === 'org' && (!data.orgids || !data.orgids.length)) {\r\n            // msg 'è¯·éæ©ç»ç»'\r\n            return of({flag: false, msg: 'required.org'});\r\n        }\r\n        let _config = null;\r\n\r\n        if (!isNewScheme) {\r\n            const LOCALEID = this.localeSer.localeId;\r\n\r\n            if (currentSettings && currentSettings.columnFormat) {\r\n                currentSettings.columnFormat = this.convertColumnsToSimple(currentSettings.columnFormat);\r\n            }\r\n\r\n            _config ={ [LOCALEID]: currentSettings };\r\n        }\r\n\r\n        const newId = this.idService.guid();\r\n        let isDefault = data.isDefault;\r\n        if (isDefault) {\r\n            if (data.type !== 'private') {\r\n                isDefault = false;\r\n            }\r\n        }\r\n\r\n        if (data.name && typeof data.name === 'object') {\r\n            data.name = JSON.stringify(data.name);\r\n        }\r\n\r\n        const gridInstance = this.getGridInstance(gridId);\r\n        if (gridInstance && gridInstance.enableSetMultiHeaders && _config) {\r\n            _config['isMultiHeader'] = gridInstance.enableSetMultiHeaders;\r\n        }\r\n\r\n        const scheme: DatagridSchemeModel = {\r\n            id: newId,\r\n            belongId: '',\r\n            code: '',\r\n            name: data.name,\r\n            type: data.type,\r\n            isDefault: isDefault,\r\n            isSystem: false,\r\n            extendId: 'datagrid-settings-scheme',\r\n            extendInfo: this.buildOrgAndSchemeRelations(newId, data.orgids),\r\n            queryConditionString: _config? JSON.stringify(_config): '',\r\n        };\r\n\r\n        return this.schemeService.saveScheme(scheme, gridId, false, gridInstance.enableSetMultiHeaders).pipe(\r\n            map(() => {\r\n                return scheme;\r\n            })\r\n        );\r\n    }\r\n\r\n    setSchemeList(schemeList: DatagridSchemeModel[], gridId: string) {\r\n        this.schemeService.update({list: schemeList}, gridId);\r\n    }\r\n\r\n    private buildOrgAndSchemeRelations(schemeId: string, orgIds: any) {\r\n        if (!orgIds || !orgIds.length) {\r\n            return  [];\r\n        }\r\n        \r\n        if (typeof orgIds === 'string') {\r\n            orgIds = orgIds.split(',');\r\n        }\r\n\r\n        return orgIds.map(n => {\r\n            return {\r\n                id: this.idService.guid(),\r\n                orgId: n,\r\n                relatedId: schemeId\r\n            }\r\n        });\r\n    }\r\n\r\n    private getCurrentSchemeSettings(gridId: string): SettingModel {\r\n        const activeScheme = this.getActiveSchemeItem(gridId) as DatagridSchemeModel;\r\n        if (activeScheme && activeScheme.queryConditionString) {\r\n            return JSON.parse(activeScheme.queryConditionString);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setCurrentConfigs(settings: SettingModel) {\r\n        this['CURRENT_CONFIGS'] = settings;\r\n    }\r\n\r\n    private getCurrentConfigs() {\r\n        return this['CURRENT_CONFIGS'] || {};\r\n    }\r\n\r\n    private applySettings(e: any, gridInstance: any, modal?: any) {\r\n        e.target.disabled = true;\r\n        if (this.saving) {\r\n            return;\r\n        }\r\n        if (!this.saving) {\r\n            let _scheme, dlg;\r\n            if (modal){\r\n                const {modalRef, currentScheme} = modal;\r\n                dlg = modalRef;\r\n                _scheme = currentScheme;\r\n            } else {\r\n                dlg = e;\r\n                _scheme = e.currentScheme;\r\n            }\r\n\r\n            this.updateGridView(dlg, gridInstance, e.target, _scheme);\r\n        }\r\n    }\r\n\r\n    getMultiHeaderColumns(viewCols, gridInitOptions) {\r\n        return mergetColumnOptions(viewCols, gridInitOptions)\r\n    }\r\n}\r\n","import { OnInit, Component, Input, ViewChild, Injector, EventEmitter, Output, ChangeDetectorRef } from '@angular/core';\r\nimport { MultiSelectComponent } from '@farris/ui-multi-select';\r\n\r\n@Component({\r\n    selector: 'sort-setting',\r\n    templateUrl: './datagrid-sort-setting.component.html'\r\n})\r\nexport class DatagridSortSettingComponent implements OnInit {\r\n\r\n    @Input() idField = 'field';\r\n    @Input() valueField = 'field';\r\n    @Input() textField = 'title';\r\n    @Input() selectedIds = [];\r\n\r\n    @Input() treeData = [];\r\n    @ViewChild('ms') ms: MultiSelectComponent;\r\n\r\n    @Output() sortInfoChange = new EventEmitter();\r\n\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef) {}\r\n\r\n\r\n    ngOnInit() {}\r\n\r\n    setFieldSortOrder($event: MouseEvent, data: any, order: string) {\r\n        $event.stopPropagation();\r\n        data.sortable = true;\r\n        data.order = order;\r\n\r\n        if (!order) {\r\n            this.ms.moveToLeft(data);\r\n        }\r\n\r\n        this.cd.detectChanges();\r\n        this.onSelectionsChange(null);\r\n        return false;\r\n    }\r\n\r\n    getSortInfo() {\r\n        if (this.ms.selections) {\r\n            const names = [];\r\n            const orders = [];\r\n            this.ms.selections.forEach(col => {\r\n                col.order = col.order || 'asc';\r\n                names.push(col.field);\r\n                orders.push(col.order);\r\n            });\r\n\r\n            return { sortName: names, sortOrder: orders };\r\n        }\r\n        return '';\r\n    }\r\n\r\n    onSelectionsChange($event) {\r\n        const si = this.getSortInfo();\r\n        this.sortInfoChange.emit(si);\r\n    }\r\n\r\n    onBeforeMove($event) {\r\n        const items: any = $event.items as any;\r\n        if ($event.target.indexOf('rightAll') > -1) {\r\n            for (const id in items) {\r\n                if ($event.items[id]) {\r\n                    $event.items[id].order = 'asc';\r\n                }\r\n            }\r\n        } else {\r\n            if ($event.target === 'right') {\r\n                for (const id in items) {\r\n                    if ($event.items[id]) {\r\n                        $event.items[id].order = 'asc';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Component, OnInit, Input, Injector, ChangeDetectorRef, ElementRef, ViewChild, EventEmitter, Output, OnChanges, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { DatagridSettingsComponent } from '../datagrid-settings.component';\r\nimport { getDataFieldsForMultiHeaders } from '../mutli-headers.helper';\r\n\r\n@Component({\r\n    selector: 'column-group-setting',\r\n    templateUrl: './column-group.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ColumnGroupSettingComponent implements OnInit, OnChanges {\r\n    @Input() columns;\r\n    @Input() fields = [];\r\n    @Input() formatColumns = [];\r\n\r\n    @Input() groupFields = [];\r\n    @Input() expandGroupRows = true;\r\n\r\n    @Input() enabelGroupFooter = false;\r\n\r\n    @Output() groupFieldsChange = new EventEmitter();\r\n    @Output() formatColumnsChange = new EventEmitter();\r\n    @Output() expandGroupRowsChange = new EventEmitter();\r\n\r\n    @ViewChild('groupingSetting') groupingSettingEl: ElementRef;\r\n    @ViewChild('selectcolumnspanel') selectcolumnspanel: ElementRef;\r\n    @ViewChild('groupSumform') colForm: NgForm;\r\n\r\n    // åç»å\r\n    groupColumns = [];\r\n\r\n    // ææåè®¸åç»å\r\n    allowGroupColumns = [];\r\n    activeCalculationCol = null;\r\n\r\n\r\n    showSelectColumnsPanel = false;\r\n    summaryItems = [];\r\n    summaryItems2 = [];\r\n    constructor(private injector: Injector, public gridSettingComponentRef: DatagridSettingsComponent, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this.summaryItems = this.gridSettingComponentRef.summaryItems;\r\n        this.summaryItems2 = this.gridSettingComponentRef.summaryItems2;\r\n\r\n        //this.formatColumns = getDataFieldsForMultiHeaders(this.columns);\r\n\r\n\r\n        this.setGroupColumns();\r\n        this.registerEventHandle();\r\n        this.initCalculationColumns();\r\n\r\n        if (this.colForm) {\r\n            this.colForm.valueChanges.subscribe(v => {\r\n                if (!this.colForm.pristine) {\r\n                    this.formatColumnsChange.emit(this.formatColumns);\r\n                }\r\n            });\r\n        }\r\n        \r\n        this.formatColumns.forEach(n => {\r\n            this.checkColumnOptions(n);\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.formatColumns && !changes.formatColumns.isFirstChange()) {\r\n            this.formatColumns.forEach(n => {\r\n                this.checkColumnOptions(n);\r\n            });\r\n            this.setGroupColumns();\r\n            this.initCalculationColumns();\r\n        }\r\n    }\r\n\r\n    private initCalculationColumns() {\r\n        if (this.formatColumns) {\r\n            this.activeCalculationCol = this.formatColumns[0];\r\n        }\r\n    }\r\n\r\n    private registerEventHandle() {\r\n        this.groupingSettingEl.nativeElement.addEventListener('click', (e) => {\r\n            if (e.target  !== this.selectcolumnspanel.nativeElement) {\r\n                this.showSelectColumnsPanel = false;\r\n            }\r\n        }, false);\r\n    }\r\n\r\n    private setGroupColumns() {\r\n        if (this.groupFields && this.groupFields.length) {\r\n            const cols: any = this.formatColumns;\r\n            this.groupColumns = this.groupFields.map( f => {\r\n                const col = cols.find(col => col.field === f);\r\n                 return col;\r\n            }).filter(n => n);\r\n\r\n            this.groupFields = this.groupColumns.map(n => n.field);\r\n            this.groupFieldsChange.emit(this.groupFields);\r\n        } else {\r\n            this.groupColumns = [];\r\n        }\r\n        this.onGroupFieldsChange();\r\n    }\r\n\r\n    private getAllowGroupingColumns() {\r\n        const cols: any = this.formatColumns;\r\n        return cols.filter(n => {\r\n            if (n.field.indexOf('farris-datagrid-column_') > -1) {\r\n                return false;\r\n            }\r\n            return  n.allowGrouping || n.allowGrouping === undefined \r\n        });\r\n    }\r\n\r\n    private onGroupFieldsChange() {\r\n        this.groupFieldsChange.emit(this.groupFields);\r\n    }\r\n\r\n    private checkColumnOptions(col) {\r\n        if (col) {\r\n\r\n            if (col.groupFooter === undefined) {\r\n                col.groupFooter = { options: {calculationType: -1} };\r\n            } else {\r\n                col.groupFooter.options = col.groupFooter.options || {calculationType: -1};\r\n                if (col.groupFooter.options.calculationType === undefined) {\r\n                    col.groupFooter.options.calculationType = -1;\r\n                }\r\n            }\r\n\r\n            // if (this.activeField.footer === undefined) {\r\n            //     this.activeField.footer =  { options: {calculationType: -1} };\r\n            // } else {\r\n            //     this.activeField.footer.options = this.activeField.footer.options || {calculationType: -1};\r\n            //     if (this.activeField.footer.options.calculationType === undefined) {\r\n            //         this.activeField.footer.options.calculationType = -1;\r\n            //     }\r\n            // }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¾ç¤ºæéèå­æ®µéåé¢æ¿\r\n     */\r\n    toggleGroupingColumnPanel($event) {\r\n        $event.stopPropagation();\r\n        this.showSelectColumnsPanel = !this.showSelectColumnsPanel;\r\n        this.allowGroupColumns = this.getAllowGroupingColumns();\r\n    }\r\n\r\n    /** æ·»å åç»å­æ®µ */\r\n    addGroupColumn($event, col) {\r\n        $event.stopPropagation();\r\n        if (this.groupFields.indexOf(col.field) === -1) {\r\n            this.groupColumns = [...this.groupColumns, col];\r\n            this.groupFields = this.groupColumns.map(n => n.field);\r\n            this.onGroupFieldsChange();\r\n            this.showSelectColumnsPanel = false;\r\n        }\r\n    }\r\n\r\n    /** ç§»é¤åç»å­æ®µ */\r\n    onRemoveGroupingField($event, col) {\r\n        $event.stopPropagation();\r\n        this.groupFields = this.groupFields.filter(n => n !== col.field);\r\n        this.setGroupColumns();\r\n    }\r\n\r\n    /** æå¨åç»å­æ®µè¿è¡æåº */\r\n    onGroupingFieldDropped($event) {\r\n        const { removedIndex, addedIndex } = $event;\r\n\r\n        const removedItem = this.groupFields.splice(removedIndex, 1);\r\n        this.groupFields.splice(addedIndex, 0, ...removedItem);\r\n        this.setGroupColumns();\r\n    }\r\n\r\n    onFieldClick($event, col) {\r\n        this.activeCalculationCol = col;\r\n    }\r\n}\r\n","\r\nimport { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input,\r\n        OnChanges, SimpleChanges, Output, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD as SmoothDndForVisible, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\n\r\n\r\nconst { wrapperClass, animationClass } = constants;\r\nSmoothDndForVisible.dropHandler = dropHandlers.reactDropHandler().handler;\r\nSmoothDndForVisible.wrapChild = false;\r\n\r\nexport interface DragStartEndInfo {\r\n    isSource: boolean;\r\n    payload: any;\r\n    willAcceptDrop: boolean;\r\n}\r\n\r\n@Directive({\r\n    selector: '[column-visible-drag]',\r\n})\r\nexport class ColumnVisibleDragDirective implements AfterViewInit, OnDestroy {\r\n    private container: any;\r\n    @Output() drop = new EventEmitter();\r\n    @Input() options: ContainerOptions = {\r\n        behaviour: 'move',\r\n        dragHandleSelector: '.field-drag-handle',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        getChildPayload: this.getChildPayload.bind(this),\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            return true;\r\n        },\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.drop.emit(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2, private el: ElementRef) { }\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n    private initDnD() {\r\n        this.disposeDnd();\r\n        this.container = SmoothDndForVisible(\r\n            this.el.nativeElement,\r\n            this.options\r\n        );\r\n    }\r\n\r\n    private getChildPayload(index) {\r\n        return index;\r\n    }\r\n\r\n    private onDropReady(dropResult) {\r\n    }\r\n\r\n    private onDragStart(info) {\r\n\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n\r\n    }\r\n\r\n}\r\n","import { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input,  Output, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD as SmoothDndForGroupingField, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\n\r\nSmoothDndForGroupingField.dropHandler = dropHandlers.reactDropHandler().handler;\r\nSmoothDndForGroupingField.wrapChild = false;\r\n\r\n@Directive({\r\n    selector: '[column-group-drag]',\r\n})\r\nexport class ColumnGroupDragDirective implements AfterViewInit, OnDestroy {\r\n    private container: any;\r\n    @Output() drop = new EventEmitter();\r\n    @Input() options: ContainerOptions = {\r\n        orientation: 'horizontal',\r\n        behaviour: 'move',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        getChildPayload: this.getChildPayload.bind(this),\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            return true;\r\n        },\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.drop.emit(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2, private el: ElementRef) { }\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n\r\n    private initDnD() {\r\n        this.disposeDnd();\r\n        this.container = SmoothDndForGroupingField(\r\n            this.el.nativeElement,\r\n            this.options\r\n        );\r\n    }\r\n\r\n    private getChildPayload(index) {\r\n        return index;\r\n    }\r\n\r\n    private onDropReady(dropResult) {\r\n    }\r\n\r\n    private onDragStart(info) {\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n    }\r\n}\r\n","import { Directive, ElementRef, OnInit, Input, Output, EventEmitter, OnDestroy } from \"@angular/core\";\r\nimport { Subscription, fromEvent, race } from 'rxjs';\r\nimport { buffer, bufferCount, debounceTime, filter, first, map, repeat } from 'rxjs/operators';\r\n\r\n\r\n@Directive({\r\n    selector: '[f-dbl-click]'\r\n})\r\nexport class FarrisDblClickDirective implements OnInit, OnDestroy {\r\n\r\n    @Input('f-dbl-click') options;\r\n    @Output() dblClickHandler: EventEmitter<any> = new EventEmitter();\r\n\r\n    private _click$: Subscription  = null;\r\n    constructor(private el: ElementRef) {}\r\n\r\n    ngOnInit(): void {\r\n        const doubleClickDuration = 250;\r\n        const leftClick$ = fromEvent(this.el.nativeElement, 'click').pipe(filter((event: any) => event.button === 0));\r\n        const debounce$ = leftClick$.pipe(debounceTime(doubleClickDuration));\r\n        const clickLimit$ = leftClick$.pipe(bufferCount(2));\r\n        const bufferGate$ = race(debounce$, clickLimit$)\r\n        .pipe(\r\n          first(),\r\n          repeat(),\r\n        );\r\n\r\n        this._click$ = leftClick$.pipe(\r\n            buffer(bufferGate$),\r\n            filter(clicks => {\r\n                return clicks.length > 1;\r\n            })\r\n        ).subscribe(clicks => {\r\n            this.dblClickHandler.emit(clicks[0]);\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._click$) {\r\n            this._click$.unsubscribe();\r\n            this._click$ = null;\r\n        }\r\n    }\r\n}","import { Component, Input } from \"@angular/core\";\r\n\r\n\r\n@Component({\r\n    selector: 'preview-table',\r\n    templateUrl: './preview-multi-headers.component.html'\r\n})\r\nexport class PreviewMultiHeadersComponent {\r\n    @Input() previewGroupColumns;\r\n\r\n\r\n    onWheel($event, tabsbox) {\r\n        const sw = tabsbox.scrollWidth;\r\n        const ow = tabsbox.offsetWidth;\r\n\r\n        if (sw > ow) {\r\n            const right = sw - ow;\r\n            const sl = tabsbox.scrollLeft;\r\n            if (sl < right && $event.deltaY > 0) {\r\n                $event.preventDefault();\r\n                tabsbox.scrollLeft = sl + 50;\r\n            }\r\n\r\n            if (sl > 0 && $event.deltaY < 0) {\r\n                $event.preventDefault();\r\n                tabsbox.scrollLeft = sl - 50;\r\n            }\r\n        }\r\n    }\r\n}","import { Directive, ElementRef, Input, HostListener, ComponentFactoryResolver } from \"@angular/core\";\r\nimport { ColumnTreeComponent } from \"../column-tree.component\";\r\nimport { BsModalService } from \"@farris/ui-modal\";\r\nimport { PreviewMultiHeadersComponent } from \"./preview-multi-headers.component\";\r\n\r\n@Directive({\r\n    selector: '[preview-headers]'\r\n})\r\nexport class ShowPreviewDirective {\r\n    @Input('preview-headers') treeIns: ColumnTreeComponent;\r\n    @Input() dlgTitle = 'ææé¢è§'\r\n    constructor(private el: ElementRef, private cfr: ComponentFactoryResolver, private modalSer: BsModalService) {}\r\n\r\n    @HostListener('click', ['$event'])\r\n    onPreviewBtnClick($event) {\r\n        const modalRef = this.modalSer.show(PreviewMultiHeadersComponent, {\r\n            title: this.dlgTitle,\r\n            width: 600,\r\n            height: 300,\r\n            showMaxButton: true,\r\n            resizable: true,\r\n            initialState: {\r\n                previewGroupColumns: this.treeIns.getPreviewGroupColumns()\r\n            },\r\n            showButtons: false\r\n        });\r\n    }\r\n}","\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { GRID_SETTINGS_SERVICE, DatagridModule} from '@farris/ui-datagrid';\r\nimport { MultiSelectModule } from '@farris/ui-multi-select';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisTooltipModule } from '@farris/ui-tooltip';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { OrganizationSelectorModule } from '@farris/ui-organization-selector';\r\n\r\nimport { DatagridSettingsComponent } from './datagrid-settings.component';\r\n\r\nimport { DatagridSettingsService } from './datagrid-settings.service';\r\nimport { DatagridSortSettingComponent } from './datagrid-sort-setting.component';\r\nimport { ColumnFormatSettingComponent } from './column-format-setting/column-format-setting.component';\r\nimport { ColumnGroupSettingComponent } from './column-group/column-group.component';\r\nimport { ColumnVisibleDragDirective } from './column-format-setting/column-visible-drag.directive';\r\nimport { ColumnGroupDragDirective } from './column-group/column-group-drag.directive';\r\nimport { SimpleColumnsComponent } from './simple-mode/simple-columns.component';\r\nimport { NewSchemeComponent } from './scheme/newscheme.component';\r\nimport { SchemeListComponent } from './scheme/scheme-list.component';\r\nimport { LanguageTextboxModule } from '@farris/ui-language-textbox';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { ColumnTreeComponent } from './multi-headers/column-tree.component';\r\nimport { NewHeaderFormComponent } from './multi-headers/new-header.component';\r\nimport { SetColumnsComponent } from './multi-headers/setcolumns.component';\r\nimport { FarrisDblClickDirective } from './dbl-click.directive';\r\nimport { PreviewMultiHeadersComponent } from './multi-headers/preview/preview-multi-headers.component';\r\nimport { ShowPreviewDirective } from './multi-headers/preview/show-preview.directive';\r\n@NgModule({\r\n    declarations: [\r\n        DatagridSettingsComponent,\r\n        DatagridSortSettingComponent,\r\n        ColumnFormatSettingComponent,\r\n        ColumnGroupSettingComponent,\r\n        ColumnVisibleDragDirective,\r\n        ColumnGroupDragDirective,\r\n        SimpleColumnsComponent,\r\n        NewSchemeComponent,\r\n        SchemeListComponent,\r\n        ColumnTreeComponent,\r\n        NewHeaderFormComponent,\r\n        SetColumnsComponent,\r\n        FarrisDblClickDirective,\r\n        PreviewMultiHeadersComponent,\r\n        ShowPreviewDirective\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        MultiSelectModule,\r\n        ComboListModule,\r\n        DatagridModule,\r\n        FarrisCommonModule.forRoot(),\r\n        MessagerModule.forRoot(),\r\n        LocaleModule.forRoot(),\r\n        ModalModule.forRoot(),\r\n        SwitchModule,\r\n        FarrisTooltipModule,\r\n        NotifyModule.forRoot(),\r\n        OrganizationSelectorModule,\r\n        LanguageTextboxModule,\r\n        TreeTableModule\r\n    ],\r\n    entryComponents: [\r\n        DatagridSettingsComponent,\r\n        SimpleColumnsComponent,\r\n        NewSchemeComponent,\r\n        SchemeListComponent,\r\n        NewHeaderFormComponent,\r\n        SetColumnsComponent,\r\n        PreviewMultiHeadersComponent\r\n    ],\r\n    exports: [\r\n        DatagridSettingsComponent,\r\n        SimpleColumnsComponent,\r\n        NewSchemeComponent,\r\n        SchemeListComponent,\r\n        FarrisDblClickDirective\r\n    ]\r\n})\r\nexport class DatagridSettingsModule {\r\n    static forRoot(apiUri = ''): ModuleWithProviders {\r\n        return {\r\n            ngModule: DatagridSettingsModule,\r\n            providers: [\r\n                { provide: GRID_SETTINGS_SERVICE, useClass: DatagridSettingsService }\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["SmoothDndForVisible","SmoothDndForGroupingField"],"mappings":"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"}