/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, TemplateRef, ContentChild, Output, EventEmitter, Input, Renderer2, ViewChild, HostBinding, ChangeDetectorRef, NgZone, Injector, Optional } from '@angular/core';
import { ListViewHeaderTemplateDirective, ListViewTemplateDirective, ListViewFooterTemplateDirective, ListViewEmptyTemplateDirective, } from './template.directive';
import ResizeObserver from "resize-observer-polyfill";
import { PaginationControlsComponent } from '@farris/ui-pagination';
export class ListViewComponent {
    /**
     * @param {?} el
     * @param {?} renderer
     * @param {?} cdr
     * @param {?} inject
     */
    constructor(el, renderer, cdr, inject) {
        this.el = el;
        this.renderer = renderer;
        this.cdr = cdr;
        this.inject = inject;
        // @Input() height:number;
        /**
         * 列表数据
         */
        this.data = [];
        /**
         * 数据为空是否展示默认
         */
        this.showEmpty = true;
        /**
         * 是否自定义空数据模板
         */
        this.emptyTemplate = false;
        /**
         * 是否支持多选 默认为false
         */
        this.multipleSelect = false;
        /**
         * 是否支持分页 默认false
         */
        this.supportPaging = false;
        // 默认分页
        this.pagerOnServer = true;
        this.pageSize = 10;
        this.pageIndex = 1;
        /**
         * 启用跨页多选
         */
        this.enableMorePageSelect = false;
        this.showSelectedList = false;
        this.selectedItemFormat = null;
        /**
         * 保持选中状态，默认为 true； 启用多选后有效。
         * 当设为false时，选中项再次点击将取消选中状态
         */
        this.keepSelect = true;
        // 是否平铺
        this.fill = false;
        // 是否横向排列
        this.cardLayout = false;
        /**
         * 勾选值
         */
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        this.checkItems = [];
        this.checkItemsChange = new EventEmitter();
        // @Input() borderBottom:boolean = true;
        this.showPageList = true;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showGotoInput = false;
        // 保留滚动条位置
        this._keepScrollPosition = false;
        this.contentElBindScroll = null;
        // 记录位置
        this.scrollPos = { scrollHeight: 0, clientHeight: 0, scrollTop: 0 };
        // 处理ngzone
        this.ngZone = null;
        // 记录元素尺寸变更
        this.ro = null;
        this._pageList = [10, 20, 30, 50, 100];
        this._total = 0;
        /**
         * 作为唯一标识的数据key值 如果没传 唯一标识为index值
         */
        this.listidName = 'id';
        /**
         * 点击某一行后
         */
        this.listClick = new EventEmitter();
        /**
         * 多选框 选中状态变化
         */
        this.checkChange = new EventEmitter();
        // 分页事件
        this.pageChanged = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        /**
         * 当前展示列表数据
         */
        this.currentData = [];
        /**
         * 选中的列表数组
         */
        this.selectDataList = [];
        /**
         * 跨页多选记录
         */
        this.selectDataListWithOtherPager = [];
        this.maxSize = 7;
        this.directionLinks = true;
        this.autoHide = false;
        this.responsive = true;
        this.paginationOptions = {};
        this.labels = {
            previousLabel: ' ',
            nextLabel: ' ',
            screenReaderPaginationLabel: 'Pagination',
            screenReaderPageLabel: 'page',
            screenReaderCurrentLabel: `You're on page`
        };
        this.mouseInSelectedList = false;
        this.openSelectedList = false;
        this.differenceBy = (/**
         * @param {?} a
         * @param {?} b
         * @param {?} fn
         * @return {?}
         */
        (a, b, fn) => {
            /** @type {?} */
            const s = new Set(b.map(fn));
            return a.map(fn).filter((/**
             * @param {?} el
             * @return {?}
             */
            el => !s.has(el)));
        });
        this.sameBy = (/**
         * @param {?} a
         * @param {?} b
         * @param {?} fn
         * @return {?}
         */
        (a, b, fn) => {
            /** @type {?} */
            const s = new Set(b.map(fn));
            return a.map(fn).filter((/**
             * @param {?} el
             * @return {?}
             */
            el => s.has(el)));
        });
    }
    /**
     * @return {?}
     */
    get activeIndex() {
        return this._activeIndex;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set activeIndex(val) {
        this._activeIndex = val;
        this.dataInit();
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set keepScrollPosition(val) {
        if (val != undefined) {
            this._keepScrollPosition = val;
            this.bindScrollEvent();
            this.observerElement();
        }
    }
    /**
     * @return {?}
     */
    get keepScrollPosition() {
        return this._keepScrollPosition;
    }
    /**
     * @return {?}
     */
    get pageList() {
        return this._pageList;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set pageList(val) {
        this._pageList = val;
        if (this.pager) {
            this.pager.setPageList(val);
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set total(val) {
        if (this._total !== val) {
            this._total = val || 0;
            this.paginationOptions = Object.assign(this.paginationOptions || {}, { totalItems: val });
        }
    }
    /**
     * @return {?}
     */
    get total() {
        return this._total;
    }
    /**
     * @return {?}
     */
    get listviewFill() { return this.fill; }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.paginationOptions = {
            id: 'Farris-listView-Pagination_' + (this.id || new Date().getTime()),
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.bindScrollEvent();
        this.observerElement();
        this.currentData = this.data;
        this.dataInit();
        // this.tRouter.events.pipe(
        //     filter((event) => event instanceof NavigationEnd)
        // ).subscribe((event: NavigationEnd) => {
        //         console.log('记录路由');
        //     });
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.changeCurrentData(this.data);
        }
        if (changes['total'] && !changes.total.isFirstChange()) {
            this.paginationOptions['totalItems'] = this.total;
            this.paginationOptions = Object.assign({}, this.paginationOptions);
        }
        if (changes['pageIndex'] && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions['currentPage'] = this.pageIndex;
            this.paginationOptions = Object.assign({}, this.paginationOptions);
        }
        if (changes['pageSize'] && !changes.pageSize.isFirstChange()) {
            this.paginationOptions['itemsPerPage'] = this.pageSize;
            this.paginationOptions = Object.assign({}, this.paginationOptions);
        }
        /**
         * 对比更新，判断有更新的时候且是跨页多选的时，更新已选行信息
         */
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            /** @type {?} */
            const change = this.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            v => {
                return v;
            }));
            if (change) {
                if (!this.enableMorePageSelect) {
                    this.checkRows(this.checkValues);
                }
            }
        }
        if (changes.checkItems && !changes.checkItems.isFirstChange()) {
            this.selectDataListWithOtherPager = [...this.checkItems];
            /** @type {?} */
            const ids = this.checkItems.map((/**
             * @param {?} n
             * @return {?}
             */
            n => n[this.listidName]));
            this.checkedItems(ids, false);
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        // 取消监听尺寸变更
        if (this.ro) {
            this.ro.unobserve(this.scrollEl.nativeElement);
            this.ro = null;
        }
        // 取消绑定
        if (this.contentElBindScroll) {
            this.scrollEl.nativeElement.removeEventListener('scroll', this.contentElBindScroll);
            this.contentElBindScroll = null;
        }
    }
    /**
     * 23年11月20日
     * 内部提供的搜索方法，指定过滤字符串，过滤数据的所有属性
     * 使用场景：列表视图头部模版可以放置查询、排序功能，点击按钮的查询功能可以调用这个方法
     *
     * @param {?} searchField
     * @return {?}
     */
    searchList(searchField) {
        if (searchField !== '' && this.data && this.data.length) {
            this.currentData = this.data.filter((/**
             * @param {?} list
             * @return {?}
             */
            (list) => {
                /** @type {?} */
                let result;
                /** @type {?} */
                const listValue = Object.values(list);
                for (let i = 0; i < listValue.length; i++) {
                    if (typeof listValue[i] == 'string') {
                        if (listValue[i].toString().includes(searchField)) {
                            result = listValue[i].toString().includes(searchField);
                            break;
                        }
                    }
                }
                return result;
            }));
            // 重置记录并滚动到顶部
            this.gotoScrollTop();
        }
        else {
            this.currentData = this.data;
        }
        return { listdata: this.currentData, searchValue: searchField, length: this.currentData.length };
    }
    /**
     * 点击某一列事件
     * @param {?} event
     * @param {?} listItem
     * @param {?} index
     * @param {?=} checkChangeEvent
     * @return {?}
     */
    listSelect(event, listItem, index, checkChangeEvent = false) {
        /** @type {?} */
        const isClickCheckbox = typeof event === 'boolean';
        if (listItem['unClick'] || listItem['selectDisable']) {
            return;
        }
        else {
            this.checkChange.emit({ listdata: listItem, index });
            /** @type {?} */
            const selectItemIndex = this.selectDataList.findIndex((/**
             * @param {?} item
             * @param {?} i
             * @return {?}
             */
            (item, i) => {
                return this.getKey(item, i) === this.getKey(listItem, index);
            }));
            if (this.multipleSelect) {
                if (listItem['checked']) {
                    if (!this.keepSelect || isClickCheckbox) {
                        // 支持多选 删除该选中行
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.updateDataListForMorePager('remove', listItem);
                        listItem['checked'] = false;
                    }
                    else {
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.selectDataList.unshift(listItem);
                    }
                }
                else {
                    // 支持多选 插入该选中行
                    if (selectItemIndex === -1) {
                        this.selectDataList.unshift(listItem);
                        this.updateDataListForMorePager('append', listItem);
                    }
                    else {
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.selectDataList.unshift(listItem);
                    }
                    listItem['checked'] = true;
                }
            }
            else {
                // 不支持多选 替换当前选中行
                this.selectDataList = [];
                this.selectDataList.push(listItem);
            }
            if (!checkChangeEvent) {
                this.clickItem = listItem;
            }
            this.listClick.emit({ data: this.selectDataList, index, checkChangeEvent });
        }
        if (this.multipleSelect) {
            /** @type {?} */
            let ids = this.data.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => !!item.checked)).map((/**
             * @param {?} item
             * @return {?}
             */
            item => item[this.listidName]));
            if (this.enableMorePageSelect) {
                ids = this.selectDataListWithOtherPager.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item[this.listidName]));
            }
            this.onCheckValuesChange(ids);
        }
    }
    /**
     * 获得每一行list 唯一标识
     * @param {?} list
     * @param {?} index
     * @return {?}
     */
    getKey(list, index) {
        if (this.listidName && list.hasOwnProperty(this.listidName)) {
            return list[this.listidName];
        }
        else {
            return index;
        }
    }
    /**
     * checkbox状态变化
     * @param {?} event
     * @param {?} changeData
     * @param {?} i
     * @return {?}
     */
    getSelect(event, changeData, i) {
        /** @type {?} */
        const state = event.checked;
        this.listSelect(state, changeData, i, true);
    }
    /**
     * 23年11月20日
     * 内部提供的排序方法，指定排序字段、升序还是降序
     * 使用场景：列表视图头部模版可以指定查询、排序功能，点击按钮的排序功能可以调用这个方法
     *
     * @param {?} sortkeyName
     * @param {?=} sortType
     * @return {?}
     */
    sort(sortkeyName, sortType = 'asc') {
        this.currentData.sort(this.compare(sortkeyName, sortType));
        // 滚动到顶部
        this.gotoScrollTop();
        return { sortResult: { listdata: this.currentData, sortkeyName, sortType } };
    }
    /**
     * @param {?} primaryValue
     * @return {?}
     */
    selectRow(primaryValue) {
        if (this.currentData && this.currentData.length > 0) {
            /** @type {?} */
            const row = this.currentData.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item[this.listidName] === primaryValue));
            if (row) {
                this.clickItem = row;
                this.cdr.markForCheck();
            }
        }
    }
    /**
     * @private
     * @param {?} KeyName
     * @param {?} type
     * @return {?}
     */
    compare(KeyName, type) {
        if (type === 'desc') {
            return (/**
             * @param {?} obj1
             * @param {?} obj2
             * @return {?}
             */
            (obj1, obj2) => {
                /** @type {?} */
                const val1 = obj1[KeyName];
                /** @type {?} */
                const val2 = obj2[KeyName];
                if (val2 < val1) {
                    return 1;
                }
                else if (val2 > val1) {
                    return -1;
                }
                else {
                    return 0;
                }
            });
        }
        if (type === 'asc') {
            return (/**
             * @param {?} obj1
             * @param {?} obj2
             * @return {?}
             */
            (obj1, obj2) => {
                /** @type {?} */
                const val1 = obj1[KeyName];
                /** @type {?} */
                const val2 = obj2[KeyName];
                if (val2 > val1) {
                    return 1;
                }
                else if (val2 < val1) {
                    return -1;
                }
                else {
                    return 0;
                }
            });
        }
    }
    /**
     * @param {?} item
     * @return {?}
     */
    getItemActive(item) {
        // 不管是否开启多选，当前行只有一行
        if (this.listidName && this.clickItem) {
            return item[this.listidName] === this.clickItem[this.listidName];
        }
        else {
            return false;
        }
    }
    /**
     * 页码改变
     * @param {?} page
     * @return {?}
     */
    onPageChange(page) {
        if (this.pageIndex !== page.pageIndex) {
            this.pageIndex = page.pageIndex;
            this.paginationOptions.currentPage = page.pageIndex;
            // this.paginationOptions = {...this.paginationOptions};
            this.pageChanged.emit({ pageInfo: page });
            // 滚动到顶部
            this.gotoScrollTop();
        }
    }
    /**
     * 改变分页大小
     * @param {?} pageSize
     * @return {?}
     */
    onPageSizeChange(pageSize) {
        // console.log(this.pageSize !== pageSize && this.total);
        if (this.pageSize !== pageSize && this.total) {
            this.paginationOptions.itemsPerPage = pageSize;
            this.pageSize = pageSize;
            /** @type {?} */
            const total = this.total;
            /** @type {?} */
            let pageLength = Math.floor(total / pageSize);
            if (total % pageSize > 0) {
                pageLength += 1;
            }
            if (pageLength && this.pageIndex > pageLength) {
                this.pageIndex = pageLength;
                this.paginationOptions.currentPage = this.pageIndex;
            }
            // this.paginationOptions = {...this.paginationOptions};            
            this.pageSizeChanged.emit({ pageInfo: { pageIndex: this.pageIndex, pageSize } });
            // 滚动到顶部
            this.gotoScrollTop();
        }
    }
    /**
     * @return {?}
     */
    getCurrentData() {
        return this.currentData;
    }
    /**
     * @return {?}
     */
    getSelectData() {
        return this.selectDataList;
    }
    /**
     * 23年11月20日
     * 支持重新设置listview数据
     * 此方法值被kendo-binding使用，绑定数据
     * @param {?} listviewData
     * @return {?}
     */
    setData(listviewData) {
        this.data = listviewData;
        this.changeCurrentData(listviewData);
    }
    /**
     * @return {?}
     */
    dataInit() {
        if (this.data && this.data.length) {
            this.selectDataList = this.data.filter((/**
             * @param {?} list
             * @return {?}
             */
            (list) => {
                return list['checked'];
            }));
            if (this.activeIndex >= 0 && this.activeIndex <= (this.data.length - 1)) {
                /** @type {?} */
                const dataItem = this.data[this.activeIndex];
                if (dataItem) {
                    this.clickItem = dataItem;
                    this.selectDataList.push(this.clickItem);
                }
            }
            else if (this.activeIndex < 0) {
                return;
            }
            else {
                if (!this.selectDataList.length && !this.multipleSelect) {
                    this.selectDataList.push(this.data[0]);
                }
                this.clickItem = this.data[0];
            }
        }
        this.updateDataListForMorePager();
        if (this.cdr) {
            this.cdr.detectChanges();
        }
    }
    /**
     * @private
     * @param {?=} active
     * @param {?=} listItem
     * @param {?=} emit
     * @return {?}
     */
    updateDataListForMorePager(active = '', listItem, emit = true) {
        if (this.multipleSelect && this.enableMorePageSelect) {
            if (active === 'remove' && listItem) {
                if (!Array.isArray(listItem)) {
                    this.selectDataListWithOtherPager =
                        this.selectDataListWithOtherPager.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => {
                            if (typeof listItem === 'object') {
                                return n[this.listidName] != listItem[this.listidName];
                            }
                            else {
                                return n[this.listidName] != listItem;
                            }
                        }));
                }
                else {
                    this.selectDataListWithOtherPager =
                        this.selectDataListWithOtherPager.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => {
                            return listItem.indexOf((/**
                             * @param {?} a
                             * @return {?}
                             */
                            a => a[this.listidName] === n[this.listidName])) === -1;
                        }));
                }
                if (emit) {
                    this.checkItemsChange.emit({ items: [...this.selectDataListWithOtherPager], instance: this });
                }
            }
            else if (active === 'append') {
                if (!Array.isArray(listItem)) {
                    this.selectDataListWithOtherPager = [...this.selectDataListWithOtherPager, listItem];
                }
                else {
                    this.selectDataListWithOtherPager = [...this.selectDataListWithOtherPager, ...listItem];
                }
                if (emit) {
                    this.checkItemsChange.emit({ items: [...this.selectDataListWithOtherPager], instance: this });
                }
            }
            else {
                if (!this.selectDataListWithOtherPager.length) {
                    this.selectDataListWithOtherPager = [...this.selectDataList];
                }
                else {
                    /** @type {?} */
                    const newCheckeds = this.sameBy(this.currentData, this.selectDataListWithOtherPager, (/**
                     * @param {?} v
                     * @return {?}
                     */
                    (v) => v[this.listidName]));
                    if (newCheckeds && newCheckeds.length) {
                        this.data.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            item.checked = newCheckeds.includes(item[this.listidName]);
                        }));
                    }
                }
            }
        }
    }
    /**
     * 全选
     * @return {?}
     */
    listCheckAll() {
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item.checked = true;
            }));
            this.selectDataList = this.currentData.filter((/**
             * @param {?} list
             * @return {?}
             */
            (list) => {
                return list['checked'];
            }));
            this.updateDataListForMorePager('append', this.currentData);
            this.updateCheckedValues(true);
            this.cdr.markForCheck();
        }
    }
    /**
     * 取消全选
     * @return {?}
     */
    listCheckAllCancel() {
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item.checked = false;
            }));
            this.selectDataList = [];
            this.updateDataListForMorePager('remove', this.currentData);
            this.updateCheckedValues(true);
            this.cdr.markForCheck();
        }
    }
    /**
     * 勾选行
     * @param {?} ids ids
     * @return {?}
     */
    checkRows(ids) {
        if (this.multipleSelect) {
            if (!ids || ids.length < 1) {
                this.listCheckAllCancel();
                return;
            }
            this.data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (ids.includes(item[this.listidName])) {
                    item.checked = true;
                }
                else {
                    item.checked = false;
                }
            }));
            // this.onCheckValuesChange(ids);
            this.cdr.markForCheck();
        }
    }
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    onCheckValuesChange(ids) {
        this.checkValuesChange.emit(ids);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseEnter($event) {
        $event.stopPropagation();
        this.mouseInSelectedList = true;
        if (this.selectDataListWithOtherPager && this.selectDataListWithOtherPager.length) {
            this.openSelectedList = !this.openSelectedList;
        }
        else {
            this.openSelectedList = false;
        }
    }
    /**
     * @return {?}
     */
    closeSelectedList() {
        this.openSelectedList = false;
        this.mouseInSelectedList = false;
        if (!this.cdr['destroyed']) {
            this.cdr.detectChanges();
        }
    }
    /**
     * @param {?} id
     * @return {?}
     */
    onDelSelectedItem(id) {
        this.currentData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (item[this.listidName] == id) {
                item.checked = false;
            }
        }));
        this.selectDataList = this.selectDataList.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n[this.listidName] != id));
        this.updateDataListForMorePager('remove', id);
        this.updateCheckedValues();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onClearSelected($event) {
        // this.clearSelectedItem.emit();
        this.closeSelectedList();
        this.listCheckAllCancel();
        this.selectDataListWithOtherPager = [];
        this.checkValues = [];
        this.onCheckValuesChange([]);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSelectListPanelClose($event) {
        this.closeSelectedList();
    }
    /**
     * @private
     * @param {?=} emit
     * @return {?}
     */
    updateCheckedValues(emit = true) {
        if (this.multipleSelect) {
            if (!this.enableMorePageSelect) {
                this.checkValues = this.selectDataList.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n[this.listidName]));
            }
            else {
                this.checkValues = this.selectDataListWithOtherPager.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n[this.listidName]));
            }
            if (emit) {
                this.onCheckValuesChange(this.checkValues);
                this.checkItemsChange.emit({ items: this.selectDataListWithOtherPager, instance: this });
            }
        }
    }
    /**
     * @param {?=} clearAll
     * @param {?=} emit
     * @return {?}
     */
    clearCheckeds(clearAll = true, emit = true) {
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item.checked = false;
            }));
            this.selectDataList = [];
            if (clearAll) {
                this.selectDataListWithOtherPager = [];
            }
            else {
                this.updateDataListForMorePager('remove', this.currentData);
            }
            if (emit) {
                this.updateCheckedValues(emit);
            }
            this.cdr.markForCheck();
        }
    }
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @param {?} emit
     * @return {?}
     */
    _setItemsCheckedStatus(ids, checked, emit) {
        if (ids && ids.length) {
            /** @type {?} */
            const action = checked ? 'append' : 'remove';
            ids.forEach((/**
             * @param {?} i
             * @return {?}
             */
            i => {
                /** @type {?} */
                let id = i;
                if (typeof i === 'object') {
                    id = i[this.listidName];
                }
                /** @type {?} */
                const item = this.data.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n[this.listidName] === id));
                if (item) {
                    item.checked = checked;
                }
                if (checked) {
                    this.updateDataListForMorePager('append', i, false);
                }
                else {
                    this.updateDataListForMorePager('remove', id, false);
                }
            }));
            this.updateCheckedValues(emit);
            this.cdr.markForCheck();
        }
    }
    /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    unCheckItems(ids, emit = false) {
        this._setItemsCheckedStatus(ids, false, emit);
    }
    /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    checkedItems(ids, emit = false) {
        this._setItemsCheckedStatus(ids, true, emit);
    }
    /**
     * 绑定
     * @return {?}
     */
    bindScrollEvent() {
        if (!this.scrollEl) {
            return;
        }
        if (this.keepScrollPosition) {
            if (!this.contentElBindScroll) {
                this.contentElBindScroll = this.scrollRecord.bind(this);
                this.scrollEl.nativeElement.addEventListener('scroll', this.contentElBindScroll);
            }
        }
        else {
            if (this.contentElBindScroll) {
                this.scrollEl.nativeElement.removeEventListener('scroll', this.contentElBindScroll);
                this.contentElBindScroll = null;
            }
        }
    }
    /**
     * 判断是否需要滚动到位置
     * @private
     * @return {?}
     */
    scrollToRecordPosition() {
        /** @type {?} */
        let scrollTarget = this.scrollEl.nativeElement;
        // 启用保持滚动位置或者元素滚动条位置>0或者记录滚动条位置在顶部或者记录与元素滚动条相等
        if (!this.keepScrollPosition || scrollTarget.scrollTop > 0 || this.scrollPos.scrollTop == 0 || Math.abs(this.scrollPos.scrollTop - scrollTarget.scrollTop) <= 2) {
            return;
        }
        // 没有变更
        /** @type {?} */
        let findScrollIndex = ['scrollHeight', 'clientHeight'].findIndex((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            return this.scrollPos[item] != scrollTarget[item];
        }));
        if (findScrollIndex == -1) {
            scrollTarget['scrollTop'] = this.scrollPos['scrollTop'];
        }
    }
    /**
     * 内部记录
     * @private
     * @return {?}
     */
    scrollRecord() {
        if (!this.keepScrollPosition) {
            return;
        }
        /** @type {?} */
        let scrollTarget = this.scrollEl.nativeElement;
        ['scrollHeight', 'clientHeight', 'scrollTop'].forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            this.scrollPos[item] = scrollTarget[item];
        }));
    }
    /**
     * 重置记录
     * @private
     * @return {?}
     */
    resetRecord() {
        if (!this.keepScrollPosition) {
            return;
        }
        /** @type {?} */
        let scrollTarget = this.scrollEl.nativeElement;
        ['scrollHeight', 'clientHeight', 'scrollTop'].forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            if (item == 'scrollTop') {
                this.scrollPos[item] = 0;
            }
            else {
                this.scrollPos[item] = scrollTarget[item];
            }
        }));
    }
    /**
     * 滚动到顶部
     * @private
     * @return {?}
     */
    gotoScrollTop() {
        /** @type {?} */
        let scrollTarget = this.scrollEl.nativeElement;
        scrollTarget.scrollTop = 0;
        this.resetRecord();
    }
    /**
     * 通过
     * @private
     * @return {?}
     */
    observerElement() {
        if (!this.scrollEl || !this.inject) {
            return;
        }
        if (!this.ngZone) {
            this.ngZone = this.inject.get(NgZone, null);
        }
        if (this.keepScrollPosition) {
            if (!this.ro) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                () => {
                    this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    (entries, observer) => {
                        /** @type {?} */
                        const tempHeight = entries[0].contentRect.height;
                        if (tempHeight > 0 && this.keepScrollPosition) {
                            // 如果高度改变，就重置,不用置顶。获取高度有小偏移
                            if (Math.abs(tempHeight - this.scrollPos['clientHeight']) <= 2) {
                                this.scrollToRecordPosition();
                            }
                            else {
                                this.resetRecord();
                            }
                        }
                    }));
                    this.ro.observe(this.scrollEl.nativeElement);
                }));
            }
        }
        else {
            // 去修监听尺寸变更
            if (this.ro) {
                this.ro.unobserve(this.scrollEl.nativeElement);
                this.ro = null;
            }
        }
    }
    /**
     * 比较数据判断是否需要滚动到顶部
     * @private
     * @param {?} oldData 旧数据
     * @param {?} newData 新数据
     * @return {?}
     */
    compareDataThenScrollTop(oldData, newData) {
        // 没有数据，重置
        if (!oldData || !newData) {
            return true;
        }
        // 没有数据，重置
        if (oldData.length == 0 || newData.length == 0) {
            return true;
        }
        if (oldData.length != newData.length) {
            return true;
        }
        else {
            // 定位置
            /** @type {?} */
            let idField = "";
            if (this.listidName && oldData[0].hasOwnProperty(this.listidName) && newData[0].hasOwnProperty(this.listidName)) {
                idField = this.listidName;
            }
            if (!idField) {
                // 保持滚动条
                return false;
            }
            // 找到不同的数据
            /** @type {?} */
            let findDifferData = oldData.find((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                if (item[idField] == newData[index][idField]) {
                    return false;
                }
                return true;
            }));
            // 有不同数据，重置
            if (findDifferData) {
                return true;
            }
            else {
                // 数据相同，保持滚动条
                return false;
            }
        }
    }
    /**
     *
     * @private
     * @param {?} newData
     * @return {?}
     */
    changeCurrentData(newData) {
        /** @type {?} */
        let needScrollTop = this.compareDataThenScrollTop(this.currentData, newData);
        this.currentData = newData;
        if (needScrollTop) {
            this.gotoScrollTop();
        }
        else {
            this.scrollToRecordPosition();
        }
        this.dataInit();
    }
}
ListViewComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-list-view',
                template: "<div class=\"f-list-view\" [ngClass]=\"{'f-list-view-multiple': multipleSelect}\">\r\n    <div class=\"f-list-view-header\" *ngIf=\"headerTemplate && !headerComponentType\" >\r\n        <ng-container [ngTemplateOutlet]=\"headerTemplate\"></ng-container>\r\n    </div>\r\n    <div class=\"f-list-view-header\" *ngIf=\"headerComponentType\" component-template [cmpRef]=\"headerComponentType\"></div>\r\n    <div class=\"f-list-view-content\" #scrollEl>\r\n        <!-- bugNum:449874:\u589E\u52A0ngClass\u7684\u5224\u65AD\u6761\u4EF6 -->\r\n        <ul class=\"f-list-view-group\" [ngClass]=\"{'d-flex flex-wrap': cardLayout && currentData && currentData.length}\">\r\n            <ng-container *ngIf=\"currentData&&currentData.length; else emptyData\">\r\n                <li class=\"f-list-view-group-item {{listClassName}}\"\r\n                    *ngFor=\"let list of (supportPaging ? (currentData | paginate: paginationOptions) : currentData); let i = index;let first = first; let last = last\"\r\n                    [id]=\"getKey(list,i)\" (click)=\"listSelect($event,list,i)\"\r\n                    [ngClass]=\"{'f-un-click': list['unClick'],'f-un-select':list['selectDisable'],'f-listview-active':getItemActive(list)}\">\r\n                    <div class=\"f-list-select\" *ngIf=\"multipleSelect\" (click)=\"$event.stopPropagation()\">\r\n                        <list-view-checkout [id]=\"'list-'+getKey(list,i)\"\r\n                            [disabled]=\"list['selectDisable']||list['unClick']\" [checked]=\"list['checked']\"\r\n                            (checkedChange)=\"getSelect($event,list,i)\"></list-view-checkout>\r\n                    </div>\r\n                    <div class=\"f-list-content\" *ngIf=\"!listComponentType\">\r\n                        <ng-container [ngTemplateOutlet]=\"listTemplate\"\r\n                            [ngTemplateOutletContext]=\"{ item: list , index:i, selectedItem: clickItem, first:first,last:last }\">\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"f-list-content\" *ngIf=\"listComponentType\" component-template [cmpRef]=\"listComponentType\" [ctx]=\"{ item: list , index:i, selectedItem: clickItem, first:first,last:last }\"></div>\r\n                </li>\r\n            </ng-container>\r\n\r\n            <ng-template #emptyData>\r\n                <!-- \u7A7A\u6570\u636E\u9ED8\u8BA4\u6A21\u677F -->\r\n                <ng-container *ngIf=\"!emptyComponentType\">\r\n                    <div class=\"f-list-view-emptydata\" *ngIf=\"showEmpty&&!emptyTemplate;else customEmpty\">\r\n                        <p class=\"f-empty-title\">{{ 'listview.emptyMessage' | locale }}</p>\r\n                    </div>\r\n                    <!-- \u81EA\u5B9A\u4E49\u7A7A\u6570\u636E\u6A21\u677F -->\r\n                    <ng-template #customEmpty>\r\n                        <ng-container [ngTemplateOutlet]=\"emptyDataTemplate\"></ng-container>\r\n                    </ng-template>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"emptyComponentType\">\r\n                    <div class=\"f-list-view-emptydata\" component-template [cmpRef]=\"emptyComponentType\"></div>\r\n                </ng-container>\r\n\r\n            </ng-template>\r\n        </ul>\r\n    </div>\r\n    <div class=\"f-list-view-footer\" *ngIf=\"footerTemplate || supportPaging\">\r\n        <ng-container [ngTemplateOutlet]=\"footerTemplate\" *ngIf=\"!footerComponentType\">\r\n            <div class=\"f-paging-wrapper\" *ngIf=\"supportPaging\">\r\n                <pagination-controls #pager [id]=\"paginationOptions.id\" [maxSize]=\"maxSize\"\r\n                    [directionLinks]=\"directionLinks\" [autoHide]=\"autoHide\" [responsive]=\"responsive\"\r\n                    [previousLabel]=\"labels.previousLabel\"\r\n                    [nextLabel]=\"labels.nextLabel\"\r\n                    [screenReaderPaginationLabel]=\"labels.screenReaderPaginationLabel\"\r\n                    [screenReaderPageLabel]=\"labels.screenReaderPageLabel\"\r\n                    [showPageList]=\"showPageList\"\r\n                    [showPageInfo]=\"showPageInfo\"\r\n                    [showPageNumber]=\"showPageNumber\"\r\n                    [showGotoInput]=\"showGotoInput\"\r\n                    [screenReaderCurrentLabel]=\"labels.screenReaderCurrentLabel\"\r\n                    (pageChange)=\"onPageChange($event)\"\r\n                    (pageSizeChange)=\"onPageSizeChange($event)\" \r\n                    [showSelectedList]=\"showSelectedList && enableMorePageSelect\">\r\n\r\n                    <div class=\"flex-fill\" >\r\n                        <div>\r\n                            <span class=\"badge badge-pill badge-light\" *ngIf=\"showSelectedList\"\r\n                                style=\"cursor:pointer;\" [attr.title]=\"'datagrid.selectionData.tooltip' | locale\"\r\n                                [class.badge-primary]=\"mouseInSelectedList\"\r\n                                [innerHTML]=\"'datagrid.selectionData.currentLenth' | locale | replaceX: selectDataListWithOtherPager.length\"\r\n                                (click)=\"onMouseEnter($event)\">\r\n                            </span>\r\n                            <pagination-selected-list *ngIf=\"openSelectedList\"\r\n                                [data]=\"selectDataListWithOtherPager | formatItems: selectedItemFormat\"\r\n                                (close)=\"onSelectListPanelClose($event)\"\r\n                                (remove)=\"onDelSelectedItem($event)\"\r\n                                (clear)=\"onClearSelected($event)\"\r\n                            ></pagination-selected-list>\r\n                        </div>\r\n                    </div>\r\n\r\n                </pagination-controls>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"footerComponentType\" component-template [cmpRef]=\"footerComponentType\"></ng-container>\r\n    </div>\r\n</div>",
                styles: [":host{height:100%}:host.f-listview-fill{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;overflow:hidden}:host.f-listview-fill .f-list-view{height:100%}:host.f-listview-fill .f-list-view .f-list-view-header{flex-shrink:0}:host.f-listview-fill .f-list-view .f-list-view-footer{flex-shrink:0}:host.f-listview-fill .f-list-view .f-list-view-content{overflow-y:auto;-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0}:host .f-list-view{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}:host .f-list-view .f-paging-wrapper{padding:14px 0}:host .f-list-view-group-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}:host .f-list-view-group-item.f-none-border{border-bottom:0}:host .f-list-view-group-item .f-list-content{-webkit-box-flex:1;flex:1 1 auto;width:100%}:host .f-list-select{padding:0 14px}:host .f-list-view-emptydata .f-empty-title{font-size:14px;line-height:22px;color:#999;padding:20px 0;text-align:center}"]
            }] }
];
/** @nocollapse */
ListViewComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: Injector, decorators: [{ type: Optional }] }
];
ListViewComponent.propDecorators = {
    headerTemplate: [{ type: ContentChild, args: [ListViewHeaderTemplateDirective, { read: TemplateRef },] }],
    listTemplate: [{ type: ContentChild, args: [ListViewTemplateDirective, { read: TemplateRef },] }],
    footerTemplate: [{ type: ContentChild, args: [ListViewFooterTemplateDirective, { read: TemplateRef },] }],
    emptyDataTemplate: [{ type: ContentChild, args: [ListViewEmptyTemplateDirective, { read: TemplateRef },] }],
    headerComponentType: [{ type: Input }],
    listComponentType: [{ type: Input }],
    emptyComponentType: [{ type: Input }],
    footerComponentType: [{ type: Input }],
    scrollEl: [{ type: ViewChild, args: ['scrollEl',] }],
    listGroup: [{ type: ViewChild, args: ['listGroup',] }],
    pager: [{ type: ViewChild, args: ['pager',] }],
    data: [{ type: Input }],
    id: [{ type: Input }],
    showEmpty: [{ type: Input }],
    emptyTemplate: [{ type: Input }],
    multipleSelect: [{ type: Input }],
    supportPaging: [{ type: Input }],
    pagerOnServer: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageIndex: [{ type: Input }],
    enableMorePageSelect: [{ type: Input }],
    showSelectedList: [{ type: Input }],
    selectedItemFormat: [{ type: Input }],
    keepSelect: [{ type: Input }],
    fill: [{ type: Input }],
    cardLayout: [{ type: Input }],
    activeIndex: [{ type: Input }],
    listClassName: [{ type: Input }],
    checkValues: [{ type: Input }],
    checkValuesChange: [{ type: Output }],
    checkItems: [{ type: Input }],
    checkItemsChange: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    keepScrollPosition: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    listidName: [{ type: Input }],
    listviewFill: [{ type: HostBinding, args: ['class.f-listview-fill',] }],
    listClick: [{ type: Output }],
    checkChange: [{ type: Output }],
    pageChanged: [{ type: Output }],
    pageSizeChanged: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    ListViewComponent.prototype.headerTemplate;
    /** @type {?} */
    ListViewComponent.prototype.listTemplate;
    /** @type {?} */
    ListViewComponent.prototype.footerTemplate;
    /** @type {?} */
    ListViewComponent.prototype.emptyDataTemplate;
    /** @type {?} */
    ListViewComponent.prototype.headerComponentType;
    /** @type {?} */
    ListViewComponent.prototype.listComponentType;
    /** @type {?} */
    ListViewComponent.prototype.emptyComponentType;
    /** @type {?} */
    ListViewComponent.prototype.footerComponentType;
    /** @type {?} */
    ListViewComponent.prototype.scrollEl;
    /** @type {?} */
    ListViewComponent.prototype.listGroup;
    /** @type {?} */
    ListViewComponent.prototype.pager;
    /**
     * 列表数据
     * @type {?}
     */
    ListViewComponent.prototype.data;
    /** @type {?} */
    ListViewComponent.prototype.id;
    /**
     * 数据为空是否展示默认
     * @type {?}
     */
    ListViewComponent.prototype.showEmpty;
    /**
     * 是否自定义空数据模板
     * @type {?}
     */
    ListViewComponent.prototype.emptyTemplate;
    /**
     * 是否支持多选 默认为false
     * @type {?}
     */
    ListViewComponent.prototype.multipleSelect;
    /**
     * 是否支持分页 默认false
     * @type {?}
     */
    ListViewComponent.prototype.supportPaging;
    /** @type {?} */
    ListViewComponent.prototype.pagerOnServer;
    /** @type {?} */
    ListViewComponent.prototype.pageSize;
    /** @type {?} */
    ListViewComponent.prototype.pageIndex;
    /**
     * 启用跨页多选
     * @type {?}
     */
    ListViewComponent.prototype.enableMorePageSelect;
    /** @type {?} */
    ListViewComponent.prototype.showSelectedList;
    /** @type {?} */
    ListViewComponent.prototype.selectedItemFormat;
    /**
     * 保持选中状态，默认为 true； 启用多选后有效。
     * 当设为false时，选中项再次点击将取消选中状态
     * @type {?}
     */
    ListViewComponent.prototype.keepSelect;
    /** @type {?} */
    ListViewComponent.prototype.fill;
    /** @type {?} */
    ListViewComponent.prototype.cardLayout;
    /** @type {?} */
    ListViewComponent.prototype._activeIndex;
    /** @type {?} */
    ListViewComponent.prototype.listClassName;
    /**
     * 勾选值
     * @type {?}
     */
    ListViewComponent.prototype.checkValues;
    /** @type {?} */
    ListViewComponent.prototype.checkValuesChange;
    /** @type {?} */
    ListViewComponent.prototype.checkItems;
    /** @type {?} */
    ListViewComponent.prototype.checkItemsChange;
    /** @type {?} */
    ListViewComponent.prototype.showPageList;
    /** @type {?} */
    ListViewComponent.prototype.showPageInfo;
    /** @type {?} */
    ListViewComponent.prototype.showPageNumber;
    /** @type {?} */
    ListViewComponent.prototype.showGotoInput;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._keepScrollPosition;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.contentElBindScroll;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.scrollPos;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._pageList;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._total;
    /**
     * 作为唯一标识的数据key值 如果没传 唯一标识为index值
     * @type {?}
     */
    ListViewComponent.prototype.listidName;
    /**
     * 点击某一行后
     * @type {?}
     */
    ListViewComponent.prototype.listClick;
    /**
     * 多选框 选中状态变化
     * @type {?}
     */
    ListViewComponent.prototype.checkChange;
    /** @type {?} */
    ListViewComponent.prototype.pageChanged;
    /** @type {?} */
    ListViewComponent.prototype.pageSizeChanged;
    /**
     * 当前展示列表数据
     * @type {?}
     */
    ListViewComponent.prototype.currentData;
    /**
     * 选中的列表数组
     * @type {?}
     */
    ListViewComponent.prototype.selectDataList;
    /**
     * 跨页多选记录
     * @type {?}
     */
    ListViewComponent.prototype.selectDataListWithOtherPager;
    /** @type {?} */
    ListViewComponent.prototype.clickItem;
    /** @type {?} */
    ListViewComponent.prototype.maxSize;
    /** @type {?} */
    ListViewComponent.prototype.directionLinks;
    /** @type {?} */
    ListViewComponent.prototype.autoHide;
    /** @type {?} */
    ListViewComponent.prototype.responsive;
    /** @type {?} */
    ListViewComponent.prototype.paginationOptions;
    /** @type {?} */
    ListViewComponent.prototype.labels;
    /** @type {?} */
    ListViewComponent.prototype.mouseInSelectedList;
    /** @type {?} */
    ListViewComponent.prototype.openSelectedList;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.differenceBy;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.sameBy;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbGlzdC12aWV3LyIsInNvdXJjZXMiOlsibGliL2xpc3Qtdmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQTRCLFVBQVUsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQzlHLFdBQVcsRUFBNEIsaUJBQWlCLEVBQVcsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQy9HLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCwrQkFBK0IsRUFDL0IseUJBQXlCLEVBQ3pCLCtCQUErQixFQUMvQiw4QkFBOEIsR0FDakMsTUFBTSxzQkFBc0IsQ0FBQztBQUM5QixPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQXNCLDJCQUEyQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFXeEYsTUFBTSxPQUFPLGlCQUFpQjs7Ozs7OztJQXlLMUIsWUFBb0IsRUFBYyxFQUFVLFFBQW1CLEVBQVUsR0FBc0IsRUFBc0IsTUFBZ0I7UUFBakgsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUFVLGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUFzQixXQUFNLEdBQU4sTUFBTSxDQUFVOzs7OztRQXJKNUgsU0FBSSxHQUFHLEVBQUUsQ0FBQzs7OztRQUtWLGNBQVMsR0FBRyxJQUFJLENBQUM7Ozs7UUFFakIsa0JBQWEsR0FBRyxLQUFLLENBQUM7Ozs7UUFFdEIsbUJBQWMsR0FBRyxLQUFLLENBQUM7Ozs7UUFHdkIsa0JBQWEsR0FBRyxLQUFLLENBQUM7O1FBR3RCLGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDZCxjQUFTLEdBQUcsQ0FB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ekIsOENBQW1DOztJQUVuQyxtQ0FNRTs7SUFFRixnREFBNEI7O0lBQzVCLDZDQUF5Qjs7Ozs7SUFDekIsaUNBQXFCOzs7OztJQXlhckIseUNBR0M7Ozs7O0lBRUQsbUNBR0M7Ozs7O0lBL2FXLCtCQUFzQjs7Ozs7SUFBRSxxQ0FBMkI7Ozs7O0lBQUUsZ0NBQThCOzs7OztJQUFFLG1DQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCwgRWxlbWVudFJlZiwgVGVtcGxhdGVSZWYsIENvbnRlbnRDaGlsZCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIElucHV0LCBSZW5kZXJlcjIsIFZpZXdDaGlsZCxcclxuICAgIEFmdGVyVmlld0luaXQsIEhvc3RCaW5kaW5nLCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMsIENoYW5nZURldGVjdG9yUmVmLCBEb0NoZWNrLCBOZ1pvbmUsIEluamVjdG9yLCBPcHRpb25hbCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95XHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgICBMaXN0Vmlld0hlYWRlclRlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgTGlzdFZpZXdUZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgIExpc3RWaWV3Rm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUsXHJcbiAgICBMaXN0Vmlld0VtcHR5VGVtcGxhdGVEaXJlY3RpdmUsXHJcbn0gZnJvbSAnLi90ZW1wbGF0ZS5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSBcInJlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbFwiO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uSW5zdGFuY2UsIFBhZ2luYXRpb25Db250cm9sc0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktcGFnaW5hdGlvbic7XHJcblxyXG5pbXBvcnQgeyBDb21wb25lbnRUZW1wbGF0ZVJlZiwgQ29tcG9uZW50VGVtcGxhdGVGbiB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJ1xyXG5cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWxpc3QtdmlldycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vbGlzdC12aWV3LmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2xpc3Qtdmlldy5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBMaXN0Vmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIEBDb250ZW50Q2hpbGQoTGlzdFZpZXdIZWFkZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBoZWFkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBDb250ZW50Q2hpbGQoTGlzdFZpZXdUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBsaXN0VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBAQ29udGVudENoaWxkKExpc3RWaWV3Rm9vdGVyVGVtcGxhdGVEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSkgZm9vdGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBAQ29udGVudENoaWxkKExpc3RWaWV3RW1wdHlUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBlbXB0eURhdGFUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcblxyXG4gICAgQElucHV0KCkgaGVhZGVyQ29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICBASW5wdXQoKSBsaXN0Q29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVGbjtcclxuICAgIEBJbnB1dCgpIGVtcHR5Q29tcG9uZW50VHlwZTogQ29tcG9uZW50VGVtcGxhdGVSZWY7XHJcbiAgICBASW5wdXQoKSBmb290ZXJDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuXHJcblxyXG4gICAgQFZpZXdDaGlsZCgnc2Nyb2xsRWwnKSBzY3JvbGxFbDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2xpc3RHcm91cCcpIGxpc3RHcm91cDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BhZ2VyJykgcGFnZXI6IFBhZ2luYXRpb25Db250cm9sc0NvbXBvbmVudDtcclxuXHJcbiAgICAvLyBASW5wdXQoKSBoZWlnaHQ6bnVtYmVyO1xyXG4gICAgLyoqIOWIl+ihqOaVsOaNriAqL1xyXG4gICAgQElucHV0KCkgZGF0YSA9IFtdO1xyXG5cclxuICAgIEBJbnB1dCgpIGlkOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOaVsOaNruS4uuepuuaYr+WQpuWxleekuum7mOiupCAqL1xyXG4gICAgQElucHV0KCkgc2hvd0VtcHR5ID0gdHJ1ZTtcclxuICAgIC8qKiDmmK/lkKboh6rlrprkuYnnqbrmlbDmja7mqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpIGVtcHR5VGVtcGxhdGUgPSBmYWxzZTtcclxuICAgIC8qKiDmmK/lkKbmlK/mjIHlpJrpgIkg6buY6K6k5Li6ZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIG11bHRpcGxlU2VsZWN0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYr+WQpuaUr+aMgeWIhumhtSDpu5jorqRmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgc3VwcG9ydFBhZ2luZyA9IGZhbHNlO1xyXG5cclxuICAgIC8vIOm7mOiupOWIhumhtVxyXG4gICAgQElucHV0KCkgcGFnZXJPblNlcnZlciA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZSA9IDEwO1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDlkK/nlKjot6jpobXlpJrpgIkgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZU1vcmVQYWdlU2VsZWN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzaG93U2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzZWxlY3RlZEl0ZW1Gb3JtYXQ6IChpdGVtOiBhbnkpID0+IHN0cmluZyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkv53mjIHpgInkuK3nirbmgIHvvIzpu5jorqTkuLogdHJ1Ze+8myDlkK/nlKjlpJrpgInlkI7mnInmlYjjgIJcclxuICAgICAqIOW9k+iuvuS4umZhbHNl5pe277yM6YCJ5Lit6aG55YaN5qyh54K55Ye75bCG5Y+W5raI6YCJ5Lit54q25oCBXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGtlZXBTZWxlY3QgPSB0cnVlO1xyXG5cclxuXHJcbiAgICAvLyDmmK/lkKblubPpk7pcclxuICAgIEBJbnB1dCgpIGZpbGwgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuaoquWQkeaOkuWIl1xyXG4gICAgQElucHV0KCkgY2FyZExheW91dCA9IGZhbHNlO1xyXG5cclxuICAgIF9hY3RpdmVJbmRleDogbnVtYmVyO1xyXG4gICAgZ2V0IGFjdGl2ZUluZGV4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmVJbmRleDtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBhY3RpdmVJbmRleCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmVJbmRleCA9IHZhbDtcclxuICAgICAgICB0aGlzLmRhdGFJbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KCkgbGlzdENsYXNzTmFtZTogc3RyaW5nO1xyXG4gICAgLyoqXHJcbiAgICAgKiDli77pgInlgLxcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY2hlY2tWYWx1ZXM6IGFueVtdID0gW107XHJcbiAgICBAT3V0cHV0KCkgY2hlY2tWYWx1ZXNDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnlbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueVtdPigpO1xyXG5cclxuICAgIEBJbnB1dCgpIGNoZWNrSXRlbXMgPSBbXTtcclxuICAgIEBJbnB1dCgpIGNoZWNrSXRlbXNDaGFuZ2U6IEV2ZW50RW1pdHRlcjx7IGl0ZW1zOiBhbnlbXSwgaW5zdGFuY2U6IGFueSB9PiA9IG5ldyBFdmVudEVtaXR0ZXI8eyBpdGVtczogW10sIGluc3RhbmNlOiBhbnkgfT4oKTtcclxuXHJcbiAgICAvLyBASW5wdXQoKSBib3JkZXJCb3R0b206Ym9vbGVhbiA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VJbmZvID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTnVtYmVyID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dHb3RvSW5wdXQgPSBmYWxzZTtcclxuICAgIC8vIOS/neeVmea7muWKqOadoeS9jee9rlxyXG4gICAgcHJpdmF0ZSBfa2VlcFNjcm9sbFBvc2l0aW9uID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGtlZXBTY3JvbGxQb3NpdGlvbih2YWwpIHtcclxuICAgICAgICBpZiAodmFsICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9rZWVwU2Nyb2xsUG9zaXRpb24gPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZFNjcm9sbEV2ZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJFbGVtZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGtlZXBTY3JvbGxQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fa2VlcFNjcm9sbFBvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjb250ZW50RWxCaW5kU2Nyb2xsID0gbnVsbDtcclxuICAgIC8vIOiusOW9leS9jee9rlxyXG4gICAgcHJpdmF0ZSBzY3JvbGxQb3MgPSB7IHNjcm9sbEhlaWdodDogMCwgY2xpZW50SGVpZ2h0OiAwLCBzY3JvbGxUb3A6IDAgfTtcclxuICAgIC8vIOWkhOeQhm5nem9uZVxyXG4gICAgcHJpdmF0ZSBuZ1pvbmUgPSBudWxsO1xyXG4gICAgLy8g6K6w5b2V5YWD57Sg5bC65a+45Y+Y5pu0XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgX3BhZ2VMaXN0ID0gWzEwLCAyMCwgMzAsIDUwLCAxMDBdO1xyXG5cclxuICAgIGdldCBwYWdlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFnZUxpc3Q7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgcGFnZUxpc3QodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnZUxpc3QgPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlci5zZXRQYWdlTGlzdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF90b3RhbCA9IDA7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHRvdGFsKHZhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl90b3RhbCAhPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsID0gdmFsIHx8IDA7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgfHwge30sIHsgdG90YWxJdGVtczogdmFsIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG90YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvdGFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDkvZzkuLrllK/kuIDmoIfor4bnmoTmlbDmja5rZXnlgLwg5aaC5p6c5rKh5LygIOWUr+S4gOagh+ivhuS4umluZGV45YC8ICovXHJcbiAgICBASW5wdXQoKSBsaXN0aWROYW1lID0gJ2lkJztcclxuXHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtbGlzdHZpZXctZmlsbCcpIGdldCBsaXN0dmlld0ZpbGwoKSB7IHJldHVybiB0aGlzLmZpbGw7IH1cclxuXHJcblxyXG4gICAgLyoqIOeCueWHu+afkOS4gOihjOWQjiAqL1xyXG4gICAgQE91dHB1dCgpIGxpc3RDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlpJrpgInmoYYg6YCJ5Lit54q25oCB5Y+Y5YyWICovXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLy8g5YiG6aG15LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgcGFnZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDlvZPliY3lsZXnpLrliJfooajmlbDmja4gKi9cclxuICAgIGN1cnJlbnREYXRhID0gW107XHJcblxyXG4gICAgLyoqIOmAieS4reeahOWIl+ihqOaVsOe7hCAqL1xyXG4gICAgc2VsZWN0RGF0YUxpc3QgPSBbXTtcclxuICAgIC8qKiDot6jpobXlpJrpgInorrDlvZUgKi9cclxuICAgIHNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPSBbXTtcclxuXHJcbiAgICAvLyDlvZPliY3ngrnlh7tcclxuICAgIHB1YmxpYyBjbGlja0l0ZW06IGFueTtcclxuXHJcbiAgICBwdWJsaWMgbWF4U2l6ZSA9IDc7XHJcbiAgICBwdWJsaWMgZGlyZWN0aW9uTGlua3MgPSB0cnVlO1xyXG4gICAgcHVibGljIGF1dG9IaWRlID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmVzcG9uc2l2ZSA9IHRydWU7XHJcbiAgICBwdWJsaWMgcGFnaW5hdGlvbk9wdGlvbnM6IGFueSA9IHt9O1xyXG5cclxuICAgIHB1YmxpYyBsYWJlbHM6IGFueSA9IHtcclxuICAgICAgICBwcmV2aW91c0xhYmVsOiAnICcsXHJcbiAgICAgICAgbmV4dExhYmVsOiAnICcsXHJcbiAgICAgICAgc2NyZWVuUmVhZGVyUGFnaW5hdGlvbkxhYmVsOiAnUGFnaW5hdGlvbicsXHJcbiAgICAgICAgc2NyZWVuUmVhZGVyUGFnZUxhYmVsOiAncGFnZScsXHJcbiAgICAgICAgc2NyZWVuUmVhZGVyQ3VycmVudExhYmVsOiBgWW91J3JlIG9uIHBhZ2VgXHJcbiAgICB9O1xyXG5cclxuICAgIG1vdXNlSW5TZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgIG9wZW5TZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgem9uZTogTmdab25lO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLCBAT3B0aW9uYWwoKSBwcml2YXRlIGluamVjdDogSW5qZWN0b3IpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaWQ6ICdGYXJyaXMtbGlzdFZpZXctUGFnaW5hdGlvbl8nICsgKHRoaXMuaWQgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCkpLFxyXG4gICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3QsXHJcbiAgICAgICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgICAgIHJlbW90ZTogdGhpcy5wYWdlck9uU2VydmVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmJpbmRTY3JvbGxFdmVudCgpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJFbGVtZW50KCk7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudERhdGEgPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgdGhpcy5kYXRhSW5pdCgpO1xyXG4gICAgICAgIC8vIHRoaXMudFJvdXRlci5ldmVudHMucGlwZShcclxuICAgICAgICAvLyAgICAgZmlsdGVyKChldmVudCkgPT4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKVxyXG4gICAgICAgIC8vICkuc3Vic2NyaWJlKChldmVudDogTmF2aWdhdGlvbkVuZCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ+iusOW9lei3r+eUsScpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmRhdGEgJiYgIWNoYW5nZXMuZGF0YS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJyZW50RGF0YSh0aGlzLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlc1sndG90YWwnXSAmJiAhY2hhbmdlcy50b3RhbC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9uc1sndG90YWxJdGVtcyddID0gdGhpcy50b3RhbDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHsgLi4udGhpcy5wYWdpbmF0aW9uT3B0aW9ucyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlc1sncGFnZUluZGV4J10gJiYgIWNoYW5nZXMucGFnZUluZGV4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zWydjdXJyZW50UGFnZSddID0gdGhpcy5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSB7IC4uLnRoaXMucGFnaW5hdGlvbk9wdGlvbnMgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzWydwYWdlU2l6ZSddICYmICFjaGFuZ2VzLnBhZ2VTaXplLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zWydpdGVtc1BlclBhZ2UnXSA9IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSB7IC4uLnRoaXMucGFnaW5hdGlvbk9wdGlvbnMgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWvueavlOabtOaWsO+8jOWIpOaWreacieabtOaWsOeahOaXtuWAmeS4lOaYr+i3qOmhteWkmumAieeahOaXtu+8jOabtOaWsOW3sumAieihjOS/oeaBr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNoZWNrVmFsdWVzICYmICFjaGFuZ2VzLmNoZWNrVmFsdWVzLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2UgPSB0aGlzLmRpZmZlcmVuY2VCeShjaGFuZ2VzLmNoZWNrVmFsdWVzLmN1cnJlbnRWYWx1ZSB8fCBbXSwgY2hhbmdlcy5jaGVja1ZhbHVlcy5wcmV2aW91c1ZhbHVlIHx8IFtdLCB2ID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3ModGhpcy5jaGVja1ZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNoZWNrSXRlbXMgJiYgIWNoYW5nZXMuY2hlY2tJdGVtcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID0gWy4uLnRoaXMuY2hlY2tJdGVtc107XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuY2hlY2tJdGVtcy5tYXAobiA9PiBuW3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRJdGVtcyhpZHMsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgfVxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgLy8g5Y+W5raI55uR5ZCs5bC65a+45Y+Y5pu0XHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5ybyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWPlua2iOe7keWumlxyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbEJpbmRTY3JvbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuY29udGVudEVsQmluZFNjcm9sbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsQmluZFNjcm9sbCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKioyM+W5tDEx5pyIMjDml6VcclxuICAgICAqIOWGhemDqOaPkOS+m+eahOaQnOe0ouaWueazle+8jOaMh+Wumui/h+a7pOWtl+espuS4su+8jOi/h+a7pOaVsOaNrueahOaJgOacieWxnuaAp1xyXG4gICAgICog5L2/55So5Zy65pmv77ya5YiX6KGo6KeG5Zu+5aS06YOo5qih54mI5Y+v5Lul5pS+572u5p+l6K+i44CB5o6S5bqP5Yqf6IO977yM54K55Ye75oyJ6ZKu55qE5p+l6K+i5Yqf6IO95Y+v5Lul6LCD55So6L+Z5Liq5pa55rOVXHJcbiAgICAgKiAqL1xyXG4gICAgc2VhcmNoTGlzdChzZWFyY2hGaWVsZCkge1xyXG4gICAgICAgIGlmIChzZWFyY2hGaWVsZCAhPT0gJycgJiYgdGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoKGxpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0VmFsdWUgPSBPYmplY3QudmFsdWVzKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0VmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RWYWx1ZVtpXSA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFZhbHVlW2ldLnRvU3RyaW5nKCkuaW5jbHVkZXMoc2VhcmNoRmllbGQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBsaXN0VmFsdWVbaV0udG9TdHJpbmcoKS5pbmNsdWRlcyhzZWFyY2hGaWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDph43nva7orrDlvZXlubbmu5rliqjliLDpobbpg6hcclxuICAgICAgICAgICAgdGhpcy5nb3RvU2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbGlzdGRhdGE6IHRoaXMuY3VycmVudERhdGEsIHNlYXJjaFZhbHVlOiBzZWFyY2hGaWVsZCwgbGVuZ3RoOiB0aGlzLmN1cnJlbnREYXRhLmxlbmd0aCB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOeCueWHu+afkOS4gOWIl+S6i+S7tiAqL1xyXG4gICAgbGlzdFNlbGVjdChldmVudCwgbGlzdEl0ZW0sIGluZGV4LCBjaGVja0NoYW5nZUV2ZW50ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBpc0NsaWNrQ2hlY2tib3ggPSB0eXBlb2YgZXZlbnQgPT09ICdib29sZWFuJztcclxuXHJcbiAgICAgICAgaWYgKGxpc3RJdGVtWyd1bkNsaWNrJ10gfHwgbGlzdEl0ZW1bJ3NlbGVjdERpc2FibGUnXSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja0NoYW5nZS5lbWl0KHsgbGlzdGRhdGE6IGxpc3RJdGVtLCBpbmRleCB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0SXRlbUluZGV4ID0gdGhpcy5zZWxlY3REYXRhTGlzdC5maW5kSW5kZXgoKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEtleShpdGVtLCBpKSA9PT0gdGhpcy5nZXRLZXkobGlzdEl0ZW0sIGluZGV4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW1bJ2NoZWNrZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5rZWVwU2VsZWN0IHx8IGlzQ2xpY2tDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmlK/mjIHlpJrpgIkg5Yig6Zmk6K+l6YCJ5Lit6KGMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3Quc3BsaWNlKHNlbGVjdEl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoJ3JlbW92ZScsIGxpc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW1bJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3Quc3BsaWNlKHNlbGVjdEl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QudW5zaGlmdChsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlK/mjIHlpJrpgIkg5o+S5YWl6K+l6YCJ5Lit6KGMXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdEl0ZW1JbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC51bnNoaWZ0KGxpc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcignYXBwZW5kJywgbGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3Quc3BsaWNlKHNlbGVjdEl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QudW5zaGlmdChsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtWydjaGVja2VkJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5LiN5pSv5oyB5aSa6YCJIOabv+aNouW9k+WJjemAieS4reihjFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC5wdXNoKGxpc3RJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNoZWNrQ2hhbmdlRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tJdGVtID0gbGlzdEl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5saXN0Q2xpY2suZW1pdCh7IGRhdGE6IHRoaXMuc2VsZWN0RGF0YUxpc3QsIGluZGV4LCBjaGVja0NoYW5nZUV2ZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBsZXQgaWRzID0gdGhpcy5kYXRhLmZpbHRlcihpdGVtID0+ICEhaXRlbS5jaGVja2VkKS5tYXAoaXRlbSA9PiBpdGVtW3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVNb3JlUGFnZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWRzID0gdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLm1hcChpdGVtID0+IGl0ZW1bdGhpcy5saXN0aWROYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vbkNoZWNrVmFsdWVzQ2hhbmdlKGlkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDojrflvpfmr4/kuIDooYxsaXN0IOWUr+S4gOagh+ivhiAqL1xyXG4gICAgZ2V0S2V5KGxpc3QsIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGlkTmFtZSAmJiBsaXN0Lmhhc093blByb3BlcnR5KHRoaXMubGlzdGlkTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RbdGhpcy5saXN0aWROYW1lXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBjaGVja2JveOeKtuaAgeWPmOWMliAqL1xyXG4gICAgZ2V0U2VsZWN0KGV2ZW50LCBjaGFuZ2VEYXRhLCBpKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBldmVudC5jaGVja2VkO1xyXG4gICAgICAgIHRoaXMubGlzdFNlbGVjdChzdGF0ZSwgY2hhbmdlRGF0YSwgaSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAvKioyM+W5tDEx5pyIMjDml6VcclxuICAgICog5YaF6YOo5o+Q5L6b55qE5o6S5bqP5pa55rOV77yM5oyH5a6a5o6S5bqP5a2X5q6144CB5Y2H5bqP6L+Y5piv6ZmN5bqPXHJcbiAgKiDkvb/nlKjlnLrmma/vvJrliJfooajop4blm77lpLTpg6jmqKHniYjlj6/ku6XmjIflrprmn6Xor6LjgIHmjpLluo/lip/og73vvIzngrnlh7vmjInpkq7nmoTmjpLluo/lip/og73lj6/ku6XosIPnlKjov5nkuKrmlrnms5VcclxuICAqICovXHJcbiAgICBzb3J0KHNvcnRrZXlOYW1lLCBzb3J0VHlwZSA9ICdhc2MnKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0YS5zb3J0KHRoaXMuY29tcGFyZShzb3J0a2V5TmFtZSwgc29ydFR5cGUpKTtcclxuICAgICAgICAvLyDmu5rliqjliLDpobbpg6hcclxuICAgICAgICB0aGlzLmdvdG9TY3JvbGxUb3AoKTtcclxuICAgICAgICByZXR1cm4geyBzb3J0UmVzdWx0OiB7IGxpc3RkYXRhOiB0aGlzLmN1cnJlbnREYXRhLCBzb3J0a2V5TmFtZSwgc29ydFR5cGUgfSB9O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc2VsZWN0Um93KHByaW1hcnlWYWx1ZTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudERhdGEgJiYgdGhpcy5jdXJyZW50RGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuY3VycmVudERhdGEuZmluZChpdGVtID0+IGl0ZW1bdGhpcy5saXN0aWROYW1lXSA9PT0gcHJpbWFyeVZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHJvdykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja0l0ZW0gPSByb3c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNvbXBhcmUoS2V5TmFtZSwgdHlwZSkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnZGVzYycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvYmoxLCBvYmoyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwxID0gb2JqMVtLZXlOYW1lXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbDIgPSBvYmoyW0tleU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbDIgPCB2YWwxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbDIgPiB2YWwxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAob2JqMSwgb2JqMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsMSA9IG9iajFbS2V5TmFtZV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwyID0gb2JqMltLZXlOYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwyID4gdmFsMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwyIDwgdmFsMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IHJldHVybiAwOyB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1BY3RpdmUoaXRlbSkge1xyXG4gICAgICAgIC8vIOS4jeeuoeaYr+WQpuW8gOWQr+WkmumAie+8jOW9k+WJjeihjOWPquacieS4gOihjFxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RpZE5hbWUgJiYgdGhpcy5jbGlja0l0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdGhpcy5saXN0aWROYW1lXSA9PT0gdGhpcy5jbGlja0l0ZW1bdGhpcy5saXN0aWROYW1lXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6aG156CB5pS55Y+YXHJcbiAgICAgKiBAcGFyYW0gcGFnZSBcclxuICAgICAqL1xyXG4gICAgb25QYWdlQ2hhbmdlKHBhZ2U6IHsgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgfSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VJbmRleCAhPT0gcGFnZS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHBhZ2UucGFnZUluZGV4O1xyXG4gICAgICAgICAgICAvLyB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gey4uLnRoaXMucGFnaW5hdGlvbk9wdGlvbnN9O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoeyBwYWdlSW5mbzogcGFnZSB9KTtcclxuICAgICAgICAgICAgLy8g5rua5Yqo5Yiw6aG26YOoXHJcbiAgICAgICAgICAgIHRoaXMuZ290b1Njcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pS55Y+Y5YiG6aG15aSn5bCPXHJcbiAgICAgKiBAcGFyYW0gcGFnZVNpemUgXHJcbiAgICAgKi9cclxuICAgIG9uUGFnZVNpemVDaGFuZ2UocGFnZVNpemU6IG51bWJlcikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucGFnZVNpemUgIT09IHBhZ2VTaXplICYmIHRoaXMudG90YWwpO1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VTaXplICE9PSBwYWdlU2l6ZSAmJiB0aGlzLnRvdGFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaXRlbXNQZXJQYWdlID0gcGFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy50b3RhbDtcclxuICAgICAgICAgICAgbGV0IHBhZ2VMZW5ndGggPSBNYXRoLmZsb29yKHRvdGFsIC8gcGFnZVNpemUpO1xyXG4gICAgICAgICAgICBpZiAodG90YWwgJSBwYWdlU2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VMZW5ndGggKz0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VMZW5ndGggJiYgdGhpcy5wYWdlSW5kZXggPiBwYWdlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2VMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gdGhpcy5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHsuLi50aGlzLnBhZ2luYXRpb25PcHRpb25zfTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZWQuZW1pdCh7IHBhZ2VJbmZvOiB7IHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsIHBhZ2VTaXplIH0gfSk7XHJcbiAgICAgICAgICAgICAvLyDmu5rliqjliLDpobbpg6hcclxuICAgICAgICAgICAgIHRoaXMuZ290b1Njcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50RGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWxlY3REYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERhdGFMaXN0O1xyXG4gICAgfVxyXG4gICAgLyoqMjPlubQxMeaciDIw5pelXHJcbiAgICAgKiDmlK/mjIHph43mlrDorr7nva5saXN0dmlld+aVsOaNriBcclxuICAgICAqIOatpOaWueazleWAvOiiq2tlbmRvLWJpbmRpbmfkvb/nlKjvvIznu5HlrprmlbDmja5cclxuICAgICovXHJcbiAgICBzZXREYXRhKGxpc3R2aWV3RGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGxpc3R2aWV3RGF0YTtcclxuICAgICAgICB0aGlzLmNoYW5nZUN1cnJlbnREYXRhKGxpc3R2aWV3RGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGF0YUluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QgPSB0aGlzLmRhdGEuZmlsdGVyKChsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggPj0gMCAmJiB0aGlzLmFjdGl2ZUluZGV4IDw9ICh0aGlzLmRhdGEubGVuZ3RoIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtID0gdGhpcy5kYXRhW3RoaXMuYWN0aXZlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja0l0ZW0gPSBkYXRhSXRlbTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0LnB1c2godGhpcy5jbGlja0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlSW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0RGF0YUxpc3QubGVuZ3RoICYmICF0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC5wdXNoKHRoaXMuZGF0YVswXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSXRlbSA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jZHIpIHtcclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKGFjdGl2ZTogJ3JlbW92ZScgfCAnYXBwZW5kJyB8ICcnID0gJycsIGxpc3RJdGVtPzogYW55LCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0ICYmIHRoaXMuZW5hYmxlTW9yZVBhZ2VTZWxlY3QpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUgPT09ICdyZW1vdmUnICYmIGxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdEl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLmZpbHRlcihuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdEl0ZW0gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5bdGhpcy5saXN0aWROYW1lXSAhPSBsaXN0SXRlbVt0aGlzLmxpc3RpZE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gblt0aGlzLmxpc3RpZE5hbWVdICE9IGxpc3RJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLmZpbHRlcihuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0SXRlbS5pbmRleE9mKGEgPT4gYVt0aGlzLmxpc3RpZE5hbWVdID09PSBuW3RoaXMubGlzdGlkTmFtZV0pID09PSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrSXRlbXNDaGFuZ2UuZW1pdCh7IGl0ZW1zOiBbLi4udGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyXSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZSA9PT0gJ2FwcGVuZCcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShsaXN0SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPSBbLi4udGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLCBsaXN0SXRlbV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciA9IFsuLi50aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIsIC4uLmxpc3RJdGVtXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJdGVtc0NoYW5nZS5lbWl0KHsgaXRlbXM6IFsuLi50aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXJdLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciA9IFsuLi50aGlzLnNlbGVjdERhdGFMaXN0XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrZWRzID0gdGhpcy5zYW1lQnkodGhpcy5jdXJyZW50RGF0YSwgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLCAodikgPT4gdlt0aGlzLmxpc3RpZE5hbWVdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3Q2hlY2tlZHMgJiYgbmV3Q2hlY2tlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gbmV3Q2hlY2tlZHMuaW5jbHVkZXMoaXRlbVt0aGlzLmxpc3RpZE5hbWVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlhajpgIkgKi9cclxuICAgIGxpc3RDaGVja0FsbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdCA9IHRoaXMuY3VycmVudERhdGEuZmlsdGVyKChsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcignYXBwZW5kJywgdGhpcy5jdXJyZW50RGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tlZFZhbHVlcyh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWPlua2iOWFqOmAiSAqL1xyXG4gICAgbGlzdENoZWNrQWxsQ2FuY2VsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdyZW1vdmUnLCB0aGlzLmN1cnJlbnREYXRhKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2VkVmFsdWVzKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWLvumAieihjFxyXG4gICAgICogQHBhcmFtIGlkcyBpZHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNoZWNrUm93cyhpZHM6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKCFpZHMgfHwgaWRzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdENoZWNrQWxsQ2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRzLmluY2x1ZGVzKGl0ZW1bdGhpcy5saXN0aWROYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLm9uQ2hlY2tWYWx1ZXNDaGFuZ2UoaWRzKTtcclxuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25DaGVja1ZhbHVlc0NoYW5nZShpZHM6IGFueVtdKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkaWZmZXJlbmNlQnkgPSAoYSwgYiwgZm4pID0+IHtcclxuICAgICAgICBjb25zdCBzID0gbmV3IFNldChiLm1hcChmbikpO1xyXG4gICAgICAgIHJldHVybiBhLm1hcChmbikuZmlsdGVyKGVsID0+ICFzLmhhcyhlbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2FtZUJ5ID0gKGEsIGIsIGZuKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTZXQoYi5tYXAoZm4pKTtcclxuICAgICAgICByZXR1cm4gYS5tYXAoZm4pLmZpbHRlcihlbCA9PiBzLmhhcyhlbCkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvbk1vdXNlRW50ZXIoJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICB0aGlzLm1vdXNlSW5TZWxlY3RlZExpc3QgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgJiYgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5TZWxlY3RlZExpc3QgPSAhdGhpcy5vcGVuU2VsZWN0ZWRMaXN0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BlblNlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgY2xvc2VTZWxlY3RlZExpc3QoKSB7XHJcbiAgICAgICAgdGhpcy5vcGVuU2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tb3VzZUluU2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNkclsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRlbFNlbGVjdGVkSXRlbShpZDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbVt0aGlzLmxpc3RpZE5hbWVdID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0ID0gdGhpcy5zZWxlY3REYXRhTGlzdC5maWx0ZXIobiA9PiBuW3RoaXMubGlzdGlkTmFtZV0gIT0gaWQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoJ3JlbW92ZScsIGlkKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2VkVmFsdWVzKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXJTZWxlY3RlZCgkZXZlbnQpIHtcclxuICAgICAgICAvLyB0aGlzLmNsZWFyU2VsZWN0ZWRJdGVtLmVtaXQoKTtcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0ZWRMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5saXN0Q2hlY2tBbGxDYW5jZWwoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID0gW107XHJcbiAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub25DaGVja1ZhbHVlc0NoYW5nZShbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWxlY3RMaXN0UGFuZWxDbG9zZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0ZWRMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja2VkVmFsdWVzKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5zZWxlY3REYXRhTGlzdC5tYXAobiA9PiBuW3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlci5tYXAobiA9PiBuW3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoZWNrVmFsdWVzQ2hhbmdlKHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0l0ZW1zQ2hhbmdlLmVtaXQoeyBpdGVtczogdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckNoZWNrZWRzKGNsZWFyQWxsID0gdHJ1ZSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbGVhckFsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdyZW1vdmUnLCB0aGlzLmN1cnJlbnREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tlZFZhbHVlcyhlbWl0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NldEl0ZW1zQ2hlY2tlZFN0YXR1cyhpZHM6IGFueSwgY2hlY2tlZDogYm9vbGVhbiwgZW1pdDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBjaGVja2VkID8gJ2FwcGVuZCcgOiAncmVtb3ZlJztcclxuICAgICAgICAgICAgaWRzLmZvckVhY2goaSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkID0gaVt0aGlzLmxpc3RpZE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRhdGEuZmluZChuID0+IG5bdGhpcy5saXN0aWROYW1lXSA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcignYXBwZW5kJywgaSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdyZW1vdmUnLCBpZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tlZFZhbHVlcyhlbWl0KTtcclxuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tJdGVtcyhpZHM6IG51bWJlcltdIHwgc3RyaW5nW10gfCBvYmplY3RbXSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0SXRlbXNDaGVja2VkU3RhdHVzKGlkcywgZmFsc2UsIGVtaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrZWRJdGVtcyhpZHM6IG9iamVjdFtdLCBlbWl0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLl9zZXRJdGVtc0NoZWNrZWRTdGF0dXMoaWRzLCB0cnVlLCBlbWl0KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog57uR5a6aXHJcbiAgICAgKi9cclxuICAgIGJpbmRTY3JvbGxFdmVudCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsRWwpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgaWYgKHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbEJpbmRTY3JvbGwgPSB0aGlzLnNjcm9sbFJlY29yZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuY29udGVudEVsQmluZFNjcm9sbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsQmluZFNjcm9sbCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKbpnIDopoHmu5rliqjliLDkvY3nva5cclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNjcm9sbFRvUmVjb3JkUG9zaXRpb24oKSB7XHJcbiAgICAgICAgbGV0IHNjcm9sbFRhcmdldCA9IHRoaXMuc2Nyb2xsRWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAvLyDlkK/nlKjkv53mjIHmu5rliqjkvY3nva7miJbogIXlhYPntKDmu5rliqjmnaHkvY3nva4+MOaIluiAheiusOW9lea7muWKqOadoeS9jee9ruWcqOmhtumDqOaIluiAheiusOW9leS4juWFg+e0oOa7muWKqOadoeebuOetiVxyXG4gICAgICAgIGlmICghdGhpcy5rZWVwU2Nyb2xsUG9zaXRpb24gfHwgc2Nyb2xsVGFyZ2V0LnNjcm9sbFRvcCA+IDAgfHwgdGhpcy5zY3JvbGxQb3Muc2Nyb2xsVG9wID09IDAgfHwgTWF0aC5hYnModGhpcy5zY3JvbGxQb3Muc2Nyb2xsVG9wLXNjcm9sbFRhcmdldC5zY3JvbGxUb3ApPD0yKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5rKh5pyJ5Y+Y5pu0XHJcbiAgICAgICAgbGV0IGZpbmRTY3JvbGxJbmRleCA9IFsnc2Nyb2xsSGVpZ2h0JywgJ2NsaWVudEhlaWdodCddLmZpbmRJbmRleCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxQb3NbaXRlbV0gIT0gc2Nyb2xsVGFyZ2V0W2l0ZW1dO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChmaW5kU2Nyb2xsSW5kZXggPT0gLTEpIHtcclxuICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0WydzY3JvbGxUb3AnXSA9IHRoaXMuc2Nyb2xsUG9zWydzY3JvbGxUb3AnXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhoXpg6jorrDlvZVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzY3JvbGxSZWNvcmQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbikgeyByZXR1cm47IH1cclxuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIFsnc2Nyb2xsSGVpZ2h0JywgJ2NsaWVudEhlaWdodCcsICdzY3JvbGxUb3AnXS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUG9zW2l0ZW1dID0gc2Nyb2xsVGFyZ2V0W2l0ZW1dO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43nva7orrDlvZVcclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlc2V0UmVjb3JkKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5rZWVwU2Nyb2xsUG9zaXRpb24pIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgbGV0IHNjcm9sbFRhcmdldCA9IHRoaXMuc2Nyb2xsRWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBbJ3Njcm9sbEhlaWdodCcsICdjbGllbnRIZWlnaHQnLCAnc2Nyb2xsVG9wJ10uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbSA9PSAnc2Nyb2xsVG9wJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxQb3NbaXRlbV0gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxQb3NbaXRlbV0gPSBzY3JvbGxUYXJnZXRbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5rua5Yqo5Yiw6aG26YOoXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ290b1Njcm9sbFRvcCgpIHtcclxuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHNjcm9sbFRhcmdldC5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIHRoaXMucmVzZXRSZWNvcmQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+HXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb2JzZXJ2ZXJFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zY3JvbGxFbCB8fCAhdGhpcy5pbmplY3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgaWYgKCF0aGlzLm5nWm9uZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZSA9IHRoaXMuaW5qZWN0LmdldDxOZ1pvbmU+KE5nWm9uZSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucm8pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wSGVpZ2h0ID0gZW50cmllc1swXS5jb250ZW50UmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wSGVpZ2h0ID4gMCAmJiB0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c6auY5bqm5pS55Y+Y77yM5bCx6YeN572uLOS4jeeUqOe9rumhtuOAguiOt+WPlumrmOW6puacieWwj+WBj+enu1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRlbXBIZWlnaHQtdGhpcy5zY3JvbGxQb3NbJ2NsaWVudEhlaWdodCddKTw9IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvUmVjb3JkUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFJlY29yZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMuc2Nyb2xsRWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWOu+S/ruebkeWQrOWwuuWvuOWPmOabtFxyXG4gICAgICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmr5TovoPmlbDmja7liKTmlq3mmK/lkKbpnIDopoHmu5rliqjliLDpobbpg6hcclxuICAgICAqIEBwYXJhbSBvbGREYXRhIOaXp+aVsOaNrlxyXG4gICAgICogQHBhcmFtIG5ld0RhdGEg5paw5pWw5o2uXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb21wYXJlRGF0YVRoZW5TY3JvbGxUb3Aob2xkRGF0YSxuZXdEYXRhKXtcclxuICAgICAgICAvLyDmsqHmnInmlbDmja7vvIzph43nva5cclxuICAgICAgICBpZighb2xkRGF0YXx8IW5ld0RhdGEpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5rKh5pyJ5pWw5o2u77yM6YeN572uXHJcbiAgICAgICAgaWYob2xkRGF0YS5sZW5ndGg9PTB8fG5ld0RhdGEubGVuZ3RoPT0wKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG9sZERhdGEubGVuZ3RoIT1uZXdEYXRhLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvLyDlrprkvY3nva5cclxuICAgICAgICAgICAgbGV0IGlkRmllbGQ9XCJcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGlkTmFtZSAmJiBvbGREYXRhWzBdLmhhc093blByb3BlcnR5KHRoaXMubGlzdGlkTmFtZSkmJm5ld0RhdGFbMF0uaGFzT3duUHJvcGVydHkodGhpcy5saXN0aWROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgaWRGaWVsZD10aGlzLmxpc3RpZE5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIWlkRmllbGQpe1xyXG4gICAgICAgICAgICAgICAgLy8g5L+d5oyB5rua5Yqo5p2hXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5om+5Yiw5LiN5ZCM55qE5pWw5o2uXHJcbiAgICAgICAgICAgIGxldCBmaW5kRGlmZmVyRGF0YT1vbGREYXRhLmZpbmQoKGl0ZW0saW5kZXgpPT57XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtW2lkRmllbGRdPT1uZXdEYXRhW2luZGV4XVtpZEZpZWxkXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDmnInkuI3lkIzmlbDmja7vvIzph43nva5cclxuICAgICAgICAgICAgaWYoZmluZERpZmZlckRhdGEpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy8g5pWw5o2u55u45ZCM77yM5L+d5oyB5rua5Yqo5p2hXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG5ld0RhdGEgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hhbmdlQ3VycmVudERhdGEobmV3RGF0YSl7XHJcbiAgICAgICAgbGV0IG5lZWRTY3JvbGxUb3A9dGhpcy5jb21wYXJlRGF0YVRoZW5TY3JvbGxUb3AodGhpcy5jdXJyZW50RGF0YSxuZXdEYXRhKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRhPW5ld0RhdGE7XHJcbiAgICAgICAgaWYobmVlZFNjcm9sbFRvcCl7XHJcbiAgICAgICAgICAgIHRoaXMuZ290b1Njcm9sbFRvcCgpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvUmVjb3JkUG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhSW5pdCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG4iXX0=