/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, TemplateRef, ContentChild, Output, EventEmitter, Input, Renderer2, ViewChild, HostBinding, ChangeDetectorRef, NgZone, Injector, Optional } from '@angular/core';
import { ListViewHeaderTemplateDirective, ListViewTemplateDirective, ListViewFooterTemplateDirective, ListViewEmptyTemplateDirective, } from './template.directive';
import ResizeObserver from "resize-observer-polyfill";
import { PaginationControlsComponent } from '@farris/ui-pagination';
var ListViewComponent = /** @class */ (function () {
    function ListViewComponent(el, renderer, cdr, inject) {
        this.el = el;
        this.renderer = renderer;
        this.cdr = cdr;
        this.inject = inject;
        // @Input() height:number;
        /**
         * 列表数据
         */
        this.data = [];
        /**
         * 数据为空是否展示默认
         */
        this.showEmpty = true;
        /**
         * 是否自定义空数据模板
         */
        this.emptyTemplate = false;
        /**
         * 是否支持多选 默认为false
         */
        this.multipleSelect = false;
        /**
         * 是否支持分页 默认false
         */
        this.supportPaging = false;
        // 默认分页
        this.pagerOnServer = true;
        this.pageSize = 10;
        this.pageIndex = 1;
        /**
         * 启用跨页多选
         */
        this.enableMorePageSelect = false;
        this.showSelectedList = false;
        this.selectedItemFormat = null;
        /**
         * 保持选中状态，默认为 true； 启用多选后有效。
         * 当设为false时，选中项再次点击将取消选中状态
         */
        this.keepSelect = true;
        // 是否平铺
        this.fill = false;
        // 是否横向排列
        this.cardLayout = false;
        /**
         * 勾选值
         */
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        this.checkItems = [];
        this.checkItemsChange = new EventEmitter();
        // @Input() borderBottom:boolean = true;
        this.showPageList = true;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showGotoInput = false;
        // 保留滚动条位置
        this._keepScrollPosition = false;
        this.contentElBindScroll = null;
        // 记录位置
        this.scrollPos = { scrollHeight: 0, clientHeight: 0, scrollTop: 0 };
        // 处理ngzone
        this.ngZone = null;
        // 记录元素尺寸变更
        this.ro = null;
        this._pageList = [10, 20, 30, 50, 100];
        this._total = 0;
        /**
         * 作为唯一标识的数据key值 如果没传 唯一标识为index值
         */
        this.listidName = 'id';
        /**
         * 点击某一行后
         */
        this.listClick = new EventEmitter();
        /**
         * 多选框 选中状态变化
         */
        this.checkChange = new EventEmitter();
        // 分页事件
        this.pageChanged = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        /**
         * 当前展示列表数据
         */
        this.currentData = [];
        /**
         * 选中的列表数组
         */
        this.selectDataList = [];
        /**
         * 跨页多选记录
         */
        this.selectDataListWithOtherPager = [];
        this.maxSize = 7;
        this.directionLinks = true;
        this.autoHide = false;
        this.responsive = true;
        this.paginationOptions = {};
        this.labels = {
            previousLabel: ' ',
            nextLabel: ' ',
            screenReaderPaginationLabel: 'Pagination',
            screenReaderPageLabel: 'page',
            screenReaderCurrentLabel: "You're on page"
        };
        this.mouseInSelectedList = false;
        this.openSelectedList = false;
        this.differenceBy = (/**
         * @param {?} a
         * @param {?} b
         * @param {?} fn
         * @return {?}
         */
        function (a, b, fn) {
            /** @type {?} */
            var s = new Set(b.map(fn));
            return a.map(fn).filter((/**
             * @param {?} el
             * @return {?}
             */
            function (el) { return !s.has(el); }));
        });
        this.sameBy = (/**
         * @param {?} a
         * @param {?} b
         * @param {?} fn
         * @return {?}
         */
        function (a, b, fn) {
            /** @type {?} */
            var s = new Set(b.map(fn));
            return a.map(fn).filter((/**
             * @param {?} el
             * @return {?}
             */
            function (el) { return s.has(el); }));
        });
    }
    Object.defineProperty(ListViewComponent.prototype, "activeIndex", {
        get: /**
         * @return {?}
         */
        function () {
            return this._activeIndex;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._activeIndex = val;
            this.dataInit();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListViewComponent.prototype, "keepScrollPosition", {
        get: /**
         * @return {?}
         */
        function () {
            return this._keepScrollPosition;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val != undefined) {
                this._keepScrollPosition = val;
                this.bindScrollEvent();
                this.observerElement();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListViewComponent.prototype, "pageList", {
        get: /**
         * @return {?}
         */
        function () {
            return this._pageList;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._pageList = val;
            if (this.pager) {
                this.pager.setPageList(val);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListViewComponent.prototype, "total", {
        get: /**
         * @return {?}
         */
        function () {
            return this._total;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (this._total !== val) {
                this._total = val || 0;
                this.paginationOptions = Object.assign(this.paginationOptions || {}, { totalItems: val });
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListViewComponent.prototype, "listviewFill", {
        get: /**
         * @return {?}
         */
        function () { return this.fill; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ListViewComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.paginationOptions = {
            id: 'Farris-listView-Pagination_' + (this.id || new Date().getTime()),
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.bindScrollEvent();
        this.observerElement();
        this.currentData = this.data;
        this.dataInit();
        // this.tRouter.events.pipe(
        //     filter((event) => event instanceof NavigationEnd)
        // ).subscribe((event: NavigationEnd) => {
        //         console.log('记录路由');
        //     });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    ListViewComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (changes.data && !changes.data.isFirstChange()) {
            this.changeCurrentData(this.data);
        }
        if (changes['total'] && !changes.total.isFirstChange()) {
            this.paginationOptions['totalItems'] = this.total;
            this.paginationOptions = tslib_1.__assign({}, this.paginationOptions);
        }
        if (changes['pageIndex'] && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions['currentPage'] = this.pageIndex;
            this.paginationOptions = tslib_1.__assign({}, this.paginationOptions);
        }
        if (changes['pageSize'] && !changes.pageSize.isFirstChange()) {
            this.paginationOptions['itemsPerPage'] = this.pageSize;
            this.paginationOptions = tslib_1.__assign({}, this.paginationOptions);
        }
        /**
         * 对比更新，判断有更新的时候且是跨页多选的时，更新已选行信息
         */
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            /** @type {?} */
            var change = this.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                return v;
            }));
            if (change) {
                if (!this.enableMorePageSelect) {
                    this.checkRows(this.checkValues);
                }
            }
        }
        if (changes.checkItems && !changes.checkItems.isFirstChange()) {
            this.selectDataListWithOtherPager = tslib_1.__spread(this.checkItems);
            /** @type {?} */
            var ids = this.checkItems.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this.listidName]; }));
            this.checkedItems(ids, false);
        }
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // 取消监听尺寸变更
        if (this.ro) {
            this.ro.unobserve(this.scrollEl.nativeElement);
            this.ro = null;
        }
        // 取消绑定
        if (this.contentElBindScroll) {
            this.scrollEl.nativeElement.removeEventListener('scroll', this.contentElBindScroll);
            this.contentElBindScroll = null;
        }
    };
    /**23年11月20日
     * 内部提供的搜索方法，指定过滤字符串，过滤数据的所有属性
     * 使用场景：列表视图头部模版可以放置查询、排序功能，点击按钮的查询功能可以调用这个方法
     * */
    /**
     * 23年11月20日
     * 内部提供的搜索方法，指定过滤字符串，过滤数据的所有属性
     * 使用场景：列表视图头部模版可以放置查询、排序功能，点击按钮的查询功能可以调用这个方法
     *
     * @param {?} searchField
     * @return {?}
     */
    ListViewComponent.prototype.searchList = /**
     * 23年11月20日
     * 内部提供的搜索方法，指定过滤字符串，过滤数据的所有属性
     * 使用场景：列表视图头部模版可以放置查询、排序功能，点击按钮的查询功能可以调用这个方法
     *
     * @param {?} searchField
     * @return {?}
     */
    function (searchField) {
        if (searchField !== '' && this.data && this.data.length) {
            this.currentData = this.data.filter((/**
             * @param {?} list
             * @return {?}
             */
            function (list) {
                /** @type {?} */
                var result;
                /** @type {?} */
                var listValue = Object.values(list);
                for (var i = 0; i < listValue.length; i++) {
                    if (typeof listValue[i] == 'string') {
                        if (listValue[i].toString().includes(searchField)) {
                            result = listValue[i].toString().includes(searchField);
                            break;
                        }
                    }
                }
                return result;
            }));
            // 重置记录并滚动到顶部
            this.gotoScrollTop();
        }
        else {
            this.currentData = this.data;
        }
        return { listdata: this.currentData, searchValue: searchField, length: this.currentData.length };
    };
    /** 点击某一列事件 */
    /**
     * 点击某一列事件
     * @param {?} event
     * @param {?} listItem
     * @param {?} index
     * @param {?=} checkChangeEvent
     * @return {?}
     */
    ListViewComponent.prototype.listSelect = /**
     * 点击某一列事件
     * @param {?} event
     * @param {?} listItem
     * @param {?} index
     * @param {?=} checkChangeEvent
     * @return {?}
     */
    function (event, listItem, index, checkChangeEvent) {
        var _this = this;
        if (checkChangeEvent === void 0) { checkChangeEvent = false; }
        /** @type {?} */
        var isClickCheckbox = typeof event === 'boolean';
        if (listItem['unClick'] || listItem['selectDisable']) {
            return;
        }
        else {
            this.checkChange.emit({ listdata: listItem, index: index });
            /** @type {?} */
            var selectItemIndex = this.selectDataList.findIndex((/**
             * @param {?} item
             * @param {?} i
             * @return {?}
             */
            function (item, i) {
                return _this.getKey(item, i) === _this.getKey(listItem, index);
            }));
            if (this.multipleSelect) {
                if (listItem['checked']) {
                    if (!this.keepSelect || isClickCheckbox) {
                        // 支持多选 删除该选中行
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.updateDataListForMorePager('remove', listItem);
                        listItem['checked'] = false;
                    }
                    else {
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.selectDataList.unshift(listItem);
                    }
                }
                else {
                    // 支持多选 插入该选中行
                    if (selectItemIndex === -1) {
                        this.selectDataList.unshift(listItem);
                        this.updateDataListForMorePager('append', listItem);
                    }
                    else {
                        this.selectDataList.splice(selectItemIndex, 1);
                        this.selectDataList.unshift(listItem);
                    }
                    listItem['checked'] = true;
                }
            }
            else {
                // 不支持多选 替换当前选中行
                this.selectDataList = [];
                this.selectDataList.push(listItem);
            }
            if (!checkChangeEvent) {
                this.clickItem = listItem;
            }
            this.listClick.emit({ data: this.selectDataList, index: index, checkChangeEvent: checkChangeEvent });
        }
        if (this.multipleSelect) {
            /** @type {?} */
            var ids = this.data.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return !!item.checked; })).map((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item[_this.listidName]; }));
            if (this.enableMorePageSelect) {
                ids = this.selectDataListWithOtherPager.map((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item[_this.listidName]; }));
            }
            this.onCheckValuesChange(ids);
        }
    };
    /** 获得每一行list 唯一标识 */
    /**
     * 获得每一行list 唯一标识
     * @param {?} list
     * @param {?} index
     * @return {?}
     */
    ListViewComponent.prototype.getKey = /**
     * 获得每一行list 唯一标识
     * @param {?} list
     * @param {?} index
     * @return {?}
     */
    function (list, index) {
        if (this.listidName && list.hasOwnProperty(this.listidName)) {
            return list[this.listidName];
        }
        else {
            return index;
        }
    };
    /** checkbox状态变化 */
    /**
     * checkbox状态变化
     * @param {?} event
     * @param {?} changeData
     * @param {?} i
     * @return {?}
     */
    ListViewComponent.prototype.getSelect = /**
     * checkbox状态变化
     * @param {?} event
     * @param {?} changeData
     * @param {?} i
     * @return {?}
     */
    function (event, changeData, i) {
        /** @type {?} */
        var state = event.checked;
        this.listSelect(state, changeData, i, true);
    };
    /**23年11月20日
     * 内部提供的排序方法，指定排序字段、升序还是降序
   * 使用场景：列表视图头部模版可以指定查询、排序功能，点击按钮的排序功能可以调用这个方法
   * */
    /**
     * 23年11月20日
     * 内部提供的排序方法，指定排序字段、升序还是降序
     * 使用场景：列表视图头部模版可以指定查询、排序功能，点击按钮的排序功能可以调用这个方法
     *
     * @param {?} sortkeyName
     * @param {?=} sortType
     * @return {?}
     */
    ListViewComponent.prototype.sort = /**
     * 23年11月20日
     * 内部提供的排序方法，指定排序字段、升序还是降序
     * 使用场景：列表视图头部模版可以指定查询、排序功能，点击按钮的排序功能可以调用这个方法
     *
     * @param {?} sortkeyName
     * @param {?=} sortType
     * @return {?}
     */
    function (sortkeyName, sortType) {
        if (sortType === void 0) { sortType = 'asc'; }
        this.currentData.sort(this.compare(sortkeyName, sortType));
        // 滚动到顶部
        this.gotoScrollTop();
        return { sortResult: { listdata: this.currentData, sortkeyName: sortkeyName, sortType: sortType } };
    };
    /**
     * @param {?} primaryValue
     * @return {?}
     */
    ListViewComponent.prototype.selectRow = /**
     * @param {?} primaryValue
     * @return {?}
     */
    function (primaryValue) {
        var _this = this;
        if (this.currentData && this.currentData.length > 0) {
            /** @type {?} */
            var row = this.currentData.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item[_this.listidName] === primaryValue; }));
            if (row) {
                this.clickItem = row;
                this.cdr.markForCheck();
            }
        }
    };
    /**
     * @private
     * @param {?} KeyName
     * @param {?} type
     * @return {?}
     */
    ListViewComponent.prototype.compare = /**
     * @private
     * @param {?} KeyName
     * @param {?} type
     * @return {?}
     */
    function (KeyName, type) {
        if (type === 'desc') {
            return (/**
             * @param {?} obj1
             * @param {?} obj2
             * @return {?}
             */
            function (obj1, obj2) {
                /** @type {?} */
                var val1 = obj1[KeyName];
                /** @type {?} */
                var val2 = obj2[KeyName];
                if (val2 < val1) {
                    return 1;
                }
                else if (val2 > val1) {
                    return -1;
                }
                else {
                    return 0;
                }
            });
        }
        if (type === 'asc') {
            return (/**
             * @param {?} obj1
             * @param {?} obj2
             * @return {?}
             */
            function (obj1, obj2) {
                /** @type {?} */
                var val1 = obj1[KeyName];
                /** @type {?} */
                var val2 = obj2[KeyName];
                if (val2 > val1) {
                    return 1;
                }
                else if (val2 < val1) {
                    return -1;
                }
                else {
                    return 0;
                }
            });
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    ListViewComponent.prototype.getItemActive = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        // 不管是否开启多选，当前行只有一行
        if (this.listidName && this.clickItem) {
            return item[this.listidName] === this.clickItem[this.listidName];
        }
        else {
            return false;
        }
    };
    /**
     * 页码改变
     * @param page
     */
    /**
     * 页码改变
     * @param {?} page
     * @return {?}
     */
    ListViewComponent.prototype.onPageChange = /**
     * 页码改变
     * @param {?} page
     * @return {?}
     */
    function (page) {
        if (this.pageIndex !== page.pageIndex) {
            this.pageIndex = page.pageIndex;
            this.paginationOptions.currentPage = page.pageIndex;
            // this.paginationOptions = {...this.paginationOptions};
            this.pageChanged.emit({ pageInfo: page });
            // 滚动到顶部
            this.gotoScrollTop();
        }
    };
    /**
     * 改变分页大小
     * @param pageSize
     */
    /**
     * 改变分页大小
     * @param {?} pageSize
     * @return {?}
     */
    ListViewComponent.prototype.onPageSizeChange = /**
     * 改变分页大小
     * @param {?} pageSize
     * @return {?}
     */
    function (pageSize) {
        // console.log(this.pageSize !== pageSize && this.total);
        if (this.pageSize !== pageSize && this.total) {
            this.paginationOptions.itemsPerPage = pageSize;
            this.pageSize = pageSize;
            /** @type {?} */
            var total = this.total;
            /** @type {?} */
            var pageLength = Math.floor(total / pageSize);
            if (total % pageSize > 0) {
                pageLength += 1;
            }
            if (pageLength && this.pageIndex > pageLength) {
                this.pageIndex = pageLength;
                this.paginationOptions.currentPage = this.pageIndex;
            }
            // this.paginationOptions = {...this.paginationOptions};            
            this.pageSizeChanged.emit({ pageInfo: { pageIndex: this.pageIndex, pageSize: pageSize } });
            // 滚动到顶部
            this.gotoScrollTop();
        }
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.getCurrentData = /**
     * @return {?}
     */
    function () {
        return this.currentData;
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.getSelectData = /**
     * @return {?}
     */
    function () {
        return this.selectDataList;
    };
    /**23年11月20日
     * 支持重新设置listview数据
     * 此方法值被kendo-binding使用，绑定数据
    */
    /**
     * 23年11月20日
     * 支持重新设置listview数据
     * 此方法值被kendo-binding使用，绑定数据
     * @param {?} listviewData
     * @return {?}
     */
    ListViewComponent.prototype.setData = /**
     * 23年11月20日
     * 支持重新设置listview数据
     * 此方法值被kendo-binding使用，绑定数据
     * @param {?} listviewData
     * @return {?}
     */
    function (listviewData) {
        this.data = listviewData;
        this.changeCurrentData(listviewData);
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.dataInit = /**
     * @return {?}
     */
    function () {
        if (this.data && this.data.length) {
            this.selectDataList = this.data.filter((/**
             * @param {?} list
             * @return {?}
             */
            function (list) {
                return list['checked'];
            }));
            if (this.activeIndex >= 0 && this.activeIndex <= (this.data.length - 1)) {
                /** @type {?} */
                var dataItem = this.data[this.activeIndex];
                if (dataItem) {
                    this.clickItem = dataItem;
                    this.selectDataList.push(this.clickItem);
                }
            }
            else if (this.activeIndex < 0) {
                return;
            }
            else {
                if (!this.selectDataList.length && !this.multipleSelect) {
                    this.selectDataList.push(this.data[0]);
                }
                this.clickItem = this.data[0];
            }
        }
        this.updateDataListForMorePager();
        if (this.cdr) {
            this.cdr.detectChanges();
        }
    };
    /**
     * @private
     * @param {?=} active
     * @param {?=} listItem
     * @param {?=} emit
     * @return {?}
     */
    ListViewComponent.prototype.updateDataListForMorePager = /**
     * @private
     * @param {?=} active
     * @param {?=} listItem
     * @param {?=} emit
     * @return {?}
     */
    function (active, listItem, emit) {
        var _this = this;
        if (active === void 0) { active = ''; }
        if (emit === void 0) { emit = true; }
        if (this.multipleSelect && this.enableMorePageSelect) {
            if (active === 'remove' && listItem) {
                if (!Array.isArray(listItem)) {
                    this.selectDataListWithOtherPager =
                        this.selectDataListWithOtherPager.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            if (typeof listItem === 'object') {
                                return n[_this.listidName] != listItem[_this.listidName];
                            }
                            else {
                                return n[_this.listidName] != listItem;
                            }
                        }));
                }
                else {
                    this.selectDataListWithOtherPager =
                        this.selectDataListWithOtherPager.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            return listItem.indexOf((/**
                             * @param {?} a
                             * @return {?}
                             */
                            function (a) { return a[_this.listidName] === n[_this.listidName]; })) === -1;
                        }));
                }
                if (emit) {
                    this.checkItemsChange.emit({ items: tslib_1.__spread(this.selectDataListWithOtherPager), instance: this });
                }
            }
            else if (active === 'append') {
                if (!Array.isArray(listItem)) {
                    this.selectDataListWithOtherPager = tslib_1.__spread(this.selectDataListWithOtherPager, [listItem]);
                }
                else {
                    this.selectDataListWithOtherPager = tslib_1.__spread(this.selectDataListWithOtherPager, listItem);
                }
                if (emit) {
                    this.checkItemsChange.emit({ items: tslib_1.__spread(this.selectDataListWithOtherPager), instance: this });
                }
            }
            else {
                if (!this.selectDataListWithOtherPager.length) {
                    this.selectDataListWithOtherPager = tslib_1.__spread(this.selectDataList);
                }
                else {
                    /** @type {?} */
                    var newCheckeds_1 = this.sameBy(this.currentData, this.selectDataListWithOtherPager, (/**
                     * @param {?} v
                     * @return {?}
                     */
                    function (v) { return v[_this.listidName]; }));
                    if (newCheckeds_1 && newCheckeds_1.length) {
                        this.data.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            item.checked = newCheckeds_1.includes(item[_this.listidName]);
                        }));
                    }
                }
            }
        }
    };
    /** 全选 */
    /**
     * 全选
     * @return {?}
     */
    ListViewComponent.prototype.listCheckAll = /**
     * 全选
     * @return {?}
     */
    function () {
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item.checked = true;
            }));
            this.selectDataList = this.currentData.filter((/**
             * @param {?} list
             * @return {?}
             */
            function (list) {
                return list['checked'];
            }));
            this.updateDataListForMorePager('append', this.currentData);
            this.updateCheckedValues(true);
            this.cdr.markForCheck();
        }
    };
    /** 取消全选 */
    /**
     * 取消全选
     * @return {?}
     */
    ListViewComponent.prototype.listCheckAllCancel = /**
     * 取消全选
     * @return {?}
     */
    function () {
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item.checked = false;
            }));
            this.selectDataList = [];
            this.updateDataListForMorePager('remove', this.currentData);
            this.updateCheckedValues(true);
            this.cdr.markForCheck();
        }
    };
    /**
     * 勾选行
     * @param ids ids
     */
    /**
     * 勾选行
     * @param {?} ids ids
     * @return {?}
     */
    ListViewComponent.prototype.checkRows = /**
     * 勾选行
     * @param {?} ids ids
     * @return {?}
     */
    function (ids) {
        var _this = this;
        if (this.multipleSelect) {
            if (!ids || ids.length < 1) {
                this.listCheckAllCancel();
                return;
            }
            this.data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (ids.includes(item[_this.listidName])) {
                    item.checked = true;
                }
                else {
                    item.checked = false;
                }
            }));
            // this.onCheckValuesChange(ids);
            this.cdr.markForCheck();
        }
    };
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    ListViewComponent.prototype.onCheckValuesChange = /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        this.checkValuesChange.emit(ids);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ListViewComponent.prototype.onMouseEnter = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        this.mouseInSelectedList = true;
        if (this.selectDataListWithOtherPager && this.selectDataListWithOtherPager.length) {
            this.openSelectedList = !this.openSelectedList;
        }
        else {
            this.openSelectedList = false;
        }
    };
    /**
     * @return {?}
     */
    ListViewComponent.prototype.closeSelectedList = /**
     * @return {?}
     */
    function () {
        this.openSelectedList = false;
        this.mouseInSelectedList = false;
        if (!this.cdr['destroyed']) {
            this.cdr.detectChanges();
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    ListViewComponent.prototype.onDelSelectedItem = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        this.currentData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item[_this.listidName] == id) {
                item.checked = false;
            }
        }));
        this.selectDataList = this.selectDataList.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n[_this.listidName] != id; }));
        this.updateDataListForMorePager('remove', id);
        this.updateCheckedValues();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ListViewComponent.prototype.onClearSelected = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        // this.clearSelectedItem.emit();
        this.closeSelectedList();
        this.listCheckAllCancel();
        this.selectDataListWithOtherPager = [];
        this.checkValues = [];
        this.onCheckValuesChange([]);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ListViewComponent.prototype.onSelectListPanelClose = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.closeSelectedList();
    };
    /**
     * @private
     * @param {?=} emit
     * @return {?}
     */
    ListViewComponent.prototype.updateCheckedValues = /**
     * @private
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        var _this = this;
        if (emit === void 0) { emit = true; }
        if (this.multipleSelect) {
            if (!this.enableMorePageSelect) {
                this.checkValues = this.selectDataList.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n[_this.listidName]; }));
            }
            else {
                this.checkValues = this.selectDataListWithOtherPager.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n[_this.listidName]; }));
            }
            if (emit) {
                this.onCheckValuesChange(this.checkValues);
                this.checkItemsChange.emit({ items: this.selectDataListWithOtherPager, instance: this });
            }
        }
    };
    /**
     * @param {?=} clearAll
     * @param {?=} emit
     * @return {?}
     */
    ListViewComponent.prototype.clearCheckeds = /**
     * @param {?=} clearAll
     * @param {?=} emit
     * @return {?}
     */
    function (clearAll, emit) {
        if (clearAll === void 0) { clearAll = true; }
        if (emit === void 0) { emit = true; }
        if (this.multipleSelect) {
            this.currentData.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item.checked = false;
            }));
            this.selectDataList = [];
            if (clearAll) {
                this.selectDataListWithOtherPager = [];
            }
            else {
                this.updateDataListForMorePager('remove', this.currentData);
            }
            if (emit) {
                this.updateCheckedValues(emit);
            }
            this.cdr.markForCheck();
        }
    };
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @param {?} emit
     * @return {?}
     */
    ListViewComponent.prototype._setItemsCheckedStatus = /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @param {?} emit
     * @return {?}
     */
    function (ids, checked, emit) {
        var _this = this;
        if (ids && ids.length) {
            /** @type {?} */
            var action = checked ? 'append' : 'remove';
            ids.forEach((/**
             * @param {?} i
             * @return {?}
             */
            function (i) {
                /** @type {?} */
                var id = i;
                if (typeof i === 'object') {
                    id = i[_this.listidName];
                }
                /** @type {?} */
                var item = _this.data.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n[_this.listidName] === id; }));
                if (item) {
                    item.checked = checked;
                }
                if (checked) {
                    _this.updateDataListForMorePager('append', i, false);
                }
                else {
                    _this.updateDataListForMorePager('remove', id, false);
                }
            }));
            this.updateCheckedValues(emit);
            this.cdr.markForCheck();
        }
    };
    /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    ListViewComponent.prototype.unCheckItems = /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    function (ids, emit) {
        if (emit === void 0) { emit = false; }
        this._setItemsCheckedStatus(ids, false, emit);
    };
    /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    ListViewComponent.prototype.checkedItems = /**
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    function (ids, emit) {
        if (emit === void 0) { emit = false; }
        this._setItemsCheckedStatus(ids, true, emit);
    };
    /**
     * 绑定
     */
    /**
     * 绑定
     * @return {?}
     */
    ListViewComponent.prototype.bindScrollEvent = /**
     * 绑定
     * @return {?}
     */
    function () {
        if (!this.scrollEl) {
            return;
        }
        if (this.keepScrollPosition) {
            if (!this.contentElBindScroll) {
                this.contentElBindScroll = this.scrollRecord.bind(this);
                this.scrollEl.nativeElement.addEventListener('scroll', this.contentElBindScroll);
            }
        }
        else {
            if (this.contentElBindScroll) {
                this.scrollEl.nativeElement.removeEventListener('scroll', this.contentElBindScroll);
                this.contentElBindScroll = null;
            }
        }
    };
    /**
     * 判断是否需要滚动到位置
     * @returns
     */
    /**
     * 判断是否需要滚动到位置
     * @private
     * @return {?}
     */
    ListViewComponent.prototype.scrollToRecordPosition = /**
     * 判断是否需要滚动到位置
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var scrollTarget = this.scrollEl.nativeElement;
        // 启用保持滚动位置或者元素滚动条位置>0或者记录滚动条位置在顶部或者记录与元素滚动条相等
        if (!this.keepScrollPosition || scrollTarget.scrollTop > 0 || this.scrollPos.scrollTop == 0 || Math.abs(this.scrollPos.scrollTop - scrollTarget.scrollTop) <= 2) {
            return;
        }
        // 没有变更
        /** @type {?} */
        var findScrollIndex = ['scrollHeight', 'clientHeight'].findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return _this.scrollPos[item] != scrollTarget[item];
        }));
        if (findScrollIndex == -1) {
            scrollTarget['scrollTop'] = this.scrollPos['scrollTop'];
        }
    };
    /**
     * 内部记录
     */
    /**
     * 内部记录
     * @private
     * @return {?}
     */
    ListViewComponent.prototype.scrollRecord = /**
     * 内部记录
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.keepScrollPosition) {
            return;
        }
        /** @type {?} */
        var scrollTarget = this.scrollEl.nativeElement;
        ['scrollHeight', 'clientHeight', 'scrollTop'].forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.scrollPos[item] = scrollTarget[item];
        }));
    };
    /**
     * 重置记录
     * @returns
     */
    /**
     * 重置记录
     * @private
     * @return {?}
     */
    ListViewComponent.prototype.resetRecord = /**
     * 重置记录
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.keepScrollPosition) {
            return;
        }
        /** @type {?} */
        var scrollTarget = this.scrollEl.nativeElement;
        ['scrollHeight', 'clientHeight', 'scrollTop'].forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item == 'scrollTop') {
                _this.scrollPos[item] = 0;
            }
            else {
                _this.scrollPos[item] = scrollTarget[item];
            }
        }));
    };
    /**
     * 滚动到顶部
     */
    /**
     * 滚动到顶部
     * @private
     * @return {?}
     */
    ListViewComponent.prototype.gotoScrollTop = /**
     * 滚动到顶部
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var scrollTarget = this.scrollEl.nativeElement;
        scrollTarget.scrollTop = 0;
        this.resetRecord();
    };
    /**
     * 通过
     */
    /**
     * 通过
     * @private
     * @return {?}
     */
    ListViewComponent.prototype.observerElement = /**
     * 通过
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.scrollEl || !this.inject) {
            return;
        }
        if (!this.ngZone) {
            this.ngZone = this.inject.get(NgZone, null);
        }
        if (this.keepScrollPosition) {
            if (!this.ro) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    function (entries, observer) {
                        /** @type {?} */
                        var tempHeight = entries[0].contentRect.height;
                        if (tempHeight > 0 && _this.keepScrollPosition) {
                            // 如果高度改变，就重置,不用置顶。获取高度有小偏移
                            if (Math.abs(tempHeight - _this.scrollPos['clientHeight']) <= 2) {
                                _this.scrollToRecordPosition();
                            }
                            else {
                                _this.resetRecord();
                            }
                        }
                    }));
                    _this.ro.observe(_this.scrollEl.nativeElement);
                }));
            }
        }
        else {
            // 去修监听尺寸变更
            if (this.ro) {
                this.ro.unobserve(this.scrollEl.nativeElement);
                this.ro = null;
            }
        }
    };
    /**
     * 比较数据判断是否需要滚动到顶部
     * @param oldData 旧数据
     * @param newData 新数据
     * @returns
     */
    /**
     * 比较数据判断是否需要滚动到顶部
     * @private
     * @param {?} oldData 旧数据
     * @param {?} newData 新数据
     * @return {?}
     */
    ListViewComponent.prototype.compareDataThenScrollTop = /**
     * 比较数据判断是否需要滚动到顶部
     * @private
     * @param {?} oldData 旧数据
     * @param {?} newData 新数据
     * @return {?}
     */
    function (oldData, newData) {
        // 没有数据，重置
        if (!oldData || !newData) {
            return true;
        }
        // 没有数据，重置
        if (oldData.length == 0 || newData.length == 0) {
            return true;
        }
        if (oldData.length != newData.length) {
            return true;
        }
        else {
            // 定位置
            /** @type {?} */
            var idField_1 = "";
            if (this.listidName && oldData[0].hasOwnProperty(this.listidName) && newData[0].hasOwnProperty(this.listidName)) {
                idField_1 = this.listidName;
            }
            if (!idField_1) {
                // 保持滚动条
                return false;
            }
            // 找到不同的数据
            /** @type {?} */
            var findDifferData = oldData.find((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                if (item[idField_1] == newData[index][idField_1]) {
                    return false;
                }
                return true;
            }));
            // 有不同数据，重置
            if (findDifferData) {
                return true;
            }
            else {
                // 数据相同，保持滚动条
                return false;
            }
        }
    };
    /**
     *
     * @param newData
     */
    /**
     *
     * @private
     * @param {?} newData
     * @return {?}
     */
    ListViewComponent.prototype.changeCurrentData = /**
     *
     * @private
     * @param {?} newData
     * @return {?}
     */
    function (newData) {
        /** @type {?} */
        var needScrollTop = this.compareDataThenScrollTop(this.currentData, newData);
        this.currentData = newData;
        if (needScrollTop) {
            this.gotoScrollTop();
        }
        else {
            this.scrollToRecordPosition();
        }
        this.dataInit();
    };
    ListViewComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-list-view',
                    template: "<div class=\"f-list-view\" [ngClass]=\"{'f-list-view-multiple': multipleSelect}\">\r\n    <div class=\"f-list-view-header\" *ngIf=\"headerTemplate && !headerComponentType\" >\r\n        <ng-container [ngTemplateOutlet]=\"headerTemplate\"></ng-container>\r\n    </div>\r\n    <div class=\"f-list-view-header\" *ngIf=\"headerComponentType\" component-template [cmpRef]=\"headerComponentType\"></div>\r\n    <div class=\"f-list-view-content\" #scrollEl>\r\n        <!-- bugNum:449874:\u589E\u52A0ngClass\u7684\u5224\u65AD\u6761\u4EF6 -->\r\n        <ul class=\"f-list-view-group\" [ngClass]=\"{'d-flex flex-wrap': cardLayout && currentData && currentData.length}\">\r\n            <ng-container *ngIf=\"currentData&&currentData.length; else emptyData\">\r\n                <li class=\"f-list-view-group-item {{listClassName}}\"\r\n                    *ngFor=\"let list of (supportPaging ? (currentData | paginate: paginationOptions) : currentData); let i = index;let first = first; let last = last\"\r\n                    [id]=\"getKey(list,i)\" (click)=\"listSelect($event,list,i)\"\r\n                    [ngClass]=\"{'f-un-click': list['unClick'],'f-un-select':list['selectDisable'],'f-listview-active':getItemActive(list)}\">\r\n                    <div class=\"f-list-select\" *ngIf=\"multipleSelect\" (click)=\"$event.stopPropagation()\">\r\n                        <list-view-checkout [id]=\"'list-'+getKey(list,i)\"\r\n                            [disabled]=\"list['selectDisable']||list['unClick']\" [checked]=\"list['checked']\"\r\n                            (checkedChange)=\"getSelect($event,list,i)\"></list-view-checkout>\r\n                    </div>\r\n                    <div class=\"f-list-content\" *ngIf=\"!listComponentType\">\r\n                        <ng-container [ngTemplateOutlet]=\"listTemplate\"\r\n                            [ngTemplateOutletContext]=\"{ item: list , index:i, selectedItem: clickItem, first:first,last:last }\">\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"f-list-content\" *ngIf=\"listComponentType\" component-template [cmpRef]=\"listComponentType\" [ctx]=\"{ item: list , index:i, selectedItem: clickItem, first:first,last:last }\"></div>\r\n                </li>\r\n            </ng-container>\r\n\r\n            <ng-template #emptyData>\r\n                <!-- \u7A7A\u6570\u636E\u9ED8\u8BA4\u6A21\u677F -->\r\n                <ng-container *ngIf=\"!emptyComponentType\">\r\n                    <div class=\"f-list-view-emptydata\" *ngIf=\"showEmpty&&!emptyTemplate;else customEmpty\">\r\n                        <p class=\"f-empty-title\">{{ 'listview.emptyMessage' | locale }}</p>\r\n                    </div>\r\n                    <!-- \u81EA\u5B9A\u4E49\u7A7A\u6570\u636E\u6A21\u677F -->\r\n                    <ng-template #customEmpty>\r\n                        <ng-container [ngTemplateOutlet]=\"emptyDataTemplate\"></ng-container>\r\n                    </ng-template>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"emptyComponentType\">\r\n                    <div class=\"f-list-view-emptydata\" component-template [cmpRef]=\"emptyComponentType\"></div>\r\n                </ng-container>\r\n\r\n            </ng-template>\r\n        </ul>\r\n    </div>\r\n    <div class=\"f-list-view-footer\" *ngIf=\"footerTemplate || supportPaging\">\r\n        <ng-container [ngTemplateOutlet]=\"footerTemplate\" *ngIf=\"!footerComponentType\">\r\n            <div class=\"f-paging-wrapper\" *ngIf=\"supportPaging\">\r\n                <pagination-controls #pager [id]=\"paginationOptions.id\" [maxSize]=\"maxSize\"\r\n                    [directionLinks]=\"directionLinks\" [autoHide]=\"autoHide\" [responsive]=\"responsive\"\r\n                    [previousLabel]=\"labels.previousLabel\"\r\n                    [nextLabel]=\"labels.nextLabel\"\r\n                    [screenReaderPaginationLabel]=\"labels.screenReaderPaginationLabel\"\r\n                    [screenReaderPageLabel]=\"labels.screenReaderPageLabel\"\r\n                    [showPageList]=\"showPageList\"\r\n                    [showPageInfo]=\"showPageInfo\"\r\n                    [showPageNumber]=\"showPageNumber\"\r\n                    [showGotoInput]=\"showGotoInput\"\r\n                    [screenReaderCurrentLabel]=\"labels.screenReaderCurrentLabel\"\r\n                    (pageChange)=\"onPageChange($event)\"\r\n                    (pageSizeChange)=\"onPageSizeChange($event)\" \r\n                    [showSelectedList]=\"showSelectedList && enableMorePageSelect\">\r\n\r\n                    <div class=\"flex-fill\" >\r\n                        <div>\r\n                            <span class=\"badge badge-pill badge-light\" *ngIf=\"showSelectedList\"\r\n                                style=\"cursor:pointer;\" [attr.title]=\"'datagrid.selectionData.tooltip' | locale\"\r\n                                [class.badge-primary]=\"mouseInSelectedList\"\r\n                                [innerHTML]=\"'datagrid.selectionData.currentLenth' | locale | replaceX: selectDataListWithOtherPager.length\"\r\n                                (click)=\"onMouseEnter($event)\">\r\n                            </span>\r\n                            <pagination-selected-list *ngIf=\"openSelectedList\"\r\n                                [data]=\"selectDataListWithOtherPager | formatItems: selectedItemFormat\"\r\n                                (close)=\"onSelectListPanelClose($event)\"\r\n                                (remove)=\"onDelSelectedItem($event)\"\r\n                                (clear)=\"onClearSelected($event)\"\r\n                            ></pagination-selected-list>\r\n                        </div>\r\n                    </div>\r\n\r\n                </pagination-controls>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"footerComponentType\" component-template [cmpRef]=\"footerComponentType\"></ng-container>\r\n    </div>\r\n</div>",
                    styles: [":host{height:100%}:host.f-listview-fill{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;overflow:hidden}:host.f-listview-fill .f-list-view{height:100%}:host.f-listview-fill .f-list-view .f-list-view-header{flex-shrink:0}:host.f-listview-fill .f-list-view .f-list-view-footer{flex-shrink:0}:host.f-listview-fill .f-list-view .f-list-view-content{overflow-y:auto;-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0}:host .f-list-view{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}:host .f-list-view .f-paging-wrapper{padding:14px 0}:host .f-list-view-group-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}:host .f-list-view-group-item.f-none-border{border-bottom:0}:host .f-list-view-group-item .f-list-content{-webkit-box-flex:1;flex:1 1 auto;width:100%}:host .f-list-select{padding:0 14px}:host .f-list-view-emptydata .f-empty-title{font-size:14px;line-height:22px;color:#999;padding:20px 0;text-align:center}"]
                }] }
    ];
    /** @nocollapse */
    ListViewComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    ListViewComponent.propDecorators = {
        headerTemplate: [{ type: ContentChild, args: [ListViewHeaderTemplateDirective, { read: TemplateRef },] }],
        listTemplate: [{ type: ContentChild, args: [ListViewTemplateDirective, { read: TemplateRef },] }],
        footerTemplate: [{ type: ContentChild, args: [ListViewFooterTemplateDirective, { read: TemplateRef },] }],
        emptyDataTemplate: [{ type: ContentChild, args: [ListViewEmptyTemplateDirective, { read: TemplateRef },] }],
        headerComponentType: [{ type: Input }],
        listComponentType: [{ type: Input }],
        emptyComponentType: [{ type: Input }],
        footerComponentType: [{ type: Input }],
        scrollEl: [{ type: ViewChild, args: ['scrollEl',] }],
        listGroup: [{ type: ViewChild, args: ['listGroup',] }],
        pager: [{ type: ViewChild, args: ['pager',] }],
        data: [{ type: Input }],
        id: [{ type: Input }],
        showEmpty: [{ type: Input }],
        emptyTemplate: [{ type: Input }],
        multipleSelect: [{ type: Input }],
        supportPaging: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        pageSize: [{ type: Input }],
        pageIndex: [{ type: Input }],
        enableMorePageSelect: [{ type: Input }],
        showSelectedList: [{ type: Input }],
        selectedItemFormat: [{ type: Input }],
        keepSelect: [{ type: Input }],
        fill: [{ type: Input }],
        cardLayout: [{ type: Input }],
        activeIndex: [{ type: Input }],
        listClassName: [{ type: Input }],
        checkValues: [{ type: Input }],
        checkValuesChange: [{ type: Output }],
        checkItems: [{ type: Input }],
        checkItemsChange: [{ type: Input }],
        showPageList: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        showGotoInput: [{ type: Input }],
        keepScrollPosition: [{ type: Input }],
        pageList: [{ type: Input }],
        total: [{ type: Input }],
        listidName: [{ type: Input }],
        listviewFill: [{ type: HostBinding, args: ['class.f-listview-fill',] }],
        listClick: [{ type: Output }],
        checkChange: [{ type: Output }],
        pageChanged: [{ type: Output }],
        pageSizeChanged: [{ type: Output }]
    };
    return ListViewComponent;
}());
export { ListViewComponent };
if (false) {
    /** @type {?} */
    ListViewComponent.prototype.headerTemplate;
    /** @type {?} */
    ListViewComponent.prototype.listTemplate;
    /** @type {?} */
    ListViewComponent.prototype.footerTemplate;
    /** @type {?} */
    ListViewComponent.prototype.emptyDataTemplate;
    /** @type {?} */
    ListViewComponent.prototype.headerComponentType;
    /** @type {?} */
    ListViewComponent.prototype.listComponentType;
    /** @type {?} */
    ListViewComponent.prototype.emptyComponentType;
    /** @type {?} */
    ListViewComponent.prototype.footerComponentType;
    /** @type {?} */
    ListViewComponent.prototype.scrollEl;
    /** @type {?} */
    ListViewComponent.prototype.listGroup;
    /** @type {?} */
    ListViewComponent.prototype.pager;
    /**
     * 列表数据
     * @type {?}
     */
    ListViewComponent.prototype.data;
    /** @type {?} */
    ListViewComponent.prototype.id;
    /**
     * 数据为空是否展示默认
     * @type {?}
     */
    ListViewComponent.prototype.showEmpty;
    /**
     * 是否自定义空数据模板
     * @type {?}
     */
    ListViewComponent.prototype.emptyTemplate;
    /**
     * 是否支持多选 默认为false
     * @type {?}
     */
    ListViewComponent.prototype.multipleSelect;
    /**
     * 是否支持分页 默认false
     * @type {?}
     */
    ListViewComponent.prototype.supportPaging;
    /** @type {?} */
    ListViewComponent.prototype.pagerOnServer;
    /** @type {?} */
    ListViewComponent.prototype.pageSize;
    /** @type {?} */
    ListViewComponent.prototype.pageIndex;
    /**
     * 启用跨页多选
     * @type {?}
     */
    ListViewComponent.prototype.enableMorePageSelect;
    /** @type {?} */
    ListViewComponent.prototype.showSelectedList;
    /** @type {?} */
    ListViewComponent.prototype.selectedItemFormat;
    /**
     * 保持选中状态，默认为 true； 启用多选后有效。
     * 当设为false时，选中项再次点击将取消选中状态
     * @type {?}
     */
    ListViewComponent.prototype.keepSelect;
    /** @type {?} */
    ListViewComponent.prototype.fill;
    /** @type {?} */
    ListViewComponent.prototype.cardLayout;
    /** @type {?} */
    ListViewComponent.prototype._activeIndex;
    /** @type {?} */
    ListViewComponent.prototype.listClassName;
    /**
     * 勾选值
     * @type {?}
     */
    ListViewComponent.prototype.checkValues;
    /** @type {?} */
    ListViewComponent.prototype.checkValuesChange;
    /** @type {?} */
    ListViewComponent.prototype.checkItems;
    /** @type {?} */
    ListViewComponent.prototype.checkItemsChange;
    /** @type {?} */
    ListViewComponent.prototype.showPageList;
    /** @type {?} */
    ListViewComponent.prototype.showPageInfo;
    /** @type {?} */
    ListViewComponent.prototype.showPageNumber;
    /** @type {?} */
    ListViewComponent.prototype.showGotoInput;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._keepScrollPosition;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.contentElBindScroll;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.scrollPos;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._pageList;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype._total;
    /**
     * 作为唯一标识的数据key值 如果没传 唯一标识为index值
     * @type {?}
     */
    ListViewComponent.prototype.listidName;
    /**
     * 点击某一行后
     * @type {?}
     */
    ListViewComponent.prototype.listClick;
    /**
     * 多选框 选中状态变化
     * @type {?}
     */
    ListViewComponent.prototype.checkChange;
    /** @type {?} */
    ListViewComponent.prototype.pageChanged;
    /** @type {?} */
    ListViewComponent.prototype.pageSizeChanged;
    /**
     * 当前展示列表数据
     * @type {?}
     */
    ListViewComponent.prototype.currentData;
    /**
     * 选中的列表数组
     * @type {?}
     */
    ListViewComponent.prototype.selectDataList;
    /**
     * 跨页多选记录
     * @type {?}
     */
    ListViewComponent.prototype.selectDataListWithOtherPager;
    /** @type {?} */
    ListViewComponent.prototype.clickItem;
    /** @type {?} */
    ListViewComponent.prototype.maxSize;
    /** @type {?} */
    ListViewComponent.prototype.directionLinks;
    /** @type {?} */
    ListViewComponent.prototype.autoHide;
    /** @type {?} */
    ListViewComponent.prototype.responsive;
    /** @type {?} */
    ListViewComponent.prototype.paginationOptions;
    /** @type {?} */
    ListViewComponent.prototype.labels;
    /** @type {?} */
    ListViewComponent.prototype.mouseInSelectedList;
    /** @type {?} */
    ListViewComponent.prototype.openSelectedList;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.differenceBy;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.sameBy;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    ListViewComponent.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbGlzdC12aWV3LyIsInNvdXJjZXMiOlsibGliL2xpc3Qtdmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUE0QixVQUFVLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUM5RyxXQUFXLEVBQTRCLGlCQUFpQixFQUFXLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUMvRyxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQ0gsK0JBQStCLEVBQy9CLHlCQUF5QixFQUN6QiwrQkFBK0IsRUFDL0IsOEJBQThCLEdBQ2pDLE1BQU0sc0JBQXNCLENBQUM7QUFDOUIsT0FBTyxjQUFjLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFzQiwyQkFBMkIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBTXhGO0lBOEtJLDJCQUFvQixFQUFjLEVBQVUsUUFBbUIsRUFBVSxHQUFzQixFQUFzQixNQUFnQjtRQUFqSCxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUFVLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQXNCLFdBQU0sR0FBTixNQUFNLENBQVU7Ozs7O1FBcko1SCxTQUFJLEdBQUcsRUFBRSxDQUFDOzs7O1FBS1YsY0FBUyxHQUFHLElBQUksQ0FBQzs7OztRQUVqQixrQkFBYSxHQUFHLEtBQUssQ0FBQzs7OztRQUV0QixtQkFBYyxHQUFHLEtBQUssQ0FBQzs7OztRQUd2QixrQkFBYSxHQUFHLEtBQUssQ0FBQzs7UUFHdEIsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFDckIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLGNBQVMsR0FBRyxDQUFDLENBQUM7Ozs7UUFFZCx5QkFBb0Is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dUNBQXlCOztJQUN6Qiw4Q0FBbUM7O0lBRW5DLG1DQU1FOztJQUVGLGdEQUE0Qjs7SUFDNUIsNkNBQXlCOzs7OztJQUN6QixpQ0FBcUI7Ozs7O0lBeWFyQix5Q0FHQzs7Ozs7SUFFRCxtQ0FHQzs7Ozs7SUEvYVcsK0JBQXNCOzs7OztJQUFFLHFDQUEyQjs7Ozs7SUFBRSxnQ0FBOEI7Ozs7O0lBQUUsbUNBQW9DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0LCBFbGVtZW50UmVmLCBUZW1wbGF0ZVJlZiwgQ29udGVudENoaWxkLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIFJlbmRlcmVyMiwgVmlld0NoaWxkLFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCwgSG9zdEJpbmRpbmcsIFNpbXBsZUNoYW5nZXMsIE9uQ2hhbmdlcywgQ2hhbmdlRGV0ZWN0b3JSZWYsIERvQ2hlY2ssIE5nWm9uZSwgSW5qZWN0b3IsIE9wdGlvbmFsLCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3lcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIExpc3RWaWV3SGVhZGVyVGVtcGxhdGVEaXJlY3RpdmUsXHJcbiAgICBMaXN0Vmlld1RlbXBsYXRlRGlyZWN0aXZlLFxyXG4gICAgTGlzdFZpZXdGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSxcclxuICAgIExpc3RWaWV3RW1wdHlUZW1wbGF0ZURpcmVjdGl2ZSxcclxufSBmcm9tICcuL3RlbXBsYXRlLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tIFwicmVzaXplLW9ic2VydmVyLXBvbHlmaWxsXCI7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25JbnN0YW5jZSwgUGFnaW5hdGlvbkNvbnRyb2xzQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1wYWdpbmF0aW9uJztcclxuXHJcbmltcG9ydCB7IENvbXBvbmVudFRlbXBsYXRlUmVmLCBDb21wb25lbnRUZW1wbGF0ZUZuIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nXHJcblxyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtbGlzdC12aWV3JyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9saXN0LXZpZXcuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vbGlzdC12aWV3LmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIExpc3RWaWV3Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZChMaXN0Vmlld0hlYWRlclRlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIGhlYWRlclRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgQENvbnRlbnRDaGlsZChMaXN0Vmlld1RlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIGxpc3RUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBDb250ZW50Q2hpbGQoTGlzdFZpZXdGb290ZXJUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KSBmb290ZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIEBDb250ZW50Q2hpbGQoTGlzdFZpZXdFbXB0eVRlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIGVtcHR5RGF0YVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBoZWFkZXJDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuICAgIEBJbnB1dCgpIGxpc3RDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZUZuO1xyXG4gICAgQElucHV0KCkgZW1wdHlDb21wb25lbnRUeXBlOiBDb21wb25lbnRUZW1wbGF0ZVJlZjtcclxuICAgIEBJbnB1dCgpIGZvb3RlckNvbXBvbmVudFR5cGU6IENvbXBvbmVudFRlbXBsYXRlUmVmO1xyXG5cclxuXHJcbiAgICBAVmlld0NoaWxkKCdzY3JvbGxFbCcpIHNjcm9sbEVsOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnbGlzdEdyb3VwJykgbGlzdEdyb3VwOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgncGFnZXInKSBwYWdlcjogUGFnaW5hdGlvbkNvbnRyb2xzQ29tcG9uZW50O1xyXG5cclxuICAgIC8vIEBJbnB1dCgpIGhlaWdodDpudW1iZXI7XHJcbiAgICAvKiog5YiX6KGo5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBkYXRhID0gW107XHJcblxyXG4gICAgQElucHV0KCkgaWQ6IHN0cmluZztcclxuXHJcbiAgICAvKiog5pWw5o2u5Li656m65piv5ZCm5bGV56S66buY6K6kICovXHJcbiAgICBASW5wdXQoKSBzaG93RW1wdHkgPSB0cnVlO1xyXG4gICAgLyoqIOaYr+WQpuiHquWumuS5ieepuuaVsOaNruaooeadvyAqL1xyXG4gICAgQElucHV0KCkgZW1wdHlUZW1wbGF0ZSA9IGZhbHNlO1xyXG4gICAgLyoqIOaYr+WQpuaUr+aMgeWkmumAiSDpu5jorqTkuLpmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlwbGVTZWxlY3QgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5piv5ZCm5pSv5oyB5YiG6aG1IOm7mOiupGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBzdXBwb3J0UGFnaW5nID0gZmFsc2U7XHJcblxyXG4gICAgLy8g6buY6K6k5YiG6aG1XHJcbiAgICBASW5wdXQoKSBwYWdlck9uU2VydmVyID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMTA7XHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgLyoqIOWQr+eUqOi3qOmhteWkmumAiSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlTW9yZVBhZ2VTZWxlY3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNob3dTZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNlbGVjdGVkSXRlbUZvcm1hdDogKGl0ZW06IGFueSkgPT4gc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOS/neaMgemAieS4reeKtuaAge+8jOm7mOiupOS4uiB0cnVl77ybIOWQr+eUqOWkmumAieWQjuacieaViOOAglxyXG4gICAgICog5b2T6K6+5Li6ZmFsc2Xml7bvvIzpgInkuK3pobnlho3mrKHngrnlh7vlsIblj5bmtojpgInkuK3nirbmgIFcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkga2VlcFNlbGVjdCA9IHRydWU7XHJcblxyXG5cclxuICAgIC8vIOaYr+WQpuW5s+mTulxyXG4gICAgQElucHV0KCkgZmlsbCA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5qiq5ZCR5o6S5YiXXHJcbiAgICBASW5wdXQoKSBjYXJkTGF5b3V0ID0gZmFsc2U7XHJcblxyXG4gICAgX2FjdGl2ZUluZGV4OiBudW1iZXI7XHJcbiAgICBnZXQgYWN0aXZlSW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGFjdGl2ZUluZGV4KHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZUluZGV4ID0gdmFsO1xyXG4gICAgICAgIHRoaXMuZGF0YUluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSBsaXN0Q2xhc3NOYW1lOiBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIOWLvumAieWAvFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBjaGVja1ZhbHVlczogYW55W10gPSBbXTtcclxuICAgIEBPdXRwdXQoKSBjaGVja1ZhbHVlc0NoYW5nZTogRXZlbnRFbWl0dGVyPGFueVtdPiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XHJcblxyXG4gICAgQElucHV0KCkgY2hlY2tJdGVtcyA9IFtdO1xyXG4gICAgQElucHV0KCkgY2hlY2tJdGVtc0NoYW5nZTogRXZlbnRFbWl0dGVyPHsgaXRlbXM6IGFueVtdLCBpbnN0YW5jZTogYW55IH0+ID0gbmV3IEV2ZW50RW1pdHRlcjx7IGl0ZW1zOiBbXSwgaW5zdGFuY2U6IGFueSB9PigpO1xyXG5cclxuICAgIC8vIEBJbnB1dCgpIGJvcmRlckJvdHRvbTpib29sZWFuID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTGlzdCA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUluZm8gPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VOdW1iZXIgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2hvd0dvdG9JbnB1dCA9IGZhbHNlO1xyXG4gICAgLy8g5L+d55WZ5rua5Yqo5p2h5L2N572uXHJcbiAgICBwcml2YXRlIF9rZWVwU2Nyb2xsUG9zaXRpb24gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQga2VlcFNjcm9sbFBvc2l0aW9uKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBTY3JvbGxQb3NpdGlvbiA9IHZhbDtcclxuICAgICAgICAgICAgdGhpcy5iaW5kU2Nyb2xsRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlckVsZW1lbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQga2VlcFNjcm9sbFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9rZWVwU2Nyb2xsUG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNvbnRlbnRFbEJpbmRTY3JvbGwgPSBudWxsO1xyXG4gICAgLy8g6K6w5b2V5L2N572uXHJcbiAgICBwcml2YXRlIHNjcm9sbFBvcyA9IHsgc2Nyb2xsSGVpZ2h0OiAwLCBjbGllbnRIZWlnaHQ6IDAsIHNjcm9sbFRvcDogMCB9O1xyXG4gICAgLy8g5aSE55CGbmd6b25lXHJcbiAgICBwcml2YXRlIG5nWm9uZSA9IG51bGw7XHJcbiAgICAvLyDorrDlvZXlhYPntKDlsLrlr7jlj5jmm7RcclxuICAgIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBfcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcblxyXG4gICAgZ2V0IHBhZ2VMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYWdlTGlzdDtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBwYWdlTGlzdCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9wYWdlTGlzdCA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5wYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VyLnNldFBhZ2VMaXN0KHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3RvdGFsID0gMDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdG90YWwodmFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RvdGFsICE9PSB2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fdG90YWwgPSB2YWwgfHwgMDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucyB8fCB7fSwgeyB0b3RhbEl0ZW1zOiB2YWwgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCB0b3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOS9nOS4uuWUr+S4gOagh+ivhueahOaVsOaNrmtleeWAvCDlpoLmnpzmsqHkvKAg5ZSv5LiA5qCH6K+G5Li6aW5kZXjlgLwgKi9cclxuICAgIEBJbnB1dCgpIGxpc3RpZE5hbWUgPSAnaWQnO1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1saXN0dmlldy1maWxsJykgZ2V0IGxpc3R2aWV3RmlsbCgpIHsgcmV0dXJuIHRoaXMuZmlsbDsgfVxyXG5cclxuXHJcbiAgICAvKiog54K55Ye75p+Q5LiA6KGM5ZCOICovXHJcbiAgICBAT3V0cHV0KCkgbGlzdENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWkmumAieahhiDpgInkuK3nirbmgIHlj5jljJYgKi9cclxuICAgIEBPdXRwdXQoKSBjaGVja0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvLyDliIbpobXkuovku7ZcclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBwYWdlU2l6ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOW9k+WJjeWxleekuuWIl+ihqOaVsOaNriAqL1xyXG4gICAgY3VycmVudERhdGEgPSBbXTtcclxuXHJcbiAgICAvKiog6YCJ5Lit55qE5YiX6KGo5pWw57uEICovXHJcbiAgICBzZWxlY3REYXRhTGlzdCA9IFtdO1xyXG4gICAgLyoqIOi3qOmhteWkmumAieiusOW9lSAqL1xyXG4gICAgc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciA9IFtdO1xyXG5cclxuICAgIC8vIOW9k+WJjeeCueWHu1xyXG4gICAgcHVibGljIGNsaWNrSXRlbTogYW55O1xyXG5cclxuICAgIHB1YmxpYyBtYXhTaXplID0gNztcclxuICAgIHB1YmxpYyBkaXJlY3Rpb25MaW5rcyA9IHRydWU7XHJcbiAgICBwdWJsaWMgYXV0b0hpZGUgPSBmYWxzZTtcclxuICAgIHB1YmxpYyByZXNwb25zaXZlID0gdHJ1ZTtcclxuICAgIHB1YmxpYyBwYWdpbmF0aW9uT3B0aW9uczogYW55ID0ge307XHJcblxyXG4gICAgcHVibGljIGxhYmVsczogYW55ID0ge1xyXG4gICAgICAgIHByZXZpb3VzTGFiZWw6ICcgJyxcclxuICAgICAgICBuZXh0TGFiZWw6ICcgJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJQYWdpbmF0aW9uTGFiZWw6ICdQYWdpbmF0aW9uJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJQYWdlTGFiZWw6ICdwYWdlJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJDdXJyZW50TGFiZWw6IGBZb3UncmUgb24gcGFnZWBcclxuICAgIH07XHJcblxyXG4gICAgbW91c2VJblNlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG4gICAgb3BlblNlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsIEBPcHRpb25hbCgpIHByaXZhdGUgaW5qZWN0OiBJbmplY3Rvcikge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0ge1xyXG4gICAgICAgICAgICBpZDogJ0ZhcnJpcy1saXN0Vmlldy1QYWdpbmF0aW9uXycgKyAodGhpcy5pZCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKSksXHJcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYmluZFNjcm9sbEV2ZW50KCk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICB0aGlzLmRhdGFJbml0KCk7XHJcbiAgICAgICAgLy8gdGhpcy50Um91dGVyLmV2ZW50cy5waXBlKFxyXG4gICAgICAgIC8vICAgICBmaWx0ZXIoKGV2ZW50KSA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpXHJcbiAgICAgICAgLy8gKS5zdWJzY3JpYmUoKGV2ZW50OiBOYXZpZ2F0aW9uRW5kKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygn6K6w5b2V6Lev55SxJyk7XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnJlbnREYXRhKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzWyd0b3RhbCddICYmICFjaGFuZ2VzLnRvdGFsLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zWyd0b3RhbEl0ZW1zJ10gPSB0aGlzLnRvdGFsO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0geyAuLi50aGlzLnBhZ2luYXRpb25PcHRpb25zIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzWydwYWdlSW5kZXgnXSAmJiAhY2hhbmdlcy5wYWdlSW5kZXguaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnNbJ2N1cnJlbnRQYWdlJ10gPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHsgLi4udGhpcy5wYWdpbmF0aW9uT3B0aW9ucyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ3BhZ2VTaXplJ10gJiYgIWNoYW5nZXMucGFnZVNpemUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnNbJ2l0ZW1zUGVyUGFnZSddID0gdGhpcy5wYWdlU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHsgLi4udGhpcy5wYWdpbmF0aW9uT3B0aW9ucyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5a+55q+U5pu05paw77yM5Yik5pat5pyJ5pu05paw55qE5pe25YCZ5LiU5piv6Leo6aG15aSa6YCJ55qE5pe277yM5pu05paw5bey6YCJ6KGM5L+h5oGvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tWYWx1ZXMgJiYgIWNoYW5nZXMuY2hlY2tWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IHRoaXMuZGlmZmVyZW5jZUJ5KGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlIHx8IFtdLCBjaGFuZ2VzLmNoZWNrVmFsdWVzLnByZXZpb3VzVmFsdWUgfHwgW10sIHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlTW9yZVBhZ2VTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUm93cyh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tJdGVtcyAmJiAhY2hhbmdlcy5jaGVja0l0ZW1zLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPSBbLi4udGhpcy5jaGVja0l0ZW1zXTtcclxuICAgICAgICAgICAgY29uc3QgaWRzID0gdGhpcy5jaGVja0l0ZW1zLm1hcChuID0+IG5bdGhpcy5saXN0aWROYW1lXSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZEl0ZW1zKGlkcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICAvLyDlj5bmtojnm5HlkKzlsLrlr7jlj5jmm7RcclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Y+W5raI57uR5a6aXHJcbiAgICAgICAgaWYgKHRoaXMuY29udGVudEVsQmluZFNjcm9sbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKjIz5bm0MTHmnIgyMOaXpVxyXG4gICAgICog5YaF6YOo5o+Q5L6b55qE5pCc57Si5pa55rOV77yM5oyH5a6a6L+H5ruk5a2X56ym5Liy77yM6L+H5ruk5pWw5o2u55qE5omA5pyJ5bGe5oCnXHJcbiAgICAgKiDkvb/nlKjlnLrmma/vvJrliJfooajop4blm77lpLTpg6jmqKHniYjlj6/ku6XmlL7nva7mn6Xor6LjgIHmjpLluo/lip/og73vvIzngrnlh7vmjInpkq7nmoTmn6Xor6Llip/og73lj6/ku6XosIPnlKjov5nkuKrmlrnms5VcclxuICAgICAqICovXHJcbiAgICBzZWFyY2hMaXN0KHNlYXJjaEZpZWxkKSB7XHJcbiAgICAgICAgaWYgKHNlYXJjaEZpZWxkICE9PSAnJyAmJiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gdGhpcy5kYXRhLmZpbHRlcigobGlzdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RWYWx1ZSA9IE9iamVjdC52YWx1ZXMobGlzdCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RWYWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdFZhbHVlW2ldID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0VmFsdWVbaV0udG9TdHJpbmcoKS5pbmNsdWRlcyhzZWFyY2hGaWVsZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RWYWx1ZVtpXS50b1N0cmluZygpLmluY2x1ZGVzKHNlYXJjaEZpZWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOmHjee9ruiusOW9leW5tua7muWKqOWIsOmhtumDqFxyXG4gICAgICAgICAgICB0aGlzLmdvdG9TY3JvbGxUb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBsaXN0ZGF0YTogdGhpcy5jdXJyZW50RGF0YSwgc2VhcmNoVmFsdWU6IHNlYXJjaEZpZWxkLCBsZW5ndGg6IHRoaXMuY3VycmVudERhdGEubGVuZ3RoIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog54K55Ye75p+Q5LiA5YiX5LqL5Lu2ICovXHJcbiAgICBsaXN0U2VsZWN0KGV2ZW50LCBsaXN0SXRlbSwgaW5kZXgsIGNoZWNrQ2hhbmdlRXZlbnQgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGlzQ2xpY2tDaGVja2JveCA9IHR5cGVvZiBldmVudCA9PT0gJ2Jvb2xlYW4nO1xyXG5cclxuICAgICAgICBpZiAobGlzdEl0ZW1bJ3VuQ2xpY2snXSB8fCBsaXN0SXRlbVsnc2VsZWN0RGlzYWJsZSddKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrQ2hhbmdlLmVtaXQoeyBsaXN0ZGF0YTogbGlzdEl0ZW0sIGluZGV4IH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtSW5kZXggPSB0aGlzLnNlbGVjdERhdGFMaXN0LmZpbmRJbmRleCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0S2V5KGl0ZW0sIGkpID09PSB0aGlzLmdldEtleShsaXN0SXRlbSwgaW5kZXgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0SXRlbVsnY2hlY2tlZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmtlZXBTZWxlY3QgfHwgaXNDbGlja0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaUr+aMgeWkmumAiSDliKDpmaTor6XpgInkuK3ooYxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC5zcGxpY2Uoc2VsZWN0SXRlbUluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcigncmVtb3ZlJywgbGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC5zcGxpY2Uoc2VsZWN0SXRlbUluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC51bnNoaWZ0KGxpc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaUr+aMgeWkmumAiSDmj5LlhaXor6XpgInkuK3ooYxcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0SXRlbUluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0LnVuc2hpZnQobGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdhcHBlbmQnLCBsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC5zcGxpY2Uoc2VsZWN0SXRlbUluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdC51bnNoaWZ0KGxpc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW1bJ2NoZWNrZWQnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDkuI3mlK/mjIHlpJrpgIkg5pu/5o2i5b2T5YmN6YCJ5Lit6KGMXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0LnB1c2gobGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghY2hlY2tDaGFuZ2VFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja0l0ZW0gPSBsaXN0SXRlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxpc3RDbGljay5lbWl0KHsgZGF0YTogdGhpcy5zZWxlY3REYXRhTGlzdCwgaW5kZXgsIGNoZWNrQ2hhbmdlRXZlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBpZHMgPSB0aGlzLmRhdGEuZmlsdGVyKGl0ZW0gPT4gISFpdGVtLmNoZWNrZWQpLm1hcChpdGVtID0+IGl0ZW1bdGhpcy5saXN0aWROYW1lXSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZHMgPSB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIubWFwKGl0ZW0gPT4gaXRlbVt0aGlzLmxpc3RpZE5hbWVdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uQ2hlY2tWYWx1ZXNDaGFuZ2UoaWRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOiOt+W+l+avj+S4gOihjGxpc3Qg5ZSv5LiA5qCH6K+GICovXHJcbiAgICBnZXRLZXkobGlzdCwgaW5kZXgpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0aWROYW1lICYmIGxpc3QuaGFzT3duUHJvcGVydHkodGhpcy5saXN0aWROYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdFt0aGlzLmxpc3RpZE5hbWVdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIGNoZWNrYm9454q25oCB5Y+Y5YyWICovXHJcbiAgICBnZXRTZWxlY3QoZXZlbnQsIGNoYW5nZURhdGEsIGkpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IGV2ZW50LmNoZWNrZWQ7XHJcbiAgICAgICAgdGhpcy5saXN0U2VsZWN0KHN0YXRlLCBjaGFuZ2VEYXRhLCBpLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgIC8qKjIz5bm0MTHmnIgyMOaXpVxyXG4gICAgKiDlhoXpg6jmj5DkvpvnmoTmjpLluo/mlrnms5XvvIzmjIflrprmjpLluo/lrZfmrrXjgIHljYfluo/ov5jmmK/pmY3luo9cclxuICAqIOS9v+eUqOWcuuaZr++8muWIl+ihqOinhuWbvuWktOmDqOaooeeJiOWPr+S7peaMh+WumuafpeivouOAgeaOkuW6j+WKn+iDve+8jOeCueWHu+aMiemSrueahOaOkuW6j+WKn+iDveWPr+S7peiwg+eUqOi/meS4quaWueazlVxyXG4gICogKi9cclxuICAgIHNvcnQoc29ydGtleU5hbWUsIHNvcnRUeXBlID0gJ2FzYycpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRhLnNvcnQodGhpcy5jb21wYXJlKHNvcnRrZXlOYW1lLCBzb3J0VHlwZSkpO1xyXG4gICAgICAgIC8vIOa7muWKqOWIsOmhtumDqFxyXG4gICAgICAgIHRoaXMuZ290b1Njcm9sbFRvcCgpO1xyXG4gICAgICAgIHJldHVybiB7IHNvcnRSZXN1bHQ6IHsgbGlzdGRhdGE6IHRoaXMuY3VycmVudERhdGEsIHNvcnRrZXlOYW1lLCBzb3J0VHlwZSB9IH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzZWxlY3RSb3cocHJpbWFyeVZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50RGF0YSAmJiB0aGlzLmN1cnJlbnREYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5jdXJyZW50RGF0YS5maW5kKGl0ZW0gPT4gaXRlbVt0aGlzLmxpc3RpZE5hbWVdID09PSBwcmltYXJ5VmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSXRlbSA9IHJvdztcclxuICAgICAgICAgICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHByaXZhdGUgY29tcGFyZShLZXlOYW1lLCB0eXBlKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKG9iajEsIG9iajIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbDEgPSBvYmoxW0tleU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsMiA9IG9iajJbS2V5TmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsMiA8IHZhbDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsMiA+IHZhbDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvYmoxLCBvYmoyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwxID0gb2JqMVtLZXlOYW1lXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbDIgPSBvYmoyW0tleU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbDIgPiB2YWwxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbDIgPCB2YWwxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgcmV0dXJuIDA7IH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbUFjdGl2ZShpdGVtKSB7XHJcbiAgICAgICAgLy8g5LiN566h5piv5ZCm5byA5ZCv5aSa6YCJ77yM5b2T5YmN6KGM5Y+q5pyJ5LiA6KGMXHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGlkTmFtZSAmJiB0aGlzLmNsaWNrSXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbVt0aGlzLmxpc3RpZE5hbWVdID09PSB0aGlzLmNsaWNrSXRlbVt0aGlzLmxpc3RpZE5hbWVdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpobXnoIHmlLnlj5hcclxuICAgICAqIEBwYXJhbSBwYWdlIFxyXG4gICAgICovXHJcbiAgICBvblBhZ2VDaGFuZ2UocGFnZTogeyBwYWdlSW5kZXg6IG51bWJlciwgcGFnZVNpemU6IG51bWJlciB9KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZUluZGV4ICE9PSBwYWdlLnBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2UucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gcGFnZS5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSB7Li4udGhpcy5wYWdpbmF0aW9uT3B0aW9uc307XHJcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZWQuZW1pdCh7IHBhZ2VJbmZvOiBwYWdlIH0pO1xyXG4gICAgICAgICAgICAvLyDmu5rliqjliLDpobbpg6hcclxuICAgICAgICAgICAgdGhpcy5nb3RvU2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmlLnlj5jliIbpobXlpKflsI9cclxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSBcclxuICAgICAqL1xyXG4gICAgb25QYWdlU2l6ZUNoYW5nZShwYWdlU2l6ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgJiYgdGhpcy50b3RhbCk7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZVNpemUgIT09IHBhZ2VTaXplICYmIHRoaXMudG90YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5pdGVtc1BlclBhZ2UgPSBwYWdlU2l6ZTtcclxuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLnRvdGFsO1xyXG4gICAgICAgICAgICBsZXQgcGFnZUxlbmd0aCA9IE1hdGguZmxvb3IodG90YWwgLyBwYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgIGlmICh0b3RhbCAlIHBhZ2VTaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFnZUxlbmd0aCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFnZUxlbmd0aCAmJiB0aGlzLnBhZ2VJbmRleCA+IHBhZ2VMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gcGFnZUxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuY3VycmVudFBhZ2UgPSB0aGlzLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gey4uLnRoaXMucGFnaW5hdGlvbk9wdGlvbnN9OyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlZC5lbWl0KHsgcGFnZUluZm86IHsgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleCwgcGFnZVNpemUgfSB9KTtcclxuICAgICAgICAgICAgIC8vIOa7muWKqOWIsOmhtumDqFxyXG4gICAgICAgICAgICAgdGhpcy5nb3RvU2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEN1cnJlbnREYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlbGVjdERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGF0YUxpc3Q7XHJcbiAgICB9XHJcbiAgICAvKioyM+W5tDEx5pyIMjDml6VcclxuICAgICAqIOaUr+aMgemHjeaWsOiuvue9rmxpc3R2aWV35pWw5o2uIFxyXG4gICAgICog5q2k5pa55rOV5YC86KKra2VuZG8tYmluZGluZ+S9v+eUqO+8jOe7keWumuaVsOaNrlxyXG4gICAgKi9cclxuICAgIHNldERhdGEobGlzdHZpZXdEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbGlzdHZpZXdEYXRhO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlQ3VycmVudERhdGEobGlzdHZpZXdEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBkYXRhSW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdCA9IHRoaXMuZGF0YS5maWx0ZXIoKGxpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0WydjaGVja2VkJ107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA+PSAwICYmIHRoaXMuYWN0aXZlSW5kZXggPD0gKHRoaXMuZGF0YS5sZW5ndGggLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW0gPSB0aGlzLmRhdGFbdGhpcy5hY3RpdmVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSXRlbSA9IGRhdGFJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QucHVzaCh0aGlzLmNsaWNrSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3REYXRhTGlzdC5sZW5ndGggJiYgIXRoaXMubXVsdGlwbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0LnB1c2godGhpcy5kYXRhWzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tJdGVtID0gdGhpcy5kYXRhWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNkcikge1xyXG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoYWN0aXZlOiAncmVtb3ZlJyB8ICdhcHBlbmQnIHwgJycgPSAnJywgbGlzdEl0ZW0/OiBhbnksIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3QgJiYgdGhpcy5lbmFibGVNb3JlUGFnZVNlbGVjdCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGFjdGl2ZSA9PT0gJ3JlbW92ZScgJiYgbGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShsaXN0SXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIuZmlsdGVyKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0SXRlbSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gblt0aGlzLmxpc3RpZE5hbWVdICE9IGxpc3RJdGVtW3RoaXMubGlzdGlkTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuW3RoaXMubGlzdGlkTmFtZV0gIT0gbGlzdEl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIuZmlsdGVyKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RJdGVtLmluZGV4T2YoYSA9PiBhW3RoaXMubGlzdGlkTmFtZV0gPT09IG5bdGhpcy5saXN0aWROYW1lXSkgPT09IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJdGVtc0NoYW5nZS5lbWl0KHsgaXRlbXM6IFsuLi50aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXJdLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlID09PSAnYXBwZW5kJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3RJdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciA9IFsuLi50aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIsIGxpc3RJdGVtXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID0gWy4uLnRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciwgLi4ubGlzdEl0ZW1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0l0ZW1zQ2hhbmdlLmVtaXQoeyBpdGVtczogWy4uLnRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlcl0sIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyID0gWy4uLnRoaXMuc2VsZWN0RGF0YUxpc3RdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2hlY2tlZHMgPSB0aGlzLnNhbWVCeSh0aGlzLmN1cnJlbnREYXRhLCB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIsICh2KSA9PiB2W3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdDaGVja2VkcyAmJiBuZXdDaGVja2Vkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBuZXdDaGVja2Vkcy5pbmNsdWRlcyhpdGVtW3RoaXMubGlzdGlkTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWFqOmAiSAqL1xyXG4gICAgbGlzdENoZWNrQWxsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0ID0gdGhpcy5jdXJyZW50RGF0YS5maWx0ZXIoKGxpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0WydjaGVja2VkJ107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdhcHBlbmQnLCB0aGlzLmN1cnJlbnREYXRhKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2VkVmFsdWVzKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5Y+W5raI5YWo6YCJICovXHJcbiAgICBsaXN0Q2hlY2tBbGxDYW5jZWwoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoJ3JlbW92ZScsIHRoaXMuY3VycmVudERhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrZWRWYWx1ZXModHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yu+6YCJ6KGMXHJcbiAgICAgKiBAcGFyYW0gaWRzIGlkc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2hlY2tSb3dzKGlkczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIWlkcyB8fCBpZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Q2hlY2tBbGxDYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpZHMuaW5jbHVkZXMoaXRlbVt0aGlzLmxpc3RpZE5hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMub25DaGVja1ZhbHVlc0NoYW5nZShpZHMpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkNoZWNrVmFsdWVzQ2hhbmdlKGlkczogYW55W10pIHtcclxuICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQoaWRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRpZmZlcmVuY2VCeSA9IChhLCBiLCBmbikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHMgPSBuZXcgU2V0KGIubWFwKGZuKSk7XHJcbiAgICAgICAgcmV0dXJuIGEubWFwKGZuKS5maWx0ZXIoZWwgPT4gIXMuaGFzKGVsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYW1lQnkgPSAoYSwgYiwgZm4pID0+IHtcclxuICAgICAgICBjb25zdCBzID0gbmV3IFNldChiLm1hcChmbikpO1xyXG4gICAgICAgIHJldHVybiBhLm1hcChmbikuZmlsdGVyKGVsID0+IHMuaGFzKGVsKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uTW91c2VFbnRlcigkZXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMubW91c2VJblNlbGVjdGVkTGlzdCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0RGF0YUxpc3RXaXRoT3RoZXJQYWdlciAmJiB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BlblNlbGVjdGVkTGlzdCA9ICF0aGlzLm9wZW5TZWxlY3RlZExpc3Q7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuU2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjbG9zZVNlbGVjdGVkTGlzdCgpIHtcclxuICAgICAgICB0aGlzLm9wZW5TZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1vdXNlSW5TZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXRoaXMuY2RyWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGVsU2VsZWN0ZWRJdGVtKGlkOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtW3RoaXMubGlzdGlkTmFtZV0gPT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0YUxpc3QgPSB0aGlzLnNlbGVjdERhdGFMaXN0LmZpbHRlcihuID0+IG5bdGhpcy5saXN0aWROYW1lXSAhPSBpZCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhTGlzdEZvck1vcmVQYWdlcigncmVtb3ZlJywgaWQpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrZWRWYWx1ZXMoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgb25DbGVhclNlbGVjdGVkKCRldmVudCkge1xyXG4gICAgICAgIC8vIHRoaXMuY2xlYXJTZWxlY3RlZEl0ZW0uZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RlZExpc3QoKTtcclxuICAgICAgICB0aGlzLmxpc3RDaGVja0FsbENhbmNlbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPSBbXTtcclxuICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gW107XHJcbiAgICAgICAgdGhpcy5vbkNoZWNrVmFsdWVzQ2hhbmdlKFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNlbGVjdExpc3RQYW5lbENsb3NlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RlZExpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNoZWNrZWRWYWx1ZXMoZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlTW9yZVBhZ2VTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLnNlbGVjdERhdGFMaXN0Lm1hcChuID0+IG5bdGhpcy5saXN0aWROYW1lXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5zZWxlY3REYXRhTGlzdFdpdGhPdGhlclBhZ2VyLm1hcChuID0+IG5bdGhpcy5saXN0aWROYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hlY2tWYWx1ZXNDaGFuZ2UodGhpcy5jaGVja1ZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrSXRlbXNDaGFuZ2UuZW1pdCh7IGl0ZW1zOiB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2hlY2tlZHMoY2xlYXJBbGwgPSB0cnVlLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhTGlzdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsZWFyQWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFMaXN0V2l0aE90aGVyUGFnZXIgPSBbXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoJ3JlbW92ZScsIHRoaXMuY3VycmVudERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2VkVmFsdWVzKGVtaXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0SXRlbXNDaGVja2VkU3RhdHVzKGlkczogYW55LCBjaGVja2VkOiBib29sZWFuLCBlbWl0OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IGNoZWNrZWQgPyAnYXBwZW5kJyA6ICdyZW1vdmUnO1xyXG4gICAgICAgICAgICBpZHMuZm9yRWFjaChpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9IGk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBpW3RoaXMubGlzdGlkTmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YS5maW5kKG4gPT4gblt0aGlzLmxpc3RpZE5hbWVdID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFMaXN0Rm9yTW9yZVBhZ2VyKCdhcHBlbmQnLCBpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YUxpc3RGb3JNb3JlUGFnZXIoJ3JlbW92ZScsIGlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2VkVmFsdWVzKGVtaXQpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja0l0ZW1zKGlkczogbnVtYmVyW10gfCBzdHJpbmdbXSB8IG9iamVjdFtdLCBlbWl0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLl9zZXRJdGVtc0NoZWNrZWRTdGF0dXMoaWRzLCBmYWxzZSwgZW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tlZEl0ZW1zKGlkczogb2JqZWN0W10sIGVtaXQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuX3NldEl0ZW1zQ2hlY2tlZFN0YXR1cyhpZHMsIHRydWUsIGVtaXQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5HlrppcclxuICAgICAqL1xyXG4gICAgYmluZFNjcm9sbEV2ZW50KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zY3JvbGxFbCkgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAodGhpcy5rZWVwU2Nyb2xsUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRFbEJpbmRTY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsQmluZFNjcm9sbCA9IHRoaXMuc2Nyb2xsUmVjb3JkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbEJpbmRTY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsRWwubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmNvbnRlbnRFbEJpbmRTY3JvbGwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxCaW5kU2Nyb2xsID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpumcgOimgea7muWKqOWIsOS9jee9rlxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2Nyb2xsVG9SZWNvcmRQb3NpdGlvbigpIHtcclxuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIC8vIOWQr+eUqOS/neaMgea7muWKqOS9jee9ruaIluiAheWFg+e0oOa7muWKqOadoeS9jee9rj4w5oiW6ICF6K6w5b2V5rua5Yqo5p2h5L2N572u5Zyo6aG26YOo5oiW6ICF6K6w5b2V5LiO5YWD57Sg5rua5Yqo5p2h55u4562JXHJcbiAgICAgICAgaWYgKCF0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbiB8fCBzY3JvbGxUYXJnZXQuc2Nyb2xsVG9wID4gMCB8fCB0aGlzLnNjcm9sbFBvcy5zY3JvbGxUb3AgPT0gMCB8fCBNYXRoLmFicyh0aGlzLnNjcm9sbFBvcy5zY3JvbGxUb3Atc2Nyb2xsVGFyZ2V0LnNjcm9sbFRvcCk8PTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmsqHmnInlj5jmm7RcclxuICAgICAgICBsZXQgZmluZFNjcm9sbEluZGV4ID0gWydzY3JvbGxIZWlnaHQnLCAnY2xpZW50SGVpZ2h0J10uZmluZEluZGV4KChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNjcm9sbFBvc1tpdGVtXSAhPSBzY3JvbGxUYXJnZXRbaXRlbV07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGZpbmRTY3JvbGxJbmRleCA9PSAtMSkge1xyXG4gICAgICAgICAgICBzY3JvbGxUYXJnZXRbJ3Njcm9sbFRvcCddID0gdGhpcy5zY3JvbGxQb3NbJ3Njcm9sbFRvcCddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWGhemDqOiusOW9lVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNjcm9sbFJlY29yZCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGxldCBzY3JvbGxUYXJnZXQgPSB0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgWydzY3JvbGxIZWlnaHQnLCAnY2xpZW50SGVpZ2h0JywgJ3Njcm9sbFRvcCddLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxQb3NbaXRlbV0gPSBzY3JvbGxUYXJnZXRbaXRlbV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjee9ruiusOW9lVxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVzZXRSZWNvcmQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbikgeyByZXR1cm47IH1cclxuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIFsnc2Nyb2xsSGVpZ2h0JywgJ2NsaWVudEhlaWdodCcsICdzY3JvbGxUb3AnXS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtID09ICdzY3JvbGxUb3AnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFBvc1tpdGVtXSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFBvc1tpdGVtXSA9IHNjcm9sbFRhcmdldFtpdGVtXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmu5rliqjliLDpobbpg6hcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnb3RvU2Nyb2xsVG9wKCkge1xyXG4gICAgICAgIGxldCBzY3JvbGxUYXJnZXQgPSB0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgc2Nyb2xsVGFyZ2V0LnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgdGhpcy5yZXNldFJlY29yZCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4dcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvYnNlcnZlckVsZW1lbnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNjcm9sbEVsIHx8ICF0aGlzLmluamVjdCkgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAoIXRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lID0gdGhpcy5pbmplY3QuZ2V0PE5nWm9uZT4oTmdab25lLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5ybykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBIZWlnaHQgPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBIZWlnaHQgPiAwICYmIHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzpq5jluqbmlLnlj5jvvIzlsLHph43nva4s5LiN55So572u6aG244CC6I635Y+W6auY5bqm5pyJ5bCP5YGP56e7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGVtcEhlaWdodC10aGlzLnNjcm9sbFBvc1snY2xpZW50SGVpZ2h0J10pPD0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9SZWNvcmRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UmVjb3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvLm9ic2VydmUodGhpcy5zY3JvbGxFbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5Y675L+u55uR5ZCs5bC65a+45Y+Y5pu0XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLnNjcm9sbEVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ybyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOavlOi+g+aVsOaNruWIpOaWreaYr+WQpumcgOimgea7muWKqOWIsOmhtumDqFxyXG4gICAgICogQHBhcmFtIG9sZERhdGEg5pen5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gbmV3RGF0YSDmlrDmlbDmja5cclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbXBhcmVEYXRhVGhlblNjcm9sbFRvcChvbGREYXRhLG5ld0RhdGEpe1xyXG4gICAgICAgIC8vIOayoeacieaVsOaNru+8jOmHjee9rlxyXG4gICAgICAgIGlmKCFvbGREYXRhfHwhbmV3RGF0YSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmsqHmnInmlbDmja7vvIzph43nva5cclxuICAgICAgICBpZihvbGREYXRhLmxlbmd0aD09MHx8bmV3RGF0YS5sZW5ndGg9PTApe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYob2xkRGF0YS5sZW5ndGghPW5ld0RhdGEubGVuZ3RoKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vIOWumuS9jee9rlxyXG4gICAgICAgICAgICBsZXQgaWRGaWVsZD1cIlwiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0aWROYW1lICYmIG9sZERhdGFbMF0uaGFzT3duUHJvcGVydHkodGhpcy5saXN0aWROYW1lKSYmbmV3RGF0YVswXS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmxpc3RpZE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZEZpZWxkPXRoaXMubGlzdGlkTmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighaWRGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICAvLyDkv53mjIHmu5rliqjmnaFcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDmib7liLDkuI3lkIznmoTmlbDmja5cclxuICAgICAgICAgICAgbGV0IGZpbmREaWZmZXJEYXRhPW9sZERhdGEuZmluZCgoaXRlbSxpbmRleCk9PntcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW1baWRGaWVsZF09PW5ld0RhdGFbaW5kZXhdW2lkRmllbGRdKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOacieS4jeWQjOaVsOaNru+8jOmHjee9rlxyXG4gICAgICAgICAgICBpZihmaW5kRGlmZmVyRGF0YSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyDmlbDmja7nm7jlkIzvvIzkv53mjIHmu5rliqjmnaFcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbmV3RGF0YSBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGFuZ2VDdXJyZW50RGF0YShuZXdEYXRhKXtcclxuICAgICAgICBsZXQgbmVlZFNjcm9sbFRvcD10aGlzLmNvbXBhcmVEYXRhVGhlblNjcm9sbFRvcCh0aGlzLmN1cnJlbnREYXRhLG5ld0RhdGEpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudERhdGE9bmV3RGF0YTtcclxuICAgICAgICBpZihuZWVkU2Nyb2xsVG9wKXtcclxuICAgICAgICAgICAgdGhpcy5nb3RvU2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9SZWNvcmRQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFJbml0KCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcbiJdfQ==