!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@farris/ui-shortcuts",["exports","rxjs","rxjs/operators","@angular/core"],r):r((t.farris=t.farris||{},t.farris["ui-shortcuts"]={}),t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,r,e,n){"use strict";var i=function(){return(i=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function o(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,i=e.call(t),u=[];try{for(;(void 0===r||0<r--)&&!(n=i.next()).done;)u.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(e=i["return"])&&e.call(i)}finally{if(o)throw o.error}}return u}function u(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t}var s=-1!==navigator.userAgent.indexOf("Mac OS"),a={backspace:8,tab:9,enter:13,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,windows:91,"⇧":16,"⌥":18,"⌃":17,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,F2:113},c={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",cmd:s?"metaKey":"ctrlKey",command:s?"metaKey":"ctrlKey","left command":"metaKey","right command":"MetaRight","⌘":s?"metaKey":"ctrlKey",option:"altKey",ctl:"ctrlKey",control:"ctrlKey"},p=this,l=function(t){return t},f=Symbol("OnDestroy"),d=(Object.defineProperty(y.prototype,"shortcuts",{get:function(){return this._shortcuts},enumerable:!0,configurable:!0}),y.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},y.prototype.enable=function(){return this.disabled=!1,this},y.prototype.disable=function(){return this.disabled=!0,this},y.prototype.isDisabled=function(){return this.disabled},y.prototype.add=function(t,r){var e;if(t=Array.isArray(t)?t:[t],r){var n=o(u(t.map(function(t){return t.key})),1)[0];this.bindOnDestroy(r,n)}return(e=this._shortcuts).push.apply(e,u(this.parseCommand(t))),this},y.prototype.bindOnDestroy=function(r,e){r.ngOnDestroy&&(r[f]=r.ngOnDestroy);var n=this;return r.ngOnDestroy=function(){var t=r[f];t&&t.apply(this),n.remove(e)},this},y.prototype.remove=function(t){var e=Array.isArray(t)?t:[t];return this._shortcuts=this._shortcuts.filter(function(t){return!t.key.find(function(r){return 0<e.filter(function(t){return t===r}).length})}),this},y.prototype.select=function(r){return this.pressed$.pipe(e.filter(function(t){return t.event,!!t.key.find(function(t){return t===r})}))},y.prototype.parseCommand=function(t){var o=this;return(Array.isArray(t)?t:[t]).map(function(t){var r=Array.isArray(t.key)?t.key:[t.key],e=Math.max.apply(Math,u(r.map(function(t){return t.split(" ").length}))),n=r.map(function(t){return o.getKeys(t.split(" "))});return i({},t,{allowIn:t.allowIn||[],key:r,throttle:function(t){return null==t}(t.throttleTime)?o.throttleTime:t.throttleTime,priority:e,predicates:n})})},y.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],y.ctorParameters=function(){return[]},y.ngInjectableDef=n.defineInjectable({factory:function(){return new y},token:y,providedIn:"root"}),y);function y(){var e=this;this._shortcuts=[],this.throttleTime=0,this._pressed=new r.Subject,this.pressed$=this._pressed.asObservable(),this.disabled=!1,this._ignored=["INPUT","TEXTAREA","SELECT"],this.isAllowed=function(t){var r=t.event.target;return r===t.target||(t.allowIn.length?!function(t,e){return t.filter(function(r){return!e.some(function(t){return t==r})})}(e._ignored,t.allowIn).includes(r.nodeName):!e._ignored.includes(r.nodeName))},this.mapEvent=function(r){return e._shortcuts.map(function(t){return Object.assign({},t,{predicates:function(t,r){for(var e=0;e<r.length;){if(t(r[e]))return!0;e+=1}return!1}(l,t.predicates.map(function(t){return function(o){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0,n=o.length;e<n;){if(!o[e].apply(p,t))return!1;e+=1}return!0}}(t)(r)})),event:r})}).filter(function(t){return t.predicates}).reduce(function(t,r){return t.priority>r.priority?t:r},{priority:0})},this.getKeys=function(t){return t.map(function(t){return t.trim()}).filter(function(t){return"+"!==t}).map(function(r){return c.hasOwnProperty(r)?function(t){return!!t[c[r]]}:function(t){return a[r]?t.keyCode===a[r]||t.key===r:t.keyCode===r.toUpperCase().charCodeAt(0)}})}}var h=(m.forRoot=function(){return{ngModule:m,providers:[d]}},m.decorators=[{type:n.NgModule,args:[{declarations:[],imports:[],exports:[]}]}],m);function m(){}t.ShortcutsService=d,t.ShortcutsModule=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-shortcuts.umd.min.js.map