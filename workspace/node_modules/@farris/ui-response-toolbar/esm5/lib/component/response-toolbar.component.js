/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter, NgZone } from "@angular/core";
import { ResponseToolbarDropDown, ResponseToolbarItem, ResponseToolbarGroup } from "../model/response-toolbar.model";
import { FResizedDirective } from "../resized/f-resized.directive";
import { Subject, Observable } from "rxjs";
import { debounceTime } from "rxjs/operators";
import { LocaleService } from "@farris/ui-locale";
import ResizeObserver from "resize-observer-polyfill";
var ResponseToolbarComponent = /** @class */ (function () {
    function ResponseToolbarComponent(el, render, cd, localeService) {
        this.render = render;
        this.cd = cd;
        this.localeService = localeService;
        this.frtCls = true;
        this.prCls = true;
        // 传递点击事件
        this.rtClickEvent = new EventEmitter();
        // 辅助计算宽度数据
        this.auxiliaryDatas = [];
        // 控制父元素滚动的样式
        //  private _dpState = false;
        //
        this.ro = null;
        // 记录容器宽度
        this.containerWidthRecord = 0;
        // 记录变化
        this.needResponseChanges = 0;
        this.referEl = null;
        this.dpState = [false];
        // 用来内部记录
        this._auxiliary = -1;
        this.resizeGroups = [];
        // 记录格式化后的数据
        this.toolbarDatas = [];
        this.distanceThreshold = 20;
        this.isUpdateTBView = false;
        this._stateDatas = new Subject();
        this._btnVisibleDatas = new Subject();
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        this.rtSize = "";
        /*强制方向，默认为空值，可以有top、bottom，朝上、朝下。
             * 使用场景：工具栏内部的下拉，需要朝上或者需要朝下展开，统一控制
             */
        this.popDirection = "";
        // right按钮靠右 left按钮靠左
        this.btnAlign = "right";
        this.ngZone = null;
        this._selfEl = el.nativeElement;
        if (el.nativeElement.parentElement) {
            this.referEl = el.nativeElement.parentElement;
        }
    }
    Object.defineProperty(ResponseToolbarComponent.prototype, "groups", {
        // 内部记录格式化后的初始数据-------------------------暂时不用
        // _toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];
        set: 
        // 内部记录格式化后的初始数据-------------------------暂时不用
        // _toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            var _this = this;
            if (values) {
                this.resizeGroups = [];
                values.forEach((/**
                 * @param {?} group
                 * @return {?}
                 */
                function (group) {
                    _this.resizeGroups.push(new ResponseToolbarGroup(group.id, group.name));
                    // 还没有计算预置排序
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "datas", {
        set: /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                this.toolbarDatas = this._formatData(values);
                this.needResponseChanges++;
                // 处理分组数据
                this._reOrganizeResizeGroups();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "btnState", {
        // 按钮的禁用状态
        set: 
        // 按钮的禁用状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            this._stateDatas = values;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "btnVisible", {
        // 按钮的查看状态
        set: 
        // 按钮的查看状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            this._btnVisibleDatas = values;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ResponseToolbarComponent.prototype, "buttonSize", {
        get: /**
         * @return {?}
         */
        function () {
            return this.rtSize;
        },
        /*尺寸：有sm,lg,空值，默认是空值 */
        set: /*尺寸：有sm,lg,空值，默认是空值 */
        /**
         * @param {?} btnSize
         * @return {?}
         */
        function (btnSize) {
            if (btnSize != this.rtSize) {
                this.rtSize &&
                    this.render.removeClass(this._selfEl, "f-response-toolbar-" + this.rtSize);
                this.rtSize = btnSize;
                this.rtSize &&
                    this.render.addClass(this._selfEl, "f-response-toolbar-" + this.rtSize);
            }
        },
        enumerable: true,
        configurable: true
    });
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngAfterViewInit = 
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    function () { };
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngDoCheck = 
    // 因为旧模板带有这个方法
    /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 去掉overflow之后
        this.render.addClass(this.auxiliaryContainerEl.nativeElement, "response-toolbar-hidden-element");
        // 按钮的禁用状态
        this._stateDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.changeState(data);
        }));
        // 按钮的可见状态
        this._btnVisibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.changeVisible(data);
        }));
        this.observerElement();
        //处理表单加载后的按钮变化
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var selfObj = _this;
            setTimeout((/**
             * @return {?}
             */
            function () {
                selfObj.responseResize();
            }), 0);
        }));
        // 拦截点击事件只传递第一次点击事件的处理操作交给parent来处理
        this.clickSubscription = this.clickItems
            .pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} eventDatas
         * @return {?}
         */
        function (eventDatas) {
            _this.rtClickEvent.emit(eventDatas);
        }));
        if (this.popDirection === 'default') {
            this.popDirection = '';
        }
    };
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            this.ro.unobserve(this.resizedContainerEl.nativeElement);
            this.ro = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
    };
    // 这个方法有性能问题，待后期处理 TODO
    // 这个方法有性能问题，待后期处理 TODO
    /**
     * @return {?}
     */
    ResponseToolbarComponent.prototype.ngAfterViewChecked = 
    // 这个方法有性能问题，待后期处理 TODO
    /**
     * @return {?}
     */
    function () {
        if (this.needResponseChanges > 0) {
            this.needResponseChanges--;
            this.responseResize();
        }
        else if (this.auxiliaryDatas.length > 0) {
            this._calculate(true, this.auxiliaryContainerEl.nativeElement.offsetWidth);
        }
    };
    // 因为旧模板带有这个方法
    // 因为旧模板带有这个方法
    /**
     * @param {?} event
     * @return {?}
     */
    ResponseToolbarComponent.prototype.onResize = 
    // 因为旧模板带有这个方法
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) { };
    /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     */
    /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype.observerElement = /**
     * 兼容旧模板旧方法
     * 在不存在ngZone的情况下，创建ngZone,然后绑定事件
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.ngZone) {
            /** @type {?} */
            var moduleInjector = this.cd["_view"].root.ngModule.injector;
            this.ngZone = moduleInjector.get(NgZone, null);
        }
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.ro = new ResizeObserver((/**
             * @param {?} entries
             * @param {?} observer
             * @return {?}
             */
            function (entries, observer) {
                /** @type {?} */
                var tempWidth = entries[0].contentRect.width;
                if (Math.abs(tempWidth - _this.containerWidthRecord) >
                    _this.distanceThreshold) {
                    _this.responseResize();
                    _this.containerWidthRecord = tempWidth;
                }
            }));
            _this.ro.observe(_this.resizedContainerEl.nativeElement);
        }));
    };
    /**
     * 强制转换方向
     * @param selfDefinePL
     * @param defaultPL
     */
    /**
     * 强制转换方向
     * @param {?} selfDefinePL
     * @param {?} defaultPL
     * @return {?}
     */
    ResponseToolbarComponent.prototype.getPlacement = /**
     * 强制转换方向
     * @param {?} selfDefinePL
     * @param {?} defaultPL
     * @return {?}
     */
    function (selfDefinePL, defaultPL) {
        /** @type {?} */
        var oldDirection = selfDefinePL ? selfDefinePL : defaultPL;
        if (!this.popDirection) {
            return oldDirection;
        }
        /** @type {?} */
        var plRelation = { bottom: "top", top: "bottom" };
        oldDirection = oldDirection == "left" ? "left-bottom" : oldDirection;
        oldDirection = oldDirection == "right" ? "right-bottom" : oldDirection;
        /** @type {?} */
        var newDirection = oldDirection.replace(plRelation[this.popDirection], this.popDirection);
        return newDirection;
    };
    /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     */
    /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     * @return {?}
     */
    ResponseToolbarComponent.prototype.responseResize = /**
     * 调用此方法的场景
     * 1、界面拖拽自动触发
     * 2、显示调用
     * @return {?}
     */
    function () {
        /** @type {?} */
        var _distance = this._getDistance();
        if (_distance > 0) {
            // 如果分组都已经处理完,再出现滚动条不管
            /** @type {?} */
            var _tempIndex = this._getFirstUnResponsedIndex();
            if (_tempIndex < 0) {
                return;
            }
            // 所有第一层下拉都収折
            this.dpState = [false];
            var _loop_1 = function (k) {
                /** @type {?} */
                var _tempGroup = this_1.resizeGroups[k];
                this_1._auxiliary = k;
                if (_tempGroup.isResponsing()) {
                    this_1._calculate();
                }
                else {
                    // 如果还未开始处理响应式
                    /** @type {?} */
                    var _tempDP_1 = new ResponseToolbarDropDown({
                        text: _tempGroup.name,
                        id: _tempGroup.id,
                        placement: this_1.popDirection
                            ? this_1.popDirection + "-left"
                            : "bottom-left",
                        width: _tempGroup.getWidth()
                    });
                    // 已经处理过宽度
                    if (_tempDP_1.getWidth()) {
                        this_1.auxiliaryDatas = [_tempDP_1];
                        this_1._calculate(true, _tempDP_1.getWidth());
                    }
                    else {
                        // 更新辅助数据
                        /** @type {?} */
                        var auxiliaryIndex = this_1.auxiliaryDatas.findIndex((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            return item.id == _tempDP_1.id;
                        }));
                        if (auxiliaryIndex == -1) {
                            this_1.auxiliaryDatas.push(_tempDP_1);
                        }
                        if (this_1.cd && !((/** @type {?} */ (this_1.cd))).destroyed) {
                            this_1.cd.detectChanges();
                        }
                    }
                }
            };
            var this_1 = this;
            for (var k = _tempIndex; k < this.resizeGroups.length; k++) {
                _loop_1(k);
            }
        }
        else {
            // 寻找最后一个处理响应式的元素
            /** @type {?} */
            var _tempIndex = this._getLastResponseIndex();
            if (_tempIndex < 0) {
                return;
            }
            // 临时存储数据
            /** @type {?} */
            var _tempToolbarDatas = [].concat(this.toolbarDatas);
            // 如果已经开始处理响应式
            for (var k = _tempIndex; k >= 0; k--) {
                /** @type {?} */
                var result = this._restitute(_tempToolbarDatas, k);
                _tempToolbarDatas = [].concat(result["data"]);
                if (!result["continueTo"]) {
                    break;
                }
            }
            // 更新数据
            this.toolbarDatas = [].concat(_tempToolbarDatas);
            // 所有第一层下拉都収折
            this.dpState = [false];
            if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
                this.cd.detectChanges();
            }
        }
    };
    // 下拉的展开收起状态
    // 下拉的展开收起状态
    /**
     * @param {?} state
     * @param {?} id
     * @return {?}
     */
    ResponseToolbarComponent.prototype.dpSectionState = 
    // 下拉的展开收起状态
    /**
     * @param {?} state
     * @param {?} id
     * @return {?}
     */
    function (state, id) {
        if (state) {
            // 展开状态下
            /** @type {?} */
            var dropdowns = this.resizedContentEl.nativeElement.querySelectorAll("[fDropdown]");
            if (dropdowns && dropdowns.length > 1) {
                for (var k = 0; k < dropdowns.length; k++) {
                    if (dropdowns[k].className.indexOf("show") &&
                        dropdowns[k].id != id) {
                        // dropdowns[k].dispatchEvent(new Event('selfClose'));
                        this.compatibleDispatchEvent(dropdowns[k], "selfClose");
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?} eventEl
     * @param {?} eventName
     * @return {?}
     */
    ResponseToolbarComponent.prototype.compatibleDispatchEvent = /**
     * @private
     * @param {?} eventEl
     * @param {?} eventName
     * @return {?}
     */
    function (eventEl, eventName) {
        /** @type {?} */
        var event;
        if (typeof Event === "function") {
            event = new Event(eventName);
        }
        else {
            event = document.createEvent("Event");
            event.initEvent(eventName, false, false);
        }
        eventEl.dispatchEvent(event);
    };
    // 修改启用禁用状态
    // 修改启用禁用状态
    /**
     * @param {?} values
     * @return {?}
     */
    ResponseToolbarComponent.prototype.changeState = 
    // 修改启用禁用状态
    /**
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        /** @type {?} */
        var idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            /** @type {?} */
            var state = values[id];
            /** @type {?} */
            var item = _this._findItemByID(id, _this.toolbarDatas);
            if (item) {
                item["disabled"] = state;
            }
        }));
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param values
     */
    /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param {?} values
     * @return {?}
     */
    ResponseToolbarComponent.prototype.changeVisible = /**
     * 修改显示状态
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     * @param {?} values
     * @return {?}
     */
    function (values) {
        var _this = this;
        /** @type {?} */
        var idArray = Object.keys(values);
        idArray.forEach((/**
         * @param {?} id
         * @return {?}
         */
        function (id) {
            /** @type {?} */
            var visible = values[id];
            /** @type {?} */
            var item = _this._findItemByID(id, _this.toolbarDatas);
            if (item) {
                item["visible"] = visible;
            }
        }));
        // 遍历循环,更新数据
        this.toolbarDatas.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            // 如果是下拉
            if (item["isDP"]) {
                _this._checkDropdownVisible(values, item);
            }
        }));
        this.needResponseChanges++;
        // 更新
        //this.cd.markForCheck();
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @param outsideVisibleArrays 从组件外传入的可见状态对象
     * @param dropdownItem 下拉元素
     */
    /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @private
     * @param {?} outsideVisibleArrays 从组件外传入的可见状态对象
     * @param {?} dropdownItem 下拉元素
     * @return {?}
     */
    ResponseToolbarComponent.prototype._checkDropdownVisible = /**
     * 如果是下拉按钮
     *   判断下面的子是否都隐藏
     *       A. 如果子都隐藏，那么整个下拉都被隐藏；
     *       B. 如果存在子没有隐藏，而且下拉没有被预置隐藏，下拉按钮显示
     * @private
     * @param {?} outsideVisibleArrays 从组件外传入的可见状态对象
     * @param {?} dropdownItem 下拉元素
     * @return {?}
     */
    function (outsideVisibleArrays, dropdownItem) {
        var _this = this;
        //如果没有被强制设置状态
        if (!outsideVisibleArrays.hasOwnProperty(dropdownItem["id"])) {
            // 下拉元素不可见，判断是否有可见子元素
            if (!dropdownItem["visible"] &&
                this._hasVisibleItem(dropdownItem["children"], true)) {
                dropdownItem["visible"] = true;
            }
            // 下拉元素是可见，判断是否有子元素都不可见
            if (dropdownItem["visible"] &&
                !this._hasVisibleItem(dropdownItem["children"], true)) {
                dropdownItem["visible"] = false;
            }
        }
        dropdownItem.children.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item["isDP"]) {
                _this._checkDropdownVisible(outsideVisibleArrays, item);
            }
        }));
    };
    /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @param datas 待检查数据
     * @param visible 可见状态
     */
    /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @private
     * @param {?} datas 待检查数据
     * @param {?} visible 可见状态
     * @return {?}
     */
    ResponseToolbarComponent.prototype._hasVisibleItem = /**
     * 在待检查数据中心，检查是否存在该可见状态的数据。
     * 如果有返回true,否则返回false
     * @private
     * @param {?} datas 待检查数据
     * @param {?} visible 可见状态
     * @return {?}
     */
    function (datas, visible) {
        /** @type {?} */
        var findIndex = datas.findIndex((/**
         * @param {?} childItem
         * @return {?}
         */
        function (childItem) {
            if (childItem["visible"] == visible) {
                return true;
            }
            return false;
        }));
        if (findIndex > -1) {
            return true;
        }
        return false;
    };
    /**
     * 捕获点击
     * @param ev
     */
    /**
     * 捕获点击
     * @param {?} ev
     * @param {?=} ddRef
     * @return {?}
     */
    ResponseToolbarComponent.prototype.clickItem = /**
     * 捕获点击
     * @param {?} ev
     * @param {?=} ddRef
     * @return {?}
     */
    function (ev, ddRef) {
        ev.stopPropagation();
        // 如果是分离的下拉按钮
        if (this.elhasSpecialCls(ev.target, "dropdown-toggle-split")) {
            ev.stopImmediatePropagation();
        }
        // 判断是否点击到需要处理事件的元素上,按钮、下拉按钮
        /** @type {?} */
        var clickEvEl = this.findBtnOrTogglerItemFromClick(ev.target);
        if (clickEvEl) {
            /** @type {?} */
            var tempID = clickEvEl["id"];
            // 修改模板，id调整到下拉整体上
            if (!tempID &&
                this.elhasSpecialCls(clickEvEl["parentNode"], "f-rt-dropdown")) {
                tempID = clickEvEl["parentNode"].id;
            }
            if (tempID) {
                /** @type {?} */
                var tempItem = this._findItemByID(tempID, this.toolbarDatas);
                // 如果元素禁用
                if (tempItem["disabled"]) {
                    // 禁止向上传递
                    ev.stopImmediatePropagation();
                }
                else {
                    this.clickItems.next({
                        id: tempID,
                        text: tempItem["text"],
                        hidden: tempItem["hidden"]
                    });
                    if (ddRef) {
                        ddRef.close();
                    }
                }
            }
        }
        else {
            ev.stopImmediatePropagation();
        }
    };
    /**
     * @private
     * @param {?} clickTarget
     * @return {?}
     */
    ResponseToolbarComponent.prototype.findBtnOrTogglerItemFromClick = /**
     * @private
     * @param {?} clickTarget
     * @return {?}
     */
    function (clickTarget) {
        // 父级标签是否是body,是着停止返回集合,反之继续
        if (this.elhasSpecialCls(clickTarget)) {
            return clickTarget;
        }
        else if (clickTarget.parentNode["className"] && clickTarget.parentNode["className"].indexOf("f-response-content") < 0) {
            /** @type {?} */
            var parentN = clickTarget.parentNode;
            if (this.elhasSpecialCls(parentN)) {
                return parentN;
            }
            else {
                return this.findBtnOrTogglerItemFromClick(parentN);
            }
        }
        // 返回集合,结束
        return null;
    };
    /**
     * @private
     * @param {?} el
     * @param {?=} clsName
     * @return {?}
     */
    ResponseToolbarComponent.prototype.elhasSpecialCls = /**
     * @private
     * @param {?} el
     * @param {?=} clsName
     * @return {?}
     */
    function (el, clsName) {
        if (clsName === void 0) { clsName = ""; }
        if (el) {
            /** @type {?} */
            var classNameList = el.classList;
            /** @type {?} */
            var findCls = false;
            for (var k = 0; k < classNameList.length; k++) {
                if (clsName) {
                    if (classNameList[k] == clsName) {
                        findCls = true;
                        break;
                    }
                }
                else {
                    if (classNameList[k] == "f-rt-btn" ||
                        classNameList[k] == "f-rt-toggle") {
                        findCls = true;
                        break;
                    }
                }
            }
            return findCls;
        }
        return false;
    };
    /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     */
    /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._reOrganizeResizeGroups = /**
     * 根据传递的数据重新组建分组
     * ToDo 暂时没有更复杂的分组，否则需要记录分组
     * @private
     * @return {?}
     */
    function () {
        // 处理分组数据
        //  if (this.resizeGroups.length === 0) {
        /** @type {?} */
        var moreText = "更多";
        if (this.localeService) {
            moreText = this.localeService.getValue("responseToolbar.more");
        }
        /** @type {?} */
        var defaultResizeGroup = new ResponseToolbarGroup("toolbar-group-1", moreText);
        for (var i = this.toolbarDatas.length - 1; i >= 0; i--) {
            defaultResizeGroup.setPreset(this.toolbarDatas[i]["id"]);
        }
        this.resizeGroups = [].concat(defaultResizeGroup);
        // this.cd.markForCheck();
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 内容与容器的差值
     */
    /**
     * 内容与容器的差值
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getDistance = /**
     * 内容与容器的差值
     * @private
     * @return {?}
     */
    function () {
        return (this.resizedContentEl.nativeElement.offsetWidth -
            this.resizedContainerEl.nativeElement.offsetWidth);
    };
    /**
     * 根据返回结果判断是否继续
     * @param groupIndex
     */
    /**
     * 根据返回结果判断是否继续
     * @private
     * @param {?} originalData
     * @param {?} groupIndex
     * @return {?}
     */
    ResponseToolbarComponent.prototype._restitute = /**
     * 根据返回结果判断是否继续
     * @private
     * @param {?} originalData
     * @param {?} groupIndex
     * @return {?}
     */
    function (originalData, groupIndex) {
        /** @type {?} */
        var tempGroup = this.resizeGroups[groupIndex];
        // 滚动条和内容的距离
        /** @type {?} */
        var tempDistance = this._getDistance();
        // 计算最后一个下拉的宽度
        /** @type {?} */
        var tempGroupData = originalData[this._findIndexByID(originalData, tempGroup.id)];
        // 找到还原的位置
        /** @type {?} */
        var tempPresetIndex = [].concat(tempGroup.responsedIndex);
        // 排除原下拉子元素被计算
        for (var j = tempPresetIndex.length - 1; j >= 0; j--) {
            if (tempDistance >= 0) {
                break;
            }
            // 从下拉中移除
            /** @type {?} */
            var tempChildData = tempGroupData.children[0];
            /** @type {?} */
            var specialDistance = j === 0 ? tempGroupData.getWidth() : 0;
            tempDistance =
                tempDistance +
                    (tempChildData.getWidth() ? tempChildData.getWidth() : 0) -
                    specialDistance;
            if (tempDistance >= 0) {
                break;
            }
            else {
                // 更新下拉
                tempGroupData.removeChild();
                // 插入到原位置
                originalData.splice(tempPresetIndex[j], 0, tempChildData);
                // 更新位置
                tempGroup.removeResponsed(j);
                if (j === 0) {
                    originalData.splice(this._findIndexByID(originalData, tempGroup.id), 1);
                }
            }
        }
        return {
            continueTo: tempDistance > 0 ? true : false,
            data: originalData
        };
    };
    /**
     * 开始计算
     * @param datas
     */
    /**
     * 开始计算
     * @private
     * @param {?=} auxiliary
     * @param {?=} tGroupWidth
     * @return {?}
     */
    ResponseToolbarComponent.prototype._calculate = /**
     * 开始计算
     * @private
     * @param {?=} auxiliary
     * @param {?=} tGroupWidth
     * @return {?}
     */
    function (auxiliary, tGroupWidth) {
        if (auxiliary === void 0) { auxiliary = false; }
        if (tGroupWidth === void 0) { tGroupWidth = 0; }
        if (this._auxiliary < 0) {
            return;
        }
        // 记录需要修改的下拉
        /** @type {?} */
        var tempDP;
        // 滚动条和内容的距离
        /** @type {?} */
        var tempDistance = this._getDistance() + tGroupWidth;
        // 临时存储数据
        /** @type {?} */
        var tempToolbarDatas = [].concat(this.toolbarDatas);
        /** @type {?} */
        var tempGroup = this.resizeGroups[this._auxiliary];
        if (auxiliary) {
            tempDP = this.auxiliaryDatas.pop();
            tempDP.setWidth(tGroupWidth);
            tempGroup.setWidth(tGroupWidth);
        }
        else {
            tempDP =
                tempToolbarDatas[this._findIndexByID(tempToolbarDatas, tempGroup.id)];
        }
        // 当前剩余隐藏
        for (var j = tempGroup.responsedIndex.length; j < tempGroup.presetId.length; j++) {
            if (tempDistance <= 0) {
                break;
            }
            // 计算在当前数据中的位置，根据这个位置可以找宽度
            /** @type {?} */
            var tempOldIndex = (/** @type {?} */ (this._findIndexByID(this.toolbarDatas, tempGroup.presetId[j])));
            /** @type {?} */
            var tempNewIndex = (/** @type {?} */ (this._findIndexByID(tempToolbarDatas, tempGroup.presetId[j])));
            // 计算按钮宽度
            /** @type {?} */
            var tempWidth = (/** @type {?} */ (this.toolbarDatas[tempOldIndex].getWidth()));
            if (tempWidth === 0) {
                // 按钮宽度未曾被计算过
                tempWidth = this._getWidthFromElementsById(tempGroup.presetId[j]);
                tempToolbarDatas[tempNewIndex].setWidth(tempWidth);
            }
            else if (tempWidth === false) {
                // 按钮被隐藏
                tempWidth = 0;
            }
            tempDP.addChild(tempToolbarDatas[tempNewIndex]);
            // 移除
            tempToolbarDatas.splice(tempNewIndex, 1);
            // 保存位置用于还原
            tempGroup.setResponsed(tempNewIndex);
            tempDistance = tempDistance - tempWidth;
        }
        if (auxiliary && tempDP.hasChild()) {
            // 插入
            tempToolbarDatas.push(tempDP);
        }
        this._auxiliary = -1;
        this.toolbarDatas = [].concat(tempToolbarDatas);
        if (this.cd && !((/** @type {?} */ (this.cd))).destroyed) {
            this.cd.detectChanges();
        }
    };
    /**
     * 根据id找到实际显示元素的宽度
     * @param findId
     */
    /**
     * 根据id找到实际显示元素的宽度
     * @private
     * @param {?} findId
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getWidthFromElementsById = /**
     * 根据id找到实际显示元素的宽度
     * @private
     * @param {?} findId
     * @return {?}
     */
    function (findId) {
        /** @type {?} */
        var parentEl = this.resizedContentEl.nativeElement;
        /** @type {?} */
        var childLen = parentEl.children.length;
        /** @type {?} */
        var result = 0;
        for (var k = 0; k < childLen; k++) {
            if (parentEl.children[k].id === findId) {
                /** @type {?} */
                var findEl = parentEl.children[k];
                /** @type {?} */
                var getComputedStyleEl = window.getComputedStyle(findEl, null);
                result = findEl.offsetWidth + parseFloat(getComputedStyleEl.marginLeft) + parseFloat(getComputedStyleEl.marginRight);
                break;
            }
        }
        return result;
    };
    /**
     * 格式化数据
     */
    /**
     * 格式化数据
     * @private
     * @param {?} datas
     * @param {?=} idPrefix
     * @return {?}
     */
    ResponseToolbarComponent.prototype._formatData = /**
     * 格式化数据
     * @private
     * @param {?} datas
     * @param {?=} idPrefix
     * @return {?}
     */
    function (datas, idPrefix) {
        var _this = this;
        if (idPrefix === void 0) { idPrefix = "response"; }
        /** @type {?} */
        var result = [];
        datas.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item.isDP) {
                // 如果是下拉
                if (item.hasOwnProperty("children") &&
                    item["children"].length) {
                    /** @type {?} */
                    var children = [].concat(item["children"]);
                    // item.children = []; // 应gzq要求20230529
                    /** @type {?} */
                    var dpItem = new ResponseToolbarDropDown(Object.assign({ id: idPrefix + "_" + index }, item));
                    result.push(dpItem);
                    dpItem.children = _this._formatData(children, idPrefix + "_" + index);
                }
                else {
                    result.push(new ResponseToolbarDropDown(Object.assign({ id: idPrefix + "_" + index }, item)));
                }
            }
            else {
                // 非下拉
                result.push(new ResponseToolbarItem(Object.assign({ id: idPrefix + "_" + index }, item)));
            }
        }));
        return result;
    };
    /**
     * 找到第一个未处理完响应式的元素
     */
    /**
     * 找到第一个未处理完响应式的元素
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getFirstUnResponsedIndex = /**
     * 找到第一个未处理完响应式的元素
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tempUnResponsedIndex = this.resizeGroups.findIndex((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            if (group.isResponsed()) {
                return false;
            }
            return true;
        }));
        return tempUnResponsedIndex;
    };
    /**
     * 寻找最后一个处理响应式的元素
     */
    /**
     * 寻找最后一个处理响应式的元素
     * @private
     * @return {?}
     */
    ResponseToolbarComponent.prototype._getLastResponseIndex = /**
     * 寻找最后一个处理响应式的元素
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tempResponsingIndex = this.resizeGroups.findIndex((/**
         * @param {?} group
         * @return {?}
         */
        function (group) {
            if (!group.isResponsing()) {
                return true;
            }
            return false;
        }));
        // 所有组元素都已处理完响应式
        if (tempResponsingIndex === -1) {
            return this.resizeGroups.length - 1;
        }
        // 所有组元素都未开始处理响应式
        return tempResponsingIndex > 1 ? tempResponsingIndex - 1 : -1;
    };
    /**
     * 找到group形成的下拉，在数据中的位置
     */
    /**
     * 找到group形成的下拉，在数据中的位置
     * @private
     * @param {?} datas
     * @param {?} id
     * @return {?}
     */
    ResponseToolbarComponent.prototype._findIndexByID = /**
     * 找到group形成的下拉，在数据中的位置
     * @private
     * @param {?} datas
     * @param {?} id
     * @return {?}
     */
    function (datas, id) {
        /** @type {?} */
        var result = datas.findIndex((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item["id"] === id) {
                return true;
            }
            return false;
        }));
        return result;
    };
    /**
     * 根据ID寻找Item
     */
    /**
     * 根据ID寻找Item
     * @private
     * @param {?} id
     * @param {?} data
     * @return {?}
     */
    ResponseToolbarComponent.prototype._findItemByID = /**
     * 根据ID寻找Item
     * @private
     * @param {?} id
     * @param {?} data
     * @return {?}
     */
    function (id, data) {
        var _this = this;
        /** @type {?} */
        var tempResult = null;
        /** @type {?} */
        var tempIndex = data.findIndex((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            if (item["id"] === id) {
                tempResult = item;
                return true;
            }
            // 如果是下拉，层级下拉
            if (item["isDP"]) {
                /** @type {?} */
                var tempItem = _this._findItemByID(id, item["children"]);
                if (tempItem) {
                    tempResult = tempItem;
                    return true;
                }
            }
            return false;
        }));
        return tempResult;
    };
    ResponseToolbarComponent.decorators = [
        { type: Component, args: [{
                    selector: "f-response-toolbar",
                    template: "<!-- <div class=\"border bg-primary\" style=\"height:40px;position: relative;\"> -->\r\n<div #auxiliaryContainer class=\"response-toolbar-hidden-element\">\r\n    <ng-container *ngFor=\"let dataItem of auxiliaryDatas\">\r\n        <div class=\"btn-group\" *ngIf=\"dataItem.visible&&dataItem.isDP\" id=\"{{ dataItem.id }}\">\r\n            <button type=\"button\" class=\"btn dropdown-toggle dropdown-toggle-split  f-rt-toggle\"\r\n                [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"dataItem.class\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n             <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n            </button>\r\n        </div>\r\n        <button type=\"button\" class=\"btn f-rt-btn\" [class.f-btn-ml]=\"btnAlign=='right'\"\r\n            [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"dataItem.class\" id=\"{{ dataItem.id }}\"\r\n            *ngIf=\"dataItem.visible&&!dataItem.isDP\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n            <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n        </button>\r\n    </ng-container>\r\n</div>\r\n<div fResized #resizedContainer (resizedEvent)=\"onResize($event)\" class=\"d-flex flex-nowrap\"\r\n    [ngClass]=\"{'justify-content-end':btnAlign=='right','justify-content-start':btnAlign=='left'}\">\r\n    <div class=\"d-inline-block f-response-content\" style=\"white-space: nowrap;\" #resizedContent\r\n        (click)=\"clickItem($event, null)\">\r\n        <ng-container *ngFor=\"let dataItem of toolbarDatas\">\r\n            <ng-container *ngIf=\"dataItem.visible && dataItem.isDP\">\r\n                <ng-container *ngTemplateOutlet=\"\r\n                        dropdownTmpl;\r\n                        context: { $implicit: dataItem }\r\n                    \"></ng-container>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"dataItem.visible && !dataItem.isDP&&dataItem.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\"\r\n                    [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" id=\"{{ dataItem.id }}\"\r\n                    [ngClass]=\"dataItem.class\" [class.disabled]=\"dataItem.disabled\" [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\"\r\n                    [farrisTooltip]=\"dataItem.tipsEnable\" [content]=\"dataItem.tipsText\">\r\n                    <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"dataItem.visible && !dataItem.isDP&&!dataItem.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\"\r\n                    [class.f-btn-ml]=\"btnAlign=='right'\" [class.f-btn-mr]=\"btnAlign=='left'\" id=\"{{ dataItem.id }}\"\r\n                    [ngClass]=\"dataItem.class\" [class.disabled]=\"dataItem.disabled\"  [class.btn-icontext]=\"dataItem.icon&&dataItem.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"dataItem.icon&&dataItem.icon.trim()\" *ngIf=\"dataItem.icon&&dataItem.icon.trim()\"></i>{{ dataItem.text }}\r\n                </button>\r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<!-- </div> -->\r\n\r\n<!--\u7B2C\u4E00\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownTmpl let-data>\r\n    <div class=\"btn-group f-rt-dropdown\" id=\"{{ data.id }}\" fDropdown  #dd=\"fDropdown\"\r\n        [placement]=\"getPlacement(data['placement'],'bottom')\" (dpChangeEvent)=\"dpSectionState($event,data.id)\"\r\n        [rectifyReference]=\"referEl\" [forceState]=\"dpState\" [autoRectify]=\"true\" [class.f-btn-ml]=\"btnAlign=='right'\"\r\n        [class.f-btn-mr]=\"btnAlign=='left'\" [ngClass]=\"data['dropdownCls']\">\r\n        <!--\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"data.split\">\r\n            <ng-container *ngIf=\"data.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\" [ngClass]=\"data.class\" [class.disabled]=\"data.disabled\"\r\n                    [farrisTooltip]=\"data.tipsEnable\" [content]=\"data.tipsText\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!data.tipsEnable\">\r\n                <button type=\"button\" class=\"btn f-rt-btn\" [ngClass]=\"data.class\" [class.disabled]=\"data.disabled\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                    <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n                </button>\r\n            </ng-container>\r\n            <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"data.class\" fDropdownToggle></button>\r\n        </ng-container>\r\n        <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"!data.split&&data.tipsEnable\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn f-rt-toggle\" [farrisTooltip]=\"data.tipsEnable\"\r\n                [content]=\"data.tipsText\" [ngClass]=\"data.class + ' dropdown-toggle'\" [dpDisabled]=\"data.disabled\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n            </button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!data.split&&!data.tipsEnable\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn f-rt-toggle\" [ngClass]=\"data.class + ' dropdown-toggle'\"\r\n                [dpDisabled]=\"data.disabled\"  [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.text }}\r\n            </button>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu [ngClass]=\"data.menuCls\" id=\"{{ data.id }}_menu\">\r\n            <ng-container *ngFor=\"let item of data.children\">\r\n                <ng-container *ngIf=\"item.visible && item.isDP\">\r\n                    <ng-container *ngTemplateOutlet=\"\r\n                            dropdownSubTmpl;\r\n                            context: { $implicit: item, ddRef: dd }\r\n                        \"></ng-container>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"item.visible&&!item.isDP&&item.tipsEnable\">\r\n                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"item.disabled\"\r\n                        [farrisTooltip]=\"item.tipsEnable\" [content]=\"item.tipsText\"  (click)=\"clickItem($event, dd)\">\r\n                        {{ item.text }}\r\n                    </li>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"item.visible&&!item.isDP&&!item.tipsEnable\">\r\n                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"item.disabled\"  (click)=\"clickItem($event, dd)\">\r\n                        {{ item.text }}\r\n                    </li>\r\n                </ng-container>\r\n            </ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>\r\n<!--\u7B2C\u4E8C\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownSubTmpl let-subData let-dd=\"ddRef\">\r\n    <li class=\"dropdown-submenu f-rt-dropdown\" fDropdown [isSubDP]=\"true\" (click)=\"clickItem($event, dd)\"\r\n        [placement]=\"getPlacement(subData['placement'],'right')\" [autoRectify]=\"true\" [rectifyReference]=\"referEl\"\r\n        [ngClass]=\"subData['dropdownCls']\" id=\"{{ subData.id }}\">\r\n        <ng-container *ngIf=\"subData.split\">\r\n            <ng-container *ngIf=\"subData.tipsEnable\">\r\n                <span class=\"dropdown-item f-rt-btn\" [class.disabled]=\"subData['disabled']\" [ngClass]=\"subData['class']\"\r\n                    [farrisTooltip]=\"subData.tipsEnable\" [content]=\"subData.tipsText\">{{ subData.text }}</span>\r\n                <span class=\"dropdown-toggle dropdown-toggle-split f-rt-toggle\" fDropdownToggle></span>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!subData.tipsEnable\">\r\n                <span class=\"dropdown-item f-rt-btn\" [class.disabled]=\"subData['disabled']\"\r\n                    [ngClass]=\"subData['class']\">{{ subData.text }}</span>\r\n                <span class=\"dropdown-toggle dropdown-toggle-split f-rt-toggle\" fDropdownToggle></span>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!subData.split\">\r\n            <ng-container *ngIf=\"subData.tipsEnable\">\r\n                <span class=\"dropdown-item  dropdown-toggle f-rt-toggle\" [dpDisabled]=\"subData['disabled']\"\r\n                    [farrisTooltip]=\"subData.tipsEnable\" [content]=\"subData.tipsText\" [ngClass]=\"subData['class']\"\r\n                    fDropdownToggle>{{ subData.text }}</span>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!subData.tipsEnable\">\r\n                <span class=\"dropdown-item  dropdown-toggle f-rt-toggle\" [dpDisabled]=\"subData['disabled']\"\r\n                    [ngClass]=\"subData['class']\" fDropdownToggle>{{ subData.text }}</span>\r\n            </ng-container>\r\n\r\n        </ng-container>\r\n\r\n        <ul class=\"dropdown-menu\" fDropdownMenu [ngClass]=\"subData.menuCls\" id=\"{{ subData.id }}_submenu\">\r\n            <ng-container *ngFor=\"let subItem of subData.children\">\r\n                <ng-container *ngIf=\"subItem.visible && subItem.isDP\">\r\n                    <ng-container *ngTemplateOutlet=\"\r\n                            dropdownSubTmpl;\r\n                            context: { $implicit: subItem, ddRef: dd }\r\n                        \"></ng-container>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"subItem.visible && !subItem.isDP\">\r\n                    <ng-container *ngIf=\"subItem.tipsEnable\">\r\n                        <li [farrisTooltip]=\"subItem.tipsEnable\" [content]=\"subItem.tipsText\"  (click)=\"clickItem($event, dd)\"\r\n                            class=\"dropdown-item f-rt-btn\" id=\"{{ subItem.id }}\" [class.disabled]=\"subItem.disabled\">\r\n                            {{ subItem.text }}\r\n                        </li>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"!subItem.tipsEnable\">\r\n                        <li class=\"dropdown-item f-rt-btn\" id=\"{{ subItem.id }}\" [class.disabled]=\"subItem.disabled\"  (click)=\"clickItem($event, dd)\">\r\n                            {{ subItem.text }}\r\n                        </li>\r\n                    </ng-container>\r\n                </ng-container>\r\n            </ng-container>\r\n        </ul>\r\n    </li>\r\n</ng-template>",
                    styles: [":host .response-toolbar-hidden-element{position:fixed;z-index:200;visibility:hidden;top:-87px}"]
                }] }
    ];
    /** @nocollapse */
    ResponseToolbarComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: LocaleService }
    ]; };
    ResponseToolbarComponent.propDecorators = {
        frtCls: [{ type: HostBinding, args: ["class.f-response-toolbar",] }],
        prCls: [{ type: HostBinding, args: ["class.position-relative",] }],
        resizedContainerEl: [{ type: ViewChild, args: ["resizedContainer",] }],
        auxiliaryContainerEl: [{ type: ViewChild, args: ["auxiliaryContainer",] }],
        resizedContentEl: [{ type: ViewChild, args: ["resizedContent",] }],
        resizedContainerDirective: [{ type: ViewChild, args: ["resizedContainer", { read: FResizedDirective },] }],
        rtClickEvent: [{ type: Output }],
        groups: [{ type: Input }],
        datas: [{ type: Input }],
        btnState: [{ type: Input }],
        btnVisible: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        buttonSize: [{ type: Input }],
        popDirection: [{ type: Input }],
        btnAlign: [{ type: Input }]
    };
    return ResponseToolbarComponent;
}());
export { ResponseToolbarComponent };
if (false) {
    /** @type {?} */
    ResponseToolbarComponent.prototype.frtCls;
    /** @type {?} */
    ResponseToolbarComponent.prototype.prCls;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContainerEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.auxiliaryContainerEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContentEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizedContainerDirective;
    /** @type {?} */
    ResponseToolbarComponent.prototype.rtClickEvent;
    /** @type {?} */
    ResponseToolbarComponent.prototype.auxiliaryDatas;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.containerWidthRecord;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.needResponseChanges;
    /** @type {?} */
    ResponseToolbarComponent.prototype.referEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.dpState;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype._auxiliary;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype._selfEl;
    /** @type {?} */
    ResponseToolbarComponent.prototype.resizeGroups;
    /** @type {?} */
    ResponseToolbarComponent.prototype.toolbarDatas;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.distanceThreshold;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.isUpdateTBView;
    /** @type {?} */
    ResponseToolbarComponent.prototype._stateDatas;
    /** @type {?} */
    ResponseToolbarComponent.prototype._btnVisibleDatas;
    /** @type {?} */
    ResponseToolbarComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.clickSubscription;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.rtSize;
    /** @type {?} */
    ResponseToolbarComponent.prototype.popDirection;
    /** @type {?} */
    ResponseToolbarComponent.prototype.btnAlign;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    ResponseToolbarComponent.prototype.cd;
    /** @type {?} */
    ResponseToolbarComponent.prototype.localeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzcG9uc2UtdG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXJlc3BvbnNlLXRvb2xiYXIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50L3Jlc3BvbnNlLXRvb2xiYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUVULEtBQUssRUFDTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFNBQVMsRUFLVCxpQkFBaUIsRUFDakIsV0FBVyxFQUNYLE1BQU0sRUFDTixZQUFZLEVBQ1osTUFBTSxFQUdULE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCx1QkFBdUIsRUFDdkIsbUJBQW1CLEVBQ25CLG9CQUFvQixFQUV2QixNQUFNLGlDQUFpQyxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFpQyxNQUFNLE1BQU0sQ0FBQztBQUMxRSxPQUFPLEVBQWdCLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzVELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUV0RDtJQStHSSxrQ0FDSSxFQUFjLEVBQ04sTUFBaUIsRUFDakIsRUFBcUIsRUFDdEIsYUFBNEI7UUFGM0IsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNqQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUN0QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQTNHRSxXQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ2YsVUFBSyxHQUFHLElBQUksQ0FBQzs7UUFZckQsaUJBQVksR0FBNEMsSUFBSSxZQUFZLEVBRXJFLENBQUM7O1FBRUosbUJBQWMsR0FBbUMsRUFBRSxDQUFDOzs7O1FBSTVDLE9BQUUsR0FBMEIsSUFBSSxDQUFDOztRQUVq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QkFFTCxLQUFLOztJQWdyQlYsK0JBQUM7Q0FBQSxBQTd4QkQsSUE2eEJDO1NBdnhCWSx3QkFBd0I7OztJQUVqQywwQ0FBdUQ7O0lBQ3ZELHlDQUFxRDs7SUFFckQsc0RBQWtEOztJQUVsRCx3REFBc0Q7O0lBRXRELG9EQUE4Qzs7SUFFOUMsNkRBQzZDOztJQUU3QyxnREFHSTs7SUFFSixrREFBb0Q7Ozs7O0lBSXBELHNDQUF5Qzs7Ozs7SUFFekMsd0RBQWlDOzs7OztJQUVqQyx1REFBZ0M7O0lBQ2hDLDJDQUFlOztJQUNmLDJDQUFrQjs7Ozs7SUFFbEIsOENBQXdCOzs7OztJQUN4QiwyQ0FBNkI7O0lBQzdCLGdEQUErQzs7SUFFL0MsZ0RBQXdFOzs7OztJQWV4RSxxREFBK0I7Ozs7O0lBQy9CLGtEQUErQjs7SUFXL0IsK0NBQW9EOztJQU1wRCxvREFBeUQ7O0lBTXpELHFEQUFpQzs7Ozs7SUFDakMsOENBQXdDOzs7OztJQUN4QyxxREFBd0M7Ozs7O0lBQ3hDLDBDQUFvQjs7SUF3QnBCLGdEQUEyQjs7SUFFM0IsNENBQTRCOzs7OztJQUM1QiwwQ0FBc0I7Ozs7O0lBR2xCLDBDQUF5Qjs7Ozs7SUFDekIsc0NBQTZCOztJQUM3QixpREFBbUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgUmVuZGVyZXIyLFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIERvQ2hlY2ssXHJcbiAgICBBZnRlclZpZXdDaGVja2VkLFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEhvc3RCaW5kaW5nLFxyXG4gICAgT3V0cHV0LFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgTmdab25lLFxyXG4gICAgT25EZXN0cm95LFxyXG4gICAgVmlld1JlZlxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBSZXNwb25zZVRvb2xiYXJEcm9wRG93bixcclxuICAgIFJlc3BvbnNlVG9vbGJhckl0ZW0sXHJcbiAgICBSZXNwb25zZVRvb2xiYXJHcm91cCxcclxuICAgIFJlc3BvbnNlVG9vbGJhckNsaWNrRXZlbnRcclxufSBmcm9tIFwiLi4vbW9kZWwvcmVzcG9uc2UtdG9vbGJhci5tb2RlbFwiO1xyXG5pbXBvcnQgeyBGUmVzaXplZERpcmVjdGl2ZSB9IGZyb20gXCIuLi9yZXNpemVkL2YtcmVzaXplZC5kaXJlY3RpdmVcIjtcclxuaW1wb3J0IHsgU3ViamVjdCwgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uLCBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQgeyB0aHJvdHRsZVRpbWUsIGRlYm91bmNlVGltZSB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9jYWxlXCI7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tIFwicmVzaXplLW9ic2VydmVyLXBvbHlmaWxsXCI7XHJcbmltcG9ydCB7IEZEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gXCJAZmFycmlzL3VpLWRyb3Bkb3duXCI7XHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiZi1yZXNwb25zZS10b29sYmFyXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIuL3Jlc3BvbnNlLXRvb2xiYXIuY29tcG9uZW50Lmh0bWxcIixcclxuICAgIHN0eWxlVXJsczogW1wiLi9yZXNwb25zZS10b29sYmFyLmNvbXBvbmVudC5jc3NcIl0sXHJcbiAgIC8vIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBSZXNwb25zZVRvb2xiYXJDb21wb25lbnRcclxuICAgIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBEb0NoZWNrLCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xyXG4gICAgQEhvc3RCaW5kaW5nKFwiY2xhc3MuZi1yZXNwb25zZS10b29sYmFyXCIpIGZydENscyA9IHRydWU7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5wb3NpdGlvbi1yZWxhdGl2ZVwiKSBwckNscyA9IHRydWU7XHJcbiAgICAvLyDlk43lupTlvI/lrrnlmahcclxuICAgIEBWaWV3Q2hpbGQoXCJyZXNpemVkQ29udGFpbmVyXCIpIHJlc2l6ZWRDb250YWluZXJFbDtcclxuICAgIC8vIOi+heWKqeiuoeeul+WuueWZqFxyXG4gICAgQFZpZXdDaGlsZChcImF1eGlsaWFyeUNvbnRhaW5lclwiKSBhdXhpbGlhcnlDb250YWluZXJFbDtcclxuICAgIC8vIOWTjeW6lOW8j+WGheWuueWuueWZqFxyXG4gICAgQFZpZXdDaGlsZChcInJlc2l6ZWRDb250ZW50XCIpIHJlc2l6ZWRDb250ZW50RWw7XHJcbiAgICAvL1xyXG4gICAgQFZpZXdDaGlsZChcInJlc2l6ZWRDb250YWluZXJcIiwgeyByZWFkOiBGUmVzaXplZERpcmVjdGl2ZSB9KVxyXG4gICAgcmVzaXplZENvbnRhaW5lckRpcmVjdGl2ZTogRlJlc2l6ZWREaXJlY3RpdmU7XHJcbiAgICAvLyDkvKDpgJLngrnlh7vkuovku7ZcclxuICAgIEBPdXRwdXQoKVxyXG4gICAgcnRDbGlja0V2ZW50OiBFdmVudEVtaXR0ZXI8UmVzcG9uc2VUb29sYmFyQ2xpY2tFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFxyXG4gICAgICAgIFJlc3BvbnNlVG9vbGJhckNsaWNrRXZlbnRcclxuICAgID4oKTtcclxuICAgIC8vIOi+heWKqeiuoeeul+WuveW6puaVsOaNrlxyXG4gICAgYXV4aWxpYXJ5RGF0YXM6IEFycmF5PFJlc3BvbnNlVG9vbGJhckRyb3BEb3duPiA9IFtdO1xyXG4gICAgLy8g5o6n5Yi254i25YWD57Sg5rua5Yqo55qE5qC35byPXHJcbiAgICAvLyAgcHJpdmF0ZSBfZHBTdGF0ZSA9IGZhbHNlO1xyXG4gICAgLy9cclxuICAgIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICAvLyDorrDlvZXlrrnlmajlrr3luqZcclxuICAgIHByaXZhdGUgY29udGFpbmVyV2lkdGhSZWNvcmQgPSAwO1xyXG4gICAgLy8g6K6w5b2V5Y+Y5YyWXHJcbiAgICBwcml2YXRlIG5lZWRSZXNwb25zZUNoYW5nZXMgPSAwO1xyXG4gICAgcmVmZXJFbCA9IG51bGw7XHJcbiAgICBkcFN0YXRlID0gW2ZhbHNlXTtcclxuICAgIC8vIOeUqOadpeWGhemDqOiusOW9lVxyXG4gICAgcHJpdmF0ZSBfYXV4aWxpYXJ5ID0gLTE7XHJcbiAgICBwcml2YXRlIF9zZWxmRWw6IEhUTUxFbGVtZW50O1xyXG4gICAgcmVzaXplR3JvdXBzOiBBcnJheTxSZXNwb25zZVRvb2xiYXJHcm91cD4gPSBbXTtcclxuICAgIC8vIOiusOW9leagvOW8j+WMluWQjueahOaVsOaNrlxyXG4gICAgdG9vbGJhckRhdGFzOiBBcnJheTxSZXNwb25zZVRvb2xiYXJJdGVtIHwgUmVzcG9uc2VUb29sYmFyRHJvcERvd24+ID0gW107XHJcbiAgICAvLyDlhoXpg6jorrDlvZXmoLzlvI/ljJblkI7nmoTliJ3lp4vmlbDmja4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5pqC5pe25LiN55SoXHJcbiAgICAvLyBfdG9vbGJhckRhdGFzOiBBcnJheTxSZXNwb25zZVRvb2xiYXJJdGVtIHwgUmVzcG9uc2VUb29sYmFyRHJvcERvd24+ID0gW107XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGdyb3Vwcyh2YWx1ZXM6IEFycmF5PFJlc3BvbnNlVG9vbGJhckdyb3VwPikge1xyXG4gICAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVHcm91cHMgPSBbXTtcclxuICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goZ3JvdXAgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVHcm91cHMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgUmVzcG9uc2VUb29sYmFyR3JvdXAoZ3JvdXAuaWQsIGdyb3VwLm5hbWUpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy8g6L+Y5rKh5pyJ6K6h566X6aKE572u5o6S5bqPXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZGlzdGFuY2VUaHJlc2hvbGQgPSAyMDtcclxuICAgIHByaXZhdGUgaXNVcGRhdGVUQlZpZXcgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRhdGFzKHZhbHVlczogQXJyYXk8UmVzcG9uc2VUb29sYmFySXRlbSB8IFJlc3BvbnNlVG9vbGJhckRyb3BEb3duPikge1xyXG4gICAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRGF0YXMgPSB0aGlzLl9mb3JtYXREYXRhKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIHRoaXMubmVlZFJlc3BvbnNlQ2hhbmdlcysrO1xyXG4gICAgICAgICAgICAvLyDlpITnkIbliIbnu4TmlbDmja5cclxuICAgICAgICAgICAgdGhpcy5fcmVPcmdhbml6ZVJlc2l6ZUdyb3VwcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zdGF0ZURhdGFzOiBPYnNlcnZhYmxlPEFycmF5PGFueT4+ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIC8vIOaMiemSrueahOemgeeUqOeKtuaAgVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBidG5TdGF0ZSh2YWx1ZXM6IE9ic2VydmFibGU8QXJyYXk8YW55Pj4pIHtcclxuICAgICAgICB0aGlzLl9zdGF0ZURhdGFzID0gdmFsdWVzO1xyXG4gICAgfVxyXG4gICAgX2J0blZpc2libGVEYXRhczogT2JzZXJ2YWJsZTxBcnJheTxhbnk+PiA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAvLyDmjInpkq7nmoTmn6XnnIvnirbmgIFcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgYnRuVmlzaWJsZSh2YWx1ZXM6IE9ic2VydmFibGU8QXJyYXk8YW55Pj4pIHtcclxuICAgICAgICB0aGlzLl9idG5WaXNpYmxlRGF0YXMgPSB2YWx1ZXM7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBjbGlja1Rocm90dGxlVGltZSA9IDM1MDtcclxuICAgIHByaXZhdGUgY2xpY2tJdGVtcyA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIHByaXZhdGUgY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIHByaXZhdGUgcnRTaXplID0gXCJcIjtcclxuICAgIC8q5bC65a+477ya5pyJc20sbGcs56m65YC877yM6buY6K6k5piv56m65YC8ICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGJ1dHRvblNpemUoYnRuU2l6ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGJ0blNpemUgIT0gdGhpcy5ydFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5ydFNpemUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGZFbCxcclxuICAgICAgICAgICAgICAgICAgICBcImYtcmVzcG9uc2UtdG9vbGJhci1cIiArIHRoaXMucnRTaXplXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnJ0U2l6ZSA9IGJ0blNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucnRTaXplICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxmRWwsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmLXJlc3BvbnNlLXRvb2xiYXItXCIgKyB0aGlzLnJ0U2l6ZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYnV0dG9uU2l6ZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJ0U2l6ZTtcclxuICAgIH1cclxuICAgIC8q5by65Yi25pa55ZCR77yM6buY6K6k5Li656m65YC877yM5Y+v5Lul5pyJdG9w44CBYm90dG9t77yM5pyd5LiK44CB5pyd5LiL44CCXHJcbiAgICAgKiDkvb/nlKjlnLrmma/vvJrlt6XlhbfmoI/lhoXpg6jnmoTkuIvmi4nvvIzpnIDopoHmnJ3kuIrmiJbogIXpnIDopoHmnJ3kuIvlsZXlvIDvvIznu5/kuIDmjqfliLZcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcG9wRGlyZWN0aW9uID0gXCJcIjtcclxuICAgIC8vIHJpZ2h05oyJ6ZKu6Z2g5Y+zIGxlZnTmjInpkq7pnaDlt6ZcclxuICAgIEBJbnB1dCgpIGJ0bkFsaWduID0gXCJyaWdodFwiO1xyXG4gICAgcHJpdmF0ZSBuZ1pvbmUgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMixcclxuICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwdWJsaWMgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZVxyXG4gICAgKSAvLyBwcml2YXRlIG5nWm9uZTogTmdab25lXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fc2VsZkVsID0gZWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBpZiAoZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmZXJFbCA9IGVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDlm6DkuLrml6fmqKHmnb/luKbmnInov5nkuKrmlrnms5VcclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHt9XHJcbiAgICAvLyDlm6DkuLrml6fmqKHmnb/luKbmnInov5nkuKrmlrnms5VcclxuICAgIG5nRG9DaGVjaygpIHt9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICAvLyDljrvmjolvdmVyZmxvd+S5i+WQjlxyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKFxyXG4gICAgICAgICAgICB0aGlzLmF1eGlsaWFyeUNvbnRhaW5lckVsLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgIFwicmVzcG9uc2UtdG9vbGJhci1oaWRkZW4tZWxlbWVudFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyDmjInpkq7nmoTnpoHnlKjnirbmgIFcclxuICAgICAgICB0aGlzLl9zdGF0ZURhdGFzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyDmjInpkq7nmoTlj6/op4HnirbmgIFcclxuICAgICAgICB0aGlzLl9idG5WaXNpYmxlRGF0YXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVZpc2libGUoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckVsZW1lbnQoKTtcclxuICAgICAgICAvL+WkhOeQhuihqOWNleWKoOi9veWQjueahOaMiemSruWPmOWMllxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNlbGZPYmo9dGhpcztcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgc2VsZk9iai5yZXNwb25zZVJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB9LDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOaLpuaIqueCueWHu+S6i+S7tuWPquS8oOmAkuesrOS4gOasoeeCueWHu+S6i+S7tueahOWkhOeQhuaTjeS9nOS6pOe7mXBhcmVudOadpeWkhOeQhlxyXG4gICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24gPSB0aGlzLmNsaWNrSXRlbXNcclxuICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuY2xpY2tUaHJvdHRsZVRpbWUpKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudERhdGFzOiBSZXNwb25zZVRvb2xiYXJDbGlja0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ0Q2xpY2tFdmVudC5lbWl0KGV2ZW50RGF0YXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5wb3BEaXJlY3Rpb24gPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICB0aGlzLnBvcERpcmVjdGlvbiA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJvKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm8udW5vYnNlcnZlKHRoaXMucmVzaXplZENvbnRhaW5lckVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOi/meS4quaWueazleacieaAp+iDvemXrumimO+8jOW+heWQjuacn+WkhOeQhiBUT0RPXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmVlZFJlc3BvbnNlQ2hhbmdlcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmVlZFJlc3BvbnNlQ2hhbmdlcy0tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVJlc2l6ZSgpO1xyXG4gICAgICAgIH1lbHNlIGlmICh0aGlzLmF1eGlsaWFyeURhdGFzLmxlbmd0aD4wKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1eGlsaWFyeUNvbnRhaW5lckVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGhcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWboOS4uuaXp+aooeadv+W4puaciei/meS4quaWueazlVxyXG4gICAgb25SZXNpemUoZXZlbnQpIHt9XHJcbiAgICAvKipcclxuICAgICAqIOWFvOWuueaXp+aooeadv+aXp+aWueazlVxyXG4gICAgICog5Zyo5LiN5a2Y5Zyobmdab25l55qE5oOF5Ya15LiL77yM5Yib5bu6bmdab25lLOeEtuWQjue7keWumuS6i+S7tlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9ic2VydmVyRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZUluamVjdG9yID0gdGhpcy5jZFtcIl92aWV3XCJdLnJvb3QubmdNb2R1bGUuaW5qZWN0b3I7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lID0gbW9kdWxlSW5qZWN0b3IuZ2V0PE5nWm9uZT4oTmdab25lLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBXaWR0aCA9IGVudHJpZXNbMF0uY29udGVudFJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnModGVtcFdpZHRoIC0gdGhpcy5jb250YWluZXJXaWR0aFJlY29yZCkgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlVGhyZXNob2xkXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlUmVzaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aFJlY29yZCA9IHRlbXBXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLnJlc2l6ZWRDb250YWluZXJFbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5by65Yi26L2s5o2i5pa55ZCRXHJcbiAgICAgKiBAcGFyYW0gc2VsZkRlZmluZVBMXHJcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFBMXHJcbiAgICAgKi9cclxuICAgIGdldFBsYWNlbWVudChzZWxmRGVmaW5lUEw6IHN0cmluZywgZGVmYXVsdFBMOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBvbGREaXJlY3Rpb24gPSBzZWxmRGVmaW5lUEwgPyBzZWxmRGVmaW5lUEwgOiBkZWZhdWx0UEw7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBvcERpcmVjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGxSZWxhdGlvbiA9IHsgYm90dG9tOiBcInRvcFwiLCB0b3A6IFwiYm90dG9tXCIgfTtcclxuICAgICAgICBvbGREaXJlY3Rpb24gPSBvbGREaXJlY3Rpb24gPT0gXCJsZWZ0XCIgPyBcImxlZnQtYm90dG9tXCIgOiBvbGREaXJlY3Rpb247XHJcbiAgICAgICAgb2xkRGlyZWN0aW9uID0gb2xkRGlyZWN0aW9uID09IFwicmlnaHRcIiA/IFwicmlnaHQtYm90dG9tXCIgOiBvbGREaXJlY3Rpb247XHJcbiAgICAgICAgbGV0IG5ld0RpcmVjdGlvbiA9IG9sZERpcmVjdGlvbi5yZXBsYWNlKFxyXG4gICAgICAgICAgICBwbFJlbGF0aW9uW3RoaXMucG9wRGlyZWN0aW9uXSxcclxuICAgICAgICAgICAgdGhpcy5wb3BEaXJlY3Rpb25cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBuZXdEaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDosIPnlKjmraTmlrnms5XnmoTlnLrmma9cclxuICAgICAqIDHjgIHnlYzpnaLmi5bmi73oh6rliqjop6blj5FcclxuICAgICAqIDLjgIHmmL7npLrosIPnlKhcclxuICAgICAqL1xyXG4gICAgcmVzcG9uc2VSZXNpemUoKSB7XHJcbiAgICAgICAgY29uc3QgX2Rpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2UoKTtcclxuICAgICAgICBpZiAoX2Rpc3RhbmNlID4gMCkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzliIbnu4Tpg73lt7Lnu4/lpITnkIblrows5YaN5Ye6546w5rua5Yqo5p2h5LiN566hXHJcbiAgICAgICAgICAgIGNvbnN0IF90ZW1wSW5kZXggPSB0aGlzLl9nZXRGaXJzdFVuUmVzcG9uc2VkSW5kZXgoKTtcclxuICAgICAgICAgICAgaWYgKF90ZW1wSW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5omA5pyJ56ys5LiA5bGC5LiL5ouJ6YO95Y+O5oqYXHJcbiAgICAgICAgICAgIHRoaXMuZHBTdGF0ZSA9IFtmYWxzZV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSBfdGVtcEluZGV4OyBrIDwgdGhpcy5yZXNpemVHcm91cHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF90ZW1wR3JvdXAgPSB0aGlzLnJlc2l6ZUdyb3Vwc1trXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F1eGlsaWFyeSA9IGs7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RlbXBHcm91cC5pc1Jlc3BvbnNpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5jmnKrlvIDlp4vlpITnkIblk43lupTlvI9cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdGVtcERQID0gbmV3IFJlc3BvbnNlVG9vbGJhckRyb3BEb3duKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogX3RlbXBHcm91cC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogX3RlbXBHcm91cC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiB0aGlzLnBvcERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBvcERpcmVjdGlvbiArIFwiLWxlZnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJvdHRvbS1sZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfdGVtcEdyb3VwLmdldFdpZHRoKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlt7Lnu4/lpITnkIbov4flrr3luqZcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RlbXBEUC5nZXRXaWR0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXV4aWxpYXJ5RGF0YXMgPSBbX3RlbXBEUF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZSh0cnVlLCBfdGVtcERQLmdldFdpZHRoKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOi+heWKqeaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXV4aWxpYXJ5SW5kZXg9dGhpcy5hdXhpbGlhcnlEYXRhcy5maW5kSW5kZXgoKGl0ZW0pPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZD09X3RlbXBEUC5pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXV4aWxpYXJ5SW5kZXg9PS0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXV4aWxpYXJ5RGF0YXMucHVzaChfdGVtcERQKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNkJiYhKHRoaXMuY2QgYXMgVmlld1JlZikuZGVzdHJveWVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5a+75om+5pyA5ZCO5LiA5Liq5aSE55CG5ZON5bqU5byP55qE5YWD57SgXHJcbiAgICAgICAgICAgIGNvbnN0IF90ZW1wSW5kZXggPSB0aGlzLl9nZXRMYXN0UmVzcG9uc2VJbmRleCgpO1xyXG4gICAgICAgICAgICBpZiAoX3RlbXBJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDkuLTml7blrZjlgqjmlbDmja5cclxuICAgICAgICAgICAgbGV0IF90ZW1wVG9vbGJhckRhdGFzID0gW10uY29uY2F0KHRoaXMudG9vbGJhckRhdGFzKTtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP5byA5aeL5aSE55CG5ZON5bqU5byPXHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSBfdGVtcEluZGV4OyBrID49IDA7IGstLSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcmVzdGl0dXRlKF90ZW1wVG9vbGJhckRhdGFzLCBrKTtcclxuICAgICAgICAgICAgICAgIF90ZW1wVG9vbGJhckRhdGFzID0gW10uY29uY2F0KHJlc3VsdFtcImRhdGFcIl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRbXCJjb250aW51ZVRvXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5pu05paw5pWw5o2uXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRhdGFzID0gW10uY29uY2F0KF90ZW1wVG9vbGJhckRhdGFzKTtcclxuICAgICAgICAgICAgLy8g5omA5pyJ56ys5LiA5bGC5LiL5ouJ6YO95Y+O5oqYXHJcbiAgICAgICAgICAgIHRoaXMuZHBTdGF0ZSA9IFtmYWxzZV07XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDkuIvmi4nnmoTlsZXlvIDmlLbotbfnirbmgIFcclxuICAgIGRwU2VjdGlvblN0YXRlKHN0YXRlOiBib29sZWFuLCBpZCkge1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICAvLyDlsZXlvIDnirbmgIHkuItcclxuICAgICAgICAgICAgbGV0IGRyb3Bkb3ducyA9IHRoaXMucmVzaXplZENvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAgICAgICBcIltmRHJvcGRvd25dXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKGRyb3Bkb3ducyAmJiBkcm9wZG93bnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkcm9wZG93bnMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duc1trXS5jbGFzc05hbWUuaW5kZXhPZihcInNob3dcIikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25zW2tdLmlkICE9IGlkXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRyb3Bkb3duc1trXS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc2VsZkNsb3NlJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBhdGlibGVEaXNwYXRjaEV2ZW50KGRyb3Bkb3duc1trXSwgXCJzZWxmQ2xvc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjb21wYXRpYmxlRGlzcGF0Y2hFdmVudChldmVudEVsLCBldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBFdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50TmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xyXG4gICAgICAgICAgICBldmVudC5pbml0RXZlbnQoZXZlbnROYW1lLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudEVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLy8g5L+u5pS55ZCv55So56aB55So54q25oCBXHJcbiAgICBjaGFuZ2VTdGF0ZSh2YWx1ZXMpIHtcclxuICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgICBpZEFycmF5LmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHZhbHVlc1tpZF07XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9maW5kSXRlbUJ5SUQoaWQsIHRoaXMudG9vbGJhckRhdGFzKTtcclxuICAgICAgICAgICAgaWYoaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgaXRlbVtcImRpc2FibGVkXCJdID0gc3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZih0aGlzLmNkJiYhKHRoaXMuY2QgYXMgVmlld1JlZikuZGVzdHJveWVkKXtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkv67mlLnmmL7npLrnirbmgIFcclxuICAgICAqIOWmguaenOaYr+S4i+aLieaMiemSrlxyXG4gICAgICogICDliKTmlq3kuIvpnaLnmoTlrZDmmK/lkKbpg73pmpDol49cclxuICAgICAqIEBwYXJhbSB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgY2hhbmdlVmlzaWJsZSh2YWx1ZXMpIHtcclxuICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgICBpZEFycmF5LmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gdmFsdWVzW2lkXTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2ZpbmRJdGVtQnlJRChpZCwgdGhpcy50b29sYmFyRGF0YXMpO1xyXG4gICAgICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGl0ZW1bXCJ2aXNpYmxlXCJdID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOmBjeWOhuW+queOryzmm7TmlrDmlbDmja5cclxuICAgICAgICB0aGlzLnRvb2xiYXJEYXRhcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmmK/kuIvmi4lcclxuICAgICAgICAgICAgaWYgKGl0ZW1bXCJpc0RQXCJdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0Ryb3Bkb3duVmlzaWJsZSh2YWx1ZXMsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5uZWVkUmVzcG9uc2VDaGFuZ2VzKys7XHJcbiAgICAgICAgLy8g5pu05pawXHJcbiAgICAgICAvL3RoaXMuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICBpZih0aGlzLmNkJiYhKHRoaXMuY2QgYXMgVmlld1JlZikuZGVzdHJveWVkKXtcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWmguaenOaYr+S4i+aLieaMiemSrlxyXG4gICAgICogICDliKTmlq3kuIvpnaLnmoTlrZDmmK/lkKbpg73pmpDol49cclxuICAgICAqICAgICAgIEEuIOWmguaenOWtkOmDvemakOiXj++8jOmCo+S5iOaVtOS4quS4i+aLiemDveiiq+makOiXj++8m1xyXG4gICAgICogICAgICAgQi4g5aaC5p6c5a2Y5Zyo5a2Q5rKh5pyJ6ZqQ6JeP77yM6ICM5LiU5LiL5ouJ5rKh5pyJ6KKr6aKE572u6ZqQ6JeP77yM5LiL5ouJ5oyJ6ZKu5pi+56S6XHJcbiAgICAgKiBAcGFyYW0gb3V0c2lkZVZpc2libGVBcnJheXMg5LuO57uE5Lu25aSW5Lyg5YWl55qE5Y+v6KeB54q25oCB5a+56LGhXHJcbiAgICAgKiBAcGFyYW0gZHJvcGRvd25JdGVtIOS4i+aLieWFg+e0oFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9jaGVja0Ryb3Bkb3duVmlzaWJsZShvdXRzaWRlVmlzaWJsZUFycmF5cywgZHJvcGRvd25JdGVtKTogdm9pZCB7XHJcbiAgICAgICAgLy/lpoLmnpzmsqHmnInooqvlvLrliLborr7nva7nirbmgIFcclxuICAgICAgICBpZiAoIW91dHNpZGVWaXNpYmxlQXJyYXlzLmhhc093blByb3BlcnR5KGRyb3Bkb3duSXRlbVtcImlkXCJdKSkge1xyXG4gICAgICAgICAgICAvLyDkuIvmi4nlhYPntKDkuI3lj6/op4HvvIzliKTmlq3mmK/lkKbmnInlj6/op4HlrZDlhYPntKBcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgIWRyb3Bkb3duSXRlbVtcInZpc2libGVcIl0gJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc1Zpc2libGVJdGVtKGRyb3Bkb3duSXRlbVtcImNoaWxkcmVuXCJdLCB0cnVlKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duSXRlbVtcInZpc2libGVcIl0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOS4i+aLieWFg+e0oOaYr+WPr+inge+8jOWIpOaWreaYr+WQpuacieWtkOWFg+e0oOmDveS4jeWPr+ingVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bkl0ZW1bXCJ2aXNpYmxlXCJdICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5faGFzVmlzaWJsZUl0ZW0oZHJvcGRvd25JdGVtW1wiY2hpbGRyZW5cIl0sIHRydWUpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25JdGVtW1widmlzaWJsZVwiXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRyb3Bkb3duSXRlbS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbVtcImlzRFBcIl0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrRHJvcGRvd25WaXNpYmxlKG91dHNpZGVWaXNpYmxlQXJyYXlzLCBpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjlvoXmo4Dmn6XmlbDmja7kuK3lv4PvvIzmo4Dmn6XmmK/lkKblrZjlnKjor6Xlj6/op4HnirbmgIHnmoTmlbDmja7jgIJcclxuICAgICAqIOWmguaenOaciei/lOWbnnRydWUs5ZCm5YiZ6L+U5ZueZmFsc2VcclxuICAgICAqIEBwYXJhbSBkYXRhcyDlvoXmo4Dmn6XmlbDmja5cclxuICAgICAqIEBwYXJhbSB2aXNpYmxlIOWPr+ingeeKtuaAgVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9oYXNWaXNpYmxlSXRlbShkYXRhcywgdmlzaWJsZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGZpbmRJbmRleCA9IGRhdGFzLmZpbmRJbmRleChjaGlsZEl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRJdGVtW1widmlzaWJsZVwiXSA9PSB2aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGZpbmRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmjZXojrfngrnlh7tcclxuICAgICAqIEBwYXJhbSBldlxyXG4gICAgICovXHJcbiAgICBjbGlja0l0ZW0oZXY6IE1vdXNlRXZlbnQsIGRkUmVmPzogRkRyb3Bkb3duRGlyZWN0aXZlKSB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgLy8g5aaC5p6c5piv5YiG56a755qE5LiL5ouJ5oyJ6ZKuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxoYXNTcGVjaWFsQ2xzKGV2LnRhcmdldCwgXCJkcm9wZG93bi10b2dnbGUtc3BsaXRcIikpIHtcclxuICAgICAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWIpOaWreaYr+WQpueCueWHu+WIsOmcgOimgeWkhOeQhuS6i+S7tueahOWFg+e0oOS4iizmjInpkq7jgIHkuIvmi4nmjInpkq5cclxuICAgICAgICB2YXIgY2xpY2tFdkVsID0gdGhpcy5maW5kQnRuT3JUb2dnbGVySXRlbUZyb21DbGljayhldi50YXJnZXQpO1xyXG4gICAgICAgIGlmIChjbGlja0V2RWwpIHtcclxuICAgICAgICAgICAgbGV0IHRlbXBJRCA9IGNsaWNrRXZFbFtcImlkXCJdO1xyXG4gICAgICAgICAgICAvLyDkv67mlLnmqKHmnb/vvIxpZOiwg+aVtOWIsOS4i+aLieaVtOS9k+S4ilxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAhdGVtcElEICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsaGFzU3BlY2lhbENscyhjbGlja0V2RWxbXCJwYXJlbnROb2RlXCJdLCBcImYtcnQtZHJvcGRvd25cIilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wSUQgPSBjbGlja0V2RWxbXCJwYXJlbnROb2RlXCJdLmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0ZW1wSUQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBJdGVtID0gdGhpcy5fZmluZEl0ZW1CeUlEKHRlbXBJRCwgdGhpcy50b29sYmFyRGF0YXMpO1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5YWD57Sg56aB55SoXHJcbiAgICAgICAgICAgICAgICBpZiAodGVtcEl0ZW1bXCJkaXNhYmxlZFwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOemgeatouWQkeS4iuS8oOmAklxyXG4gICAgICAgICAgICAgICAgICAgIGV2LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja0l0ZW1zLm5leHQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdGVtcElELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZW1wSXRlbVtcInRleHRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdGVtcEl0ZW1bXCJoaWRkZW5cIl1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRkUmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRkUmVmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBmaW5kQnRuT3JUb2dnbGVySXRlbUZyb21DbGljayhjbGlja1RhcmdldCkge1xyXG4gICAgICAgIC8vIOeItue6p+agh+etvuaYr+WQpuaYr2JvZHks5piv552A5YGc5q2i6L+U5Zue6ZuG5ZCILOWPjeS5i+e7p+e7rVxyXG4gICAgICAgIGlmICh0aGlzLmVsaGFzU3BlY2lhbENscyhjbGlja1RhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNsaWNrVGFyZ2V0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIGNsaWNrVGFyZ2V0LnBhcmVudE5vZGVbXCJjbGFzc05hbWVcIl0mJmNsaWNrVGFyZ2V0LnBhcmVudE5vZGVbXCJjbGFzc05hbWVcIl0uaW5kZXhPZihcImYtcmVzcG9uc2UtY29udGVudFwiKSA8IDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudE4gPSBjbGlja1RhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbGhhc1NwZWNpYWxDbHMocGFyZW50TikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnROO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEJ0bk9yVG9nZ2xlckl0ZW1Gcm9tQ2xpY2socGFyZW50Tik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6L+U5Zue6ZuG5ZCILOe7k+adn1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBlbGhhc1NwZWNpYWxDbHMoZWwsIGNsc05hbWUgPSBcIlwiKSB7XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWVMaXN0ID0gZWwuY2xhc3NMaXN0O1xyXG4gICAgICAgICAgICB2YXIgZmluZENscyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNsYXNzTmFtZUxpc3QubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChjbHNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZUxpc3Rba10gPT0gY2xzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5kQ2xzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZUxpc3Rba10gPT0gXCJmLXJ0LWJ0blwiIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZUxpc3Rba10gPT0gXCJmLXJ0LXRvZ2dsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRDbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZpbmRDbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5Lyg6YCS55qE5pWw5o2u6YeN5paw57uE5bu65YiG57uEXHJcbiAgICAgKiBUb0RvIOaaguaXtuayoeacieabtOWkjeadgueahOWIhue7hO+8jOWQpuWImemcgOimgeiusOW9leWIhue7hFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZU9yZ2FuaXplUmVzaXplR3JvdXBzKCkge1xyXG4gICAgICAgIC8vIOWkhOeQhuWIhue7hOaVsOaNrlxyXG4gICAgICAgIC8vICBpZiAodGhpcy5yZXNpemVHcm91cHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbGV0IG1vcmVUZXh0ID0gXCLmm7TlpJpcIjtcclxuICAgICAgICBpZiAodGhpcy5sb2NhbGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIG1vcmVUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicmVzcG9uc2VUb29sYmFyLm1vcmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRSZXNpemVHcm91cCA9IG5ldyBSZXNwb25zZVRvb2xiYXJHcm91cChcclxuICAgICAgICAgICAgXCJ0b29sYmFyLWdyb3VwLTFcIixcclxuICAgICAgICAgICAgbW9yZVRleHRcclxuICAgICAgICApO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnRvb2xiYXJEYXRhcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBkZWZhdWx0UmVzaXplR3JvdXAuc2V0UHJlc2V0KHRoaXMudG9vbGJhckRhdGFzW2ldW1wiaWRcIl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2l6ZUdyb3VwcyA9IFtdLmNvbmNhdChkZWZhdWx0UmVzaXplR3JvdXApO1xyXG4gICAgICAgLy8gdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgIGlmKHRoaXMuY2QmJiEodGhpcy5jZCBhcyBWaWV3UmVmKS5kZXN0cm95ZWQpe1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhoXlrrnkuI7lrrnlmajnmoTlt67lgLxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0RGlzdGFuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVkQ29udGVudEVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggLVxyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZWRDb250YWluZXJFbC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u6L+U5Zue57uT5p6c5Yik5pat5piv5ZCm57un57utXHJcbiAgICAgKiBAcGFyYW0gZ3JvdXBJbmRleFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZXN0aXR1dGUob3JpZ2luYWxEYXRhLCBncm91cEluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgdGVtcEdyb3VwID0gdGhpcy5yZXNpemVHcm91cHNbZ3JvdXBJbmRleF07XHJcbiAgICAgICAgLy8g5rua5Yqo5p2h5ZKM5YaF5a6555qE6Led56a7XHJcbiAgICAgICAgbGV0IHRlbXBEaXN0YW5jZSA9IHRoaXMuX2dldERpc3RhbmNlKCk7XHJcbiAgICAgICAgLy8g6K6h566X5pyA5ZCO5LiA5Liq5LiL5ouJ55qE5a695bqmXHJcbiAgICAgICAgY29uc3QgdGVtcEdyb3VwRGF0YSA9XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRGF0YVt0aGlzLl9maW5kSW5kZXhCeUlEKG9yaWdpbmFsRGF0YSwgdGVtcEdyb3VwLmlkKV07XHJcbiAgICAgICAgLy8g5om+5Yiw6L+Y5Y6f55qE5L2N572uXHJcbiAgICAgICAgY29uc3QgdGVtcFByZXNldEluZGV4ID0gW10uY29uY2F0KHRlbXBHcm91cC5yZXNwb25zZWRJbmRleCk7XHJcbiAgICAgICAgLy8g5o6S6Zmk5Y6f5LiL5ouJ5a2Q5YWD57Sg6KKr6K6h566XXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IHRlbXBQcmVzZXRJbmRleC5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xyXG4gICAgICAgICAgICBpZiAodGVtcERpc3RhbmNlID49IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOS7juS4i+aLieS4reenu+mZpFxyXG4gICAgICAgICAgICBjb25zdCB0ZW1wQ2hpbGREYXRhID0gdGVtcEdyb3VwRGF0YS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgY29uc3Qgc3BlY2lhbERpc3RhbmNlID0gaiA9PT0gMCA/IHRlbXBHcm91cERhdGEuZ2V0V2lkdGgoKSA6IDA7XHJcblxyXG4gICAgICAgICAgICB0ZW1wRGlzdGFuY2UgPVxyXG4gICAgICAgICAgICAgICAgdGVtcERpc3RhbmNlICtcclxuICAgICAgICAgICAgICAgICh0ZW1wQ2hpbGREYXRhLmdldFdpZHRoKCkgPyB0ZW1wQ2hpbGREYXRhLmdldFdpZHRoKCkgOiAwKSAtXHJcbiAgICAgICAgICAgICAgICBzcGVjaWFsRGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAodGVtcERpc3RhbmNlID49IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8g5pu05paw5LiL5ouJXHJcbiAgICAgICAgICAgICAgICB0ZW1wR3JvdXBEYXRhLnJlbW92ZUNoaWxkKCk7XHJcbiAgICAgICAgICAgICAgICAvLyDmj5LlhaXliLDljp/kvY3nva5cclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRGF0YS5zcGxpY2UodGVtcFByZXNldEluZGV4W2pdLCAwLCB0ZW1wQ2hpbGREYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIOabtOaWsOS9jee9rlxyXG4gICAgICAgICAgICAgICAgdGVtcEdyb3VwLnJlbW92ZVJlc3BvbnNlZChqKTtcclxuICAgICAgICAgICAgICAgIGlmIChqID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxEYXRhLnNwbGljZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZEluZGV4QnlJRChvcmlnaW5hbERhdGEsIHRlbXBHcm91cC5pZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlVG86IHRlbXBEaXN0YW5jZSA+IDAgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgIGRhdGE6IG9yaWdpbmFsRGF0YVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlvIDlp4vorqHnrpdcclxuICAgICAqIEBwYXJhbSBkYXRhc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9jYWxjdWxhdGUoYXV4aWxpYXJ5OiBib29sZWFuID0gZmFsc2UsIHRHcm91cFdpZHRoOiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2F1eGlsaWFyeSA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDorrDlvZXpnIDopoHkv67mlLnnmoTkuIvmi4lcclxuICAgICAgICBsZXQgdGVtcERQO1xyXG4gICAgICAgIC8vIOa7muWKqOadoeWSjOWGheWuueeahOi3neemu1xyXG4gICAgICAgIGxldCB0ZW1wRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZSgpICsgdEdyb3VwV2lkdGg7XHJcbiAgICAgICAgLy8g5Li05pe25a2Y5YKo5pWw5o2uXHJcbiAgICAgICAgY29uc3QgdGVtcFRvb2xiYXJEYXRhcyA9IFtdLmNvbmNhdCh0aGlzLnRvb2xiYXJEYXRhcyk7XHJcbiAgICAgICAgY29uc3QgdGVtcEdyb3VwID0gdGhpcy5yZXNpemVHcm91cHNbdGhpcy5fYXV4aWxpYXJ5XTtcclxuICAgICAgICBpZiAoYXV4aWxpYXJ5KSB7XHJcbiAgICAgICAgICAgIHRlbXBEUCA9IHRoaXMuYXV4aWxpYXJ5RGF0YXMucG9wKCk7XHJcbiAgICAgICAgICAgIHRlbXBEUC5zZXRXaWR0aCh0R3JvdXBXaWR0aCk7XHJcbiAgICAgICAgICAgIHRlbXBHcm91cC5zZXRXaWR0aCh0R3JvdXBXaWR0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGVtcERQID1cclxuICAgICAgICAgICAgICAgIHRlbXBUb29sYmFyRGF0YXNbXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZEluZGV4QnlJRCh0ZW1wVG9vbGJhckRhdGFzLCB0ZW1wR3JvdXAuaWQpXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlvZPliY3liankvZnpmpDol49cclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgaiA9IHRlbXBHcm91cC5yZXNwb25zZWRJbmRleC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGogPCB0ZW1wR3JvdXAucHJlc2V0SWQubGVuZ3RoO1xyXG4gICAgICAgICAgICBqKytcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKHRlbXBEaXN0YW5jZSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g6K6h566X5Zyo5b2T5YmN5pWw5o2u5Lit55qE5L2N572u77yM5qC55o2u6L+Z5Liq5L2N572u5Y+v5Lul5om+5a695bqmXHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBPbGRJbmRleCA9IHRoaXMuX2ZpbmRJbmRleEJ5SUQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJEYXRhcyxcclxuICAgICAgICAgICAgICAgIHRlbXBHcm91cC5wcmVzZXRJZFtqXVxyXG4gICAgICAgICAgICApIGFzIGFueTtcclxuICAgICAgICAgICAgY29uc3QgdGVtcE5ld0luZGV4ID0gdGhpcy5fZmluZEluZGV4QnlJRChcclxuICAgICAgICAgICAgICAgIHRlbXBUb29sYmFyRGF0YXMsXHJcbiAgICAgICAgICAgICAgICB0ZW1wR3JvdXAucHJlc2V0SWRbal1cclxuICAgICAgICAgICAgKSBhcyBhbnk7XHJcblxyXG4gICAgICAgICAgICAvLyDorqHnrpfmjInpkq7lrr3luqZcclxuICAgICAgICAgICAgbGV0IHRlbXBXaWR0aCA9IHRoaXMudG9vbGJhckRhdGFzW3RlbXBPbGRJbmRleF0uZ2V0V2lkdGgoKSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wV2lkdGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIOaMiemSruWuveW6puacquabvuiiq+iuoeeul+i/h1xyXG4gICAgICAgICAgICAgICAgdGVtcFdpZHRoID0gdGhpcy5fZ2V0V2lkdGhGcm9tRWxlbWVudHNCeUlkKFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBHcm91cC5wcmVzZXRJZFtqXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRlbXBUb29sYmFyRGF0YXNbdGVtcE5ld0luZGV4XS5zZXRXaWR0aCh0ZW1wV2lkdGgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRlbXBXaWR0aCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIOaMiemSruiiq+makOiXj1xyXG4gICAgICAgICAgICAgICAgdGVtcFdpZHRoID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGVtcERQLmFkZENoaWxkKHRlbXBUb29sYmFyRGF0YXNbdGVtcE5ld0luZGV4XSk7XHJcbiAgICAgICAgICAgIC8vIOenu+mZpFxyXG4gICAgICAgICAgICB0ZW1wVG9vbGJhckRhdGFzLnNwbGljZSh0ZW1wTmV3SW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAvLyDkv53lrZjkvY3nva7nlKjkuo7ov5jljp9cclxuICAgICAgICAgICAgdGVtcEdyb3VwLnNldFJlc3BvbnNlZCh0ZW1wTmV3SW5kZXgpO1xyXG4gICAgICAgICAgICB0ZW1wRGlzdGFuY2UgPSB0ZW1wRGlzdGFuY2UgLSB0ZW1wV2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdXhpbGlhcnkgJiYgdGVtcERQLmhhc0NoaWxkKCkpIHtcclxuICAgICAgICAgICAgLy8g5o+S5YWlXHJcbiAgICAgICAgICAgIHRlbXBUb29sYmFyRGF0YXMucHVzaCh0ZW1wRFApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hdXhpbGlhcnkgPSAtMTtcclxuICAgICAgICB0aGlzLnRvb2xiYXJEYXRhcyA9IFtdLmNvbmNhdCh0ZW1wVG9vbGJhckRhdGFzKTtcclxuICAgICAgICBpZih0aGlzLmNkJiYhKHRoaXMuY2QgYXMgVmlld1JlZikuZGVzdHJveWVkKXtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2uaWTmib7liLDlrp7pmYXmmL7npLrlhYPntKDnmoTlrr3luqZcclxuICAgICAqIEBwYXJhbSBmaW5kSWRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0V2lkdGhGcm9tRWxlbWVudHNCeUlkKGZpbmRJZCk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLnJlc2l6ZWRDb250ZW50RWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBjb25zdCBjaGlsZExlbiA9IHBhcmVudEVsLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNoaWxkTGVuOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKHBhcmVudEVsLmNoaWxkcmVuW2tdLmlkID09PSBmaW5kSWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaW5kRWw9cGFyZW50RWwuY2hpbGRyZW5ba107XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2V0Q29tcHV0ZWRTdHlsZUVsPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZpbmRFbCxudWxsKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZpbmRFbC5vZmZzZXRXaWR0aCtwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGVFbC5tYXJnaW5MZWZ0KStwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGVFbC5tYXJnaW5SaWdodCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLzlvI/ljJbmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZm9ybWF0RGF0YShkYXRhcywgaWRQcmVmaXg6IHN0cmluZyA9IFwicmVzcG9uc2VcIikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGRhdGFzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzRFApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+S4i+aLiVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uaGFzT3duUHJvcGVydHkoXCJjaGlsZHJlblwiKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bXCJjaGlsZHJlblwiXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW10uY29uY2F0KGl0ZW1bXCJjaGlsZHJlblwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRlbS5jaGlsZHJlbiA9IFtdOyAvLyDlupRnenHopoHmsYIyMDIzMDUyOVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRwSXRlbSA9IG5ldyBSZXNwb25zZVRvb2xiYXJEcm9wRG93bihcclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7IGlkOiBpZFByZWZpeCArIFwiX1wiICsgaW5kZXggfSwgaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRwSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHBJdGVtLmNoaWxkcmVuID0gdGhpcy5fZm9ybWF0RGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUHJlZml4ICsgXCJfXCIgKyBpbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVzcG9uc2VUb29sYmFyRHJvcERvd24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHsgaWQ6IGlkUHJlZml4ICsgXCJfXCIgKyBpbmRleCB9LCBpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOmdnuS4i+aLiVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3BvbnNlVG9vbGJhckl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oeyBpZDogaWRQcmVmaXggKyBcIl9cIiArIGluZGV4IH0sIGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmib7liLDnrKzkuIDkuKrmnKrlpITnkIblrozlk43lupTlvI/nmoTlhYPntKBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0Rmlyc3RVblJlc3BvbnNlZEluZGV4KCkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBVblJlc3BvbnNlZEluZGV4ID0gdGhpcy5yZXNpemVHcm91cHMuZmluZEluZGV4KGdyb3VwID0+IHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLmlzUmVzcG9uc2VkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGVtcFVuUmVzcG9uc2VkSW5kZXg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWvu+aJvuacgOWQjuS4gOS4quWkhOeQhuWTjeW6lOW8j+eahOWFg+e0oFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9nZXRMYXN0UmVzcG9uc2VJbmRleCgpIHtcclxuICAgICAgICBjb25zdCB0ZW1wUmVzcG9uc2luZ0luZGV4ID0gdGhpcy5yZXNpemVHcm91cHMuZmluZEluZGV4KGdyb3VwID0+IHtcclxuICAgICAgICAgICAgaWYgKCFncm91cC5pc1Jlc3BvbnNpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOaJgOaciee7hOWFg+e0oOmDveW3suWkhOeQhuWujOWTjeW6lOW8j1xyXG4gICAgICAgIGlmICh0ZW1wUmVzcG9uc2luZ0luZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNpemVHcm91cHMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5omA5pyJ57uE5YWD57Sg6YO95pyq5byA5aeL5aSE55CG5ZON5bqU5byPXHJcbiAgICAgICAgcmV0dXJuIHRlbXBSZXNwb25zaW5nSW5kZXggPiAxID8gdGVtcFJlc3BvbnNpbmdJbmRleCAtIDEgOiAtMTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5om+5YiwZ3JvdXDlvaLmiJDnmoTkuIvmi4nvvIzlnKjmlbDmja7kuK3nmoTkvY3nva5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZmluZEluZGV4QnlJRChcclxuICAgICAgICBkYXRhczogQXJyYXk8UmVzcG9uc2VUb29sYmFySXRlbSB8IFJlc3BvbnNlVG9vbGJhckRyb3BEb3duPixcclxuICAgICAgICBpZDogc3RyaW5nXHJcbiAgICApOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRhdGFzLmZpbmRJbmRleCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1bXCJpZFwiXSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5JROWvu+aJvkl0ZW1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZmluZEl0ZW1CeUlEKFxyXG4gICAgICAgIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogQXJyYXk8UmVzcG9uc2VUb29sYmFyRHJvcERvd24gfCBSZXNwb25zZVRvb2xiYXJJdGVtPlxyXG4gICAgKTogUmVzcG9uc2VUb29sYmFyRHJvcERvd24gfCBSZXNwb25zZVRvb2xiYXJJdGVtIHtcclxuICAgICAgICBsZXQgdGVtcFJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgdGVtcEluZGV4ID0gZGF0YS5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtW1wiaWRcIl0gPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUmVzdWx0ID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+S4i+aLie+8jOWxgue6p+S4i+aLiVxyXG4gICAgICAgICAgICBpZiAoaXRlbVtcImlzRFBcIl0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBJdGVtID0gdGhpcy5fZmluZEl0ZW1CeUlEKGlkLCBpdGVtW1wiY2hpbGRyZW5cIl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFJlc3VsdCA9IHRlbXBJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGVtcFJlc3VsdDtcclxuICAgIH1cclxufVxyXG4iXX0=