{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-response-toolbar/lib/model/response-toolbar.model.ts","ng://@farris/ui-response-toolbar/lib/resized/f-resized.events.ts","ng://@farris/ui-response-toolbar/lib/resized/f-resized.directive.ts","ng://@farris/ui-response-toolbar/lib/component/response-toolbar.component.ts","ng://@farris/ui-response-toolbar/lib/response-toolbar.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","ResponseToolbarBasic","setWidth","value","width","parseInt","getWidth","visible","item","_this","defaultData","id","class","icon","groupId","order","asDropDownTop","text","isDP","disabled","responsed","tipsEnable","tipsText","keys","forEach","propName","tslib_1.__extends","ResponseToolbarItem","_super","call","event","ResponseToolbarDropDown","hasChild","children","length","addChild","unshift","removeChild","shift","topItem","dropdownCls","menuCls","placement","split","ResponseToolbarGroup","setPreset","isArray","presetId","concat","push","delPreset","removeResponsed","index","responsedIndex","splice","setResponsed","isResponsing","isResponsed","_id","_groupName","name","ResizedEvent","element","newWidth","newHeight","oldWidth","oldHeight","FResizedDirective","onResize","resizeSubject","next","ngOnInit","resizeObservable","subscribe","x","doWithResize","ngAfterViewInit","nativeElement","clientWidth","clientHeight","resizedEvent","Directive","args","selector","ElementRef","Output","HostListener","EventEmitter","Subject","asObservable","pipe","throttleTime","ResponseToolbarComponent","defineProperty","values","resizeGroups","group","toolbarDatas","_formatData","needResponseChanges","_reOrganizeResizeGroups","_stateDatas","_btnVisibleDatas","rtSize","btnSize","render","removeClass","_selfEl","addClass","ngDoCheck","auxiliaryContainerEl","data","changeState","changeVisible","observerElement","ngZone","runOutsideAngular","selfObj","setTimeout","responseResize","clickSubscription","clickItems","debounceTime","clickThrottleTime","eventDatas","rtClickEvent","emit","popDirection","ngOnDestroy","ro","unobserve","resizedContainerEl","unsubscribe","ngAfterViewChecked","auxiliaryDatas","_calculate","offsetWidth","moduleInjector","cd","root","ngModule","injector","get","NgZone","ResizeObserver","entries","observer","tempWidth","contentRect","Math","abs","containerWidthRecord","distanceThreshold","observe","getPlacement","selfDefinePL","defaultPL","oldDirection","replace","bottom","top","_getDistance","_tempIndex","_getFirstUnResponsedIndex","dpState","k","_tempGroup","this_1","_auxiliary","_tempDP_1","findIndex","destroyed","detectChanges","_getLastResponseIndex","_tempToolbarDatas","result","_restitute","dpSectionState","state","dropdowns","resizedContentEl","querySelectorAll","className","indexOf","compatibleDispatchEvent","eventEl","eventName","Event","document","createEvent","initEvent","dispatchEvent","_findItemByID","_checkDropdownVisible","outsideVisibleArrays","dropdownItem","_hasVisibleItem","datas","childItem","clickItem","ev","ddRef","stopPropagation","elhasSpecialCls","target","stopImmediatePropagation","clickEvEl","findBtnOrTogglerItemFromClick","tempID","tempItem","hidden","close","clickTarget","parentNode","parentN","el","clsName","classNameList","classList","findCls","moreText","localeService","getValue","defaultResizeGroup","i","originalData","groupIndex","tempGroup","tempDistance","tempGroupData","_findIndexByID","tempPresetIndex","j","tempChildData","specialDistance","continueTo","auxiliary","tGroupWidth","tempDP","tempToolbarDatas","pop","tempOldIndex","tempNewIndex","_getWidthFromElementsById","findId","parentEl","childLen","findEl","getComputedStyleEl","window","getComputedStyle","parseFloat","marginLeft","marginRight","idPrefix","dpItem","assign","tempResponsingIndex","tempResult","Component","template","Renderer2","ChangeDetectorRef","LocaleService","HostBinding","ViewChild","read","Input","frtCls","prCls","referEl","isUpdateTBView","btnAlign","parentElement","FResponseToolbarModule","NgModule","imports","CommonModule","FDropdownDirectiveTypeModule","FarrisTooltipModule","LocaleModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class ResponseToolbarBasic {\r\n    id?: string; // æ è®°\r\n    class?: string; // class\r\n    icon?: string; // å¾æ å\r\n    groupId?: string; // æå±çç»,åªæä¸å±åæ\r\n    order?: number; // æ¶èé¡ºåº\r\n    asDropDownTop?: boolean; // æ¯å¦ä½ä¸ºä¸æèåçé¡¶å±æé®\r\n    text: string; // ææ¬\r\n    isDP: boolean;\r\n    disabled: boolean;//æ¯å¦ç¦ç¨\r\n    visible: boolean;//æ¯å¦å¯è§\r\n    responsed: boolean;    \r\n    tipsEnable?:boolean;//æ¯å¦å¯ç¨æç¤ºæ¶æ¯\r\n    tipsText?:string;//æç¤ºæ¶æ¯åå®¹\r\n    width: Number; // è®°å½å®½åº¦\r\n    constructor(item: any) {\r\n        const defaultData = {\r\n            id: '',\r\n            class: 'btn-secondary',\r\n            icon: '',\r\n            groupId: '',\r\n            order: -1,\r\n            asDropDownTop: false,\r\n            text: '',\r\n            isDP: false,\r\n            disabled: false,\r\n            visible: true,\r\n            responsed: false,\r\n            width: 0,\r\n            tipsEnable:false,\r\n            tipsText:''\r\n        };\r\n        Object.keys(defaultData).forEach(propName => {\r\n            this[propName] = item.hasOwnProperty(propName)\r\n                ? item[propName]\r\n                : defaultData[propName];\r\n        });\r\n    }\r\n    // è®¾ç½®å®½åº¦\r\n    setWidth(value: string) {\r\n        this.width = parseInt(value, 10);\r\n    }\r\n    // è·åå®½åº¦\r\n    getWidth(): any {\r\n        if(this.visible){\r\n            return this.width;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class ResponseToolbarItem extends ResponseToolbarBasic {\r\n    event: Function | null; // ç¹å»äºä»¶\r\n    constructor(item: any) {\r\n        super(item);\r\n        const defaultData = {\r\n            text: '',\r\n            event: null,\r\n            isDP: false\r\n        };\r\n        Object.keys(defaultData).forEach(propName => {\r\n            this[propName] = item.hasOwnProperty(propName)\r\n                ? item[propName]\r\n                : defaultData[propName];\r\n        });\r\n    }\r\n    // // è®¾ç½®å®½åº¦\r\n    // setWidth(value: string) {\r\n    //   this.width = parseInt(value, 10);\r\n    // }\r\n    // // è·åå®½åº¦\r\n    // getWidth() {\r\n    //   return this.width;\r\n    // }\r\n}\r\n\r\nexport class ResponseToolbarDropDown extends ResponseToolbarBasic {\r\n    placement?: string; // ä¸æä½ç½®\r\n    topItem?: ResponseToolbarItem | null;\r\n    dropdownCls: string; // ä¸æclass\r\n    menuCls: string; // ä¸æèåclass\r\n    split: boolean; // æ¯å¦ç¨åå¼çä¸ææé®\r\n    children: Array<ResponseToolbarItem | ResponseToolbarDropDown>;\r\n    constructor(item) {\r\n        super(item);\r\n        const defaultData = {\r\n            topItem: null,\r\n            isDP: true,\r\n            children: [],\r\n            class: 'btn-secondary',\r\n            dropdownCls: '',\r\n            menuCls: '',\r\n            placement: '',\r\n            split: false\r\n        };\r\n\r\n        Object.keys(defaultData).forEach(propName => {\r\n            this[propName] = item.hasOwnProperty(propName)\r\n                ? item[propName]\r\n                : defaultData[propName];\r\n        });\r\n    }\r\n    /**\r\n     * æ¯å¦æå­é¡¹\r\n     */\r\n    hasChild(): boolean {\r\n        return this.children.length > 0 ? true : false;\r\n    }\r\n    /**\r\n     * è¿½å å­é¡¹,é»è®¤ä»å¼å¤´æå¥\r\n     * @param item\r\n     */\r\n    addChild(item) {\r\n        this.children.unshift(item);\r\n    }\r\n    // ä»å¤´é¨å¼å§å é¤å­åç´ \r\n    removeChild(){\r\n        this.children.shift();\r\n    }\r\n    // // è®¾ç½®å®½åº¦\r\n    // setWidth(value: string) {\r\n    //   this.width = parseInt(value, 10);\r\n    // }\r\n    // // è·åå®½åº¦\r\n    // getWidth(): any {\r\n    //   return this.width;\r\n    // }\r\n}\r\n\r\nexport class ResponseToolbarGroup {\r\n    id: string;\r\n    name: string;\r\n    presetId: Array<string> = []; // è®°å½åç´ çId\r\n    responsedIndex: Array<Number> = []; // è®°å½è½¬åä¸ºä¸ææ¶åç´ çä½ç½®\r\n    width: number; // è®°å½å®½åº¦\r\n    constructor(_id: string, _groupName: string) {\r\n        this.id = _id;\r\n        this.name = _groupName;\r\n        this.width = 0;\r\n    }\r\n    // è®¾ç½®å®½åº¦\r\n    setWidth(value: any) {\r\n        this.width = parseInt(value + '', 10);\r\n    }\r\n    // è·åå®½åº¦\r\n    getWidth(): any {\r\n        return this.width;\r\n    }\r\n    // æ´æ°presetIndex\r\n    setPreset(value: Array<string> | string) {\r\n        if (Array.isArray(value)) {\r\n            this.presetId = this.presetId.concat(value);\r\n        } else {\r\n            this.presetId.push(value);\r\n        }\r\n    }\r\n    // æ¸é¤preset\r\n    delPreset(){\r\n        this.presetId=[];\r\n    }\r\n    // å é¤\r\n    removeResponsed(index) {\r\n        this.responsedIndex.splice(index, 1);\r\n    }\r\n    // æ´æ°responsedIndex\r\n    setResponsed(value: Array<Number> | Number) {\r\n        if (Array.isArray(value)) {\r\n            this.responsedIndex = this.responsedIndex.concat(value);\r\n        } else {\r\n            this.responsedIndex.push(value);\r\n        }\r\n    }\r\n    // æ¯å¦å·²ç»å¼å§å¤çååºå¼\r\n    isResponsing() {\r\n        return this.responsedIndex.length > 0;\r\n    }\r\n    // æ¯å¦å·²ç»å¤çå®ååºå¼\r\n    isResponsed() {\r\n        return this.presetId.length === this.responsedIndex.length;\r\n    }\r\n}\r\n\r\nexport interface ResponseToolbarClickEvent {\r\n    id: string; // åç´ id\r\n    text: string;\r\n    hidden: boolean;\r\n}\r\n","import { ElementRef } from '@angular/core';\r\n\r\nexport class ResizedEvent {\r\n  constructor(\r\n    readonly element: ElementRef,\r\n    readonly newWidth: number,\r\n    readonly newHeight: number,\r\n    readonly oldWidth: number,\r\n    readonly oldHeight: number\r\n  ) {}\r\n}\r\n","import {\r\n  Directive,\r\n  Output,\r\n  EventEmitter,\r\n  ElementRef,\r\n  OnInit,\r\n  HostListener,\r\n  AfterViewInit\r\n} from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { ResizedEvent } from './f-resized.events';\r\n\r\n@Directive({\r\n  selector: '[fResized]'\r\n})\r\nexport class FResizedDirective implements OnInit, AfterViewInit {\r\n  @Output() readonly resizedEvent = new EventEmitter<ResizedEvent>();\r\n  private oldWidth: number;\r\n  private oldHeight: number;\r\n  private resizeSubject = new Subject<number>();\r\n  private resizeObservable = this.resizeSubject\r\n    .asObservable()\r\n    .pipe(throttleTime(200));\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    this.resizeSubject.next(event);\r\n  }\r\n  constructor(private readonly element: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    this.resizeObservable.subscribe(x => this.doWithResize());\r\n  }\r\n  ngAfterViewInit() {\r\n    this.doWithResize();\r\n  }\r\n\r\n  private doWithResize() {\r\n    const newWidth = this.element.nativeElement.clientWidth;\r\n    const newHeight = this.element.nativeElement.clientHeight;\r\n\r\n    if (newWidth === this.oldWidth && newHeight === this.oldHeight) {\r\n      return;\r\n    }\r\n    this.resizedEvent.next(\r\n      new ResizedEvent(\r\n        this.element,\r\n        newWidth,\r\n        newHeight,\r\n        this.oldWidth,\r\n        this.oldHeight\r\n      )\r\n    );\r\n\r\n    this.oldWidth = newWidth;\r\n    this.oldHeight = newHeight;\r\n  }\r\n}\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    ViewChild,\r\n    ElementRef,\r\n    Renderer2,\r\n    AfterViewInit,\r\n    DoCheck,\r\n    AfterViewChecked,\r\n    ChangeDetectionStrategy,\r\n    ChangeDetectorRef,\r\n    HostBinding,\r\n    Output,\r\n    EventEmitter,\r\n    NgZone,\r\n    OnDestroy,\r\n    ViewRef\r\n} from \"@angular/core\";\r\nimport {\r\n    ResponseToolbarDropDown,\r\n    ResponseToolbarItem,\r\n    ResponseToolbarGroup,\r\n    ResponseToolbarClickEvent\r\n} from \"../model/response-toolbar.model\";\r\nimport { FResizedDirective } from \"../resized/f-resized.directive\";\r\nimport { Subject, Observable, Subscription, BehaviorSubject } from \"rxjs\";\r\nimport { throttleTime, debounceTime } from \"rxjs/operators\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\nimport { FDropdownDirective } from \"@farris/ui-dropdown\";\r\n@Component({\r\n    selector: \"f-response-toolbar\",\r\n    templateUrl: \"./response-toolbar.component.html\",\r\n    styleUrls: [\"./response-toolbar.component.css\"],\r\n   // changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ResponseToolbarComponent\r\n    implements OnInit, AfterViewInit, DoCheck, AfterViewChecked, OnDestroy {\r\n    @HostBinding(\"class.f-response-toolbar\") frtCls = true;\r\n    @HostBinding(\"class.position-relative\") prCls = true;\r\n    // ååºå¼å®¹å¨\r\n    @ViewChild(\"resizedContainer\") resizedContainerEl;\r\n    // è¾å©è®¡ç®å®¹å¨\r\n    @ViewChild(\"auxiliaryContainer\") auxiliaryContainerEl;\r\n    // ååºå¼åå®¹å®¹å¨\r\n    @ViewChild(\"resizedContent\") resizedContentEl;\r\n    //\r\n    @ViewChild(\"resizedContainer\", { read: FResizedDirective })\r\n    resizedContainerDirective: FResizedDirective;\r\n    // ä¼ éç¹å»äºä»¶\r\n    @Output()\r\n    rtClickEvent: EventEmitter<ResponseToolbarClickEvent> = new EventEmitter<\r\n        ResponseToolbarClickEvent\r\n    >();\r\n    // è¾å©è®¡ç®å®½åº¦æ°æ®\r\n    auxiliaryDatas: Array<ResponseToolbarDropDown> = [];\r\n    // æ§å¶ç¶åç´ æ»å¨çæ ·å¼\r\n    //  private _dpState = false;\r\n    //\r\n    private ro: ResizeObserver | null = null;\r\n    // è®°å½å®¹å¨å®½åº¦\r\n    private containerWidthRecord = 0;\r\n    // è®°å½åå\r\n    private needResponseChanges = 0;\r\n    referEl = null;\r\n    dpState = [false];\r\n    // ç¨æ¥åé¨è®°å½\r\n    private _auxiliary = -1;\r\n    private _selfEl: HTMLElement;\r\n    resizeGroups: Array<ResponseToolbarGroup> = [];\r\n    // è®°å½æ ¼å¼ååçæ°æ®\r\n    toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];\r\n    // åé¨è®°å½æ ¼å¼ååçåå§æ°æ®-------------------------ææ¶ä¸ç¨\r\n    // _toolbarDatas: Array<ResponseToolbarItem | ResponseToolbarDropDown> = [];\r\n    @Input()\r\n    set groups(values: Array<ResponseToolbarGroup>) {\r\n        if (values) {\r\n            this.resizeGroups = [];\r\n            values.forEach(group => {\r\n                this.resizeGroups.push(\r\n                    new ResponseToolbarGroup(group.id, group.name)\r\n                );\r\n                // è¿æ²¡æè®¡ç®é¢ç½®æåº\r\n            });\r\n        }\r\n    }\r\n    private distanceThreshold = 20;\r\n    private isUpdateTBView = false;\r\n\r\n    @Input()\r\n    set datas(values: Array<ResponseToolbarItem | ResponseToolbarDropDown>) {\r\n        if (values) {\r\n            this.toolbarDatas = this._formatData(values);\r\n            this.needResponseChanges++;\r\n            // å¤çåç»æ°æ®\r\n            this._reOrganizeResizeGroups();\r\n        }\r\n    }\r\n    _stateDatas: Observable<Array<any>> = new Subject();\r\n    // æé®çç¦ç¨ç¶æ\r\n    @Input()\r\n    set btnState(values: Observable<Array<any>>) {\r\n        this._stateDatas = values;\r\n    }\r\n    _btnVisibleDatas: Observable<Array<any>> = new Subject();\r\n    // æé®çæ¥çç¶æ\r\n    @Input()\r\n    set btnVisible(values: Observable<Array<any>>) {\r\n        this._btnVisibleDatas = values;\r\n    }\r\n    @Input() clickThrottleTime = 350;\r\n    private clickItems = new Subject<any>();\r\n    private clickSubscription: Subscription;\r\n    private rtSize = \"\";\r\n    /*å°ºå¯¸ï¼æsm,lg,ç©ºå¼ï¼é»è®¤æ¯ç©ºå¼ */\r\n    @Input()\r\n    set buttonSize(btnSize: string) {\r\n        if (btnSize != this.rtSize) {\r\n            this.rtSize &&\r\n                this.render.removeClass(\r\n                    this._selfEl,\r\n                    \"f-response-toolbar-\" + this.rtSize\r\n                );\r\n            this.rtSize = btnSize;\r\n            this.rtSize &&\r\n                this.render.addClass(\r\n                    this._selfEl,\r\n                    \"f-response-toolbar-\" + this.rtSize\r\n                );\r\n        }\r\n    }\r\n    get buttonSize(): string {\r\n        return this.rtSize;\r\n    }\r\n    /*å¼ºå¶æ¹åï¼é»è®¤ä¸ºç©ºå¼ï¼å¯ä»¥ætopãbottomï¼æä¸ãæä¸ã\r\n     * ä½¿ç¨åºæ¯ï¼å·¥å·æ åé¨çä¸æï¼éè¦æä¸æèéè¦æä¸å±å¼ï¼ç»ä¸æ§å¶\r\n     */\r\n    @Input() popDirection = \"\";\r\n    // rightæé®é å³ leftæé®é å·¦\r\n    @Input() btnAlign = \"right\";\r\n    private ngZone = null;\r\n    constructor(\r\n        el: ElementRef,\r\n        private render: Renderer2,\r\n        private cd: ChangeDetectorRef,\r\n        public localeService: LocaleService\r\n    ) // private ngZone: NgZone\r\n    {\r\n        this._selfEl = el.nativeElement;\r\n        if (el.nativeElement.parentElement) {\r\n            this.referEl = el.nativeElement.parentElement;\r\n        }\r\n    }\r\n    // å ä¸ºæ§æ¨¡æ¿å¸¦æè¿ä¸ªæ¹æ³\r\n    ngAfterViewInit() {}\r\n    // å ä¸ºæ§æ¨¡æ¿å¸¦æè¿ä¸ªæ¹æ³\r\n    ngDoCheck() {}\r\n    ngOnInit() {\r\n        // å»æoverflowä¹å\r\n        this.render.addClass(\r\n            this.auxiliaryContainerEl.nativeElement,\r\n            \"response-toolbar-hidden-element\"\r\n        );\r\n        // æé®çç¦ç¨ç¶æ\r\n        this._stateDatas.subscribe(data => {\r\n            this.changeState(data);\r\n        });\r\n        // æé®çå¯è§ç¶æ\r\n        this._btnVisibleDatas.subscribe(data => {\r\n            this.changeVisible(data);\r\n        });\r\n        this.observerElement();\r\n        //å¤çè¡¨åå è½½åçæé®åå\r\n        this.ngZone.runOutsideAngular(() => {\r\n            let selfObj=this;\r\n            setTimeout(()=>{\r\n                selfObj.responseResize();\r\n            },0);\r\n        });\r\n        // æ¦æªç¹å»äºä»¶åªä¼ éç¬¬ä¸æ¬¡ç¹å»äºä»¶çå¤çæä½äº¤ç»parentæ¥å¤ç\r\n        this.clickSubscription = this.clickItems\r\n            .pipe(debounceTime(this.clickThrottleTime))\r\n            .subscribe((eventDatas: ResponseToolbarClickEvent) => {\r\n                this.rtClickEvent.emit(eventDatas);\r\n            });\r\n        \r\n        if (this.popDirection === 'default') {\r\n            this.popDirection = '';\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.ro) {\r\n            this.ro.unobserve(this.resizedContainerEl.nativeElement);\r\n            this.ro = null;\r\n        }\r\n        if (this.clickSubscription) {\r\n            this.clickSubscription.unsubscribe();\r\n        }\r\n    }\r\n    // è¿ä¸ªæ¹æ³ææ§è½é®é¢ï¼å¾åæå¤ç TODO\r\n    ngAfterViewChecked() {\r\n        if (this.needResponseChanges > 0) {\r\n                this.needResponseChanges--;\r\n                this.responseResize();\r\n        }else if (this.auxiliaryDatas.length>0) {\r\n                this._calculate(\r\n                    true,\r\n                    this.auxiliaryContainerEl.nativeElement.offsetWidth\r\n                );\r\n            }\r\n    }\r\n    // å ä¸ºæ§æ¨¡æ¿å¸¦æè¿ä¸ªæ¹æ³\r\n    onResize(event) {}\r\n    /**\r\n     * å¼å®¹æ§æ¨¡æ¿æ§æ¹æ³\r\n     * å¨ä¸å­å¨ngZoneçæåµä¸ï¼åå»ºngZone,ç¶åç»å®äºä»¶\r\n     */\r\n    private observerElement() {\r\n        if (!this.ngZone) {\r\n            const moduleInjector = this.cd[\"_view\"].root.ngModule.injector;\r\n            this.ngZone = moduleInjector.get<NgZone>(NgZone, null);\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.ro = new ResizeObserver((entries, observer) => {\r\n                const tempWidth = entries[0].contentRect.width;\r\n                if (\r\n                    Math.abs(tempWidth - this.containerWidthRecord) >\r\n                        this.distanceThreshold\r\n                ) {\r\n                    this.responseResize();\r\n                    this.containerWidthRecord = tempWidth;\r\n                }\r\n            });\r\n            this.ro.observe(this.resizedContainerEl.nativeElement);\r\n        });\r\n    }\r\n    /**\r\n     * å¼ºå¶è½¬æ¢æ¹å\r\n     * @param selfDefinePL\r\n     * @param defaultPL\r\n     */\r\n    getPlacement(selfDefinePL: string, defaultPL: string): string {\r\n        let oldDirection = selfDefinePL ? selfDefinePL : defaultPL;\r\n        if (!this.popDirection) {\r\n            return oldDirection;\r\n        }\r\n        var plRelation = { bottom: \"top\", top: \"bottom\" };\r\n        oldDirection = oldDirection == \"left\" ? \"left-bottom\" : oldDirection;\r\n        oldDirection = oldDirection == \"right\" ? \"right-bottom\" : oldDirection;\r\n        let newDirection = oldDirection.replace(\r\n            plRelation[this.popDirection],\r\n            this.popDirection\r\n        );\r\n        return newDirection;\r\n    }\r\n\r\n    /**\r\n     * è°ç¨æ­¤æ¹æ³çåºæ¯\r\n     * 1ãçé¢ææ½èªå¨è§¦å\r\n     * 2ãæ¾ç¤ºè°ç¨\r\n     */\r\n    responseResize() {\r\n        const _distance = this._getDistance();\r\n        if (_distance > 0) {\r\n            // å¦æåç»é½å·²ç»å¤çå®,ååºç°æ»å¨æ¡ä¸ç®¡\r\n            const _tempIndex = this._getFirstUnResponsedIndex();\r\n            if (_tempIndex < 0) {\r\n                return;\r\n            }\r\n            // ææç¬¬ä¸å±ä¸æé½åæ\r\n            this.dpState = [false];\r\n            for (let k = _tempIndex; k < this.resizeGroups.length; k++) {\r\n                const _tempGroup = this.resizeGroups[k];\r\n                this._auxiliary = k;\r\n                if (_tempGroup.isResponsing()) {\r\n                    this._calculate();\r\n                } else {\r\n                    // å¦æè¿æªå¼å§å¤çååºå¼\r\n                    const _tempDP = new ResponseToolbarDropDown({\r\n                        text: _tempGroup.name,\r\n                        id: _tempGroup.id,\r\n                        placement: this.popDirection\r\n                            ? this.popDirection + \"-left\"\r\n                            : \"bottom-left\",\r\n                        width: _tempGroup.getWidth()\r\n                    });\r\n                    // å·²ç»å¤çè¿å®½åº¦\r\n                    if (_tempDP.getWidth()) {\r\n                        this.auxiliaryDatas = [_tempDP];\r\n                        this._calculate(true, _tempDP.getWidth());\r\n                    } else {\r\n                        // æ´æ°è¾å©æ°æ®\r\n                        let auxiliaryIndex=this.auxiliaryDatas.findIndex((item)=>{\r\n                            return item.id==_tempDP.id\r\n                        });\r\n                        if(auxiliaryIndex==-1){\r\n                            this.auxiliaryDatas.push(_tempDP);\r\n                        }\r\n                        if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n                            this.cd.detectChanges();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // å¯»æ¾æåä¸ä¸ªå¤çååºå¼çåç´ \r\n            const _tempIndex = this._getLastResponseIndex();\r\n            if (_tempIndex < 0) {\r\n                return;\r\n            }\r\n            // ä¸´æ¶å­å¨æ°æ®\r\n            let _tempToolbarDatas = [].concat(this.toolbarDatas);\r\n            // å¦æå·²ç»å¼å§å¤çååºå¼\r\n            for (let k = _tempIndex; k >= 0; k--) {\r\n                const result = this._restitute(_tempToolbarDatas, k);\r\n                _tempToolbarDatas = [].concat(result[\"data\"]);\r\n                if (!result[\"continueTo\"]) {\r\n                    break;\r\n                }\r\n            }\r\n            // æ´æ°æ°æ®\r\n            this.toolbarDatas = [].concat(_tempToolbarDatas);\r\n            // ææç¬¬ä¸å±ä¸æé½åæ\r\n            this.dpState = [false];\r\n            if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n    }\r\n    // ä¸æçå±å¼æ¶èµ·ç¶æ\r\n    dpSectionState(state: boolean, id) {\r\n        if (state) {\r\n            // å±å¼ç¶æä¸\r\n            let dropdowns = this.resizedContentEl.nativeElement.querySelectorAll(\r\n                \"[fDropdown]\"\r\n            );\r\n            if (dropdowns && dropdowns.length > 1) {\r\n                for (var k = 0; k < dropdowns.length; k++) {\r\n                    if (\r\n                        dropdowns[k].className.indexOf(\"show\") &&\r\n                        dropdowns[k].id != id\r\n                    ) {\r\n                        // dropdowns[k].dispatchEvent(new Event('selfClose'));\r\n                        this.compatibleDispatchEvent(dropdowns[k], \"selfClose\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private compatibleDispatchEvent(eventEl, eventName) {\r\n        var event;\r\n        if (typeof Event === \"function\") {\r\n            event = new Event(eventName);\r\n        } else {\r\n            event = document.createEvent(\"Event\");\r\n            event.initEvent(eventName, false, false);\r\n        }\r\n        eventEl.dispatchEvent(event);\r\n    }\r\n    // ä¿®æ¹å¯ç¨ç¦ç¨ç¶æ\r\n    changeState(values) {\r\n        const idArray = Object.keys(values);\r\n        idArray.forEach(id => {\r\n            const state = values[id];\r\n            const item = this._findItemByID(id, this.toolbarDatas);\r\n            if(item){\r\n                 item[\"disabled\"] = state;\r\n            }\r\n        });\r\n        if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n    /**\r\n     * ä¿®æ¹æ¾ç¤ºç¶æ\r\n     * å¦ææ¯ä¸ææé®\r\n     *   å¤æ­ä¸é¢çå­æ¯å¦é½éè\r\n     * @param values\r\n     */\r\n    changeVisible(values) {\r\n        const idArray = Object.keys(values);\r\n        idArray.forEach(id => {\r\n            const visible = values[id];\r\n            const item = this._findItemByID(id, this.toolbarDatas);\r\n            if(item){\r\n                item[\"visible\"] = visible;\r\n            }\r\n        });\r\n        // éåå¾ªç¯,æ´æ°æ°æ®\r\n        this.toolbarDatas.forEach(item => {\r\n            // å¦ææ¯ä¸æ\r\n            if (item[\"isDP\"]) {\r\n                this._checkDropdownVisible(values, item);\r\n            }\r\n        });\r\n        this.needResponseChanges++;\r\n        // æ´æ°\r\n       //this.cd.markForCheck();\r\n       if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n        this.cd.detectChanges();\r\n     }\r\n    }\r\n    /**\r\n     * å¦ææ¯ä¸ææé®\r\n     *   å¤æ­ä¸é¢çå­æ¯å¦é½éè\r\n     *       A. å¦æå­é½éèï¼é£ä¹æ´ä¸ªä¸æé½è¢«éèï¼\r\n     *       B. å¦æå­å¨å­æ²¡æéèï¼èä¸ä¸ææ²¡æè¢«é¢ç½®éèï¼ä¸ææé®æ¾ç¤º\r\n     * @param outsideVisibleArrays ä»ç»ä»¶å¤ä¼ å¥çå¯è§ç¶æå¯¹è±¡\r\n     * @param dropdownItem ä¸æåç´ \r\n     */\r\n    private _checkDropdownVisible(outsideVisibleArrays, dropdownItem): void {\r\n        //å¦ææ²¡æè¢«å¼ºå¶è®¾ç½®ç¶æ\r\n        if (!outsideVisibleArrays.hasOwnProperty(dropdownItem[\"id\"])) {\r\n            // ä¸æåç´ ä¸å¯è§ï¼å¤æ­æ¯å¦æå¯è§å­åç´ \r\n            if (\r\n                !dropdownItem[\"visible\"] &&\r\n                this._hasVisibleItem(dropdownItem[\"children\"], true)\r\n            ) {\r\n                dropdownItem[\"visible\"] = true;\r\n            }\r\n            // ä¸æåç´ æ¯å¯è§ï¼å¤æ­æ¯å¦æå­åç´ é½ä¸å¯è§\r\n            if (\r\n                dropdownItem[\"visible\"] &&\r\n                !this._hasVisibleItem(dropdownItem[\"children\"], true)\r\n            ) {\r\n                dropdownItem[\"visible\"] = false;\r\n            }\r\n        }\r\n        dropdownItem.children.forEach(item => {\r\n            if (item[\"isDP\"]) {\r\n                this._checkDropdownVisible(outsideVisibleArrays, item);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * å¨å¾æ£æ¥æ°æ®ä¸­å¿ï¼æ£æ¥æ¯å¦å­å¨è¯¥å¯è§ç¶æçæ°æ®ã\r\n     * å¦ææè¿åtrue,å¦åè¿åfalse\r\n     * @param datas å¾æ£æ¥æ°æ®\r\n     * @param visible å¯è§ç¶æ\r\n     */\r\n    private _hasVisibleItem(datas, visible): boolean {\r\n        const findIndex = datas.findIndex(childItem => {\r\n            if (childItem[\"visible\"] == visible) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (findIndex > -1) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * æè·ç¹å»\r\n     * @param ev\r\n     */\r\n    clickItem(ev: MouseEvent, ddRef?: FDropdownDirective) {\r\n        ev.stopPropagation();\r\n        // å¦ææ¯åç¦»çä¸ææé®\r\n        if (this.elhasSpecialCls(ev.target, \"dropdown-toggle-split\")) {\r\n            ev.stopImmediatePropagation();\r\n        }\r\n        // å¤æ­æ¯å¦ç¹å»å°éè¦å¤çäºä»¶çåç´ ä¸,æé®ãä¸ææé®\r\n        var clickEvEl = this.findBtnOrTogglerItemFromClick(ev.target);\r\n        if (clickEvEl) {\r\n            let tempID = clickEvEl[\"id\"];\r\n            // ä¿®æ¹æ¨¡æ¿ï¼idè°æ´å°ä¸ææ´ä½ä¸\r\n            if (\r\n                !tempID &&\r\n                this.elhasSpecialCls(clickEvEl[\"parentNode\"], \"f-rt-dropdown\")\r\n            ) {\r\n                tempID = clickEvEl[\"parentNode\"].id;\r\n            }\r\n            if (tempID) {\r\n                const tempItem = this._findItemByID(tempID, this.toolbarDatas);\r\n                // å¦æåç´ ç¦ç¨\r\n                if (tempItem[\"disabled\"]) {\r\n                    // ç¦æ­¢åä¸ä¼ é\r\n                    ev.stopImmediatePropagation();\r\n                } else {\r\n\r\n                    this.clickItems.next({\r\n                        id: tempID,\r\n                        text: tempItem[\"text\"],\r\n                        hidden: tempItem[\"hidden\"]\r\n                    });\r\n\r\n                    \r\n                    if (ddRef) {\r\n                        ddRef.close();\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            ev.stopImmediatePropagation();\r\n        }\r\n    }\r\n    private findBtnOrTogglerItemFromClick(clickTarget) {\r\n        // ç¶çº§æ ç­¾æ¯å¦æ¯body,æ¯çåæ­¢è¿åéå,åä¹ç»§ç»­\r\n        if (this.elhasSpecialCls(clickTarget)) {\r\n            return clickTarget;\r\n        } else if (\r\n            clickTarget.parentNode[\"className\"]&&clickTarget.parentNode[\"className\"].indexOf(\"f-response-content\") < 0\r\n        ) {\r\n            var parentN = clickTarget.parentNode;\r\n            if (this.elhasSpecialCls(parentN)) {\r\n                return parentN;\r\n            } else {\r\n                return this.findBtnOrTogglerItemFromClick(parentN);\r\n            }\r\n        }\r\n        // è¿åéå,ç»æ\r\n        return null;\r\n    }\r\n    private elhasSpecialCls(el, clsName = \"\") {\r\n        if (el) {\r\n            var classNameList = el.classList;\r\n            var findCls = false;\r\n            for (var k = 0; k < classNameList.length; k++) {\r\n                if (clsName) {\r\n                    if (classNameList[k] == clsName) {\r\n                        findCls = true;\r\n                        break;\r\n                    }\r\n                } else {\r\n                    if (\r\n                        classNameList[k] == \"f-rt-btn\" ||\r\n                        classNameList[k] == \"f-rt-toggle\"\r\n                    ) {\r\n                        findCls = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return findCls;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * æ ¹æ®ä¼ éçæ°æ®éæ°ç»å»ºåç»\r\n     * ToDo ææ¶æ²¡ææ´å¤æçåç»ï¼å¦åéè¦è®°å½åç»\r\n     */\r\n    private _reOrganizeResizeGroups() {\r\n        // å¤çåç»æ°æ®\r\n        //  if (this.resizeGroups.length === 0) {\r\n        let moreText = \"æ´å¤\";\r\n        if (this.localeService) {\r\n            moreText = this.localeService.getValue(\"responseToolbar.more\");\r\n        }\r\n        const defaultResizeGroup = new ResponseToolbarGroup(\r\n            \"toolbar-group-1\",\r\n            moreText\r\n        );\r\n        for (let i = this.toolbarDatas.length - 1; i >= 0; i--) {\r\n            defaultResizeGroup.setPreset(this.toolbarDatas[i][\"id\"]);\r\n        }\r\n        this.resizeGroups = [].concat(defaultResizeGroup);\r\n       // this.cd.markForCheck();\r\n       if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n        this.cd.detectChanges();\r\n    }\r\n    }\r\n    /**\r\n     * åå®¹ä¸å®¹å¨çå·®å¼\r\n     */\r\n    private _getDistance() {\r\n        return (\r\n            this.resizedContentEl.nativeElement.offsetWidth -\r\n            this.resizedContainerEl.nativeElement.offsetWidth\r\n        );\r\n    }\r\n    /**\r\n     * æ ¹æ®è¿åç»æå¤æ­æ¯å¦ç»§ç»­\r\n     * @param groupIndex\r\n     */\r\n    private _restitute(originalData, groupIndex) {\r\n        const tempGroup = this.resizeGroups[groupIndex];\r\n        // æ»å¨æ¡ååå®¹çè·ç¦»\r\n        let tempDistance = this._getDistance();\r\n        // è®¡ç®æåä¸ä¸ªä¸æçå®½åº¦\r\n        const tempGroupData =\r\n            originalData[this._findIndexByID(originalData, tempGroup.id)];\r\n        // æ¾å°è¿åçä½ç½®\r\n        const tempPresetIndex = [].concat(tempGroup.responsedIndex);\r\n        // æé¤åä¸æå­åç´ è¢«è®¡ç®\r\n        for (let j = tempPresetIndex.length - 1; j >= 0; j--) {\r\n            if (tempDistance >= 0) {\r\n                break;\r\n            }\r\n            // ä»ä¸æä¸­ç§»é¤\r\n            const tempChildData = tempGroupData.children[0];\r\n            const specialDistance = j === 0 ? tempGroupData.getWidth() : 0;\r\n\r\n            tempDistance =\r\n                tempDistance +\r\n                (tempChildData.getWidth() ? tempChildData.getWidth() : 0) -\r\n                specialDistance;\r\n\r\n            if (tempDistance >= 0) {\r\n                break;\r\n            } else {\r\n                // æ´æ°ä¸æ\r\n                tempGroupData.removeChild();\r\n                // æå¥å°åä½ç½®\r\n                originalData.splice(tempPresetIndex[j], 0, tempChildData);\r\n                // æ´æ°ä½ç½®\r\n                tempGroup.removeResponsed(j);\r\n                if (j === 0) {\r\n                    originalData.splice(\r\n                        this._findIndexByID(originalData, tempGroup.id),\r\n                        1\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            continueTo: tempDistance > 0 ? true : false,\r\n            data: originalData\r\n        };\r\n    }\r\n\r\n    /**\r\n     * å¼å§è®¡ç®\r\n     * @param datas\r\n     */\r\n    private _calculate(auxiliary: boolean = false, tGroupWidth: number = 0) {\r\n        if (this._auxiliary < 0) {\r\n            return;\r\n        }\r\n        // è®°å½éè¦ä¿®æ¹çä¸æ\r\n        let tempDP;\r\n        // æ»å¨æ¡ååå®¹çè·ç¦»\r\n        let tempDistance = this._getDistance() + tGroupWidth;\r\n        // ä¸´æ¶å­å¨æ°æ®\r\n        const tempToolbarDatas = [].concat(this.toolbarDatas);\r\n        const tempGroup = this.resizeGroups[this._auxiliary];\r\n        if (auxiliary) {\r\n            tempDP = this.auxiliaryDatas.pop();\r\n            tempDP.setWidth(tGroupWidth);\r\n            tempGroup.setWidth(tGroupWidth);\r\n        } else {\r\n            tempDP =\r\n                tempToolbarDatas[\r\n                    this._findIndexByID(tempToolbarDatas, tempGroup.id)\r\n                ];\r\n        }\r\n        // å½åå©ä½éè\r\n        for (\r\n            let j = tempGroup.responsedIndex.length;\r\n            j < tempGroup.presetId.length;\r\n            j++\r\n        ) {\r\n            if (tempDistance <= 0) {\r\n                break;\r\n            }\r\n\r\n            // è®¡ç®å¨å½åæ°æ®ä¸­çä½ç½®ï¼æ ¹æ®è¿ä¸ªä½ç½®å¯ä»¥æ¾å®½åº¦\r\n            const tempOldIndex = this._findIndexByID(\r\n                this.toolbarDatas,\r\n                tempGroup.presetId[j]\r\n            ) as any;\r\n            const tempNewIndex = this._findIndexByID(\r\n                tempToolbarDatas,\r\n                tempGroup.presetId[j]\r\n            ) as any;\r\n\r\n            // è®¡ç®æé®å®½åº¦\r\n            let tempWidth = this.toolbarDatas[tempOldIndex].getWidth() as any;\r\n            if (tempWidth === 0) {\r\n                // æé®å®½åº¦æªæ¾è¢«è®¡ç®è¿\r\n                tempWidth = this._getWidthFromElementsById(\r\n                    tempGroup.presetId[j]\r\n                );\r\n                tempToolbarDatas[tempNewIndex].setWidth(tempWidth);\r\n            } else if (tempWidth === false) {\r\n                // æé®è¢«éè\r\n                tempWidth = 0;\r\n            }\r\n\r\n            tempDP.addChild(tempToolbarDatas[tempNewIndex]);\r\n            // ç§»é¤\r\n            tempToolbarDatas.splice(tempNewIndex, 1);\r\n            // ä¿å­ä½ç½®ç¨äºè¿å\r\n            tempGroup.setResponsed(tempNewIndex);\r\n            tempDistance = tempDistance - tempWidth;\r\n        }\r\n        if (auxiliary && tempDP.hasChild()) {\r\n            // æå¥\r\n            tempToolbarDatas.push(tempDP);\r\n        }\r\n        this._auxiliary = -1;\r\n        this.toolbarDatas = [].concat(tempToolbarDatas);\r\n        if(this.cd&&!(this.cd as ViewRef).destroyed){\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®idæ¾å°å®éæ¾ç¤ºåç´ çå®½åº¦\r\n     * @param findId\r\n     */\r\n    private _getWidthFromElementsById(findId): number {\r\n        const parentEl = this.resizedContentEl.nativeElement;\r\n        const childLen = parentEl.children.length;\r\n        let result = 0;\r\n        for (var k = 0; k < childLen; k++) {\r\n            if (parentEl.children[k].id === findId) {\r\n                let findEl=parentEl.children[k];\r\n                let getComputedStyleEl=window.getComputedStyle(findEl,null);\r\n                result = findEl.offsetWidth+parseFloat(getComputedStyleEl.marginLeft)+parseFloat(getComputedStyleEl.marginRight);\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * æ ¼å¼åæ°æ®\r\n     */\r\n    private _formatData(datas, idPrefix: string = \"response\") {\r\n        const result = [];\r\n        datas.forEach((item, index) => {\r\n            if (item.isDP) {\r\n                // å¦ææ¯ä¸æ\r\n                if (\r\n                    item.hasOwnProperty(\"children\") &&\r\n                    item[\"children\"].length\r\n                ) {\r\n                    const children = [].concat(item[\"children\"]);\r\n                    // item.children = []; // åºgzqè¦æ±20230529\r\n                    const dpItem = new ResponseToolbarDropDown(\r\n                        Object.assign({ id: idPrefix + \"_\" + index }, item)\r\n                    );\r\n                    result.push(dpItem);\r\n                    dpItem.children = this._formatData(\r\n                        children,\r\n                        idPrefix + \"_\" + index\r\n                    );\r\n                } else {\r\n                    result.push(\r\n                        new ResponseToolbarDropDown(\r\n                            Object.assign({ id: idPrefix + \"_\" + index }, item)\r\n                        )\r\n                    );\r\n                }\r\n            } else {\r\n                // éä¸æ\r\n                result.push(\r\n                    new ResponseToolbarItem(\r\n                        Object.assign({ id: idPrefix + \"_\" + index }, item)\r\n                    )\r\n                );\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * æ¾å°ç¬¬ä¸ä¸ªæªå¤çå®ååºå¼çåç´ \r\n     */\r\n    private _getFirstUnResponsedIndex() {\r\n        const tempUnResponsedIndex = this.resizeGroups.findIndex(group => {\r\n            if (group.isResponsed()) {\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return tempUnResponsedIndex;\r\n    }\r\n    /**\r\n     * å¯»æ¾æåä¸ä¸ªå¤çååºå¼çåç´ \r\n     */\r\n    private _getLastResponseIndex() {\r\n        const tempResponsingIndex = this.resizeGroups.findIndex(group => {\r\n            if (!group.isResponsing()) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        // ææç»åç´ é½å·²å¤çå®ååºå¼\r\n        if (tempResponsingIndex === -1) {\r\n            return this.resizeGroups.length - 1;\r\n        }\r\n        // ææç»åç´ é½æªå¼å§å¤çååºå¼\r\n        return tempResponsingIndex > 1 ? tempResponsingIndex - 1 : -1;\r\n    }\r\n    /**\r\n     * æ¾å°groupå½¢æçä¸æï¼å¨æ°æ®ä¸­çä½ç½®\r\n     */\r\n    private _findIndexByID(\r\n        datas: Array<ResponseToolbarItem | ResponseToolbarDropDown>,\r\n        id: string\r\n    ): any {\r\n        const result = datas.findIndex((item, index) => {\r\n            if (item[\"id\"] === id) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    /**\r\n     * æ ¹æ®IDå¯»æ¾Item\r\n     */\r\n    private _findItemByID(\r\n        id: string,\r\n        data: Array<ResponseToolbarDropDown | ResponseToolbarItem>\r\n    ): ResponseToolbarDropDown | ResponseToolbarItem {\r\n        let tempResult = null;\r\n        const tempIndex = data.findIndex((item, index) => {\r\n            if (item[\"id\"] === id) {\r\n                tempResult = item;\r\n                return true;\r\n            }\r\n            // å¦ææ¯ä¸æï¼å±çº§ä¸æ\r\n            if (item[\"isDP\"]) {\r\n                const tempItem = this._findItemByID(id, item[\"children\"]);\r\n                if (tempItem) {\r\n                    tempResult = tempItem;\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        });\r\n        return tempResult;\r\n    }\r\n}\r\n","import { LocaleModule } from '@farris/ui-locale';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FDropdownDirectiveTypeModule } from '@farris/ui-dropdown';\r\nimport { FarrisTooltipModule } from '@farris/ui-tooltip';\r\nimport { ResponseToolbarComponent } from './component/response-toolbar.component';\r\nimport { FResizedDirective } from './resized/f-resized.directive';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FDropdownDirectiveTypeModule,\r\n    FarrisTooltipModule,\r\n    LocaleModule\r\n  ],\r\n  declarations: [\r\n    FResizedDirective,\r\n    ResponseToolbarComponent\r\n  ],\r\n  exports: [ResponseToolbarComponent]\r\n})\r\nexport class FResponseToolbarModule {}\r\n"]}