{"version":3,"file":"farris-ui-area-response.js.map","sources":["ng://@farris/ui-area-response/lib/area-response.directive.ts","ng://@farris/ui-area-response/lib/area-response.module.ts"],"sourcesContent":["import { Directive, ElementRef, Renderer2, Input, NgZone, OnDestroy, AfterViewInit, OnChanges, SimpleChanges } from '@angular/core';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n@Directive({\r\n    selector: '[f-area-response]'\r\n})\r\nexport class FAreaResponseDirective implements AfterViewInit, OnDestroy, OnChanges {\r\n    private ro: ResizeObserver | null = null;\r\n    // é¡ºåºä¸ä¸è´ï¼ä¸ç¨objectï¼ç¨æ°ç»\r\n    private breakPoints = [\r\n        { size: 'sm', width: 576 },\r\n        { size: 'md', width: 768 },\r\n        { size: 'lg', width: 888 },\r\n        { size: 'xl', width: 1200 },\r\n        { size: 'el', width: 1690 }\r\n    ];\r\n\r\n    private clsNames = [];\r\n    /**\r\n     * æ¯å¦å¤çå®½åº¦ä¸åºå®\r\n     */\r\n    @Input() autoResponse = true;\r\n\r\n    /**\r\n     * åªå¤çåºå®å®½åº¦ï¼\r\n     */\r\n    @Input('f-area-response') enableResponse = true;\r\n\r\n    constructor(private el: ElementRef, public ngzone: NgZone, private render: Renderer2) {\r\n\r\n    }\r\n    ngAfterViewInit() {\r\n        this.supportResponse();\r\n        this.bindEvent();\r\n    }\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty('enableResponse')) {\r\n            this.supportResponse();\r\n        }\r\n        if (changes.hasOwnProperty('autoResponse')) {\r\n            this.bindEvent();\r\n        }\r\n    }\r\n    private bindEvent() {\r\n        if (this.enableResponse && this.autoResponse) {\r\n            // å·²ç»å®è¿\r\n            if (this.ro) {\r\n                return;\r\n            } else {\r\n                this.ngzone.runOutsideAngular(() => {\r\n                    this.ro = new ResizeObserver((entries, observer) => {\r\n                        this.widthInterval(entries[0].contentRect.width);\r\n                    });\r\n                    this.ro.observe(this.el.nativeElement);\r\n                });\r\n            }\r\n        } else {\r\n            if (this.ro) {\r\n                this.ro.unobserve(this.el.nativeElement);\r\n                this.ro = null;\r\n            }\r\n        }\r\n    }\r\n    private supportResponse() {\r\n        // å¯ç¨ååº\r\n        if (this.enableResponse) {\r\n            this.render.addClass(this.el.nativeElement, 'f-area-response');\r\n            this.widthInterval();\r\n        } else {\r\n            // ç§»é¤å¯¹åºçæ ·å¼\r\n            this.render.removeClass(this.el.nativeElement, 'f-area-response');\r\n            for (let m = this.clsNames.length; m > 0; m--) {\r\n                this.render.addClass(this.el.nativeElement, 'f-area-response--' + this.clsNames[m]);\r\n                this.clsNames = [];\r\n            }\r\n        }\r\n        this.bindEvent();\r\n    }\r\n    private widthInterval(tWidth = 0) {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                let result = [];\r\n                if (!this.el) {\r\n                    return;\r\n                }\r\n                const areaWidth = tWidth ? tWidth : this.el.nativeElement.getBoundingClientRect().width;\r\n                let width = parseFloat(areaWidth);\r\n                for (let k = 0; k < this.breakPoints.length; k++) {\r\n                    if (this.breakPoints[k]['width'] <= width) {\r\n                        result.push(this.breakPoints[k]['size']);\r\n                    }\r\n                }\r\n\r\n\r\n                if (this.clsNames.join(',') != result.join(',')) {\r\n                    // æ§çæ¯æ°çå¤ï¼åºè¯¥ç§»é¤class\r\n                    let distance = this.clsNames.length - result.length;\r\n                    if (distance > 0) {\r\n                        for (let m = result.length; m < this.clsNames.length; m++) {\r\n                            this.render.removeClass(this.el.nativeElement, 'f-area-response--' + this.clsNames[m]);\r\n                        }\r\n                    } else {\r\n                        for (let m = this.clsNames.length; m < result.length; m++) {\r\n                            this.render.addClass(this.el.nativeElement, 'f-area-response--' + result[m]);\r\n                        }\r\n                    }\r\n                    this.clsNames = [...result];\r\n                }\r\n            }, 0);\r\n        });\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.ro) {\r\n            this.ro.unobserve(this.el.nativeElement);\r\n            this.ro = null;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { FAreaResponseDirective } from './area-response.directive';\r\n\r\n@NgModule({\r\n  declarations: [FAreaResponseDirective],\r\n  imports: [\r\n  ],\r\n  exports: [FAreaResponseDirective]\r\n})\r\nexport class FAreaResponseModule { }\r\n"],"names":[],"mappings":"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"}
