{"version":3,"file":"farris-ui-html-editor.js.map","sources":["ng://@farris/ui-html-editor/lib/html-editor-defaults.ts","ng://@farris/ui-html-editor/lib/html-editor.interfaces.ts","ng://@farris/ui-html-editor/lib/image-resize-module/DefaultOptions.ts","ng://@farris/ui-html-editor/lib/image-resize-module/modules/BaseModule.ts","ng://@farris/ui-html-editor/lib/image-resize-module/modules/DisplaySize.ts","ng://@farris/ui-html-editor/lib/image-resize-module/modules/Toolbar.ts","ng://@farris/ui-html-editor/lib/image-resize-module/modules/Resize.ts","ng://@farris/ui-html-editor/lib/image-resize-module/ImageResize.ts","ng://@farris/ui-html-editor/lib/image-drop-module/image-drop.ts","ng://@farris/ui-html-editor/lib/tool-tip-module/tooltip-list.ts","ng://@farris/ui-html-editor/lib/tool-tip-module/utils/scrollInfo.ts","ng://@farris/ui-html-editor/lib/tool-tip-module/index.ts","ng://@farris/ui-html-editor/lib/html-editor.locale.ts","ng://@farris/ui-html-editor/lib/html-editor.component.ts","ng://@farris/ui-html-editor/lib/html-editor.module.ts"],"sourcesContent":["\r\n\r\n\r\nexport const defaultModules = {\r\n    toolbar: [\r\n        // ['bold', 'italic', 'underline', 'strike'], // toggled buttons\r\n        ['bold', 'italic', 'code-block', { header: 1 }, { header: 2 }, { list: 'ordered' }, { list: 'bullet' }, 'image']\r\n        // ['blockquote', 'code-block'],\r\n\r\n        // [{ header: 1 }, { header: 2 }], // custom button values\r\n        // [{ list: 'ordered' }, { list: 'bullet' }],\r\n        // [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\r\n        // [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\r\n        // [{ direction: 'rtl' }], // text direction\r\n\r\n        // [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\r\n        // [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n\r\n        // [{ color: [] }, { background: [] }], // dropdown with defaults from theme\r\n        // [\r\n        //     {\r\n        //         font: [\r\n        //             'Microsoft-YaHei',\r\n        //             'SimSun',\r\n        //             'SimHei',\r\n        //             'KaiTi',\r\n        //             'FangSong',\r\n        //             'Arial',\r\n        //             'Times',\r\n        //             'sans-serif'\r\n        //         ]\r\n        //     }\r\n        // ],\r\n        // [{ align: [] }],\r\n\r\n        // ['clean'], // remove formatting button\r\n\r\n        // ['link', 'image', 'video'] // link and image, video,\r\n    ],\r\n    imageDrop: true,\r\n    imageResize: true,\r\n    tooltip: true\r\n};\r\nexport const toolbarOptions = {\r\n    fontBar: [\r\n        {\r\n            font: ['Microsoft-YaHei', 'SimSun', 'SimHei', 'KaiTi', 'FangSong', 'Arial', 'sans-serif']\r\n        }\r\n    ],\r\n    headerBar: [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n    sizeBar: [{ size: ['small', false, 'large', 'huge'] }],\r\n    fontStyleBar: ['bold', 'italic', 'underline', 'strike', 'link'],\r\n    indentBar: [{ indent: '-1' }, { indent: '+1' }],\r\n    listBar: [{ list: 'ordered' }, { list: 'bullet' }],\r\n    BlockBar: ['code-block', 'blockquote'],\r\n    superAndSubscriptBar: [{ script: 'sub' }, { script: 'super' }],\r\n    colorBar: [{ color: [] }, { background: [] }],\r\n    mediaBar: ['image', 'video'],\r\n    alignBar: [{ align: [] }],\r\n    imageBar: ['image'],\r\n    videoBar: ['video'],\r\n    cleanBar: ['clean']\r\n};\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport type QuillToolbarConfig = Array<\r\n    Array<\r\n        | string\r\n        | {\r\n              indent?: string;\r\n              list?: string;\r\n              direction?: string;\r\n              header?: number | Array<boolean | number>;\r\n              color?: string[];\r\n              background?: string[];\r\n              align?: string[];\r\n              script?: string;\r\n              font?: string[];\r\n              size?: Array<boolean | string>;\r\n          }\r\n    >\r\n>;\r\n\r\nexport interface QuillModules {\r\n    [key: string]: any;\r\n    clipboard?:\r\n        | {\r\n              mathers?: any[];\r\n              matchVisual?: boolean;\r\n          }\r\n        | boolean;\r\n    history?:\r\n        | {\r\n              delay?: number;\r\n              maxStack?: number;\r\n              userOnly?: boolean;\r\n          }\r\n        | boolean;\r\n    keyboard?:\r\n        | {\r\n              bindings?: any;\r\n          }\r\n        | boolean;\r\n    syntax?: boolean;\r\n    toolbar?:\r\n        | QuillToolbarConfig\r\n        | string\r\n        | {\r\n              container?: string | string[] | QuillToolbarConfig;\r\n              handlers?: {\r\n                  [key: string]: any;\r\n              };\r\n          }\r\n        | boolean;\r\n}\r\n\r\nexport type QuillFormat = 'object' | 'json' | 'html' | 'text';\r\n\r\nexport interface QuillConfig {\r\n    bounds?: HTMLElement | string;\r\n    debug?: 'error' | 'warn' | 'log' | false;\r\n    format?: QuillFormat;\r\n    formats?: any;\r\n    modules?: QuillModules;\r\n    placeholder?: string;\r\n    readOnly?: boolean;\r\n    scrollingContainer?: HTMLElement | string | null;\r\n    theme?: string;\r\n    // Custom Config to track all changes or only changes by 'user'\r\n    trackChanges?: 'user' | 'all';\r\n}\r\n\r\nexport const QUILL_CONFIG_TOKEN = new InjectionToken<QuillConfig>('config');\r\n","export default {\r\n    modules: ['DisplaySize', 'Toolbar', 'Resize'],\r\n    overlayStyles: {\r\n        position: 'absolute',\r\n        boxSizing: 'border-box',\r\n        border: '1px dashed #444'\r\n    },\r\n    handleStyles: {\r\n        position: 'absolute',\r\n        height: '12px',\r\n        width: '12px',\r\n        backgroundColor: 'white',\r\n        border: '1px solid #777',\r\n        boxSizing: 'border-box',\r\n        opacity: '0.80'\r\n    },\r\n    displayStyles: {\r\n        position: 'absolute',\r\n        font: '12px/1.0 Arial, Helvetica, sans-serif',\r\n        padding: '4px 8px',\r\n        textAlign: 'center',\r\n        backgroundColor: 'white',\r\n        color: '#333',\r\n        border: '1px solid #777',\r\n        boxSizing: 'border-box',\r\n        opacity: '0.80',\r\n        cursor: 'default'\r\n    },\r\n    toolbarStyles: {\r\n        position: 'absolute',\r\n        top: '-12px',\r\n        right: '0',\r\n        left: '0',\r\n        height: '0',\r\n        minWidth: '100px',\r\n        font: '12px/1.0 Arial, Helvetica, sans-serif',\r\n        textAlign: 'center',\r\n        color: '#333',\r\n        boxSizing: 'border-box',\r\n        cursor: 'default'\r\n    },\r\n    toolbarButtonStyles: {\r\n        display: 'inline-block',\r\n        width: '24px',\r\n        height: '24px',\r\n        background: 'white',\r\n        border: '1px solid #999',\r\n        verticalAlign: 'middle'\r\n    },\r\n    toolbarButtonSvgStyles: {\r\n        fill: '#444',\r\n        stroke: '#444',\r\n        strokeWidth: '2'\r\n    }\r\n};\r\n","export class BaseModule {\r\n    overlay;\r\n    img;\r\n    options;\r\n    requestUpdate;\r\n    constructor(resizer) {\r\n        this.overlay = resizer.overlay;\r\n        this.img = resizer.img;\r\n        this.options = resizer.options;\r\n        this.requestUpdate = resizer.onUpdate;\r\n    }\r\n    /*\r\n        requestUpdate (passed in by the library during construction, above) can be used to let the library know that\r\n        you've changed something about the image that would require re-calculating the overlay (and all of its child\r\n        elements)\r\n\r\n        For example, if you add a margin to the element, you'll want to call this or else all the controls will be\r\n        misaligned on-screen.\r\n     */\r\n\r\n    /*\r\n        onCreate will be called when the element is clicked on\r\n\r\n        If the module has any user controls, it should create any containers that it'll need here.\r\n        The overlay has absolute positioning, and will be automatically repositioned and resized as needed, so you can\r\n        use your own absolute positioning and the 'top', 'right', etc. styles to be positioned relative to the element\r\n        on-screen.\r\n     */\r\n    onCreate = () => {};\r\n\r\n    /*\r\n        onDestroy will be called when the element is de-selected, or when this module otherwise needs to tidy up.\r\n\r\n        If you created any DOM elements in onCreate, please remove them from the DOM and destroy them here.\r\n     */\r\n    onDestroy = () => {};\r\n\r\n    /*\r\n        onUpdate will be called any time that the element is changed (e.g. resized, aligned, etc.)\r\n\r\n        This frequently happens during resize dragging, so keep computations light while here to ensure a smooth\r\n        user experience.\r\n     */\r\n    onUpdate = () => {};\r\n}\r\n","import { BaseModule } from './BaseModule';\r\n\r\nexport class DisplaySize extends BaseModule {\r\n    display;\r\n    onCreate = () => {\r\n        // Create the container to hold the size display\r\n        this.display = document.createElement('div');\r\n\r\n        // Apply styles\r\n        Object.assign(this.display.style, this.options.displayStyles);\r\n\r\n        // Attach it\r\n        this.overlay.appendChild(this.display);\r\n    };\r\n\r\n    onDestroy = () => {};\r\n\r\n    onUpdate = () => {\r\n        if (!this.display || !this.img) {\r\n            return;\r\n        }\r\n\r\n        const size = this.getCurrentSize();\r\n        this.display.innerHTML = size.join(' &times; ');\r\n        if (size[0] > 120 && size[1] > 30) {\r\n            // position on top of image\r\n            Object.assign(this.display.style, {\r\n                right: '4px',\r\n                bottom: '4px',\r\n                left: 'auto'\r\n            });\r\n        } else if (this.img.style.float == 'right') {\r\n            // position off bottom left\r\n            const dispRect = this.display.getBoundingClientRect();\r\n            Object.assign(this.display.style, {\r\n                right: 'auto',\r\n                bottom: `-${dispRect.height + 4}px`,\r\n                left: `-${dispRect.width + 4}px`\r\n            });\r\n        } else {\r\n            // position off bottom right\r\n            const dispRect = this.display.getBoundingClientRect();\r\n            Object.assign(this.display.style, {\r\n                right: `-${dispRect.width + 4}px`,\r\n                bottom: `-${dispRect.height + 4}px`,\r\n                left: 'auto'\r\n            });\r\n        }\r\n    };\r\n\r\n    getCurrentSize = () => [\r\n        this.img.width,\r\n        Math.round(\r\n            (this.img.width / this.img.naturalWidth) * this.img.naturalHeight\r\n        )\r\n    ];\r\n}\r\n","import { BaseModule } from './BaseModule';\r\nimport Quill from 'quill';\r\nconst Parchment = Quill.imports.parchment;\r\nconst FloatStyle = new Parchment.Attributor.Style('float', 'float');\r\nconst MarginStyle = new Parchment.Attributor.Style('margin', 'margin');\r\nconst DisplayStyle = new Parchment.Attributor.Style('display', 'display');\r\n\r\nexport class Toolbar extends BaseModule {\r\n    toolbar;\r\n    alignments;\r\n    onCreate = () => {\r\n        // Setup Toolbar\r\n        this.toolbar = document.createElement('div');\r\n        Object.assign(this.toolbar.style, this.options.toolbarStyles);\r\n        this.overlay.appendChild(this.toolbar);\r\n\r\n        // Setup Buttons\r\n        this._defineAlignments();\r\n        this._addToolbarButtons();\r\n    };\r\n\r\n    // The toolbar and its children will be destroyed when the overlay is removed\r\n    onDestroy = () => {};\r\n\r\n    // Nothing to update on drag because we are are positioned relative to the overlay\r\n    onUpdate = () => {};\r\n\r\n    _defineAlignments = () => {\r\n        this.alignments = [\r\n            {\r\n                icon: `<svg viewbox=\"0 0 18 18\">\r\n                <line class=\"ql-stroke\" x1=\"3\" x2=\"15\" y1=\"9\" y2=\"9\"></line>\r\n                <line class=\"ql-stroke\" x1=\"3\" x2=\"13\" y1=\"14\" y2=\"14\"></line>\r\n                <line class=\"ql-stroke\" x1=\"3\" x2=\"9\" y1=\"4\" y2=\"4\"></line>\r\n              </svg>`,\r\n                apply: () => {\r\n                    DisplayStyle.add(this.img, 'inline');\r\n                    FloatStyle.add(this.img, 'left');\r\n                    MarginStyle.add(this.img, '0 1em 1em 0');\r\n                },\r\n                isApplied: () => FloatStyle.value(this.img) == 'left'\r\n            },\r\n            {\r\n                icon: `<svg viewbox=\"0 0 18 18\">\r\n                <line class=\"ql-stroke\" x1=\"15\" x2=\"3\" y1=\"9\" y2=\"9\"></line>\r\n                <line class=\"ql-stroke\" x1=\"14\" x2=\"4\" y1=\"14\" y2=\"14\"></line>\r\n                <line class=\"ql-stroke\" x1=\"12\" x2=\"6\" y1=\"4\" y2=\"4\"></line>\r\n              </svg>`,\r\n                apply: () => {\r\n                    DisplayStyle.add(this.img, 'block');\r\n                    FloatStyle.remove(this.img);\r\n                    MarginStyle.add(this.img, 'auto');\r\n                },\r\n                isApplied: () => MarginStyle.value(this.img) == 'auto'\r\n            },\r\n            {\r\n                icon: `<svg viewbox=\"0 0 18 18\">\r\n                <line class=\"ql-stroke\" x1=\"15\" x2=\"3\" y1=\"9\" y2=\"9\"></line>\r\n                <line class=\"ql-stroke\" x1=\"15\" x2=\"5\" y1=\"14\" y2=\"14\"></line>\r\n                <line class=\"ql-stroke\" x1=\"15\" x2=\"9\" y1=\"4\" y2=\"4\"></line>\r\n              </svg>`,\r\n                apply: () => {\r\n                    DisplayStyle.add(this.img, 'inline');\r\n                    FloatStyle.add(this.img, 'right');\r\n                    MarginStyle.add(this.img, '0 0 1em 1em');\r\n                },\r\n                isApplied: () => FloatStyle.value(this.img) == 'right'\r\n            }\r\n        ];\r\n    };\r\n\r\n    _addToolbarButtons = () => {\r\n        const buttons = [];\r\n        this.alignments.forEach((alignment, idx) => {\r\n            const button = document.createElement('span');\r\n            buttons.push(button);\r\n            button.innerHTML = alignment.icon;\r\n            button.addEventListener('click', () => {\r\n                // deselect all buttons\r\n                buttons.forEach(button => (button.style.filter = ''));\r\n                if (alignment.isApplied()) {\r\n                    // If applied, unapply\r\n                    FloatStyle.remove(this.img);\r\n                    MarginStyle.remove(this.img);\r\n                    DisplayStyle.remove(this.img);\r\n                } else {\r\n                    // otherwise, select button and apply\r\n                    this._selectButton(button);\r\n                    alignment.apply();\r\n                }\r\n                // image may change position; redraw drag handles\r\n                this.requestUpdate();\r\n            });\r\n            Object.assign(button.style, this.options.toolbarButtonStyles);\r\n            if (idx > 0) {\r\n                button.style.borderLeftWidth = '0';\r\n            }\r\n            Object.assign(\r\n                // tslint:disable-next-line:object-literal-key-quotes\r\n                button.children[0]['style'],\r\n                this.options.toolbarButtonSvgStyles\r\n            );\r\n            if (alignment.isApplied()) {\r\n                // select button if previously applied\r\n                this._selectButton(button);\r\n            }\r\n            this.toolbar.appendChild(button);\r\n        });\r\n    };\r\n\r\n    _selectButton = button => {\r\n        button.style.filter = 'invert(20%)';\r\n    };\r\n}\r\n","import { BaseModule } from './BaseModule';\r\n\r\nexport class Resize extends BaseModule {\r\n    boxes;\r\n    dragBox;\r\n    dragStartX;\r\n    preDragWidth;\r\n    onCreate = () => {\r\n        // track resize handles\r\n        this.boxes = [];\r\n\r\n        // add 4 resize handles\r\n        this.addBox('nwse-resize'); // top left\r\n        this.addBox('nesw-resize'); // top right\r\n        this.addBox('nwse-resize'); // bottom right\r\n        this.addBox('nesw-resize'); // bottom left\r\n\r\n        this.positionBoxes();\r\n    };\r\n\r\n    onDestroy = () => {\r\n        // reset drag handle cursors\r\n        this.setCursor('');\r\n    };\r\n\r\n    positionBoxes = () => {\r\n        const handleXOffset = `${-parseFloat(this.options.handleStyles.width) /\r\n            2}px`;\r\n        const handleYOffset = `${-parseFloat(this.options.handleStyles.height) /\r\n                2}px`;\r\n\r\n            // set the top and left for each drag handle\r\n        [\r\n            { left: handleXOffset, top: handleYOffset }, // top left\r\n            { right: handleXOffset, top: handleYOffset }, // top right\r\n            { right: handleXOffset, bottom: handleYOffset }, // bottom right\r\n            { left: handleXOffset, bottom: handleYOffset } // bottom left\r\n        ].forEach((pos, idx) => {\r\n            Object.assign(this.boxes[idx].style, pos);\r\n        });\r\n    };\r\n\r\n    addBox = cursor => {\r\n        // create div element for resize handle\r\n        const box = document.createElement('div');\r\n\r\n        // Star with the specified styles\r\n        Object.assign(box.style, this.options.handleStyles);\r\n        box.style.cursor = cursor;\r\n\r\n        // Set the width/height to use 'px'\r\n        box.style.width = `${this.options.handleStyles.width}px`;\r\n        box.style.height = `${this.options.handleStyles.height}px`;\r\n\r\n        // listen for mousedown on each box\r\n        box.addEventListener('mousedown', this.handleMousedown, false);\r\n        // add drag handle to document\r\n        this.overlay.appendChild(box);\r\n        // keep track of drag handle\r\n        this.boxes.push(box);\r\n    };\r\n\r\n    handleMousedown = evt => {\r\n        // note which box\r\n        this.dragBox = evt.target;\r\n        // note starting mousedown position\r\n        this.dragStartX = evt.clientX;\r\n        // store the width before the drag\r\n        this.preDragWidth = this.img.width || this.img.naturalWidth;\r\n        // set the proper cursor everywhere\r\n        this.setCursor(this.dragBox.style.cursor);\r\n        // listen for movement and mouseup\r\n        document.addEventListener('mousemove', this.handleDrag, false);\r\n        document.addEventListener('mouseup', this.handleMouseup, false);\r\n    };\r\n\r\n    handleMouseup = () => {\r\n        // reset cursor everywhere\r\n        this.setCursor('');\r\n        // stop listening for movement and mouseup\r\n        document.removeEventListener('mousemove', this.handleDrag);\r\n        document.removeEventListener('mouseup', this.handleMouseup);\r\n    };\r\n\r\n    handleDrag = evt => {\r\n        if (!this.img) {\r\n            // image not set yet\r\n            return;\r\n        }\r\n        // update image size\r\n        const deltaX = evt.clientX - this.dragStartX;\r\n        if (this.dragBox === this.boxes[0] || this.dragBox === this.boxes[3]) {\r\n            // left-side resize handler; dragging right shrinks image\r\n            this.img.width = Math.round(this.preDragWidth - deltaX);\r\n        } else {\r\n            // right-side resize handler; dragging right enlarges image\r\n            this.img.width = Math.round(this.preDragWidth + deltaX);\r\n        }\r\n        this.requestUpdate();\r\n    };\r\n\r\n    setCursor = value => {\r\n        [document.body, this.img].forEach(el => {\r\n            el.style.cursor = value; // eslint-disable-line no-param-reassign\r\n        });\r\n    };\r\n}\r\n","\r\nimport DefaultOptions from './DefaultOptions';\r\nimport { DisplaySize } from './modules/DisplaySize';\r\nimport { Toolbar } from './modules/Toolbar';\r\nimport { Resize } from './modules/Resize';\r\nimport Quill from 'quill';\r\nconst knownModules = { DisplaySize, Toolbar, Resize };\r\n\r\n/**\r\n * Custom module for quilljs to allow user to resize <img> elements\r\n * (Works on Chrome, Edge, Safari and replaces Firefox's native resize behavior)\r\n * @see https://quilljs.com/blog/building-a-custom-module/\r\n */\r\nexport class ImageResize {\r\n    quill: any;\r\n    options: any;\r\n    moduleClasses: any;\r\n    modules: any;\r\n    img: any;\r\n    overlay: any;\r\n    constructor(quill, options = {}) {\r\n        // save the quill reference and options\r\n        this.quill = quill;\r\n        // Apply the options to our defaults, and stash them for later\r\n        // defaultsDeep doesn't do arrays as you'd expect, so we'll need to apply the classes array from options separately\r\n        let moduleClasses = false;\r\n        // tslint:disable-next-line:object-literal-key-quotes\r\n        if (options['modules']) {\r\n            moduleClasses = options['modules'].slice();\r\n        }\r\n\r\n        // Apply options to default options\r\n        //this.options = defaultsDeep({}, options, DefaultOptions);\r\n        this.options =Object.assign({}, options, DefaultOptions);\r\n\r\n        // (see above about moduleClasses)\r\n        if (moduleClasses !== false) {\r\n            this.options.modules = moduleClasses;\r\n        }\r\n\r\n        // disable native image resizing on firefox\r\n        document.execCommand('enableObjectResizing', false, 'false');\r\n\r\n        // respond to clicks inside the editor\r\n        this.quill.root.addEventListener('click', this.handleClick, false);\r\n\r\n        this.quill.root.parentNode.style.position =\r\n            this.quill.root.parentNode.style.position || 'relative';\r\n\r\n        // setup modules\r\n        this.moduleClasses = this.options.modules;\r\n        //console.log('this.options.modules', this.options.modules)\r\n\r\n        this.modules = [];\r\n    }\r\n\r\n    initializeModules = () => {\r\n        this.removeModules();\r\n\r\n        this.modules = this.moduleClasses.map(\r\n            ModuleClass => new (knownModules[ModuleClass] || ModuleClass)(this)\r\n        );\r\n\r\n        this.modules.forEach(module => {\r\n            module.onCreate();\r\n        });\r\n\r\n        this.onUpdate();\r\n    };\r\n\r\n    onUpdate = () => {\r\n        this.repositionElements();\r\n        this.modules.forEach(module => {\r\n            module.onUpdate();\r\n        });\r\n    };\r\n\r\n    removeModules = () => {\r\n        this.modules.forEach(module => {\r\n            module.onDestroy();\r\n        });\r\n\r\n        this.modules = [];\r\n    };\r\n\r\n    handleClick = evt => {\r\n        if (\r\n            evt.target &&\r\n            evt.target.tagName &&\r\n            evt.target.tagName.toUpperCase() === 'IMG'\r\n        ) {\r\n            if (this.img === evt.target) {\r\n                // we are already focused on this image\r\n                return;\r\n            }\r\n            if (this.img) {\r\n                // we were just focused on another image\r\n                this.hide();\r\n            }\r\n            // clicked on an image inside the editor\r\n            this.show(evt.target);\r\n        } else if (this.img) {\r\n            // clicked on a non image\r\n            this.hide();\r\n        }\r\n    };\r\n    show = img => {\r\n        if (!this.quill.isEnabled()) {\r\n            return;\r\n        }\r\n\r\n        // keep track of this img element\r\n        this.img = img;\r\n\r\n        this.showOverlay();\r\n\r\n        this.initializeModules();\r\n    };\r\n\r\n    showOverlay = () => {\r\n        if (this.overlay) {\r\n            this.hideOverlay();\r\n        }\r\n\r\n        this.quill.setSelection(null);\r\n\r\n        // prevent spurious text selection\r\n        this.setUserSelect('none');\r\n\r\n        // listen for the image being deleted or moved\r\n        document.addEventListener('keyup', this.checkImage, true);\r\n        this.quill.root.addEventListener('input', this.checkImage, true);\r\n\r\n        // Create and add the overlay\r\n        this.overlay = document.createElement('div');\r\n        Object.assign(this.overlay.style, this.options.overlayStyles);\r\n\r\n        this.quill.root.parentNode.appendChild(this.overlay);\r\n\r\n        this.repositionElements();\r\n    };\r\n\r\n    hideOverlay = () => {\r\n        if (!this.overlay) {\r\n            return;\r\n        }\r\n\r\n        // Remove the overlay\r\n        this.quill.root.parentNode.removeChild(this.overlay);\r\n        this.overlay = undefined;\r\n\r\n        // stop listening for image deletion or movement\r\n        document.removeEventListener('keyup', this.checkImage);\r\n        this.quill.root.removeEventListener('input', this.checkImage);\r\n\r\n        // reset user-select\r\n        this.setUserSelect('');\r\n    };\r\n\r\n    repositionElements = () => {\r\n        if (!this.overlay || !this.img) {\r\n            return;\r\n        }\r\n\r\n        // position the overlay over the image\r\n        const parent = this.quill.root.parentNode;\r\n        const imgRect = this.img.getBoundingClientRect();\r\n        const containerRect = parent.getBoundingClientRect();\r\n\r\n        Object.assign(this.overlay.style, {\r\n            left: `${imgRect.left -\r\n                containerRect.left +\r\n                parent.scrollLeft -\r\n                2}px`,\r\n            top: `${imgRect.top - containerRect.top + parent.scrollTop - 2}px`,\r\n            width: `${imgRect.width + 2}px`,\r\n            height: `${imgRect.height + 2}px`\r\n        });\r\n    };\r\n\r\n    hide = () => {\r\n        this.hideOverlay();\r\n        this.removeModules();\r\n        this.img = undefined;\r\n    };\r\n\r\n    setUserSelect = value => {\r\n        [\r\n            'userSelect',\r\n            'mozUserSelect',\r\n            'webkitUserSelect',\r\n            'msUserSelect'\r\n        ].forEach(prop => {\r\n            // set on contenteditable element and <html>\r\n            this.quill.root.style[prop] = value;\r\n            document.documentElement.style[prop] = value;\r\n        });\r\n    };\r\n\r\n    checkImage = evt => {\r\n        if (this.img) {\r\n            if (evt.keyCode == 46 || evt.keyCode == 8) {\r\n                Quill.find(this.img).deleteAt(0);\r\n            }\r\n            this.hide();\r\n        }\r\n    };\r\n}\r\n//console.log(ImageResize)\r\n// if (Quill) {\r\n//     Quill.register('modules/imageResize', ImageResize)\r\n// }\r\n","import { NgZone } from \"@angular/core\";\r\nexport class ImageDrop {\r\n    quill: any;\r\n    constructor(quill, options = {}, private ngZone: NgZone) {\r\n        // save the quill reference\r\n        this.quill = quill;\r\n        // bind handlers to this instance\r\n        this.handleDrop = this.handleDrop.bind(this);\r\n        this.handlePaste = this.handlePaste.bind(this);\r\n        // listen for drop and paste events\r\n        this.quill.root.addEventListener('drop', this.handleDrop, false);\r\n        this.quill.root.addEventListener('paste', this.handlePaste, false);\r\n    }\r\n\r\n    handleDrop(evt) {\r\n        evt.preventDefault();\r\n        if (\r\n            evt.dataTransfer &&\r\n            evt.dataTransfer.files &&\r\n            evt.dataTransfer.files.length\r\n        ) {\r\n            if (document.caretRangeFromPoint) {\r\n                const selection = document.getSelection();\r\n                const range = document.caretRangeFromPoint(\r\n                    evt.clientX,\r\n                    evt.clientY\r\n                );\r\n                if (selection && range) {\r\n                    selection.setBaseAndExtent(\r\n                        range.startContainer,\r\n                        range.startOffset,\r\n                        range.startContainer,\r\n                        range.startOffset\r\n                    );\r\n                }\r\n            }\r\n            this.readFiles(evt.dataTransfer.files, this.insert.bind(this));\r\n        }\r\n    }\r\n\r\n    handlePaste(evt) {\r\n\r\n        if (evt) {\r\n            evt.preventDefault();\r\n        }\r\n\r\n        if (\r\n            evt.clipboardData &&\r\n            evt.clipboardData.items &&\r\n            evt.clipboardData.items.length\r\n        ) {\r\n            this.readFiles(evt.clipboardData.items, dataUrl => {\r\n                // const selection = this.quill.getSelection();\r\n                // if (selection && selection.length) {\r\n                //     // we must be in a browser that supports pasting (like Firefox)\r\n                //     // so it has already been placed into the editor\r\n                // } else {\r\n                //     // otherwise we wait until after the paste when this.quill.getSelection()\r\n                //     // will return a valid index\r\n\r\n                //     let _ngZone = this.ngZone;\r\n                //     if (!_ngZone && this.quill && this.quill.options) {\r\n                //         _ngZone = this.quill.options.ngZone;\r\n                //     }\r\n\r\n                //     if (_ngZone) {\r\n                //         _ngZone.runOutsideAngular(() => {\r\n                //             setTimeout(() => this.insert(dataUrl), 0);\r\n                //         });\r\n                //     }\r\n                // }\r\n\r\n                let _ngZone = this.ngZone;\r\n                if (!_ngZone && this.quill && this.quill.options) {\r\n                    _ngZone = this.quill.options.ngZone;\r\n                }\r\n\r\n                if (_ngZone) {\r\n                    _ngZone.runOutsideAngular(() => {\r\n                        setTimeout(() => {\r\n                            const img = this.quill.container.querySelector('img[src=\"'+dataUrl+'\"]');\r\n                            if (!img) {\r\n                                this.insert(dataUrl);\r\n                            }\r\n                        }, 0);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    insert(dataUrl) {\r\n        const index = (this.quill.getSelection() || {}).index || this.quill.getLength();\r\n        this.quill.insertEmbed(index, 'image', dataUrl, 'user');\r\n    }\r\n\r\n    readFiles(files, callback) {\r\n        // check each file for an image\r\n        let imgs = [];\r\n        const {limitImageSize, maxImgSize} = this.quill.options;\r\n  \r\n        var uploadImgs = Array.from(files).filter((n: any) => {\r\n            const blob = n.getAsFile && n.getAsFile() || n;\r\n            if (!blob.type.match(/^image\\/(gif|jpe?g|a?png|svg|webp|bmp|vnd\\.microsoft\\.icon)/i)) {\r\n                // file is not an image\r\n                // Note that some file formats such as psd start with image/* but are not readable\r\n                return false;\r\n            } else {\r\n                if (!limitImageSize) {\r\n                    return true;\r\n                } else {\r\n                    if ( maxImgSize && blob.size > maxImgSize * 1024) {\r\n                        imgs.push(blob);\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        uploadImgs.forEach((file: any) => {\r\n            const reader = new FileReader();\r\n            reader.onload = (evt: any) => {\r\n                callback(evt.target.result);\r\n            };\r\n            const blob = file.getAsFile && file.getAsFile() || file;\r\n\r\n            if (blob instanceof Blob) {\r\n                reader.readAsDataURL(blob);\r\n            }\r\n        })\r\n\r\n        // [].forEach.call(files, file => {\r\n        //     // read the clipboard item or file\r\n        //     const blob = file.getAsFile && file.getAsFile() || file;\r\n\r\n        //     if (!blob.type.match(/^image\\/(gif|jpe?g|a?png|svg|webp|bmp|vnd\\.microsoft\\.icon)/i)) {\r\n        //         // file is not an image\r\n        //         // Note that some file formats such as psd start with image/* but are not readable\r\n        //         return;\r\n        //     }\r\n\r\n        //     if (limitImageSize && maxImgSize && blob.size > maxImgSize * 1024) {\r\n        //         imgs.push(blob);\r\n        //         return;\r\n        //     } else {\r\n        //         // set up file reader\r\n        //         const reader = new FileReader();\r\n        //         reader.onload = (evt: any) => {\r\n        //             callback(evt.target.result);\r\n        //         };\r\n            \r\n        //         if (blob instanceof Blob) {\r\n        //             reader.readAsDataURL(blob);\r\n        //         }\r\n        //     }\r\n\r\n        // });\r\n\r\n        if (imgs && imgs.length) {\r\n            this.quill.options.showMaxImageMessage(imgs);\r\n        }\r\n    }\r\n}\r\n","export const tooltips = {\r\n    \"en\": {\r\n        align: {\r\n            '': 'Align',\r\n            center: 'Alinear al centro',\r\n            right: 'Alinear a la derecha',\r\n            justify: 'Justificar'\r\n        },\r\n        background: 'Background color',\r\n        blockquote: 'Bloque de cita',\r\n        bold: 'Bold',\r\n        clean: 'Limpiar formato',\r\n        code: 'Code',\r\n        'code-block': 'Code block',\r\n        color: 'Font Color',\r\n        direction: 'Direction',\r\n        float: {\r\n            center: 'Center',\r\n            full: 'å¨æµ®å¨',\r\n            left: 'å·¦æµ®å¨',\r\n            right: 'å³æµ®å¨'\r\n        },\r\n        formula: 'Formula',\r\n        header: {\r\n            '': 'Encabezados',\r\n            '1': 'Encabezados 1',\r\n            '2': 'Encabezados 2'\r\n        },\r\n        italic: 'Italic',\r\n        image: 'Image',\r\n        indent: {\r\n            '+1': 'Increase indent',\r\n            '-1': 'Decrease indent'\r\n        },\r\n        link: 'Enlace',\r\n        list: {\r\n            ordered: 'Numbered list',\r\n            bullet: 'Bullet list',\r\n            check: 'éæ©åè¡¨'\r\n        },\r\n        script: {\r\n            sub: 'Subscript',\r\n            super: 'Superscript'\r\n        },\r\n        strike: 'Strike',\r\n        underline: 'Underline',\r\n        video: 'Video',\r\n        undo: 'Undo',\r\n        redo: 'Redo',\r\n        size: 'Font Size',\r\n        font: 'Font Family',\r\n        divider: 'Divider',\r\n        formatBrush: 'Format Brush',\r\n        emoji: 'Emoji'\r\n    },\r\n    \"zh-CHS\": {\r\n        align: {\r\n            '': 'å¯¹é½',\r\n            center: 'å±ä¸­å¯¹é½',\r\n            right: 'å³å¯¹é½',\r\n            justify: 'ä¸¤ç«¯å¯¹é½'\r\n        },\r\n        background: 'èæ¯è²',\r\n        blockquote: 'å¼ç¨',\r\n        bold: 'å ç²',\r\n        clean: 'æ¸é¤æ ¼å¼',\r\n        code: 'ä»£ç ',\r\n        'code-block': 'ä»£ç æ®µ',\r\n        color: 'é¢è²',\r\n        direction: 'æ¹å',\r\n        float: {\r\n            center: 'å±ä¸­',\r\n            full: 'å¨æµ®å¨',\r\n            left: 'å·¦æµ®å¨',\r\n            right: 'å³æµ®å¨'\r\n        },\r\n        formula: 'å¬å¼',\r\n        header: {\r\n            '': 'æ é¢',\r\n            '1': 'æ é¢1',\r\n            '2': 'æ é¢2'\r\n        },\r\n        italic: 'æä½',\r\n        image: 'å¾ç',\r\n        indent: {\r\n            '+1': 'ç¼©è¿',\r\n            '-1': 'åæ¶ç¼©è¿'\r\n        },\r\n        link: 'é¾æ¥',\r\n        list: {\r\n            ordered: 'æåºåè¡¨',\r\n            bullet: 'æ åºåè¡¨',\r\n            check: 'éæ©åè¡¨'\r\n        },\r\n        script: {\r\n            sub: 'ä¸æ ',\r\n            super: 'ä¸æ '\r\n        },\r\n        strike: 'å é¤çº¿',\r\n        underline: 'ä¸åçº¿',\r\n        video: 'è§é¢',\r\n        undo: 'æ¤é',\r\n        redo: 'éå',\r\n        size: 'å­å·',\r\n        font: 'å­ä½',\r\n        divider: 'åå²çº¿',\r\n        formatBrush: 'æ ¼å¼å·',\r\n        emoji: 'è¡¨æ'\r\n    },\r\n    \"zh-CHT\": {\r\n        align: {\r\n            '': 'å°é½',\r\n            center: 'å±ä¸­å°é½',\r\n            right: 'å³å°é½',\r\n            justify: 'å©ç«¯å°é½'\r\n        },\r\n        background: 'èæ¯è²',\r\n        blockquote: 'å¼ç¨',\r\n        bold: 'å ç²',\r\n        clean: 'æ¸é¤æ ¼å¼',\r\n        code: 'ä»£ç¢¼',\r\n        'code-block': 'ä»£ç¢¼æ®µ',\r\n        color: 'é¡è²',\r\n        direction: 'æ¹å',\r\n        float: {\r\n            center: 'å±ä¸­',\r\n            full: 'å¨æµ®å',\r\n            left: 'å·¦æµ®å',\r\n            right: 'å³æµ®å'\r\n        },\r\n        formula: 'å¬å¼',\r\n        header: {\r\n            '': 'æ¨é¡',\r\n            '1': 'æ¨é¡1',\r\n            '2': 'æ¨é¡2'\r\n        },\r\n        italic: 'æé«',\r\n        image: 'åç',\r\n        indent: {\r\n            '+1': 'ç¸®é²',\r\n            '-1': 'åæ¶ç¸®é²'\r\n        },\r\n        link: 'éæ¥',\r\n        list: {\r\n            ordered: 'æåºåè¡¨',\r\n            bullet: 'ç¡åºåè¡¨',\r\n            check: 'é¸æåè¡¨'\r\n        },\r\n        script: {\r\n            sub: 'ä¸æ¨',\r\n            super: 'ä¸æ¨'\r\n        },\r\n        strike: 'åªé¤ç·',\r\n        underline: 'ä¸åç·',\r\n        video: 'è¦é »',\r\n        undo: 'æ¤é·',\r\n        redo: 'éå',\r\n        size: 'å­è',\r\n        font: 'å­é«',\r\n        divider: 'åå²ç·',\r\n        formatBrush: 'æ ¼å¼å·',\r\n        emoji: 'è¡¨æ'\r\n    }\r\n};\r\n","export const getScrollParent = function(element) {\r\n    var parent = element.parentNode;\r\n    if (!parent) {\r\n        return element;\r\n    }\r\n    if (parent === document) {\r\n        if (document.body.scrollTop !== undefined) {\r\n            return document.body;\r\n        } else {\r\n            return document.documentElement;\r\n        }\r\n    }\r\n    if (\r\n        ['scroll', 'auto'].indexOf(\r\n            getStyleComputedProperty(parent, 'overflow')\r\n        ) !== -1 ||\r\n        ['scroll', 'auto'].indexOf(\r\n            getStyleComputedProperty(parent, 'overflow-x')\r\n        ) !== -1 ||\r\n        ['scroll', 'auto'].indexOf(\r\n            getStyleComputedProperty(parent, 'overflow-y')\r\n        ) !== -1\r\n    ) {\r\n        return parent;\r\n    }\r\n    return getScrollParent(element.parentNode);\r\n};\r\nexport const getStyleComputedProperty = function(element, property) {\r\n    var css = window.getComputedStyle(element, null);\r\n    return css[property];\r\n};\r\n","import { NgZone } from '@angular/core';\r\nimport { tooltips } from './tooltip-list';\r\nimport { getScrollParent } from './utils/scrollInfo';\r\nconst tooltipStyles = {\r\n    minWidth: '70px',\r\n    position: 'absolute',\r\n    padding: '4px 8px',\r\n    textAlign: 'center',\r\n    backgroundColor: 'rgba(0,0,0,0.7)',\r\n    color: '#fff',\r\n    cursor: 'default',\r\n    borderRadius: '4px',\r\n    fontSize: '12px',\r\n    top: '-9999px',\r\n    visibility: 'hidden',\r\n    'z-index': '9999'\r\n};\r\nexport class Tooltip {\r\n    quill: any;\r\n    toolbar: any;\r\n    buttons: any;\r\n    tip: any;\r\n    selectors: any;\r\n    mouseenterHandler: any;\r\n    mouseleaveHandler: any;\r\n    timeout: any;\r\n    scrollElm: any;\r\n    constructor(quill, private ngZone: NgZone) {\r\n        this.quill = quill;\r\n        this.toolbar = quill.getModule('toolbar');\r\n        this.buttons = null;\r\n        this.selectors = null;\r\n        this.tip = null;\r\n        this.timeout = null;\r\n        this.mouseenterHandler = null;\r\n        this.mouseleaveHandler = null;\r\n        const toolbarElement = this.toolbar.container;\r\n        if (toolbarElement) {\r\n            // æ·»å å¤çäºä»¶\r\n            this.buttons = toolbarElement.querySelectorAll('button');\r\n            this.selectors = toolbarElement.querySelectorAll('.ql-picker');\r\n            for (let el of this.buttons) {\r\n                this.addHandler(el);\r\n            }\r\n            for (let el of this.selectors) {\r\n                this.addHandler(el);\r\n            }\r\n            // åå»ºtooltip\r\n            this.createTooltip();\r\n            // æ»å¨åç´ å¢å handler\r\n            this.scrollElm = getScrollParent(toolbarElement);\r\n            this.scrollElm.addEventListener('scroll', this.mouseleaveHandler);\r\n        }\r\n    }\r\n\r\n    createTooltip() {\r\n        this.tip = document.createElement('div');\r\n        this.tip.classList.add('quill-tooltip');\r\n        Object.assign(this.tip.style, tooltipStyles);\r\n        document.body.appendChild(this.tip);\r\n    }\r\n\r\n    addHandler(el) {\r\n        this.mouseenterHandler = () => {\r\n            // this.ngZone.runOutsideAngular(() => {\r\n            //     this.timeout = setTimeout(() => {\r\n            //         this.showTooltip(el);\r\n            //     }, 100);\r\n            // });\r\n            this.timeout = setTimeout(() => {\r\n                this.showTooltip(el);\r\n            }, 100);\r\n        };\r\n        this.mouseleaveHandler = () => {\r\n            if (this.timeout) {\r\n                // this.ngZone.runOutsideAngular(() => {\r\n                //     clearTimeout(this.timeout);\r\n                // });\r\n                clearTimeout(this.timeout);\r\n            }\r\n            this.hideTooltip();\r\n        };\r\n        // if (this.ngZone && this.ngZone.runOutsideAngular) {\r\n        //     this.ngZone.runOutsideAngular(() => {\r\n        //         el.addEventListener('mouseenter', this.mouseenterHandler);\r\n        //         el.addEventListener('mouseleave', this.mouseleaveHandler);\r\n        //     });\r\n        // }\r\n        el.addEventListener('mouseenter', this.mouseenterHandler);\r\n        el.addEventListener('mouseleave', this.mouseleaveHandler);\r\n    }\r\n\r\n    showTooltip(el) {\r\n        // let format = el.className.replace('ql-', '')\r\n\r\n        const LOCALE_ID = this.quill.options.localeId || 'zh-CHS';\r\n\r\n        const format = [].find\r\n            .call(el.classList, className => {\r\n                return className.indexOf('ql-') === 0;\r\n            })\r\n            .replace('ql-', '');\r\n        const tool = tooltips[LOCALE_ID][format];\r\n        if (tool) {\r\n            if (typeof tool === 'string') {\r\n                this.tip.textContent = tool;\r\n            } else {\r\n                const value = el.value || '';\r\n                if (value != null && tool[value]) {\r\n                    this.tip.textContent = tool[value];\r\n                }\r\n            }\r\n            const elRect = el.getBoundingClientRect();\r\n            const tipRect = this.tip.getBoundingClientRect();\r\n            const body = document.documentElement || document.body;\r\n            const bodyRect = {\r\n                width: body.scrollWidth,\r\n                height: body.scrollHeight,\r\n                scrollTop: body.scrollTop,\r\n                scrollLeft: body.scrollLeft\r\n            };\r\n            const offset = 3;\r\n            Object.assign(this.tip.style, {\r\n                top: elRect.top - elRect.height - offset + bodyRect.scrollTop + 'px',\r\n                left: elRect.left - (tipRect.width - elRect.width) / 2 + bodyRect.scrollLeft + 'px',\r\n                visibility: 'visible'\r\n            });\r\n        }\r\n    }\r\n\r\n    hideTooltip() {\r\n        Object.assign(this.tip.style, {\r\n            top: '-9999px',\r\n            visibility: 'hidden'\r\n        });\r\n    }\r\n\r\n    onDestroy() {\r\n        // console.warn('ondestroy');\r\n        this.destroyTooltip();\r\n        if (this.buttons) {\r\n            for (let el of this.buttons) {\r\n                this.removeHandler(el);\r\n            }\r\n        }\r\n        if (this.selectors) {\r\n            for (let el of this.selectors) {\r\n                this.removeHandler(el);\r\n            }\r\n        }\r\n        if (this.scrollElm) {\r\n            this.scrollElm.removeEventListener('scroll', this.mouseleaveHandler);\r\n        }\r\n    }\r\n\r\n    destroyTooltip() {\r\n        if (this.tip.parentNode) {\r\n            this.tip.parentNode.removeChild(this.tip);\r\n        }\r\n    }\r\n\r\n    removeHandler(el) {\r\n        el.removeEventListener('mouseenter', this.mouseenterHandler);\r\n        el.removeEventListener('mouseleave', this.mouseleaveHandler);\r\n    }\r\n}\r\n","export const HTML_EDITOR_LOCALES = {\r\n    \"en\": {\r\n        \"html-editor\": {\r\n            \"maximgsize\": \"The uploaded image should not exceed {0}\",\r\n            \"dropimg\": \"{0} has exceeded the upload limit! Maximum allowed upload {1}\"\r\n        }\r\n    },\r\n    \"zh-CHS\": {\r\n        \"html-editor\": {\r\n            \"maximgsize\": \"å¾çè¶åºä¸ä¼ éå¶ï¼æå¤§åè®¸ {0}\",\r\n            \"dropimg\": \"{0} è¶åºä¸ä¼ éå¶ï¼æå¤§åè®¸ {1}\"\r\n        }\r\n    },\r\n    \"zh-CHT\": {\r\n        \"html-editor\": {\r\n            \"maximgsize\": \"åçè¶åºä¸å³éå¶ï¼æå¤§åè¨± {0}\",\r\n            \"dropimg\": \"{0} è¶åºä¸å³éå¶ï¼æå¤§åè¨± {1}\"\r\n        }\r\n    }\r\n}","import {\r\n    AfterViewInit, Component, ElementRef, EventEmitter, forwardRef, Inject, Input, NgZone, OnChanges, OnDestroy,\r\n    Output, PLATFORM_ID, Renderer2, SecurityContext, SimpleChanges, ViewEncapsulation, HostBinding, Optional, Injector\r\n} from '@angular/core';\r\nimport { isPlatformServer, DOCUMENT} from '@angular/common';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\r\n\r\nimport Quill from 'quill';\r\n\r\nimport { Convert2HtmlEditorToolbars, RichTextEditorToolbars } from '@farris/ui-common';\r\n\r\nimport { defaultModules, toolbarOptions } from './html-editor-defaults';\r\nimport { QUILL_CONFIG_TOKEN, QuillConfig, QuillFormat, QuillModules } from './html-editor.interfaces';\r\nimport { ImageResize } from './image-resize-module/ImageResize';\r\nimport { ImageDrop } from './image-drop-module/image-drop'; // æå¨å è½½å¾çç»ä»¶ã\r\nimport { Tooltip } from './tool-tip-module/index';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { HTML_EDITOR_LOCALES } from './html-editor.locale';\r\n// ä¿®æ¹é»è®¤å­ä½\r\nconst Font = Quill.import('attributors/style/font');\r\nFont.whitelist = ['Microsoft-YaHei', 'SimSun', 'SimHei', 'KaiTi', 'FangSong', 'Arial', 'Times', 'sans-serif'];\r\nQuill.register(Font, true);\r\n\r\n\r\n// æ³¨åå¾çææ½åå¾çå¤§å°è°æ´\r\nQuill.register('modules/imageDrop', ImageDrop);\r\nQuill.register('modules/imageResize', ImageResize);\r\nQuill.register('modules/tooltip', Tooltip);\r\n// Because quill uses `document` directly, we cannot `import` during SSR\r\n// instead, we load dynamically via `require('quill')` in `ngAfterViewInit()`\r\n// declare var require: any\r\n// let Quill: any = null\r\n\r\nexport interface CustomOption {\r\n    import: string;\r\n    whitelist: any[];\r\n}\r\n\r\nexport interface Range {\r\n    index: number;\r\n    length: number;\r\n}\r\n\r\nconst getFormat = (format?: QuillFormat, configFormat?: QuillFormat): QuillFormat => {\r\n    const passedFormat = format || configFormat;\r\n    return passedFormat || 'html';\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-html-editor',\r\n    template: `\r\n        <ng-content select=\"[html-editor-toolbar]\"></ng-content>\r\n    `,\r\n    styleUrls: ['./html-editor.component.css'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    providers: [\r\n        {\r\n            multi: true,\r\n            provide: NG_VALUE_ACCESSOR, // èªå®ä¹ç»ä»¶çæ°æ®ç»å®\r\n            useExisting: forwardRef(() => HtmlEditorComponent)\r\n        }, {\r\n            provide: NG_VALIDATORS,\r\n            useExisting: forwardRef(() => HtmlEditorComponent),\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class HtmlEditorComponent implements AfterViewInit, ControlValueAccessor, OnChanges, OnDestroy {\r\n\r\n    quillEditor: any;\r\n    editorElem: HTMLElement | undefined;\r\n    content: any;\r\n    private _disabled = false; // used to store initial value before ViewInit\r\n\r\n    @HostBinding('class') rootClass = 'farris-html-editor';\r\n    @Input()\r\n    @HostBinding('class.farris-html-editor-readonly') readonly?: boolean;\r\n    @Input()\r\n    @HostBinding('class.farris-html-editor-disabled') disabled = false;\r\n    @Input()\r\n    @HostBinding('class.farris-html-editor-border') showBorder = true;\r\n\r\n    @Input() format?: 'object' | 'html' | 'text' | 'json';\r\n    @Input() theme?: string;\r\n    @Input() modules?: QuillModules = {\r\n        imageDrop: true,\r\n        imageResize: true,\r\n        tooltip: true\r\n    };\r\n    @Input() debug?: 'warn' | 'log' | 'error' | false;\r\n    @Input() placeholder?: string;\r\n    @Input() maxLength?: number;\r\n    @Input() minLength?: number;\r\n    @Input() required = false;\r\n    @Input() formats?: string[] | null;\r\n    @Input() customToolbarPosition: 'top' | 'bottom' = 'top';\r\n    @Input() sanitize = false; // åådom\r\n    @Input() styles: any = null;\r\n    @Input() strict = true;\r\n    @Input() scrollingContainer?: HTMLElement | string | null;\r\n    @Input() bounds?: HTMLElement | string;\r\n    @Input() customOptions: CustomOption[] = [];\r\n    @Input() trackChanges?: 'user' | 'all';\r\n    @Input() preserveWhitespace = false;\r\n\r\n     /** éå¶ä¸ä¼ å¾çå¤§å°, é»è®¤ä¸º falseä¸éå¶ä¸ä¼ å¾ççå¤§å° */\r\n     @Input() limitImageSize = false;\r\n     /** åè®¸ä¸ä¼ å¾çæå¤§å­èæ°ï¼åä½ kb  */\r\n     @Input() maxImgSize = 500;\r\n\r\n\r\n    // èªå®ä¹toobar\r\n    @Input() customToolbar = false;\r\n    // èªå®ä¹åè½æé®\r\n    @Input() toolbar: RichTextEditorToolbars;\r\n\r\n\r\n    // æå­æ ·å¼\r\n    @Input() fontStyleBar: string[] | boolean = true;\r\n    // ä»£ç å\r\n    @Input() BlockBar: string[] | boolean =  false; // false;\r\n    // æ é¢\r\n    @Input() headerBar: { header: any[] } | boolean = true;\r\n    // å­å·\r\n    @Input() sizeBar: { size: any[] } | boolean = true;\r\n    // åè¡¨\r\n    @Input() listBar: any[] | boolean = true;\r\n    // å­ä½\r\n    @Input() fontBar: { font: string[] } | boolean = true;\r\n    // ä¸æ åä¸æ \r\n    @Input() superAndSubscriptBar: any[] | boolean = true; // false;\r\n    // ç¼©è¿\r\n    @Input() indentBar: any[] | boolean = true;\r\n    // æå­é¢è²\r\n    @Input() colorBar: any[] | boolean = true; // false;\r\n    // åªä½\r\n    @Input() mediaBar: string | boolean = true; // false;\r\n    // å¾ç\r\n    @Input() imageBar: string | boolean = false;\r\n    // è§é¢\r\n    @Input() videoBar: string | boolean = false; // false;\r\n    // æ¸é¤\r\n    @Input() cleanBar: string | boolean = true;\r\n    @Input() alignBar: string | boolean = true;\r\n    /** åªè¯»ç¦ç¨æ¶ï¼æå¤§é«åº¦ï¼ä¸º 0 æ¶ï¼ä¸éå¶æå¤§é«åº¦; é»è®¤ 800px */\r\n    @Input() maxHeight = 800;\r\n    @Input() minHeight = 100;\r\n    @Input() autoHeight = true;\r\n\r\n    @Output() onEditorCreated = new EventEmitter();\r\n\r\n    @Output() onContentChanged: EventEmitter<{\r\n        content: any;\r\n        delta: any;\r\n        editor: any;\r\n        html: string | null;\r\n        oldDelta: any;\r\n        source: string;\r\n        text: string;\r\n    }> = new EventEmitter();\r\n\r\n    @Output() onSelectionChanged: EventEmitter<{\r\n        editor: any;\r\n        oldRange: Range | null;\r\n        range: Range | null;\r\n        source: string;\r\n    }> = new EventEmitter<any>();\r\n\r\n    @Output() onFocus: EventEmitter<{\r\n        editor: any;\r\n        source: string;\r\n    }> = new EventEmitter();\r\n    @Output() onBlur: EventEmitter<{\r\n        editor: any;\r\n        source: string;\r\n    }> = new EventEmitter();\r\n\r\n    @Input() imageUpload: () => void;\r\n\r\n    @Input() valueGetter = (quillEditor: any, editorElement: HTMLElement): string | any => {\r\n        // tslint:disable-next-line: no-non-null-assertion\r\n        let html: string | null = editorElement.querySelector('.ql-editor')!.innerHTML;\r\n        if (html === '<p><br></p>' || html === '<div><br><div>') {\r\n            html = null;\r\n        }\r\n        let modelValue = html;\r\n        const format = getFormat(this.format, this.config.format);\r\n\r\n        if (format === 'text') {\r\n            modelValue = quillEditor.getText();\r\n        } else if (format === 'object') {\r\n            modelValue = quillEditor.getContents();\r\n        } else if (format === 'json') {\r\n            try {\r\n                modelValue = JSON.stringify(quillEditor.getContents());\r\n            } catch (e) {\r\n                modelValue = quillEditor.getText();\r\n            }\r\n        }\r\n        return modelValue;\r\n    }\r\n\r\n    @Input() valueSetter = (quillEditor: any, value: any): any => {\r\n        const format = getFormat(this.format, this.config.format);\r\n        if (format === 'html') {\r\n            if (this.sanitize) {\r\n                value = this.domSanitizer.sanitize(SecurityContext.HTML, value);\r\n            }\r\n            value = value ? (value + '').replace(/\\s\\s/g, '&nbsp;&nbsp;') : '';\r\n            return quillEditor.clipboard.convert(value);\r\n        } else if (format === 'json') {\r\n            try {\r\n                return JSON.parse(value);\r\n            } catch (e) {\r\n                return [{ insert: value }];\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private domSanitizer: DomSanitizer,\r\n        @Inject(DOCUMENT) private doc: any,\r\n        // tslint:disable-next-line:ban-types\r\n        @Inject(PLATFORM_ID) private platformId: Object,\r\n        private renderer: Renderer2,\r\n        private zone: NgZone,\r\n        @Inject(QUILL_CONFIG_TOKEN) private config: QuillConfig,\r\n        @Optional() private notifySer: NotifyService,\r\n        @Optional() private localeSer: LocaleService,\r\n        @Optional() private injector: Injector\r\n    ) {\r\n        if (this.localeSer) {\r\n            this.localeSer.setLocaleData(HTML_EDITOR_LOCALES);\r\n        }\r\n    }\r\n\r\n    // tslint:disable-next-line:no-empty\r\n    onModelChange(_modelValue?: any) { }\r\n    // tslint:disable-next-line:no-empty\r\n    onModelTouched() { }\r\n\r\n    ngAfterViewInit(): void {\r\n       this.editorCreate();\r\n\r\n       if (this.editorElem) {\r\n            this.renderer.setStyle(this.editorElem, 'min-height', `${this.minHeight || 100}px`);\r\n\r\n            if (this.autoHeight) {\r\n                if (this.maxHeight) {\r\n                    this.renderer.setStyle(this.editorElem, 'max-height', `${this.maxHeight}px`);\r\n                    this.renderer.setStyle(this.editorElem, 'overflow', 'auto');\r\n                }\r\n            } else {\r\n                this.renderer.setStyle(this.editorElem, 'max-height', `${this.minHeight}px`);\r\n                this.renderer.setStyle(this.editorElem, 'overflow', 'auto');\r\n            }\r\n       }\r\n    }\r\n\r\n    setToolbar(toolbar) {\r\n        // console.log(toolbar);\r\n    }\r\n\r\n    private editorCreate() {\r\n        if (isPlatformServer(this.platformId)) {\r\n            return;\r\n        }\r\n\r\n        this.elementRef.nativeElement.insertAdjacentHTML(\r\n            this.customToolbarPosition === 'top' ? 'beforeend' : 'afterbegin',\r\n            this.preserveWhitespace ? '<pre html-editor-element></pre>' : '<div html-editor-element></div>'\r\n        );\r\n\r\n        this.editorElem = this.elementRef.nativeElement.querySelector('[html-editor-element]');\r\n\r\n        const toolbarElem = this.elementRef.nativeElement.querySelector('[html-editor-toolbar]');\r\n        const modules = this.modules || this.config.modules || defaultModules;\r\n        if (modules.toolbar === undefined) {\r\n            modules.toolbar = defaultModules.toolbar;\r\n        }\r\n        if (this.customToolbar) {\r\n            if (this.toolbar && this.toolbar.length) {\r\n                modules.toolbar = Convert2HtmlEditorToolbars('concise', this.toolbar);\r\n            } else  {\r\n                modules.toolbar =  defaultModules.toolbar;\r\n            }\r\n        }\r\n        if (modules.tooltip === undefined) {\r\n            modules.tooltip = defaultModules.tooltip;\r\n        }\r\n        if (modules.imageDrop === undefined) {\r\n            modules.imageDrop = defaultModules.imageDrop;\r\n        }\r\n        if (modules.imageResize === undefined) {\r\n            modules.imageResize =  defaultModules.imageResize;\r\n        }\r\n\r\n        let placeholder = this.placeholder !== undefined ? this.placeholder : this.config.placeholder;\r\n        if (placeholder === undefined) {\r\n            placeholder = '';\r\n        }\r\n\r\n        if (toolbarElem) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            modules['toolbar'] = toolbarElem;\r\n        }\r\n\r\n        if (this.styles) {\r\n            Object.keys(this.styles).forEach((key: string) => {\r\n                this.renderer.setStyle(this.editorElem, key, this.styles[key]);\r\n            });\r\n        }\r\n\r\n        this.customOptions.forEach(customOption => {\r\n            const newCustomOption = Quill.import(customOption.import);\r\n            newCustomOption.whitelist = customOption.whitelist;\r\n            Quill.register(newCustomOption, true);\r\n        });\r\n\r\n        let bounds = this.bounds && this.bounds === 'self' ? this.editorElem : this.bounds;\r\n        if (!bounds) {\r\n            bounds = this.config.bounds ? this.config.bounds : this.doc.body;\r\n        }\r\n\r\n        let debug = this.debug;\r\n        if (!debug && debug !== false && this.config.debug) {\r\n            debug = this.config.debug;\r\n        }\r\n\r\n        let readOnly = this.readonly;\r\n        if (!readOnly && this.readonly !== false) {\r\n            readOnly = this.config.readOnly !== undefined ? this.config.readOnly : false;\r\n        }\r\n\r\n        // modules.imageResize = !(readOnly || this.disabled)\r\n\r\n        let scrollingContainer = this.scrollingContainer;\r\n\r\n        if (!scrollingContainer) {\r\n            scrollingContainer = this.editorElem;\r\n        }\r\n\r\n        // if (!scrollingContainer) {\r\n        //     scrollingContainer =\r\n        //         this.config.scrollingContainer === null || this.config.scrollingContainer\r\n        //             ? this.config.scrollingContainer\r\n        //             : null;\r\n        // }\r\n\r\n        let formats = this.formats;\r\n        if (!formats && formats === undefined) {\r\n            formats = this.config.formats || this.config.formats === null ? this.config.formats : undefined;\r\n        }\r\n        // åå§åquill\r\n        this.quillEditor = new Quill(this.editorElem, {\r\n            bounds,\r\n            debug,\r\n            formats,\r\n            modules,\r\n            placeholder,\r\n            readOnly,\r\n            scrollingContainer,\r\n            strict: this.strict,\r\n            theme: this.theme || (this.config.theme ? this.config.theme : 'snow'),\r\n             /** éå¶ä¸ä¼ å¾çå¤§å°, é»è®¤ä¸º falseä¸éå¶ä¸ä¼ å¾ççå¤§å° */\r\n            limitImageSize: this.limitImageSize,\r\n            /** åè®¸ä¸ä¼ å¾çæå¤§å­èæ°ï¼åä½ kb  */\r\n            maxImgSize: this.maxImgSize,\r\n            showMaxImageMessage: this.showMaxImageMessage.bind(this),\r\n            ngZone: this.zone,\r\n            localeId: this.localeSer? this.localeSer.localeId :  localStorage.getItem('languageCode') || 'zh-CHS'\r\n        });\r\n\r\n        if (this.content) {\r\n            const format = getFormat(this.format, this.config.format);\r\n            if (format === 'object') {\r\n                this.quillEditor.setContents(this.content, 'silent');\r\n            } else if (format === 'text') {\r\n                this.quillEditor.setText(this.content, 'silent');\r\n            } else if (format === 'json') {\r\n                try {\r\n                    this.quillEditor.setContents(JSON.parse(this.content), 'silent');\r\n                } catch (e) {\r\n                    this.quillEditor.setText(this.content, 'silent');\r\n                }\r\n            } else {\r\n                if (this.sanitize) {\r\n                    this.content = this.domSanitizer.sanitize(SecurityContext.HTML, this.content);\r\n                }\r\n                const contents = this.quillEditor.clipboard.convert(this.content);\r\n                this.quillEditor.setContents(contents, 'silent');\r\n            }\r\n\r\n            this.quillEditor.history.clear();\r\n        }\r\n\r\n        // initialize _disabled status based on this._disabled as default value\r\n        // this.setDisabledState(this.disabled);\r\n        this.setStatusEditor(this.readonly, this.disabled);\r\n        this.onEditorCreated.emit(this.quillEditor);\r\n\r\n        // mark model as touched if editor lost focus\r\n        this.quillEditor.on('selection-change', this.selectionChangeHandler);\r\n\r\n        // update model if text changes\r\n        this.quillEditor.on('text-change', this.textChangeHandler);\r\n    }\r\n\r\n    random_id() {\r\n        return Math.random().toString(36).slice(2);\r\n    }\r\n\r\n    selectionChangeHandler = (range: Range | null, oldRange: Range | null, source: string) => {\r\n        this.zone.run(() => {\r\n            if (range === null) {\r\n                this.onBlur.emit({\r\n                    editor: this.quillEditor,\r\n                    source\r\n                });\r\n            } else if (oldRange === null) {\r\n                this.onFocus.emit({\r\n                    editor: this.quillEditor,\r\n                    source\r\n                });\r\n            }\r\n\r\n            this.onSelectionChanged.emit({\r\n                editor: this.quillEditor,\r\n                oldRange,\r\n                range,\r\n                source\r\n            });\r\n\r\n            if (!range && this.onModelTouched) {\r\n                this.onModelTouched();\r\n            }\r\n        });\r\n    }\r\n\r\n    textChangeHandler = (delta: any, oldDelta: any, source: string): void => {\r\n        // only emit changes emitted by user interactions\r\n\r\n        const text = this.quillEditor.getText();\r\n        const content = this.quillEditor.getContents();\r\n\r\n        // tslint:disable-next-line: no-non-null-assertion\r\n        let html: string | null = this.editorElem!.querySelector('.ql-editor')!.innerHTML;\r\n        if (html === '<p><br></p>' || html === '<div><br><div>') {\r\n            html = null;\r\n        }\r\n\r\n        this.zone.run(() => {\r\n            const trackChanges = this.trackChanges || this.config.trackChanges;\r\n            if ((source === Quill.sources.USER || (trackChanges && trackChanges === 'all')) && this.onModelChange) {\r\n                this.onModelChange(this.valueGetter(this.quillEditor, this.editorElem!));\r\n            }\r\n\r\n            this.onContentChanged.emit({\r\n                content,\r\n                delta,\r\n                editor: this.quillEditor,\r\n                html,\r\n                oldDelta,\r\n                source,\r\n                text\r\n            });\r\n        });\r\n    }\r\n\r\n    endEdit() {\r\n        this.onModelTouched();\r\n    }\r\n\r\n    buildToolbar(options: any) {\r\n        const rtn = [];\r\n        Object.keys(options).forEach(e => {\r\n            if (this[e] === true) {\r\n                rtn.push(options[e]);\r\n            } else if (this[e]) {\r\n                rtn.push(this[e]);\r\n            }\r\n        });\r\n        return rtn;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.quillEditor) {\r\n            this.quillEditor.off('selection-change', this.selectionChangeHandler);\r\n            this.quillEditor.off('text-change', this.textChangeHandler);\r\n        }\r\n    }\r\n\r\n    private hideImgSelectionRange() {\r\n        const imgResizeIns: any = this.quillEditor.getModule('imageResize');\r\n        if (imgResizeIns) {\r\n            if (this.readonly || this.disabled) {\r\n                imgResizeIns.hide();\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (!this.quillEditor) {\r\n            return;\r\n        }\r\n        if (changes['disabled']) {\r\n            this.setStatusEditor(false, this.disabled);\r\n            this.hideImgSelectionRange();\r\n        }\r\n        // tslint:disable:no-string-literal\r\n        if (changes['readonly']) {\r\n            this.quillEditor.enable(!changes['readonly'].currentValue);\r\n            this.disableToolbar(changes['readonly'].currentValue);\r\n            this.hideImgSelectionRange();\r\n        }\r\n        if (changes['placeholder']) {\r\n            this.quillEditor.root.dataset.placeholder = changes['placeholder'].currentValue;\r\n        }\r\n        if (changes['styles']) {\r\n            const currentStyling = changes['styles'].currentValue;\r\n            const previousStyling = changes['styles'].previousValue;\r\n\r\n            if (previousStyling) {\r\n                Object.keys(previousStyling).forEach((key: string) => {\r\n                    this.renderer.removeStyle(this.editorElem, key);\r\n                });\r\n            }\r\n            if (currentStyling) {\r\n                Object.keys(currentStyling).forEach((key: string) => {\r\n                    this.renderer.setStyle(this.editorElem, key, this.styles[key]);\r\n                });\r\n            }\r\n        }\r\n\r\n        if (changes.limitImageSize && !changes.limitImageSize.isFirstChange()) {\r\n            this.quillEditor.options.limitImageSize = this.limitImageSize;\r\n        }\r\n\r\n        if (changes.maxImgSize && !changes.maxImgSize.isFirstChange()) {\r\n            this.quillEditor.options.maxImgSize = this.maxImgSize;\r\n        }\r\n\r\n        // tslint:enable:no-string-literal\r\n    }\r\n\r\n    writeValue(currentValue: any) {\r\n        this.content = currentValue;\r\n        const format = getFormat(this.format, this.config.format);\r\n        if (this.quillEditor) {\r\n            this.quillEditor.setText('');\r\n            if (currentValue) {\r\n                if (format === 'text') {\r\n                    this.quillEditor.setText(currentValue);\r\n                } else {\r\n                    this.quillEditor.setContents(this.valueSetter(this.quillEditor, this.content));\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    disableToolbar(readonly: boolean) {\r\n        const toolbarElem = this.elementRef.nativeElement.querySelector('.ql-toolbar');\r\n        if (toolbarElem) {\r\n            toolbarElem.style.display = readonly ? 'none' : 'block';\r\n        }\r\n    }\r\n\r\n    setStatusEditor(readonly: boolean = false, disable: boolean) {\r\n        // if (disable || readonly) {\r\n        //     this.elementRef.nativeElement.style.border = 'none';\r\n        // }\r\n        this.disableToolbar(disable || readonly);\r\n        this.setDisabledState(disable);\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean = this._disabled): void {\r\n        // store initial value to set appropriate _disabled status after ViewInit\r\n        this._disabled = isDisabled;\r\n        if (this.quillEditor) {\r\n            if (isDisabled) {\r\n                this.quillEditor.disable();\r\n                this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'disabled');\r\n            } else {\r\n                if (!this.readonly) {\r\n                    this.quillEditor.enable();\r\n                }\r\n                this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\r\n            }\r\n        }\r\n    }\r\n\r\n    registerOnChange(fn: (modelValue: any) => void): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => void): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n\r\n    showMaxImageMessage(imgs = null) {\r\n        let errMsg = `ä¸ä¼ çå¾çä¸å¾å¤§äº${this.maxImgSize}kb`;\r\n\r\n        if (this.localeSer) {\r\n            let _errMsg = this.localeSer.getValue('html-editor.maximgsize');\r\n            if (_errMsg) {\r\n                _errMsg = _errMsg.replace('{0}', `${this.maxImgSize}kb`);\r\n                errMsg = _errMsg;\r\n            }\r\n            if (imgs && imgs.length) {\r\n                const imgNames = imgs.map(n => n.name).join(', ');\r\n                errMsg = this.localeSer.getValue('html-editor.dropimg').replace('{0}', imgNames).replace('{1}', `${this.maxImgSize}kb`);\r\n            }\r\n        } else {\r\n            if (imgs && imgs.length) {\r\n                const imgNames = imgs.map(n => n.name).join(', ');\r\n                errMsg = `${imgNames} è¶åºä¸ä¼ éå¶ï¼æå¤§åè®¸ ${this.maxImgSize}kb`;\r\n            }\r\n        }\r\n\r\n        if (this.notifySer) {\r\n            this.notifySer.warning({msg: errMsg, timeout: 2000});\r\n        } else {\r\n            alert(errMsg);\r\n        }\r\n    }\r\n\r\n    validate() {\r\n        return null;\r\n        // if (!this.quillEditor) {\r\n        // }\r\n        // const err: {\r\n        //     minLengthError?: {\r\n        //         given: number;\r\n        //         minLength: number;\r\n        //     };\r\n        //     maxLengthError?: {\r\n        //         given: number;\r\n        //         maxLength: number;\r\n        //     };\r\n        //     requiredError?: { empty: boolean };\r\n        // } = {};\r\n        // let valid = true;\r\n\r\n        // const textLength = this.quillEditor.getText().trim().length;\r\n\r\n        // if (this.minLength && textLength && textLength < this.minLength) {\r\n        //     err.minLengthError = {\r\n        //         given: textLength,\r\n        //         minLength: this.minLength\r\n        //     };\r\n\r\n        //     valid = false;\r\n        // }\r\n\r\n        // if (this.maxLength && textLength > this.maxLength) {\r\n        //     err.maxLengthError = {\r\n        //         given: textLength,\r\n        //         maxLength: this.maxLength\r\n        //     };\r\n\r\n        //     valid = false;\r\n        // }\r\n\r\n        // if (this.required && !textLength) {\r\n        //     err.requiredError = {\r\n        //         empty: true\r\n        //     };\r\n\r\n        //     valid = false;\r\n        // }\r\n\r\n        // return valid ? null : err;\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { HtmlEditorComponent } from './html-editor.component';\r\nimport { defaultModules } from './html-editor-defaults';\r\nimport { QUILL_CONFIG_TOKEN, QuillConfig } from './html-editor.interfaces';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\n@NgModule({\r\n    declarations: [HtmlEditorComponent],\r\n    imports: [\r\n        NotifyModule.forRoot(),\r\n        LocaleModule.forRoot()\r\n    ],\r\n    exports: [HtmlEditorComponent],\r\n    providers: [\r\n        {\r\n            provide: QUILL_CONFIG_TOKEN,\r\n            useValue: { modules: defaultModules }\r\n        }\r\n    ]\r\n})\r\nexport class FarrisHtmlEditorModule {\r\n    static forRoot(config?: QuillConfig): ModuleWithProviders {\r\n        return {\r\n            ngModule: FarrisHtmlEditorModule,\r\n            providers: [\r\n                {\r\n                    provide: QUILL_CONFIG_TOKEN,\r\n                    // tslint:disable-next-line:only-arrow-functions\r\n                    useValue: config || { modules: defaultModules }\r\n                }\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["tslib_1.__extends","tslib_1.__values"],"mappings":"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"}
