/**
 * @fileoverview added by tsickle
 * Generated from: lib/approval-comments.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, forwardRef, Injector, Input } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { ApprovalComment } from '../entity/approval-comments';
import { ApiService } from '../utils/api.service';
/** @enum {string} */
var DisplayTypes = {
    Single: "single",
    Default: "default",
    Theme1: "theme1",
};
var ApprovalCommentComponent = /** @class */ (function () {
    function ApprovalCommentComponent(apiService, injector) {
        var _this = this;
        this.apiService = apiService;
        this.injector = injector;
        /*
            * 域配置
            */
        this.domains = [];
        this.displayType = DisplayTypes.Default;
        this.attachmentVisible = true; // 附件是否可见
        this.filterAction = ['Pass', 'Back'];
        this.DisplayTypes = DisplayTypes;
        /** @type {?} */
        var rootViewModel = this.injector["view"].component.viewModel;
        rootViewModel.bindingData.changes.subscribe((/**
         * @param {?} change
         * @return {?}
         */
        function (change) {
            if (_this.displayType === _this.DisplayTypes.Single) {
                _this.getFieldData(rootViewModel.bindingData.getValue(_this.sortPath(_this.field)));
            }
        }));
    }
    /**
     * @return {?}
     */
    ApprovalCommentComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    ApprovalCommentComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this.procInstId) {
            return;
        }
        if (!!this.dataList) {
            return;
        }
        if (this.displayType === this.DisplayTypes.Default && this.domains.length) {
            this.getApprovalComment();
        }
    };
    /**
     * @return {?}
     */
    ApprovalCommentComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.displayType === this.DisplayTypes.Single) {
            /** @type {?} */
            var rootViewModel = this.injector["view"].component.viewModel;
            this.getFieldData(rootViewModel.bindingData.getValue(this.sortPath(this.field)));
        }
        /** @type {?} */
        var AttachUtil = {
            mergeString: (/**
             * @param {?} str
             * @param {?} str1
             * @return {?}
             */
            function (str, str1) {
                /** @type {?} */
                var min = str.length < str1.length ? str.length : str1.length;
                /** @type {?} */
                var res = '';
                /** @type {?} */
                var i = 0;
                for (i = 0; i < min; i++) {
                    res += str.substring(i, i + 1);
                    res += str1.substring(i, i + 1);
                }
                res += str.length < str1.length ? str1.substring(i) : str.substring(i);
                return res;
            }),
            getToken: (/**
             * @param {?} str
             * @return {?}
             */
            function (str) {
                /** @type {?} */
                var array = [1, 2, 3];
                if (str.length > 24) {
                    str = str.substring(0, 24);
                }
                /** @type {?} */
                var length = Math.floor(str.length / 3);
                /** @type {?} */
                var str1 = str.substring(0, length);
                /** @type {?} */
                var str2 = str.substring(length, 2 * length);
                /** @type {?} */
                var str3 = str.substring(2 * length, 3 * length);
                /** @type {?} */
                var randomArray = [];
                /** @type {?} */
                var random = Math.ceil(Math.random() * 3);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                random = Math.ceil(Math.random() * 2);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                randomArray.push(array[0]);
                /** @type {?} */
                var timeStamp = Math.round(new Date().getTime() / 1000) + '';
                return (timeStamp.substring(0, 5) +
                    'times' +
                    randomArray[0] +
                    '' +
                    randomArray[1] +
                    '' +
                    randomArray[2] +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[0]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[1]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[2]) +
                    'times' +
                    timeStamp.substring(5));
            }),
            switchStr: (/**
             * @param {?} str1
             * @param {?} str2
             * @param {?} str3
             * @param {?} i
             * @return {?}
             */
            function (str1, str2, str3, i) {
                switch (i) {
                    case 1:
                        return str1;
                    case 2:
                        return str2;
                    case 3:
                        return str3;
                }
            })
        };
        this.AttachUtil = AttachUtil;
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    ApprovalCommentComponent.prototype.sortPath = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        /** @type {?} */
        var pathArry = field.split('_');
        return pathArry.reduce((/**
         * @param {?} pre
         * @param {?} bindingPath
         * @return {?}
         */
        function (pre, bindingPath) {
            pre.push(bindingPath[0].toLowerCase() + bindingPath.substring(1, bindingPath.length));
            return pre;
        }), []);
    };
    /**
     * @private
     * @param {?} fieldData
     * @return {?}
     */
    ApprovalCommentComponent.prototype.getFieldData = /**
     * @private
     * @param {?} fieldData
     * @return {?}
     */
    function (fieldData) {
        var _this = this;
        if (!fieldData) {
            return;
        }
        try {
            /** @type {?} */
            var workItemLogs_1 = [];
            /** @type {?} */
            var retList = JSON.parse(fieldData);
            retList.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                if (element.signature) {
                    element.url = _this.getUrl("{\"id\":\"" + element.signature + "\"}", 'taskcentersignature');
                }
                workItemLogs_1.push({
                    url: element.url,
                    createdTime: element.operateTime,
                    message: element.comment,
                    operatorName: element.operatorName,
                });
            }));
            this.workItemLogs = workItemLogs_1;
        }
        catch (error) {
            console.error(error);
        }
    };
    /*
    * 从根据域配置获取审批意见信息
    */
    /*
        * 从根据域配置获取审批意见信息
        */
    /**
     * @private
     * @return {?}
     */
    ApprovalCommentComponent.prototype.getApprovalComment = /*
        * 从根据域配置获取审批意见信息
        */
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var domainList = this.domains.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.domainCode && item.domainName && item.activityDefinedIds; }));
        /** @type {?} */
        var params = {
            processsInstId: this.procInstId,
            domains: domainList
        };
        this.dataList = [];
        this.apiService.getApprovalCommentApi(params).subscribe((/**
         * @param {?} resp
         * @return {?}
         */
        function (resp) {
            if (resp) {
                [].concat(resp).forEach((/**
                 * @param {?} value
                 * @return {?}
                 */
                function (value) {
                    /** @type {?} */
                    var data = new ApprovalComment();
                    data.title = value.domainName;
                    /** @type {?} */
                    var workItemLogs = [];
                    if (value.taskCommentImpl) {
                        if (_this.sortOrder === 'time') {
                            workItemLogs = value.taskCommentImpl.sort((/**
                             * @param {?} a
                             * @param {?} b
                             * @return {?}
                             */
                            function (a, b) {
                                return Date.parse(a.operatorTime) - Date.parse(b.operatorTime);
                            }));
                        }
                        else {
                            workItemLogs = value.taskCommentImpl;
                        }
                    }
                    // const workItemLogsFilter = workItemLogs.filter(workItem => workItem.action && this.filterAction.indexOf(workItem.action) > -1);
                    /** @type {?} */
                    var workItemLogsFilter = workItemLogs.filter((/**
                     * @param {?} workItem
                     * @return {?}
                     */
                    function (workItem) { return workItem.action && workItem.action !== 'Submit'; }));
                    workItemLogsFilter.map((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) {
                        if (item.signature) {
                            item.url = _this.getUrl(item.signature, 'taskcentersignature');
                        }
                        if (item.attachmentRef && item.attachmentRef !== '') {
                            /** @type {?} */
                            var attachmentInfo = JSON.parse(item.attachmentRef);
                            /** @type {?} */
                            var attachmentList = [];
                            for (var i = 0; i < attachmentInfo.length; i++) {
                                /** @type {?} */
                                var info = {
                                    fileName: attachmentInfo[i].fileName,
                                    fileType: _this.getFileType(attachmentInfo[i].fileName),
                                    fileSize: attachmentInfo[i].fileSize,
                                    url: _this.getDownLoadUrl(attachmentInfo[i].metadataId, 'wf_attachment'),
                                    metadataId: attachmentInfo[i].metadataId,
                                };
                                attachmentList.push(info);
                            }
                            item.attachmentList = attachmentList;
                        }
                    }));
                    data.workItemLogs = workItemLogsFilter;
                    _this.dataList.push(data);
                }));
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
        }));
    };
    /*
    * 获取审批意见附件地址
    */
    /*
        * 获取审批意见附件地址
        */
    /**
     * @private
     * @param {?} signature
     * @param {?} rootId
     * @return {?}
     */
    ApprovalCommentComponent.prototype.getUrl = /*
        * 获取审批意见附件地址
        */
    /**
     * @private
     * @param {?} signature
     * @param {?} rootId
     * @return {?}
     */
    function (signature, rootId) {
        /** @type {?} */
        var AttachUtil = {
            mergeString: (/**
             * @param {?} str
             * @param {?} str1
             * @return {?}
             */
            function (str, str1) {
                /** @type {?} */
                var min = str.length < str1.length ? str.length : str1.length;
                /** @type {?} */
                var res = '';
                /** @type {?} */
                var i = 0;
                for (i = 0; i < min; i++) {
                    res += str.substring(i, i + 1);
                    res += str1.substring(i, i + 1);
                }
                res += str.length < str1.length ? str1.substring(i) : str.substring(i);
                return res;
            }),
            getToken: (/**
             * @param {?} str
             * @return {?}
             */
            function (str) {
                /** @type {?} */
                var array = [1, 2, 3];
                if (str.length > 24) {
                    str = str.substring(0, 24);
                }
                /** @type {?} */
                var length = Math.floor(str.length / 3);
                /** @type {?} */
                var str1 = str.substring(0, length);
                /** @type {?} */
                var str2 = str.substring(length, 2 * length);
                /** @type {?} */
                var str3 = str.substring(2 * length, 3 * length);
                /** @type {?} */
                var randomArray = [];
                /** @type {?} */
                var random = Math.ceil(Math.random() * 3);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                random = Math.ceil(Math.random() * 2);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                randomArray.push(array[0]);
                /** @type {?} */
                var timeStamp = Math.round(new Date().getTime() / 1000) + '';
                return (timeStamp.substring(0, 5) +
                    'times' +
                    randomArray[0] +
                    '' +
                    randomArray[1] +
                    '' +
                    randomArray[2] +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[0]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[1]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[2]) +
                    'times' +
                    timeStamp.substring(5));
            }),
            switchStr: (/**
             * @param {?} str1
             * @param {?} str2
             * @param {?} str3
             * @param {?} i
             * @return {?}
             */
            function (str1, str2, str3, i) {
                switch (i) {
                    case 1:
                        return str1;
                    case 2:
                        return str2;
                    case 3:
                        return str3;
                }
            })
        };
        rootId = rootId || 'default-root';
        /** @type {?} */
        var attachId = JSON.parse(signature).id;
        /** @type {?} */
        var url = "/api/runtime/dfs/v1.0/doc/filecontent?metadataid=" + attachId + "&rootid=" + rootId + "&token=" + AttachUtil.getToken(AttachUtil.mergeString(attachId, rootId));
        return url;
    };
    /*
    * 审批日志国际化信息
    */
    /*
        * 审批日志国际化信息
        */
    /**
     * @param {?} code
     * @return {?}
     */
    ApprovalCommentComponent.prototype.translateTask = /*
        * 审批日志国际化信息
        */
    /**
     * @param {?} code
     * @return {?}
     */
    function (code) {
        /** @type {?} */
        var supportLanguage = ['zh-CHS', 'zh_CHT', 'en'];
        /** @type {?} */
        var defaultLang = localStorage.getItem('languageCode');
        /** @type {?} */
        var langData;
        /** @type {?} */
        var translate = {
            'zh-CHS': {
                logDate: '处理时间',
                processTime: '处理时长',
                message: '办理意见',
                showForecastLog: '显示后续审批人',
                hiddenForecastLog: '隐藏后续审批人',
                terminal: '来自',
                web: '电脑端',
                mobile: '移动端',
                title: '审批记录',
                viewProcess: '查看流程',
                nodeName: '节点名称',
                participant: '办理人',
                receiveTime: '接收时间',
                action: '操作',
                submitTime: '提交时间',
                todo: '待办理',
                done: '已办理',
                submit: '已提交',
                undo: '未到达',
                toAssign: '未指派',
                toRead: '待阅',
                noResolvedUser: '未解析到用户',
                noData: '暂无数据',
                startTime: '接收时间',
                taskRead: '已读',
                taskToRead: '未读',
                taskHandle: '实际操作人',
                toSubmit: '待提交',
                download: '下载',
                view: '查看',
            },
            en: {
                logDate: 'EndTime',
                processTime: 'ProcessTime',
                message: 'Approval opinion',
                showForecastLog: 'show forecast log',
                hiddenForecastLog: 'hide forecast log',
                terminal: 'From',
                web: 'Web',
                mobile: 'Mobile',
                title: 'Logs',
                viewProcess: 'View Process',
                nodeName: 'Node name',
                participant: 'Participant',
                receiveTime: 'Receive time',
                action: 'Action',
                submitTime: 'Submit time',
                todo: 'Todo',
                done: 'Done',
                submit: 'Submit',
                undo: 'Undo',
                toAssign: 'To Assign',
                toRead: 'To Read',
                noResolvedUser: 'No one',
                noData: 'Empty',
                startTime: 'Start time',
                taskRead: 'Read',
                taskToRead: 'To read',
                taskOwner: 'Operator',
                toSubmit: 'To submit',
                download: 'download',
                view: 'view',
            },
            'zh-CHT': {
                logDate: '處理時間',
                processTime: '處理時長',
                message: '辦理意見',
                showForecastLog: '顯示後續審批人',
                hiddenForecastLog: '隱藏後續審批人',
                terminal: '來自',
                web: '電腦端',
                mobile: '移動端',
                title: '審批記錄',
                viewProcess: '查看流程',
                nodeName: '節點名稱',
                participant: '辦理人',
                receiveTime: '接收時間',
                action: '操作',
                submitTime: '提交時間',
                todo: '待辦理',
                done: '已辦理',
                submit: '已提交',
                undo: '未到達',
                toAssign: '未指派',
                toRead: '待閱',
                noResolvedUser: '未解析到用戶',
                noData: '暫無數據',
                startTime: '接收時間',
                taskRead: '已讀',
                taskToRead: '未讀',
                taskHandle: '實際操作人',
                toSubmit: '待提交',
                download: '下載',
                view: '查看',
            },
        };
        if (defaultLang && supportLanguage.includes(defaultLang)) {
            langData = translate[defaultLang];
        }
        else {
            langData = translate['zh-CHS'];
        }
        return langData[code];
    };
    /*
    * 获取附件文件类型
    */
    /*
        * 获取附件文件类型
        */
    /**
     * @private
     * @param {?} fileName
     * @return {?}
     */
    ApprovalCommentComponent.prototype.getFileType = /*
        * 获取附件文件类型
        */
    /**
     * @private
     * @param {?} fileName
     * @return {?}
     */
    function (fileName) {
        /** @type {?} */
        var pos = fileName.lastIndexOf('.');
        /** @type {?} */
        var type = fileName.substring(pos + 1);
        type = type === '' ? 'Default' : type.toLowerCase();
        /** @type {?} */
        var docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';
        /** @type {?} */
        var videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';
        /** @type {?} */
        var audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';
        /** @type {?} */
        var imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';
        if (docLib.indexOf(type) >= 0) {
            type = type.toLowerCase();
        }
        else if (videoLib.indexOf(type) >= 0) {
            type = 'video';
        }
        else if (audioLib.indexOf(type) >= 0) {
            type = 'audio';
        }
        else if (imgLib.indexOf(type) >= 0) {
            type = 'picture';
        }
        else {
            type = 'default';
        }
        return ('/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/' +
            type +
            '.svg?v=20230316');
    };
    /*
    * 获取附件下载地址
    */
    /*
        * 获取附件下载地址
        */
    /**
     * @private
     * @param {?} attachId
     * @param {?} rootId
     * @return {?}
     */
    ApprovalCommentComponent.prototype.getDownLoadUrl = /*
        * 获取附件下载地址
        */
    /**
     * @private
     * @param {?} attachId
     * @param {?} rootId
     * @return {?}
     */
    function (attachId, rootId) {
        rootId = rootId || 'default-root';
        /** @type {?} */
        var ishttps = 'https:' === document.location.protocol ? true : false;
        /** @type {?} */
        var url = window.location.host;
        if (ishttps) {
            url = 'https://' + url;
        }
        else {
            url = 'http://' + url;
        }
        url += "/api/runtime/dfs/v1.0/doc/filecontent?metadataid=" + attachId + "&rootid=" + rootId + "&token=" + this.AttachUtil.getToken(this.AttachUtil.mergeString(attachId, rootId));
        return url;
    };
    /*
    * 点击下载
    */
    /*
        * 点击下载
        */
    /**
     * @param {?} downloadUrl
     * @return {?}
     */
    ApprovalCommentComponent.prototype.attachmentDownload = /*
        * 点击下载
        */
    /**
     * @param {?} downloadUrl
     * @return {?}
     */
    function (downloadUrl) {
        window.open(downloadUrl);
    };
    /**
     * 预览附件
     */
    /**
     * 预览附件
     * @param {?} metadataIds
     * @return {?}
     */
    ApprovalCommentComponent.prototype.attachmentPreview = /**
     * 预览附件
     * @param {?} metadataIds
     * @return {?}
     */
    function (metadataIds) {
        /** @type {?} */
        var options = {
            appType: 'app',
            funcId: '',
            tabName: '文档在线预览',
            appId: '6ccb476b-f2ba-df8f-6f47-d37d100c56e2',
            appEntrance: 'docviewertab',
            tabId: new Date().getTime(),
            entityParams: {
                metadataIdList: metadataIds,
                rootId: 'wf_attachment',
                metadataId: null,
                viewOptions: {
                    showHeader: true,
                    showPaging: true,
                    showThumbnails: true,
                    showDownload: true,
                    showSearch: true,
                    showZoom: true,
                    showPrint: true,
                    showSecondaryToolBar: true,
                },
            },
        };
        if (((/** @type {?} */ (top))).gspframeworkService) {
            ((/** @type {?} */ (top))).gspframeworkService.rtf.func.openMenu(options);
            top.postMessage('TaskCloseLogDialog', top.document.location.origin);
        }
    };
    ApprovalCommentComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-approval-comments',
                    template: "<ng-container *ngIf=\"dataList && displayType === DisplayTypes.Default\">\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content\" *ngFor=\"let comment of dataList\">\r\n            <div class=\"left-content\">\r\n                <div class=\"approval-suggestion\">{{comment.title}}</div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <div *ngFor=\"let item of comment.workItemLogs\">\r\n                    <div class=\"right-content-item\">\r\n                        <div class=\"right-content-item-list-content\">\r\n                            <div class=\"approval-comment-message\">{{item?.message}}</div>\r\n                            <div *ngIf=\"attachmentVisible\" class=\"approval-comment-attachment\">\r\n                                <div *ngFor=\"let attachment of item.attachmentList\"\r\n                                    class=\"log-attachment task-attachmentlist-li\">\r\n                                    <!-- \u9644\u4EF6\u540D\u79F0 -->\r\n                                    <div class=\"log-attachment-title\">\r\n                                        <img class=\"log-attachment-img\" src=\"{{attachment.fileType}}\" />\r\n                                        <span>{{attachment.fileName}}</span>\r\n                                    </div>\r\n                                    <div style=\"display: flex; align-items: center\">\r\n                                        <!-- \u9644\u4EF6\u5927\u5C0F -->\r\n                                        <div><span class=\"log-attachment-size\">{{attachment.fileSize}}</span></div>\r\n                                        <!-- \u4E0B\u8F7D\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-download\" id=\"log-attachment-download\"\r\n                                            title=\"{{translateTask('download')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-download.svg?v=20230222\"\r\n                                                (click)=\"attachmentDownload(attachment.url)\" />\r\n                                        </div>\r\n                                        <!-- \u67E5\u770B\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-preview\" id=\"log-attachment-preview\"\r\n                                            title=\"{{translateTask('view')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-view.svg?v=20230222\"\r\n                                                (click)=\"attachmentPreview([attachment?.metadataId])\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right-content-item-list-sign\">\r\n                            <div *ngIf=\"item?.url\" class=\"approval-operator-name\">\r\n                                <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                            </div>\r\n                            <div *ngIf=\"!item?.url\" class=\"approval-operator-name\">{{item?.operatorName}}</div>\r\n                            <div class=\"approval-start-time\">\r\n                                <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n<ng-container *ngIf=\"dataList && displayType === DisplayTypes.Theme1\">\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content-item2\" *ngFor=\"let comment of dataList\">\r\n            <div class=\"approval-suggestion\">{{comment.title}}</div>\r\n            <div *ngFor=\"let item of comment.workItemLogs\">\r\n                <div class=\"right-content-item\">\r\n                    <div class=\"right-content-item-list-content\">\r\n                        <div class=\"approval-comment-message-item2\">{{item?.message}}</div>\r\n                    </div>\r\n                    <div class=\"right-content-item-list-sign\">\r\n                        <div *ngIf=\"item?.url\" class=\"approval-operator-name-item2\">\r\n                            <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                        </div>\r\n                        <div *ngIf=\"!item?.url\" class=\"approval-operator-name-item2\">{{item?.operatorName}}</div>\r\n                        <div class=\"approval-start-time-item2\">\r\n                            <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"displayType === DisplayTypes.Single\">\r\n\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content\">\r\n            <div class=\"left-content\">\r\n                <div class=\"approval-suggestion\">{{title}}</div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <div *ngFor=\"let item of workItemLogs\">\r\n                    <div class=\"right-content-item\">\r\n                        <div class=\"right-content-item-list-content\">\r\n                            <div class=\"approval-comment-message\">{{item?.message}}</div>\r\n                            <div *ngIf=\"attachmentVisible\" class=\"approval-comment-attachment\">\r\n                                <div *ngFor=\"let attachment of item.attachmentList\"\r\n                                    class=\"log-attachment task-attachmentlist-li\">\r\n                                    <!-- \u9644\u4EF6\u540D\u79F0 -->\r\n                                    <div class=\"log-attachment-title\">\r\n                                        <img class=\"log-attachment-img\" src=\"{{attachment.fileType}}\" />\r\n                                        <span>{{attachment.fileName}}</span>\r\n                                    </div>\r\n                                    <div style=\"display: flex; align-items: center\">\r\n                                        <!-- \u9644\u4EF6\u5927\u5C0F -->\r\n                                        <div><span class=\"log-attachment-size\">{{attachment.fileSize}}</span></div>\r\n                                        <!-- \u4E0B\u8F7D\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-download\" id=\"log-attachment-download\"\r\n                                            title=\"{{translateTask('download')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-download.svg?v=20230222\"\r\n                                                (click)=\"attachmentDownload(attachment.url)\" />\r\n                                        </div>\r\n                                        <!-- \u67E5\u770B\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-preview\" id=\"log-attachment-preview\"\r\n                                            title=\"{{translateTask('view')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-view.svg?v=20230222\"\r\n                                                (click)=\"attachmentPreview([attachment?.metadataId])\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right-content-item-list-sign\">\r\n                            <div *ngIf=\"item?.url\" class=\"approval-operator-name\">\r\n                                <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                            </div>\r\n                            <div *ngIf=\"!item?.url\" class=\"approval-operator-name\">{{item?.operatorName}}</div>\r\n                            <div class=\"approval-start-time\">\r\n                                <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</ng-container>",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return ApprovalCommentComponent; })),
                            multi: true
                        },
                        ApiService,
                    ],
                    styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{flex:0 0 100%;position:relative;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}.main-content{width:100%;height:100%;display:flex;flex-direction:column}.body-content{box-sizing:border-box;flex:1.5;display:flex;flex-direction:row;margin:0 -1px -1px 0;border:1px dashed #ccc;border-collapse:collapse}.body-content-item2{box-sizing:border-box;flex:1.5;display:flex;flex-direction:column;padding:10px 0 0 10px;margin:0 -1px -1px 0;border:1px dashed #ccc;border-collapse:collapse;min-height:36px}.left-content{width:160px;box-sizing:border-box;display:flex;justify-content:center;align-items:center;min-height:36px;border-right:1px dashed #ccc}.right-content{box-sizing:border-box;padding-left:12px;flex:1;display:flex;flex-direction:column}.right-content-item{box-sizing:border-box;display:flex;flex-direction:row}.right-content-item-list-content{display:flex;flex:1;flex-direction:column;box-sizing:border-box;padding-top:10px}.right-content-item-list-sign{display:flex;box-sizing:border-box;width:210px;flex-direction:column}.approval-comment-message{flex:1;font-size:12px;padding:0 10px 10px}.approval-comment-attachment{padding-bottom:10px}.approval-comment-message-item2{font-size:12px;padding:10px}.date_area{font-size:6px}.approval-start-time{font-size:10px;padding:0 10px 15px}.approval-start-time-item2{font-size:10px;padding-top:10px;margin-bottom:15px}.approval-operator-name{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px;text-align:center;margin-top:20px;padding-bottom:10px}.approval-operator-name-item2{font-size:12px;text-align:center}.footer-content .right-content .right-content-item .right-content-item-list-sign{margin-top:8px}.approval-suggestion{white-space:pre-line;padding:10px;font-size:12px;word-wrap:break-word;word-break:break-all}.image-height-width{height:34px;width:100px}.log-attachment{display:flex;justify-content:space-between;align-items:center;background:rgba(249,252,255,.87);border:0 solid rgba(229,232,237,.71);border-radius:3px;margin-top:10px;padding:5px 10px;cursor:pointer}.log-attachment-title{display:flex;align-items:center;font-size:12px}.log-attachment-img{height:24px;margin-right:10px}.log-attachment-name{white-space:pre-wrap;word-break:break-all}.log-attachment-size{display:block;font-size:12px;color:rgba(45,47,51,.45);padding:0 10px}.log-attachment-icon-download{border-radius:50%;background:#c7d4ee;margin-left:10px;color:#fff;cursor:pointer;width:16px;height:16px;display:flex;justify-content:center;align-items:center}.log-attachment-icon-preview{border-radius:50%;background:#2b87ff;margin-left:10px;color:#fff;cursor:pointer;width:16px;height:16px;display:flex;justify-content:center;align-items:center}.log-task-read{display:flex;align-items:center;font-size:12px;color:rgba(0,0,0,.45);padding:8px 14px;background:rgba(245,248,252,.6);box-shadow:inset 0 1px 0 0 #e9ecf3}.log-task-read-text{padding:0 8px}"]
                }] }
    ];
    /** @nocollapse */
    ApprovalCommentComponent.ctorParameters = function () { return [
        { type: ApiService },
        { type: Injector }
    ]; };
    ApprovalCommentComponent.propDecorators = {
        title: [{ type: Input }],
        domains: [{ type: Input }],
        procInstId: [{ type: Input }],
        sortOrder: [{ type: Input }],
        field: [{ type: Input }],
        bindingfield: [{ type: Input }],
        displayType: [{ type: Input }],
        attachmentVisible: [{ type: Input }]
    };
    return ApprovalCommentComponent;
}());
export { ApprovalCommentComponent };
if (false) {
    /** @type {?} */
    ApprovalCommentComponent.prototype.title;
    /** @type {?} */
    ApprovalCommentComponent.prototype.domains;
    /** @type {?} */
    ApprovalCommentComponent.prototype.procInstId;
    /** @type {?} */
    ApprovalCommentComponent.prototype.sortOrder;
    /** @type {?} */
    ApprovalCommentComponent.prototype.field;
    /** @type {?} */
    ApprovalCommentComponent.prototype.bindingfield;
    /** @type {?} */
    ApprovalCommentComponent.prototype.displayType;
    /** @type {?} */
    ApprovalCommentComponent.prototype.attachmentVisible;
    /** @type {?} */
    ApprovalCommentComponent.prototype.dataList;
    /** @type {?} */
    ApprovalCommentComponent.prototype.filterAction;
    /** @type {?} */
    ApprovalCommentComponent.prototype.AttachUtil;
    /** @type {?} */
    ApprovalCommentComponent.prototype.DisplayTypes;
    /** @type {?} */
    ApprovalCommentComponent.prototype.workItemLogs;
    /**
     * @type {?}
     * @private
     */
    ApprovalCommentComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    ApprovalCommentComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwcm92YWwtY29tbWVudHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9hcHByb3ZhbC1jb21tZW50cy8iLCJzb3VyY2VzIjpbImxpYi9hcHByb3ZhbC1jb21tZW50cy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUErQyxNQUFNLGVBQWUsQ0FBQztBQUNwSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFOUQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDOztBQUVsRCxJQUFLLFlBQVk7SUFDYixNQUFNLFVBQVc7SUFDakIsT0FBTyxXQUFZO0lBQ25CLE1BQU0sVUFBVztFQUNwQjtBQUVEO0lBcURJLGtDQUNZLFVBQXNCLEVBQ3RCLFFBQWtCO1FBRjlCLGlCQVdDO1FBVlcsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFVOzs7O1FBN0JyQixZQUFPLEdBQUcsRUFBRSxDQUFDO1FBYWIsZ0JBQVcsR0FBaUIsWUFBWSxDQUFDLE9BQU8sQ0FBQztRQUNqRCxzQkFBaUIsR0FBWSxJQUFJLENBQUMsQ0FBQyxTQUFTO1FBRXJELGlCQUFZLEdBQWEsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFHMUMsaUJBQVksR0FBRyxZQUFZLENBQUM7O1lBWWxCLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTO1FBQy9ELGFBQWEsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFNBQVM7Ozs7UUFBQyxVQUFDLE1BQWM7WUFDdkQsSUFBSSxLQUFJLENBQUMsV0FBVyxLQUFLLEtBQUksQ0FBQyxZQUFZLENB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QVcsRUFBRSxVQUFVOzs7NEJBQUMsY0FBTSxPQUFBLHdCQUF3QixFQUF4QixDQUF3QixFQUFDOzRCQUN2RCxLQUFLLEVBQUUsSUFBSTt5QkFDZDt3QkFDRCxVQUFVO3FCQUNiOztpQkFDSjs7OztnQkFwQlEsVUFBVTtnQkFMYSxRQUFROzs7d0JBbUNuQyxLQUFLOzBCQUlMLEtBQUs7NkJBQ0wsS0FBSzs0QkFDTCxLQUFLO3dCQUtMLEtBQUs7K0JBSUwsS0FBSzs4QkFFTCxLQUFLO29DQUNMLEtBQUs7O0lBZ2VWLCtCQUFDO0NBQUEsQUF4Z0JELElBd2dCQztTQTNmWSx3QkFBd0I7OztJQVNqQyx5Q0FBdUI7O0lBSXZCLDJDQUFzQjs7SUFDdEIsOENBQTRCOztJQUM1Qiw2Q0FBMkI7O0lBSzNCLHlDQUF1Qjs7SUFJdkIsZ0RBQThCOztJQUU5QiwrQ0FBMEQ7O0lBQzFELHFEQUEyQzs7SUFDM0MsNENBQTRCOztJQUM1QixnREFBMEM7O0lBQzFDLDhDQUFnQjs7SUFFaEIsZ0RBQTRCOztJQU01QixnREFBMEM7Ozs7O0lBR3RDLDhDQUE4Qjs7Ozs7SUFDOUIsNENBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBmb3J3YXJkUmVmLCBJbmplY3RvciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IENoYW5nZSB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuaW1wb3J0IHsgQXBwcm92YWxDb21tZW50IH0gZnJvbSAnLi4vZW50aXR5L2FwcHJvdmFsLWNvbW1lbnRzJztcclxuaW1wb3J0IHsgV29ya0l0ZW1Mb2cgfSBmcm9tICcuLi9lbnRpdHkvd29ya0l0ZW1Mb2cnO1xyXG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vdXRpbHMvYXBpLnNlcnZpY2UnO1xyXG5cclxuZW51bSBEaXNwbGF5VHlwZXMge1xyXG4gICAgU2luZ2xlID0gJ3NpbmdsZScsXHJcbiAgICBEZWZhdWx0ID0gJ2RlZmF1bHQnLFxyXG4gICAgVGhlbWUxID0gJ3RoZW1lMSdcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1hcHByb3ZhbC1jb21tZW50cycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vYXBwcm92YWwtY29tbWVudHMuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vYXBwcm92YWwtY29tbWVudHMuY29tcG9uZW50LmNzcyddLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQXBwcm92YWxDb21tZW50Q29tcG9uZW50KSxcclxuICAgICAgICAgICAgbXVsdGk6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIEFwaVNlcnZpY2UsXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBcHByb3ZhbENvbW1lbnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuXHJcbiAgICAvKlxyXG4gICAgKiDopoHlkJHlrZfmrrXnlYzpnaLpnaDpvZDvvIzkvYbmmK/pnIDopoHlhbzlrrnlnKhzZWN0aW9uIOebtOaOpeiOt+WPluaVsOaNrlxyXG4gICAgKi9cclxuXHJcbiAgICAvKlxyXG4gICAgKiDlrqHmibnmhI/op4HooajloasgXHJcbiAgICAqL1xyXG4gICAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcclxuICAgIC8qXHJcbiAgICAqIOWfn+mFjee9rlxyXG4gICAgKi9cclxuICAgIEBJbnB1dCgpIGRvbWFpbnMgPSBbXTtcclxuICAgIEBJbnB1dCgpIHByb2NJbnN0SWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIOe7keWumueahOWtl+autVxyXG4gICAgKi9cclxuICAgIEBJbnB1dCgpIGZpZWxkOiBzdHJpbmc7XHJcbiAgICAvKlxyXG4gICAgKiDnu5HlrprlrZfmrrVcclxuICAgICovXHJcbiAgICBASW5wdXQoKSBiaW5kaW5nZmllbGQ6IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKSBkaXNwbGF5VHlwZTogRGlzcGxheVR5cGVzID0gRGlzcGxheVR5cGVzLkRlZmF1bHQ7XHJcbiAgICBASW5wdXQoKSBhdHRhY2htZW50VmlzaWJsZTogYm9vbGVhbiA9IHRydWU7IC8vIOmZhOS7tuaYr+WQpuWPr+ingVxyXG4gICAgZGF0YUxpc3Q6IEFwcHJvdmFsQ29tbWVudFtdO1xyXG4gICAgZmlsdGVyQWN0aW9uOiBzdHJpbmdbXSA9IFsnUGFzcycsICdCYWNrJ107XHJcbiAgICBBdHRhY2hVdGlsOiBhbnk7XHJcblxyXG4gICAgRGlzcGxheVR5cGVzID0gRGlzcGxheVR5cGVzO1xyXG5cclxuXHJcbiAgICAvKlxyXG4gICAgKiDljZXmnaHmqKHlvI/kuIvlpITnkIZcclxuICAgICovXHJcbiAgICB3b3JrSXRlbUxvZ3M6IEFycmF5PFBhcnRpYWw8V29ya0l0ZW1Mb2c+PjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGFwaVNlcnZpY2U6IEFwaVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCByb290Vmlld01vZGVsID0gdGhpcy5pbmplY3RvcltcInZpZXdcIl0uY29tcG9uZW50LnZpZXdNb2RlbDtcclxuICAgICAgICByb290Vmlld01vZGVsLmJpbmRpbmdEYXRhLmNoYW5nZXMuc3Vic2NyaWJlKChjaGFuZ2U6IENoYW5nZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gdGhpcy5EaXNwbGF5VHlwZXMuU2luZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZpZWxkRGF0YShyb290Vmlld01vZGVsLmJpbmRpbmdEYXRhLmdldFZhbHVlKHRoaXMuc29ydFBhdGgodGhpcy5maWVsZCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9jSW5zdElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghIXRoaXMuZGF0YUxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09IHRoaXMuRGlzcGxheVR5cGVzLkRlZmF1bHQgJiYgdGhpcy5kb21haW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldEFwcHJvdmFsQ29tbWVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gdGhpcy5EaXNwbGF5VHlwZXMuU2luZ2xlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RWaWV3TW9kZWwgPSB0aGlzLmluamVjdG9yW1widmlld1wiXS5jb21wb25lbnQudmlld01vZGVsO1xyXG4gICAgICAgICAgICB0aGlzLmdldEZpZWxkRGF0YShyb290Vmlld01vZGVsLmJpbmRpbmdEYXRhLmdldFZhbHVlKHRoaXMuc29ydFBhdGgodGhpcy5maWVsZCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IEF0dGFjaFV0aWwgPSB7XHJcbiAgICAgICAgICAgIG1lcmdlU3RyaW5nOiAoc3RyLCBzdHIxKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW4gPSBzdHIubGVuZ3RoIDwgc3RyMS5sZW5ndGggPyBzdHIubGVuZ3RoIDogc3RyMS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWluOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMgKz0gc3RyLnN1YnN0cmluZyhpLCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IHN0cjEuc3Vic3RyaW5nKGksIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcyArPSBzdHIubGVuZ3RoIDwgc3RyMS5sZW5ndGggPyBzdHIxLnN1YnN0cmluZyhpKSA6IHN0ci5zdWJzdHJpbmcoaSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRUb2tlbjogKHN0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXkgPSBbMSwgMiwgM107XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+IDI0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCAyNCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLmZsb29yKHN0ci5sZW5ndGggLyAzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cjEgPSBzdHIuc3Vic3RyaW5nKDAsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHIyID0gc3RyLnN1YnN0cmluZyhsZW5ndGgsIDIgKiBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyMyA9IHN0ci5zdWJzdHJpbmcoMiAqIGxlbmd0aCwgMyAqIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kb21BcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMyk7XHJcbiAgICAgICAgICAgICAgICByYW5kb21BcnJheS5wdXNoKGFycmF5W3JhbmRvbSAtIDFdKTtcclxuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShyYW5kb20gLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMik7XHJcbiAgICAgICAgICAgICAgICByYW5kb21BcnJheS5wdXNoKGFycmF5W3JhbmRvbSAtIDFdKTtcclxuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShyYW5kb20gLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbMF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApICsgJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVTdGFtcC5zdWJzdHJpbmcoMCwgNSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lcycgK1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5WzBdICtcclxuICAgICAgICAgICAgICAgICAgICAnJyArXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZG9tQXJyYXlbMV0gK1xyXG4gICAgICAgICAgICAgICAgICAgICcnICtcclxuICAgICAgICAgICAgICAgICAgICByYW5kb21BcnJheVsyXSArXHJcbiAgICAgICAgICAgICAgICAgICAgQXR0YWNoVXRpbC5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMF0pICtcclxuICAgICAgICAgICAgICAgICAgICBBdHRhY2hVdGlsLnN3aXRjaFN0cihzdHIxLCBzdHIyLCBzdHIzLCByYW5kb21BcnJheVsxXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgIEF0dGFjaFV0aWwuc3dpdGNoU3RyKHN0cjEsIHN0cjIsIHN0cjMsIHJhbmRvbUFycmF5WzJdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzJyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YW1wLnN1YnN0cmluZyg1KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3dpdGNoU3RyOiAoc3RyMSwgc3RyMiwgc3RyMywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuQXR0YWNoVXRpbCA9IEF0dGFjaFV0aWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzb3J0UGF0aChmaWVsZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aEFycnkgPSBmaWVsZC5zcGxpdCgnXycpO1xyXG4gICAgICAgIHJldHVybiBwYXRoQXJyeS5yZWR1Y2UoKHByZSwgYmluZGluZ1BhdGgpID0+IHtcclxuICAgICAgICAgICAgcHJlLnB1c2goYmluZGluZ1BhdGhbMF0udG9Mb3dlckNhc2UoKSArIGJpbmRpbmdQYXRoLnN1YnN0cmluZygxLCBiaW5kaW5nUGF0aC5sZW5ndGgpKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJlO1xyXG4gICAgICAgIH0sIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZpZWxkRGF0YShmaWVsZERhdGEpIHtcclxuICAgICAgICBpZiAoIWZpZWxkRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgd29ya0l0ZW1Mb2dzOiBBcnJheTxQYXJ0aWFsPFdvcmtJdGVtTG9nPj4gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgcmV0TGlzdDogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgY29tbWVudDogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgdXJsPzogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0b3JOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRlVGltZTogRGF0ZTtcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogc3RyaW5nO1xyXG4gICAgICAgICAgICB9PiA9IEpTT04ucGFyc2UoZmllbGREYXRhKTtcclxuICAgICAgICAgICAgcmV0TGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc2lnbmF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51cmwgPSB0aGlzLmdldFVybChge1wiaWRcIjpcIiR7ZWxlbWVudC5zaWduYXR1cmV9XCJ9YCwgJ3Rhc2tjZW50ZXJzaWduYXR1cmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdvcmtJdGVtTG9ncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnQudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRUaW1lOiBlbGVtZW50Lm9wZXJhdGVUaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVsZW1lbnQuY29tbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRvck5hbWU6IGVsZW1lbnQub3BlcmF0b3JOYW1lLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLndvcmtJdGVtTG9ncyA9IHdvcmtJdGVtTG9ncztcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgKiDku47moLnmja7ln5/phY3nva7ojrflj5blrqHmibnmhI/op4Hkv6Hmga9cclxuICAgICovXHJcbiAgICBwcml2YXRlIGdldEFwcHJvdmFsQ29tbWVudCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBkb21haW5MaXN0ID0gdGhpcy5kb21haW5zLmZpbHRlcihpdGVtID0+IGl0ZW0uZG9tYWluQ29kZSAmJiBpdGVtLmRvbWFpbk5hbWUgJiYgaXRlbS5hY3Rpdml0eURlZmluZWRJZHMpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgcHJvY2Vzc3NJbnN0SWQ6IHRoaXMucHJvY0luc3RJZCxcclxuICAgICAgICAgICAgZG9tYWluczogZG9tYWluTGlzdFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXBpU2VydmljZS5nZXRBcHByb3ZhbENvbW1lbnRBcGkocGFyYW1zKS5zdWJzY3JpYmUocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXNwKSB7XHJcbiAgICAgICAgICAgICAgICBbXS5jb25jYXQocmVzcCkuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBBcHByb3ZhbENvbW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnRpdGxlID0gdmFsdWUuZG9tYWluTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd29ya0l0ZW1Mb2dzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRhc2tDb21tZW50SW1wbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0T3JkZXIgPT09ICd0aW1lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya0l0ZW1Mb2dzID0gdmFsdWUudGFza0NvbW1lbnRJbXBsLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZS5wYXJzZShhLm9wZXJhdG9yVGltZSkgLSBEYXRlLnBhcnNlKGIub3BlcmF0b3JUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya0l0ZW1Mb2dzID0gdmFsdWUudGFza0NvbW1lbnRJbXBsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHdvcmtJdGVtTG9nc0ZpbHRlciA9IHdvcmtJdGVtTG9ncy5maWx0ZXIod29ya0l0ZW0gPT4gd29ya0l0ZW0uYWN0aW9uICYmIHRoaXMuZmlsdGVyQWN0aW9uLmluZGV4T2Yod29ya0l0ZW0uYWN0aW9uKSA+IC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrSXRlbUxvZ3NGaWx0ZXIgPSB3b3JrSXRlbUxvZ3MuZmlsdGVyKHdvcmtJdGVtID0+IHdvcmtJdGVtLmFjdGlvbiAmJiB3b3JrSXRlbS5hY3Rpb24gIT09ICdTdWJtaXQnKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JrSXRlbUxvZ3NGaWx0ZXIubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5zaWduYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udXJsID0gdGhpcy5nZXRVcmwoaXRlbS5zaWduYXR1cmUsICd0YXNrY2VudGVyc2lnbmF0dXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uYXR0YWNobWVudFJlZiAmJiBpdGVtLmF0dGFjaG1lbnRSZWYgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRhY2htZW50SW5mbyA9IEpTT04ucGFyc2UoaXRlbS5hdHRhY2htZW50UmVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dGFjaG1lbnRJbmZvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IGF0dGFjaG1lbnRJbmZvW2ldLmZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlVHlwZTogdGhpcy5nZXRGaWxlVHlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRJbmZvW2ldLmZpbGVOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTaXplOiBhdHRhY2htZW50SW5mb1tpXS5maWxlU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmdldERvd25Mb2FkVXJsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudEluZm9baV0ubWV0YWRhdGFJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3Zl9hdHRhY2htZW50J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUlkOiBhdHRhY2htZW50SW5mb1tpXS5tZXRhZGF0YUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudExpc3QucHVzaChpbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYXR0YWNobWVudExpc3QgPSBhdHRhY2htZW50TGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEud29ya0l0ZW1Mb2dzID0gd29ya0l0ZW1Mb2dzRmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3QucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgKiDojrflj5blrqHmibnmhI/op4HpmYTku7blnLDlnYBcclxuICAgICovXHJcbiAgICBwcml2YXRlIGdldFVybChzaWduYXR1cmUsIHJvb3RJZCkge1xyXG4gICAgICAgIGNvbnN0IEF0dGFjaFV0aWwgPSB7XHJcbiAgICAgICAgICAgIG1lcmdlU3RyaW5nOiAoc3RyLCBzdHIxKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW4gPSBzdHIubGVuZ3RoIDwgc3RyMS5sZW5ndGggPyBzdHIubGVuZ3RoIDogc3RyMS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWluOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMgKz0gc3RyLnN1YnN0cmluZyhpLCBpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IHN0cjEuc3Vic3RyaW5nKGksIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcyArPSBzdHIubGVuZ3RoIDwgc3RyMS5sZW5ndGggPyBzdHIxLnN1YnN0cmluZyhpKSA6IHN0ci5zdWJzdHJpbmcoaSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRUb2tlbjogKHN0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXkgPSBbMSwgMiwgM107XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+IDI0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCAyNCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLmZsb29yKHN0ci5sZW5ndGggLyAzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cjEgPSBzdHIuc3Vic3RyaW5nKDAsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHIyID0gc3RyLnN1YnN0cmluZyhsZW5ndGgsIDIgKiBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyMyA9IHN0ci5zdWJzdHJpbmcoMiAqIGxlbmd0aCwgMyAqIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5kb21BcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMyk7XHJcbiAgICAgICAgICAgICAgICByYW5kb21BcnJheS5wdXNoKGFycmF5W3JhbmRvbSAtIDFdKTtcclxuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShyYW5kb20gLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMik7XHJcbiAgICAgICAgICAgICAgICByYW5kb21BcnJheS5wdXNoKGFycmF5W3JhbmRvbSAtIDFdKTtcclxuICAgICAgICAgICAgICAgIGFycmF5LnNwbGljZShyYW5kb20gLSAxLCAxKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbMF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApICsgJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVTdGFtcC5zdWJzdHJpbmcoMCwgNSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICd0aW1lcycgK1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5WzBdICtcclxuICAgICAgICAgICAgICAgICAgICAnJyArXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZG9tQXJyYXlbMV0gK1xyXG4gICAgICAgICAgICAgICAgICAgICcnICtcclxuICAgICAgICAgICAgICAgICAgICByYW5kb21BcnJheVsyXSArXHJcbiAgICAgICAgICAgICAgICAgICAgQXR0YWNoVXRpbC5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMF0pICtcclxuICAgICAgICAgICAgICAgICAgICBBdHRhY2hVdGlsLnN3aXRjaFN0cihzdHIxLCBzdHIyLCBzdHIzLCByYW5kb21BcnJheVsxXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgIEF0dGFjaFV0aWwuc3dpdGNoU3RyKHN0cjEsIHN0cjIsIHN0cjMsIHJhbmRvbUFycmF5WzJdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzJyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YW1wLnN1YnN0cmluZyg1KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3dpdGNoU3RyOiAoc3RyMSwgc3RyMiwgc3RyMywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByb290SWQgPSByb290SWQgfHwgJ2RlZmF1bHQtcm9vdCc7XHJcbiAgICAgICAgY29uc3QgYXR0YWNoSWQgPSBKU09OLnBhcnNlKHNpZ25hdHVyZSkuaWQ7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2MvZmlsZWNvbnRlbnQ/bWV0YWRhdGFpZD0ke2F0dGFjaElkfSZyb290aWQ9JHtyb290SWR9JnRva2VuPSR7QXR0YWNoVXRpbC5nZXRUb2tlbihcclxuICAgICAgICAgICAgQXR0YWNoVXRpbC5tZXJnZVN0cmluZyhhdHRhY2hJZCwgcm9vdElkKVxyXG4gICAgICAgICl9YDtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAqIOWuoeaJueaXpeW/l+WbvemZheWMluS/oeaBr1xyXG4gICAgKi9cclxuICAgIHRyYW5zbGF0ZVRhc2soY29kZSkge1xyXG4gICAgICAgIGNvbnN0IHN1cHBvcnRMYW5ndWFnZSA9IFsnemgtQ0hTJywgJ3poX0NIVCcsICdlbiddO1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRMYW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlQ29kZScpO1xyXG4gICAgICAgIGxldCBsYW5nRGF0YTtcclxuICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSB7XHJcbiAgICAgICAgICAgICd6aC1DSFMnOiB7XHJcbiAgICAgICAgICAgICAgICBsb2dEYXRlOiAn5aSE55CG5pe26Ze0JyxcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUaW1lOiAn5aSE55CG5pe26ZW/JyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflip7nkIbmhI/op4EnLFxyXG4gICAgICAgICAgICAgICAgc2hvd0ZvcmVjYXN0TG9nOiAn5pi+56S65ZCO57ut5a6h5om55Lq6JyxcclxuICAgICAgICAgICAgICAgIGhpZGRlbkZvcmVjYXN0TG9nOiAn6ZqQ6JeP5ZCO57ut5a6h5om55Lq6JyxcclxuICAgICAgICAgICAgICAgIHRlcm1pbmFsOiAn5p2l6IeqJyxcclxuICAgICAgICAgICAgICAgIHdlYjogJ+eUteiEkeerrycsXHJcbiAgICAgICAgICAgICAgICBtb2JpbGU6ICfnp7vliqjnq68nLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICflrqHmibnorrDlvZUnLFxyXG4gICAgICAgICAgICAgICAgdmlld1Byb2Nlc3M6ICfmn6XnnIvmtYHnqIsnLFxyXG4gICAgICAgICAgICAgICAgbm9kZU5hbWU6ICfoioLngrnlkI3np7AnLFxyXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQ6ICflip7nkIbkuronLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZVRpbWU6ICfmjqXmlLbml7bpl7QnLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAn5pON5L2cJyxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdFRpbWU6ICfmj5DkuqTml7bpl7QnLFxyXG4gICAgICAgICAgICAgICAgdG9kbzogJ+W+heWKnueQhicsXHJcbiAgICAgICAgICAgICAgICBkb25lOiAn5bey5Yqe55CGJyxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdDogJ+W3suaPkOS6pCcsXHJcbiAgICAgICAgICAgICAgICB1bmRvOiAn5pyq5Yiw6L6+JyxcclxuICAgICAgICAgICAgICAgIHRvQXNzaWduOiAn5pyq5oyH5rS+JyxcclxuICAgICAgICAgICAgICAgIHRvUmVhZDogJ+W+hemYhScsXHJcbiAgICAgICAgICAgICAgICBub1Jlc29sdmVkVXNlcjogJ+acquino+aekOWIsOeUqOaItycsXHJcbiAgICAgICAgICAgICAgICBub0RhdGE6ICfmmoLml6DmlbDmja4nLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiAn5o6l5pS25pe26Ze0JyxcclxuICAgICAgICAgICAgICAgIHRhc2tSZWFkOiAn5bey6K+7JyxcclxuICAgICAgICAgICAgICAgIHRhc2tUb1JlYWQ6ICfmnKror7snLFxyXG4gICAgICAgICAgICAgICAgdGFza0hhbmRsZTogJ+WunumZheaTjeS9nOS6uicsXHJcbiAgICAgICAgICAgICAgICB0b1N1Ym1pdDogJ+W+heaPkOS6pCcsXHJcbiAgICAgICAgICAgICAgICBkb3dubG9hZDogJ+S4i+i9vScsXHJcbiAgICAgICAgICAgICAgICB2aWV3OiAn5p+l55yLJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgICAgIGxvZ0RhdGU6ICdFbmRUaW1lJyxcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUaW1lOiAnUHJvY2Vzc1RpbWUnLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0FwcHJvdmFsIG9waW5pb24nLFxyXG4gICAgICAgICAgICAgICAgc2hvd0ZvcmVjYXN0TG9nOiAnc2hvdyBmb3JlY2FzdCBsb2cnLFxyXG4gICAgICAgICAgICAgICAgaGlkZGVuRm9yZWNhc3RMb2c6ICdoaWRlIGZvcmVjYXN0IGxvZycsXHJcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogJ0Zyb20nLFxyXG4gICAgICAgICAgICAgICAgd2ViOiAnV2ViJyxcclxuICAgICAgICAgICAgICAgIG1vYmlsZTogJ01vYmlsZScsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0xvZ3MnLFxyXG4gICAgICAgICAgICAgICAgdmlld1Byb2Nlc3M6ICdWaWV3IFByb2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgbm9kZU5hbWU6ICdOb2RlIG5hbWUnLFxyXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQ6ICdQYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlVGltZTogJ1JlY2VpdmUgdGltZScsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdBY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0VGltZTogJ1N1Ym1pdCB0aW1lJyxcclxuICAgICAgICAgICAgICAgIHRvZG86ICdUb2RvJyxcclxuICAgICAgICAgICAgICAgIGRvbmU6ICdEb25lJyxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdDogJ1N1Ym1pdCcsXHJcbiAgICAgICAgICAgICAgICB1bmRvOiAnVW5kbycsXHJcbiAgICAgICAgICAgICAgICB0b0Fzc2lnbjogJ1RvIEFzc2lnbicsXHJcbiAgICAgICAgICAgICAgICB0b1JlYWQ6ICdUbyBSZWFkJyxcclxuICAgICAgICAgICAgICAgIG5vUmVzb2x2ZWRVc2VyOiAnTm8gb25lJyxcclxuICAgICAgICAgICAgICAgIG5vRGF0YTogJ0VtcHR5JyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogJ1N0YXJ0IHRpbWUnLFxyXG4gICAgICAgICAgICAgICAgdGFza1JlYWQ6ICdSZWFkJyxcclxuICAgICAgICAgICAgICAgIHRhc2tUb1JlYWQ6ICdUbyByZWFkJyxcclxuICAgICAgICAgICAgICAgIHRhc2tPd25lcjogJ09wZXJhdG9yJyxcclxuICAgICAgICAgICAgICAgIHRvU3VibWl0OiAnVG8gc3VibWl0JyxcclxuICAgICAgICAgICAgICAgIGRvd25sb2FkOiAnZG93bmxvYWQnLFxyXG4gICAgICAgICAgICAgICAgdmlldzogJ3ZpZXcnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnemgtQ0hUJzoge1xyXG4gICAgICAgICAgICAgICAgbG9nRGF0ZTogJ+iZleeQhuaZgumWkycsXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzVGltZTogJ+iZleeQhuaZgumVtycsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6L6m55CG5oSP6KaLJyxcclxuICAgICAgICAgICAgICAgIHNob3dGb3JlY2FzdExvZzogJ+mhr+ekuuW+jOe6jOWvqeaJueS6uicsXHJcbiAgICAgICAgICAgICAgICBoaWRkZW5Gb3JlY2FzdExvZzogJ+maseiXj+W+jOe6jOWvqeaJueS6uicsXHJcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogJ+S+huiHqicsXHJcbiAgICAgICAgICAgICAgICB3ZWI6ICfpm7vohabnq68nLFxyXG4gICAgICAgICAgICAgICAgbW9iaWxlOiAn56e75YuV56uvJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5a+p5om56KiY6YyEJyxcclxuICAgICAgICAgICAgICAgIHZpZXdQcm9jZXNzOiAn5p+l55yL5rWB56iLJyxcclxuICAgICAgICAgICAgICAgIG5vZGVOYW1lOiAn56+A6bue5ZCN56ixJyxcclxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50OiAn6L6m55CG5Lq6JyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVUaW1lOiAn5o6l5pS25pmC6ZaTJyxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ+aTjeS9nCcsXHJcbiAgICAgICAgICAgICAgICBzdWJtaXRUaW1lOiAn5o+Q5Lqk5pmC6ZaTJyxcclxuICAgICAgICAgICAgICAgIHRvZG86ICflvoXovqbnkIYnLFxyXG4gICAgICAgICAgICAgICAgZG9uZTogJ+W3sui+pueQhicsXHJcbiAgICAgICAgICAgICAgICBzdWJtaXQ6ICflt7Lmj5DkuqQnLFxyXG4gICAgICAgICAgICAgICAgdW5kbzogJ+acquWIsOmBlCcsXHJcbiAgICAgICAgICAgICAgICB0b0Fzc2lnbjogJ+acquaMh+a0vicsXHJcbiAgICAgICAgICAgICAgICB0b1JlYWQ6ICflvoXplrEnLFxyXG4gICAgICAgICAgICAgICAgbm9SZXNvbHZlZFVzZXI6ICfmnKrop6PmnpDliLDnlKjmiLYnLFxyXG4gICAgICAgICAgICAgICAgbm9EYXRhOiAn5pqr54Sh5pW45pOaJyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogJ+aOpeaUtuaZgumWkycsXHJcbiAgICAgICAgICAgICAgICB0YXNrUmVhZDogJ+W3suiugCcsXHJcbiAgICAgICAgICAgICAgICB0YXNrVG9SZWFkOiAn5pyq6K6AJyxcclxuICAgICAgICAgICAgICAgIHRhc2tIYW5kbGU6ICflr6bpmpvmk43kvZzkuronLFxyXG4gICAgICAgICAgICAgICAgdG9TdWJtaXQ6ICflvoXmj5DkuqQnLFxyXG4gICAgICAgICAgICAgICAgZG93bmxvYWQ6ICfkuIvovIknLFxyXG4gICAgICAgICAgICAgICAgdmlldzogJ+afpeeciycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoZGVmYXVsdExhbmcgJiYgc3VwcG9ydExhbmd1YWdlLmluY2x1ZGVzKGRlZmF1bHRMYW5nKSkge1xyXG4gICAgICAgICAgICBsYW5nRGF0YSA9IHRyYW5zbGF0ZVtkZWZhdWx0TGFuZ107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGFuZ0RhdGEgPSB0cmFuc2xhdGVbJ3poLUNIUyddO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGFuZ0RhdGFbY29kZV07XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICog6I635Y+W6ZmE5Lu25paH5Lu257G75Z6LXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRGaWxlVHlwZShmaWxlTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHBvcyA9IGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBmaWxlTmFtZS5zdWJzdHJpbmcocG9zICsgMSk7XHJcbiAgICAgICAgdHlwZSA9IHR5cGUgPT09ICcnID8gJ0RlZmF1bHQnIDogdHlwZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGRvY0xpYiA9ICdkb2MtZG9jeC1odG0taHRtbC1qcy1wZGYtcHB0LXBwdHgtcmFyLXppcC10eHQteGxzLXhsc3gnO1xyXG4gICAgICAgIGNvbnN0IHZpZGVvTGliID0gJ3dhdi1haWYtYWlmZi1hdS1tcDEtbXAyLW1wMy1yYS1ybS1yYW0tbWlkLXJtaSc7XHJcbiAgICAgICAgY29uc3QgYXVkaW9MaWIgPSAnYXZpLXJtLXJtdmItbXBlZy1tcGctZGF0LW1vdi1xdC1hc2Ytd20tbXA0JztcclxuICAgICAgICBjb25zdCBpbWdMaWIgPVxyXG4gICAgICAgICAgICAnd2VicC1iYWlibXAtZHVwY3gtdGlmLWdpZi1qcGVnLXRnYS1leGlmLWZweC1zdmctcHNkLWNkci1wY2QtZHhmLXVmby1lcHMtYWktcG5nLWhkcmktcmF3LXdtZi1mbGljLWVtZi1pY28tanBnJztcclxuICAgICAgICBpZiAoZG9jTGliLmluZGV4T2YodHlwZSkgPj0gMCkge1xyXG4gICAgICAgICAgICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmlkZW9MaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAndmlkZW8nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYXVkaW9MaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAnYXVkaW8nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW1nTGliLmluZGV4T2YodHlwZSkgPj0gMCkge1xyXG4gICAgICAgICAgICB0eXBlID0gJ3BpY3R1cmUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICcvcGxhdGZvcm0vcnVudGltZS93Zi93ZWJhcHAvbW9iaWxldGFza2NlbnRlci9hc3NldHMvYWNjZXNzb3J5LycgK1xyXG4gICAgICAgICAgICB0eXBlICtcclxuICAgICAgICAgICAgJy5zdmc/dj0yMDIzMDMxNidcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAqIOiOt+WPlumZhOS7tuS4i+i9veWcsOWdgFxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RG93bkxvYWRVcmwoYXR0YWNoSWQsIHJvb3RJZCkge1xyXG4gICAgICAgIHJvb3RJZCA9IHJvb3RJZCB8fCAnZGVmYXVsdC1yb290JztcclxuICAgICAgICBjb25zdCBpc2h0dHBzID0gJ2h0dHBzOicgPT09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaG9zdDtcclxuICAgICAgICBpZiAoaXNodHRwcykge1xyXG4gICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly8nICsgdXJsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICdodHRwOi8vJyArIHVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXJsICs9IGAvYXBpL3J1bnRpbWUvZGZzL3YxLjAvZG9jL2ZpbGVjb250ZW50P21ldGFkYXRhaWQ9JHthdHRhY2hJZH0mcm9vdGlkPSR7cm9vdElkfSZ0b2tlbj0ke3RoaXMuQXR0YWNoVXRpbC5nZXRUb2tlbihcclxuICAgICAgICAgICAgdGhpcy5BdHRhY2hVdGlsLm1lcmdlU3RyaW5nKGF0dGFjaElkLCByb290SWQpXHJcbiAgICAgICAgKX1gO1xyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICog54K55Ye75LiL6L29XHJcbiAgICAqL1xyXG4gICAgYXR0YWNobWVudERvd25sb2FkKGRvd25sb2FkVXJsOiBzdHJpbmcpIHtcclxuICAgICAgICB3aW5kb3cub3Blbihkb3dubG9hZFVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpooTop4jpmYTku7ZcclxuICAgICAqL1xyXG4gICAgYXR0YWNobWVudFByZXZpZXcobWV0YWRhdGFJZHMpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhcHBUeXBlOiAnYXBwJyxcclxuICAgICAgICAgICAgZnVuY0lkOiAnJyxcclxuICAgICAgICAgICAgdGFiTmFtZTogJ+aWh+aho+WcqOe6v+mihOiniCcsXHJcbiAgICAgICAgICAgIGFwcElkOiAnNmNjYjQ3NmItZjJiYS1kZjhmLTZmNDctZDM3ZDEwMGM1NmUyJyxcclxuICAgICAgICAgICAgYXBwRW50cmFuY2U6ICdkb2N2aWV3ZXJ0YWInLFxyXG4gICAgICAgICAgICB0YWJJZDogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgICAgICAgIGVudGl0eVBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGFJZExpc3Q6IG1ldGFkYXRhSWRzLFxyXG4gICAgICAgICAgICAgICAgcm9vdElkOiAnd2ZfYXR0YWNobWVudCcsXHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUlkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdmlld09wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93SGVhZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQYWdpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1RodW1ibmFpbHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0Rvd25sb2FkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1pvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1ByaW50OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZWNvbmRhcnlUb29sQmFyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICgodG9wIGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZSkge1xyXG4gICAgICAgICAgICAodG9wIGFzIGFueSkuZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuZnVuYy5vcGVuTWVudShvcHRpb25zKTtcclxuICAgICAgICAgICAgdG9wLnBvc3RNZXNzYWdlKCdUYXNrQ2xvc2VMb2dEaWFsb2cnLCB0b3AuZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19