/**
 * @fileoverview added by tsickle
 * Generated from: lib/approval-comments.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, forwardRef, Injector, Input } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { ApprovalComment } from '../entity/approval-comments';
import { ApiService } from '../utils/api.service';
/** @enum {string} */
const DisplayTypes = {
    Single: "single",
    Default: "default",
    Theme1: "theme1",
};
export class ApprovalCommentComponent {
    /**
     * @param {?} apiService
     * @param {?} injector
     */
    constructor(apiService, injector) {
        this.apiService = apiService;
        this.injector = injector;
        /*
            * 域配置
            */
        this.domains = [];
        this.displayType = DisplayTypes.Default;
        this.attachmentVisible = true; // 附件是否可见
        this.filterAction = ['Pass', 'Back'];
        this.DisplayTypes = DisplayTypes;
        /** @type {?} */
        const rootViewModel = this.injector["view"].component.viewModel;
        rootViewModel.bindingData.changes.subscribe((/**
         * @param {?} change
         * @return {?}
         */
        (change) => {
            if (this.displayType === this.DisplayTypes.Single) {
                this.getFieldData(rootViewModel.bindingData.getValue(this.sortPath(this.field)));
            }
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (!this.procInstId) {
            return;
        }
        if (!!this.dataList) {
            return;
        }
        if (this.displayType === this.DisplayTypes.Default && this.domains.length) {
            this.getApprovalComment();
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.displayType === this.DisplayTypes.Single) {
            /** @type {?} */
            const rootViewModel = this.injector["view"].component.viewModel;
            this.getFieldData(rootViewModel.bindingData.getValue(this.sortPath(this.field)));
        }
        /** @type {?} */
        const AttachUtil = {
            mergeString: (/**
             * @param {?} str
             * @param {?} str1
             * @return {?}
             */
            (str, str1) => {
                /** @type {?} */
                const min = str.length < str1.length ? str.length : str1.length;
                /** @type {?} */
                let res = '';
                /** @type {?} */
                let i = 0;
                for (i = 0; i < min; i++) {
                    res += str.substring(i, i + 1);
                    res += str1.substring(i, i + 1);
                }
                res += str.length < str1.length ? str1.substring(i) : str.substring(i);
                return res;
            }),
            getToken: (/**
             * @param {?} str
             * @return {?}
             */
            (str) => {
                /** @type {?} */
                const array = [1, 2, 3];
                if (str.length > 24) {
                    str = str.substring(0, 24);
                }
                /** @type {?} */
                const length = Math.floor(str.length / 3);
                /** @type {?} */
                const str1 = str.substring(0, length);
                /** @type {?} */
                const str2 = str.substring(length, 2 * length);
                /** @type {?} */
                const str3 = str.substring(2 * length, 3 * length);
                /** @type {?} */
                const randomArray = [];
                /** @type {?} */
                let random = Math.ceil(Math.random() * 3);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                random = Math.ceil(Math.random() * 2);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                randomArray.push(array[0]);
                /** @type {?} */
                const timeStamp = Math.round(new Date().getTime() / 1000) + '';
                return (timeStamp.substring(0, 5) +
                    'times' +
                    randomArray[0] +
                    '' +
                    randomArray[1] +
                    '' +
                    randomArray[2] +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[0]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[1]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[2]) +
                    'times' +
                    timeStamp.substring(5));
            }),
            switchStr: (/**
             * @param {?} str1
             * @param {?} str2
             * @param {?} str3
             * @param {?} i
             * @return {?}
             */
            (str1, str2, str3, i) => {
                switch (i) {
                    case 1:
                        return str1;
                    case 2:
                        return str2;
                    case 3:
                        return str3;
                }
            })
        };
        this.AttachUtil = AttachUtil;
    }
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    sortPath(field) {
        /** @type {?} */
        const pathArry = field.split('_');
        return pathArry.reduce((/**
         * @param {?} pre
         * @param {?} bindingPath
         * @return {?}
         */
        (pre, bindingPath) => {
            pre.push(bindingPath[0].toLowerCase() + bindingPath.substring(1, bindingPath.length));
            return pre;
        }), []);
    }
    /**
     * @private
     * @param {?} fieldData
     * @return {?}
     */
    getFieldData(fieldData) {
        if (!fieldData) {
            return;
        }
        try {
            /** @type {?} */
            const workItemLogs = [];
            /** @type {?} */
            const retList = JSON.parse(fieldData);
            retList.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                if (element.signature) {
                    element.url = this.getUrl(`{"id":"${element.signature}"}`, 'taskcentersignature');
                }
                workItemLogs.push({
                    url: element.url,
                    createdTime: element.operateTime,
                    message: element.comment,
                    operatorName: element.operatorName,
                });
            }));
            this.workItemLogs = workItemLogs;
        }
        catch (error) {
            console.error(error);
        }
    }
    /*
        * 从根据域配置获取审批意见信息
        */
    /**
     * @private
     * @return {?}
     */
    getApprovalComment() {
        /** @type {?} */
        const domainList = this.domains.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.domainCode && item.domainName && item.activityDefinedIds));
        /** @type {?} */
        const params = {
            processsInstId: this.procInstId,
            domains: domainList
        };
        this.dataList = [];
        this.apiService.getApprovalCommentApi(params).subscribe((/**
         * @param {?} resp
         * @return {?}
         */
        resp => {
            if (resp) {
                [].concat(resp).forEach((/**
                 * @param {?} value
                 * @return {?}
                 */
                value => {
                    /** @type {?} */
                    const data = new ApprovalComment();
                    data.title = value.domainName;
                    /** @type {?} */
                    let workItemLogs = [];
                    if (value.taskCommentImpl) {
                        if (this.sortOrder === 'time') {
                            workItemLogs = value.taskCommentImpl.sort((/**
                             * @param {?} a
                             * @param {?} b
                             * @return {?}
                             */
                            (a, b) => {
                                return Date.parse(a.operatorTime) - Date.parse(b.operatorTime);
                            }));
                        }
                        else {
                            workItemLogs = value.taskCommentImpl;
                        }
                    }
                    // const workItemLogsFilter = workItemLogs.filter(workItem => workItem.action && this.filterAction.indexOf(workItem.action) > -1);
                    /** @type {?} */
                    const workItemLogsFilter = workItemLogs.filter((/**
                     * @param {?} workItem
                     * @return {?}
                     */
                    workItem => workItem.action && workItem.action !== 'Submit'));
                    workItemLogsFilter.map((/**
                     * @param {?} item
                     * @return {?}
                     */
                    item => {
                        if (item.signature) {
                            item.url = this.getUrl(item.signature, 'taskcentersignature');
                        }
                        if (item.attachmentRef && item.attachmentRef !== '') {
                            /** @type {?} */
                            const attachmentInfo = JSON.parse(item.attachmentRef);
                            /** @type {?} */
                            const attachmentList = [];
                            for (let i = 0; i < attachmentInfo.length; i++) {
                                /** @type {?} */
                                const info = {
                                    fileName: attachmentInfo[i].fileName,
                                    fileType: this.getFileType(attachmentInfo[i].fileName),
                                    fileSize: attachmentInfo[i].fileSize,
                                    url: this.getDownLoadUrl(attachmentInfo[i].metadataId, 'wf_attachment'),
                                    metadataId: attachmentInfo[i].metadataId,
                                };
                                attachmentList.push(info);
                            }
                            item.attachmentList = attachmentList;
                        }
                    }));
                    data.workItemLogs = workItemLogsFilter;
                    this.dataList.push(data);
                }));
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
        }));
    }
    /*
        * 获取审批意见附件地址
        */
    /**
     * @private
     * @param {?} signature
     * @param {?} rootId
     * @return {?}
     */
    getUrl(signature, rootId) {
        /** @type {?} */
        const AttachUtil = {
            mergeString: (/**
             * @param {?} str
             * @param {?} str1
             * @return {?}
             */
            (str, str1) => {
                /** @type {?} */
                const min = str.length < str1.length ? str.length : str1.length;
                /** @type {?} */
                let res = '';
                /** @type {?} */
                let i = 0;
                for (i = 0; i < min; i++) {
                    res += str.substring(i, i + 1);
                    res += str1.substring(i, i + 1);
                }
                res += str.length < str1.length ? str1.substring(i) : str.substring(i);
                return res;
            }),
            getToken: (/**
             * @param {?} str
             * @return {?}
             */
            (str) => {
                /** @type {?} */
                const array = [1, 2, 3];
                if (str.length > 24) {
                    str = str.substring(0, 24);
                }
                /** @type {?} */
                const length = Math.floor(str.length / 3);
                /** @type {?} */
                const str1 = str.substring(0, length);
                /** @type {?} */
                const str2 = str.substring(length, 2 * length);
                /** @type {?} */
                const str3 = str.substring(2 * length, 3 * length);
                /** @type {?} */
                const randomArray = [];
                /** @type {?} */
                let random = Math.ceil(Math.random() * 3);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                random = Math.ceil(Math.random() * 2);
                randomArray.push(array[random - 1]);
                array.splice(random - 1, 1);
                randomArray.push(array[0]);
                /** @type {?} */
                const timeStamp = Math.round(new Date().getTime() / 1000) + '';
                return (timeStamp.substring(0, 5) +
                    'times' +
                    randomArray[0] +
                    '' +
                    randomArray[1] +
                    '' +
                    randomArray[2] +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[0]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[1]) +
                    AttachUtil.switchStr(str1, str2, str3, randomArray[2]) +
                    'times' +
                    timeStamp.substring(5));
            }),
            switchStr: (/**
             * @param {?} str1
             * @param {?} str2
             * @param {?} str3
             * @param {?} i
             * @return {?}
             */
            (str1, str2, str3, i) => {
                switch (i) {
                    case 1:
                        return str1;
                    case 2:
                        return str2;
                    case 3:
                        return str3;
                }
            })
        };
        rootId = rootId || 'default-root';
        /** @type {?} */
        const attachId = JSON.parse(signature).id;
        /** @type {?} */
        const url = `/api/runtime/dfs/v1.0/doc/filecontent?metadataid=${attachId}&rootid=${rootId}&token=${AttachUtil.getToken(AttachUtil.mergeString(attachId, rootId))}`;
        return url;
    }
    /*
        * 审批日志国际化信息
        */
    /**
     * @param {?} code
     * @return {?}
     */
    translateTask(code) {
        /** @type {?} */
        const supportLanguage = ['zh-CHS', 'zh_CHT', 'en'];
        /** @type {?} */
        const defaultLang = localStorage.getItem('languageCode');
        /** @type {?} */
        let langData;
        /** @type {?} */
        const translate = {
            'zh-CHS': {
                logDate: '处理时间',
                processTime: '处理时长',
                message: '办理意见',
                showForecastLog: '显示后续审批人',
                hiddenForecastLog: '隐藏后续审批人',
                terminal: '来自',
                web: '电脑端',
                mobile: '移动端',
                title: '审批记录',
                viewProcess: '查看流程',
                nodeName: '节点名称',
                participant: '办理人',
                receiveTime: '接收时间',
                action: '操作',
                submitTime: '提交时间',
                todo: '待办理',
                done: '已办理',
                submit: '已提交',
                undo: '未到达',
                toAssign: '未指派',
                toRead: '待阅',
                noResolvedUser: '未解析到用户',
                noData: '暂无数据',
                startTime: '接收时间',
                taskRead: '已读',
                taskToRead: '未读',
                taskHandle: '实际操作人',
                toSubmit: '待提交',
                download: '下载',
                view: '查看',
            },
            en: {
                logDate: 'EndTime',
                processTime: 'ProcessTime',
                message: 'Approval opinion',
                showForecastLog: 'show forecast log',
                hiddenForecastLog: 'hide forecast log',
                terminal: 'From',
                web: 'Web',
                mobile: 'Mobile',
                title: 'Logs',
                viewProcess: 'View Process',
                nodeName: 'Node name',
                participant: 'Participant',
                receiveTime: 'Receive time',
                action: 'Action',
                submitTime: 'Submit time',
                todo: 'Todo',
                done: 'Done',
                submit: 'Submit',
                undo: 'Undo',
                toAssign: 'To Assign',
                toRead: 'To Read',
                noResolvedUser: 'No one',
                noData: 'Empty',
                startTime: 'Start time',
                taskRead: 'Read',
                taskToRead: 'To read',
                taskOwner: 'Operator',
                toSubmit: 'To submit',
                download: 'download',
                view: 'view',
            },
            'zh-CHT': {
                logDate: '處理時間',
                processTime: '處理時長',
                message: '辦理意見',
                showForecastLog: '顯示後續審批人',
                hiddenForecastLog: '隱藏後續審批人',
                terminal: '來自',
                web: '電腦端',
                mobile: '移動端',
                title: '審批記錄',
                viewProcess: '查看流程',
                nodeName: '節點名稱',
                participant: '辦理人',
                receiveTime: '接收時間',
                action: '操作',
                submitTime: '提交時間',
                todo: '待辦理',
                done: '已辦理',
                submit: '已提交',
                undo: '未到達',
                toAssign: '未指派',
                toRead: '待閱',
                noResolvedUser: '未解析到用戶',
                noData: '暫無數據',
                startTime: '接收時間',
                taskRead: '已讀',
                taskToRead: '未讀',
                taskHandle: '實際操作人',
                toSubmit: '待提交',
                download: '下載',
                view: '查看',
            },
        };
        if (defaultLang && supportLanguage.includes(defaultLang)) {
            langData = translate[defaultLang];
        }
        else {
            langData = translate['zh-CHS'];
        }
        return langData[code];
    }
    /*
        * 获取附件文件类型
        */
    /**
     * @private
     * @param {?} fileName
     * @return {?}
     */
    getFileType(fileName) {
        /** @type {?} */
        const pos = fileName.lastIndexOf('.');
        /** @type {?} */
        let type = fileName.substring(pos + 1);
        type = type === '' ? 'Default' : type.toLowerCase();
        /** @type {?} */
        const docLib = 'doc-docx-htm-html-js-pdf-ppt-pptx-rar-zip-txt-xls-xlsx';
        /** @type {?} */
        const videoLib = 'wav-aif-aiff-au-mp1-mp2-mp3-ra-rm-ram-mid-rmi';
        /** @type {?} */
        const audioLib = 'avi-rm-rmvb-mpeg-mpg-dat-mov-qt-asf-wm-mp4';
        /** @type {?} */
        const imgLib = 'webp-baibmp-dupcx-tif-gif-jpeg-tga-exif-fpx-svg-psd-cdr-pcd-dxf-ufo-eps-ai-png-hdri-raw-wmf-flic-emf-ico-jpg';
        if (docLib.indexOf(type) >= 0) {
            type = type.toLowerCase();
        }
        else if (videoLib.indexOf(type) >= 0) {
            type = 'video';
        }
        else if (audioLib.indexOf(type) >= 0) {
            type = 'audio';
        }
        else if (imgLib.indexOf(type) >= 0) {
            type = 'picture';
        }
        else {
            type = 'default';
        }
        return ('/platform/runtime/wf/webapp/mobiletaskcenter/assets/accessory/' +
            type +
            '.svg?v=20230316');
    }
    /*
        * 获取附件下载地址
        */
    /**
     * @private
     * @param {?} attachId
     * @param {?} rootId
     * @return {?}
     */
    getDownLoadUrl(attachId, rootId) {
        rootId = rootId || 'default-root';
        /** @type {?} */
        const ishttps = 'https:' === document.location.protocol ? true : false;
        /** @type {?} */
        let url = window.location.host;
        if (ishttps) {
            url = 'https://' + url;
        }
        else {
            url = 'http://' + url;
        }
        url += `/api/runtime/dfs/v1.0/doc/filecontent?metadataid=${attachId}&rootid=${rootId}&token=${this.AttachUtil.getToken(this.AttachUtil.mergeString(attachId, rootId))}`;
        return url;
    }
    /*
        * 点击下载
        */
    /**
     * @param {?} downloadUrl
     * @return {?}
     */
    attachmentDownload(downloadUrl) {
        window.open(downloadUrl);
    }
    /**
     * 预览附件
     * @param {?} metadataIds
     * @return {?}
     */
    attachmentPreview(metadataIds) {
        /** @type {?} */
        const options = {
            appType: 'app',
            funcId: '',
            tabName: '文档在线预览',
            appId: '6ccb476b-f2ba-df8f-6f47-d37d100c56e2',
            appEntrance: 'docviewertab',
            tabId: new Date().getTime(),
            entityParams: {
                metadataIdList: metadataIds,
                rootId: 'wf_attachment',
                metadataId: null,
                viewOptions: {
                    showHeader: true,
                    showPaging: true,
                    showThumbnails: true,
                    showDownload: true,
                    showSearch: true,
                    showZoom: true,
                    showPrint: true,
                    showSecondaryToolBar: true,
                },
            },
        };
        if (((/** @type {?} */ (top))).gspframeworkService) {
            ((/** @type {?} */ (top))).gspframeworkService.rtf.func.openMenu(options);
            top.postMessage('TaskCloseLogDialog', top.document.location.origin);
        }
    }
}
ApprovalCommentComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-approval-comments',
                template: "<ng-container *ngIf=\"dataList && displayType === DisplayTypes.Default\">\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content\" *ngFor=\"let comment of dataList\">\r\n            <div class=\"left-content\">\r\n                <div class=\"approval-suggestion\">{{comment.title}}</div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <div *ngFor=\"let item of comment.workItemLogs\">\r\n                    <div class=\"right-content-item\">\r\n                        <div class=\"right-content-item-list-content\">\r\n                            <div class=\"approval-comment-message\">{{item?.message}}</div>\r\n                            <div *ngIf=\"attachmentVisible\" class=\"approval-comment-attachment\">\r\n                                <div *ngFor=\"let attachment of item.attachmentList\"\r\n                                    class=\"log-attachment task-attachmentlist-li\">\r\n                                    <!-- \u9644\u4EF6\u540D\u79F0 -->\r\n                                    <div class=\"log-attachment-title\">\r\n                                        <img class=\"log-attachment-img\" src=\"{{attachment.fileType}}\" />\r\n                                        <span>{{attachment.fileName}}</span>\r\n                                    </div>\r\n                                    <div style=\"display: flex; align-items: center\">\r\n                                        <!-- \u9644\u4EF6\u5927\u5C0F -->\r\n                                        <div><span class=\"log-attachment-size\">{{attachment.fileSize}}</span></div>\r\n                                        <!-- \u4E0B\u8F7D\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-download\" id=\"log-attachment-download\"\r\n                                            title=\"{{translateTask('download')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-download.svg?v=20230222\"\r\n                                                (click)=\"attachmentDownload(attachment.url)\" />\r\n                                        </div>\r\n                                        <!-- \u67E5\u770B\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-preview\" id=\"log-attachment-preview\"\r\n                                            title=\"{{translateTask('view')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-view.svg?v=20230222\"\r\n                                                (click)=\"attachmentPreview([attachment?.metadataId])\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right-content-item-list-sign\">\r\n                            <div *ngIf=\"item?.url\" class=\"approval-operator-name\">\r\n                                <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                            </div>\r\n                            <div *ngIf=\"!item?.url\" class=\"approval-operator-name\">{{item?.operatorName}}</div>\r\n                            <div class=\"approval-start-time\">\r\n                                <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n<ng-container *ngIf=\"dataList && displayType === DisplayTypes.Theme1\">\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content-item2\" *ngFor=\"let comment of dataList\">\r\n            <div class=\"approval-suggestion\">{{comment.title}}</div>\r\n            <div *ngFor=\"let item of comment.workItemLogs\">\r\n                <div class=\"right-content-item\">\r\n                    <div class=\"right-content-item-list-content\">\r\n                        <div class=\"approval-comment-message-item2\">{{item?.message}}</div>\r\n                    </div>\r\n                    <div class=\"right-content-item-list-sign\">\r\n                        <div *ngIf=\"item?.url\" class=\"approval-operator-name-item2\">\r\n                            <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                        </div>\r\n                        <div *ngIf=\"!item?.url\" class=\"approval-operator-name-item2\">{{item?.operatorName}}</div>\r\n                        <div class=\"approval-start-time-item2\">\r\n                            <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"displayType === DisplayTypes.Single\">\r\n\r\n    <div class=\"main-content\">\r\n        <div class=\"body-content\">\r\n            <div class=\"left-content\">\r\n                <div class=\"approval-suggestion\">{{title}}</div>\r\n            </div>\r\n            <div class=\"right-content\">\r\n                <div *ngFor=\"let item of workItemLogs\">\r\n                    <div class=\"right-content-item\">\r\n                        <div class=\"right-content-item-list-content\">\r\n                            <div class=\"approval-comment-message\">{{item?.message}}</div>\r\n                            <div *ngIf=\"attachmentVisible\" class=\"approval-comment-attachment\">\r\n                                <div *ngFor=\"let attachment of item.attachmentList\"\r\n                                    class=\"log-attachment task-attachmentlist-li\">\r\n                                    <!-- \u9644\u4EF6\u540D\u79F0 -->\r\n                                    <div class=\"log-attachment-title\">\r\n                                        <img class=\"log-attachment-img\" src=\"{{attachment.fileType}}\" />\r\n                                        <span>{{attachment.fileName}}</span>\r\n                                    </div>\r\n                                    <div style=\"display: flex; align-items: center\">\r\n                                        <!-- \u9644\u4EF6\u5927\u5C0F -->\r\n                                        <div><span class=\"log-attachment-size\">{{attachment.fileSize}}</span></div>\r\n                                        <!-- \u4E0B\u8F7D\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-download\" id=\"log-attachment-download\"\r\n                                            title=\"{{translateTask('download')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-download.svg?v=20230222\"\r\n                                                (click)=\"attachmentDownload(attachment.url)\" />\r\n                                        </div>\r\n                                        <!-- \u67E5\u770B\u6309\u94AE -->\r\n                                        <div class=\"log-attachment-icon-preview\" id=\"log-attachment-preview\"\r\n                                            title=\"{{translateTask('view')}}\">\r\n                                            <img src=\"/platform/runtime/wf/webapp/mobiletaskcenter/assets/img/web-attachment-view.svg?v=20230222\"\r\n                                                (click)=\"attachmentPreview([attachment?.metadataId])\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"right-content-item-list-sign\">\r\n                            <div *ngIf=\"item?.url\" class=\"approval-operator-name\">\r\n                                <img class=\"image-height-width\" src=\"{{item?.url}}\">\r\n                            </div>\r\n                            <div *ngIf=\"!item?.url\" class=\"approval-operator-name\">{{item?.operatorName}}</div>\r\n                            <div class=\"approval-start-time\">\r\n                                <span>\u5904\u7406\u65F6\u95F4\uFF1A</span>{{(item?.createdTime |date:'yyyy-MM-dd HH:mm:ss') || '--'}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</ng-container>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => ApprovalCommentComponent)),
                        multi: true
                    },
                    ApiService,
                ],
                styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{flex:0 0 100%;position:relative;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}.main-content{width:100%;height:100%;display:flex;flex-direction:column}.body-content{box-sizing:border-box;flex:1.5;display:flex;flex-direction:row;margin:0 -1px -1px 0;border:1px dashed #ccc;border-collapse:collapse}.body-content-item2{box-sizing:border-box;flex:1.5;display:flex;flex-direction:column;padding:10px 0 0 10px;margin:0 -1px -1px 0;border:1px dashed #ccc;border-collapse:collapse;min-height:36px}.left-content{width:160px;box-sizing:border-box;display:flex;justify-content:center;align-items:center;min-height:36px;border-right:1px dashed #ccc}.right-content{box-sizing:border-box;padding-left:12px;flex:1;display:flex;flex-direction:column}.right-content-item{box-sizing:border-box;display:flex;flex-direction:row}.right-content-item-list-content{display:flex;flex:1;flex-direction:column;box-sizing:border-box;padding-top:10px}.right-content-item-list-sign{display:flex;box-sizing:border-box;width:210px;flex-direction:column}.approval-comment-message{flex:1;font-size:12px;padding:0 10px 10px}.approval-comment-attachment{padding-bottom:10px}.approval-comment-message-item2{font-size:12px;padding:10px}.date_area{font-size:6px}.approval-start-time{font-size:10px;padding:0 10px 15px}.approval-start-time-item2{font-size:10px;padding-top:10px;margin-bottom:15px}.approval-operator-name{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px;text-align:center;margin-top:20px;padding-bottom:10px}.approval-operator-name-item2{font-size:12px;text-align:center}.footer-content .right-content .right-content-item .right-content-item-list-sign{margin-top:8px}.approval-suggestion{white-space:pre-line;padding:10px;font-size:12px;word-wrap:break-word;word-break:break-all}.image-height-width{height:34px;width:100px}.log-attachment{display:flex;justify-content:space-between;align-items:center;background:rgba(249,252,255,.87);border:0 solid rgba(229,232,237,.71);border-radius:3px;margin-top:10px;padding:5px 10px;cursor:pointer}.log-attachment-title{display:flex;align-items:center;font-size:12px}.log-attachment-img{height:24px;margin-right:10px}.log-attachment-name{white-space:pre-wrap;word-break:break-all}.log-attachment-size{display:block;font-size:12px;color:rgba(45,47,51,.45);padding:0 10px}.log-attachment-icon-download{border-radius:50%;background:#c7d4ee;margin-left:10px;color:#fff;cursor:pointer;width:16px;height:16px;display:flex;justify-content:center;align-items:center}.log-attachment-icon-preview{border-radius:50%;background:#2b87ff;margin-left:10px;color:#fff;cursor:pointer;width:16px;height:16px;display:flex;justify-content:center;align-items:center}.log-task-read{display:flex;align-items:center;font-size:12px;color:rgba(0,0,0,.45);padding:8px 14px;background:rgba(245,248,252,.6);box-shadow:inset 0 1px 0 0 #e9ecf3}.log-task-read-text{padding:0 8px}"]
            }] }
];
/** @nocollapse */
ApprovalCommentComponent.ctorParameters = () => [
    { type: ApiService },
    { type: Injector }
];
ApprovalCommentComponent.propDecorators = {
    title: [{ type: Input }],
    domains: [{ type: Input }],
    procInstId: [{ type: Input }],
    sortOrder: [{ type: Input }],
    field: [{ type: Input }],
    bindingfield: [{ type: Input }],
    displayType: [{ type: Input }],
    attachmentVisible: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ApprovalCommentComponent.prototype.title;
    /** @type {?} */
    ApprovalCommentComponent.prototype.domains;
    /** @type {?} */
    ApprovalCommentComponent.prototype.procInstId;
    /** @type {?} */
    ApprovalCommentComponent.prototype.sortOrder;
    /** @type {?} */
    ApprovalCommentComponent.prototype.field;
    /** @type {?} */
    ApprovalCommentComponent.prototype.bindingfield;
    /** @type {?} */
    ApprovalCommentComponent.prototype.displayType;
    /** @type {?} */
    ApprovalCommentComponent.prototype.attachmentVisible;
    /** @type {?} */
    ApprovalCommentComponent.prototype.dataList;
    /** @type {?} */
    ApprovalCommentComponent.prototype.filterAction;
    /** @type {?} */
    ApprovalCommentComponent.prototype.AttachUtil;
    /** @type {?} */
    ApprovalCommentComponent.prototype.DisplayTypes;
    /** @type {?} */
    ApprovalCommentComponent.prototype.workItemLogs;
    /**
     * @type {?}
     * @private
     */
    ApprovalCommentComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    ApprovalCommentComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwcm92YWwtY29tbWVudHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9hcHByb3ZhbC1jb21tZW50cy8iLCJzb3VyY2VzIjpbImxpYi9hcHByb3ZhbC1jb21tZW50cy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUErQyxNQUFNLGVBQWUsQ0FBQztBQUNwSCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFOUQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDOztBQUVsRCxNQUFLLFlBQVk7SUFDYixNQUFNLFVBQVc7SUFDakIsT0FBTyxXQUFZO0lBQ25CLE1BQU0sVUFBVztFQUNwQjtBQWVELE1BQU0sT0FBTyx3QkFBd0I7Ozs7O0lBd0NqQyxZQUNZLFVBQXNCLEVBQ3RCLFFBQWtCO1FBRGxCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTs7OztRQTdCckIsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQWFiLGdCQUFXLEdBQWlCLFlBQVksQ0FBQyxPQUFPLENBQUM7UUFDakQsc0JBQWlCLEdBQVksSUFBSSxDQUFDLENBQUMsU0FBUztRQUVyRCxpQkFBWSxHQUFhLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRzFDLGlCQUFZLEdBQUcsWUFBWSxDQUFDOztjQVlsQixhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsU0FBUztRQUMvRCxhQUFhLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxTQUFTOzs7O1FBQUMsQ0FBQyxNQUFjLEVBQUUsRUFBRTtZQUMzRCxJQUFJLElBQUksQ0FBQyxXQUFXLEtB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S0FBSztzQkFJTCxLQUFLO3lCQUNMLEtBQUs7d0JBQ0wsS0FBSztvQkFLTCxLQUFLOzJCQUlMLEtBQUs7MEJBRUwsS0FBSztnQ0FDTCxLQUFLOzs7O0lBbEJOLHlDQUF1Qjs7SUFJdkIsMkNBQXNCOztJQUN0Qiw4Q0FBNEI7O0lBQzVCLDZDQUEyQjs7SUFLM0IseUNBQXVCOztJQUl2QixnREFBOEI7O0lBRTlCLCtDQUEwRDs7SUFDMUQscURBQTJDOztJQUMzQyw0Q0FBNEI7O0lBQzVCLGdEQUEwQzs7SUFDMUMsOENBQWdCOztJQUVoQixnREFBNEI7O0lBTTVCLGdEQUEwQzs7Ozs7SUFHdEMsOENBQThCOzs7OztJQUM5Qiw0Q0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIGZvcndhcmRSZWYsIEluamVjdG9yLCBJbnB1dCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgQ2hhbmdlIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQgeyBBcHByb3ZhbENvbW1lbnQgfSBmcm9tICcuLi9lbnRpdHkvYXBwcm92YWwtY29tbWVudHMnO1xyXG5pbXBvcnQgeyBXb3JrSXRlbUxvZyB9IGZyb20gJy4uL2VudGl0eS93b3JrSXRlbUxvZyc7XHJcbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICcuLi91dGlscy9hcGkuc2VydmljZSc7XHJcblxyXG5lbnVtIERpc3BsYXlUeXBlcyB7XHJcbiAgICBTaW5nbGUgPSAnc2luZ2xlJyxcclxuICAgIERlZmF1bHQgPSAnZGVmYXVsdCcsXHJcbiAgICBUaGVtZTEgPSAndGhlbWUxJ1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWFwcHJvdmFsLWNvbW1lbnRzJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9hcHByb3ZhbC1jb21tZW50cy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9hcHByb3ZhbC1jb21tZW50cy5jb21wb25lbnQuY3NzJ10sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBcHByb3ZhbENvbW1lbnRDb21wb25lbnQpLFxyXG4gICAgICAgICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQXBpU2VydmljZSxcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEFwcHJvdmFsQ29tbWVudENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIC8qXHJcbiAgICAqIOimgeWQkeWtl+auteeVjOmdoumdoOm9kO+8jOS9huaYr+mcgOimgeWFvOWuueWcqHNlY3Rpb24g55u05o6l6I635Y+W5pWw5o2uXHJcbiAgICAqL1xyXG5cclxuICAgIC8qXHJcbiAgICAqIOWuoeaJueaEj+ingeihqOWhqyBcclxuICAgICovXHJcbiAgICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xyXG4gICAgLypcclxuICAgICog5Z+f6YWN572uXHJcbiAgICAqL1xyXG4gICAgQElucHV0KCkgZG9tYWlucyA9IFtdO1xyXG4gICAgQElucHV0KCkgcHJvY0luc3RJZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgc29ydE9yZGVyOiBzdHJpbmc7XHJcblxyXG4gICAgLypcclxuICAgICog57uR5a6a55qE5a2X5q61XHJcbiAgICAqL1xyXG4gICAgQElucHV0KCkgZmllbGQ6IHN0cmluZztcclxuICAgIC8qXHJcbiAgICAqIOe7keWumuWtl+autVxyXG4gICAgKi9cclxuICAgIEBJbnB1dCgpIGJpbmRpbmdmaWVsZDogc3RyaW5nO1xyXG5cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlUeXBlOiBEaXNwbGF5VHlwZXMgPSBEaXNwbGF5VHlwZXMuRGVmYXVsdDtcclxuICAgIEBJbnB1dCgpIGF0dGFjaG1lbnRWaXNpYmxlOiBib29sZWFuID0gdHJ1ZTsgLy8g6ZmE5Lu25piv5ZCm5Y+v6KeBXHJcbiAgICBkYXRhTGlzdDogQXBwcm92YWxDb21tZW50W107XHJcbiAgICBmaWx0ZXJBY3Rpb246IHN0cmluZ1tdID0gWydQYXNzJywgJ0JhY2snXTtcclxuICAgIEF0dGFjaFV0aWw6IGFueTtcclxuXHJcbiAgICBEaXNwbGF5VHlwZXMgPSBEaXNwbGF5VHlwZXM7XHJcblxyXG5cclxuICAgIC8qXHJcbiAgICAqIOWNleadoeaooeW8j+S4i+WkhOeQhlxyXG4gICAgKi9cclxuICAgIHdvcmtJdGVtTG9nczogQXJyYXk8UGFydGlhbDxXb3JrSXRlbUxvZz4+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYXBpU2VydmljZTogQXBpU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICkge1xyXG4gICAgICAgIGNvbnN0IHJvb3RWaWV3TW9kZWwgPSB0aGlzLmluamVjdG9yW1widmlld1wiXS5jb21wb25lbnQudmlld01vZGVsO1xyXG4gICAgICAgIHJvb3RWaWV3TW9kZWwuYmluZGluZ0RhdGEuY2hhbmdlcy5zdWJzY3JpYmUoKGNoYW5nZTogQ2hhbmdlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSB0aGlzLkRpc3BsYXlUeXBlcy5TaW5nbGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmllbGREYXRhKHJvb3RWaWV3TW9kZWwuYmluZGluZ0RhdGEuZ2V0VmFsdWUodGhpcy5zb3J0UGF0aCh0aGlzLmZpZWxkKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb2NJbnN0SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEhdGhpcy5kYXRhTGlzdCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gdGhpcy5EaXNwbGF5VHlwZXMuRGVmYXVsdCAmJiB0aGlzLmRvbWFpbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0QXBwcm92YWxDb21tZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSB0aGlzLkRpc3BsYXlUeXBlcy5TaW5nbGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm9vdFZpZXdNb2RlbCA9IHRoaXMuaW5qZWN0b3JbXCJ2aWV3XCJdLmNvbXBvbmVudC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RmllbGREYXRhKHJvb3RWaWV3TW9kZWwuYmluZGluZ0RhdGEuZ2V0VmFsdWUodGhpcy5zb3J0UGF0aCh0aGlzLmZpZWxkKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgQXR0YWNoVXRpbCA9IHtcclxuICAgICAgICAgICAgbWVyZ2VTdHJpbmc6IChzdHIsIHN0cjEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbiA9IHN0ci5sZW5ndGggPCBzdHIxLmxlbmd0aCA/IHN0ci5sZW5ndGggOiBzdHIxLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGxldCByZXMgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBzdHIuc3Vic3RyaW5nKGksIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMgKz0gc3RyMS5zdWJzdHJpbmcoaSwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzICs9IHN0ci5sZW5ndGggPCBzdHIxLmxlbmd0aCA/IHN0cjEuc3Vic3RyaW5nKGkpIDogc3RyLnN1YnN0cmluZyhpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldFRva2VuOiAoc3RyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheSA9IFsxLCAyLCAzXTtcclxuICAgICAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID4gMjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDI0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIDMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyMSA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cjIgPSBzdHIuc3Vic3RyaW5nKGxlbmd0aCwgMiAqIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHIzID0gc3RyLnN1YnN0cmluZygyICogbGVuZ3RoLCAzICogbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmRvbUFycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAzKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbcmFuZG9tIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAyKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbcmFuZG9tIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tQXJyYXkucHVzaChhcnJheVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YW1wLnN1YnN0cmluZygwLCA1KSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzJyArXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZG9tQXJyYXlbMF0gK1xyXG4gICAgICAgICAgICAgICAgICAgICcnICtcclxuICAgICAgICAgICAgICAgICAgICByYW5kb21BcnJheVsxXSArXHJcbiAgICAgICAgICAgICAgICAgICAgJycgK1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5WzJdICtcclxuICAgICAgICAgICAgICAgICAgICBBdHRhY2hVdGlsLnN3aXRjaFN0cihzdHIxLCBzdHIyLCBzdHIzLCByYW5kb21BcnJheVswXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgIEF0dGFjaFV0aWwuc3dpdGNoU3RyKHN0cjEsIHN0cjIsIHN0cjMsIHJhbmRvbUFycmF5WzFdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgQXR0YWNoVXRpbC5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMl0pICtcclxuICAgICAgICAgICAgICAgICAgICAndGltZXMnICtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lU3RhbXAuc3Vic3RyaW5nKDUpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzd2l0Y2hTdHI6IChzdHIxLCBzdHIyLCBzdHIzLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5BdHRhY2hVdGlsID0gQXR0YWNoVXRpbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNvcnRQYXRoKGZpZWxkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBwYXRoQXJyeSA9IGZpZWxkLnNwbGl0KCdfJyk7XHJcbiAgICAgICAgcmV0dXJuIHBhdGhBcnJ5LnJlZHVjZSgocHJlLCBiaW5kaW5nUGF0aCkgPT4ge1xyXG4gICAgICAgICAgICBwcmUucHVzaChiaW5kaW5nUGF0aFswXS50b0xvd2VyQ2FzZSgpICsgYmluZGluZ1BhdGguc3Vic3RyaW5nKDEsIGJpbmRpbmdQYXRoLmxlbmd0aCkpXHJcbiAgICAgICAgICAgIHJldHVybiBwcmU7XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RmllbGREYXRhKGZpZWxkRGF0YSkge1xyXG4gICAgICAgIGlmICghZmllbGREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JrSXRlbUxvZ3M6IEFycmF5PFBhcnRpYWw8V29ya0l0ZW1Mb2c+PiA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCByZXRMaXN0OiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRvck5hbWU6IHN0cmluZztcclxuICAgICAgICAgICAgICAgIG9wZXJhdGVUaW1lOiBEYXRlO1xyXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIH0+ID0gSlNPTi5wYXJzZShmaWVsZERhdGEpO1xyXG4gICAgICAgICAgICByZXRMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zaWduYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnVybCA9IHRoaXMuZ2V0VXJsKGB7XCJpZFwiOlwiJHtlbGVtZW50LnNpZ25hdHVyZX1cIn1gLCAndGFza2NlbnRlcnNpZ25hdHVyZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd29ya0l0ZW1Mb2dzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudC51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZFRpbWU6IGVsZW1lbnQub3BlcmF0ZVRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZWxlbWVudC5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yTmFtZTogZWxlbWVudC5vcGVyYXRvck5hbWUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMud29ya0l0ZW1Mb2dzID0gd29ya0l0ZW1Mb2dzO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAqIOS7juagueaNruWfn+mFjee9ruiOt+WPluWuoeaJueaEj+ingeS/oeaBr1xyXG4gICAgKi9cclxuICAgIHByaXZhdGUgZ2V0QXBwcm92YWxDb21tZW50KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGRvbWFpbkxpc3QgPSB0aGlzLmRvbWFpbnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5kb21haW5Db2RlICYmIGl0ZW0uZG9tYWluTmFtZSAmJiBpdGVtLmFjdGl2aXR5RGVmaW5lZElkcyk7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBwcm9jZXNzc0luc3RJZDogdGhpcy5wcm9jSW5zdElkLFxyXG4gICAgICAgICAgICBkb21haW5zOiBkb21haW5MaXN0XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRhdGFMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLmdldEFwcHJvdmFsQ29tbWVudEFwaShwYXJhbXMpLnN1YnNjcmliZShyZXNwID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3ApIHtcclxuICAgICAgICAgICAgICAgIFtdLmNvbmNhdChyZXNwKS5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEFwcHJvdmFsQ29tbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudGl0bGUgPSB2YWx1ZS5kb21haW5OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3b3JrSXRlbUxvZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUudGFza0NvbW1lbnRJbXBsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRPcmRlciA9PT0gJ3RpbWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrSXRlbUxvZ3MgPSB2YWx1ZS50YXNrQ29tbWVudEltcGwuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRlLnBhcnNlKGEub3BlcmF0b3JUaW1lKSAtIERhdGUucGFyc2UoYi5vcGVyYXRvclRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrSXRlbUxvZ3MgPSB2YWx1ZS50YXNrQ29tbWVudEltcGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgd29ya0l0ZW1Mb2dzRmlsdGVyID0gd29ya0l0ZW1Mb2dzLmZpbHRlcih3b3JrSXRlbSA9PiB3b3JrSXRlbS5hY3Rpb24gJiYgdGhpcy5maWx0ZXJBY3Rpb24uaW5kZXhPZih3b3JrSXRlbS5hY3Rpb24pID4gLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtJdGVtTG9nc0ZpbHRlciA9IHdvcmtJdGVtTG9ncy5maWx0ZXIod29ya0l0ZW0gPT4gd29ya0l0ZW0uYWN0aW9uICYmIHdvcmtJdGVtLmFjdGlvbiAhPT0gJ1N1Ym1pdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtJdGVtTG9nc0ZpbHRlci5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnNpZ25hdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS51cmwgPSB0aGlzLmdldFVybChpdGVtLnNpZ25hdHVyZSwgJ3Rhc2tjZW50ZXJzaWduYXR1cmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5hdHRhY2htZW50UmVmICYmIGl0ZW0uYXR0YWNobWVudFJlZiAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRJbmZvID0gSlNPTi5wYXJzZShpdGVtLmF0dGFjaG1lbnRSZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudExpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0YWNobWVudEluZm8ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogYXR0YWNobWVudEluZm9baV0uZmlsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiB0aGlzLmdldEZpbGVUeXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudEluZm9baV0uZmlsZU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNpemU6IGF0dGFjaG1lbnRJbmZvW2ldLmZpbGVTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuZ2V0RG93bkxvYWRVcmwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50SW5mb1tpXS5tZXRhZGF0YUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dmX2F0dGFjaG1lbnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhSWQ6IGF0dGFjaG1lbnRJbmZvW2ldLm1ldGFkYXRhSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50TGlzdC5wdXNoKGluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hdHRhY2htZW50TGlzdCA9IGF0dGFjaG1lbnRMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS53b3JrSXRlbUxvZ3MgPSB3b3JrSXRlbUxvZ3NGaWx0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdC5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJvciA9PiB7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAqIOiOt+WPluWuoeaJueaEj+ingemZhOS7tuWcsOWdgFxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VXJsKHNpZ25hdHVyZSwgcm9vdElkKSB7XHJcbiAgICAgICAgY29uc3QgQXR0YWNoVXRpbCA9IHtcclxuICAgICAgICAgICAgbWVyZ2VTdHJpbmc6IChzdHIsIHN0cjEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbiA9IHN0ci5sZW5ndGggPCBzdHIxLmxlbmd0aCA/IHN0ci5sZW5ndGggOiBzdHIxLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGxldCByZXMgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBzdHIuc3Vic3RyaW5nKGksIGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMgKz0gc3RyMS5zdWJzdHJpbmcoaSwgaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzICs9IHN0ci5sZW5ndGggPCBzdHIxLmxlbmd0aCA/IHN0cjEuc3Vic3RyaW5nKGkpIDogc3RyLnN1YnN0cmluZyhpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldFRva2VuOiAoc3RyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheSA9IFsxLCAyLCAzXTtcclxuICAgICAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID4gMjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIDI0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIDMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyMSA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cjIgPSBzdHIuc3Vic3RyaW5nKGxlbmd0aCwgMiAqIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHIzID0gc3RyLnN1YnN0cmluZygyICogbGVuZ3RoLCAzICogbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmRvbUFycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAzKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbcmFuZG9tIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAyKTtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5LnB1c2goYXJyYXlbcmFuZG9tIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKHJhbmRvbSAtIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tQXJyYXkucHVzaChhcnJheVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YW1wLnN1YnN0cmluZygwLCA1KSArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWVzJyArXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZG9tQXJyYXlbMF0gK1xyXG4gICAgICAgICAgICAgICAgICAgICcnICtcclxuICAgICAgICAgICAgICAgICAgICByYW5kb21BcnJheVsxXSArXHJcbiAgICAgICAgICAgICAgICAgICAgJycgK1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmRvbUFycmF5WzJdICtcclxuICAgICAgICAgICAgICAgICAgICBBdHRhY2hVdGlsLnN3aXRjaFN0cihzdHIxLCBzdHIyLCBzdHIzLCByYW5kb21BcnJheVswXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgIEF0dGFjaFV0aWwuc3dpdGNoU3RyKHN0cjEsIHN0cjIsIHN0cjMsIHJhbmRvbUFycmF5WzFdKSArXHJcbiAgICAgICAgICAgICAgICAgICAgQXR0YWNoVXRpbC5zd2l0Y2hTdHIoc3RyMSwgc3RyMiwgc3RyMywgcmFuZG9tQXJyYXlbMl0pICtcclxuICAgICAgICAgICAgICAgICAgICAndGltZXMnICtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lU3RhbXAuc3Vic3RyaW5nKDUpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzd2l0Y2hTdHI6IChzdHIxLCBzdHIyLCBzdHIzLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cjI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJvb3RJZCA9IHJvb3RJZCB8fCAnZGVmYXVsdC1yb290JztcclxuICAgICAgICBjb25zdCBhdHRhY2hJZCA9IEpTT04ucGFyc2Uoc2lnbmF0dXJlKS5pZDtcclxuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9ydW50aW1lL2Rmcy92MS4wL2RvYy9maWxlY29udGVudD9tZXRhZGF0YWlkPSR7YXR0YWNoSWR9JnJvb3RpZD0ke3Jvb3RJZH0mdG9rZW49JHtBdHRhY2hVdGlsLmdldFRva2VuKFxyXG4gICAgICAgICAgICBBdHRhY2hVdGlsLm1lcmdlU3RyaW5nKGF0dGFjaElkLCByb290SWQpXHJcbiAgICAgICAgKX1gO1xyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICog5a6h5om55pel5b+X5Zu96ZmF5YyW5L+h5oGvXHJcbiAgICAqL1xyXG4gICAgdHJhbnNsYXRlVGFzayhjb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgc3VwcG9ydExhbmd1YWdlID0gWyd6aC1DSFMnLCAnemhfQ0hUJywgJ2VuJ107XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJyk7XHJcbiAgICAgICAgbGV0IGxhbmdEYXRhO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IHtcclxuICAgICAgICAgICAgJ3poLUNIUyc6IHtcclxuICAgICAgICAgICAgICAgIGxvZ0RhdGU6ICflpITnkIbml7bpl7QnLFxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1RpbWU6ICflpITnkIbml7bplb8nLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WKnueQhuaEj+ingScsXHJcbiAgICAgICAgICAgICAgICBzaG93Rm9yZWNhc3RMb2c6ICfmmL7npLrlkI7nu63lrqHmibnkuronLFxyXG4gICAgICAgICAgICAgICAgaGlkZGVuRm9yZWNhc3RMb2c6ICfpmpDol4/lkI7nu63lrqHmibnkuronLFxyXG4gICAgICAgICAgICAgICAgdGVybWluYWw6ICfmnaXoh6onLFxyXG4gICAgICAgICAgICAgICAgd2ViOiAn55S16ISR56uvJyxcclxuICAgICAgICAgICAgICAgIG1vYmlsZTogJ+enu+WKqOerrycsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+WuoeaJueiusOW9lScsXHJcbiAgICAgICAgICAgICAgICB2aWV3UHJvY2VzczogJ+afpeeci+a1geeoiycsXHJcbiAgICAgICAgICAgICAgICBub2RlTmFtZTogJ+iKgueCueWQjeensCcsXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudDogJ+WKnueQhuS6uicsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlVGltZTogJ+aOpeaUtuaXtumXtCcsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb246ICfmk43kvZwnLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0VGltZTogJ+aPkOS6pOaXtumXtCcsXHJcbiAgICAgICAgICAgICAgICB0b2RvOiAn5b6F5Yqe55CGJyxcclxuICAgICAgICAgICAgICAgIGRvbmU6ICflt7Llip7nkIYnLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0OiAn5bey5o+Q5LqkJyxcclxuICAgICAgICAgICAgICAgIHVuZG86ICfmnKrliLDovr4nLFxyXG4gICAgICAgICAgICAgICAgdG9Bc3NpZ246ICfmnKrmjIfmtL4nLFxyXG4gICAgICAgICAgICAgICAgdG9SZWFkOiAn5b6F6ZiFJyxcclxuICAgICAgICAgICAgICAgIG5vUmVzb2x2ZWRVc2VyOiAn5pyq6Kej5p6Q5Yiw55So5oi3JyxcclxuICAgICAgICAgICAgICAgIG5vRGF0YTogJ+aaguaXoOaVsOaNricsXHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWU6ICfmjqXmlLbml7bpl7QnLFxyXG4gICAgICAgICAgICAgICAgdGFza1JlYWQ6ICflt7Lor7snLFxyXG4gICAgICAgICAgICAgICAgdGFza1RvUmVhZDogJ+acquivuycsXHJcbiAgICAgICAgICAgICAgICB0YXNrSGFuZGxlOiAn5a6e6ZmF5pON5L2c5Lq6JyxcclxuICAgICAgICAgICAgICAgIHRvU3VibWl0OiAn5b6F5o+Q5LqkJyxcclxuICAgICAgICAgICAgICAgIGRvd25sb2FkOiAn5LiL6L29JyxcclxuICAgICAgICAgICAgICAgIHZpZXc6ICfmn6XnnIsnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbjoge1xyXG4gICAgICAgICAgICAgICAgbG9nRGF0ZTogJ0VuZFRpbWUnLFxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1RpbWU6ICdQcm9jZXNzVGltZScsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQXBwcm92YWwgb3BpbmlvbicsXHJcbiAgICAgICAgICAgICAgICBzaG93Rm9yZWNhc3RMb2c6ICdzaG93IGZvcmVjYXN0IGxvZycsXHJcbiAgICAgICAgICAgICAgICBoaWRkZW5Gb3JlY2FzdExvZzogJ2hpZGUgZm9yZWNhc3QgbG9nJyxcclxuICAgICAgICAgICAgICAgIHRlcm1pbmFsOiAnRnJvbScsXHJcbiAgICAgICAgICAgICAgICB3ZWI6ICdXZWInLFxyXG4gICAgICAgICAgICAgICAgbW9iaWxlOiAnTW9iaWxlJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnTG9ncycsXHJcbiAgICAgICAgICAgICAgICB2aWV3UHJvY2VzczogJ1ZpZXcgUHJvY2VzcycsXHJcbiAgICAgICAgICAgICAgICBub2RlTmFtZTogJ05vZGUgbmFtZScsXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudDogJ1BhcnRpY2lwYW50JyxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVUaW1lOiAnUmVjZWl2ZSB0aW1lJyxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ0FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICBzdWJtaXRUaW1lOiAnU3VibWl0IHRpbWUnLFxyXG4gICAgICAgICAgICAgICAgdG9kbzogJ1RvZG8nLFxyXG4gICAgICAgICAgICAgICAgZG9uZTogJ0RvbmUnLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0OiAnU3VibWl0JyxcclxuICAgICAgICAgICAgICAgIHVuZG86ICdVbmRvJyxcclxuICAgICAgICAgICAgICAgIHRvQXNzaWduOiAnVG8gQXNzaWduJyxcclxuICAgICAgICAgICAgICAgIHRvUmVhZDogJ1RvIFJlYWQnLFxyXG4gICAgICAgICAgICAgICAgbm9SZXNvbHZlZFVzZXI6ICdObyBvbmUnLFxyXG4gICAgICAgICAgICAgICAgbm9EYXRhOiAnRW1wdHknLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiAnU3RhcnQgdGltZScsXHJcbiAgICAgICAgICAgICAgICB0YXNrUmVhZDogJ1JlYWQnLFxyXG4gICAgICAgICAgICAgICAgdGFza1RvUmVhZDogJ1RvIHJlYWQnLFxyXG4gICAgICAgICAgICAgICAgdGFza093bmVyOiAnT3BlcmF0b3InLFxyXG4gICAgICAgICAgICAgICAgdG9TdWJtaXQ6ICdUbyBzdWJtaXQnLFxyXG4gICAgICAgICAgICAgICAgZG93bmxvYWQ6ICdkb3dubG9hZCcsXHJcbiAgICAgICAgICAgICAgICB2aWV3OiAndmlldycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICd6aC1DSFQnOiB7XHJcbiAgICAgICAgICAgICAgICBsb2dEYXRlOiAn6JmV55CG5pmC6ZaTJyxcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NUaW1lOiAn6JmV55CG5pmC6ZW3JyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfovqbnkIbmhI/oposnLFxyXG4gICAgICAgICAgICAgICAgc2hvd0ZvcmVjYXN0TG9nOiAn6aGv56S65b6M57qM5a+p5om55Lq6JyxcclxuICAgICAgICAgICAgICAgIGhpZGRlbkZvcmVjYXN0TG9nOiAn6Zqx6JeP5b6M57qM5a+p5om55Lq6JyxcclxuICAgICAgICAgICAgICAgIHRlcm1pbmFsOiAn5L6G6IeqJyxcclxuICAgICAgICAgICAgICAgIHdlYjogJ+mbu+iFpuerrycsXHJcbiAgICAgICAgICAgICAgICBtb2JpbGU6ICfnp7vli5Xnq68nLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICflr6nmibnoqJjpjIQnLFxyXG4gICAgICAgICAgICAgICAgdmlld1Byb2Nlc3M6ICfmn6XnnIvmtYHnqIsnLFxyXG4gICAgICAgICAgICAgICAgbm9kZU5hbWU6ICfnr4Dpu57lkI3nqLEnLFxyXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQ6ICfovqbnkIbkuronLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZVRpbWU6ICfmjqXmlLbmmYLplpMnLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAn5pON5L2cJyxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdFRpbWU6ICfmj5DkuqTmmYLplpMnLFxyXG4gICAgICAgICAgICAgICAgdG9kbzogJ+W+hei+pueQhicsXHJcbiAgICAgICAgICAgICAgICBkb25lOiAn5bey6L6m55CGJyxcclxuICAgICAgICAgICAgICAgIHN1Ym1pdDogJ+W3suaPkOS6pCcsXHJcbiAgICAgICAgICAgICAgICB1bmRvOiAn5pyq5Yiw6YGUJyxcclxuICAgICAgICAgICAgICAgIHRvQXNzaWduOiAn5pyq5oyH5rS+JyxcclxuICAgICAgICAgICAgICAgIHRvUmVhZDogJ+W+hemWsScsXHJcbiAgICAgICAgICAgICAgICBub1Jlc29sdmVkVXNlcjogJ+acquino+aekOWIsOeUqOaIticsXHJcbiAgICAgICAgICAgICAgICBub0RhdGE6ICfmmqvnhKHmlbjmk5onLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiAn5o6l5pS25pmC6ZaTJyxcclxuICAgICAgICAgICAgICAgIHRhc2tSZWFkOiAn5bey6K6AJyxcclxuICAgICAgICAgICAgICAgIHRhc2tUb1JlYWQ6ICfmnKroroAnLFxyXG4gICAgICAgICAgICAgICAgdGFza0hhbmRsZTogJ+Wvpumam+aTjeS9nOS6uicsXHJcbiAgICAgICAgICAgICAgICB0b1N1Ym1pdDogJ+W+heaPkOS6pCcsXHJcbiAgICAgICAgICAgICAgICBkb3dubG9hZDogJ+S4i+i8iScsXHJcbiAgICAgICAgICAgICAgICB2aWV3OiAn5p+l55yLJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChkZWZhdWx0TGFuZyAmJiBzdXBwb3J0TGFuZ3VhZ2UuaW5jbHVkZXMoZGVmYXVsdExhbmcpKSB7XHJcbiAgICAgICAgICAgIGxhbmdEYXRhID0gdHJhbnNsYXRlW2RlZmF1bHRMYW5nXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYW5nRGF0YSA9IHRyYW5zbGF0ZVsnemgtQ0hTJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsYW5nRGF0YVtjb2RlXTtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgKiDojrflj5bpmYTku7bmlofku7bnsbvlnotcclxuICAgICovXHJcbiAgICBwcml2YXRlIGdldEZpbGVUeXBlKGZpbGVOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgcG9zID0gZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKTtcclxuICAgICAgICBsZXQgdHlwZSA9IGZpbGVOYW1lLnN1YnN0cmluZyhwb3MgKyAxKTtcclxuICAgICAgICB0eXBlID0gdHlwZSA9PT0gJycgPyAnRGVmYXVsdCcgOiB0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgZG9jTGliID0gJ2RvYy1kb2N4LWh0bS1odG1sLWpzLXBkZi1wcHQtcHB0eC1yYXItemlwLXR4dC14bHMteGxzeCc7XHJcbiAgICAgICAgY29uc3QgdmlkZW9MaWIgPSAnd2F2LWFpZi1haWZmLWF1LW1wMS1tcDItbXAzLXJhLXJtLXJhbS1taWQtcm1pJztcclxuICAgICAgICBjb25zdCBhdWRpb0xpYiA9ICdhdmktcm0tcm12Yi1tcGVnLW1wZy1kYXQtbW92LXF0LWFzZi13bS1tcDQnO1xyXG4gICAgICAgIGNvbnN0IGltZ0xpYiA9XHJcbiAgICAgICAgICAgICd3ZWJwLWJhaWJtcC1kdXBjeC10aWYtZ2lmLWpwZWctdGdhLWV4aWYtZnB4LXN2Zy1wc2QtY2RyLXBjZC1keGYtdWZvLWVwcy1haS1wbmctaGRyaS1yYXctd21mLWZsaWMtZW1mLWljby1qcGcnO1xyXG4gICAgICAgIGlmIChkb2NMaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2aWRlb0xpYi5pbmRleE9mKHR5cGUpID49IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9ICd2aWRlbyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhdWRpb0xpYi5pbmRleE9mKHR5cGUpID49IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdhdWRpbyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbWdMaWIuaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAncGljdHVyZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9ICdkZWZhdWx0JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgJy9wbGF0Zm9ybS9ydW50aW1lL3dmL3dlYmFwcC9tb2JpbGV0YXNrY2VudGVyL2Fzc2V0cy9hY2Nlc3NvcnkvJyArXHJcbiAgICAgICAgICAgIHR5cGUgK1xyXG4gICAgICAgICAgICAnLnN2Zz92PTIwMjMwMzE2J1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICog6I635Y+W6ZmE5Lu25LiL6L295Zyw5Z2AXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXREb3duTG9hZFVybChhdHRhY2hJZCwgcm9vdElkKSB7XHJcbiAgICAgICAgcm9vdElkID0gcm9vdElkIHx8ICdkZWZhdWx0LXJvb3QnO1xyXG4gICAgICAgIGNvbnN0IGlzaHR0cHMgPSAnaHR0cHM6JyA9PT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgICAgIGlmIChpc2h0dHBzKSB7XHJcbiAgICAgICAgICAgIHVybCA9ICdodHRwczovLycgKyB1cmw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXJsID0gJ2h0dHA6Ly8nICsgdXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cmwgKz0gYC9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2MvZmlsZWNvbnRlbnQ/bWV0YWRhdGFpZD0ke2F0dGFjaElkfSZyb290aWQ9JHtyb290SWR9JnRva2VuPSR7dGhpcy5BdHRhY2hVdGlsLmdldFRva2VuKFxyXG4gICAgICAgICAgICB0aGlzLkF0dGFjaFV0aWwubWVyZ2VTdHJpbmcoYXR0YWNoSWQsIHJvb3RJZClcclxuICAgICAgICApfWA7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgKiDngrnlh7vkuIvovb1cclxuICAgICovXHJcbiAgICBhdHRhY2htZW50RG93bmxvYWQoZG93bmxvYWRVcmw6IHN0cmluZykge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKGRvd25sb2FkVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmihOiniOmZhOS7tlxyXG4gICAgICovXHJcbiAgICBhdHRhY2htZW50UHJldmlldyhtZXRhZGF0YUlkcykge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFwcFR5cGU6ICdhcHAnLFxyXG4gICAgICAgICAgICBmdW5jSWQ6ICcnLFxyXG4gICAgICAgICAgICB0YWJOYW1lOiAn5paH5qGj5Zyo57q/6aKE6KeIJyxcclxuICAgICAgICAgICAgYXBwSWQ6ICc2Y2NiNDc2Yi1mMmJhLWRmOGYtNmY0Ny1kMzdkMTAwYzU2ZTInLFxyXG4gICAgICAgICAgICBhcHBFbnRyYW5jZTogJ2RvY3ZpZXdlcnRhYicsXHJcbiAgICAgICAgICAgIHRhYklkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgZW50aXR5UGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUlkTGlzdDogbWV0YWRhdGFJZHMsXHJcbiAgICAgICAgICAgICAgICByb290SWQ6ICd3Zl9hdHRhY2htZW50JyxcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2aWV3T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dIZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1BhZ2luZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGh1bWJuYWlsczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93RG93bmxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlYXJjaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93Wm9vbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93UHJpbnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlY29uZGFyeVRvb2xCYXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCh0b3AgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICh0b3AgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5mdW5jLm9wZW5NZW51KG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0b3AucG9zdE1lc3NhZ2UoJ1Rhc2tDbG9zZUxvZ0RpYWxvZycsIHRvcC5kb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=