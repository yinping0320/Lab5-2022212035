{"version":3,"file":"farris-ui-popover.js.map","sources":["ng://@farris/ui-popover/lib/popover.config.ts","ng://@farris/ui-popover/lib/popover-container.component.ts","ng://@farris/ui-popover/lib/popover.directive.ts","ng://@farris/ui-popover/lib/popover.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * Configuration service for the Popover directive.\r\n * You can inject this service, typically in your root component, and customize\r\n * the values of its properties in order to provide default values for all the\r\n * popovers used in the application.\r\n */\r\n@Injectable(\r\n  {\r\n    providedIn: 'root'\r\n  }\r\n)\r\nexport class PopoverConfig {\r\n  /**\r\n   * Placement of a popover. Accepts: \"top\", \"bottom\", \"left\", \"right\", \"auto\"\r\n   */\r\n  placement = 'top';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  triggers = 'click';\r\n\r\n  outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the popover should be appended to.\r\n   */\r\n  container: string;\r\n}\r\n","import { ChangeDetectionStrategy, Input, Component, Optional, ViewChild, ElementRef, AfterViewChecked, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { PopoverConfig } from './popover.config';\r\nimport { isBs3 } from '@farris/ui-modal/utils';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'farris-popover',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    // tslint:disable-next-line\r\n    host: {\r\n        '[class]':\r\n            '\"popover in popover-\" + placement + \" \" + \"bs-popover-\" + placement + \" \" + placement + \" \" + containerClass',\r\n        '[class.show]': '!isBs3',\r\n        '[class.bs3]': 'isBs3',\r\n        role: 'tooltip',\r\n        style: 'display:block;'\r\n    },\r\n    styles: [\r\n        `\r\n    :host.bs3.popover-top {\r\n      margin-bottom: 10px;\r\n    }\r\n    :host.bs3.popover.top>.arrow {\r\n      margin-left: -2px;\r\n    }\r\n    :host.bs3.popover.top {\r\n      margin-bottom: 10px;\r\n    }\r\n    :host.popover.bottom>.arrow {\r\n      margin-left: -4px;\r\n    }\r\n    :host.bs3.bs-popover-left {\r\n      margin-right: .5rem;\r\n    }\r\n    :host.bs3.bs-popover-right .arrow, :host.bs3.bs-popover-left .arrow{\r\n      margin: .3rem 0;\r\n    }\r\n    :host.arrow-left .arrow {\r\n        left: calc(50% - 10px);\r\n    }\r\n    `\r\n    ],\r\n    templateUrl: './popover-container.component.html'\r\n})\r\nexport class PopoverContainerComponent implements AfterViewInit, OnDestroy {\r\n    @ViewChild('innerEle', { read: ElementRef }) innerNode: ElementRef;\r\n    @Input() placement: string;\r\n    @Input() title: string;\r\n    containerClass: string;\r\n    private mouseenterEvent: any;\r\n    private mouseleaveEvent: any;\r\n    private mounseState = new Subject<boolean>();\r\n\r\n    get isBs3(): boolean {\r\n        return isBs3();\r\n    }\r\n\r\n    constructor(config: PopoverConfig, @Optional() private el: ElementRef) {\r\n        Object.assign(this, config);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.el) {\r\n            this.mouseenterEvent = this.changeMouseState.bind(this, true);\r\n            this.mouseleaveEvent = this.changeMouseState.bind(this, false);\r\n            this.el.nativeElement.addEventListener('mouseenter', this.mouseenterEvent);\r\n            this.el.nativeElement.addEventListener('mouseleave', this.mouseleaveEvent);\r\n        }\r\n    }\r\n    /**\r\n     * è·åé¼ æ ååç¶æ\r\n     */\r\n    getMouseState() {\r\n        return this.mounseState;\r\n    }\r\n    /**\r\n     * ç»å®çäºä»¶\r\n     * @param state \r\n     */\r\n    private changeMouseState(state) {\r\n        this.mounseState.next(state);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.mouseenterEvent) {\r\n            this.el.nativeElement.removeEventListener('mouseenter', this.mouseenterEvent);\r\n        }\r\n        if (this.mouseleaveEvent) {\r\n            this.el.nativeElement.removeEventListener('mouseleave', this.mouseleaveEvent);\r\n        }\r\n        this.mounseState.unsubscribe();\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    OnDestroy,\r\n    OnInit,\r\n    Output,\r\n    Renderer2,\r\n    TemplateRef,\r\n    ViewContainerRef,\r\n    Optional,\r\n    Injector,\r\n    NgZone\r\n} from '@angular/core';\r\nimport { PopoverConfig } from './popover.config';\r\nimport { ComponentLoader, ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { PopoverContainerComponent } from './popover-container.component';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\n\r\n/**\r\n * A lightweight, extensible directive for fancy popover creation.\r\n */\r\n@Directive({ selector: '[farrisPopover]', exportAs: 'bs-popover' })\r\nexport class PopoverDirective implements OnInit, OnDestroy {\r\n    /**\r\n     * Content to be displayed as popover.\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Input() popover: string | TemplateRef<any>;\r\n    /**\r\n     * Context to be used if popover is a template.\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Input() popoverContext: any;\r\n    /**\r\n     * Title of a popover.\r\n     */\r\n    @Input() popoverTitle: string;\r\n    /**\r\n     * Placement of a popover. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n     */\r\n    @Input() placement: 'top' | 'bottom' | 'left' | 'right' | 'auto';\r\n    /**\r\n     * Close popover on outside click\r\n     */\r\n    @Input() outsideClick = true;\r\n    /**\r\n     * Specifies events that should trigger. Supports a space separated list of\r\n     * event names.\r\n     */\r\n    @Input() triggers: string;\r\n    /**\r\n     * A selector specifying the element the popover should be appended to.\r\n     */\r\n    @Input() container = 'body';\r\n\r\n    /**\r\n     * Css class for popover container\r\n     */\r\n    @Input() containerClass = '';\r\n    // ææ¡ä»¶æ¿æ´»\r\n    @Input() popActive = true;\r\n\r\n    // æ¾ç¤ºå¨ä½\r\n    @Input() showAction = 'show';\r\n    /**\r\n     * Returns whether or not the popover is currently being shown\r\n     */\r\n    @Input()\r\n    get isOpen(): boolean {\r\n        return this._popover.isShown;\r\n    }\r\n\r\n    set isOpen(value: boolean) {\r\n        if (value) {\r\n            this[this.showAction]();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n    @Input() isFixed=false;\r\n\r\n    /**\r\n     * Emits an event when the popover is shown\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Output() onShown: EventEmitter<any>;\r\n    /**\r\n     * Emits an event when the popover is hidden\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Output() onHidden: EventEmitter<any>;\r\n\r\n    private _popover: ComponentLoader<PopoverContainerComponent>;\r\n    private _isInited = false;\r\n    private ngZone;\r\n    // æ è®°æ¯å¦è¿å¥æç¤ºæ¡å\r\n    private containerInOutState = false;\r\n    // æ è®°\r\n    private setTimeoutFlag;\r\n    \r\n    private commonUtils: CommonUtils;\r\n\r\n    private overlaySer: OverLayHiddenService;\r\n    private _bodyOverflow = '';\r\n    constructor(\r\n        _config: PopoverConfig,\r\n        private _elementRef: ElementRef,\r\n        private _renderer: Renderer2,\r\n        _viewContainerRef: ViewContainerRef,\r\n        cis: ComponentLoaderFactory,\r\n        private _positionService: PositioningService,\r\n        @Optional() private inject: Injector\r\n    ) {\r\n        if (this.inject) {\r\n            this.ngZone = this.inject.get(NgZone, null);\r\n            this.overlaySer = this.inject.get(OverLayHiddenService, null);\r\n            this.commonUtils = this.inject.get(CommonUtils, new CommonUtils());\r\n        }\r\n        this._popover = cis\r\n            .createLoader<PopoverContainerComponent>(_elementRef, _viewContainerRef, _renderer)\r\n            .provide({ provide: PopoverConfig, useValue: _config });\r\n        Object.assign(this, _config);\r\n        this.onShown = this._popover.onShown;\r\n        this.onHidden = this._popover.onHidden;\r\n\r\n        // fix: no focus on button on Mac OS #1795\r\n        if (typeof window !== 'undefined') {\r\n            _elementRef.nativeElement.addEventListener('click', function () {\r\n                try {\r\n                    _elementRef.nativeElement.focus();\r\n                } catch (err) {\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!this.overlaySer) {\r\n            this.overlaySer = new OverLayHiddenService();\r\n        }\r\n    }\r\n\r\n\r\n    private hasScrollbarY() {\r\n        if (!this._bodyOverflow) {\r\n            this._bodyOverflow = getComputedStyle(document.body).overflow;\r\n        }\r\n        return document.body.scrollHeight > window.innerHeight && this._bodyOverflow !== 'hidden';\r\n    }\r\n\r\n    /**\r\n     * Opens an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    show(): void {\r\n        if (!this.popActive || this._popover.isShown || !this.popover) {\r\n            return;\r\n        }\r\n\r\n        this._popover\r\n            .attach(PopoverContainerComponent)\r\n            .to(this.container)\r\n            .position({ attachment: this.placement })\r\n            .show({\r\n                showType: \"popover\",\r\n                content: this.popover,\r\n                context: this.popoverContext,\r\n                placement: this.placement,\r\n                title: this.popoverTitle,\r\n                containerClass: this.containerClass,\r\n            });\r\n\r\n            // if (!this.hasScrollbarY()) {\r\n            //     this._renderer.addClass(document.body, 'f-loading-dot-wrapper');\r\n            // }\r\n            /*è§£å³æå¥å°bodyéçå±çº§é®é¢*/\r\n            const zIndex = this.commonUtils.getFloatingLayerIndex();\r\n            this._popover.instance['el'].nativeElement.style.position = 'fixed';\r\n            this._popover.instance['el'].nativeElement.style.zIndex = zIndex;\r\n\r\n            this.overlaySer.registerMouseEvent(this._elementRef.nativeElement, (e: MouseEvent) => {\r\n                const target = e.target as any;\r\n                if (this._popover.instance['el'].nativeElement.contains(target) ||\r\n                    target.closest('.overlay-pane')) {\r\n                    return;\r\n                }\r\n                this.hide();\r\n            });\r\n        \r\n        // this.isOpen = true;\r\n        if (this.triggers == 'hover' && this._popover.instance && this._popover.instance.getMouseState) {\r\n            this._popover.instance.getMouseState().subscribe((state) => {\r\n                this.containerInOutState = state;\r\n                if (!state) {\r\n                    this.hide();\r\n                }\r\n            });\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    show2(): void {\r\n        if (!this.popActive || this._popover.isShown || !this.popover) {\r\n            return;\r\n        }\r\n\r\n        const targetRef = this._popover\r\n            .attach(PopoverContainerComponent)\r\n            .to(this.container)\r\n            .show({\r\n                content: this.popover,\r\n                context: this.popoverContext,\r\n                placement: this.placement,\r\n                title: this.popoverTitle,\r\n                containerClass: this.containerClass\r\n            });\r\n            this.overlaySer.registerMouseEvent(this._elementRef.nativeElement, () => {\r\n                this.hide();\r\n            });\r\n        //this.isOpen = true;\r\n        const {\r\n            height: hostHeight,\r\n            width: hostWidth,\r\n            top,\r\n            left\r\n        } = this._elementRef.nativeElement.getBoundingClientRect();\r\n        const { height: targetHeight, width: targetWidth } = targetRef.location.nativeElement.getBoundingClientRect();\r\n        let targetTop: string, targetLeft: string;\r\n        switch (this.placement) {\r\n            case 'bottom':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            case 'left':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            case 'right':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            default:\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n        }\r\n        const zIndex = this.commonUtils.getFloatingLayerIndex();\r\n        const postion = { top: targetTop, left: targetLeft, zIndex };\r\n        this.setStyles(targetRef.location.nativeElement, postion);\r\n    }\r\n\r\n    setStyles(element, postion) {\r\n        const paramsArr = Object.keys(postion);\r\n        paramsArr &&\r\n            paramsArr.forEach(param => {\r\n                this._renderer.setStyle(element, param, postion[param]);\r\n            });\r\n    }\r\n\r\n\r\n    private _hide() {\r\n        this._popover.hide();\r\n        this.overlaySer.destory(this._elementRef.nativeElement);\r\n    }\r\n    /**\r\n     * Closes an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    hide(): void {\r\n        if (this.triggers == 'hover' && this.ngZone) {\r\n            if (this.isOpen) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    setTimeout(() => {\r\n                        if (!this.containerInOutState) {\r\n                            this._hide();\r\n                        }\r\n                    }, 300);\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.isOpen) {\r\n            this._hide();\r\n        }\r\n    }\r\n    /**\r\n     * Toggles an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    toggle(): void {\r\n        if (this.isOpen) {\r\n            return this.hide();\r\n        }\r\n\r\n        this.show();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // fix: seems there are an issue with `routerLinkActive`\r\n        // which result in duplicated call ngOnInit without call to ngOnDestroy\r\n        // read more: https://github.com/valor-software/ngx-bootstrap/issues/1885\r\n        if (this._isInited) {\r\n            return;\r\n        }\r\n        this._isInited = true;\r\n        if(this.isFixed){\r\n            this._positionService.setOptions({\r\n                modifiers: {\r\n                    preventOverflow: {\r\n                        enabled: false\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.triggers == 'hover') {\r\n            this._popover.listen({\r\n                triggers: this.triggers,\r\n                outsideClick: this.outsideClick,\r\n                show: () => this[this.showAction](),\r\n                hide: () => this.hide()\r\n            });\r\n        } else {\r\n            this._popover.listen({\r\n                triggers: this.triggers,\r\n                outsideClick: this.outsideClick,\r\n                show: () => this[this.showAction]()\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._popover.dispose();\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\nimport { PopoverConfig } from './popover.config';\r\nimport { PopoverDirective } from './popover.directive';\r\nimport { PopoverContainerComponent } from './popover-container.component';\r\nimport { ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FarrisCommonModule\r\n  ],\r\n  declarations: [PopoverDirective, PopoverContainerComponent],\r\n  exports: [PopoverDirective],\r\n  entryComponents: [PopoverContainerComponent]\r\n})\r\nexport class PopoverModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: PopoverModule,\r\n      providers: [PopoverConfig, ComponentLoaderFactory, PositioningService]\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;AAaA,MAAa,aAAa;IAL1B;;;;QASE,cAAS,GAAG,KAAK,CAAC;;;;;QAKlB,aAAQ,GAAG,OAAO,CAAC;QAEnB,iBAAY,GAAG,IAAI,CAAC;KAKrB;;;YArBA,UAAU,SACT;gBACE,UAAU,EAAE,MAAM;aACnB;;;;;;;;ACXH,MA4Ca,yBAAyB;;;;;IAalC,YAAY,MAAqB,EAAsB,EAAc;QAAd,OAAE,GAAF,EAAE,CAAY;QAN7D,gBAAW,GAAG,IAAI,OAAO,EAAW,CAAC;QAOzC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;KAC/B;;;;IAND,IAAI,KAAK;QACL,OAAO,KAAK,EAAE,CAAC;KAClB;;;;IAMD,eAAe;QACX,IAAI,IAAI,CAAC,EAAE,EAAE;YACT,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC/D,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAC3E,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SAC9E;KACJ;;;;;IAID,aAAa;QACT,OAAO,IAAI,CAAC,WAAW,CAAC;KAC3B;;;;;;;IAKO,gBAAgB,CAAC,KAAK;QAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAChC;;;;IAED,WAAW;QACP,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SACjF;QACD,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SACjF;QACD,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;KAClC;;;YAtFJ,SAAS,SAAC;gBACP,QAAQ,EAAE,gBAAgB;gBAC1B,eAAe,EAAE,uBAAuB,CAAC,MAAM;;gBAE/C,IAAI,EAAE;oBACF,SAAS,EACL,8GAA8G;oBAClH,cAAc,EAAE,QAAQ;oBACxB,aAAa,EAAE,OAAO;oBACtB,IAAI,EAAE,SAAS;oBACf,KAAK,EAAE,gBAAgB;iBAC1B;gBA0BD,wQAAiD;yBAxB7C;;;;;;;;;;;;;;;;;;;;;;KAsBH;aAGJ;;;;YA1CQ,aAAa;YADmD,UAAU,uBAyD3C,QAAQ;;;wBAZ3C,SAAS,SAAC,UAAU,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE;wBAC1C,KAAK;oBACL,KAAK;;;;;;;AC/CV;;;AAyBA,MAAa,gBAAgB;;;;;;;;;;IAkFzB,YACI,OAAsB,EACd,WAAuB,EACvB,SAAoB,EAC5B,iBAAmC,EACnC,GAA2B,EACnB,gBAAoC,EACxB,MAAgB;QAL5B,gBAAW,GAAX,WAAW,CAAY;QACvB,cAAS,GAAT,SAAS,CAAW;QAGpB,qBAAgB,GAAhB,gBAAgB,CAAoB;QACxB,WAAM,GAAN,MAAM,CAAU;;;;QAnE/B,iBAAY,GAAG,IAAI,CAAC;;;;QASpB,cAAS,GAAG,MAAM,CAAC;;;;QAKnB,mBAAc,GAAG,EAAE,CAAC;;QAEpB,cAAS,GAAG,IAAI,CAAC;;QAGjB,eAAU,GAAG,MAAM,CAAC;QAgBpB,YAAO,GAAC,KAAK,CAAC;QAcf,cAAS,GAAG,KAAK,CAAC;;QAGlB,wBAAmB,GAAG,KAAK,CAAC;QAO5B,kBAAa,GAAG,EAAE,CAAC;QAUvB,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;YAC9D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,WAAW,EAAE,CAAC,CAAC;SACtE;QACD,IAAI,CAAC,QAAQ,GAAG,GAAG;aACd,YAAY,CAA4B,WAAW,EAAE,iBAAiB,EAAE,SAAS,CAAC;aAClF,OAAO,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC;QAC5D,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;;QAGvC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;YAC/B,WAAW,CAAC,aAAa,CAAC,gBAAgB,CAAC,OAAO;;;YAAE;gBAChD,IAAI;oBACA,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;iBACrC;gBAAC,OAAO,GAAG,EAAE;oBACV,OAAO;iBACV;aACJ,EAAC,CAAC;SACN;QAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,IAAI,CAAC,UAAU,GAAG,IAAI,oBAAoB,EAAE,CAAC;SAChD;KACJ;;;;;IAxED,IACI,MAAM;QACN,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;KAChC;;;;;IAED,IAAI,MAAM,CAAC,KAAc;QACrB,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;SAC3B;aAAM;YACH,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;KACJ;;;;;IAgEO,aAAa;QACjB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;SACjE;QACD,OAAO,QAAQ,CAAC,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,WAAW,IAAI,IAAI,CAAC,aAAa,KAAK,QAAQ,CAAC;KAC7F;;;;;;IAMD,IAAI;QACA,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAC3D,OAAO;SACV;QAED,IAAI,CAAC,QAAQ;aACR,MAAM,CAAC,yBAAyB,CAAC;aACjC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;aAClB,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;aACxC,IAAI,CAAC;YACF,QAAQ,EAAE,SAAS;YACnB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,cAAc;YAC5B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,KAAK,EAAE,IAAI,CAAC,YAAY;YACxB,cAAc,EAAE,IAAI,CAAC,cAAc;SACtC,CAAC,CAAC;;;;;;cAMG,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE;QACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC;QACpE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;QAEjE,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa;;;;QAAE,CAAC,CAAa;;kBACvE,MAAM,sBAAG,CAAC,CAAC,MAAM,EAAO;YAC9B,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC3D,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;gBACjC,OAAO;aACV;YACD,IAAI,CAAC,IAAI,EAAE,CAAC;SACf,EAAC,CAAC;;QAGP,IAAI,IAAI,CAAC,QAAQ,IAAI,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,EAAE;YAC5F,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,SAAS;;;;YAAC,CAAC,KAAK;gBACnD,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;gBACjC,IAAI,CAAC,KAAK,EAAE;oBACR,IAAI,CAAC,IAAI,EAAE,CAAC;iBACf;aACJ,EAAC,CAAC;SACN;KAGJ;;;;IAED,KAAK;QACD,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAC3D,OAAO;SACV;;cAEK,SAAS,GAAG,IAAI,CAAC,QAAQ;aAC1B,MAAM,CAAC,yBAAyB,CAAC;aACjC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;aAClB,IAAI,CAAC;YACF,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,cAAc;YAC5B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,KAAK,EAAE,IAAI,CAAC,YAAY;YACxB,cAAc,EAAE,IAAI,CAAC,cAAc;SACtC,CAAC;QACF,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa;;;QAAE;YAC/D,IAAI,CAAC,IAAI,EAAE,CAAC;SACf,EAAC,CAAC;;cAED,EACF,MAAM,EAAE,UAAU,EAClB,KAAK,EAAE,SAAS,EAChB,GAAG,EACH,IAAI,EACP,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,qBAAqB,EAAE;cACpD,EAAE,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,SAAS,CAAC,QAAQ,CAAC,aAAa,CAAC,qBAAqB,EAAE;;YACzG,SAAiB;;YAAE,UAAkB;QACzC,QAAQ,IAAI,CAAC,SAAS;YAClB,KAAK,QAAQ;gBACT,SAAS,GAAG,GAAG,GAAG,GAAG,YAAY,GAAG,CAAC,IAAI,CAAC;gBAC1C,UAAU,GAAG,GAAG,IAAI,GAAG,SAAS,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,IAAI,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,SAAS,MAAM,EAAE,CAAC,CAAA;gBAC5E,MAAM;YACV,KAAK,MAAM;gBACP,SAAS,GAAG,GAAG,GAAG,GAAG,YAAY,GAAG,CAAC,IAAI,CAAC;gBAC1C,UAAU,GAAG,GAAG,IAAI,GAAG,SAAS,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,IAAI,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,SAAS,MAAM,EAAE,CAAC,CAAA;gBAC5E,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,GAAG,GAAG,GAAG,GAAG,YAAY,GAAG,CAAC,IAAI,CAAC;gBAC1C,UAAU,GAAG,GAAG,IAAI,GAAG,SAAS,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,IAAI,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,SAAS,MAAM,EAAE,CAAC,CAAA;gBAC5E,MAAM;YACV;gBACI,SAAS,GAAG,GAAG,GAAG,GAAG,YAAY,GAAG,CAAC,IAAI,CAAC;gBAC1C,UAAU,GAAG,GAAG,IAAI,GAAG,SAAS,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,IAAI,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,SAAS,MAAM,EAAE,CAAC,CAAA;gBAC5E,MAAM;SACb;;cACK,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE;;cACjD,OAAO,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE;QAC5D,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;KAC7D;;;;;;IAED,SAAS,CAAC,OAAO,EAAE,OAAO;;cAChB,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACtC,SAAS;YACL,SAAS,CAAC,OAAO;;;;YAAC,KAAK;gBACnB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;aAC3D,EAAC,CAAC;KACV;;;;;IAGO,KAAK;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;KAC3D;;;;;;IAKD,IAAI;QACA,IAAI,IAAI,CAAC,QAAQ,IAAI,OAAO,IAAI,IAAI,CAAC,MAAM,EAAE;YACzC,IAAI,IAAI,CAAC,MAAM,EAAE;gBACb,IAAI,CAAC,MAAM,CAAC,iBAAiB;;;gBAAC;oBAC1B,UAAU;;;oBAAC;wBACP,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;4BAC3B,IAAI,CAAC,KAAK,EAAE,CAAC;yBAChB;qBACJ,GAAE,GAAG,CAAC,CAAC;iBACX,EAAC,CAAC;aACN;YACD,OAAO;SACV;QAED,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;;;;;;IAKD,MAAM;QACF,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,OAAO,IAAI,CAAC,IAAI,EAAE,CAAC;SACtB;QAED,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;;;;IAED,QAAQ;;;;QAIJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO;SACV;QACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAG,IAAI,CAAC,OAAO,EAAC;YACZ,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC;gBAC7B,SAAS,EAAE;oBACP,eAAe,EAAE;wBACb,OAAO,EAAE,KAAK;qBACjB;iBACJ;aACJ,CAAC,CAAC;SACN;QACD,IAAI,IAAI,CAAC,QAAQ,IAAI,OAAO,EAAE;YAC1B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,YAAY,EAAE,IAAI,CAAC,YAAY;gBAC/B,IAAI;;;gBAAE,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAA;gBACnC,IAAI;;;gBAAE,MAAM,IAAI,CAAC,IAAI,EAAE,CAAA;aAC1B,CAAC,CAAC;SACN;aAAM;YACH,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,YAAY,EAAE,IAAI,CAAC,YAAY;gBAC/B,IAAI;;;gBAAE,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAA;aACtC,CAAC,CAAC;SACN;KACJ;;;;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;KAC3B;;;YA5TJ,SAAS,SAAC,EAAE,QAAQ,EAAE,iBAAiB,EAAE,QAAQ,EAAE,YAAY,EAAE;;;;YATzD,aAAa;YAblB,UAAU;YAMV,SAAS;YAET,gBAAgB;YAMM,sBAAsB;YAEvC,kBAAkB;YANvB,QAAQ,uBAsGH,QAAQ;;;sBApFZ,KAAK;6BAKL,KAAK;2BAIL,KAAK;wBAIL,KAAK;2BAIL,KAAK;uBAKL,KAAK;wBAIL,KAAK;6BAKL,KAAK;wBAEL,KAAK;yBAGL,KAAK;qBAIL,KAAK;sBAYL,KAAK;sBAML,MAAM;uBAKN,MAAM;;;;;;;AC7FX,MAoBa,aAAa;;;;IACxB,OAAO,OAAO;QACZ,OAAO;YACL,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE,CAAC,aAAa,EAAE,sBAAsB,EAAE,kBAAkB,CAAC;SACvE,CAAC;KACH;;;YAfF,QAAQ,SAAC;gBACR,OAAO,EAAE;oBACP,YAAY;oBACZ,kBAAkB;iBACnB;gBACD,YAAY,EAAE,CAAC,gBAAgB,EAAE,yBAAyB,CAAC;gBAC3D,OAAO,EAAE,CAAC,gBAAgB,CAAC;gBAC3B,eAAe,EAAE,CAAC,yBAAyB,CAAC;aAC7C;;;;;;;;;;;;;;;;;;;;"}
