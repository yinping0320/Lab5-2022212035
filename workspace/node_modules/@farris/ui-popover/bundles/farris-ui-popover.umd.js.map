{"version":3,"file":"farris-ui-popover.umd.js.map","sources":["ng://@farris/ui-popover/lib/popover.config.ts","ng://@farris/ui-popover/lib/popover-container.component.ts","ng://@farris/ui-popover/lib/popover.directive.ts","ng://@farris/ui-popover/lib/popover.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n/**\r\n * Configuration service for the Popover directive.\r\n * You can inject this service, typically in your root component, and customize\r\n * the values of its properties in order to provide default values for all the\r\n * popovers used in the application.\r\n */\r\n@Injectable(\r\n  {\r\n    providedIn: 'root'\r\n  }\r\n)\r\nexport class PopoverConfig {\r\n  /**\r\n   * Placement of a popover. Accepts: \"top\", \"bottom\", \"left\", \"right\", \"auto\"\r\n   */\r\n  placement = 'top';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  triggers = 'click';\r\n\r\n  outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the popover should be appended to.\r\n   */\r\n  container: string;\r\n}\r\n","import { ChangeDetectionStrategy, Input, Component, Optional, ViewChild, ElementRef, AfterViewChecked, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { PopoverConfig } from './popover.config';\r\nimport { isBs3 } from '@farris/ui-modal/utils';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'farris-popover',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    // tslint:disable-next-line\r\n    host: {\r\n        '[class]':\r\n            '\"popover in popover-\" + placement + \" \" + \"bs-popover-\" + placement + \" \" + placement + \" \" + containerClass',\r\n        '[class.show]': '!isBs3',\r\n        '[class.bs3]': 'isBs3',\r\n        role: 'tooltip',\r\n        style: 'display:block;'\r\n    },\r\n    styles: [\r\n        `\r\n    :host.bs3.popover-top {\r\n      margin-bottom: 10px;\r\n    }\r\n    :host.bs3.popover.top>.arrow {\r\n      margin-left: -2px;\r\n    }\r\n    :host.bs3.popover.top {\r\n      margin-bottom: 10px;\r\n    }\r\n    :host.popover.bottom>.arrow {\r\n      margin-left: -4px;\r\n    }\r\n    :host.bs3.bs-popover-left {\r\n      margin-right: .5rem;\r\n    }\r\n    :host.bs3.bs-popover-right .arrow, :host.bs3.bs-popover-left .arrow{\r\n      margin: .3rem 0;\r\n    }\r\n    :host.arrow-left .arrow {\r\n        left: calc(50% - 10px);\r\n    }\r\n    `\r\n    ],\r\n    templateUrl: './popover-container.component.html'\r\n})\r\nexport class PopoverContainerComponent implements AfterViewInit, OnDestroy {\r\n    @ViewChild('innerEle', { read: ElementRef }) innerNode: ElementRef;\r\n    @Input() placement: string;\r\n    @Input() title: string;\r\n    containerClass: string;\r\n    private mouseenterEvent: any;\r\n    private mouseleaveEvent: any;\r\n    private mounseState = new Subject<boolean>();\r\n\r\n    get isBs3(): boolean {\r\n        return isBs3();\r\n    }\r\n\r\n    constructor(config: PopoverConfig, @Optional() private el: ElementRef) {\r\n        Object.assign(this, config);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.el) {\r\n            this.mouseenterEvent = this.changeMouseState.bind(this, true);\r\n            this.mouseleaveEvent = this.changeMouseState.bind(this, false);\r\n            this.el.nativeElement.addEventListener('mouseenter', this.mouseenterEvent);\r\n            this.el.nativeElement.addEventListener('mouseleave', this.mouseleaveEvent);\r\n        }\r\n    }\r\n    /**\r\n     * è·åé¼ æ ååç¶æ\r\n     */\r\n    getMouseState() {\r\n        return this.mounseState;\r\n    }\r\n    /**\r\n     * ç»å®çäºä»¶\r\n     * @param state \r\n     */\r\n    private changeMouseState(state) {\r\n        this.mounseState.next(state);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.mouseenterEvent) {\r\n            this.el.nativeElement.removeEventListener('mouseenter', this.mouseenterEvent);\r\n        }\r\n        if (this.mouseleaveEvent) {\r\n            this.el.nativeElement.removeEventListener('mouseleave', this.mouseleaveEvent);\r\n        }\r\n        this.mounseState.unsubscribe();\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    OnDestroy,\r\n    OnInit,\r\n    Output,\r\n    Renderer2,\r\n    TemplateRef,\r\n    ViewContainerRef,\r\n    Optional,\r\n    Injector,\r\n    NgZone\r\n} from '@angular/core';\r\nimport { PopoverConfig } from './popover.config';\r\nimport { ComponentLoader, ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { PopoverContainerComponent } from './popover-container.component';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\n\r\n/**\r\n * A lightweight, extensible directive for fancy popover creation.\r\n */\r\n@Directive({ selector: '[farrisPopover]', exportAs: 'bs-popover' })\r\nexport class PopoverDirective implements OnInit, OnDestroy {\r\n    /**\r\n     * Content to be displayed as popover.\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Input() popover: string | TemplateRef<any>;\r\n    /**\r\n     * Context to be used if popover is a template.\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Input() popoverContext: any;\r\n    /**\r\n     * Title of a popover.\r\n     */\r\n    @Input() popoverTitle: string;\r\n    /**\r\n     * Placement of a popover. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n     */\r\n    @Input() placement: 'top' | 'bottom' | 'left' | 'right' | 'auto';\r\n    /**\r\n     * Close popover on outside click\r\n     */\r\n    @Input() outsideClick = true;\r\n    /**\r\n     * Specifies events that should trigger. Supports a space separated list of\r\n     * event names.\r\n     */\r\n    @Input() triggers: string;\r\n    /**\r\n     * A selector specifying the element the popover should be appended to.\r\n     */\r\n    @Input() container = 'body';\r\n\r\n    /**\r\n     * Css class for popover container\r\n     */\r\n    @Input() containerClass = '';\r\n    // ææ¡ä»¶æ¿æ´»\r\n    @Input() popActive = true;\r\n\r\n    // æ¾ç¤ºå¨ä½\r\n    @Input() showAction = 'show';\r\n    /**\r\n     * Returns whether or not the popover is currently being shown\r\n     */\r\n    @Input()\r\n    get isOpen(): boolean {\r\n        return this._popover.isShown;\r\n    }\r\n\r\n    set isOpen(value: boolean) {\r\n        if (value) {\r\n            this[this.showAction]();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n    @Input() isFixed=false;\r\n\r\n    /**\r\n     * Emits an event when the popover is shown\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Output() onShown: EventEmitter<any>;\r\n    /**\r\n     * Emits an event when the popover is hidden\r\n     */\r\n    /* tslint:disable-next-line: no-any */\r\n    @Output() onHidden: EventEmitter<any>;\r\n\r\n    private _popover: ComponentLoader<PopoverContainerComponent>;\r\n    private _isInited = false;\r\n    private ngZone;\r\n    // æ è®°æ¯å¦è¿å¥æç¤ºæ¡å\r\n    private containerInOutState = false;\r\n    // æ è®°\r\n    private setTimeoutFlag;\r\n    \r\n    private commonUtils: CommonUtils;\r\n\r\n    private overlaySer: OverLayHiddenService;\r\n    private _bodyOverflow = '';\r\n    constructor(\r\n        _config: PopoverConfig,\r\n        private _elementRef: ElementRef,\r\n        private _renderer: Renderer2,\r\n        _viewContainerRef: ViewContainerRef,\r\n        cis: ComponentLoaderFactory,\r\n        private _positionService: PositioningService,\r\n        @Optional() private inject: Injector\r\n    ) {\r\n        if (this.inject) {\r\n            this.ngZone = this.inject.get(NgZone, null);\r\n            this.overlaySer = this.inject.get(OverLayHiddenService, null);\r\n            this.commonUtils = this.inject.get(CommonUtils, new CommonUtils());\r\n        }\r\n        this._popover = cis\r\n            .createLoader<PopoverContainerComponent>(_elementRef, _viewContainerRef, _renderer)\r\n            .provide({ provide: PopoverConfig, useValue: _config });\r\n        Object.assign(this, _config);\r\n        this.onShown = this._popover.onShown;\r\n        this.onHidden = this._popover.onHidden;\r\n\r\n        // fix: no focus on button on Mac OS #1795\r\n        if (typeof window !== 'undefined') {\r\n            _elementRef.nativeElement.addEventListener('click', function () {\r\n                try {\r\n                    _elementRef.nativeElement.focus();\r\n                } catch (err) {\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!this.overlaySer) {\r\n            this.overlaySer = new OverLayHiddenService();\r\n        }\r\n    }\r\n\r\n\r\n    private hasScrollbarY() {\r\n        if (!this._bodyOverflow) {\r\n            this._bodyOverflow = getComputedStyle(document.body).overflow;\r\n        }\r\n        return document.body.scrollHeight > window.innerHeight && this._bodyOverflow !== 'hidden';\r\n    }\r\n\r\n    /**\r\n     * Opens an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    show(): void {\r\n        if (!this.popActive || this._popover.isShown || !this.popover) {\r\n            return;\r\n        }\r\n\r\n        this._popover\r\n            .attach(PopoverContainerComponent)\r\n            .to(this.container)\r\n            .position({ attachment: this.placement })\r\n            .show({\r\n                showType: \"popover\",\r\n                content: this.popover,\r\n                context: this.popoverContext,\r\n                placement: this.placement,\r\n                title: this.popoverTitle,\r\n                containerClass: this.containerClass,\r\n            });\r\n\r\n            // if (!this.hasScrollbarY()) {\r\n            //     this._renderer.addClass(document.body, 'f-loading-dot-wrapper');\r\n            // }\r\n            /*è§£å³æå¥å°bodyéçå±çº§é®é¢*/\r\n            const zIndex = this.commonUtils.getFloatingLayerIndex();\r\n            this._popover.instance['el'].nativeElement.style.position = 'fixed';\r\n            this._popover.instance['el'].nativeElement.style.zIndex = zIndex;\r\n\r\n            this.overlaySer.registerMouseEvent(this._elementRef.nativeElement, (e: MouseEvent) => {\r\n                const target = e.target as any;\r\n                if (this._popover.instance['el'].nativeElement.contains(target) ||\r\n                    target.closest('.overlay-pane')) {\r\n                    return;\r\n                }\r\n                this.hide();\r\n            });\r\n        \r\n        // this.isOpen = true;\r\n        if (this.triggers == 'hover' && this._popover.instance && this._popover.instance.getMouseState) {\r\n            this._popover.instance.getMouseState().subscribe((state) => {\r\n                this.containerInOutState = state;\r\n                if (!state) {\r\n                    this.hide();\r\n                }\r\n            });\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    show2(): void {\r\n        if (!this.popActive || this._popover.isShown || !this.popover) {\r\n            return;\r\n        }\r\n\r\n        const targetRef = this._popover\r\n            .attach(PopoverContainerComponent)\r\n            .to(this.container)\r\n            .show({\r\n                content: this.popover,\r\n                context: this.popoverContext,\r\n                placement: this.placement,\r\n                title: this.popoverTitle,\r\n                containerClass: this.containerClass\r\n            });\r\n            this.overlaySer.registerMouseEvent(this._elementRef.nativeElement, () => {\r\n                this.hide();\r\n            });\r\n        //this.isOpen = true;\r\n        const {\r\n            height: hostHeight,\r\n            width: hostWidth,\r\n            top,\r\n            left\r\n        } = this._elementRef.nativeElement.getBoundingClientRect();\r\n        const { height: targetHeight, width: targetWidth } = targetRef.location.nativeElement.getBoundingClientRect();\r\n        let targetTop: string, targetLeft: string;\r\n        switch (this.placement) {\r\n            case 'bottom':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            case 'left':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            case 'right':\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n            default:\r\n                targetTop = `${top - targetHeight - 8}px`;\r\n                targetLeft = `${left + hostWidth / 2 - targetWidth / 2}px`;\r\n                this._renderer.addClass(targetRef.location.nativeElement, `arrow-${'left'}`)\r\n                break;\r\n        }\r\n        const zIndex = this.commonUtils.getFloatingLayerIndex();\r\n        const postion = { top: targetTop, left: targetLeft, zIndex };\r\n        this.setStyles(targetRef.location.nativeElement, postion);\r\n    }\r\n\r\n    setStyles(element, postion) {\r\n        const paramsArr = Object.keys(postion);\r\n        paramsArr &&\r\n            paramsArr.forEach(param => {\r\n                this._renderer.setStyle(element, param, postion[param]);\r\n            });\r\n    }\r\n\r\n\r\n    private _hide() {\r\n        this._popover.hide();\r\n        this.overlaySer.destory(this._elementRef.nativeElement);\r\n    }\r\n    /**\r\n     * Closes an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    hide(): void {\r\n        if (this.triggers == 'hover' && this.ngZone) {\r\n            if (this.isOpen) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    setTimeout(() => {\r\n                        if (!this.containerInOutState) {\r\n                            this._hide();\r\n                        }\r\n                    }, 300);\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.isOpen) {\r\n            this._hide();\r\n        }\r\n    }\r\n    /**\r\n     * Toggles an elementâs popover. This is considered a âmanualâ triggering of\r\n     * the popover.\r\n     */\r\n    toggle(): void {\r\n        if (this.isOpen) {\r\n            return this.hide();\r\n        }\r\n\r\n        this.show();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // fix: seems there are an issue with `routerLinkActive`\r\n        // which result in duplicated call ngOnInit without call to ngOnDestroy\r\n        // read more: https://github.com/valor-software/ngx-bootstrap/issues/1885\r\n        if (this._isInited) {\r\n            return;\r\n        }\r\n        this._isInited = true;\r\n        if(this.isFixed){\r\n            this._positionService.setOptions({\r\n                modifiers: {\r\n                    preventOverflow: {\r\n                        enabled: false\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.triggers == 'hover') {\r\n            this._popover.listen({\r\n                triggers: this.triggers,\r\n                outsideClick: this.outsideClick,\r\n                show: () => this[this.showAction](),\r\n                hide: () => this.hide()\r\n            });\r\n        } else {\r\n            this._popover.listen({\r\n                triggers: this.triggers,\r\n                outsideClick: this.outsideClick,\r\n                show: () => this[this.showAction]()\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._popover.dispose();\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\nimport { PopoverConfig } from './popover.config';\r\nimport { PopoverDirective } from './popover.directive';\r\nimport { PopoverContainerComponent } from './popover-container.component';\r\nimport { ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FarrisCommonModule\r\n  ],\r\n  declarations: [PopoverDirective, PopoverContainerComponent],\r\n  exports: [PopoverDirective],\r\n  entryComponents: [PopoverContainerComponent]\r\n})\r\nexport class PopoverModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: PopoverModule,\r\n      providers: [PopoverConfig, ComponentLoaderFactory, PositioningService]\r\n    };\r\n  }\r\n}\r\n"],"names":["Injectable","Subject","isBs3","Component","ChangeDetectionStrategy","ElementRef","Optional","ViewChild","Input","NgZone","OverLayHiddenService","CommonUtils","Directive","Renderer2","ViewContainerRef","ComponentLoaderFactory","PositioningService","Injector","Output","NgModule","CommonModule","FarrisCommonModule"],"mappings":"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"}
