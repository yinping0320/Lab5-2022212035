{"version":3,"file":"farris-appointment-calendar.js.map","sources":["ng://@farris/appointment-calendar/lib/appointment-calendar.service.ts","ng://@farris/appointment-calendar/lib/views/detail-view.component.ts","ng://@farris/appointment-calendar/lib/appointment-locales.ts","ng://@farris/appointment-calendar/lib/appointment-calendar.component.ts","ng://@farris/appointment-calendar/lib/views/base.view.component.ts","ng://@farris/appointment-calendar/lib/views/day-view.component.ts","ng://@farris/appointment-calendar/lib/views/week-view.component.ts","ng://@farris/appointment-calendar/lib/views/toolbar.component.ts","ng://@farris/appointment-calendar/lib/dblclick.directive.ts","ng://@farris/appointment-calendar/lib/appointment-calendar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class AppointmentCalendarService {\r\n\r\n  cardBtnClick$ = new Subject();\r\n\r\n  constructor() { }\r\n}\r\n","\r\nimport { Component, ElementRef, Injector, Input, OnInit, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { AppointmentCalendarService } from '../appointment-calendar.service';\r\nimport { DetailColumn, DetailToolbarButton } from '../models/calenday.types';\r\n\r\n@Component({\r\n    selector: 'reserve-detail',\r\n    template: `\r\n      <div class=\"reserve-detail-container\" style=\"position: fixed; z-index: 99\" [style.left.px]=\"position?.left\" [style.top.px]=\"position?.top\">\r\n        <div class=\"detail-header\" [ngClass]=\"getCustomCls()\" [ngStyle]=\"getCustomCls('styles')\">\r\n            <div class=\"detail-toolbar\" *ngIf=\"!toolbarButtons || !toolbarButtons.length\">\r\n                <span *ngIf=\"showEditButton\" class=\"f-icon f-icon f-icon-new-edit\" title=\"{{ 'appointment.detail.edit' | locale }}\" (click)=\"toolbarBtnClick($event, 'edit')\"></span>\r\n                <span *ngIf=\"showDeleteButton\" class=\"f-icon f-icon-trash\" title=\"{{ 'appointment.detail.del' | locale }}\" (click)=\"toolbarBtnClick($event, 'del')\"></span>\r\n                <span *ngIf=\"showCloseButton\" class=\"f-icon f-icon-close\" title=\"{{ 'appointment.detail.close' | locale }}\" (click)=\"toolbarBtnClick($event, 'close')\"></span>\r\n            </div>\r\n\r\n            <div class=\"detail-toolbar\" *ngIf=\"toolbarButtons && toolbarButtons.length\">\r\n                <span *ngFor=\"let btn of toolbarButtons\" class=\"{{ btn.icon }}\" title=\"{{ btn.title }}\" [style.display]=\"btn.visible ? '': 'none'\"\r\n                    (click)=\"!btn.disable && btn.handler && btn.handler({ item: data, $event: $event })\"></span>\r\n                <span *ngIf=\"showCloseButton\" class=\"f-icon f-icon-close\" title=\"{{ 'appointment.detail.close' | locale }}\" (click)=\"toolbarBtnClick($event, 'close')\"></span>\r\n            </div>\r\n\r\n            <div class=\"detail-title\">\r\n \r\n                <span class=\"detail-place\">\r\n                    {{rooNameField | getvalue: placeInfo}}\r\n                </span>\r\n                <div class=\"title-content\" style='word-break:break-all; font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"Helvetica Neue\",Helvetica,Arial,sans-serif' title=\"{{fieldConfigs.title}}\">\r\n                    {{subStrNum(fieldConfigs.title | getvalue: data, titleLength)}}\r\n                    <!-- <span class=\"detail-label\">ä¸é¡¹ä¼è®®</span> -->\r\n                    <ng-container [ngTemplateOutlet]=\"badgeTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: data}, item: data }\"></ng-container>\r\n                </div>\r\n                <div class=\"detail-timer\">\r\n                    {{ fieldConfigs.startDate| getvalue: data | dateformat: ('appointment.detail.dateFormat'|locale) }} {{ fieldConfigs.startDate| getvalue: data | dateformat: 'HH:mm' }} \r\n                    &nbsp;-&nbsp;\r\n                    {{ fieldConfigs.endDate | getvalue: data | dateformat: ('appointment.detail.dateFormat'|locale) }} {{ fieldConfigs.endDate | getvalue: data | dateformat: 'HH:mm' }} \r\n                    <!-- 9æ4æ¥ï¼ä»å¤©ï¼08:00 â 9æ7æ¥ï¼å¨ä¸ï¼17:30 -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"detail-info-content  win11Scroll nobtn\" [ngStyle]=\"getCustomCls('detail')\">\r\n            <ng-container [ngTemplateOutlet]=\"detailTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: data}, item: data }\"></ng-container>\r\n            <ul *ngIf=\"!detailTemplate\">\r\n                <li *ngFor=\"let col of columns\">\r\n                    <ng-container *ngIf=\"!col.template\">\r\n                        <span class=\"detail-subtitle\" [style.width.px]=\"detailColumnWidth\" [style.minWidth.px]=\"detailColumnWidth\" [title]=\"col.title\">{{col.title}}</span> \r\n                        <span class=\"detail-content  d-flex flex-row\" *ngIf=\"!col.formatter\">\r\n                            <span class=\"colon\"></span>    \r\n                            <span class=\"text\">{{ col.field | getvalue: data: true}}</span>\r\n                        </span>\r\n                        <span class=\"detail-content  d-flex flex-row\" *ngIf=\"col.formatter\">\r\n                            <span class=\"colon\"></span>\r\n                            <span class=\"text\" [innerHtml]=\" col.field | getvalue: data | columnformatter: col : data | safe: 'html'\"></span>\r\n                        </span>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"col.template\"  [ngTemplateOutlet]=\"col.template\" [ngTemplateOutletContext]=\"{ $implicit: {data: data, field: col.field, label: col.title}, item: data }\">\r\n                    </ng-container>\r\n                </li>\r\n                \r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    `,\r\n    styles: [\r\n        `\r\n            .detail-subtitle {\r\n               text-align: justify;text-align-last: justify;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;\r\n            }\r\n            .detail-content>.colon:before {\r\n                content: 'ï¼'\r\n            }\r\n\r\n            .detail-content>.text {\r\n                word-break: break-all;\r\n            }\r\n        `\r\n    ]\r\n})\r\n\r\nexport class ReserveDetailComponent implements OnInit {\r\n    /** é¢å®æ°æ® */\r\n    @Input() data: any;\r\n    /** å¼¹åºé¢æ¿ä½ç½® */\r\n    @Input() position: { left: number, top: number } = null;\r\n    /** é¢å®è¯¦æå­æ®µ */\r\n    @Input() columns: Array<DetailColumn>\r\n    /** é¢å®è¯¦ææ¨¡æ¿ */\r\n    @Input() detailTemplate: TemplateRef<any>;\r\n    /** å¾½ç« æ¢°æ¿ */\r\n    @Input() badgeTemplate: TemplateRef<any>;\r\n    /** é¢å®ä¿¡æ¯å­æ®µéç½® */\r\n    @Input() fieldConfigs = null;\r\n    /** é¢å®å°ç¹ä¿¡æ¯ */\r\n    @Input() placeInfo: any;\r\n    /** é¢å®å°ç¹å­æ®µéç½® */\r\n    @Input() placeFieldConfigs = null;\r\n\r\n    @Input() customCls: { [className:string]: any } = null;\r\n\r\n    @Input() showEditButton = true;\r\n    @Input() showDeleteButton = true;\r\n    @Input() showCloseButton = true;\r\n    @Input() toolbarButtons: Array<DetailToolbarButton>;\r\n\r\n    @Input() detailColumnWidth = 56;\r\n\r\n    @Input() titleLength = 52;\r\n\r\n    rooNameField = 'name';\r\n\r\n    constructor(private injector: Injector, private ser: AppointmentCalendarService, public el: ElementRef) { }\r\n\r\n    ngOnInit() {\r\n        this.rooNameField = this.placeFieldConfigs.fullName || this.placeFieldConfigs.name;\r\n    }\r\n\r\n\r\n    toolbarBtnClick($event: MouseEvent, t) {\r\n        $event.stopPropagation();\r\n        this.ser.cardBtnClick$.next({ $event, action: t, item: this.data });\r\n    }\r\n\r\n    getCustomCls(typ: 'cls' | 'styles' | 'detail' = 'cls') {\r\n        let result = null;\r\n        if (this.customCls) {\r\n            if (!this.customCls['cls'] && !this.customCls['cls'] && typ == 'cls') {\r\n                result = this.customCls;\r\n            } else {\r\n                result = this.customCls[typ] || {};\r\n            }\r\n        }\r\n\r\n        // if (typ === 'styles' || typ === 'detail') {\r\n        //     Object.keys(result).forEach((n: any) => {\r\n        //         if (result[n].indexOf('important') === -1) {\r\n        //             result[n] = result[n] +' !important' ;\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        return result;\r\n    }\r\n    getLength(str){\r\n        let strLength=0; // è®°å½strçæ»é¿åº¦\r\n        const Len = str.length;\r\n        for(let i=0;i<Len;i++){\r\n            var charCode = str.charCodeAt(i);// ä½¿ç¨charCodeAtè¿ååä¸ªå­ç¬¦çUnicodeç¼ç \r\n            if(charCode>=0 && charCode<=128){\r\n                strLength++; //è±æå­ç¬¦å 1\r\n            }else {\r\n                strLength= strLength+2;//ä¸­æå­ç¬¦å 2\r\n            }\r\n        }\r\n        return strLength;\r\n    }\r\n\r\n    subStrNum(str,len) {\r\n        const strLen = str.length;\r\n        let strCut = '';\r\n        let strLength =0;\r\n        for(let i=0;i<strLen;i++){\r\n            var charStr = str.charAt(i); //ä½¿ç¨charAtè·ååä¸ªå­ç¬¦ï¼\r\n            strLength++\r\n            if(encodeURI(charStr).length>4){ //ä½¿ç¨encodeURIè·åç¼ç é¿åº¦\r\n                strLength++;\r\n            }\r\n            strCut = strCut.concat(charStr);//åä¸ªå­ç¬¦è¿è¡åå¹¶\r\n            if(strLength >= len){\r\n                strCut = strCut.concat('...') //å¤§äºæå®é¿åº¦ååå¹¶'...'å¹¶è¿åæ­¤å­ç¬¦ä¸²\r\n                return strCut;\r\n            }\r\n        }\r\n        if(strLength<len){\r\n            return str;\r\n        }\r\n    }\r\n}","export const APPOINTMENT_CALENDAR_LOCALES = {\r\n    'en': {\r\n        appointment: {\r\n            today: 'Today',\r\n            thisWeek: 'This week',\r\n            day: 'Day',\r\n            week: 'Week',\r\n            prevDay: 'Prev day',\r\n            prevWeek: 'Prev week',\r\n            nextDay: 'Next day',\r\n            nextWeek: 'Next week',\r\n            dateFormat: 'yyyy-MM-dd',\r\n            datePlace: 'Pleasy select a date.',\r\n            weeks: { ä¸: 'Mon', äº: 'Tue', ä¸: 'Wed', å: 'Thu', äº: 'Fri', å­: 'Sat',æ¥: 'Sun'},\r\n            detail: {\r\n                edit: 'Edit',\r\n                del: 'Delete',\r\n                close: 'Close',\r\n                dateFormat: 'MM-dd'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHS': {\r\n        appointment: {\r\n            today: 'ä»å¤©',\r\n            thisWeek: 'æ¬å¨',\r\n            day: 'æ¥',\r\n            week: 'å¨',\r\n            prevDay: 'åä¸å¤©',\r\n            prevWeek: 'åä¸å¨',\r\n            nextDay: 'ä¸ä¸å¤©',\r\n            nextWeek: 'ä¸ä¸å¨',\r\n            dateFormat: 'yyyyå¹´MMæddæ¥',\r\n            datePlace: 'è¯·éæ©',\r\n            weeks: { ä¸: 'å¨ä¸', äº: 'å¨äº', ä¸: 'å¨ä¸', å: 'å¨å', äº: 'å¨äº', å­: 'å¨å­',æ¥: 'å¨æ¥' },\r\n            detail: {\r\n                edit: 'ç¼è¾',\r\n                del: 'å é¤',\r\n                close: 'å³é­',\r\n                dateFormat: 'MMæddæ¥'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHT': {\r\n        appointment: {\r\n            today: 'ä»å¤©',\r\n            thisWeek: 'æ¬å¨',\r\n            day: 'æ¥',\r\n            week: 'å¨',\r\n            prevDay: 'åä¸å¤©',\r\n            prevWeek: 'åä¸å¨',\r\n            nextDay: 'ä¸ä¸å¤©',\r\n            nextWeek: 'ä¸ä¸å¨',\r\n            dateFormat: 'yyyyå¹´MMæddæ¥',\r\n            datePlace: 'è«é¸æ',\r\n            weeks: {  ä¸: 'å¨ä¸', äº: 'å¨äº', ä¸: 'å¨ä¸', å: 'å¨å', äº: 'å¨äº', å­: 'å¨å­', æ¥: 'å¨æ¥' },\r\n            detail: {\r\n                edit: 'ç·¨è¼¯',\r\n                del: 'åªé¤',\r\n                close: 'éé',\r\n                dateFormat: 'MMæddæ¥'\r\n            }\r\n        }\r\n    }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChange, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation } from \"@angular/core\";\r\nimport { DateTimeHelperService } from \"@farris/ui-common/date\";\r\nimport { differenceInMinutes, isSameDay } from \"date-fns\";\r\nimport { CalendarViewType, AppointmentData, ViewTypeChangedParam, WeekDayItem, DetailColumn, DetailToolbarButton } from \"./models/calenday.types\";\r\nimport { AppointmentCalendarService } from \"./appointment-calendar.service\";\r\nimport { CommonUtils } from \"@farris/ui-common\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ReserveDetailComponent } from \"./views/detail-view.component\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport { APPOINTMENT_CALENDAR_LOCALES } from \"./appointment-locales\";\r\nimport { flatten } from \"lodash-es\";\r\n\r\n\r\n@Component({\r\n    selector: \"farris-appointment-calendar\",\r\n    templateUrl: './appointment-calendar.component.html',\r\n    // styleUrls: ['./appointment-calendar.component.css'],\r\n    providers: [\r\n        AppointmentCalendarService\r\n    ],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AppointmentCalendarComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges {\r\n\r\n    /** é¢å®æ°æ® */\r\n    @Input() reserveData = [];\r\n    /** æ¿é´åè¡¨æ°æ® */\r\n    @Input() placeItems = [];\r\n\r\n    /** æ¿é´æ è¯å­æ®µ é»è®¤ id */\r\n    @Input() placeIdField = 'id';\r\n    /** æ¿é´åç§°å­æ®µ */\r\n    @Input() placeNameField = 'name';\r\n    /** é¢å®å°ç¹å¨åç§° */\r\n    @Input() placeFullNameField = '';\r\n\r\n    /** é¢å®æ¶é´å­æ®µ */\r\n    @Input() reserveInfoFields = {\r\n        /** é¢è®¢æ è¯å­æ®µ */\r\n        idField: 'id',\r\n        /** å¼å§æ¶é´å­æ®µ */\r\n        startDate: 'start',\r\n        /** ç»ææ¶é´å­æ®µ */\r\n        endDate: 'end',\r\n        /** å¯¹åºæ¿é´ID å­æ®µ */\r\n        placeid: 'roomid',\r\n        /** é¢è®¢ä¸»é¢åç§°å­æ®µ */\r\n        title: 'title'\r\n    }\r\n\r\n    /** æ¿é´åç§°æ ¼å¼å */\r\n    @Input() roomNameFormatter: (item) => string;\r\n    /** æ¿é´åç§°èªå®ä¹æ¨¡æ¿ */\r\n    @Input() placeNameTemplate: TemplateRef<any>;\r\n    /** é¢å®åå®¹æ¨¡æ¿ */\r\n    @Input() contentTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çæ¨¡æ¿ */\r\n    @Input() detailTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çå¾½ç« æ¨¡æ¿ */\r\n    @Input() detailBadgeTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çèªå®ä¹css ç±» */\r\n    @Input() detailCls:  ({item}) => { cls: { [className: string]: boolean}, styles: { [key: string]: any }};\r\n    /** æ¥è§å¾èªå®ä¹æ ·å¼ç±» */\r\n    @Input() dayViewCls: ({item}) => { cls: { [className: string]: boolean}, styles: { [key: string]: any }};\r\n\r\n    @Input() placeTitle = 'åç§°';\r\n\r\n    /** å¤©è§å¾è¡é«ï¼ é»è®¤ 62px */\r\n    @Input() rowHeight = 62;\r\n    /** å¨è§å¾è¡é«ï¼é»è®¤ 85px */\r\n    @Input() weekRowHeight = 85;\r\n    /** å¨è§å¾ååæ ¼å®½åº¦ï¼é»è®¤ 150px */\r\n    @Input() weekCellWidth = 150;\r\n    /** æ¿é´åå®½åº¦ï¼é»è®¤ 300px */\r\n    @Input() placeNameWidth = 300;\r\n    /** é»è®¤è§å¾ day æ¥ï¼ week å¨ã é»è®¤ day */\r\n    @Input() viewType: CalendarViewType = 'day';\r\n    /** æ¥è§å¾ä¸å¼å§æ¶é´ */\r\n    @Input() startTime = 7;\r\n\r\n    /** éä¸­é¢è®¢ä¿¡æ¯ID */\r\n    @Input() selectedId = '';\r\n    /** è¯¦æå¡çåä¿¡æ¯ */\r\n    @Input() detailColumns: Array<DetailColumn>;\r\n    /** è¯¦æå¡çæ¾ç¤ºç¼è¾æé® */\r\n    @Input() showEditButton = true;\r\n    /** è¯¦æå¡çæ¾ç¤ºå é¤æé® */\r\n    @Input() showDeleteButton = true;\r\n    @Input() showCloseButton = true;\r\n    /** è¯¦æå¡çæé®éç½® */\r\n    @Input() detailToolbars:Array<DetailToolbarButton>;\r\n    /** è¯¦æå¡çæ é¢åå®½åº¦ï¼é»è®¤ 56px æ¾ç¤ºä¸º4ä¸ªå­ */\r\n    @Input() detailColumnWidth = 56;\r\n\r\n    /** åå»äºä»¶ */\r\n    @Output() itemDblClick = new EventEmitter();\r\n\r\n    /** æ¥è§å¾ï¼é¼ æ æ»è¿ç©ºç½ååæ ¼æ¾ç¤ºææ¬ */\r\n    @Input() reservationTitle = 'é¢è®¢';\r\n\r\n    /** è¿æ»¤äºä»¶ */\r\n    @Output() filterChange = new EventEmitter();\r\n    /** éä¸­äºä»¶ */\r\n    @Output() selectChange = new EventEmitter();\r\n    /** å¡çè¯¦æç¼è¾äºä»¶ */\r\n    @Output() editHandler = new EventEmitter();\r\n    /** å¡çè¯¦æå é¤äºä»¶ */\r\n    @Output() removeHandler = new EventEmitter();\r\n    /** æ¸é¤éä¸­é¡¹ */\r\n    @Output() clearSelected = new EventEmitter();\r\n    /** æ¥è§å¾ååæ ¼ç¹å»äºä»¶ */\r\n    @Output() reservation = new EventEmitter();\r\n    \r\n    @ViewChild('detailRef') detailRef: ReserveDetailComponent;\r\n    \r\n    weekDays: Array<WeekDayItem> = [];\r\n    groupData: AppointmentData[] = [];\r\n\r\n    private currentDateRangeStr = '';\r\n    private currentDateStr = '';\r\n\r\n    currentSelectItem: { room: any, data: any } = null;\r\n    position = null;\r\n    showDetail = false;\r\n    detailCustomCls: {[clsName: string]: any} = null;\r\n\r\n    _CLICK_DELAY_ = 180;\r\n    // æ¡æ¶å¤´é«é«åº¦ï¼\r\n    _frameHeaderHeight = 0;\r\n\r\n    minWeekViewWidth = 0;\r\n\r\n    private _currentScrollPos: { [viewType: string]: { x: number, y: number } } = { 'day': {x: null,y: 0}, 'week': {x: null,y: 0}};\r\n    \r\n    rowWidth = 2450;\r\n\r\n    private cardBtnClickSub: Subscription;\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef, private ngZone: NgZone, private render: Renderer2, public roomSer: AppointmentCalendarService,\r\n            private dateHlp: DateTimeHelperService, private elRef: ElementRef, public utils: CommonUtils, private localeSer: LocaleService) {\r\n        this.cardBtnClickSub = this.roomSer.cardBtnClick$.subscribe((e: any) => {\r\n            this.detailEventHandlers(e);\r\n        });\r\n\r\n        this.localeSer.setLocaleData(APPOINTMENT_CALENDAR_LOCALES);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.groupData = this.mergeDate();\r\n\r\n        this.showEditButton = !!this.editHandler.observers.length;\r\n        this.showDeleteButton = !!this.removeHandler.observers.length;\r\n\r\n        this.minWeekViewWidth = (this.weekCellWidth || 150) * 7 + this.placeNameWidth;\r\n\r\n        this.rowWidth += this.placeNameWidth;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.reserveData && !changes.reserveData.isFirstChange()) {\r\n            this.dataChanged();\r\n        }\r\n\r\n        if (changes.placeItems && !changes.placeItems.isFirstChange()) {\r\n            this.dataChanged();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if ( this.cardBtnClickSub ) {\r\n            this.cardBtnClickSub.unsubscribe();\r\n            this.cardBtnClickSub = null;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n    }\r\n\r\n    loadReserveData(data: []) {\r\n        this.reserveData = data;\r\n        this.dataChanged();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    loadPlaceData(data: []) {\r\n        this.placeItems = data;\r\n        this.dataChanged();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    private dataChanged() {\r\n        this.groupData = this.mergeDate();\r\n        if (this['CALENDAR_SCROLL_POSITION']) {\r\n            clearTimeout(this['CALENDAR_SCROLL_POSITION']);\r\n        }\r\n        this['CALENDAR_SCROLL_POSITION'] = setTimeout(() => {\r\n            const roomBodyEl = this.elRef.nativeElement.querySelector('.body');\r\n            const { x, y } = this._currentScrollPos[this.viewType] || { x: null, y: null};\r\n            if (roomBodyEl) {\r\n                let left = x;\r\n                if (this.viewType === 'day' && x === null) {\r\n                    left = this.startTime * 100;\r\n                }\r\n                \r\n                roomBodyEl.scrollLeft = left;\r\n                roomBodyEl.scrollTop = y || 0;\r\n                roomBodyEl.scrollTo(left, y || 0)\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    onViewTypeChanged($event: ViewTypeChangedParam) {\r\n        const { viewType, weekDays, dateValue, place } = $event;\r\n        this.viewType = viewType;\r\n        this.weekDays = weekDays;\r\n\r\n        if (this.viewType === 'day') {\r\n            this.currentDateStr = dateValue;\r\n        } else {\r\n            this.currentDateRangeStr = dateValue;\r\n        }\r\n\r\n        this.dataChanged();\r\n\r\n        this.filterChange.emit( { viewType, dateValue, place });\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onPlaceSelected($event: ViewTypeChangedParam) {\r\n        // TODO: æ¿é´åæ¢åï¼å®¢æ·ç«¯è¿æ»¤æ¿é´åè¡¨\r\n\r\n    }\r\n\r\n\r\n    private getUsedCells(reserves) {\r\n        if (reserves && reserves.length) {\r\n\r\n            const startField = this.reserveInfoFields.startDate;\r\n            const endField = this.reserveInfoFields.endDate;\r\n\r\n            const cells = reserves.map(n => {\r\n                const startValue = this.utils.getValue(startField, n.data);\r\n                const _startTimes = this.getTimes(startValue);\r\n\r\n                const endValue = this.utils.getValue(endField, n.data);\r\n                const _endTimes = this.getTimes(endValue);\r\n\r\n                const beginIndex = _startTimes.hour;\r\n                let endIndex = _endTimes.hour - 1;\r\n                // if (_endTimes.minute > 0) {\r\n                //     endIndex++;\r\n                // } else {\r\n                //     endIndex--;\r\n                // }\r\n\r\n                var c = [];\r\n                for(let i=beginIndex - 1; i< endIndex; i++) {\r\n                    c.push(i+1)\r\n                }\r\n\r\n                return c;\r\n            });\r\n\r\n            return flatten(cells);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private mergeDate(): AppointmentData[] {\r\n        if (this.placeItems && this.placeItems.length) {\r\n            if (this.viewType === 'day') {\r\n                return this.placeItems.map(n => {\r\n                    const reserves =  this.reserveData.filter(\r\n                        d => this.utils.getValue(this.reserveInfoFields.placeid,d) === this.utils.getValue(this.placeIdField, n) && \r\n                        isSameDay(new Date(this.utils.getValue(this.reserveInfoFields.startDate, d)), new Date(this.currentDateStr))\r\n                    ).map(r => {\r\n                        return {\r\n                            data: r,\r\n                            id: r[this.reserveInfoFields.idField],\r\n                            position: this.getReservePositionInfo(r),\r\n                        }\r\n                    });\r\n                    return {\r\n                        id: n[this.placeIdField],\r\n                        data: n,\r\n                        reserves,\r\n                        disableCells: this.getUsedCells(reserves)\r\n                    };\r\n                });\r\n            } else {\r\n                return this.placeItems.map(n => {\r\n                    return {\r\n                        id: n[this.placeIdField],\r\n                        data: n,\r\n                        reserves: this.weekDays.map((weekday: WeekDayItem) => {\r\n                            return {\r\n                                date: weekday,\r\n                                items: this.reserveData.filter(d => this.utils.getValue(\r\n                                    this.reserveInfoFields.placeid,d) === this.utils.getValue(this.placeIdField, n)  && \r\n                                    isSameDay(new Date(this.utils.getValue(this.reserveInfoFields.startDate, d)), weekday.date)\r\n                                ).map(r => {\r\n                                    return {\r\n                                        data: r,\r\n                                        id: r[this.reserveInfoFields.idField],\r\n                                    }\r\n                                }).sort((a, b) => {\r\n                                    const r = this.dateHlp.differenceInMinutes(new Date(this.utils.getValue(this.reserveInfoFields.startDate, a.data)), new Date(this.utils.getValue(this.reserveInfoFields.endDate, b.data)))\r\n                                    return r > 0 ? 1: r< 0? -1: 0;\r\n                                })\r\n                            }\r\n                        })\r\n                    };\r\n                });\r\n            }\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    getTimes(dateStr: string) {\r\n        if (dateStr) {\r\n            const _startDate = this.dateHlp.formatTo(dateStr, 'yyyy-MM-dd HH:mm:ss');\r\n            if (_startDate) {\r\n                const startDate = new Date(_startDate);\r\n                const hour = startDate.getHours();\r\n                const minute = startDate.getMinutes();\r\n\r\n                return {\r\n                    hour, minute, date: new Date(_startDate.split(' ')[0])\r\n                };\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private getReservePositionInfo(reserveItem: any) {\r\n        const startField = this.reserveInfoFields.startDate;\r\n        const endField = this.reserveInfoFields.endDate;\r\n        let left = 0;\r\n        let width = 0;\r\n\r\n        const startDateStr = reserveItem[startField];\r\n        const endDateStr =  reserveItem[endField];\r\n\r\n        if (startDateStr) {\r\n            const _startTimes = this.getTimes(startDateStr);\r\n            if (_startTimes) {\r\n                const {hour, minute} = _startTimes;\r\n\r\n                left = (hour) * 100;\r\n                if (minute) {\r\n                    left += minute / 60 * 100;\r\n                }\r\n\r\n                if (endDateStr) {\r\n                    \r\n                    const minutes = differenceInMinutes(new Date(endDateStr), new Date(startDateStr));\r\n                    width = minutes / 60 * 100;\r\n                }\r\n            }\r\n        }\r\n\r\n        return {left, width};\r\n    }\r\n\r\n    onSelectChange($event) {\r\n        this.selectedId = $event.item.id;\r\n        this.currentSelectItem = {room: $event.room, data: $event.item.data};\r\n\r\n        let tar = null;\r\n        if (this.viewType === 'week') {\r\n            tar = $event.$event.target.closest('li')\r\n        } else {\r\n            tar = $event.$event.target.closest('.item-content')\r\n        }\r\n        this.getPositionForDetailPanel(tar);\r\n\r\n        if (this.detailCls) {\r\n            this.detailCustomCls = this.detailCls($event.item);\r\n        }\r\n\r\n        this.showDetail = true;\r\n\r\n        this.selectChange.emit($event);\r\n    }\r\n\r\n    onItemDblClick($event) {\r\n        this.selectedId = $event.item.id;\r\n        this.currentSelectItem = {room: $event.room, data: $event.item.data};\r\n        this.itemDblClick.emit($event);\r\n    }\r\n\r\n    selectItem(reserveId: any) {\r\n        this.selectedId = reserveId;\r\n        this.cd.detectChanges();\r\n        if (this.selectedId === null || this.selectedId === undefined || this.selectedId === '') {\r\n            this.clearSelect();\r\n        }\r\n    }\r\n\r\n    clearSelect() {\r\n        this.selectedId = null;\r\n        this.clearSelected.emit({ins: this});\r\n    }\r\n\r\n    private getFrameheaderHeight() {\r\n\r\n        if(this._frameHeaderHeight) {\r\n            return this._frameHeaderHeight;\r\n        }\r\n\r\n        const tabset: any = document.querySelector('.framework-tab-origin.gw-container-tabset.tab-container');\r\n        let h = 0;\r\n        if (tabset) {\r\n            h += tabset.offsetHeight;\r\n        }\r\n\r\n        const frameHeader: any = document.querySelector('.gw-header--wrapper.framework-tool-origin');\r\n        if (frameHeader) {\r\n            h += frameHeader.offsetHeight;\r\n        }\r\n\r\n        this._frameHeaderHeight = h;\r\n        return this._frameHeaderHeight;\r\n    }\r\n\r\n    private getPositionForDetailPanel(target: HTMLElement) {\r\n        const { left, top, right, bottom, width, height } = target.getBoundingClientRect();\r\n        const panelSize = { width: 368, height: 436 };\r\n\r\n        let _left = left;\r\n        let _top = top;\r\n\r\n        const _right = window.innerWidth - right;\r\n        const _bottom = window.innerHeight - bottom;\r\n\r\n\r\n        if (_left > _right) {\r\n            if ( _left > panelSize.width) {\r\n                _left = _left - panelSize.width;\r\n            } else {\r\n                if (window.innerWidth - left > panelSize.width) {\r\n                    _left = left;\r\n                } else {\r\n                    if (right > panelSize.width) {\r\n                        _left = right - panelSize.width;\r\n                    } else {\r\n                        _left = (window.innerWidth - panelSize.width) / 2;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (_right > panelSize.width) {\r\n                _left = right;\r\n            } else {\r\n                if(right > panelSize.width) {\r\n                    _left = left;\r\n                } else {\r\n                    _left = (window.innerWidth - panelSize.width) / 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (_top > _bottom) {\r\n            if (_top > panelSize.height) {\r\n                if (left > panelSize.width || _right > panelSize.width) {\r\n                    if (window.innerHeight - _top < height + 40) {\r\n                        _top = window.innerHeight - panelSize.height - 20;\r\n                    } else {\r\n                        _top = top - panelSize.height + height + 40;\r\n                        if (_top < this.getFrameheaderHeight()) {\r\n                            _top = this.getFrameheaderHeight() + 10;\r\n                        }\r\n                    }\r\n                } else {\r\n                    _top = top - panelSize.height;\r\n                }\r\n            } else {\r\n                _top = 10 + this.getFrameheaderHeight();\r\n            }\r\n        } else {\r\n            if (_bottom > panelSize.height) {\r\n                if ( _right > panelSize.width || left > panelSize.width ) {\r\n                    _top = bottom - height - 40;\r\n                } else {\r\n                    _top = bottom;\r\n                }\r\n            } else {\r\n                _top = 10 + this.getFrameheaderHeight();\r\n            }\r\n        }\r\n\r\n        this.position = { left: _left, top: _top};\r\n    }\r\n\r\n    closeDetailPanel() {\r\n        this.roomSer.cardBtnClick$.next({action: 'close'});\r\n    }\r\n    \r\n    onAddNew($event) {\r\n        this.reservation.emit($event);\r\n    }\r\n\r\n    onScrollChange($event, typ) {\r\n        this._currentScrollPos[this.viewType] = {...$event, type: typ};\r\n    }\r\n\r\n    private detailEventHandlers(e: any) {\r\n        const { action, item, $event } = e;\r\n        let p = null;\r\n        if (item) {\r\n            p = { item: { data: item , id: this.utils.getValue(this.reserveInfoFields.idField, item) }};\r\n        }\r\n        switch(action) {\r\n            case 'edit':\r\n                this.editHandler.emit(p);\r\n                break;\r\n            case 'del':\r\n                this.removeHandler.emit(p);\r\n                break;\r\n            case 'close':\r\n                this.showDetail = false;\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\n\r\n@Component({\r\n    selector: 'appointment-base-view',\r\n    template: ''\r\n})\r\n\r\nexport class BaseViewComponent implements OnChanges, OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() data: [];\r\n    @Input() selectId = '';\r\n\r\n    @Output() itemClick = new EventEmitter();\r\n    @Output() itemDblClick = new EventEmitter();\r\n    \r\n\r\n    @ViewChild('header') headerRef: ElementRef<HTMLElement>;\r\n    @ViewChild('body') bodyRef: ElementRef<HTMLElement>;\r\n\r\n    @Output() scrollChange = new EventEmitter();\r\n\r\n    activeItem = null;\r\n\r\n    private overlaySer: OverLayHiddenService;\r\n    protected utils: CommonUtils;\r\n\r\n    private currentMousePointX = 0;\r\n    private currentMousePointY = 0;\r\n    private isClick = true;\r\n\r\n    constructor(protected injector: Injector, protected ngzone: NgZone, public calendarRef: AppointmentCalendarComponent) {\r\n        this.overlaySer = new OverLayHiddenService();\r\n        this.utils = this.injector.get(CommonUtils);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.setActiveItem();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            this.bodyRef.nativeElement.addEventListener('scroll', (e) => {\r\n                const x = this.bodyRef.nativeElement.scrollLeft;\r\n                const y = this.bodyRef.nativeElement.scrollTop;\r\n                this.headerRef.nativeElement.scrollLeft = this.bodyRef.nativeElement.scrollLeft;\r\n                this.calendarRef.closeDetailPanel();\r\n\r\n                this.scrollChange.emit({ x, y });\r\n            });\r\n        });\r\n\r\n        if (this.overlaySer) {\r\n            this.overlaySer.registerMouseEvent(this.bodyRef.nativeElement, (e) => {\r\n                if (this.calendarRef.detailRef) {\r\n\r\n                    if (this.calendarRef.detailRef.el.nativeElement.contains(e.target)) {\r\n                        return;\r\n                    }\r\n\r\n                    if ( e.type !== 'mousewheel' && this.isClick) {\r\n                        if (this.calendarRef.viewType === 'week') {\r\n                            if (e.target.closest('li') && e.target.closest('li').classList.contains('week-day-subject') ) {\r\n                                return;\r\n                            }\r\n                        }\r\n    \r\n                        if (this.calendarRef.viewType === 'day') {\r\n                            if ( e.target.closest('div.item-content')) {\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n\r\n                    if (e.target.classList.contains('farris-modal') || e.target.closest('.farris-modal') ) {\r\n                        if (e.target.closest('farris-messager') && e.target.nodeName !== 'BUTTON') {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    this.calendarRef.closeDetailPanel();\r\n                }\r\n            }, { mouseUp: true });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.overlaySer) {\r\n            this.overlaySer.destory(this.bodyRef.nativeElement);\r\n            this.overlaySer = null;\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.selectId && !changes.selectId.isFirstChange()) {\r\n            this.setActiveItem();\r\n        }\r\n\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.setActiveItem();\r\n        }\r\n    }\r\n\r\n    setActiveItem(id?: any) {}\r\n\r\n    getRoomData(data) {\r\n        const roomid = this.utils.getValue(this.calendarRef.reserveInfoFields.placeid, data);\r\n        const room: any = this.data.find((n: any) => n.id === roomid);\r\n        if (room){\r\n            return room.data;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    onSubjectClick($event, item) {\r\n        $event.stopPropagation();\r\n        if (!this.isClick) {\r\n            this.calendarRef.closeDetailPanel();\r\n            return;\r\n        }\r\n        if (this.calendarRef.viewType === 'week') {\r\n            $event.target.scrollIntoViewIfNeeded();\r\n        }\r\n\r\n        if (this['clickTimer']) {\r\n            clearTimeout(this['clickTimer']);\r\n        }\r\n        this['clickTimer'] = setTimeout(() => {\r\n            this.activeItem = item;\r\n            const room = this.getRoomData(item.data);\r\n            this.itemClick.emit({ item, $event, room });\r\n        }, this.calendarRef._CLICK_DELAY_);\r\n        \r\n    }\r\n\r\n    ondblClick($event: {item: any, $event: any}) {\r\n        if (this['clickTimer']) {\r\n            clearTimeout(this['clickTimer'])\r\n        }\r\n        this.activeItem = $event.item;\r\n        const room = this.getRoomData($event.item.data);\r\n        $event['room'] = room;\r\n        this.itemDblClick.emit($event);\r\n    }\r\n\r\n    onMouseDown($event) {\r\n        this.currentMousePointX = Math.floor($event.screenX);\r\n        this.currentMousePointY = Math.floor($event.screenY);\r\n    }\r\n\r\n    onMouseUp($event) {\r\n        this.isClick = this.currentMousePointX == Math.floor($event.screenX) && this.currentMousePointY == Math.floor($event.screenY);\r\n    }\r\n}","import {\r\n    Component,\r\n    EventEmitter,\r\n    Injector,\r\n    Input,\r\n    NgZone,\r\n    Output,\r\n    Renderer2,\r\n    ViewEncapsulation,\r\n} from \"@angular/core\";\r\nimport { AppointmentCalendarComponent } from \"../appointment-calendar.component\";\r\nimport { flatten } from \"lodash-es\";\r\nimport { BaseViewComponent } from \"./base.view.component\";\r\n@Component({\r\n    selector: \"day-view\",\r\n    templateUrl: \"day-view.component.html\",\r\n    encapsulation: ViewEncapsulation.None,\r\n    styles:[\r\n        `\r\n        .rtv-container .main .room-row .time-cell .addnew{\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid #2a87ff;\r\n  background: #edf5ff;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: all 0.12s ease;\r\n  color: #045dd3;\r\n  font-size: 14px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.rtv-container .main .room-row .time-cell:hover>.addnew {\r\n  opacity: 1;\r\n}\r\n\r\n        `\r\n    ]\r\n})\r\nexport class DayViewComponent extends BaseViewComponent {\r\n    @Input() customCls: ({ item }) => { [cls: string]: boolean };\r\n    @Input() reservationTitle = 'é¢è®¢';\r\n    @Output() cellClick = new EventEmitter();\r\n\r\n    cells = new Array(23);\r\n\r\n    render: Renderer2 = null;\r\n\r\n\r\n    constructor(\r\n        injector: Injector,\r\n        ngzone: NgZone,\r\n        calendarRef: AppointmentCalendarComponent\r\n    ) {\r\n        super(injector, ngzone, calendarRef);\r\n        this.render = this.injector.get(Renderer2, null);\r\n    }\r\n\r\n    getCustomCls(item, typ: \"cls\" | \"styles\" = \"cls\") {\r\n        let result = null;\r\n        if (this.customCls) {\r\n            const { cls, styles } = this.customCls(item);\r\n            if (!cls && !styles && typ === \"cls\") {\r\n                result = this.customCls(item);\r\n            } else {\r\n                if (typ == \"cls\") {\r\n                    result = cls || null;\r\n                } else {\r\n                    result = styles || null;\r\n                }\r\n            }\r\n        }\r\n\r\n        // if (result && typ === 'styles') {\r\n        //     Object.keys(result).forEach((n: any) => {\r\n        //         if (result[n].indexOf('important') === -1) {\r\n        //             result[n] = result[n] +' !important' ;\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        return result;\r\n    }\r\n\r\n    setActiveItem(id?: any) {\r\n        let _id = id;\r\n        if (!id) {\r\n            _id = this.selectId;\r\n        }\r\n        if (_id) {\r\n            this.activeItem = flatten(\r\n                this.data.map((n: any) => n.reserves)\r\n            ).find((n) => n.id == _id);\r\n        }\r\n    }\r\n\r\n    onCellClick($event: MouseEvent, cellIndex, roomInfo) {\r\n        const _h = (''+cellIndex).padStart(2, '0');\r\n        const _endH = (''+(cellIndex + 1)).padStart(2, '0');\r\n        const p = {\r\n            start: `${this.calendarRef[\"currentDateStr\"]} ${_h}:00:00`,\r\n            end: `${this.calendarRef[\"currentDateStr\"]} ${_endH}:00:00`,\r\n            place: roomInfo.data,\r\n        };\r\n        this.cellClick.emit(p);\r\n    }\r\n\r\n\r\n    onMouseEnter($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const parentCell = $event.target['parentElement'].querySelector('.addnew');\r\n        if (parentCell) {\r\n            parentCell.style.opacity = 0;\r\n        }\r\n    }\r\n\r\n    onMouseLeave($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const parentCell = $event.target['parentElement'].querySelector('.addnew');\r\n        if (parentCell) {\r\n            parentCell.removeAttribute('style');\r\n        }\r\n    }\r\n\r\n  \r\n}\r\n","import { Component, Injector, Input, NgZone, ViewEncapsulation } from '@angular/core';\r\nimport { WeekDayItem } from '../models/calenday.types';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\nimport { flatten } from 'lodash-es';\r\nimport { BaseViewComponent } from './base.view.component';\r\n\r\n@Component({\r\n    selector: 'week-view',\r\n    templateUrl: 'week-view.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class WeekViewComponent extends BaseViewComponent {\r\n\r\n    @Input() weekDays: Array<WeekDayItem> = [];\r\n    @Input() width; \r\n\r\n    constructor(injector: Injector, ngzone: NgZone, calendarRef: AppointmentCalendarComponent) {\r\n        super(injector, ngzone, calendarRef)\r\n    }\r\n\r\n    setActiveItem(id?: any) {\r\n        let _id = id;\r\n        if (!id) {\r\n            _id = this.selectId;\r\n        }\r\n        if (_id) {\r\n            const arr =  flatten(this.data.map((n: any)=>n.reserves.map(t => t.items)));\r\n            this.activeItem = flatten(arr).find(n => n.id == _id);\r\n        }\r\n    }\r\n}","import { AfterViewInit, Component, EventEmitter, Injector, Input, OnChanges, OnInit, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport { addDays, subDays } from 'date-fns';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\nimport { CalendarViewType, ViewTypeChangedParam } from '../models/calenday.types';\r\n\r\n@Component({\r\n    selector: 'toolbar',\r\n    templateUrl: 'toolbar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class ToolbarComponent implements OnInit, OnChanges, AfterViewInit {\r\n\r\n    @Output() dateChanged = new EventEmitter<ViewTypeChangedParam>();\r\n    @Output() placeChanged = new EventEmitter();\r\n\r\n    currentDate = '';\r\n    currentDateRange = '';\r\n    currentWeekDays = [];\r\n    \r\n    @Input() currentViewType: CalendarViewType = 'day';\r\n    @Input() places = [];\r\n    @Input() placeIdField = 'id';\r\n    @Input() placeNameField = 'name';\r\n\r\n\r\n    constructor(private dateHlp: DateTimeHelperService, private injector: Injector, public calendarRef: AppointmentCalendarComponent) { }\r\n\r\n    ngOnInit() {\r\n        this.initDate();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.rooms && !changes.rooms.isFirstChange()) {\r\n            this.places = [{ [this.placeIdField]: '', [this.placeNameField]: 'å¨é¨åºæ' }, ...this.places];\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {}\r\n\r\n    private initDate() {\r\n        if (this.currentViewType === 'week' && !this.currentDateRange ) {\r\n            this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate: new Date()});\r\n            this.currentDateRange = this.currentWeekDays[0].dateStr + '~' + this.currentWeekDays[6].dateStr;\r\n        } else {\r\n            if (!this.currentDate) {\r\n                this.currentDate = this.dateHlp.formatTo(new Date(), 'yyyy-MM-dd');\r\n            }\r\n        }\r\n\r\n        this._dateChanged();\r\n    }\r\n\r\n    changeCalendarView($event: MouseEvent, viewType: CalendarViewType) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.currentViewType = viewType;\r\n        this.initDate();\r\n    }\r\n\r\n    onDateButtonClicked($event: MouseEvent, typ: number) {\r\n        let baselineDate: any = new Date();\r\n        if (this.currentViewType === 'day') {\r\n\r\n            if (this.currentDate) {\r\n                baselineDate = new Date(this.currentDate);\r\n            }\r\n\r\n            let newDateStr = this.dateHlp.formatTo(new Date(), 'yyyy-MM-dd');\r\n            if (typ === -1) {\r\n                const d = this.dateHlp.formatTo(subDays(baselineDate, 1), 'yyyy-MM-dd')\r\n                newDateStr = this.dateHlp.formatTo(d);\r\n            } else if (typ === 1) {\r\n                const d = this.dateHlp.formatTo(addDays(baselineDate, 1), 'yyyy-MM-dd')\r\n                newDateStr = this.dateHlp.formatTo(d);\r\n            }\r\n\r\n            this.currentDate = newDateStr;\r\n           \r\n        } else {\r\n            \r\n            if (this.currentWeekDays && this.currentWeekDays.length) {\r\n                baselineDate = this.currentWeekDays[4].date;\r\n            }\r\n            // ä¸å¨\r\n            if (typ === 1) {\r\n                this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate, range: 7});\r\n            } else if (typ === -1) { // ä¸å¨\r\n                this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate, range: -7});\r\n            } else { // å½åå¨\r\n                baselineDate = new Date();\r\n                this.currentWeekDays =  this.dateHlp.getWeekDate({ baselineDate});\r\n            }\r\n\r\n            this.currentDateRange = this.currentWeekDays[0].dateStr + '~' + this.currentWeekDays[6].dateStr;\r\n            // console.log(this.currentWeekDays);\r\n        }\r\n\r\n        this._dateChanged();\r\n    }\r\n\r\n    onDateChanged($event: string) {\r\n\r\n        let isChanged = false;\r\n        if (this.currentViewType == 'week') {\r\n            const _date = $event.split('~')[0];\r\n            this.currentWeekDays =  this.dateHlp.getWeekDate({ baselineDate: new Date(_date)});\r\n\r\n            isChanged = this.currentDateRange !== $event;\r\n        } else {\r\n            isChanged = this.currentDate !== $event;\r\n        }\r\n        \r\n        if (isChanged) {\r\n            this._dateChanged($event);\r\n        }\r\n    }\r\n\r\n    private _dateChanged(newDate?: string) {\r\n        if (newDate) {\r\n            if (this.currentViewType === 'day' ) {\r\n                this.currentDate = newDate;\r\n            } else {\r\n                this.currentDateRange = newDate;\r\n            }\r\n        }\r\n\r\n        this.dateChanged.emit({ \r\n            viewType: this.currentViewType,\r\n            dateValue: this.currentViewType === 'day' ? this.currentDate : this.currentDateRange, \r\n            weekDays: this.currentWeekDays\r\n        });\r\n\r\n        this.calendarRef.closeDetailPanel();\r\n    }\r\n\r\n    onPlaceSelectChanged($event) {\r\n        const { data } = $event;\r\n        this.placeChanged.emit({ \r\n            viewType: this.currentViewType,\r\n            dateValue: this.currentViewType === 'day' ? this.currentDate : this.currentDateRange, \r\n            weekDays: this.currentWeekDays,\r\n            room: data.id ? data : null\r\n        });\r\n    }\r\n}","import { EventEmitter, Directive, ElementRef, HostListener, Input, Output } from '@angular/core';\r\n\r\n\r\n@Directive({ selector: '[item-dblclick]' })\r\nexport class ItemDblClickDirective {\r\n\r\n    @Input('item-dblclick') data;\r\n    @Output() dblclickHandler = new EventEmitter();\r\n\r\n    constructor(public el: ElementRef) {\r\n    }\r\n\r\n    ngOnInit() {}\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    ondblclick(event: Event) {\r\n        event.stopPropagation();\r\n        this.dblclickHandler.emit({ item: this.data, $event: event });\r\n    }\r\n\r\n}","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { ComboListModule } from \"@farris/ui-combo-list\";\r\nimport { FarrisCommonModule } from \"@farris/ui-common\";\r\nimport { DateHelperModule } from \"@farris/ui-common/date\";\r\nimport { FarrisDatePickerModule } from \"@farris/ui-datepicker\";\r\n\r\nimport { AppointmentCalendarComponent } from \"./appointment-calendar.component\";\r\nimport { DayViewComponent } from \"./views/day-view.component\";\r\nimport { WeekViewComponent } from \"./views/week-view.component\";\r\nimport { ToolbarComponent } from \"./views/toolbar.component\";\r\nimport { ItemDblClickDirective } from \"./dblclick.directive\";\r\nimport { ReserveDetailComponent } from \"./views/detail-view.component\";\r\nimport { BaseViewComponent } from \"./views/base.view.component\";\r\nimport { LocaleModule } from \"@farris/ui-locale\";\r\nimport { DataColumnModule } from \"@farris/ui-common/column\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ToolbarComponent,\r\n        DayViewComponent,\r\n        WeekViewComponent,\r\n        AppointmentCalendarComponent,\r\n        ItemDblClickDirective,\r\n        ReserveDetailComponent,\r\n        BaseViewComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisDatePickerModule,\r\n        ComboListModule,\r\n        FarrisCommonModule.forRoot(),\r\n        DateHelperModule.forRoot(),\r\n        LocaleModule.forRoot(),\r\n        DataColumnModule.forRoot(),\r\n    ],\r\n    exports: [\r\n        ToolbarComponent,\r\n        DayViewComponent,\r\n        WeekViewComponent,\r\n        AppointmentCalendarComponent,\r\n        ItemDblClickDirective,\r\n        ReserveDetailComponent,\r\n        BaseViewComponent\r\n    ],\r\n})\r\nexport class AppointmentCalendarModule {}\r\n"],"names":[],"mappings":"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"}
