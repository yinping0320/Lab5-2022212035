{"version":3,"file":"farris-appointment-calendar.umd.js.map","sources":["ng://@farris/appointment-calendar/lib/appointment-calendar.service.ts","node_modules/tslib/tslib.es6.js","ng://@farris/appointment-calendar/lib/appointment-locales.ts","ng://@farris/appointment-calendar/lib/appointment-calendar.component.ts","ng://@farris/appointment-calendar/lib/views/base.view.component.ts","ng://@farris/appointment-calendar/lib/views/day-view.component.ts","ng://@farris/appointment-calendar/lib/views/week-view.component.ts","ng://@farris/appointment-calendar/lib/views/toolbar.component.ts","ng://@farris/appointment-calendar/lib/dblclick.directive.ts","ng://@farris/appointment-calendar/lib/views/detail-view.component.ts","ng://@farris/appointment-calendar/lib/appointment-calendar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class AppointmentCalendarService {\r\n\r\n  cardBtnClick$ = new Subject();\r\n\r\n  constructor() { }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export const APPOINTMENT_CALENDAR_LOCALES = {\r\n    'en': {\r\n        appointment: {\r\n            today: 'Today',\r\n            thisWeek: 'This week',\r\n            day: 'Day',\r\n            week: 'Week',\r\n            prevDay: 'Prev day',\r\n            prevWeek: 'Prev week',\r\n            nextDay: 'Next day',\r\n            nextWeek: 'Next week',\r\n            dateFormat: 'yyyy-MM-dd',\r\n            datePlace: 'Pleasy select a date.',\r\n            weeks: { ä¸: 'Mon', äº: 'Tue', ä¸: 'Wed', å: 'Thu', äº: 'Fri', å­: 'Sat',æ¥: 'Sun'},\r\n            detail: {\r\n                edit: 'Edit',\r\n                del: 'Delete',\r\n                close: 'Close',\r\n                dateFormat: 'MM-dd'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHS': {\r\n        appointment: {\r\n            today: 'ä»å¤©',\r\n            thisWeek: 'æ¬å¨',\r\n            day: 'æ¥',\r\n            week: 'å¨',\r\n            prevDay: 'åä¸å¤©',\r\n            prevWeek: 'åä¸å¨',\r\n            nextDay: 'ä¸ä¸å¤©',\r\n            nextWeek: 'ä¸ä¸å¨',\r\n            dateFormat: 'yyyyå¹´MMæddæ¥',\r\n            datePlace: 'è¯·éæ©',\r\n            weeks: { ä¸: 'å¨ä¸', äº: 'å¨äº', ä¸: 'å¨ä¸', å: 'å¨å', äº: 'å¨äº', å­: 'å¨å­',æ¥: 'å¨æ¥' },\r\n            detail: {\r\n                edit: 'ç¼è¾',\r\n                del: 'å é¤',\r\n                close: 'å³é­',\r\n                dateFormat: 'MMæddæ¥'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHT': {\r\n        appointment: {\r\n            today: 'ä»å¤©',\r\n            thisWeek: 'æ¬å¨',\r\n            day: 'æ¥',\r\n            week: 'å¨',\r\n            prevDay: 'åä¸å¤©',\r\n            prevWeek: 'åä¸å¨',\r\n            nextDay: 'ä¸ä¸å¤©',\r\n            nextWeek: 'ä¸ä¸å¨',\r\n            dateFormat: 'yyyyå¹´MMæddæ¥',\r\n            datePlace: 'è«é¸æ',\r\n            weeks: {  ä¸: 'å¨ä¸', äº: 'å¨äº', ä¸: 'å¨ä¸', å: 'å¨å', äº: 'å¨äº', å­: 'å¨å­', æ¥: 'å¨æ¥' },\r\n            detail: {\r\n                edit: 'ç·¨è¼¯',\r\n                del: 'åªé¤',\r\n                close: 'éé',\r\n                dateFormat: 'MMæddæ¥'\r\n            }\r\n        }\r\n    }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChange, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation } from \"@angular/core\";\r\nimport { DateTimeHelperService } from \"@farris/ui-common/date\";\r\nimport { differenceInMinutes, isSameDay } from \"date-fns\";\r\nimport { CalendarViewType, AppointmentData, ViewTypeChangedParam, WeekDayItem, DetailColumn, DetailToolbarButton } from \"./models/calenday.types\";\r\nimport { AppointmentCalendarService } from \"./appointment-calendar.service\";\r\nimport { CommonUtils } from \"@farris/ui-common\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ReserveDetailComponent } from \"./views/detail-view.component\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport { APPOINTMENT_CALENDAR_LOCALES } from \"./appointment-locales\";\r\nimport { flatten } from \"lodash-es\";\r\n\r\n\r\n@Component({\r\n    selector: \"farris-appointment-calendar\",\r\n    templateUrl: './appointment-calendar.component.html',\r\n    // styleUrls: ['./appointment-calendar.component.css'],\r\n    providers: [\r\n        AppointmentCalendarService\r\n    ],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AppointmentCalendarComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges {\r\n\r\n    /** é¢å®æ°æ® */\r\n    @Input() reserveData = [];\r\n    /** æ¿é´åè¡¨æ°æ® */\r\n    @Input() placeItems = [];\r\n\r\n    /** æ¿é´æ è¯å­æ®µ é»è®¤ id */\r\n    @Input() placeIdField = 'id';\r\n    /** æ¿é´åç§°å­æ®µ */\r\n    @Input() placeNameField = 'name';\r\n    /** é¢å®å°ç¹å¨åç§° */\r\n    @Input() placeFullNameField = '';\r\n\r\n    /** é¢å®æ¶é´å­æ®µ */\r\n    @Input() reserveInfoFields = {\r\n        /** é¢è®¢æ è¯å­æ®µ */\r\n        idField: 'id',\r\n        /** å¼å§æ¶é´å­æ®µ */\r\n        startDate: 'start',\r\n        /** ç»ææ¶é´å­æ®µ */\r\n        endDate: 'end',\r\n        /** å¯¹åºæ¿é´ID å­æ®µ */\r\n        placeid: 'roomid',\r\n        /** é¢è®¢ä¸»é¢åç§°å­æ®µ */\r\n        title: 'title'\r\n    }\r\n\r\n    /** æ¿é´åç§°æ ¼å¼å */\r\n    @Input() roomNameFormatter: (item) => string;\r\n    /** æ¿é´åç§°èªå®ä¹æ¨¡æ¿ */\r\n    @Input() placeNameTemplate: TemplateRef<any>;\r\n    /** é¢å®åå®¹æ¨¡æ¿ */\r\n    @Input() contentTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çæ¨¡æ¿ */\r\n    @Input() detailTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çå¾½ç« æ¨¡æ¿ */\r\n    @Input() detailBadgeTemplate: TemplateRef<any>;\r\n    /** è¯¦æå¡çèªå®ä¹css ç±» */\r\n    @Input() detailCls:  ({item}) => { cls: { [className: string]: boolean}, styles: { [key: string]: any }};\r\n    /** æ¥è§å¾èªå®ä¹æ ·å¼ç±» */\r\n    @Input() dayViewCls: ({item}) => { cls: { [className: string]: boolean}, styles: { [key: string]: any }};\r\n\r\n    @Input() placeTitle = 'åç§°';\r\n\r\n    /** å¤©è§å¾è¡é«ï¼ é»è®¤ 62px */\r\n    @Input() rowHeight = 62;\r\n    /** å¨è§å¾è¡é«ï¼é»è®¤ 85px */\r\n    @Input() weekRowHeight = 85;\r\n    /** å¨è§å¾ååæ ¼å®½åº¦ï¼é»è®¤ 150px */\r\n    @Input() weekCellWidth = 150;\r\n    /** æ¿é´åå®½åº¦ï¼é»è®¤ 300px */\r\n    @Input() placeNameWidth = 300;\r\n    /** é»è®¤è§å¾ day æ¥ï¼ week å¨ã é»è®¤ day */\r\n    @Input() viewType: CalendarViewType = 'day';\r\n    /** æ¥è§å¾ä¸å¼å§æ¶é´ */\r\n    @Input() startTime = 7;\r\n\r\n    /** éä¸­é¢è®¢ä¿¡æ¯ID */\r\n    @Input() selectedId = '';\r\n    /** è¯¦æå¡çåä¿¡æ¯ */\r\n    @Input() detailColumns: Array<DetailColumn>;\r\n    /** è¯¦æå¡çæ¾ç¤ºç¼è¾æé® */\r\n    @Input() showEditButton = true;\r\n    /** è¯¦æå¡çæ¾ç¤ºå é¤æé® */\r\n    @Input() showDeleteButton = true;\r\n    @Input() showCloseButton = true;\r\n    /** è¯¦æå¡çæé®éç½® */\r\n    @Input() detailToolbars:Array<DetailToolbarButton>;\r\n    /** è¯¦æå¡çæ é¢åå®½åº¦ï¼é»è®¤ 56px æ¾ç¤ºä¸º4ä¸ªå­ */\r\n    @Input() detailColumnWidth = 56;\r\n\r\n    /** åå»äºä»¶ */\r\n    @Output() itemDblClick = new EventEmitter();\r\n\r\n    /** æ¥è§å¾ï¼é¼ æ æ»è¿ç©ºç½ååæ ¼æ¾ç¤ºææ¬ */\r\n    @Input() reservationTitle = 'é¢è®¢';\r\n\r\n    /** è¿æ»¤äºä»¶ */\r\n    @Output() filterChange = new EventEmitter();\r\n    /** éä¸­äºä»¶ */\r\n    @Output() selectChange = new EventEmitter();\r\n    /** å¡çè¯¦æç¼è¾äºä»¶ */\r\n    @Output() editHandler = new EventEmitter();\r\n    /** å¡çè¯¦æå é¤äºä»¶ */\r\n    @Output() removeHandler = new EventEmitter();\r\n    /** æ¸é¤éä¸­é¡¹ */\r\n    @Output() clearSelected = new EventEmitter();\r\n    /** æ¥è§å¾ååæ ¼ç¹å»äºä»¶ */\r\n    @Output() reservation = new EventEmitter();\r\n    \r\n    @ViewChild('detailRef') detailRef: ReserveDetailComponent;\r\n    \r\n    weekDays: Array<WeekDayItem> = [];\r\n    groupData: AppointmentData[] = [];\r\n\r\n    private currentDateRangeStr = '';\r\n    private currentDateStr = '';\r\n\r\n    currentSelectItem: { room: any, data: any } = null;\r\n    position = null;\r\n    showDetail = false;\r\n    detailCustomCls: {[clsName: string]: any} = null;\r\n\r\n    _CLICK_DELAY_ = 180;\r\n    // æ¡æ¶å¤´é«é«åº¦ï¼\r\n    _frameHeaderHeight = 0;\r\n\r\n    minWeekViewWidth = 0;\r\n\r\n    private _currentScrollPos: { [viewType: string]: { x: number, y: number } } = { 'day': {x: null,y: 0}, 'week': {x: null,y: 0}};\r\n    \r\n    rowWidth = 2450;\r\n\r\n    private cardBtnClickSub: Subscription;\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef, private ngZone: NgZone, private render: Renderer2, public roomSer: AppointmentCalendarService,\r\n            private dateHlp: DateTimeHelperService, private elRef: ElementRef, public utils: CommonUtils, private localeSer: LocaleService) {\r\n        this.cardBtnClickSub = this.roomSer.cardBtnClick$.subscribe((e: any) => {\r\n            this.detailEventHandlers(e);\r\n        });\r\n\r\n        this.localeSer.setLocaleData(APPOINTMENT_CALENDAR_LOCALES);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.groupData = this.mergeDate();\r\n\r\n        this.showEditButton = !!this.editHandler.observers.length;\r\n        this.showDeleteButton = !!this.removeHandler.observers.length;\r\n\r\n        this.minWeekViewWidth = (this.weekCellWidth || 150) * 7 + this.placeNameWidth;\r\n\r\n        this.rowWidth += this.placeNameWidth;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.reserveData && !changes.reserveData.isFirstChange()) {\r\n            this.dataChanged();\r\n        }\r\n\r\n        if (changes.placeItems && !changes.placeItems.isFirstChange()) {\r\n            this.dataChanged();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if ( this.cardBtnClickSub ) {\r\n            this.cardBtnClickSub.unsubscribe();\r\n            this.cardBtnClickSub = null;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n    }\r\n\r\n    loadReserveData(data: []) {\r\n        this.reserveData = data;\r\n        this.dataChanged();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    loadPlaceData(data: []) {\r\n        this.placeItems = data;\r\n        this.dataChanged();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    private dataChanged() {\r\n        this.groupData = this.mergeDate();\r\n        if (this['CALENDAR_SCROLL_POSITION']) {\r\n            clearTimeout(this['CALENDAR_SCROLL_POSITION']);\r\n        }\r\n        this['CALENDAR_SCROLL_POSITION'] = setTimeout(() => {\r\n            const roomBodyEl = this.elRef.nativeElement.querySelector('.body');\r\n            const { x, y } = this._currentScrollPos[this.viewType] || { x: null, y: null};\r\n            if (roomBodyEl) {\r\n                let left = x;\r\n                if (this.viewType === 'day' && x === null) {\r\n                    left = this.startTime * 100;\r\n                }\r\n                \r\n                roomBodyEl.scrollLeft = left;\r\n                roomBodyEl.scrollTop = y || 0;\r\n                roomBodyEl.scrollTo(left, y || 0)\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    onViewTypeChanged($event: ViewTypeChangedParam) {\r\n        const { viewType, weekDays, dateValue, place } = $event;\r\n        this.viewType = viewType;\r\n        this.weekDays = weekDays;\r\n\r\n        if (this.viewType === 'day') {\r\n            this.currentDateStr = dateValue;\r\n        } else {\r\n            this.currentDateRangeStr = dateValue;\r\n        }\r\n\r\n        this.dataChanged();\r\n\r\n        this.filterChange.emit( { viewType, dateValue, place });\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onPlaceSelected($event: ViewTypeChangedParam) {\r\n        // TODO: æ¿é´åæ¢åï¼å®¢æ·ç«¯è¿æ»¤æ¿é´åè¡¨\r\n\r\n    }\r\n\r\n\r\n    private getUsedCells(reserves) {\r\n        if (reserves && reserves.length) {\r\n\r\n            const startField = this.reserveInfoFields.startDate;\r\n            const endField = this.reserveInfoFields.endDate;\r\n\r\n            const cells = reserves.map(n => {\r\n                const startValue = this.utils.getValue(startField, n.data);\r\n                const _startTimes = this.getTimes(startValue);\r\n\r\n                const endValue = this.utils.getValue(endField, n.data);\r\n                const _endTimes = this.getTimes(endValue);\r\n\r\n                const beginIndex = _startTimes.hour;\r\n                let endIndex = _endTimes.hour - 1;\r\n                // if (_endTimes.minute > 0) {\r\n                //     endIndex++;\r\n                // } else {\r\n                //     endIndex--;\r\n                // }\r\n\r\n                var c = [];\r\n                for(let i=beginIndex - 1; i< endIndex; i++) {\r\n                    c.push(i+1)\r\n                }\r\n\r\n                return c;\r\n            });\r\n\r\n            return flatten(cells);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private mergeDate(): AppointmentData[] {\r\n        if (this.placeItems && this.placeItems.length) {\r\n            if (this.viewType === 'day') {\r\n                return this.placeItems.map(n => {\r\n                    const reserves =  this.reserveData.filter(\r\n                        d => this.utils.getValue(this.reserveInfoFields.placeid,d) === this.utils.getValue(this.placeIdField, n) && \r\n                        isSameDay(new Date(this.utils.getValue(this.reserveInfoFields.startDate, d)), new Date(this.currentDateStr))\r\n                    ).map(r => {\r\n                        return {\r\n                            data: r,\r\n                            id: r[this.reserveInfoFields.idField],\r\n                            position: this.getReservePositionInfo(r),\r\n                        }\r\n                    });\r\n                    return {\r\n                        id: n[this.placeIdField],\r\n                        data: n,\r\n                        reserves,\r\n                        disableCells: this.getUsedCells(reserves)\r\n                    };\r\n                });\r\n            } else {\r\n                return this.placeItems.map(n => {\r\n                    return {\r\n                        id: n[this.placeIdField],\r\n                        data: n,\r\n                        reserves: this.weekDays.map((weekday: WeekDayItem) => {\r\n                            return {\r\n                                date: weekday,\r\n                                items: this.reserveData.filter(d => this.utils.getValue(\r\n                                    this.reserveInfoFields.placeid,d) === this.utils.getValue(this.placeIdField, n)  && \r\n                                    isSameDay(new Date(this.utils.getValue(this.reserveInfoFields.startDate, d)), weekday.date)\r\n                                ).map(r => {\r\n                                    return {\r\n                                        data: r,\r\n                                        id: r[this.reserveInfoFields.idField],\r\n                                    }\r\n                                }).sort((a, b) => {\r\n                                    const r = this.dateHlp.differenceInMinutes(new Date(this.utils.getValue(this.reserveInfoFields.startDate, a.data)), new Date(this.utils.getValue(this.reserveInfoFields.endDate, b.data)))\r\n                                    return r > 0 ? 1: r< 0? -1: 0;\r\n                                })\r\n                            }\r\n                        })\r\n                    };\r\n                });\r\n            }\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    getTimes(dateStr: string) {\r\n        if (dateStr) {\r\n            const _startDate = this.dateHlp.formatTo(dateStr, 'yyyy-MM-dd HH:mm:ss');\r\n            if (_startDate) {\r\n                const startDate = new Date(_startDate);\r\n                const hour = startDate.getHours();\r\n                const minute = startDate.getMinutes();\r\n\r\n                return {\r\n                    hour, minute, date: new Date(_startDate.split(' ')[0])\r\n                };\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private getReservePositionInfo(reserveItem: any) {\r\n        const startField = this.reserveInfoFields.startDate;\r\n        const endField = this.reserveInfoFields.endDate;\r\n        let left = 0;\r\n        let width = 0;\r\n\r\n        const startDateStr = reserveItem[startField];\r\n        const endDateStr =  reserveItem[endField];\r\n\r\n        if (startDateStr) {\r\n            const _startTimes = this.getTimes(startDateStr);\r\n            if (_startTimes) {\r\n                const {hour, minute} = _startTimes;\r\n\r\n                left = (hour) * 100;\r\n                if (minute) {\r\n                    left += minute / 60 * 100;\r\n                }\r\n\r\n                if (endDateStr) {\r\n                    \r\n                    const minutes = differenceInMinutes(new Date(endDateStr), new Date(startDateStr));\r\n                    width = minutes / 60 * 100;\r\n                }\r\n            }\r\n        }\r\n\r\n        return {left, width};\r\n    }\r\n\r\n    onSelectChange($event) {\r\n        this.selectedId = $event.item.id;\r\n        this.currentSelectItem = {room: $event.room, data: $event.item.data};\r\n\r\n        let tar = null;\r\n        if (this.viewType === 'week') {\r\n            tar = $event.$event.target.closest('li')\r\n        } else {\r\n            tar = $event.$event.target.closest('.item-content')\r\n        }\r\n        this.getPositionForDetailPanel(tar);\r\n\r\n        if (this.detailCls) {\r\n            this.detailCustomCls = this.detailCls($event.item);\r\n        }\r\n\r\n        this.showDetail = true;\r\n\r\n        this.selectChange.emit($event);\r\n    }\r\n\r\n    onItemDblClick($event) {\r\n        this.selectedId = $event.item.id;\r\n        this.currentSelectItem = {room: $event.room, data: $event.item.data};\r\n        this.itemDblClick.emit($event);\r\n    }\r\n\r\n    selectItem(reserveId: any) {\r\n        this.selectedId = reserveId;\r\n        this.cd.detectChanges();\r\n        if (this.selectedId === null || this.selectedId === undefined || this.selectedId === '') {\r\n            this.clearSelect();\r\n        }\r\n    }\r\n\r\n    clearSelect() {\r\n        this.selectedId = null;\r\n        this.clearSelected.emit({ins: this});\r\n    }\r\n\r\n    private getFrameheaderHeight() {\r\n\r\n        if(this._frameHeaderHeight) {\r\n            return this._frameHeaderHeight;\r\n        }\r\n\r\n        const tabset: any = document.querySelector('.framework-tab-origin.gw-container-tabset.tab-container');\r\n        let h = 0;\r\n        if (tabset) {\r\n            h += tabset.offsetHeight;\r\n        }\r\n\r\n        const frameHeader: any = document.querySelector('.gw-header--wrapper.framework-tool-origin');\r\n        if (frameHeader) {\r\n            h += frameHeader.offsetHeight;\r\n        }\r\n\r\n        this._frameHeaderHeight = h;\r\n        return this._frameHeaderHeight;\r\n    }\r\n\r\n    private getPositionForDetailPanel(target: HTMLElement) {\r\n        const { left, top, right, bottom, width, height } = target.getBoundingClientRect();\r\n        const panelSize = { width: 368, height: 436 };\r\n\r\n        let _left = left;\r\n        let _top = top;\r\n\r\n        const _right = window.innerWidth - right;\r\n        const _bottom = window.innerHeight - bottom;\r\n\r\n\r\n        if (_left > _right) {\r\n            if ( _left > panelSize.width) {\r\n                _left = _left - panelSize.width;\r\n            } else {\r\n                if (window.innerWidth - left > panelSize.width) {\r\n                    _left = left;\r\n                } else {\r\n                    if (right > panelSize.width) {\r\n                        _left = right - panelSize.width;\r\n                    } else {\r\n                        _left = (window.innerWidth - panelSize.width) / 2;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (_right > panelSize.width) {\r\n                _left = right;\r\n            } else {\r\n                if(right > panelSize.width) {\r\n                    _left = left;\r\n                } else {\r\n                    _left = (window.innerWidth - panelSize.width) / 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (_top > _bottom) {\r\n            if (_top > panelSize.height) {\r\n                if (left > panelSize.width || _right > panelSize.width) {\r\n                    if (window.innerHeight - _top < height + 40) {\r\n                        _top = window.innerHeight - panelSize.height - 20;\r\n                    } else {\r\n                        _top = top - panelSize.height + height + 40;\r\n                        if (_top < this.getFrameheaderHeight()) {\r\n                            _top = this.getFrameheaderHeight() + 10;\r\n                        }\r\n                    }\r\n                } else {\r\n                    _top = top - panelSize.height;\r\n                }\r\n            } else {\r\n                _top = 10 + this.getFrameheaderHeight();\r\n            }\r\n        } else {\r\n            if (_bottom > panelSize.height) {\r\n                if ( _right > panelSize.width || left > panelSize.width ) {\r\n                    _top = bottom - height - 40;\r\n                } else {\r\n                    _top = bottom;\r\n                }\r\n            } else {\r\n                _top = 10 + this.getFrameheaderHeight();\r\n            }\r\n        }\r\n\r\n        this.position = { left: _left, top: _top};\r\n    }\r\n\r\n    closeDetailPanel() {\r\n        this.roomSer.cardBtnClick$.next({action: 'close'});\r\n    }\r\n    \r\n    onAddNew($event) {\r\n        this.reservation.emit($event);\r\n    }\r\n\r\n    onScrollChange($event, typ) {\r\n        this._currentScrollPos[this.viewType] = {...$event, type: typ};\r\n    }\r\n\r\n    private detailEventHandlers(e: any) {\r\n        const { action, item, $event } = e;\r\n        let p = null;\r\n        if (item) {\r\n            p = { item: { data: item , id: this.utils.getValue(this.reserveInfoFields.idField, item) }};\r\n        }\r\n        switch(action) {\r\n            case 'edit':\r\n                this.editHandler.emit(p);\r\n                break;\r\n            case 'del':\r\n                this.removeHandler.emit(p);\r\n                break;\r\n            case 'close':\r\n                this.showDetail = false;\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\n\r\n@Component({\r\n    selector: 'appointment-base-view',\r\n    template: ''\r\n})\r\n\r\nexport class BaseViewComponent implements OnChanges, OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() data: [];\r\n    @Input() selectId = '';\r\n\r\n    @Output() itemClick = new EventEmitter();\r\n    @Output() itemDblClick = new EventEmitter();\r\n    \r\n\r\n    @ViewChild('header') headerRef: ElementRef<HTMLElement>;\r\n    @ViewChild('body') bodyRef: ElementRef<HTMLElement>;\r\n\r\n    @Output() scrollChange = new EventEmitter();\r\n\r\n    activeItem = null;\r\n\r\n    private overlaySer: OverLayHiddenService;\r\n    protected utils: CommonUtils;\r\n\r\n    private currentMousePointX = 0;\r\n    private currentMousePointY = 0;\r\n    private isClick = true;\r\n\r\n    constructor(protected injector: Injector, protected ngzone: NgZone, public calendarRef: AppointmentCalendarComponent) {\r\n        this.overlaySer = new OverLayHiddenService();\r\n        this.utils = this.injector.get(CommonUtils);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.setActiveItem();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            this.bodyRef.nativeElement.addEventListener('scroll', (e) => {\r\n                const x = this.bodyRef.nativeElement.scrollLeft;\r\n                const y = this.bodyRef.nativeElement.scrollTop;\r\n                this.headerRef.nativeElement.scrollLeft = this.bodyRef.nativeElement.scrollLeft;\r\n                this.calendarRef.closeDetailPanel();\r\n\r\n                this.scrollChange.emit({ x, y });\r\n            });\r\n        });\r\n\r\n        if (this.overlaySer) {\r\n            this.overlaySer.registerMouseEvent(this.bodyRef.nativeElement, (e) => {\r\n                if (this.calendarRef.detailRef) {\r\n\r\n                    if (this.calendarRef.detailRef.el.nativeElement.contains(e.target)) {\r\n                        return;\r\n                    }\r\n\r\n                    if ( e.type !== 'mousewheel' && this.isClick) {\r\n                        if (this.calendarRef.viewType === 'week') {\r\n                            if (e.target.closest('li') && e.target.closest('li').classList.contains('week-day-subject') ) {\r\n                                return;\r\n                            }\r\n                        }\r\n    \r\n                        if (this.calendarRef.viewType === 'day') {\r\n                            if ( e.target.closest('div.item-content')) {\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n\r\n                    if (e.target.classList.contains('farris-modal') || e.target.closest('.farris-modal') ) {\r\n                        if (e.target.closest('farris-messager') && e.target.nodeName !== 'BUTTON') {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    this.calendarRef.closeDetailPanel();\r\n                }\r\n            }, { mouseUp: true });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.overlaySer) {\r\n            this.overlaySer.destory(this.bodyRef.nativeElement);\r\n            this.overlaySer = null;\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.selectId && !changes.selectId.isFirstChange()) {\r\n            this.setActiveItem();\r\n        }\r\n\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.setActiveItem();\r\n        }\r\n    }\r\n\r\n    setActiveItem(id?: any) {}\r\n\r\n    getRoomData(data) {\r\n        const roomid = this.utils.getValue(this.calendarRef.reserveInfoFields.placeid, data);\r\n        const room: any = this.data.find((n: any) => n.id === roomid);\r\n        if (room){\r\n            return room.data;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    onSubjectClick($event, item) {\r\n        $event.stopPropagation();\r\n        if (!this.isClick) {\r\n            this.calendarRef.closeDetailPanel();\r\n            return;\r\n        }\r\n        if (this.calendarRef.viewType === 'week') {\r\n            $event.target.scrollIntoViewIfNeeded();\r\n        }\r\n\r\n        if (this['clickTimer']) {\r\n            clearTimeout(this['clickTimer']);\r\n        }\r\n        this['clickTimer'] = setTimeout(() => {\r\n            this.activeItem = item;\r\n            const room = this.getRoomData(item.data);\r\n            this.itemClick.emit({ item, $event, room });\r\n        }, this.calendarRef._CLICK_DELAY_);\r\n        \r\n    }\r\n\r\n    ondblClick($event: {item: any, $event: any}) {\r\n        if (this['clickTimer']) {\r\n            clearTimeout(this['clickTimer'])\r\n        }\r\n        this.activeItem = $event.item;\r\n        const room = this.getRoomData($event.item.data);\r\n        $event['room'] = room;\r\n        this.itemDblClick.emit($event);\r\n    }\r\n\r\n    onMouseDown($event) {\r\n        this.currentMousePointX = Math.floor($event.screenX);\r\n        this.currentMousePointY = Math.floor($event.screenY);\r\n    }\r\n\r\n    onMouseUp($event) {\r\n        this.isClick = this.currentMousePointX == Math.floor($event.screenX) && this.currentMousePointY == Math.floor($event.screenY);\r\n    }\r\n}","import {\r\n    Component,\r\n    EventEmitter,\r\n    Injector,\r\n    Input,\r\n    NgZone,\r\n    Output,\r\n    Renderer2,\r\n    ViewEncapsulation,\r\n} from \"@angular/core\";\r\nimport { AppointmentCalendarComponent } from \"../appointment-calendar.component\";\r\nimport { flatten } from \"lodash-es\";\r\nimport { BaseViewComponent } from \"./base.view.component\";\r\n@Component({\r\n    selector: \"day-view\",\r\n    templateUrl: \"day-view.component.html\",\r\n    encapsulation: ViewEncapsulation.None,\r\n    styles:[\r\n        `\r\n        .rtv-container .main .room-row .time-cell .addnew{\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid #2a87ff;\r\n  background: #edf5ff;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: all 0.12s ease;\r\n  color: #045dd3;\r\n  font-size: 14px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.rtv-container .main .room-row .time-cell:hover>.addnew {\r\n  opacity: 1;\r\n}\r\n\r\n        `\r\n    ]\r\n})\r\nexport class DayViewComponent extends BaseViewComponent {\r\n    @Input() customCls: ({ item }) => { [cls: string]: boolean };\r\n    @Input() reservationTitle = 'é¢è®¢';\r\n    @Output() cellClick = new EventEmitter();\r\n\r\n    cells = new Array(23);\r\n\r\n    render: Renderer2 = null;\r\n\r\n\r\n    constructor(\r\n        injector: Injector,\r\n        ngzone: NgZone,\r\n        calendarRef: AppointmentCalendarComponent\r\n    ) {\r\n        super(injector, ngzone, calendarRef);\r\n        this.render = this.injector.get(Renderer2, null);\r\n    }\r\n\r\n    getCustomCls(item, typ: \"cls\" | \"styles\" = \"cls\") {\r\n        let result = null;\r\n        if (this.customCls) {\r\n            const { cls, styles } = this.customCls(item);\r\n            if (!cls && !styles && typ === \"cls\") {\r\n                result = this.customCls(item);\r\n            } else {\r\n                if (typ == \"cls\") {\r\n                    result = cls || null;\r\n                } else {\r\n                    result = styles || null;\r\n                }\r\n            }\r\n        }\r\n\r\n        // if (result && typ === 'styles') {\r\n        //     Object.keys(result).forEach((n: any) => {\r\n        //         if (result[n].indexOf('important') === -1) {\r\n        //             result[n] = result[n] +' !important' ;\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        return result;\r\n    }\r\n\r\n    setActiveItem(id?: any) {\r\n        let _id = id;\r\n        if (!id) {\r\n            _id = this.selectId;\r\n        }\r\n        if (_id) {\r\n            this.activeItem = flatten(\r\n                this.data.map((n: any) => n.reserves)\r\n            ).find((n) => n.id == _id);\r\n        }\r\n    }\r\n\r\n    onCellClick($event: MouseEvent, cellIndex, roomInfo) {\r\n        const _h = (''+cellIndex).padStart(2, '0');\r\n        const _endH = (''+(cellIndex + 1)).padStart(2, '0');\r\n        const p = {\r\n            start: `${this.calendarRef[\"currentDateStr\"]} ${_h}:00:00`,\r\n            end: `${this.calendarRef[\"currentDateStr\"]} ${_endH}:00:00`,\r\n            place: roomInfo.data,\r\n        };\r\n        this.cellClick.emit(p);\r\n    }\r\n\r\n\r\n    onMouseEnter($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const parentCell = $event.target['parentElement'].querySelector('.addnew');\r\n        if (parentCell) {\r\n            parentCell.style.opacity = 0;\r\n        }\r\n    }\r\n\r\n    onMouseLeave($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const parentCell = $event.target['parentElement'].querySelector('.addnew');\r\n        if (parentCell) {\r\n            parentCell.removeAttribute('style');\r\n        }\r\n    }\r\n\r\n  \r\n}\r\n","import { Component, Injector, Input, NgZone, ViewEncapsulation } from '@angular/core';\r\nimport { WeekDayItem } from '../models/calenday.types';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\nimport { flatten } from 'lodash-es';\r\nimport { BaseViewComponent } from './base.view.component';\r\n\r\n@Component({\r\n    selector: 'week-view',\r\n    templateUrl: 'week-view.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class WeekViewComponent extends BaseViewComponent {\r\n\r\n    @Input() weekDays: Array<WeekDayItem> = [];\r\n    @Input() width; \r\n\r\n    constructor(injector: Injector, ngzone: NgZone, calendarRef: AppointmentCalendarComponent) {\r\n        super(injector, ngzone, calendarRef)\r\n    }\r\n\r\n    setActiveItem(id?: any) {\r\n        let _id = id;\r\n        if (!id) {\r\n            _id = this.selectId;\r\n        }\r\n        if (_id) {\r\n            const arr =  flatten(this.data.map((n: any)=>n.reserves.map(t => t.items)));\r\n            this.activeItem = flatten(arr).find(n => n.id == _id);\r\n        }\r\n    }\r\n}","import { AfterViewInit, Component, EventEmitter, Injector, Input, OnChanges, OnInit, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport { addDays, subDays } from 'date-fns';\r\nimport { AppointmentCalendarComponent } from '../appointment-calendar.component';\r\nimport { CalendarViewType, ViewTypeChangedParam } from '../models/calenday.types';\r\n\r\n@Component({\r\n    selector: 'toolbar',\r\n    templateUrl: 'toolbar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class ToolbarComponent implements OnInit, OnChanges, AfterViewInit {\r\n\r\n    @Output() dateChanged = new EventEmitter<ViewTypeChangedParam>();\r\n    @Output() placeChanged = new EventEmitter();\r\n\r\n    currentDate = '';\r\n    currentDateRange = '';\r\n    currentWeekDays = [];\r\n    \r\n    @Input() currentViewType: CalendarViewType = 'day';\r\n    @Input() places = [];\r\n    @Input() placeIdField = 'id';\r\n    @Input() placeNameField = 'name';\r\n\r\n\r\n    constructor(private dateHlp: DateTimeHelperService, private injector: Injector, public calendarRef: AppointmentCalendarComponent) { }\r\n\r\n    ngOnInit() {\r\n        this.initDate();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.rooms && !changes.rooms.isFirstChange()) {\r\n            this.places = [{ [this.placeIdField]: '', [this.placeNameField]: 'å¨é¨åºæ' }, ...this.places];\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {}\r\n\r\n    private initDate() {\r\n        if (this.currentViewType === 'week' && !this.currentDateRange ) {\r\n            this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate: new Date()});\r\n            this.currentDateRange = this.currentWeekDays[0].dateStr + '~' + this.currentWeekDays[6].dateStr;\r\n        } else {\r\n            if (!this.currentDate) {\r\n                this.currentDate = this.dateHlp.formatTo(new Date(), 'yyyy-MM-dd');\r\n            }\r\n        }\r\n\r\n        this._dateChanged();\r\n    }\r\n\r\n    changeCalendarView($event: MouseEvent, viewType: CalendarViewType) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.currentViewType = viewType;\r\n        this.initDate();\r\n    }\r\n\r\n    onDateButtonClicked($event: MouseEvent, typ: number) {\r\n        let baselineDate: any = new Date();\r\n        if (this.currentViewType === 'day') {\r\n\r\n            if (this.currentDate) {\r\n                baselineDate = new Date(this.currentDate);\r\n            }\r\n\r\n            let newDateStr = this.dateHlp.formatTo(new Date(), 'yyyy-MM-dd');\r\n            if (typ === -1) {\r\n                const d = this.dateHlp.formatTo(subDays(baselineDate, 1), 'yyyy-MM-dd')\r\n                newDateStr = this.dateHlp.formatTo(d);\r\n            } else if (typ === 1) {\r\n                const d = this.dateHlp.formatTo(addDays(baselineDate, 1), 'yyyy-MM-dd')\r\n                newDateStr = this.dateHlp.formatTo(d);\r\n            }\r\n\r\n            this.currentDate = newDateStr;\r\n           \r\n        } else {\r\n            \r\n            if (this.currentWeekDays && this.currentWeekDays.length) {\r\n                baselineDate = this.currentWeekDays[4].date;\r\n            }\r\n            // ä¸å¨\r\n            if (typ === 1) {\r\n                this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate, range: 7});\r\n            } else if (typ === -1) { // ä¸å¨\r\n                this.currentWeekDays = this.dateHlp.getWeekDate({ baselineDate, range: -7});\r\n            } else { // å½åå¨\r\n                baselineDate = new Date();\r\n                this.currentWeekDays =  this.dateHlp.getWeekDate({ baselineDate});\r\n            }\r\n\r\n            this.currentDateRange = this.currentWeekDays[0].dateStr + '~' + this.currentWeekDays[6].dateStr;\r\n            // console.log(this.currentWeekDays);\r\n        }\r\n\r\n        this._dateChanged();\r\n    }\r\n\r\n    onDateChanged($event: string) {\r\n\r\n        let isChanged = false;\r\n        if (this.currentViewType == 'week') {\r\n            const _date = $event.split('~')[0];\r\n            this.currentWeekDays =  this.dateHlp.getWeekDate({ baselineDate: new Date(_date)});\r\n\r\n            isChanged = this.currentDateRange !== $event;\r\n        } else {\r\n            isChanged = this.currentDate !== $event;\r\n        }\r\n        \r\n        if (isChanged) {\r\n            this._dateChanged($event);\r\n        }\r\n    }\r\n\r\n    private _dateChanged(newDate?: string) {\r\n        if (newDate) {\r\n            if (this.currentViewType === 'day' ) {\r\n                this.currentDate = newDate;\r\n            } else {\r\n                this.currentDateRange = newDate;\r\n            }\r\n        }\r\n\r\n        this.dateChanged.emit({ \r\n            viewType: this.currentViewType,\r\n            dateValue: this.currentViewType === 'day' ? this.currentDate : this.currentDateRange, \r\n            weekDays: this.currentWeekDays\r\n        });\r\n\r\n        this.calendarRef.closeDetailPanel();\r\n    }\r\n\r\n    onPlaceSelectChanged($event) {\r\n        const { data } = $event;\r\n        this.placeChanged.emit({ \r\n            viewType: this.currentViewType,\r\n            dateValue: this.currentViewType === 'day' ? this.currentDate : this.currentDateRange, \r\n            weekDays: this.currentWeekDays,\r\n            room: data.id ? data : null\r\n        });\r\n    }\r\n}","import { EventEmitter, Directive, ElementRef, HostListener, Input, Output } from '@angular/core';\r\n\r\n\r\n@Directive({ selector: '[item-dblclick]' })\r\nexport class ItemDblClickDirective {\r\n\r\n    @Input('item-dblclick') data;\r\n    @Output() dblclickHandler = new EventEmitter();\r\n\r\n    constructor(public el: ElementRef) {\r\n    }\r\n\r\n    ngOnInit() {}\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    ondblclick(event: Event) {\r\n        event.stopPropagation();\r\n        this.dblclickHandler.emit({ item: this.data, $event: event });\r\n    }\r\n\r\n}","\r\nimport { Component, ElementRef, Injector, Input, OnInit, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { AppointmentCalendarService } from '../appointment-calendar.service';\r\nimport { DetailColumn, DetailToolbarButton } from '../models/calenday.types';\r\n\r\n@Component({\r\n    selector: 'reserve-detail',\r\n    template: `\r\n      <div class=\"reserve-detail-container\" style=\"position: fixed; z-index: 99\" [style.left.px]=\"position?.left\" [style.top.px]=\"position?.top\">\r\n        <div class=\"detail-header\" [ngClass]=\"getCustomCls()\" [ngStyle]=\"getCustomCls('styles')\">\r\n            <div class=\"detail-toolbar\" *ngIf=\"!toolbarButtons || !toolbarButtons.length\">\r\n                <span *ngIf=\"showEditButton\" class=\"f-icon f-icon f-icon-new-edit\" title=\"{{ 'appointment.detail.edit' | locale }}\" (click)=\"toolbarBtnClick($event, 'edit')\"></span>\r\n                <span *ngIf=\"showDeleteButton\" class=\"f-icon f-icon-trash\" title=\"{{ 'appointment.detail.del' | locale }}\" (click)=\"toolbarBtnClick($event, 'del')\"></span>\r\n                <span *ngIf=\"showCloseButton\" class=\"f-icon f-icon-close\" title=\"{{ 'appointment.detail.close' | locale }}\" (click)=\"toolbarBtnClick($event, 'close')\"></span>\r\n            </div>\r\n\r\n            <div class=\"detail-toolbar\" *ngIf=\"toolbarButtons && toolbarButtons.length\">\r\n                <span *ngFor=\"let btn of toolbarButtons\" class=\"{{ btn.icon }}\" title=\"{{ btn.title }}\" [style.display]=\"btn.visible ? '': 'none'\"\r\n                    (click)=\"!btn.disable && btn.handler && btn.handler({ item: data, $event: $event })\"></span>\r\n                <span *ngIf=\"showCloseButton\" class=\"f-icon f-icon-close\" title=\"{{ 'appointment.detail.close' | locale }}\" (click)=\"toolbarBtnClick($event, 'close')\"></span>\r\n            </div>\r\n\r\n            <div class=\"detail-title\">\r\n \r\n                <span class=\"detail-place\">\r\n                    {{rooNameField | getvalue: placeInfo}}\r\n                </span>\r\n                <div class=\"title-content\" style='word-break:break-all; font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"Helvetica Neue\",Helvetica,Arial,sans-serif' title=\"{{fieldConfigs.title}}\">\r\n                    {{subStrNum(fieldConfigs.title | getvalue: data, titleLength)}}\r\n                    <!-- <span class=\"detail-label\">ä¸é¡¹ä¼è®®</span> -->\r\n                    <ng-container [ngTemplateOutlet]=\"badgeTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: data}, item: data }\"></ng-container>\r\n                </div>\r\n                <div class=\"detail-timer\">\r\n                    {{ fieldConfigs.startDate| getvalue: data | dateformat: ('appointment.detail.dateFormat'|locale) }} {{ fieldConfigs.startDate| getvalue: data | dateformat: 'HH:mm' }} \r\n                    &nbsp;-&nbsp;\r\n                    {{ fieldConfigs.endDate | getvalue: data | dateformat: ('appointment.detail.dateFormat'|locale) }} {{ fieldConfigs.endDate | getvalue: data | dateformat: 'HH:mm' }} \r\n                    <!-- 9æ4æ¥ï¼ä»å¤©ï¼08:00 â 9æ7æ¥ï¼å¨ä¸ï¼17:30 -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"detail-info-content  win11Scroll nobtn\" [ngStyle]=\"getCustomCls('detail')\">\r\n            <ng-container [ngTemplateOutlet]=\"detailTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: data}, item: data }\"></ng-container>\r\n            <ul *ngIf=\"!detailTemplate\">\r\n                <li *ngFor=\"let col of columns\">\r\n                    <ng-container *ngIf=\"!col.template\">\r\n                        <span class=\"detail-subtitle\" [style.width.px]=\"detailColumnWidth\" [style.minWidth.px]=\"detailColumnWidth\" [title]=\"col.title\">{{col.title}}</span> \r\n                        <span class=\"detail-content  d-flex flex-row\" *ngIf=\"!col.formatter\">\r\n                            <span class=\"colon\"></span>    \r\n                            <span class=\"text\">{{ col.field | getvalue: data: true}}</span>\r\n                        </span>\r\n                        <span class=\"detail-content  d-flex flex-row\" *ngIf=\"col.formatter\">\r\n                            <span class=\"colon\"></span>\r\n                            <span class=\"text\" [innerHtml]=\" col.field | getvalue: data | columnformatter: col : data | safe: 'html'\"></span>\r\n                        </span>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"col.template\"  [ngTemplateOutlet]=\"col.template\" [ngTemplateOutletContext]=\"{ $implicit: {data: data, field: col.field, label: col.title}, item: data }\">\r\n                    </ng-container>\r\n                </li>\r\n                \r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    `,\r\n    styles: [\r\n        `\r\n            .detail-subtitle {\r\n               text-align: justify;text-align-last: justify;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;\r\n            }\r\n            .detail-content>.colon:before {\r\n                content: 'ï¼'\r\n            }\r\n\r\n            .detail-content>.text {\r\n                word-break: break-all;\r\n            }\r\n        `\r\n    ]\r\n})\r\n\r\nexport class ReserveDetailComponent implements OnInit {\r\n    /** é¢å®æ°æ® */\r\n    @Input() data: any;\r\n    /** å¼¹åºé¢æ¿ä½ç½® */\r\n    @Input() position: { left: number, top: number } = null;\r\n    /** é¢å®è¯¦æå­æ®µ */\r\n    @Input() columns: Array<DetailColumn>\r\n    /** é¢å®è¯¦ææ¨¡æ¿ */\r\n    @Input() detailTemplate: TemplateRef<any>;\r\n    /** å¾½ç« æ¢°æ¿ */\r\n    @Input() badgeTemplate: TemplateRef<any>;\r\n    /** é¢å®ä¿¡æ¯å­æ®µéç½® */\r\n    @Input() fieldConfigs = null;\r\n    /** é¢å®å°ç¹ä¿¡æ¯ */\r\n    @Input() placeInfo: any;\r\n    /** é¢å®å°ç¹å­æ®µéç½® */\r\n    @Input() placeFieldConfigs = null;\r\n\r\n    @Input() customCls: { [className:string]: any } = null;\r\n\r\n    @Input() showEditButton = true;\r\n    @Input() showDeleteButton = true;\r\n    @Input() showCloseButton = true;\r\n    @Input() toolbarButtons: Array<DetailToolbarButton>;\r\n\r\n    @Input() detailColumnWidth = 56;\r\n\r\n    @Input() titleLength = 52;\r\n\r\n    rooNameField = 'name';\r\n\r\n    constructor(private injector: Injector, private ser: AppointmentCalendarService, public el: ElementRef) { }\r\n\r\n    ngOnInit() {\r\n        this.rooNameField = this.placeFieldConfigs.fullName || this.placeFieldConfigs.name;\r\n    }\r\n\r\n\r\n    toolbarBtnClick($event: MouseEvent, t) {\r\n        $event.stopPropagation();\r\n        this.ser.cardBtnClick$.next({ $event, action: t, item: this.data });\r\n    }\r\n\r\n    getCustomCls(typ: 'cls' | 'styles' | 'detail' = 'cls') {\r\n        let result = null;\r\n        if (this.customCls) {\r\n            if (!this.customCls['cls'] && !this.customCls['cls'] && typ == 'cls') {\r\n                result = this.customCls;\r\n            } else {\r\n                result = this.customCls[typ] || {};\r\n            }\r\n        }\r\n\r\n        // if (typ === 'styles' || typ === 'detail') {\r\n        //     Object.keys(result).forEach((n: any) => {\r\n        //         if (result[n].indexOf('important') === -1) {\r\n        //             result[n] = result[n] +' !important' ;\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        return result;\r\n    }\r\n    getLength(str){\r\n        let strLength=0; // è®°å½strçæ»é¿åº¦\r\n        const Len = str.length;\r\n        for(let i=0;i<Len;i++){\r\n            var charCode = str.charCodeAt(i);// ä½¿ç¨charCodeAtè¿ååä¸ªå­ç¬¦çUnicodeç¼ç \r\n            if(charCode>=0 && charCode<=128){\r\n                strLength++; //è±æå­ç¬¦å 1\r\n            }else {\r\n                strLength= strLength+2;//ä¸­æå­ç¬¦å 2\r\n            }\r\n        }\r\n        return strLength;\r\n    }\r\n\r\n    subStrNum(str,len) {\r\n        const strLen = str.length;\r\n        let strCut = '';\r\n        let strLength =0;\r\n        for(let i=0;i<strLen;i++){\r\n            var charStr = str.charAt(i); //ä½¿ç¨charAtè·ååä¸ªå­ç¬¦ï¼\r\n            strLength++\r\n            if(encodeURI(charStr).length>4){ //ä½¿ç¨encodeURIè·åç¼ç é¿åº¦\r\n                strLength++;\r\n            }\r\n            strCut = strCut.concat(charStr);//åä¸ªå­ç¬¦è¿è¡åå¹¶\r\n            if(strLength >= len){\r\n                strCut = strCut.concat('...') //å¤§äºæå®é¿åº¦ååå¹¶'...'å¹¶è¿åæ­¤å­ç¬¦ä¸²\r\n                return strCut;\r\n            }\r\n        }\r\n        if(strLength<len){\r\n            return str;\r\n        }\r\n    }\r\n}","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { ComboListModule } from \"@farris/ui-combo-list\";\r\nimport { FarrisCommonModule } from \"@farris/ui-common\";\r\nimport { DateHelperModule } from \"@farris/ui-common/date\";\r\nimport { FarrisDatePickerModule } from \"@farris/ui-datepicker\";\r\n\r\nimport { AppointmentCalendarComponent } from \"./appointment-calendar.component\";\r\nimport { DayViewComponent } from \"./views/day-view.component\";\r\nimport { WeekViewComponent } from \"./views/week-view.component\";\r\nimport { ToolbarComponent } from \"./views/toolbar.component\";\r\nimport { ItemDblClickDirective } from \"./dblclick.directive\";\r\nimport { ReserveDetailComponent } from \"./views/detail-view.component\";\r\nimport { BaseViewComponent } from \"./views/base.view.component\";\r\nimport { LocaleModule } from \"@farris/ui-locale\";\r\nimport { DataColumnModule } from \"@farris/ui-common/column\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ToolbarComponent,\r\n        DayViewComponent,\r\n        WeekViewComponent,\r\n        AppointmentCalendarComponent,\r\n        ItemDblClickDirective,\r\n        ReserveDetailComponent,\r\n        BaseViewComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisDatePickerModule,\r\n        ComboListModule,\r\n        FarrisCommonModule.forRoot(),\r\n        DateHelperModule.forRoot(),\r\n        LocaleModule.forRoot(),\r\n        DataColumnModule.forRoot(),\r\n    ],\r\n    exports: [\r\n        ToolbarComponent,\r\n        DayViewComponent,\r\n        WeekViewComponent,\r\n        AppointmentCalendarComponent,\r\n        ItemDblClickDirective,\r\n        ReserveDetailComponent,\r\n        BaseViewComponent\r\n    ],\r\n})\r\nexport class AppointmentCalendarModule {}\r\n"],"names":["Subject","Injectable","EventEmitter","flatten","isSameDay","differenceInMinutes","Component","ViewEncapsulation","Injector","ChangeDetectorRef","NgZone","Renderer2","DateTimeHelperService","ElementRef","CommonUtils","LocaleService","Input","Output","ViewChild","OverLayHiddenService","tslib_1.__extends","subDays","addDays","Directive","HostListener","NgModule","CommonModule","FormsModule","FarrisDatePickerModule","ComboListModule","FarrisCommonModule","DateHelperModule","LocaleModule","DataColumnModule"],"mappings":"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"}
