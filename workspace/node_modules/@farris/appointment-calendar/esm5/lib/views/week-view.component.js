/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Injector, Input, NgZone, ViewEncapsulation } from '@angular/core';
import { AppointmentCalendarComponent } from '../appointment-calendar.component';
import { flatten } from 'lodash-es';
import { BaseViewComponent } from './base.view.component';
var WeekViewComponent = /** @class */ (function (_super) {
    tslib_1.__extends(WeekViewComponent, _super);
    function WeekViewComponent(injector, ngzone, calendarRef) {
        var _this = _super.call(this, injector, ngzone, calendarRef) || this;
        _this.weekDays = [];
        return _this;
    }
    /**
     * @param {?=} id
     * @return {?}
     */
    WeekViewComponent.prototype.setActiveItem = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var _id = id;
        if (!id) {
            _id = this.selectId;
        }
        if (_id) {
            /** @type {?} */
            var arr = flatten(this.data.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.reserves.map((/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return t.items; })); })));
            this.activeItem = flatten(arr).find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id == _id; }));
        }
    };
    WeekViewComponent.decorators = [
        { type: Component, args: [{
                    selector: 'week-view',
                    template: "<div class=\"header\" #header>\r\n\r\n    <div class=\"header-row\" [attr.style]=\"'width: ' +  width + 'px!important' | safe: 'style'\">\r\n\r\n        <div class=\"header-cell roomname fixed-left\" [style.width.px]=\"calendarRef.placeNameWidth\">\r\n            <span class=\"time ml-2\">{{calendarRef.placeTitle}}</span>\r\n        </div>\r\n\r\n        <div style=\"flex: 7;display: flex;\">\r\n            <div class=\"header-cell time-cell\" *ngFor=\"let item of weekDays\" title=\"{{ item.dateStr }}  {{ 'appointment.weeks.' + item.week | locale}}\" [style.width.px]=\"calendarRef.weekCellWidth\">\r\n                <span class=\"rtv-week-day\" [class.active]=\"item.isToday\">{{item.day}}</span> <span>\r\n                    {{ 'appointment.weeks.' + item.week | locale}}</span>\r\n            </div>\r\n        </div>\r\n       \r\n           \r\n    </div>\r\n\r\n</div>\r\n<div class=\"body win11Scroll nobtn\" #body style=\"padding-bottom: 15px\">\r\n\r\n    <div class=\"room-row\" *ngFor=\"let room of data\" [attr.style]=\"'width: ' +  width + 'px!important; height:' + calendarRef.weekRowHeight + 'px' | safe: 'style'\">\r\n\r\n        <div class=\"room-cell roomname fixed-left\" [style.width.px]=\"calendarRef.placeNameWidth\">\r\n            <span *ngIf=\"!calendarRef.placeNameTemplate\">{{ room.data[calendarRef.placeNameField] }}</span>\r\n            <ng-container [ngTemplateOutlet]=\"calendarRef.placeNameTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: room.data}, item: room.data }\"></ng-container>        \r\n        </div>\r\n        <div style=\"flex: 7;display: flex;\">\r\n            <div class=\"room-cell time-cell win11Scroll nobtn\" *ngFor=\"let res of room?.reserves\" style=\"align-items: start;\" [style.width.px]=\"calendarRef.weekCellWidth\">\r\n                <div style=\"width: 100%;overflow: hidden;\" class=\"p-1\" *ngIf=\"res.items && res.items.length\">\r\n                    <ul style=\"list-style: none;word-break: keep-all;\">\r\n                        <li class=\"week-day-subject mb-1\" *ngFor=\"let item of res.items\" \r\n                            [class.selected]=\"activeItem && activeItem.id === item.id\" (mousedown)=\"onMouseDown($event)\" (mouseup)=\"onMouseUp($event)\"\r\n                            (click)=\"onSubjectClick($event, item)\" [item-dblclick]=\"item\" (dblclickHandler)=\"ondblClick($event)\">\r\n                            <div style=\"display: flex;flex-direction: row;\" class=\"rtv-week-day-item\">\r\n                                <div style=\"flex-grow: 1;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\" title=\"{{ calendarRef.reserveInfoFields.title | getvalue: item.data }}\">\r\n                                    {{ calendarRef.utils.getValue(calendarRef.reserveInfoFields.title || 'title', item.data) }}\r\n                                </div>\r\n                                <div  style=\"flex: none;text-align: right; padding-left: 3px;\">\r\n                                    {{ item.data[calendarRef.reserveInfoFields.startDate] | dateformat: 'HH:mm'}}\r\n                                </div>\r\n                            </div>                        \r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n",
                    encapsulation: ViewEncapsulation.None
                }] }
    ];
    /** @nocollapse */
    WeekViewComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: AppointmentCalendarComponent }
    ]; };
    WeekViewComponent.propDecorators = {
        weekDays: [{ type: Input }],
        width: [{ type: Input }]
    };
    return WeekViewComponent;
}(BaseViewComponent));
export { WeekViewComponent };
if (false) {
    /** @type {?} */
    WeekViewComponent.prototype.weekDays;
    /** @type {?} */
    WeekViewComponent.prototype.width;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vlay12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvYXBwb2ludG1lbnQtY2FsZW5kYXIvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvd2Vlay12aWV3LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdEYsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDakYsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNwQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRDtJQU11Qyw2Q0FBaUI7SUFLcEQsMkJBQVksUUFBa0IsRUFBRSxNQUFjLEVBQUUsV0FBeUM7UUFBekYsWUFDSSxrQkFBTSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxTQUN2QztRQUxRLGNBQVEsR0FBdUIsRUFBRSxDQUFDOztJQUszQyxDQUFDOzs7OztJQUVELHlDQUFhOzs7O0lBQWIsVUFBYyxFQUFROztZQUNkLEdBQUcsR0FBRyxFQUFFO1FBQ1osSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNMLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxHQUFHLEVBQUU7O2dCQUNDLEdBQUcsR0FBSSxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHOzs7O1lBQUMsVUFBQyxDQUFNLElBQUcsT0FBQSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUc7Ozs7WUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxLQUFLLEVBQVAsQ0FBTyxFQUFDLEVBQTVCLENBQTRCLEVBQUMsQ0FBQztZQUMzRSxJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJOzs7O1lBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsRUFBWCxDQUFXLEVBQUMsQ0FBQztTQUN6RDtJQUNMLENBQUM7O2dCQXhCSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLFdBQVc7b0JBQ3JCLDB5R0FBdUM7b0JBQ3ZDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO2lCQUN4Qzs7OztnQkFWbUIsUUFBUTtnQkFBUyxNQUFNO2dCQUVsQyw0QkFBNEI7OzsyQkFZaEMsS0FBSzt3QkFDTCxLQUFLOztJQWdCVix3QkFBQztDQUFBLEFBekJELENBTXVDLGlCQUFpQixHQW1CdkQ7U0FuQlksaUJBQWlCOzs7SUFFMUIscUNBQTJDOztJQUMzQyxrQ0FBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0b3IsIElucHV0LCBOZ1pvbmUsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFdlZWtEYXlJdGVtIH0gZnJvbSAnLi4vbW9kZWxzL2NhbGVuZGF5LnR5cGVzJztcclxuaW1wb3J0IHsgQXBwb2ludG1lbnRDYWxlbmRhckNvbXBvbmVudCB9IGZyb20gJy4uL2FwcG9pbnRtZW50LWNhbGVuZGFyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBCYXNlVmlld0NvbXBvbmVudCB9IGZyb20gJy4vYmFzZS52aWV3LmNvbXBvbmVudCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnd2Vlay12aWV3JyxcclxuICAgIHRlbXBsYXRlVXJsOiAnd2Vlay12aWV3LmNvbXBvbmVudC5odG1sJyxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWVrVmlld0NvbXBvbmVudCBleHRlbmRzIEJhc2VWaWV3Q29tcG9uZW50IHtcclxuXHJcbiAgICBASW5wdXQoKSB3ZWVrRGF5czogQXJyYXk8V2Vla0RheUl0ZW0+ID0gW107XHJcbiAgICBASW5wdXQoKSB3aWR0aDsgXHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5qZWN0b3I6IEluamVjdG9yLCBuZ3pvbmU6IE5nWm9uZSwgY2FsZW5kYXJSZWY6IEFwcG9pbnRtZW50Q2FsZW5kYXJDb21wb25lbnQpIHtcclxuICAgICAgICBzdXBlcihpbmplY3Rvciwgbmd6b25lLCBjYWxlbmRhclJlZilcclxuICAgIH1cclxuXHJcbiAgICBzZXRBY3RpdmVJdGVtKGlkPzogYW55KSB7XHJcbiAgICAgICAgbGV0IF9pZCA9IGlkO1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgX2lkID0gdGhpcy5zZWxlY3RJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9pZCkge1xyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSAgZmxhdHRlbih0aGlzLmRhdGEubWFwKChuOiBhbnkpPT5uLnJlc2VydmVzLm1hcCh0ID0+IHQuaXRlbXMpKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IGZsYXR0ZW4oYXJyKS5maW5kKG4gPT4gbi5pZCA9PSBfaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==