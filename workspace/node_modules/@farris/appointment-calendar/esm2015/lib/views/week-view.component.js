/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector, Input, NgZone, ViewEncapsulation } from '@angular/core';
import { AppointmentCalendarComponent } from '../appointment-calendar.component';
import { flatten } from 'lodash-es';
import { BaseViewComponent } from './base.view.component';
export class WeekViewComponent extends BaseViewComponent {
    /**
     * @param {?} injector
     * @param {?} ngzone
     * @param {?} calendarRef
     */
    constructor(injector, ngzone, calendarRef) {
        super(injector, ngzone, calendarRef);
        this.weekDays = [];
    }
    /**
     * @param {?=} id
     * @return {?}
     */
    setActiveItem(id) {
        /** @type {?} */
        let _id = id;
        if (!id) {
            _id = this.selectId;
        }
        if (_id) {
            /** @type {?} */
            const arr = flatten(this.data.map((/**
             * @param {?} n
             * @return {?}
             */
            (n) => n.reserves.map((/**
             * @param {?} t
             * @return {?}
             */
            t => t.items)))));
            this.activeItem = flatten(arr).find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.id == _id));
        }
    }
}
WeekViewComponent.decorators = [
    { type: Component, args: [{
                selector: 'week-view',
                template: "<div class=\"header\" #header>\r\n\r\n    <div class=\"header-row\" [attr.style]=\"'width: ' +  width + 'px!important' | safe: 'style'\">\r\n\r\n        <div class=\"header-cell roomname fixed-left\" [style.width.px]=\"calendarRef.placeNameWidth\">\r\n            <span class=\"time ml-2\">{{calendarRef.placeTitle}}</span>\r\n        </div>\r\n\r\n        <div style=\"flex: 7;display: flex;\">\r\n            <div class=\"header-cell time-cell\" *ngFor=\"let item of weekDays\" title=\"{{ item.dateStr }}  {{ 'appointment.weeks.' + item.week | locale}}\" [style.width.px]=\"calendarRef.weekCellWidth\">\r\n                <span class=\"rtv-week-day\" [class.active]=\"item.isToday\">{{item.day}}</span> <span>\r\n                    {{ 'appointment.weeks.' + item.week | locale}}</span>\r\n            </div>\r\n        </div>\r\n       \r\n           \r\n    </div>\r\n\r\n</div>\r\n<div class=\"body win11Scroll nobtn\" #body style=\"padding-bottom: 15px\">\r\n\r\n    <div class=\"room-row\" *ngFor=\"let room of data\" [attr.style]=\"'width: ' +  width + 'px!important; height:' + calendarRef.weekRowHeight + 'px' | safe: 'style'\">\r\n\r\n        <div class=\"room-cell roomname fixed-left\" [style.width.px]=\"calendarRef.placeNameWidth\">\r\n            <span *ngIf=\"!calendarRef.placeNameTemplate\">{{ room.data[calendarRef.placeNameField] }}</span>\r\n            <ng-container [ngTemplateOutlet]=\"calendarRef.placeNameTemplate\" [ngTemplateOutletContext]=\"{ $implicit: {data: room.data}, item: room.data }\"></ng-container>        \r\n        </div>\r\n        <div style=\"flex: 7;display: flex;\">\r\n            <div class=\"room-cell time-cell win11Scroll nobtn\" *ngFor=\"let res of room?.reserves\" style=\"align-items: start;\" [style.width.px]=\"calendarRef.weekCellWidth\">\r\n                <div style=\"width: 100%;overflow: hidden;\" class=\"p-1\" *ngIf=\"res.items && res.items.length\">\r\n                    <ul style=\"list-style: none;word-break: keep-all;\">\r\n                        <li class=\"week-day-subject mb-1\" *ngFor=\"let item of res.items\" \r\n                            [class.selected]=\"activeItem && activeItem.id === item.id\" (mousedown)=\"onMouseDown($event)\" (mouseup)=\"onMouseUp($event)\"\r\n                            (click)=\"onSubjectClick($event, item)\" [item-dblclick]=\"item\" (dblclickHandler)=\"ondblClick($event)\">\r\n                            <div style=\"display: flex;flex-direction: row;\" class=\"rtv-week-day-item\">\r\n                                <div style=\"flex-grow: 1;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\" title=\"{{ calendarRef.reserveInfoFields.title | getvalue: item.data }}\">\r\n                                    {{ calendarRef.utils.getValue(calendarRef.reserveInfoFields.title || 'title', item.data) }}\r\n                                </div>\r\n                                <div  style=\"flex: none;text-align: right; padding-left: 3px;\">\r\n                                    {{ item.data[calendarRef.reserveInfoFields.startDate] | dateformat: 'HH:mm'}}\r\n                                </div>\r\n                            </div>                        \r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n",
                encapsulation: ViewEncapsulation.None
            }] }
];
/** @nocollapse */
WeekViewComponent.ctorParameters = () => [
    { type: Injector },
    { type: NgZone },
    { type: AppointmentCalendarComponent }
];
WeekViewComponent.propDecorators = {
    weekDays: [{ type: Input }],
    width: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    WeekViewComponent.prototype.weekDays;
    /** @type {?} */
    WeekViewComponent.prototype.width;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vlay12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvYXBwb2ludG1lbnQtY2FsZW5kYXIvIiwic291cmNlcyI6WyJsaWIvdmlld3Mvd2Vlay12aWV3LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV0RixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUNqRixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBUTFELE1BQU0sT0FBTyxpQkFBa0IsU0FBUSxpQkFBaUI7Ozs7OztJQUtwRCxZQUFZLFFBQWtCLEVBQUUsTUFBYyxFQUFFLFdBQXlDO1FBQ3JGLEtBQUssQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFBO1FBSi9CLGFBQVEsR0FBdUIsRUFBRSxDQUFDO0lBSzNDLENBQUM7Ozs7O0lBRUQsYUFBYSxDQUFDLEVBQVE7O1lBQ2QsR0FBRyxHQUFHLEVBQUU7UUFDWixJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ0wsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDdkI7UUFDRCxJQUFJLEdBQUcsRUFBRTs7a0JBQ0MsR0FBRyxHQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc7Ozs7WUFBQyxDQUFDLENBQU0sRUFBQyxFQUFFLENBQUEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHOzs7O1lBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFDLEVBQUMsQ0FBQztZQUMzRSxJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJOzs7O1lBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsRUFBQyxDQUFDO1NBQ3pEO0lBQ0wsQ0FBQzs7O1lBeEJKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsV0FBVztnQkFDckIsMHlHQUF1QztnQkFDdkMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7YUFDeEM7Ozs7WUFWbUIsUUFBUTtZQUFTLE1BQU07WUFFbEMsNEJBQTRCOzs7dUJBWWhDLEtBQUs7b0JBQ0wsS0FBSzs7OztJQUROLHFDQUEyQzs7SUFDM0Msa0NBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEluamVjdG9yLCBJbnB1dCwgTmdab25lLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBXZWVrRGF5SXRlbSB9IGZyb20gJy4uL21vZGVscy9jYWxlbmRheS50eXBlcyc7XHJcbmltcG9ydCB7IEFwcG9pbnRtZW50Q2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuLi9hcHBvaW50bWVudC1jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgQmFzZVZpZXdDb21wb25lbnQgfSBmcm9tICcuL2Jhc2Uudmlldy5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3dlZWstdmlldycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ3dlZWstdmlldy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1ZpZXdDb21wb25lbnQgZXh0ZW5kcyBCYXNlVmlld0NvbXBvbmVudCB7XHJcblxyXG4gICAgQElucHV0KCkgd2Vla0RheXM6IEFycmF5PFdlZWtEYXlJdGVtPiA9IFtdO1xyXG4gICAgQElucHV0KCkgd2lkdGg7IFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluamVjdG9yOiBJbmplY3Rvciwgbmd6b25lOiBOZ1pvbmUsIGNhbGVuZGFyUmVmOiBBcHBvaW50bWVudENhbGVuZGFyQ29tcG9uZW50KSB7XHJcbiAgICAgICAgc3VwZXIoaW5qZWN0b3IsIG5nem9uZSwgY2FsZW5kYXJSZWYpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWN0aXZlSXRlbShpZD86IGFueSkge1xyXG4gICAgICAgIGxldCBfaWQgPSBpZDtcclxuICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgIF9pZCA9IHRoaXMuc2VsZWN0SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfaWQpIHtcclxuICAgICAgICAgICAgY29uc3QgYXJyID0gIGZsYXR0ZW4odGhpcy5kYXRhLm1hcCgobjogYW55KT0+bi5yZXNlcnZlcy5tYXAodCA9PiB0Lml0ZW1zKSkpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW0gPSBmbGF0dGVuKGFycikuZmluZChuID0+IG4uaWQgPT0gX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=