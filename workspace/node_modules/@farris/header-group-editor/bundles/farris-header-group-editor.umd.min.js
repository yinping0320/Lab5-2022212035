!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@farris/ui-modal"),require("@angular/core"),require("@farris/ui-treetable"),require("@farris/ui-messager"),require("lodash-es"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@farris/header-group-editor",["exports","@farris/ui-modal","@angular/core","@farris/ui-treetable","@farris/ui-messager","lodash-es","@angular/forms","@angular/common"],t):t(((e=e||self).farris=e.farris||{},e.farris["header-group-editor"]={}),e.uiModal,e.ng.core,e.uiTreetable,e.uiMessager,e.lodashEs,e.ng.forms,e.ng.common)}(this,function(e,t,n,r,o,i,a,s){"use strict";var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var p=function(){function e(e){this.cd=e,this.fields=[],this.checkeds=[],this.uncheckeds=[],this.childs=[],this.checkedPropertyName="__checked__",this.hxl=[]}return e.prototype.ngOnInit=function(){this.initCheckedProperty(),this.childs=Array.from(this.checkeds),this.groupEditorRef&&(this.hxl=this.groupEditorRef.getHouXuanLie(),this.hxl.length&&(this.hxl=this.hxl.map(function(e){return e.data})))},e.prototype.initCheckedProperty=function(){var e=this;this.checkeds?this.fields.forEach(function(t){t[e.checkedPropertyName]=e.isChecked(t)}):(this.checkeds=[],this.fields.forEach(function(t){t[e.checkedPropertyName]=!1}))},e.prototype.checkedCols=function(e){var t=this;if(!this.isDisabled(e)){var n=this.isChecked(e);e[this.checkedPropertyName]=!n;var r=this.fields.filter(function(e){return!t.isDisabled(e)});this.checkeds=r.filter(function(e){return e[t.checkedPropertyName]}),this.uncheckeds=r.filter(function(e){return!e[t.checkedPropertyName]}),this.cd.detectChanges()}},e.prototype.isChecked=function(e){var t=!1;return this.checkeds&&this.checkeds.length&&(t=this.checkeds.findIndex(function(t){return t.id===e.id})>-1),t},e.prototype.isDisabled=function(e){var t=this.childs;return this.hxl&&this.hxl.length&&(t=t.concat(this.hxl)),!(t.findIndex(function(t){return t.id===e.id})>-1)},e.decorators=[{type:n.Component,args:[{selector:"select-columns",template:'\n    <div style="margin: 10px 20px" class="row">\n        <div class="custom-control custom-checkbox col-4" *ngFor="let f of fields">\n            <input type="checkbox" class="custom-control-input" [checked]="isChecked(f)" [disabled]="isDisabled(f)">\n            <label class="custom-control-label" (click)="checkedCols(f)" >{{ f.caption }}</label>\n        </div>\n    </div>\n    '}]}],e.ctorParameters=function(){return[{type:n.ChangeDetectorRef}]},e.propDecorators={fields:[{type:n.Input}]},e}(),u=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:n.Component,args:[{selector:"group-header-form",template:'\n        <input type="text" [(ngModel)]="title" style=" margin: 10px; width: 280px; margin-top: 30px;">\n    '}]}],e.ctorParameters=function(){return[]},e.propDecorators={title:[{type:n.Input}]},e}(),f=function(){function e(e,t){this.injector=e,this.modalService=t,this.idField="id",this.treeData=[],this.selectedNode=new n.EventEmitter,this.groupCols=[],this.HOU_XUN_LIE_ID="__HOU_XUN_LIE_ID__"}return e.prototype.ngOnInit=function(){var e=this;if(this.treeData&&this.treeData.length){var t=this.treeData.filter(function(e){return e.fieldRef}).map(function(e){return e.fieldRef}),n=this.fields.filter(function(e){return!t.includes(e.id)});n&&n.length&&(this.treeData=this.treeData.concat(n.map(function(e){return{fieldRef:e.id,parent:"__HOU_XUN_LIE_ID__",level:1}}))),this.treeData=this.treeData.map(function(t){if(!t.fieldRef)return t;var n=e.fields.find(function(e){return e.id===t.fieldRef});return n?l({},n,{parent:t.parent}):void 0}).filter(function(e){return e}),this.treeData=this.convert2TreeNodes(this.treeData)}else this.initTreeData();this.tt.removed.subscribe(function(t){if(!t.node.data.groupHeader){var n=e.getHxl();t.parent||(e.treeData=e.treeData.filter(function(e){return e.data.id!==t.id})),e.tt.append(t.node.data,n.node)}})},e.prototype.initTreeData=function(){this.treeData=[{data:{id:"groupHeader_1",caption:"分组表头1",halign:"left",groupHeader:!0},children:this.fields.map(function(e,t){return e.index=t,{data:e,children:[],visible:!0}}),expanded:!0,visible:!0},{data:{id:this.HOU_XUN_LIE_ID,caption:"(候选列)",houxunquNode:!0},children:[],expanded:!0}]},e.prototype.getHxl=function(){return this.tt.findRowNode(this.HOU_XUN_LIE_ID)},e.prototype.onMouseEnter=function(e){e.target.querySelector(".rbtn").style.display="inline-block"},e.prototype.onMouseLeave=function(e){e.target.querySelector(".rbtn").style.display="none"},e.prototype.removeColumn=function(e,t){this.tt.remove(t.id)},e.prototype.editGroupName=function(e){var t=this.showDialog(function(){var n=t.content;n.title?(e.caption=n.title,t.close()):alert("请输入名称！否则点取消。")});t.content.title=e.caption},e.prototype.generateGroupHeaderId=function(){return"groupHeader_"+(new Date).getTime()},e.prototype.addNewGroup=function(e,t,n){var r=this;void 0===n&&(n=!1);var o=this.showDialog(function(){var e=o.content;e.title?(t?r.createNewGroupHeader(t,e.title,n):(r.treeData.splice(0,0,{data:{id:r.generateGroupHeaderId(),halign:"left",caption:e.title,groupHeader:!0},icon:"f-icon f-icon-aggregate-fields",children:[]}),r.tt.updateSerializedValue()),o.close()):alert("请输入名称！否则点取消。")})},e.prototype.setColumn2Group=function(e,t){var n=this.treeData.length-1;this.treeData.splice(n,0,{data:t,children:[]});var r=this.treeData.find(function(e){return e.data.houxunquNode});r.children=r.children.filter(function(e){return e.data.id!==t.id}),this.tt.updateSerializedValue()},e.prototype.removeGroup=function(e,t){var n=this.tt.serializedValue.filter(function(e){return e.parents.indexOf(t.id)>-1&&!e.node.data.groupHeader}).map(function(e){return e.node});this.treeData=this.treeData.filter(function(e){return e.data.id!==t.id}),this.tt.remove(t.id),this.tt.appendChildren(n,this.getHxl().node)},e.prototype.setColumns=function(e,t){var n=this,r=t.node.children?t.node.children.map(function(e){return e.data}):[],o=this.showSelectColumnsDialog(function(){var e=o.content,r=e.checkeds,i=n.tt.findRowNode(n.HOU_XUN_LIE_ID);if(i.node.children=(i.node.children||[]).filter(function(e){return-1===r.findIndex(function(t){return t.id===e.id})}),t.node.children=t.node.children||[],(r=r.filter(function(e){return-1===t.node.children.findIndex(function(t){return t.id===e.id})}))&&r.length&&(n.tt.appendChildren(r.map(function(e){return{data:e,children:[],expanded:!0}}),t.node),n.tt.expandNode(t.id)),e.uncheckeds&&e.uncheckeds.length){var a=e.uncheckeds.map(function(e){return{data:e,children:[]}});i.node.children=i.node.children.filter(function(t){return-1===e.uncheckeds.findIndex(function(e){return e.id===t.id})}),n.tt.appendChildren(a,i.node)}o.close()},r)},e.prototype.hasGroupHeader=function(e){return void 0===e&&(e=null),e?e.node.children.filter(function(e){return e.data.groupHeader}).length:this.treeData.filter(function(e){return e.groupHeader}).length},e.prototype.moveUp=function(e,t){var n=this.treeData;t.parent&&(n=t.parent.children);var r=n.findIndex(function(e){return e.data.id===t.id});if(0!==r){var o=n.splice(r,1);n.splice.apply(n,c([r-1,0],o)),this.tt.updateSerializedValue()}},e.prototype.moveDown=function(e,t){var n=this.treeData;t.parent&&(n=t.parent.children);var r=n.findIndex(function(e){return e.data.id===t.id});if(r!==n.length-2){var o=n.splice(r,1);n.splice.apply(n,c([r+1,0],o)),this.tt.updateSerializedValue()}else this.moveBottom(e,t)},e.prototype.moveTop=function(e,t){var n=this.treeData;t.parent&&(n=t.parent.children);var r=n.findIndex(function(e){return e.data.id===t.id});n.unshift(t.node),n.splice(r+1,1),this.tt.updateSerializedValue()},e.prototype.moveBottom=function(e,t){var n=this.treeData;t.parent&&(n=t.parent.children);var r=n.findIndex(function(e){return e.data.id===t.id});n.push(t.node),n.splice(r,1),t.parent?this.tt.updateSerializedValue():this.moveUp(e,t)},e.prototype.getHouXuanLie=function(){return this.treeData.find(function(e){return e.data.houxunquNode}).children},e.prototype.getAllNodes=function(){var e=this.getHouXuanLie();return this.tt.serializedValue.filter(function(t){return!t.node.data.houxunquNode&&-1===e.findIndex(function(e){return e.data.id===t.id})})},e.prototype.convert2TreeNodes=function(e,t){var n=this;return void 0===t&&(t=null),e.length?e.filter(function(e){return e.parent===t}).filter(function(e){return e}).map(function(t){var r={data:t,children:[],expanded:!0};return r.children=n.convert2TreeNodes(e,t.id),r.data.groupHeader&&0===r.children.length&&(r.icon="f-icon f-icon-aggregate-fields"),r}):[]},e.prototype.flatNodes=function(e){var t=this,n={};return e.forEach(function(e){n[e.data.id]=e.data,e.children&&e.children.length&&(n=Object.assign(n,t.flatNodes(e.children)))}),n},e.prototype.convert2Array=function(e){for(var t,n,r=[],o=(t=e,n=function(e){return e.level},Math.max.apply(Math,c(t.map("function"==typeof n?n:function(e){return e[n]})))),i=function(t){r.push(e.filter(function(e){return e.level===t}).map(function(t){var n=t.node.data;return{colspan:(t.node.children?e.filter(function(e){return e.parents.indexOf(t.id)>-1&&-1==e.id.indexOf("groupHeader_")}).length:1)||1,rowspan:t.node.children&&t.node.children.length>0?1:o-t.level+1,title:n.caption,field:n.dataField,width:n.size?n.size.width:100,halign:n.halign,align:n.align,id:t.id}}))},a=0;a<=o;a++)i(a);return r},e.prototype.onTreeSelected=function(e){this.selectedNode.emit(e.node)},e.prototype.createNewGroupHeader=function(e,t,n){void 0===n&&(n=!1);var r={data:{id:this.generateGroupHeaderId(),caption:t,groupHeader:!0,halign:"left"},children:[],expanded:!0,visible:!0,icon:"f-icon f-icon-aggregate-fields"};if(n)this.tt.appendChildren([r],e.node);else if(e.parent)this.tt.appendChildren([r],e.parent);else{var o=this.treeData.findIndex(function(t){return t.data.id===e.id})+1;this.treeData.splice(o,0,r),this.treeData=this.treeData.slice()}},e.prototype.showSelectColumnsDialog=function(e,t){var n=this.modalService.show(p,{title:"设置分组列",width:500,height:300,showMaxButton:!1,resizable:!1,initialState:{fields:this.fields,checkeds:t,groupEditorRef:this},buttons:[{text:"确定",cls:"btn btn-primary",handle:e},{text:"取消",cls:"btn btn-secondary",handle:function(){n.close()}}]});return n},e.prototype.showDialog=function(e){var t=this.modalService.show(u,{title:"分组列名称",width:300,height:200,showMaxButton:!1,resizable:!1,initialState:{title:"分组表头"},buttons:[{text:"确定",cls:"btn btn-primary",handle:e},{text:"取消",cls:"btn btn-secondary",handle:function(){t.close()}}]});return t},e.decorators=[{type:n.Component,args:[{selector:"header-group-editor",template:'\r\n\r\n\r\n<farris-treetable #tt [data]="treeData" [idField]="idField" [striped]="false"\r\n(nodeSelected)="onTreeSelected($event)"\r\n[singleSelect]="true" [showIcon]="true" [showFilterBar]="false" [selectOnCheck]="true" [checkOnSelect]="true"\r\n[collapseIcon]="\'f-icon f-icon-file-folder-close\'" [expandIcon]="\'f-icon f-icon-file-folder-open\'"\r\n>\r\n    <ng-template farrisTemplate="body" let-rowNode let-treeNode="node" let-rowData="rowData" >\r\n        <tr #row="row" [selectRow]="rowNode" [dblclick]="true" (mouseenter)="onMouseEnter($event)"\r\n                [selectRowDisabled]="rowData[\'houxunquNode\']"\r\n             (mouseleave)="onMouseLeave($event)">\r\n            <td style="border: 0;" [style.color]="row.selectRowDisabled? \'#a6a6a6\': \'#333\'" [style.height.px]="34" [style.lingHeight.px]="34">\r\n                <farris-treeTableToggler [rowNode]="rowNode"></farris-treeTableToggler>\r\n                <span style="vertical-align: middle;">{{ rowData[\'caption\'] }}</span>\r\n                <div class="rbtn" style=" float: right;  display:none; cursor: pointer" >\r\n                    \x3c!-- 自定义表头 --\x3e\r\n                    <ng-container  *ngIf="rowData[\'groupHeader\']">\r\n                        <move-buttons [rowNode]="rowNode"></move-buttons>\r\n                        <button  class="btn btn-light mr-1" style="padding: 2px 5px" title="增加同级" (click)="addNewGroup($event, rowNode)">\r\n                            <span class="f-icon f-icon-plus"></span>\r\n                        </button>\r\n                        <button class="btn btn-light mr-1" style="padding: 2px 5px" title="增加下级" (click)="addNewGroup($event, rowNode, true)">\r\n                            <span class="f-icon f-icon-plus-outline"></span>\r\n                        </button>\r\n                        \r\n                        \x3c!-- <button  class="btn btn-light mr-1" style="padding: 2px 5px"  (click)="editGroupName(rowData)" title="修改">\r\n                            <span class="f-icon f-icon-edit"></span>\r\n                        </button> --\x3e\r\n\r\n                        <button  class="btn btn-light mr-1" style="padding: 2px 5px" (click)="setColumns($event, rowNode)" title="列设置">\r\n                            <span class="f-icon f-icon-table-insert"></span>\r\n                        </button>\r\n\r\n                        <button class="btn btn-light" style="padding: 2px 5px" title="删除分组" (click)="removeGroup($event, rowNode)">\r\n                            <span class="f-icon f-icon-x"></span>\r\n                        </button>\r\n                        \r\n                    </ng-container>\r\n\r\n                    \x3c!-- 数据字段表头 --\x3e\r\n                    <ng-container *ngIf="!rowNode.parent && !rowData[\'houxunquNode\'] && !rowData[\'groupHeader\']">\r\n                        <move-buttons  [rowNode]="rowNode"></move-buttons>\r\n                        <button class="btn btn-light"  style="padding: 2px 5px" title="将此字段在此分组中移除" (click)="removeColumn($event, rowData)">\r\n                            <span class="f-icon f-icon-x"></span>\r\n                        </button>\r\n                    </ng-container>\r\n                    \r\n                    \x3c!-- 候选列中按钮 --\x3e\r\n                    <button title="增加表头" class="btn btn-light"  style="padding: 2px 5px" *ngIf="rowData[\'houxunquNode\']" (click)="addNewGroup($event, null)">\r\n                        <span class="f-icon f-icon-plus"></span>\r\n                    </button>\r\n\r\n                    <button class="btn btn-light" title="设为表头" style="padding: 2px 5px" *ngIf="rowNode.parent && rowNode.parent.data[\'houxunquNode\']" (click)="setColumn2Group($event, rowData)">\r\n                        <span class="f-icon f-icon-table-row-insert-above"></span>\r\n                    </button>\r\n\r\n                    \x3c!-- 表头中字段按钮 --\x3e\r\n                    <ng-container *ngIf="!rowData[\'groupHeader\'] && rowNode.parent && !rowNode.parent.data[\'houxunquNode\']">\r\n                        <move-buttons  [rowNode]="rowNode"></move-buttons>\r\n                        <button class="btn btn-light"  style="padding: 2px 5px" title="将此字段在此分组中移除" (click)="removeColumn($event, rowData)">\r\n                            <span class="f-icon f-icon-x"></span>\r\n                        </button>\r\n                    </ng-container>\r\n                </div>\r\n\r\n            </td>\r\n        </tr>\r\n    </ng-template>\r\n</farris-treetable>\r\n',encapsulation:n.ViewEncapsulation.None,styles:["\n    .farris-treetable .farris-treetable-tbody td .treetable-toggler {\n        vertical-align: middle;\n    }\n    .farris-treetable .farris-treetable-tbody td .treenode-icon {\n        margin-right: 2px\n    }\n    "]}]}],e.ctorParameters=function(){return[{type:n.Injector},{type:t.BsModalService}]},e.propDecorators={fields:[{type:n.Input}],idField:[{type:n.Input}],treeData:[{type:n.Input}],tt:[{type:n.ViewChild,args:["tt"]}],selectedNode:[{type:n.Output}]},e}(),h=function(){function e(e,t,r,o){this.render=e,this.messagerSer=t,this.injector=r,this.modalSer=o,this.editorParams={},this.cls="f-utils-absolute-all",this.closeModal=new n.EventEmitter,this.submitModal=new n.EventEmitter,this.previewGroupColumns=[],this.columnsCode=[],this.btnTopActive=!0,this.btnBottomActive=!0,this.isOpen=!1,this.fieldInfo={},this.modalConfig={title:"多表头编辑器",width:700,height:500,showButtons:!0}}return e.prototype.ngOnInit=function(){this.fields&&this.fields.length||(this.editorParams&&this.editorParams.fields&&this.editorParams.fields.length?this.fields=this.editorParams.fields:console.warn("Pleasy Set Datagrid's fields Give it 2 me."))},e.prototype.onTreenodeSelect=function(e){this.fieldInfo=e.data},e.prototype.setPreviewColumns=function(){var e=this.hge.getAllNodes();this.previewGroupColumns=this.hge.convert2Array(e)},e.prototype.showPreview=function(){this.setPreviewColumns(),this.isOpen||(this.isOpen=!0)},e.prototype.closePreview=function(e){this.isOpen=!1,e&&e.stopPropagation()},e.prototype.resetGroupColumns=function(){var e=this;this.messagerSer.question("表头分组重置后需要重新设置。确定要重置为初始状态吗？",function(){e.hge.initTreeData()})},e.prototype.cancle=function(){this.closeModal.emit()},e.prototype.ok=function(){this.setPreviewColumns();var e=i.flatten(this.previewGroupColumns),t=this.hge.tt.serializedValue.map(function(t){var n=t.parent?t.parent.data.id:null;if(t.node.data.groupHeader||t.node.data.houxunquNode){var r=e.find(function(e){return e.id===t.id}),o=l({},t.node.data,{parent:n,level:t.level});return r?Object.assign(o,{rowspan:r?r.rowspan:1,colspan:r?r.colspan:1}):o}return{fieldRef:t.node.data.id,parent:n,level:t.level}});this.submitModal.emit({value:t})},e.prototype.showCode=function(){var e=this.hge.getAllNodes();this.columnsCode=this.hge.convert2Array(e),this.modalSer.show(this.codeTemplate,{title:"表头分组代码",width:500,height:400,resizable:!1,showMaxButton:!1,showButtons:!1})},e.decorators=[{type:n.Component,args:[{selector:"column-group-editor",template:'\r\n<div class="d-flex flex-column" style="height: 100%">\r\n        <div region="north" class="north" style="height: 40px;min-height: 40px;border-bottom: 1px solid #c8c8c8; line-height: 36px;">\r\n            <button class="btn btn-primary mr-1 ml-2" (click)="resetGroupColumns()">\r\n                <span class="f-icon f-icon-reset-sm mr-1"></span>重置\r\n            </button>\r\n            <button class="btn btn-primary mr-1" (click)="showPreview()">\r\n                <span class="f-icon f-icon-preview  mr-1"></span>效果预览\r\n            </button>\r\n            <button class="btn btn-primary" (click)="showCode()">\r\n                <span class="f-icon f-icon-source-code mr-1"></span>获取代码\r\n            </button>\r\n        </div>\r\n        <div region="center" class="center flex-fill" style="overflow:auto;height: 100%;">\r\n            <div class="d-flex flex-row flex-fill" style="height: 100%" >\r\n                <div region="center" class="center flex-fill" style="overflow:auto;">\r\n                    <header-group-editor #hge [fields]="fields" [treeData]="value" (selectedNode)="onTreenodeSelect($event)"></header-group-editor>\r\n                </div>\r\n                <div region="east" class="east property-column">\r\n\r\n                    <div style="padding: 10px">\r\n                            <div class="farris-group-wrap">\r\n                                <div class="form-group farris-form-group">\r\n                                    <label for="hpinput01" class="col-form-label">\r\n                                        <span class="farris-label-text">表头名称</span>\r\n                                    </label>\r\n                                    <div class="farris-input-wrap">\r\n                                        <input type="input" [disabled]="!fieldInfo.groupHeader" class="form-control" [(ngModel)]="fieldInfo.caption">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="farris-group-wrap" *ngIf="fieldInfo.groupHeader">\r\n                                <div class="form-group farris-form-group">\r\n                                    <label for="hpinput01" class="col-form-label">\r\n                                        <span class="farris-label-text">表头对齐方式</span>\r\n                                    </label>\r\n                                    <div class="farris-input-wrap">\r\n                                        <select class="form-control" [(ngModel)]="fieldInfo.halign">\r\n                                            <option value="left">左对齐</option>\r\n                                            <option value="center">居中对齐</option>\r\n                                            <option value="right">右对齐</option>\r\n                                        </select>\r\n                                        \x3c!-- <select class="form-control" *ngIf="!fieldInfo.groupHeader" [(ngModel)]="fieldInfo.hAlign">\r\n                                            <option value="left">左对齐</option>\r\n                                            <option value="center">居中对齐</option>\r\n                                            <option value="right">右对齐</option>\r\n                                        </select> --\x3e\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                     \r\n                             \x3c!-- <div class="farris-group-wrap">\r\n                                <div class="form-group farris-form-group">\r\n                                    <label for="hpinput01" class="col-form-label">\r\n                                        <span class="farris-label-text">数据对齐方式</span>\r\n                                    </label>\r\n                                    <div class="farris-input-wrap">\r\n                                        <select class="form-control" [(ngModel)]="fieldInfo.align">\r\n                                            <option value="left">左对齐</option>\r\n                                            <option value="center">居中对齐</option>\r\n                                            <option value="right">右对齐</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="farris-group-wrap">\r\n                                <div class="form-group farris-form-group">\r\n                                    <label for="hpinput01" class="col-form-label">\r\n                                        <span class="farris-label-text">宽度</span>\r\n                                    </label>\r\n                                    <div class="farris-input-wrap">\r\n                                        <input type="input" class="form-control" [(ngModel)]="fieldInfo.size">\r\n                                    </div>\r\n                                </div>\r\n                            </div> --\x3e\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n       \r\n        <div region="south" class="south" [class.preview-open]="isOpen" #preview>\r\n\r\n            <div class="d-flex flex-column flex-fill" style="height: 100%;">\r\n                <div region="north" class="north preview-title" (click)="isOpen = !isOpen">\r\n                   <span class="text" >效果预览</span> \r\n                   <div class="close-btn" (click)="closePreview($event)">\r\n                        <span class="f-icon f-icon-close"></span>\r\n                   </div>\r\n                </div>\r\n                <div region="center" class="center flex-fill preview-container">\r\n                    <table>\r\n\r\n                        <tr  *ngFor="let cls of previewGroupColumns" style="height: 36px">\r\n                            <ng-container *ngFor="let c of cls">\r\n                                <ng-container *ngIf="c.colspan > 1">\r\n                                    <td [attr.colspan]="c.colspan" [attr.align]="c.halign || \'left\'">{{ c.title }}</td>\r\n                                </ng-container>\r\n\r\n                                <ng-container *ngIf="c.colspan == 1">\r\n                                    <td [style.width.px]="c.width"  [attr.align]="c.halign || \'left\'" [attr.rowspan]="c.rowspan || 1">{{ c.title }}</td>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </tr>\r\n                        \r\n\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n       \r\n</div>\r\n\r\n<ng-template #dlgFooter>\r\n    <div class="btns">\r\n        <button  type="button"  class="btn btn-primary btn-lg px-3" (click)="ok()" > 确定 </button>\r\n        &nbsp;&nbsp;\r\n        <button type="button" class="btn btn-secondary btn-lg px-3" (click)="cancle()" > 取消 </button> \r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #code>\r\n<textarea name="group-columns-code" class="form-control" rows=17>\r\n{{ columnsCode | json }}\r\n</textarea>\r\n</ng-template>\r\n\r\n\r\n',styles:["\n        .center::-webkit-scrollbar { width: 5px; height: 5px}\n        .south::-webkit-scrollbar { width: 5px; height: 5px }\n        .south {\n            height: 40px;\n            min-height: 40px;\n            overflow: hidden;\n            border-top: 1px solid #c8c8c8;\n            background: #F3F8FF;\n            transition: height 0.5s;\n            flex-shrink: 0!important;;\n        }\n        .preview-open {\n            height: 300px;\n        }\n        .preview-container {\n            flex-shrink: 0!important;overflow:auto\n        }\n        .preview-title {\n            height:36px;min-height: 36px; background: #F3F8FF; cursor:pointer;\n        }\n        .preview-title .text {\n            line-height: 36px;font-size: 16px;padding-left: 10px;\n        }\n        .preview-title button {\n            float: right;\n            line-height: 40px;\n            margin-right: 10px;\n        }\n        .preview-container table{\n            width: max-content; margin: 5px; background-color: #efefef; border-color: #adadad;\n        }\n        .preview-container table td{border: 1px solid #c2c2c2;}\n\n        .east.property-column {\n            width: 300px; min-width:260px;border-left: 1px solid #c8c8c8;overflow: auto;background:#F3F8FF\n        }\n        .close-btn {\n            display: inline-block;\n            float: right;\n            line-height: 36px;\n            margin-right: 10px;\n            width: 36px;\n            color: #ccc;\n            text-align: center;\n        }\n        .close-btn:hover {\n            color: red;\n        }\n        "]}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:o.MessagerService},{type:n.Injector},{type:t.BsModalService}]},e.propDecorators={editorParams:[{type:n.Input}],fields:[{type:n.Input}],value:[{type:n.Input}],cls:[{type:n.HostBinding,args:["class"]}],closeModal:[{type:n.Output}],submitModal:[{type:n.Output}],hge:[{type:n.ViewChild,args:["hge"]}],modalFooter:[{type:n.ViewChild,args:["dlgFooter"]}],previewEl:[{type:n.ViewChild,args:["preview"]}],codeTemplate:[{type:n.ViewChild,args:["code"]}]},e}(),g=function(){function e(){}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),v=function(){function e(e){this.hge=e}return e.prototype.ngOnInit=function(){},e.decorators=[{type:n.Component,args:[{selector:"move-buttons",template:'\n    <button class="btn btn-light mr-1" style="padding: 2px 5px" (click)="hge.moveTop($event, rowNode)" title="置顶">\n        <span class="f-icon f-icon-roofing"></span>\n    </button>\n    <button class="btn btn-light mr-1" style="padding: 2px 5px" (click)="hge.moveUp($event, rowNode)" title="上移">\n        <span class="f-icon f-icon-arrow-chevron-up"></span>\n    </button>\n    <button class="btn btn-light mr-1"  style="padding: 2px 5px" (click)="hge.moveDown($event, rowNode)" title="下移">\n        <span class="f-icon f-icon-arrow-chevron-down"></span>\n    </button>\n    <button class="btn btn-light mr-1" style="padding: 2px 5px" (click)="hge.moveBottom($event, rowNode)" title="置底">\n        <span class="f-icon f-icon-bottomsetting"></span>\n    </button>\n    '}]}],e.ctorParameters=function(){return[{type:f}]},e.propDecorators={rowNode:[{type:n.Input}]},e}(),m=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[f,u,p,h,v],imports:[s.CommonModule,a.FormsModule,o.MessagerModule.forRoot(),r.TreeTableModule,t.ModalModule.forRoot()],entryComponents:[u,p],exports:[f,h]}]}],e}();e.ColumnGroupEditorComponent=h,e.GroupHeaderFormComponent=u,e.HeaderGroupEditorComponent=f,e.HeaderGroupEditorModule=m,e.HeaderGroupEditorService=g,e.MoveButtonsComponent=v,e.SelectColumnsComponent=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-header-group-editor.umd.min.js.map