/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Pipe } from '@angular/core';
export class FilterHighlightSearchPipe {
    /**
     * @param {?} value
     * @param {?=} args
     * @return {?}
     */
    transform(value, args) {
        /** @type {?} */
        const needMatchValue = args;
        // 用户在input框输入的值
        /** @type {?} */
        let endValue = value;
        // 最终处理好并高亮标识的结果
        /** @type {?} */
        const isEnglishReg = new RegExp('^[a-zA-Z]+$');
        if (isEnglishReg.test(needMatchValue)) { // 输入拼音的情况
            endValue = this.getEndMatchedValue(value, needMatchValue, value);
        }
        else {
            /** @type {?} */
            const searchValue = needMatchValue;
            /** @type {?} */
            const regExp = new RegExp(searchValue, 'gi');
            if (regExp.test(value)) {
                endValue = this.getEndMatchedValue(value, needMatchValue, value);
            }
        }
        return endValue;
    }
    /**
     * @param {?} value
     * @param {?} searchValue
     * @param {?} oriValue
     * @return {?}
     */
    getEndMatchedValue(value, searchValue, oriValue) {
        if (searchValue) {
            /** @type {?} */
            let endValue = oriValue;
            /** @type {?} */
            const upperValue = value.toUpperCase();
            /** @type {?} */
            const upperSearch = searchValue.toUpperCase();
            /** @type {?} */
            const matchIndex = upperValue.indexOf(upperSearch);
            if (matchIndex !== -1) {
                // 将匹配到的内容进行高亮标注
                endValue = oriValue.substring(0, matchIndex) +
                    `<span style="color: #FF9800">${oriValue.substring(matchIndex, matchIndex + searchValue.length)}</span>` +
                    oriValue.substring(matchIndex + searchValue.length);
            }
            return endValue;
        }
        else {
            return oriValue;
        }
    }
}
FilterHighlightSearchPipe.decorators = [
    { type: Pipe, args: [{
                name: 'filterHighlightSearchResult',
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0U2VhcmNoLnBpcGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLWZpbHRlci1wYW5lbC8iLCJzb3VyY2VzIjpbImxpYi9oaWdobGlnaHRTZWFyY2gucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFLcEQsTUFBTSxPQUFPLHlCQUF5Qjs7Ozs7O0lBRTdCLFNBQVMsQ0FBQyxLQUFhLEVBQUUsSUFBYTs7Y0FDckMsY0FBYyxHQUFHLElBQUk7OztZQUN2QixRQUFRLEdBQUcsS0FBSzs7O2NBQ2QsWUFBWSxHQUFHLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUM5QyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBTSxVQUFVO1lBQ3JELFFBQVEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxFQUFFLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUNsRTthQUFNOztrQkFDQyxXQUFXLEdBQUcsY0FBYzs7a0JBQzVCLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDO1lBQzVDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDdEIsUUFBUSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsY0FBYyxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQ2xFO1NBQ0Y7UUFDRCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDOzs7Ozs7O0lBRU0sa0JBQWtCLENBQUMsS0FBYSxFQUFFLFdBQW1CLEVBQUUsUUFBZ0I7UUFDNUUsSUFBSSxXQUFXLEVBQUU7O2dCQUNYLFFBQVEsR0FBRyxRQUFROztrQkFDakIsVUFBVSxHQUFHLEtBQUssQ0FBQyxXQUFXLEVBQUU7O2tCQUNoQyxXQUFXLEdBQUcsV0FBVyxDQUFDLFdBQVcsRUFBRTs7a0JBQ3ZDLFVBQVUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztZQUNsRCxJQUFJLFVBQVUsS0FBSyxDQUFDLENBQUMsRUFBRTtnQkFDckIsZ0JBQWdCO2dCQUNoQixRQUFRLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDO29CQUMxQyxnQ0FBZ0MsUUFBUSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsVUFBVSxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUztvQkFDeEcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3ZEO1lBQ0QsT0FBTyxRQUFRLENBQUM7U0FDakI7YUFBTTtZQUNMLE9BQU8sUUFBUSxDQUFDO1NBQ2pCO0lBQ0gsQ0FBQzs7O1lBdENGLElBQUksU0FBQztnQkFDSixJQUFJLEVBQUUsNkJBQTZCO2FBQ3BDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5AUGlwZSh7XHJcbiAgbmFtZTogJ2ZpbHRlckhpZ2hsaWdodFNlYXJjaFJlc3VsdCcsXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVySGlnaGxpZ2h0U2VhcmNoUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG5cclxuICBwdWJsaWMgdHJhbnNmb3JtKHZhbHVlOiBzdHJpbmcsIGFyZ3M/OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbmVlZE1hdGNoVmFsdWUgPSBhcmdzOyAgLy8g55So5oi35ZyoaW5wdXTmoYbovpPlhaXnmoTlgLxcclxuICAgIGxldCBlbmRWYWx1ZSA9IHZhbHVlOyAgLy8g5pyA57uI5aSE55CG5aW95bm26auY5Lqu5qCH6K+G55qE57uT5p6cXHJcbiAgICBjb25zdCBpc0VuZ2xpc2hSZWcgPSBuZXcgUmVnRXhwKCdeW2EtekEtWl0rJCcpO1xyXG4gICAgaWYgKGlzRW5nbGlzaFJlZy50ZXN0KG5lZWRNYXRjaFZhbHVlKSkgeyAgICAgLy8g6L6T5YWl5ou86Z+z55qE5oOF5Ya1XHJcbiAgICAgIGVuZFZhbHVlID0gdGhpcy5nZXRFbmRNYXRjaGVkVmFsdWUodmFsdWUsIG5lZWRNYXRjaFZhbHVlLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9IG5lZWRNYXRjaFZhbHVlO1xyXG4gICAgICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKHNlYXJjaFZhbHVlLCAnZ2knKTsgLy8g5YWo5bGA5Yy56YWN5b+955Wl5aSn5bCP5YaZXHJcbiAgICAgIGlmIChyZWdFeHAudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICBlbmRWYWx1ZSA9IHRoaXMuZ2V0RW5kTWF0Y2hlZFZhbHVlKHZhbHVlLCBuZWVkTWF0Y2hWYWx1ZSwgdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW5kVmFsdWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0RW5kTWF0Y2hlZFZhbHVlKHZhbHVlOiBzdHJpbmcsIHNlYXJjaFZhbHVlOiBzdHJpbmcsIG9yaVZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHNlYXJjaFZhbHVlKSB7XHJcbiAgICAgIGxldCBlbmRWYWx1ZSA9IG9yaVZhbHVlO1xyXG4gICAgICBjb25zdCB1cHBlclZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKTtcclxuICAgICAgY29uc3QgdXBwZXJTZWFyY2ggPSBzZWFyY2hWYWx1ZS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBtYXRjaEluZGV4ID0gdXBwZXJWYWx1ZS5pbmRleE9mKHVwcGVyU2VhcmNoKTtcclxuICAgICAgaWYgKG1hdGNoSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgLy8g5bCG5Yy56YWN5Yiw55qE5YaF5a656L+b6KGM6auY5Lqu5qCH5rOoXHJcbiAgICAgICAgZW5kVmFsdWUgPSBvcmlWYWx1ZS5zdWJzdHJpbmcoMCwgbWF0Y2hJbmRleCkgK1xyXG4gICAgICAgICAgYDxzcGFuIHN0eWxlPVwiY29sb3I6ICNGRjk4MDBcIj4ke29yaVZhbHVlLnN1YnN0cmluZyhtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgc2VhcmNoVmFsdWUubGVuZ3RoKX08L3NwYW4+YCArXHJcbiAgICAgICAgICBvcmlWYWx1ZS5zdWJzdHJpbmcobWF0Y2hJbmRleCArIHNlYXJjaFZhbHVlLmxlbmd0aCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVuZFZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG9yaVZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxufSJdfQ==