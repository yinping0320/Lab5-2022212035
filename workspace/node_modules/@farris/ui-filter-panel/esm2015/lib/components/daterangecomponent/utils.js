/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} num
 * @param {?} showtime
 * @param {?} type
 * @return {?}
 */
export function getLastNumMonth(num, showtime, type) {
    /** @type {?} */
    let now = new Date();
    /** @type {?} */
    let year = now.getFullYear();
    /** @type {?} */
    let month = now.getMonth() + 1;
    //0-11表示1-12月
    /** @type {?} */
    let day = now.getDate();
    /** @type {?} */
    let hour = now.getHours();
    /** @type {?} */
    let min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()
        : new Date().getMinutes();
    /** @type {?} */
    let sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()
        : new Date().getSeconds();
    /** @type {?} */
    let dateObj = {};
    /** @type {?} */
    const time = hour + ':' + min + ':' + sec;
    // dateObj['endTime'] = year + '-' + month + '-' + day;
    /** @type {?} */
    let endMonth = month < 10 ? '0' + month : month;
    /** @type {?} */
    let endDay = day < 10 ? '0' + day : day;
    if (type == '2') {
        dateObj['endTime'] = year + '-' + endMonth;
    }
    else if (type == '3') {
        dateObj['endTime'] = year;
    }
    else {
        dateObj['endTime'] = year + '-' + endMonth + '-' + endDay;
    }
    /** @type {?} */
    let nowMonthDay = new Date(year, month, 0).getDate();
    //当前月的总天数
    /** @type {?} */
    let dYear;
    /** @type {?} */
    let dMouth;
    /** @type {?} */
    let dDay;
    if (month - num <= 0) { //如果是1、2、3月，年数往前推一年
        //如果是1、2、3月，年数往前推一年
        /** @type {?} */
        let lastMonthDay = new Date((year - 1), (12 - (num - month)), 0).getDate();
        if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
            // dateObj['startTime'] = (year - 1) + '-' + (12 - (num - month)) + '-' + lastMonthDay;
            dYear = year - 1;
            dMouth = 12 - (num - month);
            dDay = lastMonthDay;
        }
        else {
            dYear = year - 1;
            dMouth = 12 - (num - month);
            dDay = day;
            // dateObj['startTime']= (year - 1) + '-' + (12 - (num - month)) + '-' + day;
        }
    }
    else {
        /** @type {?} */
        let lastMonthDay = new Date(year, (month - num), 0).getDate();
        if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
            if (day < nowMonthDay) { //当前天日期小于当前月总天数,2月份比较特殊的月份
                // dateObj['startTime'] = year + '-' + (month - num) + '-' + (lastMonthDay - (nowMonthDay - day));
                dYear = year;
                dMouth = month - num;
                dDay = lastMonthDay - (nowMonthDay - day);
            }
            else {
                dYear = year;
                dMouth = month - num;
                dDay = lastMonthDay;
                // dateObj['startTime'] = year + '-' + (month - num) + '-' + lastMonthDay;
            }
        }
        else {
            dYear = year;
            dMouth = month - num;
            dDay = day;
            // dateObj['startTime'] = year + '-' + (month - num) + '-' + day;
        }
    }
    dMouth = dMouth < 10 ? '0' + dMouth : dMouth;
    dDay = dDay < 10 ? '0' + dDay : dDay;
    if (type == '2') {
        dateObj['startTime'] = dYear + '-' + dMouth;
    }
    else if (type == '3') {
        dateObj['startTime'] = dYear;
    }
    else {
        dateObj['startTime'] = dYear + '-' + dMouth + '-' + dDay;
    }
    if (showtime) {
        dateObj['endTime'] = dateObj['endTime'] + ' ' + time;
        dateObj['startTime'] = dateObj['startTime'] + ' ' + time;
    }
    return dateObj;
}
/**
 * @param {?=} dayTags
 * @param {?=} showtime
 * @return {?}
 */
export function getToday(dayTags = 'today', showtime) {
    /** @type {?} */
    let now = new Date();
    /** @type {?} */
    let year = now.getFullYear();
    /** @type {?} */
    let month = now.getMonth() + 1;
    //0-11表示1-12月
    /** @type {?} */
    let day = now.getDate();
    /** @type {?} */
    let hour = now.getHours();
    /** @type {?} */
    let min = now.getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();
    /** @type {?} */
    let sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();
    /** @type {?} */
    const time = hour + ':' + min + ':' + sec;
    /** @type {?} */
    let yesterday = new Date();
    yesterday.setTime(now.getTime() - 24 * 60 * 60 * 1000);
    /** @type {?} */
    let yesterdayMonth = yesterday.getMonth() + 1;
    /** @type {?} */
    let yesterdayDate = yesterday.getDate();
    /** @type {?} */
    let yesterdayObj = yesterday.getFullYear() + "-" + (yesterdayMonth < 10 ? `0${yesterdayMonth}` : yesterdayMonth) + "-" + (yesterdayDate < 10 ? `0${yesterdayDate}` : yesterdayDate);
    /** @type {?} */
    let dateObj = year + '-' + (month < 10 ? `0${month}` : month) + '-' + (day < 10 ? `0${day}` : day);
    if (showtime) {
        dateObj = dateObj + ' ' + time;
        yesterdayObj = yesterdayObj + ' ' + time;
    }
    if (dayTags == 'today')
        return dateObj;
    else if (dayTags == 'yesterday')
        return yesterdayObj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLWZpbHRlci1wYW5lbC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2RhdGVyYW5nZWNvbXBvbmVudC91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBTSxVQUFVLGVBQWUsQ0FBQyxHQUFVLEVBQUMsUUFBUSxFQUFDLElBQVc7O1FBQ3ZELEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRTs7UUFDaEIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxXQUFXLEVBQUU7O1FBQ3hCLEtBQUssR0FBRyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQzs7O1FBQzFCLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxFQUFFOztRQUNuQixJQUFJLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRTs7UUFDckIsR0FBRyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRTtRQUMzRCxDQUFDLENBQUEsSUFBSSxJQUFJLEVBQUUsQ0FBQyxVQUFVLEVBQUU7O1FBQ3RCLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsVUFBVSxFQUFFO1FBQ3BFLENBQUMsQ0FBQSxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRTs7UUFDeEIsT0FBTyxHQUFHLEVBQUU7O1VBQ1YsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHOzs7UUFFckMsUUFBUSxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUs7O1FBQzFDLE1BQU0sR0FBRyxHQUFH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WUFBWSxDQUFDO0FBQ3pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0TGFzdE51bU1vbnRoKG51bTpudW1iZXIsc2hvd3RpbWUsdHlwZTpzdHJpbmcpIHtcclxuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCBtb250aCA9IG5vdy5nZXRNb250aCgpICsgMTsvLzAtMTHooajnpLoxLTEy5pyIXHJcbiAgICBsZXQgZGF5ID0gbm93LmdldERhdGUoKTtcclxuICAgIGxldCBob3VyID0gbm93LmdldEhvdXJzKCk7XHJcbiAgICBsZXQgbWluID0gbm93LmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKClcclxuICAgICAgICA6bmV3IERhdGUoKS5nZXRNaW51dGVzKCk7XHJcbiAgICAgIGxldCBzZWMgPSBuZXcgRGF0ZSgpLmdldFNlY29uZHMoKSA8IDEwID8gJzAnICsgbmV3IERhdGUoKS5nZXRTZWNvbmRzKClcclxuICAgICAgICA6bmV3IERhdGUoKS5nZXRTZWNvbmRzKCk7XHJcbiAgICBsZXQgZGF0ZU9iaiA9IHt9O1xyXG4gICAgY29uc3QgdGltZSA9IGhvdXIgKyAnOicgKyBtaW4gKyAnOicgKyBzZWM7XHJcbiAgICAvLyBkYXRlT2JqWydlbmRUaW1lJ10gPSB5ZWFyICsgJy0nICsgbW9udGggKyAnLScgKyBkYXk7XHJcbiAgICBsZXQgZW5kTW9udGggPSBtb250aCA8IDEwID8gJzAnICttb250aCA6IG1vbnRoO1xyXG4gICAgbGV0IGVuZERheSA9IGRheSA8IDEwID8gJzAnICtkYXkgOiBkYXk7XHJcbiAgICBpZih0eXBlID09ICcyJyl7XHJcbiAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhciArICctJyArIGVuZE1vbnRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0eXBlID09ICczJyl7XHJcbiAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhcjtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhciArICctJyArIGVuZE1vbnRoICsgJy0nICsgZW5kRGF5O1xyXG4gICAgfVxyXG4gICAgICBsZXQgbm93TW9udGhEYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMCkuZ2V0RGF0ZSgpOyAgICAvL+W9k+WJjeaciOeahOaAu+WkqeaVsFxyXG4gICAgbGV0IGRZZWFyLGRNb3V0aCxkRGF5O1xyXG4gICAgaWYobW9udGggLSBudW0gPD0gMCl7IC8v5aaC5p6c5pivMeOAgTLjgIEz5pyI77yM5bm05pWw5b6A5YmN5o6o5LiA5bm0XHJcbiAgICAgICAgbGV0IGxhc3RNb250aERheSA9IG5ldyBEYXRlKCh5ZWFyIC0gMSksICgxMiAtIChudW0gLSBtb250aCkpLCAwKS5nZXREYXRlKCk7ICAgIC8vM+S4quaciOWJjeaJgOWcqOaciOeahOaAu+WkqeaVsFxyXG4gICAgICAgIGlmKGxhc3RNb250aERheSA8IGRheSl7ICAgIC8vM+S4quaciOWJjeaJgOWcqOaciOeahOaAu+WkqeaVsOWwj+S6jueOsOWcqOeahOWkqeaXpeacn1xyXG4gICAgICAgICAgICAvLyBkYXRlT2JqWydzdGFydFRpbWUnXSA9ICh5ZWFyIC0gMSkgKyAnLScgKyAoMTIgLSAobnVtIC0gbW9udGgpKSArICctJyArIGxhc3RNb250aERheTtcclxuICAgICAgICAgICAgZFllYXIgPSB5ZWFyIC0gMTtcclxuICAgICAgICAgICAgZE1vdXRoID0gMTIgLSAobnVtIC0gbW9udGgpO1xyXG4gICAgICAgICAgICBkRGF5ID0gbGFzdE1vbnRoRGF5O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBkWWVhciA9IHllYXIgLSAxO1xyXG4gICAgICAgICAgICBkTW91dGggPSAxMiAtIChudW0gLSBtb250aCk7XHJcbiAgICAgICAgICAgIGREYXkgPSBkYXk7XHJcbiAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddPSAoeWVhciAtIDEpICsgJy0nICsgKDEyIC0gKG51bSAtIG1vbnRoKSkgKyAnLScgKyBkYXk7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgbGV0IGxhc3RNb250aERheSA9IG5ldyBEYXRlKHllYXIsIChtb250aCAtIG51bSksIDApLmdldERhdGUoKTsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWwXHJcbiAgICAgICAgaWYobGFzdE1vbnRoRGF5IDwgZGF5KXsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWw5bCP5LqO546w5Zyo55qE5aSp5pel5pyfXHJcbiAgICAgICAgICAgIGlmKGRheSA8IG5vd01vbnRoRGF5KXsgICAgICAgIC8v5b2T5YmN5aSp5pel5pyf5bCP5LqO5b2T5YmN5pyI5oC75aSp5pWwLDLmnIjku73mr5TovoPnibnmrornmoTmnIjku71cclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0geWVhciArICctJyArIChtb250aCAtIG51bSkgKyAnLScgKyAobGFzdE1vbnRoRGF5IC0gKG5vd01vbnRoRGF5IC0gZGF5KSk7XHJcbiAgICAgICAgICAgICAgICBkWWVhciA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICBkTW91dGggPSBtb250aCAtIG51bTtcclxuICAgICAgICAgICAgICAgIGREYXkgPSBsYXN0TW9udGhEYXkgLSAobm93TW9udGhEYXkgLSBkYXkpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGRZZWFyID0geWVhcjtcclxuICAgICAgICAgICAgICAgIGRNb3V0aCA9IG1vbnRoIC0gbnVtO1xyXG4gICAgICAgICAgICAgICAgZERheSA9IGxhc3RNb250aERheTtcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0geWVhciArICctJyArIChtb250aCAtIG51bSkgKyAnLScgKyBsYXN0TW9udGhEYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZFllYXIgPSB5ZWFyO1xyXG4gICAgICAgICAgICBkTW91dGggPSBtb250aCAtIG51bTtcclxuICAgICAgICAgICAgZERheSA9IGRheTtcclxuICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSB5ZWFyICsgJy0nICsgKG1vbnRoIC0gbnVtKSArICctJyArIGRheTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkTW91dGggPSBkTW91dGggPCAxMCA/ICcwJyArZE1vdXRoIDogZE1vdXRoO1xyXG4gICAgZERheSA9IGREYXkgPCAxMCA/ICcwJyArZERheSA6IGREYXk7XHJcbiAgICBpZih0eXBlID09ICcyJyl7XHJcbiAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkWWVhciArICctJyArIGRNb3V0aDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodHlwZSA9PSAnMycpe1xyXG4gICAgICAgIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0gZFllYXI7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0gZFllYXIgKyAnLScgKyBkTW91dGggKyAnLScgKyBkRGF5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNob3d0aW1lKXtcclxuICAgICAgICBkYXRlT2JqWydlbmRUaW1lJ10gPSBkYXRlT2JqWydlbmRUaW1lJ10gKyAnICcgKyB0aW1lO1xyXG4gICAgICAgIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0gZGF0ZU9ialsnc3RhcnRUaW1lJ10gKyAnICcgKyB0aW1lO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGVPYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2RheShkYXlUYWdzID0gJ3RvZGF5JyxzaG93dGltZSl7XHJcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICBsZXQgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoID0gbm93LmdldE1vbnRoKCkgKyAxOy8vMC0xMeihqOekujEtMTLmnIhcclxuICAgIGxldCBkYXkgPSBub3cuZ2V0RGF0ZSgpO1xyXG4gICAgXHJcbiAgICBsZXQgaG91ciA9IG5vdy5nZXRIb3VycygpO1xyXG4gICAgbGV0IG1pbiA9IG5vdy5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIG5ldyBEYXRlKCkuZ2V0TWludXRlcygpIDpuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKTtcclxuICAgIGxldCBzZWMgPSBuZXcgRGF0ZSgpLmdldFNlY29uZHMoKSA8IDEwID8gJzAnICsgbmV3IERhdGUoKS5nZXRTZWNvbmRzKCkgOiBuZXcgRGF0ZSgpLmdldFNlY29uZHMoKTtcclxuICAgIGNvbnN0IHRpbWUgPSBob3VyICsgJzonICsgbWluICsgJzonICsgc2VjO1xyXG5cclxuICAgIGxldCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgeWVzdGVyZGF5LnNldFRpbWUobm93LmdldFRpbWUoKS0yNCo2MCo2MCoxMDAwKTtcclxuICAgIGxldCB5ZXN0ZXJkYXlNb250aCA9IHllc3RlcmRheS5nZXRNb250aCgpKzE7XHJcbiAgICBsZXQgeWVzdGVyZGF5RGF0ZSA9IHllc3RlcmRheS5nZXREYXRlKCk7XHJcblxyXG4gICAgbGV0IHllc3RlcmRheU9iaiA9IHllc3RlcmRheS5nZXRGdWxsWWVhcigpK1wiLVwiICsgKHllc3RlcmRheU1vbnRoIDwgMTAgPyBgMCR7eWVzdGVyZGF5TW9udGh9YDogeWVzdGVyZGF5TW9udGgpICsgXCItXCIgKyAgKHllc3RlcmRheURhdGUgPCAxMCA/IGAwJHt5ZXN0ZXJkYXlEYXRlfWAgOiB5ZXN0ZXJkYXlEYXRlKTtcclxuICAgIGxldCBkYXRlT2JqID0geWVhciArICctJyArIChtb250aCA8IDEwID8gYDAke21vbnRofWAgOiBtb250aCkrICctJyArICAgKGRheSA8IDEwID8gYDAke2RheX1gIDogZGF5KTtcclxuICAgIGlmKHNob3d0aW1lKXtcclxuICAgICAgICBkYXRlT2JqID0gZGF0ZU9iaiArICcgJyArIHRpbWU7XHJcbiAgICAgICAgeWVzdGVyZGF5T2JqID0geWVzdGVyZGF5T2JqICsgJyAnICsgdGltZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYoZGF5VGFncyA9PSAndG9kYXknKSByZXR1cm4gZGF0ZU9iajtcclxuICAgIGVsc2UgaWYgKGRheVRhZ3MgPT0gJ3llc3RlcmRheScpIHJldHVybiB5ZXN0ZXJkYXlPYmo7XHJcbn0iXX0=