/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, ElementRef, Optional } from '@angular/core';
import { LocaleService } from '@farris/ui-locale';
var PanelfilterCheckboxComponent = /** @class */ (function () {
    function PanelfilterCheckboxComponent(localeService) {
        this.localeService = localeService;
        this.checkedAll = false;
        this.enableSearch = false;
        this.boolcheck = false;
        this.searchHandle = new EventEmitter();
        this.submitChange = new EventEmitter();
        this.indeterminate = true;
        this.boolCheckState = 'indeterminate';
        // 数据源
        this.checkboxDataSource = new Array();
        // 当前查询结果
        this.allCols = new Array();
        // 在当前查询结果的选中值
        this.allColsCheckValue = [];
        //不在当前的查询结果中的选中值
        this.notInCurResult = [];
        // 是否设置查询时候的宽度
        this.hasSetWidthSearching = false;
        // 查询提示
        this.searchPlaceHolder = "请输入名称";
        this.checkallCheckboxDisabled = false;
    }
    Object.defineProperty(PanelfilterCheckboxComponent.prototype, "item", {
        get: /**
         * @return {?}
         */
        function () {
            return this._item;
        },
        set: /**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            this._item = data;
            this.getDataSource();
            //this.checkValue = this._item.value.getOriginalValue();
            if (!this._item.hasOwnProperty('value'))
                this._item.value = { value: [] };
            if (this._item.hasOwnProperty('value')) {
                this.checkValue = this._item.value.value;
                //保存值
                this.allColsCheckValue = this.checkValue;
            }
            else {
                this._item.value.value = [];
            }
            if (this.boolcheck) {
                if (this.checkValue.length) {
                    this.boolchecked = this.checkValue[0];
                    if (this.boolchecked)
                        this.boolCheckState = 'checked';
                    else
                        this.boolCheckState = 'unchecked';
                }
                else
                    this.boolCheckState = 'indeterminate';
            }
            this.enableSearch = data.control.hasOwnProperty("enableSearch") ? data.control.enableSearch : false;
            if (this._item.value.value.length == 0)
                this.checkedAll = false;
            else if (this._item.control['enumValues'] && this._item.value.value.length == this._item.control['enumValues'].length)
                this.checkedAll = true;
            this.setSubmitChange();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.setLocaleData();
    };
    /**
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.getDataSource = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.item && this._item.control) {
            /** @type {?} */
            var checkboxList = (this._item.control);
            this.checkboxDataSource = Array();
            if (checkboxList.enumValues && checkboxList.enumValues.length > 0) {
                checkboxList.enumValues.forEach((/**
                 * @param {?} element
                 * @return {?}
                 */
                function (element) {
                    _this.checkboxDataSource.push(Object.assign({}, element));
                }));
                this.allCols = this.checkboxDataSource;
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.onSearch = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var checkboxValue = [];
        if (event) {
            /** @type {?} */
            var checkboxList = event;
            if (checkboxList && checkboxList.length) {
                checkboxValue = checkboxList;
            }
            this.allColsCheckValue = checkboxValue;
        }
        else {
            this.allColsCheckValue = [];
        }
        this.onlyUpdateCheckValue();
        this.searchResultIsCheckAll();
        this.getValueText();
        this.setSubmitChange();
        this.searchHandle.emit();
    };
    /**
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.getValueText = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var enumValue = (this._item.control).enumValues;
        /** @type {?} */
        var value = (this._item.value).value;
        if (enumValue && enumValue.length && value && value.length) {
            /** @type {?} */
            var texts = [];
            var _loop_1 = function (i) {
                /** @type {?} */
                var enums = enumValue.find((/**
                 * @param {?} val
                 * @return {?}
                 */
                function (val) {
                    return val['value'] == value[i];
                }));
                if (enums) {
                    texts.push(enums['name']);
                }
            };
            for (var i = 0; i <= value.length; i++) {
                _loop_1(i);
            }
            this._item.valueText = texts.join(',');
        }
        else {
            this._item.valueText = '';
        }
    };
    /**
     * 是否可以提交
     */
    /**
     * 是否可以提交
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.setSubmitChange = /**
     * 是否可以提交
     * @return {?}
     */
    function () {
        /** @type {?} */
        var val = this._item.value;
        if (Object.keys(val).length < 0 || Object.keys(val.value).length === 0) {
            this.submitChange.emit(false);
        }
        else {
            this.submitChange.emit(true);
        }
    };
    /**
     * 点击全选Checkbox
     * @param event
     */
    /**
     * 点击全选Checkbox
     * @param {?} event
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.handleClick = /**
     * 点击全选Checkbox
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.checkallCheckboxDisabled) {
            // 全选checkbox是否禁用
            return;
        }
        this.checkedAll = !this.checkedAll;
        if (this.checkedAll) {
            // 全选
            this.setCheckedAll();
        }
        else {
            // 取消全选
            this.setUnCheckedAll();
        }
        this.getValueText();
        this.setSubmitChange();
        this.searchHandle.emit();
    };
    /**
     * 设置全选
     * 23年12月13日--增加过滤，改变此方法
     */
    /**
     * 设置全选
     * 23年12月13日--增加过滤，改变此方法
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.setCheckedAll = /**
     * 设置全选
     * 23年12月13日--增加过滤，改变此方法
     * @return {?}
     */
    function () {
        if (this.allCols && this.allCols.length) {
            /** @type {?} */
            var checkboxValue = [];
            checkboxValue = this.allCols.map((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.value; }));
            this.allColsCheckValue = [].concat(checkboxValue);
            this.onlyUpdateCheckValue();
        }
    };
    /**
     * 取消全选
     */
    /**
     * 取消全选
     * @private
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.setUnCheckedAll = /**
     * 取消全选
     * @private
     * @return {?}
     */
    function () {
        if (this.allCols && this.allCols.length) {
            this.allColsCheckValue = [];
            this.onlyUpdateCheckValue();
        }
    };
    /**
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.handleCheckClick = /**
     * @return {?}
     */
    function () {
        if (this.boolCheckState == 'indeterminate') {
            this.boolCheckState = 'checked';
            this.boolchecked = true;
            this._item.value.value = [true];
        }
        else if (this.boolCheckState == 'checked') {
            this.boolCheckState = 'unchecked';
            this.boolchecked = false;
            this._item.value.value = [false];
        }
        else if (this.boolCheckState == 'unchecked') {
            this.boolCheckState = 'indeterminate';
            this.boolchecked = null;
            this._item.value.value = [];
        }
        this.setSubmitChange();
        this.searchHandle.emit();
    };
    /**
     * 清空查询
     * @param $event
     * @param input
     */
    /**
     * 清空查询
     * @param {?} $event
     * @param {?} input
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.clearSearch = /**
     * 清空查询
     * @param {?} $event
     * @param {?} input
     * @return {?}
     */
    function ($event, input) {
        if (input && input.value) {
            this.filterItems('');
            input.value = '';
        }
    };
    /**
     * 开始查询
     * @param $event
     */
    /**
     * 开始查询
     * @param {?} $event
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.searchItems = /**
     * 开始查询
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var txt = $event.target.value;
        this.filterItems(txt);
    };
    /**
     * @param {?} ev
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.searchInputFocus = /**
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        if (!this.hasSetWidthSearching) {
            /** @type {?} */
            var findParEl = this.searchInput.nativeElement.closest('.checkboxgroup-has-search');
            this.hasSetWidthSearching = true;
            findParEl.style.width = findParEl.offsetWidth + 'px';
        }
    };
    /**
     * 过滤项
     * @param searchWords
     */
    /**
     * 过滤项
     * @private
     * @param {?=} searchWords
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.filterItems = /**
     * 过滤项
     * @private
     * @param {?=} searchWords
     * @return {?}
     */
    function (searchWords) {
        var _this = this;
        if (searchWords === void 0) { searchWords = ''; }
        /** @type {?} */
        var cols = [];
        searchWords = searchWords.trim();
        if (searchWords) {
            /** @type {?} */
            var searchArray_1 = searchWords.split(" ");
            /** @type {?} */
            var tallColsCheckValue_1 = [];
            this.notInCurResult = [];
            cols = this.checkboxDataSource.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var waitSearchStr = item.name.toLowerCase();
                /** @type {?} */
                var curResult = false;
                // 空格做为同一个匹配条件
                /** @type {?} */
                var findNotContain = searchArray_1.findIndex((/**
                 * @param {?} searchStr
                 * @return {?}
                 */
                function (searchStr) {
                    // A B 两个条件过滤
                    if (searchStr == '') {
                        return false;
                    }
                    return waitSearchStr.indexOf(searchStr.toLowerCase()) == -1;
                }));
                curResult = findNotContain == -1;
                if (curResult) {
                    //在查询结果内
                    if (_this.checkValue.some((/**
                     * @param {?} checkItem
                     * @return {?}
                     */
                    function (checkItem) { return checkItem == item.value; }))) {
                        //且在选择的值范围内
                        tallColsCheckValue_1.push(item.value);
                    }
                }
                return curResult;
            }));
            this.allCols = cols;
            this.allColsCheckValue = tallColsCheckValue_1;
            // 不在当前选中的数据
            this.notInCurResult = this.checkValue.filter((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return tallColsCheckValue_1.indexOf(x) === -1; }));
        }
        else {
            this.allCols = this.checkboxDataSource;
            //如果是查询出全部数据
            this.allColsCheckValue = [].concat(this.checkValue);
            this.notInCurResult = [];
        }
        // 更改全选状态
        this.searchResultIsCheckAll();
    };
    /**
     * 查询结果全选的状态
     */
    /**
     * 查询结果全选的状态
     * @private
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.searchResultIsCheckAll = /**
     * 查询结果全选的状态
     * @private
     * @return {?}
     */
    function () {
        // 如果无结果
        if (this.allCols.length == 0) {
            this.checkedAll = false;
            this.checkallCheckboxDisabled = true;
        }
        else {
            if (this.allCols.length > this.allColsCheckValue.length) {
                // 查询结果的长度比已选元素多
                this.checkedAll = false;
            }
            else {
                this.checkedAll = true;
            }
            this.checkallCheckboxDisabled = false;
        }
    };
    /**
     * 更新状态
     */
    /**
     * 更新状态
     * @private
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.onlyUpdateCheckValue = /**
     * 更新状态
     * @private
     * @return {?}
     */
    function () {
        this.checkValue = [].concat(this.allColsCheckValue, this.notInCurResult);
        this._item.value.value = this.checkValue;
    };
    /**
     * @private
     * @return {?}
     */
    PanelfilterCheckboxComponent.prototype.setLocaleData = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.enableSearch && this.localeService) {
            this.searchPlaceHolder = this.localeService.getValue('filterPanel.searchPlaceHolder') || "请输入名称";
        }
    };
    PanelfilterCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'panel-filter-checkbox',
                    template: "<div class=\"f-cmp-inputgroup mb-2\"  *ngIf=\"!boolcheck&&enableSearch\" style=\"position: sticky;z-index: 1;top:0;\">\r\n    <div class=\"input-group\">\r\n        <input #searchInput class=\"form-control\" type=\"text\" [placeholder]=\"searchPlaceHolder\"  (input)=\"searchItems($event)\" (focus)=\"searchInputFocus($event)\"/>\r\n            <div class=\"input-group-append f-cursor-pointer\" (click)=\"clearSearch($event,searchInput)\">\r\n                <span class=\"input-group-text\">\r\n                    <i class=\"f-icon\"  [ngClass]=\"searchInput.value?'f-icon-close':'f-icon-search'\"></i>\r\n                </span>                \r\n            </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"custom-control custom-checkbox custom-control-inline filter-panel-checkbox\" *ngIf=\"!boolcheck\">\r\n    <input type=\"checkbox\" class=\"custom-control-input\"  [checked]=\"checkedAll\" [disabled]=\"checkallCheckboxDisabled\">\r\n    <label class=\"custom-control-label\" (click)=\"handleClick($event)\">{{'filterPanel.checkall'| locale}}</label>\r\n</div>\r\n<ng-container *ngIf=\"!boolcheck; else elseTemplate\">\r\n    <farris-checkboxgroup [value]=\"allColsCheckValue\" [horizontal]=\"false\"\r\n        [data]=\"allCols\" [isStringValue]=\"false\" (changeValue)=\"onSearch($event)\">\r\n    </farris-checkboxgroup>\r\n</ng-container>\r\n<ng-template #elseTemplate>\r\n    <div class=\"custom-control custom-checkbox custom-control-inline filter-bool-checkbox\">\r\n        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"boolchecked\" [indeterminate]=\"boolCheckState == 'indeterminate'\">\r\n        <label class=\"custom-control-label\" (click)=\"handleCheckClick()\">{{item.fieldName || item.name}}</label>\r\n    </div>\r\n</ng-template>\r\n\r\n"
                }] }
    ];
    /** @nocollapse */
    PanelfilterCheckboxComponent.ctorParameters = function () { return [
        { type: LocaleService, decorators: [{ type: Optional }] }
    ]; };
    PanelfilterCheckboxComponent.propDecorators = {
        enableSearch: [{ type: Input }],
        boolcheck: [{ type: Input }],
        item: [{ type: Input }],
        searchInput: [{ type: ViewChild, args: ['searchInput',] }],
        searchHandle: [{ type: Output, args: ['searchHandle',] }],
        submitChange: [{ type: Output, args: ['submitChange',] }]
    };
    return PanelfilterCheckboxComponent;
}());
export { PanelfilterCheckboxComponent };
if (false) {
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.checkedAll;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.enableSearch;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.boolcheck;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype._item;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.searchInput;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.searchHandle;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.submitChange;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.checkValue;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.indeterminate;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.boolchecked;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.boolCheckState;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.checkboxDataSource;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.allCols;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.allColsCheckValue;
    /**
     * @type {?}
     * @private
     */
    PanelfilterCheckboxComponent.prototype.notInCurResult;
    /**
     * @type {?}
     * @private
     */
    PanelfilterCheckboxComponent.prototype.hasSetWidthSearching;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.searchPlaceHolder;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.checkallCheckboxDisabled;
    /** @type {?} */
    PanelfilterCheckboxComponent.prototype.localeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tib3guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1maWx0ZXItcGFuZWwvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9jaGVja2JveGNvbXBvbmVudC9jaGVja2JveC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEgsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xEO0lBeUVJLHNDQUErQixhQUE0QjtRQUE1QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQXhEM0QsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUNuQixpQkFBWSxHQUFHLEtBQUssQ0FBQztRQUNyQixjQUFTLEdBQVksS0FBSyxDQUFDO1FBa0NaLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNsQyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFHMUQsa0JBQWEsR0FBWSxJQUFJLENBQUM7UUFFOUIsbUJBQWMsR0FBVyxlQUFlLENBQUM7O1FBRXpDLHVCQUFrQixHQUFlLElBQUksS0FBSyxFQUFPLENBQUM7O1FBRWxELFlBQU8sR0FBZSxJQUFJLEtBQUssRUFBTyxDQUFDOztRQUV2QyxzQkFBaUIsR0FBTyxFQUFFLENBQUM7O1FBRW5CLG1CQUFjLEdBQU8sRUFBRSxDQUFDOztRQUV4Qix5QkFBb0IsR0FBQyxLQUFLLENBQUM7O1FBRW5DLHNCQUFpQixHQUFDLE9BQU8sQ0FBQztRQUMxQiw2QkFBd0IsR0FBQyxLQUFLLENBQUM7SUFDaUMsQ0FBQztJQXBEakUsc0JBQ0ksOENBQUk7Ozs7UUFEUjtZQUVJLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN0QixDQUFDOzs7OztRQUNELFVBQVMs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RUFBK0I7O0lBQ25CLHFEQUErQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3BhbmVsLWZpbHRlci1jaGVja2JveCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vY2hlY2tib3guY29tcG9uZW50Lmh0bWwnXHJcbn0pXHJcbi8qKlxyXG4gKiDlkKvkuYnor7TmmI5cclxuKiB0aGlzLl9pdGVtXHJcbiAgQeOAgWNvbnRyb2zlsZ7mgKfnmoTlkKvkuYl7XHJcbiAgICBlbnVtVmFsdWVzOuaemuS4vumhueaVsOe7hFt7dmFsdWU65p6a5Li+6aG555qE5YC8LG5hbWU65p6a5Li+6aG555qE5pi+56S65paH5pysfV0sXHJcbiAgICBpc0V4dGVuZDrmmK/lkKbmmL7npLrlnKjmianlsZXpnaLmnb9cclxuICBC44CBdmFsdWUg5bGe5oCnXHJcbiAgICAgdmFsdWUg5a+55bqU5b2T5YmN5aSa6YCJ57uE5Lu255qE5YC8XHJcbiAgQ+OAgXZhbHVlVGV4dCDlsZ7mgKcgLS3lr7nlupTmlofmnKxcclxufVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBhbmVsZmlsdGVyQ2hlY2tib3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICAgIGNoZWNrZWRBbGw6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGVuYWJsZVNlYXJjaCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgYm9vbGNoZWNrOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBfaXRlbTogYW55O1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBpdGVtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtO1xyXG4gICAgfVxyXG4gICAgc2V0IGl0ZW0oZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW0gPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZ2V0RGF0YVNvdXJjZSgpO1xyXG4gICAgICAgIC8vdGhpcy5jaGVja1ZhbHVlID0gdGhpcy5faXRlbS52YWx1ZS5nZXRPcmlnaW5hbFZhbHVlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pdGVtLmhhc093blByb3BlcnR5KCd2YWx1ZScpKSB0aGlzLl9pdGVtLnZhbHVlID0geyB2YWx1ZTogW10gfTtcclxuICAgICAgICBpZiAodGhpcy5faXRlbS5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWUgPSB0aGlzLl9pdGVtLnZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgICAvL+S/neWtmOWAvFxyXG4gICAgICAgICAgICB0aGlzLmFsbENvbHNDaGVja1ZhbHVlPXRoaXMuY2hlY2tWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW0udmFsdWUudmFsdWUgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYm9vbGNoZWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvb2xjaGVja2VkID0gdGhpcy5jaGVja1ZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9vbGNoZWNrZWQpIHRoaXMuYm9vbENoZWNrU3RhdGUgPSAnY2hlY2tlZCc7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHRoaXMuYm9vbENoZWNrU3RhdGUgPSAndW5jaGVja2VkJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYm9vbENoZWNrU3RhdGUgPSAnaW5kZXRlcm1pbmF0ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW5hYmxlU2VhcmNoPWRhdGEuY29udHJvbC5oYXNPd25Qcm9wZXJ0eShcImVuYWJsZVNlYXJjaFwiKT9kYXRhLmNvbnRyb2wuZW5hYmxlU2VhcmNoOmZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pdGVtLnZhbHVlLnZhbHVlLmxlbmd0aCA9PSAwKSB0aGlzLmNoZWNrZWRBbGwgPSBmYWxzZTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9pdGVtLmNvbnRyb2xbJ2VudW1WYWx1ZXMnXSAmJiB0aGlzLl9pdGVtLnZhbHVlLnZhbHVlLmxlbmd0aCA9PSB0aGlzLl9pdGVtLmNvbnRyb2xbJ2VudW1WYWx1ZXMnXS5sZW5ndGgpIHRoaXMuY2hlY2tlZEFsbCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZXRTdWJtaXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKCdzZWFyY2hJbnB1dCcpIHNlYXJjaElucHV0OiBFbGVtZW50UmVmO1xyXG4gICAgQE91dHB1dCgnc2VhcmNoSGFuZGxlJykgc2VhcmNoSGFuZGxlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgnc3VibWl0Q2hhbmdlJykgc3VibWl0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8g6K6w5b2V5Yu+6YCJ55qE5YC8XHJcbiAgICBjaGVja1ZhbHVlOiBhbnlbXTtcclxuICAgIGluZGV0ZXJtaW5hdGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgYm9vbGNoZWNrZWQ6IGJvb2xlYW47XHJcbiAgICBib29sQ2hlY2tTdGF0ZTogc3RyaW5nID0gJ2luZGV0ZXJtaW5hdGUnO1xyXG4gICAgLy8g5pWw5o2u5rqQXHJcbiAgICBjaGVja2JveERhdGFTb3VyY2U6IEFycmF5PGFueT4gPSBuZXcgQXJyYXk8YW55PigpO1xyXG4gICAgLy8g5b2T5YmN5p+l6K+i57uT5p6cXHJcbiAgICBhbGxDb2xzOiBBcnJheTxhbnk+ID0gbmV3IEFycmF5PGFueT4oKTtcclxuICAgIC8vIOWcqOW9k+WJjeafpeivoue7k+aenOeahOmAieS4reWAvFxyXG4gICAgYWxsQ29sc0NoZWNrVmFsdWU6YW55W109W107XHJcbiAgICAvL+S4jeWcqOW9k+WJjeeahOafpeivoue7k+aenOS4reeahOmAieS4reWAvFxyXG4gICAgcHJpdmF0ZSBub3RJbkN1clJlc3VsdDphbnlbXT1bXTtcclxuICAgIC8vIOaYr+WQpuiuvue9ruafpeivouaXtuWAmeeahOWuveW6plxyXG4gICAgcHJpdmF0ZSBoYXNTZXRXaWR0aFNlYXJjaGluZz1mYWxzZTtcclxuICAgIC8vIOafpeivouaPkOekulxyXG4gICAgc2VhcmNoUGxhY2VIb2xkZXI9XCLor7fovpPlhaXlkI3np7BcIjtcclxuICAgIGNoZWNrYWxsQ2hlY2tib3hEaXNhYmxlZD1mYWxzZTtcclxuICAgIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHB1YmxpYyBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlKSAgeyB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRMb2NhbGVEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YVNvdXJjZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pdGVtICYmIHRoaXMuX2l0ZW0uY29udHJvbCkge1xyXG4gICAgICAgICAgICBsZXQgY2hlY2tib3hMaXN0ID0gKHRoaXMuX2l0ZW0uY29udHJvbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3hEYXRhU291cmNlID0gQXJyYXk8YW55PigpO1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tib3hMaXN0LmVudW1WYWx1ZXMgJiYgY2hlY2tib3hMaXN0LmVudW1WYWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tib3hMaXN0LmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrYm94RGF0YVNvdXJjZS5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxDb2xzID0gdGhpcy5jaGVja2JveERhdGFTb3VyY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWFyY2goZXZlbnQpIHtcclxuICAgICAgICBsZXQgY2hlY2tib3hWYWx1ZSA9IFtdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBsZXQgY2hlY2tib3hMaXN0ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChjaGVja2JveExpc3QgJiYgY2hlY2tib3hMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tib3hWYWx1ZSA9IGNoZWNrYm94TGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFsbENvbHNDaGVja1ZhbHVlPWNoZWNrYm94VmFsdWU7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMuYWxsQ29sc0NoZWNrVmFsdWU9W107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25seVVwZGF0ZUNoZWNrVmFsdWUoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdElzQ2hlY2tBbGwoKTtcclxuICAgICAgICB0aGlzLmdldFZhbHVlVGV4dCgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3VibWl0Q2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hIYW5kbGUuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlVGV4dCgpIHtcclxuICAgICAgICBjb25zdCBlbnVtVmFsdWUgPSAodGhpcy5faXRlbS5jb250cm9sKS5lbnVtVmFsdWVzO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gKHRoaXMuX2l0ZW0udmFsdWUpLnZhbHVlO1xyXG4gICAgICAgIGlmIChlbnVtVmFsdWUgJiYgZW51bVZhbHVlLmxlbmd0aCAmJiB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IHRleHRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnVtcyA9IGVudW1WYWx1ZS5maW5kKHZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFsndmFsdWUnXSA9PSB2YWx1ZVtpXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHMucHVzaChlbnVtc1snbmFtZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pdGVtLnZhbHVlVGV4dCA9IHRleHRzLmpvaW4oJywnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5faXRlbS52YWx1ZVRleHQ9Jyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKblj6/ku6Xmj5DkuqRcclxuICAgICAqL1xyXG4gICAgc2V0U3VibWl0Q2hhbmdlKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuX2l0ZW0udmFsdWU7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbCkubGVuZ3RoIDwgMCB8fCBPYmplY3Qua2V5cyh2YWwudmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdENoYW5nZS5lbWl0KGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VibWl0Q2hhbmdlLmVtaXQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vlhajpgIlDaGVja2JveFxyXG4gICAgICogQHBhcmFtIGV2ZW50IFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgICAgIGlmKHRoaXMuY2hlY2thbGxDaGVja2JveERpc2FibGVkKXtcclxuICAgICAgICAvLyDlhajpgIljaGVja2JveOaYr+WQpuemgeeUqFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hlY2tlZEFsbCA9ICF0aGlzLmNoZWNrZWRBbGw7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZEFsbCkge1xyXG4gICAgICAgICAgICAvLyDlhajpgIlcclxuICAgICAgICAgICAgdGhpcy5zZXRDaGVja2VkQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlj5bmtojlhajpgIlcclxuICAgICAgICAgICAgdGhpcy5zZXRVbkNoZWNrZWRBbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRWYWx1ZVRleHQoKTtcclxuICAgICAgICB0aGlzLnNldFN1Ym1pdENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSGFuZGxlLmVtaXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5YWo6YCJIFxyXG4gICAgICogMjPlubQxMuaciDEz5pelLS3lop7liqDov4fmu6TvvIzmlLnlj5jmraTmlrnms5VcclxuICAgICAqL1xyXG4gICAgc2V0Q2hlY2tlZEFsbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hbGxDb2xzICYmIHRoaXMuYWxsQ29scy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IGNoZWNrYm94VmFsdWUgPSBbXTsgICAgXHJcbiAgICAgICAgICAgIGNoZWNrYm94VmFsdWU9IHRoaXMuYWxsQ29scy5tYXAoaXRlbT0+aXRlbS52YWx1ZSkgICAgXHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ29sc0NoZWNrVmFsdWU9W10uY29uY2F0KGNoZWNrYm94VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLm9ubHlVcGRhdGVDaGVja1ZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5bmtojlhajpgIlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRVbkNoZWNrZWRBbGwoKXtcclxuICAgICAgICBpZiAodGhpcy5hbGxDb2xzICYmIHRoaXMuYWxsQ29scy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgIHRoaXMuYWxsQ29sc0NoZWNrVmFsdWU9W107XHJcbiAgICAgICAgICAgICB0aGlzLm9ubHlVcGRhdGVDaGVja1ZhbHVlKCk7ICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUNoZWNrQ2xpY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYm9vbENoZWNrU3RhdGUgPT0gJ2luZGV0ZXJtaW5hdGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9vbENoZWNrU3RhdGUgPSAnY2hlY2tlZCc7XHJcbiAgICAgICAgICAgIHRoaXMuYm9vbGNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtLnZhbHVlLnZhbHVlID0gW3RydWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmJvb2xDaGVja1N0YXRlID09ICdjaGVja2VkJykge1xyXG4gICAgICAgICAgICB0aGlzLmJvb2xDaGVja1N0YXRlID0gJ3VuY2hlY2tlZCc7XHJcbiAgICAgICAgICAgIHRoaXMuYm9vbGNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5faXRlbS52YWx1ZS52YWx1ZSA9IFtmYWxzZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYm9vbENoZWNrU3RhdGUgPT0gJ3VuY2hlY2tlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5ib29sQ2hlY2tTdGF0ZSA9ICdpbmRldGVybWluYXRlJztcclxuICAgICAgICAgICAgdGhpcy5ib29sY2hlY2tlZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW0udmFsdWUudmFsdWUgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdWJtaXRDaGFuZ2UoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaEhhbmRsZS5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa4heepuuafpeivolxyXG4gICAgICogQHBhcmFtICRldmVudCBcclxuICAgICAqIEBwYXJhbSBpbnB1dCBcclxuICAgICAqL1xyXG4gICAgY2xlYXJTZWFyY2goJGV2ZW50LCBpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dCAmJiBpbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckl0ZW1zKCcnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW8gOWni+afpeivolxyXG4gICAgICogQHBhcmFtICRldmVudCBcclxuICAgICAqL1xyXG4gICAgc2VhcmNoSXRlbXMoJGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgdHh0ID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zKHR4dCk7XHJcbiAgICB9XHJcbiAgICBzZWFyY2hJbnB1dEZvY3VzKGV2KXtcclxuICAgICAgICBpZighdGhpcy5oYXNTZXRXaWR0aFNlYXJjaGluZyl7XHJcbiAgICAgICAgICAgIGxldCBmaW5kUGFyRWw9dGhpcy5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy5jaGVja2JveGdyb3VwLWhhcy1zZWFyY2gnKTtcclxuICAgICAgICAgICAgdGhpcy5oYXNTZXRXaWR0aFNlYXJjaGluZz10cnVlO1xyXG4gICAgICAgICAgICBmaW5kUGFyRWwuc3R5bGUud2lkdGg9ZmluZFBhckVsLm9mZnNldFdpZHRoKydweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDov4fmu6TpoblcclxuICAgICAqIEBwYXJhbSBzZWFyY2hXb3JkcyBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaWx0ZXJJdGVtcyhzZWFyY2hXb3JkcyA9ICcnKSB7XHJcbiAgICAgICAgbGV0IGNvbHMgPSBbXTtcclxuICAgICAgICBzZWFyY2hXb3Jkcz1zZWFyY2hXb3Jkcy50cmltKCk7XHJcbiAgICAgICAgaWYgKHNlYXJjaFdvcmRzKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWFyY2hBcnJheSA9IHNlYXJjaFdvcmRzLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgbGV0IHRhbGxDb2xzQ2hlY2tWYWx1ZT1bXTtcclxuICAgICAgICAgICAgdGhpcy5ub3RJbkN1clJlc3VsdD1bXTtcclxuICAgICAgICAgICAgY29scyA9IHRoaXMuY2hlY2tib3hEYXRhU291cmNlLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB3YWl0U2VhcmNoU3RyID0gaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyUmVzdWx0PWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8g56m65qC85YGa5Li65ZCM5LiA5Liq5Yy56YWN5p2h5Lu2XHJcbiAgICAgICAgICAgICAgICAgbGV0IGZpbmROb3RDb250YWluID0gc2VhcmNoQXJyYXkuZmluZEluZGV4KHNlYXJjaFN0ciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgQiDkuKTkuKrmnaHku7bov4fmu6RcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFN0ciA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YWl0U2VhcmNoU3RyLmluZGV4T2Yoc2VhcmNoU3RyLnRvTG93ZXJDYXNlKCkpID09IC0xO1xyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY3VyUmVzdWx0PSBmaW5kTm90Q29udGFpbiA9PSAtMTtcclxuICAgICAgICAgICAgICAgIGlmKGN1clJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lnKjmn6Xor6Lnu5PmnpzlhoVcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNoZWNrVmFsdWUuc29tZSgoY2hlY2tJdGVtKT0+Y2hlY2tJdGVtPT1pdGVtLnZhbHVlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiU5Zyo6YCJ5oup55qE5YC86IyD5Zu05YaFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhbGxDb2xzQ2hlY2tWYWx1ZS5wdXNoKGl0ZW0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJSZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmFsbENvbHMgPSBjb2xzO1xyXG4gICAgICAgICAgICB0aGlzLmFsbENvbHNDaGVja1ZhbHVlPXRhbGxDb2xzQ2hlY2tWYWx1ZTtcclxuICAgICAgICAgICAgLy8g5LiN5Zyo5b2T5YmN6YCJ5Lit55qE5pWw5o2uXHJcbiAgICAgICAgICAgIHRoaXMubm90SW5DdXJSZXN1bHQ9dGhpcy5jaGVja1ZhbHVlLmZpbHRlcih4ID0+IHRhbGxDb2xzQ2hlY2tWYWx1ZS5pbmRleE9mKHgpID09PSAtMSk7IFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ29scyA9IHRoaXMuY2hlY2tib3hEYXRhU291cmNlO1xyXG4gICAgICAgICAgICAgLy/lpoLmnpzmmK/mn6Xor6Llh7rlhajpg6jmlbDmja5cclxuICAgICAgICAgICAgIHRoaXMuYWxsQ29sc0NoZWNrVmFsdWU9W10uY29uY2F0KHRoaXMuY2hlY2tWYWx1ZSk7XHJcbiAgICAgICAgICAgICB0aGlzLm5vdEluQ3VyUmVzdWx0PVtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmm7TmlLnlhajpgInnirbmgIFcclxuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdElzQ2hlY2tBbGwoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5p+l6K+i57uT5p6c5YWo6YCJ55qE54q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2VhcmNoUmVzdWx0SXNDaGVja0FsbCgpIHtcclxuICAgICAgICAvLyDlpoLmnpzml6Dnu5PmnpxcclxuICAgICAgICBpZiAodGhpcy5hbGxDb2xzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZEFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrYWxsQ2hlY2tib3hEaXNhYmxlZD10cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbENvbHMubGVuZ3RoID4gdGhpcy5hbGxDb2xzQ2hlY2tWYWx1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIOafpeivoue7k+aenOeahOmVv+W6puavlOW3sumAieWFg+e0oOWkmlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkQWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRBbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2thbGxDaGVja2JveERpc2FibGVkPWZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pu05paw54q25oCBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25seVVwZGF0ZUNoZWNrVmFsdWUoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2hlY2tWYWx1ZT1bXS5jb25jYXQodGhpcy5hbGxDb2xzQ2hlY2tWYWx1ZSx0aGlzLm5vdEluQ3VyUmVzdWx0KTtcclxuICAgICAgICB0aGlzLl9pdGVtLnZhbHVlLnZhbHVlID0gdGhpcy5jaGVja1ZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSAgc2V0TG9jYWxlRGF0YSgpe1xyXG4gICAgICAgIGlmKHRoaXMuZW5hYmxlU2VhcmNoJiZ0aGlzLmxvY2FsZVNlcnZpY2Upe1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFBsYWNlSG9sZGVyPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2ZpbHRlclBhbmVsLnNlYXJjaFBsYWNlSG9sZGVyJyl8fFwi6K+36L6T5YWl5ZCN56ewXCI7XHJcbiAgICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=