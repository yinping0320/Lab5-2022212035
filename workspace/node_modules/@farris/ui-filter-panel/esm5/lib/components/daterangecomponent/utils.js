/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} num
 * @param {?} showtime
 * @param {?} type
 * @return {?}
 */
export function getLastNumMonth(num, showtime, type) {
    /** @type {?} */
    var now = new Date();
    /** @type {?} */
    var year = now.getFullYear();
    /** @type {?} */
    var month = now.getMonth() + 1;
    //0-11表示1-12月
    /** @type {?} */
    var day = now.getDate();
    /** @type {?} */
    var hour = now.getHours();
    /** @type {?} */
    var min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()
        : new Date().getMinutes();
    /** @type {?} */
    var sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()
        : new Date().getSeconds();
    /** @type {?} */
    var dateObj = {};
    /** @type {?} */
    var time = hour + ':' + min + ':' + sec;
    // dateObj['endTime'] = year + '-' + month + '-' + day;
    /** @type {?} */
    var endMonth = month < 10 ? '0' + month : month;
    /** @type {?} */
    var endDay = day < 10 ? '0' + day : day;
    if (type == '2') {
        dateObj['endTime'] = year + '-' + endMonth;
    }
    else if (type == '3') {
        dateObj['endTime'] = year;
    }
    else {
        dateObj['endTime'] = year + '-' + endMonth + '-' + endDay;
    }
    /** @type {?} */
    var nowMonthDay = new Date(year, month, 0).getDate();
    //当前月的总天数
    /** @type {?} */
    var dYear;
    /** @type {?} */
    var dMouth;
    /** @type {?} */
    var dDay;
    if (month - num <= 0) { //如果是1、2、3月，年数往前推一年
        //如果是1、2、3月，年数往前推一年
        /** @type {?} */
        var lastMonthDay = new Date((year - 1), (12 - (num - month)), 0).getDate();
        if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
            // dateObj['startTime'] = (year - 1) + '-' + (12 - (num - month)) + '-' + lastMonthDay;
            dYear = year - 1;
            dMouth = 12 - (num - month);
            dDay = lastMonthDay;
        }
        else {
            dYear = year - 1;
            dMouth = 12 - (num - month);
            dDay = day;
            // dateObj['startTime']= (year - 1) + '-' + (12 - (num - month)) + '-' + day;
        }
    }
    else {
        /** @type {?} */
        var lastMonthDay = new Date(year, (month - num), 0).getDate();
        if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
            if (day < nowMonthDay) { //当前天日期小于当前月总天数,2月份比较特殊的月份
                // dateObj['startTime'] = year + '-' + (month - num) + '-' + (lastMonthDay - (nowMonthDay - day));
                dYear = year;
                dMouth = month - num;
                dDay = lastMonthDay - (nowMonthDay - day);
            }
            else {
                dYear = year;
                dMouth = month - num;
                dDay = lastMonthDay;
                // dateObj['startTime'] = year + '-' + (month - num) + '-' + lastMonthDay;
            }
        }
        else {
            dYear = year;
            dMouth = month - num;
            dDay = day;
            // dateObj['startTime'] = year + '-' + (month - num) + '-' + day;
        }
    }
    dMouth = dMouth < 10 ? '0' + dMouth : dMouth;
    dDay = dDay < 10 ? '0' + dDay : dDay;
    if (type == '2') {
        dateObj['startTime'] = dYear + '-' + dMouth;
    }
    else if (type == '3') {
        dateObj['startTime'] = dYear;
    }
    else {
        dateObj['startTime'] = dYear + '-' + dMouth + '-' + dDay;
    }
    if (showtime) {
        dateObj['endTime'] = dateObj['endTime'] + ' ' + time;
        dateObj['startTime'] = dateObj['startTime'] + ' ' + time;
    }
    return dateObj;
}
/**
 * @param {?=} dayTags
 * @param {?=} showtime
 * @return {?}
 */
export function getToday(dayTags, showtime) {
    if (dayTags === void 0) { dayTags = 'today'; }
    /** @type {?} */
    var now = new Date();
    /** @type {?} */
    var year = now.getFullYear();
    /** @type {?} */
    var month = now.getMonth() + 1;
    //0-11表示1-12月
    /** @type {?} */
    var day = now.getDate();
    /** @type {?} */
    var hour = now.getHours();
    /** @type {?} */
    var min = now.getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();
    /** @type {?} */
    var sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();
    /** @type {?} */
    var time = hour + ':' + min + ':' + sec;
    /** @type {?} */
    var yesterday = new Date();
    yesterday.setTime(now.getTime() - 24 * 60 * 60 * 1000);
    /** @type {?} */
    var yesterdayMonth = yesterday.getMonth() + 1;
    /** @type {?} */
    var yesterdayDate = yesterday.getDate();
    /** @type {?} */
    var yesterdayObj = yesterday.getFullYear() + "-" + (yesterdayMonth < 10 ? "0" + yesterdayMonth : yesterdayMonth) + "-" + (yesterdayDate < 10 ? "0" + yesterdayDate : yesterdayDate);
    /** @type {?} */
    var dateObj = year + '-' + (month < 10 ? "0" + month : month) + '-' + (day < 10 ? "0" + day : day);
    if (showtime) {
        dateObj = dateObj + ' ' + time;
        yesterdayObj = yesterdayObj + ' ' + time;
    }
    if (dayTags == 'today')
        return dateObj;
    else if (dayTags == 'yesterday')
        return yesterdayObj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLWZpbHRlci1wYW5lbC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2RhdGVyYW5nZWNvbXBvbmVudC91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBTSxVQUFVLGVBQWUsQ0FBQyxHQUFVLEVBQUMsUUFBUSxFQUFDLElBQVc7O1FBQ3ZELEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRTs7UUFDaEIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxXQUFXLEVBQUU7O1FBQ3hCLEtBQUssR0FBRyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQzs7O1FBQzFCLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxFQUFFOztRQUNuQixJQUFJLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRTs7UUFDckIsR0FBRyxHQUFHLEdBQUcsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRTtRQUMzRCxDQUFDLENBQUEsSUFBSSxJQUFJLEVBQUUsQ0FBQyxVQUFVLEVBQUU7O1FBQ3RCLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsVUFBVSxFQUFFO1FBQ3BFLENBQUMsQ0FBQSxJQUFJLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRTs7UUFDeEIsT0FBTyxHQUFHLEVBQUU7O1FBQ1YsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHOzs7UUFFckMsUUFBUSxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUs7O1FBQzFDLE1BQU0sR0FBRyxHQUFH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LENBQUM7QUFDekQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0TnVtTW9udGgobnVtOm51bWJlcixzaG93dGltZSx0eXBlOnN0cmluZykge1xyXG4gICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoID0gbm93LmdldE1vbnRoKCkgKyAxOy8vMC0xMeihqOekujEtMTLmnIhcclxuICAgIGxldCBkYXkgPSBub3cuZ2V0RGF0ZSgpO1xyXG4gICAgbGV0IGhvdXIgPSBub3cuZ2V0SG91cnMoKTtcclxuICAgIGxldCBtaW4gPSBub3cuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgIDpuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKTtcclxuICAgICAgbGV0IHNlYyA9IG5ldyBEYXRlKCkuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBuZXcgRGF0ZSgpLmdldFNlY29uZHMoKVxyXG4gICAgICAgIDpuZXcgRGF0ZSgpLmdldFNlY29uZHMoKTtcclxuICAgIGxldCBkYXRlT2JqID0ge307XHJcbiAgICBjb25zdCB0aW1lID0gaG91ciArICc6JyArIG1pbiArICc6JyArIHNlYztcclxuICAgIC8vIGRhdGVPYmpbJ2VuZFRpbWUnXSA9IHllYXIgKyAnLScgKyBtb250aCArICctJyArIGRheTtcclxuICAgIGxldCBlbmRNb250aCA9IG1vbnRoIDwgMTAgPyAnMCcgK21vbnRoIDogbW9udGg7XHJcbiAgICBsZXQgZW5kRGF5ID0gZGF5IDwgMTAgPyAnMCcgK2RheSA6IGRheTtcclxuICAgIGlmKHR5cGUgPT0gJzInKXtcclxuICAgICAgICBkYXRlT2JqWydlbmRUaW1lJ10gPSB5ZWFyICsgJy0nICsgZW5kTW9udGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHR5cGUgPT0gJzMnKXtcclxuICAgICAgICBkYXRlT2JqWydlbmRUaW1lJ10gPSB5ZWFyO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICBkYXRlT2JqWydlbmRUaW1lJ10gPSB5ZWFyICsgJy0nICsgZW5kTW9udGggKyAnLScgKyBlbmREYXk7XHJcbiAgICB9XHJcbiAgICAgIGxldCBub3dNb250aERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7ICAgIC8v5b2T5YmN5pyI55qE5oC75aSp5pWwXHJcbiAgICBsZXQgZFllYXIsZE1vdXRoLGREYXk7XHJcbiAgICBpZihtb250aCAtIG51bSA8PSAwKXsgLy/lpoLmnpzmmK8x44CBMuOAgTPmnIjvvIzlubTmlbDlvoDliY3mjqjkuIDlubRcclxuICAgICAgICBsZXQgbGFzdE1vbnRoRGF5ID0gbmV3IERhdGUoKHllYXIgLSAxKSwgKDEyIC0gKG51bSAtIG1vbnRoKSksIDApLmdldERhdGUoKTsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWwXHJcbiAgICAgICAgaWYobGFzdE1vbnRoRGF5IDwgZGF5KXsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWw5bCP5LqO546w5Zyo55qE5aSp5pel5pyfXHJcbiAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0gKHllYXIgLSAxKSArICctJyArICgxMiAtIChudW0gLSBtb250aCkpICsgJy0nICsgbGFzdE1vbnRoRGF5O1xyXG4gICAgICAgICAgICBkWWVhciA9IHllYXIgLSAxO1xyXG4gICAgICAgICAgICBkTW91dGggPSAxMiAtIChudW0gLSBtb250aCk7XHJcbiAgICAgICAgICAgIGREYXkgPSBsYXN0TW9udGhEYXk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGRZZWFyID0geWVhciAtIDE7XHJcbiAgICAgICAgICAgIGRNb3V0aCA9IDEyIC0gKG51bSAtIG1vbnRoKTtcclxuICAgICAgICAgICAgZERheSA9IGRheTtcclxuICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ109ICh5ZWFyIC0gMSkgKyAnLScgKyAoMTIgLSAobnVtIC0gbW9udGgpKSArICctJyArIGRheTtcclxuICAgICAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBsZXQgbGFzdE1vbnRoRGF5ID0gbmV3IERhdGUoeWVhciwgKG1vbnRoIC0gbnVtKSwgMCkuZ2V0RGF0ZSgpOyAgICAvLzPkuKrmnIjliY3miYDlnKjmnIjnmoTmgLvlpKnmlbBcclxuICAgICAgICBpZihsYXN0TW9udGhEYXkgPCBkYXkpeyAgICAvLzPkuKrmnIjliY3miYDlnKjmnIjnmoTmgLvlpKnmlbDlsI/kuo7njrDlnKjnmoTlpKnml6XmnJ9cclxuICAgICAgICAgICAgaWYoZGF5IDwgbm93TW9udGhEYXkpeyAgICAgICAgLy/lvZPliY3lpKnml6XmnJ/lsI/kuo7lvZPliY3mnIjmgLvlpKnmlbAsMuaciOS7veavlOi+g+eJueauiueahOaciOS7vVxyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSB5ZWFyICsgJy0nICsgKG1vbnRoIC0gbnVtKSArICctJyArIChsYXN0TW9udGhEYXkgLSAobm93TW9udGhEYXkgLSBkYXkpKTtcclxuICAgICAgICAgICAgICAgIGRZZWFyID0geWVhcjtcclxuICAgICAgICAgICAgICAgIGRNb3V0aCA9IG1vbnRoIC0gbnVtO1xyXG4gICAgICAgICAgICAgICAgZERheSA9IGxhc3RNb250aERheSAtIChub3dNb250aERheSAtIGRheSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZFllYXIgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgZE1vdXRoID0gbW9udGggLSBudW07XHJcbiAgICAgICAgICAgICAgICBkRGF5ID0gbGFzdE1vbnRoRGF5O1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSB5ZWFyICsgJy0nICsgKG1vbnRoIC0gbnVtKSArICctJyArIGxhc3RNb250aERheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBkWWVhciA9IHllYXI7XHJcbiAgICAgICAgICAgIGRNb3V0aCA9IG1vbnRoIC0gbnVtO1xyXG4gICAgICAgICAgICBkRGF5ID0gZGF5O1xyXG4gICAgICAgICAgICAvLyBkYXRlT2JqWydzdGFydFRpbWUnXSA9IHllYXIgKyAnLScgKyAobW9udGggLSBudW0pICsgJy0nICsgZGF5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRNb3V0aCA9IGRNb3V0aCA8IDEwID8gJzAnICtkTW91dGggOiBkTW91dGg7XHJcbiAgICBkRGF5ID0gZERheSA8IDEwID8gJzAnICtkRGF5IDogZERheTtcclxuICAgIGlmKHR5cGUgPT0gJzInKXtcclxuICAgICAgICBkYXRlT2JqWydzdGFydFRpbWUnXSA9IGRZZWFyICsgJy0nICsgZE1vdXRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0eXBlID09ICczJyl7XHJcbiAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkWWVhcjtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkWWVhciArICctJyArIGRNb3V0aCArICctJyArIGREYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoc2hvd3RpbWUpe1xyXG4gICAgICAgIGRhdGVPYmpbJ2VuZFRpbWUnXSA9IGRhdGVPYmpbJ2VuZFRpbWUnXSArICcgJyArIHRpbWU7XHJcbiAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkYXRlT2JqWydzdGFydFRpbWUnXSArICcgJyArIHRpbWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0ZU9iajtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvZGF5KGRheVRhZ3MgPSAndG9kYXknLHNob3d0aW1lKXtcclxuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgIGxldCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICBsZXQgbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7Ly8wLTEx6KGo56S6MS0xMuaciFxyXG4gICAgbGV0IGRheSA9IG5vdy5nZXREYXRlKCk7XHJcbiAgICBcclxuICAgIGxldCBob3VyID0gbm93LmdldEhvdXJzKCk7XHJcbiAgICBsZXQgbWluID0gbm93LmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgOm5ldyBEYXRlKCkuZ2V0TWludXRlcygpO1xyXG4gICAgbGV0IHNlYyA9IG5ldyBEYXRlKCkuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBuZXcgRGF0ZSgpLmdldFNlY29uZHMoKSA6IG5ldyBEYXRlKCkuZ2V0U2Vjb25kcygpO1xyXG4gICAgY29uc3QgdGltZSA9IGhvdXIgKyAnOicgKyBtaW4gKyAnOicgKyBzZWM7XHJcblxyXG4gICAgbGV0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XHJcbiAgICB5ZXN0ZXJkYXkuc2V0VGltZShub3cuZ2V0VGltZSgpLTI0KjYwKjYwKjEwMDApO1xyXG4gICAgbGV0IHllc3RlcmRheU1vbnRoID0geWVzdGVyZGF5LmdldE1vbnRoKCkrMTtcclxuICAgIGxldCB5ZXN0ZXJkYXlEYXRlID0geWVzdGVyZGF5LmdldERhdGUoKTtcclxuXHJcbiAgICBsZXQgeWVzdGVyZGF5T2JqID0geWVzdGVyZGF5LmdldEZ1bGxZZWFyKCkrXCItXCIgKyAoeWVzdGVyZGF5TW9udGggPCAxMCA/IGAwJHt5ZXN0ZXJkYXlNb250aH1gOiB5ZXN0ZXJkYXlNb250aCkgKyBcIi1cIiArICAoeWVzdGVyZGF5RGF0ZSA8IDEwID8gYDAke3llc3RlcmRheURhdGV9YCA6IHllc3RlcmRheURhdGUpO1xyXG4gICAgbGV0IGRhdGVPYmogPSB5ZWFyICsgJy0nICsgKG1vbnRoIDwgMTAgPyBgMCR7bW9udGh9YCA6IG1vbnRoKSsgJy0nICsgICAoZGF5IDwgMTAgPyBgMCR7ZGF5fWAgOiBkYXkpO1xyXG4gICAgaWYoc2hvd3RpbWUpe1xyXG4gICAgICAgIGRhdGVPYmogPSBkYXRlT2JqICsgJyAnICsgdGltZTtcclxuICAgICAgICB5ZXN0ZXJkYXlPYmogPSB5ZXN0ZXJkYXlPYmogKyAnICcgKyB0aW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZihkYXlUYWdzID09ICd0b2RheScpIHJldHVybiBkYXRlT2JqO1xyXG4gICAgZWxzZSBpZiAoZGF5VGFncyA9PSAneWVzdGVyZGF5JykgcmV0dXJuIHllc3RlcmRheU9iajtcclxufSJdfQ==