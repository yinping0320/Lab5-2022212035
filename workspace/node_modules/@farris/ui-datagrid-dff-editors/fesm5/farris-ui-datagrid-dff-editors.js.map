{"version":3,"file":"farris-ui-datagrid-dff-editors.js.map","sources":["ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.service.ts","ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/grid-employee-selector/grid-employee-selector.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/grid-adminorganization-selector/grid-adminorganization-selector.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DatagridDffEditorsService {\r\n\r\n  constructor() { }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'farris-datagrid-dff-editors',\r\n  template: `\r\n    <p>\r\n      datagrid-dff-editors works!\r\n    </p>\r\n  `,\r\n  styles: []\r\n})\r\nexport class DatagridDffEditorsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { GRID_EDITORS } from '@farris/ui-datagrid';\r\nimport { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';\r\nimport * as _ from 'lodash-es';\r\nimport { isNull, isUndefined, omitBy, trim } from 'lodash-es';\r\nimport { EmployeeSelectorComponent } from '@farris/ui-employee-selector';\r\n\r\nconst employeeSelectorDefautOption = {\r\n  absOrgType: 'System_organization',\r\n  readonly: false,\r\n  placeholder: '请选择',\r\n  viewType: 'tag',\r\n  busNum: 'common',\r\n  idField: 'userId'\r\n};\r\n\r\n@Component({\r\n  selector: 'farris-grid-employee-selector',\r\n  templateUrl: './grid-employee-selector.component.html'\r\n})\r\nexport class DatagridEmployeeSelectorComponent extends DatagridBaseEditorDirective implements OnInit, AfterViewInit {\r\n\r\n  @ViewChild('selection') instance: EmployeeSelectorComponent & { clear: EventEmitter<any>; selectedData: EventEmitter<any> };\r\n\r\n  bindingData: any;\r\n\r\n  constructor(\r\n    render: Renderer2,\r\n    el: ElementRef,\r\n    private rts: RuntimeStateService,\r\n    public utils: CommonUtils,\r\n    injector: Injector) {\r\n    super(render, el, injector);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    // 这里添加了过滤 this.options 中null、undefined,万一 jit 生成了 undefined 的呢，\r\n    this.options = Object.assign({}, employeeSelectorDefautOption, omitBy(this.options, (itemValue) => isUndefined(itemValue) || isNull(itemValue)));\r\n    this.instance.selectedData = new EventEmitter<any>();\r\n    this.instance.clear = new EventEmitter<any>();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputElement = this.el.nativeElement;\r\n    super.ngAfterViewInit();\r\n    if (\r\n      this.instance.ngControl &&\r\n      this.instance.ngControl.formDirective &&\r\n      this.instance.ngControl.formDirective.form &&\r\n      this.instance.ngControl.formDirective.form.bindingData\r\n    ) {\r\n      this.bindingData = this.instance.ngControl.formDirective.form.bindingData;\r\n      this.bindingData.setValue = (fieldPath) => {\r\n        return this.utils.setValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n      this.bindingData.getValue = (fieldPath) => {\r\n        return this.utils.getValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n    }\r\n\r\n  }\r\n\r\n  inputClear() {\r\n    this.updateControlValue(null);\r\n    this.instance.clear.emit();\r\n    if (this.options.inputClear) {\r\n      // 设计器上配置的清空事件\r\n      this.options.inputClear();\r\n    }\r\n  }\r\n\r\n  lookupFieldMap = (helpData, mapFields, dataObj) => {\r\n    if (mapFields) {\r\n      const helpFields = Object.keys(mapFields);\r\n      helpFields.forEach((f: any) => {\r\n        let val = '';\r\n        if (helpData) {\r\n          if (helpData instanceof Array) {\r\n            val = helpData.map((h: any) => {\r\n              return this.utils.getValue(f, h);\r\n            }).join(',');\r\n          } else {\r\n            val = this.utils.getValue(f, helpData);\r\n          }\r\n\r\n        }\r\n\r\n        mapFields[f].split(',').forEach((ff: any) => {\r\n          const field = trim(ff);\r\n          this.utils.setValue(dataObj, field, val);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  tagRemoved(removedItem: {\r\n    deleteItem: any,\r\n    deleteIndex: Number,\r\n    selections: Array<any>\r\n  }) {\r\n    const mapFields = this.instance.mapFields;\r\n    const helpFields = Object.keys(mapFields);\r\n    const bindingData = _.cloneDeep(this.bindingData);\r\n    const selectedData = [];\r\n\r\n    helpFields.forEach(key => {\r\n      let value = this.utils.getValue(mapFields[key], bindingData);\r\n      const vArr = value.split(',');\r\n      vArr.splice(removedItem.deleteIndex, 1);\r\n      vArr.forEach((v, i) => {\r\n        if (!selectedData[i]) {\r\n          selectedData.push({ index: i });\r\n          selectedData[i][key] = v;\r\n        } else {\r\n          selectedData[i][key] = v;\r\n        }\r\n      });\r\n      value = vArr.join(',');\r\n      this.utils.setValue(this.bindingData, mapFields[key], value);\r\n    });\r\n    if (selectedData.length) {\r\n      this.instance.selectedData.emit(selectedData);\r\n    } else {\r\n      this.instance.clear.emit();\r\n    }\r\n\r\n    // 设计器上配置的删除单个标签事件\r\n    if (this.options.tagRemoved) {\r\n      this.options.tagRemoved(this.eventPrams(removedItem));\r\n    }\r\n  }\r\n\r\n  selectionsChange(changeData: {\r\n    info: string,\r\n    data: Array<any>\r\n  }) {\r\n    const formedSelections = this.formSelectedRowData()\r\n    this.updateControlValue(formedSelections);\r\n    this.instance.selectedData.emit(formedSelections);\r\n    // 设计器上配置的选中数据后事件\r\n    if (this.options.selectionsChange) {\r\n      this.options.selectionsChange(this.eventPrams(changeData));\r\n    }\r\n  }\r\n\r\n  updateControlValue(selectedRow) {\r\n    if (this.instance.mapFields && this.bindingData) {\r\n      this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);\r\n    }\r\n  }\r\n\r\n\r\n  formSelectedRowData() {\r\n    let selectedRowData = [];\r\n    this.instance.selections.forEach((item) => {\r\n      const defaultDisplayName = this.instance.displayField ? item[this.instance.displayField] : `[${item.code}]${item.name}`;\r\n      const displayName = this.instance.formatFn ? this.instance.formatFn(item) : defaultDisplayName;\r\n      selectedRowData.push(Object.assign({}, item, { displayName }));\r\n    })\r\n    return selectedRowData.length ? selectedRowData : null;\r\n  }\r\n\r\n  private eventPrams($event): any {\r\n    const p = this.eventParams($event);\r\n    p['instance'] = this.instance;\r\n    p['editor'] = this;\r\n    return p;\r\n  }\r\n}\r\n\r\n\r\nexport const EmployeeSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'EmployeeSelector', value: DatagridEmployeeSelectorComponent }, multi: true }\r\n","import { Component, OnInit, AfterViewInit, ElementRef, EventEmitter, Injector, Renderer2, ViewChild } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { GRID_EDITORS } from '@farris/ui-datagrid';\r\nimport { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';\r\nimport * as _ from 'lodash-es';\r\nimport { isNull, isUndefined, omitBy, trim } from 'lodash-es';\r\nimport { AdminOrganizationSelectorComponent } from '@farris/ui-adminorganization-selector';\r\n\r\nconst AdminOrganizationSelectorDefautOption = {\r\n  absOrgType: 'System_organization',\r\n  readonly: false,\r\n  placeholder: '请选择',\r\n  busNum: 'common',\r\n  primaryField: 'orgId',\r\n  displayField: 'name'\r\n};\r\n\r\n@Component({\r\n  selector: 'farris-grid-adminorganization-selector',\r\n  templateUrl: './grid-adminorganization-selector.component.html'\r\n})\r\nexport class DataGridAdminOrganizationSelectorComponent extends DatagridBaseEditorDirective implements OnInit, AfterViewInit {\r\n\r\n    @ViewChild('orgSelection') instance: AdminOrganizationSelectorComponent & { clear: EventEmitter<any>; selectedData: EventEmitter<any> };\r\n\r\n    bindingData: any;\r\n\r\n    constructor(\r\n        render: Renderer2,\r\n        el: ElementRef,\r\n        private rts: RuntimeStateService,\r\n        public utils: CommonUtils,\r\n        injector: Injector\r\n    ) {\r\n        super(render, el, injector);\r\n    }\r\n\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.options = Object.assign({}, AdminOrganizationSelectorDefautOption, omitBy(this.options, (itemValue) => isUndefined(itemValue) || isNull(itemValue)));\r\n        this.instance.selectedData = new EventEmitter<any>();\r\n        this.instance.clear = new EventEmitter<any>();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.inputElement = this.el.nativeElement;\r\n        super.ngAfterViewInit();\r\n        if (\r\n          this.instance.ngControl &&\r\n          this.instance.ngControl.formDirective &&\r\n          this.instance.ngControl.formDirective.form &&\r\n          this.instance.ngControl.formDirective.form.bindingData\r\n        ) {\r\n          this.bindingData = this.instance.ngControl.formDirective.form.bindingData;\r\n          this.bindingData.setValue = (fieldPath) => {\r\n            return this.utils.setValue(fieldPath.join('.'), this.bindingData, true);\r\n          };\r\n          this.bindingData.getValue = (fieldPath) => {\r\n            return this.utils.getValue(fieldPath.join('.'), this.bindingData, true);\r\n          };\r\n        }\r\n    }\r\n\r\n    lookupFieldMap = (helpData: any, mapFields: any, dataObj: any) => {\r\n        if (mapFields) {\r\n            const helpFields = Object.keys(mapFields);\r\n            helpFields.forEach((helpField: any) => {\r\n                let val = '';\r\n                if (helpData) {\r\n                    if (helpData instanceof Array) {\r\n                        val = helpData.map((data: any) => { return this.utils.getValue(helpField, data); }).join(',');\r\n                    } else {\r\n                        val = this.utils.getValue(helpField, helpData);\r\n                    }\r\n                }\r\n                mapFields[helpField].split(',').forEach((ff: any) => {\r\n                    const formField = trim(ff);\r\n                    this.utils.setValue(dataObj, formField, val);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    updateControlValue(selectedRow: any) {\r\n        if (this.instance.mapFields && this.bindingData) {\r\n            this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);\r\n        }\r\n    }\r\n\r\n    inputClear() {\r\n        this.updateControlValue(null);\r\n        this.instance.clear.emit();\r\n        // 设计器上配置的清空事件\r\n        if (this.options.inputClear) {\r\n            this.options.inputClear();\r\n        }\r\n    }\r\n\r\n    tagRemoved(removedItem: {\r\n        deleteItem: any,\r\n        deleteIndex: number,\r\n        selections: Array<any>\r\n    }) {\r\n        const mapFields = this.instance.mapFields;\r\n        const helpFields = Object.keys(mapFields);\r\n        const bindingData = _.cloneDeep(this.bindingData);\r\n        const selectedData = [];\r\n    \r\n        helpFields.forEach(key => {\r\n          let value = this.utils.getValue(mapFields[key], bindingData);\r\n          const vArr = value.split(',');\r\n          vArr.splice(removedItem.deleteIndex, 1);\r\n          vArr.forEach((v, i) => {\r\n            if (!selectedData[i]) {\r\n              selectedData.push({ index: i });\r\n              selectedData[i][key] = v;\r\n            } else {\r\n              selectedData[i][key] = v;\r\n            }\r\n          });\r\n          value = vArr.join(',');\r\n          this.utils.setValue(this.bindingData, mapFields[key], value);\r\n        });\r\n        if (selectedData.length) {\r\n          this.instance.selectedData.emit(selectedData);\r\n        } else {\r\n          this.instance.clear.emit();\r\n        }\r\n        // 设计器上配置的删除单个标签事件\r\n        if (this.options.tagRemoved) {\r\n          this.options.tagRemoved(this.eventPrams(removedItem));\r\n        }\r\n    }\r\n\r\n    selectionsChange(changeData: {\r\n        info: string,\r\n        data: Array<any>\r\n    }) {\r\n      const formedSelections = this.formSelectedRowData();\r\n      this.updateControlValue(formedSelections);\r\n      this.instance.selectedData.emit(formedSelections);\r\n      // 设计器上配置的选中数据后事件\r\n      if (this.options.selectionsChange) {\r\n        this.options.selectionsChange(this.eventPrams(changeData));\r\n      }\r\n    }\r\n\r\n    formSelectedRowData() {\r\n      let selectedRowData = [];\r\n      this.instance.selections.forEach((item) => {\r\n        const defaultDisplayName = this.instance.displayField ? item[this.instance.displayField] : `${item.name}`;\r\n        const displayName = this.instance.formatFn ? this.instance.formatFn(item) : defaultDisplayName;\r\n        selectedRowData.push(Object.assign({}, item, { displayName }));\r\n      })\r\n      return selectedRowData.length ? selectedRowData : null;\r\n    }\r\n  \r\n    private eventPrams($event): any {\r\n      const p = this.eventParams($event);\r\n      p['instance'] = this.instance;\r\n      p['editor'] = this;\r\n      return p;\r\n    }\r\n}\r\n\r\nexport const AdminOrganizationSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'AdminOrganizationSelector', value: DataGridAdminOrganizationSelectorComponent }, multi: true }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule } from '@farris/ui-datagrid-editors';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { EmployeeSelectorModule } from '@farris/ui-employee-selector';\r\nimport { AdminOrganizationSelectorModule } from '@farris/ui-adminorganization-selector';\r\nimport { DatagridDffEditorsComponent } from './datagrid-dff-editors.component';\r\nimport { DatagridEmployeeSelectorComponent } from './grid-employee-selector/grid-employee-selector.component';\r\nimport { DataGridAdminOrganizationSelectorComponent } from './grid-adminorganization-selector/grid-adminorganization-selector.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DatagridDffEditorsComponent,\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    DatagridModule,\r\n    DatagridEditorsModule,\r\n    FarrisFormsModule,\r\n    EmployeeSelectorModule,\r\n    AdminOrganizationSelectorModule\r\n  ],\r\n  providers: [\r\n  ],\r\n  entryComponents: [\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ],\r\n  exports: [\r\n    DatagridDffEditorsComponent,\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ]\r\n})\r\nexport class DatagridDffEditorsModule { }\r\n"],"names":["tslib_1.__extends","_.cloneDeep"],"mappings":"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"}
