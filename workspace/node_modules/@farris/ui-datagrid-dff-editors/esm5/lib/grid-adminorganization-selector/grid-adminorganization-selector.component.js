/**
 * @fileoverview added by tsickle
 * Generated from: lib/grid-adminorganization-selector/grid-adminorganization-selector.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, EventEmitter, Injector, Renderer2, ViewChild } from '@angular/core';
import { CommonUtils, RuntimeStateService } from '@farris/ui-common';
import { GRID_EDITORS } from '@farris/ui-datagrid';
import { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';
import * as _ from 'lodash-es';
import { isNull, isUndefined, omitBy, trim } from 'lodash-es';
/** @type {?} */
var AdminOrganizationSelectorDefautOption = {
    absOrgType: 'System_organization',
    readonly: false,
    placeholder: '请选择',
    busNum: 'common',
    primaryField: 'orgId',
    displayField: 'name'
};
var DataGridAdminOrganizationSelectorComponent = /** @class */ (function (_super) {
    tslib_1.__extends(DataGridAdminOrganizationSelectorComponent, _super);
    function DataGridAdminOrganizationSelectorComponent(render, el, rts, utils, injector) {
        var _this = _super.call(this, render, el, injector) || this;
        _this.rts = rts;
        _this.utils = utils;
        _this.lookupFieldMap = (/**
         * @param {?} helpData
         * @param {?} mapFields
         * @param {?} dataObj
         * @return {?}
         */
        function (helpData, mapFields, dataObj) {
            if (mapFields) {
                /** @type {?} */
                var helpFields = Object.keys(mapFields);
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                function (helpField) {
                    /** @type {?} */
                    var val = '';
                    if (helpData) {
                        if (helpData instanceof Array) {
                            val = helpData.map((/**
                             * @param {?} data
                             * @return {?}
                             */
                            function (data) { return _this.utils.getValue(helpField, data); })).join(',');
                        }
                        else {
                            val = _this.utils.getValue(helpField, helpData);
                        }
                    }
                    mapFields[helpField].split(',').forEach((/**
                     * @param {?} ff
                     * @return {?}
                     */
                    function (ff) {
                        /** @type {?} */
                        var formField = trim(ff);
                        _this.utils.setValue(dataObj, formField, val);
                    }));
                }));
            }
        });
        return _this;
    }
    /**
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
        this.options = Object.assign({}, AdminOrganizationSelectorDefautOption, omitBy(this.options, (/**
         * @param {?} itemValue
         * @return {?}
         */
        function (itemValue) { return isUndefined(itemValue) || isNull(itemValue); })));
        this.instance.selectedData = new EventEmitter();
        this.instance.clear = new EventEmitter();
    };
    /**
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.inputElement = this.el.nativeElement;
        _super.prototype.ngAfterViewInit.call(this);
        if (this.instance.ngControl &&
            this.instance.ngControl.formDirective &&
            this.instance.ngControl.formDirective.form &&
            this.instance.ngControl.formDirective.form.bindingData) {
            this.bindingData = this.instance.ngControl.formDirective.form.bindingData;
            this.bindingData.setValue = (/**
             * @param {?} fieldPath
             * @return {?}
             */
            function (fieldPath) {
                return _this.utils.setValue(fieldPath.join('.'), _this.bindingData, true);
            });
            this.bindingData.getValue = (/**
             * @param {?} fieldPath
             * @return {?}
             */
            function (fieldPath) {
                return _this.utils.getValue(fieldPath.join('.'), _this.bindingData, true);
            });
        }
    };
    /**
     * @param {?} selectedRow
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.updateControlValue = /**
     * @param {?} selectedRow
     * @return {?}
     */
    function (selectedRow) {
        if (this.instance.mapFields && this.bindingData) {
            this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);
        }
    };
    /**
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.inputClear = /**
     * @return {?}
     */
    function () {
        this.updateControlValue(null);
        this.instance.clear.emit();
        // 设计器上配置的清空事件
        if (this.options.inputClear) {
            this.options.inputClear();
        }
    };
    /**
     * @param {?} removedItem
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.tagRemoved = /**
     * @param {?} removedItem
     * @return {?}
     */
    function (removedItem) {
        var _this = this;
        /** @type {?} */
        var mapFields = this.instance.mapFields;
        /** @type {?} */
        var helpFields = Object.keys(mapFields);
        /** @type {?} */
        var bindingData = _.cloneDeep(this.bindingData);
        /** @type {?} */
        var selectedData = [];
        helpFields.forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var value = _this.utils.getValue(mapFields[key], bindingData);
            /** @type {?} */
            var vArr = value.split(',');
            vArr.splice(removedItem.deleteIndex, 1);
            vArr.forEach((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                if (!selectedData[i]) {
                    selectedData.push({ index: i });
                    selectedData[i][key] = v;
                }
                else {
                    selectedData[i][key] = v;
                }
            }));
            value = vArr.join(',');
            _this.utils.setValue(_this.bindingData, mapFields[key], value);
        }));
        if (selectedData.length) {
            this.instance.selectedData.emit(selectedData);
        }
        else {
            this.instance.clear.emit();
        }
        // 设计器上配置的删除单个标签事件
        if (this.options.tagRemoved) {
            this.options.tagRemoved(this.eventPrams(removedItem));
        }
    };
    /**
     * @param {?} changeData
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.selectionsChange = /**
     * @param {?} changeData
     * @return {?}
     */
    function (changeData) {
        /** @type {?} */
        var formedSelections = this.formSelectedRowData();
        this.updateControlValue(formedSelections);
        this.instance.selectedData.emit(formedSelections);
        // 设计器上配置的选中数据后事件
        if (this.options.selectionsChange) {
            this.options.selectionsChange(this.eventPrams(changeData));
        }
    };
    /**
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.formSelectedRowData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var selectedRowData = [];
        this.instance.selections.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var defaultDisplayName = _this.instance.displayField ? item[_this.instance.displayField] : "" + item.name;
            /** @type {?} */
            var displayName = _this.instance.formatFn ? _this.instance.formatFn(item) : defaultDisplayName;
            selectedRowData.push(Object.assign({}, item, { displayName: displayName }));
        }));
        return selectedRowData.length ? selectedRowData : null;
    };
    /**
     * @private
     * @param {?} $event
     * @return {?}
     */
    DataGridAdminOrganizationSelectorComponent.prototype.eventPrams = /**
     * @private
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var p = this.eventParams($event);
        p['instance'] = this.instance;
        p['editor'] = this;
        return p;
    };
    DataGridAdminOrganizationSelectorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-grid-adminorganization-selector',
                    template: "<div [formGroup]=\"group\" class=\"f-datagrid-cell-formgroup farris-group-auto\">\r\n    <farris-adminorganization-selector #orgSelection style=\"width: 100%\"\r\n      [placeholder]=\"options.placeholder\" [readonly]=\"options.readonly\" [absOrgType]=\"options.absOrgType\" [multiSelect]=\"options.multiSelect\"\r\n      [mapFields]=\"options.mapFields\" [formControlName]=\"column.field\" [primaryField]=\"options.primaryField\" [displayField]=\"options.displayField\"\r\n      [formatFn]=\"options.formatter\" [layer]=\"options.expandLevel\" [enableHierarchicalLoading]=\"options.enableHierarchicalLoading\"\r\n      [cascadeCheck]=\"options.cascadeCheck\" [cascadeDown]=\"options.cascadeDown\" [cascadeUp]=\"options.cascadeUp\"\r\n      [showTabIds]=\"options.showTabIds\" [activeTabId]=\"options.activeTabId\" [busNum]=\"options.busNum\"\r\n      (inputClear)=\"inputClear()\" (selectionsChange)=\"selectionsChange($event)\" (tagRemoved)=\"tagRemoved($event)\">\r\n    </farris-adminorganization-selector>\r\n</div>"
                }] }
    ];
    /** @nocollapse */
    DataGridAdminOrganizationSelectorComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: RuntimeStateService },
        { type: CommonUtils },
        { type: Injector }
    ]; };
    DataGridAdminOrganizationSelectorComponent.propDecorators = {
        instance: [{ type: ViewChild, args: ['orgSelection',] }]
    };
    return DataGridAdminOrganizationSelectorComponent;
}(DatagridBaseEditorDirective));
export { DataGridAdminOrganizationSelectorComponent };
if (false) {
    /** @type {?} */
    DataGridAdminOrganizationSelectorComponent.prototype.instance;
    /** @type {?} */
    DataGridAdminOrganizationSelectorComponent.prototype.bindingData;
    /** @type {?} */
    DataGridAdminOrganizationSelectorComponent.prototype.lookupFieldMap;
    /**
     * @type {?}
     * @private
     */
    DataGridAdminOrganizationSelectorComponent.prototype.rts;
    /** @type {?} */
    DataGridAdminOrganizationSelectorComponent.prototype.utils;
}
/** @type {?} */
export var AdminOrganizationSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'AdminOrganizationSelector', value: DataGridAdminOrganizationSelectorComponent }, multi: true };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZC1hZG1pbm9yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLWRhdGFncmlkLWRmZi1lZGl0b3JzLyIsInNvdXJjZXMiOlsibGliL2dyaWQtYWRtaW5vcmdhbml6YXRpb24tc2VsZWN0b3IvZ3JpZC1hZG1pbm9yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBeUIsVUFBVSxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzSCxPQUFPLEVBQUUsV0FBVyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDckUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25ELE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFFLE9BQU8sS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDO0FBQy9CLE9BQU8sRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxXQUFXLENBQUM7O0lBR3hELHFDQUFxQyxHQUFHO0lBQzVDLFVBQVUsRUFBRSxxQkFBcUI7SUFDakMsUUFBUSxFQUFFLEtBQUs7SUFDZixXQUFXLEVBQUUsS0FBSztJQUNsQixNQUFNLEVBQUUsUUFBUTtJQUNoQixZQUFZLEVBQUUsT0FBTztJQUNyQixZQUFZLEVBQUUsTUFBTTtDQUNyQjtBQUVEO0lBSWdFLHNFQUEyQjtJQU12RixvREFDSSxNQUFpQixFQUNqQixFQUFjLEVBQ04sR0FBd0IsRUFDekIsS0FBa0IsRUFDekIsUUFBa0I7UUFMdEIsWUFPSSxrQkFBTSxNQUFNLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxTQUM5QjtRQUxXLFNBQUcsR0FBSCxHQUFHLENBQXFCO1FB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bEIsVUFBbUIsTUFBTTs7WUFDakIsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQzlCLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDbkIsT0FBTyxDQUFDLENBQUM7SUFDWCxDQUFDOztnQkFqSkosU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSx3Q0FBd0M7b0JBQ2xELHdnQ0FBK0Q7aUJBQ2hFOzs7O2dCQXBCOEUsU0FBUztnQkFBN0MsVUFBVTtnQkFDL0IsbUJBQW1CO2dCQUFoQyxXQUFXO2dCQURpRCxRQUFROzs7MkJBdUJ4RSxTQUFTLFNBQUMsY0FBYzs7SUE0STdCLGlEQUFDO0NBQUEsQUFsSkQsQ0FJZ0UsMkJBQTJCLEdBOEkxRjtTQTlJWSwwQ0FBMEM7OztJQUVuRCw4REFBd0k7O0lBRXhJLGlFQUFpQjs7SUFzQ2pCLG9FQWtCQzs7Ozs7SUFuREcseURBQWdDOztJQUNoQywyREFBeUI7OztBQXNJakMsTUFBTSxLQUFPLCtDQUErQyxHQUFHLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsMkJBQTJCLEVBQUUsS0FBSyxFQUFFLDBDQUEwQyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBBZnRlclZpZXdJbml0LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEluamVjdG9yLCBSZW5kZXJlcjIsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgUnVudGltZVN0YXRlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgR1JJRF9FRElUT1JTIH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IERhdGFncmlkQmFzZUVkaXRvckRpcmVjdGl2ZSB9IGZyb20gJ0BmYXJyaXMvdWktZGF0YWdyaWQtZWRpdG9ycyc7XHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgaXNOdWxsLCBpc1VuZGVmaW5lZCwgb21pdEJ5LCB0cmltIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgQWRtaW5Pcmdhbml6YXRpb25TZWxlY3RvckNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktYWRtaW5vcmdhbml6YXRpb24tc2VsZWN0b3InO1xyXG5cclxuY29uc3QgQWRtaW5Pcmdhbml6YXRpb25TZWxlY3RvckRlZmF1dE9wdGlvbiA9IHtcclxuICBhYnNPcmdUeXBlOiAnU3lzdGVtX29yZ2FuaXphdGlvbicsXHJcbiAgcmVhZG9ubHk6IGZhbHNlLFxyXG4gIHBsYWNlaG9sZGVyOiAn6K+36YCJ5oupJyxcclxuICBidXNOdW06ICdjb21tb24nLFxyXG4gIHByaW1hcnlGaWVsZDogJ29yZ0lkJyxcclxuICBkaXNwbGF5RmllbGQ6ICduYW1lJ1xyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdmYXJyaXMtZ3JpZC1hZG1pbm9yZ2FuaXphdGlvbi1zZWxlY3RvcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2dyaWQtYWRtaW5vcmdhbml6YXRpb24tc2VsZWN0b3IuY29tcG9uZW50Lmh0bWwnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYXRhR3JpZEFkbWluT3JnYW5pemF0aW9uU2VsZWN0b3JDb21wb25lbnQgZXh0ZW5kcyBEYXRhZ3JpZEJhc2VFZGl0b3JEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ29yZ1NlbGVjdGlvbicpIGluc3RhbmNlOiBBZG1pbk9yZ2FuaXphdGlvblNlbGVjdG9yQ29tcG9uZW50ICYgeyBjbGVhcjogRXZlbnRFbWl0dGVyPGFueT47IHNlbGVjdGVkRGF0YTogRXZlbnRFbWl0dGVyPGFueT4gfTtcclxuXHJcbiAgICBiaW5kaW5nRGF0YTogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlbmRlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgcnRzOiBSdW50aW1lU3RhdGVTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsXHJcbiAgICAgICAgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgICApIHtcclxuICAgICAgICBzdXBlcihyZW5kZXIsIGVsLCBpbmplY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBBZG1pbk9yZ2FuaXphdGlvblNlbGVjdG9yRGVmYXV0T3B0aW9uLCBvbWl0QnkodGhpcy5vcHRpb25zLCAoaXRlbVZhbHVlKSA9PiBpc1VuZGVmaW5lZChpdGVtVmFsdWUpIHx8IGlzTnVsbChpdGVtVmFsdWUpKSk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5zZWxlY3RlZERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmNsZWFyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuaW5zdGFuY2UubmdDb250cm9sICYmXHJcbiAgICAgICAgICB0aGlzLmluc3RhbmNlLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlICYmXHJcbiAgICAgICAgICB0aGlzLmluc3RhbmNlLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgICAgIHRoaXMuaW5zdGFuY2UubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5iaW5kaW5nRGF0YSA9IHRoaXMuaW5zdGFuY2UubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGEuc2V0VmFsdWUgPSAoZmllbGRQYXRoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLnNldFZhbHVlKGZpZWxkUGF0aC5qb2luKCcuJyksIHRoaXMuYmluZGluZ0RhdGEsIHRydWUpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGEuZ2V0VmFsdWUgPSAoZmllbGRQYXRoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZpZWxkUGF0aC5qb2luKCcuJyksIHRoaXMuYmluZGluZ0RhdGEsIHRydWUpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9va3VwRmllbGRNYXAgPSAoaGVscERhdGE6IGFueSwgbWFwRmllbGRzOiBhbnksIGRhdGFPYmo6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmIChtYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKG1hcEZpZWxkcyk7XHJcbiAgICAgICAgICAgIGhlbHBGaWVsZHMuZm9yRWFjaCgoaGVscEZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWwgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmIChoZWxwRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWxwRGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGhlbHBEYXRhLm1hcCgoZGF0YTogYW55KSA9PiB7IHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGhlbHBGaWVsZCwgZGF0YSk7IH0pLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLnV0aWxzLmdldFZhbHVlKGhlbHBGaWVsZCwgaGVscERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hcEZpZWxkc1toZWxwRmllbGRdLnNwbGl0KCcsJykuZm9yRWFjaCgoZmY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1GaWVsZCA9IHRyaW0oZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuc2V0VmFsdWUoZGF0YU9iaiwgZm9ybUZpZWxkLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDb250cm9sVmFsdWUoc2VsZWN0ZWRSb3c6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlLm1hcEZpZWxkcyAmJiB0aGlzLmJpbmRpbmdEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwRmllbGRNYXAoc2VsZWN0ZWRSb3csIHRoaXMuaW5zdGFuY2UubWFwRmllbGRzLCB0aGlzLmJpbmRpbmdEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5wdXRDbGVhcigpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xWYWx1ZShudWxsKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICAvLyDorr7orqHlmajkuIrphY3nva7nmoTmuIXnqbrkuovku7ZcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmlucHV0Q2xlYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmlucHV0Q2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGFnUmVtb3ZlZChyZW1vdmVkSXRlbToge1xyXG4gICAgICAgIGRlbGV0ZUl0ZW06IGFueSxcclxuICAgICAgICBkZWxldGVJbmRleDogbnVtYmVyLFxyXG4gICAgICAgIHNlbGVjdGlvbnM6IEFycmF5PGFueT5cclxuICAgIH0pIHtcclxuICAgICAgICBjb25zdCBtYXBGaWVsZHMgPSB0aGlzLmluc3RhbmNlLm1hcEZpZWxkcztcclxuICAgICAgICBjb25zdCBoZWxwRmllbGRzID0gT2JqZWN0LmtleXMobWFwRmllbGRzKTtcclxuICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IF8uY2xvbmVEZWVwKHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0YSA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnV0aWxzLmdldFZhbHVlKG1hcEZpZWxkc1trZXldLCBiaW5kaW5nRGF0YSk7XHJcbiAgICAgICAgICBjb25zdCB2QXJyID0gdmFsdWUuc3BsaXQoJywnKTtcclxuICAgICAgICAgIHZBcnIuc3BsaWNlKHJlbW92ZWRJdGVtLmRlbGV0ZUluZGV4LCAxKTtcclxuICAgICAgICAgIHZBcnIuZm9yRWFjaCgodiwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkRGF0YVtpXSkge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkRGF0YS5wdXNoKHsgaW5kZXg6IGkgfSk7XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhW2ldW2tleV0gPSB2O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkRGF0YVtpXVtrZXldID0gdjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB2YWx1ZSA9IHZBcnIuam9pbignLCcpO1xyXG4gICAgICAgICAgdGhpcy51dGlscy5zZXRWYWx1ZSh0aGlzLmJpbmRpbmdEYXRhLCBtYXBGaWVsZHNba2V5XSwgdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLmluc3RhbmNlLnNlbGVjdGVkRGF0YS5lbWl0KHNlbGVjdGVkRGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaW5zdGFuY2UuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDorr7orqHlmajkuIrphY3nva7nmoTliKDpmaTljZXkuKrmoIfnrb7kuovku7ZcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRhZ1JlbW92ZWQpIHtcclxuICAgICAgICAgIHRoaXMub3B0aW9ucy50YWdSZW1vdmVkKHRoaXMuZXZlbnRQcmFtcyhyZW1vdmVkSXRlbSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3Rpb25zQ2hhbmdlKGNoYW5nZURhdGE6IHtcclxuICAgICAgICBpbmZvOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogQXJyYXk8YW55PlxyXG4gICAgfSkge1xyXG4gICAgICBjb25zdCBmb3JtZWRTZWxlY3Rpb25zID0gdGhpcy5mb3JtU2VsZWN0ZWRSb3dEYXRhKCk7XHJcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFZhbHVlKGZvcm1lZFNlbGVjdGlvbnMpO1xyXG4gICAgICB0aGlzLmluc3RhbmNlLnNlbGVjdGVkRGF0YS5lbWl0KGZvcm1lZFNlbGVjdGlvbnMpO1xyXG4gICAgICAvLyDorr7orqHlmajkuIrphY3nva7nmoTpgInkuK3mlbDmja7lkI7kuovku7ZcclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zZWxlY3Rpb25zQ2hhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnNlbGVjdGlvbnNDaGFuZ2UodGhpcy5ldmVudFByYW1zKGNoYW5nZURhdGEpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvcm1TZWxlY3RlZFJvd0RhdGEoKSB7XHJcbiAgICAgIGxldCBzZWxlY3RlZFJvd0RhdGEgPSBbXTtcclxuICAgICAgdGhpcy5pbnN0YW5jZS5zZWxlY3Rpb25zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBkZWZhdWx0RGlzcGxheU5hbWUgPSB0aGlzLmluc3RhbmNlLmRpc3BsYXlGaWVsZCA/IGl0ZW1bdGhpcy5pbnN0YW5jZS5kaXNwbGF5RmllbGRdIDogYCR7aXRlbS5uYW1lfWA7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmluc3RhbmNlLmZvcm1hdEZuID8gdGhpcy5pbnN0YW5jZS5mb3JtYXRGbihpdGVtKSA6IGRlZmF1bHREaXNwbGF5TmFtZTtcclxuICAgICAgICBzZWxlY3RlZFJvd0RhdGEucHVzaChPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7IGRpc3BsYXlOYW1lIH0pKTtcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIHNlbGVjdGVkUm93RGF0YS5sZW5ndGggPyBzZWxlY3RlZFJvd0RhdGEgOiBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJpdmF0ZSBldmVudFByYW1zKCRldmVudCk6IGFueSB7XHJcbiAgICAgIGNvbnN0IHAgPSB0aGlzLmV2ZW50UGFyYW1zKCRldmVudCk7XHJcbiAgICAgIHBbJ2luc3RhbmNlJ10gPSB0aGlzLmluc3RhbmNlO1xyXG4gICAgICBwWydlZGl0b3InXSA9IHRoaXM7XHJcbiAgICAgIHJldHVybiBwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQWRtaW5Pcmdhbml6YXRpb25TZWxlY3RvckRhdGFHcmlkRWRpdG9yUHJvdmlkZXIgPSB7IHByb3ZpZGU6IEdSSURfRURJVE9SUywgdXNlVmFsdWU6IHsgbmFtZTogJ0FkbWluT3JnYW5pemF0aW9uU2VsZWN0b3InLCB2YWx1ZTogRGF0YUdyaWRBZG1pbk9yZ2FuaXphdGlvblNlbGVjdG9yQ29tcG9uZW50IH0sIG11bHRpOiB0cnVlIH1cclxuIl19