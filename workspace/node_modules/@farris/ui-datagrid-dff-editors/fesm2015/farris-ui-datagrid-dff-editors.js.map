{"version":3,"file":"farris-ui-datagrid-dff-editors.js.map","sources":["ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.service.ts","ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/grid-employee-selector/grid-employee-selector.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/grid-adminorganization-selector/grid-adminorganization-selector.component.ts","ng://@farris/ui-datagrid-dff-editors/lib/datagrid-dff-editors.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DatagridDffEditorsService {\r\n\r\n  constructor() { }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'farris-datagrid-dff-editors',\r\n  template: `\r\n    <p>\r\n      datagrid-dff-editors works!\r\n    </p>\r\n  `,\r\n  styles: []\r\n})\r\nexport class DatagridDffEditorsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { GRID_EDITORS } from '@farris/ui-datagrid';\r\nimport { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';\r\nimport * as _ from 'lodash-es';\r\nimport { isNull, isUndefined, omitBy, trim } from 'lodash-es';\r\nimport { EmployeeSelectorComponent } from '@farris/ui-employee-selector';\r\n\r\nconst employeeSelectorDefautOption = {\r\n  absOrgType: 'System_organization',\r\n  readonly: false,\r\n  placeholder: '请选择',\r\n  viewType: 'tag',\r\n  busNum: 'common',\r\n  idField: 'userId'\r\n};\r\n\r\n@Component({\r\n  selector: 'farris-grid-employee-selector',\r\n  templateUrl: './grid-employee-selector.component.html'\r\n})\r\nexport class DatagridEmployeeSelectorComponent extends DatagridBaseEditorDirective implements OnInit, AfterViewInit {\r\n\r\n  @ViewChild('selection') instance: EmployeeSelectorComponent & { clear: EventEmitter<any>; selectedData: EventEmitter<any> };\r\n\r\n  bindingData: any;\r\n\r\n  constructor(\r\n    render: Renderer2,\r\n    el: ElementRef,\r\n    private rts: RuntimeStateService,\r\n    public utils: CommonUtils,\r\n    injector: Injector) {\r\n    super(render, el, injector);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    // 这里添加了过滤 this.options 中null、undefined,万一 jit 生成了 undefined 的呢，\r\n    this.options = Object.assign({}, employeeSelectorDefautOption, omitBy(this.options, (itemValue) => isUndefined(itemValue) || isNull(itemValue)));\r\n    this.instance.selectedData = new EventEmitter<any>();\r\n    this.instance.clear = new EventEmitter<any>();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputElement = this.el.nativeElement;\r\n    super.ngAfterViewInit();\r\n    if (\r\n      this.instance.ngControl &&\r\n      this.instance.ngControl.formDirective &&\r\n      this.instance.ngControl.formDirective.form &&\r\n      this.instance.ngControl.formDirective.form.bindingData\r\n    ) {\r\n      this.bindingData = this.instance.ngControl.formDirective.form.bindingData;\r\n      this.bindingData.setValue = (fieldPath) => {\r\n        return this.utils.setValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n      this.bindingData.getValue = (fieldPath) => {\r\n        return this.utils.getValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n    }\r\n\r\n  }\r\n\r\n  inputClear() {\r\n    this.updateControlValue(null);\r\n    this.instance.clear.emit();\r\n    if (this.options.inputClear) {\r\n      // 设计器上配置的清空事件\r\n      this.options.inputClear();\r\n    }\r\n  }\r\n\r\n  lookupFieldMap = (helpData, mapFields, dataObj) => {\r\n    if (mapFields) {\r\n      const helpFields = Object.keys(mapFields);\r\n      helpFields.forEach((f: any) => {\r\n        let val = '';\r\n        if (helpData) {\r\n          if (helpData instanceof Array) {\r\n            val = helpData.map((h: any) => {\r\n              return this.utils.getValue(f, h);\r\n            }).join(',');\r\n          } else {\r\n            val = this.utils.getValue(f, helpData);\r\n          }\r\n\r\n        }\r\n\r\n        mapFields[f].split(',').forEach((ff: any) => {\r\n          const field = trim(ff);\r\n          this.utils.setValue(dataObj, field, val);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  tagRemoved(removedItem: {\r\n    deleteItem: any,\r\n    deleteIndex: Number,\r\n    selections: Array<any>\r\n  }) {\r\n    const mapFields = this.instance.mapFields;\r\n    const helpFields = Object.keys(mapFields);\r\n    const bindingData = _.cloneDeep(this.bindingData);\r\n    const selectedData = [];\r\n\r\n    helpFields.forEach(key => {\r\n      let value = this.utils.getValue(mapFields[key], bindingData);\r\n      const vArr = value.split(',');\r\n      vArr.splice(removedItem.deleteIndex, 1);\r\n      vArr.forEach((v, i) => {\r\n        if (!selectedData[i]) {\r\n          selectedData.push({ index: i });\r\n          selectedData[i][key] = v;\r\n        } else {\r\n          selectedData[i][key] = v;\r\n        }\r\n      });\r\n      value = vArr.join(',');\r\n      this.utils.setValue(this.bindingData, mapFields[key], value);\r\n    });\r\n    if (selectedData.length) {\r\n      this.instance.selectedData.emit(selectedData);\r\n    } else {\r\n      this.instance.clear.emit();\r\n    }\r\n\r\n    // 设计器上配置的删除单个标签事件\r\n    if (this.options.tagRemoved) {\r\n      this.options.tagRemoved(this.eventPrams(removedItem));\r\n    }\r\n  }\r\n\r\n  selectionsChange(changeData: {\r\n    info: string,\r\n    data: Array<any>\r\n  }) {\r\n    const formedSelections = this.formSelectedRowData()\r\n    this.updateControlValue(formedSelections);\r\n    this.instance.selectedData.emit(formedSelections);\r\n    // 设计器上配置的选中数据后事件\r\n    if (this.options.selectionsChange) {\r\n      this.options.selectionsChange(this.eventPrams(changeData));\r\n    }\r\n  }\r\n\r\n  updateControlValue(selectedRow) {\r\n    if (this.instance.mapFields && this.bindingData) {\r\n      this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);\r\n    }\r\n  }\r\n\r\n\r\n  formSelectedRowData() {\r\n    let selectedRowData = [];\r\n    this.instance.selections.forEach((item) => {\r\n      const defaultDisplayName = this.instance.displayField ? item[this.instance.displayField] : `[${item.code}]${item.name}`;\r\n      const displayName = this.instance.formatFn ? this.instance.formatFn(item) : defaultDisplayName;\r\n      selectedRowData.push(Object.assign({}, item, { displayName }));\r\n    })\r\n    return selectedRowData.length ? selectedRowData : null;\r\n  }\r\n\r\n  private eventPrams($event): any {\r\n    const p = this.eventParams($event);\r\n    p['instance'] = this.instance;\r\n    p['editor'] = this;\r\n    return p;\r\n  }\r\n}\r\n\r\n\r\nexport const EmployeeSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'EmployeeSelector', value: DatagridEmployeeSelectorComponent }, multi: true }\r\n","import { Component, OnInit, AfterViewInit, ElementRef, EventEmitter, Injector, Renderer2, ViewChild } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { GRID_EDITORS } from '@farris/ui-datagrid';\r\nimport { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';\r\nimport * as _ from 'lodash-es';\r\nimport { isNull, isUndefined, omitBy, trim } from 'lodash-es';\r\nimport { AdminOrganizationSelectorComponent } from '@farris/ui-adminorganization-selector';\r\n\r\nconst AdminOrganizationSelectorDefautOption = {\r\n  absOrgType: 'System_organization',\r\n  readonly: false,\r\n  placeholder: '请选择',\r\n  busNum: 'common',\r\n  primaryField: 'orgId',\r\n  displayField: 'name'\r\n};\r\n\r\n@Component({\r\n  selector: 'farris-grid-adminorganization-selector',\r\n  templateUrl: './grid-adminorganization-selector.component.html'\r\n})\r\nexport class DataGridAdminOrganizationSelectorComponent extends DatagridBaseEditorDirective implements OnInit, AfterViewInit {\r\n\r\n    @ViewChild('orgSelection') instance: AdminOrganizationSelectorComponent & { clear: EventEmitter<any>; selectedData: EventEmitter<any> };\r\n\r\n    bindingData: any;\r\n\r\n    constructor(\r\n        render: Renderer2,\r\n        el: ElementRef,\r\n        private rts: RuntimeStateService,\r\n        public utils: CommonUtils,\r\n        injector: Injector\r\n    ) {\r\n        super(render, el, injector);\r\n    }\r\n\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.options = Object.assign({}, AdminOrganizationSelectorDefautOption, omitBy(this.options, (itemValue) => isUndefined(itemValue) || isNull(itemValue)));\r\n        this.instance.selectedData = new EventEmitter<any>();\r\n        this.instance.clear = new EventEmitter<any>();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.inputElement = this.el.nativeElement;\r\n        super.ngAfterViewInit();\r\n        if (\r\n          this.instance.ngControl &&\r\n          this.instance.ngControl.formDirective &&\r\n          this.instance.ngControl.formDirective.form &&\r\n          this.instance.ngControl.formDirective.form.bindingData\r\n        ) {\r\n          this.bindingData = this.instance.ngControl.formDirective.form.bindingData;\r\n          this.bindingData.setValue = (fieldPath) => {\r\n            return this.utils.setValue(fieldPath.join('.'), this.bindingData, true);\r\n          };\r\n          this.bindingData.getValue = (fieldPath) => {\r\n            return this.utils.getValue(fieldPath.join('.'), this.bindingData, true);\r\n          };\r\n        }\r\n    }\r\n\r\n    lookupFieldMap = (helpData: any, mapFields: any, dataObj: any) => {\r\n        if (mapFields) {\r\n            const helpFields = Object.keys(mapFields);\r\n            helpFields.forEach((helpField: any) => {\r\n                let val = '';\r\n                if (helpData) {\r\n                    if (helpData instanceof Array) {\r\n                        val = helpData.map((data: any) => { return this.utils.getValue(helpField, data); }).join(',');\r\n                    } else {\r\n                        val = this.utils.getValue(helpField, helpData);\r\n                    }\r\n                }\r\n                mapFields[helpField].split(',').forEach((ff: any) => {\r\n                    const formField = trim(ff);\r\n                    this.utils.setValue(dataObj, formField, val);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    updateControlValue(selectedRow: any) {\r\n        if (this.instance.mapFields && this.bindingData) {\r\n            this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);\r\n        }\r\n    }\r\n\r\n    inputClear() {\r\n        this.updateControlValue(null);\r\n        this.instance.clear.emit();\r\n        // 设计器上配置的清空事件\r\n        if (this.options.inputClear) {\r\n            this.options.inputClear();\r\n        }\r\n    }\r\n\r\n    tagRemoved(removedItem: {\r\n        deleteItem: any,\r\n        deleteIndex: number,\r\n        selections: Array<any>\r\n    }) {\r\n        const mapFields = this.instance.mapFields;\r\n        const helpFields = Object.keys(mapFields);\r\n        const bindingData = _.cloneDeep(this.bindingData);\r\n        const selectedData = [];\r\n    \r\n        helpFields.forEach(key => {\r\n          let value = this.utils.getValue(mapFields[key], bindingData);\r\n          const vArr = value.split(',');\r\n          vArr.splice(removedItem.deleteIndex, 1);\r\n          vArr.forEach((v, i) => {\r\n            if (!selectedData[i]) {\r\n              selectedData.push({ index: i });\r\n              selectedData[i][key] = v;\r\n            } else {\r\n              selectedData[i][key] = v;\r\n            }\r\n          });\r\n          value = vArr.join(',');\r\n          this.utils.setValue(this.bindingData, mapFields[key], value);\r\n        });\r\n        if (selectedData.length) {\r\n          this.instance.selectedData.emit(selectedData);\r\n        } else {\r\n          this.instance.clear.emit();\r\n        }\r\n        // 设计器上配置的删除单个标签事件\r\n        if (this.options.tagRemoved) {\r\n          this.options.tagRemoved(this.eventPrams(removedItem));\r\n        }\r\n    }\r\n\r\n    selectionsChange(changeData: {\r\n        info: string,\r\n        data: Array<any>\r\n    }) {\r\n      const formedSelections = this.formSelectedRowData();\r\n      this.updateControlValue(formedSelections);\r\n      this.instance.selectedData.emit(formedSelections);\r\n      // 设计器上配置的选中数据后事件\r\n      if (this.options.selectionsChange) {\r\n        this.options.selectionsChange(this.eventPrams(changeData));\r\n      }\r\n    }\r\n\r\n    formSelectedRowData() {\r\n      let selectedRowData = [];\r\n      this.instance.selections.forEach((item) => {\r\n        const defaultDisplayName = this.instance.displayField ? item[this.instance.displayField] : `${item.name}`;\r\n        const displayName = this.instance.formatFn ? this.instance.formatFn(item) : defaultDisplayName;\r\n        selectedRowData.push(Object.assign({}, item, { displayName }));\r\n      })\r\n      return selectedRowData.length ? selectedRowData : null;\r\n    }\r\n  \r\n    private eventPrams($event): any {\r\n      const p = this.eventParams($event);\r\n      p['instance'] = this.instance;\r\n      p['editor'] = this;\r\n      return p;\r\n    }\r\n}\r\n\r\nexport const AdminOrganizationSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'AdminOrganizationSelector', value: DataGridAdminOrganizationSelectorComponent }, multi: true }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule } from '@farris/ui-datagrid-editors';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { EmployeeSelectorModule } from '@farris/ui-employee-selector';\r\nimport { AdminOrganizationSelectorModule } from '@farris/ui-adminorganization-selector';\r\nimport { DatagridDffEditorsComponent } from './datagrid-dff-editors.component';\r\nimport { DatagridEmployeeSelectorComponent } from './grid-employee-selector/grid-employee-selector.component';\r\nimport { DataGridAdminOrganizationSelectorComponent } from './grid-adminorganization-selector/grid-adminorganization-selector.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DatagridDffEditorsComponent,\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    DatagridModule,\r\n    DatagridEditorsModule,\r\n    FarrisFormsModule,\r\n    EmployeeSelectorModule,\r\n    AdminOrganizationSelectorModule\r\n  ],\r\n  providers: [\r\n  ],\r\n  entryComponents: [\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ],\r\n  exports: [\r\n    DatagridDffEditorsComponent,\r\n    DatagridEmployeeSelectorComponent,\r\n    DataGridAdminOrganizationSelectorComponent\r\n  ]\r\n})\r\nexport class DatagridDffEditorsModule { }\r\n"],"names":["_.cloneDeep"],"mappings":"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"}
