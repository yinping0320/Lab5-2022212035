/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { FieldConfig } from '../entity/fieldconfig/fieldconfig';
import { QueryCondition } from '../entity/querycondition';
import { EnumType } from '../entity/controltype/dropdownlist/enumtype';
import { EnumBoolValue } from '../entity/controltype/dropdownlist/boolenumvalue';
import { EnumIntegerValue } from '../entity/controltype/dropdownlist/integerenumvalue';
import { EnumStringValue } from '../entity/controltype/dropdownlist/stringenumvalue';
import { ControlType } from '../entity/controltype';
import { CompareType } from '../entity/comparetype';
import { ValueType } from '../entity/valuetype';
import { RelationType } from '../entity/relationtype';
import { CheckboxEnumValue } from '../entity/controltype/checkbox/ienumvalue';
export class ConvertorService {
    constructor() { }
    // private solutionservice:SolutionService
    /**
     * 获取已选择的字段配置
     * @param {?} selectedConditions
     * @return {?}
     */
    getFeildConfigs(selectedConditions) {
        /** @type {?} */
        let fieldsConfigs = new Array();
        if (!selectedConditions || selectedConditions.length <= 0) {
            return fieldsConfigs;
        }
        else {
            selectedConditions.forEach((/**
             * @param {?} condition
             * @return {?}
             */
            condition => {
                /** @type {?} */
                let fieldConfig = new FieldConfig();
                fieldConfig.id = condition.id;
                fieldConfig.labelCode = condition.fieldCode;
                fieldConfig.name = condition.fieldName;
                fieldConfig.control = condition.control;
                fieldsConfigs.push(fieldConfig);
            }));
        }
        return fieldsConfigs;
    }
    /**
     * @param {?} fileds
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSelectedFieldConditions(fileds, selectedFieldConditions) {
        // console.log(selectedFieldConditions);
        /** @type {?} */
        let tempSelectedFieldConditions = new Array();
        tempSelectedFieldConditions = this.arrayClone(selectedFieldConditions);
        selectedFieldConditions = new Array();
        fileds.forEach((/**
         * @param {?} filed
         * @return {?}
         */
        filed => {
            filed.control = this.getDropListEnumValues((/** @type {?} */ (filed.control)));
            // filed.control = this.getCheckGroupEnumValues(filed.control as CheckboxGroupControl);
            if (tempSelectedFieldConditions.length > 0) {
                /** @type {?} */
                let tempIndex = tempSelectedFieldConditions.findIndex((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x.id == filed.id));
                if (tempIndex != (-1)) {
                    selectedFieldConditions.push(tempSelectedFieldConditions[tempIndex]);
                }
                else {
                    selectedFieldConditions = this.getNewFieldConditions(filed, selectedFieldConditions);
                }
            }
            else {
                selectedFieldConditions = this.getNewFieldConditions(filed, selectedFieldConditions);
            }
        }));
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    getDropListEnumValues(control) {
        if (control.valueType == EnumType.BoolType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumBoolValue(), element));
            }));
            control.enumValues = enumValues;
        }
        else if (control.valueType == EnumType.IntType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumIntegerValue(), element));
            }));
            control.enumValues = enumValues;
        }
        else if (control.valueType == EnumType.StringType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumStringValue(), element));
            }));
            control.enumValues = enumValues;
        }
        return control;
    }
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    getCheckGroupEnumValues(control) {
        /** @type {?} */
        let enumValues = new Array();
        control.enumValues.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            enumValues.push(Object.assign(new CheckboxEnumValue(), element));
        }));
        control.enumValues = enumValues;
        return control;
    }
    /**
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getNewFieldConditions(filed, selectedFieldConditions) {
        /** @type {?} */
        let selectedFieldCondition = new QueryCondition();
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.filled = filed.filled;
        selectedFieldCondition.valueText = filed.valueText;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldCondition.labelCode = filed.labelCode;
        if (filed.control.getControlType() == ControlType.Text) {
            selectedFieldConditions = this.getTextValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRangeTime) {
            selectedFieldConditions = this.getDateRangeTimeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.MonthRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.YearRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Year) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Month) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.NumberRange) {
            selectedFieldConditions = this.getNumberRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Help) {
            selectedFieldConditions = this.getSmartHelpValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DropDown) {
            selectedFieldConditions = this.getDropDownValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Search) {
            selectedFieldConditions = this.getSearchValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Date) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.CheckboxGroup) {
            selectedFieldConditions = this.getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Radio) {
            selectedFieldConditions = this.getRadioValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.InputGroup) {
            selectedFieldConditions = this.getInputGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Number) {
            selectedFieldConditions = this.getNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.FlexibleNumber) {
            selectedFieldConditions = this.getFlexibleNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.FlexibleDate) {
            selectedFieldConditions = this.getFlexibleDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.BoolCheck) {
            selectedFieldConditions = this.getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDropDownValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getDropListEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getRadioValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSmartHelpValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getFlexibleNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getFlexibleDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getNumberRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateRangeTimeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getTextValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getInputGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSearchValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    arrayClone(input) {
        /** @type {?} */
        let result = new Array();
        if (input && input.length > 0) {
            input.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                result.push(Object.assign({}, element));
            }));
        }
        return result;
    }
}
ConvertorService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ConvertorService.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVydG9yc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZmlsdGVyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvY29udmVydG9yc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDaEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzFELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN2RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDakYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDdkYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUd0RCxPQUFPLEVBQXNCLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFHbEcsTUFBTSxPQUFPLGdCQUFnQjtJQUV6QixnQkFBZ0IsQ0FBQzs7Ozs7OztJQU1qQixlQUFlLENBQUMsa0JBQXlDOztZQUNqRCxhQUFhLEdBQUcsSUFBSSxLQUFLLEVBQWU7UUFDNUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDdkQsT0FBTyxhQUFhLENBQUM7U0FDeEI7YUFDSTtZQUNELGtCQUFrQixDQUFDLE9BQU87Ozs7WUFBQyxTQUFT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LENBQUMsQ0FBQztZQUM1QyxDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7O1lBcFJKLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZpZWxkQ29uZmlnIH0gZnJvbSAnLi4vZW50aXR5L2ZpZWxkY29uZmlnL2ZpZWxkY29uZmlnJztcclxuaW1wb3J0IHsgUXVlcnlDb25kaXRpb24gfSBmcm9tICcuLi9lbnRpdHkvcXVlcnljb25kaXRpb24nO1xyXG5pbXBvcnQgeyBFbnVtVHlwZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvZW51bXR5cGUnO1xyXG5pbXBvcnQgeyBFbnVtQm9vbFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2Ryb3Bkb3dubGlzdC9ib29sZW51bXZhbHVlJztcclxuaW1wb3J0IHsgRW51bUludGVnZXJWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvaW50ZWdlcmVudW12YWx1ZSc7XHJcbmltcG9ydCB7IEVudW1TdHJpbmdWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3Qvc3RyaW5nZW51bXZhbHVlJztcclxuaW1wb3J0IHsgQ29udHJvbFR5cGUgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUnO1xyXG5pbXBvcnQgeyBDb21wYXJlVHlwZSB9IGZyb20gJy4uL2VudGl0eS9jb21wYXJldHlwZSc7XHJcbmltcG9ydCB7IFZhbHVlVHlwZSB9IGZyb20gJy4uL2VudGl0eS92YWx1ZXR5cGUnO1xyXG5pbXBvcnQgeyBSZWxhdGlvblR5cGUgfSBmcm9tICcuLi9lbnRpdHkvcmVsYXRpb250eXBlJztcclxuaW1wb3J0IHsgRHJvcERvd25Db250cm9sIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2Ryb3Bkb3dubGlzdC9kcm9wZG93bmNvbnRyb2wnO1xyXG5pbXBvcnQgeyBDaGVja2JveEdyb3VwQ29udHJvbCB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9jaGVja2JveC9jaGVja2JveGNvbnRyb2wnO1xyXG5pbXBvcnQgeyBDaGVja2JveElFbnVtVmFsdWUsIENoZWNrYm94RW51bVZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2NoZWNrYm94L2llbnVtdmFsdWUnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ29udmVydG9yU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIC8vIHByaXZhdGUgc29sdXRpb25zZXJ2aWNlOlNvbHV0aW9uU2VydmljZVxyXG4gICAgLyoqXHJcbiAgICAqIOiOt+WPluW3sumAieaLqeeahOWtl+autemFjee9rlxyXG4gICAgKiBAcGFyYW0gc2VsZWN0ZWRDb25kaXRpb25zIFxyXG4gICAgKi9cclxuICAgIGdldEZlaWxkQ29uZmlncyhzZWxlY3RlZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIGxldCBmaWVsZHNDb25maWdzID0gbmV3IEFycmF5PEZpZWxkQ29uZmlnPigpO1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWRDb25kaXRpb25zIHx8IHNlbGVjdGVkQ29uZGl0aW9ucy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmllbGRzQ29uZmlncztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ29uZGl0aW9ucy5mb3JFYWNoKGNvbmRpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmllbGRDb25maWcgPSBuZXcgRmllbGRDb25maWcoKTtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLmlkID0gY29uZGl0aW9uLmlkO1xyXG4gICAgICAgICAgICAgICAgZmllbGRDb25maWcubGFiZWxDb2RlID0gY29uZGl0aW9uLmZpZWxkQ29kZTtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLm5hbWUgPSBjb25kaXRpb24uZmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgZmllbGRDb25maWcuY29udHJvbCA9IGNvbmRpdGlvbi5jb250cm9sO1xyXG4gICAgICAgICAgICAgICAgZmllbGRzQ29uZmlncy5wdXNoKGZpZWxkQ29uZmlnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaWVsZHNDb25maWdzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlbGVjdGVkRmllbGRDb25kaXRpb25zKGZpbGVkczogQXJyYXk8RmllbGRDb25maWc+LCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIGxldCB0ZW1wU2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAgICAgdGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5hcnJheUNsb25lKHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgICAgICBmaWxlZHMuZm9yRWFjaChmaWxlZCA9PiB7XHJcblxyXG4gICAgICAgICAgICBmaWxlZC5jb250cm9sID0gdGhpcy5nZXREcm9wTGlzdEVudW1WYWx1ZXMoZmlsZWQuY29udHJvbCBhcyBEcm9wRG93bkNvbnRyb2wpO1xyXG4gICAgICAgICAgICAvLyBmaWxlZC5jb250cm9sID0gdGhpcy5nZXRDaGVja0dyb3VwRW51bVZhbHVlcyhmaWxlZC5jb250cm9sIGFzIENoZWNrYm94R3JvdXBDb250cm9sKTtcclxuICAgICAgICAgICAgaWYgKHRlbXBTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gdGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zLmZpbmRJbmRleCh4ID0+IHguaWQgPT0gZmlsZWQuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBJbmRleCAhPSAoLTEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaCh0ZW1wU2VsZWN0ZWRGaWVsZENvbmRpdGlvbnNbdGVtcEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RHJvcExpc3RFbnVtVmFsdWVzKGNvbnRyb2w6IERyb3BEb3duQ29udHJvbCk6IERyb3BEb3duQ29udHJvbCB7XHJcbiAgICAgICAgaWYgKGNvbnRyb2wudmFsdWVUeXBlID09IEVudW1UeXBlLkJvb2xUeXBlKSB7XHJcbiAgICAgICAgICAgIGxldCBlbnVtVmFsdWVzID0gbmV3IEFycmF5PEVudW1Cb29sVmFsdWU+KCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlcy5wdXNoKE9iamVjdC5hc3NpZ24obmV3IEVudW1Cb29sVmFsdWUoKSwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY29udHJvbC52YWx1ZVR5cGUgPT0gRW51bVR5cGUuSW50VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgZW51bVZhbHVlcyA9IG5ldyBBcnJheTxFbnVtSW50ZWdlclZhbHVlPigpO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBFbnVtSW50ZWdlclZhbHVlKCksIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcyA9IGVudW1WYWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbnRyb2wudmFsdWVUeXBlID09IEVudW1UeXBlLlN0cmluZ1R5cGUpIHtcclxuICAgICAgICAgICAgbGV0IGVudW1WYWx1ZXMgPSBuZXcgQXJyYXk8RW51bVN0cmluZ1ZhbHVlPigpO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBFbnVtU3RyaW5nVmFsdWUoKSwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDaGVja0dyb3VwRW51bVZhbHVlcyhjb250cm9sOiBDaGVja2JveEdyb3VwQ29udHJvbCk6IENoZWNrYm94R3JvdXBDb250cm9sIHtcclxuICAgICAgICBsZXQgZW51bVZhbHVlcyA9IG5ldyBBcnJheTxDaGVja2JveElFbnVtVmFsdWU+KCk7XHJcbiAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBDaGVja2JveEVudW1WYWx1ZSgpLCBlbGVtZW50KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICByZXR1cm4gY29udHJvbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uID0gbmV3IFF1ZXJ5Q29uZGl0aW9uKCk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5pZCA9IGZpbGVkLmlkO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGRDb2RlID0gZmlsZWQubGFiZWxDb2RlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGROYW1lID0gZmlsZWQubmFtZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWxsZWQgPSBmaWxlZC5maWxsZWQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZVRleHQgPSBmaWxlZC52YWx1ZVRleHQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5sYWJlbENvZGUgPSBmaWxlZC5sYWJlbENvZGU7XHJcblxyXG4gICAgICAgIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuVGV4dCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0VGV4dFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVGltZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXJSYW5nZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXREYXRlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldE51bWJlclJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0U21hcnRIZWxwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRHJvcERvd24pIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERyb3BEb3duVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRTZWFyY2hWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXREYXRlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuQ2hlY2tib3hHcm91cCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0Q2hlY2tib3hHcm91cFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlJhZGlvKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRSYWRpb1ZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldElucHV0R3JvdXBWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5OdW1iZXIpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldE51bWJlclZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkZsZXhpYmxlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRGbGV4aWJsZU51bWJlclZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkZsZXhpYmxlRGF0ZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RmxleGlibGVEYXRlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuQm9vbENoZWNrKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRDaGVja2JveEdyb3VwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREcm9wRG93blZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgdGhpcy5nZXREcm9wTGlzdEVudW1WYWx1ZXMoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sIGFzIERyb3BEb3duQ29udHJvbCk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldFJhZGlvVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICB0aGlzLmdldENoZWNrR3JvdXBFbnVtVmFsdWVzKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCBhcyBDaGVja2JveEdyb3VwQ29udHJvbCk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDaGVja2JveEdyb3VwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICB0aGlzLmdldENoZWNrR3JvdXBFbnVtVmFsdWVzKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCBhcyBDaGVja2JveEdyb3VwQ29udHJvbCk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTbWFydEhlbHBWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RmxleGlibGVOdW1iZXJWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkJldFdlZW47XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldEZsZXhpYmxlRGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmJlZ2luUGxhY2VIb2xkZXIgPSBmaWxlZC5iZWdpblBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZW5kUGxhY2VIb2xkZXIgPSBmaWxlZC5lbmRQbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuQmV0V2VlbjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0TnVtYmVyVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0TnVtYmVyUmFuZ2VWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkJldFdlZW47XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYXRlUmFuZ2VWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkJldFdlZW47XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYXRlUmFuZ2VUaW1lVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uYmVnaW5QbGFjZUhvbGRlciA9IGZpbGVkLmJlZ2luUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5lbmRQbGFjZUhvbGRlciA9IGZpbGVkLmVuZFBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VGV4dFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYXRlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldElucHV0R3JvdXBWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U2VhcmNoVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFycmF5Q2xvbmUoaW5wdXQ6IEFycmF5PGFueT4pOiBBcnJheTxhbnk+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IEFycmF5PGFueT4oKTtcclxuICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goT2JqZWN0LmFzc2lnbih7fSwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSJdfQ==