/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { FieldConfig } from '../entity/fieldconfig/fieldconfig';
import { QueryCondition } from '../entity/querycondition';
import { EnumType } from '../entity/controltype/dropdownlist/enumtype';
import { EnumBoolValue } from '../entity/controltype/dropdownlist/boolenumvalue';
import { EnumIntegerValue } from '../entity/controltype/dropdownlist/integerenumvalue';
import { EnumStringValue } from '../entity/controltype/dropdownlist/stringenumvalue';
import { ControlType } from '../entity/controltype';
import { CompareType } from '../entity/comparetype';
import { ValueType } from '../entity/valuetype';
import { RelationType } from '../entity/relationtype';
import { CheckboxEnumValue } from '../entity/controltype/checkbox/ienumvalue';
var ConvertorService = /** @class */ (function () {
    function ConvertorService() {
    }
    // private solutionservice:SolutionService
    /**
    * 获取已选择的字段配置
    * @param selectedConditions
    */
    // private solutionservice:SolutionService
    /**
     * 获取已选择的字段配置
     * @param {?} selectedConditions
     * @return {?}
     */
    ConvertorService.prototype.getFeildConfigs = 
    // private solutionservice:SolutionService
    /**
     * 获取已选择的字段配置
     * @param {?} selectedConditions
     * @return {?}
     */
    function (selectedConditions) {
        /** @type {?} */
        var fieldsConfigs = new Array();
        if (!selectedConditions || selectedConditions.length <= 0) {
            return fieldsConfigs;
        }
        else {
            selectedConditions.forEach((/**
             * @param {?} condition
             * @return {?}
             */
            function (condition) {
                /** @type {?} */
                var fieldConfig = new FieldConfig();
                fieldConfig.id = condition.id;
                fieldConfig.labelCode = condition.fieldCode;
                fieldConfig.name = condition.fieldName;
                fieldConfig.control = condition.control;
                fieldsConfigs.push(fieldConfig);
            }));
        }
        return fieldsConfigs;
    };
    /**
     * @param {?} fileds
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getSelectedFieldConditions = /**
     * @param {?} fileds
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (fileds, selectedFieldConditions) {
        var _this = this;
        // console.log(selectedFieldConditions);
        /** @type {?} */
        var tempSelectedFieldConditions = new Array();
        tempSelectedFieldConditions = this.arrayClone(selectedFieldConditions);
        selectedFieldConditions = new Array();
        fileds.forEach((/**
         * @param {?} filed
         * @return {?}
         */
        function (filed) {
            filed.control = _this.getDropListEnumValues((/** @type {?} */ (filed.control)));
            // filed.control = this.getCheckGroupEnumValues(filed.control as CheckboxGroupControl);
            if (tempSelectedFieldConditions.length > 0) {
                /** @type {?} */
                var tempIndex = tempSelectedFieldConditions.findIndex((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return x.id == filed.id; }));
                if (tempIndex != (-1)) {
                    selectedFieldConditions.push(tempSelectedFieldConditions[tempIndex]);
                }
                else {
                    selectedFieldConditions = _this.getNewFieldConditions(filed, selectedFieldConditions);
                }
            }
            else {
                selectedFieldConditions = _this.getNewFieldConditions(filed, selectedFieldConditions);
            }
        }));
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    ConvertorService.prototype.getDropListEnumValues = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        if (control.valueType == EnumType.BoolType) {
            /** @type {?} */
            var enumValues_1 = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                enumValues_1.push(Object.assign(new EnumBoolValue(), element));
            }));
            control.enumValues = enumValues_1;
        }
        else if (control.valueType == EnumType.IntType) {
            /** @type {?} */
            var enumValues_2 = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                enumValues_2.push(Object.assign(new EnumIntegerValue(), element));
            }));
            control.enumValues = enumValues_2;
        }
        else if (control.valueType == EnumType.StringType) {
            /** @type {?} */
            var enumValues_3 = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                enumValues_3.push(Object.assign(new EnumStringValue(), element));
            }));
            control.enumValues = enumValues_3;
        }
        return control;
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    ConvertorService.prototype.getCheckGroupEnumValues = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        /** @type {?} */
        var enumValues = new Array();
        control.enumValues.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            enumValues.push(Object.assign(new CheckboxEnumValue(), element));
        }));
        control.enumValues = enumValues;
        return control;
    };
    /**
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getNewFieldConditions = /**
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (filed, selectedFieldConditions) {
        /** @type {?} */
        var selectedFieldCondition = new QueryCondition();
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.filled = filed.filled;
        selectedFieldCondition.valueText = filed.valueText;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldCondition.labelCode = filed.labelCode;
        if (filed.control.getControlType() == ControlType.Text) {
            selectedFieldConditions = this.getTextValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRangeTime) {
            selectedFieldConditions = this.getDateRangeTimeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.MonthRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.YearRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Year) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Month) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.NumberRange) {
            selectedFieldConditions = this.getNumberRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Help) {
            selectedFieldConditions = this.getSmartHelpValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DropDown) {
            selectedFieldConditions = this.getDropDownValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Search) {
            selectedFieldConditions = this.getSearchValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Date) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.CheckboxGroup) {
            selectedFieldConditions = this.getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Radio) {
            selectedFieldConditions = this.getRadioValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.InputGroup) {
            selectedFieldConditions = this.getInputGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Number) {
            selectedFieldConditions = this.getNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.FlexibleNumber) {
            selectedFieldConditions = this.getFlexibleNumberValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.FlexibleDate) {
            selectedFieldConditions = this.getFlexibleDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.BoolCheck) {
            selectedFieldConditions = this.getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getDropDownValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getDropListEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getRadioValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getCheckboxGroupValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getSmartHelpValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getFlexibleNumberValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getFlexibleDateValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getNumberValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getNumberRangeValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getDateRangeValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getDateRangeTimeValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getTextValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getDateValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getInputGroupValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    ConvertorService.prototype.getSearchValueFieldCondition = /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    function (selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    };
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    ConvertorService.prototype.arrayClone = /**
     * @private
     * @param {?} input
     * @return {?}
     */
    function (input) {
        /** @type {?} */
        var result = new Array();
        if (input && input.length > 0) {
            input.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                result.push(Object.assign({}, element));
            }));
        }
        return result;
    };
    ConvertorService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ConvertorService.ctorParameters = function () { return []; };
    return ConvertorService;
}());
export { ConvertorService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVydG9yc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZmlsdGVyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvY29udmVydG9yc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDaEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzFELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN2RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDakYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDdkYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUd0RCxPQUFPLEVBQXNCLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFFbEc7SUFHSTtJQUFnQixDQUFDO0lBQ2pCLDBDQUEwQztJQUMxQzs7O01BR0U7Ozs7Ozs7SUFDRiwwQ0FBZTs7Ozs7OztJQUFmLFVBQWdCLGtCQUF5Qzs7WUFDakQsYUFBYSxHQUFHLElBQUksS0FBSyxFQUFlO1FBQzVDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ3ZELE9BQU8sYUFBYSxDQUFDO1NBQ3hCO2FBQ0k7WUFDRCxrQkFBa0IsQ0FB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QUF1QixDQUFDO0lBQ25DLENBQUM7Ozs7OztJQUVPLHFDQUFVOzs7OztJQUFsQixVQUFtQixLQUFpQjs7WUFDNUIsTUFBTSxHQUFHLElBQUksS0FBSyxFQUFPO1FBQzdCLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzNCLEtBQUssQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxPQUFPO2dCQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDNUMsQ0FBQyxFQUFDLENBQUM7U0FDTjtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7O2dCQXBSSixVQUFVOzs7O0lBcVJYLHVCQUFDO0NBQUEsQUFyUkQsSUFxUkM7U0FwUlksZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGaWVsZENvbmZpZyB9IGZyb20gJy4uL2VudGl0eS9maWVsZGNvbmZpZy9maWVsZGNvbmZpZyc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uIH0gZnJvbSAnLi4vZW50aXR5L3F1ZXJ5Y29uZGl0aW9uJztcclxuaW1wb3J0IHsgRW51bVR5cGUgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUvZHJvcGRvd25saXN0L2VudW10eXBlJztcclxuaW1wb3J0IHsgRW51bUJvb2xWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvYm9vbGVudW12YWx1ZSc7XHJcbmltcG9ydCB7IEVudW1JbnRlZ2VyVmFsdWUgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUvZHJvcGRvd25saXN0L2ludGVnZXJlbnVtdmFsdWUnO1xyXG5pbXBvcnQgeyBFbnVtU3RyaW5nVmFsdWUgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUvZHJvcGRvd25saXN0L3N0cmluZ2VudW12YWx1ZSc7XHJcbmltcG9ydCB7IENvbnRyb2xUeXBlIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlJztcclxuaW1wb3J0IHsgQ29tcGFyZVR5cGUgfSBmcm9tICcuLi9lbnRpdHkvY29tcGFyZXR5cGUnO1xyXG5pbXBvcnQgeyBWYWx1ZVR5cGUgfSBmcm9tICcuLi9lbnRpdHkvdmFsdWV0eXBlJztcclxuaW1wb3J0IHsgUmVsYXRpb25UeXBlIH0gZnJvbSAnLi4vZW50aXR5L3JlbGF0aW9udHlwZSc7XHJcbmltcG9ydCB7IERyb3BEb3duQ29udHJvbCB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvZHJvcGRvd25jb250cm9sJztcclxuaW1wb3J0IHsgQ2hlY2tib3hHcm91cENvbnRyb2wgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUvY2hlY2tib3gvY2hlY2tib3hjb250cm9sJztcclxuaW1wb3J0IHsgQ2hlY2tib3hJRW51bVZhbHVlLCBDaGVja2JveEVudW1WYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9jaGVja2JveC9pZW51bXZhbHVlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIENvbnZlcnRvclNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICAvLyBwcml2YXRlIHNvbHV0aW9uc2VydmljZTpTb2x1dGlvblNlcnZpY2VcclxuICAgIC8qKlxyXG4gICAgKiDojrflj5blt7LpgInmi6nnmoTlrZfmrrXphY3nva5cclxuICAgICogQHBhcmFtIHNlbGVjdGVkQ29uZGl0aW9ucyBcclxuICAgICovXHJcbiAgICBnZXRGZWlsZENvbmZpZ3Moc2VsZWN0ZWRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBsZXQgZmllbGRzQ29uZmlncyA9IG5ldyBBcnJheTxGaWVsZENvbmZpZz4oKTtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkQ29uZGl0aW9ucyB8fCBzZWxlY3RlZENvbmRpdGlvbnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkc0NvbmZpZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZENvbmRpdGlvbnMuZm9yRWFjaChjb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkQ29uZmlnID0gbmV3IEZpZWxkQ29uZmlnKCk7XHJcbiAgICAgICAgICAgICAgICBmaWVsZENvbmZpZy5pZCA9IGNvbmRpdGlvbi5pZDtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLmxhYmVsQ29kZSA9IGNvbmRpdGlvbi5maWVsZENvZGU7XHJcbiAgICAgICAgICAgICAgICBmaWVsZENvbmZpZy5uYW1lID0gY29uZGl0aW9uLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLmNvbnRyb2wgPSBjb25kaXRpb24uY29udHJvbDtcclxuICAgICAgICAgICAgICAgIGZpZWxkc0NvbmZpZ3MucHVzaChmaWVsZENvbmZpZyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmllbGRzQ29uZmlncztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyhmaWxlZHM6IEFycmF5PEZpZWxkQ29uZmlnPiwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICBsZXQgdGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIHRlbXBTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuYXJyYXlDbG9uZShzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAgICAgZmlsZWRzLmZvckVhY2goZmlsZWQgPT4ge1xyXG5cclxuICAgICAgICAgICAgZmlsZWQuY29udHJvbCA9IHRoaXMuZ2V0RHJvcExpc3RFbnVtVmFsdWVzKGZpbGVkLmNvbnRyb2wgYXMgRHJvcERvd25Db250cm9sKTtcclxuICAgICAgICAgICAgLy8gZmlsZWQuY29udHJvbCA9IHRoaXMuZ2V0Q2hlY2tHcm91cEVudW1WYWx1ZXMoZmlsZWQuY29udHJvbCBhcyBDaGVja2JveEdyb3VwQ29udHJvbCk7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wU2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBJbmRleCA9IHRlbXBTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5maW5kSW5kZXgoeCA9PiB4LmlkID09IGZpbGVkLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZW1wSW5kZXggIT0gKC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2godGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zW3RlbXBJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldE5ld0ZpZWxkQ29uZGl0aW9ucyhmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldE5ld0ZpZWxkQ29uZGl0aW9ucyhmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERyb3BMaXN0RW51bVZhbHVlcyhjb250cm9sOiBEcm9wRG93bkNvbnRyb2wpOiBEcm9wRG93bkNvbnRyb2wge1xyXG4gICAgICAgIGlmIChjb250cm9sLnZhbHVlVHlwZSA9PSBFbnVtVHlwZS5Cb29sVHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgZW51bVZhbHVlcyA9IG5ldyBBcnJheTxFbnVtQm9vbFZhbHVlPigpO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBFbnVtQm9vbFZhbHVlKCksIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcyA9IGVudW1WYWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbnRyb2wudmFsdWVUeXBlID09IEVudW1UeXBlLkludFR5cGUpIHtcclxuICAgICAgICAgICAgbGV0IGVudW1WYWx1ZXMgPSBuZXcgQXJyYXk8RW51bUludGVnZXJWYWx1ZT4oKTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbnVtVmFsdWVzLnB1c2goT2JqZWN0LmFzc2lnbihuZXcgRW51bUludGVnZXJWYWx1ZSgpLCBlbGVtZW50KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMgPSBlbnVtVmFsdWVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjb250cm9sLnZhbHVlVHlwZSA9PSBFbnVtVHlwZS5TdHJpbmdUeXBlKSB7XHJcbiAgICAgICAgICAgIGxldCBlbnVtVmFsdWVzID0gbmV3IEFycmF5PEVudW1TdHJpbmdWYWx1ZT4oKTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbnVtVmFsdWVzLnB1c2goT2JqZWN0LmFzc2lnbihuZXcgRW51bVN0cmluZ1ZhbHVlKCksIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcyA9IGVudW1WYWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb250cm9sO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tHcm91cEVudW1WYWx1ZXMoY29udHJvbDogQ2hlY2tib3hHcm91cENvbnRyb2wpOiBDaGVja2JveEdyb3VwQ29udHJvbCB7XHJcbiAgICAgICAgbGV0IGVudW1WYWx1ZXMgPSBuZXcgQXJyYXk8Q2hlY2tib3hJRW51bVZhbHVlPigpO1xyXG4gICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbnVtVmFsdWVzLnB1c2goT2JqZWN0LmFzc2lnbihuZXcgQ2hlY2tib3hFbnVtVmFsdWUoKSwgZWxlbWVudCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcyA9IGVudW1WYWx1ZXM7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5ld0ZpZWxkQ29uZGl0aW9ucyhmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiA9IG5ldyBRdWVyeUNvbmRpdGlvbigpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkTmFtZSA9IGZpbGVkLm5hbWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZVR5cGUgPSBWYWx1ZVR5cGUuVmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZSA9IGZpbGVkLnZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmlsbGVkID0gZmlsZWQuZmlsbGVkO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWVUZXh0ID0gZmlsZWQudmFsdWVUZXh0O1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucmVsYXRpb25UeXBlID0gUmVsYXRpb25UeXBlLkFuZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgPSBmaWxlZC5jb250cm9sO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ubGFiZWxDb2RlID0gZmlsZWQubGFiZWxDb2RlO1xyXG5cclxuICAgICAgICBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlRleHQpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldFRleHRWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZVRpbWUpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVSYW5nZVRpbWVWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aFJhbmdlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXREYXRlUmFuZ2VWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXIpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk51bWJlclJhbmdlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXROdW1iZXJSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkhlbHApIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldFNtYXJ0SGVscFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRyb3BEb3duKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXREcm9wRG93blZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlNlYXJjaCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0U2VhcmNoVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldENoZWNrYm94R3JvdXBWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0UmFkaW9WYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5JbnB1dEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRJbnB1dEdyb3VwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXROdW1iZXJWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5GbGV4aWJsZU51bWJlcikge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RmxleGlibGVOdW1iZXJWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5GbGV4aWJsZURhdGUpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldEZsZXhpYmxlRGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkJvb2xDaGVjaykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0Q2hlY2tib3hHcm91cFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RHJvcERvd25WYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHRoaXMuZ2V0RHJvcExpc3RFbnVtVmFsdWVzKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCBhcyBEcm9wRG93bkNvbnRyb2wpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRSYWRpb1ZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGVja0dyb3VwRW51bVZhbHVlcyhzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgYXMgQ2hlY2tib3hHcm91cENvbnRyb2wpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tib3hHcm91cFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGVja0dyb3VwRW51bVZhbHVlcyhzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgYXMgQ2hlY2tib3hHcm91cENvbnRyb2wpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U21hcnRIZWxwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZsZXhpYmxlTnVtYmVyVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uYmVnaW5QbGFjZUhvbGRlciA9IGZpbGVkLmJlZ2luUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5lbmRQbGFjZUhvbGRlciA9IGZpbGVkLmVuZFBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRGbGV4aWJsZURhdGVWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkJldFdlZW47XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldE51bWJlclZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuQmV0V2VlbjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE51bWJlclJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uYmVnaW5QbGFjZUhvbGRlciA9IGZpbGVkLmJlZ2luUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5lbmRQbGFjZUhvbGRlciA9IGZpbGVkLmVuZFBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGF0ZVJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uYmVnaW5QbGFjZUhvbGRlciA9IGZpbGVkLmJlZ2luUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5lbmRQbGFjZUhvbGRlciA9IGZpbGVkLmVuZFBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGF0ZVJhbmdlVGltZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmJlZ2luUGxhY2VIb2xkZXIgPSBmaWxlZC5iZWdpblBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZW5kUGxhY2VIb2xkZXIgPSBmaWxlZC5lbmRQbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuQmV0V2VlbjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFRleHRWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRJbnB1dEdyb3VwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNlYXJjaFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcnJheUNsb25lKGlucHV0OiBBcnJheTxhbnk+KTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBBcnJheTxhbnk+KCk7XHJcbiAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5wdXQuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iXX0=