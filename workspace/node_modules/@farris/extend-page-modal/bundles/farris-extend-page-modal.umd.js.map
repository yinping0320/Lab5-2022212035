{"version":3,"file":"farris-extend-page-modal.umd.js.map","sources":["ng://@farris/extend-page-modal/lib/page-modal-ref.service.ts","ng://@farris/extend-page-modal/lib/page-modal-options.class.ts","ng://@farris/extend-page-modal/lib/page-modal-backdrop.component.ts","node_modules/tslib/tslib.es6.js","ng://@farris/extend-page-modal/lib/page-modal.component.ts","ng://@farris/extend-page-modal/lib/page-sidebar.component.ts","ng://@farris/extend-page-modal/lib/page-modal.service.ts","ng://@farris/extend-page-modal/lib/page-modal.module.ts"],"sourcesContent":["import { Injectable, ComponentRef, QueryList } from '@angular/core';\r\nimport { FEPageModalComponent } from './page-modal.component';\r\nimport {FEPageModalSidebarComponent} from './page-sidebar.component';\r\n\r\n@Injectable()\r\nexport class FEPageModalRef {\r\n  /**\r\n   * Reference to a component inside the modal. Null if modal's been created with TemplateRef\r\n   */\r\n  content?: any | null;\r\n  /**\r\n   * Hides the modal\r\n   */\r\n  close: () => void = Function;\r\n  dialog?: ComponentRef<FEPageModalComponent|FEPageModalSidebarComponent> | null;\r\n}\r\n","import { Injectable, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class FEPageModalOptions {\r\n    /**\r\n     *  Includes a modal-backdrop element. Alternatively,\r\n     *  specify static for a backdrop which doesn't close the modal on click.\r\n     */\r\n    backdrop?: boolean | 'static';\r\n    /**\r\n     * Closes the modal when escape key is pressed.\r\n     */\r\n    keyboard?: boolean;\r\n\r\n    focus?: boolean;\r\n    /**\r\n     * Shows the modal when initialized.\r\n     */\r\n    show?: boolean;\r\n    /**\r\n     * Ignore the backdrop click\r\n     */\r\n    ignoreBackdropClick?: boolean;\r\n    /**\r\n     * Css class for opened modal\r\n     */\r\n    class?: string;\r\n    /**\r\n     * Toggle animation\r\n     */\r\n    animated?: boolean;\r\n    /**\r\n     * Modal data\r\n     */\r\n    initialState?: object;\r\n     /**\r\n     * 显示关闭按钮\r\n     */\r\n    showCloseButton?: boolean;\r\n    /**\r\n     * 显示最大化按钮\r\n     */\r\n    showMaxButton?: boolean;\r\n    /**\r\n     * 显示最小化按钮\r\n     */\r\n    showMinButton?: boolean;\r\n\r\n    /**\r\n     * 窗口宽度\r\n     */\r\n    width?: number|string;\r\n    /**\r\n     * 窗口高度\r\n     */\r\n    height?: number|string;\r\n\r\n    minWidth?: number;\r\n    minHeight?: number;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    /** 启用拖拽功能 */\r\n    draggable?: boolean;\r\n\r\n    /** 启用调整尺寸大小 */\r\n    resizable?: boolean;\r\n\r\n    /** 是否启用滚动条 */\r\n    enableScroll?: boolean;\r\n\r\n    beforeOpen?: () => Observable<boolean>;\r\n    beforeClose?: (modalRef: any) => Observable<boolean>;\r\n    opened?: () => void;\r\n    closed?: (isCloseButtonClick: boolean | any) => void;\r\n    okText?: string;\r\n    cancelText?: string;\r\n    /** 弹窗类型：default，弹出组件、模板等；iframe,弹出iframe; ngFactory, 弹出ngFactory; sidebar:侧边栏 */\r\n    dialogType?: string;\r\n    // 窗口适应内容自动\r\n    fitContent?: boolean;\r\n    // 窗口内容区域是否自动响应式\r\n    areaResponse?:boolean;\r\n    sidebar?:object\r\n}\r\n\r\nexport const FEPModalConfigDefaults: FEPageModalOptions = {\r\n    backdrop: 'static',\r\n    keyboard: true,\r\n    focus: true,\r\n    show: false,\r\n    ignoreBackdropClick: true,\r\n    class: '',\r\n    animated: true,\r\n    initialState: {},\r\n    width: 600,\r\n    height: 450,\r\n    showCloseButton:true,\r\n    minHeight: null,\r\n    minWidth: null,\r\n    maxHeight: null,\r\n    maxWidth: null,\r\n    draggable: true,\r\n    resizable: true,\r\n    enableScroll: true,\r\n    beforeOpen: () => of(true),\r\n    beforeClose: () => of(true),\r\n    dialogType: 'modal',\r\n    fitContent: false,\r\n    areaResponse:true,\r\n    sidebar:{\r\n        showPos:'right',\r\n        parentCls:''\r\n    }\r\n};\r\n\r\nexport const FEPageModalCLASS_NAME: any = {\r\n    SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\r\n    BACKDROP: 'modal-backdrop',\r\n    OPEN: 'modal-open',\r\n    FADE: 'fade',\r\n    IN: 'in', // bs3\r\n    SHOW: 'show' // bs4\r\n};\r\n\r\nexport const FPageModalSELECTOR: any = {\r\n    DIALOG: '.modal-dialog',\r\n    DATA_TOGGLE: '[data-toggle=\"modal\"]',\r\n    DATA_DISMISS: '[data-dismiss=\"modal\"]',\r\n    FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\r\n};\r\n\r\nexport const FPageModalTRANSITION_DURATIONS: any = {\r\n    MODAL: 300,\r\n    BACKDROP: 150\r\n};\r\n\r\nexport const FPageModalDISMISS_REASONS = {\r\n    BACKRDOP: 'backdrop-click',\r\n    ESC: 'esc'\r\n};\r\n","import { Component, ElementRef, OnInit, Renderer2 } from '@angular/core';\r\nimport { FEPageModalCLASS_NAME } from './page-modal-options.class';\r\nimport { Utils} from '@farris/ui-modal/utils';\r\n\r\n/** This component will be added as background layout for modals if enabled */\r\n@Component({\r\n    selector: 'fe-modal-backdrop',\r\n    template: ' ',\r\n    host: { class: FEPageModalCLASS_NAME.BACKDROP }\r\n})\r\nexport class FEModalBackdropComponent implements OnInit {\r\n    get isAnimated(): boolean {\r\n        return this._isAnimated;\r\n    }\r\n\r\n    set isAnimated(value: boolean) {\r\n        this._isAnimated = value;\r\n        // this.renderer.setElementClass(this.element.nativeElement, `${ClassName.FADE}`, value);\r\n    }\r\n\r\n    get isShown(): boolean {\r\n        return this._isShown;\r\n    }\r\n\r\n    set isShown(value: boolean) {\r\n        this._isShown = value;\r\n        if (value) {\r\n            this.renderer.addClass(this.element.nativeElement, `${FEPageModalCLASS_NAME.IN}`);\r\n        } else {\r\n            this.renderer.removeClass(this.element.nativeElement, `${FEPageModalCLASS_NAME.IN}`);\r\n        }\r\n\r\n        if (value) {\r\n            this.renderer.addClass(\r\n                this.element.nativeElement,\r\n                `${FEPageModalCLASS_NAME.SHOW}`\r\n            );\r\n        } else {\r\n            this.renderer.removeClass(\r\n                this.element.nativeElement,\r\n                `${FEPageModalCLASS_NAME.SHOW}`\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    element: ElementRef;\r\n    renderer: Renderer2;\r\n\r\n    get dialogType():string{\r\n        return this._dialogType;\r\n    }\r\n    set dialogType(value:string){\r\n        // 只有一次显示，不考虑其他\r\n        if(value){\r\n            this.renderer.addClass(this.element.nativeElement,'fe-modal-backdrop-'+value);\r\n        }\r\n    }\r\n\r\n    protected _isAnimated: boolean;\r\n    protected _isShown = false;\r\n    protected _dialogType='modal';\r\n    constructor(element: ElementRef, renderer: Renderer2) {\r\n        this.element = element;\r\n        this.renderer = renderer;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.isAnimated) {\r\n            this.renderer.addClass(this.element.nativeElement, `${FEPageModalCLASS_NAME.FADE}`);\r\n            Utils.reflow(this.element.nativeElement);\r\n        }\r\n        this.isShown = true;\r\n    }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\r\n  Component, ElementRef, HostListener, OnDestroy,\r\n  OnInit, Renderer2, ViewChild, Output,\r\n  EventEmitter, TemplateRef, AfterViewInit, Input,\r\n  NgZone,\r\n  ViewChildren,\r\n  QueryList,\r\n  HostBinding\r\n} from '@angular/core';\r\nimport { AngularDraggableDirective } from '@farris/ui-draggable';\r\nimport { DomSanitizer, SafeResourceUrl } from \"@angular/platform-browser\";\r\nimport {\r\n  FEPageModalCLASS_NAME, FPageModalDISMISS_REASONS,\r\n  FEPageModalOptions, FPageModalTRANSITION_DURATIONS\r\n} from './page-modal-options.class';\r\nimport { FEPageModalService } from './page-modal.service';\r\n@Component({\r\n  selector: 'fe-page-modal',\r\n  template: `\r\n  <div [attr.id]=\"modalID\"\r\n  [ngDraggable]=\"config.draggable\"\r\n  [ngResizable]=\"config.resizable\"\r\n  [rzMinWidth]=\"config.minWidth\"\r\n  [rzMaxWidth]=\"config.maxWidth\"\r\n  [rzMinHeight]=\"config.minHeight\"\r\n  [rzMaxHeight]=\"config.maxHeight\"\r\n  rzHandles=\"all\" [handle]=\"dragEl\"\r\n  (stopped)=\"dropdown($event)\"\r\n  (rzStop)=\"resizeStop($event)\"\r\n  [inBounds]=\"true\" [bounds]=\"boundsElement\"\r\n  [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\" role=\"document\"\r\n  [style.width]=\"config.width + 'px'\" [style.height]=\"config.fitContent?'auto':(config.height + 'px')\"\r\n  style=\"position: absolute;top: 50%;left: 50%;\">\r\n  <div class=\"modal-content\">   \r\n      <ng-container *ngIf=\"config.showCloseButton&&!config.showMaxButton\">\r\n        <div class=\"action-wrapper\">\r\n          <span class=\"close-icon\" (click)=\"close($event, true)\">\r\n            <i class=\"f-icon f-icon-close\"></i>\r\n          </span>\r\n          </div>\r\n      </ng-container> \r\n      <ng-container *ngIf=\"config.showMaxButton\">\r\n        <ul class=\"action-list\" [ngDraggable]=\"true\" [handle]=\"actionListDrag\" [inBounds]=\"true\" [bounds]=\"boundsElement\">\r\n            <li class=\"action-list--item\" *ngIf=\"config.showCloseButton\">\r\n                <span class=\"action-list--icon close-icon\"  (click)=\"close($event, true)\">\r\n                  <i class=\"f-icon f-icon-close\"></i>\r\n                </span>\r\n            </li>\r\n            <li *ngIf=\"config.showMaxButton\" class=\"action-list--item\">\r\n                  <span class=\"action-list--icon max-icon\"  (click)=\"changeDialogSize()\" >                \r\n                    <i class=\"f-icon modal_maximize\" [class.modalrevert]=\"isMax\"></i>\r\n                  </span>\r\n            </li>\r\n            <div #actionListDrag class=\"action-list--drag\"></div>\r\n        </ul>     \r\n    </ng-container>   \r\n \r\n    <div #dragEl class=\"f-utils-absolute-all\" style=\"height:10px;z-index: 1;\"></div>\r\n        <div class=\"modal-body\" [class.f-utils-flex-column]=\"dialogType === 'iframe'\" [f-area-response]=\"config.areaResponse\">\r\n            <perfect-scrollbar [config]=\"{}\" [disabled]=\"!config.enableScroll||config.fitContent\"  *ngIf=\"dialogType!=='iframe'\">\r\n                <ng-content ></ng-content>\r\n            </perfect-scrollbar>\r\n            <iframe *ngIf=\"dialogType === 'iframe'\" class=\"f-utils-fill\" width=\"100%\" frameborder=\"0\" [src]=\"iframeSrc\"></iframe>\r\n        </div>\r\n    </div>\r\n</div>\r\n  `,\r\n  styles: [],\r\n  host: {\r\n    class: 'modal farris-modal fe-cmp-page-modal',\r\n    role: 'dialog',\r\n    tabindex: '-1',\r\n    '[attr.aria-modal]': 'true'\r\n  }\r\n})\r\nexport class FEPageModalComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  config: FEPageModalOptions;\r\n  isShown = false;\r\n  level: number;\r\n  isAnimated: boolean;\r\n  bsModalService: FEPageModalService;\r\n  dialogType: string;\r\n  iframeSrc: SafeResourceUrl;\r\n  @Input()\r\n  public set iframe(value: string) {\r\n    if (this.sanitizer) {\r\n      this.iframeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n    }\r\n  }\r\n\r\n  private isModalHiding = false;\r\n  private originalWidth: number|string;\r\n  private originalHeight: number|string;\r\n  isMax = false;\r\n  @ViewChild(AngularDraggableDirective) draggbar: AngularDraggableDirective;\r\n  @ViewChild('header') modalHeader: ElementRef;\r\n  boundsElement: HTMLElement;\r\n\r\n  @Output() closed = new EventEmitter();\r\n  @Output() opened = new EventEmitter();\r\n  @Output() resized = new EventEmitter();\r\n\r\n  @HostBinding('id') modalID = `MODALID_${Date.now().toPrecision()}`;\r\n\r\n  dlgHeaderLineHeight: any;\r\n  constructor(\r\n    options: FEPageModalOptions,\r\n    protected el: ElementRef,\r\n    private _renderer: Renderer2,\r\n    private sanitizer: DomSanitizer) {\r\n    this.config = Object.assign({}, options);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.boundsElement = this.el.nativeElement;\r\n    if (this.config.fitContent) {\r\n      this._renderer.addClass(this.el.nativeElement, 'f-modal-fitContent');\r\n    }\r\n\r\n    if (this.isAnimated) {\r\n      this._renderer.addClass(this.el.nativeElement, FEPageModalCLASS_NAME.FADE);\r\n    }\r\n    // this.ngZone.runOutsideAngular(() => {\r\n    setTimeout(() => {\r\n      this.isShown = true;\r\n      this._renderer.addClass(\r\n        this.el.nativeElement, FEPageModalCLASS_NAME.SHOW\r\n      );\r\n      this._renderer.setStyle(this.el.nativeElement, 'display', 'block');\r\n      if (this.config.fitContent && this.el.nativeElement.className.indexOf('f-modal-fitContent-scroll') > -1) {\r\n        this.el.nativeElement.scrollTop = 0;\r\n      }\r\n\r\n      if (document && document.body) {\r\n        const modalLen = this.bsModalService.getModalsCount();\r\n        if (modalLen === 1) {\r\n          this.bsModalService.checkScrollbar();\r\n          this.bsModalService.setScrollbar();\r\n        }\r\n        if (!document.body.classList.contains(FEPageModalCLASS_NAME.OPEN)) {\r\n          this._renderer.addClass(document.body, FEPageModalCLASS_NAME.OPEN);\r\n        }\r\n      }\r\n      this.opened.emit({ modal: this });\r\n    }, this.isAnimated ? FPageModalTRANSITION_DURATIONS.BACKDROP : 0);\r\n    // });\r\n\r\n    if (this.el.nativeElement) {\r\n      this.el.nativeElement.focus();\r\n    }\r\n\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this._renderer.setStyle(this.el.nativeElement, 'display', 'block');\r\n    // 如果内容适应宽度\r\n    if (this.config.fitContent) {\r\n      let initElRect = this.el.nativeElement.getBoundingClientRect();\r\n      let initBodySize = this.getContainerSize();\r\n      if (initElRect.height < initBodySize.height + 30) {\r\n        this._renderer.addClass(this.el.nativeElement, 'f-modal-fitContent-scroll');\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  // 获取内容区域的尺寸\r\n  getContainerSize() {\r\n    const bodyTarget = this.el.nativeElement.querySelector('.modal-body');\r\n    const height = bodyTarget.offsetHeight;\r\n    const width = bodyTarget.offsetWidth;\r\n    return { width, height };\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent) {\r\n    const tag = event.target as any;\r\n\r\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || event.target !== this.el.nativeElement) {\r\n      event.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    this.bsModalService.setDismissReason(FPageModalDISMISS_REASONS.BACKRDOP);\r\n    this.close();\r\n  }\r\n\r\n  @HostListener('window:keydown.esc', ['$event'])\r\n  onEsc(event: any): void {\r\n    if (!this.isShown) {\r\n      return;\r\n    }\r\n\r\n    if (event.keyCode === 27) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    if (\r\n      this.config.keyboard &&\r\n      this.level === this.bsModalService.getModalsCount()\r\n    ) {\r\n      this.bsModalService.setDismissReason(FPageModalDISMISS_REASONS.ESC);\r\n      this.close(event);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.isShown) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close(e?: MouseEvent, isCloseButton = false): void {\r\n    if (e) {\r\n      e.stopPropagation();\r\n    }\r\n    if (this.isModalHiding || !this.isShown) {\r\n      return;\r\n    }\r\n\r\n    this.config.beforeClose(this).subscribe(r => {\r\n      if (!r) {\r\n        return false;\r\n      }\r\n\r\n      this.isModalHiding = true;\r\n      this._renderer.removeClass(\r\n        this.el.nativeElement,\r\n        FEPageModalCLASS_NAME.SHOW\r\n      );\r\n      // this.ngZone.runOutsideAngular(() => {\r\n      setTimeout(() => {\r\n        this.isShown = false;\r\n        if (document &&\r\n          document.body\r\n        ) {\r\n          if (this.bsModalService.getModalsCount() === 1) {\r\n            this._renderer.removeClass(document.body, FEPageModalCLASS_NAME.OPEN);\r\n          }\r\n        }\r\n        this.bsModalService.hide(this.level);\r\n        this.isModalHiding = false;\r\n        if (this.config.closed) {\r\n          this.config.closed(isCloseButton);\r\n        }\r\n        this.closed.emit(this.level);\r\n      }, this.isAnimated ? FPageModalTRANSITION_DURATIONS.MODAL : 0);\r\n      // });\r\n    });\r\n  }\r\n\r\n  toCenter() {\r\n    const marginLeft = parseInt('' + -this.config.width / 2,10) + 'px';\r\n    const marginTop = parseInt('' + -this.config.height / 2,10) + 'px';\r\n\r\n    const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n    const contentEl = this.el.nativeElement.querySelector('.modal-body');\r\n\r\n    this._renderer.setStyle(dialogEl, 'margin-left', marginLeft);\r\n    this._renderer.setStyle(dialogEl, 'margin-top', marginTop);\r\n\r\n    let contentHeight =parseInt(''+ this.config.height,10) - 38;\r\n\r\n    if (!this.config.fitContent) {\r\n      this._renderer.setStyle(\r\n        contentEl,\r\n        'height',\r\n        contentHeight + 'px'\r\n      );\r\n    }\r\n    this._renderer.setStyle(contentEl, 'overflow', 'hidden');\r\n\r\n    this._renderer.setStyle(dialogEl, 'transform', `translate3d(0px, 0px, 0px)`);\r\n\r\n\r\n\r\n    setTimeout(() => {\r\n      const container = this.getContainerSize();\r\n      const { width: containerWidth, height: containerHeight } = container;\r\n      this.resized.emit({ width: this.config.width, height: this.config.height, containerWidth, containerHeight });\r\n    });\r\n  }\r\n\r\n  moveTo(x: number, y: number) {\r\n    const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n    this._renderer.setStyle(dialogEl, 'transform', `translate3d(${x}px, ${y}px, 0px)`);\r\n    this.draggbar.position = { x, y };\r\n    this.draggbar.resetPosition();\r\n  }\r\n\r\n  maxDialog() {\r\n    this.originalWidth = this.config.width;\r\n    this.originalHeight = this.config.height;\r\n    this.config.width = document.scrollingElement.clientWidth - 20;\r\n    this.config.height = document.scrollingElement.clientHeight - 20;\r\n\r\n    this.config.draggable = false;\r\n    this.config.resizable = false;\r\n    const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n    this._renderer.addClass(dialogEl, 'model-dialog-maximize');\r\n    this._renderer.setStyle(dialogEl, 'top', '50%');\r\n    this._renderer.setStyle(dialogEl, 'left', '50%');\r\n    this.isMax = true;\r\n    this.toCenter();\r\n  }\r\n\r\n  dropdown(el: any) {\r\n  }\r\n\r\n  revertDialog() {\r\n    this.isMax = false;\r\n    this.config.width = this.originalWidth;\r\n    this.config.height = this.originalHeight;\r\n    this.config.draggable = true;\r\n    this.config.resizable = true;\r\n    const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n    this._renderer.removeClass(dialogEl, 'model-dialog-maximize');\r\n    this.toCenter();\r\n    this.draggbar.resetPosition();\r\n  }\r\n\r\n  changeDialogSize() {\r\n    if (this.isMax) {\r\n      this.revertDialog();\r\n    } else {\r\n      this.maxDialog();\r\n    }\r\n  }\r\n\r\n  resizeStop(opts: any) {\r\n    this.config.width = opts.size.width;\r\n    this.config.height = opts.size.height;\r\n    const container = this.getContainerSize();\r\n    const { width: containerWidth, height: containerHeight } = container;\r\n    this.resized.emit({ ...opts.size, ...{ containerWidth, containerHeight } });\r\n  }\r\n}\r\n","import { Component, OnInit, Input, ContentChild, EventEmitter, Output, Renderer2, ElementRef, AfterContentInit, AfterViewInit, ViewChild, SimpleChanges, OnChanges, HostBinding, HostListener, OnDestroy } from '@angular/core';\r\nimport { AngularDraggableDirective } from '@farris/ui-draggable';\r\nimport { DomSanitizer, SafeResourceUrl } from \"@angular/platform-browser\";\r\nimport {\r\n    FEPageModalCLASS_NAME, FPageModalDISMISS_REASONS,\r\n    FEPageModalOptions, FPageModalTRANSITION_DURATIONS\r\n} from './page-modal-options.class';\r\nimport { FEPageModalService } from './page-modal.service';\r\n\r\n\r\n@Component({\r\n    selector: 'fe-page-sidebar',\r\n    templateUrl: './page-sidebar.component.html',\r\n    styleUrls: [],\r\n    host: {\r\n        class: 'fe-cmp-page-modal'\r\n    }\r\n})\r\nexport class FEPageModalSidebarComponent implements OnInit, OnDestroy,AfterContentInit {\r\n    config: FEPageModalOptions;\r\n    isShown = false;\r\n    level: number;\r\n    isAnimated: boolean;\r\n    bsModalService: FEPageModalService;\r\n    dialogType: string;\r\n    @Output() closed = new EventEmitter();\r\n    @Output() opened = new EventEmitter();\r\n    @Output() resized = new EventEmitter();\r\n    @HostBinding('id') modalID = `MODALID_${Date.now().toPrecision()}`;\r\n    iframeSrc: SafeResourceUrl = '';\r\n    private _iframe = '';\r\n    @Input()\r\n    public set iframe(value: string) {\r\n        if (this.sanitizer) {\r\n            this._iframe = value;\r\n            this.iframeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n        }\r\n    }\r\n    public get iframe() {\r\n        return this._iframe;\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick(event: MouseEvent) {\r\n        const tag = event.target as any;\r\n        if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || event.target !== this.el.nativeElement) {\r\n            event.stopPropagation();  \r\n            return;\r\n        }\r\n\r\n        this.bsModalService.setDismissReason(FPageModalDISMISS_REASONS.BACKRDOP);\r\n        this.close();\r\n    }\r\n\r\n    @HostListener('window:keydown.esc', ['$event'])\r\n    onEsc(event: any): void {\r\n        if (!this.isShown) {\r\n            return;\r\n        }\r\n\r\n        if (event.keyCode === 27) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (\r\n            this.config.keyboard &&\r\n            this.level === this.bsModalService.getModalsCount()\r\n        ) {\r\n            this.bsModalService.setDismissReason(FPageModalDISMISS_REASONS.ESC);\r\n            this.close(event);\r\n        }\r\n    }\r\n    private isModalHiding = false;\r\n\r\n    // 侧边栏所独有\r\n    @ViewChild('sidebarMain') private sidebarMainEl: ElementRef;\r\n    private canRemoveInitNoAnimateCls = true;\r\n    private parentEl: HTMLElement;\r\n    private sidebarCls = {\r\n        'parent': 'f-sidebar-parent',\r\n        'openParent': 'f-sidebar-parent-expand',\r\n        'closeParent': 'f-sidebar-parent-collapse',\r\n        'init': 'animated-none'\r\n    }\r\n    isOpen = false;\r\n    constructor(\r\n        options: FEPageModalOptions,\r\n        protected el: ElementRef,\r\n        private _renderer: Renderer2,\r\n        private sanitizer: DomSanitizer) {\r\n        this.config = Object.assign({}, options);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.parentEl = this.el.nativeElement.parentElement;\r\n        this._renderer.addClass(this.parentEl, this.sidebarCls.parent);\r\n        this.removeNoneAnimateCls();\r\n        setTimeout(() => {\r\n            this.isShown = true;\r\n            this.isOpen = true;\r\n            // this._renderer.addClass(\r\n            //     this.el.nativeElement, FEPageModalCLASS_NAME.SHOW\r\n            // );\r\n            // Parent\r\n            this._renderer.removeClass(this.parentEl, this.sidebarCls.closeParent);\r\n            this._renderer.addClass(this.parentEl, this.sidebarCls.openParent);\r\n            // this._renderer.setStyle(this.el.nativeElement, 'display', 'block');\r\n            // if (this.config.fitContent && this.el.nativeElement.className.indexOf('f-modal-fitContent-scroll') > -1) {\r\n            //   this.el.nativeElement.scrollTop = 0;\r\n            // }\r\n\r\n            // if (document && document.body) {\r\n            //     const modalLen = this.bsModalService.getModalsCount();\r\n            //     if (modalLen === 1) {\r\n            //         this.bsModalService.checkScrollbar();\r\n            //         this.bsModalService.setScrollbar();\r\n            //     }\r\n            //     if (!document.body.classList.contains(FEPageModalCLASS_NAME.OPEN)) {\r\n            //         this._renderer.addClass(document.body, FEPageModalCLASS_NAME.OPEN);\r\n            //     }\r\n            // }\r\n            this.opened.emit({ modal: this });\r\n        }, 0);\r\n        if (this.el.nativeElement) {\r\n            this.el.nativeElement.focus();\r\n        }\r\n\r\n    }\r\n    ngAfterContentInit() {\r\n    }\r\n    ngOnDestroy(): void {\r\n        if (this.isShown) {\r\n            this.close();\r\n        }\r\n    }\r\n    hasIframe() {\r\n        return this._iframe != '';\r\n    }\r\n    closeSideBar() {\r\n        // this.removeNoneAnimateCls();\r\n        // if (this.beforeClose) {\r\n        //     this.beforeClose().subscribe((isOpen: boolean) => {\r\n        //         this.isOpen = !isOpen;\r\n        //     })\r\n        // } else {\r\n        //     this.isOpen = false;\r\n        // }\r\n        this._renderer.removeClass(this.parentEl, this.sidebarCls.openParent);\r\n        this._renderer.addClass(this.parentEl, this.sidebarCls.closeParent);\r\n    }\r\n    openSideBar() {\r\n        this.removeNoneAnimateCls();\r\n        this.isOpen = true;\r\n        this._renderer.removeClass(this.parentEl, this.sidebarCls.closeParent);\r\n        this._renderer.addClass(this.parentEl, this.sidebarCls.openParent);\r\n    }\r\n\r\n    /*侧边栏初始因为动画收起时，会被看到, 移除 */\r\n    private removeNoneAnimateCls() {\r\n        if (!this.canRemoveInitNoAnimateCls) {\r\n            return;\r\n        }\r\n        if (this.sidebarMainEl) {\r\n            this._renderer.removeClass(this.sidebarMainEl.nativeElement, this.sidebarCls.init);\r\n            this.canRemoveInitNoAnimateCls = false;\r\n        }\r\n    }\r\n    // 侧边栏宽度计算\r\n    getSidebarWidth() {\r\n        if (typeof this.config['width'] == 'string') {\r\n            return this.config['width'];\r\n        } else {\r\n            return this.config['width'] + 'px';\r\n        }\r\n\r\n    }\r\n    // 必须带的方法\r\n    close(e?: MouseEvent, isCloseButton = false): void {\r\n        if (e) {\r\n            e.stopPropagation();\r\n        }\r\n        if (this.isModalHiding || !this.isShown) {\r\n            return;\r\n        }\r\n\r\n        this.config.beforeClose(this).subscribe(r => {\r\n            if (!r) {\r\n                return false;\r\n            }\r\n            //动画结束执行其他操作\r\n            this.sidebarMainEl.nativeElement.parentElement.addEventListener('transitionend', (e: any) => {\r\n                this.bsModalService.hide(this.level);\r\n                this.isModalHiding = false;\r\n                if (this.config.closed) {\r\n                    this.config.closed(isCloseButton);\r\n                }\r\n                this.closed.emit(this.level);\r\n            }, false);\r\n            this.isModalHiding = true;\r\n            this.isShown = false;\r\n            this._renderer.removeClass(this.parentEl, this.sidebarCls.openParent);\r\n            this._renderer.addClass(this.parentEl, this.sidebarCls.closeParent);\r\n        });\r\n    }\r\n    toCenter() {\r\n\r\n    }\r\n\r\n}\r\n","import {\r\n  ComponentRef, Injectable, TemplateRef,\r\n  EventEmitter, Renderer2, RendererFactory2, NgZone, Injector, Optional\r\n} from '@angular/core';\r\nimport { FEModalBackdropComponent } from './page-modal-backdrop.component';\r\nimport { FEPageModalComponent } from './page-modal.component';\r\nimport { FEPageModalSidebarComponent } from './page-sidebar.component';\r\nimport {\r\n  FEPageModalCLASS_NAME,\r\n  FEPModalConfigDefaults,\r\n  FEPageModalOptions, FPageModalTRANSITION_DURATIONS\r\n} from './page-modal-options.class';\r\nimport { FEPageModalRef } from './page-modal-ref.service';\r\nimport { Utils } from '@farris/ui-modal/utils';\r\nimport { ComponentLoaderFactory, ComponentLoader } from '@farris/ui-modal/component-loader';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n\r\ndeclare var System: any;\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FEPageModalService {\r\n  version = '0.0.6';\r\n  config: FEPageModalOptions = FEPModalConfigDefaults;\r\n\r\n  onShow: EventEmitter<any> = new EventEmitter();\r\n  onShown: EventEmitter<any> = new EventEmitter();\r\n  onHide: EventEmitter<any> = new EventEmitter();\r\n  onHidden: EventEmitter<any> = new EventEmitter();\r\n\r\n  protected isBodyOverflowing = false;\r\n  protected originalBodyPadding = 0;\r\n\r\n  protected scrollbarWidth = 0;\r\n\r\n  protected backdropRef: ComponentRef<FEModalBackdropComponent>;\r\n  private _backdropLoader: ComponentLoader<FEModalBackdropComponent>;\r\n  private modalsCount = 0;\r\n  private lastDismissReason = '';\r\n\r\n  private loaders: ComponentLoader<FEPageModalComponent | FEPageModalSidebarComponent>[] = [];\r\n\r\n  private _renderer: Renderer2;\r\n\r\n  private commonUtils:CommonUtils=null;\r\n\r\n  constructor(rendererFactory: RendererFactory2, @Optional() private clf: ComponentLoaderFactory, private _injector: Injector, public ngZone: NgZone) {\r\n\r\n    this._renderer = rendererFactory.createRenderer(null, null);\r\n    this.commonUtils=new CommonUtils();\r\n  }\r\n  showByComponent() { }\r\n  showByUrl(content: string, config?: FEPageModalOptions): Observable<FEPageModalRef | null> {\r\n    let subject = new Subject<FEPageModalRef | null>();\r\n    System.import(content).then((moduleFactorys: any) => {\r\n      const moduleFactory: any = Object.values(moduleFactorys)[0];\r\n      let moduleRef = moduleFactory.create(this._injector);\r\n      if (moduleRef._bootstrapComponents.length > 0) {\r\n        const entryComponent = moduleRef._bootstrapComponents[0];\r\n        const compFactory = moduleRef.componentFactoryResolver.resolveComponentFactory(entryComponent);\r\n        let compRef = compFactory.create(this._injector);\r\n        let fpm: FEPageModalRef = this.show(compRef, config);\r\n        subject.next(fpm);\r\n      } else {\r\n        subject.next(null);\r\n      }\r\n    });\r\n    return subject;\r\n  }\r\n  /** Shows a modal */\r\n  show(content: string | TemplateRef<any> | any, config?: FEPageModalOptions): FEPageModalRef {\r\n    if (!this.clf) {\r\n      this.clf = this._injector.get(ComponentLoaderFactory);\r\n    }\r\n    if (!this.clf) {\r\n      throw new Error(\"FEPageModalService Can't Load ComponentLoaderFactory!\");\r\n    }\r\n    this.modalsCount++;\r\n    let tempConfig = { dialogType: 'modal' };\r\n    // \r\n    if (config.hasOwnProperty('dialogType') && config['dialogType'] == 'sidebar') {\r\n      tempConfig['width'] = '60%';\r\n    }\r\n    this.config = Object.assign({}, FEPModalConfigDefaults, tempConfig, config);\r\n    this._createLoaders(this.config['dialogType']);\r\n    if (config['dialogType'] != 'sidebar') {\r\n      this.checkDialogSize();\r\n    }\r\n\r\n    this._showBackdrop();\r\n    this.lastDismissReason = null;\r\n\r\n    return this._showModal(content);\r\n  }\r\n\r\n  hide(level: number) {\r\n    if (this.modalsCount === 1) {\r\n      this._hideBackdrop();\r\n      this.resetScrollbar();\r\n    }\r\n    this.modalsCount = this.modalsCount >= 1 ? this.modalsCount - 1 : 0;\r\n    this._hideModal(level);\r\n    this.removeLoaders(level);\r\n  }\r\n  /**\r\n   * 确保当前窗口在最上层\r\n   * @param _modalRef \r\n   */\r\n  private updateZIndex(_modalRef){\r\n    const maxZIndex=this.commonUtils.getFloatingLayerIndex();\r\n    _modalRef.dialog.location.nativeElement.style.zIndex=maxZIndex;\r\n  }\r\n\r\n  _showBackdrop(): void {\r\n    const isBackdropEnabled =\r\n      this.config.backdrop || this.config.backdrop === 'static';\r\n    const isBackdropInDOM =\r\n      !this.backdropRef || !this.backdropRef.instance.isShown;\r\n\r\n    this._backdropLoader = this.clf.createLoader<FEModalBackdropComponent>(\r\n      null,\r\n      null,\r\n      this._renderer\r\n    );\r\n\r\n    if (this.modalsCount === 1) {\r\n      this.removeBackdrop();\r\n\r\n      if (isBackdropEnabled && isBackdropInDOM) {\r\n        this._backdropLoader\r\n          .attach(FEModalBackdropComponent)\r\n          .to('body')\r\n          .show({ isAnimated: this.config.animated, dialogType: this.config['dialogType'] });\r\n        this.backdropRef = this._backdropLoader._componentRef;\r\n      }\r\n    }\r\n  }\r\n\r\n  _hideBackdrop(): void {\r\n    if (!this.backdropRef) {\r\n      return;\r\n    }\r\n    this.backdropRef.instance.isShown = false;\r\n    const duration = this.config.animated ? FPageModalTRANSITION_DURATIONS.BACKDROP : 0;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      setTimeout(() => this.removeBackdrop(), duration);\r\n    });\r\n  }\r\n\r\n  _showModal(content: any): FEPageModalRef {\r\n    const modalLoader = this.loaders[this.loaders.length - 1];\r\n    const bsModalRef = new FEPageModalRef();\r\n    // 修改showType\r\n    this.config.initialState['showType'] = this.config.dialogType;\r\n    const modalContainerRef = modalLoader\r\n      .provide({ provide: FEPageModalOptions, useValue: this.config })\r\n      .provide({ provide: FEPageModalRef, useValue: FEPageModalRef })\r\n      .attach(this.config.dialogType == 'sidebar' ? FEPageModalSidebarComponent : FEPageModalComponent)\r\n      .to('body')\r\n      .show({ content, isAnimated: this.config.animated, initialState: this.config.initialState, bsModalService: this });\r\n    modalContainerRef.instance.level = this.getModalsCount();\r\n    modalContainerRef.instance.dialogType = this.config.dialogType;\r\n    modalContainerRef.instance.iframe = '';\r\n    if (this.config.dialogType === 'iframe') {\r\n      modalContainerRef.instance.iframe = content;\r\n    }\r\n    bsModalRef.close = () => {\r\n      modalContainerRef.instance.close();\r\n    };\r\n\r\n\r\n    // 如果是消息类型的，出现滚动条就不响应动画了\r\n    if (!this.config.fitContent) {\r\n      modalContainerRef.instance.toCenter();\r\n      this.ngZone.runOutsideAngular(() => {\r\n        document.body.addEventListener('mousedown', this._onMouseDown.bind(this));\r\n      });\r\n    }\r\n    bsModalRef.content = modalLoader.getInnerComponent() || null;\r\n\r\n    bsModalRef.dialog = modalContainerRef;\r\n\r\n    modalContainerRef.instance['modalRef'] = bsModalRef;\r\n\r\n    if (this.config.opened) {\r\n      this.config.opened();\r\n    }\r\n    this.updateZIndex(bsModalRef);\r\n    return bsModalRef;\r\n  }\r\n\r\n  _onMouseDown(e: any) {\r\n    if (e.target.localName === 'modal-container' || e.target.classList.contains('farris-modal')) {\r\n      this._renderer.addClass(e.target, 'animated');\r\n      this._renderer.addClass(e.target, 'shake');\r\n      this.ngZone.runOutsideAngular(() => {\r\n        setTimeout(() => {\r\n          this._renderer.removeClass(e.target, 'animated');\r\n          this._renderer.removeClass(e.target, 'shake');\r\n        }, 650);\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  _hideModal(level: number): void {\r\n    const modalLoader = this.loaders[level - 1];\r\n    if (modalLoader) {\r\n      modalLoader.hide();\r\n    }\r\n  }\r\n\r\n  getModalsCount(): number {\r\n    return this.modalsCount;\r\n  }\r\n\r\n  getCurrentModalContainer() {\r\n    return this.loaders[this.getModalsCount() - 1];\r\n  }\r\n\r\n  setDismissReason(reason: string) {\r\n    this.lastDismissReason = reason;\r\n  }\r\n\r\n  removeBackdrop(): void {\r\n    if(this._backdropLoader){\r\n      this._backdropLoader.hide();\r\n    }\r\n    this.backdropRef = null;\r\n  }\r\n\r\n  /** AFTER PR MERGE MODAL.COMPONENT WILL BE USING THIS CODE */\r\n  /** Scroll bar tricks */\r\n  /** @internal */\r\n  checkScrollbar(): void {\r\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\r\n    this.scrollbarWidth = this.getScrollbarWidth();\r\n  }\r\n\r\n  setScrollbar(): void {\r\n    if (!document) {\r\n      return;\r\n    }\r\n\r\n    this.originalBodyPadding = parseInt(\r\n      window\r\n        .getComputedStyle(document.body)\r\n        .getPropertyValue('padding-right') || '0',\r\n      10\r\n    );\r\n\r\n    if (this.isBodyOverflowing) {\r\n      document.body.style.paddingRight = `${this.originalBodyPadding +\r\n        this.scrollbarWidth}px`;\r\n    }\r\n  }\r\n\r\n  private resetScrollbar(): void {\r\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\r\n  }\r\n\r\n  // thx d.walsh\r\n  private getScrollbarWidth(): number {\r\n    const scrollDiv = this._renderer.createElement('div');\r\n    this._renderer.addClass(scrollDiv, FEPageModalCLASS_NAME.SCROLLBAR_MEASURER);\r\n    this._renderer.appendChild(document.body, scrollDiv);\r\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n    this._renderer.removeChild(document.body, scrollDiv);\r\n\r\n    return scrollbarWidth;\r\n  }\r\n\r\n  private _createLoaders(dialogType = 'modal'): void {\r\n    let loader;\r\n    if (dialogType == 'sidebar') {\r\n      loader = this.clf.createLoader<FEPageModalSidebarComponent>(\r\n        null,\r\n        null,\r\n        this._renderer\r\n      );\r\n    } else {\r\n      loader = this.clf.createLoader<FEPageModalComponent>(\r\n        null,\r\n        null,\r\n        this._renderer\r\n      );\r\n    }\r\n\r\n    this.copyEvent(loader.onBeforeShow, this.onShow);\r\n    this.copyEvent(loader.onShown, this.onShown);\r\n    this.copyEvent(loader.onBeforeHide, this.onHide);\r\n    this.copyEvent(loader.onHidden, this.onHidden);\r\n    this.loaders.push(loader);\r\n  }\r\n\r\n  private removeLoaders(level: number): void {\r\n    this.loaders.splice(level - 1, 1);\r\n    this.loaders.forEach(\r\n      (loader: ComponentLoader<FEPageModalComponent | FEPageModalSidebarComponent>, i: number) => {\r\n        loader.instance.level = i + 1;\r\n      }\r\n    );\r\n  }\r\n\r\n  private copyEvent(from: EventEmitter<any>, to: EventEmitter<any>) {\r\n    from.subscribe(() => {\r\n      to.emit(this.lastDismissReason);\r\n    });\r\n  }\r\n\r\n  private checkDialogSize() {\r\n    const newSize = Utils.checkDialogSize(parseInt(this.config.width + '', 10), parseInt(this.config.height+'',10));\r\n    if (this.config.width !== newSize.width) {\r\n      this.config.width = newSize.width - 20;\r\n    }\r\n\r\n    if (this.config.height !== newSize.height) {\r\n      this.config.height = newSize.height - 20;\r\n    }\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\n//import { ModalModule } from '@farris/ui-modal';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport{FAreaResponseModule} from '@farris/ui-area-response';\r\nimport { FEPageModalComponent } from './page-modal.component';\r\nimport { FEModalBackdropComponent } from './page-modal-backdrop.component';\r\nimport { FEPageModalService } from './page-modal.service';\r\nimport{FEPageModalSidebarComponent} from './page-sidebar.component';\r\n@NgModule({\r\n  declarations: [FEPageModalComponent, FEModalBackdropComponent,FEPageModalSidebarComponent],\r\n  imports: [\r\n    CommonModule,\r\n    PerfectScrollbarModule,\r\n    AngularDraggableModule,\r\n    FAreaResponseModule\r\n  ],\r\n  exports: [FEModalBackdropComponent],\r\n  entryComponents: [FEPageModalComponent, FEModalBackdropComponent,FEPageModalSidebarComponent]\r\n})\r\nexport class FEPageModalModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: FEPageModalModule,\r\n      providers: [\r\n        ComponentLoaderFactory,\r\n        FEPageModalService,\r\n        PositioningService\r\n      ]\r\n    };\r\n  }\r\n}\r\n"],"names":["Injectable","of","Utils","Component","ElementRef","Renderer2","EventEmitter","DomSanitizer","Input","ViewChild","AngularDraggableDirective","Output","HostBinding","HostListener","CommonUtils","Subject","ComponentLoaderFactory","RendererFactory2","Optional","Injector","NgZone","PositioningService","NgModule","CommonModule","PerfectScrollbarModule","AngularDraggableModule","FAreaResponseModule"],"mappings":";;;;;;;;;;;AAAA;QAIA;;;;YASE,UAAK,GAAe,QAAQ,CAAC;SAE9B;;oBAXAA,aAAU;;QAWX,qBAAC;KAXD;;;;;;;ACJA;QAGA;SAiFC;;oBAjFAA,aAAU;;QAiFX,yBAAC;KAjFD,IAiFC;;AAED,QAAa,sBAAsB,GAAuB;QACtD,QAAQ,EAAE,QAAQ;QAClB,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE,IAAI;QACX,IAAI,EAAE,KAAK;QACX,mBAAmB,EAAE,IAAI;QACzB,KAAK,EAAE,EAAE;QACT,QAAQ,EAAE,IAAI;QACd,YAAY,EAAE,EAAE;QAChB,KAAK,EAAE,GAAG;QACV,MAAM,EAAE,GAAG;QACX,eAAe,EAAC,IAAI;QACpB,SAAS,EAAE,IAAI;QACf,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,IAAI;QACf,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,IAAI;QACf,SAAS,EAAE,IAAI;QACf,YAAY,EAAE,IAAI;QAClB,UAAU;;WAAE,cAAM,OAAAC,OAAE,CAAC,IAAI,CAAC,GAAA,CAAA;QAC1B,WAAW;;WAAE,cAAM,OAAAA,OAAE,CAAC,IAAI,CAAC,GAAA,CAAA;QAC3B,UAAU,EAAE,OAAO;QACnB,UAAU,EAAE,KAAK;QACjB,YAAY,EAAC,IAAI;QACjB,OAAO,EAAC;YACJ,OAAO,EAAC,OAAO;YACf,SAAS,EAAC,EAAE;SACf;KACJ;;AAED,QAAa,qBAAqB,GAAQ;QACtC,kBAAkB,EAAE,yBAAyB;QAC7C,QAAQ,EAAE,gBAAgB;QAC1B,IAAI,EAAE,YAAY;QAClB,IAAI,EAAE,MAAM;QACZ,EAAE,EAAE,IAAI;;QACR,IAAI,EAAE,MAAM;KACf;;AASD,QAAa,8BAA8B,GAAQ;QAC/C,KAAK,EAAE,GAAG;QACV,QAAQ,EAAE,GAAG;KAChB;;AAED,QAAa,yBAAyB,GAAG;QACrC,QAAQ,EAAE,gBAAgB;QAC1B,GAAG,EAAE,KAAK;KACb;;;;;;;AC5ID;;;AAKA;QAyDI,kCAAY,OAAmB,EAAE,QAAmB;YAF1C,aAAQ,GAAG,KAAK,CAAC;YACjB,gBAAW,GAAC,OAAO,CAAC;YAE1B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC5B;QAtDD,sBAAI,gDAAU;;;gBAAd;gBACI,OAAO,IAAI,CAAC,WAAW,CAAC;aAC3B;;;;gBAED,UAAe,KAAc;gBACzB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;;aAE5B;;;WALA;QAOD,sBAAI,6CAAO;;;gBAAX;gBACI,OAAO,IAAI,CAAC,QAAQ,CAAC;aACxB;;;;gBAED,UAAY,KAAc;gBACtB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,KAAK,EAAE;oBACP,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,KAAG,qBAAqB,CAAC,EAAI,CAAC,CAAC;iBACrF;qBAAM;oBACH,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,KAAG,qBAAqB,CAAC,EAAI,CAAC,CAAC;iBACxF;gBAED,IAAI,KAAK,EAAE;oBACP,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAClB,IAAI,CAAC,OAAO,CAAC,aAAa,EAC1B,KAAG,qBAAqB,CAAC,IAAM,CAClC,CAAC;iBACL;qBAAM;oBACH,IAAI,CAAC,QAAQ,CAAC,WAAW,CACrB,IAAI,CAAC,OAAO,CAAC,aAAa,EAC1B,KAAG,qBAAqB,CAAC,IAAM,CAClC,CAAC;iBACL;aAEJ;;;WAtBA;QA2BD,sBAAI,gDAAU;;;gBAAd;gBACI,OAAO,IAAI,CAAC,WAAW,CAAC;aAC3B;;;;gBACD,UAAe,KAAY;;gBAEvB,IAAG,KAAK,EAAC;oBACL,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAC,oBAAoB,GAAC,KAAK,CAAC,CAAC;iBACjF;aACJ;;;WANA;;;;QAgBD,2CAAQ;;;YAAR;gBACI,IAAI,IAAI,CAAC,UAAU,EAAE;oBACjB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,KAAG,qBAAqB,CAAC,IAAM,CAAC,CAAC;oBACpFC,WAAK,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;iBAC5C;gBACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;aACvB;;oBApEJC,YAAS,SAAC;wBACP,QAAQ,EAAE,mBAAmB;wBAC7B,QAAQ,EAAE,GAAG;wBACb,IAAI,EAAE,EAAE,KAAK,EAAE,qBAAqB,CAAC,QAAQ,EAAE;qBAClD;;;;;wBATmBC,aAAU;wBAAUC,YAAS;;;QA0EjD,+BAAC;KArED;;ICLA;;;;;;;;;;;;;;AAcA,IAeO,IAAI,QAAQ,GAAG;QAClB,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC;YAC3C,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBACjD,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjB,KAAK,IAAI,CAAC,IAAI,CAAC;oBAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;wBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aAChF;YACD,OAAO,CAAC,CAAC;SACZ,CAAA;QACD,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IAC3C,CAAC,CAAA;;;;;;;;QCmEC,8BACE,OAA2B,EACjB,EAAc,EAChB,SAAoB,EACpB,SAAuB;YAFrB,OAAE,GAAF,EAAE,CAAY;YAChB,cAAS,GAAT,SAAS,CAAW;YACpB,cAAS,GAAT,SAAS,CAAc;YAhCjC,YAAO,GAAG,KAAK,CAAC;YAaR,kBAAa,GAAG,KAAK,CAAC;YAG9B,UAAK,GAAG,KAAK,CAAC;YAKJ,WAAM,GAAG,IAAIC,eAAY,EAAE,CAAC;YAC5B,WAAM,GAAG,IAAIA,eAAY,EAAE,CAAC;YAC5B,YAAO,GAAG,IAAIA,eAAY,EAAE,CAAC;YAEpB,YAAO,GAAG,aAAW,IAAI,CAAC,GAAG,EAAE,CAAC,WAAW,EAAI,CAAC;YAQjE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;SAC1C;QA5BD,sBACW,wCAAM;;;;gBADjB,UACkB,KAAa;gBAC7B,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC;iBACvE;aACF;;;WAAA;;;;QAyBD,uCAAQ;;;YAAR;gBAAA,iBAsCC;gBArCC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;gBAC3C,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;oBAC1B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,oBAAoB,CAAC,CAAC;iBACtE;gBAED,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,qBAAqB,CAAC,IAAI,CAAC,CAAC;iBAC5E;;gBAED,UAAU;;mBAAC;oBACT,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,KAAI,CAAC,SAAS,CAAC,QAAQ,CACrB,KAAI,CAAC,EAAE,CAAC,aAAa,EAAE,qBAAqB,CAAC,IAAI,CAClD,CAAC;oBACF,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAI,CAAC,EAAE,CAAC,aAAa,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;oBACnE,IAAI,KAAI,CAAC,MAAM,CAAC,UAAU,IAAI,KAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC,EAAE;wBACvG,KAAI,CAAC,EAAE,CAAC,aAAa,CAAC,SAAS,GAAG,CAAC,CAAC;qBACrC;oBAED,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI,EAAE;;4BACvB,QAAQ,GAAG,KAAI,CAAC,cAAc,CAAC,cAAc,EAAE;wBACrD,IAAI,QAAQ,KAAK,CAAC,EAAE;4BAClB,KAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC;4BACrC,KAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;yBACpC;wBACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE;4BACjE,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE,qBAAqB,CAAC,IAAI,CAAC,CAAC;yBACpE;qBACF;oBACD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAI,EAAE,CAAC,CAAC;iBACnC,GAAE,IAAI,CAAC,UAAU,GAAG,8BAA8B,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;;gBAGlE,IAAI,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;oBACzB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;iBAC/B;aAEF;;;;QAED,8CAAe;;;YAAf;gBACE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;;gBAEnE,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;;wBACtB,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE;;wBAC1D,YAAY,GAAG,IAAI,CAAC,gBAAgB,EAAE;oBAC1C,IAAI,UAAU,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM,GAAG,EAAE,EAAE;wBAChD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,2BAA2B,CAAC,CAAC;qBAC7E;iBACF;aAEF;;;;;;QAGD,+CAAgB;;;;;YAAhB;;oBACQ,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC;;oBAC/D,MAAM,GAAG,UAAU,CAAC,YAAY;;oBAChC,KAAK,GAAG,UAAU,CAAC,WAAW;gBACpC,OAAO,EAAE,KAAK,OAAA,EAAE,MAAM,QAAA,EAAE,CAAC;aAC1B;;;;;QAGD,sCAAO;;;;YADP,UACQ,KAAiB;;oBACjB,GAAG,sBAAG,KAAK,CAAC,MAAM,EAAO;gBAE/B,IAAI,IAAI,CAAC,MAAM,CAAC,mBAAmB,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;oBAClH,KAAK,CAAC,eAAe,EAAE,CAAC;oBACxB,OAAO;iBACR;gBAED,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;gBACzE,IAAI,CAAC,KAAK,EAAE,CAAC;aACd;;;;;QAGD,oCAAK;;;;YADL,UACM,KAAU;gBACd,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACjB,OAAO;iBACR;gBAED,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAAE;oBACxB,KAAK,CAAC,cAAc,EAAE,CAAC;iBACxB;gBAED,IACE,IAAI,CAAC,MAAM,CAAC,QAAQ;oBACpB,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,EACnD;oBACA,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC;oBACpE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;iBACnB;aACF;;;;QAED,0CAAW;;;YAAX;gBACE,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,IAAI,CAAC,KAAK,EAAE,CAAC;iBACd;aACF;;;;;;QAED,oCAAK;;;;;YAAL,UAAM,CAAc,EAAE,aAAqB;gBAA3C,iBAqCC;gBArCqB,8BAAA;oBAAA,qBAAqB;;gBACzC,IAAI,CAAC,EAAE;oBACL,CAAC,CAAC,eAAe,EAAE,CAAC;iBACrB;gBACD,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACvC,OAAO;iBACR;gBAED,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,SAAS;;;mBAAC,UAAA,CAAC;oBACvC,IAAI,CAAC,CAAC,EAAE;wBACN,OAAO,KAAK,CAAC;qBACd;oBAED,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;oBAC1B,KAAI,CAAC,SAAS,CAAC,WAAW,CACxB,KAAI,CAAC,EAAE,CAAC,aAAa,EACrB,qBAAqB,CAAC,IAAI,CAC3B,CAAC;;oBAEF,UAAU;;uBAAC;wBACT,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;wBACrB,IAAI,QAAQ;4BACV,QAAQ,CAAC,IAAI,EACb;4BACA,IAAI,KAAI,CAAC,cAAc,CAAC,cAAc,EAAE,KAAK,CAAC,EAAE;gCAC9C,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,qBAAqB,CAAC,IAAI,CAAC,CAAC;6BACvE;yBACF;wBACD,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;wBACrC,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;wBAC3B,IAAI,KAAI,CAAC,MAAM,CAAC,MAAM,EAAE;4BACtB,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;yBACnC;wBACD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;qBAC9B,GAAE,KAAI,CAAC,UAAU,GAAG,8BAA8B,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;;iBAEhE,EAAC,CAAC;aACJ;;;;QAED,uCAAQ;;;YAAR;gBAAA,iBA8BC;;oBA7BO,UAAU,GAAG,QAAQ,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAC,EAAE,CAAC,GAAG,IAAI;;oBAC5D,SAAS,GAAG,QAAQ,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAC,EAAE,CAAC,GAAG,IAAI;;oBAE5D,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,eAAe,CAAC;;oBAC/D,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC;gBAEpE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC;gBAC7D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;;oBAEvD,aAAa,GAAE,QAAQ,CAAC,EAAE,GAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAC,EAAE,CAAC,GAAG,EAAE;gBAE3D,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;oBAC3B,IAAI,CAAC,SAAS,CAAC,QAAQ,CACrB,SAAS,EACT,QAAQ,EACR,aAAa,GAAG,IAAI,CACrB,CAAC;iBACH;gBACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;gBAEzD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,WAAW,EAAE,4BAA4B,CAAC,CAAC;gBAI7E,UAAU;;mBAAC;;wBACH,SAAS,GAAG,KAAI,CAAC,gBAAgB,EAAE;oBACjC,IAAA,gCAAqB,EAAE,kCAAuB;oBACtD,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAI,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,KAAI,CAAC,MAAM,CAAC,MAAM,EAAE,cAAc,gBAAA,EAAE,eAAe,iBAAA,EAAE,CAAC,CAAC;iBAC9G,EAAC,CAAC;aACJ;;;;;;QAED,qCAAM;;;;;YAAN,UAAO,CAAS,EAAE,CAAS;;oBACnB,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,eAAe,CAAC;gBACrE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,WAAW,EAAE,iBAAe,CAAC,YAAO,CAAC,aAAU,CAAC,CAAC;gBACnF,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,EAAE,CAAC,GAAA,EAAE,CAAC,GAAA,EAAE,CAAC;gBAClC,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;aAC/B;;;;QAED,wCAAS;;;YAAT;gBACE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;gBACvC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;gBACzC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,gBAAgB,CAAC,WAAW,GAAG,EAAE,CAAC;gBAC/D,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,gBAAgB,CAAC,YAAY,GAAG,EAAE,CAAC;gBAEjE,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;gBAC9B,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;;oBACxB,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,eAAe,CAAC;gBACrE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,uBAAuB,CAAC,CAAC;gBAC3D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAChD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;gBACjD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB;;;;;QAED,uCAAQ;;;;YAAR,UAAS,EAAO;aACf;;;;QAED,2CAAY;;;YAAZ;gBACE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC;gBACvC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC;gBACzC,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;;oBACvB,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,eAAe,CAAC;gBACrE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,EAAE,uBAAuB,CAAC,CAAC;gBAC9D,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;aAC/B;;;;QAED,+CAAgB;;;YAAhB;gBACE,IAAI,IAAI,CAAC,KAAK,EAAE;oBACd,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;qBAAM;oBACL,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;aACF;;;;;QAED,yCAAU;;;;YAAV,UAAW,IAAS;gBAClB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;gBACpC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;;oBAChC,SAAS,GAAG,IAAI,CAAC,gBAAgB,EAAE;gBACjC,IAAA,gCAAqB,EAAE,kCAAuB;gBACtD,IAAI,CAAC,OAAO,CAAC,IAAI,cAAM,IAAI,CAAC,IAAI,EAAK,EAAE,cAAc,gBAAA,EAAE,eAAe,iBAAA,EAAE,EAAG,CAAC;aAC7E;;oBA/TFH,YAAS,SAAC;wBACT,QAAQ,EAAE,eAAe;wBACzB,QAAQ,EAAE,k+EAgDT;wBAED,IAAI,EAAE;4BACJ,KAAK,EAAE,sCAAsC;4BAC7C,IAAI,EAAE,QAAQ;4BACd,QAAQ,EAAE,IAAI;4BACd,mBAAmB,EAAE,MAAM;yBAC5B;qBACF;;;;;wBA7DC,kBAAkB;wBAZPC,aAAU;wBACbC,YAAS;wBAQVE,4BAAY;;;;6BAyElBC,QAAK;+BAWLC,YAAS,SAACC,qCAAyB;kCACnCD,YAAS,SAAC,QAAQ;6BAGlBE,SAAM;6BACNA,SAAM;8BACNA,SAAM;8BAENC,cAAW,SAAC,IAAI;8BAwEhBC,eAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;4BAahCA,eAAY,SAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;;QAqJhD,2BAAC;KAhUD;;;;;;;AChBA;QAqFI,qCACI,OAA2B,EACjB,EAAc,EAChB,SAAoB,EACpB,SAAuB;YAFrB,OAAE,GAAF,EAAE,CAAY;YAChB,cAAS,GAAT,SAAS,CAAW;YACpB,cAAS,GAAT,SAAS,CAAc;YArEnC,YAAO,GAAG,KAAK,CAAC;YAKN,WAAM,GAAG,IAAIP,eAAY,EAAE,CAAC;YAC5B,WAAM,GAAG,IAAIA,eAAY,EAAE,CAAC;YAC5B,YAAO,GAAG,IAAIA,eAAY,EAAE,CAAC;YACpB,YAAO,GAAG,aAAW,IAAI,CAAC,GAAG,EAAE,CAAC,WAAW,EAAI,CAAC;YACnE,cAAS,GAAoB,EAAE,CAAC;YACxB,YAAO,GAAG,EAAE,CAAC;YA0Cb,kBAAa,GAAG,KAAK,CAAC;YAItB,8BAAyB,GAAG,IAAI,CAAC;YAEjC,eAAU,GAAG;gBACjB,QAAQ,EAAE,kBAAkB;gBAC5B,YAAY,EAAE,yBAAyB;gBACvC,aAAa,EAAE,2BAA2B;gBAC1C,MAAM,EAAE,eAAe;aAC1B,CAAA;YACD,WAAM,GAAG,KAAK,CAAC;YAMX,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;SAC5C;QA5DD,sBACW,+CAAM;;;gBAMjB;gBACI,OAAO,IAAI,CAAC,OAAO,CAAC;aACvB;;;;gBATD,UACkB,KAAa;gBAC3B,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;oBACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC;iBACzE;aACJ;;;WAAA;;;;;QAMD,6CAAO;;;;YADP,UACQ,KAAiB;;oBACf,GAAG,sBAAG,KAAK,CAAC,MAAM,EAAO;gBAC/B,IAAI,IAAI,CAAC,MAAM,CAAC,mBAAmB,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;oBAChH,KAAK,CAAC,eAAe,EAAE,CAAC;oBACxB,OAAO;iBACV;gBAED,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;gBACzE,IAAI,CAAC,KAAK,EAAE,CAAC;aAChB;;;;;QAGD,2CAAK;;;;YADL,UACM,KAAU;gBACZ,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACf,OAAO;iBACV;gBAED,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAAE;oBACtB,KAAK,CAAC,cAAc,EAAE,CAAC;iBAC1B;gBAED,IACI,IAAI,CAAC,MAAM,CAAC,QAAQ;oBACpB,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,EACrD;oBACE,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC;oBACpE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;iBACrB;aACJ;;;;QAsBD,8CAAQ;;;YAAR;gBAAA,iBAkCC;gBAjCG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC;gBACpD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC/D,IAAI,CAAC,oBAAoB,EAAE,CAAC;gBAC5B,UAAU;;mBAAC;oBACP,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;;;;oBAKnB,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;oBACvE,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;;;;;;;;;;;;;;;oBAgBnE,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAI,EAAE,CAAC,CAAC;iBACrC,GAAE,CAAC,CAAC,CAAC;gBACN,IAAI,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;oBACvB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;iBACjC;aAEJ;;;;QACD,wDAAkB;;;YAAlB;aACC;;;;QACD,iDAAW;;;YAAX;gBACI,IAAI,IAAI,CAAC,OAAO,EAAE;oBACd,IAAI,CAAC,KAAK,EAAE,CAAC;iBAChB;aACJ;;;;QACD,+CAAS;;;YAAT;gBACI,OAAO,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;aAC7B;;;;QACD,kDAAY;;;YAAZ;;;;;;;;;gBASI,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;gBACtE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;aACvE;;;;QACD,iDAAW;;;YAAX;gBACI,IAAI,CAAC,oBAAoB,EAAE,CAAC;gBAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;gBACvE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;aACtE;;;;;;;QAGO,0DAAoB;;;;;YAA5B;gBACI,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE;oBACjC,OAAO;iBACV;gBACD,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACnF,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;iBAC1C;aACJ;;;;;;QAED,qDAAe;;;;;YAAf;gBACI,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,QAAQ,EAAE;oBACzC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;iBAC/B;qBAAM;oBACH,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;iBACtC;aAEJ;;;;;;;;QAED,2CAAK;;;;;;;YAAL,UAAM,CAAc,EAAE,aAAqB;gBAA3C,iBA0BC;gBA1BqB,8BAAA;oBAAA,qBAAqB;;gBACvC,IAAI,CAAC,EAAE;oBACH,CAAC,CAAC,eAAe,EAAE,CAAC;iBACvB;gBACD,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACrC,OAAO;iBACV;gBAED,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,SAAS;;;mBAAC,UAAA,CAAC;oBACrC,IAAI,CAAC,CAAC,EAAE;wBACJ,OAAO,KAAK,CAAC;qBAChB;;oBAED,KAAI,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC,gBAAgB,CAAC,eAAe;;;uBAAE,UAAC,CAAM;wBACpF,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;wBACrC,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;wBAC3B,IAAI,KAAI,CAAC,MAAM,CAAC,MAAM,EAAE;4BACpB,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;yBACrC;wBACD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;qBAChC,GAAE,KAAK,CAAC,CAAC;oBACV,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;oBAC1B,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;oBACrB,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACtE,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;iBACvE,EAAC,CAAC;aACN;;;;QACD,8CAAQ;;;YAAR;aAEC;;oBApMJH,YAAS,SAAC;wBACP,QAAQ,EAAE,iBAAiB;wBAC3B,6lCAA4C;wBAE5C,IAAI,EAAE;4BACF,KAAK,EAAE,mBAAmB;yBAC7B;qBACJ;;;;;wBAZG,kBAAkB;wBAL4DC,aAAU;wBAArBC,YAAS;wBAEvEE,4BAAY;;;;6BAuBhBI,SAAM;6BACNA,SAAM;8BACNA,SAAM;8BACNC,cAAW,SAAC,IAAI;6BAGhBJ,QAAK;8BAWLK,eAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;4BAYhCA,eAAY,SAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;oCAqB7CJ,YAAS,SAAC,aAAa;;QAqI5B,kCAAC;KAtMD;;;;;;;ACVA;QA+CE,4BAAY,eAAiC,EAAsB,GAA2B,EAAU,SAAmB,EAAS,MAAc;YAA/E,QAAG,GAAH,GAAG,CAAwB;YAAU,cAAS,GAAT,SAAS,CAAU;YAAS,WAAM,GAAN,MAAM,CAAQ;YAxBlJ,YAAO,GAAG,OAAO,CAAC;YAClB,WAAM,GAAuB,sBAAsB,CAAC;YAEpD,WAAM,GAAsB,IAAIH,eAAY,EAAE,CAAC;YAC/C,YAAO,GAAsB,IAAIA,eAAY,EAAE,CAAC;YAChD,WAAM,GAAsB,IAAIA,eAAY,EAAE,CAAC;YAC/C,aAAQ,GAAsB,IAAIA,eAAY,EAAE,CAAC;YAEvC,sBAAiB,GAAG,KAAK,CAAC;YAC1B,wBAAmB,GAAG,CAAC,CAAC;YAExB,mBAAc,GAAG,CAAC,CAAC;YAIrB,gBAAW,GAAG,CAAC,CAAC;YAChB,sBAAiB,GAAG,EAAE,CAAC;YAEvB,YAAO,GAA0E,EAAE,CAAC;YAIpF,gBAAW,GAAa,IAAI,CAAC;YAInC,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC5D,IAAI,CAAC,WAAW,GAAC,IAAIQ,oBAAW,EAAE,CAAC;SACpC;;;;QACD,4CAAe;;;YAAf,eAAqB;;;;;;QACrB,sCAAS;;;;;YAAT,UAAU,OAAe,EAAE,MAA2B;gBAAtD,iBAgBC;;oBAfK,OAAO,GAAG,IAAIC,YAAO,EAAyB;gBAClD,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI;;;mBAAC,UAAC,cAAmB;;wBACxC,aAAa,GAAQ,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;;wBACvD,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,CAAC;oBACpD,IAAI,SAAS,CAAC,oBAAoB,CAAC,MAAM,GAAG,CAAC,EAAE;;4BACvC,cAAc,GAAG,SAAS,CAAC,oBAAoB,CAAC,CAAC,CAAC;;4BAClD,WAAW,GAAG,SAAS,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,cAAc,CAAC;;4BAC1F,OAAO,GAAG,WAAW,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,CAAC;;4BAC5C,GAAG,GAAmB,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;wBACpD,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBACnB;yBAAM;wBACL,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpB;iBACF,EAAC,CAAC;gBACH,OAAO,OAAO,CAAC;aAChB;;;;;;;;QAED,iCAAI;;;;;;YAAJ,UAAK,OAAwC,EAAE,MAA2B;gBACxE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;oBACb,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAACC,yBAAsB,CAAC,CAAC;iBACvD;gBACD,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;oBACb,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;iBAC1E;gBACD,IAAI,CAAC,WAAW,EAAE,CAAC;;oBACf,UAAU,GAAG,EAAE,UAAU,EAAE,OAAO,EAAE;;gBAExC,IAAI,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,SAAS,EAAE;oBAC5E,UAAU,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;iBAC7B;gBACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,sBAAsB,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;gBAC5E,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC/C,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,SAAS,EAAE;oBACrC,IAAI,CAAC,eAAe,EAAE,CAAC;iBACxB;gBAED,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAE9B,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;aACjC;;;;;QAED,iCAAI;;;;YAAJ,UAAK,KAAa;gBAChB,IAAI,IAAI,CAAC,WAAW,KAAK,CAAC,EAAE;oBAC1B,IAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,IAAI,CAAC,cAAc,EAAE,CAAC;iBACvB;gBACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;gBACpE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBACvB,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;aAC3B;;;;;;;;;;;QAKO,yCAAY;;;;;;YAApB,UAAqB,SAAS;;oBACtB,SAAS,GAAC,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE;gBACxD,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAC,SAAS,CAAC;aAChE;;;;QAED,0CAAa;;;YAAb;;oBACQ,iBAAiB,GACrB,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,QAAQ;;oBACrD,eAAe,GACnB,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO;gBAEzD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAC1C,IAAI,EACJ,IAAI,EACJ,IAAI,CAAC,SAAS,CACf,CAAC;gBAEF,IAAI,IAAI,CAAC,WAAW,KAAK,CAAC,EAAE;oBAC1B,IAAI,CAAC,cAAc,EAAE,CAAC;oBAEtB,IAAI,iBAAiB,IAAI,eAAe,EAAE;wBACxC,IAAI,CAAC,eAAe;6BACjB,MAAM,CAAC,wBAAwB,CAAC;6BAChC,EAAE,CAAC,MAAM,CAAC;6BACV,IAAI,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;wBACrF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC;qBACvD;iBACF;aACF;;;;QAED,0CAAa;;;YAAb;gBAAA,iBASC;gBARC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;oBACrB,OAAO;iBACR;gBACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;;oBACpC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,8BAA8B,CAAC,QAAQ,GAAG,CAAC;gBACnF,IAAI,CAAC,MAAM,CAAC,iBAAiB;;mBAAC;oBAC5B,UAAU;;uBAAC,cAAM,OAAA,KAAI,CAAC,cAAc,EAAE,GAAA,GAAE,QAAQ,CAAC,CAAC;iBACnD,EAAC,CAAC;aACJ;;;;;QAED,uCAAU;;;;YAAV,UAAW,OAAY;gBAAvB,iBAwCC;;oBAvCO,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;;oBACnD,UAAU,GAAG,IAAI,cAAc,EAAE;;gBAEvC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;;oBACxD,iBAAiB,GAAG,WAAW;qBAClC,OAAO,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC;qBAC/D,OAAO,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,cAAc,EAAE,CAAC;qBAC9D,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,SAAS,GAAG,2BAA2B,GAAG,oBAAoB,CAAC;qBAChG,EAAE,CAAC,MAAM,CAAC;qBACV,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC;gBACpH,iBAAiB,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gBACzD,iBAAiB,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;gBAC/D,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;gBACvC,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE;oBACvC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,OAAO,CAAC;iBAC7C;gBACD,UAAU,CAAC,KAAK;;mBAAG;oBACjB,iBAAiB,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;iBACpC,CAAA,CAAC;;gBAIF,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;oBAC3B,iBAAiB,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;oBACtC,IAAI,CAAC,MAAM,CAAC,iBAAiB;;uBAAC;wBAC5B,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;qBAC3E,EAAC,CAAC;iBACJ;gBACD,UAAU,CAAC,OAAO,GAAG,WAAW,CAAC,iBAAiB,EAAE,IAAI,IAAI,CAAC;gBAE7D,UAAU,CAAC,MAAM,GAAG,iBAAiB,CAAC;gBAEtC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;gBAEpD,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;oBACtB,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;iBACtB;gBACD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;gBAC9B,OAAO,UAAU,CAAC;aACnB;;;;;QAED,yCAAY;;;;YAAZ,UAAa,CAAM;gBAAnB,iBAYC;gBAXC,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,KAAK,iBAAiB,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;oBAC3F,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;oBAC9C,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;oBAC3C,IAAI,CAAC,MAAM,CAAC,iBAAiB;;uBAAC;wBAC5B,UAAU;;2BAAC;4BACT,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;4BACjD,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;yBAC/C,GAAE,GAAG,CAAC,CAAC;qBACT,EAAC,CAAC;oBACH,OAAO,KAAK,CAAC;iBACd;aACF;;;;;QAED,uCAAU;;;;YAAV,UAAW,KAAa;;oBAChB,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;gBAC3C,IAAI,WAAW,EAAE;oBACf,WAAW,CAAC,IAAI,EAAE,CAAC;iBACpB;aACF;;;;QAED,2CAAc;;;YAAd;gBACE,OAAO,IAAI,CAAC,WAAW,CAAC;aACzB;;;;QAED,qDAAwB;;;YAAxB;gBACE,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC;aAChD;;;;;QAED,6CAAgB;;;;YAAhB,UAAiB,MAAc;gBAC7B,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC;aACjC;;;;QAED,2CAAc;;;YAAd;gBACE,IAAG,IAAI,CAAC,eAAe,EAAC;oBACtB,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;iBAC7B;gBACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;;;;;;;;;;QAKD,2CAAc;;;;;;YAAd;gBACE,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;gBACvE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;aAChD;;;;QAED,yCAAY;;;YAAZ;gBACE,IAAI,CAAC,QAAQ,EAAE;oBACb,OAAO;iBACR;gBAED,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CACjC,MAAM;qBACH,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC;qBAC/B,gBAAgB,CAAC,eAAe,CAAC,IAAI,GAAG,EAC3C,EAAE,CACH,CAAC;gBAEF,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBAC1B,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAM,IAAI,CAAC,mBAAmB;wBAC5D,IAAI,CAAC,cAAc,OAAI,CAAC;iBAC3B;aACF;;;;;QAEO,2CAAc;;;;YAAtB;gBACE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAM,IAAI,CAAC,mBAAmB,OAAI,CAAC;aACpE;;;;;;;QAGO,8CAAiB;;;;;;YAAzB;;oBACQ,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC;gBACrD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,qBAAqB,CAAC,kBAAkB,CAAC,CAAC;gBAC7E,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;oBAC/C,cAAc,GAAG,SAAS,CAAC,WAAW,GAAG,SAAS,CAAC,WAAW;gBACpE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;gBAErD,OAAO,cAAc,CAAC;aACvB;;;;;;QAEO,2CAAc;;;;;YAAtB,UAAuB,UAAoB;gBAApB,2BAAA;oBAAA,oBAAoB;;;oBACrC,MAAM;gBACV,IAAI,UAAU,IAAI,SAAS,EAAE;oBAC3B,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAC5B,IAAI,EACJ,IAAI,EACJ,IAAI,CAAC,SAAS,CACf,CAAC;iBACH;qBAAM;oBACL,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAC5B,IAAI,EACJ,IAAI,EACJ,IAAI,CAAC,SAAS,CACf,CAAC;iBACH;gBAED,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBACjD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC7C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBACjD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC3B;;;;;;QAEO,0CAAa;;;;;YAArB,UAAsB,KAAa;gBACjC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,OAAO,CAAC,OAAO;;;;mBAClB,UAAC,MAA2E,EAAE,CAAS;oBACrF,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;iBAC/B,EACF,CAAC;aACH;;;;;;;QAEO,sCAAS;;;;;;YAAjB,UAAkB,IAAuB,EAAE,EAAqB;gBAAhE,iBAIC;gBAHC,IAAI,CAAC,SAAS;;mBAAC;oBACb,EAAE,CAAC,IAAI,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC;iBACjC,EAAC,CAAC;aACJ;;;;;QAEO,4CAAe;;;;YAAvB;;oBACQ,OAAO,GAAGd,WAAK,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAC,EAAE,EAAC,EAAE,CAAC,CAAC;gBAC/G,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,OAAO,CAAC,KAAK,EAAE;oBACvC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC;iBACxC;gBAED,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,EAAE;oBACzC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;iBAC1C;aACF;;oBA7SFF,aAAU,SAAC;wBACV,UAAU,EAAE,MAAM;qBACnB;;;;;wBAnB0BiB,mBAAgB;wBAYlCD,yBAAsB,uBAiCmBE,WAAQ;wBA7CLC,WAAQ;wBAAhBC,SAAM;;;;iCAFnD;KAmBA;;;;;;;ACnBA;QAYA;SAsBC;;;;QAVQ,yBAAO;;;YAAd;gBACE,OAAO;oBACL,QAAQ,EAAE,iBAAiB;oBAC3B,SAAS,EAAE;wBACTJ,yBAAsB;wBACtB,kBAAkB;wBAClBK,8BAAkB;qBACnB;iBACF,CAAC;aACH;;oBArBFC,WAAQ,SAAC;wBACR,YAAY,EAAE,CAAC,oBAAoB,EAAE,wBAAwB,EAAC,2BAA2B,CAAC;wBAC1F,OAAO,EAAE;4BACPC,mBAAY;4BACZC,yCAAsB;4BACtBC,kCAAsB;4BACtBC,kCAAmB;yBACpB;wBACD,OAAO,EAAE,CAAC,wBAAwB,CAAC;wBACnC,eAAe,EAAE,CAAC,oBAAoB,EAAE,wBAAwB,EAAC,2BAA2B,CAAC;qBAC9F;;QAYD,wBAAC;KAtBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
