/**
 * @fileoverview added by tsickle
 * Generated from: lib/js-bridge-service/ccwork-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Subject } from 'rxjs';
class CCworkService {
    /**
     * @param {?} callback
     * @return {?}
     */
    init(callback) {
        window.top['iCityBridge'].init(callback);
    }
    /**
     * {
     * quality:图片质量，可选值high、mid、low, high为1920*1080；mid为720*540；low: 480*360，默认为mid
     * mode:唤起模式，可选值both（仅支持iOS）、camera、album, 默认为camera;
     * mark文字水印，字数最大值50
     * }
     * @param {?=} options Object
     *
     * @return {?}
     */
    takePhoto(options = { quality: 'mid' }) {
        // callback return object {errormessage:""，result:"base64格式"}
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        const callback = (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetPicsFromCameraAndAlbum(Object.assign({}, options), callback);
        return subject;
    }
    /**
     * path 如果不为空则从指定图片文件识别二维码,空就吊起相机
     * filters 条码类型过滤列表，如QR、EAN13、EAN8
     *
     * @return {?}
     */
    scanQRCode() {
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        const callback = (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkScanCode({}, callback);
        return subject;
    }
    /**
     * @return {?}
     */
    getSysInfo() {
    }
    /**
     * @return {?}
     */
    getLocation() {
        /**
         *  回调函数
         *  输出结构 object
         *  errormessage:""
         *  result:Object {
         *  addr:'山东省济南市历下区经十路靠近浪潮'
         *  city:"济南"
         *  country:"中国"
         *  course:-1
         *  district:"历下区"
         *  lat:36.66254123263889
         *  lng:117.12974745008681
         *  province:"山东省"
         *  street:"经十路"
         *  streetNum:"1单元"
         * }
         *  status:true
         * @type {?}
         */
        const subject = new Subject();
        /** @type {?} */
        const callback = (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetLocation(callback);
        return subject;
    }
    // TODO:云上协同选择文件
    /**
     * @return {?}
     */
    selectFile() {
        /** @type {?} */
        const subject = new Subject();
        subject.next([]);
        return subject;
    }
    /**
     *
     * @param {?} number string
     * @param {?} content string
     * @return {?}
     */
    sendSMS(number, content) {
        /** @type {?} */
        const options = {
            numbers: [number],
            content
        };
        window.top['iCityBridge'].ccworkSendSms(options);
    }
    /**
     * @param {?} number
     * @param {?} content
     * @return {?}
     */
    openSendSMS(number, content) {
        window.top['iCityBridge'].sendSMS({ tel: number, msg: content });
    }
    /**
     *
     * @param {?} number string
     * @return {?}
     */
    tel(number) {
        window.top['iCityBridge'].ringUp(number);
    }
    /**
     *
     * @param {?=} options
     * @return {?}
     */
    selectPictureFromAlbum(options = { maxNum: 9, mType: 0 }) {
        /**
         * params object
         *  { maxNum : number 9 最大可选数 默认9
         *    mType: number 0 	选择模式，可选值0/1, 0:图片，1：视频;
         * }
         * @type {?}
         */
        const subject = new Subject();
        /** @type {?} */
        const callback = (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetPicsFromAlbum(options, callback);
        return subject;
        /**
         *  object
         *  errormessage:""
         *  result:Array [
         * base64
         * ]
         *  status:true
         */
    }
    /**
     *
     * @param {?} options
     * @return {?}
     */
    takeVideo(options) {
        /**
         * params object
         *  {
         *  time : number 短视频时间（秒） 最大60s
         *  quality: number 0 	视频质量 取值范围0~1
         *  id :string 	视频id（视频名字）
         * }
         * @type {?}
         */
        const subject = new Subject();
        /** @type {?} */
        const callback = (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkTakeShortVideo(Object.assign({ time: 15 }, options), callback);
        return subject;
        /**
         *  object
         *  errormessage:""
         *  result:Object {
         *  value:'path'
         * }
         *  status:true
         */
    }
    /**
     * @return {?}
     */
    closeWindow() {
        window.top['iCityBridge'].closeWebView();
    }
    /**
     *
     * @param {?} title string
     * @return {?}
     */
    setTitles(title) {
        window.top['iCityBridge'].setTitle(title);
    }
    /**
     * @param {?} options
     * @return {?}
     */
    downloadFile(options) {
        alert('暂不支持附件下载');
    }
    /**
     * @param {?=} fn
     * @return {?}
     */
    setOriginGoback(fn) {
        window.top['iCityBridge'].ccworkInterceptOriginGoback(!!fn, fn, (/**
         * @return {?}
         */
        () => { }));
    }
    /**
     * @param {?=} fn
     * @return {?}
     */
    pushOriginGoback(fn) {
        window['OriginGoback'] = window['OriginGoback'] || [];
        /** @type {?} */
        const OriginGoback = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const gobackFn = window['OriginGoback'].pop();
            if (gobackFn) {
                gobackFn();
            }
            else {
                window.top['iCityBridge'].ccworkInterceptOriginGoback(false, (/**
                 * @return {?}
                 */
                () => { }), (/**
                 * @return {?}
                 */
                () => { }));
                history.back();
            }
        });
        if (fn) {
            window['OriginGoback'].push(fn);
            window.top['iCityBridge'].ccworkInterceptOriginGoback(true, OriginGoback, (/**
             * @return {?}
             */
            () => { }));
        }
    }
    /**
     * @param {?=} fn
     * @return {?}
     */
    popOriginGoback(fn) {
        window['OriginGoback'].pop();
    }
    /**
     * @param {?} opt
     * @return {?}
     */
    playShortVideo(opt) {
        window.top['iCityBridge'].ccworkPlayShortVideo(opt);
    }
}
export { CCworkService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2N3b3JrLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL2pzLWJyaWRnZS1zZXJ2aWNlL2Njd29yay1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUczQyxNQUFNLGFBQWE7Ozs7O0lBRWYsSUFBSSxDQUFDLFFBQVE7UUFDVCxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUM1QyxDQUFDOzs7Ozs7Ozs7OztJQVdELFNBQVMsQ0FBQyxVQUF3QixFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7OztjQUUxQyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQU87O2NBRTVCLFFBQVE7Ozs7UUFBRyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ3RCLElBQUksSUFBSSxFQUFFO2dCQUNOLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7YUFDaEM7UUFDTCxDQUFDLENBQUE7UUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLCtCQUErQixtQkFDaEQsT0FBTyxHQUNaLFFBQVEsQ0FDWCxDQUFDO1FBQ0YsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQzs7Ozs7OztJQVNELFVBQVU7O2NBQ0EsT0FBTyxHQUFHLElBQUksT0FBTyxFQUFPOztjQUU1QixRQUFROzs7O1FBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUN0QixJQUFJLElBQUksRUFBRTtnQkFDTixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2FBQ2hDO1FBQ0wsQ0FBQyxDQUFBO1FBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxjQUFjLENB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QyxHQUFHLEVBQUUsQ0FBQTtJQUNoQyxDQUFDOzs7OztJQUVELGNBQWMsQ0FBQyxHQUFRO1FBQ25CLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUdKO0FBRUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJSnNCcmlkZ2VTdHJhdGVneSwgUGhvdG9PcHRpb25zLCBQaWN0dXJlT3B0aW9ucywgVmlkZXBPcHRpb25zLCBMb2NhdGlvbkluZm8gfSBmcm9tICcuL2RlY29yYXRvcnMnO1xyXG5cclxuY2xhc3MgQ0N3b3JrU2VydmljZSBpbXBsZW1lbnRzIElKc0JyaWRnZVN0cmF0ZWd5IHtcclxuXHJcbiAgICBpbml0KGNhbGxiYWNrKSB7XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5pbml0KGNhbGxiYWNrKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICoge1xyXG4gICAgICogcXVhbGl0eTrlm77niYfotKjph4/vvIzlj6/pgInlgLxoaWdo44CBbWlk44CBbG93LCBoaWdo5Li6MTkyMCoxMDgw77ybbWlk5Li6NzIwKjU0MO+8m2xvdzogNDgwKjM2MO+8jOm7mOiupOS4um1pZFxyXG4gICAgICogbW9kZTrllKTotbfmqKHlvI/vvIzlj6/pgInlgLxib3Ro77yI5LuF5pSv5oyBaU9T77yJ44CBY2FtZXJh44CBYWxidW0sIOm7mOiupOS4umNhbWVyYTtcclxuICAgICAqIG1hcmvmloflrZfmsLTljbDvvIzlrZfmlbDmnIDlpKflgLw1MFxyXG4gICAgICogfVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICB0YWtlUGhvdG8ob3B0aW9uczogUGhvdG9PcHRpb25zID0geyBxdWFsaXR5OiAnbWlkJyB9KTogT2JzZXJ2YWJsZTxbXT4ge1xyXG4gICAgICAgIC8vIGNhbGxiYWNrIHJldHVybiBvYmplY3Qge2Vycm9ybWVzc2FnZTpcIlwi77yMcmVzdWx0OlwiYmFzZTY05qC85byPXCJ9XHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGRhdGFbJ3Jlc3VsdCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtHZXRQaWNzRnJvbUNhbWVyYUFuZEFsYnVtKFxyXG4gICAgICAgICAgICB7IC4uLm9wdGlvbnMgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2tcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcGF0aCDlpoLmnpzkuI3kuLrnqbrliJnku47mjIflrprlm77niYfmlofku7bor4bliKvkuoznu7TnoIEs56m65bCx5ZCK6LW355u45py6XHJcbiAgICAgKiBmaWx0ZXJzIOadoeeggeexu+Wei+i/h+a7pOWIl+ihqO+8jOWmglFS44CBRUFOMTPjgIFFQU44XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9iamVjdFxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIHNjYW5RUkNvZGUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoZGF0YVsncmVzdWx0J10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cudG9wWydpQ2l0eUJyaWRnZSddLmNjd29ya1NjYW5Db2RlKHt9LCBjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3lzSW5mbygpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TG9jYXRpb24oKTogT2JzZXJ2YWJsZTxMb2NhdGlvbkluZm8+IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAg5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICogIOi+k+WHuue7k+aehCBvYmplY3RcclxuICAgICAgICAgKiAgZXJyb3JtZXNzYWdlOlwiXCJcclxuICAgICAgICAgKiAgcmVzdWx0Ok9iamVjdCB7XHJcbiAgICAgICAgICogIGFkZHI6J+WxseS4nOecgea1juWNl+W4guWOhuS4i+WMuue7j+WNgei3r+mdoOi/kea1qua9ridcclxuICAgICAgICAgKiAgY2l0eTpcIua1juWNl1wiXHJcbiAgICAgICAgICogIGNvdW50cnk6XCLkuK3lm71cIlxyXG4gICAgICAgICAqICBjb3Vyc2U6LTFcclxuICAgICAgICAgKiAgZGlzdHJpY3Q6XCLljobkuIvljLpcIlxyXG4gICAgICAgICAqICBsYXQ6MzYuNjYyNTQxMjMyNjM4ODlcclxuICAgICAgICAgKiAgbG5nOjExNy4xMjk3NDc0NTAwODY4MVxyXG4gICAgICAgICAqICBwcm92aW5jZTpcIuWxseS4nOecgVwiXHJcbiAgICAgICAgICogIHN0cmVldDpcIue7j+WNgei3r1wiXHJcbiAgICAgICAgICogIHN0cmVldE51bTpcIjHljZXlhYNcIlxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKiAgc3RhdHVzOnRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoZGF0YVsncmVzdWx0J10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cudG9wWydpQ2l0eUJyaWRnZSddLmNjd29ya0dldExvY2F0aW9uKFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzrkupHkuIrljY/lkIzpgInmi6nmlofku7ZcclxuICAgIHNlbGVjdEZpbGUoKTogT2JzZXJ2YWJsZTxbXT4ge1xyXG4gICAgICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgc3ViamVjdC5uZXh0KFtdKTtcclxuICAgICAgICByZXR1cm4gc3ViamVjdDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBudW1iZXIgc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc2VuZFNNUyhudW1iZXI6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbnVtYmVyczogW251bWJlcl0sXHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtTZW5kU21zKG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgb3BlblNlbmRTTVMobnVtYmVyOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uc2VuZFNNUyh7IHRlbDogbnVtYmVyLCBtc2c6IGNvbnRlbnQgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBudW1iZXIgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHRlbChudW1iZXI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10ucmluZ1VwKG51bWJlcilcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFBpY3R1cmVGcm9tQWxidW0ob3B0aW9uczogUGljdHVyZU9wdGlvbnMgPSB7IG1heE51bTogOSwgbVR5cGU6IDAgfSk6IE9ic2VydmFibGU8W10+IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYXJhbXMgb2JqZWN0IFxyXG4gICAgICAgICAqICB7IG1heE51bSA6IG51bWJlciA5IOacgOWkp+WPr+mAieaVsCDpu5jorqQ5XHJcbiAgICAgICAgICogICAgbVR5cGU6IG51bWJlciAwIFx06YCJ5oup5qih5byP77yM5Y+v6YCJ5YC8MC8xLCAwOuWbvueJh++8jDHvvJrop4bpopE7XHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChkYXRhWydyZXN1bHQnXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2N3b3JrR2V0UGljc0Zyb21BbGJ1bShcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgY2FsbGJhY2tcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBvYmplY3RcclxuICAgICAgICAgKiAgZXJyb3JtZXNzYWdlOlwiXCJcclxuICAgICAgICAgKiAgcmVzdWx0OkFycmF5IFtcclxuICAgICAgICAgKiBiYXNlNjRcclxuICAgICAgICAgKiBdXHJcbiAgICAgICAgICogIHN0YXR1czp0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBvcHRpb25zICBcclxuICAgICAqL1xyXG4gICAgdGFrZVZpZGVvKG9wdGlvbnM6IFZpZGVwT3B0aW9ucyk6IE9ic2VydmFibGU8c3RyaW5nPiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcGFyYW1zIG9iamVjdCBcclxuICAgICAgICAgKiAgeyBcclxuICAgICAgICAgKiAgdGltZSA6IG51bWJlciDnn63op4bpopHml7bpl7TvvIjnp5LvvIkg5pyA5aSnNjBzXHJcbiAgICAgICAgICogIHF1YWxpdHk6IG51bWJlciAwIFx06KeG6aKR6LSo6YePIOWPluWAvOiMg+WbtDB+MVxyXG4gICAgICAgICAqICBpZCA6c3RyaW5nIFx06KeG6aKRaWTvvIjop4bpopHlkI3lrZfvvIlcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGRhdGFbJ3Jlc3VsdCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtUYWtlU2hvcnRWaWRlbyhcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGltZTogMTUsXHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIG9iamVjdFxyXG4gICAgICAgICAqICBlcnJvcm1lc3NhZ2U6XCJcIlxyXG4gICAgICAgICAqICByZXN1bHQ6T2JqZWN0IHtcclxuICAgICAgICAgKiAgdmFsdWU6J3BhdGgnXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqICBzdGF0dXM6dHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlV2luZG93KCk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2xvc2VXZWJWaWV3KClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHRpdGxlIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzZXRUaXRsZXModGl0bGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uc2V0VGl0bGUodGl0bGUpXHJcbiAgICB9XHJcblxyXG4gICAgZG93bmxvYWRGaWxlKG9wdGlvbnMpIHtcclxuICAgICAgICBhbGVydCgn5pqC5LiN5pSv5oyB6ZmE5Lu25LiL6L29Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3JpZ2luR29iYWNrKGZuPykge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2N3b3JrSW50ZXJjZXB0T3JpZ2luR29iYWNrKCEhZm4sIGZuLCAoKSA9PiB7IH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaE9yaWdpbkdvYmFjayhmbj86IGFueSkge1xyXG4gICAgICAgIHdpbmRvd1snT3JpZ2luR29iYWNrJ10gPSB3aW5kb3dbJ09yaWdpbkdvYmFjayddIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IE9yaWdpbkdvYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ29iYWNrRm4gPSB3aW5kb3dbJ09yaWdpbkdvYmFjayddLnBvcCgpXHJcbiAgICAgICAgICAgIGlmIChnb2JhY2tGbikge1xyXG4gICAgICAgICAgICAgICAgZ29iYWNrRm4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtJbnRlcmNlcHRPcmlnaW5Hb2JhY2soZmFsc2UsICgpID0+IHsgfSwgKCkgPT4geyB9KVxyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgIHdpbmRvd1snT3JpZ2luR29iYWNrJ10ucHVzaChmbilcclxuICAgICAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtJbnRlcmNlcHRPcmlnaW5Hb2JhY2sodHJ1ZSwgT3JpZ2luR29iYWNrLCAoKSA9PiB7IH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcG9wT3JpZ2luR29iYWNrKGZuPzogYW55KSB7XHJcbiAgICAgICAgd2luZG93WydPcmlnaW5Hb2JhY2snXS5wb3AoKVxyXG4gICAgfVxyXG5cclxuICAgIHBsYXlTaG9ydFZpZGVvKG9wdDogYW55KSB7XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtQbGF5U2hvcnRWaWRlbyhvcHQpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IENDd29ya1NlcnZpY2UgfSJdfQ==