/**
 * @fileoverview added by tsickle
 * Generated from: lib/data-services/approve.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EMPTY } from 'rxjs';
import { NotifyService } from '../ui-services/index';
class ApproveService {
    /**
     * @param {?} wfTaskHandlerService
     * @param {?} viewModelContext
     */
    constructor(wfTaskHandlerService, viewModelContext) {
        this.viewModelContext = viewModelContext;
        this.wfTaskHandlerService = wfTaskHandlerService;
        this.notifyService = this.getService(NotifyService);
    }
    /**
     * 获取服务实例
     * @template T
     * @param {?} token
     * @return {?}
     */
    getService(token) {
        /** @type {?} */
        const injector = this.viewModelContext.injector;
        return injector.get(token);
    }
    /**
     * 提交审批(带入口单据使用wf控件)
     * @param {?} bizBillID 业务单据Id
     * @param {?} bizDefKey 入口单据Id
     * @param {?=} options 上下文参数
     * @param {?=} variables 可选参数
     * @return {?}
     */
    submitApproveWithBizDefKeyUseControl(bizBillID, bizDefKey, options = {}, variables) {
        if (!bizBillID) {
            this.notifyService.error('业务单据Id不能为空');
            return EMPTY;
        }
        if (!bizDefKey) {
            this.notifyService.error('入口单据Id不能为空');
            return EMPTY;
        }
        if (!options || typeof options !== 'object') {
            options = {};
        }
        /** @type {?} */
        const payload = Object.assign({ dataId: bizBillID, bizDefKey }, options);
        // 处理variables参数
        if (variables) {
            if (variables.startsWith('{') && variables.endsWith('}')) {
                try {
                    variables = JSON.parse(variables);
                }
                catch (_a) {
                    console.log('variables parse failed!');
                    variables = {};
                }
            }
            payload.variables = variables;
        }
        return this.wfTaskHandlerService && this.wfTaskHandlerService.startProcess(payload);
    }
    /**
     * 取消审批(支持主表、子表)
     * 迁移web端（已废弃）请调用新的取消提交方法
     * @param {?} procInstId 流程实例Id
     * @return {?}
     */
    cancelSubmit(procInstId) {
        if (!procInstId) {
            this.notifyService.error('流程实例Id不能为空');
            return EMPTY;
        }
        return this.wfTaskHandlerService && this.wfTaskHandlerService.cancelSubmit({ dataId: null, bizDefKey: null, procInstId });
    }
    /**
     * 提交审批
     * @param {?} dataId 表单id
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    submitWithBizDefKey(dataId, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.submitWithBizDefKey(dataId, bizDefKey);
    }
    /**
     * 取消提交审批
     * @param {?} dataId 表单id
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    cancelSubmitWithDataId(dataId, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.cancelSubmitWithDataId(dataId, bizDefKey);
    }
    /**
     * 批量提交审批
     * @param {?} dataIds 表单ID集合
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    batchSubmitWithBizDefKey(dataIds, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.batchSubmitWithBizDefKey(dataIds, bizDefKey);
    }
    /**
     * 批量取消提交审批
     * @param {?} dataIds 表单ID集合
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    batchCancelSubmitWithDataId(dataIds, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.batchCancelSubmitWithDataId(dataIds, bizDefKey);
    }
    /**
     * 子表提交审批
     * @param {?} parentDataId 主表id
     * @param {?} childDataId 子表id
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    childSubmit(parentDataId, childDataId, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.childSubmit(parentDataId, childDataId, bizDefKey);
    }
    /**
     * 子表取消提交审批
     * @param {?} parentDataId 主表id
     * @param {?} childDataId 子表id
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    childCancelSubmit(parentDataId, childDataId, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.childCancelSubmit(parentDataId, childDataId, bizDefKey);
    }
    /**
     * 子表批量提交审批
     * @param {?} parentDataId 主表id
     * @param {?} childDataIds 子表id集合
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    childBatchSubmit(parentDataId, childDataIds, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.childBatchSubmit(parentDataId, childDataIds, bizDefKey);
    }
    /**
     * 子表批量取消提交审批
     * @param {?} parentDataId 主表id
     * @param {?} childDataIds 子表id集合
     * @param {?} bizDefKey 入口单据id
     * @return {?}
     */
    childBatchCancelSubmit(parentDataId, childDataIds, bizDefKey) {
        return this.wfTaskHandlerService && this.wfTaskHandlerService.childBatchCancelSubmit(parentDataId, childDataIds, bizDefKey);
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    ApproveService.prototype.wfTaskHandlerService;
    /**
     * @type {?}
     * @private
     */
    ApproveService.prototype.notifyService;
    /**
     * @type {?}
     * @protected
     */
    ApproveService.prototype.viewModelContext;
}
export { ApproveService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwcm92ZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9kYXRhLXNlcnZpY2VzL2FwcHJvdmUuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBa0IsS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRzdDLE9BQU8sRUFBa0IsYUFBYSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFckUsTUFBTSxjQUFjOzs7OztJQU1oQixZQUFZLG9CQUEwQyxFQUFZLGdCQUFrQztRQUFsQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2hHLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxvQkFBb0IsQ0FBQztRQUNqRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQWdCLGFBQWEsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7Ozs7Ozs7SUFLRCxVQUFVLENBQUksS0FBVTs7Y0FDZCxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVE7UUFDL0MsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFJLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Ozs7Ozs7OztJQVNNLG9DQUFvQyxDQUFDLFNBQWlCLEVBQUUsU0FBaUIsRUFBRSxVQUFlLEVBQUUsRUFBRSxTQUFlO1FBQ2hILElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDWixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUN2QyxPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUNELElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDWixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUN2QyxPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUNELElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFF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QUUsU0FBUyxDQUFDLENBQUM7SUFDMUgsQ0FBQzs7Ozs7Ozs7SUFRRCxzQkFBc0IsQ0FBQyxZQUFvQixFQUFFLFlBQXNCLEVBQUUsU0FBaUI7UUFDbEYsT0FBTyxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDaEksQ0FBQztDQUVKOzs7Ozs7SUFqSkcsOENBQW1EOzs7OztJQUVuRCx1Q0FBcUM7Ozs7O0lBRW1CLDBDQUE0Qzs7QUErSXhHLE9BQU8sRUFBRSxjQUFjLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBFTVBUWSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgVmlld01vZGVsQ29udGV4dCB9IGZyb20gJ0BmYXJyaXMvbW9iaWxlLWRldmtpdCc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlLCBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnLi4vdWktc2VydmljZXMvaW5kZXgnO1xyXG5pbXBvcnQgeyBXZlRhc2tIYW5kbGVyU2VydmljZSB9IGZyb20gJy4uL3dvcmstZmxvdy1zZXJ2aWNlL3dmLXRhc2staGFuZGxlci5zZXJ2aWNlJ1xyXG5jbGFzcyBBcHByb3ZlU2VydmljZSB7XHJcblxyXG4gICAgcHJpdmF0ZSB3ZlRhc2tIYW5kbGVyU2VydmljZTogV2ZUYXNrSGFuZGxlclNlcnZpY2U7XHJcblxyXG4gICAgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdmVGFza0hhbmRsZXJTZXJ2aWNlOiBXZlRhc2tIYW5kbGVyU2VydmljZSwgcHJvdGVjdGVkIHZpZXdNb2RlbENvbnRleHQ6IFZpZXdNb2RlbENvbnRleHQpIHtcclxuICAgICAgICB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlID0gd2ZUYXNrSGFuZGxlclNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlID0gdGhpcy5nZXRTZXJ2aWNlPE5vdGlmeVNlcnZpY2U+KE5vdGlmeVNlcnZpY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5pyN5Yqh5a6e5L6LXHJcbiAgICAgKi9cclxuICAgIGdldFNlcnZpY2U8VD4odG9rZW46IGFueSk6IFQge1xyXG4gICAgICAgIGNvbnN0IGluamVjdG9yID0gdGhpcy52aWV3TW9kZWxDb250ZXh0LmluamVjdG9yO1xyXG4gICAgICAgIHJldHVybiBpbmplY3Rvci5nZXQ8VD4odG9rZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o+Q5Lqk5a6h5om5KOW4puWFpeWPo+WNleaNruS9v+eUqHdm5o6n5Lu2KVxyXG4gICAgICogQHBhcmFtIGJpekJpbGxJRCDkuJrliqHljZXmja5JZFxyXG4gICAgICogQHBhcmFtIGJpekRlZktleSDlhaXlj6PljZXmja5JZFxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMg5LiK5LiL5paH5Y+C5pWwXHJcbiAgICAgKiBAcGFyYW0gdmFyaWFibGVzIOWPr+mAieWPguaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VibWl0QXBwcm92ZVdpdGhCaXpEZWZLZXlVc2VDb250cm9sKGJpekJpbGxJRDogc3RyaW5nLCBiaXpEZWZLZXk6IHN0cmluZywgb3B0aW9uczogYW55ID0ge30sIHZhcmlhYmxlcz86IGFueSkge1xyXG4gICAgICAgIGlmICghYml6QmlsbElEKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcign5Lia5Yqh5Y2V5o2uSWTkuI3og73kuLrnqbonKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWJpekRlZktleSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuZXJyb3IoJ+WFpeWPo+WNleaNrklk5LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiBFTVBUWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBheWxvYWQ6IGFueSA9IHtcclxuICAgICAgICAgICAgZGF0YUlkOiBiaXpCaWxsSUQsXHJcbiAgICAgICAgICAgIGJpekRlZktleSxcclxuICAgICAgICAgICAgLi4ub3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g5aSE55CGdmFyaWFibGVz5Y+C5pWwXHJcbiAgICAgICAgaWYgKHZhcmlhYmxlcykge1xyXG4gICAgICAgICAgICBpZiAodmFyaWFibGVzLnN0YXJ0c1dpdGgoJ3snKSAmJiB2YXJpYWJsZXMuZW5kc1dpdGgoJ30nKSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSBKU09OLnBhcnNlKHZhcmlhYmxlcyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndmFyaWFibGVzIHBhcnNlIGZhaWxlZCEnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXlsb2FkLnZhcmlhYmxlcyA9IHZhcmlhYmxlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UgJiYgdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZS5zdGFydFByb2Nlc3MocGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5bmtojlrqHmibko5pSv5oyB5Li76KGo44CB5a2Q6KGoKVxyXG4gICAgICog6L+B56e7d2Vi56uv77yI5bey5bqf5byD77yJ6K+36LCD55So5paw55qE5Y+W5raI5o+Q5Lqk5pa55rOVXHJcbiAgICAgKiBAcGFyYW0gcHJvY0luc3RJZCDmtYHnqIvlrp7kvotJZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FuY2VsU3VibWl0KHByb2NJbnN0SWQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgaWYgKCFwcm9jSW5zdElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcign5rWB56iL5a6e5L6LSWTkuI3og73kuLrnqbonKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZSAmJiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlLmNhbmNlbFN1Ym1pdCh7IGRhdGFJZDogbnVsbCwgYml6RGVmS2V5OiBudWxsLCBwcm9jSW5zdElkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o+Q5Lqk5a6h5om5XHJcbiAgICAgKiBAcGFyYW0gZGF0YUlkIOihqOWNlWlkXHJcbiAgICAgKiBAcGFyYW0gYml6RGVmS2V5IOWFpeWPo+WNleaNrmlkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdWJtaXRXaXRoQml6RGVmS2V5KGRhdGFJZDogc3RyaW5nLCBiaXpEZWZLZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UgJiYgdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZS5zdWJtaXRXaXRoQml6RGVmS2V5KGRhdGFJZCwgYml6RGVmS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iOaPkOS6pOWuoeaJuVxyXG4gICAgICogQHBhcmFtIGRhdGFJZCDooajljZVpZFxyXG4gICAgICogQHBhcmFtIGJpekRlZktleSDlhaXlj6PljZXmja5pZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FuY2VsU3VibWl0V2l0aERhdGFJZChkYXRhSWQ6IHN0cmluZywgYml6RGVmS2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlICYmIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UuY2FuY2VsU3VibWl0V2l0aERhdGFJZChkYXRhSWQsIGJpekRlZktleSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmibnph4/mj5DkuqTlrqHmiblcclxuICAgICAqIEBwYXJhbSBkYXRhSWRzIOihqOWNlUlE6ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gYml6RGVmS2V5IOWFpeWPo+WNleaNrmlkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBiYXRjaFN1Ym1pdFdpdGhCaXpEZWZLZXkoZGF0YUlkczogc3RyaW5nW10sIGJpekRlZktleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZSAmJiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlLmJhdGNoU3VibWl0V2l0aEJpekRlZktleShkYXRhSWRzLCBiaXpEZWZLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5om56YeP5Y+W5raI5o+Q5Lqk5a6h5om5XHJcbiAgICAgKiBAcGFyYW0gZGF0YUlkcyDooajljZVJROmbhuWQiFxyXG4gICAgICogQHBhcmFtIGJpekRlZktleSDlhaXlj6PljZXmja5pZFxyXG4gICAgICovXHJcbiAgICBiYXRjaENhbmNlbFN1Ym1pdFdpdGhEYXRhSWQoZGF0YUlkczogc3RyaW5nW10sIGJpekRlZktleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZSAmJiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlLmJhdGNoQ2FuY2VsU3VibWl0V2l0aERhdGFJZChkYXRhSWRzLCBiaXpEZWZLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiDlrZDooajmj5DkuqTlrqHmiblcclxuICAgICogQHBhcmFtIHBhcmVudERhdGFJZCDkuLvooahpZFxyXG4gICAgKiBAcGFyYW0gY2hpbGREYXRhSWQg5a2Q6KGoaWRcclxuICAgICogQHBhcmFtIGJpekRlZktleSDlhaXlj6PljZXmja5pZFxyXG4gICAgKi9cclxuICAgIGNoaWxkU3VibWl0KHBhcmVudERhdGFJZDogc3RyaW5nLCBjaGlsZERhdGFJZDogc3RyaW5nLCBiaXpEZWZLZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UgJiYgdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZS5jaGlsZFN1Ym1pdChwYXJlbnREYXRhSWQsIGNoaWxkRGF0YUlkLCBiaXpEZWZLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a2Q6KGo5Y+W5raI5o+Q5Lqk5a6h5om5XHJcbiAgICAgKiBAcGFyYW0gcGFyZW50RGF0YUlkIOS4u+ihqGlkXHJcbiAgICAgKiBAcGFyYW0gY2hpbGREYXRhSWQg5a2Q6KGoaWRcclxuICAgICAqIEBwYXJhbSBiaXpEZWZLZXkg5YWl5Y+j5Y2V5o2uaWRcclxuICAgICAqL1xyXG4gICAgY2hpbGRDYW5jZWxTdWJtaXQocGFyZW50RGF0YUlkOiBzdHJpbmcsIGNoaWxkRGF0YUlkOiBzdHJpbmcsIGJpekRlZktleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZSAmJiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlLmNoaWxkQ2FuY2VsU3VibWl0KHBhcmVudERhdGFJZCwgY2hpbGREYXRhSWQsIGJpekRlZktleSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlrZDooajmibnph4/mj5DkuqTlrqHmiblcclxuICAgICAqIEBwYXJhbSBwYXJlbnREYXRhSWQg5Li76KGoaWRcclxuICAgICAqIEBwYXJhbSBjaGlsZERhdGFJZHMg5a2Q6KGoaWTpm4blkIhcclxuICAgICAqIEBwYXJhbSBiaXpEZWZLZXkg5YWl5Y+j5Y2V5o2uaWRcclxuICAgICAqL1xyXG4gICAgY2hpbGRCYXRjaFN1Ym1pdChwYXJlbnREYXRhSWQ6IHN0cmluZywgY2hpbGREYXRhSWRzOiBzdHJpbmdbXSwgYml6RGVmS2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndmVGFza0hhbmRsZXJTZXJ2aWNlICYmIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UuY2hpbGRCYXRjaFN1Ym1pdChwYXJlbnREYXRhSWQsIGNoaWxkRGF0YUlkcywgYml6RGVmS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWtkOihqOaJuemHj+WPlua2iOaPkOS6pOWuoeaJuVxyXG4gICAgICogQHBhcmFtIHBhcmVudERhdGFJZCDkuLvooahpZFxyXG4gICAgICogQHBhcmFtIGNoaWxkRGF0YUlkcyDlrZDooahpZOmbhuWQiFxyXG4gICAgICogQHBhcmFtIGJpekRlZktleSDlhaXlj6PljZXmja5pZFxyXG4gICAgICovXHJcbiAgICBjaGlsZEJhdGNoQ2FuY2VsU3VibWl0KHBhcmVudERhdGFJZDogc3RyaW5nLCBjaGlsZERhdGFJZHM6IHN0cmluZ1tdLCBiaXpEZWZLZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ZUYXNrSGFuZGxlclNlcnZpY2UgJiYgdGhpcy53ZlRhc2tIYW5kbGVyU2VydmljZS5jaGlsZEJhdGNoQ2FuY2VsU3VibWl0KHBhcmVudERhdGFJZCwgY2hpbGREYXRhSWRzLCBiaXpEZWZLZXkpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgQXBwcm92ZVNlcnZpY2UgfSJdfQ==