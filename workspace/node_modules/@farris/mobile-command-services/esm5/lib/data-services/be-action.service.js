/**
 * @fileoverview added by tsickle
 * Generated from: lib/data-services/be-action.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { tap } from 'rxjs/operators';
import { BaseDataService } from './base-data.service';
/**
 * BE动作调用服务
 */
var /**
 * BE动作调用服务
 */
BeActionService = /** @class */ (function (_super) {
    tslib_1.__extends(BeActionService, _super);
    /**
     * 构造函数
     */
    function BeActionService(viewModelContext) {
        var _this = _super.call(this, viewModelContext) || this;
        _this.viewModelContext = viewModelContext;
        return _this;
    }
    /**
     * 执行自定义动作
     */
    /**
     * 执行自定义动作
     * @param {?} actionUrl
     * @param {?} httpMethod
     * @param {?=} httpHeaders
     * @param {?=} params
     * @param {?=} body
     * @return {?}
     */
    BeActionService.prototype.invokeAction = /**
     * 执行自定义动作
     * @param {?} actionUrl
     * @param {?} httpMethod
     * @param {?=} httpHeaders
     * @param {?=} params
     * @param {?=} body
     * @return {?}
     */
    function (actionUrl, httpMethod, httpHeaders, params, body) {
        return this.innerInvokeAction(actionUrl, httpMethod, httpHeaders, params, body);
    };
    /**
     * 调用自定义动作
     */
    /**
     * 调用自定义动作
     * @private
     * @param {?} actionUrl
     * @param {?} method
     * @param {?=} headers
     * @param {?=} params
     * @param {?=} body
     * @return {?}
     */
    BeActionService.prototype.innerInvokeAction = /**
     * 调用自定义动作
     * @private
     * @param {?} actionUrl
     * @param {?} method
     * @param {?=} headers
     * @param {?=} params
     * @param {?=} body
     * @return {?}
     */
    function (actionUrl, method, headers, params, body) {
        var _this = this;
        /** @type {?} */
        var apiProxy = this.befRepository.apiProxy;
        /** @type {?} */
        var baseUrl = apiProxy.baseUrl;
        // 构造url
        /** @type {?} */
        var fullActionUrl = baseUrl + "/service/" + actionUrl;
        /** @type {?} */
        var requestConfig = {};
        // headers构造
        if (headers) {
            requestConfig.headers = headers;
        }
        // 查询参数
        if (params) {
            requestConfig.params = params;
        }
        // body构造
        if (body) {
            requestConfig.body = body;
        }
        this.loadingService.show();
        /** @type {?} */
        var result$ = apiProxy.request(method, fullActionUrl, requestConfig);
        return result$.pipe(tap((/**
         * @return {?}
         */
        function () {
            _this.loadingService.hide();
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.loadingService.hide();
            console.log(error);
        })));
    };
    return BeActionService;
}(BaseDataService));
if (false) {
    /**
     * @type {?}
     * @protected
     */
    BeActionService.prototype.viewModelContext;
}
export { BeActionService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmUtYWN0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL2RhdGEtc2VydmljZXMvYmUtYWN0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBR3JDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7OztBQU10RDs7OztJQUE4QiwyQ0FBZTtJQUUzQzs7T0FFRztJQUNILHlCQUFzQixnQkFBa0M7UUFBeEQsWUFDRSxrQkFBTSxnQkFBZ0IsQ0FBQyxTQUN4QjtRQUZxQixzQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCOztJQUV4RCxDQUFDO0lBRUQ7O09BRUc7Ozs7Ozs7Ozs7SUFDSSxzQ0FBWTs7Ozs7Ozs7O0lBQW5CLFVBQ0UsU0FBaUIsRUFBRSxVQUFzQixFQUFFLFdBQXlCLEVBQUUsTUFBbUIsRUFBRSxJQUFVO1FBRXJHLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQ7O09BRUc7Ozs7Ozs7Ozs7O0lBQ0ssMkNBQWlCOzs7Ozs7Ozs7O0lBQXpCLFVBQ0UsU0FBaUIsRUFBRSxNQUFrQixFQUFFLE9BQXFCLEVBQUUsTUFBbUIsRUFBRSxJQUFVO1FBRC9GLGlCQXVDQzs7WUFwQ08sUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUTs7WUFDdEMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxPQUFPOzs7WUFHMUIsYUFBYSxHQUFNLE9BQU8saUJBQVksU0FBVzs7WUFDakQsYUFBYSxHQUFzQixFQUN4QztRQUVELFlBQVk7UUFDWixJQUFJLE9BQU8sRUFBRztZQUNaLGFBQWEsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1NBQ2pDO1FBRUQsT0FBTztRQUNQLElBQUksTUFBTSxFQUFFO1lBQ1YsYUFBYSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7U0FDL0I7UUFFRCxTQUFTO1FBQ1QsSUFBSSxJQUFJLEVBQUU7WUFDUixhQUFhLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUMzQjtRQUVELElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUM7O1lBQ3JCLE9BQU8sR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxhQUFhLEVBQUUsYUFBYSxDQUFDO1FBQ3RFLE9BQU8sT0FBTyxDQUFDLElBQUksQ0FDakIsR0FBRzs7O1FBQ0Q7WUFDRSxLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzdCLENBQUM7Ozs7UUFDRCxVQUFDLEtBQVU7WUFDVCxLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckIsQ0FBQyxFQUNGLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFDSCxzQkFBQztBQUFELENBQUMsQUE3REQsQ0FBOEIsZUFBZSxHQTZENUM7Ozs7OztJQXhEYSwyQ0FBNEM7O0FBMkQxRCxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgVmlld01vZGVsQ29udGV4dCwgSHR0cE1ldGhvZCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsIEh0dHBSZXF1ZXN0Q29uZmlnIH0gZnJvbSAnQGZhcnJpcy9tb2JpbGUtZGV2a2l0JztcclxuaW1wb3J0IHsgUmVzcG9uc2VJbmZvIH0gZnJvbSAnQGZhcnJpcy9tb2JpbGUtYmVmJztcclxuaW1wb3J0IHsgQmFzZURhdGFTZXJ2aWNlIH0gZnJvbSAnLi9iYXNlLWRhdGEuc2VydmljZSc7XHJcblxyXG5cclxuLyoqXHJcbiAqIEJF5Yqo5L2c6LCD55So5pyN5YqhXHJcbiAqL1xyXG5jbGFzcyBCZUFjdGlvblNlcnZpY2UgZXh0ZW5kcyBCYXNlRGF0YVNlcnZpY2Uge1xyXG5cclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdmlld01vZGVsQ29udGV4dDogVmlld01vZGVsQ29udGV4dCkge1xyXG4gICAgc3VwZXIodmlld01vZGVsQ29udGV4dCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiafooYzoh6rlrprkuYnliqjkvZxcclxuICAgKi9cclxuICBwdWJsaWMgaW52b2tlQWN0aW9uKFxyXG4gICAgYWN0aW9uVXJsOiBzdHJpbmcsIGh0dHBNZXRob2Q6IEh0dHBNZXRob2QsIGh0dHBIZWFkZXJzPzogSHR0cEhlYWRlcnMsIHBhcmFtcz86IEh0dHBQYXJhbXMsIGJvZHk/OiBhbnlcclxuICApOiBPYnNlcnZhYmxlPFJlc3BvbnNlSW5mbz4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaW5uZXJJbnZva2VBY3Rpb24oYWN0aW9uVXJsLCBodHRwTWV0aG9kLCBodHRwSGVhZGVycywgcGFyYW1zLCBib2R5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiwg+eUqOiHquWumuS5ieWKqOS9nFxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5uZXJJbnZva2VBY3Rpb24oXHJcbiAgICBhY3Rpb25Vcmw6IHN0cmluZywgbWV0aG9kOiBIdHRwTWV0aG9kLCBoZWFkZXJzPzogSHR0cEhlYWRlcnMsIHBhcmFtcz86IEh0dHBQYXJhbXMsIGJvZHk/OiBhbnlcclxuICApOiBPYnNlcnZhYmxlPGFueT4gIHtcclxuICAgIGNvbnN0IGFwaVByb3h5ID0gdGhpcy5iZWZSZXBvc2l0b3J5LmFwaVByb3h5O1xyXG4gICAgY29uc3QgYmFzZVVybCA9IGFwaVByb3h5LmJhc2VVcmw7XHJcblxyXG4gICAgLy8g5p6E6YCgdXJsXHJcbiAgICBjb25zdCBmdWxsQWN0aW9uVXJsID0gYCR7YmFzZVVybH0vc2VydmljZS8ke2FjdGlvblVybH1gO1xyXG4gICAgY29uc3QgcmVxdWVzdENvbmZpZzogSHR0cFJlcXVlc3RDb25maWcgPSB7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGhlYWRlcnPmnoTpgKBcclxuICAgIGlmIChoZWFkZXJzICkge1xyXG4gICAgICByZXF1ZXN0Q29uZmlnLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOafpeivouWPguaVsFxyXG4gICAgaWYgKHBhcmFtcykge1xyXG4gICAgICByZXF1ZXN0Q29uZmlnLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBib2R55p6E6YCgXHJcbiAgICBpZiAoYm9keSkge1xyXG4gICAgICByZXF1ZXN0Q29uZmlnLmJvZHkgPSBib2R5O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgY29uc3QgcmVzdWx0JCA9IGFwaVByb3h5LnJlcXVlc3QobWV0aG9kLCBmdWxsQWN0aW9uVXJsLCByZXF1ZXN0Q29uZmlnKTtcclxuICAgIHJldHVybiByZXN1bHQkLnBpcGUoXHJcbiAgICAgIHRhcChcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmhpZGUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmhpZGUoKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgQmVBY3Rpb25TZXJ2aWNlIH07XHJcblxyXG5cclxuIl19