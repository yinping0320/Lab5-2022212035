/**
 * @fileoverview added by tsickle
 * Generated from: lib/data-services/create-data.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { tap } from 'rxjs/operators';
import { BaseDataService } from './base-data.service';
import { DataUtil } from './data-util';
/**
 * 新增数据服务类
 */
var /**
 * 新增数据服务类
 */
CreateDataService = /** @class */ (function (_super) {
    tslib_1.__extends(CreateDataService, _super);
    function CreateDataService(viewModelContext) {
        return _super.call(this, viewModelContext) || this;
    }
    /**
     * 新增数据
     */
    /**
     * 新增数据
     * @return {?}
     */
    CreateDataService.prototype.create = /**
     * 新增数据
     * @return {?}
     */
    function () {
        var _this = this;
        this.befRepository.entityCollection.clear();
        DataUtil.clearFromValidateType(this.viewModelContext);
        this.loadingService.show();
        /** @type {?} */
        var create$ = this.befRepository.createEntity();
        return create$.pipe(tap((/**
         * @return {?}
         */
        function () {
            _this.loadingService.hide();
        }), (/**
         * @param {?} exception
         * @return {?}
         */
        function (exception) {
            _this.loadingService.hide();
        })));
    };
    /**
     * 新增后代节点
     */
    /**
     * 新增后代节点
     * @param {?} path
     * @return {?}
     */
    CreateDataService.prototype.createByPath = /**
     * 新增后代节点
     * @param {?} path
     * @return {?}
     */
    function (path) {
        var _this = this;
        this.loadingService.show();
        // 当前为新增
        /** @type {?} */
        var entityPath = DataUtil.convertBindingPathToEntityPath(path, this.viewModelContext);
        /** @type {?} */
        var append$ = this.befRepository.appendEntityByPath(entityPath);
        /** @type {?} */
        var result$ = append$.pipe(tap((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this.viewModelContext.uiState.setPropertyValue('$isAdd', { status: true, id: e['id'], path: path, child: tslib_1.__assign({}, e.data) });
            _this.loadingService.hide();
        }), (/**
         * @param {?} exception
         * @return {?}
         */
        function (exception) {
            _this.loadingService.hide();
        })));
        return result$;
    };
    return CreateDataService;
}(BaseDataService));
/**
 * 新增数据服务类
 */
export { CreateDataService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWRhdGEuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvbW9iaWxlLWNvbW1hbmQtc2VydmljZXMvIiwic291cmNlcyI6WyJsaWIvZGF0YS1zZXJ2aWNlcy9jcmVhdGUtZGF0YS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUdyQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQzs7OztBQUt2Qzs7OztJQUF1Qyw2Q0FBZTtJQUVwRCwyQkFBWSxnQkFBa0M7ZUFDNUMsa0JBQU0sZ0JBQWdCLENBQUM7SUFDekIsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNJLGtDQUFNOzs7O0lBQWI7UUFBQSxpQkFlQztRQWRDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDNUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3RELElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUM7O1lBQ3JCLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksRUFBRTtRQUNqRCxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQ2pCLEdBQUc7OztRQUNEO1lBQ0UsS0FBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM3QixDQUFDOzs7O1FBQ0QsVUFBQyxTQUFjO1lBQ2IsS0FBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM3QixDQUFDLEVBQ0YsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSSx3Q0FBWTs7Ozs7SUFBbkIsVUFBb0IsSUFBWTtRQUFoQyxpQkFrQkM7UUFqQkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7O1lBRXJCLFVBQVUsR0FBRyxRQUFRLENBQUMsOEJBQThCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQzs7WUFDakYsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDOztZQUMzRCxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FDMUIsR0FBRzs7OztRQUNELFVBQUMsQ0FBQztZQUNBLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksTUFBQSxFQUFFLEtBQUssdUJBQU8sQ0FBQyxDQUFDLElBQUksQ0FBRSxFQUFFLENBQUMsQ0FBQztZQUNwSCxLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzdCLENBQUM7Ozs7UUFDRCxVQUFDLFNBQWM7WUFDYixLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzdCLENBQUMsRUFDRixDQUNGO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVILHdCQUFDO0FBQUQsQ0FBQyxBQWpERCxDQUF1QyxlQUFlLEdBaURyRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBFbnRpdHksIFZpZXdNb2RlbENvbnRleHQgfSBmcm9tICdAZmFycmlzL21vYmlsZS1kZXZraXQnO1xyXG5cclxuaW1wb3J0IHsgQmFzZURhdGFTZXJ2aWNlIH0gZnJvbSAnLi9iYXNlLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IERhdGFVdGlsIH0gZnJvbSAnLi9kYXRhLXV0aWwnO1xyXG5cclxuLyoqXHJcbiAqIOaWsOWinuaVsOaNruacjeWKoeexu1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENyZWF0ZURhdGFTZXJ2aWNlIGV4dGVuZHMgQmFzZURhdGFTZXJ2aWNlIHtcclxuXHJcbiAgY29uc3RydWN0b3Iodmlld01vZGVsQ29udGV4dDogVmlld01vZGVsQ29udGV4dCkge1xyXG4gICAgc3VwZXIodmlld01vZGVsQ29udGV4dCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmlrDlop7mlbDmja5cclxuICAgKi9cclxuICBwdWJsaWMgY3JlYXRlKCk6IE9ic2VydmFibGU8RW50aXR5PiB7XHJcbiAgICB0aGlzLmJlZlJlcG9zaXRvcnkuZW50aXR5Q29sbGVjdGlvbi5jbGVhcigpO1xyXG4gICAgRGF0YVV0aWwuY2xlYXJGcm9tVmFsaWRhdGVUeXBlKHRoaXMudmlld01vZGVsQ29udGV4dCk7XHJcbiAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIGNvbnN0IGNyZWF0ZSQgPSB0aGlzLmJlZlJlcG9zaXRvcnkuY3JlYXRlRW50aXR5KCk7XHJcbiAgICByZXR1cm4gY3JlYXRlJC5waXBlKFxyXG4gICAgICB0YXAoXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5oaWRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXhjZXB0aW9uOiBhbnkpID0+IHtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaWsOWinuWQjuS7o+iKgueCuVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVCeVBhdGgocGF0aDogc3RyaW5nKTogT2JzZXJ2YWJsZTxFbnRpdHk+IHtcclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgLy8g5b2T5YmN5Li65paw5aKeXHJcbiAgICBjb25zdCBlbnRpdHlQYXRoID0gRGF0YVV0aWwuY29udmVydEJpbmRpbmdQYXRoVG9FbnRpdHlQYXRoKHBhdGgsIHRoaXMudmlld01vZGVsQ29udGV4dCk7XHJcbiAgICBjb25zdCBhcHBlbmQkID0gdGhpcy5iZWZSZXBvc2l0b3J5LmFwcGVuZEVudGl0eUJ5UGF0aChlbnRpdHlQYXRoKTtcclxuICAgIGNvbnN0IHJlc3VsdCQgPSBhcHBlbmQkLnBpcGUoXHJcbiAgICAgIHRhcChcclxuICAgICAgICAoZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy52aWV3TW9kZWxDb250ZXh0LnVpU3RhdGUuc2V0UHJvcGVydHlWYWx1ZSgnJGlzQWRkJywgeyBzdGF0dXM6IHRydWUsIGlkOiBlWydpZCddLCBwYXRoLCBjaGlsZDogeyAuLi5lLmRhdGEgfSB9KTtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuaGlkZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGV4Y2VwdGlvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdCQ7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=