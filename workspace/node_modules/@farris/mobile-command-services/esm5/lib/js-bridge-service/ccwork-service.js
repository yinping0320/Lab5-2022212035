/**
 * @fileoverview added by tsickle
 * Generated from: lib/js-bridge-service/ccwork-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Subject } from 'rxjs';
var CCworkService = /** @class */ (function () {
    function CCworkService() {
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    CCworkService.prototype.init = /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        window.top['iCityBridge'].init(callback);
    };
    /**
     * {
     * quality:图片质量，可选值high、mid、low, high为1920*1080；mid为720*540；low: 480*360，默认为mid
     * mode:唤起模式，可选值both（仅支持iOS）、camera、album, 默认为camera;
     * mark文字水印，字数最大值50
     * }
     * @param options Object
     *
     */
    /**
     * {
     * quality:图片质量，可选值high、mid、low, high为1920*1080；mid为720*540；low: 480*360，默认为mid
     * mode:唤起模式，可选值both（仅支持iOS）、camera、album, 默认为camera;
     * mark文字水印，字数最大值50
     * }
     * @param {?=} options Object
     *
     * @return {?}
     */
    CCworkService.prototype.takePhoto = /**
     * {
     * quality:图片质量，可选值high、mid、low, high为1920*1080；mid为720*540；low: 480*360，默认为mid
     * mode:唤起模式，可选值both（仅支持iOS）、camera、album, 默认为camera;
     * mark文字水印，字数最大值50
     * }
     * @param {?=} options Object
     *
     * @return {?}
     */
    function (options) {
        if (options === void 0) { options = { quality: 'mid' }; }
        // callback return object {errormessage:""，result:"base64格式"}
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var callback = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetPicsFromCameraAndAlbum(tslib_1.__assign({}, options), callback);
        return subject;
    };
    /**
     * path 如果不为空则从指定图片文件识别二维码,空就吊起相机
     * filters 条码类型过滤列表，如QR、EAN13、EAN8
     *
     * @param options Object
     *
     */
    /**
     * path 如果不为空则从指定图片文件识别二维码,空就吊起相机
     * filters 条码类型过滤列表，如QR、EAN13、EAN8
     *
     * @return {?}
     */
    CCworkService.prototype.scanQRCode = /**
     * path 如果不为空则从指定图片文件识别二维码,空就吊起相机
     * filters 条码类型过滤列表，如QR、EAN13、EAN8
     *
     * @return {?}
     */
    function () {
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var callback = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkScanCode({}, callback);
        return subject;
    };
    /**
     * @return {?}
     */
    CCworkService.prototype.getSysInfo = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    CCworkService.prototype.getLocation = /**
     * @return {?}
     */
    function () {
        /**
         *  回调函数
         *  输出结构 object
         *  errormessage:""
         *  result:Object {
         *  addr:'山东省济南市历下区经十路靠近浪潮'
         *  city:"济南"
         *  country:"中国"
         *  course:-1
         *  district:"历下区"
         *  lat:36.66254123263889
         *  lng:117.12974745008681
         *  province:"山东省"
         *  street:"经十路"
         *  streetNum:"1单元"
         * }
         *  status:true
         * @type {?}
         */
        var subject = new Subject();
        /** @type {?} */
        var callback = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetLocation(callback);
        return subject;
    };
    // TODO:云上协同选择文件
    // TODO:云上协同选择文件
    /**
     * @return {?}
     */
    CCworkService.prototype.selectFile = 
    // TODO:云上协同选择文件
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var subject = new Subject();
        subject.next([]);
        return subject;
    };
    /**
     *
     * @param number string
     * @param content string
     */
    /**
     *
     * @param {?} number string
     * @param {?} content string
     * @return {?}
     */
    CCworkService.prototype.sendSMS = /**
     *
     * @param {?} number string
     * @param {?} content string
     * @return {?}
     */
    function (number, content) {
        /** @type {?} */
        var options = {
            numbers: [number],
            content: content
        };
        window.top['iCityBridge'].ccworkSendSms(options);
    };
    /**
     * @param {?} number
     * @param {?} content
     * @return {?}
     */
    CCworkService.prototype.openSendSMS = /**
     * @param {?} number
     * @param {?} content
     * @return {?}
     */
    function (number, content) {
        window.top['iCityBridge'].sendSMS({ tel: number, msg: content });
    };
    /**
     *
     * @param number string
     */
    /**
     *
     * @param {?} number string
     * @return {?}
     */
    CCworkService.prototype.tel = /**
     *
     * @param {?} number string
     * @return {?}
     */
    function (number) {
        window.top['iCityBridge'].ringUp(number);
    };
    /**
     *
     * @param options
     */
    /**
     *
     * @param {?=} options
     * @return {?}
     */
    CCworkService.prototype.selectPictureFromAlbum = /**
     *
     * @param {?=} options
     * @return {?}
     */
    function (options) {
        if (options === void 0) { options = { maxNum: 9, mType: 0 }; }
        /**
         * params object
         *  { maxNum : number 9 最大可选数 默认9
         *    mType: number 0 	选择模式，可选值0/1, 0:图片，1：视频;
         * }
         * @type {?}
         */
        var subject = new Subject();
        /** @type {?} */
        var callback = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkGetPicsFromAlbum(options, callback);
        return subject;
        /**
         *  object
         *  errormessage:""
         *  result:Array [
         * base64
         * ]
         *  status:true
         */
    };
    /**
     *
     * @param options
     */
    /**
     *
     * @param {?} options
     * @return {?}
     */
    CCworkService.prototype.takeVideo = /**
     *
     * @param {?} options
     * @return {?}
     */
    function (options) {
        /**
         * params object
         *  {
         *  time : number 短视频时间（秒） 最大60s
         *  quality: number 0 	视频质量 取值范围0~1
         *  id :string 	视频id（视频名字）
         * }
         * @type {?}
         */
        var subject = new Subject();
        /** @type {?} */
        var callback = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                subject.next(data['result']);
            }
        });
        window.top['iCityBridge'].ccworkTakeShortVideo(tslib_1.__assign({ time: 15 }, options), callback);
        return subject;
        /**
         *  object
         *  errormessage:""
         *  result:Object {
         *  value:'path'
         * }
         *  status:true
         */
    };
    /**
     * @return {?}
     */
    CCworkService.prototype.closeWindow = /**
     * @return {?}
     */
    function () {
        window.top['iCityBridge'].closeWebView();
    };
    /**
     *
     * @param title string
     */
    /**
     *
     * @param {?} title string
     * @return {?}
     */
    CCworkService.prototype.setTitles = /**
     *
     * @param {?} title string
     * @return {?}
     */
    function (title) {
        window.top['iCityBridge'].setTitle(title);
    };
    /**
     * @param {?} options
     * @return {?}
     */
    CCworkService.prototype.downloadFile = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        alert('暂不支持附件下载');
    };
    /**
     * @param {?=} fn
     * @return {?}
     */
    CCworkService.prototype.setOriginGoback = /**
     * @param {?=} fn
     * @return {?}
     */
    function (fn) {
        window.top['iCityBridge'].ccworkInterceptOriginGoback(!!fn, fn, (/**
         * @return {?}
         */
        function () { }));
    };
    /**
     * @param {?=} fn
     * @return {?}
     */
    CCworkService.prototype.pushOriginGoback = /**
     * @param {?=} fn
     * @return {?}
     */
    function (fn) {
        window['OriginGoback'] = window['OriginGoback'] || [];
        /** @type {?} */
        var OriginGoback = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var gobackFn = window['OriginGoback'].pop();
            if (gobackFn) {
                gobackFn();
            }
            else {
                window.top['iCityBridge'].ccworkInterceptOriginGoback(false, (/**
                 * @return {?}
                 */
                function () { }), (/**
                 * @return {?}
                 */
                function () { }));
                history.back();
            }
        });
        if (fn) {
            window['OriginGoback'].push(fn);
            window.top['iCityBridge'].ccworkInterceptOriginGoback(true, OriginGoback, (/**
             * @return {?}
             */
            function () { }));
        }
    };
    /**
     * @param {?=} fn
     * @return {?}
     */
    CCworkService.prototype.popOriginGoback = /**
     * @param {?=} fn
     * @return {?}
     */
    function (fn) {
        window['OriginGoback'].pop();
    };
    /**
     * @param {?} opt
     * @return {?}
     */
    CCworkService.prototype.playShortVideo = /**
     * @param {?} opt
     * @return {?}
     */
    function (opt) {
        window.top['iCityBridge'].ccworkPlayShortVideo(opt);
    };
    return CCworkService;
}());
export { CCworkService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2N3b3JrLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL2pzLWJyaWRnZS1zZXJ2aWNlL2Njd29yay1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBYyxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHM0M7SUFBQTtJQW1QQSxDQUFDOzs7OztJQWpQRyw0QkFBSTs7OztJQUFKLFVBQUssUUFBUTtRQUNULE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzVDLENBQUM7SUFFRDs7Ozs7Ozs7T0FRRzs7Ozs7Ozs7Ozs7SUFDSCxpQ0FBUzs7Ozs7Ozs7OztJQUFULFVBQVUsT0FBMEM7UUFBMUMsd0JBQUEsRUFBQSxZQUEwQixPQUFPLEVBQUUsS0FBSyxFQUFFOzs7WUFFMUMsT0FBTyxHQUFHLElBQUksT0FBTyxFQUFPOztZQUU1QixRQUFROzs7O1FBQUcsVUFBQyxJQUFJO1lBQ2xCLElBQUksSUFBSSxFQUFFO2dCQUNOLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7YUFDaEM7UUFDTCxDQUFDLENBQUE7UUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLCtCQUErQixzQkFDaEQsT0FBTyxHQUNaLFFBQVEsQ0FDWCxDQUFDO1FBQ0YsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQUVEOzs7Ozs7T0FNRzs7Ozs7OztJQUNILGtDQUFVOzs7Ozs7SUFBVjs7WUFDVSxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQU87O1lBRTVCLFFBQVE7Ozs7UUFBRyxVQUFDLElBQUk7WUFDbEIsSUFBSSxJQUFJLEVBQUU7Z0JBQ04sT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMs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TUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUMvQixNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLDJCQUEyQixDQUFDLElBQUksRUFBRSxZQUFZOzs7WUFBRSxjQUFRLENBQUMsRUFBQyxDQUFBO1NBQ3ZGO0lBQ0wsQ0FBQzs7Ozs7SUFDRCx1Q0FBZTs7OztJQUFmLFVBQWdCLEVBQVE7UUFDcEIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFBO0lBQ2hDLENBQUM7Ozs7O0lBRUQsc0NBQWM7Ozs7SUFBZCxVQUFlLEdBQVE7UUFDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBR0wsb0JBQUM7QUFBRCxDQUFDLEFBblBELElBbVBDO0FBRUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJSnNCcmlkZ2VTdHJhdGVneSwgUGhvdG9PcHRpb25zLCBQaWN0dXJlT3B0aW9ucywgVmlkZXBPcHRpb25zLCBMb2NhdGlvbkluZm8gfSBmcm9tICcuL2RlY29yYXRvcnMnO1xyXG5cclxuY2xhc3MgQ0N3b3JrU2VydmljZSBpbXBsZW1lbnRzIElKc0JyaWRnZVN0cmF0ZWd5IHtcclxuXHJcbiAgICBpbml0KGNhbGxiYWNrKSB7XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5pbml0KGNhbGxiYWNrKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICoge1xyXG4gICAgICogcXVhbGl0eTrlm77niYfotKjph4/vvIzlj6/pgInlgLxoaWdo44CBbWlk44CBbG93LCBoaWdo5Li6MTkyMCoxMDgw77ybbWlk5Li6NzIwKjU0MO+8m2xvdzogNDgwKjM2MO+8jOm7mOiupOS4um1pZFxyXG4gICAgICogbW9kZTrllKTotbfmqKHlvI/vvIzlj6/pgInlgLxib3Ro77yI5LuF5pSv5oyBaU9T77yJ44CBY2FtZXJh44CBYWxidW0sIOm7mOiupOS4umNhbWVyYTtcclxuICAgICAqIG1hcmvmloflrZfmsLTljbDvvIzlrZfmlbDmnIDlpKflgLw1MFxyXG4gICAgICogfVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT2JqZWN0XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICB0YWtlUGhvdG8ob3B0aW9uczogUGhvdG9PcHRpb25zID0geyBxdWFsaXR5OiAnbWlkJyB9KTogT2JzZXJ2YWJsZTxbXT4ge1xyXG4gICAgICAgIC8vIGNhbGxiYWNrIHJldHVybiBvYmplY3Qge2Vycm9ybWVzc2FnZTpcIlwi77yMcmVzdWx0OlwiYmFzZTY05qC85byPXCJ9XHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGRhdGFbJ3Jlc3VsdCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtHZXRQaWNzRnJvbUNhbWVyYUFuZEFsYnVtKFxyXG4gICAgICAgICAgICB7IC4uLm9wdGlvbnMgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2tcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcGF0aCDlpoLmnpzkuI3kuLrnqbrliJnku47mjIflrprlm77niYfmlofku7bor4bliKvkuoznu7TnoIEs56m65bCx5ZCK6LW355u45py6XHJcbiAgICAgKiBmaWx0ZXJzIOadoeeggeexu+Wei+i/h+a7pOWIl+ihqO+8jOWmglFS44CBRUFOMTPjgIFFQU44XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9iamVjdFxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIHNjYW5RUkNvZGUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoZGF0YVsncmVzdWx0J10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cudG9wWydpQ2l0eUJyaWRnZSddLmNjd29ya1NjYW5Db2RlKHt9LCBjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3lzSW5mbygpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TG9jYXRpb24oKTogT2JzZXJ2YWJsZTxMb2NhdGlvbkluZm8+IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAg5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICogIOi+k+WHuue7k+aehCBvYmplY3RcclxuICAgICAgICAgKiAgZXJyb3JtZXNzYWdlOlwiXCJcclxuICAgICAgICAgKiAgcmVzdWx0Ok9iamVjdCB7XHJcbiAgICAgICAgICogIGFkZHI6J+WxseS4nOecgea1juWNl+W4guWOhuS4i+WMuue7j+WNgei3r+mdoOi/kea1qua9ridcclxuICAgICAgICAgKiAgY2l0eTpcIua1juWNl1wiXHJcbiAgICAgICAgICogIGNvdW50cnk6XCLkuK3lm71cIlxyXG4gICAgICAgICAqICBjb3Vyc2U6LTFcclxuICAgICAgICAgKiAgZGlzdHJpY3Q6XCLljobkuIvljLpcIlxyXG4gICAgICAgICAqICBsYXQ6MzYuNjYyNTQxMjMyNjM4ODlcclxuICAgICAgICAgKiAgbG5nOjExNy4xMjk3NDc0NTAwODY4MVxyXG4gICAgICAgICAqICBwcm92aW5jZTpcIuWxseS4nOecgVwiXHJcbiAgICAgICAgICogIHN0cmVldDpcIue7j+WNgei3r1wiXHJcbiAgICAgICAgICogIHN0cmVldE51bTpcIjHljZXlhYNcIlxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKiAgc3RhdHVzOnRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoZGF0YVsncmVzdWx0J10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cudG9wWydpQ2l0eUJyaWRnZSddLmNjd29ya0dldExvY2F0aW9uKFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzrkupHkuIrljY/lkIzpgInmi6nmlofku7ZcclxuICAgIHNlbGVjdEZpbGUoKTogT2JzZXJ2YWJsZTxbXT4ge1xyXG4gICAgICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgc3ViamVjdC5uZXh0KFtdKTtcclxuICAgICAgICByZXR1cm4gc3ViamVjdDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBudW1iZXIgc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc2VuZFNNUyhudW1iZXI6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbnVtYmVyczogW251bWJlcl0sXHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtTZW5kU21zKG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgb3BlblNlbmRTTVMobnVtYmVyOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uc2VuZFNNUyh7IHRlbDogbnVtYmVyLCBtc2c6IGNvbnRlbnQgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBudW1iZXIgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHRlbChudW1iZXI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10ucmluZ1VwKG51bWJlcilcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFBpY3R1cmVGcm9tQWxidW0ob3B0aW9uczogUGljdHVyZU9wdGlvbnMgPSB7IG1heE51bTogOSwgbVR5cGU6IDAgfSk6IE9ic2VydmFibGU8W10+IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYXJhbXMgb2JqZWN0IFxyXG4gICAgICAgICAqICB7IG1heE51bSA6IG51bWJlciA5IOacgOWkp+WPr+mAieaVsCDpu5jorqQ5XHJcbiAgICAgICAgICogICAgbVR5cGU6IG51bWJlciAwIFx06YCJ5oup5qih5byP77yM5Y+v6YCJ5YC8MC8xLCAwOuWbvueJh++8jDHvvJrop4bpopE7XHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChkYXRhWydyZXN1bHQnXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2N3b3JrR2V0UGljc0Zyb21BbGJ1bShcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgY2FsbGJhY2tcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBvYmplY3RcclxuICAgICAgICAgKiAgZXJyb3JtZXNzYWdlOlwiXCJcclxuICAgICAgICAgKiAgcmVzdWx0OkFycmF5IFtcclxuICAgICAgICAgKiBiYXNlNjRcclxuICAgICAgICAgKiBdXHJcbiAgICAgICAgICogIHN0YXR1czp0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBvcHRpb25zICBcclxuICAgICAqL1xyXG4gICAgdGFrZVZpZGVvKG9wdGlvbnM6IFZpZGVwT3B0aW9ucyk6IE9ic2VydmFibGU8c3RyaW5nPiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcGFyYW1zIG9iamVjdCBcclxuICAgICAgICAgKiAgeyBcclxuICAgICAgICAgKiAgdGltZSA6IG51bWJlciDnn63op4bpopHml7bpl7TvvIjnp5LvvIkg5pyA5aSnNjBzXHJcbiAgICAgICAgICogIHF1YWxpdHk6IG51bWJlciAwIFx06KeG6aKR6LSo6YePIOWPluWAvOiMg+WbtDB+MVxyXG4gICAgICAgICAqICBpZCA6c3RyaW5nIFx06KeG6aKRaWTvvIjop4bpopHlkI3lrZfvvIlcclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KGRhdGFbJ3Jlc3VsdCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtUYWtlU2hvcnRWaWRlbyhcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGltZTogMTUsXHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIG9iamVjdFxyXG4gICAgICAgICAqICBlcnJvcm1lc3NhZ2U6XCJcIlxyXG4gICAgICAgICAqICByZXN1bHQ6T2JqZWN0IHtcclxuICAgICAgICAgKiAgdmFsdWU6J3BhdGgnXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqICBzdGF0dXM6dHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlV2luZG93KCk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2xvc2VXZWJWaWV3KClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHRpdGxlIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzZXRUaXRsZXModGl0bGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uc2V0VGl0bGUodGl0bGUpXHJcbiAgICB9XHJcblxyXG4gICAgZG93bmxvYWRGaWxlKG9wdGlvbnMpIHtcclxuICAgICAgICBhbGVydCgn5pqC5LiN5pSv5oyB6ZmE5Lu25LiL6L29Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3JpZ2luR29iYWNrKGZuPykge1xyXG4gICAgICAgIHdpbmRvdy50b3BbJ2lDaXR5QnJpZGdlJ10uY2N3b3JrSW50ZXJjZXB0T3JpZ2luR29iYWNrKCEhZm4sIGZuLCAoKSA9PiB7IH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaE9yaWdpbkdvYmFjayhmbj86IGFueSkge1xyXG4gICAgICAgIHdpbmRvd1snT3JpZ2luR29iYWNrJ10gPSB3aW5kb3dbJ09yaWdpbkdvYmFjayddIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IE9yaWdpbkdvYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ29iYWNrRm4gPSB3aW5kb3dbJ09yaWdpbkdvYmFjayddLnBvcCgpXHJcbiAgICAgICAgICAgIGlmIChnb2JhY2tGbikge1xyXG4gICAgICAgICAgICAgICAgZ29iYWNrRm4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtJbnRlcmNlcHRPcmlnaW5Hb2JhY2soZmFsc2UsICgpID0+IHsgfSwgKCkgPT4geyB9KVxyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZuKSB7XHJcbiAgICAgICAgICAgIHdpbmRvd1snT3JpZ2luR29iYWNrJ10ucHVzaChmbilcclxuICAgICAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtJbnRlcmNlcHRPcmlnaW5Hb2JhY2sodHJ1ZSwgT3JpZ2luR29iYWNrLCAoKSA9PiB7IH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcG9wT3JpZ2luR29iYWNrKGZuPzogYW55KSB7XHJcbiAgICAgICAgd2luZG93WydPcmlnaW5Hb2JhY2snXS5wb3AoKVxyXG4gICAgfVxyXG5cclxuICAgIHBsYXlTaG9ydFZpZGVvKG9wdDogYW55KSB7XHJcbiAgICAgICAgd2luZG93LnRvcFsnaUNpdHlCcmlkZ2UnXS5jY3dvcmtQbGF5U2hvcnRWaWRlbyhvcHQpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IENDd29ya1NlcnZpY2UgfSJdfQ==