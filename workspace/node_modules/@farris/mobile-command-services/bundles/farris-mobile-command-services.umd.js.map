{"version":3,"file":"farris-mobile-command-services.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://@farris/mobile-command-services/lib/types/rtc-type.ts","ng://@farris/mobile-command-services/lib/base.service.ts","ng://@farris/mobile-command-services/lib/ui-services/loading.service.ts","ng://@farris/mobile-command-services/lib/ui-services/toast.service.ts","ng://@farris/mobile-command-services/lib/ui-services/notify.service.ts","ng://@farris/mobile-command-services/lib/ui-services/dialog.service.ts","ng://@farris/mobile-command-services/lib/ui-services/attachment-preview.service.ts","ng://@farris/mobile-command-services/lib/entity-services/entity-traversing.service.ts","ng://@farris/mobile-command-services/lib/entity-services/entity-manipulation.service.ts","ng://@farris/mobile-command-services/lib/entity-services/entity-aggregation.service.ts","ng://@farris/mobile-command-services/lib/entity-services/entity-list.service.ts","ng://@farris/mobile-command-services/lib/entity-services/entity.service.ts","ng://@farris/mobile-command-services/lib/exception-services/http.ts","ng://@farris/mobile-command-services/lib/exception-services/exception.servcie.ts","ng://@farris/mobile-command-services/lib/data-services/base-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/data-util.ts","ng://@farris/mobile-command-services/lib/data-services/load-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/create-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/edit-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/update-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/remove-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/save-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/cancel-data.service.ts","ng://@farris/mobile-command-services/lib/data-services/be-action.service.ts","ng://@farris/mobile-command-services/lib/data-services/approve.service.ts","ng://@farris/mobile-command-services/lib/data-services/check-data.service.ts","ng://@farris/mobile-command-services/lib/router.servcie.ts","ng://@farris/mobile-command-services/lib/validator-services/validator.service.ts","ng://@farris/mobile-command-services/lib/js-bridge-service/ccwork-service.ts","ng://@farris/mobile-command-services/lib/js-bridge-service/cloud-plus-service.ts","ng://@farris/mobile-command-services/lib/js-bridge-service/js-bridge-strategy-factory.ts","ng://@farris/mobile-command-services/lib/js-bridge-service/js-bridge-stratege.ts","ng://@farris/mobile-command-services/lib/js-bridge-service/decorators.ts","ng://@farris/mobile-command-services/lib/history-back.service.ts","ng://@farris/mobile-command-services/lib/command.service.ts","ng://@farris/mobile-command-services/lib/state-machine.service.ts","ng://@farris/mobile-command-services/lib/ui-state.service.ts","ng://@farris/mobile-command-services/lib/vo-variable.service.ts","ng://@farris/mobile-command-services/lib/attachment-services/types.ts","ng://@farris/mobile-command-services/lib/attachment-services/attachment.util.ts","ng://@farris/mobile-command-services/lib/attachment-services/attachment-data.service.ts","ng://@farris/mobile-command-services/lib/attachment-services/attachment.service.ts","ng://@farris/mobile-command-services/lib/ccwork-service/ccwork.service.ts","ng://@farris/mobile-command-services/lib/map-services/map.service.ts","ng://@farris/mobile-command-services/lib/business-attachment-services/types.ts","ng://@farris/mobile-command-services/lib/business-attachment-services/business-attachment.util.ts","ng://@farris/mobile-command-services/lib/business-attachment-services/business-attachment-data.service.ts","ng://@farris/mobile-command-services/lib/business-attachment-services/business-attachment.service.ts","ng://@farris/mobile-command-services/lib/discussion-group-service/discussion-group.service.ts","ng://@farris/mobile-command-services/lib/work-flow-service/service/task.service.ts","ng://@farris/mobile-command-services/lib/work-flow-service/entity/start-process-payload.ts","ng://@farris/mobile-command-services/lib/work-flow-service/submit/process-selector-vue/process-selector.service.ts","ng://@farris/mobile-command-services/lib/work-flow-service/wf-task-handler.service.ts","ng://@farris/mobile-command-services/lib/providers.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * BeforeNavigate接口请求参数\r\n */\r\nexport interface BeforeNavigateRequestBody {\r\n\r\n  /**\r\n   * 是否是根元数据\r\n   * @summary\r\n   * 1、 根元数据：metadataId传递基础表单id；\r\n   * 2、非根元数据：metadataId传递扩展表单id；\r\n   */\r\n  isRootMetadata: boolean;\r\n\r\n  /**\r\n   * 元数据id\r\n   */\r\n   metadataId: string;\r\n\r\n   /**\r\n    * 维度1\r\n    */\r\n   dim1: string;\r\n \r\n   /**\r\n    * 维度2\r\n    */\r\n   dim2: string;\r\n}\r\n\r\n\r\n/**\r\n * BeforeNavigate接口返回结果\r\n */\r\nexport interface BeforeNavigateReponseBody {\r\n  \r\n  /**\r\n   * 元数据id\r\n   */\r\n   metadataId: string;\r\n\r\n   /**\r\n    * 是否有维度信息\r\n    * @summary\r\n    * 有维度：返回1；\r\n    * 没有维度：返回0；\r\n    */\r\n   withDims: number;\r\n\r\n   /**\r\n    * 维度1\r\n    */\r\n   dim1: string;\r\n \r\n   /**\r\n    * 维度2\r\n    */\r\n   dim2: string;\r\n\r\n}\r\n\r\n/**\r\n * 运行时定制参数\r\n */\r\nexport interface RtcOptions {\r\n\r\n  /**\r\n   * 表单元数据id\r\n   */\r\n  metadataId: string;\r\n\r\n  /**\r\n   * 是否存在维度信息\r\n   */\r\n  withDims: boolean;\r\n\r\n  /**\r\n   * 维度1\r\n   */\r\n  dim1: string;\r\n\r\n  /**\r\n   * 维度2\r\n   */\r\n  dim2: string;\r\n\r\n}\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 数据服务基类\r\n */\r\nclass BaseService {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(protected viewModelContext: ViewModelContext) {\r\n  }\r\n\r\n  /**\r\n   * 获取服务实例\r\n   */\r\n  getService<T>(token: any): T {\r\n    const injector = this.viewModelContext.injector;\r\n    return injector.get<T>(token);\r\n  }\r\n\r\n}\r\n\r\nexport { BaseService };\r\n","import { Loading } from '@farris/mobile-ui';\r\n\r\nexport class LoadingService {\r\n\r\n    constructor() {\r\n        this.registerService();\r\n    }\r\n\r\n    /**\r\n     * 显示Loading\r\n     */\r\n    show(message?: string, options?: any): void {\r\n        (Loading as any).show(message, options);\r\n    }\r\n\r\n    /**\r\n     * 隐藏Loading\r\n     */\r\n    hide(): void {\r\n        (Loading as any).hide();\r\n    }\r\n    \r\n    /**\r\n     * 注册所有的LoadingService实例\r\n     */\r\n    private registerService() {\r\n        const services: any[] = window['DEVKIT_LOADING_SERVICE'] || [];\r\n        services.push(this);\r\n        window['DEVKIT_LOADING_SERVICE'] = services;\r\n    }\r\n\r\n\r\n}\r\n","import { Toast } from '@farris/mobile-ui';\r\n\r\n/**\r\n * 轻提示服务\r\n */\r\nclass ToastService {\r\n  /**\r\n   * 消息提示\r\n   */\r\n  info(message: string, options?: any): void {\r\n    (Toast as any).info(message, options);\r\n  }\r\n\r\n  /**\r\n   * 成功提示\r\n   */\r\n  success(message: string, options?: any): void {\r\n    (Toast as any).success(message, options);\r\n  }\r\n\r\n  /**\r\n   * 警告提示\r\n   */\r\n  warning(message: string, options?: any): void {\r\n    (Toast as any).warning(message, options);\r\n  }\r\n\r\n  /**\r\n   * 失败提示\r\n   */\r\n  error(message: string, options?: any): void {\r\n    (Toast as any).error(message, options);\r\n  }\r\n  /**\r\n   * 自定义提示\r\n   */\r\n  show(options?: any) {\r\n    (Toast as any)(options);\r\n  }\r\n}\r\nexport { ToastService };\r\n","import { Notify } from '@farris/mobile-ui';\r\nimport { Observable, of, EMPTY } from 'rxjs';\r\n\r\n/**\r\n * 消息提示服务\r\n * @summary\r\n * 页面边缘滑出，自动消失，语气略强于Toast\r\n */\r\nexport class NotifyService {\r\n\r\n    /**\r\n     * 消息提示\r\n     */\r\n    info(message: string, options?: any): void {\r\n        (Notify as any).info(message, { duration : 1500, ...options });\r\n    }\r\n\r\n    /**\r\n     * 成功提示\r\n     */\r\n    success(message: string, options?: any): void {\r\n      (Notify as any).success(message, { duration : 1000, ...options });\r\n    }\r\n\r\n    /**\r\n     * 警告提示\r\n     */\r\n    warning(message: string, options?: any): void {\r\n      (Notify as any).warning(message, { duration : 1500, ...options });\r\n    }\r\n\r\n    /**\r\n     * 失败提示\r\n     */\r\n    error(message: string, options?: any): void {\r\n      (Notify as any).error(message, { duration : 1500, ...options });\r\n    }\r\n\r\n    /**\r\n     * 自定义提醒\r\n     */\r\n    show(options: any) {\r\n      (Notify as any).show(options);\r\n    }\r\n}\r\n","import { Observable, from, EMPTY } from 'rxjs';\r\nimport { Dialog } from '@farris/mobile-ui';\r\n\r\nclass DialogService {\r\n\r\n  /**\r\n   * 提示对话框\r\n   * @summary\r\n   * type=info|success|warning|error\r\n   */\r\n  alert(message: string, options?: any): Observable<boolean> {\r\n    const promise$: Promise<boolean> = new Promise((resolve, reject) => {\r\n      Dialog.alert({\r\n        title: '提醒',\r\n        message: message,\r\n        cancelText: '取消',\r\n        confirmText: '确定',\r\n        onConfirm: () => { resolve(true) },\r\n        onCancel: () => { resolve(false) },\r\n        ...options\r\n      });\r\n    });\r\n    return from(promise$);\r\n  }\r\n\r\n  /**\r\n   * 确认框对话框\r\n   */\r\n  confirm(message: string): Observable<boolean> {\r\n    const confirmResult$: Promise<boolean> = this.confirmPromise(message);\r\n    return from(confirmResult$);\r\n  }\r\n\r\n  /**\r\n   * 自定义弹窗\r\n   */\r\n  show(options: any): void {\r\n    this.confirmPromise(options);\r\n  }\r\n\r\n  /**\r\n   * 输入对话框\r\n   * @param title 标题\r\n   * @param options 配置信息\r\n   */\r\n  prompt(title: string, options?: any): Observable<string> {\r\n    const promise$: Promise<string> = new Promise((resolve, reject) => {\r\n      const vm = Dialog.prompt({\r\n        title: title,\r\n        confirmText: '确定',\r\n        onConfirm: () => {\r\n          resolve(vm.$data.promptText);\r\n        },\r\n        onCancel: () => { resolve('取消'); },\r\n        onShow: () => {\r\n          console.log('显示弹窗');\r\n        },\r\n        ...options\r\n      });\r\n    });\r\n    return from(promise$);\r\n  }\r\n\r\n  /**\r\n   * 使用Promise实例包装回调方法，以同步回调方法执行后结果\r\n   */\r\n  private confirmPromise(message?: string): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      Dialog.confirm({\r\n        message: message,\r\n        onConfirm: () => { resolve(true); },\r\n        onCancel: () => { resolve(false); },\r\n      })\r\n    });\r\n  }\r\n}\r\n\r\nexport { DialogService };\r\n","import { AttachmentPreview } from '@farris/mobile-business-ui';\r\nclass AttachmentPreviewService {\r\n    /**\r\n     * 自定义弹窗\r\n     */\r\n    show(options: IPreview): void {\r\n        AttachmentPreview.show(options);\r\n    }\r\n}\r\n\r\ninterface IPreview {\r\n    title: string;\r\n    attachmentId?: string;\r\n    rootId?: string;\r\n    path?: string;\r\n}\r\n\r\nexport { AttachmentPreviewService };\r\n","import { ViewModelContext, BindingData, BindingList, BindingObject } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 实体遍历服务\r\n */\r\nclass EntityTraversingService {\r\n\r\n  private get bindingData(): BindingData {\r\n    return this.viewModelContext.bindingData;\r\n  }\r\n\r\n  constructor(private viewModelContext: ViewModelContext) {\r\n  }\r\n\r\n  /**\r\n   * 获取值\r\n   */\r\n  public getPropValue(path: string[]): any {\r\n    return this.bindingData.getValue(path);\r\n  }\r\n\r\n  /**\r\n   * 获取实体数据\r\n   */\r\n  public getEntityData(path: string[]): any {\r\n    let bindingObj: BindingObject;\r\n    const bindingListOrObject = this.bindingData.getValue(path);\r\n    if (bindingListOrObject instanceof BindingList === true) {\r\n      bindingObj = bindingListOrObject.currentItem;\r\n    } else {\r\n      bindingObj = bindingListOrObject;\r\n    }\r\n    return bindingObj.toJSON();\r\n  }\r\n\r\n  /**\r\n   * 获取实体列表数据\r\n   */\r\n  public getEntityListData(path: string[]): any[] {\r\n    const bindingList = this.bindingData.getValue(path) as BindingList;\r\n    return bindingList.toJSON();\r\n  }\r\n\r\n}\r\n\r\nexport { EntityTraversingService };\r\n","import { ViewModelContext, BindingData } from '@farris/mobile-devkit';\r\n\r\nclass EntityManipulationService {\r\n\r\n  private get bindingData(): BindingData {\r\n    return this.viewModelContext.bindingData;\r\n  }\r\n\r\n  constructor(private viewModelContext: ViewModelContext) {\r\n  }\r\n\r\n  /**\r\n   * 设置path对应的字段值\r\n   */\r\n  public setPropValue(path: string[], value: any): any {\r\n\r\n    // 实体层还没有封装，临时用BindingData相关方法代替\r\n    this.bindingData.setValue(path, value, true, true);\r\n  }\r\n\r\n}\r\n\r\nexport { EntityManipulationService };\r\n","import { ViewModelContext, BindingData, BindingList } from '@farris/mobile-devkit';\r\nimport { EntityTraversingService } from './entity-traversing.service';\r\n\r\ninterface SplitedPath {\r\n  listPath: string[];\r\n  propPath: string[];\r\n}\r\n\r\n/**\r\n * 实体聚合服务\r\n */\r\nclass EntityAggregationService {\r\n\r\n  private get bindingData(): BindingData {\r\n    return this.viewModelContext.bindingData;\r\n  }\r\n\r\n  private traversingService: EntityTraversingService;\r\n\r\n  constructor(private viewModelContext: ViewModelContext) {\r\n    this.traversingService   = this.viewModelContext.injector.get<EntityTraversingService>(EntityTraversingService);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应列表记录的条数\r\n   */\r\n  public count(path: string[]): number {\r\n    const splitedPath = this.splitPath(path);\r\n    const entityListData = this.traversingService.getEntityListData(splitedPath.listPath);\r\n    return entityListData.length;\r\n  }\r\n\r\n  /**\r\n   * 获取path对应字段的和\r\n   */\r\n  public sum(path: string[]) {\r\n    const splitedPath = this.splitPath(path);\r\n    const entityListData = this.traversingService.getEntityListData(splitedPath.listPath);\r\n\r\n    const total = entityListData.reduce((accTotal: number, entityData: any) => {\r\n      let propValue = parseFloat(this.getPropValue(entityData, splitedPath.propPath));\r\n      propValue = isNaN(propValue) ? 0 : propValue;\r\n      accTotal += propValue;\r\n      return accTotal;\r\n    }, 0);\r\n    return total;\r\n  }\r\n\r\n  /**\r\n   * 获取path对应字段的平均值\r\n   */\r\n  public avg(path: string[]) {\r\n    const count = this.count(path);\r\n    const total = this.sum(path);\r\n    return count !== 0 ? total / count : 0;\r\n  }\r\n\r\n  /**\r\n   * 获取path对应字段的最大值\r\n   */\r\n  public max(path: string[]): number {\r\n    const splitedPath = this.splitPath(path);\r\n    const entityListData = this.traversingService.getEntityListData(splitedPath.listPath);\r\n\r\n    const max =  entityListData.reduce((accMax: number, entityData: any) => {\r\n      const propValue = parseFloat(this.getPropValue(entityData, splitedPath.propPath));\r\n      if (isNaN(propValue) === false && ( !accMax || propValue > accMax)) {\r\n        accMax = propValue;\r\n      }\r\n      return accMax;\r\n    }, null);\r\n    return max ? max : 0;\r\n  }\r\n\r\n  /**\r\n   * 获取path对应字段的最小值\r\n   */\r\n  public min(path: string[]): number {\r\n    const splitedPath = this.splitPath(path);\r\n    const entityListData = this.traversingService.getEntityListData(splitedPath.listPath);\r\n\r\n    const min = entityListData.reduce((accMin: number, entityData: any) => {\r\n      const propValue = parseFloat(this.getPropValue(entityData, splitedPath.propPath));\r\n      if (isNaN(propValue) === false && ( !accMin || propValue < accMin)) {\r\n        accMin = propValue;\r\n      }\r\n      return accMin;\r\n    }, null);\r\n    return min ? min : 0;\r\n  }\r\n\r\n  /**\r\n   * 获取属性值\r\n   */\r\n  private getPropValue(entityData: any, path: string[]) {\r\n    let currentData = entityData;\r\n    path.forEach((pathItem: string) => {\r\n\r\n      // 提前退出的都重置为null，主要针对关联对象未赋值场景\r\n      if (!currentData) {\r\n        currentData = null;\r\n        return;\r\n      }\r\n      currentData = currentData[pathItem];\r\n    });\r\n\r\n    return currentData;\r\n  }\r\n\r\n  /**\r\n   * 分隔路径，分隔符列表路径和属性路径\r\n   * @return 形如 {parentListPath: [], propertyPath: []}\r\n   */\r\n  private splitPath(path: string[]): SplitedPath {\r\n    const listPath = path.concat([]);\r\n    const propPath = [];\r\n    let currentNode = this.bindingData.getValue(listPath);\r\n    while (currentNode instanceof BindingList !== true) {\r\n      const propPathItem = listPath.pop();\r\n      if (!propPathItem) {\r\n        return;\r\n      }\r\n      propPath.unshift(propPathItem);\r\n      currentNode = this.bindingData.getValue(listPath);\r\n    }\r\n\r\n    return {\r\n      listPath: listPath,\r\n      propPath: propPath\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport { EntityAggregationService };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * EntityList服务\r\n * @scope FrameComponent\r\n */\r\nclass EntityListService {\r\n\r\n  constructor(private viewModelContext: ViewModelContext) {}\r\n\r\n}\r\n\r\nexport { EntityListService };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { EntityTraversingService } from './entity-traversing.service';\r\nimport { EntityManipulationService } from './entity-manipulation.service';\r\nimport { EntityAggregationService} from './entity-aggregation.service';\r\n\r\n/**\r\n * 实体服务\r\n * @scope FrameComponent\r\n */\r\nclass EntityService {\r\n\r\n  private traversingService: EntityTraversingService;\r\n\r\n  private manipulationService: EntityManipulationService;\r\n\r\n  private aggregationService: EntityAggregationService;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext    = viewModelContext;\r\n    this.traversingService   = new EntityTraversingService(viewModelContext);\r\n    this.manipulationService = new EntityManipulationService(viewModelContext);\r\n    this.aggregationService  = new EntityAggregationService(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应的属性值\r\n   */\r\n  public getPropValue(path: string[]): any {\r\n    return this.traversingService.getPropValue(path);\r\n  }\r\n\r\n  /**\r\n   * 设置path对应的属性值\r\n   */\r\n  public setPropValue(path: string[], value: any): void {\r\n    return this.manipulationService.setPropValue(path, value);\r\n  }\r\n\r\n  /**\r\n   * 设置path对应的Entity数据\r\n   */\r\n  public getEntityData(path: string[]): any {\r\n    return this.traversingService.getEntityData(path);\r\n  }\r\n\r\n  /**\r\n   * 设置path对应的EntityList数据\r\n   */\r\n  public getEntityListData(path: string[]): any {\r\n    return this.traversingService.getEntityListData(path);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应EntityList记录数\r\n   */\r\n  public count(path: string[]): number {\r\n    return this.aggregationService.count(path);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应属性的合计值\r\n   */\r\n  public sum(path: string[]): number {\r\n    return this.aggregationService.sum(path);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应属性的平均值\r\n   */\r\n  public avg(path: string[]): number {\r\n    return this.aggregationService.avg(path);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应属性的最大值\r\n   */\r\n  public max(path: string[]): number {\r\n    return this.aggregationService.max(path);\r\n  }\r\n\r\n  /**\r\n   * 获取path对应属性的最小值\r\n   */\r\n  public min(path: string[]): number {\r\n    return this.aggregationService.min(path);\r\n  }\r\n}\r\n\r\nexport { EntityService };\r\n","// https://github.com/typeslick/status-code-enum\r\nenum HttpStatusType {\r\n    Info = 1,\r\n    Success,\r\n    Redirect,\r\n    ClientError,\r\n    ServerError\r\n}\r\n\r\n/**\r\n * http通用类\r\n */\r\nclass HttpUtil {\r\n\r\n    /**\r\n     * 基于http状态码返回状态类型\r\n     * @param httpResponseSatus http请求返回状态码\r\n     * @returns null | HttpStatusType\r\n     */\r\n    public static getHttpStatusType(httpResponseSatus: number): any {\r\n        if (!httpResponseSatus) {\r\n            return null;\r\n        }\r\n        \r\n        let statusType = null; // 默认值为空\r\n        \r\n        if (httpResponseSatus < 100 || httpResponseSatus > 600) {\r\n            statusType = null; // 不合理状态码\r\n        } else if (httpResponseSatus >= 100 && httpResponseSatus < 200) {\r\n            statusType = HttpStatusType.Info;\r\n        } else if (httpResponseSatus >= 200 && httpResponseSatus < 300) {\r\n            statusType = HttpStatusType.Success;\r\n        } else if (httpResponseSatus >= 300 && httpResponseSatus < 400) {\r\n            statusType = HttpStatusType.Redirect;\r\n        } else if (httpResponseSatus >= 400 && httpResponseSatus < 500) {\r\n            statusType = HttpStatusType.ClientError;\r\n        } else if (httpResponseSatus >= 500 && httpResponseSatus < 600) {\r\n            statusType = HttpStatusType.ServerError;\r\n        }\r\n\r\n        return statusType;\r\n    }\r\n}\r\n\r\nexport { HttpUtil, HttpStatusType };","import { IErrorServe } from '@farris/mobile-bef';\r\nimport { NotifyService } from '../ui-services';\r\nimport { HttpUtil, HttpStatusType } from './http';\r\nimport { ExceptionLevel } from './types';\r\nimport { JsBridgeService } from '../js-bridge-service/index';\r\n/**\r\n * 实体操作服务\r\n */\r\nclass ExceptionService implements IErrorServe {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(private notifyService: NotifyService, private jsBridgeService: JsBridgeService) {\r\n  }\r\n\r\n  /**\r\n   * 显示异常信息\r\n   */\r\n  show(error) {\r\n    this.exception(error);\r\n  }\r\n\r\n  /**\r\n * 异常处理路由方法\r\n */\r\n  private exception(error: any) {\r\n    // 针对session失效做特殊处理\r\n    if (error.message && error.message.indexOf('401') !== -1) {\r\n      this.notifyService.error('登录信息已失效请重新打开');\r\n      setTimeout(() => { this.jsBridgeService.closeWindow() }, 2000)\r\n      return;\r\n    }\r\n    if (error && error.response) {\r\n      this.httpErrorHandler(error.response);\r\n    }\r\n  }\r\n\r\n  /**\r\n * http请求异常处理器\r\n */\r\n  private httpErrorHandler(httpError): void {\r\n    if (!httpError) {\r\n      return;\r\n    }\r\n\r\n    const statusType = HttpUtil.getHttpStatusType(httpError.status);\r\n\r\n    switch (statusType) {\r\n      case HttpStatusType.ClientError:\r\n        this.httpErrorInClient(httpError);\r\n        break;\r\n      case HttpStatusType.ServerError:\r\n        this.httpErrorInServer(httpError);\r\n        break;\r\n      default:\r\n        throw new Error('Get invalid status code when using httpErrorHandler method.');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n * 服务器端异常提示弹框\r\n */\r\n  private httpErrorInServer(httpError): void {\r\n    let error = httpError.data;\r\n    if (typeof (error) === 'string') {\r\n      try {\r\n        error = JSON.parse(error);\r\n      } catch (e) { }\r\n    }\r\n    if (!error || error.Level == null || error.Level == undefined) { // 未封装error或未设置异常等级\r\n      this.notifyService.error(httpError.message);\r\n      return;\r\n    }\r\n\r\n    const getNotifyServiceMethodName: String = this.getNotifyServiceMethodName(error.Level);\r\n\r\n    this.notifyService[`${getNotifyServiceMethodName}`](error.Message);\r\n  }\r\n\r\n  /**\r\n   * 客户端异常提示弹框\r\n   */\r\n  private httpErrorInClient(httpError): void {\r\n    if (!httpError) {\r\n      return;\r\n    }\r\n    const url = httpError.config && httpError.config.url && httpError.config.url;\r\n    const status = httpError.status && httpError.status;\r\n    this.notifyService.error(`${url} ${status}`);\r\n  }\r\n\r\n\r\n  /**\r\n * 获取异常处理策略\r\n * @param exceptionLevel 异常等级\r\n */\r\n  public getNotifyServiceMethodName(exceptionLevel): String {\r\n    let exception;\r\n    switch (exceptionLevel) {\r\n      case ExceptionLevel.Info:\r\n        exception = 'info';\r\n        break;\r\n      case ExceptionLevel.Warning:\r\n        exception = 'warning';\r\n        break;\r\n      case ExceptionLevel.Error:\r\n        exception = 'error';\r\n        break;\r\n      case ExceptionLevel.Fatal:\r\n        exception = 'fatal';\r\n        break;\r\n      default:\r\n        // 默认异常等级是错误\r\n        exception = 'error';\r\n        break;\r\n    }\r\n\r\n    return exception;\r\n  }\r\n}\r\n\r\nexport { ExceptionService };\r\n","import { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BefRepository } from '@farris/mobile-bef';\r\nimport { EntityService } from '../entity-services/index';\r\nimport { LoadingService, ToastService, NotifyService, DialogService } from '../ui-services/index';\r\nimport { ExceptionService } from '../exception-services/index';\r\nimport { CommandService } from '../command.service';\r\n\r\n/**\r\n * 数据服务基类\r\n */\r\nclass BaseDataService {\r\n\r\n  protected loadingService: LoadingService;\r\n\r\n  protected toastService: ToastService;\r\n\r\n  protected notifyService: NotifyService;\r\n\r\n  protected dialogService: DialogService;\r\n\r\n  protected exceptionService: ExceptionService;\r\n\r\n  protected befRepository: BefRepository<Entity>;\r\n\r\n  protected entityService: EntityService;\r\n\r\n  constructor(protected viewModelContext: ViewModelContext) {\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    this.initServices();\r\n  }\r\n\r\n  private initServices() {\r\n    this.loadingService = this.getService<LoadingService>(LoadingService);\r\n    this.toastService = this.getService<ToastService>(ToastService);\r\n    this.notifyService = this.getService<NotifyService>(NotifyService);\r\n    this.dialogService = this.getService<DialogService>(DialogService);\r\n    this.exceptionService = this.getService<ExceptionService>(ExceptionService);\r\n    this.entityService = this.getService<EntityService>(EntityService);\r\n    this.befRepository = this.viewModelContext.repository as BefRepository<Entity>;\r\n  }\r\n\r\n  /**\r\n   * 获取服务实例\r\n   */\r\n  getService<T>(token: any): T {\r\n    const injector = this.viewModelContext.injector;\r\n    return injector.get<T>(token);\r\n  }\r\n\r\n}\r\n\r\nexport { BaseDataService };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 数据工具类\r\n * @summary\r\n * 数据相关的工具方法临时放在这里\r\n */\r\nclass DataUtil {\r\n\r\n  /**\r\n   * 将BindingPath转换为EntityPath\r\n   */\r\n  public static convertBindingPathToEntityPath(bindingPath: string, viewModelContext: ViewModelContext): string {\r\n    const rid = viewModelContext.bindingData.list.currentId; // root表数据id\r\n    let path = '/' + rid;\r\n\r\n    const subPaths = bindingPath.split('/');\r\n    if (subPaths.length > 0) {\r\n      for (let index = 1; index < subPaths.length - 1; index++) {\r\n        const subPath = subPaths[index];\r\n        const subData = viewModelContext.bindingData[subPath];\r\n        if (!subData || !subData.currentId) {\r\n          throw Error(`获取子表完整路径出错，找不到${subData}对应的子表，或对应子表没有当前行。`);\r\n        }\r\n        path += `/${subPath}/${subData.currentId}`;\r\n      }\r\n    }\r\n    path += '/' + subPaths[subPaths.length - 1];\r\n\r\n    return path;\r\n  }\r\n\r\n  public static clearFromValidateType(viewModelContext: ViewModelContext): void {\r\n    const contexts = viewModelContext.appContext.viewModelContextManager.getContexts();\r\n    const contextsChild = contexts.filter(item => { return (item.parent && viewModelContext.id === item.parent.id) })\r\n    if (contextsChild.length >= 1) {\r\n      contextsChild.forEach(item => {\r\n        item.form.resetFieldsValidate()\r\n      })\r\n    }\r\n  }\r\n\r\n  public static stringTransformArray(parame): any[] {\r\n    if (this.parameIsThreeBoss(parame)) {\r\n      return []\r\n    } else {\r\n      return JSON.parse(parame);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 检测参数是否属于三大幻神 ''  undefined  null\r\n   */\r\n  public static parameIsThreeBoss(parame) {\r\n    if (parame === '' || parame === undefined || parame === null) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nexport { DataUtil };\r\n\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BefRepository } from '@farris/mobile-bef';\r\nimport { BaseDataService } from './base-data.service';\r\nimport { DataUtil } from './data-util';\r\n\r\nexport class LoadDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 加载列表数据\r\n   */\r\n  public loadForList(filters: any[], sorts: any[], size?: number, index?: number): Observable<Entity[]> {\r\n    if (typeof filters === 'string') {\r\n      filters = DataUtil.stringTransformArray(filters);\r\n    }\r\n    if (typeof sorts === 'string') {\r\n      sorts = DataUtil.stringTransformArray(sorts);\r\n    }\r\n    let { pageSize, pageIndex } = this.viewModelContext.repository.paginationInfo || { pageSize: null, pageIndex: null };\r\n    this.loadingService.show();\r\n\r\n    if (!size && !pageSize) {\r\n      pageSize = 20;\r\n    } else if (size) {\r\n      pageSize = size;\r\n    }\r\n\r\n    if (!index && !pageIndex) {\r\n      pageIndex = 1;\r\n    } else if (index) {\r\n      pageIndex = index;\r\n    }\r\n\r\n    if (pageIndex === 1) {\r\n      this.befRepository.entityCollection.clear();\r\n    }\r\n\r\n    const query$ = this.befRepository.getEntities(filters, sorts, pageSize, pageIndex);\r\n    return query$.pipe(\r\n      tap(\r\n        () => {\r\n          let { pageIndex, pageCount, totalCount } = this.viewModelContext.repository.paginationInfo;\r\n          if (pageIndex === pageCount || totalCount === 0) {\r\n            this.viewModelContext.appContext.eventBus.triggerEvent({ type: 'listviewFinished' })\r\n          } else {\r\n            this.viewModelContext.appContext.eventBus.triggerEvent({ type: 'listviewUnFinished' })\r\n          }\r\n          this.viewModelContext.appContext.eventBus.triggerEvent({ type: 'loadDataFinished' })\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 加载卡片数据\r\n   */\r\n  public loadForCard(id: string): Observable<Entity> {\r\n    DataUtil.clearFromValidateType(this.viewModelContext);\r\n    this.loadingService.show();\r\n    const get$ = this.befRepository.getEntityById(id);\r\n    return get$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n * 加载进入子表后，未作任何操作之前的数据\r\n * @param path 子表路径\r\n */\r\n  public loadDataForChildCard(path: string) {\r\n    const childID = this.viewModelContext.bindingData[path]['id'];\r\n    const id = this.viewModelContext.bindingData[path]['parentID'];\r\n    const entity = this.viewModelContext.repository.entityCollection.getEntityById(id)\r\n    const childEntityAll = entity[path];\r\n    const childEntityData = childEntityAll.get(childID).data;\r\n    this.viewModelContext.uiState.setPropertyValue('$childEntity', { ...childEntityData });\r\n  }\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\n\r\nimport { BaseDataService } from './base-data.service';\r\nimport { DataUtil } from './data-util';\r\n\r\n/**\r\n * 新增数据服务类\r\n */\r\nexport class CreateDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 新增数据\r\n   */\r\n  public create(): Observable<Entity> {\r\n    this.befRepository.entityCollection.clear();\r\n    DataUtil.clearFromValidateType(this.viewModelContext);\r\n    this.loadingService.show();\r\n    const create$ = this.befRepository.createEntity();\r\n    return create$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 新增后代节点\r\n   */\r\n  public createByPath(path: string): Observable<Entity> {\r\n    this.loadingService.show();\r\n    // 当前为新增\r\n    const entityPath = DataUtil.convertBindingPathToEntityPath(path, this.viewModelContext);\r\n    const append$ = this.befRepository.appendEntityByPath(entityPath);\r\n    const result$ = append$.pipe(\r\n      tap(\r\n        (e) => {\r\n          this.viewModelContext.uiState.setPropertyValue('$isAdd', { status: true, id: e['id'], path, child: { ...e.data } });\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n\r\n    return result$;\r\n  }\r\n\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\nexport class EditDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 编辑数据\r\n   */\r\n  public edit(id: string): Observable<Entity> {\r\n    this.loadingService.show();\r\n    const edit$ = this.befRepository.editEntityById(id);\r\n    return edit$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n}\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BefRepository } from '@farris/mobile-bef';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n/**\r\n * 数据更新服务\r\n */\r\nexport class UpdateDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 编辑数据\r\n   */\r\n  public update(id): Observable<Entity> {\r\n    this.loadingService.show();\r\n    const update$ = this.befRepository.updateEntityById(id);\r\n    const result$ =  update$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n          // this.exceptionService.show('更新失败', exception);\r\n        }\r\n      )\r\n    );\r\n\r\n    return result$;\r\n  }\r\n\r\n}\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { tap, switchMap } from 'rxjs/operators';\r\nimport { Entity, HttpMethods, HttpRequestConfig, ViewModelContext } from '@farris/mobile-devkit';\r\n\r\nimport { DataUtil } from './data-util';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n\r\n/**\r\n * 删除数据服务类\r\n */\r\nexport class RemoveDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n\r\n  /**\r\n   * 删除数据\r\n   */\r\n  public removeById(id: string): Observable<any> {\r\n\r\n    const result$ = this.dialogService.confirm('是否删除').pipe(\r\n      switchMap(val => {\r\n        if (val === false) {\r\n          return EMPTY;\r\n        }\r\n        if (this['context'] && this['context'].eventParams && this['context'].eventParams.swipecellClose) {\r\n          this['context'].eventParams.swipecellClose();\r\n        }\r\n        return this.cancelChanges(id);\r\n      }\r\n      ))\r\n    return result$\r\n  }\r\n\r\n  /**\r\n   * 确认删除\r\n   * @param id \r\n   */\r\n\r\n  private cancelChanges(id: string): Observable<any> {\r\n    this.loadingService.show();\r\n    const remove$ = this.befRepository.removeEntityAndSaveById(id);\r\n    return remove$.pipe(\r\n      tap(\r\n        () => {\r\n          this.notifyService.success('删除成功');\r\n          this.loadingService.hide();\r\n        },\r\n        () => {\r\n          this.loadingService.hide();\r\n          this.notifyService.error('删除失败');\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n\r\n  /**\r\n   * 批量删除数据\r\n   */\r\n  public removeByIds(ids: string[]): Observable<boolean> {\r\n    // 由于ListView尚未和UIState集成，无法直接获取ids，临时从事件参数中获取\r\n    if (!ids) {\r\n      const selectedItems = this['context'].eventParams;\r\n      ids = selectedItems.map((selectedItem) => {\r\n        return selectedItem.id;\r\n      });\r\n    }\r\n\r\n    const multiRemove$ = this.dialogService.confirm('是否删除').pipe(\r\n      switchMap(val => {\r\n        if (val === false) {\r\n          return EMPTY;\r\n        }\r\n        this.loadingService.show();\r\n        return this.befRepository.removeEntitiesByIds(ids);\r\n      }));\r\n    return multiRemove$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n          this.notifyService.success('删除成功');\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n\r\n          // this.exceptionService.show('删除失败', exception);\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 删除后代节点数据\r\n   */\r\n  public removeByPathAndId(path: string, id: string): Observable<boolean> {\r\n    const result$ = this.dialogService.confirm('是否删除').pipe(\r\n      switchMap(val => {\r\n        if (val === false) {\r\n          return EMPTY;\r\n        }\r\n        if (this['context'] && this['context'].eventParams && this['context'].eventParams.swipecellClose) {\r\n          this['context'].eventParams.swipecellClose();\r\n        }\r\n        return this.removeByPathAndIdChanges(path, id);\r\n      }\r\n      ));\r\n    return result$;\r\n  }\r\n\r\n\r\n  public removeByPathAndIdChanges(path: string, id: string): Observable<boolean> {\r\n    this.loadingService.show();\r\n    const entityPath = DataUtil.convertBindingPathToEntityPath(path, this.viewModelContext);\r\n    const remove$ = this.befRepository.removeEntityByPath(entityPath, id);\r\n    return remove$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n          this.notifyService.success('删除成功');\r\n        },\r\n        (error: any) => {\r\n          this.loadingService.hide();\r\n          console.error(error);\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 批量删除后代节点数据\r\n   */\r\n  public removeByPathAndIds(path: string, ids: string[]): Observable<boolean> {\r\n    throw new Error('Not Implemented');\r\n  }\r\n\r\n  /**\r\n   * 业务附件批量删除数据\r\n   */\r\n  public removeByBusinessIds(url: string, ids: string[]): Observable<boolean> {\r\n    // 由于ListView尚未和UIState集成，无法直接获取ids，临时从事件参数中获取\r\n    if (!ids) {\r\n      const selectedItems = this['context'].eventParams;\r\n      ids = selectedItems.map((selectedItem) => {\r\n        return selectedItem.id;\r\n      });\r\n    }\r\n    const params = {\r\n      ids: ids.join(',')\r\n    };\r\n    const requestConfig: HttpRequestConfig = {\r\n      params: params,\r\n      body: {\r\n        dataChange: [],\r\n        variableChange: null\r\n      }\r\n    };\r\n    return this.befRepository.apiProxy.request(HttpMethods.PUT, url, requestConfig, true);\r\n    // this.loadingService.show();\r\n    // const multiRemove$ = this.dialogService.confirm('是否删除').pipe(\r\n    //   switchMap(val => {\r\n    //     if (val === false) {\r\n    //       return EMPTY;\r\n    //     }\r\n    //   }));\r\n    // return multiRemove$.pipe(\r\n    //   tap(\r\n    //     () => {\r\n    //       this.loadingService.hide();\r\n    //     },\r\n    //     (exception: any) => {\r\n    //       this.loadingService.hide();\r\n    //     }\r\n    //   )\r\n    // );\r\n  }\r\n\r\n\r\n  /**\r\n   * 业务附件删除后代节点数据\r\n   */\r\n  public removeByBusinessPathAndId(url: string, path: string, id: string): Observable<boolean> {\r\n    const result$ = this.dialogService.confirm('是否删除').pipe(\r\n      switchMap(val => {\r\n        if (val === false) {\r\n          return EMPTY;\r\n        }\r\n        return this.befRepository.apiProxy.request(HttpMethods.PUT, url);\r\n      }\r\n      ));\r\n    return result$;\r\n  }\r\n\r\n\r\n  /**\r\n   * 子表清除编辑与新增标记\r\n   * @returns \r\n   */\r\n  public ClearStatusAfterchildCardSave(): Observable<any> {\r\n    this.viewModelContext.uiState.setPropertyValue('$isAdd', null);\r\n    this.viewModelContext.uiState.setPropertyValue('$childEntity', null);\r\n    return of(true)\r\n  }\r\n\r\n}\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { switchMap, map, tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\nexport class SaveDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 保存数据\r\n   */\r\n  public save(): Observable<boolean> {\r\n    this.loadingService.show();\r\n    const save$ = this.befRepository.saveEntities();\r\n    return save$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n          this.notifyService.success('保存成功');\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 子表保存\r\n   */\r\n  public saveByPath(): Observable<boolean> {\r\n    this.loadingService.show();\r\n    const currentRootId = this.viewModelContext.bindingData.list.currentId;\r\n    const update$ = this.befRepository.updateEntityById(currentRootId);\r\n    const result$ = update$.pipe(\r\n      map(() => {\r\n        return true;\r\n      }),\r\n      tap(\r\n        () => {\r\n          this.viewModelContext.uiState.setPropertyValue('$isAdd', null);\r\n          this.viewModelContext.uiState.setPropertyValue('$childEntity', null);\r\n          this.loadingService.hide();\r\n          this.notifyService.success('保存成功');\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n        }\r\n      )\r\n    );\r\n    return result$;\r\n  }\r\n}\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { Entity, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BefRepository } from '@farris/mobile-bef';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\nexport class CancelDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 新增数据\r\n   */\r\n  public cancel(): Observable<boolean> {\r\n    this.loadingService.show();\r\n    const cancel$ = this.befRepository.cancelEntityChanges();\r\n    return cancel$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (exception: any) => {\r\n          this.loadingService.hide();\r\n          // this.exceptionService.show('取消失败', exception);\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { ViewModelContext, HttpMethod, HttpHeaders, HttpParams, HttpRequestConfig } from '@farris/mobile-devkit';\r\nimport { ResponseInfo } from '@farris/mobile-bef';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n\r\n/**\r\n * BE动作调用服务\r\n */\r\nclass BeActionService extends BaseDataService {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(protected viewModelContext: ViewModelContext) {\r\n    super(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 执行自定义动作\r\n   */\r\n  public invokeAction(\r\n    actionUrl: string, httpMethod: HttpMethod, httpHeaders?: HttpHeaders, params?: HttpParams, body?: any\r\n  ): Observable<ResponseInfo> {\r\n    return this.innerInvokeAction(actionUrl, httpMethod, httpHeaders, params, body);\r\n  }\r\n\r\n  /**\r\n   * 调用自定义动作\r\n   */\r\n  private innerInvokeAction(\r\n    actionUrl: string, method: HttpMethod, headers?: HttpHeaders, params?: HttpParams, body?: any\r\n  ): Observable<any>  {\r\n    const apiProxy = this.befRepository.apiProxy;\r\n    const baseUrl = apiProxy.baseUrl;\r\n\r\n    // 构造url\r\n    const fullActionUrl = `${baseUrl}/service/${actionUrl}`;\r\n    const requestConfig: HttpRequestConfig = {\r\n    };\r\n\r\n    // headers构造\r\n    if (headers ) {\r\n      requestConfig.headers = headers;\r\n    }\r\n\r\n    // 查询参数\r\n    if (params) {\r\n      requestConfig.params = params;\r\n    }\r\n\r\n    // body构造\r\n    if (body) {\r\n      requestConfig.body = body;\r\n    }\r\n\r\n    this.loadingService.show();\r\n    const result$ = apiProxy.request(method, fullActionUrl, requestConfig);\r\n    return result$.pipe(\r\n      tap(\r\n        () => {\r\n          this.loadingService.hide();\r\n        },\r\n        (error: any) => {\r\n          this.loadingService.hide();\r\n          console.log(error);\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport { BeActionService };\r\n\r\n\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { LoadingService, NotifyService } from '../ui-services/index';\r\nimport { WfTaskHandlerService } from '../work-flow-service/wf-task-handler.service'\r\nclass ApproveService {\r\n\r\n    private wfTaskHandlerService: WfTaskHandlerService;\r\n\r\n    private notifyService: NotifyService;\r\n\r\n    constructor(wfTaskHandlerService: WfTaskHandlerService, protected viewModelContext: ViewModelContext) {\r\n        this.wfTaskHandlerService = wfTaskHandlerService;\r\n        this.notifyService = this.getService<NotifyService>(NotifyService);\r\n    }\r\n\r\n    /**\r\n     * 获取服务实例\r\n     */\r\n    getService<T>(token: any): T {\r\n        const injector = this.viewModelContext.injector;\r\n        return injector.get<T>(token);\r\n    }\r\n\r\n    /**\r\n     * 提交审批(带入口单据使用wf控件)\r\n     * @param bizBillID 业务单据Id\r\n     * @param bizDefKey 入口单据Id\r\n     * @param options 上下文参数\r\n     * @param variables 可选参数\r\n     */\r\n    public submitApproveWithBizDefKeyUseControl(bizBillID: string, bizDefKey: string, options: any = {}, variables?: any) {\r\n        if (!bizBillID) {\r\n            this.notifyService.error('业务单据Id不能为空');\r\n            return EMPTY;\r\n        }\r\n        if (!bizDefKey) {\r\n            this.notifyService.error('入口单据Id不能为空');\r\n            return EMPTY;\r\n        }\r\n        if (!options || typeof options !== 'object') {\r\n            options = {};\r\n        }\r\n        const payload: any = {\r\n            dataId: bizBillID,\r\n            bizDefKey,\r\n            ...options\r\n        };\r\n        // 处理variables参数\r\n        if (variables) {\r\n            if (variables.startsWith('{') && variables.endsWith('}')) {\r\n                try {\r\n                    variables = JSON.parse(variables);\r\n                } catch {\r\n                    console.log('variables parse failed!');\r\n                    variables = {};\r\n                }\r\n            }\r\n            payload.variables = variables;\r\n        }\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.startProcess(payload);\r\n    }\r\n\r\n    /**\r\n     * 取消审批(支持主表、子表)\r\n     * 迁移web端（已废弃）请调用新的取消提交方法\r\n     * @param procInstId 流程实例Id\r\n     */\r\n    public cancelSubmit(procInstId: string): Observable<any> {\r\n        if (!procInstId) {\r\n            this.notifyService.error('流程实例Id不能为空');\r\n            return EMPTY;\r\n        }\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.cancelSubmit({ dataId: null, bizDefKey: null, procInstId });\r\n    }\r\n\r\n    /**\r\n     * 提交审批\r\n     * @param dataId 表单id\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    public submitWithBizDefKey(dataId: string, bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.submitWithBizDefKey(dataId, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 取消提交审批\r\n     * @param dataId 表单id\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    public cancelSubmitWithDataId(dataId: string, bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.cancelSubmitWithDataId(dataId, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 批量提交审批\r\n     * @param dataIds 表单ID集合\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    public batchSubmitWithBizDefKey(dataIds: string[], bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.batchSubmitWithBizDefKey(dataIds, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 批量取消提交审批\r\n     * @param dataIds 表单ID集合\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    batchCancelSubmitWithDataId(dataIds: string[], bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.batchCancelSubmitWithDataId(dataIds, bizDefKey);\r\n    }\r\n\r\n    /**\r\n    * 子表提交审批\r\n    * @param parentDataId 主表id\r\n    * @param childDataId 子表id\r\n    * @param bizDefKey 入口单据id\r\n    */\r\n    childSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.childSubmit(parentDataId, childDataId, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 子表取消提交审批\r\n     * @param parentDataId 主表id\r\n     * @param childDataId 子表id\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    childCancelSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.childCancelSubmit(parentDataId, childDataId, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 子表批量提交审批\r\n     * @param parentDataId 主表id\r\n     * @param childDataIds 子表id集合\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    childBatchSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.childBatchSubmit(parentDataId, childDataIds, bizDefKey);\r\n    }\r\n\r\n    /**\r\n     * 子表批量取消提交审批\r\n     * @param parentDataId 主表id\r\n     * @param childDataIds 子表id集合\r\n     * @param bizDefKey 入口单据id\r\n     */\r\n    childBatchCancelSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n        return this.wfTaskHandlerService && this.wfTaskHandlerService.childBatchCancelSubmit(parentDataId, childDataIds, bizDefKey);\r\n    }\r\n\r\n}\r\n\r\nexport { ApproveService }","import { of, EMPTY } from 'rxjs';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { BaseDataService } from './base-data.service';\r\nimport { DataUtil } from './data-util';\r\nimport { BefRepositoryUtil } from '@farris/mobile-bef'\r\nimport { HttpMethods, ViewModelContext } from '@farris/mobile-devkit';\r\n\r\n\r\n/**\r\n * 数据检查服务\r\n */\r\nclass CheckDataService extends BaseDataService {\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    super(viewModelContext)\r\n  }\r\n\r\n  /**\r\n   * 离开页面前检查数据变更\r\n   */\r\n  public checkChangesBeforeLeave() {\r\n\r\n    //const isEntitiesChanged = this.befRepository.entityManager.checkAllEntityChanges();\r\n\r\n    // 实体数据没有变化，继续执行\r\n    if (!BefRepositoryUtil.isExistUnsaveData(this.befRepository)) {\r\n      return of(true);\r\n    }\r\n\r\n    return this.dialogService.confirm('存在未保存的变更，确认离开当前页面？').pipe(\r\n      switchMap((ifLeave: any) => {\r\n        if (ifLeave === false) {\r\n          return EMPTY;\r\n        } else {\r\n          this.loadingService.show();\r\n          const cancel$ = this.befRepository.cancelEntityChanges();\r\n          return cancel$.pipe(\r\n            switchMap(() => {\r\n              if (this.befRepository.apiProxy.associatedUrlMap.size >= 1) {\r\n                const urls = [...this.befRepository.apiProxy.associatedUrlMap.keys()];\r\n                return this.befRepository.apiProxy.request(HttpMethods.POST, `${urls[0]}/service/cancel`)\r\n              } else {\r\n                return of(true)\r\n              }\r\n            }),\r\n            tap(() => {\r\n              this.loadingService.hide();\r\n            })\r\n          );\r\n        }\r\n      }\r\n      ));\r\n  }\r\n\r\n  /**\r\n   * 子表离开页面前检查数据变更\r\n   */\r\n  public checkChangesBeforeLeaveChild() {\r\n    // 新增状态\r\n    if (this.viewModelContext.uiState['$isAdd'] && this.viewModelContext.uiState['$isAdd'].status === true) {\r\n      // 继续判断\r\n      const childId = this.viewModelContext.uiState['$isAdd'].id;\r\n      const childPath = this.viewModelContext.uiState['$isAdd'].path;\r\n      const child = this.viewModelContext.uiState['$isAdd'].child;\r\n      const subPaths = childPath.split('/');\r\n      let currentChild;\r\n      if (subPaths[0] && subPaths.length === 1) {\r\n        currentChild = this.viewModelContext.bindingData[subPaths[0]]\r\n      }\r\n      if (!subPaths[0] && subPaths.length === 2) {\r\n        currentChild = this.viewModelContext.bindingData[subPaths[1]]\r\n      }\r\n      if (subPaths.length > 2) {\r\n        // 暂不处理从从表\r\n        let childPath = ''\r\n        if (subPaths[0]) {\r\n          childPath = subPaths[0];\r\n        }\r\n        for (let index = 1; index < subPaths.length; index++) {\r\n          childPath = childPath + subPaths[index]\r\n        }\r\n        currentChild = this.viewModelContext.bindingData[childPath]\r\n      }\r\n      const isChanged = this.checkForVariationBetweenTheTwo(currentChild, child);\r\n      if (isChanged) {\r\n        return of(true)\r\n      }\r\n      const entityPath = DataUtil.convertBindingPathToEntityPath(childPath, this.viewModelContext);\r\n      return this.befRepository.removeEntityByPath(entityPath, childId);\r\n    }\r\n    return of(true)\r\n  }\r\n\r\n  private checkForVariationBetweenTheTwo(newData, oldData) {\r\n    const childKeys = Object.keys(oldData);\r\n    let isChanged = false;\r\n    for (let i = 0; i < childKeys.length; i++) {\r\n      if (Object.prototype.toString.call(oldData[childKeys[i]]) === '[object Object]' || Object.prototype.toString.call(oldData[childKeys[i]]) === '[object Array]') {\r\n        if (JSON.stringify(oldData[childKeys[i]]) !== JSON.stringify(newData[childKeys[i]])) {\r\n          return isChanged = true\r\n        }\r\n      } else {\r\n        if (oldData[childKeys[i]] !== newData[childKeys[i]]) {\r\n          return isChanged = true\r\n        }\r\n      }\r\n    }\r\n    return isChanged;\r\n  }\r\n\r\n  /**\r\n   * 进入子表编辑或者新增点击返回都会复原进入子表前的数据\r\n   * @param path 子表路径\r\n   */\r\n  public checkChangesBeforeLeaveAddOrEditChild(path: string) {\r\n    // 新增状态\r\n    if (this.viewModelContext.uiState['$isAdd'] && this.viewModelContext.uiState['$isAdd'].status === true) {\r\n      // 新增直接干掉\r\n      const childId = this.viewModelContext.uiState['$isAdd'].id;\r\n      const childPath = this.viewModelContext.uiState['$isAdd'].path;\r\n      const entityPath = DataUtil.convertBindingPathToEntityPath(childPath, this.viewModelContext);\r\n      return this.befRepository.removeEntityByPath(entityPath, childId).pipe(\r\n        tap(() => {\r\n          this.viewModelContext.uiState.setPropertyValue('$isAdd', null);\r\n        }));\r\n    } else {\r\n      // 编辑还原\r\n      const childID = this.viewModelContext.bindingData[path]['id'];\r\n      const id = this.viewModelContext.bindingData[path]['parentID'];\r\n      const childEntityData = this.viewModelContext.uiState['$childEntity'];\r\n      if (!childEntityData) {\r\n        return of(true)\r\n      }\r\n      this.viewModelContext.repository.entityCollection.getEntityById(id)[path].get(childID).load(childEntityData);\r\n      return of(true)\r\n    }\r\n  }\r\n}\r\n\r\nexport { CheckDataService };\r\n","// import { Router } from 'vue-router';\r\nimport { Observable } from 'rxjs';\r\nimport { tap, map } from 'rxjs/operators';\r\nimport { ViewModelContext, HttpClient } from '@farris/mobile-devkit';\r\nimport { RtcOptions, BeforeNavigateReponseBody, BeforeNavigateRequestBody } from './types/index';\r\nimport { JsBridgeService } from './js-bridge-service/index';\r\n\r\n\r\n\r\n\r\n/**\r\n * 路由服务\r\n */\r\nclass RouterService {\r\n\r\n  /**\r\n   * ViewModel上下文\r\n   */\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * VueRouter实例\r\n   */\r\n  private router: any;\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(viewModelContext: ViewModelContext, router: any, private jsBridgeService: JsBridgeService) {\r\n    this.viewModelContext = viewModelContext;\r\n    this.router = router;\r\n  }\r\n\r\n  /**\r\n   * 路由跳转\r\n   * @param path   路由路径\r\n   * @param params 路由参数\r\n   */\r\n  navigate(path: string, queryParams: any = {}, backParams: any = {}, backPath?: string) {\r\n    if (!path) return\r\n\r\n    queryParams = this.ParamsFromStringToObject(queryParams);\r\n    backParams = this.ParamsFromStringToObject(backParams);\r\n\r\n    const pathIndex = this.sessionStorageSaveHistory(path, backPath, backParams)\r\n\r\n    // 跨工程跳转\r\n    if (path && pathIndex >= 0) {\r\n      let urlPath = this.splicePath(path, queryParams);\r\n      window.location.href = urlPath;\r\n      return false;\r\n    }\r\n\r\n    window['MOBILE_ORIGIN_BACK'] && window['MOBILE_ORIGIN_BACK'].reflushOriginGoback();\r\n\r\n    this.router.push({\r\n      path: path,\r\n      query: queryParams\r\n    });\r\n  }\r\n\r\n  private removeParams(pathIndex, path) {\r\n    let end = path.search('\\\\?');\r\n    if (end = -1) {\r\n      end = path.length;\r\n    }\r\n    return path.slice(pathIndex, end);\r\n  }\r\n\r\n  private getsessionStorageSaveHistoryKey(path) {\r\n    const pathIndex = path.search('/apps');\r\n    // 跨页面跳转离开\r\n    if (path && pathIndex >= 0) {\r\n      return this.removeParams(pathIndex, path);\r\n    }\r\n    return this.router.options.history.base + path;\r\n  }\r\n\r\n  private sessionStorageSaveHistory(path, backPath, backParams) {\r\n    const pathIndex = path.search('/apps');\r\n\r\n    const key = this.getsessionStorageSaveHistoryKey(path);\r\n    let historyObject = {}\r\n    //判断是否制定了目标页面得返回地址\r\n    if (backPath) {\r\n      const backPathIndex = path.search('/apps');\r\n      //指定返回路由为跨工程跳转\r\n      if (backPathIndex >= 0) {\r\n        historyObject = {\r\n          routerWay: 'href',\r\n          path: backPath,\r\n          query: backParams\r\n        }\r\n      } else {\r\n        historyObject = {\r\n          routerWay: 'Router',\r\n          path: backPath,\r\n          query: backParams\r\n        }\r\n      }\r\n      sessionStorage.setItem(key, JSON.stringify(historyObject))\r\n      return pathIndex;\r\n    } else {\r\n      let currentPath = this.router.currentRoute.value.path;\r\n      // 跨页面跳转离开\r\n      if (path && pathIndex >= 0) {\r\n        //拼接当前路由\r\n        currentPath =  this.router.options.history.base + this.router.options.history.location;\r\n        //记录当前路由\r\n        historyObject = {\r\n          routerWay: 'href',\r\n          path: currentPath,\r\n          query: backParams\r\n        }\r\n      } else {\r\n        // 路由方式跳转记录\r\n        historyObject = {\r\n          routerWay: 'Router',\r\n          path: currentPath,\r\n          query: backParams\r\n        }\r\n      }\r\n      sessionStorage.setItem(key, JSON.stringify(historyObject))\r\n      return pathIndex;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 带维度的路由跳转\r\n   */\r\n  navigateForRtc(path: string, queryParams: any = {}, backParams: any = {}, backPath?: string) {\r\n\r\n    if (!queryParams || !queryParams.metadataId) {\r\n      this.navigate(path, queryParams, backParams, backPath);\r\n    }\r\n\r\n    const rtcOptions: RtcOptions = {\r\n      metadataId: queryParams.metadataId,\r\n      withDims: false,\r\n      dim1: queryParams.dim1,\r\n      dim2: queryParams.dim2\r\n    };\r\n    delete queryParams['metadataId'];\r\n    delete queryParams['dim1'];\r\n    delete queryParams['dim2'];\r\n\r\n    const correctRtcOptions$ = this.correctRtcOptions(rtcOptions);\r\n    const extendedPath$ = correctRtcOptions$.pipe(\r\n      map((correctedRtcOptions: RtcOptions) => {\r\n        return this.getExtendPath(path, correctedRtcOptions);\r\n      })\r\n    );\r\n\r\n    const result$ = extendedPath$.pipe(\r\n      tap((extendedPath: string) => {\r\n        this.navigate(extendedPath, queryParams, backParams);\r\n      })\r\n    );\r\n\r\n    result$.subscribe();\r\n  }\r\n\r\n  /**\r\n   * 纠正维度信息\r\n   * @summary\r\n   * 1、非运行时定制表单，widthDims=false, 维度为空；\r\n   * 2、运行时定制表单：维度值不存在时，则纠正为public；\r\n   */\r\n  private correctRtcOptions(rtcOptions: RtcOptions): Observable<RtcOptions> {\r\n    const dim1 = rtcOptions.dim1 || 'public';\r\n    const dim2 = rtcOptions.dim2 || 'public';\r\n    const metadataId = rtcOptions.metadataId;\r\n    const httpClient = this.viewModelContext.injector.get<HttpClient>(HttpClient);\r\n\r\n    const url = '/api/runtime/bcc/v1.0/template/beforeNavigate';\r\n    const body: BeforeNavigateRequestBody = {\r\n        isRootMetadata: true,\r\n        metadataId: metadataId,\r\n        dim1: dim1,\r\n        dim2: dim2,\r\n    };\r\n    const beforeNavigate$ = httpClient.post(url, body, null).pipe(\r\n      map((result: BeforeNavigateReponseBody) => {\r\n        const correctedRtcOptions: RtcOptions = {\r\n          metadataId: result.metadataId,\r\n          withDims: result.withDims === 1 ? true : false,\r\n          dim1: result.dim1,\r\n          dim2: result.dim2\r\n        };\r\n\r\n        return correctedRtcOptions;\r\n      })\r\n    );\r\n    return beforeNavigate$;\r\n  }\r\n\r\n  /**\r\n   * 获取运行时定制表单地址\r\n   */\r\n  private getExtendPath(path: string, rtcOptions: RtcOptions): string {\r\n\r\n    if (rtcOptions.withDims === false) {\r\n      return path;\r\n    }\r\n\r\n    const arrPath = path.split('index.html');\r\n    const append = `${rtcOptions.dim1}/${rtcOptions.dim2}/index.html`.toLowerCase();\r\n    const extendPath = arrPath.join(append);\r\n    return extendPath;\r\n  }\r\n\r\n  /**\r\n   * 拼接url路径\r\n   * @param path 路径\r\n   * @param params 参数\r\n   * @returns \r\n   */\r\n  private splicePath(path: string, params: any) {\r\n    let urlPath = path\r\n    const end = urlPath.search('\\\\?');\r\n    if (end > -1) {\r\n      urlPath = urlPath.slice(0, end)\r\n    }\r\n    const keys = Object.keys(params);\r\n    if (keys.length > 0) {\r\n      urlPath = urlPath + '?';\r\n      keys.forEach(element => {\r\n        urlPath = urlPath + element + '=' + params[`${element}`] + '&'\r\n      });\r\n      urlPath = urlPath.slice(0, urlPath.length - 1)\r\n    }\r\n    return urlPath;\r\n  }\r\n\r\n  private ParamsFromStringToObject(params: any): object {\r\n\r\n    if (Object.prototype.toString.call(params) === '[object Object]') {\r\n      return params;\r\n    }\r\n\r\n    try {\r\n      params = JSON.parse(params);\r\n    } catch (error) {\r\n      if (!params) {\r\n        params = {}\r\n      } else {\r\n        params = {}\r\n        console.error('路由传参params不是JSON串格式')\r\n      }\r\n    }\r\n\r\n    if (Object.prototype.toString.call(params) !== '[object Object]') {\r\n      return {};\r\n    }\r\n\r\n    return params;\r\n  }\r\n\r\n  /**\r\n * 路由跳转\r\n * @param path   路由路径\r\n * @param params 路由参数\r\n */\r\n  navigateReplace(path: string, queryParams: any = {}) {\r\n    if (typeof queryParams === 'string') {\r\n      queryParams = JSON.parse(queryParams);\r\n    }\r\n    this.router.replace({\r\n      path: path,\r\n      query: queryParams\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 后退\r\n   */\r\n  goBack(params) {\r\n    params = this.ParamsFromStringToObject(params);\r\n    const currentPath = this.router.options.history.base + this.router.currentRoute.value.path;\r\n    let need_go_back = sessionStorage.getItem(currentPath);\r\n    if (!need_go_back) {\r\n      if (window.top.location.pathname.indexOf('mobiletaskcenter') > -1) {\r\n        return;\r\n      }\r\n      this.jsBridgeService.closeWindow()\r\n      return\r\n    }\r\n    const keys = Object.keys(params);\r\n\r\n    need_go_back = JSON.parse(need_go_back);\r\n    if (need_go_back && need_go_back['routerWay'] === 'Router') {\r\n      let query = need_go_back['query'];\r\n      if (keys.length > 0) {\r\n        query = { ...query, ...params }\r\n      }\r\n      this.router.push({\r\n        query,\r\n        path: need_go_back['path'],\r\n      });\r\n    }\r\n    if (need_go_back && need_go_back['routerWay'] === 'href') {\r\n      let query = need_go_back['query'];\r\n      if (keys.length > 0) {\r\n        query = { ...query, ...params }\r\n      }\r\n      let path = need_go_back['path'];\r\n\r\n      path = this.splicePath(path, query);\r\n\r\n      window.location.href = path;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 映射路由状态\r\n   */\r\n  mappingToUIState() {\r\n    const routerState = {\r\n      params: this.router.currentRoute['value'].params,\r\n      queryParams: this.router.currentRoute['value'].query\r\n    };\r\n    this.viewModelContext.uiState['routerState'] = routerState;\r\n  }\r\n}\r\n\r\n/**\r\n * Token\r\n * @todo：临时方案，直接注入VueRouter实例。\r\n */\r\nconst ROUTER_INSTANCE_TOKEN = '@farris/mobile-command-services/ROUTER_INSTANCE_TOKEN';\r\n\r\nexport { RouterService, ROUTER_INSTANCE_TOKEN };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { EMPTY, Observable, of, zip } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n/**\r\n * 数据服务基类\r\n */\r\nclass ValidatorServices {\r\n\r\n    constructor(private viewModelContext: ViewModelContext) { }\r\n\r\n    /**\r\n     * 获取某个视图模型上得所有验证结果\r\n     * @param viewModelId 视图模型id\r\n     */\r\n    validateFields(viewModelId?: string) {\r\n        if (viewModelId) {\r\n            return this.viewModelContext.appContext.viewModelContextManager.getContextById(viewModelId).form.validateFields();\r\n        } else {\r\n            return this.viewModelContext.form.validateFields();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理某个视图模型上得所有验证结果\r\n     * @param viewModelId 视图模型id\r\n     */\r\n    handleValidateFields(viewModelId?: string): Observable<any> {\r\n        let validateFieldsResults = [];\r\n        if (viewModelId) {\r\n            validateFieldsResults = this.viewModelContext.appContext.viewModelContextManager.getContextById(viewModelId).form.validateFields();\r\n        } else {\r\n            this.viewModelContext.appContext.viewModelContextManager.getRootContextAndPosterityById(this.viewModelContext.id).forEach((context: ViewModelContext) => {\r\n                validateFieldsResults = validateFieldsResults.concat(context.form.validateFields())\r\n            });\r\n        }\r\n        if(validateFieldsResults.length === 0){\r\n            return of(true);\r\n        }\r\n        return zip(...validateFieldsResults).pipe(\r\n            switchMap((value)=>{\r\n                const index = value.findIndex(item=>item['passing'] === false)\r\n                if(index > -1){\r\n                    return EMPTY\r\n                }else{\r\n                    return of(true);\r\n                }\r\n            })\r\n        )\r\n    }\r\n\r\n    /**\r\n     * 获取某个字段的验证结果\r\n     * @param name 字段名称\r\n     * @param viewModelId 视图模型id\r\n     */\r\n    getFieldError(name: string, viewModelId?: string) {\r\n        if (viewModelId) {\r\n            return this.viewModelContext.appContext.viewModelContextManager.getContextById(viewModelId).form.getFieldError(name);\r\n        } else {\r\n            return this.viewModelContext.form.getFieldError(name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 重置一组校验状态 不传参数清除所有\r\n     * @param fields name的数组\r\n     * @param viewModelId 视图模型id\r\n     */\r\n    resetFieldsValidate(fields?: string[], viewModelId?: string) {\r\n        if (fields && typeof fields === 'string') {\r\n            fields = JSON.parse(fields);\r\n        }\r\n        if (viewModelId) {\r\n            return this.viewModelContext.appContext.viewModelContextManager.getContextById(viewModelId).form.resetFieldsValidate(fields);\r\n        } else {\r\n            this.viewModelContext.appContext.viewModelContextManager.getRootContextAndPosterityById(this.viewModelContext.id).forEach((context: ViewModelContext) => {\r\n                context.form.resetFieldsValidate(fields);\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport { ValidatorServices };\r\n","import { Observable, Subject } from 'rxjs';\r\nimport { IJsBridgeStrategy, PhotoOptions, PictureOptions, VidepOptions, LocationInfo } from './decorators';\r\n\r\nclass CCworkService implements IJsBridgeStrategy {\r\n\r\n    init(callback) {\r\n        window.top['iCityBridge'].init(callback)\r\n    }\r\n\r\n    /**\r\n     * {\r\n     * quality:图片质量，可选值high、mid、low, high为1920*1080；mid为720*540；low: 480*360，默认为mid\r\n     * mode:唤起模式，可选值both（仅支持iOS）、camera、album, 默认为camera;\r\n     * mark文字水印，字数最大值50\r\n     * }\r\n     * @param options Object\r\n     *\r\n     */\r\n    takePhoto(options: PhotoOptions = { quality: 'mid' }): Observable<[]> {\r\n        // callback return object {errormessage:\"\"，result:\"base64格式\"}\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data['result']);\r\n            }\r\n        }\r\n\r\n        window.top['iCityBridge'].ccworkGetPicsFromCameraAndAlbum(\r\n            { ...options },\r\n            callback\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    /**\r\n     * path 如果不为空则从指定图片文件识别二维码,空就吊起相机\r\n     * filters 条码类型过滤列表，如QR、EAN13、EAN8\r\n     * \r\n     * @param options Object\r\n     * \r\n     */\r\n    scanQRCode(): Observable<string> {\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data['result']);\r\n            }\r\n        }\r\n\r\n        window.top['iCityBridge'].ccworkScanCode({}, callback);\r\n        return subject;\r\n    }\r\n\r\n    getSysInfo() {\r\n\r\n    }\r\n\r\n    getLocation(): Observable<LocationInfo> {\r\n        /**\r\n         *  回调函数\r\n         *  输出结构 object\r\n         *  errormessage:\"\"\r\n         *  result:Object {\r\n         *  addr:'山东省济南市历下区经十路靠近浪潮'\r\n         *  city:\"济南\"\r\n         *  country:\"中国\"\r\n         *  course:-1\r\n         *  district:\"历下区\"\r\n         *  lat:36.66254123263889\r\n         *  lng:117.12974745008681\r\n         *  province:\"山东省\"\r\n         *  street:\"经十路\"\r\n         *  streetNum:\"1单元\"\r\n         * }\r\n         *  status:true\r\n         */\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data['result']);\r\n            }\r\n        }\r\n\r\n        window.top['iCityBridge'].ccworkGetLocation(\r\n            callback\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    // TODO:云上协同选择文件\r\n    selectFile(): Observable<[]> {\r\n        const subject = new Subject<any>();\r\n        subject.next([]);\r\n        return subject;\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param number string\r\n     * @param content string\r\n     */\r\n    sendSMS(number: string, content: string): void {\r\n        const options = {\r\n            numbers: [number],\r\n            content\r\n        }\r\n        window.top['iCityBridge'].ccworkSendSms(options)\r\n    }\r\n\r\n    openSendSMS(number: string, content: string): void {\r\n        window.top['iCityBridge'].sendSMS({ tel: number, msg: content })\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param number string\r\n     */\r\n    tel(number: string): void {\r\n        window.top['iCityBridge'].ringUp(number)\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param options \r\n     */\r\n    selectPictureFromAlbum(options: PictureOptions = { maxNum: 9, mType: 0 }): Observable<[]> {\r\n        /**\r\n         * params object \r\n         *  { maxNum : number 9 最大可选数 默认9\r\n         *    mType: number 0 \t选择模式，可选值0/1, 0:图片，1：视频;\r\n         * }\r\n         */\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data['result']);\r\n            }\r\n        }\r\n\r\n        window.top['iCityBridge'].ccworkGetPicsFromAlbum(\r\n            options,\r\n            callback\r\n        );\r\n        return subject;\r\n        /**\r\n         *  object\r\n         *  errormessage:\"\"\r\n         *  result:Array [\r\n         * base64\r\n         * ]\r\n         *  status:true\r\n         */\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param options  \r\n     */\r\n    takeVideo(options: VidepOptions): Observable<string> {\r\n        /**\r\n         * params object \r\n         *  { \r\n         *  time : number 短视频时间（秒） 最大60s\r\n         *  quality: number 0 \t视频质量 取值范围0~1\r\n         *  id :string \t视频id（视频名字）\r\n         * }\r\n         */\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data['result']);\r\n            }\r\n        }\r\n\r\n        window.top['iCityBridge'].ccworkTakeShortVideo(\r\n            {\r\n                time: 15,\r\n                ...options\r\n            }\r\n            ,\r\n            callback\r\n        );\r\n        return subject;\r\n        /**\r\n         *  object\r\n         *  errormessage:\"\"\r\n         *  result:Object {\r\n         *  value:'path'\r\n         * }\r\n         *  status:true\r\n         */\r\n    }\r\n\r\n    closeWindow(): void {\r\n        window.top['iCityBridge'].closeWebView()\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param title string\r\n     */\r\n    setTitles(title: string): void {\r\n        window.top['iCityBridge'].setTitle(title)\r\n    }\r\n\r\n    downloadFile(options) {\r\n        alert('暂不支持附件下载');\r\n    }\r\n\r\n    setOriginGoback(fn?) {\r\n        window.top['iCityBridge'].ccworkInterceptOriginGoback(!!fn, fn, () => { })\r\n    }\r\n\r\n    pushOriginGoback(fn?: any) {\r\n        window['OriginGoback'] = window['OriginGoback'] || [];\r\n        const OriginGoback = () => {\r\n            const gobackFn = window['OriginGoback'].pop()\r\n            if (gobackFn) {\r\n                gobackFn()\r\n            }\r\n            else {\r\n                window.top['iCityBridge'].ccworkInterceptOriginGoback(false, () => { }, () => { })\r\n                history.back();\r\n            }\r\n        }\r\n        if (fn) {\r\n            window['OriginGoback'].push(fn)\r\n            window.top['iCityBridge'].ccworkInterceptOriginGoback(true, OriginGoback, () => { })\r\n        }\r\n    }\r\n    popOriginGoback(fn?: any) {\r\n        window['OriginGoback'].pop()\r\n    }\r\n\r\n    playShortVideo(opt: any) {\r\n        window.top['iCityBridge'].ccworkPlayShortVideo(opt);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport { CCworkService }","import { switchMap } from 'rxjs/operators';\r\nimport { forkJoin, Observable, Subject } from 'rxjs';\r\nimport { IJsBridgeStrategy, PhotoOptions, PictureOptions, VidepOptions, LocationInfo } from './decorators';\r\n\r\nclass CloudPlusService implements IJsBridgeStrategy {\r\n    playShortVideo(options?: any) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n    // 目前拍完返回报错\r\n    takePhoto(options: PhotoOptions = {\r\n        quality: 75,\r\n        encodingType: 0,\r\n        targetWidth: 600,\r\n        targetHeight: 600\r\n    }): Observable<[]> {\r\n        const subject = new Subject<any>();\r\n        const callback = (data) => {\r\n            if (data && data['originalData']) {\r\n                subject.next(data['originalData']);\r\n            }\r\n        }\r\n        const errorCallback = (data) => {\r\n            if (data) {\r\n                console.log('takePhoto', data);\r\n                subject.next([]);\r\n                return;\r\n            }\r\n        }\r\n\r\n        window['imp'].iCamera.open(\r\n            options,\r\n            callback,\r\n            errorCallback,\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    scanQRCode(): Observable<string> {\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                console.log('二维码回调')\r\n\r\n                subject.next(data);\r\n            }\r\n        }\r\n        console.log('调用二维码')\r\n\r\n        window['imp'].iBarCode.scan(\r\n            callback\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    getLocation(): Observable<LocationInfo> {\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                const {\r\n                    latitude,\r\n                    longitude,\r\n                    addr,\r\n                    city,\r\n                    country,\r\n                    district,\r\n                    province,\r\n                    street,\r\n                    streetNum\r\n                } = data\r\n                subject.next({\r\n                    addr,\r\n                    city,\r\n                    country,\r\n                    district,\r\n                    province,\r\n                    street,\r\n                    streetNum,\r\n                    lat: latitude,\r\n                    lng: longitude,\r\n                });\r\n            }\r\n        }\r\n        window['imp'].iGps.getInfo(\r\n            callback\r\n        );\r\n        return subject;\r\n        // iphone 打印输出信息\r\n        /**\r\n         * {latitude:\"36.662413\",longitude:\"117.129769\"}\r\n         */\r\n        // 安卓\r\n        /**\r\n         *  回调函数\r\n         *  输出结构 object\r\n         *  errormessage:\"\"\r\n         *  result:Object {\r\n         *  addr:'山东省济南市历下区经十路靠近浪潮'\r\n         *  city:\"济南\"\r\n         *  country:\"中国\"\r\n         *  course:-1\r\n         *  district:\"历下区\"\r\n         *  lat:36.66254123263889\r\n         *  lng:117.12974745008681\r\n         *  province:\"山东省\"\r\n         *  street:\"经十路\"\r\n         *  streetNum:\"1单元\"\r\n         * }\r\n         *  status:true\r\n         */\r\n    }\r\n\r\n    getSysInfo() {\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data);\r\n            }\r\n        }\r\n        window['imp'].iDevice.sysInfo(callback);\r\n        return subject;\r\n    }\r\n\r\n    sendSMS(number: string, content: string): void {\r\n        window['imp'].iSms.send(number, content)\r\n    }\r\n\r\n    openSendSMS(number: string, content: string): void {\r\n        window['imp'].iSms.open(number, content)\r\n    }\r\n\r\n    tel(number: string): void {\r\n        window['imp'].iTel.dial(number)\r\n    }\r\n\r\n    selectPictureFromAlbum(options: PictureOptions = { maxNum: 9, mType: 0 }): Observable<[]> {\r\n        const defaults = {\r\n            num: 9,\r\n            quality: 75,\r\n            destinationType: 0,\r\n            encodingType: 1,\r\n            targetWidth: 600,\r\n            targetHeight: 600\r\n        };\r\n        defaults.num = options.maxNum;\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data.map(item => {\r\n                    return item.originalData\r\n                }));\r\n            }\r\n        }\r\n\r\n        const errorCallback = (data) => {\r\n            if (data) {\r\n                console.log('selectPictureFromAlbum', data);\r\n                subject.next([]);\r\n            }\r\n        }\r\n\r\n        window['imp'].iCamera.select(\r\n            { ...defaults, ...options },\r\n            callback,\r\n            errorCallback,\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    private selectFileFromMobile(options: any = { maximum: 6, fileType: '.jpg|.png' }) {\r\n\r\n    }\r\n\r\n    private getBase64(path: string) {\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data);\r\n            }\r\n        };\r\n\r\n        const errorCallback = (data) => {\r\n            if (data) {\r\n                console.log('getBase64', data);\r\n                subject.next([]);\r\n            }\r\n        };\r\n\r\n        window['imp'].iFile.getBase64(\r\n            path,\r\n            callback,\r\n            errorCallback,\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    selectFile(options: any = { maximum: 6 }) {\r\n        const subject = new Subject<any>();\r\n        const callback = (data) => {\r\n            if (data && data.length > 0) {\r\n                const paths = [];\r\n                let count = 0;\r\n                data.forEach(dataItem => {\r\n                    window['imp'].iFile.getBase64(\r\n                        dataItem.path,\r\n                        function (bs64) {\r\n                            paths.push({\r\n                                name: data[count].name,\r\n                                size: data[count].size,\r\n                                base64: bs64\r\n                            });\r\n                            count++;\r\n                            if (data.length === paths.length) {\r\n                                // 防止触发多次next  一次性把所有数据抛出去\r\n                                subject.next(paths);\r\n                            }\r\n                        },\r\n                        function (errorMsg) {\r\n                            if (errorMsg) {\r\n                                console.log('getBase64', errorMsg);\r\n                                subject.next([]);\r\n                            }\r\n                        }\r\n                    );\r\n                });\r\n            }\r\n        };\r\n\r\n        const errorCallback = (data) => {\r\n            if (data) {\r\n                console.log('selectFile', data);\r\n                subject.next([]);\r\n            }\r\n        };\r\n        window['imp'].iFile.select(\r\n            { ...options },\r\n            callback,\r\n            errorCallback,\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    takeVideo(options: VidepOptions): Observable<string> {\r\n        let option = { id: options.id }\r\n        if (options.quality) {\r\n            if (options.quality <= 0.5) {\r\n                option['fps'] = 30;\r\n            } else if (options.quality <= 1) {\r\n                option['fps'] = 60;\r\n            }\r\n        } else {\r\n            option['fps'] = 30;\r\n        }\r\n        const subject = new Subject<any>();\r\n\r\n        const callback = (data) => {\r\n            if (data) {\r\n                subject.next(data);\r\n            }\r\n        }\r\n\r\n        const errorCallback = (data) => {\r\n            if (data) {\r\n                console.log('takeVideo', data);\r\n                subject.next([]);\r\n            }\r\n        }\r\n        window['imp'].iVideo.record(\r\n            option,\r\n            callback,\r\n            errorCallback,\r\n        );\r\n        return subject;\r\n    }\r\n\r\n    closeWindow(): void {\r\n        window['imp'].iWindow.close();\r\n    }\r\n\r\n    setTitles(title: string): void {\r\n        document.title = title;\r\n    }\r\n\r\n    downloadFile(options) {\r\n        const subject = new Subject<any>();\r\n        const callback = (data) => {\r\n            if (data.status !== 1) {\r\n                console.log(data);\r\n            }\r\n            subject.next(true);\r\n        }\r\n        window['imp'].iFile.download(options, callback);\r\n        return subject;\r\n    }\r\n\r\n\r\n\r\n    setOriginGoback(fn?: any) {\r\n        const isAGreaterThanB = (parameA: string[], parameB: string[]) => {\r\n            const length = parameA.length > parameB.length ? parameB.length : parameA.length;\r\n            for (let i = 0; i < length; i++) {\r\n                if (parseInt(parameB[i]) > parseInt(parameA[i])) {\r\n                    return false\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        const setFunction = () => {\r\n            if (fn) {\r\n                window['imp'].iWindow.onBackKeyDown2(fn);\r\n                isAGreaterThanB(currentVersion.split('.'), minVersion.split('.')) && window['imp'].iWindow.onTitleBackKeyDown2(fn);\r\n            } else {\r\n                window['imp'].iWindow.cancelBackKeyDown();\r\n                isAGreaterThanB(currentVersion.split('.'), minVersion.split('.')) && window['imp'].iWindow.cancelTitleBackKeyDown();\r\n            }\r\n        }\r\n        let minVersion = '4.8.21';\r\n        let currentVersion = window['CURRENT_VERSION'];\r\n        if(currentVersion){\r\n            setFunction();\r\n        }else{\r\n            window['imp'].iDevice.sysInfo((info) => {\r\n                const newVersion = info.appVersion.split('-');\r\n                window['CURRENT_VERSION'] = newVersion[0];\r\n                currentVersion = window['CURRENT_VERSION'];\r\n                setFunction();\r\n            })\r\n        }\r\n    }\r\n\r\n    pushOriginGoback(fn?: any) {\r\n        window['OriginGoback'] = window['OriginGoback'] || [];\r\n        const OriginGoback = () => {\r\n            const gobackFn = window['OriginGoback'].pop()\r\n            if (gobackFn) {\r\n                gobackFn()\r\n            }\r\n            else {\r\n                window['imp'].iWindow.cancelBackKeyDown();\r\n                window['imp'].iWindow.cancelTitleBackKeyDown();\r\n                history.back();\r\n            }\r\n        }\r\n        if (fn) {\r\n            window['OriginGoback'].push(fn)\r\n            window['imp'].iWindow.onBackKeyDown2(OriginGoback);\r\n            window['imp'].iWindow.onTitleBackKeyDown2(OriginGoback);\r\n        }\r\n    }\r\n\r\n    popOriginGoback() {\r\n        window['OriginGoback'].pop()\r\n    }\r\n}\r\n\r\nexport { CloudPlusService }","import { IJsBridgeStrategy } from './decorators';\r\nimport { CCworkService } from './ccwork-service';\r\nimport { CloudPlusService } from './cloud-plus-service';\r\nclass JsBridgeStrategyFactory {\r\n\r\n    create(): IJsBridgeStrategy {\r\n        if (navigator.userAgent.toLowerCase().search('ccwork') !== -1) {\r\n            window.top['FARRIS_JSBridge'] = '云上协同'\r\n            return new CCworkService()\r\n        } else if( navigator.userAgent.toLowerCase().search('emmcloud') !== -1) {\r\n            window.top['FARRIS_JSBridge'] = '云加'\r\n            return new CloudPlusService()\r\n        } else {\r\n            window.top['FARRIS_JSBridge'] = '浏览器'\r\n            return new CloudPlusService()\r\n        }\r\n    }\r\n}\r\n\r\nexport { JsBridgeStrategyFactory }","import { JsBridgeStrategyFactory } from './js-bridge-strategy-factory'\r\nimport { IJsBridgeStrategy, PictureOptions, PhotoOptions, VidepOptions } from './decorators';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\ndeclare const System: any;\r\n\r\nclass JsBridgeService implements IJsBridgeStrategy {\r\n\r\n    constructor() {\r\n        this.jsBridgeStrategyFactory = new JsBridgeStrategyFactory();\r\n        this.init();\r\n    }\r\n\r\n    getSysInfo() {\r\n        return this.getJsBridgeService(this.strategy.getSysInfo);\r\n    }\r\n\r\n\r\n    private strategy: IJsBridgeStrategy;\r\n\r\n    private jsBridgeStrategyFactory: JsBridgeStrategyFactory;\r\n\r\n    private init() {\r\n        this.strategy = this.jsBridgeStrategyFactory.create();\r\n        window['JsBridgeService'] = this\r\n    }\r\n\r\n    takePhoto(options: PhotoOptions): Observable<[]> {\r\n        return this.getJsBridgeService(this.strategy.takePhoto, options);\r\n    }\r\n    scanQRCode(): Observable<string> {\r\n        return this.getJsBridgeService(this.strategy.scanQRCode);\r\n    }\r\n    getLocation(): Observable<any> {\r\n        return this.getJsBridgeService(this.strategy.getLocation);\r\n    }\r\n    sendSMS(number: string, content: string): void {\r\n        return this.getJsBridgeService(this.strategy.sendSMS, number, content);\r\n    }\r\n    openSendSMS(number: string, content: string): void {\r\n        return this.getJsBridgeService(this.strategy.openSendSMS, number, content);\r\n    }\r\n    tel(number: string): void {\r\n        return this.getJsBridgeService(this.strategy.tel, number);\r\n    }\r\n    selectPictureFromAlbum(options: PictureOptions): Observable<[]> {\r\n        return this.getJsBridgeService(this.strategy.selectPictureFromAlbum, options);\r\n    }\r\n    takeVideo(options: VidepOptions): Observable<string> {\r\n        return this.getJsBridgeService(this.strategy.takeVideo, options);\r\n    }\r\n    closeWindow(): void {\r\n        return this.getJsBridgeService(this.strategy.closeWindow);\r\n    }\r\n    setTitles(title: string): void {\r\n        return this.getJsBridgeService(this.strategy.setTitles, title);\r\n    }\r\n\r\n    selectFile(options?: any): any {\r\n        return this.getJsBridgeService(this.strategy.selectFile, options);\r\n    }\r\n\r\n    downloadFile(options: any) {\r\n        return this.getJsBridgeService(this.strategy.downloadFile, options);\r\n    }\r\n\r\n    setOriginGoback(fn?: any) {\r\n        return this.getJsBridgeService(this.strategy.setOriginGoback, fn);\r\n    }\r\n\r\n    pushOriginGoback(fn?: any) {\r\n        return this.getJsBridgeService(this.strategy.pushOriginGoback, fn);\r\n    }\r\n    popOriginGoback(fn?: any) {\r\n        return this.getJsBridgeService(this.strategy.popOriginGoback, fn);\r\n    }\r\n    playShortVideo(fn?: any) {\r\n        return this.getJsBridgeService(this.strategy.playShortVideo, fn);\r\n    }\r\n\r\n\r\n    private getJsBridgeService(method, ...values) {\r\n        const subject = new Subject<any>();\r\n\r\n        // 已经存在方法实例即结束返回\r\n        if (window.top['FARRIS_JSBridge'] === '已加载') {\r\n            return method(...values)\r\n        }\r\n\r\n        // 判断是否为云上协同环境\r\n        if (window.top['FARRIS_JSBridge'] === '云上协同') {\r\n            if (window.top['iCityBridge']) {\r\n                return method(...values)\r\n            } else {\r\n                var ccwork = window.top.document.createElement(\"script\")\r\n                ccwork.src = 'https://ccwork.oss.cn-north-3.inspurcloudoss.com/h5/ccworkJsbridge.js'\r\n                ccwork.onload = function () {\r\n                    window.top['iCityBridge'].init(() => {\r\n                        method(...values).subscribe(\r\n                            (e) => { subject.next(e) }\r\n                        )\r\n                    })\r\n                };\r\n                window.top.document.head.appendChild(ccwork);\r\n            }\r\n        }\r\n\r\n        // 当前没有针对云+的判断，前置环境不满足即默认云+环境\r\n        if (window.top['FARRIS_JSBridge'] === '云加') {\r\n            System\r\n                .import('/platform/common/web/imp.js')\r\n                .then(\r\n                    (e) => {\r\n                        window.top['FARRIS_JSBridge'] = '已加载';\r\n                        method(...values).subscribe(\r\n                            (e) => { subject.next(e) }\r\n                        )\r\n                    }\r\n                )\r\n        }\r\n        return subject;\r\n    }\r\n\r\n}\r\n\r\nexport { JsBridgeService }","import { Observable } from \"rxjs\";\r\n\r\ninterface IJsBridgeStrategy {\r\n\r\n\r\n    // 拍照\r\n    takePhoto(options: PhotoOptions): Observable<[]>\r\n\r\n    // 二维码扫描\r\n    scanQRCode(): Observable<string>\r\n\r\n    // 获取定位信息\r\n    getLocation(): Observable<LocationInfo>\r\n\r\n    // 发送短信\r\n    sendSMS(number: string, content: string): void\r\n\r\n    // 打开发送短信页面\r\n    openSendSMS(number: string, content: string): void\r\n\r\n    // 打开拨打电话界面\r\n    tel(number: string): void\r\n\r\n    // 获取图片\r\n    selectPictureFromAlbum(options: PictureOptions): Observable<[]>\r\n\r\n    // 拍摄视频\r\n    takeVideo(options: VidepOptions): Observable<string>\r\n\r\n    // 关闭窗口\r\n    closeWindow(): void\r\n\r\n    // 更改标题\r\n    setTitles(title: string): void\r\n\r\n    // 选择文件\r\n    selectFile(options?: any): any\r\n\r\n    // 下载文件\r\n    downloadFile(options: any): any;\r\n\r\n    // 获取设备信息\r\n    getSysInfo(): any;\r\n\r\n    // 监听返回\r\n    setOriginGoback(fn?: any): any\r\n\r\n    // 添加全面屏手势返回方法\r\n    pushOriginGoback(fn?: any): any\r\n\r\n    // 删除全面屏手势返回方法\r\n    popOriginGoback(fn?: any): any;\r\n\r\n    // 播放短视频\r\n    playShortVideo(options?: any): any;\r\n}\r\n\r\n// 拍照参数\r\ninterface PhotoOptions {\r\n    // 照片质量 云加 1-100 云上协同 high、mid、low 默认为mid\r\n    quality: string | number,\r\n    encodingType?: any,\r\n    targetWidth?: number,\r\n    targetHeight?: number,\r\n    waterMark?: WaterMark\r\n}\r\n\r\n// 水印\r\ninterface WaterMark {\r\n    content: string,\r\n    color: string,\r\n    background: string,\r\n    algin: string,\r\n    valign: string\r\n}\r\n\r\n// 选择图片参数\r\ninterface PictureOptions {\r\n    maxNum: number,  // 最大可选数 默认9\r\n    mType: number, // 选择模式，可选值0/1, 0:图片，1：视频;\r\n    quality?: string | number  // 照片质量 云加 1-100 云上协同 high、mid、low 默认为mid\r\n}\r\n\r\ninterface VidepOptions {\r\n    id: string; //视频id（视频名字\r\n    quality?: number; // 视频质量 取值范围0~1\r\n}\r\n\r\ninterface LocationInfo {\r\n    addr: string,\r\n    city: string\r\n    country: string\r\n    course?: number\r\n    district: string\r\n    lat: number\r\n    lng: number\r\n    province: string\r\n    street: string\r\n    streetNum: string\r\n}\r\n\r\nexport { IJsBridgeStrategy, PhotoOptions, PictureOptions, VidepOptions, LocationInfo }","import { JsBridgeService } from './js-bridge-service/index';\r\n\r\n/**\r\n * 帮助映射服务\r\n */\r\nexport class HistoryBackService {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  init() {\r\n    window['MOBILE_ORIGIN_BACK_ARRAY'] = window['MOBILE_ORIGIN_BACK_ARRAY'] || []\r\n    window['MOBILE_ORIGIN_BACK'] = {\r\n      pushOriginGoback(fn) {\r\n        window['MOBILE_ORIGIN_BACK_ARRAY'].push(fn);\r\n      },\r\n      popOriginGoback() {\r\n        window['MOBILE_ORIGIN_BACK_ARRAY'].pop();\r\n      },\r\n      reflushOriginGoback() {\r\n        window['MOBILE_ORIGIN_BACK_ARRAY'] = []\r\n      }\r\n    }\r\n  }\r\n\r\n  pushOriginGoback(fn) {\r\n    window['MOBILE_ORIGIN_BACK_ARRAY'].push(fn);\r\n  }\r\n\r\n  popOriginGoback() {\r\n    window['MOBILE_ORIGIN_BACK_ARRAY'].pop();\r\n  }\r\n\r\n  reflushOriginGoback() {\r\n    window['MOBILE_ORIGIN_BACK_ARRAY'] = []\r\n  }\r\n\r\n  proxyBack() {\r\n    if (!( navigator.userAgent.toLowerCase().search('emmcloud') !== -1)){\r\n      return ;\r\n    }\r\n    if (window.top.location.pathname.indexOf('mobiletaskcenter') > -1) {\r\n      setTimeout(()=> {\r\n        window.top['detailBackBtnClickHandler'] = (back) => {\r\n          const gobackFn = window['MOBILE_ORIGIN_BACK_ARRAY'].pop()\r\n          if (gobackFn) {\r\n            gobackFn();\r\n            return false;\r\n          } else {\r\n            const key = location.pathname + location.hash.slice(0, location.hash.indexOf('?'));\r\n            let need_go_back = sessionStorage.getItem(key);\r\n            if (!need_go_back) {\r\n              return true;\r\n            }\r\n            history.back()\r\n            return false;\r\n          }\r\n        }\r\n      }, 0)\r\n\r\n    } else {\r\n      const _close = () => {\r\n        const gobackFn = window['MOBILE_ORIGIN_BACK_ARRAY'].pop()\r\n        if (gobackFn) {\r\n          gobackFn()\r\n        } else {\r\n          history.back()\r\n        }\r\n      }\r\n      const jsBridgeService = new JsBridgeService();\r\n      jsBridgeService.setOriginGoback(_close)\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","import { Observable, EMPTY } from 'rxjs';\r\nimport { ViewModelContext } from '@farris/mobile-devkit';\r\n\r\nconst NOOP = 'noop';\r\n\r\n/**\r\n * 命令服务\r\n */\r\nclass CommandService {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(private viewModelContext: ViewModelContext) {}\r\n\r\n  /**\r\n   * 执行命令\r\n   * @param commandName 命令名称\r\n   * @param viewModelId 视图模型id\r\n   */\r\n  public execute(commandName: string, viewModelId?: string): Observable<any> {\r\n    if (!commandName || commandName === '' || commandName === 'undefined') {\r\n      return EMPTY;\r\n    }\r\n\r\n    // 空操作\r\n    if (commandName.toLocaleLowerCase() === NOOP) {\r\n      return EMPTY;\r\n    }\r\n\r\n    let viewModel = this.viewModelContext.viewModel;\r\n    if (viewModelId) {\r\n      const appContext = this.viewModelContext.appContext;\r\n      const targetViewModelContext = appContext.viewModelContextManager.getContextById(viewModelId);\r\n      viewModel = targetViewModelContext.viewModel;\r\n    }\r\n    return viewModel[commandName]();\r\n  }\r\n\r\n}\r\n\r\nexport { CommandService };\r\n","import { ViewModelContext, StateMachine } from '@farris/mobile-devkit';\r\nimport {  EMPTY } from 'rxjs';\r\n/**\r\n * 状态机服务\r\n */\r\nclass StateMachineService {\r\n\r\n    constructor(private viewModelContext: ViewModelContext) {\r\n    }\r\n\r\n    /**\r\n     * 执行状态迁移动作\r\n     */\r\n    executeAction(action: string) {\r\n      if (!action) {\r\n        return EMPTY;\r\n      }\r\n\r\n      if (typeof this.viewModelContext.stateMachine[action] !== 'function') {\r\n        return EMPTY;\r\n      }\r\n      \r\n      this.viewModelContext.stateMachine[action]();\r\n    }\r\n}\r\n\r\nexport { StateMachineService };\r\n","/**\r\n * UI状态机服务\r\n */\r\nclass UIStateService {\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor() {\r\n  }\r\n\r\n}\r\n\r\nexport { UIStateService };\r\n","import { ViewModelContext, Entity } from '@farris/mobile-devkit';\r\nimport { BefRepository } from '@farris/mobile-bef';\r\n\r\n/**\r\n * VO变量访问服务\r\n */\r\nclass VoVariableService {\r\n\r\n  /**\r\n   * 视图对象上下文\r\n   */\r\n  private viewModelContext: ViewModelContext;\r\n\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 设置变量值\r\n   */\r\n  public setValue(name: string, value: any): void {\r\n    const befRepository = this.viewModelContext.repository as BefRepository<Entity>;\r\n    befRepository.variableManager.setValue(name, value);\r\n  }\r\n\r\n  /**\r\n   * 获取变量值\r\n   */\r\n  public getValue(name: string): void {\r\n    const befRepository = this.viewModelContext.repository as BefRepository<Entity>;\r\n    befRepository.variableManager.getValue(name);\r\n  }\r\n\r\n}\r\n\r\nexport { VoVariableService };\r\n","\r\n/**\r\n * 上传控件的返回结果（该结构应该放在UI层，临时放在这里）\r\n */\r\ninterface UploadFileInfo {\r\n  metadataId: string;\r\n  fileName: string;\r\n}\r\n\r\n\r\n/**\r\n * 附件信息定义\r\n */\r\ninterface AttachmentInfo {\r\n\r\n  /**\r\n   * 附件id\r\n   */\r\n  attachmentId: string;\r\n\r\n  /**\r\n   * 附件名称\r\n   */\r\n  fileName: string;\r\n}\r\n\r\n\r\n/**\r\n * 服务器端所需的附件信息定义\r\n */\r\ninterface ServerAttachmentInfo {\r\n\r\n  /**\r\n   * 表名路径\r\n   */\r\n  NodeCodes: string[];\r\n\r\n  /**\r\n   * 主键路径\r\n   */\r\n  HiretryIds: string[];\r\n\r\n  /**\r\n   * 附件id数组（批量新增时使用）\r\n   */\r\n  AttachmentIds?: string[];\r\n\r\n  /**\r\n   * 附件id（更新时使用）\r\n   */\r\n  AttachmentId?: string;\r\n}\r\n\r\nexport { UploadFileInfo, AttachmentInfo, ServerAttachmentInfo };\r\n","import { UploadFileInfo, AttachmentInfo } from './types';\r\n\r\n/**\r\n * 附件信息处理工具类\r\n */\r\nclass AttachmentUtil {\r\n\r\n  /**\r\n   * 转换为附件信息数组\r\n   */\r\n  public static convertToAttachmentInfos(fileInfos: UploadFileInfo[]): AttachmentInfo[] {\r\n    if (!fileInfos) {\r\n      return [];\r\n    }\r\n    const attachmentInfos: AttachmentInfo[] = fileInfos.map((fileInfo: UploadFileInfo) => {\r\n      return this.convertToAttachmentInfo(fileInfo);\r\n    });\r\n    return attachmentInfos;\r\n  }\r\n\r\n  /**\r\n   * 转换为附件信息\r\n   */\r\n  public static convertToAttachmentInfo(fileInfo: UploadFileInfo): AttachmentInfo {\r\n    const attachmentInfo: AttachmentInfo = {\r\n      attachmentId: fileInfo.metadataId,\r\n      fileName: fileInfo.fileName\r\n    };\r\n    return attachmentInfo;\r\n  }\r\n\r\n  /**\r\n   * 获取附件列表中的第一个附件\r\n   */\r\n  public static getFirstAttachmentInfo(attachmentInfos: AttachmentInfo[]) {\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      return;\r\n    }\r\n    const firstAttachmentInfo = attachmentInfos[0];\r\n    return firstAttachmentInfo;\r\n  }\r\n\r\n  /**\r\n   * 提取附件id数组\r\n   */\r\n  public static peekAttachmentIds(attachmentInfos: AttachmentInfo[]) {\r\n    if (!attachmentInfos) {\r\n      attachmentInfos = [];\r\n    }\r\n    const attachmentIds = attachmentInfos.map((attachmentInfo: AttachmentInfo) => {\r\n      return attachmentInfo.attachmentId;\r\n    });\r\n\r\n    return attachmentIds;\r\n  }\r\n\r\n}\r\n\r\nexport { AttachmentUtil };\r\n","import { Observable, of } from 'rxjs';\r\nimport { tap, switchMap, map } from 'rxjs/operators';\r\nimport { HttpRequestConfig, HttpMethods, Entity, ViewModelContext, BindingData, BindingPathConverter, DataChangeType } from '@farris/mobile-devkit';\r\nimport { BefRepository, BefDataPathUtil } from '@farris/mobile-bef';\r\nimport { AttachmentInfo, ServerAttachmentInfo } from './types';\r\nimport { AttachmentUtil } from './attachment.util';\r\n\r\n/**\r\n * 附件数据服务\r\n */\r\nclass AttachmentDataService {\r\n\r\n  /**\r\n   * ViewModel上下文\r\n   */\r\n  private viewModelContext: ViewModelContext\r\n\r\n  /**\r\n   * 实体仓库\r\n   */\r\n  private get befRepository(): BefRepository<Entity> {\r\n    return this.viewModelContext.repository as BefRepository<Entity>;\r\n  }\r\n\r\n  /**\r\n   * 绑定数据\r\n   */\r\n  private get bindingData(): BindingData {\r\n    return this.viewModelContext.bindingData;\r\n  }\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 更新附件信息\r\n   */\r\n  public updateRow(attachmentInfoFieldPath: string, attachmentInfo: AttachmentInfo): Observable<any> {\r\n    const apiProxy = this.befRepository.apiProxy;\r\n    const updateUrl = `${apiProxy.baseUrl}/service/updateattachment`;\r\n    const serverAttachInfo = this.createUpdateAttachInfo(attachmentInfoFieldPath, attachmentInfo);\r\n    const body = {\r\n      updateAttachInfo: serverAttachInfo\r\n    };\r\n    const requestConfig: HttpRequestConfig = {\r\n      body: body\r\n    };\r\n\r\n    console.log('loading show ...');\r\n    return apiProxy.request(HttpMethods.PUT, updateUrl, requestConfig).pipe(\r\n      switchMap((result: any) => {\r\n        return this.syncAttachmentInfosToClient();\r\n      }),\r\n      tap(() => {\r\n        console.log('loading hide ...');\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 批量创建附件行数据\r\n   */\r\n  public updateRows(attachmentInfoFieldPath: string, attachmentInfos: AttachmentInfo[]): Observable<any> {\r\n    const apiProxy = this.befRepository.apiProxy;\r\n    const updateUrl = `${apiProxy.baseUrl}/service/batchuploadattachment`;\r\n    const serverAttachInfo = this.createBatchCreateAttachInfo(attachmentInfoFieldPath, attachmentInfos);\r\n    const isRootEntity = serverAttachInfo.NodeCodes.length === 0;\r\n\r\n    const body = {\r\n      batchUploadInfo: serverAttachInfo\r\n    };\r\n    const requestConfig: HttpRequestConfig = {\r\n      body: body\r\n    };\r\n\r\n    console.log('loading show ...');\r\n    return apiProxy.request(HttpMethods.PUT, updateUrl, requestConfig).pipe(\r\n      switchMap((result: any) => {\r\n        return this.appendAttachmentInfosToClient(result, isRootEntity);\r\n      }),\r\n      tap(() => {\r\n        console.log('hide loading ...');\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 创建服务器端需要的更新信息\r\n   */\r\n  private createUpdateAttachInfo(attachmentInfoFieldPath: string, attachmentInfo: AttachmentInfo): ServerAttachmentInfo {\r\n\r\n    const attachmentId = attachmentInfo.attachmentId;\r\n    const parentBindingPathArray = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    parentBindingPathArray.pop();\r\n    const nodeCodes = BefDataPathUtil.convertToObjectCodes(parentBindingPathArray, this.bindingData);\r\n    const hiretryIds = BefDataPathUtil.convertToDataIdsForUpdate(parentBindingPathArray, this.bindingData);\r\n\r\n    const serverAttachInfo: ServerAttachmentInfo = {\r\n      NodeCodes: nodeCodes,\r\n      HiretryIds: hiretryIds,\r\n      AttachmentIds: [attachmentId],\r\n      AttachmentId: attachmentId\r\n    };\r\n\r\n    return serverAttachInfo;\r\n  }\r\n\r\n  /**\r\n   * 创建服务器端需要的批量新增附件信息\r\n   */\r\n  private createBatchCreateAttachInfo(attachmentInfoFieldPath: string, attachmentInfo: AttachmentInfo[]): ServerAttachmentInfo {\r\n    const attachmentIds = AttachmentUtil.peekAttachmentIds(attachmentInfo);\r\n\r\n    const parentBindingPathArray = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    parentBindingPathArray.pop();\r\n    const nodeCodes = BefDataPathUtil.convertToObjectCodes(parentBindingPathArray, this.bindingData);\r\n    const hiretryIds = BefDataPathUtil.convertToDataIdsForAdd(parentBindingPathArray, this.bindingData);\r\n\r\n    const serverAttachInfo = {\r\n      NodeCodes: nodeCodes,\r\n      HiretryIds: hiretryIds,\r\n      AttachmentIds: attachmentIds,\r\n      AttachmentId: null\r\n    };\r\n\r\n    return serverAttachInfo;\r\n  }\r\n\r\n  /**\r\n   * 同步服务器端最新信息到客户端\r\n   * @todo:\r\n   * 1、主对象批量新增时不支持\r\n   */\r\n  public syncAttachmentInfosToClient() {\r\n    const rootDataId = this.bindingData.list.currentId;\r\n    return this.befRepository.updateEntityById(rootDataId);\r\n  }\r\n\r\n  /**\r\n   * 追击主表数据到客户端\r\n   */\r\n  public appendAttachmentInfosToClient(listData: any[], isRootEntity: boolean): Observable<any[]> {\r\n    if (isRootEntity === true) {\r\n      const entities = this.befRepository.buildEntities(listData);\r\n      this.befRepository.entityCollection.addEntities(entities);\r\n      return of(listData);\r\n    } else {\r\n      return this.syncAttachmentInfosToClient().pipe(\r\n        map(() => {\r\n          this.befRepository.dataChangeHistory.addChange({ dataId: listData[0].id, changeType: DataChangeType.Add });\r\n          return listData;\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport { AttachmentDataService };\r\n","import { Observable, EMPTY, forkJoin } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nimport { ViewModelContext, CommandContext, BindingPathConverter } from '@farris/mobile-devkit';\r\nimport { UploadFileInfo } from './types';\r\nimport { AttachmentUtil } from './attachment.util';\r\nimport { AttachmentDataService } from './attachment-data.service';\r\nimport { EntityService } from '../entity-services/index';\r\nimport { RemoveDataService } from '../data-services/remove-data.service';\r\n\r\n\r\n/**\r\n * 附件服务\r\n */\r\nclass AttachmentService {\r\n\r\n  /**\r\n   * 默认根目录\r\n   */\r\n  private defaultRootDirId = 'default-root';\r\n\r\n  /**\r\n   * 默认子目录\r\n   */\r\n  private get defaultParentDirName(): string {\r\n    return this.viewModelContext.bindingData.list.currentId;\r\n  }\r\n\r\n  /**\r\n   * 视图模型\r\n   */\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * 附件数据服务\r\n   */\r\n  private attachDataService: AttachmentDataService;\r\n\r\n  /**\r\n   * 实体服务\r\n   */\r\n  private entityService: EntityService;\r\n\r\n  /**\r\n   * 实体服务\r\n   */\r\n  private removeDataService: RemoveDataService;\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(\r\n    viewModelContext: ViewModelContext, entityService: EntityService,\r\n    removeDataService: RemoveDataService, attachDataService: AttachmentDataService\r\n  ) {\r\n\r\n    this.viewModelContext = viewModelContext;\r\n    this.attachDataService = attachDataService;\r\n    this.entityService = entityService;\r\n    this.removeDataService = removeDataService;\r\n  }\r\n\r\n  /**\r\n   * 上传单个文件\r\n   * @param attachmentIdPath 附件内码字段的路径，形如/attachInfo/attachmentId；\r\n   * @param attachmentNamePath 附件名称字段的路径\r\n   */\r\n  public uploadAndUpdateRow(attachmentInfoFieldPath: string, rootDirId?: string, parentDirName?: string): Observable<any> {\r\n    const rootId = rootDirId ? rootDirId : this.defaultRootDirId;\r\n    const formId = parentDirName ? parentDirName : this.defaultParentDirName;\r\n    if (!rootId || !formId) {\r\n      throw new Error('rootDirId和parentDirName不能为空，请填写');\r\n    }\r\n\r\n    const fileInfos = this.getUploadFileInfosFromContext();\r\n    const attachmentInfos = AttachmentUtil.convertToAttachmentInfos(fileInfos);\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      alert('请先上传附件');\r\n      return EMPTY;\r\n    }\r\n\r\n    // 更新服务器端\r\n    console.log('show loading ...');\r\n    const firstAttachmentInfo = AttachmentUtil.getFirstAttachmentInfo(attachmentInfos);\r\n    const result$ = this.attachDataService.updateRow(attachmentInfoFieldPath, firstAttachmentInfo).pipe(\r\n      tap(() => {\r\n        console.log('hide loading ...');\r\n      })\r\n    );\r\n    return result$;\r\n  }\r\n\r\n  /**\r\n   * 上传多个文件\r\n   */\r\n  public uploadAndBatchAddRows(attachmentInfoFieldPath: string, rootDirId?: string, parentDirName?: string): Observable<any> {\r\n    const rootId = rootDirId ? rootDirId : this.defaultRootDirId;\r\n    const formId = parentDirName ? parentDirName : this.defaultParentDirName;\r\n    if (!rootId || !formId) {\r\n      throw new Error('rootDirId和parentDirName不能为空，请填写');\r\n    }\r\n\r\n    const fileInfos = this.getUploadFileInfosFromContext();\r\n    const attachmentInfos = AttachmentUtil.convertToAttachmentInfos(fileInfos);\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      alert('请先上传附件');\r\n      return EMPTY;\r\n    }\r\n\r\n    // 更新服务器端\r\n    console.log('show loading ...');\r\n    const result$ = this.attachDataService.updateRows(attachmentInfoFieldPath, attachmentInfos).pipe(\r\n      tap(() => {\r\n        console.log('hide loading ...');\r\n      })\r\n    );\r\n\r\n    return result$;\r\n  }\r\n\r\n  /**\r\n   * 批量删除附件所在的行\r\n   */\r\n  public removeAttachmentRows(attachmentInfoFieldPath: string): Observable<any> {\r\n    if (!attachmentInfoFieldPath) {\r\n      return EMPTY;\r\n    }\r\n    const dataIds = this.getDataIdsToRemove(attachmentInfoFieldPath);\r\n    //如果是主表\r\n    if (attachmentInfoFieldPath.split('/').length <= 2) {\r\n      return this.removeDataService.removeByIds(dataIds);\r\n    }\r\n    // 如果是子表\r\n    else {\r\n      const removeObservables: Observable<any>[] = [];\r\n      if (dataIds.length === 0) {\r\n        alert('请选择要删除的文件');\r\n      }\r\n      const bindingListPath = this.getBindingListPathWithAttachments(attachmentInfoFieldPath);\r\n      dataIds.forEach((dataId: string) => {\r\n        const removeObservable = this.removeDataService.removeByPathAndId(bindingListPath, dataId);\r\n        removeObservables.push(removeObservable);\r\n      });\r\n      return forkJoin(removeObservables);\r\n    }\r\n  }\r\n\r\n  // #region 工具方法\r\n  /**\r\n   * 从上下文中中获取控件传递的附件信息\r\n   */\r\n  private getUploadFileInfosFromContext(): UploadFileInfo[] {\r\n    const commandContext = this['context'] as CommandContext;\r\n    const uploadFileInfos = commandContext.eventParams as UploadFileInfo[];\r\n    if (!uploadFileInfos) {\r\n      return [];\r\n    }\r\n    return uploadFileInfos;\r\n  }\r\n\r\n  /**\r\n   * 获取要删除的附件对应的数据id数组\r\n   */\r\n  public getDataIdsToRemove(attachmentInfoFieldPath: string) {\r\n    const attachIds = this.getAttachmentIdsToRemoveFromContext();\r\n    const dataIds: string[] = [];\r\n    attachIds.forEach((attachId: string) => {\r\n\r\n      // 上传删除和预览删除传递过来的fileId的key可能不一致，要做兼容\r\n      const dataId = this.convertAttachmentIdToDataId(attachId, attachmentInfoFieldPath);\r\n      dataIds.push(dataId);\r\n    });\r\n    return dataIds;\r\n  }\r\n\r\n  /**\r\n   * 从命令上下文中获取要删除附件ids\r\n   */\r\n  public getAttachmentIdsToRemoveFromContext() {\r\n    const commandContext = this['context'] as CommandContext;\r\n    return commandContext.eventParams as string[];\r\n  }\r\n\r\n  /**\r\n   * 根据路径获取附件字段值数组\r\n   * @param fieldPath 字段路径\r\n   */\r\n  private convertAttachmentIdToDataId(fileId: string, attachmentInfoFieldPath: string): string {\r\n\r\n    // 解析路径\r\n    const attachInfoBindingPath = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    const attachFieldName = attachInfoBindingPath.pop();\r\n    const attachListBindingPath = attachInfoBindingPath;\r\n\r\n    // 获取附件id数组\r\n    const entityListData = this.entityService.getEntityListData(attachListBindingPath);\r\n    const targetEntityData = entityListData.find((entityData: any) => {\r\n      if (entityData[attachFieldName]) {\r\n        const attachmentId = entityData[attachFieldName]['attachmentId'];\r\n        if (attachmentId === fileId) {\r\n          return true;\r\n        }\r\n      }\r\n    });\r\n\r\n    return targetEntityData.id;\r\n  }\r\n\r\n  /**\r\n   * 获取带附件的BindingList的Path\r\n   */\r\n  private getBindingListPathWithAttachments(attachmentInfoFieldPath: string) {\r\n    const attachInfoBindingPath = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    attachInfoBindingPath.pop();\r\n    const bindingListPath = attachInfoBindingPath;\r\n    return '/' + bindingListPath.join('/');\r\n  }\r\n\r\n  // #endregion\r\n\r\n}\r\n\r\nexport { AttachmentService };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { Subject } from 'rxjs';\r\nexport class CcWorkService {\r\n    // public location$ = new Subject();\r\n    constructor() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 云上协同关闭页面\r\n     */\r\n    closeCcWorkWebView() {\r\n        window['iCityBridge'].closeWebView();\r\n    }\r\n\r\n    /**\r\n     * 云上协同隐藏标题栏\r\n     */\r\n    hideCcWorkNaviBar() {\r\n        window['iCityBridge'].hideTitleBar();\r\n    }\r\n\r\n    /**\r\n     *  云上协同更改标题栏\r\n     */\r\n    setTitle(title: string) {\r\n        window['iCityBridge'].setTitle(title);\r\n    }\r\n\r\n    /**\r\n     * 获取当前位置\r\n     * @param callBack(data) 回调函数 \r\n     */\r\n    getLocation(callBack) {\r\n        if (window['iCityBridge']) {\r\n            window['iCityBridge'].ccworkGetLocation(callBack);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取二维码\r\n     * @param callBack(data) 回调函数 \r\n     * @param params 配置项 \r\n     */\r\n    scanCode(callBack, params = {}) {\r\n        if (window['iCityBridge']) {\r\n            const paramsObj = {\r\n                filters: [\r\n                    'QR', 'EAN13', 'EAN8'\r\n                ],\r\n                path: '',\r\n                ...params\r\n            };\r\n            window['iCityBridge'].ccworkScanCode(paramsObj, callBack);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 云上协同调用拨号\r\n     * @param phoneNumber 手机号\r\n     * @param callBack(data) 回调函数 \r\n     */\r\n    callPhone(phoneNumber: string, callback) {\r\n        if (window['iCityBridge']) {\r\n            const params = {\r\n                number: phoneNumber\r\n            };\r\n            window['iCityBridge'].ccworkCallPhone(params, callback);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从相机和相册中获取照片\r\n     * @param params \r\n     * @param callback \r\n     */\r\n    getPicsFromCameraAndAlbum(params, callback) {\r\n        if (window['iCityBridge']) {\r\n            window['iCityBridge'].ccworkGetPicsFromCameraAndAlbum(params, callback);\r\n        }\r\n    }\r\n\r\n}\r\n","import { StaticMap } from \"./static-map\";\r\n\r\nexport class MapService {\r\n    constructor() {\r\n\r\n    }\r\n    getStaticMap(options: StaticMap) {\r\n        if (!options) {\r\n            return;\r\n        }\r\n        // location是必填的\r\n        if (!options.location) {\r\n            return;\r\n        }\r\n        if (!options.key) {\r\n            // 默认key\r\n            options.key = 'e01c849062d312e0cbeb2beb1f28ef71';\r\n        }\r\n        if (!options.zoom) {\r\n            options.zoom = 10;\r\n        }\r\n        if (!options.size) {\r\n            options.size = {\r\n                width: 400,\r\n                height: 400\r\n            };\r\n        }\r\n        const markers = options.markers;\r\n        let markersStr = '';\r\n        if (markers && markers.length) {\r\n            // 地图标记\r\n            markersStr = markers.reduce((total, next, index) => {\r\n                total += (next.longtitude + ',' + next.latitude + ';');\r\n                return total;\r\n            }, '');\r\n            if (!options.markerSize) {\r\n                options.markerSize = 'mid';\r\n            }\r\n            if (!options.markerColor) {\r\n                /* 默认红色 */\r\n                options.markerColor = '';\r\n            }\r\n            if (markersStr) {\r\n                markersStr = `&markers=${options.markerSize},${options.markerColor},A:${markersStr.substring(0, markersStr.length - 1)}`;\r\n            }\r\n        }\r\n        let longitude: string | number = options.location.longtitude;\r\n        let latitude: string | number = options.location.latitude;\r\n        // 处理location的小数点后几位  最长保留6位\r\n        const longitudeStr = longitude.toString();\r\n        const latitudeStr = latitude.toString();\r\n        if (longitudeStr.substring(longitudeStr.indexOf('.') + 1).length > 6) {\r\n            longitude = longitude.toFixed(6);\r\n        }\r\n        if (latitudeStr.substring(latitudeStr.indexOf('.') + 1).length > 6) {\r\n            latitude = latitude.toFixed(6);\r\n        }\r\n        return 'https://restapi.amap.com/v3/staticmap' +\r\n            '?location=' + longitude + ',' + latitude +\r\n            '&zoom=' + options.zoom +\r\n            '&size=' + options.size.width + '*' + options.size.height +\r\n            markersStr +\r\n            '&key=' + options.key;\r\n    }\r\n}\r\n","\r\n/**\r\n * 上传控件的返回结果（该结构应该放在UI层，临时放在这里）\r\n */\r\ninterface BusinessUploadFileInfo {\r\n  metadataId: string;\r\n  fileName: string;\r\n}\r\n\r\n\r\n/**\r\n * 附件信息定义\r\n */\r\ninterface BusinessAttachmentInfo {\r\n\r\n  /**\r\n   * 附件id\r\n   */\r\n  attachmentId: string;\r\n\r\n  /**\r\n   * 附件名称\r\n   */\r\n  fileName: string;\r\n}\r\n\r\n\r\n/**\r\n * 服务器端所需的附件信息定义\r\n */\r\ninterface BusinessServerAttachmentInfo {\r\n\r\n  /**\r\n   * 表名路径\r\n   */\r\n  NodeCodes: string[];\r\n\r\n  /**\r\n   * 主键路径\r\n   */\r\n  HiretryIds: string[];\r\n\r\n  /**\r\n   * 附件id数组（批量新增时使用）\r\n   */\r\n  AttachmentIds?: string[];\r\n\r\n  /**\r\n   * 附件id（更新时使用）\r\n   */\r\n  AttachmentId?: string;\r\n}\r\n\r\nexport { BusinessUploadFileInfo, BusinessAttachmentInfo, BusinessServerAttachmentInfo };\r\n","import { ChangeDetail, ChangeDetailType } from '@farris/mobile-bef';\r\nimport { BusinessUploadFileInfo, BusinessAttachmentInfo } from './types';\r\n\r\n\r\n/**\r\n * 附件信息处理工具类\r\n */\r\nclass AttachmentUtil {\r\n\r\n  /**\r\n   * 转换为附件信息数组\r\n   */\r\n  public static convertToAttachmentInfos(fileInfos: BusinessUploadFileInfo[]): BusinessAttachmentInfo[] {\r\n    if (!fileInfos) {\r\n      return [];\r\n    }\r\n    const attachmentInfos: BusinessAttachmentInfo[] = fileInfos.map((fileInfo: BusinessUploadFileInfo) => {\r\n      return this.convertToAttachmentInfo(fileInfo);\r\n    });\r\n    return attachmentInfos;\r\n  }\r\n\r\n  /**\r\n   * 转换为附件信息\r\n   */\r\n  public static convertToAttachmentInfo(fileInfo: BusinessUploadFileInfo): BusinessAttachmentInfo {\r\n    const attachmentInfo: BusinessAttachmentInfo = {\r\n      attachmentId: fileInfo.metadataId,\r\n      fileName: fileInfo.fileName\r\n    };\r\n    return attachmentInfo;\r\n  }\r\n\r\n  /**\r\n   * 获取附件列表中的第一个附件\r\n   */\r\n  public static getFirstAttachmentInfo(attachmentInfos: BusinessAttachmentInfo[]) {\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      return;\r\n    }\r\n    const firstBusinessAttachmentInfo = attachmentInfos[0];\r\n    return firstBusinessAttachmentInfo;\r\n  }\r\n\r\n  /**\r\n   * 提取附件id数组\r\n   */\r\n  public static peekAttachmentIds(attachmentInfos: BusinessAttachmentInfo[]) {\r\n    if (!attachmentInfos) {\r\n      attachmentInfos = [];\r\n    }\r\n    const attachmentIds = attachmentInfos.map((attachmentInfo: BusinessAttachmentInfo) => {\r\n      return attachmentInfo.attachmentId;\r\n    });\r\n\r\n    return attachmentIds;\r\n  }\r\n\r\n  /**\r\n   * 批量获取变更\r\n   */\r\n  public static getChangeDetails(oldListData, newListData): ChangeDetail[] {\r\n    const changeDetails = [];\r\n    newListData.forEach((newData: any) => {\r\n      let oldData = oldListData.find((oldData: any) => {\r\n        return oldData['id'] === newData['id'];\r\n      });\r\n\r\n      if (!oldData) {\r\n        oldData = {};\r\n      }\r\n\r\n      const changeDetail = this.getChangeDetail(oldData, newData);\r\n      if (changeDetail) {\r\n        changeDetails.push(changeDetail);\r\n      }\r\n    });\r\n\r\n    return changeDetails;\r\n  }\r\n\r\n  /**\r\n   * 获取变更集\r\n   */\r\n  public static getChangeDetail(oldData, newData): ChangeDetail {\r\n    const changeDetail: ChangeDetail = {\r\n      ChangeType: ChangeDetailType.Modify,\r\n      ChangeInfo: {\r\n        DataId: newData['id']\r\n      }\r\n    };\r\n    let isChanged = false;\r\n\r\n    Object.keys(newData).forEach((propName) => {\r\n\r\n      // 移除不必要的属性的比较\r\n      if (propName === 'id' || propName === 'nodeCode' || propName === 'childs') {\r\n        return;\r\n      }\r\n      \r\n      const oldValue = oldData[propName];\r\n      const newValue = newData[propName];\r\n\r\n      if (oldValue === undefined && typeof newValue === 'object') {\r\n        return;\r\n      }\r\n\r\n      if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\r\n        changeDetail.ChangeInfo[propName] = newValue;\r\n        isChanged = true;\r\n      }\r\n    });\r\n\r\n    return isChanged ? changeDetail : null;\r\n\r\n  }\r\n\r\n}\r\n\r\nexport { AttachmentUtil };\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { tap, switchMap, map } from 'rxjs/operators';\r\nimport { HttpRequestConfig, HttpMethods, Entity, ViewModelContext, BindingData, BindingPathConverter, HttpUtil } from '@farris/mobile-devkit';\r\nimport { BefRepository, BefDataPathUtil } from '@farris/mobile-bef';\r\nimport { BusinessAttachmentInfo, BusinessServerAttachmentInfo } from './types';\r\nimport { AttachmentUtil } from './business-attachment.util';\r\nimport { BaseDataService } from '../data-services';\r\n\r\n/**\r\n * 附件数据服务\r\n */\r\nclass BusinessAttachmentDataService {\r\n\r\n  /**\r\n   * ViewModel上下文\r\n   */\r\n  public viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * 实体仓库\r\n   */\r\n  public get befReposi(): BefRepository<Entity> {\r\n    return this.viewModelContext.repository as BefRepository<Entity>;\r\n  }\r\n\r\n  /**\r\n   * 绑定数据\r\n   */\r\n  private get bindingData(): BindingData {\r\n    return this.viewModelContext.bindingData;\r\n  }\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  getAllBeSessions() {\r\n    const beSessionsJson = window.sessionStorage.getItem(\"BE_SESSION_ID\");\r\n    if (!beSessionsJson) {\r\n      return {};\r\n    }\r\n    const frmSessionId = this.getUserSessionId();\r\n    const beSessions = JSON.parse(beSessionsJson);\r\n    const beSessionKey = `${frmSessionId}_/api/gsp/common/v1.0/testForm_mfrm`;\r\n    return beSessions[beSessionKey];\r\n  }\r\n  /**\r\n   * 获取用户SessionId\r\n   */\r\n  getUserSessionId() {\r\n    const userSessionId = window.localStorage.getItem(\"sessionId\");\r\n    return userSessionId;\r\n  }\r\n\r\n  /**\r\n   * 扩展BeSessionId相关头信息\r\n   */\r\n  handleRequestHeaders(headers) {\r\n    const frmSessionId = this.getUserSessionId();\r\n    const beSessionId = this.getAllBeSessions();\r\n    if (frmSessionId) {\r\n      headers = HttpUtil.appendHeader(\r\n        headers,\r\n        \"X-CAF-Runtime-CommonVariable\",\r\n        frmSessionId\r\n      );\r\n    }\r\n    if (beSessionId) {\r\n      headers = HttpUtil.appendHeader(\r\n        headers,\r\n        \"X-CAF-Runtime-Context\",\r\n        beSessionId\r\n      );\r\n      headers = HttpUtil.appendHeader(headers, \"SessionId\", beSessionId);\r\n    }\r\n    headers = HttpUtil.appendHeader(headers, 'Content-Type', 'application/json');\r\n    return headers;\r\n  }\r\n  public extendQueryData(url: string): Observable<any> {\r\n    const entityFilter = {\r\n      FilterConditions: [],\r\n      SortConditions: [],\r\n      IsUsePagination: false,\r\n      Pagination: {\r\n        PageIndex: 1,\r\n        PageSize: 5,\r\n        PageCount: 0,\r\n        TotalCount: 0\r\n      }\r\n    };\r\n    const entityFilterString = JSON.stringify(entityFilter);\r\n    const params = {\r\n      entityFilter: entityFilterString\r\n    };\r\n    // const url = `/api/gsp/common/v1.0/attachmentform_mfrm/extension/query`;\r\n    // 拓展header\r\n    // const headers = this.handleRequestHeaders({});\r\n    // 拓展body\r\n    const requestConfig = { params };\r\n    return this.befReposi.apiProxy.request(HttpMethods.PUT, url, requestConfig);\r\n  }\r\n\r\n  /**\r\n   * 更新附件信息\r\n   */\r\n  public updateRow(attachmentInfoFieldPath: string, attachmentInfo: BusinessAttachmentInfo): Observable<any> {\r\n    const apiProxy = this.befReposi.apiProxy;\r\n    const updateUrl = `${apiProxy.baseUrl}/service/updateattachment`;\r\n    const serverAttachInfo = this.createUpdateAttachInfo(attachmentInfoFieldPath, attachmentInfo);\r\n    const body = {\r\n      updateAttachInfo: serverAttachInfo\r\n    };\r\n    const requestConfig: HttpRequestConfig = {\r\n      body: body\r\n    };\r\n    return apiProxy.request(HttpMethods.PUT, updateUrl, requestConfig);\r\n  }\r\n\r\n  /**\r\n   * 批量创建附件行数据\r\n   */\r\n  public updateRows(updateUrl: string, attachmentInfoFieldPath: string, attachmentInfos: BusinessAttachmentInfo[]): Observable<any> {\r\n    const apiProxy = this.befReposi.apiProxy;\r\n    // const updateUrl = `${apiProxy.baseUrl}/service/batchuploadattachment`;\r\n    const serverAttachInfo = this.createBatchCreateAttachInfo(attachmentInfoFieldPath, attachmentInfos);\r\n    const isRootEntity = serverAttachInfo.NodeCodes.length === 0;\r\n\r\n    const body = {\r\n      batchUploadInfo: serverAttachInfo\r\n    };\r\n    const requestConfig: HttpRequestConfig = {\r\n      body: body\r\n    };\r\n\r\n    return apiProxy.request(HttpMethods.PUT, updateUrl, requestConfig, true);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * 创建服务器端需要的更新信息\r\n   */\r\n  private createUpdateAttachInfo(attachmentInfoFieldPath: string, attachmentInfo: BusinessAttachmentInfo): BusinessServerAttachmentInfo {\r\n\r\n    const attachmentId = attachmentInfo.attachmentId;\r\n    const parentBindingPathArray = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    parentBindingPathArray.pop();\r\n    const nodeCodes = BefDataPathUtil.convertToObjectCodes(parentBindingPathArray, this.bindingData);\r\n    const hiretryIds = BefDataPathUtil.convertToDataIdsForUpdate(parentBindingPathArray, this.bindingData);\r\n\r\n    const serverAttachInfo: BusinessServerAttachmentInfo = {\r\n      NodeCodes: nodeCodes,\r\n      HiretryIds: hiretryIds,\r\n      AttachmentIds: [attachmentId],\r\n      AttachmentId: attachmentId\r\n    };\r\n\r\n    return serverAttachInfo;\r\n  }\r\n\r\n  /**\r\n   * 创建服务器端需要的批量新增附件信息\r\n   */\r\n  private createBatchCreateAttachInfo(attachmentInfoFieldPath: string, attachmentInfo: BusinessAttachmentInfo[]):\r\n    BusinessServerAttachmentInfo {\r\n    const attachmentIds = AttachmentUtil.peekAttachmentIds(attachmentInfo);\r\n\r\n    const parentBindingPathArray = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    parentBindingPathArray.pop();\r\n    const nodeCodes = BefDataPathUtil.convertToObjectCodes(parentBindingPathArray, this.bindingData);\r\n    const hiretryIds = BefDataPathUtil.convertToDataIdsForAdd(parentBindingPathArray, this.bindingData);\r\n\r\n    const serverAttachInfo = {\r\n      NodeCodes: nodeCodes,\r\n      HiretryIds: hiretryIds,\r\n      AttachmentIds: attachmentIds,\r\n      AttachmentId: null\r\n    };\r\n\r\n    return serverAttachInfo;\r\n  }\r\n\r\n  /**\r\n   * 同步服务器端最新信息到客户端\r\n   * @todo:\r\n   * 1、主对象批量新增时不支持\r\n   */\r\n  public syncAttachmentInfosToClient() {\r\n    const rootDataId = this.bindingData.list.currentId;\r\n    return this.befReposi.updateEntityById(rootDataId);\r\n  }\r\n\r\n  /**\r\n   * 追击主表数据到客户端\r\n   */\r\n  public appendAttachmentInfosToClient(listData: any[], isRootEntity: boolean): Observable<any[]> {\r\n    if (isRootEntity === true) {\r\n      const entities = this.befReposi.buildEntities(listData);\r\n      this.befReposi.entityCollection.addEntities(entities);\r\n      return of(listData);\r\n    } else {\r\n      return this.syncAttachmentInfosToClient().pipe(\r\n        map(() => {\r\n          return listData;\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport { BusinessAttachmentDataService };\r\n","import { Observable, EMPTY, forkJoin, of } from 'rxjs';\r\nimport { tap, switchMap, map, filter, take } from 'rxjs/operators';\r\n// import { cloneDeep } from 'lodash-es';\r\nimport {\r\n  ViewModelContext, CommandContext, BindingPathConverter,\r\n  HttpRequestConfig, HttpParams, HttpHeaders, HttpMethods,\r\n  DataChangeType\r\n} from '@farris/mobile-devkit';\r\nimport { BefRepository, RequestInfo } from '@farris/mobile-bef';\r\nimport { BusinessUploadFileInfo } from './types';\r\nimport { AttachmentUtil } from './business-attachment.util';\r\nimport { BusinessAttachmentDataService } from './business-attachment-data.service';\r\nimport { EntityService } from '../entity-services/index';\r\nimport { RemoveDataService } from '../data-services/remove-data.service';\r\n\r\n\r\n/**\r\n * 附件服务\r\n */\r\nclass BusinessAttachmentService {\r\n\r\n  /**\r\n   * 默认根目录\r\n   */\r\n  private defaultRootDirId = 'default-root';\r\n\r\n  /**\r\n   * 默认子目录\r\n   */\r\n  private get defaultParentDirName(): string {\r\n    return this.viewModelContext.bindingData.list.currentId;\r\n  }\r\n\r\n  /**\r\n   * 视图模型\r\n   */\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * 附件数据服务\r\n   */\r\n  private attachDataService: BusinessAttachmentDataService;\r\n\r\n  /**\r\n   * 实体服务\r\n   */\r\n  private entityService: EntityService;\r\n\r\n  /**\r\n   * 实体服务\r\n   */\r\n  private removeDataService: RemoveDataService;\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(\r\n    viewModelContext: ViewModelContext, entityService: EntityService,\r\n    removeDataService: RemoveDataService, attachDataService: BusinessAttachmentDataService,\r\n  ) {\r\n\r\n    this.viewModelContext = viewModelContext;\r\n    this.attachDataService = attachDataService;\r\n    this.entityService = entityService;\r\n    this.removeDataService = removeDataService;\r\n  }\r\n\r\n\r\n  /**\r\n   * 获取列表数据\r\n   */\r\n  public loadAttachmentRows(url: string, filters: any[], sorts: any[]): Observable<any> {\r\n\r\n    const attachContext = this.getAttachContext();\r\n    const befRepository = (this.viewModelContext.repository as BefRepository<any>);\r\n    const sessionService = befRepository.sessionService;\r\n    const apiProxy = befRepository.apiProxy;\r\n\r\n    // 组织params\r\n    const params: HttpParams = {};\r\n    if (typeof filters === 'string') {\r\n      filters = JSON.parse(filters);\r\n    }\r\n    if (typeof sorts === 'string') {\r\n      sorts = JSON.parse(sorts);\r\n    }\r\n\r\n    const entityFilter = {\r\n      FilterConditions: filters || null,\r\n      SortConditions: sorts || null,\r\n      IsUsePagination: false,\r\n      Pagination: {\r\n        PageIndex: 1,\r\n        PageSize: 0,\r\n        PageCount: 0,\r\n        TotalCount: 0\r\n      }\r\n    };\r\n    const entityFilterString = JSON.stringify(entityFilter);\r\n    params.entityFilter = entityFilterString;\r\n\r\n    // 组织body\r\n    const body = {\r\n      dataChange: [],\r\n      variableChange: null\r\n    }\r\n\r\n    // 赋值be的url\r\n    befRepository.apiProxy.setAssociatedUrl(url);\r\n    return this.waitForBeSession().pipe(switchMap(() => {\r\n      url = `${url}/extension/query`;\r\n      const requestConfig: HttpRequestConfig = {\r\n        headers: sessionService.extendRequestHeaders({}),\r\n        params: params,\r\n        body\r\n      };\r\n\r\n      const query$ = apiProxy.httpClient.request(HttpMethods.PUT, url, requestConfig).pipe(\r\n        map((result) => {\r\n          const attachListData = result.returnValue.result;\r\n          // 赋值当前所有数据\r\n          attachContext.setData(JSON.parse(JSON.stringify(attachListData)));\r\n          // 赋值缓存起来\r\n          attachContext.updateData(JSON.parse(JSON.stringify(attachListData)));\r\n          return attachListData;\r\n        })\r\n      );\r\n\r\n      return query$;\r\n    }));\r\n  }\r\n\r\n  private waitForBeSession(): Observable<boolean> {\r\n    const befRepository = this.viewModelContext.repository as BefRepository<any>;\r\n    const sessionService = befRepository.sessionService;\r\n    return sessionService.getBeSessionExisted().pipe(\r\n      filter((beSessionExisted: boolean) => {\r\n        return beSessionExisted === true;\r\n      }),\r\n      take(1)\r\n    );\r\n  }\r\n  /**\r\n   * 同步变更\r\n   */\r\n  public syncAttachmentRowChanges(url: string): Observable<any> {\r\n    const attachContext = this.getAttachContext() || {};\r\n\r\n    const changeDetails = AttachmentUtil.getChangeDetails(attachContext.oldListData, attachContext.listData);\r\n    if (!changeDetails || changeDetails.length === 0) {\r\n      return of(false);\r\n    }\r\n    const changedRowId = changeDetails[0].ChangeInfo.DataId;\r\n    const requestInfo: RequestInfo = {\r\n      dataChange: changeDetails,\r\n      variableChange: null\r\n    }\r\n    const requestConfig: HttpRequestConfig = {\r\n      body: requestInfo\r\n    };\r\n\r\n    const apiProxy = (this.viewModelContext.repository as BefRepository<any>).apiProxy;\r\n    url = `${url}/extension/retrieve/${changedRowId}`;\r\n    return apiProxy.request(HttpMethods.PUT, url, requestConfig, true).pipe(\r\n      map((e) => {\r\n        const context = attachContext.context;\r\n        const data = context.getData();\r\n        // goBack之后  更新缓存后的值\r\n        context.updateData(JSON.parse(JSON.stringify(data)));\r\n        return e;\r\n      })\r\n    );\r\n  }\r\n  /**\r\n   * 上传单个文件\r\n   * @param attachmentIdPath 附件内码字段的路径，形如/attachInfo/attachmentId；\r\n   * @param attachmentNamePath 附件名称字段的路径\r\n   */\r\n  public uploadAndUpdateRow(attachmentInfoFieldPath: string, rootDirId?: string, parentDirName?: string): Observable<any> {\r\n    const rootId = rootDirId ? rootDirId : this.defaultRootDirId;\r\n    const formId = parentDirName ? parentDirName : this.defaultParentDirName;\r\n    if (!rootId || !formId) {\r\n      throw new Error('rootDirId和parentDirName不能为空，请填写');\r\n    }\r\n\r\n    const fileInfos = this.getUploadFileInfosFromContext();\r\n    const attachmentInfos = AttachmentUtil.convertToAttachmentInfos(fileInfos);\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      alert('请先上传附件');\r\n      return EMPTY;\r\n    }\r\n\r\n    // 更新服务器端\r\n    console.log('show loading ...');\r\n    const firstAttachmentInfo = AttachmentUtil.getFirstAttachmentInfo(attachmentInfos);\r\n    const result$ = this.attachDataService.updateRow(attachmentInfoFieldPath, firstAttachmentInfo).pipe(\r\n      tap(() => {\r\n        console.log('hide loading ...');\r\n      })\r\n    );\r\n    return result$;\r\n  }\r\n\r\n  /**\r\n   * 上传多个文件\r\n   */\r\n  public uploadAndBatchAddRows(url: string, attachmentInfoFieldPath: string): Observable<any> {\r\n    const commandContext = this['context'] as CommandContext;\r\n    // 附件相关信息\r\n    const rootDirId = commandContext.eventParams.rootId;\r\n    const parentDirName = commandContext.eventParams.parentDirName;\r\n    const rootId = rootDirId ? rootDirId : this.defaultRootDirId;\r\n    const formId = parentDirName ? parentDirName : this.defaultParentDirName;\r\n    if (!rootId || !formId) {\r\n      throw new Error('rootDirId和parentDirName不能为空，请填写');\r\n    }\r\n    const context = commandContext.eventParams.context;\r\n    const fileInfos = this.getUploadFileInfosFromContext();\r\n    const attachmentInfos = AttachmentUtil.convertToAttachmentInfos(fileInfos);\r\n    if (!attachmentInfos || attachmentInfos.length === 0) {\r\n      alert('请先上传附件');\r\n      return EMPTY;\r\n    }\r\n    // 更新服务器端\r\n    const uploadUrl = `${url}/service/batchuploadattachment`;\r\n    return this.attachDataService.updateRows(uploadUrl, attachmentInfoFieldPath, attachmentInfos).pipe(\r\n      map(e => {\r\n        // 追加数据\r\n        context.appendData(e);\r\n        const dataIds = this.getDataIdsToRemove(context, attachmentInfoFieldPath);\r\n\r\n        dataIds.forEach(dataId => {\r\n          // 添加标记\r\n          this.viewModelContext.repository.dataChangeHistory.addChange({ fPath: '', dataId: dataId, changeType: DataChangeType.Add });\r\n        });\r\n        return e;\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 批量删除附件所在的行\r\n   */\r\n  public removeAttachmentRows(url: string, attachmentInfoFieldPath: string): Observable<any> {\r\n    const context = this['context'].eventParams.context;\r\n    if (!attachmentInfoFieldPath) {\r\n      return EMPTY;\r\n    }\r\n    const dataIds = this.getDataIdsToRemove(context, attachmentInfoFieldPath);\r\n    // 如果是主表\r\n    if (attachmentInfoFieldPath.split('/').length <= 2) {\r\n      const removeUrl = `${url}/extension/batchdelete`;\r\n      return this.removeDataService.removeByBusinessIds(removeUrl, dataIds).pipe(\r\n        map((e) => {\r\n          dataIds.forEach(dataId => {\r\n            context.removeDataById(dataId);\r\n            // 添加标记\r\n            this.viewModelContext.repository.dataChangeHistory.addChange({ fPath: '', dataId: dataId, changeType: DataChangeType.Delete });\r\n          });\r\n        })\r\n      );\r\n    } else {\r\n      // 如果是子表\r\n      const removeObservables: Observable<any>[] = [];\r\n      if (dataIds.length === 0) {\r\n        alert('请选择要删除的文件');\r\n      }\r\n      const bindingListPath = this.getBindingListPathWithAttachments(attachmentInfoFieldPath);\r\n      dataIds.forEach((dataId: string) => {\r\n        const removeObservable = this.removeDataService.removeByBusinessPathAndId(url, bindingListPath, dataId);\r\n        removeObservables.push(removeObservable);\r\n      });\r\n      return forkJoin(removeObservables).pipe(\r\n        map((e) => {\r\n          console.log(e);\r\n          return e;\r\n        }));\r\n    }\r\n  }\r\n\r\n  // #region 工具方法\r\n  /**\r\n   * 从上下文中中获取控件传递的附件信息\r\n   */\r\n  private getUploadFileInfosFromContext(): BusinessUploadFileInfo[] {\r\n    const commandContext = this['context'] as CommandContext;\r\n    const uploadFileInfos = commandContext.eventParams.data as BusinessUploadFileInfo[];\r\n    if (!uploadFileInfos) {\r\n      return [];\r\n    }\r\n    return uploadFileInfos;\r\n  }\r\n\r\n  /**\r\n   * 获取要删除的附件对应的数据id数组\r\n   */\r\n  public getDataIdsToRemove(context: any, attachmentInfoFieldPath: string) {\r\n    const attachIds = this.getAttachmentIdsToRemoveFromContext();\r\n    const dataIds: string[] = [];\r\n    attachIds.forEach((attachId: string) => {\r\n\r\n      // 上传删除和预览删除传递过来的fileId的key可能不一致，要做兼容\r\n      const dataId = this.convertAttachmentIdToDataId(context, attachId, attachmentInfoFieldPath);\r\n      dataIds.push(dataId);\r\n    });\r\n    return dataIds;\r\n  }\r\n\r\n  /**\r\n   * 从命令上下文中获取要删除附件ids\r\n   */\r\n  public getAttachmentIdsToRemoveFromContext() {\r\n    const commandContext = this['context'] as CommandContext;\r\n    return commandContext.eventParams.data.map(dataItem => {\r\n      return Object.prototype.toString.call(dataItem) === '[object Object]' ? dataItem.metadataId : dataItem;\r\n    });\r\n    // return commandContext.eventParams.data as string[];\r\n  }\r\n\r\n  /**\r\n   * 根据路径获取附件字段值数组\r\n   * @param fieldPath 字段路径\r\n   */\r\n  private convertAttachmentIdToDataId(context: any, fileId: string, attachmentInfoFieldPath: string): string {\r\n\r\n    // 解析路径\r\n    const attachInfoBindingPath = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    const attachFieldName = attachInfoBindingPath.pop();\r\n    const attachListBindingPath = attachInfoBindingPath;\r\n\r\n    // 获取附件id数组\r\n    // const entityListData = this.entityService.getEntityListData(attachListBindingPath);\r\n    const entityListData = context.data;\r\n    const targetEntityData = entityListData.find((entityData: any) => {\r\n      if (entityData[attachFieldName]) {\r\n        const attachmentId = entityData[attachFieldName]['attachmentId'];\r\n        if (attachmentId === fileId) {\r\n          return true;\r\n        }\r\n      }\r\n    });\r\n\r\n    return targetEntityData.id;\r\n  }\r\n\r\n  /**\r\n   * 获取带附件的BindingList的Path\r\n   */\r\n  private getBindingListPathWithAttachments(attachmentInfoFieldPath: string) {\r\n    const attachInfoBindingPath = BindingPathConverter.toBindingPathArray(attachmentInfoFieldPath);\r\n    attachInfoBindingPath.pop();\r\n    const bindingListPath = attachInfoBindingPath;\r\n    return '/' + bindingListPath.join('/');\r\n  }\r\n\r\n  /**\r\n   * 获取附件组件上下文\r\n   */\r\n  private getAttachContext(): any {\r\n    const commandContext = this['context'] as CommandContext;\r\n    const attachContext = commandContext && commandContext.eventParams ? commandContext.eventParams : {};\r\n    return attachContext;\r\n  }\r\n\r\n  // #endregion\r\n\r\n}\r\n\r\nexport { BusinessAttachmentService };\r\n","import { Observable, of, EMPTY } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { HttpClient, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { LoadingService } from '../ui-services/index';\r\n\r\n\r\nexport class DiscussionGroupService {\r\n    constructor(\r\n        private httpSvc: HttpClient,\r\n        private viewModelContext: ViewModelContext,\r\n        private loadingService: LoadingService,\r\n    ) {\r\n    }\r\n\r\n    private get params() {\r\n        return this['context'] && this['context']['eventParams'] || {};\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param id 表单id\r\n     * @param summary 消息描述\r\n     * @param configId 消息配置id\r\n     * @param text 评论内容\r\n     * @param visibility 是否所有人可见(移动暂未支持)\r\n     * @param parentId 是否是回复信息\r\n     * @returns \r\n     */\r\n    public addComment(id?: string, summary?: string, configId?: string, text?: string, visibility?: string, parentId?: string): Observable<any> {\r\n        id = id || this.viewModelContext && this.viewModelContext.bindingData.list.currentId || null;\r\n        if (!id) {\r\n            return EMPTY;\r\n        }\r\n\r\n        const url = '/api/runtime/comment/v1.0/bill-comment/comment';\r\n        const body = this.buildAddCommentParam(id, text, parentId, summary, visibility, configId);\r\n        this.loadingService.show()\r\n        return this.httpSvc.post(url, body, {}).pipe(\r\n            tap(() => {\r\n                this.loadingService.hide()\r\n            })\r\n        )\r\n    }\r\n\r\n    private buildAddCommentParam(id: string, text: string, parentId: string, summary: string, visibility: string, configId: string) {\r\n        if (typeof text === 'undefined') {\r\n            text = this.params.text;\r\n        }\r\n        if (typeof parentId === 'undefined') {\r\n            parentId = this.params.replyUser && this.params.replyUser.id;\r\n        }\r\n        if (typeof visibility === 'undefined') {\r\n            visibility = this.params.visibility || 'ALL';\r\n        }\r\n        return {\r\n            'bill': {\r\n                'billId': id,\r\n                'configId': configId,\r\n                'summary': summary\r\n            },\r\n            'comment': {\r\n                'billId': id,\r\n                'configId': configId,\r\n                'parentId': parentId || null,\r\n                'text': text,\r\n                'visibility': visibility\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param id 表单id\r\n     * @param configId 消息配置id\r\n     * @param pageIndex \r\n     * @param pageSize \r\n     * @returns \r\n     */\r\n    public queryComments(id: string, configId: string, pageIndex?: number | null, pageSize?: number | null): Observable<any> {\r\n        id = id || this.viewModelContext && this.viewModelContext.bindingData.list.currentId || null;\r\n        if (!id) {\r\n            return EMPTY;\r\n        }\r\n\r\n        const url = this.buildQueryCommentsUrl(id, pageIndex, pageSize, configId);\r\n        this.loadingService.show()\r\n        return this.httpSvc.get(url, {}).pipe(\r\n            tap((e) => {\r\n                this.loadingService.hide()\r\n                this.viewModelContext.uiState.setPropertyValue('discussionListData', e);\r\n            })\r\n        )\r\n    }\r\n\r\n    private buildQueryCommentsUrl(id: string, pageIndex: number | null, pageSize: number | null, configId: string) {\r\n        if (typeof pageIndex === 'undefined' || pageIndex === null) {\r\n            pageIndex = this.params.pageIndex || 0;\r\n        }\r\n        if (typeof pageSize === 'undefined' || pageSize === null) {\r\n            pageSize = this.params.pageSize || 999;\r\n        }\r\n        return `/api/runtime/comment/v1.0/bill-comment/comment/byBill?configId=${configId}&billId=${id}&pageSize=${pageSize}&pageIndex=${pageIndex}`;\r\n    }\r\n\r\n\r\n    /**\r\n     * 回复赋值\r\n     */\r\n    public setReplyUser() {\r\n        this.viewModelContext.uiState.setPropertyValue('replyUser', this.params);\r\n    }\r\n\r\n    public queryFrequentAtUsers(pageIndex?: number | null, pageSize?: number | null) {\r\n        const params: string[] = [];\r\n        params.push(`pageSize=${pageSize || 20}`);\r\n        params.push(`pageIndex=${pageIndex || 0}`);\r\n        const url = `/api/runtime/comment/v1.0/bill-comment/frequentAtUsers?${params.join('&')}`;\r\n        this.loadingService.show()\r\n        return this.httpSvc.get(url, {}).pipe(\r\n            tap((e) => {\r\n                this.loadingService.hide()\r\n                const personnelsData = {\r\n                    pageInfo: {\r\n                        pageSize: e.pageSize,\r\n                        pageIndex: e.pageIndex\r\n                    },\r\n                    total: e.totalCount,\r\n                    items: e.users\r\n                }\r\n                this.viewModelContext.uiState.setPropertyValue('personnelsData', personnelsData);\r\n            })\r\n        )\r\n    }\r\n\r\n    public queryAtUsers(user?: string, pageIndex?: number | null, pageSize?: number | null) {\r\n        const params: string[] = [];\r\n        if (user) {\r\n            params.push(`param=${user}`);\r\n        }\r\n        params.push(`pageSize=${pageSize || 100}`);\r\n        params.push(`pageIndex=${pageIndex || 0}`);\r\n        const url = `/api/runtime/comment/v1.0/bill-comment/atUser?${params.join('&')}`;\r\n        this.loadingService.show()\r\n        return this.httpSvc.get(url, {}).pipe(\r\n            tap((e) => {\r\n                this.loadingService.hide()\r\n                const personnelsData = {\r\n                    pageInfo: {\r\n                        pageSize: e.pageSize,\r\n                        pageIndex: e.pageIndex\r\n                    },\r\n                    total: e.totalCount,\r\n                    items: e.users\r\n                }\r\n                this.viewModelContext.uiState.setPropertyValue('personnelsData', personnelsData);\r\n            })\r\n        )\r\n    }\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { HttpClient } from '@farris/mobile-devkit';\r\nimport { CancelSubmitPayload } from '../entity/start-process-payload';\r\n\r\n\r\n\r\nexport class TaskService {\r\n\r\n    constructor(\r\n        private httpSvc: HttpClient,\r\n    ) { }\r\n\r\n    error(error: any, actionCode?: string) {\r\n        if (error && error.error && error.error.Message) {\r\n            var message = error.error.Message;\r\n            if (actionCode) {\r\n                message = actionCode + \"操作失败:\" + message;\r\n            }\r\n            return message;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 启动流程预解析\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcessSimulate(payload: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess-simulation`;\r\n        return this.httpSvc.post(url, payload, {});\r\n    }\r\n\r\n    /**\r\n     * 启动流程接口\r\n     * @param payload API所需的上下文参数\r\n     */\r\n    startProcess(payload: any): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/startProcess`;\r\n        return this.httpSvc.post(url, payload, {});\r\n    }\r\n\r\n    /**\r\n     * 取消提交\r\n     * @param param 参数\r\n     */\r\n    cancelSubmit(param: CancelSubmitPayload): Observable<any> {\r\n        const url = `/api/runtime/wf/v1.0/processInstances/cancelSubmit`;\r\n        return this.httpSvc.post(url, param, {});\r\n    }\r\n\r\n}\r\n","import { AssigneeInfo } from './complete-response';\r\nimport { User } from './user';\r\n\r\n/**\r\n * 提交审批上下文参数\r\n */\r\nexport class StartProcessPayload {\r\n\r\n    /**\r\n     * 随机生成的ID 无意义\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * 流程定义ID\r\n     */\r\n    processDefinitionId: string;\r\n\r\n    /**\r\n     * 流程定义Key\r\n     */\r\n    processDefinitionKey: string;\r\n\r\n    /**\r\n     * 入口单据ID\r\n     */\r\n    bizDefKey: string;\r\n\r\n    /**\r\n     * 数据模型ID（BE上的节点ID）\r\n     */\r\n    dataModelId: string;\r\n\r\n    /**\r\n     * 单据内码\r\n     */\r\n    dataId: string;\r\n\r\n    /**\r\n     * 流程实例名称，可空\r\n     */\r\n    name: string;\r\n\r\n    /**\r\n     * 流程发起人\r\n     */\r\n    startUserId: string;\r\n\r\n    /**\r\n     * 下一环节\r\n     */\r\n    nextFlowNodes: FlowNodeInfo[];\r\n\r\n    /**\r\n     * 参数\r\n     */\r\n    variables: any;\r\n\r\n}\r\n\r\nexport class FlowNodeInfo {\r\n\r\n    activityDefinitionId: string;\r\n\r\n    activityDefinitionName: string;\r\n\r\n    dependency: string;//前置依赖，执行提交时传给后端\r\n\r\n    selectedAssignees: User[];\r\n\r\n    assigneeInfo: AssigneeInfo;\r\n\r\n    resolved: boolean;//参与者是否解析\r\n\r\n    anonymous: boolean;\r\n\r\n    anonymousText: string;\r\n\r\n}\r\n\r\nexport class Assignee {\r\n\r\n    id: string;\r\n\r\n    name: string;\r\n    \r\n}\r\n\r\nexport class CancelSubmitPayload {\r\n\r\n    procInstId: string;//可以单独根据流程实例ID取消\r\n\r\n    dataId: string;//也可以根据dataId+bizDefKey取消\r\n\r\n    bizDefKey: string;\r\n    \r\n}","\r\nimport { Subject } from 'rxjs';\r\n\r\nimport { StartProcessPayload, FlowNodeInfo } from '../../entity/start-process-payload';\r\nimport { SimulateResponse, SimulationPath } from '../../entity/simulate-response';\r\n\r\nimport { TaskService } from '../../service/task.service';\r\nimport { SubmitApprove } from '@farris/mobile-business-ui';\r\n\r\n\r\nexport class ProcessSelectorService {\r\n\r\n  constructor(\r\n    private taskService: TaskService\r\n  ) { }\r\n\r\n  destProcesses: { id: string, name: string }[];//候选流程\r\n  destNodes: { id: string, name: string }[];//候选下一环节\r\n\r\n  processPlaceholder: string = '选择流程';//选择流程placeholder\r\n  nodePlaceholder: string;//选择下一环节placeholder\r\n  response: SimulateResponse;//保存模拟流程后返回的内容，选择节点时使用\r\n\r\n  assignInfos = [];\r\n\r\n  selectedProcessId: string;//选择的流程定义ID\r\n  selectedNodeId: string; //选择的下一环节ID，后续环节id的拼接\r\n\r\n  selectedValues = ['clear'];\r\n\r\n  payload = new StartProcessPayload;//保存表单上传来的payload\r\n  subject = new Subject();\r\n  processReadOnly: boolean = false;//选择流程框是否只读\r\n  nodeReadOnly: boolean = true;//选择节点下拉框是否只读\r\n\r\n  vm: any;//弹框实例\r\n\r\n  setParam(param: StartProcessPayload) {\r\n    this.payload.id = param.id;\r\n    this.payload.processDefinitionId = param.processDefinitionId;\r\n    this.payload.processDefinitionKey = param.processDefinitionKey;\r\n    this.payload.bizDefKey = param.bizDefKey;\r\n    this.payload.dataModelId = param.dataModelId;\r\n    this.payload.dataId = param.dataId;\r\n    this.payload.name = param.name;\r\n    this.payload.startUserId = param.startUserId;\r\n    this.payload.nextFlowNodes = [];\r\n    this.startProcessSimulate(this.payload);\r\n  }\r\n\r\n  startProcessSimulate(payload: StartProcessPayload) {\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      this.destProcesses = response.procDefs.map(process => ({ id: process.procDefId, name: process.procDefName }));\r\n      if (this.destProcesses.length === 1) {\r\n        this.processReadOnly = true;\r\n        this.selectedProcessId = response.procDefs[0].procDefId;\r\n        this.vm = (SubmitApprove as any).confirm(\r\n          {\r\n            process: this.selectedProcessId,\r\n            processData: this.destProcesses,\r\n            processOc: this.selectProcessChange.bind(this),\r\n            processReadFlag: this.processReadOnly,\r\n            processHolder: this.processPlaceholder,\r\n            nextNodeReadFlag: this.nodeReadOnly,\r\n            submit: this.submit.bind(this),\r\n            cancel: this.back.bind(this)\r\n          }\r\n        )\r\n        this.response = response;\r\n        this.setNextNode(response);\r\n      } else {\r\n        this.vm = (SubmitApprove as any).confirm(\r\n          {\r\n            processData: this.destProcesses,\r\n            processOc: this.selectProcessChange.bind(this),\r\n            processReadFlag: this.processReadOnly,\r\n            processHolder: this.processPlaceholder,\r\n            nextNodeReadFlag: this.nodeReadOnly,\r\n            submit: this.submit.bind(this),\r\n            cancel: this.back.bind(this)\r\n          }\r\n        )\r\n      }\r\n    }, error => {\r\n      this.subject.next({ type: 'error', message: error && error.response && error.response.data && error.response.data.Message || '提交失败' });\r\n    })\r\n  }\r\n\r\n  /**\r\n * 选择某个流程后\r\n * @param data\r\n */\r\n  selectProcessChange(data: any) {\r\n    this.clearHelp();\r\n    this.clearNode();\r\n    this.selectedProcessId = data;\r\n\r\n    var payload = new StartProcessPayload();\r\n    payload.processDefinitionId = this.selectedProcessId;\r\n    payload.dataId = this.payload.dataId;\r\n\r\n    // const load = this.loadingService.show();\r\n    this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n      // load.close();\r\n      this.response = response;\r\n      this.setNextNode(response);\r\n    }, error => {\r\n      //load.close();\r\n      this.subject.next({ type: 'error', message: error && error.response && error.response.data && error.response.data.Message || '该流程存在问题' });\r\n    })\r\n  }\r\n\r\n\r\n  getsimulationPathsIndexData(data) {\r\n    return this.destNodes.findIndex(item => item.id === data)\r\n  }\r\n\r\n  /**\r\n * 选择节点后事件\r\n */\r\n  selectNodeChange(data: any) {\r\n    this.clearHelp();\r\n    this.clearAssignInfos();\r\n    this.selectedNodeId = data;\r\n    this.vm.open({\r\n      nextNode: this.selectedNodeId,\r\n    })\r\n    //const nodeNames = data.data.name.split('，');\r\n    const index = this.getsimulationPathsIndexData(data);\r\n    if (this.response.simulationPaths[index].nodeInfoList.every(node => node.resolved === true)) {//已预解析参与者\r\n      this.setAssignInfo(this.response.simulationPaths[index]);\r\n    } else {//未预解析参与者\r\n      let payload = new StartProcessPayload();\r\n      payload.processDefinitionId = this.selectedProcessId;\r\n      payload.dataId = this.payload.dataId;\r\n      payload.nextFlowNodes = [];\r\n\r\n      this.selectedNodeId.split('，').forEach((nodeId, index) => {\r\n        let nextFlowNode = new FlowNodeInfo();\r\n        nextFlowNode.activityDefinitionId = nodeId;\r\n        //nextFlowNode.activityDefinitionName = nodeNames[index];\r\n        payload.nextFlowNodes.push(nextFlowNode);\r\n      });\r\n\r\n      //const load = this.loadingService.show();\r\n      this.taskService.startProcessSimulate(payload).subscribe((response: SimulateResponse) => {\r\n        //load.close();\r\n        this.setAssignInfo(response.simulationPaths[0]);//选择的下一环节应该在同一条路径上，故取simulationPaths[0]\r\n      }, error => {\r\n        //load.close();\r\n        this.subject.next({ type: 'error', message: error && error.response && error.response.data && error.response.data.Message || '该节点存在问题' });\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n * 设置下一环节\r\n */\r\n  private setNextNode(response: SimulateResponse) {\r\n    this.destNodes = response.simulationPaths && response.simulationPaths.map(path => ({\r\n      id: path.nodeInfoList.map(node => node.activityDefinitionId).join('，'),\r\n      name: path.nodeInfoList.map(node => node.activityDefinitionName).join('，')\r\n    }));\r\n    //处理默认分支，无默认分支返回-1\r\n    const defaultIndex = response.simulationPaths.findIndex(a => a.default);\r\n    if (defaultIndex > -1) {\r\n      this.destNodes.length === 1 ? (this.nodeReadOnly = true) : (this.nodeReadOnly = false);\r\n      this.selectedNodeId = this.destNodes[defaultIndex].id;\r\n      this.setAssignInfo(response.simulationPaths[defaultIndex]);\r\n    } else {\r\n      this.selectedNodeId = '';\r\n      this.nodeReadOnly = false;\r\n      this.nodePlaceholder = '请选择';\r\n    }\r\n    this.vm.open({\r\n      nextNodeOc: this.selectNodeChange.bind(this),\r\n      nextNode: this.selectedNodeId,\r\n      nextNodeData: this.destNodes,\r\n      nextNodeReadFlag: this.nodeReadOnly,\r\n      nextNodeHolder: this.nodePlaceholder\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置当前指派信息帮助参数\r\n   */\r\n  private setAssignInfo(simulationPaths: SimulationPath) {\r\n    this.assignInfos = [];\r\n    this.selectedNodeId.split('，').forEach(nodeId => {\r\n      const node = simulationPaths.nodeInfoList.find(node => node.activityDefinitionId === nodeId);\r\n      if (node) {\r\n        const selectedAssignees = node.selectedAssignees;\r\n        let assigneeReadFlag = false;\r\n        let assignee = '';\r\n        let assigneeHolder = '请选择人员';\r\n        if (selectedAssignees && selectedAssignees.length >= 1) {\r\n          assigneeReadFlag = true;\r\n          assigneeHolder = \"\";\r\n          selectedAssignees.forEach(user => {\r\n            assignee = assignee + user.name + ', ';\r\n          })\r\n          assignee = assignee.slice(0, assignee.length - 2)\r\n        }\r\n        if (node.anonymous) {\r\n          assignee = node.anonymousText === '' ? '' : node.anonymousText && node.anonymousText\r\n        }\r\n        this.assignInfos.push({\r\n          label: `${this.selectedNodeId && this.selectedNodeId.split('，').length > 1 ? node.activityDefinitionName : ''}办理人员`,\r\n          selectedAssignees,\r\n          assigneeReadFlag,\r\n          assignee,\r\n          assigneeHolder,\r\n          assigneeInfo: { ...node.assigneeInfo, assigneeUsers: { items: (node.assigneeInfo && node.assigneeInfo.assigneeUsers) || [] } },\r\n          assignees: node.selectedAssignees.map(user => { return { id: user.id, name: user.name } }),\r\n          activityName: node.activityDefinitionName,\r\n          dependency: node.dependency,\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText\r\n        })\r\n      } else {\r\n        this.assignInfos.push({\r\n          selectedAssignees: [],\r\n          assigneeInfo: null,\r\n          assignees: [],\r\n          activityName: '',\r\n          dependency: '',\r\n          anonymous: node.anonymous,\r\n          anonymousText: node.anonymousText\r\n        })\r\n      }\r\n    })\r\n    this.vm.open({\r\n      assigneeOc: this.assigneeOc.bind(this),\r\n      assignInfos: this.assignInfos\r\n    })\r\n  }\r\n\r\n  // 办理人员选择事件\r\n  assigneeOc(data: any, index: number) {\r\n    this.assignInfos[index].assignees = data.items;\r\n    this.selectedValues[index] = data.value;\r\n    this.vm.open({\r\n      selectedValues: this.selectedValues\r\n    })\r\n  }\r\n\r\n  clearHelp() {\r\n    this.vm.open({\r\n      selectedValues: ['clear']\r\n    })\r\n  }\r\n\r\n  // 清空节点\r\n  clearNode() {\r\n    this.selectedNodeId = '',\r\n      this.destNodes = [],\r\n      this.nodeReadOnly = true,\r\n      this.nodePlaceholder = '',\r\n      this.assignInfos = [];\r\n    this.vm.open({\r\n      nextNode: this.selectedNodeId,\r\n      nextNodeData: this.destNodes,\r\n      nextNodeReadFlag: this.nodeReadOnly,\r\n      nodePlaceholder: this.nodePlaceholder,\r\n      assignInfos: this.assignInfos\r\n    })\r\n  }\r\n\r\n  // 清空办理人员\r\n  clearAssignInfos() {\r\n    this.assignInfos = [];\r\n    this.vm.open({\r\n      assignInfos: this.assignInfos\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 取消页面弹框\r\n   */\r\n  back() {\r\n    this.clearProcess();\r\n    this.subject.next({ type: 'success', message: '' });\r\n  }\r\n\r\n  submit() {\r\n    if (!this.selectedProcessId) {\r\n      this.subject.next({ type: 'error', message: '请选流程' });\r\n      return;\r\n    }\r\n    if (!this.selectedNodeId) {\r\n      this.subject.next({ type: 'error', message: '请选节点' });\r\n      return;\r\n    }\r\n    if (this.assignInfos.filter(info => ((info.assigneeInfo && info.assigneeInfo.assigneeUsers.items.length) || info.selectedAssignees.length) && !info.assignees.length).length) {\r\n      this.subject.next({ type: 'error', message: '请选办理人员' });\r\n      return;\r\n    }\r\n    const nodes: string[] = this.selectedNodeId.split('，');\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      let nextFlowNode: FlowNodeInfo = {\r\n        activityDefinitionId: nodes[i],\r\n        activityDefinitionName: this.assignInfos[i].activityName,\r\n        dependency: this.assignInfos[i].dependency,\r\n        selectedAssignees: this.assignInfos[i].assigneeInfo ? this.assignInfos[i].assignees : [],\r\n        assigneeInfo: null,\r\n        resolved: false,\r\n        anonymous: false,\r\n        anonymousText: ''\r\n      }\r\n      this.payload.nextFlowNodes.push(nextFlowNode);\r\n    }\r\n    this.payload.processDefinitionId = this.selectedProcessId;\r\n    this.taskService.startProcess(this.payload).subscribe(() => {\r\n      this.clearProcess();\r\n      this.subject.next({ type: 'success', message: '提交成功' });\r\n    }, (error) => {\r\n      this.subject.next({ type: 'error', message: error && error.response && error.response.data && error.response.data.Message || '提交失败' });\r\n    })\r\n  }\r\n\r\n  getSubject() {\r\n    return this.subject.asObservable();\r\n  }\r\n\r\n  clearProcess() {\r\n    this.vm.close();\r\n    this.vm = null;\r\n    this.selectedProcessId = ''\r\n    this.selectedNodeId = ''\r\n    this.processReadOnly = false;\r\n    this.nodeReadOnly= true;\r\n  }\r\n}\r\n","import { Observable, Subject, of } from 'rxjs';\r\nimport { TaskService } from './service/task.service';\r\nimport { StartProcessPayload, CancelSubmitPayload } from './entity/start-process-payload';\r\nimport { ProcessSelectorService } from './submit/process-selector-vue/process-selector.service'\r\n\r\nimport { LoadingService, NotifyService } from '../ui-services/index';\r\ninterface Response { type: string, message: string };\r\n\r\nexport class WfTaskHandlerService {\r\n\r\n  subject = new Subject<any>();\r\n\r\n  constructor(\r\n    private processSelectorService: ProcessSelectorService,\r\n    private taskService: TaskService,\r\n    private loadingService: LoadingService,\r\n    private notifyService: NotifyService\r\n  ) { }\r\n\r\n  /**\r\n   * 提交审批\r\n   * @param payload 上下文参数\r\n   */\r\n  startProcess(payload: StartProcessPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    this.processSelectorService.setParam(payload);\r\n    this.processSelectorService.getSubject().subscribe(\r\n      (response: Response) => {\r\n        if (response.type === 'success') {\r\n          if (response.message) {\r\n            this.notifyService.success(response.message);\r\n            subject.next(true)\r\n          }\r\n        } else if (response.type === 'error') {\r\n          subject.next(false)\r\n          this.notifyService.error(response.message);\r\n        }\r\n      },\r\n      () => {\r\n        this.loadingService.hide();\r\n      })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * 取消提交\r\n   * @payload payload 参数\r\n   */\r\n  cancelSubmit(payload: CancelSubmitPayload): Observable<any> {\r\n    const subject = new Subject();\r\n    this.loadingService.show();\r\n    this.taskService.cancelSubmit(payload).subscribe(re => {\r\n      subject.next(true);\r\n      this.loadingService.hide();\r\n      this.notifyService.success('取消提交成功');\r\n    }, error => {\r\n      subject.next(false);\r\n      this.loadingService.hide();\r\n      this.notifyService.error(error && error.response && error.response.data && error.response.data.Message || '取消提交失败');\r\n    })\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n * 提交审批\r\n * @param dataId 表单id\r\n * @param bizDefKey 入口单据id\r\n */\r\n  submitWithBizDefKey(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notifyService.error('表单id不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据Id不能为空');\r\n      return;\r\n    }\r\n    var startProcessPayload = new StartProcessPayload();\r\n    startProcessPayload.dataId = dataId;\r\n    startProcessPayload.bizDefKey = bizDefKey;\r\n    return this.startProcess(startProcessPayload);\r\n  }\r\n\r\n  /**\r\n   * 取消提交审批\r\n   * @param dataId 表单id\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  cancelSubmitWithDataId(dataId: string, bizDefKey: string): Observable<any> {\r\n    if (!dataId) {\r\n      this.notifyService.error('表单id不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据Id不能为空');\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = dataId;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n   * 批量提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchSubmitWithBizDefKey(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!dataIds.length) {\r\n      this.notifyService.error('请选择数据');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    if (dataIds.length === 1) {\r\n      var startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataIds[0];\r\n      return this.startProcess(startPayload);\r\n    }\r\n\r\n    var successNum: number = 0;\r\n    var failedNum: number = 0;\r\n    const subject = new Subject();\r\n    this.loadingService.show();\r\n    for (var i = 0; i < dataIds.length; i++) {\r\n      var startPayload = new StartProcessPayload()\r\n      startPayload.bizDefKey = bizDefKey;\r\n      startPayload.dataId = dataIds[i];\r\n      startPayload.variables = { simulate: false };\r\n      this.taskService.startProcess(startPayload).subscribe((response: any) => {\r\n        if (response.procDefs.length > 1 || response.nextFlowNodes.length > 1) { //存在多个流程，单独提交//多个节点，单独提交\r\n          failedNum++;\r\n        } else {\r\n          successNum++;\r\n        }\r\n        if (successNum + failedNum === dataIds.length) {\r\n          this.loadingService.hide();\r\n          subject.next(true);//全部执行完再返回\r\n          this.showBatchSubmitInfo(\"submit\", successNum, failedNum);\r\n        }\r\n      }, () => {\r\n        failedNum++;\r\n        if (successNum + failedNum === dataIds.length) {\r\n          this.loadingService.hide();\r\n          subject.next(false);//全部执行完再返回\r\n          this.showBatchSubmitInfo(\"submit\", successNum, failedNum);\r\n        }\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n\r\n  /**\r\n   * 批量取消提交审批\r\n   * @param dataIds 表单ID集合\r\n   * @param bizDefKey 入口单据id\r\n   */\r\n  batchCancelSubmitWithDataId(dataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!dataIds) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!dataIds.length) {\r\n      this.notifyService.error('请选择数据');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    const subject = new Subject();\r\n    var successNum: number = 0;\r\n    var failedNum: number = 0;\r\n    this.loadingService.show();\r\n\r\n    for (var i = 0; i < dataIds.length; i++) {\r\n      var cancelSubmitPayload = new CancelSubmitPayload();\r\n      cancelSubmitPayload.dataId = dataIds[i];\r\n      cancelSubmitPayload.bizDefKey = bizDefKey;\r\n      this.taskService.cancelSubmit(cancelSubmitPayload).subscribe(re => {\r\n        successNum++;\r\n        if (successNum + failedNum === dataIds.length) {\r\n          this.loadingService.hide();\r\n          subject.next(true);\r\n          this.showBatchSubmitInfo(\"cancel\", successNum, failedNum);\r\n        }\r\n      }, () => {\r\n        failedNum++;\r\n        if (successNum + failedNum === dataIds.length) {\r\n          this.loadingService.hide();\r\n          subject.next(false);\r\n          this.showBatchSubmitInfo(\"cancel\", successNum, failedNum);\r\n        }\r\n      })\r\n    }\r\n    return subject.asObservable();\r\n  }\r\n\r\n  /**\r\n * 子表提交审批\r\n * @param parentDataId 主表id\r\n * @param childDataId 子表id\r\n * @param bizDefKey 入口单据id\r\n */\r\n  childSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    var startProcessPayload = new StartProcessPayload();\r\n    startProcessPayload.dataId = `${parentDataId},${childDataId}`;\r\n    startProcessPayload.bizDefKey = bizDefKey;\r\n    return this.startProcess(startProcessPayload);\r\n  }\r\n\r\n  /**\r\n * 子表取消提交审批\r\n * @param parentDataId 主表id\r\n * @param childDataId 子表id\r\n * @param bizDefKey 入口单据id\r\n */\r\n  childCancelSubmit(parentDataId: string, childDataId: string, bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataId) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    var cancelSubmitPayload = new CancelSubmitPayload();\r\n    cancelSubmitPayload.dataId = `${parentDataId},${childDataId}`;\r\n    cancelSubmitPayload.bizDefKey = bizDefKey;\r\n    return this.cancelSubmit(cancelSubmitPayload);\r\n  }\r\n\r\n  /**\r\n * 子表批量提交审批\r\n * @param parentDataId 主表id\r\n * @param childDataIds 子表id集合\r\n * @param bizDefKey 入口单据id\r\n */\r\n  childBatchSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchSubmitWithBizDefKey(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n * 子表批量取消提交审批\r\n * @param parentDataId 主表id\r\n * @param childDataIds 子表id集合\r\n * @param bizDefKey 入口单据id\r\n */\r\n  childBatchCancelSubmit(parentDataId: string, childDataIds: string[], bizDefKey: string): Observable<any> {\r\n    if (!parentDataId || !childDataIds) {\r\n      this.notifyService.error('dataId不能为空');\r\n      return;\r\n    }\r\n    if (!bizDefKey) {\r\n      this.notifyService.error('入口单据ID不能为空');\r\n      return;\r\n    }\r\n    const dataIds = childDataIds.map(childDataId => `${parentDataId},${childDataId}`);\r\n    return this.batchCancelSubmitWithDataId(dataIds, bizDefKey);\r\n  }\r\n\r\n  /**\r\n * 批量提交、取消提交提示信息\r\n */\r\n  private showBatchSubmitInfo(actionCode: string, successNum: number, failedNum: number) {\r\n    if (successNum && !failedNum) {//批量全部成功\r\n      actionCode === \"submit\" && this.notifyService.success('提交审批成功！');\r\n      actionCode === \"cancel\" && this.notifyService.success('取消提交成功！');\r\n    }\r\n    if (successNum && failedNum) {//批量有成功有失败\r\n      this.notifyService.warning(`操作成功${successNum}条，失败${failedNum}条!`);\r\n    }\r\n    if (!successNum && failedNum) {//批量全部失败\r\n      actionCode === \"submit\" && this.notifyService.error('提交审批失败！');\r\n      actionCode === \"cancel\" && this.notifyService.error('取消提交失败！');\r\n    }\r\n  }\r\n\r\n}\r\n","\r\nimport { ViewModelContext, HttpClient } from '@farris/mobile-devkit';\r\nimport { BE_ERROR_HANDLER__TOKEN } from '@farris/mobile-bef';\r\nimport { LoadingService, ToastService, NotifyService, DialogService,AttachmentPreviewService } from './ui-services/index';\r\nimport { ExceptionService } from './exception-services/index';\r\nimport { RouterService, ROUTER_INSTANCE_TOKEN } from './router.servcie';\r\n\r\nimport { CommandService } from './command.service';\r\nimport { StateMachineService } from './state-machine.service';\r\nimport { UIStateService } from './ui-state.service';\r\nimport { VoVariableService } from './vo-variable.service';\r\nimport { MapService } from './map-services/map.service';\r\n\r\nimport {\r\n  EntityTraversingService, EntityManipulationService, EntityAggregationService,\r\n  EntityService, EntityListService\r\n} from './entity-services/index';\r\n\r\nimport {\r\n  LoadDataService, CreateDataService, EditDataService, UpdateDataService, CheckDataService,\r\n  RemoveDataService, SaveDataService, CancelDataService, BeActionService, ApproveService\r\n} from './data-services/index';\r\n\r\nimport { AttachmentDataService, AttachmentService } from './attachment-services/index';\r\nimport { BusinessAttachmentDataService, BusinessAttachmentService } from './business-attachment-services/index';\r\n\r\nimport { TaskService } from './work-flow-service/service/task.service';\r\nimport { ProcessSelectorService } from './work-flow-service/submit/process-selector-vue/process-selector.service'\r\nimport { WfTaskHandlerService } from './work-flow-service/wf-task-handler.service'\r\nimport { CcWorkService } from './ccwork-service/ccwork.service';\r\n\r\nimport { ValidatorServices } from './validator-services';\r\nimport { JsBridgeService } from './js-bridge-service/index';\r\nimport { DiscussionGroupService } from './discussion-group-service/index';\r\n\r\n/**\r\n * 应用级Providers\r\n */\r\nconst COMMAND_SERVICES_APP_PROVIDERS = [\r\n  { provide: LoadingService, useClass: LoadingService, deps: [] },\r\n  { provide: ToastService, useClass: ToastService, deps: [] },\r\n  { provide: NotifyService, useClass: NotifyService, deps: [] },\r\n  { provide: DialogService, useClass: DialogService, deps: [] },\r\n  \r\n  { provide: ExceptionService, useClass: ExceptionService, deps: [] },\r\n  { provide: JsBridgeService, useClass: JsBridgeService, deps: [] },\r\n  { provide: BE_ERROR_HANDLER__TOKEN, useClass: ExceptionService, deps: [NotifyService, JsBridgeService] },\r\n];\r\n\r\n/**\r\n * 视图模型级Providers\r\n */\r\nconst COMMAND_SERVICES_VIEWMODEL_PROVIDERS = [\r\n  { provide: RouterService, useClass: RouterService, deps: [ViewModelContext, ROUTER_INSTANCE_TOKEN,JsBridgeService] },\r\n  { provide: CommandService, useClass: CommandService, deps: [ViewModelContext] },\r\n  { provide: EntityService, useClass: EntityService, deps: [ViewModelContext] },\r\n  { provide: StateMachineService, useClass: StateMachineService, deps: [ViewModelContext] },\r\n  { provide: UIStateService, useClass: UIStateService, deps: [ViewModelContext] },\r\n  { provide: VoVariableService, useClass: VoVariableService, deps: [ViewModelContext] },\r\n\r\n  { provide: EntityTraversingService, useClass: EntityTraversingService, deps: [ViewModelContext] },\r\n  { provide: EntityManipulationService, useClass: EntityManipulationService, deps: [ViewModelContext] },\r\n  { provide: EntityAggregationService, useClass: EntityAggregationService, deps: [ViewModelContext] },\r\n  { provide: EntityService, useClass: EntityService, deps: [ViewModelContext] },\r\n  { provide: EntityListService, useClass: EntityListService, deps: [ViewModelContext] },\r\n\r\n  { provide: LoadDataService, useClass: LoadDataService, deps: [ViewModelContext] },\r\n  { provide: CreateDataService, useClass: CreateDataService, deps: [ViewModelContext] },\r\n  { provide: EditDataService, useClass: EditDataService, deps: [ViewModelContext] },\r\n  { provide: UpdateDataService, useClass: UpdateDataService, deps: [ViewModelContext] },\r\n  { provide: RemoveDataService, useClass: RemoveDataService, deps: [ViewModelContext] },\r\n  { provide: SaveDataService, useClass: SaveDataService, deps: [ViewModelContext] },\r\n  { provide: CancelDataService, useClass: CancelDataService, deps: [ViewModelContext] },\r\n  { provide: BeActionService, useClass: BeActionService, deps: [ViewModelContext] },\r\n  { provide: CheckDataService, useClass: CheckDataService, deps: [ViewModelContext] },\r\n\r\n  { provide: ValidatorServices, useClass: ValidatorServices, deps: [ViewModelContext] },\r\n\r\n  { provide: TaskService, useClass: TaskService, deps: [HttpClient] },\r\n  { provide: ProcessSelectorService, useClass: ProcessSelectorService, deps: [TaskService] },\r\n  {\r\n    provide: WfTaskHandlerService, useClass: WfTaskHandlerService,\r\n    deps: [ProcessSelectorService, TaskService, LoadingService, NotifyService]\r\n  },\r\n  { provide: ApproveService, useClass: ApproveService, deps: [WfTaskHandlerService, ViewModelContext] },\r\n  { provide: AttachmentDataService, useClass: AttachmentDataService, deps: [ViewModelContext] },\r\n  { provide: BusinessAttachmentDataService, useClass: BusinessAttachmentDataService, deps: [ViewModelContext] },\r\n  {\r\n    provide: AttachmentService, useClass: AttachmentService,\r\n    deps: [ViewModelContext, EntityService, RemoveDataService, AttachmentDataService]\r\n  },\r\n  {\r\n    provide: BusinessAttachmentService, useClass: BusinessAttachmentService,\r\n    deps: [ViewModelContext, EntityService, RemoveDataService, BusinessAttachmentDataService]\r\n  },\r\n  { provide: CcWorkService, useClass: CcWorkService, deps: [ViewModelContext] },\r\n  { provide: MapService, useClass: MapService, deps: [ViewModelContext] },\r\n  { provide: AttachmentPreviewService, useClass: AttachmentPreviewService, deps: [ViewModelContext] },\r\n  { provide: DiscussionGroupService, useClass: DiscussionGroupService, deps: [HttpClient,ViewModelContext,LoadingService] }\r\n\r\n];\r\n\r\nexport { COMMAND_SERVICES_APP_PROVIDERS, COMMAND_SERVICES_VIEWMODEL_PROVIDERS };\r\n"],"names":["Loading","Toast","Notify","Dialog","from","AttachmentPreview","BindingList","tslib_1.__extends","tap","switchMap","EMPTY","HttpMethods","of","map","BefRepositoryUtil","HttpClient","zip","Subject","BindingPathConverter","BefDataPathUtil","DataChangeType","forkJoin","ChangeDetailType","HttpUtil","AttachmentUtil","filter","take","SubmitApprove","BE_ERROR_HANDLER__TOKEN","ViewModelContext"],"mappings":"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"}