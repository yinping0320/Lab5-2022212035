/**
 * @fileoverview added by tsickle
 * Generated from: utils/api-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
var ApiLocalService = /** @class */ (function () {
    function ApiLocalService(http) {
        this.http = http;
    }
    /**
     * @param {?} param
     * @return {?}
     */
    ApiLocalService.prototype.filterGroupLeader = /**
     * @param {?} param
     * @return {?}
     */
    function (param) {
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    };
    /**
     * @param {?} param
     * @return {?}
     */
    ApiLocalService.prototype.getGroupLeaderStatus = /**
     * @param {?} param
     * @return {?}
     */
    function (param) {
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/absRecentContacts/getRecentContacts';
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    };
    /**
     * 获取行政组织
     * @returns observable
     */
    /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganization = /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    function (url, param) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/org', param, options);
    };
    /**
     * 获取行政组织（全加载）
     * @returns observable
     */
    /**
     * 获取行政组织（全加载）
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganizations = /**
     * 获取行政组织（全加载）
     * @param {?} param
     * @return {?} observable
     */
    function (param) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        /** @type {?} */
        var url = this.getOrgsUrl + ("/getorgs?withDisabledOrg=" + param.withDisabledOrg + "&gettingCurrentOrg=" + param.gettingCurrentOrg + "&onlyDisplayOrg=" + param.onlyDisplayOrg);
        return this.http.post(url, options);
    };
    /**
     * 根据id获取行政组织
     * @returns observable
     */
    /**
     * 根据id获取行政组织
     * @param {?} ids
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganizationsWithIds = /**
     * 根据id获取行政组织
     * @param {?} ids
     * @return {?} observable
     */
    function (ids) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(this.getOrgsUrl + '/getorgsbyids', JSON.stringify(ids.split(',')), options);
    };
    /**
     * 获取行政组织（分层加载）
     * @returns observable
     */
    /**
     * 获取行政组织（分层加载）
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganizationsWithLayer = /**
     * 获取行政组织（分层加载）
     * @param {?} param
     * @return {?} observable
     */
    function (param) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        /** @type {?} */
        var url = this.getOrgsUrl + ("/getOrgsWithLayer?withDisabledOrg=" + param.withDisabledOrg);
        if (param.parentOrgId) {
            url = url + ("&parentOrgId=" + param.parentOrgId);
        }
        url = url + ("&gettingCurrentOrg=" + param.gettingCurrentOrg + "&onlyDisplayOrg=" + param.onlyDisplayOrg);
        return this.http.post(url, options);
    };
    /**
     * 获取行政组织（搜索组织）
     * @returns observable
     */
    /**
     * 获取行政组织（搜索组织）
     * @param {?} queryFilter
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganizationWithFilter = /**
     * 获取行政组织（搜索组织）
     * @param {?} queryFilter
     * @return {?} observable
     */
    function (queryFilter) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(this.getOrgsUrl + '/query', JSON.stringify(queryFilter), options);
    };
    /**
     * 根据人员id获取行政人员
     * @returns observable
     */
    /**
     * 根据人员id获取行政人员
     * @param {?} ids
     * @return {?} observable
     */
    ApiLocalService.prototype.getUsersById = /**
     * 根据人员id获取行政人员
     * @param {?} ids
     * @return {?} observable
     */
    function (ids) {
        /** @type {?} */
        var idsArr = [];
        if (!!ids) {
            /** @type {?} */
            var lastChar = ids.substring(ids.length - 1);
            ids = lastChar === ',' ? ids.substring(0, ids.length - 1) : ids;
            idsArr = ids.split(',');
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(this.getUsersUrl + '/getusersbyid', JSON.stringify(idsArr), options);
    };
    /**
     * 根据人员code或者name获取行政人员
     * @returns observable
     */
    /**
     * 根据人员code或者name获取行政人员
     * @param {?} queryFilter
     * @return {?} observable
     */
    ApiLocalService.prototype.getUsersWithFilter = /**
     * 根据人员code或者name获取行政人员
     * @param {?} queryFilter
     * @return {?} observable
     */
    function (queryFilter) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(this.getUsersUrl + '/query', JSON.stringify(queryFilter), options);
    };
    /**
     * 获取系统用户分组
     * @returns observable
     */
    /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getSysUserGroup = /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    function (param) {
        /** @type {?} */
        var url = '/api/runtime/sys/v1.0/usergroups';
        /** @type {?} */
        var paramStr = JSON.stringify(param);
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
            params: {
                param: paramStr,
            }
        };
        return this.http.get(url, options);
    };
    /**
     *
     * @param url url地址
     * @param absOrgType 系统组织
     * @param orgId 组织id
     * @param requestParam 请求参数
     * @returns observable
     */
    /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelByOrgId = /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    function (url, absOrgType, orgId, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            // 组织类型，默认为系统组织
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            orgId: orgId,
            // 组织id，获取当前组织下的用户
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            posId: requestParam.posId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    // 根据系统用户分组id获取分组下成员
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getPersonnelByUserGroupId = 
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    function (url, requestParam) {
        /** @type {?} */
        var body = {
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            // 是否获取用户头像
            withAllGroup: requestParam.withAllGroup,
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            groupId: requestParam.groupId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp
        };
        // 需要根据组织进行人员二次过滤
        if (requestParam.orgId) {
            body['orgId'] = requestParam.orgId;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param url url地址
     * @param absOrgType 系统类型
     * @param ids 人员id
     * @returns observable
     */
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} absOrgType 系统类型
     * @param {?} ids 人员id
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelByUserIds = /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} absOrgType 系统类型
     * @param {?} ids 人员id
     * @return {?} observable
     */
    function (url, absOrgType, ids) {
        /** @type {?} */
        var idsArr = [];
        if (!!ids) {
            /** @type {?} */
            var lastChar = ids.substring(ids.length - 1);
            ids = lastChar === ',' ? ids.substring(0, ids.length - 1) : ids;
            idsArr = ids.split(',');
        }
        /** @type {?} */
        var urls = url + '/user/' + absOrgType;
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(urls, idsArr, options);
    };
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param url 传入的url
     * @param absOrgType 数据源类型
     * @param codeOrName 传入的搜索内容
     * @param requestParam 请求参数
     * @returns observable
     */
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelBySearch = /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    function (url, absOrgType, codeOrName, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            // 组织类型，默认为系统组织
            getUserInfo: true,
            codeOrName: codeOrName,
            // 搜索内容
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            searchMode: 'or',
            pinyin: codeOrName,
            initials: codeOrName,
            filterId: requestParam.filterId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp
        };
        if (requestParam.orgId) {
            body.orgId = requestParam.orgId;
        }
        if (requestParam.pageSize) {
            body.pageSize = requestParam.pageSize;
        }
        if (requestParam.pageIndex) {
            body.pageIndex = requestParam.pageIndex;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    /**
     * 获取群组信息
     * @param url 接口地址
     * @returns observable
     */
    /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getGroupOrGroupPersonnel = /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    function (url, param) {
        /** @type {?} */
        var baseUrl = url;
        if (param.parentid) {
            baseUrl += '?iseanble=' + param.isenable + '&parentid=' + param.parentid;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.get(baseUrl, options);
    };
    // 获取选人组件全局配置参数
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    ApiLocalService.prototype.getGlobalParamConfig = 
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, options);
    };
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getFilterPosition = 
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    function (url, absOrgType, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    };
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getFilterOrganization = 
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    function (url, absOrgType, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            groupId: requestParam.groupId,
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    };
    ApiLocalService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ApiLocalService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    return ApiLocalService;
}());
export { ApiLocalService };
if (false) {
    /** @type {?} */
    ApiLocalService.prototype.getOrgsUrl;
    /** @type {?} */
    ApiLocalService.prototype.getOrgsWithLayer;
    /** @type {?} */
    ApiLocalService.prototype.getUsersUrl;
    /** @type {?} */
    ApiLocalService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLWVtcGxveWVlLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsidXRpbHMvYXBpLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFjLE1BQU0sc0JBQXNCLENBQUM7QUFHM0U7SUFTSSx5QkFBbUIsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtJQUFJLENBQUM7Ozs7O0lBRXhDLDJDQUFpQjs7OztJQUFqQixVQUFrQixLQUFVOztZQUNsQixHQUFHLEdBQUcsZ0RBQWdEOztZQUN0RCxPQUFPLEdBQUc7WUFDWixPQUFPLEVBQUUsSUFBSSxXQUFXLENBQUM7Z0JBQ3JCLGNBQWMsRUFBRSxrQkFBa0I7YUFDckMsQ0FBQztTQUNMO1FBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7Ozs7O0lBRUQsOENBQW9COzs7O0lBQXBCLFVBQXFCLEtBQVU7O1lBQ3JCLEdBQUcsR0FBRywyREFBMkQ7O1lBQ2pFLE9BQU8sR0FBRztZQUNaLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFrQjthQUNyQyxDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7T0FHRzs7Ozs7OztJQUNILHlDQUFlOzs7Ozs7SUFBZixVQUFnQixHQUFXLEVBQUUsS0FBc0I7O1lBQ3pDLE9BQU8sR0FBRztZQUNaLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFr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QUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7Z0JBL1ZKLFVBQVU7Ozs7Z0JBSEYsVUFBVTs7SUFtV25CLHNCQUFDO0NBQUEsQUFoV0QsSUFnV0M7U0EvVlksZUFBZTs7O0lBRXhCLHFDQUFtQjs7SUFFbkIsMkNBQXlCOztJQUV6QixzQ0FBb0I7O0lBRVIsK0JBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgT3JnUmVxdWVzdFBhcmFtLCBQZXJzb25uZWxSZXF1ZXN0UGFyYW0gfSBmcm9tICcuL3VzZXIudHlwZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBBcGlMb2NhbFNlcnZpY2Uge1xyXG5cclxuICAgIGdldE9yZ3NVcmw6IHN0cmluZztcclxuXHJcbiAgICBnZXRPcmdzV2l0aExheWVyOiBzdHJpbmc7XHJcblxyXG4gICAgZ2V0VXNlcnNVcmw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaHR0cDogSHR0cENsaWVudCkgeyB9XHJcblxyXG4gICAgZmlsdGVyR3JvdXBMZWFkZXIocGFyYW06IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzUmVjZW50Q29udGFjdHMvbW9kaWZ5JztcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBwYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R3JvdXBMZWFkZXJTdGF0dXMocGFyYW06IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzUmVjZW50Q29udGFjdHMvZ2V0UmVjZW50Q29udGFjdHMnO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIHBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluihjOaUv+e7hOe7h1xyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRPcmdhbml6YXRpb24odXJsOiBzdHJpbmcsIHBhcmFtOiBPcmdSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy9vcmcnLCBwYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5booYzmlL/nu4Tnu4fvvIjlhajliqDovb3vvIlcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0T3JnYW5pemF0aW9ucyhwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0T3Jnc1VybCArIGAvZ2V0b3Jncz93aXRoRGlzYWJsZWRPcmc9JHtwYXJhbS53aXRoRGlzYWJsZWRPcmd9JmdldHRpbmdDdXJyZW50T3JnPSR7cGFyYW0uZ2V0dGluZ0N1cnJlbnRPcmd9Jm9ubHlEaXNwbGF5T3JnPSR7cGFyYW0ub25seURpc3BsYXlPcmd9YDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNrmlk6I635Y+W6KGM5pS/57uE57uHXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldE9yZ2FuaXphdGlvbnNXaXRoSWRzKGlkczogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMuZ2V0T3Jnc1VybCArICcvZ2V0b3Jnc2J5aWRzJywgSlNPTi5zdHJpbmdpZnkoaWRzLnNwbGl0KCcsJykpLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluihjOaUv+e7hOe7h++8iOWIhuWxguWKoOi9ve+8iVxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRPcmdhbml6YXRpb25zV2l0aExheWVyKHBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdXJsID0gdGhpcy5nZXRPcmdzVXJsICsgYC9nZXRPcmdzV2l0aExheWVyP3dpdGhEaXNhYmxlZE9yZz0ke3BhcmFtLndpdGhEaXNhYmxlZE9yZ31gO1xyXG4gICAgICAgIGlmKHBhcmFtLnBhcmVudE9yZ0lkKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHVybCArIGAmcGFyZW50T3JnSWQ9JHtwYXJhbS5wYXJlbnRPcmdJZH1gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVybCA9IHVybCArIGAmZ2V0dGluZ0N1cnJlbnRPcmc9JHtwYXJhbS5nZXR0aW5nQ3VycmVudE9yZ30mb25seURpc3BsYXlPcmc9JHtwYXJhbS5vbmx5RGlzcGxheU9yZ31gO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6KGM5pS/57uE57uH77yI5pCc57Si57uE57uH77yJXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldE9yZ2FuaXphdGlvbldpdGhGaWx0ZXIocXVlcnlGaWx0ZXI6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLmdldE9yZ3NVcmwgKyAnL3F1ZXJ5JywgSlNPTi5zdHJpbmdpZnkocXVlcnlGaWx0ZXIpLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruS6uuWRmGlk6I635Y+W6KGM5pS/5Lq65ZGYXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldFVzZXJzQnlJZChpZHM6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBpZHNBcnIgPSBbXTtcclxuICAgICAgICBpZiAoISFpZHMpIHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdENoYXIgPSBpZHMuc3Vic3RyaW5nKGlkcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgaWRzID0gbGFzdENoYXIgPT09ICcsJyA/IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpIDogaWRzO1xyXG4gICAgICAgICAgICBpZHNBcnIgPSBpZHMuc3BsaXQoJywnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5nZXRVc2Vyc1VybCArICcvZ2V0dXNlcnNieWlkJywgSlNPTi5zdHJpbmdpZnkoaWRzQXJyKSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7kurrlkZhjb2Rl5oiW6ICFbmFtZeiOt+WPluihjOaUv+S6uuWRmFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICAgZ2V0VXNlcnNXaXRoRmlsdGVyKHF1ZXJ5RmlsdGVyOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLmdldFVzZXJzVXJsICsgJy9xdWVyeScsIEpTT04uc3RyaW5naWZ5KHF1ZXJ5RmlsdGVyKSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bns7vnu5/nlKjmiLfliIbnu4RcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgIGdldFN5c1VzZXJHcm91cChwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC91c2VyZ3JvdXBzJztcclxuICAgICAgICBjb25zdCBwYXJhbVN0ciA9IEpTT04uc3RyaW5naWZ5KHBhcmFtKTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgcGFyYW06IHBhcmFtU3RyLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1cmwgdXJs5Zyw5Z2AXHJcbiAgICAgKiBAcGFyYW0gYWJzT3JnVHlwZSDns7vnu5/nu4Tnu4dcclxuICAgICAqIEBwYXJhbSBvcmdJZCDnu4Tnu4dpZFxyXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbSDor7fmsYLlj4LmlbBcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29ubmVsQnlPcmdJZCh1cmw6IHN0cmluZywgYWJzT3JnVHlwZTogc3RyaW5nLCBvcmdJZDogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIGFic09yZ1R5cGUsIC8vIOe7hOe7h+exu+Wei++8jOm7mOiupOS4uuezu+e7n+e7hOe7h1xyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHJlcXVlc3RQYXJhbS5wYWdlSW5kZXgsIC8vIOW9k+WJjemhtVxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcmVxdWVzdFBhcmFtLnBhZ2VTaXplLCAvLyDmr4/pobXorrDlvZXmlbBcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHRydWUsIC8vIOaYr+WQpuiOt+WPlueUqOaIt+WktOWDj1xyXG4gICAgICAgICAgICBvcmdJZCwgLy8g57uE57uHaWTvvIzojrflj5blvZPliY3nu4Tnu4fkuIvnmoTnlKjmiLdcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsIC8vIOiOt+WPlue7hOe7h+WPiuWFtuaJgOacieS4i+e6p+e7hOe7h+S4i+eahOeUqOaIt++8jOm7mOiupGZhbHNlXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsIC8vIOaYr+WQpuiOt+WPluWBnOeUqOeUqOaIt++8jOm7mOiupOS4umZhbHNl77yMXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsIC8vIOaYr+WQpuiOt+WPluW9k+WJjeeUqOaIt++8jOm7mOiupOS4unRydWXvvIxcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogcmVxdWVzdFBhcmFtLm9yZGVyRmllbGQsIC8vIOaOkuW6j1xyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIHBvc0lkOiByZXF1ZXN0UGFyYW0ucG9zSWQsXHJcbiAgICAgICAgICAgIHdpdGhQZXJtaXNzaW9uOiByZXF1ZXN0UGFyYW0ud2l0aFBlcm1pc3Npb24sXHJcbiAgICAgICAgICAgIGF1dGhPcDogcmVxdWVzdFBhcmFtLmF1dGhPcFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyJywgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qC55o2u57O757uf55So5oi35YiG57uEaWTojrflj5bliIbnu4TkuIvmiJDlkZhcclxuICAgIGdldFBlcnNvbm5lbEJ5VXNlckdyb3VwSWQodXJsOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgcGFnZUluZGV4OiByZXF1ZXN0UGFyYW0ucGFnZUluZGV4LCAvLyDlvZPliY3pobVcclxuICAgICAgICAgICAgcGFnZVNpemU6IHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSwgLy8g5q+P6aG16K6w5b2V5pWwXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiB0cnVlLCAvLyDmmK/lkKbojrflj5bnlKjmiLflpLTlg49cclxuICAgICAgICAgICAgd2l0aEFsbEdyb3VwOiByZXF1ZXN0UGFyYW0ud2l0aEFsbEdyb3VwLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLCAvLyDmmK/lkKbojrflj5blgZznlKjnlKjmiLfvvIzpu5jorqTkuLpmYWxzZe+8jFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLCAvLyDmmK/lkKbojrflj5blvZPliY3nlKjmiLfvvIzpu5jorqTkuLp0cnVl77yMXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLCAvLyDmjpLluo9cclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBncm91cElkOiByZXF1ZXN0UGFyYW0uZ3JvdXBJZCxcclxuICAgICAgICAgICAgd2l0aFBlcm1pc3Npb246IHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbixcclxuICAgICAgICAgICAgYXV0aE9wOiByZXF1ZXN0UGFyYW0uYXV0aE9wXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDpnIDopoHmoLnmja7nu4Tnu4fov5vooYzkurrlkZjkuozmrKHov4fmu6RcclxuICAgICAgICBpZihyZXF1ZXN0UGFyYW0ub3JnSWQpIHtcclxuICAgICAgICAgICAgYm9keVsnb3JnSWQnXSA9IHJlcXVlc3RQYXJhbS5vcmdJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyJywgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6Xor6LooYzmlL/kurrlkZjvvIjmoLnmja7kurrlkZhpZOi/lOWbnuebuOWFs+aVsOaNru+8iVxyXG4gICAgICogQHBhcmFtIHVybCB1cmzlnLDlnYBcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOezu+e7n+exu+Wei1xyXG4gICAgICogQHBhcmFtIGlkcyDkurrlkZhpZFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeVVzZXJJZHModXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgaWRzOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgaWRzQXJyID0gW107XHJcbiAgICAgICAgaWYgKCEhaWRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDaGFyID0gaWRzLnN1YnN0cmluZyhpZHMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIGlkcyA9IGxhc3RDaGFyID09PSAnLCcgPyBpZHMuc3Vic3RyaW5nKDAsIGlkcy5sZW5ndGggLSAxKSA6IGlkcztcclxuICAgICAgICAgICAgaWRzQXJyID0gaWRzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVybHMgPSB1cmwgKyAnL3VzZXIvJyArIGFic09yZ1R5cGU7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJscywgaWRzQXJyLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouihjOaUv+S6uuWRmO+8iOagueaNruWQjeensOOAgee8luWPt+aQnOe0ou+8iVxyXG4gICAgICogQHBhcmFtIHVybCDkvKDlhaXnmoR1cmxcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOaVsOaNrua6kOexu+Wei1xyXG4gICAgICogQHBhcmFtIGNvZGVPck5hbWUg5Lyg5YWl55qE5pCc57Si5YaF5a65XHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtIOivt+axguWPguaVsFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeVNlYXJjaCh1cmw6IHN0cmluZywgYWJzT3JnVHlwZTogc3RyaW5nLCBjb2RlT3JOYW1lOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keTogYW55ID0ge1xyXG4gICAgICAgICAgICBhYnNPcmdUeXBlLCAvLyDnu4Tnu4fnsbvlnovvvIzpu5jorqTkuLrns7vnu5/nu4Tnu4dcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHRydWUsIC8vIOaYr+WQpuiOt+WPlueUqOaIt+WktOWDjyxcclxuICAgICAgICAgICAgY29kZU9yTmFtZSwgLy8g5pCc57Si5YaF5a65XHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLCAvLyDojrflj5bnu4Tnu4flj4rlhbbmiYDmnInkuIvnuqfnu4Tnu4fkuIvnmoTnlKjmiLfvvIzpu5jorqRmYWxzZVxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLCAvLyDmmK/lkKbojrflj5blgZznlKjnlKjmiLfvvIzpu5jorqTkuLpmYWxzZe+8jFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLCAvLyDmmK/lkKbojrflj5blvZPliY3nlKjmiLfvvIzpu5jorqTkuLp0cnVl77yMXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLCAvLyDmjpLluo9cclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBzZWFyY2hNb2RlOiAnb3InLFxyXG4gICAgICAgICAgICBwaW55aW46IGNvZGVPck5hbWUsXHJcbiAgICAgICAgICAgIGluaXRpYWxzOiBjb2RlT3JOYW1lLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICB3aXRoUGVybWlzc2lvbjogcmVxdWVzdFBhcmFtLndpdGhQZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICBhdXRoT3A6IHJlcXVlc3RQYXJhbS5hdXRoT3BcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW0ub3JnSWQpIHtcclxuICAgICAgICAgICAgYm9keS5vcmdJZCA9IHJlcXVlc3RQYXJhbS5vcmdJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICBib2R5LnBhZ2VTaXplID0gcmVxdWVzdFBhcmFtLnBhZ2VTaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBhcmFtLnBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICBib2R5LnBhZ2VJbmRleCA9IHJlcXVlc3RQYXJhbS5wYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCArICcvdXNlcicsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W576k57uE5L+h5oGvXHJcbiAgICAgKiBAcGFyYW0gdXJsIOaOpeWPo+WcsOWdgFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRHcm91cE9yR3JvdXBQZXJzb25uZWwodXJsOiBzdHJpbmcsIHBhcmFtPzogeyBpc2VuYWJsZTogYm9vbGVhbiwgcGFyZW50aWQ6IHN0cmluZyB9KSB7XHJcbiAgICAgICAgbGV0IGJhc2VVcmwgPSB1cmw7XHJcbiAgICAgICAgaWYgKHBhcmFtLnBhcmVudGlkKSB7XHJcbiAgICAgICAgICAgIGJhc2VVcmwgKz0gJz9pc2VhbmJsZT0nICsgcGFyYW0uaXNlbmFibGUgKyAnJnBhcmVudGlkPScgKyBwYXJhbS5wYXJlbnRpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChiYXNlVXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bpgInkurrnu4Tku7blhajlsYDphY3nva7lj4LmlbBcclxuICAgIGdldEdsb2JhbFBhcmFtQ29uZmlnKHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bnu4Tnu4fmnrbmnoTkuIvmiYDmnInmiJDlkZjmiYDlsZ7nmoTlspfkvY3vvIznlKjkuo7kurrlkZjkuozmrKHov4fmu6RcclxuICAgIGdldEZpbHRlclBvc2l0aW9uKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiByZXF1ZXN0UGFyYW0uZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGN1clVzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBvcmdJZDogcmVxdWVzdFBhcmFtLm9yZ0lkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBib2R5LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bnlKjmiLfliIbnu4TkuIvmiYDmnInmiJDlkZjmiYDlsZ7nmoTnu4Tnu4fvvIznlKjkuo7kurrlkZjkuozmrKHov4fmu6RcclxuICAgIGdldEZpbHRlck9yZ2FuaXphdGlvbih1cmw6IHN0cmluZywgYWJzT3JnVHlwZTogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIGFic09yZ1R5cGUsXHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogcmVxdWVzdFBhcmFtLmdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCxcclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBjdXJVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgZ3JvdXBJZDogcmVxdWVzdFBhcmFtLmdyb3VwSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==