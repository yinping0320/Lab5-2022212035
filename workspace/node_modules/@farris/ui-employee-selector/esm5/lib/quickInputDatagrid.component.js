/**
 * @fileoverview added by tsickle
 * Generated from: lib/quickInputDatagrid.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild } from "@angular/core";
import { ApiLocalService } from "../utils/api-service";
import { DatagridComponent } from "@farris/ui-datagrid";
import { of } from 'rxjs';
// 兼容保留，该组件无用
var quickInputDatagridComponent = /** @class */ (function () {
    function quickInputDatagridComponent(ApiLocalService) {
        var _this = this;
        this.ApiLocalService = ApiLocalService;
        this.isAllSelect = new EventEmitter();
        /**
         * 人员展示区的复选框取消勾选时触发逻辑
         * @param $event
         * @return
         */
        this.onBeforeUncheck = (/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) {
            _this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            function (selection, index) {
                if ($event.rowData["id"] === selection["id"]) {
                    _this.selections.splice(index, 1);
                }
            }));
            /** @type {?} */
            var emitojb = {
                items: _this.itemsQuick,
                pageIndex: _this.pageIndexQuick,
                pageSize: _this.pageSizeQuick,
                pageTotal: _this.pageTotalQuick,
                pageTotalAll: _this.pageTotalAllQuick,
                unSelectedList: _this.unSelectedListQuick
            };
            _this.isAllSelect.emit(emitojb);
            return of(true);
        });
    }
    /**
     * @return {?}
     */
    quickInputDatagridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.quickInputDatagrid.loadData(this.itemsQuick);
    };
    /**
     * @return {?}
     */
    quickInputDatagridComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.pageChangeCheck();
    };
    /**
       * 人员展示区datagrid用于数据加载
       */
    /**
     * 人员展示区datagrid用于数据加载
     * @return {?}
     */
    quickInputDatagridComponent.prototype.unSelectedListLoad = /**
     * 人员展示区datagrid用于数据加载
     * @return {?}
     */
    function () {
        var _this = this;
        this.itemsQuick = [];
        this.unSelectedListQuick.forEach((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.itemsQuick.push({ "displayname": res.displayname, "nameChs": res.nameChs, "id": res.id, "organization": res.organization, "organizationName": res.userOrganize, "userInFo": res.userInfo });
        }));
        this.quickInputDatagrid.loadData(this.itemsQuick);
        this.pageChangeCheck();
        /** @type {?} */
        var emitojb = {
            items: this.itemsQuick,
            pageIndex: this.pageIndexQuick,
            pageSize: this.pageSizeQuick,
            pageTotal: this.pageTotalQuick,
            pageTotalAll: this.pageTotalAllQuick,
            unSelectedList: this.unSelectedListQuick
        };
        this.isAllSelect.emit(emitojb);
    };
    /**
       * 当前行选中
       * @param data 当前行的数据（）
       */
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    quickInputDatagridComponent.prototype.selectLine = /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    function (data) {
        if (this.isSingleCheck) {
            if (this.selections.length == 0 || this._isInArray(data.id, "id", this.selections)) {
                this._insertOneIntoSelections(data.data);
            }
            else {
                alert(this.noSelectToRight);
            }
        }
        else {
            this._insertOneIntoSelections(data.data);
        }
        /** @type {?} */
        var emitojb = {
            items: this.itemsQuick,
            pageIndex: this.pageIndexQuick,
            pageSize: this.pageSizeQuick,
            pageTotal: this.pageTotalQuick,
            pageTotalAll: this.pageTotalAllQuick,
            unSelectedList: this.unSelectedListQuick
        };
        this.isAllSelect.emit(emitojb);
    };
    //人员展示翻页触发查询（！）
    //人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    quickInputDatagridComponent.prototype.switchPage = 
    //人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        this.pageIndexQuick = size.pageIndex;
        /** @type {?} */
        var isChinese;
        //中文
        if (/^[\u4e00-\u9fa5]+$/i.test(this.quickInput)) {
            isChinese = 0;
        }
        else if (!(/^[\u4e00-\u9fa5]+$/i.test(this.quickInput)) && !(escape(this.quickInput).indexOf("%u") < 0)) {
            alert("输入框禁止同时输入汉字和拼音或汉字和数字！");
            //英文
        }
        else if (/^[a-zA-Z]+$/.test(this.quickInput)) {
            if (this.quickInput.length > 3) {
                isChinese = 2;
            }
            else
                (isChinese = 3);
        }
        else {
            isChinese = 1;
        }
    };
    /**
       * 选中并插入当前行数据到右侧
       * @param data 当前行的数据
       * @param collection 暂存当前数据的集合
       */
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    quickInputDatagridComponent.prototype._insertOneIntoSelections = /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var collection = [];
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data["id"], "id", this.selections)) {
            return;
        }
        collection.push(data);
        this._insertSomeIntoSelections(collection);
    };
    /**
         * 判断是否在内
         * @param value
         * @param field
         * @param array
         * @returns
         */
    /**
     * 判断是否在内
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    quickInputDatagridComponent.prototype._isInArray = /**
     * 判断是否在内
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; })) ? true : false;
    };
    /**
     * @param {?} userArray
     * @return {?}
     */
    quickInputDatagridComponent.prototype._insertSomeIntoSelections = /**
     * @param {?} userArray
     * @return {?}
     */
    function (userArray) {
        var _this = this;
        userArray.forEach((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            if (!_this._isInArray(user["id"], "id", _this.selections)) {
                _this.selections.push(user);
            }
        }));
    };
    /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         */
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    quickInputDatagridComponent.prototype.pageChangeCheck = /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.unSelectedListQuick) {
            this.unSelectedListQuick.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (_this._isInArray(item.id, "id", _this.selections)) {
                    _this.quickInputDatagrid.checkRow(item.id);
                }
                else {
                    _this.quickInputDatagrid.unCheckRow(item.id);
                }
            }));
        }
    };
    quickInputDatagridComponent.decorators = [
        { type: Component, args: [{
                    template: "<farris-datagrid #quickInputDatagrid class=\"s-unSelectDatagrid-query\" [pagerViewMode]=\"'simple'\" [checkOnSelect]=\"true\"\n    [selectOnCheck]=\"true\" [multiSelect]=\"true\" [columns]=\"columnsQuick\" [data]=\"itemsQuick\"\n    [enableSelectRow]=\"true\" [showHeader]=\"false\" [fitColumns]=\"true\" [height]=\"200\"\n    [showBorder]=\"false\" [striped]=\"false\" [fit]=\"true\" [showPageNumber]=\"false\"\n    [pageIndex]=\"pageIndexQuick\" [pageSize]=\"pageSizeQuick\" [total]=\"pageTotalAllQuick\"\n    (checked)=\"selectLine($event)\" (pageChanged)=\"switchPage($event)\"\n    [beforeUncheck]=\"onBeforeUncheck\">\n  </farris-datagrid>"
                }] }
    ];
    /** @nocollapse */
    quickInputDatagridComponent.ctorParameters = function () { return [
        { type: ApiLocalService }
    ]; };
    quickInputDatagridComponent.propDecorators = {
        quickInputDatagrid: [{ type: ViewChild, args: ['quickInputDatagrid',] }],
        columnsQuick: [{ type: Input }],
        url2: [{ type: Input }],
        itemsQuick: [{ type: Input }],
        pageIndexQuick: [{ type: Input }],
        pageSizeQuick: [{ type: Input }],
        pageTotalAllQuick: [{ type: Input }],
        pathQuick: [{ type: Input }],
        orgIdQuick: [{ type: Input }],
        isContainQuick: [{ type: Input }],
        pageTotalQuick: [{ type: Input }],
        isSingleCheck: [{ type: Input }],
        selections: [{ type: Input }],
        noSelectToRight: [{ type: Input }],
        quickInput: [{ type: Input }],
        isLoadOutData: [{ type: Input }],
        unSelectedQuickLists: [{ type: Input }],
        unSelectedListQuick: [{ type: Input }],
        organizationList: [{ type: Input }],
        listIdField: [{ type: Input }],
        searchPage: [{ type: Input }],
        isenabled: [{ type: Input }],
        isExcludeMe: [{ type: Input }],
        isAllSelect: [{ type: Output }]
    };
    return quickInputDatagridComponent;
}());
export { quickInputDatagridComponent };
if (false) {
    /** @type {?} */
    quickInputDatagridComponent.prototype.quickInputDatagrid;
    /** @type {?} */
    quickInputDatagridComponent.prototype.columnsQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.url2;
    /** @type {?} */
    quickInputDatagridComponent.prototype.itemsQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageIndexQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageSizeQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageTotalAllQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pathQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.orgIdQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isContainQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageTotalQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isSingleCheck;
    /** @type {?} */
    quickInputDatagridComponent.prototype.selections;
    /** @type {?} */
    quickInputDatagridComponent.prototype.noSelectToRight;
    /** @type {?} */
    quickInputDatagridComponent.prototype.quickInput;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isLoadOutData;
    /** @type {?} */
    quickInputDatagridComponent.prototype.unSelectedQuickLists;
    /** @type {?} */
    quickInputDatagridComponent.prototype.unSelectedListQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.organizationList;
    /** @type {?} */
    quickInputDatagridComponent.prototype.listIdField;
    /** @type {?} */
    quickInputDatagridComponent.prototype.searchPage;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isenabled;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isExcludeMe;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isAllSelect;
    /**
     * 人员展示区的复选框取消勾选时触发逻辑
     * \@param $event
     * \@return
     * @type {?}
     */
    quickInputDatagridComponent.prototype.onBeforeUncheck;
    /**
     * @type {?}
     * @private
     */
    quickInputDatagridComponent.prototype.ApiLocalService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVpY2tJbnB1dERhdGFncmlkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZW1wbG95ZWUtc2VsZWN0b3IvIiwic291cmNlcyI6WyJsaWIvcXVpY2tJbnB1dERhdGFncmlkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDOztBQUcxQjtJQXVDSSxxQ0FDWSxlQUFnQztRQUQ1QyxpQkFFSztRQURPLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUhsQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7Ozs7OztRQXdGaEQsb0JBQWU7Ozs7UUFBRyxVQUFDLE1BQU07WUFDckIsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7OztZQUFDLFVBQUMsU0FBUyxFQUFFLEtBQUs7Z0JBQ3JDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQzFDLEtBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDcEM7WUFDTCxDQUFDLEVBQUMsQ0FBQTs7Z0JBQ0UsT0FBTyxHQUFHO2dCQUNWLEtBQUssRUFBRSxLQUFJLENBQUMsVUFBVTtnQkFDdEIsU0FBUyxFQUFFLEtBQUksQ0FBQyxjQUFjO2dCQUM5QixRQUFRLEVBQUUsS0FBSSxDQUFDLGFBQWE7Z0JBQzVCLFNBQVMsRUFBRSxLQUFJLENBQUMsY0FBYztnQkFDOUIs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QUMsRUFBRSxDQUFDLENBQUM7aUJBQy9DO1lBQ0wsQ0FBQyxFQUFDLENBQUM7U0FDTjtJQUNMLENBQUM7O2dCQWpNSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLHVvQkFPTztpQkFDcEI7Ozs7Z0JBZFEsZUFBZTs7O3FDQWtCbkIsU0FBUyxTQUFDLG9CQUFvQjsrQkFFOUIsS0FBSzt1QkFDTCxLQUFLOzZCQUNMLEtBQUs7aUNBQ0wsS0FBSztnQ0FDTCxLQUFLO29DQUNMLEtBQUs7NEJBQ0wsS0FBSzs2QkFDTCxLQUFLO2lDQUNMLEtBQUs7aUNBQ0wsS0FBSztnQ0FDTCxLQUFLOzZCQUNMLEtBQUs7a0NBQ0wsS0FBSzs2QkFDTCxLQUFLO2dDQUNMLEtBQUs7dUNBQ0wsS0FBSztzQ0FDTCxLQUFLO21DQUNMLEtBQUs7OEJBQ0wsS0FBSzs2QkFDTCxLQUFLOzRCQUNMLEtBQUs7OEJBQ0wsS0FBSzs4QkFDTCxNQUFNOztJQStKWCxrQ0FBQztDQUFBLEFBcE1ELElBb01DO1NBekxZLDJCQUEyQjs7O0lBRXBDLHlEQUF1RTs7SUFFdkUsbURBQTBCOztJQUMxQiwyQ0FBa0I7O0lBQ2xCLGlEQUF3Qjs7SUFDeEIscURBQTRCOztJQUM1QixvREFBMkI7O0lBQzNCLHdEQUErQjs7SUFDL0IsZ0RBQXVCOztJQUN2QixpREFBd0I7O0lBQ3hCLHFEQUE0Qjs7SUFDNUIscURBQTRCOztJQUM1QixvREFBMkI7O0lBQzNCLGlEQUF3Qjs7SUFDeEIsc0RBQTZCOztJQUM3QixpREFBd0I7O0lBQ3hCLG9EQUEyQjs7SUFDM0IsMkRBQWtDOztJQUNsQywwREFBaUM7O0lBQ2pDLHVEQUE4Qjs7SUFDOUIsa0RBQTRCOztJQUM1QixpREFBNkI7O0lBQzdCLGdEQUEyQjs7SUFDM0Isa0RBQTZCOztJQUM3QixrREFBZ0Q7Ozs7Ozs7SUF3RmhELHNEQWdCQzs7Ozs7SUFyR0csc0RBQXdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEFwaUxvY2FsU2VydmljZSB9IGZyb20gXCIuLi91dGlscy9hcGktc2VydmljZVwiO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRhdGFncmlkXCI7XHJcbmltcG9ydCB7IG9mIH0gZnJvbSAncnhqcyc7XHJcblxyXG4vLyDlhbzlrrnkv53nlZnvvIzor6Xnu4Tku7bml6DnlKhcclxuQENvbXBvbmVudCh7XHJcbiAgICB0ZW1wbGF0ZTogYDxmYXJyaXMtZGF0YWdyaWQgI3F1aWNrSW5wdXREYXRhZ3JpZCBjbGFzcz1cInMtdW5TZWxlY3REYXRhZ3JpZC1xdWVyeVwiIFtwYWdlclZpZXdNb2RlXT1cIidzaW1wbGUnXCIgW2NoZWNrT25TZWxlY3RdPVwidHJ1ZVwiXHJcbiAgICBbc2VsZWN0T25DaGVja109XCJ0cnVlXCIgW211bHRpU2VsZWN0XT1cInRydWVcIiBbY29sdW1uc109XCJjb2x1bW5zUXVpY2tcIiBbZGF0YV09XCJpdGVtc1F1aWNrXCJcclxuICAgIFtlbmFibGVTZWxlY3RSb3ddPVwidHJ1ZVwiIFtzaG93SGVhZGVyXT1cImZhbHNlXCIgW2ZpdENvbHVtbnNdPVwidHJ1ZVwiIFtoZWlnaHRdPVwiMjAwXCJcclxuICAgIFtzaG93Qm9yZGVyXT1cImZhbHNlXCIgW3N0cmlwZWRdPVwiZmFsc2VcIiBbZml0XT1cInRydWVcIiBbc2hvd1BhZ2VOdW1iZXJdPVwiZmFsc2VcIlxyXG4gICAgW3BhZ2VJbmRleF09XCJwYWdlSW5kZXhRdWlja1wiIFtwYWdlU2l6ZV09XCJwYWdlU2l6ZVF1aWNrXCIgW3RvdGFsXT1cInBhZ2VUb3RhbEFsbFF1aWNrXCJcclxuICAgIChjaGVja2VkKT1cInNlbGVjdExpbmUoJGV2ZW50KVwiIChwYWdlQ2hhbmdlZCk9XCJzd2l0Y2hQYWdlKCRldmVudClcIlxyXG4gICAgW2JlZm9yZVVuY2hlY2tdPVwib25CZWZvcmVVbmNoZWNrXCI+XHJcbiAgPC9mYXJyaXMtZGF0YWdyaWQ+YFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIHF1aWNrSW5wdXREYXRhZ3JpZENvbXBvbmVudCB7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgncXVpY2tJbnB1dERhdGFncmlkJykgcXVpY2tJbnB1dERhdGFncmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgdXJsMjogYW55XHJcbiAgICBASW5wdXQoKSBpdGVtc1F1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHBhZ2VJbmRleFF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgcGFnZVRvdGFsQWxsUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgcGF0aFF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIG9yZ0lkUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgaXNDb250YWluUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgcGFnZVRvdGFsUXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgaXNTaW5nbGVDaGVjazogYW55XHJcbiAgICBASW5wdXQoKSBzZWxlY3Rpb25zOiBhbnlcclxuICAgIEBJbnB1dCgpIG5vU2VsZWN0VG9SaWdodDogYW55XHJcbiAgICBASW5wdXQoKSBxdWlja0lucHV0OiBhbnlcclxuICAgIEBJbnB1dCgpIGlzTG9hZE91dERhdGE6IGFueVxyXG4gICAgQElucHV0KCkgdW5TZWxlY3RlZFF1aWNrTGlzdHM6IGFueVxyXG4gICAgQElucHV0KCkgdW5TZWxlY3RlZExpc3RRdWljazogYW55XHJcbiAgICBASW5wdXQoKSBvcmdhbml6YXRpb25MaXN0OiBhbnlcclxuICAgIEBJbnB1dCgpIGxpc3RJZEZpZWxkOiBzdHJpbmdcclxuICAgIEBJbnB1dCgpIHNlYXJjaFBhZ2U6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBpc2VuYWJsZWQ6IG51bWJlcjtcclxuICAgIEBJbnB1dCgpIGlzRXhjbHVkZU1lOiBudW1iZXI7XHJcbiAgICBAT3V0cHV0KCkgaXNBbGxTZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIEFwaUxvY2FsU2VydmljZTogQXBpTG9jYWxTZXJ2aWNlLFxyXG4gICAgKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnF1aWNrSW5wdXREYXRhZ3JpZC5sb2FkRGF0YSh0aGlzLml0ZW1zUXVpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VDaGVjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAgKiDkurrlkZjlsZXnpLrljLpkYXRhZ3JpZOeUqOS6juaVsOaNruWKoOi9vVxyXG4gICAgICAgKi9cclxuICAgIHVuU2VsZWN0ZWRMaXN0TG9hZCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1zUXVpY2sgPSBbXTtcclxuICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0UXVpY2suZm9yRWFjaChyZXMgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zUXVpY2sucHVzaCh7IFwiZGlzcGxheW5hbWVcIjogcmVzLmRpc3BsYXluYW1lLCBcIm5hbWVDaHNcIjogcmVzLm5hbWVDaHMsIFwiaWRcIjogcmVzLmlkLCBcIm9yZ2FuaXphdGlvblwiOiByZXMub3JnYW5pemF0aW9uLCBcIm9yZ2FuaXphdGlvbk5hbWVcIjogcmVzLnVzZXJPcmdhbml6ZSwgXCJ1c2VySW5Gb1wiOiByZXMudXNlckluZm8gfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnF1aWNrSW5wdXREYXRhZ3JpZC5sb2FkRGF0YSh0aGlzLml0ZW1zUXVpY2spO1xyXG4gICAgICAgIHRoaXMucGFnZUNoYW5nZUNoZWNrKCk7XHJcbiAgICAgICAgbGV0IGVtaXRvamIgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXhRdWljayxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemVRdWljayxcclxuICAgICAgICAgICAgcGFnZVRvdGFsOiB0aGlzLnBhZ2VUb3RhbFF1aWNrLFxyXG4gICAgICAgICAgICBwYWdlVG90YWxBbGw6IHRoaXMucGFnZVRvdGFsQWxsUXVpY2ssXHJcbiAgICAgICAgICAgIHVuU2VsZWN0ZWRMaXN0OiB0aGlzLnVuU2VsZWN0ZWRMaXN0UXVpY2tcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBbGxTZWxlY3QuZW1pdChlbWl0b2piKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICog5b2T5YmN6KGM6YCJ5LitXHJcbiAgICAgICAqIEBwYXJhbSBkYXRhIOW9k+WJjeihjOeahOaVsOaNru+8iO+8iVxyXG4gICAgICAgKi9cclxuICAgIHNlbGVjdExpbmUoZGF0YTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVDaGVjaykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zLmxlbmd0aCA9PSAwIHx8IHRoaXMuX2lzSW5BcnJheShkYXRhLmlkLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCh0aGlzLm5vU2VsZWN0VG9SaWdodCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoZGF0YS5kYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVtaXRvamIgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXhRdWljayxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemVRdWljayxcclxuICAgICAgICAgICAgcGFnZVRvdGFsOiB0aGlzLnBhZ2VUb3RhbFF1aWNrLFxyXG4gICAgICAgICAgICBwYWdlVG90YWxBbGw6IHRoaXMucGFnZVRvdGFsQWxsUXVpY2ssXHJcbiAgICAgICAgICAgIHVuU2VsZWN0ZWRMaXN0OiB0aGlzLnVuU2VsZWN0ZWRMaXN0UXVpY2tcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc0FsbFNlbGVjdC5lbWl0KGVtaXRvamIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5Lq65ZGY5bGV56S657+76aG16Kem5Y+R5p+l6K+i77yI77yB77yJXHJcbiAgICBzd2l0Y2hQYWdlKHNpemUpIHtcclxuICAgICAgICB0aGlzLnBhZ2VJbmRleFF1aWNrID0gc2l6ZS5wYWdlSW5kZXg7XHJcbiAgICAgICAgbGV0IGlzQ2hpbmVzZTogbnVtYmVyO1xyXG4gICAgICAgIC8v5Lit5paHXHJcbiAgICAgICAgaWYgKC9eW1xcdTRlMDAtXFx1OWZhNV0rJC9pLnRlc3QodGhpcy5xdWlja0lucHV0KSkge1xyXG4gICAgICAgICAgICBpc0NoaW5lc2UgPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoISgvXltcXHU0ZTAwLVxcdTlmYTVdKyQvaS50ZXN0KHRoaXMucXVpY2tJbnB1dCkpICYmICEoZXNjYXBlKHRoaXMucXVpY2tJbnB1dCkuaW5kZXhPZihcIiV1XCIpIDwgMCkpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCLovpPlhaXmoYbnpoHmraLlkIzml7bovpPlhaXmsYnlrZflkozmi7zpn7PmiJbmsYnlrZflkozmlbDlrZfvvIFcIilcclxuICAgICAgICAgICAgLy/oi7HmlodcclxuICAgICAgICB9IGVsc2UgaWYgKC9eW2EtekEtWl0rJC8udGVzdCh0aGlzLnF1aWNrSW5wdXQpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnF1aWNrSW5wdXQubGVuZ3RoID4gMykge1xyXG4gICAgICAgICAgICAgICAgaXNDaGluZXNlID0gMlxyXG4gICAgICAgICAgICB9IGVsc2UgKFxyXG4gICAgICAgICAgICAgICAgaXNDaGluZXNlID0gM1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaXNDaGluZXNlID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAqIOS6uuWRmOWxleekuuWMuueahOWkjemAieahhuWPlua2iOWLvumAieaXtuinpuWPkemAu+i+kVxyXG4gICAgICAgKiBAcGFyYW0gJGV2ZW50XHJcbiAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAqL1xyXG4gICAgb25CZWZvcmVVbmNoZWNrID0gKCRldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChzZWxlY3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkZXZlbnQucm93RGF0YVtcImlkXCJdID09PSBzZWxlY3Rpb25bXCJpZFwiXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCBlbWl0b2piID0ge1xyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtc1F1aWNrLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4UXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbDogdGhpcy5wYWdlVG90YWxRdWljayxcclxuICAgICAgICAgICAgcGFnZVRvdGFsQWxsOiB0aGlzLnBhZ2VUb3RhbEFsbFF1aWNrLFxyXG4gICAgICAgICAgICB1blNlbGVjdGVkTGlzdDogdGhpcy51blNlbGVjdGVkTGlzdFF1aWNrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBbGxTZWxlY3QuZW1pdChlbWl0b2piKTtcclxuICAgICAgICByZXR1cm4gb2YodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAqIOmAieS4reW5tuaPkuWFpeW9k+WJjeihjOaVsOaNruWIsOWPs+S+p1xyXG4gICAgICAgKiBAcGFyYW0gZGF0YSDlvZPliY3ooYznmoTmlbDmja5cclxuICAgICAgICogQHBhcmFtIGNvbGxlY3Rpb24g5pqC5a2Y5b2T5YmN5pWw5o2u55qE6ZuG5ZCIXHJcbiAgICAgICAqL1xyXG4gICAgX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGxldCBjb2xsZWN0aW9uOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIC8vIOWmguaenOW9k+WJjeaVsOaNruW3sue7j+enu+WFpeWPs+S+p+aVsOaNru+8jOWImei/lOWbnuOAglxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoZGF0YVtcImlkXCJdLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZGF0YSlcclxuICAgICAgICB0aGlzLl9pbnNlcnRTb21lSW50b1NlbGVjdGlvbnMoY29sbGVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgICog5Yik5pat5piv5ZCm5Zyo5YaFXHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgICAgICogQHBhcmFtIGZpZWxkXHJcbiAgICAgICAgICogQHBhcmFtIGFycmF5XHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKi9cclxuICAgIF9pc0luQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfaW5zZXJ0U29tZUludG9TZWxlY3Rpb25zKHVzZXJBcnJheTogYW55W10pIHtcclxuICAgICAgICB1c2VyQXJyYXkuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0luQXJyYXkodXNlcltcImlkXCJdLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKHVzZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICAgKiDnv7vpobXmo4Dmn6XvvJrkurrlkZjlsZXnpLrljLrnmoTli77pgInnirbmgIHkuI7lt7LpgInkurrlkZjljLrmmK/lkKblr7nlupRcclxuICAgICAgICAgKi9cclxuICAgIHBhZ2VDaGFuZ2VDaGVjaygpIHtcclxuICAgICAgICBpZiAodGhpcy51blNlbGVjdGVkTGlzdFF1aWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5TZWxlY3RlZExpc3RRdWljay5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShpdGVtLmlkLCBcImlkXCIsIHRoaXMuc2VsZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1aWNrSW5wdXREYXRhZ3JpZC5jaGVja1JvdyhpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWlja0lucHV0RGF0YWdyaWQudW5DaGVja1JvdyhpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIl19