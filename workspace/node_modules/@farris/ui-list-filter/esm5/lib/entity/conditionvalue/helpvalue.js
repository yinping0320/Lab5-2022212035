/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ControlType } from "../controltype";
import { cloneDeep } from 'lodash-es';
import { EventEmitter } from "@angular/core";
var HelpValue = /** @class */ (function () {
    function HelpValue(data) {
        if (data === void 0) { data = { value: [], valueField: undefined, textValue: undefined }; }
        this.clear$ = new EventEmitter();
        if (data.hasOwnProperty('textValue')) { // 新结构，value是数组
            this.valueField = data.valueField;
            this.value = data.value;
            this.textValue = data.textValue;
        }
        else { // 旧结构，value是对象
            this.valueField = data.valueField;
            this.value = data.value ? [data.value] : [];
            this.textValue = 'help-text-value-null'; // 旧结构无textValue属性
        }
    }
    /**
     * @param {?} helpItem
     * @param {?} args
     * @return {?}
     */
    HelpValue.getPropValue = /**
     * @param {?} helpItem
     * @param {?} args
     * @return {?}
     */
    function (helpItem, args) {
        if (args.length > 1) {
            /** @type {?} */
            var arg = args.shift();
            return helpItem[arg] ? this.getPropValue(helpItem[arg], args) : null;
        }
        return helpItem[args[0]];
    };
    /**
     * @return {?}
     */
    HelpValue.prototype.clearValue = /**
     * @return {?}
     */
    function () {
        this.value = [];
        this.valueField = undefined;
        this.textValue = undefined;
        this.clear$.emit();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    HelpValue.prototype.setOriginalValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        throw new Error('Method not implemented.');
    };
    /**
     * @return {?}
     */
    HelpValue.prototype.getOriginalValue = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var args = this.valueField.split('.');
        /** @type {?} */
        var valueArr = this.value.map((/**
         * @param {?} helpItem
         * @return {?}
         */
        function (helpItem) { return HelpValue.getPropValue(helpItem, cloneDeep(args)); }));
        return valueArr && valueArr.length ? valueArr.join(',') : '';
    };
    /**
     * @return {?}
     */
    HelpValue.prototype.getControlType = /**
     * @return {?}
     */
    function () {
        return ControlType.Help;
    };
    /**
     * @return {?}
     */
    HelpValue.prototype.isEmpty = /**
     * @return {?}
     */
    function () {
        return !this.valueField;
    };
    /**
     * @param {?} textField
     * @return {?}
     */
    HelpValue.prototype.getTextValue = /**
     * @param {?} textField
     * @return {?}
     */
    function (textField) {
        /** @type {?} */
        var args = textField.split('.');
        /** @type {?} */
        var textArr = this.value.map((/**
         * @param {?} helpItem
         * @return {?}
         */
        function (helpItem) { return HelpValue.getPropValue(helpItem, cloneDeep(args)); }));
        return textArr && textArr.length ? textArr.join(',') : '';
    };
    return HelpValue;
}());
export { HelpValue };
if (false) {
    /** @type {?} */
    HelpValue.prototype.valueField;
    /** @type {?} */
    HelpValue.prototype.value;
    /** @type {?} */
    HelpValue.prototype.textValue;
    /** @type {?} */
    HelpValue.prototype.clear$;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscHZhbHVlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1saXN0LWZpbHRlci8iLCJzb3VyY2VzIjpbImxpYi9lbnRpdHkvY29uZGl0aW9udmFsdWUvaGVscHZhbHVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTdDO0lBbUNJLG1CQUFZLElBSWtEO1FBSmxELHFCQUFBLEVBQUEsU0FJTixLQUFLLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRTtRQWxDOUQsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFtQ3hCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsRUFBRSxFQUFDLGVBQWU7WUFDbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDbkM7YUFBTSxFQUFDLGVBQWU7WUFDbkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1QyxJQUFJLENBQUMsU0FBUyxHQUFHLHNCQUFzQixDQUFDLENBQUMsa0JBQWtCO1NBQzlEO0lBRUwsQ0FBQzs7Ozs7O0lBM0NNLHNCQUFZOzs7OztJQUFuQixVQUFvQixRQUFhLEVBQUUsSUFBbUI7UUFDbEQsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTs7Z0JBQ1gsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDeEIsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7U0FDeEU7UUFDRCxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixDQUFDOzs7O0lBRUQsOEJBQVU7OztJQUFWO1FBQ0ksSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7UUFDNUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFFM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN2QixDQUFDOzs7OztJQUNELG9DQUFnQjs7OztJQUFoQixVQUFpQixLQUFVO1FBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztJQUMvQyxDQUFDOzs7O0lBQ0Qsb0NBQWdCOzs7SUFBaEI7O1lBQ1UsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7WUFDakMsUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRzs7OztRQUFDLFVBQUEsUUFBUSxJQUFJLE9BQUEsU0FBUyxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQWpELENBQWlELEVBQUM7UUFDOUYsT0FBTyxRQUFRLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ2pFLENBQUM7Ozs7SUFDRCxrQ0FBYzs7O0lBQWQ7UUFDSSxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUM7SUFDNUIsQ0FBQzs7OztJQW1CRCwyQkFBTzs7O0lBQVA7UUFDSSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUM1QixDQUFDOzs7OztJQUVELGdDQUFZOzs7O0lBQVosVUFBYSxTQUFpQjs7WUFDcEIsSUFBSSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDOztZQUMzQixPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxRQUFRLElBQUksT0FBQSxTQUFTLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBakQsQ0FBaUQsRUFBQztRQUM3RixPQUFPLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVMLGdCQUFDO0FBQUQsQ0FBQyxBQTdERCxJQTZEQzs7OztJQTNERywrQkFBbUI7O0lBQ25CLDBCQUFhOztJQUNiLDhCQUFrQjs7SUFDbEIsMkJBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVZhbHVlIH0gZnJvbSBcIi4vaXZhbHVlXCI7XHJcbmltcG9ydCB7IENvbnRyb2xUeXBlIH0gZnJvbSBcIi4uL2NvbnRyb2x0eXBlXCI7XHJcbmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGVscFZhbHVlIGltcGxlbWVudHMgSVZhbHVlIHtcclxuXHJcbiAgICB2YWx1ZUZpZWxkOiBzdHJpbmc7XHJcbiAgICB2YWx1ZTogYW55W107XHJcbiAgICB0ZXh0VmFsdWU6IHN0cmluZztcclxuICAgIGNsZWFyJCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBzdGF0aWMgZ2V0UHJvcFZhbHVlKGhlbHBJdGVtOiBhbnksIGFyZ3M6IEFycmF5PHN0cmluZz4pOiBhbnkge1xyXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgYXJnID0gYXJncy5zaGlmdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gaGVscEl0ZW1bYXJnXSA/IHRoaXMuZ2V0UHJvcFZhbHVlKGhlbHBJdGVtW2FyZ10sIGFyZ3MpIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlbHBJdGVtW2FyZ3NbMF1dO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyVmFsdWUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xyXG4gICAgICAgIHRoaXMudmFsdWVGaWVsZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnRleHRWYWx1ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhciQuZW1pdCgpO1xyXG4gICAgfVxyXG4gICAgc2V0T3JpZ2luYWxWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3JpZ2luYWxWYWx1ZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnZhbHVlRmllbGQuc3BsaXQoJy4nKTtcclxuICAgICAgICBjb25zdCB2YWx1ZUFyciA9IHRoaXMudmFsdWUubWFwKGhlbHBJdGVtID0+IEhlbHBWYWx1ZS5nZXRQcm9wVmFsdWUoaGVscEl0ZW0sIGNsb25lRGVlcChhcmdzKSkpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZUFyciAmJiB2YWx1ZUFyci5sZW5ndGggPyB2YWx1ZUFyci5qb2luKCcsJykgOiAnJztcclxuICAgIH1cclxuICAgIGdldENvbnRyb2xUeXBlKCk6IENvbnRyb2xUeXBlIHtcclxuICAgICAgICByZXR1cm4gQ29udHJvbFR5cGUuSGVscDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YToge1xyXG4gICAgICAgIHZhbHVlOiBhbnksXHJcbiAgICAgICAgdmFsdWVGaWVsZDogc3RyaW5nLFxyXG4gICAgICAgIHRleHRWYWx1ZTogc3RyaW5nO1xyXG4gICAgfSA9IHsgdmFsdWU6IFtdLCB2YWx1ZUZpZWxkOiB1bmRlZmluZWQsIHRleHRWYWx1ZTogdW5kZWZpbmVkIH0pIHtcclxuICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgndGV4dFZhbHVlJykpIHsvLyDmlrDnu5PmnoTvvIx2YWx1ZeaYr+aVsOe7hFxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlRmllbGQgPSBkYXRhLnZhbHVlRmllbGQ7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSA9IGRhdGEudGV4dFZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7Ly8g5pen57uT5p6E77yMdmFsdWXmmK/lr7nosaFcclxuICAgICAgICAgICAgdGhpcy52YWx1ZUZpZWxkID0gZGF0YS52YWx1ZUZpZWxkO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0YS52YWx1ZSA/IFtkYXRhLnZhbHVlXSA6IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSA9ICdoZWxwLXRleHQtdmFsdWUtbnVsbCc7IC8vIOaXp+e7k+aehOaXoHRleHRWYWx1ZeWxnuaAp1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy52YWx1ZUZpZWxkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHRWYWx1ZSh0ZXh0RmllbGQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgYXJncyA9IHRleHRGaWVsZC5zcGxpdCgnLicpO1xyXG4gICAgICAgIGNvbnN0IHRleHRBcnIgPSB0aGlzLnZhbHVlLm1hcChoZWxwSXRlbSA9PiBIZWxwVmFsdWUuZ2V0UHJvcFZhbHVlKGhlbHBJdGVtLCBjbG9uZURlZXAoYXJncykpKTtcclxuICAgICAgICByZXR1cm4gdGV4dEFyciAmJiB0ZXh0QXJyLmxlbmd0aCA/IHRleHRBcnIuam9pbignLCcpIDogJyc7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==