/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { FieldConfig } from '../entity/fieldconfig/fieldconfig';
import { QueryCondition } from '../entity/querycondition';
// import { SolutionService } from './solution.service';
import { EnumType } from '../entity/controltype/dropdownlist/enumtype';
import { EnumBoolValue } from '../entity/controltype/dropdownlist/boolenumvalue';
import { EnumIntegerValue } from '../entity/controltype/dropdownlist/integerenumvalue';
import { EnumStringValue } from '../entity/controltype/dropdownlist/stringenumvalue';
import { ControlType } from '../entity/controltype';
import { CompareType } from '../entity/comparetype';
import { ValueType } from '../entity/valuetype';
import { RelationType } from '../entity/relationtype';
import { CheckboxEnumValue } from '../entity/controltype/checkbox/ienumvalue';
export class ConvertorService {
    constructor() { }
    // private solutionservice:SolutionService
    /**
     * 获取已选择的字段配置
     * @param {?} selectedConditions
     * @return {?}
     */
    getFeildConfigs(selectedConditions) {
        /** @type {?} */
        let fieldsConfigs = new Array();
        if (!selectedConditions || selectedConditions.length <= 0) {
            return fieldsConfigs;
        }
        else {
            selectedConditions.forEach((/**
             * @param {?} condition
             * @return {?}
             */
            condition => {
                /** @type {?} */
                let fieldConfig = new FieldConfig();
                fieldConfig.id = condition.id;
                fieldConfig.labelCode = condition.fieldCode;
                fieldConfig.name = condition.fieldName;
                fieldConfig.control = condition.control;
                fieldsConfigs.push(fieldConfig);
            }));
        }
        return fieldsConfigs;
    }
    /**
     * @param {?} fileds
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSelectedFieldConditions(fileds, selectedFieldConditions) {
        // console.log(selectedFieldConditions);
        /** @type {?} */
        let tempSelectedFieldConditions = new Array();
        tempSelectedFieldConditions = this.arrayClone(selectedFieldConditions);
        selectedFieldConditions = new Array();
        fileds.forEach((/**
         * @param {?} filed
         * @return {?}
         */
        filed => {
            filed.control = this.getDropListEnumValues((/** @type {?} */ (filed.control)));
            // filed.control = this.getCheckGroupEnumValues(filed.control as CheckboxGroupControl);
            if (tempSelectedFieldConditions.length > 0) {
                /** @type {?} */
                let tempIndex = tempSelectedFieldConditions.findIndex((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x.id == filed.id));
                if (tempIndex != (-1)) {
                    selectedFieldConditions.push(tempSelectedFieldConditions[tempIndex]);
                }
                else {
                    selectedFieldConditions = this.getNewFieldConditions(filed, selectedFieldConditions);
                }
            }
            else {
                selectedFieldConditions = this.getNewFieldConditions(filed, selectedFieldConditions);
            }
        }));
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    getDropListEnumValues(control) {
        if (control.valueType == EnumType.BoolType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumBoolValue(), element));
            }));
            control.enumValues = enumValues;
        }
        else if (control.valueType == EnumType.IntType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumIntegerValue(), element));
            }));
            control.enumValues = enumValues;
        }
        else if (control.valueType == EnumType.StringType) {
            /** @type {?} */
            let enumValues = new Array();
            control.enumValues.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                enumValues.push(Object.assign(new EnumStringValue(), element));
            }));
            control.enumValues = enumValues;
        }
        return control;
    }
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    getCheckGroupEnumValues(control) {
        /** @type {?} */
        let enumValues = new Array();
        control.enumValues.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            enumValues.push(Object.assign(new CheckboxEnumValue(), element));
        }));
        control.enumValues = enumValues;
        return control;
    }
    /**
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getNewFieldConditions(filed, selectedFieldConditions) {
        /** @type {?} */
        let selectedFieldCondition = new QueryCondition();
        if (filed.control.getControlType() == ControlType.Text) {
            selectedFieldConditions = this.getTextValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DateRangeTime) {
            selectedFieldConditions = this.getDateRangeTimeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.MonthRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.YearRange) {
            selectedFieldConditions = this.getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.NumberRange) {
            selectedFieldConditions = this.getNumberRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Help) {
            selectedFieldConditions = this.getSmartHelpValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.DropDown) {
            selectedFieldConditions = this.getDropDownListValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Search) {
            selectedFieldConditions = this.getSearchValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Date) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Year) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Month) {
            selectedFieldConditions = this.getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.CheckboxGroup) {
            selectedFieldConditions = this.getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.Radio) {
            selectedFieldConditions = this.getRadioValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        else if (filed.control.getControlType() == ControlType.InputGroup) {
            selectedFieldConditions = this.getInputGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions);
        }
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDropDownListValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        this.getDropListEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getCheckboxGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getRadioValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        this.getCheckGroupEnumValues((/** @type {?} */ (selectedFieldCondition.control)));
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSmartHelpValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getNumberRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateRangeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.beginPlaceHolder = filed.beginPlaceHolder;
        selectedFieldCondition.endPlaceHolder = filed.endPlaceHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateRangeTimeValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.BetWeen;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getTextValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getInputGroupValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getDateValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} selectedFieldCondition
     * @param {?} filed
     * @param {?} selectedFieldConditions
     * @return {?}
     */
    getSearchValueFieldCondition(selectedFieldCondition, filed, selectedFieldConditions) {
        selectedFieldCondition.id = filed.id;
        selectedFieldCondition.fieldCode = filed.labelCode;
        selectedFieldCondition.placeHolder = filed.placeHolder;
        selectedFieldCondition.fieldName = filed.name;
        selectedFieldCondition.compareType = CompareType.Equal;
        selectedFieldCondition.valueType = ValueType.Value;
        selectedFieldCondition.value = filed.value;
        selectedFieldCondition.relationType = RelationType.And;
        selectedFieldCondition.control = filed.control;
        selectedFieldConditions.push(selectedFieldCondition);
        return selectedFieldConditions;
    }
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    arrayClone(input) {
        /** @type {?} */
        let result = new Array();
        if (input && input.length > 0) {
            input.forEach((/**
             * @param {?} element
             * @return {?}
             */
            element => {
                result.push(Object.assign({}, element));
            }));
        }
        return result;
    }
}
ConvertorService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ConvertorService.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVydG9yc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbGlzdC1maWx0ZXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZS9jb252ZXJ0b3JzZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUNoRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7O0FBRTFELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN2RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDakYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDdkYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQVV0RCxPQUFPLEVBQXNCLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFJbEcsTUFBTSxPQUFPLGdCQUFnQjtJQUV6QixnQkFBZ0IsQ0FBQzs7Ozs7OztJQU1qQixlQUFlLENBQUMsa0JBQXlDOztZQUNqRCxhQUFhLEdBQUcsSUFBSSxLQUFLLEVBQWU7UUFDNUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDdkQsT0FBTyxhQUFhLENBQUM7U0FDeEI7YUFDSTtZQUNELGtCQUFrQixDQUFDLE9BQU87Ozs7WUFB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QUE4QztRQUMzSSxzQkFBc0IsQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNyQyxzQkFBc0IsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQztRQUNuRCxzQkFBc0IsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQztRQUN2RCxzQkFBc0IsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUM5QyxzQkFBc0IsQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQztRQUN2RCxzQkFBc0IsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUNuRCxzQkFBc0IsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUMzQyxzQkFBc0IsQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQztRQUN2RCxzQkFBc0IsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztRQUMvQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNyRCxPQUFPLHVCQUF1QixDQUFDO0lBQ25DLENBQUM7Ozs7OztJQUVPLFVBQVUsQ0FBQyxLQUFpQjs7WUFDNUIsTUFBTSxHQUFHLElBQUksS0FBSyxFQUFPO1FBQzdCLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzNCLEtBQUssQ0FBQyxPQUFPOzs7O1lBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUM1QyxDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7O1lBaFRKLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZpZWxkQ29uZmlnIH0gZnJvbSAnLi4vZW50aXR5L2ZpZWxkY29uZmlnL2ZpZWxkY29uZmlnJztcclxuaW1wb3J0IHsgUXVlcnlDb25kaXRpb24gfSBmcm9tICcuLi9lbnRpdHkvcXVlcnljb25kaXRpb24nO1xyXG4vLyBpbXBvcnQgeyBTb2x1dGlvblNlcnZpY2UgfSBmcm9tICcuL3NvbHV0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBFbnVtVHlwZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvZW51bXR5cGUnO1xyXG5pbXBvcnQgeyBFbnVtQm9vbFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2Ryb3Bkb3dubGlzdC9ib29sZW51bXZhbHVlJztcclxuaW1wb3J0IHsgRW51bUludGVnZXJWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvaW50ZWdlcmVudW12YWx1ZSc7XHJcbmltcG9ydCB7IEVudW1TdHJpbmdWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3Qvc3RyaW5nZW51bXZhbHVlJztcclxuaW1wb3J0IHsgQ29udHJvbFR5cGUgfSBmcm9tICcuLi9lbnRpdHkvY29udHJvbHR5cGUnO1xyXG5pbXBvcnQgeyBDb21wYXJlVHlwZSB9IGZyb20gJy4uL2VudGl0eS9jb21wYXJldHlwZSc7XHJcbmltcG9ydCB7IERyb3BEb3duTGlzdFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2Ryb3Bkb3dubGlzdHZhbHVlJztcclxuaW1wb3J0IHsgVmFsdWVUeXBlIH0gZnJvbSAnLi4vZW50aXR5L3ZhbHVldHlwZSc7XHJcbmltcG9ydCB7IFJlbGF0aW9uVHlwZSB9IGZyb20gJy4uL2VudGl0eS9yZWxhdGlvbnR5cGUnO1xyXG5pbXBvcnQgeyBOdW1iZXJSYW5nZVZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL251bWJlcnJhbmdldmF1ZSc7XHJcbmltcG9ydCB7IERhdGVSYW5nZVZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2RhdGVyYW5nZXZhbHVlJztcclxuaW1wb3J0IHsgVGV4dFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3RleHR2YWx1ZSc7XHJcbmltcG9ydCB7IERyb3BEb3duQ29udHJvbCB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZS9kcm9wZG93bmxpc3QvZHJvcGRvd25jb250cm9sJztcclxuaW1wb3J0IHsgSGVscFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2hlbHB2YWx1ZSc7XHJcbmltcG9ydCB7IENoZWNrYm94R3JvdXBDb250cm9sIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2NoZWNrYm94L2NoZWNrYm94Y29udHJvbCc7XHJcbmltcG9ydCB7IFNlYXJjaFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3NlYXJjaHZhbHVlJztcclxuaW1wb3J0IHsgQ2hlY2tib3hHcm91cFZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2NoZWNrYm94Z3JvdXB2YWx1ZSc7XHJcbmltcG9ydCB7IERhdGVWYWx1ZSB9IGZyb20gJy4uL2VudGl0eS9jb25kaXRpb252YWx1ZS9kYXRldmFsdWUnO1xyXG5pbXBvcnQgeyBDaGVja2JveElFbnVtVmFsdWUsIENoZWNrYm94RW51bVZhbHVlIH0gZnJvbSAnLi4vZW50aXR5L2NvbnRyb2x0eXBlL2NoZWNrYm94L2llbnVtdmFsdWUnO1xyXG5pbXBvcnQgeyBEYXRlUmFuZ2VUaW1lVmFsdWUgfSBmcm9tICcuLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXJhbmdldGltZXZhbHVlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIENvbnZlcnRvclNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICAvLyBwcml2YXRlIHNvbHV0aW9uc2VydmljZTpTb2x1dGlvblNlcnZpY2VcclxuICAgIC8qKlxyXG4gICAgKiDojrflj5blt7LpgInmi6nnmoTlrZfmrrXphY3nva5cclxuICAgICogQHBhcmFtIHNlbGVjdGVkQ29uZGl0aW9ucyBcclxuICAgICovXHJcbiAgICBnZXRGZWlsZENvbmZpZ3Moc2VsZWN0ZWRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBsZXQgZmllbGRzQ29uZmlncyA9IG5ldyBBcnJheTxGaWVsZENvbmZpZz4oKTtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkQ29uZGl0aW9ucyB8fCBzZWxlY3RlZENvbmRpdGlvbnMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkc0NvbmZpZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZENvbmRpdGlvbnMuZm9yRWFjaChjb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkQ29uZmlnID0gbmV3IEZpZWxkQ29uZmlnKCk7XHJcbiAgICAgICAgICAgICAgICBmaWVsZENvbmZpZy5pZCA9IGNvbmRpdGlvbi5pZDtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLmxhYmVsQ29kZSA9IGNvbmRpdGlvbi5maWVsZENvZGU7XHJcbiAgICAgICAgICAgICAgICBmaWVsZENvbmZpZy5uYW1lID0gY29uZGl0aW9uLmZpZWxkTmFtZTtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnLmNvbnRyb2wgPSBjb25kaXRpb24uY29udHJvbDtcclxuICAgICAgICAgICAgICAgIGZpZWxkc0NvbmZpZ3MucHVzaChmaWVsZENvbmZpZyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmllbGRzQ29uZmlncztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyhmaWxlZHM6IEFycmF5PEZpZWxkQ29uZmlnPiwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICBsZXQgdGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIHRlbXBTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuYXJyYXlDbG9uZShzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAgICAgZmlsZWRzLmZvckVhY2goZmlsZWQgPT4ge1xyXG4gICAgICAgICAgICBmaWxlZC5jb250cm9sID0gdGhpcy5nZXREcm9wTGlzdEVudW1WYWx1ZXMoZmlsZWQuY29udHJvbCBhcyBEcm9wRG93bkNvbnRyb2wpO1xyXG4gICAgICAgICAgICAvLyBmaWxlZC5jb250cm9sID0gdGhpcy5nZXRDaGVja0dyb3VwRW51bVZhbHVlcyhmaWxlZC5jb250cm9sIGFzIENoZWNrYm94R3JvdXBDb250cm9sKTtcclxuICAgICAgICAgICAgaWYgKHRlbXBTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gdGVtcFNlbGVjdGVkRmllbGRDb25kaXRpb25zLmZpbmRJbmRleCh4ID0+IHguaWQgPT0gZmlsZWQuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBJbmRleCAhPSAoLTEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaCh0ZW1wU2VsZWN0ZWRGaWVsZENvbmRpdGlvbnNbdGVtcEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RHJvcExpc3RFbnVtVmFsdWVzKGNvbnRyb2w6IERyb3BEb3duQ29udHJvbCk6IERyb3BEb3duQ29udHJvbCB7XHJcbiAgICAgICAgaWYgKGNvbnRyb2wudmFsdWVUeXBlID09IEVudW1UeXBlLkJvb2xUeXBlKSB7XHJcbiAgICAgICAgICAgIGxldCBlbnVtVmFsdWVzID0gbmV3IEFycmF5PEVudW1Cb29sVmFsdWU+KCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlcy5wdXNoKE9iamVjdC5hc3NpZ24obmV3IEVudW1Cb29sVmFsdWUoKSwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY29udHJvbC52YWx1ZVR5cGUgPT0gRW51bVR5cGUuSW50VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgZW51bVZhbHVlcyA9IG5ldyBBcnJheTxFbnVtSW50ZWdlclZhbHVlPigpO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBFbnVtSW50ZWdlclZhbHVlKCksIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZW51bVZhbHVlcyA9IGVudW1WYWx1ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbnRyb2wudmFsdWVUeXBlID09IEVudW1UeXBlLlN0cmluZ1R5cGUpIHtcclxuICAgICAgICAgICAgbGV0IGVudW1WYWx1ZXMgPSBuZXcgQXJyYXk8RW51bVN0cmluZ1ZhbHVlPigpO1xyXG4gICAgICAgICAgICBjb250cm9sLmVudW1WYWx1ZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBFbnVtU3RyaW5nVmFsdWUoKSwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyb2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDaGVja0dyb3VwRW51bVZhbHVlcyhjb250cm9sOiBDaGVja2JveEdyb3VwQ29udHJvbCk6IENoZWNrYm94R3JvdXBDb250cm9sIHtcclxuICAgICAgICBsZXQgZW51bVZhbHVlcyA9IG5ldyBBcnJheTxDaGVja2JveElFbnVtVmFsdWU+KCk7XHJcbiAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVudW1WYWx1ZXMucHVzaChPYmplY3QuYXNzaWduKG5ldyBDaGVja2JveEVudW1WYWx1ZSgpLCBlbGVtZW50KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udHJvbC5lbnVtVmFsdWVzID0gZW51bVZhbHVlcztcclxuICAgICAgICByZXR1cm4gY29udHJvbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TmV3RmllbGRDb25kaXRpb25zKGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uID0gbmV3IFF1ZXJ5Q29uZGl0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuVGV4dCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0VGV4dFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVGltZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXJSYW5nZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldE51bWJlclJhbmdlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0U21hcnRIZWxwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRHJvcERvd24pIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERyb3BEb3duTGlzdFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlNlYXJjaCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0U2VhcmNoVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWxlZC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRGF0ZSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXIpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldERhdGVWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Nb250aCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0RGF0ZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbiwgZmlsZWQsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZWQuY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLmdldENoZWNrYm94R3JvdXBWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuZ2V0UmFkaW9WYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb24sIGZpbGVkLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbGVkLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5JbnB1dEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5nZXRJbnB1dEdyb3VwVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLCBmaWxlZCwgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREcm9wRG93bkxpc3RWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmlkID0gZmlsZWQuaWQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZENvZGUgPSBmaWxlZC5sYWJlbENvZGU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGROYW1lID0gZmlsZWQubmFtZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZVR5cGUgPSBWYWx1ZVR5cGUuVmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZSA9IGZpbGVkLnZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucmVsYXRpb25UeXBlID0gUmVsYXRpb25UeXBlLkFuZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgPSBmaWxlZC5jb250cm9sO1xyXG4gICAgICAgIHRoaXMuZ2V0RHJvcExpc3RFbnVtVmFsdWVzKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCBhcyBEcm9wRG93bkNvbnRyb2wpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tib3hHcm91cFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgdGhpcy5nZXRDaGVja0dyb3VwRW51bVZhbHVlcyhzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgYXMgQ2hlY2tib3hHcm91cENvbnRyb2wpO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zLnB1c2goc2VsZWN0ZWRGaWVsZENvbmRpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmFkaW9WYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmlkID0gZmlsZWQuaWQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZENvZGUgPSBmaWxlZC5sYWJlbENvZGU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGROYW1lID0gZmlsZWQubmFtZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuRXF1YWw7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZVR5cGUgPSBWYWx1ZVR5cGUuVmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi52YWx1ZSA9IGZpbGVkLnZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucmVsYXRpb25UeXBlID0gUmVsYXRpb25UeXBlLkFuZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wgPSBmaWxlZC5jb250cm9sO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hlY2tHcm91cEVudW1WYWx1ZXMoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sIGFzIENoZWNrYm94R3JvdXBDb250cm9sKTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNtYXJ0SGVscFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROdW1iZXJSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWVUeXBlID0gVmFsdWVUeXBlLlZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWUgPSBmaWxlZC52YWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnJlbGF0aW9uVHlwZSA9IFJlbGF0aW9uVHlwZS5BbmQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sID0gZmlsZWQuY29udHJvbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERhdGVSYW5nZVZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5iZWdpblBsYWNlSG9sZGVyID0gZmlsZWQuYmVnaW5QbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmVuZFBsYWNlSG9sZGVyID0gZmlsZWQuZW5kUGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5CZXRXZWVuO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWVUeXBlID0gVmFsdWVUeXBlLlZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWUgPSBmaWxlZC52YWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnJlbGF0aW9uVHlwZSA9IFJlbGF0aW9uVHlwZS5BbmQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sID0gZmlsZWQuY29udHJvbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERhdGVSYW5nZVRpbWVWYWx1ZUZpZWxkQ29uZGl0aW9uKHNlbGVjdGVkRmllbGRDb25kaXRpb246IFF1ZXJ5Q29uZGl0aW9uLCBmaWxlZDogRmllbGRDb25maWcsIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmlkID0gZmlsZWQuaWQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZENvZGUgPSBmaWxlZC5sYWJlbENvZGU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5wbGFjZUhvbGRlciA9IGZpbGVkLnBsYWNlSG9sZGVyO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGROYW1lID0gZmlsZWQubmFtZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbXBhcmVUeXBlID0gQ29tcGFyZVR5cGUuQmV0V2VlbjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRUZXh0VmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5pZCA9IGZpbGVkLmlkO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGRDb2RlID0gZmlsZWQubGFiZWxDb2RlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkTmFtZSA9IGZpbGVkLm5hbWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWVUeXBlID0gVmFsdWVUeXBlLlZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWUgPSBmaWxlZC52YWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnJlbGF0aW9uVHlwZSA9IFJlbGF0aW9uVHlwZS5BbmQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sID0gZmlsZWQuY29udHJvbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0SW5wdXRHcm91cFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYXRlVmFsdWVGaWVsZENvbmRpdGlvbihzZWxlY3RlZEZpZWxkQ29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbiwgZmlsZWQ6IEZpZWxkQ29uZmlnLCBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5pZCA9IGZpbGVkLmlkO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uZmllbGRDb2RlID0gZmlsZWQubGFiZWxDb2RlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24ucGxhY2VIb2xkZXIgPSBmaWxlZC5wbGFjZUhvbGRlcjtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkTmFtZSA9IGZpbGVkLm5hbWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb21wYXJlVHlwZSA9IENvbXBhcmVUeXBlLkVxdWFsO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWVUeXBlID0gVmFsdWVUeXBlLlZhbHVlO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24udmFsdWUgPSBmaWxlZC52YWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnJlbGF0aW9uVHlwZSA9IFJlbGF0aW9uVHlwZS5BbmQ7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sID0gZmlsZWQuY29udHJvbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5wdXNoKHNlbGVjdGVkRmllbGRDb25kaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNlYXJjaFZhbHVlRmllbGRDb25kaXRpb24oc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24sIGZpbGVkOiBGaWVsZENvbmZpZywgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uaWQgPSBmaWxlZC5pZDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmZpZWxkQ29kZSA9IGZpbGVkLmxhYmVsQ29kZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnBsYWNlSG9sZGVyID0gZmlsZWQucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5maWVsZE5hbWUgPSBmaWxlZC5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29tcGFyZVR5cGUgPSBDb21wYXJlVHlwZS5FcXVhbDtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlVHlwZSA9IFZhbHVlVHlwZS5WYWx1ZTtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLnZhbHVlID0gZmlsZWQudmFsdWU7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5yZWxhdGlvblR5cGUgPSBSZWxhdGlvblR5cGUuQW5kO1xyXG4gICAgICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbCA9IGZpbGVkLmNvbnRyb2w7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMucHVzaChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKTtcclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcnJheUNsb25lKGlucHV0OiBBcnJheTxhbnk+KTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBBcnJheTxhbnk+KCk7XHJcbiAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5wdXQuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iXX0=