/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ChangeDetectorRef, ChangeDetectionStrategy, Output, EventEmitter, ElementRef, Renderer2, Injector, LOCALE_ID, Optional, InjectFlags } from '@angular/core';
import { ControlType } from './entity/controltype';
import { ListFilterService } from './service/list-filter.service';
import { QuerySolutionService } from './submithandlers/query-solution.service';
import { ConvertorService } from './service/convertorservice';
import { TextValue } from './entity/conditionvalue/textvalue';
import { HelpValue } from './entity/conditionvalue/helpvalue';
import { DropDownListValue } from './entity/conditionvalue/dropdownlistvalue';
import { DateRangeValue } from './entity/conditionvalue/daterangevalue';
import { NumberRangeValue } from './entity/conditionvalue/numberrangevaue';
import { SearchValue } from './entity/conditionvalue/searchvalue';
import { DateValue } from './entity/conditionvalue/datevalue';
import { CheckboxGroupValue } from './entity/conditionvalue/checkboxgroupvalue';
import { LISTFILTER_HANDLER_TOKEN } from './interface/IistFilterHandler';
import { RadioGroupValue } from './entity/conditionvalue/radiovalue';
import { MonthValue } from './entity/conditionvalue/month';
import { YearValue } from './entity/conditionvalue/yearvalue';
import { YearRangeValue } from './entity/conditionvalue/yearrange';
import { MonthRangeValue } from './entity/conditionvalue/monthrange';
import { InputGroupValue } from './entity/conditionvalue/inputgroup';
import { IdService, OverLayHiddenService } from '@farris/ui-common';
export class ListFilterComponent {
    /**
     * @param {?} filterService
     * @param {?} cd
     * @param {?} handler
     * @param {?} convertorService
     * @param {?} render
     * @param {?} injector
     */
    constructor(filterService, cd, handler, convertorService, render, injector) {
        this.filterService = filterService;
        this.cd = cd;
        this.handler = handler;
        this.convertorService = convertorService;
        this.render = render;
        this.injector = injector;
        //  表单左对齐
        this.alLeft = false;
        //  平分空间
        this.autoWidth = true;
        //  实时搜索
        this.liveSearch = false;
        //  label的宽度是否自适应
        this.autoLabel = false;
        //  是否禁用
        this.disabled = false;
        this.filterPaddingNone = false;
        // 默认值是空值时执行查询，兼容旧方式
        this.defaultEmptyValueSearch = true;
        this.query = new EventEmitter();
        this.clear = new EventEmitter();
        this.searchChange = new EventEmitter();
        this.conditionsChange = new EventEmitter();
        //  filterWidth:number = 1000;
        //  标记是否有滚动条
        //  hasScroll = true;
        //  需要监听收折的表单
        //  resizeGroups: listFilterGroup;
        // 筛选icon部分小红点
        this.showExpandTag = false;
        /**
         * 是否需要显示展开更多icon
         */
        this.showMoreIcon = false;
        //  moreIconWidth:number = 0;
        this.showFilter = false;
        // 是否展现出的只有一个搜索控件
        this.formExpand = false;
        // 提交表单数据
        //  queryList;
        // 隐藏提交表单数据
        //  extendqueryList;
        /**
         * 循环表单
         */
        this.listFilterConditions = new Array();
        /**
         * 用来存储setvalue前数据
         */
        this.stagListFilterConditions = new Array();
        /**
         * 记录默认收起的搜索表单列表
         */
        this.extendFilterList = [];
        /**
         * 记录显示的搜索表单列表
         */
        this.showFilterList = [];
        /**
         * 显示中表单的必填项
         */
        this.requiredListFilter = [];
        /** 隐藏中表单的必填项 */
        //  extendRequiredListFilter: Array<QueryCondition> = [];
        /**
         * 表单是否允许提交
         */
        this.canSubmit = false;
        /**
         * 扩展表单是否允许提交
         */
        //  extendCanSubmit:boolean = false;
        this.localeIds = {
            en: 'en',
            'zh-CHS': 'zh-CHS'
        };
        this.currentLocale = 'zh-CHS';
        this.isControlInline = true;
        this.fieldCodeOfClearFields = [];
        this.UPDATE_FILTER_VALUES_TIMER = null;
        this.overLayService = null;
        if (this.injector) {
            this.currentLocale = this.injector.get(LOCALE_ID);
            this.listfilterHandler = this.injector.get(LISTFILTER_HANDLER_TOKEN, null, InjectFlags.Optional);
            this.idService = this.injector.get(IdService);
            this.overLayService = this.injector.get(OverLayHiddenService, null);
        }
        if (!this.overLayService) {
            this.overLayService = new OverLayHiddenService();
        }
    }
    /**
     * @param {?} configs
     * @return {?}
     */
    set defaultValue(configs) {
        this._defaultValue = configs;
        /** @type {?} */
        let canFilter = this.defaultEmptyValueSearch || configs && configs.length > 0;
        if (canFilter) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.setFilterValue(this._defaultValue);
            }));
        }
    }
    /**
     * @return {?}
     */
    get defaultValue() {
        return this._defaultValue;
    }
    /**
     * @return {?}
     */
    get filterList() {
        return this._filterList;
    }
    /**
     * @param {?} filterList
     * @return {?}
     */
    set filterList(filterList) {
        this._filterList = filterList;
        this.initFilterList();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // if (this.currentLocale === this.localeIds['en']) {
        //     this.isControlInline = false;
        // } else {
        //     this.isControlInline = true;
        // }
        this.canShowMoreIcon();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.autoWidth && !this.formExpand && this.filterMainBasisRef) {
            /** @type {?} */
            const basicList = this.filterMainBasisRef.nativeElement.querySelectorAll('.filter-input-list');
            /** @type {?} */
            let basicWidth = 0;
            if (basicList && basicList.length) {
                for (let k = 0; k < basicList.length; k++) {
                    /** @type {?} */
                    const offW = Math.ceil(parseFloat(basicList[k].offsetWidth || 0));
                    if (offW > 0) {
                        basicWidth += offW;
                    }
                }
            }
            if (basicWidth > 0) {
                this.render.setStyle(this.filterMainBasisRef.nativeElement, 'width', basicWidth + 'px');
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.floatPanel) {
            this.overLayService.destory(this.floatPanel.nativeElement);
        }
    }
    /**
     * 初始化处理表单数据
     * @return {?}
     */
    initFilterList() {
        this.listFilterConditions = new Array();
        this.extendFilterList = [];
        this.showFilterList = [];
        this.filterDatas = this.filterService.fieldSchemasConvert(this._filterList);
        if (this.filterDatas && this.filterDatas.length) {
            this.listFilterConditions = this.convertorService.getSelectedFieldConditions(this.filterDatas, this.listFilterConditions);
            this.stagListFilterConditions = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            o => (Object.assign({}, o))));
            // 存储扩展项和默认展示表单
            this.listFilterConditions.forEach((/**
             * @param {?} field
             * @return {?}
             */
            field => {
                if (field.control.isExtend) {
                    this.extendFilterList.push(field);
                }
                else {
                    this.showFilterList.push(field);
                }
            }));
            // 判断是否是左对齐 只有一个搜索
            /** @type {?} */
            const _basisFilterList = this.listFilterConditions.filter((/**
             * @param {?} field
             * @return {?}
             */
            (field) => {
                return !field.control.isExtend;
            }));
            if (_basisFilterList && _basisFilterList.length === 1 && this.getControlType(_basisFilterList[0]) === 'search') {
                this.formExpand = true;
            }
            this.conditionChangeHandler();
            this.inSetCurrentFilterConditions();
            // 存储默认展示中必填项
            this.requiredListInit();
            this.canShowMoreIcon();
            //  this.listSearch();
            this.cd.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    inSetCurrentFilterConditions() {
        if (this.listfilterHandler) {
            this.listfilterHandler.setCurrentFilterConditions(this.listFilterConditions);
        }
    }
    /**
     * 获取控件类型
     * @param {?} selectedFieldCondition
     * @return {?}
     */
    getControlType(selectedFieldCondition) {
        if (selectedFieldCondition) {
            if (selectedFieldCondition.control.getControlType() == ControlType.Text) {
                return 'input';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Search) {
                return 'search';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Date) {
                return 'date';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Month) {
                return 'month';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Year) {
                return 'year';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRange) {
                return 'daterange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DateRangeTime) {
                return 'daterangetime';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.MonthRange) {
                return 'monthrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.YearRange) {
                return 'yearrange';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.DropDown) {
                return 'dropdown';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.NumberRange) {
                return 'number';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Help) {
                return 'help';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.CheckboxGroup) {
                return 'checkboxgroup';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.Radio) {
                return 'radio';
            }
            else if (selectedFieldCondition.control.getControlType() == ControlType.InputGroup) {
                return 'input-group';
            }
            else {
                return 'input';
            }
        }
    }
    /**
     * 获得类名
     * @param {?} currentItem
     * @return {?}
     */
    getStyle(currentItem) {
        /** @type {?} */
        const defaultCondtionStyle = 'col-12 col-md-6 col-xl-3 col-el-2';
        return (this.filterClass && !this.autoWidth) ? this.filterClass : defaultCondtionStyle;
    }
    /**
     * 判断是否需要显示更多按钮
     * @return {?}
     */
    canShowMoreIcon() {
        if (this.extendFilterList.length > 0) {
            this.showMoreIcon = true;
        }
        else {
            this.showMoreIcon = false;
        }
    }
    /**
     * 判断是否所有必填项都填写完毕
     * @param {?} requirelist
     * @return {?}
     */
    canSubmitFilter(requirelist) {
        /** @type {?} */
        let formCanSubmit = false;
        if (!requirelist || !requirelist.length) {
            formCanSubmit = true;
            return formCanSubmit;
        }
        else {
            for (let i = 0; i < requirelist.length; i++) {
                /** @type {?} */
                const item = requirelist[i];
                if (item.control.getControlType() === ControlType.Text) {
                    /** @type {?} */
                    const tv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(tv).length < 0 || !tv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Help) {
                    /** @type {?} */
                    const shv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(shv).length === 0 || !shv.value || !shv.valueField) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DropDown) {
                    /** @type {?} */
                    const ddv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(ddv).length === 0 || !ddv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRange) {
                    /** @type {?} */
                    const drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.DateRangeTime) {
                    /** @type {?} */
                    const drv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(drv).length === 0 || (!drv.startTime && !drv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.MonthRange) {
                    /** @type {?} */
                    const mrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mrv).length === 0 || (!mrv.startTime && !mrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.YearRange) {
                    /** @type {?} */
                    const yrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yrv).length === 0 || (!yrv.startTime && !yrv.endTime)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.NumberRange) {
                    /** @type {?} */
                    const nrv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(nrv).length === 0 || (!nrv.startValue && !nrv.endValue)) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Search) {
                    /** @type {?} */
                    const sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Date) {
                    /** @type {?} */
                    const dv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(dv).length < 0 || !dv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Month) {
                    /** @type {?} */
                    const mv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(mv).length < 0 || !mv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Year) {
                    /** @type {?} */
                    const yv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(yv).length < 0 || !yv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.CheckboxGroup) {
                    /** @type {?} */
                    const cbgv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(cbgv).length === 0 || Object.keys(cbgv.value).length === 0) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.Radio) {
                    /** @type {?} */
                    const ddv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(ddv).length === 0 || !ddv.value) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
                else if (item.control.getControlType() === ControlType.InputGroup) {
                    /** @type {?} */
                    const sv = ((/** @type {?} */ (item.value)));
                    if (Object.keys(sv).length < 0 || !sv.textValue) {
                        formCanSubmit = false;
                        return false;
                    }
                    else {
                        formCanSubmit = true;
                    }
                }
            }
            return formCanSubmit;
        }
    }
    /**
     * 搜索表单变化
     * @param {?} $event
     * @param {?} item
     * @return {?}
     */
    onSearch($event, item) {
        if (this.disabled) {
            return;
        }
        this.conditionChangeHandler(false);
        this.searchChange.emit({ item, conditions: this.listFilterConditions, instance: this });
        this.inSetCurrentFilterConditions();
        this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        if (item.control.isExtend || !this.canSubmit || !this.liveSearch) {
            return;
        }
        this.submit('showFormData', this.listFilterConditions);
    }
    /**
     * 开始筛选
     * @return {?}
     */
    filterClick() {
        if (this.disabled || !this.canSubmit) {
            return;
        }
        this.submit('showFormData', this.listFilterConditions);
    }
    /**
     * 收折部分点击确定提交
     * @return {?}
     */
    listSearch() {
        if (this.disabled || !this.canSubmit) {
            return;
        }
        this.showFilter = false;
        this.submit('extendFormData', this.listFilterConditions);
    }
    /**
     * 取消搜索
     * @return {?}
     */
    listSearchCancel() {
        this.showFilter = false;
    }
    /**
     * 提交表单
     * @param {?} type
     * @param {?} filterlist
     * @return {?}
     */
    submit(type, filterlist) {
        /** @type {?} */
        let queryList;
        queryList = this.handler.setFilterConditions(filterlist);
        if (type == 'extendFormData') {
            if (queryList.length > 0) {
                this.showExpandTag = true;
            }
            else {
                this.showExpandTag = false;
            }
        }
        this.query.emit({ type, data: JSON.stringify(queryList) });
    }
    /**
     * 对外提供获得表单搜索数据
     * @return {?}
     */
    getFilterData() {
        /** @type {?} */
        let queryList;
        queryList = this.handler.setFilterConditions(this.listFilterConditions);
        return JSON.stringify(queryList);
    }
    /**
     * 获取展示在外部的表单长度
     * @return {?}
     */
    getShowLength() {
        if (this.showFilterList) {
            return this.showFilterList.length;
        }
    }
    /**
     * 清空条件
     * @return {?}
     */
    resetSearch() {
        if (this.disabled) {
            return;
        }
        if (this.listFilterConditions && this.listFilterConditions.length) {
            this.listFilterConditions.forEach((/**
             * @param {?} listFilterCondition
             * @return {?}
             */
            listFilterCondition => {
                if (listFilterCondition.control.getControlType() == ControlType.Text) {
                    listFilterCondition.value = new TextValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Search) {
                    listFilterCondition.value = new SearchValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Date) {
                    listFilterCondition.value = new DateValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Month) {
                    listFilterCondition.value = new MonthValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Year) {
                    listFilterCondition.value = new YearValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.DateRange) {
                    listFilterCondition.value = new DateRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.MonthRange) {
                    listFilterCondition.value = new MonthRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.YearRange) {
                    listFilterCondition.value = new YearRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.DropDown) {
                    listFilterCondition.value = new DropDownListValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.NumberRange) {
                    listFilterCondition.value = new NumberRangeValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Help) {
                    listFilterCondition.value = new HelpValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.CheckboxGroup) {
                    listFilterCondition.value = new CheckboxGroupValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.Radio) {
                    listFilterCondition.value = new RadioGroupValue();
                }
                else if (listFilterCondition.control.getControlType() == ControlType.InputGroup) {
                    listFilterCondition.value = new InputGroupValue();
                }
                else {
                    listFilterCondition.value = new TextValue();
                }
            }));
            //  let listFilter = this.listFilterConditions.map(o => Object.assign({}, o));
            /** @type {?} */
            const listFilter = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            o => (Object.assign({}, o))));
            this.listFilterConditions = listFilter;
            this.stagListFilterConditions = this.listFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            o => (Object.assign({}, o))));
            this.requiredListInit();
            //  this.cd.markForCheck();
        }
        this.conditionChangeHandler(false);
        this.clear.emit();
    }
    // 设置默认值
    /**
     * @param {?} fieldConfigs
     * @return {?}
     */
    setFilterValue(fieldConfigs) {
        if (this.UPDATE_FILTER_VALUES_TIMER) {
            clearTimeout(this.UPDATE_FILTER_VALUES_TIMER);
        }
        this.UPDATE_FILTER_VALUES_TIMER = setTimeout((/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const _filters = this.stagListFilterConditions.map((/**
             * @param {?} o
             * @return {?}
             */
            o => (Object.assign({}, o))));
            if (_filters && _filters.length) {
                this.setValues(_filters, fieldConfigs);
                /** @type {?} */
                const listFilter = _filters.map((/**
                 * @param {?} o
                 * @return {?}
                 */
                o => (Object.assign({}, o))));
                this.listFilterConditions = listFilter;
                this.requiredListInit();
                this.conditionChangeHandler();
                this.inSetCurrentFilterConditions();
                //  this.listSearch();
                this.cd.detectChanges();
                this.cd.markForCheck();
                this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
                if (!this.canSubmit) {
                    return;
                }
                this.submit('showFormData', this.listFilterConditions);
            }
        }));
        // this.listFilterConditions = this.stagListFilterConditions.map(o => ({ ...o }));
        // if (this.listFilterConditions && this.listFilterConditions.length) {
        //     this.setValues(this.listFilterConditions, fieldConfigs);
        //     const listFilter = this.listFilterConditions.map(o => ({ ...o }));
        //     this.listFilterConditions = listFilter;
        //     this.requiredListInit();
        //     this.searchChange.emit(this.listFilterConditions);
        //     this.inSetCurrentFilterConditions();
        //     //  this.listSearch();
        //     this.cd.detectChanges();
        //     this.cd.markForCheck();
        //     this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        //     if (!this.canSubmit) {
        //         return;
        //     }
        //     this.submit('showFormData', this.listFilterConditions);
        // }
    }
    // 设置value
    /**
     * @param {?} conditions
     * @param {?} fieldConfigs
     * @return {?}
     */
    setValues(conditions, fieldConfigs) {
        /** @type {?} */
        let qc;
        /** @type {?} */
        let controlType;
        if (fieldConfigs && fieldConfigs.length) {
            fieldConfigs.forEach((/**
             * @param {?} v
             * @return {?}
             */
            v => {
                qc = conditions.find((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c.fieldCode == v.labelCode));
                if (qc) {
                    controlType = this.getControlType(qc);
                    qc.value = this.filterService.setValues(controlType, v.value);
                }
            }));
        }
    }
    /**
     * @param {?} fieldName
     * @return {?}
     */
    getValue(fieldName) {
        /** @type {?} */
        const queryList = this.handler.setFilterConditions(this.listFilterConditions);
        /** @type {?} */
        const item = queryList.find((/**
         * @param {?} n
         * @return {?}
         */
        (n) => n['FilterField'] === fieldName));
        if (item) {
            return item.value;
        }
        return undefined;
    }
    // 必填项初始化
    /**
     * @return {?}
     */
    requiredListInit() {
        /** @type {?} */
        const requiredList = this.listFilterConditions.filter((/**
         * @param {?} listitem
         * @return {?}
         */
        (listitem) => {
            return listitem.control.required;
        }));
        if (requiredList && requiredList.length) {
            this.requiredListFilter = requiredList;
            this.canSubmit = this.canSubmitFilter(this.requiredListFilter);
        }
        else {
            this.requiredListFilter = [];
            this.canSubmit = true;
        }
    }
    /**
     * @param {?} fields
     * @return {?}
     */
    clearFilterValue(fields) {
        if (fields && fields.length) {
            if (typeof fields === 'string') {
                fields = fields.split(',');
            }
            fields = fields.map((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                return n.toLowerCase();
            }));
            this.listFilterConditions.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (fields.indexOf(n.fieldCode.toLowerCase()) > -1) {
                    n.value.clearValue();
                }
            }));
        }
    }
    /**
     * @param {?} values
     * @return {?}
     */
    updateValues(values) {
        if (values && Object.keys(values)) {
            /** @type {?} */
            const fields = Object.keys(values);
            fields.forEach((/**
             * @param {?} f
             * @return {?}
             */
            f => {
                this.listFilterConditions.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    if (fields.indexOf(n.fieldCode.toLowerCase()) > -1) {
                        n.value['value'] = values[f];
                    }
                }));
            }));
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    buildSmartHelpKey(value) {
        if (this.idService) {
            /** @type {?} */
            let prefix = '';
            if (location.hash) {
                /** @type {?} */
                const pathArr = location.hash.split('?');
                prefix = pathArr ? pathArr[0] : '';
            }
            else {
                /** @type {?} */
                const pathArr = location.pathname.split('/');
                prefix = pathArr ? pathArr[pathArr.length - 1] : '';
            }
            return this.idService.encrypt(prefix + '/list-filter/' + value);
        }
        else {
            return 'list-filter/' + value;
        }
    }
    /**
     * @private
     * @param {?=} searchEmit
     * @return {?}
     */
    conditionChangeHandler(searchEmit = true) {
        /** @type {?} */
        const queryList = this.handler.setFilterConditions(this.listFilterConditions);
        this.conditionsChange.emit({ data: JSON.stringify(queryList) });
        if (searchEmit) {
            this.searchChange.emit(this.listFilterConditions);
        }
    }
    /**
     * 浮动筛选面板通过方法展开和关闭
     * @param {?} evt
     * @return {?}
     */
    floatFilterOpen(evt) {
        this.showFilter = !this.showFilter;
        if (this.showFilter) {
            this.overLayService.registerMouseEvent(this.floatPanel.nativeElement, (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (this.floatPanel.nativeElement.contains(e.target)) {
                    return;
                }
                else {
                    if (e.target.nodeName === 'SPAN' && e.target.className.indexOf('f-icon-filtrate')) {
                        return;
                    }
                    /** @type {?} */
                    const cls = ['.f-datepicker-container', '.farris-timer-picker', '.farris-modal', '.f-combo-lookup', '.date-overlay-container'];
                    if (cls.find((/**
                     * @param {?} k
                     * @return {?}
                     */
                    k => e.target.closest(k)))) {
                        return;
                    }
                }
                this.showFilter = false;
                this.overLayService.destory(this.floatPanel.nativeElement);
                this.cd.detectChanges();
            }));
        }
        else {
            this.overLayService.destory(this.floatPanel.nativeElement);
        }
    }
}
ListFilterComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-list-filter',
                template: "<app-filter-common></app-filter-common>\r\n<div class=\"f-list-filter position-relative\"\r\n    [ngClass]=\"{'list-filter-padding': showMoreIcon,'list-filter-autoWidth': autoWidth,'list-filter-paddingnone': filterPaddingNone}\">\r\n    <ng-container *ngIf=\"filterType === 'list';else filterLayout\">\r\n        <div class=\"filter-inputs-main filter-inputs-main-list f-form-layout farris-form farris-form-controls-inline\">\r\n            <ng-container *ngFor=\"let formItem of listFilterConditions;let last = last;\">\r\n                <div class=\"col-12\"\r\n                    [ngClass]=\"{'filter-list-item': showFilterList && showFilterList.length && showFilterList[showFilterList.length-1]['id'] == formItem.id}\"\r\n                    *ngIf=\"!formItem.control.isExtend\">\r\n                    <div class=\"filter-input-list farris-group-wrap\"\r\n                        [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup'}\"\r\n                        [id]=\"'filter-'+formItem.id\">\r\n                        <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                            [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                        <div class=\"filter-search-btn\"\r\n                            *ngIf=\"!liveSearch && showFilterList && showFilterList.length && showFilterList[showFilterList.length-1]['id'] == formItem.id\">\r\n                            <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                                (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                            <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                                (click)=\"resetSearch()\">\r\n                                <span class=\"f-icon f-icon-remove\"></span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </ng-container>\r\n    <ng-template #filterLayout>\r\n        <ng-container *ngIf=\"autoWidth;else gridLayout\">\r\n            <div class=\"filter-inputs-main-basis-wrapper\"\r\n                [ngClass]=\"{'list-filter-wrapper-show-btn': !liveSearch,'list-filter-wrapper-show-btn-remove': !liveSearch && !showMoreIcon}\">\r\n                <div class=\"filter-inputs-main-basis-wrapper-inner\">\r\n                    <div class=\"filter-inputs-main filter-inputs-main-basis farris-form d-flex\"\r\n                        [ngClass]=\"{'justify-content-end': !alLeft,'farris-form-controls-inline':isControlInline}\"\r\n                        #filterMainBasis>\r\n                        <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                            <div *ngIf=\"!formItem.control.isExtend\" class=\"filter-input-list farris-group-wrap\"\r\n                                [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup', 'filter-input-list-expand':formExpand,'filter-input-list-left': alLeft,'filter-input-list-radio': getControlType(formItem) === 'radio','filter-input-list-hasrange':getControlType(formItem).indexOf('range')>-1}\"\r\n                                [id]=\"'filter-'+formItem.id\">\r\n                                <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                    [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n                <div class=\"filter-search-btn\" [ngClass]=\"{'filter-search-btn-remove': !showMoreIcon}\"\r\n                    *ngIf=\"!liveSearch\">\r\n                    <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                        (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                    <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                        (click)=\"resetSearch()\">\r\n                        <span class=\"f-icon f-icon-remove\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <ng-template #gridLayout>\r\n            <div class=\"filter-inputs-main f-form-layout farris-form\" [ngClass]=\"\r\n                {'list-filter-type-1': getShowLength() === 1,\r\n                'list-filter-type-2': getShowLength() === 2,\r\n                'list-filter-type-3': getShowLength() === 3,\r\n                'list-filter-type-4': getShowLength() === 4,\r\n                'list-filter-type-5': getShowLength() === 5,\r\n                'list-filter-type-6': getShowLength() >= 6,\r\n                'list-filter-custom-type': this.filterClass,\r\n                'list-filter-show-reset': !showMoreIcon,\r\n                'list-filter-padding-none': liveSearch,\r\n                'farris-form-controls-inline':isControlInline}\">\r\n                <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                    <div [ngClass]=\"getStyle(formItem)\" *ngIf=\"!formItem.control.isExtend\">\r\n                        <div class=\"filter-input-list farris-group-wrap\"\r\n                            [ngClass]=\"{'filter-input-list-autolabel': autoLabel,'filter-input-list-checkbox': getControlType(formItem) === 'checkboxgroup'}\"\r\n                            [id]=\"'filter-'+formItem.id\">\r\n                            <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n                <div class=\"filter-search-btn\" [ngClass]=\"{\r\n                    'filter-search-btn-type-1': getShowLength() === 1,\r\n                    'filter-search-btn-type-2': getShowLength() === 2,\r\n                    'filter-search-btn-type-3': getShowLength() === 3,\r\n                    'filter-search-btn-type-4': getShowLength() === 4,\r\n                    'filter-search-btn-type-5': getShowLength() === 5,\r\n                    'filter-search-custom-type': this.filterClass,\r\n                    'filter-search-btn-type-6': getShowLength() >= 6}\" *ngIf=\"!liveSearch\">\r\n                    <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                        (click)=\"filterClick()\">{{ 'listFilter.filter' | locale }}</button>\r\n                    <button class=\"btn btn-secondary filter-search-btn-reset\" *ngIf=\"!showMoreIcon\"\r\n                        (click)=\"resetSearch()\">\r\n                        <span class=\"f-icon f-icon-remove\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n    </ng-template>\r\n    <div class=\"filter-expand position-absolute\" [class.active]=\"showFilter\" (click)=\"floatFilterOpen($event)\"\r\n        *ngIf=\"showMoreIcon\">\r\n        <span class=\"f-icon f-icon-filtrate\"></span>\r\n        <span class=\"filter-expand-tag\" *ngIf=\"showExpandTag\"></span>\r\n    </div>\r\n    <div class=\"filter-inputs-extend position-absolute\" [hidden]=\"!showFilter\" *ngIf=\"showMoreIcon\" #floatPanel>\r\n        <div class=\"filter-typelist-arrow\"></div>\r\n        <div class=\"farris-form farris-form-auto\" [ngClass]=\"{'farris-form-controls-inline':isControlInline}\">\r\n            <fieldset class=\"f-section-formgroup\">\r\n                <div class=\"f-section-formgroup-inputs\">\r\n                    <div class=\"col-12\">\r\n                        <ng-container *ngFor=\"let formItem of listFilterConditions\">\r\n                            <div class=\"filter-input-list farris-group-wrap\" *ngIf=\"formItem.control.isExtend\">\r\n                                <ng-container [ngTemplateOutlet]=\"filterInputTemplate\"\r\n                                    [ngTemplateOutletContext]=\"{ item: formItem }\"></ng-container>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <!-- bugNum:456508 -->\r\n            <div class=\"filter-form-btns text-right\">\r\n                <button class=\"btn btn-link filter-form-btn-reset\" (click)=\"resetSearch()\">{{ 'listFilter.reset' |\r\n                    locale }}</button>\r\n                <button class=\"btn btn-secondary\" (click)=\"listSearchCancel()\">{{ 'listFilter.cancel' | locale\r\n                    }}</button>\r\n                <button class=\"btn btn-primary\" [ngClass]=\"{'disabled': disabled || !canSubmit}\"\r\n                    (click)=\"listSearch()\">{{ 'listFilter.confirm' | locale }}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<ng-template #filterInputTemplate let-item=\"item\">\r\n    <ng-container [ngSwitch]=\"item | controlType\">\r\n        <div class=\"filter-input-item filter-type-input\" *ngSwitchCase=\"'input'\">\r\n            <app-filter-input [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-search\" *ngSwitchCase=\"'search'\">\r\n            <app-filter-search [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-search>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'date'\">\r\n            <app-filter-date [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\">\r\n            </app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-year\" *ngSwitchCase=\"'year'\">\r\n            <app-filter-date [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" [showType]=\"'3'\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-month\" *ngSwitchCase=\"'month'\">\r\n            <app-filter-date [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" [showType]=\"'2'\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-date>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterange'\">\r\n            <app-filter-daterange [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\">\r\n            </app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-date\" *ngSwitchCase=\"'daterangetime'\">\r\n            <app-filter-daterange [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" [showTime]=\"true\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-monthrange\" *ngSwitchCase=\"'monthrange'\">\r\n            <app-filter-daterange [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" [showType]=\"'2'\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-yearrange\" *ngSwitchCase=\"'yearrange'\">\r\n            <app-filter-daterange [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" [showType]=\"'3'\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-daterange>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-dropdown\" *ngSwitchCase=\"'dropdown'\">\r\n            <app-filter-dropdown [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" [enableClear]=\"item?.control?.enableClear\" class=\"form-group farris-form-group\">\r\n            </app-filter-dropdown>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-number\" *ngSwitchCase=\"'number'\">\r\n            <app-filter-number [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\">\r\n            </app-filter-number>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-help\" *ngSwitchCase=\"'help'\">\r\n            <app-filter-help [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [instanceId]=\"buildSmartHelpKey(item.fieldCode)\"\r\n                [disabled]=\"disabled\" [hostRef]=\"this\" (searchHandle)=\"onSearch($event,item)\"\r\n                class=\"form-group farris-form-group\"></app-filter-help>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-checkboxgroup\" *ngSwitchCase=\"'checkboxgroup'\">\r\n            <app-filter-checkbox [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-checkbox>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-radio\" *ngSwitchCase=\"'radio'\">\r\n            <app-filter-radio [changeFields]=\"fieldCodeOfClearFields\" [item]=\"item\" [autoLabel]=\"autoLabel\"\r\n                [disabled]=\"disabled\" (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"\r\n                style=\"white-space: nowrap;\"></app-filter-radio>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-input-group\" *ngSwitchCase=\"'input-group'\">\r\n            <app-filter-inputgroup [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\">\r\n            </app-filter-inputgroup>\r\n        </div>\r\n        <div class=\"filter-input-item filter-type-default\" *ngSwitchDefault>\r\n            <app-filter-input [item]=\"item\" [autoLabel]=\"autoLabel\" [disabled]=\"disabled\"\r\n                (searchHandle)=\"onSearch($event,item)\" class=\"form-group farris-form-group\"></app-filter-input>\r\n        </div>\r\n    </ng-container>\r\n</ng-template>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: ["::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}::-webkit-scrollbar-track{border-radius:0}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.filter-search-btn-col{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%}.filter-search-btn-absoulte{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main-basis-wrapper{width:100%;overflow:hidden}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn{position:relative;padding-right:84px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn.list-filter-wrapper-show-btn-remove{padding-right:124px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn .btn{margin-left:6px}.f-list-filter .filter-inputs-main-basis-wrapper.list-filter-wrapper-show-btn .filter-search-btn .btn:first-child{margin-left:0}.f-list-filter .filter-inputs-main-basis-wrapper .filter-inputs-main-basis-wrapper-inner{width:100%;overflow:auto}.f-list-filter .filter-inputs-main-basis-wrapper .filter-inputs-main-basis-wrapper-inner .filter-inputs-main-basis.justify-content-end{margin-left:auto}.f-list-filter.list-filter-padding{padding-right:45px}.f-list-filter.list-filter-autoWidth{padding-bottom:8px}.f-list-filter.list-filter-autoWidth.list-filter-paddingnone{padding-bottom:0}@media (min-width:768px){.f-list-filter .list-filter-type-1{position:static;padding-right:0}.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:relative;padding-right:70px}}@media (max-width:767px){.f-list-filter .list-filter-type-1{position:relative;padding-right:70px}.f-list-filter .list-filter-type-1.list-filter-show-reset{padding-right:110px}.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:relative;padding-right:70px}.f-list-filter .list-filter-type-2.list-filter-show-reset,.f-list-filter .list-filter-type-3.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:1200px){.f-list-filter .list-filter-type-2,.f-list-filter .list-filter-type-3{position:static;padding-right:0}.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}}@media (max-width:767px){.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:768px){.f-list-filter .list-filter-type-2.list-filter-show-reset,.f-list-filter .list-filter-type-3.list-filter-show-reset{position:relative;padding-right:110px}.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:relative;padding-right:70px}.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}@media (min-width:1690px){.f-list-filter .list-filter-type-4,.f-list-filter .list-filter-type-5{position:static;padding-right:0}}@media (min-width:1200px){.f-list-filter .list-filter-type-4.list-filter-show-reset,.f-list-filter .list-filter-type-5.list-filter-show-reset{position:relative;padding-right:110px}}.f-list-filter .list-filter-custom-type,.f-list-filter .list-filter-type-6{position:relative;padding-right:70px}.f-list-filter .list-filter-custom-type.list-filter-show-reset,.f-list-filter .list-filter-type-6.list-filter-show-reset{padding-right:110px}.f-list-filter .list-filter-padding-none{padding-right:0}.f-list-filter .filter-inputs-main{width:100%;overflow:hidden}.f-list-filter .filter-inputs-main .col-12{padding-left:0}.f-list-filter .filter-inputs-main.filter-inputs-main-padding{padding-right:70px;position:relative}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-autolabel{padding-right:14px}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-autolabel:last-child{padding-right:0}.f-list-filter .filter-inputs-main .filter-input-list.filter-input-list-checkbox{max-width:none;-webkit-box-flex:inherit;flex:inherit}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-1{position:absolute;right:0;top:0}}@media (min-width:768px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-1{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{position:absolute;right:0;top:0}}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{position:absolute;right:0;top:0}}@media (min-width:1200px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-2,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-3{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (max-width:767px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (min-width:768px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{position:absolute;right:0;top:0}}@media (min-width:1690px){.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-4,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-5{flex-basis:0;-webkit-box-flex:1;flex-grow:1;max-width:100%;position:static}}.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-btn-type-6,.f-list-filter .filter-inputs-main .filter-search-btn.filter-search-custom-type{position:absolute;right:0;top:0}.f-list-filter .filter-inputs-main .filter-search-btn .btn{margin-left:6px}.f-list-filter .filter-inputs-main .filter-search-btn .btn:first-child{margin-left:0}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list{min-width:200px}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list .filter-input-item .form-group{margin-bottom:0}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list.filter-input-list-left{-webkit-box-flex:1;flex:1 1 auto;width:0}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list.filter-input-list-expand{max-width:none}.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list-hasrange.filter-input-list-left,.f-list-filter .filter-inputs-main.filter-inputs-main-basis .filter-input-list-radio.filter-input-list-left{width:auto}.f-list-filter .filter-inputs-main.filter-inputs-main-basis.justify-content-end .filter-input-list:not(.filter-input-list-checkbox){-webkit-box-flex:1;flex:auto}.f-list-filter .filter-expand{right:0;top:0;width:24px;margin-left:21px;height:24px;line-height:24px;cursor:pointer}.f-list-filter .filter-expand.active{border-radius:2px}.f-list-filter .filter-expand .f-icon{display:block;line-height:24px;margin:0 auto;font-size:18px}.f-list-filter .filter-expand .filter-expand-tag{position:absolute;right:0;top:0;display:block;width:6px;height:6px;border-radius:50%}.f-list-filter .filter-inputs-extend{width:429px;right:0;top:34px;background-color:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.15);z-index:900;padding:20px 0}.f-list-filter .filter-inputs-extend .filter-typelist-arrow{display:block;position:absolute;right:7px;top:-4px;width:8.48528137px;height:8.48528137px;background:0 0;border-style:solid;border-width:4.24264069px;box-shadow:-2px -2px 5px rgba(0,0,0,.08);-webkit-transform:translateX(-50%) rotate(45deg);transform:translateX(-50%) rotate(45deg);border-color:#fff transparent transparent #fff}.f-list-filter .filter-inputs-extend .filter-form-btns{margin-top:6px;padding:0 14px}.f-list-filter .filter-inputs-extend .filter-form-btns .btn{margin-left:6px}.f-list-filter .filter-inputs-extend .filter-form-btns .filter-form-btn-reset{position:relative;padding-right:10px;margin-right:4px}.f-list-filter .filter-inputs-extend .filter-form-btns .filter-form-btn-reset::after{content:'';position:absolute;right:0;top:50%;width:1px;height:16px;margin-top:-8px;background:#d9d9d9}.f-list-filter .filter-search-btn-reset{padding-left:4px;padding-right:4px;color:rgba(0,0,0,.65)}.f-list-filter .filter-input-list .form-group{display:block}.f-list-filter .farris-form-controls-inline .filter-input-list .form-group{display:-webkit-box;display:flex}.f-list-filter .filter-inputs-main-list .filter-input-item .farris-form-group{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.f-list-filter .filter-inputs-main-list .filter-list-item{padding-right:100px}.f-list-filter .filter-inputs-main-list .filter-list-item .filter-input-list{position:relative}.f-list-filter .filter-inputs-main-list .filter-list-item .filter-search-btn{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;position:absolute;top:50%;left:calc(100% + 20px);-webkit-transform:translateY(-50%);transform:translateY(-50%)}.filter-expand-simulate{opacity:0;display:inline-block;width:24px;height:24px;padding-left:21px}.filter-expand-simulate .f-icon{font-size:24px}"]
            }] }
];
/** @nocollapse */
ListFilterComponent.ctorParameters = () => [
    { type: ListFilterService },
    { type: ChangeDetectorRef },
    { type: QuerySolutionService },
    { type: ConvertorService },
    { type: Renderer2 },
    { type: Injector, decorators: [{ type: Optional }] }
];
ListFilterComponent.propDecorators = {
    filterMainBasisRef: [{ type: ViewChild, args: ['filterMainBasis',] }],
    floatPanel: [{ type: ViewChild, args: ['floatPanel',] }],
    alLeft: [{ type: Input }],
    autoWidth: [{ type: Input }],
    liveSearch: [{ type: Input }],
    autoLabel: [{ type: Input }],
    disabled: [{ type: Input }],
    filterClass: [{ type: Input }],
    filterPaddingNone: [{ type: Input }],
    filterType: [{ type: Input }],
    defaultEmptyValueSearch: [{ type: Input }],
    defaultValue: [{ type: Input }],
    query: [{ type: Output }],
    clear: [{ type: Output }],
    searchChange: [{ type: Output }],
    conditionsChange: [{ type: Output }],
    isControlInline: [{ type: Input }],
    filterList: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ListFilterComponent.prototype.filterMainBasisRef;
    /** @type {?} */
    ListFilterComponent.prototype.floatPanel;
    /** @type {?} */
    ListFilterComponent.prototype.alLeft;
    /** @type {?} */
    ListFilterComponent.prototype.autoWidth;
    /** @type {?} */
    ListFilterComponent.prototype.liveSearch;
    /** @type {?} */
    ListFilterComponent.prototype.autoLabel;
    /** @type {?} */
    ListFilterComponent.prototype.disabled;
    /** @type {?} */
    ListFilterComponent.prototype.filterClass;
    /** @type {?} */
    ListFilterComponent.prototype.filterPaddingNone;
    /** @type {?} */
    ListFilterComponent.prototype.filterType;
    /** @type {?} */
    ListFilterComponent.prototype._defaultValue;
    /** @type {?} */
    ListFilterComponent.prototype.defaultEmptyValueSearch;
    /** @type {?} */
    ListFilterComponent.prototype.query;
    /** @type {?} */
    ListFilterComponent.prototype.clear;
    /** @type {?} */
    ListFilterComponent.prototype.searchChange;
    /** @type {?} */
    ListFilterComponent.prototype.conditionsChange;
    /** @type {?} */
    ListFilterComponent.prototype.filterDatas;
    /** @type {?} */
    ListFilterComponent.prototype.showExpandTag;
    /**
     * 搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype._filterList;
    /**
     * 是否需要显示展开更多icon
     * @type {?}
     */
    ListFilterComponent.prototype.showMoreIcon;
    /** @type {?} */
    ListFilterComponent.prototype.showFilter;
    /** @type {?} */
    ListFilterComponent.prototype.formExpand;
    /**
     * 循环表单
     * @type {?}
     */
    ListFilterComponent.prototype.listFilterConditions;
    /**
     * 用来存储setvalue前数据
     * @type {?}
     */
    ListFilterComponent.prototype.stagListFilterConditions;
    /**
     * 记录默认收起的搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype.extendFilterList;
    /**
     * 记录显示的搜索表单列表
     * @type {?}
     */
    ListFilterComponent.prototype.showFilterList;
    /**
     * 显示中表单的必填项
     * @type {?}
     */
    ListFilterComponent.prototype.requiredListFilter;
    /**
     * 表单是否允许提交
     * @type {?}
     */
    ListFilterComponent.prototype.canSubmit;
    /**
     * 扩展表单是否允许提交
     * @type {?}
     */
    ListFilterComponent.prototype.localeIds;
    /** @type {?} */
    ListFilterComponent.prototype.currentLocale;
    /** @type {?} */
    ListFilterComponent.prototype.isControlInline;
    /**
     * 组件服务接口
     * @type {?}
     */
    ListFilterComponent.prototype.listfilterHandler;
    /** @type {?} */
    ListFilterComponent.prototype.fieldCodeOfClearFields;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.idService;
    /** @type {?} */
    ListFilterComponent.prototype.UPDATE_FILTER_VALUES_TIMER;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.handler;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.convertorService;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    ListFilterComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1maWx0ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1saXN0LWZpbHRlci8iLCJzb3VyY2VzIjpbImxpYi9saXN0LWZpbHRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBaUIsaUJBQWlCLEVBQ3JFLHVCQUF1QixFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUN6RCxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUN4RCxNQUFNLGVBQWUsQ0FBQztBQUd2QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbkQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDbEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDL0UsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzlELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUM5RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUM5RSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDeEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDM0UsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUM5RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUVoRixPQUFPLEVBQXFCLHdCQUF3QixFQUFFLE1BQU0sK0JBQStCLENB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RTNDLGlEQUErQzs7Ozs7SUFJL0Msd0NBQWtCOzs7OztJQUlsQix3Q0FHRTs7SUFDRiw0Q0FBeUI7O0lBQ3pCLDhDQUFnQzs7Ozs7SUFjaEMsZ0RBQXFDOztJQUVyQyxxREFBMkM7Ozs7O0lBRTNDLHdDQUE2Qjs7SUFDN0IseURBQWtDOzs7OztJQUNsQyw2Q0FBb0Q7Ozs7O0lBRWhELDRDQUF3Qzs7Ozs7SUFDeEMsaUNBQTZCOzs7OztJQUM3QixzQ0FBcUM7Ozs7O0lBQ3JDLCtDQUEwQzs7Ozs7SUFDMUMscUNBQXlCOzs7OztJQUN6Qix1Q0FBc0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBFbGVtZW50UmVmLFxyXG4gICAgUmVuZGVyZXIyLCBJbmplY3RvciwgTE9DQUxFX0lELCBPcHRpb25hbCwgSW5qZWN0RmxhZ3MsIE9uRGVzdHJveVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGaWVsZENvbmZpZyB9IGZyb20gJy4vZW50aXR5L2ZpZWxkY29uZmlnL2ZpZWxkY29uZmlnJztcclxuaW1wb3J0IHsgUXVlcnlDb25kaXRpb24gfSBmcm9tICcuL2VudGl0eS9xdWVyeWNvbmRpdGlvbic7XHJcbmltcG9ydCB7IENvbnRyb2xUeXBlIH0gZnJvbSAnLi9lbnRpdHkvY29udHJvbHR5cGUnO1xyXG5pbXBvcnQgeyBMaXN0RmlsdGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZS9saXN0LWZpbHRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUXVlcnlTb2x1dGlvblNlcnZpY2UgfSBmcm9tICcuL3N1Ym1pdGhhbmRsZXJzL3F1ZXJ5LXNvbHV0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb252ZXJ0b3JTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2NvbnZlcnRvcnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUZXh0VmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS90ZXh0dmFsdWUnO1xyXG5pbXBvcnQgeyBIZWxwVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9oZWxwdmFsdWUnO1xyXG5pbXBvcnQgeyBEcm9wRG93bkxpc3RWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2Ryb3Bkb3dubGlzdHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVJhbmdlVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9kYXRlcmFuZ2V2YWx1ZSc7XHJcbmltcG9ydCB7IE51bWJlclJhbmdlVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9udW1iZXJyYW5nZXZhdWUnO1xyXG5pbXBvcnQgeyBTZWFyY2hWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3NlYXJjaHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXZhbHVlJztcclxuaW1wb3J0IHsgQ2hlY2tib3hHcm91cFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvY2hlY2tib3hncm91cHZhbHVlJztcclxuaW1wb3J0IHsgRGF0ZVJhbmdlVGltZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvZGF0ZXJhbmdldGltZXZhbHVlJztcclxuaW1wb3J0IHsgTGlzdEZpbHRlckhhbmRsZXIsIExJU1RGSUxURVJfSEFORExFUl9UT0tFTiB9IGZyb20gJy4vaW50ZXJmYWNlL0lpc3RGaWx0ZXJIYW5kbGVyJztcclxuaW1wb3J0IHsgUmFkaW9Hcm91cFZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvcmFkaW92YWx1ZSc7XHJcbmltcG9ydCB7IE1vbnRoVmFsdWUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb252YWx1ZS9tb250aCc7XHJcbmltcG9ydCB7IFllYXJWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL3llYXJ2YWx1ZSc7XHJcbmltcG9ydCB7IFllYXJSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUveWVhcnJhbmdlJztcclxuaW1wb3J0IHsgTW9udGhSYW5nZVZhbHVlIH0gZnJvbSAnLi9lbnRpdHkvY29uZGl0aW9udmFsdWUvbW9udGhyYW5nZSc7XHJcbmltcG9ydCB7IElucHV0R3JvdXBWYWx1ZSB9IGZyb20gJy4vZW50aXR5L2NvbmRpdGlvbnZhbHVlL2lucHV0Z3JvdXAnO1xyXG5pbXBvcnQgeyBJZFNlcnZpY2UsIE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1saXN0LWZpbHRlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vbGlzdC1maWx0ZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vbGlzdC1maWx0ZXIuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBMaXN0RmlsdGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LE9uRGVzdHJveSB7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZmlsdGVyTWFpbkJhc2lzJykgZmlsdGVyTWFpbkJhc2lzUmVmOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZmxvYXRQYW5lbCcpIGZsb2F0UGFuZWw6IEVsZW1lbnRSZWY7XHJcbiAgICAvLyAg6KGo5Y2V5bem5a+56b2QXHJcbiAgICBASW5wdXQoKSBhbExlZnQgPSBmYWxzZTtcclxuICAgIC8vICDlubPliIbnqbrpl7RcclxuICAgIEBJbnB1dCgpIGF1dG9XaWR0aCA9IHRydWU7XHJcbiAgICAvLyAg5a6e5pe25pCc57SiXHJcbiAgICBASW5wdXQoKSBsaXZlU2VhcmNoID0gZmFsc2U7XHJcbiAgICAvLyAgbGFiZWznmoTlrr3luqbmmK/lkKboh6rpgILlupRcclxuICAgIEBJbnB1dCgpIGF1dG9MYWJlbCA9IGZhbHNlO1xyXG4gICAgLy8gIOaYr+WQpuemgeeUqFxyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaWx0ZXJDbGFzczogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgZmlsdGVyUGFkZGluZ05vbmUgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaWx0ZXJUeXBlOiBzdHJpbmc7XHJcbiAgICAvLyDliJ3lp4vljJblgLxcclxuICAgIF9kZWZhdWx0VmFsdWU6IEZpZWxkQ29uZmlnW107XHJcbiAgICAvLyDpu5jorqTlgLzmmK/nqbrlgLzml7bmiafooYzmn6Xor6LvvIzlhbzlrrnml6fmlrnlvI9cclxuICAgIEBJbnB1dCgpIGRlZmF1bHRFbXB0eVZhbHVlU2VhcmNoPXRydWU7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRlZmF1bHRWYWx1ZShjb25maWdzOiBGaWVsZENvbmZpZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gY29uZmlncztcclxuICAgICAgICBsZXQgY2FuRmlsdGVyPXRoaXMuZGVmYXVsdEVtcHR5VmFsdWVTZWFyY2h8fGNvbmZpZ3MmJmNvbmZpZ3MubGVuZ3RoPjA7XHJcbiAgICAgICAgaWYoY2FuRmlsdGVyKXtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlclZhbHVlKHRoaXMuX2RlZmF1bHRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBAT3V0cHV0KCkgcXVlcnkgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNvbmRpdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgZmlsdGVyRGF0YXM6IEFycmF5PEZpZWxkQ29uZmlnPjtcclxuICAgIC8vICBmaWx0ZXJXaWR0aDpudW1iZXIgPSAxMDAwO1xyXG4gICAgLy8gIOagh+iusOaYr+WQpuaciea7muWKqOadoVxyXG4gICAgLy8gIGhhc1Njcm9sbCA9IHRydWU7XHJcbiAgICAvLyAg6ZyA6KaB55uR5ZCs5pS25oqY55qE6KGo5Y2VXHJcbiAgICAvLyAgcmVzaXplR3JvdXBzOiBsaXN0RmlsdGVyR3JvdXA7XHJcbiAgICAvLyDnrZvpgIlpY29u6YOo5YiG5bCP57qi54K5XHJcbiAgICBzaG93RXhwYW5kVGFnID0gZmFsc2U7XHJcbiAgICAvLyAg5ZON5bqU5byP5a655ZmoXHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplZENvbnRhaW5lcicpIHJlc2l6ZWRDb250YWluZXJFbDtcclxuICAgIC8vICDlk43lupTlvI/lhoXlrrnlrrnlmahcclxuICAgIC8vICBAVmlld0NoaWxkKCdyZXNpemVkQ29udGVudCcpIHJlc2l6ZWRDb250ZW50RWw7XHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplTGlzdHMnKSByZXNpemVMaXN0c0VsO1xyXG4gICAgLy8gIEBWaWV3Q2hpbGQoJ3NpbXVsYXRlRXh0ZW5kJykgc2ltdWxhdGVFeHRlbmRFbDtcclxuXHJcbiAgICAvLyAgQFZpZXdDaGlsZCgncmVzaXplZENvbnRhaW5lcicsIHsgcmVhZDogRlJlc2l6ZWREaXJlY3RpdmUgfSlcclxuICAgIC8vICByZXNpemVkQ29udGFpbmVyRGlyZWN0aXZlOiBGUmVzaXplZERpcmVjdGl2ZTtcclxuXHJcbiAgICAvKiog5pCc57Si6KGo5Y2V5YiX6KGoICovXHJcbiAgICBfZmlsdGVyTGlzdDogQXJyYXk8YW55PjtcclxuXHJcbiAgICAvKiog5piv5ZCm6ZyA6KaB5pi+56S65bGV5byA5pu05aSaaWNvbiAqL1xyXG4gICAgc2hvd01vcmVJY29uID0gZmFsc2U7XHJcbiAgICAvLyAgbW9yZUljb25XaWR0aDpudW1iZXIgPSAwO1xyXG4gICAgc2hvd0ZpbHRlciA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5bGV546w5Ye655qE5Y+q5pyJ5LiA5Liq5pCc57Si5o6n5Lu2XHJcbiAgICBmb3JtRXhwYW5kID0gZmFsc2U7XHJcbiAgICAvLyDmj5DkuqTooajljZXmlbDmja5cclxuICAgIC8vICBxdWVyeUxpc3Q7XHJcbiAgICAvLyDpmpDol4/mj5DkuqTooajljZXmlbDmja5cclxuICAgIC8vICBleHRlbmRxdWVyeUxpc3Q7XHJcbiAgICAvKiog5b6q546v6KGo5Y2VICovXHJcbiAgICBsaXN0RmlsdGVyQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgLyoqIOeUqOadpeWtmOWCqHNldHZhbHVl5YmN5pWw5o2uICovXHJcbiAgICBzdGFnTGlzdEZpbHRlckNvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIC8qKiDorrDlvZXpu5jorqTmlLbotbfnmoTmkJzntKLooajljZXliJfooaggKi9cclxuICAgIGV4dGVuZEZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOiusOW9leaYvuekuueahOaQnOe0ouihqOWNleWIl+ihqCAqL1xyXG4gICAgc2hvd0ZpbHRlckxpc3Q6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOaYvuekuuS4reihqOWNleeahOW/heWhq+mhuSAqL1xyXG4gICAgcmVxdWlyZWRMaXN0RmlsdGVyOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBbXTtcclxuICAgIC8qKiDpmpDol4/kuK3ooajljZXnmoTlv4XloavpobkgKi9cclxuICAgIC8vICBleHRlbmRSZXF1aXJlZExpc3RGaWx0ZXI6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiA9IFtdO1xyXG4gICAgLyoqIOihqOWNleaYr+WQpuWFgeiuuOaPkOS6pCAqL1xyXG4gICAgY2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAvKiog5omp5bGV6KGo5Y2V5piv5ZCm5YWB6K645o+Q5LqkICovXHJcbiAgICAvLyAgZXh0ZW5kQ2FuU3VibWl0OmJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBsb2NhbGVJZHMgPSB7XHJcbiAgICAgICAgZW46ICdlbicsXHJcbiAgICAgICAgJ3poLUNIUyc6ICd6aC1DSFMnXHJcbiAgICB9O1xyXG4gICAgY3VycmVudExvY2FsZSA9ICd6aC1DSFMnO1xyXG4gICAgQElucHV0KCkgaXNDb250cm9sSW5saW5lID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGZpbHRlckxpc3QoKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbHRlckxpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgZmlsdGVyTGlzdChmaWx0ZXJMaXN0OiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyTGlzdCA9IGZpbHRlckxpc3Q7XHJcbiAgICAgICAgdGhpcy5pbml0RmlsdGVyTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uE5Lu25pyN5Yqh5o6l5Y+jXHJcbiAgICAgKi9cclxuICAgIGxpc3RmaWx0ZXJIYW5kbGVyOiBMaXN0RmlsdGVySGFuZGxlcjtcclxuICAgIFxyXG4gICAgZmllbGRDb2RlT2ZDbGVhckZpZWxkczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgaWRTZXJ2aWNlOiBJZFNlcnZpY2U7XHJcbiAgICBVUERBVEVfRklMVEVSX1ZBTFVFU19USU1FUiA9IG51bGw7XHJcbiAgICBwcml2YXRlIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGZpbHRlclNlcnZpY2U6IExpc3RGaWx0ZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlcjogUXVlcnlTb2x1dGlvblNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjb252ZXJ0b3JTZXJ2aWNlOiBDb252ZXJ0b3JTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICApIHtcclxuICAgICAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhbGUgPSB0aGlzLmluamVjdG9yLmdldChMT0NBTEVfSUQpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RmaWx0ZXJIYW5kbGVyID0gdGhpcy5pbmplY3Rvci5nZXQ8TGlzdEZpbHRlckhhbmRsZXI+KExJU1RGSUxURVJfSEFORExFUl9UT0tFTiwgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgICAgICAgICB0aGlzLmlkU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KElkU2VydmljZSk7XHJcbiAgICAgICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChPdmVyTGF5SGlkZGVuU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5vdmVyTGF5U2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLmN1cnJlbnRMb2NhbGUgPT09IHRoaXMubG9jYWxlSWRzWydlbiddKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaXNDb250cm9sSW5saW5lID0gZmFsc2U7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5pc0NvbnRyb2xJbmxpbmUgPSB0cnVlO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLmNhblNob3dNb3JlSWNvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRvV2lkdGggJiYgIXRoaXMuZm9ybUV4cGFuZCAmJiB0aGlzLmZpbHRlck1haW5CYXNpc1JlZikge1xyXG4gICAgICAgICAgICBjb25zdCBiYXNpY0xpc3QgPSB0aGlzLmZpbHRlck1haW5CYXNpc1JlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXItaW5wdXQtbGlzdCcpO1xyXG4gICAgICAgICAgICBsZXQgYmFzaWNXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChiYXNpY0xpc3QgJiYgYmFzaWNMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBiYXNpY0xpc3QubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZXID0gTWF0aC5jZWlsKHBhcnNlRmxvYXQoYmFzaWNMaXN0W2tdLm9mZnNldFdpZHRoIHx8IDApKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2ZmVyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzaWNXaWR0aCArPSBvZmZXO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmFzaWNXaWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZmlsdGVyTWFpbkJhc2lzUmVmLm5hdGl2ZUVsZW1lbnQsICd3aWR0aCcsIGJhc2ljV2lkdGggKyAncHgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpe1xyXG4gICAgICAgIGlmICh0aGlzLmZsb2F0UGFuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZmxvYXRQYW5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5Yid5aeL5YyW5aSE55CG6KGo5Y2V5pWw5o2uICovXHJcbiAgICBpbml0RmlsdGVyTGlzdCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kRmlsdGVyTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpbHRlckxpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLmZpbHRlckRhdGFzID0gdGhpcy5maWx0ZXJTZXJ2aWNlLmZpZWxkU2NoZW1hc0NvbnZlcnQodGhpcy5fZmlsdGVyTGlzdCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyRGF0YXMgJiYgdGhpcy5maWx0ZXJEYXRhcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyA9IHRoaXMuY29udmVydG9yU2VydmljZS5nZXRTZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyh0aGlzLmZpbHRlckRhdGFzLCB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFnTGlzdEZpbHRlckNvbmRpdGlvbnMgPSB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLm1hcChvID0+ICh7IC4uLm8gfSkpO1xyXG4gICAgICAgICAgICAvLyDlrZjlgqjmianlsZXpobnlkozpu5jorqTlsZXnpLrooajljZVcclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5jb250cm9sLmlzRXh0ZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRGaWx0ZXJMaXN0LnB1c2goZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWx0ZXJMaXN0LnB1c2goZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5piv5bem5a+56b2QIOWPquacieS4gOS4quaQnOe0olxyXG4gICAgICAgICAgICBjb25zdCBfYmFzaXNGaWx0ZXJMaXN0ID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5maWx0ZXIoKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWZpZWxkLmNvbnRyb2wuaXNFeHRlbmQ7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmIChfYmFzaXNGaWx0ZXJMaXN0ICYmIF9iYXNpc0ZpbHRlckxpc3QubGVuZ3RoID09PSAxICYmIHRoaXMuZ2V0Q29udHJvbFR5cGUoX2Jhc2lzRmlsdGVyTGlzdFswXSkgPT09ICdzZWFyY2gnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1FeHBhbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uQ2hhbmdlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmluU2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgLy8g5a2Y5YKo6buY6K6k5bGV56S65Lit5b+F5aGr6aG5XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0SW5pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhblNob3dNb3JlSWNvbigpO1xyXG4gICAgICAgICAgICAvLyAgdGhpcy5saXN0U2VhcmNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RmaWx0ZXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGZpbHRlckhhbmRsZXIuc2V0Q3VycmVudEZpbHRlckNvbmRpdGlvbnModGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaOp+S7tuexu+Wei1xyXG4gICAgICogQHBhcmFtIHNlbGVjdGVkRmllbGRDb25kaXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0Q29udHJvbFR5cGUoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbjogUXVlcnlDb25kaXRpb24pOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2lucHV0JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5TZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2RhdGUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ21vbnRoJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3llYXInO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdkYXRlcmFuZ2UnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZGF0ZXJhbmdldGltZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTW9udGhSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdtb250aHJhbmdlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAneWVhcnJhbmdlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5Ecm9wRG93bikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdkcm9wZG93bic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTnVtYmVyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbnVtYmVyJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZEZpZWxkQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5IZWxwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hlbHAnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY2hlY2tib3hncm91cCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGaWVsZENvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuUmFkaW8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAncmFkaW8nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRmllbGRDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLklucHV0R3JvdXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaW5wdXQtZ3JvdXAnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdpbnB1dCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqIOiOt+W+l+exu+WQjSAqL1xyXG4gICAgZ2V0U3R5bGUoY3VycmVudEl0ZW06IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmR0aW9uU3R5bGUgPSAnY29sLTEyIGNvbC1tZC02IGNvbC14bC0zIGNvbC1lbC0yJztcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlsdGVyQ2xhc3MgJiYgIXRoaXMuYXV0b1dpZHRoKSA/IHRoaXMuZmlsdGVyQ2xhc3MgOiBkZWZhdWx0Q29uZHRpb25TdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm6ZyA6KaB5pi+56S65pu05aSa5oyJ6ZKuICovXHJcbiAgICBjYW5TaG93TW9yZUljb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kRmlsdGVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd01vcmVJY29uID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dNb3JlSWNvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5Yik5pat5piv5ZCm5omA5pyJ5b+F5aGr6aG56YO95aGr5YaZ5a6M5q+VICovXHJcbiAgICBjYW5TdWJtaXRGaWx0ZXIocmVxdWlyZWxpc3QpIHtcclxuICAgICAgICBsZXQgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghcmVxdWlyZWxpc3QgfHwgIXJlcXVpcmVsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1DYW5TdWJtaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1aXJlbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlcXVpcmVsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHYgPSAoaXRlbS52YWx1ZSBhcyBUZXh0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0dikubGVuZ3RoIDwgMCB8fCAhdHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuSGVscCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNodiA9IChpdGVtLnZhbHVlIGFzIEhlbHBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHNodikubGVuZ3RoID09PSAwIHx8ICFzaHYudmFsdWUgfHwgIXNodi52YWx1ZUZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGR2ID0gKGl0ZW0udmFsdWUgYXMgRHJvcERvd25MaXN0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkZHYpLmxlbmd0aCA9PT0gMCB8fCAhZGR2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZHJ2KS5sZW5ndGggPT09IDAgfHwgKCFkcnYuc3RhcnRUaW1lICYmICFkcnYuZW5kVGltZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuRGF0ZVJhbmdlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRydiA9IChpdGVtLnZhbHVlIGFzIERhdGVSYW5nZVRpbWVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRydikubGVuZ3RoID09PSAwIHx8ICghZHJ2LnN0YXJ0VGltZSAmJiAhZHJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLk1vbnRoUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtcnYgPSAoaXRlbS52YWx1ZSBhcyBNb250aFJhbmdlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtcnYpLmxlbmd0aCA9PT0gMCB8fCAoIW1ydi5zdGFydFRpbWUgJiYgIW1ydi5lbmRUaW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5ZZWFyUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB5cnYgPSAoaXRlbS52YWx1ZSBhcyBZZWFyUmFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHlydikubGVuZ3RoID09PSAwIHx8ICgheXJ2LnN0YXJ0VGltZSAmJiAheXJ2LmVuZFRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLk51bWJlclJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnJ2ID0gKGl0ZW0udmFsdWUgYXMgTnVtYmVyUmFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ydikubGVuZ3RoID09PSAwIHx8ICghbnJ2LnN0YXJ0VmFsdWUgJiYgIW5ydi5lbmRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3YgPSAoaXRlbS52YWx1ZSBhcyBTZWFyY2hWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN2KS5sZW5ndGggPCAwIHx8ICFzdi52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHYgPSAoaXRlbS52YWx1ZSBhcyBEYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkdikubGVuZ3RoIDwgMCB8fCAhZHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuTW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtdiA9IChpdGVtLnZhbHVlIGFzIE1vbnRoVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhtdikubGVuZ3RoIDwgMCB8fCAhbXYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHl2ID0gKGl0ZW0udmFsdWUgYXMgWWVhclZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoeXYpLmxlbmd0aCA8IDAgfHwgIXl2LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DYW5TdWJtaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IENvbnRyb2xUeXBlLkNoZWNrYm94R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYmd2ID0gKGl0ZW0udmFsdWUgYXMgQ2hlY2tib3hHcm91cFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2JndikubGVuZ3RoID09PSAwIHx8IE9iamVjdC5rZXlzKGNiZ3YudmFsdWUpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09PSBDb250cm9sVHlwZS5SYWRpbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRkdiA9IChpdGVtLnZhbHVlIGFzIFJhZGlvR3JvdXBWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRkdikubGVuZ3RoID09PSAwIHx8ICFkZHYudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNhblN1Ym1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PT0gQ29udHJvbFR5cGUuSW5wdXRHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN2ID0gKGl0ZW0udmFsdWUgYXMgSW5wdXRHcm91cFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3YpLmxlbmd0aCA8IDAgfHwgIXN2LnRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtQ2FuU3VibWl0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKiog5pCc57Si6KGo5Y2V5Y+Y5YyWICovXHJcbiAgICBvblNlYXJjaCgkZXZlbnQsIGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLmNvbmRpdGlvbkNoYW5nZUhhbmRsZXIoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlLmVtaXQoeyBpdGVtLCBjb25kaXRpb25zOiB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zLCBpbnN0YW5jZTogdGhpc30pO1xyXG4gICAgICAgIHRoaXMuaW5TZXRDdXJyZW50RmlsdGVyQ29uZGl0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuY2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIpO1xyXG4gICAgICAgIGlmIChpdGVtLmNvbnRyb2wuaXNFeHRlbmQgfHwgIXRoaXMuY2FuU3VibWl0IHx8ICF0aGlzLmxpdmVTZWFyY2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN1Ym1pdCgnc2hvd0Zvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcbiAgICAvKiog5byA5aeL562b6YCJICovXHJcbiAgICBmaWx0ZXJDbGljaygpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5jYW5TdWJtaXQpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgdGhpcy5zdWJtaXQoJ3Nob3dGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgLyoqIOaUtuaKmOmDqOWIhueCueWHu+ehruWumuaPkOS6pCAqL1xyXG4gICAgbGlzdFNlYXJjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5jYW5TdWJtaXQpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgdGhpcy5zaG93RmlsdGVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQoJ2V4dGVuZEZvcm1EYXRhJywgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcbiAgICAvKiog5Y+W5raI5pCc57SiICovXHJcbiAgICBsaXN0U2VhcmNoQ2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpbHRlciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqIOaPkOS6pOihqOWNlSAqL1xyXG4gICAgc3VibWl0KHR5cGUsIGZpbHRlcmxpc3QpIHtcclxuICAgICAgICBsZXQgcXVlcnlMaXN0O1xyXG4gICAgICAgIHF1ZXJ5TGlzdCA9IHRoaXMuaGFuZGxlci5zZXRGaWx0ZXJDb25kaXRpb25zKGZpbHRlcmxpc3QpO1xyXG4gICAgICAgIGlmICh0eXBlID09ICdleHRlbmRGb3JtRGF0YScpIHtcclxuICAgICAgICAgICAgaWYgKHF1ZXJ5TGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFeHBhbmRUYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXhwYW5kVGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5xdWVyeS5lbWl0KHsgdHlwZSwgZGF0YTogSlNPTi5zdHJpbmdpZnkocXVlcnlMaXN0KSB9KTtcclxuICAgIH1cclxuICAgIC8qKiDlr7nlpJbmj5DkvpvojrflvpfooajljZXmkJzntKLmlbDmja4gKi9cclxuICAgIGdldEZpbHRlckRhdGEoKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5TGlzdDtcclxuICAgICAgICBxdWVyeUxpc3QgPSB0aGlzLmhhbmRsZXIuc2V0RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocXVlcnlMaXN0KTtcclxuICAgIH1cclxuICAgIC8qKiDojrflj5blsZXnpLrlnKjlpJbpg6jnmoTooajljZXplb/luqYgKi9cclxuICAgIGdldFNob3dMZW5ndGgoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbHRlckxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0ZpbHRlckxpc3QubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmuIXnqbrmnaHku7YgKi9cclxuICAgIHJlc2V0U2VhcmNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zICYmIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZm9yRWFjaChsaXN0RmlsdGVyQ29uZGl0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBUZXh0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBTZWFyY2hWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5EYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBEYXRlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IE1vbnRoVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuWWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgWWVhclZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgRGF0ZVJhbmdlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuTW9udGhSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgTW9udGhSYW5nZVZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLlllYXJSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RGaWx0ZXJDb25kaXRpb24udmFsdWUgPSBuZXcgWWVhclJhbmdlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuRHJvcERvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IERyb3BEb3duTGlzdFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLk51bWJlclJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBOdW1iZXJSYW5nZVZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RGaWx0ZXJDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpID09IENvbnRyb2xUeXBlLkhlbHApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IEhlbHBWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5DaGVja2JveEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBDaGVja2JveEdyb3VwVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdEZpbHRlckNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT0gQ29udHJvbFR5cGUuUmFkaW8pIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0RmlsdGVyQ29uZGl0aW9uLnZhbHVlID0gbmV3IFJhZGlvR3JvdXBWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0RmlsdGVyQ29uZGl0aW9uLmNvbnRyb2wuZ2V0Q29udHJvbFR5cGUoKSA9PSBDb250cm9sVHlwZS5JbnB1dEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBJbnB1dEdyb3VwVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdEZpbHRlckNvbmRpdGlvbi52YWx1ZSA9IG5ldyBUZXh0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICBsZXQgbGlzdEZpbHRlciA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gT2JqZWN0LmFzc2lnbih7fSwgbykpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0RmlsdGVyID0gdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyA9IGxpc3RGaWx0ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ0xpc3RGaWx0ZXJDb25kaXRpb25zPXRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0SW5pdCgpO1xyXG4gICAgICAgICAgICAvLyAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb25DaGFuZ2VIYW5kbGVyKGZhbHNlKTtcclxuICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDorr7nva7pu5jorqTlgLxcclxuICAgIHNldEZpbHRlclZhbHVlKGZpZWxkQ29uZmlnczogRmllbGRDb25maWdbXSkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5VUERBVEVfRklMVEVSX1ZBTFVFU19USU1FUikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5VUERBVEVfRklMVEVSX1ZBTFVFU19USU1FUik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLlVQREFURV9GSUxURVJfVkFMVUVTX1RJTUVSID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBfZmlsdGVycyA9IHRoaXMuc3RhZ0xpc3RGaWx0ZXJDb25kaXRpb25zLm1hcChvID0+ICh7IC4uLm8gfSkpO1xyXG4gICAgICAgICAgICBpZiAoX2ZpbHRlcnMgJiYgX2ZpbHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlcyhfZmlsdGVycywgZmllbGRDb25maWdzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RGaWx0ZXIgPSBfZmlsdGVycy5tYXAobyA9PiAoeyAuLi5vIH0pKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSBsaXN0RmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1aXJlZExpc3RJbml0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbkNoYW5nZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5TZXRDdXJyZW50RmlsdGVyQ29uZGl0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgLy8gIHRoaXMubGlzdFNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5TdWJtaXQgPSB0aGlzLmNhblN1Ym1pdEZpbHRlcih0aGlzLnJlcXVpcmVkTGlzdEZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3VibWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXQoJ3Nob3dGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyB0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zID0gdGhpcy5zdGFnTGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgJiYgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZXRWYWx1ZXModGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucywgZmllbGRDb25maWdzKTtcclxuICAgICAgICAvLyAgICAgY29uc3QgbGlzdEZpbHRlciA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMgPSBsaXN0RmlsdGVyO1xyXG4gICAgICAgIC8vICAgICB0aGlzLnJlcXVpcmVkTGlzdEluaXQoKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZWFyY2hDaGFuZ2UuZW1pdCh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5pblNldEN1cnJlbnRGaWx0ZXJDb25kaXRpb25zKCk7XHJcbiAgICAgICAgLy8gICAgIC8vICB0aGlzLmxpc3RTZWFyY2goKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIpO1xyXG4gICAgICAgIC8vICAgICBpZiAoIXRoaXMuY2FuU3VibWl0KSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgdGhpcy5zdWJtaXQoJ3Nob3dGb3JtRGF0YScsIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuICAgIC8vIOiuvue9rnZhbHVlXHJcbiAgICBzZXRWYWx1ZXMoY29uZGl0aW9ucywgZmllbGRDb25maWdzOiBGaWVsZENvbmZpZ1tdKSB7XHJcbiAgICAgICAgbGV0IHFjOiBRdWVyeUNvbmRpdGlvbjtcclxuICAgICAgICBsZXQgY29udHJvbFR5cGU6IHN0cmluZztcclxuICAgICAgICBpZiAoZmllbGRDb25maWdzICYmIGZpZWxkQ29uZmlncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmllbGRDb25maWdzLmZvckVhY2godiA9PiB7XHJcbiAgICAgICAgICAgICAgICBxYyA9IGNvbmRpdGlvbnMuZmluZChjID0+IGMuZmllbGRDb2RlID09IHYubGFiZWxDb2RlKTtcclxuICAgICAgICAgICAgICAgIGlmIChxYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUeXBlID0gdGhpcy5nZXRDb250cm9sVHlwZShxYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcWMudmFsdWUgPSB0aGlzLmZpbHRlclNlcnZpY2Uuc2V0VmFsdWVzKGNvbnRyb2xUeXBlLCB2LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlKGZpZWxkTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlMaXN0ID0gdGhpcy5oYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnModGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHF1ZXJ5TGlzdC5maW5kKChuOiBhbnkpID0+IG5bJ0ZpbHRlckZpZWxkJ10gPT09IGZpZWxkTmFtZSk7XHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5b+F5aGr6aG55Yid5aeL5YyWXHJcbiAgICByZXF1aXJlZExpc3RJbml0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkTGlzdCA9IHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZmlsdGVyKChsaXN0aXRlbSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdGl0ZW0uY29udHJvbC5yZXF1aXJlZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVxdWlyZWRMaXN0ICYmIHJlcXVpcmVkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIgPSByZXF1aXJlZExpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuU3VibWl0ID0gdGhpcy5jYW5TdWJtaXRGaWx0ZXIodGhpcy5yZXF1aXJlZExpc3RGaWx0ZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRMaXN0RmlsdGVyID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2FuU3VibWl0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJGaWx0ZXJWYWx1ZShmaWVsZHM6IGFueSkge1xyXG4gICAgICAgIGlmIChmaWVsZHMgJiYgZmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZHMuaW5kZXhPZihuLmZpZWxkQ29kZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi52YWx1ZS5jbGVhclZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWYWx1ZXModmFsdWVzOiB7IFtmaWVsZDogc3RyaW5nXTogYW55IH0pIHtcclxuICAgICAgICBpZiAodmFsdWVzICYmIE9iamVjdC5rZXlzKHZhbHVlcykpIHtcclxuICAgICAgICAgICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgICAgICAgZmllbGRzLmZvckVhY2goIGYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0RmlsdGVyQ29uZGl0aW9ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHMuaW5kZXhPZihuLmZpZWxkQ29kZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4udmFsdWVbJ3ZhbHVlJ10gPSB2YWx1ZXNbZl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBidWlsZFNtYXJ0SGVscEtleSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYodGhpcy5pZFNlcnZpY2UpIHtcclxuICAgICAgICAgICAgbGV0IHByZWZpeCA9ICcnO1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aEFyciA9IGxvY2F0aW9uLmhhc2guc3BsaXQoJz8nKTtcclxuICAgICAgICAgICAgICAgIHByZWZpeCA9IHBhdGhBcnIgPyBwYXRoQXJyWzBdIDogJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoQXJyICA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBwYXRoQXJyID8gcGF0aEFycltwYXRoQXJyLmxlbmd0aCAtIDFdIDogJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRTZXJ2aWNlLmVuY3J5cHQocHJlZml4ICsgJy9saXN0LWZpbHRlci8nICsgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbGlzdC1maWx0ZXIvJyArIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY29uZGl0aW9uQ2hhbmdlSGFuZGxlcihzZWFyY2hFbWl0PXRydWUpe1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5TGlzdCA9IHRoaXMuaGFuZGxlci5zZXRGaWx0ZXJDb25kaXRpb25zKHRoaXMubGlzdEZpbHRlckNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uc0NoYW5nZS5lbWl0KHtkYXRhOkpTT04uc3RyaW5naWZ5KHF1ZXJ5TGlzdCl9KTtcclxuICAgICAgICBpZihzZWFyY2hFbWl0KXtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hDaGFuZ2UuZW1pdCh0aGlzLmxpc3RGaWx0ZXJDb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa1ruWKqOetm+mAiemdouadv+mAmui/h+aWueazleWxleW8gOWSjOWFs+mXrVxyXG4gICAgICogQHBhcmFtIGV2dCBcclxuICAgICAqL1xyXG4gICBmbG9hdEZpbHRlck9wZW4oZXZ0OiBNb3VzZUV2ZW50KXtcclxuICAgIHRoaXMuc2hvd0ZpbHRlciA9ICF0aGlzLnNob3dGaWx0ZXJcclxuICAgIGlmICh0aGlzLnNob3dGaWx0ZXIpIHtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLnJlZ2lzdGVyTW91c2VFdmVudCh0aGlzLmZsb2F0UGFuZWwubmF0aXZlRWxlbWVudCwgKGU6IGFueSkgPT4geyAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZsb2F0UGFuZWwubmF0aXZlRWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5ub2RlTmFtZSA9PT0gJ1NQQU4nICYmIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdmLWljb24tZmlsdHJhdGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNscyA9IFsnLmYtZGF0ZXBpY2tlci1jb250YWluZXInLCAnLmZhcnJpcy10aW1lci1waWNrZXInLCAnLmZhcnJpcy1tb2RhbCcsICcuZi1jb21iby1sb29rdXAnLCAnLmRhdGUtb3ZlcmxheS1jb250YWluZXInXVxyXG4gICAgICAgICAgICAgICAgaWYgKGNscy5maW5kKGsgPT4gZS50YXJnZXQuY2xvc2VzdChrKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93RmlsdGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmZsb2F0UGFuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5mbG9hdFBhbmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICB9XHJcbn1cclxuIl19