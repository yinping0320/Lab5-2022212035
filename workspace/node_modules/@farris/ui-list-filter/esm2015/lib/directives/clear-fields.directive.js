/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, Optional, Self, Injector } from '@angular/core';
import { NgControl } from '@angular/forms';
import { ListFilterComponent } from '../list-filter.component';
export class ClearFieldsDirective {
    /**
     * @param {?} ngCtrl
     * @param {?} listFilterCmp
     * @param {?} inject
     */
    constructor(ngCtrl, listFilterCmp, inject) {
        this.ngCtrl = ngCtrl;
        this.listFilterCmp = listFilterCmp;
        this.inject = inject;
        this.clearFields = '';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.clearFields && this.ngCtrl) {
            this.ngCtrl.valueChanges.subscribe((/**
             * @param {?} v
             * @return {?}
             */
            (v) => {
                if (!this.ngCtrl.dirty) {
                    return;
                }
                this.listFilterCmp.fieldCodeOfClearFields = [];
                this.clearFields.split(',').forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    // 字段编号
                    /** @type {?} */
                    const conditionItem = this.listFilterCmp.listFilterConditions.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.fieldCode === n));
                    if (conditionItem) {
                        // 触发清空字段列表变更，特殊控件类型的清空，不能只是清空值
                        this.listFilterCmp.fieldCodeOfClearFields.push(n);
                        // 清空字段
                        conditionItem.value.clearValue();
                    }
                }));
            }));
        }
    }
}
ClearFieldsDirective.decorators = [
    { type: Directive, args: [{
                selector: '[clear-fields]'
            },] }
];
/** @nocollapse */
ClearFieldsDirective.ctorParameters = () => [
    { type: NgControl, decorators: [{ type: Optional }, { type: Self }] },
    { type: ListFilterComponent },
    { type: Injector }
];
ClearFieldsDirective.propDecorators = {
    clearFields: [{ type: Input, args: ['clear-fields',] }]
};
if (false) {
    /** @type {?} */
    ClearFieldsDirective.prototype.clearFields;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.ngCtrl;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.listFilterCmp;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xlYXItZmllbGRzLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbGlzdC1maWx0ZXIvIiwic291cmNlcyI6WyJsaWIvZGlyZWN0aXZlcy9jbGVhci1maWVsZHMuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFLL0QsTUFBTSxPQUFPLG9CQUFvQjs7Ozs7O0lBRzdCLFlBQXdDLE1BQWlCLEVBQVUsYUFBa0MsRUFBVSxNQUFnQjtRQUF2RixXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQXFCO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBVTtRQUZ4RyxnQkFBVyxHQUFHLEVBQUUsQ0FBQztJQUUyRixDQUFDOzs7O0lBRXBJLFFBQVE7UUFDSixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTOzs7O1lBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtnQkFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFO29CQUNwQixPQUFPO2lCQUNWO2dCQUNELElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLEdBQUcsRUFBRSxDQUFDO2dCQUMvQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPOzs7O2dCQUFDLENBQUMsQ0FBQyxFQUFFOzs7MEJBRTlCLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLElBQUk7Ozs7b0JBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxLQUFLLENBQUMsRUFBQztvQkFDMUYsSUFBSSxhQUFhLEVBQUU7d0JBQ2YsK0JBQStCO3dCQUMvQixJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbEQsT0FBTzt3QkFDUCxhQUFhLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO3FCQUNwQztnQkFDTCxDQUFDLEVBQUMsQ0FBQztZQUNQLENBQUMsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOzs7WUEzQkosU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBRSxnQkFBZ0I7YUFDN0I7Ozs7WUFMUSxTQUFTLHVCQVNELFFBQVEsWUFBSSxJQUFJO1lBUnhCLG1CQUFtQjtZQUZ1QixRQUFROzs7MEJBUXRELEtBQUssU0FBQyxjQUFjOzs7O0lBQXJCLDJDQUF3Qzs7Ozs7SUFFNUIsc0NBQTZDOzs7OztJQUFFLDZDQUEwQzs7Ozs7SUFBRSxzQ0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBPbkluaXQsIE9wdGlvbmFsLCBTZWxmLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IExpc3RGaWx0ZXJDb21wb25lbnQgfSBmcm9tICcuLi9saXN0LWZpbHRlci5jb21wb25lbnQnO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tjbGVhci1maWVsZHNdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2xlYXJGaWVsZHNEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgQElucHV0KCdjbGVhci1maWVsZHMnKSBjbGVhckZpZWxkcyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBTZWxmKCkgcHJpdmF0ZSBuZ0N0cmw6IE5nQ29udHJvbCwgcHJpdmF0ZSBsaXN0RmlsdGVyQ21wOiBMaXN0RmlsdGVyQ29tcG9uZW50LCBwcml2YXRlIGluamVjdDogSW5qZWN0b3IpIHsgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsZWFyRmllbGRzICYmIHRoaXMubmdDdHJsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdDdHJsLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKHYpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZ0N0cmwuZGlydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDbXAuZmllbGRDb2RlT2ZDbGVhckZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcy5zcGxpdCgnLCcpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5a2X5q6157yW5Y+3XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uSXRlbSA9IHRoaXMubGlzdEZpbHRlckNtcC5saXN0RmlsdGVyQ29uZGl0aW9ucy5maW5kKGMgPT4gYy5maWVsZENvZGUgPT09IG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOinpuWPkea4heepuuWtl+auteWIl+ihqOWPmOabtO+8jOeJueauiuaOp+S7tuexu+Wei+eahOa4heepuu+8jOS4jeiDveWPquaYr+a4heepuuWAvFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RGaWx0ZXJDbXAuZmllbGRDb2RlT2ZDbGVhckZpZWxkcy5wdXNoKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmuIXnqbrlrZfmrrVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uSXRlbS52YWx1ZS5jbGVhclZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=