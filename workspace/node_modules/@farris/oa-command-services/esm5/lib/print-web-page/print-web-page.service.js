/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Injectable } from "@angular/core";
import { MessagerService } from '@farris/ui-messager';
import { templateType } from "./entity";
var PrintWebPageService = /** @class */ (function () {
    function PrintWebPageService(msgSer) {
        var _this = this;
        this.msgSer = msgSer;
        window.onbeforeprint = function () {
            if (_this.currentTemplate == templateType.card) {
                /** @type {?} */
                var rootLayout = document.getElementById('root-layout');
                /** @type {?} */
                var mainContainer = document.getElementById('main-container');
                if (rootLayout && mainContainer) {
                    rootLayout.style.display = 'block';
                    rootLayout.style.position = 'relative';
                    mainContainer.style.display = 'block';
                    rootLayout.parentElement.style.position = 'relative';
                    document.title = '';
                }
                else {
                    _this.msgSer.error('未找到模板中关键节点，请检查命令传参中模板类型是否正确。');
                }
            }
        };
        window.onafterprint = function () {
            if (_this.currentTemplate == templateType.card) {
                /** @type {?} */
                var rootLayout = document.getElementById('root-layout');
                /** @type {?} */
                var mainContainer = document.getElementById('main-container');
                if (rootLayout && mainContainer) {
                    mainContainer.setAttribute('style', '');
                    rootLayout.setAttribute('style', '');
                    rootLayout.parentElement.setAttribute('style', '');
                }
            }
        };
    }
    /**
     * @param {?=} tempType
     * @return {?}
     */
    PrintWebPageService.prototype.printWebPage = /**
     * @param {?=} tempType
     * @return {?}
     */
    function (tempType) {
        if (tempType === void 0) { tempType = templateType.card; }
        this.currentTemplate = tempType;
        if (!window.navigator.userAgent.includes('AppleWebKit/')) {
            this.msgSer.prompt('提示', '为保证打印效果，推荐使用谷歌浏览器进行打印。是否继续打印？').subscribe(function (confirmed) {
                if (confirmed) {
                    window.print();
                }
            });
        }
        else {
            window.print();
        }
    };
    PrintWebPageService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    PrintWebPageService.ctorParameters = function () { return [
        { type: MessagerService }
    ]; };
    return PrintWebPageService;
}());
export { PrintWebPageService };
if (false) {
    /** @type {?} */
    PrintWebPageService.prototype.currentTemplate;
    /** @type {?} */
    PrintWebPageService.prototype.msgSer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQtd2ViLXBhZ2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvb2EtY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9wcmludC13ZWItcGFnZS9wcmludC13ZWItcGFnZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3hDO0lBS0UsNkJBRVUsTUFBdUI7UUFGakMsaUJBOEJDO1FBNUJTLFdBQU0sR0FBTixNQUFNLENBQWlCO1FBRS9CLE1BQU0sQ0FBQyxhQUFhLEdBQUc7WUFDckIsSUFBSSxLQUFJLENBQUMsZUFBZSxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUU7O29CQUN2QyxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUM7O29CQUNuRCxhQUFhLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDL0QsSUFBSSxVQUFVLElBQUksYUFBYSxFQUFFO29CQUMvQixVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7b0JBQ25DLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQztvQkFDdkMsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO29CQUN0QyxVQUFVLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO29CQUNyRCxRQUFRLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztpQkFDckI7cUJBQU07b0JBQ0wsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztpQkFDbkQ7YUFDRjtRQUNILENBQUMsQ0FBQTtRQUNELE1BQU0sQ0FBQyxZQUFZLEdBQUc7WUFDcEIsSUFBSSxLQUFJLENBQUMsZUFBZSxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUU7O29CQUN2QyxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUM7O29CQUNuRCxhQUFhLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDL0QsSUFBSSxVQUFVLElBQUksYUFBYSxFQUFFO29CQUMvQixhQUFhLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDeEMsVUFBVSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3JDLFVBQVUsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztpQkFDcEQ7YUFDRjtRQUNILENBQUMsQ0FBQTtJQUNILENBQUM7Ozs7O0lBRU0sMENBQVk7Ozs7SUFBbkIsVUFBb0IsUUFBMEM7UUFBMUMseUJBQUEsRUFBQSxXQUF5QixZQUFZLENBQUMsSUFBSTtRQUM1RCxJQUFJLENBQUMsZUFBZSxHQUFHLFFBQVEsQ0FBQztRQUNoQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQ3hELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSwrQkFBK0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFDLFNBQVM7Z0JBQzVFLElBQUksU0FBUyxFQUFFO29CQUNiLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtpQkFDZjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7YUFBTTtZQUNMLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtTQUNmO0lBQ0gsQ0FBQzs7Z0JBaERGLFVBQVU7Ozs7Z0JBRkYsZUFBZTs7SUFvRHhCLDBCQUFDO0NBQUEsQUFsREQsSUFrREM7U0FqRFksbUJBQW1COzs7SUFFOUIsOENBQXNDOztJQUlwQyxxQ0FBK0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgTWVzc2FnZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7IHRlbXBsYXRlVHlwZSB9IGZyb20gXCIuL2VudGl0eVwiO1xyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBQcmludFdlYlBhZ2VTZXJ2aWNlIHtcclxuXHJcbiAgcHJpdmF0ZSBjdXJyZW50VGVtcGxhdGU6IHRlbXBsYXRlVHlwZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcblxyXG4gICAgcHJpdmF0ZSBtc2dTZXI6IE1lc3NhZ2VyU2VydmljZVxyXG4gICkge1xyXG4gICAgd2luZG93Lm9uYmVmb3JlcHJpbnQgPSAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRUZW1wbGF0ZSA9PSB0ZW1wbGF0ZVR5cGUuY2FyZCkge1xyXG4gICAgICAgIGNvbnN0IHJvb3RMYXlvdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdC1sYXlvdXQnKTtcclxuICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4tY29udGFpbmVyJyk7XHJcbiAgICAgICAgaWYgKHJvb3RMYXlvdXQgJiYgbWFpbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgcm9vdExheW91dC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgIHJvb3RMYXlvdXQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgIHJvb3RMYXlvdXQucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgICBkb2N1bWVudC50aXRsZSA9ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm1zZ1Nlci5lcnJvcign5pyq5om+5Yiw5qih5p2/5Lit5YWz6ZSu6IqC54K577yM6K+35qOA5p+l5ZG95Luk5Lyg5Y+C5Lit5qih5p2/57G75Z6L5piv5ZCm5q2j56Gu44CCJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB3aW5kb3cub25hZnRlcnByaW50ID0gKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50VGVtcGxhdGUgPT0gdGVtcGxhdGVUeXBlLmNhcmQpIHtcclxuICAgICAgICBjb25zdCByb290TGF5b3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QtbGF5b3V0Jyk7XHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGlmIChyb290TGF5b3V0ICYmIG1haW5Db250YWluZXIpIHtcclxuICAgICAgICAgIG1haW5Db250YWluZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcclxuICAgICAgICAgIHJvb3RMYXlvdXQuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcclxuICAgICAgICAgIHJvb3RMYXlvdXQucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHByaW50V2ViUGFnZSh0ZW1wVHlwZTogdGVtcGxhdGVUeXBlID0gdGVtcGxhdGVUeXBlLmNhcmQpIHtcclxuICAgIHRoaXMuY3VycmVudFRlbXBsYXRlID0gdGVtcFR5cGU7XHJcbiAgICBpZiAoIXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdBcHBsZVdlYktpdC8nKSkge1xyXG4gICAgICB0aGlzLm1zZ1Nlci5wcm9tcHQoJ+aPkOekuicsICfkuLrkv53or4HmiZPljbDmlYjmnpzvvIzmjqjojZDkvb/nlKjosLfmrYzmtY/op4jlmajov5vooYzmiZPljbDjgILmmK/lkKbnu6fnu63miZPljbDvvJ8nKS5zdWJzY3JpYmUoKGNvbmZpcm1lZCkgPT4ge1xyXG4gICAgICAgIGlmIChjb25maXJtZWQpIHtcclxuICAgICAgICAgIHdpbmRvdy5wcmludCgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvdy5wcmludCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSJdfQ==