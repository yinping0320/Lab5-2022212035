/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Injectable } from "@angular/core";
import { MessagerService } from '@farris/ui-messager';
import { templateType } from "./entity";
export class PrintWebPageService {
    /**
     * @param {?} msgSer
     */
    constructor(msgSer) {
        this.msgSer = msgSer;
        window.onbeforeprint = () => {
            if (this.currentTemplate == templateType.card) {
                /** @type {?} */
                const rootLayout = document.getElementById('root-layout');
                /** @type {?} */
                const mainContainer = document.getElementById('main-container');
                if (rootLayout && mainContainer) {
                    rootLayout.style.display = 'block';
                    rootLayout.style.position = 'relative';
                    mainContainer.style.display = 'block';
                    rootLayout.parentElement.style.position = 'relative';
                    document.title = '';
                }
                else {
                    this.msgSer.error('未找到模板中关键节点，请检查命令传参中模板类型是否正确。');
                }
            }
        };
        window.onafterprint = () => {
            if (this.currentTemplate == templateType.card) {
                /** @type {?} */
                const rootLayout = document.getElementById('root-layout');
                /** @type {?} */
                const mainContainer = document.getElementById('main-container');
                if (rootLayout && mainContainer) {
                    mainContainer.setAttribute('style', '');
                    rootLayout.setAttribute('style', '');
                    rootLayout.parentElement.setAttribute('style', '');
                }
            }
        };
    }
    /**
     * @param {?=} tempType
     * @return {?}
     */
    printWebPage(tempType = templateType.card) {
        this.currentTemplate = tempType;
        if (!window.navigator.userAgent.includes('AppleWebKit/')) {
            this.msgSer.prompt('提示', '为保证打印效果，推荐使用谷歌浏览器进行打印。是否继续打印？').subscribe((confirmed) => {
                if (confirmed) {
                    window.print();
                }
            });
        }
        else {
            window.print();
        }
    }
}
PrintWebPageService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
PrintWebPageService.ctorParameters = () => [
    { type: MessagerService }
];
if (false) {
    /** @type {?} */
    PrintWebPageService.prototype.currentTemplate;
    /** @type {?} */
    PrintWebPageService.prototype.msgSer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQtd2ViLXBhZ2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvb2EtY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9wcmludC13ZWItcGFnZS9wcmludC13ZWItcGFnZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRXhDLE1BQU0sT0FBTyxtQkFBbUI7Ozs7SUFJOUIsWUFFVSxNQUF1QjtRQUF2QixXQUFNLEdBQU4sTUFBTSxDQUFpQjtRQUUvQixNQUFNLENBQUMsYUFBYSxHQUFHLEdBQUcsRUFBRTtZQUMxQixJQUFJLElBQUksQ0FBQyxlQUFlLElBQUksWUFBWSxDQUFDLElBQUksRUFBRTs7c0JBQ3ZDLFVBQVUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQzs7c0JBQ25ELGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDO2dCQUMvRCxJQUFJLFVBQVUsSUFBSSxhQUFhLEVBQUU7b0JBQy9CLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztvQkFDbkMsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO29CQUN2QyxhQUFhLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7b0JBQ3RDLFVBQVUsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7b0JBQ3JELFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO2lCQUNyQjtxQkFBTTtvQkFDTCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO2lCQUNuRDthQUNGO1FBQ0gsQ0FBQyxDQUFBO1FBQ0QsTUFBTSxDQUFDLFlBQVksR0FBRyxHQUFHLEVBQUU7WUFDekIsSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUU7O3NCQUN2QyxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUM7O3NCQUNuRCxhQUFhLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDL0QsSUFBSSxVQUFVLElBQUksYUFBYSxFQUFFO29CQUMvQixhQUFhLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDeEMsVUFBVSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3JDLFVBQVUsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztpQkFDcEQ7YUFDRjtRQUNILENBQUMsQ0FBQTtJQUNILENBQUM7Ozs7O0lBRU0sWUFBWSxDQUFDLFdBQXlCLFlBQVksQ0FBQyxJQUFJO1FBQzVELElBQUksQ0FBQyxlQUFlLEdBQUcsUUFBUSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLCtCQUErQixDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7Z0JBQ2hGLElBQUksU0FBUyxFQUFFO29CQUNiLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtpQkFDZjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7YUFBTTtZQUNMLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtTQUNmO0lBQ0gsQ0FBQzs7O1lBaERGLFVBQVU7Ozs7WUFGRixlQUFlOzs7O0lBS3RCLDhDQUFzQzs7SUFJcEMscUNBQStCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyB0ZW1wbGF0ZVR5cGUgfSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUHJpbnRXZWJQYWdlU2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgY3VycmVudFRlbXBsYXRlOiB0ZW1wbGF0ZVR5cGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG5cclxuICAgIHByaXZhdGUgbXNnU2VyOiBNZXNzYWdlclNlcnZpY2VcclxuICApIHtcclxuICAgIHdpbmRvdy5vbmJlZm9yZXByaW50ID0gKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50VGVtcGxhdGUgPT0gdGVtcGxhdGVUeXBlLmNhcmQpIHtcclxuICAgICAgICBjb25zdCByb290TGF5b3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QtbGF5b3V0Jyk7XHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGlmIChyb290TGF5b3V0ICYmIG1haW5Db250YWluZXIpIHtcclxuICAgICAgICAgIHJvb3RMYXlvdXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICByb290TGF5b3V0LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgICAgICAgIG1haW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICByb290TGF5b3V0LnBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXIuZXJyb3IoJ+acquaJvuWIsOaooeadv+S4reWFs+mUruiKgueCue+8jOivt+ajgOafpeWRveS7pOS8oOWPguS4reaooeadv+exu+Wei+aYr+WQpuato+ehruOAgicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2luZG93Lm9uYWZ0ZXJwcmludCA9ICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuY3VycmVudFRlbXBsYXRlID09IHRlbXBsYXRlVHlwZS5jYXJkKSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdExheW91dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290LWxheW91dCcpO1xyXG4gICAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbi1jb250YWluZXInKTtcclxuICAgICAgICBpZiAocm9vdExheW91dCAmJiBtYWluQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICBtYWluQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XHJcbiAgICAgICAgICByb290TGF5b3V0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XHJcbiAgICAgICAgICByb290TGF5b3V0LnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBwcmludFdlYlBhZ2UodGVtcFR5cGU6IHRlbXBsYXRlVHlwZSA9IHRlbXBsYXRlVHlwZS5jYXJkKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUZW1wbGF0ZSA9IHRlbXBUeXBlO1xyXG4gICAgaWYgKCF3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQXBwbGVXZWJLaXQvJykpIHtcclxuICAgICAgdGhpcy5tc2dTZXIucHJvbXB0KCfmj5DnpLonLCAn5Li65L+d6K+B5omT5Y2w5pWI5p6c77yM5o6o6I2Q5L2/55So6LC35q2M5rWP6KeI5Zmo6L+b6KGM5omT5Y2w44CC5piv5ZCm57un57ut5omT5Y2w77yfJykuc3Vic2NyaWJlKChjb25maXJtZWQpID0+IHtcclxuICAgICAgICBpZiAoY29uZmlybWVkKSB7XHJcbiAgICAgICAgICB3aW5kb3cucHJpbnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3aW5kb3cucHJpbnQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0iXX0=