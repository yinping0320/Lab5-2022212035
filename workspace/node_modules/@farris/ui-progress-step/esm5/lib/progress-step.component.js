/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, Directive, TemplateRef, ContentChild, EventEmitter, } from "@angular/core";
var ProgressStepItemTemplateDirective = /** @class */ (function () {
    function ProgressStepItemTemplateDirective(template) {
        this.template = template;
    }
    ProgressStepItemTemplateDirective.decorators = [
        { type: Directive, args: [{
                    selector: "[progressStepItem]",
                },] }
    ];
    /** @nocollapse */
    ProgressStepItemTemplateDirective.ctorParameters = function () { return [
        { type: TemplateRef }
    ]; };
    return ProgressStepItemTemplateDirective;
}());
export { ProgressStepItemTemplateDirective };
if (false) {
    /** @type {?} */
    ProgressStepItemTemplateDirective.prototype.template;
}
var ProgressStepExtendTemplateDirective = /** @class */ (function () {
    function ProgressStepExtendTemplateDirective(template) {
        this.template = template;
    }
    ProgressStepExtendTemplateDirective.decorators = [
        { type: Directive, args: [{
                    selector: "[progressStepExtend]",
                },] }
    ];
    /** @nocollapse */
    ProgressStepExtendTemplateDirective.ctorParameters = function () { return [
        { type: TemplateRef }
    ]; };
    return ProgressStepExtendTemplateDirective;
}());
export { ProgressStepExtendTemplateDirective };
if (false) {
    /** @type {?} */
    ProgressStepExtendTemplateDirective.prototype.template;
}
/**
 * @record
 */
export function stepMessage() { }
if (false) {
    /** @type {?} */
    stepMessage.prototype.id;
    /** @type {?} */
    stepMessage.prototype.title;
    /** @type {?|undefined} */
    stepMessage.prototype.icon;
    /** @type {?|undefined} */
    stepMessage.prototype.status;
    /** @type {?|undefined} */
    stepMessage.prototype.clickDisable;
    /** @type {?|undefined} */
    stepMessage.prototype.hidden;
    /** @type {?|undefined} */
    stepMessage.prototype.class;
}
/**
 * @record
 */
export function progressData() { }
if (false) {
    /** @type {?} */
    progressData.prototype.activeIndex;
    /** @type {?} */
    progressData.prototype.stepMessages;
}
var ProgressStepComponent = /** @class */ (function () {
    function ProgressStepComponent() {
        //进度条数据
        // @Input() stepData:progressData;
        /**
         * 横向horizontal、竖向排列vertical
         */
        this.direction = "horizontal";
        /**
         * 是否铺满
         */
        this.fill = false;
        /**
         * 是否支持点击
         */
        this.clickable = false;
        // 步骤条整体样式
        this.stepsCls = "";
        this.stepClick = new EventEmitter();
        this.storedIndexState = false;
        /**
         * 记录当前步骤所在的位置，从0开始
         */
        this.activeIndex = 0;
    }
    Object.defineProperty(ProgressStepComponent.prototype, "subStepData", {
        get: /**
         * @return {?}
         */
        function () {
            return this._subStepData;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._subStepData = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ProgressStepComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    Object.defineProperty(ProgressStepComponent.prototype, "stepData", {
        get: /**
         * @return {?}
         */
        function () {
            return this._stepData;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                // 二选一属性，重置
                this.steps = null;
                this.stepInit(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} changes
     * @return {?}
     */
    ProgressStepComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (changes["steps"] || changes["currentId"]) {
            // steps没有值或者stepData有值，都不处理，这两个属性对用户是二选一
            if (!this.steps || this.stepData) {
                return;
            }
            this.steps.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return (item.status = ""); }));
            this.stepMessages = this.steps.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return !item.hidden; }));
            /** @type {?} */
            var index = this.stepMessages.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.id === _this.currentId; }));
            this.activeIndex = index === -1 ? 0 : index;
        }
    };
    /**点击某一步 */
    /**
     * 点击某一步
     * @param {?} step
     * @param {?} index
     * @return {?}
     */
    ProgressStepComponent.prototype.listClick = /**
     * 点击某一步
     * @param {?} step
     * @param {?} index
     * @return {?}
     */
    function (step, index) {
        if (this.clickable) {
            this.stepClick.emit({ "step": step, "index": index });
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    ProgressStepComponent.prototype.goStep = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (this.storedIndexState) {
            if (this.activeIndex == index) {
                this.currentIndex = null;
            }
            else {
                this.currentIndex = index;
            }
        }
        else {
            this.stepMessages.forEach((/**
             * @param {?} step
             * @param {?} i
             * @return {?}
             */
            function (step, i) {
                if (i < index) {
                    step.status = "finish";
                }
                else if (i > index) {
                    step.status = "";
                }
                else {
                    step.status = "active";
                }
            }));
            this.activeIndex = index;
        }
    };
    /**下一步 */
    /**
     * 下一步
     * @return {?}
     */
    ProgressStepComponent.prototype.nextStep = /**
     * 下一步
     * @return {?}
     */
    function () {
        if (this.storedIndexState &&
            this.currentIndex < this.stepMessages.length - 1) {
            this.currentIndex++;
        }
        if (this.activeIndex < this.stepMessages.length - 1) {
            this.stepMessages[this.activeIndex].status = "finish";
            this.stepMessages[this.activeIndex + 1].status = "active";
            this.activeIndex++;
            if (this.storedIndexState) {
                this.currentIndex = this.activeIndex;
            }
        }
        //return this.activeIndex;
    };
    /**上一步 */
    /**
     * 上一步
     * @return {?}
     */
    ProgressStepComponent.prototype.prevStep = /**
     * 上一步
     * @return {?}
     */
    function () {
        // if(this.storedIndexState && this.currentIndex > 0){
        //   this.currentIndex--;
        // }
        if (this.activeIndex > 0) {
            // else if(this.activeIndex > 0 && !this.storedIndexState){
            this.stepMessages[this.activeIndex].status = "";
            this.stepMessages[this.activeIndex - 1].status = "active";
            this.activeIndex--;
            if (this.storedIndexState) {
                this.currentIndex = this.activeIndex;
            }
        }
        //return this.activeIndex;
    };
    /**
     * @return {?}
     */
    ProgressStepComponent.prototype.getCurrentStepIndex = /**
     * @return {?}
     */
    function () {
        return this.activeIndex;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ProgressStepComponent.prototype.stepInit = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data["stepMessages"] && data["stepMessages"].length) {
            data["stepMessages"].forEach((/**
             * @param {?} step
             * @return {?}
             */
            function (step) {
                //if(typeof step.status === 'undefined'){
                step.status = "";
                //}
            }));
            this.stepMessages = data["stepMessages"].filter((/**
             * @param {?} step
             * @return {?}
             */
            function (step) {
                return !step.hidden;
            }));
        }
        this.activeIndex = data["activeIndex"];
        if (this.storedIndexState) {
            this.currentIndex = this.activeIndex;
        }
    };
    /**
     * @param {?} progressData
     * @return {?}
     */
    ProgressStepComponent.prototype.setProgressData = /**
     * @param {?} progressData
     * @return {?}
     */
    function (progressData) {
        if (progressData) {
            //this.stepData = progressData;
            this.stepInit(progressData);
        }
    };
    /**
     * @param {?} num
     * @return {?}
     */
    ProgressStepComponent.prototype.setActiveIndex = /**
     * @param {?} num
     * @return {?}
     */
    function (num) {
        /** @type {?} */
        var activeNum = num >= 0 && num < this.stepMessages.length ? num : 0;
        this.activeIndex = activeNum;
    };
    ProgressStepComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-progress-step",
                    template: "<div class=\"f-progress-step\">\r\n    <ul class=\"{{stepsCls}}\"\r\n    [ngClass]=\"{'f-progress-step-list':direction ==='horizontal', 'f-progress-step-list-block': direction ==='vertical','f-progress-step-horizontal-fill':direction==='horizontal' && fill,'f-progress-step-vertical-fill':direction==='vertical' && fill,'f-progress-step-has-extend':progressStepExtendTmpl}\"\r\n    [ngStyle]=\"{'height': direction ==='vertical'? fHeight +'px' :''}\"\r\n    >\r\n        <ng-container *ngFor=\"let step of stepMessages;let i = index;\">\r\n            <li [ngStyle]=\"stepStyle\" class=\"step {{step.status? step.status:(i < activeIndex ? 'finish': '')}}  {{step.hasOwnProperty('class')?step.class:''}}\" *ngIf=\"!step.hidden\" [ngClass]=\"{'active': i == activeIndex,'clickable':clickable,'click-disable':step.clickDisable,'current':i == currentIndex,'step-has-extend':progressStepExtendTmpl}\" (click)=\"listClick(step,i)\">\r\n                <ng-container *ngIf=\"!progressStepTemplate;else stepElement\">\r\n                    <div class=\"f-progressstep-row {{step.status? 'step-'+ step.status:(i < activeIndex ? 'step-finish': '')}}\" [ngClass]=\"{'step-active': i == activeIndex,'step-current':i == currentIndex}\" *ngIf=\"!step['subSteps'] || !step['subSteps'].length\">\r\n                        <div class=\"f-progress-step-content\">\r\n                            <span class=\"step-icon\" [ngClass]=\"step.icon\" *ngIf=\"step.icon;else defaultIcon\" ></span>\r\n                            <ng-template #defaultIcon>\r\n                                    <span class=\"step-icon\" *ngIf=\"i >= activeIndex || i == currentIndex; else stepSuccess\">{{i+1}}</span>\r\n                                    <ng-template #stepSuccess>\r\n                                        <span class=\"step-icon step-success k-icon k-i-check\" [ngClass]=\"step.icon\"></span>\r\n                                    </ng-template>\r\n                            </ng-template>\r\n            \r\n                            <div class=\"f-progress-step-title\">  \r\n                                <p class=\"step-name\" [ngClass]=\"{'step-name-success': i <= activeIndex}\">{{step.title}}</p>\r\n                            </div>\r\n                        </div>\r\n                            \r\n                        <div class=\"f-progress-step-line\" [ngClass]=\"{'f-progress-step-line-success': i == activeIndex}\"  *ngIf=\"i !== (stepMessages.length-1)\">\r\n                            <span class=\"triangle\" [ngClass]=\"{'f-progress-step-vertical-triangle': direction ==='vertical'}\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-progressstep-row f-progressstep-row-multi\" *ngIf=\"step['subSteps'] && step['subSteps'].length\">\r\n                        <div class=\"f-step-multi-item\" \r\n                        *ngFor=\"let subStep of step.subSteps;let subIndex = index\"  \r\n                        [ngClass]=\"{'f-step-multi-item-hidden': subStep.visible === false,\r\n                        'f-step-multi-item-active':(activeIndex == i && subStepData && subStepData[step.id] == subIndex),\r\n                        'f-step-multi-item-finish':(activeIndex > i && subStepData && subStepData[step.id] == subIndex)}\"\r\n                        >\r\n                            <div class=\"f-progress-step-content f-progressstep-multi-item-content\">\r\n                                <span class=\"step-icon\" \r\n                                *ngIf=\"(activeIndex <= i || i == currentIndex); else stepSuccess\"\r\n                                >{{i+1}}</span>\r\n                                <ng-template #stepSuccess>\r\n                                    <span class=\"step-icon step-icon-done k-icon k-i-check\" *ngIf=\"subStepData && subStepData[step.id] == subIndex;else doneTemplate\"></span>\r\n                                    <ng-template #doneTemplate>\r\n                                        <span class=\"step-icon k-icon k-i-check\"></span>\r\n                                    </ng-template>\r\n                                </ng-template>\r\n\r\n                                <div class=\"f-progress-step-title\">\r\n                                    <p class=\"step-name\">{{subStep.title}} </p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-progress-step-line\"  [ngClass]=\"{'f-progress-step-line-success': (activeIndex == i && subStep.active)}\" *ngIf=\"i !== (step.length-1)\"><span class=\"triangle\"></span></div>\r\n                        </div>\r\n                    </div>\r\n                    <ng-container [ngTemplateOutlet]=\"progressStepExtendTmpl\" [ngTemplateOutletContext]=\"{ step: step, index: i,length: stepMessages.length, activeIndex: activeIndex, direction: direction}\"></ng-container>            \r\n                </ng-container>\r\n                \r\n                <ng-template #stepElement>\r\n                    <ng-container [ngTemplateOutlet]=\"progressStepTemplate\" [ngTemplateOutletContext]=\"{ step: step, index: i,length: stepMessages.length, activeIndex: activeIndex, direction: direction}\"></ng-container>\r\n                </ng-template>             \r\n                \r\n            </li>\r\n        </ng-container>\r\n    </ul>\r\n    <div *ngIf=\"!stepMessages || !stepMessages.length\" class=\"f-progress-step-empty\">{{ 'progressStep.empty' | locale }}</div>\r\n    <!-- <button (click)=\"nextStep()\" [disabled]=\"activeIndex >= (stepMessages.length-1)\">\u4E0B\u4E00\u6B65</button>\r\n    <button (click)=\"prevStep()\" [disabled]=\"activeIndex <= 0\">\u4E0A\u4E00\u6B65</button> -->\r\n</div>",
                    styles: [".f-progress-step .f-progress-step-list{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.f-progress-step .step{display:inline-block}.f-progress-step .step .f-progressstep-row{display:-webkit-box;display:flex;position:relative;padding-right:.4375rem;padding-bottom:.9375rem}.f-progress-step .step .f-progressstep-row .f-progress-step-content{display:inline-block}.f-progress-step .step .f-progressstep-row .f-progress-step-content .step-icon{display:inline-block;width:1.875rem;height:1.875rem;margin-right:.5rem;margin-left:.5rem;line-height:1.875rem;border-radius:100%;font-size:.75rem;text-align:center;color:#fff;vertical-align:middle}.f-progress-step .step .f-progressstep-row .f-progress-step-content .f-progress-step-title{display:inline-block;vertical-align:middle}.f-progress-step .step .f-progressstep-row .f-progress-step-content .f-progress-step-title .step-message,.f-progress-step .step .f-progressstep-row .f-progress-step-content .f-progress-step-title .step-name{margin-bottom:0}.f-progress-step .step .f-progressstep-row .f-progress-step-content .f-progress-step-title .step-name{font-size:.875rem;color:#8c8c8c;line-height:1.25rem;padding-right:.625rem}.f-progress-step .step .f-progressstep-row .f-progress-step-content .f-progress-step-title .step-name.step-name-success{color:#000;opacity:.85}.f-progress-step .step .f-progressstep-row .f-progress-step-line{-webkit-box-flex:1;flex:1 1 auto;position:relative;display:-webkit-inline-box;display:inline-flex;min-width:3.75rem;vertical-align:middle}.f-progress-step .step .f-progressstep-row .f-progress-step-line::after{content:'';left:0;height:.125rem;overflow:hidden;position:absolute;right:.625rem;top:50%;margin-top:-.0625rem}.f-progress-step .step .f-progressstep-row .f-progress-step-line .triangle{position:absolute;right:0;top:50%;display:inline-block;width:.4375rem;height:.4375rem;margin-top:-.21875rem;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.f-progress-step .f-progress-step-list-block .step{display:block}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row{padding:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row .f-progress-step-line{-webkit-box-flex:1;flex:1 1 auto;width:.625rem;min-width:.625rem;min-height:2.5rem;margin:.5rem 0 1.25rem 1.375rem}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row .f-progress-step-line::after{content:'';border-top:0}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row .f-progress-step-line .triangle{top:auto;left:-.3125rem;bottom:-.5rem;border-top:0}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row .f-progress-step-line .f-progress-step-title .step-name{padding-right:.875rem}.f-progress-step .f-progress-step-horizontal-fill{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;flex-wrap:wrap}.f-progress-step .f-progress-step-horizontal-fill .step{-webkit-box-flex:1;flex:1 1 auto}.f-progress-step .f-progress-step-vertical-fill{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;align-content:space-between}.f-progress-step .f-progress-step-vertical-fill .step{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto}.f-progress-step .f-progress-step-vertical-fill .step .f-progressstep-row{-webkit-box-flex:1;flex:1 1 auto;display:-webkit-box;display:flex}.f-progress-step li.clickable{cursor:pointer}.f-progress-step li.click-disable{cursor:not-allowed}.f-progress-step .f-progress-step-empty{color:#000;opacity:.65;font-size:.875rem}.f-progress-step .f-progressstep-row-multi{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:left;align-items:left}.f-progress-step .f-progressstep-row-multi .f-progressstep-multi-item-content{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;cursor:pointer}.f-progress-step .f-progressstep-row-multi .f-step-multi-item{position:relative;padding-right:.4375rem;padding-bottom:.9375rem}.f-progress-step .f-progressstep-row-multi .f-step-multi-item:last-child{padding-bottom:0}.f-progress-step .f-progressstep-row-multi .f-step-multi-item.f-step-multi-item-active .f-progress-step-title .step-name,.f-progress-step .f-progressstep-row-multi .f-step-multi-item.f-step-multi-item-finish .f-progress-step-title .step-name{color:rgba(0,0,0,.85)!important}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row.f-progressstep-row-multi{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row.f-progressstep-row-multi .f-step-multi-item{padding:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.f-progress-step .f-progress-step-list-block .step .f-progressstep-row.f-progressstep-row-multi .f-step-multi-item .f-progress-step-line{display:block}"]
                }] }
    ];
    /** @nocollapse */
    ProgressStepComponent.ctorParameters = function () { return []; };
    ProgressStepComponent.propDecorators = {
        progressStepTemplate: [{ type: ContentChild, args: [ProgressStepItemTemplateDirective, { read: TemplateRef },] }],
        progressStepExtendTmpl: [{ type: ContentChild, args: [ProgressStepExtendTemplateDirective, { read: TemplateRef },] }],
        direction: [{ type: Input }],
        fill: [{ type: Input }],
        clickable: [{ type: Input }],
        stepsCls: [{ type: Input }],
        fHeight: [{ type: Input }],
        stepStyle: [{ type: Input }],
        stepClick: [{ type: Output, args: ["stepClick",] }],
        steps: [{ type: Input }],
        currentId: [{ type: Input }],
        storedIndexState: [{ type: Input }],
        subStepData: [{ type: Input }],
        stepData: [{ type: Input }]
    };
    return ProgressStepComponent;
}());
export { ProgressStepComponent };
if (false) {
    /** @type {?} */
    ProgressStepComponent.prototype.progressStepTemplate;
    /** @type {?} */
    ProgressStepComponent.prototype.progressStepExtendTmpl;
    /**
     * 横向horizontal、竖向排列vertical
     * @type {?}
     */
    ProgressStepComponent.prototype.direction;
    /**
     * 是否铺满
     * @type {?}
     */
    ProgressStepComponent.prototype.fill;
    /**
     * 是否支持点击
     * @type {?}
     */
    ProgressStepComponent.prototype.clickable;
    /** @type {?} */
    ProgressStepComponent.prototype.stepsCls;
    /** @type {?} */
    ProgressStepComponent.prototype.fHeight;
    /** @type {?} */
    ProgressStepComponent.prototype.stepStyle;
    /** @type {?} */
    ProgressStepComponent.prototype.stepClick;
    /**
     * steps与stepData，选择一个使用
     * 指定步骤条数据，是数组。常用在写自定义模版的地方。
     * [{id:string,title:string,icon?string,hidden?boolean}]
     * @type {?}
     */
    ProgressStepComponent.prototype.steps;
    /**
     * 指定当前步骤的数据Id
     * @type {?}
     */
    ProgressStepComponent.prototype.currentId;
    /** @type {?} */
    ProgressStepComponent.prototype.storedIndexState;
    /**
     * 指定子项数据中，哪个是活动的
     * {子项步骤id:指定子项处于活动步骤的顺序}比如{"data3":2}
     * @type {?}
     */
    ProgressStepComponent.prototype._subStepData;
    /**
     * 过滤隐藏的步骤信息，记录当前显示的步骤条，
     * @type {?}
     */
    ProgressStepComponent.prototype.stepMessages;
    /**
     * 记录当前步骤所在的位置，从0开始
     * @type {?}
     */
    ProgressStepComponent.prototype.activeIndex;
    /** @type {?} */
    ProgressStepComponent.prototype.currentIndex;
    /**
     * @type {?}
     * @private
     */
    ProgressStepComponent.prototype.innerStepData;
    /**
     * steps与stepData，选择一个使用。
     * stepData常被表单绑定使用，数据类型
     * {activeIndex:number,stepMessages:[{id:string,title:string,icon?string,hidden?boolean}]}
     * activeIndex: 指定活动的步骤在数组中的位置,
     * stepMessages: 所有步骤数据的数组
     * @type {?}
     */
    ProgressStepComponent.prototype._stepData;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3Mtc3RlcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXByb2dyZXNzLXN0ZXAvIiwic291cmNlcyI6WyJsaWIvcHJvZ3Jlc3Mtc3RlcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBRVQsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsV0FBVyxFQUNYLFlBQVksRUFDWixZQUFZLEdBR2IsTUFBTSxlQUFlLENBQUM7QUFFdkI7SUFJRSwyQ0FBbUIsUUFBMEI7UUFBMUIsYUFBUSxHQUFSLFFBQVEsQ0FBa0I7SUFBSSxDQUFDOztnQkFKbkQsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxvQkFBb0I7aUJBQy9COzs7O2dCQVRDLFdBQVc7O0lBWWIsd0NBQUM7Q0FBQSxBQUxELElBS0M7U0FGWSxpQ0FBaUM7OztJQUNoQyxxREFBaUM7O0FBRy9DO0lBSUUsNkNBQW1CLFFBQTBCO1FBQTFCLGFBQVEsR0FBUixRQUFRLENBQWtCO0lBQUksQ0FBQzs7Z0JBSm5ELFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsc0JBQXNCO2lCQUNqQzs7OztnQkFoQkMsV0FBVzs7SUFtQmIsMENBQUM7Q0FBQSxBQUxELElBS0M7U0FGWSxtQ0FBbUM7OztJQUNsQyx1REFBaUM7Ozs7O0FBRy9DLGlDQVFDOzs7SUFQQyx5QkFBVzs7SUFDWCw0QkFBYzs7SUFDZCwyQkFBYzs7SUFDZCw2QkFBZ0I7O0lBQ2hCLG1DQUF1Qjs7SUFDdkIsNkJBQWlCOztJQUNqQiw0QkFBZTs7Ozs7QUFFakIsa0NBR0M7OztJQUZDLG1DQUFvQjs7SUFDcEIsb0NBQTRCOztBQUc5QjtJQStERTs7Ozs7O1FBaERTLGNBQVMsR0FBRyxZQUFZLENBQUM7Ozs7UUFFekIsU0FBSSxHQUFZLEtBQUssQ0FBQzs7OztRQUV0QixjQUFTLEdBQVksS0FBSyxDQUFDOztRQUUzQixhQUFRLEdBQUcsRUFBRSxDQUFDO1FBSUYsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFZM0MscUJBQWdCLEdBQVksS0FBSyxDQUFDOzs7O1FBcUIzQyxnQkFBVyxHQUFXLENBQUMsQ0FBQztJQUtSLENBQUM7SUFuQmpCLHNCQUNJLDhDQUFXOzs7O1FBR2Y7WUFDRSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQzs7Ozs7UUFORCxVQUNnQixLQUFLO1lBQ25CLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQzVCLENBQUM7OztPQUFBOzs7O0lBa0JELHdDQUFROzs7SUFBUixjQUFhLENBQUM7SUFTZCxzQkFDSSwyQ0FBUTs7OztRQU9aO1lBQ0UsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7Ozs7O1FBVkQsVUFDYSxLQUFLO1lBQ2hCLElBQUksS0FBSyxFQUFFO2dCQUNULFdBQVc7Z0JBQ1gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ2xCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDdEI7UUFDSCxDQUFDOzs7T0FBQTs7Ozs7SUFLRCwyQ0FBVzs7OztJQUFYLFVBQVksT0FBc0I7UUFBbEMsaUJBYUM7UUFaQyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDNUMseUNBQXlDO1lBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2hDLE9BQU87YUFDUjtZQUNELElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTzs7OztZQUFDLFVBQUMsSUFBSSxJQUFLLE9BQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFsQixDQUFrQixFQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07Ozs7WUFBQyxVQUFDLElBQUksSUFBSyxPQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBWixDQUFZLEVBQUMsQ0FBQzs7Z0JBQzFELEtBQUssR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVM7Ozs7WUFDckMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLEtBQUksQ0FBQyxTQUFTLEVBQTFCLENBQTBCLEVBQ3JDO1lBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQUVELFdBQVc7Ozs7Ozs7SUFDWCx5Q0FBUzs7Ozs7O0lBQVQsVUFBVSxJQUFJLEVBQUUsS0FBSztRQUNuQixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBQ3ZEO0lBQ0gsQ0FBQzs7Ozs7SUFFRCxzQ0FBTTs7OztJQUFOLFVBQU8sS0FBSztRQUNWLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3pCLElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxLQUFLLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO2FBQzFCO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO2FBQzNCO1NBQ0Y7YUFBTTtZQUNMLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTzs7Ozs7WUFBQyxVQUFDLElBQUksRUFBRSxDQUFDO2dCQUNoQyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUU7b0JBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUM7aUJBQ3hCO3FCQUFNLElBQUksQ0FBQyxHQUFHLEtBQUssRUFBRTtvQkFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7aUJBQ2xCO3FCQUFNO29CQUNMLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO2lCQUN4QjtZQUNILENBQUMsRUFBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRUQsU0FBUzs7Ozs7SUFDVCx3Q0FBUTs7OztJQUFSO1FBQ0UsSUFDRSxJQUFJLENBQUMsZ0JBQWdCO1lBQ3JCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUNoRDtZQUNBLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNyQjtRQUNELElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDbkQsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztZQUN0RCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztZQUMxRCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbkIsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzthQUN0QztTQUNGO1FBQ0QsMEJBQTBCO0lBQzVCLENBQUM7SUFDRCxTQUFTOzs7OztJQUNULHdDQUFROzs7O0lBQVI7UUFDRSxzREFBc0Q7UUFDdEQseUJBQXlCO1FBQ3pCLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFO1lBQ3hCLDJEQUEyRDtZQUMzRCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQ2hELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO1lBQzFELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNuQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ3RDO1NBQ0Y7UUFDRCwwQkFBMEI7SUFDNUIsQ0FBQzs7OztJQUVELG1EQUFtQjs7O0lBQW5CO1FBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7Ozs7O0lBRUQsd0NBQVE7Ozs7SUFBUixVQUFTLElBQUk7UUFDWCxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxFQUFFO1lBQ3ZELElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQyxJQUFJO2dCQUNoQyx5Q0FBeUM7Z0JBQ3pDLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO2dCQUNqQixHQUFHO1lBQ0wsQ0FBQyxFQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxNQUFNOzs7O1lBQUMsVUFBQyxJQUFJO2dCQUNuRCxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN0QixDQUFDLEVBQUMsQ0FBQztTQUNKO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDdkMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDekIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQzs7Ozs7SUFFRCwrQ0FBZTs7OztJQUFmLFVBQWdCLFlBQTBCO1FBQ3hDLElBQUksWUFBWSxFQUFFO1lBQ2hCLCtCQUErQjtZQUMvQixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1NBQzdCO0lBQ0gsQ0FBQzs7Ozs7SUFFRCw4Q0FBYzs7OztJQUFkLFVBQWUsR0FBVzs7WUFDcEIsU0FBUyxHQUNYLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUM7SUFDL0IsQ0FBQzs7Z0JBcE1GLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsc0JBQXNCO29CQUNoQyw4b0xBQTZDOztpQkFFOUM7Ozs7O3VDQUVFLFlBQVksU0FBQyxpQ0FBaUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7eUNBRXJFLFlBQVksU0FBQyxtQ0FBbUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7NEJBT3ZFLEtBQUs7dUJBRUwsS0FBSzs0QkFFTCxLQUFLOzJCQUVMLEtBQUs7MEJBQ0wsS0FBSzs0QkFFTCxLQUFLOzRCQUNMLE1BQU0sU0FBQyxXQUFXO3dCQU9sQixLQUFLOzRCQUlMLEtBQUs7bUNBQ0wsS0FBSzs4QkFPTCxLQUFLOzJCQThCTCxLQUFLOztJQTJIUiw0QkFBQztDQUFBLEFBck1ELElBcU1DO1NBaE1ZLHFCQUFxQjs7O0lBQ2hDLHFEQUN1Qzs7SUFDdkMsdURBQ3lDOzs7OztJQU16QywwQ0FBa0M7Ozs7O0lBRWxDLHFDQUErQjs7Ozs7SUFFL0IsMENBQW9DOztJQUVwQyx5Q0FBdUI7O0lBQ3ZCLHdDQUF5Qjs7SUFFekIsMENBQXdCOztJQUN4QiwwQ0FBb0Q7Ozs7Ozs7SUFPcEQsc0NBQThCOzs7OztJQUk5QiwwQ0FBMkI7O0lBQzNCLGlEQUEyQzs7Ozs7O0lBTTNDLDZDQUFhOzs7OztJQVdiLDZDQUE0Qjs7Ozs7SUFJNUIsNENBQXdCOztJQUN4Qiw2Q0FBcUI7Ozs7O0lBRXJCLDhDQUFvQzs7Ozs7Ozs7O0lBWXBDLDBDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIE9uSW5pdCxcclxuICBJbnB1dCxcclxuICBPdXRwdXQsXHJcbiAgRGlyZWN0aXZlLFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIENvbnRlbnRDaGlsZCxcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiBcIltwcm9ncmVzc1N0ZXBJdGVtXVwiLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NTdGVwSXRlbVRlbXBsYXRlRGlyZWN0aXZlIHtcclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4pIHsgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogXCJbcHJvZ3Jlc3NTdGVwRXh0ZW5kXVwiLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NTdGVwRXh0ZW5kVGVtcGxhdGVEaXJlY3RpdmUge1xyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB0ZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PikgeyB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2Ugc3RlcE1lc3NhZ2Uge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBpY29uPzogc3RyaW5nO1xyXG4gIHN0YXR1cz86IHN0cmluZztcclxuICBjbGlja0Rpc2FibGU/OiBib29sZWFuO1xyXG4gIGhpZGRlbj86IGJvb2xlYW47XHJcbiAgY2xhc3M/OiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBwcm9ncmVzc0RhdGEge1xyXG4gIGFjdGl2ZUluZGV4OiBudW1iZXI7XHJcbiAgc3RlcE1lc3NhZ2VzOiBzdGVwTWVzc2FnZVtdO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogXCJmYXJyaXMtcHJvZ3Jlc3Mtc3RlcFwiLFxyXG4gIHRlbXBsYXRlVXJsOiBcIi4vcHJvZ3Jlc3Mtc3RlcC5jb21wb25lbnQuaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wiLi9wcm9ncmVzcy1zdGVwLmNvbXBvbmVudC5zY3NzXCJdLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NTdGVwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBDb250ZW50Q2hpbGQoUHJvZ3Jlc3NTdGVwSXRlbVRlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pXHJcbiAgcHJvZ3Jlc3NTdGVwVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQENvbnRlbnRDaGlsZChQcm9ncmVzc1N0ZXBFeHRlbmRUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KVxyXG4gIHByb2dyZXNzU3RlcEV4dGVuZFRtcGw6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gIC8v6L+b5bqm5p2h5pWw5o2uXHJcbiAgLy8gQElucHV0KCkgc3RlcERhdGE6cHJvZ3Jlc3NEYXRhO1xyXG5cclxuICAvKirmqKrlkJFob3Jpem9udGFs44CB56uW5ZCR5o6S5YiXdmVydGljYWwqL1xyXG4gIEBJbnB1dCgpIGRpcmVjdGlvbiA9IFwiaG9yaXpvbnRhbFwiO1xyXG4gIC8qKuaYr+WQpumTuua7oSAqL1xyXG4gIEBJbnB1dCgpIGZpbGw6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvKirmmK/lkKbmlK/mjIHngrnlh7sgKi9cclxuICBASW5wdXQoKSBjbGlja2FibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvLyDmraXpqqTmnaHmlbTkvZPmoLflvI9cclxuICBASW5wdXQoKSBzdGVwc0NscyA9IFwiXCI7XHJcbiAgQElucHV0KCkgZkhlaWdodDogbnVtYmVyO1xyXG4gIC8vIOatpemqpOadoVN0eWxlLOWGmeazlSBbc3RlcFN0eWxlXT1cInsnbWF4LXdpZHRoJzonMTAwcHgnfVwiXHJcbiAgQElucHV0KCkgc3RlcFN0eWxlOiBhbnk7XHJcbiAgQE91dHB1dChcInN0ZXBDbGlja1wiKSBzdGVwQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIHN0ZXBz5LiOc3RlcERhdGHvvIzpgInmi6nkuIDkuKrkvb/nlKhcclxuICAgKiDmjIflrprmraXpqqTmnaHmlbDmja7vvIzmmK/mlbDnu4TjgILluLjnlKjlnKjlhpnoh6rlrprkuYnmqKHniYjnmoTlnLDmlrnjgIJcclxuICAgKiBbe2lkOnN0cmluZyx0aXRsZTpzdHJpbmcsaWNvbj9zdHJpbmcsaGlkZGVuP2Jvb2xlYW59XVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHN0ZXBzOiBzdGVwTWVzc2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIOaMh+WumuW9k+WJjeatpemqpOeahOaVsOaNrklkXHJcbiAgICovXHJcbiAgQElucHV0KCkgY3VycmVudElkOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgc3RvcmVkSW5kZXhTdGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiDmjIflrprlrZDpobnmlbDmja7kuK3vvIzlk6rkuKrmmK/mtLvliqjnmoRcclxuICAgKiB75a2Q6aG55q2l6aqkaWQ65oyH5a6a5a2Q6aG55aSE5LqO5rS75Yqo5q2l6aqk55qE6aG65bqPfeavlOWmgntcImRhdGEzXCI6Mn1cclxuICAgKi9cclxuICBfc3ViU3RlcERhdGE7XHJcbiAgQElucHV0KClcclxuICBzZXQgc3ViU3RlcERhdGEodmFsdWUpIHtcclxuICAgIHRoaXMuX3N1YlN0ZXBEYXRhID0gdmFsdWU7XHJcbiAgfVxyXG4gIGdldCBzdWJTdGVwRGF0YSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9zdWJTdGVwRGF0YTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6L+H5ruk6ZqQ6JeP55qE5q2l6aqk5L+h5oGv77yM6K6w5b2V5b2T5YmN5pi+56S655qE5q2l6aqk5p2h77yMXHJcbiAgICovXHJcbiAgc3RlcE1lc3NhZ2VzOiBzdGVwTWVzc2FnZVtdO1xyXG4gIC8qKlxyXG4gICAqIOiusOW9leW9k+WJjeatpemqpOaJgOWcqOeahOS9jee9ru+8jOS7jjDlvIDlp4tcclxuICAgKi9cclxuICBhY3RpdmVJbmRleDogbnVtYmVyID0gMDtcclxuICBjdXJyZW50SW5kZXg6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBpbm5lclN0ZXBEYXRhOiBwcm9ncmVzc0RhdGE7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkgeyB9XHJcbiAgLyoqXHJcbiAgICogc3RlcHPkuI5zdGVwRGF0Ye+8jOmAieaLqeS4gOS4quS9v+eUqOOAglxyXG4gICAqIHN0ZXBEYXRh5bi46KKr6KGo5Y2V57uR5a6a5L2/55So77yM5pWw5o2u57G75Z6LXHJcbiAgICoge2FjdGl2ZUluZGV4Om51bWJlcixzdGVwTWVzc2FnZXM6W3tpZDpzdHJpbmcsdGl0bGU6c3RyaW5nLGljb24/c3RyaW5nLGhpZGRlbj9ib29sZWFufV19XHJcbiAgICogYWN0aXZlSW5kZXg6IOaMh+Wumua0u+WKqOeahOatpemqpOWcqOaVsOe7hOS4reeahOS9jee9rixcclxuICAgKiBzdGVwTWVzc2FnZXM6IOaJgOacieatpemqpOaVsOaNrueahOaVsOe7hFxyXG4gICAqL1xyXG4gIF9zdGVwRGF0YTogcHJvZ3Jlc3NEYXRhO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHN0ZXBEYXRhKHZhbHVlKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgLy8g5LqM6YCJ5LiA5bGe5oCn77yM6YeN572uXHJcbiAgICAgIHRoaXMuc3RlcHMgPSBudWxsO1xyXG4gICAgICB0aGlzLnN0ZXBJbml0KHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IHN0ZXBEYXRhKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBEYXRhO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgaWYgKGNoYW5nZXNbXCJzdGVwc1wiXSB8fCBjaGFuZ2VzW1wiY3VycmVudElkXCJdKSB7XHJcbiAgICAgIC8vIHN0ZXBz5rKh5pyJ5YC85oiW6ICFc3RlcERhdGHmnInlgLzvvIzpg73kuI3lpITnkIbvvIzov5nkuKTkuKrlsZ7mgKflr7nnlKjmiLfmmK/kuozpgInkuIBcclxuICAgICAgaWYgKCF0aGlzLnN0ZXBzIHx8IHRoaXMuc3RlcERhdGEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zdGVwcy5mb3JFYWNoKChpdGVtKSA9PiAoaXRlbS5zdGF0dXMgPSBcIlwiKSk7XHJcbiAgICAgIHRoaXMuc3RlcE1lc3NhZ2VzID0gdGhpcy5zdGVwcy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmhpZGRlbik7XHJcbiAgICAgIGxldCBpbmRleCA9IHRoaXMuc3RlcE1lc3NhZ2VzLmZpbmRJbmRleChcclxuICAgICAgICAoaXRlbSkgPT4gaXRlbS5pZCA9PT0gdGhpcy5jdXJyZW50SWRcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4ID09PSAtMSA/IDAgOiBpbmRleDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKueCueWHu+afkOS4gOatpSAqL1xyXG4gIGxpc3RDbGljayhzdGVwLCBpbmRleCkge1xyXG4gICAgaWYgKHRoaXMuY2xpY2thYmxlKSB7XHJcbiAgICAgIHRoaXMuc3RlcENsaWNrLmVtaXQoeyBcInN0ZXBcIjogc3RlcCwgXCJpbmRleFwiOiBpbmRleCB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdvU3RlcChpbmRleCkge1xyXG4gICAgaWYgKHRoaXMuc3RvcmVkSW5kZXhTdGF0ZSkge1xyXG4gICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA9PSBpbmRleCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gbnVsbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGluZGV4O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0ZXBNZXNzYWdlcy5mb3JFYWNoKChzdGVwLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKGkgPCBpbmRleCkge1xyXG4gICAgICAgICAgc3RlcC5zdGF0dXMgPSBcImZpbmlzaFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaSA+IGluZGV4KSB7XHJcbiAgICAgICAgICBzdGVwLnN0YXR1cyA9IFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0ZXAuc3RhdHVzID0gXCJhY3RpdmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKirkuIvkuIDmraUgKi9cclxuICBuZXh0U3RlcCgpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5zdG9yZWRJbmRleFN0YXRlICYmXHJcbiAgICAgIHRoaXMuY3VycmVudEluZGV4IDwgdGhpcy5zdGVwTWVzc2FnZXMubGVuZ3RoIC0gMVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEluZGV4Kys7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA8IHRoaXMuc3RlcE1lc3NhZ2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgdGhpcy5zdGVwTWVzc2FnZXNbdGhpcy5hY3RpdmVJbmRleF0uc3RhdHVzID0gXCJmaW5pc2hcIjtcclxuICAgICAgdGhpcy5zdGVwTWVzc2FnZXNbdGhpcy5hY3RpdmVJbmRleCArIDFdLnN0YXR1cyA9IFwiYWN0aXZlXCI7XHJcbiAgICAgIHRoaXMuYWN0aXZlSW5kZXgrKztcclxuICAgICAgaWYgKHRoaXMuc3RvcmVkSW5kZXhTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gdGhpcy5hY3RpdmVJbmRleDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9yZXR1cm4gdGhpcy5hY3RpdmVJbmRleDtcclxuICB9XHJcbiAgLyoq5LiK5LiA5q2lICovXHJcbiAgcHJldlN0ZXAoKSB7XHJcbiAgICAvLyBpZih0aGlzLnN0b3JlZEluZGV4U3RhdGUgJiYgdGhpcy5jdXJyZW50SW5kZXggPiAwKXtcclxuICAgIC8vICAgdGhpcy5jdXJyZW50SW5kZXgtLTtcclxuICAgIC8vIH1cclxuICAgIGlmICh0aGlzLmFjdGl2ZUluZGV4ID4gMCkge1xyXG4gICAgICAvLyBlbHNlIGlmKHRoaXMuYWN0aXZlSW5kZXggPiAwICYmICF0aGlzLnN0b3JlZEluZGV4U3RhdGUpe1xyXG4gICAgICB0aGlzLnN0ZXBNZXNzYWdlc1t0aGlzLmFjdGl2ZUluZGV4XS5zdGF0dXMgPSBcIlwiO1xyXG4gICAgICB0aGlzLnN0ZXBNZXNzYWdlc1t0aGlzLmFjdGl2ZUluZGV4IC0gMV0uc3RhdHVzID0gXCJhY3RpdmVcIjtcclxuICAgICAgdGhpcy5hY3RpdmVJbmRleC0tO1xyXG4gICAgICBpZiAodGhpcy5zdG9yZWRJbmRleFN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL3JldHVybiB0aGlzLmFjdGl2ZUluZGV4O1xyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFN0ZXBJbmRleCgpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdGl2ZUluZGV4O1xyXG4gIH1cclxuXHJcbiAgc3RlcEluaXQoZGF0YSkge1xyXG4gICAgaWYgKGRhdGFbXCJzdGVwTWVzc2FnZXNcIl0gJiYgZGF0YVtcInN0ZXBNZXNzYWdlc1wiXS5sZW5ndGgpIHtcclxuICAgICAgZGF0YVtcInN0ZXBNZXNzYWdlc1wiXS5mb3JFYWNoKChzdGVwKSA9PiB7XHJcbiAgICAgICAgLy9pZih0eXBlb2Ygc3RlcC5zdGF0dXMgPT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICBzdGVwLnN0YXR1cyA9IFwiXCI7XHJcbiAgICAgICAgLy99XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnN0ZXBNZXNzYWdlcyA9IGRhdGFbXCJzdGVwTWVzc2FnZXNcIl0uZmlsdGVyKChzdGVwKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFzdGVwLmhpZGRlbjtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gZGF0YVtcImFjdGl2ZUluZGV4XCJdO1xyXG4gICAgaWYgKHRoaXMuc3RvcmVkSW5kZXhTdGF0ZSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRQcm9ncmVzc0RhdGEocHJvZ3Jlc3NEYXRhOiBwcm9ncmVzc0RhdGEpIHtcclxuICAgIGlmIChwcm9ncmVzc0RhdGEpIHtcclxuICAgICAgLy90aGlzLnN0ZXBEYXRhID0gcHJvZ3Jlc3NEYXRhO1xyXG4gICAgICB0aGlzLnN0ZXBJbml0KHByb2dyZXNzRGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRBY3RpdmVJbmRleChudW06IG51bWJlcikge1xyXG4gICAgbGV0IGFjdGl2ZU51bTogbnVtYmVyID1cclxuICAgICAgbnVtID49IDAgJiYgbnVtIDwgdGhpcy5zdGVwTWVzc2FnZXMubGVuZ3RoID8gbnVtIDogMDtcclxuICAgIHRoaXMuYWN0aXZlSW5kZXggPSBhY3RpdmVOdW07XHJcbiAgfVxyXG59XHJcbiJdfQ==