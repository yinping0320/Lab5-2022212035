/**
 * @fileoverview added by tsickle
 * Generated from: lib/quickInputDatagrid.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild } from "@angular/core";
import { ApiLocalService } from "../utils/api-service";
import { DatagridComponent } from "@farris/ui-datagrid";
import { of } from 'rxjs';
// 兼容保留，该组件无用
var quickInputDatagridComponent = /** @class */ (function () {
    function quickInputDatagridComponent(ApiLocalService) {
        var _this = this;
        this.ApiLocalService = ApiLocalService;
        this.isAllSelect = new EventEmitter();
        /**
         * 人员展示区的复选框取消勾选时触发逻辑
         * @param $event
         * @return
         */
        this.onBeforeUncheck = (/**
         * @param {?} $event
         * @return {?}
         */
        function ($event) {
            _this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            function (selection, index) {
                if ($event.rowData["id"] === selection["id"]) {
                    _this.selections.splice(index, 1);
                }
            }));
            /** @type {?} */
            var emitojb = {
                items: _this.itemsQuick,
                pageIndex: _this.pageIndexQuick,
                pageSize: _this.pageSizeQuick,
                pageTotal: _this.pageTotalQuick,
                pageTotalAll: _this.pageTotalAllQuick,
                unSelectedList: _this.unSelectedListQuick
            };
            _this.isAllSelect.emit(emitojb);
            return of(true);
        });
    }
    /**
     * @return {?}
     */
    quickInputDatagridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.quickInputDatagrid.loadData(this.itemsQuick);
    };
    /**
     * @return {?}
     */
    quickInputDatagridComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.pageChangeCheck();
    };
    /**
       * 人员展示区datagrid用于数据加载
       */
    /**
     * 人员展示区datagrid用于数据加载
     * @return {?}
     */
    quickInputDatagridComponent.prototype.unSelectedListLoad = /**
     * 人员展示区datagrid用于数据加载
     * @return {?}
     */
    function () {
        var _this = this;
        this.itemsQuick = [];
        this.unSelectedListQuick.forEach((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.itemsQuick.push({ "displayname": res.displayname, "nameChs": res.nameChs, "id": res.id, "organization": res.organization, "organizationName": res.userOrganize, "userInFo": res.userInfo });
        }));
        this.quickInputDatagrid.loadData(this.itemsQuick);
        this.pageChangeCheck();
        /** @type {?} */
        var emitojb = {
            items: this.itemsQuick,
            pageIndex: this.pageIndexQuick,
            pageSize: this.pageSizeQuick,
            pageTotal: this.pageTotalQuick,
            pageTotalAll: this.pageTotalAllQuick,
            unSelectedList: this.unSelectedListQuick
        };
        this.isAllSelect.emit(emitojb);
    };
    /**
       * 当前行选中
       * @param data 当前行的数据（）
       */
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    quickInputDatagridComponent.prototype.selectLine = /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    function (data) {
        if (this.isSingleCheck) {
            if (this.selections.length == 0 || this._isInArray(data.id, "id", this.selections)) {
                this._insertOneIntoSelections(data.data);
            }
            else {
                alert(this.noSelectToRight);
            }
        }
        else {
            this._insertOneIntoSelections(data.data);
        }
        /** @type {?} */
        var emitojb = {
            items: this.itemsQuick,
            pageIndex: this.pageIndexQuick,
            pageSize: this.pageSizeQuick,
            pageTotal: this.pageTotalQuick,
            pageTotalAll: this.pageTotalAllQuick,
            unSelectedList: this.unSelectedListQuick
        };
        this.isAllSelect.emit(emitojb);
    };
    //人员展示翻页触发查询（！）
    //人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    quickInputDatagridComponent.prototype.switchPage = 
    //人员展示翻页触发查询（！）
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        this.pageIndexQuick = size.pageIndex;
        /** @type {?} */
        var isChinese;
        //中文
        if (/^[\u4e00-\u9fa5]+$/i.test(this.quickInput)) {
            isChinese = 0;
        }
        else if (!(/^[\u4e00-\u9fa5]+$/i.test(this.quickInput)) && !(escape(this.quickInput).indexOf("%u") < 0)) {
            alert("输入框禁止同时输入汉字和拼音或汉字和数字！");
            //英文
        }
        else if (/^[a-zA-Z]+$/.test(this.quickInput)) {
            if (this.quickInput.length > 3) {
                isChinese = 2;
            }
            else
                (isChinese = 3);
        }
        else {
            isChinese = 1;
        }
    };
    /**
       * 选中并插入当前行数据到右侧
       * @param data 当前行的数据
       * @param collection 暂存当前数据的集合
       */
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    quickInputDatagridComponent.prototype._insertOneIntoSelections = /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var collection = [];
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data["id"], "id", this.selections)) {
            return;
        }
        collection.push(data);
        this._insertSomeIntoSelections(collection);
    };
    /**
         * 判断是否在内
         * @param value
         * @param field
         * @param array
         * @returns
         */
    /**
     * 判断是否在内
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    quickInputDatagridComponent.prototype._isInArray = /**
     * 判断是否在内
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; })) ? true : false;
    };
    /**
     * @param {?} userArray
     * @return {?}
     */
    quickInputDatagridComponent.prototype._insertSomeIntoSelections = /**
     * @param {?} userArray
     * @return {?}
     */
    function (userArray) {
        var _this = this;
        userArray.forEach((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            if (!_this._isInArray(user["id"], "id", _this.selections)) {
                _this.selections.push(user);
            }
        }));
    };
    /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         */
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    quickInputDatagridComponent.prototype.pageChangeCheck = /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.unSelectedListQuick) {
            this.unSelectedListQuick.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (_this._isInArray(item.id, "id", _this.selections)) {
                    _this.quickInputDatagrid.checkRow(item.id);
                }
                else {
                    _this.quickInputDatagrid.unCheckRow(item.id);
                }
            }));
        }
    };
    quickInputDatagridComponent.decorators = [
        { type: Component, args: [{
                    template: "<farris-datagrid #quickInputDatagrid class=\"s-unSelectDatagrid-query\" [pagerViewMode]=\"'simple'\" [checkOnSelect]=\"true\"\n    [selectOnCheck]=\"true\" [multiSelect]=\"true\" [columns]=\"columnsQuick\" [data]=\"itemsQuick\"\n    [enableSelectRow]=\"true\" [showHeader]=\"false\" [fitColumns]=\"true\" [height]=\"200\"\n    [showBorder]=\"false\" [striped]=\"false\" [fit]=\"true\" [showPageNumber]=\"false\"\n    [pageIndex]=\"pageIndexQuick\" [pageSize]=\"pageSizeQuick\" [total]=\"pageTotalAllQuick\"\n    (checked)=\"selectLine($event)\" (pageChanged)=\"switchPage($event)\"\n    [beforeUncheck]=\"onBeforeUncheck\">\n  </farris-datagrid>"
                }] }
    ];
    /** @nocollapse */
    quickInputDatagridComponent.ctorParameters = function () { return [
        { type: ApiLocalService }
    ]; };
    quickInputDatagridComponent.propDecorators = {
        quickInputDatagrid: [{ type: ViewChild, args: ['quickInputDatagrid',] }],
        columnsQuick: [{ type: Input }],
        url2: [{ type: Input }],
        itemsQuick: [{ type: Input }],
        pageIndexQuick: [{ type: Input }],
        pageSizeQuick: [{ type: Input }],
        pageTotalAllQuick: [{ type: Input }],
        pathQuick: [{ type: Input }],
        orgIdQuick: [{ type: Input }],
        isContainQuick: [{ type: Input }],
        pageTotalQuick: [{ type: Input }],
        isSingleCheck: [{ type: Input }],
        selections: [{ type: Input }],
        noSelectToRight: [{ type: Input }],
        quickInput: [{ type: Input }],
        isLoadOutData: [{ type: Input }],
        unSelectedQuickLists: [{ type: Input }],
        unSelectedListQuick: [{ type: Input }],
        organizationList: [{ type: Input }],
        listIdField: [{ type: Input }],
        searchPage: [{ type: Input }],
        isenabled: [{ type: Input }],
        isExcludeMe: [{ type: Input }],
        isAllSelect: [{ type: Output }]
    };
    return quickInputDatagridComponent;
}());
export { quickInputDatagridComponent };
if (false) {
    /** @type {?} */
    quickInputDatagridComponent.prototype.quickInputDatagrid;
    /** @type {?} */
    quickInputDatagridComponent.prototype.columnsQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.url2;
    /** @type {?} */
    quickInputDatagridComponent.prototype.itemsQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageIndexQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageSizeQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageTotalAllQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pathQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.orgIdQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isContainQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.pageTotalQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isSingleCheck;
    /** @type {?} */
    quickInputDatagridComponent.prototype.selections;
    /** @type {?} */
    quickInputDatagridComponent.prototype.noSelectToRight;
    /** @type {?} */
    quickInputDatagridComponent.prototype.quickInput;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isLoadOutData;
    /** @type {?} */
    quickInputDatagridComponent.prototype.unSelectedQuickLists;
    /** @type {?} */
    quickInputDatagridComponent.prototype.unSelectedListQuick;
    /** @type {?} */
    quickInputDatagridComponent.prototype.organizationList;
    /** @type {?} */
    quickInputDatagridComponent.prototype.listIdField;
    /** @type {?} */
    quickInputDatagridComponent.prototype.searchPage;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isenabled;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isExcludeMe;
    /** @type {?} */
    quickInputDatagridComponent.prototype.isAllSelect;
    /**
     * 人员展示区的复选框取消勾选时触发逻辑
     * \@param $event
     * \@return
     * @type {?}
     */
    quickInputDatagridComponent.prototype.onBeforeUncheck;
    /**
     * @type {?}
     * @private
     */
    quickInputDatagridComponent.prototype.ApiLocalService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVpY2tJbnB1dERhdGFncmlkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktcGVyc29ubmVsLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL3F1aWNrSW5wdXREYXRhZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQzs7QUFHMUI7SUF1Q0kscUNBQ1ksZUFBZ0M7UUFENUMsaUJBRUs7UUFETyxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFIbEMsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOzs7Ozs7UUF3RmhELG9CQUFlOzs7O1FBQUcsVUFBQyxNQUFNO1lBQ3JCLEtBQUksQ0FBQyxVQUFVLENBQUMsT0FBTzs7Ozs7WUFBQyxVQUFDLFNBQVMsRUFBRSxLQUFLO2dCQUNyQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUMxQyxLQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQ3BDO1lBQ0wsQ0FBQyxFQUFDLENBQUE7O2dCQUNFLE9BQU8sR0FBRztnQkFDVixLQUFLLEVBQUUsS0FBSSxDQUFDLFVBQVU7Z0JBQ3RCLFNBQVMsRUFBRSxLQUFJLENBQUMsY0FBYztnQkFDOUIsUUFBUSxFQUFFLEtBQUksQ0FBQyxhQUFhO2dCQUM1QixTQUFTLEVBQUUsS0FBSSxDQUFDLGNBQWM7Z0JBQzlC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QUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUMvQztZQUNMLENBQUMsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOztnQkFqTUosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSx1b0JBT087aUJBQ3BCOzs7O2dCQWRRLGVBQWU7OztxQ0FrQm5CLFNBQVMsU0FBQyxvQkFBb0I7K0JBRTlCLEtBQUs7dUJBQ0wsS0FBSzs2QkFDTCxLQUFLO2lDQUNMLEtBQUs7Z0NBQ0wsS0FBSztvQ0FDTCxLQUFLOzRCQUNMLEtBQUs7NkJBQ0wsS0FBSztpQ0FDTCxLQUFLO2lDQUNMLEtBQUs7Z0NBQ0wsS0FBSzs2QkFDTCxLQUFLO2tDQUNMLEtBQUs7NkJBQ0wsS0FBSztnQ0FDTCxLQUFLO3VDQUNMLEtBQUs7c0NBQ0wsS0FBSzttQ0FDTCxLQUFLOzhCQUNMLEtBQUs7NkJBQ0wsS0FBSzs0QkFDTCxLQUFLOzhCQUNMLEtBQUs7OEJBQ0wsTUFBTTs7SUErSlgsa0NBQUM7Q0FBQSxBQXBNRCxJQW9NQztTQXpMWSwyQkFBMkI7OztJQUVwQyx5REFBdUU7O0lBRXZFLG1EQUEwQjs7SUFDMUIsMkNBQWtCOztJQUNsQixpREFBd0I7O0lBQ3hCLHFEQUE0Qjs7SUFDNUIsb0RBQTJCOztJQUMzQix3REFBK0I7O0lBQy9CLGdEQUF1Qjs7SUFDdkIsaURBQXdCOztJQUN4QixxREFBNEI7O0lBQzVCLHFEQUE0Qjs7SUFDNUIsb0RBQTJCOztJQUMzQixpREFBd0I7O0lBQ3hCLHNEQUE2Qjs7SUFDN0IsaURBQXdCOztJQUN4QixvREFBMkI7O0lBQzNCLDJEQUFrQzs7SUFDbEMsMERBQWlDOztJQUNqQyx1REFBOEI7O0lBQzlCLGtEQUE0Qjs7SUFDNUIsaURBQTZCOztJQUM3QixnREFBMkI7O0lBQzNCLGtEQUE2Qjs7SUFDN0Isa0RBQWdEOzs7Ozs7O0lBd0ZoRCxzREFnQkM7Ozs7O0lBckdHLHNEQUF3QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBBcGlMb2NhbFNlcnZpY2UgfSBmcm9tIFwiLi4vdXRpbHMvYXBpLXNlcnZpY2VcIjtcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tIFwiQGZhcnJpcy91aS1kYXRhZ3JpZFwiO1xyXG5pbXBvcnQgeyBvZiB9IGZyb20gJ3J4anMnO1xyXG5cclxuLy8g5YW85a655L+d55WZ77yM6K+l57uE5Lu25peg55SoXHJcbkBDb21wb25lbnQoe1xyXG4gICAgdGVtcGxhdGU6IGA8ZmFycmlzLWRhdGFncmlkICNxdWlja0lucHV0RGF0YWdyaWQgY2xhc3M9XCJzLXVuU2VsZWN0RGF0YWdyaWQtcXVlcnlcIiBbcGFnZXJWaWV3TW9kZV09XCInc2ltcGxlJ1wiIFtjaGVja09uU2VsZWN0XT1cInRydWVcIlxyXG4gICAgW3NlbGVjdE9uQ2hlY2tdPVwidHJ1ZVwiIFttdWx0aVNlbGVjdF09XCJ0cnVlXCIgW2NvbHVtbnNdPVwiY29sdW1uc1F1aWNrXCIgW2RhdGFdPVwiaXRlbXNRdWlja1wiXHJcbiAgICBbZW5hYmxlU2VsZWN0Um93XT1cInRydWVcIiBbc2hvd0hlYWRlcl09XCJmYWxzZVwiIFtmaXRDb2x1bW5zXT1cInRydWVcIiBbaGVpZ2h0XT1cIjIwMFwiXHJcbiAgICBbc2hvd0JvcmRlcl09XCJmYWxzZVwiIFtzdHJpcGVkXT1cImZhbHNlXCIgW2ZpdF09XCJ0cnVlXCIgW3Nob3dQYWdlTnVtYmVyXT1cImZhbHNlXCJcclxuICAgIFtwYWdlSW5kZXhdPVwicGFnZUluZGV4UXVpY2tcIiBbcGFnZVNpemVdPVwicGFnZVNpemVRdWlja1wiIFt0b3RhbF09XCJwYWdlVG90YWxBbGxRdWlja1wiXHJcbiAgICAoY2hlY2tlZCk9XCJzZWxlY3RMaW5lKCRldmVudClcIiAocGFnZUNoYW5nZWQpPVwic3dpdGNoUGFnZSgkZXZlbnQpXCJcclxuICAgIFtiZWZvcmVVbmNoZWNrXT1cIm9uQmVmb3JlVW5jaGVja1wiPlxyXG4gIDwvZmFycmlzLWRhdGFncmlkPmBcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBxdWlja0lucHV0RGF0YWdyaWRDb21wb25lbnQge1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3F1aWNrSW5wdXREYXRhZ3JpZCcpIHF1aWNrSW5wdXREYXRhZ3JpZDogRGF0YWdyaWRDb21wb25lbnQ7XHJcblxyXG4gICAgQElucHV0KCkgY29sdW1uc1F1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHVybDI6IGFueVxyXG4gICAgQElucHV0KCkgaXRlbXNRdWljazogYW55XHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXhRdWljazogYW55XHJcbiAgICBASW5wdXQoKSBwYWdlU2l6ZVF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHBhZ2VUb3RhbEFsbFF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHBhdGhRdWljazogYW55XHJcbiAgICBASW5wdXQoKSBvcmdJZFF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIGlzQ29udGFpblF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIHBhZ2VUb3RhbFF1aWNrOiBhbnlcclxuICAgIEBJbnB1dCgpIGlzU2luZ2xlQ2hlY2s6IGFueVxyXG4gICAgQElucHV0KCkgc2VsZWN0aW9uczogYW55XHJcbiAgICBASW5wdXQoKSBub1NlbGVjdFRvUmlnaHQ6IGFueVxyXG4gICAgQElucHV0KCkgcXVpY2tJbnB1dDogYW55XHJcbiAgICBASW5wdXQoKSBpc0xvYWRPdXREYXRhOiBhbnlcclxuICAgIEBJbnB1dCgpIHVuU2VsZWN0ZWRRdWlja0xpc3RzOiBhbnlcclxuICAgIEBJbnB1dCgpIHVuU2VsZWN0ZWRMaXN0UXVpY2s6IGFueVxyXG4gICAgQElucHV0KCkgb3JnYW5pemF0aW9uTGlzdDogYW55XHJcbiAgICBASW5wdXQoKSBsaXN0SWRGaWVsZDogc3RyaW5nXHJcbiAgICBASW5wdXQoKSBzZWFyY2hQYWdlOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgaXNlbmFibGVkOiBudW1iZXI7XHJcbiAgICBASW5wdXQoKSBpc0V4Y2x1ZGVNZTogbnVtYmVyO1xyXG4gICAgQE91dHB1dCgpIGlzQWxsU2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBBcGlMb2NhbFNlcnZpY2U6IEFwaUxvY2FsU2VydmljZSxcclxuICAgICkgeyB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5xdWlja0lucHV0RGF0YWdyaWQubG9hZERhdGEodGhpcy5pdGVtc1F1aWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wYWdlQ2hhbmdlQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgICog5Lq65ZGY5bGV56S65Yy6ZGF0YWdyaWTnlKjkuo7mlbDmja7liqDovb1cclxuICAgICAgICovXHJcbiAgICB1blNlbGVjdGVkTGlzdExvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtc1F1aWNrID0gW107XHJcbiAgICAgICAgdGhpcy51blNlbGVjdGVkTGlzdFF1aWNrLmZvckVhY2gocmVzID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtc1F1aWNrLnB1c2goeyBcImRpc3BsYXluYW1lXCI6IHJlcy5kaXNwbGF5bmFtZSwgXCJuYW1lQ2hzXCI6IHJlcy5uYW1lQ2hzLCBcImlkXCI6IHJlcy5pZCwgXCJvcmdhbml6YXRpb25cIjogcmVzLm9yZ2FuaXphdGlvbiwgXCJvcmdhbml6YXRpb25OYW1lXCI6IHJlcy51c2VyT3JnYW5pemUsIFwidXNlckluRm9cIjogcmVzLnVzZXJJbmZvIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5xdWlja0lucHV0RGF0YWdyaWQubG9hZERhdGEodGhpcy5pdGVtc1F1aWNrKTtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VDaGVjaygpO1xyXG4gICAgICAgIGxldCBlbWl0b2piID0ge1xyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtc1F1aWNrLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4UXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbDogdGhpcy5wYWdlVG90YWxRdWljayxcclxuICAgICAgICAgICAgcGFnZVRvdGFsQWxsOiB0aGlzLnBhZ2VUb3RhbEFsbFF1aWNrLFxyXG4gICAgICAgICAgICB1blNlbGVjdGVkTGlzdDogdGhpcy51blNlbGVjdGVkTGlzdFF1aWNrXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQWxsU2VsZWN0LmVtaXQoZW1pdG9qYik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAqIOW9k+WJjeihjOmAieS4rVxyXG4gICAgICAgKiBAcGFyYW0gZGF0YSDlvZPliY3ooYznmoTmlbDmja7vvIjvvIlcclxuICAgICAgICovXHJcbiAgICBzZWxlY3RMaW5lKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2luZ2xlQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucy5sZW5ndGggPT0gMCB8fCB0aGlzLl9pc0luQXJyYXkoZGF0YS5pZCwgXCJpZFwiLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnNlcnRPbmVJbnRvU2VsZWN0aW9ucyhkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQodGhpcy5ub1NlbGVjdFRvUmlnaHQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBlbWl0b2piID0ge1xyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtc1F1aWNrLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4UXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbDogdGhpcy5wYWdlVG90YWxRdWljayxcclxuICAgICAgICAgICAgcGFnZVRvdGFsQWxsOiB0aGlzLnBhZ2VUb3RhbEFsbFF1aWNrLFxyXG4gICAgICAgICAgICB1blNlbGVjdGVkTGlzdDogdGhpcy51blNlbGVjdGVkTGlzdFF1aWNrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBbGxTZWxlY3QuZW1pdChlbWl0b2piKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+S6uuWRmOWxleekuue/u+mhteinpuWPkeafpeivou+8iO+8ge+8iVxyXG4gICAgc3dpdGNoUGFnZShzaXplKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlSW5kZXhRdWljayA9IHNpemUucGFnZUluZGV4O1xyXG4gICAgICAgIGxldCBpc0NoaW5lc2U6IG51bWJlcjtcclxuICAgICAgICAvL+S4reaWh1xyXG4gICAgICAgIGlmICgvXltcXHU0ZTAwLVxcdTlmYTVdKyQvaS50ZXN0KHRoaXMucXVpY2tJbnB1dCkpIHtcclxuICAgICAgICAgICAgaXNDaGluZXNlID0gMDtcclxuICAgICAgICB9IGVsc2UgaWYgKCEoL15bXFx1NGUwMC1cXHU5ZmE1XSskL2kudGVzdCh0aGlzLnF1aWNrSW5wdXQpKSAmJiAhKGVzY2FwZSh0aGlzLnF1aWNrSW5wdXQpLmluZGV4T2YoXCIldVwiKSA8IDApKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwi6L6T5YWl5qGG56aB5q2i5ZCM5pe26L6T5YWl5rGJ5a2X5ZKM5ou86Z+z5oiW5rGJ5a2X5ZKM5pWw5a2X77yBXCIpXHJcbiAgICAgICAgICAgIC8v6Iux5paHXHJcbiAgICAgICAgfSBlbHNlIGlmICgvXlthLXpBLVpdKyQvLnRlc3QodGhpcy5xdWlja0lucHV0KSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5xdWlja0lucHV0Lmxlbmd0aCA+IDMpIHtcclxuICAgICAgICAgICAgICAgIGlzQ2hpbmVzZSA9IDJcclxuICAgICAgICAgICAgfSBlbHNlIChcclxuICAgICAgICAgICAgICAgIGlzQ2hpbmVzZSA9IDNcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlzQ2hpbmVzZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAgKiDkurrlkZjlsZXnpLrljLrnmoTlpI3pgInmoYblj5bmtojli77pgInml7bop6blj5HpgLvovpFcclxuICAgICAgICogQHBhcmFtICRldmVudFxyXG4gICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgKi9cclxuICAgIG9uQmVmb3JlVW5jaGVjayA9ICgkZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaCgoc2VsZWN0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoJGV2ZW50LnJvd0RhdGFbXCJpZFwiXSA9PT0gc2VsZWN0aW9uW1wiaWRcIl0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgZW1pdG9qYiA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaXRlbXNRdWljayxcclxuICAgICAgICAgICAgcGFnZUluZGV4OiB0aGlzLnBhZ2VJbmRleFF1aWNrLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZVF1aWNrLFxyXG4gICAgICAgICAgICBwYWdlVG90YWw6IHRoaXMucGFnZVRvdGFsUXVpY2ssXHJcbiAgICAgICAgICAgIHBhZ2VUb3RhbEFsbDogdGhpcy5wYWdlVG90YWxBbGxRdWljayxcclxuICAgICAgICAgICAgdW5TZWxlY3RlZExpc3Q6IHRoaXMudW5TZWxlY3RlZExpc3RRdWlja1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQWxsU2VsZWN0LmVtaXQoZW1pdG9qYik7XHJcbiAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAgKiDpgInkuK3lubbmj5LlhaXlvZPliY3ooYzmlbDmja7liLDlj7PkvqdcclxuICAgICAgICogQHBhcmFtIGRhdGEg5b2T5YmN6KGM55qE5pWw5o2uXHJcbiAgICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uIOaaguWtmOW9k+WJjeaVsOaNrueahOmbhuWQiFxyXG4gICAgICAgKi9cclxuICAgIF9pbnNlcnRPbmVJbnRvU2VsZWN0aW9ucyhkYXRhOiBhbnkpIHtcclxuICAgICAgICBsZXQgY29sbGVjdGlvbjogYW55W10gPSBbXTtcclxuICAgICAgICAvLyDlpoLmnpzlvZPliY3mlbDmja7lt7Lnu4/np7vlhaXlj7PkvqfmlbDmja7vvIzliJnov5Tlm57jgIJcclxuICAgICAgICBpZiAodGhpcy5faXNJbkFycmF5KGRhdGFbXCJpZFwiXSwgXCJpZFwiLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29sbGVjdGlvbi5wdXNoKGRhdGEpXHJcbiAgICAgICAgdGhpcy5faW5zZXJ0U29tZUludG9TZWxlY3Rpb25zKGNvbGxlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAgICAqIOWIpOaWreaYr+WQpuWcqOWGhVxyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICAgICAqIEBwYXJhbSBmaWVsZFxyXG4gICAgICAgICAqIEBwYXJhbSBhcnJheVxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICovXHJcbiAgICBfaXNJbkFycmF5KHZhbHVlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcsIGFycmF5OiBhbnlbXSkge1xyXG4gICAgICAgIGlmICghZmllbGQgfHwgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5YmNMuS4quWPguaVsOW/heWhqycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuZmluZChpdGVtID0+IHZhbHVlID09PSBpdGVtW2ZpZWxkXSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2luc2VydFNvbWVJbnRvU2VsZWN0aW9ucyh1c2VyQXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgdXNlckFycmF5LmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNJbkFycmF5KHVzZXJbXCJpZFwiXSwgXCJpZFwiLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMucHVzaCh1c2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICAgICog57+76aG15qOA5p+l77ya5Lq65ZGY5bGV56S65Yy655qE5Yu+6YCJ54q25oCB5LiO5bey6YCJ5Lq65ZGY5Yy65piv5ZCm5a+55bqUXHJcbiAgICAgICAgICovXHJcbiAgICBwYWdlQ2hhbmdlQ2hlY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudW5TZWxlY3RlZExpc3RRdWljaykge1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRMaXN0UXVpY2suZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoaXRlbS5pZCwgXCJpZFwiLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWlja0lucHV0RGF0YWdyaWQuY2hlY2tSb3coaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVpY2tJbnB1dERhdGFncmlkLnVuQ2hlY2tSb3coaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59XHJcbiJdfQ==