/**
 * @fileoverview added by tsickle
 * Generated from: utils/api-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { BasePathService } from '@farris/rtf';
var ApiLocalService = /** @class */ (function () {
    function ApiLocalService(http) {
        this.http = http;
    }
    /**
     * @param {?} param
     * @return {?}
     */
    ApiLocalService.prototype.filterGroupLeader = /**
     * @param {?} param
     * @return {?}
     */
    function (param) {
        /** @type {?} */
        var url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/modify');
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    };
    /**
     * @param {?} param
     * @return {?}
     */
    ApiLocalService.prototype.getGroupLeaderStatus = /**
     * @param {?} param
     * @return {?}
     */
    function (param) {
        /** @type {?} */
        var url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/getRecentContacts');
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    };
    /**
     * 获取行政组织
     * @returns observable
     */
    /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getOrganization = /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    function (url, param) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/org', param, options);
    };
    /**
     * 获取系统用户分组
     * @returns observable
     */
    /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getSysUserGroup = /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    function (param) {
        /** @type {?} */
        var url = BasePathService.convertPath('/api/runtime/sys/v1.0/usergroups');
        /** @type {?} */
        var paramStr = JSON.stringify(param);
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
            params: {
                param: paramStr,
            }
        };
        return this.http.get(url, options);
    };
    /**
     *
     * @param url url地址
     * @param absOrgType 系统组织
     * @param orgId 组织id
     * @param requestParam 请求参数
     * @returns observable
     */
    /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelByOrgId = /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    function (url, absOrgType, orgId, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            // 组织类型，默认为系统组织
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            orgId: orgId,
            // 组织id，获取当前组织下的用户
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            posId: requestParam.posId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    // 根据系统用户分组id获取分组下成员
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getPersonnelByUserGroupId = 
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    function (url, requestParam) {
        /** @type {?} */
        var body = {
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            // 是否获取用户头像
            withAllGroup: requestParam.withAllGroup,
            withAllOrg: requestParam.withAllOrg,
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            groupId: requestParam.groupId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
        };
        // 需要根据组织进行人员二次过滤
        if (requestParam.orgId) {
            body['orgId'] = requestParam.orgId;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param url url地址
     * @param absOrgType 系统类型
     * @param ids 人员id
     * @returns observable
     */
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} searchParam
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelByUserIds = /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} searchParam
     * @return {?} observable
     */
    function (url, searchParam) {
        /** @type {?} */
        var idsArr = [];
        /** @type {?} */
        var userIds = searchParam.ids;
        if (userIds) {
            /** @type {?} */
            var lastChar = userIds.substring(userIds.length - 1);
            if (lastChar == ',') {
                /** @type {?} */
                var fixedIds = userIds.substring(0, userIds.length - 1);
                idsArr = fixedIds.split(',');
            }
            else {
                idsArr = userIds.split(',');
            }
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        if (searchParam.absOrgType == 'System_organization' && searchParam.securityControl) {
            /** @type {?} */
            var searchRequestBody = {
                securityControl: searchParam.securityControl,
                securityLevel: searchParam.securityLevel,
                idList: idsArr
            };
            return this.http.post(url + "/user/orgType/" + searchParam.absOrgType, searchRequestBody, options);
        }
        else {
            return this.http.post(url + "/user/" + searchParam.absOrgType, idsArr, options);
        }
    };
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param url 传入的url
     * @param absOrgType 数据源类型
     * @param codeOrName 传入的搜索内容
     * @param requestParam 请求参数
     * @returns observable
     */
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    ApiLocalService.prototype.getPersonnelBySearch = /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    function (url, absOrgType, codeOrName, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            // 组织类型，默认为系统组织
            getUserInfo: true,
            codeOrName: codeOrName,
            // 搜索内容
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            searchMode: 'or',
            pinyin: codeOrName,
            initials: codeOrName,
            filterId: requestParam.filterId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
            // 暂无法提交测试
            //reverseOrgAllPath: requestParam.reverseOrgAllPath
        };
        if (requestParam.orgId) {
            body.orgId = requestParam.orgId;
        }
        if (requestParam.pageSize) {
            body.pageSize = requestParam.pageSize;
        }
        if (requestParam.pageIndex) {
            body.pageIndex = requestParam.pageIndex;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    };
    /**
     * 获取群组信息
     * @param url 接口地址
     * @returns observable
     */
    /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    ApiLocalService.prototype.getGroupOrGroupPersonnel = /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    function (url, param) {
        /** @type {?} */
        var baseUrl = url;
        if (param.parentid) {
            baseUrl += '?iseanble=' + param.isenable + '&parentid=' + param.parentid;
        }
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.get(baseUrl, options);
    };
    // 获取选人组件全局配置参数
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    ApiLocalService.prototype.getGlobalParamConfig = 
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, options);
    };
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getFilterPosition = 
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    function (url, absOrgType, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    };
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getFilterOrganization = 
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    function (url, absOrgType, requestParam) {
        /** @type {?} */
        var body = {
            absOrgType: absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            groupId: requestParam.groupId,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    };
    /**
     * @param {?} url
     * @return {?}
     */
    ApiLocalService.prototype.getUserPositionInfo = /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/userPosition', options);
    };
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getAssignQueryResult = /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    function (url, requestParam) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, requestParam, options);
    };
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    ApiLocalService.prototype.getUserManageAssignResult = /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    function (url, requestParam) {
        /** @type {?} */
        var options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/userManageResult', requestParam, options);
    };
    ApiLocalService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ApiLocalService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    return ApiLocalService;
}());
export { ApiLocalService };
if (false) {
    /** @type {?} */
    ApiLocalService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBlcnNvbm5lbC1zZWxlY3Rvci8iLCJzb3VyY2VzIjpbInV0aWxzL2FwaS1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBYyxNQUFNLHNCQUFzQixDQUFDO0FBRTNFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFOUM7SUFHSSx5QkFBbUIsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtJQUFJLENBQUM7Ozs7O0lBRXhDLDJDQUFpQjs7OztJQUFqQixVQUFrQixLQUFVOztZQUNsQixHQUFHLEdBQUcsZUFBZSxDQUFDLFdBQVcsQ0FBQyxnREFBZ0QsQ0FBQzs7WUFDbkYsT0FBTyxHQUFHO1lBQ1osT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQyxDQUFDOzs7OztJQUVELDhDQUFvQjs7OztJQUFwQixVQUFxQixLQUFVOztZQUNyQixHQUFHLEdBQUcsZUFBZSxDQUFDLFdBQVcsQ0FBQywyREFBMkQsQ0FBQzs7WUFDOUYsT0FBTyxHQUFHO1lBQ1osT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7O0lBQ0gseUNBQWU7Ozs7OztJQUFm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TyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLG1CQUFtQixFQUFFLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM1RSxDQUFDOztnQkFqVEosVUFBVTs7OztnQkFKRixVQUFVOztJQXVUbkIsc0JBQUM7Q0FBQSxBQW5URCxJQW1UQztTQWxUWSxlQUFlOzs7SUFFWiwrQkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBPcmdSZXF1ZXN0UGFyYW0sIFBlcnNvbm5lbFJlcXVlc3RQYXJhbSwgU2VhcmNoVXNlckJ5SWRSZXF1ZXN0UGFyYW0gfSBmcm9tICcuL3VzZXIudHlwZSc7XHJcbmltcG9ydCB7IEJhc2VQYXRoU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvcnRmJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEFwaUxvY2FsU2VydmljZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIGh0dHA6IEh0dHBDbGllbnQpIHsgfVxyXG5cclxuICAgIGZpbHRlckdyb3VwTGVhZGVyKHBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBCYXNlUGF0aFNlcnZpY2UuY29udmVydFBhdGgoJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9tb2RpZnknKTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBwYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R3JvdXBMZWFkZXJTdGF0dXMocGFyYW06IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IEJhc2VQYXRoU2VydmljZS5jb252ZXJ0UGF0aCgnL2FwaS9ydW50aW1lL3N5cy92MS4wL2Fic1JlY2VudENvbnRhY3RzL2dldFJlY2VudENvbnRhY3RzJyk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgcGFyYW0sIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6KGM5pS/57uE57uHXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldE9yZ2FuaXphdGlvbih1cmw6IHN0cmluZywgcGFyYW06IE9yZ1JlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL29yZycsIHBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluezu+e7n+eUqOaIt+WIhue7hFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICAgZ2V0U3lzVXNlckdyb3VwKHBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBCYXNlUGF0aFNlcnZpY2UuY29udmVydFBhdGgoJy9hcGkvcnVudGltZS9zeXMvdjEuMC91c2VyZ3JvdXBzJyk7XHJcbiAgICAgICAgY29uc3QgcGFyYW1TdHIgPSBKU09OLnN0cmluZ2lmeShwYXJhbSk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtOiBwYXJhbVN0cixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXJsIHVybOWcsOWdgFxyXG4gICAgICogQHBhcmFtIGFic09yZ1R5cGUg57O757uf57uE57uHXHJcbiAgICAgKiBAcGFyYW0gb3JnSWQg57uE57uHaWRcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW0g6K+35rGC5Y+C5pWwXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldFBlcnNvbm5lbEJ5T3JnSWQodXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgb3JnSWQ6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBQZXJzb25uZWxSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBhYnNPcmdUeXBlLCAvLyDnu4Tnu4fnsbvlnovvvIzpu5jorqTkuLrns7vnu5/nu4Tnu4dcclxuICAgICAgICAgICAgcGFnZUluZGV4OiByZXF1ZXN0UGFyYW0ucGFnZUluZGV4LCAvLyDlvZPliY3pobVcclxuICAgICAgICAgICAgcGFnZVNpemU6IHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSwgLy8g5q+P6aG16K6w5b2V5pWwXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiB0cnVlLCAvLyDmmK/lkKbojrflj5bnlKjmiLflpLTlg49cclxuICAgICAgICAgICAgb3JnSWQsIC8vIOe7hOe7h2lk77yM6I635Y+W5b2T5YmN57uE57uH5LiL55qE55So5oi3XHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLCAvLyDojrflj5bnu4Tnu4flj4rlhbbmiYDmnInkuIvnuqfnu4Tnu4fkuIvnmoTnlKjmiLfvvIzpu5jorqRmYWxzZVxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLCAvLyDmmK/lkKbojrflj5blgZznlKjnlKjmiLfvvIzpu5jorqTkuLpmYWxzZe+8jFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLCAvLyDmmK/lkKbojrflj5blvZPliY3nlKjmiLfvvIzpu5jorqTkuLp0cnVl77yMXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLCAvLyDmjpLluo9cclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBwb3NJZDogcmVxdWVzdFBhcmFtLnBvc0lkLFxyXG4gICAgICAgICAgICB3aXRoUGVybWlzc2lvbjogcmVxdWVzdFBhcmFtLndpdGhQZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICBhdXRoT3A6IHJlcXVlc3RQYXJhbS5hdXRoT3AsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5Q29udHJvbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5Q29udHJvbCxcclxuICAgICAgICAgICAgc2VjdXJpdHlMZXZlbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5TGV2ZWxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCArICcvdXNlcicsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOagueaNruezu+e7n+eUqOaIt+WIhue7hGlk6I635Y+W5YiG57uE5LiL5oiQ5ZGYXHJcbiAgICBnZXRQZXJzb25uZWxCeVVzZXJHcm91cElkKHVybDogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogcmVxdWVzdFBhcmFtLnBhZ2VJbmRleCwgLy8g5b2T5YmN6aG1XHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiByZXF1ZXN0UGFyYW0ucGFnZVNpemUsIC8vIOavj+mhteiusOW9leaVsFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogdHJ1ZSwgLy8g5piv5ZCm6I635Y+W55So5oi35aS05YOPXHJcbiAgICAgICAgICAgIHdpdGhBbGxHcm91cDogcmVxdWVzdFBhcmFtLndpdGhBbGxHcm91cCxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsIC8vIOaYr+WQpuiOt+WPluWBnOeUqOeUqOaIt++8jOm7mOiupOS4umZhbHNl77yMXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsIC8vIOaYr+WQpuiOt+WPluW9k+WJjeeUqOaIt++8jOm7mOiupOS4unRydWXvvIxcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogcmVxdWVzdFBhcmFtLm9yZGVyRmllbGQsIC8vIOaOkuW6j1xyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGdyb3VwSWQ6IHJlcXVlc3RQYXJhbS5ncm91cElkLFxyXG4gICAgICAgICAgICB3aXRoUGVybWlzc2lvbjogcmVxdWVzdFBhcmFtLndpdGhQZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICBhdXRoT3A6IHJlcXVlc3RQYXJhbS5hdXRoT3AsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5Q29udHJvbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5Q29udHJvbCxcclxuICAgICAgICAgICAgc2VjdXJpdHlMZXZlbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5TGV2ZWxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIOmcgOimgeagueaNrue7hOe7h+i/m+ihjOS6uuWRmOS6jOasoei/h+a7pFxyXG4gICAgICAgIGlmKHJlcXVlc3RQYXJhbS5vcmdJZCkge1xyXG4gICAgICAgICAgICBib2R5WydvcmdJZCddID0gcmVxdWVzdFBhcmFtLm9yZ0lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL3VzZXInLCBib2R5LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOafpeivouihjOaUv+S6uuWRmO+8iOagueaNruS6uuWRmGlk6L+U5Zue55u45YWz5pWw5o2u77yJXHJcbiAgICAgKiBAcGFyYW0gdXJsIHVybOWcsOWdgFxyXG4gICAgICogQHBhcmFtIGFic09yZ1R5cGUg57O757uf57G75Z6LXHJcbiAgICAgKiBAcGFyYW0gaWRzIOS6uuWRmGlkXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldFBlcnNvbm5lbEJ5VXNlcklkcyh1cmw6IHN0cmluZywgc2VhcmNoUGFyYW06IFNlYXJjaFVzZXJCeUlkUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgbGV0IGlkc0FyciA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZHMgPSBzZWFyY2hQYXJhbS5pZHM7IFxyXG4gICAgICAgIGlmICh1c2VySWRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDaGFyID0gdXNlcklkcy5zdWJzdHJpbmcodXNlcklkcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgaWYgKGxhc3RDaGFyID09ICcsJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZml4ZWRJZHMgPSB1c2VySWRzLnN1YnN0cmluZygwLCB1c2VySWRzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaWRzQXJyID0gZml4ZWRJZHMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlkc0FyciA9IHVzZXJJZHMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChzZWFyY2hQYXJhbS5hYnNPcmdUeXBlID09ICdTeXN0ZW1fb3JnYW5pemF0aW9uJyAmJiBzZWFyY2hQYXJhbS5zZWN1cml0eUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVxdWVzdEJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBzZWN1cml0eUNvbnRyb2w6IHNlYXJjaFBhcmFtLnNlY3VyaXR5Q29udHJvbCxcclxuICAgICAgICAgICAgICAgIHNlY3VyaXR5TGV2ZWw6IHNlYXJjaFBhcmFtLnNlY3VyaXR5TGV2ZWwsXHJcbiAgICAgICAgICAgICAgICBpZExpc3Q6IGlkc0FyclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoYCR7dXJsfS91c2VyL29yZ1R5cGUvJHtzZWFyY2hQYXJhbS5hYnNPcmdUeXBlfWAsIHNlYXJjaFJlcXVlc3RCb2R5LCBvcHRpb25zKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoYCR7dXJsfS91c2VyLyR7c2VhcmNoUGFyYW0uYWJzT3JnVHlwZX1gLCBpZHNBcnIsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouihjOaUv+S6uuWRmO+8iOagueaNruWQjeensOOAgee8luWPt+aQnOe0ou+8iVxyXG4gICAgICogQHBhcmFtIHVybCDkvKDlhaXnmoR1cmxcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOaVsOaNrua6kOexu+Wei1xyXG4gICAgICogQHBhcmFtIGNvZGVPck5hbWUg5Lyg5YWl55qE5pCc57Si5YaF5a65XHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtIOivt+axguWPguaVsFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeVNlYXJjaCh1cmw6IHN0cmluZywgYWJzT3JnVHlwZTogc3RyaW5nLCBjb2RlT3JOYW1lOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keTogYW55ID0ge1xyXG4gICAgICAgICAgICBhYnNPcmdUeXBlLCAvLyDnu4Tnu4fnsbvlnovvvIzpu5jorqTkuLrns7vnu5/nu4Tnu4dcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHRydWUsIC8vIOaYr+WQpuiOt+WPlueUqOaIt+WktOWDjyxcclxuICAgICAgICAgICAgY29kZU9yTmFtZSwgLy8g5pCc57Si5YaF5a65XHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLCAvLyDojrflj5bnu4Tnu4flj4rlhbbmiYDmnInkuIvnuqfnu4Tnu4fkuIvnmoTnlKjmiLfvvIzpu5jorqRmYWxzZVxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLCAvLyDmmK/lkKbojrflj5blgZznlKjnlKjmiLfvvIzpu5jorqTkuLpmYWxzZe+8jFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLCAvLyDmmK/lkKbojrflj5blvZPliY3nlKjmiLfvvIzpu5jorqTkuLp0cnVl77yMXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLCAvLyDmjpLluo9cclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBzZWFyY2hNb2RlOiAnb3InLFxyXG4gICAgICAgICAgICBwaW55aW46IGNvZGVPck5hbWUsXHJcbiAgICAgICAgICAgIGluaXRpYWxzOiBjb2RlT3JOYW1lLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICB3aXRoUGVybWlzc2lvbjogcmVxdWVzdFBhcmFtLndpdGhQZXJtaXNzaW9uLFxyXG4gICAgICAgICAgICBhdXRoT3A6IHJlcXVlc3RQYXJhbS5hdXRoT3AsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5Q29udHJvbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5Q29udHJvbCxcclxuICAgICAgICAgICAgc2VjdXJpdHlMZXZlbDogcmVxdWVzdFBhcmFtLnNlY3VyaXR5TGV2ZWxcclxuICAgICAgICAgICAgLy8g5pqC5peg5rOV5o+Q5Lqk5rWL6K+VXHJcbiAgICAgICAgICAgIC8vcmV2ZXJzZU9yZ0FsbFBhdGg6IHJlcXVlc3RQYXJhbS5yZXZlcnNlT3JnQWxsUGF0aFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbS5vcmdJZCkge1xyXG4gICAgICAgICAgICBib2R5Lm9yZ0lkID0gcmVxdWVzdFBhcmFtLm9yZ0lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBhcmFtLnBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIGJvZHkucGFnZVNpemUgPSByZXF1ZXN0UGFyYW0ucGFnZVNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgIGJvZHkucGFnZUluZGV4ID0gcmVxdWVzdFBhcmFtLnBhZ2VJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyJywgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bnvqTnu4Tkv6Hmga9cclxuICAgICAqIEBwYXJhbSB1cmwg5o6l5Y+j5Zyw5Z2AXHJcbiAgICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlXHJcbiAgICAgKi9cclxuICAgIGdldEdyb3VwT3JHcm91cFBlcnNvbm5lbCh1cmw6IHN0cmluZywgcGFyYW0/OiB7IGlzZW5hYmxlOiBib29sZWFuLCBwYXJlbnRpZDogc3RyaW5nIH0pIHtcclxuICAgICAgICBsZXQgYmFzZVVybCA9IHVybDtcclxuICAgICAgICBpZiAocGFyYW0ucGFyZW50aWQpIHtcclxuICAgICAgICAgICAgYmFzZVVybCArPSAnP2lzZWFuYmxlPScgKyBwYXJhbS5pc2VuYWJsZSArICcmcGFyZW50aWQ9JyArIHBhcmFtLnBhcmVudGlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KGJhc2VVcmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlumAieS6uue7hOS7tuWFqOWxgOmFjee9ruWPguaVsFxyXG4gICAgZ2V0R2xvYmFsUGFyYW1Db25maWcodXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlue7hOe7h+aetuaehOS4i+aJgOacieaIkOWRmOaJgOWxnueahOWyl+S9je+8jOeUqOS6juS6uuWRmOS6jOasoei/h+a7pFxyXG4gICAgZ2V0RmlsdGVyUG9zaXRpb24odXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBQZXJzb25uZWxSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBhYnNPcmdUeXBlLFxyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZyxcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHJlcXVlc3RQYXJhbS5nZXRVc2VySW5mbyxcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlcixcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgb3JkZXJGaWVsZDogcmVxdWVzdFBhcmFtLm9yZGVyRmllbGQsXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZCxcclxuICAgICAgICAgICAgY3VyVXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIG9yZ0lkOiByZXF1ZXN0UGFyYW0ub3JnSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlueUqOaIt+WIhue7hOS4i+aJgOacieaIkOWRmOaJgOWxnueahOe7hOe7h++8jOeUqOS6juS6uuWRmOS6jOasoei/h+a7pFxyXG4gICAgZ2V0RmlsdGVyT3JnYW5pemF0aW9uKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiByZXF1ZXN0UGFyYW0uZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGN1clVzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBncm91cElkOiByZXF1ZXN0UGFyYW0uZ3JvdXBJZCxcclxuICAgICAgICAgICAgb3JnSWQ6IHJlcXVlc3RQYXJhbS5vcmdJZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlclBvc2l0aW9uSW5mbyh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL3VzZXJQb3NpdGlvbicsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFzc2lnblF1ZXJ5UmVzdWx0KHVybDogc3RyaW5nLCByZXF1ZXN0UGFyYW06IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIHJlcXVlc3RQYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlck1hbmFnZUFzc2lnblJlc3VsdCh1cmw6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyTWFuYWdlUmVzdWx0JywgcmVxdWVzdFBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19