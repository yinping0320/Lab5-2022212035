/**
 * @fileoverview added by tsickle
 * Generated from: lib/quick-select-page/qsp.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ChangeDetectorRef, Optional } from '@angular/core';
import { noDataImg } from '../../assets/resource';
import { NotifyService } from '@farris/ui-notify';
import { FavoritesTool } from '../../utils/favorites.tool';
import { ApiLocalService } from '../../utils/api-service';
import { debounceTime } from 'rxjs/operators';
import { BehaviorSubject } from 'rxjs';
import { trim } from 'lodash-es';
import { BasePathService } from '@farris/rtf';
export class QuickSelectComponent {
    /**
     * @param {?} apiService
     * @param {?} notifyService
     * @param {?} favoritesTool
     * @param {?} cdRef
     */
    constructor(apiService, notifyService, favoritesTool, cdRef) {
        this.apiService = apiService;
        this.notifyService = notifyService;
        this.favoritesTool = favoritesTool;
        this.cdRef = cdRef;
        this.hasSetGlobalConfigParam = false;
        this.selectionsChange = new EventEmitter();
        this.togglePanelModelChange = new EventEmitter();
        this.allChecked = false;
        this.allIndexId = 'allIndexId';
        this.noDataImg = noDataImg;
        this.items = [];
        this.recentContactsList = [];
        this.favoritesList = [];
        this.searchText = '';
        this.searchTextStream = new BehaviorSubject('');
        this.selections = [];
        this.firstLoad = true;
        this.checkeds = [];
        // 当前已选择的人员，可能不在快捷面板中，因为此处的人员都是最近人员
        this._checkedDataIds = [];
        // 是否显示用户编号
        this.showUserCode = true;
        this.allIndexId = Math.random().toString(16).substring(3, 12);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set quickInput(value) {
        if (!this.firstLoad) {
            this.searchText = trim(value);
            this.searchTextStream.next(value);
        }
        else if (!this.hasSetGlobalConfigParam) {
            /** @type {?} */
            const personnelSelectorParamUrl = '/api/runtime/sys/v1.0/personnel-selector-param';
            /** @type {?} */
            const basePathUrl = BasePathService.convertPath(personnelSelectorParamUrl);
            this.apiService.getGlobalParamConfig(basePathUrl).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            (res) => {
                res['success'] && this.setGlobalConfigParam(res);
                this.hasSetGlobalConfigParam = true;
            }));
        }
        this.firstLoad = false;
        this.checkeds = [];
    }
    ;
    /**
     * @param {?} value
     * @return {?}
     */
    set checkedDataIds(value) {
        this._checkedDataIds = value;
    }
    /**
     * @return {?}
     */
    get checkedDataIds() {
        return this._checkedDataIds;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set originalSelections(value) {
        this.selections = value.slice();
    }
    ;
    /**
     * @return {?}
     */
    ngOnInit() {
        // 兼容老表单
        if (this.favoritesTool) {
            this.favoritesTool.getFavoritesList().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            (result) => {
                this.favoritesList = result ? ((/** @type {?} */ (result))).data : [];
                this.favoritesTool.favoritesList = this.favoritesList.slice();
                this.getRecentContactsList();
            }));
            this.favoritesTool.favoritesSubject.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.favoritesList = data;
                this.assembleItemsFavorites();
            }));
        }
        this.searchTextStream.pipe(debounceTime(500)).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (!!data) {
                this.getItemsBySearch(data);
            }
            else {
                this.items = this.recentContactsList.slice();
                this.assembleItemsChecked();
                this.assembleItemsFavorites();
            }
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @private
     * @param {?} param
     * @return {?}
     */
    setGlobalConfigParam(param) {
        if (this.userTypeMode == 'WfMode' && param.hasOwnProperty('showUserCode') && this.showUserCode !== param['showUserCode']) {
            this.showUserCode = param['showUserCode'];
        }
        // 是否倒序展示组织全路径
        if (param.hasOwnProperty('showOrgAllPathByDesc') && this.showOrgAllPathByDesc !== param['showOrgAllPathByDesc']) {
            this.showOrgAllPathByDesc = param['showOrgAllPathByDesc'];
        }
        // 是否启用权限控制
        if (this.withPermission && param.hasOwnProperty('withPermission') && this.withPermission !== param['withPermission']) {
            this.withPermission = param['withPermission'];
        }
    }
    /**
     * @private
     * @param {?} searchText
     * @return {?}
     */
    getItemsBySearch(searchText) {
        /** @type {?} */
        const searchItems = this.recentContactsList.slice();
        if (!searchText) {
            return;
        }
        this.items = searchItems.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => (item.code && item.code.indexOf(searchText) !== -1) || (item.name && item.name.indexOf(searchText) !== -1) || (item.initials && item.initials.indexOf(searchText) !== -1) || (item.pinyin && item.pinyin.indexOf(searchText) !== -1)));
        this.assembleItemsChecked();
    }
    /**
     * @private
     * @return {?}
     */
    getRecentContactsList() {
        /** @type {?} */
        const param = {
            absOrgType: this.absOrgType,
            bizId: this.busNum,
            objectValue: 'RecentContacts'
        };
        if (this.disableCurrentUser) {
            /** @type {?} */
            const currentUserId = ((/** @type {?} */ (window))).gspframeworkService.common.userInfos.get().id;
            param.filterUserIds = [currentUserId];
        }
        if (this.withPermission) {
            param.withPermission = true;
            param.authOp = 'UserManage';
        }
        if (this.enableSecurityControl) {
            param.securityControl = true;
            param.securityLevel = this.securityLevel;
        }
        this.favoritesTool.curdRecentContactsOrFavorites('query', param).subscribe((/**
         * @param {?} rcRes
         * @return {?}
         */
        (rcRes) => {
            /** @type {?} */
            const rcResData = rcRes ? rcRes.data : [];
            rcResData.forEach((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                res.displayName = !!this.showUserCode ? ('[' + res.code + ']' + res.name) : res.name;
                if (this.showOrgAllPathByDesc && res.orgAllPath) {
                    res.orgAllPath = this.changeDisplayOrgAllPath(res.orgAllPath);
                }
            }));
            this.recentContactsList = rcResData.slice();
            this.items = rcResData.slice();
            this.assembleItemsChecked();
            if (this.enableFavorites) {
                this.assembleItemsFavorites();
            }
        }));
    }
    /**
     * @param {?} showQuickMode
     * @param {?} showAdvancedMode
     * @return {?}
     */
    togglePanelMode(showQuickMode, showAdvancedMode) {
        this.togglePanelModelChange.emit({
            showQuickMode,
            showAdvancedMode
        });
    }
    /**
     * @return {?}
     */
    toggleAll() {
        if (!this.allChecked) {
            this.checkAll();
        }
        else {
            this.unCheckAll();
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    toggleOne(data) {
        if (data.checked) {
            this.unSelectLine(data);
        }
        else {
            this.selectLine(data);
        }
    }
    /**
     * @return {?}
     */
    assembleItemsChecked() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.checked = false;
            item.indexId = Math.random().toString(16).substring(2);
            if ((this.selections.length && this._isInArray(item[this.idField], this.idField, this.selections) !== -1)
                || (this.checkedDataIds.includes(item[this.idField]))) {
                item.checked = true;
                if (this._isInArray(item[this.idField], this.idField, this.checkeds) === -1) {
                    this.checkeds.push(item);
                }
            }
        }));
        this.items = this.items.slice();
        this.checkeds = this.checkeds.slice();
        this.toggleAllChecked();
    }
    /**
     * @return {?}
     */
    assembleItemsFavorites() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.inFavorites = false;
            if (this._isInArray(item[this.idField], this.idField, this.favoritesList) !== -1) {
                item.inFavorites = true;
            }
        }));
        this.items = this.items.slice();
    }
    /**
     * 全选后处理
     * @return {?}
     */
    checkAll() {
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this._insertOneIntoSelections(item);
            item.checked = true;
        }));
    }
    /**
     * 全部取消
     * @return {?} void
     */
    unCheckAll() {
        /** @type {?} */
        const uncheckedIds = [];
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.selections.forEach((/**
             * @param {?} selection
             * @param {?} index
             * @return {?}
             */
            (selection, index) => {
                if (item[this.idField] === selection[this.idField]) {
                    uncheckedIds.push(item[this.idField]);
                }
            }));
            item.checked = false;
        }));
        this.selections = this.selections.filter((/**
         * @param {?} selection
         * @return {?}
         */
        selection => !uncheckedIds.includes(selection[this.idField])));
        this.checkeds = this.checkeds.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => !uncheckedIds.includes(item[this.idField])));
    }
    /**
     * 当前行选中
     * @param {?} data 当前行的数据（）
     * @return {?}
     */
    selectLine(data) {
        if (this.multiSelect) {
            this._insertOneIntoSelections(data);
        }
        else {
            this.selections = [];
            this.items.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (item.checked) {
                    item.checked = false;
                }
            }));
            this._insertOneIntoSelections(data);
        }
        this.toggleAllChecked();
    }
    /**
     * 单选取消选中
     * @param {?} data 取消选中行
     * @return {?}
     */
    unSelectLine(data) {
        /** @type {?} */
        const index = this._isInArray(data[this.idField], this.idField, this.selections);
        if (index > -1) {
            this.selections.splice(index, 1);
        }
        /** @type {?} */
        const indexc = this._isInArray(data[this.idField], this.idField, this.checkeds);
        if (indexc > -1) {
            this.checkeds.splice(indexc, 1);
        }
        if (this.allChecked) {
            this.allChecked = false;
        }
    }
    // 处理逻辑是看上去像是追加，实际上是替换，多选的时候要把之前的数据合进选中数据中
    /**
     * @return {?}
     */
    confirmSelections() {
        /** @type {?} */
        const recentContactsList = [];
        this.recentContactsList.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            recentContactsList.push(item[this.idField]);
        }));
        /** @type {?} */
        const emitObj = {
            selections: this.selections,
            token: 'quick',
            recentContactsList
        };
        this.selectionsChange.emit(emitObj);
    }
    /**
     * @param {?} e
     * @param {?} item
     * @return {?}
     */
    toggleFavorites(e, item) {
        this.favoritesTool.toggleFavorites(e, item);
    }
    /**
     * 选中并插入当前行数据到右侧
     * @param {?} data 当前行的数据
     * @return {?}
     */
    _insertOneIntoSelections(data) {
        // 如果当前数据已经移入右侧数据，则返回。
        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {
            return;
        }
        this.selections.push(data);
        this.checkeds.push(data);
        this.selections = this.selections.slice();
        this.checkeds = this.checkeds.slice();
    }
    /**
     * 判断是否在内
     * @param {?} value value
     * @param {?} field field
     * @param {?} array array
     * @return {?} 位置索引
     */
    _isInArray(value, field, array) {
        if (!field || !value) {
            throw new Error(this.validElementsInfo);
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item[field]));
    }
    /**
     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
     * @return {?}
     */
    toggleAllChecked() {
        if (this.items.length === this.checkeds.length && this.checkeds.length > 0) {
            this.allChecked = true;
        }
        else {
            this.allChecked = false;
        }
    }
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    changeDisplayOrgAllPath(data) {
        if (!data) {
            return '';
        }
        /** @type {?} */
        const orgAllPathArray = data.split('_');
        return orgAllPathArray.reverse().join('_');
    }
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    trackByFn(index, item) {
        return index;
    }
}
QuickSelectComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-quick-select',
                template: "<div #fastDiv class=\"quick-select-panel\">\r\n    <div class=\"quick-select-panel-title\">\r\n        <span *ngIf=\"searchText.length<1\">{{'personnelSelector.quickSelect.recent' | locale}}</span>\r\n        <span *ngIf=\"searchText.length>0\">{{'personnelSelector.quickSelect.result' | locale}}</span>\r\n    </div>\r\n    <div class=\"qsp-list-container\">\r\n        <div class=\"qsp-list-title\" *ngIf=\"items.length > 0\">\r\n            <div class=\"custom-control custom-checkbox\" *ngIf=\"multiSelect\">\r\n                <input class=\"custom-control-input\" [id]=\"allIndexId\" type=\"checkbox\" [(ngModel)]=\"allChecked\">\r\n                <label class=\"custom-control-label\" [for]=\"allIndexId\" (click)=\"toggleAll()\">{{'personnelSelector.tabCommon.checkAll' | locale}}</label>\r\n            </div>\r\n            <div class=\"title-selected-num\">\r\n                {{'personnelSelector.quickSelect.firstTotalText' | locale}} <b>{{selections.length}}</b> {{'personnelSelector.quickSelect.lastTotalText' | locale}}\r\n            </div>\r\n        </div>\r\n        <perfect-scrollbar *ngIf=\"items.length!==0\" style=\"max-height: 265px;\">\r\n            <div class=\"qsp-list-content\">\r\n                <div *ngFor=\"let data of items; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\">\r\n                    <div class=\"custom-control custom-checkbox\">\r\n                        <input class=\"custom-control-input\" [(ngModel)]=\"data.checked\" [id]=\"data.indexId\"\r\n                            type=\"checkbox\">\r\n                        <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data)\">\r\n                            <div style=\"display: flex; height: 32px; margin: -21px 0 0 24px;\">\r\n                                <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"data.ext1\"\r\n                                    [readonly]=\"true\">\r\n                                </farris-avatar>\r\n                                <div\r\n                                    style=\"margin-left: 11px; margin-top: -5px; padding-right: 10px; overflow: hidden;\">\r\n                                    <p class=\"qsp-list-content-title\" title=\"{{data.displayName}}\">\r\n                                        {{data.displayName}}</p>\r\n                                    <p class=\"qsp-list-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                        {{data.orgAllPath}}</p>\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                    <span class=\"f-icon f-icon-star\" *ngIf=\"enableFavorites\"\r\n                        [class.default-light-color]=\"data.inFavorites\" [class.default-dark-color]=\"!data.inFavorites\"\r\n                        (click)=\"toggleFavorites($event, data)\"></span>\r\n                </div>\r\n\r\n            </div>\r\n        </perfect-scrollbar>\r\n        <div *ngIf=\"items.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"qsp-list-nodata\">\r\n            {{'personnelSelector.tabCommon.noUserData' | locale}}</div>\r\n    </div>\r\n    <div class=\"quick-select-foooter\">\r\n        <p (click)=\"togglePanelMode(false, true)\">{{'personnelSelector.quickSelect.advancedMode' | locale}}</p>\r\n        <div class=\"footer-button-container\" *ngIf=\"items.length > 0\">\r\n            <input type=\"button\" class=\"btn btn-secondary\" value=\"{{'personnelSelector.selection.cancel' | locale}}\" (click)=\"togglePanelMode(false, false)\" />\r\n            <input type=\"button\" class=\"btn btn-primary\" value=\"{{'personnelSelector.selection.confirm' | locale}}\" (click)=\"confirmSelections()\" />\r\n        </div>\r\n    </div>\r\n</div>",
                styles: [".quick-select-panel{position:absolute;max-height:375px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.12);z-index:999;width:300px}.quick-select-panel-title{height:30px;line-height:30px;font-size:16px;padding-left:13px}.qsp-list-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;height:100%}.qsp-list-container .qsp-list-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;margin:20px auto;color:#b4bccc;padding-top:100px}.qsp-list-container .group_blank_15{width:100%;height:15px}.qsp-list-container .qsp-list-content{clear:both}.qsp-list-container .s-selectedPerson:first-child{margin-top:0}.qsp-list-container .s-selectedPerson{min-width:240px;float:left;width:calc(100% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 1px}.qsp-list-container .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.qsp-list-container .f-icon{font-size:14px}.qsp-list-container .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:12px;font-size:14px}.qsp-list-container .s-selectedPerson .default-light-color{color:#f7b500}.qsp-list-container .s-selectedPerson .default-dark-color{color:#d8dce6}.qsp-list-container .qsp-list-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.qsp-list-container .qsp-list-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.qsp-list-container .qsp-list-title{-webkit-box-pack:justify;justify-content:space-between;height:35px;margin-bottom:4px;display:-webkit-box;display:flex}.qsp-list-container .qsp-list-title .custom-control{margin-left:15px;line-height:35px;-webkit-box-flex:1;flex:1}.qsp-list-container .s-selectedPerson .custom-control-label::before{top:7px}.qsp-list-container .qsp-list-title .title-selected-num{margin-right:15px;color:rgba(0,0,0,.85);line-height:35px;-webkit-box-flex:1;flex:1;text-align:right}.quick-select-foooter{display:-webkit-box;display:flex;height:45px}.quick-select-foooter p{cursor:pointer;width:80px;height:45px;line-height:45px;margin-left:13px;font-size:14px;color:#2a87ff;z-index:2}.quick-select-foooter .footer-button-container{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1;-webkit-box-pack:end;justify-content:flex-end;margin-right:15px}.quick-select-foooter .footer-button-container input:first-child{height:28px;font-size:12px;margin:8px 8px 0 0}.quick-select-foooter .footer-button-container input:last-child{height:28px;font-size:12px;margin:8px 0 0}"]
            }] }
];
/** @nocollapse */
QuickSelectComponent.ctorParameters = () => [
    { type: ApiLocalService, decorators: [{ type: Optional }] },
    { type: NotifyService, decorators: [{ type: Optional }] },
    { type: FavoritesTool, decorators: [{ type: Optional }] },
    { type: ChangeDetectorRef, decorators: [{ type: Optional }] }
];
QuickSelectComponent.propDecorators = {
    idField: [{ type: Input }],
    multiSelect: [{ type: Input }],
    enableChildHierarchy: [{ type: Input }],
    includeStopUser: [{ type: Input }],
    personnelOrderField: [{ type: Input }],
    includeCurrentUser: [{ type: Input }],
    disableCurrentUser: [{ type: Input }],
    userTypeMode: [{ type: Input }],
    filterId: [{ type: Input }],
    absUserOrgUrl: [{ type: Input }],
    quickInput: [{ type: Input }],
    enableFavorites: [{ type: Input }],
    absOrgType: [{ type: Input }],
    busNum: [{ type: Input }],
    checkedDataIds: [{ type: Input }],
    originalSelections: [{ type: Input }],
    validElementsInfo: [{ type: Input }],
    hasSetGlobalConfigParam: [{ type: Input }],
    withPermission: [{ type: Input }],
    showOrgAllPathByDesc: [{ type: Input }],
    enableSecurityControl: [{ type: Input }],
    securityLevel: [{ type: Input }],
    selectionsChange: [{ type: Output }],
    togglePanelModelChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    QuickSelectComponent.prototype.idField;
    /** @type {?} */
    QuickSelectComponent.prototype.multiSelect;
    /** @type {?} */
    QuickSelectComponent.prototype.enableChildHierarchy;
    /** @type {?} */
    QuickSelectComponent.prototype.includeStopUser;
    /** @type {?} */
    QuickSelectComponent.prototype.personnelOrderField;
    /** @type {?} */
    QuickSelectComponent.prototype.includeCurrentUser;
    /** @type {?} */
    QuickSelectComponent.prototype.disableCurrentUser;
    /** @type {?} */
    QuickSelectComponent.prototype.userTypeMode;
    /** @type {?} */
    QuickSelectComponent.prototype.filterId;
    /** @type {?} */
    QuickSelectComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    QuickSelectComponent.prototype.enableFavorites;
    /** @type {?} */
    QuickSelectComponent.prototype.absOrgType;
    /** @type {?} */
    QuickSelectComponent.prototype.busNum;
    /** @type {?} */
    QuickSelectComponent.prototype.validElementsInfo;
    /** @type {?} */
    QuickSelectComponent.prototype.hasSetGlobalConfigParam;
    /** @type {?} */
    QuickSelectComponent.prototype.withPermission;
    /** @type {?} */
    QuickSelectComponent.prototype.showOrgAllPathByDesc;
    /** @type {?} */
    QuickSelectComponent.prototype.enableSecurityControl;
    /** @type {?} */
    QuickSelectComponent.prototype.securityLevel;
    /** @type {?} */
    QuickSelectComponent.prototype.selectionsChange;
    /** @type {?} */
    QuickSelectComponent.prototype.togglePanelModelChange;
    /** @type {?} */
    QuickSelectComponent.prototype.allChecked;
    /** @type {?} */
    QuickSelectComponent.prototype.allIndexId;
    /** @type {?} */
    QuickSelectComponent.prototype.noDataImg;
    /** @type {?} */
    QuickSelectComponent.prototype.items;
    /** @type {?} */
    QuickSelectComponent.prototype.recentContactsList;
    /** @type {?} */
    QuickSelectComponent.prototype.favoritesList;
    /** @type {?} */
    QuickSelectComponent.prototype.searchText;
    /**
     * @type {?}
     * @private
     */
    QuickSelectComponent.prototype.searchTextStream;
    /** @type {?} */
    QuickSelectComponent.prototype.selections;
    /** @type {?} */
    QuickSelectComponent.prototype.firstLoad;
    /** @type {?} */
    QuickSelectComponent.prototype.checkeds;
    /** @type {?} */
    QuickSelectComponent.prototype._checkedDataIds;
    /** @type {?} */
    QuickSelectComponent.prototype.showUserCode;
    /**
     * @type {?}
     * @private
     */
    QuickSelectComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    QuickSelectComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    QuickSelectComponent.prototype.favoritesTool;
    /**
     * @type {?}
     * @private
     */
    QuickSelectComponent.prototype.cdRef;
    /* Skipping unhandled member: ;*/
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXNwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktcGVyc29ubmVsLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL3F1aWNrLXNlbGVjdC1wYWdlL3FzcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUF5QixpQkFBaUIsRUFBRSxRQUFRLEVBQzdGLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRTNELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsWUFBWSxFQUF3QixNQUFNLGdCQUFnQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdkMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBTzlDLE1BQU0sT0FBTyxvQkFBb0I7Ozs7Ozs7SUFpRTdCLFlBQ3dCLFVBQTJCLEVBQzNCLGFBQTRCLEVBQzVCLGFBQTRCLEVBQzVCLEtBQXdCO1FBSHhCLGVBQVUsR0FBVixVQUFVLENBQWlCO1FBQzNCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLFVBQUssR0FBTCxLQUFLLENBQW1CO1FBNUJ2Qyw0QkFBdUIsR0FBWSxLQUFLLENBQUM7UUFLeEMscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUMzQywyQkFBc0IsR0FBRyxJQUFJLFlBQVksRUFBYSxDQUFD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QW5FWixLQUFLOzBCQUNMLEtBQUs7bUNBQ0wsS0FBSzs4QkFDTCxLQUFLO2tDQUNMLEtBQUs7aUNBQ0wsS0FBSztpQ0FDTCxLQUFLOzJCQUNMLEtBQUs7dUJBQ0wsS0FBSzs0QkFDTCxLQUFLO3lCQUNMLEtBQUs7OEJBZUwsS0FBSzt5QkFDTCxLQUFLO3FCQUNMLEtBQUs7NkJBQ0wsS0FBSztpQ0FPTCxLQUFLO2dDQUdMLEtBQUs7c0NBQ0wsS0FBSzs2QkFDTCxLQUFLO21DQUNMLEtBQUs7b0NBQ0wsS0FBSzs0QkFDTCxLQUFLOytCQUNMLE1BQU07cUNBQ04sTUFBTTs7OztJQTdDUCx1Q0FBeUI7O0lBQ3pCLDJDQUE4Qjs7SUFDOUIsb0RBQXVDOztJQUN2QywrQ0FBa0M7O0lBQ2xDLG1EQUFxQzs7SUFDckMsa0RBQXFDOztJQUNyQyxrREFBcUM7O0lBQ3JDLDRDQUE4Qjs7SUFDOUIsd0NBQTBCOztJQUMxQiw2Q0FBK0I7O0lBZ0IvQiwrQ0FBa0M7O0lBQ2xDLDBDQUE0Qjs7SUFDNUIsc0NBQXdCOztJQVd4QixpREFBbUM7O0lBQ25DLHVEQUFrRDs7SUFDbEQsOENBQWlDOztJQUNqQyxvREFBdUM7O0lBQ3ZDLHFEQUF3Qzs7SUFDeEMsNkNBQXNDOztJQUN0QyxnREFBcUQ7O0lBQ3JELHNEQUFpRTs7SUFFakUsMENBQW1COztJQUNuQiwwQ0FBMEI7O0lBQzFCLHlDQUFzQjs7SUFDdEIscUNBQVc7O0lBQ1gsa0RBQXdCOztJQUN4Qiw2Q0FBbUI7O0lBQ25CLDBDQUFnQjs7Ozs7SUFDaEIsZ0RBQW9GOztJQUNwRiwwQ0FBZTs7SUFDZix5Q0FBaUI7O0lBQ2pCLHdDQUFjOztJQUVkLCtDQUFxQjs7SUFFckIsNENBQW9COzs7OztJQUdoQiwwQ0FBK0M7Ozs7O0lBQy9DLDZDQUFnRDs7Ozs7SUFDaEQsNkNBQWdEOzs7OztJQUNoRCxxQ0FBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBJbnB1dCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE9wdGlvbmFsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgbm9EYXRhSW1nIH0gZnJvbSAnLi4vLi4vYXNzZXRzL3Jlc291cmNlJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgRmF2b3JpdGVzVG9vbCB9IGZyb20gJy4uLy4uL3V0aWxzL2Zhdm9yaXRlcy50b29sJztcclxuaW1wb3J0IHsgUGFuZWxNb2RlLCBSZlJlcXVlc3RQYXJhbSwgU2VjdXJpdHlMZXZlbCB9IGZyb20gJy4uLy4uL3V0aWxzL3VzZXIudHlwZSc7XHJcbmltcG9ydCB7IEFwaUxvY2FsU2VydmljZSB9IGZyb20gJy4uLy4uL3V0aWxzL2FwaS1zZXJ2aWNlJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRyaW0gfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBCYXNlUGF0aFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3J0Zic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbGliLXF1aWNrLXNlbGVjdCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vcXNwLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3FzcC5jb21wb25lbnQuY3NzJ10sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBRdWlja1NlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gICAgQElucHV0KCkgaWRGaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgbXVsdGlTZWxlY3Q6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBlbmFibGVDaGlsZEhpZXJhcmNoeTogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGluY2x1ZGVTdG9wVXNlcjogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIHBlcnNvbm5lbE9yZGVyRmllbGQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGluY2x1ZGVDdXJyZW50VXNlcjogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVDdXJyZW50VXNlcjogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIHVzZXJUeXBlTW9kZTogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgZmlsdGVySWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGFic1VzZXJPcmdVcmw6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHNldCBxdWlja0lucHV0KHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZmlyc3RMb2FkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IHRyaW0odmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFRleHRTdHJlYW0ubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5oYXNTZXRHbG9iYWxDb25maWdQYXJhbSkge1xyXG4gICAgICAgICAgICBjb25zdCBwZXJzb25uZWxTZWxlY3RvclBhcmFtVXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9wZXJzb25uZWwtc2VsZWN0b3ItcGFyYW0nO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlUGF0aFVybCA9IEJhc2VQYXRoU2VydmljZS5jb252ZXJ0UGF0aChwZXJzb25uZWxTZWxlY3RvclBhcmFtVXJsKTtcclxuICAgICAgICAgICAgdGhpcy5hcGlTZXJ2aWNlLmdldEdsb2JhbFBhcmFtQ29uZmlnKGJhc2VQYXRoVXJsKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNbJ3N1Y2Nlc3MnXSAmJiB0aGlzLnNldEdsb2JhbENvbmZpZ1BhcmFtKHJlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhc1NldEdsb2JhbENvbmZpZ1BhcmFtID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmlyc3RMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG4gICAgfTtcclxuICAgIEBJbnB1dCgpIGVuYWJsZUZhdm9yaXRlczogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGFic09yZ1R5cGU6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGJ1c051bTogc3RyaW5nO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBjaGVja2VkRGF0YUlkcyh2YWx1ZTogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLl9jaGVja2VkRGF0YUlkcyA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNoZWNrZWREYXRhSWRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja2VkRGF0YUlkcztcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBvcmlnaW5hbFNlbGVjdGlvbnModmFsdWU6IGFueVtdKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdmFsdWUuc2xpY2UoKTtcclxuICAgIH07XHJcbiAgICBASW5wdXQoKSB2YWxpZEVsZW1lbnRzSW5mbzogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgaGFzU2V0R2xvYmFsQ29uZmlnUGFyYW06IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHdpdGhQZXJtaXNzaW9uOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgc2hvd09yZ0FsbFBhdGhCeURlc2M6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBlbmFibGVTZWN1cml0eUNvbnRyb2w6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoKSBzZWN1cml0eUxldmVsOiBTZWN1cml0eUxldmVsO1xyXG4gICAgQE91dHB1dCgpIHNlbGVjdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSB0b2dnbGVQYW5lbE1vZGVsQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxQYW5lbE1vZGU+KCk7XHJcblxyXG4gICAgYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgYWxsSW5kZXhJZCA9ICdhbGxJbmRleElkJztcclxuICAgIG5vRGF0YUltZyA9IG5vRGF0YUltZztcclxuICAgIGl0ZW1zID0gW107XHJcbiAgICByZWNlbnRDb250YWN0c0xpc3QgPSBbXTtcclxuICAgIGZhdm9yaXRlc0xpc3QgPSBbXTtcclxuICAgIHNlYXJjaFRleHQgPSAnJztcclxuICAgIHByaXZhdGUgc2VhcmNoVGV4dFN0cmVhbTogQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4oJycpO1xyXG4gICAgc2VsZWN0aW9ucyA9IFtdXHJcbiAgICBmaXJzdExvYWQgPSB0cnVlO1xyXG4gICAgY2hlY2tlZHMgPSBbXTtcclxuICAgIC8vIOW9k+WJjeW3sumAieaLqeeahOS6uuWRmO+8jOWPr+iDveS4jeWcqOW/q+aNt+mdouadv+S4re+8jOWboOS4uuatpOWkhOeahOS6uuWRmOmDveaYr+acgOi/keS6uuWRmFxyXG4gICAgX2NoZWNrZWREYXRhSWRzID0gW107XHJcbiAgICAvLyDmmK/lkKbmmL7npLrnlKjmiLfnvJblj7dcclxuICAgIHNob3dVc2VyQ29kZSA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBhcGlTZXJ2aWNlOiBBcGlMb2NhbFNlcnZpY2UsXHJcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgICAgIEBPcHRpb25hbCgpIHByaXZhdGUgZmF2b3JpdGVzVG9vbDogRmF2b3JpdGVzVG9vbCxcclxuICAgICAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZlxyXG5cclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuYWxsSW5kZXhJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygzLCAxMik7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g5YW85a656ICB6KGo5Y2VXHJcbiAgICAgICAgaWYgKHRoaXMuZmF2b3JpdGVzVG9vbCkge1xyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuZ2V0RmF2b3JpdGVzTGlzdCgpLnN1YnNjcmliZSgocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0xpc3QgPSByZXN1bHQgPyAocmVzdWx0IGFzIGFueSkuZGF0YSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLmZhdm9yaXRlc0xpc3QgPSB0aGlzLmZhdm9yaXRlc0xpc3Quc2xpY2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVjZW50Q29udGFjdHNMaXN0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuZmF2b3JpdGVzU3ViamVjdC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0xpc3QgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlbWJsZUl0ZW1zRmF2b3JpdGVzKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlYXJjaFRleHRTdHJlYW0ucGlwZShcclxuICAgICAgICAgICAgZGVib3VuY2VUaW1lKDUwMClcclxuICAgICAgICApLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKCEhZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJdGVtc0J5U2VhcmNoKGRhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMucmVjZW50Q29udGFjdHNMaXN0LnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VtYmxlSXRlbXNDaGVja2VkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VtYmxlSXRlbXNGYXZvcml0ZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRHbG9iYWxDb25maWdQYXJhbShwYXJhbTogYW55KSB7XHJcbiAgICAgICAgaWYodGhpcy51c2VyVHlwZU1vZGUgPT0gJ1dmTW9kZScgJiYgcGFyYW0uaGFzT3duUHJvcGVydHkoJ3Nob3dVc2VyQ29kZScpICYmIHRoaXMuc2hvd1VzZXJDb2RlICE9PSBwYXJhbVsnc2hvd1VzZXJDb2RlJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93VXNlckNvZGUgPSBwYXJhbVsnc2hvd1VzZXJDb2RlJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaYr+WQpuWAkuW6j+Wxleekuue7hOe7h+WFqOi3r+W+hFxyXG4gICAgICAgIGlmKHBhcmFtLmhhc093blByb3BlcnR5KCdzaG93T3JnQWxsUGF0aEJ5RGVzYycpICYmIHRoaXMuc2hvd09yZ0FsbFBhdGhCeURlc2MgIT09IHBhcmFtWydzaG93T3JnQWxsUGF0aEJ5RGVzYyddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd09yZ0FsbFBhdGhCeURlc2MgPSBwYXJhbVsnc2hvd09yZ0FsbFBhdGhCeURlc2MnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5piv5ZCm5ZCv55So5p2D6ZmQ5o6n5Yi2XHJcbiAgICAgICAgaWYodGhpcy53aXRoUGVybWlzc2lvbiAmJiBwYXJhbS5oYXNPd25Qcm9wZXJ0eSgnd2l0aFBlcm1pc3Npb24nKSAmJiB0aGlzLndpdGhQZXJtaXNzaW9uICE9PSBwYXJhbVsnd2l0aFBlcm1pc3Npb24nXSkge1xyXG4gICAgICAgICAgICB0aGlzLndpdGhQZXJtaXNzaW9uID0gcGFyYW1bJ3dpdGhQZXJtaXNzaW9uJ107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SXRlbXNCeVNlYXJjaChzZWFyY2hUZXh0OiBhbnkpIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hJdGVtcyA9IHRoaXMucmVjZW50Q29udGFjdHNMaXN0LnNsaWNlKCk7XHJcbiAgICAgICAgaWYgKCFzZWFyY2hUZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IHNlYXJjaEl0ZW1zLmZpbHRlcihpdGVtID0+IChpdGVtLmNvZGUgJiYgaXRlbS5jb2RlLmluZGV4T2Yoc2VhcmNoVGV4dCkgIT09IC0xKSB8fCAoaXRlbS5uYW1lICYmIGl0ZW0ubmFtZS5pbmRleE9mKHNlYXJjaFRleHQpICE9PSAtMSkgfHwgKGl0ZW0uaW5pdGlhbHMgJiYgaXRlbS5pbml0aWFscy5pbmRleE9mKHNlYXJjaFRleHQpICE9PSAtMSkgfHwgKGl0ZW0ucGlueWluICYmIGl0ZW0ucGlueWluLmluZGV4T2Yoc2VhcmNoVGV4dCkgIT09IC0xKSk7XHJcbiAgICAgICAgdGhpcy5hc3NlbWJsZUl0ZW1zQ2hlY2tlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmVjZW50Q29udGFjdHNMaXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtOiBSZlJlcXVlc3RQYXJhbSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZTogdGhpcy5hYnNPcmdUeXBlLFxyXG4gICAgICAgICAgICBiaXpJZDogdGhpcy5idXNOdW0sXHJcbiAgICAgICAgICAgIG9iamVjdFZhbHVlOiAnUmVjZW50Q29udGFjdHMnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlQ3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJJZCA9ICh3aW5kb3cgYXMgYW55KS5nc3BmcmFtZXdvcmtTZXJ2aWNlLmNvbW1vbi51c2VySW5mb3MuZ2V0KCkuaWQ7XHJcbiAgICAgICAgICAgIHBhcmFtLmZpbHRlclVzZXJJZHMgPSBbY3VycmVudFVzZXJJZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLndpdGhQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHBhcmFtLndpdGhQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgcGFyYW0uYXV0aE9wID0gJ1VzZXJNYW5hZ2UnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmFibGVTZWN1cml0eUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgcGFyYW0uc2VjdXJpdHlDb250cm9sID0gdHJ1ZTtcclxuICAgICAgICAgICAgcGFyYW0uc2VjdXJpdHlMZXZlbCA9IHRoaXMuc2VjdXJpdHlMZXZlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLmN1cmRSZWNlbnRDb250YWN0c09yRmF2b3JpdGVzKCdxdWVyeScsIHBhcmFtKS5zdWJzY3JpYmUoKHJjUmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmNSZXNEYXRhID0gcmNSZXMgPyByY1Jlcy5kYXRhIDogW107XHJcbiAgICAgICAgICAgIHJjUmVzRGF0YS5mb3JFYWNoKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXMuZGlzcGxheU5hbWUgPSAhIXRoaXMuc2hvd1VzZXJDb2RlID8gKCdbJyArIHJlcy5jb2RlICsgJ10nICsgcmVzLm5hbWUpIDogcmVzLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnNob3dPcmdBbGxQYXRoQnlEZXNjICYmIHJlcy5vcmdBbGxQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLm9yZ0FsbFBhdGggPSB0aGlzLmNoYW5nZURpc3BsYXlPcmdBbGxQYXRoKHJlcy5vcmdBbGxQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VudENvbnRhY3RzTGlzdCA9IHJjUmVzRGF0YS5zbGljZSgpO1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gcmNSZXNEYXRhLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZW1ibGVJdGVtc0NoZWNrZWQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRmF2b3JpdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VtYmxlSXRlbXNGYXZvcml0ZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZVBhbmVsTW9kZShzaG93UXVpY2tNb2RlOiBib29sZWFuLCBzaG93QWR2YW5jZWRNb2RlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVQYW5lbE1vZGVsQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICBzaG93UXVpY2tNb2RlLFxyXG4gICAgICAgICAgICBzaG93QWR2YW5jZWRNb2RlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQWxsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5hbGxDaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBbGwoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVuQ2hlY2tBbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlT25lKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5TZWxlY3RMaW5lKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TGluZShkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXNzZW1ibGVJdGVtc0NoZWNrZWQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaXRlbS5pbmRleElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDIpO1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMuc2VsZWN0aW9ucy5sZW5ndGggJiYgdGhpcy5faXNJbkFycmF5KGl0ZW1bdGhpcy5pZEZpZWxkXSwgdGhpcy5pZEZpZWxkLCB0aGlzLnNlbGVjdGlvbnMpICE9PSAtMSlcclxuICAgICAgICAgICAgICAgIHx8ICh0aGlzLmNoZWNrZWREYXRhSWRzLmluY2x1ZGVzKGl0ZW1bdGhpcy5pZEZpZWxkXSkpKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW5BcnJheShpdGVtW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5jaGVja2VkcykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gdGhpcy5jaGVja2Vkcy5zbGljZSgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQWxsQ2hlY2tlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc2VtYmxlSXRlbXNGYXZvcml0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmluRmF2b3JpdGVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoaXRlbVt0aGlzLmlkRmllbGRdLCB0aGlzLmlkRmllbGQsIHRoaXMuZmF2b3JpdGVzTGlzdCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmluRmF2b3JpdGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLnNsaWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgInlkI7lpITnkIZcclxuICAgICAqIEBwYXJhbSBkYXRhQXJyIOWFqOmAieeahOWAvFxyXG4gICAgICovXHJcbiAgICBjaGVja0FsbCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGl0ZW0pO1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YWo6YOo5Y+W5raIXHJcbiAgICAgKiBAcGFyYW0gZGF0YUFyciDlj5bmtojnmoTmlbDmja5cclxuICAgICAqIEByZXR1cm5zIHZvaWRcclxuICAgICAqL1xyXG4gICAgdW5DaGVja0FsbCgpIHtcclxuICAgICAgICBjb25zdCB1bmNoZWNrZWRJZHMgPSBbXTtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChzZWxlY3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVt0aGlzLmlkRmllbGRdID09PSBzZWxlY3Rpb25bdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuY2hlY2tlZElkcy5wdXNoKGl0ZW1bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbnMuZmlsdGVyKHNlbGVjdGlvbiA9PiAhdW5jaGVja2VkSWRzLmluY2x1ZGVzKHNlbGVjdGlvblt0aGlzLmlkRmllbGRdKSk7XHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IHRoaXMuY2hlY2tlZHMuZmlsdGVyKGl0ZW0gPT4gIXVuY2hlY2tlZElkcy5pbmNsdWRlcyhpdGVtW3RoaXMuaWRGaWVsZF0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW9k+WJjeihjOmAieS4rVxyXG4gICAgICogQHBhcmFtIGRhdGEg5b2T5YmN6KGM55qE5pWw5o2u77yI77yJXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdExpbmUoZGF0YTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0T25lSW50b1NlbGVjdGlvbnMoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbENoZWNrZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNlemAieWPlua2iOmAieS4rVxyXG4gICAgICogQHBhcmFtIGRhdGEg5Y+W5raI6YCJ5Lit6KGMXHJcbiAgICAgKi9cclxuICAgIHVuU2VsZWN0TGluZShkYXRhOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2lzSW5BcnJheShkYXRhW3RoaXMuaWRGaWVsZF0sIHRoaXMuaWRGaWVsZCwgdGhpcy5zZWxlY3Rpb25zKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5kZXhjID0gdGhpcy5faXNJbkFycmF5KGRhdGFbdGhpcy5pZEZpZWxkXSwgdGhpcy5pZEZpZWxkLCB0aGlzLmNoZWNrZWRzKTtcclxuICAgICAgICBpZiAoaW5kZXhjID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5zcGxpY2UoaW5kZXhjLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYWxsQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFsbENoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aSE55CG6YC76L6R5piv55yL5LiK5Y675YOP5piv6L+95Yqg77yM5a6e6ZmF5LiK5piv5pu/5o2i77yM5aSa6YCJ55qE5pe25YCZ6KaB5oqK5LmL5YmN55qE5pWw5o2u5ZCI6L+b6YCJ5Lit5pWw5o2u5LitXHJcbiAgICBjb25maXJtU2VsZWN0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZWNlbnRDb250YWN0c0xpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLnJlY2VudENvbnRhY3RzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZWNlbnRDb250YWN0c0xpc3QucHVzaChpdGVtW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGVtaXRPYmogPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9ucyxcclxuICAgICAgICAgICAgdG9rZW46ICdxdWljaycsXHJcbiAgICAgICAgICAgIHJlY2VudENvbnRhY3RzTGlzdFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlLmVtaXQoZW1pdE9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlRmF2b3JpdGVzKGU6IGFueSwgaXRlbTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLnRvZ2dsZUZhdm9yaXRlcyhlLCBpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reW5tuaPkuWFpeW9k+WJjeihjOaVsOaNruWIsOWPs+S+p1xyXG4gICAgICogQHBhcmFtIGRhdGEg5b2T5YmN6KGM55qE5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbiDmmoLlrZjlvZPliY3mlbDmja7nmoTpm4blkIhcclxuICAgICAqL1xyXG4gICAgX2luc2VydE9uZUludG9TZWxlY3Rpb25zKGRhdGE6IGFueSkge1xyXG4gICAgICAgIC8vIOWmguaenOW9k+WJjeaVsOaNruW3sue7j+enu+WFpeWPs+S+p+aVsOaNru+8jOWImei/lOWbnuOAglxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luQXJyYXkoZGF0YVt0aGlzLmlkRmllbGRdLCB0aGlzLmlkRmllbGQsIHRoaXMuc2VsZWN0aW9ucykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMucHVzaChkYXRhKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB0aGlzLnNlbGVjdGlvbnMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gdGhpcy5jaGVja2Vkcy5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5piv5ZCm5Zyo5YaFXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgdmFsdWVcclxuICAgICAqIEBwYXJhbSBmaWVsZCBmaWVsZFxyXG4gICAgICogQHBhcmFtIGFycmF5IGFycmF5XHJcbiAgICAgKiBAcmV0dXJucyDkvY3nva7ntKLlvJVcclxuICAgICAqL1xyXG4gICAgX2lzSW5BcnJheSh2YWx1ZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCBhcnJheTogYW55W10pOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghZmllbGQgfHwgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLnZhbGlkRWxlbWVudHNJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbmRJbmRleChpdGVtID0+IHZhbHVlID09PSBpdGVtW2ZpZWxkXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnv7vpobXmo4Dmn6XvvJrkurrlkZjlsZXnpLrljLrnmoTli77pgInnirbmgIHkuI7lt7LpgInkurrlkZjljLrmmK/lkKblr7nlupRcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlQWxsQ2hlY2tlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPT09IHRoaXMuY2hlY2tlZHMubGVuZ3RoICYmIHRoaXMuY2hlY2tlZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmFsbENoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoYW5nZURpc3BsYXlPcmdBbGxQYXRoKGRhdGE6IHN0cmluZykge1xyXG4gICAgICAgIGlmKCFkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3JnQWxsUGF0aEFycmF5ID0gZGF0YS5zcGxpdCgnXycpO1xyXG4gICAgICAgIHJldHVybiBvcmdBbGxQYXRoQXJyYXkucmV2ZXJzZSgpLmpvaW4oJ18nKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFja0J5Rm4oaW5kZXgsIGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==