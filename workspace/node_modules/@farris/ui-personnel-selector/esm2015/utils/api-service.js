/**
 * @fileoverview added by tsickle
 * Generated from: utils/api-service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { BasePathService } from '@farris/rtf';
export class ApiLocalService {
    /**
     * @param {?} http
     */
    constructor(http) {
        this.http = http;
    }
    /**
     * @param {?} param
     * @return {?}
     */
    filterGroupLeader(param) {
        /** @type {?} */
        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/modify');
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    }
    /**
     * @param {?} param
     * @return {?}
     */
    getGroupLeaderStatus(param) {
        /** @type {?} */
        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/getRecentContacts');
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, param, options);
    }
    /**
     * 获取行政组织
     * @param {?} url
     * @param {?} param
     * @return {?} observable
     */
    getOrganization(url, param) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/org', param, options);
    }
    /**
     * 获取系统用户分组
     * @param {?} param
     * @return {?} observable
     */
    getSysUserGroup(param) {
        /** @type {?} */
        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/usergroups');
        /** @type {?} */
        const paramStr = JSON.stringify(param);
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
            params: {
                param: paramStr,
            }
        };
        return this.http.get(url, options);
    }
    /**
     *
     * @param {?} url url地址
     * @param {?} absOrgType 系统组织
     * @param {?} orgId 组织id
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    getPersonnelByOrgId(url, absOrgType, orgId, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            // 组织类型，默认为系统组织
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            orgId,
            // 组织id，获取当前组织下的用户
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            posId: requestParam.posId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    // 根据系统用户分组id获取分组下成员
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    getPersonnelByUserGroupId(url, requestParam) {
        /** @type {?} */
        const body = {
            pageIndex: requestParam.pageIndex,
            // 当前页
            pageSize: requestParam.pageSize,
            // 每页记录数
            getUserInfo: true,
            // 是否获取用户头像
            withAllGroup: requestParam.withAllGroup,
            withAllOrg: requestParam.withAllOrg,
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            groupId: requestParam.groupId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
        };
        // 需要根据组织进行人员二次过滤
        if (requestParam.orgId) {
            body['orgId'] = requestParam.orgId;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    /**
     * 查询行政人员（根据人员id返回相关数据）
     * @param {?} url url地址
     * @param {?} searchParam
     * @return {?} observable
     */
    getPersonnelByUserIds(url, searchParam) {
        /** @type {?} */
        let idsArr = [];
        /** @type {?} */
        const userIds = searchParam.ids;
        if (userIds) {
            /** @type {?} */
            const lastChar = userIds.substring(userIds.length - 1);
            if (lastChar == ',') {
                /** @type {?} */
                const fixedIds = userIds.substring(0, userIds.length - 1);
                idsArr = fixedIds.split(',');
            }
            else {
                idsArr = userIds.split(',');
            }
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        if (searchParam.absOrgType == 'System_organization' && searchParam.securityControl) {
            /** @type {?} */
            const searchRequestBody = {
                securityControl: searchParam.securityControl,
                securityLevel: searchParam.securityLevel,
                idList: idsArr
            };
            return this.http.post(`${url}/user/orgType/${searchParam.absOrgType}`, searchRequestBody, options);
        }
        else {
            return this.http.post(`${url}/user/${searchParam.absOrgType}`, idsArr, options);
        }
    }
    /**
     * 搜索行政人员（根据名称、编号搜索）
     * @param {?} url 传入的url
     * @param {?} absOrgType 数据源类型
     * @param {?} codeOrName 传入的搜索内容
     * @param {?} requestParam 请求参数
     * @return {?} observable
     */
    getPersonnelBySearch(url, absOrgType, codeOrName, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            // 组织类型，默认为系统组织
            getUserInfo: true,
            codeOrName,
            // 搜索内容
            withAllOrg: requestParam.withAllOrg,
            // 获取组织及其所有下级组织下的用户，默认false
            notGetStopUser: requestParam.notGetStopUser,
            // 是否获取停用用户，默认为false，
            notGetCurrentUser: requestParam.notGetCurrentUser,
            // 是否获取当前用户，默认为true，
            orderField: requestParam.orderField,
            // 排序
            userTypeMode: requestParam.userTypeMode,
            searchMode: 'or',
            pinyin: codeOrName,
            initials: codeOrName,
            filterId: requestParam.filterId,
            withPermission: requestParam.withPermission,
            authOp: requestParam.authOp,
            securityControl: requestParam.securityControl,
            securityLevel: requestParam.securityLevel
            // 暂无法提交测试
            //reverseOrgAllPath: requestParam.reverseOrgAllPath
        };
        if (requestParam.orgId) {
            body.orgId = requestParam.orgId;
        }
        if (requestParam.pageSize) {
            body.pageSize = requestParam.pageSize;
        }
        if (requestParam.pageIndex) {
            body.pageIndex = requestParam.pageIndex;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url + '/user', body, options);
    }
    /**
     * 获取群组信息
     * @param {?} url 接口地址
     * @param {?=} param
     * @return {?} observable
     */
    getGroupOrGroupPersonnel(url, param) {
        /** @type {?} */
        let baseUrl = url;
        if (param.parentid) {
            baseUrl += '?iseanble=' + param.isenable + '&parentid=' + param.parentid;
        }
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.get(baseUrl, options);
    }
    // 获取选人组件全局配置参数
    /**
     * @param {?} url
     * @return {?}
     */
    getGlobalParamConfig(url) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, options);
    }
    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    getFilterPosition(url, absOrgType, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    }
    // 获取用户分组下所有成员所属的组织，用于人员二次过滤
    /**
     * @param {?} url
     * @param {?} absOrgType
     * @param {?} requestParam
     * @return {?}
     */
    getFilterOrganization(url, absOrgType, requestParam) {
        /** @type {?} */
        const body = {
            absOrgType,
            withAllOrg: requestParam.withAllOrg,
            getUserInfo: requestParam.getUserInfo,
            notGetStopUser: requestParam.notGetStopUser,
            notGetCurrentUser: requestParam.notGetCurrentUser,
            orderField: requestParam.orderField,
            userTypeMode: requestParam.userTypeMode,
            filterId: requestParam.filterId,
            curUser: false,
            groupId: requestParam.groupId,
            orgId: requestParam.orgId,
        };
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            })
        };
        return this.http.post(url, body, options);
    }
    /**
     * @param {?} url
     * @return {?}
     */
    getUserPositionInfo(url) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/userPosition', options);
    }
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    getAssignQueryResult(url, requestParam) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url, requestParam, options);
    }
    /**
     * @param {?} url
     * @param {?} requestParam
     * @return {?}
     */
    getUserManageAssignResult(url, requestParam) {
        /** @type {?} */
        const options = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
            }),
        };
        return this.http.post(url + '/userManageResult', requestParam, options);
    }
}
ApiLocalService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ApiLocalService.ctorParameters = () => [
    { type: HttpClient }
];
if (false) {
    /** @type {?} */
    ApiLocalService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLXNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBlcnNvbm5lbC1zZWxlY3Rvci8iLCJzb3VyY2VzIjpbInV0aWxzL2FwaS1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBYyxNQUFNLHNCQUFzQixDQUFDO0FBRTNFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFHOUMsTUFBTSxPQUFPLGVBQWU7Ozs7SUFFeEIsWUFBbUIsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtJQUFJLENBQUM7Ozs7O0lBRXhDLGlCQUFpQixDQUFDLEtBQVU7O2NBQ2xCLEdBQUcsR0FBRyxlQUFlLENBQUMsV0FBVyxDQUFDLGdEQUFnRCxDQUFDOztjQUNuRixPQUFPLEdBQUc7WUFDWixPQUFPLEVBQUUsSUFBSSxXQUFXLENBQUM7Z0JBQ3JCLGNBQWMsRUFBRSxrQkFBa0I7YUFDckMsQ0FBQztTQUNMO1FBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7Ozs7O0lBRUQsb0JBQW9CLENBQUMsS0FBVTs7Y0FDckIsR0FBRyxHQUFHLGVBQWUsQ0FBQyxXQUFXLENBQUMsMkRBQTJELENBQUM7O2NBQzlGLE9BQU8sR0FBRztZQUNaLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFrQjthQUNyQyxDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0MsQ0FBQzs7Ozs7OztJQU1ELGVBQWUsQ0FBQyxHQUFXLEVBQUUsS0FBc0I7O2NB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ckIsY0FBYyxFQUFFLGtCQUFrQjthQUNyQyxDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7Ozs7SUFFRCxtQkFBbUIsQ0FBQyxHQUFXOztjQUNyQixPQUFPLEdBQUc7WUFDWixPQUFPLEVBQUUsSUFBSSxXQUFXLENBQUM7Z0JBQ3JCLGNBQWMsRUFBRSxrQkFBa0I7YUFDckMsQ0FBQztTQUNMO1FBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzFELENBQUM7Ozs7OztJQUVELG9CQUFvQixDQUFDLEdBQVcsRUFBRSxZQUFpQjs7Y0FDekMsT0FBTyxHQUFHO1lBQ1osT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDO2dCQUNyQixjQUFjLEVBQUUsa0JBQWtCO2FBQ3JDLENBQUM7U0FDTDtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN0RCxDQUFDOzs7Ozs7SUFFRCx5QkFBeUIsQ0FBQyxHQUFXLEVBQUUsWUFBaUI7O2NBQzlDLE9BQU8sR0FBRztZQUNaLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFrQjthQUNyQyxDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxtQkFBbUIsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDNUUsQ0FBQzs7O1lBalRKLFVBQVU7Ozs7WUFKRixVQUFVOzs7O0lBT0gsK0JBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgT3JnUmVxdWVzdFBhcmFtLCBQZXJzb25uZWxSZXF1ZXN0UGFyYW0sIFNlYXJjaFVzZXJCeUlkUmVxdWVzdFBhcmFtIH0gZnJvbSAnLi91c2VyLnR5cGUnO1xyXG5pbXBvcnQgeyBCYXNlUGF0aFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3J0Zic7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBBcGlMb2NhbFNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50KSB7IH1cclxuXHJcbiAgICBmaWx0ZXJHcm91cExlYWRlcihwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gQmFzZVBhdGhTZXJ2aWNlLmNvbnZlcnRQYXRoKCcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzUmVjZW50Q29udGFjdHMvbW9kaWZ5Jyk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgcGFyYW0sIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEdyb3VwTGVhZGVyU3RhdHVzKHBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBCYXNlUGF0aFNlcnZpY2UuY29udmVydFBhdGgoJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9nZXRSZWNlbnRDb250YWN0cycpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIHBhcmFtLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluihjOaUv+e7hOe7h1xyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRPcmdhbml6YXRpb24odXJsOiBzdHJpbmcsIHBhcmFtOiBPcmdSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy9vcmcnLCBwYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bns7vnu5/nlKjmiLfliIbnu4RcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgIGdldFN5c1VzZXJHcm91cChwYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gQmFzZVBhdGhTZXJ2aWNlLmNvbnZlcnRQYXRoKCcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvdXNlcmdyb3VwcycpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtU3RyID0gSlNPTi5zdHJpbmdpZnkocGFyYW0pO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbTogcGFyYW1TdHIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVybCB1cmzlnLDlnYBcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOezu+e7n+e7hOe7h1xyXG4gICAgICogQHBhcmFtIG9yZ0lkIOe7hOe7h2lkXHJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtIOivt+axguWPguaVsFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeU9yZ0lkKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIG9yZ0lkOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSwgLy8g57uE57uH57G75Z6L77yM6buY6K6k5Li657O757uf57uE57uHXHJcbiAgICAgICAgICAgIHBhZ2VJbmRleDogcmVxdWVzdFBhcmFtLnBhZ2VJbmRleCwgLy8g5b2T5YmN6aG1XHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiByZXF1ZXN0UGFyYW0ucGFnZVNpemUsIC8vIOavj+mhteiusOW9leaVsFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogdHJ1ZSwgLy8g5piv5ZCm6I635Y+W55So5oi35aS05YOPXHJcbiAgICAgICAgICAgIG9yZ0lkLCAvLyDnu4Tnu4dpZO+8jOiOt+WPluW9k+WJjee7hOe7h+S4i+eahOeUqOaIt1xyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZywgLy8g6I635Y+W57uE57uH5Y+K5YW25omA5pyJ5LiL57qn57uE57uH5LiL55qE55So5oi377yM6buY6K6kZmFsc2VcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlciwgLy8g5piv5ZCm6I635Y+W5YGc55So55So5oi377yM6buY6K6k5Li6ZmFsc2XvvIxcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlciwgLy8g5piv5ZCm6I635Y+W5b2T5YmN55So5oi377yM6buY6K6k5Li6dHJ1Ze+8jFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCwgLy8g5o6S5bqPXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZCxcclxuICAgICAgICAgICAgcG9zSWQ6IHJlcXVlc3RQYXJhbS5wb3NJZCxcclxuICAgICAgICAgICAgd2l0aFBlcm1pc3Npb246IHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbixcclxuICAgICAgICAgICAgYXV0aE9wOiByZXF1ZXN0UGFyYW0uYXV0aE9wLFxyXG4gICAgICAgICAgICBzZWN1cml0eUNvbnRyb2w6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUNvbnRyb2wsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5TGV2ZWw6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUxldmVsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwgKyAnL3VzZXInLCBib2R5LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmoLnmja7ns7vnu5/nlKjmiLfliIbnu4RpZOiOt+WPluWIhue7hOS4i+aIkOWRmFxyXG4gICAgZ2V0UGVyc29ubmVsQnlVc2VyR3JvdXBJZCh1cmw6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBQZXJzb25uZWxSZXF1ZXN0UGFyYW0pIHtcclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHJlcXVlc3RQYXJhbS5wYWdlSW5kZXgsIC8vIOW9k+WJjemhtVxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcmVxdWVzdFBhcmFtLnBhZ2VTaXplLCAvLyDmr4/pobXorrDlvZXmlbBcclxuICAgICAgICAgICAgZ2V0VXNlckluZm86IHRydWUsIC8vIOaYr+WQpuiOt+WPlueUqOaIt+WktOWDj1xyXG4gICAgICAgICAgICB3aXRoQWxsR3JvdXA6IHJlcXVlc3RQYXJhbS53aXRoQWxsR3JvdXAsXHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLCAvLyDmmK/lkKbojrflj5blgZznlKjnlKjmiLfvvIzpu5jorqTkuLpmYWxzZe+8jFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLCAvLyDmmK/lkKbojrflj5blvZPliY3nlKjmiLfvvIzpu5jorqTkuLp0cnVl77yMXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLCAvLyDmjpLluo9cclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBncm91cElkOiByZXF1ZXN0UGFyYW0uZ3JvdXBJZCxcclxuICAgICAgICAgICAgd2l0aFBlcm1pc3Npb246IHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbixcclxuICAgICAgICAgICAgYXV0aE9wOiByZXF1ZXN0UGFyYW0uYXV0aE9wLFxyXG4gICAgICAgICAgICBzZWN1cml0eUNvbnRyb2w6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUNvbnRyb2wsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5TGV2ZWw6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUxldmVsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDpnIDopoHmoLnmja7nu4Tnu4fov5vooYzkurrlkZjkuozmrKHov4fmu6RcclxuICAgICAgICBpZihyZXF1ZXN0UGFyYW0ub3JnSWQpIHtcclxuICAgICAgICAgICAgYm9keVsnb3JnSWQnXSA9IHJlcXVlc3RQYXJhbS5vcmdJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyJywgYm9keSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6Xor6LooYzmlL/kurrlkZjvvIjmoLnmja7kurrlkZhpZOi/lOWbnuebuOWFs+aVsOaNru+8iVxyXG4gICAgICogQHBhcmFtIHVybCB1cmzlnLDlnYBcclxuICAgICAqIEBwYXJhbSBhYnNPcmdUeXBlIOezu+e7n+exu+Wei1xyXG4gICAgICogQHBhcmFtIGlkcyDkurrlkZhpZFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJzb25uZWxCeVVzZXJJZHModXJsOiBzdHJpbmcsIHNlYXJjaFBhcmFtOiBTZWFyY2hVc2VyQnlJZFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGxldCBpZHNBcnIgPSBbXTtcclxuICAgICAgICBjb25zdCB1c2VySWRzID0gc2VhcmNoUGFyYW0uaWRzOyBcclxuICAgICAgICBpZiAodXNlcklkcykge1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0Q2hhciA9IHVzZXJJZHMuc3Vic3RyaW5nKHVzZXJJZHMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIGlmIChsYXN0Q2hhciA9PSAnLCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkSWRzID0gdXNlcklkcy5zdWJzdHJpbmcoMCwgdXNlcklkcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIGlkc0FyciA9IGZpeGVkSWRzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZHNBcnIgPSB1c2VySWRzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoc2VhcmNoUGFyYW0uYWJzT3JnVHlwZSA9PSAnU3lzdGVtX29yZ2FuaXphdGlvbicgJiYgc2VhcmNoUGFyYW0uc2VjdXJpdHlDb250cm9sKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgc2VjdXJpdHlDb250cm9sOiBzZWFyY2hQYXJhbS5zZWN1cml0eUNvbnRyb2wsXHJcbiAgICAgICAgICAgICAgICBzZWN1cml0eUxldmVsOiBzZWFyY2hQYXJhbS5zZWN1cml0eUxldmVsLFxyXG4gICAgICAgICAgICAgICAgaWRMaXN0OiBpZHNBcnJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KGAke3VybH0vdXNlci9vcmdUeXBlLyR7c2VhcmNoUGFyYW0uYWJzT3JnVHlwZX1gLCBzZWFyY2hSZXF1ZXN0Qm9keSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KGAke3VybH0vdXNlci8ke3NlYXJjaFBhcmFtLmFic09yZ1R5cGV9YCwgaWRzQXJyLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLooYzmlL/kurrlkZjvvIjmoLnmja7lkI3np7DjgIHnvJblj7fmkJzntKLvvIlcclxuICAgICAqIEBwYXJhbSB1cmwg5Lyg5YWl55qEdXJsXHJcbiAgICAgKiBAcGFyYW0gYWJzT3JnVHlwZSDmlbDmja7mupDnsbvlnotcclxuICAgICAqIEBwYXJhbSBjb2RlT3JOYW1lIOS8oOWFpeeahOaQnOe0ouWGheWuuVxyXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbSDor7fmsYLlj4LmlbBcclxuICAgICAqIEByZXR1cm5zIG9ic2VydmFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29ubmVsQnlTZWFyY2godXJsOiBzdHJpbmcsIGFic09yZ1R5cGU6IHN0cmluZywgY29kZU9yTmFtZTogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHk6IGFueSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSwgLy8g57uE57uH57G75Z6L77yM6buY6K6k5Li657O757uf57uE57uHXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiB0cnVlLCAvLyDmmK/lkKbojrflj5bnlKjmiLflpLTlg48sXHJcbiAgICAgICAgICAgIGNvZGVPck5hbWUsIC8vIOaQnOe0ouWGheWuuVxyXG4gICAgICAgICAgICB3aXRoQWxsT3JnOiByZXF1ZXN0UGFyYW0ud2l0aEFsbE9yZywgLy8g6I635Y+W57uE57uH5Y+K5YW25omA5pyJ5LiL57qn57uE57uH5LiL55qE55So5oi377yM6buY6K6kZmFsc2VcclxuICAgICAgICAgICAgbm90R2V0U3RvcFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRTdG9wVXNlciwgLy8g5piv5ZCm6I635Y+W5YGc55So55So5oi377yM6buY6K6k5Li6ZmFsc2XvvIxcclxuICAgICAgICAgICAgbm90R2V0Q3VycmVudFVzZXI6IHJlcXVlc3RQYXJhbS5ub3RHZXRDdXJyZW50VXNlciwgLy8g5piv5ZCm6I635Y+W5b2T5YmN55So5oi377yM6buY6K6k5Li6dHJ1Ze+8jFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCwgLy8g5o6S5bqPXHJcbiAgICAgICAgICAgIHVzZXJUeXBlTW9kZTogcmVxdWVzdFBhcmFtLnVzZXJUeXBlTW9kZSxcclxuICAgICAgICAgICAgc2VhcmNoTW9kZTogJ29yJyxcclxuICAgICAgICAgICAgcGlueWluOiBjb2RlT3JOYW1lLFxyXG4gICAgICAgICAgICBpbml0aWFsczogY29kZU9yTmFtZSxcclxuICAgICAgICAgICAgZmlsdGVySWQ6IHJlcXVlc3RQYXJhbS5maWx0ZXJJZCxcclxuICAgICAgICAgICAgd2l0aFBlcm1pc3Npb246IHJlcXVlc3RQYXJhbS53aXRoUGVybWlzc2lvbixcclxuICAgICAgICAgICAgYXV0aE9wOiByZXF1ZXN0UGFyYW0uYXV0aE9wLFxyXG4gICAgICAgICAgICBzZWN1cml0eUNvbnRyb2w6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUNvbnRyb2wsXHJcbiAgICAgICAgICAgIHNlY3VyaXR5TGV2ZWw6IHJlcXVlc3RQYXJhbS5zZWN1cml0eUxldmVsXHJcbiAgICAgICAgICAgIC8vIOaaguaXoOazleaPkOS6pOa1i+ivlVxyXG4gICAgICAgICAgICAvL3JldmVyc2VPcmdBbGxQYXRoOiByZXF1ZXN0UGFyYW0ucmV2ZXJzZU9yZ0FsbFBhdGhcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChyZXF1ZXN0UGFyYW0ub3JnSWQpIHtcclxuICAgICAgICAgICAgYm9keS5vcmdJZCA9IHJlcXVlc3RQYXJhbS5vcmdJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbS5wYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICBib2R5LnBhZ2VTaXplID0gcmVxdWVzdFBhcmFtLnBhZ2VTaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVxdWVzdFBhcmFtLnBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICBib2R5LnBhZ2VJbmRleCA9IHJlcXVlc3RQYXJhbS5wYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCArICcvdXNlcicsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W576k57uE5L+h5oGvXHJcbiAgICAgKiBAcGFyYW0gdXJsIOaOpeWPo+WcsOWdgFxyXG4gICAgICogQHJldHVybnMgb2JzZXJ2YWJsZVxyXG4gICAgICovXHJcbiAgICBnZXRHcm91cE9yR3JvdXBQZXJzb25uZWwodXJsOiBzdHJpbmcsIHBhcmFtPzogeyBpc2VuYWJsZTogYm9vbGVhbiwgcGFyZW50aWQ6IHN0cmluZyB9KSB7XHJcbiAgICAgICAgbGV0IGJhc2VVcmwgPSB1cmw7XHJcbiAgICAgICAgaWYgKHBhcmFtLnBhcmVudGlkKSB7XHJcbiAgICAgICAgICAgIGJhc2VVcmwgKz0gJz9pc2VhbmJsZT0nICsgcGFyYW0uaXNlbmFibGUgKyAnJnBhcmVudGlkPScgKyBwYXJhbS5wYXJlbnRpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldChiYXNlVXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bpgInkurrnu4Tku7blhajlsYDphY3nva7lj4LmlbBcclxuICAgIGdldEdsb2JhbFBhcmFtQ29uZmlnKHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bnu4Tnu4fmnrbmnoTkuIvmiYDmnInmiJDlkZjmiYDlsZ7nmoTlspfkvY3vvIznlKjkuo7kurrlkZjkuozmrKHov4fmu6RcclxuICAgIGdldEZpbHRlclBvc2l0aW9uKHVybDogc3RyaW5nLCBhYnNPcmdUeXBlOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogUGVyc29ubmVsUmVxdWVzdFBhcmFtKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgYWJzT3JnVHlwZSxcclxuICAgICAgICAgICAgd2l0aEFsbE9yZzogcmVxdWVzdFBhcmFtLndpdGhBbGxPcmcsXHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvOiByZXF1ZXN0UGFyYW0uZ2V0VXNlckluZm8sXHJcbiAgICAgICAgICAgIG5vdEdldFN0b3BVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0U3RvcFVzZXIsXHJcbiAgICAgICAgICAgIG5vdEdldEN1cnJlbnRVc2VyOiByZXF1ZXN0UGFyYW0ubm90R2V0Q3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIG9yZGVyRmllbGQ6IHJlcXVlc3RQYXJhbS5vcmRlckZpZWxkLFxyXG4gICAgICAgICAgICB1c2VyVHlwZU1vZGU6IHJlcXVlc3RQYXJhbS51c2VyVHlwZU1vZGUsXHJcbiAgICAgICAgICAgIGZpbHRlcklkOiByZXF1ZXN0UGFyYW0uZmlsdGVySWQsXHJcbiAgICAgICAgICAgIGN1clVzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBvcmdJZDogcmVxdWVzdFBhcmFtLm9yZ0lkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBib2R5LCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bnlKjmiLfliIbnu4TkuIvmiYDmnInmiJDlkZjmiYDlsZ7nmoTnu4Tnu4fvvIznlKjkuo7kurrlkZjkuozmrKHov4fmu6RcclxuICAgIGdldEZpbHRlck9yZ2FuaXphdGlvbih1cmw6IHN0cmluZywgYWJzT3JnVHlwZTogc3RyaW5nLCByZXF1ZXN0UGFyYW06IFBlcnNvbm5lbFJlcXVlc3RQYXJhbSkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIGFic09yZ1R5cGUsXHJcbiAgICAgICAgICAgIHdpdGhBbGxPcmc6IHJlcXVlc3RQYXJhbS53aXRoQWxsT3JnLFxyXG4gICAgICAgICAgICBnZXRVc2VySW5mbzogcmVxdWVzdFBhcmFtLmdldFVzZXJJbmZvLFxyXG4gICAgICAgICAgICBub3RHZXRTdG9wVXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldFN0b3BVc2VyLFxyXG4gICAgICAgICAgICBub3RHZXRDdXJyZW50VXNlcjogcmVxdWVzdFBhcmFtLm5vdEdldEN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBvcmRlckZpZWxkOiByZXF1ZXN0UGFyYW0ub3JkZXJGaWVsZCxcclxuICAgICAgICAgICAgdXNlclR5cGVNb2RlOiByZXF1ZXN0UGFyYW0udXNlclR5cGVNb2RlLFxyXG4gICAgICAgICAgICBmaWx0ZXJJZDogcmVxdWVzdFBhcmFtLmZpbHRlcklkLFxyXG4gICAgICAgICAgICBjdXJVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgZ3JvdXBJZDogcmVxdWVzdFBhcmFtLmdyb3VwSWQsXHJcbiAgICAgICAgICAgIG9yZ0lkOiByZXF1ZXN0UGFyYW0ub3JnSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIGJvZHksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJQb3NpdGlvbkluZm8odXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsICsgJy91c2VyUG9zaXRpb24nLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBc3NpZ25RdWVyeVJlc3VsdCh1cmw6IHN0cmluZywgcmVxdWVzdFBhcmFtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSHR0cEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCByZXF1ZXN0UGFyYW0sIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJNYW5hZ2VBc3NpZ25SZXN1bHQodXJsOiBzdHJpbmcsIHJlcXVlc3RQYXJhbTogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaGVhZGVyczogbmV3IEh0dHBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCArICcvdXNlck1hbmFnZVJlc3VsdCcsIHJlcXVlc3RQYXJhbSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==