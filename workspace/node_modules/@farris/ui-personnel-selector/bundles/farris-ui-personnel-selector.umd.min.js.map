{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-personnel-selector/lib/grid-personnel-selector.component.ts","ng://@farris/ui-personnel-selector/utils/api-service.ts","ng://@farris/ui-personnel-selector/utils/app.token.ts","ng://@farris/ui-personnel-selector/utils/favorites.tool.ts","ng://@farris/ui-personnel-selector/utils/group.tool.ts","ng://@farris/ui-personnel-selector/utils/loading-service.ts","ng://@farris/ui-personnel-selector/utils/locale.ts","ng://@farris/ui-personnel-selector/lib/selection.component.ts","ng://@farris/ui-personnel-selector/assets/resource.ts","ng://@farris/ui-personnel-selector/lib/tab-candidate/candidate.component.ts","ng://@farris/ui-personnel-selector/lib/tab-favorites/favorites.component.ts","ng://@farris/ui-personnel-selector/lib/tab-group/group.component.ts","ng://@farris/ui-personnel-selector/lib/tab-recent-contacts/trc.component.ts","ng://@farris/ui-personnel-selector/lib/quickInputDatagrid.component.ts","ng://@farris/ui-personnel-selector/lib/search-result-page/srp.component.ts","ng://@farris/ui-personnel-selector/lib/selection.service.ts","ng://@farris/ui-personnel-selector/utils/user.type.ts","ng://@farris/ui-personnel-selector/lib/tab-org-mid/unselectdatagrid.component.ts","ng://@farris/ui-personnel-selector/utils/filterorg.tool.ts","ng://@farris/ui-personnel-selector/lib/tab-usergroup-mid/usergroupunselect.component.ts","ng://@farris/ui-personnel-selector/lib/tab-org-personnel/op.component.ts","ng://@farris/ui-personnel-selector/lib/unselectdatagridorg.component.ts","ng://@farris/ui-personnel-selector/lib/unSelectDatagridRoleComponent.ts","ng://@farris/ui-personnel-selector/lib/quick-select-page/qsp.component.ts","ng://@farris/ui-personnel-selector/lib/pipe/search-keyword.pipe.ts","ng://@farris/ui-personnel-selector/lib/selection.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__values","o","m","Symbol","iterator","i","call","next","length","value","done","_super","personnelSelectorDefautOption","absOrgType","readonly","placeholder","viewType","busNum","idField","DatagridPersonnelSelectorComponent","__extends","__","this","constructor","prototype","create","tslib_1.__extends","DatagridBaseEditorDirective","ngOnInit","options","assign","omitBy","itemValue","isUndefined","isNull","instance","selectedData","EventEmitter","clear","ngAfterViewInit","_this","inputElement","el","nativeElement","ngControl","formDirective","form","bindingData","setValue","fieldPath","utils","join","getValue","inputClear","updateControlValue","emit","tagRemoved","removedItem","mapFields","helpFields","keys","_.cloneDeep","forEach","key","vArr","split","splice","deleteIndex","v","push","index","eventPrams","selectionsChange","changeData","formedSelections","formSelectedRowData","selectedRow","lookupFieldMap","selectedRowData","selections","item","defaultDisplayName","displayField","code","name","displayName","formatFn","$event","eventParams","Component","args","selector","template","Renderer2","ElementRef","RuntimeStateService","CommonUtils","Injector","ViewChild","render","rts","injector","helpData","dataObj","f","val","map","h","ff","field","trim","PersonnelSelectorDataGridEditorProvider","provide","GRID_EDITORS","useValue","multi","ApiLocalService","filterGroupLeader","param","url","BasePathService","convertPath","headers","HttpHeaders","Content-Type","http","post","getGroupLeaderStatus","getOrganization","getSysUserGroup","paramStr","JSON","stringify","params","get","getPersonnelByOrgId","orgId","requestParam","body","pageIndex","pageSize","getUserInfo","withAllOrg","notGetStopUser","notGetCurrentUser","orderField","userTypeMode","filterId","posId","withPermission","authOp","securityControl","securityLevel","getPersonnelByUserGroupId","withAllGroup","groupId","getPersonnelByUserIds","searchParam","idsArr","userIds","ids","substring","searchRequestBody","idList","getPersonnelBySearch","codeOrName","searchMode","pinyin","initials","getGroupOrGroupPersonnel","baseUrl","parentid","isenable","getGlobalParamConfig","getFilterPosition","curUser","getFilterOrganization","getUserPositionInfo","getAssignQueryResult","getUserManageAssignResult","Injectable","HttpClient","GROUP_SERVICE","InjectionToken","FavoritesTool","curdRecentContactsOrFavorites","actionToken","absRfQueryUrl","absRfModifyUrl","defineProperty","subject","asObservable","setFavoritesList","getFavoritesList","enableFavorites","bizId","objectValue","disableCurrentUser","currentUserId","gspframeworkService","common","userInfos","id","filterUserIds","enableSecurityControl","of","toggleFavorites","e","object","action","favoritesList","findIndex","deleteList","addList","subscribe","filter","cancelBubble","stopPropagation","clearFavoritesList","initFavorites","Subject","GroupTool","getGroups","getPersonnelByGroup","DataLoadingService","show","configOrMessage","loadingCmp","close","loadingConfig","buildLoadingConfig","loadingService","message","delay","hide","PERSONNEL_SELECTOR_LOCALE","zh-CHS","personnelSelector","selection","selectionDialogTitle","recent","candidate","organization","sysUserGroup","group","favorites","searchPlaceHolder","confirm","cancel","select","tabCommon","checkAll","noUserData","clearAll","noDataInfo","unSelectableInfo","enableChildHierarchy","includeCurrentUser","childHierarchyTitle","currentUserTitle","userGroup","newGroupName","newGroupNote","newGroupPlaceHolder","publicGroup","privateGroup","appendMembers","items","saveGroup","editGroup","noPersonnelMessage","title","showLeader","position","selectPlaceHolder","noOrgData","searchPage","firstResultText","lastResultText","quickSelect","result","firstTotalText","lastTotalText","quickMode","advancedMode","groupExtend","inappropriateData","vaildElements","multiSelect","filterOrgs","noneFilterOrgs","filterPositionError","filterOrgError","zh-CHT","en","PersonnelSelectorComponent","_includeCurrentUser","_disableCurrentUser","_onlyCurrentOrg","_enableChildSysUserTree","isOnTop","top","document","_enableRecentContacts","_personnelOrderField","Number","isInteger","_securityLevel","data","secLevel","securityLevelObj","parse","_a","getSelectedInfo","writeValue","obj","finalText","multipleChoiceSeparator","enableQuick","setQuickContainerWidth","registerOnChange","fn","onModelChange","registerOnTouched","onModelTouched","setDisabledState","isDisabled","Error","clearButid","indexId","selectAllPersonnelIndexId","selectAllOrganizationIndexId","selectLatelyPersonnelIndexId","quickContainerId","tagContainerId","dialogId","pIncludeCurrentUser","showTabIds","includes","activeTabId","urlWithBasePath","absUserOrgUrl","groupUrl","groupExtendUrl","personnelParamUrl","positionUserManageUrl","initDisplayTab","checkDisplayTab","NgControl","initLocaleItems","initRegisterEvent","windowInnerHeight","window","innerHeight","dialogHeight","groupTitleStream","pipe","debounceTime","distinctUntilChanged","validGroupTitle","treeTableCols","width","orgTreeCell","columnsOrg","opCellOrg","documentClick_Org","event","querySelector","parentNodeTitle_one","target","parentNodeTitle_two","searchOrgElementVisible","showUnSelectableInfo","documentClick_SysUerGroup","searchSysUserGroupElementVisible","mapFields2Component","dialogElement","targetElement","addEventListener","height","parseInt","getComputedStyle","farrisDialog","getPropertyValue","replace","ngOnChanges","changes","userIdsChange","orgIdChange","currentValue","assembleDataByUserId","shownOrgId","enableHierarchicalLoading","hlAssembleTreeData","assembleTreeData","ngOnDestroy","dtcSub","unsubscribe","quickContainerWidth","cdRef","detectChanges","setTimeout","tagContainerElement","tagContainerWidth","offsetWidth","quickContainerElement","offsetLeft","checkGroupInfo","groupTabId","checkGroupExtend","toggleGroupDialog","notifyService","info","localeService","showGroupDialog","groupDialogTitle","groupTitle","groupNote","editingGroupId","listentCandidateItemsChange","candidateItems","listenGroupTitle","helpExtend","description","type","curdGroupData","then","groupComponent","assembleData","setInputGroupElementWith","allTabIds","inputGroupElementWith","hideSearchOrgElement","hideSearchSysUserGroupElement","searchLocationOrg","locationOrgText","locationOrgList","hlAssembleLocationOrgList","assembleLocationOrgList","locationOrg","searchLocationSysUserGroup","locationSysUserGroupText","hlAssembleLocationSysUserGroupList","locationSysUserGroupList","assembleLocationSysUserGroupList","locationSysUserGroup","orgNode","removeEventListener","notGetStopOrg","includeStopOrg","orgIdField","getAllParentOrg","apiService","res","userManagePathResult","orgPathList","filterOrg","shownOrgPath","targetData","originalTreeData","find","path","pathList_1","a","highLayer","concat","maxLength_1","minLength_1","layer","slice","targetArray","org","treeListData","hlDataToTree","farrisTree","rowHeight","currentSelectOrgId","selectOrgTreeNode","datagridLoad","pathArr","getCurrentPath","expandTreeNode","selectNode","node","resData","userGroupPathList","selectable","_isInArray","originalSysUserGroupTreeData","sysUserGroupTreeListData","hlSysUserGroupDataToTree","sysUserGroupTree","userGroupId","selectUserGroupTreeNode","expandSysUserGroupTreeNode","treeData","expandNode","children","pathList","originalArr","customTreeData","confirmSearchOrg","parentNodes","getUnitParentsById","orgAllPath","assembleOrgFullPath","getOrgAllPath","hlConfirmSearchOrg","filterUserGroups","indexOf","usergroup","isSearchTree","sortArray","arr","sort","reduce","pre","cur","enableRecentContacts","recentTabId","unSelectedUserIds","candidateTabId","allTabIds_1","organizationTabId","sysUserGroupTabId","enableMyGroup","favoritesTabId","favoritesTool","oldArr","fromEvent","inculdeQuickPanelToken","composedPath","element","classList","contains","quickPanelVisible","initComponentMap","componentMap","set","unSelectDatagrid","sysUserGroupUnselect","candidateDatagrid","recentContactsComponent","favoritesComponent","getOrganizationByParentNode","parentNode","parentID","newDatas_1","it","nodes","dealDataWhenExpandTreeNode","appendChildren","getSysUserGroupByParentNode","parentId","newDatas_2","dealSysUserGroupDataWhenExpandTreeNode","assembleInitOrgId","orgIdOrg","userManageResult","currentOrgPath","getOrgAllPathInfo","curAbsUser","orgAllPathInfo","_items","n","t","dataToTree","defaultOrgId","defaultOrgPath","pathOrg","orgPath","assembleCustomTreeData","hlAssembleSysUserGroupTreeData","currentPath","currentNode","filterSysUserGroupTreeData","getFilterSysUserGroupData","sysUserGroupDataToTree","assembleSysUserGroupTreeData","withAllSub","assembleCustomSysUserGroupTreeData","initGroupLeaderStatus","showGroupLeader","textvalue","includeGroupLeader","pIncludeGroupLeader","array","getCurOrgInfoById","getParentsById","getChildrenById","customSysUserGroupTreeData","getCurUserGroupInfoById","getSysUserGroupParentsById","getSysUserGroupChildrenById","array_1","tslib_1.__values","array_1_1","msgService","warning","userGroupNode","array_2","array_2_1","curNode","resArray","parents","parents_1","parents_1_1","valueType","parents_2","parents_2_1","children_1","children_1_1","parents_3","parents_3_1","children_2","children_2_1","listenTreeExpand","currentOrg","isDetail","listenSysUserTreeExpand","currentUserGroup","listenGroupChange","listenPageIndexChange","unifiedSearch","listenPageSizeChange","listenClosePanelChange","hideSearchPanel","updateStatusAfterClosePanel","selectTabs","activeId","listenSelectionsChange","showUserCode","component","token","recentContactsList","returnResult","listenSearchResultChange","changed","stopNodeSelected","listenRecentContactsChange","unSelectedListLoad","unSelectedList","abbreviation","ext1","ext2","fullPathName","orgTypeId","sortOrder","state","su","userId","toggleChecked","nodeExpanded","expanded","plainSource","userPath","hlDealData","userPathList","maxLength","newDatas","Map","parentPath","leaf","hlSysUserGroupDealData","listData","dealData","dealSysUserGroupData","newsDataObj","treeSource","parent","parentLayer","itemPath","itemLayer","targetPath","substr","assembleFinalText","expressionName","expression","_i","arguments","codeAndName","addRecentContacts","clearData","reverseSelections","recentContactsLimit","rit","unshift","error","includeStopUser","personnelOrderField","userData","userInShownOrg","filterFavData","user","numberType","cloneSelections","confirmToken","selectionList","quickInput","selectionsChangeUn","toggleType","toggleIncludeCurrentUser","toggleChildHierarchy","changeisExclude","switchPage","loadDataSelected","treeSelectedNodeInfo","pageIndexOrg","loadSysUserGroupDataSelected","filterPosition","filterPositionId","positionFilterComboList","displayText","onClear","assembleDataByOrgIdAndGetFilterPosition","showOrgFilterIcon","orgFilterComboList","assembleDataByUserGroupIdAndGetFilterOrg","deleteAll","clearCheckeds","clearUserIds","searchResultComponent","selectAllPersonnel","selectLatelyPersonnel","moveToLeft","lineDataChange","_removeOneFromArray","cancelSelections","originArray","listenSearchText","searchText","searchClear","searchResult","assembeDataBySearch","onSearch","globalSearch","size","searchCandidateItems","searchUserInCandidateItems","start","end","itemTotalCount","pageTotal","Math","ceil","totalCount","lowerCaseSearchText","toLowerCase","dialogIsShow","clearVal","cloneUserIds","changeTabs","nextId","resize","onRemoveSelectItem","currentItem","currentIndex","text","deleteItem","mouseoverBut","getElementById","style","visibility","mouseoutBut","onClosedFarrisDialog","dialogClosed","showQuickSelectPanel","hasSetGlobalConfigParam","bindingPath","multiPath","fieldPaths","checkedIdsForQuickSelect","farrisDialogshow","showHeader","showPersonnelSelectorDialogInWf","showPersonnelSelectorDialog","getGlobalParam$","getUserPositionInfoResult$_1","switchMap","setGlobalConfigParam","tap","positionIds","isArray","toString","getPositionAssignResult","farrisDialogShowInWf","setParamInChildComponent","checkSelectionsIncludeCode","initLoadTreeData","ChangeDetectorRef","adjustModalDialogSize","synchronizeSelections","canShowDialog","showOrgAllPathByDesc","changeDisplayOrgAllPath","farrisDialogclose","dialogFiltershow","filterPositionData","filterPositionArr","isFilterPositionDataEmpty","isEmptyFilterPosition","filterPositionPlaceHolder","filterOrgData","filterOrgArr","isFilterOrgDataEmpty","isEmptyFilterOrg","filterOrgPlaceHolder","dialogFilter","dialogFilterclose","oldGroupLeaderStatus","currentGroupLeaderStatus","assembleDataByOrgId","assembleDataByUserGroupId","setShowLeaderStatus","checkStatus","drop","moveItemInArray","previousIndex","togglePanelMode","showAdvancedMode","showQuickMode","showOrganizationTab","showSysUserGroupTab","showCandidateTab","showRecentTab","showFavoritesTab","showGroupTab","ccwork","createElement","src","random","head","appendChild","tabId","loadRecentContactsList","loadFavoritesList","loadGroupList","parents_4","parents_4_1","resultArray","targetOrg","pathList_2","orgArray","some","showPageList","maxPageSizeIndex","pageSizeArr","clearFilterSelectionsHandle","filterOrgId","hideFilterDataPanelHandle","selectedValues","clearAllFilterSelections","validElementsInfo","groupExtendInfo","filterPositionErrorInfo","presetFilterOrgInfo","filterOrgInfo","filterOrgErrorInfo","xmlhttp","XMLHttpRequest","open","send","status","loadedOrgTree","loadedUserGrouptree","scrollToCurrentNode","orgTreeTimer","clearTimeout","empTreeTimer","reverse","userMangeInfo","ergodicIndex","positionId","sysAssignQueryParam","ownerId","authOpId","authorizationId","changeToUserManageAssignResult","from","Set","getUserManagePathResult","current","relation","fieldCode","fieldRule","fieldValue","fieldValueName","fieldValueRule","fieldValueType","child","targetPathArray","providers","NG_VALUE_ACCESSOR","useExisting","forwardRef","useClass","decorators","Optional","EventManager","HostBinding","Input","read","ViewContainerRef","Output","eventManager","groupTool","cd","baseCls","includeJobLeavers","showInput","draggable","myGroupUrl","myGroupPersonnelUrl","noSelectToRight","pageTotalAll","pageSizeOrg","isContainOrg","pageTotalOrg","pageTotalAllOrg","pageSizeRole","pageIndexRole","isContainRole","orgIdRole","pathRole","pageTotalRole","pageTotalAllRole","unSelectedListOrg","unSelectedListRole","selectAllOrganization","unSelectedQuickList","groupIcon","groupIcon2","organizationList","columns","itemsOrg","columnsRole","itemsRole","clearBut","enablePagination","groupAsPublic","searchPlaceholder","ro","nodataInfo","dataLoadingService","farrisDialogbeforeClose","restoreSelections","loadingInfo","innerHTML","MessagerService","NotifyService","inputElementId","hostElement","ngZone","NgZone","appRef","ApplicationRef","LoadingService","LocaleService","langData","setLocaleData","noDataImg","CandidateComponent","favoritesSubject","searchByCodeOrName","rcRes","rcResData","candidateItemsChange","isAllChecked","allChecked","toggleAll","unCheckAll","emitSelections","toggleOne","checked","unSelectLine","selectLine","inFavorites","itemsBackup","tempSelections","_insertOneIntoSelections","emitObj","initLoad","count","trackByFn","allIndexId","FavoritesComponent","flResData","filterFavoritesList","deleteFromFavorites","recentContactsChange","GroupComponent","selectedGroupId","getPersonnelsByGroup","currentGroupType","groupChange","deleteGroup","groupIdField","publicToken","getGroupList","appendGroupPersonnel","groupPersonnelComponent","toggleGroupPersonnelDialog","groupType","personalToken","showGroupPersonnelDialog","loadingServiceMessage","getDataByGroupId","originalPersonnelsData","groupData","personal","total","getGroupData","resPublic","resPersonal","public","firstPublicGroup","firstPersonalGroup","toggleVisible","publicVisible","personalVisible","Inject","groupService","userIdField","personnelList","groupPersonnels","RecentContactsComponent","getRecentContactsList","filterRecentContacts","clearRecentContactsList","quickInputDatagridComponent","quickInputDatagrid","loadData","itemsQuick","pageChangeCheck","unSelectedListQuick","displayname","nameChs","organizationName","userOrganize","userInFo","userInfo","emitojb","pageIndexQuick","pageSizeQuick","pageTotalQuick","pageTotalAllQuick","isAllSelect","isSingleCheck","alert","test","escape","collection","_insertSomeIntoSelections","userArray","checkRow","unCheckRow","onBeforeUncheck","rowData","SearchResultComponent","loadSearchResult","turnOverPage","dir","num","beforePageIndexChange","inputEl","maxNumber","currentPageNumber","changePageSizeHandler","showPagesPanel","pageSizeChange","pageIndexChange","closePanel","closePanelChange","onMouseEnter","onMouseLeave","pageList","SelectionService","showSubject","localStorage","setItem","getItem","remove","removeItem","providedIn","FilterPosition","FilterOrg","UnSelectDatagridComponent","pEnableChildHierarchy","opCell","filterPersonWithPositionUrl","firstChange","assembleDataBySearch","searchResultChange","orgIds","filterRequestParam","getFilterPosition$","getPersonnel$","filterPosition_1","newItems","FilterOrgTool","selectOrgSubject","emitFilterOrg","UserGroupUnSelectComponent","filterPersonWithOrgUrl","filterOrgTool","filterOrgSub","filterOrgSubject","currentFilterInfo","currentFilterOrg","getFilterOrg$","filterOrg_1","OrgPersonnelComponent","onSearching","hideToggleButton","groupPersonnelDialogChange","showDialog","checkeds","unSelectDatagridOrgComponent","unSelectDatagridOrg","unSelectedListOrgLoad","remark","userTotal","cover","userList","isLoadOutData","unSelectDatagridRoleComponent","unSelectDatagridRole","unSelectedListRoleLoad","QuickSelectComponent","firstLoad","basePathUrl","searchTextStream","_checkedDataIds","assembleItemsFavorites","getItemsBySearch","assembleItemsChecked","searchItems","togglePanelModelChange","checkedDataIds","toggleAllChecked","uncheckedIds","indexc","confirmSelections","BehaviorSubject","SearchKeywordPipe","transform","keyword","Reg","RegExp","sanitizer","bypassSecurityTrustHtml","Pipe","DomSanitizer","PersonnelSelectorModule","NgModule","declarations","entryComponents","imports","DragDropModule","CommonModule","HttpClientModule","LocaleModule","PerfectScrollbarModule","TreeModule","TreeTableModule","FarrisTabsModule","FarrisFormsModule","DatagridModule","DatagridEditorsModule","ListViewModule","FarrisCommonModule","FormsModule","FarrisDialogModule","InputGroupModule","ModalModule","SwitchModule","AvatarModule","TextModule","MessagerModule","NotifyModule","ReactiveFormsModule","LoadingModule","forRoot","ComboListModule","FarrisRTFModule","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { GRID_EDITORS } from '@farris/ui-datagrid';\r\nimport { DatagridBaseEditorDirective } from '@farris/ui-datagrid-editors';\r\nimport * as _ from 'lodash-es';\r\nimport { isNull, isUndefined, omitBy, trim } from 'lodash-es';\r\nimport { PersonnelSelectorComponent } from './selection.component';\r\n\r\nconst personnelSelectorDefautOption = {\r\n  absOrgType: 'System_organization', // 数据源类型\r\n  readonly: false, // 是否只读\r\n  placeholder: '请选择',\r\n  viewType: 'tag',\r\n  busNum: 'common',\r\n  idField: 'userId'\r\n};\r\n\r\n@Component({\r\n  selector: 'grid-personnel-selector',\r\n  template: `\r\n    <div [formGroup]=\"group\" class=\"f-datagrid-cell-formgroup farris-group-auto\">\r\n            <farris-personnel-selector #selection\r\n            style=\"width: 100%\"\r\n            [placeholder]=\"options.placeholder\"\r\n            [enableQuick]=\"false\"\r\n            [readonly]=\"options.readonly\"\r\n            [absOrgType]=\"options.absOrgType\"\r\n            [viewType]=\"options.viewType\"\r\n            [multiSelect]=\"options.multiSelect\"\r\n            [busNum]=\"options.busNum\"\r\n            [mapFields]=\"options.mapFields\"\r\n            [formatFn]=\"options.formatter\"\r\n            [formControlName]=\"column.field\"\r\n            [idField]=\"options.idField\"\r\n            [displayField]=\"options.textField\"\r\n            [showTabIds]=\"options.showTabIds\"\r\n            [enableHierarchicalLoading]=\"options.enableHierarchicalLoading\"\r\n            [filterId]=\"options.filterId\"\r\n            (inputClear)=\"inputClear()\"\r\n            (selectionsChange)=\"selectionsChange($event)\"\r\n            (tagRemoved)=\"tagRemoved($event)\"\r\n            >\r\n            </farris-personnel-selector>\r\n    </div>\r\n    `,\r\n})\r\nexport class DatagridPersonnelSelectorComponent extends DatagridBaseEditorDirective implements OnInit, AfterViewInit {\r\n\r\n  @ViewChild('selection') instance: PersonnelSelectorComponent & { clear: EventEmitter<any>; selectedData: EventEmitter<any> };\r\n\r\n  bindingData: any;\r\n\r\n  constructor(\r\n    render: Renderer2,\r\n    el: ElementRef,\r\n    private rts: RuntimeStateService,\r\n    public utils: CommonUtils,\r\n    injector: Injector) {\r\n    super(render, el, injector);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    // 这里添加了过滤 this.options 中null、undefined,万一 jit 生成了 undefined 的呢，\r\n    this.options = Object.assign({}, personnelSelectorDefautOption, omitBy(this.options, (itemValue) => isUndefined(itemValue) || isNull(itemValue)));\r\n    this.instance.selectedData = new EventEmitter<any>();\r\n    this.instance.clear = new EventEmitter<any>();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputElement = this.el.nativeElement;\r\n    super.ngAfterViewInit();\r\n    if (\r\n      this.instance.ngControl &&\r\n      this.instance.ngControl.formDirective &&\r\n      this.instance.ngControl.formDirective.form &&\r\n      this.instance.ngControl.formDirective.form.bindingData\r\n    ) {\r\n      this.bindingData = this.instance.ngControl.formDirective.form.bindingData;\r\n      this.bindingData.setValue = (fieldPath) => {\r\n        return this.utils.setValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n      this.bindingData.getValue = (fieldPath) => {\r\n        return this.utils.getValue(fieldPath.join('.'), this.bindingData, true);\r\n      };\r\n    }\r\n\r\n  }\r\n\r\n  inputClear() {\r\n    this.updateControlValue(null);\r\n    this.instance.clear.emit();\r\n    if (this.options.inputClear) {\r\n      // 设计器上配置的清空事件\r\n      this.options.inputClear();\r\n    }\r\n  }\r\n\r\n  lookupFieldMap = (helpData, mapFields, dataObj) => {\r\n    if (mapFields) {\r\n      const helpFields = Object.keys(mapFields);\r\n      helpFields.forEach((f: any) => {\r\n        let val = '';\r\n        if (helpData) {\r\n          if (helpData instanceof Array) {\r\n            val = helpData.map((h: any) => {\r\n              return this.utils.getValue(f, h);\r\n            }).join(',');\r\n          } else {\r\n            val = this.utils.getValue(f, helpData);\r\n          }\r\n\r\n        }\r\n\r\n        mapFields[f].split(',').forEach((ff: any) => {\r\n          const field = trim(ff);\r\n          this.utils.setValue(dataObj, field, val);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  tagRemoved(removedItem: {\r\n    deleteItem: any,\r\n    deleteIndex: Number,\r\n    selections: Array<any>\r\n  }) {\r\n    const mapFields = this.instance.mapFields;\r\n    const helpFields = Object.keys(mapFields);\r\n    const bindingData = _.cloneDeep(this.bindingData);\r\n    const selectedData = [];\r\n\r\n    helpFields.forEach(key => {\r\n      let value = this.utils.getValue(mapFields[key], bindingData);\r\n      const vArr = value.split(',');\r\n      vArr.splice(removedItem.deleteIndex, 1);\r\n      vArr.forEach((v, i) => {\r\n        if (!selectedData[i]) {\r\n          selectedData.push({ index: i });\r\n          selectedData[i][key] = v;\r\n        } else {\r\n          selectedData[i][key] = v;\r\n        }\r\n      });\r\n      value = vArr.join(',');\r\n      this.utils.setValue(this.bindingData, mapFields[key], value);\r\n    });\r\n    if (selectedData.length) {\r\n      this.instance.selectedData.emit(selectedData);\r\n    } else {\r\n      this.instance.clear.emit();\r\n    }\r\n\r\n    // 设计器上配置的删除单个标签事件\r\n    if (this.options.tagRemoved) {\r\n      this.options.tagRemoved(this.eventPrams(removedItem));\r\n    }\r\n  }\r\n\r\n  selectionsChange(changeData: {\r\n    info: string,\r\n    data: Array<any>\r\n  }) {\r\n    const formedSelections = this.formSelectedRowData()\r\n    this.updateControlValue(formedSelections);\r\n    this.instance.selectedData.emit(formedSelections);\r\n    // 设计器上配置的选中数据后事件\r\n    if (this.options.selectionsChange) {\r\n      this.options.selectionsChange(this.eventPrams(changeData));\r\n    }\r\n  }\r\n\r\n  updateControlValue(selectedRow) {\r\n    if (this.instance.mapFields && this.bindingData) {\r\n      this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);\r\n    }\r\n  }\r\n\r\n\r\n  formSelectedRowData() {\r\n    let selectedRowData = [];\r\n    this.instance.selections.forEach((item) => {\r\n      const defaultDisplayName = this.instance.displayField ? item[this.instance.displayField] : `[${item.code}]${item.name}`;\r\n      const displayName = this.instance.formatFn ? this.instance.formatFn(item) : defaultDisplayName;\r\n      selectedRowData.push(Object.assign({}, item, { displayName }));\r\n    })\r\n    return selectedRowData.length ? selectedRowData : null;\r\n  }\r\n\r\n  private eventPrams($event): any {\r\n    const p = this.eventParams($event);\r\n    p['instance'] = this.instance;\r\n    p['editor'] = this;\r\n    return p;\r\n  }\r\n}\r\n\r\n\r\nexport const PersonnelSelectorDataGridEditorProvider = { provide: GRID_EDITORS, useValue: { name: 'PersonnelSelector', value: DatagridPersonnelSelectorComponent }, multi: true }","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { OrgRequestParam, PersonnelRequestParam, SearchUserByIdRequestParam } from './user.type';\r\nimport { BasePathService } from '@farris/rtf';\r\n\r\n@Injectable()\r\nexport class ApiLocalService {\r\n\r\n    constructor(public http: HttpClient) { }\r\n\r\n    filterGroupLeader(param: any) {\r\n        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/modify');\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url, param, options);\r\n    }\r\n\r\n    getGroupLeaderStatus(param: any) {\r\n        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/absRecentContacts/getRecentContacts');\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url, param, options);\r\n    }\r\n\r\n    /**\r\n     * 获取行政组织\r\n     * @returns observable\r\n     */\r\n    getOrganization(url: string, param: OrgRequestParam) {\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url + '/org', param, options);\r\n    }\r\n\r\n    /**\r\n     * 获取系统用户分组\r\n     * @returns observable\r\n     */\r\n     getSysUserGroup(param: any) {\r\n        const url = BasePathService.convertPath('/api/runtime/sys/v1.0/usergroups');\r\n        const paramStr = JSON.stringify(param);\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n            params: {\r\n                param: paramStr,\r\n            }\r\n        };\r\n        return this.http.get(url, options);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param url url地址\r\n     * @param absOrgType 系统组织\r\n     * @param orgId 组织id\r\n     * @param requestParam 请求参数\r\n     * @returns observable\r\n     */\r\n    getPersonnelByOrgId(url: string, absOrgType: string, orgId: string, requestParam: PersonnelRequestParam) {\r\n        const body = {\r\n            absOrgType, // 组织类型，默认为系统组织\r\n            pageIndex: requestParam.pageIndex, // 当前页\r\n            pageSize: requestParam.pageSize, // 每页记录数\r\n            getUserInfo: true, // 是否获取用户头像\r\n            orgId, // 组织id，获取当前组织下的用户\r\n            withAllOrg: requestParam.withAllOrg, // 获取组织及其所有下级组织下的用户，默认false\r\n            notGetStopUser: requestParam.notGetStopUser, // 是否获取停用用户，默认为false，\r\n            notGetCurrentUser: requestParam.notGetCurrentUser, // 是否获取当前用户，默认为true，\r\n            orderField: requestParam.orderField, // 排序\r\n            userTypeMode: requestParam.userTypeMode,\r\n            filterId: requestParam.filterId,\r\n            posId: requestParam.posId,\r\n            withPermission: requestParam.withPermission,\r\n            authOp: requestParam.authOp,\r\n            securityControl: requestParam.securityControl,\r\n            securityLevel: requestParam.securityLevel\r\n        };\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url + '/user', body, options);\r\n    }\r\n\r\n    // 根据系统用户分组id获取分组下成员\r\n    getPersonnelByUserGroupId(url: string, requestParam: PersonnelRequestParam) {\r\n        const body = {\r\n            pageIndex: requestParam.pageIndex, // 当前页\r\n            pageSize: requestParam.pageSize, // 每页记录数\r\n            getUserInfo: true, // 是否获取用户头像\r\n            withAllGroup: requestParam.withAllGroup,\r\n            withAllOrg: requestParam.withAllOrg,\r\n            notGetStopUser: requestParam.notGetStopUser, // 是否获取停用用户，默认为false，\r\n            notGetCurrentUser: requestParam.notGetCurrentUser, // 是否获取当前用户，默认为true，\r\n            orderField: requestParam.orderField, // 排序\r\n            userTypeMode: requestParam.userTypeMode,\r\n            filterId: requestParam.filterId,\r\n            groupId: requestParam.groupId,\r\n            withPermission: requestParam.withPermission,\r\n            authOp: requestParam.authOp,\r\n            securityControl: requestParam.securityControl,\r\n            securityLevel: requestParam.securityLevel\r\n        };\r\n        // 需要根据组织进行人员二次过滤\r\n        if(requestParam.orgId) {\r\n            body['orgId'] = requestParam.orgId;\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url + '/user', body, options);\r\n    }\r\n\r\n    /**\r\n     * 查询行政人员（根据人员id返回相关数据）\r\n     * @param url url地址\r\n     * @param absOrgType 系统类型\r\n     * @param ids 人员id\r\n     * @returns observable\r\n     */\r\n    getPersonnelByUserIds(url: string, searchParam: SearchUserByIdRequestParam) {\r\n        let idsArr = [];\r\n        const userIds = searchParam.ids; \r\n        if (userIds) {\r\n            const lastChar = userIds.substring(userIds.length - 1);\r\n            if (lastChar == ',') {\r\n                const fixedIds = userIds.substring(0, userIds.length - 1);\r\n                idsArr = fixedIds.split(',');\r\n            } else {\r\n                idsArr = userIds.split(',');\r\n            }\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        if (searchParam.absOrgType == 'System_organization' && searchParam.securityControl) {\r\n            const searchRequestBody = {\r\n                securityControl: searchParam.securityControl,\r\n                securityLevel: searchParam.securityLevel,\r\n                idList: idsArr\r\n            };\r\n            return this.http.post(`${url}/user/orgType/${searchParam.absOrgType}`, searchRequestBody, options);\r\n        } else {\r\n            return this.http.post(`${url}/user/${searchParam.absOrgType}`, idsArr, options);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 搜索行政人员（根据名称、编号搜索）\r\n     * @param url 传入的url\r\n     * @param absOrgType 数据源类型\r\n     * @param codeOrName 传入的搜索内容\r\n     * @param requestParam 请求参数\r\n     * @returns observable\r\n     */\r\n    getPersonnelBySearch(url: string, absOrgType: string, codeOrName: string, requestParam: PersonnelRequestParam) {\r\n        const body: any = {\r\n            absOrgType, // 组织类型，默认为系统组织\r\n            getUserInfo: true, // 是否获取用户头像,\r\n            codeOrName, // 搜索内容\r\n            withAllOrg: requestParam.withAllOrg, // 获取组织及其所有下级组织下的用户，默认false\r\n            notGetStopUser: requestParam.notGetStopUser, // 是否获取停用用户，默认为false，\r\n            notGetCurrentUser: requestParam.notGetCurrentUser, // 是否获取当前用户，默认为true，\r\n            orderField: requestParam.orderField, // 排序\r\n            userTypeMode: requestParam.userTypeMode,\r\n            searchMode: 'or',\r\n            pinyin: codeOrName,\r\n            initials: codeOrName,\r\n            filterId: requestParam.filterId,\r\n            withPermission: requestParam.withPermission,\r\n            authOp: requestParam.authOp,\r\n            securityControl: requestParam.securityControl,\r\n            securityLevel: requestParam.securityLevel\r\n            // 暂无法提交测试\r\n            //reverseOrgAllPath: requestParam.reverseOrgAllPath\r\n        };\r\n        if (requestParam.orgId) {\r\n            body.orgId = requestParam.orgId;\r\n        }\r\n        if (requestParam.pageSize) {\r\n            body.pageSize = requestParam.pageSize;\r\n        }\r\n        if (requestParam.pageIndex) {\r\n            body.pageIndex = requestParam.pageIndex;\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url + '/user', body, options);\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 获取群组信息\r\n     * @param url 接口地址\r\n     * @returns observable\r\n     */\r\n    getGroupOrGroupPersonnel(url: string, param?: { isenable: boolean, parentid: string }) {\r\n        let baseUrl = url;\r\n        if (param.parentid) {\r\n            baseUrl += '?iseanble=' + param.isenable + '&parentid=' + param.parentid;\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.get(baseUrl, options);\r\n    }\r\n\r\n    // 获取选人组件全局配置参数\r\n    getGlobalParamConfig(url: string) {\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url, options);\r\n    }\r\n\r\n    // 获取组织架构下所有成员所属的岗位，用于人员二次过滤\r\n    getFilterPosition(url: string, absOrgType: string, requestParam: PersonnelRequestParam) {\r\n        const body = {\r\n            absOrgType,\r\n            withAllOrg: requestParam.withAllOrg,\r\n            getUserInfo: requestParam.getUserInfo,\r\n            notGetStopUser: requestParam.notGetStopUser,\r\n            notGetCurrentUser: requestParam.notGetCurrentUser,\r\n            orderField: requestParam.orderField,\r\n            userTypeMode: requestParam.userTypeMode,\r\n            filterId: requestParam.filterId,\r\n            curUser: false,\r\n            orgId: requestParam.orgId,\r\n        };\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url, body, options);\r\n    }\r\n\r\n    // 获取用户分组下所有成员所属的组织，用于人员二次过滤\r\n    getFilterOrganization(url: string, absOrgType: string, requestParam: PersonnelRequestParam) {\r\n        const body = {\r\n            absOrgType,\r\n            withAllOrg: requestParam.withAllOrg,\r\n            getUserInfo: requestParam.getUserInfo,\r\n            notGetStopUser: requestParam.notGetStopUser,\r\n            notGetCurrentUser: requestParam.notGetCurrentUser,\r\n            orderField: requestParam.orderField,\r\n            userTypeMode: requestParam.userTypeMode,\r\n            filterId: requestParam.filterId,\r\n            curUser: false,\r\n            groupId: requestParam.groupId,\r\n            orgId: requestParam.orgId,\r\n        };\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url, body, options);\r\n    }\r\n\r\n    getUserPositionInfo(url: string) {\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url + '/userPosition', options);\r\n    }\r\n\r\n    getAssignQueryResult(url: string, requestParam: any) {\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url, requestParam, options);\r\n    }\r\n\r\n    getUserManageAssignResult(url: string, requestParam: any) {\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post(url + '/userManageResult', requestParam, options);\r\n    }\r\n\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { GroupTool } from './group.tool';\r\n\r\nexport const GROUP_SERVICE = new InjectionToken<GroupTool>('groupService');\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of, Subject } from 'rxjs';\r\nimport { RfRequestParam, SecurityLevel } from './user.type';\r\n\r\n@Injectable()\r\nexport class FavoritesTool {\r\n\r\n    absOrgType = 'System_organization';\r\n    busNum = 'common';\r\n    idField = 'userId';\r\n    disableCurrentUser = false;\r\n    withPermission = false;\r\n    favoritesList = [];\r\n    enableFavorites = true;\r\n    initFavorites = false;\r\n    enableSecurityControl: boolean = false;\r\n    securityLevel: SecurityLevel;\r\n\r\n    absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';\r\n    absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';\r\n\r\n    private subject = new Subject<any>();\r\n\r\n    constructor(private http: HttpClient) {\r\n\r\n    }\r\n\r\n    /**\r\n     * 操作最近联系人或收藏夹\r\n     * @param param RfRequestParam\r\n     * @returns observable\r\n     */\r\n     curdRecentContactsOrFavorites(actionToken: string, param: RfRequestParam) {\r\n        let url = this.absRfQueryUrl;\r\n        if (actionToken === 'modify') {\r\n            url = this.absRfModifyUrl;\r\n        }\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            })\r\n        };\r\n        return this.http.post(url, param, options);\r\n    }\r\n\r\n    get favoritesSubject(): Observable<any> {\r\n        return this.subject.asObservable();\r\n    }\r\n\r\n    setFavoritesList(value: any) {\r\n        this.subject.next(value);\r\n    }\r\n\r\n    /**\r\n     * 获取收藏夹中人员列表\r\n     */\r\n    getFavoritesList(): Observable<any> {\r\n        if (this.enableFavorites) {\r\n            const param: RfRequestParam = {\r\n                absOrgType: this.absOrgType,\r\n                bizId: this.busNum,\r\n                objectValue: 'CollectUser'\r\n            };\r\n            if (this.disableCurrentUser) {\r\n                const currentUserId = (window as any).gspframeworkService.common.userInfos.get().id;\r\n                param.filterUserIds = [currentUserId];\r\n            }\r\n            if (this.withPermission) {\r\n                param.withPermission = true;\r\n                param.authOp = 'UserManage';\r\n            }\r\n            if (this.enableSecurityControl) {\r\n                param.securityControl = true;\r\n                param.securityLevel = this.securityLevel;\r\n            }\r\n            return this.curdRecentContactsOrFavorites('query', param);\r\n        }\r\n        return of(null);\r\n    }\r\n\r\n    /**\r\n     * 加入或取消收藏\r\n     * @param e 鼠标事件\r\n     * @param id 标识\r\n     * @returns Observable\r\n     */\r\n    toggleFavorites(e: any, object: any) {\r\n        const id = object[this.idField];\r\n        let action = 'add';\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'CollectUser'\r\n        };\r\n        if (this.favoritesList.findIndex(item => item[this.idField] === id) !== -1) {\r\n            param.deleteList = [id];\r\n            action = 'delete';\r\n        } else {\r\n            param.addList = [id];\r\n        }\r\n        this.curdRecentContactsOrFavorites('modify', param).subscribe(() => {\r\n            if (action === 'add') {\r\n                const index = this.favoritesList.findIndex(item => item[this.idField] === id);\r\n                if (index === -1) {\r\n                    this.favoritesList.push(object);\r\n                }\r\n            } else {\r\n                this.favoritesList = this.favoritesList.filter(item => item[this.idField] !== id);\r\n            }\r\n            this.setFavoritesList(this.favoritesList);\r\n        });\r\n        e.cancelBubble = true;\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * 清空我的收藏\r\n     */\r\n    clearFavoritesList() {\r\n        if (!this.favoritesList.length) {\r\n            this.setFavoritesList(this.favoritesList);\r\n            return;\r\n        }\r\n        const ids = this.favoritesList.map(item => item[this.idField]);\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'CollectUser',\r\n            addList: [],\r\n            deleteList: ids\r\n        };\r\n\r\n        this.curdRecentContactsOrFavorites('modify', param).subscribe((val) => {\r\n            this.favoritesList = [];\r\n            this.setFavoritesList(this.favoritesList);\r\n        });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { UserInfo } from './user.type';\r\n\r\nexport interface Group {\r\n    public: Array<GroupItem>;\r\n    personal: Array<GroupItem>;\r\n}\r\n\r\nexport interface GroupItem {\r\n    id: string;\r\n    title: string;\r\n    index?: string;\r\n    description?: string;\r\n    total: number;\r\n    avatar?: string;\r\n    checked?: boolean;\r\n}\r\n\r\n@Injectable()\r\nexport class GroupTool {\r\n\r\n    getGroups(): Observable<Group> {\r\n\r\n        return;\r\n    }\r\n\r\n    getPersonnelByGroup(param: any): Observable<Array<UserInfo>> {\r\n        return;\r\n    }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { LoadingService, LoadingConfig, LoadingComponent } from '@farris/ui-loading';\r\n\r\n@Injectable()\r\nclass DataLoadingService {\r\n\r\n  /**\r\n   * 加载中组件实例\r\n   */\r\n  private loadingCmp: LoadingComponent;\r\n\r\n  loadingService: LoadingService;\r\n\r\n  /**\r\n   * 构造函数\r\n   * 注入@farris/ui的LoadingService\r\n   */\r\n  constructor() {\r\n    //this.loadingService = this.injector.get(LoadingService);\r\n  }\r\n\r\n  /**\r\n   * 显示加载中\r\n   */\r\n  public show(configOrMessage?: any): LoadingComponent {\r\n    if (this.loadingCmp) {\r\n      this.loadingCmp.close();\r\n      this.loadingCmp = null;\r\n    }\r\n\r\n    const loadingConfig = this.buildLoadingConfig(configOrMessage);\r\n    this.loadingCmp = this.loadingService.show(loadingConfig);\r\n    return this.loadingCmp;\r\n  }\r\n\r\n  /**\r\n   * 构造LoadingConfig\r\n   * @param configOrMessage 配置对象或消息字符串\r\n   */\r\n  private buildLoadingConfig(configOrMessage: any): LoadingConfig {\r\n    let loadingConfig: LoadingConfig;\r\n    if (!!configOrMessage) {\r\n      if (typeof configOrMessage === 'object') {\r\n        loadingConfig = configOrMessage;\r\n      } else {\r\n        loadingConfig = { 'message': configOrMessage };\r\n      }\r\n    } else {\r\n      loadingConfig = {};\r\n    }\r\n    if (!loadingConfig.hasOwnProperty('delay')) {\r\n      loadingConfig.delay = 0;\r\n    }\r\n    return loadingConfig;\r\n  }\r\n\r\n  /**\r\n   * 隐藏加载中\r\n   */\r\n  public hide() {\r\n    if (!this.loadingCmp) {\r\n      return;\r\n    }\r\n    this.loadingCmp.close();\r\n    this.loadingCmp = null;\r\n  }\r\n}\r\n\r\nexport { DataLoadingService };","export const PERSONNEL_SELECTOR_LOCALE = {\r\n    \"zh-CHS\": {\r\n        personnelSelector: {\r\n            selection: {\r\n                selectionDialogTitle: '人员选择',\r\n                recent: '最近',\r\n                candidate: '人员',\r\n                organization: '组织架构',\r\n                sysUserGroup: '用户分组',\r\n                group: '我的群组',\r\n                favorites: '我的收藏',\r\n                searchPlaceHolder: '请输入姓名汉字/首字母/编号搜索',\r\n                confirm: '确定',\r\n                cancel: '取消',\r\n                select: '请从左侧选择人员数据'\r\n            },\r\n            tabCommon: {\r\n                checkAll: '全选',\r\n                noUserData: '暂无数据',\r\n                clearAll: '清空联系人'\r\n            },\r\n            organization: {\r\n                searchPlaceHolder: '输入关键字定位',\r\n                noDataInfo: '未找到相关组织',\r\n                unSelectableInfo: '相关组织不在可定位的范围内',\r\n                enableChildHierarchy: '含子级',\r\n                includeCurrentUser: '含本人',\r\n                childHierarchyTitle: '含子级',\r\n                currentUserTitle: '含本人'\r\n            },\r\n            userGroup: {\r\n                searchPlaceHolder: '输入关键字定位'\r\n            },\r\n            group: {\r\n                newGroupName: '群组名称',\r\n                newGroupNote: '群组备注',\r\n                newGroupPlaceHolder: '请输入',\r\n                publicGroup: '公共群组',\r\n                privateGroup: '个人群组',\r\n                appendMembers: '添加组员',\r\n                items: '人',\r\n                saveGroup: '保存为群组',\r\n                editGroup: '编辑群组',\r\n                noPersonnelMessage: '请先选择人员。'\r\n            },\r\n            filter: {\r\n                title: '筛选',\r\n                showLeader: '显示集团领导',\r\n                position: '岗位',\r\n                organization: '组织',\r\n                selectPlaceHolder: '请选择',\r\n                noOrgData: '暂无数据',\r\n                clearAll: '清空已选'\r\n            },\r\n            searchPage: {\r\n                firstResultText: '搜索结果 (',\r\n                lastResultText: ')',\r\n                close: '关闭'\r\n            },\r\n            quickSelect: {\r\n                recent: '最近',\r\n                result: '搜索结果',\r\n                firstTotalText: '已选',\r\n                lastTotalText: '人',\r\n                quickMode: '快捷模式',\r\n                advancedMode: '高级模式'\r\n            },\r\n            message: {\r\n                mapFields: '字段映射中未添加用户唯一标识。',\r\n                groupExtend: '群组扩展函数不存在。',\r\n                inappropriateData: '数据问题',\r\n                vaildElements: '前2个参数必填',\r\n                multiSelect: '单选模式下预置了多条选中数据，请修改！',\r\n                filterOrgs: '筛选组织：',\r\n                noneFilterOrgs: '筛选组织：无',\r\n                filterPositionError: '根据组织和岗位获取人员数据时，调用后端接口出现错误！',\r\n                filterOrgError: '显示组织过滤漏斗的场景下，调用后端接口出现错误！'\r\n            }\r\n        }\r\n    },\r\n    \"zh-CHT\": {\r\n        personnelSelector: {\r\n            selection: {\r\n                selectionDialogTitle: '人員選擇',\r\n                recent: '最近',\r\n                candidate: '人員',\r\n                organization: '組織架構',\r\n                sysUserGroup: '用戶分組',\r\n                group: '我的群組',\r\n                favorites: '我的收藏',\r\n                searchPlaceHolder: '請輸入姓名漢字/首字母/編號搜索',\r\n                confirm: '確定',\r\n                cancel: '取消',\r\n                select: '請從左側選擇人員數據'\r\n            },\r\n            tabCommon: {\r\n                checkAll: '全選',\r\n                noUserData: '暫無數據',\r\n                clearAll: '清空聯係人'\r\n            },\r\n            organization: {\r\n                searchPlaceHolder: '輸入關鍵字定位',\r\n                noDataInfo: '未找到相關組織',\r\n                unSelectableInfo: '相關組織不在可定位的範圍内',\r\n                enableChildHierarchy: '含子級',\r\n                includeCurrentUser: '含本人',\r\n                childHierarchyTitle: '含子級',\r\n                currentUserTitle: '含本人'\r\n            },\r\n            userGroup: {\r\n                searchPlaceHolder: '輸入關鍵字定位'\r\n            },\r\n            group: {\r\n                newGroupName: '群組名稱',\r\n                newGroupNote: '群組備注',\r\n                newGroupPlaceHolder: '請輸入',\r\n                publicGroup: '公共群組',\r\n                privateGroup: '個人群組',\r\n                appendMembers: '添加組員',\r\n                items: '人',\r\n                saveGroup: '保存爲群組',\r\n                editGroup: '編輯群組',\r\n                noPersonnelMessage: '請先選擇人員。'\r\n            },\r\n            filter: {\r\n                title: '篩選',\r\n                showLeader: '顯示集團領導',\r\n                position: '崗位',\r\n                organization: '組織',\r\n                selectPlaceHolder: '請選擇',\r\n                noOrgData: '暫無數據',\r\n                clearAll: '清空已選'\r\n            },\r\n            searchPage: {\r\n                firstResultText: '搜索結果 (',\r\n                lastResultText: ')',\r\n                close: '關閉'\r\n            },\r\n            quickSelect: {\r\n                recent: '最近',\r\n                result: '搜索結果',\r\n                firstTotalText: '已選',\r\n                lastTotalText: '人',\r\n                quickMode: '快捷模式',\r\n                advancedMode: '高級模式'\r\n            },\r\n            message: {\r\n                mapFields: '字段映射中未添加用戶唯一標識。',\r\n                groupExtend: '群組擴展函數不存在。',\r\n                inappropriateData: '數據問題',\r\n                vaildElements: '前2個參數必填',\r\n                multiSelect: '單選模式下預置了多條選中數據，請修改！',\r\n                filterOrgs: '篩選組織：',\r\n                noneFilterOrgs: '篩選組織：無',\r\n                filterPositionError: '根據組織和崗位獲取人員數據時，調用後端接口出現錯誤！',\r\n                filterOrgError: '顯示組織過濾漏斗的場景下，調用後端接口出現錯誤！'\r\n            }\r\n        }\r\n    },\r\n    en: {\r\n        personnelSelector: {\r\n            selection: {\r\n                selectionDialogTitle: 'Select Personnel',\r\n                recent: 'Recent',\r\n                candidate: 'Candidates',\r\n                organization: 'Organizations',\r\n                sysUserGroup: 'User Groups',\r\n                group: 'Groups',\r\n                favorites: 'Favorites',\r\n                searchPlaceHolder: 'Search Personnel By Name, First Phonetic Letter or Code',\r\n                confirm: 'Confirm',\r\n                cancel: 'Cancel',\r\n                select: 'Please Select Personnel'\r\n            },\r\n            tabCommon: {\r\n                checkAll: 'All',\r\n                noUserData: 'Empty Data',\r\n                clearAll: 'Clear'\r\n            },\r\n            organization: {\r\n                searchPlaceHolder: 'Search Organizations',\r\n                noDataInfo: 'Empty Related Organization',\r\n                unSelectableInfo: 'Related Organization Cannot be Selected',\r\n                enableChildHierarchy: 'Subordinate',        \r\n                includeCurrentUser: 'User',\r\n                childHierarchyTitle: 'Display Members of Subordinate Hierarchy',\r\n                currentUserTitle: 'Display Current User'\r\n            },\r\n            userGroup: {\r\n                searchPlaceHolder: 'Search UserGroups'\r\n            },\r\n            group: {\r\n                newGroupName: 'Name',\r\n                newGroupNote: 'Note',\r\n                newGroupPlaceHolder: 'Please input',\r\n                publicGroup: 'Pulic Group',\r\n                privateGroup: 'Private Group',\r\n                appendMembers: 'Append Members',\r\n                items: 'items',\r\n                saveGroup: 'Save Group',\r\n                editGroup: 'Edit Group',\r\n                noPersonnelMessage: 'Please select personnels firstly.'\r\n            },\r\n            filter: {\r\n                title: 'Filter',\r\n                showLeader: 'Show Leader',\r\n                position: 'Position',\r\n                organization: 'Organization',\r\n                selectPlaceHolder: 'Please select',\r\n                noOrgData: 'Empty Data',\r\n                clearAll: 'Clear'\r\n            },\r\n            searchPage: {\r\n                firstResultText: 'Search Result (',\r\n                lastResultText: ')',\r\n                close: 'Close'\r\n            },\r\n            quickSelect: {\r\n                recent: 'Recent',\r\n                result: 'Search Result',\r\n                firstTotalText: 'Total',\r\n                lastTotalText: 'items',\r\n                quickMode: 'Quick',\r\n                advancedMode: 'Advanced'\r\n            },\r\n            message: {\r\n                mapFields: 'UserId is not included in mapping fields.',\r\n                groupExtend: 'Extend function of group is not existed.',\r\n                inappropriateData: 'Error Data',\r\n                vaildElements: 'The first two elements are required',\r\n                multiSelect: 'More than one item are selected in single-select mode, please correct!',\r\n                filterOrgs: 'Filter Organization: ',\r\n                noneFilterOrgs: 'Filter Organization: None',\r\n                filterPositionError: 'Failed to get positions in filter personnels secondly!',\r\n                filterOrgError: 'Failed to get organizations in filter personnels secondly!'\r\n            }\r\n        }\r\n    }\r\n};","import { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport {\r\n    AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, HostBinding, Injector, Input,\r\n    NgZone,\r\n    OnChanges, OnDestroy, OnInit, Optional, Output, Renderer2, SimpleChanges, TemplateRef, ViewChild,\r\n    ViewContainerRef, ApplicationRef, ViewEncapsulation\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { FarrisTabsComponent } from '@farris/ui-tabs';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport * as _ from 'lodash-es';\r\nimport { Subject, fromEvent, Subscription } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, tap, switchMap } from 'rxjs/operators';\r\nimport { ApiLocalService } from '../utils/api-service';\r\nimport { GROUP_SERVICE } from '../utils/app.token';\r\nimport { FavoritesTool } from '../utils/favorites.tool';\r\nimport { GroupTool } from '../utils/group.tool';\r\nimport { OrgRequestParam, PanelMode, PersonnelRequestParam, SearchUserByIdRequestParam, RfRequestParam, SecurityLevel, UserInfo } from '../utils/user.type';\r\nimport { SearchResultComponent } from './search-result-page/srp.component';\r\nimport { CandidateComponent } from './tab-candidate/candidate.component';\r\nimport { FavoritesComponent } from './tab-favorites/favorites.component';\r\nimport { GroupComponent } from './tab-group/group.component';\r\nimport { UnSelectDatagridComponent } from './tab-org-mid/unselectdatagrid.component';\r\nimport { UserGroupUnSelectComponent } from './tab-usergroup-mid/usergroupunselect.component';\r\nimport { RecentContactsComponent } from './tab-recent-contacts/trc.component';\r\nimport { DataLoadingService } from '../utils/loading-service';\r\nimport { LoadingService } from '@farris/ui-loading';\r\nimport { ComboListComponent } from '@farris/ui-combo-list';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { PERSONNEL_SELECTOR_LOCALE } from '../utils/locale';\r\nimport { BasePathService } from '@farris/rtf';\r\n\r\n// todo 好多功能待优化，暂时先完成\r\n@Component({\r\n    selector: 'farris-personnel-selector',\r\n    templateUrl: './selection.component.html',\r\n    styleUrls: ['./selection.component.css'],\r\n    providers: [\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: forwardRef(() => PersonnelSelectorComponent),\r\n            multi: true\r\n        },\r\n        FavoritesTool,\r\n        {\r\n            provide: GROUP_SERVICE,\r\n            useClass: GroupTool\r\n        }\r\n    ]\r\n})\r\nexport class PersonnelSelectorComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy, ControlValueAccessor {\r\n\r\n    @HostBinding('class.f-personnel-selector') baseCls = true;\r\n    @HostBinding('style.width') @Input() width = '100%';\r\n    @ViewChild('farrisDialog') farrisDialog: DialogComponent;\r\n    @ViewChild('dialogFilter') dialogFilter: DialogComponent;\r\n    @ViewChild('unSelectDatagridRoom', { read: ViewContainerRef }) unSelectDatagridRoom: ViewContainerRef;\r\n    @ViewChild('orgTreeCell') orgTreeCell: TemplateRef<any>;\r\n    @ViewChild('opCellOrg') opCellOrg: TemplateRef<any>;\r\n    @ViewChild('opCellQuick') opCellQuick: TemplateRef<any>;\r\n    @ViewChild('selectgroup') selectgroup: TemplateRef<any>;\r\n    @ViewChild('selectTabs') selectTabs: FarrisTabsComponent;\r\n    @ViewChild('farristree') farrisTree: TreeTableComponent;\r\n    @ViewChild('unSelectDatagrid') unSelectDatagrid: UnSelectDatagridComponent;\r\n    @ViewChild('sysUserGroupTree') sysUserGroupTree: TreeTableComponent;\r\n    @ViewChild('sysUserGroupUnselect') sysUserGroupUnselect: UserGroupUnSelectComponent;\r\n    @ViewChild('candidate') candidateDatagrid: CandidateComponent;\r\n    @ViewChild('recent') recentContactsComponent: RecentContactsComponent;\r\n    @ViewChild('favorites') favoritesComponent: FavoritesComponent;\r\n    @ViewChild('group') groupComponent: GroupComponent;\r\n    @ViewChild('searchResultPage') searchResultComponent: SearchResultComponent;\r\n    @ViewChild('positionFilterList') positionFilterComboList: ComboListComponent;\r\n    @ViewChild('orgFilterList') orgFilterComboList: ComboListComponent;\r\n    // 工作流场景中在原生js页面打开选人组件时使用 2022.3.24\r\n    @Input() isOnTop = false;\r\n    @Input() placeholder = '请选择';\r\n    @Input() viewType = 'tag';\r\n    // 业务标识\r\n    @Input() busNum = 'common';\r\n    // 是否显示离职人员\r\n    @Input() includeJobLeavers = false;\r\n    // 包含停用组织\r\n    @Input() includeStopOrg = false;\r\n    // 包含停用用户\r\n    @Input() includeStopUser = false;\r\n    // 单复选控制器 默认复选\r\n    @Input() multiSelect = false;\r\n    // input框是否显示\r\n    @Input() showInput = true;\r\n    @Input() orgIdField = 'orgId';\r\n    // 操作列表或者分组所需要的主键字段，默认为'userId'\r\n    @Input() idField = 'userId';\r\n    // 表单上要展示的字段，对应设计器上的textField属性\r\n    @Input() displayField: string;\r\n    // 默认显示用户还是自定义角色\r\n    @Input() type = 'personnel';\r\n    // 是否只读\r\n    @Input() readonly = false;\r\n    @Input() draggable = true;\r\n    // 组织id，设置后组织架构仅显示该组织及其下级组织\r\n    @Input() orgId = '';\r\n    // 组织path\r\n    @Input() orgPath = '';\r\n    // 用户分组id\r\n    @Input() userGroupId = '';\r\n    // 外部传入的已选人员，多个用英文逗号隔开\r\n    @Input() userIds = '';\r\n    // 外部传入的待选人员，多个用英文逗号隔开\r\n    @Input() unSelectedUserIds = '';\r\n    // 是否包含本人（组织tab页）\r\n    @Input() \r\n    set includeCurrentUser(value: boolean) {\r\n        this._includeCurrentUser = value;\r\n        this._disableCurrentUser = !value;\r\n    }\r\n    get includeCurrentUser() {\r\n        return this._includeCurrentUser;\r\n    }\r\n    _includeCurrentUser: boolean = true;\r\n    _disableCurrentUser: boolean = false;\r\n    // 是否包含本人（用户分组tab页）\r\n    pIncludeCurrentUser: boolean = true;\r\n    // 是否显示我的群组\r\n    @Input() enableMyGroup = false;\r\n    // 是否开启快捷模式\r\n    @Input() enableQuick = false;\r\n    // 传入的url，当前为默认值\r\n    @Input() absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';\r\n    // 组织树分层加载，默认为true(2022.9.6修改)\r\n    @Input() enableHierarchicalLoading = true;\r\n    // 是否包含子级（组织tab页）\r\n    @Input() enableChildHierarchy = true;\r\n    // 是否包含子级（用户分组tab页）\r\n    _enableChildSysUserTree = true;\r\n    // 仅获取当前组织内人员，前提是已指定orgId\r\n    @Input()\r\n    set onlyCurrentOrg(value: boolean) {\r\n        this._enableChildSysUserTree = this.enableChildHierarchy;\r\n        if(this.orgId && this.orgId != '*') {\r\n            this._onlyCurrentOrg = value;\r\n            if(value) {\r\n                this.enableChildHierarchy = false;\r\n            }\r\n        }\r\n    }\r\n    get onlyCurrentOrg() {\r\n        return this._onlyCurrentOrg;\r\n    }\r\n    // 过滤领导业务场景\r\n    @Input() filterId: string;\r\n    // 显示集团领导漏斗\r\n    showGroupLeader = false;\r\n    // 是否包含领导\r\n    includeGroupLeader: boolean;\r\n    pIncludeGroupLeader: boolean;\r\n    // 工作流场景中在原生js页面打开选人组件时使用 2022.3.24\r\n    get parentEle() {\r\n        if(this.isOnTop){\r\n            return top.document.body;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * 数据源类型\r\n     * 默认为： System_organization  系统数据源   获取系统人员、系统组织\r\n     * Administrative_organization  已扩展数据源  获取行政组织、行政人员\r\n     * absOrgType {string}\r\n     * PersonnelSelectorComponent\r\n     */\r\n    @Input() absOrgType = 'System_organization';\r\n    // 我的群组url\r\n    @Input() groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend.js';\r\n    @Input() myGroupUrl = '/api/dec/info/v1.0/Employeechoose/queryMyGroup';\r\n    @Input() myGroupPersonnelUrl = '/api/dec/info/v1.0/Employeechoose/queryGroupUser';\r\n    // todo 启用最近联系人，接口未提供，临时\r\n    @Input() set enableRecentContacts(value: boolean) {\r\n        this._enableRecentContacts = value;\r\n    }\r\n    _enableRecentContacts = false;\r\n    /**\r\n     * 展示哪些tab标签页，展示多个时使用英文逗号隔开\r\n     * recent启用最近联系人，organization启用组织架构，candidate启用候选人，favorites启用收藏功能，group启用群组功能，sysUserGroup启用用户分组\r\n     */\r\n    @Input() showTabIds = 'recent,organization';\r\n    // 默认展示的标签页\r\n    @Input() activeTabId = 'organization';\r\n    /** 字段映射, 仅在farris form中使用{ 帮助数据字段：表单字段 } */\r\n    @Input() mapFields: { [sourceField: string]: string };\r\n    /** 多选分隔符 */\r\n    @Input() multipleChoiceSeparator = ',';\r\n    // 函数自定义输出样式\r\n    @Input() formatFn: (obj: UserInfo) => string;\r\n    // 表达式自定义输出样式 {{}}\r\n    @Input() expression: string;\r\n    // 最近联系人最多展示或添加多少条记录\r\n    @Input() recentContactsLimit = 25;\r\n    // 排序方式: \r\n    // orderby_ordernum - 按人员排序号排序\r\n    // orderby_code - 按人员编号排序\r\n    // orderby_organduser - 先按组织的排序号排序，再按人员的排序号排序\r\n    @Input() set personnelOrderField(value: string) {\r\n        if (value) {\r\n            this._personnelOrderField = value;\r\n        }\r\n    }\r\n    get personnelOrderField() {\r\n        return this._personnelOrderField;\r\n    }\r\n    _personnelOrderField: string = '';\r\n    @Input() userTypeMode = '';\r\n    @Input() set orgPageSize(value: number) {\r\n        if (Number.isInteger(value)) {\r\n            this.pageSize = value;\r\n        }\r\n    }\r\n    get orgPageSize() {\r\n        return this.pageSize;\r\n    }\r\n    // 是否显示自定义分页数据栏\r\n    @Input() showPageList: boolean = false;\r\n    @Input() withPermission: boolean = false;\r\n    // 是否在组织架构页面增加岗位过滤功能\r\n    @Input() filterPosition: boolean = false;\r\n    // 是否在用户分组页面显示过滤组织漏斗\r\n    @Input() showOrgFilterIcon: boolean = false;\r\n    @Input() set securityLevel(data: SecurityLevel) {\r\n        if (typeof data == 'object' && data.secLevel) {\r\n            this._securityLevel = data;\r\n            this.enableSecurityControl = true;\r\n        } else if (typeof data == 'string') {\r\n            try {\r\n                const securityLevelObj = JSON.parse(data);\r\n                if (typeof securityLevelObj == 'object' && securityLevelObj['secLevel']) {\r\n                    this._securityLevel = securityLevelObj;\r\n                    this.enableSecurityControl = true;\r\n                }\r\n            } catch {\r\n                // 暂不需做处理\r\n            }\r\n        }\r\n    }\r\n    get securityLevel(): SecurityLevel {\r\n        return this._securityLevel;\r\n    }\r\n    _securityLevel: SecurityLevel;\r\n    enableSecurityControl: boolean = false;\r\n    // 点击确定按钮后触发\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    // 点击取消按钮后触发\r\n    @Output() selectionsChangeUn = new EventEmitter<any>();\r\n    // 选中的行\r\n    @Output() lineDataChange = new EventEmitter<any>();\r\n    // 全部清除按钮触发回调\r\n    @Output() inputClear = new EventEmitter<any>();\r\n    // 标签删除按钮触发回调\r\n    @Output() tagRemoved = new EventEmitter<any>();\r\n    // 窗口关闭后触发回调\r\n    @Output() dialogClosed = new EventEmitter<any>();\r\n\r\n    allTabIds = '';\r\n    // 组件标识\r\n    indexId = 'sel';\r\n    // 需要的树数据\r\n    treeListData: any[];\r\n    // 存放人员\r\n    unSelectedLists: object;\r\n    // 存放下级组织\r\n    unSelectedOrgLists: object;\r\n    // 存放角色\r\n    unSelectedRoleLists: object;\r\n    // 展示系统用户分组的树形数据\r\n    sysUserGroupTreeListData: any[];\r\n    // 快捷模式输入框\r\n    quickInput = '';\r\n    // 提示项\r\n    noSelectToRight = '当前模式下只能选择单人。';\r\n    // 分页\r\n    pageSize = 50;\r\n    pageIndex = 1;\r\n    path = '0001';\r\n    pageTotal = 0;\r\n    pageTotalAll = 0;\r\n    //下级分页\r\n    pageSizeOrg: number = 7;\r\n    pageIndexOrg: number = 1;\r\n    isContainOrg: number = 0;\r\n    currentSelectOrgId: string;\r\n    orgIdOrg: string = 'G10000001';\r\n    pathOrg: string = \"0001\";\r\n    pageTotalOrg: number = 0;\r\n    pageTotalAllOrg: number = 0;\r\n    //角色分页\r\n    pageSizeRole: number = 7;\r\n    pageIndexRole: number = 1;\r\n    isContainRole: number = 0;\r\n    orgIdRole: string = \"G10000001\";\r\n    pathRole: string = \"0001\";\r\n    pageTotalRole: number = 0;\r\n    pageTotalAllRole: number = 0;\r\n    // 快捷面板是否可见\r\n    quickPanelVisible: boolean = false;\r\n    checkedIdsForQuickSelect: string[] = [];\r\n    // 记录左侧树选中的节点信息\r\n    treeSelectedNodeInfo: any;\r\n    // 未选择的人员列表\r\n    unSelectedList: UserInfo[] = [];\r\n    unSelectedListOrg: any[] = [];\r\n    unSelectedListRole: any[] = [];\r\n    //input框全部删除按钮\r\n    clearButid: string = this.indexId + \"clearBu\";\r\n    //快捷搜索input ID\r\n    quickContainerId: string = this.indexId + \"-qc\";\r\n    quickContainerWidth: number;\r\n    tagContainerId: string;\r\n    //是否全选（最近）\r\n    selectLatelyPersonnel: boolean = false;\r\n    selectLatelyPersonnelIndexId: string = this.indexId + \"selectLatelyPersonnel\";\r\n    //是否全选（人员）\r\n    selectAllPersonnel: boolean = false;\r\n    selectAllPersonnelIndexId: string = this.indexId + \"selectAllPersonnel\";\r\n    //是否全选（组织）\r\n    selectAllOrganization: boolean = false;\r\n    selectAllOrganizationIndexId: string = this.indexId + \"selectAllOrganization\";\r\n    // 已选人员展示\r\n    selections: any[] = [];\r\n    // 快捷选人-待选的人\r\n    unSelectedQuickList: any[] = [];\r\n    // 最重要显示的人员信息\r\n    finalText: any = [];\r\n    // 搜索框的输入值\r\n    searchText = '';\r\n    // 搜索框图表样式\r\n    groupIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n    groupIcon2 = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n    // 人员的组织名集合\r\n    organizationList: any[] = [];\r\n    // 搜索时翻页\r\n    searchPage = false;\r\n    //\r\n    selectionList: any = [];\r\n\r\n    columns = [];\r\n    items = [];\r\n\r\n    columnsOrg = [];\r\n    itemsOrg = [];\r\n\r\n    columnsRole = [];\r\n    itemsRole = [];\r\n\r\n    clearBut = false;\r\n\r\n    set selectedIds(ids: string) {\r\n        this.getSelectedInfo(ids);\r\n    }\r\n\r\n    enablePagination = true;\r\n    private confirmToken = false;\r\n    private msgService: MessagerService;\r\n    private notifyService: NotifyService;\r\n    recentTabId = 'recent';\r\n    organizationTabId = 'organization';\r\n    sysUserGroupTabId = 'sysUserGroup';\r\n    candidateTabId = 'candidate';\r\n    groupTabId = 'group';\r\n    favoritesTabId = 'favorites';\r\n    treeTableCols = [];\r\n    private customTreeData = [];\r\n    private customSysUserGroupTreeData = [];\r\n    private filterSysUserGroupTreeData = [];\r\n    originalTreeData: any;\r\n    originalSysUserGroupTreeData: any;\r\n    public ngControl: any;\r\n    inputElementId: string;\r\n    private hostElement: ElementRef;\r\n    itemElementWidth: any;\r\n    // 首次打开弹窗标识\r\n    initLoadTreeData = true;\r\n    private cloneSelections = [];\r\n    recentContactsList: string[] = [];\r\n    enableFavorites = true;\r\n    componentMap: Map<string, any> = new Map();\r\n    locationOrgText = ''; // 搜索组织文本框文本\r\n    searchOrgElementVisible = false; // 搜索组织结果列表是否展示\r\n    locationOrgList = []; // 搜索组织结果列表\r\n    locationSysUserGroupText = ''; // 搜索用户分组文本框文本\r\n    searchSysUserGroupElementVisible = false; // 搜索用户分组结果列表是否展示\r\n    locationSysUserGroupList = []; // 搜索用户分组结果列表\r\n    http: HttpClient;\r\n    inputGroupElementWith = '250px';\r\n    publicGroup: string;\r\n    showGroupDialog = false;\r\n    groupTitle: string;\r\n    groupNote: string;\r\n    groupAsPublic = false;\r\n    private currentUserId: string;\r\n    private editingGroupId: string;\r\n    searchPlaceholder = '请输入姓名汉字/首字母/编号搜索';\r\n    globalSearch = true;\r\n    private stopNodeSelected = false;\r\n    private cdRef: ChangeDetectorRef;\r\n    // 显示搜索结果界面\r\n    hideSearchPanel = true;\r\n    // 搜索结果，数据结构同selections\r\n    searchResult = [];\r\n    dialogId = '';\r\n    private render: Renderer2;\r\n    dialogHeight = 576;\r\n    private ngZone: NgZone;\r\n    private ro: ResizeObserver | null = null;\r\n    validGroupTitle = true;\r\n    private groupTitleStream: Subject<string> = new Subject<string>();\r\n    groupDialogTitle = \"\";\r\n    candidateItems = [];\r\n    dtcSub: Subscription;\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    // 是否显示最近联系人tab页，绑定farris-tab组件的show属性\r\n    showRecentTab: boolean = true;\r\n    // 是否显示待办人员tab页\r\n    showCandidateTab: boolean = true;\r\n    // 是否显示组织架构tab页\r\n    showOrganizationTab: boolean = true;\r\n    // 是否显示用户分组tab页\r\n    showSysUserGroupTab: boolean = true;\r\n    // 是否显示群组tab页\r\n    showGroupTab: boolean = true;\r\n    // 是否显示收藏人员tab页\r\n    showFavoritesTab: boolean = true;\r\n    // 工作流场景中在原生js页面打开选人组件时使用 2022.3.24\r\n    appRef: ApplicationRef;\r\n    // 外部传入orgId时，组织树只展示相应的组织及其直接上级，通过shownOrgId进行记录\r\n    shownOrgId: string;\r\n    // 外部传入orgId时，相应组织的path路径\r\n    private shownOrgPath: string;\r\n    // 显示不可被选择提示信息，应用于搜索组织时的搜索结果框内\r\n    showUnSelectableInfo: boolean = false;\r\n    // 组织不可被选择提示信息，应用于搜索组织时的搜索结果框内\r\n    unSelectableInfo: string = '相关数据已置灰，不允许被选中';\r\n    // 未找到组织时的提示信息，应用于搜索组织时的搜索结果框内\r\n    nodataInfo: string = '未找到相关数据';\r\n    // 鼠标点击事件，用于关闭搜索组织时的搜索结果框\r\n    private documentClick_Org: any;\r\n    // 鼠标点击事件，用于关闭搜索用户分组时的搜索结果框\r\n    private documentClick_SysUerGroup: any;\r\n    // 全局配置中分页条目的编号枚举\r\n    private pageSizeArr = ['one','two','three','four','five','six','seven'];\r\n    // 全局配置中最大分页条目在编号枚举中的索引\r\n    private maxPageSizeIndex: number;\r\n    // 是否已获取并设置全局配置属性\r\n    hasSetGlobalConfigParam: boolean = false;\r\n    // 重新封装的数据加载服务，需要传入组织、用户分组、群组这三个子组件\r\n    dataLoadingService: DataLoadingService = null;\r\n    // @farris/ui-loading 的加载服务\r\n    private loadingService: LoadingService = null;\r\n    // @farris/ui-locale 的多语服务\r\n    localeService: LocaleService = null;\r\n    // 组织架构人员需要二次过滤时，岗位过滤数据相关\r\n    filterPositionData: Array<any> = [];\r\n    // 组织架构人员需要二次过滤时，岗位过滤数据相关\r\n    isFilterPositionDataEmpty: boolean = false;\r\n    // 组织架构人员需要二次过滤时，岗位过滤数据相关\r\n    filterPositionPlaceHolder: string = \"\";\r\n    // 用户分组人员需要二次过滤时，组织过滤数据相关\r\n    filterOrgData: Array<any> = [];\r\n    // 用户分组人员需要二次过滤时，组织过滤数据相关\r\n    isFilterOrgDataEmpty: boolean = false;\r\n    // 用户分组人员需要二次过滤时，组织过滤数据相关\r\n    filterOrgPlaceHolder: string = \"\";\r\n    validElementsInfo: string = \"\";\r\n    groupExtendInfo: string = \"\";\r\n    filterPositionErrorInfo: string = \"\";\r\n    presetFilterOrgInfo: string = \"\";\r\n    filterOrgInfo: string = \"\";\r\n    filterOrgErrorInfo: string = \"\";\r\n    // 用于判断群组扩展脚本文件是否存在\r\n    private xmlhttp: any;\r\n    // 仅获取当前组织内人员（含子级开关是否置灰）\r\n    _onlyCurrentOrg: boolean = false;\r\n    // 是否倒序展示组织全路径\r\n    showOrgAllPathByDesc: boolean = false;\r\n    private orgTreeTimer = null;\r\n    private empTreeTimer = null;\r\n\r\n    personnelParamUrl = '/api/runtime/sys/v1.0/personnel-selector-param';\r\n    positionUserManageUrl = '/api/runtime/sys/v1.0/internalresult/AssignQuery';\r\n    private userMangeInfo: any[] = [];\r\n    private userManageResult = {\r\n        org: { idList: [], pathList: [] },\r\n        userGroup: { idList: [], pathList: [] }\r\n    };\r\n    userManagePathResult = { orgPathList: [], userGroupPathList: [] };\r\n\r\n    constructor(\r\n        private apiService: ApiLocalService,\r\n        private injector: Injector,\r\n        @Optional() private favoritesTool: FavoritesTool,\r\n        @Optional() private eventManager: EventManager,\r\n        @Optional() private groupTool: GroupTool,\r\n        @Optional() private cd: ChangeDetectorRef\r\n    ) {\r\n        this.indexId = Math.random().toString(16).substring(3);\r\n        this.msgService = this.injector.get(MessagerService);\r\n        this.notifyService = this.injector.get(NotifyService);\r\n        this.inputElementId = 'sslc' + this.indexId;\r\n        this.hostElement = this.injector.get(ElementRef);\r\n        this.http = this.injector.get(HttpClient);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n        this.render = this.injector.get(Renderer2);\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.appRef = this.injector.get(ApplicationRef);\r\n        \r\n        this.loadingService = this.injector.get(LoadingService, null);\r\n        if (this.loadingService) {\r\n            this.dataLoadingService = new DataLoadingService();\r\n            this.dataLoadingService.loadingService = this.loadingService;\r\n        }\r\n\r\n        this.localeService = this.injector.get(LocaleService, null);\r\n        if(!this.localeService.langData['personnelSelector']) {\r\n            this.localeService.setLocaleData(PERSONNEL_SELECTOR_LOCALE);\r\n        }\r\n    }\r\n\r\n    onModelChange: any = (val?: any) => { };\r\n    onModelTouched: any = (val?: any) => { };\r\n\r\n    writeValue(obj: any): void {\r\n        if (this.viewType === 'tag') {\r\n            if (!!obj && typeof obj === 'string') {\r\n                this.finalText = obj.split(this.multipleChoiceSeparator);\r\n            } else {\r\n                this.finalText = [];\r\n            }\r\n        } else if (this.viewType === 'text') {\r\n            this.finalText = obj;\r\n        }\r\n        if(this.enableQuick){\r\n            this.setQuickContainerWidth();\r\n        }\r\n    }\r\n\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.clearButid = this.indexId + 'clearBu';\r\n        this.selectAllPersonnelIndexId = this.indexId + 'selectAllPersonnel';\r\n        this.selectAllOrganizationIndexId = this.indexId + 'selectAllOrganization';\r\n        this.selectLatelyPersonnelIndexId = this.indexId + 'selectLatelyPersonnel';\r\n        this.quickContainerId = 'qc' + this.indexId;\r\n        this.tagContainerId = 't-c' + this.indexId;\r\n        this.publicGroup = 'group-checkbox' + this.indexId;\r\n        this.dialogId = 'dialogid' + this.indexId;\r\n        this.pIncludeCurrentUser = this.includeCurrentUser;\r\n        if(!this.showTabIds.includes(this.activeTabId)) {\r\n            this.activeTabId = this.showTabIds.split(',')[0];\r\n        }\r\n        // 基路径改造\r\n        const urlWithBasePath = BasePathService.convertPath('/api/runtime/sys/v1.0/absUserOrg'); // 可能在ngOnChanges中已拼接了基路径\r\n        if (urlWithBasePath && urlWithBasePath != this.absUserOrgUrl) {\r\n            this.absUserOrgUrl = BasePathService.convertPath(this.absUserOrgUrl);\r\n        }\r\n        const groupUrl = BasePathService.convertPath('/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend.js');\r\n        if (groupUrl && groupUrl != this.groupExtendUrl) {\r\n            this.groupExtendUrl = BasePathService.convertPath(this.groupExtendUrl);\r\n        }\r\n        this.personnelParamUrl = BasePathService.convertPath(this.personnelParamUrl);\r\n        this.positionUserManageUrl = BasePathService.convertPath(this.positionUserManageUrl);\r\n\r\n        this.initDisplayTab();\r\n        // 决定tab页的显示或隐藏\r\n        this.checkDisplayTab();\r\n\r\n        this.ngControl = this.injector.get(NgControl, null);\r\n        \r\n        //this.setInputGroupElementWith();\r\n        this.initLocaleItems();\r\n\r\n        this.initRegisterEvent();\r\n\r\n        const windowInnerHeight = window.innerHeight;\r\n\r\n        this.dialogHeight = windowInnerHeight - 60;\r\n        if (this.dialogHeight > 680) {\r\n            this.dialogHeight = 680;\r\n        }\r\n\r\n        this.groupTitleStream.pipe(\r\n            debounceTime(500),\r\n            distinctUntilChanged()\r\n        ).subscribe(data => {\r\n            if (!!data) {\r\n                this.validGroupTitle = true;\r\n            } else {\r\n                this.validGroupTitle = false;\r\n            }\r\n        })\r\n\r\n        this.treeTableCols = [\r\n            { field: 'name', title: 'Name', width: 200, template: this.orgTreeCell }\r\n        ];\r\n        this.columnsOrg = [\r\n            {\r\n                field: 'name', template: this.opCellOrg, title: '编辑', width: '150',\r\n            }\r\n        ];\r\n        // 鼠标点击事件关闭组织搜索结果列表 \r\n        this.documentClick_Org = (event: any) => {\r\n            if(this.isOnTop) {\r\n                if (!!top.document.querySelector('.s-orgtree-search-result')) {\r\n                    let parentNodeTitle_one = event.target['parentNode']['parentNode']['parentNode']['title'];\r\n                    let parentNodeTitle_two = event.target['parentNode']['parentNode']['parentNode']['parentNode']['title'];\r\n                    if(parentNodeTitle_one !== 'locationOrgList_title' && parentNodeTitle_two !== 'locationOrgList_title') {\r\n                        this.searchOrgElementVisible = false; \r\n                        this.showUnSelectableInfo = false;\r\n                    }\r\n                }\r\n            } else {\r\n                if (!!document.querySelector('.s-orgtree-search-result')) {\r\n                    let parentNodeTitle_one = event.target['parentNode']['parentNode']['parentNode']['title'];\r\n                    let parentNodeTitle_two = event.target['parentNode']['parentNode']['parentNode']['parentNode']['title'];\r\n                    if(parentNodeTitle_one !== 'locationOrgList_title' && parentNodeTitle_two !== 'locationOrgList_title') {\r\n                        this.searchOrgElementVisible = false; \r\n                        this.showUnSelectableInfo = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // 鼠标点击事件关闭用户分组搜索结果列表\r\n        this.documentClick_SysUerGroup = (event: any) => {\r\n            if(this.isOnTop) {\r\n                if (!!top.document.querySelector('.s-usergrouptree-search-result')) {\r\n                    let parentNodeTitle_one = event.target['parentNode']['parentNode']['parentNode']['title'];\r\n                    let parentNodeTitle_two = event.target['parentNode']['parentNode']['parentNode']['parentNode']['title'];\r\n                    if(parentNodeTitle_one !== 'locationSysUserGroupList_title' && parentNodeTitle_two !== 'locationSysUserGroupList_title') {\r\n                        this.searchSysUserGroupElementVisible = false;\r\n                    }\r\n                }\r\n            } else {\r\n                if (!!document.querySelector('.s-usergrouptree-search-result')) {\r\n                    let parentNodeTitle_one = event.target['parentNode']['parentNode']['parentNode']['title'];\r\n                    let parentNodeTitle_two = event.target['parentNode']['parentNode']['parentNode']['parentNode']['title'];\r\n                    if(parentNodeTitle_one !== 'locationSysUserGroupList_title' && parentNodeTitle_two !== 'locationSysUserGroupList_title') {\r\n                        this.searchSysUserGroupElementVisible = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 组件加载完成时\r\n    ngAfterViewInit(): void {\r\n        // 如果表单映射回组件，则不需要重新组装finalText\r\n        if (!this.mapFields) {\r\n            this.mapFields2Component();\r\n        }\r\n\r\n        const dialogElement = document.querySelector('#' + this.dialogId);\r\n        let targetElement = null;\r\n        if (!!dialogElement) {\r\n            targetElement = dialogElement.querySelector('.modal-dialog');\r\n        }\r\n\r\n        window.addEventListener('resize', () => {\r\n            if (!!targetElement) {\r\n                let height = window.innerHeight;\r\n                if(top.window['gspframeworkService']) {\r\n                    height = height - 60;\r\n                    if (height > 680) {\r\n                        height = 680;\r\n                    }\r\n                }\r\n                let width = parseInt(window.getComputedStyle(this.farrisDialog['_dialogEl']).getPropertyValue('width').replace('px', ''), 10);\r\n                this.dialogHeight = height;\r\n                this.farrisDialog.height = height;\r\n                this.farrisDialog.width = width;\r\n                // this.render.setStyle(targetElement, 'transform', 'translate3d(0px, 0px, 0px)');\r\n            }\r\n        });\r\n    }\r\n\r\n    /*this.absO\r\n    当数据修改时触发逻辑\r\n    */\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const userIdsChange = changes.userIds;\r\n        const orgIdChange = changes.orgId;\r\n        const urlWithBasePath = BasePathService.convertPath('/api/runtime/sys/v1.0/absUserOrg');\r\n        if (urlWithBasePath && urlWithBasePath != this.absUserOrgUrl) {\r\n            this.absUserOrgUrl = BasePathService.convertPath(this.absUserOrgUrl);\r\n        }\r\n        if (userIdsChange && userIdsChange.currentValue) {\r\n            this.assembleDataByUserId(userIdsChange.currentValue, false);\r\n        }\r\n        if (orgIdChange && orgIdChange.currentValue) {\r\n            this.shownOrgId = orgIdChange.currentValue;\r\n            if (this.enableHierarchicalLoading) {\r\n                this.hlAssembleTreeData();\r\n            } else {\r\n                this.assembleTreeData();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if(this.dtcSub) {\r\n            this.dtcSub.unsubscribe();\r\n        }\r\n        if(this.documentClick_Org) {\r\n            this.documentClick_Org = null;\r\n        }\r\n        if(this.documentClick_SysUerGroup) {\r\n            this.documentClick_SysUerGroup = null;\r\n        }\r\n    }\r\n\r\n    private setQuickContainerWidth() {\r\n        this.quickContainerWidth = 0;\r\n        this.cdRef.detectChanges();\r\n        setTimeout(() => {\r\n            const tagContainerElement: any = document.querySelector('#' + this.tagContainerId);\r\n            const tagContainerWidth = tagContainerElement && tagContainerElement.offsetWidth;\r\n            const quickContainerElement: any = document.querySelector('#' + this.quickContainerId);\r\n            if(!!quickContainerElement) {\r\n                this.quickContainerWidth = tagContainerWidth - quickContainerElement.offsetLeft - 10;\r\n            } \r\n        });\r\n    }\r\n\r\n    checkGroupInfo(): boolean {\r\n        if(!this.showTabIds.includes(this.groupTabId)) {\r\n            return false;\r\n        } else {\r\n            return this.checkGroupExtend();\r\n        }\r\n    }\r\n\r\n    toggleGroupDialog(e: boolean) {\r\n        if(this.selections.length < 1) {\r\n            this.notifyService.info(this.localeService.getValue(\"personnelSelector.group.noPersonnelMessage\"));\r\n            return;\r\n        }\r\n        this.showGroupDialog = e;\r\n        this.groupDialogTitle = this.localeService.getValue(\"personnelSelector.group.saveGroup\");\r\n        if (!e) {\r\n            this.groupTitle = null;\r\n            this.groupNote = null;\r\n            this.editingGroupId = null;\r\n        }\r\n    }\r\n\r\n    // 监听人员tab页内的待选人员变化\r\n    listentCandidateItemsChange(e) {\r\n        this.candidateItems = e;\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    listenGroupTitle(e) {\r\n        this.groupTitleStream.next(this.groupTitle);\r\n    }\r\n\r\n    saveGroup() {\r\n        if (!this.groupTitle) {\r\n            this.validGroupTitle = false;\r\n            return;\r\n        }\r\n        const helpExtend = window && (window as any).helpExtend;\r\n        const userIds = [];\r\n        this.selections.forEach(selection => {\r\n            userIds.push(selection[this.idField]);\r\n        });\r\n        const body: any = {\r\n            title: this.groupTitle,\r\n            description: this.groupNote,\r\n            userIds,\r\n            type: 1\r\n        };\r\n        if (this.editingGroupId) {\r\n            body.id = this.editingGroupId;\r\n            body.type = 3;\r\n            delete body.userIds;\r\n        }\r\n        if (helpExtend) {\r\n            helpExtend.curdGroupData(body).then(data => {\r\n                this.showGroupDialog = false;\r\n                this.groupTitle = null;\r\n                this.groupNote = null;\r\n                this.editingGroupId = null;\r\n                this.groupComponent.assembleData();\r\n            });\r\n        } else {\r\n            throw new Error(this.localeService.getValue(\"personnelSelector.message.groupExtend\"));\r\n        }\r\n    }\r\n\r\n    // 根据页签数量变更搜索框宽度\r\n    private setInputGroupElementWith() {\r\n        const length = this.allTabIds.split(',').length;\r\n        // if (length <= 3) {\r\n        //     this.inputGroupElementWith = '250px';\r\n        // } else if (length === 4) {\r\n        //     this.inputGroupElementWith = '220px';\r\n        // } else if (length === 5) {\r\n        //     this.inputGroupElementWith = '180px';\r\n        //     // this.searchPlaceholder = '姓名汉字/首字母/编号'\r\n        // } else if(length === 6) {\r\n        //     this.inputGroupElementWith = '120px';\r\n        // }\r\n        this.inputGroupElementWith = length <= 5 ? '250px' : '210px';\r\n    }\r\n\r\n    // 隐藏组织搜索结果列表页\r\n    hideSearchOrgElement(e) {\r\n        this.searchOrgElementVisible = false;\r\n    }\r\n\r\n    // 隐藏用户分组搜索结果列表页\r\n    hideSearchSysUserGroupElement(e) {\r\n        this.searchSysUserGroupElementVisible = false;\r\n    }\r\n    \r\n    // 搜索定位组织\r\n    searchLocationOrg(e: any) {\r\n        if (!this.locationOrgText) {\r\n            this.locationOrgList = [];\r\n            this.searchOrgElementVisible = false;\r\n            this.showUnSelectableInfo = false;\r\n            return;\r\n        }\r\n        if (e.code !== 'Enter' && e.type === 'keyup') {\r\n            return;\r\n        }\r\n        // 分层加载\r\n        if (this.enableHierarchicalLoading) {\r\n            this.hlAssembleLocationOrgList();\r\n        } else {\r\n            this.locationOrgList = this.assembleLocationOrgList();\r\n            this.searchOrgElementVisible = true;\r\n            if(this.documentClick_Org) {\r\n                if(this.isOnTop) {\r\n                    top.document.addEventListener('mousedown', this.documentClick_Org, true);\r\n                } else {\r\n                    document.addEventListener('mousedown', this.documentClick_Org, true);\r\n                }\r\n            }\r\n            if (this.locationOrgList.length === 1) {\r\n                this.searchOrgElementVisible = false;\r\n                this.showUnSelectableInfo = false;\r\n                this.locationOrg(this.locationOrgList[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 搜索定位用户分组\r\n    searchLocationSysUserGroup(e: any) {\r\n        if(e.type === 'keyup' && e.code !== 'Enter'){\r\n            return;\r\n        }\r\n        if (!this.locationSysUserGroupText) {\r\n            this.locationSysUserGroupList = [];\r\n            this.searchSysUserGroupElementVisible = false;\r\n            return;\r\n        }\r\n        if(this.enableHierarchicalLoading) {\r\n            this.hlAssembleLocationSysUserGroupList();\r\n        }else{\r\n            this.locationSysUserGroupList = this.assembleLocationSysUserGroupList();\r\n            this.searchSysUserGroupElementVisible = true;\r\n            if(this.documentClick_SysUerGroup) {\r\n                if(this.isOnTop) {\r\n                    top.document.addEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n\r\n                } else {\r\n                    document.addEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n                }\r\n            }\r\n            if(this.locationSysUserGroupList.length == 1) {\r\n                this.searchSysUserGroupElementVisible = false;\r\n                this.locationSysUserGroup(this.locationSysUserGroupList[0]);\r\n            }\r\n        }      \r\n    }\r\n\r\n    // 定位到某个组织\r\n    locationOrg(orgNode: any) {\r\n        this.locationOrgList = [];\r\n        this.searchOrgElementVisible = false;\r\n        this.showUnSelectableInfo = false;\r\n        if(this.isOnTop) {\r\n            top.document.removeEventListener('mousedown', this.documentClick_Org, true);\r\n        } else {\r\n            document.removeEventListener('mousedown', this.documentClick_Org, true);\r\n        }\r\n        if (this.enableHierarchicalLoading) {\r\n            // 分层加载\r\n            const param: OrgRequestParam = {\r\n                absOrgType: this.absOrgType,\r\n                notGetStopOrg: !this.includeStopOrg,\r\n                id: orgNode[this.orgIdField],\r\n                getAllParentOrg: true\r\n            };\r\n            this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n                if (!res || !res.data) {\r\n                    return;\r\n                }\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                let filterOrg: any[] = [];\r\n                if(!this.shownOrgId || this.shownOrgId === '*') {\r\n                    filterOrg = res.data;\r\n                } else {\r\n                    if(!this.shownOrgPath) {\r\n                        const targetData = this.originalTreeData.data.find(item => item.orgId == this.shownOrgId);\r\n                        if(targetData) {\r\n                            this.shownOrgPath = targetData.path;\r\n                        }\r\n                    }\r\n                    let pathList: any[] = [];\r\n                    for(let a = 0; a < this.shownOrgPath.length / 4; a++) {\r\n                        pathList.push(this.shownOrgPath.substring(0, 4 * (a + 1)));\r\n                    }\r\n                    const highLayer = res.data.filter(item => pathList.includes(item.path));\r\n                    filterOrg = filterOrg.concat(highLayer || []);\r\n                    let maxLength = orgNode.path.length / 4;\r\n                    let minLength = this.shownOrgPath.length / 4;\r\n                    if(maxLength > minLength) {\r\n                        res.data.forEach((item: any) => {\r\n                            for(let i = 0; i < (maxLength - minLength); i++) {\r\n                                if(Number(item.layer) === (Number(orgNode.layer) - i)) {\r\n                                    if(item.path.slice(0, -4) === orgNode.path.slice(0, -4 * (i + 1))) {\r\n                                        filterOrg.push(item);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const targetArray = filterOrg.filter(org => \r\n                    !(this.originalTreeData.data as Array<any>).find(data => data[this.orgIdField] == org[this.orgIdField]));\r\n                this.originalTreeData.data = this.originalTreeData.data.concat(targetArray || []);\r\n                this.treeListData = this.hlDataToTree(this.originalTreeData.data, orgNode.path);\r\n                this.cdRef.detectChanges();\r\n                this.farrisTree.clearAll();\r\n                this.farrisTree.rowHeight = 28;\r\n                this.currentSelectOrgId = orgNode[this.orgIdField];\r\n                this.selectOrgTreeNode();\r\n\r\n                this.pageIndex = 1;\r\n                this.datagridLoad();\r\n            });\r\n        } else {\r\n            const pathArr = this.getCurrentPath(orgNode);\r\n            this.expandTreeNode(this.treeListData, pathArr, Number(orgNode.layer));\r\n            this.farrisTree.selectNode(orgNode[this.orgIdField]);\r\n            this.currentSelectOrgId = orgNode[this.orgIdField];\r\n            this.pageIndex = 1;\r\n            this.datagridLoad();\r\n        }\r\n    }\r\n\r\n    // 定位到某个用户分组\r\n    locationSysUserGroup(node: any) {\r\n        this.locationSysUserGroupList = [];\r\n        this.searchSysUserGroupElementVisible = false;\r\n        if(this.isOnTop) {\r\n            top.document.removeEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n        } else {\r\n            document.removeEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n        }\r\n        if(this.enableHierarchicalLoading) {\r\n            // 分层加载\r\n            const param = {\r\n                id: node['id'],\r\n                getAllParentOrg: true,\r\n            };\r\n            this.apiService.getSysUserGroup(param).subscribe((resData: any[]) => {\r\n                if (!resData || resData.length == 0) {\r\n                    return;\r\n                }\r\n                if(this.withPermission && this.userManagePathResult.userGroupPathList.length) {\r\n                    resData = resData.filter(data => this.userManagePathResult.userGroupPathList.includes(data['path']));\r\n                }\r\n                resData.forEach(item => {\r\n                    item.selectable = true;\r\n                    if (!this._isInArray(item['id'], 'id', this.originalSysUserGroupTreeData)) {\r\n                        this.originalSysUserGroupTreeData.push(item);\r\n                    }\r\n                });\r\n                this.sysUserGroupTreeListData = this.hlSysUserGroupDataToTree(this.originalSysUserGroupTreeData, 1, node.path);\r\n                const pathArr = this.getCurrentPath(node);\r\n                this.cdRef.detectChanges();\r\n                //this.expandSysUserGroupTreeNode(this.sysUserGroupTreeListData, pathArr, Number(node.layer));\r\n                //this.sysUserGroupTree.selectNode(node['id']);\r\n                this.sysUserGroupTree.clearAll();\r\n                this.sysUserGroupTree.rowHeight = 28;\r\n                this.userGroupId = node['id'];\r\n                this.selectUserGroupTreeNode();\r\n                this.pageIndex = 1;\r\n                this.datagridLoad();\r\n            });\r\n        } else {\r\n            const pathArr = this.getCurrentPath(node);\r\n            this.expandSysUserGroupTreeNode(this.sysUserGroupTreeListData, pathArr, Number(node.layer));\r\n            this.sysUserGroupTree.selectNode(node['id']);\r\n            this.userGroupId = node['id'];\r\n            this.pageIndex = 1;\r\n            this.datagridLoad();\r\n        }\r\n    }\r\n\r\n    // 通过搜索定位组织时，展开组织树节点\r\n    private expandTreeNode(treeData: any, path: any[], layer: number) {\r\n        treeData.forEach(node => {\r\n            if (path.includes(node.data.path)) {\r\n                this.farrisTree.expandNode(node.data.id);\r\n            }\r\n            if (node.data.layer < layer && node.children.length) {\r\n                this.expandTreeNode(node.children, path, layer);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 通过搜索定位用户分组时，展开用户分组树节点\r\n    private expandSysUserGroupTreeNode(treeData: any, path: any[], layer: number) {\r\n        treeData.forEach(node => {\r\n            if (path.includes(node.data.path)) {\r\n                this.sysUserGroupTree.expandNode(node.data.id);\r\n            }\r\n            if (node.data.layer < layer && node.children.length) {\r\n                this.expandSysUserGroupTreeNode(node.children, path, layer);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 获取当前组织的path路径\r\n    private getCurrentPath(orgNode: any) {\r\n        const pathList = [];\r\n        const length = orgNode.path.length / 4;\r\n        for (let a = 0; a < length; a++) {\r\n            pathList.push(orgNode.path.substring(0, 4 * (a + 1)));\r\n        }\r\n        return pathList;\r\n    }\r\n\r\n    // 全加载情况下，返回搜索后的组织列表\r\n    private assembleLocationOrgList() {\r\n        const orgList = [];\r\n        if (!this.locationOrgText) {\r\n            return orgList;\r\n        }\r\n        let originalArr = (!!this.shownOrgId && this.shownOrgId !== '*') ? this.customTreeData : this.originalTreeData.data;\r\n        const filterOrgs = this.confirmSearchOrg();\r\n        filterOrgs.forEach(org => {\r\n            const parentNodes = [];\r\n            this.getUnitParentsById(originalArr, org, parentNodes);\r\n            org.orgAllPath = this.assembleOrgFullPath(parentNodes);\r\n            org.orgAllPath = org.orgAllPath ? org.orgAllPath : org.name;\r\n        });\r\n        if(this.withPermission) {\r\n            return filterOrgs.filter(org => this.userManagePathResult.orgPathList.includes(org['path']));\r\n        }\r\n        return filterOrgs;\r\n    }\r\n\r\n    // 分层加载情况下，返回搜索后的组织列表\r\n    private hlAssembleLocationOrgList() {\r\n        if (!this.locationOrgText) {\r\n            return;\r\n        }\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        param.name = this.locationOrgText;\r\n        param.getOrgAllPath = true;\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            this.searchOrgElementVisible = true;\r\n            if(this.documentClick_Org) {\r\n                if(this.isOnTop) {\r\n                    top.document.addEventListener('mousedown', this.documentClick_Org, true);\r\n                } else {\r\n                    document.addEventListener('mousedown', this.documentClick_Org, true);\r\n                }\r\n            }\r\n            if (res && res.data) {\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                this.locationOrgList = !!this.shownOrgId && this.shownOrgId != '*' ? this.hlConfirmSearchOrg(res.data) : res.data;\r\n                if (this.locationOrgList.length === 1) {\r\n                    this.searchOrgElementVisible = false;\r\n                    this.showUnSelectableInfo = false;\r\n                    this.locationOrg(this.locationOrgList[0]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // 全加载情况下，返回搜索后的用户分组列表\r\n    private assembleLocationSysUserGroupList() {\r\n        if (!this.locationSysUserGroupText) {\r\n            return [];\r\n        }\r\n        const filterUserGroups = this.originalSysUserGroupTreeData.filter(item => item.name.indexOf(this.locationSysUserGroupText) !== -1);\r\n        if(this.withPermission && this.userManagePathResult.userGroupPathList.length) {\r\n            return filterUserGroups.filter(usergroup => this.userManagePathResult.userGroupPathList.includes(usergroup['path']));\r\n        }\r\n        return filterUserGroups;\r\n    }\r\n\r\n    // 分层加载情况下，返回搜索后的用户分组列表\r\n    private hlAssembleLocationSysUserGroupList() {\r\n        const param = {\r\n            name: this.locationSysUserGroupText,\r\n            isSearchTree: false,\r\n        };\r\n        this.apiService.getSysUserGroup(param).subscribe((resData: any) => {\r\n            if (resData) {\r\n                if(this.withPermission && this.userManagePathResult.userGroupPathList.length) {\r\n                    resData = resData.filter(data => this.userManagePathResult.userGroupPathList.includes(data['path']));\r\n                }\r\n                this.locationSysUserGroupList = resData;\r\n                this.searchSysUserGroupElementVisible = true;\r\n                if(this.documentClick_SysUerGroup) {\r\n                    if(this.isOnTop) {\r\n                        top.document.addEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n                    } else {\r\n                        document.addEventListener('mousedown', this.documentClick_SysUerGroup, true);\r\n                    } \r\n                }\r\n                if(this.locationSysUserGroupList.length == 1) {\r\n                    this.searchSysUserGroupElementVisible = false;\r\n                    this.locationSysUserGroup(this.locationSysUserGroupList[0]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private sortArray(arr: any[]) {\r\n        if (arr.length === 0) {\r\n            return arr;\r\n        }\r\n        arr = arr.sort((a: any, b: any) => {\r\n            return Number(a.layer) - Number(b.layer);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    private assembleOrgFullPath(arr: any[]) {\r\n        const sortedArr = this.sortArray(arr);\r\n        let path = sortedArr.reduce((pre, cur, index) => {\r\n            return pre + '_' + cur.name;\r\n        }, '');\r\n        path = path.substring(1);\r\n        return path;\r\n    }\r\n\r\n    // 初始化显示那些tab页签\r\n    private initDisplayTab() {\r\n        if (this.enableRecentContacts && this.allTabIds.indexOf(this.recentTabId) === -1) {\r\n            const recent = !!this.allTabIds ? ',recent' : 'recent';\r\n            this.allTabIds += recent;\r\n        }\r\n\r\n        if (this.unSelectedUserIds && this.allTabIds.indexOf(this.candidateTabId) === -1) {\r\n            const candidate = !!this.allTabIds ? ',candidate' : 'candidate';\r\n            this.allTabIds += candidate;\r\n        }\r\n\r\n        if (this.unSelectedUserIds) {\r\n            const allTabIds = this.allTabIds.split(',');\r\n            allTabIds.forEach((item, index) => {\r\n                if (item === this.organizationTabId || item === this.sysUserGroupTabId) {\r\n                    allTabIds.splice(index, 1);\r\n                }\r\n            });\r\n            this.allTabIds = allTabIds.join(',');\r\n        }\r\n\r\n        if (this.enableMyGroup && this.allTabIds.indexOf(this.groupTabId) === -1) {\r\n            const group = !!this.allTabIds ? ',group' : 'group';\r\n            this.allTabIds += group;\r\n        }\r\n\r\n        if (this.showTabIds) {\r\n            this.allTabIds = this.showTabIds;\r\n        }\r\n\r\n        if (this.allTabIds.indexOf(this.favoritesTabId) === -1) {\r\n            this.enableFavorites = false;\r\n        }\r\n\r\n        // 兼容老表单\r\n        if (!this.favoritesTool) {\r\n            const oldArr = this.allTabIds.split(',').filter(item => item !== this.recentTabId && item !== this.favoritesTabId);\r\n            this.allTabIds = oldArr.join(',');\r\n        } else {\r\n            this.favoritesTool.absOrgType = this.absOrgType;\r\n            this.favoritesTool.busNum = this.busNum;\r\n            this.favoritesTool.enableFavorites = this.enableFavorites;\r\n            this.favoritesTool.idField = this.idField;\r\n            this.favoritesTool.disableCurrentUser = this._disableCurrentUser;\r\n            // 基路径改造\r\n            this.favoritesTool.absRfModifyUrl = BasePathService.convertPath(this.favoritesTool.absRfModifyUrl);\r\n            this.favoritesTool.absRfQueryUrl = BasePathService.convertPath(this.favoritesTool.absRfQueryUrl);\r\n            // 密级控制\r\n            this.favoritesTool.enableSecurityControl = this.enableSecurityControl;\r\n            this.favoritesTool.securityLevel = this.securityLevel;\r\n        }\r\n\r\n        if (this.allTabIds.indexOf(this.recentTabId) === -1) {\r\n            this.enableRecentContacts = false;\r\n        } else {\r\n            this.enableRecentContacts = true;\r\n        }\r\n    }\r\n\r\n    // 由ngOnInit()调用\r\n    private initRegisterEvent(): void {\r\n        this.dtcSub = fromEvent(document, 'click').subscribe((e: any) => {\r\n            let includeOrgSearchPanelToken = false;\r\n            let inculdeQuickPanelToken = false;\r\n            /*\r\n            if (e.target['className'].indexOf('s-orgtree-search-result') !== -1) {\r\n                includeOrgSearchPanelToken = true;\r\n            }\r\n            */\r\n            e.composedPath().forEach((element: any) => {\r\n                if (element && element.classList && element.classList.contains(this.quickContainerId)) {\r\n                    inculdeQuickPanelToken = true;\r\n                }\r\n            });\r\n            if (includeOrgSearchPanelToken || inculdeQuickPanelToken) {\r\n                return;\r\n            }\r\n            //this.searchOrgElementVisible = false; \r\n            //this.showUnSelectableInfo = false;\r\n            //this.searchSysUserGroupElementVisible = false;\r\n            this.quickPanelVisible = false;\r\n        });\r\n    }\r\n\r\n    // 初始化componentMap，打开人员选择弹窗被调用\r\n    private initComponentMap() {\r\n        if (this.allTabIds.indexOf(this.organizationTabId) !== -1) {\r\n            this.componentMap.set(this.organizationTabId, this.unSelectDatagrid);\r\n        }\r\n        if (this.allTabIds.indexOf(this.sysUserGroupTabId) !== -1) {\r\n            this.componentMap.set(this.sysUserGroupTabId, this.sysUserGroupUnselect);\r\n        }\r\n        if (this.allTabIds.indexOf(this.candidateTabId) !== -1) {\r\n            this.componentMap.set(this.candidateTabId, this.candidateDatagrid);\r\n        }\r\n        if (this.allTabIds.indexOf(this.recentTabId) !== -1) {\r\n            this.componentMap.set(this.recentTabId, this.recentContactsComponent);\r\n        }\r\n        if (this.allTabIds.indexOf(this.favoritesTabId) !== -1) {\r\n            this.componentMap.set(this.favoritesTabId, this.favoritesComponent);\r\n        }\r\n        if (this.allTabIds.indexOf(this.groupTabId) !== -1) {\r\n            this.componentMap.set(this.groupTabId, this.groupComponent);\r\n            this.groupComponent.cdRef = this.cdRef;\r\n        }\r\n    }\r\n\r\n    // 分层加载时，展开组织树节点时触发\r\n    getOrganizationByParentNode(parentNode: any) {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            parentID: parentNode.id,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            if (res && res.data) {\r\n                const newDatas = [];\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                res.data.forEach(item => {\r\n                    const targetData = this.originalTreeData.data.find(it => it[this.orgIdField] == item[this.orgIdField]);\r\n                    if(!targetData) {\r\n                        item.selectable = this._onlyCurrentOrg ? false : true;\r\n                        this.originalTreeData.data.push(item);\r\n                        newDatas.push(item);\r\n                    }\r\n                });\r\n                const nodes = this.dealDataWhenExpandTreeNode(newDatas);\r\n                this.farrisTree.appendChildren(nodes, parentNode);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 分层加载时，展开用户分组树节点时触发\r\n    getSysUserGroupByParentNode(parentNode: any) {\r\n        const requestParam = {\r\n            parentId: parentNode.id,\r\n        };\r\n        this.apiService.getSysUserGroup(requestParam).subscribe((resData: any[]) => {\r\n            if(resData && resData.length){\r\n                const newDatas = [];\r\n                if(this.withPermission && this.userManagePathResult.userGroupPathList.length) {\r\n                    resData = resData.filter(data => this.userManagePathResult.userGroupPathList.includes(data['path']));\r\n                }\r\n                resData.forEach(item => {\r\n                    if (!this._isInArray(item['id'], 'id', this.originalSysUserGroupTreeData)) {\r\n                        item.selectable = true;\r\n                        this.originalSysUserGroupTreeData.push(item);\r\n                        newDatas.push(item);\r\n                    }\r\n                });\r\n                const nodes = this.dealSysUserGroupDataWhenExpandTreeNode(newDatas, '');\r\n                this.sysUserGroupTree.appendChildren(nodes, parentNode); \r\n            }\r\n        });\r\n    }\r\n\r\n    // 确定默认选中的组织\r\n    private assembleInitOrgId() {\r\n        if(!this.withPermission) {\r\n            // 未开启权限控制，普通用户默认选中所属组织，admin用户或者没有组织的用户默认选中组织树第一个节点\r\n            return this.orgIdOrg && this.orgIdOrg !== 'nullorg' ? this.orgIdOrg : this.treeListData[0]['data']['id'];\r\n        } else {\r\n            // 开启权限控制后，普通用户需要增加判断所属组织是否在可管理范围内\r\n            if (this.orgIdOrg && this.orgIdOrg !== 'nullorg') {\r\n                return this.userManageResult.org.idList.includes(this.orgIdOrg) ? this.orgIdOrg : this.treeListData[0]['data']['id'];\r\n            } else {\r\n                return this.treeListData[0]['data']['id'];\r\n            }\r\n        }\r\n    }\r\n\r\n    // 分层加载组织左侧树，打开页面的时候，再去发送请求\r\n    hlAssembleTreeData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        let currentOrgPath = '';\r\n        if (!!this.orgId && this.orgId !== '*') {\r\n            param.id = this.orgId;\r\n            param.getOrgAllPathInfo = true;\r\n        } else {\r\n            param.layer = 1;\r\n        }\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            if (!res || !res.data) {\r\n                return;\r\n            }\r\n            if (!this.orgId || this.orgId === '*') {\r\n                res.data.forEach(item => {\r\n                    item.selectable = true;\r\n                });\r\n            } else {\r\n                res.data.forEach(item => {\r\n                    if (item[this.orgIdField] === this.orgId) {\r\n                        item.selectable = true;\r\n                        currentOrgPath = item.path;\r\n                    } else {\r\n                        item.selectable = false;\r\n                    }\r\n                });\r\n            }\r\n            this.originalTreeData = res;\r\n            if (res && res.curAbsUser && res.curAbsUser.orgAllPathInfo && (!this.orgId || this.orgId === '*')) {\r\n                const curUserOrgPath = res.curAbsUser.orgAllPathInfo;\r\n                // curUserOrgPath.forEach(item => {\r\n                //     if (!this._isInArray(item[this.orgIdField], this.orgIdField, res.data)) {\r\n                //         res.data.push(item);\r\n                //     }\r\n                // });\r\n                const _items = curUserOrgPath.filter(n => {\r\n                    return !res.data.find(t => t[this.orgIdField] === n[this.orgIdField])\r\n                });\r\n                res.data = res.data.concat(_items || []);\r\n            }\r\n            if(currentOrgPath) {\r\n                this.treeListData = this.dataToTree(res.data, currentOrgPath);\r\n            } else if (!res.curAbsUser.defaultOrgId || res.curAbsUser.defaultOrgId == 'nullorg') {\r\n                // 需要区分是否为admin用户（没有组织的用户）登录\r\n                this.treeListData = this.dataToTree(res.data, '*');\r\n            } else {\r\n                this.treeListData = this.dataToTree(res.data, res.curAbsUser.defaultOrgPath);\r\n            }\r\n            this.orgIdOrg = res.curAbsUser.defaultOrgId;\r\n            this.pathOrg = res.curAbsUser.defaultOrgPath;\r\n            this.currentSelectOrgId = this.orgId && this.orgId != '*' ? this.orgId : this.assembleInitOrgId();\r\n            if (!this.orgPath) {\r\n                if (this.orgIdOrg && this.orgIdOrg !== 'nullorg') {\r\n                    this.orgPath = this.pathOrg;\r\n                } else {\r\n                    this.orgPath = this.treeListData[0]['data']['path'];\r\n                }\r\n            }\r\n            this.initFavorites();\r\n            this.cdRef.detectChanges();\r\n        });\r\n    }\r\n\r\n    // 全加载组织左侧树，打开页面的时候，再去发送请求\r\n    assembleTreeData() {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            this.originalTreeData = res;\r\n            if (this.orgId && this.orgId !== '*') {\r\n                this.assembleCustomTreeData(this.originalTreeData.data, this.orgId);\r\n                this.originalTreeData.data = this.customTreeData;\r\n            } else if (!res.curAbsUser.defaultOrgId || res.curAbsUser.defaultOrgId == 'nullorg') {\r\n                this.treeListData = this.dataToTree(res.data, '*');\r\n            } else {\r\n                this.treeListData = this.dataToTree(res.data, res.curAbsUser.defaultOrgPath);\r\n            }\r\n            this.orgIdOrg = res.curAbsUser.defaultOrgId;\r\n            this.pathOrg = res.curAbsUser.defaultOrgPath;\r\n            if (this.orgIdOrg && this.orgIdOrg !== 'nullorg') {\r\n                this.currentSelectOrgId = !this.orgId || this.orgId == '*' ? this.orgIdOrg : this.orgId;\r\n                this.path = this.orgPath ? this.orgPath : this.pathOrg;\r\n            } else {\r\n                // admin账户或者没有组织的用户登录\r\n                this.currentSelectOrgId = !this.orgId || this.orgId == '*' ? this.treeListData[0]['data']['id'] : this.orgId;\r\n                this.path = this.orgPath ? this.orgPath : this.treeListData[0]['data']['path'];\r\n            }\r\n            this.initFavorites();\r\n            this.cdRef.detectChanges();\r\n        });\r\n    }\r\n\r\n    // 分层加载用户分组左侧树，打开页面的时候，再去发送请求\r\n    hlAssembleSysUserGroupTreeData() {\r\n        let currentPath = '';\r\n        let currentNode = {};\r\n        const requestParam = {};\r\n        if (!!this.userGroupId && this.userGroupId !== '*') {\r\n            requestParam['id'] = this.userGroupId;\r\n        } else {\r\n            requestParam['layer'] = 1;\r\n        }\r\n        this.apiService.getSysUserGroup(requestParam).subscribe((resData: any[]) => {\r\n            if(!resData || resData.length == 0){\r\n                return;\r\n            }\r\n            if (!this.userGroupId || this.userGroupId === '*') {\r\n                resData.forEach(item => {\r\n                    item.selectable = true;\r\n                });\r\n                this.originalSysUserGroupTreeData = resData;\r\n            }else{\r\n                this.filterSysUserGroupTreeData = [];\r\n                resData.forEach(item => {\r\n                    if (item.id === this.userGroupId) {\r\n                        item.selectable = true;\r\n                        currentPath = item.path;\r\n                        currentNode = item;\r\n                        this.filterSysUserGroupTreeData.push(currentNode);\r\n                    }\r\n                });\r\n                this.getFilterSysUserGroupData(resData, currentNode, this.filterSysUserGroupTreeData);\r\n                this.originalSysUserGroupTreeData = this.filterSysUserGroupTreeData;\r\n            }\r\n            this.sysUserGroupTreeListData = this.sysUserGroupDataToTree(this.originalSysUserGroupTreeData, 1, currentPath ? currentPath : '');\r\n            this.initFavorites();\r\n            this.cdRef.detectChanges();\r\n        })\r\n    }\r\n\r\n    // 全加载用户分组左侧树，打开页面的时候，再去发送请求 \r\n    assembleSysUserGroupTreeData() {\r\n        const requestParam = {\r\n            withAllSub: true,\r\n        };\r\n        this.apiService.getSysUserGroup(requestParam).subscribe((resData: any) => {\r\n            this.originalSysUserGroupTreeData = resData;\r\n            if(!!this.userGroupId && this.userGroupId !== '*'){\r\n                this.assembleCustomSysUserGroupTreeData(this.originalSysUserGroupTreeData, this.userGroupId);\r\n            }else {\r\n                this.sysUserGroupTreeListData = this.sysUserGroupDataToTree(resData, 1, '');\r\n            }\r\n            this.initFavorites();\r\n            this.cdRef.detectChanges();\r\n        })\r\n    }\r\n\r\n    // 打开弹窗时调用，初始化是否过滤领导\r\n    initGroupLeaderStatus() {\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.filterId,\r\n            objectValue: 'FilterUser'\r\n        }\r\n        this.apiService.getGroupLeaderStatus(param).subscribe((data: any) => {\r\n            if (data && data.length) {\r\n                this.showGroupLeader = data[0].textvalue === '0' ? false : true;\r\n                if (data[0].textvalue === '1') {\r\n                    this.includeGroupLeader = true;\r\n                    this.pIncludeGroupLeader = true;\r\n                } else if (data[0].textvalue === '2') {\r\n                    this.includeGroupLeader = false;\r\n                    this.pIncludeGroupLeader = false;\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 根据组织id构建自定义组织树, 后端提供了接口后就废弃\r\n     * 加载组织树的数据时，若orgId为特定组织的id值，则只加载该组织及其直接上级\r\n     * @param array 原始数据\r\n     * @param orgId 组织id\r\n     */\r\n    private assembleCustomTreeData(array: any[], orgId: string) {\r\n        this.customTreeData = [];\r\n        const currentNode = this.getCurOrgInfoById(array, orgId);\r\n        this.getParentsById(array, currentNode, this.customTreeData);\r\n        this.getChildrenById(array, currentNode, this.customTreeData);\r\n        this.treeListData = this.dataToTree(this.customTreeData, currentNode.path);\r\n    }\r\n\r\n     /**\r\n     * 根据用户分组id构建自定义用户分组树, 后端提供了接口后就废弃\r\n     * 加载用户分组树的数据时，若userGroupId为特定用户分组的id值，则只加载该用户分组及其直接上级\r\n     * @param array 原始数据\r\n     * @param groupId 用户分组id\r\n     */\r\n    private assembleCustomSysUserGroupTreeData(array: any[], groupId: string) {\r\n        this.customSysUserGroupTreeData = [];\r\n        const currentNode = this.getCurUserGroupInfoById(array, groupId);\r\n        this.getSysUserGroupParentsById(array, currentNode, this.customSysUserGroupTreeData);\r\n        this.getSysUserGroupChildrenById(array, currentNode, this.customSysUserGroupTreeData);\r\n        this.sysUserGroupTreeListData = this.sysUserGroupDataToTree(this.customSysUserGroupTreeData, 1, currentNode.path);\r\n    }\r\n\r\n    /**\r\n     * 根据组织id获取当前组织节点信息\r\n     * 被调用之处：assembleCustomTreeData()\r\n     * @param array 原始数据\r\n     * @param id 组织id\r\n     * @returns obj\r\n     */\r\n    private getCurOrgInfoById(array: any[], id: string) {\r\n        let orgNode: any;\r\n        for (const item of array) {\r\n            if (item.orgId === id) {\r\n                orgNode = item;\r\n                break;\r\n            }\r\n        }\r\n        if (!orgNode) {\r\n            this.msgService.warning(this.localeService.getValue(\"personnelSelector.message.inappropriateData\"));\r\n            return orgNode;\r\n        }\r\n        orgNode.selectable = true;\r\n        this.customTreeData.push(orgNode);\r\n        return orgNode;\r\n    }\r\n\r\n    /**\r\n     * 根据用户分组id获取当前用户分组节点信息\r\n     * 被调用之处：assembleCustomSysUserGroupTreeData()\r\n     * @param array 原始数据\r\n     * @param id 用户分组id\r\n     * @returns obj\r\n     */\r\n    private getCurUserGroupInfoById(array: any[], id: string) {\r\n        let userGroupNode: any;\r\n        for (const item of array) {\r\n            if (item.id === id) {\r\n                userGroupNode = item;\r\n                break;\r\n            }\r\n        }\r\n        if (!userGroupNode) {\r\n            this.msgService.warning(this.localeService.getValue(\"personnelSelector.message.inappropriateData\"));\r\n            return userGroupNode;\r\n        }\r\n        userGroupNode.selectable = true;\r\n        this.customSysUserGroupTreeData.push(userGroupNode);\r\n        return userGroupNode;\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取到集团下单位的父级元素\r\n     * 被调用之处：assembleLocationOrgList() 返回搜索后的组织列表\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n    private getUnitParentsById(array: any[], curNode: any, resArray: any[]) {\r\n        const parents = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) - 1);\r\n        });\r\n        if (!parents) {\r\n            return;\r\n        }\r\n        for (const item of parents) {\r\n            if (item.orgId === curNode.parentId && curNode.valueType === 'depttype') {\r\n                item.selectable = false;\r\n                resArray.push(item);\r\n                if (item.valueType === 'depttype') {\r\n                    this.getUnitParentsById(array, item, resArray);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取特定组织的所有父级元素\r\n     * 被调用之处：assembleCustomTreeData()\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n    private getParentsById(array: any[], curNode: any, resArray: any[]) {\r\n        const parents = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) - 1);\r\n        });\r\n        if (!parents) {\r\n            return;\r\n        }\r\n        for (const item of parents) {\r\n            if (item.orgId === curNode.parentId || curNode.parentId === '') {\r\n                item.selectable = false;\r\n                resArray.push(item);\r\n                this.getParentsById(array, item, resArray);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取特定组织的所有子级元素\r\n     * 被调用之处：assembleCustomTreeData()\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n    private getChildrenById(array: any[], curNode: any, resArray: any[]) {\r\n        const children = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) + 1);\r\n        });\r\n        if (!children) {\r\n            return;\r\n        }\r\n        for (const item of children) {\r\n            if (item.parentId === curNode.orgId) {\r\n                item.selectable = this._onlyCurrentOrg ? false : true;\r\n                resArray.push(item);\r\n                this.getChildrenById(array, item, resArray);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取特定用户分组的所有父级元素\r\n     * 被调用之处：assembleCustomSysUserGroupTreeData()\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n     private getSysUserGroupParentsById(array: any[], curNode: any, resArray: any[]) {\r\n        const parents = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) - 1);\r\n        });\r\n        if (!parents) {\r\n            return;\r\n        }\r\n        for (const item of parents) {\r\n            if (item.id === curNode.parentId || curNode.parentId === '') {\r\n                item.selectable = false;\r\n                resArray.push(item);\r\n                this.getSysUserGroupParentsById(array, item, resArray);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取特定用户分组的所有子级元素\r\n     * 被调用之处：assembleCustomSysUserGroupTreeData()\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n    private getSysUserGroupChildrenById(array: any[], curNode: any, resArray: any[]) {\r\n        const children = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) + 1);\r\n        });\r\n        if (!children) {\r\n            return;\r\n        }\r\n        for (const item of children) {\r\n            if (item.parentId === curNode.id) {\r\n                item.selectable = true;\r\n                resArray.push(item);\r\n                this.getSysUserGroupChildrenById(array, item, resArray);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 展开组织树节点时触发\r\n    listenTreeExpand(obj: any) {\r\n        // 分层加载\r\n        if (this.enableHierarchicalLoading && obj.children.length === 0) {\r\n            const currentOrg = this.originalTreeData.data.find(t => t[this.orgIdField] == obj.id);\r\n            if (currentOrg && currentOrg.isDetail == '0') {\r\n                this.getOrganizationByParentNode(obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 展开用户分组树节点时触发\r\n    listenSysUserTreeExpand(obj: any) {\r\n        // 分层加载\r\n        if(this.enableHierarchicalLoading && obj.children.length === 0) {\r\n            const currentUserGroup = this.originalSysUserGroupTreeData.find(t => t.id == obj.id);\r\n            if (currentUserGroup && !currentUserGroup.isDetail) {\r\n                this.getSysUserGroupByParentNode(obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 修改群组\r\n     */\r\n    listenGroupChange(item: any) {\r\n        this.showGroupDialog = true;\r\n        this.editingGroupId = item.id;\r\n        this.groupTitle = item.title;\r\n        this.groupNote = item.description;\r\n        this.groupDialogTitle = this.localeService.getValue(\"personnelSelector.group.editGroup\");\r\n    }\r\n\r\n    // 监听全局搜索页面内的页数变更事件\r\n    listenPageIndexChange(e: any) {\r\n        this.unifiedSearch(e);\r\n    }\r\n\r\n    // 监听全局搜索页面内的分页大小变更事件\r\n    listenPageSizeChange(e: any) {\r\n        this.unifiedSearch(e);\r\n    }\r\n\r\n    // 监听全局搜索面板是否关闭\r\n    listenClosePanelChange(e: boolean) {\r\n        this.hideSearchPanel = e;\r\n        this.updateStatusAfterClosePanel(this.selectTabs.activeId);\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    // 监听候选区变化\r\n    listenSelectionsChange(obj: any) {\r\n        if (obj.selections && obj.selections instanceof Array) {\r\n            this.selections = _.cloneDeep(obj.selections);\r\n            this.selections.forEach(item => {\r\n                item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            });\r\n            this.cdRef.detectChanges();\r\n            this.componentMap.forEach(component => {\r\n                if(component['cdRef']){\r\n                    component['cdRef']['detectChanges']();\r\n                }\r\n            });\r\n        }\r\n        if (obj.token && obj.token === 'quick') {\r\n            this.quickPanelVisible = false;\r\n            if (this.recentContactsList.length === 0) {\r\n                this.recentContactsList = _.cloneDeep(obj.recentContactsList);\r\n            }\r\n            this.returnResult(1);\r\n        }\r\n    }\r\n\r\n    listenSearchResultChange(changed: boolean) {\r\n        this.stopNodeSelected = !changed;\r\n    }\r\n\r\n    /**\r\n     * 监听最近联系人变化\r\n     * @param obj 最近联系人数据\r\n     */\r\n    listenRecentContactsChange(obj: any) {\r\n        if (obj.recentContactsList && obj.recentContactsList instanceof Array) {\r\n            this.recentContactsList = obj.recentContactsList;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 该方法大概率为已废弃方法，应该是兼容保留 2022.4.6\r\n     * 根据ids(多个id，英文逗号隔开)获取人员信息\r\n     * @ param ids\r\n     */\r\n    getSelectedInfo(ids: string) {\r\n        if (!!ids) {\r\n            this.selections = [];\r\n            this.finalText = [];\r\n            if (!!ids && ids.includes(',') && !this.multiSelect) {\r\n                return;\r\n            }\r\n            this.assembleDataByUserId(ids);\r\n        } else {\r\n            this.selections = [];\r\n            this.finalText = [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 目前此方法不存在被调用之处，应该是兼容保留 2022.4.6\r\n     * 人员展示区datagrid用于数据加载(搜索、点击组织树、是否含子集)\r\n     */\r\n    unSelectedListLoad() {\r\n        if (this.quickPanelVisible) {\r\n\r\n        } else {\r\n            if (this.type === 'personnel') {\r\n                this.items = [];\r\n                this.unSelectedList.forEach(res => {\r\n                    this.items.push(\r\n                        {\r\n                            abbreviation: res.abbreviation,\r\n                            code: res.code,\r\n                            defaultOrgId: res.defaultOrgId,\r\n                            defaultOrgPath: res.defaultOrgPath,\r\n                            ext1: res.ext1,\r\n                            ext2: res.ext2,\r\n                            fullPathName: res.fullPathName,\r\n                            name: res.name,\r\n                            orgTypeId: res.orgTypeId,\r\n                            secLevel: res.secLevel,\r\n                            sortOrder: res.sortOrder,\r\n                            state: res.state,\r\n                            su: res.su,\r\n                            userId: res.userId,\r\n                            orgAllPath: res.orgAllPath,\r\n                            type: 'people'\r\n                        });\r\n                });\r\n                this.unSelectDatagrid.toggleChecked();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获取组织树（用户分组树）上已展开的节点\r\n    private nodeExpanded(arr: TreeNode[], expanded: any[]): void {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (arr[i].expanded) {\r\n                expanded.push(arr[i].id)\r\n            }\r\n            if (arr[i].children.length) {\r\n                this.nodeExpanded(arr[i].children, expanded);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 通过搜索定位组织树的某个节点时，并且是分层加载的情况下才会被调用\r\n    private hlDataToTree(plainSource: any, userPath: string) {\r\n        const treeSource = this.hlDealData(plainSource, userPath);\r\n        // const parents = treeSource.filter(item => {\r\n        //     return item.data.layer === layer;\r\n        // });\r\n        // this.treeData(parents, treeSource, 1);\r\n        return treeSource;\r\n    }\r\n\r\n    // 通过搜索定位组织树的某个节点时，并且是分层加载的情况下才会被调用\r\n    private hlDealData(data: any[], userPath: string) {\r\n        const userPathList = [];\r\n        if (!userPath) {\r\n            return [];\r\n        }\r\n        const maxLength = userPath.length / 4 - 1;\r\n        for (let a = 0; a < maxLength; a++) {\r\n            userPathList.push(userPath.substring(0, 4 * (a + 1)));\r\n        }\r\n        let expanded = [];\r\n        this.nodeExpanded(this.treeListData, expanded);\r\n        const newDatas = [];\r\n        const nodes = new Map<string, any>();\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const path = item['path'];\r\n                const parentPath = Number(item['layer']) > 1 ? (item['path'] as string).slice(0, 4 * (Number(item['layer']) - 1)) : 'top';\r\n                if(!nodes[path]) {\r\n                    nodes[path] = { children: [] }\r\n                }\r\n                nodes[path] = {\r\n                    data : {\r\n                        id: item.orgId,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    selectable: true,\r\n                    children: nodes[path]['children']\r\n                }\r\n                if(!!this.shownOrgId && this.shownOrgId !== '*' && !!this.shownOrgPath) {\r\n                    if(this.shownOrgPath.indexOf(item.path) !== -1 && item.path.length < this.shownOrgPath.length) {\r\n                        nodes[path].selectable = false;\r\n                    }\r\n                }\r\n                if (userPathList.includes(item.path) || expanded.includes(item.orgId)) {\r\n                    nodes[path].expanded = true;\r\n                } else {\r\n                    nodes[path].expanded = false;\r\n                    // todo 分层加载需要\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        nodes[path].leaf = false;\r\n                    }\r\n                }\r\n                if(parentPath == 'top') {\r\n                    newDatas.push(nodes[path]);\r\n                } else {\r\n                    if(!nodes[parentPath]) {\r\n                        nodes[parentPath] = { children: [] }\r\n                    }\r\n                    (nodes[parentPath]['children'] as Array<any>).push(nodes[path]);\r\n                }\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    // 通过搜索定位用户分组树的某个节点时，并且是分层加载的情况下才会被调用\r\n    private hlSysUserGroupDataToTree(plainSource: any, layer: number, userPath: string){\r\n        const treeSource = this.hlSysUserGroupDealData(plainSource, userPath);\r\n        // const parents = treeSource.filter(item => {\r\n        //     return item.data.layer === layer;\r\n        // });\r\n        // this.treeData(parents, treeSource, 1);\r\n        return treeSource;\r\n    }\r\n\r\n    // 通过搜索定位用户分组树的某个节点时，并且是分层加载的情况下才会被调用\r\n    private hlSysUserGroupDealData(data: any[], path: string) {\r\n        const userPathList = [];\r\n        if (!path) {\r\n            return [];\r\n        }\r\n        const maxLength = path.length / 4 - 1;\r\n        for (let a = 0; a < maxLength; a++) {\r\n            userPathList.push(path.substring(0, 4 * (a + 1)));\r\n        }\r\n        let expanded = [];\r\n        this.nodeExpanded(this.sysUserGroupTreeListData, expanded);\r\n        const newDatas = [];\r\n        const nodes = new Map<string, any>();\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const path = item['path'];\r\n                const parentPath = item['layer'] > 1 ? (item['path'] as string).slice(0, 4 * (item['layer'] - 1)) : 'top';\r\n                if(!nodes[path]) {\r\n                    nodes[path] = { children: [] }\r\n                }\r\n                nodes[path] = {\r\n                    data : {\r\n                        id: item.id,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    selectable: true,\r\n                    children: nodes[path]['children']\r\n                }              \r\n                if (userPathList.includes(item.path) || expanded.includes(item.id)) {\r\n                    nodes[path].expanded = true;\r\n                } else {\r\n                    nodes[path].expanded = false;\r\n                    // todo: 分层加载需要\r\n                    if (item.isDetail === false) {\r\n                        nodes[path].leaf = false;\r\n                    }\r\n                }\r\n                if(parentPath == 'top') {\r\n                    newDatas.push(nodes[path]);\r\n                } else {\r\n                    if(!nodes[parentPath]) {\r\n                        nodes[parentPath] = { children: [] }\r\n                    }\r\n                    (nodes[parentPath]['children'] as Array<any>).push(nodes[path]);\r\n                }\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    /**\r\n     * 组织数据转换\r\n     * @param plainSource 接口原始数据\r\n     * @param layer 层级\r\n     * @returns 返回树形接口的数据\r\n     */\r\n    private dataToTree(plainSource: any, userPath: string) {\r\n        let listData = _.cloneDeep(plainSource);\r\n        if(this.withPermission) {\r\n            listData = listData.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n        }\r\n        this.originalTreeData.data = listData;\r\n        const treeSource = this.dealData(listData, userPath);\r\n\r\n        // const parents = treeSource.filter(item => {\r\n        //     return item.data.layer === layer;\r\n        // });\r\n        // this.treeData(parents, treeSource, 1);\r\n        return treeSource;\r\n    }\r\n\r\n    /**\r\n     * 系统用户分组数据转换\r\n     * @param plainSource 接口原始数据\r\n     * @param layer 层级\r\n     * @returns 返回树形接口的数据\r\n     */\r\n    private sysUserGroupDataToTree(plainSource: any, layer: number, path: string) {\r\n        let listData = _.cloneDeep(plainSource);\r\n        if(this.withPermission && this.userManagePathResult.userGroupPathList.length) {\r\n            listData = listData.filter(data => this.userManagePathResult.userGroupPathList.includes(data['path']));\r\n        }\r\n        this.originalSysUserGroupTreeData = listData;\r\n        const treeSource = this.dealSysUserGroupData(listData, path);\r\n        // const parents = treeSource.filter(item => {\r\n        //     return item.data.layer === layer;\r\n        // });\r\n        // this.treeData(parents, treeSource, 1);\r\n        return treeSource;\r\n    }\r\n\r\n    private dealDataWhenExpandTreeNode(data: any[]) {\r\n        if(!data || !data.length) {\r\n            return [];\r\n        }\r\n        const newDatas = [];\r\n        data.forEach(item => {\r\n            const newsDataObj: any = {\r\n                data: {\r\n                    id: item.orgId,\r\n                    name: item.name,\r\n                    path: item.path,\r\n                    layer: Number(item.layer)\r\n                },\r\n                expanded: false,\r\n                selectable: item.selectable,\r\n                children: []\r\n            };\r\n            if(item.isDetail === '0') {\r\n                newsDataObj.leaf = false;\r\n            }\r\n            newDatas.push(newsDataObj);\r\n        });\r\n        return newDatas;\r\n    } \r\n\r\n    /**\r\n     * 预处理组织数据\r\n     */\r\n    private dealData(data: any[], userPath: string) {\r\n        const userPathList = [];\r\n        if (!userPath) {\r\n            return [];\r\n        }\r\n        let maxLength = userPath.length / 4;\r\n        // todo 分层加载\r\n        if (this.enableHierarchicalLoading) {\r\n            maxLength = maxLength - 1;\r\n        }\r\n        for (let a = 0; a < maxLength; a++) {\r\n            userPathList.push({ path: userPath.substring(0, 4 * (a + 1)) });\r\n        }\r\n        const newDatas = [];\r\n        const nodes = new Map<string, any>();\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                // const newsDataObj: any = {\r\n                //     data: {\r\n                //         id: item.orgId,\r\n                //         name: item.name,\r\n                //         path: item.path,\r\n                //         layer: Number(item.layer)\r\n                //     },\r\n                //     expanded: true,\r\n                //     children: []\r\n                // };\r\n                // if (!!this.orgId && this.orgId !== '*') {\r\n                //     newsDataObj.selectable = item.selectable;\r\n                // }\r\n                // if (this._isInArray(item.path, 'path', userPathList)) {\r\n                //     newsDataObj.expanded = true;\r\n                // } else {\r\n                //     newsDataObj.expanded = false;\r\n                //     // todo 分层加载需要\r\n                //     if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                //         newsDataObj.leaf = false;\r\n                //     }\r\n                // }\r\n                // newDatas.push(newsDataObj);\r\n                const path = item['path'];\r\n                const parentPath = Number(item['layer']) > 1 ? (item['path'] as string).slice(0, 4 * (Number(item['layer']) - 1)) : 'top';\r\n                if(!nodes[path]) {\r\n                    nodes[path] = { children: [] }\r\n                }\r\n                nodes[path] = {\r\n                    data : {\r\n                        id: item.orgId,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    children: nodes[path]['children']\r\n                }\r\n                if (!!this.orgId && this.orgId !== '*') {\r\n                    nodes[path]['selectable'] = item.selectable;\r\n                }\r\n                if (this._isInArray(item.path, 'path', userPathList)) {\r\n                    nodes[path]['expanded'] = true;\r\n                } else {\r\n                    nodes[path]['expanded'] = false;\r\n                    // todo 分层加载需要\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        nodes[path]['leaf'] = false;\r\n                    }\r\n                }\r\n                if(parentPath == 'top') {\r\n                    newDatas.push(nodes[path]);\r\n                } else {\r\n                    if(!nodes[parentPath]) {\r\n                        nodes[parentPath] = { children: [] }\r\n                    }\r\n                    (nodes[parentPath]['children'] as Array<any>).push(nodes[path]);\r\n                }\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    private dealSysUserGroupDataWhenExpandTreeNode(data: any[], path: string) {\r\n        const pathList = [];\r\n        if (!!path) {\r\n            let maxLength = path.length / 4;\r\n            if(this.enableHierarchicalLoading) {\r\n                maxLength = maxLength - 1;\r\n            }\r\n            for (let a = 0; a < maxLength; a++) {\r\n                pathList.push({ path: path.substring(0, 4 * (a + 1)) });\r\n            }\r\n        }else {\r\n            pathList.push({path: ''});\r\n        }\r\n        const newDatas = [];\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const newsDataObj: any = {\r\n                    data: {\r\n                        id: item.id,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer),\r\n                    },\r\n                    children: [],\r\n                    expanded: true,\r\n                };\r\n                if(!!this.userGroupId && this.userGroupId !== '*') {\r\n                    newsDataObj.selectable = item.selectable;\r\n                }\r\n                if(this._isInArray(item.path, 'path', pathList)){\r\n                    newsDataObj.expanded = true;\r\n                }else {\r\n                    newsDataObj.expanded = false;\r\n                    if(this.enableHierarchicalLoading && item.isDetail === false){\r\n                        newsDataObj.leaf = false;\r\n                    }\r\n                }\r\n                newDatas.push(newsDataObj);\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    // 预处理系统用户分组数据\r\n    private dealSysUserGroupData(data: any[], path: string) {\r\n        const pathList = [];\r\n        if (!!path) {\r\n            let maxLength = path.length / 4;\r\n            if(this.enableHierarchicalLoading) {\r\n                maxLength = maxLength - 1;\r\n            }\r\n            for (let a = 0; a < maxLength; a++) {\r\n                pathList.push({ path: path.substring(0, 4 * (a + 1)) });\r\n            }\r\n        }else {\r\n            pathList.push({path: ''});\r\n        }\r\n        const newDatas = [];\r\n        const nodes = new Map<string, any>();\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                // const newsDataObj: any = {\r\n                //     data: {\r\n                //         id: item.id,\r\n                //         name: item.name,\r\n                //         path: item.path,\r\n                //         layer: Number(item.layer),\r\n                //     },\r\n                //     children: [],\r\n                //     expanded: true,\r\n                // };\r\n                // if(!!this.userGroupId && this.userGroupId !== '*') {\r\n                //     newsDataObj.selectable = item.selectable;\r\n                // }\r\n                // if(this._isInArray(item.path, 'path', pathList)){\r\n                //     newsDataObj.expanded = true;\r\n                // }else {\r\n                //     newsDataObj.expanded = false;\r\n                //     if(this.enableHierarchicalLoading && item.isDetail === false){\r\n                //         newsDataObj.leaf = false;\r\n                //     }\r\n                // }\r\n                // newDatas.push(newsDataObj);\r\n\r\n                const path = item['path'];\r\n                const parentPath = item['layer'] > 1 ? (item['path'] as string).slice(0, 4 * (item['layer'] - 1)) : 'top';\r\n                if(!nodes[path]) {\r\n                    nodes[path] = { children: [] }\r\n                }\r\n                nodes[path] = {\r\n                    data : {\r\n                        id: item.id,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    children: nodes[path]['children']\r\n                }\r\n                if(!!this.userGroupId && this.userGroupId !== '*') {\r\n                    nodes[path].selectable = item.selectable;\r\n                }\r\n                if(this._isInArray(item.path, 'path', pathList)){\r\n                    nodes[path].expanded = true;\r\n                }else {\r\n                    nodes[path].expanded = false;\r\n                    if(this.enableHierarchicalLoading && item.isDetail === false){\r\n                        nodes[path].leaf = false;\r\n                    }\r\n                }\r\n                if(parentPath == 'top') {\r\n                    newDatas.push(nodes[path]);\r\n                } else {\r\n                    if(!nodes[parentPath]) {\r\n                        nodes[parentPath] = { children: [] }\r\n                    }\r\n                    (nodes[parentPath]['children'] as Array<any>).push(nodes[path]);\r\n                }\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    /**\r\n     * 数据转换\r\n     * @param parents 父级节点信息\r\n     * @param treeSource 原始数据信息\r\n     * @param layer 层级\r\n     */\r\n    treeData(parents: any, treeSource: any, layer: number) {\r\n        parents.forEach(parent => {\r\n            const parentPath = parent['data']['path'];\r\n            const parentLayer = parent['data']['layer'];\r\n            treeSource.forEach(item => {\r\n                if (item && item['data'] && item['data']['path']) {\r\n                    const itemPath = item['data']['path'];\r\n                    const itemLayer = item['data']['layer'];\r\n                    let targetPath: string;\r\n                    if (itemPath && itemPath.length > parentPath.length) {\r\n                        targetPath = itemPath.substr(0, Number(layer) * 4);\r\n                    }\r\n                    if (parentPath === targetPath && parentLayer === itemLayer - 1) {\r\n                        parent['children'].push(item);\r\n                    }\r\n                    if (parentPath === targetPath) {\r\n                        this.treeData([item], treeSource, Number(layer) + 1);\r\n                    }\r\n                }\r\n            });\r\n\r\n        })\r\n    }\r\n\r\n    // 关闭人员选择弹窗时，确认回填至文本框的人员展示文本\r\n    private assembleFinalText() {\r\n        this.finalText = [];\r\n        this.selections.forEach((item, index) => {\r\n            const displayName = this.formatFn && this.formatFn(item);\r\n            let expressionName = '';\r\n            if (typeof this.expression === 'string' && this.expression.length) {\r\n                expressionName = this.expression.replace(/{{(.*?)}}/g, (...args) => {\r\n                    return item[args[1]] ? item[args[1]] : '';\r\n                });\r\n            }\r\n            let codeAndName = '';\r\n            if (item.code && this.showUserCode) {\r\n                codeAndName += '[' + item.code + ']';\r\n            }\r\n            if (item.name) {\r\n                codeAndName += item.name;\r\n            }\r\n            const defaultDisplayName = !!this.displayField ? item[this.displayField] : codeAndName;\r\n            if (this.viewType === 'text') {\r\n                if (!!this.formatFn) {\r\n                    this.finalText += displayName + ',';\r\n                } else if (!!this.expression) {\r\n                    this.finalText += expressionName + ',';\r\n                } else {\r\n                    this.finalText += defaultDisplayName + ',';\r\n                }\r\n            } else if (this.viewType === 'tag') {\r\n                if (!!this.formatFn) {\r\n                    this.finalText.push(displayName);\r\n                } else if (!!this.expression) {\r\n                    this.finalText.push(expressionName);\r\n                } else {\r\n                    this.finalText.push(defaultDisplayName);\r\n                }\r\n            }\r\n        });\r\n        if (this.viewType === 'text' && this.finalText.length) {\r\n            this.finalText = this.finalText.substring(0, this.finalText.length - 1);\r\n        }\r\n        \r\n        if (this.enableQuick) {\r\n            this.setQuickContainerWidth();\r\n        }\r\n    }\r\n\r\n    // 增加最近联系人\r\n    private addRecentContacts() {\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'RecentContacts',\r\n            clearData: false\r\n        };\r\n\r\n        if (!this.selections.length) {\r\n            return;\r\n        }\r\n        const reverseSelections = [];\r\n        for (let i = this.selections.length - 1; i >= 0; i--) {\r\n            reverseSelections.push(this.selections[i]);\r\n        }\r\n        const top10Selections = reverseSelections.slice(0, this.recentContactsLimit);\r\n        top10Selections.forEach(item => {\r\n            const index = this.recentContactsList.findIndex(rit => rit === item[this.idField]);\r\n            if (index !== -1) {\r\n                this.recentContactsList.splice(index, 1);\r\n            }\r\n            this.recentContactsList.unshift(item[this.idField]);\r\n        });\r\n        this.recentContactsList = this.recentContactsList.slice(0, this.recentContactsLimit);\r\n        param.addList = this.recentContactsList.slice();\r\n        this.favoritesTool.curdRecentContactsOrFavorites('modify', param).subscribe(() => {\r\n\r\n        }, error => {\r\n            // UX说出错不用给出提示。\r\n            // this.msgService.show('error', 'some error occured', {\r\n            //     height: 140,\r\n            //     showHeader: false\r\n            // });\r\n        });\r\n    }\r\n\r\n    // 初始化收藏人员数据\r\n    private initFavorites() {\r\n        if (this.enableFavorites) {\r\n            if(this.favoritesTool.initFavorites) {\r\n                return;\r\n            }\r\n            this.favoritesTool.withPermission = this.withPermission;\r\n            this.favoritesTool.initFavorites = true;\r\n            this.favoritesTool.getFavoritesList().subscribe((result) => {\r\n                const resData = result ? (result as any).data : [];\r\n                if (!!this.shownOrgId && this.shownOrgId != '*') {\r\n                    const requestParam: PersonnelRequestParam = {\r\n                        withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                        notGetStopUser: !this.includeStopUser,\r\n                        notGetCurrentUser: false,\r\n                        orderField: this.personnelOrderField,\r\n                        userTypeMode: this.userTypeMode\r\n                    };\r\n                    if (this.enableSecurityControl) {\r\n                        requestParam.securityControl = true;\r\n                        requestParam.securityLevel = this.securityLevel;\r\n                    }\r\n                    this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                        const userInShownOrg = userData ? userData.data : [];\r\n                        const filterFavData = (resData as Array<any>).filter(item => userInShownOrg.find(user => user.userId == item.userId));\r\n                        this.favoritesTool.favoritesList = filterFavData;\r\n                        this.favoritesTool.setFavoritesList(filterFavData);\r\n                    });\r\n                } else {\r\n                    this.favoritesTool.favoritesList = resData;\r\n                    this.favoritesTool.setFavoritesList(resData);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 选择完人后，点击确认、取消按钮的逻辑\r\n     * @param numberType 0：取消；1：确定\r\n     */\r\n    returnResult(numberType: number) {\r\n        let finalText: any;\r\n        if (numberType) {\r\n            this.cloneSelections = _.cloneDeep(this.selections);\r\n            this.confirmToken = true;\r\n            this.assembleFinalText();\r\n            // 兼容旧表单\r\n            if (this.favoritesTool) {\r\n                this.addRecentContacts();\r\n            }\r\n            this.selectionList = this.selections;\r\n            if (this.selections && this.selections.length) {\r\n                this.selectionsChange.emit({\r\n                    info: 'confirm',\r\n                    data: this.selections,\r\n                    token: this['token']\r\n                });\r\n                if (this.finalText instanceof Array) {\r\n                    finalText = this.finalText.join();\r\n                } else if (typeof this.finalText === 'string') {\r\n                    finalText = this.finalText;\r\n                }\r\n                this.onModelChange(finalText);\r\n                this.onModelTouched(finalText);\r\n            } else {\r\n                if (this.finalText instanceof Array) {\r\n                    finalText = this.finalText.join();\r\n                } else if (typeof this.finalText === 'string') {\r\n                    finalText = this.finalText;\r\n                }\r\n                this.onModelChange(finalText);\r\n                this.onModelTouched(finalText);\r\n                this.selectionsChange.emit({\r\n                    info: 'confirm',\r\n                    data: this.selections,\r\n                    token: this['token']\r\n                });\r\n            }\r\n\r\n            this.quickInput = '';\r\n        } else {\r\n            this.selections = this.selectionList;\r\n            this.selectionsChangeUn.emit({\r\n                info: 'cancel',\r\n                data: this.selections,\r\n                token: this['token']\r\n            });\r\n        }\r\n        this.farrisDialog.close();\r\n    }\r\n\r\n    /**\r\n     * 切换人员/下级组织/我的群组，暂时无用，后续完善功能 2022.4.6\r\n     * todo: 展示区面包导航\r\n     * @param type 切换类型\r\n     */\r\n    toggleType(type: string): void {\r\n        return;\r\n        // this.isAllSelect();\r\n    }\r\n\r\n    // 切换包含本人\r\n    toggleIncludeCurrentUser(e) {\r\n        if(this.selectTabs.activeId == this.organizationTabId){\r\n            this._includeCurrentUser = e;\r\n        }\r\n        if(this.selectTabs.activeId == this.sysUserGroupTabId){\r\n            this.pIncludeCurrentUser = e;\r\n        }\r\n    }\r\n\r\n    // 切换包含子级\r\n    toggleChildHierarchy(e) {\r\n        if(this.selectTabs.activeId == this.organizationTabId){\r\n            this.enableChildHierarchy = e;\r\n        }\r\n        if(this.selectTabs.activeId == this.sysUserGroupTabId){\r\n            this._enableChildSysUserTree = e;\r\n        }   \r\n    }\r\n\r\n    // 是否启用排除本人\r\n    // 目前仅过滤领导业务场景下关闭筛选窗时被调用 2022.4.6\r\n    changeisExclude() {\r\n        // if (this.treeSelectedNodeInfo) {\r\n        //     this.loadDataSelected(this.treeSelectedNodeInfo);\r\n        // } else {\r\n        //     this.datagridLoad();\r\n        // }\r\n        this.unSelectDatagrid.filterId = this.filterId;\r\n        this.unSelectDatagrid.orgId = this.currentSelectOrgId;\r\n        this.unSelectDatagrid.switchPage({\r\n            pageIndex: 1,\r\n            pageSize: this.unSelectDatagrid.pageSize ? this.unSelectDatagrid.pageSize: this.pageSize\r\n        });\r\n    }\r\n\r\n    // 选中组织树的节点后加载选中组织内的人员\r\n    loadDataSelected(res) {\r\n        if(this.selectTabs.activeId !== this.organizationTabId) {\r\n            return;\r\n        }\r\n        this.searchPage = false;\r\n        // 无法立即刷新属性\r\n        this.componentMap.forEach(component => {\r\n            component.searchPage = false;\r\n        });\r\n        this.treeSelectedNodeInfo = res;\r\n        this.currentSelectOrgId = res.node.data.id;\r\n        this.path = res.node.data.path;\r\n        this.pageIndex = 1;\r\n        //this.orgIdOrg = res.node.data.id;\r\n        this.pathOrg = res.node.data.path;\r\n        this.pageIndexOrg = 1;\r\n        this.datagridLoad();\r\n    }\r\n\r\n    // 选中用户分组树的节点后加载选中用户分组内的人员\r\n    loadSysUserGroupDataSelected(res: any) {\r\n        if(this.selectTabs.activeId !== this.sysUserGroupTabId) {\r\n            return;\r\n        }\r\n        this.searchPage = false;\r\n        // 无法立即刷新属性\r\n        this.componentMap.forEach(component => {\r\n            component.searchPage = false;\r\n        });\r\n        // this.treeSelectedNodeInfo = res;\r\n        this.userGroupId = res.node.data.id;\r\n        this.pageIndex = 1;\r\n        this.datagridLoad();\r\n    }\r\n\r\n    /**\r\n     * datagrid数据加载，候选区域重新请求数据。\r\n     */\r\n    datagridLoad() {\r\n        switch (this.selectTabs.activeId) {\r\n            case this.organizationTabId:\r\n                if (!this.stopNodeSelected) {\r\n                    if(!this.currentSelectOrgId) {\r\n                        return;\r\n                    }\r\n                    this.unSelectDatagrid.filterId = this.filterId;\r\n                    this.unSelectDatagrid.orgId = this.currentSelectOrgId;\r\n                    if(this.filterPosition) {\r\n                        this.unSelectDatagrid.filterPositionId = null;\r\n                        this.positionFilterComboList && this.positionFilterComboList.displayText && this.positionFilterComboList.onClear();\r\n                        this.unSelectDatagrid.assembleDataByOrgIdAndGetFilterPosition({\r\n                            pageIndex: 1,\r\n                            pageSize: this.unSelectDatagrid.pageSize ? this.unSelectDatagrid.pageSize: this.pageSize\r\n                        });\r\n                    } else {\r\n                        this.unSelectDatagrid.switchPage({\r\n                            pageIndex: 1,\r\n                            pageSize: this.unSelectDatagrid.pageSize ? this.unSelectDatagrid.pageSize: this.pageSize\r\n                        });\r\n                    }\r\n                }\r\n                break;\r\n            case this.sysUserGroupTabId:\r\n                if(!this.userGroupId) {\r\n                    return;\r\n                }\r\n                this.sysUserGroupUnselect.filterId = this.filterId;\r\n                this.sysUserGroupUnselect.userGroupId = this.userGroupId;\r\n                if(this.showOrgFilterIcon) {\r\n                    this.orgFilterComboList && this.orgFilterComboList.displayText && this.orgFilterComboList.onClear();\r\n                    this.sysUserGroupUnselect.assembleDataByUserGroupIdAndGetFilterOrg({\r\n                        pageIndex: 1,\r\n                        pageSize: this.sysUserGroupUnselect.pageSize ? this.sysUserGroupUnselect.pageSize: this.pageSize\r\n                    });\r\n                } else {\r\n                    this.sysUserGroupUnselect.switchPage({\r\n                        pageIndex: 1,\r\n                        pageSize: this.sysUserGroupUnselect.pageSize ? this.sysUserGroupUnselect.pageSize: this.pageSize\r\n                    });\r\n                }\r\n                break;\r\n            case this.candidateTabId:\r\n                // if(!!this.shownOrgId && this.shownOrgId != '*' && !this.candidateDatagrid.userInShownOrg.length) {\r\n                //     const requestParam: any = {\r\n                //         withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                //         notGetStopUser: !this.includeStopUser,\r\n                //         notGetCurrentUser: false,\r\n                //         orderField: this.personnelOrderField,\r\n                //         userTypeMode: this.userTypeMode\r\n                //     };\r\n                //     this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                //         this.candidateDatagrid.userInShownOrg = userData ? userData.data : [];\r\n                //         this.candidateDatagrid.assembleData();\r\n                //     });\r\n                // } else {\r\n                //    this.candidateDatagrid.assembleData();\r\n                // }\r\n                this.candidateDatagrid.assembleData();\r\n                break;\r\n            case this.recentTabId:\r\n                if (!!this.shownOrgId && this.shownOrgId != '*' && !this.recentContactsComponent.userInShownOrg.length) {\r\n                    const requestParam: PersonnelRequestParam = {\r\n                        withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                        notGetStopUser: !this.includeStopUser,\r\n                        notGetCurrentUser: false,\r\n                        orderField: this.personnelOrderField,\r\n                        userTypeMode: this.userTypeMode\r\n                    };\r\n                    if (this.enableSecurityControl) {\r\n                        requestParam.securityControl = true;\r\n                        requestParam.securityLevel = this.securityLevel;\r\n                    }\r\n                    this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                        this.recentContactsComponent.userInShownOrg = userData ? userData.data : [];\r\n                        this.recentContactsComponent.assembleData();\r\n                    });\r\n                } else {\r\n                    this.recentContactsComponent.assembleData();\r\n                }\r\n                break;\r\n            case this.favoritesTabId:\r\n                this.favoritesComponent.toggleChecked();\r\n                break;\r\n            case this.groupTabId:\r\n                if(!!this.shownOrgId && this.shownOrgId != '*' && !this.groupComponent.userInShownOrg.length) {\r\n                    const requestParam: PersonnelRequestParam = {\r\n                        withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                        notGetStopUser: !this.includeStopUser,\r\n                        notGetCurrentUser: false,\r\n                        orderField: this.personnelOrderField,\r\n                        userTypeMode: this.userTypeMode\r\n                    };\r\n                    if (this.enableSecurityControl) {\r\n                        requestParam.securityControl = true;\r\n                        requestParam.securityLevel = this.securityLevel;\r\n                    }\r\n                    this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                        this.groupComponent.userInShownOrg = userData ? userData.data : [];\r\n                        this.groupComponent.assembleData();\r\n                    });\r\n                } else {\r\n                    this.groupComponent.assembleData();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 判断某个对象是否在数组内\r\n     * @param value 对象属性值\r\n     * @param field 对象key\r\n     * @param array 数组\r\n     * @returns boolean\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error(this.localeService.getValue(\"personnelSelector.message.vaildElements\"));\r\n        }\r\n        return array.find(item => value === item[field]) ? true : false;\r\n    }\r\n\r\n    /**\r\n     * 在已选人员展示区内，点击清空已选按钮时触发\r\n     * @returns null\r\n     */\r\n    deleteAll() {\r\n        this.componentMap.forEach(component => {\r\n            component.clearCheckeds();\r\n            component.clearUserIds();\r\n            if(component['cdRef']){\r\n                component['cdRef']['detectChanges']();\r\n            }\r\n        });\r\n        if(!!this.searchResultComponent){\r\n            this.searchResultComponent.clearCheckeds();\r\n        }\r\n        this.selections = [];\r\n        this.selectAllPersonnel = false;\r\n        this.selectLatelyPersonnel = false;\r\n\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * 删除右侧已选人员列表中的一条数据\r\n     */\r\n    moveToLeft(data: any) {\r\n        this.lineDataChange.emit(data);\r\n        this._removeOneFromArray(data[this.idField], this.selections);\r\n        this.componentMap.forEach(component => {\r\n            component.selections = _.cloneDeep(this.selections);\r\n            component.cancelSelections({ id: data[this.idField] });\r\n            if(component['cdRef']){\r\n                component['cdRef']['detectChanges']();\r\n            }\r\n        });\r\n        if (!!this.searchResultComponent) {\r\n            this.searchResultComponent.cancelSelections({ id: data[this.idField] });\r\n        }\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * 从一个数组中删除一条数据\r\n     * @param originArray 数据源\r\n     */\r\n    private _removeOneFromArray(activeId: string, originArray: any) {\r\n        originArray.forEach((selection, index) => {\r\n            if (activeId === selection[this.idField]) {\r\n                originArray.splice(index, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 监听全局搜索筛选框内的文本变化\r\n    listenSearchText(e: KeyboardEvent) {\r\n        if (e.code === 'Backspace' || e.code === 'Delete') {\r\n            if (!this.searchText) {\r\n                this.searchClear();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 清除全局搜索筛选框内的文本\r\n    searchClear() {\r\n        if (!!this.searchResultComponent) {\r\n            this.hideSearchPanel = true;\r\n            this.searchResult = [];\r\n            this.updateStatusAfterClosePanel(this.selectTabs.activeId);\r\n            this.cdRef.detectChanges();\r\n            return;\r\n        }\r\n        this.searchPage = false;\r\n        this.assembeDataBySearch(false);\r\n    }\r\n\r\n    // 全局搜索，点击筛选框内搜索按钮或者敲击回车键时触发\r\n    onSearch() {\r\n        if (!!this.searchResultComponent) {\r\n            this.unifiedSearch({ pageIndex: 1 }, true);\r\n            return;\r\n        }\r\n        this.searchPage = true;\r\n        if (this.globalSearch) {\r\n            this.stopNodeSelected = true;\r\n            this.farrisTree.selectNode(this.treeListData[0].data.id);\r\n        }\r\n        this.assembeDataBySearch(true);\r\n    }\r\n\r\n    // searchResultComponent存在时被调用，用于根据全局搜索筛选框内的文本（编号/姓名/首字母）进行人员搜索\r\n    private unifiedSearch(size?: any, token?: boolean) {\r\n        if (!this.searchText) {\r\n            return;\r\n        }\r\n        if (token) {\r\n            this.searchResultComponent.pageIndex = 1;\r\n            this.searchResultComponent.pageSize = this.pageSize;\r\n        }\r\n        // 适配工作流人员场景开始\r\n        const showTabIds = this.showTabIds.split(this.multipleChoiceSeparator);\r\n        const pageIndex = size && size.pageIndex ? size.pageIndex : this.pageIndex;\r\n        const pageSize = size && size.pageSize ? size.pageSize : this.pageSize;\r\n        if (showTabIds.length === 1 && showTabIds[0] === this.candidateTabId) {\r\n            const searchCandidateItems = this.searchUserInCandidateItems(this.searchText);\r\n            const start = (pageIndex - 1) * pageSize;\r\n            const end = start + pageSize;\r\n            const result = searchCandidateItems.slice(start, end);\r\n            this.hideSearchPanel = false;\r\n            this.searchResultComponent.selections = this.selections;\r\n            this.searchResult = result;\r\n            this.searchResultComponent.itemTotalCount = searchCandidateItems.length;\r\n            this.searchResultComponent.pageTotal = Math.ceil(searchCandidateItems.length / pageSize);\r\n            if (this.searchResultComponent.pageTotal === 0) {\r\n                this.searchResultComponent.pageTotal = 1;\r\n            }\r\n            return;\r\n        }\r\n        // 适配工作流人员场景结束\r\n\r\n        const requestParam: PersonnelRequestParam = {\r\n            pageSize: pageSize,\r\n            pageIndex: pageIndex,\r\n            withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: this._disableCurrentUser ? true : false,\r\n            orderField: this.personnelOrderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        if (!!this.shownOrgId && this.shownOrgId !== '*'){\r\n            requestParam.orgId = this.shownOrgId;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText,\r\n            requestParam).subscribe((res: any) => {\r\n                this.hideSearchPanel = false;\r\n                this.searchResultComponent.selections = this.selections;\r\n                this.searchResult = res ? res.data : [];\r\n                this.searchResultComponent.itemTotalCount = res.totalCount;\r\n                this.searchResultComponent.pageTotal = Math.ceil(res.totalCount / pageSize);\r\n                if (this.searchResultComponent.pageTotal === 0) {\r\n                    this.searchResultComponent.pageTotal = 1;\r\n                }\r\n                this.cdRef.detectChanges();\r\n                if (this.searchResultComponent['cdRef']) {\r\n                    this.searchResultComponent['cdRef']['detectChanges']();\r\n                }\r\n            });\r\n    }\r\n\r\n    // 仅展示人员页签时，前端过滤搜索后的可选择人员\r\n    private searchUserInCandidateItems(searchText: string) {\r\n        const searchResult = [];\r\n        const lowerCaseSearchText = searchText.toLowerCase();\r\n        this.candidateItems.forEach(item => {\r\n            if ((item.name && item.name.toLowerCase().includes(searchText)) ||\r\n                (item.code && item.code.toLowerCase().includes(searchText))) {\r\n                searchResult.push(item);\r\n            } else if ((item.initials && item.initials.toLowerCase().includes(lowerCaseSearchText)) ||\r\n                       (item.pinyin && item.pinyin.toLowerCase().includes(lowerCaseSearchText))) {\r\n                searchResult.push(item);\r\n            }\r\n        });\r\n        return searchResult;\r\n    }\r\n\r\n    // searchResultComponent不存在时被调用，貌似代码永远不会走到这里，需再确认 2022.4.6\r\n    private assembeDataBySearch(onSearch: boolean) {\r\n        // 无法立即刷新属性\r\n        this.componentMap.forEach(component => {\r\n            component.searchPage = onSearch;\r\n        });\r\n\r\n        switch (this.selectTabs.activeId) {\r\n            case this.organizationTabId:\r\n                this.unSelectDatagrid.filterId = this.filterId;\r\n                this.unSelectDatagrid.switchPage({\r\n                    pageIndex: 1,\r\n                    pageSize: this.pageSize\r\n                });\r\n                break;\r\n            case this.sysUserGroupTabId:\r\n                this.sysUserGroupUnselect.filterId = this.filterId;\r\n                this.sysUserGroupUnselect.switchPage({\r\n                    pageIndex: 1,\r\n                    pageSize: this.pageSize\r\n                });\r\n                break;\r\n            case this.candidateTabId:\r\n                this.candidateDatagrid.assembleData();\r\n                break;\r\n            case this.recentTabId:\r\n                this.recentContactsComponent.assembleData();\r\n                break;\r\n            case this.favoritesTabId:\r\n                this.favoritesComponent.assembleData();\r\n                break;\r\n            case this.groupTabId:\r\n                this.groupComponent.assembleData();\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 用于外部触发显示弹窗，目前仅在src/app的demo中被调用\r\n     * @param e   true|false\r\n     */\r\n    dialogIsShow(e) {\r\n        if (e) {\r\n            this.farrisDialog.show();\r\n        } else {\r\n            this.farrisDialog.close();\r\n        }\r\n    }\r\n\r\n    // input框清除按钮触发事件\r\n    clearVal() {\r\n        this.selections = [];\r\n        this.cloneSelections = [];\r\n        if (this.unSelectDatagrid) {\r\n            this.unSelectDatagrid.selections = [];\r\n            this.unSelectDatagrid.cloneSelections = [];\r\n            this.unSelectDatagrid.cloneUserIds = '';\r\n            this.unSelectDatagrid.userIds = '';\r\n        }\r\n        if(this.sysUserGroupUnselect){\r\n            this.sysUserGroupUnselect.selections = [];\r\n            this.sysUserGroupUnselect.cloneSelections = [];\r\n            this.sysUserGroupUnselect.cloneUserIds = '';\r\n            this.sysUserGroupUnselect.userIds = '';\r\n        }\r\n        if (this.candidateDatagrid) {\r\n            this.candidateDatagrid.clearCheckeds();\r\n            this.candidateDatagrid.cloneSelections = [];\r\n            this.candidateDatagrid.cloneUserIds = '';\r\n            this.candidateDatagrid.userIds = '';\r\n        }\r\n\r\n        if (this.recentContactsComponent) {\r\n            this.recentContactsComponent.selections = [];\r\n            this.recentContactsComponent.cloneSelections = [];\r\n            this.recentContactsComponent.cloneUserIds = '';\r\n            this.recentContactsComponent.userIds = '';\r\n        }\r\n\r\n        if (this.favoritesComponent) {\r\n            this.favoritesComponent.clearCheckeds();\r\n            this.favoritesComponent.cloneSelections = [];\r\n            this.favoritesComponent.cloneUserIds = '';\r\n            this.favoritesComponent.userIds = '';\r\n        }\r\n\r\n        if (this.groupComponent) {\r\n            this.groupComponent.clearCheckeds();\r\n            this.groupComponent.cloneSelections = [];\r\n            this.groupComponent.cloneUserIds = '';\r\n            this.groupComponent.userIds = '';\r\n        }\r\n\r\n        this.selectAllPersonnel = false;\r\n        this.selectLatelyPersonnel = false;\r\n\r\n        this.finalText = [];\r\n        this.quickInput = '';\r\n        this.onModelChange(this.finalText.join());\r\n        this.onModelTouched(this.finalText.join());\r\n        this.inputClear.emit();\r\n        if (this.enableQuick) {\r\n            this.setQuickContainerWidth();\r\n        }\r\n    }\r\n\r\n    // 切换tab页时触发\r\n    changeTabs(e) {\r\n        if (!this.searchText) {\r\n            this.searchPage = false;\r\n        }\r\n        if(!this.hideSearchPanel) {\r\n            this.hideSearchPanel = true;\r\n        }\r\n        if (e.nextId === this.organizationTabId) {\r\n            this.unSelectDatagrid.selections = _.cloneDeep(this.selections);\r\n            this.unSelectDatagrid.filterId = this.filterId;\r\n            this.farrisTree.resize();\r\n            this.selectOrgTreeNode();\r\n            if(this.farrisTree.selectedRow) {\r\n                if(this.filterPosition) {\r\n                    //this.positionFilterComboList && this.positionFilterComboList.displayText && this.positionFilterComboList.onClear();\r\n                    this.unSelectDatagrid.assembleDataByOrgIdAndGetFilterPosition({\r\n                        pageIndex: 1,\r\n                        pageSize: this.unSelectDatagrid.pageSize ? this.unSelectDatagrid.pageSize: this.pageSize\r\n                    });\r\n                } else {\r\n                    this.unSelectDatagrid.switchPage({\r\n                        pageIndex: 1,\r\n                        pageSize: this.unSelectDatagrid.pageSize ? this.unSelectDatagrid.pageSize: this.pageSize\r\n                    });\r\n                }\r\n            }            \r\n        } else if(e.nextId === this.sysUserGroupTabId) {\r\n            this.sysUserGroupUnselect.selections = _.cloneDeep(this.selections);\r\n            this.sysUserGroupUnselect.filterId = this.filterId;\r\n            this.sysUserGroupTree.resize();\r\n            this.selectUserGroupTreeNode();\r\n            if(this.sysUserGroupTree.selectedRow) {\r\n                if(this.showOrgFilterIcon) {\r\n                    //this.orgFilterComboList && this.orgFilterComboList.displayText && this.orgFilterComboList.onClear();\r\n                    this.sysUserGroupUnselect.assembleDataByUserGroupIdAndGetFilterOrg({\r\n                        pageIndex: 1,\r\n                        pageSize: this.sysUserGroupUnselect.pageSize ? this.sysUserGroupUnselect.pageSize: this.pageSize\r\n                    });\r\n                } else {\r\n                    this.sysUserGroupUnselect.switchPage({\r\n                        pageIndex: 1,\r\n                        pageSize: this.sysUserGroupUnselect.pageSize ? this.sysUserGroupUnselect.pageSize: this.pageSize\r\n                    });\r\n                }\r\n            }\r\n        } else if (e.nextId === this.candidateTabId) {\r\n            this.candidateDatagrid.selections = _.cloneDeep(this.selections);\r\n            // if(!!this.shownOrgId && this.shownOrgId != '*' && !this.candidateDatagrid.userInShownOrg.length) {\r\n            //     const requestParam: any = {\r\n            //         withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n            //         notGetStopUser: !this.includeStopUser,\r\n            //         notGetCurrentUser: false,\r\n            //         orderField: this.personnelOrderField,\r\n            //         userTypeMode: this.userTypeMode\r\n            //     };\r\n            //     this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n            //         this.candidateDatagrid.userInShownOrg = userData ? userData.data : [];\r\n            //         this.candidateDatagrid.assembleData();\r\n            //     });\r\n            // } else {\r\n            //    this.candidateDatagrid.assembleData();\r\n            // }\r\n            this.candidateDatagrid.assembleData();\r\n        } else if (e.nextId === this.recentTabId) {\r\n            this.recentContactsComponent.selections = _.cloneDeep(this.selections);\r\n            if(!!this.shownOrgId && this.shownOrgId != '*' && !this.recentContactsComponent.userInShownOrg.length) {\r\n                const requestParam: PersonnelRequestParam = {\r\n                    withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                    notGetStopUser: !this.includeStopUser,\r\n                    notGetCurrentUser: false,\r\n                    orderField: this.personnelOrderField,\r\n                    userTypeMode: this.userTypeMode\r\n                };\r\n                if (this.enableSecurityControl) {\r\n                    requestParam.securityControl = true;\r\n                    requestParam.securityLevel = this.securityLevel;\r\n                }\r\n                this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                    this.recentContactsComponent.userInShownOrg = userData ? userData.data : [];\r\n                    this.recentContactsComponent.assembleData();\r\n                });\r\n            } else {\r\n                this.recentContactsComponent.assembleData();\r\n            }\r\n        } else if (e.nextId === this.favoritesTabId) {\r\n            this.favoritesComponent.selections = _.cloneDeep(this.selections);\r\n            if(!!this.shownOrgId && this.shownOrgId != '*' && !this.favoritesComponent.userInShownOrg.length) {\r\n                const requestParam: PersonnelRequestParam = {\r\n                    withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                    notGetStopUser: !this.includeStopUser,\r\n                    notGetCurrentUser: false,\r\n                    orderField: this.personnelOrderField,\r\n                    userTypeMode: this.userTypeMode\r\n                };\r\n                if (this.enableSecurityControl) {\r\n                    requestParam.securityControl = true;\r\n                    requestParam.securityLevel = this.securityLevel;\r\n                }\r\n                this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                    this.favoritesComponent.userInShownOrg = userData ? userData.data : [];\r\n                    this.favoritesComponent.assembleData();\r\n                });\r\n            } else {\r\n                this.favoritesComponent.assembleData();\r\n            }\r\n        } else if (e.nextId === this.groupTabId) {\r\n            this.groupComponent.selections = _.cloneDeep(this.selections);\r\n            if(!!this.shownOrgId && this.shownOrgId != '*' && !this.groupComponent.userInShownOrg.length) {\r\n                const requestParam: PersonnelRequestParam = {\r\n                    withAllOrg: this._onlyCurrentOrg ? 0 : 1,\r\n                    notGetStopUser: !this.includeStopUser,\r\n                    notGetCurrentUser: false,\r\n                    orderField: this.personnelOrderField,\r\n                    userTypeMode: this.userTypeMode\r\n                };\r\n                if (this.enableSecurityControl) {\r\n                    requestParam.securityControl = true;\r\n                    requestParam.securityLevel = this.securityLevel;\r\n                }\r\n                this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.shownOrgId, requestParam).subscribe((userData: any) => {\r\n                    this.groupComponent.userInShownOrg = userData ? userData.data : [];\r\n                    this.groupComponent.assembleData();\r\n                });\r\n            } else {\r\n                this.groupComponent.assembleData();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * input框标签删除逻辑 todo 强依赖用户编号唯一\r\n     * @param id 该条数据\r\n     */\r\n    onRemoveSelectItem(item: string) {\r\n        const currentIndex = this.finalText.findIndex(text => text === item);\r\n        this.finalText.splice(currentIndex, 1);\r\n        let currentItem: any;\r\n        this.selections.forEach((selection, index) => {\r\n            if (index === currentIndex) {\r\n                currentItem = selection;\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.cloneSelections = _.cloneDeep(this.selections);\r\n\r\n        this.componentMap.forEach((component, key, map) => {\r\n            component.selections = _.cloneDeep(this.selections);\r\n            component.cloneSelections = _.cloneDeep(this.selections);\r\n            component.userIds = '';\r\n            component.cloneUserIds = '';\r\n            if (!!currentItem) {\r\n                component.cancelSelections({ id: currentItem[this.idField] });\r\n            }\r\n        });\r\n\r\n        // 关联或udt先出非主键的\r\n        this.onModelChange(this.finalText.join());\r\n        this.onModelTouched(this.finalText.join());\r\n\r\n        this.tagRemoved.emit({\r\n            deleteItem: item,\r\n            deleteIndex: currentIndex,\r\n            selections: this.selections\r\n        });\r\n\r\n        if (this.enableQuick) {\r\n            this.setQuickContainerWidth();\r\n        }\r\n    }\r\n\r\n    // viewType为tag时，组件文本框内删除按钮的显示逻辑\r\n    mouseoverBut() {\r\n        if (!this.readonly && ((this.finalText && this.finalText.length > 0) || (this.quickInput && this.quickInput.length > 0))) {\r\n            document.getElementById(this.clearButid).style.visibility = 'visible';\r\n        }\r\n    }\r\n    // viewType为tag时，组件文本框内删除按钮的隐藏逻辑\r\n    mouseoutBut() {\r\n        if (!this.readonly && ((this.finalText && this.finalText.length > 0) || (this.quickInput && this.quickInput.length > 0))) {\r\n            document.getElementById(this.clearButid).style.visibility = 'hidden';\r\n        }\r\n    }\r\n\r\n    onClosedFarrisDialog(e: any) {\r\n        this.dialogClosed.emit(e);\r\n    }\r\n\r\n    showQuickSelectPanel() {\r\n        if(!this.hasSetGlobalConfigParam && this.mapFields) {\r\n            const helpFields = Object.keys(this.mapFields);\r\n            if(helpFields.includes(this.idField) && this.ngControl &&\r\n               this.ngControl.formDirective &&\r\n               this.ngControl.formDirective.form &&\r\n               this.ngControl.formDirective.form.bindingData) {\r\n                const bindingData = this.ngControl.formDirective.form.bindingData;\r\n                if (bindingData.setValue) {\r\n                    const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n                    let pathArr: string[] = [];\r\n                    if (bindingPath) {\r\n                        pathArr = bindingPath.split('/').filter(n => n !== '');\r\n                    }\r\n                    const multiPath = this.mapFields[this.idField].split(this.multipleChoiceSeparator);\r\n                    const fieldPaths = pathArr.concat(multiPath[0].split('.'));\r\n                    const ids = bindingData.getValue(fieldPaths);\r\n                    this.checkedIdsForQuickSelect = !!ids ? ids.split(',').slice() : [];\r\n                }\r\n            }\r\n        } else if(!this.hasSetGlobalConfigParam && this.userIds) {\r\n            this.checkedIdsForQuickSelect = this.userIds.split(',').slice();\r\n        }\r\n        this.quickPanelVisible = true;\r\n    }\r\n\r\n    // 打开人员选择弹窗\r\n    farrisDialogshow() {\r\n        if ((!!this.userIds && this.userIds.includes(',') && !this.multiSelect) || (this.selections.length > 1 && !this.multiSelect)) {\r\n            this.msgService.show('warning', this.localeService.getValue(\"personnelSelector.message.multiSelect\"), {\r\n                height: 140,\r\n                showHeader: false\r\n            });\r\n            return;\r\n        }\r\n        if(!this.hasSetGlobalConfigParam) {\r\n            const getGlobalParam$ = this.apiService.getGlobalParamConfig(this.personnelParamUrl);\r\n            const getUserPositionInfoResult$ = this.apiService.getUserPositionInfo(this.personnelParamUrl);\r\n            getGlobalParam$.pipe(\r\n                switchMap((res: any) => {\r\n                    res['success'] && this.setGlobalConfigParam(res);\r\n                    this.hasSetGlobalConfigParam = true;\r\n                    return getUserPositionInfoResult$.pipe(\r\n                        tap((positionIds: string[]) => {\r\n                            if(this.withPermission) {\r\n                                if (!positionIds || (Array.isArray(positionIds) && (positionIds.length == 0 || positionIds.toString() == 'admin'))) {\r\n                                    this.withPermission = false;\r\n                                    if (this.mapFields) {\r\n                                        this.mapFields2Component();\r\n                                    } else {\r\n                                        if (this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                                            this.showPersonnelSelectorDialogInWf();\r\n                                        } else {\r\n                                            this.showPersonnelSelectorDialog();\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    this.getPositionAssignResult(positionIds);\r\n                                }\r\n                            } else {\r\n                                if (this.mapFields) {\r\n                                    this.mapFields2Component();\r\n                                } else {\r\n                                    if (this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                                        this.showPersonnelSelectorDialogInWf();\r\n                                    } else {\r\n                                        this.showPersonnelSelectorDialog();\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                    )\r\n                }),\r\n                tap(\r\n                    () => {\r\n                        \r\n                    },\r\n                    (error) => {\r\n                        \r\n                    }\r\n                )\r\n            ).subscribe();\r\n        } else {\r\n            if (this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                this.showPersonnelSelectorDialogInWf();\r\n            } else {\r\n                this.showPersonnelSelectorDialog();\r\n            }\r\n        }\r\n    }\r\n\r\n    //工作流需要在原生js页面中打开人员选择弹窗 2022.3.19\r\n    farrisDialogShowInWf() {\r\n        // if ((!!this.userIds && this.userIds.includes(',') && !this.multiSelect) || (this.selections.length > 1 && !this.multiSelect)) {\r\n        //     this.msgService.show('warning', this.localeService.getValue(\"personnelSelector.message.multiSelect\"), {\r\n        //         height: 140,\r\n        //         showHeader: false\r\n        //     });\r\n        //     return;\r\n        // }\r\n        // if(!this.hasSetGlobalConfigParam) {\r\n        //     const requestUrl = '/api/runtime/sys/v1.0/personnel-selector-param';\r\n        //     this.apiService.getGlobalParamConfig(requestUrl).subscribe((res: any) => {\r\n        //         if(res) {\r\n        //             res['success'] && this.setGlobalConfigParam(res);\r\n        //             this.hasSetGlobalConfigParam = true;\r\n        //             if(this.mapFields) {\r\n        //                 this.mapFields2Component();\r\n        //             } else {\r\n        //                 this.showPersonnelSelectorDialogInWf();\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // } else {\r\n        //     this.showPersonnelSelectorDialogInWf();\r\n        // }\r\n        this.farrisDialogshow();\r\n    }\r\n\r\n    private showPersonnelSelectorDialog() {\r\n        this.checkDisplayTab();\r\n        //this.setInputGroupElementWith();\r\n        this.cdRef.detectChanges();\r\n        this.quickPanelVisible = false;\r\n        this.searchText = null;\r\n        this.hideSearchPanel = true; \r\n        this.locationOrgText = null;\r\n        this.initComponentMap();\r\n        this.setParamInChildComponent();\r\n        this.checkSelectionsIncludeCode();\r\n        if (this.initLoadTreeData === true) {\r\n            // 初始化是否过滤领导\r\n            this.initGroupLeaderStatus();\r\n            // 初始化是否显示指定组织\r\n            if (!!this.orgId && this.orgId !== '*') {\r\n                this.globalSearch = false;\r\n            }\r\n            if (this.unSelectDatagrid) {\r\n                this.unSelectDatagrid.cdRef = this.injector.get(ChangeDetectorRef);\r\n            }\r\n            if(this.sysUserGroupUnselect) {\r\n                this.sysUserGroupUnselect.cdRef = this.injector.get(ChangeDetectorRef);\r\n            }\r\n            // 是否分层加载\r\n            if (this.enableHierarchicalLoading) {\r\n                this.showTabIds.includes(this.organizationTabId) && this.hlAssembleTreeData();\r\n                this.showTabIds.includes(this.sysUserGroupTabId) && this.hlAssembleSysUserGroupTreeData();\r\n            } else {\r\n                this.showTabIds.includes(this.organizationTabId) && this.assembleTreeData();\r\n                this.showTabIds.includes(this.sysUserGroupTabId) && this.assembleSysUserGroupTreeData();\r\n            }\r\n            if(this.activeTabId !== this.organizationTabId && this.activeTabId !== this.sysUserGroupTabId) {\r\n                // 初次打开选人组件时，当前tab页不为组织架构或者用户分组，也需要加载人员数据\r\n                this.initFavorites();\r\n                this.datagridLoad();\r\n            }\r\n        } else {\r\n            this.initFavorites();\r\n            this.datagridLoad();\r\n        }\r\n        this.initLoadTreeData = false;\r\n        this.adjustModalDialogSize();\r\n        this.farrisDialog.show();\r\n    }\r\n\r\n    private showPersonnelSelectorDialogInWf() {\r\n        this.checkDisplayTab();\r\n        //this.setInputGroupElementWith();\r\n        this.cdRef.detectChanges();\r\n        setTimeout(() => {\r\n            this.quickPanelVisible = false;\r\n            this.candidateDatagrid.assembleData();\r\n            this.searchText = null;\r\n            this.hideSearchPanel = true;\r\n            this.locationOrgText = null;\r\n            this.initComponentMap();\r\n            this.setParamInChildComponent();\r\n            this.checkSelectionsIncludeCode();\r\n            this.adjustModalDialogSize();\r\n            this.farrisDialog.show();\r\n        }, 500);\r\n    }\r\n\r\n    // 关闭人员选择弹窗时被调用\r\n    farrisDialogbeforeClose = () => {\r\n        if (!this.confirmToken) {\r\n            this.selections = _.cloneDeep(this.cloneSelections);\r\n            this.componentMap.forEach(component => {\r\n                component.cloneSelections = _.cloneDeep(this.selections);\r\n                component.restoreSelections();\r\n            });\r\n        } else {\r\n            this.componentMap.forEach(component => {\r\n                component.cloneSelections = _.cloneDeep(this.selections);\r\n                component.cloneUserIds = '';\r\n                component.userIds = '';\r\n            });\r\n        }\r\n        this.confirmToken = false;\r\n        const loadingInfo = document.querySelector('#irame-personnel-modalloading');\r\n        if(loadingInfo) {\r\n            loadingInfo.innerHTML = '关闭中，请稍候。。。';\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // 同步各个子组件的已选人员\r\n    private synchronizeSelections() {\r\n        if (this.unSelectDatagrid) {\r\n            this.unSelectDatagrid.selections = _.cloneDeep(this.selections);\r\n            this.unSelectDatagrid.cloneSelections = _.cloneDeep(this.selections);\r\n            this.unSelectDatagrid.userIds = this.userIds;\r\n            this.unSelectDatagrid.cloneUserIds = this.userIds;\r\n        }\r\n        if(this.sysUserGroupUnselect) {\r\n            this.sysUserGroupUnselect.selections = _.cloneDeep(this.selections);\r\n            this.sysUserGroupUnselect.cloneSelections = _.cloneDeep(this.selections);\r\n            this.sysUserGroupUnselect.userIds = this.userIds;\r\n            this.sysUserGroupUnselect.cloneUserIds = this.userIds;\r\n        }\r\n        if (this.candidateDatagrid) {\r\n            this.candidateDatagrid.selections = _.cloneDeep(this.selections);\r\n            this.candidateDatagrid.cloneSelections = _.cloneDeep(this.selections);\r\n            this.candidateDatagrid.userIds = this.userIds;\r\n            this.candidateDatagrid.cloneUserIds = this.userIds;\r\n        }\r\n        if (this.recentContactsComponent) {\r\n            this.recentContactsComponent.selections = _.cloneDeep(this.selections);\r\n            this.recentContactsComponent.cloneSelections = _.cloneDeep(this.selections);\r\n            this.recentContactsComponent.userIds = this.userIds;\r\n            this.recentContactsComponent.cloneUserIds = this.userIds;\r\n        }\r\n        if (this.favoritesComponent) {\r\n            this.favoritesComponent.selections = _.cloneDeep(this.selections);\r\n            this.favoritesComponent.cloneSelections = _.cloneDeep(this.selections);\r\n            this.favoritesComponent.userIds = this.userIds;\r\n            this.favoritesComponent.cloneUserIds = this.userIds;\r\n        }\r\n        if (this.groupComponent) {\r\n            this.groupComponent.selections = _.cloneDeep(this.selections);\r\n            this.groupComponent.cloneSelections = _.cloneDeep(this.selections);\r\n            this.groupComponent.userIds = this.userIds;\r\n            this.groupComponent.cloneUserIds = this.userIds;\r\n        }\r\n\r\n        // 如果表单映射会组件，则不需要重新组装finalText\r\n        if (!this.mapFields) {\r\n            this.assembleFinalText();\r\n        }\r\n    }\r\n\r\n    // 根据传入的userIds获取期望已选的人员数据，并同步至当前组件和各个子组件\r\n    // 被调用之处：ngOnChanges()、mapFields2Component()\r\n    private assembleDataByUserId(ids: string, canShowDialog: boolean = true) {\r\n        if (!ids) {\r\n            if(!!this.mapFields){\r\n                this.selections = [];\r\n                this.selections = this.selections.slice();\r\n                this.cloneSelections = _.cloneDeep(this.selections);\r\n            }\r\n            this.synchronizeSelections();\r\n            if(this.hasSetGlobalConfigParam && canShowDialog) {\r\n                if(this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                    this.showPersonnelSelectorDialogInWf();\r\n                } else {\r\n                    this.showPersonnelSelectorDialog();\r\n                }\r\n            }\r\n        } else {\r\n            const searchParam: SearchUserByIdRequestParam = { ids, \r\n                absOrgType: this.absOrgType,\r\n                securityControl: this.enableSecurityControl,\r\n                securityLevel: this.securityLevel\r\n            };\r\n            this.apiService.getPersonnelByUserIds(this.absUserOrgUrl, searchParam).subscribe((result: any[]) => {\r\n                if(!!this.mapFields) {\r\n                    this.selections = [];\r\n                }\r\n                result.forEach(res => {\r\n                    if (!this._isInArray(res[this.idField], this.idField, this.selections)) {\r\n                        res.displayName = !!this.showUserCode ? ('[' + res.code + ']' + res.name) : res.name;\r\n                        if(this.showOrgAllPathByDesc && res.orgAllPath) {\r\n                            res.orgAllPath = this.changeDisplayOrgAllPath(res.orgAllPath);\r\n                        }\r\n                        this.selections.push(res);\r\n                    }\r\n                });\r\n                this.selections = this.selections.slice();\r\n                this.selectionList = this.selections.slice();\r\n                this.cloneSelections = _.cloneDeep(this.selections);\r\n                this.synchronizeSelections();\r\n                if(this.hasSetGlobalConfigParam && canShowDialog) {\r\n                    if(this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                        this.showPersonnelSelectorDialogInWf();\r\n                    } else {\r\n                        this.showPersonnelSelectorDialog();\r\n                    }                \r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // 处理字段映射，打开人员选择弹窗时被调用\r\n    private mapFields2Component() {\r\n        if(!this.mapFields) {\r\n            return;\r\n        }\r\n        const helpFields = Object.keys(this.mapFields);\r\n        if (!helpFields.includes(this.idField)) {\r\n            this.notifyService.warning(this.localeService.getValue(\"personnelSelector.message.mapFields\"));\r\n            this.assembleDataByUserId('');\r\n        } else {\r\n            if (\r\n                this.ngControl &&\r\n                this.ngControl.formDirective &&\r\n                this.ngControl.formDirective.form &&\r\n                this.ngControl.formDirective.form.bindingData\r\n            ) {\r\n                const bindingData = this.ngControl.formDirective.form.bindingData;\r\n                if (bindingData.setValue) {\r\n                    const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n                    let pathArr: string[] = [];\r\n                    if (bindingPath) {\r\n                        pathArr = bindingPath.split('/').filter(n => n !== '');\r\n                    }\r\n                    const multiPath = this.mapFields[this.idField].split(this.multipleChoiceSeparator);\r\n                    const fieldPaths = pathArr.concat(multiPath[0].split('.'));\r\n                    const ids = bindingData.getValue(fieldPaths);\r\n                    this.assembleDataByUserId(ids);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 关闭人员选择弹窗，目前仅快捷模式下被调用 2022.4.6\r\n    farrisDialogclose() {\r\n        this.farrisDialog.close();\r\n    }\r\n\r\n    // 筛选框弹出，是否过滤领导场景使用\r\n    dialogFiltershow() {\r\n        if(this.selectTabs.activeId == this.organizationTabId && this.filterPosition) {\r\n            this.filterPositionData = this.unSelectDatagrid.filterPositionArr;\r\n            this.isFilterPositionDataEmpty = this.unSelectDatagrid.isEmptyFilterPosition;\r\n            this.filterPositionPlaceHolder = this.isFilterPositionDataEmpty ? this.localeService.getValue(\"personnelSelector.filter.noOrgData\")\r\n                                                : this.localeService.getValue(\"personnelSelector.filter.selectPlaceHolder\");\r\n        }\r\n        if(this.selectTabs.activeId == this.sysUserGroupTabId && this.showOrgFilterIcon) {\r\n            this.filterOrgData = this.sysUserGroupUnselect.filterOrgArr;\r\n            this.isFilterOrgDataEmpty = this.sysUserGroupUnselect.isEmptyFilterOrg;\r\n            this.filterOrgPlaceHolder = this.isFilterOrgDataEmpty ? this.localeService.getValue(\"personnelSelector.filter.noOrgData\")\r\n                                            : this.localeService.getValue(\"personnelSelector.filter.selectPlaceHolder\");\r\n        }\r\n        this.dialogFilter.show();\r\n    }\r\n\r\n    // 筛选框关闭，是否过滤领导场景使用\r\n    dialogFilterclose(token: boolean) {\r\n        this.dialogFilter.close();\r\n        if(this.selectTabs.activeId == this.organizationTabId) {\r\n            if (token) {\r\n                if(this.showGroupLeader) {\r\n                    const oldGroupLeaderStatus = this.pIncludeGroupLeader ? '1' : '2';\r\n                    this.pIncludeGroupLeader = this.includeGroupLeader;\r\n                    const currentGroupLeaderStatus = this.pIncludeGroupLeader ? '1' : '2';\r\n                    const param = {\r\n                        absOrgType: this.absOrgType,\r\n                        bizId: this.filterId,\r\n                        objectValue: 'FilterUser',\r\n                        deleteList: [oldGroupLeaderStatus],\r\n                        addList: [currentGroupLeaderStatus]\r\n                    }\r\n                    this.apiService.filterGroupLeader(param).subscribe(() => {\r\n                        this.changeisExclude();\r\n                    });\r\n                } else {\r\n                    this.unSelectDatagrid.assembleDataByOrgId();\r\n                }\r\n            } else {\r\n                if(this.showGroupLeader) {\r\n                    this.includeGroupLeader = this.pIncludeGroupLeader;\r\n                }\r\n            }\r\n        } else if(this.selectTabs.activeId == this.sysUserGroupTabId) {\r\n            if(token) {\r\n                this.sysUserGroupUnselect.assembleDataByUserGroupId();\r\n            }\r\n        }\r\n    }\r\n\r\n    setShowLeaderStatus(checkStatus: boolean) {\r\n        this.includeGroupLeader = checkStatus;\r\n    }\r\n\r\n    // 拖动事件，暂时关闭入口 2022.4.6\r\n    drop(event: CdkDragDrop<string[]>) {\r\n        //console.log('列表排序：', event, this.selections);\r\n        moveItemInArray(this.selections, event.previousIndex, event.currentIndex);\r\n    }\r\n\r\n    // 快捷模式下被调用\r\n    togglePanelMode(e: PanelMode) {\r\n        if (e.showAdvancedMode) {\r\n            this.farrisDialogshow();\r\n        } else {\r\n            this.farrisDialogclose();\r\n        }\r\n        setTimeout(() => {\r\n            this.quickPanelVisible = e.showQuickMode;\r\n        });\r\n    }\r\n\r\n    // 根据allTabIds属性的值，依次确认各tab页是否显示\r\n    private checkDisplayTab() {\r\n        if(this.allTabIds && this.allTabIds !== '') {\r\n            this.showOrganizationTab = !(this.allTabIds.indexOf(this.organizationTabId) == -1);\r\n            this.showSysUserGroupTab = !(this.allTabIds.indexOf(this.sysUserGroupTabId) == -1);\r\n            this.showCandidateTab = !(this.allTabIds.indexOf(this.candidateTabId) == -1);\r\n            this.showRecentTab = !(this.allTabIds.indexOf(this.recentTabId) == -1);\r\n            this.showFavoritesTab = !(this.allTabIds.indexOf(this.favoritesTabId) == -1);\r\n            if(this.allTabIds.includes(this.groupTabId) && this.checkGroupExtend()) {\r\n                this.showGroupTab = true;\r\n                // 启用群组功能扩展函数\r\n                const ccwork = window.top.document.createElement(\"script\");\r\n                ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();\r\n                window.document.head.appendChild(ccwork);\r\n            } else {\r\n                this.showGroupTab = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 搜索人员并添加后，关闭搜索页时触发，将更新当前tab页内被添加人员的勾选状态\r\n    private updateStatusAfterClosePanel(tabId: string) {\r\n        if (tabId === this.organizationTabId) {\r\n            this.unSelectDatagrid.selections = _.cloneDeep(this.selections);\r\n            this.unSelectDatagrid.unSelectedListLoad();\r\n        } else if(tabId === this.sysUserGroupTabId) {\r\n            this.sysUserGroupUnselect.selections = _.cloneDeep(this.selections);\r\n            this.sysUserGroupUnselect.unSelectedListLoad();\r\n        } else if (tabId === this.candidateTabId) {\r\n            this.candidateDatagrid.selections = _.cloneDeep(this.selections);\r\n            this.candidateDatagrid.unSelectedListLoad();\r\n        } else if (tabId === this.recentTabId) {\r\n            this.recentContactsComponent.selections = _.cloneDeep(this.selections);\r\n            this.recentContactsComponent.loadRecentContactsList();\r\n        } else if (tabId === this.favoritesTabId) {\r\n            this.favoritesComponent.selections = _.cloneDeep(this.selections);\r\n            this.favoritesComponent.loadFavoritesList();\r\n        } else if (tabId === this.groupTabId) {\r\n            this.groupComponent.selections = _.cloneDeep(this.selections);\r\n            this.groupComponent.loadGroupList();\r\n        }\r\n    }\r\n\r\n    // 分层加载用户分组树时，需要二次处理接口返回的数据，只保留当前节点和它的直接上级，剔除上级的同级\r\n    private getFilterSysUserGroupData(array: any[], node: any, resArray: any[]){\r\n        const parents = array.filter(item => {\r\n            return Number(item.layer) === (Number(node.layer) - 1);\r\n        });\r\n        if (!parents) {\r\n            return;\r\n        }\r\n        for (const item of parents) {\r\n            if (item.id === node.parentId || node.parentId === '') {\r\n                item.selectable = false;\r\n                resArray.push(item);\r\n                this.getFilterSysUserGroupData(array, item, resArray);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 打开人员选择弹窗前调整dialog的大小，解决bug: 461143\r\n    private adjustModalDialogSize() {\r\n        let dialogElement = null;\r\n        if(this.isOnTop){\r\n            dialogElement = top.document.querySelector('#' + this.dialogId);\r\n        }else {\r\n            dialogElement = document.querySelector('#' + this.dialogId);\r\n        }\r\n        let targetElement = null;\r\n        if (!!dialogElement) {\r\n            targetElement = dialogElement.querySelector('.modal-dialog');\r\n        }\r\n\r\n        if (!!targetElement) {\r\n            let height = window.innerHeight;\r\n            if(top.window['gspframeworkService']) {\r\n                height = height - 60;\r\n                if (height > 680) {\r\n                    height = 680;\r\n                }\r\n            }\r\n            let width = parseInt(window.getComputedStyle(this.farrisDialog['_dialogEl']).getPropertyValue('width').replace('px', ''), 10);\r\n            this.dialogHeight = height;\r\n            this.farrisDialog.height = height;\r\n            this.farrisDialog.width = width;\r\n            // const innerHeight = height + 'px';\r\n            // const marginTop = '-' + height / 2 + 'px';\r\n            // this.render.setStyle(targetElement, 'height', innerHeight);\r\n            // this.render.setStyle(targetElement, 'margin-top', marginTop);\r\n            // this.render.setStyle(targetElement, 'transform', 'translate3d(0px, 0px, 0px)');\r\n        }\r\n    }\r\n\r\n    // 组织树全加载的情形下会被调用\r\n    private confirmSearchOrg(): any[] {\r\n        let resultArray: any[] = [];\r\n        if (!!this.shownOrgId && this.shownOrgId !== '*') {\r\n            if(this._onlyCurrentOrg) {\r\n                const filterOrg = this.customTreeData.filter(it => it.name.includes(this.locationOrgText));\r\n                if(filterOrg.length) {\r\n                    const targetOrg = filterOrg.find(org => org[this.orgIdField] == this.shownOrgId);\r\n                    if(targetOrg) {\r\n                        resultArray = [targetOrg];\r\n                    } else {\r\n                        this.showUnSelectableInfo = true;\r\n                    }\r\n                }\r\n                return resultArray;\r\n            } else {\r\n                const pathList: any[] = [];\r\n                this.customTreeData.forEach(data => {\r\n                    if(data['orgId'] == this.shownOrgId) {\r\n                        this.shownOrgPath = data.path;\r\n                        for(let a = 0; a < (this.shownOrgPath.length / 4 - 1); a++) {\r\n                            pathList.push({ path: this.shownOrgPath.substring(0, 4 * (a + 1)) });\r\n                        }\r\n                    }\r\n                });\r\n                this.customTreeData.forEach(data => {\r\n                    if(data.name.indexOf(this.locationOrgText) !== -1) {\r\n                        if(data.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath) {\r\n                            resultArray.push(data);\r\n                        } else if(this._isInArray(data['path'], 'path', pathList)) {\r\n                            this.showUnSelectableInfo = true;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            resultArray = this.originalTreeData.data.filter(item => item.name.indexOf(this.locationOrgText) !== -1);\r\n        }\r\n        return resultArray;\r\n    } \r\n\r\n    // 组织树分层加载的情形下会被调用\r\n    private hlConfirmSearchOrg(orgArray: any[]): any[] {\r\n        let resultArray: any[] = [];\r\n        const pathList: any[] = [];\r\n        this.originalTreeData.data.forEach(data => {\r\n            if(data['orgId'] == this.shownOrgId) {\r\n                this.shownOrgPath = data.path;\r\n                for(let a = 0; a < (this.shownOrgPath.length / 4 - 1); a++) {\r\n                    pathList.push(this.shownOrgPath.substring(0, 4 * (a + 1)));\r\n                }\r\n            }\r\n        });\r\n        if(this._onlyCurrentOrg) {\r\n            const targetData = orgArray.find(org => org[this.orgIdField] == this.shownOrgId);\r\n            resultArray = targetData ? [targetData] : [];\r\n            if(!resultArray.length) {\r\n                this.showUnSelectableInfo = orgArray.some(it => pathList.includes(it.path) ||\r\n                    it.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath);\r\n            }\r\n            return resultArray;\r\n        } else {\r\n            orgArray.forEach(item => {\r\n                if(item.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath) {\r\n                    resultArray.push(item);\r\n                } else if(pathList.includes(item.path)) {\r\n                    this.showUnSelectableInfo = true;\r\n                }\r\n            });\r\n            return resultArray;\r\n        }\r\n    }\r\n    \r\n    // 设置全局配置属性\r\n    private setGlobalConfigParam(param: any) {\r\n        if(this.userTypeMode == 'WfMode') {\r\n            if(param.hasOwnProperty('enableHierarchicalLoading') && this.enableHierarchicalLoading !== param['enableHierarchicalLoading']) {\r\n                this.enableHierarchicalLoading = param['enableHierarchicalLoading'];\r\n            }\r\n            if(param.hasOwnProperty('showUserCode') && this.showUserCode !== param['showUserCode']) {\r\n                this.showUserCode = param['showUserCode'];\r\n            }\r\n        }\r\n        \r\n        if(this.busNum == 'MsgCenter') {\r\n            if(param.hasOwnProperty('showPageList')) {\r\n                this.showPageList = param['showPageList'];\r\n            }\r\n            if(param.hasOwnProperty('maxPageSize')) {\r\n                if(param['maxPageSize'] !== 'please check error') {\r\n                    this.maxPageSizeIndex = this.pageSizeArr.indexOf(param['maxPageSize']);\r\n                } else {\r\n                    this.maxPageSizeIndex = 0;\r\n                }\r\n            }\r\n        }\r\n        // 是否倒序展示组织全路径\r\n        if(param.hasOwnProperty('showOrgAllPathByDesc') && this.showOrgAllPathByDesc !== param['showOrgAllPathByDesc']) {\r\n            this.showOrgAllPathByDesc = param['showOrgAllPathByDesc'];\r\n        }\r\n        // 是否启用权限控制\r\n        if(this.withPermission && param.hasOwnProperty('withPermission') && this.withPermission !== param['withPermission']) {\r\n            this.withPermission = param['withPermission'];\r\n        }\r\n    }\r\n\r\n    // 在子组件内设置全局配置属性\r\n    private setParamInChildComponent() {\r\n        if(!!this.searchResultComponent) {\r\n            this.searchResultComponent.showUserCode = this.showUserCode;\r\n        }\r\n        this.componentMap.forEach(component => {\r\n            component['showUserCode'] = this.showUserCode;\r\n            if(component['pageList']) {\r\n                if(this.maxPageSizeIndex > -1 && component['pageList']['length'] > (this.maxPageSizeIndex + 3)) {\r\n                    component['pageList'] = component['pageList']['slice'](0, -1 * (component['pageList']['length'] - (this.maxPageSizeIndex + 3)));\r\n                }\r\n            }\r\n            if(component['cdRef']) {\r\n                component['cdRef']['detectChanges']();\r\n            }\r\n        });\r\n    }\r\n\r\n    private checkSelectionsIncludeCode() {\r\n        if(this.selections.length > 0) {\r\n            this.selections.forEach((item: any) => {\r\n                item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            });\r\n            this.selections = this.selections.slice();\r\n            this.cloneSelections = _.cloneDeep(this.selections);\r\n            this.synchronizeSelections();\r\n        }\r\n    }\r\n\r\n    // 组织架构（用户分组）页面，筛选框内下拉列表清空事件\r\n    clearFilterSelectionsHandle() {\r\n        if(this.selectTabs.activeId == this.organizationTabId) {\r\n            this.unSelectDatagrid.filterPositionId = null;\r\n        } else {\r\n            this.sysUserGroupUnselect.filterOrgId = null;\r\n        }\r\n    }\r\n\r\n    // 组织架构（用户分组）页面，筛选框内下拉列表隐藏事件\r\n    hideFilterDataPanelHandle(e: any) {\r\n        if(this.selectTabs.activeId == this.organizationTabId) {\r\n            this.unSelectDatagrid.filterPositionId = e.selectedValues;\r\n        } else {\r\n            this.sysUserGroupUnselect.filterOrgId = e.selectedValues;\r\n        }\r\n    }\r\n\r\n    // 用户分组页面，组织筛选框内点击清空已选执行的事件\r\n    clearAllFilterSelections() {\r\n        this.orgFilterComboList.onClear();\r\n    }\r\n\r\n    // 初始化多语相关文本资源项\r\n    private initLocaleItems() {\r\n        this.validElementsInfo = this.localeService.getValue(\"personnelSelector.message.vaildElements\");\r\n        this.groupExtendInfo = this.localeService.getValue(\"personnelSelector.message.groupExtend\");\r\n        this.filterPositionErrorInfo = this.localeService.getValue(\"personnelSelector.message.filterPositionError\");\r\n        this.presetFilterOrgInfo = this.localeService.getValue(\"personnelSelector.message.noneFilterOrgs\");\r\n        this.filterOrgInfo = this.localeService.getValue(\"personnelSelector.message.filterOrgs\");\r\n        this.filterOrgErrorInfo = this.localeService.getValue(\"personnelSelector.message.filterOrgError\");\r\n    }\r\n\r\n    // 通过XMLHttpRequest判断环境中有无选人群组扩展脚本\r\n    private checkGroupExtend(): boolean {\r\n        const groupUrl = BasePathService.convertPath('/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend.js');\r\n        if (groupUrl && groupUrl != this.groupExtendUrl) {\r\n            this.groupExtendUrl = BasePathService.convertPath(this.groupExtendUrl);\r\n        }\r\n        if (!this.xmlhttp && window['XMLHttpRequest']) {\r\n            this.xmlhttp = new XMLHttpRequest();\r\n            this.xmlhttp.open(\"GET\", this.groupExtendUrl, false);\r\n            this.xmlhttp.send();\r\n        }\r\n        return this.xmlhttp.status === 200 ? true : false;\r\n    }\r\n\r\n    // 组织树加载完成后事件\r\n    loadedOrgTree(e: any) {\r\n        if(this.selectTabs.activeId == this.organizationTabId) {\r\n            this.selectOrgTreeNode();\r\n        }\r\n    }\r\n\r\n    // 用户分组树加载完成后事件\r\n    loadedUserGrouptree(e: any) {\r\n        if(this.selectTabs.activeId == this.sysUserGroupTabId) {\r\n            this.selectUserGroupTreeNode();\r\n        }\r\n    }\r\n\r\n    // 弹出选人窗口或者切换至组织架构页签时判断树的选中节点\r\n    private selectOrgTreeNode() {\r\n        if(this.allTabIds.includes(this.organizationTabId) && this.treeListData && this.currentSelectOrgId && this.currentSelectOrgId !== '*') {\r\n            if (!this.farrisTree.selectedRow) {\r\n                if (this.orgTreeTimer) {\r\n                    clearTimeout(this.orgTreeTimer);\r\n                }\r\n                this.orgTreeTimer = setTimeout(() => {\r\n                    this.farrisTree.selectNode(this.currentSelectOrgId);\r\n                }, 300);\r\n            } else {\r\n                this.farrisTree.scrollToCurrentNode();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 弹出选人窗口或者切换至用户分组页签时判断树的选中节点\r\n    private selectUserGroupTreeNode() {\r\n        if(this.allTabIds.includes(this.sysUserGroupTabId) && this.sysUserGroupTreeListData) {\r\n            if (!this.sysUserGroupTree.selectedRow) {\r\n                if(!this.userGroupId || this.userGroupId === '*') {\r\n                    this.userGroupId = this.sysUserGroupTreeListData.length && this.sysUserGroupTreeListData[0].data.id;\r\n                }\r\n                if (this.empTreeTimer){\r\n                    clearTimeout(this.empTreeTimer);\r\n                }\r\n                this.empTreeTimer = setTimeout(() => {\r\n                    this.sysUserGroupTree.selectNode(this.userGroupId);\r\n                }, 300);\r\n            } else {\r\n                this.sysUserGroupTree.scrollToCurrentNode();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 将组织全路径倒序\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    // 根据用户岗位信息获取用户可管理范围 positionAssignResult\r\n    private getPositionAssignResult(positionIds: string[]) {\r\n        this.userMangeInfo = [];\r\n        let ergodicIndex = positionIds.length;\r\n        positionIds.forEach(positionId => {\r\n            const sysAssignQueryParam = {\r\n                ownerId: positionId,\r\n                authOpId: 'UserManage',\r\n                authorizationId: 'SysUser',\r\n                type: 'position'\r\n            };\r\n            const getSysAssignQuery$ = this.apiService.getAssignQueryResult(this.positionUserManageUrl, sysAssignQueryParam);\r\n            getSysAssignQuery$.pipe(\r\n                switchMap((res: any) => {\r\n                    if(res && Array.isArray(res) && res.length) {\r\n                        this.userMangeInfo.push(this.changeToUserManageAssignResult(JSON.parse(res[0]['result'])));\r\n                    }\r\n                    const getUserManageResult$ = this.apiService.getUserManageAssignResult(this.personnelParamUrl, this.userMangeInfo);\r\n                    return getUserManageResult$.pipe(\r\n                        tap((resData: any) => {\r\n                            if(resData && resData.length) {\r\n                                resData.forEach(item => {\r\n                                    if(item['fieldRuleResult'] && item['fieldRuleResult']['orgIds']) {\r\n                                        this.userManageResult.org.idList = this.userManageResult.org.idList.concat(item['fieldRuleResult']['orgIds'] || []);\r\n                                        this.userManageResult.org.pathList = this.userManageResult.org.pathList.concat(item['fieldRuleResult']['orgPathList'] || []);\r\n                                    }\r\n                                    if(item['fieldRuleResult'] && item['fieldRuleResult']['userGroupIds']) {\r\n                                        this.userManageResult.userGroup.idList = this.userManageResult.userGroup.idList.concat(item['fieldRuleResult']['userGroupIds'] || []);\r\n                                        this.userManageResult.userGroup.pathList = this.userManageResult.userGroup.pathList.concat(item['fieldRuleResult']['userGroupPathList'] || []);\r\n                                    }\r\n                                });\r\n                                // 组织可管理范围\r\n                                this.userManageResult.org.idList = Array.from(new Set(this.userManageResult.org.idList));\r\n                                this.userManageResult.org.pathList = Array.from(new Set(this.userManageResult.org.pathList));\r\n                                this.userManagePathResult.orgPathList = this.getUserManagePathResult(this.userManageResult.org.pathList);\r\n                                // 用户分组可管理范围\r\n                                this.userManageResult.userGroup.idList = Array.from(new Set(this.userManageResult.userGroup.idList));\r\n                                this.userManageResult.userGroup.pathList = Array.from(new Set(this.userManageResult.userGroup.pathList));\r\n                                this.userManagePathResult.userGroupPathList = this.getUserManagePathResult(this.userManageResult.userGroup.pathList);\r\n                            }\r\n                            ergodicIndex -= 1;\r\n                        })\r\n                    )\r\n                }),\r\n                tap(\r\n                    () => {\r\n                        if(ergodicIndex < 1) {\r\n                            if(this.mapFields) {\r\n                                this.mapFields2Component();\r\n                            } else {\r\n                                if(this.isOnTop && this.showTabIds == this.candidateTabId) {\r\n                                    this.showPersonnelSelectorDialogInWf();\r\n                                } else {\r\n                                    this.showPersonnelSelectorDialog();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                )\r\n            ).subscribe();\r\n        });                \r\n    }\r\n\r\n    // positionAssignResult -> userManageResult，方便后端接口处理\r\n    private changeToUserManageAssignResult(data: any) {\r\n        let result = Object.assign({} , {\r\n            id: data.current.id,\r\n            relation: data.current.relation,\r\n            type: data.current.type\r\n        });\r\n        if(data.current.hasOwnProperty('fieldCode')) {\r\n            result['fieldCode'] = data.current.fieldCode;\r\n        }\r\n        if(data.current.hasOwnProperty('fieldRule')) {\r\n            result['fieldRule'] = data.current.fieldRule;\r\n        }\r\n        if(data.current.hasOwnProperty('fieldValue')) {\r\n            result['fieldValue'] = data.current.fieldValue;\r\n        }\r\n        if(data.current.hasOwnProperty('fieldValueName')) {\r\n            result['fieldValueName'] = data.current.fieldValueName;\r\n        }\r\n        if(data.current.hasOwnProperty('fieldValueRule')) {\r\n            result['fieldValueRule'] = data.current.fieldValueRule;\r\n        }\r\n        if(data.current.hasOwnProperty('fieldValueType')) {\r\n            result['fieldValueType'] = data.current.fieldValueType;\r\n        }\r\n        if(data.children && data.children.length) {\r\n            result['children'] = [];\r\n            data.children.forEach(child => {\r\n                result['children'].push(this.changeToUserManageAssignResult(child));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // 获取完整pathList\r\n    private getUserManagePathResult(pathList: string[]): string[] {\r\n        let targetPathArray = [];\r\n        pathList.forEach(path => {\r\n            for(let i = 1; i <= path.length / 4; i++) {\r\n                targetPathArray.push(path.substring(0, 4 * i));\r\n            }\r\n        });\r\n        return Array.from(new Set(targetPathArray));\r\n    }\r\n\r\n}","// tslint:disable-next-line:max-line-length\r\nconst noDataImg = 'url(data:image/png;base64,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)';\r\n// tslint:disable-next-line:max-line-length\r\nconst defaultProfilePicture = 'data:image/png;base64,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';\r\n\r\n\r\n\r\nexport { noDataImg, defaultProfilePicture };\r\n","import { Component, Input, EventEmitter, Output, OnInit, AfterViewInit, SimpleChanges, OnChanges, ChangeDetectorRef, Optional, Injector } from '@angular/core';\r\nimport { ApiLocalService } from '../../utils/api-service';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { forkJoin, of } from 'rxjs';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { SecurityLevel, SearchUserByIdRequestParam } from '../../utils/user.type';\r\n\r\n@Component({\r\n    selector: 'lib-candidate',\r\n    templateUrl: './candidate.component.html',\r\n    styleUrls: ['./candidate.component.css'],\r\n})\r\nexport class CandidateComponent implements OnInit, AfterViewInit, OnChanges {\r\n\r\n    @Input() idField: string;\r\n    @Input() items = [];\r\n    @Input() absUserOrgUrl: any;\r\n    @Input() absOrgType: any;\r\n    @Input() multiSelect: any;\r\n    @Input() searchText: any;\r\n    @Input() unSelectedList = [];\r\n    @Input() userIds = '';\r\n    @Input() unSelectedUserIds = '';\r\n    @Input() type: any;\r\n    @Input() includeStopUser: boolean;\r\n    @Input() searchPage: boolean;\r\n    @Input() includeCurrentUser: boolean;\r\n    @Input() busNum: string;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() validElementsInfo: string;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() candidateItemsChange = new EventEmitter<any[]>();\r\n\r\n    private cdRef: ChangeDetectorRef\r\n    allChecked = false;\r\n    columns: any;\r\n    selections: any[] = [];\r\n\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n    itemsBackup = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    favoritesList = [];\r\n    //userInShownOrg = [];\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n\r\n    constructor(\r\n        private apiService: ApiLocalService,\r\n        private injector: Injector,\r\n        @Optional() private favoritesTool: FavoritesTool\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 10);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // 兼容老表单\r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                if (this.enableFavorites) {\r\n                    this.unSelectedListLoad();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n\r\n    }\r\n\r\n    assembleData() {\r\n        if (this.searchPage) {\r\n            this.searchByCodeOrName();\r\n        } else {\r\n            this.assembleDataByUserId(this.unSelectedUserIds).subscribe(rcRes => {\r\n                const rcResData = rcRes ? rcRes as any : [];\r\n                // if(this.userInShownOrg.length) {\r\n                //     this.unSelectedList = rcResData.filter(item => this.userInShownOrg.find(user => user.userId == item.userId));\r\n                // } else {\r\n                //     this.unSelectedList = rcResData;    \r\n                // }\r\n                this.unSelectedList = rcResData;\r\n                this.unSelectedListLoad();\r\n                this.candidateItemsChange.emit(this.unSelectedList);\r\n            });\r\n        }\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    searchByCodeOrName() {\r\n        this.items = this.items.filter(item => {\r\n            return item.code.indexOf(this.searchText) !== -1 || item.name.indexOf(this.searchText) !== -1;\r\n        });\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        // this.emitSelections();\r\n        this.toggleChecked();\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n    /**\r\n     * datagrid用于数据展示\r\n     */\r\n    unSelectedListLoad() {\r\n        this.items = [];\r\n        this.unSelectedList.forEach(res => {\r\n            // const indexId = Math.random().toString(16).substring(2);\r\n            // const item = {\r\n            //     abbreviation: res.abbreviation,\r\n            //     code: res.code,\r\n            //     defaultOrgId: res.defaultOrgId,\r\n            //     defaultOrgPath: res.defaultOrgPath,\r\n            //     ext1: res.ext1,\r\n            //     ext2: res.ext2,\r\n            //     fullPathName: res.fullPathName,\r\n            //     name: res.name,\r\n            //     orgTypeId: res.orgTypeId,\r\n            //     secLevel: res.secLevel,\r\n            //     sortOrder: res.sortOrder,\r\n            //     state: res.state,\r\n            //     su: res.su,\r\n            //     userId: res.userId,\r\n            //     orgAllPath: res.orgAllPath,\r\n            //     type: 'people',\r\n            //     checked: false,\r\n            //     inFavorites: false,\r\n            //     indexId\r\n            // };\r\n\r\n            const item = _.cloneDeep(res);\r\n            item.checked = false;\r\n            item.inFavorites = false;\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n\r\n            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            }\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if(this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n            this.items.push(item);\r\n            this.itemsBackup.push(item);\r\n        });\r\n        const tempSelections = _.cloneDeep(this.selections);\r\n        this.toggleChecked();\r\n        this.selections = _.cloneDeep(tempSelections);\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'candidate'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n\r\n    /**\r\n     * todo\r\n     */\r\n    assembleDataByUserId(ids: string, initLoad = false) {\r\n        if (!ids) {\r\n            return of([]);\r\n        }\r\n        const searchParam: SearchUserByIdRequestParam = { ids,\r\n            absOrgType: this.absOrgType,\r\n            securityControl: this.enableSecurityControl,\r\n            securityLevel: this.securityLevel,\r\n        }\r\n        return this.apiService.getPersonnelByUserIds(this.absUserOrgUrl, searchParam);\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, ChangeDetectorRef, Injector\r\n} from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\n\r\n@Component({\r\n    selector: 'lib-favorites',\r\n    templateUrl: './favorites.component.html',\r\n    styleUrls: ['./favorites.component.css']\r\n})\r\nexport class FavoritesComponent implements OnInit, AfterViewInit {\r\n\r\n    @Input() idField: string;\r\n    @Input() absOrgType: string;\r\n    @Input() absUserOrgUrl: string;\r\n    @Input() multiSelect: any;\r\n    @Input() searchText: any;\r\n    @Input() orgId = '';\r\n    @Input() userIds = '';\r\n    @Input() includeStopUser: boolean;\r\n    @Input() searchPage: boolean;\r\n    @Input() includeCurrentUser: boolean;\r\n    @Input() busNum: string;\r\n    @Input() validElementsInfo: string;\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() recentContactsChange = new EventEmitter<any>();\r\n\r\n    private cdRef: ChangeDetectorRef;\r\n    allChecked = false;\r\n    columns: any;\r\n    selections: any[] = [];\r\n\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    items = [];\r\n    favoritesList = [];\r\n    userInShownOrg = [];\r\n    private filterFavoritesList = [];\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n\r\n    constructor(\r\n        private notifyService: NotifyService,\r\n        private favoritesTool: FavoritesTool,\r\n        private injector: Injector\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 12);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.favoritesTool.favoritesSubject.subscribe(data => {\r\n            this.favoritesList = data;\r\n            this.loadFavoritesList();\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    // 不用搜索了，临时保留\r\n    assembleData() {\r\n        if (this.searchPage) {\r\n            this.searchByCodeOrName();\r\n        } else {\r\n            this.favoritesTool.getFavoritesList().subscribe((res: any) => {\r\n                const flResData = res ? res.data : [];\r\n                this.favoritesList = flResData;\r\n                this.loadFavoritesList();\r\n            }); \r\n        }\r\n    }\r\n\r\n    searchByCodeOrName() {\r\n        this.items = this.items.filter(item => {\r\n            return item.code.indexOf(this.searchText) !== -1 || item.name.indexOf(this.searchText) !== -1;\r\n        });\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        this.toggleChecked();\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.cdRef.detectChanges();\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.cdRef.detectChanges();\r\n        this.emitSelections();\r\n    }\r\n    /**\r\n     * 用于数据展示\r\n     */\r\n    loadFavoritesList() {\r\n        this.items = [];\r\n        if(this.userInShownOrg.length) {\r\n            this.filterFavoritesList = this.favoritesList.filter(item => this.userInShownOrg.find(user => user.userId == item.userId));\r\n        } else {\r\n            this.filterFavoritesList = this.favoritesList;\r\n        }\r\n        this.filterFavoritesList.forEach(res => {\r\n            // const indexId = Math.random().toString(16).substring(2);\r\n            // const item = {\r\n            //     abbreviation: res.abbreviation,\r\n            //     code: res.code,\r\n            //     defaultOrgId: res.defaultOrgId,\r\n            //     defaultOrgPath: res.defaultOrgPath,\r\n            //     ext1: res.ext1,\r\n            //     ext2: res.ext2,\r\n            //     fullPathName: res.fullPathName,\r\n            //     name: res.name,\r\n            //     orgTypeId: res.orgTypeId,\r\n            //     secLevel: res.secLevel,\r\n            //     sortOrder: res.sortOrder,\r\n            //     state: res.state,\r\n            //     su: res.su,\r\n            //     userId: res.userId,\r\n            //     orgAllPath: res.orgAllPath,\r\n            //     type: 'people',\r\n            //     checked: false,\r\n            //     inFavorites: false,\r\n            //     indexId\r\n            // };\r\n            const item = _.cloneDeep(res);\r\n            item.checked = false;\r\n            item.inFavorites = true;\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n\r\n            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if(this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n            this.items.push(item);\r\n        });\r\n        this.toggleChecked();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'recent'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    deleteFromFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     * 清空我的收藏\r\n     */\r\n    clearFavoritesList() {\r\n        this.favoritesTool.clearFavoritesList();\r\n        this.items = [];\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Inject, Input, OnInit, Optional, Output, ViewChild } from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { GROUP_SERVICE } from '../../utils/app.token';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { Group, GroupItem } from '../../utils/group.tool';\r\nimport { OrgPersonnelComponent } from '../tab-org-personnel/op.component';\r\nimport { DataLoadingService } from '../../utils/loading-service';\r\nimport { SecurityLevel } from '../../utils/user.type';\r\n\r\ndeclare const method: any;\r\n@Component({\r\n    selector: 'lib-group',\r\n    templateUrl: './group.component.html',\r\n    styleUrls: ['./group.component.css'],\r\n    // providers: [{\r\n    //     provide: GROUP_SERVICE,\r\n    //     useClass: GroupTool\r\n    // }]\r\n})\r\nexport class GroupComponent implements OnInit, AfterViewInit {\r\n\r\n    @ViewChild('groupPersonnels') groupPersonnelComponent: OrgPersonnelComponent;\r\n\r\n    @Input() idField = 'userId';\r\n    @Input() multiSelect: any;\r\n    @Input() absOrgType: string;\r\n    @Input() searchText: any;\r\n    @Input() orgId = '';\r\n    @Input() shownOrgId = '';\r\n    @Input() userIds = '';\r\n    @Input() includeStopUser: boolean;\r\n    @Input() searchPage: boolean;\r\n    @Input() includeCurrentUser: boolean;\r\n    @Input() busNum: string;\r\n    @Input() enableFavorites: boolean;\r\n\r\n    @Input() pageSize = 10;\r\n    @Input() userTypeMode: string;\r\n    @Input() orderField: string;\r\n    @Input() enablePagination: boolean;\r\n    @Input() absUserOrgUrl: string;\r\n    @Input() treeListData = [];\r\n    @Input() orgIdField: string;\r\n    @Input() enableHierarchicalLoading: boolean;\r\n    @Input() includeStopOrg: boolean;\r\n    @Input() originalTreeData: any;\r\n    @Input() personnelOrderField: string;\r\n    @Input() filterId: string;\r\n    @Input() dataLoadingService: DataLoadingService;\r\n    @Input() validElementsInfo: string;\r\n    @Input() groupExtendInfo: string;\r\n    @Input() onlyCurrentOrg: boolean;\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() userManagePathResult: any;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() groupChange = new EventEmitter<any>();\r\n\r\n    groupIdField = 'id';\r\n    userIdField = 'userId';\r\n    selections: any[] = [];\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n    noDataImg = noDataImg;\r\n    allChecked = false;\r\n    items = [];\r\n    favoritesList = [];\r\n    groupData: Group = { public: [], personal: [] };\r\n    personnelList = [];\r\n    groupPersonnels = [];\r\n    publicVisible = true;\r\n    personalVisible = true;\r\n    publicToken = 'public';\r\n    personalToken = 'personal';\r\n    selectedGroupId: string;\r\n    allIndexId: string;\r\n    showGroupPersonnelDialog = false;\r\n    currentGroupType = 'public';\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    loadingServiceMessage: string;\r\n    cdRef: ChangeDetectorRef;\r\n    userInShownOrg = [];\r\n\r\n    constructor(\r\n        @Optional() @Inject(GROUP_SERVICE) private groupService,\r\n        @Optional() private favoritesTool: FavoritesTool\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 10)\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // 兼容老表单\r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                if (this.enableFavorites && !!this.selectedGroupId) {\r\n                    this.getPersonnelsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    editGroup(e: MouseEvent, item: GroupItem) {\r\n        this.groupChange.next(item);\r\n        e.stopPropagation();\r\n        e.cancelBubble = true;\r\n    }\r\n\r\n    //群组触发事件类型 1：add 2：delete 3：update(title和description) 4：update(追加群组成员)\r\n    deleteGroup(e: MouseEvent, item: GroupItem) {\r\n        const helpExtend = window && (window as any).helpExtend;\r\n        if (item[this.groupIdField] === this.selectedGroupId) {\r\n            this.selectedGroupId = null;\r\n            this.currentGroupType = this.publicToken;\r\n        }\r\n        if (helpExtend) {\r\n            helpExtend.curdGroupData({\r\n                id: item[this.groupIdField],\r\n                type: 2\r\n            }).then(() => {\r\n                this.items = [];\r\n                this.getGroupList();\r\n            });\r\n        } else {\r\n            throw new Error(this.groupExtendInfo);\r\n        }\r\n        e.stopPropagation();\r\n        e.cancelBubble = true;\r\n    }\r\n\r\n    /**\r\n     * 添加群组成员\r\n     */\r\n    appendGroupPersonnel() {\r\n        const helpExtend = window && (window as any).helpExtend;\r\n        const userIds = [];\r\n        this.groupPersonnelComponent.selections.forEach(selection => {\r\n            userIds.push(selection[this.idField]);\r\n        });\r\n        if (helpExtend) {\r\n            helpExtend.curdGroupData({\r\n                id: this.selectedGroupId,\r\n                userIds,\r\n                type: 4\r\n            }).then(() => {\r\n                this.toggleGroupPersonnelDialog(false);\r\n                this.getPersonnelsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n\r\n            });\r\n        } else {\r\n            throw new Error(this.groupExtendInfo);\r\n        }\r\n    }\r\n\r\n    toggleGroupPersonnelDialog(show: boolean, groupType = this.personalToken) {\r\n        if (groupType === this.personalToken) {\r\n            this.showGroupPersonnelDialog = show;\r\n        }\r\n    }\r\n\r\n    // 设置我的群组\r\n    // setMyGroup() {\r\n    //     const options = {\r\n    //         // 打开菜单，funcId需要指定，appId、appEntrance可以为空\r\n    //         funcId: '2cea1078-eefb-b716-37b5-480afcbede03',\r\n    //         tabId: '个人群组',\r\n    //         appId: '',\r\n    //         appEntrance: '',\r\n    //         // 指定当前打开的是菜单\r\n    //         appType: 'menu'\r\n    //     };\r\n    //     (window as any).gspframeworkService.rtf.func.openMenu(options);\r\n    // }\r\n\r\n    assembleData() {\r\n        if (this.searchPage) {\r\n            this.searchByCodeOrName();\r\n        } else {\r\n            this.getGroupList();\r\n        }\r\n    }\r\n\r\n    getPersonnelsByGroup(item: any, groupType = this.publicToken) {\r\n        if(this.dataLoadingService) {\r\n            this.dataLoadingService.show(this.loadingServiceMessage);\r\n        }\r\n        this.currentGroupType = groupType;\r\n        this.allChecked = false;\r\n        this.selectedGroupId = item[this.groupIdField];\r\n        const helpExtend = window && (window as any).helpExtend;\r\n        if (helpExtend) {\r\n            helpExtend.getDataByGroupId(item[this.groupIdField], this.absOrgType).then(data => {\r\n                const res = data && data.items;\r\n                if(this.userInShownOrg.length) {\r\n                    const originalPersonnelsData = _.cloneDeep(res);\r\n                    this.items = originalPersonnelsData.filter(data => this.userInShownOrg.find(user => user.userId == data.userId));\r\n                } else {\r\n                    this.items = res;\r\n                }\r\n                this.groupData.personal.forEach(item => {\r\n                    if (item[this.groupIdField] === this.selectedGroupId && item.total !== this.items.length) {\r\n                        item.total = this.items.length;\r\n                    }\r\n                });\r\n                this.items.forEach(it => {\r\n                    if (this._isInArray(it[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                        it.inFavorites = true;\r\n                    } else {\r\n                        it.inFavorites = false;\r\n                    }\r\n                    it.indexId = Math.random().toString(16).substring(2);\r\n                    it.displayName = !!this.showUserCode ? ('[' + it.code + ']' + it.name) : it.name;\r\n                    if(this.showOrgAllPathByDesc && it.orgAllPath) {\r\n                        it.orgAllPath = this.changeDisplayOrgAllPath(it.orgAllPath);\r\n                    }\r\n        \r\n                });\r\n                this.toggleChecked();\r\n                this.cdRef ? this.cdRef.detectChanges() : null;\r\n                if(this.dataLoadingService) {\r\n                    this.dataLoadingService.hide();    \r\n                }\r\n            });\r\n        } else {\r\n            throw new Error(this.groupExtendInfo);\r\n        }\r\n    }\r\n\r\n    getGroupList() {\r\n        const helpExtend = window && (window as any).helpExtend;\r\n        if (helpExtend) {\r\n            helpExtend.getGroupData().then(data => {\r\n                const resPublic = data && data.items[0] && data.items[0].data;\r\n                const resPersonal = data && data.items[1] && data.items[1].data;\r\n                this.groupData.public = resPublic ? resPublic : [];\r\n                this.groupData.personal = resPersonal ? resPersonal : [];\r\n                const firstPublicGroup = resPublic[0] && resPublic[0][this.groupIdField];\r\n                const firstPersonalGroup = resPersonal[0] && resPersonal[0][this.groupIdField];\r\n                this.selectedGroupId = this.selectedGroupId ? this.selectedGroupId : firstPublicGroup;\r\n                this.selectedGroupId = this.selectedGroupId ? this.selectedGroupId : firstPersonalGroup;\r\n                if (!!this.selectedGroupId) {\r\n                    this.getPersonnelsByGroup({ id: this.selectedGroupId }, this.currentGroupType);\r\n                    if (this.groupData.public.findIndex(item => item[this.groupIdField] === this.selectedGroupId) !== -1) {\r\n                        this.currentGroupType = this.publicToken;\r\n                    } else if (this.groupData.personal.findIndex(item => item[this.groupIdField] === this.selectedGroupId) !== -1) {\r\n                        this.currentGroupType = this.personalToken;\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            throw new Error(this.groupExtendInfo);\r\n        }\r\n    }\r\n\r\n    searchByCodeOrName() {\r\n        this.items = this.items.filter(item => {\r\n            return item.code.indexOf(this.searchText) !== -1 || item.name.indexOf(this.searchText) !== -1;\r\n        });\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    toggleVisible(e, type: string) {\r\n        if (type === this.publicToken) {\r\n            this.publicVisible = !this.publicVisible;\r\n        } else if (type === this.personalToken) {\r\n            this.personalVisible = !this.personalVisible;\r\n        }\r\n        e.stopPropagation();\r\n        e.cancelBubble = true;\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        // this.emitSelections();\r\n        this.toggleChecked();\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n    /**\r\n     * datagrid用于数据展示\r\n     */\r\n    loadGroupList() {\r\n        this.items = [];\r\n        // this.unSelectedList.forEach(res => {\r\n        //     const indexId = Math.random().toString(16).substring(3, 10);\r\n        //     const item = {\r\n        //         abbreviation: res.abbreviation,\r\n        //         code: res.code,\r\n        //         defaultOrgId: res.defaultOrgId,\r\n        //         defaultOrgPath: res.defaultOrgPath,\r\n        //         ext1: res.ext1,\r\n        //         ext2: res.ext2,\r\n        //         fullPathName: res.fullPathName,\r\n        //         name: res.name,\r\n        //         orgTypeId: res.orgTypeId,\r\n        //         secLevel: res.secLevel,\r\n        //         sortOrder: res.sortOrder,\r\n        //         state: res.state,\r\n        //         su: res.su,\r\n        //         userId: res.userId,\r\n        //         orgAllPath: res.orgAllPath,\r\n        //         type: 'people',\r\n        //         checked: false,\r\n        //         inFavorites: false,\r\n        //         indexId\r\n        //     };\r\n        //     if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n        //         item.checked = true;\r\n        //     }\r\n        //     if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n        //         item.inFavorites = true;\r\n        //     }\r\n        //     this.items.push(item);\r\n        //     this.itemsBackup.push(item);\r\n        // });\r\n        const tempSelections = _.cloneDeep(this.selections);\r\n        this.toggleChecked();\r\n        this.selections = _.cloneDeep(tempSelections);\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'candidate'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Component, Input, EventEmitter, Output, OnInit, AfterViewInit, ChangeDetectorRef, Injector } from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { RfRequestParam, SecurityLevel } from '../../utils/user.type';\r\n\r\n@Component({\r\n    selector: 'lib-recent-contacts',\r\n    templateUrl: './trc.component.html',\r\n    styleUrls: ['./trc.component.css'],\r\n})\r\nexport class RecentContactsComponent implements OnInit, AfterViewInit {\r\n\r\n    // 操作列表或者分组所需要的主键字段，默认为'userId'\r\n    @Input() idField: string;\r\n    /**\r\n     * 数据源类型，默认为'System_organization'，即设置为系统数据源，可获取系统组织、系统人员\r\n     * 设置为'Administrative_organization'就是扩展数据源 ，可获取行政组织、行政人员\r\n     */\r\n    @Input() absOrgType: string;\r\n    // 传入的url，当前为默认值'/api/runtime/sys/v1.0/absUserOrg'\r\n    @Input() absUserOrgUrl: string;\r\n    // 业务标识，默认为'common'\r\n    @Input() busNum: string;\r\n    // 搜索框的输入值\r\n    @Input() searchText: any;\r\n    // 搜索时翻页，暂不清楚用途\r\n    @Input() searchPage: boolean;\r\n    // 是否包含停用用户，默认为false\r\n    @Input() includeStopUser: boolean;\r\n    // 是否包含本人，默认为true\r\n    @Input() includeCurrentUser: boolean;\r\n    @Input() disableCurrentUser: boolean;\r\n    // 是否允许收藏人员，默认为true，当不展示“我的收藏”tab页时为false\r\n    @Input() enableFavorites: boolean;\r\n    // 多语相关\r\n    @Input() validElementsInfo: string;\r\n\r\n    @Input() multiSelect: any;\r\n    @Input() orgId = '';\r\n    @Input() userIds = '';\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() recentContactsChange = new EventEmitter<any>();\r\n\r\n    private cdRef: ChangeDetectorRef;\r\n    allChecked = false;\r\n    columns: any;\r\n    selections: any[] = [];\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    items = [];\r\n    recentContactsList = [];\r\n    favoritesList = [];\r\n    userInShownOrg = [];\r\n    private filterRecentContacts = [];\r\n\r\n    constructor(\r\n        private notifyService: NotifyService,\r\n        private favoritesTool: FavoritesTool,\r\n        private injector: Injector\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 12);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.favoritesTool.favoritesSubject.subscribe(data => {\r\n            this.favoritesList = data;\r\n            if (this.enableFavorites) {\r\n                this.loadRecentContactsList();\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    assembleData() {\r\n        if (this.searchPage) {\r\n            this.searchByCodeOrName();\r\n        } else {\r\n            this.getRecentContactsList();\r\n        }\r\n    }\r\n\r\n    searchByCodeOrName() {\r\n        this.items = this.items.filter(item => {\r\n            return item.code.indexOf(this.searchText) !== -1 || item.name.indexOf(this.searchText) !== -1;\r\n        });\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        this.toggleChecked();\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.cdRef.detectChanges();\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n    /**\r\n     * 用于数据展示\r\n     */\r\n    loadRecentContactsList() {\r\n        this.items = [];\r\n        if(this.userInShownOrg.length) {\r\n            this.filterRecentContacts = this.recentContactsList.filter(item => this.userInShownOrg.find(user => user.userId == item.userId));\r\n        } else {\r\n            this.filterRecentContacts = this.recentContactsList;\r\n        }\r\n        this.filterRecentContacts.forEach(res => {\r\n            const item = _.cloneDeep(res);\r\n            item.checked = false;\r\n            item.inFavorites = false;\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            }\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if (this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n            this.items.push(item);\r\n        });\r\n        this.toggleChecked();\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'recent'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    /**\r\n     * 获取最近联系人列表\r\n     */\r\n    getRecentContactsList() {\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'RecentContacts'\r\n        };\r\n        if (this.disableCurrentUser) {\r\n            const currentUserId = (window as any).gspframeworkService.common.userInfos.get().id;\r\n            param.filterUserIds = [currentUserId];\r\n        }\r\n        if (this.withPermission) {\r\n            param.withPermission = true;\r\n            param.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            param.securityControl = true;\r\n            param.securityLevel = this.securityLevel;\r\n        }\r\n        this.favoritesTool.curdRecentContactsOrFavorites('query', param).subscribe((rcRes: any) => {\r\n            const rcResData = rcRes ? rcRes.data : [];\r\n            this.recentContactsList = rcResData;\r\n            this.loadRecentContactsList();\r\n            const ids = [];\r\n            this.recentContactsList.forEach(item => {\r\n                ids.push(item[this.idField]);\r\n            });\r\n            this.recentContactsChange.emit({\r\n                recentContactsList: ids\r\n            });\r\n        });\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     * 清空最近联系人\r\n     */\r\n    clearRecentContactsList() {\r\n        if (!this.items.length) {\r\n            return;\r\n        }\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'RecentContacts',\r\n            deleteList: this.items.map(item => item[this.idField]),\r\n            clearData: true\r\n        };\r\n\r\n        this.favoritesTool.curdRecentContactsOrFavorites('modify', param).subscribe((val) => {\r\n            this.items = [];\r\n            this.cdRef.detectChanges();\r\n            this.recentContactsChange.emit({\r\n                recentContactsList: []\r\n            });\r\n            // this.notifyService.info('已清空最近联系人！');\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Component, Input, EventEmitter, Output, ViewChild } from \"@angular/core\";\r\nimport { ApiLocalService } from \"../utils/api-service\";\r\nimport { DatagridComponent } from \"@farris/ui-datagrid\";\r\nimport { of } from 'rxjs';\r\n\r\n// 兼容保留，该组件无用\r\n@Component({\r\n    template: `<farris-datagrid #quickInputDatagrid class=\"s-unSelectDatagrid-query\" [pagerViewMode]=\"'simple'\" [checkOnSelect]=\"true\"\r\n    [selectOnCheck]=\"true\" [multiSelect]=\"true\" [columns]=\"columnsQuick\" [data]=\"itemsQuick\"\r\n    [enableSelectRow]=\"true\" [showHeader]=\"false\" [fitColumns]=\"true\" [height]=\"200\"\r\n    [showBorder]=\"false\" [striped]=\"false\" [fit]=\"true\" [showPageNumber]=\"false\"\r\n    [pageIndex]=\"pageIndexQuick\" [pageSize]=\"pageSizeQuick\" [total]=\"pageTotalAllQuick\"\r\n    (checked)=\"selectLine($event)\" (pageChanged)=\"switchPage($event)\"\r\n    [beforeUncheck]=\"onBeforeUncheck\">\r\n  </farris-datagrid>`\r\n})\r\n\r\nexport class quickInputDatagridComponent {\r\n\r\n    @ViewChild('quickInputDatagrid') quickInputDatagrid: DatagridComponent;\r\n\r\n    @Input() columnsQuick: any\r\n    @Input() url2: any\r\n    @Input() itemsQuick: any\r\n    @Input() pageIndexQuick: any\r\n    @Input() pageSizeQuick: any\r\n    @Input() pageTotalAllQuick: any\r\n    @Input() pathQuick: any\r\n    @Input() orgIdQuick: any\r\n    @Input() isContainQuick: any\r\n    @Input() pageTotalQuick: any\r\n    @Input() isSingleCheck: any\r\n    @Input() selections: any\r\n    @Input() noSelectToRight: any\r\n    @Input() quickInput: any\r\n    @Input() isLoadOutData: any\r\n    @Input() unSelectedQuickLists: any\r\n    @Input() unSelectedListQuick: any\r\n    @Input() organizationList: any\r\n    @Input() listIdField: string\r\n    @Input() searchPage: boolean;\r\n    @Input() isenabled: number;\r\n    @Input() isExcludeMe: number;\r\n    @Output() isAllSelect = new EventEmitter<any>();\r\n\r\n    constructor(\r\n        private ApiLocalService: ApiLocalService,\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.quickInputDatagrid.loadData(this.itemsQuick);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.pageChangeCheck();\r\n    }\r\n\r\n    /**\r\n       * 人员展示区datagrid用于数据加载\r\n       */\r\n    unSelectedListLoad() {\r\n        this.itemsQuick = [];\r\n        this.unSelectedListQuick.forEach(res => {\r\n            this.itemsQuick.push({ \"displayname\": res.displayname, \"nameChs\": res.nameChs, \"id\": res.id, \"organization\": res.organization, \"organizationName\": res.userOrganize, \"userInFo\": res.userInfo })\r\n        });\r\n        this.quickInputDatagrid.loadData(this.itemsQuick);\r\n        this.pageChangeCheck();\r\n        let emitojb = {\r\n            items: this.itemsQuick,\r\n            pageIndex: this.pageIndexQuick,\r\n            pageSize: this.pageSizeQuick,\r\n            pageTotal: this.pageTotalQuick,\r\n            pageTotalAll: this.pageTotalAllQuick,\r\n            unSelectedList: this.unSelectedListQuick\r\n\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    /**\r\n       * 当前行选中\r\n       * @param data 当前行的数据（）\r\n       */\r\n    selectLine(data: any) {\r\n        if (this.isSingleCheck) {\r\n            if (this.selections.length == 0 || this._isInArray(data.id, \"id\", this.selections)) {\r\n                this._insertOneIntoSelections(data.data);\r\n            } else {\r\n                alert(this.noSelectToRight);\r\n\r\n            }\r\n        } else {\r\n            this._insertOneIntoSelections(data.data);\r\n        }\r\n        let emitojb = {\r\n            items: this.itemsQuick,\r\n            pageIndex: this.pageIndexQuick,\r\n            pageSize: this.pageSizeQuick,\r\n            pageTotal: this.pageTotalQuick,\r\n            pageTotalAll: this.pageTotalAllQuick,\r\n            unSelectedList: this.unSelectedListQuick\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    //人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndexQuick = size.pageIndex;\r\n        let isChinese: number;\r\n        //中文\r\n        if (/^[\\u4e00-\\u9fa5]+$/i.test(this.quickInput)) {\r\n            isChinese = 0;\r\n        } else if (!(/^[\\u4e00-\\u9fa5]+$/i.test(this.quickInput)) && !(escape(this.quickInput).indexOf(\"%u\") < 0)) {\r\n            alert(\"输入框禁止同时输入汉字和拼音或汉字和数字！\")\r\n            //英文\r\n        } else if (/^[a-zA-Z]+$/.test(this.quickInput)) {\r\n            if (this.quickInput.length > 3) {\r\n                isChinese = 2\r\n            } else (\r\n                isChinese = 3\r\n            )\r\n        } else {\r\n            isChinese = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n       * 人员展示区的复选框取消勾选时触发逻辑\r\n       * @param $event\r\n       * @returns\r\n       */\r\n    onBeforeUncheck = ($event) => {\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.rowData[\"id\"] === selection[\"id\"]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        })\r\n        let emitojb = {\r\n            items: this.itemsQuick,\r\n            pageIndex: this.pageIndexQuick,\r\n            pageSize: this.pageSizeQuick,\r\n            pageTotal: this.pageTotalQuick,\r\n            pageTotalAll: this.pageTotalAllQuick,\r\n            unSelectedList: this.unSelectedListQuick\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n        return of(true);\r\n    }\r\n\r\n    /**\r\n       * 选中并插入当前行数据到右侧\r\n       * @param data 当前行的数据\r\n       * @param collection 暂存当前数据的集合\r\n       */\r\n    _insertOneIntoSelections(data: any) {\r\n        let collection: any[] = [];\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[\"id\"], \"id\", this.selections)) {\r\n            return;\r\n        }\r\n        collection.push(data)\r\n        this._insertSomeIntoSelections(collection);\r\n    }\r\n\r\n    /**\r\n         * 判断是否在内\r\n         * @param value\r\n         * @param field\r\n         * @param array\r\n         * @returns\r\n         */\r\n    _isInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error('前2个参数必填');\r\n        }\r\n        return array.find(item => value === item[field]) ? true : false;\r\n    }\r\n\r\n    _insertSomeIntoSelections(userArray: any[]) {\r\n        userArray.forEach(user => {\r\n            if (!this._isInArray(user[\"id\"], \"id\", this.selections)) {\r\n                this.selections.push(user);\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n         */\r\n    pageChangeCheck() {\r\n        if (this.unSelectedListQuick) {\r\n            this.unSelectedListQuick.forEach(item => {\r\n                if (this._isInArray(item.id, \"id\", this.selections)) {\r\n                    this.quickInputDatagrid.checkRow(item.id);\r\n                } else {\r\n                    this.quickInputDatagrid.unCheckRow(item.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Component, Input, EventEmitter, Output, OnInit, AfterViewInit, ChangeDetectorRef, Optional, Injector } from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\n\r\n@Component({\r\n    selector: 'lib-search-result',\r\n    templateUrl: './srp.component.html',\r\n    styleUrls: ['./srp.component.css'],\r\n})\r\nexport class SearchResultComponent implements OnInit, AfterViewInit {\r\n\r\n    @Input() idField: string;\r\n    @Input() multiSelect: boolean;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() set data(value: any[]) {\r\n        this.items = value;\r\n        this.loadSearchResult();\r\n    }\r\n    @Input() validElementsInfo: string;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() closePanelChange = new EventEmitter<boolean>();\r\n    @Output() pageIndexChange = new EventEmitter<any>(); \r\n    @Output() pageSizeChange = new EventEmitter<any>();\r\n\r\n    private cdRef: ChangeDetectorRef;\r\n    // 当前搜索页中所有数据已被勾选\r\n    allChecked = false;\r\n    columns: any;\r\n    // 右侧已选人员数据\r\n    selections: any[] = [];\r\n\r\n    cloneSelections = [];\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    // 搜索结果，用于页面展示\r\n    items = [];\r\n    recentContactsList = [];\r\n    favoritesList = [];\r\n    // 搜索结果页索引\r\n    pageIndex = 1;\r\n    pageSize = 50;\r\n    // 搜索结果总页数\r\n    pageTotal: number;\r\n    // 搜索结果总数量\r\n    itemTotalCount: number;\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    showPagesPanel: boolean = false;\r\n    pageList = [10, 20, 30, 50, 100, 200];\r\n\r\n    constructor(\r\n        @Optional() private notifyService: NotifyService,\r\n        @Optional() private favoritesTool: FavoritesTool,\r\n        private injector: Injector\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 12);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // 兼容老表单\r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                if (this.enableFavorites) {\r\n                    this.loadSearchResult();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    turnOverPage(dir: string, num: number) {\r\n        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {\r\n            return;\r\n        }\r\n        this.pageIndex = this.pageIndex + num;\r\n        this.switchPage({ pageIndex: this.pageIndex, pageSize: this.pageSize });\r\n    }\r\n\r\n    beforePageIndexChange(inputEl: KeyboardEvent, maxNumber) {\r\n        const target = inputEl.target as any;\r\n        const currentPageNumber = Number(target.value);\r\n        if (currentPageNumber > maxNumber) {\r\n            target.value = maxNumber;\r\n        } else {\r\n            if (currentPageNumber < 1) {\r\n                target.value = 1;\r\n            }\r\n        }\r\n        this.pageIndex = Number(target.value);\r\n    }\r\n\r\n    changePageSizeHandler($event, num) {\r\n        $event.stopPropagation();\r\n        if(num == this.pageSize) {\r\n            return;\r\n        }\r\n        this.showPagesPanel = false;\r\n        this.pageIndex = 1; \r\n        this.pageSize = num;\r\n        this.pageSizeChange.emit({\r\n            pageIndex: this.pageIndex,\r\n            pageSize: this.pageSize\r\n        });\r\n    }\r\n\r\n    switchPage(size: any) {\r\n        this.pageIndexChange.emit(size);\r\n    }\r\n\r\n    closePanel() {\r\n        this.closePanelChange.emit(true);\r\n    }\r\n\r\n    // 全选（仅当前页）\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.cdRef.detectChanges();\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n    /**\r\n     * 用于数据展示\r\n     */\r\n    loadSearchResult() {\r\n        this.items.forEach(res => {\r\n            const indexId = Math.random().toString(16).substring(3, 10);\r\n            res.checked = false;\r\n            res.inFavorites = false;\r\n            res.indexId = indexId;\r\n            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n                res.checked = true;\r\n            }\r\n            if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                res.inFavorites = true;\r\n            }\r\n            res.displayName = !!this.showUserCode ? ('[' + res.code + ']' + res.name) : res.name;\r\n            if (this.showOrgAllPathByDesc && res.orgAllPath) {\r\n                res.orgAllPath = this.changeDisplayOrgAllPath(res.orgAllPath);\r\n            }\r\n        });\r\n        this.items = this.items.slice();\r\n        this.toggleChecked();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'recent'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    onMouseEnter($event){\r\n        this.showPagesPanel = true;\r\n    }\r\n\r\n    onMouseLeave($event) {\r\n        this.showPagesPanel = false;\r\n    }\r\n    \r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class SelectionService {\r\n\r\n    showSubject = new Subject<any>();\r\n    constructor() {\r\n    }\r\n\r\n    show() {\r\n        this.showSubject.next(true);\r\n    }\r\n\r\n    set(key: string, value: any): void {\r\n        localStorage.setItem(key, JSON.stringify(value)); // 只能是字符串\r\n    }\r\n\r\n    get(key): any {\r\n        return JSON.parse(localStorage.getItem(key));\r\n    }\r\n\r\n    remove(key): void {\r\n        localStorage.removeItem(key);\r\n    }\r\n\r\n}","export interface UserInfo {\r\n    orgAllPath: string;\r\n    abbreviation: string;\r\n    code: string;\r\n    defaultOrgId: string;\r\n    defaultOrgPath: string;\r\n    ext1: string;\r\n    ext2: string;\r\n    fullPathName: string;\r\n    name: string;\r\n    orgTypeId: string;\r\n    secLevel: string;\r\n    sortOrder: string;\r\n    state: string;\r\n    su: string;\r\n    userId: string;\r\n}\r\n\r\nexport interface PersonnelRequestParam {\r\n    pageSize?: number;\r\n    pageIndex?: number;\r\n    withAllOrg?: number; // 获取组织及其所有下级组织下的用户\r\n    notGetStopUser?: boolean; // 是否获取停用用户，默认是true\r\n    notGetCurrentUser?: boolean; // 是否获取当前用户，默认是true\r\n    curUser?: boolean; // 获取当前用户信息，默认是false\r\n    getUserInfo?: boolean; // 是否获取用户头像，默认是false\r\n    orgId?: string;\r\n    posId?: string;\r\n    orderField?: string; // 排序方式\r\n    userTypeMode?: string; // 工作流用\r\n    searchMode?: string; // 搜索模式，一般为or\r\n    pinyin?: string; // 全拼搜索\r\n    initials?: string; // 首字母搜索\r\n    filterId?: string;\r\n    groupId?: string; // 用户分组id\r\n    withAllGroup?: boolean; // 是否获取所有下级用户分组内的用户\r\n    withPermission?: boolean;\r\n    authOp?: string;\r\n    reverseOrgAllPath?: boolean;\r\n    securityControl?: boolean;\r\n    securityLevel?: SecurityLevel;\r\n}\r\n\r\nexport interface SearchUserByIdRequestParam {\r\n    ids: string;\r\n    absOrgType: string;\r\n    securityControl?: boolean;\r\n    securityLevel?: SecurityLevel;\r\n}\r\n\r\nexport interface RfRequestParam {\r\n    absOrgType: string;\r\n    bizId: string;\r\n    objectValue: string;\r\n    addList?: string[];\r\n    deleteList?: string[];\r\n    notGetStopUser?: boolean;\r\n    withPermission?: boolean;\r\n    authOp?: string;\r\n    clearData?: boolean;\r\n    filterUserIds?: string[];\r\n    securityControl?: boolean;\r\n    securityLevel?: SecurityLevel;\r\n}\r\n\r\nexport interface OrgRequestParam {\r\n    absOrgType: string; // 组织类型，默认为系统组织\r\n    layer?: number; // 获取第几层的组织\r\n    codeOrName?: string; // 根据编号和名称模糊搜索\r\n    name?: string; // 根据名称模糊搜索\r\n    parentID?: string; // 根据父节点id获取下级组织\r\n    isSearchTree?: boolean; // 搜索时，是否返回树结构，默认false\r\n    getCurUser?: boolean;   // 是否获取当前用户，默认true\r\n    notGetStopOrg?: boolean; // 不获取停用组织，默认true\r\n    id?: string; // 组织id页,\r\n    getAllParentOrg?: boolean; // 是否获取全部上级组织，默认true\r\n    getOrgAllPath?: boolean; // 获取组织全路径\r\n    getOrgAllPathInfo?: boolean;\r\n    withPermission?: boolean;\r\n    authOp?: string;\r\n}\r\n\r\nexport interface PanelMode {\r\n    showQuickMode: boolean;\r\n    showAdvancedMode: boolean;\r\n}\r\n\r\nexport class FilterPosition {\r\n    id: string;\r\n    code: string;\r\n    name: string;\r\n}\r\n\r\nexport class FilterOrg {\r\n    id: string;\r\n    value: string;\r\n    name: string;\r\n}\r\n\r\nexport interface SecurityLevel {\r\n    secLevel: number;     // 密级等级 等级越高数字越大\r\n    id?: string;          // 密级id\r\n    code?: string;\r\n    name?: string;\r\n    secFlag?: string;\r\n    state?: number;\r\n    secSystemId?: string; // 密级体系id\r\n}","import { Component, Input, EventEmitter, Output, ViewChild, OnInit, AfterViewInit, TemplateRef, SimpleChanges, OnChanges, Optional, ChangeDetectorRef } from '@angular/core';\r\nimport { ApiLocalService } from '../../utils/api-service';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport * as _ from 'lodash-es';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { DataLoadingService } from '../../utils/loading-service';\r\nimport { FilterPosition, PersonnelRequestParam, SecurityLevel } from '../../utils/user.type';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { BasePathService } from '@farris/rtf';\r\n\r\n@Component({\r\n    selector: 'lib-unselect',\r\n    templateUrl: './unselectdatagrid.component.html',\r\n    styleUrls: ['./unselectdatagrid.component.css']\r\n})\r\nexport class UnSelectDatagridComponent implements OnInit, AfterViewInit, OnChanges {\r\n\r\n    @ViewChild('unSelectDatagrid') unSelectDatagrid: DatagridComponent;\r\n    @ViewChild('opCell') opCell: TemplateRef<any>;\r\n\r\n    @Input() idField: string = 'userId';\r\n    @Input() items = [];\r\n    @Input() absUserOrgUrl: any;\r\n    @Input() absOrgType: any;\r\n    @Input() pageIndex: any;\r\n    @Input() pageSize: any;\r\n    @Input() pageTotalAll: any;\r\n    @Input() multiSelect: any;\r\n    @Input() noSelectToRight: any;\r\n    @Input() searchText: any;\r\n    @Input() unSelectedList: any;\r\n    @Input() pageTotal: any;\r\n    @Input() set enableChildHierarchy(value: boolean) {\r\n        this.pEnableChildHierarchy = value;\r\n    }\r\n    @Input() orgId = '';\r\n    @Input() userIds = '';\r\n    @Input() unSelectedUserIds = '';\r\n    @Input() includeStopUser: boolean;\r\n    @Input() searchPage: boolean;\r\n    @Input() set includeCurrentUser(value: boolean) {\r\n        this.pIncludeCurrentUser = value;\r\n    }\r\n    @Input() enablePagination = true;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() busNum: string;\r\n    @Input() orderField: string;\r\n    @Input() userTypeMode: string;\r\n    @Input() globalSearch: boolean;\r\n    @Input() showPageList: boolean;\r\n    @Input() dataLoadingService: DataLoadingService;\r\n    @Input() validElementsInfo: string;\r\n    @Input() filterPosition: boolean;\r\n    @Input() filterPositionErrorInfo: string;\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() searchResultChange = new EventEmitter<boolean>();\r\n\r\n    columns: any;\r\n    selections: any[] = [];\r\n\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n\r\n    private pEnableChildHierarchy = true;\r\n    private pIncludeCurrentUser = true;\r\n    favoritesList = [];\r\n    noDataImg = noDataImg;\r\n    allChecked = false;\r\n    allIndexId = 'allIndexId';\r\n    filterId: string;\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    cdRef: ChangeDetectorRef;\r\n    showPagesPanel: boolean = false;\r\n    pageList = [10, 20, 50, 100, 200, 500, 1000, 2000, 5000];\r\n    loadingServiceMessage: string;\r\n    filterPersonWithPositionUrl: string = '/api/runtime/sys/v1.0/users/getPositionsByFilter';\r\n    filterPositionArr: Array<FilterPosition> = [];\r\n    filterPositionId: string = null;\r\n    isEmptyFilterPosition: boolean = false;\r\n\r\n    constructor(\r\n        private apiService: ApiLocalService,\r\n        @Optional() private favoritesTool: FavoritesTool\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 10);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        let title = '';\r\n        if (this.multiSelect) {\r\n            title = '全选';\r\n        }\r\n        this.columns = [\r\n            {\r\n                field: 'name', template: this.opCell, title, width: '150'\r\n            }\r\n        ];\r\n        // 基路径改造\r\n        this.filterPersonWithPositionUrl = BasePathService.convertPath(this.filterPersonWithPositionUrl);\r\n        \r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.unSelectedListLoad();\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // this.pageChangeCheck();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.includeCurrentUser && typeof changes.includeCurrentUser.currentValue === 'boolean'\r\n            && !changes.includeCurrentUser.firstChange) {\r\n            if(this.filterPosition) {\r\n                this.assembleDataByOrgIdAndGetFilterPosition({\r\n                    pageIndex: 1,\r\n                    pageSize: this.pageSize\r\n                });\r\n            } else {\r\n                this.assembleDataByOrgId();\r\n            }\r\n        }\r\n        if (changes.enableChildHierarchy && typeof changes.enableChildHierarchy.currentValue === 'boolean'\r\n            && !changes.enableChildHierarchy.firstChange) {\r\n            if(this.filterPosition) {\r\n                this.assembleDataByOrgIdAndGetFilterPosition({\r\n                    pageIndex: 1,\r\n                    pageSize: this.pageSize\r\n                });\r\n            } else {\r\n                this.assembleDataByOrgId();\r\n            }\r\n        }\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'unDatagrid'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        // this.emitSelections();\r\n        this.toggleChecked();\r\n    }\r\n\r\n    // 人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndex = size.pageIndex;\r\n        this.pageSize = size.pageSize;\r\n        if (this.searchPage) {\r\n            this.assembleDataBySearch();\r\n        } else {\r\n            this.assembleDataByOrgId();\r\n        }\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    assembleDataBySearch() {\r\n        const requestParam: any = {\r\n            pageSize: this.pageSize,\r\n            pageIndex: this.pageIndex,\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        // 全局搜索or局部\r\n        if (!this.globalSearch) {\r\n            requestParam.orgId = this.orgId;\r\n        }\r\n        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText,\r\n            requestParam).subscribe((res: any) => {\r\n                const rcResData = res ? res.data : [];\r\n                this.unSelectedList = rcResData;\r\n                this.pageTotalAll = res.totalCount;\r\n                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n                if (this.pageTotal === 0) {\r\n                    this.pageTotal = 1;\r\n                }\r\n                this.unSelectedListLoad();\r\n                this.searchResultChange.emit(true);\r\n            });\r\n    }\r\n\r\n    assembleDataByOrgId() {\r\n        let orgIds = '';\r\n        if (!this.orgId) {\r\n            return;\r\n        }\r\n        if(this.dataLoadingService) {\r\n            this.dataLoadingService.show(this.loadingServiceMessage);\r\n        }\r\n        orgIds = this.orgId === '*' ? '' : this.orgId;\r\n        const requestParam: PersonnelRequestParam = {\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        if (this.enablePagination) {\r\n            requestParam.pageSize = this.pageSize;\r\n            requestParam.pageIndex = this.pageIndex;\r\n        }\r\n        // 通过岗位进行人员的二次过滤\r\n        if (this.filterPositionId) {\r\n            requestParam.posId = this.filterPositionId;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        // 根据组织加载人员\r\n        this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, orgIds, requestParam).subscribe((res: any) => {\r\n            const rcResData = res ? res.data : [];\r\n            this.unSelectedList = rcResData;\r\n            this.pageTotalAll = res.totalCount;\r\n            this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n            if (this.pageTotal === 0) {\r\n                this.pageTotal = 1;\r\n            }\r\n            this.unSelectedListLoad();\r\n            if(this.dataLoadingService) {\r\n                this.dataLoadingService.hide();\r\n            }\r\n        });\r\n    }\r\n\r\n    assembleDataByOrgIdAndGetFilterPosition(size: any) {\r\n        if(!this.orgId || this.orgId == '*') {\r\n            return;\r\n        }\r\n        if(this.dataLoadingService) {\r\n            this.dataLoadingService.show(this.loadingServiceMessage);\r\n        }\r\n        this.pageIndex = size.pageIndex;\r\n        this.pageSize = size.pageSize;\r\n        this.filterPositionArr = [];\r\n\r\n        const filterRequestParam: any = {\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            getUserInfo: false,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId,\r\n            orgId: this.orgId,\r\n        };\r\n        // 首先获取当前组织下所有成员所属的岗位\r\n        const getFilterPosition$ = this.apiService.getFilterPosition(this.filterPersonWithPositionUrl, this.absOrgType, filterRequestParam);\r\n\r\n        const requestParam: PersonnelRequestParam = {\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        if (this.enablePagination) {\r\n            requestParam.pageSize = this.pageSize;\r\n            requestParam.pageIndex = this.pageIndex;\r\n        }\r\n        // 通过岗位进行人员的二次过滤\r\n        if (this.filterPositionId) {\r\n            requestParam.posId = this.filterPositionId;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        // 然后获取当前组织下的所有成员\r\n        const getPersonnel$ = this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.orgId, requestParam);\r\n        getFilterPosition$.pipe(\r\n            switchMap(\r\n                (resData: any) => {\r\n                    if(resData && resData.length > 0) {\r\n                        this.isEmptyFilterPosition = false;\r\n                        let filterPosition: FilterPosition;\r\n                        this.filterPositionArr = (resData as Array<any>).map((data: any) => {\r\n                            filterPosition = new FilterPosition;\r\n                            filterPosition.id = data['id'];\r\n                            filterPosition.code = data['code'];\r\n                            filterPosition.name = data['name'];\r\n                            return filterPosition;\r\n                        });\r\n                    } else {\r\n                        this.isEmptyFilterPosition = true;\r\n                    }\r\n                    return getPersonnel$.pipe(\r\n                        tap(\r\n                            (res: any) => {\r\n                                const rcResData = res ? res.data : [];\r\n                                this.unSelectedList = rcResData;\r\n                                this.pageTotalAll = res.totalCount;\r\n                                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n                                if (this.pageTotal === 0) {\r\n                                    this.pageTotal = 1;\r\n                                }\r\n                                this.unSelectedListLoad();\r\n                                if(this.dataLoadingService) {\r\n                                    this.dataLoadingService.hide();\r\n                                }\r\n                            },\r\n                            (error) => {\r\n                                if(this.dataLoadingService) {\r\n                                    this.dataLoadingService.hide();\r\n                                }\r\n                                throw new Error(this.filterPositionErrorInfo);\r\n                            }\r\n                        )\r\n                    );\r\n                } \r\n            )\r\n        ).subscribe();\r\n    }\r\n\r\n    /**\r\n     * datagrid用于数据展示\r\n     */\r\n    unSelectedListLoad(initLoad = false) {\r\n        const newItems = [];\r\n        let count = 0;\r\n        this.unSelectedList.forEach(res => {\r\n            const item = _.cloneDeep(res);\r\n            // item.checked = false;\r\n            // item.inFavorites = false;\r\n            // item.indexId = Math.random().toString(16).substring(2);\r\n            // if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n            //     item.checked = true;\r\n            // }\r\n            // if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n            //     item.inFavorites = true;\r\n            // }\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n            item.checked = this.selections.some(data => data[this.idField] == res[this.idField]);\r\n            if (!!item.checked) {\r\n                count += 1;\r\n            }\r\n            item.inFavorites = this.favoritesList.some(data => data[this.idField] == res[this.idField]);\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if(this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n            newItems.push(item);\r\n        });\r\n        //this.toggleChecked();\r\n        this.items = newItems.slice();\r\n        this.allChecked = this.items.length == count;\r\n        this.cdRef ? this.cdRef.detectChanges() : null;\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n    * 当前行选中\r\n    * @param data 当前行的数据（）\r\n    */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return item.userId;\r\n    }\r\n\r\n    turnOverPage(dir: string, num: number) {\r\n        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {\r\n            return;\r\n        }\r\n        this.pageIndex = this.pageIndex + num;\r\n        this.switchPage({\r\n            pageIndex: this.pageIndex,\r\n            pageSize: this.pageSize,\r\n        });\r\n    }\r\n\r\n    beforePageIndexChange(inputEl: KeyboardEvent, maxNumber) {\r\n        const target = inputEl.target as any;\r\n        const currentPageNumber = Number(target.value);\r\n        if (currentPageNumber > maxNumber) {\r\n            target.value = maxNumber;\r\n        } else {\r\n            if (currentPageNumber < 1) {\r\n                target.value = 1;\r\n            }\r\n        }\r\n        this.pageIndex = Number(target.value);\r\n    }\r\n\r\n    onMouseEnter($event){\r\n        this.showPagesPanel = true;\r\n    }\r\n\r\n    onMouseLeave($event) {\r\n        this.showPagesPanel = false;\r\n    }\r\n\r\n    changePageSizeHandler($event, num){\r\n        $event.stopPropagation();\r\n        if(num == this.pageSize) {\r\n            return;\r\n        }\r\n        this.showPagesPanel = false;\r\n        this.pageSize = num;\r\n        this.switchPage({\r\n            pageIndex: 1,\r\n            pageSize: this.pageSize,\r\n        });\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n@Injectable()\r\nexport class FilterOrgTool {\r\n    private selectOrgSubject: Subject<string> = new Subject<string>();\r\n\r\n    constructor( ) { }\r\n\r\n    get filterOrgSubject(): Observable<string> {\r\n        return this.selectOrgSubject.asObservable();\r\n    }\r\n\r\n    emitFilterOrg(value: any) {\r\n        this.selectOrgSubject.next(value);\r\n    }\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, ViewChild, OnInit, AfterViewInit, TemplateRef,\r\n    SimpleChanges, OnChanges, Optional, ChangeDetectorRef, OnDestroy\r\n} from '@angular/core';\r\nimport { ApiLocalService } from '../../utils/api-service';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport * as _ from 'lodash-es';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { DataLoadingService } from '../../utils/loading-service';\r\nimport { FilterOrg, PersonnelRequestParam, SecurityLevel } from '../../utils/user.type';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\nimport { FilterOrgTool } from '../../utils/filterorg.tool';\r\nimport { Subscription } from 'rxjs';\r\nimport { BasePathService } from '@farris/rtf';\r\n\r\n@Component({\r\n    selector: 'lib-usergroup-unselect',\r\n    templateUrl: './usergroupunselect.component.html',\r\n    styleUrls: ['./usergroupunselect.component.css']\r\n})\r\nexport class UserGroupUnSelectComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n\r\n    @ViewChild('unSelectDatagrid') unSelectDatagrid: DatagridComponent;\r\n    @ViewChild('opCell') opCell: TemplateRef<any>;\r\n\r\n    @Input() idField: string = 'userId';\r\n    @Input() items = [];\r\n    @Input() absUserOrgUrl: any;\r\n    @Input() absOrgType: any;\r\n    @Input() pageIndex: any;\r\n    @Input() pageSize: any;\r\n    @Input() pageTotalAll: any;\r\n    @Input() multiSelect: any;\r\n    @Input() noSelectToRight: any;\r\n    @Input() searchText: any;\r\n    @Input() unSelectedList: any;\r\n    @Input() pageTotal: any;\r\n    @Input() set enableChildHierarchy(value: boolean) {\r\n        this.pEnableChildHierarchy = value;\r\n    }\r\n    @Input() orgId = '';\r\n    @Input() shownOrgId = '';\r\n    @Input() withAllOrg: boolean;\r\n    @Input() userIds = '';\r\n    @Input() unSelectedUserIds = '';\r\n    @Input() includeStopUser: boolean;\r\n    @Input() searchPage: boolean;\r\n    @Input() set includeCurrentUser(value: boolean) {\r\n        this.pIncludeCurrentUser = value;\r\n    }\r\n    @Input() enablePagination = true;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() busNum: string;\r\n    @Input() orderField: string;\r\n    @Input() userTypeMode: string;\r\n    @Input() globalSearch: boolean;\r\n    @Input() userGroupId = '';\r\n    @Input() showPageList: boolean;\r\n    @Input() dataLoadingService: DataLoadingService;\r\n    @Input() presetFilterOrgInfo: string;\r\n    @Input() filterOrgInfo: string;\r\n    @Input() filterOrgErrorInfo: string;\r\n    @Input() validElementsInfo: string;\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() searchResultChange = new EventEmitter<boolean>();\r\n\r\n    columns: any;\r\n    selections: any[] = [];\r\n\r\n    cloneUserIds = '';\r\n    cloneSelections = [];\r\n\r\n    private pEnableChildHierarchy = true;\r\n    private pIncludeCurrentUser = true;\r\n    favoritesList = [];\r\n    noDataImg = noDataImg;\r\n    allChecked = false;\r\n    itemsBackup = [];\r\n    allIndexId = 'allIndexId';\r\n    filterId: string;\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n    cdRef: ChangeDetectorRef;\r\n    showPagesPanel: boolean = false;\r\n    pageList = [10, 20, 50, 100, 200, 500, 1000, 2000, 5000];\r\n    loadingServiceMessage: string;\r\n    filterPersonWithOrgUrl: string = '/api/runtime/sys/v1.0/absUserOrg/org/System_organization/getOrgByUserFiler';\r\n    filterOrgArr: Array<FilterOrg> = [];\r\n    filterOrgId: string = null;\r\n    isEmptyFilterOrg: boolean = false;\r\n    private filterOrgTool: FilterOrgTool\r\n    private filterOrgSub: Subscription;\r\n    currentFilterInfo: string = null;\r\n\r\n    constructor(\r\n        private apiService: ApiLocalService,\r\n        @Optional() private favoritesTool: FavoritesTool\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 10);\r\n        this.filterOrgTool = new FilterOrgTool();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        let title = '';\r\n        if (this.multiSelect) {\r\n            title = '全选';\r\n        }\r\n        this.columns = [\r\n            {\r\n                field: 'name', template: this.opCell, title, width: '150'\r\n            }\r\n        ];\r\n        // 基路径改造\r\n        this.filterPersonWithOrgUrl = BasePathService.convertPath(this.filterPersonWithOrgUrl);\r\n\r\n        if(this.filterOrgTool) {\r\n            this.filterOrgSub = this.filterOrgTool.filterOrgSubject.subscribe(data => {\r\n                this.currentFilterInfo = data;\r\n            })\r\n        }\r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.unSelectedListLoad();\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // this.pageChangeCheck();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.includeCurrentUser && typeof changes.includeCurrentUser.currentValue === 'boolean'\r\n            && !changes.includeCurrentUser.firstChange) {\r\n            this.assembleDataByUserGroupId();\r\n        }\r\n        if (changes.enableChildHierarchy && typeof changes.enableChildHierarchy.currentValue === 'boolean'\r\n            && !changes.enableChildHierarchy.firstChange) {\r\n            this.assembleDataByUserGroupId();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.filterOrgSub.unsubscribe();\r\n    }\r\n\r\n    private emitSelections() {\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'unDatagrid'\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    restoreSelections() {\r\n        this.selections = _.cloneDeep(this.cloneSelections);\r\n        // this.emitSelections();\r\n        this.toggleChecked();\r\n    }\r\n\r\n    // 人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndex = size.pageIndex;\r\n        this.pageSize = size.pageSize;\r\n        if (this.searchPage) {\r\n            this.assembleDataBySearch();\r\n        } else {\r\n            this.assembleDataByUserGroupId();\r\n        }\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    assembleDataBySearch() {\r\n        const requestParam: any = {\r\n            pageSize: this.pageSize,\r\n            pageIndex: this.pageIndex,\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        // 全局搜索or局部\r\n        if (!this.globalSearch) {\r\n            requestParam.orgId = this.orgId;\r\n        }\r\n        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText,\r\n            requestParam).subscribe((res: any) => {\r\n                const rcResData = res ? res.data : [];\r\n                this.unSelectedList = rcResData;\r\n                this.pageTotalAll = res.totalCount;\r\n                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n                if (this.pageTotal === 0) {\r\n                    this.pageTotal = 1;\r\n                }\r\n                this.unSelectedListLoad();\r\n                this.searchResultChange.emit(true);\r\n            });\r\n    }\r\n\r\n    assembleDataByUserGroupId() {\r\n        if(this.dataLoadingService) {\r\n            this.dataLoadingService.show(this.loadingServiceMessage);    \r\n        }\r\n        const requestParam: PersonnelRequestParam = {\r\n            withAllGroup: this.pEnableChildHierarchy ? true : false,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId,\r\n            groupId: this.userGroupId,\r\n        };\r\n        if (this.enablePagination) {\r\n            requestParam.pageSize = this.pageSize;\r\n            requestParam.pageIndex = this.pageIndex;\r\n        }\r\n        if(this.filterOrgId) {\r\n            // 通过组织进行人员的二次过滤\r\n            requestParam.orgId = this.filterOrgId;\r\n        } else if (this.shownOrgId && this.shownOrgId != '*') {\r\n            requestParam.orgId = this.shownOrgId;\r\n            requestParam.withAllOrg = this.withAllOrg ? 1 : 0;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam).subscribe((res: any) => {\r\n            const rcResData = res ? res.data : [];\r\n            this.unSelectedList = rcResData;\r\n            this.pageTotalAll = res.totalCount;\r\n            this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n            if (this.pageTotal === 0) {\r\n                this.pageTotal = 1;\r\n            }\r\n            this.unSelectedListLoad();\r\n            if(this.filterOrgId) {\r\n                const currentFilterOrg =  this.filterOrgArr.find((arr: FilterOrg) => {return arr.id == this.filterOrgId});\r\n                if(currentFilterOrg) {\r\n                    this.filterOrgTool.emitFilterOrg(this.filterOrgInfo + currentFilterOrg['name']);\r\n                }\r\n            } else {\r\n                this.filterOrgTool.emitFilterOrg(this.presetFilterOrgInfo);\r\n            }\r\n            if(this.dataLoadingService) {\r\n                this.dataLoadingService.hide();\r\n            }\r\n        })\r\n    }\r\n\r\n    // 显示组织过滤漏斗的场景下，用户分组树内切换用户分组时首先获取人员所属的全部组织，再获取人员数据\r\n    assembleDataByUserGroupIdAndGetFilterOrg(size: any) {\r\n        if(!this.userGroupId) {\r\n            return;\r\n        }\r\n        if(this.dataLoadingService) {\r\n            this.dataLoadingService.show(this.loadingServiceMessage);\r\n        }\r\n        this.pageIndex = size.pageIndex;\r\n        this.pageSize = size.pageSize;\r\n        this.filterOrgArr = [];\r\n        this.filterOrgId = null;\r\n\r\n        const filterRequestParam: any = {\r\n            withAllOrg: true,\r\n            getUserInfo: false,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId,\r\n            groupId: this.userGroupId,\r\n            orgId: this.shownOrgId\r\n        };\r\n        // 首先获取当前用户分组下所有成员所属的组织\r\n        const getFilterOrg$ = this.apiService.getFilterOrganization(this.filterPersonWithOrgUrl, this.absOrgType, filterRequestParam);\r\n\r\n        const requestParam: PersonnelRequestParam = {\r\n            withAllGroup: this.pEnableChildHierarchy ? true : false,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId,\r\n            groupId: this.userGroupId,\r\n        };\r\n        if (this.shownOrgId && this.shownOrgId != '*') {\r\n            requestParam.orgId = this.shownOrgId;\r\n            requestParam.withAllOrg = this.withAllOrg ? 1 : 0;\r\n        }\r\n        if (this.enablePagination) {\r\n            requestParam.pageSize = this.pageSize;\r\n            requestParam.pageIndex = this.pageIndex;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        // 然后获取当前用户分组下的所有成员\r\n        const getPersonnel$ = this.apiService.getPersonnelByUserGroupId(this.absUserOrgUrl, requestParam);\r\n\r\n        getFilterOrg$.pipe(\r\n            switchMap(\r\n                (resData: any) => {\r\n                    if(resData && resData.data && resData.data.length > 0) {\r\n                        this.isEmptyFilterOrg = false;\r\n                        let filterOrg: FilterOrg;\r\n                        this.filterOrgArr = resData.data.map((data: any) => {\r\n                            filterOrg = new FilterOrg();\r\n                            filterOrg.id = data['orgId'];\r\n                            filterOrg.value = data['code'];\r\n                            filterOrg.name = data['name'];\r\n                            return filterOrg;\r\n                        });\r\n                        this.filterOrgTool.emitFilterOrg(this.presetFilterOrgInfo);\r\n                    } else {\r\n                        this.isEmptyFilterOrg = true;\r\n                    }\r\n                    return getPersonnel$.pipe(\r\n                        tap(\r\n                            (res: any) => {\r\n                                const rcResData = res ? res.data : [];\r\n                                this.unSelectedList = rcResData;\r\n                                this.pageTotalAll = res.totalCount;\r\n                                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n                                if (this.pageTotal === 0) {\r\n                                    this.pageTotal = 1;\r\n                                }\r\n                                this.unSelectedListLoad();\r\n                            }\r\n                        )\r\n                    )\r\n                }\r\n            ),\r\n            tap(\r\n                () => {\r\n                    if(this.dataLoadingService) {\r\n                        this.dataLoadingService.hide();\r\n                    }\r\n                },\r\n                (error) => {\r\n                    if(this.dataLoadingService) {\r\n                        this.dataLoadingService.hide();\r\n                    }\r\n                    throw new Error(this.filterOrgErrorInfo);\r\n                }\r\n            )\r\n        ).subscribe();\r\n    }\r\n\r\n    /**\r\n     * datagrid用于数据展示\r\n     */\r\n    unSelectedListLoad(initLoad = false) {\r\n        this.items = [];\r\n        this.unSelectedList.forEach(res => {\r\n            // const indexId = Math.random().toString(16).substring(2);\r\n            // const item = {\r\n            //     abbreviation: res.abbreviation,\r\n            //     code: res.code,\r\n            //     defaultOrgId: res.defaultOrgId,\r\n            //     defaultOrgPath: res.defaultOrgPath,\r\n            //     ext1: res.ext1,\r\n            //     ext2: res.ext2,\r\n            //     fullPathName: res.fullPathName,\r\n            //     name: res.name,\r\n            //     orgTypeId: res.orgTypeId,\r\n            //     secLevel: res.secLevel,\r\n            //     sortOrder: res.sortOrder,\r\n            //     state: res.state,\r\n            //     su: res.su,\r\n            //     userId: res.userId,\r\n            //     orgAllPath: res.orgAllPath,\r\n            //     inFavorites: false,\r\n            //     type: 'people',\r\n            //     checked: false,\r\n            //     indexId\r\n            // };\r\n            const item = _.cloneDeep(res);\r\n            item.checked = false;\r\n            item.inFavorites = false;\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n            if (this._isInArray(res[this.idField], this.idField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            if (this._isInArray(res[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            }\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if(this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n            this.items.push(item);\r\n            this.itemsBackup.push(item);\r\n        });\r\n        this.toggleChecked();\r\n        this.items = this.items.slice();\r\n        this.cdRef ? this.cdRef.detectChanges() : null;\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n        this.emitSelections();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n    * 当前行选中\r\n    * @param data 当前行的数据（）\r\n    */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.userIds = '';\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  取消选中\r\n     * @param $event 取消勾选的数据\r\n     */\r\n    cancelSelections($event) {\r\n        if (this.items.findIndex(item => item[this.idField] === $event.id) === -1) {\r\n            return;\r\n        }\r\n        this.items.forEach(item => {\r\n            if (item[this.idField] === $event.id) {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.id === selection[this.idField]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        });\r\n        this.allChecked = false;\r\n    }\r\n\r\n    /**\r\n     * 全部取消勾选\r\n     */\r\n    clearCheckeds() {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n        });\r\n        this.allChecked = false;\r\n        this.selections = [];\r\n    }\r\n\r\n    clearUserIds() {\r\n        this.userIds = '';\r\n    }\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleChecked() {\r\n        this.items.forEach(item => {\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) > -1) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n        });\r\n        if (this.isAllChecked()) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private isAllChecked(): boolean {\r\n        let count = 0;\r\n        let allChecked = false;\r\n\r\n        this.items.forEach(item => {\r\n            this.selections.forEach(selection => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    count += 1;\r\n                }\r\n            });\r\n        });\r\n        if (this.items.length === count && count > 0) {\r\n            allChecked = true;\r\n        }\r\n        return allChecked;\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return item.userId;\r\n    }\r\n\r\n    turnOverPage(dir: string, num: number) {\r\n        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {\r\n            return;\r\n        }\r\n        this.pageIndex = this.pageIndex + num;\r\n        this.switchPage({\r\n            pageIndex: this.pageIndex,\r\n            pageSize: this.pageSize,\r\n        });\r\n    }\r\n\r\n    beforePageIndexChange(inputEl: KeyboardEvent, maxNumber) {\r\n        const target = inputEl.target as any;\r\n        const currentPageNumber = Number(target.value);\r\n        if (currentPageNumber > maxNumber) {\r\n            target.value = maxNumber;\r\n        } else {\r\n            if (currentPageNumber < 1) {\r\n                target.value = 1;\r\n            }\r\n        }\r\n        this.pageIndex = Number(target.value);\r\n    }\r\n\r\n    onMouseEnter($event){\r\n        this.showPagesPanel = true;\r\n    }\r\n\r\n    onMouseLeave($event) {\r\n        this.showPagesPanel = false;\r\n    }\r\n\r\n    changePageSizeHandler($event, num){\r\n        $event.stopPropagation();\r\n        if(num == this.pageSize) {\r\n            return;\r\n        }\r\n        this.showPagesPanel = false;\r\n        this.pageSize = num;\r\n        this.switchPage({\r\n            pageIndex: 1,\r\n            pageSize: this.pageSize,\r\n        });\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n}\r\n","import { Component, Input, EventEmitter, Output, ViewChild, OnInit, AfterViewInit, TemplateRef, SimpleChanges, OnChanges, Optional, ChangeDetectorRef } from '@angular/core';\r\nimport { ApiLocalService } from '../../utils/api-service';\r\nimport * as _ from 'lodash-es';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { GroupTool } from '../../utils/group.tool';\r\nimport { OrgRequestParam, PersonnelRequestParam, SecurityLevel } from '../../utils/user.type';\r\nimport { SearchResultComponent } from '../search-result-page/srp.component';\r\nimport { noDataImg } from '../../assets/resource';\r\n\r\n@Component({\r\n    selector: 'lib-org-personnel',\r\n    templateUrl: './op.component.html',\r\n    styleUrls: ['./op.component.css']\r\n})\r\nexport class OrgPersonnelComponent implements OnInit, AfterViewInit, OnChanges {\r\n\r\n    @ViewChild('farrisTreetable') farrisTree: TreeTableComponent;\r\n    @ViewChild('orgTreeCell') orgTreeCell: TemplateRef<any>;\r\n    @Input() idField: string;\r\n    @Input() absUserOrgUrl: any;\r\n    @Input() absOrgType: any;\r\n    pageIndex = 1;\r\n    @Input() pageSize: any;\r\n    pageTotalAll: number;\r\n    @Input() multiSelect: any;\r\n    pageTotal: number;\r\n    @Input() favoritesList = [];\r\n    set enableChildHierarchy(value: boolean) {\r\n        this.pEnableChildHierarchy = value;\r\n        this.switchPage({ pageIndex: 1 });\r\n    }\r\n    get enableChildHierarchy() {\r\n        return this.pEnableChildHierarchy;\r\n    }\r\n    @Input() includeStopUser: boolean;\r\n    set includeCurrentUser(value: boolean) {\r\n        this.pIncludeCurrentUser = value;\r\n        this.switchPage({ pageIndex: 1 });\r\n    }\r\n    get includeCurrentUser() {\r\n        return this.pIncludeCurrentUser;\r\n    }\r\n    @Input() enablePagination = true;\r\n    @Input() enableFavorites: boolean;\r\n    @Input() orderField: string;\r\n    @Input() userTypeMode: string;\r\n    @Input() orgIdField = 'orgId';\r\n    @Input() orgId: string;\r\n    @Input() shownOrgId: string;\r\n    @Input() treeListData = [];\r\n    @Input() enableHierarchicalLoading: boolean;\r\n    @Input() includeStopOrg: boolean;\r\n    @Input() originalTreeData: any;\r\n    @Input() personnelOrderField: string;\r\n    @Input() filterId: string;\r\n    @Input() showUserCode = true;\r\n    @Input()\r\n    set onlyCurrentOrg(value: boolean) {\r\n        if(this.orgId && this.orgId != '*') {\r\n            this._onlyCurrentOrg = value;\r\n            if(value) {\r\n                this.enableChildHierarchy = false;\r\n            }\r\n        }\r\n    }\r\n    get onlyCurrentOrg() {\r\n        return this._onlyCurrentOrg;\r\n    }\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() userManagePathResult: any;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n\r\n    items = [];\r\n    selections = [];\r\n\r\n    private pEnableChildHierarchy = true;\r\n    private pIncludeCurrentUser = true;\r\n    _onlyCurrentOrg = false;\r\n    locationOrgText = '';\r\n    searchOrgElementVisible = false;\r\n    locationOrgList = [];\r\n    treeTableCols = [];\r\n\r\n    allChecked = false;\r\n    showGroupPersonnelDialog = false;\r\n    selectedGroupId = '';\r\n    searchPlaceholder = '请输入姓名汉字/首字母/编号搜索';\r\n    groupIcon = '<span class=\"k-icon k-i-search\"></span>';\r\n    searchText = '';\r\n    // 进行搜索时，组织选中当前节点，避免再次触发请求数据\r\n    stopNodeSelected = false;\r\n    // \r\n    onSearching = false;\r\n    noDataImg = noDataImg;\r\n    hideToggleButton = false;\r\n    // 显示不可被选择提示信息，应用于搜索组织时的搜索结果框内\r\n    showUnSelectableInfo: boolean = false;\r\n    private shownOrgPath: string;\r\n    private currentSelectOrgId: string;\r\n\r\n    constructor(\r\n        @Optional() private apiService: ApiLocalService,\r\n        @Optional() private favoritesTool: FavoritesTool,\r\n        @Optional() private groupTool: GroupTool,\r\n        @Optional() private cd: ChangeDetectorRef\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.favoritesTool) {\r\n            this.favoritesList = this.favoritesTool.favoritesList;\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.unSelectedListLoad();\r\n            });\r\n        }\r\n        this.treeTableCols = [\r\n            { field: 'name', title: 'Name', width: 200, template: this.orgTreeCell }\r\n        ];\r\n        this.switchPage({ pageIndex: 1 });\r\n        this.treeListData = _.cloneDeep(this.treeListData);\r\n        this.originalTreeData = _.cloneDeep(this.originalTreeData);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.includeCurrentUser && typeof changes.includeCurrentUser.currentValue === 'boolean'\r\n            && !changes.includeCurrentUser.firstChange) {\r\n            this.assembleDataByOrgId();\r\n        }\r\n        if (changes.enableChildHierarchy && typeof changes.enableChildHierarchy.currentValue === 'boolean'\r\n            && !changes.enableChildHierarchy.firstChange) {\r\n            this.assembleDataByOrgId();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 全局搜索框\r\n     */\r\n    onSearch(size: any) {\r\n        if (!this.searchText) {\r\n            return;\r\n        }\r\n        this.pageIndex = size.pageIndex;\r\n        this.onSearching = true;\r\n        const requestParam: PersonnelRequestParam = {\r\n            pageSize: this.pageSize,\r\n            pageIndex: this.pageIndex,\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode,\r\n            filterId: this.filterId\r\n        };\r\n        if (!!this.shownOrgId && this.shownOrgId !== '*') {\r\n            requestParam.orgId = this.shownOrgId;\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        this.stopNodeSelected = true;\r\n        //this.farrisTree.selectNode(this.treeListData[0].data.id);\r\n        this.apiService.getPersonnelBySearch(this.absUserOrgUrl, this.absOrgType, this.searchText,\r\n            requestParam).subscribe((res: any) => {\r\n                const rcResData = res ? res.data : [];\r\n                this.hideToggleButton = !rcResData || !rcResData.length ? true : false;\r\n                this.items = rcResData;\r\n                this.pageTotalAll = res.totalCount;\r\n                this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n                if (this.pageTotal === 0) {\r\n                    this.pageTotal = 1;\r\n                }\r\n                this.unSelectedListLoad();\r\n                this.stopNodeSelected = false;\r\n            });\r\n    }\r\n\r\n    listenSearchText(e: KeyboardEvent) {\r\n        if (e.code === 'Backspace' || e.code === 'Delete') {\r\n            if (!this.searchText) {\r\n                this.searchClear();\r\n            }\r\n        }\r\n    }\r\n\r\n    searchClear() {\r\n        this.onSearching = false;\r\n        this.hideToggleButton = false;\r\n        this.switchPage({ pageIndex: 1 });\r\n    }\r\n\r\n    toggleIncludeCurrentUser(e) {\r\n        this.includeCurrentUser = e;\r\n    }\r\n\r\n    /**\r\n     * 切换包含子部门\r\n     */\r\n    toggleChildHierarchy(e) {\r\n        this.enableChildHierarchy = e;\r\n    }\r\n\r\n    listenTreeExpand(obj: any) {\r\n        // todo 分层加载\r\n        if (this.enableHierarchicalLoading && obj.children.length === 0) {\r\n            const currentOrg = this.originalTreeData.data.find(t => t[this.orgIdField] == obj.id);\r\n            if (currentOrg && currentOrg.isDetail == '0') {\r\n                this.getOrganizationByParentNode(obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    getOrganizationByParentNode(parentNode: any) {\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            parentID: parentNode.id,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            if (res && res.data) {\r\n                const newDatas = [];\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                res.data.forEach(item => {\r\n                    const targetData = this.originalTreeData.data.find(it => it[this.orgIdField] == item[this.orgIdField]);\r\n                    if(!targetData) {\r\n                        item.selectable = this._onlyCurrentOrg ? false : true;\r\n                        this.originalTreeData.data.push(item);\r\n                        newDatas.push(item);\r\n                    }\r\n                });\r\n                const nodes = this.dealDataWhenExpandTreeNode(newDatas);\r\n                this.farrisTree.appendChildren(nodes, parentNode);\r\n            }\r\n        });\r\n    }\r\n\r\n    private dealDataWhenExpandTreeNode(data: any[]) {\r\n        if(!data || !data.length) {\r\n            return [];\r\n        }\r\n        const newDatas = [];\r\n        data.forEach(item => {\r\n            const newsDataObj: any = {\r\n                data: {\r\n                    id: item.orgId,\r\n                    name: item.name,\r\n                    path: item.path,\r\n                    layer: Number(item.layer)\r\n                },\r\n                expanded: false,\r\n                selectable: item.selectable,\r\n                children: []\r\n            };\r\n            if(item.isDetail === '0') {\r\n                newsDataObj.leaf = false;\r\n            }\r\n            newDatas.push(newsDataObj);\r\n        });\r\n        return newDatas;\r\n    } \r\n\r\n\r\n    private dealData(data: any[], userPath: string) {\r\n        const userPathList = [];\r\n        if (!userPath) {\r\n            return [];\r\n        }\r\n        let maxLength = userPath.length / 4;\r\n        // todo 分层加载\r\n        if (this.enableHierarchicalLoading) {\r\n            maxLength = maxLength - 1;\r\n        }\r\n        for (let a = 0; a < maxLength; a++) {\r\n            userPathList.push({ path: userPath.substring(0, 4 * (a + 1)) });\r\n        }\r\n        const newDatas = [];\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const newsDataObj: any = {\r\n                    data: {\r\n                        id: item.orgId,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    children: []\r\n                };\r\n                if (!!this.orgId && this.orgId !== '*') {\r\n                    newsDataObj.selectable = item.selectable;\r\n                }\r\n                if (this._isInArray(item.path, 'path', userPathList) !== -1) {\r\n                    newsDataObj.expanded = true;\r\n                } else {\r\n                    newsDataObj.expanded = false;\r\n                    // todo 分层加载需要\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        newsDataObj.leaf = false;\r\n                    }\r\n                }\r\n                newDatas.push(newsDataObj);\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    loadDataSelected(res) {\r\n        this.pageIndex = 1;\r\n        this.currentSelectOrgId = res.node.data.id;\r\n        if (!this.stopNodeSelected) {\r\n            this.onSearching = false;\r\n            this.hideToggleButton = false;\r\n            this.switchPage({ pageIndex: 1 });\r\n        }\r\n    }\r\n\r\n    hideSearchOrgElement(e) {\r\n        this.searchOrgElementVisible = false;\r\n    }\r\n\r\n    // 分层加载情况下，返回搜索后的组织列表\r\n    private hlAssembleLocationOrgList() {\r\n        if (!this.locationOrgText) {\r\n            return;\r\n        }\r\n        const param: OrgRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            notGetStopOrg: !this.includeStopOrg\r\n        };\r\n        param.name = this.locationOrgText;\r\n        param.getOrgAllPath = true;\r\n        this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n            this.searchOrgElementVisible = true;\r\n            if (res && res.data) {\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                this.locationOrgList = !!this.shownOrgId && this.shownOrgId != '*' ? this.hlConfirmSearchOrg(res.data) : res.data;\r\n                if (this.locationOrgList.length === 1) {\r\n                    this.searchOrgElementVisible = false;\r\n                    this.showUnSelectableInfo = false;\r\n                    this.locationOrg(this.locationOrgList[0]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // 搜索定位组织\r\n    searchLocationOrg(e: any) {\r\n        if (!this.locationOrgText) {\r\n            this.locationOrgList = [];\r\n            this.searchOrgElementVisible = false;\r\n            this.showUnSelectableInfo = false;\r\n            return;\r\n        }\r\n        if (e.code !== 'Enter' && e.type === 'keyup') {\r\n            return;\r\n        }\r\n        // 分层加载\r\n        if (this.enableHierarchicalLoading) {\r\n            this.hlAssembleLocationOrgList();\r\n        } else {\r\n            this.locationOrgList = this.assembleLocationOrgList();\r\n            this.searchOrgElementVisible = true;\r\n            if (this.locationOrgList.length === 1) {\r\n                this.searchOrgElementVisible = false;\r\n                this.showUnSelectableInfo = false;\r\n                this.locationOrg(this.locationOrgList[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 定位到某个组织\r\n    locationOrg(orgNode: any) {\r\n        this.locationOrgList = [];\r\n        this.searchOrgElementVisible = false;\r\n        this.showUnSelectableInfo = false;\r\n        if (this.enableHierarchicalLoading) {\r\n            // 分层加载\r\n            const param: OrgRequestParam = {\r\n                absOrgType: this.absOrgType,\r\n                notGetStopOrg: !this.includeStopOrg,\r\n                id: orgNode[this.orgIdField],\r\n                getAllParentOrg: true\r\n            };\r\n            this.apiService.getOrganization(this.absUserOrgUrl, param).subscribe((res: any) => {\r\n                if (!res || !res.data) {\r\n                    return;\r\n                }\r\n                if(this.withPermission) {\r\n                    res.data = res.data.filter(data => this.userManagePathResult.orgPathList.includes(data['path']));\r\n                }\r\n                let filterOrg: any[] = [];\r\n                if(!this.shownOrgId || this.shownOrgId === '*') {\r\n                    filterOrg = res.data;\r\n                } else {\r\n                    if(!this.shownOrgPath) {\r\n                        const targetData = this.originalTreeData.data.find(item => item.orgId == this.shownOrgId);\r\n                        if(targetData) {\r\n                            this.shownOrgPath = targetData.path;\r\n                        }\r\n                    }\r\n                    let pathList: any[] = [];\r\n                    for(let a = 0; a < this.shownOrgPath.length / 4; a++) {\r\n                        pathList.push(this.shownOrgPath.substring(0, 4 * (a + 1)));\r\n                    }\r\n                    const highLayer = res.data.filter(item => pathList.includes(item.path));\r\n                    filterOrg = filterOrg.concat(highLayer || []);\r\n                    let maxLength = orgNode.path.length / 4;\r\n                    let minLength = this.shownOrgPath.length / 4;\r\n                    if(maxLength > minLength) {\r\n                        res.data.forEach((item: any) => {\r\n                            for(let i = 0; i < (maxLength - minLength); i++) {\r\n                                if(Number(item.layer) === (Number(orgNode.layer) - i)) {\r\n                                    if(item.path.slice(0, -4) === orgNode.path.slice(0, -4 * (i + 1))) {\r\n                                        filterOrg.push(item);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const targetArray = filterOrg.filter(org => \r\n                    !(this.originalTreeData.data as Array<any>).find(data => data[this.orgIdField] == org[this.orgIdField]));\r\n                this.originalTreeData.data = this.originalTreeData.data.concat(targetArray || []);\r\n                this.treeListData = this.hlDataToTree(this.originalTreeData.data, 1, orgNode.path);\r\n                this.cd.detectChanges();\r\n                this.farrisTree.selectNode(orgNode[this.orgIdField]);\r\n                this.currentSelectOrgId = orgNode[this.orgIdField];\r\n                this.pageIndex = 1;\r\n                this.switchPage({ pageIndex: 1 });\r\n            });\r\n        } else {\r\n            const pathArr = this.getCurrentPath(orgNode);\r\n            this.expandTreeNode(this.treeListData, pathArr, Number(orgNode.layer));\r\n            this.farrisTree.selectNode(orgNode[this.orgIdField]);\r\n            this.currentSelectOrgId = orgNode[this.orgIdField];\r\n            this.pageIndex = 1;\r\n            this.switchPage({ pageIndex: 1 });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 数据转换\r\n     * @param parents 父级节点信息\r\n     * @param treeSource 原始数据信息\r\n     * @param layer 层级\r\n     */\r\n    treeData(parents: any, treeSource: any, layer: number) {\r\n        parents.forEach(parent => {\r\n            const parentPath = parent['data']['path'];\r\n            const parentLayer = parent['data']['layer'];\r\n            treeSource.forEach(item => {\r\n                if (item && item['data'] && item['data']['path']) {\r\n                    const itemPath = item['data']['path'];\r\n                    const itemLayer = item['data']['layer'];\r\n                    let targetPath: string;\r\n                    if (itemPath && itemPath.length > parentPath.length) {\r\n                        targetPath = itemPath.substr(0, Number(layer) * 4);\r\n                    }\r\n                    if (parentPath === targetPath && parentLayer === itemLayer - 1) {\r\n                        parent['children'].push(item);\r\n                    }\r\n                    if (parentPath === targetPath) {\r\n                        this.treeData([item], treeSource, Number(layer) + 1);\r\n                    }\r\n                }\r\n            });\r\n\r\n        })\r\n    }\r\n\r\n    private hlDataToTree(plainSource: any, layer: number, userPath: string) {\r\n        const treeSource = this.hlDealData(plainSource, userPath);\r\n        return treeSource;\r\n    }\r\n\r\n    // 获取组织树上已展开的节点\r\n    private nodeExpanded(arr: TreeNode[], expanded: any[]): void {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if(arr[i].expanded) {\r\n                expanded.push(arr[i].id);\r\n            }\r\n            if(arr[i].children.length) {\r\n                this.nodeExpanded(arr[i].children, expanded);\r\n            }\r\n        }\r\n    }\r\n\r\n    private hlDealData(data: any[], userPath: string) {\r\n        const userPathList = [];\r\n        if (!userPath) {\r\n            return [];\r\n        }\r\n        const maxLength = userPath.length / 4 - 1;\r\n        for (let a = 0; a < maxLength; a++) {\r\n            userPathList.push(userPath.substring(0, 4 * (a + 1)));\r\n        }\r\n        let expanded = [];\r\n        this.nodeExpanded(this.treeListData, expanded);\r\n        const newDatas = [];\r\n        const nodes = new Map<string, any>();\r\n        if (data.length) {\r\n            data.forEach(item => {\r\n                const path = item['path'];\r\n                const parentPath = Number(item['layer']) > 1 ? (item['path'] as string).slice(0, 4 * (Number(item['layer']) - 1)) : 'top';\r\n                if(!nodes[path]) {\r\n                    nodes[path] = { children: [] }\r\n                }\r\n                nodes[path] = {\r\n                    data : {\r\n                        id: item.orgId,\r\n                        name: item.name,\r\n                        path: item.path,\r\n                        layer: Number(item.layer)\r\n                    },\r\n                    expanded: true,\r\n                    selectable: true,\r\n                    children: nodes[path]['children']\r\n                }\r\n                if(!!this.shownOrgId && this.shownOrgId !== '*' && !!this.shownOrgPath) {\r\n                    if(this.shownOrgPath.indexOf(item.path) !== -1 && item.path.length < this.shownOrgPath.length) {\r\n                        nodes[path].selectable = false;\r\n                    }\r\n                }\r\n                if (userPathList.includes(item.path) || expanded.includes(item.orgId)) {\r\n                    nodes[path].expanded = true;\r\n                } else {\r\n                    nodes[path].expanded = false;\r\n                    // todo 分层加载需要\r\n                    if (this.enableHierarchicalLoading && item.isDetail === '0') {\r\n                        nodes[path].leaf = false;\r\n                    }\r\n                }\r\n                if(parentPath == 'top') {\r\n                    newDatas.push(nodes[path]);\r\n                } else {\r\n                    if(!nodes[parentPath]) {\r\n                        nodes[parentPath] = { children: [] }\r\n                    }\r\n                    (nodes[parentPath]['children'] as Array<any>).push(nodes[path]);\r\n                }\r\n            });\r\n        }\r\n        return newDatas;\r\n    }\r\n\r\n    // 展开节点\r\n    private expandTreeNode(treeData: any, path: any[], layer: number) {\r\n        treeData.forEach(node => {\r\n            if (path.includes(node.data.path)) {\r\n                this.farrisTree.expandNode(node.data.id);\r\n            }\r\n            if (node.data.layer < layer && node.children.length) {\r\n                this.expandTreeNode(node.children, path, layer);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 获取当前组织的path路径\r\n    private getCurrentPath(orgNode: any) {\r\n        const pathList = [];\r\n        const length = orgNode.path.length / 4;\r\n        for (let a = 0; a < length; a++) {\r\n            pathList.push(orgNode.path.substring(0, 4 * (a + 1)));\r\n        }\r\n        return pathList;\r\n    }\r\n\r\n    // 全加载情况下，返回搜索后的组织列表\r\n    private assembleLocationOrgList() {\r\n        const orgList = [];\r\n        if (!this.locationOrgText) {\r\n            return orgList;\r\n        }\r\n        const filterOrgs = this.confirmSearchOrg();\r\n        filterOrgs.forEach(org => {\r\n            const parentNodes = [];\r\n            this.getUnitParentsById(this.originalTreeData.data, org, parentNodes);\r\n            org.orgAllPath = this.assembleOrgFullPath(parentNodes);\r\n            org.orgAllPath = org.orgAllPath ? org.orgAllPath : org.name;\r\n        });\r\n        if(this.withPermission) {\r\n            return filterOrgs.filter(org => this.userManagePathResult.orgPathList.includes(org['path']));\r\n        }\r\n        return filterOrgs;\r\n    }\r\n\r\n    // 组织树全加载的情形下会被调用\r\n    private confirmSearchOrg(): any[] {\r\n        let resultArray: any[] = [];\r\n        if (!!this.shownOrgId && this.shownOrgId !== '*') {\r\n            if(this._onlyCurrentOrg) {\r\n                const filterOrg = this.originalTreeData.data.filter(it => it.name.includes(this.locationOrgText));\r\n                if(filterOrg.length) {\r\n                    const targetOrg = filterOrg.find(org => org[this.orgIdField] == this.shownOrgId);\r\n                    if(targetOrg) {\r\n                        resultArray = [targetOrg];\r\n                    } else {\r\n                        this.showUnSelectableInfo = true;\r\n                    }\r\n                }\r\n                return resultArray;\r\n            } else {\r\n                const pathList: any[] = [];\r\n                this.originalTreeData.data.forEach(data => {\r\n                    if(data['orgId'] == this.shownOrgId) {\r\n                        this.shownOrgPath = data.path;\r\n                        for(let a = 0; a < (this.shownOrgPath.length / 4 - 1); a++) {\r\n                            pathList.push({ path: this.shownOrgPath.substring(0, 4 * (a + 1)) });\r\n                        }\r\n                    }\r\n                });\r\n                this.originalTreeData.data.forEach(data => {\r\n                    if(data.name.indexOf(this.locationOrgText) !== -1) {\r\n                        if(data.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath) {\r\n                            resultArray.push(data);\r\n                        } else if(this._isInArray(data['path'], 'path', pathList)) {\r\n                            this.showUnSelectableInfo = true;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            resultArray = this.originalTreeData.data.filter(item => item.name.indexOf(this.locationOrgText) !== -1);\r\n        }\r\n        return resultArray;\r\n    } \r\n\r\n    // 组织树分层加载的情形下会被调用\r\n    private hlConfirmSearchOrg(orgArray: any[]): any[] {\r\n        let resultArray: any[] = [];\r\n        const pathList: any[] = [];\r\n        this.originalTreeData.data.forEach(data => {\r\n            if(data['orgId'] == this.shownOrgId) {\r\n                this.shownOrgPath = data.path;\r\n                for(let a = 0; a < (this.shownOrgPath.length / 4 - 1); a++) {\r\n                    pathList.push(this.shownOrgPath.substring(0, 4 * (a + 1)));\r\n                }\r\n            }\r\n        });\r\n        if(this._onlyCurrentOrg) {\r\n            const targetData = orgArray.find(org => org[this.orgIdField] == this.shownOrgId);\r\n            resultArray = targetData ? [targetData] : [];\r\n            if(!resultArray.length) {\r\n                this.showUnSelectableInfo = orgArray.some(it => pathList.includes(it.path) ||\r\n                    it.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath);\r\n            }\r\n            return resultArray;\r\n        } else {\r\n            orgArray.forEach(item => {\r\n                if(item.path.substring(0, this.shownOrgPath.length) === this.shownOrgPath) {\r\n                    resultArray.push(item);\r\n                } else if(pathList.includes(item.path)) {\r\n                    this.showUnSelectableInfo = true;\r\n                }\r\n            });\r\n            return resultArray;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据节点信息获取到集团下单位的父级元素\r\n     * @param array 原始数据\r\n     * @param curNode 节点信息\r\n     * @returns null\r\n     */\r\n    private getUnitParentsById(array: any[], curNode: any, resArray: any[]) {\r\n        const parents = array.filter(item => {\r\n            return Number(item.layer) === (Number(curNode.layer) - 1);\r\n        });\r\n        if (!parents) {\r\n            return;\r\n        }\r\n        for (const item of parents) {\r\n            if (item.orgId === curNode.parentId && curNode.valueType === 'depttype') {\r\n                item.selectable = false;\r\n                resArray.push(item);\r\n                if (item.valueType === 'depttype') {\r\n                    this.getUnitParentsById(array, item, resArray);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private sortArray(arr: any[]) {\r\n        if (arr.length === 0) {\r\n            return arr;\r\n        }\r\n        arr = arr.sort((a: any, b: any) => {\r\n            return Number(a.layer) - Number(b.layer);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    private assembleOrgFullPath(arr: any[]) {\r\n        const sortedArr = this.sortArray(arr);\r\n        let path = sortedArr.reduce((pre, cur, index) => {\r\n            return pre + '_' + cur.name;\r\n        }, '');\r\n        path = path.substring(1);\r\n        return path;\r\n    }\r\n\r\n    groupPersonnelDialogChange(e: any) {\r\n        this.showGroupPersonnelDialog = e.showDialog;\r\n        this.selectedGroupId = e.selectedGroupId;\r\n    }\r\n\r\n    beforePageIndexChange(inputEl: KeyboardEvent, maxNumber) {\r\n        const target = inputEl.target as any;\r\n        const currentPageNumber = Number(target.value);\r\n        if (currentPageNumber > maxNumber) {\r\n            target.value = maxNumber;\r\n        } else {\r\n            if (currentPageNumber < 1) {\r\n                target.value = 1;\r\n            }\r\n        }\r\n        this.pageIndex = Number(target.value);\r\n    }\r\n\r\n    toggleAll() {\r\n        this.allChecked = !this.allChecked;\r\n        this.items.forEach(item => {\r\n            item.checked = this.allChecked;\r\n            if (item.checked) {\r\n                this._insertOneIntoSelections(item);\r\n            } else {\r\n                this.selections.forEach((selection, index) => {\r\n                    if (item[this.idField] === selection[this.idField]) {\r\n                        this.selections.splice(index, 1);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleOne(item: any) {\r\n        item.checked = !item.checked;\r\n        if (item.checked) {\r\n            this._insertOneIntoSelections(item);\r\n            this.pageChangeCheck();\r\n        } else {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    this.selections.splice(index, 1);\r\n                }\r\n            });\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    turnOverPage(dir: string, num: number) {\r\n        if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {\r\n            return;\r\n        }\r\n        this.pageIndex = this.pageIndex + num;\r\n        this.switchPage({ pageIndex: this.pageIndex });\r\n    }\r\n\r\n    // 人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndex = size.pageIndex;\r\n        if (this.onSearching) {\r\n            this.onSearch(size);\r\n            return;\r\n        }\r\n        this.assembleDataByOrgId();\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    assembleDataByOrgId() {\r\n        if (!this.currentSelectOrgId || this.currentSelectOrgId == '*') {\r\n            this.currentSelectOrgId = this.treeListData[0]['data']['id'];\r\n        }\r\n        const requestParam: PersonnelRequestParam = {\r\n            withAllOrg: this.pEnableChildHierarchy ? 1 : 0,\r\n            notGetStopUser: !this.includeStopUser,\r\n            notGetCurrentUser: !this.pIncludeCurrentUser,\r\n            orderField: this.orderField,\r\n            userTypeMode: this.userTypeMode\r\n        };\r\n        if (this.enablePagination) {\r\n            requestParam.pageSize = this.pageSize;\r\n            requestParam.pageIndex = this.pageIndex;\r\n        }\r\n        if (this.withPermission) {\r\n            requestParam.withPermission = true;\r\n            requestParam.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            requestParam.securityControl = true;\r\n            requestParam.securityLevel = this.securityLevel;\r\n        }\r\n        this.stopNodeSelected = true;\r\n        // 根据组织加载人员\r\n        this.apiService.getPersonnelByOrgId(this.absUserOrgUrl, this.absOrgType, this.currentSelectOrgId, requestParam).subscribe((res: any) => {\r\n            const rcResData = res ? res.data : [];\r\n            this.items = rcResData;\r\n            this.pageTotalAll = res.totalCount;\r\n            this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n            if (this.pageTotal === 0) {\r\n                this.pageTotal = 1;\r\n            }\r\n            this.allChecked = false;\r\n            this.unSelectedListLoad();\r\n            this.stopNodeSelected = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * datagrid用于数据展示\r\n     */\r\n    unSelectedListLoad() {\r\n        this.items.forEach(item => {\r\n            item.inFavorites = false;\r\n            item.checked = false;\r\n            if (this._isInArray(item[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            }\r\n            if (this._isInArray(item[this.idField], this.idField, this.selections) !== -1) {\r\n                item.checked = true;\r\n            }\r\n            item.displayName = !!this.showUserCode ? ('[' + item.code + ']' + item.name) : item.name;\r\n            if(this.showOrgAllPathByDesc && item.orgAllPath) {\r\n                item.orgAllPath = this.changeDisplayOrgAllPath(item.orgAllPath);\r\n            }\r\n        });\r\n        this.items = this.items.slice();\r\n        this.pageChangeCheck();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.selections = this.selections.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error('前2个参数必填');\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    pageChangeCheck() {\r\n        const checkeds = this.items.filter(item => item.checked)\r\n        if (this.items.length !== 0 && this.items.length === checkeds.length) {\r\n            this.allChecked = true;\r\n        }\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n}\r\n","import { Component, Input, EventEmitter, Output, ViewChild } from \"@angular/core\";\r\nimport { ApiLocalService } from \"../utils/api-service\";\r\nimport { DatagridComponent } from \"@farris/ui-datagrid\";\r\nimport { of } from 'rxjs';\r\n\r\n// 兼容保留，该组件无用\r\n@Component({\r\n    template: `<farris-datagrid #unSelectDatagridOrg class=\"s-unSelectDatagrid\" [pagerViewMode]=\"'simple'\" [showCheckbox]=\"true\" [checkOnSelect]=\"true\"\r\n[selectOnCheck]=\"true\" [multiSelect]=\"true\" [columns]=\"columnsOrg\" [data]=\"itemsOrg\"\r\n[enableSelectRow]=\"true\" [showHeader]=\"false\" [fitColumns]=\"true\" [height]=\"370\"\r\n[showBorder]=\"false\" [striped]=\"false\" [fit]=\"true\" [showPageNumber]=\"false\"\r\n[pageIndex]=\"pageIndexOrg\" [pageSize]=\"pageSizeOrg\" [total]=\"pageTotalAllOrg\"\r\n(checked)=\"selectLine($event)\" (pageChanged)=\"switchPage($event)\"\r\n[beforeUncheck]=\"onBeforeUncheck\">\r\n</farris-datagrid>`\r\n})\r\n\r\nexport class unSelectDatagridOrgComponent {\r\n\r\n    @ViewChild('unSelectDatagridOrg') unSelectDatagridOrg: DatagridComponent;\r\n\r\n    @Input() columnsOrg: any\r\n    @Input() itemsOrg: any\r\n    @Input() pageIndexOrg: any\r\n    @Input() pageSizeOrg: any\r\n    @Input() pageTotalAllOrg: any\r\n    @Input() pathOrg: any\r\n    @Input() orgIdOrg: any\r\n    @Input() isContainOrg: any\r\n    @Input() pageTotalOrg: any\r\n    @Input() isSingleCheck: any\r\n    @Input() selections: any\r\n    @Input() noSelectToRight: any\r\n    @Input() searchText: any\r\n    @Input() isLoadOutData: any\r\n    @Input() unSelectedOrgLists: any\r\n    @Input() unSelectedListOrg: any\r\n    @Input() organizationList: any\r\n    @Input() type: any\r\n    @Input() listIdField: string\r\n    @Input() searchPage: boolean;\r\n    @Input() isenabled: number;\r\n    @Input() isExcludeMe: number;\r\n    @Output() isAllSelect = new EventEmitter<any>();\r\n\r\n    cover = 'data:image/png;base64,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';\r\n\r\n\r\n\r\n    constructor(\r\n        private ApiLocalService: ApiLocalService,\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.unSelectDatagridOrg.loadData(this.itemsOrg);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.pageChangeCheck();\r\n    }\r\n\r\n    /**\r\n     * 下级组织展示区datagrid用于数据加载\r\n     */\r\n    unSelectedListOrgLoad() {\r\n        this.itemsOrg = [];\r\n        this.unSelectedListOrg.forEach(res => {\r\n            let name = res.nameChs;\r\n            this.itemsOrg.push({ \"displayname\": name, \"id\": res.id, \"organizationName\": res.remark, \"userTotal\": res.userTotal, \"userInFo\": this.cover, \"userList\": res.userList })\r\n        })\r\n        this.unSelectDatagridOrg.loadData(this.itemsOrg);\r\n        this.pageChangeCheck();\r\n        let emitojb = {\r\n            itemsOrg: this.itemsOrg,\r\n            pageIndexOrg: this.pageIndexOrg,\r\n            pageSizeOrg: this.pageSizeOrg,\r\n            pageTotalOrg: this.pageTotalOrg,\r\n            pageTotalAllOrg: this.pageTotalAllOrg,\r\n            unSelectedListOrg: this.unSelectedListOrg\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    /**\r\n       * 当前行选中\r\n       * @param data 当前行的数据（）\r\n       */\r\n    selectLine(data: any) {\r\n        if (this.isSingleCheck) {\r\n            if (this.selections.length == 0) {\r\n                this._insertOneIntoSelections(data.data);\r\n            } else if (this.selections.length >= 1) {\r\n                alert(this.noSelectToRight);\r\n            }\r\n        } else {\r\n            this._insertOneIntoSelections(data.data);\r\n        }\r\n        let emitojb = {\r\n            itemsOrg: this.itemsOrg,\r\n            pageIndexOrg: this.pageIndexOrg,\r\n            pageSizeOrg: this.pageSizeOrg,\r\n            pageTotalOrg: this.pageTotalOrg,\r\n            pageTotalAllOrg: this.pageTotalAllOrg,\r\n            unSelectedListOrg: this.unSelectedListOrg\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    //人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndexOrg = size.pageIndex;\r\n        // if (this.searchPage) {\r\n        //     let isChinese: number;\r\n        //     if (/^[\\u4e00-\\u9fa5]+$/i.test(this.searchText)) {\r\n        //         isChinese = 0;\r\n        //     } else if (!(/^[\\u4e00-\\u9fa5]+$/i.test(this.searchText)) && !(escape(this.searchText).indexOf(\"%u\") < 0)) {\r\n        //         alert(\"输入框禁止同时输入汉字和拼音！\")\r\n        //     } else {\r\n        //         isChinese = 1;\r\n        //     }\r\n        //     this.ApiLocalService.getPersonnelForUserName(this.pageSize, this.pageIndex, this.searchText, isChinese, this.isContain, this.path, this.isenabled).subscribe((res: any) => {\r\n        //       this.unSelectedLists = res;\r\n        //       var linshi: any = this.unSelectedLists;\r\n        //       this.unSelectedList = linshi.data;\r\n        //       this.pageTotalAll = linshi.total;\r\n        //       this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n        //       if (this.pageTotal == 0) {\r\n        //         this.pageTotal = 1;\r\n        //       }\r\n        //       this.unSelectedListLoad();\r\n        //     });\r\n        // } else {\r\n            if (this.isLoadOutData) {\r\n                //console.log(\"暂未开启\")\r\n            } else {\r\n\r\n            }\r\n        // }\r\n    }\r\n\r\n    /**\r\n       * 人员展示区的复选框取消勾选时触发逻辑\r\n       * @param $event\r\n       * @returns\r\n       */\r\n    onBeforeUncheck = ($event) => {\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.rowData[\"id\"] === selection[\"id\"]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        })\r\n        let emitojb = {\r\n            itemsOrg: this.itemsOrg,\r\n            pageIndexOrg: this.pageIndexOrg,\r\n            pageSizeOrg: this.pageSizeOrg,\r\n            pageTotalOrg: this.pageTotalOrg,\r\n            pageTotalAllOrg: this.pageTotalAllOrg,\r\n            unSelectedListOrg: this.unSelectedListOrg\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n        return of(true);\r\n    }\r\n\r\n    /**\r\n       * 选中并插入当前行数据到右侧\r\n       * @param data 当前行的数据\r\n       * @param collection 暂存当前数据的集合\r\n       */\r\n    _insertOneIntoSelections(data: any) {\r\n        let collection: any[] = [];\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[\"id\"], \"id\", this.selections)) {\r\n            return;\r\n        }\r\n        collection.push(data)\r\n        this._insertSomeIntoSelections(collection);\r\n    }\r\n\r\n    /**\r\n         * 判断是否在内\r\n         * @param value\r\n         * @param field\r\n         * @param array\r\n         * @returns\r\n         */\r\n    _isInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error('前2个参数必填');\r\n        }\r\n        return array.find(item => value === item[field]) ? true : false;\r\n    }\r\n\r\n    _insertSomeIntoSelections(userArray: any[]) {\r\n        userArray.forEach(user => {\r\n            if (!this._isInArray(user[\"id\"], \"id\", this.selections)) {\r\n                this.selections.push(user);\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n         */\r\n    pageChangeCheck() {\r\n        if (this.unSelectedListOrg) {\r\n            this.unSelectedListOrg.forEach(item => {\r\n                if (this._isInArray(item.id, \"id\", this.selections)) {\r\n                    this.unSelectDatagridOrg.checkRow(item.id);\r\n                } else {\r\n                    this.unSelectDatagridOrg.unCheckRow(item.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Component, Input, EventEmitter, Output, ViewChild } from \"@angular/core\";\r\nimport { ApiLocalService } from \"../utils/api-service\";\r\nimport { DatagridComponent } from \"@farris/ui-datagrid\";\r\nimport { of } from 'rxjs';\r\n\r\n// 兼容保留，该组件无用\r\n@Component({\r\n    template: `<farris-datagrid #unSelectDatagridRole class=\"s-unSelectDatagrid\" [pagerViewMode]=\"'simple'\" [showCheckbox]=\"true\" [checkOnSelect]=\"true\"\r\n[selectOnCheck]=\"true\" [multiSelect]=\"true\" [columns]=\"columnsRole\" [data]=\"itemsRole\"\r\n[enableSelectRow]=\"true\" [showHeader]=\"false\" [fitColumns]=\"true\" [height]=\"370\"\r\n[showBorder]=\"false\" [striped]=\"false\" [fit]=\"true\" [showPageNumber]=\"false\"\r\n[pageIndex]=\"pageIndexRole\" [pageSize]=\"pageSizeRole\" [total]=\"pageTotalAllRole\"\r\n(checked)=\"selectLine($event)\" (pageChanged)=\"switchPage($event)\"\r\n[beforeUncheck]=\"onBeforeUncheck\">\r\n</farris-datagrid>`\r\n})\r\n\r\nexport class unSelectDatagridRoleComponent {\r\n\r\n    @ViewChild('unSelectDatagridRole') unSelectDatagridRole: DatagridComponent;\r\n\r\n    @Input() columnsRole: any\r\n    @Input() itemsRole: any\r\n    @Input() pageIndexRole: any\r\n    @Input() pageSizeRole: any\r\n    @Input() pageTotalAllRole: any\r\n    @Input() pathRole: any\r\n    @Input() orgIdRole: any\r\n    @Input() isContainRole: any\r\n    @Input() pageTotalRole: any\r\n    @Input() isSingleCheck: any\r\n    @Input() selections: any\r\n    @Input() noSelectToRight: any\r\n    @Input() searchText: any\r\n    @Input() isLoadOutData: any\r\n    @Input() unSelectedRoleLists: any\r\n    @Input() unSelectedListRole: any\r\n    @Input() organizationList: any\r\n    @Input() type: any\r\n    @Input() listIdField: string\r\n    @Input() searchPage: boolean;\r\n    @Input() isenabled: number;\r\n    @Input() isExcludeMe: number;\r\n    @Output() isAllSelect = new EventEmitter<any>();\r\n\r\n\r\n    constructor(\r\n        private ApiLocalService: ApiLocalService,\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.unSelectDatagridRole.loadData(this.itemsRole);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.pageChangeCheck();\r\n    }\r\n\r\n    /**\r\n     * 下级组织展示区datagrid用于数据加载\r\n     */\r\n    unSelectedListRoleLoad() {\r\n        this.itemsRole = [];\r\n        this.unSelectedListRole.forEach(res => {\r\n            let name = res.nameChs;\r\n            this.itemsRole.push({ \"displayname\": name, \"id\": res.id, \"organizationName\": res.remark, \"userTotal\": res.userTotal, \"userInFo\": res.userInfo, \"userList\": res.userList })\r\n        })\r\n        this.unSelectDatagridRole.loadData(this.itemsRole);\r\n        this.pageChangeCheck();\r\n        let emitojb = {\r\n            itemsRole: this.itemsRole,\r\n            pageIndexRole: this.pageIndexRole,\r\n            pageSizeRole: this.pageSizeRole,\r\n            pageTotalRole: this.pageTotalRole,\r\n            pageTotalAllRole: this.pageTotalAllRole,\r\n            unSelectedListRole: this.unSelectedListRole\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    /**\r\n       * 当前行选中\r\n       * @param data 当前行的数据（）\r\n       */\r\n    selectLine(data: any) {\r\n        if (this.isSingleCheck) {\r\n            if (this.selections.length == 0) {\r\n                this._insertOneIntoSelections(data.data);\r\n            } else if (this.selections.length >= 1) {\r\n                alert(this.noSelectToRight);\r\n            }\r\n        } else {\r\n            this._insertOneIntoSelections(data.data);\r\n        }\r\n        let emitojb = {\r\n            itemsRole: this.itemsRole,\r\n            pageIndexRole: this.pageIndexRole,\r\n            pageSizeRole: this.pageSizeRole,\r\n            pageTotalRole: this.pageTotalRole,\r\n            pageTotalAllRole: this.pageTotalAllRole,\r\n            unSelectedListRole: this.unSelectedListRole\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n    }\r\n\r\n    //人员展示翻页触发查询（！）\r\n    switchPage(size) {\r\n        this.pageIndexRole = size.pageIndex;\r\n        // if (this.searchPage) {\r\n        //     let isChinese: number;\r\n        //     if (/^[\\u4e00-\\u9fa5]+$/i.test(this.searchText)) {\r\n        //         isChinese = 0;\r\n        //     } else if (!(/^[\\u4e00-\\u9fa5]+$/i.test(this.searchText)) && !(escape(this.searchText).indexOf(\"%u\") < 0)) {\r\n        //         alert(\"输入框禁止同时输入汉字和拼音！\")\r\n        //     } else {\r\n        //         isChinese = 1;\r\n        //     }\r\n        //     this.ApiLocalService.getPersonnelForUserName(this.pageSize, this.pageIndex, this.searchText, isChinese, this.isContain, this.path, this.isenabled).subscribe((res: any) => {\r\n        //       this.unSelectedLists = res;\r\n        //       var linshi: any = this.unSelectedLists;\r\n        //       this.unSelectedList = linshi.data;\r\n        //       this.pageTotalAll = linshi.total;\r\n        //       this.pageTotal = Math.ceil(this.pageTotalAll / this.pageSize);\r\n        //       if (this.pageTotal == 0) {\r\n        //         this.pageTotal = 1;\r\n        //       }\r\n        //       this.unSelectedListLoad();\r\n        //     });\r\n        // } else {\r\n            if (this.isLoadOutData) {\r\n                //console.log(\"暂未开启\")\r\n            } else {\r\n\r\n            }\r\n        // }\r\n    }\r\n\r\n    /**\r\n       * 人员展示区的复选框取消勾选时触发逻辑\r\n       * @param $event\r\n       * @returns\r\n       */\r\n    onBeforeUncheck = ($event) => {\r\n        this.selections.forEach((selection, index) => {\r\n            if ($event.rowData[\"id\"] === selection[\"id\"]) {\r\n                this.selections.splice(index, 1);\r\n            }\r\n        })\r\n        let emitojb = {\r\n            itemsRole: this.itemsRole,\r\n            pageIndexRole: this.pageIndexRole,\r\n            pageSizeRole: this.pageSizeRole,\r\n            pageTotalRole: this.pageTotalRole,\r\n            pageTotalAllRole: this.pageTotalAllRole,\r\n            unSelectedListRole: this.unSelectedListRole\r\n        }\r\n        this.isAllSelect.emit(emitojb);\r\n        return of(true);\r\n    }\r\n\r\n    /**\r\n       * 选中并插入当前行数据到右侧\r\n       * @param data 当前行的数据\r\n       * @param collection 暂存当前数据的集合\r\n       */\r\n    _insertOneIntoSelections(data: any) {\r\n        let collection: any[] = [];\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[\"id\"], \"id\", this.selections)) {\r\n            return;\r\n        }\r\n        collection.push(data)\r\n        this._insertSomeIntoSelections(collection);\r\n    }\r\n\r\n    /**\r\n         * 判断是否在内\r\n         * @param value\r\n         * @param field\r\n         * @param array\r\n         * @returns\r\n         */\r\n    _isInArray(value: string, field: string, array: any[]) {\r\n        if (!field || !value) {\r\n            throw new Error('前2个参数必填');\r\n        }\r\n        return array.find(item => value === item[field]) ? true : false;\r\n    }\r\n\r\n    _insertSomeIntoSelections(userArray: any[]) {\r\n        userArray.forEach(user => {\r\n            if (!this._isInArray(user[\"id\"], \"id\", this.selections)) {\r\n                this.selections.push(user);\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n         */\r\n    pageChangeCheck() {\r\n        if (this.unSelectedListRole) {\r\n            this.unSelectedListRole.forEach(item => {\r\n                if (this._isInArray(item.id, \"id\", this.selections)) {\r\n                    this.unSelectDatagridRole.checkRow(item.id);\r\n                } else {\r\n                    this.unSelectDatagridRole.unCheckRow(item.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import {\r\n    Component, Input, EventEmitter, Output, OnInit, AfterViewInit, ChangeDetectorRef, Optional\r\n} from '@angular/core';\r\nimport * as _ from 'lodash-es';\r\nimport { noDataImg } from '../../assets/resource';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { FavoritesTool } from '../../utils/favorites.tool';\r\nimport { PanelMode, RfRequestParam, SecurityLevel } from '../../utils/user.type';\r\nimport { ApiLocalService } from '../../utils/api-service';\r\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { trim } from 'lodash-es';\r\nimport { BasePathService } from '@farris/rtf';\r\n\r\n@Component({\r\n    selector: 'lib-quick-select',\r\n    templateUrl: './qsp.component.html',\r\n    styleUrls: ['./qsp.component.css'],\r\n})\r\nexport class QuickSelectComponent implements OnInit, AfterViewInit {\r\n\r\n    @Input() idField: string;\r\n    @Input() multiSelect: boolean;\r\n    @Input() enableChildHierarchy: boolean;\r\n    @Input() includeStopUser: boolean;\r\n    @Input() personnelOrderField: string;\r\n    @Input() includeCurrentUser: boolean;\r\n    @Input() disableCurrentUser: boolean;\r\n    @Input() userTypeMode: string;\r\n    @Input() filterId: string;\r\n    @Input() absUserOrgUrl: string;\r\n    @Input() set quickInput(value: any) {\r\n        if (!this.firstLoad) {\r\n            this.searchText = trim(value);\r\n            this.searchTextStream.next(value);\r\n        } else if (!this.hasSetGlobalConfigParam) {\r\n            const personnelSelectorParamUrl = '/api/runtime/sys/v1.0/personnel-selector-param';\r\n            const basePathUrl = BasePathService.convertPath(personnelSelectorParamUrl);\r\n            this.apiService.getGlobalParamConfig(basePathUrl).subscribe((res: any) => {\r\n                res['success'] && this.setGlobalConfigParam(res);\r\n                this.hasSetGlobalConfigParam = true;\r\n            });\r\n        }\r\n        this.firstLoad = false;\r\n        this.checkeds = [];\r\n    };\r\n    @Input() enableFavorites: boolean;\r\n    @Input() absOrgType: string;\r\n    @Input() busNum: string;\r\n    @Input()\r\n    set checkedDataIds(value: string[]) {\r\n        this._checkedDataIds = value;\r\n    }\r\n    get checkedDataIds() {\r\n        return this._checkedDataIds;\r\n    }\r\n    @Input() set originalSelections(value: any[]) {\r\n        this.selections = value.slice();\r\n    };\r\n    @Input() validElementsInfo: string;\r\n    @Input() hasSetGlobalConfigParam: boolean = false;\r\n    @Input() withPermission: boolean;\r\n    @Input() showOrgAllPathByDesc: boolean;\r\n    @Input() enableSecurityControl: boolean;\r\n    @Input() securityLevel: SecurityLevel;\r\n    @Output() selectionsChange = new EventEmitter<any>();\r\n    @Output() togglePanelModelChange = new EventEmitter<PanelMode>();\r\n\r\n    allChecked = false;\r\n    allIndexId = 'allIndexId';\r\n    noDataImg = noDataImg;\r\n    items = [];\r\n    recentContactsList = [];\r\n    favoritesList = [];\r\n    searchText = '';\r\n    private searchTextStream: BehaviorSubject<string> = new BehaviorSubject<string>('');\r\n    selections = []\r\n    firstLoad = true;\r\n    checkeds = [];\r\n    // 当前已选择的人员，可能不在快捷面板中，因为此处的人员都是最近人员\r\n    _checkedDataIds = [];\r\n    // 是否显示用户编号\r\n    showUserCode = true;\r\n\r\n    constructor(\r\n        @Optional() private apiService: ApiLocalService,\r\n        @Optional() private notifyService: NotifyService,\r\n        @Optional() private favoritesTool: FavoritesTool,\r\n        @Optional() private cdRef: ChangeDetectorRef\r\n\r\n    ) {\r\n        this.allIndexId = Math.random().toString(16).substring(3, 12);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // 兼容老表单\r\n        if (this.favoritesTool) {\r\n            this.favoritesTool.getFavoritesList().subscribe((result) => {\r\n                this.favoritesList = result ? (result as any).data : [];\r\n                this.favoritesTool.favoritesList = this.favoritesList.slice();\r\n                this.getRecentContactsList();\r\n            });\r\n            this.favoritesTool.favoritesSubject.subscribe(data => {\r\n                this.favoritesList = data;\r\n                this.assembleItemsFavorites();\r\n            })\r\n        }\r\n\r\n        this.searchTextStream.pipe(\r\n            debounceTime(500)\r\n        ).subscribe(data => {\r\n            if (!!data) {\r\n                this.getItemsBySearch(data);\r\n            } else {\r\n                this.items = this.recentContactsList.slice();\r\n                this.assembleItemsChecked();\r\n                this.assembleItemsFavorites();\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n    }\r\n\r\n    private setGlobalConfigParam(param: any) {\r\n        if(this.userTypeMode == 'WfMode' && param.hasOwnProperty('showUserCode') && this.showUserCode !== param['showUserCode']) {\r\n            this.showUserCode = param['showUserCode'];\r\n        }\r\n        // 是否倒序展示组织全路径\r\n        if(param.hasOwnProperty('showOrgAllPathByDesc') && this.showOrgAllPathByDesc !== param['showOrgAllPathByDesc']) {\r\n            this.showOrgAllPathByDesc = param['showOrgAllPathByDesc'];\r\n        }\r\n        // 是否启用权限控制\r\n        if(this.withPermission && param.hasOwnProperty('withPermission') && this.withPermission !== param['withPermission']) {\r\n            this.withPermission = param['withPermission'];\r\n        }\r\n    }\r\n\r\n    private getItemsBySearch(searchText: any) {\r\n        const searchItems = this.recentContactsList.slice();\r\n        if (!searchText) {\r\n            return;\r\n        }\r\n        this.items = searchItems.filter(item => (item.code && item.code.indexOf(searchText) !== -1) || (item.name && item.name.indexOf(searchText) !== -1) || (item.initials && item.initials.indexOf(searchText) !== -1) || (item.pinyin && item.pinyin.indexOf(searchText) !== -1));\r\n        this.assembleItemsChecked();\r\n    }\r\n\r\n    private getRecentContactsList() {\r\n        const param: RfRequestParam = {\r\n            absOrgType: this.absOrgType,\r\n            bizId: this.busNum,\r\n            objectValue: 'RecentContacts'\r\n        };\r\n        if (this.disableCurrentUser) {\r\n            const currentUserId = (window as any).gspframeworkService.common.userInfos.get().id;\r\n            param.filterUserIds = [currentUserId];\r\n        }\r\n        if (this.withPermission) {\r\n            param.withPermission = true;\r\n            param.authOp = 'UserManage';\r\n        }\r\n        if (this.enableSecurityControl) {\r\n            param.securityControl = true;\r\n            param.securityLevel = this.securityLevel;\r\n        }\r\n        this.favoritesTool.curdRecentContactsOrFavorites('query', param).subscribe((rcRes: any) => {\r\n            const rcResData = rcRes ? rcRes.data : [];\r\n            rcResData.forEach(res => {\r\n                res.displayName = !!this.showUserCode ? ('[' + res.code + ']' + res.name) : res.name;\r\n                if(this.showOrgAllPathByDesc && res.orgAllPath) {\r\n                    res.orgAllPath = this.changeDisplayOrgAllPath(res.orgAllPath);\r\n                }\r\n\r\n            });\r\n            this.recentContactsList = rcResData.slice();\r\n            this.items = rcResData.slice();\r\n            this.assembleItemsChecked();\r\n            if (this.enableFavorites) {\r\n                this.assembleItemsFavorites();\r\n            }\r\n        });\r\n    }\r\n\r\n    togglePanelMode(showQuickMode: boolean, showAdvancedMode: boolean) {\r\n        this.togglePanelModelChange.emit({\r\n            showQuickMode,\r\n            showAdvancedMode\r\n        });\r\n    }\r\n\r\n    toggleAll() {\r\n        if (!this.allChecked) {\r\n            this.checkAll();\r\n        } else {\r\n            this.unCheckAll();\r\n        }\r\n    }\r\n\r\n    toggleOne(data) {\r\n        if (data.checked) {\r\n            this.unSelectLine(data);\r\n        } else {\r\n            this.selectLine(data);\r\n        }\r\n    }\r\n\r\n    assembleItemsChecked(): void {\r\n        this.items.forEach(item => {\r\n            item.checked = false;\r\n            item.indexId = Math.random().toString(16).substring(2);\r\n            if ((this.selections.length && this._isInArray(item[this.idField], this.idField, this.selections) !== -1)\r\n                || (this.checkedDataIds.includes(item[this.idField]))) {\r\n                item.checked = true;\r\n                if (this._isInArray(item[this.idField], this.idField, this.checkeds) === -1) {\r\n                    this.checkeds.push(item);\r\n                }\r\n            }\r\n        });\r\n        this.items = this.items.slice();\r\n        this.checkeds = this.checkeds.slice();\r\n        this.toggleAllChecked();\r\n    }\r\n\r\n    assembleItemsFavorites() {\r\n        this.items.forEach(item => {\r\n            item.inFavorites = false;\r\n            if (this._isInArray(item[this.idField], this.idField, this.favoritesList) !== -1) {\r\n                item.inFavorites = true;\r\n            }\r\n        });\r\n        this.items = this.items.slice();\r\n    }\r\n\r\n    /**\r\n     * 全选后处理\r\n     * @param dataArr 全选的值\r\n     */\r\n    checkAll() {\r\n        this.items.forEach(item => {\r\n            this._insertOneIntoSelections(item);\r\n            item.checked = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 全部取消\r\n     * @param dataArr 取消的数据\r\n     * @returns void\r\n     */\r\n    unCheckAll() {\r\n        const uncheckedIds = [];\r\n        this.items.forEach(item => {\r\n            this.selections.forEach((selection, index) => {\r\n                if (item[this.idField] === selection[this.idField]) {\r\n                    uncheckedIds.push(item[this.idField]);\r\n                }\r\n            });\r\n            item.checked = false;\r\n        });\r\n        this.selections = this.selections.filter(selection => !uncheckedIds.includes(selection[this.idField]));\r\n        this.checkeds = this.checkeds.filter(item => !uncheckedIds.includes(item[this.idField]));\r\n    }\r\n\r\n    /**\r\n     * 当前行选中\r\n     * @param data 当前行的数据（）\r\n     */\r\n    selectLine(data: any) {\r\n        if (this.multiSelect) {\r\n            this._insertOneIntoSelections(data);\r\n        } else {\r\n            this.selections = [];\r\n            this.items.forEach(item => {\r\n                if (item.checked) {\r\n                    item.checked = false;\r\n                }\r\n            });\r\n            this._insertOneIntoSelections(data);\r\n        }\r\n        this.toggleAllChecked();\r\n    }\r\n\r\n    /**\r\n     * 单选取消选中\r\n     * @param data 取消选中行\r\n     */\r\n    unSelectLine(data: any) {\r\n        const index = this._isInArray(data[this.idField], this.idField, this.selections);\r\n        if (index > -1) {\r\n            this.selections.splice(index, 1);\r\n        }\r\n        const indexc = this._isInArray(data[this.idField], this.idField, this.checkeds);\r\n        if (indexc > -1) {\r\n            this.checkeds.splice(indexc, 1);\r\n        }\r\n        if (this.allChecked) {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    // 处理逻辑是看上去像是追加，实际上是替换，多选的时候要把之前的数据合进选中数据中\r\n    confirmSelections(): void {\r\n        const recentContactsList = [];\r\n        this.recentContactsList.forEach(item => {\r\n            recentContactsList.push(item[this.idField]);\r\n        });\r\n        const emitObj = {\r\n            selections: this.selections,\r\n            token: 'quick',\r\n            recentContactsList\r\n        };\r\n        this.selectionsChange.emit(emitObj);\r\n    }\r\n\r\n    toggleFavorites(e: any, item: any) {\r\n        this.favoritesTool.toggleFavorites(e, item);\r\n    }\r\n\r\n    /**\r\n     * 选中并插入当前行数据到右侧\r\n     * @param data 当前行的数据\r\n     * @param collection 暂存当前数据的集合\r\n     */\r\n    _insertOneIntoSelections(data: any) {\r\n        // 如果当前数据已经移入右侧数据，则返回。\r\n        if (this._isInArray(data[this.idField], this.idField, this.selections) > -1) {\r\n            return;\r\n        }\r\n        this.selections.push(data);\r\n        this.checkeds.push(data);\r\n        this.selections = this.selections.slice();\r\n        this.checkeds = this.checkeds.slice();\r\n    }\r\n\r\n    /**\r\n     * 判断是否在内\r\n     * @param value value\r\n     * @param field field\r\n     * @param array array\r\n     * @returns 位置索引\r\n     */\r\n    _isInArray(value: string, field: string, array: any[]): number {\r\n        if (!field || !value) {\r\n            throw new Error(this.validElementsInfo);\r\n        }\r\n        return array.findIndex(item => value === item[field]);\r\n    }\r\n\r\n    /**\r\n     * 翻页检查：人员展示区的勾选状态与已选人员区是否对应\r\n     */\r\n    toggleAllChecked() {\r\n        if (this.items.length === this.checkeds.length && this.checkeds.length > 0) {\r\n            this.allChecked = true;\r\n        } else {\r\n            this.allChecked = false;\r\n        }\r\n    }\r\n\r\n    private changeDisplayOrgAllPath(data: string) {\r\n        if(!data) {\r\n            return '';\r\n        }\r\n        const orgAllPathArray = data.split('_');\r\n        return orgAllPathArray.reverse().join('_');\r\n    }\r\n\r\n    trackByFn(index, item) {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'keyword'\r\n})\r\nexport class SearchKeywordPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) {\r\n\r\n  }\r\n\r\n  transform(value: any, keyword: string): any {\r\n\t  if(!value || !keyword) {\r\n\t\t  return value;\r\n\t  }\r\n\t  const Reg = new RegExp(keyword, 'i');\r\n\t  const res = value.replace(Reg, `<a style=\"color: #2A87FF;\">${keyword}</a>`);\r\n\t  //console.log(res);\r\n\t  return this.sanitizer.bypassSecurityTrustHtml(res);\r\n  }\r\n\r\n}\r\n","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { AvatarModule } from '@farris/ui-avatar';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { DatagridModule } from '@farris/ui-datagrid';\r\nimport { DatagridEditorsModule } from '@farris/ui-datagrid-editors';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { ListViewModule } from '@farris/ui-list-view';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { SwitchModule } from '@farris/ui-switch';\r\nimport { FarrisTabsModule } from '@farris/ui-tabs';\r\nimport { TextModule } from '@farris/ui-text';\r\nimport { TreeModule } from '@farris/ui-tree';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { CandidateComponent } from '../lib/tab-candidate/candidate.component';\r\nimport { FavoritesComponent } from '../lib/tab-favorites/favorites.component';\r\nimport { GroupComponent } from '../lib/tab-group/group.component';\r\nimport { RecentContactsComponent } from '../lib/tab-recent-contacts/trc.component';\r\nimport { ApiLocalService } from '../utils/api-service';\r\nimport { DatagridPersonnelSelectorComponent } from './grid-personnel-selector.component';\r\nimport { quickInputDatagridComponent } from './quickInputDatagrid.component';\r\nimport { SearchResultComponent } from './search-result-page/srp.component';\r\nimport { PersonnelSelectorComponent } from './selection.component';\r\nimport { SelectionService } from './selection.service';\r\nimport { UnSelectDatagridComponent } from './tab-org-mid/unselectdatagrid.component';\r\nimport { UserGroupUnSelectComponent } from './tab-usergroup-mid/usergroupunselect.component';\r\nimport { OrgPersonnelComponent } from './tab-org-personnel/op.component';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { ComboListModule } from '@farris/ui-combo-list';\r\n// 兼容保留\r\nimport { unSelectDatagridOrgComponent } from './unselectdatagridorg.component';\r\nimport { unSelectDatagridRoleComponent } from './unSelectDatagridRoleComponent';\r\nimport { QuickSelectComponent } from './quick-select-page/qsp.component';\r\nimport { SearchKeywordPipe } from './pipe/search-keyword.pipe';\r\nimport { FarrisRTFModule } from '@farris/rtf';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        PersonnelSelectorComponent,\r\n        DatagridPersonnelSelectorComponent,\r\n        UnSelectDatagridComponent,\r\n        UserGroupUnSelectComponent,\r\n        quickInputDatagridComponent,\r\n        CandidateComponent,\r\n        RecentContactsComponent,\r\n        FavoritesComponent,\r\n        GroupComponent,\r\n        unSelectDatagridRoleComponent,\r\n        unSelectDatagridOrgComponent,\r\n        OrgPersonnelComponent,\r\n        SearchResultComponent,\r\n        QuickSelectComponent,\r\n        SearchKeywordPipe\r\n    ],\r\n    entryComponents: [\r\n        DatagridPersonnelSelectorComponent,\r\n        UnSelectDatagridComponent,\r\n        UserGroupUnSelectComponent,\r\n        quickInputDatagridComponent\r\n    ],\r\n    imports: [\r\n        DragDropModule,\r\n        CommonModule,\r\n        HttpClientModule,\r\n        LocaleModule,\r\n        PerfectScrollbarModule,\r\n        TreeModule,\r\n        TreeTableModule,\r\n        FarrisTabsModule,\r\n        FarrisFormsModule,\r\n        DatagridModule,\r\n        DatagridEditorsModule,\r\n        ListViewModule,\r\n        FarrisCommonModule,\r\n        FormsModule,\r\n        FarrisDialogModule,\r\n        InputGroupModule,\r\n        ModalModule,\r\n        SwitchModule,\r\n        AvatarModule,\r\n        TextModule,\r\n        MessagerModule,\r\n        NotifyModule,\r\n        ReactiveFormsModule,\r\n        LoadingModule.forRoot(),\r\n        ComboListModule,\r\n        FarrisRTFModule\r\n    ],\r\n    providers: [\r\n        SelectionService,\r\n        ApiLocalService\r\n    ],\r\n    exports: [PersonnelSelectorComponent, DatagridPersonnelSelectorComponent]\r\n})\r\nexport class PersonnelSelectorModule { }\r\n"]}