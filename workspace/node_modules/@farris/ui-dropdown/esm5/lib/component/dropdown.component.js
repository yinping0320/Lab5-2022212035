/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, ContentChild, TemplateRef, Output, EventEmitter, Renderer2 } from '@angular/core';
var FarrisDropdownComponent = /** @class */ (function () {
    function FarrisDropdownComponent(el, renderer) {
        this.el = el;
        this.renderer = renderer;
        // 下拉框类型
        // tslint:disable-next-line:no-inferrable-types
        this.type = 'primary';
        // 点击列表项目后是否关闭列表项
        // tslint:disable-next-line:no-input-rename
        // tslint:disable-next-line:no-inferrable-types
        this.hideOnClick = true;
        // 按钮组
        // tslint:disable-next-line:no-input-rename
        this.splitButton = false;
        // 列表显示位置
        this.position = 'bottom';
        // 列表项数据
        this.model = [
            { label: '项目一', value: 'asdasd' },
            { label: '项目二', value: 'asdasd' },
            { label: '项目三', value: 'asdasd' }
        ];
        // 按钮分组之后  左边按钮事件
        // tslint:disable-next-line:no-output-rename
        this.leftClick = new EventEmitter();
        this.select = new EventEmitter();
        // 下拉列表显示或者隐藏触发的事件
        // tslint:disable-next-line:no-output-rename
        this.visibleChange = new EventEmitter();
        // 列表项的显示与否
        this.show = false;
    }
    Object.defineProperty(FarrisDropdownComponent.prototype, "width", {
        get: /**
         * @return {?}
         */
        function () {
            // 对各个单位进行处理
            return this._width;
        },
        set: /**
         * @param {?} width
         * @return {?}
         */
        function (width) {
            this._width = this.resolveSize(width);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.menu = this.el.nativeElement.querySelector('.dropdown-menu');
    };
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.globalListenFunc) {
            this.globalListenFunc();
        }
    };
    // 点击列表项显示与否
    // 点击列表项显示与否
    /**
     * @param {?=} event
     * @return {?}
     */
    FarrisDropdownComponent.prototype.showDropMenu = 
    // 点击列表项显示与否
    /**
     * @param {?=} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.hover) {
            return;
        }
        if (event) {
            event.stopPropagation();
        }
        this.show = !this.show;
        this.visibleChange.emit();
        this.globalListenFunc = this.renderer.listen('document', 'click', (/**
         * @return {?}
         */
        function () {
            _this.closeDropMenu();
        }));
        // 如果不设置hide-on-click,则说明点击下拉之后下拉不消失
        if (!this.hideOnClick) {
            this.menuListenFunc = this.renderer.listen(this.menu, 'click', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                e.stopPropagation();
            }));
        }
    };
    // 点击元素之外  列表项消失
    // 点击元素之外  列表项消失
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.closeDropMenu = 
    // 点击元素之外  列表项消失
    /**
     * @return {?}
     */
    function () {
        if (this.hover) {
            return;
        }
        this.show = false;
        this.visibleChange.emit();
        // 解除事件绑定
        if (this.globalListenFunc) {
            this.globalListenFunc();
        }
        if (this.menuListenFunc) {
            this.menuListenFunc();
        }
    };
    // hover 实现
    // hover 实现
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.hoverDropdown = 
    // hover 实现
    /**
     * @return {?}
     */
    function () {
        if (!this.hover) {
            return;
        }
        this.show = !this.show;
        this.visibleChange.emit();
    };
    /**
     * 弹出事件
     */
    /**
     * 弹出事件
     * @param {?} model
     * @return {?}
     */
    FarrisDropdownComponent.prototype.selectItem = /**
     * 弹出事件
     * @param {?} model
     * @return {?}
     */
    function (model) {
        this.select.emit(model);
    };
    /**
     * @return {?}
     */
    FarrisDropdownComponent.prototype.leftButtonClick = /**
     * @return {?}
     */
    function () {
        this.leftClick.emit();
    };
    /**
     * @param {?} size
     * @return {?}
     */
    FarrisDropdownComponent.prototype.resolveSize = /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? "" + parseInt(size, 10) + size.match(regex)[0]
            : size + "px";
    };
    FarrisDropdownComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-dropdown',
                    template: "\n        <div\n            class=\"farris-dropdown btn-group\"\n            [class.dropup]=\"position === 'top'\"\n            [class.dropdown]=\"position === 'bottom'\"\n            [class.dropleft]=\"position === 'left'\"\n            [class.dropright]=\"position === 'right'\"\n            [style.width]=\"width\"\n        >\n            <span\n                [class.btn]=\"!nest\"\n                [class.dropdown-item]=\"nest\"\n                [class.btn-lg]=\"size === 'large'\"\n                [class.btn-sm]=\"size === 'small'\"\n                [class.btn-primary]=\"type === 'primary'\"\n                [class.btn-success]=\"type === 'success'\"\n                [class.btn-warning]=\"type === 'warning'\"\n                [class.btn-danger]=\"type === 'danger'\"\n                [class.btn-info]=\"type === 'info'\"\n                (click)=\"leftButtonClick()\"\n                style=\"width:100%\"\n                *ngIf=\"splitButton\"\n                >{{ title }}</span\n            >\n            <span\n                class=\"dropdown-toggle\"\n                [class.btn]=\"!nest\"\n                [class.dropdown-item]=\"nest\"\n                [class.dropdown-toggle-split]=\"splitButton\"\n                [class.btn-lg]=\"size === 'large'\"\n                [class.btn-sm]=\"size === 'small'\"\n                [class.btn-primary]=\"type === 'primary'\"\n                [class.btn-success]=\"type === 'success'\"\n                [class.btn-warning]=\"type === 'warning'\"\n                [class.btn-danger]=\"type === 'danger'\"\n                [class.btn-info]=\"type === 'info'\"\n                [class.btn-secondary]=\"type === 'secondary'\"\n                (click)=\"showDropMenu($event)\"\n                (mouseenter)=\"hoverDropdown()\"\n                (mouseleave)=\"hoverDropdown()\"\n                style=\"width:100%\"\n            >\n                <span class=\"sr-only\" *ngIf=\"splitButton\"></span>\n                {{ splitButton ? '' : title }}\n            </span>\n            <div class=\"dropdown-menu\" [class.show]=\"show\">\n                <ng-template [ngTemplateOutlet]=\"dropdownTempl\"></ng-template>\n                <farris-dropdown-item\n                    *ngFor=\"let item of model\"\n                    [model]=\"item\"\n                    (select)=\"selectItem($event)\"\n                >\n                </farris-dropdown-item>\n            </div>\n        </div>\n    "
                }] }
    ];
    /** @nocollapse */
    FarrisDropdownComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    FarrisDropdownComponent.propDecorators = {
        nest: [{ type: Input }],
        width: [{ type: Input }],
        title: [{ type: Input }],
        hover: [{ type: Input }],
        size: [{ type: Input }],
        type: [{ type: Input }],
        hideOnClick: [{ type: Input, args: ['hide-on-click',] }],
        splitButton: [{ type: Input, args: ['split-button',] }],
        position: [{ type: Input }],
        model: [{ type: Input }],
        dropdownTempl: [{ type: ContentChild, args: ['dropdownTempl',] }],
        leftClick: [{ type: Output, args: ['left-click',] }],
        select: [{ type: Output }],
        visibleChange: [{ type: Output, args: ['visible-change',] }]
    };
    return FarrisDropdownComponent;
}());
export { FarrisDropdownComponent };
if (false) {
    /** @type {?} */
    FarrisDropdownComponent.prototype.nest;
    /** @type {?} */
    FarrisDropdownComponent.prototype._width;
    /** @type {?} */
    FarrisDropdownComponent.prototype._height;
    /** @type {?} */
    FarrisDropdownComponent.prototype.title;
    /** @type {?} */
    FarrisDropdownComponent.prototype.hover;
    /** @type {?} */
    FarrisDropdownComponent.prototype.size;
    /** @type {?} */
    FarrisDropdownComponent.prototype.type;
    /** @type {?} */
    FarrisDropdownComponent.prototype.hideOnClick;
    /** @type {?} */
    FarrisDropdownComponent.prototype.splitButton;
    /** @type {?} */
    FarrisDropdownComponent.prototype.position;
    /** @type {?} */
    FarrisDropdownComponent.prototype.model;
    /** @type {?} */
    FarrisDropdownComponent.prototype.dropdownTempl;
    /** @type {?} */
    FarrisDropdownComponent.prototype.leftClick;
    /** @type {?} */
    FarrisDropdownComponent.prototype.select;
    /** @type {?} */
    FarrisDropdownComponent.prototype.visibleChange;
    /** @type {?} */
    FarrisDropdownComponent.prototype.dropdownButton;
    /** @type {?} */
    FarrisDropdownComponent.prototype.menu;
    /** @type {?} */
    FarrisDropdownComponent.prototype.show;
    /** @type {?} */
    FarrisDropdownComponent.prototype.globalListenFunc;
    /** @type {?} */
    FarrisDropdownComponent.prototype.menuListenFunc;
    /**
     * @type {?}
     * @private
     */
    FarrisDropdownComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisDropdownComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kcm9wZG93bi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnQvZHJvcGRvd24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUNULEtBQUssRUFHTCxVQUFVLEVBQ1YsWUFBWSxFQUNaLFdBQVcsRUFDWCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFHWixNQUFNLGVBQWUsQ0FBQztBQUt2QjtJQW9ISSxpQ0FBb0IsRUFBYyxFQUFVLFFBQW1CO1FBQTNDLE9BQUUsR0FBRixFQUFFLENBQVk7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFXOzs7UUFwQ3RELFNBQUksR0FBVyxTQUFTLENBQUM7Ozs7UUFJVixnQkFBVyxHQUFZLElBQUksQ0FBQzs7O1FBRzdCLGdCQUFXLEdBQUcsS0FBSyxDQUFDOztRQUVsQyxhQUFRLEdBQUcsUUFBUSxDQUFDOztRQUVwQixVQUFLLEdBQW1CO1lBQzdCLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO1lBQ2pDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO1lBQ2pDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO1NBQ3BDLENBQUM7OztRQUlvQixjQUFTLEdBQXNCLElBQUksWUFBWSxFQUVsRSxDQUFDO1FBQ00sV0FBTSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDOzs7UUFHcEMsa0JBQWEsR0FFbkMsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7UUFJNUIsU0FBSSxHQUFHLEtBQUssQ0FBQztJQUtxRCxDQUFDO0lBcERuRSxzQkFDSSwwQ0FBSzs7OztRQURUO1lBRUksWUFBWTtZQUNaLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN2QixDQUFDOzs7OztRQUNELFVBQVUs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QUssQ0FBQyxDQUFDLENBQUMsQ0FBRztZQUNoRCxDQUFDLENBQUksSUFBSSxPQUFJLENBQUM7SUFDdEIsQ0FBQzs7Z0JBak1KLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixRQUFRLEVBQUUsdTVFQXVEVDtpQkFDSjs7OztnQkF2RUcsVUFBVTtnQkFLVixTQUFTOzs7dUJBb0VSLEtBQUs7d0JBSUwsS0FBSzt3QkFTTCxLQUFLO3dCQUVMLEtBQUs7dUJBRUwsS0FBSzt1QkFHTCxLQUFLOzhCQUlMLEtBQUssU0FBQyxlQUFlOzhCQUdyQixLQUFLLFNBQUMsY0FBYzsyQkFFcEIsS0FBSzt3QkFFTCxLQUFLO2dDQUtMLFlBQVksU0FBQyxlQUFlOzRCQUc1QixNQUFNLFNBQUMsWUFBWTt5QkFHbkIsTUFBTTtnQ0FHTixNQUFNLFNBQUMsZ0JBQWdCOztJQTJGNUIsOEJBQUM7Q0FBQSxBQXBNRCxJQW9NQztTQXpJWSx1QkFBdUI7OztJQUNoQyx1Q0FBdUI7O0lBRXZCLHlDQUF3Qjs7SUFDeEIsMENBQXlCOztJQVV6Qix3Q0FBdUI7O0lBRXZCLHdDQUF3Qjs7SUFFeEIsdUNBQXNCOztJQUd0Qix1Q0FBa0M7O0lBSWxDLDhDQUFvRDs7SUFHcEQsOENBQTJDOztJQUUzQywyQ0FBNkI7O0lBRTdCLHdDQUlFOztJQUNGLGdEQUErRDs7SUFHL0QsNENBRUk7O0lBQ0oseUNBQThEOztJQUc5RCxnREFFNEI7O0lBQzVCLGlEQUFrQzs7SUFDbEMsdUNBQXFCOztJQUVyQix1Q0FBYTs7SUFDYixtREFBMkI7O0lBQzNCLGlEQUF5Qjs7Ozs7SUFHYixxQ0FBc0I7Ozs7O0lBQUUsMkNBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIElucHV0LFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIE9uSW5pdCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBUZW1wbGF0ZVJlZixcclxuICAgIE91dHB1dCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIFJlbmRlcmVyMixcclxuICAgIE9uRGVzdHJveSxcclxuICAgIFZpZXdDaGlsZHJlblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBRdWVyeUxpc3QgfSBmcm9tICdAYW5ndWxhci9jb3JlL3NyYy9yZW5kZXIzJztcclxuaW1wb3J0IHsgRkRyb3Bkb3duTWVudURpcmVjdGl2ZSB9IGZyb20gJy4uL2YtZHJvcGRvd24tbWVudS5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBEcm9wZG93bkl0ZW0gfSBmcm9tICcuL2Ryb3Bkb3duLml0ZW0ucHJvcHMnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1kcm9wZG93bicsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3M9XCJmYXJyaXMtZHJvcGRvd24gYnRuLWdyb3VwXCJcclxuICAgICAgICAgICAgW2NsYXNzLmRyb3B1cF09XCJwb3NpdGlvbiA9PT0gJ3RvcCdcIlxyXG4gICAgICAgICAgICBbY2xhc3MuZHJvcGRvd25dPVwicG9zaXRpb24gPT09ICdib3R0b20nXCJcclxuICAgICAgICAgICAgW2NsYXNzLmRyb3BsZWZ0XT1cInBvc2l0aW9uID09PSAnbGVmdCdcIlxyXG4gICAgICAgICAgICBbY2xhc3MuZHJvcHJpZ2h0XT1cInBvc2l0aW9uID09PSAncmlnaHQnXCJcclxuICAgICAgICAgICAgW3N0eWxlLndpZHRoXT1cIndpZHRoXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuXT1cIiFuZXN0XCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5kcm9wZG93bi1pdGVtXT1cIm5lc3RcIlxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmJ0bi1sZ109XCJzaXplID09PSAnbGFyZ2UnXCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5idG4tc21dPVwic2l6ZSA9PT0gJ3NtYWxsJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLXByaW1hcnldPVwidHlwZSA9PT0gJ3ByaW1hcnknXCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5idG4tc3VjY2Vzc109XCJ0eXBlID09PSAnc3VjY2VzcydcIlxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmJ0bi13YXJuaW5nXT1cInR5cGUgPT09ICd3YXJuaW5nJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLWRhbmdlcl09XCJ0eXBlID09PSAnZGFuZ2VyJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLWluZm9dPVwidHlwZSA9PT0gJ2luZm8nXCJcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJsZWZ0QnV0dG9uQ2xpY2soKVwiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOjEwMCVcIlxyXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJzcGxpdEJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICA+e3sgdGl0bGUgfX08L3NwYW5cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIlxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmJ0bl09XCIhbmVzdFwiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuZHJvcGRvd24taXRlbV09XCJuZXN0XCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5kcm9wZG93bi10b2dnbGUtc3BsaXRdPVwic3BsaXRCdXR0b25cIlxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmJ0bi1sZ109XCJzaXplID09PSAnbGFyZ2UnXCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5idG4tc21dPVwic2l6ZSA9PT0gJ3NtYWxsJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLXByaW1hcnldPVwidHlwZSA9PT0gJ3ByaW1hcnknXCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5idG4tc3VjY2Vzc109XCJ0eXBlID09PSAnc3VjY2VzcydcIlxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmJ0bi13YXJuaW5nXT1cInR5cGUgPT09ICd3YXJuaW5nJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLWRhbmdlcl09XCJ0eXBlID09PSAnZGFuZ2VyJ1wiXHJcbiAgICAgICAgICAgICAgICBbY2xhc3MuYnRuLWluZm9dPVwidHlwZSA9PT0gJ2luZm8nXCJcclxuICAgICAgICAgICAgICAgIFtjbGFzcy5idG4tc2Vjb25kYXJ5XT1cInR5cGUgPT09ICdzZWNvbmRhcnknXCJcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJzaG93RHJvcE1lbnUoJGV2ZW50KVwiXHJcbiAgICAgICAgICAgICAgICAobW91c2VlbnRlcik9XCJob3ZlckRyb3Bkb3duKClcIlxyXG4gICAgICAgICAgICAgICAgKG1vdXNlbGVhdmUpPVwiaG92ZXJEcm9wZG93bigpXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6MTAwJVwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiICpuZ0lmPVwic3BsaXRCdXR0b25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICB7eyBzcGxpdEJ1dHRvbiA/ICcnIDogdGl0bGUgfX1cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIFtjbGFzcy5zaG93XT1cInNob3dcIj5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJkcm9wZG93blRlbXBsXCI+PC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDxmYXJyaXMtZHJvcGRvd24taXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIG1vZGVsXCJcclxuICAgICAgICAgICAgICAgICAgICBbbW9kZWxdPVwiaXRlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgKHNlbGVjdCk9XCJzZWxlY3RJdGVtKCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPC9mYXJyaXMtZHJvcGRvd24taXRlbT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNEcm9wZG93bkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICAgIEBJbnB1dCgpIG5lc3Q6IGJvb2xlYW47XHJcbiAgICAvLyDorr7nva7lrr0g6auY5bGe5oCnXHJcbiAgICBfd2lkdGg6IHN0cmluZyB8IG51bWJlcjtcclxuICAgIF9oZWlnaHQ6IHN0cmluZyB8IG51bWJlcjtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgd2lkdGgoKSB7XHJcbiAgICAgICAgLy8g5a+55ZCE5Liq5Y2V5L2N6L+b6KGM5aSE55CGXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xyXG4gICAgfVxyXG4gICAgc2V0IHdpZHRoKHdpZHRoOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl93aWR0aCA9IHRoaXMucmVzb2x2ZVNpemUod2lkdGgpO1xyXG4gICAgfVxyXG4gICAgLy8g5LiL5ouJ5qGG5qCH6aKYXHJcbiAgICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xyXG4gICAgLy8gaG92ZXLlsZXnpLrkuIvmi4nliJfooahcclxuICAgIEBJbnB1dCgpIGhvdmVyOiBib29sZWFuO1xyXG4gICAgLy8g5LiL5ouJ5qGG5bC65a+4XHJcbiAgICBASW5wdXQoKSBzaXplOiBzdHJpbmc7XHJcbiAgICAvLyDkuIvmi4nmoYbnsbvlnotcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbmZlcnJhYmxlLXR5cGVzXHJcbiAgICBASW5wdXQoKSB0eXBlOiBzdHJpbmcgPSAncHJpbWFyeSc7XHJcbiAgICAvLyDngrnlh7vliJfooajpobnnm67lkI7mmK/lkKblhbPpl63liJfooajpoblcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnB1dC1yZW5hbWVcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbmZlcnJhYmxlLXR5cGVzXHJcbiAgICBASW5wdXQoJ2hpZGUtb24tY2xpY2snKSBoaWRlT25DbGljazogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAvLyDmjInpkq7nu4RcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbnB1dC1yZW5hbWVcclxuICAgIEBJbnB1dCgnc3BsaXQtYnV0dG9uJykgc3BsaXRCdXR0b24gPSBmYWxzZTtcclxuICAgIC8vIOWIl+ihqOaYvuekuuS9jee9rlxyXG4gICAgQElucHV0KCkgcG9zaXRpb24gPSAnYm90dG9tJztcclxuICAgIC8vIOWIl+ihqOmhueaVsOaNrlxyXG4gICAgQElucHV0KCkgbW9kZWw6IERyb3Bkb3duSXRlbVtdID0gW1xyXG4gICAgICAgIHsgbGFiZWw6ICfpobnnm67kuIAnLCB2YWx1ZTogJ2FzZGFzZCcgfSxcclxuICAgICAgICB7IGxhYmVsOiAn6aG555uu5LqMJywgdmFsdWU6ICdhc2Rhc2QnIH0sXHJcbiAgICAgICAgeyBsYWJlbDogJ+mhueebruS4iScsIHZhbHVlOiAnYXNkYXNkJyB9XHJcbiAgICBdO1xyXG4gICAgQENvbnRlbnRDaGlsZCgnZHJvcGRvd25UZW1wbCcpIGRyb3Bkb3duVGVtcGw6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICAvLyDmjInpkq7liIbnu4TkuYvlkI4gIOW3pui+ueaMiemSruS6i+S7tlxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW91dHB1dC1yZW5hbWVcclxuICAgIEBPdXRwdXQoJ2xlZnQtY2xpY2snKSBsZWZ0Q2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxcclxuICAgICAgICBhbnlcclxuICAgID4oKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3Q6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDkuIvmi4nliJfooajmmL7npLrmiJbogIXpmpDol4/op6blj5HnmoTkuovku7ZcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1vdXRwdXQtcmVuYW1lXHJcbiAgICBAT3V0cHV0KCd2aXNpYmxlLWNoYW5nZScpIHZpc2libGVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxcclxuICAgICAgICBhbnlcclxuICAgID4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIGRyb3Bkb3duQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIG1lbnU6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgLy8g5YiX6KGo6aG555qE5pi+56S65LiO5ZCmXHJcbiAgICBzaG93ID0gZmFsc2U7XHJcbiAgICBnbG9iYWxMaXN0ZW5GdW5jOiBGdW5jdGlvbjtcclxuICAgIG1lbnVMaXN0ZW5GdW5jOiBGdW5jdGlvbjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7fVxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51Jyk7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7fVxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsTGlzdGVuRnVuYykge1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbExpc3RlbkZ1bmMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDngrnlh7vliJfooajpobnmmL7npLrkuI7lkKZcclxuICAgIHNob3dEcm9wTWVudShldmVudD86IEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG92ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvdyA9ICF0aGlzLnNob3c7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlQ2hhbmdlLmVtaXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5nbG9iYWxMaXN0ZW5GdW5jID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oXHJcbiAgICAgICAgICAgICdkb2N1bWVudCcsXHJcbiAgICAgICAgICAgICdjbGljaycsXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEcm9wTWVudSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyDlpoLmnpzkuI3orr7nva5oaWRlLW9uLWNsaWNrLOWImeivtOaYjueCueWHu+S4i+aLieS5i+WQjuS4i+aLieS4jea2iOWksVxyXG4gICAgICAgIGlmICghdGhpcy5oaWRlT25DbGljaykge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVMaXN0ZW5GdW5jID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUsXHJcbiAgICAgICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDngrnlh7vlhYPntKDkuYvlpJYgIOWIl+ihqOmhuea2iOWksVxyXG4gICAgY2xvc2VEcm9wTWVudSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ob3Zlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZUNoYW5nZS5lbWl0KCk7XHJcbiAgICAgICAgLy8g6Kej6Zmk5LqL5Lu257uR5a6aXHJcbiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsTGlzdGVuRnVuYykge1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbExpc3RlbkZ1bmMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWVudUxpc3RlbkZ1bmMpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51TGlzdGVuRnVuYygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhvdmVyIOWunueOsFxyXG4gICAgaG92ZXJEcm9wZG93bigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaG92ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3cgPSAhdGhpcy5zaG93O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZUNoYW5nZS5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOW8ueWHuuS6i+S7tlxyXG4gICAgICovXHJcbiAgICBzZWxlY3RJdGVtKG1vZGVsKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdChtb2RlbCk7XHJcbiAgICB9XHJcbiAgICBsZWZ0QnV0dG9uQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0Q2xpY2suZW1pdCgpO1xyXG4gICAgfVxyXG4gICAgcmVzb2x2ZVNpemUoc2l6ZSkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3B4fGVtfHJlbXxwdHwlLztcclxuICAgICAgICAvLyDor7TmmI7mmK/lrZfnrKbkuLJcclxuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChzaXplKVxyXG4gICAgICAgICAgICA/IGAke3BhcnNlSW50KHNpemUsIDEwKX0ke3NpemUubWF0Y2gocmVnZXgpWzBdfWBcclxuICAgICAgICAgICAgOiBgJHtzaXplfXB4YDtcclxuICAgIH1cclxuXHJcbiAgXHJcbn1cclxuIl19