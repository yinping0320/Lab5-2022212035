/*
 * @Author: aalizzwell
 * @Date: 2019-05-30 10:35:09
 * @Last Modified by: aalizzwell
 * @Last Modified time: 2019-06-15 19:22:13
 */
import { Injectable, Optional } from '@angular/core';
import { LanguageService } from './languag.service';
import { FormErrorService } from './error/form-error.service';
import { AppContext } from '@farris/devkit';
/**
 * 默认异常处理器
 * @scope 没有提供对应Provider
 */
var ExceptionHandler = /** @class */ (function () {
    function ExceptionHandler(formErrorService, languageService, applicationContext) {
        this.formErrorService = formErrorService;
        this.languageService = languageService;
        this.applicationContext = applicationContext;
        this.appContext = null;
        if (this.languageService == null) {
            this.languageService = LanguageService.getInstance();
        }
    }
    ExceptionHandler.prototype.setContext = function (applicationContext) {
        this.appContext = applicationContext;
    };
    ExceptionHandler.prototype.handle = function (error) {
        if (!!this.formErrorService) {
            this.formErrorService.exception(this.languageService.loadFailed, error);
        }
    };
    ExceptionHandler.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ExceptionHandler.ctorParameters = function () { return [
        { type: FormErrorService },
        { type: LanguageService, decorators: [{ type: Optional }] },
        { type: AppContext }
    ]; };
    return ExceptionHandler;
}());
export { ExceptionHandler };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhjZXB0aW9uLmhhbmRsZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2NvbW1hbmQtc2VydmljZXMvIiwic291cmNlcyI6WyJsaWIvZXhjZXB0aW9uLmhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0dBS0c7QUFDSCxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDOUQsT0FBTyxFQUFxQixVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUvRDs7O0dBR0c7QUFDSDtJQUdFLDBCQUNVLGdCQUFrQyxFQUN0QixlQUFnQyxFQUM1QyxrQkFBOEI7UUFGOUIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUN0QixvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFDNUMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFZO1FBSmhDLGVBQVUsR0FBZSxJQUFJLENBQUM7UUFNcEMsSUFBSSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksRUFBRTtZQUNoQyxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUN0RDtJQUNILENBQUM7SUFDTSxxQ0FBVSxHQUFqQixVQUFrQixrQkFBOEI7UUFDOUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxrQkFBa0IsQ0FBQztJQUN2QyxDQUFDO0lBQ00saUNBQU0sR0FBYixVQUFjLEtBQVU7UUFDdEIsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQzNCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDekU7SUFDSCxDQUFDOztnQkFuQkYsVUFBVTs7OztnQkFQRixnQkFBZ0I7Z0JBRGhCLGVBQWUsdUJBYW5CLFFBQVE7Z0JBWGUsVUFBVTs7SUEwQnRDLHVCQUFDO0NBQUEsQUFwQkQsSUFvQkM7QUFFRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IGFhbGl6endlbGxcclxuICogQERhdGU6IDIwMTktMDUtMzAgMTA6MzU6MDlcclxuICogQExhc3QgTW9kaWZpZWQgYnk6IGFhbGl6endlbGxcclxuICogQExhc3QgTW9kaWZpZWQgdGltZTogMjAxOS0wNi0xNSAxOToyMjoxM1xyXG4gKi9cclxuaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9sYW5ndWFnLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtRXJyb3JTZXJ2aWNlIH0gZnJvbSAnLi9lcnJvci9mb3JtLWVycm9yLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJRXhjZXB0aW9uSGFuZGxlciwgQXBwQ29udGV4dCB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuXHJcbi8qKlxyXG4gKiDpu5jorqTlvILluLjlpITnkIblmahcclxuICogQHNjb3BlIOayoeacieaPkOS+m+WvueW6lFByb3ZpZGVyXHJcbiAqL1xyXG5ASW5qZWN0YWJsZSgpXHJcbmNsYXNzIEV4Y2VwdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBJRXhjZXB0aW9uSGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBhcHBDb250ZXh0OiBBcHBDb250ZXh0ID0gbnVsbDtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZm9ybUVycm9yU2VydmljZTogRm9ybUVycm9yU2VydmljZSxcclxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgbGFuZ3VhZ2VTZXJ2aWNlOiBMYW5ndWFnZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGFwcGxpY2F0aW9uQ29udGV4dDogQXBwQ29udGV4dCxcclxuICApIHtcclxuICAgIGlmICh0aGlzLmxhbmd1YWdlU2VydmljZSA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMubGFuZ3VhZ2VTZXJ2aWNlID0gTGFuZ3VhZ2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHB1YmxpYyBzZXRDb250ZXh0KGFwcGxpY2F0aW9uQ29udGV4dDogQXBwQ29udGV4dCkge1xyXG4gICAgdGhpcy5hcHBDb250ZXh0ID0gYXBwbGljYXRpb25Db250ZXh0O1xyXG4gIH1cclxuICBwdWJsaWMgaGFuZGxlKGVycm9yOiBhbnkpIHtcclxuICAgIGlmICghIXRoaXMuZm9ybUVycm9yU2VydmljZSkge1xyXG4gICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UuZXhjZXB0aW9uKHRoaXMubGFuZ3VhZ2VTZXJ2aWNlLmxvYWRGYWlsZWQsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEV4Y2VwdGlvbkhhbmRsZXIgfTtcclxuIl19