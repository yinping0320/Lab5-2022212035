import { Injectable } from '@angular/core';
import { ViewModel } from '@farris/devkit';
import { of } from 'rxjs';
export class RemoteSummaryService {
    constructor(viewModel) {
        this.viewModel = viewModel;
    }
    /**
     * 服务器端合计
     * @param methodName 服务器端合计自定义动作名称
     * @param filters 过滤条件
     */
    summary(methodName, filters) {
        const repository = this.viewModel.frameContext.repository || null;
        if (repository) {
            const proxy = repository.proxy;
            if (proxy && typeof proxy[methodName] === 'function') {
                return proxy[methodName](filters);
            }
        }
        return of(null);
    }
}
RemoteSummaryService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
RemoteSummaryService.ctorParameters = () => [
    { type: ViewModel }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3RlLXN1bW1hcnkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImxpYi9yZW1vdGUtc3VtbWFyeS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTNDLE9BQU8sRUFBRSxFQUFFLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFHdEMsTUFBTSxPQUFPLG9CQUFvQjtJQUMvQixZQUFvQixTQUFvQjtRQUFwQixjQUFTLEdBQVQsU0FBUyxDQUFXO0lBQUksQ0FBQztJQUM3Qzs7OztPQUlHO0lBQ0ksT0FBTyxDQUFDLFVBQWtCLEVBQUUsT0FBWTtRQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxVQUFnQyxJQUFJLElBQUksQ0FBQztRQUN4RixJQUFJLFVBQVUsRUFBRTtZQUNkLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUM7WUFDL0IsSUFBSSxLQUFLLElBQUksT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssVUFBVSxFQUFFO2dCQUNwRCxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQW9CLENBQUM7YUFDdEQ7U0FDRjtRQUNELE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLENBQUM7OztZQWpCRixVQUFVOzs7O1lBSkYsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVmlld01vZGVsIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQgeyBCZWZSZXBvc2l0b3J5IH0gZnJvbSAnQGZhcnJpcy9iZWYnO1xyXG5pbXBvcnQgeyBvZiwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUmVtb3RlU3VtbWFyeVNlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdmlld01vZGVsOiBWaWV3TW9kZWwpIHsgfVxyXG4gIC8qKlxyXG4gICAqIOacjeWKoeWZqOerr+WQiOiuoVxyXG4gICAqIEBwYXJhbSBtZXRob2ROYW1lIOacjeWKoeWZqOerr+WQiOiuoeiHquWumuS5ieWKqOS9nOWQjeensFxyXG4gICAqIEBwYXJhbSBmaWx0ZXJzIOi/h+a7pOadoeS7tlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdW1tYXJ5KG1ldGhvZE5hbWU6IHN0cmluZywgZmlsdGVyczogYW55KSB7XHJcbiAgICBjb25zdCByZXBvc2l0b3J5ID0gdGhpcy52aWV3TW9kZWwuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnkgYXMgQmVmUmVwb3NpdG9yeTxhbnk+IHx8IG51bGw7XHJcbiAgICBpZiAocmVwb3NpdG9yeSkge1xyXG4gICAgICBjb25zdCBwcm94eSA9IHJlcG9zaXRvcnkucHJveHk7XHJcbiAgICAgIGlmIChwcm94eSAmJiB0eXBlb2YgcHJveHlbbWV0aG9kTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gcHJveHlbbWV0aG9kTmFtZV0oZmlsdGVycykgYXMgT2JzZXJ2YWJsZTxhbnk+O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2YobnVsbCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==