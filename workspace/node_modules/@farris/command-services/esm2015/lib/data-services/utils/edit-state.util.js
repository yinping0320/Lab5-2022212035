const IS_ADD = 'IS_ADD';
const LAST_MODIFIED_ID = 'LAST_MODIFIED_ID';
/**
 * 表单状态工具类
 * @internal
 */
class EditStateUtil {
    /**
     * 获取当前行id
     */
    static getLastModifiedId(frameContext) {
        // const lastModifiedId = AppParamUtil.get(frameContext, LAST_MODIFIED_ID);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        let lastModifiedId = null;
        if (virtualRootFrameContext) {
            lastModifiedId = virtualRootFrameContext.getParam(LAST_MODIFIED_ID);
            return lastModifiedId ? lastModifiedId : null;
        }
        return lastModifiedId;
    }
    /**
     * 设置最后修改的id
     */
    static setLastModifiedId(frameContext, lastModifiedId) {
        // AppParamUtil.set(frameContext, LAST_MODIFIED_ID, lastModifiedId);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        if (virtualRootFrameContext) {
            virtualRootFrameContext.setParam(LAST_MODIFIED_ID, lastModifiedId);
        }
    }
    /**
     * 获取新增状态
     */
    static getAddState(frameContext) {
        // return AppParamUtil.get(frameContext, IS_ADD);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        if (virtualRootFrameContext) {
            return virtualRootFrameContext.getParam(IS_ADD);
        }
    }
    /**
     * 设置新增状态
     */
    static setAddState(frameContext, lastModifiedId) {
        // AppParamUtil.set(frameContext, IS_ADD, true);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        if (virtualRootFrameContext) {
            virtualRootFrameContext.setParam(IS_ADD, true);
        }
        this.setLastModifiedId(frameContext, lastModifiedId);
    }
    /**
     * 取消新增状态
     */
    static cancelAddState(frameContext) {
        // AppParamUtil.set(frameContext, IS_ADD, false);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        if (virtualRootFrameContext) {
            virtualRootFrameContext.setParam(IS_ADD, false);
        }
    }
    /**
     * 设置编辑状态
     */
    static setEditState(frameContext, id) {
        // AppParamUtil.set(frameContext, IS_ADD, false);
        const virtualRootFrameContext = frameContext.getVirtualRootFrameContext();
        if (virtualRootFrameContext) {
            virtualRootFrameContext.setParam(IS_ADD, false);
        }
        this.setLastModifiedId(frameContext, id);
    }
}
export { EditStateUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdC1zdGF0ZS51dGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsibGliL2RhdGEtc2VydmljZXMvdXRpbHMvZWRpdC1zdGF0ZS51dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQztBQUN4QixNQUFNLGdCQUFnQixHQUFHLGtCQUFrQixDQUFDO0FBRTVDOzs7R0FHRztBQUNILE1BQU0sYUFBYTtJQUVmOztPQUVHO0lBQ0ksTUFBTSxDQUFDLGlCQUFpQixDQUFDLFlBQTBCO1FBQ3RELDJFQUEyRTtRQUMzRSxNQUFNLHVCQUF1QixHQUFHLFlBQVksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1FBQzFFLElBQUksY0FBYyxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLHVCQUF1QixFQUFFO1lBQ3pCLGNBQWMsR0FBRyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNwRSxPQUFPLGNBQWMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7U0FDakQ7UUFDRCxPQUFPLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxNQUFNLENBQUMsaUJBQWlCLENBQUMsWUFBMEIsRUFBRSxjQUFzQjtRQUM5RSxvRUFBb0U7UUFDcEUsTUFBTSx1QkFBdUIsR0FBRyxZQUFZLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztRQUMxRSxJQUFJLHVCQUF1QixFQUFFO1lBQ3pCLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUN0RTtJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxXQUFXLENBQUMsWUFBMEI7UUFDaEQsaURBQWlEO1FBQ2pELE1BQU0sdUJBQXVCLEdBQUcsWUFBWSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFDMUUsSUFBSSx1QkFBdUIsRUFBRTtZQUN6QixPQUFPLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNuRDtJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxXQUFXLENBQUMsWUFBMEIsRUFBRSxjQUFzQjtRQUN4RSxnREFBZ0Q7UUFDaEQsTUFBTSx1QkFBdUIsR0FBRyxZQUFZLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztRQUMxRSxJQUFJLHVCQUF1QixFQUFFO1lBQ3pCLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDbEQ7UUFDRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBMEI7UUFDbkQsaURBQWlEO1FBQ2pELE1BQU0sdUJBQXVCLEdBQUcsWUFBWSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFDMUUsSUFBSSx1QkFBdUIsRUFBRTtZQUN6Qix1QkFBdUIsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ25EO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLFlBQVksQ0FBQyxZQUEwQixFQUFFLEVBQVU7UUFDN0QsaURBQWlEO1FBQ2pELE1BQU0sdUJBQXVCLEdBQUcsWUFBWSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFDMUUsSUFBSSx1QkFBdUIsRUFBRTtZQUN6Qix1QkFBdUIsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ25EO1FBQ0QsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM3QyxDQUFDO0NBQ0o7QUFFRCxPQUFPLEVBQUUsYUFBYSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGcmFtZUNvbnRleHQgfSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbmltcG9ydCB7IEFwcFBhcmFtVXRpbCB9IGZyb20gJy4vYXBwLXBhcmFtLnV0aWwnO1xyXG5cclxuY29uc3QgSVNfQUREID0gJ0lTX0FERCc7XHJcbmNvbnN0IExBU1RfTU9ESUZJRURfSUQgPSAnTEFTVF9NT0RJRklFRF9JRCc7XHJcblxyXG4vKipcclxuICog6KGo5Y2V54q25oCB5bel5YW357G7XHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgRWRpdFN0YXRlVXRpbCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blvZPliY3ooYxpZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldExhc3RNb2RpZmllZElkKGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0KTogc3RyaW5nIHtcclxuICAgICAgICAvLyBjb25zdCBsYXN0TW9kaWZpZWRJZCA9IEFwcFBhcmFtVXRpbC5nZXQoZnJhbWVDb250ZXh0LCBMQVNUX01PRElGSUVEX0lEKTtcclxuICAgICAgICBjb25zdCB2aXJ0dWFsUm9vdEZyYW1lQ29udGV4dCA9IGZyYW1lQ29udGV4dC5nZXRWaXJ0dWFsUm9vdEZyYW1lQ29udGV4dCgpO1xyXG4gICAgICAgIGxldCBsYXN0TW9kaWZpZWRJZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHZpcnR1YWxSb290RnJhbWVDb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZElkID0gdmlydHVhbFJvb3RGcmFtZUNvbnRleHQuZ2V0UGFyYW0oTEFTVF9NT0RJRklFRF9JRCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXN0TW9kaWZpZWRJZCA/IGxhc3RNb2RpZmllZElkIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxhc3RNb2RpZmllZElkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5pyA5ZCO5L+u5pS555qEaWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRMYXN0TW9kaWZpZWRJZChmcmFtZUNvbnRleHQ6IEZyYW1lQ29udGV4dCwgbGFzdE1vZGlmaWVkSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIEFwcFBhcmFtVXRpbC5zZXQoZnJhbWVDb250ZXh0LCBMQVNUX01PRElGSUVEX0lELCBsYXN0TW9kaWZpZWRJZCk7XHJcbiAgICAgICAgY29uc3QgdmlydHVhbFJvb3RGcmFtZUNvbnRleHQgPSBmcmFtZUNvbnRleHQuZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKTtcclxuICAgICAgICBpZiAodmlydHVhbFJvb3RGcmFtZUNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmlydHVhbFJvb3RGcmFtZUNvbnRleHQuc2V0UGFyYW0oTEFTVF9NT0RJRklFRF9JRCwgbGFzdE1vZGlmaWVkSWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaWsOWinueKtuaAgVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFkZFN0YXRlKGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0LCApOiBib29sZWFuIHtcclxuICAgICAgICAvLyByZXR1cm4gQXBwUGFyYW1VdGlsLmdldChmcmFtZUNvbnRleHQsIElTX0FERCk7XHJcbiAgICAgICAgY29uc3QgdmlydHVhbFJvb3RGcmFtZUNvbnRleHQgPSBmcmFtZUNvbnRleHQuZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKTtcclxuICAgICAgICBpZiAodmlydHVhbFJvb3RGcmFtZUNvbnRleHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxSb290RnJhbWVDb250ZXh0LmdldFBhcmFtKElTX0FERCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5paw5aKe54q25oCBXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QWRkU3RhdGUoZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQsIGxhc3RNb2RpZmllZElkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBBcHBQYXJhbVV0aWwuc2V0KGZyYW1lQ29udGV4dCwgSVNfQURELCB0cnVlKTtcclxuICAgICAgICBjb25zdCB2aXJ0dWFsUm9vdEZyYW1lQ29udGV4dCA9IGZyYW1lQ29udGV4dC5nZXRWaXJ0dWFsUm9vdEZyYW1lQ29udGV4dCgpO1xyXG4gICAgICAgIGlmICh2aXJ0dWFsUm9vdEZyYW1lQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2aXJ0dWFsUm9vdEZyYW1lQ29udGV4dC5zZXRQYXJhbShJU19BREQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldExhc3RNb2RpZmllZElkKGZyYW1lQ29udGV4dCwgbGFzdE1vZGlmaWVkSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI5paw5aKe54q25oCBXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2FuY2VsQWRkU3RhdGUoZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQpIHtcclxuICAgICAgICAvLyBBcHBQYXJhbVV0aWwuc2V0KGZyYW1lQ29udGV4dCwgSVNfQURELCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdmlydHVhbFJvb3RGcmFtZUNvbnRleHQgPSBmcmFtZUNvbnRleHQuZ2V0VmlydHVhbFJvb3RGcmFtZUNvbnRleHQoKTtcclxuICAgICAgICBpZiAodmlydHVhbFJvb3RGcmFtZUNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmlydHVhbFJvb3RGcmFtZUNvbnRleHQuc2V0UGFyYW0oSVNfQURELCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u57yW6L6R54q25oCBXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0RWRpdFN0YXRlKGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0LCBpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gQXBwUGFyYW1VdGlsLnNldChmcmFtZUNvbnRleHQsIElTX0FERCwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHZpcnR1YWxSb290RnJhbWVDb250ZXh0ID0gZnJhbWVDb250ZXh0LmdldFZpcnR1YWxSb290RnJhbWVDb250ZXh0KCk7XHJcbiAgICAgICAgaWYgKHZpcnR1YWxSb290RnJhbWVDb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZpcnR1YWxSb290RnJhbWVDb250ZXh0LnNldFBhcmFtKElTX0FERCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldExhc3RNb2RpZmllZElkKGZyYW1lQ29udGV4dCwgaWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBFZGl0U3RhdGVVdGlsIH07XHJcbiJdfQ==