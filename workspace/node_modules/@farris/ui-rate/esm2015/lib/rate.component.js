/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, HostBinding, Input, HostListener, Output, EventEmitter } from '@angular/core';
export class RateComponent {
    constructor() {
        this.fsr = true;
        // 星星大小
        this.size = 'large';
        // 启用半颗星模式
        this.enableHalf = false;
        // 启用再次点击后清除
        this.enableClear = false;
        // 只读
        this.disabled = false;
        // 分制
        this.pointSystem = 5;
        // 图案样式
        this.iconClass = 'f-icon-star';
        // 禁用单个星星的文字提示
        this.toolTipDisabled = true;
        // 默认的满意度文案
        this.toolTipContents = ['很不满意', '不满意', '一般', '满意', '非常满意'];
        // 启用评分
        this.enableScore = true;
        // 启用满意度
        this.enableSatisfaction = false;
        this.valueChange = new EventEmitter();
        // 界面中亮色区域真实宽度
        this.realWidth = 0;
        // 虚拟分数
        this.score = 0;
        // 最终分数
        this.realScore = 0;
        // 比率
        this.rate = 1;
        // 配置
        this.config = [];
        // 星星之间的间距,设计稿是4
        this.distance = 4;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set value(value) {
        this.realScore = value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let starId;
        switch (this.size) {
            case 'small':
                this.oneStarWidth = 14;
                break;
            case 'middle':
                this.oneStarWidth = 16;
                break;
            case 'large':
                this.oneStarWidth = 18;
                break;
        }
        this.config = [
            {
                id: 1
            },
            {
                id: 2
            },
            {
                id: 3
            },
            {
                id: 4
            },
            {
                id: 5
            }
        ];
        if (this.config.length) {
            this.rate = this.pointSystem / this.config.length;
        }
        if (this.realScore) {
            if (this.enableHalf) {
                starId = Math.ceil(this.realScore / this.rate);
            }
            else {
                starId = this.realScore;
            }
            this.realWidth = (this.oneStarWidth * this.realScore + Math.floor(this.realScore) * this.distance) / this.rate;
            this.satisfaction = this.toolTipContents[starId - 1];
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseOver(event) {
        if (!this.isTargetElement(event.target)) {
            return;
        }
        /** @type {?} */
        const id = parseInt(event.target.id);
        this.operateStar(event, id, false);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseMove(event) {
        if (!this.isTargetElement(event.target)) {
            return;
        }
        /** @type {?} */
        const id = parseInt(event.target.id);
        this.operateStar(event, id, false);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseOut(event) {
        if (!this.isTargetElement(event.target)) {
            return;
        }
        this.lightStarAreaWidth = 0;
        this.score = 0;
        this.satisfaction = null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        if (!this.isTargetElement(event.target)) {
            return;
        }
        /** @type {?} */
        const id = parseInt(event.target.id);
        this.operateStar(event, id, true);
    }
    /**
     * 是否是目标元素
     * @private
     * @param {?} element
     * @return {?}
     */
    isTargetElement(element) {
        if (element.className.indexOf('f-icon') !== -1) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     *  再次点击取消选中
     * @private
     * @return {?}
     */
    clear() {
        if (this.lightStarAreaWidth === this.realWidth && this.enableClear && this.realWidth !== 0) {
            this.realWidth = 0;
            this.realScore = 0;
            this.realSatisfaction = null;
            this.valueChange.emit(this.realScore);
            return true;
        }
        return false;
    }
    /**
     *
     * @private
     * @param {?} event 事件
     * @param {?} id 当前星星的id
     * @param {?} token 是否点击事件触发
     * @return {?}
     */
    operateStar(event, id, token) {
        // 禁用
        if (this.disabled) {
            return;
        }
        // 满意度文案
        if (this.enableSatisfaction) {
            this.satisfaction = this.toolTipContents[id - 1];
        }
        // 如果滑动的距离小于一颗星星一半的距离（或者超过）
        if (event.offsetX < this.oneStarWidth / 2 && this.enableHalf === true) {
            this.lightStarAreaWidth = (this.oneStarWidth * id) - this.oneStarWidth / 2 + this.distance * (id - 1);
            this.score = (this.rate * id) - this.rate / 2;
            if (token === true) {
                if (this.clear()) {
                    return;
                }
                this.realScore = this.score;
                this.valueChange.emit(this.realScore);
                this.realWidth = this.lightStarAreaWidth;
                this.realSatisfaction = this.satisfaction;
            }
        }
        else {
            this.lightStarAreaWidth = this.oneStarWidth * id + this.distance * (id - 1);
            this.score = this.rate * id;
            if (token === true) {
                if (this.clear()) {
                    return;
                }
                this.realScore = this.score;
                this.valueChange.emit(this.realScore);
                this.realWidth = this.lightStarAreaWidth;
                this.realSatisfaction = this.satisfaction;
            }
        }
    }
}
RateComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-rate',
                template: "<div class=\"star-light-area\" [ngStyle]=\"{'width': (lightStarAreaWidth ? lightStarAreaWidth : realWidth)+ 'px'}\">\r\n    <span class=\"{{'f-icon default-light-color ' + iconClass}}\" [id]=\"item.id\"\r\n        [ngStyle]=\"{'color': lightColor ? lightColor : null}\"\r\n        farrisTooltip [content]=\"toolTipContents[item.id - 1]\" [disable]=\"toolTipDisabled\"\r\n        [ngClass]=\"{'f-star-sm': size === 'small','f-star-md': size === 'middle','f-star-lg': size === 'large'}\"\r\n        *ngFor=\"let item of config\">\r\n    </span>\r\n</div>\r\n<div class=\"star-dark-area\"\r\n    [ngClass]=\"{'small': size === 'small', 'middle': size === 'middle','large': size === 'large'}\">\r\n    <span class=\"{{'f-icon default-dark-color ' + iconClass}}\" [id]=\"item.id\"\r\n        [ngStyle]=\"{'color': darkColor ? darkColor : null}\" \r\n        [ngClass]=\"{'f-star-sm': size === 'small', 'f-star-md': size === 'middle', 'f-star-lg': size === 'large'}\"\r\n        *ngFor=\"let item of config\">\r\n    </span>\r\n</div>\r\n<div class=\"f-utils-fill\"\r\n    [ngClass]=\"{'font-small': size === 'small', 'font-middle': size === 'middle','font-large': size === 'large'}\">\r\n    <span *ngIf=\"enableScore\">{{score ? score + '\u5206' : realScore + '\u5206'}}</span>\r\n    <span *ngIf=\"enableSatisfaction && (realSatisfaction || satisfaction)\">\uFF0C{{satisfaction ? satisfaction : realSatisfaction}}</span>\r\n</div>",
                styles: [":host{display:-webkit-box;display:flex;position:relative}:host .default-light-color{color:#fbdb10}:host .default-dark-color{color:#e8e8e8}.star-dark-area span,.star-light-area span{box-sizing:content-box;padding-right:4px}:host .f-star-sm{font-size:14px}:host .f-star-md{font-size:16px}:host .f-star-lg{font-size:18px}:host .star-dark-area{overflow:hidden;display:-webkit-box;display:flex;flex-wrap:nowrap}:host .small{width:90px}:host .middle{width:100px}:host .large{width:110px}:host .f-utils-fill{padding-left:2px;font-size:14px}:host .font-small{line-height:14px}:host .font-middle{line-height:16px}:host .font-large{line-height:18px}:host .star-light-area{position:absolute;left:0;top:0;z-index:2;width:0%;overflow:hidden;display:-webkit-box;display:flex;flex-wrap:nowrap}:host .star-dark-area span,:host .star-light-area span{-webkit-box-flex:1;flex:1}"]
            }] }
];
/** @nocollapse */
RateComponent.ctorParameters = () => [];
RateComponent.propDecorators = {
    fsr: [{ type: HostBinding, args: ['class.farris-star-rating',] }],
    value: [{ type: Input }],
    size: [{ type: Input }],
    enableHalf: [{ type: Input }],
    enableClear: [{ type: Input }],
    disabled: [{ type: Input }],
    pointSystem: [{ type: Input }],
    lightColor: [{ type: Input }],
    darkColor: [{ type: Input }],
    iconClass: [{ type: Input }],
    toolTipDisabled: [{ type: Input }],
    toolTipContents: [{ type: Input }],
    enableScore: [{ type: Input }],
    enableSatisfaction: [{ type: Input }],
    valueChange: [{ type: Output }],
    onMouseOver: [{ type: HostListener, args: ['mouseover', ['$event'],] }],
    onMouseMove: [{ type: HostListener, args: ['mousemove', ['$event'],] }],
    onMouseOut: [{ type: HostListener, args: ['mouseout', ['$event'],] }],
    onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    RateComponent.prototype.fsr;
    /** @type {?} */
    RateComponent.prototype.size;
    /** @type {?} */
    RateComponent.prototype.enableHalf;
    /** @type {?} */
    RateComponent.prototype.enableClear;
    /** @type {?} */
    RateComponent.prototype.disabled;
    /** @type {?} */
    RateComponent.prototype.pointSystem;
    /** @type {?} */
    RateComponent.prototype.lightColor;
    /** @type {?} */
    RateComponent.prototype.darkColor;
    /** @type {?} */
    RateComponent.prototype.iconClass;
    /** @type {?} */
    RateComponent.prototype.toolTipDisabled;
    /** @type {?} */
    RateComponent.prototype.toolTipContents;
    /** @type {?} */
    RateComponent.prototype.enableScore;
    /** @type {?} */
    RateComponent.prototype.enableSatisfaction;
    /** @type {?} */
    RateComponent.prototype.valueChange;
    /** @type {?} */
    RateComponent.prototype.pointInfo;
    /** @type {?} */
    RateComponent.prototype.oneStarWidth;
    /** @type {?} */
    RateComponent.prototype.lightStarAreaWidth;
    /** @type {?} */
    RateComponent.prototype.realWidth;
    /** @type {?} */
    RateComponent.prototype.score;
    /** @type {?} */
    RateComponent.prototype.realScore;
    /** @type {?} */
    RateComponent.prototype.rate;
    /** @type {?} */
    RateComponent.prototype.satisfaction;
    /** @type {?} */
    RateComponent.prototype.realSatisfaction;
    /** @type {?} */
    RateComponent.prototype.config;
    /** @type {?} */
    RateComponent.prototype.distance;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmF0ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXJhdGUvIiwic291cmNlcyI6WyJsaWIvcmF0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsV0FBVyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU8xRyxNQUFNLE9BQU8sYUFBYTtJQXFEdEI7UUFuRHlDLFFBQUcsR0FBRyxJQUFJLENBQUM7O1FBSzNDLFNBQUksR0FBRyxPQUFPLENBQUM7O1FBRWYsZUFBVSxHQUFHLEtBQUssQ0FBQzs7UUFFbkIsZ0JBQVcsR0FBRyxLQUFLLENBQUM7O1FBRXBCLGFBQVEsR0FBRyxLQUFLLENBQUM7O1FBRWpCLGdCQUFXLEdBQUcsQ0FBQyxDQUFDOztRQU1oQixjQUFTLEdBQUcsYUFBYSxDQUFDOztRQUcxQixvQkFBZSxHQUFHLElBQUksQ0FBQzs7UUFFdkIsb0JBQWUsR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQzs7UUFFdEQsZ0JBQVcsR0FBRyxJQUFJLENBQUM7O1FBRW5CLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQUMxQixnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7O1FBTzNDLGNBQVMsR0FBRyxDQUFDLENBQUM7O1FBRWQsVUFBSyxHQUFRLENBQUMsQ0FBQzs7UUFFZixjQUFTLEdBQUcsQ0FBQyxDQUFDOztRQUVkLFNBQUksR0FBRyxDQUFDLENBQUM7O1FBTVQsV0FBTSxHQUFHLEVBQUUsQ0FBQzs7UUFFWixhQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ0csQ0FBQzs7Ozs7SUFsRGpCLElBQWEsS0FBSyxDQUFDLEtBQVU7UUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDM0IsQ0FBQzs7OztJQWtE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K0JBQVk7O0lBRVosaUNBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSG9zdEJpbmRpbmcsIElucHV0LCBIb3N0TGlzdGVuZXIsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXJhdGUnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3JhdGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vcmF0ZS5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIFJhdGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZmFycmlzLXN0YXItcmF0aW5nJykgZnNyID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNldCB2YWx1ZSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5yZWFsU2NvcmUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIC8vIOaYn+aYn+Wkp+Wwj1xyXG4gICAgQElucHV0KCkgc2l6ZSA9ICdsYXJnZSc7XHJcbiAgICAvLyDlkK/nlKjljYrpopfmmJ/mqKHlvI9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUhhbGYgPSBmYWxzZTtcclxuICAgIC8vIOWQr+eUqOWGjeasoeeCueWHu+WQjua4hemZpFxyXG4gICAgQElucHV0KCkgZW5hYmxlQ2xlYXIgPSBmYWxzZTtcclxuICAgIC8vIOWPquivu1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIC8vIOWIhuWItlxyXG4gICAgQElucHV0KCkgcG9pbnRTeXN0ZW0gPSA1O1xyXG4gICAgLy8g5pif5pif5Lqu6ImyXHJcbiAgICBASW5wdXQoKSBsaWdodENvbG9yOiBzdHJpbmc7XHJcbiAgICAvLyDmmJ/mmJ/mmpfoibLvvIjlupXoibLvvIlcclxuICAgIEBJbnB1dCgpIGRhcmtDb2xvcjogc3RyaW5nO1xyXG4gICAgLy8g5Zu+5qGI5qC35byPXHJcbiAgICBASW5wdXQoKSBpY29uQ2xhc3MgPSAnZi1pY29uLXN0YXInO1xyXG5cclxuICAgIC8vIOemgeeUqOWNleS4quaYn+aYn+eahOaWh+Wtl+aPkOekulxyXG4gICAgQElucHV0KCkgdG9vbFRpcERpc2FibGVkID0gdHJ1ZTtcclxuICAgIC8vIOm7mOiupOeahOa7oeaEj+W6puaWh+ahiFxyXG4gICAgQElucHV0KCkgdG9vbFRpcENvbnRlbnRzID0gWyflvojkuI3mu6HmhI8nLCAn5LiN5ruh5oSPJywgJ+S4gOiIrCcsICfmu6HmhI8nLCAn6Z2e5bi45ruh5oSPJ107XHJcbiAgICAvLyDlkK/nlKjor4TliIZcclxuICAgIEBJbnB1dCgpIGVuYWJsZVNjb3JlID0gdHJ1ZTtcclxuICAgIC8vIOWQr+eUqOa7oeaEj+W6plxyXG4gICAgQElucHV0KCkgZW5hYmxlU2F0aXNmYWN0aW9uID0gZmFsc2U7XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBwb2ludEluZm86IHN0cmluZztcclxuICAgIC8vIOS4gOmil+aYn+WuveW6plxyXG4gICAgb25lU3RhcldpZHRoOiBudW1iZXI7XHJcbiAgICAvLyDkuq7oibLljLrln5/omZrmi5/lrr3luqZcclxuICAgIGxpZ2h0U3RhckFyZWFXaWR0aDogbnVtYmVyO1xyXG4gICAgLy8g55WM6Z2i5Lit5Lqu6Imy5Yy65Z+f55yf5a6e5a695bqmXHJcbiAgICByZWFsV2lkdGggPSAwO1xyXG4gICAgLy8g6Jma5ouf5YiG5pWwXHJcbiAgICBzY29yZTogYW55ID0gMDtcclxuICAgIC8vIOacgOe7iOWIhuaVsFxyXG4gICAgcmVhbFNjb3JlID0gMDtcclxuICAgIC8vIOavlOeOh1xyXG4gICAgcmF0ZSA9IDE7XHJcbiAgICAvLyDliIfmjaLnmoTmu6HmhI/luqZcclxuICAgIHNhdGlzZmFjdGlvbjogYW55O1xyXG4gICAgLy8g5pyA57uI5pi+56S655qE5ruh5oSP5bqmXHJcbiAgICByZWFsU2F0aXNmYWN0aW9uOiBhbnk7XHJcbiAgICAvLyDphY3nva5cclxuICAgIGNvbmZpZyA9IFtdO1xyXG4gICAgLy8g5pif5pif5LmL6Ze055qE6Ze06LedLOiuvuiuoeeov+aYrzRcclxuICAgIGRpc3RhbmNlID0gNDtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgbGV0IHN0YXJJZDogYW55O1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NtYWxsJzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25lU3RhcldpZHRoID0gMTQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWlkZGxlJzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25lU3RhcldpZHRoID0gMTY7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGFyZ2UnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbmVTdGFyV2lkdGggPSAxODtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbmZpZyA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6IDFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6IDJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6IDNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6IDRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6IDVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnJhdGUgPSB0aGlzLnBvaW50U3lzdGVtIC8gdGhpcy5jb25maWcubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWFsU2NvcmUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlSGFsZikge1xyXG4gICAgICAgICAgICAgICAgc3RhcklkID0gTWF0aC5jZWlsKHRoaXMucmVhbFNjb3JlIC8gdGhpcy5yYXRlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0YXJJZCA9IHRoaXMucmVhbFNjb3JlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVhbFdpZHRoID0gKHRoaXMub25lU3RhcldpZHRoICogdGhpcy5yZWFsU2NvcmUgKyBNYXRoLmZsb29yKHRoaXMucmVhbFNjb3JlKSAqIHRoaXMuZGlzdGFuY2UpIC8gdGhpcy5yYXRlO1xyXG4gICAgICAgICAgICB0aGlzLnNhdGlzZmFjdGlvbiA9IHRoaXMudG9vbFRpcENvbnRlbnRzW3N0YXJJZCAtIDFdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlb3ZlcicsIFsnJGV2ZW50J10pXHJcbiAgICBvbk1vdXNlT3ZlcihldmVudDogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVGFyZ2V0RWxlbWVudChldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChldmVudC50YXJnZXQuaWQpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0ZVN0YXIoZXZlbnQsIGlkLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2Vtb3ZlJywgWyckZXZlbnQnXSlcclxuICAgIG9uTW91c2VNb3ZlKGV2ZW50OiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNUYXJnZXRFbGVtZW50KGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC5pZCk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRlU3RhcihldmVudCwgaWQsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZW91dCcsIFsnJGV2ZW50J10pXHJcbiAgICBvbk1vdXNlT3V0KGV2ZW50OiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNUYXJnZXRFbGVtZW50KGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpZ2h0U3RhckFyZWFXaWR0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zYXRpc2ZhY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uQ2xpY2soZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1RhcmdldEVsZW1lbnQoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmlkKTtcclxuICAgICAgICB0aGlzLm9wZXJhdGVTdGFyKGV2ZW50LCBpZCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKbmmK/nm67moIflhYPntKBcclxuICAgICAqIEBwYXJhbSBlbGVtZW50IFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzVGFyZ2V0RWxlbWVudChlbGVtZW50OiBhbnkpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZignZi1pY29uJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg5YaN5qyh54K55Ye75Y+W5raI6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2xlYXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlnaHRTdGFyQXJlYVdpZHRoID09PSB0aGlzLnJlYWxXaWR0aCAmJiB0aGlzLmVuYWJsZUNsZWFyICYmIHRoaXMucmVhbFdpZHRoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVhbFdpZHRoID0gMDtcclxuICAgICAgICAgICAgdGhpcy5yZWFsU2NvcmUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnJlYWxTYXRpc2ZhY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy5yZWFsU2NvcmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBldmVudCDkuovku7ZcclxuICAgICAqIEBwYXJhbSBpZCDlvZPliY3mmJ/mmJ/nmoRpZFxyXG4gICAgICogQHBhcmFtIHRva2VuIOaYr+WQpueCueWHu+S6i+S7tuinpuWPkVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9wZXJhdGVTdGFyKGV2ZW50OiBhbnksIGlkOiBhbnksIHRva2VuOiBib29sZWFuKSB7XHJcbiAgICAgICAgLy8g56aB55SoXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmu6HmhI/luqbmlofmoYhcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVTYXRpc2ZhY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5zYXRpc2ZhY3Rpb24gPSB0aGlzLnRvb2xUaXBDb250ZW50c1tpZCAtIDFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlpoLmnpzmu5HliqjnmoTot53nprvlsI/kuo7kuIDpopfmmJ/mmJ/kuIDljYrnmoTot53nprvvvIjmiJbogIXotoXov4fvvIlcclxuICAgICAgICBpZiAoZXZlbnQub2Zmc2V0WCA8IHRoaXMub25lU3RhcldpZHRoIC8gMiAmJiB0aGlzLmVuYWJsZUhhbGYgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5saWdodFN0YXJBcmVhV2lkdGggPSAodGhpcy5vbmVTdGFyV2lkdGggKiBpZCkgLSB0aGlzLm9uZVN0YXJXaWR0aCAvIDIgKyB0aGlzLmRpc3RhbmNlICogKGlkIC0gMSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSAodGhpcy5yYXRlICogaWQpIC0gdGhpcy5yYXRlIC8gMjtcclxuICAgICAgICAgICAgaWYgKHRva2VuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGVhcigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFsU2NvcmUgPSB0aGlzLnNjb3JlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMucmVhbFNjb3JlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhbFdpZHRoID0gdGhpcy5saWdodFN0YXJBcmVhV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWxTYXRpc2ZhY3Rpb24gPSB0aGlzLnNhdGlzZmFjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlnaHRTdGFyQXJlYVdpZHRoID0gdGhpcy5vbmVTdGFyV2lkdGggKiBpZCArIHRoaXMuZGlzdGFuY2UgKiAoaWQgLSAxKTtcclxuICAgICAgICAgICAgdGhpcy5zY29yZSA9IHRoaXMucmF0ZSAqIGlkO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsZWFyKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWxTY29yZSA9IHRoaXMuc2NvcmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy5yZWFsU2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFsV2lkdGggPSB0aGlzLmxpZ2h0U3RhckFyZWFXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhbFNhdGlzZmFjdGlvbiA9IHRoaXMuc2F0aXNmYWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==