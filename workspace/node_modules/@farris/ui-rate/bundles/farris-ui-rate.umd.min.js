!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@farris/ui-tooltip"),require("@farris/ui-locale")):"function"==typeof define&&define.amd?define("@farris/ui-rate",["exports","@angular/core","@angular/common","@farris/ui-tooltip","@farris/ui-locale"],e):e((t.farris=t.farris||{},t.farris["ui-rate"]={}),t.ng.core,t.ng.common,t.uiTooltip,t.uiLocale)}(this,function(t,e,i,s,a){"use strict";var r=(Object.defineProperty(o.prototype,"value",{set:function(t){this.realScore=t},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){var t;switch(this.size){case"small":this.oneStarWidth=14;break;case"middle":this.oneStarWidth=16;break;case"large":this.oneStarWidth=18}this.config=[{id:1},{id:2},{id:3},{id:4},{id:5}],this.config.length&&(this.rate=this.pointSystem/this.config.length),this.realScore&&(t=this.enableHalf?Math.ceil(this.realScore/this.rate):this.realScore,this.realWidth=(this.oneStarWidth*this.realScore+Math.floor(this.realScore)*this.distance)/this.rate,this.satisfaction=this.toolTipContents[t-1])},o.prototype.onMouseOver=function(t){if(this.isTargetElement(t.target)){var e=parseInt(t.target.id);this.operateStar(t,e,!1)}},o.prototype.onMouseMove=function(t){if(this.isTargetElement(t.target)){var e=parseInt(t.target.id);this.operateStar(t,e,!1)}},o.prototype.onMouseOut=function(t){this.isTargetElement(t.target)&&(this.lightStarAreaWidth=0,this.score=0,this.satisfaction=null)},o.prototype.onClick=function(t){if(this.isTargetElement(t.target)){var e=parseInt(t.target.id);this.operateStar(t,e,!0)}},o.prototype.isTargetElement=function(t){return-1!==t.className.indexOf("f-icon")},o.prototype.clear=function(){return!(this.lightStarAreaWidth!==this.realWidth||!this.enableClear||0===this.realWidth||(this.realWidth=0,this.realScore=0,this.realSatisfaction=null,this.valueChange.emit(this.realScore),0))},o.prototype.operateStar=function(t,e,i){if(!this.disabled)if(this.enableSatisfaction&&(this.satisfaction=this.toolTipContents[e-1]),t.offsetX<this.oneStarWidth/2&&!0===this.enableHalf){if(this.lightStarAreaWidth=this.oneStarWidth*e-this.oneStarWidth/2+this.distance*(e-1),this.score=this.rate*e-this.rate/2,!0===i){if(this.clear())return;this.realScore=this.score,this.valueChange.emit(this.realScore),this.realWidth=this.lightStarAreaWidth,this.realSatisfaction=this.satisfaction}}else if(this.lightStarAreaWidth=this.oneStarWidth*e+this.distance*(e-1),this.score=this.rate*e,!0===i){if(this.clear())return;this.realScore=this.score,this.valueChange.emit(this.realScore),this.realWidth=this.lightStarAreaWidth,this.realSatisfaction=this.satisfaction}},o.decorators=[{type:e.Component,args:[{selector:"farris-rate",template:"<div class=\"star-light-area\" [ngStyle]=\"{'width': (lightStarAreaWidth ? lightStarAreaWidth : realWidth)+ 'px'}\">\r\n    <span class=\"{{'f-icon default-light-color ' + iconClass}}\" [id]=\"item.id\"\r\n        [ngStyle]=\"{'color': lightColor ? lightColor : null}\"\r\n        farrisTooltip [content]=\"toolTipContents[item.id - 1]\" [disable]=\"toolTipDisabled\"\r\n        [ngClass]=\"{'f-star-sm': size === 'small','f-star-md': size === 'middle','f-star-lg': size === 'large'}\"\r\n        *ngFor=\"let item of config\">\r\n    </span>\r\n</div>\r\n<div class=\"star-dark-area\"\r\n    [ngClass]=\"{'small': size === 'small', 'middle': size === 'middle','large': size === 'large'}\">\r\n    <span class=\"{{'f-icon default-dark-color ' + iconClass}}\" [id]=\"item.id\"\r\n        [ngStyle]=\"{'color': darkColor ? darkColor : null}\" \r\n        [ngClass]=\"{'f-star-sm': size === 'small', 'f-star-md': size === 'middle', 'f-star-lg': size === 'large'}\"\r\n        *ngFor=\"let item of config\">\r\n    </span>\r\n</div>\r\n<div class=\"f-utils-fill\"\r\n    [ngClass]=\"{'font-small': size === 'small', 'font-middle': size === 'middle','font-large': size === 'large'}\">\r\n    <span *ngIf=\"enableScore\">{{score ? score + '分' : realScore + '分'}}</span>\r\n    <span *ngIf=\"enableSatisfaction && (realSatisfaction || satisfaction)\">，{{satisfaction ? satisfaction : realSatisfaction}}</span>\r\n</div>",styles:[":host{display:-webkit-box;display:flex;position:relative}:host .default-light-color{color:#fbdb10}:host .default-dark-color{color:#e8e8e8}.star-dark-area span,.star-light-area span{box-sizing:content-box;padding-right:4px}:host .f-star-sm{font-size:14px}:host .f-star-md{font-size:16px}:host .f-star-lg{font-size:18px}:host .star-dark-area{overflow:hidden;display:-webkit-box;display:flex;flex-wrap:nowrap}:host .small{width:90px}:host .middle{width:100px}:host .large{width:110px}:host .f-utils-fill{padding-left:2px;font-size:14px}:host .font-small{line-height:14px}:host .font-middle{line-height:16px}:host .font-large{line-height:18px}:host .star-light-area{position:absolute;left:0;top:0;z-index:2;width:0%;overflow:hidden;display:-webkit-box;display:flex;flex-wrap:nowrap}:host .star-dark-area span,:host .star-light-area span{-webkit-box-flex:1;flex:1}"]}]}],o.ctorParameters=function(){return[]},o.propDecorators={fsr:[{type:e.HostBinding,args:["class.farris-star-rating"]}],value:[{type:e.Input}],size:[{type:e.Input}],enableHalf:[{type:e.Input}],enableClear:[{type:e.Input}],disabled:[{type:e.Input}],pointSystem:[{type:e.Input}],lightColor:[{type:e.Input}],darkColor:[{type:e.Input}],iconClass:[{type:e.Input}],toolTipDisabled:[{type:e.Input}],toolTipContents:[{type:e.Input}],enableScore:[{type:e.Input}],enableSatisfaction:[{type:e.Input}],valueChange:[{type:e.Output}],onMouseOver:[{type:e.HostListener,args:["mouseover",["$event"]]}],onMouseMove:[{type:e.HostListener,args:["mousemove",["$event"]]}],onMouseOut:[{type:e.HostListener,args:["mouseout",["$event"]]}],onClick:[{type:e.HostListener,args:["click",["$event"]]}]},o);function o(){this.fsr=!0,this.size="large",this.enableHalf=!1,this.enableClear=!1,this.disabled=!1,this.pointSystem=5,this.iconClass="f-icon-star",this.toolTipDisabled=!0,this.toolTipContents=["很不满意","不满意","一般","满意","非常满意"],this.enableScore=!0,this.enableSatisfaction=!1,this.valueChange=new e.EventEmitter,this.realWidth=0,this.score=0,this.realScore=0,this.rate=1,this.config=[],this.distance=4}var n=(l.decorators=[{type:e.NgModule,args:[{declarations:[r],imports:[i.CommonModule,s.FarrisTooltipModule,a.LocaleModule],exports:[r]}]}],l);function l(){}t.RateComponent=r,t.RateModule=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-rate.umd.min.js.map