/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { PaginationControlsDirective } from './pagination-controls.directive';
import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy, ViewEncapsulation, ViewChild, ElementRef } from '@angular/core';
/**
 * @param {?} input
 * @return {?}
 */
function coerceToBoolean(input) {
    return !!input && input !== 'false';
}
// styleUrls: ['./pagination-controls.component.css'],
/**
 * The default pagination controls component. Actually just a default implementation of a custom template.
 */
//  #farris-gotopagenumber{ text-align: center;
//     -moz-appearance: textfield;
//     width: 40px;
// }
// #farris-gotopagenumber::-webkit-outer-spin-button,
// #farris-gotopagenumber::-webkit-inner-spin-button {
//     -webkit-appearance: none;
// }
var PaginationControlsComponent = /** @class */ (function () {
    function PaginationControlsComponent() {
        this._directionLinks = true;
        this._autoHide = false;
        this._responsive = false;
        this.mouseInSelectedList = false;
        /**
         * 显示模式， default 默认；simple: 简洁
         */
        this.viewMode = 'default';
        this.maxSize = 7;
        this.previousLabel = 'Previous';
        this.nextLabel = 'Next';
        this.screenReaderPaginationLabel = 'Pagination';
        this.screenReaderPageLabel = 'page';
        this.screenReaderCurrentLabel = "You're on page";
        this.showPageList = true;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showSelectedList = false;
        this.showGoToLast = false;
        this.showGoToFirst = false;
        /**
         * 显示跳转至指定页码输入框
         */
        this.showGotoInput = false;
        this.position = 'right';
        /**
         * @deprecated
         */
        this.message = '每页 {0} 条记录，共 {1} 条记录';
        /**
         * @deprecated
         */
        this.pageListFirstText = '显示';
        /**
         * @deprecated
         */
        this.pageListLastText = '条';
        this.pageChange = new EventEmitter();
        this.pageSizeChange = new EventEmitter();
        this.showPagesPanel = false;
    }
    Object.defineProperty(PaginationControlsComponent.prototype, "directionLinks", {
        get: /**
         * @return {?}
         */
        function () {
            return this._directionLinks;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._directionLinks = coerceToBoolean(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationControlsComponent.prototype, "autoHide", {
        get: /**
         * @return {?}
         */
        function () {
            return this._autoHide;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._autoHide = coerceToBoolean(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationControlsComponent.prototype, "responsive", {
        get: /**
         * @return {?}
         */
        function () {
            return this._responsive;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._responsive = coerceToBoolean(value);
        },
        enumerable: true,
        configurable: true
    });
    // constructor(@Optional() private pagerService: PaginationService) {
    //     if (!this.pagerService) {
    //         this.pagerService = new PaginationService();
    //     }
    // }
    // constructor(@Optional() private pagerService: PaginationService) {
    //     if (!this.pagerService) {
    //         this.pagerService = new PaginationService();
    //     }
    // }
    /**
     * @param {?} $event
     * @return {?}
     */
    PaginationControlsComponent.prototype.onMouseLeave = 
    // constructor(@Optional() private pagerService: PaginationService) {
    //     if (!this.pagerService) {
    //         this.pagerService = new PaginationService();
    //     }
    // }
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.showPagesPanel = false;
        this.paginationDirective.changeDetectorRef.detectChanges();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    PaginationControlsComponent.prototype.onMouseEnter = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.paginationDirective.getTotalItems() === 0) {
            return;
        }
        this.showPagesPanel = true;
    };
    /**
     * @param {?} $event
     * @param {?} pagesize
     * @return {?}
     */
    PaginationControlsComponent.prototype.changePageSizeHandler = /**
     * @param {?} $event
     * @param {?} pagesize
     * @return {?}
     */
    function ($event, pagesize) {
        $event.stopPropagation();
        // 当前页再次点击
        if (pagesize === this.paginationDirective.getPageSize()) {
            return;
        }
        this.showPagesPanel = false;
        // this.removeOverlay();
        this.pageSizeChange.emit(pagesize);
    };
    /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    PaginationControlsComponent.prototype.onPageNumberChanged = /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    function (inputEl, maxNumber) {
        /** @type {?} */
        var target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        var currentPageNumber = Number(target.value);
        if (currentPageNumber > maxNumber) {
            target.value = maxNumber;
        }
        else {
            // if (currentPageNumber < 1) {
            //     target.value = 1;
            // }
        }
    };
    /**
     * @param {?} inputEl
     * @return {?}
     */
    PaginationControlsComponent.prototype.onPageNumberBlur = /**
     * @param {?} inputEl
     * @return {?}
     */
    function (inputEl) {
        /** @type {?} */
        var target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        var currentPageNumber = Number(target.value);
        if (currentPageNumber < 1) {
            target.value = 1;
        }
    };
    /**
     * @param {?} newpageList
     * @return {?}
     */
    PaginationControlsComponent.prototype.setPageList = /**
     * @param {?} newpageList
     * @return {?}
     */
    function (newpageList) {
        this.paginationDirective.setPageList(newpageList);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    PaginationControlsComponent.prototype.goto = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var newpager = Number($event.target.value);
        if (newpager < 1) {
            newpager = 1;
            $event.target.value = 1;
        }
        if (this.paginationDirective.getCurrent() !== newpager) {
            this.paginationDirective.goto(newpager);
        }
    };
    PaginationControlsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'pagination-controls',
                    template: "<pagination-template #p=\"paginationApi\" [id]=\"id\" [maxSize]=\"maxSize\" (pageChange)=\"pageChange.emit($event)\">\r\n    <div class=\"pagination-container\">\r\n        <ng-content select=\".pager-overlay-container\"></ng-content>\r\n        <ul class=\"ngx-pagination pagination\" role=\"navigation\" [attr.aria-label]=\"screenReaderPaginationLabel\"\r\n            style=\"position: relative;align-items: center;\" [class.responsive]=\"responsive\"\r\n            [class.pager-viewmode-default]=\"viewMode === 'default'\"\r\n            [class.pager-viewmode-simple]=\"viewMode === 'simple'\" *ngIf=\"!(autoHide && p.pages.length <= 1)\"\r\n            [style.justify-content]=\"position === 'center'?'center': 'start'\">\r\n            <ng-container *ngIf=\"viewMode === 'default'\">\r\n                <li class=\"pagination-message text-truncate d-flex\" *ngIf=\"showPageInfo\" style=\"min-width: 70px\"\r\n                    [class.ml-auto]=\"position=== 'right'\" [class.flex-fill]=\"position=== 'right'\"\r\n                    [style.justify-content]=\"position === 'right' ? 'right': ''\">\r\n                    <ng-content select=\".pager-pos-right\"></ng-content>\r\n                    <ng-content></ng-content>\r\n                    <div class=\"text-truncate \">\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.firstText' | locale}}</span>\r\n                        <b class=\"pg-message-total\">{{ p.getTotalItems()}}</b>\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.lastText' | locale}}</span>\r\n                    </div>\r\n                </li>\r\n                <!--\u6BCF\u9875\u8BB0\u5F55\u6570-->\r\n                <li class=\"pagination-pagelist\" *ngIf=\"showPageList\">\r\n                    <div class=\"dropup dropdown-right pg-pagelist\"\r\n                        [ngClass]=\"{'pagelist-disabled':p.getTotalItems()===0,'show': showPagesPanel}\"\r\n                        (mouseenter)=\"onMouseEnter($event)\" (mouseleave)=\"onMouseLeave($event)\">\r\n                        <div class=\"pg-pagelist-info\" #pglistinfo>\r\n                            <span class=\"pagelist-text\">{{'pagination.pagelist.firstText' | locale}}</span><b\r\n                                class=\"cur-pagesize\">{{p.getPageSize()}}</b><span\r\n                                class=\"pagelist-text\">{{'pagination.pagelist.lastText' | locale}}</span><i\r\n                                class=\"f-icon f-icon-dropdown\"></i>\r\n                        </div>\r\n                        <div class=\"dropdown-menu\" [ngClass]=\"{'show': showPagesPanel}\" style=\"margin-bottom: -1px;\">\r\n                <li class=\"dropdown-item\" [ngClass]=\"{'active':pagesize==p.getPageSize()}\"\r\n                    *ngFor=\"let pagesize of p.getPageList()\" (click)=\"changePageSizeHandler($event, pagesize)\">\r\n                    <span>{{ pagesize }}</span>\r\n                </li>\r\n    </div>\r\n    </div>\r\n    </li>\r\n\r\n    <!--\u9996\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </span>\r\n    </li>\r\n\r\n    <!--\u4E0A\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\" (click)=\"p.previous()\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n\r\n    <ng-container *ngIf=\"showPageNumber\">\r\n        <!--\u9875\u7801-->\r\n        <li class=\"page-item\" [class.current]=\"p.getCurrent() === page.value\" [class.ellipsis]=\"page.label === '...'\"\r\n            *ngFor=\"let page of p.pages\">\r\n            <a class=\"page-link\" tabindex=\"0\" (keyup.enter)=\"p.setCurrent(page.value)\"\r\n                (click)=\"p.setCurrent(page.value)\" *ngIf=\"p.getCurrent() !== page.value\">\r\n                <span>{{ page.label }}</span>\r\n            </a>\r\n            <span class=\"page-link\" *ngIf=\"p.getCurrent() === page.value\">{{page.label }}</span>\r\n        </li>\r\n    </ng-container>\r\n    <!--\u4E0B\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\" (click)=\"p.next()\"\r\n            [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </span>\r\n    </li>\r\n    <!--\u672B\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n            (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n\r\n    <li class=\"page-goto-input d-flex flex-row\" *ngIf=\"showGotoInput\"\r\n        style=\"padding-left: 10px; white-space: nowrap;align-items: center;\">\r\n        {{'pagination.goto.prefix' | locale}}\r\n\r\n        <div style=\"min-width: 40px;position: relative;height: 24px;margin: 0 3px;\">\r\n            <label style=\"display: inline-block;font-size: inherit;line-height: normal;visibility: hidden;font-family: inherit;\r\n            padding: 0;\">{{gotoinput.value}}</label>\r\n            <input #gotoinput class=\"form-control farris-gotopagenumber\" value=\"1\" type=\"number\" min=\"1\"\r\n                max=\"{{p.getLastPage()}}\"\r\n                style=\"width: 100%;position: absolute;left: 0;top: 0;padding: 0;height: 100%;line-height: 24px;\"\r\n                (input)=\"onPageNumberChanged($event, p.getLastPage())\" [value]=\"p.getCurrent()\"\r\n                (keyup.enter)=\"goto($event)\" (blur)=\"onPageNumberBlur($event)\">\r\n        </div>\r\n\r\n\r\n        {{'pagination.goto.suffix' | locale}}\r\n    </li>\r\n\r\n    <li class=\"pagination-message text-truncate d-flex flex-fill ml-3\" *ngIf=\"showPageInfo && position==='left'\">\r\n        <ng-content select=\".pager-pos-left\"></ng-content>\r\n    </li>\r\n\r\n    </ng-container>\r\n    <ng-container *ngIf=\"viewMode === 'simple'\">\r\n        <li class=\"page-item d-flex flex-fill\">\r\n            <ng-content select=\".simple-pager-extend-area\"></ng-content>\r\n        </li>\r\n        <!--\u9996\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks && showGoToFirst\">\r\n            <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n                [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u4E0A\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\"\r\n                (click)=\"p.previous()\" [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </span>\r\n        </li>\r\n\r\n        <li class=\"page-item\">\r\n            <input id=\"farris-gotopagenumber\" class=\"form-control farris-gotopagenumber\" min=\"1\"\r\n                max=\"{{p.getLastPage()}}\" type=\"number\" [ngModel]=\"p.getCurrent()\"\r\n                (input)=\"onPageNumberChanged($event, p.getLastPage())\" (keyup.enter)=\"p.goto($event.target.value)\">\r\n        </li>\r\n        <li class=\"page-item page-separator\" style=\"margin-left: 10px\">\r\n            <span style=\"font-size: 15px; font-weight: 200;\"> /</span>\r\n        </li>\r\n        <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n            <span style=\"font-size: 16px; font-weight: 600;\"> {{ p.getLastPage() }}</span>\r\n        </li>\r\n\r\n        <!--\u4E0B\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\"\r\n                (click)=\"p.next()\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u672B\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks  && showGoToLast\">\r\n            <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n                (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </span>\r\n        </li>\r\n    </ng-container>\r\n\r\n    </ul>\r\n    </div>\r\n</pagination-template>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    encapsulation: ViewEncapsulation.None
                }] }
    ];
    PaginationControlsComponent.propDecorators = {
        viewMode: [{ type: Input }],
        id: [{ type: Input }],
        maxSize: [{ type: Input }],
        directionLinks: [{ type: Input }],
        autoHide: [{ type: Input }],
        responsive: [{ type: Input }],
        previousLabel: [{ type: Input }],
        nextLabel: [{ type: Input }],
        screenReaderPaginationLabel: [{ type: Input }],
        screenReaderPageLabel: [{ type: Input }],
        screenReaderCurrentLabel: [{ type: Input }],
        showPageList: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        showSelectedList: [{ type: Input }],
        showGoToLast: [{ type: Input }],
        showGoToFirst: [{ type: Input }],
        showGotoInput: [{ type: Input }],
        position: [{ type: Input }],
        message: [{ type: Input }],
        pageListFirstText: [{ type: Input }],
        pageListLastText: [{ type: Input }],
        pageChange: [{ type: Output }],
        pageSizeChange: [{ type: Output }],
        paginationDirective: [{ type: ViewChild, args: ['p',] }],
        focusPageSizeRef: [{ type: ViewChild, args: ['focusPageSize',] }],
        pglistinfo: [{ type: ViewChild, args: ['pglistinfo',] }]
    };
    return PaginationControlsComponent;
}());
export { PaginationControlsComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._directionLinks;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._autoHide;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._responsive;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype.mouseInSelectedList;
    /**
     * 显示模式， default 默认；simple: 简洁
     * @type {?}
     */
    PaginationControlsComponent.prototype.viewMode;
    /** @type {?} */
    PaginationControlsComponent.prototype.id;
    /** @type {?} */
    PaginationControlsComponent.prototype.maxSize;
    /** @type {?} */
    PaginationControlsComponent.prototype.previousLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.nextLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPaginationLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPageLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderCurrentLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageInfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageNumber;
    /** @type {?} */
    PaginationControlsComponent.prototype.showSelectedList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToLast;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToFirst;
    /**
     * 显示跳转至指定页码输入框
     * @type {?}
     */
    PaginationControlsComponent.prototype.showGotoInput;
    /** @type {?} */
    PaginationControlsComponent.prototype.position;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.message;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListFirstText;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListLastText;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageSizeChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.paginationDirective;
    /** @type {?} */
    PaginationControlsComponent.prototype.focusPageSizeRef;
    /** @type {?} */
    PaginationControlsComponent.prototype.pglistinfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPagesPanel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBhZ2luYXRpb24vIiwic291cmNlcyI6WyJsaWIvcGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlFLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBVyxNQUFNLGVBQWUsQ0FBQzs7Ozs7QUFFbEosU0FBUyxlQUFlLENBQUMsS0FBdUI7SUFDNUMsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxPQUFPLENBQUM7QUFDeEMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQWdCRDtJQUFBO1FBU1ksb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFDdkIsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNsQixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUVwQix3QkFBbUIsR0FBRyxLQUFLLENBQUM7Ozs7UUFHM0IsYUFBUSxHQUFHLFNBQVMsQ0FBQztRQUdyQixZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBc0JaLGtCQUFhLEdBQUcsVUFBVSxDQUFDO1FBQzNCLGNBQVMsR0FBRyxNQUFNLENBQUM7UUFDbkIsZ0NBQTJCLEdBQUcsWUFBWSxDQUFDO1FBQzNDLDBCQUFxQixHQUFHLE1BQU0sQ0FBQztRQUMvQiw2QkFBd0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUM1QyxpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixtQkFBYyxHQUFHLElBQUksQ0FBQztRQUV0QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFFekIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFDckIsa0JBQWEs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QUViLFNBQVMsU0FBQyxlQUFlOzZCQUN6QixTQUFTLFNBQUMsWUFBWTs7SUFvRTNCLGtDQUFDO0NBQUEsQUFsSkQsSUFrSkM7U0EzSVksMkJBQTJCOzs7Ozs7SUFFcEMsc0RBQStCOzs7OztJQUMvQixnREFBMEI7Ozs7O0lBQzFCLGtEQUE0Qjs7Ozs7SUFFNUIsMERBQW9DOzs7OztJQUdwQywrQ0FBOEI7O0lBRTlCLHlDQUFvQjs7SUFDcEIsOENBQXFCOztJQXNCckIsb0RBQW9DOztJQUNwQyxnREFBNEI7O0lBQzVCLGtFQUFvRDs7SUFDcEQsNERBQXdDOztJQUN4QywrREFBcUQ7O0lBQ3JELG1EQUE2Qjs7SUFDN0IsbURBQTZCOztJQUM3QixxREFBK0I7O0lBRS9CLHVEQUFrQzs7SUFFbEMsbURBQThCOztJQUM5QixvREFBK0I7Ozs7O0lBRy9CLG9EQUErQjs7SUFFL0IsK0NBQXFEOzs7OztJQUtyRCw4Q0FBMEM7Ozs7O0lBSTFDLHdEQUFrQzs7Ozs7SUFJbEMsdURBQWdDOztJQUVoQyxpREFBd0U7O0lBQ3hFLHFEQUFzRDs7SUFDdEQsMERBQWlFOztJQUVqRSx1REFBOEQ7O0lBQzlELGlEQUFxRDs7SUFDckQscURBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnaW5hdGlvblNlcnZpY2UgfSBmcm9tICcuL3BhZ2luYXRpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25Db250cm9sc0RpcmVjdGl2ZSB9IGZyb20gJy4vcGFnaW5hdGlvbi1jb250cm9scy5kaXJlY3RpdmUnO1xyXG5pbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgVmlld0VuY2Fwc3VsYXRpb24sIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT3B0aW9uYWx9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9Cb29sZWFuKGlucHV0OiBzdHJpbmcgfCBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISFpbnB1dCAmJiBpbnB1dCAhPT0gJ2ZhbHNlJztcclxufVxyXG5cclxuLy8gc3R5bGVVcmxzOiBbJy4vcGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQuY3NzJ10sXHJcblxyXG4vKipcclxuICogVGhlIGRlZmF1bHQgcGFnaW5hdGlvbiBjb250cm9scyBjb21wb25lbnQuIEFjdHVhbGx5IGp1c3QgYSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGEgY3VzdG9tIHRlbXBsYXRlLlxyXG4gKi9cclxuXHJcbi8vICAjZmFycmlzLWdvdG9wYWdlbnVtYmVyeyB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbi8vICAgICAtbW96LWFwcGVhcmFuY2U6IHRleHRmaWVsZDtcclxuLy8gICAgIHdpZHRoOiA0MHB4O1xyXG4vLyB9XHJcbi8vICNmYXJyaXMtZ290b3BhZ2VudW1iZXI6Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b24sXHJcbi8vICNmYXJyaXMtZ290b3BhZ2VudW1iZXI6Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24ge1xyXG4vLyAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG4vLyB9XHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdwYWdpbmF0aW9uLWNvbnRyb2xzJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9wYWdpbmF0aW9uLWNvbnRyb2xzLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlczogW10sXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25Db250cm9sc0NvbXBvbmVudCB7XHJcblxyXG4gICAgcHJpdmF0ZSBfZGlyZWN0aW9uTGlua3MgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfYXV0b0hpZGUgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX3Jlc3BvbnNpdmUgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIG1vdXNlSW5TZWxlY3RlZExpc3QgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5pi+56S65qih5byP77yMIGRlZmF1bHQg6buY6K6k77ybc2ltcGxlOiDnroDmtIEgKi9cclxuICAgIEBJbnB1dCgpIHZpZXdNb2RlID0gJ2RlZmF1bHQnO1xyXG5cclxuICAgIEBJbnB1dCgpIGlkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBtYXhTaXplID0gNztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgZGlyZWN0aW9uTGlua3MoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbkxpbmtzO1xyXG4gICAgfVxyXG4gICAgc2V0IGRpcmVjdGlvbkxpbmtzKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uTGlua3MgPSBjb2VyY2VUb0Jvb2xlYW4odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIGdldCBhdXRvSGlkZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b0hpZGU7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b0hpZGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9hdXRvSGlkZSA9IGNvZXJjZVRvQm9vbGVhbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IHJlc3BvbnNpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNpdmU7XHJcbiAgICB9XHJcbiAgICBzZXQgcmVzcG9uc2l2ZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3Jlc3BvbnNpdmUgPSBjb2VyY2VUb0Jvb2xlYW4odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgcHJldmlvdXNMYWJlbCA9ICdQcmV2aW91cyc7XHJcbiAgICBASW5wdXQoKSBuZXh0TGFiZWwgPSAnTmV4dCc7XHJcbiAgICBASW5wdXQoKSBzY3JlZW5SZWFkZXJQYWdpbmF0aW9uTGFiZWwgPSAnUGFnaW5hdGlvbic7XHJcbiAgICBASW5wdXQoKSBzY3JlZW5SZWFkZXJQYWdlTGFiZWwgPSAncGFnZSc7XHJcbiAgICBASW5wdXQoKSBzY3JlZW5SZWFkZXJDdXJyZW50TGFiZWwgPSBgWW91J3JlIG9uIHBhZ2VgO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VMaXN0ID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd1NlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dHb1RvTGFzdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2hvd0dvVG9GaXJzdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDmmL7npLrot7Povazoh7PmjIflrprpobXnoIHovpPlhaXmoYYgKi9cclxuICAgIEBJbnB1dCgpIHNob3dHb3RvSW5wdXQgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBwb3NpdGlvbjogJ2xlZnQnfCdjZW50ZXInfCdyaWdodCcgPSAncmlnaHQnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgbWVzc2FnZSA9ICfmr4/pobUgezB9IOadoeiusOW9le+8jOWFsSB7MX0g5p2h6K6w5b2VJztcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3RGaXJzdFRleHQgPSAn5pi+56S6JztcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3RMYXN0VGV4dCA9ICfmnaEnO1xyXG5cclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gICAgQE91dHB1dCgpIHBhZ2VTaXplQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgICBAVmlld0NoaWxkKCdwJykgcGFnaW5hdGlvbkRpcmVjdGl2ZTogUGFnaW5hdGlvbkNvbnRyb2xzRGlyZWN0aXZlO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2ZvY3VzUGFnZVNpemUnKSBmb2N1c1BhZ2VTaXplUmVmOiBFbGVtZW50UmVmPGFueT47XHJcbiAgICBAVmlld0NoaWxkKCdwZ2xpc3RpbmZvJykgcGdsaXN0aW5mbzogRWxlbWVudFJlZjxhbnk+O1xyXG4gICAgc2hvd1BhZ2VzUGFuZWwgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBwcml2YXRlIHBhZ2VyU2VydmljZTogUGFnaW5hdGlvblNlcnZpY2UpIHtcclxuICAgIC8vICAgICBpZiAoIXRoaXMucGFnZXJTZXJ2aWNlKSB7XHJcbiAgICAvLyAgICAgICAgIHRoaXMucGFnZXJTZXJ2aWNlID0gbmV3IFBhZ2luYXRpb25TZXJ2aWNlKCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIG9uTW91c2VMZWF2ZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRW50ZXIoJGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nZXRUb3RhbEl0ZW1zKCkgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VQYWdlU2l6ZUhhbmRsZXIoJGV2ZW50LCBwYWdlc2l6ZSkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvLyDlvZPliY3pobXlho3mrKHngrnlh7tcclxuICAgICAgICBpZiAocGFnZXNpemUgPT09IHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nZXRQYWdlU2l6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93UGFnZXNQYW5lbCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHRoaXMucmVtb3ZlT3ZlcmxheSgpO1xyXG4gICAgICAgIHRoaXMucGFnZVNpemVDaGFuZ2UuZW1pdChwYWdlc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlTnVtYmVyQ2hhbmdlZChpbnB1dEVsOiBLZXlib2FyZEV2ZW50LCBtYXhOdW1iZXIpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBpbnB1dEVsLnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2VOdW1iZXIgPSBOdW1iZXIodGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBpZiAoY3VycmVudFBhZ2VOdW1iZXIgPiBtYXhOdW1iZXIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gbWF4TnVtYmVyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIChjdXJyZW50UGFnZU51bWJlciA8IDEpIHtcclxuICAgICAgICAgICAgLy8gICAgIHRhcmdldC52YWx1ZSA9IDE7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlTnVtYmVyQmx1cihpbnB1dEVsOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBpbnB1dEVsLnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFBhZ2VOdW1iZXIgPSBOdW1iZXIodGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBpZiAoY3VycmVudFBhZ2VOdW1iZXIgPCAxKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFBhZ2VMaXN0KG5ld3BhZ2VMaXN0OiBudW1iZXJbXSkge1xyXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5zZXRQYWdlTGlzdChuZXdwYWdlTGlzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ290bygkZXZlbnQpIHtcclxuICAgICAgICBsZXQgbmV3cGFnZXIgPSBOdW1iZXIoJGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKG5ld3BhZ2VyIDwgMSkge1xyXG4gICAgICAgICAgICBuZXdwYWdlciA9IDE7XHJcbiAgICAgICAgICAgICRldmVudC50YXJnZXQudmFsdWUgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nZXRDdXJyZW50KCkgIT09IG5ld3BhZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbkRpcmVjdGl2ZS5nb3RvKG5ld3BhZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==