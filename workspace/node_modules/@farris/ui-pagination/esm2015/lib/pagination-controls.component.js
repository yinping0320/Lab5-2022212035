/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { PaginationControlsDirective } from './pagination-controls.directive';
import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy, ViewEncapsulation, ViewChild, ElementRef } from '@angular/core';
/**
 * @param {?} input
 * @return {?}
 */
function coerceToBoolean(input) {
    return !!input && input !== 'false';
}
// styleUrls: ['./pagination-controls.component.css'],
/**
 * The default pagination controls component. Actually just a default implementation of a custom template.
 */
//  #farris-gotopagenumber{ text-align: center;
//     -moz-appearance: textfield;
//     width: 40px;
// }
// #farris-gotopagenumber::-webkit-outer-spin-button,
// #farris-gotopagenumber::-webkit-inner-spin-button {
//     -webkit-appearance: none;
// }
export class PaginationControlsComponent {
    constructor() {
        this._directionLinks = true;
        this._autoHide = false;
        this._responsive = false;
        this.mouseInSelectedList = false;
        /**
         * 显示模式， default 默认；simple: 简洁
         */
        this.viewMode = 'default';
        this.maxSize = 7;
        this.previousLabel = 'Previous';
        this.nextLabel = 'Next';
        this.screenReaderPaginationLabel = 'Pagination';
        this.screenReaderPageLabel = 'page';
        this.screenReaderCurrentLabel = `You're on page`;
        this.showPageList = true;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showSelectedList = false;
        this.showGoToLast = false;
        this.showGoToFirst = false;
        /**
         * 显示跳转至指定页码输入框
         */
        this.showGotoInput = false;
        this.position = 'right';
        /**
         * @deprecated
         */
        this.message = '每页 {0} 条记录，共 {1} 条记录';
        /**
         * @deprecated
         */
        this.pageListFirstText = '显示';
        /**
         * @deprecated
         */
        this.pageListLastText = '条';
        this.pageChange = new EventEmitter();
        this.pageSizeChange = new EventEmitter();
        this.showPagesPanel = false;
    }
    /**
     * @return {?}
     */
    get directionLinks() {
        return this._directionLinks;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set directionLinks(value) {
        this._directionLinks = coerceToBoolean(value);
    }
    /**
     * @return {?}
     */
    get autoHide() {
        return this._autoHide;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set autoHide(value) {
        this._autoHide = coerceToBoolean(value);
    }
    /**
     * @return {?}
     */
    get responsive() {
        return this._responsive;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set responsive(value) {
        this._responsive = coerceToBoolean(value);
    }
    // constructor(@Optional() private pagerService: PaginationService) {
    //     if (!this.pagerService) {
    //         this.pagerService = new PaginationService();
    //     }
    // }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseLeave($event) {
        this.showPagesPanel = false;
        this.paginationDirective.changeDetectorRef.detectChanges();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMouseEnter($event) {
        if (this.paginationDirective.getTotalItems() === 0) {
            return;
        }
        this.showPagesPanel = true;
    }
    /**
     * @param {?} $event
     * @param {?} pagesize
     * @return {?}
     */
    changePageSizeHandler($event, pagesize) {
        $event.stopPropagation();
        // 当前页再次点击
        if (pagesize === this.paginationDirective.getPageSize()) {
            return;
        }
        this.showPagesPanel = false;
        // this.removeOverlay();
        this.pageSizeChange.emit(pagesize);
    }
    /**
     * @param {?} inputEl
     * @param {?} maxNumber
     * @return {?}
     */
    onPageNumberChanged(inputEl, maxNumber) {
        /** @type {?} */
        const target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        const currentPageNumber = Number(target.value);
        if (currentPageNumber > maxNumber) {
            target.value = maxNumber;
        }
        else {
            // if (currentPageNumber < 1) {
            //     target.value = 1;
            // }
        }
    }
    /**
     * @param {?} inputEl
     * @return {?}
     */
    onPageNumberBlur(inputEl) {
        /** @type {?} */
        const target = (/** @type {?} */ (inputEl.target));
        /** @type {?} */
        const currentPageNumber = Number(target.value);
        if (currentPageNumber < 1) {
            target.value = 1;
        }
    }
    /**
     * @param {?} newpageList
     * @return {?}
     */
    setPageList(newpageList) {
        this.paginationDirective.setPageList(newpageList);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    goto($event) {
        /** @type {?} */
        let newpager = Number($event.target.value);
        if (newpager < 1) {
            newpager = 1;
            $event.target.value = 1;
        }
        if (this.paginationDirective.getCurrent() !== newpager) {
            this.paginationDirective.goto(newpager);
        }
    }
}
PaginationControlsComponent.decorators = [
    { type: Component, args: [{
                selector: 'pagination-controls',
                template: "<pagination-template #p=\"paginationApi\" [id]=\"id\" [maxSize]=\"maxSize\" (pageChange)=\"pageChange.emit($event)\">\r\n    <div class=\"pagination-container\">\r\n        <ng-content select=\".pager-overlay-container\"></ng-content>\r\n        <ul class=\"ngx-pagination pagination\" role=\"navigation\" [attr.aria-label]=\"screenReaderPaginationLabel\"\r\n            style=\"position: relative;align-items: center;\" [class.responsive]=\"responsive\"\r\n            [class.pager-viewmode-default]=\"viewMode === 'default'\"\r\n            [class.pager-viewmode-simple]=\"viewMode === 'simple'\" *ngIf=\"!(autoHide && p.pages.length <= 1)\"\r\n            [style.justify-content]=\"position === 'center'?'center': 'start'\">\r\n            <ng-container *ngIf=\"viewMode === 'default'\">\r\n                <li class=\"pagination-message text-truncate d-flex\" *ngIf=\"showPageInfo\" style=\"min-width: 70px\"\r\n                    [class.ml-auto]=\"position=== 'right'\" [class.flex-fill]=\"position=== 'right'\"\r\n                    [style.justify-content]=\"position === 'right' ? 'right': ''\">\r\n                    <ng-content select=\".pager-pos-right\"></ng-content>\r\n                    <ng-content></ng-content>\r\n                    <div class=\"text-truncate \">\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.firstText' | locale}}</span>\r\n                        <b class=\"pg-message-total\">{{ p.getTotalItems()}}</b>\r\n                        <span class=\"pg-message-text\">{{ 'pagination.totalinfo.lastText' | locale}}</span>\r\n                    </div>\r\n                </li>\r\n                <!--\u6BCF\u9875\u8BB0\u5F55\u6570-->\r\n                <li class=\"pagination-pagelist\" *ngIf=\"showPageList\">\r\n                    <div class=\"dropup dropdown-right pg-pagelist\"\r\n                        [ngClass]=\"{'pagelist-disabled':p.getTotalItems()===0,'show': showPagesPanel}\"\r\n                        (mouseenter)=\"onMouseEnter($event)\" (mouseleave)=\"onMouseLeave($event)\">\r\n                        <div class=\"pg-pagelist-info\" #pglistinfo>\r\n                            <span class=\"pagelist-text\">{{'pagination.pagelist.firstText' | locale}}</span><b\r\n                                class=\"cur-pagesize\">{{p.getPageSize()}}</b><span\r\n                                class=\"pagelist-text\">{{'pagination.pagelist.lastText' | locale}}</span><i\r\n                                class=\"f-icon f-icon-dropdown\"></i>\r\n                        </div>\r\n                        <div class=\"dropdown-menu\" [ngClass]=\"{'show': showPagesPanel}\" style=\"margin-bottom: -1px;\">\r\n                <li class=\"dropdown-item\" [ngClass]=\"{'active':pagesize==p.getPageSize()}\"\r\n                    *ngFor=\"let pagesize of p.getPageList()\" (click)=\"changePageSizeHandler($event, pagesize)\">\r\n                    <span>{{ pagesize }}</span>\r\n                </li>\r\n    </div>\r\n    </div>\r\n    </li>\r\n\r\n    <!--\u9996\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-first\"></span>\r\n        </span>\r\n    </li>\r\n\r\n    <!--\u4E0A\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\" (click)=\"p.previous()\"\r\n            [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-pre\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n\r\n    <ng-container *ngIf=\"showPageNumber\">\r\n        <!--\u9875\u7801-->\r\n        <li class=\"page-item\" [class.current]=\"p.getCurrent() === page.value\" [class.ellipsis]=\"page.label === '...'\"\r\n            *ngFor=\"let page of p.pages\">\r\n            <a class=\"page-link\" tabindex=\"0\" (keyup.enter)=\"p.setCurrent(page.value)\"\r\n                (click)=\"p.setCurrent(page.value)\" *ngIf=\"p.getCurrent() !== page.value\">\r\n                <span>{{ page.label }}</span>\r\n            </a>\r\n            <span class=\"page-link\" *ngIf=\"p.getCurrent() === page.value\">{{page.label }}</span>\r\n        </li>\r\n    </ng-container>\r\n    <!--\u4E0B\u4E00\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\" (click)=\"p.next()\"\r\n            [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-next\"></span>\r\n        </span>\r\n    </li>\r\n    <!--\u672B\u9875-->\r\n    <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n        <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n            (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </a>\r\n        <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n            <span class=\"f-icon f-page-last\"></span>\r\n        </span>\r\n    </li>\r\n\r\n\r\n\r\n    <li class=\"page-goto-input d-flex flex-row\" *ngIf=\"showGotoInput\"\r\n        style=\"padding-left: 10px; white-space: nowrap;align-items: center;\">\r\n        {{'pagination.goto.prefix' | locale}}\r\n\r\n        <div style=\"min-width: 40px;position: relative;height: 24px;margin: 0 3px;\">\r\n            <label style=\"display: inline-block;font-size: inherit;line-height: normal;visibility: hidden;font-family: inherit;\r\n            padding: 0;\">{{gotoinput.value}}</label>\r\n            <input #gotoinput class=\"form-control farris-gotopagenumber\" value=\"1\" type=\"number\" min=\"1\"\r\n                max=\"{{p.getLastPage()}}\"\r\n                style=\"width: 100%;position: absolute;left: 0;top: 0;padding: 0;height: 100%;line-height: 24px;\"\r\n                (input)=\"onPageNumberChanged($event, p.getLastPage())\" [value]=\"p.getCurrent()\"\r\n                (keyup.enter)=\"goto($event)\" (blur)=\"onPageNumberBlur($event)\">\r\n        </div>\r\n\r\n\r\n        {{'pagination.goto.suffix' | locale}}\r\n    </li>\r\n\r\n    <li class=\"pagination-message text-truncate d-flex flex-fill ml-3\" *ngIf=\"showPageInfo && position==='left'\">\r\n        <ng-content select=\".pager-pos-left\"></ng-content>\r\n    </li>\r\n\r\n    </ng-container>\r\n    <ng-container *ngIf=\"viewMode === 'simple'\">\r\n        <li class=\"page-item d-flex flex-fill\">\r\n            <ng-content select=\".simple-pager-extend-area\"></ng-content>\r\n        </li>\r\n        <!--\u9996\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks && showGoToFirst\">\r\n            <a tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.first($event)\" (click)=\"p.first($event)\"\r\n                [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-first\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u4E0A\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isFirstPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"1 < p.getCurrent()\" (keyup.enter)=\"p.previous()\"\r\n                (click)=\"p.previous()\" [attr.aria-label]=\"previousLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isFirstPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-pre\"></span>\r\n            </span>\r\n        </li>\r\n\r\n        <li class=\"page-item\">\r\n            <input id=\"farris-gotopagenumber\" class=\"form-control farris-gotopagenumber\" min=\"1\"\r\n                max=\"{{p.getLastPage()}}\" type=\"number\" [ngModel]=\"p.getCurrent()\"\r\n                (input)=\"onPageNumberChanged($event, p.getLastPage())\" (keyup.enter)=\"p.goto($event.target.value)\">\r\n        </li>\r\n        <li class=\"page-item page-separator\" style=\"margin-left: 10px\">\r\n            <span style=\"font-size: 15px; font-weight: 200;\"> /</span>\r\n        </li>\r\n        <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n            <span style=\"font-size: 16px; font-weight: 600;\"> {{ p.getLastPage() }}</span>\r\n        </li>\r\n\r\n        <!--\u4E0B\u4E00\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks\">\r\n            <a class=\"page-link border-0\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.next()\"\r\n                (click)=\"p.next()\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link border-0\">\r\n                <span class=\"f-icon f-page-next\"></span>\r\n            </span>\r\n        </li>\r\n        <!--\u672B\u9875-->\r\n        <li class=\"page-item\" [class.disabled]=\"p.isLastPage()\" *ngIf=\"directionLinks  && showGoToLast\">\r\n            <a class=\"page-link\" tabindex=\"0\" *ngIf=\"!p.isLastPage()\" (keyup.enter)=\"p.last($event)\"\r\n                (click)=\"p.last($event)\" [attr.aria-label]=\"nextLabel + ' ' + screenReaderPageLabel\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </a>\r\n            <span *ngIf=\"p.isLastPage()\" class=\"page-link\">\r\n                <span class=\"f-icon f-page-last\"></span>\r\n            </span>\r\n        </li>\r\n    </ng-container>\r\n\r\n    </ul>\r\n    </div>\r\n</pagination-template>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None
            }] }
];
PaginationControlsComponent.propDecorators = {
    viewMode: [{ type: Input }],
    id: [{ type: Input }],
    maxSize: [{ type: Input }],
    directionLinks: [{ type: Input }],
    autoHide: [{ type: Input }],
    responsive: [{ type: Input }],
    previousLabel: [{ type: Input }],
    nextLabel: [{ type: Input }],
    screenReaderPaginationLabel: [{ type: Input }],
    screenReaderPageLabel: [{ type: Input }],
    screenReaderCurrentLabel: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    showSelectedList: [{ type: Input }],
    showGoToLast: [{ type: Input }],
    showGoToFirst: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    position: [{ type: Input }],
    message: [{ type: Input }],
    pageListFirstText: [{ type: Input }],
    pageListLastText: [{ type: Input }],
    pageChange: [{ type: Output }],
    pageSizeChange: [{ type: Output }],
    paginationDirective: [{ type: ViewChild, args: ['p',] }],
    focusPageSizeRef: [{ type: ViewChild, args: ['focusPageSize',] }],
    pglistinfo: [{ type: ViewChild, args: ['pglistinfo',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._directionLinks;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._autoHide;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype._responsive;
    /**
     * @type {?}
     * @private
     */
    PaginationControlsComponent.prototype.mouseInSelectedList;
    /**
     * 显示模式， default 默认；simple: 简洁
     * @type {?}
     */
    PaginationControlsComponent.prototype.viewMode;
    /** @type {?} */
    PaginationControlsComponent.prototype.id;
    /** @type {?} */
    PaginationControlsComponent.prototype.maxSize;
    /** @type {?} */
    PaginationControlsComponent.prototype.previousLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.nextLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPaginationLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderPageLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.screenReaderCurrentLabel;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageInfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPageNumber;
    /** @type {?} */
    PaginationControlsComponent.prototype.showSelectedList;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToLast;
    /** @type {?} */
    PaginationControlsComponent.prototype.showGoToFirst;
    /**
     * 显示跳转至指定页码输入框
     * @type {?}
     */
    PaginationControlsComponent.prototype.showGotoInput;
    /** @type {?} */
    PaginationControlsComponent.prototype.position;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.message;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListFirstText;
    /**
     * @deprecated
     * @type {?}
     */
    PaginationControlsComponent.prototype.pageListLastText;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.pageSizeChange;
    /** @type {?} */
    PaginationControlsComponent.prototype.paginationDirective;
    /** @type {?} */
    PaginationControlsComponent.prototype.focusPageSizeRef;
    /** @type {?} */
    PaginationControlsComponent.prototype.pglistinfo;
    /** @type {?} */
    PaginationControlsComponent.prototype.showPagesPanel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXBhZ2luYXRpb24vIiwic291cmNlcyI6WyJsaWIvcGFnaW5hdGlvbi1jb250cm9scy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzlFLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBVyxNQUFNLGVBQWUsQ0FBQzs7Ozs7QUFFbEosU0FBUyxlQUFlLENBQUMsS0FBdUI7SUFDNUMsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxPQUFPLENBQUM7QUFDeEMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQXVCRCxNQUFNLE9BQU8sMkJBQTJCO0lBUHhDO1FBU1ksb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFDdkIsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNsQixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUVwQix3QkFBbUIsR0FBRyxLQUFLLENBQUM7Ozs7UUFHM0IsYUFBUSxHQUFHLFNBQVMsQ0FBQztRQUdyQixZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBc0JaLGtCQUFhLEdBQUcsVUFBVSxDQUFDO1FBQzNCLGNBQVMsR0FBRyxNQUFNLENBQUM7UUFDbkIsZ0NBQTJCLEdBQUcsWUFBWSxDQUFDO1FBQzNDLDBCQUFxQixHQUFHLE1BQU0sQ0FBQztRQUMvQiw2QkFBd0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUM1QyxpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixpQkFBWSxHQUFHLElBQUksQ0FBQztRQUNwQixtQkFBYyxHQUFHLElBQUksQ0FBQztRQUV0QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFFekIsaUJBQVksR0FBRyxLQUFL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SUFFOUIseUNBQW9COztJQUNwQiw4Q0FBcUI7O0lBc0JyQixvREFBb0M7O0lBQ3BDLGdEQUE0Qjs7SUFDNUIsa0VBQW9EOztJQUNwRCw0REFBd0M7O0lBQ3hDLCtEQUFxRDs7SUFDckQsbURBQTZCOztJQUM3QixtREFBNkI7O0lBQzdCLHFEQUErQjs7SUFFL0IsdURBQWtDOztJQUVsQyxtREFBOEI7O0lBQzlCLG9EQUErQjs7Ozs7SUFHL0Isb0RBQStCOztJQUUvQiwrQ0FBcUQ7Ozs7O0lBS3JELDhDQUEwQzs7Ozs7SUFJMUMsd0RBQWtDOzs7OztJQUlsQyx1REFBZ0M7O0lBRWhDLGlEQUF3RTs7SUFDeEUscURBQXNEOztJQUN0RCwwREFBaUU7O0lBRWpFLHVEQUE4RDs7SUFDOUQsaURBQXFEOztJQUNyRCxxREFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdpbmF0aW9uU2VydmljZSB9IGZyb20gJy4vcGFnaW5hdGlvbi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUGFnaW5hdGlvbkNvbnRyb2xzRGlyZWN0aXZlIH0gZnJvbSAnLi9wYWdpbmF0aW9uLWNvbnRyb2xzLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7Q29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBWaWV3RW5jYXBzdWxhdGlvbiwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPcHRpb25hbH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5mdW5jdGlvbiBjb2VyY2VUb0Jvb2xlYW4oaW5wdXQ6IHN0cmluZyB8IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgIHJldHVybiAhIWlucHV0ICYmIGlucHV0ICE9PSAnZmFsc2UnO1xyXG59XHJcblxyXG4vLyBzdHlsZVVybHM6IFsnLi9wYWdpbmF0aW9uLWNvbnRyb2xzLmNvbXBvbmVudC5jc3MnXSxcclxuXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBwYWdpbmF0aW9uIGNvbnRyb2xzIGNvbXBvbmVudC4gQWN0dWFsbHkganVzdCBhIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgYSBjdXN0b20gdGVtcGxhdGUuXHJcbiAqL1xyXG5cclxuLy8gICNmYXJyaXMtZ290b3BhZ2VudW1iZXJ7IHRleHQtYWxpZ246IGNlbnRlcjtcclxuLy8gICAgIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xyXG4vLyAgICAgd2lkdGg6IDQwcHg7XHJcbi8vIH1cclxuLy8gI2ZhcnJpcy1nb3RvcGFnZW51bWJlcjo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbixcclxuLy8gI2ZhcnJpcy1nb3RvcGFnZW51bWJlcjo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiB7XHJcbi8vICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XHJcbi8vIH1cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3BhZ2luYXRpb24tY29udHJvbHMnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3BhZ2luYXRpb24tY29udHJvbHMuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvbkNvbnRyb2xzQ29tcG9uZW50IHtcclxuXHJcbiAgICBwcml2YXRlIF9kaXJlY3Rpb25MaW5rcyA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9hdXRvSGlkZSA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfcmVzcG9uc2l2ZSA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgbW91c2VJblNlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDmmL7npLrmqKHlvI/vvIwgZGVmYXVsdCDpu5jorqTvvJtzaW1wbGU6IOeugOa0gSAqL1xyXG4gICAgQElucHV0KCkgdmlld01vZGUgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgQElucHV0KCkgaWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIG1heFNpemUgPSA3O1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkaXJlY3Rpb25MaW5rcygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uTGlua3M7XHJcbiAgICB9XHJcbiAgICBzZXQgZGlyZWN0aW9uTGlua3ModmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25MaW5rcyA9IGNvZXJjZVRvQm9vbGVhbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGF1dG9IaWRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvSGlkZTtcclxuICAgIH1cclxuICAgIHNldCBhdXRvSGlkZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2F1dG9IaWRlID0gY29lcmNlVG9Cb29sZWFuKHZhbHVlKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgcmVzcG9uc2l2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2l2ZTtcclxuICAgIH1cclxuICAgIHNldCByZXNwb25zaXZlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzcG9uc2l2ZSA9IGNvZXJjZVRvQm9vbGVhbih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBwcmV2aW91c0xhYmVsID0gJ1ByZXZpb3VzJztcclxuICAgIEBJbnB1dCgpIG5leHRMYWJlbCA9ICdOZXh0JztcclxuICAgIEBJbnB1dCgpIHNjcmVlblJlYWRlclBhZ2luYXRpb25MYWJlbCA9ICdQYWdpbmF0aW9uJztcclxuICAgIEBJbnB1dCgpIHNjcmVlblJlYWRlclBhZ2VMYWJlbCA9ICdwYWdlJztcclxuICAgIEBJbnB1dCgpIHNjcmVlblJlYWRlckN1cnJlbnRMYWJlbCA9IGBZb3UncmUgb24gcGFnZWA7XHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VJbmZvID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTnVtYmVyID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93U2VsZWN0ZWRMaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0dvVG9MYXN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzaG93R29Ub0ZpcnN0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOaYvuekuui3s+i9rOiHs+aMh+Wumumhteeggei+k+WFpeahhiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0dvdG9JbnB1dCA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIHBvc2l0aW9uOiAnbGVmdCd8J2NlbnRlcid8J3JpZ2h0JyA9ICdyaWdodCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBtZXNzYWdlID0gJ+avj+mhtSB7MH0g5p2h6K6w5b2V77yM5YWxIHsxfSDmnaHorrDlvZUnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdEZpcnN0VGV4dCA9ICfmmL7npLonO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdExhc3RUZXh0ID0gJ+adoSc7XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcclxuICAgIEBWaWV3Q2hpbGQoJ3AnKSBwYWdpbmF0aW9uRGlyZWN0aXZlOiBQYWdpbmF0aW9uQ29udHJvbHNEaXJlY3RpdmU7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZm9jdXNQYWdlU2l6ZScpIGZvY3VzUGFnZVNpemVSZWY6IEVsZW1lbnRSZWY8YW55PjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BnbGlzdGluZm8nKSBwZ2xpc3RpbmZvOiBFbGVtZW50UmVmPGFueT47XHJcbiAgICBzaG93UGFnZXNQYW5lbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgcGFnZXJTZXJ2aWNlOiBQYWdpbmF0aW9uU2VydmljZSkge1xyXG4gICAgLy8gICAgIGlmICghdGhpcy5wYWdlclNlcnZpY2UpIHtcclxuICAgIC8vICAgICAgICAgdGhpcy5wYWdlclNlcnZpY2UgPSBuZXcgUGFnaW5hdGlvblNlcnZpY2UoKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgb25Nb3VzZUxlYXZlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25EaXJlY3RpdmUuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdldFRvdGFsSXRlbXMoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvd1BhZ2VzUGFuZWwgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVBhZ2VTaXplSGFuZGxlcigkZXZlbnQsIHBhZ2VzaXplKSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIC8vIOW9k+WJjemhteWGjeasoeeCueWHu1xyXG4gICAgICAgIGlmIChwYWdlc2l6ZSA9PT0gdGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdldFBhZ2VTaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dQYWdlc1BhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhpcy5yZW1vdmVPdmVybGF5KCk7XHJcbiAgICAgICAgdGhpcy5wYWdlU2l6ZUNoYW5nZS5lbWl0KHBhZ2VzaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VOdW1iZXJDaGFuZ2VkKGlucHV0RWw6IEtleWJvYXJkRXZlbnQsIG1heE51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlucHV0RWwudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA+IG1heE51bWJlcikge1xyXG4gICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBtYXhOdW1iZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgKGN1cnJlbnRQYWdlTnVtYmVyIDwgMSkge1xyXG4gICAgICAgICAgICAvLyAgICAgdGFyZ2V0LnZhbHVlID0gMTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VOdW1iZXJCbHVyKGlucHV0RWw6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGlucHV0RWwudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGFnZU51bWJlciA9IE51bWJlcih0YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGFnZU51bWJlciA8IDEpIHtcclxuICAgICAgICAgICAgdGFyZ2V0LnZhbHVlID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGFnZUxpc3QobmV3cGFnZUxpc3Q6IG51bWJlcltdKSB7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLnNldFBhZ2VMaXN0KG5ld3BhZ2VMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBnb3RvKCRldmVudCkge1xyXG4gICAgICAgIGxldCBuZXdwYWdlciA9IE51bWJlcigkZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBpZiAobmV3cGFnZXIgPCAxKSB7XHJcbiAgICAgICAgICAgIG5ld3BhZ2VyID0gMTtcclxuICAgICAgICAgICAgJGV2ZW50LnRhcmdldC52YWx1ZSA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdldEN1cnJlbnQoKSAhPT0gbmV3cGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uRGlyZWN0aXZlLmdvdG8obmV3cGFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIl19